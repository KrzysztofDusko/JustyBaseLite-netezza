"use strict";var K4=Object.create;var kf=Object.defineProperty;var J4=Object.getOwnPropertyDescriptor;var Q4=Object.getOwnPropertyNames;var Z4=Object.getPrototypeOf,e8=Object.prototype.hasOwnProperty;var G=(t,e)=>()=>(t&&(e=t(t=0)),e);var C=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),ht=(t,e)=>{for(var n in e)kf(t,n,{get:e[n],enumerable:!0})},Pw=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Q4(e))!e8.call(t,i)&&i!==n&&kf(t,i,{get:()=>e[i],enumerable:!(r=J4(e,i))||r.enumerable});return t};var z=(t,e,n)=>(n=t!=null?K4(Z4(t)):{},Pw(e||!t||!t.__esModule?kf(n,"default",{value:t,enumerable:!0}):n,t)),Is=t=>Pw(kf({},"__esModule",{value:!0}),t);var un,Bt,Kr,Ne,_s,GR=G(()=>{"use strict";un={AuthenticationRequest:82,ErrorResponse:69,NoticeResponse:78,BackendKeyData:75,ReadyForQuery:90,RowDescription:84,RowDescriptionStandard:88,DataRow:68,CommandComplete:67,EmptyQueryResponse:73,RowStandard:89,CopyInResponse:71,CopyOutResponse:72,CopyDone:99,CopyData:100},Bt={NzTypeRecAddr:1,NzTypeDouble:2,NzTypeInt:3,NzTypeFloat:4,NzTypeMoney:5,NzTypeDate:6,NzTypeNumeric:7,NzTypeTime:8,NzTypeTimestamp:9,NzTypeInterval:10,NzTypeTimeTz:11,NzTypeBool:12,NzTypeInt1:13,NzTypeBinary:14,NzTypeChar:15,NzTypeVarChar:16,NzDEPR_Text:17,NzTypeUnknown:18,NzTypeInt2:19,NzTypeInt8:20,NzTypeVarFixedChar:21,NzTypeGeometry:22,NzTypeVarBinary:23,NzDEPR_Blob:24,NzTypeNChar:25,NzTypeNVarChar:26,NzDEPR_NText:27,NzTypeJson:30,NzTypeJsonb:31,NzTypeJsonpath:32,NzTypeLastEntry:33,NzTypeIntvsAbsTimeFIX:39},Kr={CP_VERSION_2:2,CP_VERSION_3:3,CP_VERSION_4:4,CP_VERSION_5:5,CP_VERSION_6:6},Ne={HSV2_CLIENT_BEGIN:1,HSV2_DB:2,HSV2_USER:3,HSV2_OPTIONS:4,HSV2_REMOTE_PID:6,HSV2_CLIENT_TYPE:8,HSV2_PROTOCOL:9,HSV2_SSL_NEGOTIATE:11,HSV2_SSL_CONNECT:12,HSV2_APPNAME:13,HSV2_CLIENT_OS:14,HSV2_CLIENT_HOST_NAME:15,HSV2_CLIENT_OS_USER:16,HSV2_64BIT_VARLENA_ENABLED:17,HSV2_CLIENT_DONE:1e3},_s={DATA:1,ERROR:2,DONE:3}});function Mw(t){let e=t.readBigInt64LE(0),n=Number(e/1000n);return new Date(vw+n)}function Uw(t){let n=t.readInt32LE(0)*24*60*60*1e3;return new Date(vw+n)}function Yf(t){let e=t.readBigInt64LE(0),n=Number(e/1000000n),r=Number(e%1000000n),i=Math.floor(n/3600),s=Math.floor(n%3600/60),o=n%60;return{hours:i,minutes:s,seconds:o,microseconds:r,toString(){let a=String(i).padStart(2,"0"),l=String(s).padStart(2,"0"),c=String(o).padStart(2,"0");if(r>0){let u=String(r).padStart(6,"0");return`${a}:${l}:${c}.${u}`}return`${a}:${l}:${c}`}}}function Bw(t){if(!t)return null;let e=t.split(":"),n=parseInt(e[0],10)||0,r=parseInt(e[1],10)||0,i=(e[2]||"0").split("."),s=parseInt(i[0],10)||0,o=0;return i.length>1&&(o=parseInt(i[1].substring(0,6).padEnd(6,"0"),10)),{hours:n,minutes:r,seconds:s,microseconds:o,toString(){return t}}}function Fw(t){let e=t.readBigInt64LE(0),n=t.readInt32LE(8),r=Yf(t);if(n===0)return r.toString();let i=Math.floor(n/12),s=n%12;return i>0?`${i} years ${s} mons ${r.toString()}`:`${s} mons ${r.toString()}`}function Hw(t,e){let n=Yf(t),r=t.readInt32LE(e-4),i=r<0?"+":"-",s=Math.abs(r),o=Math.floor(s/3600),a=Math.floor(s%3600/60),l=s%60,c=String(o).padStart(2,"0");return l!==0?c+=":"+String(a).padStart(2,"0")+":"+String(l).padStart(2,"0"):a!==0&&(c+=":"+String(a).padStart(2,"0")),`${n.toString()}${i}${c}`}function Gw(t,e,n,r){let i=e<=9?1:e<=18?2:4,s=[];for(let f=0;f<i;f++)s.push(t.readUInt32LE(f*4));let o=(s[0]&xw)!==0?4294967295:0,a=new Array(Fa).fill(o);for(let f=Fa-r,p=0;f<Fa;f++,p++)a[f]=s[p];let l=(a[0]&xw)!==0;l&&n8(a);let c=new Array($c).fill(0);for(let f=0;f<$c;f++)c[$c-f-1]=t8(a);let u="",d=!0;for(let f=0;f<$c;f++)f<$c-n-1&&d&&c[f]===0||(d=!1,u+=String(c[f]));if(u===""&&(u="0"),n!==0){let f=u.slice(0,-n)||"0",p=u.slice(-n).padStart(n,"0");u=f+"."+p}l&&(u="-"+u);let E=parseFloat(u);return e<=15&&u===String(E)?E:u}function t8(t){let e=0;for(let n=0;n<Fa;n++){let r=t[n]+e*4294967296;r!==0?(t[n]=Math.floor(r/10),e=r%10):(t[n]=0,e=0)}return e}function n8(t){for(let n=0;n<Fa;n++)t[n]=~t[n]>>>0;let e=1;for(let n=Fa-1;n>=0&&e;n--){let r=t[n]+e;t[n]=r>>>0,e=r>4294967295?1:0}}var vw,Fa,$c,xw,Ww=G(()=>{"use strict";vw=Date.UTC(2e3,0,1);Fa=4,$c=38,xw=2147483648});var $R=C((NLe,$w)=>{"use strict";var WR=class{static readInt32(e,n=0){return e.readInt32BE(n)}static readInt16(e,n=0){return e.readInt16BE(n)}static writeInt32(e,n,r=0){if(Buffer.isBuffer(e))e.writeInt32BE(n,r);else{let i=Buffer.allocUnsafe(4);i.writeInt32BE(n,0),e.write(i)}}static writeInt16(e,n,r=0){if(Buffer.isBuffer(e))e.writeInt16BE(n,r);else{let i=Buffer.allocUnsafe(2);i.writeInt16BE(n,0),e.write(i)}}};$w.exports=WR});var Yw=C((OLe,kw)=>{var Ha=1e3,Ga=Ha*60,Wa=Ga*60,fo=Wa*24,i8=fo*7,s8=fo*365.25;kw.exports=function(t,e){e=e||{};var n=typeof t;if(n==="string"&&t.length>0)return o8(t);if(n==="number"&&isFinite(t))return e.long?l8(t):a8(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function o8(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var n=parseFloat(e[1]),r=(e[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*s8;case"weeks":case"week":case"w":return n*i8;case"days":case"day":case"d":return n*fo;case"hours":case"hour":case"hrs":case"hr":case"h":return n*Wa;case"minutes":case"minute":case"mins":case"min":case"m":return n*Ga;case"seconds":case"second":case"secs":case"sec":case"s":return n*Ha;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function a8(t){var e=Math.abs(t);return e>=fo?Math.round(t/fo)+"d":e>=Wa?Math.round(t/Wa)+"h":e>=Ga?Math.round(t/Ga)+"m":e>=Ha?Math.round(t/Ha)+"s":t+"ms"}function l8(t){var e=Math.abs(t);return e>=fo?Vf(t,e,fo,"day"):e>=Wa?Vf(t,e,Wa,"hour"):e>=Ga?Vf(t,e,Ga,"minute"):e>=Ha?Vf(t,e,Ha,"second"):t+" ms"}function Vf(t,e,n,r){var i=e>=n*1.5;return Math.round(t/n)+" "+r+(i?"s":"")}});var kR=C((CLe,Vw)=>{function c8(t){n.debug=n,n.default=n,n.coerce=l,n.disable=o,n.enable=i,n.enabled=a,n.humanize=Yw(),n.destroy=c,Object.keys(t).forEach(u=>{n[u]=t[u]}),n.names=[],n.skips=[],n.formatters={};function e(u){let d=0;for(let E=0;E<u.length;E++)d=(d<<5)-d+u.charCodeAt(E),d|=0;return n.colors[Math.abs(d)%n.colors.length]}n.selectColor=e;function n(u){let d,E=null,f,p;function h(...T){if(!h.enabled)return;let S=h,I=Number(new Date),R=I-(d||I);S.diff=R,S.prev=d,S.curr=I,d=I,T[0]=n.coerce(T[0]),typeof T[0]!="string"&&T.unshift("%O");let m=0;T[0]=T[0].replace(/%([a-zA-Z%])/g,(N,g)=>{if(N==="%%")return"%";m++;let L=n.formatters[g];if(typeof L=="function"){let y=T[m];N=L.call(S,y),T.splice(m,1),m--}return N}),n.formatArgs.call(S,T),(S.log||n.log).apply(S,T)}return h.namespace=u,h.useColors=n.useColors(),h.color=n.selectColor(u),h.extend=r,h.destroy=n.destroy,Object.defineProperty(h,"enabled",{enumerable:!0,configurable:!1,get:()=>E!==null?E:(f!==n.namespaces&&(f=n.namespaces,p=n.enabled(u)),p),set:T=>{E=T}}),typeof n.init=="function"&&n.init(h),h}function r(u,d){let E=n(this.namespace+(typeof d>"u"?":":d)+u);return E.log=this.log,E}function i(u){n.save(u),n.namespaces=u,n.names=[],n.skips=[];let d=(typeof u=="string"?u:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let E of d)E[0]==="-"?n.skips.push(E.slice(1)):n.names.push(E)}function s(u,d){let E=0,f=0,p=-1,h=0;for(;E<u.length;)if(f<d.length&&(d[f]===u[E]||d[f]==="*"))d[f]==="*"?(p=f,h=E,f++):(E++,f++);else if(p!==-1)f=p+1,h++,E=h;else return!1;for(;f<d.length&&d[f]==="*";)f++;return f===d.length}function o(){let u=[...n.names,...n.skips.map(d=>"-"+d)].join(",");return n.enable(""),u}function a(u){for(let d of n.skips)if(s(u,d))return!1;for(let d of n.names)if(s(u,d))return!0;return!1}function l(u){return u instanceof Error?u.stack||u.message:u}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}Vw.exports=c8});var qw=C((Xn,qf)=>{Xn.formatArgs=d8;Xn.save=f8;Xn.load=E8;Xn.useColors=u8;Xn.storage=h8();Xn.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Xn.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function u8(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let t;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function d8(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+qf.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let n=0,r=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(n++,i==="%c"&&(r=n))}),t.splice(r,0,e)}Xn.log=console.debug||console.log||(()=>{});function f8(t){try{t?Xn.storage.setItem("debug",t):Xn.storage.removeItem("debug")}catch{}}function E8(){let t;try{t=Xn.storage.getItem("debug")||Xn.storage.getItem("DEBUG")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function h8(){try{return localStorage}catch{}}qf.exports=kR()(Xn);var{formatters:p8}=qf.exports;p8.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var zw=C((yLe,Xw)=>{"use strict";Xw.exports=(t,e=process.argv)=>{let n=t.startsWith("-")?"":t.length===1?"-":"--",r=e.indexOf(n+t),i=e.indexOf("--");return r!==-1&&(i===-1||r<i)}});var Jw=C((bLe,Kw)=>{"use strict";var T8=require("os"),jw=require("tty"),fr=zw(),{env:Qt}=process,Ns;fr("no-color")||fr("no-colors")||fr("color=false")||fr("color=never")?Ns=0:(fr("color")||fr("colors")||fr("color=true")||fr("color=always"))&&(Ns=1);"FORCE_COLOR"in Qt&&(Qt.FORCE_COLOR==="true"?Ns=1:Qt.FORCE_COLOR==="false"?Ns=0:Ns=Qt.FORCE_COLOR.length===0?1:Math.min(parseInt(Qt.FORCE_COLOR,10),3));function YR(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function VR(t,e){if(Ns===0)return 0;if(fr("color=16m")||fr("color=full")||fr("color=truecolor"))return 3;if(fr("color=256"))return 2;if(t&&!e&&Ns===void 0)return 0;let n=Ns||0;if(Qt.TERM==="dumb")return n;if(process.platform==="win32"){let r=T8.release().split(".");return Number(r[0])>=10&&Number(r[2])>=10586?Number(r[2])>=14931?3:2:1}if("CI"in Qt)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(r=>r in Qt)||Qt.CI_NAME==="codeship"?1:n;if("TEAMCITY_VERSION"in Qt)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Qt.TEAMCITY_VERSION)?1:0;if(Qt.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in Qt){let r=parseInt((Qt.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Qt.TERM_PROGRAM){case"iTerm.app":return r>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Qt.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(Qt.TERM)||"COLORTERM"in Qt?1:n}function S8(t){let e=VR(t,t&&t.isTTY);return YR(e)}Kw.exports={supportsColor:S8,stdout:YR(VR(!0,jw.isatty(1))),stderr:YR(VR(!0,jw.isatty(2)))}});var Zw=C((Zt,zf)=>{var R8=require("tty"),Xf=require("util");Zt.init=O8;Zt.log=I8;Zt.formatArgs=m8;Zt.save=_8;Zt.load=N8;Zt.useColors=A8;Zt.destroy=Xf.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");Zt.colors=[6,2,3,4,5,1];try{let t=Jw();t&&(t.stderr||t).level>=2&&(Zt.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}Zt.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let n=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,s)=>s.toUpperCase()),r=process.env[e];return/^(yes|on|true|enabled)$/i.test(r)?r=!0:/^(no|off|false|disabled)$/i.test(r)?r=!1:r==="null"?r=null:r=Number(r),t[n]=r,t},{});function A8(){return"colors"in Zt.inspectOpts?!!Zt.inspectOpts.colors:R8.isatty(process.stderr.fd)}function m8(t){let{namespace:e,useColors:n}=this;if(n){let r=this.color,i="\x1B[3"+(r<8?r:"8;5;"+r),s=`  ${i};1m${e} \x1B[0m`;t[0]=s+t[0].split(`
`).join(`
`+s),t.push(i+"m+"+zf.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=g8()+e+" "+t[0]}function g8(){return Zt.inspectOpts.hideDate?"":new Date().toISOString()+" "}function I8(...t){return process.stderr.write(Xf.formatWithOptions(Zt.inspectOpts,...t)+`
`)}function _8(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function N8(){return process.env.DEBUG}function O8(t){t.inspectOpts={};let e=Object.keys(Zt.inspectOpts);for(let n=0;n<e.length;n++)t.inspectOpts[e[n]]=Zt.inspectOpts[e[n]]}zf.exports=kR()(Zt);var{formatters:Qw}=zf.exports;Qw.o=function(t){return this.inspectOpts.colors=this.useColors,Xf.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};Qw.O=function(t){return this.inspectOpts.colors=this.useColors,Xf.inspect(t,this.inspectOpts)}});var XR=C((wLe,qR)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?qR.exports=qw():qR.exports=Zw()});var s0=C((DLe,i0)=>{"use strict";var e0=z(require("crypto")),t0=z(require("os")),n0=z(require("tls")),r0=z(require("fs"));GR();var oe=$R(),Ft=XR()("nz:handshake"),zR=class{constructor(e,n,r,i={}){this._hsVersion=-1;this._protocol1=-1;this._protocol2=-1;this.NPSCLIENT_TYPE_DOTNET=11;this.backendProcessId=0;this.backendSecretKey=0;this._socket=e,this._stream=n,this._host=r,this._options=i,this._guardiumClientOS=process.platform,this._guardiumClientOSUser=process.env.USERNAME||process.env.USER||"unknown",this._guardiumAppName="scJs-Driver",this._guardiumClientHostName=t0.hostname()}async startup(e,n,r){if(!await this.connHandshakeNegotiate())throw new Error("Handshake negotiation unsuccessful");if(Ft("Sending handshake info"),!await this.connSendHandshakeInfo(e,n))throw new Error("Error in ConnSendHandshakeInfo");if(!await this.connAuthenticate(r))throw new Error("Error in ConnAuthenticate");if(!await this.connConnectionComplete())throw new Error("Error in ConnConnectionComplete");return this._stream}async _readExactly(e){return new Promise((n,r)=>{let i=this._stream.read(e);i?n(i):this._stream.once("readable",()=>{let s=this._stream.read(e);s&&n(s)})})}async readBytes(e){for(;;){let n=this._stream.read(e);if(n!==null)return n;await new Promise(r=>this._stream.once("readable",r))}}async readByte(){return(await this.readBytes(1))[0]}async connHandshakeNegotiate(){let e=Kr.CP_VERSION_6;for(;;){Ft(`Sending version: ${e}`),oe.writeInt32(this._stream,8),oe.writeInt16(this._stream,Ne.HSV2_CLIENT_BEGIN),oe.writeInt16(this._stream,e);let n=await this.readByte();if(Ft(`Got response: ${String.fromCharCode(n)}`),n===78)return this._hsVersion=e,this._protocol2=0,!0;if(n===77){let r=await this.readByte(),i=String.fromCharCode(r);i==="2"?e=Kr.CP_VERSION_2:i==="3"?e=Kr.CP_VERSION_3:i==="4"?e=Kr.CP_VERSION_4:i==="5"&&(e=Kr.CP_VERSION_5)}else return!1}}async connSendHandshakeInfo(e,n){return await this.connSendDatabase(e)?(await this.connSecureSession(),this.connSetNextDataProtocol(this._protocol1,this._protocol2),this._hsVersion===Kr.CP_VERSION_6||this._hsVersion===Kr.CP_VERSION_4?this.connSendHandshakeVersion4(this._hsVersion,n):this.connSendHandshakeVersion2(this._hsVersion,n)):!1}async connSendDatabase(e){let n=Buffer.from(e,"utf8"),r=6+n.length+1;return oe.writeInt32(this._stream,r),oe.writeInt16(this._stream,Ne.HSV2_DB),this._stream.write(n),this._stream.write(Buffer.from([0])),await this.readByte()===78}async connSecureSession(){let n=0,r=this._options.securityLevel;r==="OnlyUnsecuredSession"?n=1:r==="PreferredSecuredSession"?n=2:r==="OnlySecuredSession"&&(n=3),oe.writeInt32(this._stream,10),oe.writeInt16(this._stream,Ne.HSV2_SSL_NEGOTIATE),oe.writeInt32(this._stream,n);let i=await this.readByte();if(i===78){if(this._options.securityLevel==="OnlySecuredSession")throw new Error("Server refused secure session, but OnlySecuredSession was requested.");return!0}if(i===83){Ft("Upgrading to SSL...");let s=Buffer.alloc(6);s.writeInt32BE(6,0),s.writeInt16BE(Ne.HSV2_SSL_CONNECT,4),await new Promise(a=>{this._stream.write(s)?a():this._stream.once("drain",a)}),this._socket.removeAllListeners("data"),this._socket.removeAllListeners("readable");let o={socket:this._socket,rejectUnauthorized:!1};if(this._options.sslCerFilePath){this._options.rejectUnauthorized===!1?o.rejectUnauthorized=!1:o.rejectUnauthorized=!0;try{o.ca=r0.readFileSync(this._options.sslCerFilePath)}catch(a){throw Ft("Failed to load cert file",a),a}}return new Promise((a,l)=>{let c=n0.connect(o,()=>{Ft("SSL Connected"),this._stream=c,this._stream.on("error",u=>{Ft("Secure Stream Error",u)}),this.readByte().then(u=>{u===78?a(!0):l(new Error(`SSL Handshake failed: Unexpected response ${String.fromCharCode(u)}`))}).catch(u=>{Ft("Failed to read SSL confirmation",u),l(u)})});c.on("error",u=>{Ft("SSL Connection Error",u),l(u)})})}return!1}connSetNextDataProtocol(e,n){return this._protocol2===0&&(this._protocol2=5),this._protocol1=3,!0}async connSendHandshakeVersion4(e,n){let r=Buffer.from(n,"utf8"),i=6+r.length+1;oe.writeInt32(this._stream,i),oe.writeInt16(this._stream,Ne.HSV2_USER),this._stream.write(r),this._stream.write(Buffer.from([0]));let s=Ne.HSV2_APPNAME;for(;s!==0;){if(await this.readByte()!==78)return!1;switch(s){case Ne.HSV2_APPNAME:await this.sendStringOption(s,this._guardiumAppName),s=Ne.HSV2_CLIENT_OS;break;case Ne.HSV2_CLIENT_OS:await this.sendStringOption(s,this._guardiumClientOS),s=Ne.HSV2_CLIENT_HOST_NAME;break;case Ne.HSV2_CLIENT_HOST_NAME:await this.sendStringOption(s,this._guardiumClientHostName),s=Ne.HSV2_CLIENT_OS_USER;break;case Ne.HSV2_CLIENT_OS_USER:await this.sendStringOption(s,this._guardiumClientOSUser),s=Ne.HSV2_PROTOCOL;break;case Ne.HSV2_PROTOCOL:i=10,oe.writeInt32(this._stream,i),oe.writeInt16(this._stream,s),oe.writeInt16(this._stream,this._protocol1),oe.writeInt16(this._stream,this._protocol2),s=Ne.HSV2_REMOTE_PID;break;case Ne.HSV2_REMOTE_PID:i=10,oe.writeInt32(this._stream,i),oe.writeInt16(this._stream,s),oe.writeInt32(this._stream,process.pid),s=Ne.HSV2_CLIENT_TYPE;break;case Ne.HSV2_CLIENT_TYPE:i=8,oe.writeInt32(this._stream,i),oe.writeInt16(this._stream,s),oe.writeInt16(this._stream,11),e>=5?s=Ne.HSV2_64BIT_VARLENA_ENABLED:s=Ne.HSV2_CLIENT_DONE;break;case Ne.HSV2_64BIT_VARLENA_ENABLED:i=8,oe.writeInt32(this._stream,i),oe.writeInt16(this._stream,s),oe.writeInt16(this._stream,1),s=Ne.HSV2_CLIENT_DONE;break;case Ne.HSV2_CLIENT_DONE:return i=6,oe.writeInt32(this._stream,i),oe.writeInt16(this._stream,s),s=0,!0}}return!1}async connSendHandshakeVersion2(e,n){let r=Buffer.from(n,"utf8"),i=6+r.length+1;oe.writeInt32(this._stream,i),oe.writeInt16(this._stream,Ne.HSV2_USER),this._stream.write(r),this._stream.write(Buffer.from([0]));let s=Ne.HSV2_PROTOCOL;for(;s!==0;){Ft(`Waiting for response in v2 loop. Info: ${s}`);let o=await this.readByte();if(Ft(`Got response: ${String.fromCharCode(o)}`),o===78)switch(s){case Ne.HSV2_PROTOCOL:i=10,oe.writeInt32(this._stream,i),oe.writeInt16(this._stream,s),oe.writeInt16(this._stream,this._protocol1),oe.writeInt16(this._stream,this._protocol2),s=Ne.HSV2_REMOTE_PID;break;case Ne.HSV2_REMOTE_PID:i=10,oe.writeInt32(this._stream,i),oe.writeInt16(this._stream,s),oe.writeInt32(this._stream,process.pid),s=Ne.HSV2_CLIENT_TYPE;break;case Ne.HSV2_OPTIONS:s=Ne.HSV2_CLIENT_TYPE;break;case Ne.HSV2_CLIENT_TYPE:i=8,oe.writeInt32(this._stream,i),oe.writeInt16(this._stream,s),oe.writeInt16(this._stream,11),e===Kr.CP_VERSION_5||e===Kr.CP_VERSION_6?s=Ne.HSV2_64BIT_VARLENA_ENABLED:s=Ne.HSV2_CLIENT_DONE;break;case Ne.HSV2_64BIT_VARLENA_ENABLED:i=8,oe.writeInt32(this._stream,i),oe.writeInt16(this._stream,s),oe.writeInt16(this._stream,1),s=Ne.HSV2_CLIENT_DONE;break;case Ne.HSV2_CLIENT_DONE:return i=6,oe.writeInt32(this._stream,i),oe.writeInt16(this._stream,s),s=0,!0}else throw o===un.ErrorResponse?new Error("Handshake V2 Failed: ErrorResponse from backend"):new Error(`Handshake V2 Failed: Unexpected response ${String.fromCharCode(o)}`)}return!1}async sendStringOption(e,n){let r=Buffer.from(n,"utf8"),i=6+r.length+1;oe.writeInt32(this._stream,i),oe.writeInt16(this._stream,e),this._stream.write(r),this._stream.write(Buffer.from([0]))}async connAuthenticate(e){if(await this.readByte()!==un.AuthenticationRequest)return!1;let r=oe.readInt32(await this.readBytes(4));if(Ft(`Auth request: ${r}`),r===0)return!0;if(r===3){let i=Buffer.from(e,"utf8"),s=4+i.length+1;return oe.writeInt32(this._stream,s),this._stream.write(i),this._stream.write(Buffer.from([0])),!0}if(r===5){let i=await this.readBytes(2),s=Buffer.from(e,"utf8"),a=e0.createHash("md5").update(Buffer.concat([i,s])).digest("base64").replace(/=+$/,""),l=Buffer.from(a,"utf8"),c=4+l.length+1;return oe.writeInt32(this._stream,c),this._stream.write(l),this._stream.write(Buffer.from([0])),!0}return!1}async readString(){let e=[];for(;;){let n=await this.readByte();if(n===0)break;e.push(n)}return Buffer.from(e).toString("utf8")}async connConnectionComplete(){for(;;){let e=await this.readByte();if(Ft(`Resp: ${String.fromCharCode(e)} (0x${e.toString(16)})`),e===un.AuthenticationRequest){let r=oe.readInt32(await this.readBytes(4));Ft(`Auth req in complete: ${r}`);continue}if(e===un.ErrorResponse){let r=await this.readBytes(4),i=oe.readInt32(r);if(i<0||i>1e8){let o=r.toString("utf8");throw o+=await this.readString(),new Error(`Backend Error: ${o}`)}let s=await this.readBytes(i-4);throw new Error(`Backend Error: ${s.toString()}`)}let n=await this.readBytes(4);if(Ft(`Skipped 4 bytes: ${n.toString("hex")}`),e===un.BackendKeyData){let r=await this.readBytes(4);Ft(`KeyData Padding: ${r.toString("hex")}`);let i=oe.readInt32(await this.readBytes(4)),s=oe.readInt32(await this.readBytes(4));Ft(`KeyData: PID=${i} Key=${s}`),this.backendProcessId=i,this.backendSecretKey=s;continue}if(e===un.ReadyForQuery)return Ft("ReadyForQuery"),!0;if(e===un.NoticeResponse){let r=oe.readInt32(await this.readBytes(4)),i=await this.readBytes(r);Ft(`Notice: ${i.toString()}`);continue}}}};i0.exports=zR});var a0=C((PLe,o0)=>{"use strict";var jR=class{constructor(e){this.connection=e,this.commandText="",this.parameters=[],this._recordsAffected=-1,this.commandTimeout=e.commandTimeout!==void 0?e.commandTimeout:30}async execute(){return this.connection.execute(this,!1)}async executeNonQuery(){return await this.connection.execute(this,!1),this._recordsAffected}async executeReader(){return this.connection.executeReader(this)}async cancel(){return this.connection.cancel()}};o0.exports=jR});var c0=C((xLe,l0)=>{"use strict";var Re={Bool:16,Bytea:17,Char:18,Name:19,Int8:20,Int2:21,Int4:23,Text:25,ShowDate:2530,BpChar:1042,VarChar:1043,Date:1082,Time:1083,Timestamp:1114,TimestampTz:1184,Interval:1186,TimeTz:1266,Numeric:1700,Float4:700,Float8:701},kc=16,KR=class{constructor(e,n,r,i,s){this.currentRow=null;this.closed=!1;this._nameIndex={};this._pendingColumns=null;this._isFinished=!1;this.command=e,this.generator=n,this.columnDescriptions=r||[],this.releaseCallback=i,this._initNameIndex(),this._nextItem=s,this._hasRows=!!(this._nextItem&&this._nextItem.type==="DataRow")}get hasRows(){return this._hasRows}_initNameIndex(){if(this._nameIndex={},this.columnDescriptions)for(let e=0;e<this.columnDescriptions.length;e++)this._nameIndex[this.columnDescriptions[e].name.toLowerCase()]=e}_markFinished(){this._isFinished=!0,this._nextItem=null,this._hasRows=!1,this.releaseCallback&&(this.releaseCallback(),this.releaseCallback=null)}async nextResult(){if(this._pendingColumns){for(this.columnDescriptions=this._pendingColumns,this._pendingColumns=null,this._initNameIndex(),this.currentRow=null;;){let e=await this.generator.next();if(e.done){this._nextItem=null,this._hasRows=!1;break}let n=e.value;if(n.type!=="RowDescriptionStandard")if(n.type==="DataRow"){this._nextItem=n,this._hasRows=!0;break}else if(n.type==="CommandComplete"){this._nextItem=n,this._hasRows=!1;break}else{this._nextItem=n,this._hasRows=!1;break}}return!0}if(this.closed||this._isFinished)return!1;for(;;){let e;if(this._nextItem?(e={value:this._nextItem,done:!1},this._nextItem=null):e=await this.generator.next(),e.done)return this._markFinished(),!1;let n=e.value;if(n.type==="RowDescription"){this.columnDescriptions=n.columns,this._initNameIndex(),this.currentRow=null;continue}if(n.type==="RowDescriptionStandard"){let r=this.command?._preparedStatement;this.columnDescriptions.length===0&&r&&r.description&&(this.columnDescriptions=r.description,this._initNameIndex()),this.currentRow=null;continue}if(n.type==="DataRow")return this._nextItem=n,this._hasRows=!0,!0;if(n.type!=="CommandComplete"){if(n.type==="ErrorResponse")throw new Error(n.message||"Unknown Netezza Error");if(n.type==="ReadyForQuery")return this._markFinished(),!1}}}getSchemaTable(){if(!this.columnDescriptions)return[];let e=[];for(let n=0;n<this.columnDescriptions.length;n++){let r=this.columnDescriptions[n],i={ColumnName:r.name,ColumnOrdinal:n+1,ColumnSize:-1,NumericPrecision:0,NumericScale:0,DataType:String,ProviderType:r.typeOid,AllowDBNull:!0,IsReadOnly:!0,IsLong:!1},s=r.typeMod,o=r.typeOid;switch(o){case Re.Bool:i.DataType=Boolean,i.ColumnSize=1;break;case Re.Int2:i.DataType=Number,i.ColumnSize=2;break;case Re.Int4:i.DataType=Number,i.ColumnSize=4;break;case Re.Int8:i.DataType=Number,i.ColumnSize=8;break;case Re.Float4:case Re.Float8:i.DataType=Number,i.ColumnSize=o===Re.Float8?8:4,i.NumericPrecision=o===Re.Float8?53:24;break;case Re.Numeric:if(i.DataType=Number,s>kc){let a=s-kc>>16,l=s-kc&65535;i.NumericPrecision=a,i.NumericScale=l,i.ColumnSize=Math.floor(a/2)+1,i.ColumnSize<r.typeLen&&r.typeLen>0&&(i.ColumnSize=r.typeLen)}else i.ColumnSize=r.typeLen;break;case Re.Date:case Re.Timestamp:case Re.TimestampTz:case Re.Time:case Re.TimeTz:i.DataType=Date,(o===Re.Time||o===Re.TimeTz)&&(i.DataType=Object),i.ColumnSize=r.typeLen;break;case Re.Char:case Re.BpChar:case Re.VarChar:case Re.Text:case Re.Name:case Re.ShowDate:i.DataType=String,s>kc?i.ColumnSize=s-kc:(i.ColumnSize=-1,r.typeLen>0&&(i.ColumnSize=r.typeLen)),i.ColumnSize>8e3&&(i.IsLong=!0);break;default:i.DataType=String,i.ColumnSize=r.typeLen;break}e.push(i)}return{Rows:e,Columns:{Count:e.length}}}getTypeName(e){if(e<0||e>=this.columnDescriptions.length)throw new Error(`Column ordinal ${e} is out of range`);let r=this.columnDescriptions[e].typeOid;switch(r){case Re.Bool:return"BOOL";case Re.Bytea:return"BYTEA";case Re.Char:return"CHAR";case Re.Name:return"NAME";case Re.Int8:return"INT8";case Re.Int2:return"INT2";case Re.Int4:return"INT4";case Re.Text:return"TEXT";case Re.BpChar:return"CHAR";case Re.VarChar:return"VARCHAR";case Re.Date:return"DATE";case Re.Time:return"TIME";case Re.Timestamp:return"TIMESTAMP";case Re.TimestampTz:return"TIMESTAMPTZ";case Re.Interval:return"INTERVAL";case Re.TimeTz:return"TIMETZ";case Re.Numeric:return"NUMERIC";case Re.Float4:return"FLOAT4";case Re.Float8:return"FLOAT8";case 2530:return"DATE";case 15:return"CHAR";case 16:return"BOOL";default:return`UNKNOWN(${r})`}}async read(){if(this.closed||this._isFinished||this._pendingColumns)return!1;let e;if(this._nextItem?(e={value:this._nextItem,done:!1},this._nextItem=null):e=await this.generator.next(),e.done)return this._markFinished(),this.currentRow=null,!1;let n=e.value;if(n.type==="DataRow")return this.currentRow=n.row,!0;if(n.type==="RowDescription")return this._pendingColumns=n.columns,this.currentRow=null,!1;if(n.type==="RowDescriptionStandard"){let r=this.command?._preparedStatement;return this._pendingColumns=r&&r.description?r.description:this.columnDescriptions,this.currentRow=null,!1}if(n.type==="CommandComplete")return this.currentRow=null,this.read();if(n.type==="ErrorResponse")throw new Error(n.message||"Unknown Netezza Error");return n.type==="ReadyForQuery"?(this._markFinished(),this.currentRow=null,!1):this.read()}getValue(e){return this._validateOrdinal(e),this.currentRow[e]}getValueByName(e){let n=this.getOrdinal(e);return this.getValue(n)}getName(e){if(e<0||e>=this.columnDescriptions.length)throw new Error(`Column ordinal ${e} is out of range`);return this.columnDescriptions[e].name}getOrdinal(e){let n=this._nameIndex[e.toLowerCase()];if(n===void 0)throw new Error(`Column '${e}' not found`);return n}get fieldCount(){return this.columnDescriptions?.length||0}get FieldCount(){return this.fieldCount}isDBNull(e){return this._validateOrdinal(e),this.currentRow[e]===null}getBoolean(e){let n=this.getValue(e);return n===null?!1:typeof n=="boolean"?n:typeof n=="string"?n.toLowerCase()==="t"||n==="1"||n.toLowerCase()==="true":!!n}getByte(e){let n=this.getValue(e);return n===null?0:Number(n)&255}getInt16(e){let n=this.getValue(e);return n===null?0:Number(n)}getInt32(e){let n=this.getValue(e);return n===null?0:Number(n)}getInt64(e){let n=this.getValue(e);return n===null?0:typeof n=="bigint"?n:Number(n)}getFloat(e){let n=this.getValue(e);return n===null?0:Number(n)}getDouble(e){let n=this.getValue(e);return n===null?0:Number(n)}getDecimal(e){let n=this.getValue(e);return n===null?0:typeof n=="string"?n:Number(n)}getString(e){let n=this.getValue(e);return n===null?null:typeof n=="string"?n:n.toString?n.toString():String(n)}getDateTime(e){let n=this.getValue(e);return n===null?null:n instanceof Date?n:new Date(n)}getTimeSpan(e){let n=this.getValue(e);if(n===null)return null;if(typeof n=="object"&&"hours"in n)return n;if(typeof n=="string"){let r=n.split(":");if(r.length>=2){let i=(r[2]||"0").split(".");return{hours:parseInt(r[0],10),minutes:parseInt(r[1],10),seconds:parseInt(i[0],10),microseconds:i.length>1?parseInt(i[1].padEnd(6,"0"),10):0,toString(){return n}}}}return n}getRowObject(){if(!this.currentRow)return null;let e={};for(let n=0;n<this.columnDescriptions.length;n++)e[this.columnDescriptions[n].name]=this.currentRow[n];return e}getValues(){return this.currentRow?[...this.currentRow]:[]}async close(){if(!this.closed){if(this.closed=!0,!this._isFinished&&this.generator)try{for await(let e of this.generator)if(e.type==="ReadyForQuery")break}catch{}this.releaseCallback&&(this.releaseCallback(),this.releaseCallback=null)}}get isClosed(){return this.closed}_validateOrdinal(e){if(!this.currentRow)throw new Error("No current row. Did you call read()?");if(e<0||e>=this.columnDescriptions.length)throw new Error(`Column ordinal ${e} is out of range`)}async*[Symbol.asyncIterator](){for(;await this.read();)yield this.getRowObject()}};l0.exports=KR});var d0=C((vLe,u0)=>{"use strict";var JR=class{constructor(){this.version=null;this.nullsAllowed=null;this.sizeWord=null;this.sizeWordSize=null;this.numFixedFields=null;this.numVaryingFields=null;this.fixedFieldsSize=0;this.maxRecordSize=null;this.numFields=0;this.fieldType=[];this.fieldSize=[];this.fieldTrueSize=[];this.fieldOffset=[];this.fieldPhysField=[];this.fieldLogField=[];this.fieldNullAllowed=[];this.fieldFixedSize=[];this.fieldSpringField=[];this.dateStyle=null;this.euroDates=null}clear(){this.fieldType=[],this.fieldSize=[],this.fieldTrueSize=[],this.fieldOffset=[],this.fieldPhysField=[],this.fieldLogField=[],this.fieldNullAllowed=[],this.fieldFixedSize=[],this.fieldSpringField=[]}parse(e,n){this.clear();let r=0;this.version=e.readInt32BE(r),r+=4,this.nullsAllowed=e.readInt32BE(r),r+=4,this.sizeWord=e.readInt32BE(r),r+=4,this.sizeWordSize=e.readInt32BE(r),r+=4,this.numFixedFields=e.readInt32BE(r),r+=4,this.numVaryingFields=e.readInt32BE(r),r+=4,this.fixedFieldsSize=e.readInt32BE(r),r+=4,this.maxRecordSize=e.readInt32BE(r),r+=4,this.numFields=e.readInt32BE(r),r+=4;let i=3,s=39;for(let o=0;o<this.numFields;o++){let a=e.readInt32BE(r);a===i&&n?.description?.[o]?.typeOid===702&&(a=s),this.fieldType.push(a),this.fieldSize.push(e.readInt32BE(r+4)),this.fieldTrueSize.push(e.readInt32BE(r+8)),this.fieldOffset.push(e.readInt32BE(r+12)),this.fieldPhysField.push(e.readInt32BE(r+16)),this.fieldLogField.push(e.readInt32BE(r+20)),this.fieldNullAllowed.push(e.readInt32BE(r+24)!==0),this.fieldFixedSize.push(e.readInt32BE(r+28)),this.fieldSpringField.push(e.readInt32BE(r+32)),r+=36}this.dateStyle=e.readInt32BE(r),r+=4,this.euroDates=e.readInt32BE(r)}getFieldPrecision(e){return this.fieldSize[e]>>8&127}getFieldScale(e){return this.fieldSize[e]&255}getNumericDigitCount(e){return Math.floor(this.fieldTrueSize[e]/4)}};u0.exports=JR});var On=C((ULe,E0)=>{"use strict";var QR=z(require("net")),Os=z(require("fs")),f0=require("events");GR();Ww();var C8=s0(),_t=$R(),y8=a0(),b8=c0(),w8=d0(),he=XR()("nz:connection"),ZR=class t extends f0.EventEmitter{constructor(n){super();this._socket=null;this._stream=null;this._backendProcessId=0;this._backendSecretKey=0;this._commandNumber=-1;this._connected=!1;this._rowDescription=null;this._rows=[];this._tupdesc=new w8;this._tmpBuffer=Buffer.alloc(65536);this._intBuf=Buffer.allocUnsafe(65536);this._intBufStart=0;this._intBufEnd=0;this.commandTimeout=30;this.connectionTimeout=30;this._executing=!1;this._exportStream=null;this.config=n,n.connectionTimeout!==void 0&&(this.connectionTimeout=n.connectionTimeout)}static{this._streamRegistry=new Map}static registerImportStream(n,r){this._streamRegistry.set(n,r)}static unregisterImportStream(n){this._streamRegistry.delete(n)}async connect(){return new Promise((n,r)=>{if(!this.config.host)return r(new Error("Host is required"));let i=!1,s;this.connectionTimeout>0&&(s=setTimeout(()=>{i=!0,he("Connection timeout triggered after",this.connectionTimeout,"seconds"),this._socket&&this._socket.destroy(),r(new Error(`Connection timeout after ${this.connectionTimeout} seconds`))},this.connectionTimeout*1e3));let o=()=>{s&&(clearTimeout(s),s=void 0)};this._socket=new QR.Socket,this._socket.connect(this.config.port||5480,this.config.host,async()=>{if(i)return;he("Socket connected"),this._socket.setNoDelay(!0),this._stream=this._socket;let a=new C8(this._socket,this._stream,this.config.host,this.config);try{if(this._stream=await a.startup(this.config.database,this.config.user,this.config.password),i)return;o(),this._connected=!0,this._backendProcessId=a.backendProcessId,this._backendSecretKey=a.backendSecretKey,n()}catch(l){o(),this._socket.destroy(),r(l)}}),this._socket.on("error",a=>{he("Socket error",a),o(),this._connected?this.emit("error",a):r(a)}),this._socket.on("close",()=>{he("Socket closed"),o(),this._connected=!1,this.emit("close")})})}async cancel(){if(!(!this._backendProcessId||!this._backendSecretKey))return new Promise((n,r)=>{let i=new QR.Socket;i.on("error",s=>{he("Cancel socket error",s),r(s)}),i.connect(this.config.port||5480,this.config.host,()=>{let s=Buffer.alloc(16);_t.writeInt32(s,16,0),_t.writeInt32(s,80877102,4),_t.writeInt32(s,this._backendProcessId,8),_t.writeInt32(s,this._backendSecretKey,12),i.write(s,()=>{}),i.on("close",()=>n()),i.on("end",()=>n()),i.on("error",()=>n())})})}close(){this._socket&&(this._socket.end(),this._socket.destroy())}createCommand(n){let r=new y8(this);return n&&(r.commandText=n),r}async beginTransaction(){let n=this.createCommand("BEGIN");await this.execute(n)}async commit(){let n=this.createCommand("COMMIT");await this.execute(n)}async rollback(){let n=this.createCommand("ROLLBACK");await this.execute(n)}async _readBytes(n){if(this._intBufEnd-this._intBufStart>=n){let r=Buffer.from(this._intBuf.subarray(this._intBufStart,this._intBufStart+n));return this._intBufStart+=n,r}return this._readBytesSlow(n)}async _readBytesSlow(n){if(n>this._intBuf.length){let i=[],s=this._intBufEnd-this._intBufStart;s>0&&(i.push(Buffer.from(this._intBuf.subarray(this._intBufStart,this._intBufEnd))),this._intBufStart=0,this._intBufEnd=0);let o=n-s;for(;o>0;){let a=this._stream.read();a!==null?a.length<=o?(i.push(a),o-=a.length):(i.push(a.slice(0,o)),this._feedBuffer(a.slice(o)),o=0):await this._waitForReadable()}return Buffer.concat(i,n)}if(this._intBuf.length-this._intBufStart<n){let i=this._intBufEnd-this._intBufStart;this._intBuf.copy(this._intBuf,0,this._intBufStart,this._intBufEnd),this._intBufStart=0,this._intBufEnd=i}for(;this._intBufEnd-this._intBufStart<n;){let i=this._stream.read();if(i!==null){let s=this._intBuf.length-this._intBufEnd;i.length<=s?(i.copy(this._intBuf,this._intBufEnd),this._intBufEnd+=i.length):(i.copy(this._intBuf,this._intBufEnd,0,s),this._intBufEnd+=s,this._stream.unshift(i.slice(s)))}else await this._waitForReadable()}let r=Buffer.from(this._intBuf.subarray(this._intBufStart,this._intBufStart+n));return this._intBufStart+=n,r}async _waitForReadable(){if(!this._socket||this._socket.destroyed)throw new Error("Socket closed or destroyed during read");return new Promise((n,r)=>{let i=()=>{this._stream.removeListener("readable",s),this._stream.removeListener("close",o),this._stream.removeListener("error",a),this._stream.removeListener("end",o)},s=()=>{i(),n()},o=()=>{i(),r(new Error("Socket closed/ended during read"))},a=l=>{i(),r(l)};this._stream.once("readable",s),this._stream.once("close",o),this._stream.once("end",o),this._stream.once("error",a)})}_feedBuffer(n){this._stream.unshift(n)}async _readInt32(){await this._ensureBufferData(4);let n=this._intBuf.readInt32BE(this._intBufStart);return this._intBufStart+=4,n}async _readInt16(){await this._ensureBufferData(2);let n=this._intBuf.readInt16BE(this._intBufStart);return this._intBufStart+=2,n}async _readByte(){await this._ensureBufferData(1);let n=this._intBuf[this._intBufStart];return this._intBufStart+=1,n}async _ensureBufferData(n){if(!(this._intBufEnd-this._intBufStart>=n)){if(this._intBuf.length-this._intBufStart<n){let r=this._intBufEnd-this._intBufStart;this._intBuf.copy(this._intBuf,0,this._intBufStart,this._intBufEnd),this._intBufStart=0,this._intBufEnd=r}for(;this._intBufEnd-this._intBufStart<n;){let r=this._stream.read();if(r!==null){let i=this._intBuf.length-this._intBufEnd;r.length<=i?(r.copy(this._intBuf,this._intBufEnd),this._intBufEnd+=r.length):(r.copy(this._intBuf,this._intBufEnd,0,i),this._intBufEnd+=i,this._stream.unshift(r.slice(i)))}else await this._waitForReadable()}}}async execute(n,r=!1){let i=n.commandTimeout;if(!i||i<=0)return this._doExecute(n);let s,o=this._doExecute(n),a=new Promise((l,c)=>{s=setTimeout(async()=>{he("Command timeout triggered");try{await this.cancel(),c(new Error("Command execution timeout"))}catch(u){c(new Error("Command execution timeout (Cancel failed: "+u.message+")"))}},i*1e3)});try{return await Promise.race([o,a])}catch(l){throw l.message&&l.message.includes("Command execution timeout")&&o.catch(()=>{}),l}finally{clearTimeout(s)}}async _doExecute(n){if(this._executing)throw new Error("Connection is already executing a command");this._executing=!0;try{he("Executing:",n.commandText),this._preExecution(n.commandText);let r=null;for await(let i of this._responseGenerator(n))i.type==="ErrorResponse"&&(r=new Error("Netezza Error: "+i.message));if(r)throw r;return!0}finally{this._executing=!1}}async executeReader(n){let r=n.commandTimeout||this.commandTimeout;if(!r||r<=0)return this._doExecuteReader(n);let i,s=this._doExecuteReader(n),o=new Promise((a,l)=>{i=setTimeout(async()=>{he("Command timeout triggered");try{await this.cancel(),l(new Error("Command execution timeout"))}catch(c){l(new Error("Command execution timeout (Cancel failed: "+c.message+")"))}},r*1e3)});try{return await Promise.race([s,o])}catch(a){throw a.message&&a.message.includes("Command execution timeout")&&s.catch(()=>{}),a}finally{clearTimeout(i)}}async _doExecuteReader(n){if(this._executing)throw new Error("Connection is already executing a command");this._executing=!0;try{he("Executing Reader:",n.commandText),this._preExecution(n.commandText);let r=this._responseGenerator(n),i=[],s=await r.next(),o=null,a=null;for(;!s.done;){let l=s.value;if(l.type==="RowDescription")i=l.columns;else if(l.type==="RowDescriptionStandard"){let c=l.desc;if(c&&c.numFields>0&&i.length===0){let u=n._preparedStatement;u&&u.description&&(i=u.description)}}else if(l.type==="DataRow"||l.type==="CommandComplete"||l.type==="ReadyForQuery"){if(!o&&i.length>0){a=l;break}}else l.type==="ErrorResponse"&&(o=new Error("Netezza Error: "+l.message));s=await r.next()}if(o)throw this._executing=!1,o;return new b8(n,r,i,()=>{this._executing=!1},a)}catch(r){throw this._executing=!1,r}}_preExecution(n){let r=Buffer.from(n,"utf8"),i=Buffer.allocUnsafe(5+r.length+1);i[0]=80,this._commandNumber!==-1?(this._commandNumber++,i.writeInt32BE(this._commandNumber,1)):(i[1]=255,i[2]=255,i[3]=255,i[4]=255),this._commandNumber>1e5&&(this._commandNumber=1),r.copy(i,5),i[5+r.length]=0,this._stream.write(i)}async*_responseGenerator(n){this._rows=[],this._rowDescription=null;let r=!1;for(;!r;){let i=await this._readByte();for(;i===0;)i=await this._readByte();if(i===117){await this._handleExternalTableExportStart();continue}if(i===85){await this._handleExternalTableExportData();continue}if(i===108){await this._handleExternalTableImport();continue}if(i===120){await this._readBytes(4),he("Error operation cancel (Ext Tbl)");continue}if(i===101){await this._readBytes(4);let o=_t.readInt32(await this._readBytes(4)),a=(await this._readBytes(o-1)).toString("utf8");await this._readBytes(1);let l=[],c=(await this._readBytes(1))[0];for(l.push(c);c=(await this._readBytes(1))[0],c!==0;)l.push(c);let u=_t.readInt32(await this._readBytes(4));await this._consumeExternalTableLogData();continue}let s=await this._readBytes(4);if(i===un.CommandComplete){let o=await this._readInt32(),a=await this._readBytes(o);he("CommandComplete:",a.toString("utf8")),yield{type:"CommandComplete",text:a.toString("utf8")};continue}if(i===un.ReadyForQuery){r=!0,yield{type:"ReadyForQuery"};continue}if(i===76){r=!0;continue}if(!(i===48||i===65)){if(i===80){let o=await this._readInt32();await this._readBytes(o);continue}if(i===un.ErrorResponse){let o=await this._readInt32();yield{type:"ErrorResponse",message:(await this._readBytes(o)).toString("utf8")};continue}if(i===un.RowDescription){let o=await this._readInt32(),a=await this._readBytes(o);this._parseRowDescription(a,n),yield{type:"RowDescription",columns:this._rowDescription};continue}if(i===un.DataRow){let o=await this._readInt32(),a=await this._readBytes(o);yield{type:"DataRow",row:this._parseDataRow(a)};continue}if(i===un.RowDescriptionStandard){let o=await this._readInt32(),a=await this._readBytes(o);this._tupdesc.parse(a,n._preparedStatement),yield{type:"RowDescriptionStandard",desc:this._tupdesc};continue}if(i===un.RowStandard){yield{type:"DataRow",row:await this._resReadDbosTuple(n)};continue}if(i===un.NoticeResponse){let o=await this._readInt32(),l=(await this._readBytes(o)).toString("utf8").replace(/\0/g,"").trim();this.emit("notice",{message:l});continue}he("Unknown message:","0x"+i.toString(16));try{let o=await this._readInt32();o>0&&o<1e7&&await this._readBytes(o)}catch{}}}}async _consumeExternalTableLogData(){for(;;){let n=await this._readBytes(4),r=_t.readInt32(n);if(r===0)return;let i=await this._readBytes(r);he("ExtLog Content:",i.toString("utf8"))}}async _handleExternalTableExportStart(){await this._readBytes(4),await this._readBytes(10),await this._readBytes(16);let n=_t.readInt32(await this._readBytes(4)),i=(await this._readBytes(n)).toString("utf8");he("ExternalTable Export Start. File:",i);try{this._exportStream=Os.createWriteStream(i),this._exportStream.on("error",o=>{he("Export Stream Error:",o)});let s=Buffer.alloc(4);await new Promise(o=>this._stream.write(s,()=>o()))}catch(s){he("Error opening export file:",s);let o=Buffer.alloc(4);_t.writeInt32(o,1,0),this._stream.write(o)}}async _handleExternalTableExportData(){he("Handle Export Data: Skipping 8 bytes...");let n=await this._readBytes(4);he("Skipped 4:",n.toString("hex"));let r=await this._readBytes(4);he("Skipped 4 (2):",r.toString("hex")),await this._consumeExternalTableData(this._exportStream),this._exportStream=null}async _consumeExternalTableData(n){for(he("Entering Consume Loop");;){he("Reading status...");let r=await this._readBytes(4),i=_t.readInt32(r);if(he("ExtTab Status:",i),i===_s.DATA){let s=_t.readInt32(await this._readBytes(4));he("Block Length:",s);let o=await this._readBytes(s);n&&n.write(o)}else if(i===_s.DONE){he("ExternalTable Data Done"),n&&await new Promise(s=>{if(he("Waiting for writeStream finish..."),n.writableFinished)return he("Stream already finished"),s();let o=setTimeout(()=>{he("Stream finish timeout! Destroying..."),n.destroy(),s()},5e3),a=()=>{he("Stream finished event"),clearTimeout(o),c(),s()},l=u=>{he("Stream error on end:",u),clearTimeout(o),c(),s()},c=()=>{n.removeListener("finish",a),n.removeListener("error",l)};n.on("finish",a),n.on("error",l),n.end()});return}else if(i===_s.ERROR){let s=_t.readInt16(await this._readBytes(2)),o=(await this._readBytes(s)).toString("utf8");he("ExternalTable Data Error:",o),n&&n.end();return}else{he("Unknown ExtTab Status:",i),n&&n.end();return}}}async _handleExternalTableImport(){await this._readBytes(8);let n=[],r=(await this._readBytes(1))[0];for(n.push(r);r!==0;)r=(await this._readBytes(1))[0],r!==0&&n.push(r);let i=Buffer.from(n).toString("utf8");he("ExternalTable Import Start. File:",i);let s=_t.readInt32(await this._readBytes(4));he("Host Version:",s);let o=Buffer.alloc(4);_t.writeInt32(o,1,0),await new Promise(E=>this._stream.write(o,()=>E())),he("Sent Client Version");let a=_t.readInt32(await this._readBytes(4)),l=_t.readInt32(await this._readBytes(4));if(he("ExtTab Import Config:",{hostVersion:s,format:a,bufSize:l}),t._streamRegistry.has(i))he("Using virtual import stream for:",i);else if(!Os.existsSync(i)){he("Import file not found:",i);let E=Buffer.alloc(4);_t.writeInt32(E,_s.ERROR,0),this._stream.write(E);return}let c=0,u;t._streamRegistry.has(i)?(u=t._streamRegistry.get(i),c=u.byteLength||0):(c=Os.statSync(i).size,u=Os.createReadStream(i,{highWaterMark:l||65536}));let d=0;await new Promise((E,f)=>{u.on("data",p=>{let h=Buffer.isBuffer(p)?p:Buffer.from(p),T=Buffer.alloc(8);_t.writeInt32(T,_s.DATA,0),_t.writeInt32(T,h.length,4),this._stream.write(T),this._stream.write(h),d+=h.length,this.emit("importProgress",{bytesSent:d,totalSize:c,percentComplete:c>0?Math.round(d/c*100):0})}),u.on("end",()=>{he("Import Stream End");let p=Buffer.alloc(4);_t.writeInt32(p,_s.DONE,0),this._stream.write(p),E()}),u.on("error",p=>{he("Import Stream Error:",p);let h=Buffer.alloc(4);_t.writeInt32(h,_s.ERROR,0),this._stream.write(h);let T=p.message||"Error",S=Buffer.alloc(2);S.writeInt16BE(T.length),this._stream.write(S),this._stream.write(Buffer.from(T,"utf8")),f(p)})})}_parseRowDescription(n,r){he("parseRowDescription data length:",n.length,"hex:",n.toString("hex").substring(0,100));let i=0;if(n.length<2){he("Data too short for row description");return}let s=n.readInt16BE(i);i+=2,he("Column count:",s),this._rowDescription=[];for(let o=0;o<s&&i<n.length;o++){let a=i;for(;i<n.length&&n[i]!==0;)i++;let l=n.toString("utf8",a,i);if(i++,i+11>n.length){he("Not enough data for column",o,"at offset",i,"need 11 more, have",n.length-i);break}let c=n.readInt32BE(i);i+=4;let u=n.readInt16BE(i);i+=2;let d=n.readInt32BE(i);i+=4;let E=n[i];i+=1,this._rowDescription.push({name:l,typeOid:c,typeLen:u,typeMod:d,format:E}),he("Column",o,":",l,"typeOid:",c,"typeLen:",u)}r&&(r._preparedStatement={description:this._rowDescription})}_parseDataRow(n){let r=this._rowDescription.length,s=Math.ceil(r/8),o=[];for(let a=0;a<r;a++){let l=n[Math.floor(a/8)],c=7-a%8;if(!((l&1<<c)!==0)){o.push(null);continue}let d=n.readInt32BE(s);s+=4;let E=d-4;if(E<=0){o.push(null);continue}let p=this._rowDescription[a]?.typeOid,h=n.toString("utf8",s,s+E);p===1083?o.push(Bw(h)):o.push(h),s+=E}return o}async _resReadDbosTuple(n){let r=this._tupdesc.numFields;await this._readBytes(4);let i=_t.readInt32(await this._readBytes(4)),s=await this._readBytes(i),o=new Array(r);for(let a=0;a<r;a++){if(this._columnIsNull(s,a)){o[a]=null;continue}let l=this._cTableFieldAt(s,a),c=this._tupdesc.fieldType[a],u=this._tupdesc.fieldSize[a];o[a]=this._parseFieldByType(l,c,u,a)}return o}_parseFieldByType(n,r,i,s){switch(r){case Bt.NzTypeChar:return n.toString("latin1",0,i).trimEnd();case Bt.NzTypeNChar:case Bt.NzTypeNVarChar:{let o=n.readInt16LE(0)-2;return n.toString("utf8",2,2+o)}case Bt.NzTypeVarChar:case Bt.NzTypeVarFixedChar:{let o=n.readInt16LE(0)-2;return n.toString("latin1",2,2+o)}case Bt.NzTypeInt8:return n.readBigInt64LE(0);case Bt.NzTypeInt:return n.readInt32LE(0);case Bt.NzTypeInt2:return n.readInt16LE(0);case Bt.NzTypeInt1:return n.readInt8(0);case Bt.NzTypeDouble:return n.readDoubleLE(0);case Bt.NzTypeFloat:return n.readFloatLE(0);case Bt.NzTypeDate:return Uw(n);case Bt.NzTypeTime:return Yf(n);case Bt.NzTypeInterval:return Fw(n);case Bt.NzTypeTimeTz:return Hw(n,i);case Bt.NzTypeTimestamp:return Mw(n);case Bt.NzTypeBool:return n[0]===1;case Bt.NzTypeNumeric:{let o=this._tupdesc.getFieldPrecision(s),a=this._tupdesc.getFieldScale(s),l=this._tupdesc.getNumericDigitCount(s);return Gw(n,o,a,l)}default:return n.toString("utf8",0,i)}}_columnIsNull(n,r){if(!this._tupdesc.nullsAllowed)return!1;let i=this._tupdesc.fieldPhysField[r];return(n[2+Math.floor(i/8)]&1<<i%8)!==0}_cTableFieldAt(n,r){if(this._tupdesc.fieldFixedSize[r]!==0)return n.slice(this._tupdesc.fieldOffset[r]);let i=n.slice(this._tupdesc.fixedFieldsSize);for(let s=0;s<this._tupdesc.fieldOffset[r];s++){let o=i.readInt16LE(0);i=i.slice(o%2===0?o:o+1)}return i}};E0.exports=ZR});var jf={};ht(jf,{createNzConnection:()=>L8});function L8(t){let e=On();return new e(t)}var Kf=G(()=>{"use strict"});var Jf,vi,eA=G(()=>{"use strict";Jf=z(require("vscode")),vi=class t{constructor(e){this.context=e;this._connections={};this._activeConnectionName=null;this._documentConnections=new Map;this._persistentConnections=new Map;this._keepConnectionOpen=!1;this._onDidChangeConnections=new Jf.EventEmitter;this.onDidChangeConnections=this._onDidChangeConnections.event;this._onDidChangeActiveConnection=new Jf.EventEmitter;this.onDidChangeActiveConnection=this._onDidChangeActiveConnection.event;this._onDidChangeDocumentConnection=new Jf.EventEmitter;this.onDidChangeDocumentConnection=this._onDidChangeDocumentConnection.event;this._loadingPromise=this.loadConnections()}static{this.SERVICE_NAME="netezza-vscode-connections"}static{this.ACTIVE_CONN_KEY="netezza-active-connection"}async loadConnections(){this._activeConnectionName=this.context.globalState.get(t.ACTIVE_CONN_KEY)||null;let e=await this.context.secrets.get(t.SERVICE_NAME);if(e)try{this._connections=JSON.parse(e)}catch(n){console.error("Failed to parse connections:",n),this._connections={}}else{let n=await this.context.secrets.get("netezza-vscode");if(n)try{let r=JSON.parse(n);if(r&&r.host){let i=`Default (${r.host})`;this._connections={[i]:{...r,name:i}},this._activeConnectionName=i,await this.saveConnectionsToStorage()}}catch{}}this._onDidChangeConnections.fire()}async ensureLoaded(){await this._loadingPromise}async saveConnectionsToStorage(){await this.context.secrets.store(t.SERVICE_NAME,JSON.stringify(this._connections)),this._activeConnectionName?await this.context.globalState.update(t.ACTIVE_CONN_KEY,this._activeConnectionName):await this.context.globalState.update(t.ACTIVE_CONN_KEY,void 0)}async saveConnection(e){if(await this.ensureLoaded(),!e.name)throw new Error("Connection name is required");this._connections[e.name]=e,this._activeConnectionName||await this.setActiveConnection(e.name),await this.saveConnectionsToStorage(),this._onDidChangeConnections.fire()}async deleteConnection(e){if(await this.ensureLoaded(),this._connections[e]){if(await this.closePersistentConnection(e),delete this._connections[e],this._activeConnectionName===e){let n=Object.keys(this._connections);await this.setActiveConnection(n.length>0?n[0]:null)}await this.saveConnectionsToStorage(),this._onDidChangeConnections.fire()}}async getConnections(){return await this.ensureLoaded(),Object.values(this._connections)}async getConnection(e){return await this.ensureLoaded(),this._connections[e]}async setActiveConnection(e){await this.ensureLoaded(),this._activeConnectionName=e,await this.context.globalState.update(t.ACTIVE_CONN_KEY,e),this._onDidChangeActiveConnection.fire(e)}getActiveConnectionName(){return this._activeConnectionName}async getCurrentDatabase(e){await this.ensureLoaded();let n=e||this._activeConnectionName;return n&&this._connections[n]?.database||null}setKeepConnectionOpen(e){this._keepConnectionOpen=e,e||this.closeAllPersistentConnections()}getKeepConnectionOpen(){return this._keepConnectionOpen}async getPersistentConnection(e){let n=e||this._activeConnectionName;if(!n)throw new Error("No connection selected");let r=await this.getConnection(n);if(!r)throw new Error(`Connection '${n}' not found or invalid`);let i=this._persistentConnections.get(n);if(!i){let{createNzConnection:s}=(Kf(),Is(jf)),o=s({host:r.host,port:r.port||5480,database:r.database,user:r.user,password:r.password});await o.connect(),i=o,this._persistentConnections.set(n,i)}return i}async closePersistentConnection(e){let n=this._persistentConnections.get(e);if(n){try{await n.close()}catch(r){console.error(`Error closing connection ${e}:`,r)}this._persistentConnections.delete(e)}}async closeAllPersistentConnections(){for(let e of this._persistentConnections.keys())await this.closePersistentConnection(e)}dispose(){this.closeAllPersistentConnections(),this._onDidChangeConnections.dispose(),this._onDidChangeActiveConnection.dispose(),this._onDidChangeDocumentConnection.dispose()}getDocumentConnection(e){return this._documentConnections.get(e)}setDocumentConnection(e,n){this._documentConnections.set(e,n),this._onDidChangeDocumentConnection.fire(e)}clearDocumentConnection(e){this._documentConnections.delete(e),this._onDidChangeDocumentConnection.fire(e)}getConnectionForExecution(e){if(e){let n=this._documentConnections.get(e);if(n)return n}return this._activeConnectionName||void 0}}});var h0={};ht(h0,{QueryHistoryManager:()=>dn});var Mt,tA,dn,Qf=G(()=>{"use strict";Mt=z(require("fs")),tA=z(require("path")),dn=class t{constructor(e){this.context=e;this.cache=[];this.initialized=!1;this.writeQueue=Promise.resolve();this.archiveQueue=Promise.resolve();if(this.context.globalStorageUri){let n=this.context.globalStorageUri.fsPath;this.historyFilePath=tA.join(n,"query-history.json"),this.archiveFilePath=tA.join(n,"query-history-archive.json");try{Mt.existsSync(n)||Mt.mkdirSync(n,{recursive:!0})}catch(r){console.error("[QueryHistoryManager] Error creating storage directory:",r)}}this.initialize()}static{this.STORAGE_KEY="queryHistory"}static{this.ACTIVE_LIMIT=1e3}static{this.BATCH_ARCHIVE_SIZE=100}static{this.STORAGE_VERSION=1}async initialize(){if(!this.initialized)try{let e=!1;if(this.historyFilePath&&Mt.existsSync(this.historyFilePath))try{let n=await Mt.promises.readFile(this.historyFilePath,"utf-8");if(!n||!n.trim())console.log("[QueryHistoryManager] File is empty, starting fresh"),this.cache=[],e=!0;else{let r=JSON.parse(n);r&&r.entries&&(this.cache=r.entries,e=!0)}}catch(n){console.warn("[QueryHistoryManager] Corrupted history file, resetting:",n),this.cache=[],e=!0;try{await this.saveToStorage(),console.log("[QueryHistoryManager] Reset corrupted file to empty state")}catch(r){console.error("[QueryHistoryManager] Failed to reset file:",r)}}if(!e){let n=this.context.globalState.get(t.STORAGE_KEY);n&&n.entries&&(this.cache=n.entries,console.log(`\u2705 Migrated ${this.cache.length} entries from globalState`),await this.saveToStorage(),await this.context.globalState.update(t.STORAGE_KEY,void 0))}this.cache.length>t.ACTIVE_LIMIT+t.BATCH_ARCHIVE_SIZE&&(console.log(`[QueryHistoryManager] Cache (${this.cache.length}) exceeds active limit. Migrating to archive...`),await this.flushToArchive()),this.initialized=!0}catch(e){console.error("\u274C Error initializing query history:",e),this.cache=[],this.initialized=!0}}async saveToStorage(){if(!this.historyFilePath)return;let e=async()=>{try{let n={entries:this.cache,version:t.STORAGE_VERSION};await Mt.promises.writeFile(this.historyFilePath,JSON.stringify(n),"utf-8")}catch(n){console.error("Error saving to storage:",n)}};return this.writeQueue=this.writeQueue.then(e,e),this.writeQueue}async flushToArchive(){if(!this.archiveFilePath)return;let e=async()=>{try{if(this.cache.length-t.ACTIVE_LIMIT<=0)return;let r=this.cache.slice(t.ACTIVE_LIMIT);this.cache=this.cache.slice(0,t.ACTIVE_LIMIT),await this.saveToStorage();let i=[];if(Mt.existsSync(this.archiveFilePath))try{let o=await Mt.promises.readFile(this.archiveFilePath,"utf-8");if(o.trim()){let a=JSON.parse(o);i=Array.isArray(a)?a:a.entries||[]}}catch(o){console.warn("Error reading archive file, starting fresh archive append:",o)}let s=[...r,...i];await Mt.promises.writeFile(this.archiveFilePath,JSON.stringify({entries:s}),"utf-8"),console.log(`[QueryHistoryManager] Archived ${r.length} items. Active: ${this.cache.length}, Archive: ${s.length}`)}catch(n){console.error("Error flushing to archive:",n)}};return this.archiveQueue=this.archiveQueue.then(e,e),this.archiveQueue}async addEntry(e,n,r,i,s,o,a){try{this.initialized||await this.initialize();let l=`${Date.now()}-${Math.random().toString(36).substring(2,9)}`,c=Date.now(),u={id:l,host:e,database:n,schema:r,query:i.trim(),timestamp:c,connectionName:s,is_favorite:!1,tags:o||"",description:a||""};this.cache.unshift(u),this.cache.length>=t.ACTIVE_LIMIT+t.BATCH_ARCHIVE_SIZE?await this.flushToArchive():await this.saveToStorage()}catch(l){console.error("Error adding query to history:",l)}}async getHistory(e,n=0){return this.initialized||await this.initialize(),e!==void 0?this.cache.slice(n,n+e):[...this.cache]}async deleteEntry(e){try{this.initialized||await this.initialize();let n=this.cache.length;this.cache=this.cache.filter(r=>r.id!==e),this.cache.length!==n&&await this.saveToStorage()}catch(n){console.error("Error deleting entry:",n)}}async clearHistory(){try{this.initialized||await this.initialize(),this.cache=[],await this.saveToStorage(),this.archiveFilePath&&Mt.existsSync(this.archiveFilePath)&&await Mt.promises.unlink(this.archiveFilePath),console.log("All query history cleared")}catch(e){console.error("Error clearing history:",e)}}async getStats(){try{this.initialized||await this.initialize();let e=this.cache.length,n=JSON.stringify(this.cache),r=parseFloat((n.length/(1024*1024)).toFixed(2)),i=0,s=0;if(this.archiveFilePath&&Mt.existsSync(this.archiveFilePath)){let o=await Mt.promises.stat(this.archiveFilePath);s=parseFloat((o.size/(1024*1024)).toFixed(2));try{if(o.size<50*1024*1024){let a=await Mt.promises.readFile(this.archiveFilePath,"utf-8"),l=JSON.parse(a);l&&l.entries?i=l.entries.length:Array.isArray(l)&&(i=l.length)}else i=-1}catch(a){console.debug("[QueryHistoryManager] Error reading archive for stats:",a)}}return{activeEntries:e,archivedEntries:i===-1?99999:i,totalEntries:e+(i===-1?0:i),activeFileSizeMB:r,archiveFileSizeMB:s,totalFileSizeMB:parseFloat((r+s).toFixed(2))}}catch(e){return console.error("Error getting stats:",e),{activeEntries:0,archivedEntries:0,totalEntries:0,activeFileSizeMB:0,archiveFileSizeMB:0,totalFileSizeMB:0}}}async toggleFavorite(e){try{this.initialized||await this.initialize();let n=this.cache.find(r=>r.id===e);n&&(n.is_favorite=!n.is_favorite,await this.saveToStorage())}catch(n){console.error("Error toggling favorite:",n)}}async updateEntry(e,n,r){try{this.initialized||await this.initialize();let i=this.cache.find(s=>s.id===e);i&&(n!==void 0&&(i.tags=n),r!==void 0&&(i.description=r),await this.saveToStorage())}catch(i){console.error("Error updating entry:",i)}}async getFavorites(){return this.initialized||await this.initialize(),this.cache.filter(e=>e.is_favorite)}async getByTag(e){return this.initialized||await this.initialize(),this.cache.filter(n=>n.tags?.toLowerCase().includes(e.toLowerCase()))}async getAllTags(){this.initialized||await this.initialize();let e=new Set;return this.cache.forEach(n=>{n.tags&&n.tags.split(",").forEach(i=>{let s=i.trim();s&&e.add(s)})}),Array.from(e).sort()}async searchAll(e){this.initialized||await this.initialize();let n=e.toLowerCase();return this.cache.filter(i=>i.query.toLowerCase().includes(n)||i.host.toLowerCase().includes(n)||i.database&&i.database.toLowerCase().includes(n)||i.schema&&i.schema.toLowerCase().includes(n)||i.tags?.toLowerCase().includes(n)||i.description?.toLowerCase().includes(n))}async searchArchive(e,n=50){if(!this.archiveFilePath||!Mt.existsSync(this.archiveFilePath))return[];try{let r=await Mt.promises.readFile(this.archiveFilePath,"utf-8");if(!r)return[];let i=JSON.parse(r),s=Array.isArray(i)?i:i.entries||[],o=e.toLowerCase(),a=[];for(let l of s){if(a.length>=n)break;(l.query.toLowerCase().includes(o)||l.host.toLowerCase().includes(o)||l.database&&l.database.toLowerCase().includes(o))&&a.push(l)}return a}catch(r){return console.error("Error searching archive:",r),[]}}async getFilteredHistory(e,n,r,i){this.initialized||await this.initialize();let s=this.cache.filter(o=>!(e&&o.host!==e||n&&o.database!==n||r&&o.schema!==r));return i&&(s=s.slice(0,i)),s}async getArchivedHistory(){return[]}async clearArchive(){this.archiveFilePath&&Mt.existsSync(this.archiveFilePath)&&await Mt.promises.unlink(this.archiveFilePath)}close(){console.log("Query history manager closed")}}});function $a(t){let e=new Set;if(!t)return e;for(let n of t.matchAll(/\$\{([A-Za-z_][A-Za-z0-9_]*)\}/g))n[1]&&e.add(n[1]);for(let n of t.matchAll(/\$([A-Za-z_][A-Za-z0-9_]*)(?!\s*\})/g)){let r=n[0],i=n.index;if(i>0&&t[i-1]==="{")continue;let s=i+r.length;s<t.length&&t[s]==="}"||n[1]&&e.add(n[1])}return e}function ka(t){if(!t)return{sql:"",setValues:{}};let e=t.split(/\r?\n/),n=[],r={};for(let i of e){let s=i.match(/^\s*@SET\s+([A-Za-z0-9_]+)\s*=\s*(.+)$/i);if(s){let o=s[2].trim(),a=o.indexOf(";"),l="";a!==-1&&(l=o.substring(a+1).trim(),o=o.substring(0,a).trim()),o.endsWith(";")&&(o=o.slice(0,-1).trim());let c=o.match(/^'(.*)'$/s)||o.match(/^"(.*)"$/s);c&&(o=c[1]),r[s[1]]=o,l&&n.push(l)}else n.push(i)}return{sql:n.join(`
`),setValues:r}}function Zf(t,e){let n=t.replace(/\$\{([A-Za-z_][A-Za-z0-9_]*)\}/g,(i,s)=>e[s]??""),r=Object.keys(e).sort((i,s)=>s.length-i.length);for(let i of r)if(/^[A-Za-z_]/.test(i)){let s=new RegExp(`\\$${i}(?![A-Za-z0-9_])`,"g");n=n.replace(s,e[i]??"")}return n}var nA=G(()=>{"use strict"});var p0={};ht(p0,{VariableInputPanel:()=>rA});var Ya,rA,T0=G(()=>{"use strict";Ya=z(require("vscode")),rA=class t{constructor(e,n,r,i){this.extensionUri=n;this.variables=r;this.defaults=i;this._disposables=[];this._panel=e,this._panel.onDidDispose(()=>this.dispose(),null,this._disposables),this._panel.webview.html=this._getHtmlForWebview(this._panel.webview),this._panel.webview.onDidReceiveMessage(s=>{switch(s.command){case"submit":this._resolvePromise&&(this._resolvePromise(s.values),this._resolvePromise=void 0),this.dispose();return;case"cancel":this._resolvePromise&&(this._resolvePromise(void 0),this._resolvePromise=void 0),this.dispose();return}},null,this._disposables)}static async show(e,n,r){if(!r)throw new Error("extensionUri is required for VariableInputPanel");t.currentPanel&&t.currentPanel.dispose();let i=Ya.window.createWebviewPanel("netezzaVariableInput","SQL Variables",Ya.ViewColumn.One,{enableScripts:!0,retainContextWhenHidden:!1});return t.currentPanel=new t(i,r,e,n),new Promise(s=>{t.currentPanel._resolvePromise=s})}dispose(){for(t.currentPanel=void 0,this._panel.dispose();this._disposables.length;){let e=this._disposables.pop();e&&e.dispose()}}_getHtmlForWebview(e){let n=e.asWebviewUri(Ya.Uri.joinPath(this.extensionUri,"netezza_icon64.png")),r=this.variables.map(i=>{let s=this.defaults?.[i]||"";return`
                <div class="form-group">
                    <label for="var_${i}">${i}</label>
                    <input 
                        type="text" 
                        id="var_${i}" 
                        name="${i}"
                        placeholder="Enter value for ${i}"
                        value="${this._escapeHtml(s)}"
                        autocomplete="off"
                    >
                </div>`}).join(`
`);return`<!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>SQL Variables</title>
            <style>
                :root {
                    --container-padding: 20px;
                    --input-padding-vertical: 6px;
                    --input-padding-horizontal: 8px;
                }
                body {
                    font-family: var(--vscode-font-family);
                    padding: 0;
                    margin: 0;
                    color: var(--vscode-foreground);
                    background-color: var(--vscode-editor-background);
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    min-height: 100vh;
                }
                
                .container {
                    width: 100%;
                    max-width: 600px;
                    padding: var(--container-padding);
                }

                .form-container {
                    background-color: var(--vscode-editorWidget-background);
                    border: 1px solid var(--vscode-widget-border);
                    padding: 30px;
                    border-radius: 4px;
                    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
                }
                
                h2 {
                    margin-top: 0;
                    margin-bottom: 25px;
                    font-size: 1.4em;
                    font-weight: 500;
                    padding-bottom: 10px;
                    border-bottom: 1px solid var(--vscode-panel-border);
                    display: flex;
                    align-items: center;
                    gap: 10px;
                }

                .logo-header {
                    width: 32px;
                    height: 32px;
                    margin-right: 10px;
                }

                .description {
                    margin-bottom: 20px;
                    color: var(--vscode-descriptionForeground);
                    font-size: 13px;
                }

                .form-group {
                    margin-bottom: 18px;
                }

                label {
                    display: block;
                    margin-bottom: 6px;
                    font-weight: 600;
                    font-size: 12px;
                    color: var(--vscode-input-placeholderForeground);
                }

                input {
                    width: 100%;
                    padding: 8px 10px;
                    box-sizing: border-box;
                    background: var(--vscode-input-background);
                    color: var(--vscode-input-foreground);
                    border: 1px solid var(--vscode-input-border);
                    border-radius: 2px;
                    font-family: inherit;
                    font-size: 13px;
                }
                
                input:focus {
                    border-color: var(--vscode-focusBorder);
                    outline: 1px solid var(--vscode-focusBorder);
                }
                
                .actions {
                    margin-top: 30px;
                    display: flex;
                    gap: 12px;
                    padding-top: 20px;
                    border-top: 1px solid var(--vscode-panel-border);
                }
                
                button {
                    background: var(--vscode-button-background);
                    color: var(--vscode-button-foreground);
                    padding: 8px 16px;
                    border: none;
                    cursor: pointer;
                    border-radius: 2px;
                    font-size: 13px;
                    font-weight: 500;
                    flex: 1;
                }
                
                button:hover {
                    background: var(--vscode-button-hoverBackground);
                }
                
                button.secondary {
                    background: var(--vscode-button-secondaryBackground);
                    color: var(--vscode-button-secondaryForeground);
                }
                
                button.secondary:hover {
                    background: var(--vscode-button-secondaryHoverBackground);
                }

                .error {
                    color: var(--vscode-errorForeground);
                    font-size: 12px;
                    margin-top: 5px;
                    display: none;
                }

                .error.visible {
                    display: block;
                }
            </style>
        </head>
        <body>
            <div class="container">
                <div class="form-container">
                    <h2>
                        <img src="${n}" class="logo-header" />
                        SQL Variables
                    </h2>
                    
                    <div class="description">
                        Enter values for the following SQL variables. All fields are required.
                    </div>

                    <form id="variableForm">
                        ${r}
                        
                        <div id="errorMessage" class="error">
                            Please fill in all required fields.
                        </div>
                        
                        <div class="actions">
                            <button type="submit" id="btnExecute">Execute</button>
                            <button type="button" class="secondary" id="btnCancel">Cancel</button>
                        </div>
                    </form>
                </div>
            </div>

            <script>
                const vscode = acquireVsCodeApi();
                const form = document.getElementById('variableForm');
                const errorMessage = document.getElementById('errorMessage');
                const btnCancel = document.getElementById('btnCancel');

                form.addEventListener('submit', (e) => {
                    e.preventDefault();
                    
                    const formData = new FormData(form);
                    const values = {};
                    let hasEmptyFields = false;

                    for (const [key, value] of formData.entries()) {
                        const trimmedValue = value.toString().trim();
                        if (trimmedValue === '') {
                            hasEmptyFields = true;
                            break;
                        }
                        values[key] = trimmedValue;
                    }

                    if (hasEmptyFields) {
                        errorMessage.classList.add('visible');
                        return;
                    }

                    errorMessage.classList.remove('visible');
                    vscode.postMessage({
                        command: 'submit',
                        values: values
                    });
                });

                btnCancel.addEventListener('click', () => {
                    vscode.postMessage({
                        command: 'cancel'
                    });
                });

                // Focus first input
                const firstInput = document.querySelector('input');
                if (firstInput) {
                    firstInput.focus();
                }

                // Clear error on input
                form.addEventListener('input', () => {
                    errorMessage.classList.remove('visible');
                });
            </script>
        </body>
        </html>`}_escapeHtml(e){let n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return e.replace(/[&<>"']/g,r=>n[r])}}});function Er(t){if(t.startsWith("file:///")){let e=t.match(/^file:\/\/\/([A-Z]):\//i);if(e)return`file:///${e[1].toLowerCase()}:${t.substring(10)}`}return t}async function iA(t){let e=Er(typeof t=="string"?t:t.toString()),n=Cn.get(e);if(console.log(`[cancelQueryByUri] Found state for ${e}: ${!!n}`),n){n.isCancelled=!0;try{console.log(`[cancelQueryByUri] Calling cmd.cancel() for ${e}`),await n.command.cancel(),zn.window.showInformationMessage("Cancellation request sent.")}catch(r){let i=r instanceof Error?r.message:String(r);console.error(`[cancelQueryByUri] Failed to cancel: ${i}`),zn.window.showErrorMessage(`Failed to cancel query: ${i}`)}}else console.warn(`[cancelQueryByUri] No active command found for ${e}`),console.log(`[cancelQueryByUri] Active keys: ${Array.from(Cn.keys()).join(", ")}`)}async function sA(t,e,n,r){let i={};if(t.size===0)return i;if(e){let a=Array.from(t).filter(l=>!(n&&n[l]!==void 0));if(a.length>0)throw new Error("Query contains variables but silent mode is enabled; cannot prompt for values. Missing: "+a.join(", "));for(let l of t)i[l]=n[l];return i}let{VariableInputPanel:s}=(T0(),Is(p0)),o=await s.show(Array.from(t),n,r);if(!o)throw new Error("Variable input cancelled by user");return o}function D8(t,e){let n;return!t&&!e&&(n=zn.window.createOutputChannel("Netezza SQL"),n.show(!0)),{outputChannel:n,logCallback:e}}function Mi(t,e){t.outputChannel&&t.outputChannel.appendLine(e),t.logCallback&&t.logCallback(e)}async function P8(t,e,n){let r=ka(t),i=r.sql,s=r.setValues,o=$a(i);if(o.size>0){let a=new Set;for(let u of o)console.log(`[VariableDebug] Checking variable '${u}'. Value in defaults: '${s[u]}'`),s[u]===void 0&&a.add(u);let l={};a.size>0?(console.log(`[VariableDebug] Prompting for missing vars: ${Array.from(a).join(", ")}`),l=await sA(a,e,void 0,n)):console.log("[VariableDebug] All variables defined in defaults. Skipping prompt.");let c={...s,...l};i=Zf(i,c)}return i}function S0(t,e,n){let r=e;if(!r&&n&&(r=t.getConnectionForExecution(n)),r||(r=t.getActiveConnectionName()||void 0),!r)throw new Error("No connection selected");return r}async function eE(t,e,n){if(n)return{connection:await t.getPersistentConnection(e),shouldCloseConnection:!1};{let{createNzConnection:r}=(Kf(),Is(jf)),i=await t.getConnection(e);if(!i)throw new Error(`Connection '${e}' not found`);let s=r({host:i.host,port:i.port||5480,database:i.database,user:i.user,password:i.password});return await s.connect(),{connection:s,shouldCloseConnection:!0}}}async function R0(t,e,n,r,i){let s=Date.now(),o=1e4;try{let a=!1;do{for(;await t.read();){if(n){let l=Cn.get(Er(n));if(l&&l.isCancelled)break}if(Date.now()-s>o){a=!0;break}}if(a)break;if(Date.now()-s>o){a=!0;break}}while(await t.nextResult());if(a&&(console.warn(`consumeRestAndCancel timed out after ${o}ms, forcing cancel`),r&&i)){let l=`Cancellation is taking longer than expected. Do you want to force DROP SESSION ${r}?`;if(await zn.window.showWarningMessage(l,`Drop Session ${r}`,"Keep Waiting")===`Drop Session ${r}`)try{let u=i.getActiveConnectionName();if(u){let d=await i.getConnection(u);if(d){let{createNzConnection:E}=(Kf(),Is(jf)),f=E({host:d.host,port:d.port||5480,database:d.database,user:d.user,password:d.password});await f.connect();try{await(await f.createCommand(`DROP SESSION ${r}`).executeReader()).close(),zn.window.showInformationMessage(`Session ${r} dropped successfully.`)}finally{await f.close()}}}}catch(u){let d=u instanceof Error?u.message:String(u);zn.window.showErrorMessage(`Failed to drop session: ${d}`)}}await e.cancel()}catch(a){console.warn("Failed to cancel command after limit reached:",a)}}async function x8(t,e,n,r,i){let s=t.createCommand(e);s.commandTimeout=n,r&&Cn.set(Er(r),{command:s,isCancelled:!1,sessionId:i});try{let o=await s.executeReader(),a=[],l=[],c=2e5,u=0,d=!1;for(let E=0;E<o.fieldCount;E++)a.push({name:o.getName(E),type:o.getTypeName(E)});for(;await o.read();){if(r){let f=Cn.get(Er(r));if(f&&f.isCancelled)break}let E=[];for(let f=0;f<o.fieldCount;f++)E.push(o.getValue(f));if(l.push(E),u++,u>=c){d=!0;break}}return{columns:a,data:l,limitReached:d}}finally{r&&Cn.delete(Er(r))}}async function v8(t,e,n,r){let i="unknown",s=await e.getConnection(n);s&&new dn(t).addEntry(s.host,s.database,i,r,n).catch(a=>console.error("History log error:",a))}async function ce(t,e,n=!1,r,i,s,o,a){let l=r||new vi(t),c=l.getKeepConnectionOpen(),u=D8(n,o);Mi(u,"Executing query..."),i&&Mi(u,`Target Connection: ${i}`);try{let d=await P8(e,n,a||t.extensionUri),E=S0(l,i,s);Mi(u,`Using connection: ${E}`),Mi(u,"Connecting to database...");let{connection:f,shouldCloseConnection:p}=await eE(l,E,c);if(Mi(u,"Connected."),u.outputChannel){let T=S=>{let I=S;u.outputChannel.appendLine(`NOTICE: ${I.message}`)};f.on("notice",T)}let h;try{let S=await f.createCommand("SELECT CURRENT_SID").executeReader();await S.read()&&(h=String(S.getValue(0))),await S.close()}catch{}try{let S=zn.workspace.getConfiguration("netezza").get("queryTimeout",1800);Mi(u,"Executing SQL on server...");let{columns:I,data:R,limitReached:m}=await x8(f,d,S,s,h);return await v8(t,l,E,e),I.length>0?(Mi(u,"Query completed."),{columns:I,data:R,rowsAffected:void 0,limitReached:m,sql:d}):(Mi(u,"Query executed successfully (no results)."),{columns:[],data:[],rowsAffected:void 0,message:"Query executed successfully (no results).",sql:d})}finally{p&&f&&await f.close()}}catch(d){let f=`Error: ${d.message||String(d)}`;throw Mi(u,f),new Error(f)}}async function fn(t,e,n=!1,r,i,s){let o=await ce(t,e,n,i,r,s);if(o.data&&o.data.length>0){let a=o.data.map(c=>{let u={};return o.columns.forEach((d,E)=>{u[d.name]=c[E]}),u});return JSON.stringify(a,(c,u)=>typeof u=="bigint"?u>=Number.MIN_SAFE_INTEGER&&u<=Number.MAX_SAFE_INTEGER?Number(u):u.toString():u,2)}else if(o.message)return o.message}function Te(t){return!t.columns||!t.data||t.data.length===0?[]:t.data.map(e=>{let n={};return t.columns.forEach((r,i)=>{let s=e[i];typeof s=="bigint"&&(s>=Number.MIN_SAFE_INTEGER&&s<=Number.MAX_SAFE_INTEGER?s=Number(s):s=s.toString()),n[r.name]=s}),n})}async function A0(t,e,n,r,i){let s=r||new vi(t),o=s.getKeepConnectionOpen(),a=[],l=S0(s,n,i),{connection:c,shouldCloseConnection:u}=await eE(s,l,o);try{let d=E=>{let f=E;a.push(f.message)};c.on("notice",d);try{let f=zn.workspace.getConfiguration("netezza").get("queryTimeout",1800),p=c.createCommand(e);p.commandTimeout=f,i&&Cn.set(i,{command:p,isCancelled:!1});try{let h=await p.executeReader();for(;await h.read();)if(i){let T=Cn.get(i);if(T&&T.isCancelled)break}}finally{i&&Cn.delete(i)}}finally{c.removeListener("notice",d)}}finally{u&&c&&await c.close()}return a.join(`
`)}async function Yc(t,e,n,r,i,s,o){let a=n||new vi(t),l=a.getKeepConnectionOpen(),c;i||(c=zn.window.createOutputChannel("Netezza SQL"),c.show(!0),c.appendLine(`Executing ${e.length} queries sequentially...`));let u=[],d=n?n.getConnectionForExecution(r):void 0;if(d||(d=a.getActiveConnectionName()||void 0),!d)throw c&&c.appendLine("Error: No connection selected"),i&&i("Error: No connection selected"),new Error("No connection selected");try{let E=await a.getConnection(d);if(!E)throw new Error(`Connection '${d}' not found`);c&&c.appendLine(`Using connection: ${d}`),i&&i(`Using connection: ${d}`),c&&c.appendLine("Connecting to database..."),i&&i("Connecting to database...");let{connection:f,shouldCloseConnection:p}=await eE(a,d,l);f.on("notice",h=>{let T=h;c&&c.appendLine(`NOTICE: ${T.message}`),i&&i(`NOTICE: ${T.message}`)});try{let h="unknown",T;try{let L=await f.createCommand("SELECT CURRENT_SID").executeReader();if(await L.read()){let y=L.getValue(0);y!==void 0&&(T=String(y),i&&i(`Connected. Session ID: ${T}`))}await L.close()}catch(g){console.debug("Could not retrieve session ID:",g),i&&i("Connected.")}let S=new dn(t),I=d,R=new Set,m={};for(let g of e){let L=ka(g);Object.assign(m,L.setValues),$a(L.sql).forEach(D=>R.add(D))}let A=new Set;for(let g of R)m[g]===void 0&&A.add(g);let N={...m};if(A.size>0){let g=await sA(A,!1,void 0,o||t.extensionUri);Object.assign(N,g)}for(let g=0;g<e.length;g++){let L=e[g],y=`Executing query ${g+1}/${e.length}...`;c&&c.appendLine(y),i&&i(y);try{let D=ka(L),x=Zf(D.sql,N),H=zn.workspace.getConfiguration("netezza").get("queryTimeout",1800),X=Date.now(),{results:J,error:ee}=await M8(f,x,2e5,H,r,T?String(T):void 0,a),Q=Date.now()-X;if(i&&i(`Executed query ${g+1}/${e.length} in ${Q}ms`),S.addEntry(E.host,E.database,h,L,I).catch(ie=>{console.error("Failed to log query to history:",ie)}),J&&J.length>0)for(let ie of J)ie.columns.length>0?u.push({columns:ie.columns,data:ie.rows,rowsAffected:void 0,limitReached:ie.limitReached,sql:x}):u.push({columns:[],data:[],rowsAffected:void 0,message:"Query executed successfully",sql:x});if(s&&J&&J.length>0){let ie=[];for(let fe of J)fe.columns.length>0?ie.push({columns:fe.columns,data:fe.rows,rowsAffected:void 0,limitReached:fe.limitReached,sql:x}):ie.push({columns:[],data:[],rowsAffected:void 0,message:"Query executed successfully",sql:x});s(ie)}if(ee)throw ee}catch(D){let x=D instanceof Error?D.message:String(D);throw c&&c.appendLine(`Error in query ${g+1}: ${x}`),new Error(x)}}c&&c.appendLine("All queries completed.")}finally{p&&await f.close()}}catch(E){let p=`Error: ${E.message||String(E)}`;throw c&&c.appendLine(p),i&&i(p),new Error(p)}return u}async function M8(t,e,n,r,i,s,o){let a=t.createCommand(e);r&&r>0&&(a.commandTimeout=r),i&&Cn.set(Er(i),{command:a,isCancelled:!1,sessionId:s});try{let l=await a.executeReader(),c=[],u=!0,d;try{do{let E=[],f=[],p=0,h=!1;for(let T=0;T<l.fieldCount;T++)E.push({name:l.getName(T),type:l.getTypeName(T)});for(;await l.read();){if(i){let T=Cn.get(Er(i));if(T&&T.isCancelled)throw new Error("Query cancelled by user")}if(p<n){let T=[];for(let S=0;S<l.fieldCount;S++)T.push(l.getValue(S));f.push(T),p++}if(p>=n){h=!0,await R0(l,a,i,s,o);break}}c.push({columns:E,rows:f,limitReached:h}),u=await l.nextResult()}while(u)}catch(E){d=E instanceof Error?E:new Error(String(E))}return{results:c,error:d}}finally{i&&Cn.delete(Er(i))}}async function U8(t,e,n,r,i,s,o,a,l){let c=t.createCommand(e);i&&i>0&&(c.commandTimeout=i),s&&Cn.set(Er(s),{command:c,isCancelled:!1,sessionId:a});try{let u=await c.executeReader(),d,E=0,f=!1;try{let p=[],h=[],T=!0;for(let S=0;S<u.fieldCount;S++)p.push({name:u.getName(S),type:u.getTypeName(S)});for(;await u.read();){if(s){let I=Cn.get(Er(s));if(I&&I.isCancelled)throw new Error("Query cancelled by user")}let S=[];for(let I=0;I<u.fieldCount;I++)S.push(u.getValue(I));if(h.push(S),E++,h.length>=r&&(o({columns:T?p:[],rows:h,isFirstChunk:T,isLastChunk:!1,totalRowsSoFar:E,limitReached:!1}),h=[],T=!1),E>=n){f=!0,await R0(u,c,s,a,l);break}}if(s){let S=Cn.get(Er(s));if(S&&S.isCancelled)return{totalRows:E,limitReached:f,error:d}}o({columns:T?p:[],rows:h,isFirstChunk:T,isLastChunk:!0,totalRowsSoFar:E,limitReached:f})}catch(p){d=p instanceof Error?p:new Error(String(p))}return{totalRows:E,limitReached:f,error:d}}finally{s&&Cn.delete(Er(s))}}async function m0(t,e,n,r,i,s,o=5e3,a){let l=n||new vi(t),c=l.getKeepConnectionOpen(),u;i||(u=zn.window.createOutputChannel("Netezza SQL"),u.show(!0),u.appendLine(`Executing ${e.length} queries with streaming...`));let d=n?n.getConnectionForExecution(r):void 0;if(d||(d=l.getActiveConnectionName()||void 0),!d){let E="Error: No connection selected";throw u&&u.appendLine(E),i&&i(E),new Error("No connection selected")}try{let E=await l.getConnection(d);if(!E)throw new Error(`Connection '${d}' not found`);let{connection:f,shouldCloseConnection:p}=await eE(l,d,c);f.on("notice",h=>{let T=h;u&&u.appendLine(`NOTICE: ${T.message}`),i&&i(`NOTICE: ${T.message}`)});try{let h;try{let g=await f.createCommand("SELECT CURRENT_SID").executeReader();await g.read()&&(h=String(g.getValue(0)),i&&i(`Connected. Session ID: ${h}`)),await g.close()}catch(N){console.debug("Could not retrieve session ID:",N),i&&i("Connected.")}let T=new dn(t),S="unknown",I=new Set,R={};for(let N of e){let g=ka(N);Object.assign(R,g.setValues),$a(g.sql).forEach(y=>I.add(y))}let m=new Set;for(let N of I)R[N]===void 0&&m.add(N);let A={...R};if(m.size>0){let N=await sA(m,!1,void 0,a||t.extensionUri);Object.assign(A,N)}for(let N=0;N<e.length;N++){let g=e[N],L=`Executing query ${N+1}/${e.length}...`;u&&u.appendLine(L),i&&i(L);try{let y=ka(g),D=Zf(y.sql,A),B=zn.workspace.getConfiguration("netezza").get("queryTimeout",1800),H=Date.now(),{totalRows:X,limitReached:J,error:ee}=await U8(f,D,2e5,o,B,r,ie=>{s&&s(N,ie,D)},h,l),Q=Date.now()-H;if(i&&i(`Query ${N+1}/${e.length}: ${X} rows in ${Q}ms${J?" (limit reached)":""}`),T.addEntry(E.host,E.database,S,g,d).catch(ie=>console.error("Failed to log query to history:",ie)),ee)throw ee}catch(y){let D=y instanceof Error?y.message:String(y);throw u&&u.appendLine(`Error in query ${N+1}: ${D}`),new Error(D)}}u&&u.appendLine("All queries completed.")}finally{p&&await f.close()}}catch(E){let p=`Error: ${E.message||String(E)}`;throw u&&u.appendLine(p),i&&i(p),new Error(p)}}var zn,Cn,En=G(()=>{"use strict";zn=z(require("vscode"));eA();Qf();nA();Cn=new Map});var _0={};ht(_0,{SqlParser:()=>Fn});var Fn,Eo=G(()=>{"use strict";Fn=class{static splitStatements(e){let n=[],r="",i=!1,s=!1,o=!1,a=!1,l=0;for(;l<e.length;){let c=e[l],u=l+1<e.length?e[l+1]:"";if(o)c===`
`&&(o=!1);else if(a){if(c==="*"&&u==="/"){a=!1,r+=c+u,l++,l++;continue}}else if(i)c==="'"&&(i=!1);else if(s)c==='"'&&(s=!1);else if(c==="-"&&u==="-")o=!0;else if(c==="/"&&u==="*")a=!0;else if(c==="'")i=!0;else if(c==='"')s=!0;else if(c===";"){r.trim()&&n.push(r.trim()),r="",l++;continue}r+=c,l++}return r.trim()&&n.push(r.trim()),n}static getStatementAtPosition(e,n){let r=0,i=e.length,s=!1,o=!1,a=!1,l=!1,c=-1;for(let d=0;d<n;d++){let E=e[d],f=d+1<e.length?e[d+1]:"";a?E===`
`&&(a=!1):l?E==="*"&&f==="/"&&(l=!1,d++):s?E==="'"&&(s=!1):o?E==='"'&&(o=!1):E==="-"&&f==="-"?a=!0:E==="/"&&f==="*"?l=!0:E==="'"?s=!0:E==='"'?o=!0:E===";"&&(c=d)}r=c+1,s=!1,o=!1,a=!1,l=!1;for(let d=r;d<e.length;d++){let E=e[d],f=d+1<e.length?e[d+1]:"";if(a)E===`
`&&(a=!1);else if(l)E==="*"&&f==="/"&&(l=!1,d++);else if(s)E==="'"&&(s=!1);else if(o)E==='"'&&(o=!1);else if(E==="-"&&f==="-")a=!0;else if(E==="/"&&f==="*")l=!0;else if(E==="'")s=!0;else if(E==='"')o=!0;else if(E===";"){i=d;break}}let u=e.substring(r,i).trim();return u?{sql:u,start:r,end:i}:null}static getObjectAtPosition(e,n){let r=c=>/[a-zA-Z0-9_."]/i.test(c),i=n;for(;i>0&&r(e[i-1]);)i--;let s=n;for(;s<e.length&&r(e[s]);)s++;let o=e.substring(i,s);if(!o)return null;let a=c=>c?c.replace(/"/g,""):void 0;if(o.includes("..")){let c=o.split("..");if(c.length===2)return{database:a(c[0]),name:a(c[1])}}let l=o.split(".");return l.length===1?{name:a(l[0])}:l.length===2?{schema:a(l[0]),name:a(l[1])}:l.length===3?{database:a(l[0]),schema:a(l[1]),name:a(l[2])}:null}}});var B0={};ht(B0,{exportToCsv:()=>TA});async function TA(t,e,n,r,i,s){let o=null;try{i&&i.report({message:"Connecting to database..."});let a={host:e.host,port:e.port||5480,database:e.database,user:e.user,password:e.password},l=On();o=new l(a),await o.connect(),i&&i.report({message:"Executing query..."});let c=o.createCommand(n);s&&(c.commandTimeout=s);let u=await c.executeReader();i&&i.report({message:"Writing to CSV..."});let d=U0.createWriteStream(r,{encoding:"utf8",highWaterMark:64*1024}),E=[];for(let T=0;T<u.fieldCount;T++)E.push(u.getName(T));E.length>0&&d.write(E.map(M0).join(",")+`
`);let f=0,p=[],h=500;for(;await u.read();){f++;let T=[];for(let S=0;S<u.fieldCount;S++)T.push(M0(u.getValue(S)));if(p.push(T.join(",")),p.length>=h){let S=d.write(p.join(`
`)+`
`);p=[],S||await new Promise(I=>d.once("drain",I)),i&&f%1e3===0&&i.report({message:`Processed ${f} rows...`})}}p.length>0&&d.write(p.join(`
`)+`
`),d.end(),await new Promise((T,S)=>{d.on("finish",T),d.on("error",S)}),i&&i.report({message:`Completed: ${f} rows exported`})}finally{if(o)try{await o.close()}catch(a){console.error("Error closing connection:",a)}}}function M0(t){if(t==null)return"";let e="";return typeof t=="bigint"?t>=Number.MIN_SAFE_INTEGER&&t<=Number.MAX_SAFE_INTEGER?e=Number(t).toString():e=t.toString():t instanceof Date?e=t.toISOString():typeof t=="object"&&Buffer.isBuffer(t)?e=t.toString("hex"):typeof t=="object"?e=JSON.stringify(t):e=String(t),e.includes('"')||e.includes(",")||e.includes(`
`)||e.includes("\r")?`"${e.replace(/"/g,'""')}"`:e}var U0,SA=G(()=>{"use strict";U0=z(require("fs"))});var H0=C((uPe,F0)=>{var oJ=typeof process=="object"&&process&&process.platform==="win32";F0.exports=oJ?{sep:"\\"}:{sep:"/"}});var RA=C((dPe,k0)=>{"use strict";k0.exports=W0;function W0(t,e,n){t instanceof RegExp&&(t=G0(t,n)),e instanceof RegExp&&(e=G0(e,n));var r=$0(t,e,n);return r&&{start:r[0],end:r[1],pre:n.slice(0,r[0]),body:n.slice(r[0]+t.length,r[1]),post:n.slice(r[1]+e.length)}}function G0(t,e){var n=e.match(t);return n?n[0]:null}W0.range=$0;function $0(t,e,n){var r,i,s,o,a,l=n.indexOf(t),c=n.indexOf(e,l+1),u=l;if(l>=0&&c>0){if(t===e)return[l,c];for(r=[],s=n.length;u>=0&&!a;)u==l?(r.push(u),l=n.indexOf(t,u+1)):r.length==1?a=[r.pop(),c]:(i=r.pop(),i<s&&(s=i,o=c),c=n.indexOf(e,u+1)),u=l<c&&l>=0?l:c;r.length&&(a=[s,o])}return a}});var J0=C((fPe,K0)=>{var Y0=RA();K0.exports=cJ;var V0="\0SLASH"+Math.random()+"\0",q0="\0OPEN"+Math.random()+"\0",mA="\0CLOSE"+Math.random()+"\0",X0="\0COMMA"+Math.random()+"\0",z0="\0PERIOD"+Math.random()+"\0";function AA(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function aJ(t){return t.split("\\\\").join(V0).split("\\{").join(q0).split("\\}").join(mA).split("\\,").join(X0).split("\\.").join(z0)}function lJ(t){return t.split(V0).join("\\").split(q0).join("{").split(mA).join("}").split(X0).join(",").split(z0).join(".")}function j0(t){if(!t)return[""];var e=[],n=Y0("{","}",t);if(!n)return t.split(",");var r=n.pre,i=n.body,s=n.post,o=r.split(",");o[o.length-1]+="{"+i+"}";var a=j0(s);return s.length&&(o[o.length-1]+=a.shift(),o.push.apply(o,a)),e.push.apply(e,o),e}function cJ(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),nu(aJ(t),!0).map(lJ)):[]}function uJ(t){return"{"+t+"}"}function dJ(t){return/^-?0\d/.test(t)}function fJ(t,e){return t<=e}function EJ(t,e){return t>=e}function nu(t,e){var n=[],r=Y0("{","}",t);if(!r)return[t];var i=r.pre,s=r.post.length?nu(r.post,!1):[""];if(/\$$/.test(r.pre))for(var o=0;o<s.length;o++){var a=i+"{"+r.body+"}"+s[o];n.push(a)}else{var l=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(r.body),c=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(r.body),u=l||c,d=r.body.indexOf(",")>=0;if(!u&&!d)return r.post.match(/,(?!,).*\}/)?(t=r.pre+"{"+r.body+mA+r.post,nu(t)):[t];var E;if(u)E=r.body.split(/\.\./);else if(E=j0(r.body),E.length===1&&(E=nu(E[0],!1).map(uJ),E.length===1))return s.map(function(D){return r.pre+E[0]+D});var f;if(u){var p=AA(E[0]),h=AA(E[1]),T=Math.max(E[0].length,E[1].length),S=E.length==3?Math.abs(AA(E[2])):1,I=fJ,R=h<p;R&&(S*=-1,I=EJ);var m=E.some(dJ);f=[];for(var A=p;I(A,h);A+=S){var N;if(c)N=String.fromCharCode(A),N==="\\"&&(N="");else if(N=String(A),m){var g=T-N.length;if(g>0){var L=new Array(g+1).join("0");A<0?N="-"+L+N.slice(1):N=L+N}}f.push(N)}}else{f=[];for(var y=0;y<E.length;y++)f.push.apply(f,nu(E[y],!1))}for(var y=0;y<f.length;y++)for(var o=0;o<s.length;o++){var a=i+f[y]+s[o];(!e||u||a)&&n.push(a)}}return n}});var rL=C((hPe,OA)=>{var tr=OA.exports=(t,e,n={})=>(_E(e),!n.nocomment&&e.charAt(0)==="#"?!1:new Xa(e,n).match(t));OA.exports=tr;var _A=H0();tr.sep=_A.sep;var Dr=Symbol("globstar **");tr.GLOBSTAR=Dr;var hJ=J0(),Q0={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},NA="[^/]",gA=NA+"*?",pJ="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",TJ="(?:(?!(?:\\/|^)\\.).)*?",tL=t=>t.split("").reduce((e,n)=>(e[n]=!0,e),{}),Z0=tL("().*{}+?[]^$\\!"),SJ=tL("[.("),eL=/\/+/;tr.filter=(t,e={})=>(n,r,i)=>tr(n,t,e);var ys=(t,e={})=>{let n={};return Object.keys(t).forEach(r=>n[r]=t[r]),Object.keys(e).forEach(r=>n[r]=e[r]),n};tr.defaults=t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return tr;let e=tr,n=(r,i,s)=>e(r,i,ys(t,s));return n.Minimatch=class extends e.Minimatch{constructor(i,s){super(i,ys(t,s))}},n.Minimatch.defaults=r=>e.defaults(ys(t,r)).Minimatch,n.filter=(r,i)=>e.filter(r,ys(t,i)),n.defaults=r=>e.defaults(ys(t,r)),n.makeRe=(r,i)=>e.makeRe(r,ys(t,i)),n.braceExpand=(r,i)=>e.braceExpand(r,ys(t,i)),n.match=(r,i,s)=>e.match(r,i,ys(t,s)),n};tr.braceExpand=(t,e)=>nL(t,e);var nL=(t,e={})=>(_E(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:hJ(t)),RJ=1024*64,_E=t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>RJ)throw new TypeError("pattern is too long")},IA=Symbol("subparse");tr.makeRe=(t,e)=>new Xa(t,e||{}).makeRe();tr.match=(t,e,n={})=>{let r=new Xa(e,n);return t=t.filter(i=>r.match(i)),r.options.nonull&&!t.length&&t.push(e),t};var AJ=t=>t.replace(/\\(.)/g,"$1"),mJ=t=>t.replace(/\\([^-\]])/g,"$1"),gJ=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),IJ=t=>t.replace(/[[\]\\]/g,"\\$&"),Xa=class{constructor(e,n){_E(e),n||(n={}),this.options=n,this.set=[],this.pattern=e,this.windowsPathsNoEscape=!!n.windowsPathsNoEscape||n.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!n.partial,this.make()}debug(){}make(){let e=this.pattern,n=this.options;if(!n.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate();let r=this.globSet=this.braceExpand();n.debug&&(this.debug=(...i)=>console.error(...i)),this.debug(this.pattern,r),r=this.globParts=r.map(i=>i.split(eL)),this.debug(this.pattern,r),r=r.map((i,s,o)=>i.map(this.parse,this)),this.debug(this.pattern,r),r=r.filter(i=>i.indexOf(!1)===-1),this.debug(this.pattern,r),this.set=r}parseNegate(){if(this.options.nonegate)return;let e=this.pattern,n=!1,r=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)n=!n,r++;r&&(this.pattern=e.slice(r)),this.negate=n}matchOne(e,n,r){var i=this.options;this.debug("matchOne",{this:this,file:e,pattern:n}),this.debug("matchOne",e.length,n.length);for(var s=0,o=0,a=e.length,l=n.length;s<a&&o<l;s++,o++){this.debug("matchOne loop");var c=n[o],u=e[s];if(this.debug(n,c,u),c===!1)return!1;if(c===Dr){this.debug("GLOBSTAR",[n,c,u]);var d=s,E=o+1;if(E===l){for(this.debug("** at the end");s<a;s++)if(e[s]==="."||e[s]===".."||!i.dot&&e[s].charAt(0)===".")return!1;return!0}for(;d<a;){var f=e[d];if(this.debug(`
globstar while`,e,d,n,E,f),this.matchOne(e.slice(d),n.slice(E),r))return this.debug("globstar found match!",d,a,f),!0;if(f==="."||f===".."||!i.dot&&f.charAt(0)==="."){this.debug("dot detected!",e,d,n,E);break}this.debug("globstar swallow a segment, and continue"),d++}return!!(r&&(this.debug(`
>>> no match, partial?`,e,d,n,E),d===a))}var p;if(typeof c=="string"?(p=u===c,this.debug("string match",c,u,p)):(p=u.match(c),this.debug("pattern match",c,u,p)),!p)return!1}if(s===a&&o===l)return!0;if(s===a)return r;if(o===l)return s===a-1&&e[s]==="";throw new Error("wtf?")}braceExpand(){return nL(this.pattern,this.options)}parse(e,n){_E(e);let r=this.options;if(e==="**")if(r.noglobstar)e="*";else return Dr;if(e==="")return"";let i="",s=!1,o=!1,a=[],l=[],c,u=!1,d=-1,E=-1,f,p,h,T=e.charAt(0)===".",S=r.dot||T,I=()=>T?"":S?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",R=g=>g.charAt(0)==="."?"":r.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",m=()=>{if(c){switch(c){case"*":i+=gA,s=!0;break;case"?":i+=NA,s=!0;break;default:i+="\\"+c;break}this.debug("clearStateChar %j %j",c,i),c=!1}};for(let g=0,L;g<e.length&&(L=e.charAt(g));g++){if(this.debug("%s	%s %s %j",e,g,i,L),o){if(L==="/")return!1;Z0[L]&&(i+="\\"),i+=L,o=!1;continue}switch(L){case"/":return!1;case"\\":if(u&&e.charAt(g+1)==="-"){i+=L;continue}m(),o=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",e,g,i,L),u){this.debug("  in class"),L==="!"&&g===E+1&&(L="^"),i+=L;continue}this.debug("call clearStateChar %j",c),m(),c=L,r.noext&&m();continue;case"(":{if(u){i+="(";continue}if(!c){i+="\\(";continue}let y={type:c,start:g-1,reStart:i.length,open:Q0[c].open,close:Q0[c].close};this.debug(this.pattern,"	",y),a.push(y),i+=y.open,y.start===0&&y.type!=="!"&&(T=!0,i+=R(e.slice(g+1))),this.debug("plType %j %j",c,i),c=!1;continue}case")":{let y=a[a.length-1];if(u||!y){i+="\\)";continue}a.pop(),m(),s=!0,p=y,i+=p.close,p.type==="!"&&l.push(Object.assign(p,{reEnd:i.length}));continue}case"|":{let y=a[a.length-1];if(u||!y){i+="\\|";continue}m(),i+="|",y.start===0&&y.type!=="!"&&(T=!0,i+=R(e.slice(g+1)));continue}case"[":if(m(),u){i+="\\"+L;continue}u=!0,E=g,d=i.length,i+=L;continue;case"]":if(g===E+1||!u){i+="\\"+L;continue}f=e.substring(E+1,g);try{RegExp("["+IJ(mJ(f))+"]"),i+=L}catch{i=i.substring(0,d)+"(?:$.)"}s=!0,u=!1;continue;default:m(),Z0[L]&&!(L==="^"&&u)&&(i+="\\"),i+=L;break}}for(u&&(f=e.slice(E+1),h=this.parse(f,IA),i=i.substring(0,d)+"\\["+h[0],s=s||h[1]),p=a.pop();p;p=a.pop()){let g;g=i.slice(p.reStart+p.open.length),this.debug("setting tail",i,p),g=g.replace(/((?:\\{2}){0,64})(\\?)\|/g,(y,D,x)=>(x||(x="\\"),D+D+x+"|")),this.debug(`tail=%j
   %s`,g,g,p,i);let L=p.type==="*"?gA:p.type==="?"?NA:"\\"+p.type;s=!0,i=i.slice(0,p.reStart)+L+"\\("+g}m(),o&&(i+="\\\\");let A=SJ[i.charAt(0)];for(let g=l.length-1;g>-1;g--){let L=l[g],y=i.slice(0,L.reStart),D=i.slice(L.reStart,L.reEnd-8),x=i.slice(L.reEnd),B=i.slice(L.reEnd-8,L.reEnd)+x,H=y.split(")").length,X=y.split("(").length-H,J=x;for(let Q=0;Q<X;Q++)J=J.replace(/\)[+*?]?/,"");x=J;let ee=x===""&&n!==IA?"(?:$|\\/)":"";i=y+D+x+ee+B}if(i!==""&&s&&(i="(?=.)"+i),A&&(i=I()+i),n===IA)return[i,s];if(r.nocase&&!s&&(s=e.toUpperCase()!==e.toLowerCase()),!s)return AJ(e);let N=r.nocase?"i":"";try{return Object.assign(new RegExp("^"+i+"$",N),{_glob:e,_src:i})}catch{return new RegExp("$.")}}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let n=this.options,r=n.noglobstar?gA:n.dot?pJ:TJ,i=n.nocase?"i":"",s=e.map(o=>(o=o.map(a=>typeof a=="string"?gJ(a):a===Dr?Dr:a._src).reduce((a,l)=>(a[a.length-1]===Dr&&l===Dr||a.push(l),a),[]),o.forEach((a,l)=>{a!==Dr||o[l-1]===Dr||(l===0?o.length>1?o[l+1]="(?:\\/|"+r+"\\/)?"+o[l+1]:o[l]=r:l===o.length-1?o[l-1]+="(?:\\/|"+r+")?":(o[l-1]+="(?:\\/|\\/"+r+"\\/)"+o[l+1],o[l+1]=Dr))}),o.filter(a=>a!==Dr).join("/"))).join("|");s="^(?:"+s+")$",this.negate&&(s="^(?!"+s+").*$");try{this.regexp=new RegExp(s,i)}catch{this.regexp=!1}return this.regexp}match(e,n=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&n)return!0;let r=this.options;_A.sep!=="/"&&(e=e.split(_A.sep).join("/")),e=e.split(eL),this.debug(this.pattern,"split",e);let i=this.set;this.debug(this.pattern,"set",i);let s;for(let o=e.length-1;o>=0&&(s=e[o],!s);o--);for(let o=0;o<i.length;o++){let a=i[o],l=e;if(r.matchBase&&a.length===1&&(l=[s]),this.matchOne(l,a,n))return r.flipNegate?!0:!this.negate}return r.flipNegate?!1:this.negate}static defaults(e){return tr.defaults(e).Minimatch}};tr.Minimatch=Xa});var lL=C((pPe,aL)=>{aL.exports=oL;var yA=require("fs"),{EventEmitter:_J}=require("events"),{Minimatch:CA}=rL(),{resolve:NJ}=require("path");function OJ(t,e){return new Promise((n,r)=>{yA.readdir(t,{withFileTypes:!0},(i,s)=>{if(i)switch(i.code){case"ENOTDIR":e?r(i):n([]);break;case"ENOTSUP":case"ENOENT":case"ENAMETOOLONG":case"UNKNOWN":n([]);break;case"ELOOP":default:r(i);break}else n(s)})})}function iL(t,e){return new Promise((n,r)=>{(e?yA.stat:yA.lstat)(t,(s,o)=>{if(s)switch(s.code){case"ENOENT":n(e?iL(t,!1):null);break;default:n(null);break}else n(o)})})}async function*sL(t,e,n,r,i,s){let o=await OJ(e+t,s);for(let a of o){let l=a.name;l===void 0&&(l=a,r=!0);let c=t+"/"+l,u=c.slice(1),d=e+"/"+u,E=null;(r||n)&&(E=await iL(d,n)),!E&&a.name!==void 0&&(E=a),E===null&&(E={isDirectory:()=>!1}),E.isDirectory()?i(u)||(yield{relative:u,absolute:d,stats:E},yield*sL(c,e,n,r,i,!1)):yield{relative:u,absolute:d,stats:E}}}async function*CJ(t,e,n,r){yield*sL("",t,e,n,r,!0)}function yJ(t){return{pattern:t.pattern,dot:!!t.dot,noglobstar:!!t.noglobstar,matchBase:!!t.matchBase,nocase:!!t.nocase,ignore:t.ignore,skip:t.skip,follow:!!t.follow,stat:!!t.stat,nodir:!!t.nodir,mark:!!t.mark,silent:!!t.silent,absolute:!!t.absolute}}var NE=class extends _J{constructor(e,n,r){if(super(),typeof n=="function"&&(r=n,n=null),this.options=yJ(n||{}),this.matchers=[],this.options.pattern){let i=Array.isArray(this.options.pattern)?this.options.pattern:[this.options.pattern];this.matchers=i.map(s=>new CA(s,{dot:this.options.dot,noglobstar:this.options.noglobstar,matchBase:this.options.matchBase,nocase:this.options.nocase}))}if(this.ignoreMatchers=[],this.options.ignore){let i=Array.isArray(this.options.ignore)?this.options.ignore:[this.options.ignore];this.ignoreMatchers=i.map(s=>new CA(s,{dot:!0}))}if(this.skipMatchers=[],this.options.skip){let i=Array.isArray(this.options.skip)?this.options.skip:[this.options.skip];this.skipMatchers=i.map(s=>new CA(s,{dot:!0}))}this.iterator=CJ(NJ(e||"."),this.options.follow,this.options.stat,this._shouldSkipDirectory.bind(this)),this.paused=!1,this.inactive=!1,this.aborted=!1,r&&(this._matches=[],this.on("match",i=>this._matches.push(this.options.absolute?i.absolute:i.relative)),this.on("error",i=>r(i)),this.on("end",()=>r(null,this._matches))),setTimeout(()=>this._next(),0)}_shouldSkipDirectory(e){return this.skipMatchers.some(n=>n.match(e))}_fileMatches(e,n){let r=e+(n?"/":"");return(this.matchers.length===0||this.matchers.some(i=>i.match(r)))&&!this.ignoreMatchers.some(i=>i.match(r))&&(!this.options.nodir||!n)}_next(){!this.paused&&!this.aborted?this.iterator.next().then(e=>{if(e.done)this.emit("end");else{let n=e.value.stats.isDirectory();if(this._fileMatches(e.value.relative,n)){let r=e.value.relative,i=e.value.absolute;this.options.mark&&n&&(r+="/",i+="/"),this.options.stat?this.emit("match",{relative:r,absolute:i,stat:e.value.stats}):this.emit("match",{relative:r,absolute:i})}this._next(this.iterator)}}).catch(e=>{this.abort(),this.emit("error",e),!e.code&&!this.options.silent&&console.error(e)}):this.inactive=!0}abort(){this.aborted=!0}pause(){this.paused=!0}resume(){this.paused=!1,this.inactive&&(this.inactive=!1,this._next())}};function oL(t,e,n){return new NE(t,e,n)}oL.ReaddirGlob=NE});var uL=C((OE,cL)=>{(function(t,e){typeof OE=="object"&&typeof cL<"u"?e(OE):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e(t.async={}))})(OE,(function(t){"use strict";function e(b,...O){return(...w)=>b(...O,...w)}function n(b){return function(...O){var w=O.pop();return b.call(this,O,w)}}var r=typeof queueMicrotask=="function"&&queueMicrotask,i=typeof setImmediate=="function"&&setImmediate,s=typeof process=="object"&&typeof process.nextTick=="function";function o(b){setTimeout(b,0)}function a(b){return(O,...w)=>b(()=>O(...w))}var l;r?l=queueMicrotask:i?l=setImmediate:s?l=process.nextTick:l=o;var c=a(l);function u(b){return f(b)?function(...O){let w=O.pop(),P=b.apply(this,O);return d(P,w)}:n(function(O,w){var P;try{P=b.apply(this,O)}catch(M){return w(M)}if(P&&typeof P.then=="function")return d(P,w);w(null,P)})}function d(b,O){return b.then(w=>{E(O,null,w)},w=>{E(O,w&&(w instanceof Error||w.message)?w:new Error(w))})}function E(b,O,w){try{b(O,w)}catch(P){c(M=>{throw M},P)}}function f(b){return b[Symbol.toStringTag]==="AsyncFunction"}function p(b){return b[Symbol.toStringTag]==="AsyncGenerator"}function h(b){return typeof b[Symbol.asyncIterator]=="function"}function T(b){if(typeof b!="function")throw new Error("expected a function");return f(b)?u(b):b}function S(b,O){if(O||(O=b.length),!O)throw new Error("arity is undefined");function w(...P){return typeof P[O-1]=="function"?b.apply(this,P):new Promise((M,U)=>{P[O-1]=(F,...W)=>{if(F)return U(F);M(W.length>1?W:W[0])},b.apply(this,P)})}return w}function I(b){return function(w,...P){return S(function(U){var F=this;return b(w,(W,V)=>{T(W).apply(F,P.concat(V))},U)})}}function R(b,O,w,P){O=O||[];var M=[],U=0,F=T(w);return b(O,(W,V,re)=>{var Ge=U++;F(W,(Ye,We)=>{M[Ge]=We,re(Ye)})},W=>{P(W,M)})}function m(b){return b&&typeof b.length=="number"&&b.length>=0&&b.length%1===0}let A={};function N(b){function O(...w){if(b!==null){var P=b;b=null,P.apply(this,w)}}return Object.assign(O,b),O}function g(b){return b[Symbol.iterator]&&b[Symbol.iterator]()}function L(b){var O=-1,w=b.length;return function(){return++O<w?{value:b[O],key:O}:null}}function y(b){var O=-1;return function(){var P=b.next();return P.done?null:(O++,{value:P.value,key:O})}}function D(b){var O=b?Object.keys(b):[],w=-1,P=O.length;return function M(){var U=O[++w];return U==="__proto__"?M():w<P?{value:b[U],key:U}:null}}function x(b){if(m(b))return L(b);var O=g(b);return O?y(O):D(b)}function B(b){return function(...O){if(b===null)throw new Error("Callback was already called.");var w=b;b=null,w.apply(this,O)}}function H(b,O,w,P){let M=!1,U=!1,F=!1,W=0,V=0;function re(){W>=O||F||M||(F=!0,b.next().then(({value:We,done:ur})=>{if(!(U||M)){if(F=!1,ur){M=!0,W<=0&&P(null);return}W++,w(We,V,Ge),V++,re()}}).catch(Ye))}function Ge(We,ur){if(W-=1,!U){if(We)return Ye(We);if(We===!1){M=!0,U=!0;return}if(ur===A||M&&W<=0)return M=!0,P(null);re()}}function Ye(We){U||(F=!1,M=!0,P(We))}re()}var X=b=>(O,w,P)=>{if(P=N(P),b<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!O)return P(null);if(p(O))return H(O,b,w,P);if(h(O))return H(O[Symbol.asyncIterator](),b,w,P);var M=x(O),U=!1,F=!1,W=0,V=!1;function re(Ye,We){if(!F)if(W-=1,Ye)U=!0,P(Ye);else if(Ye===!1)U=!0,F=!0;else{if(We===A||U&&W<=0)return U=!0,P(null);V||Ge()}}function Ge(){for(V=!0;W<b&&!U;){var Ye=M();if(Ye===null){U=!0,W<=0&&P(null);return}W+=1,w(Ye.value,Ye.key,B(re))}V=!1}Ge()};function J(b,O,w,P){return X(O)(b,T(w),P)}var ee=S(J,4);function Q(b,O,w){w=N(w);var P=0,M=0,{length:U}=b,F=!1;U===0&&w(null);function W(V,re){V===!1&&(F=!0),F!==!0&&(V?w(V):(++M===U||re===A)&&w(null))}for(;P<U;P++)O(b[P],P,B(W))}function ie(b,O,w){return ee(b,1/0,O,w)}function fe(b,O,w){var P=m(b)?Q:ie;return P(b,T(O),w)}var qn=S(fe,3);function t4(b,O,w){return R(qn,b,O,w)}var Af=S(t4,3),Yb=I(Af);function n4(b,O,w){return ee(b,1,O,w)}var wr=S(n4,3);function r4(b,O,w){return R(wr,b,O,w)}var LR=S(r4,3),Vb=I(LR);let xa=Symbol("promiseCallback");function va(){let b,O;function w(P,...M){if(P)return O(P);b(M.length>1?M:M[0])}return w[xa]=new Promise((P,M)=>{b=P,O=M}),w}function DR(b,O,w){typeof O!="number"&&(w=O,O=null),w=N(w||va());var P=Object.keys(b).length;if(!P)return w(null);O||(O=P);var M={},U=0,F=!1,W=!1,V=Object.create(null),re=[],Ge=[],Ye={};Object.keys(b).forEach(ne=>{var le=b[ne];if(!Array.isArray(le)){We(ne,[le]),Ge.push(ne);return}var $e=le.slice(0,le.length-1),ct=$e.length;if(ct===0){We(ne,le),Ge.push(ne);return}Ye[ne]=ct,$e.forEach(Jt=>{if(!b[Jt])throw new Error("async.auto task `"+ne+"` has a non-existent dependency `"+Jt+"` in "+$e.join(", "));Ua(Jt,()=>{ct--,ct===0&&We(ne,le)})})}),Ve(),ur();function We(ne,le){re.push(()=>Gc(ne,le))}function ur(){if(!F){if(re.length===0&&U===0)return w(null,M);for(;re.length&&U<O;){var ne=re.shift();ne()}}}function Ua(ne,le){var $e=V[ne];$e||($e=V[ne]=[]),$e.push(le)}function co(ne){var le=V[ne]||[];le.forEach($e=>$e()),ur()}function Gc(ne,le){if(!W){var $e=B((Jt,...dr)=>{if(U--,Jt===!1){F=!0;return}if(dr.length<2&&([dr]=dr),Jt){var Ba={};if(Object.keys(M).forEach(uo=>{Ba[uo]=M[uo]}),Ba[ne]=dr,W=!0,V=Object.create(null),F)return;w(Jt,Ba)}else M[ne]=dr,co(ne)});U++;var ct=T(le[le.length-1]);le.length>1?ct(M,$e):ct($e)}}function Ve(){for(var ne,le=0;Ge.length;)ne=Ge.pop(),le++,ae(ne).forEach($e=>{--Ye[$e]===0&&Ge.push($e)});if(le!==P)throw new Error("async.auto cannot execute tasks due to a recursive dependency")}function ae(ne){var le=[];return Object.keys(b).forEach($e=>{let ct=b[$e];Array.isArray(ct)&&ct.indexOf(ne)>=0&&le.push($e)}),le}return w[xa]}var i4=/^(?:async\s)?(?:function)?\s*(?:\w+\s*)?\(([^)]+)\)(?:\s*{)/,s4=/^(?:async\s)?\s*(?:\(\s*)?((?:[^)=\s]\s*)*)(?:\)\s*)?=>/,o4=/,/,a4=/(=.+)?(\s*)$/;function l4(b){let O="",w=0,P=b.indexOf("*/");for(;w<b.length;)if(b[w]==="/"&&b[w+1]==="/"){let M=b.indexOf(`
`,w);w=M===-1?b.length:M}else if(P!==-1&&b[w]==="/"&&b[w+1]==="*"){let M=b.indexOf("*/",w);M!==-1?(w=M+2,P=b.indexOf("*/",w)):(O+=b[w],w++)}else O+=b[w],w++;return O}function c4(b){let O=l4(b.toString()),w=O.match(i4);if(w||(w=O.match(s4)),!w)throw new Error(`could not parse args in autoInject
Source:
`+O);let[,P]=w;return P.replace(/\s/g,"").split(o4).map(M=>M.replace(a4,"").trim())}function qb(b,O){var w={};return Object.keys(b).forEach(P=>{var M=b[P],U,F=f(M),W=!F&&M.length===1||F&&M.length===0;if(Array.isArray(M))U=[...M],M=U.pop(),w[P]=U.concat(U.length>0?V:M);else if(W)w[P]=M;else{if(U=c4(M),M.length===0&&!F&&U.length===0)throw new Error("autoInject task functions require explicit parameters.");F||U.pop(),w[P]=U.concat(V)}function V(re,Ge){var Ye=U.map(We=>re[We]);Ye.push(Ge),T(M)(...Ye)}}),DR(w,O)}class u4{constructor(){this.head=this.tail=null,this.length=0}removeLink(O){return O.prev?O.prev.next=O.next:this.head=O.next,O.next?O.next.prev=O.prev:this.tail=O.prev,O.prev=O.next=null,this.length-=1,O}empty(){for(;this.head;)this.shift();return this}insertAfter(O,w){w.prev=O,w.next=O.next,O.next?O.next.prev=w:this.tail=w,O.next=w,this.length+=1}insertBefore(O,w){w.prev=O.prev,w.next=O,O.prev?O.prev.next=w:this.head=w,O.prev=w,this.length+=1}unshift(O){this.head?this.insertBefore(this.head,O):Xb(this,O)}push(O){this.tail?this.insertAfter(this.tail,O):Xb(this,O)}shift(){return this.head&&this.removeLink(this.head)}pop(){return this.tail&&this.removeLink(this.tail)}toArray(){return[...this]}*[Symbol.iterator](){for(var O=this.head;O;)yield O.data,O=O.next}remove(O){for(var w=this.head;w;){var{next:P}=w;O(w)&&this.removeLink(w),w=P}return this}}function Xb(b,O){b.length=1,b.head=b.tail=O}function PR(b,O,w){if(O==null)O=1;else if(O===0)throw new RangeError("Concurrency must not be zero");var P=T(b),M=0,U=[];let F={error:[],drain:[],saturated:[],unsaturated:[],empty:[]};function W(ae,ne){F[ae].push(ne)}function V(ae,ne){let le=(...$e)=>{re(ae,le),ne(...$e)};F[ae].push(le)}function re(ae,ne){if(!ae)return Object.keys(F).forEach(le=>F[le]=[]);if(!ne)return F[ae]=[];F[ae]=F[ae].filter(le=>le!==ne)}function Ge(ae,...ne){F[ae].forEach(le=>le(...ne))}var Ye=!1;function We(ae,ne,le,$e){if($e!=null&&typeof $e!="function")throw new Error("task callback must be a function");Ve.started=!0;var ct,Jt;function dr(uo,...Wc){if(uo)return le?Jt(uo):ct();if(Wc.length<=1)return ct(Wc[0]);ct(Wc)}var Ba=Ve._createTaskItem(ae,le?dr:$e||dr);if(ne?Ve._tasks.unshift(Ba):Ve._tasks.push(Ba),Ye||(Ye=!0,c(()=>{Ye=!1,Ve.process()})),le||!$e)return new Promise((uo,Wc)=>{ct=uo,Jt=Wc})}function ur(ae){return function(ne,...le){M-=1;for(var $e=0,ct=ae.length;$e<ct;$e++){var Jt=ae[$e],dr=U.indexOf(Jt);dr===0?U.shift():dr>0&&U.splice(dr,1),Jt.callback(ne,...le),ne!=null&&Ge("error",ne,Jt.data)}M<=Ve.concurrency-Ve.buffer&&Ge("unsaturated"),Ve.idle()&&Ge("drain"),Ve.process()}}function Ua(ae){return ae.length===0&&Ve.idle()?(c(()=>Ge("drain")),!0):!1}let co=ae=>ne=>{if(!ne)return new Promise((le,$e)=>{V(ae,(ct,Jt)=>{if(ct)return $e(ct);le(Jt)})});re(ae),W(ae,ne)};var Gc=!1,Ve={_tasks:new u4,_createTaskItem(ae,ne){return{data:ae,callback:ne}},*[Symbol.iterator](){yield*Ve._tasks[Symbol.iterator]()},concurrency:O,payload:w,buffer:O/4,started:!1,paused:!1,push(ae,ne){return Array.isArray(ae)?Ua(ae)?void 0:ae.map(le=>We(le,!1,!1,ne)):We(ae,!1,!1,ne)},pushAsync(ae,ne){return Array.isArray(ae)?Ua(ae)?void 0:ae.map(le=>We(le,!1,!0,ne)):We(ae,!1,!0,ne)},kill(){re(),Ve._tasks.empty()},unshift(ae,ne){return Array.isArray(ae)?Ua(ae)?void 0:ae.map(le=>We(le,!0,!1,ne)):We(ae,!0,!1,ne)},unshiftAsync(ae,ne){return Array.isArray(ae)?Ua(ae)?void 0:ae.map(le=>We(le,!0,!0,ne)):We(ae,!0,!0,ne)},remove(ae){Ve._tasks.remove(ae)},process(){if(!Gc){for(Gc=!0;!Ve.paused&&M<Ve.concurrency&&Ve._tasks.length;){var ae=[],ne=[],le=Ve._tasks.length;Ve.payload&&(le=Math.min(le,Ve.payload));for(var $e=0;$e<le;$e++){var ct=Ve._tasks.shift();ae.push(ct),U.push(ct),ne.push(ct.data)}M+=1,Ve._tasks.length===0&&Ge("empty"),M===Ve.concurrency&&Ge("saturated");var Jt=B(ur(ae));P(ne,Jt)}Gc=!1}},length(){return Ve._tasks.length},running(){return M},workersList(){return U},idle(){return Ve._tasks.length+M===0},pause(){Ve.paused=!0},resume(){Ve.paused!==!1&&(Ve.paused=!1,c(Ve.process))}};return Object.defineProperties(Ve,{saturated:{writable:!1,value:co("saturated")},unsaturated:{writable:!1,value:co("unsaturated")},empty:{writable:!1,value:co("empty")},drain:{writable:!1,value:co("drain")},error:{writable:!1,value:co("error")}}),Ve}function zb(b,O){return PR(b,1,O)}function jb(b,O,w){return PR(b,O,w)}function d4(b,O,w,P){P=N(P);var M=T(w);return wr(b,(U,F,W)=>{M(O,U,(V,re)=>{O=re,W(V)})},U=>P(U,O))}var gs=S(d4,4);function xR(...b){var O=b.map(T);return function(...w){var P=this,M=w[w.length-1];return typeof M=="function"?w.pop():M=va(),gs(O,w,(U,F,W)=>{F.apply(P,U.concat((V,...re)=>{W(V,re)}))},(U,F)=>M(U,...F)),M[xa]}}function Kb(...b){return xR(...b.reverse())}function f4(b,O,w,P){return R(X(O),b,w,P)}var Mc=S(f4,4);function E4(b,O,w,P){var M=T(w);return Mc(b,O,(U,F)=>{M(U,(W,...V)=>W?F(W):F(W,V))},(U,F)=>{for(var W=[],V=0;V<F.length;V++)F[V]&&(W=W.concat(...F[V]));return P(U,W)})}var Ma=S(E4,4);function h4(b,O,w){return Ma(b,1/0,O,w)}var mf=S(h4,3);function p4(b,O,w){return Ma(b,1,O,w)}var gf=S(p4,3);function Jb(...b){return function(...O){var w=O.pop();return w(null,...b)}}function xi(b,O){return(w,P,M,U)=>{var F=!1,W;let V=T(M);w(P,(re,Ge,Ye)=>{V(re,(We,ur)=>{if(We||We===!1)return Ye(We);if(b(ur)&&!W)return F=!0,W=O(!0,re),Ye(null,A);Ye()})},re=>{if(re)return U(re);U(null,F?W:O(!1))})}}function T4(b,O,w){return xi(P=>P,(P,M)=>M)(qn,b,O,w)}var If=S(T4,3);function S4(b,O,w,P){return xi(M=>M,(M,U)=>U)(X(O),b,w,P)}var _f=S(S4,4);function R4(b,O,w){return xi(P=>P,(P,M)=>M)(X(1),b,O,w)}var Nf=S(R4,3);function Qb(b){return(O,...w)=>T(O)(...w,(P,...M)=>{typeof console=="object"&&(P?console.error&&console.error(P):console[b]&&M.forEach(U=>console[b](U)))})}var Zb=Qb("dir");function A4(b,O,w){w=B(w);var P=T(b),M=T(O),U;function F(V,...re){if(V)return w(V);V!==!1&&(U=re,M(...re,W))}function W(V,re){if(V)return w(V);if(V!==!1){if(!re)return w(null,...U);P(F)}}return W(null,!0)}var Uc=S(A4,3);function ew(b,O,w){let P=T(O);return Uc(b,(...M)=>{let U=M.pop();P(...M,(F,W)=>U(F,!W))},w)}function tw(b){return(O,w,P)=>b(O,P)}function m4(b,O,w){return qn(b,tw(T(O)),w)}var Of=S(m4,3);function g4(b,O,w,P){return X(O)(b,tw(T(w)),P)}var Bc=S(g4,4);function I4(b,O,w){return Bc(b,1,O,w)}var Fc=S(I4,3);function vR(b){return f(b)?b:function(...O){var w=O.pop(),P=!0;O.push((...M)=>{P?c(()=>w(...M)):w(...M)}),b.apply(this,O),P=!1}}function _4(b,O,w){return xi(P=>!P,P=>!P)(qn,b,O,w)}var Cf=S(_4,3);function N4(b,O,w,P){return xi(M=>!M,M=>!M)(X(O),b,w,P)}var yf=S(N4,4);function O4(b,O,w){return xi(P=>!P,P=>!P)(wr,b,O,w)}var bf=S(O4,3);function C4(b,O,w,P){var M=new Array(O.length);b(O,(U,F,W)=>{w(U,(V,re)=>{M[F]=!!re,W(V)})},U=>{if(U)return P(U);for(var F=[],W=0;W<O.length;W++)M[W]&&F.push(O[W]);P(null,F)})}function y4(b,O,w,P){var M=[];b(O,(U,F,W)=>{w(U,(V,re)=>{if(V)return W(V);re&&M.push({index:F,value:U}),W(V)})},U=>{if(U)return P(U);P(null,M.sort((F,W)=>F.index-W.index).map(F=>F.value))})}function wf(b,O,w,P){var M=m(O)?C4:y4;return M(b,O,T(w),P)}function b4(b,O,w){return wf(qn,b,O,w)}var Lf=S(b4,3);function w4(b,O,w,P){return wf(X(O),b,w,P)}var Df=S(w4,4);function L4(b,O,w){return wf(wr,b,O,w)}var Pf=S(L4,3);function D4(b,O){var w=B(O),P=T(vR(b));function M(U){if(U)return w(U);U!==!1&&P(M)}return M()}var nw=S(D4,2);function P4(b,O,w,P){var M=T(w);return Mc(b,O,(U,F)=>{M(U,(W,V)=>W?F(W):F(W,{key:V,val:U}))},(U,F)=>{for(var W={},{hasOwnProperty:V}=Object.prototype,re=0;re<F.length;re++)if(F[re]){var{key:Ge}=F[re],{val:Ye}=F[re];V.call(W,Ge)?W[Ge].push(Ye):W[Ge]=[Ye]}return P(U,W)})}var xf=S(P4,4);function rw(b,O,w){return xf(b,1/0,O,w)}function iw(b,O,w){return xf(b,1,O,w)}var sw=Qb("log");function x4(b,O,w,P){P=N(P);var M={},U=T(w);return X(O)(b,(F,W,V)=>{U(F,W,(re,Ge)=>{if(re)return V(re);M[W]=Ge,V(re)})},F=>P(F,M))}var vf=S(x4,4);function ow(b,O,w){return vf(b,1/0,O,w)}function aw(b,O,w){return vf(b,1,O,w)}function lw(b,O=w=>w){var w=Object.create(null),P=Object.create(null),M=T(b),U=n((F,W)=>{var V=O(...F);V in w?c(()=>W(null,...w[V])):V in P?P[V].push(W):(P[V]=[W],M(...F,(re,...Ge)=>{re||(w[V]=Ge);var Ye=P[V];delete P[V];for(var We=0,ur=Ye.length;We<ur;We++)Ye[We](re,...Ge)}))});return U.memo=w,U.unmemoized=b,U}var Mf;s?Mf=process.nextTick:i?Mf=setImmediate:Mf=o;var cw=a(Mf),MR=S((b,O,w)=>{var P=m(O)?[]:{};b(O,(M,U,F)=>{T(M)((W,...V)=>{V.length<2&&([V]=V),P[U]=V,F(W)})},M=>w(M,P))},3);function uw(b,O){return MR(qn,b,O)}function dw(b,O,w){return MR(X(O),b,w)}function UR(b,O){var w=T(b);return PR((P,M)=>{w(P[0],M)},O,1)}class v4{constructor(){this.heap=[],this.pushCount=Number.MIN_SAFE_INTEGER}get length(){return this.heap.length}empty(){return this.heap=[],this}percUp(O){let w;for(;O>0&&BR(this.heap[O],this.heap[w=fw(O)]);){let P=this.heap[O];this.heap[O]=this.heap[w],this.heap[w]=P,O=w}}percDown(O){let w;for(;(w=M4(O))<this.heap.length&&(w+1<this.heap.length&&BR(this.heap[w+1],this.heap[w])&&(w=w+1),!BR(this.heap[O],this.heap[w]));){let P=this.heap[O];this.heap[O]=this.heap[w],this.heap[w]=P,O=w}}push(O){O.pushCount=++this.pushCount,this.heap.push(O),this.percUp(this.heap.length-1)}unshift(O){return this.heap.push(O)}shift(){let[O]=this.heap;return this.heap[0]=this.heap[this.heap.length-1],this.heap.pop(),this.percDown(0),O}toArray(){return[...this]}*[Symbol.iterator](){for(let O=0;O<this.heap.length;O++)yield this.heap[O].data}remove(O){let w=0;for(let P=0;P<this.heap.length;P++)O(this.heap[P])||(this.heap[w]=this.heap[P],w++);this.heap.splice(w);for(let P=fw(this.heap.length-1);P>=0;P--)this.percDown(P);return this}}function M4(b){return(b<<1)+1}function fw(b){return(b+1>>1)-1}function BR(b,O){return b.priority!==O.priority?b.priority<O.priority:b.pushCount<O.pushCount}function Ew(b,O){var w=UR(b,O),{push:P,pushAsync:M}=w;w._tasks=new v4,w._createTaskItem=({data:F,priority:W},V)=>({data:F,priority:W,callback:V});function U(F,W){return Array.isArray(F)?F.map(V=>({data:V,priority:W})):{data:F,priority:W}}return w.push=function(F,W=0,V){return P(U(F,W),V)},w.pushAsync=function(F,W=0,V){return M(U(F,W),V)},delete w.unshift,delete w.unshiftAsync,w}function U4(b,O){if(O=N(O),!Array.isArray(b))return O(new TypeError("First argument to race must be an array of functions"));if(!b.length)return O();for(var w=0,P=b.length;w<P;w++)T(b[w])(O)}var hw=S(U4,2);function Uf(b,O,w,P){var M=[...b].reverse();return gs(M,O,w,P)}function Bf(b){var O=T(b);return n(function(P,M){return P.push((U,...F)=>{let W={};if(U&&(W.error=U),F.length>0){var V=F;F.length<=1&&([V]=F),W.value=V}M(null,W)}),O.apply(this,P)})}function pw(b){var O;return Array.isArray(b)?O=b.map(Bf):(O={},Object.keys(b).forEach(w=>{O[w]=Bf.call(this,b[w])})),O}function FR(b,O,w,P){let M=T(w);return wf(b,O,(U,F)=>{M(U,(W,V)=>{F(W,!V)})},P)}function B4(b,O,w){return FR(qn,b,O,w)}var Tw=S(B4,3);function F4(b,O,w,P){return FR(X(O),b,w,P)}var Sw=S(F4,4);function H4(b,O,w){return FR(wr,b,O,w)}var Rw=S(H4,3);function Aw(b){return function(){return b}}let HR=5,mw=0;function Ff(b,O,w){var P={times:HR,intervalFunc:Aw(mw)};if(arguments.length<3&&typeof b=="function"?(w=O||va(),O=b):(G4(P,b),w=w||va()),typeof O!="function")throw new Error("Invalid arguments for async.retry");var M=T(O),U=1;function F(){M((W,...V)=>{W!==!1&&(W&&U++<P.times&&(typeof P.errorFilter!="function"||P.errorFilter(W))?setTimeout(F,P.intervalFunc(U-1)):w(W,...V))})}return F(),w[xa]}function G4(b,O){if(typeof O=="object")b.times=+O.times||HR,b.intervalFunc=typeof O.interval=="function"?O.interval:Aw(+O.interval||mw),b.errorFilter=O.errorFilter;else if(typeof O=="number"||typeof O=="string")b.times=+O||HR;else throw new Error("Invalid arguments for async.retry")}function gw(b,O){O||(O=b,b=null);let w=b&&b.arity||O.length;f(O)&&(w+=1);var P=T(O);return n((M,U)=>{(M.length<w-1||U==null)&&(M.push(U),U=va());function F(W){P(...M,W)}return b?Ff(b,F,U):Ff(F,U),U[xa]})}function Iw(b,O){return MR(wr,b,O)}function W4(b,O,w){return xi(Boolean,P=>P)(qn,b,O,w)}var Hf=S(W4,3);function $4(b,O,w,P){return xi(Boolean,M=>M)(X(O),b,w,P)}var Gf=S($4,4);function k4(b,O,w){return xi(Boolean,P=>P)(wr,b,O,w)}var Wf=S(k4,3);function Y4(b,O,w){var P=T(O);return Af(b,(U,F)=>{P(U,(W,V)=>{if(W)return F(W);F(W,{value:U,criteria:V})})},(U,F)=>{if(U)return w(U);w(null,F.sort(M).map(W=>W.value))});function M(U,F){var W=U.criteria,V=F.criteria;return W<V?-1:W>V?1:0}}var _w=S(Y4,3);function Nw(b,O,w){var P=T(b);return n((M,U)=>{var F=!1,W;function V(){var re=b.name||"anonymous",Ge=new Error('Callback function "'+re+'" timed out.');Ge.code="ETIMEDOUT",w&&(Ge.info=w),F=!0,U(Ge)}M.push((...re)=>{F||(U(...re),clearTimeout(W))}),W=setTimeout(V,O),P(...M)})}function V4(b){for(var O=Array(b);b--;)O[b]=b;return O}function $f(b,O,w,P){var M=T(w);return Mc(V4(b),O,M,P)}function Ow(b,O,w){return $f(b,1/0,O,w)}function Cw(b,O,w){return $f(b,1,O,w)}function yw(b,O,w,P){arguments.length<=3&&typeof O=="function"&&(P=w,w=O,O=Array.isArray(b)?[]:{}),P=N(P||va());var M=T(w);return qn(b,(U,F,W)=>{M(O,U,F,W)},U=>P(U,O)),P[xa]}function q4(b,O){var w=null,P;return Fc(b,(M,U)=>{T(M)((F,...W)=>{if(F===!1)return U(F);W.length<2?[P]=W:P=W,w=F,U(F?null:{})})},()=>O(w,P))}var bw=S(q4);function ww(b){return(...O)=>(b.unmemoized||b)(...O)}function X4(b,O,w){w=B(w);var P=T(O),M=T(b),U=[];function F(V,...re){if(V)return w(V);U=re,V!==!1&&M(W)}function W(V,re){if(V)return w(V);if(V!==!1){if(!re)return w(null,...U);P(F)}}return M(W)}var Hc=S(X4,3);function Lw(b,O,w){let P=T(b);return Hc(M=>P((U,F)=>M(U,!F)),O,w)}function z4(b,O){if(O=N(O),!Array.isArray(b))return O(new Error("First argument to waterfall must be an array of functions"));if(!b.length)return O();var w=0;function P(U){var F=T(b[w++]);F(...U,B(M))}function M(U,...F){if(U!==!1){if(U||w===b.length)return O(U,...F);P(F)}}P([])}var Dw=S(z4),j4={apply:e,applyEach:Yb,applyEachSeries:Vb,asyncify:u,auto:DR,autoInject:qb,cargo:zb,cargoQueue:jb,compose:Kb,concat:mf,concatLimit:Ma,concatSeries:gf,constant:Jb,detect:If,detectLimit:_f,detectSeries:Nf,dir:Zb,doUntil:ew,doWhilst:Uc,each:Of,eachLimit:Bc,eachOf:qn,eachOfLimit:ee,eachOfSeries:wr,eachSeries:Fc,ensureAsync:vR,every:Cf,everyLimit:yf,everySeries:bf,filter:Lf,filterLimit:Df,filterSeries:Pf,forever:nw,groupBy:rw,groupByLimit:xf,groupBySeries:iw,log:sw,map:Af,mapLimit:Mc,mapSeries:LR,mapValues:ow,mapValuesLimit:vf,mapValuesSeries:aw,memoize:lw,nextTick:cw,parallel:uw,parallelLimit:dw,priorityQueue:Ew,queue:UR,race:hw,reduce:gs,reduceRight:Uf,reflect:Bf,reflectAll:pw,reject:Tw,rejectLimit:Sw,rejectSeries:Rw,retry:Ff,retryable:gw,seq:xR,series:Iw,setImmediate:c,some:Hf,someLimit:Gf,someSeries:Wf,sortBy:_w,timeout:Nw,times:Ow,timesLimit:$f,timesSeries:Cw,transform:yw,tryEach:bw,unmemoize:ww,until:Lw,waterfall:Dw,whilst:Hc,all:Cf,allLimit:yf,allSeries:bf,any:Hf,anyLimit:Gf,anySeries:Wf,find:If,findLimit:_f,findSeries:Nf,flatMap:mf,flatMapLimit:Ma,flatMapSeries:gf,forEach:Of,forEachSeries:Fc,forEachLimit:Bc,forEachOf:qn,forEachOfSeries:wr,forEachOfLimit:ee,inject:gs,foldl:gs,foldr:Uf,select:Lf,selectLimit:Df,selectSeries:Pf,wrapSync:u,during:Hc,doDuring:Uc};t.all=Cf,t.allLimit=yf,t.allSeries=bf,t.any=Hf,t.anyLimit=Gf,t.anySeries=Wf,t.apply=e,t.applyEach=Yb,t.applyEachSeries=Vb,t.asyncify=u,t.auto=DR,t.autoInject=qb,t.cargo=zb,t.cargoQueue=jb,t.compose=Kb,t.concat=mf,t.concatLimit=Ma,t.concatSeries=gf,t.constant=Jb,t.default=j4,t.detect=If,t.detectLimit=_f,t.detectSeries=Nf,t.dir=Zb,t.doDuring=Uc,t.doUntil=ew,t.doWhilst=Uc,t.during=Hc,t.each=Of,t.eachLimit=Bc,t.eachOf=qn,t.eachOfLimit=ee,t.eachOfSeries=wr,t.eachSeries=Fc,t.ensureAsync=vR,t.every=Cf,t.everyLimit=yf,t.everySeries=bf,t.filter=Lf,t.filterLimit=Df,t.filterSeries=Pf,t.find=If,t.findLimit=_f,t.findSeries=Nf,t.flatMap=mf,t.flatMapLimit=Ma,t.flatMapSeries=gf,t.foldl=gs,t.foldr=Uf,t.forEach=Of,t.forEachLimit=Bc,t.forEachOf=qn,t.forEachOfLimit=ee,t.forEachOfSeries=wr,t.forEachSeries=Fc,t.forever=nw,t.groupBy=rw,t.groupByLimit=xf,t.groupBySeries=iw,t.inject=gs,t.log=sw,t.map=Af,t.mapLimit=Mc,t.mapSeries=LR,t.mapValues=ow,t.mapValuesLimit=vf,t.mapValuesSeries=aw,t.memoize=lw,t.nextTick=cw,t.parallel=uw,t.parallelLimit=dw,t.priorityQueue=Ew,t.queue=UR,t.race=hw,t.reduce=gs,t.reduceRight=Uf,t.reflect=Bf,t.reflectAll=pw,t.reject=Tw,t.rejectLimit=Sw,t.rejectSeries=Rw,t.retry=Ff,t.retryable=gw,t.select=Lf,t.selectLimit=Df,t.selectSeries=Pf,t.seq=xR,t.series=Iw,t.setImmediate=c,t.some=Hf,t.someLimit=Gf,t.someSeries=Wf,t.sortBy=_w,t.timeout=Nw,t.times=Ow,t.timesLimit=$f,t.timesSeries=Cw,t.transform=yw,t.tryEach=bw,t.unmemoize=ww,t.until=Lw,t.waterfall=Dw,t.whilst=Hc,t.wrapSync=u,Object.defineProperty(t,"__esModule",{value:!0})}))});var fL=C((TPe,dL)=>{var bs=require("constants"),bJ=process.cwd,CE=null,wJ=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return CE||(CE=bJ.call(process)),CE};try{process.cwd()}catch{}typeof process.chdir=="function"&&(bA=process.chdir,process.chdir=function(t){CE=null,bA.call(process,t)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,bA));var bA;dL.exports=LJ;function LJ(t){bs.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&e(t),t.lutimes||n(t),t.chown=s(t.chown),t.fchown=s(t.fchown),t.lchown=s(t.lchown),t.chmod=r(t.chmod),t.fchmod=r(t.fchmod),t.lchmod=r(t.lchmod),t.chownSync=o(t.chownSync),t.fchownSync=o(t.fchownSync),t.lchownSync=o(t.lchownSync),t.chmodSync=i(t.chmodSync),t.fchmodSync=i(t.fchmodSync),t.lchmodSync=i(t.lchmodSync),t.stat=a(t.stat),t.fstat=a(t.fstat),t.lstat=a(t.lstat),t.statSync=l(t.statSync),t.fstatSync=l(t.fstatSync),t.lstatSync=l(t.lstatSync),t.chmod&&!t.lchmod&&(t.lchmod=function(u,d,E){E&&process.nextTick(E)},t.lchmodSync=function(){}),t.chown&&!t.lchown&&(t.lchown=function(u,d,E,f){f&&process.nextTick(f)},t.lchownSync=function(){}),wJ==="win32"&&(t.rename=typeof t.rename!="function"?t.rename:(function(u){function d(E,f,p){var h=Date.now(),T=0;u(E,f,function S(I){if(I&&(I.code==="EACCES"||I.code==="EPERM"||I.code==="EBUSY")&&Date.now()-h<6e4){setTimeout(function(){t.stat(f,function(R,m){R&&R.code==="ENOENT"?u(E,f,S):p(I)})},T),T<100&&(T+=10);return}p&&p(I)})}return Object.setPrototypeOf&&Object.setPrototypeOf(d,u),d})(t.rename)),t.read=typeof t.read!="function"?t.read:(function(u){function d(E,f,p,h,T,S){var I;if(S&&typeof S=="function"){var R=0;I=function(m,A,N){if(m&&m.code==="EAGAIN"&&R<10)return R++,u.call(t,E,f,p,h,T,I);S.apply(this,arguments)}}return u.call(t,E,f,p,h,T,I)}return Object.setPrototypeOf&&Object.setPrototypeOf(d,u),d})(t.read),t.readSync=typeof t.readSync!="function"?t.readSync:(function(u){return function(d,E,f,p,h){for(var T=0;;)try{return u.call(t,d,E,f,p,h)}catch(S){if(S.code==="EAGAIN"&&T<10){T++;continue}throw S}}})(t.readSync);function e(u){u.lchmod=function(d,E,f){u.open(d,bs.O_WRONLY|bs.O_SYMLINK,E,function(p,h){if(p){f&&f(p);return}u.fchmod(h,E,function(T){u.close(h,function(S){f&&f(T||S)})})})},u.lchmodSync=function(d,E){var f=u.openSync(d,bs.O_WRONLY|bs.O_SYMLINK,E),p=!0,h;try{h=u.fchmodSync(f,E),p=!1}finally{if(p)try{u.closeSync(f)}catch{}else u.closeSync(f)}return h}}function n(u){bs.hasOwnProperty("O_SYMLINK")&&u.futimes?(u.lutimes=function(d,E,f,p){u.open(d,bs.O_SYMLINK,function(h,T){if(h){p&&p(h);return}u.futimes(T,E,f,function(S){u.close(T,function(I){p&&p(S||I)})})})},u.lutimesSync=function(d,E,f){var p=u.openSync(d,bs.O_SYMLINK),h,T=!0;try{h=u.futimesSync(p,E,f),T=!1}finally{if(T)try{u.closeSync(p)}catch{}else u.closeSync(p)}return h}):u.futimes&&(u.lutimes=function(d,E,f,p){p&&process.nextTick(p)},u.lutimesSync=function(){})}function r(u){return u&&function(d,E,f){return u.call(t,d,E,function(p){c(p)&&(p=null),f&&f.apply(this,arguments)})}}function i(u){return u&&function(d,E){try{return u.call(t,d,E)}catch(f){if(!c(f))throw f}}}function s(u){return u&&function(d,E,f,p){return u.call(t,d,E,f,function(h){c(h)&&(h=null),p&&p.apply(this,arguments)})}}function o(u){return u&&function(d,E,f){try{return u.call(t,d,E,f)}catch(p){if(!c(p))throw p}}}function a(u){return u&&function(d,E,f){typeof E=="function"&&(f=E,E=null);function p(h,T){T&&(T.uid<0&&(T.uid+=4294967296),T.gid<0&&(T.gid+=4294967296)),f&&f.apply(this,arguments)}return E?u.call(t,d,E,p):u.call(t,d,p)}}function l(u){return u&&function(d,E){var f=E?u.call(t,d,E):u.call(t,d);return f&&(f.uid<0&&(f.uid+=4294967296),f.gid<0&&(f.gid+=4294967296)),f}}function c(u){if(!u||u.code==="ENOSYS")return!0;var d=!process.getuid||process.getuid()!==0;return!!(d&&(u.code==="EINVAL"||u.code==="EPERM"))}}});var pL=C((SPe,hL)=>{var EL=require("stream").Stream;hL.exports=DJ;function DJ(t){return{ReadStream:e,WriteStream:n};function e(r,i){if(!(this instanceof e))return new e(r,i);EL.call(this);var s=this;this.path=r,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,i=i||{};for(var o=Object.keys(i),a=0,l=o.length;a<l;a++){var c=o[a];this[c]=i[c]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){s._read()});return}t.open(this.path,this.flags,this.mode,function(u,d){if(u){s.emit("error",u),s.readable=!1;return}s.fd=d,s.emit("open",d),s._read()})}function n(r,i){if(!(this instanceof n))return new n(r,i);EL.call(this),this.path=r,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,i=i||{};for(var s=Object.keys(i),o=0,a=s.length;o<a;o++){var l=s[o];this[l]=i[l]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=t.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}});var SL=C((RPe,TL)=>{"use strict";TL.exports=xJ;var PJ=Object.getPrototypeOf||function(t){return t.__proto__};function xJ(t){if(t===null||typeof t!="object")return t;if(t instanceof Object)var e={__proto__:PJ(t)};else var e=Object.create(null);return Object.getOwnPropertyNames(t).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}});var PA=C((APe,DA)=>{var pt=require("fs"),vJ=fL(),MJ=pL(),UJ=SL(),yE=require("util"),hn,wE;typeof Symbol=="function"&&typeof Symbol.for=="function"?(hn=Symbol.for("graceful-fs.queue"),wE=Symbol.for("graceful-fs.previous")):(hn="___graceful-fs.queue",wE="___graceful-fs.previous");function BJ(){}function mL(t,e){Object.defineProperty(t,hn,{get:function(){return e}})}var To=BJ;yE.debuglog?To=yE.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(To=function(){var t=yE.format.apply(yE,arguments);t="GFS4: "+t.split(/\n/).join(`
GFS4: `),console.error(t)});pt[hn]||(RL=global[hn]||[],mL(pt,RL),pt.close=(function(t){function e(n,r){return t.call(pt,n,function(i){i||AL(),typeof r=="function"&&r.apply(this,arguments)})}return Object.defineProperty(e,wE,{value:t}),e})(pt.close),pt.closeSync=(function(t){function e(n){t.apply(pt,arguments),AL()}return Object.defineProperty(e,wE,{value:t}),e})(pt.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){To(pt[hn]),require("assert").equal(pt[hn].length,0)}));var RL;global[hn]||mL(global,pt[hn]);DA.exports=wA(UJ(pt));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!pt.__patched&&(DA.exports=wA(pt),pt.__patched=!0);function wA(t){vJ(t),t.gracefulify=wA,t.createReadStream=A,t.createWriteStream=N;var e=t.readFile;t.readFile=n;function n(y,D,x){return typeof D=="function"&&(x=D,D=null),B(y,D,x);function B(H,X,J,ee){return e(H,X,function(Q){Q&&(Q.code==="EMFILE"||Q.code==="ENFILE")?za([B,[H,X,J],Q,ee||Date.now(),Date.now()]):typeof J=="function"&&J.apply(this,arguments)})}}var r=t.writeFile;t.writeFile=i;function i(y,D,x,B){return typeof x=="function"&&(B=x,x=null),H(y,D,x,B);function H(X,J,ee,Q,ie){return r(X,J,ee,function(fe){fe&&(fe.code==="EMFILE"||fe.code==="ENFILE")?za([H,[X,J,ee,Q],fe,ie||Date.now(),Date.now()]):typeof Q=="function"&&Q.apply(this,arguments)})}}var s=t.appendFile;s&&(t.appendFile=o);function o(y,D,x,B){return typeof x=="function"&&(B=x,x=null),H(y,D,x,B);function H(X,J,ee,Q,ie){return s(X,J,ee,function(fe){fe&&(fe.code==="EMFILE"||fe.code==="ENFILE")?za([H,[X,J,ee,Q],fe,ie||Date.now(),Date.now()]):typeof Q=="function"&&Q.apply(this,arguments)})}}var a=t.copyFile;a&&(t.copyFile=l);function l(y,D,x,B){return typeof x=="function"&&(B=x,x=0),H(y,D,x,B);function H(X,J,ee,Q,ie){return a(X,J,ee,function(fe){fe&&(fe.code==="EMFILE"||fe.code==="ENFILE")?za([H,[X,J,ee,Q],fe,ie||Date.now(),Date.now()]):typeof Q=="function"&&Q.apply(this,arguments)})}}var c=t.readdir;t.readdir=d;var u=/^v[0-5]\./;function d(y,D,x){typeof D=="function"&&(x=D,D=null);var B=u.test(process.version)?function(J,ee,Q,ie){return c(J,H(J,ee,Q,ie))}:function(J,ee,Q,ie){return c(J,ee,H(J,ee,Q,ie))};return B(y,D,x);function H(X,J,ee,Q){return function(ie,fe){ie&&(ie.code==="EMFILE"||ie.code==="ENFILE")?za([B,[X,J,ee],ie,Q||Date.now(),Date.now()]):(fe&&fe.sort&&fe.sort(),typeof ee=="function"&&ee.call(this,ie,fe))}}}if(process.version.substr(0,4)==="v0.8"){var E=MJ(t);S=E.ReadStream,R=E.WriteStream}var f=t.ReadStream;f&&(S.prototype=Object.create(f.prototype),S.prototype.open=I);var p=t.WriteStream;p&&(R.prototype=Object.create(p.prototype),R.prototype.open=m),Object.defineProperty(t,"ReadStream",{get:function(){return S},set:function(y){S=y},enumerable:!0,configurable:!0}),Object.defineProperty(t,"WriteStream",{get:function(){return R},set:function(y){R=y},enumerable:!0,configurable:!0});var h=S;Object.defineProperty(t,"FileReadStream",{get:function(){return h},set:function(y){h=y},enumerable:!0,configurable:!0});var T=R;Object.defineProperty(t,"FileWriteStream",{get:function(){return T},set:function(y){T=y},enumerable:!0,configurable:!0});function S(y,D){return this instanceof S?(f.apply(this,arguments),this):S.apply(Object.create(S.prototype),arguments)}function I(){var y=this;L(y.path,y.flags,y.mode,function(D,x){D?(y.autoClose&&y.destroy(),y.emit("error",D)):(y.fd=x,y.emit("open",x),y.read())})}function R(y,D){return this instanceof R?(p.apply(this,arguments),this):R.apply(Object.create(R.prototype),arguments)}function m(){var y=this;L(y.path,y.flags,y.mode,function(D,x){D?(y.destroy(),y.emit("error",D)):(y.fd=x,y.emit("open",x))})}function A(y,D){return new t.ReadStream(y,D)}function N(y,D){return new t.WriteStream(y,D)}var g=t.open;t.open=L;function L(y,D,x,B){return typeof x=="function"&&(B=x,x=null),H(y,D,x,B);function H(X,J,ee,Q,ie){return g(X,J,ee,function(fe,qn){fe&&(fe.code==="EMFILE"||fe.code==="ENFILE")?za([H,[X,J,ee,Q],fe,ie||Date.now(),Date.now()]):typeof Q=="function"&&Q.apply(this,arguments)})}}return t}function za(t){To("ENQUEUE",t[0].name,t[1]),pt[hn].push(t),LA()}var bE;function AL(){for(var t=Date.now(),e=0;e<pt[hn].length;++e)pt[hn][e].length>2&&(pt[hn][e][3]=t,pt[hn][e][4]=t);LA()}function LA(){if(clearTimeout(bE),bE=void 0,pt[hn].length!==0){var t=pt[hn].shift(),e=t[0],n=t[1],r=t[2],i=t[3],s=t[4];if(i===void 0)To("RETRY",e.name,n),e.apply(null,n);else if(Date.now()-i>=6e4){To("TIMEOUT",e.name,n);var o=n.pop();typeof o=="function"&&o.call(null,r)}else{var a=Date.now()-s,l=Math.max(s-i,1),c=Math.min(l*1.2,100);a>=c?(To("RETRY",e.name,n),e.apply(null,n.concat([i]))):pt[hn].push(t)}bE===void 0&&(bE=setTimeout(LA,0))}}});var LE=C((mPe,gL)=>{"use strict";var Jr=t=>t!==null&&typeof t=="object"&&typeof t.pipe=="function";Jr.writable=t=>Jr(t)&&t.writable!==!1&&typeof t._write=="function"&&typeof t._writableState=="object";Jr.readable=t=>Jr(t)&&t.readable!==!1&&typeof t._read=="function"&&typeof t._readableState=="object";Jr.duplex=t=>Jr.writable(t)&&Jr.readable(t);Jr.transform=t=>Jr.duplex(t)&&typeof t._transform=="function";gL.exports=Jr});var ru=C((gPe,xA)=>{"use strict";typeof process>"u"||!process.version||process.version.indexOf("v0.")===0||process.version.indexOf("v1.")===0&&process.version.indexOf("v1.8.")!==0?xA.exports={nextTick:FJ}:xA.exports=process;function FJ(t,e,n,r){if(typeof t!="function")throw new TypeError('"callback" argument must be a function');var i=arguments.length,s,o;switch(i){case 0:case 1:return process.nextTick(t);case 2:return process.nextTick(function(){t.call(null,e)});case 3:return process.nextTick(function(){t.call(null,e,n)});case 4:return process.nextTick(function(){t.call(null,e,n,r)});default:for(s=new Array(i-1),o=0;o<s.length;)s[o++]=arguments[o];return process.nextTick(function(){t.apply(null,s)})}}});var _L=C((IPe,IL)=>{var HJ={}.toString;IL.exports=Array.isArray||function(t){return HJ.call(t)=="[object Array]"}});var vA=C((_Pe,NL)=>{NL.exports=require("stream")});var iu=C((MA,CL)=>{var DE=require("buffer"),Ui=DE.Buffer;function OL(t,e){for(var n in t)e[n]=t[n]}Ui.from&&Ui.alloc&&Ui.allocUnsafe&&Ui.allocUnsafeSlow?CL.exports=DE:(OL(DE,MA),MA.Buffer=ja);function ja(t,e,n){return Ui(t,e,n)}OL(Ui,ja);ja.from=function(t,e,n){if(typeof t=="number")throw new TypeError("Argument must not be a number");return Ui(t,e,n)};ja.alloc=function(t,e,n){if(typeof t!="number")throw new TypeError("Argument must be a number");var r=Ui(t);return e!==void 0?typeof n=="string"?r.fill(e,n):r.fill(e):r.fill(0),r};ja.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Ui(t)};ja.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return DE.SlowBuffer(t)}});var Ka=C(yn=>{function GJ(t){return Array.isArray?Array.isArray(t):PE(t)==="[object Array]"}yn.isArray=GJ;function WJ(t){return typeof t=="boolean"}yn.isBoolean=WJ;function $J(t){return t===null}yn.isNull=$J;function kJ(t){return t==null}yn.isNullOrUndefined=kJ;function YJ(t){return typeof t=="number"}yn.isNumber=YJ;function VJ(t){return typeof t=="string"}yn.isString=VJ;function qJ(t){return typeof t=="symbol"}yn.isSymbol=qJ;function XJ(t){return t===void 0}yn.isUndefined=XJ;function zJ(t){return PE(t)==="[object RegExp]"}yn.isRegExp=zJ;function jJ(t){return typeof t=="object"&&t!==null}yn.isObject=jJ;function KJ(t){return PE(t)==="[object Date]"}yn.isDate=KJ;function JJ(t){return PE(t)==="[object Error]"||t instanceof Error}yn.isError=JJ;function QJ(t){return typeof t=="function"}yn.isFunction=QJ;function ZJ(t){return t===null||typeof t=="boolean"||typeof t=="number"||typeof t=="string"||typeof t=="symbol"||typeof t>"u"}yn.isPrimitive=ZJ;yn.isBuffer=require("buffer").Buffer.isBuffer;function PE(t){return Object.prototype.toString.call(t)}});var yL=C((OPe,UA)=>{typeof Object.create=="function"?UA.exports=function(e,n){n&&(e.super_=n,e.prototype=Object.create(n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:UA.exports=function(e,n){if(n){e.super_=n;var r=function(){};r.prototype=n.prototype,e.prototype=new r,e.prototype.constructor=e}}});var Ja=C((CPe,FA)=>{try{if(BA=require("util"),typeof BA.inherits!="function")throw"";FA.exports=BA.inherits}catch{FA.exports=yL()}var BA});var wL=C((yPe,HA)=>{"use strict";function e5(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var bL=iu().Buffer,su=require("util");function t5(t,e,n){t.copy(e,n)}HA.exports=(function(){function t(){e5(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(n){var r={data:n,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length},t.prototype.unshift=function(n){var r={data:n,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length},t.prototype.shift=function(){if(this.length!==0){var n=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,n}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(n){if(this.length===0)return"";for(var r=this.head,i=""+r.data;r=r.next;)i+=n+r.data;return i},t.prototype.concat=function(n){if(this.length===0)return bL.alloc(0);for(var r=bL.allocUnsafe(n>>>0),i=this.head,s=0;i;)t5(i.data,r,s),s+=i.data.length,i=i.next;return r},t})();su&&su.inspect&&su.inspect.custom&&(HA.exports.prototype[su.inspect.custom]=function(){var t=su.inspect({length:this.length});return this.constructor.name+" "+t})});var GA=C((bPe,LL)=>{"use strict";var xE=ru();function n5(t,e){var n=this,r=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return r||i?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,xE.nextTick(vE,this,t)):xE.nextTick(vE,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(s){!e&&s?n._writableState?n._writableState.errorEmitted||(n._writableState.errorEmitted=!0,xE.nextTick(vE,n,s)):xE.nextTick(vE,n,s):e&&e(s)}),this)}function r5(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function vE(t,e){t.emit("error",e)}LL.exports={destroy:n5,undestroy:r5}});var PL=C((wPe,DL)=>{DL.exports=require("util").deprecate});var $A=C((LPe,GL)=>{"use strict";var So=ru();GL.exports=Ut;function vL(t){var e=this;this.next=null,this.entry=null,this.finish=function(){g5(e,t)}}var i5=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:So.nextTick,Qa;Ut.WritableState=au;var ML=Object.create(Ka());ML.inherits=Ja();var s5={deprecate:PL()},UL=vA(),UE=iu().Buffer,o5=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function a5(t){return UE.from(t)}function l5(t){return UE.isBuffer(t)||t instanceof o5}var BL=GA();ML.inherits(Ut,UL);function c5(){}function au(t,e){Qa=Qa||Ro(),t=t||{};var n=e instanceof Qa;this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var r=t.highWaterMark,i=t.writableHighWaterMark,s=this.objectMode?16:16*1024;r||r===0?this.highWaterMark=r:n&&(i||i===0)?this.highWaterMark=i:this.highWaterMark=s,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var o=t.decodeStrings===!1;this.decodeStrings=!o,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(a){T5(e,a)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new vL(this)}au.prototype.getBuffer=function(){for(var e=this.bufferedRequest,n=[];e;)n.push(e),e=e.next;return n};(function(){try{Object.defineProperty(au.prototype,"buffer",{get:s5.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var ME;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(ME=Function.prototype[Symbol.hasInstance],Object.defineProperty(Ut,Symbol.hasInstance,{value:function(t){return ME.call(this,t)?!0:this!==Ut?!1:t&&t._writableState instanceof au}})):ME=function(t){return t instanceof this};function Ut(t){if(Qa=Qa||Ro(),!ME.call(Ut,this)&&!(this instanceof Qa))return new Ut(t);this._writableState=new au(t,this),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),UL.call(this)}Ut.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function u5(t,e){var n=new Error("write after end");t.emit("error",n),So.nextTick(e,n)}function d5(t,e,n,r){var i=!0,s=!1;return n===null?s=new TypeError("May not write null values to stream"):typeof n!="string"&&n!==void 0&&!e.objectMode&&(s=new TypeError("Invalid non-string/buffer chunk")),s&&(t.emit("error",s),So.nextTick(r,s),i=!1),i}Ut.prototype.write=function(t,e,n){var r=this._writableState,i=!1,s=!r.objectMode&&l5(t);return s&&!UE.isBuffer(t)&&(t=a5(t)),typeof e=="function"&&(n=e,e=null),s?e="buffer":e||(e=r.defaultEncoding),typeof n!="function"&&(n=c5),r.ended?u5(this,n):(s||d5(this,r,t,n))&&(r.pendingcb++,i=E5(this,r,s,t,e,n)),i};Ut.prototype.cork=function(){var t=this._writableState;t.corked++};Ut.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&FL(this,t))};Ut.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this};function f5(t,e,n){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=UE.from(e,n)),e}Object.defineProperty(Ut.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function E5(t,e,n,r,i,s){if(!n){var o=f5(e,r,i);r!==o&&(n=!0,i="buffer",r=o)}var a=e.objectMode?1:r.length;e.length+=a;var l=e.length<e.highWaterMark;if(l||(e.needDrain=!0),e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:s,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else WA(t,e,!1,a,r,i,s);return l}function WA(t,e,n,r,i,s,o){e.writelen=r,e.writecb=o,e.writing=!0,e.sync=!0,n?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function h5(t,e,n,r,i){--e.pendingcb,n?(So.nextTick(i,r),So.nextTick(ou,t,e),t._writableState.errorEmitted=!0,t.emit("error",r)):(i(r),t._writableState.errorEmitted=!0,t.emit("error",r),ou(t,e))}function p5(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function T5(t,e){var n=t._writableState,r=n.sync,i=n.writecb;if(p5(n),e)h5(t,n,r,e,i);else{var s=HL(n);!s&&!n.corked&&!n.bufferProcessing&&n.bufferedRequest&&FL(t,n),r?i5(xL,t,n,s,i):xL(t,n,s,i)}}function xL(t,e,n,r){n||S5(t,e),e.pendingcb--,r(),ou(t,e)}function S5(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function FL(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var r=e.bufferedRequestCount,i=new Array(r),s=e.corkedRequestsFree;s.entry=n;for(var o=0,a=!0;n;)i[o]=n,n.isBuf||(a=!1),n=n.next,o+=1;i.allBuffers=a,WA(t,e,!0,e.length,i,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new vL(e),e.bufferedRequestCount=0}else{for(;n;){var l=n.chunk,c=n.encoding,u=n.callback,d=e.objectMode?1:l.length;if(WA(t,e,!1,d,l,c,u),n=n.next,e.bufferedRequestCount--,e.writing)break}n===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=n,e.bufferProcessing=!1}Ut.prototype._write=function(t,e,n){n(new Error("_write() is not implemented"))};Ut.prototype._writev=null;Ut.prototype.end=function(t,e,n){var r=this._writableState;typeof t=="function"?(n=t,t=null,e=null):typeof e=="function"&&(n=e,e=null),t!=null&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||m5(this,r,n)};function HL(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function R5(t,e){t._final(function(n){e.pendingcb--,n&&t.emit("error",n),e.prefinished=!0,t.emit("prefinish"),ou(t,e)})}function A5(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"?(e.pendingcb++,e.finalCalled=!0,So.nextTick(R5,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function ou(t,e){var n=HL(e);return n&&(A5(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"))),n}function m5(t,e,n){e.ending=!0,ou(t,e),n&&(e.finished?So.nextTick(n):t.once("finish",n)),e.ended=!0,t.writable=!1}function g5(t,e,n){var r=t.entry;for(t.entry=null;r;){var i=r.callback;e.pendingcb--,i(n),r=r.next}e.corkedRequestsFree.next=t}Object.defineProperty(Ut.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}});Ut.prototype.destroy=BL.destroy;Ut.prototype._undestroy=BL.undestroy;Ut.prototype._destroy=function(t,e){this.end(),e(t)}});var Ro=C((DPe,YL)=>{"use strict";var WL=ru(),I5=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};YL.exports=Bi;var $L=Object.create(Ka());$L.inherits=Ja();var kL=VA(),YA=$A();$L.inherits(Bi,kL);for(kA=I5(YA.prototype),BE=0;BE<kA.length;BE++)FE=kA[BE],Bi.prototype[FE]||(Bi.prototype[FE]=YA.prototype[FE]);var kA,FE,BE;function Bi(t){if(!(this instanceof Bi))return new Bi(t);kL.call(this,t),YA.call(this,t),t&&t.readable===!1&&(this.readable=!1),t&&t.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,t&&t.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",_5)}Object.defineProperty(Bi.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function _5(){this.allowHalfOpen||this._writableState.ended||WL.nextTick(N5,this)}function N5(t){t.end()}Object.defineProperty(Bi.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(t){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=t,this._writableState.destroyed=t)}});Bi.prototype._destroy=function(t,e){this.push(null),this.end(),WL.nextTick(e,t)}});var zA=C(qL=>{"use strict";var XA=iu().Buffer,VL=XA.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function O5(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function C5(t){var e=O5(t);if(typeof e!="string"&&(XA.isEncoding===VL||!VL(t)))throw new Error("Unknown encoding: "+t);return e||t}qL.StringDecoder=lu;function lu(t){this.encoding=C5(t);var e;switch(this.encoding){case"utf16le":this.text=P5,this.end=x5,e=4;break;case"utf8":this.fillLast=w5,e=4;break;case"base64":this.text=v5,this.end=M5,e=3;break;default:this.write=U5,this.end=B5;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=XA.allocUnsafe(e)}lu.prototype.write=function(t){if(t.length===0)return"";var e,n;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""};lu.prototype.end=D5;lu.prototype.text=L5;lu.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function qA(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function y5(t,e,n){var r=e.length-1;if(r<n)return 0;var i=qA(e[r]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--r<n||i===-2?0:(i=qA(e[r]),i>=0?(i>0&&(t.lastNeed=i-2),i):--r<n||i===-2?0:(i=qA(e[r]),i>=0?(i>0&&(i===2?i=0:t.lastNeed=i-3),i):0))}function b5(t,e,n){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function w5(t){var e=this.lastTotal-this.lastNeed,n=b5(this,t,e);if(n!==void 0)return n;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function L5(t,e){var n=y5(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var r=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)}function D5(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function P5(t,e){if((t.length-e)%2===0){var n=t.toString("utf16le",e);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function x5(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function v5(t,e){var n=(t.length-e)%3;return n===0?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,n===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function M5(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function U5(t){return t.toString(this.encoding)}function B5(t){return t&&t.length?this.write(t):""}});var VA=C((vPe,iD)=>{"use strict";var el=ru();iD.exports=nt;var F5=_L(),cu;nt.ReadableState=ZL;var xPe=require("events").EventEmitter,KL=function(t,e){return t.listeners(e).length},ZA=vA(),uu=iu().Buffer,H5=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function G5(t){return uu.from(t)}function W5(t){return uu.isBuffer(t)||t instanceof H5}var JL=Object.create(Ka());JL.inherits=Ja();var jA=require("util"),Xe=void 0;jA&&jA.debuglog?Xe=jA.debuglog("stream"):Xe=function(){};var $5=wL(),QL=GA(),Za;JL.inherits(nt,ZA);var KA=["error","close","destroy","pause","resume"];function k5(t,e,n){if(typeof t.prependListener=="function")return t.prependListener(e,n);!t._events||!t._events[e]?t.on(e,n):F5(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]}function ZL(t,e){cu=cu||Ro(),t=t||{};var n=e instanceof cu;this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var r=t.highWaterMark,i=t.readableHighWaterMark,s=this.objectMode?16:16*1024;r||r===0?this.highWaterMark=r:n&&(i||i===0)?this.highWaterMark=i:this.highWaterMark=s,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new $5,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(Za||(Za=zA().StringDecoder),this.decoder=new Za(t.encoding),this.encoding=t.encoding)}function nt(t){if(cu=cu||Ro(),!(this instanceof nt))return new nt(t);this._readableState=new ZL(t,this),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),ZA.call(this)}Object.defineProperty(nt.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}});nt.prototype.destroy=QL.destroy;nt.prototype._undestroy=QL.undestroy;nt.prototype._destroy=function(t,e){this.push(null),e(t)};nt.prototype.push=function(t,e){var n=this._readableState,r;return n.objectMode?r=!0:typeof t=="string"&&(e=e||n.defaultEncoding,e!==n.encoding&&(t=uu.from(t,e),e=""),r=!0),eD(this,t,e,!1,r)};nt.prototype.unshift=function(t){return eD(this,t,null,!0,!1)};function eD(t,e,n,r,i){var s=t._readableState;if(e===null)s.reading=!1,X5(t,s);else{var o;i||(o=Y5(s,e)),o?t.emit("error",o):s.objectMode||e&&e.length>0?(typeof e!="string"&&!s.objectMode&&Object.getPrototypeOf(e)!==uu.prototype&&(e=G5(e)),r?s.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):JA(t,s,e,!0):s.ended?t.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!n?(e=s.decoder.write(e),s.objectMode||e.length!==0?JA(t,s,e,!1):tD(t,s)):JA(t,s,e,!1))):r||(s.reading=!1)}return V5(s)}function JA(t,e,n,r){e.flowing&&e.length===0&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&HE(t)),tD(t,e)}function Y5(t,e){var n;return!W5(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(n=new TypeError("Invalid non-string/buffer chunk")),n}function V5(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||t.length===0)}nt.prototype.isPaused=function(){return this._readableState.flowing===!1};nt.prototype.setEncoding=function(t){return Za||(Za=zA().StringDecoder),this._readableState.decoder=new Za(t),this._readableState.encoding=t,this};var XL=8388608;function q5(t){return t>=XL?t=XL:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function zL(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=q5(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}nt.prototype.read=function(t){Xe("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return Xe("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?QA(this):HE(this),null;if(t=zL(t,e),t===0&&e.ended)return e.length===0&&QA(this),null;var r=e.needReadable;Xe("need readable",r),(e.length===0||e.length-t<e.highWaterMark)&&(r=!0,Xe("length less than watermark",r)),e.ended||e.reading?(r=!1,Xe("reading or ended",r)):r&&(Xe("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=zL(n,e)));var i;return t>0?i=nD(t,e):i=null,i===null?(e.needReadable=!0,t=0):e.length-=t,e.length===0&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&QA(this)),i!==null&&this.emit("data",i),i};function X5(t,e){if(!e.ended){if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,HE(t)}}function HE(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(Xe("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?el.nextTick(jL,t):jL(t))}function jL(t){Xe("emit readable"),t.emit("readable"),em(t)}function tD(t,e){e.readingMore||(e.readingMore=!0,el.nextTick(z5,t,e))}function z5(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(Xe("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}nt.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))};nt.prototype.pipe=function(t,e){var n=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=t;break;case 1:r.pipes=[r.pipes,t];break;default:r.pipes.push(t);break}r.pipesCount+=1,Xe("pipe count=%d opts=%j",r.pipesCount,e);var i=(!e||e.end!==!1)&&t!==process.stdout&&t!==process.stderr,s=i?a:T;r.endEmitted?el.nextTick(s):n.once("end",s),t.on("unpipe",o);function o(S,I){Xe("onunpipe"),S===n&&I&&I.hasUnpiped===!1&&(I.hasUnpiped=!0,u())}function a(){Xe("onend"),t.end()}var l=j5(n);t.on("drain",l);var c=!1;function u(){Xe("cleanup"),t.removeListener("close",p),t.removeListener("finish",h),t.removeListener("drain",l),t.removeListener("error",f),t.removeListener("unpipe",o),n.removeListener("end",a),n.removeListener("end",T),n.removeListener("data",E),c=!0,r.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&l()}var d=!1;n.on("data",E);function E(S){Xe("ondata"),d=!1;var I=t.write(S);I===!1&&!d&&((r.pipesCount===1&&r.pipes===t||r.pipesCount>1&&rD(r.pipes,t)!==-1)&&!c&&(Xe("false write response, pause",r.awaitDrain),r.awaitDrain++,d=!0),n.pause())}function f(S){Xe("onerror",S),T(),t.removeListener("error",f),KL(t,"error")===0&&t.emit("error",S)}k5(t,"error",f);function p(){t.removeListener("finish",h),T()}t.once("close",p);function h(){Xe("onfinish"),t.removeListener("close",p),T()}t.once("finish",h);function T(){Xe("unpipe"),n.unpipe(t)}return t.emit("pipe",n),r.flowing||(Xe("pipe resume"),n.resume()),t};function j5(t){return function(){var e=t._readableState;Xe("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,e.awaitDrain===0&&KL(t,"data")&&(e.flowing=!0,em(t))}}nt.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n),this);if(!t){var r=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var s=0;s<i;s++)r[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=rD(e.pipes,t);return o===-1?this:(e.pipes.splice(o,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n),this)};nt.prototype.on=function(t,e){var n=ZA.prototype.on.call(this,t,e);if(t==="data")this._readableState.flowing!==!1&&this.resume();else if(t==="readable"){var r=this._readableState;!r.endEmitted&&!r.readableListening&&(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&HE(this):el.nextTick(K5,this))}return n};nt.prototype.addListener=nt.prototype.on;function K5(t){Xe("readable nexttick read 0"),t.read(0)}nt.prototype.resume=function(){var t=this._readableState;return t.flowing||(Xe("resume"),t.flowing=!0,J5(this,t)),this};function J5(t,e){e.resumeScheduled||(e.resumeScheduled=!0,el.nextTick(Q5,t,e))}function Q5(t,e){e.reading||(Xe("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),em(t),e.flowing&&!e.reading&&t.read(0)}nt.prototype.pause=function(){return Xe("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Xe("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function em(t){var e=t._readableState;for(Xe("flow",e.flowing);e.flowing&&t.read()!==null;);}nt.prototype.wrap=function(t){var e=this,n=this._readableState,r=!1;t.on("end",function(){if(Xe("wrapped end"),n.decoder&&!n.ended){var o=n.decoder.end();o&&o.length&&e.push(o)}e.push(null)}),t.on("data",function(o){if(Xe("wrapped data"),n.decoder&&(o=n.decoder.write(o)),!(n.objectMode&&o==null)&&!(!n.objectMode&&(!o||!o.length))){var a=e.push(o);a||(r=!0,t.pause())}});for(var i in t)this[i]===void 0&&typeof t[i]=="function"&&(this[i]=(function(o){return function(){return t[o].apply(t,arguments)}})(i));for(var s=0;s<KA.length;s++)t.on(KA[s],this.emit.bind(this,KA[s]));return this._read=function(o){Xe("wrapped _read",o),r&&(r=!1,t.resume())},this};Object.defineProperty(nt.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});nt._fromList=nD;function nD(t,e){if(e.length===0)return null;var n;return e.objectMode?n=e.buffer.shift():!t||t>=e.length?(e.decoder?n=e.buffer.join(""):e.buffer.length===1?n=e.buffer.head.data:n=e.buffer.concat(e.length),e.buffer.clear()):n=Z5(t,e.buffer,e.decoder),n}function Z5(t,e,n){var r;return t<e.head.data.length?(r=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):t===e.head.data.length?r=e.shift():r=n?eQ(t,e):tQ(t,e),r}function eQ(t,e){var n=e.head,r=1,i=n.data;for(t-=i.length;n=n.next;){var s=n.data,o=t>s.length?s.length:t;if(o===s.length?i+=s:i+=s.slice(0,t),t-=o,t===0){o===s.length?(++r,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=s.slice(o));break}++r}return e.length-=r,i}function tQ(t,e){var n=uu.allocUnsafe(t),r=e.head,i=1;for(r.data.copy(n),t-=r.data.length;r=r.next;){var s=r.data,o=t>s.length?s.length:t;if(s.copy(n,n.length-t,0,o),t-=o,t===0){o===s.length?(++i,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=s.slice(o));break}++i}return e.length-=i,n}function QA(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,el.nextTick(nQ,e,t))}function nQ(t,e){!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function rD(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}});var tm=C((MPe,aD)=>{"use strict";aD.exports=Fi;var GE=Ro(),oD=Object.create(Ka());oD.inherits=Ja();oD.inherits(Fi,GE);function rQ(t,e){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,e!=null&&this.push(e),r(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function Fi(t){if(!(this instanceof Fi))return new Fi(t);GE.call(this,t),this._transformState={afterTransform:rQ.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",iQ)}function iQ(){var t=this;typeof this._flush=="function"?this._flush(function(e,n){sD(t,e,n)}):sD(this,null,null)}Fi.prototype.push=function(t,e){return this._transformState.needTransform=!1,GE.prototype.push.call(this,t,e)};Fi.prototype._transform=function(t,e,n){throw new Error("_transform() is not implemented")};Fi.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};Fi.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};Fi.prototype._destroy=function(t,e){var n=this;GE.prototype._destroy.call(this,t,function(r){e(r),n.emit("close")})};function sD(t,e,n){if(e)return t.emit("error",e);if(n!=null&&t.push(n),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}});var dD=C((UPe,uD)=>{"use strict";uD.exports=du;var lD=tm(),cD=Object.create(Ka());cD.inherits=Ja();cD.inherits(du,lD);function du(t){if(!(this instanceof du))return new du(t);lD.call(this,t)}du.prototype._transform=function(t,e,n){n(null,t)}});var fD=C((pn,WE)=>{var Qr=require("stream");process.env.READABLE_STREAM==="disable"&&Qr?(WE.exports=Qr,pn=WE.exports=Qr.Readable,pn.Readable=Qr.Readable,pn.Writable=Qr.Writable,pn.Duplex=Qr.Duplex,pn.Transform=Qr.Transform,pn.PassThrough=Qr.PassThrough,pn.Stream=Qr):(pn=WE.exports=VA(),pn.Stream=Qr||pn,pn.Readable=pn,pn.Writable=$A(),pn.Duplex=Ro(),pn.Transform=tm(),pn.PassThrough=dD())});var hD=C((BPe,ED)=>{ED.exports=fD().PassThrough});var RD=C((FPe,SD)=>{var pD=require("util"),YE=hD();SD.exports={Readable:$E,Writable:kE};pD.inherits($E,YE);pD.inherits(kE,YE);function TD(t,e,n){t[e]=function(){return delete t[e],n.apply(this,arguments),this[e].apply(this,arguments)}}function $E(t,e){if(!(this instanceof $E))return new $E(t,e);YE.call(this,e),TD(this,"_read",function(){var n=t.call(this,e),r=this.emit.bind(this,"error");n.on("error",r),n.pipe(this)}),this.emit("readable")}function kE(t,e){if(!(this instanceof kE))return new kE(t,e);YE.call(this,e),TD(this,"_write",function(){var n=t.call(this,e),r=this.emit.bind(this,"error");n.on("error",r),this.pipe(n)}),this.emit("writable")}});var nm=C((HPe,AD)=>{AD.exports=function(t,e){if(typeof t!="string")throw new TypeError("expected path to be a string");if(t==="\\"||t==="/")return"/";var n=t.length;if(n<=1)return t;var r="";if(n>4&&t[3]==="\\"){var i=t[2];(i==="?"||i===".")&&t.slice(0,2)==="\\\\"&&(t=t.slice(2),r="//")}var s=t.split(/[/\\]+/);return e!==!1&&s[s.length-1]===""&&s.pop(),r+s.join("/")}});var rm=C((GPe,mD)=>{function sQ(t){return t}mD.exports=sQ});var ID=C((WPe,gD)=>{function oQ(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}gD.exports=oQ});var OD=C(($Pe,ND)=>{var aQ=ID(),_D=Math.max;function lQ(t,e,n){return e=_D(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,s=_D(r.length-e,0),o=Array(s);++i<s;)o[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=n(o),aQ(t,this,a)}}ND.exports=lQ});var yD=C((kPe,CD)=>{function cQ(t){return function(){return t}}CD.exports=cQ});var im=C((YPe,bD)=>{var uQ=typeof global=="object"&&global&&global.Object===Object&&global;bD.exports=uQ});var tl=C((VPe,wD)=>{var dQ=im(),fQ=typeof self=="object"&&self&&self.Object===Object&&self,EQ=dQ||fQ||Function("return this")();wD.exports=EQ});var VE=C((qPe,LD)=>{var hQ=tl(),pQ=hQ.Symbol;LD.exports=pQ});var vD=C((XPe,xD)=>{var DD=VE(),PD=Object.prototype,TQ=PD.hasOwnProperty,SQ=PD.toString,fu=DD?DD.toStringTag:void 0;function RQ(t){var e=TQ.call(t,fu),n=t[fu];try{t[fu]=void 0;var r=!0}catch{}var i=SQ.call(t);return r&&(e?t[fu]=n:delete t[fu]),i}xD.exports=RQ});var UD=C((zPe,MD)=>{var AQ=Object.prototype,mQ=AQ.toString;function gQ(t){return mQ.call(t)}MD.exports=gQ});var Eu=C((jPe,HD)=>{var BD=VE(),IQ=vD(),_Q=UD(),NQ="[object Null]",OQ="[object Undefined]",FD=BD?BD.toStringTag:void 0;function CQ(t){return t==null?t===void 0?OQ:NQ:FD&&FD in Object(t)?IQ(t):_Q(t)}HD.exports=CQ});var hu=C((KPe,GD)=>{function yQ(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}GD.exports=yQ});var sm=C((JPe,WD)=>{var bQ=Eu(),wQ=hu(),LQ="[object AsyncFunction]",DQ="[object Function]",PQ="[object GeneratorFunction]",xQ="[object Proxy]";function vQ(t){if(!wQ(t))return!1;var e=bQ(t);return e==DQ||e==PQ||e==LQ||e==xQ}WD.exports=vQ});var kD=C((QPe,$D)=>{var MQ=tl(),UQ=MQ["__core-js_shared__"];$D.exports=UQ});var qD=C((ZPe,VD)=>{var om=kD(),YD=(function(){var t=/[^.]+$/.exec(om&&om.keys&&om.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""})();function BQ(t){return!!YD&&YD in t}VD.exports=BQ});var zD=C((exe,XD)=>{var FQ=Function.prototype,HQ=FQ.toString;function GQ(t){if(t!=null){try{return HQ.call(t)}catch{}try{return t+""}catch{}}return""}XD.exports=GQ});var KD=C((txe,jD)=>{var WQ=sm(),$Q=qD(),kQ=hu(),YQ=zD(),VQ=/[\\^$.*+?()[\]{}|]/g,qQ=/^\[object .+?Constructor\]$/,XQ=Function.prototype,zQ=Object.prototype,jQ=XQ.toString,KQ=zQ.hasOwnProperty,JQ=RegExp("^"+jQ.call(KQ).replace(VQ,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function QQ(t){if(!kQ(t)||$Q(t))return!1;var e=WQ(t)?JQ:qQ;return e.test(YQ(t))}jD.exports=QQ});var QD=C((nxe,JD)=>{function ZQ(t,e){return t?.[e]}JD.exports=ZQ});var pu=C((rxe,ZD)=>{var e9=KD(),t9=QD();function n9(t,e){var n=t9(t,e);return e9(n)?n:void 0}ZD.exports=n9});var tP=C((ixe,eP)=>{var r9=pu(),i9=(function(){try{var t=r9(Object,"defineProperty");return t({},"",{}),t}catch{}})();eP.exports=i9});var iP=C((sxe,rP)=>{var s9=yD(),nP=tP(),o9=rm(),a9=nP?function(t,e){return nP(t,"toString",{configurable:!0,enumerable:!1,value:s9(e),writable:!0})}:o9;rP.exports=a9});var oP=C((oxe,sP)=>{var l9=800,c9=16,u9=Date.now;function d9(t){var e=0,n=0;return function(){var r=u9(),i=c9-(r-n);if(n=r,i>0){if(++e>=l9)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}sP.exports=d9});var lP=C((axe,aP)=>{var f9=iP(),E9=oP(),h9=E9(f9);aP.exports=h9});var qE=C((lxe,cP)=>{var p9=rm(),T9=OD(),S9=lP();function R9(t,e){return S9(T9(t,e,p9),t+"")}cP.exports=R9});var XE=C((cxe,uP)=>{function A9(t,e){return t===e||t!==t&&e!==e}uP.exports=A9});var am=C((uxe,dP)=>{var m9=9007199254740991;function g9(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=m9}dP.exports=g9});var zE=C((dxe,fP)=>{var I9=sm(),_9=am();function N9(t){return t!=null&&_9(t.length)&&!I9(t)}fP.exports=N9});var lm=C((fxe,EP)=>{var O9=9007199254740991,C9=/^(?:0|[1-9]\d*)$/;function y9(t,e){var n=typeof t;return e=e??O9,!!e&&(n=="number"||n!="symbol"&&C9.test(t))&&t>-1&&t%1==0&&t<e}EP.exports=y9});var pP=C((Exe,hP)=>{var b9=XE(),w9=zE(),L9=lm(),D9=hu();function P9(t,e,n){if(!D9(n))return!1;var r=typeof e;return(r=="number"?w9(n)&&L9(e,n.length):r=="string"&&e in n)?b9(n[e],t):!1}hP.exports=P9});var SP=C((hxe,TP)=>{function x9(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}TP.exports=x9});var nl=C((pxe,RP)=>{function v9(t){return t!=null&&typeof t=="object"}RP.exports=v9});var mP=C((Txe,AP)=>{var M9=Eu(),U9=nl(),B9="[object Arguments]";function F9(t){return U9(t)&&M9(t)==B9}AP.exports=F9});var cm=C((Sxe,_P)=>{var gP=mP(),H9=nl(),IP=Object.prototype,G9=IP.hasOwnProperty,W9=IP.propertyIsEnumerable,$9=gP((function(){return arguments})())?gP:function(t){return H9(t)&&G9.call(t,"callee")&&!W9.call(t,"callee")};_P.exports=$9});var um=C((Rxe,NP)=>{var k9=Array.isArray;NP.exports=k9});var CP=C((Axe,OP)=>{function Y9(){return!1}OP.exports=Y9});var LP=C((Tu,rl)=>{var V9=tl(),q9=CP(),wP=typeof Tu=="object"&&Tu&&!Tu.nodeType&&Tu,yP=wP&&typeof rl=="object"&&rl&&!rl.nodeType&&rl,X9=yP&&yP.exports===wP,bP=X9?V9.Buffer:void 0,z9=bP?bP.isBuffer:void 0,j9=z9||q9;rl.exports=j9});var PP=C((mxe,DP)=>{var K9=Eu(),J9=am(),Q9=nl(),Z9="[object Arguments]",e7="[object Array]",t7="[object Boolean]",n7="[object Date]",r7="[object Error]",i7="[object Function]",s7="[object Map]",o7="[object Number]",a7="[object Object]",l7="[object RegExp]",c7="[object Set]",u7="[object String]",d7="[object WeakMap]",f7="[object ArrayBuffer]",E7="[object DataView]",h7="[object Float32Array]",p7="[object Float64Array]",T7="[object Int8Array]",S7="[object Int16Array]",R7="[object Int32Array]",A7="[object Uint8Array]",m7="[object Uint8ClampedArray]",g7="[object Uint16Array]",I7="[object Uint32Array]",rt={};rt[h7]=rt[p7]=rt[T7]=rt[S7]=rt[R7]=rt[A7]=rt[m7]=rt[g7]=rt[I7]=!0;rt[Z9]=rt[e7]=rt[f7]=rt[t7]=rt[E7]=rt[n7]=rt[r7]=rt[i7]=rt[s7]=rt[o7]=rt[a7]=rt[l7]=rt[c7]=rt[u7]=rt[d7]=!1;function _7(t){return Q9(t)&&J9(t.length)&&!!rt[K9(t)]}DP.exports=_7});var dm=C((gxe,xP)=>{function N7(t){return function(e){return t(e)}}xP.exports=N7});var MP=C((Su,il)=>{var O7=im(),vP=typeof Su=="object"&&Su&&!Su.nodeType&&Su,Ru=vP&&typeof il=="object"&&il&&!il.nodeType&&il,C7=Ru&&Ru.exports===vP,fm=C7&&O7.process,y7=(function(){try{var t=Ru&&Ru.require&&Ru.require("util").types;return t||fm&&fm.binding&&fm.binding("util")}catch{}})();il.exports=y7});var HP=C((Ixe,FP)=>{var b7=PP(),w7=dm(),UP=MP(),BP=UP&&UP.isTypedArray,L7=BP?w7(BP):b7;FP.exports=L7});var WP=C((_xe,GP)=>{var D7=SP(),P7=cm(),x7=um(),v7=LP(),M7=lm(),U7=HP(),B7=Object.prototype,F7=B7.hasOwnProperty;function H7(t,e){var n=x7(t),r=!n&&P7(t),i=!n&&!r&&v7(t),s=!n&&!r&&!i&&U7(t),o=n||r||i||s,a=o?D7(t.length,String):[],l=a.length;for(var c in t)(e||F7.call(t,c))&&!(o&&(c=="length"||i&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||M7(c,l)))&&a.push(c);return a}GP.exports=H7});var kP=C((Nxe,$P)=>{var G7=Object.prototype;function W7(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||G7;return t===n}$P.exports=W7});var VP=C((Oxe,YP)=>{function $7(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}YP.exports=$7});var XP=C((Cxe,qP)=>{var k7=hu(),Y7=kP(),V7=VP(),q7=Object.prototype,X7=q7.hasOwnProperty;function z7(t){if(!k7(t))return V7(t);var e=Y7(t),n=[];for(var r in t)r=="constructor"&&(e||!X7.call(t,r))||n.push(r);return n}qP.exports=z7});var jP=C((yxe,zP)=>{var j7=WP(),K7=XP(),J7=zE();function Q7(t){return J7(t)?j7(t,!0):K7(t)}zP.exports=Q7});var QP=C((bxe,JP)=>{var Z7=qE(),eZ=XE(),tZ=pP(),nZ=jP(),KP=Object.prototype,rZ=KP.hasOwnProperty,iZ=Z7(function(t,e){t=Object(t);var n=-1,r=e.length,i=r>2?e[2]:void 0;for(i&&tZ(e[0],e[1],i)&&(r=1);++n<r;)for(var s=e[n],o=nZ(s),a=-1,l=o.length;++a<l;){var c=o[a],u=t[c];(u===void 0||eZ(u,KP[c])&&!rZ.call(t,c))&&(t[c]=s[c])}return t});JP.exports=iZ});var ut=C((wxe,ZP)=>{"use strict";var Em=class extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError(`Expected input to be an Array, got ${typeof e}`);let n="";for(let r=0;r<e.length;r++)n+=`    ${e[r].stack}
`;super(n),this.name="AggregateError",this.errors=e}};ZP.exports={AggregateError:Em,ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,e){return t.includes(e)},ArrayPrototypeIndexOf(t,e){return t.indexOf(e)},ArrayPrototypeJoin(t,e){return t.join(e)},ArrayPrototypeMap(t,e){return t.map(e)},ArrayPrototypePop(t,e){return t.pop(e)},ArrayPrototypePush(t,e){return t.push(e)},ArrayPrototypeSlice(t,e,n){return t.slice(e,n)},Error,FunctionPrototypeCall(t,e,...n){return t.call(e,...n)},FunctionPrototypeSymbolHasInstance(t,e){return Function.prototype[Symbol.hasInstance].call(t,e)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,e){return Object.defineProperties(t,e)},ObjectDefineProperty(t,e,n){return Object.defineProperty(t,e,n)},ObjectGetOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,e){return Object.setPrototypeOf(t,e)},Promise,PromisePrototypeCatch(t,e){return t.catch(e)},PromisePrototypeThen(t,e,n){return t.then(e,n)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,e){return t.test(e)},SafeSet:Set,String,StringPrototypeSlice(t,e,n){return t.slice(e,n)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,e,n){return t.set(e,n)},Boolean,Uint8Array}});var hm=C((Lxe,ex)=>{"use strict";ex.exports={format(t,...e){return t.replace(/%([sdifj])/g,function(...[n,r]){let i=e.shift();return r==="f"?i.toFixed(6):r==="j"?JSON.stringify(i):r==="s"&&typeof i=="object"?`${i.constructor!==Object?i.constructor.name:""} {}`.trim():i.toString()})},inspect(t){switch(typeof t){case"string":if(t.includes("'"))if(t.includes('"')){if(!t.includes("`")&&!t.includes("${"))return`\`${t}\``}else return`"${t}"`;return`'${t}'`;case"number":return isNaN(t)?"NaN":Object.is(t,-0)?String(t):t;case"bigint":return`${String(t)}n`;case"boolean":case"undefined":return String(t);case"object":return"{}"}}}});var bn=C((Dxe,rx)=>{"use strict";var{format:sZ,inspect:jE}=hm(),{AggregateError:oZ}=ut(),aZ=globalThis.AggregateError||oZ,lZ=Symbol("kIsNodeError"),cZ=["string","function","number","object","Function","Object","boolean","bigint","symbol"],uZ=/^([A-Z][a-z0-9]*)+$/,dZ="__node_internal_",KE={};function Ao(t,e){if(!t)throw new KE.ERR_INTERNAL_ASSERTION(e)}function tx(t){let e="",n=t.length,r=t[0]==="-"?1:0;for(;n>=r+4;n-=3)e=`_${t.slice(n-3,n)}${e}`;return`${t.slice(0,n)}${e}`}function fZ(t,e,n){if(typeof e=="function")return Ao(e.length<=n.length,`Code: ${t}; The provided arguments length (${n.length}) does not match the required ones (${e.length}).`),e(...n);let r=(e.match(/%[dfijoOs]/g)||[]).length;return Ao(r===n.length,`Code: ${t}; The provided arguments length (${n.length}) does not match the required ones (${r}).`),n.length===0?e:sZ(e,...n)}function Tn(t,e,n){n||(n=Error);class r extends n{constructor(...s){super(fZ(t,e,s))}toString(){return`${this.name} [${t}]: ${this.message}`}}Object.defineProperties(r.prototype,{name:{value:n.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${t}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),r.prototype.code=t,r.prototype[lZ]=!0,KE[t]=r}function nx(t){let e=dZ+t.name;return Object.defineProperty(t,"name",{value:e}),t}function EZ(t,e){if(t&&e&&t!==e){if(Array.isArray(e.errors))return e.errors.push(t),e;let n=new aZ([e,t],e.message);return n.code=e.code,n}return t||e}var pm=class extends Error{constructor(e="The operation was aborted",n=void 0){if(n!==void 0&&typeof n!="object")throw new KE.ERR_INVALID_ARG_TYPE("options","Object",n);super(e,n),this.code="ABORT_ERR",this.name="AbortError"}};Tn("ERR_ASSERTION","%s",Error);Tn("ERR_INVALID_ARG_TYPE",(t,e,n)=>{Ao(typeof t=="string","'name' must be a string"),Array.isArray(e)||(e=[e]);let r="The ";t.endsWith(" argument")?r+=`${t} `:r+=`"${t}" ${t.includes(".")?"property":"argument"} `,r+="must be ";let i=[],s=[],o=[];for(let l of e)Ao(typeof l=="string","All expected entries have to be of type string"),cZ.includes(l)?i.push(l.toLowerCase()):uZ.test(l)?s.push(l):(Ao(l!=="object",'The value "object" should be written as "Object"'),o.push(l));if(s.length>0){let l=i.indexOf("object");l!==-1&&(i.splice(i,l,1),s.push("Object"))}if(i.length>0){switch(i.length){case 1:r+=`of type ${i[0]}`;break;case 2:r+=`one of type ${i[0]} or ${i[1]}`;break;default:{let l=i.pop();r+=`one of type ${i.join(", ")}, or ${l}`}}(s.length>0||o.length>0)&&(r+=" or ")}if(s.length>0){switch(s.length){case 1:r+=`an instance of ${s[0]}`;break;case 2:r+=`an instance of ${s[0]} or ${s[1]}`;break;default:{let l=s.pop();r+=`an instance of ${s.join(", ")}, or ${l}`}}o.length>0&&(r+=" or ")}switch(o.length){case 0:break;case 1:o[0].toLowerCase()!==o[0]&&(r+="an "),r+=`${o[0]}`;break;case 2:r+=`one of ${o[0]} or ${o[1]}`;break;default:{let l=o.pop();r+=`one of ${o.join(", ")}, or ${l}`}}if(n==null)r+=`. Received ${n}`;else if(typeof n=="function"&&n.name)r+=`. Received function ${n.name}`;else if(typeof n=="object"){var a;if((a=n.constructor)!==null&&a!==void 0&&a.name)r+=`. Received an instance of ${n.constructor.name}`;else{let l=jE(n,{depth:-1});r+=`. Received ${l}`}}else{let l=jE(n,{colors:!1});l.length>25&&(l=`${l.slice(0,25)}...`),r+=`. Received type ${typeof n} (${l})`}return r},TypeError);Tn("ERR_INVALID_ARG_VALUE",(t,e,n="is invalid")=>{let r=jE(e);return r.length>128&&(r=r.slice(0,128)+"..."),`The ${t.includes(".")?"property":"argument"} '${t}' ${n}. Received ${r}`},TypeError);Tn("ERR_INVALID_RETURN_VALUE",(t,e,n)=>{var r;let i=n!=null&&(r=n.constructor)!==null&&r!==void 0&&r.name?`instance of ${n.constructor.name}`:`type ${typeof n}`;return`Expected ${t} to be returned from the "${e}" function but got ${i}.`},TypeError);Tn("ERR_MISSING_ARGS",(...t)=>{Ao(t.length>0,"At least one arg needs to be specified");let e,n=t.length;switch(t=(Array.isArray(t)?t:[t]).map(r=>`"${r}"`).join(" or "),n){case 1:e+=`The ${t[0]} argument`;break;case 2:e+=`The ${t[0]} and ${t[1]} arguments`;break;default:{let r=t.pop();e+=`The ${t.join(", ")}, and ${r} arguments`}break}return`${e} must be specified`},TypeError);Tn("ERR_OUT_OF_RANGE",(t,e,n)=>{Ao(e,'Missing "range" argument');let r;if(Number.isInteger(n)&&Math.abs(n)>2**32)r=tx(String(n));else if(typeof n=="bigint"){r=String(n);let i=BigInt(2)**BigInt(32);(n>i||n<-i)&&(r=tx(r)),r+="n"}else r=jE(n);return`The value of "${t}" is out of range. It must be ${e}. Received ${r}`},RangeError);Tn("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);Tn("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);Tn("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);Tn("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);Tn("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);Tn("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Tn("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);Tn("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);Tn("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);Tn("ERR_STREAM_WRITE_AFTER_END","write after end",Error);Tn("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);rx.exports={AbortError:pm,aggregateTwoErrors:nx(EZ),hideStackFrames:nx,codes:KE}});var Ex=C((gu,mu)=>{"use strict";Object.defineProperty(gu,"__esModule",{value:!0});var cx=new WeakMap,Tm=new WeakMap;function it(t){let e=cx.get(t);return console.assert(e!=null,"'this' is expected an Event object, but got",t),e}function ix(t){if(t.passiveListener!=null){typeof console<"u"&&typeof console.error=="function"&&console.error("Unable to preventDefault inside passive event listener invocation.",t.passiveListener);return}t.event.cancelable&&(t.canceled=!0,typeof t.event.preventDefault=="function"&&t.event.preventDefault())}function sl(t,e){cx.set(this,{eventTarget:t,event:e,eventPhase:2,currentTarget:t,canceled:!1,stopped:!1,immediateStopped:!1,passiveListener:null,timeStamp:e.timeStamp||Date.now()}),Object.defineProperty(this,"isTrusted",{value:!1,enumerable:!0});let n=Object.keys(e);for(let r=0;r<n.length;++r){let i=n[r];i in this||Object.defineProperty(this,i,ux(i))}}sl.prototype={get type(){return it(this).event.type},get target(){return it(this).eventTarget},get currentTarget(){return it(this).currentTarget},composedPath(){let t=it(this).currentTarget;return t==null?[]:[t]},get NONE(){return 0},get CAPTURING_PHASE(){return 1},get AT_TARGET(){return 2},get BUBBLING_PHASE(){return 3},get eventPhase(){return it(this).eventPhase},stopPropagation(){let t=it(this);t.stopped=!0,typeof t.event.stopPropagation=="function"&&t.event.stopPropagation()},stopImmediatePropagation(){let t=it(this);t.stopped=!0,t.immediateStopped=!0,typeof t.event.stopImmediatePropagation=="function"&&t.event.stopImmediatePropagation()},get bubbles(){return!!it(this).event.bubbles},get cancelable(){return!!it(this).event.cancelable},preventDefault(){ix(it(this))},get defaultPrevented(){return it(this).canceled},get composed(){return!!it(this).event.composed},get timeStamp(){return it(this).timeStamp},get srcElement(){return it(this).eventTarget},get cancelBubble(){return it(this).stopped},set cancelBubble(t){if(!t)return;let e=it(this);e.stopped=!0,typeof e.event.cancelBubble=="boolean"&&(e.event.cancelBubble=!0)},get returnValue(){return!it(this).canceled},set returnValue(t){t||ix(it(this))},initEvent(){}};Object.defineProperty(sl.prototype,"constructor",{value:sl,configurable:!0,writable:!0});typeof window<"u"&&typeof window.Event<"u"&&(Object.setPrototypeOf(sl.prototype,window.Event.prototype),Tm.set(window.Event.prototype,sl));function ux(t){return{get(){return it(this).event[t]},set(e){it(this).event[t]=e},configurable:!0,enumerable:!0}}function hZ(t){return{value(){let e=it(this).event;return e[t].apply(e,arguments)},configurable:!0,enumerable:!0}}function pZ(t,e){let n=Object.keys(e);if(n.length===0)return t;function r(i,s){t.call(this,i,s)}r.prototype=Object.create(t.prototype,{constructor:{value:r,configurable:!0,writable:!0}});for(let i=0;i<n.length;++i){let s=n[i];if(!(s in t.prototype)){let a=typeof Object.getOwnPropertyDescriptor(e,s).value=="function";Object.defineProperty(r.prototype,s,a?hZ(s):ux(s))}}return r}function dx(t){if(t==null||t===Object.prototype)return sl;let e=Tm.get(t);return e==null&&(e=pZ(dx(Object.getPrototypeOf(t)),t),Tm.set(t,e)),e}function TZ(t,e){let n=dx(Object.getPrototypeOf(e));return new n(t,e)}function SZ(t){return it(t).immediateStopped}function RZ(t,e){it(t).eventPhase=e}function AZ(t,e){it(t).currentTarget=e}function sx(t,e){it(t).passiveListener=e}var fx=new WeakMap,ox=1,ax=2,JE=3;function QE(t){return t!==null&&typeof t=="object"}function Au(t){let e=fx.get(t);if(e==null)throw new TypeError("'this' is expected an EventTarget object, but got another value.");return e}function mZ(t){return{get(){let n=Au(this).get(t);for(;n!=null;){if(n.listenerType===JE)return n.listener;n=n.next}return null},set(e){typeof e!="function"&&!QE(e)&&(e=null);let n=Au(this),r=null,i=n.get(t);for(;i!=null;)i.listenerType===JE?r!==null?r.next=i.next:i.next!==null?n.set(t,i.next):n.delete(t):r=i,i=i.next;if(e!==null){let s={listener:e,listenerType:JE,passive:!1,once:!1,next:null};r===null?n.set(t,s):r.next=s}},configurable:!0,enumerable:!0}}function Sm(t,e){Object.defineProperty(t,`on${e}`,mZ(e))}function lx(t){function e(){Pr.call(this)}e.prototype=Object.create(Pr.prototype,{constructor:{value:e,configurable:!0,writable:!0}});for(let n=0;n<t.length;++n)Sm(e.prototype,t[n]);return e}function Pr(){if(this instanceof Pr){fx.set(this,new Map);return}if(arguments.length===1&&Array.isArray(arguments[0]))return lx(arguments[0]);if(arguments.length>0){let t=new Array(arguments.length);for(let e=0;e<arguments.length;++e)t[e]=arguments[e];return lx(t)}throw new TypeError("Cannot call a class as a function")}Pr.prototype={addEventListener(t,e,n){if(e==null)return;if(typeof e!="function"&&!QE(e))throw new TypeError("'listener' should be a function or an object.");let r=Au(this),i=QE(n),o=(i?!!n.capture:!!n)?ox:ax,a={listener:e,listenerType:o,passive:i&&!!n.passive,once:i&&!!n.once,next:null},l=r.get(t);if(l===void 0){r.set(t,a);return}let c=null;for(;l!=null;){if(l.listener===e&&l.listenerType===o)return;c=l,l=l.next}c.next=a},removeEventListener(t,e,n){if(e==null)return;let r=Au(this),s=(QE(n)?!!n.capture:!!n)?ox:ax,o=null,a=r.get(t);for(;a!=null;){if(a.listener===e&&a.listenerType===s){o!==null?o.next=a.next:a.next!==null?r.set(t,a.next):r.delete(t);return}o=a,a=a.next}},dispatchEvent(t){if(t==null||typeof t.type!="string")throw new TypeError('"event.type" should be a string.');let e=Au(this),n=t.type,r=e.get(n);if(r==null)return!0;let i=TZ(this,t),s=null;for(;r!=null;){if(r.once?s!==null?s.next=r.next:r.next!==null?e.set(n,r.next):e.delete(n):s=r,sx(i,r.passive?r.listener:null),typeof r.listener=="function")try{r.listener.call(this,i)}catch(o){typeof console<"u"&&typeof console.error=="function"&&console.error(o)}else r.listenerType!==JE&&typeof r.listener.handleEvent=="function"&&r.listener.handleEvent(i);if(SZ(i))break;r=r.next}return sx(i,null),RZ(i,0),AZ(i,null),!i.defaultPrevented}};Object.defineProperty(Pr.prototype,"constructor",{value:Pr,configurable:!0,writable:!0});typeof window<"u"&&typeof window.EventTarget<"u"&&Object.setPrototypeOf(Pr.prototype,window.EventTarget.prototype);gu.defineEventAttribute=Sm;gu.EventTarget=Pr;gu.default=Pr;mu.exports=Pr;mu.exports.EventTarget=mu.exports.default=Pr;mu.exports.defineEventAttribute=Sm});var Lt=C((_u,Iu)=>{"use strict";Object.defineProperty(_u,"__esModule",{value:!0});var Rm=Ex(),ws=class extends Rm.EventTarget{constructor(){throw super(),new TypeError("AbortSignal cannot be constructed directly")}get aborted(){let e=ZE.get(this);if(typeof e!="boolean")throw new TypeError(`Expected 'this' to be an 'AbortSignal' object, but got ${this===null?"null":typeof this}`);return e}};Rm.defineEventAttribute(ws.prototype,"abort");function gZ(){let t=Object.create(ws.prototype);return Rm.EventTarget.call(t),ZE.set(t,!1),t}function IZ(t){ZE.get(t)===!1&&(ZE.set(t,!0),t.dispatchEvent({type:"abort"}))}var ZE=new WeakMap;Object.defineProperties(ws.prototype,{aborted:{enumerable:!0}});typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(ws.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortSignal"});var Ls=class{constructor(){px.set(this,gZ())}get signal(){return hx(this)}abort(){IZ(hx(this))}},px=new WeakMap;function hx(t){let e=px.get(t);if(e==null)throw new TypeError(`Expected 'this' to be an 'AbortController' object, but got ${t===null?"null":typeof t}`);return e}Object.defineProperties(Ls.prototype,{signal:{enumerable:!0},abort:{enumerable:!0}});typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Ls.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortController"});_u.AbortController=Ls;_u.AbortSignal=ws;_u.default=Ls;Iu.exports=Ls;Iu.exports.AbortController=Iu.exports.default=Ls;Iu.exports.AbortSignal=ws});var Hn=C((Pxe,mm)=>{"use strict";var _Z=require("buffer"),{format:NZ,inspect:OZ}=hm(),{codes:{ERR_INVALID_ARG_TYPE:Am}}=bn(),{kResistStopPropagation:CZ,AggregateError:yZ,SymbolDispose:bZ}=ut(),wZ=globalThis.AbortSignal||Lt().AbortSignal,LZ=globalThis.AbortController||Lt().AbortController,DZ=Object.getPrototypeOf(async function(){}).constructor,Tx=globalThis.Blob||_Z.Blob,PZ=typeof Tx<"u"?function(e){return e instanceof Tx}:function(e){return!1},Sx=(t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new Am(e,"AbortSignal",t)},xZ=(t,e)=>{if(typeof t!="function")throw new Am(e,"Function",t)};mm.exports={AggregateError:yZ,kEmptyObject:Object.freeze({}),once(t){let e=!1;return function(...n){e||(e=!0,t.apply(this,n))}},createDeferredPromise:function(){let t,e;return{promise:new Promise((r,i)=>{t=r,e=i}),resolve:t,reject:e}},promisify(t){return new Promise((e,n)=>{t((r,...i)=>r?n(r):e(...i))})},debuglog(){return function(){}},format:NZ,inspect:OZ,types:{isAsyncFunction(t){return t instanceof DZ},isArrayBufferView(t){return ArrayBuffer.isView(t)}},isBlob:PZ,deprecate(t,e){return t},addAbortListener:require("events").addAbortListener||function(e,n){if(e===void 0)throw new Am("signal","AbortSignal",e);Sx(e,"signal"),xZ(n,"listener");let r;return e.aborted?queueMicrotask(()=>n()):(e.addEventListener("abort",n,{__proto__:null,once:!0,[CZ]:!0}),r=()=>{e.removeEventListener("abort",n)}),{__proto__:null,[bZ](){var i;(i=r)===null||i===void 0||i()}}},AbortSignalAny:wZ.any||function(e){if(e.length===1)return e[0];let n=new LZ,r=()=>n.abort();return e.forEach(i=>{Sx(i,"signals"),i.addEventListener("abort",r,{once:!0})}),n.signal.addEventListener("abort",()=>{e.forEach(i=>i.removeEventListener("abort",r))},{once:!0}),n.signal}};mm.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")});var al=C((xxe,yx)=>{"use strict";var{ArrayIsArray:Im,ArrayPrototypeIncludes:gx,ArrayPrototypeJoin:Ix,ArrayPrototypeMap:vZ,NumberIsInteger:_m,NumberIsNaN:MZ,NumberMAX_SAFE_INTEGER:UZ,NumberMIN_SAFE_INTEGER:BZ,NumberParseInt:FZ,ObjectPrototypeHasOwnProperty:HZ,RegExpPrototypeExec:_x,String:GZ,StringPrototypeToUpperCase:WZ,StringPrototypeTrim:$Z}=ut(),{hideStackFrames:hr,codes:{ERR_SOCKET_BAD_PORT:kZ,ERR_INVALID_ARG_TYPE:wn,ERR_INVALID_ARG_VALUE:ol,ERR_OUT_OF_RANGE:mo,ERR_UNKNOWN_SIGNAL:Rx}}=bn(),{normalizeEncoding:YZ}=Hn(),{isAsyncFunction:VZ,isArrayBufferView:qZ}=Hn().types,Ax={};function XZ(t){return t===(t|0)}function zZ(t){return t===t>>>0}var jZ=/^[0-7]+$/,KZ="must be a 32-bit unsigned integer or an octal string";function JZ(t,e,n){if(typeof t>"u"&&(t=n),typeof t=="string"){if(_x(jZ,t)===null)throw new ol(e,t,KZ);t=FZ(t,8)}return Nx(t,e),t}var QZ=hr((t,e,n=BZ,r=UZ)=>{if(typeof t!="number")throw new wn(e,"number",t);if(!_m(t))throw new mo(e,"an integer",t);if(t<n||t>r)throw new mo(e,`>= ${n} && <= ${r}`,t)}),ZZ=hr((t,e,n=-2147483648,r=2147483647)=>{if(typeof t!="number")throw new wn(e,"number",t);if(!_m(t))throw new mo(e,"an integer",t);if(t<n||t>r)throw new mo(e,`>= ${n} && <= ${r}`,t)}),Nx=hr((t,e,n=!1)=>{if(typeof t!="number")throw new wn(e,"number",t);if(!_m(t))throw new mo(e,"an integer",t);let r=n?1:0,i=4294967295;if(t<r||t>i)throw new mo(e,`>= ${r} && <= ${i}`,t)});function Nm(t,e){if(typeof t!="string")throw new wn(e,"string",t)}function eee(t,e,n=void 0,r){if(typeof t!="number")throw new wn(e,"number",t);if(n!=null&&t<n||r!=null&&t>r||(n!=null||r!=null)&&MZ(t))throw new mo(e,`${n!=null?`>= ${n}`:""}${n!=null&&r!=null?" && ":""}${r!=null?`<= ${r}`:""}`,t)}var tee=hr((t,e,n)=>{if(!gx(n,t)){let i="must be one of: "+Ix(vZ(n,s=>typeof s=="string"?`'${s}'`:GZ(s)),", ");throw new ol(e,t,i)}});function Ox(t,e){if(typeof t!="boolean")throw new wn(e,"boolean",t)}function gm(t,e,n){return t==null||!HZ(t,e)?n:t[e]}var nee=hr((t,e,n=null)=>{let r=gm(n,"allowArray",!1),i=gm(n,"allowFunction",!1);if(!gm(n,"nullable",!1)&&t===null||!r&&Im(t)||typeof t!="object"&&(!i||typeof t!="function"))throw new wn(e,"Object",t)}),ree=hr((t,e)=>{if(t!=null&&typeof t!="object"&&typeof t!="function")throw new wn(e,"a dictionary",t)}),eh=hr((t,e,n=0)=>{if(!Im(t))throw new wn(e,"Array",t);if(t.length<n){let r=`must be longer than ${n}`;throw new ol(e,t,r)}});function iee(t,e){eh(t,e);for(let n=0;n<t.length;n++)Nm(t[n],`${e}[${n}]`)}function see(t,e){eh(t,e);for(let n=0;n<t.length;n++)Ox(t[n],`${e}[${n}]`)}function oee(t,e){eh(t,e);for(let n=0;n<t.length;n++){let r=t[n],i=`${e}[${n}]`;if(r==null)throw new wn(i,"AbortSignal",r);Cx(r,i)}}function aee(t,e="signal"){if(Nm(t,e),Ax[t]===void 0)throw Ax[WZ(t)]!==void 0?new Rx(t+" (signals must use all capital letters)"):new Rx(t)}var lee=hr((t,e="buffer")=>{if(!qZ(t))throw new wn(e,["Buffer","TypedArray","DataView"],t)});function cee(t,e){let n=YZ(e),r=t.length;if(n==="hex"&&r%2!==0)throw new ol("encoding",e,`is invalid for data of length ${r}`)}function uee(t,e="Port",n=!0){if(typeof t!="number"&&typeof t!="string"||typeof t=="string"&&$Z(t).length===0||+t!==+t>>>0||t>65535||t===0&&!n)throw new kZ(e,t,n);return t|0}var Cx=hr((t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new wn(e,"AbortSignal",t)}),dee=hr((t,e)=>{if(typeof t!="function")throw new wn(e,"Function",t)}),fee=hr((t,e)=>{if(typeof t!="function"||VZ(t))throw new wn(e,"Function",t)}),Eee=hr((t,e)=>{if(t!==void 0)throw new wn(e,"undefined",t)});function hee(t,e,n){if(!gx(n,t))throw new wn(e,`('${Ix(n,"|")}')`,t)}var pee=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function mx(t,e){if(typeof t>"u"||!_x(pee,t))throw new ol(e,t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function Tee(t){if(typeof t=="string")return mx(t,"hints"),t;if(Im(t)){let e=t.length,n="";if(e===0)return n;for(let r=0;r<e;r++){let i=t[r];mx(i,"hints"),n+=i,r!==e-1&&(n+=", ")}return n}throw new ol("hints",t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}yx.exports={isInt32:XZ,isUint32:zZ,parseFileMode:JZ,validateArray:eh,validateStringArray:iee,validateBooleanArray:see,validateAbortSignalArray:oee,validateBoolean:Ox,validateBuffer:lee,validateDictionary:ree,validateEncoding:cee,validateFunction:dee,validateInt32:ZZ,validateInteger:QZ,validateNumber:eee,validateObject:nee,validateOneOf:tee,validatePlainFunction:fee,validatePort:uee,validateSignalName:aee,validateString:Nm,validateUint32:Nx,validateUndefined:Eee,validateUnion:hee,validateAbortSignal:Cx,validateLinkHeaderValue:Tee}});var je=C((vxe,bx)=>{bx.exports=global.process});var ei=C((Mxe,kx)=>{"use strict";var{SymbolAsyncIterator:wx,SymbolIterator:Lx,SymbolFor:go}=ut(),Dx=go("nodejs.stream.destroyed"),Px=go("nodejs.stream.errored"),Om=go("nodejs.stream.readable"),Cm=go("nodejs.stream.writable"),xx=go("nodejs.stream.disturbed"),See=go("nodejs.webstream.isClosedPromise"),Ree=go("nodejs.webstream.controllerErrorFunction");function th(t,e=!1){var n;return!!(t&&typeof t.pipe=="function"&&typeof t.on=="function"&&(!e||typeof t.pause=="function"&&typeof t.resume=="function")&&(!t._writableState||((n=t._readableState)===null||n===void 0?void 0:n.readable)!==!1)&&(!t._writableState||t._readableState))}function nh(t){var e;return!!(t&&typeof t.write=="function"&&typeof t.on=="function"&&(!t._readableState||((e=t._writableState)===null||e===void 0?void 0:e.writable)!==!1))}function Aee(t){return!!(t&&typeof t.pipe=="function"&&t._readableState&&typeof t.on=="function"&&typeof t.write=="function")}function Zr(t){return t&&(t._readableState||t._writableState||typeof t.write=="function"&&typeof t.on=="function"||typeof t.pipe=="function"&&typeof t.on=="function")}function vx(t){return!!(t&&!Zr(t)&&typeof t.pipeThrough=="function"&&typeof t.getReader=="function"&&typeof t.cancel=="function")}function Mx(t){return!!(t&&!Zr(t)&&typeof t.getWriter=="function"&&typeof t.abort=="function")}function Ux(t){return!!(t&&!Zr(t)&&typeof t.readable=="object"&&typeof t.writable=="object")}function mee(t){return vx(t)||Mx(t)||Ux(t)}function gee(t,e){return t==null?!1:e===!0?typeof t[wx]=="function":e===!1?typeof t[Lx]=="function":typeof t[wx]=="function"||typeof t[Lx]=="function"}function rh(t){if(!Zr(t))return null;let e=t._writableState,n=t._readableState,r=e||n;return!!(t.destroyed||t[Dx]||r!=null&&r.destroyed)}function Bx(t){if(!nh(t))return null;if(t.writableEnded===!0)return!0;let e=t._writableState;return e!=null&&e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function Iee(t,e){if(!nh(t))return null;if(t.writableFinished===!0)return!0;let n=t._writableState;return n!=null&&n.errored?!1:typeof n?.finished!="boolean"?null:!!(n.finished||e===!1&&n.ended===!0&&n.length===0)}function _ee(t){if(!th(t))return null;if(t.readableEnded===!0)return!0;let e=t._readableState;return!e||e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function Fx(t,e){if(!th(t))return null;let n=t._readableState;return n!=null&&n.errored?!1:typeof n?.endEmitted!="boolean"?null:!!(n.endEmitted||e===!1&&n.ended===!0&&n.length===0)}function Hx(t){return t&&t[Om]!=null?t[Om]:typeof t?.readable!="boolean"?null:rh(t)?!1:th(t)&&t.readable&&!Fx(t)}function Gx(t){return t&&t[Cm]!=null?t[Cm]:typeof t?.writable!="boolean"?null:rh(t)?!1:nh(t)&&t.writable&&!Bx(t)}function Nee(t,e){return Zr(t)?rh(t)?!0:!(e?.readable!==!1&&Hx(t)||e?.writable!==!1&&Gx(t)):null}function Oee(t){var e,n;return Zr(t)?t.writableErrored?t.writableErrored:(e=(n=t._writableState)===null||n===void 0?void 0:n.errored)!==null&&e!==void 0?e:null:null}function Cee(t){var e,n;return Zr(t)?t.readableErrored?t.readableErrored:(e=(n=t._readableState)===null||n===void 0?void 0:n.errored)!==null&&e!==void 0?e:null:null}function yee(t){if(!Zr(t))return null;if(typeof t.closed=="boolean")return t.closed;let e=t._writableState,n=t._readableState;return typeof e?.closed=="boolean"||typeof n?.closed=="boolean"?e?.closed||n?.closed:typeof t._closed=="boolean"&&Wx(t)?t._closed:null}function Wx(t){return typeof t._closed=="boolean"&&typeof t._defaultKeepAlive=="boolean"&&typeof t._removedConnection=="boolean"&&typeof t._removedContLen=="boolean"}function $x(t){return typeof t._sent100=="boolean"&&Wx(t)}function bee(t){var e;return typeof t._consuming=="boolean"&&typeof t._dumped=="boolean"&&((e=t.req)===null||e===void 0?void 0:e.upgradeOrConnect)===void 0}function wee(t){if(!Zr(t))return null;let e=t._writableState,n=t._readableState,r=e||n;return!r&&$x(t)||!!(r&&r.autoDestroy&&r.emitClose&&r.closed===!1)}function Lee(t){var e;return!!(t&&((e=t[xx])!==null&&e!==void 0?e:t.readableDidRead||t.readableAborted))}function Dee(t){var e,n,r,i,s,o,a,l,c,u;return!!(t&&((e=(n=(r=(i=(s=(o=t[Px])!==null&&o!==void 0?o:t.readableErrored)!==null&&s!==void 0?s:t.writableErrored)!==null&&i!==void 0?i:(a=t._readableState)===null||a===void 0?void 0:a.errorEmitted)!==null&&r!==void 0?r:(l=t._writableState)===null||l===void 0?void 0:l.errorEmitted)!==null&&n!==void 0?n:(c=t._readableState)===null||c===void 0?void 0:c.errored)!==null&&e!==void 0?e:!((u=t._writableState)===null||u===void 0)&&u.errored))}kx.exports={isDestroyed:rh,kIsDestroyed:Dx,isDisturbed:Lee,kIsDisturbed:xx,isErrored:Dee,kIsErrored:Px,isReadable:Hx,kIsReadable:Om,kIsClosedPromise:See,kControllerErrorFunction:Ree,kIsWritable:Cm,isClosed:yee,isDuplexNodeStream:Aee,isFinished:Nee,isIterable:gee,isReadableNodeStream:th,isReadableStream:vx,isReadableEnded:_ee,isReadableFinished:Fx,isReadableErrored:Cee,isNodeStream:Zr,isWebStream:mee,isWritable:Gx,isWritableNodeStream:nh,isWritableStream:Mx,isWritableEnded:Bx,isWritableFinished:Iee,isWritableErrored:Oee,isServerRequest:bee,isServerResponse:$x,willEmitClose:wee,isTransformStream:Ux}});var Hi=C((Uxe,Dm)=>{"use strict";var Ds=je(),{AbortError:Qx,codes:Pee}=bn(),{ERR_INVALID_ARG_TYPE:xee,ERR_STREAM_PREMATURE_CLOSE:Yx}=Pee,{kEmptyObject:bm,once:wm}=Hn(),{validateAbortSignal:vee,validateFunction:Mee,validateObject:Uee,validateBoolean:Bee}=al(),{Promise:Fee,PromisePrototypeThen:Hee,SymbolDispose:Zx}=ut(),{isClosed:Gee,isReadable:Vx,isReadableNodeStream:ym,isReadableStream:Wee,isReadableFinished:qx,isReadableErrored:Xx,isWritable:zx,isWritableNodeStream:jx,isWritableStream:$ee,isWritableFinished:Kx,isWritableErrored:Jx,isNodeStream:kee,willEmitClose:Yee,kIsClosedPromise:Vee}=ei(),ll;function qee(t){return t.setHeader&&typeof t.abort=="function"}var Lm=()=>{};function ev(t,e,n){var r,i;if(arguments.length===2?(n=e,e=bm):e==null?e=bm:Uee(e,"options"),Mee(n,"callback"),vee(e.signal,"options.signal"),n=wm(n),Wee(t)||$ee(t))return Xee(t,e,n);if(!kee(t))throw new xee("stream",["ReadableStream","WritableStream","Stream"],t);let s=(r=e.readable)!==null&&r!==void 0?r:ym(t),o=(i=e.writable)!==null&&i!==void 0?i:jx(t),a=t._writableState,l=t._readableState,c=()=>{t.writable||E()},u=Yee(t)&&ym(t)===s&&jx(t)===o,d=Kx(t,!1),E=()=>{d=!0,t.destroyed&&(u=!1),!(u&&(!t.readable||s))&&(!s||f)&&n.call(t)},f=qx(t,!1),p=()=>{f=!0,t.destroyed&&(u=!1),!(u&&(!t.writable||o))&&(!o||d)&&n.call(t)},h=A=>{n.call(t,A)},T=Gee(t),S=()=>{T=!0;let A=Jx(t)||Xx(t);if(A&&typeof A!="boolean")return n.call(t,A);if(s&&!f&&ym(t,!0)&&!qx(t,!1))return n.call(t,new Yx);if(o&&!d&&!Kx(t,!1))return n.call(t,new Yx);n.call(t)},I=()=>{T=!0;let A=Jx(t)||Xx(t);if(A&&typeof A!="boolean")return n.call(t,A);n.call(t)},R=()=>{t.req.on("finish",E)};qee(t)?(t.on("complete",E),u||t.on("abort",S),t.req?R():t.on("request",R)):o&&!a&&(t.on("end",c),t.on("close",c)),!u&&typeof t.aborted=="boolean"&&t.on("aborted",S),t.on("end",p),t.on("finish",E),e.error!==!1&&t.on("error",h),t.on("close",S),T?Ds.nextTick(S):a!=null&&a.errorEmitted||l!=null&&l.errorEmitted?u||Ds.nextTick(I):(!s&&(!u||Vx(t))&&(d||zx(t)===!1)||!o&&(!u||zx(t))&&(f||Vx(t)===!1)||l&&t.req&&t.aborted)&&Ds.nextTick(I);let m=()=>{n=Lm,t.removeListener("aborted",S),t.removeListener("complete",E),t.removeListener("abort",S),t.removeListener("request",R),t.req&&t.req.removeListener("finish",E),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",E),t.removeListener("end",p),t.removeListener("error",h),t.removeListener("close",S)};if(e.signal&&!T){let A=()=>{let N=n;m(),N.call(t,new Qx(void 0,{cause:e.signal.reason}))};if(e.signal.aborted)Ds.nextTick(A);else{ll=ll||Hn().addAbortListener;let N=ll(e.signal,A),g=n;n=wm((...L)=>{N[Zx](),g.apply(t,L)})}}return m}function Xee(t,e,n){let r=!1,i=Lm;if(e.signal)if(i=()=>{r=!0,n.call(t,new Qx(void 0,{cause:e.signal.reason}))},e.signal.aborted)Ds.nextTick(i);else{ll=ll||Hn().addAbortListener;let o=ll(e.signal,i),a=n;n=wm((...l)=>{o[Zx](),a.apply(t,l)})}let s=(...o)=>{r||Ds.nextTick(()=>n.apply(t,o))};return Hee(t[Vee].promise,s,s),Lm}function zee(t,e){var n;let r=!1;return e===null&&(e=bm),(n=e)!==null&&n!==void 0&&n.cleanup&&(Bee(e.cleanup,"cleanup"),r=e.cleanup),new Fee((i,s)=>{let o=ev(t,e,a=>{r&&o(),a?s(a):i()})})}Dm.exports=ev;Dm.exports.finished=zee});var Io=C((Bxe,lv)=>{"use strict";var ti=je(),{aggregateTwoErrors:jee,codes:{ERR_MULTIPLE_CALLBACK:Kee},AbortError:Jee}=bn(),{Symbol:rv}=ut(),{kIsDestroyed:Qee,isDestroyed:Zee,isFinished:ete,isServerRequest:tte}=ei(),iv=rv("kDestroy"),Pm=rv("kConstruct");function sv(t,e,n){t&&(t.stack,e&&!e.errored&&(e.errored=t),n&&!n.errored&&(n.errored=t))}function nte(t,e){let n=this._readableState,r=this._writableState,i=r||n;return r!=null&&r.destroyed||n!=null&&n.destroyed?(typeof e=="function"&&e(),this):(sv(t,r,n),r&&(r.destroyed=!0),n&&(n.destroyed=!0),i.constructed?tv(this,t,e):this.once(iv,function(s){tv(this,jee(s,t),e)}),this)}function tv(t,e,n){let r=!1;function i(s){if(r)return;r=!0;let o=t._readableState,a=t._writableState;sv(s,a,o),a&&(a.closed=!0),o&&(o.closed=!0),typeof n=="function"&&n(s),s?ti.nextTick(rte,t,s):ti.nextTick(ov,t)}try{t._destroy(e||null,i)}catch(s){i(s)}}function rte(t,e){xm(t,e),ov(t)}function ov(t){let e=t._readableState,n=t._writableState;n&&(n.closeEmitted=!0),e&&(e.closeEmitted=!0),(n!=null&&n.emitClose||e!=null&&e.emitClose)&&t.emit("close")}function xm(t,e){let n=t._readableState,r=t._writableState;r!=null&&r.errorEmitted||n!=null&&n.errorEmitted||(r&&(r.errorEmitted=!0),n&&(n.errorEmitted=!0),t.emit("error",e))}function ite(){let t=this._readableState,e=this._writableState;t&&(t.constructed=!0,t.closed=!1,t.closeEmitted=!1,t.destroyed=!1,t.errored=null,t.errorEmitted=!1,t.reading=!1,t.ended=t.readable===!1,t.endEmitted=t.readable===!1),e&&(e.constructed=!0,e.destroyed=!1,e.closed=!1,e.closeEmitted=!1,e.errored=null,e.errorEmitted=!1,e.finalCalled=!1,e.prefinished=!1,e.ended=e.writable===!1,e.ending=e.writable===!1,e.finished=e.writable===!1)}function vm(t,e,n){let r=t._readableState,i=t._writableState;if(i!=null&&i.destroyed||r!=null&&r.destroyed)return this;r!=null&&r.autoDestroy||i!=null&&i.autoDestroy?t.destroy(e):e&&(e.stack,i&&!i.errored&&(i.errored=e),r&&!r.errored&&(r.errored=e),n?ti.nextTick(xm,t,e):xm(t,e))}function ste(t,e){if(typeof t._construct!="function")return;let n=t._readableState,r=t._writableState;n&&(n.constructed=!1),r&&(r.constructed=!1),t.once(Pm,e),!(t.listenerCount(Pm)>1)&&ti.nextTick(ote,t)}function ote(t){let e=!1;function n(r){if(e){vm(t,r??new Kee);return}e=!0;let i=t._readableState,s=t._writableState,o=s||i;i&&(i.constructed=!0),s&&(s.constructed=!0),o.destroyed?t.emit(iv,r):r?vm(t,r,!0):ti.nextTick(ate,t)}try{t._construct(r=>{ti.nextTick(n,r)})}catch(r){ti.nextTick(n,r)}}function ate(t){t.emit(Pm)}function nv(t){return t?.setHeader&&typeof t.abort=="function"}function av(t){t.emit("close")}function lte(t,e){t.emit("error",e),ti.nextTick(av,t)}function cte(t,e){!t||Zee(t)||(!e&&!ete(t)&&(e=new Jee),tte(t)?(t.socket=null,t.destroy(e)):nv(t)?t.abort():nv(t.req)?t.req.abort():typeof t.destroy=="function"?t.destroy(e):typeof t.close=="function"?t.close():e?ti.nextTick(lte,t,e):ti.nextTick(av,t),t.destroyed||(t[Qee]=!0))}lv.exports={construct:ste,destroyer:cte,destroy:nte,undestroy:ite,errorOrDestroy:vm}});var oh=C((Fxe,uv)=>{"use strict";var{ArrayIsArray:ute,ObjectSetPrototypeOf:cv}=ut(),{EventEmitter:ih}=require("events");function sh(t){ih.call(this,t)}cv(sh.prototype,ih.prototype);cv(sh,ih);sh.prototype.pipe=function(t,e){let n=this;function r(u){t.writable&&t.write(u)===!1&&n.pause&&n.pause()}n.on("data",r);function i(){n.readable&&n.resume&&n.resume()}t.on("drain",i),!t._isStdio&&(!e||e.end!==!1)&&(n.on("end",o),n.on("close",a));let s=!1;function o(){s||(s=!0,t.end())}function a(){s||(s=!0,typeof t.destroy=="function"&&t.destroy())}function l(u){c(),ih.listenerCount(this,"error")===0&&this.emit("error",u)}Mm(n,"error",l),Mm(t,"error",l);function c(){n.removeListener("data",r),t.removeListener("drain",i),n.removeListener("end",o),n.removeListener("close",a),n.removeListener("error",l),t.removeListener("error",l),n.removeListener("end",c),n.removeListener("close",c),t.removeListener("close",c)}return n.on("end",c),n.on("close",c),t.on("close",c),t.emit("pipe",n),t};function Mm(t,e,n){if(typeof t.prependListener=="function")return t.prependListener(e,n);!t._events||!t._events[e]?t.on(e,n):ute(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]}uv.exports={Stream:sh,prependListener:Mm}});var Nu=C((Hxe,ah)=>{"use strict";var{SymbolDispose:dte}=ut(),{AbortError:dv,codes:fte}=bn(),{isNodeStream:fv,isWebStream:Ete,kControllerErrorFunction:hte}=ei(),pte=Hi(),{ERR_INVALID_ARG_TYPE:Ev}=fte,Um,Tte=(t,e)=>{if(typeof t!="object"||!("aborted"in t))throw new Ev(e,"AbortSignal",t)};ah.exports.addAbortSignal=function(e,n){if(Tte(e,"signal"),!fv(n)&&!Ete(n))throw new Ev("stream",["ReadableStream","WritableStream","Stream"],n);return ah.exports.addAbortSignalNoValidate(e,n)};ah.exports.addAbortSignalNoValidate=function(t,e){if(typeof t!="object"||!("aborted"in t))return e;let n=fv(e)?()=>{e.destroy(new dv(void 0,{cause:t.reason}))}:()=>{e[hte](new dv(void 0,{cause:t.reason}))};if(t.aborted)n();else{Um=Um||Hn().addAbortListener;let r=Um(t,n);pte(e,r[dte])}return e}});var Tv=C((Wxe,pv)=>{"use strict";var{StringPrototypeSlice:hv,SymbolIterator:Ste,TypedArrayPrototypeSet:lh,Uint8Array:Rte}=ut(),{Buffer:Bm}=require("buffer"),{inspect:Ate}=Hn();pv.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){let n={data:e,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}unshift(e){let n={data:e,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}shift(){if(this.length===0)return;let e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return"";let n=this.head,r=""+n.data;for(;(n=n.next)!==null;)r+=e+n.data;return r}concat(e){if(this.length===0)return Bm.alloc(0);let n=Bm.allocUnsafe(e>>>0),r=this.head,i=0;for(;r;)lh(n,r.data,i),i+=r.data.length,r=r.next;return n}consume(e,n){let r=this.head.data;if(e<r.length){let i=r.slice(0,e);return this.head.data=r.slice(e),i}return e===r.length?this.shift():n?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[Ste](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let n="",r=this.head,i=0;do{let s=r.data;if(e>s.length)n+=s,e-=s.length;else{e===s.length?(n+=s,++i,r.next?this.head=r.next:this.head=this.tail=null):(n+=hv(s,0,e),this.head=r,r.data=hv(s,e));break}++i}while((r=r.next)!==null);return this.length-=i,n}_getBuffer(e){let n=Bm.allocUnsafe(e),r=e,i=this.head,s=0;do{let o=i.data;if(e>o.length)lh(n,o,r-e),e-=o.length;else{e===o.length?(lh(n,o,r-e),++s,i.next?this.head=i.next:this.head=this.tail=null):(lh(n,new Rte(o.buffer,o.byteOffset,e),r-e),this.head=i,i.data=o.slice(e));break}++s}while((i=i.next)!==null);return this.length-=s,n}[Symbol.for("nodejs.util.inspect.custom")](e,n){return Ate(this,{...n,depth:0,customInspect:!1})}}});var Ou=C(($xe,mv)=>{"use strict";var{MathFloor:mte,NumberIsInteger:gte}=ut(),{validateInteger:Ite}=al(),{ERR_INVALID_ARG_VALUE:_te}=bn().codes,Sv=16*1024,Rv=16;function Nte(t,e,n){return t.highWaterMark!=null?t.highWaterMark:e?t[n]:null}function Av(t){return t?Rv:Sv}function Ote(t,e){Ite(e,"value",0),t?Rv=e:Sv=e}function Cte(t,e,n,r){let i=Nte(e,r,n);if(i!=null){if(!gte(i)||i<0){let s=r?`options.${n}`:"options.highWaterMark";throw new _te(s,i)}return mte(i)}return Av(t.objectMode)}mv.exports={getHighWaterMark:Cte,getDefaultHighWaterMark:Av,setDefaultHighWaterMark:Ote}});var _v=C((Fm,Iv)=>{var ch=require("buffer"),ni=ch.Buffer;function gv(t,e){for(var n in t)e[n]=t[n]}ni.from&&ni.alloc&&ni.allocUnsafe&&ni.allocUnsafeSlow?Iv.exports=ch:(gv(ch,Fm),Fm.Buffer=_o);function _o(t,e,n){return ni(t,e,n)}_o.prototype=Object.create(ni.prototype);gv(ni,_o);_o.from=function(t,e,n){if(typeof t=="number")throw new TypeError("Argument must not be a number");return ni(t,e,n)};_o.alloc=function(t,e,n){if(typeof t!="number")throw new TypeError("Argument must be a number");var r=ni(t);return e!==void 0?typeof n=="string"?r.fill(e,n):r.fill(e):r.fill(0),r};_o.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return ni(t)};_o.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return ch.SlowBuffer(t)}});var yu=C(Ov=>{"use strict";var Gm=_v().Buffer,Nv=Gm.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function yte(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function bte(t){var e=yte(t);if(typeof e!="string"&&(Gm.isEncoding===Nv||!Nv(t)))throw new Error("Unknown encoding: "+t);return e||t}Ov.StringDecoder=Cu;function Cu(t){this.encoding=bte(t);var e;switch(this.encoding){case"utf16le":this.text=vte,this.end=Mte,e=4;break;case"utf8":this.fillLast=Dte,e=4;break;case"base64":this.text=Ute,this.end=Bte,e=3;break;default:this.write=Fte,this.end=Hte;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Gm.allocUnsafe(e)}Cu.prototype.write=function(t){if(t.length===0)return"";var e,n;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""};Cu.prototype.end=xte;Cu.prototype.text=Pte;Cu.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function Hm(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function wte(t,e,n){var r=e.length-1;if(r<n)return 0;var i=Hm(e[r]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--r<n||i===-2?0:(i=Hm(e[r]),i>=0?(i>0&&(t.lastNeed=i-2),i):--r<n||i===-2?0:(i=Hm(e[r]),i>=0?(i>0&&(i===2?i=0:t.lastNeed=i-3),i):0))}function Lte(t,e,n){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function Dte(t){var e=this.lastTotal-this.lastNeed,n=Lte(this,t,e);if(n!==void 0)return n;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function Pte(t,e){var n=wte(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var r=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)}function xte(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function vte(t,e){if((t.length-e)%2===0){var n=t.toString("utf16le",e);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function Mte(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function Ute(t,e){var n=(t.length-e)%3;return n===0?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,n===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function Bte(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function Fte(t){return t.toString(this.encoding)}function Hte(t){return t&&t.length?this.write(t):""}});var Wm=C((Yxe,wv)=>{"use strict";var Cv=je(),{PromisePrototypeThen:Gte,SymbolAsyncIterator:yv,SymbolIterator:bv}=ut(),{Buffer:Wte}=require("buffer"),{ERR_INVALID_ARG_TYPE:$te,ERR_STREAM_NULL_VALUES:kte}=bn().codes;function Yte(t,e,n){let r;if(typeof e=="string"||e instanceof Wte)return new t({objectMode:!0,...n,read(){this.push(e),this.push(null)}});let i;if(e&&e[yv])i=!0,r=e[yv]();else if(e&&e[bv])i=!1,r=e[bv]();else throw new $te("iterable",["Iterable"],e);let s=new t({objectMode:!0,highWaterMark:1,...n}),o=!1;s._read=function(){o||(o=!0,l())},s._destroy=function(c,u){Gte(a(c),()=>Cv.nextTick(u,c),d=>Cv.nextTick(u,d||c))};async function a(c){let u=c!=null,d=typeof r.throw=="function";if(u&&d){let{value:E,done:f}=await r.throw(c);if(await E,f)return}if(typeof r.return=="function"){let{value:E}=await r.return();await E}}async function l(){for(;;){try{let{value:c,done:u}=i?await r.next():r.next();if(u)s.push(null);else{let d=c&&typeof c.then=="function"?await c:c;if(d===null)throw o=!1,new kte;if(s.push(d))continue;o=!1}}catch(c){s.destroy(c)}break}}return s}wv.exports=Yte});var wu=C((Vxe,Xv)=>{"use strict";var xr=je(),{ArrayPrototypeIndexOf:Vte,NumberIsInteger:qte,NumberIsNaN:Xte,NumberParseInt:zte,ObjectDefineProperties:jm,ObjectKeys:jte,ObjectSetPrototypeOf:Pv,Promise:xv,SafeSet:Kte,SymbolAsyncDispose:Jte,SymbolAsyncIterator:Qte,Symbol:Zte}=ut();Xv.exports=me;me.ReadableState=Eh;var{EventEmitter:ene}=require("events"),{Stream:Ps,prependListener:tne}=oh(),{Buffer:$m}=require("buffer"),{addAbortSignal:nne}=Nu(),vv=Hi(),ve=Hn().debuglog("stream",t=>{ve=t}),rne=Tv(),dl=Io(),{getHighWaterMark:ine,getDefaultHighWaterMark:sne}=Ou(),{aggregateTwoErrors:Lv,codes:{ERR_INVALID_ARG_TYPE:one,ERR_METHOD_NOT_IMPLEMENTED:ane,ERR_OUT_OF_RANGE:lne,ERR_STREAM_PUSH_AFTER_EOF:cne,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:une},AbortError:dne}=bn(),{validateObject:fne}=al(),No=Zte("kPaused"),{StringDecoder:Mv}=yu(),Ene=Wm();Pv(me.prototype,Ps.prototype);Pv(me,Ps);var km=()=>{},{errorOrDestroy:cl}=dl,ul=1,hne=2,Uv=4,bu=8,Bv=16,uh=32,dh=64,Fv=128,pne=256,Tne=512,Sne=1024,Xm=2048,zm=4096,Rne=8192,Ane=16384,mne=32768,Hv=65536,gne=1<<17,Ine=1<<18;function Gt(t){return{enumerable:!1,get(){return(this.state&t)!==0},set(e){e?this.state|=t:this.state&=~t}}}jm(Eh.prototype,{objectMode:Gt(ul),ended:Gt(hne),endEmitted:Gt(Uv),reading:Gt(bu),constructed:Gt(Bv),sync:Gt(uh),needReadable:Gt(dh),emittedReadable:Gt(Fv),readableListening:Gt(pne),resumeScheduled:Gt(Tne),errorEmitted:Gt(Sne),emitClose:Gt(Xm),autoDestroy:Gt(zm),destroyed:Gt(Rne),closed:Gt(Ane),closeEmitted:Gt(mne),multiAwaitDrain:Gt(Hv),readingMore:Gt(gne),dataEmitted:Gt(Ine)});function Eh(t,e,n){typeof n!="boolean"&&(n=e instanceof ri()),this.state=Xm|zm|Bv|uh,t&&t.objectMode&&(this.state|=ul),n&&t&&t.readableObjectMode&&(this.state|=ul),this.highWaterMark=t?ine(this,t,"readableHighWaterMark",n):sne(!1),this.buffer=new rne,this.length=0,this.pipes=[],this.flowing=null,this[No]=null,t&&t.emitClose===!1&&(this.state&=~Xm),t&&t.autoDestroy===!1&&(this.state&=~zm),this.errored=null,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,t&&t.encoding&&(this.decoder=new Mv(t.encoding),this.encoding=t.encoding)}function me(t){if(!(this instanceof me))return new me(t);let e=this instanceof ri();this._readableState=new Eh(t,this,e),t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&!e&&nne(t.signal,this)),Ps.call(this,t),dl.construct(this,()=>{this._readableState.needReadable&&fh(this,this._readableState)})}me.prototype.destroy=dl.destroy;me.prototype._undestroy=dl.undestroy;me.prototype._destroy=function(t,e){e(t)};me.prototype[ene.captureRejectionSymbol]=function(t){this.destroy(t)};me.prototype[Jte]=function(){let t;return this.destroyed||(t=this.readableEnded?null:new dne,this.destroy(t)),new xv((e,n)=>vv(this,r=>r&&r!==t?n(r):e(null)))};me.prototype.push=function(t,e){return Gv(this,t,e,!1)};me.prototype.unshift=function(t,e){return Gv(this,t,e,!0)};function Gv(t,e,n,r){ve("readableAddChunk",e);let i=t._readableState,s;if((i.state&ul)===0&&(typeof e=="string"?(n=n||i.defaultEncoding,i.encoding!==n&&(r&&i.encoding?e=$m.from(e,n).toString(i.encoding):(e=$m.from(e,n),n=""))):e instanceof $m?n="":Ps._isUint8Array(e)?(e=Ps._uint8ArrayToBuffer(e),n=""):e!=null&&(s=new one("chunk",["string","Buffer","Uint8Array"],e))),s)cl(t,s);else if(e===null)i.state&=~bu,One(t,i);else if((i.state&ul)!==0||e&&e.length>0)if(r)if((i.state&Uv)!==0)cl(t,new une);else{if(i.destroyed||i.errored)return!1;Ym(t,i,e,!0)}else if(i.ended)cl(t,new cne);else{if(i.destroyed||i.errored)return!1;i.state&=~bu,i.decoder&&!n?(e=i.decoder.write(e),i.objectMode||e.length!==0?Ym(t,i,e,!1):fh(t,i)):Ym(t,i,e,!1)}else r||(i.state&=~bu,fh(t,i));return!i.ended&&(i.length<i.highWaterMark||i.length===0)}function Ym(t,e,n,r){e.flowing&&e.length===0&&!e.sync&&t.listenerCount("data")>0?((e.state&Hv)!==0?e.awaitDrainWriters.clear():e.awaitDrainWriters=null,e.dataEmitted=!0,t.emit("data",n)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),(e.state&dh)!==0&&hh(t)),fh(t,e)}me.prototype.isPaused=function(){let t=this._readableState;return t[No]===!0||t.flowing===!1};me.prototype.setEncoding=function(t){let e=new Mv(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;let n=this._readableState.buffer,r="";for(let i of n)r+=e.write(i);return n.clear(),r!==""&&n.push(r),this._readableState.length=r.length,this};var _ne=1073741824;function Nne(t){if(t>_ne)throw new lne("size","<= 1GiB",t);return t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++,t}function Dv(t,e){return t<=0||e.length===0&&e.ended?0:(e.state&ul)!==0?1:Xte(t)?e.flowing&&e.length?e.buffer.first().length:e.length:t<=e.length?t:e.ended?e.length:0}me.prototype.read=function(t){ve("read",t),t===void 0?t=NaN:qte(t)||(t=zte(t,10));let e=this._readableState,n=t;if(t>e.highWaterMark&&(e.highWaterMark=Nne(t)),t!==0&&(e.state&=~Fv),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return ve("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?Vm(this):hh(this),null;if(t=Dv(t,e),t===0&&e.ended)return e.length===0&&Vm(this),null;let r=(e.state&dh)!==0;if(ve("need readable",r),(e.length===0||e.length-t<e.highWaterMark)&&(r=!0,ve("length less than watermark",r)),e.ended||e.reading||e.destroyed||e.errored||!e.constructed)r=!1,ve("reading, ended or constructing",r);else if(r){ve("do read"),e.state|=bu|uh,e.length===0&&(e.state|=dh);try{this._read(e.highWaterMark)}catch(s){cl(this,s)}e.state&=~uh,e.reading||(t=Dv(n,e))}let i;return t>0?i=Vv(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.multiAwaitDrain?e.awaitDrainWriters.clear():e.awaitDrainWriters=null),e.length===0&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&Vm(this)),i!==null&&!e.errorEmitted&&!e.closeEmitted&&(e.dataEmitted=!0,this.emit("data",i)),i};function One(t,e){if(ve("onEofChunk"),!e.ended){if(e.decoder){let n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,e.sync?hh(t):(e.needReadable=!1,e.emittedReadable=!0,Wv(t))}}function hh(t){let e=t._readableState;ve("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(ve("emitReadable",e.flowing),e.emittedReadable=!0,xr.nextTick(Wv,t))}function Wv(t){let e=t._readableState;ve("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&!e.errored&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,kv(t)}function fh(t,e){!e.readingMore&&e.constructed&&(e.readingMore=!0,xr.nextTick(Cne,t,e))}function Cne(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){let n=e.length;if(ve("maybeReadMore read 0"),t.read(0),n===e.length)break}e.readingMore=!1}me.prototype._read=function(t){throw new ane("_read()")};me.prototype.pipe=function(t,e){let n=this,r=this._readableState;r.pipes.length===1&&(r.multiAwaitDrain||(r.multiAwaitDrain=!0,r.awaitDrainWriters=new Kte(r.awaitDrainWriters?[r.awaitDrainWriters]:[]))),r.pipes.push(t),ve("pipe count=%d opts=%j",r.pipes.length,e);let s=(!e||e.end!==!1)&&t!==xr.stdout&&t!==xr.stderr?a:T;r.endEmitted?xr.nextTick(s):n.once("end",s),t.on("unpipe",o);function o(S,I){ve("onunpipe"),S===n&&I&&I.hasUnpiped===!1&&(I.hasUnpiped=!0,u())}function a(){ve("onend"),t.end()}let l,c=!1;function u(){ve("cleanup"),t.removeListener("close",p),t.removeListener("finish",h),l&&t.removeListener("drain",l),t.removeListener("error",f),t.removeListener("unpipe",o),n.removeListener("end",a),n.removeListener("end",T),n.removeListener("data",E),c=!0,l&&r.awaitDrainWriters&&(!t._writableState||t._writableState.needDrain)&&l()}function d(){c||(r.pipes.length===1&&r.pipes[0]===t?(ve("false write response, pause",0),r.awaitDrainWriters=t,r.multiAwaitDrain=!1):r.pipes.length>1&&r.pipes.includes(t)&&(ve("false write response, pause",r.awaitDrainWriters.size),r.awaitDrainWriters.add(t)),n.pause()),l||(l=yne(n,t),t.on("drain",l))}n.on("data",E);function E(S){ve("ondata");let I=t.write(S);ve("dest.write",I),I===!1&&d()}function f(S){if(ve("onerror",S),T(),t.removeListener("error",f),t.listenerCount("error")===0){let I=t._writableState||t._readableState;I&&!I.errorEmitted?cl(t,S):t.emit("error",S)}}tne(t,"error",f);function p(){t.removeListener("finish",h),T()}t.once("close",p);function h(){ve("onfinish"),t.removeListener("close",p),T()}t.once("finish",h);function T(){ve("unpipe"),n.unpipe(t)}return t.emit("pipe",n),t.writableNeedDrain===!0?d():r.flowing||(ve("pipe resume"),n.resume()),t};function yne(t,e){return function(){let r=t._readableState;r.awaitDrainWriters===e?(ve("pipeOnDrain",1),r.awaitDrainWriters=null):r.multiAwaitDrain&&(ve("pipeOnDrain",r.awaitDrainWriters.size),r.awaitDrainWriters.delete(e)),(!r.awaitDrainWriters||r.awaitDrainWriters.size===0)&&t.listenerCount("data")&&t.resume()}}me.prototype.unpipe=function(t){let e=this._readableState,n={hasUnpiped:!1};if(e.pipes.length===0)return this;if(!t){let i=e.pipes;e.pipes=[],this.pause();for(let s=0;s<i.length;s++)i[s].emit("unpipe",this,{hasUnpiped:!1});return this}let r=Vte(e.pipes,t);return r===-1?this:(e.pipes.splice(r,1),e.pipes.length===0&&this.pause(),t.emit("unpipe",this,n),this)};me.prototype.on=function(t,e){let n=Ps.prototype.on.call(this,t,e),r=this._readableState;return t==="data"?(r.readableListening=this.listenerCount("readable")>0,r.flowing!==!1&&this.resume()):t==="readable"&&!r.endEmitted&&!r.readableListening&&(r.readableListening=r.needReadable=!0,r.flowing=!1,r.emittedReadable=!1,ve("on readable",r.length,r.reading),r.length?hh(this):r.reading||xr.nextTick(bne,this)),n};me.prototype.addListener=me.prototype.on;me.prototype.removeListener=function(t,e){let n=Ps.prototype.removeListener.call(this,t,e);return t==="readable"&&xr.nextTick($v,this),n};me.prototype.off=me.prototype.removeListener;me.prototype.removeAllListeners=function(t){let e=Ps.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&xr.nextTick($v,this),e};function $v(t){let e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&e[No]===!1?e.flowing=!0:t.listenerCount("data")>0?t.resume():e.readableListening||(e.flowing=null)}function bne(t){ve("readable nexttick read 0"),t.read(0)}me.prototype.resume=function(){let t=this._readableState;return t.flowing||(ve("resume"),t.flowing=!t.readableListening,wne(this,t)),t[No]=!1,this};function wne(t,e){e.resumeScheduled||(e.resumeScheduled=!0,xr.nextTick(Lne,t,e))}function Lne(t,e){ve("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),kv(t),e.flowing&&!e.reading&&t.read(0)}me.prototype.pause=function(){return ve("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(ve("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[No]=!0,this};function kv(t){let e=t._readableState;for(ve("flow",e.flowing);e.flowing&&t.read()!==null;);}me.prototype.wrap=function(t){let e=!1;t.on("data",r=>{!this.push(r)&&t.pause&&(e=!0,t.pause())}),t.on("end",()=>{this.push(null)}),t.on("error",r=>{cl(this,r)}),t.on("close",()=>{this.destroy()}),t.on("destroy",()=>{this.destroy()}),this._read=()=>{e&&t.resume&&(e=!1,t.resume())};let n=jte(t);for(let r=1;r<n.length;r++){let i=n[r];this[i]===void 0&&typeof t[i]=="function"&&(this[i]=t[i].bind(t))}return this};me.prototype[Qte]=function(){return Yv(this)};me.prototype.iterator=function(t){return t!==void 0&&fne(t,"options"),Yv(this,t)};function Yv(t,e){typeof t.read!="function"&&(t=me.wrap(t,{objectMode:!0}));let n=Dne(t,e);return n.stream=t,n}async function*Dne(t,e){let n=km;function r(o){this===t?(n(),n=km):n=o}t.on("readable",r);let i,s=vv(t,{writable:!1},o=>{i=o?Lv(i,o):null,n(),n=km});try{for(;;){let o=t.destroyed?null:t.read();if(o!==null)yield o;else{if(i)throw i;if(i===null)return;await new xv(r)}}}catch(o){throw i=Lv(i,o),i}finally{(i||e?.destroyOnReturn!==!1)&&(i===void 0||t._readableState.autoDestroy)?dl.destroyer(t,null):(t.off("readable",r),s())}}jm(me.prototype,{readable:{__proto__:null,get(){let t=this._readableState;return!!t&&t.readable!==!1&&!t.destroyed&&!t.errorEmitted&&!t.endEmitted},set(t){this._readableState&&(this._readableState.readable=!!t)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(t){this._readableState&&(this._readableState.destroyed=t)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}});jm(Eh.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[No]!==!1},set(t){this[No]=!!t}}});me._fromList=Vv;function Vv(t,e){if(e.length===0)return null;let n;return e.objectMode?n=e.buffer.shift():!t||t>=e.length?(e.decoder?n=e.buffer.join(""):e.buffer.length===1?n=e.buffer.first():n=e.buffer.concat(e.length),e.buffer.clear()):n=e.buffer.consume(t,e.decoder),n}function Vm(t){let e=t._readableState;ve("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,xr.nextTick(Pne,e,t))}function Pne(t,e){if(ve("endReadableNT",t.endEmitted,t.length),!t.errored&&!t.closeEmitted&&!t.endEmitted&&t.length===0){if(t.endEmitted=!0,e.emit("end"),e.writable&&e.allowHalfOpen===!1)xr.nextTick(xne,e);else if(t.autoDestroy){let n=e._writableState;(!n||n.autoDestroy&&(n.finished||n.writable===!1))&&e.destroy()}}}function xne(t){t.writable&&!t.writableEnded&&!t.destroyed&&t.end()}me.from=function(t,e){return Ene(me,t,e)};var qm;function qv(){return qm===void 0&&(qm={}),qm}me.fromWeb=function(t,e){return qv().newStreamReadableFromReadableStream(t,e)};me.toWeb=function(t,e){return qv().newReadableStreamFromStreamReadable(t,e)};me.wrap=function(t,e){var n,r;return new me({objectMode:(n=(r=t.readableObjectMode)!==null&&r!==void 0?r:t.objectMode)!==null&&n!==void 0?n:!0,...e,destroy(i,s){dl.destroyer(t,i),s(i)}}).wrap(t)}});var Ah=C((qxe,sM)=>{"use strict";var Oo=je(),{ArrayPrototypeSlice:Kv,Error:vne,FunctionPrototypeSymbolHasInstance:Jv,ObjectDefineProperty:Qv,ObjectDefineProperties:Mne,ObjectSetPrototypeOf:Zv,StringPrototypeToLowerCase:Une,Symbol:Bne,SymbolHasInstance:Fne}=ut();sM.exports=Tt;Tt.WritableState=Pu;var{EventEmitter:Hne}=require("events"),Lu=oh().Stream,{Buffer:ph}=require("buffer"),Rh=Io(),{addAbortSignal:Gne}=Nu(),{getHighWaterMark:Wne,getDefaultHighWaterMark:$ne}=Ou(),{ERR_INVALID_ARG_TYPE:kne,ERR_METHOD_NOT_IMPLEMENTED:Yne,ERR_MULTIPLE_CALLBACK:eM,ERR_STREAM_CANNOT_PIPE:Vne,ERR_STREAM_DESTROYED:Du,ERR_STREAM_ALREADY_FINISHED:qne,ERR_STREAM_NULL_VALUES:Xne,ERR_STREAM_WRITE_AFTER_END:zne,ERR_UNKNOWN_ENCODING:tM}=bn().codes,{errorOrDestroy:fl}=Rh;Zv(Tt.prototype,Lu.prototype);Zv(Tt,Lu);function Qm(){}var El=Bne("kOnFinished");function Pu(t,e,n){typeof n!="boolean"&&(n=e instanceof ri()),this.objectMode=!!(t&&t.objectMode),n&&(this.objectMode=this.objectMode||!!(t&&t.writableObjectMode)),this.highWaterMark=t?Wne(this,t,"writableHighWaterMark",n):$ne(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let r=!!(t&&t.decodeStrings===!1);this.decodeStrings=!r,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=Kne.bind(void 0,e),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,Sh(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!t||t.emitClose!==!1,this.autoDestroy=!t||t.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[El]=[]}function Sh(t){t.buffered=[],t.bufferedIndex=0,t.allBuffers=!0,t.allNoop=!0}Pu.prototype.getBuffer=function(){return Kv(this.buffered,this.bufferedIndex)};Qv(Pu.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function Tt(t){let e=this instanceof ri();if(!e&&!Jv(Tt,this))return new Tt(t);this._writableState=new Pu(t,this,e),t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&Gne(t.signal,this)),Lu.call(this,t),Rh.construct(this,()=>{let n=this._writableState;n.writing||eg(this,n),tg(this,n)})}Qv(Tt,Fne,{__proto__:null,value:function(t){return Jv(this,t)?!0:this!==Tt?!1:t&&t._writableState instanceof Pu}});Tt.prototype.pipe=function(){fl(this,new Vne)};function nM(t,e,n,r){let i=t._writableState;if(typeof n=="function")r=n,n=i.defaultEncoding;else{if(!n)n=i.defaultEncoding;else if(n!=="buffer"&&!ph.isEncoding(n))throw new tM(n);typeof r!="function"&&(r=Qm)}if(e===null)throw new Xne;if(!i.objectMode)if(typeof e=="string")i.decodeStrings!==!1&&(e=ph.from(e,n),n="buffer");else if(e instanceof ph)n="buffer";else if(Lu._isUint8Array(e))e=Lu._uint8ArrayToBuffer(e),n="buffer";else throw new kne("chunk",["string","Buffer","Uint8Array"],e);let s;return i.ending?s=new zne:i.destroyed&&(s=new Du("write")),s?(Oo.nextTick(r,s),fl(t,s,!0),s):(i.pendingcb++,jne(t,i,e,n,r))}Tt.prototype.write=function(t,e,n){return nM(this,t,e,n)===!0};Tt.prototype.cork=function(){this._writableState.corked++};Tt.prototype.uncork=function(){let t=this._writableState;t.corked&&(t.corked--,t.writing||eg(this,t))};Tt.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=Une(e)),!ph.isEncoding(e))throw new tM(e);return this._writableState.defaultEncoding=e,this};function jne(t,e,n,r,i){let s=e.objectMode?1:n.length;e.length+=s;let o=e.length<e.highWaterMark;return o||(e.needDrain=!0),e.writing||e.corked||e.errored||!e.constructed?(e.buffered.push({chunk:n,encoding:r,callback:i}),e.allBuffers&&r!=="buffer"&&(e.allBuffers=!1),e.allNoop&&i!==Qm&&(e.allNoop=!1)):(e.writelen=s,e.writecb=i,e.writing=!0,e.sync=!0,t._write(n,r,e.onwrite),e.sync=!1),o&&!e.errored&&!e.destroyed}function zv(t,e,n,r,i,s,o){e.writelen=r,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new Du("write")):n?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function jv(t,e,n,r){--e.pendingcb,r(n),Zm(e),fl(t,n)}function Kne(t,e){let n=t._writableState,r=n.sync,i=n.writecb;if(typeof i!="function"){fl(t,new eM);return}n.writing=!1,n.writecb=null,n.length-=n.writelen,n.writelen=0,e?(e.stack,n.errored||(n.errored=e),t._readableState&&!t._readableState.errored&&(t._readableState.errored=e),r?Oo.nextTick(jv,t,n,e,i):jv(t,n,e,i)):(n.buffered.length>n.bufferedIndex&&eg(t,n),r?n.afterWriteTickInfo!==null&&n.afterWriteTickInfo.cb===i?n.afterWriteTickInfo.count++:(n.afterWriteTickInfo={count:1,cb:i,stream:t,state:n},Oo.nextTick(Jne,n.afterWriteTickInfo)):rM(t,n,1,i))}function Jne({stream:t,state:e,count:n,cb:r}){return e.afterWriteTickInfo=null,rM(t,e,n,r)}function rM(t,e,n,r){for(!e.ending&&!t.destroyed&&e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"));n-- >0;)e.pendingcb--,r();e.destroyed&&Zm(e),tg(t,e)}function Zm(t){if(t.writing)return;for(let i=t.bufferedIndex;i<t.buffered.length;++i){var e;let{chunk:s,callback:o}=t.buffered[i],a=t.objectMode?1:s.length;t.length-=a,o((e=t.errored)!==null&&e!==void 0?e:new Du("write"))}let n=t[El].splice(0);for(let i=0;i<n.length;i++){var r;n[i]((r=t.errored)!==null&&r!==void 0?r:new Du("end"))}Sh(t)}function eg(t,e){if(e.corked||e.bufferProcessing||e.destroyed||!e.constructed)return;let{buffered:n,bufferedIndex:r,objectMode:i}=e,s=n.length-r;if(!s)return;let o=r;if(e.bufferProcessing=!0,s>1&&t._writev){e.pendingcb-=s-1;let a=e.allNoop?Qm:c=>{for(let u=o;u<n.length;++u)n[u].callback(c)},l=e.allNoop&&o===0?n:Kv(n,o);l.allBuffers=e.allBuffers,zv(t,e,!0,e.length,l,"",a),Sh(e)}else{do{let{chunk:a,encoding:l,callback:c}=n[o];n[o++]=null;let u=i?1:a.length;zv(t,e,!1,u,a,l,c)}while(o<n.length&&!e.writing);o===n.length?Sh(e):o>256?(n.splice(0,o),e.bufferedIndex=0):e.bufferedIndex=o}e.bufferProcessing=!1}Tt.prototype._write=function(t,e,n){if(this._writev)this._writev([{chunk:t,encoding:e}],n);else throw new Yne("_write()")};Tt.prototype._writev=null;Tt.prototype.end=function(t,e,n){let r=this._writableState;typeof t=="function"?(n=t,t=null,e=null):typeof e=="function"&&(n=e,e=null);let i;if(t!=null){let s=nM(this,t,e);s instanceof vne&&(i=s)}return r.corked&&(r.corked=1,this.uncork()),i||(!r.errored&&!r.ending?(r.ending=!0,tg(this,r,!0),r.ended=!0):r.finished?i=new qne("end"):r.destroyed&&(i=new Du("end"))),typeof n=="function"&&(i||r.finished?Oo.nextTick(n,i):r[El].push(n)),this};function Th(t){return t.ending&&!t.destroyed&&t.constructed&&t.length===0&&!t.errored&&t.buffered.length===0&&!t.finished&&!t.writing&&!t.errorEmitted&&!t.closeEmitted}function Qne(t,e){let n=!1;function r(i){if(n){fl(t,i??eM());return}if(n=!0,e.pendingcb--,i){let s=e[El].splice(0);for(let o=0;o<s.length;o++)s[o](i);fl(t,i,e.sync)}else Th(e)&&(e.prefinished=!0,t.emit("prefinish"),e.pendingcb++,Oo.nextTick(Jm,t,e))}e.sync=!0,e.pendingcb++;try{t._final(r)}catch(i){r(i)}e.sync=!1}function Zne(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.finalCalled=!0,Qne(t,e)):(e.prefinished=!0,t.emit("prefinish")))}function tg(t,e,n){Th(e)&&(Zne(t,e),e.pendingcb===0&&(n?(e.pendingcb++,Oo.nextTick((r,i)=>{Th(i)?Jm(r,i):i.pendingcb--},t,e)):Th(e)&&(e.pendingcb++,Jm(t,e))))}function Jm(t,e){e.pendingcb--,e.finished=!0;let n=e[El].splice(0);for(let r=0;r<n.length;r++)n[r]();if(t.emit("finish"),e.autoDestroy){let r=t._readableState;(!r||r.autoDestroy&&(r.endEmitted||r.readable===!1))&&t.destroy()}}Mne(Tt.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(t){this._writableState&&(this._writableState.destroyed=t)}},writable:{__proto__:null,get(){let t=this._writableState;return!!t&&t.writable!==!1&&!t.destroyed&&!t.errored&&!t.ending&&!t.ended},set(t){this._writableState&&(this._writableState.writable=!!t)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let t=this._writableState;return t?!t.destroyed&&!t.ending&&t.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var ere=Rh.destroy;Tt.prototype.destroy=function(t,e){let n=this._writableState;return!n.destroyed&&(n.bufferedIndex<n.buffered.length||n[El].length)&&Oo.nextTick(Zm,n),ere.call(this,t,e),this};Tt.prototype._undestroy=Rh.undestroy;Tt.prototype._destroy=function(t,e){e(t)};Tt.prototype[Hne.captureRejectionSymbol]=function(t){this.destroy(t)};var Km;function iM(){return Km===void 0&&(Km={}),Km}Tt.fromWeb=function(t,e){return iM().newStreamWritableFromWritableStream(t,e)};Tt.toWeb=function(t){return iM().newWritableStreamFromStreamWritable(t)}});var mM=C((Xxe,AM)=>{var ng=je(),tre=require("buffer"),{isReadable:nre,isWritable:rre,isIterable:oM,isNodeStream:ire,isReadableNodeStream:aM,isWritableNodeStream:lM,isDuplexNodeStream:sre,isReadableStream:cM,isWritableStream:uM}=ei(),dM=Hi(),{AbortError:SM,codes:{ERR_INVALID_ARG_TYPE:ore,ERR_INVALID_RETURN_VALUE:fM}}=bn(),{destroyer:pl}=Io(),are=ri(),RM=wu(),lre=Ah(),{createDeferredPromise:EM}=Hn(),hM=Wm(),pM=globalThis.Blob||tre.Blob,cre=typeof pM<"u"?function(e){return e instanceof pM}:function(e){return!1},ure=globalThis.AbortController||Lt().AbortController,{FunctionPrototypeCall:TM}=ut(),xs=class extends are{constructor(e){super(e),e?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),e?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};AM.exports=function t(e,n){if(sre(e))return e;if(aM(e))return hl({readable:e});if(lM(e))return hl({writable:e});if(ire(e))return hl({writable:!1,readable:!1});if(cM(e))return hl({readable:RM.fromWeb(e)});if(uM(e))return hl({writable:lre.fromWeb(e)});if(typeof e=="function"){let{value:i,write:s,final:o,destroy:a}=dre(e);if(oM(i))return hM(xs,i,{objectMode:!0,write:s,final:o,destroy:a});let l=i?.then;if(typeof l=="function"){let c,u=TM(l,i,d=>{if(d!=null)throw new fM("nully","body",d)},d=>{pl(c,d)});return c=new xs({objectMode:!0,readable:!1,write:s,final(d){o(async()=>{try{await u,ng.nextTick(d,null)}catch(E){ng.nextTick(d,E)}})},destroy:a})}throw new fM("Iterable, AsyncIterable or AsyncFunction",n,i)}if(cre(e))return t(e.arrayBuffer());if(oM(e))return hM(xs,e,{objectMode:!0,writable:!1});if(cM(e?.readable)&&uM(e?.writable))return xs.fromWeb(e);if(typeof e?.writable=="object"||typeof e?.readable=="object"){let i=e!=null&&e.readable?aM(e?.readable)?e?.readable:t(e.readable):void 0,s=e!=null&&e.writable?lM(e?.writable)?e?.writable:t(e.writable):void 0;return hl({readable:i,writable:s})}let r=e?.then;if(typeof r=="function"){let i;return TM(r,e,s=>{s!=null&&i.push(s),i.push(null)},s=>{pl(i,s)}),i=new xs({objectMode:!0,writable:!1,read(){}})}throw new ore(n,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],e)};function dre(t){let{promise:e,resolve:n}=EM(),r=new ure,i=r.signal;return{value:t((async function*(){for(;;){let o=e;e=null;let{chunk:a,done:l,cb:c}=await o;if(ng.nextTick(c),l)return;if(i.aborted)throw new SM(void 0,{cause:i.reason});({promise:e,resolve:n}=EM()),yield a}})(),{signal:i}),write(o,a,l){let c=n;n=null,c({chunk:o,done:!1,cb:l})},final(o){let a=n;n=null,a({done:!0,cb:o})},destroy(o,a){r.abort(),a(o)}}}function hl(t){let e=t.readable&&typeof t.readable.read!="function"?RM.wrap(t.readable):t.readable,n=t.writable,r=!!nre(e),i=!!rre(n),s,o,a,l,c;function u(d){let E=l;l=null,E?E(d):d&&c.destroy(d)}return c=new xs({readableObjectMode:!!(e!=null&&e.readableObjectMode),writableObjectMode:!!(n!=null&&n.writableObjectMode),readable:r,writable:i}),i&&(dM(n,d=>{i=!1,d&&pl(e,d),u(d)}),c._write=function(d,E,f){n.write(d,E)?f():s=f},c._final=function(d){n.end(),o=d},n.on("drain",function(){if(s){let d=s;s=null,d()}}),n.on("finish",function(){if(o){let d=o;o=null,d()}})),r&&(dM(e,d=>{r=!1,d&&pl(e,d),u(d)}),e.on("readable",function(){if(a){let d=a;a=null,d()}}),e.on("end",function(){c.push(null)}),c._read=function(){for(;;){let d=e.read();if(d===null){a=c._read;return}if(!c.push(d))return}}),c._destroy=function(d,E){!d&&l!==null&&(d=new SM),a=null,s=null,o=null,l===null?E(d):(l=E,pl(n,d),pl(e,d))},c}});var ri=C((zxe,_M)=>{"use strict";var{ObjectDefineProperties:fre,ObjectGetOwnPropertyDescriptor:Gi,ObjectKeys:Ere,ObjectSetPrototypeOf:gM}=ut();_M.exports=vr;var sg=wu(),pr=Ah();gM(vr.prototype,sg.prototype);gM(vr,sg);{let t=Ere(pr.prototype);for(let e=0;e<t.length;e++){let n=t[e];vr.prototype[n]||(vr.prototype[n]=pr.prototype[n])}}function vr(t){if(!(this instanceof vr))return new vr(t);sg.call(this,t),pr.call(this,t),t?(this.allowHalfOpen=t.allowHalfOpen!==!1,t.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),t.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}fre(vr.prototype,{writable:{__proto__:null,...Gi(pr.prototype,"writable")},writableHighWaterMark:{__proto__:null,...Gi(pr.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...Gi(pr.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...Gi(pr.prototype,"writableBuffer")},writableLength:{__proto__:null,...Gi(pr.prototype,"writableLength")},writableFinished:{__proto__:null,...Gi(pr.prototype,"writableFinished")},writableCorked:{__proto__:null,...Gi(pr.prototype,"writableCorked")},writableEnded:{__proto__:null,...Gi(pr.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...Gi(pr.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(t){this._readableState&&this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}});var rg;function IM(){return rg===void 0&&(rg={}),rg}vr.fromWeb=function(t,e){return IM().newStreamDuplexFromReadableWritablePair(t,e)};vr.toWeb=function(t){return IM().newReadableWritablePairFromDuplex(t)};var ig;vr.from=function(t){return ig||(ig=mM()),ig(t,"body")}});var lg=C((jxe,OM)=>{"use strict";var{ObjectSetPrototypeOf:NM,Symbol:hre}=ut();OM.exports=Wi;var{ERR_METHOD_NOT_IMPLEMENTED:pre}=bn().codes,ag=ri(),{getHighWaterMark:Tre}=Ou();NM(Wi.prototype,ag.prototype);NM(Wi,ag);var xu=hre("kCallback");function Wi(t){if(!(this instanceof Wi))return new Wi(t);let e=t?Tre(this,t,"readableHighWaterMark",!0):null;e===0&&(t={...t,highWaterMark:null,readableHighWaterMark:e,writableHighWaterMark:t.writableHighWaterMark||0}),ag.call(this,t),this._readableState.sync=!1,this[xu]=null,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",Sre)}function og(t){typeof this._flush=="function"&&!this.destroyed?this._flush((e,n)=>{if(e){t?t(e):this.destroy(e);return}n!=null&&this.push(n),this.push(null),t&&t()}):(this.push(null),t&&t())}function Sre(){this._final!==og&&og.call(this)}Wi.prototype._final=og;Wi.prototype._transform=function(t,e,n){throw new pre("_transform()")};Wi.prototype._write=function(t,e,n){let r=this._readableState,i=this._writableState,s=r.length;this._transform(t,e,(o,a)=>{if(o){n(o);return}a!=null&&this.push(a),i.ended||s===r.length||r.length<r.highWaterMark?n():this[xu]=n})};Wi.prototype._read=function(){if(this[xu]){let t=this[xu];this[xu]=null,t()}}});var ug=C((Kxe,yM)=>{"use strict";var{ObjectSetPrototypeOf:CM}=ut();yM.exports=Tl;var cg=lg();CM(Tl.prototype,cg.prototype);CM(Tl,cg);function Tl(t){if(!(this instanceof Tl))return new Tl(t);cg.call(this,t)}Tl.prototype._transform=function(t,e,n){n(null,t)}});var _h=C((Jxe,PM)=>{var vu=je(),{ArrayIsArray:Rre,Promise:Are,SymbolAsyncIterator:mre,SymbolDispose:gre}=ut(),Ih=Hi(),{once:Ire}=Hn(),_re=Io(),bM=ri(),{aggregateTwoErrors:Nre,codes:{ERR_INVALID_ARG_TYPE:Ag,ERR_INVALID_RETURN_VALUE:dg,ERR_MISSING_ARGS:Ore,ERR_STREAM_DESTROYED:Cre,ERR_STREAM_PREMATURE_CLOSE:yre},AbortError:bre}=bn(),{validateFunction:wre,validateAbortSignal:Lre}=al(),{isIterable:Co,isReadable:fg,isReadableNodeStream:gh,isNodeStream:wM,isTransformStream:Sl,isWebStream:Dre,isReadableStream:Eg,isReadableFinished:Pre}=ei(),xre=globalThis.AbortController||Lt().AbortController,hg,pg,Tg;function LM(t,e,n){let r=!1;t.on("close",()=>{r=!0});let i=Ih(t,{readable:e,writable:n},s=>{r=!s});return{destroy:s=>{r||(r=!0,_re.destroyer(t,s||new Cre("pipe")))},cleanup:i}}function vre(t){return wre(t[t.length-1],"streams[stream.length - 1]"),t.pop()}function Sg(t){if(Co(t))return t;if(gh(t))return Mre(t);throw new Ag("val",["Readable","Iterable","AsyncIterable"],t)}async function*Mre(t){pg||(pg=wu()),yield*pg.prototype[mre].call(t)}async function mh(t,e,n,{end:r}){let i,s=null,o=c=>{if(c&&(i=c),s){let u=s;s=null,u()}},a=()=>new Are((c,u)=>{i?u(i):s=()=>{i?u(i):c()}});e.on("drain",o);let l=Ih(e,{readable:!1},o);try{e.writableNeedDrain&&await a();for await(let c of t)e.write(c)||await a();r&&(e.end(),await a()),n()}catch(c){n(i!==c?Nre(i,c):c)}finally{l(),e.off("drain",o)}}async function Rg(t,e,n,{end:r}){Sl(e)&&(e=e.writable);let i=e.getWriter();try{for await(let s of t)await i.ready,i.write(s).catch(()=>{});await i.ready,r&&await i.close(),n()}catch(s){try{await i.abort(s),n(s)}catch(o){n(o)}}}function Ure(...t){return DM(t,Ire(vre(t)))}function DM(t,e,n){if(t.length===1&&Rre(t[0])&&(t=t[0]),t.length<2)throw new Ore("streams");let r=new xre,i=r.signal,s=n?.signal,o=[];Lre(s,"options.signal");function a(){p(new bre)}Tg=Tg||Hn().addAbortListener;let l;s&&(l=Tg(s,a));let c,u,d=[],E=0;function f(R){p(R,--E===0)}function p(R,m){var A;if(R&&(!c||c.code==="ERR_STREAM_PREMATURE_CLOSE")&&(c=R),!(!c&&!m)){for(;d.length;)d.shift()(c);(A=l)===null||A===void 0||A[gre](),r.abort(),m&&(c||o.forEach(N=>N()),vu.nextTick(e,c,u))}}let h;for(let R=0;R<t.length;R++){let m=t[R],A=R<t.length-1,N=R>0,g=A||n?.end!==!1,L=R===t.length-1;if(wM(m)){let y=function(D){D&&D.name!=="AbortError"&&D.code!=="ERR_STREAM_PREMATURE_CLOSE"&&f(D)};var I=y;if(g){let{destroy:D,cleanup:x}=LM(m,A,N);d.push(D),fg(m)&&L&&o.push(x)}m.on("error",y),fg(m)&&L&&o.push(()=>{m.removeListener("error",y)})}if(R===0)if(typeof m=="function"){if(h=m({signal:i}),!Co(h))throw new dg("Iterable, AsyncIterable or Stream","source",h)}else Co(m)||gh(m)||Sl(m)?h=m:h=bM.from(m);else if(typeof m=="function"){if(Sl(h)){var T;h=Sg((T=h)===null||T===void 0?void 0:T.readable)}else h=Sg(h);if(h=m(h,{signal:i}),A){if(!Co(h,!0))throw new dg("AsyncIterable",`transform[${R-1}]`,h)}else{var S;hg||(hg=ug());let y=new hg({objectMode:!0}),D=(S=h)===null||S===void 0?void 0:S.then;if(typeof D=="function")E++,D.call(h,H=>{u=H,H!=null&&y.write(H),g&&y.end(),vu.nextTick(f)},H=>{y.destroy(H),vu.nextTick(f,H)});else if(Co(h,!0))E++,mh(h,y,f,{end:g});else if(Eg(h)||Sl(h)){let H=h.readable||h;E++,mh(H,y,f,{end:g})}else throw new dg("AsyncIterable or Promise","destination",h);h=y;let{destroy:x,cleanup:B}=LM(h,!1,!0);d.push(x),L&&o.push(B)}}else if(wM(m)){if(gh(h)){E+=2;let y=Bre(h,m,f,{end:g});fg(m)&&L&&o.push(y)}else if(Sl(h)||Eg(h)){let y=h.readable||h;E++,mh(y,m,f,{end:g})}else if(Co(h))E++,mh(h,m,f,{end:g});else throw new Ag("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],h);h=m}else if(Dre(m)){if(gh(h))E++,Rg(Sg(h),m,f,{end:g});else if(Eg(h)||Co(h))E++,Rg(h,m,f,{end:g});else if(Sl(h))E++,Rg(h.readable,m,f,{end:g});else throw new Ag("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],h);h=m}else h=bM.from(m)}return(i!=null&&i.aborted||s!=null&&s.aborted)&&vu.nextTick(a),h}function Bre(t,e,n,{end:r}){let i=!1;if(e.on("close",()=>{i||n(new yre)}),t.pipe(e,{end:!1}),r){let o=function(){i=!0,e.end()};var s=o;Pre(t)?vu.nextTick(o):t.once("end",o)}else n();return Ih(t,{readable:!0,writable:!1},o=>{let a=t._readableState;o&&o.code==="ERR_STREAM_PREMATURE_CLOSE"&&a&&a.ended&&!a.errored&&!a.errorEmitted?t.once("end",n).once("error",n):n(o)}),Ih(e,{readable:!1,writable:!0},n)}PM.exports={pipelineImpl:DM,pipeline:Ure}});var gg=C((Qxe,FM)=>{"use strict";var{pipeline:Fre}=_h(),Nh=ri(),{destroyer:Hre}=Io(),{isNodeStream:Oh,isReadable:xM,isWritable:vM,isWebStream:mg,isTransformStream:yo,isWritableStream:MM,isReadableStream:UM}=ei(),{AbortError:Gre,codes:{ERR_INVALID_ARG_VALUE:BM,ERR_MISSING_ARGS:Wre}}=bn(),$re=Hi();FM.exports=function(...e){if(e.length===0)throw new Wre("streams");if(e.length===1)return Nh.from(e[0]);let n=[...e];if(typeof e[0]=="function"&&(e[0]=Nh.from(e[0])),typeof e[e.length-1]=="function"){let f=e.length-1;e[f]=Nh.from(e[f])}for(let f=0;f<e.length;++f)if(!(!Oh(e[f])&&!mg(e[f]))){if(f<e.length-1&&!(xM(e[f])||UM(e[f])||yo(e[f])))throw new BM(`streams[${f}]`,n[f],"must be readable");if(f>0&&!(vM(e[f])||MM(e[f])||yo(e[f])))throw new BM(`streams[${f}]`,n[f],"must be writable")}let r,i,s,o,a;function l(f){let p=o;o=null,p?p(f):f?a.destroy(f):!E&&!d&&a.destroy()}let c=e[0],u=Fre(e,l),d=!!(vM(c)||MM(c)||yo(c)),E=!!(xM(u)||UM(u)||yo(u));if(a=new Nh({writableObjectMode:!!(c!=null&&c.writableObjectMode),readableObjectMode:!!(u!=null&&u.readableObjectMode),writable:d,readable:E}),d){if(Oh(c))a._write=function(p,h,T){c.write(p,h)?T():r=T},a._final=function(p){c.end(),i=p},c.on("drain",function(){if(r){let p=r;r=null,p()}});else if(mg(c)){let h=(yo(c)?c.writable:c).getWriter();a._write=async function(T,S,I){try{await h.ready,h.write(T).catch(()=>{}),I()}catch(R){I(R)}},a._final=async function(T){try{await h.ready,h.close().catch(()=>{}),i=T}catch(S){T(S)}}}let f=yo(u)?u.readable:u;$re(f,()=>{if(i){let p=i;i=null,p()}})}if(E){if(Oh(u))u.on("readable",function(){if(s){let f=s;s=null,f()}}),u.on("end",function(){a.push(null)}),a._read=function(){for(;;){let f=u.read();if(f===null){s=a._read;return}if(!a.push(f))return}};else if(mg(u)){let p=(yo(u)?u.readable:u).getReader();a._read=async function(){for(;;)try{let{value:h,done:T}=await p.read();if(!a.push(h))return;if(T){a.push(null);return}}catch{return}}}}return a._destroy=function(f,p){!f&&o!==null&&(f=new Gre),s=null,r=null,i=null,o===null?p(f):(o=p,Oh(u)&&Hre(u,f))},a}});var zM=C((Zxe,Ng)=>{"use strict";var kre=globalThis.AbortController||Lt().AbortController,{codes:{ERR_INVALID_ARG_VALUE:Yre,ERR_INVALID_ARG_TYPE:Mu,ERR_MISSING_ARGS:Vre,ERR_OUT_OF_RANGE:qre},AbortError:ii}=bn(),{validateAbortSignal:bo,validateInteger:HM,validateObject:wo}=al(),Xre=ut().Symbol("kWeak"),zre=ut().Symbol("kResistStopPropagation"),{finished:jre}=Hi(),Kre=gg(),{addAbortSignalNoValidate:Jre}=Nu(),{isWritable:Qre,isNodeStream:Zre}=ei(),{deprecate:eie}=Hn(),{ArrayPrototypePush:tie,Boolean:nie,MathFloor:GM,Number:rie,NumberIsNaN:iie,Promise:WM,PromiseReject:$M,PromiseResolve:sie,PromisePrototypeThen:kM,Symbol:VM}=ut(),Ch=VM("kEmpty"),YM=VM("kEof");function oie(t,e){if(e!=null&&wo(e,"options"),e?.signal!=null&&bo(e.signal,"options.signal"),Zre(t)&&!Qre(t))throw new Yre("stream",t,"must be writable");let n=Kre(this,t);return e!=null&&e.signal&&Jre(e.signal,n),n}function yh(t,e){if(typeof t!="function")throw new Mu("fn",["Function","AsyncFunction"],t);e!=null&&wo(e,"options"),e?.signal!=null&&bo(e.signal,"options.signal");let n=1;e?.concurrency!=null&&(n=GM(e.concurrency));let r=n-1;return e?.highWaterMark!=null&&(r=GM(e.highWaterMark)),HM(n,"options.concurrency",1),HM(r,"options.highWaterMark",0),r+=n,async function*(){let s=Hn().AbortSignalAny([e?.signal].filter(nie)),o=this,a=[],l={signal:s},c,u,d=!1,E=0;function f(){d=!0,p()}function p(){E-=1,h()}function h(){u&&!d&&E<n&&a.length<r&&(u(),u=null)}async function T(){try{for await(let S of o){if(d)return;if(s.aborted)throw new ii;try{if(S=t(S,l),S===Ch)continue;S=sie(S)}catch(I){S=$M(I)}E+=1,kM(S,p,f),a.push(S),c&&(c(),c=null),!d&&(a.length>=r||E>=n)&&await new WM(I=>{u=I})}a.push(YM)}catch(S){let I=$M(S);kM(I,p,f),a.push(I)}finally{d=!0,c&&(c(),c=null)}}T();try{for(;;){for(;a.length>0;){let S=await a[0];if(S===YM)return;if(s.aborted)throw new ii;S!==Ch&&(yield S),a.shift(),h()}await new WM(S=>{c=S})}}finally{d=!0,u&&(u(),u=null)}}.call(this)}function aie(t=void 0){return t!=null&&wo(t,"options"),t?.signal!=null&&bo(t.signal,"options.signal"),async function*(){let n=0;for await(let i of this){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new ii({cause:t.signal.reason});yield[n++,i]}}.call(this)}async function qM(t,e=void 0){for await(let n of _g.call(this,t,e))return!0;return!1}async function lie(t,e=void 0){if(typeof t!="function")throw new Mu("fn",["Function","AsyncFunction"],t);return!await qM.call(this,async(...n)=>!await t(...n),e)}async function cie(t,e){for await(let n of _g.call(this,t,e))return n}async function uie(t,e){if(typeof t!="function")throw new Mu("fn",["Function","AsyncFunction"],t);async function n(r,i){return await t(r,i),Ch}for await(let r of yh.call(this,n,e));}function _g(t,e){if(typeof t!="function")throw new Mu("fn",["Function","AsyncFunction"],t);async function n(r,i){return await t(r,i)?r:Ch}return yh.call(this,n,e)}var Ig=class extends Vre{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function die(t,e,n){var r;if(typeof t!="function")throw new Mu("reducer",["Function","AsyncFunction"],t);n!=null&&wo(n,"options"),n?.signal!=null&&bo(n.signal,"options.signal");let i=arguments.length>1;if(n!=null&&(r=n.signal)!==null&&r!==void 0&&r.aborted){let c=new ii(void 0,{cause:n.signal.reason});throw this.once("error",()=>{}),await jre(this.destroy(c)),c}let s=new kre,o=s.signal;if(n!=null&&n.signal){let c={once:!0,[Xre]:this,[zre]:!0};n.signal.addEventListener("abort",()=>s.abort(),c)}let a=!1;try{for await(let c of this){var l;if(a=!0,n!=null&&(l=n.signal)!==null&&l!==void 0&&l.aborted)throw new ii;i?e=await t(e,c,{signal:o}):(e=c,i=!0)}if(!a&&!i)throw new Ig}finally{s.abort()}return e}async function fie(t){t!=null&&wo(t,"options"),t?.signal!=null&&bo(t.signal,"options.signal");let e=[];for await(let r of this){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new ii(void 0,{cause:t.signal.reason});tie(e,r)}return e}function Eie(t,e){let n=yh.call(this,t,e);return async function*(){for await(let i of n)yield*i}.call(this)}function XM(t){if(t=rie(t),iie(t))return 0;if(t<0)throw new qre("number",">= 0",t);return t}function hie(t,e=void 0){return e!=null&&wo(e,"options"),e?.signal!=null&&bo(e.signal,"options.signal"),t=XM(t),async function*(){var r;if(e!=null&&(r=e.signal)!==null&&r!==void 0&&r.aborted)throw new ii;for await(let s of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new ii;t--<=0&&(yield s)}}.call(this)}function pie(t,e=void 0){return e!=null&&wo(e,"options"),e?.signal!=null&&bo(e.signal,"options.signal"),t=XM(t),async function*(){var r;if(e!=null&&(r=e.signal)!==null&&r!==void 0&&r.aborted)throw new ii;for await(let s of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new ii;if(t-- >0&&(yield s),t<=0)return}}.call(this)}Ng.exports.streamReturningOperators={asIndexedPairs:eie(aie,"readable.asIndexedPairs will be removed in a future version."),drop:hie,filter:_g,flatMap:Eie,map:yh,take:pie,compose:oie};Ng.exports.promiseReturningOperators={every:lie,forEach:uie,reduce:die,toArray:fie,some:qM,find:cie}});var Og=C((eve,jM)=>{"use strict";var{ArrayPrototypePop:Tie,Promise:Sie}=ut(),{isIterable:Rie,isNodeStream:Aie,isWebStream:mie}=ei(),{pipelineImpl:gie}=_h(),{finished:Iie}=Hi();Cg();function _ie(...t){return new Sie((e,n)=>{let r,i,s=t[t.length-1];if(s&&typeof s=="object"&&!Aie(s)&&!Rie(s)&&!mie(s)){let o=Tie(t);r=o.signal,i=o.end}gie(t,(o,a)=>{o?n(o):e(a)},{signal:r,end:i})})}jM.exports={finished:Iie,pipeline:_ie}});var Cg=C((tve,iU)=>{"use strict";var{Buffer:Nie}=require("buffer"),{ObjectDefineProperty:$i,ObjectKeys:QM,ReflectApply:ZM}=ut(),{promisify:{custom:eU}}=Hn(),{streamReturningOperators:KM,promiseReturningOperators:JM}=zM(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:tU}}=bn(),Oie=gg(),{setDefaultHighWaterMark:Cie,getDefaultHighWaterMark:yie}=Ou(),{pipeline:nU}=_h(),{destroyer:bie}=Io(),rU=Hi(),yg=Og(),Uu=ei(),st=iU.exports=oh().Stream;st.isDestroyed=Uu.isDestroyed;st.isDisturbed=Uu.isDisturbed;st.isErrored=Uu.isErrored;st.isReadable=Uu.isReadable;st.isWritable=Uu.isWritable;st.Readable=wu();for(let t of QM(KM)){let n=function(...r){if(new.target)throw tU();return st.Readable.from(ZM(e,this,r))},e=KM[t];$i(n,"name",{__proto__:null,value:e.name}),$i(n,"length",{__proto__:null,value:e.length}),$i(st.Readable.prototype,t,{__proto__:null,value:n,enumerable:!1,configurable:!0,writable:!0})}for(let t of QM(JM)){let n=function(...r){if(new.target)throw tU();return ZM(e,this,r)},e=JM[t];$i(n,"name",{__proto__:null,value:e.name}),$i(n,"length",{__proto__:null,value:e.length}),$i(st.Readable.prototype,t,{__proto__:null,value:n,enumerable:!1,configurable:!0,writable:!0})}st.Writable=Ah();st.Duplex=ri();st.Transform=lg();st.PassThrough=ug();st.pipeline=nU;var{addAbortSignal:wie}=Nu();st.addAbortSignal=wie;st.finished=rU;st.destroy=bie;st.compose=Oie;st.setDefaultHighWaterMark=Cie;st.getDefaultHighWaterMark=yie;$i(st,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return yg}});$i(nU,eU,{__proto__:null,enumerable:!0,get(){return yg.pipeline}});$i(rU,eU,{__proto__:null,enumerable:!0,get(){return yg.finished}});st.Stream=st;st._isUint8Array=function(e){return e instanceof Uint8Array};st._uint8ArrayToBuffer=function(e){return Nie.from(e.buffer,e.byteOffset,e.byteLength)}});var sU=C((nve,Le)=>{"use strict";var Wt=require("stream");if(Wt&&process.env.READABLE_STREAM==="disable"){let t=Wt.promises;Le.exports._uint8ArrayToBuffer=Wt._uint8ArrayToBuffer,Le.exports._isUint8Array=Wt._isUint8Array,Le.exports.isDisturbed=Wt.isDisturbed,Le.exports.isErrored=Wt.isErrored,Le.exports.isReadable=Wt.isReadable,Le.exports.Readable=Wt.Readable,Le.exports.Writable=Wt.Writable,Le.exports.Duplex=Wt.Duplex,Le.exports.Transform=Wt.Transform,Le.exports.PassThrough=Wt.PassThrough,Le.exports.addAbortSignal=Wt.addAbortSignal,Le.exports.finished=Wt.finished,Le.exports.destroy=Wt.destroy,Le.exports.pipeline=Wt.pipeline,Le.exports.compose=Wt.compose,Object.defineProperty(Wt,"promises",{configurable:!0,enumerable:!0,get(){return t}}),Le.exports.Stream=Wt.Stream}else{let t=Cg(),e=Og(),n=t.Readable.destroy;Le.exports=t.Readable,Le.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,Le.exports._isUint8Array=t._isUint8Array,Le.exports.isDisturbed=t.isDisturbed,Le.exports.isErrored=t.isErrored,Le.exports.isReadable=t.isReadable,Le.exports.Readable=t.Readable,Le.exports.Writable=t.Writable,Le.exports.Duplex=t.Duplex,Le.exports.Transform=t.Transform,Le.exports.PassThrough=t.PassThrough,Le.exports.addAbortSignal=t.addAbortSignal,Le.exports.finished=t.finished,Le.exports.destroy=t.destroy,Le.exports.destroy=n,Le.exports.pipeline=t.pipeline,Le.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return e}}),Le.exports.Stream=t.Stream}Le.exports.default=Le.exports});var aU=C((rve,oU)=>{function Lie(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}oU.exports=Lie});var dU=C((ive,uU)=>{var lU=VE(),Die=cm(),Pie=um(),cU=lU?lU.isConcatSpreadable:void 0;function xie(t){return Pie(t)||Die(t)||!!(cU&&t&&t[cU])}uU.exports=xie});var bh=C((sve,EU)=>{var vie=aU(),Mie=dU();function fU(t,e,n,r,i){var s=-1,o=t.length;for(n||(n=Mie),i||(i=[]);++s<o;){var a=t[s];e>0&&n(a)?e>1?fU(a,e-1,n,r,i):vie(i,a):r||(i[i.length]=a)}return i}EU.exports=fU});var pU=C((ove,hU)=>{var Uie=bh();function Bie(t){var e=t==null?0:t.length;return e?Uie(t,1):[]}hU.exports=Bie});var Bu=C((ave,TU)=>{var Fie=pu(),Hie=Fie(Object,"create");TU.exports=Hie});var AU=C((lve,RU)=>{var SU=Bu();function Gie(){this.__data__=SU?SU(null):{},this.size=0}RU.exports=Gie});var gU=C((cve,mU)=>{function Wie(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}mU.exports=Wie});var _U=C((uve,IU)=>{var $ie=Bu(),kie="__lodash_hash_undefined__",Yie=Object.prototype,Vie=Yie.hasOwnProperty;function qie(t){var e=this.__data__;if($ie){var n=e[t];return n===kie?void 0:n}return Vie.call(e,t)?e[t]:void 0}IU.exports=qie});var OU=C((dve,NU)=>{var Xie=Bu(),zie=Object.prototype,jie=zie.hasOwnProperty;function Kie(t){var e=this.__data__;return Xie?e[t]!==void 0:jie.call(e,t)}NU.exports=Kie});var yU=C((fve,CU)=>{var Jie=Bu(),Qie="__lodash_hash_undefined__";function Zie(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Jie&&e===void 0?Qie:e,this}CU.exports=Zie});var wU=C((Eve,bU)=>{var ese=AU(),tse=gU(),nse=_U(),rse=OU(),ise=yU();function Rl(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Rl.prototype.clear=ese;Rl.prototype.delete=tse;Rl.prototype.get=nse;Rl.prototype.has=rse;Rl.prototype.set=ise;bU.exports=Rl});var DU=C((hve,LU)=>{function sse(){this.__data__=[],this.size=0}LU.exports=sse});var Fu=C((pve,PU)=>{var ose=XE();function ase(t,e){for(var n=t.length;n--;)if(ose(t[n][0],e))return n;return-1}PU.exports=ase});var vU=C((Tve,xU)=>{var lse=Fu(),cse=Array.prototype,use=cse.splice;function dse(t){var e=this.__data__,n=lse(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():use.call(e,n,1),--this.size,!0}xU.exports=dse});var UU=C((Sve,MU)=>{var fse=Fu();function Ese(t){var e=this.__data__,n=fse(e,t);return n<0?void 0:e[n][1]}MU.exports=Ese});var FU=C((Rve,BU)=>{var hse=Fu();function pse(t){return hse(this.__data__,t)>-1}BU.exports=pse});var GU=C((Ave,HU)=>{var Tse=Fu();function Sse(t,e){var n=this.__data__,r=Tse(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}HU.exports=Sse});var $U=C((mve,WU)=>{var Rse=DU(),Ase=vU(),mse=UU(),gse=FU(),Ise=GU();function Al(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Al.prototype.clear=Rse;Al.prototype.delete=Ase;Al.prototype.get=mse;Al.prototype.has=gse;Al.prototype.set=Ise;WU.exports=Al});var YU=C((gve,kU)=>{var _se=pu(),Nse=tl(),Ose=_se(Nse,"Map");kU.exports=Ose});var XU=C((Ive,qU)=>{var VU=wU(),Cse=$U(),yse=YU();function bse(){this.size=0,this.__data__={hash:new VU,map:new(yse||Cse),string:new VU}}qU.exports=bse});var jU=C((_ve,zU)=>{function wse(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}zU.exports=wse});var Hu=C((Nve,KU)=>{var Lse=jU();function Dse(t,e){var n=t.__data__;return Lse(e)?n[typeof e=="string"?"string":"hash"]:n.map}KU.exports=Dse});var QU=C((Ove,JU)=>{var Pse=Hu();function xse(t){var e=Pse(this,t).delete(t);return this.size-=e?1:0,e}JU.exports=xse});var eB=C((Cve,ZU)=>{var vse=Hu();function Mse(t){return vse(this,t).get(t)}ZU.exports=Mse});var nB=C((yve,tB)=>{var Use=Hu();function Bse(t){return Use(this,t).has(t)}tB.exports=Bse});var iB=C((bve,rB)=>{var Fse=Hu();function Hse(t,e){var n=Fse(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}rB.exports=Hse});var oB=C((wve,sB)=>{var Gse=XU(),Wse=QU(),$se=eB(),kse=nB(),Yse=iB();function ml(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}ml.prototype.clear=Gse;ml.prototype.delete=Wse;ml.prototype.get=$se;ml.prototype.has=kse;ml.prototype.set=Yse;sB.exports=ml});var lB=C((Lve,aB)=>{var Vse="__lodash_hash_undefined__";function qse(t){return this.__data__.set(t,Vse),this}aB.exports=qse});var uB=C((Dve,cB)=>{function Xse(t){return this.__data__.has(t)}cB.exports=Xse});var bg=C((Pve,dB)=>{var zse=oB(),jse=lB(),Kse=uB();function wh(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new zse;++e<n;)this.add(t[e])}wh.prototype.add=wh.prototype.push=jse;wh.prototype.has=Kse;dB.exports=wh});var EB=C((xve,fB)=>{function Jse(t,e,n,r){for(var i=t.length,s=n+(r?1:-1);r?s--:++s<i;)if(e(t[s],s,t))return s;return-1}fB.exports=Jse});var pB=C((vve,hB)=>{function Qse(t){return t!==t}hB.exports=Qse});var SB=C((Mve,TB)=>{function Zse(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}TB.exports=Zse});var AB=C((Uve,RB)=>{var eoe=EB(),toe=pB(),noe=SB();function roe(t,e,n){return e===e?noe(t,e,n):eoe(t,toe,n)}RB.exports=roe});var wg=C((Bve,mB)=>{var ioe=AB();function soe(t,e){var n=t==null?0:t.length;return!!n&&ioe(t,e,0)>-1}mB.exports=soe});var Lg=C((Fve,gB)=>{function ooe(t,e,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}gB.exports=ooe});var _B=C((Hve,IB)=>{function aoe(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}IB.exports=aoe});var Dg=C((Gve,NB)=>{function loe(t,e){return t.has(e)}NB.exports=loe});var CB=C((Wve,OB)=>{var coe=bg(),uoe=wg(),doe=Lg(),foe=_B(),Eoe=dm(),hoe=Dg(),poe=200;function Toe(t,e,n,r){var i=-1,s=uoe,o=!0,a=t.length,l=[],c=e.length;if(!a)return l;n&&(e=foe(e,Eoe(n))),r?(s=doe,o=!1):e.length>=poe&&(s=hoe,o=!1,e=new coe(e));e:for(;++i<a;){var u=t[i],d=n==null?u:n(u);if(u=r||u!==0?u:0,o&&d===d){for(var E=c;E--;)if(e[E]===d)continue e;l.push(u)}else s(e,d,r)||l.push(u)}return l}OB.exports=Toe});var Pg=C(($ve,yB)=>{var Soe=zE(),Roe=nl();function Aoe(t){return Roe(t)&&Soe(t)}yB.exports=Aoe});var LB=C((kve,wB)=>{var moe=CB(),goe=bh(),Ioe=qE(),bB=Pg(),_oe=Ioe(function(t,e){return bB(t)?moe(t,goe(e,1,bB,!0)):[]});wB.exports=_oe});var PB=C((Yve,DB)=>{var Noe=pu(),Ooe=tl(),Coe=Noe(Ooe,"Set");DB.exports=Coe});var vB=C((Vve,xB)=>{function yoe(){}xB.exports=yoe});var xg=C((qve,MB)=>{function boe(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}MB.exports=boe});var BB=C((Xve,UB)=>{var vg=PB(),woe=vB(),Loe=xg(),Doe=1/0,Poe=vg&&1/Loe(new vg([,-0]))[1]==Doe?function(t){return new vg(t)}:woe;UB.exports=Poe});var HB=C((zve,FB)=>{var xoe=bg(),voe=wg(),Moe=Lg(),Uoe=Dg(),Boe=BB(),Foe=xg(),Hoe=200;function Goe(t,e,n){var r=-1,i=voe,s=t.length,o=!0,a=[],l=a;if(n)o=!1,i=Moe;else if(s>=Hoe){var c=e?null:Boe(t);if(c)return Foe(c);o=!1,i=Uoe,l=new xoe}else l=e?[]:a;e:for(;++r<s;){var u=t[r],d=e?e(u):u;if(u=n||u!==0?u:0,o&&d===d){for(var E=l.length;E--;)if(l[E]===d)continue e;e&&l.push(d),a.push(u)}else i(l,d,n)||(l!==a&&l.push(d),a.push(u))}return a}FB.exports=Goe});var WB=C((jve,GB)=>{var Woe=bh(),$oe=qE(),koe=HB(),Yoe=Pg(),Voe=$oe(function(t){return koe(Woe(t,1,Yoe,!0))});GB.exports=Voe});var kB=C((Kve,$B)=>{function qoe(t,e){return function(n){return t(e(n))}}$B.exports=qoe});var VB=C((Jve,YB)=>{var Xoe=kB(),zoe=Xoe(Object.getPrototypeOf,Object);YB.exports=zoe});var zB=C((Qve,XB)=>{var joe=Eu(),Koe=VB(),Joe=nl(),Qoe="[object Object]",Zoe=Function.prototype,eae=Object.prototype,qB=Zoe.toString,tae=eae.hasOwnProperty,nae=qB.call(Object);function rae(t){if(!Joe(t)||joe(t)!=Qoe)return!1;var e=Koe(t);if(e===null)return!0;var n=tae.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&qB.call(n)==nae}XB.exports=rae});var nF=C((Zve,tF)=>{var jB=RA();tF.exports=oae;var KB="\0SLASH"+Math.random()+"\0",JB="\0OPEN"+Math.random()+"\0",Ug="\0CLOSE"+Math.random()+"\0",QB="\0COMMA"+Math.random()+"\0",ZB="\0PERIOD"+Math.random()+"\0";function Mg(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function iae(t){return t.split("\\\\").join(KB).split("\\{").join(JB).split("\\}").join(Ug).split("\\,").join(QB).split("\\.").join(ZB)}function sae(t){return t.split(KB).join("\\").split(JB).join("{").split(Ug).join("}").split(QB).join(",").split(ZB).join(".")}function eF(t){if(!t)return[""];var e=[],n=jB("{","}",t);if(!n)return t.split(",");var r=n.pre,i=n.body,s=n.post,o=r.split(",");o[o.length-1]+="{"+i+"}";var a=eF(s);return s.length&&(o[o.length-1]+=a.shift(),o.push.apply(o,a)),e.push.apply(e,o),e}function oae(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),Gu(iae(t),!0).map(sae)):[]}function aae(t){return"{"+t+"}"}function lae(t){return/^-?0\d/.test(t)}function cae(t,e){return t<=e}function uae(t,e){return t>=e}function Gu(t,e){var n=[],r=jB("{","}",t);if(!r)return[t];var i=r.pre,s=r.post.length?Gu(r.post,!1):[""];if(/\$$/.test(r.pre))for(var o=0;o<s.length;o++){var a=i+"{"+r.body+"}"+s[o];n.push(a)}else{var l=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(r.body),c=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(r.body),u=l||c,d=r.body.indexOf(",")>=0;if(!u&&!d)return r.post.match(/,(?!,).*\}/)?(t=r.pre+"{"+r.body+Ug+r.post,Gu(t)):[t];var E;if(u)E=r.body.split(/\.\./);else if(E=eF(r.body),E.length===1&&(E=Gu(E[0],!1).map(aae),E.length===1))return s.map(function(D){return r.pre+E[0]+D});var f;if(u){var p=Mg(E[0]),h=Mg(E[1]),T=Math.max(E[0].length,E[1].length),S=E.length==3?Math.abs(Mg(E[2])):1,I=cae,R=h<p;R&&(S*=-1,I=uae);var m=E.some(lae);f=[];for(var A=p;I(A,h);A+=S){var N;if(c)N=String.fromCharCode(A),N==="\\"&&(N="");else if(N=String(A),m){var g=T-N.length;if(g>0){var L=new Array(g+1).join("0");A<0?N="-"+L+N.slice(1):N=L+N}}f.push(N)}}else{f=[];for(var y=0;y<E.length;y++)f.push.apply(f,Gu(E[y],!1))}for(var y=0;y<f.length;y++)for(var o=0;o<s.length;o++){var a=i+f[y]+s[o];(!e||u||a)&&n.push(a)}}return n}});var rF=C(Lh=>{"use strict";Object.defineProperty(Lh,"__esModule",{value:!0});Lh.assertValidPattern=void 0;var dae=1024*64,fae=t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>dae)throw new TypeError("pattern is too long")};Lh.assertValidPattern=fae});var sF=C(Dh=>{"use strict";Object.defineProperty(Dh,"__esModule",{value:!0});Dh.parseClass=void 0;var Eae={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},Wu=t=>t.replace(/[[\]\\-]/g,"\\$&"),hae=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),iF=t=>t.join(""),pae=(t,e)=>{let n=e;if(t.charAt(n)!=="[")throw new Error("not in a brace expression");let r=[],i=[],s=n+1,o=!1,a=!1,l=!1,c=!1,u=n,d="";e:for(;s<t.length;){let h=t.charAt(s);if((h==="!"||h==="^")&&s===n+1){c=!0,s++;continue}if(h==="]"&&o&&!l){u=s+1;break}if(o=!0,h==="\\"&&!l){l=!0,s++;continue}if(h==="["&&!l){for(let[T,[S,I,R]]of Object.entries(Eae))if(t.startsWith(T,s)){if(d)return["$.",!1,t.length-n,!0];s+=T.length,R?i.push(S):r.push(S),a=a||I;continue e}}if(l=!1,d){h>d?r.push(Wu(d)+"-"+Wu(h)):h===d&&r.push(Wu(h)),d="",s++;continue}if(t.startsWith("-]",s+1)){r.push(Wu(h+"-")),s+=2;continue}if(t.startsWith("-",s+1)){d=h,s+=2;continue}r.push(Wu(h)),s++}if(u<s)return["",!1,0,!1];if(!r.length&&!i.length)return["$.",!1,t.length-n,!0];if(i.length===0&&r.length===1&&/^\\?.$/.test(r[0])&&!c){let h=r[0].length===2?r[0].slice(-1):r[0];return[hae(h),!1,u-n,!1]}let E="["+(c?"^":"")+iF(r)+"]",f="["+(c?"":"^")+iF(i)+"]";return[r.length&&i.length?"("+E+"|"+f+")":r.length?E:f,a,u-n,!0]};Dh.parseClass=pae});var xh=C(Ph=>{"use strict";Object.defineProperty(Ph,"__esModule",{value:!0});Ph.unescape=void 0;var Tae=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1");Ph.unescape=Tae});var Hg=C(Uh=>{"use strict";Object.defineProperty(Uh,"__esModule",{value:!0});Uh.AST=void 0;var Sae=sF(),vh=xh(),Rae=new Set(["!","?","+","*","@"]),oF=t=>Rae.has(t),Aae="(?!(?:^|/)\\.\\.?(?:$|/))",Mh="(?!\\.)",mae=new Set(["[","."]),gae=new Set(["..","."]),Iae=new Set("().*{}+?[]^$\\!"),_ae=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Fg="[^/]",aF=Fg+"*?",lF=Fg+"+?",Bg=class t{type;#e;#t;#s=!1;#r=[];#o;#m;#c;#d=!1;#a;#l;#i=!1;constructor(e,n,r={}){this.type=e,e&&(this.#t=!0),this.#o=n,this.#e=this.#o?this.#o.#e:this,this.#a=this.#e===this?r:this.#e.#a,this.#c=this.#e===this?[]:this.#e.#c,e==="!"&&!this.#e.#d&&this.#c.push(this),this.#m=this.#o?this.#o.#r.length:0}get hasMagic(){if(this.#t!==void 0)return this.#t;for(let e of this.#r)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#t=!0;return this.#t}toString(){return this.#l!==void 0?this.#l:this.type?this.#l=this.type+"("+this.#r.map(e=>String(e)).join("|")+")":this.#l=this.#r.map(e=>String(e)).join("")}#T(){if(this!==this.#e)throw new Error("should only call on root");if(this.#d)return this;this.toString(),this.#d=!0;let e;for(;e=this.#c.pop();){if(e.type!=="!")continue;let n=e,r=n.#o;for(;r;){for(let i=n.#m+1;!r.type&&i<r.#r.length;i++)for(let s of e.#r){if(typeof s=="string")throw new Error("string part in extglob AST??");s.copyIn(r.#r[i])}n=r,r=n.#o}}return this}push(...e){for(let n of e)if(n!==""){if(typeof n!="string"&&!(n instanceof t&&n.#o===this))throw new Error("invalid part: "+n);this.#r.push(n)}}toJSON(){let e=this.type===null?this.#r.slice().map(n=>typeof n=="string"?n:n.toJSON()):[this.type,...this.#r.map(n=>n.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#e||this.#e.#d&&this.#o?.type==="!")&&e.push({}),e}isStart(){if(this.#e===this)return!0;if(!this.#o?.isStart())return!1;if(this.#m===0)return!0;let e=this.#o;for(let n=0;n<this.#m;n++){let r=e.#r[n];if(!(r instanceof t&&r.type==="!"))return!1}return!0}isEnd(){if(this.#e===this||this.#o?.type==="!")return!0;if(!this.#o?.isEnd())return!1;if(!this.type)return this.#o?.isEnd();let e=this.#o?this.#o.#r.length:0;return this.#m===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let n=new t(this.type,e);for(let r of this.#r)n.copyIn(r);return n}static#S(e,n,r,i){let s=!1,o=!1,a=-1,l=!1;if(n.type===null){let f=r,p="";for(;f<e.length;){let h=e.charAt(f++);if(s||h==="\\"){s=!s,p+=h;continue}if(o){f===a+1?(h==="^"||h==="!")&&(l=!0):h==="]"&&!(f===a+2&&l)&&(o=!1),p+=h;continue}else if(h==="["){o=!0,a=f,l=!1,p+=h;continue}if(!i.noext&&oF(h)&&e.charAt(f)==="("){n.push(p),p="";let T=new t(h,n);f=t.#S(e,T,f,i),n.push(T);continue}p+=h}return n.push(p),f}let c=r+1,u=new t(null,n),d=[],E="";for(;c<e.length;){let f=e.charAt(c++);if(s||f==="\\"){s=!s,E+=f;continue}if(o){c===a+1?(f==="^"||f==="!")&&(l=!0):f==="]"&&!(c===a+2&&l)&&(o=!1),E+=f;continue}else if(f==="["){o=!0,a=c,l=!1,E+=f;continue}if(oF(f)&&e.charAt(c)==="("){u.push(E),E="";let p=new t(f,u);u.push(p),c=t.#S(e,p,c,i);continue}if(f==="|"){u.push(E),E="",d.push(u),u=new t(null,n);continue}if(f===")")return E===""&&n.#r.length===0&&(n.#i=!0),u.push(E),E="",n.push(...d,u),c;E+=f}return n.type=null,n.#t=void 0,n.#r=[e.substring(r-1)],c}static fromGlob(e,n={}){let r=new t(null,void 0,n);return t.#S(e,r,0,n),r}toMMPattern(){if(this!==this.#e)return this.#e.toMMPattern();let e=this.toString(),[n,r,i,s]=this.toRegExpSource();if(!(i||this.#t||this.#a.nocase&&!this.#a.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return r;let a=(this.#a.nocase?"i":"")+(s?"u":"");return Object.assign(new RegExp(`^${n}$`,a),{_src:n,_glob:e})}get options(){return this.#a}toRegExpSource(e){let n=e??!!this.#a.dot;if(this.#e===this&&this.#T(),!this.type){let l=this.isStart()&&this.isEnd(),c=this.#r.map(f=>{let[p,h,T,S]=typeof f=="string"?t.#f(f,this.#t,l):f.toRegExpSource(e);return this.#t=this.#t||T,this.#s=this.#s||S,p}).join(""),u="";if(this.isStart()&&typeof this.#r[0]=="string"&&!(this.#r.length===1&&gae.has(this.#r[0]))){let p=mae,h=n&&p.has(c.charAt(0))||c.startsWith("\\.")&&p.has(c.charAt(2))||c.startsWith("\\.\\.")&&p.has(c.charAt(4)),T=!n&&!e&&p.has(c.charAt(0));u=h?Aae:T?Mh:""}let d="";return this.isEnd()&&this.#e.#d&&this.#o?.type==="!"&&(d="(?:$|\\/)"),[u+c+d,(0,vh.unescape)(c),this.#t=!!this.#t,this.#s]}let r=this.type==="*"||this.type==="+",i=this.type==="!"?"(?:(?!(?:":"(?:",s=this.#E(n);if(this.isStart()&&this.isEnd()&&!s&&this.type!=="!"){let l=this.toString();return this.#r=[l],this.type=null,this.#t=void 0,[l,(0,vh.unescape)(this.toString()),!1,!1]}let o=!r||e||n||!Mh?"":this.#E(!0);o===s&&(o=""),o&&(s=`(?:${s})(?:${o})*?`);let a="";if(this.type==="!"&&this.#i)a=(this.isStart()&&!n?Mh:"")+lF;else{let l=this.type==="!"?"))"+(this.isStart()&&!n&&!e?Mh:"")+aF+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&o?")":this.type==="*"&&o?")?":`)${this.type}`;a=i+s+l}return[a,(0,vh.unescape)(s),this.#t=!!this.#t,this.#s]}#E(e){return this.#r.map(n=>{if(typeof n=="string")throw new Error("string type in extglob ast??");let[r,i,s,o]=n.toRegExpSource(e);return this.#s=this.#s||o,r}).filter(n=>!(this.isStart()&&this.isEnd())||!!n).join("|")}static#f(e,n,r=!1){let i=!1,s="",o=!1;for(let a=0;a<e.length;a++){let l=e.charAt(a);if(i){i=!1,s+=(Iae.has(l)?"\\":"")+l;continue}if(l==="\\"){a===e.length-1?s+="\\\\":i=!0;continue}if(l==="["){let[c,u,d,E]=(0,Sae.parseClass)(e,a);if(d){s+=c,o=o||u,a+=d-1,n=n||E;continue}}if(l==="*"){r&&e==="*"?s+=lF:s+=aF,n=!0;continue}if(l==="?"){s+=Fg,n=!0;continue}s+=_ae(l)}return[s,(0,vh.unescape)(e),!!n,o]}};Uh.AST=Bg});var Gg=C(Bh=>{"use strict";Object.defineProperty(Bh,"__esModule",{value:!0});Bh.escape=void 0;var Nae=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&");Bh.escape=Nae});var vs=C(te=>{"use strict";var Oae=te&&te.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(te,"__esModule",{value:!0});te.unescape=te.escape=te.AST=te.Minimatch=te.match=te.makeRe=te.braceExpand=te.defaults=te.filter=te.GLOBSTAR=te.sep=te.minimatch=void 0;var Cae=Oae(nF()),Fh=rF(),dF=Hg(),yae=Gg(),bae=xh(),wae=(t,e,n={})=>((0,Fh.assertValidPattern)(e),!n.nocomment&&e.charAt(0)==="#"?!1:new Lo(e,n).match(t));te.minimatch=wae;var Lae=/^\*+([^+@!?\*\[\(]*)$/,Dae=t=>e=>!e.startsWith(".")&&e.endsWith(t),Pae=t=>e=>e.endsWith(t),xae=t=>(t=t.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(t)),vae=t=>(t=t.toLowerCase(),e=>e.toLowerCase().endsWith(t)),Mae=/^\*+\.\*+$/,Uae=t=>!t.startsWith(".")&&t.includes("."),Bae=t=>t!=="."&&t!==".."&&t.includes("."),Fae=/^\.\*+$/,Hae=t=>t!=="."&&t!==".."&&t.startsWith("."),Gae=/^\*+$/,Wae=t=>t.length!==0&&!t.startsWith("."),$ae=t=>t.length!==0&&t!=="."&&t!=="..",kae=/^\?+([^+@!?\*\[\(]*)?$/,Yae=([t,e=""])=>{let n=fF([t]);return e?(e=e.toLowerCase(),r=>n(r)&&r.toLowerCase().endsWith(e)):n},Vae=([t,e=""])=>{let n=EF([t]);return e?(e=e.toLowerCase(),r=>n(r)&&r.toLowerCase().endsWith(e)):n},qae=([t,e=""])=>{let n=EF([t]);return e?r=>n(r)&&r.endsWith(e):n},Xae=([t,e=""])=>{let n=fF([t]);return e?r=>n(r)&&r.endsWith(e):n},fF=([t])=>{let e=t.length;return n=>n.length===e&&!n.startsWith(".")},EF=([t])=>{let e=t.length;return n=>n.length===e&&n!=="."&&n!==".."},hF=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",cF={win32:{sep:"\\"},posix:{sep:"/"}};te.sep=hF==="win32"?cF.win32.sep:cF.posix.sep;te.minimatch.sep=te.sep;te.GLOBSTAR=Symbol("globstar **");te.minimatch.GLOBSTAR=te.GLOBSTAR;var zae="[^/]",jae=zae+"*?",Kae="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",Jae="(?:(?!(?:\\/|^)\\.).)*?",Qae=(t,e={})=>n=>(0,te.minimatch)(n,t,e);te.filter=Qae;te.minimatch.filter=te.filter;var Tr=(t,e={})=>Object.assign({},t,e),Zae=t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return te.minimatch;let e=te.minimatch;return Object.assign((r,i,s={})=>e(r,i,Tr(t,s)),{Minimatch:class extends e.Minimatch{constructor(i,s={}){super(i,Tr(t,s))}static defaults(i){return e.defaults(Tr(t,i)).Minimatch}},AST:class extends e.AST{constructor(i,s,o={}){super(i,s,Tr(t,o))}static fromGlob(i,s={}){return e.AST.fromGlob(i,Tr(t,s))}},unescape:(r,i={})=>e.unescape(r,Tr(t,i)),escape:(r,i={})=>e.escape(r,Tr(t,i)),filter:(r,i={})=>e.filter(r,Tr(t,i)),defaults:r=>e.defaults(Tr(t,r)),makeRe:(r,i={})=>e.makeRe(r,Tr(t,i)),braceExpand:(r,i={})=>e.braceExpand(r,Tr(t,i)),match:(r,i,s={})=>e.match(r,i,Tr(t,s)),sep:e.sep,GLOBSTAR:te.GLOBSTAR})};te.defaults=Zae;te.minimatch.defaults=te.defaults;var ele=(t,e={})=>((0,Fh.assertValidPattern)(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:(0,Cae.default)(t));te.braceExpand=ele;te.minimatch.braceExpand=te.braceExpand;var tle=(t,e={})=>new Lo(t,e).makeRe();te.makeRe=tle;te.minimatch.makeRe=te.makeRe;var nle=(t,e,n={})=>{let r=new Lo(e,n);return t=t.filter(i=>r.match(i)),r.options.nonull&&!t.length&&t.push(e),t};te.match=nle;te.minimatch.match=te.match;var uF=/[?*]|[+@!]\(.*?\)|\[|\]/,rle=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Lo=class{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,n={}){(0,Fh.assertValidPattern)(e),n=n||{},this.options=n,this.pattern=e,this.platform=n.platform||hF,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!n.windowsPathsNoEscape||n.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!n.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!n.nonegate,this.comment=!1,this.empty=!1,this.partial=!!n.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=n.windowsNoMagicRoot!==void 0?n.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let n of e)if(typeof n!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,n=this.options;if(!n.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],n.debug&&(this.debug=(...s)=>console.error(...s)),this.debug(this.pattern,this.globSet);let r=this.globSet.map(s=>this.slashSplit(s));this.globParts=this.preprocess(r),this.debug(this.pattern,this.globParts);let i=this.globParts.map((s,o,a)=>{if(this.isWindows&&this.windowsNoMagicRoot){let l=s[0]===""&&s[1]===""&&(s[2]==="?"||!uF.test(s[2]))&&!uF.test(s[3]),c=/^[a-z]:/i.test(s[0]);if(l)return[...s.slice(0,4),...s.slice(4).map(u=>this.parse(u))];if(c)return[s[0],...s.slice(1).map(u=>this.parse(u))]}return s.map(l=>this.parse(l))});if(this.debug(this.pattern,i),this.set=i.filter(s=>s.indexOf(!1)===-1),this.isWindows)for(let s=0;s<this.set.length;s++){let o=this.set[s];o[0]===""&&o[1]===""&&this.globParts[s][2]==="?"&&typeof o[3]=="string"&&/^[a-z]:$/i.test(o[3])&&(o[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let r=0;r<e.length;r++)for(let i=0;i<e[r].length;i++)e[r][i]==="**"&&(e[r][i]="*");let{optimizationLevel:n=1}=this.options;return n>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):n>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(n=>{let r=-1;for(;(r=n.indexOf("**",r+1))!==-1;){let i=r;for(;n[i+1]==="**";)i++;i!==r&&n.splice(r,i-r)}return n})}levelOneOptimize(e){return e.map(n=>(n=n.reduce((r,i)=>{let s=r[r.length-1];return i==="**"&&s==="**"?r:i===".."&&s&&s!==".."&&s!=="."&&s!=="**"?(r.pop(),r):(r.push(i),r)},[]),n.length===0?[""]:n))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let n=!1;do{if(n=!1,!this.preserveMultipleSlashes){for(let i=1;i<e.length-1;i++){let s=e[i];i===1&&s===""&&e[0]===""||(s==="."||s==="")&&(n=!0,e.splice(i,1),i--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(n=!0,e.pop())}let r=0;for(;(r=e.indexOf("..",r+1))!==-1;){let i=e[r-1];i&&i!=="."&&i!==".."&&i!=="**"&&(n=!0,e.splice(r-1,2),r-=2)}}while(n);return e.length===0?[""]:e}firstPhasePreProcess(e){let n=!1;do{n=!1;for(let r of e){let i=-1;for(;(i=r.indexOf("**",i+1))!==-1;){let o=i;for(;r[o+1]==="**";)o++;o>i&&r.splice(i+1,o-i);let a=r[i+1],l=r[i+2],c=r[i+3];if(a!==".."||!l||l==="."||l===".."||!c||c==="."||c==="..")continue;n=!0,r.splice(i,1);let u=r.slice(0);u[i]="**",e.push(u),i--}if(!this.preserveMultipleSlashes){for(let o=1;o<r.length-1;o++){let a=r[o];o===1&&a===""&&r[0]===""||(a==="."||a==="")&&(n=!0,r.splice(o,1),o--)}r[0]==="."&&r.length===2&&(r[1]==="."||r[1]==="")&&(n=!0,r.pop())}let s=0;for(;(s=r.indexOf("..",s+1))!==-1;){let o=r[s-1];if(o&&o!=="."&&o!==".."&&o!=="**"){n=!0;let l=s===1&&r[s+1]==="**"?["."]:[];r.splice(s-1,2,...l),r.length===0&&r.push(""),s-=2}}}}while(n);return e}secondPhasePreProcess(e){for(let n=0;n<e.length-1;n++)for(let r=n+1;r<e.length;r++){let i=this.partsMatch(e[n],e[r],!this.preserveMultipleSlashes);if(i){e[n]=[],e[r]=i;break}}return e.filter(n=>n.length)}partsMatch(e,n,r=!1){let i=0,s=0,o=[],a="";for(;i<e.length&&s<n.length;)if(e[i]===n[s])o.push(a==="b"?n[s]:e[i]),i++,s++;else if(r&&e[i]==="**"&&n[s]===e[i+1])o.push(e[i]),i++;else if(r&&n[s]==="**"&&e[i]===n[s+1])o.push(n[s]),s++;else if(e[i]==="*"&&n[s]&&(this.options.dot||!n[s].startsWith("."))&&n[s]!=="**"){if(a==="b")return!1;a="a",o.push(e[i]),i++,s++}else if(n[s]==="*"&&e[i]&&(this.options.dot||!e[i].startsWith("."))&&e[i]!=="**"){if(a==="a")return!1;a="b",o.push(n[s]),i++,s++}else return!1;return e.length===n.length&&o}parseNegate(){if(this.nonegate)return;let e=this.pattern,n=!1,r=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)n=!n,r++;r&&(this.pattern=e.slice(r)),this.negate=n}matchOne(e,n,r=!1){let i=this.options;if(this.isWindows){let h=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),T=!h&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),S=typeof n[0]=="string"&&/^[a-z]:$/i.test(n[0]),I=!S&&n[0]===""&&n[1]===""&&n[2]==="?"&&typeof n[3]=="string"&&/^[a-z]:$/i.test(n[3]),R=T?3:h?0:void 0,m=I?3:S?0:void 0;if(typeof R=="number"&&typeof m=="number"){let[A,N]=[e[R],n[m]];A.toLowerCase()===N.toLowerCase()&&(n[m]=A,m>R?n=n.slice(m):R>m&&(e=e.slice(R)))}}let{optimizationLevel:s=1}=this.options;s>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:n}),this.debug("matchOne",e.length,n.length);for(var o=0,a=0,l=e.length,c=n.length;o<l&&a<c;o++,a++){this.debug("matchOne loop");var u=n[a],d=e[o];if(this.debug(n,u,d),u===!1)return!1;if(u===te.GLOBSTAR){this.debug("GLOBSTAR",[n,u,d]);var E=o,f=a+1;if(f===c){for(this.debug("** at the end");o<l;o++)if(e[o]==="."||e[o]===".."||!i.dot&&e[o].charAt(0)===".")return!1;return!0}for(;E<l;){var p=e[E];if(this.debug(`
globstar while`,e,E,n,f,p),this.matchOne(e.slice(E),n.slice(f),r))return this.debug("globstar found match!",E,l,p),!0;if(p==="."||p===".."||!i.dot&&p.charAt(0)==="."){this.debug("dot detected!",e,E,n,f);break}this.debug("globstar swallow a segment, and continue"),E++}return!!(r&&(this.debug(`
>>> no match, partial?`,e,E,n,f),E===l))}let h;if(typeof u=="string"?(h=d===u,this.debug("string match",u,d,h)):(h=u.test(d),this.debug("pattern match",u,d,h)),!h)return!1}if(o===l&&a===c)return!0;if(o===l)return r;if(a===c)return o===l-1&&e[o]==="";throw new Error("wtf?")}braceExpand(){return(0,te.braceExpand)(this.pattern,this.options)}parse(e){(0,Fh.assertValidPattern)(e);let n=this.options;if(e==="**")return te.GLOBSTAR;if(e==="")return"";let r,i=null;(r=e.match(Gae))?i=n.dot?$ae:Wae:(r=e.match(Lae))?i=(n.nocase?n.dot?vae:xae:n.dot?Pae:Dae)(r[1]):(r=e.match(kae))?i=(n.nocase?n.dot?Vae:Yae:n.dot?qae:Xae)(r):(r=e.match(Mae))?i=n.dot?Bae:Uae:(r=e.match(Fae))&&(i=Hae);let s=dF.AST.fromGlob(e,this.options).toMMPattern();return i&&typeof s=="object"&&Reflect.defineProperty(s,"test",{value:i}),s}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let n=this.options,r=n.noglobstar?jae:n.dot?Kae:Jae,i=new Set(n.nocase?["i"]:[]),s=e.map(l=>{let c=l.map(u=>{if(u instanceof RegExp)for(let d of u.flags.split(""))i.add(d);return typeof u=="string"?rle(u):u===te.GLOBSTAR?te.GLOBSTAR:u._src});return c.forEach((u,d)=>{let E=c[d+1],f=c[d-1];u!==te.GLOBSTAR||f===te.GLOBSTAR||(f===void 0?E!==void 0&&E!==te.GLOBSTAR?c[d+1]="(?:\\/|"+r+"\\/)?"+E:c[d]=r:E===void 0?c[d-1]=f+"(?:\\/|"+r+")?":E!==te.GLOBSTAR&&(c[d-1]=f+"(?:\\/|\\/"+r+"\\/)"+E,c[d+1]=te.GLOBSTAR))}),c.filter(u=>u!==te.GLOBSTAR).join("/")}).join("|"),[o,a]=e.length>1?["(?:",")"]:["",""];s="^"+o+s+a+"$",this.negate&&(s="^(?!"+s+").+$");try{this.regexp=new RegExp(s,[...i].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,n=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&n)return!0;let r=this.options;this.isWindows&&(e=e.split("\\").join("/"));let i=this.slashSplit(e);this.debug(this.pattern,"split",i);let s=this.set;this.debug(this.pattern,"set",s);let o=i[i.length-1];if(!o)for(let a=i.length-2;!o&&a>=0;a--)o=i[a];for(let a=0;a<s.length;a++){let l=s[a],c=i;if(r.matchBase&&l.length===1&&(c=[o]),this.matchOne(c,l,n))return r.flipNegate?!0:!this.negate}return r.flipNegate?!1:this.negate}static defaults(e){return te.minimatch.defaults(e).Minimatch}};te.Minimatch=Lo;var ile=Hg();Object.defineProperty(te,"AST",{enumerable:!0,get:function(){return ile.AST}});var sle=Gg();Object.defineProperty(te,"escape",{enumerable:!0,get:function(){return sle.escape}});var ole=xh();Object.defineProperty(te,"unescape",{enumerable:!0,get:function(){return ole.unescape}});te.minimatch.AST=dF.AST;te.minimatch.Minimatch=Lo;te.minimatch.escape=yae.escape;te.minimatch.unescape=bae.unescape});var AF=C(Gh=>{"use strict";Object.defineProperty(Gh,"__esModule",{value:!0});Gh.LRUCache=void 0;var gl=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,TF=new Set,Wg=typeof process=="object"&&process?process:{},SF=(t,e,n,r)=>{typeof Wg.emitWarning=="function"?Wg.emitWarning(t,e,n,r):console.error(`[${n}] ${e}: ${t}`)},Hh=globalThis.AbortController,pF=globalThis.AbortSignal;if(typeof Hh>"u"){pF=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(r,i){this._onabort.push(i)}},Hh=class{constructor(){e()}signal=new pF;abort(r){if(!this.signal.aborted){this.signal.reason=r,this.signal.aborted=!0;for(let i of this.signal._onabort)i(r);this.signal.onabort?.(r)}}};let t=Wg.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",e=()=>{t&&(t=!1,SF("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}var ale=t=>!TF.has(t),Ms=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),RF=t=>Ms(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?Il:null:null,Il=class extends Array{constructor(e){super(e),this.fill(0)}},$g=class t{heap;length;static#e=!1;static create(e){let n=RF(e);if(!n)return[];t.#e=!0;let r=new t(e,n);return t.#e=!1,r}constructor(e,n){if(!t.#e)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new n(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},kg=class t{#e;#t;#s;#r;#o;#m;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#c;#d;#a;#l;#i;#T;#S;#E;#f;#_;#p;#N;#O;#A;#g;#I;#h;static unsafeExposeInternals(e){return{starts:e.#O,ttls:e.#A,sizes:e.#N,keyMap:e.#a,keyList:e.#l,valList:e.#i,next:e.#T,prev:e.#S,get head(){return e.#E},get tail(){return e.#f},free:e.#_,isBackgroundFetch:n=>e.#u(n),backgroundFetch:(n,r,i,s)=>e.#F(n,r,i,s),moveToTail:n=>e.#G(n),indexes:n=>e.#y(n),rindexes:n=>e.#b(n),isStale:n=>e.#R(n)}}get max(){return this.#e}get maxSize(){return this.#t}get calculatedSize(){return this.#d}get size(){return this.#c}get fetchMethod(){return this.#o}get memoMethod(){return this.#m}get dispose(){return this.#s}get disposeAfter(){return this.#r}constructor(e){let{max:n=0,ttl:r,ttlResolution:i=1,ttlAutopurge:s,updateAgeOnGet:o,updateAgeOnHas:a,allowStale:l,dispose:c,disposeAfter:u,noDisposeOnSet:d,noUpdateTTL:E,maxSize:f=0,maxEntrySize:p=0,sizeCalculation:h,fetchMethod:T,memoMethod:S,noDeleteOnFetchRejection:I,noDeleteOnStaleGet:R,allowStaleOnFetchRejection:m,allowStaleOnFetchAbort:A,ignoreFetchAbort:N}=e;if(n!==0&&!Ms(n))throw new TypeError("max option must be a nonnegative integer");let g=n?RF(n):Array;if(!g)throw new Error("invalid max value: "+n);if(this.#e=n,this.#t=f,this.maxEntrySize=p||this.#t,this.sizeCalculation=h,this.sizeCalculation){if(!this.#t&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(S!==void 0&&typeof S!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#m=S,T!==void 0&&typeof T!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#o=T,this.#I=!!T,this.#a=new Map,this.#l=new Array(n).fill(void 0),this.#i=new Array(n).fill(void 0),this.#T=new g(n),this.#S=new g(n),this.#E=0,this.#f=0,this.#_=$g.create(n),this.#c=0,this.#d=0,typeof c=="function"&&(this.#s=c),typeof u=="function"?(this.#r=u,this.#p=[]):(this.#r=void 0,this.#p=void 0),this.#g=!!this.#s,this.#h=!!this.#r,this.noDisposeOnSet=!!d,this.noUpdateTTL=!!E,this.noDeleteOnFetchRejection=!!I,this.allowStaleOnFetchRejection=!!m,this.allowStaleOnFetchAbort=!!A,this.ignoreFetchAbort=!!N,this.maxEntrySize!==0){if(this.#t!==0&&!Ms(this.#t))throw new TypeError("maxSize must be a positive integer if specified");if(!Ms(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#L()}if(this.allowStale=!!l,this.noDeleteOnStaleGet=!!R,this.updateAgeOnGet=!!o,this.updateAgeOnHas=!!a,this.ttlResolution=Ms(i)||i===0?i:1,this.ttlAutopurge=!!s,this.ttl=r||0,this.ttl){if(!Ms(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#w()}if(this.#e===0&&this.ttl===0&&this.#t===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#e&&!this.#t){let L="LRU_CACHE_UNBOUNDED";ale(L)&&(TF.add(L),SF("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",L,t))}}getRemainingTTL(e){return this.#a.has(e)?1/0:0}#w(){let e=new Il(this.#e),n=new Il(this.#e);this.#A=e,this.#O=n,this.#P=(s,o,a=gl.now())=>{if(n[s]=o!==0?a:0,e[s]=o,o!==0&&this.ttlAutopurge){let l=setTimeout(()=>{this.#R(s)&&this.#D(this.#l[s],"expire")},o+1);l.unref&&l.unref()}},this.#C=s=>{n[s]=e[s]!==0?gl.now():0},this.#n=(s,o)=>{if(e[o]){let a=e[o],l=n[o];if(!a||!l)return;s.ttl=a,s.start=l,s.now=r||i();let c=s.now-l;s.remainingTTL=a-c}};let r=0,i=()=>{let s=gl.now();if(this.ttlResolution>0){r=s;let o=setTimeout(()=>r=0,this.ttlResolution);o.unref&&o.unref()}return s};this.getRemainingTTL=s=>{let o=this.#a.get(s);if(o===void 0)return 0;let a=e[o],l=n[o];if(!a||!l)return 1/0;let c=(r||i())-l;return a-c},this.#R=s=>{let o=n[s],a=e[s];return!!a&&!!o&&(r||i())-o>a}}#C=()=>{};#n=()=>{};#P=()=>{};#R=()=>!1;#L(){let e=new Il(this.#e);this.#d=0,this.#N=e,this.#x=n=>{this.#d-=e[n],e[n]=0},this.#M=(n,r,i,s)=>{if(this.#u(r))return 0;if(!Ms(i))if(s){if(typeof s!="function")throw new TypeError("sizeCalculation must be a function");if(i=s(r,n),!Ms(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i},this.#v=(n,r,i)=>{if(e[n]=r,this.#t){let s=this.#t-e[n];for(;this.#d>s;)this.#B(!0)}this.#d+=e[n],i&&(i.entrySize=r,i.totalCalculatedSize=this.#d)}}#x=e=>{};#v=(e,n,r)=>{};#M=(e,n,r,i)=>{if(r||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#y({allowStale:e=this.allowStale}={}){if(this.#c)for(let n=this.#f;!(!this.#U(n)||((e||!this.#R(n))&&(yield n),n===this.#E));)n=this.#S[n]}*#b({allowStale:e=this.allowStale}={}){if(this.#c)for(let n=this.#E;!(!this.#U(n)||((e||!this.#R(n))&&(yield n),n===this.#f));)n=this.#T[n]}#U(e){return e!==void 0&&this.#a.get(this.#l[e])===e}*entries(){for(let e of this.#y())this.#i[e]!==void 0&&this.#l[e]!==void 0&&!this.#u(this.#i[e])&&(yield[this.#l[e],this.#i[e]])}*rentries(){for(let e of this.#b())this.#i[e]!==void 0&&this.#l[e]!==void 0&&!this.#u(this.#i[e])&&(yield[this.#l[e],this.#i[e]])}*keys(){for(let e of this.#y()){let n=this.#l[e];n!==void 0&&!this.#u(this.#i[e])&&(yield n)}}*rkeys(){for(let e of this.#b()){let n=this.#l[e];n!==void 0&&!this.#u(this.#i[e])&&(yield n)}}*values(){for(let e of this.#y())this.#i[e]!==void 0&&!this.#u(this.#i[e])&&(yield this.#i[e])}*rvalues(){for(let e of this.#b())this.#i[e]!==void 0&&!this.#u(this.#i[e])&&(yield this.#i[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,n={}){for(let r of this.#y()){let i=this.#i[r],s=this.#u(i)?i.__staleWhileFetching:i;if(s!==void 0&&e(s,this.#l[r],this))return this.get(this.#l[r],n)}}forEach(e,n=this){for(let r of this.#y()){let i=this.#i[r],s=this.#u(i)?i.__staleWhileFetching:i;s!==void 0&&e.call(n,s,this.#l[r],this)}}rforEach(e,n=this){for(let r of this.#b()){let i=this.#i[r],s=this.#u(i)?i.__staleWhileFetching:i;s!==void 0&&e.call(n,s,this.#l[r],this)}}purgeStale(){let e=!1;for(let n of this.#b({allowStale:!0}))this.#R(n)&&(this.#D(this.#l[n],"expire"),e=!0);return e}info(e){let n=this.#a.get(e);if(n===void 0)return;let r=this.#i[n],i=this.#u(r)?r.__staleWhileFetching:r;if(i===void 0)return;let s={value:i};if(this.#A&&this.#O){let o=this.#A[n],a=this.#O[n];if(o&&a){let l=o-(gl.now()-a);s.ttl=l,s.start=Date.now()}}return this.#N&&(s.size=this.#N[n]),s}dump(){let e=[];for(let n of this.#y({allowStale:!0})){let r=this.#l[n],i=this.#i[n],s=this.#u(i)?i.__staleWhileFetching:i;if(s===void 0||r===void 0)continue;let o={value:s};if(this.#A&&this.#O){o.ttl=this.#A[n];let a=gl.now()-this.#O[n];o.start=Math.floor(Date.now()-a)}this.#N&&(o.size=this.#N[n]),e.unshift([r,o])}return e}load(e){this.clear();for(let[n,r]of e){if(r.start){let i=Date.now()-r.start;r.start=gl.now()-i}this.set(n,r.value,r)}}set(e,n,r={}){if(n===void 0)return this.delete(e),this;let{ttl:i=this.ttl,start:s,noDisposeOnSet:o=this.noDisposeOnSet,sizeCalculation:a=this.sizeCalculation,status:l}=r,{noUpdateTTL:c=this.noUpdateTTL}=r,u=this.#M(e,n,r.size||0,a);if(this.maxEntrySize&&u>this.maxEntrySize)return l&&(l.set="miss",l.maxEntrySizeExceeded=!0),this.#D(e,"set"),this;let d=this.#c===0?void 0:this.#a.get(e);if(d===void 0)d=this.#c===0?this.#f:this.#_.length!==0?this.#_.pop():this.#c===this.#e?this.#B(!1):this.#c,this.#l[d]=e,this.#i[d]=n,this.#a.set(e,d),this.#T[this.#f]=d,this.#S[d]=this.#f,this.#f=d,this.#c++,this.#v(d,u,l),l&&(l.set="add"),c=!1;else{this.#G(d);let E=this.#i[d];if(n!==E){if(this.#I&&this.#u(E)){E.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:f}=E;f!==void 0&&!o&&(this.#g&&this.#s?.(f,e,"set"),this.#h&&this.#p?.push([f,e,"set"]))}else o||(this.#g&&this.#s?.(E,e,"set"),this.#h&&this.#p?.push([E,e,"set"]));if(this.#x(d),this.#v(d,u,l),this.#i[d]=n,l){l.set="replace";let f=E&&this.#u(E)?E.__staleWhileFetching:E;f!==void 0&&(l.oldValue=f)}}else l&&(l.set="update")}if(i!==0&&!this.#A&&this.#w(),this.#A&&(c||this.#P(d,i,s),l&&this.#n(l,d)),!o&&this.#h&&this.#p){let E=this.#p,f;for(;f=E?.shift();)this.#r?.(...f)}return this}pop(){try{for(;this.#c;){let e=this.#i[this.#E];if(this.#B(!0),this.#u(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#h&&this.#p){let e=this.#p,n;for(;n=e?.shift();)this.#r?.(...n)}}}#B(e){let n=this.#E,r=this.#l[n],i=this.#i[n];return this.#I&&this.#u(i)?i.__abortController.abort(new Error("evicted")):(this.#g||this.#h)&&(this.#g&&this.#s?.(i,r,"evict"),this.#h&&this.#p?.push([i,r,"evict"])),this.#x(n),e&&(this.#l[n]=void 0,this.#i[n]=void 0,this.#_.push(n)),this.#c===1?(this.#E=this.#f=0,this.#_.length=0):this.#E=this.#T[n],this.#a.delete(r),this.#c--,n}has(e,n={}){let{updateAgeOnHas:r=this.updateAgeOnHas,status:i}=n,s=this.#a.get(e);if(s!==void 0){let o=this.#i[s];if(this.#u(o)&&o.__staleWhileFetching===void 0)return!1;if(this.#R(s))i&&(i.has="stale",this.#n(i,s));else return r&&this.#C(s),i&&(i.has="hit",this.#n(i,s)),!0}else i&&(i.has="miss");return!1}peek(e,n={}){let{allowStale:r=this.allowStale}=n,i=this.#a.get(e);if(i===void 0||!r&&this.#R(i))return;let s=this.#i[i];return this.#u(s)?s.__staleWhileFetching:s}#F(e,n,r,i){let s=n===void 0?void 0:this.#i[n];if(this.#u(s))return s;let o=new Hh,{signal:a}=r;a?.addEventListener("abort",()=>o.abort(a.reason),{signal:o.signal});let l={signal:o.signal,options:r,context:i},c=(h,T=!1)=>{let{aborted:S}=o.signal,I=r.ignoreFetchAbort&&h!==void 0;if(r.status&&(S&&!T?(r.status.fetchAborted=!0,r.status.fetchError=o.signal.reason,I&&(r.status.fetchAbortIgnored=!0)):r.status.fetchResolved=!0),S&&!I&&!T)return d(o.signal.reason);let R=f;return this.#i[n]===f&&(h===void 0?R.__staleWhileFetching?this.#i[n]=R.__staleWhileFetching:this.#D(e,"fetch"):(r.status&&(r.status.fetchUpdated=!0),this.set(e,h,l.options))),h},u=h=>(r.status&&(r.status.fetchRejected=!0,r.status.fetchError=h),d(h)),d=h=>{let{aborted:T}=o.signal,S=T&&r.allowStaleOnFetchAbort,I=S||r.allowStaleOnFetchRejection,R=I||r.noDeleteOnFetchRejection,m=f;if(this.#i[n]===f&&(!R||m.__staleWhileFetching===void 0?this.#D(e,"fetch"):S||(this.#i[n]=m.__staleWhileFetching)),I)return r.status&&m.__staleWhileFetching!==void 0&&(r.status.returnedStale=!0),m.__staleWhileFetching;if(m.__returned===m)throw h},E=(h,T)=>{let S=this.#o?.(e,s,l);S&&S instanceof Promise&&S.then(I=>h(I===void 0?void 0:I),T),o.signal.addEventListener("abort",()=>{(!r.ignoreFetchAbort||r.allowStaleOnFetchAbort)&&(h(void 0),r.allowStaleOnFetchAbort&&(h=I=>c(I,!0)))})};r.status&&(r.status.fetchDispatched=!0);let f=new Promise(E).then(c,u),p=Object.assign(f,{__abortController:o,__staleWhileFetching:s,__returned:void 0});return n===void 0?(this.set(e,p,{...l.options,status:void 0}),n=this.#a.get(e)):this.#i[n]=p,p}#u(e){if(!this.#I)return!1;let n=e;return!!n&&n instanceof Promise&&n.hasOwnProperty("__staleWhileFetching")&&n.__abortController instanceof Hh}async fetch(e,n={}){let{allowStale:r=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:l=0,sizeCalculation:c=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL,noDeleteOnFetchRejection:d=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:E=this.allowStaleOnFetchRejection,ignoreFetchAbort:f=this.ignoreFetchAbort,allowStaleOnFetchAbort:p=this.allowStaleOnFetchAbort,context:h,forceRefresh:T=!1,status:S,signal:I}=n;if(!this.#I)return S&&(S.fetch="get"),this.get(e,{allowStale:r,updateAgeOnGet:i,noDeleteOnStaleGet:s,status:S});let R={allowStale:r,updateAgeOnGet:i,noDeleteOnStaleGet:s,ttl:o,noDisposeOnSet:a,size:l,sizeCalculation:c,noUpdateTTL:u,noDeleteOnFetchRejection:d,allowStaleOnFetchRejection:E,allowStaleOnFetchAbort:p,ignoreFetchAbort:f,status:S,signal:I},m=this.#a.get(e);if(m===void 0){S&&(S.fetch="miss");let A=this.#F(e,m,R,h);return A.__returned=A}else{let A=this.#i[m];if(this.#u(A)){let D=r&&A.__staleWhileFetching!==void 0;return S&&(S.fetch="inflight",D&&(S.returnedStale=!0)),D?A.__staleWhileFetching:A.__returned=A}let N=this.#R(m);if(!T&&!N)return S&&(S.fetch="hit"),this.#G(m),i&&this.#C(m),S&&this.#n(S,m),A;let g=this.#F(e,m,R,h),y=g.__staleWhileFetching!==void 0&&r;return S&&(S.fetch=N?"stale":"refresh",y&&N&&(S.returnedStale=!0)),y?g.__staleWhileFetching:g.__returned=g}}async forceFetch(e,n={}){let r=await this.fetch(e,n);if(r===void 0)throw new Error("fetch() returned undefined");return r}memo(e,n={}){let r=this.#m;if(!r)throw new Error("no memoMethod provided to constructor");let{context:i,forceRefresh:s,...o}=n,a=this.get(e,o);if(!s&&a!==void 0)return a;let l=r(e,a,{options:o,context:i});return this.set(e,l,o),l}get(e,n={}){let{allowStale:r=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,status:o}=n,a=this.#a.get(e);if(a!==void 0){let l=this.#i[a],c=this.#u(l);return o&&this.#n(o,a),this.#R(a)?(o&&(o.get="stale"),c?(o&&r&&l.__staleWhileFetching!==void 0&&(o.returnedStale=!0),r?l.__staleWhileFetching:void 0):(s||this.#D(e,"expire"),o&&r&&(o.returnedStale=!0),r?l:void 0)):(o&&(o.get="hit"),c?l.__staleWhileFetching:(this.#G(a),i&&this.#C(a),l))}else o&&(o.get="miss")}#H(e,n){this.#S[n]=e,this.#T[e]=n}#G(e){e!==this.#f&&(e===this.#E?this.#E=this.#T[e]:this.#H(this.#S[e],this.#T[e]),this.#H(this.#f,e),this.#f=e)}delete(e){return this.#D(e,"delete")}#D(e,n){let r=!1;if(this.#c!==0){let i=this.#a.get(e);if(i!==void 0)if(r=!0,this.#c===1)this.#W(n);else{this.#x(i);let s=this.#i[i];if(this.#u(s)?s.__abortController.abort(new Error("deleted")):(this.#g||this.#h)&&(this.#g&&this.#s?.(s,e,n),this.#h&&this.#p?.push([s,e,n])),this.#a.delete(e),this.#l[i]=void 0,this.#i[i]=void 0,i===this.#f)this.#f=this.#S[i];else if(i===this.#E)this.#E=this.#T[i];else{let o=this.#S[i];this.#T[o]=this.#T[i];let a=this.#T[i];this.#S[a]=this.#S[i]}this.#c--,this.#_.push(i)}}if(this.#h&&this.#p?.length){let i=this.#p,s;for(;s=i?.shift();)this.#r?.(...s)}return r}clear(){return this.#W("delete")}#W(e){for(let n of this.#b({allowStale:!0})){let r=this.#i[n];if(this.#u(r))r.__abortController.abort(new Error("deleted"));else{let i=this.#l[n];this.#g&&this.#s?.(r,i,e),this.#h&&this.#p?.push([r,i,e])}}if(this.#a.clear(),this.#i.fill(void 0),this.#l.fill(void 0),this.#A&&this.#O&&(this.#A.fill(0),this.#O.fill(0)),this.#N&&this.#N.fill(0),this.#E=0,this.#f=0,this.#_.length=0,this.#d=0,this.#c=0,this.#h&&this.#p){let n=this.#p,r;for(;r=n?.shift();)this.#r?.(...r)}}};Gh.LRUCache=kg});var LF=C(wF=>{"use strict";var mF=typeof process=="object"&&process?process:{stdout:null,stderr:null},lle=require("events"),gF=require("stream"),cle=require("string_decoder"),IF=cle.StringDecoder,ki=Symbol("EOF"),Yi=Symbol("maybeEmitEnd"),Us=Symbol("emittedEnd"),Wh=Symbol("emittingEnd"),$u=Symbol("emittedError"),$h=Symbol("closed"),_F=Symbol("read"),kh=Symbol("flush"),NF=Symbol("flushChunk"),Qn=Symbol("encoding"),Vi=Symbol("decoder"),Yh=Symbol("flowing"),ku=Symbol("paused"),_l=Symbol("resume"),Dt=Symbol("buffer"),si=Symbol("pipes"),nn=Symbol("bufferLength"),Yg=Symbol("bufferPush"),Vg=Symbol("bufferShift"),Sn=Symbol("objectMode"),Pt=Symbol("destroyed"),qg=Symbol("error"),Xg=Symbol("emitData"),OF=Symbol("emitEnd"),zg=Symbol("emitEnd2"),qi=Symbol("async"),jg=Symbol("abort"),Vh=Symbol("aborted"),Do=Symbol("signal"),Yu=t=>Promise.resolve().then(t),bF=global._MP_NO_ITERATOR_SYMBOLS_!=="1",CF=bF&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),yF=bF&&Symbol.iterator||Symbol("iterator not implemented"),ule=t=>t==="end"||t==="finish"||t==="prefinish",dle=t=>t instanceof ArrayBuffer||typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,fle=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),qh=class{constructor(e,n,r){this.src=e,this.dest=n,this.opts=r,this.ondrain=()=>e[_l](),n.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},Kg=class extends qh{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,n,r){super(e,n,r),this.proxyErrors=i=>n.emit("error",i),e.on("error",this.proxyErrors)}},Jg=class t extends gF{constructor(e){super(),this[Yh]=!1,this[ku]=!1,this[si]=[],this[Dt]=[],this[Sn]=e&&e.objectMode||!1,this[Sn]?this[Qn]=null:this[Qn]=e&&e.encoding||null,this[Qn]==="buffer"&&(this[Qn]=null),this[qi]=e&&!!e.async||!1,this[Vi]=this[Qn]?new IF(this[Qn]):null,this[ki]=!1,this[Us]=!1,this[Wh]=!1,this[$h]=!1,this[$u]=null,this.writable=!0,this.readable=!0,this[nn]=0,this[Pt]=!1,e&&e.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[Dt]}),e&&e.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[si]}),this[Do]=e&&e.signal,this[Vh]=!1,this[Do]&&(this[Do].addEventListener("abort",()=>this[jg]()),this[Do].aborted&&this[jg]())}get bufferLength(){return this[nn]}get encoding(){return this[Qn]}set encoding(e){if(this[Sn])throw new Error("cannot set encoding in objectMode");if(this[Qn]&&e!==this[Qn]&&(this[Vi]&&this[Vi].lastNeed||this[nn]))throw new Error("cannot change encoding");this[Qn]!==e&&(this[Vi]=e?new IF(e):null,this[Dt].length&&(this[Dt]=this[Dt].map(n=>this[Vi].write(n)))),this[Qn]=e}setEncoding(e){this.encoding=e}get objectMode(){return this[Sn]}set objectMode(e){this[Sn]=this[Sn]||!!e}get async(){return this[qi]}set async(e){this[qi]=this[qi]||!!e}[jg](){this[Vh]=!0,this.emit("abort",this[Do].reason),this.destroy(this[Do].reason)}get aborted(){return this[Vh]}set aborted(e){}write(e,n,r){if(this[Vh])return!1;if(this[ki])throw new Error("write after end");if(this[Pt])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof n=="function"&&(r=n,n="utf8"),n||(n="utf8");let i=this[qi]?Yu:s=>s();return!this[Sn]&&!Buffer.isBuffer(e)&&(fle(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):dle(e)?e=Buffer.from(e):typeof e!="string"&&(this.objectMode=!0)),this[Sn]?(this.flowing&&this[nn]!==0&&this[kh](!0),this.flowing?this.emit("data",e):this[Yg](e),this[nn]!==0&&this.emit("readable"),r&&i(r),this.flowing):e.length?(typeof e=="string"&&!(n===this[Qn]&&!this[Vi].lastNeed)&&(e=Buffer.from(e,n)),Buffer.isBuffer(e)&&this[Qn]&&(e=this[Vi].write(e)),this.flowing&&this[nn]!==0&&this[kh](!0),this.flowing?this.emit("data",e):this[Yg](e),this[nn]!==0&&this.emit("readable"),r&&i(r),this.flowing):(this[nn]!==0&&this.emit("readable"),r&&i(r),this.flowing)}read(e){if(this[Pt])return null;if(this[nn]===0||e===0||e>this[nn])return this[Yi](),null;this[Sn]&&(e=null),this[Dt].length>1&&!this[Sn]&&(this.encoding?this[Dt]=[this[Dt].join("")]:this[Dt]=[Buffer.concat(this[Dt],this[nn])]);let n=this[_F](e||null,this[Dt][0]);return this[Yi](),n}[_F](e,n){return e===n.length||e===null?this[Vg]():(this[Dt][0]=n.slice(e),n=n.slice(0,e),this[nn]-=e),this.emit("data",n),!this[Dt].length&&!this[ki]&&this.emit("drain"),n}end(e,n,r){return typeof e=="function"&&(r=e,e=null),typeof n=="function"&&(r=n,n="utf8"),e&&this.write(e,n),r&&this.once("end",r),this[ki]=!0,this.writable=!1,(this.flowing||!this[ku])&&this[Yi](),this}[_l](){this[Pt]||(this[ku]=!1,this[Yh]=!0,this.emit("resume"),this[Dt].length?this[kh]():this[ki]?this[Yi]():this.emit("drain"))}resume(){return this[_l]()}pause(){this[Yh]=!1,this[ku]=!0}get destroyed(){return this[Pt]}get flowing(){return this[Yh]}get paused(){return this[ku]}[Yg](e){this[Sn]?this[nn]+=1:this[nn]+=e.length,this[Dt].push(e)}[Vg](){return this[Sn]?this[nn]-=1:this[nn]-=this[Dt][0].length,this[Dt].shift()}[kh](e){do;while(this[NF](this[Vg]())&&this[Dt].length);!e&&!this[Dt].length&&!this[ki]&&this.emit("drain")}[NF](e){return this.emit("data",e),this.flowing}pipe(e,n){if(this[Pt])return;let r=this[Us];return n=n||{},e===mF.stdout||e===mF.stderr?n.end=!1:n.end=n.end!==!1,n.proxyErrors=!!n.proxyErrors,r?n.end&&e.end():(this[si].push(n.proxyErrors?new Kg(this,e,n):new qh(this,e,n)),this[qi]?Yu(()=>this[_l]()):this[_l]()),e}unpipe(e){let n=this[si].find(r=>r.dest===e);n&&(this[si].splice(this[si].indexOf(n),1),n.unpipe())}addListener(e,n){return this.on(e,n)}on(e,n){let r=super.on(e,n);return e==="data"&&!this[si].length&&!this.flowing?this[_l]():e==="readable"&&this[nn]!==0?super.emit("readable"):ule(e)&&this[Us]?(super.emit(e),this.removeAllListeners(e)):e==="error"&&this[$u]&&(this[qi]?Yu(()=>n.call(this,this[$u])):n.call(this,this[$u])),r}get emittedEnd(){return this[Us]}[Yi](){!this[Wh]&&!this[Us]&&!this[Pt]&&this[Dt].length===0&&this[ki]&&(this[Wh]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[$h]&&this.emit("close"),this[Wh]=!1)}emit(e,n,...r){if(e!=="error"&&e!=="close"&&e!==Pt&&this[Pt])return;if(e==="data")return!this[Sn]&&!n?!1:this[qi]?Yu(()=>this[Xg](n)):this[Xg](n);if(e==="end")return this[OF]();if(e==="close"){if(this[$h]=!0,!this[Us]&&!this[Pt])return;let s=super.emit("close");return this.removeAllListeners("close"),s}else if(e==="error"){this[$u]=n,super.emit(qg,n);let s=!this[Do]||this.listeners("error").length?super.emit("error",n):!1;return this[Yi](),s}else if(e==="resume"){let s=super.emit("resume");return this[Yi](),s}else if(e==="finish"||e==="prefinish"){let s=super.emit(e);return this.removeAllListeners(e),s}let i=super.emit(e,n,...r);return this[Yi](),i}[Xg](e){for(let r of this[si])r.dest.write(e)===!1&&this.pause();let n=super.emit("data",e);return this[Yi](),n}[OF](){this[Us]||(this[Us]=!0,this.readable=!1,this[qi]?Yu(()=>this[zg]()):this[zg]())}[zg](){if(this[Vi]){let n=this[Vi].end();if(n){for(let r of this[si])r.dest.write(n);super.emit("data",n)}}for(let n of this[si])n.end();let e=super.emit("end");return this.removeAllListeners("end"),e}collect(){let e=[];this[Sn]||(e.dataLength=0);let n=this.promise();return this.on("data",r=>{e.push(r),this[Sn]||(e.dataLength+=r.length)}),n.then(()=>e)}concat(){return this[Sn]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then(e=>this[Sn]?Promise.reject(new Error("cannot concat in objectMode")):this[Qn]?e.join(""):Buffer.concat(e,e.dataLength))}promise(){return new Promise((e,n)=>{this.on(Pt,()=>n(new Error("stream destroyed"))),this.on("error",r=>n(r)),this.on("end",()=>e())})}[CF](){let e=!1,n=()=>(this.pause(),e=!0,Promise.resolve({done:!0}));return{next:()=>{if(e)return n();let i=this.read();if(i!==null)return Promise.resolve({done:!1,value:i});if(this[ki])return n();let s=null,o=null,a=d=>{this.removeListener("data",l),this.removeListener("end",c),this.removeListener(Pt,u),n(),o(d)},l=d=>{this.removeListener("error",a),this.removeListener("end",c),this.removeListener(Pt,u),this.pause(),s({value:d,done:!!this[ki]})},c=()=>{this.removeListener("error",a),this.removeListener("data",l),this.removeListener(Pt,u),n(),s({done:!0})},u=()=>a(new Error("stream destroyed"));return new Promise((d,E)=>{o=E,s=d,this.once(Pt,u),this.once("error",a),this.once("end",c),this.once("data",l)})},throw:n,return:n,[CF](){return this}}}[yF](){let e=!1,n=()=>(this.pause(),this.removeListener(qg,n),this.removeListener(Pt,n),this.removeListener("end",n),e=!0,{done:!0}),r=()=>{if(e)return n();let i=this.read();return i===null?n():{value:i}};return this.once("end",n),this.once(qg,n),this.once(Pt,n),{next:r,throw:n,return:n,[yF](){return this}}}destroy(e){return this[Pt]?(e?this.emit("error",e):this.emit(Pt),this):(this[Pt]=!0,this[Dt].length=0,this[nn]=0,typeof this.close=="function"&&!this[$h]&&this.close(),e?this.emit("error",e):this.emit(Pt),this)}static isStream(e){return!!e&&(e instanceof t||e instanceof gF||e instanceof lle&&(typeof e.pipe=="function"||typeof e.write=="function"&&typeof e.end=="function"))}};wF.Minipass=Jg});var VF=C(ze=>{"use strict";var Ele=ze&&ze.__createBinding||(Object.create?(function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}):(function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]})),hle=ze&&ze.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),ple=ze&&ze.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&Ele(e,t,n);return hle(e,t),e};Object.defineProperty(ze,"__esModule",{value:!0});ze.PathScurry=ze.Path=ze.PathScurryDarwin=ze.PathScurryPosix=ze.PathScurryWin32=ze.PathScurryBase=ze.PathPosix=ze.PathWin32=ze.PathBase=ze.ChildrenCache=ze.ResolveCache=void 0;var UF=AF(),Jh=require("node:path"),Tle=require("node:url"),qu=require("fs"),Sle=ple(require("node:fs")),Rle=qu.realpathSync.native,Xh=require("node:fs/promises"),DF=LF(),Xu={lstatSync:qu.lstatSync,readdir:qu.readdir,readdirSync:qu.readdirSync,readlinkSync:qu.readlinkSync,realpathSync:Rle,promises:{lstat:Xh.lstat,readdir:Xh.readdir,readlink:Xh.readlink,realpath:Xh.realpath}},BF=t=>!t||t===Xu||t===Sle?Xu:{...Xu,...t,promises:{...Xu.promises,...t.promises||{}}},FF=/^\\\\\?\\([a-z]:)\\?$/i,Ale=t=>t.replace(/\//g,"\\").replace(FF,"$1\\"),mle=/[\\\/]/,Rr=0,HF=1,GF=2,oi=4,WF=6,$F=8,Po=10,kF=12,Sr=15,Vu=~Sr,Qg=16,PF=32,zu=64,Mr=128,zh=256,Kh=512,xF=zu|Mr|Kh,gle=1023,Zg=t=>t.isFile()?$F:t.isDirectory()?oi:t.isSymbolicLink()?Po:t.isCharacterDevice()?GF:t.isBlockDevice()?WF:t.isSocket()?kF:t.isFIFO()?HF:Rr,vF=new Map,ju=t=>{let e=vF.get(t);if(e)return e;let n=t.normalize("NFKD");return vF.set(t,n),n},MF=new Map,jh=t=>{let e=MF.get(t);if(e)return e;let n=ju(t.toLowerCase());return MF.set(t,n),n},Ku=class extends UF.LRUCache{constructor(){super({max:256})}};ze.ResolveCache=Ku;var Qh=class extends UF.LRUCache{constructor(e=16*1024){super({maxSize:e,sizeCalculation:n=>n.length+1})}};ze.ChildrenCache=Qh;var YF=Symbol("PathScurry setAsCwd"),Rn=class{name;root;roots;parent;nocase;isCWD=!1;#e;#t;get dev(){return this.#t}#s;get mode(){return this.#s}#r;get nlink(){return this.#r}#o;get uid(){return this.#o}#m;get gid(){return this.#m}#c;get rdev(){return this.#c}#d;get blksize(){return this.#d}#a;get ino(){return this.#a}#l;get size(){return this.#l}#i;get blocks(){return this.#i}#T;get atimeMs(){return this.#T}#S;get mtimeMs(){return this.#S}#E;get ctimeMs(){return this.#E}#f;get birthtimeMs(){return this.#f}#_;get atime(){return this.#_}#p;get mtime(){return this.#p}#N;get ctime(){return this.#N}#O;get birthtime(){return this.#O}#A;#g;#I;#h;#w;#C;#n;#P;#R;#L;get parentPath(){return(this.parent||this).fullpath()}get path(){return this.parentPath}constructor(e,n=Rr,r,i,s,o,a){this.name=e,this.#A=s?jh(e):ju(e),this.#n=n&gle,this.nocase=s,this.roots=i,this.root=r||this,this.#P=o,this.#I=a.fullpath,this.#w=a.relative,this.#C=a.relativePosix,this.parent=a.parent,this.parent?this.#e=this.parent.#e:this.#e=BF(a.fs)}depth(){return this.#g!==void 0?this.#g:this.parent?this.#g=this.parent.depth()+1:this.#g=0}childrenCache(){return this.#P}resolve(e){if(!e)return this;let n=this.getRootString(e),i=e.substring(n.length).split(this.splitSep);return n?this.getRoot(n).#x(i):this.#x(i)}#x(e){let n=this;for(let r of e)n=n.child(r);return n}children(){let e=this.#P.get(this);if(e)return e;let n=Object.assign([],{provisional:0});return this.#P.set(this,n),this.#n&=~Qg,n}child(e,n){if(e===""||e===".")return this;if(e==="..")return this.parent||this;let r=this.children(),i=this.nocase?jh(e):ju(e);for(let l of r)if(l.#A===i)return l;let s=this.parent?this.sep:"",o=this.#I?this.#I+s+e:void 0,a=this.newChild(e,Rr,{...n,parent:this,fullpath:o});return this.canReaddir()||(a.#n|=Mr),r.push(a),a}relative(){if(this.isCWD)return"";if(this.#w!==void 0)return this.#w;let e=this.name,n=this.parent;if(!n)return this.#w=this.name;let r=n.relative();return r+(!r||!n.parent?"":this.sep)+e}relativePosix(){if(this.sep==="/")return this.relative();if(this.isCWD)return"";if(this.#C!==void 0)return this.#C;let e=this.name,n=this.parent;if(!n)return this.#C=this.fullpathPosix();let r=n.relativePosix();return r+(!r||!n.parent?"":"/")+e}fullpath(){if(this.#I!==void 0)return this.#I;let e=this.name,n=this.parent;if(!n)return this.#I=this.name;let i=n.fullpath()+(n.parent?this.sep:"")+e;return this.#I=i}fullpathPosix(){if(this.#h!==void 0)return this.#h;if(this.sep==="/")return this.#h=this.fullpath();if(!this.parent){let i=this.fullpath().replace(/\\/g,"/");return/^[a-z]:\//i.test(i)?this.#h=`//?/${i}`:this.#h=i}let e=this.parent,n=e.fullpathPosix(),r=n+(!n||!e.parent?"":"/")+this.name;return this.#h=r}isUnknown(){return(this.#n&Sr)===Rr}isType(e){return this[`is${e}`]()}getType(){return this.isUnknown()?"Unknown":this.isDirectory()?"Directory":this.isFile()?"File":this.isSymbolicLink()?"SymbolicLink":this.isFIFO()?"FIFO":this.isCharacterDevice()?"CharacterDevice":this.isBlockDevice()?"BlockDevice":this.isSocket()?"Socket":"Unknown"}isFile(){return(this.#n&Sr)===$F}isDirectory(){return(this.#n&Sr)===oi}isCharacterDevice(){return(this.#n&Sr)===GF}isBlockDevice(){return(this.#n&Sr)===WF}isFIFO(){return(this.#n&Sr)===HF}isSocket(){return(this.#n&Sr)===kF}isSymbolicLink(){return(this.#n&Po)===Po}lstatCached(){return this.#n&PF?this:void 0}readlinkCached(){return this.#R}realpathCached(){return this.#L}readdirCached(){let e=this.children();return e.slice(0,e.provisional)}canReadlink(){if(this.#R)return!0;if(!this.parent)return!1;let e=this.#n&Sr;return!(e!==Rr&&e!==Po||this.#n&zh||this.#n&Mr)}calledReaddir(){return!!(this.#n&Qg)}isENOENT(){return!!(this.#n&Mr)}isNamed(e){return this.nocase?this.#A===jh(e):this.#A===ju(e)}async readlink(){let e=this.#R;if(e)return e;if(this.canReadlink()&&this.parent)try{let n=await this.#e.promises.readlink(this.fullpath()),r=(await this.parent.realpath())?.resolve(n);if(r)return this.#R=r}catch(n){this.#u(n.code);return}}readlinkSync(){let e=this.#R;if(e)return e;if(this.canReadlink()&&this.parent)try{let n=this.#e.readlinkSync(this.fullpath()),r=this.parent.realpathSync()?.resolve(n);if(r)return this.#R=r}catch(n){this.#u(n.code);return}}#v(e){this.#n|=Qg;for(let n=e.provisional;n<e.length;n++){let r=e[n];r&&r.#M()}}#M(){this.#n&Mr||(this.#n=(this.#n|Mr)&Vu,this.#y())}#y(){let e=this.children();e.provisional=0;for(let n of e)n.#M()}#b(){this.#n|=Kh,this.#U()}#U(){if(this.#n&zu)return;let e=this.#n;(e&Sr)===oi&&(e&=Vu),this.#n=e|zu,this.#y()}#B(e=""){e==="ENOTDIR"||e==="EPERM"?this.#U():e==="ENOENT"?this.#M():this.children().provisional=0}#F(e=""){e==="ENOTDIR"?this.parent.#U():e==="ENOENT"&&this.#M()}#u(e=""){let n=this.#n;n|=zh,e==="ENOENT"&&(n|=Mr),(e==="EINVAL"||e==="UNKNOWN")&&(n&=Vu),this.#n=n,e==="ENOTDIR"&&this.parent&&this.parent.#U()}#H(e,n){return this.#D(e,n)||this.#G(e,n)}#G(e,n){let r=Zg(e),i=this.newChild(e.name,r,{parent:this}),s=i.#n&Sr;return s!==oi&&s!==Po&&s!==Rr&&(i.#n|=zu),n.unshift(i),n.provisional++,i}#D(e,n){for(let r=n.provisional;r<n.length;r++){let i=n[r];if((this.nocase?jh(e.name):ju(e.name))===i.#A)return this.#W(e,i,r,n)}}#W(e,n,r,i){let s=n.name;return n.#n=n.#n&Vu|Zg(e),s!==e.name&&(n.name=e.name),r!==i.provisional&&(r===i.length-1?i.pop():i.splice(r,1),i.unshift(n)),i.provisional++,n}async lstat(){if((this.#n&Mr)===0)try{return this.#V(await this.#e.promises.lstat(this.fullpath())),this}catch(e){this.#F(e.code)}}lstatSync(){if((this.#n&Mr)===0)try{return this.#V(this.#e.lstatSync(this.fullpath())),this}catch(e){this.#F(e.code)}}#V(e){let{atime:n,atimeMs:r,birthtime:i,birthtimeMs:s,blksize:o,blocks:a,ctime:l,ctimeMs:c,dev:u,gid:d,ino:E,mode:f,mtime:p,mtimeMs:h,nlink:T,rdev:S,size:I,uid:R}=e;this.#_=n,this.#T=r,this.#O=i,this.#f=s,this.#d=o,this.#i=a,this.#N=l,this.#E=c,this.#t=u,this.#m=d,this.#a=E,this.#s=f,this.#p=p,this.#S=h,this.#r=T,this.#c=S,this.#l=I,this.#o=R;let m=Zg(e);this.#n=this.#n&Vu|m|PF,m!==Rr&&m!==oi&&m!==Po&&(this.#n|=zu)}#k=[];#Y=!1;#q(e){this.#Y=!1;let n=this.#k.slice();this.#k.length=0,n.forEach(r=>r(null,e))}readdirCB(e,n=!1){if(!this.canReaddir()){n?e(null,[]):queueMicrotask(()=>e(null,[]));return}let r=this.children();if(this.calledReaddir()){let s=r.slice(0,r.provisional);n?e(null,s):queueMicrotask(()=>e(null,s));return}if(this.#k.push(e),this.#Y)return;this.#Y=!0;let i=this.fullpath();this.#e.readdir(i,{withFileTypes:!0},(s,o)=>{if(s)this.#B(s.code),r.provisional=0;else{for(let a of o)this.#H(a,r);this.#v(r)}this.#q(r.slice(0,r.provisional))})}#$;async readdir(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let n=this.fullpath();if(this.#$)await this.#$;else{let r=()=>{};this.#$=new Promise(i=>r=i);try{for(let i of await this.#e.promises.readdir(n,{withFileTypes:!0}))this.#H(i,e);this.#v(e)}catch(i){this.#B(i.code),e.provisional=0}this.#$=void 0,r()}return e.slice(0,e.provisional)}readdirSync(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let n=this.fullpath();try{for(let r of this.#e.readdirSync(n,{withFileTypes:!0}))this.#H(r,e);this.#v(e)}catch(r){this.#B(r.code),e.provisional=0}return e.slice(0,e.provisional)}canReaddir(){if(this.#n&xF)return!1;let e=Sr&this.#n;return e===Rr||e===oi||e===Po}shouldWalk(e,n){return(this.#n&oi)===oi&&!(this.#n&xF)&&!e.has(this)&&(!n||n(this))}async realpath(){if(this.#L)return this.#L;if(!((Kh|zh|Mr)&this.#n))try{let e=await this.#e.promises.realpath(this.fullpath());return this.#L=this.resolve(e)}catch{this.#b()}}realpathSync(){if(this.#L)return this.#L;if(!((Kh|zh|Mr)&this.#n))try{let e=this.#e.realpathSync(this.fullpath());return this.#L=this.resolve(e)}catch{this.#b()}}[YF](e){if(e===this)return;e.isCWD=!1,this.isCWD=!0;let n=new Set([]),r=[],i=this;for(;i&&i.parent;)n.add(i),i.#w=r.join(this.sep),i.#C=r.join("/"),i=i.parent,r.push("..");for(i=e;i&&i.parent&&!n.has(i);)i.#w=void 0,i.#C=void 0,i=i.parent}};ze.PathBase=Rn;var Ju=class t extends Rn{sep="\\";splitSep=mle;constructor(e,n=Rr,r,i,s,o,a){super(e,n,r,i,s,o,a)}newChild(e,n=Rr,r={}){return new t(e,n,this.root,this.roots,this.nocase,this.childrenCache(),r)}getRootString(e){return Jh.win32.parse(e).root}getRoot(e){if(e=Ale(e.toUpperCase()),e===this.root.name)return this.root;for(let[n,r]of Object.entries(this.roots))if(this.sameRoot(e,n))return this.roots[e]=r;return this.roots[e]=new ed(e,this).root}sameRoot(e,n=this.root.name){return e=e.toUpperCase().replace(/\//g,"\\").replace(FF,"$1\\"),e===n}};ze.PathWin32=Ju;var Qu=class t extends Rn{splitSep="/";sep="/";constructor(e,n=Rr,r,i,s,o,a){super(e,n,r,i,s,o,a)}getRootString(e){return e.startsWith("/")?"/":""}getRoot(e){return this.root}newChild(e,n=Rr,r={}){return new t(e,n,this.root,this.roots,this.nocase,this.childrenCache(),r)}};ze.PathPosix=Qu;var Zu=class{root;rootPath;roots;cwd;#e;#t;#s;nocase;#r;constructor(e=process.cwd(),n,r,{nocase:i,childrenCacheSize:s=16*1024,fs:o=Xu}={}){this.#r=BF(o),(e instanceof URL||e.startsWith("file://"))&&(e=(0,Tle.fileURLToPath)(e));let a=n.resolve(e);this.roots=Object.create(null),this.rootPath=this.parseRootPath(a),this.#e=new Ku,this.#t=new Ku,this.#s=new Qh(s);let l=a.substring(this.rootPath.length).split(r);if(l.length===1&&!l[0]&&l.pop(),i===void 0)throw new TypeError("must provide nocase setting to PathScurryBase ctor");this.nocase=i,this.root=this.newRoot(this.#r),this.roots[this.rootPath]=this.root;let c=this.root,u=l.length-1,d=n.sep,E=this.rootPath,f=!1;for(let p of l){let h=u--;c=c.child(p,{relative:new Array(h).fill("..").join(d),relativePosix:new Array(h).fill("..").join("/"),fullpath:E+=(f?"":d)+p}),f=!0}this.cwd=c}depth(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.depth()}childrenCache(){return this.#s}resolve(...e){let n="";for(let s=e.length-1;s>=0;s--){let o=e[s];if(!(!o||o===".")&&(n=n?`${o}/${n}`:o,this.isAbsolute(o)))break}let r=this.#e.get(n);if(r!==void 0)return r;let i=this.cwd.resolve(n).fullpath();return this.#e.set(n,i),i}resolvePosix(...e){let n="";for(let s=e.length-1;s>=0;s--){let o=e[s];if(!(!o||o===".")&&(n=n?`${o}/${n}`:o,this.isAbsolute(o)))break}let r=this.#t.get(n);if(r!==void 0)return r;let i=this.cwd.resolve(n).fullpathPosix();return this.#t.set(n,i),i}relative(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relative()}relativePosix(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relativePosix()}basename(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.name}dirname(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),(e.parent||e).fullpath()}async readdir(e=this.cwd,n={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Rn||(n=e,e=this.cwd);let{withFileTypes:r}=n;if(e.canReaddir()){let i=await e.readdir();return r?i:i.map(s=>s.name)}else return[]}readdirSync(e=this.cwd,n={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Rn||(n=e,e=this.cwd);let{withFileTypes:r=!0}=n;return e.canReaddir()?r?e.readdirSync():e.readdirSync().map(i=>i.name):[]}async lstat(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstat()}lstatSync(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstatSync()}async readlink(e=this.cwd,{withFileTypes:n}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Rn||(n=e.withFileTypes,e=this.cwd);let r=await e.readlink();return n?r:r?.fullpath()}readlinkSync(e=this.cwd,{withFileTypes:n}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Rn||(n=e.withFileTypes,e=this.cwd);let r=e.readlinkSync();return n?r:r?.fullpath()}async realpath(e=this.cwd,{withFileTypes:n}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Rn||(n=e.withFileTypes,e=this.cwd);let r=await e.realpath();return n?r:r?.fullpath()}realpathSync(e=this.cwd,{withFileTypes:n}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Rn||(n=e.withFileTypes,e=this.cwd);let r=e.realpathSync();return n?r:r?.fullpath()}async walk(e=this.cwd,n={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Rn||(n=e,e=this.cwd);let{withFileTypes:r=!0,follow:i=!1,filter:s,walkFilter:o}=n,a=[];(!s||s(e))&&a.push(r?e:e.fullpath());let l=new Set,c=(d,E)=>{l.add(d),d.readdirCB((f,p)=>{if(f)return E(f);let h=p.length;if(!h)return E();let T=()=>{--h===0&&E()};for(let S of p)(!s||s(S))&&a.push(r?S:S.fullpath()),i&&S.isSymbolicLink()?S.realpath().then(I=>I?.isUnknown()?I.lstat():I).then(I=>I?.shouldWalk(l,o)?c(I,T):T()):S.shouldWalk(l,o)?c(S,T):T()},!0)},u=e;return new Promise((d,E)=>{c(u,f=>{if(f)return E(f);d(a)})})}walkSync(e=this.cwd,n={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Rn||(n=e,e=this.cwd);let{withFileTypes:r=!0,follow:i=!1,filter:s,walkFilter:o}=n,a=[];(!s||s(e))&&a.push(r?e:e.fullpath());let l=new Set([e]);for(let c of l){let u=c.readdirSync();for(let d of u){(!s||s(d))&&a.push(r?d:d.fullpath());let E=d;if(d.isSymbolicLink()){if(!(i&&(E=d.realpathSync())))continue;E.isUnknown()&&E.lstatSync()}E.shouldWalk(l,o)&&l.add(E)}}return a}[Symbol.asyncIterator](){return this.iterate()}iterate(e=this.cwd,n={}){return typeof e=="string"?e=this.cwd.resolve(e):e instanceof Rn||(n=e,e=this.cwd),this.stream(e,n)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(e=this.cwd,n={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Rn||(n=e,e=this.cwd);let{withFileTypes:r=!0,follow:i=!1,filter:s,walkFilter:o}=n;(!s||s(e))&&(yield r?e:e.fullpath());let a=new Set([e]);for(let l of a){let c=l.readdirSync();for(let u of c){(!s||s(u))&&(yield r?u:u.fullpath());let d=u;if(u.isSymbolicLink()){if(!(i&&(d=u.realpathSync())))continue;d.isUnknown()&&d.lstatSync()}d.shouldWalk(a,o)&&a.add(d)}}}stream(e=this.cwd,n={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Rn||(n=e,e=this.cwd);let{withFileTypes:r=!0,follow:i=!1,filter:s,walkFilter:o}=n,a=new DF.Minipass({objectMode:!0});(!s||s(e))&&a.write(r?e:e.fullpath());let l=new Set,c=[e],u=0,d=()=>{let E=!1;for(;!E;){let f=c.shift();if(!f){u===0&&a.end();return}u++,l.add(f);let p=(T,S,I=!1)=>{if(T)return a.emit("error",T);if(i&&!I){let R=[];for(let m of S)m.isSymbolicLink()&&R.push(m.realpath().then(A=>A?.isUnknown()?A.lstat():A));if(R.length){Promise.all(R).then(()=>p(null,S,!0));return}}for(let R of S)R&&(!s||s(R))&&(a.write(r?R:R.fullpath())||(E=!0));u--;for(let R of S){let m=R.realpathCached()||R;m.shouldWalk(l,o)&&c.push(m)}E&&!a.flowing?a.once("drain",d):h||d()},h=!0;f.readdirCB(p,!0),h=!1}};return d(),a}streamSync(e=this.cwd,n={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Rn||(n=e,e=this.cwd);let{withFileTypes:r=!0,follow:i=!1,filter:s,walkFilter:o}=n,a=new DF.Minipass({objectMode:!0}),l=new Set;(!s||s(e))&&a.write(r?e:e.fullpath());let c=[e],u=0,d=()=>{let E=!1;for(;!E;){let f=c.shift();if(!f){u===0&&a.end();return}u++,l.add(f);let p=f.readdirSync();for(let h of p)(!s||s(h))&&(a.write(r?h:h.fullpath())||(E=!0));u--;for(let h of p){let T=h;if(h.isSymbolicLink()){if(!(i&&(T=h.realpathSync())))continue;T.isUnknown()&&T.lstatSync()}T.shouldWalk(l,o)&&c.push(T)}}E&&!a.flowing&&a.once("drain",d)};return d(),a}chdir(e=this.cwd){let n=this.cwd;this.cwd=typeof e=="string"?this.cwd.resolve(e):e,this.cwd[YF](n)}};ze.PathScurryBase=Zu;var ed=class extends Zu{sep="\\";constructor(e=process.cwd(),n={}){let{nocase:r=!0}=n;super(e,Jh.win32,"\\",{...n,nocase:r}),this.nocase=r;for(let i=this.cwd;i;i=i.parent)i.nocase=this.nocase}parseRootPath(e){return Jh.win32.parse(e).root.toUpperCase()}newRoot(e){return new Ju(this.rootPath,oi,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")||e.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(e)}};ze.PathScurryWin32=ed;var td=class extends Zu{sep="/";constructor(e=process.cwd(),n={}){let{nocase:r=!1}=n;super(e,Jh.posix,"/",{...n,nocase:r}),this.nocase=r}parseRootPath(e){return"/"}newRoot(e){return new Qu(this.rootPath,oi,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")}};ze.PathScurryPosix=td;var Zh=class extends td{constructor(e=process.cwd(),n={}){let{nocase:r=!0}=n;super(e,{...n,nocase:r})}};ze.PathScurryDarwin=Zh;ze.Path=process.platform==="win32"?Ju:Qu;ze.PathScurry=process.platform==="win32"?ed:process.platform==="darwin"?Zh:td});var tI=C(ep=>{"use strict";Object.defineProperty(ep,"__esModule",{value:!0});ep.Pattern=void 0;var Ile=vs(),_le=t=>t.length>=1,Nle=t=>t.length>=1,eI=class t{#e;#t;#s;length;#r;#o;#m;#c;#d;#a;#l=!0;constructor(e,n,r,i){if(!_le(e))throw new TypeError("empty pattern list");if(!Nle(n))throw new TypeError("empty glob list");if(n.length!==e.length)throw new TypeError("mismatched pattern list and glob list lengths");if(this.length=e.length,r<0||r>=this.length)throw new TypeError("index out of range");if(this.#e=e,this.#t=n,this.#s=r,this.#r=i,this.#s===0){if(this.isUNC()){let[s,o,a,l,...c]=this.#e,[u,d,E,f,...p]=this.#t;c[0]===""&&(c.shift(),p.shift());let h=[s,o,a,l,""].join("/"),T=[u,d,E,f,""].join("/");this.#e=[h,...c],this.#t=[T,...p],this.length=this.#e.length}else if(this.isDrive()||this.isAbsolute()){let[s,...o]=this.#e,[a,...l]=this.#t;o[0]===""&&(o.shift(),l.shift());let c=s+"/",u=a+"/";this.#e=[c,...o],this.#t=[u,...l],this.length=this.#e.length}}}pattern(){return this.#e[this.#s]}isString(){return typeof this.#e[this.#s]=="string"}isGlobstar(){return this.#e[this.#s]===Ile.GLOBSTAR}isRegExp(){return this.#e[this.#s]instanceof RegExp}globString(){return this.#m=this.#m||(this.#s===0?this.isAbsolute()?this.#t[0]+this.#t.slice(1).join("/"):this.#t.join("/"):this.#t.slice(this.#s).join("/"))}hasMore(){return this.length>this.#s+1}rest(){return this.#o!==void 0?this.#o:this.hasMore()?(this.#o=new t(this.#e,this.#t,this.#s+1,this.#r),this.#o.#a=this.#a,this.#o.#d=this.#d,this.#o.#c=this.#c,this.#o):this.#o=null}isUNC(){let e=this.#e;return this.#d!==void 0?this.#d:this.#d=this.#r==="win32"&&this.#s===0&&e[0]===""&&e[1]===""&&typeof e[2]=="string"&&!!e[2]&&typeof e[3]=="string"&&!!e[3]}isDrive(){let e=this.#e;return this.#c!==void 0?this.#c:this.#c=this.#r==="win32"&&this.#s===0&&this.length>1&&typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0])}isAbsolute(){let e=this.#e;return this.#a!==void 0?this.#a:this.#a=e[0]===""&&e.length>1||this.isDrive()||this.isUNC()}root(){let e=this.#e[0];return typeof e=="string"&&this.isAbsolute()&&this.#s===0?e:""}checkFollowGlobstar(){return!(this.#s===0||!this.isGlobstar()||!this.#l)}markFollowGlobstar(){return this.#s===0||!this.isGlobstar()||!this.#l?!1:(this.#l=!1,!0)}};ep.Pattern=eI});var JF=C(Wn=>{"use strict";var Ole=Wn&&Wn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Wn,"__esModule",{value:!0});Wn.Minipass=Wn.isWritable=Wn.isReadable=Wn.isStream=void 0;var qF=typeof process=="object"&&process?process:{stdout:null,stderr:null},lI=require("node:events"),KF=Ole(require("node:stream")),Cle=require("node:string_decoder"),yle=t=>!!t&&typeof t=="object"&&(t instanceof ap||t instanceof KF.default||(0,Wn.isReadable)(t)||(0,Wn.isWritable)(t));Wn.isStream=yle;var ble=t=>!!t&&typeof t=="object"&&t instanceof lI.EventEmitter&&typeof t.pipe=="function"&&t.pipe!==KF.default.Writable.prototype.pipe;Wn.isReadable=ble;var wle=t=>!!t&&typeof t=="object"&&t instanceof lI.EventEmitter&&typeof t.write=="function"&&typeof t.end=="function";Wn.isWritable=wle;var Xi=Symbol("EOF"),zi=Symbol("maybeEmitEnd"),Bs=Symbol("emittedEnd"),tp=Symbol("emittingEnd"),nd=Symbol("emittedError"),np=Symbol("closed"),XF=Symbol("read"),rp=Symbol("flush"),zF=Symbol("flushChunk"),Ur=Symbol("encoding"),Nl=Symbol("decoder"),rn=Symbol("flowing"),rd=Symbol("paused"),Ol=Symbol("resume"),sn=Symbol("buffer"),Gn=Symbol("pipes"),on=Symbol("bufferLength"),nI=Symbol("bufferPush"),ip=Symbol("bufferShift"),Ln=Symbol("objectMode"),xt=Symbol("destroyed"),rI=Symbol("error"),iI=Symbol("emitData"),jF=Symbol("emitEnd"),sI=Symbol("emitEnd2"),ai=Symbol("async"),oI=Symbol("abort"),sp=Symbol("aborted"),id=Symbol("signal"),xo=Symbol("dataListeners"),nr=Symbol("discarded"),sd=t=>Promise.resolve().then(t),Lle=t=>t(),Dle=t=>t==="end"||t==="finish"||t==="prefinish",Ple=t=>t instanceof ArrayBuffer||!!t&&typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,xle=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),op=class{src;dest;opts;ondrain;constructor(e,n,r){this.src=e,this.dest=n,this.opts=r,this.ondrain=()=>e[Ol](),this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(e){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},aI=class extends op{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,n,r){super(e,n,r),this.proxyErrors=i=>n.emit("error",i),e.on("error",this.proxyErrors)}},vle=t=>!!t.objectMode,Mle=t=>!t.objectMode&&!!t.encoding&&t.encoding!=="buffer",ap=class extends lI.EventEmitter{[rn]=!1;[rd]=!1;[Gn]=[];[sn]=[];[Ln];[Ur];[ai];[Nl];[Xi]=!1;[Bs]=!1;[tp]=!1;[np]=!1;[nd]=null;[on]=0;[xt]=!1;[id];[sp]=!1;[xo]=0;[nr]=!1;writable=!0;readable=!0;constructor(...e){let n=e[0]||{};if(super(),n.objectMode&&typeof n.encoding=="string")throw new TypeError("Encoding and objectMode may not be used together");vle(n)?(this[Ln]=!0,this[Ur]=null):Mle(n)?(this[Ur]=n.encoding,this[Ln]=!1):(this[Ln]=!1,this[Ur]=null),this[ai]=!!n.async,this[Nl]=this[Ur]?new Cle.StringDecoder(this[Ur]):null,n&&n.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[sn]}),n&&n.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[Gn]});let{signal:r}=n;r&&(this[id]=r,r.aborted?this[oI]():r.addEventListener("abort",()=>this[oI]()))}get bufferLength(){return this[on]}get encoding(){return this[Ur]}set encoding(e){throw new Error("Encoding must be set at instantiation time")}setEncoding(e){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[Ln]}set objectMode(e){throw new Error("objectMode must be set at instantiation time")}get async(){return this[ai]}set async(e){this[ai]=this[ai]||!!e}[oI](){this[sp]=!0,this.emit("abort",this[id]?.reason),this.destroy(this[id]?.reason)}get aborted(){return this[sp]}set aborted(e){}write(e,n,r){if(this[sp])return!1;if(this[Xi])throw new Error("write after end");if(this[xt])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof n=="function"&&(r=n,n="utf8"),n||(n="utf8");let i=this[ai]?sd:Lle;if(!this[Ln]&&!Buffer.isBuffer(e)){if(xle(e))e=Buffer.from(e.buffer,e.byteOffset,e.byteLength);else if(Ple(e))e=Buffer.from(e);else if(typeof e!="string")throw new Error("Non-contiguous data written to non-objectMode stream")}return this[Ln]?(this[rn]&&this[on]!==0&&this[rp](!0),this[rn]?this.emit("data",e):this[nI](e),this[on]!==0&&this.emit("readable"),r&&i(r),this[rn]):e.length?(typeof e=="string"&&!(n===this[Ur]&&!this[Nl]?.lastNeed)&&(e=Buffer.from(e,n)),Buffer.isBuffer(e)&&this[Ur]&&(e=this[Nl].write(e)),this[rn]&&this[on]!==0&&this[rp](!0),this[rn]?this.emit("data",e):this[nI](e),this[on]!==0&&this.emit("readable"),r&&i(r),this[rn]):(this[on]!==0&&this.emit("readable"),r&&i(r),this[rn])}read(e){if(this[xt])return null;if(this[nr]=!1,this[on]===0||e===0||e&&e>this[on])return this[zi](),null;this[Ln]&&(e=null),this[sn].length>1&&!this[Ln]&&(this[sn]=[this[Ur]?this[sn].join(""):Buffer.concat(this[sn],this[on])]);let n=this[XF](e||null,this[sn][0]);return this[zi](),n}[XF](e,n){if(this[Ln])this[ip]();else{let r=n;e===r.length||e===null?this[ip]():typeof r=="string"?(this[sn][0]=r.slice(e),n=r.slice(0,e),this[on]-=e):(this[sn][0]=r.subarray(e),n=r.subarray(0,e),this[on]-=e)}return this.emit("data",n),!this[sn].length&&!this[Xi]&&this.emit("drain"),n}end(e,n,r){return typeof e=="function"&&(r=e,e=void 0),typeof n=="function"&&(r=n,n="utf8"),e!==void 0&&this.write(e,n),r&&this.once("end",r),this[Xi]=!0,this.writable=!1,(this[rn]||!this[rd])&&this[zi](),this}[Ol](){this[xt]||(!this[xo]&&!this[Gn].length&&(this[nr]=!0),this[rd]=!1,this[rn]=!0,this.emit("resume"),this[sn].length?this[rp]():this[Xi]?this[zi]():this.emit("drain"))}resume(){return this[Ol]()}pause(){this[rn]=!1,this[rd]=!0,this[nr]=!1}get destroyed(){return this[xt]}get flowing(){return this[rn]}get paused(){return this[rd]}[nI](e){this[Ln]?this[on]+=1:this[on]+=e.length,this[sn].push(e)}[ip](){return this[Ln]?this[on]-=1:this[on]-=this[sn][0].length,this[sn].shift()}[rp](e=!1){do;while(this[zF](this[ip]())&&this[sn].length);!e&&!this[sn].length&&!this[Xi]&&this.emit("drain")}[zF](e){return this.emit("data",e),this[rn]}pipe(e,n){if(this[xt])return e;this[nr]=!1;let r=this[Bs];return n=n||{},e===qF.stdout||e===qF.stderr?n.end=!1:n.end=n.end!==!1,n.proxyErrors=!!n.proxyErrors,r?n.end&&e.end():(this[Gn].push(n.proxyErrors?new aI(this,e,n):new op(this,e,n)),this[ai]?sd(()=>this[Ol]()):this[Ol]()),e}unpipe(e){let n=this[Gn].find(r=>r.dest===e);n&&(this[Gn].length===1?(this[rn]&&this[xo]===0&&(this[rn]=!1),this[Gn]=[]):this[Gn].splice(this[Gn].indexOf(n),1),n.unpipe())}addListener(e,n){return this.on(e,n)}on(e,n){let r=super.on(e,n);if(e==="data")this[nr]=!1,this[xo]++,!this[Gn].length&&!this[rn]&&this[Ol]();else if(e==="readable"&&this[on]!==0)super.emit("readable");else if(Dle(e)&&this[Bs])super.emit(e),this.removeAllListeners(e);else if(e==="error"&&this[nd]){let i=n;this[ai]?sd(()=>i.call(this,this[nd])):i.call(this,this[nd])}return r}removeListener(e,n){return this.off(e,n)}off(e,n){let r=super.off(e,n);return e==="data"&&(this[xo]=this.listeners("data").length,this[xo]===0&&!this[nr]&&!this[Gn].length&&(this[rn]=!1)),r}removeAllListeners(e){let n=super.removeAllListeners(e);return(e==="data"||e===void 0)&&(this[xo]=0,!this[nr]&&!this[Gn].length&&(this[rn]=!1)),n}get emittedEnd(){return this[Bs]}[zi](){!this[tp]&&!this[Bs]&&!this[xt]&&this[sn].length===0&&this[Xi]&&(this[tp]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[np]&&this.emit("close"),this[tp]=!1)}emit(e,...n){let r=n[0];if(e!=="error"&&e!=="close"&&e!==xt&&this[xt])return!1;if(e==="data")return!this[Ln]&&!r?!1:this[ai]?(sd(()=>this[iI](r)),!0):this[iI](r);if(e==="end")return this[jF]();if(e==="close"){if(this[np]=!0,!this[Bs]&&!this[xt])return!1;let s=super.emit("close");return this.removeAllListeners("close"),s}else if(e==="error"){this[nd]=r,super.emit(rI,r);let s=!this[id]||this.listeners("error").length?super.emit("error",r):!1;return this[zi](),s}else if(e==="resume"){let s=super.emit("resume");return this[zi](),s}else if(e==="finish"||e==="prefinish"){let s=super.emit(e);return this.removeAllListeners(e),s}let i=super.emit(e,...n);return this[zi](),i}[iI](e){for(let r of this[Gn])r.dest.write(e)===!1&&this.pause();let n=this[nr]?!1:super.emit("data",e);return this[zi](),n}[jF](){return this[Bs]?!1:(this[Bs]=!0,this.readable=!1,this[ai]?(sd(()=>this[sI]()),!0):this[sI]())}[sI](){if(this[Nl]){let n=this[Nl].end();if(n){for(let r of this[Gn])r.dest.write(n);this[nr]||super.emit("data",n)}}for(let n of this[Gn])n.end();let e=super.emit("end");return this.removeAllListeners("end"),e}async collect(){let e=Object.assign([],{dataLength:0});this[Ln]||(e.dataLength=0);let n=this.promise();return this.on("data",r=>{e.push(r),this[Ln]||(e.dataLength+=r.length)}),await n,e}async concat(){if(this[Ln])throw new Error("cannot concat in objectMode");let e=await this.collect();return this[Ur]?e.join(""):Buffer.concat(e,e.dataLength)}async promise(){return new Promise((e,n)=>{this.on(xt,()=>n(new Error("stream destroyed"))),this.on("error",r=>n(r)),this.on("end",()=>e())})}[Symbol.asyncIterator](){this[nr]=!1;let e=!1,n=async()=>(this.pause(),e=!0,{value:void 0,done:!0});return{next:()=>{if(e)return n();let i=this.read();if(i!==null)return Promise.resolve({done:!1,value:i});if(this[Xi])return n();let s,o,a=d=>{this.off("data",l),this.off("end",c),this.off(xt,u),n(),o(d)},l=d=>{this.off("error",a),this.off("end",c),this.off(xt,u),this.pause(),s({value:d,done:!!this[Xi]})},c=()=>{this.off("error",a),this.off("data",l),this.off(xt,u),n(),s({done:!0,value:void 0})},u=()=>a(new Error("stream destroyed"));return new Promise((d,E)=>{o=E,s=d,this.once(xt,u),this.once("error",a),this.once("end",c),this.once("data",l)})},throw:n,return:n,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[nr]=!1;let e=!1,n=()=>(this.pause(),this.off(rI,n),this.off(xt,n),this.off("end",n),e=!0,{done:!0,value:void 0}),r=()=>{if(e)return n();let i=this.read();return i===null?n():{done:!1,value:i}};return this.once("end",n),this.once(rI,n),this.once(xt,n),{next:r,throw:n,return:n,[Symbol.iterator](){return this}}}destroy(e){if(this[xt])return e?this.emit("error",e):this.emit(xt),this;this[xt]=!0,this[nr]=!0,this[sn].length=0,this[on]=0;let n=this;return typeof n.close=="function"&&!this[np]&&n.close(),e?this.emit("error",e):this.emit(xt),this}static get isStream(){return Wn.isStream}};Wn.Minipass=ap});var uI=C(lp=>{"use strict";Object.defineProperty(lp,"__esModule",{value:!0});lp.Ignore=void 0;var QF=vs(),Ule=tI(),Ble=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",cI=class{relative;relativeChildren;absolute;absoluteChildren;platform;mmopts;constructor(e,{nobrace:n,nocase:r,noext:i,noglobstar:s,platform:o=Ble}){this.relative=[],this.absolute=[],this.relativeChildren=[],this.absoluteChildren=[],this.platform=o,this.mmopts={dot:!0,nobrace:n,nocase:r,noext:i,noglobstar:s,optimizationLevel:2,platform:o,nocomment:!0,nonegate:!0};for(let a of e)this.add(a)}add(e){let n=new QF.Minimatch(e,this.mmopts);for(let r=0;r<n.set.length;r++){let i=n.set[r],s=n.globParts[r];if(!i||!s)throw new Error("invalid pattern object");for(;i[0]==="."&&s[0]===".";)i.shift(),s.shift();let o=new Ule.Pattern(i,s,0,this.platform),a=new QF.Minimatch(o.globString(),this.mmopts),l=s[s.length-1]==="**",c=o.isAbsolute();c?this.absolute.push(a):this.relative.push(a),l&&(c?this.absoluteChildren.push(a):this.relativeChildren.push(a))}}ignored(e){let n=e.fullpath(),r=`${n}/`,i=e.relative()||".",s=`${i}/`;for(let o of this.relative)if(o.match(i)||o.match(s))return!0;for(let o of this.absolute)if(o.match(n)||o.match(r))return!0;return!1}childrenIgnored(e){let n=e.fullpath()+"/",r=(e.relative()||".")+"/";for(let i of this.relativeChildren)if(i.match(r))return!0;for(let i of this.absoluteChildren)if(i.match(n))return!0;return!1}};lp.Ignore=cI});var e1=C(li=>{"use strict";Object.defineProperty(li,"__esModule",{value:!0});li.Processor=li.SubWalks=li.MatchRecord=li.HasWalkedCache=void 0;var ZF=vs(),cp=class t{store;constructor(e=new Map){this.store=e}copy(){return new t(new Map(this.store))}hasWalked(e,n){return this.store.get(e.fullpath())?.has(n.globString())}storeWalked(e,n){let r=e.fullpath(),i=this.store.get(r);i?i.add(n.globString()):this.store.set(r,new Set([n.globString()]))}};li.HasWalkedCache=cp;var up=class{store=new Map;add(e,n,r){let i=(n?2:0)|(r?1:0),s=this.store.get(e);this.store.set(e,s===void 0?i:i&s)}entries(){return[...this.store.entries()].map(([e,n])=>[e,!!(n&2),!!(n&1)])}};li.MatchRecord=up;var dp=class{store=new Map;add(e,n){if(!e.canReaddir())return;let r=this.store.get(e);r?r.find(i=>i.globString()===n.globString())||r.push(n):this.store.set(e,[n])}get(e){let n=this.store.get(e);if(!n)throw new Error("attempting to walk unknown path");return n}entries(){return this.keys().map(e=>[e,this.store.get(e)])}keys(){return[...this.store.keys()].filter(e=>e.canReaddir())}};li.SubWalks=dp;var dI=class t{hasWalkedCache;matches=new up;subwalks=new dp;patterns;follow;dot;opts;constructor(e,n){this.opts=e,this.follow=!!e.follow,this.dot=!!e.dot,this.hasWalkedCache=n?n.copy():new cp}processPatterns(e,n){this.patterns=n;let r=n.map(i=>[e,i]);for(let[i,s]of r){this.hasWalkedCache.storeWalked(i,s);let o=s.root(),a=s.isAbsolute()&&this.opts.absolute!==!1;if(o){i=i.resolve(o==="/"&&this.opts.root!==void 0?this.opts.root:o);let d=s.rest();if(d)s=d;else{this.matches.add(i,!0,!1);continue}}if(i.isENOENT())continue;let l,c,u=!1;for(;typeof(l=s.pattern())=="string"&&(c=s.rest());)i=i.resolve(l),s=c,u=!0;if(l=s.pattern(),c=s.rest(),u){if(this.hasWalkedCache.hasWalked(i,s))continue;this.hasWalkedCache.storeWalked(i,s)}if(typeof l=="string"){let d=l===".."||l===""||l===".";this.matches.add(i.resolve(l),a,d);continue}else if(l===ZF.GLOBSTAR){(!i.isSymbolicLink()||this.follow||s.checkFollowGlobstar())&&this.subwalks.add(i,s);let d=c?.pattern(),E=c?.rest();if(!c||(d===""||d===".")&&!E)this.matches.add(i,a,d===""||d===".");else if(d===".."){let f=i.parent||i;E?this.hasWalkedCache.hasWalked(f,E)||this.subwalks.add(f,E):this.matches.add(f,a,!0)}}else l instanceof RegExp&&this.subwalks.add(i,s)}return this}subwalkTargets(){return this.subwalks.keys()}child(){return new t(this.opts,this.hasWalkedCache)}filterEntries(e,n){let r=this.subwalks.get(e),i=this.child();for(let s of n)for(let o of r){let a=o.isAbsolute(),l=o.pattern(),c=o.rest();l===ZF.GLOBSTAR?i.testGlobstar(s,o,c,a):l instanceof RegExp?i.testRegExp(s,l,c,a):i.testString(s,l,c,a)}return i}testGlobstar(e,n,r,i){if((this.dot||!e.name.startsWith("."))&&(n.hasMore()||this.matches.add(e,i,!1),e.canReaddir()&&(this.follow||!e.isSymbolicLink()?this.subwalks.add(e,n):e.isSymbolicLink()&&(r&&n.checkFollowGlobstar()?this.subwalks.add(e,r):n.markFollowGlobstar()&&this.subwalks.add(e,n)))),r){let s=r.pattern();if(typeof s=="string"&&s!==".."&&s!==""&&s!==".")this.testString(e,s,r.rest(),i);else if(s===".."){let o=e.parent||e;this.subwalks.add(o,r)}else s instanceof RegExp&&this.testRegExp(e,s,r.rest(),i)}}testRegExp(e,n,r,i){n.test(e.name)&&(r?this.subwalks.add(e,r):this.matches.add(e,i,!1))}testString(e,n,r,i){e.isNamed(n)&&(r?this.subwalks.add(e,r):this.matches.add(e,i,!1))}};li.Processor=dI});var r1=C(Fs=>{"use strict";Object.defineProperty(Fs,"__esModule",{value:!0});Fs.GlobStream=Fs.GlobWalker=Fs.GlobUtil=void 0;var Fle=JF(),t1=uI(),n1=e1(),Hle=(t,e)=>typeof t=="string"?new t1.Ignore([t],e):Array.isArray(t)?new t1.Ignore(t,e):t,od=class{path;patterns;opts;seen=new Set;paused=!1;aborted=!1;#e=[];#t;#s;signal;maxDepth;includeChildMatches;constructor(e,n,r){if(this.patterns=e,this.path=n,this.opts=r,this.#s=!r.posix&&r.platform==="win32"?"\\":"/",this.includeChildMatches=r.includeChildMatches!==!1,(r.ignore||!this.includeChildMatches)&&(this.#t=Hle(r.ignore??[],r),!this.includeChildMatches&&typeof this.#t.add!="function")){let i="cannot ignore child matches, ignore lacks add() method.";throw new Error(i)}this.maxDepth=r.maxDepth||1/0,r.signal&&(this.signal=r.signal,this.signal.addEventListener("abort",()=>{this.#e.length=0}))}#r(e){return this.seen.has(e)||!!this.#t?.ignored?.(e)}#o(e){return!!this.#t?.childrenIgnored?.(e)}pause(){this.paused=!0}resume(){if(this.signal?.aborted)return;this.paused=!1;let e;for(;!this.paused&&(e=this.#e.shift());)e()}onResume(e){this.signal?.aborted||(this.paused?this.#e.push(e):e())}async matchCheck(e,n){if(n&&this.opts.nodir)return;let r;if(this.opts.realpath){if(r=e.realpathCached()||await e.realpath(),!r)return;e=r}let s=e.isUnknown()||this.opts.stat?await e.lstat():e;if(this.opts.follow&&this.opts.nodir&&s?.isSymbolicLink()){let o=await s.realpath();o&&(o.isUnknown()||this.opts.stat)&&await o.lstat()}return this.matchCheckTest(s,n)}matchCheckTest(e,n){return e&&(this.maxDepth===1/0||e.depth()<=this.maxDepth)&&(!n||e.canReaddir())&&(!this.opts.nodir||!e.isDirectory())&&(!this.opts.nodir||!this.opts.follow||!e.isSymbolicLink()||!e.realpathCached()?.isDirectory())&&!this.#r(e)?e:void 0}matchCheckSync(e,n){if(n&&this.opts.nodir)return;let r;if(this.opts.realpath){if(r=e.realpathCached()||e.realpathSync(),!r)return;e=r}let s=e.isUnknown()||this.opts.stat?e.lstatSync():e;if(this.opts.follow&&this.opts.nodir&&s?.isSymbolicLink()){let o=s.realpathSync();o&&(o?.isUnknown()||this.opts.stat)&&o.lstatSync()}return this.matchCheckTest(s,n)}matchFinish(e,n){if(this.#r(e))return;if(!this.includeChildMatches&&this.#t?.add){let s=`${e.relativePosix()}/**`;this.#t.add(s)}let r=this.opts.absolute===void 0?n:this.opts.absolute;this.seen.add(e);let i=this.opts.mark&&e.isDirectory()?this.#s:"";if(this.opts.withFileTypes)this.matchEmit(e);else if(r){let s=this.opts.posix?e.fullpathPosix():e.fullpath();this.matchEmit(s+i)}else{let s=this.opts.posix?e.relativePosix():e.relative(),o=this.opts.dotRelative&&!s.startsWith(".."+this.#s)?"."+this.#s:"";this.matchEmit(s?o+s+i:"."+i)}}async match(e,n,r){let i=await this.matchCheck(e,r);i&&this.matchFinish(i,n)}matchSync(e,n,r){let i=this.matchCheckSync(e,r);i&&this.matchFinish(i,n)}walkCB(e,n,r){this.signal?.aborted&&r(),this.walkCB2(e,n,new n1.Processor(this.opts),r)}walkCB2(e,n,r,i){if(this.#o(e))return i();if(this.signal?.aborted&&i(),this.paused){this.onResume(()=>this.walkCB2(e,n,r,i));return}r.processPatterns(e,n);let s=1,o=()=>{--s===0&&i()};for(let[a,l,c]of r.matches.entries())this.#r(a)||(s++,this.match(a,l,c).then(()=>o()));for(let a of r.subwalkTargets()){if(this.maxDepth!==1/0&&a.depth()>=this.maxDepth)continue;s++;let l=a.readdirCached();a.calledReaddir()?this.walkCB3(a,l,r,o):a.readdirCB((c,u)=>this.walkCB3(a,u,r,o),!0)}o()}walkCB3(e,n,r,i){r=r.filterEntries(e,n);let s=1,o=()=>{--s===0&&i()};for(let[a,l,c]of r.matches.entries())this.#r(a)||(s++,this.match(a,l,c).then(()=>o()));for(let[a,l]of r.subwalks.entries())s++,this.walkCB2(a,l,r.child(),o);o()}walkCBSync(e,n,r){this.signal?.aborted&&r(),this.walkCB2Sync(e,n,new n1.Processor(this.opts),r)}walkCB2Sync(e,n,r,i){if(this.#o(e))return i();if(this.signal?.aborted&&i(),this.paused){this.onResume(()=>this.walkCB2Sync(e,n,r,i));return}r.processPatterns(e,n);let s=1,o=()=>{--s===0&&i()};for(let[a,l,c]of r.matches.entries())this.#r(a)||this.matchSync(a,l,c);for(let a of r.subwalkTargets()){if(this.maxDepth!==1/0&&a.depth()>=this.maxDepth)continue;s++;let l=a.readdirSync();this.walkCB3Sync(a,l,r,o)}o()}walkCB3Sync(e,n,r,i){r=r.filterEntries(e,n);let s=1,o=()=>{--s===0&&i()};for(let[a,l,c]of r.matches.entries())this.#r(a)||this.matchSync(a,l,c);for(let[a,l]of r.subwalks.entries())s++,this.walkCB2Sync(a,l,r.child(),o);o()}};Fs.GlobUtil=od;var fI=class extends od{matches=new Set;constructor(e,n,r){super(e,n,r)}matchEmit(e){this.matches.add(e)}async walk(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&await this.path.lstat(),await new Promise((e,n)=>{this.walkCB(this.path,this.patterns,()=>{this.signal?.aborted?n(this.signal.reason):e(this.matches)})}),this.matches}walkSync(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>{if(this.signal?.aborted)throw this.signal.reason}),this.matches}};Fs.GlobWalker=fI;var EI=class extends od{results;constructor(e,n,r){super(e,n,r),this.results=new Fle.Minipass({signal:this.signal,objectMode:!0}),this.results.on("drain",()=>this.resume()),this.results.on("resume",()=>this.resume())}matchEmit(e){this.results.write(e),this.results.flowing||this.pause()}stream(){let e=this.path;return e.isUnknown()?e.lstat().then(()=>{this.walkCB(e,this.patterns,()=>this.results.end())}):this.walkCB(e,this.patterns,()=>this.results.end()),this.results}streamSync(){return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>this.results.end()),this.results}};Fs.GlobStream=EI});var pI=C(hp=>{"use strict";Object.defineProperty(hp,"__esModule",{value:!0});hp.Glob=void 0;var Gle=vs(),Wle=require("node:url"),fp=VF(),$le=tI(),Ep=r1(),kle=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",hI=class{absolute;cwd;root;dot;dotRelative;follow;ignore;magicalBraces;mark;matchBase;maxDepth;nobrace;nocase;nodir;noext;noglobstar;pattern;platform;realpath;scurry;stat;signal;windowsPathsNoEscape;withFileTypes;includeChildMatches;opts;patterns;constructor(e,n){if(!n)throw new TypeError("glob options required");if(this.withFileTypes=!!n.withFileTypes,this.signal=n.signal,this.follow=!!n.follow,this.dot=!!n.dot,this.dotRelative=!!n.dotRelative,this.nodir=!!n.nodir,this.mark=!!n.mark,n.cwd?(n.cwd instanceof URL||n.cwd.startsWith("file://"))&&(n.cwd=(0,Wle.fileURLToPath)(n.cwd)):this.cwd="",this.cwd=n.cwd||"",this.root=n.root,this.magicalBraces=!!n.magicalBraces,this.nobrace=!!n.nobrace,this.noext=!!n.noext,this.realpath=!!n.realpath,this.absolute=n.absolute,this.includeChildMatches=n.includeChildMatches!==!1,this.noglobstar=!!n.noglobstar,this.matchBase=!!n.matchBase,this.maxDepth=typeof n.maxDepth=="number"?n.maxDepth:1/0,this.stat=!!n.stat,this.ignore=n.ignore,this.withFileTypes&&this.absolute!==void 0)throw new Error("cannot set absolute and withFileTypes:true");if(typeof e=="string"&&(e=[e]),this.windowsPathsNoEscape=!!n.windowsPathsNoEscape||n.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(e=e.map(l=>l.replace(/\\/g,"/"))),this.matchBase){if(n.noglobstar)throw new TypeError("base matching requires globstar");e=e.map(l=>l.includes("/")?l:`./**/${l}`)}if(this.pattern=e,this.platform=n.platform||kle,this.opts={...n,platform:this.platform},n.scurry){if(this.scurry=n.scurry,n.nocase!==void 0&&n.nocase!==n.scurry.nocase)throw new Error("nocase option contradicts provided scurry option")}else{let l=n.platform==="win32"?fp.PathScurryWin32:n.platform==="darwin"?fp.PathScurryDarwin:n.platform?fp.PathScurryPosix:fp.PathScurry;this.scurry=new l(this.cwd,{nocase:n.nocase,fs:n.fs})}this.nocase=this.scurry.nocase;let r=this.platform==="darwin"||this.platform==="win32",i={...n,dot:this.dot,matchBase:this.matchBase,nobrace:this.nobrace,nocase:this.nocase,nocaseMagicOnly:r,nocomment:!0,noext:this.noext,nonegate:!0,optimizationLevel:2,platform:this.platform,windowsPathsNoEscape:this.windowsPathsNoEscape,debug:!!this.opts.debug},s=this.pattern.map(l=>new Gle.Minimatch(l,i)),[o,a]=s.reduce((l,c)=>(l[0].push(...c.set),l[1].push(...c.globParts),l),[[],[]]);this.patterns=o.map((l,c)=>{let u=a[c];if(!u)throw new Error("invalid pattern object");return new $le.Pattern(l,u,0,this.platform)})}async walk(){return[...await new Ep.GlobWalker(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walk()]}walkSync(){return[...new Ep.GlobWalker(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walkSync()]}stream(){return new Ep.GlobStream(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).stream()}streamSync(){return new Ep.GlobStream(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).streamSync()}iterateSync(){return this.streamSync()[Symbol.iterator]()}[Symbol.iterator](){return this.iterateSync()}iterate(){return this.stream()[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterate()}};hp.Glob=hI});var TI=C(pp=>{"use strict";Object.defineProperty(pp,"__esModule",{value:!0});pp.hasMagic=void 0;var Yle=vs(),Vle=(t,e={})=>{Array.isArray(t)||(t=[t]);for(let n of t)if(new Yle.Minimatch(n,e).hasMagic())return!0;return!1};pp.hasMagic=Vle});var a1=C(Me=>{"use strict";Object.defineProperty(Me,"__esModule",{value:!0});Me.glob=Me.sync=Me.iterate=Me.iterateSync=Me.stream=Me.streamSync=Me.Ignore=Me.hasMagic=Me.Glob=Me.unescape=Me.escape=void 0;Me.globStreamSync=ad;Me.globStream=SI;Me.globSync=RI;Me.globIterateSync=ld;Me.globIterate=AI;var i1=vs(),vo=pI(),qle=TI(),o1=vs();Object.defineProperty(Me,"escape",{enumerable:!0,get:function(){return o1.escape}});Object.defineProperty(Me,"unescape",{enumerable:!0,get:function(){return o1.unescape}});var Xle=pI();Object.defineProperty(Me,"Glob",{enumerable:!0,get:function(){return Xle.Glob}});var zle=TI();Object.defineProperty(Me,"hasMagic",{enumerable:!0,get:function(){return zle.hasMagic}});var jle=uI();Object.defineProperty(Me,"Ignore",{enumerable:!0,get:function(){return jle.Ignore}});function ad(t,e={}){return new vo.Glob(t,e).streamSync()}function SI(t,e={}){return new vo.Glob(t,e).stream()}function RI(t,e={}){return new vo.Glob(t,e).walkSync()}async function s1(t,e={}){return new vo.Glob(t,e).walk()}function ld(t,e={}){return new vo.Glob(t,e).iterateSync()}function AI(t,e={}){return new vo.Glob(t,e).iterate()}Me.streamSync=ad;Me.stream=Object.assign(SI,{sync:ad});Me.iterateSync=ld;Me.iterate=Object.assign(AI,{sync:ld});Me.sync=Object.assign(RI,{stream:ad,iterate:ld});Me.glob=Object.assign(s1,{glob:s1,globSync:RI,sync:Me.sync,globStream:SI,stream:Me.stream,globStreamSync:ad,streamSync:Me.streamSync,globIterate:AI,iterate:Me.iterate,globIterateSync:ld,iterateSync:Me.iterateSync,Glob:vo.Glob,hasMagic:qle.hasMagic,escape:i1.escape,unescape:i1.unescape});Me.glob.glob=Me.glob});var d1=C((gMe,u1)=>{var c1=PA(),Cl=require("path"),mI=pU(),Kle=LB(),Jle=WB(),Qle=zB(),Zle=a1(),Mo=u1.exports={},l1=/[\/\\]/g,ece=function(t,e){var n=[];return mI(t).forEach(function(r){var i=r.indexOf("!")===0;i&&(r=r.slice(1));var s=e(r);i?n=Kle(n,s):n=Jle(n,s)}),n};Mo.exists=function(){var t=Cl.join.apply(Cl,arguments);return c1.existsSync(t)};Mo.expand=function(...t){var e=Qle(t[0])?t.shift():{},n=Array.isArray(t[0])?t[0]:t;if(n.length===0)return[];var r=ece(n,function(i){return Zle.sync(i,e)});return e.filter&&(r=r.filter(function(i){i=Cl.join(e.cwd||"",i);try{return typeof e.filter=="function"?e.filter(i):c1.statSync(i)[e.filter]()}catch{return!1}})),r};Mo.expandMapping=function(t,e,n){n=Object.assign({rename:function(s,o){return Cl.join(s||"",o)}},n);var r=[],i={};return Mo.expand(n,t).forEach(function(s){var o=s;n.flatten&&(o=Cl.basename(o)),n.ext&&(o=o.replace(/(\.[^\/]*)?$/,n.ext));var a=n.rename(e,o,n);n.cwd&&(s=Cl.join(n.cwd,s)),a=a.replace(l1,"/"),s=s.replace(l1,"/"),i[a]?i[a].src.push(s):(r.push({src:[s],dest:a}),i[a]=r[r.length-1])}),r};Mo.normalizeFilesArray=function(t){var e=[];return t.forEach(function(n){var r;("src"in n||"dest"in n)&&e.push(n)}),e.length===0?[]:(e=_(e).chain().forEach(function(n){!("src"in n)||!n.src||(Array.isArray(n.src)?n.src=mI(n.src):n.src=[n.src])}).map(function(n){var r=Object.assign({},n);if(delete r.src,delete r.dest,n.expand)return Mo.expandMapping(n.src,n.dest,r).map(function(s){var o=Object.assign({},n);return o.orig=Object.assign({},n),o.src=s.src,o.dest=s.dest,["expand","cwd","flatten","rename","ext"].forEach(function(a){delete o[a]}),o});var i=Object.assign({},n);return i.orig=Object.assign({},n),"src"in i&&Object.defineProperty(i,"src",{enumerable:!0,get:function s(){var o;return"result"in s||(o=n.src,o=Array.isArray(o)?mI(o):[o],s.result=Mo.expand(r,o)),s.result}}),"dest"in i&&(i.dest=n.dest),i}).flatten().value(),e)}});var yl=C((_Me,h1)=>{var gI=PA(),f1=require("path"),tce=LE(),nce=RD(),E1=nm(),rce=QP(),IMe=require("stream").Stream,ice=sU().PassThrough,rr=h1.exports={};rr.file=d1();rr.collectStream=function(t,e){var n=[],r=0;t.on("error",e),t.on("data",function(i){n.push(i),r+=i.length}),t.on("end",function(){var i=Buffer.alloc(r),s=0;n.forEach(function(o){o.copy(i,s),s+=o.length}),e(null,i)})};rr.dateify=function(t){return t=t||new Date,t instanceof Date?t=t:typeof t=="string"?t=new Date(t):t=new Date,t};rr.defaults=function(t,e,n){var r=arguments;return r[0]=r[0]||{},rce(...r)};rr.isStream=function(t){return tce(t)};rr.lazyReadStream=function(t){return new nce.Readable(function(){return gI.createReadStream(t)})};rr.normalizeInputSource=function(t){return t===null?Buffer.alloc(0):typeof t=="string"?Buffer.from(t):rr.isStream(t)?t.pipe(new ice):t};rr.sanitizePath=function(t){return E1(t,!1).replace(/^\w+:/,"").replace(/^(\.\.\/|\/)+/,"")};rr.trailingSlashIt=function(t){return t.slice(-1)!=="/"?t+"/":t};rr.unixifyPath=function(t){return E1(t,!1).replace(/^\w+:/,"")};rr.walkdir=function(t,e,n){var r=[];typeof e=="function"&&(n=e,e=t),gI.readdir(t,function(i,s){var o=0,a,l;if(i)return n(i);(function c(){if(a=s[o++],!a)return n(null,r);l=f1.join(t,a),gI.stat(l,function(u,d){r.push({path:l,relative:f1.relative(e,l).replace(/\\/g,"/"),stats:d}),d&&d.isDirectory()?rr.walkdir(l,e,function(E,f){if(E)return n(E);f.forEach(function(p){r.push(p)}),c()}):c()})})()})}});var R1=C((T1,S1)=>{var sce=require("util"),oce={ABORTED:"archive was aborted",DIRECTORYDIRPATHREQUIRED:"diretory dirpath argument must be a non-empty string value",DIRECTORYFUNCTIONINVALIDDATA:"invalid data returned by directory custom data function",ENTRYNAMEREQUIRED:"entry name must be a non-empty string value",FILEFILEPATHREQUIRED:"file filepath argument must be a non-empty string value",FINALIZING:"archive already finalizing",QUEUECLOSED:"queue closed",NOENDMETHOD:"no suitable finalize/end method defined by module",DIRECTORYNOTSUPPORTED:"support for directory entries not defined by module",FORMATSET:"archive format already set",INPUTSTEAMBUFFERREQUIRED:"input source must be valid Stream or Buffer instance",MODULESET:"module already set",SYMLINKNOTSUPPORTED:"support for symlink entries not defined by module",SYMLINKFILEPATHREQUIRED:"symlink filepath argument must be a non-empty string value",SYMLINKTARGETREQUIRED:"symlink target argument must be a non-empty string value",ENTRYNOTSUPPORTED:"entry not supported"};function p1(t,e){Error.captureStackTrace(this,this.constructor),this.message=oce[t]||t,this.code=t,this.data=e}sce.inherits(p1,Error);T1=S1.exports=p1});var dt=C((NMe,A1)=>{"use strict";var II=class extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError(`Expected input to be an Array, got ${typeof e}`);let n="";for(let r=0;r<e.length;r++)n+=`    ${e[r].stack}
`;super(n),this.name="AggregateError",this.errors=e}};A1.exports={AggregateError:II,ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,e){return t.includes(e)},ArrayPrototypeIndexOf(t,e){return t.indexOf(e)},ArrayPrototypeJoin(t,e){return t.join(e)},ArrayPrototypeMap(t,e){return t.map(e)},ArrayPrototypePop(t,e){return t.pop(e)},ArrayPrototypePush(t,e){return t.push(e)},ArrayPrototypeSlice(t,e,n){return t.slice(e,n)},Error,FunctionPrototypeCall(t,e,...n){return t.call(e,...n)},FunctionPrototypeSymbolHasInstance(t,e){return Function.prototype[Symbol.hasInstance].call(t,e)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,e){return Object.defineProperties(t,e)},ObjectDefineProperty(t,e,n){return Object.defineProperty(t,e,n)},ObjectGetOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,e){return Object.setPrototypeOf(t,e)},Promise,PromisePrototypeCatch(t,e){return t.catch(e)},PromisePrototypeThen(t,e,n){return t.then(e,n)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,e){return t.test(e)},SafeSet:Set,String,StringPrototypeSlice(t,e,n){return t.slice(e,n)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,e,n){return t.set(e,n)},Boolean,Uint8Array}});var _I=C((OMe,m1)=>{"use strict";m1.exports={format(t,...e){return t.replace(/%([sdifj])/g,function(...[n,r]){let i=e.shift();return r==="f"?i.toFixed(6):r==="j"?JSON.stringify(i):r==="s"&&typeof i=="object"?`${i.constructor!==Object?i.constructor.name:""} {}`.trim():i.toString()})},inspect(t){switch(typeof t){case"string":if(t.includes("'"))if(t.includes('"')){if(!t.includes("`")&&!t.includes("${"))return`\`${t}\``}else return`"${t}"`;return`'${t}'`;case"number":return isNaN(t)?"NaN":Object.is(t,-0)?String(t):t;case"bigint":return`${String(t)}n`;case"boolean":case"undefined":return String(t);case"object":return"{}"}}}});var Dn=C((CMe,_1)=>{"use strict";var{format:ace,inspect:Tp}=_I(),{AggregateError:lce}=dt(),cce=globalThis.AggregateError||lce,uce=Symbol("kIsNodeError"),dce=["string","function","number","object","Function","Object","boolean","bigint","symbol"],fce=/^([A-Z][a-z0-9]*)+$/,Ece="__node_internal_",Sp={};function Uo(t,e){if(!t)throw new Sp.ERR_INTERNAL_ASSERTION(e)}function g1(t){let e="",n=t.length,r=t[0]==="-"?1:0;for(;n>=r+4;n-=3)e=`_${t.slice(n-3,n)}${e}`;return`${t.slice(0,n)}${e}`}function hce(t,e,n){if(typeof e=="function")return Uo(e.length<=n.length,`Code: ${t}; The provided arguments length (${n.length}) does not match the required ones (${e.length}).`),e(...n);let r=(e.match(/%[dfijoOs]/g)||[]).length;return Uo(r===n.length,`Code: ${t}; The provided arguments length (${n.length}) does not match the required ones (${r}).`),n.length===0?e:ace(e,...n)}function An(t,e,n){n||(n=Error);class r extends n{constructor(...s){super(hce(t,e,s))}toString(){return`${this.name} [${t}]: ${this.message}`}}Object.defineProperties(r.prototype,{name:{value:n.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${t}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),r.prototype.code=t,r.prototype[uce]=!0,Sp[t]=r}function I1(t){let e=Ece+t.name;return Object.defineProperty(t,"name",{value:e}),t}function pce(t,e){if(t&&e&&t!==e){if(Array.isArray(e.errors))return e.errors.push(t),e;let n=new cce([e,t],e.message);return n.code=e.code,n}return t||e}var NI=class extends Error{constructor(e="The operation was aborted",n=void 0){if(n!==void 0&&typeof n!="object")throw new Sp.ERR_INVALID_ARG_TYPE("options","Object",n);super(e,n),this.code="ABORT_ERR",this.name="AbortError"}};An("ERR_ASSERTION","%s",Error);An("ERR_INVALID_ARG_TYPE",(t,e,n)=>{Uo(typeof t=="string","'name' must be a string"),Array.isArray(e)||(e=[e]);let r="The ";t.endsWith(" argument")?r+=`${t} `:r+=`"${t}" ${t.includes(".")?"property":"argument"} `,r+="must be ";let i=[],s=[],o=[];for(let l of e)Uo(typeof l=="string","All expected entries have to be of type string"),dce.includes(l)?i.push(l.toLowerCase()):fce.test(l)?s.push(l):(Uo(l!=="object",'The value "object" should be written as "Object"'),o.push(l));if(s.length>0){let l=i.indexOf("object");l!==-1&&(i.splice(i,l,1),s.push("Object"))}if(i.length>0){switch(i.length){case 1:r+=`of type ${i[0]}`;break;case 2:r+=`one of type ${i[0]} or ${i[1]}`;break;default:{let l=i.pop();r+=`one of type ${i.join(", ")}, or ${l}`}}(s.length>0||o.length>0)&&(r+=" or ")}if(s.length>0){switch(s.length){case 1:r+=`an instance of ${s[0]}`;break;case 2:r+=`an instance of ${s[0]} or ${s[1]}`;break;default:{let l=s.pop();r+=`an instance of ${s.join(", ")}, or ${l}`}}o.length>0&&(r+=" or ")}switch(o.length){case 0:break;case 1:o[0].toLowerCase()!==o[0]&&(r+="an "),r+=`${o[0]}`;break;case 2:r+=`one of ${o[0]} or ${o[1]}`;break;default:{let l=o.pop();r+=`one of ${o.join(", ")}, or ${l}`}}if(n==null)r+=`. Received ${n}`;else if(typeof n=="function"&&n.name)r+=`. Received function ${n.name}`;else if(typeof n=="object"){var a;if((a=n.constructor)!==null&&a!==void 0&&a.name)r+=`. Received an instance of ${n.constructor.name}`;else{let l=Tp(n,{depth:-1});r+=`. Received ${l}`}}else{let l=Tp(n,{colors:!1});l.length>25&&(l=`${l.slice(0,25)}...`),r+=`. Received type ${typeof n} (${l})`}return r},TypeError);An("ERR_INVALID_ARG_VALUE",(t,e,n="is invalid")=>{let r=Tp(e);return r.length>128&&(r=r.slice(0,128)+"..."),`The ${t.includes(".")?"property":"argument"} '${t}' ${n}. Received ${r}`},TypeError);An("ERR_INVALID_RETURN_VALUE",(t,e,n)=>{var r;let i=n!=null&&(r=n.constructor)!==null&&r!==void 0&&r.name?`instance of ${n.constructor.name}`:`type ${typeof n}`;return`Expected ${t} to be returned from the "${e}" function but got ${i}.`},TypeError);An("ERR_MISSING_ARGS",(...t)=>{Uo(t.length>0,"At least one arg needs to be specified");let e,n=t.length;switch(t=(Array.isArray(t)?t:[t]).map(r=>`"${r}"`).join(" or "),n){case 1:e+=`The ${t[0]} argument`;break;case 2:e+=`The ${t[0]} and ${t[1]} arguments`;break;default:{let r=t.pop();e+=`The ${t.join(", ")}, and ${r} arguments`}break}return`${e} must be specified`},TypeError);An("ERR_OUT_OF_RANGE",(t,e,n)=>{Uo(e,'Missing "range" argument');let r;if(Number.isInteger(n)&&Math.abs(n)>2**32)r=g1(String(n));else if(typeof n=="bigint"){r=String(n);let i=BigInt(2)**BigInt(32);(n>i||n<-i)&&(r=g1(r)),r+="n"}else r=Tp(n);return`The value of "${t}" is out of range. It must be ${e}. Received ${r}`},RangeError);An("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);An("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);An("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);An("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);An("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);An("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);An("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);An("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);An("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);An("ERR_STREAM_WRITE_AFTER_END","write after end",Error);An("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);_1.exports={AbortError:NI,aggregateTwoErrors:I1(pce),hideStackFrames:I1,codes:Sp}});var $n=C((yMe,CI)=>{"use strict";var Tce=require("buffer"),{format:Sce,inspect:Rce}=_I(),{codes:{ERR_INVALID_ARG_TYPE:OI}}=Dn(),{kResistStopPropagation:Ace,AggregateError:mce,SymbolDispose:gce}=dt(),Ice=globalThis.AbortSignal||Lt().AbortSignal,_ce=globalThis.AbortController||Lt().AbortController,Nce=Object.getPrototypeOf(async function(){}).constructor,N1=globalThis.Blob||Tce.Blob,Oce=typeof N1<"u"?function(e){return e instanceof N1}:function(e){return!1},O1=(t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new OI(e,"AbortSignal",t)},Cce=(t,e)=>{if(typeof t!="function")throw new OI(e,"Function",t)};CI.exports={AggregateError:mce,kEmptyObject:Object.freeze({}),once(t){let e=!1;return function(...n){e||(e=!0,t.apply(this,n))}},createDeferredPromise:function(){let t,e;return{promise:new Promise((r,i)=>{t=r,e=i}),resolve:t,reject:e}},promisify(t){return new Promise((e,n)=>{t((r,...i)=>r?n(r):e(...i))})},debuglog(){return function(){}},format:Sce,inspect:Rce,types:{isAsyncFunction(t){return t instanceof Nce},isArrayBufferView(t){return ArrayBuffer.isView(t)}},isBlob:Oce,deprecate(t,e){return t},addAbortListener:require("events").addAbortListener||function(e,n){if(e===void 0)throw new OI("signal","AbortSignal",e);O1(e,"signal"),Cce(n,"listener");let r;return e.aborted?queueMicrotask(()=>n()):(e.addEventListener("abort",n,{__proto__:null,once:!0,[Ace]:!0}),r=()=>{e.removeEventListener("abort",n)}),{__proto__:null,[gce](){var i;(i=r)===null||i===void 0||i()}}},AbortSignalAny:Ice.any||function(e){if(e.length===1)return e[0];let n=new _ce,r=()=>n.abort();return e.forEach(i=>{O1(i,"signals"),i.addEventListener("abort",r,{once:!0})}),n.signal.addEventListener("abort",()=>{e.forEach(i=>i.removeEventListener("abort",r))},{once:!0}),n.signal}};CI.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")});var wl=C((bMe,M1)=>{"use strict";var{ArrayIsArray:bI,ArrayPrototypeIncludes:w1,ArrayPrototypeJoin:L1,ArrayPrototypeMap:yce,NumberIsInteger:wI,NumberIsNaN:bce,NumberMAX_SAFE_INTEGER:wce,NumberMIN_SAFE_INTEGER:Lce,NumberParseInt:Dce,ObjectPrototypeHasOwnProperty:Pce,RegExpPrototypeExec:D1,String:xce,StringPrototypeToUpperCase:vce,StringPrototypeTrim:Mce}=dt(),{hideStackFrames:Ar,codes:{ERR_SOCKET_BAD_PORT:Uce,ERR_INVALID_ARG_TYPE:Pn,ERR_INVALID_ARG_VALUE:bl,ERR_OUT_OF_RANGE:Bo,ERR_UNKNOWN_SIGNAL:C1}}=Dn(),{normalizeEncoding:Bce}=$n(),{isAsyncFunction:Fce,isArrayBufferView:Hce}=$n().types,y1={};function Gce(t){return t===(t|0)}function Wce(t){return t===t>>>0}var $ce=/^[0-7]+$/,kce="must be a 32-bit unsigned integer or an octal string";function Yce(t,e,n){if(typeof t>"u"&&(t=n),typeof t=="string"){if(D1($ce,t)===null)throw new bl(e,t,kce);t=Dce(t,8)}return P1(t,e),t}var Vce=Ar((t,e,n=Lce,r=wce)=>{if(typeof t!="number")throw new Pn(e,"number",t);if(!wI(t))throw new Bo(e,"an integer",t);if(t<n||t>r)throw new Bo(e,`>= ${n} && <= ${r}`,t)}),qce=Ar((t,e,n=-2147483648,r=2147483647)=>{if(typeof t!="number")throw new Pn(e,"number",t);if(!wI(t))throw new Bo(e,"an integer",t);if(t<n||t>r)throw new Bo(e,`>= ${n} && <= ${r}`,t)}),P1=Ar((t,e,n=!1)=>{if(typeof t!="number")throw new Pn(e,"number",t);if(!wI(t))throw new Bo(e,"an integer",t);let r=n?1:0,i=4294967295;if(t<r||t>i)throw new Bo(e,`>= ${r} && <= ${i}`,t)});function LI(t,e){if(typeof t!="string")throw new Pn(e,"string",t)}function Xce(t,e,n=void 0,r){if(typeof t!="number")throw new Pn(e,"number",t);if(n!=null&&t<n||r!=null&&t>r||(n!=null||r!=null)&&bce(t))throw new Bo(e,`${n!=null?`>= ${n}`:""}${n!=null&&r!=null?" && ":""}${r!=null?`<= ${r}`:""}`,t)}var zce=Ar((t,e,n)=>{if(!w1(n,t)){let i="must be one of: "+L1(yce(n,s=>typeof s=="string"?`'${s}'`:xce(s)),", ");throw new bl(e,t,i)}});function x1(t,e){if(typeof t!="boolean")throw new Pn(e,"boolean",t)}function yI(t,e,n){return t==null||!Pce(t,e)?n:t[e]}var jce=Ar((t,e,n=null)=>{let r=yI(n,"allowArray",!1),i=yI(n,"allowFunction",!1);if(!yI(n,"nullable",!1)&&t===null||!r&&bI(t)||typeof t!="object"&&(!i||typeof t!="function"))throw new Pn(e,"Object",t)}),Kce=Ar((t,e)=>{if(t!=null&&typeof t!="object"&&typeof t!="function")throw new Pn(e,"a dictionary",t)}),Rp=Ar((t,e,n=0)=>{if(!bI(t))throw new Pn(e,"Array",t);if(t.length<n){let r=`must be longer than ${n}`;throw new bl(e,t,r)}});function Jce(t,e){Rp(t,e);for(let n=0;n<t.length;n++)LI(t[n],`${e}[${n}]`)}function Qce(t,e){Rp(t,e);for(let n=0;n<t.length;n++)x1(t[n],`${e}[${n}]`)}function Zce(t,e){Rp(t,e);for(let n=0;n<t.length;n++){let r=t[n],i=`${e}[${n}]`;if(r==null)throw new Pn(i,"AbortSignal",r);v1(r,i)}}function eue(t,e="signal"){if(LI(t,e),y1[t]===void 0)throw y1[vce(t)]!==void 0?new C1(t+" (signals must use all capital letters)"):new C1(t)}var tue=Ar((t,e="buffer")=>{if(!Hce(t))throw new Pn(e,["Buffer","TypedArray","DataView"],t)});function nue(t,e){let n=Bce(e),r=t.length;if(n==="hex"&&r%2!==0)throw new bl("encoding",e,`is invalid for data of length ${r}`)}function rue(t,e="Port",n=!0){if(typeof t!="number"&&typeof t!="string"||typeof t=="string"&&Mce(t).length===0||+t!==+t>>>0||t>65535||t===0&&!n)throw new Uce(e,t,n);return t|0}var v1=Ar((t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new Pn(e,"AbortSignal",t)}),iue=Ar((t,e)=>{if(typeof t!="function")throw new Pn(e,"Function",t)}),sue=Ar((t,e)=>{if(typeof t!="function"||Fce(t))throw new Pn(e,"Function",t)}),oue=Ar((t,e)=>{if(t!==void 0)throw new Pn(e,"undefined",t)});function aue(t,e,n){if(!w1(n,t))throw new Pn(e,`('${L1(n,"|")}')`,t)}var lue=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function b1(t,e){if(typeof t>"u"||!D1(lue,t))throw new bl(e,t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function cue(t){if(typeof t=="string")return b1(t,"hints"),t;if(bI(t)){let e=t.length,n="";if(e===0)return n;for(let r=0;r<e;r++){let i=t[r];b1(i,"hints"),n+=i,r!==e-1&&(n+=", ")}return n}throw new bl("hints",t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}M1.exports={isInt32:Gce,isUint32:Wce,parseFileMode:Yce,validateArray:Rp,validateStringArray:Jce,validateBooleanArray:Qce,validateAbortSignalArray:Zce,validateBoolean:x1,validateBuffer:tue,validateDictionary:Kce,validateEncoding:nue,validateFunction:iue,validateInt32:qce,validateInteger:Vce,validateNumber:Xce,validateObject:jce,validateOneOf:zce,validatePlainFunction:sue,validatePort:rue,validateSignalName:eue,validateString:LI,validateUint32:P1,validateUndefined:oue,validateUnion:aue,validateAbortSignal:v1,validateLinkHeaderValue:cue}});var ui=C((wMe,K1)=>{"use strict";var{SymbolAsyncIterator:U1,SymbolIterator:B1,SymbolFor:Fo}=dt(),F1=Fo("nodejs.stream.destroyed"),H1=Fo("nodejs.stream.errored"),DI=Fo("nodejs.stream.readable"),PI=Fo("nodejs.stream.writable"),G1=Fo("nodejs.stream.disturbed"),uue=Fo("nodejs.webstream.isClosedPromise"),due=Fo("nodejs.webstream.controllerErrorFunction");function Ap(t,e=!1){var n;return!!(t&&typeof t.pipe=="function"&&typeof t.on=="function"&&(!e||typeof t.pause=="function"&&typeof t.resume=="function")&&(!t._writableState||((n=t._readableState)===null||n===void 0?void 0:n.readable)!==!1)&&(!t._writableState||t._readableState))}function mp(t){var e;return!!(t&&typeof t.write=="function"&&typeof t.on=="function"&&(!t._readableState||((e=t._writableState)===null||e===void 0?void 0:e.writable)!==!1))}function fue(t){return!!(t&&typeof t.pipe=="function"&&t._readableState&&typeof t.on=="function"&&typeof t.write=="function")}function ci(t){return t&&(t._readableState||t._writableState||typeof t.write=="function"&&typeof t.on=="function"||typeof t.pipe=="function"&&typeof t.on=="function")}function W1(t){return!!(t&&!ci(t)&&typeof t.pipeThrough=="function"&&typeof t.getReader=="function"&&typeof t.cancel=="function")}function $1(t){return!!(t&&!ci(t)&&typeof t.getWriter=="function"&&typeof t.abort=="function")}function k1(t){return!!(t&&!ci(t)&&typeof t.readable=="object"&&typeof t.writable=="object")}function Eue(t){return W1(t)||$1(t)||k1(t)}function hue(t,e){return t==null?!1:e===!0?typeof t[U1]=="function":e===!1?typeof t[B1]=="function":typeof t[U1]=="function"||typeof t[B1]=="function"}function gp(t){if(!ci(t))return null;let e=t._writableState,n=t._readableState,r=e||n;return!!(t.destroyed||t[F1]||r!=null&&r.destroyed)}function Y1(t){if(!mp(t))return null;if(t.writableEnded===!0)return!0;let e=t._writableState;return e!=null&&e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function pue(t,e){if(!mp(t))return null;if(t.writableFinished===!0)return!0;let n=t._writableState;return n!=null&&n.errored?!1:typeof n?.finished!="boolean"?null:!!(n.finished||e===!1&&n.ended===!0&&n.length===0)}function Tue(t){if(!Ap(t))return null;if(t.readableEnded===!0)return!0;let e=t._readableState;return!e||e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function V1(t,e){if(!Ap(t))return null;let n=t._readableState;return n!=null&&n.errored?!1:typeof n?.endEmitted!="boolean"?null:!!(n.endEmitted||e===!1&&n.ended===!0&&n.length===0)}function q1(t){return t&&t[DI]!=null?t[DI]:typeof t?.readable!="boolean"?null:gp(t)?!1:Ap(t)&&t.readable&&!V1(t)}function X1(t){return t&&t[PI]!=null?t[PI]:typeof t?.writable!="boolean"?null:gp(t)?!1:mp(t)&&t.writable&&!Y1(t)}function Sue(t,e){return ci(t)?gp(t)?!0:!(e?.readable!==!1&&q1(t)||e?.writable!==!1&&X1(t)):null}function Rue(t){var e,n;return ci(t)?t.writableErrored?t.writableErrored:(e=(n=t._writableState)===null||n===void 0?void 0:n.errored)!==null&&e!==void 0?e:null:null}function Aue(t){var e,n;return ci(t)?t.readableErrored?t.readableErrored:(e=(n=t._readableState)===null||n===void 0?void 0:n.errored)!==null&&e!==void 0?e:null:null}function mue(t){if(!ci(t))return null;if(typeof t.closed=="boolean")return t.closed;let e=t._writableState,n=t._readableState;return typeof e?.closed=="boolean"||typeof n?.closed=="boolean"?e?.closed||n?.closed:typeof t._closed=="boolean"&&z1(t)?t._closed:null}function z1(t){return typeof t._closed=="boolean"&&typeof t._defaultKeepAlive=="boolean"&&typeof t._removedConnection=="boolean"&&typeof t._removedContLen=="boolean"}function j1(t){return typeof t._sent100=="boolean"&&z1(t)}function gue(t){var e;return typeof t._consuming=="boolean"&&typeof t._dumped=="boolean"&&((e=t.req)===null||e===void 0?void 0:e.upgradeOrConnect)===void 0}function Iue(t){if(!ci(t))return null;let e=t._writableState,n=t._readableState,r=e||n;return!r&&j1(t)||!!(r&&r.autoDestroy&&r.emitClose&&r.closed===!1)}function _ue(t){var e;return!!(t&&((e=t[G1])!==null&&e!==void 0?e:t.readableDidRead||t.readableAborted))}function Nue(t){var e,n,r,i,s,o,a,l,c,u;return!!(t&&((e=(n=(r=(i=(s=(o=t[H1])!==null&&o!==void 0?o:t.readableErrored)!==null&&s!==void 0?s:t.writableErrored)!==null&&i!==void 0?i:(a=t._readableState)===null||a===void 0?void 0:a.errorEmitted)!==null&&r!==void 0?r:(l=t._writableState)===null||l===void 0?void 0:l.errorEmitted)!==null&&n!==void 0?n:(c=t._readableState)===null||c===void 0?void 0:c.errored)!==null&&e!==void 0?e:!((u=t._writableState)===null||u===void 0)&&u.errored))}K1.exports={isDestroyed:gp,kIsDestroyed:F1,isDisturbed:_ue,kIsDisturbed:G1,isErrored:Nue,kIsErrored:H1,isReadable:q1,kIsReadable:DI,kIsClosedPromise:uue,kControllerErrorFunction:due,kIsWritable:PI,isClosed:mue,isDuplexNodeStream:fue,isFinished:Sue,isIterable:hue,isReadableNodeStream:Ap,isReadableStream:W1,isReadableEnded:Tue,isReadableFinished:V1,isReadableErrored:Aue,isNodeStream:ci,isWebStream:Eue,isWritable:X1,isWritableNodeStream:mp,isWritableStream:$1,isWritableEnded:Y1,isWritableFinished:pue,isWritableErrored:Rue,isServerRequest:gue,isServerResponse:j1,willEmitClose:Iue,isTransformStream:k1}});var ji=C((LMe,BI)=>{"use strict";var Hs=je(),{AbortError:sH,codes:Oue}=Dn(),{ERR_INVALID_ARG_TYPE:Cue,ERR_STREAM_PREMATURE_CLOSE:J1}=Oue,{kEmptyObject:vI,once:MI}=$n(),{validateAbortSignal:yue,validateFunction:bue,validateObject:wue,validateBoolean:Lue}=wl(),{Promise:Due,PromisePrototypeThen:Pue,SymbolDispose:oH}=dt(),{isClosed:xue,isReadable:Q1,isReadableNodeStream:xI,isReadableStream:vue,isReadableFinished:Z1,isReadableErrored:eH,isWritable:tH,isWritableNodeStream:nH,isWritableStream:Mue,isWritableFinished:rH,isWritableErrored:iH,isNodeStream:Uue,willEmitClose:Bue,kIsClosedPromise:Fue}=ui(),Ll;function Hue(t){return t.setHeader&&typeof t.abort=="function"}var UI=()=>{};function aH(t,e,n){var r,i;if(arguments.length===2?(n=e,e=vI):e==null?e=vI:wue(e,"options"),bue(n,"callback"),yue(e.signal,"options.signal"),n=MI(n),vue(t)||Mue(t))return Gue(t,e,n);if(!Uue(t))throw new Cue("stream",["ReadableStream","WritableStream","Stream"],t);let s=(r=e.readable)!==null&&r!==void 0?r:xI(t),o=(i=e.writable)!==null&&i!==void 0?i:nH(t),a=t._writableState,l=t._readableState,c=()=>{t.writable||E()},u=Bue(t)&&xI(t)===s&&nH(t)===o,d=rH(t,!1),E=()=>{d=!0,t.destroyed&&(u=!1),!(u&&(!t.readable||s))&&(!s||f)&&n.call(t)},f=Z1(t,!1),p=()=>{f=!0,t.destroyed&&(u=!1),!(u&&(!t.writable||o))&&(!o||d)&&n.call(t)},h=A=>{n.call(t,A)},T=xue(t),S=()=>{T=!0;let A=iH(t)||eH(t);if(A&&typeof A!="boolean")return n.call(t,A);if(s&&!f&&xI(t,!0)&&!Z1(t,!1))return n.call(t,new J1);if(o&&!d&&!rH(t,!1))return n.call(t,new J1);n.call(t)},I=()=>{T=!0;let A=iH(t)||eH(t);if(A&&typeof A!="boolean")return n.call(t,A);n.call(t)},R=()=>{t.req.on("finish",E)};Hue(t)?(t.on("complete",E),u||t.on("abort",S),t.req?R():t.on("request",R)):o&&!a&&(t.on("end",c),t.on("close",c)),!u&&typeof t.aborted=="boolean"&&t.on("aborted",S),t.on("end",p),t.on("finish",E),e.error!==!1&&t.on("error",h),t.on("close",S),T?Hs.nextTick(S):a!=null&&a.errorEmitted||l!=null&&l.errorEmitted?u||Hs.nextTick(I):(!s&&(!u||Q1(t))&&(d||tH(t)===!1)||!o&&(!u||tH(t))&&(f||Q1(t)===!1)||l&&t.req&&t.aborted)&&Hs.nextTick(I);let m=()=>{n=UI,t.removeListener("aborted",S),t.removeListener("complete",E),t.removeListener("abort",S),t.removeListener("request",R),t.req&&t.req.removeListener("finish",E),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",E),t.removeListener("end",p),t.removeListener("error",h),t.removeListener("close",S)};if(e.signal&&!T){let A=()=>{let N=n;m(),N.call(t,new sH(void 0,{cause:e.signal.reason}))};if(e.signal.aborted)Hs.nextTick(A);else{Ll=Ll||$n().addAbortListener;let N=Ll(e.signal,A),g=n;n=MI((...L)=>{N[oH](),g.apply(t,L)})}}return m}function Gue(t,e,n){let r=!1,i=UI;if(e.signal)if(i=()=>{r=!0,n.call(t,new sH(void 0,{cause:e.signal.reason}))},e.signal.aborted)Hs.nextTick(i);else{Ll=Ll||$n().addAbortListener;let o=Ll(e.signal,i),a=n;n=MI((...l)=>{o[oH](),a.apply(t,l)})}let s=(...o)=>{r||Hs.nextTick(()=>n.apply(t,o))};return Pue(t[Fue].promise,s,s),UI}function Wue(t,e){var n;let r=!1;return e===null&&(e=vI),(n=e)!==null&&n!==void 0&&n.cleanup&&(Lue(e.cleanup,"cleanup"),r=e.cleanup),new Due((i,s)=>{let o=aH(t,e,a=>{r&&o(),a?s(a):i()})})}BI.exports=aH;BI.exports.finished=Wue});var Ho=C((DMe,pH)=>{"use strict";var di=je(),{aggregateTwoErrors:$ue,codes:{ERR_MULTIPLE_CALLBACK:kue},AbortError:Yue}=Dn(),{Symbol:uH}=dt(),{kIsDestroyed:Vue,isDestroyed:que,isFinished:Xue,isServerRequest:zue}=ui(),dH=uH("kDestroy"),FI=uH("kConstruct");function fH(t,e,n){t&&(t.stack,e&&!e.errored&&(e.errored=t),n&&!n.errored&&(n.errored=t))}function jue(t,e){let n=this._readableState,r=this._writableState,i=r||n;return r!=null&&r.destroyed||n!=null&&n.destroyed?(typeof e=="function"&&e(),this):(fH(t,r,n),r&&(r.destroyed=!0),n&&(n.destroyed=!0),i.constructed?lH(this,t,e):this.once(dH,function(s){lH(this,$ue(s,t),e)}),this)}function lH(t,e,n){let r=!1;function i(s){if(r)return;r=!0;let o=t._readableState,a=t._writableState;fH(s,a,o),a&&(a.closed=!0),o&&(o.closed=!0),typeof n=="function"&&n(s),s?di.nextTick(Kue,t,s):di.nextTick(EH,t)}try{t._destroy(e||null,i)}catch(s){i(s)}}function Kue(t,e){HI(t,e),EH(t)}function EH(t){let e=t._readableState,n=t._writableState;n&&(n.closeEmitted=!0),e&&(e.closeEmitted=!0),(n!=null&&n.emitClose||e!=null&&e.emitClose)&&t.emit("close")}function HI(t,e){let n=t._readableState,r=t._writableState;r!=null&&r.errorEmitted||n!=null&&n.errorEmitted||(r&&(r.errorEmitted=!0),n&&(n.errorEmitted=!0),t.emit("error",e))}function Jue(){let t=this._readableState,e=this._writableState;t&&(t.constructed=!0,t.closed=!1,t.closeEmitted=!1,t.destroyed=!1,t.errored=null,t.errorEmitted=!1,t.reading=!1,t.ended=t.readable===!1,t.endEmitted=t.readable===!1),e&&(e.constructed=!0,e.destroyed=!1,e.closed=!1,e.closeEmitted=!1,e.errored=null,e.errorEmitted=!1,e.finalCalled=!1,e.prefinished=!1,e.ended=e.writable===!1,e.ending=e.writable===!1,e.finished=e.writable===!1)}function GI(t,e,n){let r=t._readableState,i=t._writableState;if(i!=null&&i.destroyed||r!=null&&r.destroyed)return this;r!=null&&r.autoDestroy||i!=null&&i.autoDestroy?t.destroy(e):e&&(e.stack,i&&!i.errored&&(i.errored=e),r&&!r.errored&&(r.errored=e),n?di.nextTick(HI,t,e):HI(t,e))}function Que(t,e){if(typeof t._construct!="function")return;let n=t._readableState,r=t._writableState;n&&(n.constructed=!1),r&&(r.constructed=!1),t.once(FI,e),!(t.listenerCount(FI)>1)&&di.nextTick(Zue,t)}function Zue(t){let e=!1;function n(r){if(e){GI(t,r??new kue);return}e=!0;let i=t._readableState,s=t._writableState,o=s||i;i&&(i.constructed=!0),s&&(s.constructed=!0),o.destroyed?t.emit(dH,r):r?GI(t,r,!0):di.nextTick(ede,t)}try{t._construct(r=>{di.nextTick(n,r)})}catch(r){di.nextTick(n,r)}}function ede(t){t.emit(FI)}function cH(t){return t?.setHeader&&typeof t.abort=="function"}function hH(t){t.emit("close")}function tde(t,e){t.emit("error",e),di.nextTick(hH,t)}function nde(t,e){!t||que(t)||(!e&&!Xue(t)&&(e=new Yue),zue(t)?(t.socket=null,t.destroy(e)):cH(t)?t.abort():cH(t.req)?t.req.abort():typeof t.destroy=="function"?t.destroy(e):typeof t.close=="function"?t.close():e?di.nextTick(tde,t,e):di.nextTick(hH,t),t.destroyed||(t[Vue]=!0))}pH.exports={construct:Que,destroyer:nde,destroy:jue,undestroy:Jue,errorOrDestroy:GI}});var Np=C((PMe,SH)=>{"use strict";var{ArrayIsArray:rde,ObjectSetPrototypeOf:TH}=dt(),{EventEmitter:Ip}=require("events");function _p(t){Ip.call(this,t)}TH(_p.prototype,Ip.prototype);TH(_p,Ip);_p.prototype.pipe=function(t,e){let n=this;function r(u){t.writable&&t.write(u)===!1&&n.pause&&n.pause()}n.on("data",r);function i(){n.readable&&n.resume&&n.resume()}t.on("drain",i),!t._isStdio&&(!e||e.end!==!1)&&(n.on("end",o),n.on("close",a));let s=!1;function o(){s||(s=!0,t.end())}function a(){s||(s=!0,typeof t.destroy=="function"&&t.destroy())}function l(u){c(),Ip.listenerCount(this,"error")===0&&this.emit("error",u)}WI(n,"error",l),WI(t,"error",l);function c(){n.removeListener("data",r),t.removeListener("drain",i),n.removeListener("end",o),n.removeListener("close",a),n.removeListener("error",l),t.removeListener("error",l),n.removeListener("end",c),n.removeListener("close",c),t.removeListener("close",c)}return n.on("end",c),n.on("close",c),t.on("close",c),t.emit("pipe",n),t};function WI(t,e,n){if(typeof t.prependListener=="function")return t.prependListener(e,n);!t._events||!t._events[e]?t.on(e,n):rde(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]}SH.exports={Stream:_p,prependListener:WI}});var cd=C((xMe,Op)=>{"use strict";var{SymbolDispose:ide}=dt(),{AbortError:RH,codes:sde}=Dn(),{isNodeStream:AH,isWebStream:ode,kControllerErrorFunction:ade}=ui(),lde=ji(),{ERR_INVALID_ARG_TYPE:mH}=sde,$I,cde=(t,e)=>{if(typeof t!="object"||!("aborted"in t))throw new mH(e,"AbortSignal",t)};Op.exports.addAbortSignal=function(e,n){if(cde(e,"signal"),!AH(n)&&!ode(n))throw new mH("stream",["ReadableStream","WritableStream","Stream"],n);return Op.exports.addAbortSignalNoValidate(e,n)};Op.exports.addAbortSignalNoValidate=function(t,e){if(typeof t!="object"||!("aborted"in t))return e;let n=AH(e)?()=>{e.destroy(new RH(void 0,{cause:t.reason}))}:()=>{e[ade](new RH(void 0,{cause:t.reason}))};if(t.aborted)n();else{$I=$I||$n().addAbortListener;let r=$I(t,n);lde(e,r[ide])}return e}});var _H=C((MMe,IH)=>{"use strict";var{StringPrototypeSlice:gH,SymbolIterator:ude,TypedArrayPrototypeSet:Cp,Uint8Array:dde}=dt(),{Buffer:kI}=require("buffer"),{inspect:fde}=$n();IH.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){let n={data:e,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}unshift(e){let n={data:e,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}shift(){if(this.length===0)return;let e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return"";let n=this.head,r=""+n.data;for(;(n=n.next)!==null;)r+=e+n.data;return r}concat(e){if(this.length===0)return kI.alloc(0);let n=kI.allocUnsafe(e>>>0),r=this.head,i=0;for(;r;)Cp(n,r.data,i),i+=r.data.length,r=r.next;return n}consume(e,n){let r=this.head.data;if(e<r.length){let i=r.slice(0,e);return this.head.data=r.slice(e),i}return e===r.length?this.shift():n?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[ude](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let n="",r=this.head,i=0;do{let s=r.data;if(e>s.length)n+=s,e-=s.length;else{e===s.length?(n+=s,++i,r.next?this.head=r.next:this.head=this.tail=null):(n+=gH(s,0,e),this.head=r,r.data=gH(s,e));break}++i}while((r=r.next)!==null);return this.length-=i,n}_getBuffer(e){let n=kI.allocUnsafe(e),r=e,i=this.head,s=0;do{let o=i.data;if(e>o.length)Cp(n,o,r-e),e-=o.length;else{e===o.length?(Cp(n,o,r-e),++s,i.next?this.head=i.next:this.head=this.tail=null):(Cp(n,new dde(o.buffer,o.byteOffset,e),r-e),this.head=i,i.data=o.slice(e));break}++s}while((i=i.next)!==null);return this.length-=s,n}[Symbol.for("nodejs.util.inspect.custom")](e,n){return fde(this,{...n,depth:0,customInspect:!1})}}});var ud=C((UMe,yH)=>{"use strict";var{MathFloor:Ede,NumberIsInteger:hde}=dt(),{validateInteger:pde}=wl(),{ERR_INVALID_ARG_VALUE:Tde}=Dn().codes,NH=16*1024,OH=16;function Sde(t,e,n){return t.highWaterMark!=null?t.highWaterMark:e?t[n]:null}function CH(t){return t?OH:NH}function Rde(t,e){pde(e,"value",0),t?OH=e:NH=e}function Ade(t,e,n,r){let i=Sde(e,r,n);if(i!=null){if(!hde(i)||i<0){let s=r?`options.${n}`:"options.highWaterMark";throw new Tde(s,i)}return Ede(i)}return CH(t.objectMode)}yH.exports={getHighWaterMark:Ade,getDefaultHighWaterMark:CH,setDefaultHighWaterMark:Rde}});var YI=C((BMe,DH)=>{"use strict";var bH=je(),{PromisePrototypeThen:mde,SymbolAsyncIterator:wH,SymbolIterator:LH}=dt(),{Buffer:gde}=require("buffer"),{ERR_INVALID_ARG_TYPE:Ide,ERR_STREAM_NULL_VALUES:_de}=Dn().codes;function Nde(t,e,n){let r;if(typeof e=="string"||e instanceof gde)return new t({objectMode:!0,...n,read(){this.push(e),this.push(null)}});let i;if(e&&e[wH])i=!0,r=e[wH]();else if(e&&e[LH])i=!1,r=e[LH]();else throw new Ide("iterable",["Iterable"],e);let s=new t({objectMode:!0,highWaterMark:1,...n}),o=!1;s._read=function(){o||(o=!0,l())},s._destroy=function(c,u){mde(a(c),()=>bH.nextTick(u,c),d=>bH.nextTick(u,d||c))};async function a(c){let u=c!=null,d=typeof r.throw=="function";if(u&&d){let{value:E,done:f}=await r.throw(c);if(await E,f)return}if(typeof r.return=="function"){let{value:E}=await r.return();await E}}async function l(){for(;;){try{let{value:c,done:u}=i?await r.next():r.next();if(u)s.push(null);else{let d=c&&typeof c.then=="function"?await c:c;if(d===null)throw o=!1,new _de;if(s.push(d))continue;o=!1}}catch(c){s.destroy(c)}break}}return s}DH.exports=Nde});var fd=C((FMe,jH)=>{"use strict";var Br=je(),{ArrayPrototypeIndexOf:Ode,NumberIsInteger:Cde,NumberIsNaN:yde,NumberParseInt:bde,ObjectDefineProperties:QI,ObjectKeys:wde,ObjectSetPrototypeOf:vH,Promise:MH,SafeSet:Lde,SymbolAsyncDispose:Dde,SymbolAsyncIterator:Pde,Symbol:xde}=dt();jH.exports=ge;ge.ReadableState=Lp;var{EventEmitter:vde}=require("events"),{Stream:Gs,prependListener:Mde}=Np(),{Buffer:VI}=require("buffer"),{addAbortSignal:Ude}=cd(),UH=ji(),Ue=$n().debuglog("stream",t=>{Ue=t}),Bde=_H(),xl=Ho(),{getHighWaterMark:Fde,getDefaultHighWaterMark:Hde}=ud(),{aggregateTwoErrors:PH,codes:{ERR_INVALID_ARG_TYPE:Gde,ERR_METHOD_NOT_IMPLEMENTED:Wde,ERR_OUT_OF_RANGE:$de,ERR_STREAM_PUSH_AFTER_EOF:kde,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:Yde},AbortError:Vde}=Dn(),{validateObject:qde}=wl(),Go=xde("kPaused"),{StringDecoder:BH}=yu(),Xde=YI();vH(ge.prototype,Gs.prototype);vH(ge,Gs);var qI=()=>{},{errorOrDestroy:Dl}=xl,Pl=1,zde=2,FH=4,dd=8,HH=16,yp=32,bp=64,GH=128,jde=256,Kde=512,Jde=1024,KI=2048,JI=4096,Qde=8192,Zde=16384,efe=32768,WH=65536,tfe=1<<17,nfe=1<<18;function $t(t){return{enumerable:!1,get(){return(this.state&t)!==0},set(e){e?this.state|=t:this.state&=~t}}}QI(Lp.prototype,{objectMode:$t(Pl),ended:$t(zde),endEmitted:$t(FH),reading:$t(dd),constructed:$t(HH),sync:$t(yp),needReadable:$t(bp),emittedReadable:$t(GH),readableListening:$t(jde),resumeScheduled:$t(Kde),errorEmitted:$t(Jde),emitClose:$t(KI),autoDestroy:$t(JI),destroyed:$t(Qde),closed:$t(Zde),closeEmitted:$t(efe),multiAwaitDrain:$t(WH),readingMore:$t(tfe),dataEmitted:$t(nfe)});function Lp(t,e,n){typeof n!="boolean"&&(n=e instanceof fi()),this.state=KI|JI|HH|yp,t&&t.objectMode&&(this.state|=Pl),n&&t&&t.readableObjectMode&&(this.state|=Pl),this.highWaterMark=t?Fde(this,t,"readableHighWaterMark",n):Hde(!1),this.buffer=new Bde,this.length=0,this.pipes=[],this.flowing=null,this[Go]=null,t&&t.emitClose===!1&&(this.state&=~KI),t&&t.autoDestroy===!1&&(this.state&=~JI),this.errored=null,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,t&&t.encoding&&(this.decoder=new BH(t.encoding),this.encoding=t.encoding)}function ge(t){if(!(this instanceof ge))return new ge(t);let e=this instanceof fi();this._readableState=new Lp(t,this,e),t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&!e&&Ude(t.signal,this)),Gs.call(this,t),xl.construct(this,()=>{this._readableState.needReadable&&wp(this,this._readableState)})}ge.prototype.destroy=xl.destroy;ge.prototype._undestroy=xl.undestroy;ge.prototype._destroy=function(t,e){e(t)};ge.prototype[vde.captureRejectionSymbol]=function(t){this.destroy(t)};ge.prototype[Dde]=function(){let t;return this.destroyed||(t=this.readableEnded?null:new Vde,this.destroy(t)),new MH((e,n)=>UH(this,r=>r&&r!==t?n(r):e(null)))};ge.prototype.push=function(t,e){return $H(this,t,e,!1)};ge.prototype.unshift=function(t,e){return $H(this,t,e,!0)};function $H(t,e,n,r){Ue("readableAddChunk",e);let i=t._readableState,s;if((i.state&Pl)===0&&(typeof e=="string"?(n=n||i.defaultEncoding,i.encoding!==n&&(r&&i.encoding?e=VI.from(e,n).toString(i.encoding):(e=VI.from(e,n),n=""))):e instanceof VI?n="":Gs._isUint8Array(e)?(e=Gs._uint8ArrayToBuffer(e),n=""):e!=null&&(s=new Gde("chunk",["string","Buffer","Uint8Array"],e))),s)Dl(t,s);else if(e===null)i.state&=~dd,sfe(t,i);else if((i.state&Pl)!==0||e&&e.length>0)if(r)if((i.state&FH)!==0)Dl(t,new Yde);else{if(i.destroyed||i.errored)return!1;XI(t,i,e,!0)}else if(i.ended)Dl(t,new kde);else{if(i.destroyed||i.errored)return!1;i.state&=~dd,i.decoder&&!n?(e=i.decoder.write(e),i.objectMode||e.length!==0?XI(t,i,e,!1):wp(t,i)):XI(t,i,e,!1)}else r||(i.state&=~dd,wp(t,i));return!i.ended&&(i.length<i.highWaterMark||i.length===0)}function XI(t,e,n,r){e.flowing&&e.length===0&&!e.sync&&t.listenerCount("data")>0?((e.state&WH)!==0?e.awaitDrainWriters.clear():e.awaitDrainWriters=null,e.dataEmitted=!0,t.emit("data",n)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),(e.state&bp)!==0&&Dp(t)),wp(t,e)}ge.prototype.isPaused=function(){let t=this._readableState;return t[Go]===!0||t.flowing===!1};ge.prototype.setEncoding=function(t){let e=new BH(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;let n=this._readableState.buffer,r="";for(let i of n)r+=e.write(i);return n.clear(),r!==""&&n.push(r),this._readableState.length=r.length,this};var rfe=1073741824;function ife(t){if(t>rfe)throw new $de("size","<= 1GiB",t);return t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++,t}function xH(t,e){return t<=0||e.length===0&&e.ended?0:(e.state&Pl)!==0?1:yde(t)?e.flowing&&e.length?e.buffer.first().length:e.length:t<=e.length?t:e.ended?e.length:0}ge.prototype.read=function(t){Ue("read",t),t===void 0?t=NaN:Cde(t)||(t=bde(t,10));let e=this._readableState,n=t;if(t>e.highWaterMark&&(e.highWaterMark=ife(t)),t!==0&&(e.state&=~GH),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return Ue("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?zI(this):Dp(this),null;if(t=xH(t,e),t===0&&e.ended)return e.length===0&&zI(this),null;let r=(e.state&bp)!==0;if(Ue("need readable",r),(e.length===0||e.length-t<e.highWaterMark)&&(r=!0,Ue("length less than watermark",r)),e.ended||e.reading||e.destroyed||e.errored||!e.constructed)r=!1,Ue("reading, ended or constructing",r);else if(r){Ue("do read"),e.state|=dd|yp,e.length===0&&(e.state|=bp);try{this._read(e.highWaterMark)}catch(s){Dl(this,s)}e.state&=~yp,e.reading||(t=xH(n,e))}let i;return t>0?i=XH(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.multiAwaitDrain?e.awaitDrainWriters.clear():e.awaitDrainWriters=null),e.length===0&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&zI(this)),i!==null&&!e.errorEmitted&&!e.closeEmitted&&(e.dataEmitted=!0,this.emit("data",i)),i};function sfe(t,e){if(Ue("onEofChunk"),!e.ended){if(e.decoder){let n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,e.sync?Dp(t):(e.needReadable=!1,e.emittedReadable=!0,kH(t))}}function Dp(t){let e=t._readableState;Ue("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(Ue("emitReadable",e.flowing),e.emittedReadable=!0,Br.nextTick(kH,t))}function kH(t){let e=t._readableState;Ue("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&!e.errored&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,VH(t)}function wp(t,e){!e.readingMore&&e.constructed&&(e.readingMore=!0,Br.nextTick(ofe,t,e))}function ofe(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){let n=e.length;if(Ue("maybeReadMore read 0"),t.read(0),n===e.length)break}e.readingMore=!1}ge.prototype._read=function(t){throw new Wde("_read()")};ge.prototype.pipe=function(t,e){let n=this,r=this._readableState;r.pipes.length===1&&(r.multiAwaitDrain||(r.multiAwaitDrain=!0,r.awaitDrainWriters=new Lde(r.awaitDrainWriters?[r.awaitDrainWriters]:[]))),r.pipes.push(t),Ue("pipe count=%d opts=%j",r.pipes.length,e);let s=(!e||e.end!==!1)&&t!==Br.stdout&&t!==Br.stderr?a:T;r.endEmitted?Br.nextTick(s):n.once("end",s),t.on("unpipe",o);function o(S,I){Ue("onunpipe"),S===n&&I&&I.hasUnpiped===!1&&(I.hasUnpiped=!0,u())}function a(){Ue("onend"),t.end()}let l,c=!1;function u(){Ue("cleanup"),t.removeListener("close",p),t.removeListener("finish",h),l&&t.removeListener("drain",l),t.removeListener("error",f),t.removeListener("unpipe",o),n.removeListener("end",a),n.removeListener("end",T),n.removeListener("data",E),c=!0,l&&r.awaitDrainWriters&&(!t._writableState||t._writableState.needDrain)&&l()}function d(){c||(r.pipes.length===1&&r.pipes[0]===t?(Ue("false write response, pause",0),r.awaitDrainWriters=t,r.multiAwaitDrain=!1):r.pipes.length>1&&r.pipes.includes(t)&&(Ue("false write response, pause",r.awaitDrainWriters.size),r.awaitDrainWriters.add(t)),n.pause()),l||(l=afe(n,t),t.on("drain",l))}n.on("data",E);function E(S){Ue("ondata");let I=t.write(S);Ue("dest.write",I),I===!1&&d()}function f(S){if(Ue("onerror",S),T(),t.removeListener("error",f),t.listenerCount("error")===0){let I=t._writableState||t._readableState;I&&!I.errorEmitted?Dl(t,S):t.emit("error",S)}}Mde(t,"error",f);function p(){t.removeListener("finish",h),T()}t.once("close",p);function h(){Ue("onfinish"),t.removeListener("close",p),T()}t.once("finish",h);function T(){Ue("unpipe"),n.unpipe(t)}return t.emit("pipe",n),t.writableNeedDrain===!0?d():r.flowing||(Ue("pipe resume"),n.resume()),t};function afe(t,e){return function(){let r=t._readableState;r.awaitDrainWriters===e?(Ue("pipeOnDrain",1),r.awaitDrainWriters=null):r.multiAwaitDrain&&(Ue("pipeOnDrain",r.awaitDrainWriters.size),r.awaitDrainWriters.delete(e)),(!r.awaitDrainWriters||r.awaitDrainWriters.size===0)&&t.listenerCount("data")&&t.resume()}}ge.prototype.unpipe=function(t){let e=this._readableState,n={hasUnpiped:!1};if(e.pipes.length===0)return this;if(!t){let i=e.pipes;e.pipes=[],this.pause();for(let s=0;s<i.length;s++)i[s].emit("unpipe",this,{hasUnpiped:!1});return this}let r=Ode(e.pipes,t);return r===-1?this:(e.pipes.splice(r,1),e.pipes.length===0&&this.pause(),t.emit("unpipe",this,n),this)};ge.prototype.on=function(t,e){let n=Gs.prototype.on.call(this,t,e),r=this._readableState;return t==="data"?(r.readableListening=this.listenerCount("readable")>0,r.flowing!==!1&&this.resume()):t==="readable"&&!r.endEmitted&&!r.readableListening&&(r.readableListening=r.needReadable=!0,r.flowing=!1,r.emittedReadable=!1,Ue("on readable",r.length,r.reading),r.length?Dp(this):r.reading||Br.nextTick(lfe,this)),n};ge.prototype.addListener=ge.prototype.on;ge.prototype.removeListener=function(t,e){let n=Gs.prototype.removeListener.call(this,t,e);return t==="readable"&&Br.nextTick(YH,this),n};ge.prototype.off=ge.prototype.removeListener;ge.prototype.removeAllListeners=function(t){let e=Gs.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&Br.nextTick(YH,this),e};function YH(t){let e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&e[Go]===!1?e.flowing=!0:t.listenerCount("data")>0?t.resume():e.readableListening||(e.flowing=null)}function lfe(t){Ue("readable nexttick read 0"),t.read(0)}ge.prototype.resume=function(){let t=this._readableState;return t.flowing||(Ue("resume"),t.flowing=!t.readableListening,cfe(this,t)),t[Go]=!1,this};function cfe(t,e){e.resumeScheduled||(e.resumeScheduled=!0,Br.nextTick(ufe,t,e))}function ufe(t,e){Ue("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),VH(t),e.flowing&&!e.reading&&t.read(0)}ge.prototype.pause=function(){return Ue("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Ue("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[Go]=!0,this};function VH(t){let e=t._readableState;for(Ue("flow",e.flowing);e.flowing&&t.read()!==null;);}ge.prototype.wrap=function(t){let e=!1;t.on("data",r=>{!this.push(r)&&t.pause&&(e=!0,t.pause())}),t.on("end",()=>{this.push(null)}),t.on("error",r=>{Dl(this,r)}),t.on("close",()=>{this.destroy()}),t.on("destroy",()=>{this.destroy()}),this._read=()=>{e&&t.resume&&(e=!1,t.resume())};let n=wde(t);for(let r=1;r<n.length;r++){let i=n[r];this[i]===void 0&&typeof t[i]=="function"&&(this[i]=t[i].bind(t))}return this};ge.prototype[Pde]=function(){return qH(this)};ge.prototype.iterator=function(t){return t!==void 0&&qde(t,"options"),qH(this,t)};function qH(t,e){typeof t.read!="function"&&(t=ge.wrap(t,{objectMode:!0}));let n=dfe(t,e);return n.stream=t,n}async function*dfe(t,e){let n=qI;function r(o){this===t?(n(),n=qI):n=o}t.on("readable",r);let i,s=UH(t,{writable:!1},o=>{i=o?PH(i,o):null,n(),n=qI});try{for(;;){let o=t.destroyed?null:t.read();if(o!==null)yield o;else{if(i)throw i;if(i===null)return;await new MH(r)}}}catch(o){throw i=PH(i,o),i}finally{(i||e?.destroyOnReturn!==!1)&&(i===void 0||t._readableState.autoDestroy)?xl.destroyer(t,null):(t.off("readable",r),s())}}QI(ge.prototype,{readable:{__proto__:null,get(){let t=this._readableState;return!!t&&t.readable!==!1&&!t.destroyed&&!t.errorEmitted&&!t.endEmitted},set(t){this._readableState&&(this._readableState.readable=!!t)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(t){this._readableState&&(this._readableState.destroyed=t)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}});QI(Lp.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[Go]!==!1},set(t){this[Go]=!!t}}});ge._fromList=XH;function XH(t,e){if(e.length===0)return null;let n;return e.objectMode?n=e.buffer.shift():!t||t>=e.length?(e.decoder?n=e.buffer.join(""):e.buffer.length===1?n=e.buffer.first():n=e.buffer.concat(e.length),e.buffer.clear()):n=e.buffer.consume(t,e.decoder),n}function zI(t){let e=t._readableState;Ue("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,Br.nextTick(ffe,e,t))}function ffe(t,e){if(Ue("endReadableNT",t.endEmitted,t.length),!t.errored&&!t.closeEmitted&&!t.endEmitted&&t.length===0){if(t.endEmitted=!0,e.emit("end"),e.writable&&e.allowHalfOpen===!1)Br.nextTick(Efe,e);else if(t.autoDestroy){let n=e._writableState;(!n||n.autoDestroy&&(n.finished||n.writable===!1))&&e.destroy()}}}function Efe(t){t.writable&&!t.writableEnded&&!t.destroyed&&t.end()}ge.from=function(t,e){return Xde(ge,t,e)};var jI;function zH(){return jI===void 0&&(jI={}),jI}ge.fromWeb=function(t,e){return zH().newStreamReadableFromReadableStream(t,e)};ge.toWeb=function(t,e){return zH().newReadableStreamFromStreamReadable(t,e)};ge.wrap=function(t,e){var n,r;return new ge({objectMode:(n=(r=t.readableObjectMode)!==null&&r!==void 0?r:t.objectMode)!==null&&n!==void 0?n:!0,...e,destroy(i,s){xl.destroyer(t,i),s(i)}}).wrap(t)}});var Up=C((HMe,aG)=>{"use strict";var Wo=je(),{ArrayPrototypeSlice:QH,Error:hfe,FunctionPrototypeSymbolHasInstance:ZH,ObjectDefineProperty:eG,ObjectDefineProperties:pfe,ObjectSetPrototypeOf:tG,StringPrototypeToLowerCase:Tfe,Symbol:Sfe,SymbolHasInstance:Rfe}=dt();aG.exports=St;St.WritableState=pd;var{EventEmitter:Afe}=require("events"),Ed=Np().Stream,{Buffer:Pp}=require("buffer"),Mp=Ho(),{addAbortSignal:mfe}=cd(),{getHighWaterMark:gfe,getDefaultHighWaterMark:Ife}=ud(),{ERR_INVALID_ARG_TYPE:_fe,ERR_METHOD_NOT_IMPLEMENTED:Nfe,ERR_MULTIPLE_CALLBACK:nG,ERR_STREAM_CANNOT_PIPE:Ofe,ERR_STREAM_DESTROYED:hd,ERR_STREAM_ALREADY_FINISHED:Cfe,ERR_STREAM_NULL_VALUES:yfe,ERR_STREAM_WRITE_AFTER_END:bfe,ERR_UNKNOWN_ENCODING:rG}=Dn().codes,{errorOrDestroy:vl}=Mp;tG(St.prototype,Ed.prototype);tG(St,Ed);function t_(){}var Ml=Sfe("kOnFinished");function pd(t,e,n){typeof n!="boolean"&&(n=e instanceof fi()),this.objectMode=!!(t&&t.objectMode),n&&(this.objectMode=this.objectMode||!!(t&&t.writableObjectMode)),this.highWaterMark=t?gfe(this,t,"writableHighWaterMark",n):Ife(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let r=!!(t&&t.decodeStrings===!1);this.decodeStrings=!r,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=Lfe.bind(void 0,e),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,vp(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!t||t.emitClose!==!1,this.autoDestroy=!t||t.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[Ml]=[]}function vp(t){t.buffered=[],t.bufferedIndex=0,t.allBuffers=!0,t.allNoop=!0}pd.prototype.getBuffer=function(){return QH(this.buffered,this.bufferedIndex)};eG(pd.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function St(t){let e=this instanceof fi();if(!e&&!ZH(St,this))return new St(t);this._writableState=new pd(t,this,e),t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&mfe(t.signal,this)),Ed.call(this,t),Mp.construct(this,()=>{let n=this._writableState;n.writing||r_(this,n),i_(this,n)})}eG(St,Rfe,{__proto__:null,value:function(t){return ZH(this,t)?!0:this!==St?!1:t&&t._writableState instanceof pd}});St.prototype.pipe=function(){vl(this,new Ofe)};function iG(t,e,n,r){let i=t._writableState;if(typeof n=="function")r=n,n=i.defaultEncoding;else{if(!n)n=i.defaultEncoding;else if(n!=="buffer"&&!Pp.isEncoding(n))throw new rG(n);typeof r!="function"&&(r=t_)}if(e===null)throw new yfe;if(!i.objectMode)if(typeof e=="string")i.decodeStrings!==!1&&(e=Pp.from(e,n),n="buffer");else if(e instanceof Pp)n="buffer";else if(Ed._isUint8Array(e))e=Ed._uint8ArrayToBuffer(e),n="buffer";else throw new _fe("chunk",["string","Buffer","Uint8Array"],e);let s;return i.ending?s=new bfe:i.destroyed&&(s=new hd("write")),s?(Wo.nextTick(r,s),vl(t,s,!0),s):(i.pendingcb++,wfe(t,i,e,n,r))}St.prototype.write=function(t,e,n){return iG(this,t,e,n)===!0};St.prototype.cork=function(){this._writableState.corked++};St.prototype.uncork=function(){let t=this._writableState;t.corked&&(t.corked--,t.writing||r_(this,t))};St.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=Tfe(e)),!Pp.isEncoding(e))throw new rG(e);return this._writableState.defaultEncoding=e,this};function wfe(t,e,n,r,i){let s=e.objectMode?1:n.length;e.length+=s;let o=e.length<e.highWaterMark;return o||(e.needDrain=!0),e.writing||e.corked||e.errored||!e.constructed?(e.buffered.push({chunk:n,encoding:r,callback:i}),e.allBuffers&&r!=="buffer"&&(e.allBuffers=!1),e.allNoop&&i!==t_&&(e.allNoop=!1)):(e.writelen=s,e.writecb=i,e.writing=!0,e.sync=!0,t._write(n,r,e.onwrite),e.sync=!1),o&&!e.errored&&!e.destroyed}function KH(t,e,n,r,i,s,o){e.writelen=r,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new hd("write")):n?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function JH(t,e,n,r){--e.pendingcb,r(n),n_(e),vl(t,n)}function Lfe(t,e){let n=t._writableState,r=n.sync,i=n.writecb;if(typeof i!="function"){vl(t,new nG);return}n.writing=!1,n.writecb=null,n.length-=n.writelen,n.writelen=0,e?(e.stack,n.errored||(n.errored=e),t._readableState&&!t._readableState.errored&&(t._readableState.errored=e),r?Wo.nextTick(JH,t,n,e,i):JH(t,n,e,i)):(n.buffered.length>n.bufferedIndex&&r_(t,n),r?n.afterWriteTickInfo!==null&&n.afterWriteTickInfo.cb===i?n.afterWriteTickInfo.count++:(n.afterWriteTickInfo={count:1,cb:i,stream:t,state:n},Wo.nextTick(Dfe,n.afterWriteTickInfo)):sG(t,n,1,i))}function Dfe({stream:t,state:e,count:n,cb:r}){return e.afterWriteTickInfo=null,sG(t,e,n,r)}function sG(t,e,n,r){for(!e.ending&&!t.destroyed&&e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"));n-- >0;)e.pendingcb--,r();e.destroyed&&n_(e),i_(t,e)}function n_(t){if(t.writing)return;for(let i=t.bufferedIndex;i<t.buffered.length;++i){var e;let{chunk:s,callback:o}=t.buffered[i],a=t.objectMode?1:s.length;t.length-=a,o((e=t.errored)!==null&&e!==void 0?e:new hd("write"))}let n=t[Ml].splice(0);for(let i=0;i<n.length;i++){var r;n[i]((r=t.errored)!==null&&r!==void 0?r:new hd("end"))}vp(t)}function r_(t,e){if(e.corked||e.bufferProcessing||e.destroyed||!e.constructed)return;let{buffered:n,bufferedIndex:r,objectMode:i}=e,s=n.length-r;if(!s)return;let o=r;if(e.bufferProcessing=!0,s>1&&t._writev){e.pendingcb-=s-1;let a=e.allNoop?t_:c=>{for(let u=o;u<n.length;++u)n[u].callback(c)},l=e.allNoop&&o===0?n:QH(n,o);l.allBuffers=e.allBuffers,KH(t,e,!0,e.length,l,"",a),vp(e)}else{do{let{chunk:a,encoding:l,callback:c}=n[o];n[o++]=null;let u=i?1:a.length;KH(t,e,!1,u,a,l,c)}while(o<n.length&&!e.writing);o===n.length?vp(e):o>256?(n.splice(0,o),e.bufferedIndex=0):e.bufferedIndex=o}e.bufferProcessing=!1}St.prototype._write=function(t,e,n){if(this._writev)this._writev([{chunk:t,encoding:e}],n);else throw new Nfe("_write()")};St.prototype._writev=null;St.prototype.end=function(t,e,n){let r=this._writableState;typeof t=="function"?(n=t,t=null,e=null):typeof e=="function"&&(n=e,e=null);let i;if(t!=null){let s=iG(this,t,e);s instanceof hfe&&(i=s)}return r.corked&&(r.corked=1,this.uncork()),i||(!r.errored&&!r.ending?(r.ending=!0,i_(this,r,!0),r.ended=!0):r.finished?i=new Cfe("end"):r.destroyed&&(i=new hd("end"))),typeof n=="function"&&(i||r.finished?Wo.nextTick(n,i):r[Ml].push(n)),this};function xp(t){return t.ending&&!t.destroyed&&t.constructed&&t.length===0&&!t.errored&&t.buffered.length===0&&!t.finished&&!t.writing&&!t.errorEmitted&&!t.closeEmitted}function Pfe(t,e){let n=!1;function r(i){if(n){vl(t,i??nG());return}if(n=!0,e.pendingcb--,i){let s=e[Ml].splice(0);for(let o=0;o<s.length;o++)s[o](i);vl(t,i,e.sync)}else xp(e)&&(e.prefinished=!0,t.emit("prefinish"),e.pendingcb++,Wo.nextTick(e_,t,e))}e.sync=!0,e.pendingcb++;try{t._final(r)}catch(i){r(i)}e.sync=!1}function xfe(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.finalCalled=!0,Pfe(t,e)):(e.prefinished=!0,t.emit("prefinish")))}function i_(t,e,n){xp(e)&&(xfe(t,e),e.pendingcb===0&&(n?(e.pendingcb++,Wo.nextTick((r,i)=>{xp(i)?e_(r,i):i.pendingcb--},t,e)):xp(e)&&(e.pendingcb++,e_(t,e))))}function e_(t,e){e.pendingcb--,e.finished=!0;let n=e[Ml].splice(0);for(let r=0;r<n.length;r++)n[r]();if(t.emit("finish"),e.autoDestroy){let r=t._readableState;(!r||r.autoDestroy&&(r.endEmitted||r.readable===!1))&&t.destroy()}}pfe(St.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(t){this._writableState&&(this._writableState.destroyed=t)}},writable:{__proto__:null,get(){let t=this._writableState;return!!t&&t.writable!==!1&&!t.destroyed&&!t.errored&&!t.ending&&!t.ended},set(t){this._writableState&&(this._writableState.writable=!!t)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let t=this._writableState;return t?!t.destroyed&&!t.ending&&t.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var vfe=Mp.destroy;St.prototype.destroy=function(t,e){let n=this._writableState;return!n.destroyed&&(n.bufferedIndex<n.buffered.length||n[Ml].length)&&Wo.nextTick(n_,n),vfe.call(this,t,e),this};St.prototype._undestroy=Mp.undestroy;St.prototype._destroy=function(t,e){e(t)};St.prototype[Afe.captureRejectionSymbol]=function(t){this.destroy(t)};var ZI;function oG(){return ZI===void 0&&(ZI={}),ZI}St.fromWeb=function(t,e){return oG().newStreamWritableFromWritableStream(t,e)};St.toWeb=function(t){return oG().newWritableStreamFromStreamWritable(t)}});var IG=C((GMe,gG)=>{var s_=je(),Mfe=require("buffer"),{isReadable:Ufe,isWritable:Bfe,isIterable:lG,isNodeStream:Ffe,isReadableNodeStream:cG,isWritableNodeStream:uG,isDuplexNodeStream:Hfe,isReadableStream:dG,isWritableStream:fG}=ui(),EG=ji(),{AbortError:AG,codes:{ERR_INVALID_ARG_TYPE:Gfe,ERR_INVALID_RETURN_VALUE:hG}}=Dn(),{destroyer:Bl}=Ho(),Wfe=fi(),mG=fd(),$fe=Up(),{createDeferredPromise:pG}=$n(),TG=YI(),SG=globalThis.Blob||Mfe.Blob,kfe=typeof SG<"u"?function(e){return e instanceof SG}:function(e){return!1},Yfe=globalThis.AbortController||Lt().AbortController,{FunctionPrototypeCall:RG}=dt(),Ws=class extends Wfe{constructor(e){super(e),e?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),e?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};gG.exports=function t(e,n){if(Hfe(e))return e;if(cG(e))return Ul({readable:e});if(uG(e))return Ul({writable:e});if(Ffe(e))return Ul({writable:!1,readable:!1});if(dG(e))return Ul({readable:mG.fromWeb(e)});if(fG(e))return Ul({writable:$fe.fromWeb(e)});if(typeof e=="function"){let{value:i,write:s,final:o,destroy:a}=Vfe(e);if(lG(i))return TG(Ws,i,{objectMode:!0,write:s,final:o,destroy:a});let l=i?.then;if(typeof l=="function"){let c,u=RG(l,i,d=>{if(d!=null)throw new hG("nully","body",d)},d=>{Bl(c,d)});return c=new Ws({objectMode:!0,readable:!1,write:s,final(d){o(async()=>{try{await u,s_.nextTick(d,null)}catch(E){s_.nextTick(d,E)}})},destroy:a})}throw new hG("Iterable, AsyncIterable or AsyncFunction",n,i)}if(kfe(e))return t(e.arrayBuffer());if(lG(e))return TG(Ws,e,{objectMode:!0,writable:!1});if(dG(e?.readable)&&fG(e?.writable))return Ws.fromWeb(e);if(typeof e?.writable=="object"||typeof e?.readable=="object"){let i=e!=null&&e.readable?cG(e?.readable)?e?.readable:t(e.readable):void 0,s=e!=null&&e.writable?uG(e?.writable)?e?.writable:t(e.writable):void 0;return Ul({readable:i,writable:s})}let r=e?.then;if(typeof r=="function"){let i;return RG(r,e,s=>{s!=null&&i.push(s),i.push(null)},s=>{Bl(i,s)}),i=new Ws({objectMode:!0,writable:!1,read(){}})}throw new Gfe(n,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],e)};function Vfe(t){let{promise:e,resolve:n}=pG(),r=new Yfe,i=r.signal;return{value:t((async function*(){for(;;){let o=e;e=null;let{chunk:a,done:l,cb:c}=await o;if(s_.nextTick(c),l)return;if(i.aborted)throw new AG(void 0,{cause:i.reason});({promise:e,resolve:n}=pG()),yield a}})(),{signal:i}),write(o,a,l){let c=n;n=null,c({chunk:o,done:!1,cb:l})},final(o){let a=n;n=null,a({done:!0,cb:o})},destroy(o,a){r.abort(),a(o)}}}function Ul(t){let e=t.readable&&typeof t.readable.read!="function"?mG.wrap(t.readable):t.readable,n=t.writable,r=!!Ufe(e),i=!!Bfe(n),s,o,a,l,c;function u(d){let E=l;l=null,E?E(d):d&&c.destroy(d)}return c=new Ws({readableObjectMode:!!(e!=null&&e.readableObjectMode),writableObjectMode:!!(n!=null&&n.writableObjectMode),readable:r,writable:i}),i&&(EG(n,d=>{i=!1,d&&Bl(e,d),u(d)}),c._write=function(d,E,f){n.write(d,E)?f():s=f},c._final=function(d){n.end(),o=d},n.on("drain",function(){if(s){let d=s;s=null,d()}}),n.on("finish",function(){if(o){let d=o;o=null,d()}})),r&&(EG(e,d=>{r=!1,d&&Bl(e,d),u(d)}),e.on("readable",function(){if(a){let d=a;a=null,d()}}),e.on("end",function(){c.push(null)}),c._read=function(){for(;;){let d=e.read();if(d===null){a=c._read;return}if(!c.push(d))return}}),c._destroy=function(d,E){!d&&l!==null&&(d=new AG),a=null,s=null,o=null,l===null?E(d):(l=E,Bl(n,d),Bl(e,d))},c}});var fi=C((WMe,OG)=>{"use strict";var{ObjectDefineProperties:qfe,ObjectGetOwnPropertyDescriptor:Ki,ObjectKeys:Xfe,ObjectSetPrototypeOf:_G}=dt();OG.exports=Fr;var l_=fd(),mr=Up();_G(Fr.prototype,l_.prototype);_G(Fr,l_);{let t=Xfe(mr.prototype);for(let e=0;e<t.length;e++){let n=t[e];Fr.prototype[n]||(Fr.prototype[n]=mr.prototype[n])}}function Fr(t){if(!(this instanceof Fr))return new Fr(t);l_.call(this,t),mr.call(this,t),t?(this.allowHalfOpen=t.allowHalfOpen!==!1,t.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),t.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}qfe(Fr.prototype,{writable:{__proto__:null,...Ki(mr.prototype,"writable")},writableHighWaterMark:{__proto__:null,...Ki(mr.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...Ki(mr.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...Ki(mr.prototype,"writableBuffer")},writableLength:{__proto__:null,...Ki(mr.prototype,"writableLength")},writableFinished:{__proto__:null,...Ki(mr.prototype,"writableFinished")},writableCorked:{__proto__:null,...Ki(mr.prototype,"writableCorked")},writableEnded:{__proto__:null,...Ki(mr.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...Ki(mr.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(t){this._readableState&&this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}});var o_;function NG(){return o_===void 0&&(o_={}),o_}Fr.fromWeb=function(t,e){return NG().newStreamDuplexFromReadableWritablePair(t,e)};Fr.toWeb=function(t){return NG().newReadableWritablePairFromDuplex(t)};var a_;Fr.from=function(t){return a_||(a_=IG()),a_(t,"body")}});var d_=C(($Me,yG)=>{"use strict";var{ObjectSetPrototypeOf:CG,Symbol:zfe}=dt();yG.exports=Ji;var{ERR_METHOD_NOT_IMPLEMENTED:jfe}=Dn().codes,u_=fi(),{getHighWaterMark:Kfe}=ud();CG(Ji.prototype,u_.prototype);CG(Ji,u_);var Td=zfe("kCallback");function Ji(t){if(!(this instanceof Ji))return new Ji(t);let e=t?Kfe(this,t,"readableHighWaterMark",!0):null;e===0&&(t={...t,highWaterMark:null,readableHighWaterMark:e,writableHighWaterMark:t.writableHighWaterMark||0}),u_.call(this,t),this._readableState.sync=!1,this[Td]=null,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",Jfe)}function c_(t){typeof this._flush=="function"&&!this.destroyed?this._flush((e,n)=>{if(e){t?t(e):this.destroy(e);return}n!=null&&this.push(n),this.push(null),t&&t()}):(this.push(null),t&&t())}function Jfe(){this._final!==c_&&c_.call(this)}Ji.prototype._final=c_;Ji.prototype._transform=function(t,e,n){throw new jfe("_transform()")};Ji.prototype._write=function(t,e,n){let r=this._readableState,i=this._writableState,s=r.length;this._transform(t,e,(o,a)=>{if(o){n(o);return}a!=null&&this.push(a),i.ended||s===r.length||r.length<r.highWaterMark?n():this[Td]=n})};Ji.prototype._read=function(){if(this[Td]){let t=this[Td];this[Td]=null,t()}}});var E_=C((kMe,wG)=>{"use strict";var{ObjectSetPrototypeOf:bG}=dt();wG.exports=Fl;var f_=d_();bG(Fl.prototype,f_.prototype);bG(Fl,f_);function Fl(t){if(!(this instanceof Fl))return new Fl(t);f_.call(this,t)}Fl.prototype._transform=function(t,e,n){n(null,t)}});var Gp=C((YMe,vG)=>{var Sd=je(),{ArrayIsArray:Qfe,Promise:Zfe,SymbolAsyncIterator:eEe,SymbolDispose:tEe}=dt(),Hp=ji(),{once:nEe}=$n(),rEe=Ho(),LG=fi(),{aggregateTwoErrors:iEe,codes:{ERR_INVALID_ARG_TYPE:I_,ERR_INVALID_RETURN_VALUE:h_,ERR_MISSING_ARGS:sEe,ERR_STREAM_DESTROYED:oEe,ERR_STREAM_PREMATURE_CLOSE:aEe},AbortError:lEe}=Dn(),{validateFunction:cEe,validateAbortSignal:uEe}=wl(),{isIterable:$o,isReadable:p_,isReadableNodeStream:Fp,isNodeStream:DG,isTransformStream:Hl,isWebStream:dEe,isReadableStream:T_,isReadableFinished:fEe}=ui(),EEe=globalThis.AbortController||Lt().AbortController,S_,R_,A_;function PG(t,e,n){let r=!1;t.on("close",()=>{r=!0});let i=Hp(t,{readable:e,writable:n},s=>{r=!s});return{destroy:s=>{r||(r=!0,rEe.destroyer(t,s||new oEe("pipe")))},cleanup:i}}function hEe(t){return cEe(t[t.length-1],"streams[stream.length - 1]"),t.pop()}function m_(t){if($o(t))return t;if(Fp(t))return pEe(t);throw new I_("val",["Readable","Iterable","AsyncIterable"],t)}async function*pEe(t){R_||(R_=fd()),yield*R_.prototype[eEe].call(t)}async function Bp(t,e,n,{end:r}){let i,s=null,o=c=>{if(c&&(i=c),s){let u=s;s=null,u()}},a=()=>new Zfe((c,u)=>{i?u(i):s=()=>{i?u(i):c()}});e.on("drain",o);let l=Hp(e,{readable:!1},o);try{e.writableNeedDrain&&await a();for await(let c of t)e.write(c)||await a();r&&(e.end(),await a()),n()}catch(c){n(i!==c?iEe(i,c):c)}finally{l(),e.off("drain",o)}}async function g_(t,e,n,{end:r}){Hl(e)&&(e=e.writable);let i=e.getWriter();try{for await(let s of t)await i.ready,i.write(s).catch(()=>{});await i.ready,r&&await i.close(),n()}catch(s){try{await i.abort(s),n(s)}catch(o){n(o)}}}function TEe(...t){return xG(t,nEe(hEe(t)))}function xG(t,e,n){if(t.length===1&&Qfe(t[0])&&(t=t[0]),t.length<2)throw new sEe("streams");let r=new EEe,i=r.signal,s=n?.signal,o=[];uEe(s,"options.signal");function a(){p(new lEe)}A_=A_||$n().addAbortListener;let l;s&&(l=A_(s,a));let c,u,d=[],E=0;function f(R){p(R,--E===0)}function p(R,m){var A;if(R&&(!c||c.code==="ERR_STREAM_PREMATURE_CLOSE")&&(c=R),!(!c&&!m)){for(;d.length;)d.shift()(c);(A=l)===null||A===void 0||A[tEe](),r.abort(),m&&(c||o.forEach(N=>N()),Sd.nextTick(e,c,u))}}let h;for(let R=0;R<t.length;R++){let m=t[R],A=R<t.length-1,N=R>0,g=A||n?.end!==!1,L=R===t.length-1;if(DG(m)){let y=function(D){D&&D.name!=="AbortError"&&D.code!=="ERR_STREAM_PREMATURE_CLOSE"&&f(D)};var I=y;if(g){let{destroy:D,cleanup:x}=PG(m,A,N);d.push(D),p_(m)&&L&&o.push(x)}m.on("error",y),p_(m)&&L&&o.push(()=>{m.removeListener("error",y)})}if(R===0)if(typeof m=="function"){if(h=m({signal:i}),!$o(h))throw new h_("Iterable, AsyncIterable or Stream","source",h)}else $o(m)||Fp(m)||Hl(m)?h=m:h=LG.from(m);else if(typeof m=="function"){if(Hl(h)){var T;h=m_((T=h)===null||T===void 0?void 0:T.readable)}else h=m_(h);if(h=m(h,{signal:i}),A){if(!$o(h,!0))throw new h_("AsyncIterable",`transform[${R-1}]`,h)}else{var S;S_||(S_=E_());let y=new S_({objectMode:!0}),D=(S=h)===null||S===void 0?void 0:S.then;if(typeof D=="function")E++,D.call(h,H=>{u=H,H!=null&&y.write(H),g&&y.end(),Sd.nextTick(f)},H=>{y.destroy(H),Sd.nextTick(f,H)});else if($o(h,!0))E++,Bp(h,y,f,{end:g});else if(T_(h)||Hl(h)){let H=h.readable||h;E++,Bp(H,y,f,{end:g})}else throw new h_("AsyncIterable or Promise","destination",h);h=y;let{destroy:x,cleanup:B}=PG(h,!1,!0);d.push(x),L&&o.push(B)}}else if(DG(m)){if(Fp(h)){E+=2;let y=SEe(h,m,f,{end:g});p_(m)&&L&&o.push(y)}else if(Hl(h)||T_(h)){let y=h.readable||h;E++,Bp(y,m,f,{end:g})}else if($o(h))E++,Bp(h,m,f,{end:g});else throw new I_("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],h);h=m}else if(dEe(m)){if(Fp(h))E++,g_(m_(h),m,f,{end:g});else if(T_(h)||$o(h))E++,g_(h,m,f,{end:g});else if(Hl(h))E++,g_(h.readable,m,f,{end:g});else throw new I_("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],h);h=m}else h=LG.from(m)}return(i!=null&&i.aborted||s!=null&&s.aborted)&&Sd.nextTick(a),h}function SEe(t,e,n,{end:r}){let i=!1;if(e.on("close",()=>{i||n(new aEe)}),t.pipe(e,{end:!1}),r){let o=function(){i=!0,e.end()};var s=o;fEe(t)?Sd.nextTick(o):t.once("end",o)}else n();return Hp(t,{readable:!0,writable:!1},o=>{let a=t._readableState;o&&o.code==="ERR_STREAM_PREMATURE_CLOSE"&&a&&a.ended&&!a.errored&&!a.errorEmitted?t.once("end",n).once("error",n):n(o)}),Hp(e,{readable:!1,writable:!0},n)}vG.exports={pipelineImpl:xG,pipeline:TEe}});var N_=C((VMe,GG)=>{"use strict";var{pipeline:REe}=Gp(),Wp=fi(),{destroyer:AEe}=Ho(),{isNodeStream:$p,isReadable:MG,isWritable:UG,isWebStream:__,isTransformStream:ko,isWritableStream:BG,isReadableStream:FG}=ui(),{AbortError:mEe,codes:{ERR_INVALID_ARG_VALUE:HG,ERR_MISSING_ARGS:gEe}}=Dn(),IEe=ji();GG.exports=function(...e){if(e.length===0)throw new gEe("streams");if(e.length===1)return Wp.from(e[0]);let n=[...e];if(typeof e[0]=="function"&&(e[0]=Wp.from(e[0])),typeof e[e.length-1]=="function"){let f=e.length-1;e[f]=Wp.from(e[f])}for(let f=0;f<e.length;++f)if(!(!$p(e[f])&&!__(e[f]))){if(f<e.length-1&&!(MG(e[f])||FG(e[f])||ko(e[f])))throw new HG(`streams[${f}]`,n[f],"must be readable");if(f>0&&!(UG(e[f])||BG(e[f])||ko(e[f])))throw new HG(`streams[${f}]`,n[f],"must be writable")}let r,i,s,o,a;function l(f){let p=o;o=null,p?p(f):f?a.destroy(f):!E&&!d&&a.destroy()}let c=e[0],u=REe(e,l),d=!!(UG(c)||BG(c)||ko(c)),E=!!(MG(u)||FG(u)||ko(u));if(a=new Wp({writableObjectMode:!!(c!=null&&c.writableObjectMode),readableObjectMode:!!(u!=null&&u.readableObjectMode),writable:d,readable:E}),d){if($p(c))a._write=function(p,h,T){c.write(p,h)?T():r=T},a._final=function(p){c.end(),i=p},c.on("drain",function(){if(r){let p=r;r=null,p()}});else if(__(c)){let h=(ko(c)?c.writable:c).getWriter();a._write=async function(T,S,I){try{await h.ready,h.write(T).catch(()=>{}),I()}catch(R){I(R)}},a._final=async function(T){try{await h.ready,h.close().catch(()=>{}),i=T}catch(S){T(S)}}}let f=ko(u)?u.readable:u;IEe(f,()=>{if(i){let p=i;i=null,p()}})}if(E){if($p(u))u.on("readable",function(){if(s){let f=s;s=null,f()}}),u.on("end",function(){a.push(null)}),a._read=function(){for(;;){let f=u.read();if(f===null){s=a._read;return}if(!a.push(f))return}};else if(__(u)){let p=(ko(u)?u.readable:u).getReader();a._read=async function(){for(;;)try{let{value:h,done:T}=await p.read();if(!a.push(h))return;if(T){a.push(null);return}}catch{return}}}}return a._destroy=function(f,p){!f&&o!==null&&(f=new mEe),s=null,r=null,i=null,o===null?p(f):(o=p,$p(u)&&AEe(u,f))},a}});var KG=C((qMe,y_)=>{"use strict";var _Ee=globalThis.AbortController||Lt().AbortController,{codes:{ERR_INVALID_ARG_VALUE:NEe,ERR_INVALID_ARG_TYPE:Rd,ERR_MISSING_ARGS:OEe,ERR_OUT_OF_RANGE:CEe},AbortError:Ei}=Dn(),{validateAbortSignal:Yo,validateInteger:WG,validateObject:Vo}=wl(),yEe=dt().Symbol("kWeak"),bEe=dt().Symbol("kResistStopPropagation"),{finished:wEe}=ji(),LEe=N_(),{addAbortSignalNoValidate:DEe}=cd(),{isWritable:PEe,isNodeStream:xEe}=ui(),{deprecate:vEe}=$n(),{ArrayPrototypePush:MEe,Boolean:UEe,MathFloor:$G,Number:BEe,NumberIsNaN:FEe,Promise:kG,PromiseReject:YG,PromiseResolve:HEe,PromisePrototypeThen:VG,Symbol:XG}=dt(),kp=XG("kEmpty"),qG=XG("kEof");function GEe(t,e){if(e!=null&&Vo(e,"options"),e?.signal!=null&&Yo(e.signal,"options.signal"),xEe(t)&&!PEe(t))throw new NEe("stream",t,"must be writable");let n=LEe(this,t);return e!=null&&e.signal&&DEe(e.signal,n),n}function Yp(t,e){if(typeof t!="function")throw new Rd("fn",["Function","AsyncFunction"],t);e!=null&&Vo(e,"options"),e?.signal!=null&&Yo(e.signal,"options.signal");let n=1;e?.concurrency!=null&&(n=$G(e.concurrency));let r=n-1;return e?.highWaterMark!=null&&(r=$G(e.highWaterMark)),WG(n,"options.concurrency",1),WG(r,"options.highWaterMark",0),r+=n,async function*(){let s=$n().AbortSignalAny([e?.signal].filter(UEe)),o=this,a=[],l={signal:s},c,u,d=!1,E=0;function f(){d=!0,p()}function p(){E-=1,h()}function h(){u&&!d&&E<n&&a.length<r&&(u(),u=null)}async function T(){try{for await(let S of o){if(d)return;if(s.aborted)throw new Ei;try{if(S=t(S,l),S===kp)continue;S=HEe(S)}catch(I){S=YG(I)}E+=1,VG(S,p,f),a.push(S),c&&(c(),c=null),!d&&(a.length>=r||E>=n)&&await new kG(I=>{u=I})}a.push(qG)}catch(S){let I=YG(S);VG(I,p,f),a.push(I)}finally{d=!0,c&&(c(),c=null)}}T();try{for(;;){for(;a.length>0;){let S=await a[0];if(S===qG)return;if(s.aborted)throw new Ei;S!==kp&&(yield S),a.shift(),h()}await new kG(S=>{c=S})}}finally{d=!0,u&&(u(),u=null)}}.call(this)}function WEe(t=void 0){return t!=null&&Vo(t,"options"),t?.signal!=null&&Yo(t.signal,"options.signal"),async function*(){let n=0;for await(let i of this){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new Ei({cause:t.signal.reason});yield[n++,i]}}.call(this)}async function zG(t,e=void 0){for await(let n of C_.call(this,t,e))return!0;return!1}async function $Ee(t,e=void 0){if(typeof t!="function")throw new Rd("fn",["Function","AsyncFunction"],t);return!await zG.call(this,async(...n)=>!await t(...n),e)}async function kEe(t,e){for await(let n of C_.call(this,t,e))return n}async function YEe(t,e){if(typeof t!="function")throw new Rd("fn",["Function","AsyncFunction"],t);async function n(r,i){return await t(r,i),kp}for await(let r of Yp.call(this,n,e));}function C_(t,e){if(typeof t!="function")throw new Rd("fn",["Function","AsyncFunction"],t);async function n(r,i){return await t(r,i)?r:kp}return Yp.call(this,n,e)}var O_=class extends OEe{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function VEe(t,e,n){var r;if(typeof t!="function")throw new Rd("reducer",["Function","AsyncFunction"],t);n!=null&&Vo(n,"options"),n?.signal!=null&&Yo(n.signal,"options.signal");let i=arguments.length>1;if(n!=null&&(r=n.signal)!==null&&r!==void 0&&r.aborted){let c=new Ei(void 0,{cause:n.signal.reason});throw this.once("error",()=>{}),await wEe(this.destroy(c)),c}let s=new _Ee,o=s.signal;if(n!=null&&n.signal){let c={once:!0,[yEe]:this,[bEe]:!0};n.signal.addEventListener("abort",()=>s.abort(),c)}let a=!1;try{for await(let c of this){var l;if(a=!0,n!=null&&(l=n.signal)!==null&&l!==void 0&&l.aborted)throw new Ei;i?e=await t(e,c,{signal:o}):(e=c,i=!0)}if(!a&&!i)throw new O_}finally{s.abort()}return e}async function qEe(t){t!=null&&Vo(t,"options"),t?.signal!=null&&Yo(t.signal,"options.signal");let e=[];for await(let r of this){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new Ei(void 0,{cause:t.signal.reason});MEe(e,r)}return e}function XEe(t,e){let n=Yp.call(this,t,e);return async function*(){for await(let i of n)yield*i}.call(this)}function jG(t){if(t=BEe(t),FEe(t))return 0;if(t<0)throw new CEe("number",">= 0",t);return t}function zEe(t,e=void 0){return e!=null&&Vo(e,"options"),e?.signal!=null&&Yo(e.signal,"options.signal"),t=jG(t),async function*(){var r;if(e!=null&&(r=e.signal)!==null&&r!==void 0&&r.aborted)throw new Ei;for await(let s of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new Ei;t--<=0&&(yield s)}}.call(this)}function jEe(t,e=void 0){return e!=null&&Vo(e,"options"),e?.signal!=null&&Yo(e.signal,"options.signal"),t=jG(t),async function*(){var r;if(e!=null&&(r=e.signal)!==null&&r!==void 0&&r.aborted)throw new Ei;for await(let s of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new Ei;if(t-- >0&&(yield s),t<=0)return}}.call(this)}y_.exports.streamReturningOperators={asIndexedPairs:vEe(WEe,"readable.asIndexedPairs will be removed in a future version."),drop:zEe,filter:C_,flatMap:XEe,map:Yp,take:jEe,compose:GEe};y_.exports.promiseReturningOperators={every:$Ee,forEach:YEe,reduce:VEe,toArray:qEe,some:zG,find:kEe}});var b_=C((XMe,JG)=>{"use strict";var{ArrayPrototypePop:KEe,Promise:JEe}=dt(),{isIterable:QEe,isNodeStream:ZEe,isWebStream:ehe}=ui(),{pipelineImpl:the}=Gp(),{finished:nhe}=ji();w_();function rhe(...t){return new JEe((e,n)=>{let r,i,s=t[t.length-1];if(s&&typeof s=="object"&&!ZEe(s)&&!QEe(s)&&!ehe(s)){let o=KEe(t);r=o.signal,i=o.end}the(t,(o,a)=>{o?n(o):e(a)},{signal:r,end:i})})}JG.exports={finished:nhe,pipeline:rhe}});var w_=C((zMe,oW)=>{"use strict";var{Buffer:ihe}=require("buffer"),{ObjectDefineProperty:Qi,ObjectKeys:eW,ReflectApply:tW}=dt(),{promisify:{custom:nW}}=$n(),{streamReturningOperators:QG,promiseReturningOperators:ZG}=KG(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:rW}}=Dn(),she=N_(),{setDefaultHighWaterMark:ohe,getDefaultHighWaterMark:ahe}=ud(),{pipeline:iW}=Gp(),{destroyer:lhe}=Ho(),sW=ji(),L_=b_(),Ad=ui(),ot=oW.exports=Np().Stream;ot.isDestroyed=Ad.isDestroyed;ot.isDisturbed=Ad.isDisturbed;ot.isErrored=Ad.isErrored;ot.isReadable=Ad.isReadable;ot.isWritable=Ad.isWritable;ot.Readable=fd();for(let t of eW(QG)){let n=function(...r){if(new.target)throw rW();return ot.Readable.from(tW(e,this,r))},e=QG[t];Qi(n,"name",{__proto__:null,value:e.name}),Qi(n,"length",{__proto__:null,value:e.length}),Qi(ot.Readable.prototype,t,{__proto__:null,value:n,enumerable:!1,configurable:!0,writable:!0})}for(let t of eW(ZG)){let n=function(...r){if(new.target)throw rW();return tW(e,this,r)},e=ZG[t];Qi(n,"name",{__proto__:null,value:e.name}),Qi(n,"length",{__proto__:null,value:e.length}),Qi(ot.Readable.prototype,t,{__proto__:null,value:n,enumerable:!1,configurable:!0,writable:!0})}ot.Writable=Up();ot.Duplex=fi();ot.Transform=d_();ot.PassThrough=E_();ot.pipeline=iW;var{addAbortSignal:che}=cd();ot.addAbortSignal=che;ot.finished=sW;ot.destroy=lhe;ot.compose=she;ot.setDefaultHighWaterMark=ohe;ot.getDefaultHighWaterMark=ahe;Qi(ot,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return L_}});Qi(iW,nW,{__proto__:null,enumerable:!0,get(){return L_.pipeline}});Qi(sW,nW,{__proto__:null,enumerable:!0,get(){return L_.finished}});ot.Stream=ot;ot._isUint8Array=function(e){return e instanceof Uint8Array};ot._uint8ArrayToBuffer=function(e){return ihe.from(e.buffer,e.byteOffset,e.byteLength)}});var D_=C((jMe,De)=>{"use strict";var kt=require("stream");if(kt&&process.env.READABLE_STREAM==="disable"){let t=kt.promises;De.exports._uint8ArrayToBuffer=kt._uint8ArrayToBuffer,De.exports._isUint8Array=kt._isUint8Array,De.exports.isDisturbed=kt.isDisturbed,De.exports.isErrored=kt.isErrored,De.exports.isReadable=kt.isReadable,De.exports.Readable=kt.Readable,De.exports.Writable=kt.Writable,De.exports.Duplex=kt.Duplex,De.exports.Transform=kt.Transform,De.exports.PassThrough=kt.PassThrough,De.exports.addAbortSignal=kt.addAbortSignal,De.exports.finished=kt.finished,De.exports.destroy=kt.destroy,De.exports.pipeline=kt.pipeline,De.exports.compose=kt.compose,Object.defineProperty(kt,"promises",{configurable:!0,enumerable:!0,get(){return t}}),De.exports.Stream=kt.Stream}else{let t=w_(),e=b_(),n=t.Readable.destroy;De.exports=t.Readable,De.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,De.exports._isUint8Array=t._isUint8Array,De.exports.isDisturbed=t.isDisturbed,De.exports.isErrored=t.isErrored,De.exports.isReadable=t.isReadable,De.exports.Readable=t.Readable,De.exports.Writable=t.Writable,De.exports.Duplex=t.Duplex,De.exports.Transform=t.Transform,De.exports.PassThrough=t.PassThrough,De.exports.addAbortSignal=t.addAbortSignal,De.exports.finished=t.finished,De.exports.destroy=t.destroy,De.exports.destroy=n,De.exports.pipeline=t.pipeline,De.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return e}}),De.exports.Stream=t.Stream}De.exports.default=De.exports});var dW=C((KMe,uW)=>{var v_=require("fs"),lW=lL(),aW=uL(),P_=require("path"),hi=yl(),uhe=require("util").inherits,Nt=R1(),cW=D_().Transform,x_=process.platform==="win32",qe=function(t,e){if(!(this instanceof qe))return new qe(t,e);typeof t!="string"&&(e=t,t="zip"),e=this.options=hi.defaults(e,{highWaterMark:1024*1024,statConcurrency:4}),cW.call(this,e),this._format=!1,this._module=!1,this._pending=0,this._pointer=0,this._entriesCount=0,this._entriesProcessedCount=0,this._fsEntriesTotalBytes=0,this._fsEntriesProcessedBytes=0,this._queue=aW.queue(this._onQueueTask.bind(this),1),this._queue.drain(this._onQueueDrain.bind(this)),this._statQueue=aW.queue(this._onStatQueueTask.bind(this),e.statConcurrency),this._statQueue.drain(this._onQueueDrain.bind(this)),this._state={aborted:!1,finalize:!1,finalizing:!1,finalized:!1,modulePiped:!1},this._streams=[]};uhe(qe,cW);qe.prototype._abort=function(){this._state.aborted=!0,this._queue.kill(),this._statQueue.kill(),this._queue.idle()&&this._shutdown()};qe.prototype._append=function(t,e){e=e||{};var n={source:null,filepath:t};e.name||(e.name=t),e.sourcePath=t,n.data=e,this._entriesCount++,e.stats&&e.stats instanceof v_.Stats?(n=this._updateQueueTaskWithStats(n,e.stats),n&&(e.stats.size&&(this._fsEntriesTotalBytes+=e.stats.size),this._queue.push(n))):this._statQueue.push(n)};qe.prototype._finalize=function(){this._state.finalizing||this._state.finalized||this._state.aborted||(this._state.finalizing=!0,this._moduleFinalize(),this._state.finalizing=!1,this._state.finalized=!0)};qe.prototype._maybeFinalize=function(){return this._state.finalizing||this._state.finalized||this._state.aborted?!1:this._state.finalize&&this._pending===0&&this._queue.idle()&&this._statQueue.idle()?(this._finalize(),!0):!1};qe.prototype._moduleAppend=function(t,e,n){if(this._state.aborted){n();return}this._module.append(t,e,function(r){if(this._task=null,this._state.aborted){this._shutdown();return}if(r){this.emit("error",r),setImmediate(n);return}this.emit("entry",e),this._entriesProcessedCount++,e.stats&&e.stats.size&&(this._fsEntriesProcessedBytes+=e.stats.size),this.emit("progress",{entries:{total:this._entriesCount,processed:this._entriesProcessedCount},fs:{totalBytes:this._fsEntriesTotalBytes,processedBytes:this._fsEntriesProcessedBytes}}),setImmediate(n)}.bind(this))};qe.prototype._moduleFinalize=function(){typeof this._module.finalize=="function"?this._module.finalize():typeof this._module.end=="function"?this._module.end():this.emit("error",new Nt("NOENDMETHOD"))};qe.prototype._modulePipe=function(){this._module.on("error",this._onModuleError.bind(this)),this._module.pipe(this),this._state.modulePiped=!0};qe.prototype._moduleSupports=function(t){return!this._module.supports||!this._module.supports[t]?!1:this._module.supports[t]};qe.prototype._moduleUnpipe=function(){this._module.unpipe(this),this._state.modulePiped=!1};qe.prototype._normalizeEntryData=function(t,e){t=hi.defaults(t,{type:"file",name:null,date:null,mode:null,prefix:null,sourcePath:null,stats:!1}),e&&t.stats===!1&&(t.stats=e);var n=t.type==="directory";return t.name&&(typeof t.prefix=="string"&&t.prefix!==""&&(t.name=t.prefix+"/"+t.name,t.prefix=null),t.name=hi.sanitizePath(t.name),t.type!=="symlink"&&t.name.slice(-1)==="/"?(n=!0,t.type="directory"):n&&(t.name+="/")),typeof t.mode=="number"?x_?t.mode&=511:t.mode&=4095:t.stats&&t.mode===null?(x_?t.mode=t.stats.mode&511:t.mode=t.stats.mode&4095,x_&&n&&(t.mode=493)):t.mode===null&&(t.mode=n?493:420),t.stats&&t.date===null?t.date=t.stats.mtime:t.date=hi.dateify(t.date),t};qe.prototype._onModuleError=function(t){this.emit("error",t)};qe.prototype._onQueueDrain=function(){this._state.finalizing||this._state.finalized||this._state.aborted||this._state.finalize&&this._pending===0&&this._queue.idle()&&this._statQueue.idle()&&this._finalize()};qe.prototype._onQueueTask=function(t,e){var n=()=>{t.data.callback&&t.data.callback(),e()};if(this._state.finalizing||this._state.finalized||this._state.aborted){n();return}this._task=t,this._moduleAppend(t.source,t.data,n)};qe.prototype._onStatQueueTask=function(t,e){if(this._state.finalizing||this._state.finalized||this._state.aborted){e();return}v_.lstat(t.filepath,function(n,r){if(this._state.aborted){setImmediate(e);return}if(n){this._entriesCount--,this.emit("warning",n),setImmediate(e);return}t=this._updateQueueTaskWithStats(t,r),t&&(r.size&&(this._fsEntriesTotalBytes+=r.size),this._queue.push(t)),setImmediate(e)}.bind(this))};qe.prototype._shutdown=function(){this._moduleUnpipe(),this.end()};qe.prototype._transform=function(t,e,n){t&&(this._pointer+=t.length),n(null,t)};qe.prototype._updateQueueTaskWithStats=function(t,e){if(e.isFile())t.data.type="file",t.data.sourceType="stream",t.source=hi.lazyReadStream(t.filepath);else if(e.isDirectory()&&this._moduleSupports("directory"))t.data.name=hi.trailingSlashIt(t.data.name),t.data.type="directory",t.data.sourcePath=hi.trailingSlashIt(t.filepath),t.data.sourceType="buffer",t.source=Buffer.concat([]);else if(e.isSymbolicLink()&&this._moduleSupports("symlink")){var n=v_.readlinkSync(t.filepath),r=P_.dirname(t.filepath);t.data.type="symlink",t.data.linkname=P_.relative(r,P_.resolve(r,n)),t.data.sourceType="buffer",t.source=Buffer.concat([])}else return e.isDirectory()?this.emit("warning",new Nt("DIRECTORYNOTSUPPORTED",t.data)):e.isSymbolicLink()?this.emit("warning",new Nt("SYMLINKNOTSUPPORTED",t.data)):this.emit("warning",new Nt("ENTRYNOTSUPPORTED",t.data)),null;return t.data=this._normalizeEntryData(t.data,e),t};qe.prototype.abort=function(){return this._state.aborted||this._state.finalized?this:(this._abort(),this)};qe.prototype.append=function(t,e){if(this._state.finalize||this._state.aborted)return this.emit("error",new Nt("QUEUECLOSED")),this;if(e=this._normalizeEntryData(e),typeof e.name!="string"||e.name.length===0)return this.emit("error",new Nt("ENTRYNAMEREQUIRED")),this;if(e.type==="directory"&&!this._moduleSupports("directory"))return this.emit("error",new Nt("DIRECTORYNOTSUPPORTED",{name:e.name})),this;if(t=hi.normalizeInputSource(t),Buffer.isBuffer(t))e.sourceType="buffer";else if(hi.isStream(t))e.sourceType="stream";else return this.emit("error",new Nt("INPUTSTEAMBUFFERREQUIRED",{name:e.name})),this;return this._entriesCount++,this._queue.push({data:e,source:t}),this};qe.prototype.directory=function(t,e,n){if(this._state.finalize||this._state.aborted)return this.emit("error",new Nt("QUEUECLOSED")),this;if(typeof t!="string"||t.length===0)return this.emit("error",new Nt("DIRECTORYDIRPATHREQUIRED")),this;this._pending++,e===!1?e="":typeof e!="string"&&(e=t);var r=!1;typeof n=="function"?(r=n,n={}):typeof n!="object"&&(n={});var i={stat:!0,dot:!0};function s(){this._pending--,this._maybeFinalize()}function o(c){this.emit("error",c)}function a(c){l.pause();var u=!1,d=Object.assign({},n);d.name=c.relative,d.prefix=e,d.stats=c.stat,d.callback=l.resume.bind(l);try{if(r){if(d=r(d),d===!1)u=!0;else if(typeof d!="object")throw new Nt("DIRECTORYFUNCTIONINVALIDDATA",{dirpath:t})}}catch(E){this.emit("error",E);return}if(u){l.resume();return}this._append(c.absolute,d)}var l=lW(t,i);return l.on("error",o.bind(this)),l.on("match",a.bind(this)),l.on("end",s.bind(this)),this};qe.prototype.file=function(t,e){return this._state.finalize||this._state.aborted?(this.emit("error",new Nt("QUEUECLOSED")),this):typeof t!="string"||t.length===0?(this.emit("error",new Nt("FILEFILEPATHREQUIRED")),this):(this._append(t,e),this)};qe.prototype.glob=function(t,e,n){this._pending++,e=hi.defaults(e,{stat:!0,pattern:t});function r(){this._pending--,this._maybeFinalize()}function i(a){this.emit("error",a)}function s(a){o.pause();var l=Object.assign({},n);l.callback=o.resume.bind(o),l.stats=a.stat,l.name=a.relative,this._append(a.absolute,l)}var o=lW(e.cwd||".",e);return o.on("error",i.bind(this)),o.on("match",s.bind(this)),o.on("end",r.bind(this)),this};qe.prototype.finalize=function(){if(this._state.aborted){var t=new Nt("ABORTED");return this.emit("error",t),Promise.reject(t)}if(this._state.finalize){var e=new Nt("FINALIZING");return this.emit("error",e),Promise.reject(e)}this._state.finalize=!0,this._pending===0&&this._queue.idle()&&this._statQueue.idle()&&this._finalize();var n=this;return new Promise(function(r,i){var s;n._module.on("end",function(){s||r()}),n._module.on("error",function(o){s=!0,i(o)})})};qe.prototype.setFormat=function(t){return this._format?(this.emit("error",new Nt("FORMATSET")),this):(this._format=t,this)};qe.prototype.setModule=function(t){return this._state.aborted?(this.emit("error",new Nt("ABORTED")),this):this._state.module?(this.emit("error",new Nt("MODULESET")),this):(this._module=t,this._modulePipe(),this)};qe.prototype.symlink=function(t,e,n){if(this._state.finalize||this._state.aborted)return this.emit("error",new Nt("QUEUECLOSED")),this;if(typeof t!="string"||t.length===0)return this.emit("error",new Nt("SYMLINKFILEPATHREQUIRED")),this;if(typeof e!="string"||e.length===0)return this.emit("error",new Nt("SYMLINKTARGETREQUIRED",{filepath:t})),this;if(!this._moduleSupports("symlink"))return this.emit("error",new Nt("SYMLINKNOTSUPPORTED",{filepath:t})),this;var r={};return r.type="symlink",r.name=t.replace(/\\/g,"/"),r.linkname=e.replace(/\\/g,"/"),r.sourceType="buffer",typeof n=="number"&&(r.mode=n),this._entriesCount++,this._queue.push({data:r,source:Buffer.concat([])}),this};qe.prototype.pointer=function(){return this._pointer};qe.prototype.use=function(t){return this._streams.push(t),this};uW.exports=qe});var qp=C((JMe,fW)=>{var Vp=fW.exports=function(){};Vp.prototype.getName=function(){};Vp.prototype.getSize=function(){};Vp.prototype.getLastModifiedDate=function(){};Vp.prototype.isDirectory=function(){}});var Xp=C((QMe,EW)=>{var gr=EW.exports={};gr.dateToDos=function(t,e){e=e||!1;var n=e?t.getFullYear():t.getUTCFullYear();if(n<1980)return 2162688;if(n>=2044)return 2141175677;var r={year:n,month:e?t.getMonth():t.getUTCMonth(),date:e?t.getDate():t.getUTCDate(),hours:e?t.getHours():t.getUTCHours(),minutes:e?t.getMinutes():t.getUTCMinutes(),seconds:e?t.getSeconds():t.getUTCSeconds()};return r.year-1980<<25|r.month+1<<21|r.date<<16|r.hours<<11|r.minutes<<5|r.seconds/2};gr.dosToDate=function(t){return new Date((t>>25&127)+1980,(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(t&31)<<1)};gr.fromDosTime=function(t){return gr.dosToDate(t.readUInt32LE(0))};gr.getEightBytes=function(t){var e=Buffer.alloc(8);return e.writeUInt32LE(t%4294967296,0),e.writeUInt32LE(t/4294967296|0,4),e};gr.getShortBytes=function(t){var e=Buffer.alloc(2);return e.writeUInt16LE((t&65535)>>>0,0),e};gr.getShortBytesValue=function(t,e){return t.readUInt16LE(e)};gr.getLongBytes=function(t){var e=Buffer.alloc(4);return e.writeUInt32LE((t&4294967295)>>>0,0),e};gr.getLongBytesValue=function(t,e){return t.readUInt32LE(e)};gr.toDosTime=function(t){return gr.getLongBytes(gr.dateToDos(t))}});var M_=C((ZMe,AW)=>{var hW=Xp(),pW=8,TW=1,dhe=4,fhe=2,SW=64,RW=2048,mn=AW.exports=function(){return this instanceof mn?(this.descriptor=!1,this.encryption=!1,this.utf8=!1,this.numberOfShannonFanoTrees=0,this.strongEncryption=!1,this.slidingDictionarySize=0,this):new mn};mn.prototype.encode=function(){return hW.getShortBytes((this.descriptor?pW:0)|(this.utf8?RW:0)|(this.encryption?TW:0)|(this.strongEncryption?SW:0))};mn.prototype.parse=function(t,e){var n=hW.getShortBytesValue(t,e),r=new mn;return r.useDataDescriptor((n&pW)!==0),r.useUTF8ForNames((n&RW)!==0),r.useStrongEncryption((n&SW)!==0),r.useEncryption((n&TW)!==0),r.setSlidingDictionarySize((n&fhe)!==0?8192:4096),r.setNumberOfShannonFanoTrees((n&dhe)!==0?3:2),r};mn.prototype.setNumberOfShannonFanoTrees=function(t){this.numberOfShannonFanoTrees=t};mn.prototype.getNumberOfShannonFanoTrees=function(){return this.numberOfShannonFanoTrees};mn.prototype.setSlidingDictionarySize=function(t){this.slidingDictionarySize=t};mn.prototype.getSlidingDictionarySize=function(){return this.slidingDictionarySize};mn.prototype.useDataDescriptor=function(t){this.descriptor=t};mn.prototype.usesDataDescriptor=function(){return this.descriptor};mn.prototype.useEncryption=function(t){this.encryption=t};mn.prototype.usesEncryption=function(){return this.encryption};mn.prototype.useStrongEncryption=function(t){this.strongEncryption=t};mn.prototype.usesStrongEncryption=function(){return this.strongEncryption};mn.prototype.useUTF8ForNames=function(t){this.utf8=t};mn.prototype.usesUTF8ForNames=function(){return this.utf8}});var gW=C((eUe,mW)=>{mW.exports={PERM_MASK:4095,FILE_TYPE_FLAG:61440,LINK_FLAG:40960,FILE_FLAG:32768,DIR_FLAG:16384,DEFAULT_LINK_PERM:511,DEFAULT_DIR_PERM:493,DEFAULT_FILE_PERM:420}});var U_=C((tUe,IW)=>{IW.exports={WORD:4,DWORD:8,EMPTY:Buffer.alloc(0),SHORT:2,SHORT_MASK:65535,SHORT_SHIFT:16,SHORT_ZERO:Buffer.from(Array(2)),LONG:4,LONG_ZERO:Buffer.from(Array(4)),MIN_VERSION_INITIAL:10,MIN_VERSION_DATA_DESCRIPTOR:20,MIN_VERSION_ZIP64:45,VERSION_MADEBY:45,METHOD_STORED:0,METHOD_DEFLATED:8,PLATFORM_UNIX:3,PLATFORM_FAT:0,SIG_LFH:67324752,SIG_DD:134695760,SIG_CFH:33639248,SIG_EOCD:101010256,SIG_ZIP64_EOCD:101075792,SIG_ZIP64_EOCD_LOC:117853008,ZIP64_MAGIC_SHORT:65535,ZIP64_MAGIC:4294967295,ZIP64_EXTRA_ID:1,ZLIB_NO_COMPRESSION:0,ZLIB_BEST_SPEED:1,ZLIB_BEST_COMPRESSION:9,ZLIB_DEFAULT_COMPRESSION:-1,MODE_MASK:4095,DEFAULT_FILE_MODE:33188,DEFAULT_DIR_MODE:16877,EXT_FILE_ATTR_DIR:1106051088,EXT_FILE_ATTR_FILE:2175008800,S_IFMT:61440,S_IFIFO:4096,S_IFCHR:8192,S_IFDIR:16384,S_IFBLK:24576,S_IFREG:32768,S_IFLNK:40960,S_IFSOCK:49152,S_DOS_A:32,S_DOS_D:16,S_DOS_V:8,S_DOS_S:4,S_DOS_H:2,S_DOS_R:1}});var B_=C((nUe,yW)=>{var Ehe=require("util").inherits,hhe=nm(),NW=qp(),OW=M_(),_W=gW(),kn=U_(),CW=Xp(),ye=yW.exports=function(t){if(!(this instanceof ye))return new ye(t);NW.call(this),this.platform=kn.PLATFORM_FAT,this.method=-1,this.name=null,this.size=0,this.csize=0,this.gpb=new OW,this.crc=0,this.time=-1,this.minver=kn.MIN_VERSION_INITIAL,this.mode=-1,this.extra=null,this.exattr=0,this.inattr=0,this.comment=null,t&&this.setName(t)};Ehe(ye,NW);ye.prototype.getCentralDirectoryExtra=function(){return this.getExtra()};ye.prototype.getComment=function(){return this.comment!==null?this.comment:""};ye.prototype.getCompressedSize=function(){return this.csize};ye.prototype.getCrc=function(){return this.crc};ye.prototype.getExternalAttributes=function(){return this.exattr};ye.prototype.getExtra=function(){return this.extra!==null?this.extra:kn.EMPTY};ye.prototype.getGeneralPurposeBit=function(){return this.gpb};ye.prototype.getInternalAttributes=function(){return this.inattr};ye.prototype.getLastModifiedDate=function(){return this.getTime()};ye.prototype.getLocalFileDataExtra=function(){return this.getExtra()};ye.prototype.getMethod=function(){return this.method};ye.prototype.getName=function(){return this.name};ye.prototype.getPlatform=function(){return this.platform};ye.prototype.getSize=function(){return this.size};ye.prototype.getTime=function(){return this.time!==-1?CW.dosToDate(this.time):-1};ye.prototype.getTimeDos=function(){return this.time!==-1?this.time:0};ye.prototype.getUnixMode=function(){return this.platform!==kn.PLATFORM_UNIX?0:this.getExternalAttributes()>>kn.SHORT_SHIFT&kn.SHORT_MASK};ye.prototype.getVersionNeededToExtract=function(){return this.minver};ye.prototype.setComment=function(t){Buffer.byteLength(t)!==t.length&&this.getGeneralPurposeBit().useUTF8ForNames(!0),this.comment=t};ye.prototype.setCompressedSize=function(t){if(t<0)throw new Error("invalid entry compressed size");this.csize=t};ye.prototype.setCrc=function(t){if(t<0)throw new Error("invalid entry crc32");this.crc=t};ye.prototype.setExternalAttributes=function(t){this.exattr=t>>>0};ye.prototype.setExtra=function(t){this.extra=t};ye.prototype.setGeneralPurposeBit=function(t){if(!(t instanceof OW))throw new Error("invalid entry GeneralPurposeBit");this.gpb=t};ye.prototype.setInternalAttributes=function(t){this.inattr=t};ye.prototype.setMethod=function(t){if(t<0)throw new Error("invalid entry compression method");this.method=t};ye.prototype.setName=function(t,e=!1){t=hhe(t,!1).replace(/^\w+:/,"").replace(/^(\.\.\/|\/)+/,""),e&&(t=`/${t}`),Buffer.byteLength(t)!==t.length&&this.getGeneralPurposeBit().useUTF8ForNames(!0),this.name=t};ye.prototype.setPlatform=function(t){this.platform=t};ye.prototype.setSize=function(t){if(t<0)throw new Error("invalid entry size");this.size=t};ye.prototype.setTime=function(t,e){if(!(t instanceof Date))throw new Error("invalid entry time");this.time=CW.dateToDos(t,e)};ye.prototype.setUnixMode=function(t){t|=this.isDirectory()?kn.S_IFDIR:kn.S_IFREG;var e=0;e|=t<<kn.SHORT_SHIFT|(this.isDirectory()?kn.S_DOS_D:kn.S_DOS_A),this.setExternalAttributes(e),this.mode=t&kn.MODE_MASK,this.platform=kn.PLATFORM_UNIX};ye.prototype.setVersionNeededToExtract=function(t){this.minver=t};ye.prototype.isDirectory=function(){return this.getName().slice(-1)==="/"};ye.prototype.isUnixSymlink=function(){return(this.getUnixMode()&_W.FILE_TYPE_FLAG)===_W.LINK_FLAG};ye.prototype.isZip64=function(){return this.csize>kn.ZIP64_MAGIC||this.size>kn.ZIP64_MAGIC}});var ft=C((rUe,bW)=>{"use strict";var F_=class extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError(`Expected input to be an Array, got ${typeof e}`);let n="";for(let r=0;r<e.length;r++)n+=`    ${e[r].stack}
`;super(n),this.name="AggregateError",this.errors=e}};bW.exports={AggregateError:F_,ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,e){return t.includes(e)},ArrayPrototypeIndexOf(t,e){return t.indexOf(e)},ArrayPrototypeJoin(t,e){return t.join(e)},ArrayPrototypeMap(t,e){return t.map(e)},ArrayPrototypePop(t,e){return t.pop(e)},ArrayPrototypePush(t,e){return t.push(e)},ArrayPrototypeSlice(t,e,n){return t.slice(e,n)},Error,FunctionPrototypeCall(t,e,...n){return t.call(e,...n)},FunctionPrototypeSymbolHasInstance(t,e){return Function.prototype[Symbol.hasInstance].call(t,e)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,e){return Object.defineProperties(t,e)},ObjectDefineProperty(t,e,n){return Object.defineProperty(t,e,n)},ObjectGetOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,e){return Object.setPrototypeOf(t,e)},Promise,PromisePrototypeCatch(t,e){return t.catch(e)},PromisePrototypeThen(t,e,n){return t.then(e,n)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,e){return t.test(e)},SafeSet:Set,String,StringPrototypeSlice(t,e,n){return t.slice(e,n)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,e,n){return t.set(e,n)},Boolean,Uint8Array}});var H_=C((iUe,wW)=>{"use strict";wW.exports={format(t,...e){return t.replace(/%([sdifj])/g,function(...[n,r]){let i=e.shift();return r==="f"?i.toFixed(6):r==="j"?JSON.stringify(i):r==="s"&&typeof i=="object"?`${i.constructor!==Object?i.constructor.name:""} {}`.trim():i.toString()})},inspect(t){switch(typeof t){case"string":if(t.includes("'"))if(t.includes('"')){if(!t.includes("`")&&!t.includes("${"))return`\`${t}\``}else return`"${t}"`;return`'${t}'`;case"number":return isNaN(t)?"NaN":Object.is(t,-0)?String(t):t;case"bigint":return`${String(t)}n`;case"boolean":case"undefined":return String(t);case"object":return"{}"}}}});var xn=C((sUe,PW)=>{"use strict";var{format:phe,inspect:zp}=H_(),{AggregateError:The}=ft(),She=globalThis.AggregateError||The,Rhe=Symbol("kIsNodeError"),Ahe=["string","function","number","object","Function","Object","boolean","bigint","symbol"],mhe=/^([A-Z][a-z0-9]*)+$/,ghe="__node_internal_",jp={};function qo(t,e){if(!t)throw new jp.ERR_INTERNAL_ASSERTION(e)}function LW(t){let e="",n=t.length,r=t[0]==="-"?1:0;for(;n>=r+4;n-=3)e=`_${t.slice(n-3,n)}${e}`;return`${t.slice(0,n)}${e}`}function Ihe(t,e,n){if(typeof e=="function")return qo(e.length<=n.length,`Code: ${t}; The provided arguments length (${n.length}) does not match the required ones (${e.length}).`),e(...n);let r=(e.match(/%[dfijoOs]/g)||[]).length;return qo(r===n.length,`Code: ${t}; The provided arguments length (${n.length}) does not match the required ones (${r}).`),n.length===0?e:phe(e,...n)}function gn(t,e,n){n||(n=Error);class r extends n{constructor(...s){super(Ihe(t,e,s))}toString(){return`${this.name} [${t}]: ${this.message}`}}Object.defineProperties(r.prototype,{name:{value:n.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${t}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),r.prototype.code=t,r.prototype[Rhe]=!0,jp[t]=r}function DW(t){let e=ghe+t.name;return Object.defineProperty(t,"name",{value:e}),t}function _he(t,e){if(t&&e&&t!==e){if(Array.isArray(e.errors))return e.errors.push(t),e;let n=new She([e,t],e.message);return n.code=e.code,n}return t||e}var G_=class extends Error{constructor(e="The operation was aborted",n=void 0){if(n!==void 0&&typeof n!="object")throw new jp.ERR_INVALID_ARG_TYPE("options","Object",n);super(e,n),this.code="ABORT_ERR",this.name="AbortError"}};gn("ERR_ASSERTION","%s",Error);gn("ERR_INVALID_ARG_TYPE",(t,e,n)=>{qo(typeof t=="string","'name' must be a string"),Array.isArray(e)||(e=[e]);let r="The ";t.endsWith(" argument")?r+=`${t} `:r+=`"${t}" ${t.includes(".")?"property":"argument"} `,r+="must be ";let i=[],s=[],o=[];for(let l of e)qo(typeof l=="string","All expected entries have to be of type string"),Ahe.includes(l)?i.push(l.toLowerCase()):mhe.test(l)?s.push(l):(qo(l!=="object",'The value "object" should be written as "Object"'),o.push(l));if(s.length>0){let l=i.indexOf("object");l!==-1&&(i.splice(i,l,1),s.push("Object"))}if(i.length>0){switch(i.length){case 1:r+=`of type ${i[0]}`;break;case 2:r+=`one of type ${i[0]} or ${i[1]}`;break;default:{let l=i.pop();r+=`one of type ${i.join(", ")}, or ${l}`}}(s.length>0||o.length>0)&&(r+=" or ")}if(s.length>0){switch(s.length){case 1:r+=`an instance of ${s[0]}`;break;case 2:r+=`an instance of ${s[0]} or ${s[1]}`;break;default:{let l=s.pop();r+=`an instance of ${s.join(", ")}, or ${l}`}}o.length>0&&(r+=" or ")}switch(o.length){case 0:break;case 1:o[0].toLowerCase()!==o[0]&&(r+="an "),r+=`${o[0]}`;break;case 2:r+=`one of ${o[0]} or ${o[1]}`;break;default:{let l=o.pop();r+=`one of ${o.join(", ")}, or ${l}`}}if(n==null)r+=`. Received ${n}`;else if(typeof n=="function"&&n.name)r+=`. Received function ${n.name}`;else if(typeof n=="object"){var a;if((a=n.constructor)!==null&&a!==void 0&&a.name)r+=`. Received an instance of ${n.constructor.name}`;else{let l=zp(n,{depth:-1});r+=`. Received ${l}`}}else{let l=zp(n,{colors:!1});l.length>25&&(l=`${l.slice(0,25)}...`),r+=`. Received type ${typeof n} (${l})`}return r},TypeError);gn("ERR_INVALID_ARG_VALUE",(t,e,n="is invalid")=>{let r=zp(e);return r.length>128&&(r=r.slice(0,128)+"..."),`The ${t.includes(".")?"property":"argument"} '${t}' ${n}. Received ${r}`},TypeError);gn("ERR_INVALID_RETURN_VALUE",(t,e,n)=>{var r;let i=n!=null&&(r=n.constructor)!==null&&r!==void 0&&r.name?`instance of ${n.constructor.name}`:`type ${typeof n}`;return`Expected ${t} to be returned from the "${e}" function but got ${i}.`},TypeError);gn("ERR_MISSING_ARGS",(...t)=>{qo(t.length>0,"At least one arg needs to be specified");let e,n=t.length;switch(t=(Array.isArray(t)?t:[t]).map(r=>`"${r}"`).join(" or "),n){case 1:e+=`The ${t[0]} argument`;break;case 2:e+=`The ${t[0]} and ${t[1]} arguments`;break;default:{let r=t.pop();e+=`The ${t.join(", ")}, and ${r} arguments`}break}return`${e} must be specified`},TypeError);gn("ERR_OUT_OF_RANGE",(t,e,n)=>{qo(e,'Missing "range" argument');let r;if(Number.isInteger(n)&&Math.abs(n)>2**32)r=LW(String(n));else if(typeof n=="bigint"){r=String(n);let i=BigInt(2)**BigInt(32);(n>i||n<-i)&&(r=LW(r)),r+="n"}else r=zp(n);return`The value of "${t}" is out of range. It must be ${e}. Received ${r}`},RangeError);gn("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);gn("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);gn("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);gn("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);gn("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);gn("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);gn("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);gn("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);gn("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);gn("ERR_STREAM_WRITE_AFTER_END","write after end",Error);gn("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);PW.exports={AbortError:G_,aggregateTwoErrors:DW(_he),hideStackFrames:DW,codes:jp}});var Yn=C((oUe,$_)=>{"use strict";var Nhe=require("buffer"),{format:Ohe,inspect:Che}=H_(),{codes:{ERR_INVALID_ARG_TYPE:W_}}=xn(),{kResistStopPropagation:yhe,AggregateError:bhe,SymbolDispose:whe}=ft(),Lhe=globalThis.AbortSignal||Lt().AbortSignal,Dhe=globalThis.AbortController||Lt().AbortController,Phe=Object.getPrototypeOf(async function(){}).constructor,xW=globalThis.Blob||Nhe.Blob,xhe=typeof xW<"u"?function(e){return e instanceof xW}:function(e){return!1},vW=(t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new W_(e,"AbortSignal",t)},vhe=(t,e)=>{if(typeof t!="function")throw new W_(e,"Function",t)};$_.exports={AggregateError:bhe,kEmptyObject:Object.freeze({}),once(t){let e=!1;return function(...n){e||(e=!0,t.apply(this,n))}},createDeferredPromise:function(){let t,e;return{promise:new Promise((r,i)=>{t=r,e=i}),resolve:t,reject:e}},promisify(t){return new Promise((e,n)=>{t((r,...i)=>r?n(r):e(...i))})},debuglog(){return function(){}},format:Ohe,inspect:Che,types:{isAsyncFunction(t){return t instanceof Phe},isArrayBufferView(t){return ArrayBuffer.isView(t)}},isBlob:xhe,deprecate(t,e){return t},addAbortListener:require("events").addAbortListener||function(e,n){if(e===void 0)throw new W_("signal","AbortSignal",e);vW(e,"signal"),vhe(n,"listener");let r;return e.aborted?queueMicrotask(()=>n()):(e.addEventListener("abort",n,{__proto__:null,once:!0,[yhe]:!0}),r=()=>{e.removeEventListener("abort",n)}),{__proto__:null,[whe](){var i;(i=r)===null||i===void 0||i()}}},AbortSignalAny:Lhe.any||function(e){if(e.length===1)return e[0];let n=new Dhe,r=()=>n.abort();return e.forEach(i=>{vW(i,"signals"),i.addEventListener("abort",r,{once:!0})}),n.signal.addEventListener("abort",()=>{e.forEach(i=>i.removeEventListener("abort",r))},{once:!0}),n.signal}};$_.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")});var Wl=C((aUe,YW)=>{"use strict";var{ArrayIsArray:Y_,ArrayPrototypeIncludes:FW,ArrayPrototypeJoin:HW,ArrayPrototypeMap:Mhe,NumberIsInteger:V_,NumberIsNaN:Uhe,NumberMAX_SAFE_INTEGER:Bhe,NumberMIN_SAFE_INTEGER:Fhe,NumberParseInt:Hhe,ObjectPrototypeHasOwnProperty:Ghe,RegExpPrototypeExec:GW,String:Whe,StringPrototypeToUpperCase:$he,StringPrototypeTrim:khe}=ft(),{hideStackFrames:Ir,codes:{ERR_SOCKET_BAD_PORT:Yhe,ERR_INVALID_ARG_TYPE:vn,ERR_INVALID_ARG_VALUE:Gl,ERR_OUT_OF_RANGE:Xo,ERR_UNKNOWN_SIGNAL:MW}}=xn(),{normalizeEncoding:Vhe}=Yn(),{isAsyncFunction:qhe,isArrayBufferView:Xhe}=Yn().types,UW={};function zhe(t){return t===(t|0)}function jhe(t){return t===t>>>0}var Khe=/^[0-7]+$/,Jhe="must be a 32-bit unsigned integer or an octal string";function Qhe(t,e,n){if(typeof t>"u"&&(t=n),typeof t=="string"){if(GW(Khe,t)===null)throw new Gl(e,t,Jhe);t=Hhe(t,8)}return WW(t,e),t}var Zhe=Ir((t,e,n=Fhe,r=Bhe)=>{if(typeof t!="number")throw new vn(e,"number",t);if(!V_(t))throw new Xo(e,"an integer",t);if(t<n||t>r)throw new Xo(e,`>= ${n} && <= ${r}`,t)}),epe=Ir((t,e,n=-2147483648,r=2147483647)=>{if(typeof t!="number")throw new vn(e,"number",t);if(!V_(t))throw new Xo(e,"an integer",t);if(t<n||t>r)throw new Xo(e,`>= ${n} && <= ${r}`,t)}),WW=Ir((t,e,n=!1)=>{if(typeof t!="number")throw new vn(e,"number",t);if(!V_(t))throw new Xo(e,"an integer",t);let r=n?1:0,i=4294967295;if(t<r||t>i)throw new Xo(e,`>= ${r} && <= ${i}`,t)});function q_(t,e){if(typeof t!="string")throw new vn(e,"string",t)}function tpe(t,e,n=void 0,r){if(typeof t!="number")throw new vn(e,"number",t);if(n!=null&&t<n||r!=null&&t>r||(n!=null||r!=null)&&Uhe(t))throw new Xo(e,`${n!=null?`>= ${n}`:""}${n!=null&&r!=null?" && ":""}${r!=null?`<= ${r}`:""}`,t)}var npe=Ir((t,e,n)=>{if(!FW(n,t)){let i="must be one of: "+HW(Mhe(n,s=>typeof s=="string"?`'${s}'`:Whe(s)),", ");throw new Gl(e,t,i)}});function $W(t,e){if(typeof t!="boolean")throw new vn(e,"boolean",t)}function k_(t,e,n){return t==null||!Ghe(t,e)?n:t[e]}var rpe=Ir((t,e,n=null)=>{let r=k_(n,"allowArray",!1),i=k_(n,"allowFunction",!1);if(!k_(n,"nullable",!1)&&t===null||!r&&Y_(t)||typeof t!="object"&&(!i||typeof t!="function"))throw new vn(e,"Object",t)}),ipe=Ir((t,e)=>{if(t!=null&&typeof t!="object"&&typeof t!="function")throw new vn(e,"a dictionary",t)}),Kp=Ir((t,e,n=0)=>{if(!Y_(t))throw new vn(e,"Array",t);if(t.length<n){let r=`must be longer than ${n}`;throw new Gl(e,t,r)}});function spe(t,e){Kp(t,e);for(let n=0;n<t.length;n++)q_(t[n],`${e}[${n}]`)}function ope(t,e){Kp(t,e);for(let n=0;n<t.length;n++)$W(t[n],`${e}[${n}]`)}function ape(t,e){Kp(t,e);for(let n=0;n<t.length;n++){let r=t[n],i=`${e}[${n}]`;if(r==null)throw new vn(i,"AbortSignal",r);kW(r,i)}}function lpe(t,e="signal"){if(q_(t,e),UW[t]===void 0)throw UW[$he(t)]!==void 0?new MW(t+" (signals must use all capital letters)"):new MW(t)}var cpe=Ir((t,e="buffer")=>{if(!Xhe(t))throw new vn(e,["Buffer","TypedArray","DataView"],t)});function upe(t,e){let n=Vhe(e),r=t.length;if(n==="hex"&&r%2!==0)throw new Gl("encoding",e,`is invalid for data of length ${r}`)}function dpe(t,e="Port",n=!0){if(typeof t!="number"&&typeof t!="string"||typeof t=="string"&&khe(t).length===0||+t!==+t>>>0||t>65535||t===0&&!n)throw new Yhe(e,t,n);return t|0}var kW=Ir((t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new vn(e,"AbortSignal",t)}),fpe=Ir((t,e)=>{if(typeof t!="function")throw new vn(e,"Function",t)}),Epe=Ir((t,e)=>{if(typeof t!="function"||qhe(t))throw new vn(e,"Function",t)}),hpe=Ir((t,e)=>{if(t!==void 0)throw new vn(e,"undefined",t)});function ppe(t,e,n){if(!FW(n,t))throw new vn(e,`('${HW(n,"|")}')`,t)}var Tpe=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function BW(t,e){if(typeof t>"u"||!GW(Tpe,t))throw new Gl(e,t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function Spe(t){if(typeof t=="string")return BW(t,"hints"),t;if(Y_(t)){let e=t.length,n="";if(e===0)return n;for(let r=0;r<e;r++){let i=t[r];BW(i,"hints"),n+=i,r!==e-1&&(n+=", ")}return n}throw new Gl("hints",t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}YW.exports={isInt32:zhe,isUint32:jhe,parseFileMode:Qhe,validateArray:Kp,validateStringArray:spe,validateBooleanArray:ope,validateAbortSignalArray:ape,validateBoolean:$W,validateBuffer:cpe,validateDictionary:ipe,validateEncoding:upe,validateFunction:fpe,validateInt32:epe,validateInteger:Zhe,validateNumber:tpe,validateObject:rpe,validateOneOf:npe,validatePlainFunction:Epe,validatePort:dpe,validateSignalName:lpe,validateString:q_,validateUint32:WW,validateUndefined:hpe,validateUnion:ppe,validateAbortSignal:kW,validateLinkHeaderValue:Spe}});var Ti=C((lUe,s$)=>{"use strict";var{SymbolAsyncIterator:VW,SymbolIterator:qW,SymbolFor:zo}=ft(),XW=zo("nodejs.stream.destroyed"),zW=zo("nodejs.stream.errored"),X_=zo("nodejs.stream.readable"),z_=zo("nodejs.stream.writable"),jW=zo("nodejs.stream.disturbed"),Rpe=zo("nodejs.webstream.isClosedPromise"),Ape=zo("nodejs.webstream.controllerErrorFunction");function Jp(t,e=!1){var n;return!!(t&&typeof t.pipe=="function"&&typeof t.on=="function"&&(!e||typeof t.pause=="function"&&typeof t.resume=="function")&&(!t._writableState||((n=t._readableState)===null||n===void 0?void 0:n.readable)!==!1)&&(!t._writableState||t._readableState))}function Qp(t){var e;return!!(t&&typeof t.write=="function"&&typeof t.on=="function"&&(!t._readableState||((e=t._writableState)===null||e===void 0?void 0:e.writable)!==!1))}function mpe(t){return!!(t&&typeof t.pipe=="function"&&t._readableState&&typeof t.on=="function"&&typeof t.write=="function")}function pi(t){return t&&(t._readableState||t._writableState||typeof t.write=="function"&&typeof t.on=="function"||typeof t.pipe=="function"&&typeof t.on=="function")}function KW(t){return!!(t&&!pi(t)&&typeof t.pipeThrough=="function"&&typeof t.getReader=="function"&&typeof t.cancel=="function")}function JW(t){return!!(t&&!pi(t)&&typeof t.getWriter=="function"&&typeof t.abort=="function")}function QW(t){return!!(t&&!pi(t)&&typeof t.readable=="object"&&typeof t.writable=="object")}function gpe(t){return KW(t)||JW(t)||QW(t)}function Ipe(t,e){return t==null?!1:e===!0?typeof t[VW]=="function":e===!1?typeof t[qW]=="function":typeof t[VW]=="function"||typeof t[qW]=="function"}function Zp(t){if(!pi(t))return null;let e=t._writableState,n=t._readableState,r=e||n;return!!(t.destroyed||t[XW]||r!=null&&r.destroyed)}function ZW(t){if(!Qp(t))return null;if(t.writableEnded===!0)return!0;let e=t._writableState;return e!=null&&e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function _pe(t,e){if(!Qp(t))return null;if(t.writableFinished===!0)return!0;let n=t._writableState;return n!=null&&n.errored?!1:typeof n?.finished!="boolean"?null:!!(n.finished||e===!1&&n.ended===!0&&n.length===0)}function Npe(t){if(!Jp(t))return null;if(t.readableEnded===!0)return!0;let e=t._readableState;return!e||e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function e$(t,e){if(!Jp(t))return null;let n=t._readableState;return n!=null&&n.errored?!1:typeof n?.endEmitted!="boolean"?null:!!(n.endEmitted||e===!1&&n.ended===!0&&n.length===0)}function t$(t){return t&&t[X_]!=null?t[X_]:typeof t?.readable!="boolean"?null:Zp(t)?!1:Jp(t)&&t.readable&&!e$(t)}function n$(t){return t&&t[z_]!=null?t[z_]:typeof t?.writable!="boolean"?null:Zp(t)?!1:Qp(t)&&t.writable&&!ZW(t)}function Ope(t,e){return pi(t)?Zp(t)?!0:!(e?.readable!==!1&&t$(t)||e?.writable!==!1&&n$(t)):null}function Cpe(t){var e,n;return pi(t)?t.writableErrored?t.writableErrored:(e=(n=t._writableState)===null||n===void 0?void 0:n.errored)!==null&&e!==void 0?e:null:null}function ype(t){var e,n;return pi(t)?t.readableErrored?t.readableErrored:(e=(n=t._readableState)===null||n===void 0?void 0:n.errored)!==null&&e!==void 0?e:null:null}function bpe(t){if(!pi(t))return null;if(typeof t.closed=="boolean")return t.closed;let e=t._writableState,n=t._readableState;return typeof e?.closed=="boolean"||typeof n?.closed=="boolean"?e?.closed||n?.closed:typeof t._closed=="boolean"&&r$(t)?t._closed:null}function r$(t){return typeof t._closed=="boolean"&&typeof t._defaultKeepAlive=="boolean"&&typeof t._removedConnection=="boolean"&&typeof t._removedContLen=="boolean"}function i$(t){return typeof t._sent100=="boolean"&&r$(t)}function wpe(t){var e;return typeof t._consuming=="boolean"&&typeof t._dumped=="boolean"&&((e=t.req)===null||e===void 0?void 0:e.upgradeOrConnect)===void 0}function Lpe(t){if(!pi(t))return null;let e=t._writableState,n=t._readableState,r=e||n;return!r&&i$(t)||!!(r&&r.autoDestroy&&r.emitClose&&r.closed===!1)}function Dpe(t){var e;return!!(t&&((e=t[jW])!==null&&e!==void 0?e:t.readableDidRead||t.readableAborted))}function Ppe(t){var e,n,r,i,s,o,a,l,c,u;return!!(t&&((e=(n=(r=(i=(s=(o=t[zW])!==null&&o!==void 0?o:t.readableErrored)!==null&&s!==void 0?s:t.writableErrored)!==null&&i!==void 0?i:(a=t._readableState)===null||a===void 0?void 0:a.errorEmitted)!==null&&r!==void 0?r:(l=t._writableState)===null||l===void 0?void 0:l.errorEmitted)!==null&&n!==void 0?n:(c=t._readableState)===null||c===void 0?void 0:c.errored)!==null&&e!==void 0?e:!((u=t._writableState)===null||u===void 0)&&u.errored))}s$.exports={isDestroyed:Zp,kIsDestroyed:XW,isDisturbed:Dpe,kIsDisturbed:jW,isErrored:Ppe,kIsErrored:zW,isReadable:t$,kIsReadable:X_,kIsClosedPromise:Rpe,kControllerErrorFunction:Ape,kIsWritable:z_,isClosed:bpe,isDuplexNodeStream:mpe,isFinished:Ope,isIterable:Ipe,isReadableNodeStream:Jp,isReadableStream:KW,isReadableEnded:Npe,isReadableFinished:e$,isReadableErrored:ype,isNodeStream:pi,isWebStream:gpe,isWritable:n$,isWritableNodeStream:Qp,isWritableStream:JW,isWritableEnded:ZW,isWritableFinished:_pe,isWritableErrored:Cpe,isServerRequest:wpe,isServerResponse:i$,willEmitClose:Lpe,isTransformStream:QW}});var Zi=C((cUe,Z_)=>{"use strict";var $s=je(),{AbortError:h$,codes:xpe}=xn(),{ERR_INVALID_ARG_TYPE:vpe,ERR_STREAM_PREMATURE_CLOSE:o$}=xpe,{kEmptyObject:K_,once:J_}=Yn(),{validateAbortSignal:Mpe,validateFunction:Upe,validateObject:Bpe,validateBoolean:Fpe}=Wl(),{Promise:Hpe,PromisePrototypeThen:Gpe,SymbolDispose:p$}=ft(),{isClosed:Wpe,isReadable:a$,isReadableNodeStream:j_,isReadableStream:$pe,isReadableFinished:l$,isReadableErrored:c$,isWritable:u$,isWritableNodeStream:d$,isWritableStream:kpe,isWritableFinished:f$,isWritableErrored:E$,isNodeStream:Ype,willEmitClose:Vpe,kIsClosedPromise:qpe}=Ti(),$l;function Xpe(t){return t.setHeader&&typeof t.abort=="function"}var Q_=()=>{};function T$(t,e,n){var r,i;if(arguments.length===2?(n=e,e=K_):e==null?e=K_:Bpe(e,"options"),Upe(n,"callback"),Mpe(e.signal,"options.signal"),n=J_(n),$pe(t)||kpe(t))return zpe(t,e,n);if(!Ype(t))throw new vpe("stream",["ReadableStream","WritableStream","Stream"],t);let s=(r=e.readable)!==null&&r!==void 0?r:j_(t),o=(i=e.writable)!==null&&i!==void 0?i:d$(t),a=t._writableState,l=t._readableState,c=()=>{t.writable||E()},u=Vpe(t)&&j_(t)===s&&d$(t)===o,d=f$(t,!1),E=()=>{d=!0,t.destroyed&&(u=!1),!(u&&(!t.readable||s))&&(!s||f)&&n.call(t)},f=l$(t,!1),p=()=>{f=!0,t.destroyed&&(u=!1),!(u&&(!t.writable||o))&&(!o||d)&&n.call(t)},h=A=>{n.call(t,A)},T=Wpe(t),S=()=>{T=!0;let A=E$(t)||c$(t);if(A&&typeof A!="boolean")return n.call(t,A);if(s&&!f&&j_(t,!0)&&!l$(t,!1))return n.call(t,new o$);if(o&&!d&&!f$(t,!1))return n.call(t,new o$);n.call(t)},I=()=>{T=!0;let A=E$(t)||c$(t);if(A&&typeof A!="boolean")return n.call(t,A);n.call(t)},R=()=>{t.req.on("finish",E)};Xpe(t)?(t.on("complete",E),u||t.on("abort",S),t.req?R():t.on("request",R)):o&&!a&&(t.on("end",c),t.on("close",c)),!u&&typeof t.aborted=="boolean"&&t.on("aborted",S),t.on("end",p),t.on("finish",E),e.error!==!1&&t.on("error",h),t.on("close",S),T?$s.nextTick(S):a!=null&&a.errorEmitted||l!=null&&l.errorEmitted?u||$s.nextTick(I):(!s&&(!u||a$(t))&&(d||u$(t)===!1)||!o&&(!u||u$(t))&&(f||a$(t)===!1)||l&&t.req&&t.aborted)&&$s.nextTick(I);let m=()=>{n=Q_,t.removeListener("aborted",S),t.removeListener("complete",E),t.removeListener("abort",S),t.removeListener("request",R),t.req&&t.req.removeListener("finish",E),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",E),t.removeListener("end",p),t.removeListener("error",h),t.removeListener("close",S)};if(e.signal&&!T){let A=()=>{let N=n;m(),N.call(t,new h$(void 0,{cause:e.signal.reason}))};if(e.signal.aborted)$s.nextTick(A);else{$l=$l||Yn().addAbortListener;let N=$l(e.signal,A),g=n;n=J_((...L)=>{N[p$](),g.apply(t,L)})}}return m}function zpe(t,e,n){let r=!1,i=Q_;if(e.signal)if(i=()=>{r=!0,n.call(t,new h$(void 0,{cause:e.signal.reason}))},e.signal.aborted)$s.nextTick(i);else{$l=$l||Yn().addAbortListener;let o=$l(e.signal,i),a=n;n=J_((...l)=>{o[p$](),a.apply(t,l)})}let s=(...o)=>{r||$s.nextTick(()=>n.apply(t,o))};return Gpe(t[qpe].promise,s,s),Q_}function jpe(t,e){var n;let r=!1;return e===null&&(e=K_),(n=e)!==null&&n!==void 0&&n.cleanup&&(Fpe(e.cleanup,"cleanup"),r=e.cleanup),new Hpe((i,s)=>{let o=T$(t,e,a=>{r&&o(),a?s(a):i()})})}Z_.exports=T$;Z_.exports.finished=jpe});var jo=C((uUe,N$)=>{"use strict";var Si=je(),{aggregateTwoErrors:Kpe,codes:{ERR_MULTIPLE_CALLBACK:Jpe},AbortError:Qpe}=xn(),{Symbol:A$}=ft(),{kIsDestroyed:Zpe,isDestroyed:eTe,isFinished:tTe,isServerRequest:nTe}=Ti(),m$=A$("kDestroy"),eN=A$("kConstruct");function g$(t,e,n){t&&(t.stack,e&&!e.errored&&(e.errored=t),n&&!n.errored&&(n.errored=t))}function rTe(t,e){let n=this._readableState,r=this._writableState,i=r||n;return r!=null&&r.destroyed||n!=null&&n.destroyed?(typeof e=="function"&&e(),this):(g$(t,r,n),r&&(r.destroyed=!0),n&&(n.destroyed=!0),i.constructed?S$(this,t,e):this.once(m$,function(s){S$(this,Kpe(s,t),e)}),this)}function S$(t,e,n){let r=!1;function i(s){if(r)return;r=!0;let o=t._readableState,a=t._writableState;g$(s,a,o),a&&(a.closed=!0),o&&(o.closed=!0),typeof n=="function"&&n(s),s?Si.nextTick(iTe,t,s):Si.nextTick(I$,t)}try{t._destroy(e||null,i)}catch(s){i(s)}}function iTe(t,e){tN(t,e),I$(t)}function I$(t){let e=t._readableState,n=t._writableState;n&&(n.closeEmitted=!0),e&&(e.closeEmitted=!0),(n!=null&&n.emitClose||e!=null&&e.emitClose)&&t.emit("close")}function tN(t,e){let n=t._readableState,r=t._writableState;r!=null&&r.errorEmitted||n!=null&&n.errorEmitted||(r&&(r.errorEmitted=!0),n&&(n.errorEmitted=!0),t.emit("error",e))}function sTe(){let t=this._readableState,e=this._writableState;t&&(t.constructed=!0,t.closed=!1,t.closeEmitted=!1,t.destroyed=!1,t.errored=null,t.errorEmitted=!1,t.reading=!1,t.ended=t.readable===!1,t.endEmitted=t.readable===!1),e&&(e.constructed=!0,e.destroyed=!1,e.closed=!1,e.closeEmitted=!1,e.errored=null,e.errorEmitted=!1,e.finalCalled=!1,e.prefinished=!1,e.ended=e.writable===!1,e.ending=e.writable===!1,e.finished=e.writable===!1)}function nN(t,e,n){let r=t._readableState,i=t._writableState;if(i!=null&&i.destroyed||r!=null&&r.destroyed)return this;r!=null&&r.autoDestroy||i!=null&&i.autoDestroy?t.destroy(e):e&&(e.stack,i&&!i.errored&&(i.errored=e),r&&!r.errored&&(r.errored=e),n?Si.nextTick(tN,t,e):tN(t,e))}function oTe(t,e){if(typeof t._construct!="function")return;let n=t._readableState,r=t._writableState;n&&(n.constructed=!1),r&&(r.constructed=!1),t.once(eN,e),!(t.listenerCount(eN)>1)&&Si.nextTick(aTe,t)}function aTe(t){let e=!1;function n(r){if(e){nN(t,r??new Jpe);return}e=!0;let i=t._readableState,s=t._writableState,o=s||i;i&&(i.constructed=!0),s&&(s.constructed=!0),o.destroyed?t.emit(m$,r):r?nN(t,r,!0):Si.nextTick(lTe,t)}try{t._construct(r=>{Si.nextTick(n,r)})}catch(r){Si.nextTick(n,r)}}function lTe(t){t.emit(eN)}function R$(t){return t?.setHeader&&typeof t.abort=="function"}function _$(t){t.emit("close")}function cTe(t,e){t.emit("error",e),Si.nextTick(_$,t)}function uTe(t,e){!t||eTe(t)||(!e&&!tTe(t)&&(e=new Qpe),nTe(t)?(t.socket=null,t.destroy(e)):R$(t)?t.abort():R$(t.req)?t.req.abort():typeof t.destroy=="function"?t.destroy(e):typeof t.close=="function"?t.close():e?Si.nextTick(cTe,t,e):Si.nextTick(_$,t),t.destroyed||(t[Zpe]=!0))}N$.exports={construct:oTe,destroyer:uTe,destroy:rTe,undestroy:sTe,errorOrDestroy:nN}});var nT=C((dUe,C$)=>{"use strict";var{ArrayIsArray:dTe,ObjectSetPrototypeOf:O$}=ft(),{EventEmitter:eT}=require("events");function tT(t){eT.call(this,t)}O$(tT.prototype,eT.prototype);O$(tT,eT);tT.prototype.pipe=function(t,e){let n=this;function r(u){t.writable&&t.write(u)===!1&&n.pause&&n.pause()}n.on("data",r);function i(){n.readable&&n.resume&&n.resume()}t.on("drain",i),!t._isStdio&&(!e||e.end!==!1)&&(n.on("end",o),n.on("close",a));let s=!1;function o(){s||(s=!0,t.end())}function a(){s||(s=!0,typeof t.destroy=="function"&&t.destroy())}function l(u){c(),eT.listenerCount(this,"error")===0&&this.emit("error",u)}rN(n,"error",l),rN(t,"error",l);function c(){n.removeListener("data",r),t.removeListener("drain",i),n.removeListener("end",o),n.removeListener("close",a),n.removeListener("error",l),t.removeListener("error",l),n.removeListener("end",c),n.removeListener("close",c),t.removeListener("close",c)}return n.on("end",c),n.on("close",c),t.on("close",c),t.emit("pipe",n),t};function rN(t,e,n){if(typeof t.prependListener=="function")return t.prependListener(e,n);!t._events||!t._events[e]?t.on(e,n):dTe(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]}C$.exports={Stream:tT,prependListener:rN}});var md=C((fUe,rT)=>{"use strict";var{SymbolDispose:fTe}=ft(),{AbortError:y$,codes:ETe}=xn(),{isNodeStream:b$,isWebStream:hTe,kControllerErrorFunction:pTe}=Ti(),TTe=Zi(),{ERR_INVALID_ARG_TYPE:w$}=ETe,iN,STe=(t,e)=>{if(typeof t!="object"||!("aborted"in t))throw new w$(e,"AbortSignal",t)};rT.exports.addAbortSignal=function(e,n){if(STe(e,"signal"),!b$(n)&&!hTe(n))throw new w$("stream",["ReadableStream","WritableStream","Stream"],n);return rT.exports.addAbortSignalNoValidate(e,n)};rT.exports.addAbortSignalNoValidate=function(t,e){if(typeof t!="object"||!("aborted"in t))return e;let n=b$(e)?()=>{e.destroy(new y$(void 0,{cause:t.reason}))}:()=>{e[pTe](new y$(void 0,{cause:t.reason}))};if(t.aborted)n();else{iN=iN||Yn().addAbortListener;let r=iN(t,n);TTe(e,r[fTe])}return e}});var P$=C((hUe,D$)=>{"use strict";var{StringPrototypeSlice:L$,SymbolIterator:RTe,TypedArrayPrototypeSet:iT,Uint8Array:ATe}=ft(),{Buffer:sN}=require("buffer"),{inspect:mTe}=Yn();D$.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){let n={data:e,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}unshift(e){let n={data:e,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}shift(){if(this.length===0)return;let e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return"";let n=this.head,r=""+n.data;for(;(n=n.next)!==null;)r+=e+n.data;return r}concat(e){if(this.length===0)return sN.alloc(0);let n=sN.allocUnsafe(e>>>0),r=this.head,i=0;for(;r;)iT(n,r.data,i),i+=r.data.length,r=r.next;return n}consume(e,n){let r=this.head.data;if(e<r.length){let i=r.slice(0,e);return this.head.data=r.slice(e),i}return e===r.length?this.shift():n?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[RTe](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let n="",r=this.head,i=0;do{let s=r.data;if(e>s.length)n+=s,e-=s.length;else{e===s.length?(n+=s,++i,r.next?this.head=r.next:this.head=this.tail=null):(n+=L$(s,0,e),this.head=r,r.data=L$(s,e));break}++i}while((r=r.next)!==null);return this.length-=i,n}_getBuffer(e){let n=sN.allocUnsafe(e),r=e,i=this.head,s=0;do{let o=i.data;if(e>o.length)iT(n,o,r-e),e-=o.length;else{e===o.length?(iT(n,o,r-e),++s,i.next?this.head=i.next:this.head=this.tail=null):(iT(n,new ATe(o.buffer,o.byteOffset,e),r-e),this.head=i,i.data=o.slice(e));break}++s}while((i=i.next)!==null);return this.length-=s,n}[Symbol.for("nodejs.util.inspect.custom")](e,n){return mTe(this,{...n,depth:0,customInspect:!1})}}});var gd=C((pUe,U$)=>{"use strict";var{MathFloor:gTe,NumberIsInteger:ITe}=ft(),{validateInteger:_Te}=Wl(),{ERR_INVALID_ARG_VALUE:NTe}=xn().codes,x$=16*1024,v$=16;function OTe(t,e,n){return t.highWaterMark!=null?t.highWaterMark:e?t[n]:null}function M$(t){return t?v$:x$}function CTe(t,e){_Te(e,"value",0),t?v$=e:x$=e}function yTe(t,e,n,r){let i=OTe(e,r,n);if(i!=null){if(!ITe(i)||i<0){let s=r?`options.${n}`:"options.highWaterMark";throw new NTe(s,i)}return gTe(i)}return M$(t.objectMode)}U$.exports={getHighWaterMark:yTe,getDefaultHighWaterMark:M$,setDefaultHighWaterMark:CTe}});var oN=C((TUe,G$)=>{"use strict";var B$=je(),{PromisePrototypeThen:bTe,SymbolAsyncIterator:F$,SymbolIterator:H$}=ft(),{Buffer:wTe}=require("buffer"),{ERR_INVALID_ARG_TYPE:LTe,ERR_STREAM_NULL_VALUES:DTe}=xn().codes;function PTe(t,e,n){let r;if(typeof e=="string"||e instanceof wTe)return new t({objectMode:!0,...n,read(){this.push(e),this.push(null)}});let i;if(e&&e[F$])i=!0,r=e[F$]();else if(e&&e[H$])i=!1,r=e[H$]();else throw new LTe("iterable",["Iterable"],e);let s=new t({objectMode:!0,highWaterMark:1,...n}),o=!1;s._read=function(){o||(o=!0,l())},s._destroy=function(c,u){bTe(a(c),()=>B$.nextTick(u,c),d=>B$.nextTick(u,d||c))};async function a(c){let u=c!=null,d=typeof r.throw=="function";if(u&&d){let{value:E,done:f}=await r.throw(c);if(await E,f)return}if(typeof r.return=="function"){let{value:E}=await r.return();await E}}async function l(){for(;;){try{let{value:c,done:u}=i?await r.next():r.next();if(u)s.push(null);else{let d=c&&typeof c.then=="function"?await c:c;if(d===null)throw o=!1,new DTe;if(s.push(d))continue;o=!1}}catch(c){s.destroy(c)}break}}return s}G$.exports=PTe});var _d=C((SUe,ik)=>{"use strict";var Hr=je(),{ArrayPrototypeIndexOf:xTe,NumberIsInteger:vTe,NumberIsNaN:MTe,NumberParseInt:UTe,ObjectDefineProperties:hN,ObjectKeys:BTe,ObjectSetPrototypeOf:k$,Promise:Y$,SafeSet:FTe,SymbolAsyncDispose:HTe,SymbolAsyncIterator:GTe,Symbol:WTe}=ft();ik.exports=Ie;Ie.ReadableState=lT;var{EventEmitter:$Te}=require("events"),{Stream:ks,prependListener:kTe}=nT(),{Buffer:aN}=require("buffer"),{addAbortSignal:YTe}=md(),V$=Zi(),Be=Yn().debuglog("stream",t=>{Be=t}),VTe=P$(),Vl=jo(),{getHighWaterMark:qTe,getDefaultHighWaterMark:XTe}=gd(),{aggregateTwoErrors:W$,codes:{ERR_INVALID_ARG_TYPE:zTe,ERR_METHOD_NOT_IMPLEMENTED:jTe,ERR_OUT_OF_RANGE:KTe,ERR_STREAM_PUSH_AFTER_EOF:JTe,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:QTe},AbortError:ZTe}=xn(),{validateObject:eSe}=Wl(),Ko=WTe("kPaused"),{StringDecoder:q$}=yu(),tSe=oN();k$(Ie.prototype,ks.prototype);k$(Ie,ks);var lN=()=>{},{errorOrDestroy:kl}=Vl,Yl=1,nSe=2,X$=4,Id=8,z$=16,sT=32,oT=64,j$=128,rSe=256,iSe=512,sSe=1024,fN=2048,EN=4096,oSe=8192,aSe=16384,lSe=32768,K$=65536,cSe=1<<17,uSe=1<<18;function Yt(t){return{enumerable:!1,get(){return(this.state&t)!==0},set(e){e?this.state|=t:this.state&=~t}}}hN(lT.prototype,{objectMode:Yt(Yl),ended:Yt(nSe),endEmitted:Yt(X$),reading:Yt(Id),constructed:Yt(z$),sync:Yt(sT),needReadable:Yt(oT),emittedReadable:Yt(j$),readableListening:Yt(rSe),resumeScheduled:Yt(iSe),errorEmitted:Yt(sSe),emitClose:Yt(fN),autoDestroy:Yt(EN),destroyed:Yt(oSe),closed:Yt(aSe),closeEmitted:Yt(lSe),multiAwaitDrain:Yt(K$),readingMore:Yt(cSe),dataEmitted:Yt(uSe)});function lT(t,e,n){typeof n!="boolean"&&(n=e instanceof Ri()),this.state=fN|EN|z$|sT,t&&t.objectMode&&(this.state|=Yl),n&&t&&t.readableObjectMode&&(this.state|=Yl),this.highWaterMark=t?qTe(this,t,"readableHighWaterMark",n):XTe(!1),this.buffer=new VTe,this.length=0,this.pipes=[],this.flowing=null,this[Ko]=null,t&&t.emitClose===!1&&(this.state&=~fN),t&&t.autoDestroy===!1&&(this.state&=~EN),this.errored=null,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,t&&t.encoding&&(this.decoder=new q$(t.encoding),this.encoding=t.encoding)}function Ie(t){if(!(this instanceof Ie))return new Ie(t);let e=this instanceof Ri();this._readableState=new lT(t,this,e),t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&!e&&YTe(t.signal,this)),ks.call(this,t),Vl.construct(this,()=>{this._readableState.needReadable&&aT(this,this._readableState)})}Ie.prototype.destroy=Vl.destroy;Ie.prototype._undestroy=Vl.undestroy;Ie.prototype._destroy=function(t,e){e(t)};Ie.prototype[$Te.captureRejectionSymbol]=function(t){this.destroy(t)};Ie.prototype[HTe]=function(){let t;return this.destroyed||(t=this.readableEnded?null:new ZTe,this.destroy(t)),new Y$((e,n)=>V$(this,r=>r&&r!==t?n(r):e(null)))};Ie.prototype.push=function(t,e){return J$(this,t,e,!1)};Ie.prototype.unshift=function(t,e){return J$(this,t,e,!0)};function J$(t,e,n,r){Be("readableAddChunk",e);let i=t._readableState,s;if((i.state&Yl)===0&&(typeof e=="string"?(n=n||i.defaultEncoding,i.encoding!==n&&(r&&i.encoding?e=aN.from(e,n).toString(i.encoding):(e=aN.from(e,n),n=""))):e instanceof aN?n="":ks._isUint8Array(e)?(e=ks._uint8ArrayToBuffer(e),n=""):e!=null&&(s=new zTe("chunk",["string","Buffer","Uint8Array"],e))),s)kl(t,s);else if(e===null)i.state&=~Id,ESe(t,i);else if((i.state&Yl)!==0||e&&e.length>0)if(r)if((i.state&X$)!==0)kl(t,new QTe);else{if(i.destroyed||i.errored)return!1;cN(t,i,e,!0)}else if(i.ended)kl(t,new JTe);else{if(i.destroyed||i.errored)return!1;i.state&=~Id,i.decoder&&!n?(e=i.decoder.write(e),i.objectMode||e.length!==0?cN(t,i,e,!1):aT(t,i)):cN(t,i,e,!1)}else r||(i.state&=~Id,aT(t,i));return!i.ended&&(i.length<i.highWaterMark||i.length===0)}function cN(t,e,n,r){e.flowing&&e.length===0&&!e.sync&&t.listenerCount("data")>0?((e.state&K$)!==0?e.awaitDrainWriters.clear():e.awaitDrainWriters=null,e.dataEmitted=!0,t.emit("data",n)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),(e.state&oT)!==0&&cT(t)),aT(t,e)}Ie.prototype.isPaused=function(){let t=this._readableState;return t[Ko]===!0||t.flowing===!1};Ie.prototype.setEncoding=function(t){let e=new q$(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;let n=this._readableState.buffer,r="";for(let i of n)r+=e.write(i);return n.clear(),r!==""&&n.push(r),this._readableState.length=r.length,this};var dSe=1073741824;function fSe(t){if(t>dSe)throw new KTe("size","<= 1GiB",t);return t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++,t}function $$(t,e){return t<=0||e.length===0&&e.ended?0:(e.state&Yl)!==0?1:MTe(t)?e.flowing&&e.length?e.buffer.first().length:e.length:t<=e.length?t:e.ended?e.length:0}Ie.prototype.read=function(t){Be("read",t),t===void 0?t=NaN:vTe(t)||(t=UTe(t,10));let e=this._readableState,n=t;if(t>e.highWaterMark&&(e.highWaterMark=fSe(t)),t!==0&&(e.state&=~j$),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return Be("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?uN(this):cT(this),null;if(t=$$(t,e),t===0&&e.ended)return e.length===0&&uN(this),null;let r=(e.state&oT)!==0;if(Be("need readable",r),(e.length===0||e.length-t<e.highWaterMark)&&(r=!0,Be("length less than watermark",r)),e.ended||e.reading||e.destroyed||e.errored||!e.constructed)r=!1,Be("reading, ended or constructing",r);else if(r){Be("do read"),e.state|=Id|sT,e.length===0&&(e.state|=oT);try{this._read(e.highWaterMark)}catch(s){kl(this,s)}e.state&=~sT,e.reading||(t=$$(n,e))}let i;return t>0?i=nk(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.multiAwaitDrain?e.awaitDrainWriters.clear():e.awaitDrainWriters=null),e.length===0&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&uN(this)),i!==null&&!e.errorEmitted&&!e.closeEmitted&&(e.dataEmitted=!0,this.emit("data",i)),i};function ESe(t,e){if(Be("onEofChunk"),!e.ended){if(e.decoder){let n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,e.sync?cT(t):(e.needReadable=!1,e.emittedReadable=!0,Q$(t))}}function cT(t){let e=t._readableState;Be("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(Be("emitReadable",e.flowing),e.emittedReadable=!0,Hr.nextTick(Q$,t))}function Q$(t){let e=t._readableState;Be("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&!e.errored&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,ek(t)}function aT(t,e){!e.readingMore&&e.constructed&&(e.readingMore=!0,Hr.nextTick(hSe,t,e))}function hSe(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){let n=e.length;if(Be("maybeReadMore read 0"),t.read(0),n===e.length)break}e.readingMore=!1}Ie.prototype._read=function(t){throw new jTe("_read()")};Ie.prototype.pipe=function(t,e){let n=this,r=this._readableState;r.pipes.length===1&&(r.multiAwaitDrain||(r.multiAwaitDrain=!0,r.awaitDrainWriters=new FTe(r.awaitDrainWriters?[r.awaitDrainWriters]:[]))),r.pipes.push(t),Be("pipe count=%d opts=%j",r.pipes.length,e);let s=(!e||e.end!==!1)&&t!==Hr.stdout&&t!==Hr.stderr?a:T;r.endEmitted?Hr.nextTick(s):n.once("end",s),t.on("unpipe",o);function o(S,I){Be("onunpipe"),S===n&&I&&I.hasUnpiped===!1&&(I.hasUnpiped=!0,u())}function a(){Be("onend"),t.end()}let l,c=!1;function u(){Be("cleanup"),t.removeListener("close",p),t.removeListener("finish",h),l&&t.removeListener("drain",l),t.removeListener("error",f),t.removeListener("unpipe",o),n.removeListener("end",a),n.removeListener("end",T),n.removeListener("data",E),c=!0,l&&r.awaitDrainWriters&&(!t._writableState||t._writableState.needDrain)&&l()}function d(){c||(r.pipes.length===1&&r.pipes[0]===t?(Be("false write response, pause",0),r.awaitDrainWriters=t,r.multiAwaitDrain=!1):r.pipes.length>1&&r.pipes.includes(t)&&(Be("false write response, pause",r.awaitDrainWriters.size),r.awaitDrainWriters.add(t)),n.pause()),l||(l=pSe(n,t),t.on("drain",l))}n.on("data",E);function E(S){Be("ondata");let I=t.write(S);Be("dest.write",I),I===!1&&d()}function f(S){if(Be("onerror",S),T(),t.removeListener("error",f),t.listenerCount("error")===0){let I=t._writableState||t._readableState;I&&!I.errorEmitted?kl(t,S):t.emit("error",S)}}kTe(t,"error",f);function p(){t.removeListener("finish",h),T()}t.once("close",p);function h(){Be("onfinish"),t.removeListener("close",p),T()}t.once("finish",h);function T(){Be("unpipe"),n.unpipe(t)}return t.emit("pipe",n),t.writableNeedDrain===!0?d():r.flowing||(Be("pipe resume"),n.resume()),t};function pSe(t,e){return function(){let r=t._readableState;r.awaitDrainWriters===e?(Be("pipeOnDrain",1),r.awaitDrainWriters=null):r.multiAwaitDrain&&(Be("pipeOnDrain",r.awaitDrainWriters.size),r.awaitDrainWriters.delete(e)),(!r.awaitDrainWriters||r.awaitDrainWriters.size===0)&&t.listenerCount("data")&&t.resume()}}Ie.prototype.unpipe=function(t){let e=this._readableState,n={hasUnpiped:!1};if(e.pipes.length===0)return this;if(!t){let i=e.pipes;e.pipes=[],this.pause();for(let s=0;s<i.length;s++)i[s].emit("unpipe",this,{hasUnpiped:!1});return this}let r=xTe(e.pipes,t);return r===-1?this:(e.pipes.splice(r,1),e.pipes.length===0&&this.pause(),t.emit("unpipe",this,n),this)};Ie.prototype.on=function(t,e){let n=ks.prototype.on.call(this,t,e),r=this._readableState;return t==="data"?(r.readableListening=this.listenerCount("readable")>0,r.flowing!==!1&&this.resume()):t==="readable"&&!r.endEmitted&&!r.readableListening&&(r.readableListening=r.needReadable=!0,r.flowing=!1,r.emittedReadable=!1,Be("on readable",r.length,r.reading),r.length?cT(this):r.reading||Hr.nextTick(TSe,this)),n};Ie.prototype.addListener=Ie.prototype.on;Ie.prototype.removeListener=function(t,e){let n=ks.prototype.removeListener.call(this,t,e);return t==="readable"&&Hr.nextTick(Z$,this),n};Ie.prototype.off=Ie.prototype.removeListener;Ie.prototype.removeAllListeners=function(t){let e=ks.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&Hr.nextTick(Z$,this),e};function Z$(t){let e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&e[Ko]===!1?e.flowing=!0:t.listenerCount("data")>0?t.resume():e.readableListening||(e.flowing=null)}function TSe(t){Be("readable nexttick read 0"),t.read(0)}Ie.prototype.resume=function(){let t=this._readableState;return t.flowing||(Be("resume"),t.flowing=!t.readableListening,SSe(this,t)),t[Ko]=!1,this};function SSe(t,e){e.resumeScheduled||(e.resumeScheduled=!0,Hr.nextTick(RSe,t,e))}function RSe(t,e){Be("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),ek(t),e.flowing&&!e.reading&&t.read(0)}Ie.prototype.pause=function(){return Be("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Be("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[Ko]=!0,this};function ek(t){let e=t._readableState;for(Be("flow",e.flowing);e.flowing&&t.read()!==null;);}Ie.prototype.wrap=function(t){let e=!1;t.on("data",r=>{!this.push(r)&&t.pause&&(e=!0,t.pause())}),t.on("end",()=>{this.push(null)}),t.on("error",r=>{kl(this,r)}),t.on("close",()=>{this.destroy()}),t.on("destroy",()=>{this.destroy()}),this._read=()=>{e&&t.resume&&(e=!1,t.resume())};let n=BTe(t);for(let r=1;r<n.length;r++){let i=n[r];this[i]===void 0&&typeof t[i]=="function"&&(this[i]=t[i].bind(t))}return this};Ie.prototype[GTe]=function(){return tk(this)};Ie.prototype.iterator=function(t){return t!==void 0&&eSe(t,"options"),tk(this,t)};function tk(t,e){typeof t.read!="function"&&(t=Ie.wrap(t,{objectMode:!0}));let n=ASe(t,e);return n.stream=t,n}async function*ASe(t,e){let n=lN;function r(o){this===t?(n(),n=lN):n=o}t.on("readable",r);let i,s=V$(t,{writable:!1},o=>{i=o?W$(i,o):null,n(),n=lN});try{for(;;){let o=t.destroyed?null:t.read();if(o!==null)yield o;else{if(i)throw i;if(i===null)return;await new Y$(r)}}}catch(o){throw i=W$(i,o),i}finally{(i||e?.destroyOnReturn!==!1)&&(i===void 0||t._readableState.autoDestroy)?Vl.destroyer(t,null):(t.off("readable",r),s())}}hN(Ie.prototype,{readable:{__proto__:null,get(){let t=this._readableState;return!!t&&t.readable!==!1&&!t.destroyed&&!t.errorEmitted&&!t.endEmitted},set(t){this._readableState&&(this._readableState.readable=!!t)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(t){this._readableState&&(this._readableState.destroyed=t)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}});hN(lT.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[Ko]!==!1},set(t){this[Ko]=!!t}}});Ie._fromList=nk;function nk(t,e){if(e.length===0)return null;let n;return e.objectMode?n=e.buffer.shift():!t||t>=e.length?(e.decoder?n=e.buffer.join(""):e.buffer.length===1?n=e.buffer.first():n=e.buffer.concat(e.length),e.buffer.clear()):n=e.buffer.consume(t,e.decoder),n}function uN(t){let e=t._readableState;Be("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,Hr.nextTick(mSe,e,t))}function mSe(t,e){if(Be("endReadableNT",t.endEmitted,t.length),!t.errored&&!t.closeEmitted&&!t.endEmitted&&t.length===0){if(t.endEmitted=!0,e.emit("end"),e.writable&&e.allowHalfOpen===!1)Hr.nextTick(gSe,e);else if(t.autoDestroy){let n=e._writableState;(!n||n.autoDestroy&&(n.finished||n.writable===!1))&&e.destroy()}}}function gSe(t){t.writable&&!t.writableEnded&&!t.destroyed&&t.end()}Ie.from=function(t,e){return tSe(Ie,t,e)};var dN;function rk(){return dN===void 0&&(dN={}),dN}Ie.fromWeb=function(t,e){return rk().newStreamReadableFromReadableStream(t,e)};Ie.toWeb=function(t,e){return rk().newReadableStreamFromStreamReadable(t,e)};Ie.wrap=function(t,e){var n,r;return new Ie({objectMode:(n=(r=t.readableObjectMode)!==null&&r!==void 0?r:t.objectMode)!==null&&n!==void 0?n:!0,...e,destroy(i,s){Vl.destroyer(t,i),s(i)}}).wrap(t)}});var hT=C((RUe,Tk)=>{"use strict";var Jo=je(),{ArrayPrototypeSlice:ak,Error:ISe,FunctionPrototypeSymbolHasInstance:lk,ObjectDefineProperty:ck,ObjectDefineProperties:_Se,ObjectSetPrototypeOf:uk,StringPrototypeToLowerCase:NSe,Symbol:OSe,SymbolHasInstance:CSe}=ft();Tk.exports=Rt;Rt.WritableState=Cd;var{EventEmitter:ySe}=require("events"),Nd=nT().Stream,{Buffer:uT}=require("buffer"),ET=jo(),{addAbortSignal:bSe}=md(),{getHighWaterMark:wSe,getDefaultHighWaterMark:LSe}=gd(),{ERR_INVALID_ARG_TYPE:DSe,ERR_METHOD_NOT_IMPLEMENTED:PSe,ERR_MULTIPLE_CALLBACK:dk,ERR_STREAM_CANNOT_PIPE:xSe,ERR_STREAM_DESTROYED:Od,ERR_STREAM_ALREADY_FINISHED:vSe,ERR_STREAM_NULL_VALUES:MSe,ERR_STREAM_WRITE_AFTER_END:USe,ERR_UNKNOWN_ENCODING:fk}=xn().codes,{errorOrDestroy:ql}=ET;uk(Rt.prototype,Nd.prototype);uk(Rt,Nd);function SN(){}var Xl=OSe("kOnFinished");function Cd(t,e,n){typeof n!="boolean"&&(n=e instanceof Ri()),this.objectMode=!!(t&&t.objectMode),n&&(this.objectMode=this.objectMode||!!(t&&t.writableObjectMode)),this.highWaterMark=t?wSe(this,t,"writableHighWaterMark",n):LSe(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let r=!!(t&&t.decodeStrings===!1);this.decodeStrings=!r,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=FSe.bind(void 0,e),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,fT(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!t||t.emitClose!==!1,this.autoDestroy=!t||t.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[Xl]=[]}function fT(t){t.buffered=[],t.bufferedIndex=0,t.allBuffers=!0,t.allNoop=!0}Cd.prototype.getBuffer=function(){return ak(this.buffered,this.bufferedIndex)};ck(Cd.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function Rt(t){let e=this instanceof Ri();if(!e&&!lk(Rt,this))return new Rt(t);this._writableState=new Cd(t,this,e),t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&bSe(t.signal,this)),Nd.call(this,t),ET.construct(this,()=>{let n=this._writableState;n.writing||AN(this,n),mN(this,n)})}ck(Rt,CSe,{__proto__:null,value:function(t){return lk(this,t)?!0:this!==Rt?!1:t&&t._writableState instanceof Cd}});Rt.prototype.pipe=function(){ql(this,new xSe)};function Ek(t,e,n,r){let i=t._writableState;if(typeof n=="function")r=n,n=i.defaultEncoding;else{if(!n)n=i.defaultEncoding;else if(n!=="buffer"&&!uT.isEncoding(n))throw new fk(n);typeof r!="function"&&(r=SN)}if(e===null)throw new MSe;if(!i.objectMode)if(typeof e=="string")i.decodeStrings!==!1&&(e=uT.from(e,n),n="buffer");else if(e instanceof uT)n="buffer";else if(Nd._isUint8Array(e))e=Nd._uint8ArrayToBuffer(e),n="buffer";else throw new DSe("chunk",["string","Buffer","Uint8Array"],e);let s;return i.ending?s=new USe:i.destroyed&&(s=new Od("write")),s?(Jo.nextTick(r,s),ql(t,s,!0),s):(i.pendingcb++,BSe(t,i,e,n,r))}Rt.prototype.write=function(t,e,n){return Ek(this,t,e,n)===!0};Rt.prototype.cork=function(){this._writableState.corked++};Rt.prototype.uncork=function(){let t=this._writableState;t.corked&&(t.corked--,t.writing||AN(this,t))};Rt.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=NSe(e)),!uT.isEncoding(e))throw new fk(e);return this._writableState.defaultEncoding=e,this};function BSe(t,e,n,r,i){let s=e.objectMode?1:n.length;e.length+=s;let o=e.length<e.highWaterMark;return o||(e.needDrain=!0),e.writing||e.corked||e.errored||!e.constructed?(e.buffered.push({chunk:n,encoding:r,callback:i}),e.allBuffers&&r!=="buffer"&&(e.allBuffers=!1),e.allNoop&&i!==SN&&(e.allNoop=!1)):(e.writelen=s,e.writecb=i,e.writing=!0,e.sync=!0,t._write(n,r,e.onwrite),e.sync=!1),o&&!e.errored&&!e.destroyed}function sk(t,e,n,r,i,s,o){e.writelen=r,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new Od("write")):n?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function ok(t,e,n,r){--e.pendingcb,r(n),RN(e),ql(t,n)}function FSe(t,e){let n=t._writableState,r=n.sync,i=n.writecb;if(typeof i!="function"){ql(t,new dk);return}n.writing=!1,n.writecb=null,n.length-=n.writelen,n.writelen=0,e?(e.stack,n.errored||(n.errored=e),t._readableState&&!t._readableState.errored&&(t._readableState.errored=e),r?Jo.nextTick(ok,t,n,e,i):ok(t,n,e,i)):(n.buffered.length>n.bufferedIndex&&AN(t,n),r?n.afterWriteTickInfo!==null&&n.afterWriteTickInfo.cb===i?n.afterWriteTickInfo.count++:(n.afterWriteTickInfo={count:1,cb:i,stream:t,state:n},Jo.nextTick(HSe,n.afterWriteTickInfo)):hk(t,n,1,i))}function HSe({stream:t,state:e,count:n,cb:r}){return e.afterWriteTickInfo=null,hk(t,e,n,r)}function hk(t,e,n,r){for(!e.ending&&!t.destroyed&&e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"));n-- >0;)e.pendingcb--,r();e.destroyed&&RN(e),mN(t,e)}function RN(t){if(t.writing)return;for(let i=t.bufferedIndex;i<t.buffered.length;++i){var e;let{chunk:s,callback:o}=t.buffered[i],a=t.objectMode?1:s.length;t.length-=a,o((e=t.errored)!==null&&e!==void 0?e:new Od("write"))}let n=t[Xl].splice(0);for(let i=0;i<n.length;i++){var r;n[i]((r=t.errored)!==null&&r!==void 0?r:new Od("end"))}fT(t)}function AN(t,e){if(e.corked||e.bufferProcessing||e.destroyed||!e.constructed)return;let{buffered:n,bufferedIndex:r,objectMode:i}=e,s=n.length-r;if(!s)return;let o=r;if(e.bufferProcessing=!0,s>1&&t._writev){e.pendingcb-=s-1;let a=e.allNoop?SN:c=>{for(let u=o;u<n.length;++u)n[u].callback(c)},l=e.allNoop&&o===0?n:ak(n,o);l.allBuffers=e.allBuffers,sk(t,e,!0,e.length,l,"",a),fT(e)}else{do{let{chunk:a,encoding:l,callback:c}=n[o];n[o++]=null;let u=i?1:a.length;sk(t,e,!1,u,a,l,c)}while(o<n.length&&!e.writing);o===n.length?fT(e):o>256?(n.splice(0,o),e.bufferedIndex=0):e.bufferedIndex=o}e.bufferProcessing=!1}Rt.prototype._write=function(t,e,n){if(this._writev)this._writev([{chunk:t,encoding:e}],n);else throw new PSe("_write()")};Rt.prototype._writev=null;Rt.prototype.end=function(t,e,n){let r=this._writableState;typeof t=="function"?(n=t,t=null,e=null):typeof e=="function"&&(n=e,e=null);let i;if(t!=null){let s=Ek(this,t,e);s instanceof ISe&&(i=s)}return r.corked&&(r.corked=1,this.uncork()),i||(!r.errored&&!r.ending?(r.ending=!0,mN(this,r,!0),r.ended=!0):r.finished?i=new vSe("end"):r.destroyed&&(i=new Od("end"))),typeof n=="function"&&(i||r.finished?Jo.nextTick(n,i):r[Xl].push(n)),this};function dT(t){return t.ending&&!t.destroyed&&t.constructed&&t.length===0&&!t.errored&&t.buffered.length===0&&!t.finished&&!t.writing&&!t.errorEmitted&&!t.closeEmitted}function GSe(t,e){let n=!1;function r(i){if(n){ql(t,i??dk());return}if(n=!0,e.pendingcb--,i){let s=e[Xl].splice(0);for(let o=0;o<s.length;o++)s[o](i);ql(t,i,e.sync)}else dT(e)&&(e.prefinished=!0,t.emit("prefinish"),e.pendingcb++,Jo.nextTick(TN,t,e))}e.sync=!0,e.pendingcb++;try{t._final(r)}catch(i){r(i)}e.sync=!1}function WSe(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.finalCalled=!0,GSe(t,e)):(e.prefinished=!0,t.emit("prefinish")))}function mN(t,e,n){dT(e)&&(WSe(t,e),e.pendingcb===0&&(n?(e.pendingcb++,Jo.nextTick((r,i)=>{dT(i)?TN(r,i):i.pendingcb--},t,e)):dT(e)&&(e.pendingcb++,TN(t,e))))}function TN(t,e){e.pendingcb--,e.finished=!0;let n=e[Xl].splice(0);for(let r=0;r<n.length;r++)n[r]();if(t.emit("finish"),e.autoDestroy){let r=t._readableState;(!r||r.autoDestroy&&(r.endEmitted||r.readable===!1))&&t.destroy()}}_Se(Rt.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(t){this._writableState&&(this._writableState.destroyed=t)}},writable:{__proto__:null,get(){let t=this._writableState;return!!t&&t.writable!==!1&&!t.destroyed&&!t.errored&&!t.ending&&!t.ended},set(t){this._writableState&&(this._writableState.writable=!!t)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let t=this._writableState;return t?!t.destroyed&&!t.ending&&t.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var $Se=ET.destroy;Rt.prototype.destroy=function(t,e){let n=this._writableState;return!n.destroyed&&(n.bufferedIndex<n.buffered.length||n[Xl].length)&&Jo.nextTick(RN,n),$Se.call(this,t,e),this};Rt.prototype._undestroy=ET.undestroy;Rt.prototype._destroy=function(t,e){e(t)};Rt.prototype[ySe.captureRejectionSymbol]=function(t){this.destroy(t)};var pN;function pk(){return pN===void 0&&(pN={}),pN}Rt.fromWeb=function(t,e){return pk().newStreamWritableFromWritableStream(t,e)};Rt.toWeb=function(t){return pk().newWritableStreamFromStreamWritable(t)}});var Dk=C((AUe,Lk)=>{var gN=je(),kSe=require("buffer"),{isReadable:YSe,isWritable:VSe,isIterable:Sk,isNodeStream:qSe,isReadableNodeStream:Rk,isWritableNodeStream:Ak,isDuplexNodeStream:XSe,isReadableStream:mk,isWritableStream:gk}=Ti(),Ik=Zi(),{AbortError:bk,codes:{ERR_INVALID_ARG_TYPE:zSe,ERR_INVALID_RETURN_VALUE:_k}}=xn(),{destroyer:jl}=jo(),jSe=Ri(),wk=_d(),KSe=hT(),{createDeferredPromise:Nk}=Yn(),Ok=oN(),Ck=globalThis.Blob||kSe.Blob,JSe=typeof Ck<"u"?function(e){return e instanceof Ck}:function(e){return!1},QSe=globalThis.AbortController||Lt().AbortController,{FunctionPrototypeCall:yk}=ft(),Ys=class extends jSe{constructor(e){super(e),e?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),e?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};Lk.exports=function t(e,n){if(XSe(e))return e;if(Rk(e))return zl({readable:e});if(Ak(e))return zl({writable:e});if(qSe(e))return zl({writable:!1,readable:!1});if(mk(e))return zl({readable:wk.fromWeb(e)});if(gk(e))return zl({writable:KSe.fromWeb(e)});if(typeof e=="function"){let{value:i,write:s,final:o,destroy:a}=ZSe(e);if(Sk(i))return Ok(Ys,i,{objectMode:!0,write:s,final:o,destroy:a});let l=i?.then;if(typeof l=="function"){let c,u=yk(l,i,d=>{if(d!=null)throw new _k("nully","body",d)},d=>{jl(c,d)});return c=new Ys({objectMode:!0,readable:!1,write:s,final(d){o(async()=>{try{await u,gN.nextTick(d,null)}catch(E){gN.nextTick(d,E)}})},destroy:a})}throw new _k("Iterable, AsyncIterable or AsyncFunction",n,i)}if(JSe(e))return t(e.arrayBuffer());if(Sk(e))return Ok(Ys,e,{objectMode:!0,writable:!1});if(mk(e?.readable)&&gk(e?.writable))return Ys.fromWeb(e);if(typeof e?.writable=="object"||typeof e?.readable=="object"){let i=e!=null&&e.readable?Rk(e?.readable)?e?.readable:t(e.readable):void 0,s=e!=null&&e.writable?Ak(e?.writable)?e?.writable:t(e.writable):void 0;return zl({readable:i,writable:s})}let r=e?.then;if(typeof r=="function"){let i;return yk(r,e,s=>{s!=null&&i.push(s),i.push(null)},s=>{jl(i,s)}),i=new Ys({objectMode:!0,writable:!1,read(){}})}throw new zSe(n,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],e)};function ZSe(t){let{promise:e,resolve:n}=Nk(),r=new QSe,i=r.signal;return{value:t((async function*(){for(;;){let o=e;e=null;let{chunk:a,done:l,cb:c}=await o;if(gN.nextTick(c),l)return;if(i.aborted)throw new bk(void 0,{cause:i.reason});({promise:e,resolve:n}=Nk()),yield a}})(),{signal:i}),write(o,a,l){let c=n;n=null,c({chunk:o,done:!1,cb:l})},final(o){let a=n;n=null,a({done:!0,cb:o})},destroy(o,a){r.abort(),a(o)}}}function zl(t){let e=t.readable&&typeof t.readable.read!="function"?wk.wrap(t.readable):t.readable,n=t.writable,r=!!YSe(e),i=!!VSe(n),s,o,a,l,c;function u(d){let E=l;l=null,E?E(d):d&&c.destroy(d)}return c=new Ys({readableObjectMode:!!(e!=null&&e.readableObjectMode),writableObjectMode:!!(n!=null&&n.writableObjectMode),readable:r,writable:i}),i&&(Ik(n,d=>{i=!1,d&&jl(e,d),u(d)}),c._write=function(d,E,f){n.write(d,E)?f():s=f},c._final=function(d){n.end(),o=d},n.on("drain",function(){if(s){let d=s;s=null,d()}}),n.on("finish",function(){if(o){let d=o;o=null,d()}})),r&&(Ik(e,d=>{r=!1,d&&jl(e,d),u(d)}),e.on("readable",function(){if(a){let d=a;a=null,d()}}),e.on("end",function(){c.push(null)}),c._read=function(){for(;;){let d=e.read();if(d===null){a=c._read;return}if(!c.push(d))return}}),c._destroy=function(d,E){!d&&l!==null&&(d=new bk),a=null,s=null,o=null,l===null?E(d):(l=E,jl(n,d),jl(e,d))},c}});var Ri=C((mUe,vk)=>{"use strict";var{ObjectDefineProperties:eRe,ObjectGetOwnPropertyDescriptor:es,ObjectKeys:tRe,ObjectSetPrototypeOf:Pk}=ft();vk.exports=Gr;var NN=_d(),_r=hT();Pk(Gr.prototype,NN.prototype);Pk(Gr,NN);{let t=tRe(_r.prototype);for(let e=0;e<t.length;e++){let n=t[e];Gr.prototype[n]||(Gr.prototype[n]=_r.prototype[n])}}function Gr(t){if(!(this instanceof Gr))return new Gr(t);NN.call(this,t),_r.call(this,t),t?(this.allowHalfOpen=t.allowHalfOpen!==!1,t.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),t.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}eRe(Gr.prototype,{writable:{__proto__:null,...es(_r.prototype,"writable")},writableHighWaterMark:{__proto__:null,...es(_r.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...es(_r.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...es(_r.prototype,"writableBuffer")},writableLength:{__proto__:null,...es(_r.prototype,"writableLength")},writableFinished:{__proto__:null,...es(_r.prototype,"writableFinished")},writableCorked:{__proto__:null,...es(_r.prototype,"writableCorked")},writableEnded:{__proto__:null,...es(_r.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...es(_r.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(t){this._readableState&&this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}});var IN;function xk(){return IN===void 0&&(IN={}),IN}Gr.fromWeb=function(t,e){return xk().newStreamDuplexFromReadableWritablePair(t,e)};Gr.toWeb=function(t){return xk().newReadableWritablePairFromDuplex(t)};var _N;Gr.from=function(t){return _N||(_N=Dk()),_N(t,"body")}});var yN=C((gUe,Uk)=>{"use strict";var{ObjectSetPrototypeOf:Mk,Symbol:nRe}=ft();Uk.exports=ts;var{ERR_METHOD_NOT_IMPLEMENTED:rRe}=xn().codes,CN=Ri(),{getHighWaterMark:iRe}=gd();Mk(ts.prototype,CN.prototype);Mk(ts,CN);var yd=nRe("kCallback");function ts(t){if(!(this instanceof ts))return new ts(t);let e=t?iRe(this,t,"readableHighWaterMark",!0):null;e===0&&(t={...t,highWaterMark:null,readableHighWaterMark:e,writableHighWaterMark:t.writableHighWaterMark||0}),CN.call(this,t),this._readableState.sync=!1,this[yd]=null,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",sRe)}function ON(t){typeof this._flush=="function"&&!this.destroyed?this._flush((e,n)=>{if(e){t?t(e):this.destroy(e);return}n!=null&&this.push(n),this.push(null),t&&t()}):(this.push(null),t&&t())}function sRe(){this._final!==ON&&ON.call(this)}ts.prototype._final=ON;ts.prototype._transform=function(t,e,n){throw new rRe("_transform()")};ts.prototype._write=function(t,e,n){let r=this._readableState,i=this._writableState,s=r.length;this._transform(t,e,(o,a)=>{if(o){n(o);return}a!=null&&this.push(a),i.ended||s===r.length||r.length<r.highWaterMark?n():this[yd]=n})};ts.prototype._read=function(){if(this[yd]){let t=this[yd];this[yd]=null,t()}}});var wN=C((IUe,Fk)=>{"use strict";var{ObjectSetPrototypeOf:Bk}=ft();Fk.exports=Kl;var bN=yN();Bk(Kl.prototype,bN.prototype);Bk(Kl,bN);function Kl(t){if(!(this instanceof Kl))return new Kl(t);bN.call(this,t)}Kl.prototype._transform=function(t,e,n){n(null,t)}});var RT=C((_Ue,kk)=>{var bd=je(),{ArrayIsArray:oRe,Promise:aRe,SymbolAsyncIterator:lRe,SymbolDispose:cRe}=ft(),ST=Zi(),{once:uRe}=Yn(),dRe=jo(),Hk=Ri(),{aggregateTwoErrors:fRe,codes:{ERR_INVALID_ARG_TYPE:FN,ERR_INVALID_RETURN_VALUE:LN,ERR_MISSING_ARGS:ERe,ERR_STREAM_DESTROYED:hRe,ERR_STREAM_PREMATURE_CLOSE:pRe},AbortError:TRe}=xn(),{validateFunction:SRe,validateAbortSignal:RRe}=Wl(),{isIterable:Qo,isReadable:DN,isReadableNodeStream:TT,isNodeStream:Gk,isTransformStream:Jl,isWebStream:ARe,isReadableStream:PN,isReadableFinished:mRe}=Ti(),gRe=globalThis.AbortController||Lt().AbortController,xN,vN,MN;function Wk(t,e,n){let r=!1;t.on("close",()=>{r=!0});let i=ST(t,{readable:e,writable:n},s=>{r=!s});return{destroy:s=>{r||(r=!0,dRe.destroyer(t,s||new hRe("pipe")))},cleanup:i}}function IRe(t){return SRe(t[t.length-1],"streams[stream.length - 1]"),t.pop()}function UN(t){if(Qo(t))return t;if(TT(t))return _Re(t);throw new FN("val",["Readable","Iterable","AsyncIterable"],t)}async function*_Re(t){vN||(vN=_d()),yield*vN.prototype[lRe].call(t)}async function pT(t,e,n,{end:r}){let i,s=null,o=c=>{if(c&&(i=c),s){let u=s;s=null,u()}},a=()=>new aRe((c,u)=>{i?u(i):s=()=>{i?u(i):c()}});e.on("drain",o);let l=ST(e,{readable:!1},o);try{e.writableNeedDrain&&await a();for await(let c of t)e.write(c)||await a();r&&(e.end(),await a()),n()}catch(c){n(i!==c?fRe(i,c):c)}finally{l(),e.off("drain",o)}}async function BN(t,e,n,{end:r}){Jl(e)&&(e=e.writable);let i=e.getWriter();try{for await(let s of t)await i.ready,i.write(s).catch(()=>{});await i.ready,r&&await i.close(),n()}catch(s){try{await i.abort(s),n(s)}catch(o){n(o)}}}function NRe(...t){return $k(t,uRe(IRe(t)))}function $k(t,e,n){if(t.length===1&&oRe(t[0])&&(t=t[0]),t.length<2)throw new ERe("streams");let r=new gRe,i=r.signal,s=n?.signal,o=[];RRe(s,"options.signal");function a(){p(new TRe)}MN=MN||Yn().addAbortListener;let l;s&&(l=MN(s,a));let c,u,d=[],E=0;function f(R){p(R,--E===0)}function p(R,m){var A;if(R&&(!c||c.code==="ERR_STREAM_PREMATURE_CLOSE")&&(c=R),!(!c&&!m)){for(;d.length;)d.shift()(c);(A=l)===null||A===void 0||A[cRe](),r.abort(),m&&(c||o.forEach(N=>N()),bd.nextTick(e,c,u))}}let h;for(let R=0;R<t.length;R++){let m=t[R],A=R<t.length-1,N=R>0,g=A||n?.end!==!1,L=R===t.length-1;if(Gk(m)){let y=function(D){D&&D.name!=="AbortError"&&D.code!=="ERR_STREAM_PREMATURE_CLOSE"&&f(D)};var I=y;if(g){let{destroy:D,cleanup:x}=Wk(m,A,N);d.push(D),DN(m)&&L&&o.push(x)}m.on("error",y),DN(m)&&L&&o.push(()=>{m.removeListener("error",y)})}if(R===0)if(typeof m=="function"){if(h=m({signal:i}),!Qo(h))throw new LN("Iterable, AsyncIterable or Stream","source",h)}else Qo(m)||TT(m)||Jl(m)?h=m:h=Hk.from(m);else if(typeof m=="function"){if(Jl(h)){var T;h=UN((T=h)===null||T===void 0?void 0:T.readable)}else h=UN(h);if(h=m(h,{signal:i}),A){if(!Qo(h,!0))throw new LN("AsyncIterable",`transform[${R-1}]`,h)}else{var S;xN||(xN=wN());let y=new xN({objectMode:!0}),D=(S=h)===null||S===void 0?void 0:S.then;if(typeof D=="function")E++,D.call(h,H=>{u=H,H!=null&&y.write(H),g&&y.end(),bd.nextTick(f)},H=>{y.destroy(H),bd.nextTick(f,H)});else if(Qo(h,!0))E++,pT(h,y,f,{end:g});else if(PN(h)||Jl(h)){let H=h.readable||h;E++,pT(H,y,f,{end:g})}else throw new LN("AsyncIterable or Promise","destination",h);h=y;let{destroy:x,cleanup:B}=Wk(h,!1,!0);d.push(x),L&&o.push(B)}}else if(Gk(m)){if(TT(h)){E+=2;let y=ORe(h,m,f,{end:g});DN(m)&&L&&o.push(y)}else if(Jl(h)||PN(h)){let y=h.readable||h;E++,pT(y,m,f,{end:g})}else if(Qo(h))E++,pT(h,m,f,{end:g});else throw new FN("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],h);h=m}else if(ARe(m)){if(TT(h))E++,BN(UN(h),m,f,{end:g});else if(PN(h)||Qo(h))E++,BN(h,m,f,{end:g});else if(Jl(h))E++,BN(h.readable,m,f,{end:g});else throw new FN("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],h);h=m}else h=Hk.from(m)}return(i!=null&&i.aborted||s!=null&&s.aborted)&&bd.nextTick(a),h}function ORe(t,e,n,{end:r}){let i=!1;if(e.on("close",()=>{i||n(new pRe)}),t.pipe(e,{end:!1}),r){let o=function(){i=!0,e.end()};var s=o;mRe(t)?bd.nextTick(o):t.once("end",o)}else n();return ST(t,{readable:!0,writable:!1},o=>{let a=t._readableState;o&&o.code==="ERR_STREAM_PREMATURE_CLOSE"&&a&&a.ended&&!a.errored&&!a.errorEmitted?t.once("end",n).once("error",n):n(o)}),ST(e,{readable:!1,writable:!0},n)}kk.exports={pipelineImpl:$k,pipeline:NRe}});var GN=C((NUe,jk)=>{"use strict";var{pipeline:CRe}=RT(),AT=Ri(),{destroyer:yRe}=jo(),{isNodeStream:mT,isReadable:Yk,isWritable:Vk,isWebStream:HN,isTransformStream:Zo,isWritableStream:qk,isReadableStream:Xk}=Ti(),{AbortError:bRe,codes:{ERR_INVALID_ARG_VALUE:zk,ERR_MISSING_ARGS:wRe}}=xn(),LRe=Zi();jk.exports=function(...e){if(e.length===0)throw new wRe("streams");if(e.length===1)return AT.from(e[0]);let n=[...e];if(typeof e[0]=="function"&&(e[0]=AT.from(e[0])),typeof e[e.length-1]=="function"){let f=e.length-1;e[f]=AT.from(e[f])}for(let f=0;f<e.length;++f)if(!(!mT(e[f])&&!HN(e[f]))){if(f<e.length-1&&!(Yk(e[f])||Xk(e[f])||Zo(e[f])))throw new zk(`streams[${f}]`,n[f],"must be readable");if(f>0&&!(Vk(e[f])||qk(e[f])||Zo(e[f])))throw new zk(`streams[${f}]`,n[f],"must be writable")}let r,i,s,o,a;function l(f){let p=o;o=null,p?p(f):f?a.destroy(f):!E&&!d&&a.destroy()}let c=e[0],u=CRe(e,l),d=!!(Vk(c)||qk(c)||Zo(c)),E=!!(Yk(u)||Xk(u)||Zo(u));if(a=new AT({writableObjectMode:!!(c!=null&&c.writableObjectMode),readableObjectMode:!!(u!=null&&u.readableObjectMode),writable:d,readable:E}),d){if(mT(c))a._write=function(p,h,T){c.write(p,h)?T():r=T},a._final=function(p){c.end(),i=p},c.on("drain",function(){if(r){let p=r;r=null,p()}});else if(HN(c)){let h=(Zo(c)?c.writable:c).getWriter();a._write=async function(T,S,I){try{await h.ready,h.write(T).catch(()=>{}),I()}catch(R){I(R)}},a._final=async function(T){try{await h.ready,h.close().catch(()=>{}),i=T}catch(S){T(S)}}}let f=Zo(u)?u.readable:u;LRe(f,()=>{if(i){let p=i;i=null,p()}})}if(E){if(mT(u))u.on("readable",function(){if(s){let f=s;s=null,f()}}),u.on("end",function(){a.push(null)}),a._read=function(){for(;;){let f=u.read();if(f===null){s=a._read;return}if(!a.push(f))return}};else if(HN(u)){let p=(Zo(u)?u.readable:u).getReader();a._read=async function(){for(;;)try{let{value:h,done:T}=await p.read();if(!a.push(h))return;if(T){a.push(null);return}}catch{return}}}}return a._destroy=function(f,p){!f&&o!==null&&(f=new bRe),s=null,r=null,i=null,o===null?p(f):(o=p,mT(u)&&yRe(u,f))},a}});var sY=C((OUe,kN)=>{"use strict";var DRe=globalThis.AbortController||Lt().AbortController,{codes:{ERR_INVALID_ARG_VALUE:PRe,ERR_INVALID_ARG_TYPE:wd,ERR_MISSING_ARGS:xRe,ERR_OUT_OF_RANGE:vRe},AbortError:Ai}=xn(),{validateAbortSignal:ea,validateInteger:Kk,validateObject:ta}=Wl(),MRe=ft().Symbol("kWeak"),URe=ft().Symbol("kResistStopPropagation"),{finished:BRe}=Zi(),FRe=GN(),{addAbortSignalNoValidate:HRe}=md(),{isWritable:GRe,isNodeStream:WRe}=Ti(),{deprecate:$Re}=Yn(),{ArrayPrototypePush:kRe,Boolean:YRe,MathFloor:Jk,Number:VRe,NumberIsNaN:qRe,Promise:Qk,PromiseReject:Zk,PromiseResolve:XRe,PromisePrototypeThen:eY,Symbol:nY}=ft(),gT=nY("kEmpty"),tY=nY("kEof");function zRe(t,e){if(e!=null&&ta(e,"options"),e?.signal!=null&&ea(e.signal,"options.signal"),WRe(t)&&!GRe(t))throw new PRe("stream",t,"must be writable");let n=FRe(this,t);return e!=null&&e.signal&&HRe(e.signal,n),n}function IT(t,e){if(typeof t!="function")throw new wd("fn",["Function","AsyncFunction"],t);e!=null&&ta(e,"options"),e?.signal!=null&&ea(e.signal,"options.signal");let n=1;e?.concurrency!=null&&(n=Jk(e.concurrency));let r=n-1;return e?.highWaterMark!=null&&(r=Jk(e.highWaterMark)),Kk(n,"options.concurrency",1),Kk(r,"options.highWaterMark",0),r+=n,async function*(){let s=Yn().AbortSignalAny([e?.signal].filter(YRe)),o=this,a=[],l={signal:s},c,u,d=!1,E=0;function f(){d=!0,p()}function p(){E-=1,h()}function h(){u&&!d&&E<n&&a.length<r&&(u(),u=null)}async function T(){try{for await(let S of o){if(d)return;if(s.aborted)throw new Ai;try{if(S=t(S,l),S===gT)continue;S=XRe(S)}catch(I){S=Zk(I)}E+=1,eY(S,p,f),a.push(S),c&&(c(),c=null),!d&&(a.length>=r||E>=n)&&await new Qk(I=>{u=I})}a.push(tY)}catch(S){let I=Zk(S);eY(I,p,f),a.push(I)}finally{d=!0,c&&(c(),c=null)}}T();try{for(;;){for(;a.length>0;){let S=await a[0];if(S===tY)return;if(s.aborted)throw new Ai;S!==gT&&(yield S),a.shift(),h()}await new Qk(S=>{c=S})}}finally{d=!0,u&&(u(),u=null)}}.call(this)}function jRe(t=void 0){return t!=null&&ta(t,"options"),t?.signal!=null&&ea(t.signal,"options.signal"),async function*(){let n=0;for await(let i of this){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new Ai({cause:t.signal.reason});yield[n++,i]}}.call(this)}async function rY(t,e=void 0){for await(let n of $N.call(this,t,e))return!0;return!1}async function KRe(t,e=void 0){if(typeof t!="function")throw new wd("fn",["Function","AsyncFunction"],t);return!await rY.call(this,async(...n)=>!await t(...n),e)}async function JRe(t,e){for await(let n of $N.call(this,t,e))return n}async function QRe(t,e){if(typeof t!="function")throw new wd("fn",["Function","AsyncFunction"],t);async function n(r,i){return await t(r,i),gT}for await(let r of IT.call(this,n,e));}function $N(t,e){if(typeof t!="function")throw new wd("fn",["Function","AsyncFunction"],t);async function n(r,i){return await t(r,i)?r:gT}return IT.call(this,n,e)}var WN=class extends xRe{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function ZRe(t,e,n){var r;if(typeof t!="function")throw new wd("reducer",["Function","AsyncFunction"],t);n!=null&&ta(n,"options"),n?.signal!=null&&ea(n.signal,"options.signal");let i=arguments.length>1;if(n!=null&&(r=n.signal)!==null&&r!==void 0&&r.aborted){let c=new Ai(void 0,{cause:n.signal.reason});throw this.once("error",()=>{}),await BRe(this.destroy(c)),c}let s=new DRe,o=s.signal;if(n!=null&&n.signal){let c={once:!0,[MRe]:this,[URe]:!0};n.signal.addEventListener("abort",()=>s.abort(),c)}let a=!1;try{for await(let c of this){var l;if(a=!0,n!=null&&(l=n.signal)!==null&&l!==void 0&&l.aborted)throw new Ai;i?e=await t(e,c,{signal:o}):(e=c,i=!0)}if(!a&&!i)throw new WN}finally{s.abort()}return e}async function eAe(t){t!=null&&ta(t,"options"),t?.signal!=null&&ea(t.signal,"options.signal");let e=[];for await(let r of this){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new Ai(void 0,{cause:t.signal.reason});kRe(e,r)}return e}function tAe(t,e){let n=IT.call(this,t,e);return async function*(){for await(let i of n)yield*i}.call(this)}function iY(t){if(t=VRe(t),qRe(t))return 0;if(t<0)throw new vRe("number",">= 0",t);return t}function nAe(t,e=void 0){return e!=null&&ta(e,"options"),e?.signal!=null&&ea(e.signal,"options.signal"),t=iY(t),async function*(){var r;if(e!=null&&(r=e.signal)!==null&&r!==void 0&&r.aborted)throw new Ai;for await(let s of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new Ai;t--<=0&&(yield s)}}.call(this)}function rAe(t,e=void 0){return e!=null&&ta(e,"options"),e?.signal!=null&&ea(e.signal,"options.signal"),t=iY(t),async function*(){var r;if(e!=null&&(r=e.signal)!==null&&r!==void 0&&r.aborted)throw new Ai;for await(let s of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new Ai;if(t-- >0&&(yield s),t<=0)return}}.call(this)}kN.exports.streamReturningOperators={asIndexedPairs:$Re(jRe,"readable.asIndexedPairs will be removed in a future version."),drop:nAe,filter:$N,flatMap:tAe,map:IT,take:rAe,compose:zRe};kN.exports.promiseReturningOperators={every:KRe,forEach:QRe,reduce:ZRe,toArray:eAe,some:rY,find:JRe}});var YN=C((CUe,oY)=>{"use strict";var{ArrayPrototypePop:iAe,Promise:sAe}=ft(),{isIterable:oAe,isNodeStream:aAe,isWebStream:lAe}=Ti(),{pipelineImpl:cAe}=RT(),{finished:uAe}=Zi();VN();function dAe(...t){return new sAe((e,n)=>{let r,i,s=t[t.length-1];if(s&&typeof s=="object"&&!aAe(s)&&!oAe(s)&&!lAe(s)){let o=iAe(t);r=o.signal,i=o.end}cAe(t,(o,a)=>{o?n(o):e(a)},{signal:r,end:i})})}oY.exports={finished:uAe,pipeline:dAe}});var VN=C((yUe,pY)=>{"use strict";var{Buffer:fAe}=require("buffer"),{ObjectDefineProperty:ns,ObjectKeys:cY,ReflectApply:uY}=ft(),{promisify:{custom:dY}}=Yn(),{streamReturningOperators:aY,promiseReturningOperators:lY}=sY(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:fY}}=xn(),EAe=GN(),{setDefaultHighWaterMark:hAe,getDefaultHighWaterMark:pAe}=gd(),{pipeline:EY}=RT(),{destroyer:TAe}=jo(),hY=Zi(),qN=YN(),Ld=Ti(),at=pY.exports=nT().Stream;at.isDestroyed=Ld.isDestroyed;at.isDisturbed=Ld.isDisturbed;at.isErrored=Ld.isErrored;at.isReadable=Ld.isReadable;at.isWritable=Ld.isWritable;at.Readable=_d();for(let t of cY(aY)){let n=function(...r){if(new.target)throw fY();return at.Readable.from(uY(e,this,r))},e=aY[t];ns(n,"name",{__proto__:null,value:e.name}),ns(n,"length",{__proto__:null,value:e.length}),ns(at.Readable.prototype,t,{__proto__:null,value:n,enumerable:!1,configurable:!0,writable:!0})}for(let t of cY(lY)){let n=function(...r){if(new.target)throw fY();return uY(e,this,r)},e=lY[t];ns(n,"name",{__proto__:null,value:e.name}),ns(n,"length",{__proto__:null,value:e.length}),ns(at.Readable.prototype,t,{__proto__:null,value:n,enumerable:!1,configurable:!0,writable:!0})}at.Writable=hT();at.Duplex=Ri();at.Transform=yN();at.PassThrough=wN();at.pipeline=EY;var{addAbortSignal:SAe}=md();at.addAbortSignal=SAe;at.finished=hY;at.destroy=TAe;at.compose=EAe;at.setDefaultHighWaterMark=hAe;at.getDefaultHighWaterMark=pAe;ns(at,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return qN}});ns(EY,dY,{__proto__:null,enumerable:!0,get(){return qN.pipeline}});ns(hY,dY,{__proto__:null,enumerable:!0,get(){return qN.finished}});at.Stream=at;at._isUint8Array=function(e){return e instanceof Uint8Array};at._uint8ArrayToBuffer=function(e){return fAe.from(e.buffer,e.byteOffset,e.byteLength)}});var XN=C((bUe,Pe)=>{"use strict";var Vt=require("stream");if(Vt&&process.env.READABLE_STREAM==="disable"){let t=Vt.promises;Pe.exports._uint8ArrayToBuffer=Vt._uint8ArrayToBuffer,Pe.exports._isUint8Array=Vt._isUint8Array,Pe.exports.isDisturbed=Vt.isDisturbed,Pe.exports.isErrored=Vt.isErrored,Pe.exports.isReadable=Vt.isReadable,Pe.exports.Readable=Vt.Readable,Pe.exports.Writable=Vt.Writable,Pe.exports.Duplex=Vt.Duplex,Pe.exports.Transform=Vt.Transform,Pe.exports.PassThrough=Vt.PassThrough,Pe.exports.addAbortSignal=Vt.addAbortSignal,Pe.exports.finished=Vt.finished,Pe.exports.destroy=Vt.destroy,Pe.exports.pipeline=Vt.pipeline,Pe.exports.compose=Vt.compose,Object.defineProperty(Vt,"promises",{configurable:!0,enumerable:!0,get(){return t}}),Pe.exports.Stream=Vt.Stream}else{let t=VN(),e=YN(),n=t.Readable.destroy;Pe.exports=t.Readable,Pe.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,Pe.exports._isUint8Array=t._isUint8Array,Pe.exports.isDisturbed=t.isDisturbed,Pe.exports.isErrored=t.isErrored,Pe.exports.isReadable=t.isReadable,Pe.exports.Readable=t.Readable,Pe.exports.Writable=t.Writable,Pe.exports.Duplex=t.Duplex,Pe.exports.Transform=t.Transform,Pe.exports.PassThrough=t.PassThrough,Pe.exports.addAbortSignal=t.addAbortSignal,Pe.exports.finished=t.finished,Pe.exports.destroy=t.destroy,Pe.exports.destroy=n,Pe.exports.pipeline=t.pipeline,Pe.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return e}}),Pe.exports.Stream=t.Stream}Pe.exports.default=Pe.exports});var zN=C((LUe,TY)=>{var wUe=require("stream").Stream,RAe=XN().PassThrough,AAe=LE(),mAe=TY.exports={};mAe.normalizeInputSource=function(t){if(t===null)return Buffer.alloc(0);if(typeof t=="string")return Buffer.from(t);if(AAe(t)&&!t._readableState){var e=new RAe;return t.pipe(e),e}return t}});var KN=C((DUe,SY)=>{var gAe=require("util").inherits,IAe=LE(),jN=XN().Transform,_Ae=qp(),NAe=zN(),ir=SY.exports=function(t){if(!(this instanceof ir))return new ir(t);jN.call(this,t),this.offset=0,this._archive={finish:!1,finished:!1,processing:!1}};gAe(ir,jN);ir.prototype._appendBuffer=function(t,e,n){};ir.prototype._appendStream=function(t,e,n){};ir.prototype._emitErrorCallback=function(t){t&&this.emit("error",t)};ir.prototype._finish=function(t){};ir.prototype._normalizeEntry=function(t){};ir.prototype._transform=function(t,e,n){n(null,t)};ir.prototype.entry=function(t,e,n){if(e=e||null,typeof n!="function"&&(n=this._emitErrorCallback.bind(this)),!(t instanceof _Ae)){n(new Error("not a valid instance of ArchiveEntry"));return}if(this._archive.finish||this._archive.finished){n(new Error("unacceptable entry after finish"));return}if(this._archive.processing){n(new Error("already processing an entry"));return}if(this._archive.processing=!0,this._normalizeEntry(t),this._entry=t,e=NAe.normalizeInputSource(e),Buffer.isBuffer(e))this._appendBuffer(t,e,n);else if(IAe(e))this._appendStream(t,e,n);else{this._archive.processing=!1,n(new Error("input source must be valid Stream or Buffer instance"));return}return this};ir.prototype.finish=function(){if(this._archive.processing){this._archive.finish=!0;return}this._finish()};ir.prototype.getBytesWritten=function(){return this.offset};ir.prototype.write=function(t,e){return t&&(this.offset+=t.length),jN.prototype.write.call(this,t,e)}});var _T=C(JN=>{var RY;(function(t){typeof DO_NOT_EXPORT_CRC>"u"?typeof JN=="object"?t(JN):typeof define=="function"&&define.amd?define(function(){var e={};return t(e),e}):t(RY={}):t(RY={})})(function(t){t.version="1.2.2";function e(){for(var g=0,L=new Array(256),y=0;y!=256;++y)g=y,g=g&1?-306674912^g>>>1:g>>>1,g=g&1?-306674912^g>>>1:g>>>1,g=g&1?-306674912^g>>>1:g>>>1,g=g&1?-306674912^g>>>1:g>>>1,g=g&1?-306674912^g>>>1:g>>>1,g=g&1?-306674912^g>>>1:g>>>1,g=g&1?-306674912^g>>>1:g>>>1,g=g&1?-306674912^g>>>1:g>>>1,L[y]=g;return typeof Int32Array<"u"?new Int32Array(L):L}var n=e();function r(g){var L=0,y=0,D=0,x=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(D=0;D!=256;++D)x[D]=g[D];for(D=0;D!=256;++D)for(y=g[D],L=256+D;L<4096;L+=256)y=x[L]=y>>>8^g[y&255];var B=[];for(D=1;D!=16;++D)B[D-1]=typeof Int32Array<"u"?x.subarray(D*256,D*256+256):x.slice(D*256,D*256+256);return B}var i=r(n),s=i[0],o=i[1],a=i[2],l=i[3],c=i[4],u=i[5],d=i[6],E=i[7],f=i[8],p=i[9],h=i[10],T=i[11],S=i[12],I=i[13],R=i[14];function m(g,L){for(var y=L^-1,D=0,x=g.length;D<x;)y=y>>>8^n[(y^g.charCodeAt(D++))&255];return~y}function A(g,L){for(var y=L^-1,D=g.length-15,x=0;x<D;)y=R[g[x++]^y&255]^I[g[x++]^y>>8&255]^S[g[x++]^y>>16&255]^T[g[x++]^y>>>24]^h[g[x++]]^p[g[x++]]^f[g[x++]]^E[g[x++]]^d[g[x++]]^u[g[x++]]^c[g[x++]]^l[g[x++]]^a[g[x++]]^o[g[x++]]^s[g[x++]]^n[g[x++]];for(D+=15;x<D;)y=y>>>8^n[(y^g[x++])&255];return~y}function N(g,L){for(var y=L^-1,D=0,x=g.length,B=0,H=0;D<x;)B=g.charCodeAt(D++),B<128?y=y>>>8^n[(y^B)&255]:B<2048?(y=y>>>8^n[(y^(192|B>>6&31))&255],y=y>>>8^n[(y^(128|B&63))&255]):B>=55296&&B<57344?(B=(B&1023)+64,H=g.charCodeAt(D++)&1023,y=y>>>8^n[(y^(240|B>>8&7))&255],y=y>>>8^n[(y^(128|B>>2&63))&255],y=y>>>8^n[(y^(128|H>>6&15|(B&3)<<4))&255],y=y>>>8^n[(y^(128|H&63))&255]):(y=y>>>8^n[(y^(224|B>>12&15))&255],y=y>>>8^n[(y^(128|B>>6&63))&255],y=y>>>8^n[(y^(128|B&63))&255]);return~y}t.table=n,t.bstr=m,t.buf=A,t.str=N})});var Et=C((xUe,AY)=>{"use strict";var QN=class extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError(`Expected input to be an Array, got ${typeof e}`);let n="";for(let r=0;r<e.length;r++)n+=`    ${e[r].stack}
`;super(n),this.name="AggregateError",this.errors=e}};AY.exports={AggregateError:QN,ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,e){return t.includes(e)},ArrayPrototypeIndexOf(t,e){return t.indexOf(e)},ArrayPrototypeJoin(t,e){return t.join(e)},ArrayPrototypeMap(t,e){return t.map(e)},ArrayPrototypePop(t,e){return t.pop(e)},ArrayPrototypePush(t,e){return t.push(e)},ArrayPrototypeSlice(t,e,n){return t.slice(e,n)},Error,FunctionPrototypeCall(t,e,...n){return t.call(e,...n)},FunctionPrototypeSymbolHasInstance(t,e){return Function.prototype[Symbol.hasInstance].call(t,e)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,e){return Object.defineProperties(t,e)},ObjectDefineProperty(t,e,n){return Object.defineProperty(t,e,n)},ObjectGetOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,e){return Object.setPrototypeOf(t,e)},Promise,PromisePrototypeCatch(t,e){return t.catch(e)},PromisePrototypeThen(t,e,n){return t.then(e,n)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,e){return t.test(e)},SafeSet:Set,String,StringPrototypeSlice(t,e,n){return t.slice(e,n)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,e,n){return t.set(e,n)},Boolean,Uint8Array}});var ZN=C((vUe,mY)=>{"use strict";mY.exports={format(t,...e){return t.replace(/%([sdifj])/g,function(...[n,r]){let i=e.shift();return r==="f"?i.toFixed(6):r==="j"?JSON.stringify(i):r==="s"&&typeof i=="object"?`${i.constructor!==Object?i.constructor.name:""} {}`.trim():i.toString()})},inspect(t){switch(typeof t){case"string":if(t.includes("'"))if(t.includes('"')){if(!t.includes("`")&&!t.includes("${"))return`\`${t}\``}else return`"${t}"`;return`'${t}'`;case"number":return isNaN(t)?"NaN":Object.is(t,-0)?String(t):t;case"bigint":return`${String(t)}n`;case"boolean":case"undefined":return String(t);case"object":return"{}"}}}});var Mn=C((MUe,_Y)=>{"use strict";var{format:OAe,inspect:NT}=ZN(),{AggregateError:CAe}=Et(),yAe=globalThis.AggregateError||CAe,bAe=Symbol("kIsNodeError"),wAe=["string","function","number","object","Function","Object","boolean","bigint","symbol"],LAe=/^([A-Z][a-z0-9]*)+$/,DAe="__node_internal_",OT={};function na(t,e){if(!t)throw new OT.ERR_INTERNAL_ASSERTION(e)}function gY(t){let e="",n=t.length,r=t[0]==="-"?1:0;for(;n>=r+4;n-=3)e=`_${t.slice(n-3,n)}${e}`;return`${t.slice(0,n)}${e}`}function PAe(t,e,n){if(typeof e=="function")return na(e.length<=n.length,`Code: ${t}; The provided arguments length (${n.length}) does not match the required ones (${e.length}).`),e(...n);let r=(e.match(/%[dfijoOs]/g)||[]).length;return na(r===n.length,`Code: ${t}; The provided arguments length (${n.length}) does not match the required ones (${r}).`),n.length===0?e:OAe(e,...n)}function In(t,e,n){n||(n=Error);class r extends n{constructor(...s){super(PAe(t,e,s))}toString(){return`${this.name} [${t}]: ${this.message}`}}Object.defineProperties(r.prototype,{name:{value:n.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${t}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),r.prototype.code=t,r.prototype[bAe]=!0,OT[t]=r}function IY(t){let e=DAe+t.name;return Object.defineProperty(t,"name",{value:e}),t}function xAe(t,e){if(t&&e&&t!==e){if(Array.isArray(e.errors))return e.errors.push(t),e;let n=new yAe([e,t],e.message);return n.code=e.code,n}return t||e}var eO=class extends Error{constructor(e="The operation was aborted",n=void 0){if(n!==void 0&&typeof n!="object")throw new OT.ERR_INVALID_ARG_TYPE("options","Object",n);super(e,n),this.code="ABORT_ERR",this.name="AbortError"}};In("ERR_ASSERTION","%s",Error);In("ERR_INVALID_ARG_TYPE",(t,e,n)=>{na(typeof t=="string","'name' must be a string"),Array.isArray(e)||(e=[e]);let r="The ";t.endsWith(" argument")?r+=`${t} `:r+=`"${t}" ${t.includes(".")?"property":"argument"} `,r+="must be ";let i=[],s=[],o=[];for(let l of e)na(typeof l=="string","All expected entries have to be of type string"),wAe.includes(l)?i.push(l.toLowerCase()):LAe.test(l)?s.push(l):(na(l!=="object",'The value "object" should be written as "Object"'),o.push(l));if(s.length>0){let l=i.indexOf("object");l!==-1&&(i.splice(i,l,1),s.push("Object"))}if(i.length>0){switch(i.length){case 1:r+=`of type ${i[0]}`;break;case 2:r+=`one of type ${i[0]} or ${i[1]}`;break;default:{let l=i.pop();r+=`one of type ${i.join(", ")}, or ${l}`}}(s.length>0||o.length>0)&&(r+=" or ")}if(s.length>0){switch(s.length){case 1:r+=`an instance of ${s[0]}`;break;case 2:r+=`an instance of ${s[0]} or ${s[1]}`;break;default:{let l=s.pop();r+=`an instance of ${s.join(", ")}, or ${l}`}}o.length>0&&(r+=" or ")}switch(o.length){case 0:break;case 1:o[0].toLowerCase()!==o[0]&&(r+="an "),r+=`${o[0]}`;break;case 2:r+=`one of ${o[0]} or ${o[1]}`;break;default:{let l=o.pop();r+=`one of ${o.join(", ")}, or ${l}`}}if(n==null)r+=`. Received ${n}`;else if(typeof n=="function"&&n.name)r+=`. Received function ${n.name}`;else if(typeof n=="object"){var a;if((a=n.constructor)!==null&&a!==void 0&&a.name)r+=`. Received an instance of ${n.constructor.name}`;else{let l=NT(n,{depth:-1});r+=`. Received ${l}`}}else{let l=NT(n,{colors:!1});l.length>25&&(l=`${l.slice(0,25)}...`),r+=`. Received type ${typeof n} (${l})`}return r},TypeError);In("ERR_INVALID_ARG_VALUE",(t,e,n="is invalid")=>{let r=NT(e);return r.length>128&&(r=r.slice(0,128)+"..."),`The ${t.includes(".")?"property":"argument"} '${t}' ${n}. Received ${r}`},TypeError);In("ERR_INVALID_RETURN_VALUE",(t,e,n)=>{var r;let i=n!=null&&(r=n.constructor)!==null&&r!==void 0&&r.name?`instance of ${n.constructor.name}`:`type ${typeof n}`;return`Expected ${t} to be returned from the "${e}" function but got ${i}.`},TypeError);In("ERR_MISSING_ARGS",(...t)=>{na(t.length>0,"At least one arg needs to be specified");let e,n=t.length;switch(t=(Array.isArray(t)?t:[t]).map(r=>`"${r}"`).join(" or "),n){case 1:e+=`The ${t[0]} argument`;break;case 2:e+=`The ${t[0]} and ${t[1]} arguments`;break;default:{let r=t.pop();e+=`The ${t.join(", ")}, and ${r} arguments`}break}return`${e} must be specified`},TypeError);In("ERR_OUT_OF_RANGE",(t,e,n)=>{na(e,'Missing "range" argument');let r;if(Number.isInteger(n)&&Math.abs(n)>2**32)r=gY(String(n));else if(typeof n=="bigint"){r=String(n);let i=BigInt(2)**BigInt(32);(n>i||n<-i)&&(r=gY(r)),r+="n"}else r=NT(n);return`The value of "${t}" is out of range. It must be ${e}. Received ${r}`},RangeError);In("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);In("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);In("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);In("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);In("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);In("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);In("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);In("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);In("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);In("ERR_STREAM_WRITE_AFTER_END","write after end",Error);In("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);_Y.exports={AbortError:eO,aggregateTwoErrors:IY(xAe),hideStackFrames:IY,codes:OT}});var Vn=C((UUe,nO)=>{"use strict";var vAe=require("buffer"),{format:MAe,inspect:UAe}=ZN(),{codes:{ERR_INVALID_ARG_TYPE:tO}}=Mn(),{kResistStopPropagation:BAe,AggregateError:FAe,SymbolDispose:HAe}=Et(),GAe=globalThis.AbortSignal||Lt().AbortSignal,WAe=globalThis.AbortController||Lt().AbortController,$Ae=Object.getPrototypeOf(async function(){}).constructor,NY=globalThis.Blob||vAe.Blob,kAe=typeof NY<"u"?function(e){return e instanceof NY}:function(e){return!1},OY=(t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new tO(e,"AbortSignal",t)},YAe=(t,e)=>{if(typeof t!="function")throw new tO(e,"Function",t)};nO.exports={AggregateError:FAe,kEmptyObject:Object.freeze({}),once(t){let e=!1;return function(...n){e||(e=!0,t.apply(this,n))}},createDeferredPromise:function(){let t,e;return{promise:new Promise((r,i)=>{t=r,e=i}),resolve:t,reject:e}},promisify(t){return new Promise((e,n)=>{t((r,...i)=>r?n(r):e(...i))})},debuglog(){return function(){}},format:MAe,inspect:UAe,types:{isAsyncFunction(t){return t instanceof $Ae},isArrayBufferView(t){return ArrayBuffer.isView(t)}},isBlob:kAe,deprecate(t,e){return t},addAbortListener:require("events").addAbortListener||function(e,n){if(e===void 0)throw new tO("signal","AbortSignal",e);OY(e,"signal"),YAe(n,"listener");let r;return e.aborted?queueMicrotask(()=>n()):(e.addEventListener("abort",n,{__proto__:null,once:!0,[BAe]:!0}),r=()=>{e.removeEventListener("abort",n)}),{__proto__:null,[HAe](){var i;(i=r)===null||i===void 0||i()}}},AbortSignalAny:GAe.any||function(e){if(e.length===1)return e[0];let n=new WAe,r=()=>n.abort();return e.forEach(i=>{OY(i,"signals"),i.addEventListener("abort",r,{once:!0})}),n.signal.addEventListener("abort",()=>{e.forEach(i=>i.removeEventListener("abort",r))},{once:!0}),n.signal}};nO.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")});var Zl=C((BUe,MY)=>{"use strict";var{ArrayIsArray:iO,ArrayPrototypeIncludes:wY,ArrayPrototypeJoin:LY,ArrayPrototypeMap:VAe,NumberIsInteger:sO,NumberIsNaN:qAe,NumberMAX_SAFE_INTEGER:XAe,NumberMIN_SAFE_INTEGER:zAe,NumberParseInt:jAe,ObjectPrototypeHasOwnProperty:KAe,RegExpPrototypeExec:DY,String:JAe,StringPrototypeToUpperCase:QAe,StringPrototypeTrim:ZAe}=Et(),{hideStackFrames:Nr,codes:{ERR_SOCKET_BAD_PORT:eme,ERR_INVALID_ARG_TYPE:Un,ERR_INVALID_ARG_VALUE:Ql,ERR_OUT_OF_RANGE:ra,ERR_UNKNOWN_SIGNAL:CY}}=Mn(),{normalizeEncoding:tme}=Vn(),{isAsyncFunction:nme,isArrayBufferView:rme}=Vn().types,yY={};function ime(t){return t===(t|0)}function sme(t){return t===t>>>0}var ome=/^[0-7]+$/,ame="must be a 32-bit unsigned integer or an octal string";function lme(t,e,n){if(typeof t>"u"&&(t=n),typeof t=="string"){if(DY(ome,t)===null)throw new Ql(e,t,ame);t=jAe(t,8)}return PY(t,e),t}var cme=Nr((t,e,n=zAe,r=XAe)=>{if(typeof t!="number")throw new Un(e,"number",t);if(!sO(t))throw new ra(e,"an integer",t);if(t<n||t>r)throw new ra(e,`>= ${n} && <= ${r}`,t)}),ume=Nr((t,e,n=-2147483648,r=2147483647)=>{if(typeof t!="number")throw new Un(e,"number",t);if(!sO(t))throw new ra(e,"an integer",t);if(t<n||t>r)throw new ra(e,`>= ${n} && <= ${r}`,t)}),PY=Nr((t,e,n=!1)=>{if(typeof t!="number")throw new Un(e,"number",t);if(!sO(t))throw new ra(e,"an integer",t);let r=n?1:0,i=4294967295;if(t<r||t>i)throw new ra(e,`>= ${r} && <= ${i}`,t)});function oO(t,e){if(typeof t!="string")throw new Un(e,"string",t)}function dme(t,e,n=void 0,r){if(typeof t!="number")throw new Un(e,"number",t);if(n!=null&&t<n||r!=null&&t>r||(n!=null||r!=null)&&qAe(t))throw new ra(e,`${n!=null?`>= ${n}`:""}${n!=null&&r!=null?" && ":""}${r!=null?`<= ${r}`:""}`,t)}var fme=Nr((t,e,n)=>{if(!wY(n,t)){let i="must be one of: "+LY(VAe(n,s=>typeof s=="string"?`'${s}'`:JAe(s)),", ");throw new Ql(e,t,i)}});function xY(t,e){if(typeof t!="boolean")throw new Un(e,"boolean",t)}function rO(t,e,n){return t==null||!KAe(t,e)?n:t[e]}var Eme=Nr((t,e,n=null)=>{let r=rO(n,"allowArray",!1),i=rO(n,"allowFunction",!1);if(!rO(n,"nullable",!1)&&t===null||!r&&iO(t)||typeof t!="object"&&(!i||typeof t!="function"))throw new Un(e,"Object",t)}),hme=Nr((t,e)=>{if(t!=null&&typeof t!="object"&&typeof t!="function")throw new Un(e,"a dictionary",t)}),CT=Nr((t,e,n=0)=>{if(!iO(t))throw new Un(e,"Array",t);if(t.length<n){let r=`must be longer than ${n}`;throw new Ql(e,t,r)}});function pme(t,e){CT(t,e);for(let n=0;n<t.length;n++)oO(t[n],`${e}[${n}]`)}function Tme(t,e){CT(t,e);for(let n=0;n<t.length;n++)xY(t[n],`${e}[${n}]`)}function Sme(t,e){CT(t,e);for(let n=0;n<t.length;n++){let r=t[n],i=`${e}[${n}]`;if(r==null)throw new Un(i,"AbortSignal",r);vY(r,i)}}function Rme(t,e="signal"){if(oO(t,e),yY[t]===void 0)throw yY[QAe(t)]!==void 0?new CY(t+" (signals must use all capital letters)"):new CY(t)}var Ame=Nr((t,e="buffer")=>{if(!rme(t))throw new Un(e,["Buffer","TypedArray","DataView"],t)});function mme(t,e){let n=tme(e),r=t.length;if(n==="hex"&&r%2!==0)throw new Ql("encoding",e,`is invalid for data of length ${r}`)}function gme(t,e="Port",n=!0){if(typeof t!="number"&&typeof t!="string"||typeof t=="string"&&ZAe(t).length===0||+t!==+t>>>0||t>65535||t===0&&!n)throw new eme(e,t,n);return t|0}var vY=Nr((t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new Un(e,"AbortSignal",t)}),Ime=Nr((t,e)=>{if(typeof t!="function")throw new Un(e,"Function",t)}),_me=Nr((t,e)=>{if(typeof t!="function"||nme(t))throw new Un(e,"Function",t)}),Nme=Nr((t,e)=>{if(t!==void 0)throw new Un(e,"undefined",t)});function Ome(t,e,n){if(!wY(n,t))throw new Un(e,`('${LY(n,"|")}')`,t)}var Cme=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function bY(t,e){if(typeof t>"u"||!DY(Cme,t))throw new Ql(e,t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function yme(t){if(typeof t=="string")return bY(t,"hints"),t;if(iO(t)){let e=t.length,n="";if(e===0)return n;for(let r=0;r<e;r++){let i=t[r];bY(i,"hints"),n+=i,r!==e-1&&(n+=", ")}return n}throw new Ql("hints",t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}MY.exports={isInt32:ime,isUint32:sme,parseFileMode:lme,validateArray:CT,validateStringArray:pme,validateBooleanArray:Tme,validateAbortSignalArray:Sme,validateBoolean:xY,validateBuffer:Ame,validateDictionary:hme,validateEncoding:mme,validateFunction:Ime,validateInt32:ume,validateInteger:cme,validateNumber:dme,validateObject:Eme,validateOneOf:fme,validatePlainFunction:_me,validatePort:gme,validateSignalName:Rme,validateString:oO,validateUint32:PY,validateUndefined:Nme,validateUnion:Ome,validateAbortSignal:vY,validateLinkHeaderValue:yme}});var gi=C((FUe,KY)=>{"use strict";var{SymbolAsyncIterator:UY,SymbolIterator:BY,SymbolFor:ia}=Et(),FY=ia("nodejs.stream.destroyed"),HY=ia("nodejs.stream.errored"),aO=ia("nodejs.stream.readable"),lO=ia("nodejs.stream.writable"),GY=ia("nodejs.stream.disturbed"),bme=ia("nodejs.webstream.isClosedPromise"),wme=ia("nodejs.webstream.controllerErrorFunction");function yT(t,e=!1){var n;return!!(t&&typeof t.pipe=="function"&&typeof t.on=="function"&&(!e||typeof t.pause=="function"&&typeof t.resume=="function")&&(!t._writableState||((n=t._readableState)===null||n===void 0?void 0:n.readable)!==!1)&&(!t._writableState||t._readableState))}function bT(t){var e;return!!(t&&typeof t.write=="function"&&typeof t.on=="function"&&(!t._readableState||((e=t._writableState)===null||e===void 0?void 0:e.writable)!==!1))}function Lme(t){return!!(t&&typeof t.pipe=="function"&&t._readableState&&typeof t.on=="function"&&typeof t.write=="function")}function mi(t){return t&&(t._readableState||t._writableState||typeof t.write=="function"&&typeof t.on=="function"||typeof t.pipe=="function"&&typeof t.on=="function")}function WY(t){return!!(t&&!mi(t)&&typeof t.pipeThrough=="function"&&typeof t.getReader=="function"&&typeof t.cancel=="function")}function $Y(t){return!!(t&&!mi(t)&&typeof t.getWriter=="function"&&typeof t.abort=="function")}function kY(t){return!!(t&&!mi(t)&&typeof t.readable=="object"&&typeof t.writable=="object")}function Dme(t){return WY(t)||$Y(t)||kY(t)}function Pme(t,e){return t==null?!1:e===!0?typeof t[UY]=="function":e===!1?typeof t[BY]=="function":typeof t[UY]=="function"||typeof t[BY]=="function"}function wT(t){if(!mi(t))return null;let e=t._writableState,n=t._readableState,r=e||n;return!!(t.destroyed||t[FY]||r!=null&&r.destroyed)}function YY(t){if(!bT(t))return null;if(t.writableEnded===!0)return!0;let e=t._writableState;return e!=null&&e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function xme(t,e){if(!bT(t))return null;if(t.writableFinished===!0)return!0;let n=t._writableState;return n!=null&&n.errored?!1:typeof n?.finished!="boolean"?null:!!(n.finished||e===!1&&n.ended===!0&&n.length===0)}function vme(t){if(!yT(t))return null;if(t.readableEnded===!0)return!0;let e=t._readableState;return!e||e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function VY(t,e){if(!yT(t))return null;let n=t._readableState;return n!=null&&n.errored?!1:typeof n?.endEmitted!="boolean"?null:!!(n.endEmitted||e===!1&&n.ended===!0&&n.length===0)}function qY(t){return t&&t[aO]!=null?t[aO]:typeof t?.readable!="boolean"?null:wT(t)?!1:yT(t)&&t.readable&&!VY(t)}function XY(t){return t&&t[lO]!=null?t[lO]:typeof t?.writable!="boolean"?null:wT(t)?!1:bT(t)&&t.writable&&!YY(t)}function Mme(t,e){return mi(t)?wT(t)?!0:!(e?.readable!==!1&&qY(t)||e?.writable!==!1&&XY(t)):null}function Ume(t){var e,n;return mi(t)?t.writableErrored?t.writableErrored:(e=(n=t._writableState)===null||n===void 0?void 0:n.errored)!==null&&e!==void 0?e:null:null}function Bme(t){var e,n;return mi(t)?t.readableErrored?t.readableErrored:(e=(n=t._readableState)===null||n===void 0?void 0:n.errored)!==null&&e!==void 0?e:null:null}function Fme(t){if(!mi(t))return null;if(typeof t.closed=="boolean")return t.closed;let e=t._writableState,n=t._readableState;return typeof e?.closed=="boolean"||typeof n?.closed=="boolean"?e?.closed||n?.closed:typeof t._closed=="boolean"&&zY(t)?t._closed:null}function zY(t){return typeof t._closed=="boolean"&&typeof t._defaultKeepAlive=="boolean"&&typeof t._removedConnection=="boolean"&&typeof t._removedContLen=="boolean"}function jY(t){return typeof t._sent100=="boolean"&&zY(t)}function Hme(t){var e;return typeof t._consuming=="boolean"&&typeof t._dumped=="boolean"&&((e=t.req)===null||e===void 0?void 0:e.upgradeOrConnect)===void 0}function Gme(t){if(!mi(t))return null;let e=t._writableState,n=t._readableState,r=e||n;return!r&&jY(t)||!!(r&&r.autoDestroy&&r.emitClose&&r.closed===!1)}function Wme(t){var e;return!!(t&&((e=t[GY])!==null&&e!==void 0?e:t.readableDidRead||t.readableAborted))}function $me(t){var e,n,r,i,s,o,a,l,c,u;return!!(t&&((e=(n=(r=(i=(s=(o=t[HY])!==null&&o!==void 0?o:t.readableErrored)!==null&&s!==void 0?s:t.writableErrored)!==null&&i!==void 0?i:(a=t._readableState)===null||a===void 0?void 0:a.errorEmitted)!==null&&r!==void 0?r:(l=t._writableState)===null||l===void 0?void 0:l.errorEmitted)!==null&&n!==void 0?n:(c=t._readableState)===null||c===void 0?void 0:c.errored)!==null&&e!==void 0?e:!((u=t._writableState)===null||u===void 0)&&u.errored))}KY.exports={isDestroyed:wT,kIsDestroyed:FY,isDisturbed:Wme,kIsDisturbed:GY,isErrored:$me,kIsErrored:HY,isReadable:qY,kIsReadable:aO,kIsClosedPromise:bme,kControllerErrorFunction:wme,kIsWritable:lO,isClosed:Fme,isDuplexNodeStream:Lme,isFinished:Mme,isIterable:Pme,isReadableNodeStream:yT,isReadableStream:WY,isReadableEnded:vme,isReadableFinished:VY,isReadableErrored:Bme,isNodeStream:mi,isWebStream:Dme,isWritable:XY,isWritableNodeStream:bT,isWritableStream:$Y,isWritableEnded:YY,isWritableFinished:xme,isWritableErrored:Ume,isServerRequest:Hme,isServerResponse:jY,willEmitClose:Gme,isTransformStream:kY}});var rs=C((HUe,EO)=>{"use strict";var Vs=je(),{AbortError:sV,codes:kme}=Mn(),{ERR_INVALID_ARG_TYPE:Yme,ERR_STREAM_PREMATURE_CLOSE:JY}=kme,{kEmptyObject:uO,once:dO}=Vn(),{validateAbortSignal:Vme,validateFunction:qme,validateObject:Xme,validateBoolean:zme}=Zl(),{Promise:jme,PromisePrototypeThen:Kme,SymbolDispose:oV}=Et(),{isClosed:Jme,isReadable:QY,isReadableNodeStream:cO,isReadableStream:Qme,isReadableFinished:ZY,isReadableErrored:eV,isWritable:tV,isWritableNodeStream:nV,isWritableStream:Zme,isWritableFinished:rV,isWritableErrored:iV,isNodeStream:ege,willEmitClose:tge,kIsClosedPromise:nge}=gi(),ec;function rge(t){return t.setHeader&&typeof t.abort=="function"}var fO=()=>{};function aV(t,e,n){var r,i;if(arguments.length===2?(n=e,e=uO):e==null?e=uO:Xme(e,"options"),qme(n,"callback"),Vme(e.signal,"options.signal"),n=dO(n),Qme(t)||Zme(t))return ige(t,e,n);if(!ege(t))throw new Yme("stream",["ReadableStream","WritableStream","Stream"],t);let s=(r=e.readable)!==null&&r!==void 0?r:cO(t),o=(i=e.writable)!==null&&i!==void 0?i:nV(t),a=t._writableState,l=t._readableState,c=()=>{t.writable||E()},u=tge(t)&&cO(t)===s&&nV(t)===o,d=rV(t,!1),E=()=>{d=!0,t.destroyed&&(u=!1),!(u&&(!t.readable||s))&&(!s||f)&&n.call(t)},f=ZY(t,!1),p=()=>{f=!0,t.destroyed&&(u=!1),!(u&&(!t.writable||o))&&(!o||d)&&n.call(t)},h=A=>{n.call(t,A)},T=Jme(t),S=()=>{T=!0;let A=iV(t)||eV(t);if(A&&typeof A!="boolean")return n.call(t,A);if(s&&!f&&cO(t,!0)&&!ZY(t,!1))return n.call(t,new JY);if(o&&!d&&!rV(t,!1))return n.call(t,new JY);n.call(t)},I=()=>{T=!0;let A=iV(t)||eV(t);if(A&&typeof A!="boolean")return n.call(t,A);n.call(t)},R=()=>{t.req.on("finish",E)};rge(t)?(t.on("complete",E),u||t.on("abort",S),t.req?R():t.on("request",R)):o&&!a&&(t.on("end",c),t.on("close",c)),!u&&typeof t.aborted=="boolean"&&t.on("aborted",S),t.on("end",p),t.on("finish",E),e.error!==!1&&t.on("error",h),t.on("close",S),T?Vs.nextTick(S):a!=null&&a.errorEmitted||l!=null&&l.errorEmitted?u||Vs.nextTick(I):(!s&&(!u||QY(t))&&(d||tV(t)===!1)||!o&&(!u||tV(t))&&(f||QY(t)===!1)||l&&t.req&&t.aborted)&&Vs.nextTick(I);let m=()=>{n=fO,t.removeListener("aborted",S),t.removeListener("complete",E),t.removeListener("abort",S),t.removeListener("request",R),t.req&&t.req.removeListener("finish",E),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",E),t.removeListener("end",p),t.removeListener("error",h),t.removeListener("close",S)};if(e.signal&&!T){let A=()=>{let N=n;m(),N.call(t,new sV(void 0,{cause:e.signal.reason}))};if(e.signal.aborted)Vs.nextTick(A);else{ec=ec||Vn().addAbortListener;let N=ec(e.signal,A),g=n;n=dO((...L)=>{N[oV](),g.apply(t,L)})}}return m}function ige(t,e,n){let r=!1,i=fO;if(e.signal)if(i=()=>{r=!0,n.call(t,new sV(void 0,{cause:e.signal.reason}))},e.signal.aborted)Vs.nextTick(i);else{ec=ec||Vn().addAbortListener;let o=ec(e.signal,i),a=n;n=dO((...l)=>{o[oV](),a.apply(t,l)})}let s=(...o)=>{r||Vs.nextTick(()=>n.apply(t,o))};return Kme(t[nge].promise,s,s),fO}function sge(t,e){var n;let r=!1;return e===null&&(e=uO),(n=e)!==null&&n!==void 0&&n.cleanup&&(zme(e.cleanup,"cleanup"),r=e.cleanup),new jme((i,s)=>{let o=aV(t,e,a=>{r&&o(),a?s(a):i()})})}EO.exports=aV;EO.exports.finished=sge});var sa=C((GUe,pV)=>{"use strict";var Ii=je(),{aggregateTwoErrors:oge,codes:{ERR_MULTIPLE_CALLBACK:age},AbortError:lge}=Mn(),{Symbol:uV}=Et(),{kIsDestroyed:cge,isDestroyed:uge,isFinished:dge,isServerRequest:fge}=gi(),dV=uV("kDestroy"),hO=uV("kConstruct");function fV(t,e,n){t&&(t.stack,e&&!e.errored&&(e.errored=t),n&&!n.errored&&(n.errored=t))}function Ege(t,e){let n=this._readableState,r=this._writableState,i=r||n;return r!=null&&r.destroyed||n!=null&&n.destroyed?(typeof e=="function"&&e(),this):(fV(t,r,n),r&&(r.destroyed=!0),n&&(n.destroyed=!0),i.constructed?lV(this,t,e):this.once(dV,function(s){lV(this,oge(s,t),e)}),this)}function lV(t,e,n){let r=!1;function i(s){if(r)return;r=!0;let o=t._readableState,a=t._writableState;fV(s,a,o),a&&(a.closed=!0),o&&(o.closed=!0),typeof n=="function"&&n(s),s?Ii.nextTick(hge,t,s):Ii.nextTick(EV,t)}try{t._destroy(e||null,i)}catch(s){i(s)}}function hge(t,e){pO(t,e),EV(t)}function EV(t){let e=t._readableState,n=t._writableState;n&&(n.closeEmitted=!0),e&&(e.closeEmitted=!0),(n!=null&&n.emitClose||e!=null&&e.emitClose)&&t.emit("close")}function pO(t,e){let n=t._readableState,r=t._writableState;r!=null&&r.errorEmitted||n!=null&&n.errorEmitted||(r&&(r.errorEmitted=!0),n&&(n.errorEmitted=!0),t.emit("error",e))}function pge(){let t=this._readableState,e=this._writableState;t&&(t.constructed=!0,t.closed=!1,t.closeEmitted=!1,t.destroyed=!1,t.errored=null,t.errorEmitted=!1,t.reading=!1,t.ended=t.readable===!1,t.endEmitted=t.readable===!1),e&&(e.constructed=!0,e.destroyed=!1,e.closed=!1,e.closeEmitted=!1,e.errored=null,e.errorEmitted=!1,e.finalCalled=!1,e.prefinished=!1,e.ended=e.writable===!1,e.ending=e.writable===!1,e.finished=e.writable===!1)}function TO(t,e,n){let r=t._readableState,i=t._writableState;if(i!=null&&i.destroyed||r!=null&&r.destroyed)return this;r!=null&&r.autoDestroy||i!=null&&i.autoDestroy?t.destroy(e):e&&(e.stack,i&&!i.errored&&(i.errored=e),r&&!r.errored&&(r.errored=e),n?Ii.nextTick(pO,t,e):pO(t,e))}function Tge(t,e){if(typeof t._construct!="function")return;let n=t._readableState,r=t._writableState;n&&(n.constructed=!1),r&&(r.constructed=!1),t.once(hO,e),!(t.listenerCount(hO)>1)&&Ii.nextTick(Sge,t)}function Sge(t){let e=!1;function n(r){if(e){TO(t,r??new age);return}e=!0;let i=t._readableState,s=t._writableState,o=s||i;i&&(i.constructed=!0),s&&(s.constructed=!0),o.destroyed?t.emit(dV,r):r?TO(t,r,!0):Ii.nextTick(Rge,t)}try{t._construct(r=>{Ii.nextTick(n,r)})}catch(r){Ii.nextTick(n,r)}}function Rge(t){t.emit(hO)}function cV(t){return t?.setHeader&&typeof t.abort=="function"}function hV(t){t.emit("close")}function Age(t,e){t.emit("error",e),Ii.nextTick(hV,t)}function mge(t,e){!t||uge(t)||(!e&&!dge(t)&&(e=new lge),fge(t)?(t.socket=null,t.destroy(e)):cV(t)?t.abort():cV(t.req)?t.req.abort():typeof t.destroy=="function"?t.destroy(e):typeof t.close=="function"?t.close():e?Ii.nextTick(Age,t,e):Ii.nextTick(hV,t),t.destroyed||(t[cge]=!0))}pV.exports={construct:Tge,destroyer:mge,destroy:Ege,undestroy:pge,errorOrDestroy:TO}});var PT=C((WUe,SV)=>{"use strict";var{ArrayIsArray:gge,ObjectSetPrototypeOf:TV}=Et(),{EventEmitter:LT}=require("events");function DT(t){LT.call(this,t)}TV(DT.prototype,LT.prototype);TV(DT,LT);DT.prototype.pipe=function(t,e){let n=this;function r(u){t.writable&&t.write(u)===!1&&n.pause&&n.pause()}n.on("data",r);function i(){n.readable&&n.resume&&n.resume()}t.on("drain",i),!t._isStdio&&(!e||e.end!==!1)&&(n.on("end",o),n.on("close",a));let s=!1;function o(){s||(s=!0,t.end())}function a(){s||(s=!0,typeof t.destroy=="function"&&t.destroy())}function l(u){c(),LT.listenerCount(this,"error")===0&&this.emit("error",u)}SO(n,"error",l),SO(t,"error",l);function c(){n.removeListener("data",r),t.removeListener("drain",i),n.removeListener("end",o),n.removeListener("close",a),n.removeListener("error",l),t.removeListener("error",l),n.removeListener("end",c),n.removeListener("close",c),t.removeListener("close",c)}return n.on("end",c),n.on("close",c),t.on("close",c),t.emit("pipe",n),t};function SO(t,e,n){if(typeof t.prependListener=="function")return t.prependListener(e,n);!t._events||!t._events[e]?t.on(e,n):gge(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]}SV.exports={Stream:DT,prependListener:SO}});var Dd=C(($Ue,xT)=>{"use strict";var{SymbolDispose:Ige}=Et(),{AbortError:RV,codes:_ge}=Mn(),{isNodeStream:AV,isWebStream:Nge,kControllerErrorFunction:Oge}=gi(),Cge=rs(),{ERR_INVALID_ARG_TYPE:mV}=_ge,RO,yge=(t,e)=>{if(typeof t!="object"||!("aborted"in t))throw new mV(e,"AbortSignal",t)};xT.exports.addAbortSignal=function(e,n){if(yge(e,"signal"),!AV(n)&&!Nge(n))throw new mV("stream",["ReadableStream","WritableStream","Stream"],n);return xT.exports.addAbortSignalNoValidate(e,n)};xT.exports.addAbortSignalNoValidate=function(t,e){if(typeof t!="object"||!("aborted"in t))return e;let n=AV(e)?()=>{e.destroy(new RV(void 0,{cause:t.reason}))}:()=>{e[Oge](new RV(void 0,{cause:t.reason}))};if(t.aborted)n();else{RO=RO||Vn().addAbortListener;let r=RO(t,n);Cge(e,r[Ige])}return e}});var _V=C((YUe,IV)=>{"use strict";var{StringPrototypeSlice:gV,SymbolIterator:bge,TypedArrayPrototypeSet:vT,Uint8Array:wge}=Et(),{Buffer:AO}=require("buffer"),{inspect:Lge}=Vn();IV.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){let n={data:e,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}unshift(e){let n={data:e,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}shift(){if(this.length===0)return;let e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return"";let n=this.head,r=""+n.data;for(;(n=n.next)!==null;)r+=e+n.data;return r}concat(e){if(this.length===0)return AO.alloc(0);let n=AO.allocUnsafe(e>>>0),r=this.head,i=0;for(;r;)vT(n,r.data,i),i+=r.data.length,r=r.next;return n}consume(e,n){let r=this.head.data;if(e<r.length){let i=r.slice(0,e);return this.head.data=r.slice(e),i}return e===r.length?this.shift():n?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[bge](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let n="",r=this.head,i=0;do{let s=r.data;if(e>s.length)n+=s,e-=s.length;else{e===s.length?(n+=s,++i,r.next?this.head=r.next:this.head=this.tail=null):(n+=gV(s,0,e),this.head=r,r.data=gV(s,e));break}++i}while((r=r.next)!==null);return this.length-=i,n}_getBuffer(e){let n=AO.allocUnsafe(e),r=e,i=this.head,s=0;do{let o=i.data;if(e>o.length)vT(n,o,r-e),e-=o.length;else{e===o.length?(vT(n,o,r-e),++s,i.next?this.head=i.next:this.head=this.tail=null):(vT(n,new wge(o.buffer,o.byteOffset,e),r-e),this.head=i,i.data=o.slice(e));break}++s}while((i=i.next)!==null);return this.length-=s,n}[Symbol.for("nodejs.util.inspect.custom")](e,n){return Lge(this,{...n,depth:0,customInspect:!1})}}});var Pd=C((VUe,yV)=>{"use strict";var{MathFloor:Dge,NumberIsInteger:Pge}=Et(),{validateInteger:xge}=Zl(),{ERR_INVALID_ARG_VALUE:vge}=Mn().codes,NV=16*1024,OV=16;function Mge(t,e,n){return t.highWaterMark!=null?t.highWaterMark:e?t[n]:null}function CV(t){return t?OV:NV}function Uge(t,e){xge(e,"value",0),t?OV=e:NV=e}function Bge(t,e,n,r){let i=Mge(e,r,n);if(i!=null){if(!Pge(i)||i<0){let s=r?`options.${n}`:"options.highWaterMark";throw new vge(s,i)}return Dge(i)}return CV(t.objectMode)}yV.exports={getHighWaterMark:Bge,getDefaultHighWaterMark:CV,setDefaultHighWaterMark:Uge}});var mO=C((qUe,DV)=>{"use strict";var bV=je(),{PromisePrototypeThen:Fge,SymbolAsyncIterator:wV,SymbolIterator:LV}=Et(),{Buffer:Hge}=require("buffer"),{ERR_INVALID_ARG_TYPE:Gge,ERR_STREAM_NULL_VALUES:Wge}=Mn().codes;function $ge(t,e,n){let r;if(typeof e=="string"||e instanceof Hge)return new t({objectMode:!0,...n,read(){this.push(e),this.push(null)}});let i;if(e&&e[wV])i=!0,r=e[wV]();else if(e&&e[LV])i=!1,r=e[LV]();else throw new Gge("iterable",["Iterable"],e);let s=new t({objectMode:!0,highWaterMark:1,...n}),o=!1;s._read=function(){o||(o=!0,l())},s._destroy=function(c,u){Fge(a(c),()=>bV.nextTick(u,c),d=>bV.nextTick(u,d||c))};async function a(c){let u=c!=null,d=typeof r.throw=="function";if(u&&d){let{value:E,done:f}=await r.throw(c);if(await E,f)return}if(typeof r.return=="function"){let{value:E}=await r.return();await E}}async function l(){for(;;){try{let{value:c,done:u}=i?await r.next():r.next();if(u)s.push(null);else{let d=c&&typeof c.then=="function"?await c:c;if(d===null)throw o=!1,new Wge;if(s.push(d))continue;o=!1}}catch(c){s.destroy(c)}break}}return s}DV.exports=$ge});var vd=C((XUe,jV)=>{"use strict";var Wr=je(),{ArrayPrototypeIndexOf:kge,NumberIsInteger:Yge,NumberIsNaN:Vge,NumberParseInt:qge,ObjectDefineProperties:bO,ObjectKeys:Xge,ObjectSetPrototypeOf:vV,Promise:MV,SafeSet:zge,SymbolAsyncDispose:jge,SymbolAsyncIterator:Kge,Symbol:Jge}=Et();jV.exports=_e;_e.ReadableState=FT;var{EventEmitter:Qge}=require("events"),{Stream:qs,prependListener:Zge}=PT(),{Buffer:gO}=require("buffer"),{addAbortSignal:eIe}=Dd(),UV=rs(),Fe=Vn().debuglog("stream",t=>{Fe=t}),tIe=_V(),rc=sa(),{getHighWaterMark:nIe,getDefaultHighWaterMark:rIe}=Pd(),{aggregateTwoErrors:PV,codes:{ERR_INVALID_ARG_TYPE:iIe,ERR_METHOD_NOT_IMPLEMENTED:sIe,ERR_OUT_OF_RANGE:oIe,ERR_STREAM_PUSH_AFTER_EOF:aIe,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:lIe},AbortError:cIe}=Mn(),{validateObject:uIe}=Zl(),oa=Jge("kPaused"),{StringDecoder:BV}=yu(),dIe=mO();vV(_e.prototype,qs.prototype);vV(_e,qs);var IO=()=>{},{errorOrDestroy:tc}=rc,nc=1,fIe=2,FV=4,xd=8,HV=16,MT=32,UT=64,GV=128,EIe=256,hIe=512,pIe=1024,CO=2048,yO=4096,TIe=8192,SIe=16384,RIe=32768,WV=65536,AIe=1<<17,mIe=1<<18;function qt(t){return{enumerable:!1,get(){return(this.state&t)!==0},set(e){e?this.state|=t:this.state&=~t}}}bO(FT.prototype,{objectMode:qt(nc),ended:qt(fIe),endEmitted:qt(FV),reading:qt(xd),constructed:qt(HV),sync:qt(MT),needReadable:qt(UT),emittedReadable:qt(GV),readableListening:qt(EIe),resumeScheduled:qt(hIe),errorEmitted:qt(pIe),emitClose:qt(CO),autoDestroy:qt(yO),destroyed:qt(TIe),closed:qt(SIe),closeEmitted:qt(RIe),multiAwaitDrain:qt(WV),readingMore:qt(AIe),dataEmitted:qt(mIe)});function FT(t,e,n){typeof n!="boolean"&&(n=e instanceof _i()),this.state=CO|yO|HV|MT,t&&t.objectMode&&(this.state|=nc),n&&t&&t.readableObjectMode&&(this.state|=nc),this.highWaterMark=t?nIe(this,t,"readableHighWaterMark",n):rIe(!1),this.buffer=new tIe,this.length=0,this.pipes=[],this.flowing=null,this[oa]=null,t&&t.emitClose===!1&&(this.state&=~CO),t&&t.autoDestroy===!1&&(this.state&=~yO),this.errored=null,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,t&&t.encoding&&(this.decoder=new BV(t.encoding),this.encoding=t.encoding)}function _e(t){if(!(this instanceof _e))return new _e(t);let e=this instanceof _i();this._readableState=new FT(t,this,e),t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&!e&&eIe(t.signal,this)),qs.call(this,t),rc.construct(this,()=>{this._readableState.needReadable&&BT(this,this._readableState)})}_e.prototype.destroy=rc.destroy;_e.prototype._undestroy=rc.undestroy;_e.prototype._destroy=function(t,e){e(t)};_e.prototype[Qge.captureRejectionSymbol]=function(t){this.destroy(t)};_e.prototype[jge]=function(){let t;return this.destroyed||(t=this.readableEnded?null:new cIe,this.destroy(t)),new MV((e,n)=>UV(this,r=>r&&r!==t?n(r):e(null)))};_e.prototype.push=function(t,e){return $V(this,t,e,!1)};_e.prototype.unshift=function(t,e){return $V(this,t,e,!0)};function $V(t,e,n,r){Fe("readableAddChunk",e);let i=t._readableState,s;if((i.state&nc)===0&&(typeof e=="string"?(n=n||i.defaultEncoding,i.encoding!==n&&(r&&i.encoding?e=gO.from(e,n).toString(i.encoding):(e=gO.from(e,n),n=""))):e instanceof gO?n="":qs._isUint8Array(e)?(e=qs._uint8ArrayToBuffer(e),n=""):e!=null&&(s=new iIe("chunk",["string","Buffer","Uint8Array"],e))),s)tc(t,s);else if(e===null)i.state&=~xd,_Ie(t,i);else if((i.state&nc)!==0||e&&e.length>0)if(r)if((i.state&FV)!==0)tc(t,new lIe);else{if(i.destroyed||i.errored)return!1;_O(t,i,e,!0)}else if(i.ended)tc(t,new aIe);else{if(i.destroyed||i.errored)return!1;i.state&=~xd,i.decoder&&!n?(e=i.decoder.write(e),i.objectMode||e.length!==0?_O(t,i,e,!1):BT(t,i)):_O(t,i,e,!1)}else r||(i.state&=~xd,BT(t,i));return!i.ended&&(i.length<i.highWaterMark||i.length===0)}function _O(t,e,n,r){e.flowing&&e.length===0&&!e.sync&&t.listenerCount("data")>0?((e.state&WV)!==0?e.awaitDrainWriters.clear():e.awaitDrainWriters=null,e.dataEmitted=!0,t.emit("data",n)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),(e.state&UT)!==0&&HT(t)),BT(t,e)}_e.prototype.isPaused=function(){let t=this._readableState;return t[oa]===!0||t.flowing===!1};_e.prototype.setEncoding=function(t){let e=new BV(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;let n=this._readableState.buffer,r="";for(let i of n)r+=e.write(i);return n.clear(),r!==""&&n.push(r),this._readableState.length=r.length,this};var gIe=1073741824;function IIe(t){if(t>gIe)throw new oIe("size","<= 1GiB",t);return t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++,t}function xV(t,e){return t<=0||e.length===0&&e.ended?0:(e.state&nc)!==0?1:Vge(t)?e.flowing&&e.length?e.buffer.first().length:e.length:t<=e.length?t:e.ended?e.length:0}_e.prototype.read=function(t){Fe("read",t),t===void 0?t=NaN:Yge(t)||(t=qge(t,10));let e=this._readableState,n=t;if(t>e.highWaterMark&&(e.highWaterMark=IIe(t)),t!==0&&(e.state&=~GV),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return Fe("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?NO(this):HT(this),null;if(t=xV(t,e),t===0&&e.ended)return e.length===0&&NO(this),null;let r=(e.state&UT)!==0;if(Fe("need readable",r),(e.length===0||e.length-t<e.highWaterMark)&&(r=!0,Fe("length less than watermark",r)),e.ended||e.reading||e.destroyed||e.errored||!e.constructed)r=!1,Fe("reading, ended or constructing",r);else if(r){Fe("do read"),e.state|=xd|MT,e.length===0&&(e.state|=UT);try{this._read(e.highWaterMark)}catch(s){tc(this,s)}e.state&=~MT,e.reading||(t=xV(n,e))}let i;return t>0?i=XV(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.multiAwaitDrain?e.awaitDrainWriters.clear():e.awaitDrainWriters=null),e.length===0&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&NO(this)),i!==null&&!e.errorEmitted&&!e.closeEmitted&&(e.dataEmitted=!0,this.emit("data",i)),i};function _Ie(t,e){if(Fe("onEofChunk"),!e.ended){if(e.decoder){let n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,e.sync?HT(t):(e.needReadable=!1,e.emittedReadable=!0,kV(t))}}function HT(t){let e=t._readableState;Fe("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(Fe("emitReadable",e.flowing),e.emittedReadable=!0,Wr.nextTick(kV,t))}function kV(t){let e=t._readableState;Fe("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&!e.errored&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,VV(t)}function BT(t,e){!e.readingMore&&e.constructed&&(e.readingMore=!0,Wr.nextTick(NIe,t,e))}function NIe(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){let n=e.length;if(Fe("maybeReadMore read 0"),t.read(0),n===e.length)break}e.readingMore=!1}_e.prototype._read=function(t){throw new sIe("_read()")};_e.prototype.pipe=function(t,e){let n=this,r=this._readableState;r.pipes.length===1&&(r.multiAwaitDrain||(r.multiAwaitDrain=!0,r.awaitDrainWriters=new zge(r.awaitDrainWriters?[r.awaitDrainWriters]:[]))),r.pipes.push(t),Fe("pipe count=%d opts=%j",r.pipes.length,e);let s=(!e||e.end!==!1)&&t!==Wr.stdout&&t!==Wr.stderr?a:T;r.endEmitted?Wr.nextTick(s):n.once("end",s),t.on("unpipe",o);function o(S,I){Fe("onunpipe"),S===n&&I&&I.hasUnpiped===!1&&(I.hasUnpiped=!0,u())}function a(){Fe("onend"),t.end()}let l,c=!1;function u(){Fe("cleanup"),t.removeListener("close",p),t.removeListener("finish",h),l&&t.removeListener("drain",l),t.removeListener("error",f),t.removeListener("unpipe",o),n.removeListener("end",a),n.removeListener("end",T),n.removeListener("data",E),c=!0,l&&r.awaitDrainWriters&&(!t._writableState||t._writableState.needDrain)&&l()}function d(){c||(r.pipes.length===1&&r.pipes[0]===t?(Fe("false write response, pause",0),r.awaitDrainWriters=t,r.multiAwaitDrain=!1):r.pipes.length>1&&r.pipes.includes(t)&&(Fe("false write response, pause",r.awaitDrainWriters.size),r.awaitDrainWriters.add(t)),n.pause()),l||(l=OIe(n,t),t.on("drain",l))}n.on("data",E);function E(S){Fe("ondata");let I=t.write(S);Fe("dest.write",I),I===!1&&d()}function f(S){if(Fe("onerror",S),T(),t.removeListener("error",f),t.listenerCount("error")===0){let I=t._writableState||t._readableState;I&&!I.errorEmitted?tc(t,S):t.emit("error",S)}}Zge(t,"error",f);function p(){t.removeListener("finish",h),T()}t.once("close",p);function h(){Fe("onfinish"),t.removeListener("close",p),T()}t.once("finish",h);function T(){Fe("unpipe"),n.unpipe(t)}return t.emit("pipe",n),t.writableNeedDrain===!0?d():r.flowing||(Fe("pipe resume"),n.resume()),t};function OIe(t,e){return function(){let r=t._readableState;r.awaitDrainWriters===e?(Fe("pipeOnDrain",1),r.awaitDrainWriters=null):r.multiAwaitDrain&&(Fe("pipeOnDrain",r.awaitDrainWriters.size),r.awaitDrainWriters.delete(e)),(!r.awaitDrainWriters||r.awaitDrainWriters.size===0)&&t.listenerCount("data")&&t.resume()}}_e.prototype.unpipe=function(t){let e=this._readableState,n={hasUnpiped:!1};if(e.pipes.length===0)return this;if(!t){let i=e.pipes;e.pipes=[],this.pause();for(let s=0;s<i.length;s++)i[s].emit("unpipe",this,{hasUnpiped:!1});return this}let r=kge(e.pipes,t);return r===-1?this:(e.pipes.splice(r,1),e.pipes.length===0&&this.pause(),t.emit("unpipe",this,n),this)};_e.prototype.on=function(t,e){let n=qs.prototype.on.call(this,t,e),r=this._readableState;return t==="data"?(r.readableListening=this.listenerCount("readable")>0,r.flowing!==!1&&this.resume()):t==="readable"&&!r.endEmitted&&!r.readableListening&&(r.readableListening=r.needReadable=!0,r.flowing=!1,r.emittedReadable=!1,Fe("on readable",r.length,r.reading),r.length?HT(this):r.reading||Wr.nextTick(CIe,this)),n};_e.prototype.addListener=_e.prototype.on;_e.prototype.removeListener=function(t,e){let n=qs.prototype.removeListener.call(this,t,e);return t==="readable"&&Wr.nextTick(YV,this),n};_e.prototype.off=_e.prototype.removeListener;_e.prototype.removeAllListeners=function(t){let e=qs.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&Wr.nextTick(YV,this),e};function YV(t){let e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&e[oa]===!1?e.flowing=!0:t.listenerCount("data")>0?t.resume():e.readableListening||(e.flowing=null)}function CIe(t){Fe("readable nexttick read 0"),t.read(0)}_e.prototype.resume=function(){let t=this._readableState;return t.flowing||(Fe("resume"),t.flowing=!t.readableListening,yIe(this,t)),t[oa]=!1,this};function yIe(t,e){e.resumeScheduled||(e.resumeScheduled=!0,Wr.nextTick(bIe,t,e))}function bIe(t,e){Fe("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),VV(t),e.flowing&&!e.reading&&t.read(0)}_e.prototype.pause=function(){return Fe("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Fe("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[oa]=!0,this};function VV(t){let e=t._readableState;for(Fe("flow",e.flowing);e.flowing&&t.read()!==null;);}_e.prototype.wrap=function(t){let e=!1;t.on("data",r=>{!this.push(r)&&t.pause&&(e=!0,t.pause())}),t.on("end",()=>{this.push(null)}),t.on("error",r=>{tc(this,r)}),t.on("close",()=>{this.destroy()}),t.on("destroy",()=>{this.destroy()}),this._read=()=>{e&&t.resume&&(e=!1,t.resume())};let n=Xge(t);for(let r=1;r<n.length;r++){let i=n[r];this[i]===void 0&&typeof t[i]=="function"&&(this[i]=t[i].bind(t))}return this};_e.prototype[Kge]=function(){return qV(this)};_e.prototype.iterator=function(t){return t!==void 0&&uIe(t,"options"),qV(this,t)};function qV(t,e){typeof t.read!="function"&&(t=_e.wrap(t,{objectMode:!0}));let n=wIe(t,e);return n.stream=t,n}async function*wIe(t,e){let n=IO;function r(o){this===t?(n(),n=IO):n=o}t.on("readable",r);let i,s=UV(t,{writable:!1},o=>{i=o?PV(i,o):null,n(),n=IO});try{for(;;){let o=t.destroyed?null:t.read();if(o!==null)yield o;else{if(i)throw i;if(i===null)return;await new MV(r)}}}catch(o){throw i=PV(i,o),i}finally{(i||e?.destroyOnReturn!==!1)&&(i===void 0||t._readableState.autoDestroy)?rc.destroyer(t,null):(t.off("readable",r),s())}}bO(_e.prototype,{readable:{__proto__:null,get(){let t=this._readableState;return!!t&&t.readable!==!1&&!t.destroyed&&!t.errorEmitted&&!t.endEmitted},set(t){this._readableState&&(this._readableState.readable=!!t)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(t){this._readableState&&(this._readableState.destroyed=t)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}});bO(FT.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[oa]!==!1},set(t){this[oa]=!!t}}});_e._fromList=XV;function XV(t,e){if(e.length===0)return null;let n;return e.objectMode?n=e.buffer.shift():!t||t>=e.length?(e.decoder?n=e.buffer.join(""):e.buffer.length===1?n=e.buffer.first():n=e.buffer.concat(e.length),e.buffer.clear()):n=e.buffer.consume(t,e.decoder),n}function NO(t){let e=t._readableState;Fe("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,Wr.nextTick(LIe,e,t))}function LIe(t,e){if(Fe("endReadableNT",t.endEmitted,t.length),!t.errored&&!t.closeEmitted&&!t.endEmitted&&t.length===0){if(t.endEmitted=!0,e.emit("end"),e.writable&&e.allowHalfOpen===!1)Wr.nextTick(DIe,e);else if(t.autoDestroy){let n=e._writableState;(!n||n.autoDestroy&&(n.finished||n.writable===!1))&&e.destroy()}}}function DIe(t){t.writable&&!t.writableEnded&&!t.destroyed&&t.end()}_e.from=function(t,e){return dIe(_e,t,e)};var OO;function zV(){return OO===void 0&&(OO={}),OO}_e.fromWeb=function(t,e){return zV().newStreamReadableFromReadableStream(t,e)};_e.toWeb=function(t,e){return zV().newReadableStreamFromStreamReadable(t,e)};_e.wrap=function(t,e){var n,r;return new _e({objectMode:(n=(r=t.readableObjectMode)!==null&&r!==void 0?r:t.objectMode)!==null&&n!==void 0?n:!0,...e,destroy(i,s){rc.destroyer(t,i),s(i)}}).wrap(t)}});var YT=C((zUe,a2)=>{"use strict";var aa=je(),{ArrayPrototypeSlice:QV,Error:PIe,FunctionPrototypeSymbolHasInstance:ZV,ObjectDefineProperty:e2,ObjectDefineProperties:xIe,ObjectSetPrototypeOf:t2,StringPrototypeToLowerCase:vIe,Symbol:MIe,SymbolHasInstance:UIe}=Et();a2.exports=At;At.WritableState=Bd;var{EventEmitter:BIe}=require("events"),Md=PT().Stream,{Buffer:GT}=require("buffer"),kT=sa(),{addAbortSignal:FIe}=Dd(),{getHighWaterMark:HIe,getDefaultHighWaterMark:GIe}=Pd(),{ERR_INVALID_ARG_TYPE:WIe,ERR_METHOD_NOT_IMPLEMENTED:$Ie,ERR_MULTIPLE_CALLBACK:n2,ERR_STREAM_CANNOT_PIPE:kIe,ERR_STREAM_DESTROYED:Ud,ERR_STREAM_ALREADY_FINISHED:YIe,ERR_STREAM_NULL_VALUES:VIe,ERR_STREAM_WRITE_AFTER_END:qIe,ERR_UNKNOWN_ENCODING:r2}=Mn().codes,{errorOrDestroy:ic}=kT;t2(At.prototype,Md.prototype);t2(At,Md);function DO(){}var sc=MIe("kOnFinished");function Bd(t,e,n){typeof n!="boolean"&&(n=e instanceof _i()),this.objectMode=!!(t&&t.objectMode),n&&(this.objectMode=this.objectMode||!!(t&&t.writableObjectMode)),this.highWaterMark=t?HIe(this,t,"writableHighWaterMark",n):GIe(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let r=!!(t&&t.decodeStrings===!1);this.decodeStrings=!r,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=zIe.bind(void 0,e),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,$T(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!t||t.emitClose!==!1,this.autoDestroy=!t||t.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[sc]=[]}function $T(t){t.buffered=[],t.bufferedIndex=0,t.allBuffers=!0,t.allNoop=!0}Bd.prototype.getBuffer=function(){return QV(this.buffered,this.bufferedIndex)};e2(Bd.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function At(t){let e=this instanceof _i();if(!e&&!ZV(At,this))return new At(t);this._writableState=new Bd(t,this,e),t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&FIe(t.signal,this)),Md.call(this,t),kT.construct(this,()=>{let n=this._writableState;n.writing||xO(this,n),vO(this,n)})}e2(At,UIe,{__proto__:null,value:function(t){return ZV(this,t)?!0:this!==At?!1:t&&t._writableState instanceof Bd}});At.prototype.pipe=function(){ic(this,new kIe)};function i2(t,e,n,r){let i=t._writableState;if(typeof n=="function")r=n,n=i.defaultEncoding;else{if(!n)n=i.defaultEncoding;else if(n!=="buffer"&&!GT.isEncoding(n))throw new r2(n);typeof r!="function"&&(r=DO)}if(e===null)throw new VIe;if(!i.objectMode)if(typeof e=="string")i.decodeStrings!==!1&&(e=GT.from(e,n),n="buffer");else if(e instanceof GT)n="buffer";else if(Md._isUint8Array(e))e=Md._uint8ArrayToBuffer(e),n="buffer";else throw new WIe("chunk",["string","Buffer","Uint8Array"],e);let s;return i.ending?s=new qIe:i.destroyed&&(s=new Ud("write")),s?(aa.nextTick(r,s),ic(t,s,!0),s):(i.pendingcb++,XIe(t,i,e,n,r))}At.prototype.write=function(t,e,n){return i2(this,t,e,n)===!0};At.prototype.cork=function(){this._writableState.corked++};At.prototype.uncork=function(){let t=this._writableState;t.corked&&(t.corked--,t.writing||xO(this,t))};At.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=vIe(e)),!GT.isEncoding(e))throw new r2(e);return this._writableState.defaultEncoding=e,this};function XIe(t,e,n,r,i){let s=e.objectMode?1:n.length;e.length+=s;let o=e.length<e.highWaterMark;return o||(e.needDrain=!0),e.writing||e.corked||e.errored||!e.constructed?(e.buffered.push({chunk:n,encoding:r,callback:i}),e.allBuffers&&r!=="buffer"&&(e.allBuffers=!1),e.allNoop&&i!==DO&&(e.allNoop=!1)):(e.writelen=s,e.writecb=i,e.writing=!0,e.sync=!0,t._write(n,r,e.onwrite),e.sync=!1),o&&!e.errored&&!e.destroyed}function KV(t,e,n,r,i,s,o){e.writelen=r,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new Ud("write")):n?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function JV(t,e,n,r){--e.pendingcb,r(n),PO(e),ic(t,n)}function zIe(t,e){let n=t._writableState,r=n.sync,i=n.writecb;if(typeof i!="function"){ic(t,new n2);return}n.writing=!1,n.writecb=null,n.length-=n.writelen,n.writelen=0,e?(e.stack,n.errored||(n.errored=e),t._readableState&&!t._readableState.errored&&(t._readableState.errored=e),r?aa.nextTick(JV,t,n,e,i):JV(t,n,e,i)):(n.buffered.length>n.bufferedIndex&&xO(t,n),r?n.afterWriteTickInfo!==null&&n.afterWriteTickInfo.cb===i?n.afterWriteTickInfo.count++:(n.afterWriteTickInfo={count:1,cb:i,stream:t,state:n},aa.nextTick(jIe,n.afterWriteTickInfo)):s2(t,n,1,i))}function jIe({stream:t,state:e,count:n,cb:r}){return e.afterWriteTickInfo=null,s2(t,e,n,r)}function s2(t,e,n,r){for(!e.ending&&!t.destroyed&&e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"));n-- >0;)e.pendingcb--,r();e.destroyed&&PO(e),vO(t,e)}function PO(t){if(t.writing)return;for(let i=t.bufferedIndex;i<t.buffered.length;++i){var e;let{chunk:s,callback:o}=t.buffered[i],a=t.objectMode?1:s.length;t.length-=a,o((e=t.errored)!==null&&e!==void 0?e:new Ud("write"))}let n=t[sc].splice(0);for(let i=0;i<n.length;i++){var r;n[i]((r=t.errored)!==null&&r!==void 0?r:new Ud("end"))}$T(t)}function xO(t,e){if(e.corked||e.bufferProcessing||e.destroyed||!e.constructed)return;let{buffered:n,bufferedIndex:r,objectMode:i}=e,s=n.length-r;if(!s)return;let o=r;if(e.bufferProcessing=!0,s>1&&t._writev){e.pendingcb-=s-1;let a=e.allNoop?DO:c=>{for(let u=o;u<n.length;++u)n[u].callback(c)},l=e.allNoop&&o===0?n:QV(n,o);l.allBuffers=e.allBuffers,KV(t,e,!0,e.length,l,"",a),$T(e)}else{do{let{chunk:a,encoding:l,callback:c}=n[o];n[o++]=null;let u=i?1:a.length;KV(t,e,!1,u,a,l,c)}while(o<n.length&&!e.writing);o===n.length?$T(e):o>256?(n.splice(0,o),e.bufferedIndex=0):e.bufferedIndex=o}e.bufferProcessing=!1}At.prototype._write=function(t,e,n){if(this._writev)this._writev([{chunk:t,encoding:e}],n);else throw new $Ie("_write()")};At.prototype._writev=null;At.prototype.end=function(t,e,n){let r=this._writableState;typeof t=="function"?(n=t,t=null,e=null):typeof e=="function"&&(n=e,e=null);let i;if(t!=null){let s=i2(this,t,e);s instanceof PIe&&(i=s)}return r.corked&&(r.corked=1,this.uncork()),i||(!r.errored&&!r.ending?(r.ending=!0,vO(this,r,!0),r.ended=!0):r.finished?i=new YIe("end"):r.destroyed&&(i=new Ud("end"))),typeof n=="function"&&(i||r.finished?aa.nextTick(n,i):r[sc].push(n)),this};function WT(t){return t.ending&&!t.destroyed&&t.constructed&&t.length===0&&!t.errored&&t.buffered.length===0&&!t.finished&&!t.writing&&!t.errorEmitted&&!t.closeEmitted}function KIe(t,e){let n=!1;function r(i){if(n){ic(t,i??n2());return}if(n=!0,e.pendingcb--,i){let s=e[sc].splice(0);for(let o=0;o<s.length;o++)s[o](i);ic(t,i,e.sync)}else WT(e)&&(e.prefinished=!0,t.emit("prefinish"),e.pendingcb++,aa.nextTick(LO,t,e))}e.sync=!0,e.pendingcb++;try{t._final(r)}catch(i){r(i)}e.sync=!1}function JIe(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.finalCalled=!0,KIe(t,e)):(e.prefinished=!0,t.emit("prefinish")))}function vO(t,e,n){WT(e)&&(JIe(t,e),e.pendingcb===0&&(n?(e.pendingcb++,aa.nextTick((r,i)=>{WT(i)?LO(r,i):i.pendingcb--},t,e)):WT(e)&&(e.pendingcb++,LO(t,e))))}function LO(t,e){e.pendingcb--,e.finished=!0;let n=e[sc].splice(0);for(let r=0;r<n.length;r++)n[r]();if(t.emit("finish"),e.autoDestroy){let r=t._readableState;(!r||r.autoDestroy&&(r.endEmitted||r.readable===!1))&&t.destroy()}}xIe(At.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(t){this._writableState&&(this._writableState.destroyed=t)}},writable:{__proto__:null,get(){let t=this._writableState;return!!t&&t.writable!==!1&&!t.destroyed&&!t.errored&&!t.ending&&!t.ended},set(t){this._writableState&&(this._writableState.writable=!!t)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let t=this._writableState;return t?!t.destroyed&&!t.ending&&t.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var QIe=kT.destroy;At.prototype.destroy=function(t,e){let n=this._writableState;return!n.destroyed&&(n.bufferedIndex<n.buffered.length||n[sc].length)&&aa.nextTick(PO,n),QIe.call(this,t,e),this};At.prototype._undestroy=kT.undestroy;At.prototype._destroy=function(t,e){e(t)};At.prototype[BIe.captureRejectionSymbol]=function(t){this.destroy(t)};var wO;function o2(){return wO===void 0&&(wO={}),wO}At.fromWeb=function(t,e){return o2().newStreamWritableFromWritableStream(t,e)};At.toWeb=function(t){return o2().newWritableStreamFromStreamWritable(t)}});var I2=C((jUe,g2)=>{var MO=je(),ZIe=require("buffer"),{isReadable:e_e,isWritable:t_e,isIterable:l2,isNodeStream:n_e,isReadableNodeStream:c2,isWritableNodeStream:u2,isDuplexNodeStream:r_e,isReadableStream:d2,isWritableStream:f2}=gi(),E2=rs(),{AbortError:A2,codes:{ERR_INVALID_ARG_TYPE:i_e,ERR_INVALID_RETURN_VALUE:h2}}=Mn(),{destroyer:ac}=sa(),s_e=_i(),m2=vd(),o_e=YT(),{createDeferredPromise:p2}=Vn(),T2=mO(),S2=globalThis.Blob||ZIe.Blob,a_e=typeof S2<"u"?function(e){return e instanceof S2}:function(e){return!1},l_e=globalThis.AbortController||Lt().AbortController,{FunctionPrototypeCall:R2}=Et(),Xs=class extends s_e{constructor(e){super(e),e?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),e?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};g2.exports=function t(e,n){if(r_e(e))return e;if(c2(e))return oc({readable:e});if(u2(e))return oc({writable:e});if(n_e(e))return oc({writable:!1,readable:!1});if(d2(e))return oc({readable:m2.fromWeb(e)});if(f2(e))return oc({writable:o_e.fromWeb(e)});if(typeof e=="function"){let{value:i,write:s,final:o,destroy:a}=c_e(e);if(l2(i))return T2(Xs,i,{objectMode:!0,write:s,final:o,destroy:a});let l=i?.then;if(typeof l=="function"){let c,u=R2(l,i,d=>{if(d!=null)throw new h2("nully","body",d)},d=>{ac(c,d)});return c=new Xs({objectMode:!0,readable:!1,write:s,final(d){o(async()=>{try{await u,MO.nextTick(d,null)}catch(E){MO.nextTick(d,E)}})},destroy:a})}throw new h2("Iterable, AsyncIterable or AsyncFunction",n,i)}if(a_e(e))return t(e.arrayBuffer());if(l2(e))return T2(Xs,e,{objectMode:!0,writable:!1});if(d2(e?.readable)&&f2(e?.writable))return Xs.fromWeb(e);if(typeof e?.writable=="object"||typeof e?.readable=="object"){let i=e!=null&&e.readable?c2(e?.readable)?e?.readable:t(e.readable):void 0,s=e!=null&&e.writable?u2(e?.writable)?e?.writable:t(e.writable):void 0;return oc({readable:i,writable:s})}let r=e?.then;if(typeof r=="function"){let i;return R2(r,e,s=>{s!=null&&i.push(s),i.push(null)},s=>{ac(i,s)}),i=new Xs({objectMode:!0,writable:!1,read(){}})}throw new i_e(n,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],e)};function c_e(t){let{promise:e,resolve:n}=p2(),r=new l_e,i=r.signal;return{value:t((async function*(){for(;;){let o=e;e=null;let{chunk:a,done:l,cb:c}=await o;if(MO.nextTick(c),l)return;if(i.aborted)throw new A2(void 0,{cause:i.reason});({promise:e,resolve:n}=p2()),yield a}})(),{signal:i}),write(o,a,l){let c=n;n=null,c({chunk:o,done:!1,cb:l})},final(o){let a=n;n=null,a({done:!0,cb:o})},destroy(o,a){r.abort(),a(o)}}}function oc(t){let e=t.readable&&typeof t.readable.read!="function"?m2.wrap(t.readable):t.readable,n=t.writable,r=!!e_e(e),i=!!t_e(n),s,o,a,l,c;function u(d){let E=l;l=null,E?E(d):d&&c.destroy(d)}return c=new Xs({readableObjectMode:!!(e!=null&&e.readableObjectMode),writableObjectMode:!!(n!=null&&n.writableObjectMode),readable:r,writable:i}),i&&(E2(n,d=>{i=!1,d&&ac(e,d),u(d)}),c._write=function(d,E,f){n.write(d,E)?f():s=f},c._final=function(d){n.end(),o=d},n.on("drain",function(){if(s){let d=s;s=null,d()}}),n.on("finish",function(){if(o){let d=o;o=null,d()}})),r&&(E2(e,d=>{r=!1,d&&ac(e,d),u(d)}),e.on("readable",function(){if(a){let d=a;a=null,d()}}),e.on("end",function(){c.push(null)}),c._read=function(){for(;;){let d=e.read();if(d===null){a=c._read;return}if(!c.push(d))return}}),c._destroy=function(d,E){!d&&l!==null&&(d=new A2),a=null,s=null,o=null,l===null?E(d):(l=E,ac(n,d),ac(e,d))},c}});var _i=C((KUe,O2)=>{"use strict";var{ObjectDefineProperties:u_e,ObjectGetOwnPropertyDescriptor:is,ObjectKeys:d_e,ObjectSetPrototypeOf:_2}=Et();O2.exports=$r;var FO=vd(),Or=YT();_2($r.prototype,FO.prototype);_2($r,FO);{let t=d_e(Or.prototype);for(let e=0;e<t.length;e++){let n=t[e];$r.prototype[n]||($r.prototype[n]=Or.prototype[n])}}function $r(t){if(!(this instanceof $r))return new $r(t);FO.call(this,t),Or.call(this,t),t?(this.allowHalfOpen=t.allowHalfOpen!==!1,t.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),t.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}u_e($r.prototype,{writable:{__proto__:null,...is(Or.prototype,"writable")},writableHighWaterMark:{__proto__:null,...is(Or.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...is(Or.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...is(Or.prototype,"writableBuffer")},writableLength:{__proto__:null,...is(Or.prototype,"writableLength")},writableFinished:{__proto__:null,...is(Or.prototype,"writableFinished")},writableCorked:{__proto__:null,...is(Or.prototype,"writableCorked")},writableEnded:{__proto__:null,...is(Or.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...is(Or.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(t){this._readableState&&this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}});var UO;function N2(){return UO===void 0&&(UO={}),UO}$r.fromWeb=function(t,e){return N2().newStreamDuplexFromReadableWritablePair(t,e)};$r.toWeb=function(t){return N2().newReadableWritablePairFromDuplex(t)};var BO;$r.from=function(t){return BO||(BO=I2()),BO(t,"body")}});var WO=C((JUe,y2)=>{"use strict";var{ObjectSetPrototypeOf:C2,Symbol:f_e}=Et();y2.exports=ss;var{ERR_METHOD_NOT_IMPLEMENTED:E_e}=Mn().codes,GO=_i(),{getHighWaterMark:h_e}=Pd();C2(ss.prototype,GO.prototype);C2(ss,GO);var Fd=f_e("kCallback");function ss(t){if(!(this instanceof ss))return new ss(t);let e=t?h_e(this,t,"readableHighWaterMark",!0):null;e===0&&(t={...t,highWaterMark:null,readableHighWaterMark:e,writableHighWaterMark:t.writableHighWaterMark||0}),GO.call(this,t),this._readableState.sync=!1,this[Fd]=null,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",p_e)}function HO(t){typeof this._flush=="function"&&!this.destroyed?this._flush((e,n)=>{if(e){t?t(e):this.destroy(e);return}n!=null&&this.push(n),this.push(null),t&&t()}):(this.push(null),t&&t())}function p_e(){this._final!==HO&&HO.call(this)}ss.prototype._final=HO;ss.prototype._transform=function(t,e,n){throw new E_e("_transform()")};ss.prototype._write=function(t,e,n){let r=this._readableState,i=this._writableState,s=r.length;this._transform(t,e,(o,a)=>{if(o){n(o);return}a!=null&&this.push(a),i.ended||s===r.length||r.length<r.highWaterMark?n():this[Fd]=n})};ss.prototype._read=function(){if(this[Fd]){let t=this[Fd];this[Fd]=null,t()}}});var kO=C((QUe,w2)=>{"use strict";var{ObjectSetPrototypeOf:b2}=Et();w2.exports=lc;var $O=WO();b2(lc.prototype,$O.prototype);b2(lc,$O);function lc(t){if(!(this instanceof lc))return new lc(t);$O.call(this,t)}lc.prototype._transform=function(t,e,n){n(null,t)}});var zT=C((ZUe,v2)=>{var Hd=je(),{ArrayIsArray:T_e,Promise:S_e,SymbolAsyncIterator:R_e,SymbolDispose:A_e}=Et(),XT=rs(),{once:m_e}=Vn(),g_e=sa(),L2=_i(),{aggregateTwoErrors:I_e,codes:{ERR_INVALID_ARG_TYPE:QO,ERR_INVALID_RETURN_VALUE:YO,ERR_MISSING_ARGS:__e,ERR_STREAM_DESTROYED:N_e,ERR_STREAM_PREMATURE_CLOSE:O_e},AbortError:C_e}=Mn(),{validateFunction:y_e,validateAbortSignal:b_e}=Zl(),{isIterable:la,isReadable:VO,isReadableNodeStream:qT,isNodeStream:D2,isTransformStream:cc,isWebStream:w_e,isReadableStream:qO,isReadableFinished:L_e}=gi(),D_e=globalThis.AbortController||Lt().AbortController,XO,zO,jO;function P2(t,e,n){let r=!1;t.on("close",()=>{r=!0});let i=XT(t,{readable:e,writable:n},s=>{r=!s});return{destroy:s=>{r||(r=!0,g_e.destroyer(t,s||new N_e("pipe")))},cleanup:i}}function P_e(t){return y_e(t[t.length-1],"streams[stream.length - 1]"),t.pop()}function KO(t){if(la(t))return t;if(qT(t))return x_e(t);throw new QO("val",["Readable","Iterable","AsyncIterable"],t)}async function*x_e(t){zO||(zO=vd()),yield*zO.prototype[R_e].call(t)}async function VT(t,e,n,{end:r}){let i,s=null,o=c=>{if(c&&(i=c),s){let u=s;s=null,u()}},a=()=>new S_e((c,u)=>{i?u(i):s=()=>{i?u(i):c()}});e.on("drain",o);let l=XT(e,{readable:!1},o);try{e.writableNeedDrain&&await a();for await(let c of t)e.write(c)||await a();r&&(e.end(),await a()),n()}catch(c){n(i!==c?I_e(i,c):c)}finally{l(),e.off("drain",o)}}async function JO(t,e,n,{end:r}){cc(e)&&(e=e.writable);let i=e.getWriter();try{for await(let s of t)await i.ready,i.write(s).catch(()=>{});await i.ready,r&&await i.close(),n()}catch(s){try{await i.abort(s),n(s)}catch(o){n(o)}}}function v_e(...t){return x2(t,m_e(P_e(t)))}function x2(t,e,n){if(t.length===1&&T_e(t[0])&&(t=t[0]),t.length<2)throw new __e("streams");let r=new D_e,i=r.signal,s=n?.signal,o=[];b_e(s,"options.signal");function a(){p(new C_e)}jO=jO||Vn().addAbortListener;let l;s&&(l=jO(s,a));let c,u,d=[],E=0;function f(R){p(R,--E===0)}function p(R,m){var A;if(R&&(!c||c.code==="ERR_STREAM_PREMATURE_CLOSE")&&(c=R),!(!c&&!m)){for(;d.length;)d.shift()(c);(A=l)===null||A===void 0||A[A_e](),r.abort(),m&&(c||o.forEach(N=>N()),Hd.nextTick(e,c,u))}}let h;for(let R=0;R<t.length;R++){let m=t[R],A=R<t.length-1,N=R>0,g=A||n?.end!==!1,L=R===t.length-1;if(D2(m)){let y=function(D){D&&D.name!=="AbortError"&&D.code!=="ERR_STREAM_PREMATURE_CLOSE"&&f(D)};var I=y;if(g){let{destroy:D,cleanup:x}=P2(m,A,N);d.push(D),VO(m)&&L&&o.push(x)}m.on("error",y),VO(m)&&L&&o.push(()=>{m.removeListener("error",y)})}if(R===0)if(typeof m=="function"){if(h=m({signal:i}),!la(h))throw new YO("Iterable, AsyncIterable or Stream","source",h)}else la(m)||qT(m)||cc(m)?h=m:h=L2.from(m);else if(typeof m=="function"){if(cc(h)){var T;h=KO((T=h)===null||T===void 0?void 0:T.readable)}else h=KO(h);if(h=m(h,{signal:i}),A){if(!la(h,!0))throw new YO("AsyncIterable",`transform[${R-1}]`,h)}else{var S;XO||(XO=kO());let y=new XO({objectMode:!0}),D=(S=h)===null||S===void 0?void 0:S.then;if(typeof D=="function")E++,D.call(h,H=>{u=H,H!=null&&y.write(H),g&&y.end(),Hd.nextTick(f)},H=>{y.destroy(H),Hd.nextTick(f,H)});else if(la(h,!0))E++,VT(h,y,f,{end:g});else if(qO(h)||cc(h)){let H=h.readable||h;E++,VT(H,y,f,{end:g})}else throw new YO("AsyncIterable or Promise","destination",h);h=y;let{destroy:x,cleanup:B}=P2(h,!1,!0);d.push(x),L&&o.push(B)}}else if(D2(m)){if(qT(h)){E+=2;let y=M_e(h,m,f,{end:g});VO(m)&&L&&o.push(y)}else if(cc(h)||qO(h)){let y=h.readable||h;E++,VT(y,m,f,{end:g})}else if(la(h))E++,VT(h,m,f,{end:g});else throw new QO("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],h);h=m}else if(w_e(m)){if(qT(h))E++,JO(KO(h),m,f,{end:g});else if(qO(h)||la(h))E++,JO(h,m,f,{end:g});else if(cc(h))E++,JO(h.readable,m,f,{end:g});else throw new QO("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],h);h=m}else h=L2.from(m)}return(i!=null&&i.aborted||s!=null&&s.aborted)&&Hd.nextTick(a),h}function M_e(t,e,n,{end:r}){let i=!1;if(e.on("close",()=>{i||n(new O_e)}),t.pipe(e,{end:!1}),r){let o=function(){i=!0,e.end()};var s=o;L_e(t)?Hd.nextTick(o):t.once("end",o)}else n();return XT(t,{readable:!0,writable:!1},o=>{let a=t._readableState;o&&o.code==="ERR_STREAM_PREMATURE_CLOSE"&&a&&a.ended&&!a.errored&&!a.errorEmitted?t.once("end",n).once("error",n):n(o)}),XT(e,{readable:!1,writable:!0},n)}v2.exports={pipelineImpl:x2,pipeline:v_e}});var eC=C((eBe,G2)=>{"use strict";var{pipeline:U_e}=zT(),jT=_i(),{destroyer:B_e}=sa(),{isNodeStream:KT,isReadable:M2,isWritable:U2,isWebStream:ZO,isTransformStream:ca,isWritableStream:B2,isReadableStream:F2}=gi(),{AbortError:F_e,codes:{ERR_INVALID_ARG_VALUE:H2,ERR_MISSING_ARGS:H_e}}=Mn(),G_e=rs();G2.exports=function(...e){if(e.length===0)throw new H_e("streams");if(e.length===1)return jT.from(e[0]);let n=[...e];if(typeof e[0]=="function"&&(e[0]=jT.from(e[0])),typeof e[e.length-1]=="function"){let f=e.length-1;e[f]=jT.from(e[f])}for(let f=0;f<e.length;++f)if(!(!KT(e[f])&&!ZO(e[f]))){if(f<e.length-1&&!(M2(e[f])||F2(e[f])||ca(e[f])))throw new H2(`streams[${f}]`,n[f],"must be readable");if(f>0&&!(U2(e[f])||B2(e[f])||ca(e[f])))throw new H2(`streams[${f}]`,n[f],"must be writable")}let r,i,s,o,a;function l(f){let p=o;o=null,p?p(f):f?a.destroy(f):!E&&!d&&a.destroy()}let c=e[0],u=U_e(e,l),d=!!(U2(c)||B2(c)||ca(c)),E=!!(M2(u)||F2(u)||ca(u));if(a=new jT({writableObjectMode:!!(c!=null&&c.writableObjectMode),readableObjectMode:!!(u!=null&&u.readableObjectMode),writable:d,readable:E}),d){if(KT(c))a._write=function(p,h,T){c.write(p,h)?T():r=T},a._final=function(p){c.end(),i=p},c.on("drain",function(){if(r){let p=r;r=null,p()}});else if(ZO(c)){let h=(ca(c)?c.writable:c).getWriter();a._write=async function(T,S,I){try{await h.ready,h.write(T).catch(()=>{}),I()}catch(R){I(R)}},a._final=async function(T){try{await h.ready,h.close().catch(()=>{}),i=T}catch(S){T(S)}}}let f=ca(u)?u.readable:u;G_e(f,()=>{if(i){let p=i;i=null,p()}})}if(E){if(KT(u))u.on("readable",function(){if(s){let f=s;s=null,f()}}),u.on("end",function(){a.push(null)}),a._read=function(){for(;;){let f=u.read();if(f===null){s=a._read;return}if(!a.push(f))return}};else if(ZO(u)){let p=(ca(u)?u.readable:u).getReader();a._read=async function(){for(;;)try{let{value:h,done:T}=await p.read();if(!a.push(h))return;if(T){a.push(null);return}}catch{return}}}}return a._destroy=function(f,p){!f&&o!==null&&(f=new F_e),s=null,r=null,i=null,o===null?p(f):(o=p,KT(u)&&B_e(u,f))},a}});var K2=C((tBe,rC)=>{"use strict";var W_e=globalThis.AbortController||Lt().AbortController,{codes:{ERR_INVALID_ARG_VALUE:$_e,ERR_INVALID_ARG_TYPE:Gd,ERR_MISSING_ARGS:k_e,ERR_OUT_OF_RANGE:Y_e},AbortError:Ni}=Mn(),{validateAbortSignal:ua,validateInteger:W2,validateObject:da}=Zl(),V_e=Et().Symbol("kWeak"),q_e=Et().Symbol("kResistStopPropagation"),{finished:X_e}=rs(),z_e=eC(),{addAbortSignalNoValidate:j_e}=Dd(),{isWritable:K_e,isNodeStream:J_e}=gi(),{deprecate:Q_e}=Vn(),{ArrayPrototypePush:Z_e,Boolean:eNe,MathFloor:$2,Number:tNe,NumberIsNaN:nNe,Promise:k2,PromiseReject:Y2,PromiseResolve:rNe,PromisePrototypeThen:V2,Symbol:X2}=Et(),JT=X2("kEmpty"),q2=X2("kEof");function iNe(t,e){if(e!=null&&da(e,"options"),e?.signal!=null&&ua(e.signal,"options.signal"),J_e(t)&&!K_e(t))throw new $_e("stream",t,"must be writable");let n=z_e(this,t);return e!=null&&e.signal&&j_e(e.signal,n),n}function QT(t,e){if(typeof t!="function")throw new Gd("fn",["Function","AsyncFunction"],t);e!=null&&da(e,"options"),e?.signal!=null&&ua(e.signal,"options.signal");let n=1;e?.concurrency!=null&&(n=$2(e.concurrency));let r=n-1;return e?.highWaterMark!=null&&(r=$2(e.highWaterMark)),W2(n,"options.concurrency",1),W2(r,"options.highWaterMark",0),r+=n,async function*(){let s=Vn().AbortSignalAny([e?.signal].filter(eNe)),o=this,a=[],l={signal:s},c,u,d=!1,E=0;function f(){d=!0,p()}function p(){E-=1,h()}function h(){u&&!d&&E<n&&a.length<r&&(u(),u=null)}async function T(){try{for await(let S of o){if(d)return;if(s.aborted)throw new Ni;try{if(S=t(S,l),S===JT)continue;S=rNe(S)}catch(I){S=Y2(I)}E+=1,V2(S,p,f),a.push(S),c&&(c(),c=null),!d&&(a.length>=r||E>=n)&&await new k2(I=>{u=I})}a.push(q2)}catch(S){let I=Y2(S);V2(I,p,f),a.push(I)}finally{d=!0,c&&(c(),c=null)}}T();try{for(;;){for(;a.length>0;){let S=await a[0];if(S===q2)return;if(s.aborted)throw new Ni;S!==JT&&(yield S),a.shift(),h()}await new k2(S=>{c=S})}}finally{d=!0,u&&(u(),u=null)}}.call(this)}function sNe(t=void 0){return t!=null&&da(t,"options"),t?.signal!=null&&ua(t.signal,"options.signal"),async function*(){let n=0;for await(let i of this){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new Ni({cause:t.signal.reason});yield[n++,i]}}.call(this)}async function z2(t,e=void 0){for await(let n of nC.call(this,t,e))return!0;return!1}async function oNe(t,e=void 0){if(typeof t!="function")throw new Gd("fn",["Function","AsyncFunction"],t);return!await z2.call(this,async(...n)=>!await t(...n),e)}async function aNe(t,e){for await(let n of nC.call(this,t,e))return n}async function lNe(t,e){if(typeof t!="function")throw new Gd("fn",["Function","AsyncFunction"],t);async function n(r,i){return await t(r,i),JT}for await(let r of QT.call(this,n,e));}function nC(t,e){if(typeof t!="function")throw new Gd("fn",["Function","AsyncFunction"],t);async function n(r,i){return await t(r,i)?r:JT}return QT.call(this,n,e)}var tC=class extends k_e{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function cNe(t,e,n){var r;if(typeof t!="function")throw new Gd("reducer",["Function","AsyncFunction"],t);n!=null&&da(n,"options"),n?.signal!=null&&ua(n.signal,"options.signal");let i=arguments.length>1;if(n!=null&&(r=n.signal)!==null&&r!==void 0&&r.aborted){let c=new Ni(void 0,{cause:n.signal.reason});throw this.once("error",()=>{}),await X_e(this.destroy(c)),c}let s=new W_e,o=s.signal;if(n!=null&&n.signal){let c={once:!0,[V_e]:this,[q_e]:!0};n.signal.addEventListener("abort",()=>s.abort(),c)}let a=!1;try{for await(let c of this){var l;if(a=!0,n!=null&&(l=n.signal)!==null&&l!==void 0&&l.aborted)throw new Ni;i?e=await t(e,c,{signal:o}):(e=c,i=!0)}if(!a&&!i)throw new tC}finally{s.abort()}return e}async function uNe(t){t!=null&&da(t,"options"),t?.signal!=null&&ua(t.signal,"options.signal");let e=[];for await(let r of this){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new Ni(void 0,{cause:t.signal.reason});Z_e(e,r)}return e}function dNe(t,e){let n=QT.call(this,t,e);return async function*(){for await(let i of n)yield*i}.call(this)}function j2(t){if(t=tNe(t),nNe(t))return 0;if(t<0)throw new Y_e("number",">= 0",t);return t}function fNe(t,e=void 0){return e!=null&&da(e,"options"),e?.signal!=null&&ua(e.signal,"options.signal"),t=j2(t),async function*(){var r;if(e!=null&&(r=e.signal)!==null&&r!==void 0&&r.aborted)throw new Ni;for await(let s of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new Ni;t--<=0&&(yield s)}}.call(this)}function ENe(t,e=void 0){return e!=null&&da(e,"options"),e?.signal!=null&&ua(e.signal,"options.signal"),t=j2(t),async function*(){var r;if(e!=null&&(r=e.signal)!==null&&r!==void 0&&r.aborted)throw new Ni;for await(let s of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new Ni;if(t-- >0&&(yield s),t<=0)return}}.call(this)}rC.exports.streamReturningOperators={asIndexedPairs:Q_e(sNe,"readable.asIndexedPairs will be removed in a future version."),drop:fNe,filter:nC,flatMap:dNe,map:QT,take:ENe,compose:iNe};rC.exports.promiseReturningOperators={every:oNe,forEach:lNe,reduce:cNe,toArray:uNe,some:z2,find:aNe}});var iC=C((nBe,J2)=>{"use strict";var{ArrayPrototypePop:hNe,Promise:pNe}=Et(),{isIterable:TNe,isNodeStream:SNe,isWebStream:RNe}=gi(),{pipelineImpl:ANe}=zT(),{finished:mNe}=rs();sC();function gNe(...t){return new pNe((e,n)=>{let r,i,s=t[t.length-1];if(s&&typeof s=="object"&&!SNe(s)&&!TNe(s)&&!RNe(s)){let o=hNe(t);r=o.signal,i=o.end}ANe(t,(o,a)=>{o?n(o):e(a)},{signal:r,end:i})})}J2.exports={finished:mNe,pipeline:gNe}});var sC=C((rBe,oq)=>{"use strict";var{Buffer:INe}=require("buffer"),{ObjectDefineProperty:os,ObjectKeys:eq,ReflectApply:tq}=Et(),{promisify:{custom:nq}}=Vn(),{streamReturningOperators:Q2,promiseReturningOperators:Z2}=K2(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:rq}}=Mn(),_Ne=eC(),{setDefaultHighWaterMark:NNe,getDefaultHighWaterMark:ONe}=Pd(),{pipeline:iq}=zT(),{destroyer:CNe}=sa(),sq=rs(),oC=iC(),Wd=gi(),lt=oq.exports=PT().Stream;lt.isDestroyed=Wd.isDestroyed;lt.isDisturbed=Wd.isDisturbed;lt.isErrored=Wd.isErrored;lt.isReadable=Wd.isReadable;lt.isWritable=Wd.isWritable;lt.Readable=vd();for(let t of eq(Q2)){let n=function(...r){if(new.target)throw rq();return lt.Readable.from(tq(e,this,r))},e=Q2[t];os(n,"name",{__proto__:null,value:e.name}),os(n,"length",{__proto__:null,value:e.length}),os(lt.Readable.prototype,t,{__proto__:null,value:n,enumerable:!1,configurable:!0,writable:!0})}for(let t of eq(Z2)){let n=function(...r){if(new.target)throw rq();return tq(e,this,r)},e=Z2[t];os(n,"name",{__proto__:null,value:e.name}),os(n,"length",{__proto__:null,value:e.length}),os(lt.Readable.prototype,t,{__proto__:null,value:n,enumerable:!1,configurable:!0,writable:!0})}lt.Writable=YT();lt.Duplex=_i();lt.Transform=WO();lt.PassThrough=kO();lt.pipeline=iq;var{addAbortSignal:yNe}=Dd();lt.addAbortSignal=yNe;lt.finished=sq;lt.destroy=CNe;lt.compose=_Ne;lt.setDefaultHighWaterMark=NNe;lt.getDefaultHighWaterMark=ONe;os(lt,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return oC}});os(iq,nq,{__proto__:null,enumerable:!0,get(){return oC.pipeline}});os(sq,nq,{__proto__:null,enumerable:!0,get(){return oC.finished}});lt.Stream=lt;lt._isUint8Array=function(e){return e instanceof Uint8Array};lt._uint8ArrayToBuffer=function(e){return INe.from(e.buffer,e.byteOffset,e.byteLength)}});var aq=C((iBe,xe)=>{"use strict";var Xt=require("stream");if(Xt&&process.env.READABLE_STREAM==="disable"){let t=Xt.promises;xe.exports._uint8ArrayToBuffer=Xt._uint8ArrayToBuffer,xe.exports._isUint8Array=Xt._isUint8Array,xe.exports.isDisturbed=Xt.isDisturbed,xe.exports.isErrored=Xt.isErrored,xe.exports.isReadable=Xt.isReadable,xe.exports.Readable=Xt.Readable,xe.exports.Writable=Xt.Writable,xe.exports.Duplex=Xt.Duplex,xe.exports.Transform=Xt.Transform,xe.exports.PassThrough=Xt.PassThrough,xe.exports.addAbortSignal=Xt.addAbortSignal,xe.exports.finished=Xt.finished,xe.exports.destroy=Xt.destroy,xe.exports.pipeline=Xt.pipeline,xe.exports.compose=Xt.compose,Object.defineProperty(Xt,"promises",{configurable:!0,enumerable:!0,get(){return t}}),xe.exports.Stream=Xt.Stream}else{let t=sC(),e=iC(),n=t.Readable.destroy;xe.exports=t.Readable,xe.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,xe.exports._isUint8Array=t._isUint8Array,xe.exports.isDisturbed=t.isDisturbed,xe.exports.isErrored=t.isErrored,xe.exports.isReadable=t.isReadable,xe.exports.Readable=t.Readable,xe.exports.Writable=t.Writable,xe.exports.Duplex=t.Duplex,xe.exports.Transform=t.Transform,xe.exports.PassThrough=t.PassThrough,xe.exports.addAbortSignal=t.addAbortSignal,xe.exports.finished=t.finished,xe.exports.destroy=t.destroy,xe.exports.destroy=n,xe.exports.pipeline=t.pipeline,xe.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return e}}),xe.exports.Stream=t.Stream}xe.exports.default=xe.exports});var cq=C((sBe,lq)=>{"use strict";var{Transform:bNe}=aq(),wNe=_T(),aC=class extends bNe{constructor(e){super(e),this.checksum=Buffer.allocUnsafe(4),this.checksum.writeInt32BE(0,0),this.rawSize=0}_transform(e,n,r){e&&(this.checksum=wNe.buf(e,this.checksum)>>>0,this.rawSize+=e.length),r(null,e)}digest(e){let n=Buffer.allocUnsafe(4);return n.writeUInt32BE(this.checksum>>>0,0),e?n.toString(e):n}hex(){return this.digest("hex").toUpperCase()}size(){return this.rawSize}};lq.exports=aC});var dq=C((oBe,uq)=>{"use strict";var{DeflateRaw:LNe}=require("zlib"),DNe=_T(),lC=class extends LNe{constructor(e){super(e),this.checksum=Buffer.allocUnsafe(4),this.checksum.writeInt32BE(0,0),this.rawSize=0,this.compressedSize=0}push(e,n){return e&&(this.compressedSize+=e.length),super.push(e,n)}_transform(e,n,r){e&&(this.checksum=DNe.buf(e,this.checksum)>>>0,this.rawSize+=e.length),super._transform(e,n,r)}digest(e){let n=Buffer.allocUnsafe(4);return n.writeUInt32BE(this.checksum>>>0,0),e?n.toString(e):n}hex(){return this.digest("hex").toUpperCase()}size(e=!1){return e?this.compressedSize:this.rawSize}};uq.exports=lC});var cC=C((aBe,fq)=>{"use strict";fq.exports={CRC32Stream:cq(),DeflateCRC32Stream:dq()}});var pq=C((dBe,hq)=>{var PNe=require("util").inherits,xNe=_T(),{CRC32Stream:vNe}=cC(),{DeflateCRC32Stream:MNe}=cC(),Eq=KN(),lBe=B_(),cBe=M_(),Ae=U_(),uBe=zN(),ue=Xp(),an=hq.exports=function(t){if(!(this instanceof an))return new an(t);t=this.options=this._defaults(t),Eq.call(this,t),this._entry=null,this._entries=[],this._archive={centralLength:0,centralOffset:0,comment:"",finish:!1,finished:!1,processing:!1,forceZip64:t.forceZip64,forceLocalTime:t.forceLocalTime}};PNe(an,Eq);an.prototype._afterAppend=function(t){this._entries.push(t),t.getGeneralPurposeBit().usesDataDescriptor()&&this._writeDataDescriptor(t),this._archive.processing=!1,this._entry=null,this._archive.finish&&!this._archive.finished&&this._finish()};an.prototype._appendBuffer=function(t,e,n){e.length===0&&t.setMethod(Ae.METHOD_STORED);var r=t.getMethod();if(r===Ae.METHOD_STORED&&(t.setSize(e.length),t.setCompressedSize(e.length),t.setCrc(xNe.buf(e)>>>0)),this._writeLocalFileHeader(t),r===Ae.METHOD_STORED){this.write(e),this._afterAppend(t),n(null,t);return}else if(r===Ae.METHOD_DEFLATED){this._smartStream(t,n).end(e);return}else{n(new Error("compression method "+r+" not implemented"));return}};an.prototype._appendStream=function(t,e,n){t.getGeneralPurposeBit().useDataDescriptor(!0),t.setVersionNeededToExtract(Ae.MIN_VERSION_DATA_DESCRIPTOR),this._writeLocalFileHeader(t);var r=this._smartStream(t,n);e.once("error",function(i){r.emit("error",i),r.end()}),e.pipe(r)};an.prototype._defaults=function(t){return typeof t!="object"&&(t={}),typeof t.zlib!="object"&&(t.zlib={}),typeof t.zlib.level!="number"&&(t.zlib.level=Ae.ZLIB_BEST_SPEED),t.forceZip64=!!t.forceZip64,t.forceLocalTime=!!t.forceLocalTime,t};an.prototype._finish=function(){this._archive.centralOffset=this.offset,this._entries.forEach(function(t){this._writeCentralFileHeader(t)}.bind(this)),this._archive.centralLength=this.offset-this._archive.centralOffset,this.isZip64()&&this._writeCentralDirectoryZip64(),this._writeCentralDirectoryEnd(),this._archive.processing=!1,this._archive.finish=!0,this._archive.finished=!0,this.end()};an.prototype._normalizeEntry=function(t){t.getMethod()===-1&&t.setMethod(Ae.METHOD_DEFLATED),t.getMethod()===Ae.METHOD_DEFLATED&&(t.getGeneralPurposeBit().useDataDescriptor(!0),t.setVersionNeededToExtract(Ae.MIN_VERSION_DATA_DESCRIPTOR)),t.getTime()===-1&&t.setTime(new Date,this._archive.forceLocalTime),t._offsets={file:0,data:0,contents:0}};an.prototype._smartStream=function(t,e){var n=t.getMethod()===Ae.METHOD_DEFLATED,r=n?new MNe(this.options.zlib):new vNe,i=null;function s(){var o=r.digest().readUInt32BE(0);t.setCrc(o),t.setSize(r.size()),t.setCompressedSize(r.size(!0)),this._afterAppend(t),e(i,t)}return r.once("end",s.bind(this)),r.once("error",function(o){i=o}),r.pipe(this,{end:!1}),r};an.prototype._writeCentralDirectoryEnd=function(){var t=this._entries.length,e=this._archive.centralLength,n=this._archive.centralOffset;this.isZip64()&&(t=Ae.ZIP64_MAGIC_SHORT,e=Ae.ZIP64_MAGIC,n=Ae.ZIP64_MAGIC),this.write(ue.getLongBytes(Ae.SIG_EOCD)),this.write(Ae.SHORT_ZERO),this.write(Ae.SHORT_ZERO),this.write(ue.getShortBytes(t)),this.write(ue.getShortBytes(t)),this.write(ue.getLongBytes(e)),this.write(ue.getLongBytes(n));var r=this.getComment(),i=Buffer.byteLength(r);this.write(ue.getShortBytes(i)),this.write(r)};an.prototype._writeCentralDirectoryZip64=function(){this.write(ue.getLongBytes(Ae.SIG_ZIP64_EOCD)),this.write(ue.getEightBytes(44)),this.write(ue.getShortBytes(Ae.MIN_VERSION_ZIP64)),this.write(ue.getShortBytes(Ae.MIN_VERSION_ZIP64)),this.write(Ae.LONG_ZERO),this.write(Ae.LONG_ZERO),this.write(ue.getEightBytes(this._entries.length)),this.write(ue.getEightBytes(this._entries.length)),this.write(ue.getEightBytes(this._archive.centralLength)),this.write(ue.getEightBytes(this._archive.centralOffset)),this.write(ue.getLongBytes(Ae.SIG_ZIP64_EOCD_LOC)),this.write(Ae.LONG_ZERO),this.write(ue.getEightBytes(this._archive.centralOffset+this._archive.centralLength)),this.write(ue.getLongBytes(1))};an.prototype._writeCentralFileHeader=function(t){var e=t.getGeneralPurposeBit(),n=t.getMethod(),r=t._offsets.file,i=t.getSize(),s=t.getCompressedSize();if(t.isZip64()||r>Ae.ZIP64_MAGIC){i=Ae.ZIP64_MAGIC,s=Ae.ZIP64_MAGIC,r=Ae.ZIP64_MAGIC,t.setVersionNeededToExtract(Ae.MIN_VERSION_ZIP64);var o=Buffer.concat([ue.getShortBytes(Ae.ZIP64_EXTRA_ID),ue.getShortBytes(24),ue.getEightBytes(t.getSize()),ue.getEightBytes(t.getCompressedSize()),ue.getEightBytes(t._offsets.file)],28);t.setExtra(o)}this.write(ue.getLongBytes(Ae.SIG_CFH)),this.write(ue.getShortBytes(t.getPlatform()<<8|Ae.VERSION_MADEBY)),this.write(ue.getShortBytes(t.getVersionNeededToExtract())),this.write(e.encode()),this.write(ue.getShortBytes(n)),this.write(ue.getLongBytes(t.getTimeDos())),this.write(ue.getLongBytes(t.getCrc())),this.write(ue.getLongBytes(s)),this.write(ue.getLongBytes(i));var a=t.getName(),l=t.getComment(),c=t.getCentralDirectoryExtra();e.usesUTF8ForNames()&&(a=Buffer.from(a),l=Buffer.from(l)),this.write(ue.getShortBytes(a.length)),this.write(ue.getShortBytes(c.length)),this.write(ue.getShortBytes(l.length)),this.write(Ae.SHORT_ZERO),this.write(ue.getShortBytes(t.getInternalAttributes())),this.write(ue.getLongBytes(t.getExternalAttributes())),this.write(ue.getLongBytes(r)),this.write(a),this.write(c),this.write(l)};an.prototype._writeDataDescriptor=function(t){this.write(ue.getLongBytes(Ae.SIG_DD)),this.write(ue.getLongBytes(t.getCrc())),t.isZip64()?(this.write(ue.getEightBytes(t.getCompressedSize())),this.write(ue.getEightBytes(t.getSize()))):(this.write(ue.getLongBytes(t.getCompressedSize())),this.write(ue.getLongBytes(t.getSize())))};an.prototype._writeLocalFileHeader=function(t){var e=t.getGeneralPurposeBit(),n=t.getMethod(),r=t.getName(),i=t.getLocalFileDataExtra();t.isZip64()&&(e.useDataDescriptor(!0),t.setVersionNeededToExtract(Ae.MIN_VERSION_ZIP64)),e.usesUTF8ForNames()&&(r=Buffer.from(r)),t._offsets.file=this.offset,this.write(ue.getLongBytes(Ae.SIG_LFH)),this.write(ue.getShortBytes(t.getVersionNeededToExtract())),this.write(e.encode()),this.write(ue.getShortBytes(n)),this.write(ue.getLongBytes(t.getTimeDos())),t._offsets.data=this.offset,e.usesDataDescriptor()?(this.write(Ae.LONG_ZERO),this.write(Ae.LONG_ZERO),this.write(Ae.LONG_ZERO)):(this.write(ue.getLongBytes(t.getCrc())),this.write(ue.getLongBytes(t.getCompressedSize())),this.write(ue.getLongBytes(t.getSize()))),this.write(ue.getShortBytes(r.length)),this.write(ue.getShortBytes(i.length)),this.write(r),this.write(i),t._offsets.contents=this.offset};an.prototype.getComment=function(t){return this._archive.comment!==null?this._archive.comment:""};an.prototype.isZip64=function(){return this._archive.forceZip64||this._entries.length>Ae.ZIP64_MAGIC_SHORT||this._archive.centralLength>Ae.ZIP64_MAGIC||this._archive.centralOffset>Ae.ZIP64_MAGIC};an.prototype.setComment=function(t){this._archive.comment=t}});var uC=C((fBe,Tq)=>{Tq.exports={ArchiveEntry:qp(),ZipArchiveEntry:B_(),ArchiveOutputStream:KN(),ZipArchiveOutputStream:pq()}});var Rq=C((EBe,Sq)=>{var UNe=require("util").inherits,fC=uC().ZipArchiveOutputStream,BNe=uC().ZipArchiveEntry,dC=yl(),uc=Sq.exports=function(t){if(!(this instanceof uc))return new uc(t);t=this.options=t||{},t.zlib=t.zlib||{},fC.call(this,t),typeof t.level=="number"&&t.level>=0&&(t.zlib.level=t.level,delete t.level),!t.forceZip64&&typeof t.zlib.level=="number"&&t.zlib.level===0&&(t.store=!0),t.namePrependSlash=t.namePrependSlash||!1,t.comment&&t.comment.length>0&&this.setComment(t.comment)};UNe(uc,fC);uc.prototype._normalizeFileData=function(t){t=dC.defaults(t,{type:"file",name:null,namePrependSlash:this.options.namePrependSlash,linkname:null,date:null,mode:null,store:this.options.store,comment:""});var e=t.type==="directory",n=t.type==="symlink";return t.name&&(t.name=dC.sanitizePath(t.name),!n&&t.name.slice(-1)==="/"?(e=!0,t.type="directory"):e&&(t.name+="/")),(e||n)&&(t.store=!0),t.date=dC.dateify(t.date),t};uc.prototype.entry=function(t,e,n){if(typeof n!="function"&&(n=this._emitErrorCallback.bind(this)),e=this._normalizeFileData(e),e.type!=="file"&&e.type!=="directory"&&e.type!=="symlink"){n(new Error(e.type+" entries not currently supported"));return}if(typeof e.name!="string"||e.name.length===0){n(new Error("entry name must be a non-empty string value"));return}if(e.type==="symlink"&&typeof e.linkname!="string"){n(new Error("entry linkname must be a non-empty string value when type equals symlink"));return}var r=new BNe(e.name);return r.setTime(e.date,this.options.forceLocalTime),e.namePrependSlash&&r.setName(e.name,!0),e.store&&r.setMethod(0),e.comment.length>0&&r.setComment(e.comment),e.type==="symlink"&&typeof e.mode!="number"&&(e.mode=40960),typeof e.mode=="number"&&(e.type==="symlink"&&(e.mode|=40960),r.setUnixMode(e.mode)),e.type==="symlink"&&typeof e.linkname=="string"&&(t=Buffer.from(e.linkname)),fC.prototype.entry.call(this,r,t,n)};uc.prototype.finalize=function(){this.finish()}});var mq=C((hBe,Aq)=>{var FNe=Rq(),HNe=yl(),zs=function(t){if(!(this instanceof zs))return new zs(t);t=this.options=HNe.defaults(t,{comment:"",forceUTC:!1,namePrependSlash:!1,store:!1}),this.supports={directory:!0,symlink:!0},this.engine=new FNe(t)};zs.prototype.append=function(t,e,n){this.engine.entry(t,e,n)};zs.prototype.finalize=function(){this.engine.finalize()};zs.prototype.on=function(){return this.engine.on.apply(this.engine,arguments)};zs.prototype.pipe=function(){return this.engine.pipe.apply(this.engine,arguments)};zs.prototype.unpipe=function(){return this.engine.unpipe.apply(this.engine,arguments)};Aq.exports=zs});var Iq=C((pBe,gq)=>{gq.exports=require("events")});var Nq=C((SBe,_q)=>{_q.exports=class{constructor(e){if(!(e>0)||(e-1&e)!==0)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}clear(){this.top=this.btm=0,this.next=null,this.buffer.fill(void 0)}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){let e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}peek(){return this.buffer[this.btm]}isEmpty(){return this.buffer[this.btm]===void 0}}});var EC=C((ABe,Cq)=>{var Oq=Nq();Cq.exports=class{constructor(e){this.hwm=e||16,this.head=new Oq(this.hwm),this.tail=this.head,this.length=0}clear(){this.head=this.tail,this.head.clear(),this.length=0}push(e){if(this.length++,!this.head.push(e)){let n=this.head;this.head=n.next=new Oq(2*this.head.buffer.length),this.head.push(e)}}shift(){this.length!==0&&this.length--;let e=this.tail.shift();if(e===void 0&&this.tail.next){let n=this.tail.next;return this.tail.next=null,this.tail=n,this.tail.shift()}return e}peek(){let e=this.tail.peek();return e===void 0&&this.tail.next?this.tail.next.peek():e}isEmpty(){return this.length===0}}});var dc=C((mBe,yq)=>{function GNe(t){return Buffer.isBuffer(t)||t instanceof Uint8Array}function WNe(t){return Buffer.isEncoding(t)}function $Ne(t,e,n){return Buffer.alloc(t,e,n)}function kNe(t){return Buffer.allocUnsafe(t)}function YNe(t){return Buffer.allocUnsafeSlow(t)}function VNe(t,e){return Buffer.byteLength(t,e)}function qNe(t,e){return Buffer.compare(t,e)}function XNe(t,e){return Buffer.concat(t,e)}function zNe(t,e,n,r,i){return Je(t).copy(e,n,r,i)}function jNe(t,e){return Je(t).equals(e)}function KNe(t,e,n,r,i){return Je(t).fill(e,n,r,i)}function JNe(t,e,n){return Buffer.from(t,e,n)}function QNe(t,e,n,r){return Je(t).includes(e,n,r)}function ZNe(t,e,n,r){return Je(t).indexOf(e,n,r)}function eOe(t,e,n,r){return Je(t).lastIndexOf(e,n,r)}function tOe(t){return Je(t).swap16()}function nOe(t){return Je(t).swap32()}function rOe(t){return Je(t).swap64()}function Je(t){return Buffer.isBuffer(t)?t:Buffer.from(t.buffer,t.byteOffset,t.byteLength)}function iOe(t,e,n,r){return Je(t).toString(e,n,r)}function sOe(t,e,n,r,i){return Je(t).write(e,n,r,i)}function oOe(t,e){return Je(t).readDoubleBE(e)}function aOe(t,e){return Je(t).readDoubleLE(e)}function lOe(t,e){return Je(t).readFloatBE(e)}function cOe(t,e){return Je(t).readFloatLE(e)}function uOe(t,e){return Je(t).readInt32BE(e)}function dOe(t,e){return Je(t).readInt32LE(e)}function fOe(t,e){return Je(t).readUInt32BE(e)}function EOe(t,e){return Je(t).readUInt32LE(e)}function hOe(t,e,n){return Je(t).writeDoubleBE(e,n)}function pOe(t,e,n){return Je(t).writeDoubleLE(e,n)}function TOe(t,e,n){return Je(t).writeFloatBE(e,n)}function SOe(t,e,n){return Je(t).writeFloatLE(e,n)}function ROe(t,e,n){return Je(t).writeInt32BE(e,n)}function AOe(t,e,n){return Je(t).writeInt32LE(e,n)}function mOe(t,e,n){return Je(t).writeUInt32BE(e,n)}function gOe(t,e,n){return Je(t).writeUInt32LE(e,n)}yq.exports={isBuffer:GNe,isEncoding:WNe,alloc:$Ne,allocUnsafe:kNe,allocUnsafeSlow:YNe,byteLength:VNe,compare:qNe,concat:XNe,copy:zNe,equals:jNe,fill:KNe,from:JNe,includes:QNe,indexOf:ZNe,lastIndexOf:eOe,swap16:tOe,swap32:nOe,swap64:rOe,toBuffer:Je,toString:iOe,write:sOe,readDoubleBE:oOe,readDoubleLE:aOe,readFloatBE:lOe,readFloatLE:cOe,readInt32BE:uOe,readInt32LE:dOe,readUInt32BE:fOe,readUInt32LE:EOe,writeDoubleBE:hOe,writeDoubleLE:pOe,writeFloatBE:TOe,writeFloatLE:SOe,writeInt32BE:ROe,writeInt32LE:AOe,writeUInt32BE:mOe,writeUInt32LE:gOe}});var wq=C((IBe,bq)=>{var IOe=dc();bq.exports=class{constructor(e){this.encoding=e}get remaining(){return 0}decode(e){return IOe.toString(e,this.encoding)}flush(){return""}}});var Dq=C((NBe,Lq)=>{var _Oe=dc();Lq.exports=class{constructor(){this.codePoint=0,this.bytesSeen=0,this.bytesNeeded=0,this.lowerBoundary=128,this.upperBoundary=191}get remaining(){return this.bytesSeen}decode(e){if(this.bytesNeeded===0){let r=!0;for(let i=Math.max(0,e.byteLength-4),s=e.byteLength;i<s&&r;i++)r=e[i]<=127;if(r)return _Oe.toString(e,"utf8")}let n="";for(let r=0,i=e.byteLength;r<i;r++){let s=e[r];if(this.bytesNeeded===0){s<=127?n+=String.fromCharCode(s):(this.bytesSeen=1,s>=194&&s<=223?(this.bytesNeeded=2,this.codePoint=s&31):s>=224&&s<=239?(s===224?this.lowerBoundary=160:s===237&&(this.upperBoundary=159),this.bytesNeeded=3,this.codePoint=s&15):s>=240&&s<=244?(s===240&&(this.lowerBoundary=144),s===244&&(this.upperBoundary=143),this.bytesNeeded=4,this.codePoint=s&7):n+="\uFFFD");continue}if(s<this.lowerBoundary||s>this.upperBoundary){this.codePoint=0,this.bytesNeeded=0,this.bytesSeen=0,this.lowerBoundary=128,this.upperBoundary=191,n+="\uFFFD";continue}this.lowerBoundary=128,this.upperBoundary=191,this.codePoint=this.codePoint<<6|s&63,this.bytesSeen++,this.bytesSeen===this.bytesNeeded&&(n+=String.fromCodePoint(this.codePoint),this.codePoint=0,this.bytesNeeded=0,this.bytesSeen=0)}return n}flush(){let e=this.bytesNeeded>0?"\uFFFD":"";return this.codePoint=0,this.bytesNeeded=0,this.bytesSeen=0,this.lowerBoundary=128,this.upperBoundary=191,e}}});var xq=C((CBe,Pq)=>{var NOe=wq(),OOe=Dq();Pq.exports=class{constructor(e="utf8"){switch(this.encoding=COe(e),this.encoding){case"utf8":this.decoder=new OOe;break;case"utf16le":case"base64":throw new Error("Unsupported encoding: "+this.encoding);default:this.decoder=new NOe(this.encoding)}}get remaining(){return this.decoder.remaining}push(e){return typeof e=="string"?e:this.decoder.decode(e)}write(e){return this.push(e)}end(e){let n="";return e&&(n=this.push(e)),n+=this.decoder.flush(),n}};function COe(t){switch(t=t.toLowerCase(),t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:throw new Error("Unknown encoding: "+t)}}});var wC=C((yBe,nX)=>{var{EventEmitter:yOe}=Iq(),iS=new Error("Stream was destroyed"),hC=new Error("Premature close"),Hq=EC(),bOe=xq(),pC=typeof queueMicrotask>"u"?t=>global.process.nextTick(t):queueMicrotask,mt=(1<<29)-1,Oi=1,IC=2,fa=4,$d=8,Gq=mt^Oi,wOe=mt^IC,Xd=16,fc=32,pc=64,Ks=128,zd=256,_C=512,Ea=1024,TC=2048,NC=4096,OC=8192,kr=16384,js=32768,sS=65536,ha=131072,Wq=zd|_C,LOe=Xd|sS,DOe=pc|Xd,POe=NC|Ks,CC=zd|ha,xOe=mt^Xd,vOe=mt^pc,MOe=mt^(pc|sS),vq=mt^sS,UOe=mt^zd,BOe=mt^(Ks|OC),FOe=mt^Ea,Mq=mt^Wq,$q=mt^js,HOe=mt^fc,kq=mt^ha,GOe=mt^CC,as=1<<18,hc=2<<18,jd=4<<18,pa=8<<18,Kd=16<<18,Js=32<<18,SC=64<<18,Ec=128<<18,yC=256<<18,Ta=512<<18,oS=1024<<18,WOe=mt^(as|yC),Yq=mt^jd,$Oe=mt^(as|Ta),kOe=mt^Kd,YOe=mt^pa,Vq=mt^Ec,VOe=mt^hc,qq=mt^oS,kd=Xd|as,Xq=mt^kd,bC=kr|Js,Ci=fa|$d|IC,sr=Ci|Oi,zq=Ci|bC,qOe=Yq&vOe,aS=Ec|js,XOe=aS&Xq,jq=sr|XOe,zOe=sr|Ea|kr,Uq=sr|kr|Ks,jOe=sr|Ea|Ks,KOe=sr|NC|Ks|OC,JOe=sr|Xd|Ea|kr|sS|ha,QOe=Ci|Ea|kr,ZOe=fc|sr|js|pc,eCe=js|Oi,tCe=sr|Ta|Js,nCe=pa|Kd,Kq=pa|as,rCe=pa|Kd|sr|as,Bq=sr|as|pa|oS,iCe=jd|as,sCe=as|yC,oCe=sr|Ta|Kq|Js,aCe=Kd|Ci|Ta|Js,lCe=hc|sr|Ec|jd,cCe=Ta|Js|Ci,ZT=Symbol.asyncIterator||Symbol("asyncIterator"),eS=class{constructor(e,{highWaterMark:n=16384,map:r=null,mapWritable:i,byteLength:s,byteLengthWritable:o}={}){this.stream=e,this.queue=new Hq,this.highWaterMark=n,this.buffered=0,this.error=null,this.pipeline=null,this.drains=null,this.byteLength=o||s||tX,this.map=i||r,this.afterWrite=fCe.bind(this),this.afterUpdateNextTick=pCe.bind(this)}get ended(){return(this.stream._duplexState&Js)!==0}push(e){return(this.stream._duplexState&cCe)!==0?!1:(this.map!==null&&(e=this.map(e)),this.buffered+=this.byteLength(e),this.queue.push(e),this.buffered<this.highWaterMark?(this.stream._duplexState|=pa,!0):(this.stream._duplexState|=nCe,!1))}shift(){let e=this.queue.shift();return this.buffered-=this.byteLength(e),this.buffered===0&&(this.stream._duplexState&=YOe),e}end(e){typeof e=="function"?this.stream.once("finish",e):e!=null&&this.push(e),this.stream._duplexState=(this.stream._duplexState|Ta)&Yq}autoBatch(e,n){let r=[],i=this.stream;for(r.push(e);(i._duplexState&Bq)===Kq;)r.push(i._writableState.shift());if((i._duplexState&sr)!==0)return n(null);i._writev(r,n)}update(){let e=this.stream;e._duplexState|=hc;do{for(;(e._duplexState&Bq)===pa;){let n=this.shift();e._duplexState|=sCe,e._write(n,this.afterWrite)}(e._duplexState&iCe)===0&&this.updateNonPrimary()}while(this.continueUpdate()===!0);e._duplexState&=VOe}updateNonPrimary(){let e=this.stream;if((e._duplexState&oCe)===Ta){e._duplexState=e._duplexState|as,e._final(dCe.bind(this));return}if((e._duplexState&Ci)===fa){(e._duplexState&aS)===0&&(e._duplexState|=kd,e._destroy(Jq.bind(this)));return}(e._duplexState&jq)===Oi&&(e._duplexState=(e._duplexState|kd)&Gq,e._open(Qq.bind(this)))}continueUpdate(){return(this.stream._duplexState&Ec)===0?!1:(this.stream._duplexState&=Vq,!0)}updateCallback(){(this.stream._duplexState&lCe)===jd?this.update():this.updateNextTick()}updateNextTick(){(this.stream._duplexState&Ec)===0&&(this.stream._duplexState|=Ec,(this.stream._duplexState&hc)===0&&pC(this.afterUpdateNextTick))}},RC=class{constructor(e,{highWaterMark:n=16384,map:r=null,mapReadable:i,byteLength:s,byteLengthReadable:o}={}){this.stream=e,this.queue=new Hq,this.highWaterMark=n===0?1:n,this.buffered=0,this.readAhead=n>0,this.error=null,this.pipeline=null,this.byteLength=o||s||tX,this.map=i||r,this.pipeTo=null,this.afterRead=ECe.bind(this),this.afterUpdateNextTick=hCe.bind(this)}get ended(){return(this.stream._duplexState&kr)!==0}pipe(e,n){if(this.pipeTo!==null)throw new Error("Can only pipe to one destination");if(typeof n!="function"&&(n=null),this.stream._duplexState|=_C,this.pipeTo=e,this.pipeline=new mC(this.stream,e,n),n&&this.stream.on("error",Fq),qd(e))e._writableState.pipeline=this.pipeline,n&&e.on("error",Fq),e.on("finish",this.pipeline.finished.bind(this.pipeline));else{let r=this.pipeline.done.bind(this.pipeline,e),i=this.pipeline.done.bind(this.pipeline,e,null);e.on("error",r),e.on("close",i),e.on("finish",this.pipeline.finished.bind(this.pipeline))}e.on("drain",uCe.bind(this)),this.stream.emit("piping",e),e.emit("pipe",this.stream)}push(e){let n=this.stream;return e===null?(this.highWaterMark=0,n._duplexState=(n._duplexState|Ea)&MOe,!1):this.map!==null&&(e=this.map(e),e===null)?(n._duplexState&=vq,this.buffered<this.highWaterMark):(this.buffered+=this.byteLength(e),this.queue.push(e),n._duplexState=(n._duplexState|Ks)&vq,this.buffered<this.highWaterMark)}shift(){let e=this.queue.shift();return this.buffered-=this.byteLength(e),this.buffered===0&&(this.stream._duplexState&=BOe),e}unshift(e){let n=[this.map!==null?this.map(e):e];for(;this.buffered>0;)n.push(this.shift());for(let r=0;r<n.length-1;r++){let i=n[r];this.buffered+=this.byteLength(i),this.queue.push(i)}this.push(n[n.length-1])}read(){let e=this.stream;if((e._duplexState&Uq)===Ks){let n=this.shift();return this.pipeTo!==null&&this.pipeTo.write(n)===!1&&(e._duplexState&=Mq),(e._duplexState&TC)!==0&&e.emit("data",n),n}return this.readAhead===!1&&(e._duplexState|=ha,this.updateNextTick()),null}drain(){let e=this.stream;for(;(e._duplexState&Uq)===Ks&&(e._duplexState&Wq)!==0;){let n=this.shift();this.pipeTo!==null&&this.pipeTo.write(n)===!1&&(e._duplexState&=Mq),(e._duplexState&TC)!==0&&e.emit("data",n)}}update(){let e=this.stream;e._duplexState|=fc;do{for(this.drain();this.buffered<this.highWaterMark&&(e._duplexState&JOe)===ha;)e._duplexState|=LOe,e._read(this.afterRead),this.drain();(e._duplexState&KOe)===POe&&(e._duplexState|=OC,e.emit("readable")),(e._duplexState&DOe)===0&&this.updateNonPrimary()}while(this.continueUpdate()===!0);e._duplexState&=HOe}updateNonPrimary(){let e=this.stream;if((e._duplexState&jOe)===Ea&&(e._duplexState=(e._duplexState|kr)&FOe,e.emit("end"),(e._duplexState&zq)===bC&&(e._duplexState|=fa),this.pipeTo!==null&&this.pipeTo.end()),(e._duplexState&Ci)===fa){(e._duplexState&aS)===0&&(e._duplexState|=kd,e._destroy(Jq.bind(this)));return}(e._duplexState&jq)===Oi&&(e._duplexState=(e._duplexState|kd)&Gq,e._open(Qq.bind(this)))}continueUpdate(){return(this.stream._duplexState&js)===0?!1:(this.stream._duplexState&=$q,!0)}updateCallback(){(this.stream._duplexState&ZOe)===pc?this.update():this.updateNextTick()}updateNextTickIfOpen(){(this.stream._duplexState&eCe)===0&&(this.stream._duplexState|=js,(this.stream._duplexState&fc)===0&&pC(this.afterUpdateNextTick))}updateNextTick(){(this.stream._duplexState&js)===0&&(this.stream._duplexState|=js,(this.stream._duplexState&fc)===0&&pC(this.afterUpdateNextTick))}},AC=class{constructor(e){this.data=null,this.afterTransform=SCe.bind(e),this.afterFinal=null}},mC=class{constructor(e,n,r){this.from=e,this.to=n,this.afterPipe=r,this.error=null,this.pipeToFinished=!1}finished(){this.pipeToFinished=!0}done(e,n){if(n&&(this.error=n),e===this.to&&(this.to=null,this.from!==null)){((this.from._duplexState&kr)===0||!this.pipeToFinished)&&this.from.destroy(this.error||new Error("Writable stream closed prematurely"));return}if(e===this.from&&(this.from=null,this.to!==null)){(e._duplexState&kr)===0&&this.to.destroy(this.error||new Error("Readable stream closed before ending"));return}this.afterPipe!==null&&this.afterPipe(this.error),this.to=this.from=this.afterPipe=null}};function uCe(){this.stream._duplexState|=_C,this.updateCallback()}function dCe(t){let e=this.stream;t&&e.destroy(t),(e._duplexState&Ci)===0&&(e._duplexState|=Js,e.emit("finish")),(e._duplexState&zq)===bC&&(e._duplexState|=fa),e._duplexState&=$Oe,(e._duplexState&hc)===0?this.update():this.updateNextTick()}function Jq(t){let e=this.stream;!t&&this.error!==iS&&(t=this.error),t&&e.emit("error",t),e._duplexState|=$d,e.emit("close");let n=e._readableState,r=e._writableState;if(n!==null&&n.pipeline!==null&&n.pipeline.done(e,t),r!==null){for(;r.drains!==null&&r.drains.length>0;)r.drains.shift().resolve(!1);r.pipeline!==null&&r.pipeline.done(e,t)}}function fCe(t){let e=this.stream;t&&e.destroy(t),e._duplexState&=WOe,this.drains!==null&&TCe(this.drains),(e._duplexState&rCe)===Kd&&(e._duplexState&=kOe,(e._duplexState&SC)===SC&&e.emit("drain")),this.updateCallback()}function ECe(t){t&&this.stream.destroy(t),this.stream._duplexState&=xOe,this.readAhead===!1&&(this.stream._duplexState&zd)===0&&(this.stream._duplexState&=kq),this.updateCallback()}function hCe(){(this.stream._duplexState&fc)===0&&(this.stream._duplexState&=$q,this.update())}function pCe(){(this.stream._duplexState&hc)===0&&(this.stream._duplexState&=Vq,this.update())}function TCe(t){for(let e=0;e<t.length;e++)--t[e].writes===0&&(t.shift().resolve(!0),e--)}function Qq(t){let e=this.stream;t&&e.destroy(t),(e._duplexState&fa)===0&&((e._duplexState&zOe)===0&&(e._duplexState|=pc),(e._duplexState&tCe)===0&&(e._duplexState|=jd),e.emit("open")),e._duplexState&=Xq,e._writableState!==null&&e._writableState.updateCallback(),e._readableState!==null&&e._readableState.updateCallback()}function SCe(t,e){e!=null&&this.push(e),this._writableState.afterWrite(t)}function RCe(t){this._readableState!==null&&(t==="data"&&(this._duplexState|=TC|CC,this._readableState.updateNextTick()),t==="readable"&&(this._duplexState|=NC,this._readableState.updateNextTick())),this._writableState!==null&&t==="drain"&&(this._duplexState|=SC,this._writableState.updateNextTick())}var Yd=class extends yOe{constructor(e){super(),this._duplexState=0,this._readableState=null,this._writableState=null,e&&(e.open&&(this._open=e.open),e.destroy&&(this._destroy=e.destroy),e.predestroy&&(this._predestroy=e.predestroy),e.signal&&e.signal.addEventListener("abort",bCe.bind(this))),this.on("newListener",RCe)}_open(e){e(null)}_destroy(e){e(null)}_predestroy(){}get readable(){return this._readableState!==null?!0:void 0}get writable(){return this._writableState!==null?!0:void 0}get destroyed(){return(this._duplexState&$d)!==0}get destroying(){return(this._duplexState&Ci)!==0}destroy(e){(this._duplexState&Ci)===0&&(e||(e=iS),this._duplexState=(this._duplexState|fa)&qOe,this._readableState!==null&&(this._readableState.highWaterMark=0,this._readableState.error=e),this._writableState!==null&&(this._writableState.highWaterMark=0,this._writableState.error=e),this._duplexState|=IC,this._predestroy(),this._duplexState&=wOe,this._readableState!==null&&this._readableState.updateNextTick(),this._writableState!==null&&this._writableState.updateNextTick())}},tS=class t extends Yd{constructor(e){super(e),this._duplexState|=Oi|Js|ha,this._readableState=new RC(this,e),e&&(this._readableState.readAhead===!1&&(this._duplexState&=kq),e.read&&(this._read=e.read),e.eagerOpen&&this._readableState.updateNextTick(),e.encoding&&this.setEncoding(e.encoding))}setEncoding(e){let n=new bOe(e),r=this._readableState.map||gCe;return this._readableState.map=i,this;function i(s){let o=n.push(s);return o===""&&(s.byteLength!==0||n.remaining>0)?null:r(o)}}_read(e){e(null)}pipe(e,n){return this._readableState.updateNextTick(),this._readableState.pipe(e,n),e}read(){return this._readableState.updateNextTick(),this._readableState.read()}push(e){return this._readableState.updateNextTickIfOpen(),this._readableState.push(e)}unshift(e){return this._readableState.updateNextTickIfOpen(),this._readableState.unshift(e)}resume(){return this._duplexState|=CC,this._readableState.updateNextTick(),this}pause(){return this._duplexState&=this._readableState.readAhead===!1?GOe:UOe,this}static _fromAsyncIterator(e,n){let r,i=new t({...n,read(o){e.next().then(s).then(o.bind(null,null)).catch(o)},predestroy(){r=e.return()},destroy(o){if(!r)return o(null);r.then(o.bind(null,null)).catch(o)}});return i;function s(o){o.done?i.push(null):i.push(o.value)}}static from(e,n){if(OCe(e))return e;if(e[ZT])return this._fromAsyncIterator(e[ZT](),n);Array.isArray(e)||(e=e===void 0?[]:[e]);let r=0;return new t({...n,read(i){this.push(r===e.length?null:e[r++]),i(null)}})}static isBackpressured(e){return(e._duplexState&QOe)!==0||e._readableState.buffered>=e._readableState.highWaterMark}static isPaused(e){return(e._duplexState&zd)===0}[ZT](){let e=this,n=null,r=null,i=null;return this.on("error",c=>{n=c}),this.on("readable",s),this.on("close",o),{[ZT](){return this},next(){return new Promise(function(c,u){r=c,i=u;let d=e.read();d!==null?a(d):(e._duplexState&$d)!==0&&a(null)})},return(){return l(null)},throw(c){return l(c)}};function s(){r!==null&&a(e.read())}function o(){r!==null&&a(null)}function a(c){i!==null&&(n?i(n):c===null&&(e._duplexState&kr)===0?i(iS):r({value:c,done:c===null}),i=r=null)}function l(c){return e.destroy(c),new Promise((u,d)=>{if(e._duplexState&$d)return u({value:void 0,done:!0});e.once("close",function(){c?d(c):u({value:void 0,done:!0})})})}}},nS=class extends Yd{constructor(e){super(e),this._duplexState|=Oi|kr,this._writableState=new eS(this,e),e&&(e.writev&&(this._writev=e.writev),e.write&&(this._write=e.write),e.final&&(this._final=e.final),e.eagerOpen&&this._writableState.updateNextTick())}cork(){this._duplexState|=oS}uncork(){this._duplexState&=qq,this._writableState.updateNextTick()}_writev(e,n){n(null)}_write(e,n){this._writableState.autoBatch(e,n)}_final(e){e(null)}static isBackpressured(e){return(e._duplexState&aCe)!==0}static drained(e){if(e.destroyed)return Promise.resolve(!1);let n=e._writableState,i=(wCe(e)?Math.min(1,n.queue.length):n.queue.length)+(e._duplexState&yC?1:0);return i===0?Promise.resolve(!0):(n.drains===null&&(n.drains=[]),new Promise(s=>{n.drains.push({writes:i,resolve:s})}))}write(e){return this._writableState.updateNextTick(),this._writableState.push(e)}end(e){return this._writableState.updateNextTick(),this._writableState.end(e),this}},Vd=class extends tS{constructor(e){super(e),this._duplexState=Oi|this._duplexState&ha,this._writableState=new eS(this,e),e&&(e.writev&&(this._writev=e.writev),e.write&&(this._write=e.write),e.final&&(this._final=e.final))}cork(){this._duplexState|=oS}uncork(){this._duplexState&=qq,this._writableState.updateNextTick()}_writev(e,n){n(null)}_write(e,n){this._writableState.autoBatch(e,n)}_final(e){e(null)}write(e){return this._writableState.updateNextTick(),this._writableState.push(e)}end(e){return this._writableState.updateNextTick(),this._writableState.end(e),this}},rS=class extends Vd{constructor(e){super(e),this._transformState=new AC(this),e&&(e.transform&&(this._transform=e.transform),e.flush&&(this._flush=e.flush))}_write(e,n){this._readableState.buffered>=this._readableState.highWaterMark?this._transformState.data=e:this._transform(e,this._transformState.afterTransform)}_read(e){if(this._transformState.data!==null){let n=this._transformState.data;this._transformState.data=null,e(null),this._transform(n,this._transformState.afterTransform)}else e(null)}destroy(e){super.destroy(e),this._transformState.data!==null&&(this._transformState.data=null,this._transformState.afterTransform())}_transform(e,n){n(null,e)}_flush(e){e(null)}_final(e){this._transformState.afterFinal=e,this._flush(ACe.bind(this))}},gC=class extends rS{};function ACe(t,e){let n=this._transformState.afterFinal;if(t)return n(t);e!=null&&this.push(e),this.push(null),n(null)}function mCe(...t){return new Promise((e,n)=>Zq(...t,r=>{if(r)return n(r);e()}))}function Zq(t,...e){let n=Array.isArray(t)?[...t,...e]:[t,...e],r=n.length&&typeof n[n.length-1]=="function"?n.pop():null;if(n.length<2)throw new Error("Pipeline requires at least 2 streams");let i=n[0],s=null,o=null;for(let c=1;c<n.length;c++)s=n[c],qd(i)?i.pipe(s,l):(a(i,!0,c>1,l),i.pipe(s)),i=s;if(r){let c=!1,u=qd(s)||!!(s._writableState&&s._writableState.autoDestroy);s.on("error",d=>{o===null&&(o=d)}),s.on("finish",()=>{c=!0,u||r(o)}),u&&s.on("close",()=>r(o||(c?null:hC)))}return s;function a(c,u,d,E){c.on("error",E),c.on("close",f);function f(){if(u&&c._readableState&&!c._readableState.ended||d&&c._writableState&&!c._writableState.ended)return E(hC)}}function l(c){if(!(!c||o)){o=c;for(let u of n)u.destroy(c)}}}function gCe(t){return t}function eX(t){return!!t._readableState||!!t._writableState}function qd(t){return typeof t._duplexState=="number"&&eX(t)}function ICe(t){return!!t._readableState&&t._readableState.ended}function _Ce(t){return!!t._writableState&&t._writableState.ended}function NCe(t,e={}){let n=t._readableState&&t._readableState.error||t._writableState&&t._writableState.error;return!e.all&&n===iS?null:n}function OCe(t){return qd(t)&&t.readable}function CCe(t){return(t._duplexState&Oi)!==Oi||(t._duplexState&aS)!==0}function yCe(t){return typeof t=="object"&&t!==null&&typeof t.byteLength=="number"}function tX(t){return yCe(t)?t.byteLength:1024}function Fq(){}function bCe(){this.destroy(new Error("Stream aborted."))}function wCe(t){return t._writev!==nS.prototype._writev&&t._writev!==Vd.prototype._writev}nX.exports={pipeline:Zq,pipelinePromise:mCe,isStream:eX,isStreamx:qd,isEnded:ICe,isFinished:_Ce,isDisturbed:CCe,getStreamError:NCe,Stream:Yd,Writable:nS,Readable:tS,Duplex:Vd,Transform:rS,PassThrough:gC}});var PC=C(Sc=>{var ke=dc(),LCe="0000000000000000000",DCe="7777777777777777777",lS=48,rX=ke.from([117,115,116,97,114,0]),PCe=ke.from([lS,lS]),xCe=ke.from([117,115,116,97,114,32]),vCe=ke.from([32,0]),MCe=4095,Jd=257,DC=263;Sc.decodeLongPath=function(e,n){return Tc(e,0,e.length,n)};Sc.encodePax=function(e){let n="";e.name&&(n+=LC(" path="+e.name+`
`)),e.linkname&&(n+=LC(" linkpath="+e.linkname+`
`));let r=e.pax;if(r)for(let i in r)n+=LC(" "+i+"="+r[i]+`
`);return ke.from(n)};Sc.decodePax=function(e){let n={};for(;e.length;){let r=0;for(;r<e.length&&e[r]!==32;)r++;let i=parseInt(ke.toString(e.subarray(0,r)),10);if(!i)return n;let s=ke.toString(e.subarray(r+1,i-1)),o=s.indexOf("=");if(o===-1)return n;n[s.slice(0,o)]=s.slice(o+1),e=e.subarray(i)}return n};Sc.encode=function(e){let n=ke.alloc(512),r=e.name,i="";if(e.typeflag===5&&r[r.length-1]!=="/"&&(r+="/"),ke.byteLength(r)!==r.length)return null;for(;ke.byteLength(r)>100;){let s=r.indexOf("/");if(s===-1)return null;i+=i?"/"+r.slice(0,s):r.slice(0,s),r=r.slice(s+1)}return ke.byteLength(r)>100||ke.byteLength(i)>155||e.linkname&&ke.byteLength(e.linkname)>100?null:(ke.write(n,r),ke.write(n,Zs(e.mode&MCe,6),100),ke.write(n,Zs(e.uid,6),108),ke.write(n,Zs(e.gid,6),116),$Ce(e.size,n,124),ke.write(n,Zs(e.mtime.getTime()/1e3|0,11),136),n[156]=lS+GCe(e.type),e.linkname&&ke.write(n,e.linkname,157),ke.copy(rX,n,Jd),ke.copy(PCe,n,DC),e.uname&&ke.write(n,e.uname,265),e.gname&&ke.write(n,e.gname,297),ke.write(n,Zs(e.devmajor||0,6),329),ke.write(n,Zs(e.devminor||0,6),337),i&&ke.write(n,i,345),ke.write(n,Zs(sX(n),6),148),n)};Sc.decode=function(e,n,r){let i=e[156]===0?0:e[156]-lS,s=Tc(e,0,100,n),o=Qs(e,100,8),a=Qs(e,108,8),l=Qs(e,116,8),c=Qs(e,124,12),u=Qs(e,136,12),d=HCe(i),E=e[157]===0?null:Tc(e,157,100,n),f=Tc(e,265,32),p=Tc(e,297,32),h=Qs(e,329,8),T=Qs(e,337,8),S=sX(e);if(S===256)return null;if(S!==Qs(e,148,8))throw new Error("Invalid tar header. Maybe the tar is corrupted or it needs to be gunzipped?");if(UCe(e))e[345]&&(s=Tc(e,345,155,n)+"/"+s);else if(!BCe(e)){if(!r)throw new Error("Invalid tar header: unknown format.")}return i===0&&s&&s[s.length-1]==="/"&&(i=5),{name:s,mode:o,uid:a,gid:l,size:c,mtime:new Date(1e3*u),type:d,linkname:E,uname:f,gname:p,devmajor:h,devminor:T,pax:null}};function UCe(t){return ke.equals(rX,t.subarray(Jd,Jd+6))}function BCe(t){return ke.equals(xCe,t.subarray(Jd,Jd+6))&&ke.equals(vCe,t.subarray(DC,DC+2))}function FCe(t,e,n){return typeof t!="number"?n:(t=~~t,t>=e?e:t>=0||(t+=e,t>=0)?t:0)}function HCe(t){switch(t){case 0:return"file";case 1:return"link";case 2:return"symlink";case 3:return"character-device";case 4:return"block-device";case 5:return"directory";case 6:return"fifo";case 7:return"contiguous-file";case 72:return"pax-header";case 55:return"pax-global-header";case 27:return"gnu-long-link-path";case 28:case 30:return"gnu-long-path"}return null}function GCe(t){switch(t){case"file":return 0;case"link":return 1;case"symlink":return 2;case"character-device":return 3;case"block-device":return 4;case"directory":return 5;case"fifo":return 6;case"contiguous-file":return 7;case"pax-header":return 72}return 0}function iX(t,e,n,r){for(;n<r;n++)if(t[n]===e)return n;return r}function sX(t){let e=256;for(let n=0;n<148;n++)e+=t[n];for(let n=156;n<512;n++)e+=t[n];return e}function Zs(t,e){return t=t.toString(8),t.length>e?DCe.slice(0,e)+" ":LCe.slice(0,e-t.length)+t+" "}function WCe(t,e,n){e[n]=128;for(let r=11;r>0;r--)e[n+r]=t&255,t=Math.floor(t/256)}function $Ce(t,e,n){t.toString(8).length>11?WCe(t,e,n):ke.write(e,Zs(t,11),n)}function kCe(t){let e;if(t[0]===128)e=!0;else if(t[0]===255)e=!1;else return null;let n=[],r;for(r=t.length-1;r>0;r--){let o=t[r];e?n.push(o):n.push(255-o)}let i=0,s=n.length;for(r=0;r<s;r++)i+=n[r]*Math.pow(256,r);return e?i:-1*i}function Qs(t,e,n){if(t=t.subarray(e,e+n),e=0,t[e]&128)return kCe(t);{for(;e<t.length&&t[e]===32;)e++;let r=FCe(iX(t,32,e,t.length),t.length,t.length);for(;e<r&&t[e]===0;)e++;return r===e?0:parseInt(ke.toString(t.subarray(e,r)),8)}}function Tc(t,e,n,r){return ke.toString(t.subarray(e,iX(t,0,e,e+n)),r)}function LC(t){let e=ke.byteLength(t),n=Math.floor(Math.log(e)/Math.log(10))+1;return e+n>=Math.pow(10,n)&&n++,e+n+t}});var uX=C((wBe,cX)=>{var{Writable:YCe,Readable:VCe,getStreamError:oX}=wC(),qCe=EC(),aX=dc(),Rc=PC(),XCe=aX.alloc(0),vC=class{constructor(){this.buffered=0,this.shifted=0,this.queue=new qCe,this._offset=0}push(e){this.buffered+=e.byteLength,this.queue.push(e)}shiftFirst(e){return this._buffered===0?null:this._next(e)}shift(e){if(e>this.buffered)return null;if(e===0)return XCe;let n=this._next(e);if(e===n.byteLength)return n;let r=[n];for(;(e-=n.byteLength)>0;)n=this._next(e),r.push(n);return aX.concat(r)}_next(e){let n=this.queue.peek(),r=n.byteLength-this._offset;if(e>=r){let i=this._offset?n.subarray(this._offset,n.byteLength):n;return this.queue.shift(),this._offset=0,this.buffered-=r,this.shifted+=r,i}return this.buffered-=e,this.shifted+=e,n.subarray(this._offset,this._offset+=e)}},MC=class extends VCe{constructor(e,n,r){super(),this.header=n,this.offset=r,this._parent=e}_read(e){this.header.size===0&&this.push(null),this._parent._stream===this&&this._parent._update(),e(null)}_predestroy(){this._parent.destroy(oX(this))}_detach(){this._parent._stream===this&&(this._parent._stream=null,this._parent._missing=lX(this.header.size),this._parent._update())}_destroy(e){this._detach(),e(null)}},UC=class extends YCe{constructor(e){super(e),e||(e={}),this._buffer=new vC,this._offset=0,this._header=null,this._stream=null,this._missing=0,this._longHeader=!1,this._callback=xC,this._locked=!1,this._finished=!1,this._pax=null,this._paxGlobal=null,this._gnuLongPath=null,this._gnuLongLinkPath=null,this._filenameEncoding=e.filenameEncoding||"utf-8",this._allowUnknownFormat=!!e.allowUnknownFormat,this._unlockBound=this._unlock.bind(this)}_unlock(e){if(this._locked=!1,e){this.destroy(e),this._continueWrite(e);return}this._update()}_consumeHeader(){if(this._locked)return!1;this._offset=this._buffer.shifted;try{this._header=Rc.decode(this._buffer.shift(512),this._filenameEncoding,this._allowUnknownFormat)}catch(e){return this._continueWrite(e),!1}if(!this._header)return!0;switch(this._header.type){case"gnu-long-path":case"gnu-long-link-path":case"pax-global-header":case"pax-header":return this._longHeader=!0,this._missing=this._header.size,!0}return this._locked=!0,this._applyLongHeaders(),this._header.size===0||this._header.type==="directory"?(this.emit("entry",this._header,this._createStream(),this._unlockBound),!0):(this._stream=this._createStream(),this._missing=this._header.size,this.emit("entry",this._header,this._stream,this._unlockBound),!0)}_applyLongHeaders(){this._gnuLongPath&&(this._header.name=this._gnuLongPath,this._gnuLongPath=null),this._gnuLongLinkPath&&(this._header.linkname=this._gnuLongLinkPath,this._gnuLongLinkPath=null),this._pax&&(this._pax.path&&(this._header.name=this._pax.path),this._pax.linkpath&&(this._header.linkname=this._pax.linkpath),this._pax.size&&(this._header.size=parseInt(this._pax.size,10)),this._header.pax=this._pax,this._pax=null)}_decodeLongHeader(e){switch(this._header.type){case"gnu-long-path":this._gnuLongPath=Rc.decodeLongPath(e,this._filenameEncoding);break;case"gnu-long-link-path":this._gnuLongLinkPath=Rc.decodeLongPath(e,this._filenameEncoding);break;case"pax-global-header":this._paxGlobal=Rc.decodePax(e);break;case"pax-header":this._pax=this._paxGlobal===null?Rc.decodePax(e):Object.assign({},this._paxGlobal,Rc.decodePax(e));break}}_consumeLongHeader(){this._longHeader=!1,this._missing=lX(this._header.size);let e=this._buffer.shift(this._header.size);try{this._decodeLongHeader(e)}catch(n){return this._continueWrite(n),!1}return!0}_consumeStream(){let e=this._buffer.shiftFirst(this._missing);if(e===null)return!1;this._missing-=e.byteLength;let n=this._stream.push(e);return this._missing===0?(this._stream.push(null),n&&this._stream._detach(),n&&this._locked===!1):n}_createStream(){return new MC(this,this._header,this._offset)}_update(){for(;this._buffer.buffered>0&&!this.destroying;){if(this._missing>0){if(this._stream!==null){if(this._consumeStream()===!1)return;continue}if(this._longHeader===!0){if(this._missing>this._buffer.buffered)break;if(this._consumeLongHeader()===!1)return!1;continue}let e=this._buffer.shiftFirst(this._missing);e!==null&&(this._missing-=e.byteLength);continue}if(this._buffer.buffered<512)break;if(this._stream!==null||this._consumeHeader()===!1)return}this._continueWrite(null)}_continueWrite(e){let n=this._callback;this._callback=xC,n(e)}_write(e,n){this._callback=n,this._buffer.push(e),this._update()}_final(e){this._finished=this._missing===0&&this._buffer.buffered===0,e(this._finished?null:new Error("Unexpected end of data"))}_predestroy(){this._continueWrite(null)}_destroy(e){this._stream&&this._stream.destroy(oX(this)),e(null)}[Symbol.asyncIterator](){let e=null,n=null,r=null,i=null,s=null,o=this;return this.on("entry",c),this.on("error",E=>{e=E}),this.on("close",u),{[Symbol.asyncIterator](){return this},next(){return new Promise(l)},return(){return d(null)},throw(E){return d(E)}};function a(E){if(!s)return;let f=s;s=null,f(E)}function l(E,f){if(e)return f(e);if(i){E({value:i,done:!1}),i=null;return}n=E,r=f,a(null),o._finished&&n&&(n({value:void 0,done:!0}),n=r=null)}function c(E,f,p){s=p,f.on("error",xC),n?(n({value:f,done:!1}),n=r=null):i=f}function u(){a(e),n&&(e?r(e):n({value:void 0,done:!0}),n=r=null)}function d(E){return o.destroy(E),a(E),new Promise((f,p)=>{if(o.destroyed)return f({value:void 0,done:!0});o.once("close",function(){E?p(E):f({value:void 0,done:!0})})})}}};cX.exports=function(e){return new UC(e)};function xC(){}function lX(t){return t&=511,t&&512-t}});var fX=C((LBe,BC)=>{var dX={S_IFMT:61440,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960};try{BC.exports=require("fs").constants||dX}catch{BC.exports=dX}});var SX=C((DBe,TX)=>{var{Readable:zCe,Writable:jCe,getStreamError:EX}=wC(),Sa=dc(),Ac=fX(),cS=PC(),KCe=493,JCe=420,hX=Sa.alloc(1024),HC=class extends jCe{constructor(e,n,r){super({mapWritable:ZCe,eagerOpen:!0}),this.written=0,this.header=n,this._callback=r,this._linkname=null,this._isLinkname=n.type==="symlink"&&!n.linkname,this._isVoid=n.type!=="file"&&n.type!=="contiguous-file",this._finished=!1,this._pack=e,this._openCallback=null,this._pack._stream===null?this._pack._stream=this:this._pack._pending.push(this)}_open(e){this._openCallback=e,this._pack._stream===this&&this._continueOpen()}_continuePack(e){if(this._callback===null)return;let n=this._callback;this._callback=null,n(e)}_continueOpen(){this._pack._stream===null&&(this._pack._stream=this);let e=this._openCallback;if(this._openCallback=null,e!==null){if(this._pack.destroying)return e(new Error("pack stream destroyed"));if(this._pack._finalized)return e(new Error("pack stream is already finalized"));this._pack._stream=this,this._isLinkname||this._pack._encode(this.header),this._isVoid&&(this._finish(),this._continuePack(null)),e(null)}}_write(e,n){if(this._isLinkname)return this._linkname=this._linkname?Sa.concat([this._linkname,e]):e,n(null);if(this._isVoid)return e.byteLength>0?n(new Error("No body allowed for this entry")):n();if(this.written+=e.byteLength,this._pack.push(e))return n();this._pack._drain=n}_finish(){this._finished||(this._finished=!0,this._isLinkname&&(this.header.linkname=this._linkname?Sa.toString(this._linkname,"utf-8"):"",this._pack._encode(this.header)),pX(this._pack,this.header.size),this._pack._done(this))}_final(e){if(this.written!==this.header.size)return e(new Error("Size mismatch"));this._finish(),e(null)}_getError(){return EX(this)||new Error("tar entry destroyed")}_predestroy(){this._pack.destroy(this._getError())}_destroy(e){this._pack._done(this),this._continuePack(this._finished?null:this._getError()),e()}},GC=class extends zCe{constructor(e){super(e),this._drain=FC,this._finalized=!1,this._finalizing=!1,this._pending=[],this._stream=null}entry(e,n,r){if(this._finalized||this.destroying)throw new Error("already finalized or destroyed");typeof n=="function"&&(r=n,n=null),r||(r=FC),(!e.size||e.type==="symlink")&&(e.size=0),e.type||(e.type=QCe(e.mode)),e.mode||(e.mode=e.type==="directory"?KCe:JCe),e.uid||(e.uid=0),e.gid||(e.gid=0),e.mtime||(e.mtime=new Date),typeof n=="string"&&(n=Sa.from(n));let i=new HC(this,e,r);return Sa.isBuffer(n)?(e.size=n.byteLength,i.write(n),i.end(),i):(i._isVoid,i)}finalize(){if(this._stream||this._pending.length>0){this._finalizing=!0;return}this._finalized||(this._finalized=!0,this.push(hX),this.push(null))}_done(e){e===this._stream&&(this._stream=null,this._finalizing&&this.finalize(),this._pending.length&&this._pending.shift()._continueOpen())}_encode(e){if(!e.pax){let n=cS.encode(e);if(n){this.push(n);return}}this._encodePax(e)}_encodePax(e){let n=cS.encodePax({name:e.name,linkname:e.linkname,pax:e.pax}),r={name:"PaxHeader",mode:e.mode,uid:e.uid,gid:e.gid,size:n.byteLength,mtime:e.mtime,type:"pax-header",linkname:e.linkname&&"PaxHeader",uname:e.uname,gname:e.gname,devmajor:e.devmajor,devminor:e.devminor};this.push(cS.encode(r)),this.push(n),pX(this,n.byteLength),r.size=e.size,r.type=e.type,this.push(cS.encode(r))}_doDrain(){let e=this._drain;this._drain=FC,e()}_predestroy(){let e=EX(this);for(this._stream&&this._stream.destroy(e);this._pending.length;){let n=this._pending.shift();n.destroy(e),n._continueOpen()}this._doDrain()}_read(e){this._doDrain(),e()}};TX.exports=function(e){return new GC(e)};function QCe(t){switch(t&Ac.S_IFMT){case Ac.S_IFBLK:return"block-device";case Ac.S_IFCHR:return"character-device";case Ac.S_IFDIR:return"directory";case Ac.S_IFIFO:return"fifo";case Ac.S_IFLNK:return"symlink"}return"file"}function FC(){}function pX(t,e){e&=511,e&&t.push(hX.subarray(0,512-e))}function ZCe(t){return Sa.isBuffer(t)?t:Sa.from(t)}});var RX=C(WC=>{WC.extract=uX();WC.pack=SX()});var gX=C((xBe,mX)=>{var eye=require("zlib"),tye=RX(),AX=yl(),ls=function(t){if(!(this instanceof ls))return new ls(t);t=this.options=AX.defaults(t,{gzip:!1}),typeof t.gzipOptions!="object"&&(t.gzipOptions={}),this.supports={directory:!0,symlink:!0},this.engine=tye.pack(t),this.compressor=!1,t.gzip&&(this.compressor=eye.createGzip(t.gzipOptions),this.compressor.on("error",this._onCompressorError.bind(this)))};ls.prototype._onCompressorError=function(t){this.engine.emit("error",t)};ls.prototype.append=function(t,e,n){var r=this;e.mtime=e.date;function i(o,a){if(o){n(o);return}r.engine.entry(e,a,function(l){n(l,e)})}if(e.sourceType==="buffer")i(null,t);else if(e.sourceType==="stream"&&e.stats){e.size=e.stats.size;var s=r.engine.entry(e,function(o){n(o,e)});t.pipe(s)}else e.sourceType==="stream"&&AX.collectStream(t,i)};ls.prototype.finalize=function(){this.engine.finalize()};ls.prototype.on=function(){return this.engine.on.apply(this.engine,arguments)};ls.prototype.pipe=function(t,e){return this.compressor?this.engine.pipe.apply(this.engine,[this.compressor]).pipe(t,e):this.engine.pipe.apply(this.engine,arguments)};ls.prototype.unpipe=function(){return this.compressor?this.compressor.unpipe.apply(this.compressor,arguments):this.engine.unpipe.apply(this.engine,arguments)};mX.exports=ls});var NX=C((vBe,_X)=>{"use strict";function nye(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var rye=new Int32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]);function IX(t){if(Buffer.isBuffer(t))return t;if(typeof t=="number")return Buffer.alloc(t);if(typeof t=="string")return Buffer.from(t);throw new Error("input must be buffer, number, or string, received "+typeof t)}function iye(t){let e=IX(4);return e.writeInt32BE(t,0),e}function $C(t,e){t=IX(t),Buffer.isBuffer(e)&&(e=e.readUInt32BE(0));let n=~~e^-1;for(var r=0;r<t.length;r++)n=rye[(n^t[r])&255]^n>>>8;return n^-1}function kC(){return iye($C.apply(null,arguments))}kC.signed=function(){return $C.apply(null,arguments)};kC.unsigned=function(){return $C.apply(null,arguments)>>>0};var sye=kC,oye=nye(sye);_X.exports=oye});var bX=C((MBe,yX)=>{var aye=require("util").inherits,OX=D_().Transform,lye=NX(),CX=yl(),eo=function(t){if(!(this instanceof eo))return new eo(t);t=this.options=CX.defaults(t,{}),OX.call(this,t),this.supports={directory:!0,symlink:!0},this.files=[]};aye(eo,OX);eo.prototype._transform=function(t,e,n){n(null,t)};eo.prototype._writeStringified=function(){var t=JSON.stringify(this.files);this.write(t)};eo.prototype.append=function(t,e,n){var r=this;e.crc32=0;function i(s,o){if(s){n(s);return}e.size=o.length||0,e.crc32=lye.unsigned(o),r.files.push(e),n(null,e)}e.sourceType==="buffer"?i(null,t):e.sourceType==="stream"&&CX.collectStream(t,i)};eo.prototype.finalize=function(){this._writeStringified(),this.end()};yX.exports=eo});var YC=C((UBe,wX)=>{var cye=dW(),Qd={},to=function(t,e){return to.create(t,e)};to.create=function(t,e){if(Qd[t]){var n=new cye(t,e);return n.setFormat(t),n.setModule(new Qd[t](e)),n}else throw new Error("create("+t+"): format not registered")};to.registerFormat=function(t,e){if(Qd[t])throw new Error("register("+t+"): format already registered");if(typeof e!="function")throw new Error("register("+t+"): format module invalid");if(typeof e.prototype.append!="function"||typeof e.prototype.finalize!="function")throw new Error("register("+t+"): format module missing methods");Qd[t]=e};to.isRegisteredFormat=function(t){return!!Qd[t]};to.registerFormat("zip",mq());to.registerFormat("tar",gX());to.registerFormat("json",bX());wX.exports=to});var Ra,cs,VC=G(()=>{"use strict";Ra=require("buffer"),cs=class{constructor(e=65536){this.chunkSize=e,this.chunks=[],this.currentBuffer=Ra.Buffer.alloc(e),this.cursor=0}ensureCapacity(e){this.cursor+e>this.chunkSize&&this._flush()}_ensureCapacity(e){this.ensureCapacity(e)}_flush(){this.cursor>0&&(this.chunks.push(this.currentBuffer.subarray(0,this.cursor)),this.currentBuffer=Ra.Buffer.alloc(this.chunkSize),this.cursor=0)}write(e){let n=e.length,r=0;for(;n>0;){let i=this.chunkSize-this.cursor;i===0&&(this._flush(),i=this.chunkSize);let s=Math.min(n,i);e.copy(this.currentBuffer,this.cursor,r,r+s),this.cursor+=s,r+=s,n-=s}}writeByte(e){this._ensureCapacity(1),this.currentBuffer[this.cursor]=e,this.cursor++}writeUnsafeByte(e){this.currentBuffer[this.cursor++]=e}writeInt32LE(e){this._ensureCapacity(4),this.currentBuffer.writeInt32LE(e,this.cursor),this.cursor+=4}writeUnsafeInt32LE(e){this.currentBuffer.writeInt32LE(e,this.cursor),this.cursor+=4}writeDoubleLE(e){this._ensureCapacity(8),this.currentBuffer.writeDoubleLE(e,this.cursor),this.cursor+=8}writeUnsafeDoubleLE(e){this.currentBuffer.writeDoubleLE(e,this.cursor),this.cursor+=8}writeString(e){let n=Ra.Buffer.byteLength(e,"utf8");if(this.cursor+n<=this.chunkSize){this.cursor+=this.currentBuffer.write(e,this.cursor,"utf8");return}this._flush(),n>this.chunkSize?this.chunks.push(Ra.Buffer.from(e,"utf8")):this.cursor+=this.currentBuffer.write(e,this.cursor,"utf8")}writeUtf16LE(e){let n=e.length*2;if(this.cursor+n<=this.chunkSize){for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);this.currentBuffer[this.cursor++]=i&255,this.currentBuffer[this.cursor++]=i>>8&255}return}if(this._flush(),n>this.chunkSize)this.chunks.push(Ra.Buffer.from(e,"utf16le"));else for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);this.currentBuffer[this.cursor++]=i&255,this.currentBuffer[this.cursor++]=i>>8&255}}getChunks(){return this.cursor>0&&(this.chunks.push(this.currentBuffer.subarray(0,this.cursor)),this.currentBuffer=Ra.Buffer.alloc(this.chunkSize),this.cursor=0),this.chunks}reset(){this.chunks=[],this.cursor=0}}});var PX={};ht(PX,{XlsbWriter:()=>dS,default:()=>dye});var LX,DX,uS,uye,dS,dye,xX=G(()=>{"use strict";LX=z(require("fs")),DX=z(YC()),uS=require("stream");VC();uye=/[\\/*?[\]:]/g,dS=class{constructor(e){this.sheetCount=0;this.sheetList=[];this.sstDic=new Map;this.sstCntUnique=0;this.sstCntAll=0;this.colWidths=[];this._autofilterIsOn=!1;this.currentSheetBuffer=null;this.currentSheetRowNum=0;this.currentSheetStartCol=0;this.currentSheetEndCol=0;this.currentSheetDoAutofilter=!1;this.isStreaming=!1;this.filePath=e,this.output=LX.createWriteStream(e),this.archive=(0,DX.default)("zip"),this.archive.pipe(this.output),this._oaEpoch=Date.UTC(1899,11,30),this._sheet1Bytes=Buffer.from([129,1,0,147,1,23,203,4,2,0,64,0,0,0,0,0,0,255,255,255,255,255,255,255,255,0,0,0,0,148,1,16,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,133,1,0,137,1,30,220,3,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,100,0,0,0,0,0,0,0,0,0,0,0,152,1,36,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,1,0,134,1,0,37,6,1,0,2,14,0,128,149,8,2,5,0,38,0,229,3,12,255,255,255,255,8,0,44,1,0,0,0,0,145,1,0,37,6,1,0,2,14,0,128,128,8,2,5,0,38,0,0,25,0,0,0,0,0,0,0,0,44,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,7,12,0,0,0,0,0,0,0,0,0,0,0,0,146,1,0,151,4,66,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,221,3,2,16,0,220,3,48,102,102,102,102,102,102,230,63,102,102,102,102,102,102,230,63,0,0,0,0,0,0,232,63,0,0,0,0,0,0,232,63,51,51,51,51,51,51,211,63,51,51,51,51,51,51,211,63,37,6,1,0,0,16,0,128,128,24,16,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,38,0,130,1,0]),this._workbookBinStart=Buffer.from([131,1,0,128,1,50,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,120,0,108,0,1,0,0,0,55,0,1,0,0,0,54,0,5,0,0,0,50,0,52,0,51,0,50,0,54,0,153,1,12,32,0,1,0,0,0,0,0,0,0,0,0,37,6,1,0,3,15,0,128,151,16,52,24,0,0,0,67,0,58,0,92,0,115,0,113,0,108,0,115,0,92,0,84,0,101,0,115,0,116,0,121,0,90,0,97,0,112,0,105,0,115,0,117,0,88,0,108,0,115,0,98,0,92,0,38,0,37,6,1,0,0,16,0,128,129,24,130,1,0,0,0,0,0,0,0,0,47,0,0,0,49,0,51,0,95,0,110,0,99,0,114,0,58,0,49,0,95,0,123,0,49,0,54,0,53,0,48,0,56,0,68,0,54,0,57,0,45,0,67,0,70,0,56,0,55,0,45,0,52,0,55,0,54,0,57,0,45,0,56,0,52,0,53,0,54,0,45,0,68,0,52,0,65,0,52,0,48,0,49,0,49,0,51,0,49,0,53,0,54,0,55,0,125,0,47,0,0,0,47,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,38,0,135,1,0,37,6,1,0,2,16,0,128,128,24,16,0,0,0,0,13,0,0,0,255,255,255,255,0,0,0,0,38,0,158,1,29,0,0,0,0,158,22,0,0,180,105,0,0,232,38,0,0,88,2,0,0,0,0,0,0,0,0,0,0,120,136,1,0,143,1,0]),this._workbookBinMiddle=Buffer.from([144,1,0]),this._workbookBinEnd=Buffer.from([157,1,26,53,234,2,0,1,0,0,0,100,0,0,0,252,169,241,210,77,98,80,63,1,0,0,0,106,0,155,1,1,0,35,4,3,15,0,0,171,16,1,1,36,0,132,1,0]),this._stylesBin=Buffer.from([150,2,0,231,4,4,2,0,0,0,44,44,164,0,19,0,0,0,121,0,121,0,121,0,121,0,92,0,45,0,109,0,109,0,92,0,45,0,100,0,100,0,92,0,32,0,104,0,104,0,58,0,109,0,109,0,44,30,166,0,12,0,0,0,121,0,121,0,121,0,121,0,92,0,45,0,109,0,109,0,92,0,45,0,100,0,100,0,232,4,0,227,4,4,1,0,0,0,43,39,220,0,0,0,144,1,0,0,0,2,0,0,7,1,0,0,0,0,0,255,2,7,0,0,0,67,0,97,0,108,0,105,0,98,0,114,0,105,0,43,39,220,0,1,0,188,2,0,0,0,2,238,0,7,1,0,0,0,0,0,255,2,7,0,0,0,67,0,97,0,108,0,105,0,98,0,114,0,105,0,37,6,1,0,2,14,0,128,129,8,0,38,0,228,4,0,219,4,4,2,0,0,0,45,68,0,0,0,0,3,64,0,0,0,0,0,255,3,65,0,0,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,45,68,17,0,0,0,3,64,0,0,0,0,0,255,3,65,0,0,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,220,4,0,229,4,4,1,0,0,0,46,51,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,230,4,0,242,4,4,1,0,0,0,47,16,255,255,0,0,0,0,0,0,0,0,0,0,16,16,0,0,243,4,0,233,4,4,4,0,0,0,47,16,0,0,0,0,0,0,0,0,0,0,0,0,16,16,0,0,47,16,0,0,164,0,0,0,0,0,0,0,0,0,16,16,1,0,47,16,0,0,166,0,0,0,0,0,0,0,0,0,16,16,1,0,47,16,0,0,0,1,1,0,0,0,0,0,0,0,16,16,0,0,234,4,0,235,4,4,1,0,0,0,37,6,1,0,2,17,0,128,128,24,16,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,38,0,48,28,0,0,0,0,1,0,0,0,8,0,0,0,78,0,111,0,114,0,109,0,97,0,108,0,110,0,121,0,236,4,0,249,3,4,0,0,0,0,250,3,0,252,3,80,0,0,0,0,17,0,0,0,84,0,97,0,98,0,108,0,101,0,83,0,116,0,121,0,108,0,101,0,77,0,101,0,100,0,105,0,117,0,109,0,50,0,17,0,0,0,80,0,105,0,118,0,111,0,116,0,83,0,116,0,121,0,108,0,101,0,76,0,105,0,103,0,104,0,116,0,49,0,54,0,253,3,0,35,4,2,14,0,0,235,8,0,246,8,42,0,0,0,0,17,0,0,0,83,0,108,0,105,0,99,0,101,0,114,0,83,0,116,0,121,0,108,0,101,0,76,0,105,0,103,0,104,0,116,0,49,0,247,8,0,236,8,0,36,0,35,4,3,15,0,0,176,16,0,178,16,50,0,0,0,0,21,0,0,0,84,0,105,0,109,0,101,0,83,0,108,0,105,0,99,0,101,0,114,0,83,0,116,0,121,0,108,0,101,0,76,0,105,0,103,0,104,0,116,0,49,0,179,16,0,177,16,0,36,0,151,2,0]),this._binaryIndexBin=Buffer.from([42,24,0,0,0,0,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,149,2,0]),this._rRkIntegerLowerLimit=-1<<29,this._rRkIntegerUpperLimit=(1<<29)-1,this._autoFilterStartBytes=Buffer.from([161,1,16]),this._autoFilterEndBytes=Buffer.from([162,1,0]),this._stickHeaderA1bytes=Buffer.from([151,1,29,0,0,0,0,0,0,0,0,0,0,0,0,0,0,240,63,1,0,0,0,0,0,0,0,2,0,0,0,3]),this._magicFilterExcel2016Fix0=Buffer.from([225,2,0,229,2,0,234,2]),this._magicFilterExcel2016Fix1=Buffer.from([39,70,33,0,0,0,0,255,0,0,0,15,0,0,0,95,0,70,0,105,0,108,0,116,0,101,0,114,0,68,0,97,0,116,0,97,0,98,0,97,0,115,0,101,0,15,0,0,0,59,255,0]),this._magicFilterExcel2016Fix2=Buffer.from([0,0,0,0,255,255,255,255])}_sanitizeSheetName(e){if(!e||typeof e!="string")return`Sheet${this.sheetCount+1}`;let n=e.replace(uye,"_");return n.length>31&&(n=n.substring(0,31)),n.trim().length===0&&(n=`Sheet${this.sheetCount+1}`),n}addSheet(e,n=!1){let r=this._sanitizeSheetName(e);this.sheetCount++,this.sheetList.push({name:r,pathInArchive:`xl/worksheets/sheet${this.sheetCount}.bin`,hidden:n,nameInArchive:`sheet${this.sheetCount}.bin`,sheetId:this.sheetCount,filterHeaderRange:null})}startSheet(e,n,r,i={}){if(this.isStreaming)throw new Error("Already in streaming mode. Call endSheet() first.");let{hidden:s=!1,doAutofilter:o=!0}=i;this.addSheet(e,s),this.isStreaming=!0,this.currentSheetBuffer=new cs,this.currentSheetRowNum=0,this.currentSheetStartCol=0,this.currentSheetEndCol=n,this.currentSheetDoAutofilter=o&&r!==void 0;let a=this.currentSheetBuffer;if(this.colWidths=new Array(n).fill(-1),r)for(let c=0;c<n;c++){let d=1.25*(r[c]?r[c].length:0)+2;d>80&&(d=80),this.colWidths[c]<d&&(this.colWidths[c]=d)}let l=Buffer.from(this._sheet1Bytes);l.writeInt32LE(this.currentSheetStartCol,40),l.writeInt32LE(this.currentSheetEndCol,44),this.sheetCount!==1&&(l[54]=156),a.write(l.subarray(0,84)),this.currentSheetDoAutofilter&&a.write(this._stickHeaderA1bytes),a.write(l.subarray(84,159)),a.writeByte(134),a.writeByte(3);for(let c=this.currentSheetStartCol;c<this.currentSheetEndCol;c++){a.writeByte(0),a.writeByte(60),a.writeByte(18),a.writeInt32LE(c),a.writeInt32LE(c);let u=this.colWidths[c]>0?Math.floor(this.colWidths[c]):10;a.writeByte(0),a.writeByte(Math.max(0,Math.min(255,u))),a.writeByte(0),a.writeByte(0),a.writeByte(0),a.writeByte(0),a.writeByte(0),a.writeByte(0),a.writeByte(2)}if(a.writeByte(0),a.writeByte(135),a.writeByte(3),a.writeByte(0),a.write(l.subarray(159,175)),a.write(Buffer.from([38,0])),r){this.createRowHeader(a,this.currentSheetRowNum,this.currentSheetStartCol,this.currentSheetEndCol);for(let c=0;c<r.length;c++)this.writeString(a,r[c],c,!0);this.currentSheetRowNum++}}writeRow(e){if(!this.isStreaming||!this.currentSheetBuffer)throw new Error("Not in streaming mode. Call startSheet() first.");if(e.length!==this.currentSheetEndCol-this.currentSheetStartCol)throw new Error(`Row length mismatch. Expected ${this.currentSheetEndCol-this.currentSheetStartCol} columns, got ${e.length}`);let n=this.currentSheetBuffer;this.createRowHeader(n,this.currentSheetRowNum,this.currentSheetStartCol,this.currentSheetEndCol);for(let r=0;r<e.length;r++){let i=e[r];i!=null&&(typeof i=="number"?Number.isInteger(i)?i>=this._rRkIntegerLowerLimit&&i<=this._rRkIntegerUpperLimit?this.writeRkNumberInteger(n,i,r):this.writeDouble(n,i,r):this.writeDouble(n,i,r):typeof i=="bigint"?this.writeString(n,i.toString(),r):typeof i=="boolean"?this.writeBool(n,i,r):i instanceof Date?this.writeDateTime(n,i,r):this.writeString(n,i.toString(),r))}this.currentSheetRowNum++}endSheet(){if(!this.isStreaming||!this.currentSheetBuffer)throw new Error("Not in streaming mode. Call startSheet() first.");let e=this.currentSheetBuffer,n=Buffer.from(this._sheet1Bytes);if(e.write(n.subarray(218,290)),this.currentSheetDoAutofilter){this._autofilterIsOn=!0;let r=this.currentSheetRowNum;e.write(this._autoFilterStartBytes);let i=Buffer.alloc(8);i.writeInt32LE(0,0),i.writeInt32LE(r-1,4),e.write(i);let s=Buffer.alloc(8);s.writeInt32LE(this.currentSheetStartCol,0),s.writeInt32LE(this.currentSheetEndCol-1,4),e.write(s),e.write(this._autoFilterEndBytes);let o=this.sheetList[this.sheetCount-1];o.filterData={startRow:0,endRow:this.currentSheetRowNum-1,startColumn:this.currentSheetStartCol,endColumn:this.currentSheetEndCol-1}}e.write(n.subarray(290)),this.archive.append(uS.Readable.from(e.getChunks()),{name:this.sheetList[this.sheetCount-1].pathInArchive}),this.isStreaming=!1,this.currentSheetBuffer=null,this.currentSheetRowNum=0,this.currentSheetStartCol=0,this.currentSheetEndCol=0,this.currentSheetDoAutofilter=!1}writeSheet(e,n=null,r=!0){let i=new cs,s=0;if(e.length>0?s=e[0].length:n&&(s=n.length),this.colWidths=new Array(s).fill(-1),n)for(let u=0;u<s;u++){let E=1.25*(n[u]?n[u].length:0)+2;E>80&&(E=80),this.colWidths[u]<E&&(this.colWidths[u]=E)}for(let u=0;u<Math.min(e.length,100);u++){let d=e[u];for(let E=0;E<d.length;E++){let f=d[E],h=1.25*(f?f.toString().length:0)+2;h>80&&(h=80),this.colWidths[E]<h&&(this.colWidths[E]=h)}}let o=Buffer.from(this._sheet1Bytes),a=0,l=s;o.writeInt32LE(a,40),o.writeInt32LE(l,44),this.sheetCount!==1&&(o[54]=156),i.write(o.subarray(0,84)),r&&n&&i.write(this._stickHeaderA1bytes),i.write(o.subarray(84,159)),i.writeByte(134),i.writeByte(3);for(let u=a;u<l;u++){i.writeByte(0),i.writeByte(60),i.writeByte(18),i.writeInt32LE(u),i.writeInt32LE(u);let d=this.colWidths[u]>0?Math.floor(this.colWidths[u]):10;i.writeByte(0),i.writeByte(Math.max(0,Math.min(255,d))),i.writeByte(0),i.writeByte(0),i.writeByte(0),i.writeByte(0),i.writeByte(0),i.writeByte(0),i.writeByte(2)}i.writeByte(0),i.writeByte(135),i.writeByte(3),i.writeByte(0),i.write(o.subarray(159,175)),i.write(Buffer.from([38,0]));let c=0;if(n){this.createRowHeader(i,c,a,l);for(let u=0;u<n.length;u++)this.writeString(i,n[u],u,!0);c++}for(let u=0;u<e.length;u++){this.createRowHeader(i,c,a,l);let d=e[u];for(let E=0;E<d.length;E++){let f=d[E];f!=null&&(typeof f=="number"?Number.isInteger(f)?f>=this._rRkIntegerLowerLimit&&f<=this._rRkIntegerUpperLimit?this.writeRkNumberInteger(i,f,E):this.writeDouble(i,f,E):this.writeDouble(i,f,E):typeof f=="bigint"?this.writeString(i,f.toString(),E):typeof f=="boolean"?this.writeBool(i,f,E):f instanceof Date?this.writeDateTime(i,f,E):this.writeString(i,f.toString(),E))}c++}if(i.write(o.subarray(218,290)),r&&n){this._autofilterIsOn=!0;let u=e.length+1;i.write(this._autoFilterStartBytes);let d=Buffer.alloc(8);d.writeInt32LE(0,0),d.writeInt32LE(u-1,4),i.write(d);let E=Buffer.alloc(8);E.writeInt32LE(a,0),E.writeInt32LE(l-1,4),i.write(E),i.write(this._autoFilterEndBytes);let f=this.sheetList[this.sheetCount-1];f.filterData={startRow:0,endRow:e.length,startColumn:a,endColumn:l-1}}i.write(o.subarray(290)),this.archive.append(uS.Readable.from(i.getChunks()),{name:this.sheetList[this.sheetCount-1].pathInArchive})}_getColumnLetter(e){if(e<26)return String.fromCharCode(65+e);if(e<702){let n=Math.floor(e/26)-1,r=e%26;return String.fromCharCode(65+n)+String.fromCharCode(65+r)}return"A"}createRowHeader(e,n,r,i){e.ensureCapacity(27),e.writeUnsafeByte(0),e.writeUnsafeByte(25),e.writeUnsafeInt32LE(n),e.writeUnsafeInt32LE(0),e.writeUnsafeByte(44),e.writeUnsafeByte(1),e.writeUnsafeByte(0),e.writeUnsafeByte(0),e.writeUnsafeByte(0),e.writeUnsafeByte(1),e.writeUnsafeByte(0),e.writeUnsafeByte(0),e.writeUnsafeByte(0),e.writeUnsafeInt32LE(r),e.writeUnsafeInt32LE(i)}writeRkNumberInteger(e,n,r,i=0){e.ensureCapacity(14),e.writeUnsafeByte(2),e.writeUnsafeByte(12),e.writeUnsafeInt32LE(r),e.writeUnsafeByte(i),e.writeUnsafeByte(0),e.writeUnsafeByte(0),e.writeUnsafeByte(0);let s=n<<2|2;e.writeUnsafeInt32LE(s)}writeDouble(e,n,r,i=0){e.ensureCapacity(18),e.writeUnsafeByte(5),e.writeUnsafeByte(16),e.writeUnsafeInt32LE(r),e.writeUnsafeByte(i),e.writeUnsafeByte(0),e.writeUnsafeByte(0),e.writeUnsafeByte(0),e.writeUnsafeDoubleLE(n)}writeBool(e,n,r){e.ensureCapacity(13),e.writeUnsafeByte(4),e.writeUnsafeByte(9),e.writeUnsafeInt32LE(r),e.writeUnsafeInt32LE(0),e.writeUnsafeByte(n?1:0)}writeDateTime(e,n,r){let i=n.getTimezoneOffset()*6e4,s=(n.getTime()-i-this._oaEpoch)/864e5;this.writeDouble(e,s,r,1)}writeString(e,n,r,i=!1){let s;this.sstDic.has(n)?s=this.sstDic.get(n):(s=this.sstCntUnique,this.sstDic.set(n,s),this.sstCntUnique++),this.sstCntAll++,e.ensureCapacity(17),e.writeUnsafeByte(7),e.writeUnsafeByte(12),e.writeUnsafeInt32LE(r),e.writeUnsafeByte(i?3:0),e.writeUnsafeByte(0),e.writeUnsafeByte(0),e.writeUnsafeByte(0),e.writeUnsafeInt32LE(s)}saveSst(){let e=new cs;e.writeByte(159),e.writeByte(1),e.writeByte(8),e.writeInt32LE(this.sstCntUnique),e.writeInt32LE(this.sstCntAll);for(let[n]of this.sstDic){let r=n.length;e.writeByte(19);let i=5+2*r;if(i>=128){e.writeByte(128+i%128);let s=i>>7;s>=256?e.writeByte(128+s%128):e.writeByte(s),e.writeByte(i>>14),i>>14>0&&e.writeByte(0)}else e.writeByte(i&255),e.writeByte(i>>8&255);e.writeInt32LE(r),e.writeUtf16LE(n)}e.writeByte(160),e.writeByte(1),e.writeByte(0),this.archive.append(uS.Readable.from(e.getChunks()),{name:"xl/sharedStrings.bin"})}_writeFilterDefinedName(e,n,r){let i=n.filterData,s=n.sheetId-1,o=Buffer.alloc(this._magicFilterExcel2016Fix1.length);this._magicFilterExcel2016Fix1.copy(o);let a=this._magicFilterExcel2016Fix1.length-2;o[7]=s,o[a]=r,e.push(o);let l=Buffer.alloc(8);l.writeInt32LE(i.startRow,0),l.writeInt32LE(i.endRow,4),e.push(l);let c=Buffer.alloc(4);c.writeInt16LE(i.startColumn,0),c.writeInt16LE(i.endColumn,2),e.push(c),e.push(this._magicFilterExcel2016Fix2)}finalize(){return new Promise((e,n)=>{try{this.saveSst(),this.archive.append(this._stylesBin,{name:"xl/styles.bin"});let r=[];r.push(this._workbookBinStart);for(let a of this.sheetList){let l=`rId${a.sheetId}`,c=16+a.name.length*2+l.length*2,u=Buffer.alloc(3+c);u[0]=156,u[1]=1,u[2]=c;let d=3;u.writeInt32LE(a.hidden?1:0,d),d+=4,u.writeInt32LE(a.sheetId,d),d+=4,u.writeInt32LE(l.length,d),d+=4;for(let E=0;E<l.length;E++){let f=l.charCodeAt(E);u[d++]=f&255,u[d++]=f>>8&255}u.writeInt32LE(a.name.length,d),d+=4;for(let E=0;E<a.name.length;E++){let f=a.name.charCodeAt(E);u[d++]=f&255,u[d++]=f>>8&255}r.push(u)}if(r.push(this._workbookBinMiddle),this._autofilterIsOn){let a=this.sheetList.filter(c=>c.filterData),l=a.length;if(l>0){r.push(this._magicFilterExcel2016Fix0);let c=16+(l-1)*12,u=Buffer.from([c,l,0,0,0]);r.push(u);for(let d=0;d<l;d++){let E=a[d].sheetId-1,f=Buffer.alloc(12);f.writeInt32LE(0,0),f[4]=E,f[8]=E,r.push(f)}r.push(Buffer.from([226,2,0]));for(let d=0;d<l;d++){let E=a[d];this._writeFilterDefinedName(r,E,d)}}}r.push(this._workbookBinEnd),this.archive.append(Buffer.concat(r),{name:"xl/workbook.bin"});for(let a of this.sheetList)this.archive.append(this._binaryIndexBin,{name:`xl/worksheets/binaryIndex${a.sheetId}.bin`});let i=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types">
<Default Extension="bin" ContentType="application/vnd.ms-excel.sheet.binary.macroEnabled.main"/>
<Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml"/>
<Default Extension="xml" ContentType="application/xml"/>`;for(let a of this.sheetList)i+=`<Override PartName="/${a.pathInArchive}" ContentType="application/vnd.ms-excel.worksheet"/>`,i+=`<Override PartName="/xl/worksheets/binaryIndex${a.sheetId}.bin" ContentType="application/vnd.ms-excel.binIndexWs"/>`;i+=`<Override PartName="/xl/styles.bin" ContentType="application/vnd.ms-excel.styles"/>
<Override PartName="/xl/sharedStrings.bin" ContentType="application/vnd.ms-excel.sharedStrings"/>
</Types>`,this.archive.append(i,{name:"[Content_Types].xml"});let s=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">`;for(let a of this.sheetList){let l=`rId${a.sheetId}`;s+=`<Relationship Id="${l}" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="worksheets/${a.nameInArchive}"/>`}s+=`<Relationship Id="rId${this.sheetList.length+2}" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Target="styles.bin"/>
<Relationship Id="rId${this.sheetList.length+3}" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings" Target="sharedStrings.bin"/>
</Relationships>`,this.archive.append(s,{name:"xl/_rels/workbook.bin.rels"}),this.archive.append(`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">
<Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.bin"/>
</Relationships>`,{name:"_rels/.rels"});for(let a of this.sheetList){let l=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">
<Relationship Id="rId1" Type="http://schemas.microsoft.com/office/2006/relationships/xlBinaryIndex" Target="binaryIndex${a.sheetId}.bin"/>
</Relationships>`;this.archive.append(l,{name:`xl/worksheets/_rels/${a.nameInArchive}.rels`})}this.output.on("close",()=>e()),this.archive.on("error",a=>n(a)),this.archive.finalize()}catch(r){n(r)}})}},dye=dS});var us={};ht(us,{copyFileToClipboard:()=>hS,exportCsvToXlsb:()=>pye,exportQueryToXlsb:()=>zC,exportStructuredToXlsb:()=>Tye,getTempFilePath:()=>Sye});function XC(t){if(typeof t=="string"&&t.length>0){if(t.length>15||/^-?0\d+/.test(t))return t;if(/^-?\d+(\.\d+)?$/.test(t)){let e=parseFloat(t);if(Number.isFinite(e))return e}}return t}function fye(t){return t.map(XC)}async function zC(t,e,n,r=!1,i,s){let o=null;try{i&&i("Connecting to database...");let a={host:t.host,port:t.port||5480,database:t.database,user:t.user,password:t.password},l=On();o=new l(a),await o.connect();let c=new qC(n),{SqlParser:u}=await Promise.resolve().then(()=>(Eo(),_0)),d=u.splitStatements(e),E=0,f=0;for(let I=0;I<d.length;I++){let R=d[I];if(!R.trim())continue;let m=d.length>1?`Result ${I+1}`:"Query Results";i&&i(`Executing query ${I+1}/${d.length}...`);try{let A=o.createCommand(R);s&&(A.commandTimeout=s);let N=await A.executeReader(),g=[],L=[],y=new Set(["INT8","INT2","INT4","NUMERIC","FLOAT4","FLOAT8"]);for(let B=0;B<N.fieldCount;B++){let H=N.getName(B);g.push(H);try{let X=N.getTypeName(B);L.push(y.has(X))}catch{L.push(!1)}}let D=g.length;f=Math.max(f,D),c.startSheet(m,D,g,{doAutofilter:!0});let x=0;for(;await N.read();){let B=[];for(let H=0;H<N.fieldCount;H++){let X=N.getValue(H);L[H]&&(X=XC(X)),B.push(X)}c.writeRow(B),x++,x%1e4===0&&i&&i(`Streaming ${x.toLocaleString()} rows to "${m}"...`)}c.endSheet(),E+=x,i&&i(`Written ${x.toLocaleString()} rows to sheet "${m}"`)}catch(A){let N=A instanceof Error?A.message:String(A);c.startSheet(`Error ${I+1}`,1,["Error"],{doAutofilter:!1}),c.writeRow([`Error executing query: ${N}`]),c.endSheet()}}let p=e.split(`
`);c.startSheet("SQL Code",1,void 0,{doAutofilter:!1}),c.writeRow(["SQL Query:"]);for(let I of p)c.writeRow([I]);c.endSheet(),i&&i("Finalizing file..."),await c.finalize();let T=fS.statSync(n).size/(1024*1024);i&&(i("XLSB file created successfully"),i(`  - Total Rows: ${E.toLocaleString()}`),i(`  - File size: ${T.toFixed(1)} MB`),i(`  - Location: ${n}`));let S={success:!0,message:`Successfully exported ${E} rows to ${n}`,details:{rows_exported:E,columns:f,file_size_mb:parseFloat(T.toFixed(1)),file_path:n}};if(r){i&&i("Copying to clipboard...");let I=await hS(n);S.details&&(S.details.clipboard_success=I)}return S}catch(a){return{success:!1,message:`Export error: ${a instanceof Error?a.message:String(a)}`}}finally{if(o)try{await o.close()}catch{}}}function hye(t){return t?Eye.has(t.toUpperCase()):!1}async function pye(t,e,n=!1,r={source:"Unknown"},i){try{i&&i("Initializing XLSB writer...");let s=new qC(e),o=0,a=0,l=[],c=(f,p)=>{let h=f.split(/\r?\n/),T=m=>{let A=[],N=0,g=!1;for(let y=0;y<m.length;y++)if(m[y]==='"')g=!g;else if(m[y]===","&&!g){let D=m.substring(N,y);D.startsWith('"')&&D.endsWith('"')&&(D=D.substring(1,D.length-1).replace(/""/g,'"')),A.push(D),N=y+1}let L=m.substring(N);return L.startsWith('"')&&L.endsWith('"')&&(L=L.substring(1,L.length-1).replace(/""/g,'"')),A.push(L),A},S=0;for(;S<h.length&&!h[S].trim();)S++;if(S>=h.length)return;let I=T(h[S]);if(I.length===0)return;a=Math.max(a,I.length),s.startSheet(p,I.length,I,{doAutofilter:!0});let R=0;for(let m=S+1;m<h.length;m++){let A=h[m];if(!A.trim())continue;let N=T(A);s.writeRow(fye(N)),R++}s.endSheet(),o+=R};Array.isArray(t)?(i&&i(`Processing ${t.length} result sets...`),t.forEach((f,p)=>{let h=f.name||`Result ${p+1}`;i&&i(`Processing sheet "${h}"...`),c(f.csv,h),f.sql&&l.push({name:h,sql:f.sql})})):(i&&i("Reading CSV content..."),c(t,"Query Results"),r.sql?l.push({name:"Query Results",sql:r.sql}):r.source&&(s.startSheet("CSV Source",1,void 0,{doAutofilter:!1}),s.writeRow(["CSV Source:"]),s.writeRow([r.source]),s.endSheet())),l.length>0&&(s.startSheet("SQL Code",1,void 0,{doAutofilter:!1}),l.forEach(f=>{s.writeRow([`--- SQL for ${f.name} ---`]),f.sql.split(`
`).forEach(p=>{s.writeRow([p])}),s.writeRow([""])}),s.endSheet()),i&&i("Finalizing XLSB file..."),await s.finalize();let d=fS.statSync(e).size/(1024*1024);i&&(i("XLSB file created successfully"),i(`  - Rows: ${o.toLocaleString()}`),i(`  - File size: ${d.toFixed(1)} MB`));let E={success:!0,message:`Successfully exported ${o} rows to ${e}`,details:{rows_exported:o,columns:a,file_size_mb:parseFloat(d.toFixed(1)),file_path:e}};if(n){i&&i("Copying file to clipboard...");let f=await hS(e);E.details&&(E.details.clipboard_success=f)}return E}catch(s){return{success:!1,message:`Export failed: ${s instanceof Error?s.message:String(s)}`}}}async function Tye(t,e,n=!1,r){try{r&&r("Initializing XLSB writer...");let i=new qC(e),s=0,o=0,a=[];for(let d of t){let E=d.name||"Sheet";r&&r(`Processing sheet "${E}"...`);let f=d.columns.map(h=>h.name),p=d.columns.map(h=>hye(h.type));o=Math.max(o,f.length),i.startSheet(E,f.length,f,{doAutofilter:!0});for(let h of d.rows){let T=h.map((S,I)=>p[I]?XC(S):S);i.writeRow(T),s++}i.endSheet(),d.sql&&a.push({name:E,sql:d.sql})}a.length>0&&(i.startSheet("SQL Code",1,void 0,{doAutofilter:!1}),a.forEach(d=>{i.writeRow([`--- SQL for ${d.name} ---`]),d.sql.split(`
`).forEach(E=>{i.writeRow([E])}),i.writeRow([""])}),i.endSheet()),r&&r("Finalizing XLSB file..."),await i.finalize();let c=fS.statSync(e).size/(1024*1024);r&&(r("XLSB file created successfully"),r(`  - Rows: ${s.toLocaleString()}`),r(`  - File size: ${c.toFixed(1)} MB`));let u={success:!0,message:`Successfully exported ${s} rows to ${e}`,details:{rows_exported:s,columns:o,file_size_mb:parseFloat(c.toFixed(1)),file_path:e}};if(n){r&&r("Copying file to clipboard...");let d=await hS(e);u.details&&(u.details.clipboard_success=d)}return u}catch(i){return{success:!1,message:`Export failed: ${i instanceof Error?i.message:String(i)}`}}}async function hS(t){return ES.platform()!=="win32"?(console.error("Clipboard file copy is only supported on Windows"),!1):new Promise(e=>{try{let n=mc.normalize(mc.resolve(t)),r=`Set-Clipboard -Path "${n.replace(/"/g,'`"')}"`,i=(0,vX.spawn)("powershell.exe",["-NoProfile","-NonInteractive","-Command",r]),s="";i.stderr.on("data",o=>{s+=o.toString()}),i.on("close",o=>{o!==0?(console.error(`PowerShell clipboard copy failed: ${s}`),e(!1)):(console.log(`File copied to clipboard: ${n}`),e(!0))}),i.on("error",o=>{console.error(`Error spawning PowerShell: ${o.message}`),e(!1)})}catch(n){let r=n instanceof Error?n.message:String(n);console.error(`Error copying file to clipboard: ${r}`),e(!1)}})}function Sye(){let t=ES.tmpdir(),n=`netezza_export_${Date.now()}.xlsb`;return mc.join(t,n)}var fS,mc,ES,vX,qC,Eye,yi=G(()=>{"use strict";fS=z(require("fs")),mc=z(require("path")),ES=z(require("os")),vX=require("child_process"),qC=(xX(),Is(PX)).default;Eye=new Set(["INT8","INT2","INT4","NUMERIC","FLOAT4","FLOAT8","INTEGER","BIGINT","SMALLINT","DECIMAL","REAL","DOUBLE PRECISION"])});var FX=C((kBe,BX)=>{BX.exports=TS;function TS(){this.pending=0,this.max=1/0,this.listeners=[],this.waiting=[],this.error=null}TS.prototype.go=function(t){this.pending<this.max?UX(this,t):this.waiting.push(t)};TS.prototype.wait=function(t){this.pending===0?t(this.error):this.listeners.push(t)};TS.prototype.hold=function(){return MX(this)};function MX(t){t.pending+=1;var e=!1;return n;function n(i){if(e)throw new Error("callback called twice");if(e=!0,t.error=t.error||i,t.pending-=1,t.waiting.length>0&&t.pending<t.max)UX(t,t.waiting.shift());else if(t.pending===0){var s=t.listeners;t.listeners=[],s.forEach(r)}}function r(i){i(t.error)}}function UX(t,e){e(MX(t))}});var GX=C(ef=>{var Zd=require("fs"),SS=require("util"),JC=require("stream"),HX=JC.Readable,QC=JC.Writable,Rye=JC.PassThrough,Aye=FX(),RS=require("events").EventEmitter;ef.createFromBuffer=mye;ef.createFromFd=gye;ef.BufferSlicer=fs;ef.FdSlicer=ds;SS.inherits(ds,RS);function ds(t,e){e=e||{},RS.call(this),this.fd=t,this.pend=new Aye,this.pend.max=1,this.refCount=0,this.autoClose=!!e.autoClose}ds.prototype.read=function(t,e,n,r,i){var s=this;s.pend.go(function(o){Zd.read(s.fd,t,e,n,r,function(a,l,c){o(),i(a,l,c)})})};ds.prototype.write=function(t,e,n,r,i){var s=this;s.pend.go(function(o){Zd.write(s.fd,t,e,n,r,function(a,l,c){o(),i(a,l,c)})})};ds.prototype.createReadStream=function(t){return new AS(this,t)};ds.prototype.createWriteStream=function(t){return new mS(this,t)};ds.prototype.ref=function(){this.refCount+=1};ds.prototype.unref=function(){var t=this;if(t.refCount-=1,t.refCount>0)return;if(t.refCount<0)throw new Error("invalid unref");t.autoClose&&Zd.close(t.fd,e);function e(n){n?t.emit("error",n):t.emit("close")}};SS.inherits(AS,HX);function AS(t,e){e=e||{},HX.call(this,e),this.context=t,this.context.ref(),this.start=e.start||0,this.endOffset=e.end,this.pos=this.start,this.destroyed=!1}AS.prototype._read=function(t){var e=this;if(!e.destroyed){var n=Math.min(e._readableState.highWaterMark,t);if(e.endOffset!=null&&(n=Math.min(n,e.endOffset-e.pos)),n<=0){e.destroyed=!0,e.push(null),e.context.unref();return}e.context.pend.go(function(r){if(e.destroyed)return r();var i=Buffer.allocUnsafe(n);Zd.read(e.context.fd,i,0,n,e.pos,function(s,o){s?e.destroy(s):o===0?(e.destroyed=!0,e.push(null),e.context.unref()):(e.pos+=o,e.push(i.slice(0,o))),r()})})}};AS.prototype.destroy=function(t){this.destroyed||(t=t||new Error("stream destroyed"),this.destroyed=!0,this.emit("error",t),this.context.unref())};SS.inherits(mS,QC);function mS(t,e){e=e||{},QC.call(this,e),this.context=t,this.context.ref(),this.start=e.start||0,this.endOffset=e.end==null?1/0:+e.end,this.bytesWritten=0,this.pos=this.start,this.destroyed=!1,this.on("finish",this.destroy.bind(this))}mS.prototype._write=function(t,e,n){var r=this;if(!r.destroyed){if(r.pos+t.length>r.endOffset){var i=new Error("maximum file length exceeded");i.code="ETOOBIG",r.destroy(),n(i);return}r.context.pend.go(function(s){if(r.destroyed)return s();Zd.write(r.context.fd,t,0,t.length,r.pos,function(o,a){o?(r.destroy(),s(),n(o)):(r.bytesWritten+=a,r.pos+=a,r.emit("progress"),s(),n())})})}};mS.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.context.unref())};SS.inherits(fs,RS);function fs(t,e){RS.call(this),e=e||{},this.refCount=0,this.buffer=t,this.maxChunkSize=e.maxChunkSize||Number.MAX_SAFE_INTEGER}fs.prototype.read=function(t,e,n,r,i){if(!(0<=e&&e<=t.length))throw new RangeError("offset outside buffer: 0 <= "+e+" <= "+t.length);if(r<0)throw new RangeError("position is negative: "+r);if(e+n>t.length&&(n=t.length-e),r+n>this.buffer.length&&(n=this.buffer.length-r),n<=0){setImmediate(function(){i(null,0)});return}this.buffer.copy(t,e,r,r+n),setImmediate(function(){i(null,n)})};fs.prototype.write=function(t,e,n,r,i){t.copy(this.buffer,r,e,e+n),setImmediate(function(){i(null,n,t)})};fs.prototype.createReadStream=function(t){t=t||{};var e=new Rye(t);e.destroyed=!1,e.start=t.start||0,e.endOffset=t.end,e.pos=e.endOffset||this.buffer.length;for(var n=this.buffer.slice(e.start,e.pos),r=0;;){var i=r+this.maxChunkSize;if(i>=n.length){r<n.length&&e.write(n.slice(r,n.length));break}e.write(n.slice(r,i)),r=i}return e.end(),e.destroy=function(){e.destroyed=!0},e};fs.prototype.createWriteStream=function(t){var e=this;t=t||{};var n=new QC(t);return n.start=t.start||0,n.endOffset=t.end==null?this.buffer.length:+t.end,n.bytesWritten=0,n.pos=n.start,n.destroyed=!1,n._write=function(r,i,s){if(!n.destroyed){var o=n.pos+r.length;if(o>n.endOffset){var a=new Error("maximum file length exceeded");a.code="ETOOBIG",n.destroyed=!0,s(a);return}r.copy(e.buffer,n.pos,0,r.length),n.bytesWritten+=r.length,n.pos=o,n.emit("progress"),s()}},n.destroy=function(){n.destroyed=!0},n};fs.prototype.ref=function(){this.refCount+=1};fs.prototype.unref=function(){if(this.refCount-=1,this.refCount<0)throw new Error("invalid unref")};function mye(t,e){return new fs(t,e)}function gye(t,e){return new ds(t,e)}});var kX=C((VBe,$X)=>{var no=require("buffer").Buffer,ZC=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];typeof Int32Array<"u"&&(ZC=new Int32Array(ZC));function WX(t){if(no.isBuffer(t))return t;var e=typeof no.alloc=="function"&&typeof no.from=="function";if(typeof t=="number")return e?no.alloc(t):new no(t);if(typeof t=="string")return e?no.from(t):new no(t);throw new Error("input must be buffer, number, or string, received "+typeof t)}function Iye(t){var e=WX(4);return e.writeInt32BE(t,0),e}function ey(t,e){t=WX(t),no.isBuffer(e)&&(e=e.readUInt32BE(0));for(var n=~~e^-1,r=0;r<t.length;r++)n=ZC[(n^t[r])&255]^n>>>8;return n^-1}function ty(){return Iye(ey.apply(null,arguments))}ty.signed=function(){return ey.apply(null,arguments)};ty.unsigned=function(){return ey.apply(null,arguments)>>>0};$X.exports=ty});var ZX=C(or=>{var ny=require("fs"),_ye=require("zlib"),YX=GX(),Nye=kX(),_S=require("util"),NS=require("events").EventEmitter,VX=require("stream").Transform,iy=require("stream").PassThrough,Oye=require("stream").Writable;or.open=Cye;or.fromFd=qX;or.fromBuffer=yye;or.fromRandomAccessReader=sy;or.dosDateTimeToDate=jX;or.getFileNameLowLevel=KX;or.validateFileName=JX;or.parseExtraFields=QX;or.ZipFile=wi;or.Entry=tf;or.LocalFileHeader=zX;or.RandomAccessReader=ro;function Cye(t,e,n){typeof e=="function"&&(n=e,e=null),e==null&&(e={}),e.autoClose==null&&(e.autoClose=!0),e.lazyEntries==null&&(e.lazyEntries=!1),e.decodeStrings==null&&(e.decodeStrings=!0),e.validateEntrySizes==null&&(e.validateEntrySizes=!0),e.strictFileNames==null&&(e.strictFileNames=!1),n==null&&(n=IS),ny.open(t,"r",function(r,i){if(r)return n(r);qX(i,e,function(s,o){s&&ny.close(i,IS),n(s,o)})})}function qX(t,e,n){typeof e=="function"&&(n=e,e=null),e==null&&(e={}),e.autoClose==null&&(e.autoClose=!1),e.lazyEntries==null&&(e.lazyEntries=!1),e.decodeStrings==null&&(e.decodeStrings=!0),e.validateEntrySizes==null&&(e.validateEntrySizes=!0),e.strictFileNames==null&&(e.strictFileNames=!1),n==null&&(n=IS),ny.fstat(t,function(r,i){if(r)return n(r);var s=YX.createFromFd(t,{autoClose:!0});sy(s,i.size,e,n)})}function yye(t,e,n){typeof e=="function"&&(n=e,e=null),e==null&&(e={}),e.autoClose=!1,e.lazyEntries==null&&(e.lazyEntries=!1),e.decodeStrings==null&&(e.decodeStrings=!0),e.validateEntrySizes==null&&(e.validateEntrySizes=!0),e.strictFileNames==null&&(e.strictFileNames=!1);var r=YX.createFromBuffer(t,{maxChunkSize:65536});sy(r,t.length,e,n)}function sy(t,e,n,r){typeof n=="function"&&(r=n,n=null),n==null&&(n={}),n.autoClose==null&&(n.autoClose=!0),n.lazyEntries==null&&(n.lazyEntries=!1),n.decodeStrings==null&&(n.decodeStrings=!0);var i=!!n.decodeStrings;if(n.validateEntrySizes==null&&(n.validateEntrySizes=!0),n.strictFileNames==null&&(n.strictFileNames=!1),r==null&&(r=IS),typeof e!="number")throw new Error("expected totalSize parameter to be a number");if(e>Number.MAX_SAFE_INTEGER)throw new Error("zip file too large. only file sizes up to 2^52 are supported due to JavaScript's Number type being an IEEE 754 double.");t.ref();var s=22,o=20,a=65535,l=Math.min(o+s+a,e),c=Es(l),u=e-c.length;Ic(t,c,0,l,u,function(d){if(d)return r(d);for(var E=l-s;E>=0;E-=1)if(c.readUInt32LE(E)===101010256){var f=c.subarray(E),p=f.readUInt16LE(4),h=f.readUInt16LE(10),T=f.readUInt32LE(16),S=f.readUInt16LE(20),I=f.length-s;if(S!==I)return r(new Error("Invalid comment length. Expected: "+I+". Found: "+S+". Are there extra bytes at the end of the file? Or is the end of central dir signature `PK\u263A\u263B` in the comment?"));var R=i?gS(f.subarray(22),!1):f.subarray(22);if(E-o>=0&&c.readUInt32LE(E-o)===117853008){var m=c.subarray(E-o,E-o+o),A=gc(m,8),N=Es(56);return Ic(t,N,0,N.length,A,function(g){return g?r(g):N.readUInt32LE(0)!==101075792?r(new Error("invalid zip64 end of central directory record signature")):(p=N.readUInt32LE(16),p!==0?r(new Error("multi-disk zip files are not supported: found disk number: "+p)):(h=gc(N,32),T=gc(N,48),r(null,new wi(t,T,e,h,R,n.autoClose,n.lazyEntries,i,n.validateEntrySizes,n.strictFileNames))))})}return p!==0?r(new Error("multi-disk zip files are not supported: found disk number: "+p)):r(null,new wi(t,T,e,h,R,n.autoClose,n.lazyEntries,i,n.validateEntrySizes,n.strictFileNames))}r(new Error("End of central directory record signature not found. Either not a zip file, or file is truncated."))})}_S.inherits(wi,NS);function wi(t,e,n,r,i,s,o,a,l,c){var u=this;NS.call(u),u.reader=t,u.reader.on("error",function(d){XX(u,d)}),u.reader.once("close",function(){u.emit("close")}),u.readEntryCursor=e,u.fileSize=n,u.entryCount=r,u.comment=i,u.entriesRead=0,u.autoClose=!!s,u.lazyEntries=!!o,u.decodeStrings=!!a,u.validateEntrySizes=!!l,u.strictFileNames=!!c,u.isOpen=!0,u.emittedError=!1,u.lazyEntries||u._readEntry()}wi.prototype.close=function(){this.isOpen&&(this.isOpen=!1,this.reader.unref())};function bi(t,e){t.autoClose&&t.close(),XX(t,e)}function XX(t,e){t.emittedError||(t.emittedError=!0,t.emit("error",e))}wi.prototype.readEntry=function(){if(!this.lazyEntries)throw new Error("readEntry() called without lazyEntries:true");this._readEntry()};wi.prototype._readEntry=function(){var t=this;if(t.entryCount===t.entriesRead){setImmediate(function(){t.autoClose&&t.close(),!t.emittedError&&t.emit("end")});return}if(!t.emittedError){var e=Es(46);Ic(t.reader,e,0,e.length,t.readEntryCursor,function(n){if(n)return bi(t,n);if(!t.emittedError){var r=new tf,i=e.readUInt32LE(0);if(i!==33639248)return bi(t,new Error("invalid central directory file header signature: 0x"+i.toString(16)));if(r.versionMadeBy=e.readUInt16LE(4),r.versionNeededToExtract=e.readUInt16LE(6),r.generalPurposeBitFlag=e.readUInt16LE(8),r.compressionMethod=e.readUInt16LE(10),r.lastModFileTime=e.readUInt16LE(12),r.lastModFileDate=e.readUInt16LE(14),r.crc32=e.readUInt32LE(16),r.compressedSize=e.readUInt32LE(20),r.uncompressedSize=e.readUInt32LE(24),r.fileNameLength=e.readUInt16LE(28),r.extraFieldLength=e.readUInt16LE(30),r.fileCommentLength=e.readUInt16LE(32),r.internalFileAttributes=e.readUInt16LE(36),r.externalFileAttributes=e.readUInt32LE(38),r.relativeOffsetOfLocalHeader=e.readUInt32LE(42),r.generalPurposeBitFlag&64)return bi(t,new Error("strong encryption is not supported"));t.readEntryCursor+=46,e=Es(r.fileNameLength+r.extraFieldLength+r.fileCommentLength),Ic(t.reader,e,0,e.length,t.readEntryCursor,function(s){if(s)return bi(t,s);if(!t.emittedError){r.fileNameRaw=e.subarray(0,r.fileNameLength);var o=r.fileNameLength+r.extraFieldLength;r.extraFieldRaw=e.subarray(r.fileNameLength,o),r.fileCommentRaw=e.subarray(o,o+r.fileCommentLength);try{r.extraFields=QX(r.extraFieldRaw)}catch(h){return bi(t,h)}if(t.decodeStrings){var a=(r.generalPurposeBitFlag&2048)!==0;r.fileComment=gS(r.fileCommentRaw,a),r.fileName=KX(r.generalPurposeBitFlag,r.fileNameRaw,r.extraFields,t.strictFileNames);var l=JX(r.fileName);if(l!=null)return bi(t,new Error(l))}else r.fileComment=r.fileCommentRaw,r.fileName=r.fileNameRaw;r.comment=r.fileComment,t.readEntryCursor+=e.length,t.entriesRead+=1;for(var c=0;c<r.extraFields.length;c++){var u=r.extraFields[c];if(u.id===1){var d=u.data,E=0;if(r.uncompressedSize===4294967295){if(E+8>d.length)return bi(t,new Error("zip64 extended information extra field does not include uncompressed size"));r.uncompressedSize=gc(d,E),E+=8}if(r.compressedSize===4294967295){if(E+8>d.length)return bi(t,new Error("zip64 extended information extra field does not include compressed size"));r.compressedSize=gc(d,E),E+=8}if(r.relativeOffsetOfLocalHeader===4294967295){if(E+8>d.length)return bi(t,new Error("zip64 extended information extra field does not include relative header offset"));r.relativeOffsetOfLocalHeader=gc(d,E),E+=8}break}}if(t.validateEntrySizes&&r.compressionMethod===0){var f=r.uncompressedSize;if(r.isEncrypted()&&(f+=12),r.compressedSize!==f){var p="compressed/uncompressed size mismatch for stored file: "+r.compressedSize+" != "+r.uncompressedSize;return bi(t,new Error(p))}}t.emit("entry",r),t.lazyEntries||t._readEntry()}})}})}};wi.prototype.openReadStream=function(t,e,n){var r=this,i=0,s=t.compressedSize;if(n==null&&(n=e,e=null),e==null)e={};else{if(e.decrypt!=null){if(!t.isEncrypted())throw new Error("options.decrypt can only be specified for encrypted entries");if(e.decrypt!==!1)throw new Error("invalid options.decrypt value: "+e.decrypt);if(t.isCompressed()&&e.decompress!==!1)throw new Error("entry is encrypted and compressed, and options.decompress !== false")}if(e.decompress!=null){if(!t.isCompressed())throw new Error("options.decompress can only be specified for compressed entries");if(!(e.decompress===!1||e.decompress===!0))throw new Error("invalid options.decompress value: "+e.decompress)}if(e.start!=null||e.end!=null){if(t.isCompressed()&&e.decompress!==!1)throw new Error("start/end range not allowed for compressed entry without options.decompress === false");if(t.isEncrypted()&&e.decrypt!==!1)throw new Error("start/end range not allowed for encrypted entry without options.decrypt === false")}if(e.start!=null){if(i=e.start,i<0)throw new Error("options.start < 0");if(i>t.compressedSize)throw new Error("options.start > entry.compressedSize")}if(e.end!=null){if(s=e.end,s<0)throw new Error("options.end < 0");if(s>t.compressedSize)throw new Error("options.end > entry.compressedSize");if(s<i)throw new Error("options.end < options.start")}}if(!r.isOpen)return n(new Error("closed"));if(t.isEncrypted()&&e.decrypt!==!1)return n(new Error("entry is encrypted, and options.decrypt !== false"));var o;if(t.compressionMethod===0)o=!1;else if(t.compressionMethod===8)o=e.decompress!=null?e.decompress:!0;else return n(new Error("unsupported compression method: "+t.compressionMethod));r.readLocalFileHeader(t,{minimal:!0},function(a,l){if(a)return n(a);r.openReadStreamLowLevel(l.fileDataStart,t.compressedSize,i,s,o,t.uncompressedSize,n)})};wi.prototype.openReadStreamLowLevel=function(t,e,n,r,i,s,o){var a=this,l=t+e,c=a.reader.createReadStream({start:t+n,end:t+r}),u=c;if(i){var d=!1,E=_ye.createInflateRaw();c.on("error",function(f){setImmediate(function(){d||E.emit("error",f)})}),c.pipe(E),a.validateEntrySizes?(u=new nf(s),E.on("error",function(f){setImmediate(function(){d||u.emit("error",f)})}),E.pipe(u)):u=E,ry(u,function(){d=!0,E!==u&&E.unpipe(u),c.unpipe(E),c.destroy()})}o(null,u)};wi.prototype.readLocalFileHeader=function(t,e,n){var r=this;n==null&&(n=e,e=null),e==null&&(e={}),r.reader.ref();var i=Es(30);Ic(r.reader,i,0,i.length,t.relativeOffsetOfLocalHeader,function(s){try{if(s)return n(s);var o=i.readUInt32LE(0);if(o!==67324752)return n(new Error("invalid local file header signature: 0x"+o.toString(16)));var a=i.readUInt16LE(26),l=i.readUInt16LE(28),c=t.relativeOffsetOfLocalHeader+30+a+l;if(c+t.compressedSize>r.fileSize)return n(new Error("file data overflows file bounds: "+c+" + "+t.compressedSize+" > "+r.fileSize));if(e.minimal)return n(null,{fileDataStart:c});var u=new zX;u.fileDataStart=c,u.versionNeededToExtract=i.readUInt16LE(4),u.generalPurposeBitFlag=i.readUInt16LE(6),u.compressionMethod=i.readUInt16LE(8),u.lastModFileTime=i.readUInt16LE(10),u.lastModFileDate=i.readUInt16LE(12),u.crc32=i.readUInt32LE(14),u.compressedSize=i.readUInt32LE(18),u.uncompressedSize=i.readUInt32LE(22),u.fileNameLength=a,u.extraFieldLength=l,i=Es(a+l),r.reader.ref(),Ic(r.reader,i,0,i.length,t.relativeOffsetOfLocalHeader+30,function(d){try{return d?n(d):(u.fileName=i.subarray(0,a),u.extraField=i.subarray(a),n(null,u))}finally{r.reader.unref()}})}finally{r.reader.unref()}})};function tf(){}tf.prototype.getLastModDate=function(t){if(t==null&&(t={}),!t.forceDosFormat)for(var e=0;e<this.extraFields.length;e++){var n=this.extraFields[e];if(n.id===21589){var r=n.data;if(r.length<5)continue;var i=r[0],s=1;if(!(i&s))continue;var o=r.readInt32LE(1);return new Date(o*1e3)}else if(n.id===10)for(var r=n.data,a=4;a<r.length+4;){var l=r.readUInt16LE(a);a+=2;var c=r.readUInt16LE(a);if(a+=2,l!==1){a+=c;continue}if(c<8||a+c>r.length)break;var u=4294967296*r.readInt32LE(a+4)+r.readUInt32LE(a),d=u/1e4-116444736e5;return new Date(d)}}return jX(this.lastModFileDate,this.lastModFileTime,t.timezone)};tf.prototype.isEncrypted=function(){return(this.generalPurposeBitFlag&1)!==0};tf.prototype.isCompressed=function(){return this.compressionMethod===8};function zX(){}function jX(t,e,n){var r=t&31,i=(t>>5&15)-1,s=(t>>9&127)+1980,o=0,a=(e&31)*2,l=e>>5&63,c=e>>11&31;if(n==null||n==="local")return new Date(s,i,r,c,l,a,o);if(n==="UTC")return new Date(Date.UTC(s,i,r,c,l,a,o));throw new Error("unrecognized options.timezone: "+options.timezone)}function KX(t,e,n,r){for(var i=null,s=0;s<n.length;s++){var o=n[s];if(o.id===28789){if(o.data.length<6||o.data.readUInt8(0)!==1)continue;var a=o.data.readUInt32LE(1);if(Nye.unsigned(e)!==a)continue;i=gS(o.data.subarray(5),!0);break}}if(i==null){var l=(t&2048)!==0;i=gS(e,l)}return r||(i=i.replace(/\\/g,"/")),i}function JX(t){return t.indexOf("\\")!==-1?"invalid characters in fileName: "+t:/^[a-zA-Z]:/.test(t)||/^\//.test(t)?"absolute path: "+t:t.split("/").indexOf("..")!==-1?"invalid relative path: "+t:null}function QX(t){for(var e=[],n=0;n<t.length-3;){var r=t.readUInt16LE(n+0),i=t.readUInt16LE(n+2),s=n+4,o=s+i;if(o>t.length)throw new Error("extra field length exceeds extra field buffer size");var a=t.subarray(s,o);e.push({id:r,data:a}),n=o}return e}function Ic(t,e,n,r,i,s){if(r===0)return setImmediate(function(){s(null,Es(0))});t.read(e,n,r,i,function(o,a){if(o)return s(o);if(a<r)return s(new Error("unexpected EOF"));s()})}_S.inherits(nf,VX);function nf(t){VX.call(this),this.actualByteCount=0,this.expectedByteCount=t}nf.prototype._transform=function(t,e,n){if(this.actualByteCount+=t.length,this.actualByteCount>this.expectedByteCount){var r="too many bytes in the stream. expected "+this.expectedByteCount+". got at least "+this.actualByteCount;return n(new Error(r))}n(null,t)};nf.prototype._flush=function(t){if(this.actualByteCount<this.expectedByteCount){var e="not enough bytes in the stream. expected "+this.expectedByteCount+". got only "+this.actualByteCount;return t(new Error(e))}t()};_S.inherits(ro,NS);function ro(){NS.call(this),this.refCount=0}ro.prototype.ref=function(){this.refCount+=1};ro.prototype.unref=function(){var t=this;if(t.refCount-=1,t.refCount>0)return;if(t.refCount<0)throw new Error("invalid unref");t.close(e);function e(n){if(n)return t.emit("error",n);t.emit("close")}};ro.prototype.createReadStream=function(t){t==null&&(t={});var e=t.start,n=t.end;if(e===n){var r=new iy;return setImmediate(function(){r.end()}),r}var i=this._readStreamForRange(e,n),s=!1,o=new OS(this);i.on("error",function(l){setImmediate(function(){s||o.emit("error",l)})}),ry(o,function(){i.unpipe(o),o.unref(),i.destroy()});var a=new nf(n-e);return o.on("error",function(l){setImmediate(function(){s||a.emit("error",l)})}),ry(a,function(){s=!0,o.unpipe(a),o.destroy()}),i.pipe(o).pipe(a)};ro.prototype._readStreamForRange=function(t,e){throw new Error("not implemented")};ro.prototype.read=function(t,e,n,r,i){var s=this.createReadStream({start:r,end:r+n}),o=new Oye,a=0;o._write=function(l,c,u){l.copy(t,e+a,0,l.length),a+=l.length,u()},o.on("finish",i),s.on("error",function(l){i(l)}),s.pipe(o)};ro.prototype.close=function(t){setImmediate(t)};_S.inherits(OS,iy);function OS(t){iy.call(this),this.context=t,this.context.ref(),this.unreffedYet=!1}OS.prototype._flush=function(t){this.unref(),t()};OS.prototype.unref=function(t){this.unreffedYet||(this.unreffedYet=!0,this.context.unref())};var bye="\0\u263A\u263B\u2665\u2666\u2663\u2660\u2022\u25D8\u25CB\u25D9\u2642\u2640\u266A\u266B\u263C\u25BA\u25C4\u2195\u203C\xB6\xA7\u25AC\u21A8\u2191\u2193\u2192\u2190\u221F\u2194\u25B2\u25BC !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\u2302\xC7\xFC\xE9\xE2\xE4\xE0\xE5\xE7\xEA\xEB\xE8\xEF\xEE\xEC\xC4\xC5\xC9\xE6\xC6\xF4\xF6\xF2\xFB\xF9\xFF\xD6\xDC\xA2\xA3\xA5\u20A7\u0192\xE1\xED\xF3\xFA\xF1\xD1\xAA\xBA\xBF\u2310\xAC\xBD\xBC\xA1\xAB\xBB\u2591\u2592\u2593\u2502\u2524\u2561\u2562\u2556\u2555\u2563\u2551\u2557\u255D\u255C\u255B\u2510\u2514\u2534\u252C\u251C\u2500\u253C\u255E\u255F\u255A\u2554\u2569\u2566\u2560\u2550\u256C\u2567\u2568\u2564\u2565\u2559\u2558\u2552\u2553\u256B\u256A\u2518\u250C\u2588\u2584\u258C\u2590\u2580\u03B1\xDF\u0393\u03C0\u03A3\u03C3\xB5\u03C4\u03A6\u0398\u03A9\u03B4\u221E\u03C6\u03B5\u2229\u2261\xB1\u2265\u2264\u2320\u2321\xF7\u2248\xB0\u2219\xB7\u221A\u207F\xB2\u25A0\xA0";function gS(t,e){if(e)return t.toString("utf8");for(var n="",r=0;r<t.length;r++)n+=bye[t[r]];return n}function gc(t,e){var n=t.readUInt32LE(e),r=t.readUInt32LE(e+4);return r*4294967296+n}var Es;typeof Buffer.allocUnsafe=="function"?Es=function(t){return Buffer.allocUnsafe(t)}:Es=function(t){return new Buffer(t)};function ry(t,e){typeof t.destroy=="function"?t._destroy=function(n,r){e(),r?.(n)}:t.destroy=e}function IS(t){if(t)throw t}});var _c,oy=G(()=>{"use strict";_c=class{constructor(){this.fieldCount=0;this.rowCount=0;this.actualSheetName="";this.resultsCount=0;this._oaEpoch=Date.UTC(1899,11,30)}async close(){}dispose(){}getDateTimeFromOaDate(e){let n=e*864e5+this._oaEpoch;return new Date(n)}}});var ez,CS,tz=G(()=>{"use strict";ez=z(ZX());oy();CS=class extends _c{constructor(){super();this.zipfile=null;this.sharedStrings=[];this.styles=[];this.sheetNames=[];this.sheets=[];this.entries=new Map;this._currentSheetIndex=-1;this._sheetXml=null;this._xmlPos=0;this._currentRow=[];this.xfIdToNumFmtId=[];this.customDateFormats=new Set}async open(n,r=!0){return new Promise((i,s)=>{ez.default.open(n,{lazyEntries:!0,autoClose:!1},async(o,a)=>{if(o)return s(o);this.zipfile=a,this.entries=new Map,a.on("entry",l=>{this.entries.set(l.fileName,l),a.readEntry()}),a.on("end",async()=>{try{let l=await this._readZipEntryContent("xl/_rels/workbook.xml.rels"),c={};if(l){let E=/<Relationship[^>]*Id="([^"]*)"[^>]*Target="([^"]*)"/g,f;for(;(f=E.exec(l))!==null;)c[f[1]]=f[2]}let u=await this._readZipEntryContent("xl/workbook.xml");if(u){let E=/<sheet[^>]*name="([^"]*)"[^>]*sheetId="([^"]*)"[^>]*r:id="([^"]*)"/g,f;for(;(f=E.exec(u))!==null;){let p=this._unescapeXml(f[1]),h=f[2],T=f[3],I=c[T];I.startsWith("xl/")||(I="xl/"+I),this.sheetNames.push(p),this.sheets.push({name:p,sheetId:h,rId:T,path:I})}}if(r){let E=await this._readZipEntryContent("xl/sharedStrings.xml");E&&this._parseSharedStrings(E)}let d=await this._readZipEntryContent("xl/styles.xml");d&&this._parseStyles(d),this.resultsCount=this.sheets.length,this._currentSheetIndex=-1,i()}catch(l){s(l)}}),a.readEntry()})})}async close(){this.zipfile&&this.zipfile.close()}async _readZipEntryContent(n){let r=this.entries.get(n);return r?new Promise((i,s)=>{this.zipfile.openReadStream(r,(o,a)=>{if(o)return s(o);let l=[];a.on("data",c=>l.push(c)),a.on("end",()=>{i(Buffer.concat(l).toString("utf8"))}),a.on("error",s)})}):null}_unescapeXml(n){return n?n.indexOf("&")===-1?n:n.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&apos;/g,"'"):""}_parseSharedStrings(n){let r=0;for(;;){let i=n.indexOf("<si>",r);if(i===-1)break;let s=n.indexOf("</si>",i);if(s===-1)break;let o=n.substring(i,s),a="",l=0;for(;;){let c=o.indexOf("<t",l);if(c===-1)break;let u=o.indexOf(">",c),d=o.indexOf("</t>",u);if(d===-1)break;a+=o.substring(u+1,d),l=d+4}this.sharedStrings.push(this._unescapeXml(a)),r=s+5}}_parseStyles(n){let r=/<numFmt\s+[^>]*numFmtId="(\d+)"[^>]*formatCode="([^"]*)"/g,i;for(this.customDateFormats=new Set;(i=r.exec(n))!==null;){let o=parseInt(i[1]),a=i[2];(a.toLowerCase().includes("yy")||a.toLowerCase().includes("mm")||a.toLowerCase().includes("dd")||a.toLowerCase().includes("h:mm"))&&this.customDateFormats.add(o)}this.xfIdToNumFmtId=[];let s=n.indexOf("<cellXfs");if(s!==-1){let o=n.indexOf("</cellXfs>",s);if(o!==-1){let a=n.substring(s,o),l=/<xf\s+[^>]*numFmtId="(\d+)"/g;for(;(i=l.exec(a))!==null;){let c=parseInt(i[1]);this.xfIdToNumFmtId.push(c)}}}}getSheetNames(){return this.sheetNames}async read(){return this._currentSheetIndex===-1&&(this._currentSheetIndex=0,await this._initSheet(this._currentSheetIndex)),!!this._readNextRow()}async _initSheet(n){if(n>=this.sheets.length)return;let r=this.sheets[n];this.actualSheetName=r.name,this._sheetXml=await this._readZipEntryContent(r.path),this._sheetXml||(this._sheetXml=""),this._xmlPos=0;let i=this._sheetXml.indexOf("<sheetData>");i!==-1&&(this._xmlPos=i+11)}_readNextRow(){if(!this._sheetXml)return!1;let n=this._sheetXml.indexOf("<row",this._xmlPos);if(n===-1)return!1;let r=this._sheetXml.indexOf("</row>",n);return r===-1?!1:(this._xmlPos=r+6,this._parseRowByIndex(n,r),!0)}_parseRowByIndex(n,r){this._currentRow=[];let i=this._sheetXml,s=i.indexOf(">",n)+1;for(;s<r;){let o=i.indexOf("<c",s);if(o===-1||o>=r)break;let a=i.indexOf(">",o),l=-1,c="n",u=0,d=o+2;for(;d<a;){for(;i.charCodeAt(d)<=32&&d<a;)d++;if(d>=a)break;let p=d;for(;i.charCodeAt(d)!==61&&d<a;)d++;let h=i.substring(p,d);if(d++,i.charCodeAt(d)===34){d++;let T=d;for(;i.charCodeAt(d)!==34&&d<a;)d++;let S=i.substring(T,d);if(d++,h==="r"){let I=0;for(;I<S.length&&S.charCodeAt(I)>=65;)I++;l=this._columnLetterToIndex(S.substring(0,I))}else h==="t"?c=S:h==="s"&&(u=parseInt(S,10))}}let E=null;if(i.charCodeAt(a-1)===47)s=a+1;else{let p=i.indexOf("</c>",a),h=p!==-1&&p<r?p:r,T=i.indexOf("<v>",a);if(T!==-1&&T<h){let S=T+3,I=i.indexOf("</v>",S);I!==-1&&I<h&&(E=i.substring(S,I))}else if(c==="inlineStr"){let S=i.indexOf("<t",a);if(S!==-1&&S<h){let I=i.indexOf(">",S)+1,R=i.indexOf("</t>",I);R!==-1&&R<h&&(E=i.substring(I,R))}}s=h+4}let f=null;if(E!==null){if(c==="s"){let p=parseInt(E,10);f=this.sharedStrings[p]}else if(c==="b")f=E==="1"||E==="true";else if(c==="inlineStr")f=this._unescapeXml(E);else if((c==="n"||c==="")&&(f=parseFloat(E),u>0&&this.xfIdToNumFmtId)){let p=0;if(u<this.xfIdToNumFmtId.length&&(p=this.xfIdToNumFmtId[u]),p>=14&&p<=22||p>=45&&p<=47||this.customDateFormats&&this.customDateFormats.has(p))try{f=this.getDateTimeFromOaDate(f)}catch{}}}l!==-1&&(this._currentRow[l]=f,l>=this.fieldCount&&(this.fieldCount=l+1))}}_columnLetterToIndex(n){let r=0,i=n.length;for(let s=0;s<i;s++)r+=(n.charCodeAt(s)-64)*Math.pow(26,i-s-1);return r-1}getValue(n){return n<0||n>=this._currentRow.length?null:this._currentRow[n]}}});var ay=C((KBe,nz)=>{nz.exports={LOCHDR:30,LOCSIG:67324752,LOCVER:4,LOCFLG:6,LOCHOW:8,LOCTIM:10,LOCCRC:14,LOCSIZ:18,LOCLEN:22,LOCNAM:26,LOCEXT:28,EXTSIG:134695760,EXTHDR:16,EXTCRC:4,EXTSIZ:8,EXTLEN:12,CENHDR:46,CENSIG:33639248,CENVEM:4,CENVER:6,CENFLG:8,CENHOW:10,CENTIM:12,CENCRC:16,CENSIZ:20,CENLEN:24,CENNAM:28,CENEXT:30,CENCOM:32,CENDSK:34,CENATT:36,CENATX:38,CENOFF:42,ENDHDR:22,ENDSIG:101010256,ENDSUB:8,ENDTOT:10,ENDSIZ:12,ENDOFF:16,ENDCOM:20,END64HDR:20,END64SIG:117853008,END64START:4,END64OFF:8,END64NUMDISKS:16,ZIP64SIG:101075792,ZIP64HDR:56,ZIP64LEAD:12,ZIP64SIZE:4,ZIP64VEM:12,ZIP64VER:14,ZIP64DSK:16,ZIP64DSKDIR:20,ZIP64SUB:24,ZIP64TOT:32,ZIP64SIZB:40,ZIP64OFF:48,ZIP64EXTRA:56,STORED:0,SHRUNK:1,REDUCED1:2,REDUCED2:3,REDUCED3:4,REDUCED4:5,IMPLODED:6,DEFLATED:8,ENHANCED_DEFLATED:9,PKWARE:10,BZIP2:12,LZMA:14,IBM_TERSE:18,IBM_LZ77:19,AES_ENCRYPT:99,FLG_ENC:1,FLG_COMP1:2,FLG_COMP2:4,FLG_DESC:8,FLG_ENH:16,FLG_PATCH:32,FLG_STR:64,FLG_EFS:2048,FLG_MSK:4096,FILE:2,BUFFER:1,NONE:0,EF_ID:0,EF_SIZE:2,ID_ZIP64:1,ID_AVINFO:7,ID_PFS:8,ID_OS2:9,ID_NTFS:10,ID_OPENVMS:12,ID_UNIX:13,ID_FORK:14,ID_PATCH:15,ID_X509_PKCS7:20,ID_X509_CERTID_F:21,ID_X509_CERTID_C:22,ID_STRONGENC:23,ID_RECORD_MGT:24,ID_X509_PKCS7_RL:25,ID_IBM1:101,ID_IBM2:102,ID_POSZIP:18064,EF_ZIP64_OR_32:4294967295,EF_ZIP64_OR_16:65535,EF_ZIP64_SUNCOMP:0,EF_ZIP64_SCOMP:8,EF_ZIP64_RHO:16,EF_ZIP64_DSN:24}});var yS=C(iz=>{var rz={INVALID_LOC:"Invalid LOC header (bad signature)",INVALID_CEN:"Invalid CEN header (bad signature)",INVALID_END:"Invalid END header (bad signature)",DESCRIPTOR_NOT_EXIST:"No descriptor present",DESCRIPTOR_UNKNOWN:"Unknown descriptor format",DESCRIPTOR_FAULTY:"Descriptor data is malformed",NO_DATA:"Nothing to decompress",BAD_CRC:"CRC32 checksum failed {0}",FILE_IN_THE_WAY:"There is a file in the way: {0}",UNKNOWN_METHOD:"Invalid/unsupported compression method",AVAIL_DATA:"inflate::Available inflate data did not terminate",INVALID_DISTANCE:"inflate::Invalid literal/length or distance code in fixed or dynamic block",TO_MANY_CODES:"inflate::Dynamic block code description: too many length or distance codes",INVALID_REPEAT_LEN:"inflate::Dynamic block code description: repeat more than specified lengths",INVALID_REPEAT_FIRST:"inflate::Dynamic block code description: repeat lengths with no first length",INCOMPLETE_CODES:"inflate::Dynamic block code description: code lengths codes incomplete",INVALID_DYN_DISTANCE:"inflate::Dynamic block code description: invalid distance code lengths",INVALID_CODES_LEN:"inflate::Dynamic block code description: invalid literal/length code lengths",INVALID_STORE_BLOCK:"inflate::Stored block length did not match one's complement",INVALID_BLOCK_TYPE:"inflate::Invalid block type (type == 3)",CANT_EXTRACT_FILE:"Could not extract the file",CANT_OVERRIDE:"Target file already exists",DISK_ENTRY_TOO_LARGE:"Number of disk entries is too large",NO_ZIP:"No zip file was loaded",NO_ENTRY:"Entry doesn't exist",DIRECTORY_CONTENT_ERROR:"A directory cannot have content",FILE_NOT_FOUND:'File not found: "{0}"',NOT_IMPLEMENTED:"Not implemented",INVALID_FILENAME:"Invalid filename",INVALID_FORMAT:"Invalid or unsupported zip format. No END header found",INVALID_PASS_PARAM:"Incompatible password parameter",WRONG_PASSWORD:"Wrong Password",COMMENT_TOO_LONG:"Comment is too long",EXTRA_FIELD_PARSE_ERROR:"Extra field parsing error"};function wye(t){return function(...e){return e.length&&(t=t.replace(/\{(\d)\}/g,(n,r)=>e[r]||"")),new Error("ADM-ZIP: "+t)}}for(let t of Object.keys(rz))iz[t]=wye(rz[t])});var cz=C((QBe,lz)=>{var Lye=require("fs"),zt=require("path"),sz=ay(),Dye=yS(),Pye=typeof process=="object"&&process.platform==="win32",oz=t=>typeof t=="object"&&t!==null,az=new Uint32Array(256).map((t,e)=>{for(let n=0;n<8;n++)(e&1)!==0?e=3988292384^e>>>1:e>>>=1;return e>>>0});function Ot(t){this.sep=zt.sep,this.fs=Lye,oz(t)&&oz(t.fs)&&typeof t.fs.statSync=="function"&&(this.fs=t.fs)}lz.exports=Ot;Ot.prototype.makeDir=function(t){let e=this;function n(r){let i=r.split(e.sep)[0];r.split(e.sep).forEach(function(s){if(!(!s||s.substr(-1,1)===":")){i+=e.sep+s;var o;try{o=e.fs.statSync(i)}catch{e.fs.mkdirSync(i)}if(o&&o.isFile())throw Dye.FILE_IN_THE_WAY(`"${i}"`)}})}n(t)};Ot.prototype.writeFileTo=function(t,e,n,r){let i=this;if(i.fs.existsSync(t)){if(!n)return!1;var s=i.fs.statSync(t);if(s.isDirectory())return!1}var o=zt.dirname(t);i.fs.existsSync(o)||i.makeDir(o);var a;try{a=i.fs.openSync(t,"w",438)}catch{i.fs.chmodSync(t,438),a=i.fs.openSync(t,"w",438)}if(a)try{i.fs.writeSync(a,e,0,e.length,0)}finally{i.fs.closeSync(a)}return i.fs.chmodSync(t,r||438),!0};Ot.prototype.writeFileToAsync=function(t,e,n,r,i){typeof r=="function"&&(i=r,r=void 0);let s=this;s.fs.exists(t,function(o){if(o&&!n)return i(!1);s.fs.stat(t,function(a,l){if(o&&l.isDirectory())return i(!1);var c=zt.dirname(t);s.fs.exists(c,function(u){u||s.makeDir(c),s.fs.open(t,"w",438,function(d,E){d?s.fs.chmod(t,438,function(){s.fs.open(t,"w",438,function(f,p){s.fs.write(p,e,0,e.length,0,function(){s.fs.close(p,function(){s.fs.chmod(t,r||438,function(){i(!0)})})})})}):E?s.fs.write(E,e,0,e.length,0,function(){s.fs.close(E,function(){s.fs.chmod(t,r||438,function(){i(!0)})})}):s.fs.chmod(t,r||438,function(){i(!0)})})})})})};Ot.prototype.findFiles=function(t){let e=this;function n(r,i,s){typeof i=="boolean"&&(s=i,i=void 0);let o=[];return e.fs.readdirSync(r).forEach(function(a){let l=zt.join(r,a),c=e.fs.statSync(l);(!i||i.test(l))&&o.push(zt.normalize(l)+(c.isDirectory()?e.sep:"")),c.isDirectory()&&s&&(o=o.concat(n(l,i,s)))}),o}return n(t,void 0,!0)};Ot.prototype.findFilesAsync=function(t,e){let n=this,r=[];n.fs.readdir(t,function(i,s){if(i)return e(i);let o=s.length;if(!o)return e(null,r);s.forEach(function(a){a=zt.join(t,a),n.fs.stat(a,function(l,c){if(l)return e(l);c&&(r.push(zt.normalize(a)+(c.isDirectory()?n.sep:"")),c.isDirectory()?n.findFilesAsync(a,function(u,d){if(u)return e(u);r=r.concat(d),--o||e(null,r)}):--o||e(null,r))})})})};Ot.prototype.getAttributes=function(){};Ot.prototype.setAttributes=function(){};Ot.crc32update=function(t,e){return az[(t^e)&255]^t>>>8};Ot.crc32=function(t){typeof t=="string"&&(t=Buffer.from(t,"utf8"));let e=t.length,n=-1;for(let r=0;r<e;)n=Ot.crc32update(n,t[r++]);return~n>>>0};Ot.methodToString=function(t){switch(t){case sz.STORED:return"STORED ("+t+")";case sz.DEFLATED:return"DEFLATED ("+t+")";default:return"UNSUPPORTED ("+t+")"}};Ot.canonical=function(t){if(!t)return"";let e=zt.posix.normalize("/"+t.split("\\").join("/"));return zt.join(".",e)};Ot.zipnamefix=function(t){if(!t)return"";let e=zt.posix.normalize("/"+t.split("\\").join("/"));return zt.posix.join(".",e)};Ot.findLast=function(t,e){if(!Array.isArray(t))throw new TypeError("arr is not array");let n=t.length>>>0;for(let r=n-1;r>=0;r--)if(e(t[r],r,t))return t[r]};Ot.sanitize=function(t,e){t=zt.resolve(zt.normalize(t));for(var n=e.split("/"),r=0,i=n.length;r<i;r++){var s=zt.normalize(zt.join(t,n.slice(r,i).join(zt.sep)));if(s.indexOf(t)===0)return s}return zt.normalize(zt.join(t,zt.basename(e)))};Ot.toBuffer=function(e,n){return Buffer.isBuffer(e)?e:e instanceof Uint8Array?Buffer.from(e):typeof e=="string"?n(e):Buffer.alloc(0)};Ot.readBigUInt64LE=function(t,e){var n=Buffer.from(t.slice(e,e+8));return n.swap64(),parseInt(`0x${n.toString("hex")}`)};Ot.fromDOS2Date=function(t){return new Date((t>>25&127)+1980,Math.max((t>>21&15)-1,0),Math.max(t>>16&31,1),t>>11&31,t>>5&63,(t&31)<<1)};Ot.fromDate2DOS=function(t){let e=0,n=0;return t.getFullYear()>1979&&(e=(t.getFullYear()-1980&127)<<9|t.getMonth()+1<<5|t.getDate(),n=t.getHours()<<11|t.getMinutes()<<5|t.getSeconds()>>1),e<<16|n};Ot.isWin=Pye;Ot.crcTable=az});var dz=C((ZBe,uz)=>{var xye=require("path");uz.exports=function(t,{fs:e}){var n=t||"",r=s(),i=null;function s(){return{directory:!1,readonly:!1,hidden:!1,executable:!1,mtime:0,atime:0}}return n&&e.existsSync(n)?(i=e.statSync(n),r.directory=i.isDirectory(),r.mtime=i.mtime,r.atime=i.atime,r.executable=(73&i.mode)!==0,r.readonly=(128&i.mode)===0,r.hidden=xye.basename(n)[0]==="."):console.warn("Invalid path: "+n),{get directory(){return r.directory},get readOnly(){return r.readonly},get hidden(){return r.hidden},get mtime(){return r.mtime},get atime(){return r.atime},get executable(){return r.executable},decodeAttributes:function(){},encodeAttributes:function(){},toJSON:function(){return{path:n,isDirectory:r.directory,isReadOnly:r.readonly,isHidden:r.hidden,isExecutable:r.executable,mTime:r.mtime,aTime:r.atime}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var Ez=C((eFe,fz)=>{fz.exports={efs:!0,encode:t=>Buffer.from(t,"utf8"),decode:t=>t.toString("utf8")}});var Oc=C((tFe,Nc)=>{Nc.exports=cz();Nc.exports.Constants=ay();Nc.exports.Errors=yS();Nc.exports.FileAttr=dz();Nc.exports.decoder=Ez()});var pz=C((nFe,hz)=>{var io=Oc(),j=io.Constants;hz.exports=function(){var t=20,e=10,n=0,r=0,i=0,s=0,o=0,a=0,l=0,c=0,u=0,d=0,E=0,f=0,p=0;t|=io.isWin?2560:768,n|=j.FLG_EFS;let h={extraLen:0},T=R=>Math.max(0,R)>>>0,S=R=>Math.max(0,R)&65535,I=R=>Math.max(0,R)&255;return i=io.fromDate2DOS(new Date),{get made(){return t},set made(R){t=R},get version(){return e},set version(R){e=R},get flags(){return n},set flags(R){n=R},get flags_efs(){return(n&j.FLG_EFS)>0},set flags_efs(R){R?n|=j.FLG_EFS:n&=~j.FLG_EFS},get flags_desc(){return(n&j.FLG_DESC)>0},set flags_desc(R){R?n|=j.FLG_DESC:n&=~j.FLG_DESC},get method(){return r},set method(R){switch(R){case j.STORED:this.version=10;case j.DEFLATED:default:this.version=20}r=R},get time(){return io.fromDOS2Date(this.timeval)},set time(R){this.timeval=io.fromDate2DOS(R)},get timeval(){return i},set timeval(R){i=T(R)},get timeHighByte(){return I(i>>>8)},get crc(){return s},set crc(R){s=T(R)},get compressedSize(){return o},set compressedSize(R){o=T(R)},get size(){return a},set size(R){a=T(R)},get fileNameLength(){return l},set fileNameLength(R){l=R},get extraLength(){return c},set extraLength(R){c=R},get extraLocalLength(){return h.extraLen},set extraLocalLength(R){h.extraLen=R},get commentLength(){return u},set commentLength(R){u=R},get diskNumStart(){return d},set diskNumStart(R){d=T(R)},get inAttr(){return E},set inAttr(R){E=T(R)},get attr(){return f},set attr(R){f=T(R)},get fileAttr(){return(f||0)>>16&4095},get offset(){return p},set offset(R){p=T(R)},get encrypted(){return(n&j.FLG_ENC)===j.FLG_ENC},get centralHeaderSize(){return j.CENHDR+l+c+u},get realDataOffset(){return p+j.LOCHDR+h.fnameLen+h.extraLen},get localHeader(){return h},loadLocalHeaderFromBinary:function(R){var m=R.slice(p,p+j.LOCHDR);if(m.readUInt32LE(0)!==j.LOCSIG)throw io.Errors.INVALID_LOC();h.version=m.readUInt16LE(j.LOCVER),h.flags=m.readUInt16LE(j.LOCFLG),h.method=m.readUInt16LE(j.LOCHOW),h.time=m.readUInt32LE(j.LOCTIM),h.crc=m.readUInt32LE(j.LOCCRC),h.compressedSize=m.readUInt32LE(j.LOCSIZ),h.size=m.readUInt32LE(j.LOCLEN),h.fnameLen=m.readUInt16LE(j.LOCNAM),h.extraLen=m.readUInt16LE(j.LOCEXT);let A=p+j.LOCHDR+h.fnameLen,N=A+h.extraLen;return R.slice(A,N)},loadFromBinary:function(R){if(R.length!==j.CENHDR||R.readUInt32LE(0)!==j.CENSIG)throw io.Errors.INVALID_CEN();t=R.readUInt16LE(j.CENVEM),e=R.readUInt16LE(j.CENVER),n=R.readUInt16LE(j.CENFLG),r=R.readUInt16LE(j.CENHOW),i=R.readUInt32LE(j.CENTIM),s=R.readUInt32LE(j.CENCRC),o=R.readUInt32LE(j.CENSIZ),a=R.readUInt32LE(j.CENLEN),l=R.readUInt16LE(j.CENNAM),c=R.readUInt16LE(j.CENEXT),u=R.readUInt16LE(j.CENCOM),d=R.readUInt16LE(j.CENDSK),E=R.readUInt16LE(j.CENATT),f=R.readUInt32LE(j.CENATX),p=R.readUInt32LE(j.CENOFF)},localHeaderToBinary:function(){var R=Buffer.alloc(j.LOCHDR);return R.writeUInt32LE(j.LOCSIG,0),R.writeUInt16LE(e,j.LOCVER),R.writeUInt16LE(n,j.LOCFLG),R.writeUInt16LE(r,j.LOCHOW),R.writeUInt32LE(i,j.LOCTIM),R.writeUInt32LE(s,j.LOCCRC),R.writeUInt32LE(o,j.LOCSIZ),R.writeUInt32LE(a,j.LOCLEN),R.writeUInt16LE(l,j.LOCNAM),R.writeUInt16LE(h.extraLen,j.LOCEXT),R},centralHeaderToBinary:function(){var R=Buffer.alloc(j.CENHDR+l+c+u);return R.writeUInt32LE(j.CENSIG,0),R.writeUInt16LE(t,j.CENVEM),R.writeUInt16LE(e,j.CENVER),R.writeUInt16LE(n,j.CENFLG),R.writeUInt16LE(r,j.CENHOW),R.writeUInt32LE(i,j.CENTIM),R.writeUInt32LE(s,j.CENCRC),R.writeUInt32LE(o,j.CENSIZ),R.writeUInt32LE(a,j.CENLEN),R.writeUInt16LE(l,j.CENNAM),R.writeUInt16LE(c,j.CENEXT),R.writeUInt16LE(u,j.CENCOM),R.writeUInt16LE(d,j.CENDSK),R.writeUInt16LE(E,j.CENATT),R.writeUInt32LE(f,j.CENATX),R.writeUInt32LE(p,j.CENOFF),R},toJSON:function(){let R=function(m){return m+" bytes"};return{made:t,version:e,flags:n,method:io.methodToString(r),time:this.time,crc:"0x"+s.toString(16).toUpperCase(),compressedSize:R(o),size:R(a),fileNameLength:R(l),extraLength:R(c),commentLength:R(u),diskNumStart:d,inAttr:E,attr:f,offset:p,centralHeaderSize:R(j.CENHDR+l+c+u)}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var Sz=C((rFe,Tz)=>{var Cc=Oc(),gt=Cc.Constants;Tz.exports=function(){var t=0,e=0,n=0,r=0,i=0;return{get diskEntries(){return t},set diskEntries(s){t=e=s},get totalEntries(){return e},set totalEntries(s){e=t=s},get size(){return n},set size(s){n=s},get offset(){return r},set offset(s){r=s},get commentLength(){return i},set commentLength(s){i=s},get mainHeaderSize(){return gt.ENDHDR+i},loadFromBinary:function(s){if((s.length!==gt.ENDHDR||s.readUInt32LE(0)!==gt.ENDSIG)&&(s.length<gt.ZIP64HDR||s.readUInt32LE(0)!==gt.ZIP64SIG))throw Cc.Errors.INVALID_END();s.readUInt32LE(0)===gt.ENDSIG?(t=s.readUInt16LE(gt.ENDSUB),e=s.readUInt16LE(gt.ENDTOT),n=s.readUInt32LE(gt.ENDSIZ),r=s.readUInt32LE(gt.ENDOFF),i=s.readUInt16LE(gt.ENDCOM)):(t=Cc.readBigUInt64LE(s,gt.ZIP64SUB),e=Cc.readBigUInt64LE(s,gt.ZIP64TOT),n=Cc.readBigUInt64LE(s,gt.ZIP64SIZE),r=Cc.readBigUInt64LE(s,gt.ZIP64OFF),i=0)},toBinary:function(){var s=Buffer.alloc(gt.ENDHDR+i);return s.writeUInt32LE(gt.ENDSIG,0),s.writeUInt32LE(0,4),s.writeUInt16LE(t,gt.ENDSUB),s.writeUInt16LE(e,gt.ENDTOT),s.writeUInt32LE(n,gt.ENDSIZ),s.writeUInt32LE(r,gt.ENDOFF),s.writeUInt16LE(i,gt.ENDCOM),s.fill(" ",gt.ENDHDR),s},toJSON:function(){let s=function(o,a){let l=o.toString(16).toUpperCase();for(;l.length<a;)l="0"+l;return"0x"+l};return{diskEntries:t,totalEntries:e,size:n+" bytes",offset:s(r,4),commentLength:i}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var cy=C(ly=>{ly.EntryHeader=pz();ly.MainHeader=Sz()});var Az=C((sFe,Rz)=>{Rz.exports=function(t){var e=require("zlib"),n={chunkSize:(parseInt(t.length/1024)+1)*1024};return{deflate:function(){return e.deflateRawSync(t,n)},deflateAsync:function(r){var i=e.createDeflateRaw(n),s=[],o=0;i.on("data",function(a){s.push(a),o+=a.length}),i.on("end",function(){var a=Buffer.alloc(o),l=0;a.fill(0);for(var c=0;c<s.length;c++){var u=s[c];u.copy(a,l),l+=u.length}r&&r(a)}),i.end(t)}}}});var gz=C((oFe,mz)=>{var vye=+(process.versions?process.versions.node:"").split(".")[0]||0;mz.exports=function(t,e){var n=require("zlib");let r=vye>=15&&e>0?{maxOutputLength:e}:{};return{inflate:function(){return n.inflateRawSync(t,r)},inflateAsync:function(i){var s=n.createInflateRaw(r),o=[],a=0;s.on("data",function(l){o.push(l),a+=l.length}),s.on("end",function(){var l=Buffer.alloc(a),c=0;l.fill(0);for(var u=0;u<o.length;u++){var d=o[u];d.copy(l,c),c+=d.length}i&&i(l)}),s.end(t)}}}});var Cz=C((aFe,Oz)=>{"use strict";var{randomFillSync:Iz}=require("crypto"),Mye=yS(),Uye=new Uint32Array(256).map((t,e)=>{for(let n=0;n<8;n++)(e&1)!==0?e=e>>>1^3988292384:e>>>=1;return e>>>0}),Nz=(t,e)=>Math.imul(t,e)>>>0,_z=(t,e)=>Uye[(t^e)&255]^t>>>8,rf=()=>typeof Iz=="function"?Iz(Buffer.alloc(12)):rf.node();rf.node=()=>{let t=Buffer.alloc(12),e=t.length;for(let n=0;n<e;n++)t[n]=Math.random()*256&255;return t};var bS={genSalt:rf};function wS(t){let e=Buffer.isBuffer(t)?t:Buffer.from(t);this.keys=new Uint32Array([305419896,591751049,878082192]);for(let n=0;n<e.length;n++)this.updateKeys(e[n])}wS.prototype.updateKeys=function(t){let e=this.keys;return e[0]=_z(e[0],t),e[1]+=e[0]&255,e[1]=Nz(e[1],134775813)+1,e[2]=_z(e[2],e[1]>>>24),t};wS.prototype.next=function(){let t=(this.keys[2]|2)>>>0;return Nz(t,t^1)>>8&255};function Bye(t){let e=new wS(t);return function(n){let r=Buffer.alloc(n.length),i=0;for(let s of n)r[i++]=e.updateKeys(s^e.next());return r}}function Fye(t){let e=new wS(t);return function(n,r,i=0){r||(r=Buffer.alloc(n.length));for(let s of n){let o=e.next();r[i++]=s^o,e.updateKeys(s)}return r}}function Hye(t,e,n){if(!t||!Buffer.isBuffer(t)||t.length<12)return Buffer.alloc(0);let r=Bye(n),i=r(t.slice(0,12)),s=(e.flags&8)===8?e.timeHighByte:e.crc>>>24;if(i[11]!==s)throw Mye.WRONG_PASSWORD();return r(t.slice(12))}function Gye(t){Buffer.isBuffer(t)&&t.length>=12?bS.genSalt=function(){return t.slice(0,12)}:t==="node"?bS.genSalt=rf.node:bS.genSalt=rf}function Wye(t,e,n,r=!1){t==null&&(t=Buffer.alloc(0)),Buffer.isBuffer(t)||(t=Buffer.from(t.toString()));let i=Fye(n),s=bS.genSalt();s[11]=e.crc>>>24&255,r&&(s[10]=e.crc>>>16&255);let o=Buffer.alloc(t.length+12);return i(s,o),i(t,o,12)}Oz.exports={decrypt:Hye,encrypt:Wye,_salter:Gye}});var yz=C(LS=>{LS.Deflater=Az();LS.Inflater=gz();LS.ZipCrypto=Cz()});var dy=C((cFe,bz)=>{var Ke=Oc(),$ye=cy(),Ct=Ke.Constants,uy=yz();bz.exports=function(t,e){var n=new $ye.EntryHeader,r=Buffer.alloc(0),i=Buffer.alloc(0),s=!1,o=null,a=Buffer.alloc(0),l=Buffer.alloc(0),c=!0;let u=t,d=typeof u.decoder=="object"?u.decoder:Ke.decoder;c=d.hasOwnProperty("efs")?d.efs:!1;function E(){return!e||!(e instanceof Uint8Array)?Buffer.alloc(0):(l=n.loadLocalHeaderFromBinary(e),e.slice(n.realDataOffset,n.realDataOffset+n.compressedSize))}function f(R){if(n.flags_desc){let m={},A=n.realDataOffset+n.compressedSize;if(e.readUInt32LE(A)==Ct.LOCSIG||e.readUInt32LE(A)==Ct.CENSIG)throw Ke.Errors.DESCRIPTOR_NOT_EXIST();if(e.readUInt32LE(A)==Ct.EXTSIG)m.crc=e.readUInt32LE(A+Ct.EXTCRC),m.compressedSize=e.readUInt32LE(A+Ct.EXTSIZ),m.size=e.readUInt32LE(A+Ct.EXTLEN);else if(e.readUInt16LE(A+12)===19280)m.crc=e.readUInt32LE(A+Ct.EXTCRC-4),m.compressedSize=e.readUInt32LE(A+Ct.EXTSIZ-4),m.size=e.readUInt32LE(A+Ct.EXTLEN-4);else throw Ke.Errors.DESCRIPTOR_UNKNOWN();if(m.compressedSize!==n.compressedSize||m.size!==n.size||m.crc!==n.crc)throw Ke.Errors.DESCRIPTOR_FAULTY();if(Ke.crc32(R)!==m.crc)return!1}else if(Ke.crc32(R)!==n.localHeader.crc)return!1;return!0}function p(R,m,A){if(typeof m>"u"&&typeof R=="string"&&(A=R,R=void 0),s)return R&&m&&m(Buffer.alloc(0),Ke.Errors.DIRECTORY_CONTENT_ERROR()),Buffer.alloc(0);var N=E();if(N.length===0)return R&&m&&m(N),N;if(n.encrypted){if(typeof A!="string"&&!Buffer.isBuffer(A))throw Ke.Errors.INVALID_PASS_PARAM();N=uy.ZipCrypto.decrypt(N,n,A)}var g=Buffer.alloc(n.size);switch(n.method){case Ke.Constants.STORED:if(N.copy(g),f(g))return R&&m&&m(g),g;throw R&&m&&m(g,Ke.Errors.BAD_CRC()),Ke.Errors.BAD_CRC();case Ke.Constants.DEFLATED:var L=new uy.Inflater(N,n.size);if(R)L.inflateAsync(function(y){y.copy(y,0),m&&(f(y)?m(y):m(y,Ke.Errors.BAD_CRC()))});else{if(L.inflate(g).copy(g,0),!f(g))throw Ke.Errors.BAD_CRC(`"${d.decode(r)}"`);return g}break;default:throw R&&m&&m(Buffer.alloc(0),Ke.Errors.UNKNOWN_METHOD()),Ke.Errors.UNKNOWN_METHOD()}}function h(R,m){if((!o||!o.length)&&Buffer.isBuffer(e))return R&&m&&m(E()),E();if(o.length&&!s){var A;switch(n.method){case Ke.Constants.STORED:return n.compressedSize=n.size,A=Buffer.alloc(o.length),o.copy(A),R&&m&&m(A),A;default:case Ke.Constants.DEFLATED:var N=new uy.Deflater(o);if(R)N.deflateAsync(function(L){A=Buffer.alloc(L.length),n.compressedSize=L.length,L.copy(A),m&&m(A)});else{var g=N.deflate();return n.compressedSize=g.length,g}N=null;break}}else if(R&&m)m(Buffer.alloc(0));else return Buffer.alloc(0)}function T(R,m){return(R.readUInt32LE(m+4)<<4)+R.readUInt32LE(m)}function S(R){try{for(var m=0,A,N,g;m+4<R.length;)A=R.readUInt16LE(m),m+=2,N=R.readUInt16LE(m),m+=2,g=R.slice(m,m+N),m+=N,Ct.ID_ZIP64===A&&I(g)}catch{throw Ke.Errors.EXTRA_FIELD_PARSE_ERROR()}}function I(R){var m,A,N,g;R.length>=Ct.EF_ZIP64_SCOMP&&(m=T(R,Ct.EF_ZIP64_SUNCOMP),n.size===Ct.EF_ZIP64_OR_32&&(n.size=m)),R.length>=Ct.EF_ZIP64_RHO&&(A=T(R,Ct.EF_ZIP64_SCOMP),n.compressedSize===Ct.EF_ZIP64_OR_32&&(n.compressedSize=A)),R.length>=Ct.EF_ZIP64_DSN&&(N=T(R,Ct.EF_ZIP64_RHO),n.offset===Ct.EF_ZIP64_OR_32&&(n.offset=N)),R.length>=Ct.EF_ZIP64_DSN+4&&(g=R.readUInt32LE(Ct.EF_ZIP64_DSN),n.diskNumStart===Ct.EF_ZIP64_OR_16&&(n.diskNumStart=g))}return{get entryName(){return d.decode(r)},get rawEntryName(){return r},set entryName(R){r=Ke.toBuffer(R,d.encode);var m=r[r.length-1];s=m===47||m===92,n.fileNameLength=r.length},get efs(){return typeof c=="function"?c(this.entryName):c},get extra(){return a},set extra(R){a=R,n.extraLength=R.length,S(R)},get comment(){return d.decode(i)},set comment(R){if(i=Ke.toBuffer(R,d.encode),n.commentLength=i.length,i.length>65535)throw Ke.Errors.COMMENT_TOO_LONG()},get name(){var R=d.decode(r);return s?R.substr(R.length-1).split("/").pop():R.split("/").pop()},get isDirectory(){return s},getCompressedData:function(){return h(!1,null)},getCompressedDataAsync:function(R){h(!0,R)},setData:function(R){o=Ke.toBuffer(R,Ke.decoder.encode),!s&&o.length?(n.size=o.length,n.method=Ke.Constants.DEFLATED,n.crc=Ke.crc32(R),n.changed=!0):n.method=Ke.Constants.STORED},getData:function(R){return n.changed?o:p(!1,null,R)},getDataAsync:function(R,m){n.changed?R(o):p(!0,R,m)},set attr(R){n.attr=R},get attr(){return n.attr},set header(R){n.loadFromBinary(R)},get header(){return n},packCentralHeader:function(){n.flags_efs=this.efs,n.extraLength=a.length;var R=n.centralHeaderToBinary(),m=Ke.Constants.CENHDR;return r.copy(R,m),m+=r.length,a.copy(R,m),m+=n.extraLength,i.copy(R,m),R},packLocalHeader:function(){let R=0;n.flags_efs=this.efs,n.extraLocalLength=l.length;let m=n.localHeaderToBinary(),A=Buffer.alloc(m.length+r.length+n.extraLocalLength);return m.copy(A,R),R+=m.length,r.copy(A,R),R+=r.length,l.copy(A,R),R+=l.length,A},toJSON:function(){let R=function(m){return"<"+(m&&m.length+" bytes buffer"||"null")+">"};return{entryName:this.entryName,name:this.name,comment:this.comment,isDirectory:this.isDirectory,header:n.toJSON(),compressedData:R(e),data:R(o)}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var Dz=C((uFe,Lz)=>{var wz=dy(),kye=cy(),_n=Oc();Lz.exports=function(t,e){var n=[],r={},i=Buffer.alloc(0),s=new kye.MainHeader,o=!1,a=null;let l=new Set,c=e,{noSort:u,decoder:d}=c;t?p(c.readEntries):o=!0;function E(){let T=new Set;for(let S of Object.keys(r)){let I=S.split("/");if(I.pop(),!!I.length)for(let R=0;R<I.length;R++){let m=I.slice(0,R+1).join("/")+"/";T.add(m)}}for(let S of T)if(!(S in r)){let I=new wz(c);I.entryName=S,I.attr=16,I.temporary=!0,n.push(I),r[I.entryName]=I,l.add(I)}}function f(){if(o=!0,r={},s.diskEntries>(t.length-s.offset)/_n.Constants.CENHDR)throw _n.Errors.DISK_ENTRY_TOO_LARGE();n=new Array(s.diskEntries);for(var T=s.offset,S=0;S<n.length;S++){var I=T,R=new wz(c,t);R.header=t.slice(I,I+=_n.Constants.CENHDR),R.entryName=t.slice(I,I+=R.header.fileNameLength),R.header.extraLength&&(R.extra=t.slice(I,I+=R.header.extraLength)),R.header.commentLength&&(R.comment=t.slice(I,I+R.header.commentLength)),T+=R.header.centralHeaderSize,n[S]=R,r[R.entryName]=R}l.clear(),E()}function p(T){var S=t.length-_n.Constants.ENDHDR,I=Math.max(0,S-65535),R=I,m=t.length,A=-1,N=0;for(typeof c.trailingSpace=="boolean"&&c.trailingSpace&&(I=0),S;S>=R;S--)if(t[S]===80){if(t.readUInt32LE(S)===_n.Constants.ENDSIG){A=S,N=S,m=S+_n.Constants.ENDHDR,R=S-_n.Constants.END64HDR;continue}if(t.readUInt32LE(S)===_n.Constants.END64SIG){R=I;continue}if(t.readUInt32LE(S)===_n.Constants.ZIP64SIG){A=S,m=S+_n.readBigUInt64LE(t,S+_n.Constants.ZIP64SIZE)+_n.Constants.ZIP64LEAD;break}}if(A==-1)throw _n.Errors.INVALID_FORMAT();s.loadFromBinary(t.slice(A,m)),s.commentLength&&(i=t.slice(N+_n.Constants.ENDHDR)),T&&f()}function h(){n.length>1&&!u&&n.sort((T,S)=>T.entryName.toLowerCase().localeCompare(S.entryName.toLowerCase()))}return{get entries(){return o||f(),n.filter(T=>!l.has(T))},get comment(){return d.decode(i)},set comment(T){i=_n.toBuffer(T,d.encode),s.commentLength=i.length},getEntryCount:function(){return o?n.length:s.diskEntries},forEach:function(T){this.entries.forEach(T)},getEntry:function(T){return o||f(),r[T]||null},setEntry:function(T){o||f(),n.push(T),r[T.entryName]=T,s.totalEntries=n.length},deleteFile:function(T,S=!0){o||f();let I=r[T];this.getEntryChildren(I,S).map(m=>m.entryName).forEach(this.deleteEntry)},deleteEntry:function(T){o||f();let S=r[T],I=n.indexOf(S);I>=0&&(n.splice(I,1),delete r[T],s.totalEntries=n.length)},getEntryChildren:function(T,S=!0){if(o||f(),typeof T=="object")if(T.isDirectory&&S){let I=[],R=T.entryName;for(let m of n)m.entryName.startsWith(R)&&I.push(m);return I}else return[T];return[]},getChildCount:function(T){if(T&&T.isDirectory){let S=this.getEntryChildren(T);return S.includes(T)?S.length-1:S.length}return 0},compressToBuffer:function(){o||f(),h();let T=[],S=[],I=0,R=0;s.size=0,s.offset=0;let m=0;for(let g of this.entries){let L=g.getCompressedData();g.header.offset=R;let y=g.packLocalHeader(),D=y.length+L.length;R+=D,T.push(y),T.push(L);let x=g.packCentralHeader();S.push(x),s.size+=x.length,I+=D+x.length,m++}I+=s.mainHeaderSize,s.offset=R,s.totalEntries=m,R=0;let A=Buffer.alloc(I);for(let g of T)g.copy(A,R),R+=g.length;for(let g of S)g.copy(A,R),R+=g.length;let N=s.toBinary();return i&&i.copy(N,_n.Constants.ENDHDR),N.copy(A,R),t=A,o=!1,A},toAsyncBuffer:function(T,S,I,R){try{o||f(),h();let m=[],A=[],N=0,g=0,L=0;s.size=0,s.offset=0;let y=function(D){if(D.length>0){let x=D.shift(),B=x.entryName+x.extra.toString();I&&I(B),x.getCompressedDataAsync(function(H){R&&R(B),x.header.offset=g;let X=x.packLocalHeader(),J=X.length+H.length;g+=J,m.push(X),m.push(H);let ee=x.packCentralHeader();A.push(ee),s.size+=ee.length,N+=J+ee.length,L++,y(D)})}else{N+=s.mainHeaderSize,s.offset=g,s.totalEntries=L,g=0;let x=Buffer.alloc(N);m.forEach(function(H){H.copy(x,g),g+=H.length}),A.forEach(function(H){H.copy(x,g),g+=H.length});let B=s.toBinary();i&&i.copy(B,_n.Constants.ENDHDR),B.copy(x,g),t=x,o=!1,T(x)}};y(Array.from(this.entries))}catch(m){S(m)}}}}});var vz=C((dFe,xz)=>{var It=Oc(),yt=require("path"),Yye=dy(),Vye=Dz(),Aa=(...t)=>It.findLast(t,e=>typeof e=="boolean"),Pz=(...t)=>It.findLast(t,e=>typeof e=="string"),qye=(...t)=>It.findLast(t,e=>typeof e=="function"),Xye={noSort:!1,readEntries:!1,method:It.Constants.NONE,fs:null};xz.exports=function(t,e){let n=null,r=Object.assign(Object.create(null),Xye);t&&typeof t=="object"&&(t instanceof Uint8Array||(Object.assign(r,t),t=r.input?r.input:void 0,r.input&&delete r.input),Buffer.isBuffer(t)&&(n=t,r.method=It.Constants.BUFFER,t=void 0)),Object.assign(r,e);let i=new It(r);if((typeof r.decoder!="object"||typeof r.decoder.encode!="function"||typeof r.decoder.decode!="function")&&(r.decoder=It.decoder),t&&typeof t=="string")if(i.fs.existsSync(t))r.method=It.Constants.FILE,r.filename=t,n=i.fs.readFileSync(t);else throw It.Errors.INVALID_FILENAME();let s=new Vye(n,r),{canonical:o,sanitize:a,zipnamefix:l}=It;function c(f){if(f&&s){var p;if(typeof f=="string"&&(p=s.getEntry(yt.posix.normalize(f))),typeof f=="object"&&typeof f.entryName<"u"&&typeof f.header<"u"&&(p=s.getEntry(f.entryName)),p)return p}return null}function u(f){let{join:p,normalize:h,sep:T}=yt.posix;return p(".",h(T+f.split("\\").join(T)+T))}function d(f){return f instanceof RegExp?(function(p){return function(h){return p.test(h)}})(f):typeof f!="function"?()=>!0:f}let E=(f,p)=>{let h=p.slice(-1);return h=h===i.sep?i.sep:"",yt.relative(f,p)+h};return{readFile:function(f,p){var h=c(f);return h&&h.getData(p)||null},childCount:function(f){let p=c(f);if(p)return s.getChildCount(p)},readFileAsync:function(f,p){var h=c(f);h?h.getDataAsync(p):p(null,"getEntry failed for:"+f)},readAsText:function(f,p){var h=c(f);if(h){var T=h.getData();if(T&&T.length)return T.toString(p||"utf8")}return""},readAsTextAsync:function(f,p,h){var T=c(f);T?T.getDataAsync(function(S,I){if(I){p(S,I);return}S&&S.length?p(S.toString(h||"utf8")):p("")}):p("")},deleteFile:function(f,p=!0){var h=c(f);h&&s.deleteFile(h.entryName,p)},deleteEntry:function(f){var p=c(f);p&&s.deleteEntry(p.entryName)},addZipComment:function(f){s.comment=f},getZipComment:function(){return s.comment||""},addZipEntryComment:function(f,p){var h=c(f);h&&(h.comment=p)},getZipEntryComment:function(f){var p=c(f);return p&&p.comment||""},updateFile:function(f,p){var h=c(f);h&&h.setData(p)},addLocalFile:function(f,p,h,T){if(i.fs.existsSync(f)){p=p?u(p):"";let S=yt.win32.basename(yt.win32.normalize(f));p+=h||S;let I=i.fs.statSync(f),R=I.isFile()?i.fs.readFileSync(f):Buffer.alloc(0);I.isDirectory()&&(p+=i.sep),this.addFile(p,R,T,I)}else throw It.Errors.FILE_NOT_FOUND(f)},addLocalFileAsync:function(f,p){f=typeof f=="object"?f:{localPath:f};let h=yt.resolve(f.localPath),{comment:T}=f,{zipPath:S,zipName:I}=f,R=this;i.fs.stat(h,function(m,A){if(m)return p(m,!1);S=S?u(S):"";let N=yt.win32.basename(yt.win32.normalize(h));if(S+=I||N,A.isFile())i.fs.readFile(h,function(g,L){return g?p(g,!1):(R.addFile(S,L,T,A),setImmediate(p,void 0,!0))});else if(A.isDirectory())return S+=i.sep,R.addFile(S,Buffer.alloc(0),T,A),setImmediate(p,void 0,!0)})},addLocalFolder:function(f,p,h){if(h=d(h),p=p?u(p):"",f=yt.normalize(f),i.fs.existsSync(f)){let T=i.findFiles(f),S=this;if(T.length)for(let I of T){let R=yt.join(p,E(f,I));h(R)&&S.addLocalFile(I,yt.dirname(R))}}else throw It.Errors.FILE_NOT_FOUND(f)},addLocalFolderAsync:function(f,p,h,T){T=d(T),h=h?u(h):"",f=yt.normalize(f);var S=this;i.fs.open(f,"r",function(I){if(I&&I.code==="ENOENT")p(void 0,It.Errors.FILE_NOT_FOUND(f));else if(I)p(void 0,I);else{var R=i.findFiles(f),m=-1,A=function(){if(m+=1,m<R.length){var N=R[m],g=E(f,N).split("\\").join("/");g=g.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\x20-\x7E]/g,""),T(g)?i.fs.stat(N,function(L,y){L&&p(void 0,L),y.isFile()?i.fs.readFile(N,function(D,x){D?p(void 0,D):(S.addFile(h+g,x,"",y),A())}):(S.addFile(h+g+"/",Buffer.alloc(0),"",y),A())}):process.nextTick(()=>{A()})}else p(!0,void 0)};A()}})},addLocalFolderAsync2:function(f,p){let h=this;f=typeof f=="object"?f:{localPath:f},localPath=yt.resolve(u(f.localPath));let{zipPath:T,filter:S,namefix:I}=f;S instanceof RegExp?S=(function(A){return function(N){return A.test(N)}})(S):typeof S!="function"&&(S=function(){return!0}),T=T?u(T):"",I=="latin1"&&(I=A=>A.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\x20-\x7E]/g,"")),typeof I!="function"&&(I=A=>A);let R=A=>yt.join(T,I(E(localPath,A))),m=A=>yt.win32.basename(yt.win32.normalize(I(A)));i.fs.open(localPath,"r",function(A){A&&A.code==="ENOENT"?p(void 0,It.Errors.FILE_NOT_FOUND(localPath)):A?p(void 0,A):i.findFilesAsync(localPath,function(N,g){if(N)return p(N);g=g.filter(L=>S(R(L))),g.length||p(void 0,!1),setImmediate(g.reverse().reduce(function(L,y){return function(D,x){if(D||x===!1)return setImmediate(L,D,!1);h.addLocalFileAsync({localPath:y,zipPath:yt.dirname(R(y)),zipName:m(y)},L)}},p))})})},addLocalFolderPromise:function(f,p){return new Promise((h,T)=>{this.addLocalFolderAsync2(Object.assign({localPath:f},p),(S,I)=>{S&&T(S),I&&h(this)})})},addFile:function(f,p,h,T){f=l(f);let S=c(f),I=S!=null;I||(S=new Yye(r),S.entryName=f),S.comment=h||"";let R=typeof T=="object"&&T instanceof i.fs.Stats;R&&(S.header.time=T.mtime);var m=S.isDirectory?16:0;let A=S.isDirectory?16384:32768;return R?A|=4095&T.mode:typeof T=="number"?A|=4095&T:A|=S.isDirectory?493:420,m=(m|A<<16)>>>0,S.attr=m,S.setData(p),I||s.setEntry(S),S},getEntries:function(f){return s.password=f,s?s.entries:[]},getEntry:function(f){return c(f)},getEntryCount:function(){return s.getEntryCount()},forEach:function(f){return s.forEach(f)},extractEntryTo:function(f,p,h,T,S,I){T=Aa(!1,T),S=Aa(!1,S),h=Aa(!0,h),I=Pz(S,I);var R=c(f);if(!R)throw It.Errors.NO_ENTRY();var m=o(R.entryName),A=a(p,I&&!R.isDirectory?I:h?m:yt.basename(m));if(R.isDirectory){var N=s.getEntryChildren(R);return N.forEach(function(y){if(y.isDirectory)return;var D=y.getData();if(!D)throw It.Errors.CANT_EXTRACT_FILE();var x=o(y.entryName),B=a(p,h?x:yt.basename(x));let H=S?y.header.fileAttr:void 0;i.writeFileTo(B,D,T,H)}),!0}var g=R.getData(s.password);if(!g)throw It.Errors.CANT_EXTRACT_FILE();if(i.fs.existsSync(A)&&!T)throw It.Errors.CANT_OVERRIDE();let L=S?f.header.fileAttr:void 0;return i.writeFileTo(A,g,T,L),!0},test:function(f){if(!s)return!1;for(var p in s.entries)try{if(p.isDirectory)continue;var h=s.entries[p].getData(f);if(!h)return!1}catch{return!1}return!0},extractAllTo:function(f,p,h,T){if(h=Aa(!1,h),T=Pz(h,T),p=Aa(!1,p),!s)throw It.Errors.NO_ZIP();s.entries.forEach(function(S){var I=a(f,o(S.entryName));if(S.isDirectory){i.makeDir(I);return}var R=S.getData(T);if(!R)throw It.Errors.CANT_EXTRACT_FILE();let m=h?S.header.fileAttr:void 0;i.writeFileTo(I,R,p,m);try{i.fs.utimesSync(I,S.header.time,S.header.time)}catch{throw It.Errors.CANT_EXTRACT_FILE()}})},extractAllToAsync:function(f,p,h,T){if(T=qye(p,h,T),h=Aa(!1,h),p=Aa(!1,p),!T)return new Promise((A,N)=>{this.extractAllToAsync(f,p,h,function(g){g?N(g):A(this)})});if(!s){T(It.Errors.NO_ZIP());return}f=yt.resolve(f);let S=A=>a(f,yt.normalize(o(A.entryName))),I=(A,N)=>new Error(A+': "'+N+'"'),R=[],m=[];s.entries.forEach(A=>{A.isDirectory?R.push(A):m.push(A)});for(let A of R){let N=S(A),g=h?A.header.fileAttr:void 0;try{i.makeDir(N),g&&i.fs.chmodSync(N,g),i.fs.utimesSync(N,A.header.time,A.header.time)}catch{T(I("Unable to create folder",N))}}m.reverse().reduce(function(A,N){return function(g){if(g)A(g);else{let L=yt.normalize(o(N.entryName)),y=a(f,L);N.getDataAsync(function(D,x){if(x)A(x);else if(!D)A(It.Errors.CANT_EXTRACT_FILE());else{let B=h?N.header.fileAttr:void 0;i.writeFileToAsync(y,D,p,B,function(H){H||A(I("Unable to write file",y)),i.fs.utimes(y,N.header.time,N.header.time,function(X){X?A(I("Unable to set times",y)):A()})})}})}}},T)()},writeZip:function(f,p){if(arguments.length===1&&typeof f=="function"&&(p=f,f=""),!f&&r.filename&&(f=r.filename),!!f){var h=s.compressToBuffer();if(h){var T=i.writeFileTo(f,h,!0);typeof p=="function"&&p(T?null:new Error("failed"),"")}}},writeZipPromise:function(f,p){let{overwrite:h,perm:T}=Object.assign({overwrite:!0},p);return new Promise((S,I)=>{!f&&r.filename&&(f=r.filename),f||I("ADM-ZIP: ZIP File Name Missing"),this.toBufferPromise().then(R=>{let m=A=>A?S(A):I("ADM-ZIP: Wasn't able to write zip file");i.writeFileToAsync(f,R,h,T,m)},I)})},toBufferPromise:function(){return new Promise((f,p)=>{s.toAsyncBuffer(f,p)})},toBuffer:function(f,p,h,T){return typeof f=="function"?(s.toAsyncBuffer(f,p,h,T),null):s.compressToBuffer()}}}});var ma,Mz=G(()=>{"use strict";ma=class{constructor(e){this._isSheet=!1;this._workbookId=0;this._recId=null;this._workbookName=null;this._inCellXf=!1;this._inCellStyleXf=!1;this._inNumberFormat=!1;this._parentCellStyleXf=0;this._numberFormatIndex=0;this._format=0;this._formatString=null;this._sharedStringValue=null;this._sharedStringUniqueCount=0;this._cellType=0;this._intValue=0;this._doubleVal=0;this._boolValue=!1;this._stringValue=null;this._columnNum=-1;this._xfIndex=0;this._readCell=!1;this._rowIndex=-1;this._recordStart=0;this._xfIndexToNumFmtId=[];this._customNumFmts=new Set;if(!Buffer.isBuffer(e))throw new Error("BiffReaderWriter expects a Buffer");this.buffer=e,this.pos=0,this.length=e.length}_tryReadVariableValue(){if(this.pos>=this.length)return null;let e=this.buffer[this.pos++],n=(e&127)>>>0;if((e&128)===0)return n;if(this.pos>=this.length)return null;let r=this.buffer[this.pos++];if(n=((r&127)<<7|n)>>>0,(r&128)===0)return n;if(this.pos>=this.length)return null;let i=this.buffer[this.pos++];return n=((i&127)<<14|n)>>>0,(i&128)===0?n:this.pos>=this.length?null:(n=((this.buffer[this.pos++]&127)<<21|n)>>>0,n)}_getDWord(e){return this.buffer.readUInt32LE(this._recordStart+e)}_getInt32(e){return this.buffer.readInt32LE(this._recordStart+e)}_getWord(e){return this.buffer.readUInt16LE(this._recordStart+e)}_getByte(e){return this.buffer[this._recordStart+e]}_getDouble(e){return this.buffer.readDoubleLE(this._recordStart+e)}_getString(e,n){let r=this._recordStart+e,i=r+n*2;return i>this.buffer.length?"":this.buffer.toString("utf16le",r,i)}_getNullableString(e){let n=this._getDWord(e.val);if(e.val+=4,n===4294967295)return null;let r=this._getString(e.val,n);return e.val+=n*2,r}readWorkbook(){let e=this._tryReadVariableValue(),n=this._tryReadVariableValue();if(e===null||n===null)return!1;let r=this.pos;if(r+n>this.length)return!1;if(this._recordStart=r,this.pos+=n,this._isSheet=!1,e===156){this._workbookId=this._getDWord(4);let i={val:8};this._recId=this._getNullableString(i);let s=this._getDWord(i.val);this._workbookName=this._getString(i.val+4,s),this._isSheet=!0}return!0}readSharedStrings(){let e=this._tryReadVariableValue(),n=this._tryReadVariableValue();if(e===null||n===null)return!1;let r=this.pos;if(r+n>this.length)return!1;if(this._recordStart=r,this.pos+=n,this._sharedStringValue=null,e===19){let i=this._getDWord(1);this._sharedStringValue=this._getString(5,i)}else e===159&&(this._sharedStringUniqueCount=this._getDWord(4));return!0}readStyles(){let e=this._tryReadVariableValue(),n=this._tryReadVariableValue();if(e===null||n===null)return!1;let r=this.pos;if(r+n>this.length)return!1;this._recordStart=r,this.pos+=n;let i=617,s=618,o=626,a=627,l=615,c=616,u=47,d=44;switch(e){case i:this._inCellXf=!0;break;case s:this._inCellXf=!1;break;case o:this._inCellStyleXf=!0;break;case a:this._inCellStyleXf=!1;break;case l:this._inNumberFormat=!0;break;case c:this._inNumberFormat=!1;break;case u:this._inCellXf&&(this._parentCellStyleXf=this._getWord(0),this._numberFormatIndex=this._getWord(2),this._xfIndexToNumFmtId.push(this._numberFormatIndex));break;case d:if(this._inNumberFormat){this._format=this._getWord(0);let E=this._getDWord(2);this._formatString=this._getString(6,E);let f=this._formatString.toLowerCase();(f.includes("yy")||f.includes("mm")||f.includes("dd")||f.includes("h:mm"))&&this._customNumFmts.add(this._format)}break}return!0}_getRkNumber(e){let n=this._getByte(e),r=0;if((n&2)!==0)r=this._getInt32(e)>>2;else{let s=this._getInt32(e)&4294967292,o=Buffer.allocUnsafe(8);o.writeInt32LE(0,0),o.writeInt32LE(s,4),r=o.readDoubleLE(0)}return(n&1)!==0&&(r/=100),r}readWorksheet(){let e=this._tryReadVariableValue(),n=this._tryReadVariableValue();if(e===null||n===null)return!1;let r=this.pos;if(r+n>this.length)return!1;this._recordStart=r,this.pos+=n,this._readCell=!1,this._columnNum=-1;let i=0,s=1,o=2,a=3,l=4,c=5,u=6,d=7,E=8,f=9,p=10,h=11;switch(e){case i:this._rowIndex=this._getInt32(0);break;case s:case a:case h:this._readCell=!0,this._cellType=0;break;case o:this._doubleVal=this._getRkNumber(8),this._readCell=!0,this._cellType=3;break;case l:case p:this._boolValue=this._getByte(8)===1,this._readCell=!0,this._cellType=4;break;case f:case c:this._doubleVal=this._getDouble(8),this._readCell=!0,this._cellType=3;break;case u:case E:{let T=this._getDWord(8);this._stringValue=this._getString(12,T),this._readCell=!0,this._cellType=5;break}case d:this._intValue=this._getDWord(8),this._readCell=!0,this._cellType=2;break}return this._readCell&&(this._columnNum=this._getDWord(0),this._xfIndex=this._getDWord(4)&16777215),!0}}});var Uz,DS,Bz=G(()=>{"use strict";Uz=z(vz());oy();Mz();DS=class extends _c{constructor(){super();this.zip=null;this.sharedStrings=[];this.styles=[];this.sheetNames=[];this.sheets=[];this._currentSheetIndex=-1;this._reader=null;this._currentRow=[];this._pendingRowIndex=-1;this._eof=!1;this.xfIdToNumFmtId=[];this.customDateFormats=null}async open(n,r=!0){this.zip=new Uz.default(n);let i=this.zip.getEntry("xl/workbook.bin");if(i){let a=i.getData(),l=new ma(a);for(;l.readWorkbook();)if(l._isSheet){let c=l._workbookName,u=l._recId;this.sheetNames.push(c),this.sheets.push({name:c,rId:u,path:null})}}let s=this.zip.getEntry("xl/_rels/workbook.bin.rels");if(s){let a=s.getData().toString("utf8"),l=/<Relationship[^>]*Id="([^"]*)"[^>]*Target="([^"]*)"/g,c,u={};for(;(c=l.exec(a))!==null;)u[c[1]]=c[2];for(let d of this.sheets){let E=u[d.rId];E&&(E.startsWith("/")&&(E=E.substring(1)),E.startsWith("xl/")||(E="xl/"+E),d.path=E)}}if(r){let a="xl/sharedStrings.bin";this.zip.getEntry(a)&&this._readSharedStrings(a)}let o="xl/styles.bin";this.zip.getEntry(o)&&this._readStyles(o),this.resultsCount=this.sheets.length,this._currentSheetIndex=-1}_readSharedStrings(n){let r=this.zip.getEntry(n);if(!r)return;let i=new ma(r.getData());for(;i.readSharedStrings();)i._sharedStringValue!==null&&this.sharedStrings.push(i._sharedStringValue)}_readStyles(n){let r=this.zip.getEntry(n);if(!r)return;let i=new ma(r.getData());for(;i.readStyles(););this.xfIdToNumFmtId=i._xfIndexToNumFmtId,this.customDateFormats=i._customNumFmts}getSheetNames(){return this.sheetNames}read(){if(this._currentSheetIndex===-1&&(this._currentSheetIndex=0,!this._initSheet(0))||this._eof)return!1;for(this._currentRow=[];;){if(!this._reader.readWorksheet())return this._eof=!0,!0;if(this._reader._rowIndex!==-1&&this._reader._rowIndex!==this._pendingRowIndex)return this._pendingRowIndex=this._reader._rowIndex,!0;if(this._reader._readCell){let r=this._reader._columnNum,i=null;switch(this._reader._cellType){case 2:i=this.sharedStrings[this._reader._intValue];break;case 3:{i=this._reader._doubleVal;let s=this._reader._xfIndex,o=0;if(this.xfIdToNumFmtId&&s<this.xfIdToNumFmtId.length&&(o=this.xfIdToNumFmtId[s]),o>=14&&o<=22||o>=45&&o<=47||this.customDateFormats&&this.customDateFormats.has(o))try{i=this.getDateTimeFromOaDate(i)}catch{}break}case 4:i=this._reader._boolValue;break;case 5:i=this._reader._stringValue;break;default:i=null}this._currentRow[r]=i,r>=this.fieldCount&&(this.fieldCount=r+1)}}}_initSheet(n){if(n>=this.sheets.length)return!1;let r=this.sheets[n],i=this.zip.getEntry(r.path);if(!i)return!1;for(this._reader=new ma(i.getData()),this._eof=!1,this._pendingRowIndex=-1;this._reader.readWorksheet();)if(this._reader._rowIndex!==-1)return this._pendingRowIndex=this._reader._rowIndex,!0;return this._eof=!0,!1}getValue(n){return n<0||n>=this._currentRow.length?null:this._currentRow[n]}}});var Hz={};ht(Hz,{ReaderFactory:()=>PS,default:()=>zye});var Fz,PS,zye,Gz=G(()=>{"use strict";Fz=z(require("path"));tz();Bz();PS=class{static create(e){let n=Fz.extname(e).toLowerCase();if(n===".xlsx")return new CS;if(n===".xlsb")return new DS;throw new Error(`Unsupported extension: ${n}`)}},zye=PS});var kz={};ht(kz,{ColumnTypeChooser:()=>yc,NetezzaDataType:()=>Li,NetezzaImporter:()=>xS,importDataToNetezza:()=>hy});async function hy(t,e,n,r,i){let s=Date.now(),o=null;try{if(!t||!Yr.existsSync(t))return{success:!1,message:`Source file not found: ${t}`};if(!e)return{success:!1,message:"Target table name is required"};if(!n||!n.host)return{success:!1,message:"Connection details are required"};let l=Yr.statSync(t).size,c=ga.extname(t).toLowerCase(),u=[".csv",".txt",".xlsx",".xlsb"];if(!u.includes(c))return{success:!1,message:`Unsupported file format: ${c}. Supported: ${u.join(", ")}`};r?.("Starting import process..."),r?.(`  Source file: ${t}`),r?.(`  Target table: ${e}`),r?.(`  File size: ${l.toLocaleString()} bytes`),r?.(`  File format: ${c}`);let d=new xS(t,e);await d.analyzeDataTypes(r),r?.("Preparing in-memory data stream...");let E=await d.createDataStream(r),f=d.getVirtualFileName();r?.(`Registered virtual stream: ${f}`);let p=On();p&&p.registerImportStream?p.registerImportStream(f,E):r?.("Warning: NzConnection driver does not support stream registry. Import might fail.");let h=d.generateCreateTableSql();r?.("Generated SQL:"),r?.(h),r?.("Connecting to Netezza...");let T={host:n.host,port:n.port||5480,database:n.database,user:n.user,password:n.password},S=On();o=new S(T),await o.connect();try{r?.("Executing CREATE TABLE with EXTERNAL data...");let R=o.createCommand(h);R.commandTimeout=i||3600;let m=d.getRowsCount();o.on("importProgress",A=>{let N=A,g=m>0?Math.round(N.percentComplete/100*m):0;r?.(`Importing: ${N.percentComplete}% complete (${g.toLocaleString()} / ${m.toLocaleString()} rows)`)}),await R.execute(),r?.("Import completed successfully")}finally{await o.close(),p&&p.unregisterImportStream&&p.unregisterImportStream(f)}let I=(Date.now()-s)/1e3;return{success:!0,message:"Import completed successfully",details:{sourceFile:t,targetTable:e,fileSize:l,format:c,rowsProcessed:d.getRowsCount(),rowsInserted:d.getRowsCount(),processingTime:`${I.toFixed(1)}s`,columns:d.getSqlHeaders().length,detectedDelimiter:d.getCsvDelimiter()}}}catch(a){let l=(Date.now()-s)/1e3;return{success:!1,message:`Import failed: ${a instanceof Error?a.message:String(a)}`,details:{processingTime:`${l.toFixed(1)}s`}}}finally{if(o&&o._connected)try{await o.close()}catch{}}}var Yr,ga,$z,Wz,fy,Li,yc,Ey,xS,vS=G(()=>{"use strict";Yr=z(require("fs")),ga=z(require("path")),$z=require("stream"),Wz=()=>new Promise(t=>setTimeout(t,0));try{let t=(Gz(),Is(Hz));fy=t.default||t.ReaderFactory||t}catch(t){console.error("libs/ExcelHelpersTs/ReaderFactory module not available",t)}Li=class{constructor(e,n,r,i){this.dbType=e;this.precision=n;this.scale=r;this.length=i}toString(){return["BIGINT","DATE","DATETIME"].includes(this.dbType)?this.dbType:this.dbType==="NUMERIC"?`${this.dbType}(${this.precision},${this.scale})`:this.dbType==="NVARCHAR"?`${this.dbType}(${this.length})`:`TODO !!! ${this.dbType}`}},yc=class{constructor(e="."){this.decimalDelimInCsv=".";this.firstTime=!0;this.currentType=new Li("BIGINT"),this.decimalDelimInCsv=e}getType(e){let n=this.currentType.dbType,r=e.length;if(n==="BIGINT"&&/^\d+$/.test(e)&&r<15)return this.firstTime=!1,new Li("BIGINT");let i=this.decimalDelimInCsv==="."?"\\.":this.decimalDelimInCsv,s=(e.match(new RegExp(`${i}`,"g"))||[]).length;if(["BIGINT","NUMERIC"].includes(n)&&s<=1){let a=e.replace(this.decimalDelimInCsv,"");if(/^\d+$/.test(a)&&r<15&&(!a.startsWith("0")||s>0||a==="0"))return this.firstTime=!1,new Li("NUMERIC",16,6)}if((n==="DATE"||this.firstTime)&&(e.match(/-/g)||[]).length===2&&r>=8&&r<=10){let a=e.split("-");if(a.length===3&&a.every(l=>/^\d+$/.test(l)))try{let l=new Date(parseInt(a[0]),parseInt(a[1])-1,parseInt(a[2]));if(!isNaN(l.getTime()))return this.firstTime=!1,new Li("DATE")}catch{}}if((n==="DATETIME"||this.firstTime)&&(e.match(/-/g)||[]).length===2&&r>=12&&r<=20){let a=e.match(/^(\d{4})-(\d{1,2})-(\d{1,2})[\s|T](\d{2}):(\d{2})(:?(\d{2}))?$/);if(a)try{let l=a[7]?parseInt(a[7]):0,c=new Date(parseInt(a[1]),parseInt(a[2])-1,parseInt(a[3]),parseInt(a[4]),parseInt(a[5]),l);if(!isNaN(c.getTime()))return this.firstTime=!1,new Li("DATETIME")}catch{}}if((n==="DATETIME"||this.firstTime)&&(e.match(/\./g)||[]).length>=2){let a=e.match(/^(\d{1,2})\.(\d{1,2})\.(\d{4})(?:\s+(\d{1,2}):(\d{1,2})(?::(\d{1,2}))?)?$/);if(a)try{let l=parseInt(a[1]),c=parseInt(a[2])-1,u=parseInt(a[3]),d=a[4]?parseInt(a[4]):0,E=a[5]?parseInt(a[5]):0,f=a[6]?parseInt(a[6]):0;if(c>=0&&c<=11&&l>=1&&l<=31){let p=new Date(u,c,l,d,E,f);if(!isNaN(p.getTime())&&p.getFullYear()===u&&p.getMonth()===c&&p.getDate()===l)return this.firstTime=!1,new Li("DATETIME")}}catch{}}let o=Math.max(r+5,20);return this.currentType.length!==void 0&&o<this.currentType.length&&(o=this.currentType.length),this.firstTime=!1,new Li("NVARCHAR",void 0,void 0,o)}refreshCurrentType(e){return this.currentType=this.getType(e),this.currentType}},Ey=class extends $z.Readable{constructor(n,r,i){super();this.currentIndex=0;this.byteLength=0;this.lastReportedIndex=-1;this.lastReportTime=0;this.lastReportedMessage="";this.importer=n,this.rows=r,this.progressCallback=i,this.currentIndex=0,this.lastReportedIndex=-1,this.lastReportTime=0,this.lastReportedMessage="";try{this.byteLength=r.reduce((s,o)=>{let a=o.reduce((l,c)=>l+(c?c.length:0),0);return s+a+o.length},0)}catch{this.byteLength=1024*1024}}_read(n){try{let r=!0;for(;r&&this.currentIndex<this.rows.length;){let a=this.rows[this.currentIndex].map((l,c)=>this.importer.formatValue(l||"",c)).join(this.importer.getDelimiter())+this.importer.getRecordDelim();r=this.push(Buffer.from(a,"utf8")),this.currentIndex++}let i=this.rows.length;if(this.currentIndex>this.lastReportedIndex){let s=Date.now();if(this.currentIndex>=i||s-this.lastReportTime>=1e3){let c=`Importing: ${Math.floor(this.currentIndex/i*100)}% complete (${this.currentIndex.toLocaleString()} / ${i.toLocaleString()} rows)`,d=(this.currentIndex-(this.lastReportedIndex<0?0:this.lastReportedIndex))/i*100;c!==this.lastReportedMessage&&(this.progressCallback?.(c,d,!1),this.lastReportedIndex=this.currentIndex,this.lastReportTime=s,this.lastReportedMessage=c)}}this.currentIndex>=this.rows.length&&this.push(null)}catch(r){this.emit("error",r)}}},xS=class{constructor(e,n,r){this.delimiter="	";this.delimiterPlain="\\t";this.recordDelim=`
`;this.recordDelimPlain="\\n";this.escapechar="\\";this.csvDelimiter=",";this.excelData=[];this.isExcelFile=!1;this.sqlHeaders=[];this.dataTypes=[];this.rowsCount=0;this.valuesToEscape=[];this.filePath=e,this.targetTable=n,this.logDir=r||ga.join(ga.dirname(e),"netezza_logs");let i=ga.extname(e).toLowerCase();this.isExcelFile=[".xlsx",".xlsb"].includes(i),this.virtualFileName=`virtual_import_${Date.now()}_${Math.floor(Math.random()*1e3)}.txt`,this.valuesToEscape=[this.escapechar,this.recordDelim,"\r",this.delimiter],Yr.existsSync(this.logDir)||Yr.mkdirSync(this.logDir,{recursive:!0})}getDelimiter(){return this.delimiter}getRecordDelim(){return this.recordDelim}detectCsvDelimiter(){let n=Yr.readFileSync(this.filePath,"utf-8").split(`
`)[0]||"";n.startsWith("\uFEFF")&&(n=n.slice(1));let r=[";","	","|",","],i={};for(let o of r)i[o]=(n.match(new RegExp(o==="|"?"\\|":o,"g"))||[]).length;let s=Math.max(...Object.values(i));s>0&&(this.csvDelimiter=Object.keys(i).find(o=>i[o]===s)||",")}cleanColumnName(e){let n=String(e).trim();return n=n.replace(/[^0-9a-zA-Z]+/g,"_").toUpperCase(),(!n||/^\d/.test(n)||n.startsWith("_"))&&(n="COL"+(n.startsWith("_")?"":"_")+n),n}parseCsvLine(e){let n=[],r="",i=!1;for(let s=0;s<e.length;s++){let o=e[s];o==='"'?i&&e[s+1]==='"'?(r+='"',s++):i=!i:o===this.csvDelimiter&&!i?(n.push(r),r=""):r+=o}return n.push(r),n}async readExcelFile(e){if(!fy)throw new Error("ReaderFactory module not available");e?.("Reading Excel file...");let n=fy.create(this.filePath);await n.open(this.filePath);let r=[],i=o=>{if(o==null)return"";if(o instanceof Date){let a=l=>l<10?"0"+l:l;return`${o.getFullYear()}-${a(o.getMonth()+1)}-${a(o.getDate())} ${a(o.getHours())}:${a(o.getMinutes())}:${a(o.getSeconds())}`}return String(o)},s=0;for(;await n.read();){let o=[],a=n._currentRow;if(a&&Array.isArray(a))for(let l=0;l<a.length;l++)o.push(i(a[l]));r.push(o),s++,s%1e4===0&&(e?.(`Processed ${s.toLocaleString()} rows...`,void 0,!1),await Wz())}return typeof n.close=="function"&&await n.close(),e?.(`Excel file loaded: ${r.length} rows`),r}async analyzeDataTypes(e){e?.("Analyzing data types...");let n;if(this.isExcelFile)this.excelData=await this.readExcelFile(e),n=this.excelData;else{this.detectCsvDelimiter();let i=Yr.readFileSync(this.filePath,"utf-8");i.startsWith("\uFEFF")&&(i=i.slice(1));let s=i.split(/\r?\n/);n=[];for(let o of s)o.trim()&&n.push(this.parseCsvLine(o))}if(!n||n.length===0)throw new Error("No data found in file");let r=[];this.sqlHeaders=n[0].map(i=>this.cleanColumnName(i||"COLUMN"));for(let i=0;i<n[0].length;i++)r.push(new yc);for(let i=1;i<n.length;i++){let s=n[i];for(let o=0;o<s.length;o++)o<r.length&&s[o]&&s[o].trim()&&r[o].refreshCurrentType(s[o].trim());i%1e4===0&&(e?.(`Analyzed ${i.toLocaleString()} rows...`,void 0,!1),await Wz())}return this.rowsCount=n.length-1,e?.(`Analysis complete: ${this.rowsCount.toLocaleString()} rows`),this.dataTypes=r,r}escapeValue(e){let n=String(e).trim();for(let r of this.valuesToEscape)n=n.split(r).join(`${this.escapechar}${r}`);return n}formatValue(e,n){let r=this.escapeValue(e);return n<this.dataTypes.length&&this.dataTypes[n].currentType.dbType==="DATETIME"&&(r=r.replace("T"," ")),r}generateCreateTableSql(){let e=[];for(let r=0;r<this.sqlHeaders.length;r++){let i=this.sqlHeaders[r],s=this.dataTypes[r];e.push(`        ${i} ${s.currentType.toString()}`)}let n=this.logDir.replace(/\\/g,"/");return`CREATE TABLE ${this.targetTable} AS 
(
    SELECT * FROM EXTERNAL '${this.virtualFileName}'
    (
${e.join(`,
`)}
    )
    USING
    (
        REMOTESOURCE 'jdbc'
        DELIMITER '${this.delimiterPlain}'
        RecordDelim '${this.recordDelimPlain}'
        ESCAPECHAR '${this.escapechar}'
        NULLVALUE ''
        ENCODING 'utf-8'
        TIMESTYLE '24HOUR'
        SKIPROWS 0
        MAXERRORS 10
        LOGDIR '${n}'
    )
) DISTRIBUTE ON RANDOM;`}async createDataStream(e){e?.("Preparing data stream...");try{let n;if(this.isExcelFile){if(!this.excelData||this.excelData.length===0)throw new Error("Excel data not loaded. Call analyzeDataTypes first.");n=this.excelData.slice(1)}else{let r=Yr.readFileSync(this.filePath,"utf-8");r.startsWith("\uFEFF")&&(r=r.slice(1));let i=r.split(/\r?\n/);n=[];let s=!0;for(let o of i)if(o.trim()){if(s){s=!1;continue}n.push(this.parseCsvLine(o))}}return this.rowsCount=n.length,new Ey(this,n,e)}catch(n){let r=n instanceof Error?n.message:String(n);throw e?.(`Error preparing stream: ${r}`),n}}getVirtualFileName(){return this.virtualFileName}getRowsCount(){return this.rowsCount}getSqlHeaders(){return this.sqlHeaders}getCsvDelimiter(){return this.csvDelimiter}}});var i6=G(()=>{"use strict"});async function Ze(t,e){let r=await t.createCommand(e).executeReader(),i=[];for(;await r.read();){let s={};for(let o=0;o<r.fieldCount;o++)s[r.getName(o)]=r.getValue(o);i.push(s)}return i}function pe(t){return!t||/^[A-Z_][A-Z0-9_]*$/i.test(t)&&t===t.toUpperCase()?t:`"${t.replace(/"/g,'""')}"`}function s6(t){if(!t)return t;let e=t.trim().toUpperCase();return e==="CHARACTER VARYING"?"CHARACTER VARYING(ANY)":e==="NATIONAL CHARACTER VARYING"?"NATIONAL CHARACTER VARYING(ANY)":e==="NATIONAL CHARACTER"?"NATIONAL CHARACTER(ANY)":e==="CHARACTER"?"CHARACTER(ANY)":t}async function sf(t){let e={host:t.host,port:t.port||5480,database:t.database,user:t.user,password:t.password},n=On(),r=new n(e);return await r.connect(),r}var qr=G(()=>{"use strict"});async function Xr(t,e,n,r){let i=`
        SELECT 
            X.OBJID::INT AS OBJID
            , X.ATTNAME
            , X.DESCRIPTION
            , X.FORMAT_TYPE AS FULL_TYPE
            , X.ATTNOTNULL::BOOL AS ATTNOTNULL
            , X.COLDEFAULT
        FROM
            ${e.toUpperCase()}.._V_RELATION_COLUMN X
        INNER JOIN
            ${e.toUpperCase()}.._V_OBJECT_DATA D ON X.OBJID = D.OBJID
        WHERE
            X.TYPE IN ('TABLE','VIEW','EXTERNAL TABLE', 'SEQUENCE','SYSTEM VIEW','SYSTEM TABLE')
            AND X.OBJID NOT IN (4,5)
            AND D.SCHEMA = '${n.toUpperCase()}'
            AND D.OBJNAME = '${r.toUpperCase()}'
        ORDER BY 
            X.OBJID, X.ATTNUM
    `,s=await Ze(t,i),o=[];for(let a of s){let l=!1,c=a.ATTNOTNULL;if(typeof c=="boolean")l=c;else if(typeof c=="number")l=c!==0;else if(typeof c=="string"){let u=c.trim().toLowerCase();l=u==="t"||u==="true"||u==="1"||u==="yes"}o.push({name:a.ATTNAME,description:a.DESCRIPTION||null,fullTypeName:a.FULL_TYPE,notNull:l,defaultValue:a.COLDEFAULT||null})}return o}async function hs(t,e,n,r){try{let i=`
            SELECT ATTNAME
            FROM ${e.toUpperCase()}.._V_TABLE_DIST_MAP
            WHERE SCHEMA = '${n.toUpperCase()}'
                AND TABLENAME = '${r.toUpperCase()}'
            ORDER BY DISTSEQNO
        `;return(await Ze(t,i)).map(o=>o.ATTNAME)}catch{return[]}}async function ps(t,e,n,r){try{let i=`
            SELECT ATTNAME
            FROM ${e.toUpperCase()}.._V_TABLE_ORGANIZE_COLUMN
            WHERE SCHEMA = '${n.toUpperCase()}'
                AND TABLENAME = '${r.toUpperCase()}'
            ORDER BY ORGSEQNO
        `;return(await Ze(t,i)).map(o=>o.ATTNAME)}catch{return[]}}async function Ts(t,e,n,r){let i=`
        SELECT 
            X.SCHEMA
            , X.RELATION
            , X.CONSTRAINTNAME
            , X.CONTYPE
            , X.ATTNAME
            , X.PKDATABASE
            , X.PKSCHEMA
            , X.PKRELATION
            , X.PKATTNAME
            , X.UPDT_TYPE
            , X.DEL_TYPE
        FROM 
            ${e.toUpperCase()}.._V_RELATION_KEYDATA X
        WHERE 
            X.OBJID NOT IN (4,5)
            AND X.SCHEMA = '${n.toUpperCase()}'
            AND X.RELATION = '${r.toUpperCase()}'
        ORDER BY
            X.SCHEMA, X.RELATION, X.CONSEQ
    `,s=new Map;try{let o=await Ze(t,i);for(let a of o){let l=a.CONSTRAINTNAME;if(!s.has(l)){let u={p:"PRIMARY KEY",f:"FOREIGN KEY",u:"UNIQUE"};s.set(l,{type:u[a.CONTYPE]||"UNKNOWN",typeChar:a.CONTYPE,columns:[],pkDatabase:a.PKDATABASE||null,pkSchema:a.PKSCHEMA||null,pkRelation:a.PKRELATION||null,pkColumns:[],updateType:a.UPDT_TYPE||"NO ACTION",deleteType:a.DEL_TYPE||"NO ACTION"})}let c=s.get(l);c.columns.push(a.ATTNAME),a.PKATTNAME&&c.pkColumns.push(a.PKATTNAME)}}catch(o){console.warn("Cannot retrieve keys info:",o)}return s}async function Ia(t,e,n,r){try{let i=`
            SELECT DESCRIPTION
            FROM ${e.toUpperCase()}.._V_OBJECT_DATA
            WHERE SCHEMA = '${n.toUpperCase()}'
                AND OBJNAME = '${r.toUpperCase()}'
                AND OBJTYPE = 'TABLE'
        `,s=await Ze(t,i);if(s.length>0&&s[0].DESCRIPTION)return s[0].DESCRIPTION}catch{try{let i=`
                SELECT DESCRIPTION
                FROM ${e.toUpperCase()}.._V_OBJECT_DATA
                WHERE SCHEMA = '${n.toUpperCase()}'
                    AND OBJNAME = '${r.toUpperCase()}'
            `,s=await Ze(t,i);if(s.length>0&&s[0].DESCRIPTION)return s[0].DESCRIPTION}catch{}}return null}async function of(t,e,n,r){try{let i=`
            SELECT OWNER
            FROM ${e.toUpperCase()}.._V_TABLE
            WHERE SCHEMA = '${n.toUpperCase()}'
                AND TABLENAME = '${r.toUpperCase()}'
        `,s=await Ze(t,i);if(s.length>0&&s[0].OWNER)return s[0].OWNER}catch{}return null}var GS=G(()=>{"use strict";qr()});async function _a(t,e,n,r){let i=await Xr(t,e,n,r);if(i.length===0)throw new Error(`Table ${e}.${n}.${r} not found or has no columns`);let s=await hs(t,e,n,r),o=await ps(t,e,n,r),a=await Ts(t,e,n,r),l=await Ia(t,e,n,r);return bc(e,n,r,i,s,o,a,l)}function bc(t,e,n,r,i,s,o,a){if(r.length===0)return`-- Table ${t}.${e}.${n} has no columns or was not found`;let l=pe(t),c=pe(e),u=pe(n),d=[];d.push(`CREATE TABLE ${l}.${c}.${u}`),d.push("(");let E=[];for(let f of r){let h=`    ${pe(f.name)} ${f.fullTypeName}`;f.notNull&&(h+=" NOT NULL"),f.defaultValue!==null&&(h+=` DEFAULT ${f.defaultValue}`),E.push(h)}if(d.push(E.join(`,
`)),i.length>0){let f=i.map(p=>pe(p));d.push(`)
DISTRIBUTE ON (${f.join(", ")})`)}else d.push(`)
DISTRIBUTE ON RANDOM`);if(s.length>0){let f=s.map(p=>pe(p));d.push(`ORGANIZE ON (${f.join(", ")})`)}d.push(";"),d.push("");for(let[f,p]of o){let h=pe(f),T=p.columns.map(S=>pe(S));if(p.typeChar==="f"){let S=p.pkColumns.filter(I=>I).map(I=>pe(I));S.length>0&&d.push(`ALTER TABLE ${l}.${c}.${u} ADD CONSTRAINT ${h} ${p.type} (${T.join(", ")}) REFERENCES ${p.pkDatabase}.${p.pkSchema}.${p.pkRelation} (${S.join(", ")}) ON DELETE ${p.deleteType} ON UPDATE ${p.updateType};`)}else(p.typeChar==="p"||p.typeChar==="u")&&d.push(`ALTER TABLE ${l}.${c}.${u} ADD CONSTRAINT ${h} ${p.type} (${T.join(", ")});`)}if(a){let f=a.replace(/'/g,"''");d.push(""),d.push(`COMMENT ON TABLE ${l}.${c}.${u} IS '${f}';`)}for(let f of r)if(f.description){let p=pe(f.name),h=f.description.replace(/'/g,"''");d.push(`COMMENT ON COLUMN ${l}.${c}.${u}.${p} IS '${h}';`)}return d.join(`
`)}var WS=G(()=>{"use strict";qr();GS()});async function Na(t,e,n,r){let i=`
        SELECT 
            SCHEMA,
            VIEWNAME,
            DEFINITION,
            OBJID::INT
        FROM ${e.toUpperCase()}.._V_VIEW
        WHERE DATABASE = '${e.toUpperCase()}'
            AND SCHEMA = '${n.toUpperCase()}'
            AND VIEWNAME = '${r.toUpperCase()}'
    `,o=await Ze(t,i);if(o.length===0)throw new Error(`View ${e}.${n}.${r} not found`);let a=o[0],l=pe(e),c=pe(n),u=pe(r),d=[];return d.push(`CREATE OR REPLACE VIEW ${l}.${c}.${u} AS`),d.push(a.DEFINITION||""),d.join(`
`)}var $S=G(()=>{"use strict";qr()});async function Oa(t,e,n,r){let i=`
        SELECT 
            SCHEMA,
            PROCEDURESOURCE,
            OBJID::INT,
            RETURNS,
            EXECUTEDASOWNER,
            DESCRIPTION,
            PROCEDURESIGNATURE,
            PROCEDURE,
            ARGUMENTS,
            NULL AS LANGUAGE
        FROM ${e.toUpperCase()}.._V_PROCEDURE
        WHERE DATABASE = '${e.toUpperCase()}'
            AND SCHEMA = '${n.toUpperCase()}'
            AND PROCEDURESIGNATURE = '${r.toUpperCase()}'
        ORDER BY 1, 2, 3
    `,o=await Ze(t,i);if(o.length===0)throw new Error(`Procedure ${e}.${n}.${r} not found`);let a=o[0],l={schema:a.SCHEMA,procedureSource:a.PROCEDURESOURCE,objId:a.OBJID,returns:s6(a.RETURNS),executeAsOwner:!!a.EXECUTEDASOWNER,description:a.DESCRIPTION||null,procedureSignature:a.PROCEDURESIGNATURE,procedureName:a.PROCEDURE,arguments:a.ARGUMENTS||null},c=pe(e),u=pe(n),d=pe(l.procedureName),E=[],f=`CREATE OR REPLACE PROCEDURE ${c}.${u}.${d}`;if(l.arguments){let p=l.arguments.trim();p.startsWith("(")&&p.endsWith(")")?f+=p:f+=`(${p})`}else f+="()";if(E.push(f),E.push(`RETURNS ${l.returns}`),l.executeAsOwner?E.push("EXECUTE AS OWNER"):E.push("EXECUTE AS CALLER"),E.push("LANGUAGE NZPLSQL AS"),E.push("BEGIN_PROC"),E.push(l.procedureSource),E.push("END_PROC;"),l.description){let p=l.description.replace(/'/g,"''");E.push(`COMMENT ON PROCEDURE ${d} IS '${p}';`)}return E.join(`
`)}var kS=G(()=>{"use strict";qr()});async function Ca(t,e,n,r){let i=`
        SELECT 
            E1.SCHEMA,
            E1.TABLENAME,
            E2.EXTOBJNAME,
            E2.OBJID::INT,
            E1.DELIM,
            E1.ENCODING,
            E1.TIMESTYLE,
            E1.REMOTESOURCE,
            E1.SKIPROWS,
            E1.MAXERRORS,
            E1.ESCAPE,
            E1.LOGDIR,
            E1.DECIMALDELIM,
            E1.QUOTEDVALUE,
            E1.NULLVALUE,
            E1.CRINSTRING,
            E1.TRUNCSTRING,
            E1.CTRLCHARS,
            E1.IGNOREZERO,
            E1.TIMEEXTRAZEROS,
            E1.Y2BASE,
            E1.FILLRECORD,
            E1.COMPRESS,
            E1.INCLUDEHEADER,
            E1.LFINSTRING,
            E1.DATESTYLE,
            E1.DATEDELIM,
            E1.TIMEDELIM,
            E1.BOOLSTYLE,
            E1.FORMAT,
            E1.SOCKETBUFSIZE,
            E1.RECORDDELIM,
            E1.MAXROWS,
            E1.REQUIREQUOTES,
            E1.RECORDLENGTH,
            E1.DATETIMEDELIM,
            E1.REJECTFILE
        FROM 
            ${e.toUpperCase()}.._V_EXTERNAL E1
            JOIN ${e.toUpperCase()}.._V_EXTOBJECT E2 ON E1.DATABASE = E2.DATABASE
                AND E1.SCHEMA = E2.SCHEMA
                AND E1.TABLENAME = E2.TABLENAME
        WHERE 
            E1.DATABASE = '${e.toUpperCase()}'
            AND E1.SCHEMA = '${n.toUpperCase()}'
            AND E1.TABLENAME = '${r.toUpperCase()}'
    `,s=await Ze(t,i);if(s.length===0)throw new Error(`External table ${e}.${n}.${r} not found`);let o=h=>{if(h==null)return null;if(typeof h=="boolean")return h;if(typeof h=="number")return h!==0;let T=String(h).toLowerCase();return T==="t"||T==="true"||T==="1"||T==="yes"||T==="on"},a=s[0],l={schema:a.SCHEMA,tableName:a.TABLENAME,dataObject:a.EXTOBJNAME||null,delimiter:a.DELIM||null,encoding:a.ENCODING||null,timeStyle:a.TIMESTYLE||null,remoteSource:a.REMOTESOURCE||null,skipRows:a.SKIPROWS||null,maxErrors:a.MAXERRORS||null,escapeChar:a.ESCAPE||null,logDir:a.LOGDIR||null,decimalDelim:a.DECIMALDELIM||null,quotedValue:a.QUOTEDVALUE||null,nullValue:a.NULLVALUE||null,crInString:o(a.CRINSTRING),truncString:o(a.TRUNCSTRING),ctrlChars:o(a.CTRLCHARS),ignoreZero:o(a.IGNOREZERO),timeExtraZeros:o(a.TIMEEXTRAZEROS),y2Base:a.Y2BASE||null,fillRecord:o(a.FILLRECORD),compress:o(a.COMPRESS),includeHeader:o(a.INCLUDEHEADER),lfInString:o(a.LFINSTRING),dateStyle:a.DATESTYLE||null,dateDelim:a.DATEDELIM||null,timeDelim:a.TIMEDELIM||null,boolStyle:a.BOOLSTYLE||null,format:a.FORMAT||null,socketBufSize:a.SOCKETBUFSIZE||null,recordDelim:a.RECORDDELIM?String(a.RECORDDELIM).replace(/\r/g,"\\r").replace(/\n/g,"\\n"):null,maxRows:a.MAXROWS||null,requireQuotes:o(a.REQUIREQUOTES),recordLength:a.RECORDLENGTH||null,dateTimeDelim:a.DATETIMEDELIM||null,rejectFile:a.REJECTFILE||null},c=await Xr(t,e,n,r),u=pe(e),d=pe(n),E=pe(r),f=[];f.push(`CREATE EXTERNAL TABLE ${u}.${d}.${E}`),f.push("(");let p=c.map(h=>{let T=`    ${pe(h.name)} ${h.fullTypeName}`;return h.notNull&&(T+=" NOT NULL"),T});return f.push(p.join(`,
`)),f.push(")"),f.push("USING"),f.push("("),l.dataObject!==null&&f.push(`    DATAOBJECT('${l.dataObject}')`),l.delimiter!==null&&f.push(`    DELIMITER '${l.delimiter}'`),l.encoding!==null&&f.push(`    ENCODING '${l.encoding}'`),l.timeStyle!==null&&f.push(`    TIMESTYLE '${l.timeStyle}'`),l.remoteSource!==null&&f.push(`    REMOTESOURCE '${l.remoteSource}'`),l.maxErrors!==null&&f.push(`    MAXERRORS ${l.maxErrors}`),l.escapeChar!==null&&f.push(`    ESCAPECHAR '${l.escapeChar}'`),l.decimalDelim!==null&&f.push(`    DECIMALDELIM '${l.decimalDelim}'`),l.logDir!==null&&f.push(`    LOGDIR '${l.logDir}'`),l.quotedValue!==null&&f.push(`    QUOTEDVALUE '${l.quotedValue}'`),l.nullValue!==null&&f.push(`    NULLVALUE '${l.nullValue}'`),l.crInString!==null&&f.push(`    CRINSTRING ${l.crInString}`),l.truncString!==null&&f.push(`    TRUNCSTRING ${l.truncString}`),l.ctrlChars!==null&&f.push(`    CTRLCHARS ${l.ctrlChars}`),l.ignoreZero!==null&&f.push(`    IGNOREZERO ${l.ignoreZero}`),l.timeExtraZeros!==null&&f.push(`    TIMEEXTRAZEROS ${l.timeExtraZeros}`),l.y2Base!==null&&f.push(`    Y2BASE ${l.y2Base}`),l.fillRecord!==null&&f.push(`    FILLRECORD ${l.fillRecord}`),l.compress!==null&&f.push(`    COMPRESS ${l.compress}`),l.includeHeader!==null&&f.push(`    INCLUDEHEADER ${l.includeHeader}`),l.lfInString!==null&&f.push(`    LFINSTRING ${l.lfInString}`),l.dateStyle!==null&&f.push(`    DATESTYLE '${l.dateStyle}'`),l.dateDelim!==null&&f.push(`    DATEDELIM '${l.dateDelim}'`),l.timeDelim!==null&&f.push(`    TIMEDELIM '${l.timeDelim}'`),l.boolStyle!==null&&f.push(`    BOOLSTYLE '${l.boolStyle}'`),l.format!==null&&f.push(`    FORMAT '${l.format}'`),l.socketBufSize!==null&&f.push(`    SOCKETBUFSIZE ${l.socketBufSize}`),l.recordDelim!==null&&f.push(`    RECORDDELIM '${l.recordDelim}'`),l.maxRows!==null&&f.push(`    MAXROWS ${l.maxRows}`),l.requireQuotes!==null&&f.push(`    REQUIREQUOTES ${l.requireQuotes}`),l.recordLength!==null&&f.push(`    RECORDLENGTH ${l.recordLength}`),l.dateTimeDelim!==null&&f.push(`    DATETIMEDELIM '${l.dateTimeDelim}'`),l.rejectFile!==null&&f.push(`    REJECTFILE '${l.rejectFile}'`),f.push(");"),f.join(`
`)}var YS=G(()=>{"use strict";qr();GS()});async function ya(t,e,n,r){let i=`
        SELECT 
            SCHEMA,
            OWNER,
            SYNONYM_NAME,
            REFOBJNAME,
            DESCRIPTION
        FROM ${e.toUpperCase()}.._V_SYNONYM
        WHERE DATABASE = '${e.toUpperCase()}'
            AND SCHEMA = '${n.toUpperCase()}'
            AND SYNONYM_NAME = '${r.toUpperCase()}'
    `,o=await Ze(t,i);if(o.length===0)throw new Error(`Synonym ${e}.${n}.${r} not found`);let a=o[0],l=pe(e),c=pe(a.OWNER||n),u=pe(r),d=a.REFOBJNAME,E=[];if(E.push(`CREATE SYNONYM ${l}.${c}.${u} FOR ${d};`),a.DESCRIPTION){let f=a.DESCRIPTION.replace(/'/g,"''");E.push(`COMMENT ON SYNONYM ${u} IS '${f}';`)}return E.join(`
`)}var VS=G(()=>{"use strict";qr()});async function Sy(t){let e=null,n=[],r=[],i=0,s=0,o=["TABLE","VIEW","PROCEDURE","EXTERNAL TABLE","SYNONYM"];try{let a={host:t.connectionDetails.host,port:t.connectionDetails.port||5480,database:t.connectionDetails.database,user:t.connectionDetails.user,password:t.connectionDetails.password},l=On();e=new l(a),await e.connect();let c=t.database.toUpperCase(),u=t.schema?t.schema.toUpperCase():null,d=t.objectTypes?t.objectTypes.map(m=>m.toUpperCase()).filter(m=>o.includes(m)):o;d.length===0&&(d=o),r.push("-- ============================================"),r.push("-- Batch DDL Export"),r.push(`-- Database: ${c}`),u&&r.push(`-- Schema: ${u}`),r.push(`-- Object Types: ${d.join(", ")}`),r.push(`-- Generated: ${new Date().toISOString()}`),r.push("-- ============================================"),r.push("");let E=new Map,f=new Map,p=new Map,h=new Map,T=new Map,S=d.includes("TABLE"),I=d.includes("VIEW"),R=d.includes("EXTERNAL TABLE");if(S||I||R){let m=u?`AND D.SCHEMA = '${u}'`:"",A=`
                SELECT 
                    D.SCHEMA,
                    D.OBJNAME,
                    D.OBJTYPE,
                    X.ATTNAME,
                    X.DESCRIPTION,
                    X.FORMAT_TYPE AS FULL_TYPE,
                    X.ATTNOTNULL::BOOL AS ATTNOTNULL,
                    X.COLDEFAULT
                FROM ${c}.._V_RELATION_COLUMN X
                INNER JOIN ${c}.._V_OBJECT_DATA D ON X.OBJID = D.OBJID
                WHERE D.DBNAME = '${c}'
                    AND D.OBJTYPE IN ('TABLE', 'VIEW', 'EXTERNAL TABLE')
                    ${m}
                ORDER BY D.SCHEMA, D.OBJNAME, X.ATTNUM
            `;try{let N=await Ze(e,A);for(let g of N){let L=`${g.SCHEMA}.${g.OBJNAME}`;E.has(L)||E.set(L,[]);let y=!1,D=g.ATTNOTNULL;if(typeof D=="boolean")y=D;else if(typeof D=="number")y=D!==0;else if(typeof D=="string"){let x=D.trim().toLowerCase();y=x==="t"||x==="true"||x==="1"}E.get(L).push({name:g.ATTNAME,description:g.DESCRIPTION||null,fullTypeName:g.FULL_TYPE,notNull:y,defaultValue:g.COLDEFAULT||null})}}catch(N){let g=N instanceof Error?N.message:String(N);n.push(`Error bulk fetching columns: ${g}`)}}if(S){let m=u?`AND SCHEMA = '${u}'`:"",A=`
                SELECT SCHEMA, TABLENAME, ATTNAME
                FROM ${c}.._V_TABLE_DIST_MAP
                WHERE 1=1 ${m}
                ORDER BY SCHEMA, TABLENAME, DISTSEQNO
            `;try{let N=await Ze(e,A);for(let g of N){let L=`${g.SCHEMA}.${g.TABLENAME}`;f.has(L)||f.set(L,[]),f.get(L).push(g.ATTNAME)}}catch{}}if(S){let m=u?`AND SCHEMA = '${u}'`:"",A=`
                SELECT SCHEMA, TABLENAME, ATTNAME
                FROM ${c}.._V_TABLE_ORGANIZE_COLUMN
                WHERE 1=1 ${m}
                ORDER BY SCHEMA, TABLENAME, ORGSEQNO
            `;try{let N=await Ze(e,A);for(let g of N){let L=`${g.SCHEMA}.${g.TABLENAME}`;p.has(L)||p.set(L,[]),p.get(L).push(g.ATTNAME)}}catch{}}if(S){let m=u?`AND X.SCHEMA = '${u}'`:"",A=`
                SELECT 
                    X.SCHEMA, X.RELATION, X.CONSTRAINTNAME, X.CONTYPE,
                    X.ATTNAME, X.PKDATABASE, X.PKSCHEMA, X.PKRELATION, X.PKATTNAME,
                    X.UPDT_TYPE, X.DEL_TYPE
                FROM ${c}.._V_RELATION_KEYDATA X
                WHERE X.OBJID NOT IN (4,5) ${m}
                ORDER BY X.SCHEMA, X.RELATION, X.CONSTRAINTNAME, X.CONSEQ
            `;try{let N=await Ze(e,A);for(let g of N){let L=`${g.SCHEMA}.${g.RELATION}`;h.has(L)||h.set(L,new Map);let y=h.get(L),D=g.CONSTRAINTNAME;if(!y.has(D)){let B={p:"PRIMARY KEY",f:"FOREIGN KEY",u:"UNIQUE"};y.set(D,{type:B[g.CONTYPE]||"UNKNOWN",typeChar:g.CONTYPE,columns:[],pkDatabase:g.PKDATABASE||null,pkSchema:g.PKSCHEMA||null,pkRelation:g.PKRELATION||null,pkColumns:[],updateType:g.UPDT_TYPE||"NO ACTION",deleteType:g.DEL_TYPE||"NO ACTION"})}let x=y.get(D);x.columns.push(g.ATTNAME),g.PKATTNAME&&x.pkColumns.push(g.PKATTNAME)}}catch{}}if(S){let m=u?`AND SCHEMA = '${u}'`:"",A=`
                SELECT SCHEMA, OBJNAME, DESCRIPTION
                FROM ${c}.._V_OBJECT_DATA
                WHERE DBNAME = '${c}' AND OBJTYPE = 'TABLE' AND DESCRIPTION IS NOT NULL ${m}
            `;try{let N=await Ze(e,A);for(let g of N)g.DESCRIPTION&&T.set(`${g.SCHEMA}.${g.OBJNAME}`,g.DESCRIPTION)}catch{}}for(let m of d){let A=[];try{if(m==="PROCEDURE"){let N=`SELECT PROCEDURESIGNATURE AS OBJNAME, SCHEMA FROM ${c}.._V_PROCEDURE WHERE DATABASE = '${c}'`;u&&(N+=` AND SCHEMA = '${u}'`),N+=" ORDER BY SCHEMA, PROCEDURESIGNATURE",A=(await Ze(e,N)).map(L=>({name:L.OBJNAME,schema:L.SCHEMA}))}else{let N=`SELECT OBJNAME, SCHEMA FROM ${c}.._V_OBJECT_DATA WHERE DBNAME = '${c}' AND OBJTYPE = '${m}'`;u&&(N+=` AND SCHEMA = '${u}'`),N+=" ORDER BY SCHEMA, OBJNAME",A=(await Ze(e,N)).map(L=>({name:L.OBJNAME,schema:L.SCHEMA}))}}catch(N){let g=N instanceof Error?N.message:String(N);n.push(`Error querying ${m}s: ${g}`);continue}if(A.length!==0){r.push("-- ----------------------------------------"),r.push(`-- ${m}S (${A.length})`),r.push("-- ----------------------------------------"),r.push("");for(let N of A)try{let g,L=`${N.schema}.${N.name}`;switch(m){case"TABLE":g=bc(c,N.schema,N.name,E.get(L)||[],f.get(L)||[],p.get(L)||[],h.get(L)||new Map,T.get(L)||null);break;case"VIEW":g=await Na(e,c,N.schema,N.name);break;case"PROCEDURE":g=await Oa(e,c,N.schema,N.name);break;case"EXTERNAL TABLE":g=await Ca(e,c,N.schema,N.name);break;case"SYNONYM":g=await ya(e,c,N.schema,N.name);break;default:s++;continue}r.push(`-- ${m}: ${c}.${N.schema}.${N.name}`),r.push(g),r.push(""),i++}catch(g){let L=g instanceof Error?g.message:String(g);n.push(`Error generating DDL for ${m} ${c}.${N.schema}.${N.name}: ${L}`),s++}}}return r.push("-- ============================================"),r.push("-- End of Batch DDL Export"),r.push(`-- Total objects: ${i}`),s>0&&r.push(`-- Skipped: ${s}`),n.length>0&&r.push(`-- Errors: ${n.length}`),r.push("-- ============================================"),{success:!0,ddlCode:r.join(`
`),objectCount:i,errors:n,skipped:s}}catch(a){return{success:!1,objectCount:0,errors:[`Batch DDL generation error: ${a instanceof Error?a.message:String(a)}`],skipped:0}}finally{if(e)try{await e.close()}catch{}}}var o6=G(()=>{"use strict";qr();WS();$S();kS();YS();VS()});async function Ry(t,e,n,r,i){let s=null;try{s=await sf(t);let o=i.toUpperCase();return o==="TABLE"?{success:!0,ddlCode:await _a(s,e,n,r),objectInfo:{database:e,schema:n,objectName:r,objectType:i}}:o==="VIEW"?{success:!0,ddlCode:await Na(s,e,n,r),objectInfo:{database:e,schema:n,objectName:r,objectType:i}}:o==="PROCEDURE"?{success:!0,ddlCode:await Oa(s,e,n,r),objectInfo:{database:e,schema:n,objectName:r,objectType:i}}:o==="EXTERNAL TABLE"?{success:!0,ddlCode:await Ca(s,e,n,r),objectInfo:{database:e,schema:n,objectName:r,objectType:i}}:o==="SYNONYM"?{success:!0,ddlCode:await ya(s,e,n,r),objectInfo:{database:e,schema:n,objectName:r,objectType:i}}:{success:!0,ddlCode:`-- DDL generation for ${i} not yet implemented
-- Object: ${e}.${n}.${r}
-- Type: ${i}
--
-- This feature can be extended to support:
-- - FUNCTION: Query _V_FUNCTION system table
-- - AGGREGATE: Query _V_AGGREGATE system table
`,objectInfo:{database:e,schema:n,objectName:r,objectType:i},note:`${i} DDL generation not yet implemented`}}catch(o){return{success:!1,error:`DDL generation error: ${o instanceof Error?o.message:String(o)}`}}finally{if(s)try{await s.close()}catch{}}}var a6=G(()=>{"use strict";qr();WS();$S();kS();YS();VS()});var Ay=G(()=>{"use strict";i6();qr();GS();WS();$S();kS();YS();VS();o6();a6()});var gy={};ht(gy,{buildTableDDLFromCache:()=>bc,generateBatchDDL:()=>Sy,generateDDL:()=>Ry,generateExternalTableDDL:()=>Ca,generateProcedureDDL:()=>Oa,generateSynonymDDL:()=>ya,generateTableDDL:()=>_a,generateViewDDL:()=>Na,getColumns:()=>Xr,getDistributionInfo:()=>hs,getKeysInfo:()=>Ts,getOrganizeInfo:()=>ps,getTableComment:()=>Ia,getTableOwner:()=>of,quoteNameIfNeeded:()=>pe});var cf=G(()=>{"use strict";Ay()});var u6={};ht(u6,{generateRecreateTableScript:()=>ebe});async function ebe(t,e,n,r,i){let s=null;try{let o={host:t.host,port:t.port||5480,database:t.database,user:t.user,password:t.password},a=On();s=new a(o),await s.connect();let l=await Xr(s,e,n,r);if(l.length===0)return{success:!1,error:`Table ${e}.${n}.${r} not found or has no columns`};let c=await hs(s,e,n,r),u=await ps(s,e,n,r),d=await Ts(s,e,n,r),E=await Ia(s,e,n,r),f=await of(s,e,n,r),p=pe(e),h=pe(n),T=pe(r),S=new Date().toISOString().replace(/[-:T.]/g,"").substring(0,14),I=Math.random().toString(36).substring(2,7).toUpperCase(),R=i||`${r}_${S}_NEW`,m=pe(R),A=`${r}_${S}_BACKUP_${I}`,N=pe(A),g=[];g.push(`-- Recreate Table Script for ${p}.${h}.${T}`),g.push(`-- Generated at ${new Date().toISOString()}`),g.push(""),g.push("-- 1. Create new table with desired structure"),g.push(`CREATE TABLE ${p}.${h}.${m}`),g.push("(");let L=[];for(let D of l){let B=`    ${pe(D.name)} ${D.fullTypeName}`;D.notNull&&(B+=" NOT NULL"),D.defaultValue!==null&&(B+=` DEFAULT ${D.defaultValue}`),L.push(B)}if(g.push(L.join(`,
`)),c.length>0){let D=c.map(x=>pe(x));g.push(`)
DISTRIBUTE ON (${D.join(", ")})`)}else g.push(`)
DISTRIBUTE ON RANDOM`);if(u.length>0){let D=u.map(x=>pe(x));g.push(`ORGANIZE ON (${D.join(", ")})`)}if(g.push(";"),g.push(""),g.push("-- 2. Copy data from original table"),g.push(`INSERT INTO ${p}.${h}.${m} SELECT * FROM ${p}.${h}.${T};`),g.push(""),g.push("-- 3. Copy privileges from original table"),g.push(`ALTER TABLE ${p}.${h}.${m} SET PRIVILEGES TO ${p}.${h}.${T};`),g.push(""),g.push("-- 4. Swap tables: Rename Original to Backup, New to Original"),g.push(`ALTER TABLE ${p}.${h}.${T} RENAME TO ${N};`),g.push(`ALTER TABLE ${p}.${h}.${m} RENAME TO ${T};`),g.push(""),f&&(g.push("-- 5. Restore Owner"),g.push(`ALTER TABLE ${p}.${h}.${T} OWNER TO ${f};`),g.push("")),g.push("-- 6. Drop Backup Table (Optional - Comment out if you want to keep it)"),g.push(`DROP TABLE ${p}.${h}.${N};`),g.push(""),d.size>0){g.push("-- 7. Restore Constraints");for(let[D,x]of d){let B=pe(D),H=x.columns.map(J=>pe(J)),X="";if(x.typeChar==="f"){let J=x.pkColumns.filter(ee=>ee).map(ee=>pe(ee));J.length>0&&(X=`ALTER TABLE ${p}.${h}.${T} ADD CONSTRAINT ${B} ${x.type} (${H.join(", ")}) REFERENCES ${x.pkDatabase}.${x.pkSchema}.${x.pkRelation} (${J.join(", ")}) ON DELETE ${x.deleteType} ON UPDATE ${x.updateType};`)}else(x.typeChar==="p"||x.typeChar==="u")&&(X=`ALTER TABLE ${p}.${h}.${T} ADD CONSTRAINT ${B} ${x.type} (${H.join(", ")});`);X&&g.push(X)}g.push("")}if(E){let D=E.replace(/'/g,"''");g.push("-- 8. Restore Comments"),g.push(`COMMENT ON TABLE ${p}.${h}.${T} IS '${D}';`)}let y=[];for(let D of l)if(D.description){let x=pe(D.name),B=D.description.replace(/'/g,"''");y.push(`COMMENT ON COLUMN ${p}.${h}.${T}.${x} IS '${B}';`)}return y.length>0&&(E||g.push("-- 8. Restore Comments"),g.push(y.join(`
`)),g.push("")),g.push("-- 9. Generate Statistics"),g.push(`GENERATE EXPRESS STATISTICS ON ${p}.${h}.${T};`),{success:!0,sqlScript:g.join(`
`)}}catch(o){return{success:!1,error:`Error generating recreate script: ${o instanceof Error?o.message:String(o)}`}}finally{if(s)try{await s.close()}catch{}}}var d6=G(()=>{"use strict";cf()});var Iy={};ht(Iy,{compareProcedures:()=>obe,compareTableStructures:()=>ibe});async function tbe(t,e){let r=await t.createCommand(e).executeReader(),i=[];for(;await r.read();){let s={};for(let o=0;o<r.fieldCount;o++)s[r.getName(o)]=r.getValue(o);i.push(s)}return i}async function E6(t,e,n,r){let i=await Xr(t,e,n,r),s=await Ts(t,e,n,r),o=await hs(t,e,n,r),a=await ps(t,e,n,r);return{database:e,schema:n,tableName:r,columns:i,keys:s,distribution:o,organization:a}}function nbe(t,e){let n=[];return t.fullTypeName!==e.fullTypeName&&n.push(`Type: ${t.fullTypeName} \u2192 ${e.fullTypeName}`),t.notNull!==e.notNull&&n.push(`NOT NULL: ${t.notNull} \u2192 ${e.notNull}`),t.defaultValue!==e.defaultValue&&n.push(`Default: ${t.defaultValue||"NULL"} \u2192 ${e.defaultValue||"NULL"}`),n}function rbe(t,e){let n=[];return t.type!==e.type&&n.push(`Type: ${t.type} \u2192 ${e.type}`),t.columns.join(",")!==e.columns.join(",")&&n.push(`Columns: (${t.columns.join(", ")}) \u2192 (${e.columns.join(", ")})`),t.typeChar==="f"&&e.typeChar==="f"&&t.pkRelation!==e.pkRelation&&n.push(`References: ${t.pkRelation} \u2192 ${e.pkRelation}`),n}async function ibe(t,e,n,r,i,s,o){let a=null;try{let l={host:t.host,port:t.port||5480,database:t.database,user:t.user,password:t.password},c=On();a=new c(l),await a.connect();let u=await E6(a,e,n,r),d=await E6(a,i,s,o),E=[],f=new Map(u.columns.map(A=>[A.name.toUpperCase(),A])),p=new Map(d.columns.map(A=>[A.name.toUpperCase(),A]));for(let[A,N]of f){let g=p.get(A);if(!g)E.push({name:N.name,status:"removed",sourceColumn:N});else{let L=nbe(N,g);E.push({name:N.name,status:L.length>0?"modified":"unchanged",sourceColumn:N,targetColumn:g,changes:L})}}for(let[A,N]of p)f.has(A)||E.push({name:N.name,status:"added",targetColumn:N});let h=[],T=u.keys,S=d.keys;for(let[A,N]of T){let g=S.get(A);if(!g)h.push({name:A,status:"removed",sourceKey:N});else{let L=rbe(N,g);h.push({name:A,status:L.length>0?"modified":"unchanged",sourceKey:N,targetKey:g,changes:L})}}for(let[A,N]of S)T.has(A)||h.push({name:A,status:"added",targetKey:N});let I=JSON.stringify(u.distribution)===JSON.stringify(d.distribution),R=JSON.stringify(u.organization)===JSON.stringify(d.organization),m={columnsAdded:E.filter(A=>A.status==="added").length,columnsRemoved:E.filter(A=>A.status==="removed").length,columnsModified:E.filter(A=>A.status==="modified").length,columnsUnchanged:E.filter(A=>A.status==="unchanged").length,keysAdded:h.filter(A=>A.status==="added").length,keysRemoved:h.filter(A=>A.status==="removed").length,keysModified:h.filter(A=>A.status==="modified").length};return{source:{database:e,schema:n,name:r},target:{database:i,schema:s,name:o},columnDiffs:E,keyDiffs:h,distributionMatch:I,sourceDistribution:u.distribution,targetDistribution:d.distribution,organizationMatch:R,sourceOrganization:u.organization,targetOrganization:d.organization,summary:m}}finally{if(a)try{await a.close()}catch{}}}async function h6(t,e,n,r){let i=`
        SELECT 
            SCHEMA,
            PROCEDURESOURCE,
            RETURNS,
            EXECUTEDASOWNER,
            DESCRIPTION,
            PROCEDURESIGNATURE,
            PROCEDURE,
            ARGUMENTS
        FROM ${e.toUpperCase()}.._V_PROCEDURE
        WHERE DATABASE = '${e.toUpperCase()}'
            AND SCHEMA = '${n.toUpperCase()}'
            AND PROCEDURESIGNATURE = '${r.toUpperCase()}'
    `,s=await tbe(t,i);if(s.length===0)throw new Error(`Procedure ${e}.${n}.${r} not found`);let o=s[0];return{database:e,schema:n,procedureName:o.PROCEDURE,procedureSignature:o.PROCEDURESIGNATURE,arguments:o.ARGUMENTS||null,returns:o.RETURNS,executeAsOwner:!!o.EXECUTEDASOWNER,source:o.PROCEDURESOURCE,description:o.DESCRIPTION||null}}function sbe(t,e){let n=t.split(`
`).map(o=>o.trimEnd()),r=e.split(`
`).map(o=>o.trimEnd()),i=[],s=Math.max(n.length,r.length);for(let o=0;o<s;o++){let a=n[o]||"",l=r[o]||"";a===l?i.push(`  ${a}`):n[o]?r[o]?(i.push(`- ${a}`),i.push(`+ ${l}`)):i.push(`- ${a}`):i.push(`+ ${l}`)}return i}async function obe(t,e,n,r,i,s,o){let a=null;try{let l={host:t.host,port:t.port||5480,database:t.database,user:t.user,password:t.password},c=On();a=new c(l),await a.connect();let u=await h6(a,e,n,r),d=await h6(a,i,s,o),E=u.arguments===d.arguments,f=u.returns===d.returns,p=u.executeAsOwner===d.executeAsOwner,h=u.source.trim()===d.source.trim(),T=h?[]:sbe(u.source,d.source);return{source:{database:e,schema:n,name:r},target:{database:i,schema:s,name:o},argumentsMatch:E,sourceArguments:u.arguments,targetArguments:d.arguments,returnsMatch:f,sourceReturns:u.returns,targetReturns:d.returns,executeAsOwnerMatch:p,sourceExecuteAsOwner:u.executeAsOwner,targetExecuteAsOwner:d.executeAsOwner,sourceMatch:h,sourceCode:u.source,targetCode:d.source,sourceDiff:T}}finally{if(a)try{await a.close()}catch{}}}var _y=G(()=>{"use strict";cf()});var Oy={};ht(Oy,{SchemaCompareView:()=>Ny});var so,Ny,Cy=G(()=>{"use strict";so=z(require("vscode")),Ny=class t{constructor(e,n,r,i){this._disposables=[];this._panel=e,this._update(r,i),this._panel.onDidDispose(()=>this.dispose(),null,this._disposables)}static{this.viewType="netezza.schemaCompare"}static createOrShow(e,n,r){let i=so.window.activeTextEditor?so.window.activeTextEditor.viewColumn:void 0;if(t.currentPanel){t.currentPanel._panel.reveal(i),t.currentPanel._update(n,r);return}let s=so.window.createWebviewPanel(t.viewType,"Schema Comparison",i||so.ViewColumn.One,{enableScripts:!0,localResourceRoots:[so.Uri.joinPath(e,"media")]});t.currentPanel=new t(s,e,n,r)}dispose(){for(t.currentPanel=void 0,this._panel.dispose();this._disposables.length;){let e=this._disposables.pop();e&&e.dispose()}}_update(e,n){n==="table"?(this._panel.title=`Compare: ${e.source.name} \u2194 ${e.target.name}`,this._panel.webview.html=this._getTableComparisonHtml(e)):(this._panel.title=`Compare: ${e.source.name} \u2194 ${e.target.name}`,this._panel.webview.html=this._getProcedureComparisonHtml(e))}_getStatusIcon(e){switch(e){case"added":return"\u{1F7E2}";case"removed":return"\u{1F534}";case"modified":return"\u{1F7E1}";case"unchanged":return"\u26AA"}}_getStatusClass(e){return`status-${e}`}_getTableComparisonHtml(e){let n=`${e.source.database}.${e.source.schema}.${e.source.name}`,r=`${e.target.database}.${e.target.schema}.${e.target.name}`,i=e.columnDiffs.map(l=>{let c=l.sourceColumn,u=l.targetColumn,d=l.changes?.join("<br>")||"";return`
                <tr class="${this._getStatusClass(l.status)}">
                    <td>${this._getStatusIcon(l.status)}</td>
                    <td><strong>${l.name}</strong></td>
                    <td>${c?.fullTypeName||"-"}</td>
                    <td>${u?.fullTypeName||"-"}</td>
                    <td class="changes">${d}</td>
                </tr>
            `}).join(""),s=e.keyDiffs.map(l=>{let c=l.sourceKey,u=l.targetKey,d=l.changes?.join("<br>")||"";return`
                <tr class="${this._getStatusClass(l.status)}">
                    <td>${this._getStatusIcon(l.status)}</td>
                    <td><strong>${l.name}</strong></td>
                    <td>${c?.type||"-"} (${c?.columns.join(", ")||"-"})</td>
                    <td>${u?.type||"-"} (${u?.columns.join(", ")||"-"})</td>
                    <td class="changes">${d}</td>
                </tr>
            `}).join(""),o=e.distributionMatch?"\u2705 Match":"\u274C Different",a=e.organizationMatch?"\u2705 Match":"\u274C Different";return`
            <!DOCTYPE html>
            <html lang="en">
            <head>
                <meta charset="UTF-8">
                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                <title>Schema Comparison</title>
                <style>
                    ${this._getStyles()}
                </style>
            </head>
            <body>
                <div class="container">
                    <h1>Table Structure Comparison</h1>
                    
                    <div class="header-info">
                        <div class="source-header">
                            <span class="label">Source:</span>
                            <span class="value">${n}</span>
                        </div>
                        <div class="arrow">\u2194</div>
                        <div class="target-header">
                            <span class="label">Target:</span>
                            <span class="value">${r}</span>
                        </div>
                    </div>

                    <div class="summary">
                        <h2>Summary</h2>
                        <div class="summary-grid">
                            <div class="summary-item added">\u{1F7E2} Added: ${e.summary.columnsAdded} columns, ${e.summary.keysAdded} keys</div>
                            <div class="summary-item removed">\u{1F534} Removed: ${e.summary.columnsRemoved} columns, ${e.summary.keysRemoved} keys</div>
                            <div class="summary-item modified">\u{1F7E1} Modified: ${e.summary.columnsModified} columns, ${e.summary.keysModified} keys</div>
                            <div class="summary-item unchanged">\u26AA Unchanged: ${e.summary.columnsUnchanged} columns</div>
                        </div>
                    </div>

                    <div class="section">
                        <h2>Columns</h2>
                        <table>
                            <thead>
                                <tr>
                                    <th width="40">Status</th>
                                    <th>Column Name</th>
                                    <th>Source Type</th>
                                    <th>Target Type</th>
                                    <th>Changes</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${i}
                            </tbody>
                        </table>
                    </div>

                    ${e.keyDiffs.length>0?`
                    <div class="section">
                        <h2>Keys & Constraints</h2>
                        <table>
                            <thead>
                                <tr>
                                    <th width="40">Status</th>
                                    <th>Key Name</th>
                                    <th>Source</th>
                                    <th>Target</th>
                                    <th>Changes</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${s}
                            </tbody>
                        </table>
                    </div>
                    `:""}

                    <div class="section">
                        <h2>Distribution & Organization</h2>
                        <table>
                            <thead>
                                <tr>
                                    <th>Property</th>
                                    <th>Source</th>
                                    <th>Target</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>DISTRIBUTE ON</strong></td>
                                    <td>${e.sourceDistribution.length>0?e.sourceDistribution.join(", "):"RANDOM"}</td>
                                    <td>${e.targetDistribution.length>0?e.targetDistribution.join(", "):"RANDOM"}</td>
                                    <td>${o}</td>
                                </tr>
                                <tr>
                                    <td><strong>ORGANIZE ON</strong></td>
                                    <td>${e.sourceOrganization.length>0?e.sourceOrganization.join(", "):"(none)"}</td>
                                    <td>${e.targetOrganization.length>0?e.targetOrganization.join(", "):"(none)"}</td>
                                    <td>${a}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </body>
            </html>
        `}_getProcedureComparisonHtml(e){let n=`${e.source.database}.${e.source.schema}.${e.source.name}`,r=`${e.target.database}.${e.target.schema}.${e.target.name}`,i=e.sourceDiff.map(s=>{let o="";return s.startsWith("+")?o="diff-added":s.startsWith("-")?o="diff-removed":o="diff-unchanged",`<div class="${o}">${this._escapeHtml(s)}</div>`}).join("");return`
            <!DOCTYPE html>
            <html lang="en">
            <head>
                <meta charset="UTF-8">
                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                <title>Procedure Comparison</title>
                <style>
                    ${this._getStyles()}
                </style>
            </head>
            <body>
                <div class="container">
                    <h1>Procedure Comparison</h1>
                    
                    <div class="header-info">
                        <div class="source-header">
                            <span class="label">Source:</span>
                            <span class="value">${n}</span>
                        </div>
                        <div class="arrow">\u2194</div>
                        <div class="target-header">
                            <span class="label">Target:</span>
                            <span class="value">${r}</span>
                        </div>
                    </div>

                    <div class="section">
                        <h2>Signature Comparison</h2>
                        <table>
                            <thead>
                                <tr>
                                    <th>Property</th>
                                    <th>Source</th>
                                    <th>Target</th>
                                    <th>Match</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="${e.argumentsMatch?"":"status-modified"}">
                                    <td><strong>Arguments</strong></td>
                                    <td><code>${e.sourceArguments||"(none)"}</code></td>
                                    <td><code>${e.targetArguments||"(none)"}</code></td>
                                    <td>${e.argumentsMatch?"\u2705":"\u274C"}</td>
                                </tr>
                                <tr class="${e.returnsMatch?"":"status-modified"}">
                                    <td><strong>Returns</strong></td>
                                    <td><code>${e.sourceReturns}</code></td>
                                    <td><code>${e.targetReturns}</code></td>
                                    <td>${e.returnsMatch?"\u2705":"\u274C"}</td>
                                </tr>
                                <tr class="${e.executeAsOwnerMatch?"":"status-modified"}">
                                    <td><strong>Execute As</strong></td>
                                    <td>${e.sourceExecuteAsOwner?"OWNER":"CALLER"}</td>
                                    <td>${e.targetExecuteAsOwner?"OWNER":"CALLER"}</td>
                                    <td>${e.executeAsOwnerMatch?"\u2705":"\u274C"}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="section">
                        <h2>Source Code ${e.sourceMatch?"\u2705 Identical":"\u274C Different"}</h2>
                        ${e.sourceMatch?`
                            <div class="code-block">
                                <pre>${this._escapeHtml(e.sourceCode)}</pre>
                            </div>
                        `:`
                            <div class="code-diff">
                                <pre>${i}</pre>
                            </div>
                        `}
                    </div>
                </div>
            </body>
            </html>
        `}_escapeHtml(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}_getStyles(){return`
            :root {
                --bg-color: var(--vscode-editor-background);
                --fg-color: var(--vscode-editor-foreground);
                --border-color: var(--vscode-widget-border);
                --header-bg: var(--vscode-sideBarSectionHeader-background);
                --added-bg: rgba(40, 167, 69, 0.2);
                --removed-bg: rgba(220, 53, 69, 0.2);
                --modified-bg: rgba(255, 193, 7, 0.2);
            }

            body {
                font-family: var(--vscode-font-family);
                font-size: var(--vscode-font-size);
                color: var(--fg-color);
                background-color: var(--bg-color);
                margin: 0;
                padding: 20px;
            }

            .container {
                max-width: 1400px;
                margin: 0 auto;
            }

            h1 {
                border-bottom: 1px solid var(--border-color);
                padding-bottom: 10px;
                margin-bottom: 20px;
            }

            h2 {
                font-size: 1.1em;
                margin-top: 25px;
                margin-bottom: 10px;
                color: var(--vscode-textLink-foreground);
            }

            .header-info {
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 20px;
                padding: 15px;
                background-color: var(--header-bg);
                border-radius: 6px;
                margin-bottom: 20px;
            }

            .header-info .label {
                font-weight: bold;
                margin-right: 8px;
            }

            .header-info .value {
                font-family: monospace;
                background-color: var(--vscode-textCodeBlock-background);
                padding: 4px 8px;
                border-radius: 4px;
            }

            .arrow {
                font-size: 1.5em;
                color: var(--vscode-charts-blue);
            }

            .summary {
                background-color: var(--header-bg);
                padding: 15px;
                border-radius: 6px;
                margin-bottom: 20px;
            }

            .summary h2 {
                margin-top: 0;
            }

            .summary-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 10px;
            }

            .summary-item {
                padding: 8px;
                border-radius: 4px;
            }

            .summary-item.added { background-color: var(--added-bg); }
            .summary-item.removed { background-color: var(--removed-bg); }
            .summary-item.modified { background-color: var(--modified-bg); }

            table {
                width: 100%;
                border-collapse: collapse;
                margin-bottom: 20px;
            }

            th, td {
                padding: 10px;
                text-align: left;
                border: 1px solid var(--border-color);
            }

            th {
                background-color: var(--header-bg);
                font-weight: 600;
            }

            tr.status-added {
                background-color: var(--added-bg);
            }

            tr.status-removed {
                background-color: var(--removed-bg);
            }

            tr.status-modified {
                background-color: var(--modified-bg);
            }

            .changes {
                font-size: 0.9em;
                color: var(--vscode-descriptionForeground);
            }

            .code-block, .code-diff {
                background-color: var(--vscode-textCodeBlock-background);
                border: 1px solid var(--border-color);
                border-radius: 6px;
                padding: 15px;
                overflow-x: auto;
            }

            .code-block pre, .code-diff pre {
                margin: 0;
                font-family: var(--vscode-editor-font-family);
                font-size: var(--vscode-editor-font-size);
                white-space: pre;
            }

            .diff-added {
                background-color: var(--added-bg);
                color: #28a745;
            }

            .diff-removed {
                background-color: var(--removed-bg);
                color: #dc3545;
            }

            .diff-unchanged {
                color: var(--fg-color);
            }

            code {
                font-family: var(--vscode-editor-font-family);
                background-color: var(--vscode-textCodeBlock-background);
                padding: 2px 6px;
                border-radius: 3px;
            }
        `}}});var R6={};ht(R6,{buildERDData:()=>abe,getForeignKeysForSchema:()=>T6,getTablesInSchema:()=>S6});async function T6(t,e,n,r,i){let s=`
        SELECT 
            X.SCHEMA,
            X.RELATION AS FROM_TABLE,
            X.CONSTRAINTNAME,
            X.ATTNAME AS FROM_COLUMN,
            X.PKDATABASE,
            X.PKSCHEMA,
            X.PKRELATION AS TO_TABLE,
            X.PKATTNAME AS TO_COLUMN,
            X.UPDT_TYPE,
            X.DEL_TYPE,
            X.CONSEQ
        FROM 
            ${r.toUpperCase()}.._V_RELATION_KEYDATA X
        WHERE 
            X.CONTYPE = 'f'
            AND X.SCHEMA = '${i.toUpperCase()}'
        ORDER BY
            X.CONSTRAINTNAME, X.CONSEQ
    `,o=new Map;try{let a=await ce(t,s,!0,e,n);if(!a||!a.data)return[];let l=Te(a);for(let c of l){let u=c.CONSTRAINTNAME,d=`${c.SCHEMA}.${c.FROM_TABLE}`,E=`${c.PKSCHEMA}.${c.TO_TABLE}`;o.has(u)||o.set(u,{constraintName:u,fromTable:d,toTable:E,fromColumns:[],toColumns:[],onDelete:c.DEL_TYPE||"NO ACTION",onUpdate:c.UPDT_TYPE||"NO ACTION"});let f=o.get(u);f.fromColumns.push(c.FROM_COLUMN),f.toColumns.push(c.TO_COLUMN)}}catch(a){console.warn("Cannot retrieve FK relationships:",a)}return Array.from(o.values())}async function S6(t,e,n,r,i,s){s?.report({message:"Fetching tables list..."});let o=`
        SELECT 
            T.TABLENAME,
            T.OWNER
        FROM 
            ${r.toUpperCase()}.._V_TABLE T
        WHERE 
            T.SCHEMA = '${i.toUpperCase()}'
        ORDER BY T.TABLENAME
    `,a=`
        SELECT 
            A.NAME AS TABLENAME,
            A.ATTNAME,
            A.FORMAT_TYPE
        FROM 
            ${r.toUpperCase()}.._V_RELATION_COLUMN A
        WHERE 
            A.SCHEMA = '${i.toUpperCase()}'
            AND A.TYPE = 'TABLE'
        ORDER BY A.NAME, A.ATTNUM
    `,l=`
        SELECT 
            X.RELATION,
            X.ATTNAME
        FROM 
            ${r.toUpperCase()}.._V_RELATION_KEYDATA X
        WHERE 
            X.CONTYPE = 'p'
            AND X.SCHEMA = '${i.toUpperCase()}'
        ORDER BY X.RELATION, X.CONSEQ
    `,c=new Map;try{let u=await ce(t,o,!0,e,n);if(u&&u.data){let f=Te(u);for(let p of f){let h=p.TABLENAME;c.set(h,{database:r,schema:i,tableName:h,fullName:`${i}.${h}`,columns:[],primaryKeyColumns:[]})}}s?.report({message:"Fetching columns..."});let d=await ce(t,a,!0,e,n);if(d&&d.data){let f=Te(d);for(let p of f){let h=c.get(p.TABLENAME);h&&h.columns.push({name:p.ATTNAME,dataType:p.FORMAT_TYPE,isPrimaryKey:!1,isForeignKey:!1})}}s?.report({message:"Fetching primary keys..."});let E=await ce(t,l,!0,e,n);if(E&&E.data){let f=Te(E);for(let p of f){let h=c.get(p.RELATION);if(h){h.primaryKeyColumns.push(p.ATTNAME);let T=h.columns.find(S=>S.name===p.ATTNAME);T&&(T.isPrimaryKey=!0)}}}}catch(u){console.warn("Cannot retrieve table information:",u)}return Array.from(c.values())}async function abe(t,e,n,r,i,s){let[o,a]=await Promise.all([S6(t,e,n,r,i,s),T6(t,e,n,r,i)]);for(let u of a){let d=u.fromTable.split(".")[1],E=o.find(f=>f.tableName===d);if(E)for(let f of u.fromColumns){let p=E.columns.find(h=>h.name===f);p&&(p.isForeignKey=!0)}}let l=new Set;for(let u of a)l.add(u.fromTable.split(".")[1]),l.add(u.toTable.split(".")[1]);let c=o.filter(u=>l.has(u.tableName)||o.length<=20);return{database:r,schema:i,tables:c,relationships:a}}var A6=G(()=>{"use strict";En()});var m6={};ht(m6,{ERDView:()=>yy});var oo,yy,g6=G(()=>{"use strict";oo=z(require("vscode")),yy=class t{constructor(e,n,r){this._disposables=[];this._panel=e,this._update(r),this._panel.onDidDispose(()=>this.dispose(),null,this._disposables)}static{this.viewType="netezza.erdView"}static createOrShow(e,n){let r=oo.window.activeTextEditor?oo.window.activeTextEditor.viewColumn:void 0;if(t.currentPanel){t.currentPanel._panel.reveal(r),t.currentPanel._update(n);return}let i=oo.window.createWebviewPanel(t.viewType,`ERD: ${n.database}.${n.schema}`,r||oo.ViewColumn.One,{enableScripts:!0,localResourceRoots:[oo.Uri.joinPath(e,"media")]});t.currentPanel=new t(i,e,n)}dispose(){for(t.currentPanel=void 0,this._panel.dispose();this._disposables.length;){let e=this._disposables.pop();e&&e.dispose()}}_update(e){this._panel.title=`ERD: ${e.database}.${e.schema}`,this._panel.webview.html=this._getHtml(e)}_getHtml(e){let n=this._generateTableBoxes(e.tables,e.relationships),r=e.relationships.length,i=e.tables.length;return`
            <!DOCTYPE html>
            <html lang="en">
            <head>
                <meta charset="UTF-8">
                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                <title>Entity Relationship Diagram</title>
                <style>
                    ${this._getStyles()}
                </style>
            </head>
            <body>
                <div class="header">
                    <h1>Entity Relationship Diagram</h1>
                    <div class="header-info">
                        <span class="badge">${e.database}.${e.schema}</span>
                        <span class="stat">${i} tables</span>
                        <span class="stat">${r} relationships</span>
                    </div>
                </div>

                <div class="legend">
                    <span class="legend-item"><span class="pk-indicator">\u{1F511}</span> Primary Key</span>
                    <span class="legend-item"><span class="fk-indicator">\u{1F517}</span> Foreign Key</span>
                </div>

                ${r===0?`
                    <div class="no-relationships">
                        <p>\u26A0\uFE0F No foreign key relationships found in this schema.</p>
                        <p>Tables are displayed but no relationship lines can be drawn.</p>
                    </div>
                `:""}

                <div class="erd-container" id="erdContainer">
                    <div class="erd-canvas" id="erdCanvas">
                        ${n}
                        <svg class="relationships-svg" id="relationshipsSvg"></svg>
                    </div>
                </div>

                <div class="relationships-table">
                    <h2>Foreign Key Relationships</h2>
                    ${r>0?`
                        <table>
                            <thead>
                                <tr>
                                    <th>Constraint Name</th>
                                    <th>From Table</th>
                                    <th>Column(s)</th>
                                    <th>\u2192</th>
                                    <th>To Table</th>
                                    <th>Column(s)</th>
                                    <th>On Delete</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${e.relationships.map(s=>`
                                    <tr>
                                        <td><code>${s.constraintName}</code></td>
                                        <td><strong>${s.fromTable}</strong></td>
                                        <td>${s.fromColumns.join(", ")}</td>
                                        <td>\u2192</td>
                                        <td><strong>${s.toTable}</strong></td>
                                        <td>${s.toColumns.join(", ")}</td>
                                        <td>${s.onDelete}</td>
                                    </tr>
                                `).join("")}
                            </tbody>
                        </table>
                    `:"<p>No foreign key relationships defined.</p>"}
                </div>

                <script>
                    ${this._getScript(e)}
                </script>
            </body>
            </html>
        `}_generateTableBoxes(e,n){let r=new Map,i=new Map,s=new Map;e.forEach(B=>{let H=B.tableName;r.set(H,new Set),i.set(H,0),s.set(H,0)}),n.forEach(B=>{let H=B.fromTable.includes(".")?B.fromTable.split(".").pop():B.fromTable,X=B.toTable.includes(".")?B.toTable.split(".").pop():B.toTable;r.has(H)&&(r.get(H).add(X),i.set(H,(i.get(H)||0)+1)),r.has(X)&&(r.get(X).add(H),s.set(X,(s.get(X)||0)+1))});let o=[],a=[],l=[];e.forEach(B=>{let H=i.get(B.tableName)||0;(r.get(B.tableName)?.size||0)===0?l.push(B):H>0?o.push(B):a.push(B)}),o.sort((B,H)=>{let X=i.get(B.tableName)||0;return(i.get(H.tableName)||0)-X});let c=new Map,u=new Set,d=260,E=240,f=50,p=40,h=d+f,T=E+p,S=(B,H)=>`${B},${H}`,I=(B,H)=>u.add(S(B,H)),R=(B,H)=>u.has(S(B,H)),m=(B,H=0)=>{let X=H;for(;R(B,X);)X++;return X},A=0,N=1,g=2,L=B=>20+B*h,y=B=>20+B*T;o.forEach(B=>{let H=m(N);I(N,H),c.set(B.tableName,{x:L(N),y:y(H)})});let D=new Map,x=[];return a.forEach(B=>{let H=r.get(B.tableName)||new Set,X=null;for(let J of H)if(o.some(ee=>ee.tableName===J)){X=J;break}X?(D.has(X)||D.set(X,[]),D.get(X).push(B)):x.push(B)}),D.forEach((B,H)=>{let X=c.get(H);if(!X)return;let J=Math.round((X.y-20)/T);B.forEach((ee,Q)=>{let ie=Q%2===0?A:g,fe=J+Math.floor(Q/2);for(;R(ie,fe);)fe++;I(ie,fe),c.set(ee.tableName,{x:L(ie),y:y(fe)})})}),x.forEach(B=>{let H=!1;for(let X of[A,g]){let J=m(X);H||(I(X,J),c.set(B.tableName,{x:L(X),y:y(J)}),H=!0)}}),l.length>0&&l.forEach((H,X)=>{let J=X;c.set(H.tableName,{x:L(3),y:y(J)})}),e.map(B=>{let H=c.get(B.tableName)||{x:20,y:20},X=B.columns.slice(0,10).map(ee=>{let Q=[];ee.isPrimaryKey&&Q.push("\u{1F511}"),ee.isForeignKey&&Q.push("\u{1F517}");let ie=Q.length>0?`<span class="col-icons">${Q.join("")}</span>`:"";return`
                    <div class="table-column ${ee.isPrimaryKey?"pk":""} ${ee.isForeignKey?"fk":""}" data-col="${ee.name}">
                        ${ie}
                        <span class="col-name">${ee.name}</span>
                        <span class="col-type">${ee.dataType}</span>
                    </div>
                `}).join(""),J=B.columns.length>10?`<div class="more-columns">... and ${B.columns.length-10} more</div>`:"";return`
                <div class="table-box" id="table-${B.tableName}" 
                     data-table="${B.fullName}"
                     style="left: ${H.x}px; top: ${H.y}px;">
                    <div class="table-header">${B.tableName}</div>
                    <div class="table-columns">
                        ${X}
                        ${J}
                    </div>
                </div>
            `}).join("")}_getScript(e){return`
            (function() {
                const relationships = ${JSON.stringify(e.relationships)};
                const canvas = document.getElementById('erdCanvas');
                const svg = document.getElementById('relationshipsSvg');
                
                function getTableBox(el) {
                    const left = parseInt(el.style.left) || 0;
                    const top = parseInt(el.style.top) || 0;
                    const width = el.offsetWidth;
                    const height = el.offsetHeight;
                    return {
                        left: left,
                        top: top,
                        right: left + width,
                        bottom: top + height,
                        centerX: left + width / 2,
                        centerY: top + height / 2
                    };
                }

                function getColumnPosition(tableEl, columnName) {
                    // Try to find exact column
                    let colEl = tableEl.querySelector('.table-column[data-col="' + columnName + '"]');
                    
                    // If not found (hidden by "more columns"), try to estimate or return center
                    if (!colEl) return null;

                    // Calculate position relative to the table box
                    const tableRect = tableEl.getBoundingClientRect();
                    const colRect = colEl.getBoundingClientRect();
                    const canvasRect = canvas.getBoundingClientRect();

                    // Relative Y from canvas top
                    // We can't just subtract rects if the canvas is scrolled, but here we want SVG coords (absolute in canvas)
                    // The table.style.top is relative to canvas.
                    // The column offset within table is colRect.top - tableRect.top
                    // So Y = table.style.top + (colRect.top - tableRect.top) + colHeight/2
                    
                    const relativeTop = colRect.top - tableRect.top;
                    const centerY = relativeTop + colRect.height / 2;
                    
                    // We need to account for table scroll position if any?
                    // getBoundingClientRect takes visual position, so it accounts for scroll.
                    
                    const tableStyleTop = parseInt(tableEl.style.top) || 0;
                    
                    return tableStyleTop + centerY;
                }
                
                function drawRelationships() {
                    svg.innerHTML = '';
                    
                    // Update SVG size
                    let maxX = 1200, maxY = 600;
                    document.querySelectorAll('.table-box').forEach(el => {
                        const box = getTableBox(el);
                        maxX = Math.max(maxX, box.right + 50);
                        maxY = Math.max(maxY, box.bottom + 50);
                    });
                    
                    svg.setAttribute('width', maxX);
                    svg.setAttribute('height', maxY);
                    svg.style.width = maxX + 'px';
                    svg.style.height = maxY + 'px';
                    
                    // Defs
                    const defs = document.createElementNS('http://www.w3.org/2000/svg', 'defs');
                    const marker = document.createElementNS('http://www.w3.org/2000/svg', 'marker');
                    marker.setAttribute('id', 'arrowhead');
                    marker.setAttribute('markerWidth', '10');
                    marker.setAttribute('markerHeight', '7');
                    marker.setAttribute('refX', '10');
                    marker.setAttribute('refY', '3.5');
                    marker.setAttribute('orient', 'auto');
                    const polygon = document.createElementNS('http://www.w3.org/2000/svg', 'polygon');
                    polygon.setAttribute('points', '0 0, 10 3.5, 0 7');
                    polygon.setAttribute('fill', '#3794ff');
                    marker.appendChild(polygon);
                    defs.appendChild(marker);
                    svg.appendChild(defs);
                    
                    relationships.forEach((rel, index) => {
                        const childTableName = rel.fromTable.split('.')[1];
                        const parentTableName = rel.toTable.split('.')[1];
                        
                        const childEl = document.getElementById('table-' + childTableName);
                        const parentEl = document.getElementById('table-' + parentTableName);
                        
                        if (!childEl || !parentEl) return;
                        
                        const childBox = getTableBox(childEl);
                        const parentBox = getTableBox(parentEl);
                        
                        // Determine L/R relationship
                        // If Parent is to the right of Child: Child Right -> Parent Left
                        const parentIsRight = parentBox.centerX > childBox.centerX;
                        
                        let fromX, fromY, toX, toY;
                        let fromControlX, toControlX;
                        
                        // Default Y to center if col not found
                        fromY = childBox.centerY;
                        toY = parentBox.centerY;
                        
                        // Try get specific column Y
                        const colY1 = getColumnPosition(childEl, rel.fromColumns[0]);
                        const colY2 = getColumnPosition(parentEl, rel.toColumns[0]);
                        
                        if (colY1 !== null) fromY = colY1;
                        if (colY2 !== null) toY = colY2;
                        
                        if (parentIsRight) {
                            fromX = childBox.right;
                            toX = parentBox.left;
                            fromControlX = fromX + 50;
                            toControlX = toX - 50;
                        } else {
                            fromX = childBox.left;
                            toX = parentBox.right;
                            fromControlX = fromX - 50;
                            toControlX = toX + 50;
                        }
                        
                        // Calculate Bezier curve
                        // M start C c1 c2 end
                        const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                        
                        // Adjust constraints for multiple lines?
                        // Simple cubic bezier is best for side-to-side
                        const d = \`M \${fromX} \${fromY} C \${fromControlX} \${fromY}, \${toControlX} \${toY}, \${toX} \${toY}\`;
                        
                        path.setAttribute('d', d);
                        path.setAttribute('stroke', '#3794ff');
                        path.setAttribute('stroke-width', '2');
                        path.setAttribute('fill', 'none');
                        path.setAttribute('marker-end', 'url(#arrowhead)');
                        path.setAttribute('class', 'relationship-line');
                        
                        const title = document.createElementNS('http://www.w3.org/2000/svg', 'title');
                        title.textContent = rel.constraintName + ': ' + 
                            childTableName + '.' + rel.fromColumns.join(',') + ' -> ' + 
                            parentTableName + '.' + rel.toColumns.join(',');
                        path.appendChild(title);
                        
                        svg.appendChild(path);
                    });
                }
                
                // Dragging Logic
                let dragging = null;
                let dragStartX = 0, dragStartY = 0;
                let elemStartLeft = 0, elemStartTop = 0;
                
                document.querySelectorAll('.table-box').forEach(table => {
                    const header = table.querySelector('.table-header');
                    if (header) {
                        header.addEventListener('mousedown', function(e) {
                            e.preventDefault();
                            dragging = table;
                            dragStartX = e.pageX;
                            dragStartY = e.pageY;
                            elemStartLeft = parseInt(table.style.left) || 0;
                            elemStartTop = parseInt(table.style.top) || 0;
                            table.style.zIndex = '1000';
                            document.body.style.cursor = 'grabbing';
                        });
                    }
                });
                
                document.addEventListener('mousemove', function(e) {
                    if (!dragging) return;
                    const dx = e.pageX - dragStartX;
                    const dy = e.pageY - dragStartY;
                    dragging.style.left = Math.max(0, elemStartLeft + dx) + 'px';
                    dragging.style.top = Math.max(0, elemStartTop + dy) + 'px';
                    drawRelationships();
                });
                
                document.addEventListener('mouseup', function() {
                    if (dragging) {
                        dragging.style.zIndex = '';
                        document.body.style.cursor = '';
                        dragging = null;
                    }
                });
                
                requestAnimationFrame(() => setTimeout(drawRelationships, 50));
                window.addEventListener('resize', drawRelationships);
            })();
        `}_getStyles(){return`
            :root {
                --bg-color: var(--vscode-editor-background);
                --fg-color: var(--vscode-editor-foreground);
                --border-color: var(--vscode-widget-border);
                --header-bg: var(--vscode-sideBarSectionHeader-background);
                --table-bg: var(--vscode-editorWidget-background);
                --pk-color: #f1c40f;
                --fk-color: #3498db;
            }

            body {
                font-family: var(--vscode-font-family);
                font-size: var(--vscode-font-size);
                color: var(--fg-color);
                background-color: var(--bg-color);
                margin: 0;
                padding: 20px;
            }

            .header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 15px;
                padding-bottom: 10px;
                border-bottom: 1px solid var(--border-color);
            }

            .header h1 {
                margin: 0;
                font-size: 1.4em;
            }

            .header-info {
                display: flex;
                gap: 15px;
                align-items: center;
            }

            .badge {
                background-color: var(--vscode-badge-background);
                color: var(--vscode-badge-foreground);
                padding: 4px 10px;
                border-radius: 12px;
                font-size: 0.9em;
            }

            .stat {
                color: var(--vscode-descriptionForeground);
                font-size: 0.9em;
            }

            .legend {
                display: flex;
                gap: 20px;
                margin-bottom: 15px;
                font-size: 0.9em;
            }

            .legend-item {
                display: flex;
                align-items: center;
                gap: 5px;
            }

            .no-relationships {
                background-color: rgba(255, 193, 7, 0.2);
                padding: 15px;
                border-radius: 6px;
                margin-bottom: 15px;
            }

            .no-relationships p {
                margin: 5px 0;
            }

            .erd-container {
                background-color: var(--header-bg);
                border: 1px solid var(--border-color);
                border-radius: 6px;
                overflow: auto;
                margin-bottom: 20px;
                min-height: 400px;
            }

            .erd-canvas {
                position: relative;
                min-width: 1200px;
                min-height: 600px;
            }

            .relationships-svg {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                pointer-events: none;
            }

            .relationship-line {
                pointer-events: stroke;
            }

            .relationship-line:hover {
                stroke-width: 3;
            }

            .table-box {
                position: absolute;
                width: 250px;
                background-color: var(--table-bg);
                border: 2px solid var(--border-color);
                border-radius: 6px;
                overflow: hidden;
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
            }

            .table-header {
                background-color: var(--vscode-textLink-foreground);
                color: white;
                padding: 8px 12px;
                font-weight: bold;
                cursor: move;
                font-size: 0.95em;
            }

            .table-columns {
                max-height: 200px;
                overflow-y: auto;
            }

            .table-column {
                display: flex;
                align-items: center;
                padding: 4px 10px;
                border-bottom: 1px solid var(--border-color);
                font-size: 0.85em;
                gap: 6px;
            }

            .table-column:last-child {
                border-bottom: none;
            }

            .table-column.pk {
                background-color: rgba(241, 196, 15, 0.1);
            }

            .table-column.fk {
                background-color: rgba(52, 152, 219, 0.1);
            }

            .col-icons {
                font-size: 0.8em;
            }

            .col-name {
                flex: 1;
                font-weight: 500;
            }

            .col-type {
                color: var(--vscode-descriptionForeground);
                font-size: 0.85em;
            }

            .more-columns {
                padding: 6px 10px;
                color: var(--vscode-descriptionForeground);
                font-style: italic;
                font-size: 0.85em;
            }

            .relationships-table {
                margin-top: 20px;
            }

            .relationships-table h2 {
                font-size: 1.1em;
                margin-bottom: 10px;
            }

            table {
                width: 100%;
                border-collapse: collapse;
            }

            th, td {
                padding: 10px;
                text-align: left;
                border: 1px solid var(--border-color);
            }

            th {
                background-color: var(--header-bg);
                font-weight: 600;
            }

            code {
                font-family: var(--vscode-editor-font-family);
                background-color: var(--vscode-textCodeBlock-background);
                padding: 2px 6px;
                border-radius: 3px;
            }
        `}}});var I6={};ht(I6,{SessionMonitorView:()=>by});function lbe(){let t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let n=0;n<32;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}var ar,by,_6=G(()=>{"use strict";ar=z(require("vscode"));En();by=class t{constructor(e,n,r,i){this._disposables=[];this._panel=e,this._extensionUri=n,this._context=r,this._connectionManager=i,this._update(),this._panel.onDidDispose(()=>this.dispose(),null,this._disposables),this._panel.webview.onDidReceiveMessage(async s=>{switch(s.command){case"refresh":await this._fetchAndSendData();return;case"killSession":await this._killSession(s.sessionId);return;case"toggleAutoRefresh":this._toggleAutoRefresh(s.enabled);return}},null,this._disposables),this._fetchAndSendData()}static{this.viewType="netezza.sessionMonitor"}static createOrShow(e,n,r){let i=ar.window.activeTextEditor?ar.ViewColumn.Beside:void 0;if(t.currentPanel){t.currentPanel._panel.reveal(i),t.currentPanel._fetchAndSendData();return}let s=ar.window.createWebviewPanel(t.viewType,"Session Monitor",i||ar.ViewColumn.One,{enableScripts:!0,localResourceRoots:[ar.Uri.joinPath(e,"media")],retainContextWhenHidden:!0});t.currentPanel=new t(s,e,n,r)}dispose(){for(t.currentPanel=void 0,this._refreshInterval&&clearInterval(this._refreshInterval),this._panel.dispose();this._disposables.length;){let e=this._disposables.pop();e&&e.dispose()}}_toggleAutoRefresh(e){e?this._refreshInterval=setInterval(()=>{this._fetchAndSendData()},12e4):this._refreshInterval&&(clearInterval(this._refreshInterval),this._refreshInterval=void 0)}async _killSession(e){try{if(await ar.window.showWarningMessage(`Are you sure you want to terminate session ${e}?`,{modal:!0},"Yes, Kill Session")!=="Yes, Kill Session")return;let r=`DROP SESSION ${e}`;await ce(this._context,r,!0,this._connectionManager,void 0),ar.window.showInformationMessage(`Session ${e} terminated successfully.`),await this._fetchAndSendData()}catch(n){ar.window.showErrorMessage(`Failed to kill session: ${n instanceof Error?n.message:String(n)}`)}}async _fetchAndSendData(){this._panel.webview.postMessage({command:"setLoading",loading:!0});try{let[e,n,r,i]=await Promise.all([this._fetchSessions(),this._fetchQueries(),this._fetchStorage(),this._fetchResources()]);this._panel.webview.postMessage({command:"updateData",data:{sessions:e,queries:n,storage:r,resources:i}})}catch(e){this._panel.webview.postMessage({command:"error",text:`Failed to fetch data: ${e instanceof Error?e.message:String(e)}`})}finally{this._panel.webview.postMessage({command:"setLoading",loading:!1})}}async _fetchSessions(){let e=`
            SELECT ID, PID, USERNAME, DBNAME, TYPE, CONNTIME, STATUS, 
                   SUBSTR(COMMAND, 1, 200) AS COMMAND, PRIORITY, CID, IPADDR, CLIENT_OS_USERNAME
            FROM _V_SESSION
            ORDER BY CONNTIME DESC
        `;try{let n=await ce(this._context,e,!0,this._connectionManager,void 0);return!n||!n.data?[]:Te(n)}catch(n){return console.error("Error fetching sessions:",n),[]}}async _fetchQueries(){let e=`
            SELECT Q.QS_SESSIONID, Q.QS_PLANID, Q.QS_CLIENTID, Q.QS_CLIIPADDR,
                   SUBSTR(Q.QS_SQL, 1, 300) AS QS_SQL, 
                   Q.QS_STATE, Q.QS_TSUBMIT, Q.QS_TSTART, 
                   Q.QS_PRIORITY, Q.QS_PRITXT, Q.QS_ESTCOST, 
                   Q.QS_ESTDISK, Q.QS_ESTMEM, Q.QS_SNIPPETS, Q.QS_CURSNIPT,
                   Q.QS_RESROWS, Q.QS_RESBYTES,
                   S.USERNAME
            FROM _V_QRYSTAT Q
            LEFT JOIN _V_SESSION S ON Q.QS_SESSIONID = S.ID
            ORDER BY Q.QS_TSTART DESC
            LIMIT 100
        `;try{let n=await ce(this._context,e,!0,this._connectionManager,void 0);return!n||!n.data?[]:Te(n)}catch(n){return console.error("Error fetching queries:",n),[]}}async _fetchStorage(){let e=`
            SELECT O.DBNAME AS DATABASE, TS.SCHEMA, 
                   ROUND(SUM(TS.ALLOCATED_BYTES) / 1024.0 / 1024.0, 2) AS ALLOC_MB,
                   ROUND(SUM(TS.USED_BYTES) / 1024.0 / 1024.0, 2) AS USED_MB,
                   ROUND(SUM(TS.SKEW * TS.USED_BYTES) / NULLIF(SUM(TS.USED_BYTES), 0), 2) AS AVG_SKEW,
                   COUNT(*) AS TABLE_COUNT
            FROM _V_TABLE_STORAGE_STAT TS
            JOIN _V_OBJECT_DATA O ON TS.OBJID = O.OBJID
            GROUP BY O.DBNAME, TS.SCHEMA
            ORDER BY USED_MB DESC
        `;try{let n=await ce(this._context,e,!0,this._connectionManager,void 0);return!n||!n.data?[]:Te(n)}catch(n){return console.error("Error fetching storage:",n),[]}}async _fetchResources(){let e=[],n=[],r=null;try{let i=await ce(this._context,"SELECT * FROM _V_SCHED_GRA_EXT LIMIT 50",!0,this._connectionManager,void 0);i&&i.data&&(e=Te(i))}catch(i){console.warn("_V_SCHED_GRA_EXT not available:",i)}try{let i=await ce(this._context,"SELECT * FROM _V_SYSTEM_UTIL ORDER BY 1 DESC LIMIT 50",!0,this._connectionManager,void 0);i&&i.data&&(n=Te(i))}catch(i){console.warn("_V_SYSTEM_UTIL not available:",i)}try{let i=await ce(this._context,`SELECT 
                    ROUND(AVG(HOST_CPU) * 100, 1) AS AVG_HOST_CPU_PCT,
                    ROUND(AVG(SPU_CPU) * 100, 1) AS AVG_SPU_CPU_PCT,
                    ROUND(AVG(HOST_DISK) * 100, 1) AS AVG_DISK_PCT,
                    ROUND(AVG(HOST_MEMORY) * 100, 1) AS AVG_MEMORY_PCT,
                    ROUND(AVG(HOST_FABRIC) * 100, 1) AS AVG_FABRIC_PCT,
                    COUNT(*) AS SAMPLE_COUNT
                FROM _V_SYSTEM_UTIL`,!0,this._connectionManager,void 0);if(i&&i.data){let s=Te(i);r=s.length>0?s[0]:null}}catch(i){console.warn("_V_SYSTEM_UTIL summary not available:",i)}return{gra:e,systemUtil:n,sysUtilSummary:r}}_update(){let e=this._panel.webview;this._panel.title="Session Monitor",this._panel.webview.html=this._getHtmlForWebview(e)}_getHtmlForWebview(e){let n=e.asWebviewUri(ar.Uri.joinPath(this._extensionUri,"media","sessionMonitor.js")),r=e.asWebviewUri(ar.Uri.joinPath(this._extensionUri,"media","sessionMonitor.css")),i=lbe();return`<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Security-Policy" content="default-src 'none'; style-src ${e.cspSource} 'unsafe-inline'; script-src 'nonce-${i}';">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="${r}" rel="stylesheet">
    <title>Session Monitor</title>
</head>
<body>
    <div class="container">
        <div class="header">
            <h2>\u{1F5A5}\uFE0F Session Monitor Dashboard</h2>
            <div class="header-actions">
                <label class="auto-refresh">
                    <input type="checkbox" id="autoRefresh"> Auto-refresh (2 min)
                </label>
                <button id="refreshBtn" class="btn btn-primary">\u{1F504} Refresh</button>
            </div>
        </div>

        <div class="loading-overlay" id="loadingOverlay">
            <div class="spinner"></div>
            <span>Loading data...</span>
        </div>

        <div class="tabs">
            <button class="tab-btn active" data-tab="sessions">\u{1F4CB} Sessions</button>
            <button class="tab-btn" data-tab="queries">\u23F1\uFE0F Running Queries</button>
            <button class="tab-btn" data-tab="storage">\u{1F4BE} Storage</button>
            <button class="tab-btn" data-tab="resources">\u{1F4CA} Resources</button>
        </div>

        <div class="tab-content" id="sessions">
            <div class="section-header">
                <h3>Active Sessions</h3>
                <div class="filter-controls">
                    <input type="text" id="sessionUserFilter" placeholder="Filter by User..." class="filter-input">
                </div>
                <span class="count" id="sessionCount">0 sessions</span>
            </div>
            <div class="table-container">
                <table id="sessionsTable">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>PID</th>
                            <th>User</th>
                            <th>Database</th>
                            <th>Type</th>
                            <th>Connected</th>
                            <th>Status</th>
                            <th>IP</th>
                            <th>Command</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>

        <div class="tab-content hidden" id="queries">
            <div class="section-header">
                <h3>Running Queries</h3>
                <div class="filter-controls">
                    <input type="text" id="queryUserFilter" placeholder="Filter by User..." class="filter-input">
                </div>
                <span class="count" id="queryCount">0 queries</span>
            </div>
            <div class="table-container">
                <table id="queriesTable">
                    <thead>
                        <tr>
                            <th>Session</th>
                            <th>User</th>
                            <th>Plan ID</th>
                            <th>State</th>
                            <th>Priority</th>
                            <th>Submitted</th>
                            <th>Started</th>
                            <th>Est. Cost</th>
                            <th>Rows</th>
                            <th>SQL</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>

        <div class="tab-content hidden" id="storage">
            <div class="section-header">
                <h3>Storage by Schema</h3>
                <span class="count" id="storageCount">0 schemas</span>
            </div>
            <div class="table-container">
                <table id="storageTable">
                    <thead>
                        <tr>
                            <th>Database</th>
                            <th>Schema</th>
                            <th>Allocated (MB)</th>
                            <th>Used (MB)</th>
                            <th>Usage %</th>
                            <th>Avg Skew</th>
                            <th>Tables</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>

        <div class="tab-content hidden" id="resources">
            <div class="section-header">
                <h3>Resource Utilization</h3>
            </div>
            <div class="resources-grid">
                <div class="resource-section">
                    <h4>GRA Scheduler</h4>
                    <div id="graTable" class="table-container small"></div>
                </div>
                <div class="resource-section">
                    <h4>System Utilization</h4>
                    <div id="sysUtilSummary"></div>
                    <div id="sysUtilTable" class="table-container small"></div>
                </div>
            </div>
        </div>
    </div>

    <script nonce="${i}" src="${n}"></script>
</body>
</html>`}}});var w6={};ht(w6,{XlsxWriter:()=>zS,default:()=>ube});var y6,b6,wy,C6,cbe,zS,ube,L6=G(()=>{"use strict";y6=z(require("fs")),b6=z(YC()),wy=require("stream");VC();C6=(()=>{let t=[];for(let n=65;n<91;n++)t.push(String.fromCharCode(n));let e=[];for(let n of t)for(let r=65;r<91;r++)e.push(n+String.fromCharCode(r));return t.push(...e),t})(),cbe=/[\\/*?[\]:]/g,zS=class{constructor(e){this.sheetCount=0;this.sheetList=[];this.sstArray=[];this.sstMap=new Map;this.sstCntAll=0;this.colWidths=[];this._autofilterIsOn=!1;this.filePath=e,this.output=y6.createWriteStream(e),this.archive=(0,b6.default)("zip"),this.archive.pipe(this.output),this._oaEpoch=Date.UTC(1899,11,30)}_getColumnLetter(e){return e<C6.length?C6[e]:"A"}_sanitizeSheetName(e){if(!e||typeof e!="string")return`Sheet${this.sheetCount+1}`;let n=e.replace(cbe,"_");return n.length>31&&(n=n.substring(0,31)),n.trim().length===0&&(n=`Sheet${this.sheetCount+1}`),n}_escapeSheetNameForXml(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}_formatSheetNameForFormula(e){return/[\s\-+=()!@#$%^&]/.test(e)||/^[0-9]/.test(e)?`'${e.replace(/'/g,"''")}'`:e}addSheet(e,n=!1){let r=this._sanitizeSheetName(e);this.sheetCount++;let i=`rId${this.sheetCount}`,s=`sheet${this.sheetCount}.xml`;this.sheetList.push({name:r,pathInArchive:`xl/worksheets/${s}`,hidden:n,nameInArchive:s,sheetId:this.sheetCount,rId:i,filterHeaderRange:null})}_needsEscape(e){for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r===38||r===60||r===62||r===34||r===39||r>=0&&r<=8||r===11||r===12||r>=14&&r<=31)return!0}return!1}_escape(e){return typeof e!="string"||!this._needsEscape(e)?e:e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/[\x00-\x08\x0b\x0c\x0e-\x1f]/g,"")}writeSheet(e,n=null,r=!0){let i=new cs,s=0;e.length>0?s=e[0].length:n&&(s=n.length),this.colWidths=new Array(s).fill(-1);let o=new Array(s);for(let u=0;u<s;u++)o[u]=this._getColumnLetter(u);if(n)for(let u=0;u<s;u++){let E=1.25*(n[u]?n[u].length:0)+2;E>80&&(E=80),this.colWidths[u]<E&&(this.colWidths[u]=E)}for(let u=0;u<Math.min(e.length,100);u++){let d=e[u];for(let E=0;E<d.length;E++){let f=d[E];if(f==null)continue;let h=1.25*(f instanceof Date?10:f.toString().length)+2;h>80&&(h=80),this.colWidths[E]<h&&(this.colWidths[E]=h)}}i.writeString('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>'),i.writeString('<worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships">');let a=e.length+(n?1:0);a>0&&s>0?i.writeString(`<dimension ref="A1:${o[s-1]}${a}"/>`):i.writeString('<dimension ref="A1"/>');let l=this.sheetCount===1;r&&n?l?i.writeString('<sheetViews><sheetView tabSelected="1" workbookViewId="0"><pane ySplit="1" topLeftCell="A2" activePane="bottomLeft" state="frozen" /><selection pane="bottomLeft" /></sheetView></sheetViews><sheetFormatPr defaultRowHeight="15"/>'):i.writeString('<sheetViews><sheetView workbookViewId="0"><pane ySplit="1" topLeftCell="A2" activePane="bottomLeft" state="frozen" /><selection pane="bottomLeft" /></sheetView></sheetViews><sheetFormatPr defaultRowHeight="15"/>'):l?i.writeString('<sheetViews><sheetView tabSelected="1" workbookViewId="0"/></sheetViews><sheetFormatPr defaultRowHeight="15"/>'):i.writeString('<sheetViews><sheetView workbookViewId="0"/></sheetViews><sheetFormatPr defaultRowHeight="15"/>'),i.writeString("<cols>");for(let u=0;u<s;u++){let d=this.colWidths[u]>0?this.colWidths[u]:10;i.writeString(`<col min="${u+1}" max="${u+1}" width="${d}" bestFit="1" customWidth="1" />`)}i.writeString("</cols><sheetData>");let c=0;if(n){c++,i.writeString(`<row r="${c}">`);for(let u=0;u<n.length;u++)this._writeStringCell(i,n[u],o[u],c);i.writeString("</row>")}for(let u=0;u<e.length;u++){c++,i.writeString(`<row r="${c}">`);let d=e[u];for(let E=0;E<d.length;E++){let f=d[E];if(f==null)continue;let p=o[E];if(typeof f=="number")Number.isFinite(f)?i.writeString(`<c r="${p}${c}"><v>${f}</v></c>`):this._writeStringCell(i,f.toString(),p,c);else if(typeof f=="bigint")this._writeStringCell(i,f.toString(),p,c);else if(typeof f=="boolean")i.writeString(`<c r="${p}${c}" t="b"><v>${f?1:0}</v></c>`);else if(f instanceof Date){let h=this._toOADate(f);Number.isFinite(h)?i.writeString(`<c r="${p}${c}" s="1"><v>${h}</v></c>`):this._writeStringCell(i,f.toString(),p,c)}else this._writeStringCell(i,f.toString(),p,c)}i.writeString("</row>")}if(i.writeString("</sheetData>"),r&&n&&s>0){this._autofilterIsOn=!0;let u=`A1:${o[s-1]}${a}`;i.writeString(`<autoFilter ref="${u}"/>`);let d=this.sheetList[this.sheetCount-1],E=this._formatSheetNameForFormula(d.name);d.filterHeaderRange=`${E}!$A$1:$${o[s-1]}$${a}`}i.writeString("</worksheet>"),this.archive.append(wy.Readable.from(i.getChunks()),{name:this.sheetList[this.sheetCount-1].pathInArchive})}_writeStringCell(e,n,r,i){let s=this.sstMap.get(n);s===void 0&&(s=this.sstArray.length,this.sstArray.push(n),this.sstMap.set(n,s)),this.sstCntAll++,e.writeString(`<c r="${r}${i}" t="s"><v>${s}</v></c>`)}_toOADate(e){let n=e.getTimezoneOffset()*6e4;return(e.getTime()-n-this._oaEpoch)/864e5}finalize(){return new Promise((e,n)=>{try{this._writeSharedStrings(),this._writeStyles(),this._writeWorkbook(),this._writeContentTypes(),this._writeRels(),this.output.on("close",()=>{e()}),this.archive.on("error",r=>{n(r)}),this.archive.finalize()}catch(r){n(r)}})}_writeSharedStrings(){let e=new cs;e.writeString('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>'),e.writeString(`<sst xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" count="${this.sstCntAll}" uniqueCount="${this.sstArray.length}">`);for(let n=0;n<this.sstArray.length;n++){let r=this.sstArray[n],i=this._escape(r);i.length>0&&(i[0]===" "||i[i.length-1]===" "||/[\t\n\r]/.test(i))?e.writeString(`<si><t xml:space="preserve">${i}</t></si>`):e.writeString(`<si><t>${i}</t></si>`)}e.writeString("</sst>"),this.archive.append(wy.Readable.from(e.getChunks()),{name:"xl/sharedStrings.xml"})}_writeStyles(){this.archive.append(`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main">
<numFmts count="1">
    <numFmt numFmtId="164" formatCode="yyyy\\-mm\\-dd\\ hh:mm:ss"/>
</numFmts>
<fonts count="1">
<font><sz val="11"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font>
</fonts>
<fills count="2">
<fill><patternFill patternType="none"/></fill>
<fill><patternFill patternType="gray125"/></fill>
</fills>
<borders count="1">
<border><left/><right/><top/><bottom/><diagonal/></border>
</borders>
<cellStyleXfs count="1">
<xf numFmtId="0" fontId="0" fillId="0" borderId="0"/>
</cellStyleXfs>
<cellXfs count="3">
<xf numFmtId="0" fontId="0" fillId="0" borderId="0" xfId="0"/>
<xf numFmtId="14" fontId="0" fillId="0" borderId="0" xfId="0" applyNumberFormat="1"/>
<xf numFmtId="164" fontId="0" fillId="0" borderId="0" xfId="0" applyNumberFormat="1"/>
</cellXfs>
<cellStyles count="1">
<cellStyle name="Normal" xfId="0" builtinId="0"/>
</cellStyles>
<dxfs count="0"/>
<tableStyles count="0" defaultTableStyle="TableStyleMedium2" defaultPivotStyle="PivotStyleLight16"/>
</styleSheet>`,{name:"xl/styles.xml"})}_writeWorkbook(){let e=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<workbook xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships">
<sheets>`;for(let n of this.sheetList){let r=n.hidden?' state="hidden"':"",i=this._escapeSheetNameForXml(n.name);e+=`<sheet name="${i}" sheetId="${n.sheetId}"${r} r:id="${n.rId}"/>`}if(e+="</sheets>",this._autofilterIsOn){e+="<definedNames>";for(let n of this.sheetList)if(n.filterHeaderRange){let r=n.sheetId-1,i=this._escape(n.filterHeaderRange);e+=`<definedName name="_xlnm._FilterDatabase" localSheetId="${r}" hidden="1">${i}</definedName>`}e+="</definedNames>"}e+="</workbook>",this.archive.append(e,{name:"xl/workbook.xml"})}_writeContentTypes(){let e=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types">
<Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml"/>
<Default Extension="xml" ContentType="application/xml"/>
<Override PartName="/xl/workbook.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"/>
<Override PartName="/xl/styles.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"/>
<Override PartName="/xl/sharedStrings.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml"/>`;for(let n of this.sheetList)e+=`<Override PartName="/${n.pathInArchive}" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"/>`;e+="</Types>",this.archive.append(e,{name:"[Content_Types].xml"})}_writeRels(){this.archive.append(`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">
<Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.xml"/>
</Relationships>`,{name:"_rels/.rels"});let n=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">`;for(let i of this.sheetList)n+=`<Relationship Id="${i.rId}" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="worksheets/${i.nameInArchive}"/>`;let r=this.sheetList.length+1;n+=`<Relationship Id="rId${r++}" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Target="styles.xml"/>`,n+=`<Relationship Id="rId${r++}" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings" Target="sharedStrings.xml"/>`,n+="</Relationships>",this.archive.append(n,{name:"xl/_rels/workbook.xml.rels"})}},ube=zS});var Py={};ht(Py,{copyFileToClipboard:()=>Dy,exportCsvToXlsx:()=>hbe,exportStructuredToXlsx:()=>pbe,getTempFilePath:()=>Tbe});function fbe(t){return t?dbe.has(t.toUpperCase()):!1}function x6(t){if(typeof t=="string"&&t.length>0){if(t.length>15||/^-?0\d+/.test(t))return t;if(/^-?\d+(\.\d+)?$/.test(t)){let e=parseFloat(t);if(Number.isFinite(e))return e}}return t}function Ebe(t){return t.map(x6)}async function hbe(t,e,n=!1,r={source:"Unknown"},i){try{i&&i("Initializing XLSX writer...");let s=new P6(e),o=0,a=0,l=[],c=(f,p)=>{let h=f.split(/\r?\n/),T=m=>{let A=[],N=0,g=!1;for(let y=0;y<m.length;y++)if(m[y]==='"')g=!g;else if(m[y]===","&&!g){let D=m.substring(N,y);D.startsWith('"')&&D.endsWith('"')&&(D=D.substring(1,D.length-1).replace(/""/g,'"')),A.push(D),N=y+1}let L=m.substring(N);return L.startsWith('"')&&L.endsWith('"')&&(L=L.substring(1,L.length-1).replace(/""/g,'"')),A.push(L),A},S=0;for(;S<h.length&&!h[S].trim();)S++;if(S>=h.length)return;let I=T(h[S]);if(I.length===0)return;a=Math.max(a,I.length);let R=[];for(let m=S+1;m<h.length;m++){let A=h[m];if(!A.trim())continue;let N=T(A);R.push(Ebe(N))}s.addSheet(p),s.writeSheet(R,I,!0),o+=R.length};if(Array.isArray(t)?(i&&i(`Processing ${t.length} result sets...`),t.forEach((f,p)=>{let h=f.name||`Result ${p+1}`;i&&i(`Processing sheet "${h}"...`),c(f.csv,h),f.sql&&l.push({name:h,sql:f.sql})})):(i&&i("Reading CSV content..."),c(t,"Query Results"),r.sql&&l.push({name:"Query Results",sql:r.sql})),l.length>0){s.addSheet("SQL Code");let f=[];l.forEach(p=>{f.push([`--- SQL for ${p.name} ---`]),p.sql.split(`
`).forEach(h=>{f.push([h])}),f.push([""])}),s.writeSheet(f,null,!1)}i&&i("Finalizing XLSX file..."),await s.finalize();let d=Ly.statSync(e).size/(1024*1024);i&&(i("XLSX file created successfully"),i(`  - Rows: ${o.toLocaleString()}`),i(`  - File size: ${d.toFixed(1)} MB`));let E={success:!0,message:`Successfully exported ${o} rows to ${e}`,details:{rows_exported:o,columns:a,file_size_mb:parseFloat(d.toFixed(1)),file_path:e}};if(n){i&&i("Copying file to clipboard...");let f=await Dy(e);E.details&&(E.details.clipboard_success=f)}return E}catch(s){return{success:!1,message:`Export failed: ${s instanceof Error?s.message:String(s)}`}}}async function pbe(t,e,n=!1,r){try{r&&r("Initializing XLSX writer...");let i=new P6(e),s=0,o=0,a=[];for(let d of t){let E=d.name||"Sheet";r&&r(`Processing sheet "${E}"...`);let f=d.columns.map(T=>T.name),p=d.columns.map(T=>fbe(T.type));o=Math.max(o,f.length);let h=d.rows.map(T=>T.map((S,I)=>p[I]?x6(S):S));i.addSheet(E),i.writeSheet(h,f,!0),s+=h.length,d.sql&&a.push({name:E,sql:d.sql})}if(a.length>0){i.addSheet("SQL Code");let d=[];a.forEach(E=>{d.push([`--- SQL for ${E.name} ---`]),E.sql.split(`
`).forEach(f=>{d.push([f])}),d.push([""])}),i.writeSheet(d,null,!1)}r&&r("Finalizing XLSX file..."),await i.finalize();let c=Ly.statSync(e).size/(1024*1024);r&&(r("XLSX file created successfully"),r(`  - Rows: ${s.toLocaleString()}`),r(`  - File size: ${c.toFixed(1)} MB`));let u={success:!0,message:`Successfully exported ${s} rows to ${e}`,details:{rows_exported:s,columns:o,file_size_mb:parseFloat(c.toFixed(1)),file_path:e}};if(n){r&&r("Copying file to clipboard...");let d=await Dy(e);u.details&&(u.details.clipboard_success=d)}return u}catch(i){return{success:!1,message:`Export failed: ${i instanceof Error?i.message:String(i)}`}}}async function Dy(t){return jS.platform()!=="win32"?(console.error("Clipboard file copy is only supported on Windows"),!1):new Promise(e=>{try{let n=wc.normalize(wc.resolve(t)),r=`Set-Clipboard -Path "${n.replace(/"/g,'`"')}"`,i=(0,D6.spawn)("powershell.exe",["-NoProfile","-NonInteractive","-Command",r]),s="";i.stderr.on("data",o=>{s+=o.toString()}),i.on("close",o=>{o!==0?(console.error(`PowerShell clipboard copy failed: ${s}`),e(!1)):(console.log(`File copied to clipboard: ${n}`),e(!0))}),i.on("error",o=>{console.error(`Error spawning PowerShell: ${o.message}`),e(!1)})}catch(n){let r=n instanceof Error?n.message:String(n);console.error(`Error copying file to clipboard: ${r}`),e(!1)}})}function Tbe(){let t=jS.tmpdir(),n=`netezza_export_${Date.now()}.xlsx`;return wc.join(t,n)}var Ly,wc,jS,D6,P6,dbe,xy=G(()=>{"use strict";Ly=z(require("fs")),wc=z(require("path")),jS=z(require("os")),D6=require("child_process"),P6=(L6(),Is(w6)).default,dbe=new Set(["INT8","INT2","INT4","NUMERIC","FLOAT4","FLOAT8","INTEGER","BIGINT","SMALLINT","DECIMAL","REAL","DOUBLE PRECISION"])});var H6={};ht(H6,{ClipboardDataProcessor:()=>KS,importClipboardDataToNetezza:()=>mbe});function Sbe(t){let e=String(t).trim();return e=e.replace(/[^0-9a-zA-Z]+/g,"_").toUpperCase(),(!e||/^\d/.test(e)||e.startsWith("_"))&&(e="COL"+(e.startsWith("_")?"":"_")+e),e}function Rbe(t,e,n){let r=String(t).trim();for(let i of n)r=r.split(i).join(`${e}${i}`);return r}function Abe(t,e,n,r,i){let s=Rbe(t,r,i);return e<n.length&&n[e].currentType.dbType==="DATETIME"&&(s=s.replace("T"," ")),s}async function mbe(t,e,n,r,i){let s=Date.now(),o=null,a=null;try{if(!t)return{success:!1,message:"Target table name is required"};if(!e||!e.host)return{success:!1,message:"Connection details are required"};i?.("Starting clipboard import process..."),i?.(`  Target table: ${t}`),i?.(`  Format preference: ${n||"auto-detect"}`);let l=new KS,[c,u]=await l.processClipboardData(n,i);if(!c||!c.length)return{success:!1,message:"No data found in clipboard"};if(c.length<2)return{success:!1,message:"Clipboard data must contain at least headers and one data row"};i?.(`  Detected format: ${u}`),i?.(`  Rows: ${c.length}`),i?.(`  Columns: ${c[0].length}`);let d=c[0].map(Q=>Sbe(Q)),E=c.slice(1);i?.("Detecting decimal separator...");let f=".",p=0,h=0,T=E.slice(0,100);for(let Q of T)for(let ie of Q){if(!ie||!ie.trim())continue;let fe=ie.trim();/^\d+\.\d+$/.test(fe)&&p++,/^\d+,\d+$/.test(fe)&&h++}h>p&&h>0&&(f=","),i?.(`Detected decimal separator: '${f}'`),i?.("Analyzing clipboard data types...");let S=d.map(()=>new yc(f));for(let Q=0;Q<E.length;Q++){let ie=E[Q];for(let fe=0;fe<ie.length;fe++)fe<S.length&&ie[fe]&&ie[fe].trim()&&S[fe].refreshCurrentType(ie[fe].trim());(Q+1)%1e3===0&&(i?.(`Analyzed ${(Q+1).toLocaleString()} rows...`,void 0,!1),await F6())}i?.(`Analysis complete: ${E.length.toLocaleString()} data rows`);let I=M6.join(require("os").tmpdir(),"netezza_clipboard_logs");JS.existsSync(I)||JS.mkdirSync(I,{recursive:!0});let R="	",m="\\t",A=`
`,N="\\n",g="\\",L=[g,A,"\r",R];i?.("Preparing in-memory data stream...");let y=new My(E,S,R,A,g,L,f,i);o=`virtual_clipboard_import_${Date.now()}_${Math.floor(Math.random()*1e3)}.txt`,i?.(`Registered virtual stream: ${o}`);let D=On();D&&D.registerImportStream?D.registerImportStream(o,y):i?.("Warning: NzConnection driver does not support stream registry. Import might fail.");let x=[];for(let Q=0;Q<d.length;Q++)x.push(`        ${d[Q]} ${S[Q].currentType.toString()}`);let B=I.replace(/\\/g,"/"),H=`CREATE TABLE ${t} AS 
(
    SELECT * FROM EXTERNAL '${o}'
    (
${x.join(`,
`)}
    )
    USING
    (
        REMOTESOURCE 'jdbc'
        DELIMITER '${m}'
        RecordDelim '${N}'
        ESCAPECHAR '${g}'
        NULLVALUE ''
        ENCODING 'utf-8'
        TIMESTYLE '24HOUR'
        SKIPROWS 0
        MAXERRORS 10
        LOGDIR '${B}'
    )
) DISTRIBUTE ON RANDOM;`;i?.("Generated SQL:"),i?.(H),i?.("Connecting to Netezza...");let X={host:e.host,port:e.port||5480,database:e.database,user:e.user,password:e.password},J=On();a=new J(X),await a.connect();try{i?.("Executing CREATE TABLE with EXTERNAL clipboard data...");let Q=a.createCommand(H);Q.commandTimeout=3600,await Q.execute(),i?.("Clipboard import completed successfully")}finally{await a.close()}let ee=(Date.now()-s)/1e3;return{success:!0,message:"Clipboard import completed successfully",details:{targetTable:t,format:u,rowsProcessed:E.length,rowsInserted:E.length,processingTime:`${ee.toFixed(1)}s`,columns:d.length,detectedDelimiter:R}}}catch(l){let c=(Date.now()-s)/1e3;return{success:!1,message:`Clipboard import failed: ${l instanceof Error?l.message:String(l)}`,details:{processingTime:`${c.toFixed(1)}s`}}}finally{if(a&&a._connected)try{await a.close()}catch{}if(o){let l=On();l&&l.unregisterImportStream&&l.unregisterImportStream(o)}}}var JS,M6,U6,B6,F6,KS,My,G6=G(()=>{"use strict";JS=z(require("fs")),M6=z(require("path")),U6=z(require("vscode")),B6=require("stream");vS();F6=()=>new Promise(t=>setTimeout(t,0)),KS=class{async processXmlSpreadsheet(e,n){n?.("Processing XML Spreadsheet data...");let r=[],i=0,s=[],o=0,a=e.match(/ExpandedColumnCount="(\d+)"/);a&&(i=parseInt(a[1]),n?.(`Table has ${i} columns`));let l=e.match(/ExpandedRowCount="(\d+)"/);l&&n?.(`Table has ${l[1]} rows`);let c=/<Row[^>]*>([\s\S]*?)<\/Row>/gi,u;for(;(u=c.exec(e))!==null;){let d=u[1];s=new Array(i).fill("");let E,f=0,p=/<Cell(?:[^>]*ss:Index="(\d+)")?[^>]*>(?:[\s\S]*?<Data[^>]*(?:\s+ss:Type="([^"]*)")?[^>]*>([^<]*)<\/Data>)?[\s\S]*?<\/Cell>/gi;for(;(E=p.exec(d))!==null;){E[1]&&(f=parseInt(E[1])-1);let h=E[2]||"",T=E[3]||"";h==="Boolean"&&(T=T==="0"?"False":"True"),f<i&&(s[f]=T),f++}s.some(h=>h.trim())&&r.push([...s]),o++,o%1e4===0&&(n?.(`Analyzed ${o.toLocaleString()} rows...`,void 0,!1),await F6())}return n?.(`XML processing complete: ${r.length} rows, ${i} columns`),r}async processTextData(e,n){if(n?.("Processing text data..."),!e.trim())return[];let r=e.split(`
`);for(;r.length&&!r[r.length-1].trim();)r.pop();if(!r.length)return[];let i=["	",",",";","|"],s={};for(let c of i){let u=[];for(let d of r.slice(0,Math.min(5,r.length)))if(d.trim()){let E=d.split(c);u.push(E.length)}if(u.length){let d=u.reduce((f,p)=>f+p,0)/u.length,E=u.reduce((f,p)=>f+Math.pow(p-d,2),0)/u.length;s[c]=[d,-E]}}let o="	";Object.keys(s).length&&(o=Object.keys(s).reduce((c,u)=>{let[d,E]=s[c]||[0,0],[f,p]=s[u];return f>d||f===d&&p>E?u:c},"	")),n?.(`Auto-detected delimiter: '${o==="	"?"\\t":o}'`);let a=[],l=0;for(let c of r)if(c.trim()){let u=c.split(o).map(d=>d.trim());a.push(u),l=Math.max(l,u.length)}for(let c of a)for(;c.length<l;)c.push("");return n?.(`Text processing complete: ${a.length} rows, ${l} columns`),a}async getClipboardText(){return await U6.env.clipboard.readText()}async processClipboardData(e,n){n?.("Getting clipboard data...");let r=await this.getClipboardText();if(!r)throw new Error("No data found in clipboard");n?.(`Data size: ${r.length} characters`);let i="TEXT";e==="XML Spreadsheet"||!e&&r.includes("<Workbook")&&r.includes("<Worksheet")?i="XML Spreadsheet":e==="TEXT"&&(i="TEXT"),n?.(`Detected format: ${i}`);let s;return i==="XML Spreadsheet"?s=await this.processXmlSpreadsheet(r,n):s=await this.processTextData(r,n),n?.(`Processed ${s.length} rows`),s.length&&n?.(`Columns per row: ${s[0].length}`),[s,i]}};My=class extends B6.Readable{constructor(n,r,i,s,o,a,l,c){super();this.currentIndex=0;this.byteLength=0;this.lastReportedIndex=-1;this.lastReportTime=0;this.lastReportedMessage="";this.rows=n,this.dataTypes=r,this.delimiter=i,this.recordDelim=s,this.escapechar=o,this.valuesToEscape=a,this.decimalDelimiter=l,this.progressCallback=c,this.currentIndex=0,this.lastReportedIndex=-1,this.lastReportTime=0,this.lastReportedMessage="";try{this.byteLength=n.reduce((u,d)=>{let E=d.reduce((f,p)=>f+(p?p.length:0),0);return u+E+d.length},0)}catch{this.byteLength=1024*1024}}_read(n){try{let r=!0;for(;r&&this.currentIndex<this.rows.length;){let a=this.rows[this.currentIndex].map((l,c)=>{let u=Abe(l,c,this.dataTypes,this.escapechar,this.valuesToEscape);if(this.dataTypes[c].currentType.dbType==="NUMERIC"&&this.decimalDelimiter===","&&(u=u.replace(",",".")),this.dataTypes[c].currentType.dbType==="DATETIME"){let d=u.match(/^(\d{1,2})\.(\d{1,2})\.(\d{4})(?:\s+(\d{1,2}):(\d{1,2})(?::(\d{1,2}))?)?$/);if(d){let E=d[1],f=d[2],p=d[3],h=d[4]||"00",T=d[5]||"00",S=d[6]||"00";u=`${p}-${f}-${E} ${h}:${T}:${S}`}}return u}).join(this.delimiter)+this.recordDelim;r=this.push(Buffer.from(a,"utf8")),this.currentIndex++}let i=this.rows.length;if(this.currentIndex>this.lastReportedIndex){let s=Date.now();if(this.currentIndex>=i||s-this.lastReportTime>=1e3){let c=`Streaming data: ${Math.floor(this.currentIndex/i*100)}% (${this.currentIndex.toLocaleString()}/${i.toLocaleString()})`,d=(this.currentIndex-(this.lastReportedIndex<0?0:this.lastReportedIndex))/i*100;c!==this.lastReportedMessage&&(this.progressCallback?.(c,d,!1),this.lastReportedIndex=this.currentIndex,this.lastReportTime=s,this.lastReportedMessage=c)}}this.currentIndex>=this.rows.length&&this.push(null)}catch(r){this.emit("error",r)}}}});var v,gbe,Ibe,_be,By,Nbe,Obe,Cbe,ybe,QS,bbe,vt=G(()=>{v=t=>t.flatMap(gbe),gbe=t=>QS(_be(t)).map(Ibe),Ibe=t=>t.replace(/ +/g," ").trim(),_be=t=>({type:"mandatory_block",items:By(t,0)[0]}),By=(t,e,n)=>{let r=[];for(;t[e];){let[i,s]=Nbe(t,e);if(r.push(i),e=s,t[e]==="|")e++;else if(t[e]==="}"||t[e]==="]"){if(n!==t[e])throw new Error(`Unbalanced parenthesis in: ${t}`);return e++,[r,e]}else if(e===t.length){if(n)throw new Error(`Unbalanced parenthesis in: ${t}`);return[r,e]}else throw new Error(`Unexpected "${t[e]}"`)}return[r,e]},Nbe=(t,e)=>{let n=[];for(;;){let[r,i]=Obe(t,e);if(r)n.push(r),e=i;else break}return n.length===1?[n[0],e]:[{type:"concatenation",items:n},e]},Obe=(t,e)=>{if(t[e]==="{")return Cbe(t,e+1);if(t[e]==="[")return ybe(t,e+1);{let n="";for(;t[e]&&/[A-Za-z0-9_ ]/.test(t[e]);)n+=t[e],e++;return[n,e]}},Cbe=(t,e)=>{let[n,r]=By(t,e,"}");return[{type:"mandatory_block",items:n},r]},ybe=(t,e)=>{let[n,r]=By(t,e,"]");return[{type:"optional_block",items:n},r]},QS=t=>{if(typeof t=="string")return[t];if(t.type==="concatenation")return t.items.map(QS).reduce(bbe,[""]);if(t.type==="mandatory_block")return t.items.flatMap(QS);if(t.type==="optional_block")return["",...t.items.flatMap(QS)];throw new Error(`Unknown node type: ${t}`)},bbe=(t,e)=>{let n=[];for(let r of t)for(let i of e)n.push(r+i);return n}});var k,Fy,Di,Lc,zr,ZS,V6,yr=G(()=>{(function(t){t.QUOTED_IDENTIFIER="QUOTED_IDENTIFIER",t.IDENTIFIER="IDENTIFIER",t.STRING="STRING",t.VARIABLE="VARIABLE",t.RESERVED_DATA_TYPE="RESERVED_DATA_TYPE",t.RESERVED_PARAMETERIZED_DATA_TYPE="RESERVED_PARAMETERIZED_DATA_TYPE",t.RESERVED_KEYWORD="RESERVED_KEYWORD",t.RESERVED_FUNCTION_NAME="RESERVED_FUNCTION_NAME",t.RESERVED_KEYWORD_PHRASE="RESERVED_KEYWORD_PHRASE",t.RESERVED_DATA_TYPE_PHRASE="RESERVED_DATA_TYPE_PHRASE",t.RESERVED_SET_OPERATION="RESERVED_SET_OPERATION",t.RESERVED_CLAUSE="RESERVED_CLAUSE",t.RESERVED_SELECT="RESERVED_SELECT",t.RESERVED_JOIN="RESERVED_JOIN",t.ARRAY_IDENTIFIER="ARRAY_IDENTIFIER",t.ARRAY_KEYWORD="ARRAY_KEYWORD",t.CASE="CASE",t.END="END",t.WHEN="WHEN",t.ELSE="ELSE",t.THEN="THEN",t.LIMIT="LIMIT",t.BETWEEN="BETWEEN",t.AND="AND",t.OR="OR",t.XOR="XOR",t.OPERATOR="OPERATOR",t.COMMA="COMMA",t.ASTERISK="ASTERISK",t.PROPERTY_ACCESS_OPERATOR="PROPERTY_ACCESS_OPERATOR",t.OPEN_PAREN="OPEN_PAREN",t.CLOSE_PAREN="CLOSE_PAREN",t.LINE_COMMENT="LINE_COMMENT",t.BLOCK_COMMENT="BLOCK_COMMENT",t.DISABLE_COMMENT="DISABLE_COMMENT",t.NUMBER="NUMBER",t.NAMED_PARAMETER="NAMED_PARAMETER",t.QUOTED_PARAMETER="QUOTED_PARAMETER",t.NUMBERED_PARAMETER="NUMBERED_PARAMETER",t.POSITIONAL_PARAMETER="POSITIONAL_PARAMETER",t.CUSTOM_PARAMETER="CUSTOM_PARAMETER",t.DELIMITER="DELIMITER",t.EOF="EOF"})(k=k||(k={}));Fy=t=>({type:k.EOF,raw:"\xABEOF\xBB",text:"\xABEOF\xBB",start:t}),Di=Fy(1/0),Lc=t=>e=>e.type===t.type&&e.text===t.text,zr={ARRAY:Lc({text:"ARRAY",type:k.RESERVED_DATA_TYPE}),BY:Lc({text:"BY",type:k.RESERVED_KEYWORD}),SET:Lc({text:"SET",type:k.RESERVED_CLAUSE}),STRUCT:Lc({text:"STRUCT",type:k.RESERVED_DATA_TYPE}),WINDOW:Lc({text:"WINDOW",type:k.RESERVED_CLAUSE}),VALUES:Lc({text:"VALUES",type:k.RESERVED_CLAUSE})},ZS=t=>t===k.RESERVED_DATA_TYPE||t===k.RESERVED_KEYWORD||t===k.RESERVED_FUNCTION_NAME||t===k.RESERVED_KEYWORD_PHRASE||t===k.RESERVED_DATA_TYPE_PHRASE||t===k.RESERVED_CLAUSE||t===k.RESERVED_SELECT||t===k.RESERVED_SET_OPERATION||t===k.RESERVED_JOIN||t===k.ARRAY_KEYWORD||t===k.CASE||t===k.END||t===k.WHEN||t===k.ELSE||t===k.THEN||t===k.LIMIT||t===k.BETWEEN||t===k.AND||t===k.OR||t===k.XOR,V6=t=>t===k.AND||t===k.OR||t===k.XOR});var q6,X6=G(()=>{q6=["KEYS.NEW_KEYSET","KEYS.ADD_KEY_FROM_RAW_BYTES","AEAD.DECRYPT_BYTES","AEAD.DECRYPT_STRING","AEAD.ENCRYPT","KEYS.KEYSET_CHAIN","KEYS.KEYSET_FROM_JSON","KEYS.KEYSET_TO_JSON","KEYS.ROTATE_KEYSET","KEYS.KEYSET_LENGTH","ANY_VALUE","ARRAY_AGG","AVG","CORR","COUNT","COUNTIF","COVAR_POP","COVAR_SAMP","MAX","MIN","ST_CLUSTERDBSCAN","STDDEV_POP","STDDEV_SAMP","STRING_AGG","SUM","VAR_POP","VAR_SAMP","ANY_VALUE","ARRAY_AGG","ARRAY_CONCAT_AGG","AVG","BIT_AND","BIT_OR","BIT_XOR","COUNT","COUNTIF","LOGICAL_AND","LOGICAL_OR","MAX","MIN","STRING_AGG","SUM","APPROX_COUNT_DISTINCT","APPROX_QUANTILES","APPROX_TOP_COUNT","APPROX_TOP_SUM","ARRAY_CONCAT","ARRAY_LENGTH","ARRAY_TO_STRING","GENERATE_ARRAY","GENERATE_DATE_ARRAY","GENERATE_TIMESTAMP_ARRAY","ARRAY_REVERSE","OFFSET","SAFE_OFFSET","ORDINAL","SAFE_ORDINAL","BIT_COUNT","PARSE_BIGNUMERIC","PARSE_NUMERIC","SAFE_CAST","CURRENT_DATE","EXTRACT","DATE","DATE_ADD","DATE_SUB","DATE_DIFF","DATE_TRUNC","DATE_FROM_UNIX_DATE","FORMAT_DATE","LAST_DAY","PARSE_DATE","UNIX_DATE","CURRENT_DATETIME","DATETIME","EXTRACT","DATETIME_ADD","DATETIME_SUB","DATETIME_DIFF","DATETIME_TRUNC","FORMAT_DATETIME","LAST_DAY","PARSE_DATETIME","ERROR","EXTERNAL_QUERY","S2_CELLIDFROMPOINT","S2_COVERINGCELLIDS","ST_ANGLE","ST_AREA","ST_ASBINARY","ST_ASGEOJSON","ST_ASTEXT","ST_AZIMUTH","ST_BOUNDARY","ST_BOUNDINGBOX","ST_BUFFER","ST_BUFFERWITHTOLERANCE","ST_CENTROID","ST_CENTROID_AGG","ST_CLOSESTPOINT","ST_CLUSTERDBSCAN","ST_CONTAINS","ST_CONVEXHULL","ST_COVEREDBY","ST_COVERS","ST_DIFFERENCE","ST_DIMENSION","ST_DISJOINT","ST_DISTANCE","ST_DUMP","ST_DWITHIN","ST_ENDPOINT","ST_EQUALS","ST_EXTENT","ST_EXTERIORRING","ST_GEOGFROM","ST_GEOGFROMGEOJSON","ST_GEOGFROMTEXT","ST_GEOGFROMWKB","ST_GEOGPOINT","ST_GEOGPOINTFROMGEOHASH","ST_GEOHASH","ST_GEOMETRYTYPE","ST_INTERIORRINGS","ST_INTERSECTION","ST_INTERSECTS","ST_INTERSECTSBOX","ST_ISCOLLECTION","ST_ISEMPTY","ST_LENGTH","ST_MAKELINE","ST_MAKEPOLYGON","ST_MAKEPOLYGONORIENTED","ST_MAXDISTANCE","ST_NPOINTS","ST_NUMGEOMETRIES","ST_NUMPOINTS","ST_PERIMETER","ST_POINTN","ST_SIMPLIFY","ST_SNAPTOGRID","ST_STARTPOINT","ST_TOUCHES","ST_UNION","ST_UNION_AGG","ST_WITHIN","ST_X","ST_Y","FARM_FINGERPRINT","MD5","SHA1","SHA256","SHA512","HLL_COUNT.INIT","HLL_COUNT.MERGE","HLL_COUNT.MERGE_PARTIAL","HLL_COUNT.EXTRACT","MAKE_INTERVAL","EXTRACT","JUSTIFY_DAYS","JUSTIFY_HOURS","JUSTIFY_INTERVAL","JSON_EXTRACT","JSON_QUERY","JSON_EXTRACT_SCALAR","JSON_VALUE","JSON_EXTRACT_ARRAY","JSON_QUERY_ARRAY","JSON_EXTRACT_STRING_ARRAY","JSON_VALUE_ARRAY","TO_JSON_STRING","ABS","SIGN","IS_INF","IS_NAN","IEEE_DIVIDE","RAND","SQRT","POW","POWER","EXP","LN","LOG","LOG10","GREATEST","LEAST","DIV","SAFE_DIVIDE","SAFE_MULTIPLY","SAFE_NEGATE","SAFE_ADD","SAFE_SUBTRACT","MOD","ROUND","TRUNC","CEIL","CEILING","FLOOR","COS","COSH","ACOS","ACOSH","SIN","SINH","ASIN","ASINH","TAN","TANH","ATAN","ATANH","ATAN2","RANGE_BUCKET","FIRST_VALUE","LAST_VALUE","NTH_VALUE","LEAD","LAG","PERCENTILE_CONT","PERCENTILE_DISC","NET.IP_FROM_STRING","NET.SAFE_IP_FROM_STRING","NET.IP_TO_STRING","NET.IP_NET_MASK","NET.IP_TRUNC","NET.IPV4_FROM_INT64","NET.IPV4_TO_INT64","NET.HOST","NET.PUBLIC_SUFFIX","NET.REG_DOMAIN","RANK","DENSE_RANK","PERCENT_RANK","CUME_DIST","NTILE","ROW_NUMBER","SESSION_USER","CORR","COVAR_POP","COVAR_SAMP","STDDEV_POP","STDDEV_SAMP","STDDEV","VAR_POP","VAR_SAMP","VARIANCE","ASCII","BYTE_LENGTH","CHAR_LENGTH","CHARACTER_LENGTH","CHR","CODE_POINTS_TO_BYTES","CODE_POINTS_TO_STRING","CONCAT","CONTAINS_SUBSTR","ENDS_WITH","FORMAT","FROM_BASE32","FROM_BASE64","FROM_HEX","INITCAP","INSTR","LEFT","LENGTH","LPAD","LOWER","LTRIM","NORMALIZE","NORMALIZE_AND_CASEFOLD","OCTET_LENGTH","REGEXP_CONTAINS","REGEXP_EXTRACT","REGEXP_EXTRACT_ALL","REGEXP_INSTR","REGEXP_REPLACE","REGEXP_SUBSTR","REPLACE","REPEAT","REVERSE","RIGHT","RPAD","RTRIM","SAFE_CONVERT_BYTES_TO_STRING","SOUNDEX","SPLIT","STARTS_WITH","STRPOS","SUBSTR","SUBSTRING","TO_BASE32","TO_BASE64","TO_CODE_POINTS","TO_HEX","TRANSLATE","TRIM","UNICODE","UPPER","CURRENT_TIME","TIME","EXTRACT","TIME_ADD","TIME_SUB","TIME_DIFF","TIME_TRUNC","FORMAT_TIME","PARSE_TIME","CURRENT_TIMESTAMP","EXTRACT","STRING","TIMESTAMP","TIMESTAMP_ADD","TIMESTAMP_SUB","TIMESTAMP_DIFF","TIMESTAMP_TRUNC","FORMAT_TIMESTAMP","PARSE_TIMESTAMP","TIMESTAMP_SECONDS","TIMESTAMP_MILLIS","TIMESTAMP_MICROS","UNIX_SECONDS","UNIX_MILLIS","UNIX_MICROS","GENERATE_UUID","COALESCE","IF","IFNULL","NULLIF","AVG","BIT_AND","BIT_OR","BIT_XOR","CORR","COUNT","COVAR_POP","COVAR_SAMP","EXACT_COUNT_DISTINCT","FIRST","GROUP_CONCAT","GROUP_CONCAT_UNQUOTED","LAST","MAX","MIN","NEST","NTH","QUANTILES","STDDEV","STDDEV_POP","STDDEV_SAMP","SUM","TOP","UNIQUE","VARIANCE","VAR_POP","VAR_SAMP","BIT_COUNT","BOOLEAN","BYTES","CAST","FLOAT","HEX_STRING","INTEGER","STRING","COALESCE","GREATEST","IFNULL","IS_INF","IS_NAN","IS_EXPLICITLY_DEFINED","LEAST","NVL","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","DATE","DATE_ADD","DATEDIFF","DAY","DAYOFWEEK","DAYOFYEAR","FORMAT_UTC_USEC","HOUR","MINUTE","MONTH","MSEC_TO_TIMESTAMP","NOW","PARSE_UTC_USEC","QUARTER","SEC_TO_TIMESTAMP","SECOND","STRFTIME_UTC_USEC","TIME","TIMESTAMP","TIMESTAMP_TO_MSEC","TIMESTAMP_TO_SEC","TIMESTAMP_TO_USEC","USEC_TO_TIMESTAMP","UTC_USEC_TO_DAY","UTC_USEC_TO_HOUR","UTC_USEC_TO_MONTH","UTC_USEC_TO_WEEK","UTC_USEC_TO_YEAR","WEEK","YEAR","FORMAT_IP","PARSE_IP","FORMAT_PACKED_IP","PARSE_PACKED_IP","JSON_EXTRACT","JSON_EXTRACT_SCALAR","ABS","ACOS","ACOSH","ASIN","ASINH","ATAN","ATANH","ATAN2","CEIL","COS","COSH","DEGREES","EXP","FLOOR","LN","LOG","LOG2","LOG10","PI","POW","RADIANS","RAND","ROUND","SIN","SINH","SQRT","TAN","TANH","REGEXP_MATCH","REGEXP_EXTRACT","REGEXP_REPLACE","CONCAT","INSTR","LEFT","LENGTH","LOWER","LPAD","LTRIM","REPLACE","RIGHT","RPAD","RTRIM","SPLIT","SUBSTR","UPPER","TABLE_DATE_RANGE","TABLE_DATE_RANGE_STRICT","TABLE_QUERY","HOST","DOMAIN","TLD","AVG","COUNT","MAX","MIN","STDDEV","SUM","CUME_DIST","DENSE_RANK","FIRST_VALUE","LAG","LAST_VALUE","LEAD","NTH_VALUE","NTILE","PERCENT_RANK","PERCENTILE_CONT","PERCENTILE_DISC","RANK","RATIO_TO_REPORT","ROW_NUMBER","CURRENT_USER","EVERY","FROM_BASE64","HASH","FARM_FINGERPRINT","IF","POSITION","SHA1","SOME","TO_BASE64","BQ.JOBS.CANCEL","BQ.REFRESH_MATERIALIZED_VIEW","OPTIONS","PIVOT","UNPIVOT"]});var z6,j6,K6=G(()=>{z6=["ALL","AND","ANY","AS","ASC","ASSERT_ROWS_MODIFIED","AT","BETWEEN","BY","CASE","CAST","COLLATE","CONTAINS","CREATE","CROSS","CUBE","CURRENT","DEFAULT","DEFINE","DESC","DISTINCT","ELSE","END","ENUM","ESCAPE","EXCEPT","EXCLUDE","EXISTS","EXTRACT","FALSE","FETCH","FOLLOWING","FOR","FROM","FULL","GROUP","GROUPING","GROUPS","HASH","HAVING","IF","IGNORE","IN","INNER","INTERSECT","INTO","IS","JOIN","LATERAL","LEFT","LIMIT","LOOKUP","MERGE","NATURAL","NEW","NO","NOT","NULL","NULLS","OF","ON","OR","ORDER","OUTER","OVER","PARTITION","PRECEDING","PROTO","RANGE","RECURSIVE","RESPECT","RIGHT","ROLLUP","ROWS","SELECT","SET","SOME","TABLE","TABLESAMPLE","THEN","TO","TREAT","TRUE","UNBOUNDED","UNION","UNNEST","USING","WHEN","WHERE","WINDOW","WITH","WITHIN","SAFE","LIKE","COPY","CLONE","IN","OUT","INOUT","RETURNS","LANGUAGE","CASCADE","RESTRICT","DETERMINISTIC"],j6=["ARRAY","BOOL","BYTES","DATE","DATETIME","GEOGRAPHY","INTERVAL","INT64","INT","SMALLINT","INTEGER","BIGINT","TINYINT","BYTEINT","NUMERIC","DECIMAL","BIGNUMERIC","BIGDECIMAL","FLOAT64","STRING","STRUCT","TIME","TIMEZONE"]});function Mbe(t){return Ube(Bbe(t))}function Ube(t){let e=Di;return t.map(n=>n.text==="OFFSET"&&e.text==="["?(e=n,Object.assign(Object.assign({},n),{type:k.RESERVED_FUNCTION_NAME})):(e=n,n))}function Bbe(t){var e;let n=[];for(let r=0;r<t.length;r++){let i=t[r];if((zr.ARRAY(i)||zr.STRUCT(i))&&((e=t[r+1])===null||e===void 0?void 0:e.text)==="<"){let s=Fbe(t,r+1),o=t.slice(r,s+1);n.push({type:k.IDENTIFIER,raw:o.map(Q6("raw")).join(""),text:o.map(Q6("text")).join(""),start:i.start}),r=s}else n.push(i)}return n}function Fbe(t,e){let n=0;for(let r=e;r<t.length;r++){let i=t[r];if(i.text==="<"?n++:i.text===">"?n--:i.text===">>"&&(n-=2),n===0)return r}return t.length-1}var wbe,Lbe,J6,Hy,Dbe,Pbe,xbe,vbe,eR,Q6,Gy=G(()=>{vt();yr();X6();K6();wbe=v(["SELECT [ALL | DISTINCT] [AS STRUCT | AS VALUE]"]),Lbe=v(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY","HAVING","QUALIFY","WINDOW","PARTITION BY","ORDER BY","LIMIT","OFFSET","OMIT RECORD IF","INSERT [INTO]","VALUES","SET","MERGE [INTO]","WHEN [NOT] MATCHED [BY SOURCE | BY TARGET] [THEN]","UPDATE SET","CLUSTER BY","FOR SYSTEM_TIME AS OF","WITH CONNECTION","WITH PARTITION COLUMNS","REMOTE WITH CONNECTION"]),J6=v(["CREATE [OR REPLACE] [TEMP|TEMPORARY|SNAPSHOT|EXTERNAL] TABLE [IF NOT EXISTS]"]),Hy=v(["CREATE [OR REPLACE] [MATERIALIZED] VIEW [IF NOT EXISTS]","UPDATE","DELETE [FROM]","DROP [SNAPSHOT | EXTERNAL] TABLE [IF EXISTS]","ALTER TABLE [IF EXISTS]","ADD COLUMN [IF NOT EXISTS]","DROP COLUMN [IF EXISTS]","RENAME TO","ALTER COLUMN [IF EXISTS]","SET DEFAULT COLLATE","SET OPTIONS","DROP NOT NULL","SET DATA TYPE","ALTER SCHEMA [IF EXISTS]","ALTER [MATERIALIZED] VIEW [IF EXISTS]","ALTER BI_CAPACITY","TRUNCATE TABLE","CREATE SCHEMA [IF NOT EXISTS]","DEFAULT COLLATE","CREATE [OR REPLACE] [TEMP|TEMPORARY|TABLE] FUNCTION [IF NOT EXISTS]","CREATE [OR REPLACE] PROCEDURE [IF NOT EXISTS]","CREATE [OR REPLACE] ROW ACCESS POLICY [IF NOT EXISTS]","GRANT TO","FILTER USING","CREATE CAPACITY","AS JSON","CREATE RESERVATION","CREATE ASSIGNMENT","CREATE SEARCH INDEX [IF NOT EXISTS]","DROP SCHEMA [IF EXISTS]","DROP [MATERIALIZED] VIEW [IF EXISTS]","DROP [TABLE] FUNCTION [IF EXISTS]","DROP PROCEDURE [IF EXISTS]","DROP ROW ACCESS POLICY","DROP ALL ROW ACCESS POLICIES","DROP CAPACITY [IF EXISTS]","DROP RESERVATION [IF EXISTS]","DROP ASSIGNMENT [IF EXISTS]","DROP SEARCH INDEX [IF EXISTS]","DROP [IF EXISTS]","GRANT","REVOKE","DECLARE","EXECUTE IMMEDIATE","LOOP","END LOOP","REPEAT","END REPEAT","WHILE","END WHILE","BREAK","LEAVE","CONTINUE","ITERATE","FOR","END FOR","BEGIN","BEGIN TRANSACTION","COMMIT TRANSACTION","ROLLBACK TRANSACTION","RAISE","RETURN","CALL","ASSERT","EXPORT DATA"]),Dbe=v(["UNION {ALL | DISTINCT}","EXCEPT DISTINCT","INTERSECT DISTINCT"]),Pbe=v(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN"]),xbe=v(["TABLESAMPLE SYSTEM","ANY TYPE","ALL COLUMNS","NOT DETERMINISTIC","{ROWS | RANGE} BETWEEN","IS [NOT] DISTINCT FROM"]),vbe=v([]),eR={name:"bigquery",tokenizerOptions:{reservedSelect:wbe,reservedClauses:[...Lbe,...Hy,...J6],reservedSetOperations:Dbe,reservedJoins:Pbe,reservedKeywordPhrases:xbe,reservedDataTypePhrases:vbe,reservedKeywords:z6,reservedDataTypes:j6,reservedFunctionNames:q6,extraParens:["[]"],stringTypes:[{quote:'""".."""',prefixes:["R","B","RB","BR"]},{quote:"'''..'''",prefixes:["R","B","RB","BR"]},'""-bs',"''-bs",{quote:'""-raw',prefixes:["R","B","RB","BR"],requirePrefix:!0},{quote:"''-raw",prefixes:["R","B","RB","BR"],requirePrefix:!0}],identTypes:["``"],identChars:{dashes:!0},paramTypes:{positional:!0,named:["@"],quoted:["@"]},variableTypes:[{regex:String.raw`@@\w+`}],lineCommentTypes:["--","#"],operators:["&","|","^","~",">>","<<","||","=>"],postProcess:Mbe},formatOptions:{onelineClauses:[...J6,...Hy],tabularOnelineClauses:Hy}};Q6=t=>e=>e.type===k.IDENTIFIER||e.type===k.COMMA?e[t]+" ":e[t]});var Z6,ej=G(()=>{Z6=["ARRAY_AGG","AVG","CORRELATION","COUNT","COUNT_BIG","COVARIANCE","COVARIANCE_SAMP","CUME_DIST","GROUPING","LISTAGG","MAX","MEDIAN","MIN","PERCENTILE_CONT","PERCENTILE_DISC","PERCENT_RANK","REGR_AVGX","REGR_AVGY","REGR_COUNT","REGR_INTERCEPT","REGR_ICPT","REGR_R2","REGR_SLOPE","REGR_SXX","REGR_SXY","REGR_SYY","STDDEV","STDDEV_SAMP","SUM","VARIANCE","VARIANCE_SAMP","XMLAGG","XMLGROUP","ABS","ABSVAL","ACOS","ADD_DAYS","ADD_HOURS","ADD_MINUTES","ADD_MONTHS","ADD_SECONDS","ADD_YEARS","AGE","ARRAY_DELETE","ARRAY_FIRST","ARRAY_LAST","ARRAY_NEXT","ARRAY_PRIOR","ASCII","ASCII_STR","ASIN","ATAN","ATAN2","ATANH","BITAND","BITANDNOT","BITOR","BITXOR","BITNOT","BPCHAR","BSON_TO_JSON","BTRIM","CARDINALITY","CEILING","CEIL","CHARACTER_LENGTH","CHR","COALESCE","COLLATION_KEY","COLLATION_KEY_BIT","COMPARE_DECFLOAT","CONCAT","COS","COSH","COT","CURSOR_ROWCOUNT","DATAPARTITIONNUM","DATE_PART","DATE_TRUNC","DAY","DAYNAME","DAYOFMONTH","DAYOFWEEK","DAYOFWEEK_ISO","DAYOFYEAR","DAYS","DAYS_BETWEEN","DAYS_TO_END_OF_MONTH","DBPARTITIONNUM","DECFLOAT","DECFLOAT_FORMAT","DECODE","DECRYPT_BIN","DECRYPT_CHAR","DEGREES","DEREF","DIFFERENCE","DIGITS","DOUBLE_PRECISION","EMPTY_BLOB","EMPTY_CLOB","EMPTY_DBCLOB","EMPTY_NCLOB","ENCRYPT","EVENT_MON_STATE","EXP","EXTRACT","FIRST_DAY","FLOOR","FROM_UTC_TIMESTAMP","GENERATE_UNIQUE","GETHINT","GREATEST","HASH","HASH4","HASH8","HASHEDVALUE","HEX","HEXTORAW","HOUR","HOURS_BETWEEN","IDENTITY_VAL_LOCAL","IFNULL","INITCAP","INSERT","INSTR","INSTR2","INSTR4","INSTRB","INTNAND","INTNOR","INTNXOR","INTNNOT","ISNULL","JSON_ARRAY","JSON_OBJECT","JSON_QUERY","JSON_TO_BSON","JSON_VALUE","JULIAN_DAY","LAST_DAY","LCASE","LEAST","LEFT","LENGTH","LENGTH2","LENGTH4","LENGTHB","LN","LOCATE","LOCATE_IN_STRING","LOG10","LONG_VARCHAR","LONG_VARGRAPHIC","LOWER","LPAD","LTRIM","MAX","MAX_CARDINALITY","MICROSECOND","MIDNIGHT_SECONDS","MIN","MINUTE","MINUTES_BETWEEN","MOD","MONTH","MONTHNAME","MONTHS_BETWEEN","MULTIPLY_ALT","NEXT_DAY","NEXT_MONTH","NEXT_QUARTER","NEXT_WEEK","NEXT_YEAR","NORMALIZE_DECFLOAT","NOW","NULLIF","NVL","NVL2","OCTET_LENGTH","OVERLAY","PARAMETER","POSITION","POSSTR","POW","POWER","QUANTIZE","QUARTER","QUOTE_IDENT","QUOTE_LITERAL","RADIANS","RAISE_ERROR","RAND","RANDOM","RAWTOHEX","REC2XML","REGEXP_COUNT","REGEXP_EXTRACT","REGEXP_INSTR","REGEXP_LIKE","REGEXP_MATCH_COUNT","REGEXP_REPLACE","REGEXP_SUBSTR","REPEAT","REPLACE","RID","RID_BIT","RIGHT","ROUND","ROUND_TIMESTAMP","RPAD","RTRIM","SECLABEL","SECLABEL_BY_NAME","SECLABEL_TO_CHAR","SECOND","SECONDS_BETWEEN","SIGN","SIN","SINH","SOUNDEX","SPACE","SQRT","STRIP","STRLEFT","STRPOS","STRRIGHT","SUBSTR","SUBSTR2","SUBSTR4","SUBSTRB","SUBSTRING","TABLE_NAME","TABLE_SCHEMA","TAN","TANH","THIS_MONTH","THIS_QUARTER","THIS_WEEK","THIS_YEAR","TIMESTAMP_FORMAT","TIMESTAMP_ISO","TIMESTAMPDIFF","TIMEZONE","TO_CHAR","TO_CLOB","TO_DATE","TO_HEX","TO_MULTI_BYTE","TO_NCHAR","TO_NCLOB","TO_NUMBER","TO_SINGLE_BYTE","TO_TIMESTAMP","TO_UTC_TIMESTAMP","TOTALORDER","TRANSLATE","TRIM","TRIM_ARRAY","TRUNC_TIMESTAMP","TRUNCATE","TRUNC","TYPE_ID","TYPE_NAME","TYPE_SCHEMA","UCASE","UNICODE_STR","UPPER","VALUE","VARCHAR_BIT_FORMAT","VARCHAR_FORMAT","VARCHAR_FORMAT_BIT","VERIFY_GROUP_FOR_USER","VERIFY_ROLE_FOR_USER","VERIFY_TRUSTED_CONTEXT_ROLE_FOR_USER","WEEK","WEEK_ISO","WEEKS_BETWEEN","WIDTH_BUCKET","XMLATTRIBUTES","XMLCOMMENT","XMLCONCAT","XMLDOCUMENT","XMLELEMENT","XMLFOREST","XMLNAMESPACES","XMLPARSE","XMLPI","XMLQUERY","XMLROW","XMLSERIALIZE","XMLTEXT","XMLVALIDATE","XMLXSROBJECTID","XSLTRANSFORM","YEAR","YEARS_BETWEEN","YMD_BETWEEN","BASE_TABLE","JSON_TABLE","UNNEST","XMLTABLE","RANK","DENSE_RANK","NTILE","LAG","LEAD","ROW_NUMBER","FIRST_VALUE","LAST_VALUE","NTH_VALUE","RATIO_TO_REPORT","CAST"]});var tj,nj,rj=G(()=>{tj=["ACTIVATE","ADD","AFTER","ALIAS","ALL","ALLOCATE","ALLOW","ALTER","AND","ANY","AS","ASENSITIVE","ASSOCIATE","ASUTIME","AT","ATTRIBUTES","AUDIT","AUTHORIZATION","AUX","AUXILIARY","BEFORE","BEGIN","BETWEEN","BINARY","BUFFERPOOL","BY","CACHE","CALL","CALLED","CAPTURE","CARDINALITY","CASCADED","CASE","CAST","CHECK","CLONE","CLOSE","CLUSTER","COLLECTION","COLLID","COLUMN","COMMENT","COMMIT","CONCAT","CONDITION","CONNECT","CONNECTION","CONSTRAINT","CONTAINS","CONTINUE","COUNT","COUNT_BIG","CREATE","CROSS","CURRENT","CURRENT_DATE","CURRENT_LC_CTYPE","CURRENT_PATH","CURRENT_SCHEMA","CURRENT_SERVER","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_TIMEZONE","CURRENT_USER","CURSOR","CYCLE","DATA","DATABASE","DATAPARTITIONNAME","DATAPARTITIONNUM","DAY","DAYS","DB2GENERAL","DB2GENRL","DB2SQL","DBINFO","DBPARTITIONNAME","DBPARTITIONNUM","DEALLOCATE","DECLARE","DEFAULT","DEFAULTS","DEFINITION","DELETE","DENSERANK","DENSE_RANK","DESCRIBE","DESCRIPTOR","DETERMINISTIC","DIAGNOSTICS","DISABLE","DISALLOW","DISCONNECT","DISTINCT","DO","DOCUMENT","DROP","DSSIZE","DYNAMIC","EACH","EDITPROC","ELSE","ELSEIF","ENABLE","ENCODING","ENCRYPTION","END","END-EXEC","ENDING","ERASE","ESCAPE","EVERY","EXCEPT","EXCEPTION","EXCLUDING","EXCLUSIVE","EXECUTE","EXISTS","EXIT","EXPLAIN","EXTENDED","EXTERNAL","EXTRACT","FENCED","FETCH","FIELDPROC","FILE","FINAL","FIRST1","FOR","FOREIGN","FREE","FROM","FULL","FUNCTION","GENERAL","GENERATED","GET","GLOBAL","GO","GOTO","GRANT","GRAPHIC","GROUP","HANDLER","HASH","HASHED_VALUE","HAVING","HINT","HOLD","HOUR","HOURS","IDENTITY","IF","IMMEDIATE","IMPORT","IN","INCLUDING","INCLUSIVE","INCREMENT","INDEX","INDICATOR","INDICATORS","INF","INFINITY","INHERIT","INNER","INOUT","INSENSITIVE","INSERT","INTEGRITY","INTERSECT","INTO","IS","ISNULL","ISOBID","ISOLATION","ITERATE","JAR","JAVA","JOIN","KEEP","KEY","LABEL","LANGUAGE","LAST3","LATERAL","LC_CTYPE","LEAVE","LEFT","LIKE","LIMIT","LINKTYPE","LOCAL","LOCALDATE","LOCALE","LOCALTIME","LOCALTIMESTAMP","LOCATOR","LOCATORS","LOCK","LOCKMAX","LOCKSIZE","LOOP","MAINTAINED","MATERIALIZED","MAXVALUE","MICROSECOND","MICROSECONDS","MINUTE","MINUTES","MINVALUE","MODE","MODIFIES","MONTH","MONTHS","NAN","NEW","NEW_TABLE","NEXTVAL","NO","NOCACHE","NOCYCLE","NODENAME","NODENUMBER","NOMAXVALUE","NOMINVALUE","NONE","NOORDER","NORMALIZED","NOT2","NOTNULL","NULL","NULLS","NUMPARTS","OBID","OF","OFF","OFFSET","OLD","OLD_TABLE","ON","OPEN","OPTIMIZATION","OPTIMIZE","OPTION","OR","ORDER","OUT","OUTER","OVER","OVERRIDING","PACKAGE","PADDED","PAGESIZE","PARAMETER","PART","PARTITION","PARTITIONED","PARTITIONING","PARTITIONS","PASSWORD","PATH","PERCENT","PIECESIZE","PLAN","POSITION","PRECISION","PREPARE","PREVVAL","PRIMARY","PRIQTY","PRIVILEGES","PROCEDURE","PROGRAM","PSID","PUBLIC","QUERY","QUERYNO","RANGE","RANK","READ","READS","RECOVERY","REFERENCES","REFERENCING","REFRESH","RELEASE","RENAME","REPEAT","RESET","RESIGNAL","RESTART","RESTRICT","RESULT","RESULT_SET_LOCATOR","RETURN","RETURNS","REVOKE","RIGHT","ROLE","ROLLBACK","ROUND_CEILING","ROUND_DOWN","ROUND_FLOOR","ROUND_HALF_DOWN","ROUND_HALF_EVEN","ROUND_HALF_UP","ROUND_UP","ROUTINE","ROW","ROWNUMBER","ROWS","ROWSET","ROW_NUMBER","RRN","RUN","SAVEPOINT","SCHEMA","SCRATCHPAD","SCROLL","SEARCH","SECOND","SECONDS","SECQTY","SECURITY","SELECT","SENSITIVE","SEQUENCE","SESSION","SESSION_USER","SET","SIGNAL","SIMPLE","SNAN","SOME","SOURCE","SPECIFIC","SQL","SQLID","STACKED","STANDARD","START","STARTING","STATEMENT","STATIC","STATMENT","STAY","STOGROUP","STORES","STYLE","SUBSTRING","SUMMARY","SYNONYM","SYSFUN","SYSIBM","SYSPROC","SYSTEM","SYSTEM_USER","TABLE","TABLESPACE","THEN","TO","TRANSACTION","TRIGGER","TRIM","TRUNCATE","TYPE","UNDO","UNION","UNIQUE","UNTIL","UPDATE","USAGE","USER","USING","VALIDPROC","VALUE","VALUES","VARIABLE","VARIANT","VCAT","VERSION","VIEW","VOLATILE","VOLUMES","WHEN","WHENEVER","WHERE","WHILE","WITH","WITHOUT","WLM","WRITE","XMLELEMENT","XMLEXISTS","XMLNAMESPACES","YEAR","YEARS"],nj=["ARRAY","BIGINT","BINARY","BLOB","BOOLEAN","CCSID","CHAR","CHARACTER","CLOB","DATE","DATETIME","DBCLOB","DEC","DECIMAL","DOUBLE","DOUBLE PRECISION","FLOAT","FLOAT4","FLOAT8","GRAPHIC","INT","INT2","INT4","INT8","INTEGER","INTERVAL","LONG VARCHAR","LONG VARGRAPHIC","NCHAR","NCHR","NCLOB","NVARCHAR","NUMERIC","SMALLINT","REAL","TIME","TIMESTAMP","VARBINARY","VARCHAR","VARGRAPHIC"]});var Hbe,Gbe,ij,Wy,Wbe,$be,kbe,Ybe,tR,$y=G(()=>{vt();ej();rj();Hbe=v(["SELECT [ALL | DISTINCT]"]),Gbe=v(["WITH","FROM","WHERE","GROUP BY","HAVING","PARTITION BY","ORDER BY [INPUT SEQUENCE]","LIMIT","OFFSET","FETCH NEXT","FOR UPDATE [OF]","FOR {READ | FETCH} ONLY","FOR {RR | CS | UR | RS} [USE AND KEEP {SHARE | UPDATE | EXCLUSIVE} LOCKS]","WAIT FOR OUTCOME","SKIP LOCKED DATA","INTO","INSERT INTO","VALUES","SET","MERGE INTO","WHEN [NOT] MATCHED [THEN]","UPDATE SET","INSERT"]),ij=v(["CREATE [GLOBAL TEMPORARY | EXTERNAL] TABLE [IF NOT EXISTS]"]),Wy=v(["CREATE [OR REPLACE] VIEW","UPDATE","WHERE CURRENT OF","WITH {RR | RS | CS | UR}","DELETE FROM","DROP TABLE [IF EXISTS]","ALTER TABLE","ADD [COLUMN]","DROP [COLUMN]","RENAME COLUMN","ALTER [COLUMN]","SET DATA TYPE","SET NOT NULL","DROP {DEFAULT | GENERATED | NOT NULL}","TRUNCATE [TABLE]","ALLOCATE","ALTER AUDIT POLICY","ALTER BUFFERPOOL","ALTER DATABASE PARTITION GROUP","ALTER DATABASE","ALTER EVENT MONITOR","ALTER FUNCTION","ALTER HISTOGRAM TEMPLATE","ALTER INDEX","ALTER MASK","ALTER METHOD","ALTER MODULE","ALTER NICKNAME","ALTER PACKAGE","ALTER PERMISSION","ALTER PROCEDURE","ALTER SCHEMA","ALTER SECURITY LABEL COMPONENT","ALTER SECURITY POLICY","ALTER SEQUENCE","ALTER SERVER","ALTER SERVICE CLASS","ALTER STOGROUP","ALTER TABLESPACE","ALTER THRESHOLD","ALTER TRIGGER","ALTER TRUSTED CONTEXT","ALTER TYPE","ALTER USAGE LIST","ALTER USER MAPPING","ALTER VIEW","ALTER WORK ACTION SET","ALTER WORK CLASS SET","ALTER WORKLOAD","ALTER WRAPPER","ALTER XSROBJECT","ALTER STOGROUP","ALTER TABLESPACE","ALTER TRIGGER","ALTER TRUSTED CONTEXT","ALTER VIEW","ASSOCIATE [RESULT SET] {LOCATOR | LOCATORS}","AUDIT","BEGIN DECLARE SECTION","CALL","CLOSE","COMMENT ON","COMMIT [WORK]","CONNECT","CREATE [OR REPLACE] [PUBLIC] ALIAS","CREATE AUDIT POLICY","CREATE BUFFERPOOL","CREATE DATABASE PARTITION GROUP","CREATE EVENT MONITOR","CREATE [OR REPLACE] FUNCTION","CREATE FUNCTION MAPPING","CREATE HISTOGRAM TEMPLATE","CREATE [UNIQUE] INDEX","CREATE INDEX EXTENSION","CREATE [OR REPLACE] MASK","CREATE [SPECIFIC] METHOD","CREATE [OR REPLACE] MODULE","CREATE [OR REPLACE] NICKNAME","CREATE [OR REPLACE] PERMISSION","CREATE [OR REPLACE] PROCEDURE","CREATE ROLE","CREATE SCHEMA","CREATE SECURITY LABEL [COMPONENT]","CREATE SECURITY POLICY","CREATE [OR REPLACE] SEQUENCE","CREATE SERVICE CLASS","CREATE SERVER","CREATE STOGROUP","CREATE SYNONYM","CREATE [LARGE | REGULAR | {SYSTEM | USER} TEMPORARY] TABLESPACE","CREATE THRESHOLD","CREATE {TRANSFORM | TRANSFORMS} FOR","CREATE [OR REPLACE] TRIGGER","CREATE TRUSTED CONTEXT","CREATE [OR REPLACE] TYPE","CREATE TYPE MAPPING","CREATE USAGE LIST","CREATE USER MAPPING FOR","CREATE [OR REPLACE] VARIABLE","CREATE WORK ACTION SET","CREATE WORK CLASS SET","CREATE WORKLOAD","CREATE WRAPPER","DECLARE","DECLARE GLOBAL TEMPORARY TABLE","DESCRIBE [INPUT | OUTPUT]","DISCONNECT","DROP [PUBLIC] ALIAS","DROP AUDIT POLICY","DROP BUFFERPOOL","DROP DATABASE PARTITION GROUP","DROP EVENT MONITOR","DROP [SPECIFIC] FUNCTION","DROP FUNCTION MAPPING","DROP HISTOGRAM TEMPLATE","DROP INDEX [EXTENSION]","DROP MASK","DROP [SPECIFIC] METHOD","DROP MODULE","DROP NICKNAME","DROP PACKAGE","DROP PERMISSION","DROP [SPECIFIC] PROCEDURE","DROP ROLE","DROP SCHEMA","DROP SECURITY LABEL [COMPONENT]","DROP SECURITY POLICY","DROP SEQUENCE","DROP SERVER","DROP SERVICE CLASS","DROP STOGROUP","DROP TABLE HIERARCHY","DROP {TABLESPACE | TABLESPACES}","DROP {TRANSFORM | TRANSFORMS}","DROP THRESHOLD","DROP TRIGGER","DROP TRUSTED CONTEXT","DROP TYPE [MAPPING]","DROP USAGE LIST","DROP USER MAPPING FOR","DROP VARIABLE","DROP VIEW [HIERARCHY]","DROP WORK {ACTION | CLASS} SET","DROP WORKLOAD","DROP WRAPPER","DROP XSROBJECT","END DECLARE SECTION","EXECUTE [IMMEDIATE]","EXPLAIN {PLAN [SECTION] | ALL}","FETCH [FROM]","FLUSH {BUFFERPOOL | BUFFERPOOLS} ALL","FLUSH EVENT MONITOR","FLUSH FEDERATED CACHE","FLUSH OPTIMIZATION PROFILE CACHE","FLUSH PACKAGE CACHE [DYNAMIC]","FLUSH AUTHENTICATION CACHE [FOR ALL]","FREE LOCATOR","GET DIAGNOSTICS","GOTO","GRANT","INCLUDE","ITERATE","LEAVE","LOCK TABLE","LOOP","OPEN","PIPE","PREPARE","REFRESH TABLE","RELEASE","RELEASE [TO] SAVEPOINT","RENAME [TABLE | INDEX | STOGROUP | TABLESPACE]","REPEAT","RESIGNAL","RETURN","REVOKE","ROLLBACK [WORK] [TO SAVEPOINT]","SAVEPOINT","SET COMPILATION ENVIRONMENT","SET CONNECTION","SET CURRENT","SET ENCRYPTION PASSWORD","SET EVENT MONITOR STATE","SET INTEGRITY","SET PASSTHRU","SET PATH","SET ROLE","SET SCHEMA","SET SERVER OPTION","SET {SESSION AUTHORIZATION | SESSION_USER}","SET USAGE LIST","SIGNAL","TRANSFER OWNERSHIP OF","WHENEVER {NOT FOUND | SQLERROR | SQLWARNING}","WHILE"]),Wbe=v(["UNION [ALL]","EXCEPT [ALL]","INTERSECT [ALL]"]),$be=v(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN"]),kbe=v(["ON DELETE","ON UPDATE","SET NULL","{ROWS | RANGE} BETWEEN"]),Ybe=v([]),tR={name:"db2",tokenizerOptions:{reservedSelect:Hbe,reservedClauses:[...Gbe,...ij,...Wy],reservedSetOperations:Wbe,reservedJoins:$be,reservedKeywordPhrases:kbe,reservedDataTypePhrases:Ybe,reservedKeywords:tj,reservedDataTypes:nj,reservedFunctionNames:Z6,extraParens:["[]"],stringTypes:[{quote:"''-qq",prefixes:["G","N","U&"]},{quote:"''-raw",prefixes:["X","BX","GX","UX"],requirePrefix:!0}],identTypes:['""-qq'],identChars:{first:"@#$",rest:"@#$"},paramTypes:{positional:!0,named:[":"]},paramChars:{first:"@#$",rest:"@#$"},operators:["**","%","|","&","^","~","\xAC=","\xAC>","\xAC<","!>","!<","^=","^>","^<","||","->","=>"]},formatOptions:{onelineClauses:[...ij,...Wy],tabularOnelineClauses:Wy}}});var sj,oj=G(()=>{sj=["ARRAY_AGG","AVG","CORR","CORRELATION","COUNT","COUNT_BIG","COVAR_POP","COVARIANCE","COVAR","COVAR_SAMP","COVARIANCE_SAMP","EVERY","GROUPING","JSON_ARRAYAGG","JSON_OBJECTAGG","LISTAGG","MAX","MEDIAN","MIN","PERCENTILE_CONT","PERCENTILE_DISC","REGR_AVGX","REGR_AVGY","REGR_COUNT","REGR_INTERCEPT","REGR_R2","REGR_SLOPE","REGR_SXX","REGR_SXY","REGR_SYY","SOME","STDDEV_POP","STDDEV","STDDEV_SAMP","SUM","VAR_POP","VARIANCE","VAR","VAR_SAMP","VARIANCE_SAMP","XMLAGG","XMLGROUP","ABS","ABSVAL","ACOS","ADD_DAYS","ADD_HOURS","ADD_MINUTES","ADD_MONTHS","ADD_SECONDS","ADD_YEARS","ANTILOG","ARRAY_MAX_CARDINALITY","ARRAY_TRIM","ASCII","ASIN","ATAN","ATAN2","ATANH","BASE64_DECODE","BASE64_ENCODE","BIT_LENGTH","BITAND","BITANDNOT","BITNOT","BITOR","BITXOR","BSON_TO_JSON","CARDINALITY","CEIL","CEILING","CHAR_LENGTH","CHARACTER_LENGTH","CHR","COALESCE","COMPARE_DECFLOAT","CONCAT","CONTAINS","COS","COSH","COT","CURDATE","CURTIME","DATABASE","DATAPARTITIONNAME","DATAPARTITIONNUM","DAY","DAYNAME","DAYOFMONTH","DAYOFWEEK_ISO","DAYOFWEEK","DAYOFYEAR","DAYS","DBPARTITIONNAME","DBPARTITIONNUM","DECFLOAT_FORMAT","DECFLOAT_SORTKEY","DECRYPT_BINARY","DECRYPT_BIT","DECRYPT_CHAR","DECRYPT_DB","DEGREES","DIFFERENCE","DIGITS","DLCOMMENT","DLLINKTYPE","DLURLCOMPLETE","DLURLPATH","DLURLPATHONLY","DLURLSCHEME","DLURLSERVER","DLVALUE","DOUBLE_PRECISION","DOUBLE","ENCRPYT","ENCRYPT_AES","ENCRYPT_AES256","ENCRYPT_RC2","ENCRYPT_TDES","EXP","EXTRACT","FIRST_DAY","FLOOR","GENERATE_UNIQUE","GET_BLOB_FROM_FILE","GET_CLOB_FROM_FILE","GET_DBCLOB_FROM_FILE","GET_XML_FILE","GETHINT","GREATEST","HASH_MD5","HASH_ROW","HASH_SHA1","HASH_SHA256","HASH_SHA512","HASH_VALUES","HASHED_VALUE","HEX","HEXTORAW","HOUR","HTML_ENTITY_DECODE","HTML_ENTITY_ENCODE","HTTP_DELETE_BLOB","HTTP_DELETE","HTTP_GET_BLOB","HTTP_GET","HTTP_PATCH_BLOB","HTTP_PATCH","HTTP_POST_BLOB","HTTP_POST","HTTP_PUT_BLOB","HTTP_PUT","IDENTITY_VAL_LOCAL","IFNULL","INSERT","INSTR","INTERPRET","ISFALSE","ISNOTFALSE","ISNOTTRUE","ISTRUE","JSON_ARRAY","JSON_OBJECT","JSON_QUERY","JSON_TO_BSON","JSON_UPDATE","JSON_VALUE","JULIAN_DAY","LAND","LAST_DAY","LCASE","LEAST","LEFT","LENGTH","LN","LNOT","LOCATE_IN_STRING","LOCATE","LOG10","LOR","LOWER","LPAD","LTRIM","MAX_CARDINALITY","MAX","MICROSECOND","MIDNIGHT_SECONDS","MIN","MINUTE","MOD","MONTH","MONTHNAME","MONTHS_BETWEEN","MQREAD","MQREADCLOB","MQRECEIVE","MQRECEIVECLOB","MQSEND","MULTIPLY_ALT","NEXT_DAY","NORMALIZE_DECFLOAT","NOW","NULLIF","NVL","OCTET_LENGTH","OVERLAY","PI","POSITION","POSSTR","POW","POWER","QUANTIZE","QUARTER","RADIANS","RAISE_ERROR","RANDOM","RAND","REGEXP_COUNT","REGEXP_INSTR","REGEXP_REPLACE","REGEXP_SUBSTR","REPEAT","REPLACE","RID","RIGHT","ROUND_TIMESTAMP","ROUND","RPAD","RRN","RTRIM","SCORE","SECOND","SIGN","SIN","SINH","SOUNDEX","SPACE","SQRT","STRIP","STRLEFT","STRPOS","STRRIGHT","SUBSTR","SUBSTRING","TABLE_NAME","TABLE_SCHEMA","TAN","TANH","TIMESTAMP_FORMAT","TIMESTAMP_ISO","TIMESTAMPDIFF_BIG","TIMESTAMPDIFF","TO_CHAR","TO_CLOB","TO_DATE","TO_NUMBER","TO_TIMESTAMP","TOTALORDER","TRANSLATE","TRIM_ARRAY","TRIM","TRUNC_TIMESTAMP","TRUNC","TRUNCATE","UCASE","UPPER","URL_DECODE","URL_ENCODE","VALUE","VARBINARY_FORMAT","VARCHAR_BIT_FORMAT","VARCHAR_FORMAT_BINARY","VARCHAR_FORMAT","VERIFY_GROUP_FOR_USER","WEEK_ISO","WEEK","WRAP","XMLATTRIBUTES","XMLCOMMENT","XMLCONCAT","XMLDOCUMENT","XMLELEMENT","XMLFOREST","XMLNAMESPACES","XMLPARSE","XMLPI","XMLROW","XMLSERIALIZE","XMLTEXT","XMLVALIDATE","XOR","XSLTRANSFORM","YEAR","ZONED","BASE_TABLE","HTTP_DELETE_BLOB_VERBOSE","HTTP_DELETE_VERBOSE","HTTP_GET_BLOB_VERBOSE","HTTP_GET_VERBOSE","HTTP_PATCH_BLOB_VERBOSE","HTTP_PATCH_VERBOSE","HTTP_POST_BLOB_VERBOSE","HTTP_POST_VERBOSE","HTTP_PUT_BLOB_VERBOSE","HTTP_PUT_VERBOSE","JSON_TABLE","MQREADALL","MQREADALLCLOB","MQRECEIVEALL","MQRECEIVEALLCLOB","XMLTABLE","UNPACK","CUME_DIST","DENSE_RANK","FIRST_VALUE","LAG","LAST_VALUE","LEAD","NTH_VALUE","NTILE","PERCENT_RANK","RANK","RATIO_TO_REPORT","ROW_NUMBER","CAST"]});var aj,lj,cj=G(()=>{aj=["ABSENT","ACCORDING","ACCTNG","ACTION","ACTIVATE","ADD","ALIAS","ALL","ALLOCATE","ALLOW","ALTER","AND","ANY","APPEND","APPLNAME","ARRAY","ARRAY_AGG","ARRAY_TRIM","AS","ASC","ASENSITIVE","ASSOCIATE","ATOMIC","ATTACH","ATTRIBUTES","AUTHORIZATION","AUTONOMOUS","BEFORE","BEGIN","BETWEEN","BIND","BSON","BUFFERPOOL","BY","CACHE","CALL","CALLED","CARDINALITY","CASE","CAST","CHECK","CL","CLOSE","CLUSTER","COLLECT","COLLECTION","COLUMN","COMMENT","COMMIT","COMPACT","COMPARISONS","COMPRESS","CONCAT","CONCURRENT","CONDITION","CONNECT","CONNECT_BY_ROOT","CONNECTION","CONSTANT","CONSTRAINT","CONTAINS","CONTENT","CONTINUE","COPY","COUNT","COUNT_BIG","CREATE","CREATEIN","CROSS","CUBE","CUME_DIST","CURRENT","CURRENT_DATE","CURRENT_PATH","CURRENT_SCHEMA","CURRENT_SERVER","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_TIMEZONE","CURRENT_USER","CURSOR","CYCLE","DATABASE","DATAPARTITIONNAME","DATAPARTITIONNUM","DAY","DAYS","DB2GENERAL","DB2GENRL","DB2SQL","DBINFO","DBPARTITIONNAME","DBPARTITIONNUM","DEACTIVATE","DEALLOCATE","DECLARE","DEFAULT","DEFAULTS","DEFER","DEFINE","DEFINITION","DELETE","DELETING","DENSE_RANK","DENSERANK","DESC","DESCRIBE","DESCRIPTOR","DETACH","DETERMINISTIC","DIAGNOSTICS","DISABLE","DISALLOW","DISCONNECT","DISTINCT","DO","DOCUMENT","DROP","DYNAMIC","EACH","ELSE","ELSEIF","EMPTY","ENABLE","ENCODING","ENCRYPTION","END","END-EXEC","ENDING","ENFORCED","ERROR","ESCAPE","EVERY","EXCEPT","EXCEPTION","EXCLUDING","EXCLUSIVE","EXECUTE","EXISTS","EXIT","EXTEND","EXTERNAL","EXTRACT","FALSE","FENCED","FETCH","FIELDPROC","FILE","FINAL","FIRST_VALUE","FOR","FOREIGN","FORMAT","FREE","FREEPAGE","FROM","FULL","FUNCTION","GBPCACHE","GENERAL","GENERATED","GET","GLOBAL","GO","GOTO","GRANT","GROUP","HANDLER","HASH","HASH_ROW","HASHED_VALUE","HAVING","HINT","HOLD","HOUR","HOURS","IDENTITY","IF","IGNORE","IMMEDIATE","IMPLICITLY","IN","INCLUDE","INCLUDING","INCLUSIVE","INCREMENT","INDEX","INDEXBP","INDICATOR","INF","INFINITY","INHERIT","INLINE","INNER","INOUT","INSENSITIVE","INSERT","INSERTING","INTEGRITY","INTERPRET","INTERSECT","INTO","IS","ISNULL","ISOLATION","ITERATE","JAVA","JOIN","JSON","JSON_ARRAY","JSON_ARRAYAGG","JSON_EXISTS","JSON_OBJECT","JSON_OBJECTAGG","JSON_QUERY","JSON_TABLE","JSON_VALUE","KEEP","KEY","KEYS","LABEL","LAG","LANGUAGE","LAST_VALUE","LATERAL","LEAD","LEAVE","LEFT","LEVEL2","LIKE","LIMIT","LINKTYPE","LISTAGG","LOCAL","LOCALDATE","LOCALTIME","LOCALTIMESTAMP","LOCATION","LOCATOR","LOCK","LOCKSIZE","LOG","LOGGED","LOOP","MAINTAINED","MASK","MATCHED","MATERIALIZED","MAXVALUE","MERGE","MICROSECOND","MICROSECONDS","MINPCTUSED","MINUTE","MINUTES","MINVALUE","MIRROR","MIXED","MODE","MODIFIES","MONTH","MONTHS","NAMESPACE","NAN","NATIONAL","NCHAR","NCLOB","NESTED","NEW","NEW_TABLE","NEXTVAL","NO","NOCACHE","NOCYCLE","NODENAME","NODENUMBER","NOMAXVALUE","NOMINVALUE","NONE","NOORDER","NORMALIZED","NOT","NOTNULL","NTH_VALUE","NTILE","NULL","NULLS","NVARCHAR","OBID","OBJECT","OF","OFF","OFFSET","OLD","OLD_TABLE","OMIT","ON","ONLY","OPEN","OPTIMIZE","OPTION","OR","ORDER","ORDINALITY","ORGANIZE","OUT","OUTER","OVER","OVERLAY","OVERRIDING","PACKAGE","PADDED","PAGE","PAGESIZE","PARAMETER","PART","PARTITION","PARTITIONED","PARTITIONING","PARTITIONS","PASSING","PASSWORD","PATH","PCTFREE","PERCENT_RANK","PERCENTILE_CONT","PERCENTILE_DISC","PERIOD","PERMISSION","PIECESIZE","PIPE","PLAN","POSITION","PREPARE","PREVVAL","PRIMARY","PRIOR","PRIQTY","PRIVILEGES","PROCEDURE","PROGRAM","PROGRAMID","QUERY","RANGE","RANK","RATIO_TO_REPORT","RCDFMT","READ","READS","RECOVERY","REFERENCES","REFERENCING","REFRESH","REGEXP_LIKE","RELEASE","RENAME","REPEAT","RESET","RESIGNAL","RESTART","RESULT","RESULT_SET_LOCATOR","RETURN","RETURNING","RETURNS","REVOKE","RID","RIGHT","ROLLBACK","ROLLUP","ROUTINE","ROW","ROW_NUMBER","ROWNUMBER","ROWS","RRN","RUN","SAVEPOINT","SBCS","SCALAR","SCHEMA","SCRATCHPAD","SCROLL","SEARCH","SECOND","SECONDS","SECQTY","SECURED","SELECT","SENSITIVE","SEQUENCE","SESSION","SESSION_USER","SET","SIGNAL","SIMPLE","SKIP","SNAN","SOME","SOURCE","SPECIFIC","SQL","SQLID","SQLIND_DEFAULT","SQLIND_UNASSIGNED","STACKED","START","STARTING","STATEMENT","STATIC","STOGROUP","SUBSTRING","SUMMARY","SYNONYM","SYSTEM_TIME","SYSTEM_USER","TABLE","TABLESPACE","TABLESPACES","TAG","THEN","THREADSAFE","TO","TRANSACTION","TRANSFER","TRIGGER","TRIM","TRIM_ARRAY","TRUE","TRUNCATE","TRY_CAST","TYPE","UNDO","UNION","UNIQUE","UNIT","UNKNOWN","UNNEST","UNTIL","UPDATE","UPDATING","URI","USAGE","USE","USER","USERID","USING","VALUE","VALUES","VARIABLE","VARIANT","VCAT","VERSION","VERSIONING","VIEW","VOLATILE","WAIT","WHEN","WHENEVER","WHERE","WHILE","WITH","WITHIN","WITHOUT","WRAPPED","WRAPPER","WRITE","WRKSTNNAME","XMLAGG","XMLATTRIBUTES","XMLCAST","XMLCOMMENT","XMLCONCAT","XMLDOCUMENT","XMLELEMENT","XMLFOREST","XMLGROUP","XMLNAMESPACES","XMLPARSE","XMLPI","XMLROW","XMLSERIALIZE","XMLTABLE","XMLTEXT","XMLVALIDATE","XSLTRANSFORM","XSROBJECT","YEAR","YEARS","YES","ZONE"],lj=["ARRAY","BIGINT","BINARY","BIT","BLOB","BOOLEAN","CCSID","CHAR","CHARACTER","CLOB","DATA","DATALINK","DATE","DBCLOB","DECFLOAT","DECIMAL","DEC","DOUBLE","DOUBLE PRECISION","FLOAT","GRAPHIC","INT","INTEGER","LONG","NUMERIC","REAL","ROWID","SMALLINT","TIME","TIMESTAMP","VARBINARY","VARCHAR","VARGRAPHIC","XML"]});var Vbe,qbe,uj,ky,Xbe,zbe,jbe,Kbe,nR,Yy=G(()=>{vt();oj();cj();Vbe=v(["SELECT [ALL | DISTINCT]"]),qbe=v(["WITH [RECURSIVE]","INTO","FROM","WHERE","GROUP BY","HAVING","PARTITION BY","ORDER [SIBLINGS] BY [INPUT SEQUENCE]","LIMIT","OFFSET","FETCH {FIRST | NEXT}","FOR UPDATE [OF]","FOR READ ONLY","OPTIMIZE FOR","INSERT INTO","VALUES","SET","MERGE INTO","WHEN [NOT] MATCHED [THEN]","UPDATE SET","DELETE","INSERT","FOR SYSTEM NAME"]),uj=v(["CREATE [OR REPLACE] TABLE"]),ky=v(["CREATE [OR REPLACE] [RECURSIVE] VIEW","UPDATE","WHERE CURRENT OF","WITH {NC | RR | RS | CS | UR}","DELETE FROM","DROP TABLE","ALTER TABLE","ADD [COLUMN]","ALTER [COLUMN]","DROP [COLUMN]","SET DATA TYPE","SET {GENERATED ALWAYS | GENERATED BY DEFAULT}","SET NOT NULL","SET {NOT HIDDEN | IMPLICITLY HIDDEN}","SET FIELDPROC","DROP {DEFAULT | NOT NULL | GENERATED | IDENTITY | ROW CHANGE TIMESTAMP | FIELDPROC}","TRUNCATE [TABLE]","SET [CURRENT] SCHEMA","SET CURRENT_SCHEMA","ALLOCATE CURSOR","ALLOCATE [SQL] DESCRIPTOR [LOCAL | GLOBAL] SQL","ALTER [SPECIFIC] {FUNCTION | PROCEDURE}","ALTER {MASK | PERMISSION | SEQUENCE | TRIGGER}","ASSOCIATE [RESULT SET] {LOCATOR | LOCATORS}","BEGIN DECLARE SECTION","CALL","CLOSE","COMMENT ON {ALIAS | COLUMN | CONSTRAINT | INDEX | MASK | PACKAGE | PARAMETER | PERMISSION | SEQUENCE | TABLE | TRIGGER | VARIABLE | XSROBJECT}","COMMENT ON [SPECIFIC] {FUNCTION | PROCEDURE | ROUTINE}","COMMENT ON PARAMETER SPECIFIC {FUNCTION | PROCEDURE | ROUTINE}","COMMENT ON [TABLE FUNCTION] RETURN COLUMN","COMMENT ON [TABLE FUNCTION] RETURN COLUMN SPECIFIC [PROCEDURE | ROUTINE]","COMMIT [WORK] [HOLD]","CONNECT [TO | RESET] USER","CREATE [OR REPLACE] {ALIAS | FUNCTION | MASK | PERMISSION | PROCEDURE | SEQUENCE | TRIGGER | VARIABLE}","CREATE [ENCODED VECTOR] INDEX","CREATE UNIQUE [WHERE NOT NULL] INDEX","CREATE SCHEMA","CREATE TYPE","DEALLOCATE [SQL] DESCRIPTOR [LOCAL | GLOBAL]","DECLARE CURSOR","DECLARE GLOBAL TEMPORARY TABLE","DECLARE","DESCRIBE CURSOR","DESCRIBE INPUT","DESCRIBE [OUTPUT]","DESCRIBE {PROCEDURE | ROUTINE}","DESCRIBE TABLE","DISCONNECT ALL [SQL]","DISCONNECT [CURRENT]","DROP {ALIAS | INDEX | MASK | PACKAGE | PERMISSION | SCHEMA | SEQUENCE | TABLE | TYPE | VARIABLE | XSROBJECT} [IF EXISTS]","DROP [SPECIFIC] {FUNCTION | PROCEDURE | ROUTINE} [IF EXISTS]","END DECLARE SECTION","EXECUTE [IMMEDIATE]","FREE LOCATOR","GET [SQL] DESCRIPTOR [LOCAL | GLOBAL]","GET [CURRENT | STACKED] DIAGNOSTICS","GRANT {ALL [PRIVILEGES] | ALTER | EXECUTE} ON {FUNCTION | PROCEDURE | ROUTINE | PACKAGE | SCHEMA | SEQUENCE | TABLE | TYPE | VARIABLE | XSROBJECT}","HOLD LOCATOR","INCLUDE","LABEL ON {ALIAS | COLUMN | CONSTRAINT | INDEX | MASK | PACKAGE | PERMISSION | SEQUENCE | TABLE | TRIGGER | VARIABLE | XSROBJECT}","LABEL ON [SPECIFIC] {FUNCTION | PROCEDURE | ROUTINE}","LOCK TABLE","OPEN","PREPARE","REFRESH TABLE","RELEASE","RELEASE [TO] SAVEPOINT","RENAME [TABLE | INDEX] TO","REVOKE {ALL [PRIVILEGES] | ALTER | EXECUTE} ON {FUNCTION | PROCEDURE | ROUTINE | PACKAGE | SCHEMA | SEQUENCE | TABLE | TYPE | VARIABLE | XSROBJECT}","ROLLBACK [WORK] [HOLD | TO SAVEPOINT]","SAVEPOINT","SET CONNECTION","SET CURRENT {DEBUG MODE | DECFLOAT ROUNDING MODE | DEGREE | IMPLICIT XMLPARSE OPTION | TEMPORAL SYSTEM_TIME}","SET [SQL] DESCRIPTOR [LOCAL | GLOBAL]","SET ENCRYPTION PASSWORD","SET OPTION","SET {[CURRENT [FUNCTION]] PATH | CURRENT_PATH}","SET RESULT SETS [WITH RETURN [TO CALLER | TO CLIENT]]","SET SESSION AUTHORIZATION","SET SESSION_USER","SET TRANSACTION","SIGNAL SQLSTATE [VALUE]","TAG","TRANSFER OWNERSHIP OF","WHENEVER {NOT FOUND | SQLERROR | SQLWARNING}"]),Xbe=v(["UNION [ALL]","EXCEPT [ALL]","INTERSECT [ALL]"]),zbe=v(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","[LEFT | RIGHT] EXCEPTION JOIN","{INNER | CROSS} JOIN"]),jbe=v(["ON DELETE","ON UPDATE","SET NULL","{ROWS | RANGE} BETWEEN"]),Kbe=v([]),nR={name:"db2i",tokenizerOptions:{reservedSelect:Vbe,reservedClauses:[...qbe,...uj,...ky],reservedSetOperations:Xbe,reservedJoins:zbe,reservedKeywordPhrases:jbe,reservedDataTypePhrases:Kbe,reservedKeywords:aj,reservedDataTypes:lj,reservedFunctionNames:sj,nestedBlockComments:!0,extraParens:["[]"],stringTypes:[{quote:"''-qq",prefixes:["G","N"]},{quote:"''-raw",prefixes:["X","BX","GX","UX"],requirePrefix:!0}],identTypes:['""-qq'],identChars:{first:"@#$",rest:"@#$"},paramTypes:{positional:!0,named:[":"]},paramChars:{first:"@#$",rest:"@#$"},operators:["**","\xAC=","\xAC>","\xAC<","!>","!<","||","=>"]},formatOptions:{onelineClauses:[...uj,...ky],tabularOnelineClauses:ky}}});var dj,fj=G(()=>{dj=["ABS","ACOS","ADD","ADD_PARQUET_KEY","AGE","AGGREGATE","ALIAS","ALL_PROFILING_OUTPUT","ANY_VALUE","APPLY","APPROX_COUNT_DISTINCT","APPROX_QUANTILE","ARBITRARY","ARGMAX","ARGMIN","ARG_MAX","ARG_MAX_NULL","ARG_MIN","ARG_MIN_NULL","ARRAY_AGG","ARRAY_AGGR","ARRAY_AGGREGATE","ARRAY_APPEND","ARRAY_APPLY","ARRAY_CAT","ARRAY_CONCAT","ARRAY_CONTAINS","ARRAY_COSINE_SIMILARITY","ARRAY_CROSS_PRODUCT","ARRAY_DISTANCE","ARRAY_DISTINCT","ARRAY_DOT_PRODUCT","ARRAY_EXTRACT","ARRAY_FILTER","ARRAY_GRADE_UP","ARRAY_HAS","ARRAY_HAS_ALL","ARRAY_HAS_ANY","ARRAY_INDEXOF","ARRAY_INNER_PRODUCT","ARRAY_INTERSECT","ARRAY_LENGTH","ARRAY_POP_BACK","ARRAY_POP_FRONT","ARRAY_POSITION","ARRAY_PREPEND","ARRAY_PUSH_BACK","ARRAY_PUSH_FRONT","ARRAY_REDUCE","ARRAY_RESIZE","ARRAY_REVERSE","ARRAY_REVERSE_SORT","ARRAY_SELECT","ARRAY_SLICE","ARRAY_SORT","ARRAY_TO_JSON","ARRAY_TO_STRING","ARRAY_TRANSFORM","ARRAY_UNIQUE","ARRAY_VALUE","ARRAY_WHERE","ARRAY_ZIP","ARROW_SCAN","ARROW_SCAN_DUMB","ASCII","ASIN","ATAN","ATAN2","AVG","BASE64","BIN","BITSTRING","BITSTRING_AGG","BIT_AND","BIT_COUNT","BIT_LENGTH","BIT_OR","BIT_POSITION","BIT_XOR","BOOL_AND","BOOL_OR","CARDINALITY","CBRT","CEIL","CEILING","CENTURY","CHECKPOINT","CHR","COLLATIONS","COL_DESCRIPTION","COMBINE","CONCAT","CONCAT_WS","CONSTANT_OR_NULL","CONTAINS","COPY_DATABASE","CORR","COS","COT","COUNT","COUNT_IF","COUNT_STAR","COVAR_POP","COVAR_SAMP","CREATE_SORT_KEY","CURRENT_CATALOG","CURRENT_DATABASE","CURRENT_DATE","CURRENT_LOCALTIME","CURRENT_LOCALTIMESTAMP","CURRENT_QUERY","CURRENT_ROLE","CURRENT_SCHEMA","CURRENT_SCHEMAS","CURRENT_SETTING","CURRENT_USER","CURRVAL","DAMERAU_LEVENSHTEIN","DATABASE_LIST","DATABASE_SIZE","DATEDIFF","DATEPART","DATESUB","DATETRUNC","DATE_ADD","DATE_DIFF","DATE_PART","DATE_SUB","DATE_TRUNC","DAY","DAYNAME","DAYOFMONTH","DAYOFWEEK","DAYOFYEAR","DECADE","DECODE","DEGREES","DISABLE_CHECKPOINT_ON_SHUTDOWN","DISABLE_OBJECT_CACHE","DISABLE_OPTIMIZER","DISABLE_PRINT_PROGRESS_BAR","DISABLE_PROFILE","DISABLE_PROFILING","DISABLE_PROGRESS_BAR","DISABLE_VERIFICATION","DISABLE_VERIFY_EXTERNAL","DISABLE_VERIFY_FETCH_ROW","DISABLE_VERIFY_PARALLELISM","DISABLE_VERIFY_SERIALIZER","DIVIDE","DUCKDB_COLUMNS","DUCKDB_CONSTRAINTS","DUCKDB_DATABASES","DUCKDB_DEPENDENCIES","DUCKDB_EXTENSIONS","DUCKDB_FUNCTIONS","DUCKDB_INDEXES","DUCKDB_KEYWORDS","DUCKDB_MEMORY","DUCKDB_OPTIMIZERS","DUCKDB_SCHEMAS","DUCKDB_SECRETS","DUCKDB_SEQUENCES","DUCKDB_SETTINGS","DUCKDB_TABLES","DUCKDB_TEMPORARY_FILES","DUCKDB_TYPES","DUCKDB_VIEWS","EDIT","EDITDIST3","ELEMENT_AT","ENABLE_CHECKPOINT_ON_SHUTDOWN","ENABLE_OBJECT_CACHE","ENABLE_OPTIMIZER","ENABLE_PRINT_PROGRESS_BAR","ENABLE_PROFILE","ENABLE_PROFILING","ENABLE_PROGRESS_BAR","ENABLE_VERIFICATION","ENCODE","ENDS_WITH","ENTROPY","ENUM_CODE","ENUM_FIRST","ENUM_LAST","ENUM_RANGE","ENUM_RANGE_BOUNDARY","EPOCH","EPOCH_MS","EPOCH_NS","EPOCH_US","ERA","ERROR","EVEN","EXP","FACTORIAL","FAVG","FDIV","FILTER","FINALIZE","FIRST","FLATTEN","FLOOR","FMOD","FORCE_CHECKPOINT","FORMAT","FORMATREADABLEDECIMALSIZE","FORMATREADABLESIZE","FORMAT_BYTES","FORMAT_PG_TYPE","FORMAT_TYPE","FROM_BASE64","FROM_BINARY","FROM_HEX","FROM_JSON","FROM_JSON_STRICT","FSUM","FUNCTIONS","GAMMA","GCD","GENERATE_SERIES","GENERATE_SUBSCRIPTS","GEN_RANDOM_UUID","GEOMEAN","GEOMETRIC_MEAN","GETENV","GET_BIT","GET_BLOCK_SIZE","GET_CURRENT_TIME","GET_CURRENT_TIMESTAMP","GLOB","GRADE_UP","GREATEST","GREATEST_COMMON_DIVISOR","GROUP_CONCAT","HAMMING","HASH","HAS_ANY_COLUMN_PRIVILEGE","HAS_COLUMN_PRIVILEGE","HAS_DATABASE_PRIVILEGE","HAS_FOREIGN_DATA_WRAPPER_PRIVILEGE","HAS_FUNCTION_PRIVILEGE","HAS_LANGUAGE_PRIVILEGE","HAS_SCHEMA_PRIVILEGE","HAS_SEQUENCE_PRIVILEGE","HAS_SERVER_PRIVILEGE","HAS_TABLESPACE_PRIVILEGE","HAS_TABLE_PRIVILEGE","HEX","HISTOGRAM","HOUR","ICU_CALENDAR_NAMES","ICU_SORT_KEY","ILIKE_ESCAPE","IMPORT_DATABASE","INDEX_SCAN","INET_CLIENT_ADDR","INET_CLIENT_PORT","INET_SERVER_ADDR","INET_SERVER_PORT","INSTR","IN_SEARCH_PATH","ISFINITE","ISINF","ISNAN","ISODOW","ISOYEAR","JACCARD","JARO_SIMILARITY","JARO_WINKLER_SIMILARITY","JSON_ARRAY","JSON_ARRAY_LENGTH","JSON_CONTAINS","JSON_DESERIALIZE_SQL","JSON_EXECUTE_SERIALIZED_SQL","JSON_EXTRACT","JSON_EXTRACT_PATH","JSON_EXTRACT_PATH_TEXT","JSON_EXTRACT_STRING","JSON_GROUP_ARRAY","JSON_GROUP_OBJECT","JSON_GROUP_STRUCTURE","JSON_KEYS","JSON_MERGE_PATCH","JSON_OBJECT","JSON_QUOTE","JSON_SERIALIZE_PLAN","JSON_SERIALIZE_SQL","JSON_STRUCTURE","JSON_TRANSFORM","JSON_TRANSFORM_STRICT","JSON_TYPE","JSON_VALID","JULIAN","KAHAN_SUM","KURTOSIS","KURTOSIS_POP","LAST","LAST_DAY","LCASE","LCM","LEAST","LEAST_COMMON_MULTIPLE","LEFT","LEFT_GRAPHEME","LEN","LENGTH","LENGTH_GRAPHEME","LEVENSHTEIN","LGAMMA","LIKE_ESCAPE","LIST","LISTAGG","LIST_AGGR","LIST_AGGREGATE","LIST_ANY_VALUE","LIST_APPEND","LIST_APPLY","LIST_APPROX_COUNT_DISTINCT","LIST_AVG","LIST_BIT_AND","LIST_BIT_OR","LIST_BIT_XOR","LIST_BOOL_AND","LIST_BOOL_OR","LIST_CAT","LIST_CONCAT","LIST_CONTAINS","LIST_COSINE_SIMILARITY","LIST_COUNT","LIST_DISTANCE","LIST_DISTINCT","LIST_DOT_PRODUCT","LIST_ELEMENT","LIST_ENTROPY","LIST_EXTRACT","LIST_FILTER","LIST_FIRST","LIST_GRADE_UP","LIST_HAS","LIST_HAS_ALL","LIST_HAS_ANY","LIST_HISTOGRAM","LIST_INDEXOF","LIST_INNER_PRODUCT","LIST_INTERSECT","LIST_KURTOSIS","LIST_KURTOSIS_POP","LIST_LAST","LIST_MAD","LIST_MAX","LIST_MEDIAN","LIST_MIN","LIST_MODE","LIST_PACK","LIST_POSITION","LIST_PREPEND","LIST_PRODUCT","LIST_REDUCE","LIST_RESIZE","LIST_REVERSE","LIST_REVERSE_SORT","LIST_SELECT","LIST_SEM","LIST_SKEWNESS","LIST_SLICE","LIST_SORT","LIST_STDDEV_POP","LIST_STDDEV_SAMP","LIST_STRING_AGG","LIST_SUM","LIST_TRANSFORM","LIST_UNIQUE","LIST_VALUE","LIST_VAR_POP","LIST_VAR_SAMP","LIST_WHERE","LIST_ZIP","LN","LOG","LOG10","LOG2","LOWER","LPAD","LSMODE","LTRIM","MAD","MAKE_DATE","MAKE_TIME","MAKE_TIMESTAMP","MAKE_TIMESTAMPTZ","MAP","MAP_CONCAT","MAP_ENTRIES","MAP_EXTRACT","MAP_FROM_ENTRIES","MAP_KEYS","MAP_VALUES","MAX","MAX_BY","MD5","MD5_NUMBER","MD5_NUMBER_LOWER","MD5_NUMBER_UPPER","MEAN","MEDIAN","METADATA_INFO","MICROSECOND","MILLENNIUM","MILLISECOND","MIN","MINUTE","MIN_BY","MISMATCHES","MOD","MODE","MONTH","MONTHNAME","MULTIPLY","NEXTAFTER","NEXTVAL","NFC_NORMALIZE","NOT_ILIKE_ESCAPE","NOT_LIKE_ESCAPE","NOW","NULLIF","OBJ_DESCRIPTION","OCTET_LENGTH","ORD","PARQUET_FILE_METADATA","PARQUET_KV_METADATA","PARQUET_METADATA","PARQUET_SCAN","PARQUET_SCHEMA","PARSE_DIRNAME","PARSE_DIRPATH","PARSE_FILENAME","PARSE_PATH","PG_COLLATION_IS_VISIBLE","PG_CONF_LOAD_TIME","PG_CONVERSION_IS_VISIBLE","PG_FUNCTION_IS_VISIBLE","PG_GET_CONSTRAINTDEF","PG_GET_EXPR","PG_GET_VIEWDEF","PG_HAS_ROLE","PG_IS_OTHER_TEMP_SCHEMA","PG_MY_TEMP_SCHEMA","PG_OPCLASS_IS_VISIBLE","PG_OPERATOR_IS_VISIBLE","PG_OPFAMILY_IS_VISIBLE","PG_POSTMASTER_START_TIME","PG_SIZE_PRETTY","PG_TABLE_IS_VISIBLE","PG_TIMEZONE_NAMES","PG_TS_CONFIG_IS_VISIBLE","PG_TS_DICT_IS_VISIBLE","PG_TS_PARSER_IS_VISIBLE","PG_TS_TEMPLATE_IS_VISIBLE","PG_TYPEOF","PG_TYPE_IS_VISIBLE","PI","PLATFORM","POSITION","POW","POWER","PRAGMA_COLLATIONS","PRAGMA_DATABASE_SIZE","PRAGMA_METADATA_INFO","PRAGMA_PLATFORM","PRAGMA_SHOW","PRAGMA_STORAGE_INFO","PRAGMA_TABLE_INFO","PRAGMA_USER_AGENT","PRAGMA_VERSION","PREFIX","PRINTF","PRODUCT","QUANTILE","QUANTILE_CONT","QUANTILE_DISC","QUARTER","RADIANS","RANDOM","RANGE","READFILE","READ_BLOB","READ_CSV","READ_CSV_AUTO","READ_JSON","READ_JSON_AUTO","READ_JSON_OBJECTS","READ_JSON_OBJECTS_AUTO","READ_NDJSON","READ_NDJSON_AUTO","READ_NDJSON_OBJECTS","READ_PARQUET","READ_TEXT","REDUCE","REGEXP_ESCAPE","REGEXP_EXTRACT","REGEXP_EXTRACT_ALL","REGEXP_FULL_MATCH","REGEXP_MATCHES","REGEXP_REPLACE","REGEXP_SPLIT_TO_ARRAY","REGEXP_SPLIT_TO_TABLE","REGR_AVGX","REGR_AVGY","REGR_COUNT","REGR_INTERCEPT","REGR_R2","REGR_SLOPE","REGR_SXX","REGR_SXY","REGR_SYY","REPEAT","REPEAT_ROW","REPLACE","RESERVOIR_QUANTILE","REVERSE","RIGHT","RIGHT_GRAPHEME","ROUND","ROUNDBANKERS","ROUND_EVEN","ROW","ROW_TO_JSON","RPAD","RTRIM","SECOND","SEM","SEQ_SCAN","SESSION_USER","SETSEED","SET_BIT","SHA256","SHA3","SHELL_ADD_SCHEMA","SHELL_ESCAPE_CRNL","SHELL_IDQUOTE","SHELL_MODULE_SCHEMA","SHELL_PUTSNL","SHOBJ_DESCRIPTION","SHOW","SHOW_DATABASES","SHOW_TABLES","SHOW_TABLES_EXPANDED","SIGN","SIGNBIT","SIN","SKEWNESS","SNIFF_CSV","SPLIT","SPLIT_PART","SQL_AUTO_COMPLETE","SQRT","STARTS_WITH","STATS","STDDEV","STDDEV_POP","STDDEV_SAMP","STORAGE_INFO","STRFTIME","STRING_AGG","STRING_SPLIT","STRING_SPLIT_REGEX","STRING_TO_ARRAY","STRIP_ACCENTS","STRLEN","STRPOS","STRPTIME","STRUCT_EXTRACT","STRUCT_INSERT","STRUCT_PACK","STR_SPLIT","STR_SPLIT_REGEX","SUBSTR","SUBSTRING","SUBSTRING_GRAPHEME","SUBTRACT","SUFFIX","SUM","SUMKAHAN","SUMMARY","SUM_NO_OVERFLOW","TABLE_INFO","TAN","TEST_ALL_TYPES","TEST_VECTOR_TYPES","TIMEZONE","TIMEZONE_HOUR","TIMEZONE_MINUTE","TIME_BUCKET","TODAY","TO_BASE","TO_BASE64","TO_BINARY","TO_CENTURIES","TO_DAYS","TO_DECADES","TO_HEX","TO_HOURS","TO_JSON","TO_MICROSECONDS","TO_MILLENNIA","TO_MILLISECONDS","TO_MINUTES","TO_MONTHS","TO_SECONDS","TO_TIMESTAMP","TO_WEEKS","TO_YEARS","TRANSACTION_TIMESTAMP","TRANSLATE","TRIM","TRUNC","TRY_STRPTIME","TXID_CURRENT","TYPEOF","UCASE","UNBIN","UNHEX","UNICODE","UNION_EXTRACT","UNION_TAG","UNION_VALUE","UNNEST","UNPIVOT_LIST","UPPER","USER","USER_AGENT","UUID","VARIANCE","VAR_POP","VAR_SAMP","VECTOR_TYPE","VERIFY_EXTERNAL","VERIFY_FETCH_ROW","VERIFY_PARALLELISM","VERIFY_SERIALIZER","VERSION","WEEK","WEEKDAY","WEEKOFYEAR","WHICH_SECRET","WRITEFILE","XOR","YEAR","YEARWEEK","CAST","COALESCE","RANK","ROW_NUMBER"]});var Ej,hj,pj=G(()=>{Ej=["ALL","ANALYSE","ANALYZE","AND","ANY","AS","ASC","ATTACH","ASYMMETRIC","BOTH","CASE","CAST","CHECK","COLLATE","COLUMN","CONSTRAINT","CREATE","DEFAULT","DEFERRABLE","DESC","DESCRIBE","DETACH","DISTINCT","DO","ELSE","END","EXCEPT","FALSE","FETCH","FOR","FOREIGN","FROM","GRANT","GROUP","HAVING","IN","INITIALLY","INTERSECT","INTO","IS","LATERAL","LEADING","LIMIT","NOT","NULL","OFFSET","ON","ONLY","OR","ORDER","PIVOT","PIVOT_LONGER","PIVOT_WIDER","PLACING","PRIMARY","REFERENCES","RETURNING","SELECT","SHOW","SOME","SUMMARIZE","SYMMETRIC","TABLE","THEN","TO","TRAILING","TRUE","UNION","UNIQUE","UNPIVOT","USING","VARIADIC","WHEN","WHERE","WINDOW","WITH"],hj=["ARRAY","BIGINT","BINARY","BIT","BITSTRING","BLOB","BOOL","BOOLEAN","BPCHAR","BYTEA","CHAR","DATE","DATETIME","DEC","DECIMAL","DOUBLE","ENUM","FLOAT","FLOAT4","FLOAT8","GUID","HUGEINT","INET","INT","INT1","INT128","INT16","INT2","INT32","INT4","INT64","INT8","INTEGER","INTEGRAL","INTERVAL","JSON","LIST","LOGICAL","LONG","MAP","NUMERIC","NVARCHAR","OID","REAL","ROW","SHORT","SIGNED","SMALLINT","STRING","STRUCT","TEXT","TIME","TIMESTAMP_MS","TIMESTAMP_NS","TIMESTAMP_S","TIMESTAMP_US","TIMESTAMP","TIMESTAMPTZ","TIMETZ","TINYINT","UBIGINT","UHUGEINT","UINT128","UINT16","UINT32","UINT64","UINT8","UINTEGER","UNION","USMALLINT","UTINYINT","UUID","VARBINARY","VARCHAR"]});var Jbe,Qbe,Tj,Vy,Zbe,ewe,twe,nwe,rR,qy=G(()=>{vt();fj();pj();Jbe=v(["SELECT [ALL | DISTINCT]"]),Qbe=v(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY [ALL]","HAVING","WINDOW","PARTITION BY","ORDER BY [ALL]","LIMIT","OFFSET","USING SAMPLE","QUALIFY","INSERT [OR REPLACE] INTO","VALUES","DEFAULT VALUES","SET","RETURNING"]),Tj=v(["CREATE [OR REPLACE] [TEMPORARY | TEMP] TABLE [IF NOT EXISTS]"]),Vy=v(["UPDATE","ON CONFLICT","DELETE FROM","DROP TABLE [IF EXISTS]","TRUNCATE","ALTER TABLE","ADD [COLUMN] [IF NOT EXISTS]","ADD PRIMARY KEY","DROP [COLUMN] [IF EXISTS]","ALTER [COLUMN]","RENAME [COLUMN]","RENAME TO","SET [DATA] TYPE","{SET | DROP} DEFAULT","{SET | DROP} NOT NULL","CREATE [OR REPLACE] [TEMPORARY | TEMP] {MACRO | FUNCTION}","DROP MACRO [TABLE] [IF EXISTS]","DROP FUNCTION [IF EXISTS]","CREATE [UNIQUE] INDEX [IF NOT EXISTS]","DROP INDEX [IF EXISTS]","CREATE [OR REPLACE] SCHEMA [IF NOT EXISTS]","DROP SCHEMA [IF EXISTS]","CREATE [OR REPLACE] [PERSISTENT | TEMPORARY] SECRET [IF NOT EXISTS]","DROP [PERSISTENT | TEMPORARY] SECRET [IF EXISTS]","CREATE [OR REPLACE] [TEMPORARY | TEMP] SEQUENCE","DROP SEQUENCE [IF EXISTS]","CREATE [OR REPLACE] [TEMPORARY | TEMP] VIEW [IF NOT EXISTS]","DROP VIEW [IF EXISTS]","ALTER VIEW","CREATE TYPE","DROP TYPE [IF EXISTS]","ANALYZE","ATTACH [DATABASE] [IF NOT EXISTS]","DETACH [DATABASE] [IF EXISTS]","CALL","[FORCE] CHECKPOINT","COMMENT ON [TABLE | COLUMN | VIEW | INDEX | SEQUENCE | TYPE | MACRO | MACRO TABLE]","COPY [FROM DATABASE]","DESCRIBE","EXPORT DATABASE","IMPORT DATABASE","INSTALL","LOAD","PIVOT","PIVOT_WIDER","UNPIVOT","EXPLAIN [ANALYZE]","SET {LOCAL | SESSION | GLOBAL}","RESET [LOCAL | SESSION | GLOBAL]","{SET | RESET} VARIABLE","SUMMARIZE","BEGIN TRANSACTION","ROLLBACK","COMMIT","ABORT","USE","VACUUM [ANALYZE]","PREPARE","EXECUTE","DEALLOCATE [PREPARE]"]),Zbe=v(["UNION [ALL | BY NAME]","EXCEPT [ALL]","INTERSECT [ALL]"]),ewe=v(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","{NATURAL | ASOF} [INNER] JOIN","{NATURAL | ASOF} {LEFT | RIGHT | FULL} [OUTER] JOIN","POSITIONAL JOIN","ANTI JOIN","SEMI JOIN"]),twe=v(["{ROWS | RANGE | GROUPS} BETWEEN","SIMILAR TO","IS [NOT] DISTINCT FROM"]),nwe=v(["TIMESTAMP WITH TIME ZONE"]),rR={name:"duckdb",tokenizerOptions:{reservedSelect:Jbe,reservedClauses:[...Qbe,...Tj,...Vy],reservedSetOperations:Zbe,reservedJoins:ewe,reservedKeywordPhrases:twe,reservedDataTypePhrases:nwe,supportsXor:!0,reservedKeywords:Ej,reservedDataTypes:hj,reservedFunctionNames:dj,nestedBlockComments:!0,extraParens:["[]","{}"],underscoresInNumbers:!0,stringTypes:["$$","''-qq",{quote:"''-qq-bs",prefixes:["E"],requirePrefix:!0},{quote:"''-raw",prefixes:["B","X"],requirePrefix:!0}],identTypes:['""-qq'],identChars:{rest:"$"},paramTypes:{positional:!0,numbered:["$"],quoted:["$"]},operators:["//","%","**","^","!","&","|","~","<<",">>","::","==","->","->>",":",":=","=>","~~","!~~","~~*","!~~*","~~~","~","!~","~*","!~*","^@","||",">>=","<<="]},formatOptions:{alwaysDenseOperators:["::"],onelineClauses:[...Tj,...Vy],tabularOnelineClauses:Vy}}});var Sj,Rj=G(()=>{Sj=["ABS","ACOS","ASIN","ATAN","BIN","BROUND","CBRT","CEIL","CEILING","CONV","COS","DEGREES","EXP","FACTORIAL","FLOOR","GREATEST","HEX","LEAST","LN","LOG","LOG10","LOG2","NEGATIVE","PI","PMOD","POSITIVE","POW","POWER","RADIANS","RAND","ROUND","SHIFTLEFT","SHIFTRIGHT","SHIFTRIGHTUNSIGNED","SIGN","SIN","SQRT","TAN","UNHEX","WIDTH_BUCKET","ARRAY_CONTAINS","MAP_KEYS","MAP_VALUES","SIZE","SORT_ARRAY","BINARY","CAST","ADD_MONTHS","DATE","DATE_ADD","DATE_FORMAT","DATE_SUB","DATEDIFF","DAY","DAYNAME","DAYOFMONTH","DAYOFYEAR","EXTRACT","FROM_UNIXTIME","FROM_UTC_TIMESTAMP","HOUR","LAST_DAY","MINUTE","MONTH","MONTHS_BETWEEN","NEXT_DAY","QUARTER","SECOND","TIMESTAMP","TO_DATE","TO_UTC_TIMESTAMP","TRUNC","UNIX_TIMESTAMP","WEEKOFYEAR","YEAR","ASSERT_TRUE","COALESCE","IF","ISNOTNULL","ISNULL","NULLIF","NVL","ASCII","BASE64","CHARACTER_LENGTH","CHR","CONCAT","CONCAT_WS","CONTEXT_NGRAMS","DECODE","ELT","ENCODE","FIELD","FIND_IN_SET","FORMAT_NUMBER","GET_JSON_OBJECT","IN_FILE","INITCAP","INSTR","LCASE","LENGTH","LEVENSHTEIN","LOCATE","LOWER","LPAD","LTRIM","NGRAMS","OCTET_LENGTH","PARSE_URL","PRINTF","QUOTE","REGEXP_EXTRACT","REGEXP_REPLACE","REPEAT","REVERSE","RPAD","RTRIM","SENTENCES","SOUNDEX","SPACE","SPLIT","STR_TO_MAP","SUBSTR","SUBSTRING","TRANSLATE","TRIM","UCASE","UNBASE64","UPPER","MASK","MASK_FIRST_N","MASK_HASH","MASK_LAST_N","MASK_SHOW_FIRST_N","MASK_SHOW_LAST_N","AES_DECRYPT","AES_ENCRYPT","CRC32","CURRENT_DATABASE","CURRENT_USER","HASH","JAVA_METHOD","LOGGED_IN_USER","MD5","REFLECT","SHA","SHA1","SHA2","SURROGATE_KEY","VERSION","AVG","COLLECT_LIST","COLLECT_SET","CORR","COUNT","COVAR_POP","COVAR_SAMP","HISTOGRAM_NUMERIC","MAX","MIN","NTILE","PERCENTILE","PERCENTILE_APPROX","REGR_AVGX","REGR_AVGY","REGR_COUNT","REGR_INTERCEPT","REGR_R2","REGR_SLOPE","REGR_SXX","REGR_SXY","REGR_SYY","STDDEV_POP","STDDEV_SAMP","SUM","VAR_POP","VAR_SAMP","VARIANCE","EXPLODE","INLINE","JSON_TUPLE","PARSE_URL_TUPLE","POSEXPLODE","STACK","LEAD","LAG","FIRST_VALUE","LAST_VALUE","RANK","ROW_NUMBER","DENSE_RANK","CUME_DIST","PERCENT_RANK","NTILE"]});var Aj,mj,gj=G(()=>{Aj=["ADD","ADMIN","AFTER","ANALYZE","ARCHIVE","ASC","BEFORE","BUCKET","BUCKETS","CASCADE","CHANGE","CLUSTER","CLUSTERED","CLUSTERSTATUS","COLLECTION","COLUMNS","COMMENT","COMPACT","COMPACTIONS","COMPUTE","CONCATENATE","CONTINUE","DATA","DATABASES","DATETIME","DAY","DBPROPERTIES","DEFERRED","DEFINED","DELIMITED","DEPENDENCY","DESC","DIRECTORIES","DIRECTORY","DISABLE","DISTRIBUTE","ELEM_TYPE","ENABLE","ESCAPED","EXCLUSIVE","EXPLAIN","EXPORT","FIELDS","FILE","FILEFORMAT","FIRST","FORMAT","FORMATTED","FUNCTIONS","HOLD_DDLTIME","HOUR","IDXPROPERTIES","IGNORE","INDEX","INDEXES","INPATH","INPUTDRIVER","INPUTFORMAT","ITEMS","JAR","KEYS","KEY_TYPE","LIMIT","LINES","LOAD","LOCATION","LOCK","LOCKS","LOGICAL","LONG","MAPJOIN","MATERIALIZED","METADATA","MINUS","MINUTE","MONTH","MSCK","NOSCAN","NO_DROP","OFFLINE","OPTION","OUTPUTDRIVER","OUTPUTFORMAT","OVERWRITE","OWNER","PARTITIONED","PARTITIONS","PLUS","PRETTY","PRINCIPALS","PROTECTION","PURGE","READ","READONLY","REBUILD","RECORDREADER","RECORDWRITER","RELOAD","RENAME","REPAIR","REPLACE","REPLICATION","RESTRICT","REWRITE","ROLE","ROLES","SCHEMA","SCHEMAS","SECOND","SEMI","SERDE","SERDEPROPERTIES","SERVER","SETS","SHARED","SHOW","SHOW_DATABASE","SKEWED","SORT","SORTED","SSL","STATISTICS","STORED","STREAMTABLE","STRING","TABLES","TBLPROPERTIES","TEMPORARY","TERMINATED","TINYINT","TOUCH","TRANSACTIONS","UNARCHIVE","UNDO","UNIONTYPE","UNLOCK","UNSET","UNSIGNED","URI","USE","UTC","UTCTIMESTAMP","VALUE_TYPE","VIEW","WHILE","YEAR","AUTOCOMMIT","ISOLATION","LEVEL","OFFSET","SNAPSHOT","TRANSACTION","WORK","WRITE","ABORT","KEY","LAST","NORELY","NOVALIDATE","NULLS","RELY","VALIDATE","DETAIL","DOW","EXPRESSION","OPERATOR","QUARTER","SUMMARY","VECTORIZATION","WEEK","YEARS","MONTHS","WEEKS","DAYS","HOURS","MINUTES","SECONDS","TIMESTAMPTZ","ZONE","ALL","ALTER","AND","AS","AUTHORIZATION","BETWEEN","BOTH","BY","CASE","CAST","COLUMN","CONF","CREATE","CROSS","CUBE","CURRENT","CURRENT_DATE","CURRENT_TIMESTAMP","CURSOR","DATABASE","DELETE","DESCRIBE","DISTINCT","DROP","ELSE","END","EXCHANGE","EXISTS","EXTENDED","EXTERNAL","FALSE","FETCH","FOLLOWING","FOR","FROM","FULL","FUNCTION","GRANT","GROUP","GROUPING","HAVING","IF","IMPORT","IN","INNER","INSERT","INTERSECT","INTO","IS","JOIN","LATERAL","LEFT","LESS","LIKE","LOCAL","MACRO","MORE","NONE","NOT","NULL","OF","ON","OR","ORDER","OUT","OUTER","OVER","PARTIALSCAN","PARTITION","PERCENT","PRECEDING","PRESERVE","PROCEDURE","RANGE","READS","REDUCE","REVOKE","RIGHT","ROLLUP","ROW","ROWS","SELECT","SET","TABLE","TABLESAMPLE","THEN","TO","TRANSFORM","TRIGGER","TRUE","TRUNCATE","UNBOUNDED","UNION","UNIQUEJOIN","UPDATE","USER","USING","UTC_TMESTAMP","VALUES","WHEN","WHERE","WINDOW","WITH","COMMIT","ONLY","REGEXP","RLIKE","ROLLBACK","START","CACHE","CONSTRAINT","FOREIGN","PRIMARY","REFERENCES","DAYOFWEEK","EXTRACT","FLOOR","VIEWS","TIME","SYNC","TEXTFILE","SEQUENCEFILE","ORC","CSV","TSV","PARQUET","AVRO","RCFILE","JSONFILE","INPUTFORMAT","OUTPUTFORMAT"],mj=["ARRAY","BIGINT","BINARY","BOOLEAN","CHAR","DATE","DECIMAL","DOUBLE","FLOAT","INT","INTEGER","INTERVAL","MAP","NUMERIC","PRECISION","SMALLINT","STRUCT","TIMESTAMP","VARCHAR"]});var rwe,iwe,Ij,Xy,swe,owe,awe,lwe,iR,zy=G(()=>{vt();Rj();gj();rwe=v(["SELECT [ALL | DISTINCT]"]),iwe=v(["WITH","FROM","WHERE","GROUP BY","HAVING","WINDOW","PARTITION BY","ORDER BY","SORT BY","CLUSTER BY","DISTRIBUTE BY","LIMIT","INSERT INTO [TABLE]","VALUES","SET","MERGE INTO","WHEN [NOT] MATCHED [THEN]","UPDATE SET","INSERT [VALUES]","INSERT OVERWRITE [LOCAL] DIRECTORY","LOAD DATA [LOCAL] INPATH","[OVERWRITE] INTO TABLE"]),Ij=v(["CREATE [TEMPORARY] [EXTERNAL] TABLE [IF NOT EXISTS]"]),Xy=v(["CREATE [MATERIALIZED] VIEW [IF NOT EXISTS]","UPDATE","DELETE FROM","DROP TABLE [IF EXISTS]","ALTER TABLE","RENAME TO","TRUNCATE [TABLE]","ALTER","CREATE","USE","DESCRIBE","DROP","FETCH","SHOW","STORED AS","STORED BY","ROW FORMAT"]),swe=v(["UNION [ALL | DISTINCT]"]),owe=v(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","LEFT SEMI JOIN"]),awe=v(["{ROWS | RANGE} BETWEEN"]),lwe=v([]),iR={name:"hive",tokenizerOptions:{reservedSelect:rwe,reservedClauses:[...iwe,...Ij,...Xy],reservedSetOperations:swe,reservedJoins:owe,reservedKeywordPhrases:awe,reservedDataTypePhrases:lwe,reservedKeywords:Aj,reservedDataTypes:mj,reservedFunctionNames:Sj,extraParens:["[]"],stringTypes:['""-bs',"''-bs"],identTypes:["``"],variableTypes:[{quote:"{}",prefixes:["$"],requirePrefix:!0}],operators:["%","~","^","|","&","<=>","==","!","||"]},formatOptions:{onelineClauses:[...Ij,...Xy],tabularOnelineClauses:Xy}}});function ao(t){return t.map((e,n)=>{let r=t[n+1]||Di;if(zr.SET(e)&&r.text==="(")return Object.assign(Object.assign({},e),{type:k.RESERVED_FUNCTION_NAME});let i=t[n-1]||Di;return zr.VALUES(e)&&i.text==="="?Object.assign(Object.assign({},e),{type:k.RESERVED_FUNCTION_NAME}):e})}var ff=G(()=>{yr()});var _j,Nj,Oj=G(()=>{_j=["ACCESSIBLE","ADD","ALL","ALTER","ANALYZE","AND","AS","ASC","ASENSITIVE","BEFORE","BETWEEN","BOTH","BY","CALL","CASCADE","CASE","CHANGE","CHECK","COLLATE","COLUMN","CONDITION","CONSTRAINT","CONTINUE","CONVERT","CREATE","CROSS","CURRENT_DATE","CURRENT_ROLE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURSOR","DATABASE","DATABASES","DAY_HOUR","DAY_MICROSECOND","DAY_MINUTE","DAY_SECOND","DECLARE","DEFAULT","DELAYED","DELETE","DELETE_DOMAIN_ID","DESC","DESCRIBE","DETERMINISTIC","DISTINCT","DISTINCTROW","DIV","DO_DOMAIN_IDS","DROP","DUAL","EACH","ELSE","ELSEIF","ENCLOSED","ESCAPED","EXCEPT","EXISTS","EXIT","EXPLAIN","FALSE","FETCH","FOR","FORCE","FOREIGN","FROM","FULLTEXT","GENERAL","GRANT","GROUP","HAVING","HIGH_PRIORITY","HOUR_MICROSECOND","HOUR_MINUTE","HOUR_SECOND","IF","IGNORE","IGNORE_DOMAIN_IDS","IGNORE_SERVER_IDS","IN","INDEX","INFILE","INNER","INOUT","INSENSITIVE","INSERT","INTERSECT","INTERVAL","INTO","IS","ITERATE","JOIN","KEY","KEYS","KILL","LEADING","LEAVE","LEFT","LIKE","LIMIT","LINEAR","LINES","LOAD","LOCALTIME","LOCALTIMESTAMP","LOCK","LOOP","LOW_PRIORITY","MASTER_HEARTBEAT_PERIOD","MASTER_SSL_VERIFY_SERVER_CERT","MATCH","MAXVALUE","MINUTE_MICROSECOND","MINUTE_SECOND","MOD","MODIFIES","NATURAL","NOT","NO_WRITE_TO_BINLOG","NULL","OFFSET","ON","OPTIMIZE","OPTION","OPTIONALLY","OR","ORDER","OUT","OUTER","OUTFILE","OVER","PAGE_CHECKSUM","PARSE_VCOL_EXPR","PARTITION","POSITION","PRIMARY","PROCEDURE","PURGE","RANGE","READ","READS","READ_WRITE","RECURSIVE","REF_SYSTEM_ID","REFERENCES","REGEXP","RELEASE","RENAME","REPEAT","REPLACE","REQUIRE","RESIGNAL","RESTRICT","RETURN","RETURNING","REVOKE","RIGHT","RLIKE","ROW_NUMBER","ROWS","SCHEMA","SCHEMAS","SECOND_MICROSECOND","SELECT","SENSITIVE","SEPARATOR","SET","SHOW","SIGNAL","SLOW","SPATIAL","SPECIFIC","SQL","SQLEXCEPTION","SQLSTATE","SQLWARNING","SQL_BIG_RESULT","SQL_CALC_FOUND_ROWS","SQL_SMALL_RESULT","SSL","STARTING","STATS_AUTO_RECALC","STATS_PERSISTENT","STATS_SAMPLE_PAGES","STRAIGHT_JOIN","TABLE","TERMINATED","THEN","TO","TRAILING","TRIGGER","TRUE","UNDO","UNION","UNIQUE","UNLOCK","UNSIGNED","UPDATE","USAGE","USE","USING","UTC_DATE","UTC_TIME","UTC_TIMESTAMP","VALUES","WHEN","WHERE","WHILE","WINDOW","WITH","WRITE","XOR","YEAR_MONTH","ZEROFILL"],Nj=["BIGINT","BINARY","BIT","BLOB","CHAR BYTE","CHAR","CHARACTER","DATETIME","DEC","DECIMAL","DOUBLE PRECISION","DOUBLE","ENUM","FIXED","FLOAT","FLOAT4","FLOAT8","INT","INT1","INT2","INT3","INT4","INT8","INTEGER","LONG","LONGBLOB","LONGTEXT","MEDIUMBLOB","MEDIUMINT","MEDIUMTEXT","MIDDLEINT","NATIONAL CHAR","NATIONAL VARCHAR","NUMERIC","PRECISION","REAL","SMALLINT","TEXT","TIMESTAMP","TINYBLOB","TINYINT","TINYTEXT","VARBINARY","VARCHAR","VARCHARACTER","VARYING","YEAR"]});var Cj,yj=G(()=>{Cj=["ADDDATE","ADD_MONTHS","BIT_AND","BIT_OR","BIT_XOR","CAST","COUNT","CUME_DIST","CURDATE","CURTIME","DATE_ADD","DATE_SUB","DATE_FORMAT","DECODE","DENSE_RANK","EXTRACT","FIRST_VALUE","GROUP_CONCAT","JSON_ARRAYAGG","JSON_OBJECTAGG","LAG","LEAD","MAX","MEDIAN","MID","MIN","NOW","NTH_VALUE","NTILE","POSITION","PERCENT_RANK","PERCENTILE_CONT","PERCENTILE_DISC","RANK","ROW_NUMBER","SESSION_USER","STD","STDDEV","STDDEV_POP","STDDEV_SAMP","SUBDATE","SUBSTR","SUBSTRING","SUM","SYSTEM_USER","TRIM","TRIM_ORACLE","VARIANCE","VAR_POP","VAR_SAMP","ABS","ACOS","ADDTIME","AES_DECRYPT","AES_ENCRYPT","ASIN","ATAN","ATAN2","BENCHMARK","BIN","BINLOG_GTID_POS","BIT_COUNT","BIT_LENGTH","CEIL","CEILING","CHARACTER_LENGTH","CHAR_LENGTH","CHR","COERCIBILITY","COLUMN_CHECK","COLUMN_EXISTS","COLUMN_LIST","COLUMN_JSON","COMPRESS","CONCAT","CONCAT_OPERATOR_ORACLE","CONCAT_WS","CONNECTION_ID","CONV","CONVERT_TZ","COS","COT","CRC32","DATEDIFF","DAYNAME","DAYOFMONTH","DAYOFWEEK","DAYOFYEAR","DEGREES","DECODE_HISTOGRAM","DECODE_ORACLE","DES_DECRYPT","DES_ENCRYPT","ELT","ENCODE","ENCRYPT","EXP","EXPORT_SET","EXTRACTVALUE","FIELD","FIND_IN_SET","FLOOR","FORMAT","FOUND_ROWS","FROM_BASE64","FROM_DAYS","FROM_UNIXTIME","GET_LOCK","GREATEST","HEX","IFNULL","INSTR","ISNULL","IS_FREE_LOCK","IS_USED_LOCK","JSON_ARRAY","JSON_ARRAY_APPEND","JSON_ARRAY_INSERT","JSON_COMPACT","JSON_CONTAINS","JSON_CONTAINS_PATH","JSON_DEPTH","JSON_DETAILED","JSON_EXISTS","JSON_EXTRACT","JSON_INSERT","JSON_KEYS","JSON_LENGTH","JSON_LOOSE","JSON_MERGE","JSON_MERGE_PATCH","JSON_MERGE_PRESERVE","JSON_QUERY","JSON_QUOTE","JSON_OBJECT","JSON_REMOVE","JSON_REPLACE","JSON_SET","JSON_SEARCH","JSON_TYPE","JSON_UNQUOTE","JSON_VALID","JSON_VALUE","LAST_DAY","LAST_INSERT_ID","LCASE","LEAST","LENGTH","LENGTHB","LN","LOAD_FILE","LOCATE","LOG","LOG10","LOG2","LOWER","LPAD","LPAD_ORACLE","LTRIM","LTRIM_ORACLE","MAKEDATE","MAKETIME","MAKE_SET","MASTER_GTID_WAIT","MASTER_POS_WAIT","MD5","MONTHNAME","NAME_CONST","NVL","NVL2","OCT","OCTET_LENGTH","ORD","PERIOD_ADD","PERIOD_DIFF","PI","POW","POWER","QUOTE","REGEXP_INSTR","REGEXP_REPLACE","REGEXP_SUBSTR","RADIANS","RAND","RELEASE_ALL_LOCKS","RELEASE_LOCK","REPLACE_ORACLE","REVERSE","ROUND","RPAD","RPAD_ORACLE","RTRIM","RTRIM_ORACLE","SEC_TO_TIME","SHA","SHA1","SHA2","SIGN","SIN","SLEEP","SOUNDEX","SPACE","SQRT","STRCMP","STR_TO_DATE","SUBSTR_ORACLE","SUBSTRING_INDEX","SUBTIME","SYS_GUID","TAN","TIMEDIFF","TIME_FORMAT","TIME_TO_SEC","TO_BASE64","TO_CHAR","TO_DAYS","TO_SECONDS","UCASE","UNCOMPRESS","UNCOMPRESSED_LENGTH","UNHEX","UNIX_TIMESTAMP","UPDATEXML","UPPER","UUID","UUID_SHORT","VERSION","WEEKDAY","WEEKOFYEAR","WSREP_LAST_WRITTEN_GTID","WSREP_LAST_SEEN_GTID","WSREP_SYNC_WAIT_UPTO_GTID","YEARWEEK","COALESCE","NULLIF"]});var cwe,uwe,bj,jy,dwe,fwe,Ewe,hwe,sR,Ky=G(()=>{vt();ff();Oj();yj();cwe=v(["SELECT [ALL | DISTINCT | DISTINCTROW]"]),uwe=v(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY","HAVING","PARTITION BY","ORDER BY","LIMIT","OFFSET","FETCH {FIRST | NEXT}","INSERT [LOW_PRIORITY | DELAYED | HIGH_PRIORITY] [IGNORE] [INTO]","REPLACE [LOW_PRIORITY | DELAYED] [INTO]","VALUES","ON DUPLICATE KEY UPDATE","SET","RETURNING"]),bj=v(["CREATE [OR REPLACE] [TEMPORARY] TABLE [IF NOT EXISTS]"]),jy=v(["CREATE [OR REPLACE] [SQL SECURITY DEFINER | SQL SECURITY INVOKER] VIEW [IF NOT EXISTS]","UPDATE [LOW_PRIORITY] [IGNORE]","DELETE [LOW_PRIORITY] [QUICK] [IGNORE] FROM","DROP [TEMPORARY] TABLE [IF EXISTS]","ALTER [ONLINE] [IGNORE] TABLE [IF EXISTS]","ADD [COLUMN] [IF NOT EXISTS]","{CHANGE | MODIFY} [COLUMN] [IF EXISTS]","DROP [COLUMN] [IF EXISTS]","RENAME [TO]","RENAME COLUMN","ALTER [COLUMN]","{SET | DROP} DEFAULT","SET {VISIBLE | INVISIBLE}","TRUNCATE [TABLE]","ALTER DATABASE","ALTER DATABASE COMMENT","ALTER EVENT","ALTER FUNCTION","ALTER PROCEDURE","ALTER SCHEMA","ALTER SCHEMA COMMENT","ALTER SEQUENCE","ALTER SERVER","ALTER USER","ALTER VIEW","ANALYZE","ANALYZE TABLE","BACKUP LOCK","BACKUP STAGE","BACKUP UNLOCK","BEGIN","BINLOG","CACHE INDEX","CALL","CHANGE MASTER TO","CHECK TABLE","CHECK VIEW","CHECKSUM TABLE","COMMIT","CREATE AGGREGATE FUNCTION","CREATE DATABASE","CREATE EVENT","CREATE FUNCTION","CREATE INDEX","CREATE PROCEDURE","CREATE ROLE","CREATE SEQUENCE","CREATE SERVER","CREATE SPATIAL INDEX","CREATE TRIGGER","CREATE UNIQUE INDEX","CREATE USER","DEALLOCATE PREPARE","DESCRIBE","DROP DATABASE","DROP EVENT","DROP FUNCTION","DROP INDEX","DROP PREPARE","DROP PROCEDURE","DROP ROLE","DROP SEQUENCE","DROP SERVER","DROP TRIGGER","DROP USER","DROP VIEW","EXECUTE","EXPLAIN","FLUSH","GET DIAGNOSTICS","GET DIAGNOSTICS CONDITION","GRANT","HANDLER","HELP","INSTALL PLUGIN","INSTALL SONAME","KILL","LOAD DATA INFILE","LOAD INDEX INTO CACHE","LOAD XML INFILE","LOCK TABLE","OPTIMIZE TABLE","PREPARE","PURGE BINARY LOGS","PURGE MASTER LOGS","RELEASE SAVEPOINT","RENAME TABLE","RENAME USER","REPAIR TABLE","REPAIR VIEW","RESET MASTER","RESET QUERY CACHE","RESET REPLICA","RESET SLAVE","RESIGNAL","REVOKE","ROLLBACK","SAVEPOINT","SET CHARACTER SET","SET DEFAULT ROLE","SET GLOBAL TRANSACTION","SET NAMES","SET PASSWORD","SET ROLE","SET STATEMENT","SET TRANSACTION","SHOW","SHOW ALL REPLICAS STATUS","SHOW ALL SLAVES STATUS","SHOW AUTHORS","SHOW BINARY LOGS","SHOW BINLOG EVENTS","SHOW BINLOG STATUS","SHOW CHARACTER SET","SHOW CLIENT_STATISTICS","SHOW COLLATION","SHOW COLUMNS","SHOW CONTRIBUTORS","SHOW CREATE DATABASE","SHOW CREATE EVENT","SHOW CREATE FUNCTION","SHOW CREATE PACKAGE","SHOW CREATE PACKAGE BODY","SHOW CREATE PROCEDURE","SHOW CREATE SEQUENCE","SHOW CREATE TABLE","SHOW CREATE TRIGGER","SHOW CREATE USER","SHOW CREATE VIEW","SHOW DATABASES","SHOW ENGINE","SHOW ENGINE INNODB STATUS","SHOW ENGINES","SHOW ERRORS","SHOW EVENTS","SHOW EXPLAIN","SHOW FUNCTION CODE","SHOW FUNCTION STATUS","SHOW GRANTS","SHOW INDEX","SHOW INDEXES","SHOW INDEX_STATISTICS","SHOW KEYS","SHOW LOCALES","SHOW MASTER LOGS","SHOW MASTER STATUS","SHOW OPEN TABLES","SHOW PACKAGE BODY CODE","SHOW PACKAGE BODY STATUS","SHOW PACKAGE STATUS","SHOW PLUGINS","SHOW PLUGINS SONAME","SHOW PRIVILEGES","SHOW PROCEDURE CODE","SHOW PROCEDURE STATUS","SHOW PROCESSLIST","SHOW PROFILE","SHOW PROFILES","SHOW QUERY_RESPONSE_TIME","SHOW RELAYLOG EVENTS","SHOW REPLICA","SHOW REPLICA HOSTS","SHOW REPLICA STATUS","SHOW SCHEMAS","SHOW SLAVE","SHOW SLAVE HOSTS","SHOW SLAVE STATUS","SHOW STATUS","SHOW STORAGE ENGINES","SHOW TABLE STATUS","SHOW TABLES","SHOW TRIGGERS","SHOW USER_STATISTICS","SHOW VARIABLES","SHOW WARNINGS","SHOW WSREP_MEMBERSHIP","SHOW WSREP_STATUS","SHUTDOWN","SIGNAL","START ALL REPLICAS","START ALL SLAVES","START REPLICA","START SLAVE","START TRANSACTION","STOP ALL REPLICAS","STOP ALL SLAVES","STOP REPLICA","STOP SLAVE","UNINSTALL PLUGIN","UNINSTALL SONAME","UNLOCK TABLE","USE","XA BEGIN","XA COMMIT","XA END","XA PREPARE","XA RECOVER","XA ROLLBACK","XA START"]),dwe=v(["UNION [ALL | DISTINCT]","EXCEPT [ALL | DISTINCT]","INTERSECT [ALL | DISTINCT]","MINUS [ALL | DISTINCT]"]),fwe=v(["JOIN","{LEFT | RIGHT} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL JOIN","NATURAL {LEFT | RIGHT} [OUTER] JOIN","STRAIGHT_JOIN"]),Ewe=v(["ON {UPDATE | DELETE} [SET NULL | SET DEFAULT]","CHARACTER SET","{ROWS | RANGE} BETWEEN","IDENTIFIED BY"]),hwe=v([]),sR={name:"mariadb",tokenizerOptions:{reservedSelect:cwe,reservedClauses:[...uwe,...bj,...jy],reservedSetOperations:dwe,reservedJoins:fwe,reservedKeywordPhrases:Ewe,reservedDataTypePhrases:hwe,supportsXor:!0,reservedKeywords:_j,reservedDataTypes:Nj,reservedFunctionNames:Cj,stringTypes:['""-qq-bs',"''-qq-bs",{quote:"''-raw",prefixes:["B","X"],requirePrefix:!0}],identTypes:["``"],identChars:{first:"$",rest:"$",allowFirstCharNumber:!0},variableTypes:[{regex:"@@?[A-Za-z0-9_.$]+"},{quote:'""-qq-bs',prefixes:["@"],requirePrefix:!0},{quote:"''-qq-bs",prefixes:["@"],requirePrefix:!0},{quote:"``",prefixes:["@"],requirePrefix:!0}],paramTypes:{positional:!0},lineCommentTypes:["--","#"],operators:["%",":=","&","|","^","~","<<",">>","<=>","&&","||","!","*.*"],postProcess:ao},formatOptions:{onelineClauses:[...bj,...jy],tabularOnelineClauses:jy}}});var wj,Lj,Dj=G(()=>{wj=["ACCESSIBLE","ADD","ALL","ALTER","ANALYZE","AND","AS","ASC","ASENSITIVE","BEFORE","BETWEEN","BOTH","BY","CALL","CASCADE","CASE","CHANGE","CHECK","COLLATE","COLUMN","CONDITION","CONSTRAINT","CONTINUE","CONVERT","CREATE","CROSS","CUBE","CUME_DIST","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURSOR","DATABASE","DATABASES","DAY_HOUR","DAY_MICROSECOND","DAY_MINUTE","DAY_SECOND","DECLARE","DEFAULT","DELAYED","DELETE","DENSE_RANK","DESC","DESCRIBE","DETERMINISTIC","DISTINCT","DISTINCTROW","DIV","DROP","DUAL","EACH","ELSE","ELSEIF","EMPTY","ENCLOSED","ESCAPED","EXCEPT","EXISTS","EXIT","EXPLAIN","FALSE","FETCH","FIRST_VALUE","FOR","FORCE","FOREIGN","FROM","FULLTEXT","FUNCTION","GENERATED","GET","GRANT","GROUP","GROUPING","GROUPS","HAVING","HIGH_PRIORITY","HOUR_MICROSECOND","HOUR_MINUTE","HOUR_SECOND","IF","IGNORE","IN","INDEX","INFILE","INNER","INOUT","INSENSITIVE","INSERT","IN","INTERSECT","INTERVAL","INTO","IO_AFTER_GTIDS","IO_BEFORE_GTIDS","IS","ITERATE","JOIN","JSON_TABLE","KEY","KEYS","KILL","LAG","LAST_VALUE","LATERAL","LEAD","LEADING","LEAVE","LEFT","LIKE","LIMIT","LINEAR","LINES","LOAD","LOCALTIME","LOCALTIMESTAMP","LOCK","LONG","LOOP","LOW_PRIORITY","MASTER_BIND","MASTER_SSL_VERIFY_SERVER_CERT","MATCH","MAXVALUE","MINUTE_MICROSECOND","MINUTE_SECOND","MOD","MODIFIES","NATURAL","NOT","NO_WRITE_TO_BINLOG","NTH_VALUE","NTILE","NULL","OF","ON","OPTIMIZE","OPTIMIZER_COSTS","OPTION","OPTIONALLY","OR","ORDER","OUT","OUTER","OUTFILE","OVER","PARTITION","PERCENT_RANK","PRIMARY","PROCEDURE","PURGE","RANGE","RANK","READ","READS","READ_WRITE","RECURSIVE","REFERENCES","REGEXP","RELEASE","RENAME","REPEAT","REPLACE","REQUIRE","RESIGNAL","RESTRICT","RETURN","REVOKE","RIGHT","RLIKE","ROW","ROWS","ROW_NUMBER","SCHEMA","SCHEMAS","SECOND_MICROSECOND","SELECT","SENSITIVE","SEPARATOR","SET","SHOW","SIGNAL","SPATIAL","SPECIFIC","SQL","SQLEXCEPTION","SQLSTATE","SQLWARNING","SQL_BIG_RESULT","SQL_CALC_FOUND_ROWS","SQL_SMALL_RESULT","SSL","STARTING","STORED","STRAIGHT_JOIN","SYSTEM","TABLE","TERMINATED","THEN","TO","TRAILING","TRIGGER","TRUE","UNDO","UNION","UNIQUE","UNLOCK","UNSIGNED","UPDATE","USAGE","USE","USING","UTC_DATE","UTC_TIME","UTC_TIMESTAMP","VALUES","VIRTUAL","WHEN","WHERE","WHILE","WINDOW","WITH","WRITE","XOR","YEAR_MONTH","ZEROFILL"],Lj=["BIGINT","BINARY","BIT","BLOB","BOOL","BOOLEAN","CHAR","CHARACTER","DATE","DATETIME","DEC","DECIMAL","DOUBLE PRECISION","DOUBLE","ENUM","FIXED","FLOAT","FLOAT4","FLOAT8","INT","INT1","INT2","INT3","INT4","INT8","INTEGER","LONGBLOB","LONGTEXT","MEDIUMBLOB","MEDIUMINT","MEDIUMTEXT","MIDDLEINT","NATIONAL CHAR","NATIONAL VARCHAR","NUMERIC","PRECISION","REAL","SMALLINT","TEXT","TIME","TIMESTAMP","TINYBLOB","TINYINT","TINYTEXT","VARBINARY","VARCHAR","VARCHARACTER","VARYING","YEAR"]});var Pj,xj=G(()=>{Pj=["ABS","ACOS","ADDDATE","ADDTIME","AES_DECRYPT","AES_ENCRYPT","ANY_VALUE","ASCII","ASIN","ATAN","ATAN2","AVG","BENCHMARK","BIN","BIN_TO_UUID","BINARY","BIT_AND","BIT_COUNT","BIT_LENGTH","BIT_OR","BIT_XOR","CAN_ACCESS_COLUMN","CAN_ACCESS_DATABASE","CAN_ACCESS_TABLE","CAN_ACCESS_USER","CAN_ACCESS_VIEW","CAST","CEIL","CEILING","CHAR","CHAR_LENGTH","CHARACTER_LENGTH","CHARSET","COALESCE","COERCIBILITY","COLLATION","COMPRESS","CONCAT","CONCAT_WS","CONNECTION_ID","CONV","CONVERT","CONVERT_TZ","COS","COT","COUNT","CRC32","CUME_DIST","CURDATE","CURRENT_DATE","CURRENT_ROLE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURTIME","DATABASE","DATE","DATE_ADD","DATE_FORMAT","DATE_SUB","DATEDIFF","DAY","DAYNAME","DAYOFMONTH","DAYOFWEEK","DAYOFYEAR","DEFAULT","DEGREES","DENSE_RANK","DIV","ELT","EXP","EXPORT_SET","EXTRACT","EXTRACTVALUE","FIELD","FIND_IN_SET","FIRST_VALUE","FLOOR","FORMAT","FORMAT_BYTES","FORMAT_PICO_TIME","FOUND_ROWS","FROM_BASE64","FROM_DAYS","FROM_UNIXTIME","GEOMCOLLECTION","GEOMETRYCOLLECTION","GET_DD_COLUMN_PRIVILEGES","GET_DD_CREATE_OPTIONS","GET_DD_INDEX_SUB_PART_LENGTH","GET_FORMAT","GET_LOCK","GREATEST","GROUP_CONCAT","GROUPING","GTID_SUBSET","GTID_SUBTRACT","HEX","HOUR","ICU_VERSION","IF","IFNULL","INET_ATON","INET_NTOA","INET6_ATON","INET6_NTOA","INSERT","INSTR","INTERNAL_AUTO_INCREMENT","INTERNAL_AVG_ROW_LENGTH","INTERNAL_CHECK_TIME","INTERNAL_CHECKSUM","INTERNAL_DATA_FREE","INTERNAL_DATA_LENGTH","INTERNAL_DD_CHAR_LENGTH","INTERNAL_GET_COMMENT_OR_ERROR","INTERNAL_GET_ENABLED_ROLE_JSON","INTERNAL_GET_HOSTNAME","INTERNAL_GET_USERNAME","INTERNAL_GET_VIEW_WARNING_OR_ERROR","INTERNAL_INDEX_COLUMN_CARDINALITY","INTERNAL_INDEX_LENGTH","INTERNAL_IS_ENABLED_ROLE","INTERNAL_IS_MANDATORY_ROLE","INTERNAL_KEYS_DISABLED","INTERNAL_MAX_DATA_LENGTH","INTERNAL_TABLE_ROWS","INTERNAL_UPDATE_TIME","INTERVAL","IS","IS_FREE_LOCK","IS_IPV4","IS_IPV4_COMPAT","IS_IPV4_MAPPED","IS_IPV6","IS NOT","IS NOT NULL","IS NULL","IS_USED_LOCK","IS_UUID","ISNULL","JSON_ARRAY","JSON_ARRAY_APPEND","JSON_ARRAY_INSERT","JSON_ARRAYAGG","JSON_CONTAINS","JSON_CONTAINS_PATH","JSON_DEPTH","JSON_EXTRACT","JSON_INSERT","JSON_KEYS","JSON_LENGTH","JSON_MERGE","JSON_MERGE_PATCH","JSON_MERGE_PRESERVE","JSON_OBJECT","JSON_OBJECTAGG","JSON_OVERLAPS","JSON_PRETTY","JSON_QUOTE","JSON_REMOVE","JSON_REPLACE","JSON_SCHEMA_VALID","JSON_SCHEMA_VALIDATION_REPORT","JSON_SEARCH","JSON_SET","JSON_STORAGE_FREE","JSON_STORAGE_SIZE","JSON_TABLE","JSON_TYPE","JSON_UNQUOTE","JSON_VALID","JSON_VALUE","LAG","LAST_DAY","LAST_INSERT_ID","LAST_VALUE","LCASE","LEAD","LEAST","LEFT","LENGTH","LIKE","LINESTRING","LN","LOAD_FILE","LOCALTIME","LOCALTIMESTAMP","LOCATE","LOG","LOG10","LOG2","LOWER","LPAD","LTRIM","MAKE_SET","MAKEDATE","MAKETIME","MASTER_POS_WAIT","MATCH","MAX","MBRCONTAINS","MBRCOVEREDBY","MBRCOVERS","MBRDISJOINT","MBREQUALS","MBRINTERSECTS","MBROVERLAPS","MBRTOUCHES","MBRWITHIN","MD5","MEMBER OF","MICROSECOND","MID","MIN","MINUTE","MOD","MONTH","MONTHNAME","MULTILINESTRING","MULTIPOINT","MULTIPOLYGON","NAME_CONST","NOT","NOT IN","NOT LIKE","NOT REGEXP","NOW","NTH_VALUE","NTILE","NULLIF","OCT","OCTET_LENGTH","ORD","PERCENT_RANK","PERIOD_ADD","PERIOD_DIFF","PI","POINT","POLYGON","POSITION","POW","POWER","PS_CURRENT_THREAD_ID","PS_THREAD_ID","QUARTER","QUOTE","RADIANS","RAND","RANDOM_BYTES","RANK","REGEXP","REGEXP_INSTR","REGEXP_LIKE","REGEXP_REPLACE","REGEXP_SUBSTR","RELEASE_ALL_LOCKS","RELEASE_LOCK","REPEAT","REPLACE","REVERSE","RIGHT","RLIKE","ROLES_GRAPHML","ROUND","ROW_COUNT","ROW_NUMBER","RPAD","RTRIM","SCHEMA","SEC_TO_TIME","SECOND","SESSION_USER","SHA1","SHA2","SIGN","SIN","SLEEP","SOUNDEX","SOUNDS LIKE","SOURCE_POS_WAIT","SPACE","SQRT","ST_AREA","ST_ASBINARY","ST_ASGEOJSON","ST_ASTEXT","ST_BUFFER","ST_BUFFER_STRATEGY","ST_CENTROID","ST_COLLECT","ST_CONTAINS","ST_CONVEXHULL","ST_CROSSES","ST_DIFFERENCE","ST_DIMENSION","ST_DISJOINT","ST_DISTANCE","ST_DISTANCE_SPHERE","ST_ENDPOINT","ST_ENVELOPE","ST_EQUALS","ST_EXTERIORRING","ST_FRECHETDISTANCE","ST_GEOHASH","ST_GEOMCOLLFROMTEXT","ST_GEOMCOLLFROMWKB","ST_GEOMETRYN","ST_GEOMETRYTYPE","ST_GEOMFROMGEOJSON","ST_GEOMFROMTEXT","ST_GEOMFROMWKB","ST_HAUSDORFFDISTANCE","ST_INTERIORRINGN","ST_INTERSECTION","ST_INTERSECTS","ST_ISCLOSED","ST_ISEMPTY","ST_ISSIMPLE","ST_ISVALID","ST_LATFROMGEOHASH","ST_LATITUDE","ST_LENGTH","ST_LINEFROMTEXT","ST_LINEFROMWKB","ST_LINEINTERPOLATEPOINT","ST_LINEINTERPOLATEPOINTS","ST_LONGFROMGEOHASH","ST_LONGITUDE","ST_MAKEENVELOPE","ST_MLINEFROMTEXT","ST_MLINEFROMWKB","ST_MPOINTFROMTEXT","ST_MPOINTFROMWKB","ST_MPOLYFROMTEXT","ST_MPOLYFROMWKB","ST_NUMGEOMETRIES","ST_NUMINTERIORRING","ST_NUMPOINTS","ST_OVERLAPS","ST_POINTATDISTANCE","ST_POINTFROMGEOHASH","ST_POINTFROMTEXT","ST_POINTFROMWKB","ST_POINTN","ST_POLYFROMTEXT","ST_POLYFROMWKB","ST_SIMPLIFY","ST_SRID","ST_STARTPOINT","ST_SWAPXY","ST_SYMDIFFERENCE","ST_TOUCHES","ST_TRANSFORM","ST_UNION","ST_VALIDATE","ST_WITHIN","ST_X","ST_Y","STATEMENT_DIGEST","STATEMENT_DIGEST_TEXT","STD","STDDEV","STDDEV_POP","STDDEV_SAMP","STR_TO_DATE","STRCMP","SUBDATE","SUBSTR","SUBSTRING","SUBSTRING_INDEX","SUBTIME","SUM","SYSDATE","SYSTEM_USER","TAN","TIME","TIME_FORMAT","TIME_TO_SEC","TIMEDIFF","TIMESTAMP","TIMESTAMPADD","TIMESTAMPDIFF","TO_BASE64","TO_DAYS","TO_SECONDS","TRIM","TRUNCATE","UCASE","UNCOMPRESS","UNCOMPRESSED_LENGTH","UNHEX","UNIX_TIMESTAMP","UPDATEXML","UPPER","UTC_DATE","UTC_TIME","UTC_TIMESTAMP","UUID","UUID_SHORT","UUID_TO_BIN","VALIDATE_PASSWORD_STRENGTH","VALUES","VAR_POP","VAR_SAMP","VARIANCE","VERSION","WAIT_FOR_EXECUTED_GTID_SET","WAIT_UNTIL_SQL_THREAD_AFTER_GTIDS","WEEK","WEEKDAY","WEEKOFYEAR","WEIGHT_STRING","YEAR","YEARWEEK"]});var pwe,Twe,vj,Jy,Swe,Rwe,Awe,mwe,oR,Qy=G(()=>{vt();ff();Dj();xj();pwe=v(["SELECT [ALL | DISTINCT | DISTINCTROW]"]),Twe=v(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY","HAVING","WINDOW","PARTITION BY","ORDER BY","LIMIT","OFFSET","INSERT [LOW_PRIORITY | DELAYED | HIGH_PRIORITY] [IGNORE] [INTO]","REPLACE [LOW_PRIORITY | DELAYED] [INTO]","VALUES","ON DUPLICATE KEY UPDATE","SET"]),vj=v(["CREATE [TEMPORARY] TABLE [IF NOT EXISTS]"]),Jy=v(["CREATE [OR REPLACE] [SQL SECURITY DEFINER | SQL SECURITY INVOKER] VIEW [IF NOT EXISTS]","UPDATE [LOW_PRIORITY] [IGNORE]","DELETE [LOW_PRIORITY] [QUICK] [IGNORE] FROM","DROP [TEMPORARY] TABLE [IF EXISTS]","ALTER TABLE","ADD [COLUMN]","{CHANGE | MODIFY} [COLUMN]","DROP [COLUMN]","RENAME [TO | AS]","RENAME COLUMN","ALTER [COLUMN]","{SET | DROP} DEFAULT","TRUNCATE [TABLE]","ALTER DATABASE","ALTER EVENT","ALTER FUNCTION","ALTER INSTANCE","ALTER LOGFILE GROUP","ALTER PROCEDURE","ALTER RESOURCE GROUP","ALTER SERVER","ALTER TABLESPACE","ALTER USER","ALTER VIEW","ANALYZE TABLE","BINLOG","CACHE INDEX","CALL","CHANGE MASTER TO","CHANGE REPLICATION FILTER","CHANGE REPLICATION SOURCE TO","CHECK TABLE","CHECKSUM TABLE","CLONE","COMMIT","CREATE DATABASE","CREATE EVENT","CREATE FUNCTION","CREATE FUNCTION","CREATE INDEX","CREATE LOGFILE GROUP","CREATE PROCEDURE","CREATE RESOURCE GROUP","CREATE ROLE","CREATE SERVER","CREATE SPATIAL REFERENCE SYSTEM","CREATE TABLESPACE","CREATE TRIGGER","CREATE USER","DEALLOCATE PREPARE","DESCRIBE","DROP DATABASE","DROP EVENT","DROP FUNCTION","DROP FUNCTION","DROP INDEX","DROP LOGFILE GROUP","DROP PROCEDURE","DROP RESOURCE GROUP","DROP ROLE","DROP SERVER","DROP SPATIAL REFERENCE SYSTEM","DROP TABLESPACE","DROP TRIGGER","DROP USER","DROP VIEW","EXECUTE","EXPLAIN","FLUSH","GRANT","HANDLER","HELP","IMPORT TABLE","INSTALL COMPONENT","INSTALL PLUGIN","KILL","LOAD DATA","LOAD INDEX INTO CACHE","LOAD XML","LOCK INSTANCE FOR BACKUP","LOCK TABLES","MASTER_POS_WAIT","OPTIMIZE TABLE","PREPARE","PURGE BINARY LOGS","RELEASE SAVEPOINT","RENAME TABLE","RENAME USER","REPAIR TABLE","RESET","RESET MASTER","RESET PERSIST","RESET REPLICA","RESET SLAVE","RESTART","REVOKE","ROLLBACK","ROLLBACK TO SAVEPOINT","SAVEPOINT","SET CHARACTER SET","SET DEFAULT ROLE","SET NAMES","SET PASSWORD","SET RESOURCE GROUP","SET ROLE","SET TRANSACTION","SHOW","SHOW BINARY LOGS","SHOW BINLOG EVENTS","SHOW CHARACTER SET","SHOW COLLATION","SHOW COLUMNS","SHOW CREATE DATABASE","SHOW CREATE EVENT","SHOW CREATE FUNCTION","SHOW CREATE PROCEDURE","SHOW CREATE TABLE","SHOW CREATE TRIGGER","SHOW CREATE USER","SHOW CREATE VIEW","SHOW DATABASES","SHOW ENGINE","SHOW ENGINES","SHOW ERRORS","SHOW EVENTS","SHOW FUNCTION CODE","SHOW FUNCTION STATUS","SHOW GRANTS","SHOW INDEX","SHOW MASTER STATUS","SHOW OPEN TABLES","SHOW PLUGINS","SHOW PRIVILEGES","SHOW PROCEDURE CODE","SHOW PROCEDURE STATUS","SHOW PROCESSLIST","SHOW PROFILE","SHOW PROFILES","SHOW RELAYLOG EVENTS","SHOW REPLICA STATUS","SHOW REPLICAS","SHOW SLAVE","SHOW SLAVE HOSTS","SHOW STATUS","SHOW TABLE STATUS","SHOW TABLES","SHOW TRIGGERS","SHOW VARIABLES","SHOW WARNINGS","SHUTDOWN","SOURCE_POS_WAIT","START GROUP_REPLICATION","START REPLICA","START SLAVE","START TRANSACTION","STOP GROUP_REPLICATION","STOP REPLICA","STOP SLAVE","TABLE","UNINSTALL COMPONENT","UNINSTALL PLUGIN","UNLOCK INSTANCE","UNLOCK TABLES","USE","XA","ITERATE","LEAVE","LOOP","REPEAT","RETURN","WHILE"]),Swe=v(["UNION [ALL | DISTINCT]"]),Rwe=v(["JOIN","{LEFT | RIGHT} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL [INNER] JOIN","NATURAL {LEFT | RIGHT} [OUTER] JOIN","STRAIGHT_JOIN"]),Awe=v(["ON {UPDATE | DELETE} [SET NULL]","CHARACTER SET","{ROWS | RANGE} BETWEEN","IDENTIFIED BY"]),mwe=v([]),oR={name:"mysql",tokenizerOptions:{reservedSelect:pwe,reservedClauses:[...Twe,...vj,...Jy],reservedSetOperations:Swe,reservedJoins:Rwe,reservedKeywordPhrases:Awe,reservedDataTypePhrases:mwe,supportsXor:!0,reservedKeywords:wj,reservedDataTypes:Lj,reservedFunctionNames:Pj,stringTypes:['""-qq-bs',{quote:"''-qq-bs",prefixes:["N"]},{quote:"''-raw",prefixes:["B","X"],requirePrefix:!0}],identTypes:["``"],identChars:{first:"$",rest:"$",allowFirstCharNumber:!0},variableTypes:[{regex:"@@?[A-Za-z0-9_.$]+"},{quote:'""-qq-bs',prefixes:["@"],requirePrefix:!0},{quote:"''-qq-bs",prefixes:["@"],requirePrefix:!0},{quote:"``",prefixes:["@"],requirePrefix:!0}],paramTypes:{positional:!0},lineCommentTypes:["--","#"],operators:["%",":=","&","|","^","~","<<",">>","<=>","->","->>","&&","||","!","*.*"],postProcess:ao},formatOptions:{onelineClauses:[...vj,...Jy],tabularOnelineClauses:Jy}}});var Mj,Uj,Bj=G(()=>{Mj=["ADD","ALL","ALTER","ANALYZE","AND","ARRAY","AS","ASC","BETWEEN","BOTH","BY","CALL","CASCADE","CASE","CHANGE","CHECK","COLLATE","COLUMN","CONSTRAINT","CONTINUE","CONVERT","CREATE","CROSS","CURRENT_DATE","CURRENT_ROLE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURSOR","DATABASE","DATABASES","DAY_HOUR","DAY_MICROSECOND","DAY_MINUTE","DAY_SECOND","DEFAULT","DELAYED","DELETE","DESC","DESCRIBE","DISTINCT","DISTINCTROW","DIV","DOUBLE","DROP","DUAL","ELSE","ELSEIF","ENCLOSED","ESCAPED","EXCEPT","EXISTS","EXIT","EXPLAIN","FALSE","FETCH","FOR","FORCE","FOREIGN","FROM","FULLTEXT","GENERATED","GRANT","GROUP","GROUPS","HAVING","HIGH_PRIORITY","HOUR_MICROSECOND","HOUR_MINUTE","HOUR_SECOND","IF","IGNORE","ILIKE","IN","INDEX","INFILE","INNER","INOUT","INSERT","INTERSECT","INTERVAL","INTO","IS","ITERATE","JOIN","KEY","KEYS","KILL","LEADING","LEAVE","LEFT","LIKE","LIMIT","LINEAR","LINES","LOAD","LOCALTIME","LOCALTIMESTAMP","LOCK","LONG","LOW_PRIORITY","MATCH","MAXVALUE","MINUTE_MICROSECOND","MINUTE_SECOND","MOD","NATURAL","NOT","NO_WRITE_TO_BINLOG","NULL","OF","ON","OPTIMIZE","OPTION","OPTIONALLY","OR","ORDER","OUT","OUTER","OUTFILE","OVER","PARTITION","PRIMARY","PROCEDURE","RANGE","READ","RECURSIVE","REFERENCES","REGEXP","RELEASE","RENAME","REPEAT","REPLACE","REQUIRE","RESTRICT","REVOKE","RIGHT","RLIKE","ROW","ROWS","SECOND_MICROSECOND","SELECT","SET","SHOW","SPATIAL","SQL","SQLEXCEPTION","SQLSTATE","SQLWARNING","SQL_BIG_RESULT","SQL_CALC_FOUND_ROWS","SQL_SMALL_RESULT","SSL","STARTING","STATS_EXTENDED","STORED","STRAIGHT_JOIN","TABLE","TABLESAMPLE","TERMINATED","THEN","TO","TRAILING","TRIGGER","TRUE","TiDB_CURRENT_TSO","UNION","UNIQUE","UNLOCK","UNSIGNED","UNTIL","UPDATE","USAGE","USE","USING","UTC_DATE","UTC_TIME","UTC_TIMESTAMP","VALUES","VIRTUAL","WHEN","WHERE","WHILE","WINDOW","WITH","WRITE","XOR","YEAR_MONTH","ZEROFILL"],Uj=["BIGINT","BINARY","BIT","BLOB","BOOL","BOOLEAN","CHAR","CHARACTER","DATE","DATETIME","DEC","DECIMAL","DOUBLE PRECISION","DOUBLE","ENUM","FIXED","INT","INT1","INT2","INT3","INT4","INT8","INTEGER","LONGBLOB","LONGTEXT","MEDIUMBLOB","MEDIUMINT","MIDDLEINT","NATIONAL CHAR","NATIONAL VARCHAR","NUMERIC","PRECISION","SMALLINT","TEXT","TIME","TIMESTAMP","TINYBLOB","TINYINT","TINYTEXT","VARBINARY","VARCHAR","VARCHARACTER","VARYING","YEAR"]});var Fj,Hj=G(()=>{Fj=["ABS","ACOS","ADDDATE","ADDTIME","AES_DECRYPT","AES_ENCRYPT","ANY_VALUE","ASCII","ASIN","ATAN","ATAN2","AVG","BENCHMARK","BIN","BIN_TO_UUID","BIT_AND","BIT_COUNT","BIT_LENGTH","BIT_OR","BIT_XOR","BITAND","BITNEG","BITOR","BITXOR","CASE","CAST","CEIL","CEILING","CHAR_FUNC","CHAR_LENGTH","CHARACTER_LENGTH","CHARSET","COALESCE","COERCIBILITY","COLLATION","COMPRESS","CONCAT","CONCAT_WS","CONNECTION_ID","CONV","CONVERT","CONVERT_TZ","COS","COT","COUNT","CRC32","CUME_DIST","CURDATE","CURRENT_DATE","CURRENT_RESOURCE_GROUP","CURRENT_ROLE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURTIME","DATABASE","DATE","DATE_ADD","DATE_FORMAT","DATE_SUB","DATEDIFF","DAY","DAYNAME","DAYOFMONTH","DAYOFWEEK","DAYOFYEAR","DECODE","DEFAULT_FUNC","DEGREES","DENSE_RANK","DES_DECRYPT","DES_ENCRYPT","DIV","ELT","ENCODE","ENCRYPT","EQ","EXP","EXPORT_SET","EXTRACT","FIELD","FIND_IN_SET","FIRST_VALUE","FLOOR","FORMAT","FORMAT_BYTES","FORMAT_NANO_TIME","FOUND_ROWS","FROM_BASE64","FROM_DAYS","FROM_UNIXTIME","GE","GET_FORMAT","GET_LOCK","GETPARAM","GREATEST","GROUP_CONCAT","GROUPING","GT","HEX","HOUR","IF","IFNULL","ILIKE","INET6_ATON","INET6_NTOA","INET_ATON","INET_NTOA","INSERT_FUNC","INSTR","INTDIV","INTERVAL","IS_FREE_LOCK","IS_IPV4","IS_IPV4_COMPAT","IS_IPV4_MAPPED","IS_IPV6","IS_USED_LOCK","IS_UUID","ISFALSE","ISNULL","ISTRUE","JSON_ARRAY","JSON_ARRAYAGG","JSON_ARRAY_APPEND","JSON_ARRAY_INSERT","JSON_CONTAINS","JSON_CONTAINS_PATH","JSON_DEPTH","JSON_EXTRACT","JSON_INSERT","JSON_KEYS","JSON_LENGTH","JSON_MEMBEROF","JSON_MERGE","JSON_MERGE_PATCH","JSON_MERGE_PRESERVE","JSON_OBJECT","JSON_OBJECTAGG","JSON_OVERLAPS","JSON_PRETTY","JSON_QUOTE","JSON_REMOVE","JSON_REPLACE","JSON_SEARCH","JSON_SET","JSON_STORAGE_FREE","JSON_STORAGE_SIZE","JSON_TYPE","JSON_UNQUOTE","JSON_VALID","LAG","LAST_DAY","LAST_INSERT_ID","LAST_VALUE","LASTVAL","LCASE","LE","LEAD","LEAST","LEFT","LEFTSHIFT","LENGTH","LIKE","LN","LOAD_FILE","LOCALTIME","LOCALTIMESTAMP","LOCATE","LOG","LOG10","LOG2","LOWER","LPAD","LT","LTRIM","MAKE_SET","MAKEDATE","MAKETIME","MASTER_POS_WAIT","MAX","MD5","MICROSECOND","MID","MIN","MINUS","MINUTE","MOD","MONTH","MONTHNAME","MUL","NAME_CONST","NE","NEXTVAL","NOT","NOW","NTH_VALUE","NTILE","NULLEQ","OCT","OCTET_LENGTH","OLD_PASSWORD","ORD","PASSWORD_FUNC","PERCENT_RANK","PERIOD_ADD","PERIOD_DIFF","PI","PLUS","POSITION","POW","POWER","QUARTER","QUOTE","RADIANS","RAND","RANDOM_BYTES","RANK","REGEXP","REGEXP_INSTR","REGEXP_LIKE","REGEXP_REPLACE","REGEXP_SUBSTR","RELEASE_ALL_LOCKS","RELEASE_LOCK","REPEAT","REPLACE","REVERSE","RIGHT","RIGHTSHIFT","ROUND","ROW_COUNT","ROW_NUMBER","RPAD","RTRIM","SCHEMA","SEC_TO_TIME","SECOND","SESSION_USER","SETVAL","SETVAR","SHA","SHA1","SHA2","SIGN","SIN","SLEEP","SM3","SPACE","SQRT","STD","STDDEV","STDDEV_POP","STDDEV_SAMP","STR_TO_DATE","STRCMP","SUBDATE","SUBSTR","SUBSTRING","SUBSTRING_INDEX","SUBTIME","SUM","SYSDATE","SYSTEM_USER","TAN","TIDB_BOUNDED_STALENESS","TIDB_CURRENT_TSO","TIDB_DECODE_BINARY_PLAN","TIDB_DECODE_KEY","TIDB_DECODE_PLAN","TIDB_DECODE_SQL_DIGESTS","TIDB_ENCODE_SQL_DIGEST","TIDB_IS_DDL_OWNER","TIDB_PARSE_TSO","TIDB_PARSE_TSO_LOGICAL","TIDB_ROW_CHECKSUM","TIDB_SHARD","TIDB_VERSION","TIME","TIME_FORMAT","TIME_TO_SEC","TIMEDIFF","TIMESTAMP","TIMESTAMPADD","TIMESTAMPDIFF","TO_BASE64","TO_DAYS","TO_SECONDS","TRANSLATE","TRIM","TRUNCATE","UCASE","UNARYMINUS","UNCOMPRESS","UNCOMPRESSED_LENGTH","UNHEX","UNIX_TIMESTAMP","UPPER","UTC_DATE","UTC_TIME","UTC_TIMESTAMP","UUID","UUID_SHORT","UUID_TO_BIN","VALIDATE_PASSWORD_STRENGTH","VAR_POP","VAR_SAMP","VARIANCE","VERSION","VITESS_HASH","WEEK","WEEKDAY","WEEKOFYEAR","WEIGHT_STRING","YEAR","YEARWEEK"]});var gwe,Iwe,Gj,Zy,_we,Nwe,Owe,Cwe,aR,eb=G(()=>{vt();ff();Bj();Hj();gwe=v(["SELECT [ALL | DISTINCT | DISTINCTROW]"]),Iwe=v(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY","HAVING","WINDOW","PARTITION BY","ORDER BY","LIMIT","OFFSET","INSERT [LOW_PRIORITY | DELAYED | HIGH_PRIORITY] [IGNORE] [INTO]","REPLACE [LOW_PRIORITY | DELAYED] [INTO]","VALUES","ON DUPLICATE KEY UPDATE","SET"]),Gj=v(["CREATE [TEMPORARY] TABLE [IF NOT EXISTS]"]),Zy=v(["CREATE [OR REPLACE] [SQL SECURITY DEFINER | SQL SECURITY INVOKER] VIEW [IF NOT EXISTS]","UPDATE [LOW_PRIORITY] [IGNORE]","DELETE [LOW_PRIORITY] [QUICK] [IGNORE] FROM","DROP [TEMPORARY] TABLE [IF EXISTS]","ALTER TABLE","ADD [COLUMN]","{CHANGE | MODIFY} [COLUMN]","DROP [COLUMN]","RENAME [TO | AS]","RENAME COLUMN","ALTER [COLUMN]","{SET | DROP} DEFAULT","TRUNCATE [TABLE]","ALTER DATABASE","ALTER INSTANCE","ALTER RESOURCE GROUP","ALTER SEQUENCE","ALTER USER","ALTER VIEW","ANALYZE TABLE","CHECK TABLE","CHECKSUM TABLE","COMMIT","CREATE DATABASE","CREATE INDEX","CREATE RESOURCE GROUP","CREATE ROLE","CREATE SEQUENCE","CREATE USER","DEALLOCATE PREPARE","DESCRIBE","DROP DATABASE","DROP INDEX","DROP RESOURCE GROUP","DROP ROLE","DROP TABLESPACE","DROP USER","DROP VIEW","EXPLAIN","FLUSH","GRANT","IMPORT TABLE","INSTALL COMPONENT","INSTALL PLUGIN","KILL","LOAD DATA","LOCK INSTANCE FOR BACKUP","LOCK TABLES","OPTIMIZE TABLE","PREPARE","RELEASE SAVEPOINT","RENAME TABLE","RENAME USER","REPAIR TABLE","RESET","REVOKE","ROLLBACK","ROLLBACK TO SAVEPOINT","SAVEPOINT","SET CHARACTER SET","SET DEFAULT ROLE","SET NAMES","SET PASSWORD","SET RESOURCE GROUP","SET ROLE","SET TRANSACTION","SHOW","SHOW BINARY LOGS","SHOW BINLOG EVENTS","SHOW CHARACTER SET","SHOW COLLATION","SHOW COLUMNS","SHOW CREATE DATABASE","SHOW CREATE TABLE","SHOW CREATE USER","SHOW CREATE VIEW","SHOW DATABASES","SHOW ENGINE","SHOW ENGINES","SHOW ERRORS","SHOW EVENTS","SHOW GRANTS","SHOW INDEX","SHOW MASTER STATUS","SHOW OPEN TABLES","SHOW PLUGINS","SHOW PRIVILEGES","SHOW PROCESSLIST","SHOW PROFILE","SHOW PROFILES","SHOW STATUS","SHOW TABLE STATUS","SHOW TABLES","SHOW TRIGGERS","SHOW VARIABLES","SHOW WARNINGS","TABLE","UNINSTALL COMPONENT","UNINSTALL PLUGIN","UNLOCK INSTANCE","UNLOCK TABLES","USE"]),_we=v(["UNION [ALL | DISTINCT]"]),Nwe=v(["JOIN","{LEFT | RIGHT} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL [INNER] JOIN","NATURAL {LEFT | RIGHT} [OUTER] JOIN","STRAIGHT_JOIN"]),Owe=v(["ON {UPDATE | DELETE} [SET NULL]","CHARACTER SET","{ROWS | RANGE} BETWEEN","IDENTIFIED BY"]),Cwe=v([]),aR={name:"tidb",tokenizerOptions:{reservedSelect:gwe,reservedClauses:[...Iwe,...Gj,...Zy],reservedSetOperations:_we,reservedJoins:Nwe,reservedKeywordPhrases:Owe,reservedDataTypePhrases:Cwe,supportsXor:!0,reservedKeywords:Mj,reservedDataTypes:Uj,reservedFunctionNames:Fj,stringTypes:['""-qq-bs',{quote:"''-qq-bs",prefixes:["N"]},{quote:"''-raw",prefixes:["B","X"],requirePrefix:!0}],identTypes:["``"],identChars:{first:"$",rest:"$",allowFirstCharNumber:!0},variableTypes:[{regex:"@@?[A-Za-z0-9_.$]+"},{quote:'""-qq-bs',prefixes:["@"],requirePrefix:!0},{quote:"''-qq-bs",prefixes:["@"],requirePrefix:!0},{quote:"``",prefixes:["@"],requirePrefix:!0}],paramTypes:{positional:!0},lineCommentTypes:["--","#"],operators:["%",":=","&","|","^","~","<<",">>","<=>","->","->>","&&","||","!","*.*"],postProcess:ao},formatOptions:{onelineClauses:[...Gj,...Zy],tabularOnelineClauses:Zy}}});var Wj,$j=G(()=>{Wj=["ABORT","ABS","ACOS","ADVISOR","ARRAY_AGG","ARRAY_AGG","ARRAY_APPEND","ARRAY_AVG","ARRAY_BINARY_SEARCH","ARRAY_CONCAT","ARRAY_CONTAINS","ARRAY_COUNT","ARRAY_DISTINCT","ARRAY_EXCEPT","ARRAY_FLATTEN","ARRAY_IFNULL","ARRAY_INSERT","ARRAY_INTERSECT","ARRAY_LENGTH","ARRAY_MAX","ARRAY_MIN","ARRAY_MOVE","ARRAY_POSITION","ARRAY_PREPEND","ARRAY_PUT","ARRAY_RANGE","ARRAY_REMOVE","ARRAY_REPEAT","ARRAY_REPLACE","ARRAY_REVERSE","ARRAY_SORT","ARRAY_STAR","ARRAY_SUM","ARRAY_SYMDIFF","ARRAY_SYMDIFF1","ARRAY_SYMDIFFN","ARRAY_UNION","ASIN","ATAN","ATAN2","AVG","BASE64","BASE64_DECODE","BASE64_ENCODE","BITAND ","BITCLEAR ","BITNOT ","BITOR ","BITSET ","BITSHIFT ","BITTEST ","BITXOR ","CEIL","CLOCK_LOCAL","CLOCK_MILLIS","CLOCK_STR","CLOCK_TZ","CLOCK_UTC","COALESCE","CONCAT","CONCAT2","CONTAINS","CONTAINS_TOKEN","CONTAINS_TOKEN_LIKE","CONTAINS_TOKEN_REGEXP","COS","COUNT","COUNT","COUNTN","CUME_DIST","CURL","DATE_ADD_MILLIS","DATE_ADD_STR","DATE_DIFF_MILLIS","DATE_DIFF_STR","DATE_FORMAT_STR","DATE_PART_MILLIS","DATE_PART_STR","DATE_RANGE_MILLIS","DATE_RANGE_STR","DATE_TRUNC_MILLIS","DATE_TRUNC_STR","DECODE","DECODE_JSON","DEGREES","DENSE_RANK","DURATION_TO_STR","ENCODED_SIZE","ENCODE_JSON","EXP","FIRST_VALUE","FLOOR","GREATEST","HAS_TOKEN","IFINF","IFMISSING","IFMISSINGORNULL","IFNAN","IFNANORINF","IFNULL","INITCAP","ISARRAY","ISATOM","ISBITSET","ISBOOLEAN","ISNUMBER","ISOBJECT","ISSTRING","LAG","LAST_VALUE","LEAD","LEAST","LENGTH","LN","LOG","LOWER","LTRIM","MAX","MEAN","MEDIAN","META","MILLIS","MILLIS_TO_LOCAL","MILLIS_TO_STR","MILLIS_TO_TZ","MILLIS_TO_UTC","MILLIS_TO_ZONE_NAME","MIN","MISSINGIF","NANIF","NEGINFIF","NOW_LOCAL","NOW_MILLIS","NOW_STR","NOW_TZ","NOW_UTC","NTH_VALUE","NTILE","NULLIF","NVL","NVL2","OBJECT_ADD","OBJECT_CONCAT","OBJECT_INNER_PAIRS","OBJECT_INNER_VALUES","OBJECT_LENGTH","OBJECT_NAMES","OBJECT_PAIRS","OBJECT_PUT","OBJECT_REMOVE","OBJECT_RENAME","OBJECT_REPLACE","OBJECT_UNWRAP","OBJECT_VALUES","PAIRS","PERCENT_RANK","PI","POLY_LENGTH","POSINFIF","POSITION","POWER","RADIANS","RANDOM","RANK","RATIO_TO_REPORT","REGEXP_CONTAINS","REGEXP_LIKE","REGEXP_MATCHES","REGEXP_POSITION","REGEXP_REPLACE","REGEXP_SPLIT","REGEX_CONTAINS","REGEX_LIKE","REGEX_MATCHES","REGEX_POSITION","REGEX_REPLACE","REGEX_SPLIT","REPEAT","REPLACE","REVERSE","ROUND","ROW_NUMBER","RTRIM","SEARCH","SEARCH_META","SEARCH_SCORE","SIGN","SIN","SPLIT","SQRT","STDDEV","STDDEV_POP","STDDEV_SAMP","STR_TO_DURATION","STR_TO_MILLIS","STR_TO_TZ","STR_TO_UTC","STR_TO_ZONE_NAME","SUBSTR","SUFFIXES","SUM","TAN","TITLE","TOARRAY","TOATOM","TOBOOLEAN","TOKENS","TOKENS","TONUMBER","TOOBJECT","TOSTRING","TRIM","TRUNC","UPPER","UUID","VARIANCE","VARIANCE_POP","VARIANCE_SAMP","VAR_POP","VAR_SAMP","WEEKDAY_MILLIS","WEEKDAY_STR","CAST"]});var kj,Yj,Vj=G(()=>{kj=["ADVISE","ALL","ALTER","ANALYZE","AND","ANY","ARRAY","AS","ASC","AT","BEGIN","BETWEEN","BINARY","BOOLEAN","BREAK","BUCKET","BUILD","BY","CALL","CASE","CAST","CLUSTER","COLLATE","COLLECTION","COMMIT","COMMITTED","CONNECT","CONTINUE","CORRELATED","COVER","CREATE","CURRENT","DATABASE","DATASET","DATASTORE","DECLARE","DECREMENT","DELETE","DERIVED","DESC","DESCRIBE","DISTINCT","DO","DROP","EACH","ELEMENT","ELSE","END","EVERY","EXCEPT","EXCLUDE","EXECUTE","EXISTS","EXPLAIN","FALSE","FETCH","FILTER","FIRST","FLATTEN","FLUSH","FOLLOWING","FOR","FORCE","FROM","FTS","FUNCTION","GOLANG","GRANT","GROUP","GROUPS","GSI","HASH","HAVING","IF","IGNORE","ILIKE","IN","INCLUDE","INCREMENT","INDEX","INFER","INLINE","INNER","INSERT","INTERSECT","INTO","IS","ISOLATION","JAVASCRIPT","JOIN","KEY","KEYS","KEYSPACE","KNOWN","LANGUAGE","LAST","LEFT","LET","LETTING","LEVEL","LIKE","LIMIT","LSM","MAP","MAPPING","MATCHED","MATERIALIZED","MERGE","MINUS","MISSING","NAMESPACE","NEST","NL","NO","NOT","NTH_VALUE","NULL","NULLS","NUMBER","OBJECT","OFFSET","ON","OPTION","OPTIONS","OR","ORDER","OTHERS","OUTER","OVER","PARSE","PARTITION","PASSWORD","PATH","POOL","PRECEDING","PREPARE","PRIMARY","PRIVATE","PRIVILEGE","PROBE","PROCEDURE","PUBLIC","RANGE","RAW","REALM","REDUCE","RENAME","RESPECT","RETURN","RETURNING","REVOKE","RIGHT","ROLE","ROLLBACK","ROW","ROWS","SATISFIES","SAVEPOINT","SCHEMA","SCOPE","SELECT","SELF","SEMI","SET","SHOW","SOME","START","STATISTICS","STRING","SYSTEM","THEN","TIES","TO","TRAN","TRANSACTION","TRIGGER","TRUE","TRUNCATE","UNBOUNDED","UNDER","UNION","UNIQUE","UNKNOWN","UNNEST","UNSET","UPDATE","UPSERT","USE","USER","USING","VALIDATE","VALUE","VALUED","VALUES","VIA","VIEW","WHEN","WHERE","WHILE","WINDOW","WITH","WITHIN","WORK","XOR"],Yj=[]});var ywe,bwe,qj,wwe,Lwe,Dwe,Pwe,lR,tb=G(()=>{vt();$j();Vj();ywe=v(["SELECT [ALL | DISTINCT]"]),bwe=v(["WITH","FROM","WHERE","GROUP BY","HAVING","WINDOW","PARTITION BY","ORDER BY","LIMIT","OFFSET","INSERT INTO","VALUES","SET","MERGE INTO","WHEN [NOT] MATCHED THEN","UPDATE SET","INSERT","NEST","UNNEST","RETURNING"]),qj=v(["UPDATE","DELETE FROM","SET SCHEMA","ADVISE","ALTER INDEX","BEGIN TRANSACTION","BUILD INDEX","COMMIT TRANSACTION","CREATE COLLECTION","CREATE FUNCTION","CREATE INDEX","CREATE PRIMARY INDEX","CREATE SCOPE","DROP COLLECTION","DROP FUNCTION","DROP INDEX","DROP PRIMARY INDEX","DROP SCOPE","EXECUTE","EXECUTE FUNCTION","EXPLAIN","GRANT","INFER","PREPARE","REVOKE","ROLLBACK TRANSACTION","SAVEPOINT","SET TRANSACTION","UPDATE STATISTICS","UPSERT","LET","SET CURRENT SCHEMA","SHOW","USE [PRIMARY] KEYS"]),wwe=v(["UNION [ALL]","EXCEPT [ALL]","INTERSECT [ALL]"]),Lwe=v(["JOIN","{LEFT | RIGHT} [OUTER] JOIN","INNER JOIN"]),Dwe=v(["{ROWS | RANGE | GROUPS} BETWEEN"]),Pwe=v([]),lR={name:"n1ql",tokenizerOptions:{reservedSelect:ywe,reservedClauses:[...bwe,...qj],reservedSetOperations:wwe,reservedJoins:Lwe,reservedKeywordPhrases:Dwe,reservedDataTypePhrases:Pwe,supportsXor:!0,reservedKeywords:kj,reservedDataTypes:Yj,reservedFunctionNames:Wj,stringTypes:['""-bs',"''-bs"],identTypes:["``"],extraParens:["[]","{}"],paramTypes:{positional:!0,numbered:["$"],named:["$"]},lineCommentTypes:["#","--"],operators:["%","==",":","||"]},formatOptions:{onelineClauses:qj}}});var Xj,zj,jj=G(()=>{Xj=["ADD","AGENT","AGGREGATE","ALL","ALTER","AND","ANY","ARROW","AS","ASC","AT","ATTRIBUTE","AUTHID","AVG","BEGIN","BETWEEN","BLOCK","BODY","BOTH","BOUND","BULK","BY","BYTE","CALL","CALLING","CASCADE","CASE","CHARSET","CHARSETFORM","CHARSETID","CHECK","CLOSE","CLUSTER","CLUSTERS","COLAUTH","COLLECT","COLUMNS","COMMENT","COMMIT","COMMITTED","COMPILED","COMPRESS","CONNECT","CONSTANT","CONSTRUCTOR","CONTEXT","CONVERT","COUNT","CRASH","CREATE","CURRENT","CURSOR","CUSTOMDATUM","DANGLING","DATA","DAY","DECLARE","DEFAULT","DEFINE","DELETE","DESC","DETERMINISTIC","DISTINCT","DROP","DURATION","ELEMENT","ELSE","ELSIF","EMPTY","END","ESCAPE","EXCEPT","EXCEPTION","EXCEPTIONS","EXCLUSIVE","EXECUTE","EXISTS","EXIT","EXTERNAL","FETCH","FINAL","FIXED","FOR","FORALL","FORCE","FORM","FROM","FUNCTION","GENERAL","GOTO","GRANT","GROUP","HASH","HAVING","HEAP","HIDDEN","HOUR","IDENTIFIED","IF","IMMEDIATE","IN","INCLUDING","INDEX","INDEXES","INDICATOR","INDICES","INFINITE","INSERT","INSTANTIABLE","INTERFACE","INTERSECT","INTERVAL","INTO","INVALIDATE","IS","ISOLATION","JAVA","LANGUAGE","LARGE","LEADING","LENGTH","LEVEL","LIBRARY","LIKE","LIKE2","LIKE4","LIKEC","LIMIT","LIMITED","LOCAL","LOCK","LOOP","MAP","MAX","MAXLEN","MEMBER","MERGE","MIN","MINUS","MINUTE","MOD","MODE","MODIFY","MONTH","MULTISET","NAME","NAN","NATIONAL","NATIVE","NEW","NOCOMPRESS","NOCOPY","NOT","NOWAIT","NULL","OBJECT","OCICOLL","OCIDATE","OCIDATETIME","OCIDURATION","OCIINTERVAL","OCILOBLOCATOR","OCINUMBER","OCIRAW","OCIREF","OCIREFCURSOR","OCIROWID","OCISTRING","OCITYPE","OF","ON","ONLY","OPAQUE","OPEN","OPERATOR","OPTION","OR","ORACLE","ORADATA","ORDER","OVERLAPS","ORGANIZATION","ORLANY","ORLVARY","OTHERS","OUT","OVERRIDING","PACKAGE","PARALLEL_ENABLE","PARAMETER","PARAMETERS","PARTITION","PASCAL","PIPE","PIPELINED","PRAGMA","PRIOR","PRIVATE","PROCEDURE","PUBLIC","RAISE","RANGE","READ","RECORD","REF","REFERENCE","REM","REMAINDER","RENAME","RESOURCE","RESULT","RETURN","RETURNING","REVERSE","REVOKE","ROLLBACK","ROW","SAMPLE","SAVE","SAVEPOINT","SB1","SB2","SB4","SECOND","SEGMENT","SELECT","SELF","SEPARATE","SEQUENCE","SERIALIZABLE","SET","SHARE","SHORT","SIZE","SIZE_T","SOME","SPARSE","SQL","SQLCODE","SQLDATA","SQLNAME","SQLSTATE","STANDARD","START","STATIC","STDDEV","STORED","STRING","STRUCT","STYLE","SUBMULTISET","SUBPARTITION","SUBSTITUTABLE","SUBTYPE","SUM","SYNONYM","TABAUTH","TABLE","TDO","THE","THEN","TIME","TIMEZONE_ABBR","TIMEZONE_HOUR","TIMEZONE_MINUTE","TIMEZONE_REGION","TO","TRAILING","TRANSAC","TRANSACTIONAL","TRUSTED","TYPE","UB1","UB2","UB4","UNDER","UNION","UNIQUE","UNSIGNED","UNTRUSTED","UPDATE","USE","USING","VALIST","VALUE","VALUES","VARIABLE","VARIANCE","VARRAY","VIEW","VIEWS","VOID","WHEN","WHERE","WHILE","WITH","WORK","WRAPPED","WRITE","YEAR","ZONE"],zj=["ARRAY","BFILE_BASE","BINARY","BLOB_BASE","CHAR VARYING","CHAR_BASE","CHAR","CHARACTER VARYING","CHARACTER","CLOB_BASE","DATE_BASE","DATE","DECIMAL","DOUBLE","FLOAT","INT","INTERVAL DAY","INTERVAL YEAR","LONG","NATIONAL CHAR VARYING","NATIONAL CHAR","NATIONAL CHARACTER VARYING","NATIONAL CHARACTER","NCHAR VARYING","NCHAR","NCHAR","NUMBER_BASE","NUMBER","NUMBERIC","NVARCHAR","PRECISION","RAW","TIMESTAMP","UROWID","VARCHAR","VARCHAR2"]});var Kj,Jj=G(()=>{Kj=["ABS","ACOS","ASIN","ATAN","ATAN2","BITAND","CEIL","COS","COSH","EXP","FLOOR","LN","LOG","MOD","NANVL","POWER","REMAINDER","ROUND","SIGN","SIN","SINH","SQRT","TAN","TANH","TRUNC","WIDTH_BUCKET","CHR","CONCAT","INITCAP","LOWER","LPAD","LTRIM","NLS_INITCAP","NLS_LOWER","NLSSORT","NLS_UPPER","REGEXP_REPLACE","REGEXP_SUBSTR","REPLACE","RPAD","RTRIM","SOUNDEX","SUBSTR","TRANSLATE","TREAT","TRIM","UPPER","NLS_CHARSET_DECL_LEN","NLS_CHARSET_ID","NLS_CHARSET_NAME","ASCII","INSTR","LENGTH","REGEXP_INSTR","ADD_MONTHS","CURRENT_DATE","CURRENT_TIMESTAMP","DBTIMEZONE","EXTRACT","FROM_TZ","LAST_DAY","LOCALTIMESTAMP","MONTHS_BETWEEN","NEW_TIME","NEXT_DAY","NUMTODSINTERVAL","NUMTOYMINTERVAL","ROUND","SESSIONTIMEZONE","SYS_EXTRACT_UTC","SYSDATE","SYSTIMESTAMP","TO_CHAR","TO_TIMESTAMP","TO_TIMESTAMP_TZ","TO_DSINTERVAL","TO_YMINTERVAL","TRUNC","TZ_OFFSET","GREATEST","LEAST","ASCIISTR","BIN_TO_NUM","CAST","CHARTOROWID","COMPOSE","CONVERT","DECOMPOSE","HEXTORAW","NUMTODSINTERVAL","NUMTOYMINTERVAL","RAWTOHEX","RAWTONHEX","ROWIDTOCHAR","ROWIDTONCHAR","SCN_TO_TIMESTAMP","TIMESTAMP_TO_SCN","TO_BINARY_DOUBLE","TO_BINARY_FLOAT","TO_CHAR","TO_CLOB","TO_DATE","TO_DSINTERVAL","TO_LOB","TO_MULTI_BYTE","TO_NCHAR","TO_NCLOB","TO_NUMBER","TO_DSINTERVAL","TO_SINGLE_BYTE","TO_TIMESTAMP","TO_TIMESTAMP_TZ","TO_YMINTERVAL","TO_YMINTERVAL","TRANSLATE","UNISTR","BFILENAME","EMPTY_BLOB,","EMPTY_CLOB","CARDINALITY","COLLECT","POWERMULTISET","POWERMULTISET_BY_CARDINALITY","SET","SYS_CONNECT_BY_PATH","CLUSTER_ID","CLUSTER_PROBABILITY","CLUSTER_SET","FEATURE_ID","FEATURE_SET","FEATURE_VALUE","PREDICTION","PREDICTION_COST","PREDICTION_DETAILS","PREDICTION_PROBABILITY","PREDICTION_SET","APPENDCHILDXML","DELETEXML","DEPTH","EXTRACT","EXISTSNODE","EXTRACTVALUE","INSERTCHILDXML","INSERTXMLBEFORE","PATH","SYS_DBURIGEN","SYS_XMLAGG","SYS_XMLGEN","UPDATEXML","XMLAGG","XMLCDATA","XMLCOLATTVAL","XMLCOMMENT","XMLCONCAT","XMLFOREST","XMLPARSE","XMLPI","XMLQUERY","XMLROOT","XMLSEQUENCE","XMLSERIALIZE","XMLTABLE","XMLTRANSFORM","DECODE","DUMP","ORA_HASH","VSIZE","COALESCE","LNNVL","NULLIF","NVL","NVL2","SYS_CONTEXT","SYS_GUID","SYS_TYPEID","UID","USER","USERENV","AVG","COLLECT","CORR","CORR_S","CORR_K","COUNT","COVAR_POP","COVAR_SAMP","CUME_DIST","DENSE_RANK","FIRST","GROUP_ID","GROUPING","GROUPING_ID","LAST","MAX","MEDIAN","MIN","PERCENTILE_CONT","PERCENTILE_DISC","PERCENT_RANK","RANK","REGR_SLOPE","REGR_INTERCEPT","REGR_COUNT","REGR_R2","REGR_AVGX","REGR_AVGY","REGR_SXX","REGR_SYY","REGR_SXY","STATS_BINOMIAL_TEST","STATS_CROSSTAB","STATS_F_TEST","STATS_KS_TEST","STATS_MODE","STATS_MW_TEST","STATS_ONE_WAY_ANOVA","STATS_T_TEST_ONE","STATS_T_TEST_PAIRED","STATS_T_TEST_INDEP","STATS_T_TEST_INDEPU","STATS_WSR_TEST","STDDEV","STDDEV_POP","STDDEV_SAMP","SUM","VAR_POP","VAR_SAMP","VARIANCE","FIRST_VALUE","LAG","LAST_VALUE","LEAD","NTILE","RATIO_TO_REPORT","ROW_NUMBER","DEREF","MAKE_REF","REF","REFTOHEX","VALUE","CV","ITERATION_NUMBER","PRESENTNNV","PRESENTV","PREVIOUS"]});function Hwe(t){let e=Di;return t.map(n=>zr.SET(n)&&zr.BY(e)?Object.assign(Object.assign({},n),{type:k.RESERVED_KEYWORD}):(ZS(n.type)&&(e=n),n))}var xwe,vwe,Qj,nb,Mwe,Uwe,Bwe,Fwe,cR,rb=G(()=>{vt();yr();jj();Jj();xwe=v(["SELECT [ALL | DISTINCT | UNIQUE]"]),vwe=v(["WITH","FROM","WHERE","GROUP BY","HAVING","PARTITION BY","ORDER [SIBLINGS] BY","OFFSET","FETCH {FIRST | NEXT}","FOR UPDATE [OF]","INSERT [INTO | ALL INTO]","VALUES","SET","MERGE [INTO]","WHEN [NOT] MATCHED [THEN]","UPDATE SET","RETURNING"]),Qj=v(["CREATE [GLOBAL TEMPORARY | PRIVATE TEMPORARY | SHARDED | DUPLICATED | IMMUTABLE BLOCKCHAIN | BLOCKCHAIN | IMMUTABLE] TABLE"]),nb=v(["CREATE [OR REPLACE] [NO FORCE | FORCE] [EDITIONING | EDITIONABLE | EDITIONABLE EDITIONING | NONEDITIONABLE] VIEW","CREATE MATERIALIZED VIEW","UPDATE [ONLY]","DELETE FROM [ONLY]","DROP TABLE","ALTER TABLE","ADD","DROP {COLUMN | UNUSED COLUMNS | COLUMNS CONTINUE}","MODIFY","RENAME TO","RENAME COLUMN","TRUNCATE TABLE","SET SCHEMA","BEGIN","CONNECT BY","DECLARE","EXCEPT","EXCEPTION","LOOP","START WITH"]),Mwe=v(["UNION [ALL]","MINUS","INTERSECT"]),Uwe=v(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL [INNER] JOIN","NATURAL {LEFT | RIGHT | FULL} [OUTER] JOIN","{CROSS | OUTER} APPLY"]),Bwe=v(["ON {UPDATE | DELETE} [SET NULL]","ON COMMIT","{ROWS | RANGE} BETWEEN"]),Fwe=v([]),cR={name:"plsql",tokenizerOptions:{reservedSelect:xwe,reservedClauses:[...vwe,...Qj,...nb],reservedSetOperations:Mwe,reservedJoins:Uwe,reservedKeywordPhrases:Bwe,reservedDataTypePhrases:Fwe,supportsXor:!0,reservedKeywords:Xj,reservedDataTypes:zj,reservedFunctionNames:Kj,stringTypes:[{quote:"''-qq",prefixes:["N"]},{quote:"q''",prefixes:["N"]}],identTypes:['""-qq'],identChars:{rest:"$#"},variableTypes:[{regex:"&{1,2}[A-Za-z][A-Za-z0-9_$#]*"}],paramTypes:{numbered:[":"],named:[":"]},operators:["**",":=","%","~=","^=",">>","<<","=>","@","||"],postProcess:Hwe},formatOptions:{alwaysDenseOperators:["@"],onelineClauses:[...Qj,...nb],tabularOnelineClauses:nb}}});var Zj,e3=G(()=>{Zj=["ABS","ACOS","ACOSD","ACOSH","ASIN","ASIND","ASINH","ATAN","ATAN2","ATAN2D","ATAND","ATANH","CBRT","CEIL","CEILING","COS","COSD","COSH","COT","COTD","DEGREES","DIV","EXP","FACTORIAL","FLOOR","GCD","LCM","LN","LOG","LOG10","MIN_SCALE","MOD","PI","POWER","RADIANS","RANDOM","ROUND","SCALE","SETSEED","SIGN","SIN","SIND","SINH","SQRT","TAN","TAND","TANH","TRIM_SCALE","TRUNC","WIDTH_BUCKET","ABS","ASCII","BIT_LENGTH","BTRIM","CHARACTER_LENGTH","CHAR_LENGTH","CHR","CONCAT","CONCAT_WS","FORMAT","INITCAP","LEFT","LENGTH","LOWER","LPAD","LTRIM","MD5","NORMALIZE","OCTET_LENGTH","OVERLAY","PARSE_IDENT","PG_CLIENT_ENCODING","POSITION","QUOTE_IDENT","QUOTE_LITERAL","QUOTE_NULLABLE","REGEXP_MATCH","REGEXP_MATCHES","REGEXP_REPLACE","REGEXP_SPLIT_TO_ARRAY","REGEXP_SPLIT_TO_TABLE","REPEAT","REPLACE","REVERSE","RIGHT","RPAD","RTRIM","SPLIT_PART","SPRINTF","STARTS_WITH","STRING_AGG","STRING_TO_ARRAY","STRING_TO_TABLE","STRPOS","SUBSTR","SUBSTRING","TO_ASCII","TO_HEX","TRANSLATE","TRIM","UNISTR","UPPER","BIT_COUNT","BIT_LENGTH","BTRIM","CONVERT","CONVERT_FROM","CONVERT_TO","DECODE","ENCODE","GET_BIT","GET_BYTE","LENGTH","LTRIM","MD5","OCTET_LENGTH","OVERLAY","POSITION","RTRIM","SET_BIT","SET_BYTE","SHA224","SHA256","SHA384","SHA512","STRING_AGG","SUBSTR","SUBSTRING","TRIM","BIT_COUNT","BIT_LENGTH","GET_BIT","LENGTH","OCTET_LENGTH","OVERLAY","POSITION","SET_BIT","SUBSTRING","REGEXP_MATCH","REGEXP_MATCHES","REGEXP_REPLACE","REGEXP_SPLIT_TO_ARRAY","REGEXP_SPLIT_TO_TABLE","TO_CHAR","TO_DATE","TO_NUMBER","TO_TIMESTAMP","CLOCK_TIMESTAMP","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","DATE_BIN","DATE_PART","DATE_TRUNC","EXTRACT","ISFINITE","JUSTIFY_DAYS","JUSTIFY_HOURS","JUSTIFY_INTERVAL","LOCALTIME","LOCALTIMESTAMP","MAKE_DATE","MAKE_INTERVAL","MAKE_TIME","MAKE_TIMESTAMP","MAKE_TIMESTAMPTZ","NOW","PG_SLEEP","PG_SLEEP_FOR","PG_SLEEP_UNTIL","STATEMENT_TIMESTAMP","TIMEOFDAY","TO_TIMESTAMP","TRANSACTION_TIMESTAMP","ENUM_FIRST","ENUM_LAST","ENUM_RANGE","AREA","BOUND_BOX","BOX","CENTER","CIRCLE","DIAGONAL","DIAMETER","HEIGHT","ISCLOSED","ISOPEN","LENGTH","LINE","LSEG","NPOINTS","PATH","PCLOSE","POINT","POLYGON","POPEN","RADIUS","SLOPE","WIDTH","ABBREV","BROADCAST","FAMILY","HOST","HOSTMASK","INET_MERGE","INET_SAME_FAMILY","MACADDR8_SET7BIT","MASKLEN","NETMASK","NETWORK","SET_MASKLEN","TRUNC","ARRAY_TO_TSVECTOR","GET_CURRENT_TS_CONFIG","JSONB_TO_TSVECTOR","JSON_TO_TSVECTOR","LENGTH","NUMNODE","PHRASETO_TSQUERY","PLAINTO_TSQUERY","QUERYTREE","SETWEIGHT","STRIP","TO_TSQUERY","TO_TSVECTOR","TSQUERY_PHRASE","TSVECTOR_TO_ARRAY","TS_DEBUG","TS_DELETE","TS_FILTER","TS_HEADLINE","TS_LEXIZE","TS_PARSE","TS_RANK","TS_RANK_CD","TS_REWRITE","TS_STAT","TS_TOKEN_TYPE","WEBSEARCH_TO_TSQUERY","GEN_RANDOM_UUID","UUIDV4","UUIDV7","UUID_EXTRACT_TIMESTAMP","UUID_EXTRACT_VERSION","CURSOR_TO_XML","CURSOR_TO_XMLSCHEMA","DATABASE_TO_XML","DATABASE_TO_XMLSCHEMA","DATABASE_TO_XML_AND_XMLSCHEMA","NEXTVAL","QUERY_TO_XML","QUERY_TO_XMLSCHEMA","QUERY_TO_XML_AND_XMLSCHEMA","SCHEMA_TO_XML","SCHEMA_TO_XMLSCHEMA","SCHEMA_TO_XML_AND_XMLSCHEMA","STRING","TABLE_TO_XML","TABLE_TO_XMLSCHEMA","TABLE_TO_XML_AND_XMLSCHEMA","XMLAGG","XMLCOMMENT","XMLCONCAT","XMLELEMENT","XMLEXISTS","XMLFOREST","XMLPARSE","XMLPI","XMLROOT","XMLSERIALIZE","XMLTABLE","XML_IS_WELL_FORMED","XML_IS_WELL_FORMED_CONTENT","XML_IS_WELL_FORMED_DOCUMENT","XPATH","XPATH_EXISTS","ARRAY_TO_JSON","JSONB_AGG","JSONB_ARRAY_ELEMENTS","JSONB_ARRAY_ELEMENTS_TEXT","JSONB_ARRAY_LENGTH","JSONB_BUILD_ARRAY","JSONB_BUILD_OBJECT","JSONB_EACH","JSONB_EACH_TEXT","JSONB_EXTRACT_PATH","JSONB_EXTRACT_PATH_TEXT","JSONB_INSERT","JSONB_OBJECT","JSONB_OBJECT_AGG","JSONB_OBJECT_KEYS","JSONB_PATH_EXISTS","JSONB_PATH_EXISTS_TZ","JSONB_PATH_MATCH","JSONB_PATH_MATCH_TZ","JSONB_PATH_QUERY","JSONB_PATH_QUERY_ARRAY","JSONB_PATH_QUERY_ARRAY_TZ","JSONB_PATH_QUERY_FIRST","JSONB_PATH_QUERY_FIRST_TZ","JSONB_PATH_QUERY_TZ","JSONB_POPULATE_RECORD","JSONB_POPULATE_RECORDSET","JSONB_PRETTY","JSONB_SET","JSONB_SET_LAX","JSONB_STRIP_NULLS","JSONB_TO_RECORD","JSONB_TO_RECORDSET","JSONB_TYPEOF","JSON_AGG","JSON_ARRAY_ELEMENTS","JSON_ARRAY_ELEMENTS_TEXT","JSON_ARRAY_LENGTH","JSON_BUILD_ARRAY","JSON_BUILD_OBJECT","JSON_EACH","JSON_EACH_TEXT","JSON_EXTRACT_PATH","JSON_EXTRACT_PATH_TEXT","JSON_OBJECT","JSON_OBJECT_AGG","JSON_OBJECT_KEYS","JSON_POPULATE_RECORD","JSON_POPULATE_RECORDSET","JSON_STRIP_NULLS","JSON_TO_RECORD","JSON_TO_RECORDSET","JSON_TYPEOF","ROW_TO_JSON","TO_JSON","TO_JSONB","TO_TIMESTAMP","CURRVAL","LASTVAL","NEXTVAL","SETVAL","COALESCE","GREATEST","LEAST","NULLIF","ARRAY_AGG","ARRAY_APPEND","ARRAY_CAT","ARRAY_DIMS","ARRAY_FILL","ARRAY_LENGTH","ARRAY_LOWER","ARRAY_NDIMS","ARRAY_POSITION","ARRAY_POSITIONS","ARRAY_PREPEND","ARRAY_REMOVE","ARRAY_REPLACE","ARRAY_TO_STRING","ARRAY_UPPER","CARDINALITY","STRING_TO_ARRAY","TRIM_ARRAY","UNNEST","ISEMPTY","LOWER","LOWER_INC","LOWER_INF","MULTIRANGE","RANGE_MERGE","UPPER","UPPER_INC","UPPER_INF","ARRAY_AGG","AVG","BIT_AND","BIT_OR","BIT_XOR","BOOL_AND","BOOL_OR","COALESCE","CORR","COUNT","COVAR_POP","COVAR_SAMP","CUME_DIST","DENSE_RANK","EVERY","GROUPING","JSONB_AGG","JSONB_OBJECT_AGG","JSON_AGG","JSON_OBJECT_AGG","MAX","MIN","MODE","PERCENTILE_CONT","PERCENTILE_DISC","PERCENT_RANK","RANGE_AGG","RANGE_INTERSECT_AGG","RANK","REGR_AVGX","REGR_AVGY","REGR_COUNT","REGR_INTERCEPT","REGR_R2","REGR_SLOPE","REGR_SXX","REGR_SXY","REGR_SYY","STDDEV","STDDEV_POP","STDDEV_SAMP","STRING_AGG","SUM","TO_JSON","TO_JSONB","VARIANCE","VAR_POP","VAR_SAMP","XMLAGG","CUME_DIST","DENSE_RANK","FIRST_VALUE","LAG","LAST_VALUE","LEAD","NTH_VALUE","NTILE","PERCENT_RANK","RANK","ROW_NUMBER","GENERATE_SERIES","GENERATE_SUBSCRIPTS","ACLDEFAULT","ACLEXPLODE","COL_DESCRIPTION","CURRENT_CATALOG","CURRENT_DATABASE","CURRENT_QUERY","CURRENT_ROLE","CURRENT_SCHEMA","CURRENT_SCHEMAS","CURRENT_USER","FORMAT_TYPE","HAS_ANY_COLUMN_PRIVILEGE","HAS_COLUMN_PRIVILEGE","HAS_DATABASE_PRIVILEGE","HAS_FOREIGN_DATA_WRAPPER_PRIVILEGE","HAS_FUNCTION_PRIVILEGE","HAS_LANGUAGE_PRIVILEGE","HAS_SCHEMA_PRIVILEGE","HAS_SEQUENCE_PRIVILEGE","HAS_SERVER_PRIVILEGE","HAS_TABLESPACE_PRIVILEGE","HAS_TABLE_PRIVILEGE","HAS_TYPE_PRIVILEGE","INET_CLIENT_ADDR","INET_CLIENT_PORT","INET_SERVER_ADDR","INET_SERVER_PORT","MAKEACLITEM","OBJ_DESCRIPTION","PG_BACKEND_PID","PG_BLOCKING_PIDS","PG_COLLATION_IS_VISIBLE","PG_CONF_LOAD_TIME","PG_CONTROL_CHECKPOINT","PG_CONTROL_INIT","PG_CONTROL_SYSTEM","PG_CONVERSION_IS_VISIBLE","PG_CURRENT_LOGFILE","PG_CURRENT_SNAPSHOT","PG_CURRENT_XACT_ID","PG_CURRENT_XACT_ID_IF_ASSIGNED","PG_DESCRIBE_OBJECT","PG_FUNCTION_IS_VISIBLE","PG_GET_CATALOG_FOREIGN_KEYS","PG_GET_CONSTRAINTDEF","PG_GET_EXPR","PG_GET_FUNCTIONDEF","PG_GET_FUNCTION_ARGUMENTS","PG_GET_FUNCTION_IDENTITY_ARGUMENTS","PG_GET_FUNCTION_RESULT","PG_GET_INDEXDEF","PG_GET_KEYWORDS","PG_GET_OBJECT_ADDRESS","PG_GET_OWNED_SEQUENCE","PG_GET_RULEDEF","PG_GET_SERIAL_SEQUENCE","PG_GET_STATISTICSOBJDEF","PG_GET_TRIGGERDEF","PG_GET_USERBYID","PG_GET_VIEWDEF","PG_HAS_ROLE","PG_IDENTIFY_OBJECT","PG_IDENTIFY_OBJECT_AS_ADDRESS","PG_INDEXAM_HAS_PROPERTY","PG_INDEX_COLUMN_HAS_PROPERTY","PG_INDEX_HAS_PROPERTY","PG_IS_OTHER_TEMP_SCHEMA","PG_JIT_AVAILABLE","PG_LAST_COMMITTED_XACT","PG_LISTENING_CHANNELS","PG_MY_TEMP_SCHEMA","PG_NOTIFICATION_QUEUE_USAGE","PG_OPCLASS_IS_VISIBLE","PG_OPERATOR_IS_VISIBLE","PG_OPFAMILY_IS_VISIBLE","PG_OPTIONS_TO_TABLE","PG_POSTMASTER_START_TIME","PG_SAFE_SNAPSHOT_BLOCKING_PIDS","PG_SNAPSHOT_XIP","PG_SNAPSHOT_XMAX","PG_SNAPSHOT_XMIN","PG_STATISTICS_OBJ_IS_VISIBLE","PG_TABLESPACE_DATABASES","PG_TABLESPACE_LOCATION","PG_TABLE_IS_VISIBLE","PG_TRIGGER_DEPTH","PG_TS_CONFIG_IS_VISIBLE","PG_TS_DICT_IS_VISIBLE","PG_TS_PARSER_IS_VISIBLE","PG_TS_TEMPLATE_IS_VISIBLE","PG_TYPEOF","PG_TYPE_IS_VISIBLE","PG_VISIBLE_IN_SNAPSHOT","PG_XACT_COMMIT_TIMESTAMP","PG_XACT_COMMIT_TIMESTAMP_ORIGIN","PG_XACT_STATUS","PQSERVERVERSION","ROW_SECURITY_ACTIVE","SESSION_USER","SHOBJ_DESCRIPTION","TO_REGCLASS","TO_REGCOLLATION","TO_REGNAMESPACE","TO_REGOPER","TO_REGOPERATOR","TO_REGPROC","TO_REGPROCEDURE","TO_REGROLE","TO_REGTYPE","TXID_CURRENT","TXID_CURRENT_IF_ASSIGNED","TXID_CURRENT_SNAPSHOT","TXID_SNAPSHOT_XIP","TXID_SNAPSHOT_XMAX","TXID_SNAPSHOT_XMIN","TXID_STATUS","TXID_VISIBLE_IN_SNAPSHOT","USER","VERSION","BRIN_DESUMMARIZE_RANGE","BRIN_SUMMARIZE_NEW_VALUES","BRIN_SUMMARIZE_RANGE","CONVERT_FROM","CURRENT_SETTING","GIN_CLEAN_PENDING_LIST","PG_ADVISORY_LOCK","PG_ADVISORY_LOCK_SHARED","PG_ADVISORY_UNLOCK","PG_ADVISORY_UNLOCK_ALL","PG_ADVISORY_UNLOCK_SHARED","PG_ADVISORY_XACT_LOCK","PG_ADVISORY_XACT_LOCK_SHARED","PG_BACKUP_START_TIME","PG_CANCEL_BACKEND","PG_COLLATION_ACTUAL_VERSION","PG_COLUMN_COMPRESSION","PG_COLUMN_SIZE","PG_COPY_LOGICAL_REPLICATION_SLOT","PG_COPY_PHYSICAL_REPLICATION_SLOT","PG_CREATE_LOGICAL_REPLICATION_SLOT","PG_CREATE_PHYSICAL_REPLICATION_SLOT","PG_CREATE_RESTORE_POINT","PG_CURRENT_WAL_FLUSH_LSN","PG_CURRENT_WAL_INSERT_LSN","PG_CURRENT_WAL_LSN","PG_DATABASE_SIZE","PG_DROP_REPLICATION_SLOT","PG_EXPORT_SNAPSHOT","PG_FILENODE_RELATION","PG_GET_WAL_REPLAY_PAUSE_STATE","PG_IMPORT_SYSTEM_COLLATIONS","PG_INDEXES_SIZE","PG_IS_IN_BACKUP","PG_IS_IN_RECOVERY","PG_IS_WAL_REPLAY_PAUSED","PG_LAST_WAL_RECEIVE_LSN","PG_LAST_WAL_REPLAY_LSN","PG_LAST_XACT_REPLAY_TIMESTAMP","PG_LOGICAL_EMIT_MESSAGE","PG_LOGICAL_SLOT_GET_BINARY_CHANGES","PG_LOGICAL_SLOT_GET_CHANGES","PG_LOGICAL_SLOT_PEEK_BINARY_CHANGES","PG_LOGICAL_SLOT_PEEK_CHANGES","PG_LOG_BACKEND_MEMORY_CONTEXTS","PG_LS_ARCHIVE_STATUSDIR","PG_LS_DIR","PG_LS_LOGDIR","PG_LS_TMPDIR","PG_LS_WALDIR","PG_PARTITION_ANCESTORS","PG_PARTITION_ROOT","PG_PARTITION_TREE","PG_PROMOTE","PG_READ_BINARY_FILE","PG_READ_FILE","PG_RELATION_FILENODE","PG_RELATION_FILEPATH","PG_RELATION_SIZE","PG_RELOAD_CONF","PG_REPLICATION_ORIGIN_ADVANCE","PG_REPLICATION_ORIGIN_CREATE","PG_REPLICATION_ORIGIN_DROP","PG_REPLICATION_ORIGIN_OID","PG_REPLICATION_ORIGIN_PROGRESS","PG_REPLICATION_ORIGIN_SESSION_IS_SETUP","PG_REPLICATION_ORIGIN_SESSION_PROGRESS","PG_REPLICATION_ORIGIN_SESSION_RESET","PG_REPLICATION_ORIGIN_SESSION_SETUP","PG_REPLICATION_ORIGIN_XACT_RESET","PG_REPLICATION_ORIGIN_XACT_SETUP","PG_REPLICATION_SLOT_ADVANCE","PG_ROTATE_LOGFILE","PG_SIZE_BYTES","PG_SIZE_PRETTY","PG_START_BACKUP","PG_STAT_FILE","PG_STOP_BACKUP","PG_SWITCH_WAL","PG_TABLESPACE_SIZE","PG_TABLE_SIZE","PG_TERMINATE_BACKEND","PG_TOTAL_RELATION_SIZE","PG_TRY_ADVISORY_LOCK","PG_TRY_ADVISORY_LOCK_SHARED","PG_TRY_ADVISORY_XACT_LOCK","PG_TRY_ADVISORY_XACT_LOCK_SHARED","PG_WALFILE_NAME","PG_WALFILE_NAME_OFFSET","PG_WAL_LSN_DIFF","PG_WAL_REPLAY_PAUSE","PG_WAL_REPLAY_RESUME","SET_CONFIG","SUPPRESS_REDUNDANT_UPDATES_TRIGGER","TSVECTOR_UPDATE_TRIGGER","TSVECTOR_UPDATE_TRIGGER_COLUMN","PG_EVENT_TRIGGER_DDL_COMMANDS","PG_EVENT_TRIGGER_DROPPED_OBJECTS","PG_EVENT_TRIGGER_TABLE_REWRITE_OID","PG_EVENT_TRIGGER_TABLE_REWRITE_REASON","PG_GET_OBJECT_ADDRESS","PG_MCV_LIST_ITEMS","CAST"]});var t3,n3,r3=G(()=>{t3=["ALL","ANALYSE","ANALYZE","AND","ANY","AS","ASC","ASYMMETRIC","AUTHORIZATION","BETWEEN","BINARY","BOTH","CASE","CAST","CHECK","COLLATE","COLLATION","COLUMN","CONCURRENTLY","CONSTRAINT","CREATE","CROSS","CURRENT_CATALOG","CURRENT_DATE","CURRENT_ROLE","CURRENT_SCHEMA","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","DAY","DEFAULT","DEFERRABLE","DESC","DISTINCT","DO","ELSE","END","EXCEPT","EXISTS","FALSE","FETCH","FILTER","FOR","FOREIGN","FREEZE","FROM","FULL","GRANT","GROUP","HAVING","HOUR","ILIKE","IN","INITIALLY","INNER","INOUT","INTERSECT","INTO","IS","ISNULL","JOIN","LATERAL","LEADING","LEFT","LIKE","LIMIT","LOCALTIME","LOCALTIMESTAMP","MINUTE","MONTH","NATURAL","NOT","NOTNULL","NULL","NULLIF","OFFSET","ON","ONLY","OR","ORDER","OUT","OUTER","OVER","OVERLAPS","PLACING","PRIMARY","REFERENCES","RETURNING","RIGHT","ROW","SECOND","SELECT","SESSION_USER","SIMILAR","SOME","SYMMETRIC","TABLE","TABLESAMPLE","THEN","TO","TRAILING","TRUE","UNION","UNIQUE","USER","USING","VALUES","VARIADIC","VERBOSE","WHEN","WHERE","WINDOW","WITH","WITHIN","WITHOUT","YEAR"],n3=["ARRAY","BIGINT","BIT","BIT VARYING","BOOL","BOOLEAN","CHAR","CHARACTER","CHARACTER VARYING","DECIMAL","DEC","DOUBLE","ENUM","FLOAT","INT","INTEGER","INTERVAL","NCHAR","NUMERIC","JSON","JSONB","PRECISION","REAL","SMALLINT","TEXT","TIME","TIMESTAMP","TIMESTAMPTZ","UUID","VARCHAR","XML","ZONE"]});var Gwe,Wwe,i3,ib,$we,kwe,Ywe,Vwe,uR,sb=G(()=>{vt();e3();r3();Gwe=v(["SELECT [ALL | DISTINCT]"]),Wwe=v(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY [ALL | DISTINCT]","HAVING","WINDOW","PARTITION BY","ORDER BY","LIMIT","OFFSET","FETCH {FIRST | NEXT}","FOR {UPDATE | NO KEY UPDATE | SHARE | KEY SHARE} [OF]","INSERT INTO","VALUES","DEFAULT VALUES","SET","RETURNING"]),i3=v(["CREATE [GLOBAL | LOCAL] [TEMPORARY | TEMP | UNLOGGED] TABLE [IF NOT EXISTS]"]),ib=v(["CREATE [OR REPLACE] [TEMP | TEMPORARY] [RECURSIVE] VIEW","CREATE [MATERIALIZED] VIEW [IF NOT EXISTS]","UPDATE [ONLY]","WHERE CURRENT OF","ON CONFLICT","DELETE FROM [ONLY]","DROP TABLE [IF EXISTS]","ALTER TABLE [IF EXISTS] [ONLY]","ALTER TABLE ALL IN TABLESPACE","RENAME [COLUMN]","RENAME TO","ADD [COLUMN] [IF NOT EXISTS]","DROP [COLUMN] [IF EXISTS]","ALTER [COLUMN]","SET DATA TYPE","{SET | DROP} DEFAULT","{SET | DROP} NOT NULL","TRUNCATE [TABLE] [ONLY]","SET SCHEMA","AFTER","ABORT","ALTER AGGREGATE","ALTER COLLATION","ALTER CONVERSION","ALTER DATABASE","ALTER DEFAULT PRIVILEGES","ALTER DOMAIN","ALTER EVENT TRIGGER","ALTER EXTENSION","ALTER FOREIGN DATA WRAPPER","ALTER FOREIGN TABLE","ALTER FUNCTION","ALTER GROUP","ALTER INDEX","ALTER LANGUAGE","ALTER LARGE OBJECT","ALTER MATERIALIZED VIEW","ALTER OPERATOR","ALTER OPERATOR CLASS","ALTER OPERATOR FAMILY","ALTER POLICY","ALTER PROCEDURE","ALTER PUBLICATION","ALTER ROLE","ALTER ROUTINE","ALTER RULE","ALTER SCHEMA","ALTER SEQUENCE","ALTER SERVER","ALTER STATISTICS","ALTER SUBSCRIPTION","ALTER SYSTEM","ALTER TABLESPACE","ALTER TEXT SEARCH CONFIGURATION","ALTER TEXT SEARCH DICTIONARY","ALTER TEXT SEARCH PARSER","ALTER TEXT SEARCH TEMPLATE","ALTER TRIGGER","ALTER TYPE","ALTER USER","ALTER USER MAPPING","ALTER VIEW","ANALYZE","BEGIN","CALL","CHECKPOINT","CLOSE","CLUSTER","COMMENT ON","COMMIT","COMMIT PREPARED","COPY","CREATE ACCESS METHOD","CREATE [OR REPLACE] AGGREGATE","CREATE CAST","CREATE COLLATION","CREATE [DEFAULT] CONVERSION","CREATE DATABASE","CREATE DOMAIN","CREATE EVENT TRIGGER","CREATE EXTENSION","CREATE FOREIGN DATA WRAPPER","CREATE FOREIGN TABLE","CREATE [OR REPLACE] FUNCTION","CREATE GROUP","CREATE [UNIQUE] INDEX","CREATE [OR REPLACE] [TRUSTED] [PROCEDURAL] LANGUAGE","CREATE OPERATOR","CREATE OPERATOR CLASS","CREATE OPERATOR FAMILY","CREATE POLICY","CREATE [OR REPLACE] PROCEDURE","CREATE PUBLICATION","CREATE ROLE","CREATE [OR REPLACE] RULE","CREATE SCHEMA [AUTHORIZATION]","CREATE [TEMPORARY | TEMP | UNLOGGED] SEQUENCE","CREATE SERVER","CREATE STATISTICS","CREATE SUBSCRIPTION","CREATE TABLESPACE","CREATE TEXT SEARCH CONFIGURATION","CREATE TEXT SEARCH DICTIONARY","CREATE TEXT SEARCH PARSER","CREATE TEXT SEARCH TEMPLATE","CREATE [OR REPLACE] TRANSFORM","CREATE [OR REPLACE] [CONSTRAINT] TRIGGER","CREATE TYPE","CREATE USER","CREATE USER MAPPING","DEALLOCATE","DECLARE","DISCARD","DROP ACCESS METHOD","DROP AGGREGATE","DROP CAST","DROP COLLATION","DROP CONVERSION","DROP DATABASE","DROP DOMAIN","DROP EVENT TRIGGER","DROP EXTENSION","DROP FOREIGN DATA WRAPPER","DROP FOREIGN TABLE","DROP FUNCTION","DROP GROUP","DROP IDENTITY","DROP INDEX","DROP LANGUAGE","DROP MATERIALIZED VIEW [IF EXISTS]","DROP OPERATOR","DROP OPERATOR CLASS","DROP OPERATOR FAMILY","DROP OWNED","DROP POLICY","DROP PROCEDURE","DROP PUBLICATION","DROP ROLE","DROP ROUTINE","DROP RULE","DROP SCHEMA","DROP SEQUENCE","DROP SERVER","DROP STATISTICS","DROP SUBSCRIPTION","DROP TABLESPACE","DROP TEXT SEARCH CONFIGURATION","DROP TEXT SEARCH DICTIONARY","DROP TEXT SEARCH PARSER","DROP TEXT SEARCH TEMPLATE","DROP TRANSFORM","DROP TRIGGER","DROP TYPE","DROP USER","DROP USER MAPPING","DROP VIEW","EXECUTE","EXPLAIN","FETCH","GRANT","IMPORT FOREIGN SCHEMA","LISTEN","LOAD","LOCK","MOVE","NOTIFY","OVERRIDING SYSTEM VALUE","PREPARE","PREPARE TRANSACTION","REASSIGN OWNED","REFRESH MATERIALIZED VIEW","REINDEX","RELEASE SAVEPOINT","RESET [ALL|ROLE|SESSION AUTHORIZATION]","REVOKE","ROLLBACK","ROLLBACK PREPARED","ROLLBACK TO SAVEPOINT","SAVEPOINT","SECURITY LABEL","SELECT INTO","SET CONSTRAINTS","SET ROLE","SET SESSION AUTHORIZATION","SET TRANSACTION","SHOW","START TRANSACTION","UNLISTEN","VACUUM"]),$we=v(["UNION [ALL | DISTINCT]","EXCEPT [ALL | DISTINCT]","INTERSECT [ALL | DISTINCT]"]),kwe=v(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL [INNER] JOIN","NATURAL {LEFT | RIGHT | FULL} [OUTER] JOIN"]),Ywe=v(["PRIMARY KEY","GENERATED {ALWAYS | BY DEFAULT} AS IDENTITY","ON {UPDATE | DELETE} [NO ACTION | RESTRICT | CASCADE | SET NULL | SET DEFAULT]","DO {NOTHING | UPDATE}","AS MATERIALIZED","{ROWS | RANGE | GROUPS} BETWEEN","IS [NOT] DISTINCT FROM","NULLS {FIRST | LAST}","WITH ORDINALITY"]),Vwe=v(["[TIMESTAMP | TIME] {WITH | WITHOUT} TIME ZONE"]),uR={name:"postgresql",tokenizerOptions:{reservedSelect:Gwe,reservedClauses:[...Wwe,...i3,...ib],reservedSetOperations:$we,reservedJoins:kwe,reservedKeywordPhrases:Ywe,reservedDataTypePhrases:Vwe,reservedKeywords:t3,reservedDataTypes:n3,reservedFunctionNames:Zj,nestedBlockComments:!0,extraParens:["[]"],underscoresInNumbers:!0,stringTypes:["$$",{quote:"''-qq",prefixes:["U&"]},{quote:"''-qq-bs",prefixes:["E"],requirePrefix:!0},{quote:"''-raw",prefixes:["B","X"],requirePrefix:!0}],identTypes:[{quote:'""-qq',prefixes:["U&"]}],identChars:{rest:"$"},paramTypes:{numbered:["$"]},operators:["%","^","|/","||/","@",":=","&","|","#","~","<<",">>","~>~","~<~","~>=~","~<=~","@-@","@@","##","<->","&&","&<","&>","<<|","&<|","|>>","|&>","<^","^>","?#","?-","?|","?-|","?||","@>","<@","~=","?","@?","?&","->","->>","#>","#>>","#-","=>",">>=","<<=","~~","~~*","!~~","!~~*","~","~*","!~","!~*","-|-","||","@@@","!!","^@","<%","%>","<<%","%>>","<<->","<->>","<<<->","<->>>","::",":","<#>","<=>","<+>","<~>","<%>"],operatorKeyword:!0},formatOptions:{alwaysDenseOperators:["::",":"],onelineClauses:[...i3,...ib],tabularOnelineClauses:ib}}});var s3,o3=G(()=>{s3=["ANY_VALUE","APPROXIMATE PERCENTILE_DISC","AVG","COUNT","LISTAGG","MAX","MEDIAN","MIN","PERCENTILE_CONT","STDDEV_SAMP","STDDEV_POP","SUM","VAR_SAMP","VAR_POP","array_concat","array_flatten","get_array_length","split_to_array","subarray","BIT_AND","BIT_OR","BOOL_AND","BOOL_OR","COALESCE","DECODE","GREATEST","LEAST","NVL","NVL2","NULLIF","ADD_MONTHS","AT TIME ZONE","CONVERT_TIMEZONE","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","DATE_CMP","DATE_CMP_TIMESTAMP","DATE_CMP_TIMESTAMPTZ","DATE_PART_YEAR","DATEADD","DATEDIFF","DATE_PART","DATE_TRUNC","EXTRACT","GETDATE","INTERVAL_CMP","LAST_DAY","MONTHS_BETWEEN","NEXT_DAY","SYSDATE","TIMEOFDAY","TIMESTAMP_CMP","TIMESTAMP_CMP_DATE","TIMESTAMP_CMP_TIMESTAMPTZ","TIMESTAMPTZ_CMP","TIMESTAMPTZ_CMP_DATE","TIMESTAMPTZ_CMP_TIMESTAMP","TIMEZONE","TO_TIMESTAMP","TRUNC","AddBBox","DropBBox","GeometryType","ST_AddPoint","ST_Angle","ST_Area","ST_AsBinary","ST_AsEWKB","ST_AsEWKT","ST_AsGeoJSON","ST_AsText","ST_Azimuth","ST_Boundary","ST_Collect","ST_Contains","ST_ContainsProperly","ST_ConvexHull","ST_CoveredBy","ST_Covers","ST_Crosses","ST_Dimension","ST_Disjoint","ST_Distance","ST_DistanceSphere","ST_DWithin","ST_EndPoint","ST_Envelope","ST_Equals","ST_ExteriorRing","ST_Force2D","ST_Force3D","ST_Force3DM","ST_Force3DZ","ST_Force4D","ST_GeometryN","ST_GeometryType","ST_GeomFromEWKB","ST_GeomFromEWKT","ST_GeomFromText","ST_GeomFromWKB","ST_InteriorRingN","ST_Intersects","ST_IsPolygonCCW","ST_IsPolygonCW","ST_IsClosed","ST_IsCollection","ST_IsEmpty","ST_IsSimple","ST_IsValid","ST_Length","ST_LengthSphere","ST_Length2D","ST_LineFromMultiPoint","ST_LineInterpolatePoint","ST_M","ST_MakeEnvelope","ST_MakeLine","ST_MakePoint","ST_MakePolygon","ST_MemSize","ST_MMax","ST_MMin","ST_Multi","ST_NDims","ST_NPoints","ST_NRings","ST_NumGeometries","ST_NumInteriorRings","ST_NumPoints","ST_Perimeter","ST_Perimeter2D","ST_Point","ST_PointN","ST_Points","ST_Polygon","ST_RemovePoint","ST_Reverse","ST_SetPoint","ST_SetSRID","ST_Simplify","ST_SRID","ST_StartPoint","ST_Touches","ST_Within","ST_X","ST_XMax","ST_XMin","ST_Y","ST_YMax","ST_YMin","ST_Z","ST_ZMax","ST_ZMin","SupportsBBox","CHECKSUM","FUNC_SHA1","FNV_HASH","MD5","SHA","SHA1","SHA2","HLL","HLL_CREATE_SKETCH","HLL_CARDINALITY","HLL_COMBINE","IS_VALID_JSON","IS_VALID_JSON_ARRAY","JSON_ARRAY_LENGTH","JSON_EXTRACT_ARRAY_ELEMENT_TEXT","JSON_EXTRACT_PATH_TEXT","JSON_PARSE","JSON_SERIALIZE","ABS","ACOS","ASIN","ATAN","ATAN2","CBRT","CEILING","CEIL","COS","COT","DEGREES","DEXP","DLOG1","DLOG10","EXP","FLOOR","LN","LOG","MOD","PI","POWER","RADIANS","RANDOM","ROUND","SIN","SIGN","SQRT","TAN","TO_HEX","TRUNC","EXPLAIN_MODEL","ASCII","BPCHARCMP","BTRIM","BTTEXT_PATTERN_CMP","CHAR_LENGTH","CHARACTER_LENGTH","CHARINDEX","CHR","COLLATE","CONCAT","CRC32","DIFFERENCE","INITCAP","LEFT","RIGHT","LEN","LENGTH","LOWER","LPAD","RPAD","LTRIM","OCTETINDEX","OCTET_LENGTH","POSITION","QUOTE_IDENT","QUOTE_LITERAL","REGEXP_COUNT","REGEXP_INSTR","REGEXP_REPLACE","REGEXP_SUBSTR","REPEAT","REPLACE","REPLICATE","REVERSE","RTRIM","SOUNDEX","SPLIT_PART","STRPOS","STRTOL","SUBSTRING","TEXTLEN","TRANSLATE","TRIM","UPPER","decimal_precision","decimal_scale","is_array","is_bigint","is_boolean","is_char","is_decimal","is_float","is_integer","is_object","is_scalar","is_smallint","is_varchar","json_typeof","AVG","COUNT","CUME_DIST","DENSE_RANK","FIRST_VALUE","LAST_VALUE","LAG","LEAD","LISTAGG","MAX","MEDIAN","MIN","NTH_VALUE","NTILE","PERCENT_RANK","PERCENTILE_CONT","PERCENTILE_DISC","RANK","RATIO_TO_REPORT","ROW_NUMBER","STDDEV_SAMP","STDDEV_POP","SUM","VAR_SAMP","VAR_POP","CAST","CONVERT","TO_CHAR","TO_DATE","TO_NUMBER","TEXT_TO_INT_ALT","TEXT_TO_NUMERIC_ALT","CHANGE_QUERY_PRIORITY","CHANGE_SESSION_PRIORITY","CHANGE_USER_PRIORITY","CURRENT_SETTING","PG_CANCEL_BACKEND","PG_TERMINATE_BACKEND","REBOOT_CLUSTER","SET_CONFIG","CURRENT_AWS_ACCOUNT","CURRENT_DATABASE","CURRENT_NAMESPACE","CURRENT_SCHEMA","CURRENT_SCHEMAS","CURRENT_USER","CURRENT_USER_ID","HAS_ASSUMEROLE_PRIVILEGE","HAS_DATABASE_PRIVILEGE","HAS_SCHEMA_PRIVILEGE","HAS_TABLE_PRIVILEGE","PG_BACKEND_PID","PG_GET_COLS","PG_GET_GRANTEE_BY_IAM_ROLE","PG_GET_IAM_ROLE_BY_USER","PG_GET_LATE_BINDING_VIEW_COLS","PG_LAST_COPY_COUNT","PG_LAST_COPY_ID","PG_LAST_UNLOAD_ID","PG_LAST_QUERY_ID","PG_LAST_UNLOAD_COUNT","SESSION_USER","SLICE_NUM","USER","VERSION"]});var a3,l3,c3=G(()=>{a3=["AES128","AES256","ALL","ALLOWOVERWRITE","ANY","AS","ASC","AUTHORIZATION","BACKUP","BETWEEN","BINARY","BOTH","CHECK","COLUMN","CONSTRAINT","CREATE","CROSS","DEFAULT","DEFERRABLE","DEFLATE","DEFRAG","DESC","DISABLE","DISTINCT","DO","ENABLE","ENCODE","ENCRYPT","ENCRYPTION","EXPLICIT","FALSE","FOR","FOREIGN","FREEZE","FROM","FULL","GLOBALDICT256","GLOBALDICT64K","GROUP","IDENTITY","IGNORE","ILIKE","IN","INITIALLY","INNER","INTO","IS","ISNULL","LANGUAGE","LEADING","LIKE","LIMIT","LOCALTIME","LOCALTIMESTAMP","LUN","LUNS","MINUS","NATURAL","NEW","NOT","NOTNULL","NULL","NULLS","OFF","OFFLINE","OFFSET","OID","OLD","ON","ONLY","OPEN","ORDER","OUTER","OVERLAPS","PARALLEL","PARTITION","PERCENT","PERMISSIONS","PLACING","PRIMARY","RECOVER","REFERENCES","REJECTLOG","RESORT","RESPECT","RESTORE","SIMILAR","SNAPSHOT","SOME","SYSTEM","TABLE","TAG","TDES","THEN","TIMESTAMP","TO","TOP","TRAILING","TRUE","UNIQUE","USING","VERBOSE","WALLET","WITHOUT","ACCEPTANYDATE","ACCEPTINVCHARS","BLANKSASNULL","DATEFORMAT","EMPTYASNULL","ENCODING","ESCAPE","EXPLICIT_IDS","FILLRECORD","IGNOREBLANKLINES","IGNOREHEADER","REMOVEQUOTES","ROUNDEC","TIMEFORMAT","TRIMBLANKS","TRUNCATECOLUMNS","COMPROWS","COMPUPDATE","MAXERROR","NOLOAD","STATUPDATE","FORMAT","CSV","DELIMITER","FIXEDWIDTH","SHAPEFILE","AVRO","JSON","PARQUET","ORC","ACCESS_KEY_ID","CREDENTIALS","ENCRYPTED","IAM_ROLE","MASTER_SYMMETRIC_KEY","SECRET_ACCESS_KEY","SESSION_TOKEN","BZIP2","GZIP","LZOP","ZSTD","MANIFEST","READRATIO","REGION","SSH","RAW","AZ64","BYTEDICT","DELTA","DELTA32K","LZO","MOSTLY8","MOSTLY16","MOSTLY32","RUNLENGTH","TEXT255","TEXT32K","CATALOG_ROLE","SECRET_ARN","EXTERNAL","AUTO","EVEN","KEY","PREDICATE","COMPRESSION"],l3=["ARRAY","BIGINT","BPCHAR","CHAR","CHARACTER VARYING","CHARACTER","DECIMAL","INT","INT2","INT4","INT8","INTEGER","NCHAR","NUMERIC","NVARCHAR","SMALLINT","TEXT","VARBYTE","VARCHAR"]});var qwe,Xwe,u3,ob,zwe,jwe,Kwe,Jwe,dR,ab=G(()=>{vt();o3();c3();qwe=v(["SELECT [ALL | DISTINCT]"]),Xwe=v(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY","HAVING","QUALIFY","PARTITION BY","ORDER BY","LIMIT","OFFSET","INSERT INTO","VALUES","SET"]),u3=v(["CREATE [TEMPORARY | TEMP | LOCAL TEMPORARY | LOCAL TEMP] TABLE [IF NOT EXISTS]"]),ob=v(["CREATE [OR REPLACE | MATERIALIZED] VIEW","UPDATE","DELETE [FROM]","DROP TABLE [IF EXISTS]","ALTER TABLE","ALTER TABLE APPEND","ADD [COLUMN]","DROP [COLUMN]","RENAME TO","RENAME COLUMN","ALTER COLUMN","TYPE","ENCODE","TRUNCATE [TABLE]","ABORT","ALTER DATABASE","ALTER DATASHARE","ALTER DEFAULT PRIVILEGES","ALTER GROUP","ALTER MATERIALIZED VIEW","ALTER PROCEDURE","ALTER SCHEMA","ALTER USER","ANALYSE","ANALYZE","ANALYSE COMPRESSION","ANALYZE COMPRESSION","BEGIN","CALL","CANCEL","CLOSE","COMMIT","COPY","CREATE DATABASE","CREATE DATASHARE","CREATE EXTERNAL FUNCTION","CREATE EXTERNAL SCHEMA","CREATE EXTERNAL TABLE","CREATE FUNCTION","CREATE GROUP","CREATE LIBRARY","CREATE MODEL","CREATE PROCEDURE","CREATE SCHEMA","CREATE USER","DEALLOCATE","DECLARE","DESC DATASHARE","DROP DATABASE","DROP DATASHARE","DROP FUNCTION","DROP GROUP","DROP LIBRARY","DROP MODEL","DROP MATERIALIZED VIEW","DROP PROCEDURE","DROP SCHEMA","DROP USER","DROP VIEW","DROP","EXECUTE","EXPLAIN","FETCH","GRANT","LOCK","PREPARE","REFRESH MATERIALIZED VIEW","RESET","REVOKE","ROLLBACK","SELECT INTO","SET SESSION AUTHORIZATION","SET SESSION CHARACTERISTICS","SHOW","SHOW EXTERNAL TABLE","SHOW MODEL","SHOW DATASHARES","SHOW PROCEDURE","SHOW TABLE","SHOW VIEW","START TRANSACTION","UNLOAD","VACUUM"]),zwe=v(["UNION [ALL]","EXCEPT","INTERSECT","MINUS"]),jwe=v(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL [INNER] JOIN","NATURAL {LEFT | RIGHT | FULL} [OUTER] JOIN"]),Kwe=v(["NULL AS","DATA CATALOG","HIVE METASTORE","{ROWS | RANGE} BETWEEN"]),Jwe=v([]),dR={name:"redshift",tokenizerOptions:{reservedSelect:qwe,reservedClauses:[...Xwe,...u3,...ob],reservedSetOperations:zwe,reservedJoins:jwe,reservedKeywordPhrases:Kwe,reservedDataTypePhrases:Jwe,reservedKeywords:a3,reservedDataTypes:l3,reservedFunctionNames:s3,extraParens:["[]"],stringTypes:["''-qq"],identTypes:['""-qq'],identChars:{first:"#"},paramTypes:{numbered:["$"]},operators:["^","%","@","|/","||/","&","|","~","<<",">>","||","::"]},formatOptions:{alwaysDenseOperators:["::"],onelineClauses:[...u3,...ob],tabularOnelineClauses:ob}}});var d3,f3,E3=G(()=>{d3=["ADD","AFTER","ALL","ALTER","ANALYZE","AND","ANTI","ANY","ARCHIVE","AS","ASC","AT","AUTHORIZATION","BETWEEN","BOTH","BUCKET","BUCKETS","BY","CACHE","CASCADE","CAST","CHANGE","CHECK","CLEAR","CLUSTER","CLUSTERED","CODEGEN","COLLATE","COLLECTION","COLUMN","COLUMNS","COMMENT","COMMIT","COMPACT","COMPACTIONS","COMPUTE","CONCATENATE","CONSTRAINT","COST","CREATE","CROSS","CUBE","CURRENT","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","DATA","DATABASE","DATABASES","DAY","DBPROPERTIES","DEFINED","DELETE","DELIMITED","DESC","DESCRIBE","DFS","DIRECTORIES","DIRECTORY","DISTINCT","DISTRIBUTE","DIV","DROP","ESCAPE","ESCAPED","EXCEPT","EXCHANGE","EXISTS","EXPORT","EXTENDED","EXTERNAL","EXTRACT","FALSE","FETCH","FIELDS","FILTER","FILEFORMAT","FIRST","FIRST_VALUE","FOLLOWING","FOR","FOREIGN","FORMAT","FORMATTED","FULL","FUNCTION","FUNCTIONS","GLOBAL","GRANT","GROUP","GROUPING","HOUR","IF","IGNORE","IMPORT","IN","INDEX","INDEXES","INNER","INPATH","INPUTFORMAT","INTERSECT","INTO","IS","ITEMS","KEYS","LAST","LAST_VALUE","LATERAL","LAZY","LEADING","LEFT","LIKE","LINES","LIST","LOCAL","LOCATION","LOCK","LOCKS","LOGICAL","MACRO","MATCHED","MERGE","MINUTE","MONTH","MSCK","NAMESPACE","NAMESPACES","NATURAL","NO","NOT","NULL","NULLS","OF","ONLY","OPTION","OPTIONS","OR","ORDER","OUT","OUTER","OUTPUTFORMAT","OVER","OVERLAPS","OVERLAY","OVERWRITE","OWNER","PARTITION","PARTITIONED","PARTITIONS","PERCENT","PLACING","POSITION","PRECEDING","PRIMARY","PRINCIPALS","PROPERTIES","PURGE","QUERY","RANGE","RECORDREADER","RECORDWRITER","RECOVER","REDUCE","REFERENCES","RENAME","REPAIR","REPLACE","RESPECT","RESTRICT","REVOKE","RIGHT","RLIKE","ROLE","ROLES","ROLLBACK","ROLLUP","ROW","ROWS","SCHEMA","SECOND","SELECT","SEMI","SEPARATED","SERDE","SERDEPROPERTIES","SESSION_USER","SETS","SHOW","SKEWED","SOME","SORT","SORTED","START","STATISTICS","STORED","STRATIFY","SUBSTR","SUBSTRING","TABLE","TABLES","TBLPROPERTIES","TEMPORARY","TERMINATED","THEN","TO","TOUCH","TRAILING","TRANSACTION","TRANSACTIONS","TRIM","TRUE","TRUNCATE","UNARCHIVE","UNBOUNDED","UNCACHE","UNIQUE","UNKNOWN","UNLOCK","UNSET","USE","USER","USING","VIEW","WINDOW","YEAR","ANALYSE","ARRAY_ZIP","COALESCE","CONTAINS","CONVERT","DAYS","DAY_HOUR","DAY_MINUTE","DAY_SECOND","DECODE","DEFAULT","DISTINCTROW","ENCODE","EXPLODE","EXPLODE_OUTER","FIXED","GREATEST","GROUP_CONCAT","HOURS","HOUR_MINUTE","HOUR_SECOND","IFNULL","LEAST","LEVEL","MINUTE_SECOND","NULLIF","OFFSET","ON","OPTIMIZE","REGEXP","SEPARATOR","SIZE","TYPE","TYPES","UNSIGNED","VARIABLES","YEAR_MONTH"],f3=["ARRAY","BIGINT","BINARY","BOOLEAN","BYTE","CHAR","DATE","DEC","DECIMAL","DOUBLE","FLOAT","INT","INTEGER","INTERVAL","LONG","MAP","NUMERIC","REAL","SHORT","SMALLINT","STRING","STRUCT","TIMESTAMP_LTZ","TIMESTAMP_NTZ","TIMESTAMP","TINYINT","VARCHAR"]});var h3,p3=G(()=>{h3=["APPROX_COUNT_DISTINCT","APPROX_PERCENTILE","AVG","BIT_AND","BIT_OR","BIT_XOR","BOOL_AND","BOOL_OR","COLLECT_LIST","COLLECT_SET","CORR","COUNT","COUNT","COUNT","COUNT_IF","COUNT_MIN_SKETCH","COVAR_POP","COVAR_SAMP","EVERY","FIRST","FIRST_VALUE","GROUPING","GROUPING_ID","KURTOSIS","LAST","LAST_VALUE","MAX","MAX_BY","MEAN","MIN","MIN_BY","PERCENTILE","PERCENTILE","PERCENTILE_APPROX","SKEWNESS","STD","STDDEV","STDDEV_POP","STDDEV_SAMP","SUM","VAR_POP","VAR_SAMP","VARIANCE","CUME_DIST","DENSE_RANK","LAG","LEAD","NTH_VALUE","NTILE","PERCENT_RANK","RANK","ROW_NUMBER","ARRAY","ARRAY_CONTAINS","ARRAY_DISTINCT","ARRAY_EXCEPT","ARRAY_INTERSECT","ARRAY_JOIN","ARRAY_MAX","ARRAY_MIN","ARRAY_POSITION","ARRAY_REMOVE","ARRAY_REPEAT","ARRAY_UNION","ARRAYS_OVERLAP","ARRAYS_ZIP","FLATTEN","SEQUENCE","SHUFFLE","SLICE","SORT_ARRAY","ELEMENT_AT","ELEMENT_AT","MAP_CONCAT","MAP_ENTRIES","MAP_FROM_ARRAYS","MAP_FROM_ENTRIES","MAP_KEYS","MAP_VALUES","STR_TO_MAP","ADD_MONTHS","CURRENT_DATE","CURRENT_DATE","CURRENT_TIMESTAMP","CURRENT_TIMESTAMP","CURRENT_TIMEZONE","DATE_ADD","DATE_FORMAT","DATE_FROM_UNIX_DATE","DATE_PART","DATE_SUB","DATE_TRUNC","DATEDIFF","DAY","DAYOFMONTH","DAYOFWEEK","DAYOFYEAR","EXTRACT","FROM_UNIXTIME","FROM_UTC_TIMESTAMP","HOUR","LAST_DAY","MAKE_DATE","MAKE_DT_INTERVAL","MAKE_INTERVAL","MAKE_TIMESTAMP","MAKE_YM_INTERVAL","MINUTE","MONTH","MONTHS_BETWEEN","NEXT_DAY","NOW","QUARTER","SECOND","SESSION_WINDOW","TIMESTAMP_MICROS","TIMESTAMP_MILLIS","TIMESTAMP_SECONDS","TO_DATE","TO_TIMESTAMP","TO_UNIX_TIMESTAMP","TO_UTC_TIMESTAMP","TRUNC","UNIX_DATE","UNIX_MICROS","UNIX_MILLIS","UNIX_SECONDS","UNIX_TIMESTAMP","WEEKDAY","WEEKOFYEAR","WINDOW","YEAR","FROM_JSON","GET_JSON_OBJECT","JSON_ARRAY_LENGTH","JSON_OBJECT_KEYS","JSON_TUPLE","SCHEMA_OF_JSON","TO_JSON","ABS","ACOS","ACOSH","AGGREGATE","ARRAY_SORT","ASCII","ASIN","ASINH","ASSERT_TRUE","ATAN","ATAN2","ATANH","BASE64","BIN","BIT_COUNT","BIT_GET","BIT_LENGTH","BROUND","BTRIM","CARDINALITY","CBRT","CEIL","CEILING","CHAR_LENGTH","CHARACTER_LENGTH","CHR","CONCAT","CONCAT_WS","CONV","COS","COSH","COT","CRC32","CURRENT_CATALOG","CURRENT_DATABASE","CURRENT_USER","DEGREES","ELT","EXP","EXPM1","FACTORIAL","FIND_IN_SET","FLOOR","FORALL","FORMAT_NUMBER","FORMAT_STRING","FROM_CSV","GETBIT","HASH","HEX","HYPOT","INITCAP","INLINE","INLINE_OUTER","INPUT_FILE_BLOCK_LENGTH","INPUT_FILE_BLOCK_START","INPUT_FILE_NAME","INSTR","ISNAN","ISNOTNULL","ISNULL","JAVA_METHOD","LCASE","LEFT","LENGTH","LEVENSHTEIN","LN","LOCATE","LOG","LOG10","LOG1P","LOG2","LOWER","LPAD","LTRIM","MAP_FILTER","MAP_ZIP_WITH","MD5","MOD","MONOTONICALLY_INCREASING_ID","NAMED_STRUCT","NANVL","NEGATIVE","NVL","NVL2","OCTET_LENGTH","OVERLAY","PARSE_URL","PI","PMOD","POSEXPLODE","POSEXPLODE_OUTER","POSITION","POSITIVE","POW","POWER","PRINTF","RADIANS","RAISE_ERROR","RAND","RANDN","RANDOM","REFLECT","REGEXP_EXTRACT","REGEXP_EXTRACT_ALL","REGEXP_LIKE","REGEXP_REPLACE","REPEAT","REPLACE","REVERSE","RIGHT","RINT","ROUND","RPAD","RTRIM","SCHEMA_OF_CSV","SENTENCES","SHA","SHA1","SHA2","SHIFTLEFT","SHIFTRIGHT","SHIFTRIGHTUNSIGNED","SIGN","SIGNUM","SIN","SINH","SOUNDEX","SPACE","SPARK_PARTITION_ID","SPLIT","SQRT","STACK","SUBSTR","SUBSTRING","SUBSTRING_INDEX","TAN","TANH","TO_CSV","TRANSFORM_KEYS","TRANSFORM_VALUES","TRANSLATE","TRIM","TRY_ADD","TRY_DIVIDE","TYPEOF","UCASE","UNBASE64","UNHEX","UPPER","UUID","VERSION","WIDTH_BUCKET","XPATH","XPATH_BOOLEAN","XPATH_DOUBLE","XPATH_FLOAT","XPATH_INT","XPATH_LONG","XPATH_NUMBER","XPATH_SHORT","XPATH_STRING","XXHASH64","ZIP_WITH","CAST","COALESCE","NULLIF"]});function i0e(t){return t.map((e,n)=>{let r=t[n-1]||Di,i=t[n+1]||Di;return zr.WINDOW(e)&&i.type===k.OPEN_PAREN?Object.assign(Object.assign({},e),{type:k.RESERVED_FUNCTION_NAME}):e.text==="ITEMS"&&e.type===k.RESERVED_KEYWORD&&!(r.text==="COLLECTION"&&i.text==="TERMINATED")?Object.assign(Object.assign({},e),{type:k.IDENTIFIER,text:e.raw}):e})}var Qwe,Zwe,T3,lb,e0e,t0e,n0e,r0e,fR,cb=G(()=>{vt();yr();E3();p3();Qwe=v(["SELECT [ALL | DISTINCT]"]),Zwe=v(["WITH","FROM","WHERE","GROUP BY","HAVING","WINDOW","PARTITION BY","ORDER BY","SORT BY","CLUSTER BY","DISTRIBUTE BY","LIMIT","INSERT [INTO | OVERWRITE] [TABLE]","VALUES","INSERT OVERWRITE [LOCAL] DIRECTORY","LOAD DATA [LOCAL] INPATH","[OVERWRITE] INTO TABLE"]),T3=v(["CREATE [EXTERNAL] TABLE [IF NOT EXISTS]"]),lb=v(["CREATE [OR REPLACE] [GLOBAL TEMPORARY | TEMPORARY] VIEW [IF NOT EXISTS]","DROP TABLE [IF EXISTS]","ALTER TABLE","ADD COLUMNS","DROP {COLUMN | COLUMNS}","RENAME TO","RENAME COLUMN","ALTER COLUMN","TRUNCATE TABLE","LATERAL VIEW","ALTER DATABASE","ALTER VIEW","CREATE DATABASE","CREATE FUNCTION","DROP DATABASE","DROP FUNCTION","DROP VIEW","REPAIR TABLE","USE DATABASE","TABLESAMPLE","PIVOT","TRANSFORM","EXPLAIN","ADD FILE","ADD JAR","ANALYZE TABLE","CACHE TABLE","CLEAR CACHE","DESCRIBE DATABASE","DESCRIBE FUNCTION","DESCRIBE QUERY","DESCRIBE TABLE","LIST FILE","LIST JAR","REFRESH","REFRESH TABLE","REFRESH FUNCTION","RESET","SHOW COLUMNS","SHOW CREATE TABLE","SHOW DATABASES","SHOW FUNCTIONS","SHOW PARTITIONS","SHOW TABLE EXTENDED","SHOW TABLES","SHOW TBLPROPERTIES","SHOW VIEWS","UNCACHE TABLE"]),e0e=v(["UNION [ALL | DISTINCT]","EXCEPT [ALL | DISTINCT]","INTERSECT [ALL | DISTINCT]"]),t0e=v(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL [INNER] JOIN","NATURAL {LEFT | RIGHT | FULL} [OUTER] JOIN","[LEFT] {ANTI | SEMI} JOIN","NATURAL [LEFT] {ANTI | SEMI} JOIN"]),n0e=v(["ON DELETE","ON UPDATE","CURRENT ROW","{ROWS | RANGE} BETWEEN"]),r0e=v([]),fR={name:"spark",tokenizerOptions:{reservedSelect:Qwe,reservedClauses:[...Zwe,...T3,...lb],reservedSetOperations:e0e,reservedJoins:t0e,reservedKeywordPhrases:n0e,reservedDataTypePhrases:r0e,supportsXor:!0,reservedKeywords:d3,reservedDataTypes:f3,reservedFunctionNames:h3,extraParens:["[]"],stringTypes:["''-bs",'""-bs',{quote:"''-raw",prefixes:["R","X"],requirePrefix:!0},{quote:'""-raw',prefixes:["R","X"],requirePrefix:!0}],identTypes:["``"],identChars:{allowFirstCharNumber:!0},variableTypes:[{quote:"{}",prefixes:["$"],requirePrefix:!0}],operators:["%","~","^","|","&","<=>","==","!","||","->"],postProcess:i0e},formatOptions:{onelineClauses:[...T3,...lb],tabularOnelineClauses:lb}}});var S3,R3=G(()=>{S3=["ABS","CHANGES","CHAR","COALESCE","FORMAT","GLOB","HEX","IFNULL","IIF","INSTR","LAST_INSERT_ROWID","LENGTH","LIKE","LIKELIHOOD","LIKELY","LOAD_EXTENSION","LOWER","LTRIM","NULLIF","PRINTF","QUOTE","RANDOM","RANDOMBLOB","REPLACE","ROUND","RTRIM","SIGN","SOUNDEX","SQLITE_COMPILEOPTION_GET","SQLITE_COMPILEOPTION_USED","SQLITE_OFFSET","SQLITE_SOURCE_ID","SQLITE_VERSION","SUBSTR","SUBSTRING","TOTAL_CHANGES","TRIM","TYPEOF","UNICODE","UNLIKELY","UPPER","ZEROBLOB","AVG","COUNT","GROUP_CONCAT","MAX","MIN","SUM","TOTAL","DATE","TIME","DATETIME","JULIANDAY","UNIXEPOCH","STRFTIME","row_number","rank","dense_rank","percent_rank","cume_dist","ntile","lag","lead","first_value","last_value","nth_value","ACOS","ACOSH","ASIN","ASINH","ATAN","ATAN2","ATANH","CEIL","CEILING","COS","COSH","DEGREES","EXP","FLOOR","LN","LOG","LOG","LOG10","LOG2","MOD","PI","POW","POWER","RADIANS","SIN","SINH","SQRT","TAN","TANH","TRUNC","JSON","JSON_ARRAY","JSON_ARRAY_LENGTH","JSON_ARRAY_LENGTH","JSON_EXTRACT","JSON_INSERT","JSON_OBJECT","JSON_PATCH","JSON_REMOVE","JSON_REPLACE","JSON_SET","JSON_TYPE","JSON_TYPE","JSON_VALID","JSON_QUOTE","JSON_GROUP_ARRAY","JSON_GROUP_OBJECT","JSON_EACH","JSON_TREE","CAST"]});var A3,m3,g3=G(()=>{A3=["ABORT","ACTION","ADD","AFTER","ALL","ALTER","AND","ARE","ALWAYS","ANALYZE","AS","ASC","ATTACH","AUTOINCREMENT","BEFORE","BEGIN","BETWEEN","BY","CASCADE","CASE","CAST","CHECK","COLLATE","COLUMN","COMMIT","CONFLICT","CONSTRAINT","CREATE","CROSS","CURRENT","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","DATABASE","DEFAULT","DEFERRABLE","DEFERRED","DELETE","DESC","DETACH","DISTINCT","DO","DROP","EACH","ELSE","END","ESCAPE","EXCEPT","EXCLUDE","EXCLUSIVE","EXISTS","EXPLAIN","FAIL","FILTER","FIRST","FOLLOWING","FOR","FOREIGN","FROM","FULL","GENERATED","GLOB","GROUP","HAVING","IF","IGNORE","IMMEDIATE","IN","INDEX","INDEXED","INITIALLY","INNER","INSERT","INSTEAD","INTERSECT","INTO","IS","ISNULL","JOIN","KEY","LAST","LEFT","LIKE","LIMIT","MATCH","MATERIALIZED","NATURAL","NO","NOT","NOTHING","NOTNULL","NULL","NULLS","OF","OFFSET","ON","ONLY","OPEN","OR","ORDER","OTHERS","OUTER","OVER","PARTITION","PLAN","PRAGMA","PRECEDING","PRIMARY","QUERY","RAISE","RANGE","RECURSIVE","REFERENCES","REGEXP","REINDEX","RELEASE","RENAME","REPLACE","RESTRICT","RETURNING","RIGHT","ROLLBACK","ROW","ROWS","SAVEPOINT","SELECT","SET","TABLE","TEMP","TEMPORARY","THEN","TIES","TO","TRANSACTION","TRIGGER","UNBOUNDED","UNION","UNIQUE","UPDATE","USING","VACUUM","VALUES","VIEW","VIRTUAL","WHEN","WHERE","WINDOW","WITH","WITHOUT"],m3=["ANY","ARRAY","BLOB","CHARACTER","DECIMAL","INT","INTEGER","NATIVE CHARACTER","NCHAR","NUMERIC","NVARCHAR","REAL","TEXT","VARCHAR","VARYING CHARACTER"]});var s0e,o0e,I3,ub,a0e,l0e,c0e,u0e,ER,db=G(()=>{vt();R3();g3();s0e=v(["SELECT [ALL | DISTINCT]"]),o0e=v(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY","HAVING","WINDOW","PARTITION BY","ORDER BY","LIMIT","OFFSET","INSERT [OR ABORT | OR FAIL | OR IGNORE | OR REPLACE | OR ROLLBACK] INTO","REPLACE INTO","VALUES","SET","RETURNING"]),I3=v(["CREATE [TEMPORARY | TEMP] TABLE [IF NOT EXISTS]"]),ub=v(["CREATE [TEMPORARY | TEMP] VIEW [IF NOT EXISTS]","UPDATE [OR ABORT | OR FAIL | OR IGNORE | OR REPLACE | OR ROLLBACK]","ON CONFLICT","DELETE FROM","DROP TABLE [IF EXISTS]","ALTER TABLE","ADD [COLUMN]","DROP [COLUMN]","RENAME [COLUMN]","RENAME TO","SET SCHEMA"]),a0e=v(["UNION [ALL]","EXCEPT","INTERSECT"]),l0e=v(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL [INNER] JOIN","NATURAL {LEFT | RIGHT | FULL} [OUTER] JOIN"]),c0e=v(["ON {UPDATE | DELETE} [SET NULL | SET DEFAULT]","{ROWS | RANGE | GROUPS} BETWEEN","DO UPDATE"]),u0e=v([]),ER={name:"sqlite",tokenizerOptions:{reservedSelect:s0e,reservedClauses:[...o0e,...I3,...ub],reservedSetOperations:a0e,reservedJoins:l0e,reservedKeywordPhrases:c0e,reservedDataTypePhrases:u0e,reservedKeywords:A3,reservedDataTypes:m3,reservedFunctionNames:S3,stringTypes:["''-qq",{quote:"''-raw",prefixes:["X"],requirePrefix:!0}],identTypes:['""-qq',"``","[]"],paramTypes:{positional:!0,numbered:["?"],named:[":","@","$"]},operators:["%","~","&","|","<<",">>","==","->","->>","||"]},formatOptions:{onelineClauses:[...I3,...ub],tabularOnelineClauses:ub}}});var _3,N3=G(()=>{_3=["GROUPING","RANK","DENSE_RANK","PERCENT_RANK","CUME_DIST","ROW_NUMBER","POSITION","OCCURRENCES_REGEX","POSITION_REGEX","EXTRACT","CHAR_LENGTH","CHARACTER_LENGTH","OCTET_LENGTH","CARDINALITY","ABS","MOD","LN","EXP","POWER","SQRT","FLOOR","CEIL","CEILING","WIDTH_BUCKET","SUBSTRING","SUBSTRING_REGEX","UPPER","LOWER","CONVERT","TRANSLATE","TRANSLATE_REGEX","TRIM","OVERLAY","NORMALIZE","SPECIFICTYPE","CURRENT_DATE","CURRENT_TIME","LOCALTIME","CURRENT_TIMESTAMP","LOCALTIMESTAMP","COUNT","AVG","MAX","MIN","SUM","STDDEV_POP","STDDEV_SAMP","VAR_SAMP","VAR_POP","COLLECT","FUSION","INTERSECTION","COVAR_POP","COVAR_SAMP","CORR","REGR_SLOPE","REGR_INTERCEPT","REGR_COUNT","REGR_R2","REGR_AVGX","REGR_AVGY","REGR_SXX","REGR_SYY","REGR_SXY","PERCENTILE_CONT","PERCENTILE_DISC","CAST","COALESCE","NULLIF","ROUND","SIN","COS","TAN","ASIN","ACOS","ATAN"]});var O3,C3,y3=G(()=>{O3=["ALL","ALLOCATE","ALTER","ANY","ARE","AS","ASC","ASENSITIVE","ASYMMETRIC","AT","ATOMIC","AUTHORIZATION","BEGIN","BETWEEN","BOTH","BY","CALL","CALLED","CASCADED","CAST","CHECK","CLOSE","COALESCE","COLLATE","COLUMN","COMMIT","CONDITION","CONNECT","CONSTRAINT","CORRESPONDING","CREATE","CROSS","CUBE","CURRENT","CURRENT_CATALOG","CURRENT_DEFAULT_TRANSFORM_GROUP","CURRENT_PATH","CURRENT_ROLE","CURRENT_SCHEMA","CURRENT_TRANSFORM_GROUP_FOR_TYPE","CURRENT_USER","CURSOR","CYCLE","DEALLOCATE","DAY","DECLARE","DEFAULT","DELETE","DEREF","DESC","DESCRIBE","DETERMINISTIC","DISCONNECT","DISTINCT","DROP","DYNAMIC","EACH","ELEMENT","END-EXEC","ESCAPE","EVERY","EXCEPT","EXEC","EXECUTE","EXISTS","EXTERNAL","FALSE","FETCH","FILTER","FOR","FOREIGN","FREE","FROM","FULL","FUNCTION","GET","GLOBAL","GRANT","GROUP","HAVING","HOLD","HOUR","IDENTITY","IN","INDICATOR","INNER","INOUT","INSENSITIVE","INSERT","INTERSECT","INTO","IS","LANGUAGE","LARGE","LATERAL","LEADING","LEFT","LIKE","LIKE_REGEX","LOCAL","MATCH","MEMBER","MERGE","METHOD","MINUTE","MODIFIES","MODULE","MONTH","NATURAL","NEW","NO","NONE","NOT","NULL","NULLIF","OF","OLD","ON","ONLY","OPEN","ORDER","OUT","OUTER","OVER","OVERLAPS","PARAMETER","PARTITION","PRECISION","PREPARE","PRIMARY","PROCEDURE","RANGE","READS","REAL","RECURSIVE","REF","REFERENCES","REFERENCING","RELEASE","RESULT","RETURN","RETURNS","REVOKE","RIGHT","ROLLBACK","ROLLUP","ROW","ROWS","SAVEPOINT","SCOPE","SCROLL","SEARCH","SECOND","SELECT","SENSITIVE","SESSION_USER","SET","SIMILAR","SOME","SPECIFIC","SQL","SQLEXCEPTION","SQLSTATE","SQLWARNING","START","STATIC","SUBMULTISET","SYMMETRIC","SYSTEM","SYSTEM_USER","TABLE","TABLESAMPLE","THEN","TIMEZONE_HOUR","TIMEZONE_MINUTE","TO","TRAILING","TRANSLATION","TREAT","TRIGGER","TRUE","UESCAPE","UNION","UNIQUE","UNKNOWN","UNNEST","UPDATE","USER","USING","VALUE","VALUES","WHENEVER","WINDOW","WITHIN","WITHOUT","YEAR"],C3=["ARRAY","BIGINT","BINARY LARGE OBJECT","BINARY VARYING","BINARY","BLOB","BOOLEAN","CHAR LARGE OBJECT","CHAR VARYING","CHAR","CHARACTER LARGE OBJECT","CHARACTER VARYING","CHARACTER","CLOB","DATE","DEC","DECIMAL","DOUBLE","FLOAT","INT","INTEGER","INTERVAL","MULTISET","NATIONAL CHAR VARYING","NATIONAL CHAR","NATIONAL CHARACTER LARGE OBJECT","NATIONAL CHARACTER VARYING","NATIONAL CHARACTER","NCHAR LARGE OBJECT","NCHAR VARYING","NCHAR","NCLOB","NUMERIC","SMALLINT","TIME","TIMESTAMP","VARBINARY","VARCHAR"]});var d0e,f0e,b3,fb,E0e,h0e,p0e,T0e,hR,Eb=G(()=>{vt();N3();y3();d0e=v(["SELECT [ALL | DISTINCT]"]),f0e=v(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY [ALL | DISTINCT]","HAVING","WINDOW","PARTITION BY","ORDER BY","LIMIT","OFFSET","FETCH {FIRST | NEXT}","INSERT INTO","VALUES","SET"]),b3=v(["CREATE [GLOBAL TEMPORARY | LOCAL TEMPORARY] TABLE"]),fb=v(["CREATE [RECURSIVE] VIEW","UPDATE","WHERE CURRENT OF","DELETE FROM","DROP TABLE","ALTER TABLE","ADD COLUMN","DROP [COLUMN]","RENAME COLUMN","RENAME TO","ALTER [COLUMN]","{SET | DROP} DEFAULT","ADD SCOPE","DROP SCOPE {CASCADE | RESTRICT}","RESTART WITH","TRUNCATE TABLE","SET SCHEMA"]),E0e=v(["UNION [ALL | DISTINCT]","EXCEPT [ALL | DISTINCT]","INTERSECT [ALL | DISTINCT]"]),h0e=v(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL [INNER] JOIN","NATURAL {LEFT | RIGHT | FULL} [OUTER] JOIN"]),p0e=v(["ON {UPDATE | DELETE} [SET NULL | SET DEFAULT]","{ROWS | RANGE} BETWEEN"]),T0e=v([]),hR={name:"sql",tokenizerOptions:{reservedSelect:d0e,reservedClauses:[...f0e,...b3,...fb],reservedSetOperations:E0e,reservedJoins:h0e,reservedKeywordPhrases:p0e,reservedDataTypePhrases:T0e,reservedKeywords:O3,reservedDataTypes:C3,reservedFunctionNames:_3,stringTypes:[{quote:"''-qq-bs",prefixes:["N","U&"]},{quote:"''-raw",prefixes:["X"],requirePrefix:!0}],identTypes:['""-qq',"``"],paramTypes:{positional:!0},operators:["||"]},formatOptions:{onelineClauses:[...b3,...fb],tabularOnelineClauses:fb}}});var w3,L3=G(()=>{w3=["ABS","ACOS","ALL_MATCH","ANY_MATCH","APPROX_DISTINCT","APPROX_MOST_FREQUENT","APPROX_PERCENTILE","APPROX_SET","ARBITRARY","ARRAYS_OVERLAP","ARRAY_AGG","ARRAY_DISTINCT","ARRAY_EXCEPT","ARRAY_INTERSECT","ARRAY_JOIN","ARRAY_MAX","ARRAY_MIN","ARRAY_POSITION","ARRAY_REMOVE","ARRAY_SORT","ARRAY_UNION","ASIN","ATAN","ATAN2","AT_TIMEZONE","AVG","BAR","BETA_CDF","BING_TILE","BING_TILES_AROUND","BING_TILE_AT","BING_TILE_COORDINATES","BING_TILE_POLYGON","BING_TILE_QUADKEY","BING_TILE_ZOOM_LEVEL","BITWISE_AND","BITWISE_AND_AGG","BITWISE_LEFT_SHIFT","BITWISE_NOT","BITWISE_OR","BITWISE_OR_AGG","BITWISE_RIGHT_SHIFT","BITWISE_RIGHT_SHIFT_ARITHMETIC","BITWISE_XOR","BIT_COUNT","BOOL_AND","BOOL_OR","CARDINALITY","CAST","CBRT","CEIL","CEILING","CHAR2HEXINT","CHECKSUM","CHR","CLASSIFY","COALESCE","CODEPOINT","COLOR","COMBINATIONS","CONCAT","CONCAT_WS","CONTAINS","CONTAINS_SEQUENCE","CONVEX_HULL_AGG","CORR","COS","COSH","COSINE_SIMILARITY","COUNT","COUNT_IF","COVAR_POP","COVAR_SAMP","CRC32","CUME_DIST","CURRENT_CATALOG","CURRENT_DATE","CURRENT_GROUPS","CURRENT_SCHEMA","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_TIMEZONE","CURRENT_USER","DATE","DATE_ADD","DATE_DIFF","DATE_FORMAT","DATE_PARSE","DATE_TRUNC","DAY","DAY_OF_MONTH","DAY_OF_WEEK","DAY_OF_YEAR","DEGREES","DENSE_RANK","DOW","DOY","E","ELEMENT_AT","EMPTY_APPROX_SET","EVALUATE_CLASSIFIER_PREDICTIONS","EVERY","EXP","EXTRACT","FEATURES","FILTER","FIRST_VALUE","FLATTEN","FLOOR","FORMAT","FORMAT_DATETIME","FORMAT_NUMBER","FROM_BASE","FROM_BASE32","FROM_BASE64","FROM_BASE64URL","FROM_BIG_ENDIAN_32","FROM_BIG_ENDIAN_64","FROM_ENCODED_POLYLINE","FROM_GEOJSON_GEOMETRY","FROM_HEX","FROM_IEEE754_32","FROM_IEEE754_64","FROM_ISO8601_DATE","FROM_ISO8601_TIMESTAMP","FROM_ISO8601_TIMESTAMP_NANOS","FROM_UNIXTIME","FROM_UNIXTIME_NANOS","FROM_UTF8","GEOMETRIC_MEAN","GEOMETRY_FROM_HADOOP_SHAPE","GEOMETRY_INVALID_REASON","GEOMETRY_NEAREST_POINTS","GEOMETRY_TO_BING_TILES","GEOMETRY_UNION","GEOMETRY_UNION_AGG","GREATEST","GREAT_CIRCLE_DISTANCE","HAMMING_DISTANCE","HASH_COUNTS","HISTOGRAM","HMAC_MD5","HMAC_SHA1","HMAC_SHA256","HMAC_SHA512","HOUR","HUMAN_READABLE_SECONDS","IF","INDEX","INFINITY","INTERSECTION_CARDINALITY","INVERSE_BETA_CDF","INVERSE_NORMAL_CDF","IS_FINITE","IS_INFINITE","IS_JSON_SCALAR","IS_NAN","JACCARD_INDEX","JSON_ARRAY_CONTAINS","JSON_ARRAY_GET","JSON_ARRAY_LENGTH","JSON_EXISTS","JSON_EXTRACT","JSON_EXTRACT_SCALAR","JSON_FORMAT","JSON_PARSE","JSON_QUERY","JSON_SIZE","JSON_VALUE","KURTOSIS","LAG","LAST_DAY_OF_MONTH","LAST_VALUE","LEAD","LEARN_CLASSIFIER","LEARN_LIBSVM_CLASSIFIER","LEARN_LIBSVM_REGRESSOR","LEARN_REGRESSOR","LEAST","LENGTH","LEVENSHTEIN_DISTANCE","LINE_INTERPOLATE_POINT","LINE_INTERPOLATE_POINTS","LINE_LOCATE_POINT","LISTAGG","LN","LOCALTIME","LOCALTIMESTAMP","LOG","LOG10","LOG2","LOWER","LPAD","LTRIM","LUHN_CHECK","MAKE_SET_DIGEST","MAP","MAP_AGG","MAP_CONCAT","MAP_ENTRIES","MAP_FILTER","MAP_FROM_ENTRIES","MAP_KEYS","MAP_UNION","MAP_VALUES","MAP_ZIP_WITH","MAX","MAX_BY","MD5","MERGE","MERGE_SET_DIGEST","MILLISECOND","MIN","MINUTE","MIN_BY","MOD","MONTH","MULTIMAP_AGG","MULTIMAP_FROM_ENTRIES","MURMUR3","NAN","NGRAMS","NONE_MATCH","NORMALIZE","NORMAL_CDF","NOW","NTH_VALUE","NTILE","NULLIF","NUMERIC_HISTOGRAM","OBJECTID","OBJECTID_TIMESTAMP","PARSE_DATA_SIZE","PARSE_DATETIME","PARSE_DURATION","PERCENT_RANK","PI","POSITION","POW","POWER","QDIGEST_AGG","QUARTER","RADIANS","RAND","RANDOM","RANK","REDUCE","REDUCE_AGG","REGEXP_COUNT","REGEXP_EXTRACT","REGEXP_EXTRACT_ALL","REGEXP_LIKE","REGEXP_POSITION","REGEXP_REPLACE","REGEXP_SPLIT","REGRESS","REGR_INTERCEPT","REGR_SLOPE","RENDER","REPEAT","REPLACE","REVERSE","RGB","ROUND","ROW_NUMBER","RPAD","RTRIM","SECOND","SEQUENCE","SHA1","SHA256","SHA512","SHUFFLE","SIGN","SIMPLIFY_GEOMETRY","SIN","SKEWNESS","SLICE","SOUNDEX","SPATIAL_PARTITIONING","SPATIAL_PARTITIONS","SPLIT","SPLIT_PART","SPLIT_TO_MAP","SPLIT_TO_MULTIMAP","SPOOKY_HASH_V2_32","SPOOKY_HASH_V2_64","SQRT","STARTS_WITH","STDDEV","STDDEV_POP","STDDEV_SAMP","STRPOS","ST_AREA","ST_ASBINARY","ST_ASTEXT","ST_BOUNDARY","ST_BUFFER","ST_CENTROID","ST_CONTAINS","ST_CONVEXHULL","ST_COORDDIM","ST_CROSSES","ST_DIFFERENCE","ST_DIMENSION","ST_DISJOINT","ST_DISTANCE","ST_ENDPOINT","ST_ENVELOPE","ST_ENVELOPEASPTS","ST_EQUALS","ST_EXTERIORRING","ST_GEOMETRIES","ST_GEOMETRYFROMTEXT","ST_GEOMETRYN","ST_GEOMETRYTYPE","ST_GEOMFROMBINARY","ST_INTERIORRINGN","ST_INTERIORRINGS","ST_INTERSECTION","ST_INTERSECTS","ST_ISCLOSED","ST_ISEMPTY","ST_ISRING","ST_ISSIMPLE","ST_ISVALID","ST_LENGTH","ST_LINEFROMTEXT","ST_LINESTRING","ST_MULTIPOINT","ST_NUMGEOMETRIES","ST_NUMINTERIORRING","ST_NUMPOINTS","ST_OVERLAPS","ST_POINT","ST_POINTN","ST_POINTS","ST_POLYGON","ST_RELATE","ST_STARTPOINT","ST_SYMDIFFERENCE","ST_TOUCHES","ST_UNION","ST_WITHIN","ST_X","ST_XMAX","ST_XMIN","ST_Y","ST_YMAX","ST_YMIN","SUBSTR","SUBSTRING","SUM","TAN","TANH","TDIGEST_AGG","TIMESTAMP_OBJECTID","TIMEZONE_HOUR","TIMEZONE_MINUTE","TO_BASE","TO_BASE32","TO_BASE64","TO_BASE64URL","TO_BIG_ENDIAN_32","TO_BIG_ENDIAN_64","TO_CHAR","TO_DATE","TO_ENCODED_POLYLINE","TO_GEOJSON_GEOMETRY","TO_GEOMETRY","TO_HEX","TO_IEEE754_32","TO_IEEE754_64","TO_ISO8601","TO_MILLISECONDS","TO_SPHERICAL_GEOGRAPHY","TO_TIMESTAMP","TO_UNIXTIME","TO_UTF8","TRANSFORM","TRANSFORM_KEYS","TRANSFORM_VALUES","TRANSLATE","TRIM","TRIM_ARRAY","TRUNCATE","TRY","TRY_CAST","TYPEOF","UPPER","URL_DECODE","URL_ENCODE","URL_EXTRACT_FRAGMENT","URL_EXTRACT_HOST","URL_EXTRACT_PARAMETER","URL_EXTRACT_PATH","URL_EXTRACT_PORT","URL_EXTRACT_PROTOCOL","URL_EXTRACT_QUERY","UUID","VALUES_AT_QUANTILES","VALUE_AT_QUANTILE","VARIANCE","VAR_POP","VAR_SAMP","VERSION","WEEK","WEEK_OF_YEAR","WIDTH_BUCKET","WILSON_INTERVAL_LOWER","WILSON_INTERVAL_UPPER","WITH_TIMEZONE","WORD_STEM","XXHASH64","YEAR","YEAR_OF_WEEK","YOW","ZIP","ZIP_WITH","CLASSIFIER","FIRST","LAST","MATCH_NUMBER","NEXT","PERMUTE","PREV"]});var D3,P3,x3=G(()=>{D3=["ABSENT","ADD","ADMIN","AFTER","ALL","ALTER","ANALYZE","AND","ANY","AS","ASC","AT","AUTHORIZATION","BERNOULLI","BETWEEN","BOTH","BY","CALL","CASCADE","CASE","CATALOGS","COLUMN","COLUMNS","COMMENT","COMMIT","COMMITTED","CONDITIONAL","CONSTRAINT","COPARTITION","CREATE","CROSS","CUBE","CURRENT","CURRENT_PATH","CURRENT_ROLE","DATA","DEALLOCATE","DEFAULT","DEFINE","DEFINER","DELETE","DENY","DESC","DESCRIBE","DESCRIPTOR","DISTINCT","DISTRIBUTED","DOUBLE","DROP","ELSE","EMPTY","ENCODING","END","ERROR","ESCAPE","EXCEPT","EXCLUDING","EXECUTE","EXISTS","EXPLAIN","FALSE","FETCH","FINAL","FIRST","FOLLOWING","FOR","FROM","FULL","FUNCTIONS","GRANT","GRANTED","GRANTS","GRAPHVIZ","GROUP","GROUPING","GROUPS","HAVING","IGNORE","IN","INCLUDING","INITIAL","INNER","INPUT","INSERT","INTERSECT","INTERVAL","INTO","INVOKER","IO","IS","ISOLATION","JOIN","JSON","JSON_ARRAY","JSON_OBJECT","KEEP","KEY","KEYS","LAST","LATERAL","LEADING","LEFT","LEVEL","LIKE","LIMIT","LOCAL","LOGICAL","MATCH","MATCHED","MATCHES","MATCH_RECOGNIZE","MATERIALIZED","MEASURES","NATURAL","NEXT","NFC","NFD","NFKC","NFKD","NO","NONE","NOT","NULL","NULLS","OBJECT","OF","OFFSET","OMIT","ON","ONE","ONLY","OPTION","OR","ORDER","ORDINALITY","OUTER","OUTPUT","OVER","OVERFLOW","PARTITION","PARTITIONS","PASSING","PAST","PATH","PATTERN","PER","PERMUTE","PRECEDING","PRECISION","PREPARE","PRIVILEGES","PROPERTIES","PRUNE","QUOTES","RANGE","READ","RECURSIVE","REFRESH","RENAME","REPEATABLE","RESET","RESPECT","RESTRICT","RETURNING","REVOKE","RIGHT","ROLE","ROLES","ROLLBACK","ROLLUP","ROW","ROWS","RUNNING","SCALAR","SCHEMA","SCHEMAS","SECURITY","SEEK","SELECT","SERIALIZABLE","SESSION","SET","SETS","SHOW","SKIP","SOME","START","STATS","STRING","SUBSET","SYSTEM","TABLE","TABLES","TABLESAMPLE","TEXT","THEN","TIES","TIME","TIMESTAMP","TO","TRAILING","TRANSACTION","TRUE","TYPE","UESCAPE","UNBOUNDED","UNCOMMITTED","UNCONDITIONAL","UNION","UNIQUE","UNKNOWN","UNMATCHED","UNNEST","UPDATE","USE","USER","USING","UTF16","UTF32","UTF8","VALIDATE","VALUE","VALUES","VERBOSE","VIEW","WHEN","WHERE","WINDOW","WITH","WITHIN","WITHOUT","WORK","WRAPPER","WRITE","ZONE"],P3=["BIGINT","INT","INTEGER","SMALLINT","TINYINT","BOOLEAN","DATE","DECIMAL","REAL","DOUBLE","HYPERLOGLOG","QDIGEST","TDIGEST","P4HYPERLOGLOG","INTERVAL","TIMESTAMP","TIME","VARBINARY","VARCHAR","CHAR","ROW","ARRAY","MAP","JSON","JSON2016","IPADDRESS","GEOMETRY","UUID","SETDIGEST","JONIREGEXP","RE2JREGEXP","LIKEPATTERN","COLOR","CODEPOINTS","FUNCTION","JSONPATH"]});var S0e,R0e,v3,hb,A0e,m0e,g0e,I0e,pR,pb=G(()=>{vt();L3();x3();S0e=v(["SELECT [ALL | DISTINCT]"]),R0e=v(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY [ALL | DISTINCT]","HAVING","WINDOW","PARTITION BY","ORDER BY","LIMIT","OFFSET","FETCH {FIRST | NEXT}","INSERT INTO","VALUES","SET","MATCH_RECOGNIZE","MEASURES","ONE ROW PER MATCH","ALL ROWS PER MATCH","AFTER MATCH","PATTERN","SUBSET","DEFINE"]),v3=v(["CREATE TABLE [IF NOT EXISTS]"]),hb=v(["CREATE [OR REPLACE] [MATERIALIZED] VIEW","UPDATE","DELETE FROM","DROP TABLE [IF EXISTS]","ALTER TABLE [IF EXISTS]","ADD COLUMN [IF NOT EXISTS]","DROP COLUMN [IF EXISTS]","RENAME COLUMN [IF EXISTS]","RENAME TO","SET AUTHORIZATION [USER | ROLE]","SET PROPERTIES","EXECUTE","TRUNCATE TABLE","ALTER SCHEMA","ALTER MATERIALIZED VIEW","ALTER VIEW","CREATE SCHEMA","CREATE ROLE","DROP SCHEMA","DROP MATERIALIZED VIEW","DROP VIEW","DROP ROLE","EXPLAIN","ANALYZE","EXPLAIN ANALYZE","EXPLAIN ANALYZE VERBOSE","USE","DESCRIBE INPUT","DESCRIBE OUTPUT","REFRESH MATERIALIZED VIEW","RESET SESSION","SET SESSION","SET PATH","SET TIME ZONE","SHOW GRANTS","SHOW CREATE TABLE","SHOW CREATE SCHEMA","SHOW CREATE VIEW","SHOW CREATE MATERIALIZED VIEW","SHOW TABLES","SHOW SCHEMAS","SHOW CATALOGS","SHOW COLUMNS","SHOW STATS FOR","SHOW ROLES","SHOW CURRENT ROLES","SHOW ROLE GRANTS","SHOW FUNCTIONS","SHOW SESSION"]),A0e=v(["UNION [ALL | DISTINCT]","EXCEPT [ALL | DISTINCT]","INTERSECT [ALL | DISTINCT]"]),m0e=v(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL [INNER] JOIN","NATURAL {LEFT | RIGHT | FULL} [OUTER] JOIN"]),g0e=v(["{ROWS | RANGE | GROUPS} BETWEEN","IS [NOT] DISTINCT FROM"]),I0e=v([]),pR={name:"trino",tokenizerOptions:{reservedSelect:S0e,reservedClauses:[...R0e,...v3,...hb],reservedSetOperations:A0e,reservedJoins:m0e,reservedKeywordPhrases:g0e,reservedDataTypePhrases:I0e,reservedKeywords:D3,reservedDataTypes:P3,reservedFunctionNames:w3,extraParens:["[]","{}"],stringTypes:[{quote:"''-qq",prefixes:["U&"]},{quote:"''-raw",prefixes:["X"],requirePrefix:!0}],identTypes:['""-qq'],paramTypes:{positional:!0},operators:["%","->","=>",":","||","|","^","$"]},formatOptions:{onelineClauses:[...v3,...hb],tabularOnelineClauses:hb}}});var M3,U3=G(()=>{M3=["APPROX_COUNT_DISTINCT","AVG","CHECKSUM_AGG","COUNT","COUNT_BIG","GROUPING","GROUPING_ID","MAX","MIN","STDEV","STDEVP","SUM","VAR","VARP","CUME_DIST","FIRST_VALUE","LAG","LAST_VALUE","LEAD","PERCENTILE_CONT","PERCENTILE_DISC","PERCENT_RANK","Collation - COLLATIONPROPERTY","Collation - TERTIARY_WEIGHTS","@@DBTS","@@LANGID","@@LANGUAGE","@@LOCK_TIMEOUT","@@MAX_CONNECTIONS","@@MAX_PRECISION","@@NESTLEVEL","@@OPTIONS","@@REMSERVER","@@SERVERNAME","@@SERVICENAME","@@SPID","@@TEXTSIZE","@@VERSION","CAST","CONVERT","PARSE","TRY_CAST","TRY_CONVERT","TRY_PARSE","ASYMKEY_ID","ASYMKEYPROPERTY","CERTPROPERTY","CERT_ID","CRYPT_GEN_RANDOM","DECRYPTBYASYMKEY","DECRYPTBYCERT","DECRYPTBYKEY","DECRYPTBYKEYAUTOASYMKEY","DECRYPTBYKEYAUTOCERT","DECRYPTBYPASSPHRASE","ENCRYPTBYASYMKEY","ENCRYPTBYCERT","ENCRYPTBYKEY","ENCRYPTBYPASSPHRASE","HASHBYTES","IS_OBJECTSIGNED","KEY_GUID","KEY_ID","KEY_NAME","SIGNBYASYMKEY","SIGNBYCERT","SYMKEYPROPERTY","VERIFYSIGNEDBYCERT","VERIFYSIGNEDBYASYMKEY","@@CURSOR_ROWS","@@FETCH_STATUS","CURSOR_STATUS","DATALENGTH","IDENT_CURRENT","IDENT_INCR","IDENT_SEED","IDENTITY","SQL_VARIANT_PROPERTY","@@DATEFIRST","CURRENT_TIMESTAMP","CURRENT_TIMEZONE","CURRENT_TIMEZONE_ID","DATEADD","DATEDIFF","DATEDIFF_BIG","DATEFROMPARTS","DATENAME","DATEPART","DATETIME2FROMPARTS","DATETIMEFROMPARTS","DATETIMEOFFSETFROMPARTS","DAY","EOMONTH","GETDATE","GETUTCDATE","ISDATE","MONTH","SMALLDATETIMEFROMPARTS","SWITCHOFFSET","SYSDATETIME","SYSDATETIMEOFFSET","SYSUTCDATETIME","TIMEFROMPARTS","TODATETIMEOFFSET","YEAR","JSON","ISJSON","JSON_VALUE","JSON_QUERY","JSON_MODIFY","ABS","ACOS","ASIN","ATAN","ATN2","CEILING","COS","COT","DEGREES","EXP","FLOOR","LOG","LOG10","PI","POWER","RADIANS","RAND","ROUND","SIGN","SIN","SQRT","SQUARE","TAN","CHOOSE","GREATEST","IIF","LEAST","@@PROCID","APP_NAME","APPLOCK_MODE","APPLOCK_TEST","ASSEMBLYPROPERTY","COL_LENGTH","COL_NAME","COLUMNPROPERTY","DATABASEPROPERTYEX","DB_ID","DB_NAME","FILE_ID","FILE_IDEX","FILE_NAME","FILEGROUP_ID","FILEGROUP_NAME","FILEGROUPPROPERTY","FILEPROPERTY","FILEPROPERTYEX","FULLTEXTCATALOGPROPERTY","FULLTEXTSERVICEPROPERTY","INDEX_COL","INDEXKEY_PROPERTY","INDEXPROPERTY","NEXT VALUE FOR","OBJECT_DEFINITION","OBJECT_ID","OBJECT_NAME","OBJECT_SCHEMA_NAME","OBJECTPROPERTY","OBJECTPROPERTYEX","ORIGINAL_DB_NAME","PARSENAME","SCHEMA_ID","SCHEMA_NAME","SCOPE_IDENTITY","SERVERPROPERTY","STATS_DATE","TYPE_ID","TYPE_NAME","TYPEPROPERTY","DENSE_RANK","NTILE","RANK","ROW_NUMBER","PUBLISHINGSERVERNAME","CERTENCODED","CERTPRIVATEKEY","CURRENT_USER","DATABASE_PRINCIPAL_ID","HAS_DBACCESS","HAS_PERMS_BY_NAME","IS_MEMBER","IS_ROLEMEMBER","IS_SRVROLEMEMBER","LOGINPROPERTY","ORIGINAL_LOGIN","PERMISSIONS","PWDENCRYPT","PWDCOMPARE","SESSION_USER","SESSIONPROPERTY","SUSER_ID","SUSER_NAME","SUSER_SID","SUSER_SNAME","SYSTEM_USER","USER","USER_ID","USER_NAME","ASCII","CHARINDEX","CONCAT","CONCAT_WS","DIFFERENCE","FORMAT","LEFT","LEN","LOWER","LTRIM","PATINDEX","QUOTENAME","REPLACE","REPLICATE","REVERSE","RIGHT","RTRIM","SOUNDEX","SPACE","STR","STRING_AGG","STRING_ESCAPE","STUFF","SUBSTRING","TRANSLATE","TRIM","UNICODE","UPPER","$PARTITION","@@ERROR","@@IDENTITY","@@PACK_RECEIVED","@@ROWCOUNT","@@TRANCOUNT","BINARY_CHECKSUM","CHECKSUM","COMPRESS","CONNECTIONPROPERTY","CONTEXT_INFO","CURRENT_REQUEST_ID","CURRENT_TRANSACTION_ID","DECOMPRESS","ERROR_LINE","ERROR_MESSAGE","ERROR_NUMBER","ERROR_PROCEDURE","ERROR_SEVERITY","ERROR_STATE","FORMATMESSAGE","GET_FILESTREAM_TRANSACTION_CONTEXT","GETANSINULL","HOST_ID","HOST_NAME","ISNULL","ISNUMERIC","MIN_ACTIVE_ROWVERSION","NEWID","NEWSEQUENTIALID","ROWCOUNT_BIG","SESSION_CONTEXT","XACT_STATE","@@CONNECTIONS","@@CPU_BUSY","@@IDLE","@@IO_BUSY","@@PACK_SENT","@@PACKET_ERRORS","@@TIMETICKS","@@TOTAL_ERRORS","@@TOTAL_READ","@@TOTAL_WRITE","TEXTPTR","TEXTVALID","COLUMNS_UPDATED","EVENTDATA","TRIGGER_NESTLEVEL","UPDATE","COALESCE","NULLIF"]});var B3,F3,H3=G(()=>{B3=["ADD","ALL","ALTER","AND","ANY","AS","ASC","AUTHORIZATION","BACKUP","BEGIN","BETWEEN","BREAK","BROWSE","BULK","BY","CASCADE","CHECK","CHECKPOINT","CLOSE","CLUSTERED","COALESCE","COLLATE","COLUMN","COMMIT","COMPUTE","CONSTRAINT","CONTAINS","CONTAINSTABLE","CONTINUE","CONVERT","CREATE","CROSS","CURRENT","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURSOR","DATABASE","DBCC","DEALLOCATE","DECLARE","DEFAULT","DELETE","DENY","DESC","DISK","DISTINCT","DISTRIBUTED","DROP","DUMP","ERRLVL","ESCAPE","EXEC","EXECUTE","EXISTS","EXIT","EXTERNAL","FETCH","FILE","FILLFACTOR","FOR","FOREIGN","FREETEXT","FREETEXTTABLE","FROM","FULL","FUNCTION","GOTO","GRANT","GROUP","HAVING","HOLDLOCK","IDENTITY","IDENTITYCOL","IDENTITY_INSERT","IF","IN","INDEX","INNER","INSERT","INTERSECT","INTO","IS","JOIN","KEY","KILL","LEFT","LIKE","LINENO","LOAD","MERGE","NOCHECK","NONCLUSTERED","NOT","NULL","NULLIF","OF","OFF","OFFSETS","ON","OPEN","OPENDATASOURCE","OPENQUERY","OPENROWSET","OPENXML","OPTION","OR","ORDER","OUTER","OVER","PERCENT","PIVOT","PLAN","PRIMARY","PRINT","PROC","PROCEDURE","PUBLIC","RAISERROR","READ","READTEXT","RECONFIGURE","REFERENCES","REPLICATION","RESTORE","RESTRICT","RETURN","REVERT","REVOKE","RIGHT","ROLLBACK","ROWCOUNT","ROWGUIDCOL","RULE","SAVE","SCHEMA","SECURITYAUDIT","SELECT","SEMANTICKEYPHRASETABLE","SEMANTICSIMILARITYDETAILSTABLE","SEMANTICSIMILARITYTABLE","SESSION_USER","SET","SETUSER","SHUTDOWN","SOME","STATISTICS","SYSTEM_USER","TABLE","TABLESAMPLE","TEXTSIZE","THEN","TO","TOP","TRAN","TRANSACTION","TRIGGER","TRUNCATE","TRY_CONVERT","TSEQUAL","UNION","UNIQUE","UNPIVOT","UPDATE","UPDATETEXT","USE","USER","VALUES","VIEW","WAITFOR","WHERE","WHILE","WITH","WITHIN GROUP","WRITETEXT","$ACTION"],F3=["BINARY","BIT","CHAR","CHAR","CHARACTER","DATE","DATETIME2","DATETIMEOFFSET","DEC","DECIMAL","DOUBLE","FLOAT","INT","INTEGER","NATIONAL","NCHAR","NUMERIC","NVARCHAR","PRECISION","REAL","SMALLINT","TIME","TIMESTAMP","VARBINARY","VARCHAR"]});var _0e,N0e,G3,Tb,O0e,C0e,y0e,b0e,TR,Sb=G(()=>{vt();U3();H3();_0e=v(["SELECT [ALL | DISTINCT]"]),N0e=v(["WITH","INTO","FROM","WHERE","GROUP BY","HAVING","WINDOW","PARTITION BY","ORDER BY","OFFSET","FETCH {FIRST | NEXT}","FOR {BROWSE | XML | JSON}","OPTION","INSERT [INTO]","VALUES","SET","MERGE [INTO]","WHEN [NOT] MATCHED [BY TARGET | BY SOURCE] [THEN]","UPDATE SET"]),G3=v(["CREATE TABLE"]),Tb=v(["CREATE [OR ALTER] [MATERIALIZED] VIEW","UPDATE","WHERE CURRENT OF","DELETE [FROM]","DROP TABLE [IF EXISTS]","ALTER TABLE","ADD","DROP COLUMN [IF EXISTS]","ALTER COLUMN","TRUNCATE TABLE","CREATE [UNIQUE] [CLUSTERED] INDEX","CREATE DATABASE","ALTER DATABASE","DROP DATABASE [IF EXISTS]","CREATE [OR ALTER] [PARTITION] {FUNCTION | PROCEDURE | PROC}","ALTER [PARTITION] {FUNCTION | PROCEDURE | PROC}","DROP [PARTITION] {FUNCTION | PROCEDURE | PROC} [IF EXISTS]","GO","USE","ADD SENSITIVITY CLASSIFICATION","ADD SIGNATURE","AGGREGATE","ANSI_DEFAULTS","ANSI_NULLS","ANSI_NULL_DFLT_OFF","ANSI_NULL_DFLT_ON","ANSI_PADDING","ANSI_WARNINGS","APPLICATION ROLE","ARITHABORT","ARITHIGNORE","ASSEMBLY","ASYMMETRIC KEY","AUTHORIZATION","AVAILABILITY GROUP","BACKUP","BACKUP CERTIFICATE","BACKUP MASTER KEY","BACKUP SERVICE MASTER KEY","BEGIN CONVERSATION TIMER","BEGIN DIALOG CONVERSATION","BROKER PRIORITY","BULK INSERT","CERTIFICATE","CLOSE MASTER KEY","CLOSE SYMMETRIC KEY","COLUMN ENCRYPTION KEY","COLUMN MASTER KEY","COLUMNSTORE INDEX","CONCAT_NULL_YIELDS_NULL","CONTEXT_INFO","CONTRACT","CREDENTIAL","CRYPTOGRAPHIC PROVIDER","CURSOR_CLOSE_ON_COMMIT","DATABASE","DATABASE AUDIT SPECIFICATION","DATABASE ENCRYPTION KEY","DATABASE HADR","DATABASE SCOPED CONFIGURATION","DATABASE SCOPED CREDENTIAL","DATABASE SET","DATEFIRST","DATEFORMAT","DEADLOCK_PRIORITY","DENY","DENY XML","DISABLE TRIGGER","ENABLE TRIGGER","END CONVERSATION","ENDPOINT","EVENT NOTIFICATION","EVENT SESSION","EXECUTE AS","EXTERNAL DATA SOURCE","EXTERNAL FILE FORMAT","EXTERNAL LANGUAGE","EXTERNAL LIBRARY","EXTERNAL RESOURCE POOL","EXTERNAL TABLE","FIPS_FLAGGER","FMTONLY","FORCEPLAN","FULLTEXT CATALOG","FULLTEXT INDEX","FULLTEXT STOPLIST","GET CONVERSATION GROUP","GET_TRANSMISSION_STATUS","GRANT","GRANT XML","IDENTITY_INSERT","IMPLICIT_TRANSACTIONS","INDEX","LANGUAGE","LOCK_TIMEOUT","LOGIN","MASTER KEY","MESSAGE TYPE","MOVE CONVERSATION","NOCOUNT","NOEXEC","NUMERIC_ROUNDABORT","OFFSETS","OPEN MASTER KEY","OPEN SYMMETRIC KEY","PARSEONLY","PARTITION SCHEME","QUERY_GOVERNOR_COST_LIMIT","QUEUE","QUOTED_IDENTIFIER","RECEIVE","REMOTE SERVICE BINDING","REMOTE_PROC_TRANSACTIONS","RESOURCE GOVERNOR","RESOURCE POOL","RESTORE","RESTORE FILELISTONLY","RESTORE HEADERONLY","RESTORE LABELONLY","RESTORE MASTER KEY","RESTORE REWINDONLY","RESTORE SERVICE MASTER KEY","RESTORE VERIFYONLY","REVERT","REVOKE","REVOKE XML","ROLE","ROUTE","ROWCOUNT","RULE","SCHEMA","SEARCH PROPERTY LIST","SECURITY POLICY","SELECTIVE XML INDEX","SEND","SENSITIVITY CLASSIFICATION","SEQUENCE","SERVER AUDIT","SERVER AUDIT SPECIFICATION","SERVER CONFIGURATION","SERVER ROLE","SERVICE","SERVICE MASTER KEY","SETUSER","SHOWPLAN_ALL","SHOWPLAN_TEXT","SHOWPLAN_XML","SIGNATURE","SPATIAL INDEX","STATISTICS","STATISTICS IO","STATISTICS PROFILE","STATISTICS TIME","STATISTICS XML","SYMMETRIC KEY","SYNONYM","TABLE","TABLE IDENTITY","TEXTSIZE","TRANSACTION ISOLATION LEVEL","TRIGGER","TYPE","UPDATE STATISTICS","USER","WORKLOAD GROUP","XACT_ABORT","XML INDEX","XML SCHEMA COLLECTION"]),O0e=v(["UNION [ALL]","EXCEPT","INTERSECT"]),C0e=v(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","{CROSS | OUTER} APPLY"]),y0e=v(["ON {UPDATE | DELETE} [SET NULL | SET DEFAULT]","{ROWS | RANGE} BETWEEN"]),b0e=v([]),TR={name:"transactsql",tokenizerOptions:{reservedSelect:_0e,reservedClauses:[...N0e,...G3,...Tb],reservedSetOperations:O0e,reservedJoins:C0e,reservedKeywordPhrases:y0e,reservedDataTypePhrases:b0e,reservedKeywords:B3,reservedDataTypes:F3,reservedFunctionNames:M3,nestedBlockComments:!0,stringTypes:[{quote:"''-qq",prefixes:["N"]},"{}"],identTypes:['""-qq',"[]"],identChars:{first:"#@",rest:"#@$"},paramTypes:{named:["@"],quoted:["@"]},operators:["%","&","|","^","~","!<","!>","+=","-=","*=","/=","%=","|=","&=","^=","::",":"],propertyAccessOperators:[".."]},formatOptions:{alwaysDenseOperators:["::"],onelineClauses:[...G3,...Tb],tabularOnelineClauses:Tb}}});var W3,$3,k3=G(()=>{W3=["ADD","ALL","ALTER","ANALYZE","AND","AS","ASC","ASENSITIVE","BEFORE","BETWEEN","_BINARY","BOTH","BY","CALL","CASCADE","CASE","CHANGE","CHECK","COLLATE","COLUMN","CONDITION","CONSTRAINT","CONTINUE","CONVERT","CREATE","CROSS","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURSOR","DATABASE","DATABASES","DAY_HOUR","DAY_MICROSECOND","DAY_MINUTE","DAY_SECOND","DECLARE","DEFAULT","DELAYED","DELETE","DESC","DESCRIBE","DETERMINISTIC","DISTINCT","DISTINCTROW","DIV","DROP","DUAL","EACH","ELSE","ELSEIF","ENCLOSED","ESCAPED","EXCEPT","EXISTS","EXIT","EXPLAIN","EXTRA_JOIN","FALSE","FETCH","FOR","FORCE","FORCE_COMPILED_MODE","FORCE_INTERPRETER_MODE","FOREIGN","FROM","FULL","FULLTEXT","GRANT","GROUP","HAVING","HEARTBEAT_NO_LOGGING","HIGH_PRIORITY","HOUR_MICROSECOND","HOUR_MINUTE","HOUR_SECOND","IF","IGNORE","IN","INDEX","INFILE","INNER","INOUT","INSENSITIVE","INSERT","IN","_INTERNAL_DYNAMIC_TYPECAST","INTERSECT","INTERVAL","INTO","ITERATE","JOIN","KEY","KEYS","KILL","LEADING","LEAVE","LEFT","LIKE","LIMIT","LINES","LOAD","LOCALTIME","LOCALTIMESTAMP","LOCK","LOOP","LOW_PRIORITY","MATCH","MAXVALUE","MINUS","MINUTE_MICROSECOND","MINUTE_SECOND","MOD","MODIFIES","NATURAL","NO_QUERY_REWRITE","NOT","NO_WRITE_TO_BINLOG","NO_QUERY_REWRITE","NULL","ON","OPTIMIZE","OPTION","OPTIONALLY","OR","ORDER","OUT","OUTER","OUTFILE","OVER","PRIMARY","PROCEDURE","PURGE","RANGE","READ","READS","REFERENCES","REGEXP","RELEASE","RENAME","REPEAT","REPLACE","REQUIRE","RESTRICT","RETURN","REVOKE","RIGHT","RIGHT_ANTI_JOIN","RIGHT_SEMI_JOIN","RIGHT_STRAIGHT_JOIN","RLIKE","SCHEMA","SCHEMAS","SECOND_MICROSECOND","SELECT","SEMI_JOIN","SENSITIVE","SEPARATOR","SET","SHOW","SIGNAL","SPATIAL","SPECIFIC","SQL","SQL_BIG_RESULT","SQL_BUFFER_RESULT","SQL_CACHE","SQL_CALC_FOUND_ROWS","SQLEXCEPTION","SQL_NO_CACHE","SQL_NO_LOGGING","SQL_SMALL_RESULT","SQLSTATE","SQLWARNING","STRAIGHT_JOIN","TABLE","TERMINATED","THEN","TO","TRAILING","TRIGGER","TRUE","UNBOUNDED","UNDO","UNION","UNIQUE","UNLOCK","UPDATE","USAGE","USE","USING","UTC_DATE","UTC_TIME","UTC_TIMESTAMP","_UTF8","VALUES","WHEN","WHERE","WHILE","WINDOW","WITH","WITHIN","WRITE","XOR","YEAR_MONTH","ZEROFILL"],$3=["BIGINT","BINARY","BIT","BLOB","CHAR","CHARACTER","DATETIME","DEC","DECIMAL","DOUBLE PRECISION","DOUBLE","ENUM","FIXED","FLOAT","FLOAT4","FLOAT8","INT","INT1","INT2","INT3","INT4","INT8","INTEGER","LONG","LONGBLOB","LONGTEXT","MEDIUMBLOB","MEDIUMINT","MEDIUMTEXT","MIDDLEINT","NATIONAL CHAR","NATIONAL VARCHAR","NUMERIC","PRECISION","REAL","SMALLINT","TEXT","TIME","TIMESTAMP","TINYBLOB","TINYINT","TINYTEXT","UNSIGNED","VARBINARY","VARCHAR","VARCHARACTER","YEAR"]});var Y3,V3=G(()=>{Y3=["ABS","ACOS","ADDDATE","ADDTIME","AES_DECRYPT","AES_ENCRYPT","ANY_VALUE","APPROX_COUNT_DISTINCT","APPROX_COUNT_DISTINCT_ACCUMULATE","APPROX_COUNT_DISTINCT_COMBINE","APPROX_COUNT_DISTINCT_ESTIMATE","APPROX_GEOGRAPHY_INTERSECTS","APPROX_PERCENTILE","ASCII","ASIN","ATAN","ATAN2","AVG","BIN","BINARY","BIT_AND","BIT_COUNT","BIT_OR","BIT_XOR","CAST","CEIL","CEILING","CHAR","CHARACTER_LENGTH","CHAR_LENGTH","CHARSET","COALESCE","COERCIBILITY","COLLATION","COLLECT","CONCAT","CONCAT_WS","CONNECTION_ID","CONV","CONVERT","CONVERT_TZ","COS","COT","COUNT","CUME_DIST","CURDATE","CURRENT_DATE","CURRENT_ROLE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURTIME","DATABASE","DATE","DATE_ADD","DATEDIFF","DATE_FORMAT","DATE_SUB","DATE_TRUNC","DAY","DAYNAME","DAYOFMONTH","DAYOFWEEK","DAYOFYEAR","DECODE","DEFAULT","DEGREES","DENSE_RANK","DIV","DOT_PRODUCT","ELT","EUCLIDEAN_DISTANCE","EXP","EXTRACT","FIELD","FIRST","FIRST_VALUE","FLOOR","FORMAT","FOUND_ROWS","FROM_BASE64","FROM_DAYS","FROM_UNIXTIME","GEOGRAPHY_AREA","GEOGRAPHY_CONTAINS","GEOGRAPHY_DISTANCE","GEOGRAPHY_INTERSECTS","GEOGRAPHY_LATITUDE","GEOGRAPHY_LENGTH","GEOGRAPHY_LONGITUDE","GEOGRAPHY_POINT","GEOGRAPHY_WITHIN_DISTANCE","GEOMETRY_AREA","GEOMETRY_CONTAINS","GEOMETRY_DISTANCE","GEOMETRY_FILTER","GEOMETRY_INTERSECTS","GEOMETRY_LENGTH","GEOMETRY_POINT","GEOMETRY_WITHIN_DISTANCE","GEOMETRY_X","GEOMETRY_Y","GREATEST","GROUPING","GROUP_CONCAT","HEX","HIGHLIGHT","HOUR","ICU_VERSION","IF","IFNULL","INET_ATON","INET_NTOA","INET6_ATON","INET6_NTOA","INITCAP","INSERT","INSTR","INTERVAL","IS","IS NULL","JSON_AGG","JSON_ARRAY_CONTAINS_DOUBLE","JSON_ARRAY_CONTAINS_JSON","JSON_ARRAY_CONTAINS_STRING","JSON_ARRAY_PUSH_DOUBLE","JSON_ARRAY_PUSH_JSON","JSON_ARRAY_PUSH_STRING","JSON_DELETE_KEY","JSON_EXTRACT_DOUBLE","JSON_EXTRACT_JSON","JSON_EXTRACT_STRING","JSON_EXTRACT_BIGINT","JSON_GET_TYPE","JSON_LENGTH","JSON_SET_DOUBLE","JSON_SET_JSON","JSON_SET_STRING","JSON_SPLICE_DOUBLE","JSON_SPLICE_JSON","JSON_SPLICE_STRING","LAG","LAST_DAY","LAST_VALUE","LCASE","LEAD","LEAST","LEFT","LENGTH","LIKE","LN","LOCALTIME","LOCALTIMESTAMP","LOCATE","LOG","LOG10","LOG2","LPAD","LTRIM","MATCH","MAX","MD5","MEDIAN","MICROSECOND","MIN","MINUTE","MOD","MONTH","MONTHNAME","MONTHS_BETWEEN","NOT","NOW","NTH_VALUE","NTILE","NULLIF","OCTET_LENGTH","PERCENT_RANK","PERCENTILE_CONT","PERCENTILE_DISC","PI","PIVOT","POSITION","POW","POWER","QUARTER","QUOTE","RADIANS","RAND","RANK","REGEXP","REPEAT","REPLACE","REVERSE","RIGHT","RLIKE","ROUND","ROW_COUNT","ROW_NUMBER","RPAD","RTRIM","SCALAR","SCHEMA","SEC_TO_TIME","SHA1","SHA2","SIGMOID","SIGN","SIN","SLEEP","SPLIT","SOUNDEX","SOUNDS LIKE","SOURCE_POS_WAIT","SPACE","SQRT","STDDEV","STDDEV_POP","STDDEV_SAMP","STR_TO_DATE","SUBDATE","SUBSTR","SUBSTRING","SUBSTRING_INDEX","SUM","SYS_GUID","TAN","TIME","TIMEDIFF","TIME_BUCKET","TIME_FORMAT","TIMESTAMP","TIMESTAMPADD","TIMESTAMPDIFF","TIME_TO_SEC","TO_BASE64","TO_CHAR","TO_DAYS","TO_JSON","TO_NUMBER","TO_SECONDS","TO_TIMESTAMP","TRIM","TRUNC","TRUNCATE","UCASE","UNHEX","UNIX_TIMESTAMP","UPDATEXML","UPPER","UTC_DATE","UTC_TIME","UTC_TIMESTAMP","UUID","VALUES","VARIANCE","VAR_POP","VAR_SAMP","VECTOR_SUB","VERSION","WEEK","WEEKDAY","WEEKOFYEAR","YEAR"]});var w0e,L0e,q3,Rb,D0e,P0e,x0e,v0e,SR,Ab=G(()=>{vt();ff();k3();V3();w0e=v(["SELECT [ALL | DISTINCT | DISTINCTROW]"]),L0e=v(["WITH","FROM","WHERE","GROUP BY","HAVING","PARTITION BY","ORDER BY","LIMIT","OFFSET","INSERT [IGNORE] [INTO]","VALUES","REPLACE [INTO]","ON DUPLICATE KEY UPDATE","SET","CREATE [OR REPLACE] [TEMPORARY] PROCEDURE [IF NOT EXISTS]","CREATE [OR REPLACE] [EXTERNAL] FUNCTION"]),q3=v(["CREATE [ROWSTORE] [REFERENCE | TEMPORARY | GLOBAL TEMPORARY] TABLE [IF NOT EXISTS]"]),Rb=v(["CREATE VIEW","UPDATE","DELETE [FROM]","DROP [TEMPORARY] TABLE [IF EXISTS]","ALTER [ONLINE] TABLE","ADD [COLUMN]","ADD [UNIQUE] {INDEX | KEY}","DROP [COLUMN]","MODIFY [COLUMN]","CHANGE","RENAME [TO | AS]","TRUNCATE [TABLE]","ADD AGGREGATOR","ADD LEAF","AGGREGATOR SET AS MASTER","ALTER DATABASE","ALTER PIPELINE","ALTER RESOURCE POOL","ALTER USER","ALTER VIEW","ANALYZE TABLE","ATTACH DATABASE","ATTACH LEAF","ATTACH LEAF ALL","BACKUP DATABASE","BINLOG","BOOTSTRAP AGGREGATOR","CACHE INDEX","CALL","CHANGE","CHANGE MASTER TO","CHANGE REPLICATION FILTER","CHANGE REPLICATION SOURCE TO","CHECK BLOB CHECKSUM","CHECK TABLE","CHECKSUM TABLE","CLEAR ORPHAN DATABASES","CLONE","COMMIT","CREATE DATABASE","CREATE GROUP","CREATE INDEX","CREATE LINK","CREATE MILESTONE","CREATE PIPELINE","CREATE RESOURCE POOL","CREATE ROLE","CREATE USER","DEALLOCATE PREPARE","DESCRIBE","DETACH DATABASE","DETACH PIPELINE","DROP DATABASE","DROP FUNCTION","DROP INDEX","DROP LINK","DROP PIPELINE","DROP PROCEDURE","DROP RESOURCE POOL","DROP ROLE","DROP USER","DROP VIEW","EXECUTE","EXPLAIN","FLUSH","FORCE","GRANT","HANDLER","HELP","KILL CONNECTION","KILLALL QUERIES","LOAD DATA","LOAD INDEX INTO CACHE","LOAD XML","LOCK INSTANCE FOR BACKUP","LOCK TABLES","MASTER_POS_WAIT","OPTIMIZE TABLE","PREPARE","PURGE BINARY LOGS","REBALANCE PARTITIONS","RELEASE SAVEPOINT","REMOVE AGGREGATOR","REMOVE LEAF","REPAIR TABLE","REPLACE","REPLICATE DATABASE","RESET","RESET MASTER","RESET PERSIST","RESET REPLICA","RESET SLAVE","RESTART","RESTORE DATABASE","RESTORE REDUNDANCY","REVOKE","ROLLBACK","ROLLBACK TO SAVEPOINT","SAVEPOINT","SET CHARACTER SET","SET DEFAULT ROLE","SET NAMES","SET PASSWORD","SET RESOURCE GROUP","SET ROLE","SET TRANSACTION","SHOW","SHOW CHARACTER SET","SHOW COLLATION","SHOW COLUMNS","SHOW CREATE DATABASE","SHOW CREATE FUNCTION","SHOW CREATE PIPELINE","SHOW CREATE PROCEDURE","SHOW CREATE TABLE","SHOW CREATE USER","SHOW CREATE VIEW","SHOW DATABASES","SHOW ENGINE","SHOW ENGINES","SHOW ERRORS","SHOW FUNCTION CODE","SHOW FUNCTION STATUS","SHOW GRANTS","SHOW INDEX","SHOW MASTER STATUS","SHOW OPEN TABLES","SHOW PLUGINS","SHOW PRIVILEGES","SHOW PROCEDURE CODE","SHOW PROCEDURE STATUS","SHOW PROCESSLIST","SHOW PROFILE","SHOW PROFILES","SHOW RELAYLOG EVENTS","SHOW REPLICA STATUS","SHOW REPLICAS","SHOW SLAVE","SHOW SLAVE HOSTS","SHOW STATUS","SHOW TABLE STATUS","SHOW TABLES","SHOW VARIABLES","SHOW WARNINGS","SHUTDOWN","SNAPSHOT DATABASE","SOURCE_POS_WAIT","START GROUP_REPLICATION","START PIPELINE","START REPLICA","START SLAVE","START TRANSACTION","STOP GROUP_REPLICATION","STOP PIPELINE","STOP REPLICA","STOP REPLICATING","STOP SLAVE","TEST PIPELINE","UNLOCK INSTANCE","UNLOCK TABLES","USE","XA","ITERATE","LEAVE","LOOP","REPEAT","RETURN","WHILE"]),D0e=v(["UNION [ALL | DISTINCT]","EXCEPT","INTERSECT","MINUS"]),P0e=v(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL {LEFT | RIGHT} [OUTER] JOIN","STRAIGHT_JOIN"]),x0e=v(["ON DELETE","ON UPDATE","CHARACTER SET","{ROWS | RANGE} BETWEEN","IDENTIFIED BY"]),v0e=v([]),SR={name:"singlestoredb",tokenizerOptions:{reservedSelect:w0e,reservedClauses:[...L0e,...q3,...Rb],reservedSetOperations:D0e,reservedJoins:P0e,reservedKeywordPhrases:x0e,reservedDataTypePhrases:v0e,reservedKeywords:W3,reservedDataTypes:$3,reservedFunctionNames:Y3,stringTypes:['""-qq-bs',"''-qq-bs",{quote:"''-raw",prefixes:["B","X"],requirePrefix:!0}],identTypes:["``"],identChars:{first:"$",rest:"$",allowFirstCharNumber:!0},variableTypes:[{regex:"@@?[A-Za-z0-9_$]+"},{quote:"``",prefixes:["@"],requirePrefix:!0}],lineCommentTypes:["--","#"],operators:[":=","&","|","^","~","<<",">>","<=>","&&","||","::","::$","::%",":>","!:>","*.*"],postProcess:ao},formatOptions:{alwaysDenseOperators:["::","::$","::%"],onelineClauses:[...q3,...Rb],tabularOnelineClauses:Rb}}});var X3,z3=G(()=>{X3=["ABS","ACOS","ACOSH","ADD_MONTHS","ALL_USER_NAMES","ANY_VALUE","APPROX_COUNT_DISTINCT","APPROX_PERCENTILE","APPROX_PERCENTILE_ACCUMULATE","APPROX_PERCENTILE_COMBINE","APPROX_PERCENTILE_ESTIMATE","APPROX_TOP_K","APPROX_TOP_K_ACCUMULATE","APPROX_TOP_K_COMBINE","APPROX_TOP_K_ESTIMATE","APPROXIMATE_JACCARD_INDEX","APPROXIMATE_SIMILARITY","ARRAY_AGG","ARRAY_APPEND","ARRAY_CAT","ARRAY_COMPACT","ARRAY_CONSTRUCT","ARRAY_CONSTRUCT_COMPACT","ARRAY_CONTAINS","ARRAY_INSERT","ARRAY_INTERSECTION","ARRAY_POSITION","ARRAY_PREPEND","ARRAY_SIZE","ARRAY_SLICE","ARRAY_TO_STRING","ARRAY_UNION_AGG","ARRAY_UNIQUE_AGG","ARRAYS_OVERLAP","AS_ARRAY","AS_BINARY","AS_BOOLEAN","AS_CHAR","AS_VARCHAR","AS_DATE","AS_DECIMAL","AS_NUMBER","AS_DOUBLE","AS_REAL","AS_INTEGER","AS_OBJECT","AS_TIME","AS_TIMESTAMP_LTZ","AS_TIMESTAMP_NTZ","AS_TIMESTAMP_TZ","ASCII","ASIN","ASINH","ATAN","ATAN2","ATANH","AUTO_REFRESH_REGISTRATION_HISTORY","AUTOMATIC_CLUSTERING_HISTORY","AVG","BASE64_DECODE_BINARY","BASE64_DECODE_STRING","BASE64_ENCODE","BIT_LENGTH","BITAND","BITAND_AGG","BITMAP_BIT_POSITION","BITMAP_BUCKET_NUMBER","BITMAP_CONSTRUCT_AGG","BITMAP_COUNT","BITMAP_OR_AGG","BITNOT","BITOR","BITOR_AGG","BITSHIFTLEFT","BITSHIFTRIGHT","BITXOR","BITXOR_AGG","BOOLAND","BOOLAND_AGG","BOOLNOT","BOOLOR","BOOLOR_AGG","BOOLXOR","BOOLXOR_AGG","BUILD_SCOPED_FILE_URL","BUILD_STAGE_FILE_URL","CASE","CAST","CBRT","CEIL","CHARINDEX","CHECK_JSON","CHECK_XML","CHR","CHAR","COALESCE","COLLATE","COLLATION","COMPLETE_TASK_GRAPHS","COMPRESS","CONCAT","CONCAT_WS","CONDITIONAL_CHANGE_EVENT","CONDITIONAL_TRUE_EVENT","CONTAINS","CONVERT_TIMEZONE","COPY_HISTORY","CORR","COS","COSH","COT","COUNT","COUNT_IF","COVAR_POP","COVAR_SAMP","CUME_DIST","CURRENT_ACCOUNT","CURRENT_AVAILABLE_ROLES","CURRENT_CLIENT","CURRENT_DATABASE","CURRENT_DATE","CURRENT_IP_ADDRESS","CURRENT_REGION","CURRENT_ROLE","CURRENT_SCHEMA","CURRENT_SCHEMAS","CURRENT_SECONDARY_ROLES","CURRENT_SESSION","CURRENT_STATEMENT","CURRENT_TASK_GRAPHS","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_TRANSACTION","CURRENT_USER","CURRENT_VERSION","CURRENT_WAREHOUSE","DATA_TRANSFER_HISTORY","DATABASE_REFRESH_HISTORY","DATABASE_REFRESH_PROGRESS","DATABASE_REFRESH_PROGRESS_BY_JOB","DATABASE_STORAGE_USAGE_HISTORY","DATE_FROM_PARTS","DATE_PART","DATE_TRUNC","DATEADD","DATEDIFF","DAYNAME","DECODE","DECOMPRESS_BINARY","DECOMPRESS_STRING","DECRYPT","DECRYPT_RAW","DEGREES","DENSE_RANK","DIV0","EDITDISTANCE","ENCRYPT","ENCRYPT_RAW","ENDSWITH","EQUAL_NULL","EXP","EXPLAIN_JSON","EXTERNAL_FUNCTIONS_HISTORY","EXTERNAL_TABLE_FILES","EXTERNAL_TABLE_FILE_REGISTRATION_HISTORY","EXTRACT","EXTRACT_SEMANTIC_CATEGORIES","FACTORIAL","FILTER","FIRST_VALUE","FLATTEN","FLOOR","GENERATE_COLUMN_DESCRIPTION","GENERATOR","GET","GET_ABSOLUTE_PATH","GET_DDL","GET_IGNORE_CASE","GET_OBJECT_REFERENCES","GET_PATH","GET_PRESIGNED_URL","GET_RELATIVE_PATH","GET_STAGE_LOCATION","GETBIT","GREATEST","GREATEST_IGNORE_NULLS","GROUPING","GROUPING_ID","HASH","HASH_AGG","HAVERSINE","HEX_DECODE_BINARY","HEX_DECODE_STRING","HEX_ENCODE","HLL","HLL_ACCUMULATE","HLL_COMBINE","HLL_ESTIMATE","HLL_EXPORT","HLL_IMPORT","HOUR","MINUTE","SECOND","IDENTIFIER","IFF","IFNULL","ILIKE","ILIKE ANY","INFER_SCHEMA","INITCAP","INSERT","INVOKER_ROLE","INVOKER_SHARE","IS_ARRAY","IS_BINARY","IS_BOOLEAN","IS_CHAR","IS_VARCHAR","IS_DATE","IS_DATE_VALUE","IS_DECIMAL","IS_DOUBLE","IS_REAL","IS_GRANTED_TO_INVOKER_ROLE","IS_INTEGER","IS_NULL_VALUE","IS_OBJECT","IS_ROLE_IN_SESSION","IS_TIME","IS_TIMESTAMP_LTZ","IS_TIMESTAMP_NTZ","IS_TIMESTAMP_TZ","JAROWINKLER_SIMILARITY","JSON_EXTRACT_PATH_TEXT","KURTOSIS","LAG","LAST_DAY","LAST_QUERY_ID","LAST_TRANSACTION","LAST_VALUE","LEAD","LEAST","LEFT","LENGTH","LEN","LIKE","LIKE ALL","LIKE ANY","LISTAGG","LN","LOCALTIME","LOCALTIMESTAMP","LOG","LOGIN_HISTORY","LOGIN_HISTORY_BY_USER","LOWER","LPAD","LTRIM","MATERIALIZED_VIEW_REFRESH_HISTORY","MD5","MD5_HEX","MD5_BINARY","MD5_NUMBER \u2014 Obsoleted","MD5_NUMBER_LOWER64","MD5_NUMBER_UPPER64","MEDIAN","MIN","MAX","MINHASH","MINHASH_COMBINE","MOD","MODE","MONTHNAME","MONTHS_BETWEEN","NEXT_DAY","NORMAL","NTH_VALUE","NTILE","NULLIF","NULLIFZERO","NVL","NVL2","OBJECT_AGG","OBJECT_CONSTRUCT","OBJECT_CONSTRUCT_KEEP_NULL","OBJECT_DELETE","OBJECT_INSERT","OBJECT_KEYS","OBJECT_PICK","OCTET_LENGTH","PARSE_IP","PARSE_JSON","PARSE_URL","PARSE_XML","PERCENT_RANK","PERCENTILE_CONT","PERCENTILE_DISC","PI","PIPE_USAGE_HISTORY","POLICY_CONTEXT","POLICY_REFERENCES","POSITION","POW","POWER","PREVIOUS_DAY","QUERY_ACCELERATION_HISTORY","QUERY_HISTORY","QUERY_HISTORY_BY_SESSION","QUERY_HISTORY_BY_USER","QUERY_HISTORY_BY_WAREHOUSE","RADIANS","RANDOM","RANDSTR","RANK","RATIO_TO_REPORT","REGEXP","REGEXP_COUNT","REGEXP_INSTR","REGEXP_LIKE","REGEXP_REPLACE","REGEXP_SUBSTR","REGEXP_SUBSTR_ALL","REGR_AVGX","REGR_AVGY","REGR_COUNT","REGR_INTERCEPT","REGR_R2","REGR_SLOPE","REGR_SXX","REGR_SXY","REGR_SYY","REGR_VALX","REGR_VALY","REPEAT","REPLACE","REPLICATION_GROUP_REFRESH_HISTORY","REPLICATION_GROUP_REFRESH_PROGRESS","REPLICATION_GROUP_REFRESH_PROGRESS_BY_JOB","REPLICATION_GROUP_USAGE_HISTORY","REPLICATION_USAGE_HISTORY","REST_EVENT_HISTORY","RESULT_SCAN","REVERSE","RIGHT","RLIKE","ROUND","ROW_NUMBER","RPAD","RTRIM","RTRIMMED_LENGTH","SEARCH_OPTIMIZATION_HISTORY","SEQ1","SEQ2","SEQ4","SEQ8","SERVERLESS_TASK_HISTORY","SHA1","SHA1_HEX","SHA1_BINARY","SHA2","SHA2_HEX","SHA2_BINARY","SIGN","SIN","SINH","SKEW","SOUNDEX","SPACE","SPLIT","SPLIT_PART","SPLIT_TO_TABLE","SQRT","SQUARE","ST_AREA","ST_ASEWKB","ST_ASEWKT","ST_ASGEOJSON","ST_ASWKB","ST_ASBINARY","ST_ASWKT","ST_ASTEXT","ST_AZIMUTH","ST_CENTROID","ST_COLLECT","ST_CONTAINS","ST_COVEREDBY","ST_COVERS","ST_DIFFERENCE","ST_DIMENSION","ST_DISJOINT","ST_DISTANCE","ST_DWITHIN","ST_ENDPOINT","ST_ENVELOPE","ST_GEOGFROMGEOHASH","ST_GEOGPOINTFROMGEOHASH","ST_GEOGRAPHYFROMWKB","ST_GEOGRAPHYFROMWKT","ST_GEOHASH","ST_GEOMETRYFROMWKB","ST_GEOMETRYFROMWKT","ST_HAUSDORFFDISTANCE","ST_INTERSECTION","ST_INTERSECTS","ST_LENGTH","ST_MAKEGEOMPOINT","ST_GEOM_POINT","ST_MAKELINE","ST_MAKEPOINT","ST_POINT","ST_MAKEPOLYGON","ST_POLYGON","ST_NPOINTS","ST_NUMPOINTS","ST_PERIMETER","ST_POINTN","ST_SETSRID","ST_SIMPLIFY","ST_SRID","ST_STARTPOINT","ST_SYMDIFFERENCE","ST_UNION","ST_WITHIN","ST_X","ST_XMAX","ST_XMIN","ST_Y","ST_YMAX","ST_YMIN","STAGE_DIRECTORY_FILE_REGISTRATION_HISTORY","STAGE_STORAGE_USAGE_HISTORY","STARTSWITH","STDDEV","STDDEV_POP","STDDEV_SAMP","STRIP_NULL_VALUE","STRTOK","STRTOK_SPLIT_TO_TABLE","STRTOK_TO_ARRAY","SUBSTR","SUBSTRING","SUM","SYSDATE","SYSTEM$ABORT_SESSION","SYSTEM$ABORT_TRANSACTION","SYSTEM$AUTHORIZE_PRIVATELINK","SYSTEM$AUTHORIZE_STAGE_PRIVATELINK_ACCESS","SYSTEM$BEHAVIOR_CHANGE_BUNDLE_STATUS","SYSTEM$CANCEL_ALL_QUERIES","SYSTEM$CANCEL_QUERY","SYSTEM$CLUSTERING_DEPTH","SYSTEM$CLUSTERING_INFORMATION","SYSTEM$CLUSTERING_RATIO ","SYSTEM$CURRENT_USER_TASK_NAME","SYSTEM$DATABASE_REFRESH_HISTORY ","SYSTEM$DATABASE_REFRESH_PROGRESS","SYSTEM$DATABASE_REFRESH_PROGRESS_BY_JOB ","SYSTEM$DISABLE_BEHAVIOR_CHANGE_BUNDLE","SYSTEM$DISABLE_DATABASE_REPLICATION","SYSTEM$ENABLE_BEHAVIOR_CHANGE_BUNDLE","SYSTEM$ESTIMATE_QUERY_ACCELERATION","SYSTEM$ESTIMATE_SEARCH_OPTIMIZATION_COSTS","SYSTEM$EXPLAIN_JSON_TO_TEXT","SYSTEM$EXPLAIN_PLAN_JSON","SYSTEM$EXTERNAL_TABLE_PIPE_STATUS","SYSTEM$GENERATE_SAML_CSR","SYSTEM$GENERATE_SCIM_ACCESS_TOKEN","SYSTEM$GET_AWS_SNS_IAM_POLICY","SYSTEM$GET_PREDECESSOR_RETURN_VALUE","SYSTEM$GET_PRIVATELINK","SYSTEM$GET_PRIVATELINK_AUTHORIZED_ENDPOINTS","SYSTEM$GET_PRIVATELINK_CONFIG","SYSTEM$GET_SNOWFLAKE_PLATFORM_INFO","SYSTEM$GET_TAG","SYSTEM$GET_TAG_ALLOWED_VALUES","SYSTEM$GET_TAG_ON_CURRENT_COLUMN","SYSTEM$GET_TAG_ON_CURRENT_TABLE","SYSTEM$GLOBAL_ACCOUNT_SET_PARAMETER","SYSTEM$LAST_CHANGE_COMMIT_TIME","SYSTEM$LINK_ACCOUNT_OBJECTS_BY_NAME","SYSTEM$MIGRATE_SAML_IDP_REGISTRATION","SYSTEM$PIPE_FORCE_RESUME","SYSTEM$PIPE_STATUS","SYSTEM$REVOKE_PRIVATELINK","SYSTEM$REVOKE_STAGE_PRIVATELINK_ACCESS","SYSTEM$SET_RETURN_VALUE","SYSTEM$SHOW_OAUTH_CLIENT_SECRETS","SYSTEM$STREAM_GET_TABLE_TIMESTAMP","SYSTEM$STREAM_HAS_DATA","SYSTEM$TASK_DEPENDENTS_ENABLE","SYSTEM$TYPEOF","SYSTEM$USER_TASK_CANCEL_ONGOING_EXECUTIONS","SYSTEM$VERIFY_EXTERNAL_OAUTH_TOKEN","SYSTEM$WAIT","SYSTEM$WHITELIST","SYSTEM$WHITELIST_PRIVATELINK","TAG_REFERENCES","TAG_REFERENCES_ALL_COLUMNS","TAG_REFERENCES_WITH_LINEAGE","TAN","TANH","TASK_DEPENDENTS","TASK_HISTORY","TIME_FROM_PARTS","TIME_SLICE","TIMEADD","TIMEDIFF","TIMESTAMP_FROM_PARTS","TIMESTAMPADD","TIMESTAMPDIFF","TO_ARRAY","TO_BINARY","TO_BOOLEAN","TO_CHAR","TO_VARCHAR","TO_DATE","DATE","TO_DECIMAL","TO_NUMBER","TO_NUMERIC","TO_DOUBLE","TO_GEOGRAPHY","TO_GEOMETRY","TO_JSON","TO_OBJECT","TO_TIME","TIME","TO_TIMESTAMP","TO_TIMESTAMP_LTZ","TO_TIMESTAMP_NTZ","TO_TIMESTAMP_TZ","TO_VARIANT","TO_XML","TRANSLATE","TRIM","TRUNCATE","TRUNC","TRUNC","TRY_BASE64_DECODE_BINARY","TRY_BASE64_DECODE_STRING","TRY_CAST","TRY_HEX_DECODE_BINARY","TRY_HEX_DECODE_STRING","TRY_PARSE_JSON","TRY_TO_BINARY","TRY_TO_BOOLEAN","TRY_TO_DATE","TRY_TO_DECIMAL","TRY_TO_NUMBER","TRY_TO_NUMERIC","TRY_TO_DOUBLE","TRY_TO_GEOGRAPHY","TRY_TO_GEOMETRY","TRY_TO_TIME","TRY_TO_TIMESTAMP","TRY_TO_TIMESTAMP_LTZ","TRY_TO_TIMESTAMP_NTZ","TRY_TO_TIMESTAMP_TZ","TYPEOF","UNICODE","UNIFORM","UPPER","UUID_STRING","VALIDATE","VALIDATE_PIPE_LOAD","VAR_POP","VAR_SAMP","VARIANCE","VARIANCE_SAMP","VARIANCE_POP","WAREHOUSE_LOAD_HISTORY","WAREHOUSE_METERING_HISTORY","WIDTH_BUCKET","XMLGET","YEAR","YEAROFWEEK","YEAROFWEEKISO","DAY","DAYOFMONTH","DAYOFWEEK","DAYOFWEEKISO","DAYOFYEAR","WEEK","WEEK","WEEKOFYEAR","WEEKISO","MONTH","QUARTER","ZEROIFNULL","ZIPF"]});var j3,K3,J3=G(()=>{j3=["ACCOUNT","ALL","ALTER","AND","ANY","AS","BETWEEN","BY","CASE","CAST","CHECK","COLUMN","CONNECT","CONNECTION","CONSTRAINT","CREATE","CROSS","CURRENT","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","DATABASE","DELETE","DISTINCT","DROP","ELSE","EXISTS","FALSE","FOLLOWING","FOR","FROM","FULL","GRANT","GROUP","GSCLUSTER","HAVING","ILIKE","IN","INCREMENT","INNER","INSERT","INTERSECT","INTO","IS","ISSUE","JOIN","LATERAL","LEFT","LIKE","LOCALTIME","LOCALTIMESTAMP","MINUS","NATURAL","NOT","NULL","OF","ON","OR","ORDER","ORGANIZATION","QUALIFY","REGEXP","REVOKE","RIGHT","RLIKE","ROW","ROWS","SAMPLE","SCHEMA","SELECT","SET","SOME","START","TABLE","TABLESAMPLE","THEN","TO","TRIGGER","TRUE","TRY_CAST","UNION","UNIQUE","UPDATE","USING","VALUES","VIEW","WHEN","WHENEVER","WHERE","WITH","COMMENT"],K3=["NUMBER","DECIMAL","NUMERIC","INT","INTEGER","BIGINT","SMALLINT","TINYINT","BYTEINT","FLOAT","FLOAT4","FLOAT8","DOUBLE","DOUBLE PRECISION","REAL","VARCHAR","CHAR","CHARACTER","STRING","TEXT","BINARY","VARBINARY","BOOLEAN","DATE","DATETIME","TIME","TIMESTAMP","TIMESTAMP_LTZ","TIMESTAMP_NTZ","TIMESTAMP","TIMESTAMP_TZ","VARIANT","OBJECT","ARRAY","GEOGRAPHY","GEOMETRY"]});var M0e,U0e,Q3,mb,B0e,F0e,H0e,G0e,RR,gb=G(()=>{vt();z3();J3();M0e=v(["SELECT [ALL | DISTINCT]"]),U0e=v(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY","HAVING","PARTITION BY","ORDER BY","QUALIFY","LIMIT","OFFSET","FETCH [FIRST | NEXT]","INSERT [OVERWRITE] [ALL INTO | INTO | ALL | FIRST]","{THEN | ELSE} INTO","VALUES","SET","CLUSTER BY","[WITH] {MASKING POLICY | TAG | ROW ACCESS POLICY}","COPY GRANTS","USING TEMPLATE","MERGE INTO","WHEN MATCHED [AND]","THEN {UPDATE SET | DELETE}","WHEN NOT MATCHED THEN INSERT"]),Q3=v(["CREATE [OR REPLACE] [VOLATILE] TABLE [IF NOT EXISTS]","CREATE [OR REPLACE] [LOCAL | GLOBAL] {TEMP|TEMPORARY} TABLE [IF NOT EXISTS]"]),mb=v(["CREATE [OR REPLACE] [SECURE] [RECURSIVE] VIEW [IF NOT EXISTS]","UPDATE","DELETE FROM","DROP TABLE [IF EXISTS]","ALTER TABLE [IF EXISTS]","RENAME TO","SWAP WITH","[SUSPEND | RESUME] RECLUSTER","DROP CLUSTERING KEY","ADD [COLUMN]","RENAME COLUMN","{ALTER | MODIFY} [COLUMN]","DROP [COLUMN]","{ADD | ALTER | MODIFY | DROP} [CONSTRAINT]","RENAME CONSTRAINT","{ADD | DROP} SEARCH OPTIMIZATION","{SET | UNSET} TAG","{ADD | DROP} ROW ACCESS POLICY","DROP ALL ROW ACCESS POLICIES","{SET | DROP} DEFAULT","{SET | DROP} NOT NULL","SET DATA TYPE","UNSET COMMENT","{SET | UNSET} MASKING POLICY","TRUNCATE [TABLE] [IF EXISTS]","ALTER ACCOUNT","ALTER API INTEGRATION","ALTER CONNECTION","ALTER DATABASE","ALTER EXTERNAL TABLE","ALTER FAILOVER GROUP","ALTER FILE FORMAT","ALTER FUNCTION","ALTER INTEGRATION","ALTER MASKING POLICY","ALTER MATERIALIZED VIEW","ALTER NETWORK POLICY","ALTER NOTIFICATION INTEGRATION","ALTER PIPE","ALTER PROCEDURE","ALTER REPLICATION GROUP","ALTER RESOURCE MONITOR","ALTER ROLE","ALTER ROW ACCESS POLICY","ALTER SCHEMA","ALTER SECURITY INTEGRATION","ALTER SEQUENCE","ALTER SESSION","ALTER SESSION POLICY","ALTER SHARE","ALTER STAGE","ALTER STORAGE INTEGRATION","ALTER STREAM","ALTER TAG","ALTER TASK","ALTER USER","ALTER VIEW","ALTER WAREHOUSE","BEGIN","CALL","COMMIT","COPY INTO","CREATE ACCOUNT","CREATE API INTEGRATION","CREATE CONNECTION","CREATE DATABASE","CREATE EXTERNAL FUNCTION","CREATE EXTERNAL TABLE","CREATE FAILOVER GROUP","CREATE FILE FORMAT","CREATE FUNCTION","CREATE INTEGRATION","CREATE MANAGED ACCOUNT","CREATE MASKING POLICY","CREATE MATERIALIZED VIEW","CREATE NETWORK POLICY","CREATE NOTIFICATION INTEGRATION","CREATE PIPE","CREATE PROCEDURE","CREATE REPLICATION GROUP","CREATE RESOURCE MONITOR","CREATE ROLE","CREATE ROW ACCESS POLICY","CREATE SCHEMA","CREATE SECURITY INTEGRATION","CREATE SEQUENCE","CREATE SESSION POLICY","CREATE SHARE","CREATE STAGE","CREATE STORAGE INTEGRATION","CREATE STREAM","CREATE TAG","CREATE TASK","CREATE USER","CREATE WAREHOUSE","DELETE","DESCRIBE DATABASE","DESCRIBE EXTERNAL TABLE","DESCRIBE FILE FORMAT","DESCRIBE FUNCTION","DESCRIBE INTEGRATION","DESCRIBE MASKING POLICY","DESCRIBE MATERIALIZED VIEW","DESCRIBE NETWORK POLICY","DESCRIBE PIPE","DESCRIBE PROCEDURE","DESCRIBE RESULT","DESCRIBE ROW ACCESS POLICY","DESCRIBE SCHEMA","DESCRIBE SEQUENCE","DESCRIBE SESSION POLICY","DESCRIBE SHARE","DESCRIBE STAGE","DESCRIBE STREAM","DESCRIBE TABLE","DESCRIBE TASK","DESCRIBE TRANSACTION","DESCRIBE USER","DESCRIBE VIEW","DESCRIBE WAREHOUSE","DROP CONNECTION","DROP DATABASE","DROP EXTERNAL TABLE","DROP FAILOVER GROUP","DROP FILE FORMAT","DROP FUNCTION","DROP INTEGRATION","DROP MANAGED ACCOUNT","DROP MASKING POLICY","DROP MATERIALIZED VIEW","DROP NETWORK POLICY","DROP PIPE","DROP PROCEDURE","DROP REPLICATION GROUP","DROP RESOURCE MONITOR","DROP ROLE","DROP ROW ACCESS POLICY","DROP SCHEMA","DROP SEQUENCE","DROP SESSION POLICY","DROP SHARE","DROP STAGE","DROP STREAM","DROP TAG","DROP TASK","DROP USER","DROP VIEW","DROP WAREHOUSE","EXECUTE IMMEDIATE","EXECUTE TASK","EXPLAIN","GET","GRANT OWNERSHIP","GRANT ROLE","INSERT","LIST","MERGE","PUT","REMOVE","REVOKE ROLE","ROLLBACK","SHOW COLUMNS","SHOW CONNECTIONS","SHOW DATABASES","SHOW DATABASES IN FAILOVER GROUP","SHOW DATABASES IN REPLICATION GROUP","SHOW DELEGATED AUTHORIZATIONS","SHOW EXTERNAL FUNCTIONS","SHOW EXTERNAL TABLES","SHOW FAILOVER GROUPS","SHOW FILE FORMATS","SHOW FUNCTIONS","SHOW GLOBAL ACCOUNTS","SHOW GRANTS","SHOW INTEGRATIONS","SHOW LOCKS","SHOW MANAGED ACCOUNTS","SHOW MASKING POLICIES","SHOW MATERIALIZED VIEWS","SHOW NETWORK POLICIES","SHOW OBJECTS","SHOW ORGANIZATION ACCOUNTS","SHOW PARAMETERS","SHOW PIPES","SHOW PRIMARY KEYS","SHOW PROCEDURES","SHOW REGIONS","SHOW REPLICATION ACCOUNTS","SHOW REPLICATION DATABASES","SHOW REPLICATION GROUPS","SHOW RESOURCE MONITORS","SHOW ROLES","SHOW ROW ACCESS POLICIES","SHOW SCHEMAS","SHOW SEQUENCES","SHOW SESSION POLICIES","SHOW SHARES","SHOW SHARES IN FAILOVER GROUP","SHOW SHARES IN REPLICATION GROUP","SHOW STAGES","SHOW STREAMS","SHOW TABLES","SHOW TAGS","SHOW TASKS","SHOW TRANSACTIONS","SHOW USER FUNCTIONS","SHOW USERS","SHOW VARIABLES","SHOW VIEWS","SHOW WAREHOUSES","TRUNCATE MATERIALIZED VIEW","UNDROP DATABASE","UNDROP SCHEMA","UNDROP TABLE","UNDROP TAG","UNSET","USE DATABASE","USE ROLE","USE SCHEMA","USE SECONDARY ROLES","USE WAREHOUSE"]),B0e=v(["UNION [ALL]","MINUS","EXCEPT","INTERSECT"]),F0e=v(["[INNER] JOIN","[NATURAL] {LEFT | RIGHT | FULL} [OUTER] JOIN","{CROSS | NATURAL} JOIN"]),H0e=v(["{ROWS | RANGE} BETWEEN","ON {UPDATE | DELETE} [SET NULL | SET DEFAULT]"]),G0e=v([]),RR={name:"snowflake",tokenizerOptions:{reservedSelect:M0e,reservedClauses:[...U0e,...Q3,...mb],reservedSetOperations:B0e,reservedJoins:F0e,reservedKeywordPhrases:H0e,reservedDataTypePhrases:G0e,reservedKeywords:j3,reservedDataTypes:K3,reservedFunctionNames:X3,stringTypes:["$$","''-qq-bs"],identTypes:['""-qq'],variableTypes:[{regex:"[$][1-9]\\d*"},{regex:"[$][_a-zA-Z][_a-zA-Z0-9$]*"}],extraParens:["[]"],identChars:{rest:"$"},lineCommentTypes:["--","//"],operators:["%","::","||","=>",":=","->"],propertyAccessOperators:[":"]},formatOptions:{alwaysDenseOperators:["::"],onelineClauses:[...Q3,...mb],tabularOnelineClauses:mb}}});var Ib={};ht(Ib,{bigquery:()=>eR,db2:()=>tR,db2i:()=>nR,duckdb:()=>rR,hive:()=>iR,mariadb:()=>sR,mysql:()=>oR,n1ql:()=>lR,plsql:()=>cR,postgresql:()=>uR,redshift:()=>dR,singlestoredb:()=>SR,snowflake:()=>RR,spark:()=>fR,sql:()=>hR,sqlite:()=>ER,tidb:()=>aR,transactsql:()=>TR,trino:()=>pR});var Z3=G(()=>{Gy();$y();Yy();qy();zy();Ky();Qy();eb();tb();rb();sb();ab();cb();db();Eb();pb();Sb();Ab();gb()});var lo,_b,Dc,AR,Pc=G(()=>{lo=t=>t[t.length-1],_b=t=>t.sort((e,n)=>n.length-e.length||e.localeCompare(n)),Dc=t=>t.replace(/\s+/gu," "),AR=t=>/\n/.test(t)});var cr,Nb,Rs,W0e,eK,tK,mR=G(()=>{cr=t=>t.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&"),Nb=/\s+/uy,Rs=t=>new RegExp(`(?:${t})`,"uy"),W0e=t=>t.split("").map(e=>/ /gu.test(e)?"\\s+":`[${e.toUpperCase()}${e.toLowerCase()}]`).join(""),eK=t=>t+"(?:-"+t+")*",tK=({prefixes:t,requirePrefix:e})=>`(?:${t.map(W0e).join("|")}${e?"":"|"})`});var rK,Ob,Cb,$0e,Pi,gR,k0e,nK,iK,sK,yb,bb,oK,wb,aK=G(()=>{Pc();mR();rK=t=>new RegExp(`(?:${t.map(cr).join("|")}).*?(?=\r
|\r|
|$)`,"uy"),Ob=(t,e=[])=>{let n=t==="open"?0:1,r=["()",...e].map(i=>i[n]);return Rs(r.map(cr).join("|"))},Cb=t=>Rs(`${_b(t).map(cr).join("|")}`),$0e=({rest:t,dashes:e})=>t||e?`(?![${t||""}${e?"-":""}])`:"",Pi=(t,e={})=>{if(t.length===0)return/^\b$/u;let n=$0e(e),r=_b(t).map(cr).join("|").replace(/ /gu,"\\s+");return new RegExp(`(?:${r})${n}\\b`,"iuy")},gR=(t,e)=>{if(!t.length)return;let n=t.map(cr).join("|");return Rs(`(?:${n})(?:${e})`)},k0e=()=>{let t={"<":">","[":"]","(":")","{":"}"},e="{left}(?:(?!{right}').)*?{right}",n=Object.entries(t).map(([o,a])=>e.replace(/{left}/g,cr(o)).replace(/{right}/g,cr(a))),r=cr(Object.keys(t).join(""));return`[Qq]'(?:${String.raw`(?<tag>[^\s${r}])(?:(?!\k<tag>').)*?\k<tag>`}|${n.join("|")})'`},nK={"``":"(?:`[^`]*`)+","[]":String.raw`(?:\[[^\]]*\])(?:\][^\]]*\])*`,'""-qq':String.raw`(?:"[^"]*")+`,'""-bs':String.raw`(?:"[^"\\]*(?:\\.[^"\\]*)*")`,'""-qq-bs':String.raw`(?:"[^"\\]*(?:\\.[^"\\]*)*")+`,'""-raw':String.raw`(?:"[^"]*")`,"''-qq":String.raw`(?:'[^']*')+`,"''-bs":String.raw`(?:'[^'\\]*(?:\\.[^'\\]*)*')`,"''-qq-bs":String.raw`(?:'[^'\\]*(?:\\.[^'\\]*)*')+`,"''-raw":String.raw`(?:'[^']*')`,$$:String.raw`(?<tag>\$\w*\$)[\s\S]*?\k<tag>`,"'''..'''":String.raw`'''[^\\]*?(?:\\.[^\\]*?)*?'''`,'""".."""':String.raw`"""[^\\]*?(?:\\.[^\\]*?)*?"""`,"{}":String.raw`(?:\{[^\}]*\})`,"q''":k0e()},iK=t=>typeof t=="string"?nK[t]:"regex"in t?t.regex:tK(t)+nK[t.quote],sK=t=>Rs(t.map(e=>"regex"in e?e.regex:iK(e)).join("|")),yb=t=>t.map(iK).join("|"),bb=t=>Rs(yb(t)),oK=(t={})=>Rs(wb(t)),wb=({first:t,rest:e,dashes:n,allowFirstCharNumber:r}={})=>{let i="\\p{Alphabetic}\\p{Mark}_",s="\\p{Decimal_Number}",o=cr(t??""),a=cr(e??""),l=r?`[${i}${s}${o}][${i}${s}${a}]*`:`[${i}${o}][${i}${s}${a}]*`;return n?eK(l):l}});function IR(t,e){let n=t.slice(0,e).split(/\n/);return{line:n.length,col:n[n.length-1].length+1}}var Lb=G(()=>{});var Ef,lK=G(()=>{Lb();mR();Ef=class{constructor(e,n){this.rules=e,this.dialectName=n,this.input="",this.index=0}tokenize(e){this.input=e,this.index=0;let n=[],r;for(;this.index<this.input.length;){let i=this.getWhitespace();if(this.index<this.input.length){if(r=this.getNextToken(),!r)throw this.createParseError();n.push(Object.assign(Object.assign({},r),{precedingWhitespace:i}))}}return n}createParseError(){let e=this.input.slice(this.index,this.index+10),{line:n,col:r}=IR(this.input,this.index);return new Error(`Parse error: Unexpected "${e}" at line ${n} column ${r}.
${this.dialectInfo()}`)}dialectInfo(){return this.dialectName==="sql"?`This likely happens because you're using the default "sql" dialect.
If possible, please select a more specific dialect (like sqlite, postgresql, etc).`:`SQL dialect used: "${this.dialectName}".`}getWhitespace(){Nb.lastIndex=this.index;let e=Nb.exec(this.input);if(e)return this.index+=e[0].length,e[0]}getNextToken(){for(let e of this.rules){let n=this.match(e);if(n)return n}}match(e){e.regex.lastIndex=this.index;let n=e.regex.exec(this.input);if(n){let r=n[0],i={type:e.type,raw:r,text:e.text?e.text(r):r,start:this.index};return e.key&&(i.key=e.key(r)),this.index+=r.length,i}}}});var cK,V0e,q0e,_R,uK=G(()=>{cK=/\/\*/uy,V0e=/[\s\S]/uy,q0e=/\*\//uy,_R=class{constructor(){this.lastIndex=0}exec(e){let n="",r,i=0;if(r=this.matchSection(cK,e))n+=r,i++;else return null;for(;i>0;)if(r=this.matchSection(cK,e))n+=r,i++;else if(r=this.matchSection(q0e,e))n+=r,i--;else if(r=this.matchSection(V0e,e))n+=r;else return null;return[n]}matchSection(e,n){e.lastIndex=this.lastIndex;let r=e.exec(n);return r&&(this.lastIndex+=r[0].length),r?r[0]:null}}});var hf,Kt,dK=G(()=>{yr();aK();lK();mR();Pc();uK();hf=class{constructor(e,n){this.cfg=e,this.dialectName=n,this.rulesBeforeParams=this.buildRulesBeforeParams(e),this.rulesAfterParams=this.buildRulesAfterParams(e)}tokenize(e,n){let r=[...this.rulesBeforeParams,...this.buildParamRules(this.cfg,n),...this.rulesAfterParams],i=new Ef(r,this.dialectName).tokenize(e);return this.cfg.postProcess?this.cfg.postProcess(i):i}buildRulesBeforeParams(e){var n,r,i;return this.validRules([{type:k.DISABLE_COMMENT,regex:/(\/\* *sql-formatter-disable *\*\/[\s\S]*?(?:\/\* *sql-formatter-enable *\*\/|$))/uy},{type:k.BLOCK_COMMENT,regex:e.nestedBlockComments?new _R:/(\/\*[^]*?\*\/)/uy},{type:k.LINE_COMMENT,regex:rK((n=e.lineCommentTypes)!==null&&n!==void 0?n:["--"])},{type:k.QUOTED_IDENTIFIER,regex:bb(e.identTypes)},{type:k.NUMBER,regex:e.underscoresInNumbers?/(?:0x[0-9a-fA-F_]+|0b[01_]+|(?:-\s*)?(?:[0-9_]*\.[0-9_]+|[0-9_]+(?:\.[0-9_]*)?)(?:[eE][-+]?[0-9_]+(?:\.[0-9_]+)?)?)(?![\w\p{Alphabetic}])/uy:/(?:0x[0-9a-fA-F]+|0b[01]+|(?:-\s*)?(?:[0-9]*\.[0-9]+|[0-9]+(?:\.[0-9]*)?)(?:[eE][-+]?[0-9]+(?:\.[0-9]+)?)?)(?![\w\p{Alphabetic}])/uy},{type:k.RESERVED_KEYWORD_PHRASE,regex:Pi((r=e.reservedKeywordPhrases)!==null&&r!==void 0?r:[],e.identChars),text:Kt},{type:k.RESERVED_DATA_TYPE_PHRASE,regex:Pi((i=e.reservedDataTypePhrases)!==null&&i!==void 0?i:[],e.identChars),text:Kt},{type:k.CASE,regex:/CASE\b/iuy,text:Kt},{type:k.END,regex:/END\b/iuy,text:Kt},{type:k.BETWEEN,regex:/BETWEEN\b/iuy,text:Kt},{type:k.LIMIT,regex:e.reservedClauses.includes("LIMIT")?/LIMIT\b/iuy:void 0,text:Kt},{type:k.RESERVED_CLAUSE,regex:Pi(e.reservedClauses,e.identChars),text:Kt},{type:k.RESERVED_SELECT,regex:Pi(e.reservedSelect,e.identChars),text:Kt},{type:k.RESERVED_SET_OPERATION,regex:Pi(e.reservedSetOperations,e.identChars),text:Kt},{type:k.WHEN,regex:/WHEN\b/iuy,text:Kt},{type:k.ELSE,regex:/ELSE\b/iuy,text:Kt},{type:k.THEN,regex:/THEN\b/iuy,text:Kt},{type:k.RESERVED_JOIN,regex:Pi(e.reservedJoins,e.identChars),text:Kt},{type:k.AND,regex:/AND\b/iuy,text:Kt},{type:k.OR,regex:/OR\b/iuy,text:Kt},{type:k.XOR,regex:e.supportsXor?/XOR\b/iuy:void 0,text:Kt},...e.operatorKeyword?[{type:k.OPERATOR,regex:/OPERATOR *\([^)]+\)/iuy}]:[],{type:k.RESERVED_FUNCTION_NAME,regex:Pi(e.reservedFunctionNames,e.identChars),text:Kt},{type:k.RESERVED_DATA_TYPE,regex:Pi(e.reservedDataTypes,e.identChars),text:Kt},{type:k.RESERVED_KEYWORD,regex:Pi(e.reservedKeywords,e.identChars),text:Kt}])}buildRulesAfterParams(e){var n,r;return this.validRules([{type:k.VARIABLE,regex:e.variableTypes?sK(e.variableTypes):void 0},{type:k.STRING,regex:bb(e.stringTypes)},{type:k.IDENTIFIER,regex:oK(e.identChars)},{type:k.DELIMITER,regex:/[;]/uy},{type:k.COMMA,regex:/[,]/y},{type:k.OPEN_PAREN,regex:Ob("open",e.extraParens)},{type:k.CLOSE_PAREN,regex:Ob("close",e.extraParens)},{type:k.OPERATOR,regex:Cb(["+","-","/",">","<","=","<>","<=",">=","!=",...(n=e.operators)!==null&&n!==void 0?n:[]])},{type:k.ASTERISK,regex:/[*]/uy},{type:k.PROPERTY_ACCESS_OPERATOR,regex:Cb([".",...(r=e.propertyAccessOperators)!==null&&r!==void 0?r:[]])}])}buildParamRules(e,n){var r,i,s,o,a;let l={named:n?.named||((r=e.paramTypes)===null||r===void 0?void 0:r.named)||[],quoted:n?.quoted||((i=e.paramTypes)===null||i===void 0?void 0:i.quoted)||[],numbered:n?.numbered||((s=e.paramTypes)===null||s===void 0?void 0:s.numbered)||[],positional:typeof n?.positional=="boolean"?n.positional:(o=e.paramTypes)===null||o===void 0?void 0:o.positional,custom:n?.custom||((a=e.paramTypes)===null||a===void 0?void 0:a.custom)||[]};return this.validRules([{type:k.NAMED_PARAMETER,regex:gR(l.named,wb(e.paramChars||e.identChars)),key:c=>c.slice(1)},{type:k.QUOTED_PARAMETER,regex:gR(l.quoted,yb(e.identTypes)),key:c=>(({tokenKey:u,quoteChar:d})=>u.replace(new RegExp(cr("\\"+d),"gu"),d))({tokenKey:c.slice(2,-1),quoteChar:c.slice(-1)})},{type:k.NUMBERED_PARAMETER,regex:gR(l.numbered,"[0-9]+"),key:c=>c.slice(1)},{type:k.POSITIONAL_PARAMETER,regex:l.positional?/[?]/y:void 0},...l.custom.map(c=>{var u;return{type:k.CUSTOM_PARAMETER,regex:Rs(c.regex),key:(u=c.key)!==null&&u!==void 0?u:(d=>d)}})])}validRules(e){return e.filter(n=>!!n.regex)}},Kt=t=>Dc(t.toUpperCase())});var fK,EK,X0e,z0e,hK=G(()=>{dK();fK=new Map,EK=t=>{let e=fK.get(t);return e||(e=X0e(t),fK.set(t,e)),e},X0e=t=>({tokenizer:new hf(t.tokenizerOptions,t.name),formatOptions:z0e(t.formatOptions)}),z0e=t=>{var e;return{alwaysDenseOperators:t.alwaysDenseOperators||[],onelineClauses:Object.fromEntries(t.onelineClauses.map(n=>[n,!0])),tabularOnelineClauses:Object.fromEntries(((e=t.tabularOnelineClauses)!==null&&e!==void 0?e:t.onelineClauses).map(n=>[n,!0]))}}});function pK(t){return t.indentStyle==="tabularLeft"||t.indentStyle==="tabularRight"?" ".repeat(10):t.useTabs?"	":" ".repeat(t.tabWidth)}function ba(t){return t.indentStyle==="tabularLeft"||t.indentStyle==="tabularRight"}var Db=G(()=>{});var pf,TK=G(()=>{pf=class{constructor(e){this.params=e,this.index=0}get({key:e,text:n}){return this.params?e?this.params[e]:this.params[this.index++]:n}getPositionalParameterIndex(){return this.index}setPositionalParameterIndex(e){this.index=e}}});var RK=C((SK,NR)=>{(function(t,e){typeof NR=="object"&&NR.exports?NR.exports=e():t.nearley=e()})(SK,function(){function t(l,c,u){return this.id=++t.highestId,this.name=l,this.symbols=c,this.postprocess=u,this}t.highestId=0,t.prototype.toString=function(l){var c=typeof l>"u"?this.symbols.map(a).join(" "):this.symbols.slice(0,l).map(a).join(" ")+" \u25CF "+this.symbols.slice(l).map(a).join(" ");return this.name+" \u2192 "+c};function e(l,c,u,d){this.rule=l,this.dot=c,this.reference=u,this.data=[],this.wantedBy=d,this.isComplete=this.dot===l.symbols.length}e.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},e.prototype.nextState=function(l){var c=new e(this.rule,this.dot+1,this.reference,this.wantedBy);return c.left=this,c.right=l,c.isComplete&&(c.data=c.build(),c.right=void 0),c},e.prototype.build=function(){var l=[],c=this;do l.push(c.right.data),c=c.left;while(c.left);return l.reverse(),l},e.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,s.fail))};function n(l,c){this.grammar=l,this.index=c,this.states=[],this.wants={},this.scannable=[],this.completed={}}n.prototype.process=function(l){for(var c=this.states,u=this.wants,d=this.completed,E=0;E<c.length;E++){var f=c[E];if(f.isComplete){if(f.finish(),f.data!==s.fail){for(var p=f.wantedBy,h=p.length;h--;){var T=p[h];this.complete(T,f)}if(f.reference===this.index){var S=f.rule.name;(this.completed[S]=this.completed[S]||[]).push(f)}}}else{var S=f.rule.symbols[f.dot];if(typeof S!="string"){this.scannable.push(f);continue}if(u[S]){if(u[S].push(f),d.hasOwnProperty(S))for(var I=d[S],h=0;h<I.length;h++){var R=I[h];this.complete(f,R)}}else u[S]=[f],this.predict(S)}}},n.prototype.predict=function(l){for(var c=this.grammar.byName[l]||[],u=0;u<c.length;u++){var d=c[u],E=this.wants[l],f=new e(d,0,this.index,E);this.states.push(f)}},n.prototype.complete=function(l,c){var u=l.nextState(c);this.states.push(u)};function r(l,c){this.rules=l,this.start=c||this.rules[0].name;var u=this.byName={};this.rules.forEach(function(d){u.hasOwnProperty(d.name)||(u[d.name]=[]),u[d.name].push(d)})}r.fromCompiled=function(d,c){var u=d.Lexer;d.ParserStart&&(c=d.ParserStart,d=d.ParserRules);var d=d.map(function(f){return new t(f.name,f.symbols,f.postprocess)}),E=new r(d,c);return E.lexer=u,E};function i(){this.reset("")}i.prototype.reset=function(l,c){this.buffer=l,this.index=0,this.line=c?c.line:1,this.lastLineBreak=c?-c.col:0},i.prototype.next=function(){if(this.index<this.buffer.length){var l=this.buffer[this.index++];return l===`
`&&(this.line+=1,this.lastLineBreak=this.index),{value:l}}},i.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},i.prototype.formatError=function(l,c){var u=this.buffer;if(typeof u=="string"){var d=u.split(`
`).slice(Math.max(0,this.line-5),this.line),E=u.indexOf(`
`,this.index);E===-1&&(E=u.length);var f=this.index-this.lastLineBreak,p=String(this.line).length;return c+=" at line "+this.line+" col "+f+`:

`,c+=d.map(function(T,S){return h(this.line-d.length+S+1,p)+" "+T},this).join(`
`),c+=`
`+h("",p+f)+`^
`,c}else return c+" at index "+(this.index-1);function h(T,S){var I=String(T);return Array(S-I.length+1).join(" ")+I}};function s(l,c,u){if(l instanceof r)var d=l,u=c;else var d=r.fromCompiled(l,c);this.grammar=d,this.options={keepHistory:!1,lexer:d.lexer||new i};for(var E in u||{})this.options[E]=u[E];this.lexer=this.options.lexer,this.lexerState=void 0;var f=new n(d,0),p=this.table=[f];f.wants[d.start]=[],f.predict(d.start),f.process(),this.current=0}s.fail={},s.prototype.feed=function(l){var c=this.lexer;c.reset(l,this.lexerState);for(var u;;){try{if(u=c.next(),!u)break}catch(N){var p=new n(this.grammar,this.current+1);this.table.push(p);var d=new Error(this.reportLexerError(N));throw d.offset=this.current,d.token=N.token,d}var E=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var f=this.current+1,p=new n(this.grammar,f);this.table.push(p);for(var h=u.text!==void 0?u.text:u.value,T=c.constructor===i?u.value:u,S=E.scannable,I=S.length;I--;){var R=S[I],m=R.rule.symbols[R.dot];if(m.test?m.test(T):m.type?m.type===u.type:m.literal===h){var A=R.nextState({data:T,token:u,isToken:!0,reference:f-1});p.states.push(A)}}if(p.process(),p.states.length===0){var d=new Error(this.reportError(u));throw d.offset=this.current,d.token=u,d}this.options.keepHistory&&(E.lexerState=c.save()),this.current++}return E&&(this.lexerState=c.save()),this.results=this.finish(),this},s.prototype.reportLexerError=function(l){var c,u,d=l.token;return d?(c="input "+JSON.stringify(d.text[0])+" (lexer error)",u=this.lexer.formatError(d,"Syntax error")):(c="input (lexer error)",u=l.message),this.reportErrorCommon(u,c)},s.prototype.reportError=function(l){var c=(l.type?l.type+" token: ":"")+JSON.stringify(l.value!==void 0?l.value:l),u=this.lexer.formatError(l,"Syntax error");return this.reportErrorCommon(u,c)},s.prototype.reportErrorCommon=function(l,c){var u=[];u.push(l);var d=this.table.length-2,E=this.table[d],f=E.states.filter(function(h){var T=h.rule.symbols[h.dot];return T&&typeof T!="string"});if(f.length===0)u.push("Unexpected "+c+`. I did not expect any more input. Here is the state of my parse table:
`),this.displayStateStack(E.states,u);else{u.push("Unexpected "+c+`. Instead, I was expecting to see one of the following:
`);var p=f.map(function(h){return this.buildFirstStateStack(h,[])||[h]},this);p.forEach(function(h){var T=h[0],S=T.rule.symbols[T.dot],I=this.getSymbolDisplay(S);u.push("A "+I+" based on:"),this.displayStateStack(h,u)},this)}return u.push(""),u.join(`
`)},s.prototype.displayStateStack=function(l,c){for(var u,d=0,E=0;E<l.length;E++){var f=l[E],p=f.rule.toString(f.dot);p===u?d++:(d>0&&c.push("    ^ "+d+" more lines identical to this"),d=0,c.push("    "+p)),u=p}},s.prototype.getSymbolDisplay=function(l){return o(l)},s.prototype.buildFirstStateStack=function(l,c){if(c.indexOf(l)!==-1)return null;if(l.wantedBy.length===0)return[l];var u=l.wantedBy[0],d=[l].concat(c),E=this.buildFirstStateStack(u,d);return E===null?null:[l].concat(E)},s.prototype.save=function(){var l=this.table[this.current];return l.lexerState=this.lexerState,l},s.prototype.restore=function(l){var c=l.index;this.current=c,this.table[c]=l,this.table.splice(c+1),this.lexerState=l.lexerState,this.results=this.finish()},s.prototype.rewind=function(l){if(!this.options.keepHistory)throw new Error("set option `keepHistory` to enable rewinding");this.restore(this.table[l])},s.prototype.finish=function(){var l=[],c=this.grammar.start,u=this.table[this.table.length-1];return u.states.forEach(function(d){d.rule.name===c&&d.dot===d.rule.symbols.length&&d.reference===0&&d.data!==s.fail&&l.push(d)}),l.map(function(d){return d.data})};function o(l){var c=typeof l;if(c==="string")return l;if(c==="object"){if(l.literal)return JSON.stringify(l.literal);if(l instanceof RegExp)return"character matching "+l;if(l.type)return l.type+" token";if(l.test)return"token matching "+String(l.test);throw new Error("Unknown symbol type: "+l)}}function a(l){var c=typeof l;if(c==="string")return l;if(c==="object"){if(l.literal)return JSON.stringify(l.literal);if(l instanceof RegExp)return l.toString();if(l.type)return"%"+l.type;if(l.test)return"<"+String(l.test)+">";throw new Error("Unknown symbol type: "+l)}}return{Parser:s,Grammar:r,Rule:t}})});function AK(t){return t.map(j0e).map(K0e).map(J0e).map(Q0e).map(Z0e)}var j0e,K0e,J0e,Q0e,Z0e,eLe,xc,mK,gK,tLe,IK=G(()=>{yr();j0e=(t,e,n)=>{if(ZS(t.type)){let r=eLe(n,e);if(r&&r.type===k.PROPERTY_ACCESS_OPERATOR)return Object.assign(Object.assign({},t),{type:k.IDENTIFIER,text:t.raw});let i=xc(n,e);if(i&&i.type===k.PROPERTY_ACCESS_OPERATOR)return Object.assign(Object.assign({},t),{type:k.IDENTIFIER,text:t.raw})}return t},K0e=(t,e,n)=>{if(t.type===k.RESERVED_FUNCTION_NAME){let r=xc(n,e);if(!r||!mK(r))return Object.assign(Object.assign({},t),{type:k.IDENTIFIER,text:t.raw})}return t},J0e=(t,e,n)=>{if(t.type===k.RESERVED_DATA_TYPE){let r=xc(n,e);if(r&&mK(r))return Object.assign(Object.assign({},t),{type:k.RESERVED_PARAMETERIZED_DATA_TYPE})}return t},Q0e=(t,e,n)=>{if(t.type===k.IDENTIFIER){let r=xc(n,e);if(r&&gK(r))return Object.assign(Object.assign({},t),{type:k.ARRAY_IDENTIFIER})}return t},Z0e=(t,e,n)=>{if(t.type===k.RESERVED_DATA_TYPE){let r=xc(n,e);if(r&&gK(r))return Object.assign(Object.assign({},t),{type:k.ARRAY_KEYWORD})}return t},eLe=(t,e)=>xc(t,e,-1),xc=(t,e,n=1)=>{let r=1;for(;t[e+r*n]&&tLe(t[e+r*n]);)r++;return t[e+r*n]},mK=t=>t.type===k.OPEN_PAREN&&t.text==="(",gK=t=>t.type===k.OPEN_PAREN&&t.text==="[",tLe=t=>t.type===k.BLOCK_COMMENT||t.type===k.LINE_COMMENT});var wa,Pb=G(()=>{Lb();yr();wa=class{constructor(e){this.tokenize=e,this.index=0,this.tokens=[],this.input=""}reset(e,n){this.input=e,this.index=0,this.tokens=this.tokenize(e)}next(){return this.tokens[this.index++]}save(){}formatError(e){let{line:n,col:r}=IR(this.input,e.start);return`Parse error at token: ${e.text} at line ${n} column ${r}`}has(e){return e in k}}});var Z,xb=G(()=>{(function(t){t.statement="statement",t.clause="clause",t.set_operation="set_operation",t.function_call="function_call",t.parameterized_data_type="parameterized_data_type",t.array_subscript="array_subscript",t.property_access="property_access",t.parenthesis="parenthesis",t.between_predicate="between_predicate",t.case_expression="case_expression",t.case_when="case_when",t.case_else="case_else",t.limit_clause="limit_clause",t.all_columns_asterisk="all_columns_asterisk",t.literal="literal",t.identifier="identifier",t.keyword="keyword",t.data_type="data_type",t.parameter="parameter",t.operator="operator",t.comma="comma",t.line_comment="line_comment",t.block_comment="block_comment",t.disable_comment="disable_comment"})(Z=Z||(Z={}))});function vb(t){return t[0]}var de,La,ln,_K,cn,nLe,rLe,NK,OK=G(()=>{Pb();xb();yr();de=new wa(t=>[]),La=([[t]])=>t,ln=t=>({type:Z.keyword,tokenType:t.type,text:t.text,raw:t.raw}),_K=t=>({type:Z.data_type,text:t.text,raw:t.raw}),cn=(t,{leading:e,trailing:n})=>(e?.length&&(t=Object.assign(Object.assign({},t),{leadingComments:e})),n?.length&&(t=Object.assign(Object.assign({},t),{trailingComments:n})),t),nLe=(t,{leading:e,trailing:n})=>{if(e?.length){let[r,...i]=t;t=[cn(r,{leading:e}),...i]}if(n?.length){let r=t.slice(0,-1),i=t[t.length-1];t=[...r,cn(i,{trailing:n})]}return t},rLe={Lexer:de,ParserRules:[{name:"main$ebnf$1",symbols:[]},{name:"main$ebnf$1",symbols:["main$ebnf$1","statement"],postprocess:t=>t[0].concat([t[1]])},{name:"main",symbols:["main$ebnf$1"],postprocess:([t])=>{let e=t[t.length-1];return e&&!e.hasSemicolon?e.children.length>0?t:t.slice(0,-1):t}},{name:"statement$subexpression$1",symbols:[de.has("DELIMITER")?{type:"DELIMITER"}:DELIMITER]},{name:"statement$subexpression$1",symbols:[de.has("EOF")?{type:"EOF"}:EOF]},{name:"statement",symbols:["expressions_or_clauses","statement$subexpression$1"],postprocess:([t,[e]])=>({type:Z.statement,children:t,hasSemicolon:e.type===k.DELIMITER})},{name:"expressions_or_clauses$ebnf$1",symbols:[]},{name:"expressions_or_clauses$ebnf$1",symbols:["expressions_or_clauses$ebnf$1","free_form_sql"],postprocess:t=>t[0].concat([t[1]])},{name:"expressions_or_clauses$ebnf$2",symbols:[]},{name:"expressions_or_clauses$ebnf$2",symbols:["expressions_or_clauses$ebnf$2","clause"],postprocess:t=>t[0].concat([t[1]])},{name:"expressions_or_clauses",symbols:["expressions_or_clauses$ebnf$1","expressions_or_clauses$ebnf$2"],postprocess:([t,e])=>[...t,...e]},{name:"clause$subexpression$1",symbols:["limit_clause"]},{name:"clause$subexpression$1",symbols:["select_clause"]},{name:"clause$subexpression$1",symbols:["other_clause"]},{name:"clause$subexpression$1",symbols:["set_operation"]},{name:"clause",symbols:["clause$subexpression$1"],postprocess:La},{name:"limit_clause$ebnf$1$subexpression$1$ebnf$1",symbols:["free_form_sql"]},{name:"limit_clause$ebnf$1$subexpression$1$ebnf$1",symbols:["limit_clause$ebnf$1$subexpression$1$ebnf$1","free_form_sql"],postprocess:t=>t[0].concat([t[1]])},{name:"limit_clause$ebnf$1$subexpression$1",symbols:[de.has("COMMA")?{type:"COMMA"}:COMMA,"limit_clause$ebnf$1$subexpression$1$ebnf$1"]},{name:"limit_clause$ebnf$1",symbols:["limit_clause$ebnf$1$subexpression$1"],postprocess:vb},{name:"limit_clause$ebnf$1",symbols:[],postprocess:()=>null},{name:"limit_clause",symbols:[de.has("LIMIT")?{type:"LIMIT"}:LIMIT,"_","expression_chain_","limit_clause$ebnf$1"],postprocess:([t,e,n,r])=>{if(r){let[i,s]=r;return{type:Z.limit_clause,limitKw:cn(ln(t),{trailing:e}),offset:n,count:s}}else return{type:Z.limit_clause,limitKw:cn(ln(t),{trailing:e}),count:n}}},{name:"select_clause$subexpression$1$ebnf$1",symbols:[]},{name:"select_clause$subexpression$1$ebnf$1",symbols:["select_clause$subexpression$1$ebnf$1","free_form_sql"],postprocess:t=>t[0].concat([t[1]])},{name:"select_clause$subexpression$1",symbols:["all_columns_asterisk","select_clause$subexpression$1$ebnf$1"]},{name:"select_clause$subexpression$1$ebnf$2",symbols:[]},{name:"select_clause$subexpression$1$ebnf$2",symbols:["select_clause$subexpression$1$ebnf$2","free_form_sql"],postprocess:t=>t[0].concat([t[1]])},{name:"select_clause$subexpression$1",symbols:["asteriskless_free_form_sql","select_clause$subexpression$1$ebnf$2"]},{name:"select_clause",symbols:[de.has("RESERVED_SELECT")?{type:"RESERVED_SELECT"}:RESERVED_SELECT,"select_clause$subexpression$1"],postprocess:([t,[e,n]])=>({type:Z.clause,nameKw:ln(t),children:[e,...n]})},{name:"select_clause",symbols:[de.has("RESERVED_SELECT")?{type:"RESERVED_SELECT"}:RESERVED_SELECT],postprocess:([t])=>({type:Z.clause,nameKw:ln(t),children:[]})},{name:"all_columns_asterisk",symbols:[de.has("ASTERISK")?{type:"ASTERISK"}:ASTERISK],postprocess:()=>({type:Z.all_columns_asterisk})},{name:"other_clause$ebnf$1",symbols:[]},{name:"other_clause$ebnf$1",symbols:["other_clause$ebnf$1","free_form_sql"],postprocess:t=>t[0].concat([t[1]])},{name:"other_clause",symbols:[de.has("RESERVED_CLAUSE")?{type:"RESERVED_CLAUSE"}:RESERVED_CLAUSE,"other_clause$ebnf$1"],postprocess:([t,e])=>({type:Z.clause,nameKw:ln(t),children:e})},{name:"set_operation$ebnf$1",symbols:[]},{name:"set_operation$ebnf$1",symbols:["set_operation$ebnf$1","free_form_sql"],postprocess:t=>t[0].concat([t[1]])},{name:"set_operation",symbols:[de.has("RESERVED_SET_OPERATION")?{type:"RESERVED_SET_OPERATION"}:RESERVED_SET_OPERATION,"set_operation$ebnf$1"],postprocess:([t,e])=>({type:Z.set_operation,nameKw:ln(t),children:e})},{name:"expression_chain_$ebnf$1",symbols:["expression_with_comments_"]},{name:"expression_chain_$ebnf$1",symbols:["expression_chain_$ebnf$1","expression_with_comments_"],postprocess:t=>t[0].concat([t[1]])},{name:"expression_chain_",symbols:["expression_chain_$ebnf$1"],postprocess:vb},{name:"expression_chain$ebnf$1",symbols:[]},{name:"expression_chain$ebnf$1",symbols:["expression_chain$ebnf$1","_expression_with_comments"],postprocess:t=>t[0].concat([t[1]])},{name:"expression_chain",symbols:["expression","expression_chain$ebnf$1"],postprocess:([t,e])=>[t,...e]},{name:"andless_expression_chain$ebnf$1",symbols:[]},{name:"andless_expression_chain$ebnf$1",symbols:["andless_expression_chain$ebnf$1","_andless_expression_with_comments"],postprocess:t=>t[0].concat([t[1]])},{name:"andless_expression_chain",symbols:["andless_expression","andless_expression_chain$ebnf$1"],postprocess:([t,e])=>[t,...e]},{name:"expression_with_comments_",symbols:["expression","_"],postprocess:([t,e])=>cn(t,{trailing:e})},{name:"_expression_with_comments",symbols:["_","expression"],postprocess:([t,e])=>cn(e,{leading:t})},{name:"_andless_expression_with_comments",symbols:["_","andless_expression"],postprocess:([t,e])=>cn(e,{leading:t})},{name:"free_form_sql$subexpression$1",symbols:["asteriskless_free_form_sql"]},{name:"free_form_sql$subexpression$1",symbols:["asterisk"]},{name:"free_form_sql",symbols:["free_form_sql$subexpression$1"],postprocess:La},{name:"asteriskless_free_form_sql$subexpression$1",symbols:["asteriskless_andless_expression"]},{name:"asteriskless_free_form_sql$subexpression$1",symbols:["logic_operator"]},{name:"asteriskless_free_form_sql$subexpression$1",symbols:["comma"]},{name:"asteriskless_free_form_sql$subexpression$1",symbols:["comment"]},{name:"asteriskless_free_form_sql$subexpression$1",symbols:["other_keyword"]},{name:"asteriskless_free_form_sql",symbols:["asteriskless_free_form_sql$subexpression$1"],postprocess:La},{name:"expression$subexpression$1",symbols:["andless_expression"]},{name:"expression$subexpression$1",symbols:["logic_operator"]},{name:"expression",symbols:["expression$subexpression$1"],postprocess:La},{name:"andless_expression$subexpression$1",symbols:["asteriskless_andless_expression"]},{name:"andless_expression$subexpression$1",symbols:["asterisk"]},{name:"andless_expression",symbols:["andless_expression$subexpression$1"],postprocess:La},{name:"asteriskless_andless_expression$subexpression$1",symbols:["atomic_expression"]},{name:"asteriskless_andless_expression$subexpression$1",symbols:["between_predicate"]},{name:"asteriskless_andless_expression$subexpression$1",symbols:["case_expression"]},{name:"asteriskless_andless_expression",symbols:["asteriskless_andless_expression$subexpression$1"],postprocess:La},{name:"atomic_expression$subexpression$1",symbols:["array_subscript"]},{name:"atomic_expression$subexpression$1",symbols:["function_call"]},{name:"atomic_expression$subexpression$1",symbols:["property_access"]},{name:"atomic_expression$subexpression$1",symbols:["parenthesis"]},{name:"atomic_expression$subexpression$1",symbols:["curly_braces"]},{name:"atomic_expression$subexpression$1",symbols:["square_brackets"]},{name:"atomic_expression$subexpression$1",symbols:["operator"]},{name:"atomic_expression$subexpression$1",symbols:["identifier"]},{name:"atomic_expression$subexpression$1",symbols:["parameter"]},{name:"atomic_expression$subexpression$1",symbols:["literal"]},{name:"atomic_expression$subexpression$1",symbols:["data_type"]},{name:"atomic_expression$subexpression$1",symbols:["keyword"]},{name:"atomic_expression",symbols:["atomic_expression$subexpression$1"],postprocess:La},{name:"array_subscript",symbols:[de.has("ARRAY_IDENTIFIER")?{type:"ARRAY_IDENTIFIER"}:ARRAY_IDENTIFIER,"_","square_brackets"],postprocess:([t,e,n])=>({type:Z.array_subscript,array:cn({type:Z.identifier,quoted:!1,text:t.text},{trailing:e}),parenthesis:n})},{name:"array_subscript",symbols:[de.has("ARRAY_KEYWORD")?{type:"ARRAY_KEYWORD"}:ARRAY_KEYWORD,"_","square_brackets"],postprocess:([t,e,n])=>({type:Z.array_subscript,array:cn(ln(t),{trailing:e}),parenthesis:n})},{name:"function_call",symbols:[de.has("RESERVED_FUNCTION_NAME")?{type:"RESERVED_FUNCTION_NAME"}:RESERVED_FUNCTION_NAME,"_","parenthesis"],postprocess:([t,e,n])=>({type:Z.function_call,nameKw:cn(ln(t),{trailing:e}),parenthesis:n})},{name:"parenthesis",symbols:[{literal:"("},"expressions_or_clauses",{literal:")"}],postprocess:([t,e,n])=>({type:Z.parenthesis,children:e,openParen:"(",closeParen:")"})},{name:"curly_braces$ebnf$1",symbols:[]},{name:"curly_braces$ebnf$1",symbols:["curly_braces$ebnf$1","free_form_sql"],postprocess:t=>t[0].concat([t[1]])},{name:"curly_braces",symbols:[{literal:"{"},"curly_braces$ebnf$1",{literal:"}"}],postprocess:([t,e,n])=>({type:Z.parenthesis,children:e,openParen:"{",closeParen:"}"})},{name:"square_brackets$ebnf$1",symbols:[]},{name:"square_brackets$ebnf$1",symbols:["square_brackets$ebnf$1","free_form_sql"],postprocess:t=>t[0].concat([t[1]])},{name:"square_brackets",symbols:[{literal:"["},"square_brackets$ebnf$1",{literal:"]"}],postprocess:([t,e,n])=>({type:Z.parenthesis,children:e,openParen:"[",closeParen:"]"})},{name:"property_access$subexpression$1",symbols:["identifier"]},{name:"property_access$subexpression$1",symbols:["array_subscript"]},{name:"property_access$subexpression$1",symbols:["all_columns_asterisk"]},{name:"property_access$subexpression$1",symbols:["parameter"]},{name:"property_access",symbols:["atomic_expression","_",de.has("PROPERTY_ACCESS_OPERATOR")?{type:"PROPERTY_ACCESS_OPERATOR"}:PROPERTY_ACCESS_OPERATOR,"_","property_access$subexpression$1"],postprocess:([t,e,n,r,[i]])=>({type:Z.property_access,object:cn(t,{trailing:e}),operator:n.text,property:cn(i,{leading:r})})},{name:"between_predicate",symbols:[de.has("BETWEEN")?{type:"BETWEEN"}:BETWEEN,"_","andless_expression_chain","_",de.has("AND")?{type:"AND"}:AND,"_","andless_expression"],postprocess:([t,e,n,r,i,s,o])=>({type:Z.between_predicate,betweenKw:ln(t),expr1:nLe(n,{leading:e,trailing:r}),andKw:ln(i),expr2:[cn(o,{leading:s})]})},{name:"case_expression$ebnf$1",symbols:["expression_chain_"],postprocess:vb},{name:"case_expression$ebnf$1",symbols:[],postprocess:()=>null},{name:"case_expression$ebnf$2",symbols:[]},{name:"case_expression$ebnf$2",symbols:["case_expression$ebnf$2","case_clause"],postprocess:t=>t[0].concat([t[1]])},{name:"case_expression",symbols:[de.has("CASE")?{type:"CASE"}:CASE,"_","case_expression$ebnf$1","case_expression$ebnf$2",de.has("END")?{type:"END"}:END],postprocess:([t,e,n,r,i])=>({type:Z.case_expression,caseKw:cn(ln(t),{trailing:e}),endKw:ln(i),expr:n||[],clauses:r})},{name:"case_clause",symbols:[de.has("WHEN")?{type:"WHEN"}:WHEN,"_","expression_chain_",de.has("THEN")?{type:"THEN"}:THEN,"_","expression_chain_"],postprocess:([t,e,n,r,i,s])=>({type:Z.case_when,whenKw:cn(ln(t),{trailing:e}),thenKw:cn(ln(r),{trailing:i}),condition:n,result:s})},{name:"case_clause",symbols:[de.has("ELSE")?{type:"ELSE"}:ELSE,"_","expression_chain_"],postprocess:([t,e,n])=>({type:Z.case_else,elseKw:cn(ln(t),{trailing:e}),result:n})},{name:"comma$subexpression$1",symbols:[de.has("COMMA")?{type:"COMMA"}:COMMA]},{name:"comma",symbols:["comma$subexpression$1"],postprocess:([[t]])=>({type:Z.comma})},{name:"asterisk$subexpression$1",symbols:[de.has("ASTERISK")?{type:"ASTERISK"}:ASTERISK]},{name:"asterisk",symbols:["asterisk$subexpression$1"],postprocess:([[t]])=>({type:Z.operator,text:t.text})},{name:"operator$subexpression$1",symbols:[de.has("OPERATOR")?{type:"OPERATOR"}:OPERATOR]},{name:"operator",symbols:["operator$subexpression$1"],postprocess:([[t]])=>({type:Z.operator,text:t.text})},{name:"identifier$subexpression$1",symbols:[de.has("IDENTIFIER")?{type:"IDENTIFIER"}:IDENTIFIER]},{name:"identifier$subexpression$1",symbols:[de.has("QUOTED_IDENTIFIER")?{type:"QUOTED_IDENTIFIER"}:QUOTED_IDENTIFIER]},{name:"identifier$subexpression$1",symbols:[de.has("VARIABLE")?{type:"VARIABLE"}:VARIABLE]},{name:"identifier",symbols:["identifier$subexpression$1"],postprocess:([[t]])=>({type:Z.identifier,quoted:t.type!=="IDENTIFIER",text:t.text})},{name:"parameter$subexpression$1",symbols:[de.has("NAMED_PARAMETER")?{type:"NAMED_PARAMETER"}:NAMED_PARAMETER]},{name:"parameter$subexpression$1",symbols:[de.has("QUOTED_PARAMETER")?{type:"QUOTED_PARAMETER"}:QUOTED_PARAMETER]},{name:"parameter$subexpression$1",symbols:[de.has("NUMBERED_PARAMETER")?{type:"NUMBERED_PARAMETER"}:NUMBERED_PARAMETER]},{name:"parameter$subexpression$1",symbols:[de.has("POSITIONAL_PARAMETER")?{type:"POSITIONAL_PARAMETER"}:POSITIONAL_PARAMETER]},{name:"parameter$subexpression$1",symbols:[de.has("CUSTOM_PARAMETER")?{type:"CUSTOM_PARAMETER"}:CUSTOM_PARAMETER]},{name:"parameter",symbols:["parameter$subexpression$1"],postprocess:([[t]])=>({type:Z.parameter,key:t.key,text:t.text})},{name:"literal$subexpression$1",symbols:[de.has("NUMBER")?{type:"NUMBER"}:NUMBER]},{name:"literal$subexpression$1",symbols:[de.has("STRING")?{type:"STRING"}:STRING]},{name:"literal",symbols:["literal$subexpression$1"],postprocess:([[t]])=>({type:Z.literal,text:t.text})},{name:"keyword$subexpression$1",symbols:[de.has("RESERVED_KEYWORD")?{type:"RESERVED_KEYWORD"}:RESERVED_KEYWORD]},{name:"keyword$subexpression$1",symbols:[de.has("RESERVED_KEYWORD_PHRASE")?{type:"RESERVED_KEYWORD_PHRASE"}:RESERVED_KEYWORD_PHRASE]},{name:"keyword$subexpression$1",symbols:[de.has("RESERVED_JOIN")?{type:"RESERVED_JOIN"}:RESERVED_JOIN]},{name:"keyword",symbols:["keyword$subexpression$1"],postprocess:([[t]])=>ln(t)},{name:"data_type$subexpression$1",symbols:[de.has("RESERVED_DATA_TYPE")?{type:"RESERVED_DATA_TYPE"}:RESERVED_DATA_TYPE]},{name:"data_type$subexpression$1",symbols:[de.has("RESERVED_DATA_TYPE_PHRASE")?{type:"RESERVED_DATA_TYPE_PHRASE"}:RESERVED_DATA_TYPE_PHRASE]},{name:"data_type",symbols:["data_type$subexpression$1"],postprocess:([[t]])=>_K(t)},{name:"data_type",symbols:[de.has("RESERVED_PARAMETERIZED_DATA_TYPE")?{type:"RESERVED_PARAMETERIZED_DATA_TYPE"}:RESERVED_PARAMETERIZED_DATA_TYPE,"_","parenthesis"],postprocess:([t,e,n])=>({type:Z.parameterized_data_type,dataType:cn(_K(t),{trailing:e}),parenthesis:n})},{name:"logic_operator$subexpression$1",symbols:[de.has("AND")?{type:"AND"}:AND]},{name:"logic_operator$subexpression$1",symbols:[de.has("OR")?{type:"OR"}:OR]},{name:"logic_operator$subexpression$1",symbols:[de.has("XOR")?{type:"XOR"}:XOR]},{name:"logic_operator",symbols:["logic_operator$subexpression$1"],postprocess:([[t]])=>ln(t)},{name:"other_keyword$subexpression$1",symbols:[de.has("WHEN")?{type:"WHEN"}:WHEN]},{name:"other_keyword$subexpression$1",symbols:[de.has("THEN")?{type:"THEN"}:THEN]},{name:"other_keyword$subexpression$1",symbols:[de.has("ELSE")?{type:"ELSE"}:ELSE]},{name:"other_keyword$subexpression$1",symbols:[de.has("END")?{type:"END"}:END]},{name:"other_keyword",symbols:["other_keyword$subexpression$1"],postprocess:([[t]])=>ln(t)},{name:"_$ebnf$1",symbols:[]},{name:"_$ebnf$1",symbols:["_$ebnf$1","comment"],postprocess:t=>t[0].concat([t[1]])},{name:"_",symbols:["_$ebnf$1"],postprocess:([t])=>t},{name:"comment",symbols:[de.has("LINE_COMMENT")?{type:"LINE_COMMENT"}:LINE_COMMENT],postprocess:([t])=>({type:Z.line_comment,text:t.text,precedingWhitespace:t.precedingWhitespace})},{name:"comment",symbols:[de.has("BLOCK_COMMENT")?{type:"BLOCK_COMMENT"}:BLOCK_COMMENT],postprocess:([t])=>({type:Z.block_comment,text:t.text,precedingWhitespace:t.precedingWhitespace})},{name:"comment",symbols:[de.has("DISABLE_COMMENT")?{type:"DISABLE_COMMENT"}:DISABLE_COMMENT],postprocess:([t])=>({type:Z.disable_comment,text:t.text,precedingWhitespace:t.precedingWhitespace})}],ParserStart:"main"},NK=rLe});function yK(t){let e={},n=new wa(i=>[...AK(t.tokenize(i,e)),Fy(i.length)]),r=new iLe(sLe.fromCompiled(NK),{lexer:n});return{parse:(i,s)=>{e=s;let{results:o}=r.feed(i);if(o.length===1)return o[0];throw o.length===0?new Error("Parse error: Invalid SQL"):new Error(`Parse error: Ambiguous grammar
${JSON.stringify(o,void 0,2)}`)}}}var CK,iLe,sLe,bK=G(()=>{CK=z(RK(),1);IK();OK();Pb();yr();({Parser:iLe,Grammar:sLe}=CK.default)});var $,Da,oLe,aLe,CR=G(()=>{Pc();(function(t){t[t.SPACE=0]="SPACE",t[t.NO_SPACE=1]="NO_SPACE",t[t.NO_NEWLINE=2]="NO_NEWLINE",t[t.NEWLINE=3]="NEWLINE",t[t.MANDATORY_NEWLINE=4]="MANDATORY_NEWLINE",t[t.INDENT=5]="INDENT",t[t.SINGLE_INDENT=6]="SINGLE_INDENT"})($=$||($={}));Da=class{constructor(e){this.indentation=e,this.items=[]}add(...e){for(let n of e)switch(n){case $.SPACE:this.items.push($.SPACE);break;case $.NO_SPACE:this.trimHorizontalWhitespace();break;case $.NO_NEWLINE:this.trimWhitespace();break;case $.NEWLINE:this.trimHorizontalWhitespace(),this.addNewline($.NEWLINE);break;case $.MANDATORY_NEWLINE:this.trimHorizontalWhitespace(),this.addNewline($.MANDATORY_NEWLINE);break;case $.INDENT:this.addIndentation();break;case $.SINGLE_INDENT:this.items.push($.SINGLE_INDENT);break;default:this.items.push(n)}}trimHorizontalWhitespace(){for(;oLe(lo(this.items));)this.items.pop()}trimWhitespace(){for(;aLe(lo(this.items));)this.items.pop()}addNewline(e){if(this.items.length>0)switch(lo(this.items)){case $.NEWLINE:this.items.pop(),this.items.push(e);break;case $.MANDATORY_NEWLINE:break;default:this.items.push(e);break}}addIndentation(){for(let e=0;e<this.indentation.getLevel();e++)this.items.push($.SINGLE_INDENT)}toString(){return this.items.map(e=>this.itemToString(e)).join("")}getLayoutItems(){return this.items}itemToString(e){switch(e){case $.SPACE:return" ";case $.NEWLINE:case $.MANDATORY_NEWLINE:return`
`;case $.SINGLE_INDENT:return this.indentation.getSingleIndent();default:return e}}},oLe=t=>t===$.SPACE||t===$.SINGLE_INDENT,aLe=t=>t===$.SPACE||t===$.SINGLE_INDENT||t===$.NEWLINE});function yR(t,e){if(e==="standard")return t;let n=[];return t.length>=10&&t.includes(" ")&&([t,...n]=t.split(" ")),e==="tabularLeft"?t=t.padEnd(9," "):t=t.padStart(9," "),t+["",...n].join(" ")}function Mb(t){return V6(t)||t===k.RESERVED_CLAUSE||t===k.RESERVED_SELECT||t===k.RESERVED_SET_OPERATION||t===k.RESERVED_JOIN||t===k.LIMIT}var wK=G(()=>{yr()});var Ub,lLe,Pa,Bb=G(()=>{Pc();Ub="top-level",lLe="block-level",Pa=class{constructor(e){this.indent=e,this.indentTypes=[]}getSingleIndent(){return this.indent}getLevel(){return this.indentTypes.length}increaseTopLevel(){this.indentTypes.push(Ub)}increaseBlockLevel(){this.indentTypes.push(lLe)}decreaseTopLevel(){this.indentTypes.length>0&&lo(this.indentTypes)===Ub&&this.indentTypes.pop()}decreaseBlockLevel(){for(;this.indentTypes.length>0&&this.indentTypes.pop()===Ub;);}}});var Tf,vc,LK=G(()=>{Bb();CR();Tf=class extends Da{constructor(e){super(new Pa("")),this.expressionWidth=e,this.length=0,this.trailingSpace=!1}add(...e){if(e.forEach(n=>this.addToLength(n)),this.length>this.expressionWidth)throw new vc;super.add(...e)}addToLength(e){if(typeof e=="string")this.length+=e.length,this.trailingSpace=!1;else{if(e===$.MANDATORY_NEWLINE||e===$.NEWLINE)throw new vc;e===$.INDENT||e===$.SINGLE_INDENT||e===$.SPACE?this.trailingSpace||(this.length++,this.trailingSpace=!0):(e===$.NO_NEWLINE||e===$.NO_SPACE)&&this.trailingSpace&&(this.trailingSpace=!1,this.length--)}}},vc=class extends Error{}});var Sf,DK=G(()=>{Pc();Db();yr();xb();CR();wK();LK();Sf=class t{constructor({cfg:e,dialectCfg:n,params:r,layout:i,inline:s=!1}){this.inline=!1,this.nodes=[],this.index=-1,this.cfg=e,this.dialectCfg=n,this.inline=s,this.params=r,this.layout=i}format(e){for(this.nodes=e,this.index=0;this.index<this.nodes.length;this.index++)this.formatNode(this.nodes[this.index]);return this.layout}formatNode(e){this.formatComments(e.leadingComments),this.formatNodeWithoutComments(e),this.formatComments(e.trailingComments)}formatNodeWithoutComments(e){switch(e.type){case Z.function_call:return this.formatFunctionCall(e);case Z.parameterized_data_type:return this.formatParameterizedDataType(e);case Z.array_subscript:return this.formatArraySubscript(e);case Z.property_access:return this.formatPropertyAccess(e);case Z.parenthesis:return this.formatParenthesis(e);case Z.between_predicate:return this.formatBetweenPredicate(e);case Z.case_expression:return this.formatCaseExpression(e);case Z.case_when:return this.formatCaseWhen(e);case Z.case_else:return this.formatCaseElse(e);case Z.clause:return this.formatClause(e);case Z.set_operation:return this.formatSetOperation(e);case Z.limit_clause:return this.formatLimitClause(e);case Z.all_columns_asterisk:return this.formatAllColumnsAsterisk(e);case Z.literal:return this.formatLiteral(e);case Z.identifier:return this.formatIdentifier(e);case Z.parameter:return this.formatParameter(e);case Z.operator:return this.formatOperator(e);case Z.comma:return this.formatComma(e);case Z.line_comment:return this.formatLineComment(e);case Z.block_comment:return this.formatBlockComment(e);case Z.disable_comment:return this.formatBlockComment(e);case Z.data_type:return this.formatDataType(e);case Z.keyword:return this.formatKeywordNode(e)}}formatFunctionCall(e){this.withComments(e.nameKw,()=>{this.layout.add(this.showFunctionKw(e.nameKw))}),this.formatNode(e.parenthesis)}formatParameterizedDataType(e){this.withComments(e.dataType,()=>{this.layout.add(this.showDataType(e.dataType))}),this.formatNode(e.parenthesis)}formatArraySubscript(e){let n;switch(e.array.type){case Z.data_type:n=this.showDataType(e.array);break;case Z.keyword:n=this.showKw(e.array);break;default:n=this.showIdentifier(e.array);break}this.withComments(e.array,()=>{this.layout.add(n)}),this.formatNode(e.parenthesis)}formatPropertyAccess(e){this.formatNode(e.object),this.layout.add($.NO_SPACE,e.operator),this.formatNode(e.property)}formatParenthesis(e){let n=this.formatInlineExpression(e.children);n?(this.layout.add(e.openParen),this.layout.add(...n.getLayoutItems()),this.layout.add($.NO_SPACE,e.closeParen,$.SPACE)):(this.layout.add(e.openParen,$.NEWLINE),ba(this.cfg)?(this.layout.add($.INDENT),this.layout=this.formatSubExpression(e.children)):(this.layout.indentation.increaseBlockLevel(),this.layout.add($.INDENT),this.layout=this.formatSubExpression(e.children),this.layout.indentation.decreaseBlockLevel()),this.layout.add($.NEWLINE,$.INDENT,e.closeParen,$.SPACE))}formatBetweenPredicate(e){this.layout.add(this.showKw(e.betweenKw),$.SPACE),this.layout=this.formatSubExpression(e.expr1),this.layout.add($.NO_SPACE,$.SPACE,this.showNonTabularKw(e.andKw),$.SPACE),this.layout=this.formatSubExpression(e.expr2),this.layout.add($.SPACE)}formatCaseExpression(e){this.formatNode(e.caseKw),this.layout.indentation.increaseBlockLevel(),this.layout=this.formatSubExpression(e.expr),this.layout=this.formatSubExpression(e.clauses),this.layout.indentation.decreaseBlockLevel(),this.layout.add($.NEWLINE,$.INDENT),this.formatNode(e.endKw)}formatCaseWhen(e){this.layout.add($.NEWLINE,$.INDENT),this.formatNode(e.whenKw),this.layout=this.formatSubExpression(e.condition),this.formatNode(e.thenKw),this.layout=this.formatSubExpression(e.result)}formatCaseElse(e){this.layout.add($.NEWLINE,$.INDENT),this.formatNode(e.elseKw),this.layout=this.formatSubExpression(e.result)}formatClause(e){this.isOnelineClause(e)?this.formatClauseInOnelineStyle(e):ba(this.cfg)?this.formatClauseInTabularStyle(e):this.formatClauseInIndentedStyle(e)}isOnelineClause(e){return ba(this.cfg)?this.dialectCfg.tabularOnelineClauses[e.nameKw.text]:this.dialectCfg.onelineClauses[e.nameKw.text]}formatClauseInIndentedStyle(e){this.layout.add($.NEWLINE,$.INDENT,this.showKw(e.nameKw),$.NEWLINE),this.layout.indentation.increaseTopLevel(),this.layout.add($.INDENT),this.layout=this.formatSubExpression(e.children),this.layout.indentation.decreaseTopLevel()}formatClauseInOnelineStyle(e){this.layout.add($.NEWLINE,$.INDENT,this.showKw(e.nameKw),$.SPACE),this.layout=this.formatSubExpression(e.children)}formatClauseInTabularStyle(e){this.layout.add($.NEWLINE,$.INDENT,this.showKw(e.nameKw),$.SPACE),this.layout.indentation.increaseTopLevel(),this.layout=this.formatSubExpression(e.children),this.layout.indentation.decreaseTopLevel()}formatSetOperation(e){this.layout.add($.NEWLINE,$.INDENT,this.showKw(e.nameKw),$.NEWLINE),this.layout.add($.INDENT),this.layout=this.formatSubExpression(e.children)}formatLimitClause(e){this.withComments(e.limitKw,()=>{this.layout.add($.NEWLINE,$.INDENT,this.showKw(e.limitKw))}),this.layout.indentation.increaseTopLevel(),ba(this.cfg)?this.layout.add($.SPACE):this.layout.add($.NEWLINE,$.INDENT),e.offset?(this.layout=this.formatSubExpression(e.offset),this.layout.add($.NO_SPACE,",",$.SPACE),this.layout=this.formatSubExpression(e.count)):this.layout=this.formatSubExpression(e.count),this.layout.indentation.decreaseTopLevel()}formatAllColumnsAsterisk(e){this.layout.add("*",$.SPACE)}formatLiteral(e){this.layout.add(e.text,$.SPACE)}formatIdentifier(e){this.layout.add(this.showIdentifier(e),$.SPACE)}formatParameter(e){this.layout.add(this.params.get(e),$.SPACE)}formatOperator({text:e}){this.cfg.denseOperators||this.dialectCfg.alwaysDenseOperators.includes(e)?this.layout.add($.NO_SPACE,e):e===":"?this.layout.add($.NO_SPACE,e,$.SPACE):this.layout.add(e,$.SPACE)}formatComma(e){this.inline?this.layout.add($.NO_SPACE,",",$.SPACE):this.layout.add($.NO_SPACE,",",$.NEWLINE,$.INDENT)}withComments(e,n){this.formatComments(e.leadingComments),n(),this.formatComments(e.trailingComments)}formatComments(e){e&&e.forEach(n=>{n.type===Z.line_comment?this.formatLineComment(n):this.formatBlockComment(n)})}formatLineComment(e){AR(e.precedingWhitespace||"")?this.layout.add($.NEWLINE,$.INDENT,e.text,$.MANDATORY_NEWLINE,$.INDENT):this.layout.getLayoutItems().length>0?this.layout.add($.NO_NEWLINE,$.SPACE,e.text,$.MANDATORY_NEWLINE,$.INDENT):this.layout.add(e.text,$.MANDATORY_NEWLINE,$.INDENT)}formatBlockComment(e){e.type===Z.block_comment&&this.isMultilineBlockComment(e)?(this.splitBlockComment(e.text).forEach(n=>{this.layout.add($.NEWLINE,$.INDENT,n)}),this.layout.add($.NEWLINE,$.INDENT)):this.layout.add(e.text,$.SPACE)}isMultilineBlockComment(e){return AR(e.text)||AR(e.precedingWhitespace||"")}isDocComment(e){let n=e.split(/\n/);return/^\/\*\*?$/.test(n[0])&&n.slice(1,n.length-1).every(r=>/^\s*\*/.test(r))&&/^\s*\*\/$/.test(lo(n))}splitBlockComment(e){return this.isDocComment(e)?e.split(/\n/).map(n=>/^\s*\*/.test(n)?" "+n.replace(/^\s*/,""):n):e.split(/\n/).map(n=>n.replace(/^\s*/,""))}formatSubExpression(e){return new t({cfg:this.cfg,dialectCfg:this.dialectCfg,params:this.params,layout:this.layout,inline:this.inline}).format(e)}formatInlineExpression(e){let n=this.params.getPositionalParameterIndex();try{return new t({cfg:this.cfg,dialectCfg:this.dialectCfg,params:this.params,layout:new Tf(this.cfg.expressionWidth),inline:!0}).format(e)}catch(r){if(r instanceof vc){this.params.setPositionalParameterIndex(n);return}else throw r}}formatKeywordNode(e){switch(e.tokenType){case k.RESERVED_JOIN:return this.formatJoin(e);case k.AND:case k.OR:case k.XOR:return this.formatLogicalOperator(e);default:return this.formatKeyword(e)}}formatJoin(e){ba(this.cfg)?(this.layout.indentation.decreaseTopLevel(),this.layout.add($.NEWLINE,$.INDENT,this.showKw(e),$.SPACE),this.layout.indentation.increaseTopLevel()):this.layout.add($.NEWLINE,$.INDENT,this.showKw(e),$.SPACE)}formatKeyword(e){this.layout.add(this.showKw(e),$.SPACE)}formatLogicalOperator(e){this.cfg.logicalOperatorNewline==="before"?ba(this.cfg)?(this.layout.indentation.decreaseTopLevel(),this.layout.add($.NEWLINE,$.INDENT,this.showKw(e),$.SPACE),this.layout.indentation.increaseTopLevel()):this.layout.add($.NEWLINE,$.INDENT,this.showKw(e),$.SPACE):this.layout.add(this.showKw(e),$.NEWLINE,$.INDENT)}formatDataType(e){this.layout.add(this.showDataType(e),$.SPACE)}showKw(e){return Mb(e.tokenType)?yR(this.showNonTabularKw(e),this.cfg.indentStyle):this.showNonTabularKw(e)}showNonTabularKw(e){switch(this.cfg.keywordCase){case"preserve":return Dc(e.raw);case"upper":return e.text;case"lower":return e.text.toLowerCase()}}showFunctionKw(e){return Mb(e.tokenType)?yR(this.showNonTabularFunctionKw(e),this.cfg.indentStyle):this.showNonTabularFunctionKw(e)}showNonTabularFunctionKw(e){switch(this.cfg.functionCase){case"preserve":return Dc(e.raw);case"upper":return e.text;case"lower":return e.text.toLowerCase()}}showIdentifier(e){if(e.quoted)return e.text;switch(this.cfg.identifierCase){case"preserve":return e.text;case"upper":return e.text.toUpperCase();case"lower":return e.text.toLowerCase()}}showDataType(e){switch(this.cfg.dataTypeCase){case"preserve":return Dc(e.raw);case"upper":return e.text;case"lower":return e.text.toLowerCase()}}}});var Rf,PK=G(()=>{Db();TK();bK();DK();CR();Bb();Rf=class{constructor(e,n){this.dialect=e,this.cfg=n,this.params=new pf(this.cfg.params)}format(e){let n=this.parse(e);return this.formatAst(n).trimEnd()}parse(e){return yK(this.dialect.tokenizer).parse(e,this.cfg.paramTypes||{})}formatAst(e){return e.map(n=>this.formatStatement(n)).join(`
`.repeat(this.cfg.linesBetweenQueries+1))}formatStatement(e){let n=new Sf({cfg:this.cfg,dialectCfg:this.dialect.formatOptions,params:this.params,layout:new Da(new Pa(pK(this.cfg)))}).format(e.children);return e.hasSemicolon&&(this.cfg.newlineBeforeSemicolon?n.add($.NEWLINE,";"):n.add($.NO_NEWLINE,";")),n.toString()}}});function xK(t){let e=["multilineLists","newlineBeforeOpenParen","newlineBeforeCloseParen","aliasAs","commaPosition","tabulateAlias"];for(let n of e)if(n in t)throw new As(`${n} config is no more supported.`);if(t.expressionWidth<=0)throw new As(`expressionWidth config must be positive number. Received ${t.expressionWidth} instead.`);if(t.params&&!cLe(t.params)&&console.warn('WARNING: All "params" option values should be strings.'),t.paramTypes&&!uLe(t.paramTypes))throw new As("Empty regex given in custom paramTypes. That would result in matching infinite amount of parameters.");return t}function cLe(t){return(t instanceof Array?t:Object.values(t)).every(n=>typeof n=="string")}function uLe(t){return t.custom&&Array.isArray(t.custom)?t.custom.every(e=>e.regex!==""):!0}var As,Fb=G(()=>{As=class extends Error{}});var dLe,vK,Hb,fLe,MK,Gb,UK=G(()=>{Z3();hK();PK();Fb();dLe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},vK={bigquery:"bigquery",db2:"db2",db2i:"db2i",duckdb:"duckdb",hive:"hive",mariadb:"mariadb",mysql:"mysql",n1ql:"n1ql",plsql:"plsql",postgresql:"postgresql",redshift:"redshift",spark:"spark",sqlite:"sqlite",sql:"sql",tidb:"tidb",trino:"trino",transactsql:"transactsql",tsql:"transactsql",singlestoredb:"singlestoredb",snowflake:"snowflake"},Hb=Object.keys(vK),fLe={tabWidth:2,useTabs:!1,keywordCase:"preserve",identifierCase:"preserve",dataTypeCase:"preserve",functionCase:"preserve",indentStyle:"standard",logicalOperatorNewline:"before",expressionWidth:50,linesBetweenQueries:1,denseOperators:!1,newlineBeforeSemicolon:!1},MK=(t,e={})=>{if(typeof e.language=="string"&&!Hb.includes(e.language))throw new As(`Unsupported SQL dialect: ${e.language}`);let n=vK[e.language||"sql"];return Gb(t,Object.assign(Object.assign({},e),{dialect:Ib[n]}))},Gb=(t,e)=>{var{dialect:n}=e,r=dLe(e,["dialect"]);if(typeof t!="string")throw new Error("Invalid query argument. Expected string, instead got "+typeof t);let i=xK(Object.assign(Object.assign({},fLe),r));return new Rf(EK(n),i).format(t)}});var BK={};ht(BK,{ConfigError:()=>As,bigquery:()=>eR,db2:()=>tR,db2i:()=>nR,duckdb:()=>rR,expandPhrases:()=>v,format:()=>MK,formatDialect:()=>Gb,hive:()=>iR,mariadb:()=>sR,mysql:()=>oR,n1ql:()=>lR,plsql:()=>cR,postgresql:()=>uR,redshift:()=>dR,singlestoredb:()=>SR,snowflake:()=>RR,spark:()=>fR,sql:()=>hR,sqlite:()=>ER,supportedDialects:()=>Hb,tidb:()=>aR,transactsql:()=>TR,trino:()=>pR});var FK=G(()=>{UK();vt();Fb();Gy();$y();Yy();qy();zy();Ky();Qy();eb();tb();rb();sb();ab();cb();db();Eb();pb();Sb();Ab();gb()});var kK={};ht(kK,{ExplainPlanView:()=>Wb,parseExplainOutput:()=>ELe});function ELe(t){let e=t.split(`
`).filter(d=>d.trim()),n=t.includes("QUERY VERBOSE PLAN:")||t.includes("Node 1."),r=e.map(d=>d.replace(/^NOTICE:\s*/i,"").trim()).filter(d=>d&&!d.startsWith("QUERY PLAN")&&!d.startsWith("QUERY VERBOSE")),i=[],s=[],o=0,a=0,l=r.findIndex(d=>d.includes("PLANTEXT:")),c=l>=0?r.slice(l+1).filter(d=>!d.startsWith("(")&&!d.includes("locus=")):r,u=[];for(let d of c){if(!d.trim()||d.startsWith("(xpath_")||d.includes("locus="))continue;let E=d.match(/^(\s*)/)?.[1]?.length||0,f=Math.floor(E/3),p=d.match(/^[\s]*(?:[lr]:\s*)?([\w\s-]+?)(?:\s+table\s+"(\w+)")?(?:\s+{[^}]*})?\s*\(cost=([\d.]+)\.\.([\d.]+)\s+rows=(\d+)\s+width=(\d+)\s+conf=([\d.]+)\)/i);if(p){let[,h,T,S,I,R,m,A]=p,N=h.trim(),g={id:++o,type:N,table:T,cost:{start:parseFloat(S),end:parseFloat(I)},rows:parseInt(R),width:parseInt(m),confidence:parseFloat(A),indent:f,children:[],raw:d.trim(),warnings:[]};for(hLe(g),s.push(...g.warnings),g.cost.end>a&&(a=g.cost.end);u.length>0&&u[u.length-1].indent>=f;)u.pop();u.length>0?u[u.length-1].children.push(g):i.push(g),u.push(g)}}return{nodes:i,rawText:t,isVerbose:n,totalCost:a,warnings:s}}function hLe(t){t.type.includes("Sequential Scan")&&t.rows>5e5&&t.warnings.push({type:"warning",message:`Sequential Scan on ${t.table||"table"} (${t.rows.toLocaleString()} rows) - consider adding an index`,icon:"\u26A0\uFE0F"}),t.type.includes("Nested Loop")&&t.rows>1e5&&t.warnings.push({type:"critical",message:`Nested Loop producing ${t.rows.toLocaleString()} rows - potential performance issue`,icon:"\u{1F534}"}),t.cost.end>1e10?t.warnings.push({type:"critical",message:`Very high estimated cost: ${t.cost.end.toExponential(2)}`,icon:"\u{1F534}"}):t.cost.end>1e7&&t.warnings.push({type:"warning",message:`High estimated cost: ${t.cost.end.toLocaleString()}`,icon:"\u26A0\uFE0F"}),t.confidence===0&&t.warnings.push({type:"info",message:"Low confidence estimate (conf=0) - statistics may be outdated",icon:"\u2139\uFE0F"})}function pLe(t){return t.includes("Sequential Scan")?"#e74c3c":t.includes("Index Scan")?"#27ae60":t.includes("Nested Loop")?"#e67e22":t.includes("Hash Join")?"#3498db":t.includes("Merge Join")?"#9b59b6":t.includes("Aggregate")?"#1abc9c":t.includes("Group")?"#16a085":t.includes("Sort")?"#f39c12":t.includes("Limit")?"#95a5a6":t.includes("Sub-query")?"#34495e":"#7f8c8d"}function WK(t,e=0){return t.map(n=>{let r=n.children.length>0,i=pLe(n.type),s=n.warnings.map(o=>`<span class="warning-badge warning-${o.type}" title="${o.message}">${o.icon}</span>`).join("");return`
        <div class="plan-node" style="--node-color: ${i}">
            <div class="node-header">
                ${r?'<span class="toggle-btn">\u25BC</span>':'<span class="toggle-spacer"></span>'}
                <span class="node-type" style="background-color: ${i}">${n.type}</span>
                ${n.table?`<span class="node-table">${n.table}${n.alias?` (${n.alias})`:""}</span>`:""}
                ${s}
            </div>
            <div class="node-metrics">
                <span class="metric"><b>Cost:</b> ${HK(n.cost.start)}..${HK(n.cost.end)}</span>
                <span class="metric"><b>Rows:</b> ${n.rows.toLocaleString()}</span>
                <span class="metric"><b>Width:</b> ${n.width}</span>
                <span class="metric ${n.confidence===0?"low-conf":""}"><b>Conf:</b> ${n.confidence}%</span>
            </div>
            ${r?`<div class="node-children">${WK(n.children,e+1)}</div>`:""}
        </div>`}).join("")}function HK(t){return t>1e6?t.toExponential(1):t.toLocaleString(void 0,{maximumFractionDigits:1})}function $K(t){return t.reduce((e,n)=>e+1+$K(n.children),0)}function GK(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function TLe(){let t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let n=0;n<32;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}var br,Wb,YK=G(()=>{"use strict";br=z(require("vscode"));Wb=class t{constructor(e,n,r,i){this._disposables=[];this._panel=e,this._extensionUri=n,this._update(r,i),this._panel.onDidDispose(()=>this.dispose(),null,this._disposables),this._panel.webview.onDidReceiveMessage(s=>{switch(s.command){case"copyPlan":br.env.clipboard.writeText(r.rawText),br.window.showInformationMessage("Plan copied to clipboard");return}},null,this._disposables)}static{this.viewType="netezza.explainPlan"}static createOrShow(e,n,r){let i=br.window.activeTextEditor?br.ViewColumn.Beside:void 0,s=br.window.createWebviewPanel(t.viewType,"Query Execution Plan",i||br.ViewColumn.One,{enableScripts:!0,localResourceRoots:[br.Uri.joinPath(e,"media")],retainContextWhenHidden:!0});new t(s,e,n,r)}dispose(){for(this._panel.dispose();this._disposables.length;){let e=this._disposables.pop();e&&e.dispose()}}_update(e,n){this._panel.title="Query Execution Plan",this._panel.webview.html=this._getHtmlForWebview(e,n)}_getHtmlForWebview(e,n){let r=this._panel.webview.asWebviewUri(br.Uri.joinPath(this._extensionUri,"media","explainPlan.css")),i=TLe(),s=GK(n);return`<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Security-Policy" content="default-src 'none'; style-src ${this._panel.webview.cspSource} 'unsafe-inline'; script-src 'nonce-${i}';">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="${r}" rel="stylesheet">
    <title>Query Execution Plan</title>
</head>
<body>
    <div class="container">
        <div class="header">
            <h2>Query Execution Plan</h2>
            <div class="header-actions">
                <button id="copyBtn" class="btn">\u{1F4CB} Copy Plan</button>
                <button id="expandAllBtn" class="btn">\u2795 Expand All</button>
                <button id="collapseAllBtn" class="btn">\u2796 Collapse All</button>
            </div>
        </div>

        ${e.warnings.length>0?`
        <div class="warnings-summary">
            <h3>\u26A0\uFE0F Performance Issues Detected (${e.warnings.length})</h3>
            <ul>
                ${e.warnings.map(o=>`<li class="warning-${o.type}">${o.icon} ${o.message}</li>`).join("")}
            </ul>
        </div>
        `:`
        <div class="no-warnings">
            <span>\u2705 No obvious performance issues detected</span>
        </div>
        `}

        <div class="stats-bar">
            <div class="stat">
                <span class="stat-label">Total Cost:</span>
                <span class="stat-value">${e.totalCost>1e6?e.totalCost.toExponential(2):e.totalCost.toLocaleString()}</span>
            </div>
            <div class="stat">
                <span class="stat-label">Nodes:</span>
                <span class="stat-value">${$K(e.nodes)}</span>
            </div>
        </div>

        <div class="query-section">
            <h3>Query</h3>
            <pre class="query-text">${s}</pre>
        </div>

        <div class="plan-section">
            <h3>Execution Plan</h3>
            <div id="planTree" class="plan-tree">
                ${WK(e.nodes)}
            </div>
        </div>

        <div class="raw-section">
            <details>
                <summary>Raw Plan Output</summary>
                <pre class="raw-plan">${GK(e.rawText)}</pre>
            </details>
        </div>
    </div>

    <script nonce="${i}">
        const vscode = acquireVsCodeApi();
        
        document.getElementById('copyBtn').addEventListener('click', () => {
            vscode.postMessage({ command: 'copyPlan' });
        });

        document.getElementById('expandAllBtn').addEventListener('click', () => {
            document.querySelectorAll('.node-children').forEach(el => el.style.display = 'block');
            document.querySelectorAll('.toggle-btn').forEach(el => el.textContent = '\u25BC');
        });

        document.getElementById('collapseAllBtn').addEventListener('click', () => {
            document.querySelectorAll('.node-children').forEach(el => el.style.display = 'none');
            document.querySelectorAll('.toggle-btn').forEach(el => el.textContent = '\u25B6');
        });

        document.querySelectorAll('.toggle-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                const node = e.target.closest('.plan-node');
                const children = node.querySelector('.node-children');
                if (children) {
                    const isHidden = children.style.display === 'none';
                    children.style.display = isHidden ? 'block' : 'none';
                    e.target.textContent = isHidden ? '\u25BC' : '\u25B6';
                }
            });
        });
    </script>
</body>
</html>`}}});var gLe={};ht(gLe,{activate:()=>ALe,deactivate:()=>mLe});module.exports=Is(gLe);var q=z(require("vscode"));En();eA();var Zn=z(require("vscode")),tE=class t{constructor(e,n,r){this.extensionUri=n;this.connectionManager=r;this._disposables=[];this._panel=e,this._panel.onDidDispose(()=>this.dispose(),null,this._disposables),this._panel.webview.html=this._getHtmlForWebview(this._panel.webview),this._panel.webview.onDidReceiveMessage(async i=>{switch(i.command){case"save":try{await this.connectionManager.saveConnection(i.data),Zn.window.showInformationMessage(`Connection '${i.data.name}' saved and activated!`),this.sendConnectionsToWebview()}catch(s){let o=s instanceof Error?s.message:String(s);Zn.window.showErrorMessage(`Error saving: ${o}`)}return;case"delete":try{await Zn.window.showWarningMessage(`Are you sure you want to delete '${i.name}'?`,{modal:!0},"Yes","No")==="Yes"&&(await this.connectionManager.deleteConnection(i.name),Zn.window.showInformationMessage(`Connection '${i.name}' deleted.`),this.sendConnectionsToWebview())}catch(s){let o=s instanceof Error?s.message:String(s);Zn.window.showErrorMessage(`Error deleting: ${o}`)}return;case"loadConnections":this.sendConnectionsToWebview();return}},null,this._disposables)}async sendConnectionsToWebview(){let e=await this.connectionManager.getConnections(),n=this.connectionManager.getActiveConnectionName();await this._panel.webview.postMessage({command:"updateConnections",connections:e,activeName:n})}static createOrShow(e,n){let r=Zn.window.activeTextEditor?Zn.window.activeTextEditor.viewColumn:void 0;if(t.currentPanel){t.currentPanel._panel.reveal(r);return}let i=Zn.window.createWebviewPanel("netezzaLogin","Connect to Netezza",r||Zn.ViewColumn.One,{enableScripts:!0,retainContextWhenHidden:!0});t.currentPanel=new t(i,e,n)}dispose(){for(t.currentPanel=void 0,this._panel.dispose();this._disposables.length;){let e=this._disposables.pop();e&&e.dispose()}}_getHtmlForWebview(e){let n=e.asWebviewUri(Zn.Uri.joinPath(this.extensionUri,"netezza_icon64.png"));return`<!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>Connect to Netezza</title>
            <style>
                :root {
                    --container-paddding: 20px;
                    --input-padding-vertical: 6px;
                    --input-padding-horizontal: 8px;
                    --input-margin-vertical: 4px;
                    --input-margin-horizontal: 0;
                }
                body {
                    font-family: var(--vscode-font-family);
                    padding: 0;
                    margin: 0;
                    color: var(--vscode-foreground);
                    background-color: var(--vscode-editor-background);
                    display: flex;
                    height: 100vh;
                    overflow: hidden;
                }
                
                /* Sidebar */
                .sidebar {
                    width: 260px;
                    background-color: var(--vscode-sideBar-background);
                    border-right: 1px solid var(--vscode-panel-border);
                    display: flex;
                    flex-direction: column;
                    flex-shrink: 0;
                    user-select: none;
                }
                .sidebar-header {
                    padding: 10px 15px;
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    border-bottom: 1px solid var(--vscode-panel-border);
                    background-color: var(--vscode-sideBarSectionHeader-background);
                }
                .sidebar-title {
                    font-weight: bold;
                    font-size: 11px;
                    text-transform: uppercase;
                    color: var(--vscode-sideBarTitle-foreground);
                }
                .connection-list {
                    flex: 1;
                    overflow-y: auto;
                    padding: 0;
                }
                .connection-item {
                    padding: 8px 15px;
                    cursor: pointer;
                    display: flex;
                    align-items: center;
                    border-left: 3px solid transparent;
                    color: var(--vscode-sideBar-foreground);
                }
                .connection-item:hover {
                    background-color: var(--vscode-list-hoverBackground);
                }
                .connection-item.active {
                    background-color: var(--vscode-list-activeSelectionBackground);
                    color: var(--vscode-list-activeSelectionForeground);
                    border-left-color: var(--vscode-focusBorder);
                }
                .connection-item .name {
                    flex: 1;
                    overflow: hidden;
                    text-overflow: ellipsis;
                    white-space: nowrap;
                    display: flex;
                    align-items: center;
                    gap: 8px;
                }
                .connection-item .status {
                    font-size: 0.8em;
                    margin-left: 5px;
                    opacity: 0.7;
                }

                /* Main Content */
                .main {
                    flex: 1;
                    padding: 40px;
                    overflow-y: auto;
                    display: flex;
                    justify-content: center;
                    align-items: flex-start;
                }
                .form-container {
                    width: 100%;
                    max-width: 500px;
                    background-color: var(--vscode-editorWidget-background);
                    border: 1px solid var(--vscode-widget-border);
                    padding: 30px;
                    border-radius: 4px;
                    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
                }
                
                h2 {
                    margin-top: 0;
                    margin-bottom: 25px;
                    font-size: 1.4em;
                    font-weight: 500;
                    padding-bottom: 10px;
                    border-bottom: 1px solid var(--vscode-panel-border);
                    display: flex;
                    align-items: center;
                    gap: 10px;
                }

                .form-group {
                    margin-bottom: 18px;
                }
                .form-row {
                    display: flex;
                    gap: 15px;
                }
                .form-col {
                    flex: 1;
                }

                label {
                    display: block;
                    margin-bottom: 6px;
                    font-weight: 600;
                    font-size: 12px;
                    color: var(--vscode-input-placeholderForeground);
                    display: flex;
                    align-items: center;
                    gap: 6px;
                }

                input, select {
                    width: 100%;
                    padding: 8px 10px;
                    box-sizing: border-box;
                    background: var(--vscode-input-background);
                    color: var(--vscode-input-foreground);
                    border: 1px solid var(--vscode-input-border);
                    border-radius: 2px;
                    font-family: inherit;
                    font-size: 13px;
                }
                input:focus, select:focus {
                    border-color: var(--vscode-focusBorder);
                    outline: 1px solid var(--vscode-focusBorder);
                }
                
                /* Buttons */
                .actions {
                    margin-top: 30px;
                    display: flex;
                    gap: 12px;
                    padding-top: 20px;
                    border-top: 1px solid var(--vscode-panel-border);
                }
                button {
                    background: var(--vscode-button-background);
                    color: var(--vscode-button-foreground);
                    padding: 8px 16px;
                    border: none;
                    cursor: pointer;
                    border-radius: 2px;
                    font-size: 13px;
                    font-weight: 500;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                }
                button:hover {
                    background: var(--vscode-button-hoverBackground);
                }
                button.secondary {
                    background: var(--vscode-button-secondaryBackground);
                    color: var(--vscode-button-secondaryForeground);
                }
                button.secondary:hover {
                    background: var(--vscode-button-secondaryHoverBackground);
                }
                button.danger {
                    background: var(--vscode-errorForeground);
                    color: white;
                }
                button.icon-btn {
                    padding: 4px;
                    background: transparent;
                    color: var(--vscode-icon-foreground);
                }
                button.icon-btn:hover {
                    background: var(--vscode-toolbar-hoverBackground);
                }

                .icon-img {
                    width: 16px;
                    height: 16px;
                    object-fit: contain;
                }
                .logo-header {
                    width: 32px;
                    height: 32px;
                    margin-right: 10px;
                }

            </style>
        </head>
        <body>
            <div class="sidebar">
                <div class="sidebar-header">
                    <span class="sidebar-title">Saved Connections</span>
                    <button class="icon-btn" id="btnNew" title="New Connection">
                        <svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M14 7v1H8v6H7V8H1V7h6V1h1v6h6z"/></svg>
                    </button>
                </div>
                <div id="connectionList" class="connection-list"></div>
            </div>
            
            <div class="main">
                <div class="form-container">
                    <h2 id="formTitle">
                        <img src="${n}" class="logo-header" />
                        New Connection
                    </h2>
                    
                    <div class="form-group">
                        <label for="name">Connection Name</label>
                        <input type="text" id="name" placeholder="Friendly name (e.g. Production)">
                    </div>

                    <div class="form-group">
                        <label for="dbType">
                            Database Type 
                            <img src="${n}" class="icon-img" />
                        </label>
                        <select id="dbType">
                            <option value="NetezzaSQL">NetezzaSQL</option>
                        </select>
                    </div>

                    <div class="form-row">
                        <div class="form-col">
                            <div class="form-group">
                                <label for="host">Host</label>
                                <input type="text" id="host" placeholder="Hostname or IP">
                            </div>
                        </div>
                        <div class="form-col" style="flex: 0 0 80px;">
                            <div class="form-group">
                                <label for="port">Port</label>
                                <input type="number" id="port" value="5480">
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="database">
                            Database
                        </label>
                        <input type="text" id="database" placeholder="Database name" value="system">
                    </div>

                    <div class="form-row">
                         <div class="form-col">
                            <div class="form-group">
                                <label for="user">User</label>
                                <input type="text" id="user" placeholder="Username">
                            </div>
                         </div>
                         <div class="form-col">
                            <div class="form-group">
                                <label for="password">Password</label>
                                <input type="password" id="password" placeholder="Password">
                            </div>
                         </div>
                    </div>
                    
                    <div class="actions">
                        <button id="btnSave" onclick="save()">Save & Connect</button>
                        <button id="btnDelete" class="danger" onclick="del()" style="display: none;">Delete</button>
                    </div>
                </div>
            </div>

            <script>
                const vscode = acquireVsCodeApi();
                let connections = [];
                let activeName = null;
                let currentEditName = null;
                const iconSrc = "${n}";

                // Load initial data
                window.addEventListener('message', event => {
                    const message = event.data;
                    switch (message.command) {
                        case 'updateConnections':
                            connections = message.connections;
                            activeName = message.activeName;
                            renderList();
                            break;
                    }
                });
                
                vscode.postMessage({ command: 'loadConnections' });

                document.getElementById('btnNew').addEventListener('click', () => {
                    clearForm();
                });

                function renderList() {
                    const list = document.getElementById('connectionList');
                    list.innerHTML = '';
                    
                    connections.forEach(conn => {
                        const div = document.createElement('div');
                        div.className = 'connection-item';
                        if (conn.name === currentEditName) {
                             div.classList.add('active');
                        }
                        
                        div.innerHTML = \`<span class="name"><img src="\${iconSrc}" class="icon-img"> \${conn.name}</span>\`;
                        if (conn.name === activeName) {
                            div.innerHTML += \`<span class="status">\u25CF</span>\`;
                            div.title = 'Active Connection';
                        }
                        
                        div.onclick = () => loadForm(conn);
                        list.appendChild(div);
                    });
                }

                function loadForm(conn) {
                    currentEditName = conn.name;
                    document.getElementById('formTitle').innerHTML = \`<img src="\${iconSrc}" class="logo-header" /> Edit Connection\`;
                    document.getElementById('name').value = conn.name;
                    document.getElementById('dbType').value = conn.dbType || 'NetezzaSQL';
                    document.getElementById('host').value = conn.host;
                    document.getElementById('port').value = conn.port;
                    document.getElementById('database').value = conn.database;
                    document.getElementById('user').value = conn.user;
                    document.getElementById('password').value = conn.password || ''; 
                    
                    document.getElementById('btnDelete').style.display = 'block';
                    renderList();
                }

                function clearForm() {
                    currentEditName = null;
                    document.getElementById('formTitle').innerHTML = \`<img src="\${iconSrc}" class="logo-header" /> New Connection\`;
                    document.getElementById('name').value = '';
                    document.getElementById('dbType').value = 'NetezzaSQL';
                    document.getElementById('host').value = '';
                    document.getElementById('port').value = '5480';
                    document.getElementById('database').value = 'system';
                    document.getElementById('user').value = '';
                    document.getElementById('password').value = '';
                    
                    document.getElementById('btnDelete').style.display = 'none';
                    renderList();
                }

                function save() {
                    const name = document.getElementById('name').value;
                    if (!name) {
                        return; // Add validation UI?
                    }
                    
                    const data = {
                        name: name,
                        dbType: document.getElementById('dbType').value,
                        host: document.getElementById('host').value,
                        port: parseInt(document.getElementById('port').value),
                        database: document.getElementById('database').value,
                        user: document.getElementById('user').value,
                        password: document.getElementById('password').value
                    };
                    
                    vscode.postMessage({
                        command: 'save',
                        data: data
                    });
                }

                function del() {
                    if (currentEditName) {
                        vscode.postMessage({
                            command: 'delete',
                            name: currentEditName
                        });
                    }
                }
            </script>
        </body>
        </html>`}};var Se=z(require("vscode"));En();En();function B8(t,e,n){return`SELECT description FROM ${t}.._v_object_data WHERE objtype='TABLE' AND objname='${n}' AND schema='${e}'`}function Vc(t,e,n){return`
        SELECT 
            X.ATTNAME
            , X.FORMAT_TYPE
            , CASE WHEN X.ATTNOTNULL THEN 1 ELSE 0 END AS IS_NOT_NULL
            , X.COLDEFAULT
            , COALESCE(X.DESCRIPTION, '') AS DESCRIPTION
            , MAX(CASE WHEN K.CONTYPE = 'p' THEN 1 ELSE 0 END) AS IS_PK
            , MAX(CASE WHEN K.CONTYPE = 'f' THEN 1 ELSE 0 END) AS IS_FK
        FROM
            ${t}.._V_RELATION_COLUMN X
        INNER JOIN
            ${t}.._V_OBJECT_DATA O ON X.OBJID = O.OBJID
        LEFT JOIN
            ${t}.._V_RELATION_KEYDATA K 
            ON UPPER(K.RELATION) = UPPER(O.OBJNAME) 
            AND UPPER(K.SCHEMA) = UPPER(O.SCHEMA)
            AND UPPER(K.ATTNAME) = UPPER(X.ATTNAME)
            AND K.CONTYPE IN ('p', 'f')
        WHERE
            UPPER(O.OBJNAME) = UPPER('${n}')
            AND UPPER(O.DBNAME) = UPPER('${t}')
            AND UPPER(O.SCHEMA) = UPPER('${e}')
        GROUP BY 
            X.ATTNAME, X.FORMAT_TYPE, X.ATTNOTNULL, X.COLDEFAULT, X.DESCRIPTION, X.ATTNUM
        ORDER BY 
            X.ATTNUM
    `}function F8(t){let e=!1,n=t.IS_NOT_NULL;return typeof n=="boolean"?e=n:typeof n=="number"?e=n===1:typeof n=="string"&&(e=n==="1"||n.toLowerCase()==="true"||n.toLowerCase()==="t"),{attname:t.ATTNAME,formatType:t.FORMAT_TYPE,isNotNull:e,colDefault:t.COLDEFAULT||null,description:t.DESCRIPTION||"",isPk:Number(t.IS_PK)===1,isFk:Number(t.IS_FK)===1}}function H8(t){if(!t)return null;let e=Te(t);return e.length>0&&e[0].DESCRIPTION?e[0].DESCRIPTION:null}function qc(t){if(!t)return[];try{return Te(t).map(F8)}catch(e){return console.error("[TableMetadataProvider] Error parsing column metadata:",e),[]}}async function g0(t,e,n,r){let i=B8(e,n,r),s=Vc(e,n,r),[o,a]=await Promise.all([t(i),t(s)]);return{tableComment:H8(o),columns:qc(a)}}function I0(t){return t.map(e=>({ATTNAME:e.attname,FORMAT_TYPE:e.formatType,IS_NOT_NULL:e.isNotNull?1:0,COLDEFAULT:e.colDefault,DESCRIPTION:e.description,IS_PK:e.isPk?1:0,IS_FK:e.isFk?1:0}))}var nE=class{constructor(e,n,r){this.context=e;this.connectionManager=n;this.metadataCache=r;this._onDidChangeTreeData=new Se.EventEmitter;this.onDidChangeTreeData=this._onDidChangeTreeData.event;this.connectionManager.onDidChangeConnections(()=>this.refresh())}refresh(){this._onDidChangeTreeData.fire()}triggerDatabasePrefetch(e,n){this.metadataCache.hasConnectionPrefetchTriggered(e)||(console.log(`[SchemaProvider] Triggering connection prefetch for: ${e}`),this.metadataCache.triggerConnectionPrefetch(e,async r=>{try{return await ce(this.context,r,!0,this.connectionManager,e)}catch(i){console.error("[SchemaProvider] Prefetch query error:",i);return}}))}getTreeItem(e){return e}getParent(e){if(e.contextValue!=="serverInstance"){if(e.contextValue==="database")return new en(e.connectionName,Se.TreeItemCollapsibleState.Collapsed,"serverInstance",void 0,void 0,void 0,void 0,void 0,e.connectionName,void 0);if(e.contextValue.startsWith("typeGroup"))return new en(e.dbName,Se.TreeItemCollapsibleState.Collapsed,"database",e.dbName,void 0,void 0,void 0,void 0,e.connectionName);if(e.contextValue.startsWith("netezza:"))return new en(e.objType,Se.TreeItemCollapsibleState.Collapsed,`typeGroup:${e.objType}`,e.dbName,e.objType,void 0,void 0,void 0,e.connectionName)}}async getChildren(e){if(e){if(e.contextValue==="serverInstance"){if(!e.connectionName)return[];let n=this.metadataCache.getDatabases(e.connectionName);if(n)return n.map(r=>new en(r.label||r.DATABASE,Se.TreeItemCollapsibleState.Collapsed,"database",r.label||r.DATABASE,void 0,void 0,void 0,void 0,e.connectionName));try{let r=await ce(this.context,"SELECT DATABASE FROM system.._v_database ORDER BY DATABASE",!0,this.connectionManager,e.connectionName);if(!r)return[];let i=Te(r),s=i.map(o=>({DATABASE:o.DATABASE,label:o.DATABASE,kind:9,detail:"Database"}));return this.metadataCache.setDatabases(e.connectionName,s),i.map(o=>new en(o.DATABASE,Se.TreeItemCollapsibleState.Collapsed,"database",o.DATABASE,void 0,void 0,void 0,void 0,e.connectionName))}catch(r){let i=r instanceof Error?r.message:String(r);return Se.window.showErrorMessage(`Failed to load databases for ${e.connectionName}: ${i}`),[]}}else if(e.contextValue==="database"){if(e.connectionName&&e.dbName&&this.triggerDatabasePrefetch(e.connectionName,e.dbName),e.connectionName&&e.dbName){let n=this.metadataCache.getTypeGroups(e.connectionName,e.dbName);if(n&&n.length>0)return n.map(r=>new en(r,Se.TreeItemCollapsibleState.Collapsed,`typeGroup:${r}`,e.dbName,r,void 0,void 0,void 0,e.connectionName))}try{let n=`SELECT DISTINCT OBJTYPE FROM ${e.dbName}.._V_OBJECT_DATA WHERE DBNAME = '${e.dbName}' ORDER BY OBJTYPE`,r=await ce(this.context,n,!0,this.connectionManager,e.connectionName),i=r?Te(r):[];if(e.connectionName&&e.dbName){let s=i.map(o=>o.OBJTYPE);this.metadataCache.setTypeGroups(e.connectionName,e.dbName,s)}return i.map(s=>new en(s.OBJTYPE,Se.TreeItemCollapsibleState.Collapsed,`typeGroup:${s.OBJTYPE}`,e.dbName,s.OBJTYPE,void 0,void 0,void 0,e.connectionName))}catch(n){let r=n instanceof Error?n.message:String(n);return Se.window.showErrorMessage("Failed to load object types: "+r),[]}}else if(e.contextValue.startsWith("typeGroup")){if(e.connectionName&&e.dbName&&(e.objType==="TABLE"||e.objType==="VIEW"||e.objType==="EXTERNAL TABLE")){let n=this.metadataCache.getObjectsWithSchema(e.connectionName,e.dbName);if(n&&n.length>0){let r=e.objType,i=n.filter(s=>{let o=s.item;return o.objType?o.objType===r:r==="VIEW"?o.kind===18:r==="TABLE"?o.kind!==18&&o.detail!=="EXTERNAL TABLE":r==="EXTERNAL TABLE"?o.detail==="EXTERNAL TABLE"||o.detail?.startsWith("EXTERNAL TABLE"):!1});if(i.length>0)return i.map(s=>{let o=s.item;return new en(typeof o.label=="string"?o.label:o.label?.label||"unknown",Se.TreeItemCollapsibleState.Collapsed,`netezza:${e.objType}`,e.dbName,e.objType,s.schema,s.objId,s.description,e.connectionName,void 0,void 0,void 0,void 0,s.owner)})}}try{let n;e.objType==="PROCEDURE"?n=`SELECT PROCEDURESIGNATURE AS OBJNAME, SCHEMA, OBJID::INT AS OBJID, COALESCE(DESCRIPTION, '') AS DESCRIPTION, OWNER FROM ${e.dbName}.._V_PROCEDURE WHERE DATABASE = '${e.dbName}' ORDER BY PROCEDURESIGNATURE`:n=`SELECT OBJNAME, SCHEMA, OBJID, COALESCE(DESCRIPTION, '') AS DESCRIPTION, OWNER FROM ${e.dbName}.._V_OBJECT_DATA WHERE DBNAME = '${e.dbName}' AND OBJTYPE = '${e.objType}' ORDER BY OBJNAME`;let r=await ce(this.context,n,!0,this.connectionManager,e.connectionName),i=r?Te(r):[];if(e.connectionName&&e.dbName&&(e.objType==="TABLE"||e.objType==="VIEW")){let s=new Map;for(let o of i){let a=o.SCHEMA?`${e.dbName}.${o.SCHEMA}`:`${e.dbName}..`;s.has(a)||s.set(a,{tables:[],idMap:new Map});let l=s.get(a);l.tables.push({label:o.OBJNAME,kind:e.objType==="VIEW"?18:7,detail:o.SCHEMA?e.objType:`${e.objType} (${o.SCHEMA})`,sortText:o.OBJNAME});let c=o.SCHEMA?`${e.dbName}.${o.SCHEMA}.${o.OBJNAME}`:`${e.dbName}..${o.OBJNAME}`;o.OBJID!==void 0&&l.idMap.set(c,o.OBJID)}}return i.map(s=>{let a=["TABLE","VIEW","EXTERNAL TABLE","SYSTEM VIEW","SYSTEM TABLE"].includes(e.objType||"");return new en(s.OBJNAME,a?Se.TreeItemCollapsibleState.Collapsed:Se.TreeItemCollapsibleState.None,`netezza:${e.objType}`,e.dbName,e.objType,s.SCHEMA,s.OBJID,s.DESCRIPTION,e.connectionName,void 0,void 0,void 0,void 0,s.OWNER)})}catch(n){let r=n instanceof Error?n.message:String(n);return Se.window.showErrorMessage("Failed to load objects: "+r),[]}}else if(e.contextValue.startsWith("netezza:")){let n=e.label,r=e.schema,i=e.dbName;if(e.connectionName&&i){let s=`${i}.${r||""}.${n}`,o=this.metadataCache.getColumns(e.connectionName,s);if(o&&o.length>0&&o[0].isPk!==void 0)return o.map(a=>new en(a.detail?`${a.label||a.ATTNAME} (${a.detail})`:a.label||a.ATTNAME,Se.TreeItemCollapsibleState.None,"column",e.dbName,void 0,void 0,void 0,a.documentation||"",e.connectionName,n,void 0,a.isPk,a.isFk))}if(!e.connectionName||!i)return[];try{let s=Vc(i,r||"",n),o=await ce(this.context,s,!0,this.connectionManager,e.connectionName),a=qc(o),l=`${i}.${r||""}.${n}`,c=a.map(u=>({ATTNAME:u.attname,FORMAT_TYPE:u.formatType,label:u.attname,kind:5,detail:u.formatType,documentation:u.description,isPk:u.isPk,isFk:u.isFk}));return this.metadataCache.setColumns(e.connectionName,l,c),a.map(u=>new en(`${u.attname} (${u.formatType})`,Se.TreeItemCollapsibleState.None,"column",e.dbName,void 0,void 0,void 0,u.description,e.connectionName,n,void 0,u.isPk,u.isFk))}catch(s){let o=s instanceof Error?s.message:String(s);return Se.window.showErrorMessage("Failed to load columns: "+o),[]}}}else{let n=await this.connectionManager.getConnections(),r=Se.Uri.file(this.context.asAbsolutePath("netezza_icon64.png"));return n.map(i=>new en(i.name,Se.TreeItemCollapsibleState.Collapsed,"serverInstance",void 0,void 0,void 0,void 0,void 0,i.name,void 0,r))}return[]}},en=class extends Se.TreeItem{constructor(n,r,i,s,o,a,l,c,u,d,E,f,p,h){super(n,r);this.label=n;this.collapsibleState=r;this.contextValue=i;this.dbName=s;this.objType=o;this.schema=a;this.objId=l;this.objectDescription=c;this.connectionName=u;this.parentName=d;this.isPk=f;this.isFk=p;this.owner=h;let T=this.label;u&&(T+=`
[Server: ${u}]`),c&&c.trim()&&(T+=`

${c.trim()}`),a&&i.startsWith("netezza:")&&(T+=`

Schema: ${a}`),h&&i.startsWith("netezza:")&&(T+=`
Owner: ${h}`),this.isPk&&(T+=`
\u{1F511} Primary Key`),this.isFk&&(T+=`
\u{1F517} Foreign Key`),this.tooltip=T,this.description=a?`(${a})`:"";let S=[u||"global",i,s||"",a||"",o||"",d||"",n,l?l.toString():""];this.id=S.join("|"),E?this.iconPath=E:i==="serverInstance"?this.iconPath=new Se.ThemeIcon("server"):i==="database"?this.iconPath=new Se.ThemeIcon("database"):i.startsWith("typeGroup")?this.iconPath=new Se.ThemeIcon("folder"):i.startsWith("netezza:")?this.iconPath=this.getIconForType(o):i==="column"&&(this.isPk?this.iconPath=new Se.ThemeIcon("key",new Se.ThemeColor("charts.yellow")):this.isFk?this.iconPath=new Se.ThemeIcon("link",new Se.ThemeColor("charts.blue")):this.iconPath=new Se.ThemeIcon("symbol-field"))}getIconForType(n){switch(n){case"TABLE":return new Se.ThemeIcon("table");case"VIEW":return new Se.ThemeIcon("eye");case"PROCEDURE":return new Se.ThemeIcon("gear");case"FUNCTION":return new Se.ThemeIcon("symbol-function");case"AGGREGATE":return new Se.ThemeIcon("symbol-operator");case"EXTERNAL TABLE":return new Se.ThemeIcon("server");default:return new Se.ThemeIcon("file")}}};var Oe=z(require("vscode"));var jn=z(require("vscode")),rE=class t{constructor(e,n,r){this._disposables=[];this._panel=e,this._extensionUri=n,this._update(r),this._panel.onDidDispose(()=>this.dispose(),null,this._disposables),this._panel.webview.onDidReceiveMessage(i=>{switch(i.command){case"alert":jn.window.showErrorMessage(i.text);return;case"info":jn.window.showInformationMessage(i.text);return}},null,this._disposables)}static{this.viewType="netezza.analysisPanel"}static createOrShow(e,n){let r=jn.window.activeTextEditor?jn.ViewColumn.Beside:void 0,i=jn.window.createWebviewPanel(t.viewType,"Data Analysis",r||jn.ViewColumn.One,{enableScripts:!0,localResourceRoots:[jn.Uri.joinPath(e,"media")],retainContextWhenHidden:!0});new t(i,e,n)}dispose(){for(this._panel.dispose();this._disposables.length;){let e=this._disposables.pop();e&&e.dispose()}}_update(e){let n=this._panel.webview;this._panel.title="Data Analysis",this._panel.webview.html=this._getHtmlForWebview(n,e)}_getHtmlForWebview(e,n){let r=jn.Uri.joinPath(this._extensionUri,"media","analysisPanel.js"),i=e.asWebviewUri(r),s=jn.Uri.joinPath(this._extensionUri,"media","analysisPanel.css"),o=e.asWebviewUri(s),a=e.asWebviewUri(jn.Uri.joinPath(this._extensionUri,"media","tanstack-table-core.js")),l=e.asWebviewUri(jn.Uri.joinPath(this._extensionUri,"media","tanstack-virtual-core.js")),c=G8();return`<!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <meta http-equiv="Content-Security-Policy" content="default-src 'none'; style-src ${e.cspSource} 'unsafe-inline'; script-src 'nonce-${c}'; font-src ${e.cspSource};">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <link href="${o}" rel="stylesheet">

            <title>Data Analysis</title>
        </head>
        <body>
            <div id="app">
                <div class="sidebar">
                    <div class="section">
                        <h3>Fields</h3>
                        <div id="fieldList" class="field-list"></div>
                    </div>
                </div>
                <div class="main-content">
                    <div class="filter-section" style="margin-bottom: 15px; display: flex; gap: 10px; align-items: center;">
                        <label for="dataFilter" style="font-weight: bold;">Filter:</label>
                        <input type="text" id="dataFilter" placeholder="Type to filter data..." style="flex: 1; padding: 6px 10px; background: var(--vscode-input-background); color: var(--vscode-input-foreground); border: 1px solid var(--vscode-input-border); border-radius: 4px;">
                        <button id="applyFilter" style="padding: 6px 12px; cursor: pointer;">Apply</button>
                        <button id="clearFilter" style="padding: 6px 12px; cursor: pointer;">Clear</button>
                    </div>
                    <div class="config-zones">
                        <div class="zone-container">
                            <h4>Rows</h4>
                            <div id="rowsZone" class="drop-zone" data-zone="rows"></div>
                        </div>
                        <div class="zone-container">
                            <h4>Columns</h4>
                            <div id="colsZone" class="drop-zone" data-zone="cols"></div>
                        </div>
                        <div class="zone-container">
                            <h4>Values</h4>
                            <div id="valuesZone" class="drop-zone" data-zone="values"></div>
                        </div>
                    </div>
                    <div class="pivot-grid-container">
                        <div id="pivotGrid"></div>
                    </div>
                    <div class="chart-container" style="margin-top: 20px;">
                        <div class="chart-header" style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                            <h4 style="margin: 0;">Chart</h4>
                            <select id="chartType" style="padding: 4px;">
                                <option value="bar">Bar Chart</option>
                                <option value="line">Line Chart</option>
                            </select>
                        </div>
                        <canvas id="pivotChart" width="600" height="300" style="background: var(--vscode-editor-background); border: 1px solid var(--vscode-panel-border); border-radius: 4px;"></canvas>
                    </div>
                </div>
            </div>
            
            <script nonce="${c}" src="${a}"></script>
            <script nonce="${c}" src="${l}"></script>
            <script nonce="${c}">
                // Pass initial data to the script
                window.initialData = ${JSON.stringify(n)};
                window.TableCore = TableCore;
                window.VirtualCore = VirtualCore;
            </script>
            <script nonce="${c}" src="${i}"></script>
        </body>
        </html>`}};function G8(){let t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let n=0;n<32;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}var iE=class{constructor(e){this._cspSource=e}generateHtml(e,n){let r=this._getIcons();return`<!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <meta http-equiv="Content-Security-Policy" content="default-src 'none'; script-src ${this._cspSource} 'unsafe-inline'; worker-src ${this._cspSource} blob:; connect-src ${this._cspSource}; style-src ${this._cspSource} 'unsafe-inline';">
            <title>Query Results</title>
            <script src="${e.scriptUri}"></script>
            <script src="${e.virtualUri}"></script>
            <link rel="stylesheet" href="${e.styleUri}">
        </head>
        <body>
            <div id="sourceTabs" class="source-tabs"></div>
            <div id="resultSetTabs" class="result-set-tabs" style="display: none;"></div>
            
            <div id="loadingOverlay" class="loading-overlay">
                <div class="spinner"></div>
                <div class="executing-text">Executing SQL...</div>
                <button id="cancelQueryBtn" class="secondary" title="Cancel the current query">Cancel</button>
            </div>
            <div class="controls">
                <input type="text" id="globalFilter" placeholder="Filter..." onkeyup="onFilterChanged()" style="background: var(--vscode-input-background); color: var(--vscode-input-foreground); border: 1px solid var(--vscode-input-border); padding: 4px;">
                <button onclick="toggleRowView()" title="Toggle Row View">${r.eye} Row View</button>
                
                <!-- Split Button for Export -->
                <div class="split-btn-container">
                    <button id="exportMainBtn" class="split-btn-main" onclick="executeSplitExport()" title="Export results (Excel)">
                        ${r.excel} Excel
                    </button>
                    <button id="exportArrowBtn" class="split-btn-arrow" onclick="toggleExportMenu()" title="Select export format">
                        <svg width="10" height="10" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor">
                            <path d="M8 11L3 6h10l-5 5z"/>
                        </svg>
                    </button>
                    <div id="exportMenu" class="split-btn-menu" style="display:none;">
                        <div class="split-btn-menu-item" onclick="selectExportFormat('excel')">
                            ${r.excel} Excel (XLSB)
                        </div>
                        <div class="split-btn-menu-item" onclick="selectExportFormat('xlsx')">
                            ${r.excel} Excel (XLSX)
                        </div>
                        <div class="split-btn-menu-item" onclick="selectExportFormat('csv')">
                            ${r.csv} CSV
                        </div>
                        <div class="split-btn-menu-item" onclick="selectExportFormat('json')">
                            ${r.json} JSON
                        </div>
                        <div class="split-btn-menu-item" onclick="selectExportFormat('xml')">
                            ${r.xml} XML
                        </div>
                        <div class="split-btn-menu-item" onclick="selectExportFormat('sql')">
                            ${r.sql} SQL INSERT
                        </div>
                        <div class="split-btn-menu-item" onclick="selectExportFormat('markdown')">
                            ${r.markdown} Markdown Table
                        </div>
                    </div>
                </div>

                <div style="width: 1px; height: 16px; background: var(--vscode-panel-border); margin: 0 2px;"></div>
                <button onclick="copyAsExcel()" title="Copy results as Excel to clipboard">${r.excel} Excel Copy</button>
                <div style="width: 1px; height: 16px; background: var(--vscode-panel-border); margin: 0 2px;"></div>
                <button onclick="selectAll()" title="Select all rows">${r.checkAll} Select All</button>
                <button onclick="copySelection(false)" title="Copy selected cells to clipboard">${r.copy} Copy</button>
                <button onclick="copySelection(true)" title="Copy selected cells with headers">${r.copy} Copy w/ Headers</button>
                <button onclick="clearAllFilters()" title="Clear all column filters">${r.clear} Clear Filters</button>
                <button id="clearLogsBtn" onclick="clearLogs()" title="Clear execution logs" style="display: none;">${r.trash} Clear Logs</button>
                <span id="rowCountInfo" style="margin-left: auto; font-size: 12px; opacity: 0.8;"></span>
            </div>

            <div id="groupingPanel" class="grouping-panel" ondragover="onDragOverGroup(event)" ondragleave="onDragLeaveGroup(event)" ondrop="onDropGroup(event)">
                <span style="opacity: 0.5;">Drag headers here to group</span>
            </div>

            <div id="mainSplitView" class="main-split-view">
                <div id="gridContainer"></div>
                <div id="rowViewPanel" class="row-view-panel">
                    <div class="row-view-header">
                        <span>Row Details & Comparison</span>
                        <span class="row-view-close" onclick="toggleRowView()">\xD7</span>
                    </div>
                    <div id="rowViewContent" class="row-view-content">
                        <div class="row-view-placeholder">Select 1 or 2 rows to view details or compare</div>
                    </div>
                </div>
            </div>
            
            <script>
                const vscode = acquireVsCodeApi();
                window.sources = ${n.sourcesJson};
                window.pinnedSources = new Set(${n.pinnedSourcesJson});
                window.pinnedResults = ${n.pinnedResultsJson};
                window.activeSource = ${n.activeSourceJson};
                window.resultSets = ${n.resultSetsJson};
                window.executingSources = new Set(${n.executingSourcesJson});
                
                let grids = [];
                let activeGridIndex = ${n.activeResultSetIndex};
                const workerUri = "${e.workerUri}";
            </script>
            <script src="${e.mainScriptUri}"></script>
            <script>
                // Initialize on load
                init();
            </script>
        </body>
        </html>`}_getIcons(){return{eye:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M8 3c-3 0-6 2.5-6 5s3 5 6 5 6-2.5 6-5-3-5-6-5zm0 9c-2.5 0-4.5-2-4.5-4S5.5 4 8 4s4.5 2 4.5 4-2 4.5-4.5 4.5z"/><circle cx="8" cy="8" r="2"/></svg>',excel:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M6 3h8v10H6V3zm-1 0H3v10h2V3zm-2-1h9a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1z"/><path d="M6 6h8v1H6V6zm0 2h8v1H6V8zm0 2h8v1H6v-1z"/></svg>',copy:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M4 4h7v2H4V4zm0 4h7v2H4V8zm0 4h7v2H4v-2zM2 1h12v14H2V1zm1 1v12h10V2H3z"/></svg>',csv:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M13 2H6L2 6v8a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1zm-1 11H4V7h3V4h5v9z"/></svg>',json:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M5 2c0-1.1.9-2 2-2h2a2 2 0 0 1 2 2v2h-2V2H7v2H5V2zm0 12c0 1.1.9 2 2 2h2a2 2 0 0 0 2-2v-2h-2v2H7v-2H5v2zM2 7v2h2V7H2zm10 0v2h2V7h-2z"/></svg>',xml:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M11.5 1L7 15h2l4.5-14h-2zM4.5 1L0 15h2l4.5-14h-2z"/></svg>',sql:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M8 0C3.6 0 0 1.8 0 4v8c0 2.2 3.6 4 8 4s8-1.8 8-4V4c0-2.2-3.6-4-8-4zm0 2c3.3 0 6 1.3 6 3s-2.7 3-6 3-6-1.3-6-3 2.7-3 6-3zm0 12c-3.3 0-6-1.3-6-3V9c1.6 1.7 4.3 2 6 2s4.4-.3 6-2v2c0 1.7-2.7 3-6 3z"/></svg>',markdown:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M14.5 2H1.5C.7 2 0 2.7 0 3.5v9C0 13.3.7 14 1.5 14h13c.8 0 1.5-.7 1.5-1.5v-9c0-.8-.7-1.5-1.5-1.5zM3 11V5l2 2 2-2v6H6V7l-1 1-1-1v4H3zm10 0h-2V9h-2v2H7V5h2v2h2V5h2v6z"/></svg>',export:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M6 3h8v10H6V3zm-1 0H3v10h2V3zm-2-1h9a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1z"/><path d="M6 6h8v1H6V6zm0 2h8v1H6V8zm0 2h8v1H6v-1z"/><path d="M10 12L8 14L6 12" stroke="currentColor" stroke-width="1.5" fill="none"/></svg>',checkAll:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M13.485 1.929l1.414 1.414-9.9 9.9-4.243-4.242 1.415-1.415 2.828 2.829z"/></svg>',clear:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M8 7.293l4.146-4.147.708.708L8.707 8l4.147 4.146-.708.708L8 8.707l-4.146 4.147-.708-.708L7.293 8 3.146 3.854l.708-.708L8 7.293z"/></svg>',trash:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M6.5 1h3l.5.5V3h3v1h-1v10h-1v-10h-7v10h-1V4h-1V3h3V1.5l.5-.5zM7 2v1h2V2H7zm-2 2v9h6V4H5zm1 1h1v7H6V5zm2 0h1v7H8V5z"/></svg>'}}};var Xc=class{constructor(e){this._resultsMap=new Map;this._pinnedSources=new Set;this._pinnedResults=new Map;this._autoPinnedResults=new Set;this._activeResultSetIndexMap=new Map;this._resultIdCounter=0;this._executingSources=new Set;this._cancelledSources=new Set;this._extensionUri=e}static{this.viewType="netezza.results"}getActiveSource(){return this._activeSourceUri}resolveWebviewView(e,n,r){this._view=e,e.webview.options={enableScripts:!0,localResourceRoots:[Oe.Uri.joinPath(this._extensionUri,"media")]},e.webview.html=this._getHtmlForWebview(),e.webview.onDidReceiveMessage(i=>{switch(i.command){case"analyze":rE.createOrShow(this._extensionUri,i.data);return;case"describeWithCopilot":Oe.commands.executeCommand("netezza.describeDataWithCopilot",i.data,i.sql);return;case"fixSqlError":Oe.commands.executeCommand("netezza.fixSqlError",i.errorMessage,i.sql);return;case"exportCsv":this.exportCsv(i.data);return;case"openInExcel":this.openInExcel(i.data,i.sql);return;case"copyAsExcel":this.copyAsExcel(i.data,i.sql);return;case"openInExcelXlsx":this.openInExcelXlsx(i.data,i.sql);return;case"exportJson":this.exportJson(i.data);return;case"exportXml":this.exportXml(i.data);return;case"exportSqlInsert":this.exportSqlInsert(i.data);return;case"exportMarkdown":this.exportMarkdown(i.data);return;case"switchSource":this._activeSourceUri=i.sourceUri,this._resultsMap.has(i.sourceUri)||this._resultsMap.set(i.sourceUri,[]),this._updateWebview();return;case"togglePin":this._pinnedSources.has(i.sourceUri)?this._pinnedSources.delete(i.sourceUri):this._pinnedSources.add(i.sourceUri),this._updateWebview();return;case"toggleResultPin":this._toggleResultPin(i.sourceUri,i.resultSetIndex);return;case"switchToPinnedResult":this._switchToPinnedResult(i.resultId);return;case"unpinResult":this._pinnedResults.delete(i.resultId),this._updateWebview();return;case"closeSource":this.closeSource(i.sourceUri);return;case"closeResult":this.closeResult(i.sourceUri,i.resultSetIndex);return;case"closeAllResults":this.closeAllResults(i.sourceUri);return;case"cancelQuery":i.sourceUri&&Oe.commands.executeCommand("netezza.cancelQuery",i.sourceUri,i.currentRowCounts);return;case"copyToClipboard":Oe.env.clipboard.writeText(i.text),Oe.window.showInformationMessage("Copied to clipboard");return;case"info":Oe.window.showInformationMessage(i.text);return;case"error":Oe.window.showErrorMessage(i.text);return;case"setContext":Oe.commands.executeCommand("setContext",i.key,i.value);return;case"clearLogs":this.clearLogs(i.sourceUri);return;case"switchResultSet":this._activeResultSetIndexMap.set(i.sourceUri,i.resultSetIndex);return}})}triggerCopySelection(){this._postMessageToWebview({command:"copySelection"})}setActiveSource(e){this._activeSourceUri!==e&&(this._activeSourceUri=e,this._resultsMap.has(e)||this._resultsMap.set(e,[]),this._updateWebview())}startExecution(e){this._executingSources.add(e),this._cancelledSources.delete(e);let n=this._resultsMap.get(e)||[],r,i=n.findIndex(d=>d.isLog);if(i!==-1){r=n[i];let d=new Date().toLocaleTimeString();r.data.push(["",""]),r.data.push([d,"--- New Execution Started ---"]),r.message="Execution started...",r.executionTimestamp=Date.now()}else{let d=new Date().toLocaleTimeString();r={columns:[{name:"Time",type:"string"},{name:"Message",type:"string"}],data:[[d,"--- New Execution Started ---"]],message:"Execution started...",executionTimestamp:Date.now(),isLog:!0,name:"Logs"}}let s=Array.from(this._pinnedResults.entries()).filter(([d,E])=>E.sourceUri===e&&n[E.resultSetIndex]!==r).sort((d,E)=>d[1].resultSetIndex-E[1].resultSetIndex),o=[];s.forEach(([d,E])=>{if(E.resultSetIndex<n.length){let f=n[E.resultSetIndex];f&&o.push(f)}});let a=[r,...o];this._resultsMap.set(e,a),Array.from(this._pinnedResults.entries()).filter(([d,E])=>E.sourceUri===e).map(([d,E])=>d).forEach(d=>this._pinnedResults.delete(d));let c=`result_${++this._resultIdCounter} `,u=e.split(/[\\/]/).pop()||e;this._pinnedResults.set(c,{sourceUri:e,resultSetIndex:0,timestamp:Date.now(),label:`${u} - Logs`}),s.forEach(([d,E],f)=>{let p=`result_${++this._resultIdCounter} `;this._pinnedResults.set(p,{sourceUri:e,resultSetIndex:f+1,timestamp:Date.now(),label:`${u} - Result ${f+1} `})}),this._pinnedSources.add(e),this._activeSourceUri=e,this._activeResultSetIndexMap.set(e,0),this._updateWebview(),this._view?.show?.(!0)}log(e,n){let r=this._resultsMap.get(e);if(!r||r.length===0)return;let i=r.find(s=>s.isLog);if(i){let s=new Date().toLocaleTimeString();i.data.push([s,n]),this._updateWebview()}}cancelExecution(e,n){this._executingSources.has(e)&&this._executingSources.delete(e),this._cancelledSources.add(e),(this._resultsMap.get(e)||[]).forEach((i,s)=>{i.isCancelled=!0,n&&n[s]!==void 0&&(i.data=i.data.slice(0,n[s]))}),this._updateWebview(),this._postMessageToWebview({command:"cancelExecution",sourceUri:e})}finalizeExecution(e){this._executingSources.delete(e);let n=this._resultsMap.get(e)||[];for(let r of this._autoPinnedResults){let i=this._pinnedResults.get(r);if(i&&i.sourceUri===e){let s=n[i.resultSetIndex];if(s&&s.isError)continue;this._pinnedResults.delete(r)}}this._autoPinnedResults.clear(),this._updateWebview()}updateResults(e,n,r=!1){this._resultsMap.has(n)||this._pinnedSources.add(n);let i=[];Array.isArray(e)?i=e:i=[e];let s=Date.now();i.forEach(f=>{f.executionTimestamp=s});let o=this._resultsMap.get(n)||[],a=o.find(f=>f.isLog),l=Array.from(this._pinnedResults.entries()).filter(f=>f[1].sourceUri===n).sort((f,p)=>f[1].resultSetIndex-p[1].resultSetIndex),c=[],u=new Map;a&&c.push(a),l.forEach(([f,p])=>{let h=o[p.resultSetIndex];h&&(h===a||c.includes(h)||c.push(h),u.set(f,h))});let d=c.length;if(console.log("[updateResults] Before append:",{existingResults:o.map((f,p)=>`[${p}]isLog = ${f.isLog}, isError = ${f.isError} `),finalResultSetsSoFar:c.map((f,p)=>`[${p}]isLog = ${f.isLog}, isError = ${f.isError} `),newResults:i.map(f=>`isLog = ${f.isLog}, isError = ${f.isError} `)}),c.push(...i),this._resultsMap.set(n,c),u.forEach((f,p)=>{let h=c.indexOf(f);if(h!==-1){let T=this._pinnedResults.get(p);T&&(T.resultSetIndex=h)}}),a&&!Array.from(u.values()).includes(a)){let p=`result_${++this._resultIdCounter} `,h=n.split(/[\\\\/]/).pop()||n;this._pinnedResults.set(p,{sourceUri:n,resultSetIndex:0,timestamp:Date.now(),label:`${h} - Logs`})}let E=n.split(/[\\\\/]/).pop()||n;i.forEach((f,p)=>{let h=`result_${++this._resultIdCounter} `,T=d+p;this._pinnedResults.set(h,{sourceUri:n,resultSetIndex:T,timestamp:Date.now(),label:f.isLog?`${E} - Logs`:`${E} - Result ${T} `}),this._autoPinnedResults.add(h)}),r||Array.from(this._resultsMap.keys()).filter(p=>p!==n&&!this._pinnedSources.has(p)).forEach(p=>{this._resultsMap.delete(p),Array.from(this._pinnedResults.entries()).filter(T=>T[1].sourceUri===p).map(([T,S])=>T).forEach(T=>this._pinnedResults.delete(T))}),this._activeSourceUri=n,this._activeResultSetIndexMap.set(n,d),this._view?(this._updateWebview(),this._view.show?.(!0)):Oe.window.showInformationMessage('Query completed. Please open "Query Results" panel to view data.')}appendStreamingChunk(e,n,r,i){if(this._cancelledSources.has(e))return;let s=this._resultsMap.get(e)||[];if(r.isFirstChunk&&r.columns.length>0){let o={columns:r.columns,data:r.rows,executionTimestamp:Date.now(),sql:i,limitReached:r.limitReached};s.findIndex(d=>d.isLog)>=0,s.push(o),this._resultsMap.set(e,s);let l=e.split(/[\\/]/).pop()||e,c=`result_${++this._resultIdCounter} `,u=s.length-1;this._pinnedResults.set(c,{sourceUri:e,resultSetIndex:u,timestamp:Date.now(),label:`${l} - Result ${u} `}),this._autoPinnedResults.add(c),this._activeSourceUri=e,this._activeResultSetIndexMap.set(e,u),this._updateWebview(),this._view?.show?.(!0)}else if(r.rows.length>0){let o=s[s.length-1];o&&!o.isLog&&(o.data.push(...r.rows),o.limitReached=r.limitReached,this._postMessageToWebview({command:"appendRows",resultSetIndex:s.length-1,rows:r.rows,totalRows:r.totalRowsSoFar,isLastChunk:r.isLastChunk,limitReached:r.limitReached}))}r.isLastChunk&&this._postMessageToWebview({command:"streamingComplete",resultSetIndex:s.length-1,totalRows:r.totalRowsSoFar,limitReached:r.limitReached})}_postMessageToWebview(e){this._view&&this._view.webview.postMessage(e)}_updateWebview(){this._view&&(this._view.webview.html=this._getHtmlForWebview())}_toggleResultPin(e,n){let r=Array.from(this._pinnedResults.entries()).find(i=>{let s=i[1];return s.sourceUri===e&&s.resultSetIndex===n});if(r)this._pinnedResults.delete(r[0]);else{let i=`result_${++this._resultIdCounter} `,s=Date.now(),a=`${e.split(/[\\/]/).pop()||e} - Result ${n+1} `;this._pinnedResults.set(i,{sourceUri:e,resultSetIndex:n,timestamp:s,label:a})}this._updateWebview()}_switchToPinnedResult(e){let n=this._pinnedResults.get(e);n&&(this._activeSourceUri=n.sourceUri,this._updateWebview(),this._view&&this._view.webview.postMessage({command:"switchToResultSet",resultSetIndex:n.resultSetIndex}))}async exportCsv(e){let n=await Oe.window.showSaveDialog({filters:{"CSV Files":["csv"]},saveLabel:"Export"});n&&(await Oe.workspace.fs.writeFile(n,Buffer.from(e)),Oe.window.showInformationMessage(`Results exported to ${n.fsPath} `))}async openInExcel(e,n){Oe.commands.executeCommand("netezza.exportCurrentResultToXlsbAndOpen",e,n)}async copyAsExcel(e,n){Oe.commands.executeCommand("netezza.copyCurrentResultToXlsbClipboard",e,n)}async openInExcelXlsx(e,n){try{await Oe.commands.executeCommand("netezza.exportCurrentResultToXlsxAndOpen",e,n)}catch(r){let i=r instanceof Error?r.message:String(r);Oe.window.showErrorMessage(`Failed to export to XLSX: ${i}. Please try reloading the window.`)}}async exportJson(e){let n=await Oe.window.showSaveDialog({filters:{"JSON Files":["json"]},saveLabel:"Export JSON"});n&&(await Oe.workspace.fs.writeFile(n,Buffer.from(e)),Oe.window.showInformationMessage(`Results exported to ${n.fsPath} `))}async exportXml(e){let n=await Oe.window.showSaveDialog({filters:{"XML Files":["xml"]},saveLabel:"Export XML"});n&&(await Oe.workspace.fs.writeFile(n,Buffer.from(e)),Oe.window.showInformationMessage(`Results exported to ${n.fsPath} `))}async exportSqlInsert(e){let n=await Oe.window.showSaveDialog({filters:{"SQL Files":["sql"]},saveLabel:"Export SQL"});n&&(await Oe.workspace.fs.writeFile(n,Buffer.from(e)),Oe.window.showInformationMessage(`Results exported to ${n.fsPath} `))}async exportMarkdown(e){let n=await Oe.window.showSaveDialog({filters:{"Markdown Files":["md"]},saveLabel:"Export Markdown"});n&&(await Oe.workspace.fs.writeFile(n,Buffer.from(e)),Oe.window.showInformationMessage(`Results exported to ${n.fsPath} `))}closeSource(e){if(this._resultsMap.has(e)){if(this._resultsMap.delete(e),this._pinnedSources.delete(e),this._executingSources.delete(e),Array.from(this._pinnedResults.entries()).filter(([r,i])=>i.sourceUri===e).map(([r,i])=>r).forEach(r=>this._pinnedResults.delete(r)),this._activeSourceUri===e){let r=Array.from(this._resultsMap.keys());this._activeSourceUri=r.length>0?r[0]:void 0}this._updateWebview()}}closeResult(e,n){let r=this._resultsMap.get(e);if(!r||n<0||n>=r.length)return;r.splice(n,1),Array.from(this._pinnedResults.entries()).filter(([s,o])=>o.sourceUri===e&&o.resultSetIndex===n).map(([s,o])=>s).forEach(s=>this._pinnedResults.delete(s));for(let[,s]of this._pinnedResults.entries())s.sourceUri===e&&s.resultSetIndex>n&&(s.resultSetIndex-=1);if(this._activeResultSetIndexMap.get(e)===n){let s=n<r.length?n:Math.max(0,r.length-1);this._activeResultSetIndexMap.set(e,s)}else this._activeResultSetIndexMap.get(e)>n&&this._activeResultSetIndexMap.set(e,this._activeResultSetIndexMap.get(e)-1);this._updateWebview()}closeAllResults(e){let n=this._resultsMap.get(e);if(!n||n.length===0)return;let r=n.findIndex(s=>s.isLog);if(r===-1)n.splice(0);else{let s=n[r];n.splice(0),n.push(s)}Array.from(this._pinnedResults.entries()).filter(([s,o])=>{if(o.sourceUri!==e)return!1;let a=n[o.resultSetIndex];return!a||!a.isLog}).map(([s,o])=>s).forEach(s=>this._pinnedResults.delete(s)),this._activeResultSetIndexMap.set(e,0),this._updateWebview()}clearLogs(e){let n=this._resultsMap.get(e);if(n){let r=n.find(i=>i.isLog);if(r){r.data=[];let i=new Date().toLocaleTimeString();r.data.push([i,"--- Logs Cleared ---"]),this._updateWebview()}}}_getHtmlForWebview(){if(!this._view)return"";let e=this._getScriptUris(),n=this._prepareViewData();return new iE(this._view.webview.cspSource).generateHtml(e,n)}_getScriptUris(){return{scriptUri:this._view.webview.asWebviewUri(Oe.Uri.joinPath(this._extensionUri,"media","tanstack-table-core.js")),virtualUri:this._view.webview.asWebviewUri(Oe.Uri.joinPath(this._extensionUri,"media","tanstack-virtual-core.js")),mainScriptUri:this._view.webview.asWebviewUri(Oe.Uri.joinPath(this._extensionUri,"media","resultPanel.js")),workerUri:this._view.webview.asWebviewUri(Oe.Uri.joinPath(this._extensionUri,"media","searchWorker.js")),styleUri:this._view.webview.asWebviewUri(Oe.Uri.joinPath(this._extensionUri,"media","resultPanel.css"))}}_prepareViewData(){let e=Array.from(this._resultsMap.keys()),n=Array.from(this._pinnedSources),r=Array.from(this._pinnedResults.entries()).map(([l,c])=>({id:l,...c})),i=this._activeSourceUri&&this._resultsMap.has(this._activeSourceUri)?this._activeSourceUri:e.length>0?e[0]:null,s=i?this._resultsMap.get(i)||[]:[];if(i&&s.length===0){let l=new Date().toLocaleTimeString();s=[{columns:[{name:"Time",type:"string"},{name:"Message",type:"string"}],data:[[l,"No results yet"]],message:"No results yet",executionTimestamp:Date.now(),isLog:!0,name:"Logs"}],this._resultsMap.set(i,s)}let o=i&&this._activeResultSetIndexMap.has(i)?this._activeResultSetIndexMap.get(i):(s&&s.length>0,0),a=(l,c)=>typeof c=="bigint"?c>=Number.MIN_SAFE_INTEGER&&c<=Number.MAX_SAFE_INTEGER?Number(c):c.toString():c;return{sourcesJson:JSON.stringify(e),pinnedSourcesJson:JSON.stringify(n),pinnedResultsJson:JSON.stringify(r),activeSourceJson:JSON.stringify(i),resultSetsJson:JSON.stringify(s,a),activeResultSetIndex:o,executingSourcesJson:JSON.stringify(Array.from(this._executingSources))}}};var Ce=z(require("vscode"));En();var sE=class{constructor(e,n,r){this.context=e;this.metadataCache=n;this.connectionManager=r}async provideCompletionItems(e,n,r,i){let s=e.getText(),o=this.stripComments(s),a=this.parseLocalDefinitions(o),l=this.parseVariables(o),c=e.lineAt(n).text.substr(0,n.character),u=c.toUpperCase(),d=n.line>0?e.lineAt(n.line-1).text:"",E=this.connectionManager.getConnectionForExecution(e.uri.toString());if(E||(E=this.connectionManager.getActiveConnectionName()||void 0),E&&!this.metadataCache.hasConnectionPrefetchTriggered(E)&&this.metadataCache.triggerConnectionPrefetch(E,R=>ce(this.context,R,!0,this.connectionManager,E)),/(FROM|JOIN)\s+$/.test(u)){let R=await this.getDatabases(E);return[...a.map(A=>{let N=new Ce.CompletionItem(A.name,Ce.CompletionItemKind.Class);return N.detail=A.type,N}),...R]}if(/(?:FROM|JOIN)\s*$/i.test(d)&&/^\s*[a-zA-Z0-9_]*$/.test(c)){let R=await this.getDatabases(E);return[...a.map(A=>{let N=new Ce.CompletionItem(A.name,Ce.CompletionItemKind.Class);return N.detail=A.type,N}),...R]}let f=c.match(/(?:FROM|JOIN)\s+([a-zA-Z0-9_]+)\.\s*$/i);if(f){let R=f[1],m=await this.getSchemas(E,R);return new Ce.CompletionList(m,!1)}let p=c.match(/^\s*([a-zA-Z0-9_]+)\.\s*$/i);if(p&&/(?:FROM|JOIN)\s*$/i.test(d)){let R=p[1],m=await this.getSchemas(E,R);return new Ce.CompletionList(m,!1)}let h=c.match(/(?:FROM|JOIN)\s+([a-zA-Z0-9_]+)\.([a-zA-Z0-9_]+)\.$/i);if(h){let R=h[1],m=h[2];return this.getTables(E,R,m)}let T=c.match(/^\s*([a-zA-Z0-9_]+)\.([a-zA-Z0-9_]+)\.\s*$/i);if(T&&/(?:FROM|JOIN)\s*$/i.test(d)){let R=T[1],m=T[2];return this.getTables(E,R,m)}let S=c.match(/(?:FROM|JOIN)\s+([a-zA-Z0-9_]+)\.\.$/i);if(S){let R=S[1];return this.getTables(E,R,void 0)}let I=c.match(/^\s*([a-zA-Z0-9_]+)\.\.\s*$/i);if(I&&/(?:FROM|JOIN)\s*$/i.test(d)){let R=I[1];return this.getTables(E,R,void 0)}if(c.trim().endsWith(".")){let R=c.match(/([a-zA-Z0-9_]+)\.$/);if(R){let m=R[1],A=this.findAlias(o,m);if(A){let g=a.find(L=>L.name.toUpperCase()===A.table.toUpperCase());return g?g.columns.map(L=>{let y=new Ce.CompletionItem(L,Ce.CompletionItemKind.Field);return y.detail="Local Column",y}):this.getColumns(E,A.db,A.schema,A.table)}let N=a.find(g=>g.name.toUpperCase()===m.toUpperCase());if(N)return N.columns.map(g=>{let L=new Ce.CompletionItem(g,Ce.CompletionItemKind.Field);return L.detail="Local Column",L})}}if(c.match(/\$\{?[a-zA-Z0-9_]*$/)){if(i.triggerKind!==Ce.CompletionTriggerKind.Invoke)return[];let R=l.map(m=>{let A=`\${${m}}`,N=new Ce.CompletionItem(A,Ce.CompletionItemKind.Variable),g;return c.endsWith("${")?g=`${m}}`:c.endsWith("$")?g=`{${m}}`:g=`\${${m}}`,N.insertText=g,N.detail="Variable",N.sortText=`0_${m}`,N.filterText=m,N});return new Ce.CompletionList(R,!1)}return this.getKeywords()}stripComments(e){let n=e.replace(/--.*$/gm,"");return n=n.replace(/\/\*[\s\S]*?\*\//g,""),n}parseVariables(e){let n=[],r=/@SET\s+([a-zA-Z0-9_]+)\s*=/gi,i;for(;(i=r.exec(e))!==null;){let s=i[1];n.includes(s)||n.push(s)}return n.sort()}parseLocalDefinitions(e){let n=[],r=/CREATE\s+(?:TEMP\s+)?TABLE\s+([a-zA-Z0-9_]+)\s+AS\s*\(/gi,i;for(;(i=r.exec(e))!==null;){let a=i[1],l=i.index+i[0].length,c=this.extractBalancedParenthesisContent(e,l);if(c){let u=this.extractColumnsFromQuery(c);n.push({name:a,type:"Temp Table",columns:u})}}let s=/\bWITH\s+/gi;for(;(i=s.exec(e))!==null;){let a=i.index+i[0].length;for(;;){let l=/^\s*([a-zA-Z0-9_]+)\s+AS\s*\(/i,c=e.substring(a),u=c.match(l);if(!u)break;let d=u[1],E=c.indexOf("(",u.index+u[1].length),f=a+E,p=this.extractBalancedParenthesisContent(e,f+1);if(p){let h=this.extractColumnsFromQuery(p);n.push({name:d,type:"CTE",columns:h}),a=f+1+p.length+1;let T=/^\s*,/,S=e.substring(a);if(T.test(S)){let I=S.match(T);a+=I[0].length}else break}else break}}let o=/\bJOIN\s+\(/gi;for(;(i=o.exec(e))!==null;){let a=i.index+i[0].length,l=this.extractBalancedParenthesisContent(e,a);if(l&&/^\s*SELECT\b/i.test(l)){let c=a+l.length+1,d=e.substring(c).match(/^\s+(?:AS\s+)?([a-zA-Z0-9_]+)/i);if(d){let E=d[1],f=this.extractColumnsFromQuery(l);n.push({name:E,type:"Subquery",columns:f})}}}return n}extractBalancedParenthesisContent(e,n){let r=1,i=n;for(;i<e.length;i++)if(e[i]==="("?r++:e[i]===")"&&r--,r===0)return e.substring(n,i);return null}extractColumnsFromQuery(e){let n=e.match(/^\s*SELECT\s+/i);if(!n)return[];let r=n[0].length,i="",s=0,o=-1;for(let c=r;c<e.length;c++)if(e[c]==="("?s++:e[c]===")"&&s--,s===0&&e.substr(c).match(/^\s+FROM\b/i)){o=c;break}o!==-1?i=e.substring(r,o):i=e.substring(r);let a=[],l="";s=0;for(let c=0;c<i.length;c++){let u=i[c];u==="("?s++:u===")"&&s--,u===","&&s===0?(a.push(l.trim()),l=""):l+=u}return l.trim()&&a.push(l.trim()),a.map(c=>{let u=c.match(/\s+AS\s+([a-zA-Z0-9_]+)$/i);if(u)return u[1];let d=c.match(/\s+([a-zA-Z0-9_]+)$/i);if(d)return d[1];let E=c.split(".");return E[E.length-1]})}findAlias(e,n){let r=new RegExp("(?:FROM|JOIN)\\s+([a-zA-Z0-9_\\.]+)(?:\\s+(?:AS\\s+)?([a-zA-Z0-9_]+))?","gi"),i;for(;(i=r.exec(e))!==null;){let s=i[1],o=i[2];if(o&&o.toUpperCase()===n.toUpperCase()){let a=s.split(".");return a.length===3?{db:a[0],schema:a[1],table:a[2]}:a.length===2?{schema:a[0],table:a[1]}:{table:a[0]}}else if(!o){let a=s.split(".");if(a[a.length-1].toUpperCase()===n.toUpperCase())return a.length===3?{db:a[0],schema:a[1],table:a[2]}:a.length===2?{schema:a[0],table:a[1]}:{table:a[0]}}}return null}buildSimpleColumnQuery(e,n,r,i,s){if(n)return`SELECT ATTNAME, FORMAT_TYPE FROM ${e}_V_RELATION_COLUMN WHERE OBJID = ${n} ORDER BY ATTNUM`;let o=i?`AND UPPER(O.SCHEMA) = UPPER('${i}')`:"",a=s?`AND UPPER(O.DBNAME) = UPPER('${s}')`:"";return`
            SELECT C.ATTNAME, C.FORMAT_TYPE 
            FROM ${e}_V_RELATION_COLUMN C
            JOIN ${e}_V_OBJECT_DATA O ON C.OBJID = O.OBJID
            WHERE UPPER(O.OBJNAME) = UPPER('${r}') ${o} ${a}
            ORDER BY C.ATTNUM
        `}createColumnCompletionItem(e){let n=e.label||e.ATTNAME,r=n;e.isPk?r=`\u{1F511} ${n}`:e.isFk&&(r=`\u{1F517} ${n}`);let i=new Ce.CompletionItem(r,e.kind||Ce.CompletionItemKind.Field);i.insertText=n;let s=e.detail||"";return e.isPk&&e.isFk?s+=" (PK, FK)":e.isPk?s+=" (PK)":e.isFk&&(s+=" (FK)"),i.detail=s,e.documentation&&(i.documentation=new Ce.MarkdownString(e.documentation)),e.isPk?i.sortText=`0_${n}`:e.isFk?i.sortText=`1_${n}`:i.sortText=`2_${n}`,i}getKeywords(){return["SELECT","FROM","WHERE","GROUP BY","ORDER BY","LIMIT","INSERT","INTO","VALUES","UPDATE","SET","DELETE","CREATE","DROP","TABLE","VIEW","DATABASE","JOIN","INNER","LEFT","RIGHT","OUTER","ON","AND","OR","NOT","NULL","IS","IN","BETWEEN","LIKE","AS","DISTINCT","CASE","WHEN","THEN","ELSE","END","WITH","UNION","ALL"].map(n=>{let r=new Ce.CompletionItem(n,Ce.CompletionItemKind.Keyword);return r.detail="SQL Keyword",r})}async getDatabases(e){if(!e)return[];let n=this.metadataCache.getDatabases(e);if(n)return n.map(r=>{let i=new Ce.CompletionItem(r.label||r.DATABASE,r.kind||Ce.CompletionItemKind.Module);return i.detail=r.detail,i});try{let i=await ce(this.context,"SELECT DATABASE FROM system.._v_database ORDER BY DATABASE",!0,this.connectionManager,e);if(!i)return[];let o=Te(i).map(a=>({DATABASE:a.DATABASE,label:a.DATABASE,kind:9,detail:"Database"}));return this.metadataCache.setDatabases(e,o),o.map(a=>{let l=new Ce.CompletionItem(a.label,a.kind);return l.detail=a.detail,l})}catch(r){return console.error(r),[]}}async getSchemas(e,n){if(!e)return[];let r=this.metadataCache.getSchemas(e,n);if(r)return r.map(s=>{let o=new Ce.CompletionItem(s.label||s.SCHEMA,s.kind||Ce.CompletionItemKind.Folder);return o.detail=s.detail,o.insertText=s.insertText,o.sortText=s.sortText,o.filterText=s.filterText,o});let i=Ce.window.setStatusBarMessage(`Fetching schemas for ${n}...`);try{let s=`SELECT SCHEMA FROM ${n}.._V_SCHEMA ORDER BY SCHEMA`,o=await ce(this.context,s,!0,this.connectionManager,e);if(!o)return[];let l=Te(o).filter(c=>c.SCHEMA!=null&&c.SCHEMA!=="").map(c=>{let u=c.SCHEMA;return{SCHEMA:u,label:u,kind:19,detail:`Schema in ${n}`,insertText:u,sortText:u,filterText:u}});return this.metadataCache.setSchemas(e,n,l),l.map(c=>{let u=new Ce.CompletionItem(c.label,c.kind);return u.detail=c.detail,u.insertText=c.insertText,u.sortText=c.sortText,u.filterText=c.filterText,u})}catch(s){return console.error("[SqlCompletion] Error in getSchemas:",s),[]}finally{i.dispose()}}async getTables(e,n,r){if(!e)return[];let i=r?`${n}.${r}`:`${n}..`,s=r?this.metadataCache.getTables(e,i):this.metadataCache.getTables(e,i)||this.metadataCache.getTablesAllSchemas(e,n);if(s)return s.map(l=>{let c=typeof l.label=="string"?l.label:l.label?.label||l.OBJNAME||l.TABLENAME||"?",u=new Ce.CompletionItem(c,l.kind||Ce.CompletionItemKind.Class);return u.detail=l.detail,l.DESCRIPTION&&(u.documentation=new Ce.MarkdownString(l.DESCRIPTION)),u.sortText=l.sortText,u});let o=r?`Fetching tables for ${n}.${r}...`:`Fetching tables for ${n}...`,a=Ce.window.setStatusBarMessage(o);try{let l="";r?l=`SELECT OBJNAME, OBJID, COALESCE(DESCRIPTION, '') AS DESCRIPTION FROM ${n}.._V_OBJECT_DATA WHERE UPPER(DBNAME) = UPPER('${n}') AND UPPER(SCHEMA) = UPPER('${r}') AND OBJTYPE='TABLE' ORDER BY OBJNAME`:l=`SELECT OBJNAME, OBJID, SCHEMA, COALESCE(DESCRIPTION, '') AS DESCRIPTION FROM ${n}.._V_OBJECT_DATA WHERE UPPER(DBNAME) = UPPER('${n}') AND OBJTYPE='TABLE' ORDER BY OBJNAME`;let c=await ce(this.context,l,!0,this.connectionManager,e);if(!c)return[];let u=Te(c),d=new Map,E=u.map(f=>{let p=f.OBJNAME,h=f.SCHEMA||r,T=h?`${n}.${h}.${f.OBJNAME}`:`${n}..${f.OBJNAME}`;return d.set(T,f.OBJID),{OBJNAME:f.OBJNAME,TABLENAME:f.OBJNAME,OBJID:f.OBJID,SCHEMA:h,label:p,kind:6,detail:r?"Table":`Table (${h})`,sortText:f.OBJNAME,DESCRIPTION:f.DESCRIPTION}});return this.metadataCache.setTables(e,i,E,d),E.map(f=>{let p=typeof f.label=="string"?f.label:f.label?.label||"?",h=new Ce.CompletionItem(p,f.kind);return h.detail=f.detail,f.DESCRIPTION&&(h.documentation=new Ce.MarkdownString(f.DESCRIPTION)),h.sortText=f.sortText,h})}catch(l){return console.error(l),[]}finally{a.dispose()}}async getColumns(e,n,r,i){if(!e)return[];let s,o=n?`${n}..`:"",a=r&&n?`${n}.${r}.${i}`:n?`${n}..${i}`:void 0;a&&(s=this.metadataCache.findTableId(e,a));let l=`${n||"CURRENT"}.${r||""}.${i}`,c=this.metadataCache.getColumns(e,l);if(c)return c.map(d=>this.createColumnCompletionItem(d));if(!r&&n){let d=this.metadataCache.getColumnsAnySchema(e,n,i);if(d)return d.map(E=>this.createColumnCompletionItem(E))}let u=Ce.window.setStatusBarMessage(`Fetching columns for ${i}...`);try{let d=r||"",E=n||"",f=E&&d?Vc(E,d,i):this.buildSimpleColumnQuery(o,s,i,r,n),p=await ce(this.context,f,!0,this.connectionManager,e);if(!p)return[];let h;if(E&&d?h=qc(p).map(S=>({ATTNAME:S.attname,FORMAT_TYPE:S.formatType,label:S.attname,kind:5,detail:S.formatType,isPk:S.isPk,isFk:S.isFk,documentation:S.description})):h=Te(p).map(S=>({ATTNAME:S.ATTNAME,FORMAT_TYPE:S.FORMAT_TYPE,label:S.ATTNAME,kind:5,detail:S.FORMAT_TYPE})),this.metadataCache.setColumns(e,l,h),n){let T=this.context,S=this.metadataCache;setImmediate(async()=>{try{await S.prefetchColumnsForSchema(e,n,r,I=>ce(T,I,!0,this.connectionManager,e))}catch(I){console.error("[SqlCompletion] Background column prefetch error:",I)}})}return h.map(T=>this.createColumnCompletionItem(T))}catch(d){return console.error(d),[]}finally{u.dispose()}}};var zc=z(require("vscode"));En();function W8(t){let e="",n=0;for(;n<t.length;){if(t[n]==="-"&&n+1<t.length&&t[n+1]==="-"){for(;n<t.length&&t[n]!==`
`;)n++;n<t.length&&(e+=" ",n++);continue}if(t[n]==="/"&&n+1<t.length&&t[n+1]==="*"){for(n+=2;n<t.length-1&&!(t[n]==="*"&&t[n+1]==="/");)n++;n<t.length-1&&(n+=2),e+=" ";continue}if(t[n]==="'"){for(n++;n<t.length;)if(t[n]==="'"&&n+1<t.length&&t[n+1]==="'")n+=2;else if(t[n]==="'"){n++;break}else n++;e+=" ";continue}e+=t[n],n++}return e}function $8(t){let e="",n=0;for(;n<t.length;){if(t[n]==="-"&&n+1<t.length&&t[n+1]==="-"){for(;n<t.length&&t[n]!==`
`;)n++;n<t.length&&(e+=" ",n++);continue}if(t[n]==="/"&&n+1<t.length&&t[n+1]==="*"){for(n+=2;n<t.length-1&&!(t[n]==="*"&&t[n+1]==="/");)n++;n<t.length-1&&(n+=2),e+=" ";continue}if(t[n]==="'"){for(e+=t[n],n++;n<t.length;)if(t[n]==="'"&&n+1<t.length&&t[n+1]==="'")e+="''",n+=2;else if(t[n]==="'"){e+=t[n],n++;break}else e+=t[n],n++;continue}e+=t[n],n++}return e}function oA(t,e,n){let r;switch(n){case"raw":r=t;break;case"noComments":r=$8(t);break;case"noCommentsNoLiterals":default:r=W8(t);break}return r.toUpperCase().includes(e.toUpperCase())}var jc=class{constructor(e,n,r,i){this._extensionUri=e;this.context=n;this.metadataCache=r;this.connectionManager=i;this.currentSearchId=0}static{this.viewType="netezza.search"}resolveWebviewView(e,n,r){this._view=e,e.webview.options={enableScripts:!0,localResourceRoots:[this._extensionUri]},e.webview.html=this._getHtmlForWebview(e.webview),e.webview.onDidReceiveMessage(async i=>{switch(i.type){case"search":await this.search(i.value);break;case"searchSource":await this.searchSourceCode(i.value,i.mode||"noCommentsNoLiterals");break;case"navigate":zc.commands.executeCommand("netezza.revealInSchema",i);break;case"cancel":this.currentSearchId++,this._view?.webview.postMessage({type:"cancelled"});break;case"reset":this.currentSearchId++,this._view?.webview.postMessage({type:"reset"});break}})}async search(e){if(!e||e.length<2)return;let n,r=zc.window.activeTextEditor;if(r&&r.document.languageId==="sql"&&(n=this.connectionManager.getConnectionForExecution(r.document.uri.toString())),n||(n=this.connectionManager.getActiveConnectionName()||void 0),!n){this._view?.webview.postMessage({type:"results",data:[],append:!1});return}let i=++this.currentSearchId,s=new Set;if(this._view){let c=this.metadataCache.search(e,n);if(c.length>0){let u=[];c.forEach(d=>{let E=`${d.name.toUpperCase().trim()}|${d.type.toUpperCase().trim()}|${(d.parent||"").toUpperCase().trim()}`;s.has(E)||(s.add(E),u.push({NAME:d.name,SCHEMA:d.schema||"",DATABASE:d.database||"",TYPE:d.type,PARENT:d.parent||"",DESCRIPTION:"Result from Cache",MATCH_TYPE:"NAME",connectionName:n}))}),u.sort((d,E)=>{let f=p=>p==="COLUMN"?2:1;return f(E.TYPE)-f(d.TYPE)?f(d.TYPE)-f(E.TYPE):d.NAME.localeCompare(E.NAME)}),u.length>0&&i===this.currentSearchId&&this._view.webview.postMessage({type:"results",data:u,append:!1})}else i===this.currentSearchId&&this._view.webview.postMessage({type:"searching",message:"Searching in database..."});this.metadataCache.hasAllObjectsPrefetchTriggered(n)||this.metadataCache.prefetchAllObjects(n,async u=>ce(this.context,u,!0,this.connectionManager,n))}let a=`%${e.replace(/'/g,"''").toUpperCase()}%`,l=`
            SELECT * FROM (
                SELECT 1 AS PRIORITY, OBJNAME AS NAME, SCHEMA, DBNAME AS DATABASE, OBJTYPE AS TYPE, '' AS PARENT, 
                       COALESCE(DESCRIPTION, '') AS DESCRIPTION, 'NAME' AS MATCH_TYPE
                FROM _V_OBJECT_DATA 
                WHERE UPPER(OBJNAME) LIKE '${a}'
                UNION ALL
                SELECT 1 AS PRIORITY, OBJNAME AS NAME, SCHEMA, DBNAME AS DATABASE, OBJTYPE AS TYPE, '' AS PARENT, 
                       COALESCE(DESCRIPTION, '') AS DESCRIPTION, 'DESC' AS MATCH_TYPE
                FROM _V_OBJECT_DATA 
                WHERE UPPER(DESCRIPTION) LIKE '${a}' AND UPPER(OBJNAME) NOT LIKE '${a}'
                UNION ALL
                SELECT 2 AS PRIORITY, C.ATTNAME AS NAME, O.SCHEMA, O.DBNAME AS DATABASE, 'COLUMN' AS TYPE, O.OBJNAME AS PARENT,
                       COALESCE(C.DESCRIPTION, '') AS DESCRIPTION, 'NAME' AS MATCH_TYPE
                FROM _V_RELATION_COLUMN C
                JOIN _V_OBJECT_DATA O ON C.OBJID = O.OBJID
                WHERE UPPER(C.ATTNAME) LIKE '${a}'
                UNION ALL
                SELECT 3 AS PRIORITY, E1.TABLENAME AS NAME, E1.SCHEMA, E1.DATABASE, 'EXTERNAL TABLE' AS TYPE, '' AS PARENT,
                       COALESCE(E2.EXTOBJNAME, '') AS DESCRIPTION, 'DATAOBJECT' AS MATCH_TYPE
                FROM _V_EXTERNAL E1
                JOIN _V_EXTOBJECT E2 ON E1.DATABASE = E2.DATABASE AND E1.SCHEMA = E2.SCHEMA AND E1.TABLENAME = E2.TABLENAME
                WHERE UPPER(E2.EXTOBJNAME) LIKE '${a}'
            ) AS R
            ORDER BY PRIORITY, NAME
            LIMIT 100
        `;try{let c=await ce(this.context,l,!0,this.connectionManager,n);if(i!==this.currentSearchId)return;if(c&&c.data&&c.data.length>0){let u=Te(c),d=[];u.forEach(E=>{let f=E,p=`${f.NAME.toUpperCase().trim()}|${f.TYPE.toUpperCase().trim()}|${(f.PARENT||"").toUpperCase().trim()}`;s.has(p)||(d.push({NAME:f.NAME,SCHEMA:f.SCHEMA,DATABASE:f.DATABASE,TYPE:f.TYPE,PARENT:f.PARENT,DESCRIPTION:f.DESCRIPTION,MATCH_TYPE:f.MATCH_TYPE,connectionName:n}),s.add(p))}),d.length>0&&this._view?this._view.webview.postMessage({type:"results",data:d,append:!0}):s.size===0&&this._view&&this._view.webview.postMessage({type:"results",data:[],append:!1})}else s.size===0&&this._view&&this._view.webview.postMessage({type:"results",data:[],append:!1})}catch(c){console.error("Search error:",c),this._view&&i===this.currentSearchId&&this._view.webview.postMessage({type:"error",message:c instanceof Error?c.message:String(c)})}}async searchSourceCode(e,n){if(!e||e.length<2)return;let r,i=zc.window.activeTextEditor;if(i&&i.document.languageId==="sql"&&(r=this.connectionManager.getConnectionForExecution(i.document.uri.toString())),r||(r=this.connectionManager.getActiveConnectionName()||void 0),!r){this._view?.webview.postMessage({type:"results",data:[],append:!1});return}let s=++this.currentSearchId,o=n==="raw"?"raw source":n==="noComments"?"source (excl. comments)":"source (excl. comments/strings)";try{this._view&&s===this.currentSearchId&&this._view.webview.postMessage({type:"searching",message:`Searching in ${o}...`});let a=e.toUpperCase(),l=[],c=`
                SELECT VIEWNAME AS NAME, SCHEMA, DATABASE, DEFINITION AS SOURCE
                FROM _V_VIEW
            `;try{let d=await ce(this.context,c,!0,this.connectionManager,r);if(d&&d.data&&s===this.currentSearchId){let E=Te(d);for(let f of E)f.SOURCE&&oA(f.SOURCE,a,n)&&l.push({NAME:f.NAME,SCHEMA:f.SCHEMA,DATABASE:f.DATABASE,TYPE:"VIEW",PARENT:"",DESCRIPTION:`Found in view ${o}`,MATCH_TYPE:"SOURCE_CODE",connectionName:r})}}catch(d){console.error("Error searching views:",d)}let u=`
                SELECT PROCEDURE AS NAME, SCHEMA, DATABASE, PROCEDURESOURCE AS SOURCE
                FROM _V_PROCEDURE
            `;try{let d=await ce(this.context,u,!0,this.connectionManager,r);if(d&&d.data&&s===this.currentSearchId){let E=Te(d);for(let f of E)f.SOURCE&&oA(f.SOURCE,a,n)&&l.push({NAME:f.NAME,SCHEMA:f.SCHEMA,DATABASE:f.DATABASE,TYPE:"PROCEDURE",PARENT:"",DESCRIPTION:`Found in procedure ${o}`,MATCH_TYPE:"SOURCE_CODE",connectionName:r})}}catch(d){console.error("Error searching procedures:",d)}this._view&&s===this.currentSearchId&&this._view.webview.postMessage({type:"results",data:l,append:!1})}catch(a){console.error("Source code search error:",a),this._view&&s===this.currentSearchId&&this._view.webview.postMessage({type:"error",message:a instanceof Error?a.message:String(a)})}}_getHtmlForWebview(e){return`<!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Schema Search</title>
        <style>
            body { 
                font-family: var(--vscode-font-family); 
                padding: 0; 
                margin: 0;
                color: var(--vscode-foreground); 
                display: flex;
                flex-direction: column;
                height: 100vh;
                overflow: hidden;
            }
            .search-box { 
                display: flex; 
                gap: 5px; 
                padding: 10px;
                flex-shrink: 0;
                border-bottom: 1px solid var(--vscode-panel-border);
            }
            input { flex-grow: 1; padding: 5px; background: var(--vscode-input-background); color: var(--vscode-input-foreground); border: 1px solid var(--vscode-input-border); }
            button {
                display: inline-flex;
                align-items: center;
                justify-content: center;
                gap: 6px;
                background-color: var(--vscode-button-secondaryBackground);
                color: var(--vscode-button-secondaryForeground);
                border: 1px solid var(--vscode-contrastBorder, transparent);
                padding: 4px 10px;
                cursor: pointer;
                border-radius: 2px;
                font-family: var(--vscode-font-family);
                font-size: 12px;
                line-height: 18px;
            }
            button:hover { background-color: var(--vscode-button-secondaryHoverBackground); }
            button.primary { background-color: var(--vscode-button-background); color: var(--vscode-button-foreground); }
            button.primary:hover { background-color: var(--vscode-button-hoverBackground); }
            #status { padding: 5px 10px; flex-shrink: 0; }
            .results { 
                list-style: none; 
                padding: 0; 
                margin: 0; 
                flex-grow: 1; 
                overflow-y: auto; 
            }
            .result-item { padding: 8px 10px; border-bottom: 1px solid var(--vscode-panel-border); display: flex; flex-direction: column; cursor: pointer; position: relative; }
            .result-item:hover { background: var(--vscode-list-hoverBackground); }
            .item-header { display: flex; justify-content: space-between; font-weight: bold; }
            .item-details { font-size: 0.9em; opacity: 0.8; display: flex; gap: 10px; }
            .type-badge { font-size: 0.8em; background: var(--vscode-badge-background); color: var(--vscode-badge-foreground); padding: 2px 5px; border-radius: 3px; }
            .tooltip { position: absolute; background: var(--vscode-editorHoverWidget-background); color: var(--vscode-editorHoverWidget-foreground); border: 1px solid var(--vscode-editorHoverWidget-border); padding: 8px; border-radius: 4px; font-size: 0.9em; max-width: 300px; word-wrap: break-word; z-index: 1000; opacity: 0; visibility: hidden; transition: opacity 0.2s, visibility 0.2s; pointer-events: none; }
            .result-item:hover .tooltip { opacity: 1; visibility: visible; }
            .tooltip.top { bottom: 100%; left: 0; margin-bottom: 5px; }
            .tooltip.bottom { top: 100%; left: 0; margin-top: 5px; }
            .cache-badge { background-color: var(--vscode-charts-green); color: white; padding: 1px 4px; border-radius: 2px; font-size: 0.7em; margin-left: 5px; }
            .spinner {
                border: 2px solid transparent;
                border-top: 2px solid var(--vscode-progressBar-background);
                border-radius: 50%;
                width: 14px;
                height: 14px;
                animation: spin 1s linear infinite;
                display: inline-block;
                vertical-align: middle;
                margin-right: 8px;
            }
            @keyframes spin {
                0% { transform: rotate(0deg); }
                100% { transform: rotate(360deg); }
            }
            .options-row {
                display: flex;
                align-items: center;
                gap: 8px;
                padding: 5px 10px;
                font-size: 12px;
                border-bottom: 1px solid var(--vscode-panel-border);
            }
            .options-row label {
                display: flex;
                align-items: center;
                gap: 4px;
                cursor: pointer;
            }
            .options-row select {
                background: var(--vscode-dropdown-background);
                color: var(--vscode-dropdown-foreground);
                border: 1px solid var(--vscode-dropdown-border);
                padding: 3px 6px;
                border-radius: 2px;
                cursor: pointer;
                font-size: 12px;
            }
            .searching-indicator {
                display: flex;
                align-items: center;
                justify-content: center;
                padding: 20px;
                color: var(--vscode-descriptionForeground);
            }
        </style>
    </head>
    <body>
        <div class="search-box">
            <input type="text" id="searchInput" placeholder="Search tables, columns, view definitions, procedure source..." />
            <button id="searchBtn" class="primary">Search</button>
            <button id="cancelBtn" style="display: none;" title="Cancel search">\u2715</button>
            <button id="resetBtn" title="Reset search">\u21BA</button>
        </div>
        <div class="options-row">
            <label>
                Source search mode:
                <select id="sourceModeSelect">
                    <option value="">Objects Only</option>
                    <option value="raw">Source: Raw</option>
                    <option value="noComments">Source: No Comments</option>
                    <option value="noCommentsNoLiterals">Source: No Comments/Strings</option>
                </select>
            </label>
        </div>
        <div id="status"></div>
        <ul class="results" id="resultsList"></ul>

        <script>
            try {
            const vscode = acquireVsCodeApi();
            const searchInput = document.getElementById('searchInput');
            const searchBtn = document.getElementById('searchBtn');
            const cancelBtn = document.getElementById('cancelBtn');
            const resetBtn = document.getElementById('resetBtn');
            const sourceModeSelect = document.getElementById('sourceModeSelect');
            const resultsList = document.getElementById('resultsList');
            const status = document.getElementById('status');
            
            let isSearching = false;
            
            function setSearchingState(searching) {
                isSearching = searching;
                cancelBtn.style.display = searching ? 'inline-flex' : 'none';
                searchBtn.disabled = searching;
            }

            searchBtn.addEventListener('click', () => {
                const term = searchInput.value;
                if (term) {
                    // Show searching indicator in results panel
                    resultsList.innerHTML = '<li class="searching-indicator"><span class="spinner"></span> Searching...</li>';
                    status.textContent = '';
                    setSearchingState(true);
                    
                    const sourceMode = sourceModeSelect.value;
                    if (sourceMode) {
                        // Source code search with mode
                        vscode.postMessage({ type: 'searchSource', value: term, mode: sourceMode });
                    } else {
                        // Object search (cache + database)
                        vscode.postMessage({ type: 'search', value: term });
                    }
                }
            });
            
            cancelBtn.addEventListener('click', () => {
                vscode.postMessage({ type: 'cancel' });
            });
            
            resetBtn.addEventListener('click', () => {
                vscode.postMessage({ type: 'reset' });
            });

            searchInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    searchBtn.click();
                }
            });

            window.addEventListener('message', event => {
                const message = event.data;
                switch (message.type) {
                    case 'searching':
                        // Show searching indicator in results panel
                        resultsList.innerHTML = '<li class="searching-indicator"><span class="spinner"></span> ' + (message.message || 'Searching...') + '</li>';
                        status.textContent = '';
                        break;
                    case 'results':
                        status.textContent = '';
                        setSearchingState(false);
                        renderResults(message.data, message.append);
                        break;
                    case 'error':
                        resultsList.innerHTML = '';
                        status.textContent = 'Error: ' + message.message;
                        setSearchingState(false);
                        break;
                    case 'cancelled':
                        resultsList.innerHTML = '';
                        status.textContent = 'Search cancelled.';
                        setSearchingState(false);
                        break;
                    case 'reset':
                        searchInput.value = '';
                        resultsList.innerHTML = '';
                        status.textContent = '';
                        setSearchingState(false);
                        break;
                }
            });

            function renderResults(data, append) {
                if (!append) {
                    resultsList.innerHTML = '';
                }

                if (!data || data.length === 0) {
                    if (!append && resultsList.children.length === 0) {
                        status.textContent = 'No results found.';
                    }
                    return;
                }

                data.forEach(item => {
                    const li = document.createElement('li');
                    li.className = 'result-item';

                    const parentInfo = item.PARENT ? \`Parent: \${item.PARENT}\` : '';
                    const schemaInfo = item.SCHEMA ? \`Schema: \${item.SCHEMA}\` : '';
                    const databaseInfo = item.DATABASE ? \`Database: \${item.DATABASE}\` : '';
                    const description = item.DESCRIPTION && item.DESCRIPTION.trim() ? item.DESCRIPTION : '';
                    
                    // Add match type indicator
                    const matchTypeInfo = item.MATCH_TYPE === 'DEFINITION' ? 'Match in view definition' :
                                        item.MATCH_TYPE === 'SOURCE' ? 'Match in procedure source' :
                                        item.MATCH_TYPE === 'NAME' ? 'Match in name' : '';
                    
                    li.innerHTML = \`
                        <div class="item-header">
                            <span>\${item.NAME}</span>
                            <span class="type-badge">\${item.TYPE}</span>
                        </div>
                        <div class="item-details">
                            <span>\${databaseInfo}</span>
                            <span>\${schemaInfo}</span>
                            <span>\${parentInfo}</span>
                            \${matchTypeInfo ? \`<span style="font-style: italic; color: var(--vscode-descriptionForeground);">\${matchTypeInfo}</span>\` : ''}
                        </div>
                        \${description ? \`<div class="tooltip bottom">\${description}</div>\` : ''}
                    \`;
                    
                    // Add double-click handler to navigate to schema tree
                    li.addEventListener('dblclick', () => {
                        vscode.postMessage({ 
                            type: 'navigate', 
                            name: item.NAME,
                            schema: item.SCHEMA,
                            database: item.DATABASE,
                            objType: item.TYPE,
                            parent: item.PARENT,
                            connectionName: item.connectionName // Pass back connection name
                        });
                    });
                    
                    resultsList.appendChild(li);
                });
            }
            } catch (e) {
                document.body.innerHTML = '<pre style="color:red;">Error loading Schema Search: ' + e.message + '\\n' + e.stack + '</pre>';
            }
        </script>
    </body>
    </html>`}};Eo();var Va=z(require("vscode"));Eo();var oE=class{provideDocumentLinks(e,n){let r=[],i=e.getText(),s=/[a-zA-Z0-9_"]+(\.[a-zA-Z0-9_"]*)+/g,o;for(;(o=s.exec(i))!==null;){let a=e.positionAt(o.index),l=e.positionAt(o.index+o[0].length),c=new Va.Range(a,l),u=Fn.getObjectAtPosition(i,o.index+Math.floor(o[0].length/2));if(u){if(o[0].split(".").length===2&&!u.database&&this.isLikelyAliasReference(i,o.index))continue;let f={name:u.name,schema:u.schema,database:u.database},p=Va.Uri.parse(`command:netezza.revealInSchema?${encodeURIComponent(JSON.stringify(f))}`),h=new Va.DocumentLink(c,p);h.tooltip=`Reveal ${u.name} in Schema`,r.push(h)}}return r}isLikelyAliasReference(e,n){let i=e.substring(Math.max(0,n-200),n).replace(/--[^\n]*/g,"").replace(/\/\*[\s\S]*?\*\//g,"").toUpperCase();return/(?:FROM|JOIN)\s+[a-zA-Z0-9_"]*$/i.test(i)?!1:!!i.match(/\b(SELECT|WHERE|ON|HAVING|ORDER\s+BY|GROUP\s+BY|AND|OR|SET|VALUES)\b(?!.*\b(?:FROM|JOIN)\b)/)}};var lE=z(require("vscode")),aE=class{provideFoldingRanges(e,n,r){let i=[],s=[],o=/^\s*--\s*REGION\b/i,a=/^\s*--\s*ENDREGION\b/i;for(let l=0;l<e.lineCount;l++){let u=e.lineAt(l).text;if(o.test(u))s.push(l);else if(a.test(u)&&s.length>0){let d=s.pop();i.push(new lE.FoldingRange(d,l,lE.FoldingRangeKind.Region))}}return i}};var tn=z(require("vscode"));Qf();var Kc=class t{constructor(e,n){this._extensionUri=e;this._context=n;this._currentOffset=0}static{this.viewType="netezza.queryHistory"}static{this.PAGE_SIZE=50}resolveWebviewView(e,n,r){this._view=e,e.webview.options={enableScripts:!0,localResourceRoots:[this._extensionUri]},e.webview.html=this._getHtmlForWebview(e.webview),this.sendHistoryToWebview(!0),e.webview.onDidReceiveMessage(async i=>{switch(i.type){case"refresh":this.refresh();break;case"loadMore":await this.loadMore();break;case"searchArchive":await this.searchArchive(i.term);break;case"clearAll":await this.clearAllHistory();break;case"deleteEntry":await this.deleteEntry(i.id,i.query);break;case"copyQuery":await tn.env.clipboard.writeText(i.query),tn.window.showInformationMessage("Query copied to clipboard");break;case"executeQuery":await this.executeQuery(i.query);break;case"getHistory":await this.sendHistoryToWebview(!0);break;case"toggleFavorite":await this.toggleFavorite(i.id);break;case"updateEntry":await this.updateEntry(i.id,i.tags,i.description);break;case"requestEdit":await this.requestEdit(i.id);break;case"requestTagFilter":await this.requestTagFilter(i.tags);break;case"showFavoritesOnly":await this.sendFavoritesToWebview();break;case"filterByTag":await this.sendFilteredByTagToWebview(i.tag);break}})}refresh(){this._view&&this.sendHistoryToWebview(!0)}async loadMore(){this._view&&(this._currentOffset+=t.PAGE_SIZE,this.sendHistoryToWebview(!1))}async searchArchive(e){if(!this._view)return;let n=new dn(this._context),r=await n.searchArchive(e),i=await n.getStats();this._view.webview.postMessage({type:"archiveSearchResults",history:r,stats:i,term:e})}async sendHistoryToWebview(e=!1){if(!this._view)return;e&&(this._currentOffset=0);let n=new dn(this._context),r=await n.getHistory(t.PAGE_SIZE,this._currentOffset),i=await n.getStats();console.log(`QueryHistoryView: sending history to webview, entries=${r.length}, offset=${this._currentOffset}, reset=${e}`),this._view.webview.postMessage({type:"historyData",history:r,stats:i,reset:e})}async clearAllHistory(){await tn.window.showWarningMessage("Are you sure you want to clear all query history?",{modal:!0},"Clear All")==="Clear All"&&(await new dn(this._context).clearHistory(),this.refresh(),tn.window.showInformationMessage("Query history cleared"))}async deleteEntry(e,n){let r=n?`: ${n.substring(0,50)}${n.length>50?"...":""}`:"";if(await tn.window.showWarningMessage(`Are you sure you want to delete this query${r}?`,{modal:!0},"Delete")==="Delete"){let s=new dn(this._context);await s.deleteEntry(e),this._view?.webview.postMessage({type:"entryDeleted",id:e});let o=await s.getStats();this._view?.webview.postMessage({type:"updateStats",stats:o})}}async executeQuery(e){let n=await tn.workspace.openTextDocument({content:e,language:"sql"});await tn.window.showTextDocument(n)}async toggleFavorite(e){await new dn(this._context).toggleFavorite(e),this.refresh()}async updateEntry(e,n,r){await new dn(this._context).updateEntry(e,n,r),this.refresh(),tn.window.showInformationMessage("Entry updated successfully")}async requestEdit(e){let i=(await new dn(this._context).getHistory()).find(a=>a.id===e);if(!i){tn.window.showErrorMessage("Entry not found (might be archived)");return}let s=await tn.window.showInputBox({prompt:"Enter tags (comma separated)",value:i.tags||"",placeHolder:"tag1, tag2, tag3"});if(s===void 0)return;let o=await tn.window.showInputBox({prompt:"Enter description",value:i.description||"",placeHolder:"Description for this query"});o!==void 0&&await this.updateEntry(e,s,o)}async requestTagFilter(e){if(e.length===1)await this.sendFilteredByTagToWebview(e[0]);else if(e.length>1){let n=await tn.window.showQuickPick(e,{placeHolder:"Filter by which tag?"});n&&await this.sendFilteredByTagToWebview(n)}}async sendFavoritesToWebview(){if(!this._view)return;let e=new dn(this._context),n=await e.getFavorites(),r=await e.getStats();this._view.webview.postMessage({type:"historyData",history:n,stats:r,filter:"favorites",reset:!0})}async sendFilteredByTagToWebview(e){if(!this._view)return;let n=new dn(this._context),r=await n.getByTag(e),i=await n.getStats();this._view.webview.postMessage({type:"historyData",history:r,stats:i,filter:`tag: ${e}`,reset:!0})}_getHtmlForWebview(e){let n=e.asWebviewUri(tn.Uri.joinPath(this._extensionUri,"media","queryHistory.css")),r=e.asWebviewUri(tn.Uri.joinPath(this._extensionUri,"media","queryHistory.js"));return`<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Security-Policy" content="default-src 'none'; style-src ${e.cspSource}; script-src ${e.cspSource};">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Query History</title>
    <link href="${n}" rel="stylesheet">
</head>
<body>
    <div class="toolbar">
        <div class="toolbar-top">
            <input type="search" id="searchInput" placeholder="Search queries..." />
            <span class="stats" id="stats">Loading...</span>
        </div>
        <div class="toolbar-buttons">
            <button class="secondary" id="showAllBtn">\u{1F4DC} All</button>
            <button class="secondary" id="showFavoritesBtn">\u2B50 Favorites</button>
            <button class="secondary" id="refreshBtn">\u21BB Refresh</button>
            <button class="secondary" id="clearAllBtn">\u{1F5D1}\uFE0F Clear All</button>
        </div>
    </div>
    <div class="history-container" id="historyContainer">
        <div class="empty-state">
            <div class="empty-state-icon">\u{1F4DC}</div>
            <div>No query history yet</div>
        </div>
    </div>
    <div id="loadingIndicator" class="loading-indicator" style="display:none;">Loading more...</div>

    <script src="${r}"></script>
</body>
</html>`}};var wt=z(require("vscode"));En();var cE=class t{static{this.viewType="netezza.editData"}static async createOrShow(e,n,r,i){if(!n||!n.label||!n.dbName||!n.schema){wt.window.showErrorMessage("Invalid table selection");return}let s=n.label,o=n.schema,a=n.dbName,l=`${a}.${o}.${s}`,c=wt.window.createWebviewPanel(t.viewType,`Edit: ${s}`,wt.ViewColumn.One,{enableScripts:!0,localResourceRoots:[wt.Uri.joinPath(e,"media")],retainContextWhenHidden:!0});c.webview.html=this._getHtmlForWebview(c.webview,e,l),this._loadData(c,a,o,s,n.connectionName,r,i),c.webview.onDidReceiveMessage(async u=>{try{switch(u.command){case"save":await this._handleSave(c,u.changes,l,n.connectionName,r,i),this._loadData(c,a,o,s,n.connectionName,r,i,{whereClause:u.whereClause,columns:u.columns});break;case"refresh":this._loadData(c,a,o,s,n.connectionName,r,i,{whereClause:u.whereClause,columns:u.columns});break;case"updateTableComment":await this._execSimpleCommand(r,i,n.connectionName,`COMMENT ON TABLE ${l} IS '${(u.comment||"").replace(/'/g,"''")}'`,"Table comment updated");break;case"updateColumnComment":await this._execSimpleCommand(r,i,n.connectionName,`COMMENT ON COLUMN ${l}.${u.column} IS '${(u.comment||"").replace(/'/g,"''")}'`,"Column comment updated");break;case"addColumn":await this._execSimpleCommand(r,i,n.connectionName,`ALTER TABLE ${l} ADD COLUMN ${u.name} ${u.type}`,`Column ${u.name} added`,!0),this._loadData(c,a,o,s,n.connectionName,r,i);break;case"dropColumn":await this._execSimpleCommand(r,i,n.connectionName,`ALTER TABLE ${l} DROP COLUMN ${u.column}`,`Column ${u.column} dropped`,!0),this._loadData(c,a,o,s,n.connectionName,r,i);break;case"error":wt.window.showErrorMessage(u.text);break;case"info":wt.window.showInformationMessage(u.text);break}}catch(d){wt.window.showErrorMessage(`Error: ${d instanceof Error?d.message:String(d)}`)}})}static async _execSimpleCommand(e,n,r,i,s,o=!1){try{await fn(e,i,!0,r,n),wt.window.showInformationMessage(s)}catch(a){wt.window.showErrorMessage(`Operation failed: ${a instanceof Error?a.message:String(a)}`)}}static async _loadData(e,n,r,i,s,o,a,l={}){let c=`${n}.${r}.${i}`;try{e.webview.postMessage({command:"setLoading",loading:!0,message:"Fetching data..."});let u=R=>ce(o,R,!0,a,s),d="ROWID, *";if(l.columns&&l.columns.trim()){let R=l.columns.trim();/\bROWID\b/i.test(R)?d=R:d="ROWID, "+R}let E=`SELECT ${d} FROM ${c}`;if(l.whereClause&&l.whereClause.trim()){let R=l.whereClause.trim();/^\s*WHERE\s/i.test(R)?E+=` ${R}`:E+=` WHERE ${R}`}E+=" ORDER BY ROWID LIMIT 50000";let[f,p]=await Promise.all([ce(o,E,!0,a,s),g0(u,n,r,i)]),h=p.tableComment||"",T=I0(p.columns),S=[];try{f&&f.data?(S=Te(f),console.log("[EditDataProvider] Parsed data rows:",S.length)):console.log("[EditDataProvider] No data returned")}catch(R){console.error("[EditDataProvider] Data Parse Error",R)}let I=[];if(S.length>0)I=Object.keys(S[0]),I.includes("ROWID")&&(I=["ROWID",...I.filter(R=>R!=="ROWID")]);else if(l.columns&&l.columns.trim()){let R=l.columns.trim().split(",").map(A=>A.trim()).filter(A=>A);I=R.some(A=>A.toUpperCase()==="ROWID")?R:["ROWID",...R]}else T.length>0&&(I=["ROWID",...T.map(R=>R.ATTNAME)]);console.log("[EditDataProvider] Sending to webview:",{dataRows:S.length,columns:I.length}),e.webview.postMessage({command:"setData",data:S,columns:I,metadata:{tableComment:h,columns:T}})}catch(u){let d=u instanceof Error?u.message:String(u);wt.window.showErrorMessage(`Failed to load data: ${d}`),e.webview.postMessage({command:"setError",text:d})}finally{e.webview.postMessage({command:"setLoading",loading:!1})}}static async _handleSave(e,n,r,i,s,o){let a=[];if(n.deletes&&n.deletes.length>0){let l=n.deletes.join(",");a.push(`DELETE FROM ${r} WHERE ROWID IN (${l})`)}if(n.updates&&n.updates.length>0)for(let l of n.updates){let c=[];for(let[u,d]of Object.entries(l.changes))u!=="ROWID"&&c.push(`${u} = ${this._formatValue(d)}`);c.length>0&&a.push(`UPDATE ${r} SET ${c.join(", ")} WHERE ROWID = ${l.rowId}`)}if(n.inserts&&n.inserts.length>0)for(let l of n.inserts){let c=Object.keys(l).filter(d=>d!=="ROWID");if(c.length===0)continue;let u=c.map(d=>this._formatValue(l[d]));a.push(`INSERT INTO ${r} (${c.join(", ")}) VALUES (${u.join(", ")})`)}if(a.length===0){wt.window.showInformationMessage("No changes to save.");return}try{let l=["BEGIN",...a,"COMMIT"];await Yc(s,l,o),wt.window.showInformationMessage(`Successfully executed ${a.length} changes.`)}catch(l){wt.window.showErrorMessage(`Failed to save changes: ${l instanceof Error?l.message:String(l)}`)}}static _formatValue(e){return e==null||e===""?"NULL":typeof e=="number"?e.toString():typeof e=="boolean"?e?"TRUE":"FALSE":`'${String(e).replace(/'/g,"''")}'`}static _getHtmlForWebview(e,n,r){let i=e.asWebviewUri(wt.Uri.joinPath(n,"media","tanstack-table-core.js")),s=e.asWebviewUri(wt.Uri.joinPath(n,"media","tanstack-virtual-core.js")),o=e.asWebviewUri(wt.Uri.joinPath(n,"media","editDataPanel.js")),a=e.asWebviewUri(wt.Uri.joinPath(n,"media","editDataPanel.css")),l=e.asWebviewUri(wt.Uri.joinPath(n,"media","codicon.ttf")),c=k8();return`<!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <meta http-equiv="Content-Security-Policy" content="default-src 'none'; font-src ${e.cspSource}; style-src ${e.cspSource} 'unsafe-inline'; script-src 'nonce-${c}';">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <link href="${a}" rel="stylesheet">
            <style>
                @font-face {
                    font-family: 'codicon';
                    src: url('${l}') format('truetype');
                }
                .codicon { font-family: 'codicon'; }
            </style>
            <script nonce="${c}" src="${i}"></script>
            <script nonce="${c}" src="${s}"></script>
            <title>Edit Data: ${r}</title>
        </head>
        <body>
            <div class="main-layout">
                <!-- Tabs Header -->
                <div class="tabs-header">
                    <div class="tab active" data-target="tab-data">
                        Data
                    </div>
                    <div class="tab" data-target="tab-metadata">
                        Table Description
                    </div>
                </div>

                <!-- Tab: Data -->
                <div id="tab-data" class="tab-content active">
                    <div class="toolbar">
                        <div class="filter-container">
                            <input type="text" id="filterColumns" class="toolbar-input" placeholder="Columns (e.g. ID, NAME)" title="Columns to select">
                            <input type="text" id="filterWhere" class="toolbar-input" placeholder="WHERE clause (e.g. ID > 100)" title="WHERE filter condition">
                        </div>
                        <span id="status" class="status"></span>
                        <div class="actions">
                            <button id="refreshBtn" title="Apply Filter / Refresh">Refresh</button>
                            <button id="addRowBtn">Add Row</button>
                            <button id="saveBtn" class="primary">Save Changes</button>
                        </div>
                    </div>
                    <div id="gridContainer" class="grid-container"></div>
                </div>

                <!-- Tab: Metadata -->
                <div id="tab-metadata" class="tab-content">
                    <div id="metadataContent" class="metadata-content">
                        <!-- Populated by JS -->
                        Loading metadata...
                    </div>
                </div>
            </div>
            
            <script nonce="${c}" src="${o}"></script>
        </body>
        </html>`}};function k8(){let t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let n=0;n<32;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}var O0=z(require("vscode"));function aA(t,e){return e?t.startsWith(`${e}|`):!0}function Lr(t){if(!t||typeof t!="object")return;let e=t;if(e.label)return typeof e.label=="string"?e.label:e.label.label}function uE(t){let e={};return t.forEach((n,r)=>{e[r]=n}),e}function N0(t){let e={};return t.forEach((n,r)=>{let i={};n.data.forEach((s,o)=>{i[o]=s}),e[r]={data:i,timestamp:n.timestamp}}),e}function lA(t,e,n){return e?`${t}.${e}.${n}`:`${t}..${n}`}var Y8=4,dE=class{constructor(){this.dbCache=new Map;this.schemaCache=new Map;this.tableCache=new Map;this.columnCache=new Map;this.tableIdMap=new Map;this.typeGroupCache=new Map;let n=O0.workspace.getConfiguration("netezza").get("cacheTTL",Y8);this.CACHE_TTL=n*60*60*1e3}isEntryValid(e){return Date.now()-e<this.CACHE_TTL}setOnDataChange(e){this.onDataChange=e}clearAll(){this.dbCache.clear(),this.schemaCache.clear(),this.tableCache.clear(),this.columnCache.clear(),this.tableIdMap.clear(),this.typeGroupCache.clear()}getDatabases(e){let n=this.dbCache.get(e);if(n){if(!this.isEntryValid(n.timestamp)){this.dbCache.delete(e);return}return n.data}}setDatabases(e,n){this.dbCache.set(e,{data:n,timestamp:Date.now()}),this.onDataChange?.("db")}getSchemas(e,n){let r=`${e}|${n}`,i=this.schemaCache.get(r);if(i){if(!this.isEntryValid(i.timestamp)){this.schemaCache.delete(r);return}return i.data}}setSchemas(e,n,r){let i=`${e}|${n}`;this.schemaCache.set(i,{data:r,timestamp:Date.now()}),this.onDataChange?.("schema")}getTables(e,n){let r=`${e}|${n}`,i=this.tableCache.get(r);if(i){if(!this.isEntryValid(i.timestamp)){this.tableCache.delete(r),this.tableIdMap.delete(r);return}return i.data}}getTablesAllSchemas(e,n){let r=`${e}|${n}.`,i=[],s=new Set;for(let[o,a]of this.tableCache)if(o.startsWith(r))for(let l of a.data){let c=Lr(l);c&&!s.has(c.toUpperCase())&&(s.add(c.toUpperCase()),i.push(l))}return i.length>0?i:void 0}setTables(e,n,r,i){let s=Date.now(),o=`${e}|${n}`;this.tableCache.set(o,{data:r,timestamp:s}),this.tableIdMap.set(o,{data:i,timestamp:s}),this.onDataChange?.("table")}getObjectsWithSchema(e,n){let r=`${e}|${n}.`,i=[],s=new Set;for(let[o,a]of this.tableCache)if(o.startsWith(r)||o===`${e}|${n}..`){let l=o.split("|");if(l.length<2)continue;let u=l[1].split("."),d=(u.length>1?u[1]:"")||"",E=this.tableIdMap.get(o);for(let f of a.data){let p=Lr(f),h=`${d}.${p}`;if(p&&!s.has(h)){s.add(h);let T;if(E){let S=lA(n,d||void 0,p);T=E.data.get(S)}i.push({item:f,schema:d,objId:T,owner:f.OWNER,description:f.DESCRIPTION})}}}return i}getColumns(e,n){let r=`${e}|${n}`,i=this.columnCache.get(r);if(i){if(!this.isEntryValid(i.timestamp)){this.columnCache.delete(r);return}return i.data}}setColumns(e,n,r){let i=`${e}|${n}`;this.columnCache.set(i,{data:r,timestamp:Date.now()}),this.onDataChange?.("column")}getColumnsAnySchema(e,n,r){let i=`${e}|${n}.`,s=r.toUpperCase();for(let[o,a]of this.columnCache)if(o.startsWith(i)){let l=o.split(".");if(l.length>=3&&l[l.length-1].toUpperCase()===s&&this.isEntryValid(a.timestamp))return a.data}}findTableId(e,n){let r=`${e}|`;for(let[i,s]of this.tableIdMap)if(i.startsWith(r)){let o=s.data.get(n);if(o!==void 0)return o}}getTypeGroups(e,n){let r=`${e}|${n}`;return this.typeGroupCache.get(r)?.data}setTypeGroups(e,n,r){let i=`${e}|${n}`;this.typeGroupCache.set(i,{data:r,timestamp:Date.now()})}findObjectWithType(e,n,r,i){let s=`${e}|`,o=i.toUpperCase();for(let[a,l]of this.tableCache){if(!a.startsWith(s))continue;let c=a.split("|");if(c.length<2)continue;let d=c[1].split("."),E=d[0],f=d.length>1?d[1]:void 0;if(E.toUpperCase()===n.toUpperCase()&&!(r!=null&&r!==""&&f?.toUpperCase()!==r.toUpperCase()))for(let p of l.data){let h=Lr(p);if(h?.toUpperCase()===o){let T=p.objType||(p.kind===18?"VIEW":"TABLE"),S=lA(E,f,h),R=this.tableIdMap.get(a)?.data.get(S);if(R!==void 0)return{objId:R,objType:T,schema:f||"",name:h||i}}}}}invalidateSchema(e,n,r){let i=r?`${n}.${r}`:`${n}..`,s=`${e}|${i}`;this.tableCache.has(s)&&(this.tableCache.delete(s),this.tableIdMap.delete(s),this.onDataChange?.("table"),console.log(`[CacheStorage] Invalidated cache for ${s}`))}getDbCacheMap(){return this.dbCache}getSchemaCacheMap(){return this.schemaCache}getTableCacheMap(){return this.tableCache}getTableIdMapMap(){return this.tableIdMap}loadDbCache(e){this.dbCache=e}loadSchemaCache(e){this.schemaCache=e}loadTableCache(e){this.tableCache=e}loadTableIdMap(e){this.tableIdMap=e}};var Jc=z(require("vscode")),ho=z(require("fs"));var V8=4,fE=class{constructor(e,n){this.context=e;this.storage=n;let i=Jc.workspace.getConfiguration("netezza").get("cacheTTL",V8);this.CACHE_TTL=i*60*60*1e3,this.context.storageUri&&(this.cacheFilePath=Jc.Uri.joinPath(this.context.storageUri,"schema-cache.json").fsPath,this.ensureStorageDir())}async ensureStorageDir(){if(this.context.storageUri)try{await Jc.workspace.fs.createDirectory(this.context.storageUri)}catch{}}async initialize(){try{let e=["sqlCompletion.dbCache","sqlCompletion.schemaCache","sqlCompletion.tableCache","sqlCompletion.columnCache","sqlCompletion.tableIdMap"];for(let n of e)this.context.workspaceState.get(n)!==void 0&&await this.context.workspaceState.update(n,void 0)}catch(e){console.error("[CachePersistence] Error cleaning up legacy workspace state:",e)}if(this.cacheFilePath)try{if(ho.existsSync(this.cacheFilePath)){let e=await ho.promises.readFile(this.cacheFilePath,"utf-8"),n=JSON.parse(e),r=Date.now();if(n.dbCache){let i=new Map;for(let[s,o]of Object.entries(n.dbCache))r-o.timestamp<this.CACHE_TTL&&i.set(s,o);this.storage.loadDbCache(i)}if(n.schemaCache){let i=new Map;for(let[s,o]of Object.entries(n.schemaCache))r-o.timestamp<this.CACHE_TTL&&i.set(s,o);this.storage.loadSchemaCache(i)}if(n.tableCache){let i=new Map;for(let[s,o]of Object.entries(n.tableCache))r-o.timestamp<this.CACHE_TTL&&i.set(s,o);this.storage.loadTableCache(i)}if(n.tableIdMap){let i=new Map;for(let[s,o]of Object.entries(n.tableIdMap))(this.storage.getTableCacheMap().has(s)||r-o.timestamp<this.CACHE_TTL)&&i.set(s,{data:new Map(Object.entries(o.data)),timestamp:o.timestamp});this.storage.loadTableIdMap(i)}}}catch(e){console.error("[CachePersistence] Error loading cache from disk:",e)}}scheduleSave(e){this.saveTimeoutId&&clearTimeout(this.saveTimeoutId),this.saveTimeoutId=setTimeout(()=>this.flushSave(),2e3)}async flushSave(){if(this.saveTimeoutId=void 0,!!this.cacheFilePath)try{let e={dbCache:uE(this.storage.getDbCacheMap()),schemaCache:uE(this.storage.getSchemaCacheMap()),tableCache:uE(this.storage.getTableCacheMap()),tableIdMap:N0(this.storage.getTableIdMapMap())};await ho.promises.writeFile(this.cacheFilePath,JSON.stringify(e),"utf-8")}catch(e){console.error("[CachePersistence] Error saving cache to disk:",e)}}async clearCache(){if(this.saveTimeoutId&&(clearTimeout(this.saveTimeoutId),this.saveTimeoutId=void 0),this.storage.clearAll(),this.cacheFilePath)try{ho.existsSync(this.cacheFilePath)&&await ho.promises.unlink(this.cacheFilePath)}catch(e){console.error("[CachePersistence] Error clearing cache file:",e)}}};function qa(t){return!t.columns||!t.data||t.data.length===0?[]:t.data.map(e=>{let n={};return t.columns.forEach((r,i)=>{n[r.name]=e[i]}),n})}var EE=class{constructor(e){this.storage=e;this.columnPrefetchInProgress=new Set;this.allObjectsPrefetchTriggeredSet=new Set;this.connectionPrefetchTriggered=new Set;this.connectionPrefetchInProgress=new Set}async prefetchColumnsForSchema(e,n,r,i){let s=r?`${n}.${r}`:`${n}..`,o=`${e}|${s}`;if(this.columnPrefetchInProgress.has(o))return;let a=this.storage.getTables(e,s);if(!(!a||a.length===0)){this.columnPrefetchInProgress.add(o);try{let l=[];for(let E of a){let f=Lr(E);if(!f)continue;let p=`${n}.${r||""}.${f}`;this.storage.getColumns(e,p)||l.push(f)}if(l.length===0)return;let c=`${n}..`,u=r?`AND UPPER(O.SCHEMA) = UPPER('${r}')`:"",d=`
                SELECT 
                    O.OBJNAME AS TABLENAME,
                    C.ATTNAME,
                    C.FORMAT_TYPE,
                    C.ATTNUM,
                    COALESCE(C.DESCRIPTION, '') AS DESCRIPTION,
                    MAX(CASE WHEN K.CONTYPE = 'p' THEN 1 ELSE 0 END) AS IS_PK,
                    MAX(CASE WHEN K.CONTYPE = 'f' THEN 1 ELSE 0 END) AS IS_FK
                FROM ${c}_V_RELATION_COLUMN C
                JOIN ${c}_V_OBJECT_DATA O ON C.OBJID = O.OBJID
                LEFT JOIN ${c}_V_RELATION_KEYDATA K 
                    ON UPPER(K.RELATION) = UPPER(O.OBJNAME) 
                    AND UPPER(K.SCHEMA) = UPPER(O.SCHEMA)
                    AND UPPER(K.ATTNAME) = UPPER(C.ATTNAME)
                    AND K.CONTYPE IN ('p', 'f')
                WHERE UPPER(O.DBNAME) = UPPER('${n}')
                ${u}
                AND O.OBJTYPE IN ('TABLE', 'VIEW', 'EXTERNAL TABLE')
                GROUP BY O.OBJNAME, C.ATTNAME, C.FORMAT_TYPE, C.ATTNUM, C.DESCRIPTION
                ORDER BY O.OBJNAME, C.ATTNUM
            `;try{let E=await i(d);if(E){let f=qa(E),p=new Map;for(let h of f){let T=h.TABLENAME;p.has(T)||p.set(T,[]),p.get(T).push({ATTNAME:h.ATTNAME,FORMAT_TYPE:h.FORMAT_TYPE,label:h.ATTNAME,kind:5,detail:h.FORMAT_TYPE,documentation:h.DESCRIPTION||"",isPk:Number(h.IS_PK)===1,isFk:Number(h.IS_FK)===1})}for(let[h,T]of p){let S=`${n}.${r||""}.${h}`;this.storage.setColumns(e,S,T)}}}catch(E){console.error("[CachePrefetcher] Error fetching columns:",E)}}finally{this.columnPrefetchInProgress.delete(o)}}}async prefetchAllObjects(e,n){let r=`ALL_OBJECTS|${e}`;if(!this.allObjectsPrefetchTriggeredSet.has(r)){this.allObjectsPrefetchTriggeredSet.add(r),console.log(`[CachePrefetcher] Starting background prefetch of all objects (Connection: ${e})`);try{let s=await n(`
                SELECT OBJNAME, OBJID, SCHEMA, DBNAME, OBJTYPE, OWNER, COALESCE(DESCRIPTION, '') AS DESCRIPTION
                FROM _V_OBJECT_DATA 
                WHERE OBJTYPE IN ('TABLE', 'VIEW') 
                ORDER BY DBNAME, SCHEMA, OBJNAME
            `);if(!s)return;let o=qa(s),a=new Map;for(let l of o){let c=l.SCHEMA?`${l.DBNAME}.${l.SCHEMA}`:`${l.DBNAME}..`;a.has(c)||a.set(c,{tables:[],idMap:new Map});let u=a.get(c);u.tables.push({OBJNAME:l.OBJNAME,label:l.OBJNAME,kind:l.OBJTYPE==="VIEW"?18:6,detail:l.SCHEMA?l.OBJTYPE==="VIEW"?"View":"Table":`${l.OBJTYPE==="VIEW"?"View":"Table"} (${l.SCHEMA})`,objType:l.OBJTYPE,OBJID:l.OBJID,SCHEMA:l.SCHEMA,OWNER:l.OWNER,DESCRIPTION:l.DESCRIPTION});let d=l.SCHEMA?`${l.DBNAME}.${l.SCHEMA}.${l.OBJNAME}`:`${l.DBNAME}..${l.OBJNAME}`;u.idMap.set(d,l.OBJID)}for(let[l,c]of a)this.storage.setTables(e,l,c.tables,c.idMap);console.log(`[CachePrefetcher] Prefetched tables for ${a.size} schema(s) on ${e}`)}catch(i){console.error("[CachePrefetcher] Error in prefetchAllObjects:",i)}}}hasAllObjectsPrefetchTriggered(e){return this.allObjectsPrefetchTriggeredSet.has(`ALL_OBJECTS|${e}`)}hasConnectionPrefetchTriggered(e){return this.connectionPrefetchTriggered.has(e)}triggerConnectionPrefetch(e,n){this.connectionPrefetchTriggered.has(e)||this.connectionPrefetchInProgress.has(e)||(this.connectionPrefetchInProgress.add(e),console.log(`[CachePrefetcher] Starting eager prefetch for connection: ${e}`),this.executeConnectionPrefetch(e,n).catch(r=>console.error("[CachePrefetcher] Connection prefetch error:",r)).finally(()=>{this.connectionPrefetchInProgress.delete(e),this.connectionPrefetchTriggered.add(e),console.log(`[CachePrefetcher] Completed eager prefetch for connection: ${e}`)}))}async executeConnectionPrefetch(e,n){let r=await this.prefetchDatabases(e,n);!r||r.length===0||(await Promise.all(r.map(i=>this.prefetchSchemasForDb(e,i,n))),await this.prefetchAllTablesAndViews(e,n),await this.prefetchAllColumnsForConnection(e,n))}async prefetchDatabases(e,n){if(this.storage.getDatabases(e))return this.storage.getDatabases(e)?.map(i=>Lr(i)).filter(Boolean)||[];try{let i=await n("SELECT DATABASE FROM system.._v_database ORDER BY DATABASE");if(!i)return[];let s=qa(i),o=s.map(a=>({DATABASE:a.DATABASE,label:a.DATABASE,kind:9,detail:"Database"}));return this.storage.setDatabases(e,o),s.map(a=>a.DATABASE)}catch(r){return console.error("[CachePrefetcher] prefetchDatabases error:",r),[]}}async prefetchSchemasForDb(e,n,r){if(!this.storage.getSchemas(e,n))try{let i=`SELECT SCHEMA FROM ${n}.._V_SCHEMA ORDER BY SCHEMA`,s=await r(i);if(!s)return;let a=qa(s).filter(l=>l.SCHEMA!=null&&l.SCHEMA!=="").map(l=>({SCHEMA:l.SCHEMA,label:l.SCHEMA,kind:19,detail:`Schema in ${n}`,insertText:l.SCHEMA,sortText:l.SCHEMA,filterText:l.SCHEMA}));this.storage.setSchemas(e,n,a)}catch(i){console.error(`[CachePrefetcher] prefetchSchemasForDb error for ${n}:`,i)}}async prefetchAllTablesAndViews(e,n){try{let i=await n(`
                SELECT OBJNAME, OBJID, SCHEMA, DBNAME, OBJTYPE, OWNER, COALESCE(DESCRIPTION, '') AS DESCRIPTION
                FROM _V_OBJECT_DATA 
                WHERE OBJTYPE IN ('TABLE', 'VIEW', 'EXTERNAL TABLE')
                ORDER BY DBNAME, SCHEMA, OBJNAME
            `);if(!i)return;let s=qa(i),o=new Map;for(let a of s){let l=a.SCHEMA?`${a.DBNAME}.${a.SCHEMA}`:`${a.DBNAME}..`;o.has(l)||o.set(l,{tables:[],idMap:new Map});let c=o.get(l);c.tables.push({OBJNAME:a.OBJNAME,label:a.OBJNAME,kind:a.OBJTYPE==="VIEW"?18:6,detail:a.SCHEMA?a.OBJTYPE:`${a.OBJTYPE} (${a.SCHEMA})`,objType:a.OBJTYPE,OWNER:a.OWNER,DESCRIPTION:a.DESCRIPTION});let u=a.SCHEMA?`${a.DBNAME}.${a.SCHEMA}.${a.OBJNAME}`:`${a.DBNAME}..${a.OBJNAME}`;c.idMap.set(u,a.OBJID)}for(let[a,l]of o)this.storage.getTables(e,a)||this.storage.setTables(e,a,l.tables,l.idMap);console.log(`[CachePrefetcher] Prefetched tables/views for ${o.size} schema(s)`)}catch(r){console.error("[CachePrefetcher] prefetchAllTablesAndViews error:",r)}}async prefetchAllColumnsForConnection(e,n){try{let r=`${e}|`,i=[];for(let[u,d]of this.storage.tableCache){if(!u.startsWith(r))continue;let E=u.split("|");if(E.length<2)continue;let p=E[1].split("."),h=p[0],T=p.length>1?p[1]:"";for(let S of d.data){let I=Lr(S);I&&i.push({schema:T,name:I,db:h})}}if(i.length===0)return;let s=0,o=Date.now(),a=new Map;for(let u of i)a.has(u.db)||a.set(u.db,[]),a.get(u.db).push(u);let l=Array.from(a.entries()).map(async([u,d])=>{let E=`
                    SELECT 
                        O.OBJNAME AS TABLENAME, 
                        O.SCHEMA, 
                        O.DBNAME, 
                        C.ATTNAME, 
                        C.FORMAT_TYPE, 
                        C.ATTNUM,
                        COALESCE(C.DESCRIPTION, '') AS DESCRIPTION,
                        MAX(CASE WHEN K.CONTYPE = 'p' THEN 1 ELSE 0 END) AS IS_PK,
                        MAX(CASE WHEN K.CONTYPE = 'f' THEN 1 ELSE 0 END) AS IS_FK
                    FROM ${u}.._V_RELATION_COLUMN C
                    JOIN ${u}.._V_OBJECT_DATA O ON C.OBJID = O.OBJID
                    LEFT JOIN ${u}.._V_RELATION_KEYDATA K 
                        ON UPPER(K.RELATION) = UPPER(O.OBJNAME) 
                        AND UPPER(K.SCHEMA) = UPPER(O.SCHEMA)
                        AND UPPER(K.ATTNAME) = UPPER(C.ATTNAME)
                        AND K.CONTYPE IN ('p', 'f')
                    WHERE O.DBNAME = '${u}' 
                    AND O.OBJTYPE IN ('TABLE', 'VIEW', 'EXTERNAL TABLE')
                    GROUP BY O.OBJNAME, O.SCHEMA, O.DBNAME, C.ATTNAME, C.FORMAT_TYPE, C.ATTNUM, C.DESCRIPTION
                    ORDER BY O.SCHEMA, O.OBJNAME, C.ATTNUM
                `;try{let f=Date.now(),p=await n(E),h=Date.now()-f;if(p){let T=Date.now(),S=qa(p),I=Date.now()-T,R=new Map;for(let m of S){let A=`${m.DBNAME}.${m.SCHEMA||""}.${m.TABLENAME}`;R.has(A)||R.set(A,[]),R.get(A).push({ATTNAME:m.ATTNAME,FORMAT_TYPE:m.FORMAT_TYPE,label:m.ATTNAME,kind:5,detail:m.FORMAT_TYPE,documentation:m.DESCRIPTION||"",isPk:Number(m.IS_PK)===1,isFk:Number(m.IS_FK)===1})}for(let[m,A]of R)this.storage.getColumns(e,m)||(this.storage.setColumns(e,m,A),s++);console.log(`[CachePrefetcher] DB ${u}: ${d.length} tables (expected), ${S.length} columns (total fetched) | query=${h}ms, parse=${I}ms`)}}catch(f){console.error(`[CachePrefetcher] Error fetching columns for DB ${u}:`,f)}});await Promise.all(l);let c=Date.now()-o;console.log(`[CachePrefetcher] Prefetched columns for ${s} tables/views in ${c}ms`)}catch(r){console.error("[CachePrefetcher] prefetchAllColumnsForConnection error:",r)}}};function C0(t,e,n){let r=[],i=e.toLowerCase();for(let[s,o]of t.tableCache){if(!aA(s,n))continue;let a=s.split("|");if(a.length<2)continue;let c=a[1].split("."),u=c[0],d=c.length>1?c[1]:void 0;for(let E of o.data){let f=Lr(E);if(f&&f.toLowerCase().includes(i)){let p=E.objType||(E.kind===18?"VIEW":"TABLE");r.push({name:f,type:p,database:u,schema:d||(E.detail&&E.detail.includes("(")?E.detail.match(/\((.*?)\)/)?.[1]:void 0)})}}}for(let[s,o]of t.columnCache){if(!aA(s,n))continue;let a=s.split("|");if(a.length<2)continue;let c=a[1].split("."),u=c[0],d=c[1],E=c[2];for(let f of o.data){let p=Lr(f);p&&p.toLowerCase().includes(i)&&r.push({name:p,type:"COLUMN",database:u,schema:d,parent:E})}}return r}var hE=class{constructor(e){this.storage=new dE,this.persistence=new fE(e,this.storage),this.prefetcher=new EE(this.storage),this.storage.setOnDataChange(n=>{this.persistence.scheduleSave(n)})}async initialize(){return this.persistence.initialize()}scheduleSave(e){this.persistence.scheduleSave(e)}async flushSave(){return this.persistence.flushSave()}async clearCache(){return this.persistence.clearCache()}getDatabases(e){return this.storage.getDatabases(e)}setDatabases(e,n){this.storage.setDatabases(e,n)}getSchemas(e,n){return this.storage.getSchemas(e,n)}setSchemas(e,n,r){this.storage.setSchemas(e,n,r)}getTables(e,n){return this.storage.getTables(e,n)}getTablesAllSchemas(e,n){return this.storage.getTablesAllSchemas(e,n)}setTables(e,n,r,i){this.storage.setTables(e,n,r,i)}getObjectsWithSchema(e,n){return this.storage.getObjectsWithSchema(e,n)}getColumns(e,n){return this.storage.getColumns(e,n)}getColumnsAnySchema(e,n,r){return this.storage.getColumnsAnySchema(e,n,r)}setColumns(e,n,r){this.storage.setColumns(e,n,r)}findTableId(e,n){return this.storage.findTableId(e,n)}getTypeGroups(e,n){return this.storage.getTypeGroups(e,n)}setTypeGroups(e,n,r){this.storage.setTypeGroups(e,n,r)}findObjectWithType(e,n,r,i){return this.storage.findObjectWithType(e,n,r,i)}invalidateSchema(e,n,r){this.storage.invalidateSchema(e,n,r)}search(e,n){return C0(this.storage,e,n)}async prefetchColumnsForSchema(e,n,r,i){return this.prefetcher.prefetchColumnsForSchema(e,n,r,i)}async prefetchAllObjects(e,n){return this.prefetcher.prefetchAllObjects(e,n)}hasAllObjectsPrefetchTriggered(e){return this.prefetcher.hasAllObjectsPrefetchTriggered(e)}hasConnectionPrefetchTriggered(e){return this.prefetcher.hasConnectionPrefetchTriggered(e)}triggerConnectionPrefetch(e,n){this.prefetcher.triggerConnectionPrefetch(e,n)}get schemaCache(){return this.storage.schemaCache}get tableCache(){return this.storage.tableCache}get columnCache(){return this.storage.columnCache}get tableIdMap(){return this.storage.tableIdMap}get typeGroupCache(){return this.storage.typeGroupCache}};var er=z(require("vscode"));var Ht=z(require("vscode"));function y0(t){switch(t){case"error":return Ht.DiagnosticSeverity.Error;case"warning":return Ht.DiagnosticSeverity.Warning;case"information":return Ht.DiagnosticSeverity.Information;case"hint":return Ht.DiagnosticSeverity.Hint;case"off":return null;default:return Ht.DiagnosticSeverity.Warning}}function cA(t,e){let n=!1,r=!1,i=!1,s=!1;for(let o=0;o<e&&o<t.length;o++){let a=t[o],l=o+1<t.length?t[o+1]:"";i?a===`
`&&(i=!1):s?a==="*"&&l==="/"&&(s=!1,o++):n?a==="'"&&(n=!1):r?a==='"'&&(r=!1):a==="-"&&l==="-"?i=!0:a==="/"&&l==="*"?s=!0:a==="'"?n=!0:a==='"'&&(r=!0)}return n||r||i||s}function Kn(t,e){let n=[],r,i=new RegExp(e.source,e.flags.includes("g")?e.flags:e.flags+"g");for(;(r=i.exec(t))!==null;)cA(t,r.index)||n.push(r);return n}var q8={id:"NZ001",name:"Select Star",description:"Avoid using SELECT * - specify explicit column names for better performance and maintainability",defaultSeverity:Ht.DiagnosticSeverity.Warning,check(t){let e=[],r=Kn(t,/\bSELECT\s+\*/gi);for(let i of r){let s=i[0].indexOf("*");e.push({ruleId:this.id,message:`${this.id}: ${this.description}`,severity:this.defaultSeverity,startOffset:i.index+s,endOffset:i.index+s+1})}return e}},X8={id:"NZ002",name:"Delete Without Where",description:"DELETE statement without WHERE clause will delete all rows",defaultSeverity:Ht.DiagnosticSeverity.Error,check(t){let e=[],r=Kn(t,/\bDELETE\s+FROM\s+[\w."]+/gi);for(let i of r){let s=t.substring(i.index+i[0].length),o=s.indexOf(";"),a=o>=0?s.substring(0,o):s;/\bWHERE\b/i.test(a)||e.push({ruleId:this.id,message:`${this.id}: ${this.description}`,severity:this.defaultSeverity,startOffset:i.index,endOffset:i.index+6})}return e}},z8={id:"NZ003",name:"Update Without Where",description:"UPDATE statement without WHERE clause will update all rows",defaultSeverity:Ht.DiagnosticSeverity.Error,check(t){let e=[],r=Kn(t,/\bUPDATE\s+[\w."]+\s+SET\b/gi);for(let i of r){let s=t.substring(i.index+i[0].length),o=s.indexOf(";"),a=o>=0?s.substring(0,o):s;/\bWHERE\b/i.test(a)||e.push({ruleId:this.id,message:`${this.id}: ${this.description}`,severity:this.defaultSeverity,startOffset:i.index,endOffset:i.index+6})}return e}},j8={id:"NZ004",name:"Cross Join",description:"CROSS JOIN produces a Cartesian product - verify this is intentional",defaultSeverity:Ht.DiagnosticSeverity.Warning,check(t){let e=[],r=Kn(t,/\bCROSS\s+JOIN\b/gi);for(let i of r)e.push({ruleId:this.id,message:`${this.id}: ${this.description}`,severity:this.defaultSeverity,startOffset:i.index,endOffset:i.index+i[0].length});return e}},K8={id:"NZ005",name:"Leading Wildcard Like",description:"LIKE pattern with leading wildcard ('%...') prevents index usage",defaultSeverity:Ht.DiagnosticSeverity.Hint,check(t){let e=[],r=Kn(t,/\bLIKE\s+'%/gi);for(let i of r)e.push({ruleId:this.id,message:`${this.id}: ${this.description}`,severity:this.defaultSeverity,startOffset:i.index,endOffset:i.index+i[0].length});return e}},J8={id:"NZ006",name:"Order By Without Limit",description:"ORDER BY without LIMIT/FETCH may cause performance issues on large datasets",defaultSeverity:Ht.DiagnosticSeverity.Information,check(t){let e=[],r=Kn(t,/\bORDER\s+BY\b/gi);for(let i of r){let s=t.substring(i.index+i[0].length),o=s.indexOf(";"),a=o>=0?s.substring(0,o):s;if(!/\b(LIMIT|FETCH|TOP)\b/i.test(a)){let l=t.substring(0,i.index);/\bTOP\s+\d+\b/i.test(l)||e.push({ruleId:this.id,message:`${this.id}: ${this.description}`,severity:this.defaultSeverity,startOffset:i.index,endOffset:i.index+i[0].length})}}return e}},Q8={id:"NZ007",name:"Inconsistent Keyword Case",description:"SQL keywords have inconsistent casing - consider using consistent UPPER or lower case",defaultSeverity:Ht.DiagnosticSeverity.Warning,check(t){let e=[],n=["SELECT","FROM","WHERE","JOIN","LEFT","RIGHT","INNER","OUTER","ON","AND","OR","INSERT","INTO","UPDATE","DELETE","CREATE","DROP","ALTER","TABLE","VIEW","INDEX","ORDER","BY","GROUP","HAVING","UNION","ALL","DISTINCT","AS","SET","VALUES","NULL","NOT","IN","BETWEEN","LIKE","IS","EXISTS","CASE","WHEN","THEN","ELSE","END","LIMIT","OFFSET"],r=0,i=0,s=[],o=new Set;for(let c of n){let u=new RegExp(`\\b${c}\\b`,"gi"),d=Kn(t,u);for(let E of d){if(o.has(E.index))continue;o.add(E.index);let f=E[0],p;f===f.toUpperCase()?(r++,p="UPPER"):f===f.toLowerCase()?(i++,p="lower"):p="Mixed",s.push({keyword:f,index:E.index,type:p})}}let a=r>=i,l=a?"UPPER":"lower";for(let c of s)c.type==="Mixed"?e.push({ruleId:this.id,message:`${this.id}: Keyword '${c.keyword}' has mixed casing (expected ${a?"UPPERCASE":"lowercase"})`,severity:this.defaultSeverity,startOffset:c.index,endOffset:c.index+c.keyword.length}):c.type!==l&&e.push({ruleId:this.id,message:`${this.id}: Keyword '${c.keyword}' should be ${a?"UPPERCASE":"lowercase"}`,severity:this.defaultSeverity,startOffset:c.index,endOffset:c.index+c.keyword.length});return e}},Z8={id:"NZ008",name:"Truncate Table",description:"TRUNCATE removes all data and cannot be rolled back - use with caution",defaultSeverity:Ht.DiagnosticSeverity.Warning,check(t){let e=[],r=Kn(t,/\bTRUNCATE\s+(TABLE\s+)?[\w."]+/gi);for(let i of r)e.push({ruleId:this.id,message:`${this.id}: ${this.description}`,severity:this.defaultSeverity,startOffset:i.index,endOffset:i.index+8});return e}},eJ={id:"NZ009",name:"Or In Where Clause",description:"Multiple OR conditions may prevent index usage - consider UNION for better performance",defaultSeverity:Ht.DiagnosticSeverity.Hint,check(t){let e=[],r=Kn(t,/\bWHERE\b/gi);for(let i of r){let s=t.substring(i.index),o=s.search(/\b(GROUP\s+BY|ORDER\s+BY|HAVING|LIMIT|UNION|;)/i),a=o>=0?s.substring(0,o):s,l=Kn(a,/\bOR\b/gi);if(l.length>=2){let c=l[0];e.push({ruleId:this.id,message:`${this.id}: ${this.description} (${l.length} OR conditions found)`,severity:this.defaultSeverity,startOffset:i.index+c.index,endOffset:i.index+c.index+2})}}return e}},tJ={id:"NZ010",name:"Missing Table Alias",description:"Consider using table aliases in JOINs for better readability",defaultSeverity:Ht.DiagnosticSeverity.Information,check(t){let e=[],r=Kn(t,/\bJOIN\s+([\w."]+)\s+ON\b/gi);for(let i of r)e.push({ruleId:this.id,message:`${this.id}: Table '${i[1]}' in JOIN has no alias - ${this.description}`,severity:this.defaultSeverity,startOffset:i.index,endOffset:i.index+i[0].length});return e}},nJ={id:"NZ011",name:"CTAS Missing Distribution",description:"CREATE TABLE AS SELECT should specify explicit data distribution",defaultSeverity:Ht.DiagnosticSeverity.Warning,check(t){let e=[],r=Kn(t,/\bCREATE\s+TABLE\s+(?:(?:IF\s+NOT\s+EXISTS\s+)?[\w."]+\s+)?AS\s+(?:\(\s*)?SELECT\b/gi);for(let i of r){let s=t.length;for(let u=i.index;u<t.length;u++)if(t[u]===";"&&!cA(t,u)){s=u;break}let o=t.substring(i.index,s),l=/\bDISTRIBUTE\s+ON\b/i.exec(o),c=!1;l&&(cA(t,i.index+l.index)||(c=!0)),c||e.push({ruleId:this.id,message:`${this.id}: ${this.description} - Add 'DISTRIBUTE ON (...)' or 'DISTRIBUTE ON RANDOM'`,severity:this.defaultSeverity,startOffset:i.index,endOffset:i.index+i[0].length})}return e}},rJ={id:"NZ012",name:"Update Alias With AS",description:'Netezza UPDATE statements do not support "AS" for table aliases. Use "UPDATE table alias" instead.',defaultSeverity:Ht.DiagnosticSeverity.Error,check(t){let e=[],r=Kn(t,/\bUPDATE\s+[\w."]+\s+AS\s+[\w."]+/gi);for(let i of r){let s=/\bAS\b/i.exec(i[0]);s&&e.push({ruleId:this.id,message:`${this.id}: ${this.description}`,severity:this.defaultSeverity,startOffset:i.index+s.index,endOffset:i.index+s.index+s[0].length})}return e}},iJ={id:"NZ013",name:"Prefer Union All",description:"UNION performs a distinct operation which is slower than UNION ALL. Use UNION ALL if duplicates are not an issue.",defaultSeverity:Ht.DiagnosticSeverity.Information,check(t){let e=[],r=Kn(t,/\bUNION\b(?!\s+ALL\b)/gi);for(let i of r)e.push({ruleId:this.id,message:`${this.id}: ${this.description}`,severity:this.defaultSeverity,startOffset:i.index,endOffset:i.index+i[0].length});return e}},b0=[q8,X8,z8,j8,K8,J8,Q8,Z8,eJ,tJ,nJ,rJ,iJ];var dA=class{constructor(){this.disposables=[];this.diagnosticCollection=er.languages.createDiagnosticCollection("netezza-sql-linter")}activate(e){e.subscriptions.push(this.diagnosticCollection),this.disposables.push(er.workspace.onDidOpenTextDocument(n=>{this.shouldLint(n)&&this.lintDocument(n)})),this.disposables.push(er.workspace.onDidChangeTextDocument(n=>{this.shouldLint(n.document)&&this.lintDocument(n.document)})),this.disposables.push(er.workspace.onDidCloseTextDocument(n=>{this.diagnosticCollection.delete(n.uri)})),this.disposables.push(er.workspace.onDidChangeConfiguration(n=>{n.affectsConfiguration("netezza.linter")&&this.lintAllOpenDocuments()})),e.subscriptions.push(...this.disposables),this.lintAllOpenDocuments()}shouldLint(e){return e.languageId==="sql"}getConfig(){let e=er.workspace.getConfiguration("netezza.linter");return{enabled:e.get("enabled",!0),rules:e.get("rules",{})}}lintAllOpenDocuments(){for(let e of er.workspace.textDocuments)this.shouldLint(e)&&this.lintDocument(e)}lintDocument(e){let n=this.getConfig();if(!n.enabled){this.diagnosticCollection.delete(e.uri);return}let r=e.getText(),i=this.lintSql(r,n.rules),s=this.issuesToDiagnostics(e,i);this.diagnosticCollection.set(e.uri,s)}lintSql(e,n={}){let r=[];for(let i of b0){let s=n[i.id],o=s!==void 0?y0(s):i.defaultSeverity;if(o===null)continue;let a=i.check(e);for(let l of a)r.push({...l,severity:o})}return r}issuesToDiagnostics(e,n){return n.map(r=>{let i=e.positionAt(r.startOffset),s=e.positionAt(r.endOffset),o=new er.Range(i,s),a=new er.Diagnostic(o,r.message,r.severity);return a.source="Netezza SQL Linter",a.code=r.ruleId,a})}dispose(){this.diagnosticCollection.dispose();for(let e of this.disposables)e.dispose()}},uA;function sJ(){return uA||(uA=new dA),uA}function w0(t){let e=sJ();return e.activate(t),e}var po=z(require("vscode"));Eo();var Qc=class{static{this.providedCodeActionKinds=[po.CodeActionKind.QuickFix]}provideCodeActions(e,n,r,i){let s=[];for(let o of r.diagnostics)if(o.code==="NZ011"){let a=this.createDistributeOnRandomFix(e,o);a&&s.push(a)}return s}createDistributeOnRandomFix(e,n){let r=new po.CodeAction("Add DISTRIBUTE ON RANDOM",po.CodeActionKind.QuickFix);r.diagnostics=[n],r.isPreferred=!0;let i=e.offsetAt(n.range.start),s=e.getText(),o=Fn.getStatementAtPosition(s,i);if(o)return r.edit=new po.WorkspaceEdit,r.edit.insert(e.uri,e.positionAt(o.end)," DISTRIBUTE ON RANDOM"),r}};var He=z(require("vscode"));function L0(t){switch(t){case"sql":return{type:"sql",query:"",connection:"default"};case"python":return{type:"python",script:""};case"container":return{type:"container",nodes:[],connections:[]};case"export":return{type:"export",format:"csv",outputPath:""};case"import":return{type:"import",format:"csv",inputPath:"",targetTable:""};case"variable":return{type:"variable",variableName:"",source:"prompt",promptMessage:"Enter value"}}}function pE(){return"node-"+Date.now()+"-"+Math.random().toString(36).substr(2,9)}function TE(){return"conn-"+Date.now()+"-"+Math.random().toString(36).substr(2,9)}var fA=z(require("fs"));var Zc=class{validateProject(e){let n=[],r=[];e.name||n.push("Project name is required"),e.version||n.push("Project version is required"),Array.isArray(e.nodes)||n.push("Nodes must be an array"),Array.isArray(e.connections)||n.push("Connections must be an array");let i=this.validateNodes(e.nodes||[]);n.push(...i.errors),r.push(...i.warnings);let s=new Set((e.nodes||[]).map(l=>l.id)),o=this.validateConnections(e.connections||[],s);n.push(...o.errors),r.push(...o.warnings);let a=this.detectCycles(e);return n.push(...a),{isValid:n.length===0,errors:n,warnings:r}}validateNodes(e){let n=[],r=[],i=new Set;for(let s of e){if(!s.id){n.push("Node missing ID");continue}i.has(s.id)?n.push(`Duplicate node ID: ${s.id}`):i.add(s.id),s.type||n.push(`Node ${s.id} missing type`),s.name||r.push(`Node ${s.id} has no name`),(!s.position||typeof s.position.x!="number"||typeof s.position.y!="number")&&n.push(`Node ${s.id} has invalid position`),s.config||n.push(`Node ${s.id} has no configuration`)}return{errors:n,warnings:r}}validateConnections(e,n){let r=[],i=[],s=new Set;for(let o of e){if(!o.id){r.push("Connection missing ID");continue}(!o.from||!n.has(o.from))&&r.push(`Connection ${o.id} has invalid 'from' node: ${o.from}`),(!o.to||!n.has(o.to))&&r.push(`Connection ${o.id} has invalid 'to' node: ${o.to}`),o.from===o.to&&r.push(`Connection ${o.id} cannot connect node to itself`);let a=`${o.from}->${o.to}`;s.has(a)?i.push(`Duplicate connection from ${o.from} to ${o.to}`):s.add(a)}return{errors:r,warnings:i}}detectCycles(e){let n=[],r=new Set,i=new Set,s=new Map;for(let a of e.nodes||[])s.set(a.id,[]);for(let a of e.connections||[])s.get(a.from)?.push(a.to);let o=a=>{r.add(a),i.add(a);for(let l of s.get(a)||[])if(r.has(l)){if(i.has(l))return!0}else if(o(l))return!0;return i.delete(a),!1};for(let a of e.nodes||[])if(!r.has(a.id)&&o(a.id)){n.push("Project contains circular dependencies");break}return n}getTopologicalOrder(e){let n=new Map,r=new Map;for(let o of e.nodes)n.set(o.id,0),r.set(o.id,[]);for(let o of e.connections)r.get(o.from)?.push(o.to),n.set(o.to,(n.get(o.to)||0)+1);let i=[];for(let[o,a]of n)a===0&&i.push(o);let s=[];for(;i.length>0;){let o=i.shift();s.push(o);for(let a of r.get(o)||[]){let l=(n.get(a)||1)-1;n.set(a,l),l===0&&i.push(a)}}return s.length!==e.nodes.length?null:s}},$De=new Zc;var Cs=class t{constructor(e){this.currentProject=null;this.projectPath=null;this.isDirty=!1;this.validator=e||new Zc}static getInstance(){return t.instance||(t.instance=new t),t.instance}static resetInstance(){t.instance=void 0}createProject(e){return this.currentProject={name:e,version:"1.0.0",description:"",variables:{},nodes:[],connections:[]},this.projectPath=null,this.isDirty=!0,this.currentProject}async loadProject(e){let n=await fA.promises.readFile(e,"utf-8"),r=JSON.parse(n),i=this.validateProject(r);if(i.length>0)throw new Error(`Invalid project: ${i.join(", ")}`);return this.currentProject=r,this.projectPath=e,this.isDirty=!1,this.currentProject}async saveProject(e){let n=e||this.projectPath;if(!n)throw new Error("No file path specified");if(!this.currentProject)throw new Error("No project to save");let r=JSON.stringify(this.currentProject,null,2);await fA.promises.writeFile(n,r,"utf-8"),this.projectPath=n,this.isDirty=!1}validateProject(e){return this.validator.validateProject(e).errors}validateProjectDetailed(e){return this.validator.validateProject(e)}addNode(e){if(!this.currentProject)throw new Error("No project loaded");e.id||(e.id=pE()),this.currentProject.nodes.push(e),this.isDirty=!0}updateNode(e,n){if(!this.currentProject)throw new Error("No project loaded");let r=this.currentProject.nodes.findIndex(i=>i.id===e);if(r===-1)throw new Error(`Node not found: ${e}`);this.currentProject.nodes[r]={...this.currentProject.nodes[r],...n},this.isDirty=!0}removeNode(e){if(!this.currentProject)throw new Error("No project loaded");this.currentProject.nodes=this.currentProject.nodes.filter(n=>n.id!==e),this.currentProject.connections=this.currentProject.connections.filter(n=>n.from!==e&&n.to!==e),this.isDirty=!0}addConnection(e){if(!this.currentProject)throw new Error("No project loaded");if(e.id||(e.id=TE()),this.currentProject.connections.some(i=>i.from===e.from&&i.to===e.to))throw new Error("Connection already exists");if(this.currentProject.connections.push(e),this.validator.detectCycles(this.currentProject).length>0)throw this.currentProject.connections.pop(),new Error("Connection would create a cycle");this.isDirty=!0}removeConnection(e){if(!this.currentProject)throw new Error("No project loaded");this.currentProject.connections=this.currentProject.connections.filter(n=>n.id!==e),this.isDirty=!0}getCurrentProject(){return this.currentProject}getProjectPath(){return this.projectPath}hasUnsavedChanges(){return this.isDirty}getNode(e){return this.currentProject?.nodes.find(n=>n.id===e)}getOutgoingConnections(e){return this.currentProject?.connections.filter(n=>n.from===e)||[]}getIncomingConnections(e){return this.currentProject?.connections.filter(n=>n.to===e)||[]}setProject(e){this.currentProject=e,this.isDirty=!0}markDirty(){this.isDirty=!0}getTopologicalOrder(){return this.currentProject?this.validator.getTopologicalOrder(this.currentProject):null}};function D0(t,e,n){return{nodeId:t,status:"success",startTime:e,endTime:new Date,output:n?.output,rowsAffected:n?.rowsAffected}}function P0(t,e,n){return{nodeId:t,status:"error",startTime:e,endTime:new Date,error:n instanceof Error?n.message:n}}function RE(t){let e=new Date;return{nodeId:t,status:"skipped",startTime:e,endTime:e}}var SE=class{constructor(e){this.startTime=new Date,this.result={nodeId:e,startTime:this.startTime}}success(){return this.result.status="success",this}error(e){return this.result.status="error",this.result.error=e instanceof Error?e.message:e,this}skipped(){return this.result.status="skipped",this}withOutput(e){return this.result.output=e,this}withRowsAffected(e){return this.result.rowsAffected=e,this}build(){return{nodeId:this.result.nodeId,status:this.result.status||"pending",startTime:this.startTime,endTime:new Date,error:this.result.error,output:this.result.output,rowsAffected:this.result.rowsAffected}}};var AE=class{constructor(){this.executors=new Map}registerExecutor(e,n){this.executors.set(e,n)}getExecutor(e){return this.executors.get(e)}onStatusChange(e){this.statusCallback=e}async execute(e,n){let r={projectName:e.name,startTime:new Date,status:"running",nodeResults:new Map};for(let i of e.nodes)this.statusCallback?.(i.id,"pending");try{n.onProgress?.(`Starting ETL project: ${e.name}`),n.onProgress?.(`Found ${e.nodes.length} tasks`),await this.executeDynamic(e,n,r);let i=Array.from(r.nodeResults.values()).some(o=>o.status==="error");r.status=i?"failed":"completed",r.endTime=new Date;let s=r.status==="completed"?"completed successfully":"completed with errors";n.onProgress?.(`ETL project ${s}`)}catch(i){r.status="failed",r.endTime=new Date,n.onProgress?.(`ETL project failed: ${String(i)}`)}return r}async executeDynamic(e,n,r){let i=new Set,s=[],o=new Set(e.connections.map(a=>a.to));for(let a of e.nodes)o.has(a.id)||s.push(a.id);for(;s.length>0;){if(n.cancellationToken?.isCancellationRequested){r.status="cancelled",r.endTime=new Date;for(let d of e.nodes)i.has(d.id)||(r.nodeResults.set(d.id,RE(d.id)),this.statusCallback?.(d.id,"skipped"));return}let a=s.shift();if(i.has(a))continue;let l=e.nodes.find(d=>d.id===a);if(!l)continue;let c=await this.executeNode(l,n);r.nodeResults.set(a,c),i.add(a),c.output!==void 0&&n.nodeOutputs.set(a,c.output);let u=e.connections.filter(d=>d.from===a);for(let d of u){let E=d.connectionType||"success";c.status==="success"&&E==="success"||c.status==="error"&&E==="failure"?!i.has(d.to)&&!s.includes(d.to)&&s.push(d.to):i.has(d.to)||!e.connections.some(h=>{if(h.to!==d.to||h.id===d.id)return!1;let T=r.nodeResults.get(h.from);if(!T)return!0;let S=h.connectionType||"success";return T.status==="success"&&S==="success"||T.status==="error"&&S==="failure"})&&!s.includes(d.to)&&(r.nodeResults.set(d.to,RE(d.to)),this.statusCallback?.(d.to,"skipped"),i.add(d.to))}}for(let a of e.nodes)i.has(a.id)||(r.nodeResults.set(a.id,RE(a.id)),this.statusCallback?.(a.id,"skipped"))}async executeNode(e,n){this.statusCallback?.(e.id,"running"),n.onProgress?.(`Running task: ${e.name}`);let r=this.executors.get(e.type);if(!r){let i={nodeId:e.id,status:"error",startTime:new Date,endTime:new Date,error:`No executor registered for node type: ${e.type}`};return this.statusCallback?.(e.id,"error",i.error),i}try{let i=await r.execute(e,n);return this.statusCallback?.(e.id,i.status,i.error),i.status==="success"&&(n.onProgress?.(`Task ${e.name} completed successfully`),i.rowsAffected!==void 0&&n.onProgress?.(`  Rows affected: ${i.rowsAffected}`)),i}catch(i){let s={nodeId:e.id,status:"error",startTime:new Date,endTime:new Date,error:String(i)};return this.statusCallback?.(e.id,"error",s.error),s}}getPreviousNodeOutput(e,n){return e.nodeOutputs.get(n)}};var eu=class{resolve(e,n){if(!e||!n||Object.keys(n).length===0)return e;let r=e;for(let[i,s]of Object.entries(n)){let o=new RegExp(`\\$\\{${this.escapeRegex(i)}\\}`,"g");r=r.replace(o,s)}return r}resolveAll(e,n){return e.map(r=>this.resolve(r,n))}escapeRegex(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}},ePe=new eu;var Jn=class{constructor(e){this.variableResolver=e||new eu}getConfig(e){return e.config}resolveVariables(e,n){return this.variableResolver.resolve(e,n.variables)}createSuccess(e,n,r){return D0(e,n,r)}createError(e,n,r){return P0(e,n,r)}resultBuilder(e){return new SE(e)}reportProgress(e,n){e.onProgress?.(n)}isCancelled(e){return e.cancellationToken?.isCancellationRequested??!1}validateRequired(e,n,r,i){if(r==null||r==="")return this.createError(e,n,`${i} is required`)}async safeExecute(e,n,r){try{return await r()}catch(i){return this.createError(e,n,i instanceof Error?i:String(i))}}};var EA=class{async createConnection(e){let n=On(),r=new n({host:e.host,port:e.port||5480,database:e.database,user:e.user,password:e.password});return await r.connect(),r}},mE=class extends Jn{constructor(e,n){super(e),this.connectionFactory=n||new EA}async execute(e,n){let r=this.getConfig(e),i=new Date,s=this.validateRequired(e.id,i,r.query?.trim(),"SQL query");return s||this.safeExecute(e.id,i,async()=>{let o=this.resolveVariables(r.query,n);if(this.reportProgress(n,`Executing SQL: ${o.substring(0,100)}${o.length>100?"...":""}`),!n.connectionDetails)return this.createError(e.id,i,"No connection details available in context");let a=null;try{a=await this.connectionFactory.createConnection(n.connectionDetails);let l=await this.executeQuery(a,o,r.timeout);return this.createSuccess(e.id,i,{rowsAffected:l.rows.length,output:l})}finally{if(a)try{await a.close()}catch{}}})}async executeQuery(e,n,r){let i=e.createCommand(n);r&&(i.commandTimeout=r);let s=await i.executeReader(),o=[];for(let l=0;l<s.fieldCount;l++)o.push(s.getName(l));let a=[];for(;await s.read();){let l=[];for(let c=0;c<s.fieldCount;c++)l.push(s.getValue(c));a.push(l)}return s.close&&await s.close(),{columns:o,rows:a}}};var x0=require("child_process"),tu=z(require("fs")),IE=z(require("path")),v0=z(require("os"));var hA=class{async run(e,n,r,i){return new Promise(s=>{let o=(0,x0.spawn)(e,n,{env:r,shell:!0}),a="",l="";o.stdout?.on("data",c=>{a+=c.toString()}),o.stderr?.on("data",c=>{l+=c.toString()}),o.on("close",c=>{s({exitCode:c??1,stdout:a.trim(),stderr:l.trim()})}),o.on("error",c=>{s({exitCode:1,stdout:"",stderr:`Failed to start Python: ${c.message}`})}),i&&i>0&&setTimeout(()=>{o.kill(),s({exitCode:1,stdout:a.trim(),stderr:`Execution timed out after ${i} seconds`})},i*1e3)})}},pA=class{find(){return process.platform==="win32"?"py":"python3"}},gE=class extends Jn{constructor(e,n,r){super(e),this.runner=n||new hA,this.interpreterFinder=r||new pA}async execute(e,n){let r=this.getConfig(e),i=new Date;return!r.script&&!r.scriptPath?this.createError(e.id,i,"Python script or script path is required"):this.safeExecute(e.id,i,async()=>{let s=r.interpreter||this.interpreterFinder.find();this.reportProgress(n,`Using Python interpreter: ${s}`);let{scriptPath:o,tempScript:a}=await this.prepareScript(r,n);try{this.reportProgress(n,`Executing Python script: ${IE.basename(o)}`);let l=[o,...r.arguments||[]],c=this.buildEnvironment(n.variables),u=await this.runWithProgress(s,l,c,n,r.timeout);return u.exitCode===0?this.createSuccess(e.id,i,{output:u.stdout}):this.resultBuilder(e.id).error(u.stderr||`Python exited with code ${u.exitCode}`).withOutput(u.stdout).build()}finally{a&&await this.cleanupTempScript(o)}})}async prepareScript(e,n){if(e.scriptPath){let s=this.resolveVariables(e.scriptPath,n);if(!tu.existsSync(s))throw new Error(`Script file not found: ${s}`);return{scriptPath:s,tempScript:!1}}let r=this.resolveVariables(e.script,n),i=IE.join(v0.tmpdir(),`etl_script_${Date.now()}.py`);return await tu.promises.writeFile(i,r,"utf-8"),{scriptPath:i,tempScript:!0}}buildEnvironment(e){return{...process.env,...Object.fromEntries(Object.entries(e).map(([n,r])=>[`ETL_VAR_${n.toUpperCase()}`,r]))}}async runWithProgress(e,n,r,i,s){let o=await this.runner.run(e,n,r,s);if(o.stdout)for(let a of o.stdout.split(`
`).slice(0,10))a.trim()&&this.reportProgress(i,`[Python] ${a.trim()}`);if(o.stderr)for(let a of o.stderr.split(`
`).slice(0,5))a.trim()&&this.reportProgress(i,`[Python ERROR] ${a.trim()}`);return o}async cleanupTempScript(e){try{await tu.promises.unlink(e)}catch{}}};SA();yi();var jC=class{constructor(){this.format="csv"}async export(e,n,r,i,s,o){try{return await TA(e,n,r,i,void 0,o),{success:!0}}catch(a){return{success:!1,message:a instanceof Error?a.message:String(a)}}}},KC=class{constructor(){this.format="xlsb"}async export(e,n,r,i,s,o){let a=await zC(n,r,i,!1,s,o);return{success:a.success,message:a.message,rowsExported:a.details?.rows_exported}}},pS=class extends Jn{constructor(e,n){super(e),this.strategies=n||new Map([["csv",new jC],["xlsb",new KC]])}registerStrategy(e){this.strategies.set(e.format,e)}async execute(e,n){let r=this.getConfig(e),i=new Date,s=this.validateRequired(e.id,i,r.outputPath,"Output path");return s||this.safeExecute(e.id,i,async()=>{let o=this.resolveVariables(r.outputPath,n),a=r.query?this.resolveVariables(r.query,n):"";if(!a&&r.sourceNodeId&&n.nodeOutputs.get(r.sourceNodeId)?.rows)return this.createError(e.id,i,"In-memory data export is not yet supported. Please specify a query.");if(!a)return this.createError(e.id,i,"No query or source node specified for export");let l=this.strategies.get(r.format);if(!l)return this.createError(e.id,i,`Unsupported export format: ${r.format}`);this.reportProgress(n,`Exporting to ${r.format.toUpperCase()}: ${o}`);let c=await l.export(n.extensionContext,n.connectionDetails,a,o,u=>this.reportProgress(n,`[Export] ${u}`),r.timeout);return c.success?this.createSuccess(e.id,i,{rowsAffected:c.rowsExported,output:{filePath:o,format:r.format,rowsExported:c.rowsExported}}):this.createError(e.id,i,c.message||"Export failed")})}};var Yz=z(require("fs"));vS();var py=class{async importData(e,n,r,i,s){return hy(e,n,r,i,s)}},MS=class extends Jn{constructor(e,n){super(e),this.importer=n||new py}async execute(e,n){let r=this.getConfig(e),i=new Date,s=this.validateRequired(e.id,i,r.inputPath,"Input path");if(s)return s;let o=this.validateRequired(e.id,i,r.targetTable,"Target table");return o||this.safeExecute(e.id,i,async()=>{let a=this.resolveVariables(r.inputPath,n),l=this.resolveVariables(r.targetTable,n),c=r.targetSchema?this.resolveVariables(r.targetSchema,n):"";if(!Yz.existsSync(a))return this.createError(e.id,i,`Input file not found: ${a}`);this.reportProgress(n,`Importing from ${r.format.toUpperCase()}: ${a}`),this.reportProgress(n,`Target table: ${c?c+".":""}${l}`);let u=await this.importer.importData(a,l,n.connectionDetails,d=>{this.reportProgress(n,`[Import] ${d}`)},r.timeout);return u.success?this.createSuccess(e.id,i,{rowsAffected:u.details?.rowsInserted,output:{filePath:a,targetTable:`${c?c+".":""}${l}`,rowsProcessed:u.details?.rowsProcessed,rowsInserted:u.details?.rowsInserted}}):this.createError(e.id,i,u.message)})}};var US=class extends Jn{constructor(e,n){super(n),this.engine=e}async execute(e,n){let r=this.getConfig(e),i=new Date;return!r.nodes||r.nodes.length===0?this.createSuccess(e.id,i,{output:"Empty container - nothing to execute"}):this.safeExecute(e.id,i,async()=>{this.reportProgress(n,`Entering container: ${e.name} (${r.nodes.length} tasks)`);let s={name:`Container: ${e.name}`,version:"1.0.0",nodes:r.nodes,connections:r.connections||[]},o=await this.engine.execute(s,n);return this.reportProgress(n,`Exiting container: ${e.name}`),this.processExecutionResult(e.id,i,r,o)})}processExecutionResult(e,n,r,i){if(i.status==="completed"){let{successCount:o,totalRows:a}=this.countSuccesses(i),l={tasksExecuted:r.nodes.length,tasksSucceeded:o,nestedResults:Array.from(i.nodeResults.entries())};return this.createSuccess(e,n,{rowsAffected:a,output:l})}if(i.status==="cancelled")return this.resultBuilder(e).skipped().build();let s=this.findFirstError(i)||"Container execution failed";return this.createError(e,n,s)}countSuccesses(e){let n=0,r=0;for(let i of e.nodeResults.values())i.status==="success"&&(n++,i.rowsAffected&&(r+=i.rowsAffected));return{successCount:n,totalRows:r}}findFirstError(e){for(let n of e.nodeResults.values())if(n.status==="error"&&n.error)return n.error}};var Ty=class{async createConnection(e){let n=On(),r=new n({host:e.host,port:e.port||5480,database:e.database,user:e.user,password:e.password});return await r.connect(),r}},BS=class extends Jn{constructor(n,r){super(n);this.variableManager=null;this.connectionFactory=r||new Ty}setVariableManager(n){this.variableManager=n}async execute(n,r){let i=this.getConfig(n),s=new Date,o=this.validateRequired(n.id,s,i.variableName,"Variable name");if(o)return o;let a=r.variableManager||this.variableManager;return a?this.safeExecute(n.id,s,async()=>{let l;switch(i.source){case"prompt":l=await this.handlePrompt(i,a,r);break;case"static":l=this.handleStatic(i,r);break;case"sql":l=await this.handleSql(i,r);break;default:return this.createError(n.id,s,`Unknown variable source: ${i.source}`)}return l===void 0?this.createError(n.id,s,`Variable ${i.variableName} was not set (user cancelled or query returned no results)`):(a.set(i.variableName,l),r.variables[i.variableName]=l,this.reportProgress(r,`Variable ${i.variableName} = "${l}"`),this.createSuccess(n.id,s,{output:{variableName:i.variableName,value:l,source:i.source}}))}):this.createError(n.id,s,"Variable manager not available")}async handlePrompt(n,r,i){let s=n.promptMessage?this.resolveVariables(n.promptMessage,i):`Enter value for ${n.variableName}`,o=n.defaultValue?this.resolveVariables(n.defaultValue,i):void 0;return this.reportProgress(i,`Prompting for variable: ${n.variableName}`),r.promptForValue(n.variableName,s,o)}handleStatic(n,r){let i=n.value||"";return this.resolveVariables(i,r)}async handleSql(n,r){if(!n.query)throw new Error("SQL query is required for sql variable source");let i=this.resolveVariables(n.query,r);this.reportProgress(r,`Executing SQL for variable ${n.variableName}`);let s=null;try{s=await this.connectionFactory.createConnection(r.connectionDetails);let o=s.createCommand(i);n.timeout&&(o.commandTimeout=n.timeout);let a=await o.executeReader(),l;if(await a.read()){let c=a.getValue(0);l=c!=null?String(c):void 0}return a.close&&await a.close(),l}finally{if(s)try{await s.close()}catch{}}}};var Vz=z(require("vscode")),FS=class{constructor(e){this.variables=new Map(Object.entries(e||{}))}get(e){return this.variables.get(e)}set(e,n){this.variables.set(e,n)}has(e){return this.variables.has(e)}getAll(){return Object.fromEntries(this.variables)}async promptForValue(e,n,r){let i=await Vz.window.showInputBox({prompt:n||`Enter value for ${e}`,value:r||"",placeHolder:`Value for \${${e}}`,ignoreFocusOut:!0});return i!==void 0&&this.set(e,i),i}snapshot(){return{...this.getAll()}}merge(e){for(let[n,r]of Object.entries(e))this.set(n,r)}};function qz(){return`
        :root {
            --bg-primary: var(--vscode-editor-background);
            --bg-secondary: var(--vscode-sideBar-background);
            --bg-hover: var(--vscode-list-hoverBackground);
            --border-color: var(--vscode-panel-border);
            --text-color: var(--vscode-editor-foreground);
            --text-muted: var(--vscode-descriptionForeground);
            --accent-color: var(--vscode-button-background);
            --accent-hover: var(--vscode-button-hoverBackground);
            --success-color: #4CAF50;
            --error-color: #f44336;
            --warning-color: #ff9800;
        }

        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            padding: 0;
            height: 100vh;
            overflow: hidden;
            font-family: var(--vscode-font-family);
            font-size: var(--vscode-font-size);
            color: var(--text-color);
            background: var(--bg-primary);
        }

        .etl-designer {
            display: flex;
            flex-direction: column;
            height: 100vh;
        }

        /* Toolbar */
        .toolbar {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 8px 16px;
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border-color);
        }

        .toolbar button {
            padding: 6px 12px;
            margin-right: 4px;
            border: 1px solid var(--border-color);
            background: var(--bg-primary);
            color: var(--text-color);
            cursor: pointer;
            border-radius: 4px;
        }

        .toolbar button:hover {
            background: var(--bg-hover);
        }

        .toolbar .btn-primary {
            background: var(--accent-color);
            border-color: var(--accent-color);
        }

        .toolbar .btn-primary:hover {
            background: var(--accent-hover);
        }

        .toolbar .btn-danger {
            background: var(--error-color);
            border-color: var(--error-color);
            color: white;
        }

        .toolbar .btn-danger:hover {
            opacity: 0.8;
        }

        .toolbar .separator {
            display: inline-block;
            width: 1px;
            height: 20px;
            background: var(--border-color);
            margin: 0 8px;
        }

        .project-name {
            font-weight: bold;
            font-size: 1.1em;
        }

        .status {
            color: var(--text-muted);
            font-size: 0.9em;
        }

        /* Main Content */
        .main-content {
            display: flex;
            flex: 1;
            overflow: hidden;
        }

        /* Toolbox */
        .toolbox {
            width: 200px;
            background: var(--bg-secondary);
            border-right: 1px solid var(--border-color);
            padding: 12px;
            overflow-y: auto;
        }

        .toolbox h3 {
            margin: 0 0 12px 0;
            font-size: 0.9em;
            color: var(--text-muted);
            text-transform: uppercase;
        }

        .toolbox-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 12px;
            margin-bottom: 6px;
            background: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            cursor: grab;
            transition: all 0.15s ease;
        }

        .toolbox-item:hover {
            border-color: var(--accent-color);
            transform: translateX(3px);
        }

        .toolbox-item:active {
            cursor: grabbing;
        }

        .toolbox-item .icon {
            font-size: 1.2em;
        }

        .toolbox-item .label {
            font-size: 0.85em;
        }

        .help-text {
            font-size: 0.8em;
            color: var(--text-muted);
            line-height: 1.6;
        }

        .help-text p {
            margin: 4px 0;
        }

        /* Canvas */
        .canvas-container {
            flex: 1;
            position: relative;
            overflow: hidden;
            background: var(--bg-primary);
            cursor: grab;
        }
        
        .canvas-container:active {
            cursor: grabbing;
        }

        .zoom-wrapper {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            transform-origin: 0 0;
            background: 
                linear-gradient(90deg, rgba(128,128,128,0.1) 1px, transparent 1px),
                linear-gradient(rgba(128,128,128,0.1) 1px, transparent 1px);
            background-size: 20px 20px;
        }

        .connections-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        .connections-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 5;
            pointer-events: none;
        }

        .connections-layer path.connection-line {
            stroke: var(--success-color);
            stroke-width: 2;
            fill: none;
            pointer-events: none;
        }
        
        .connections-layer path.connection-failure {
            stroke: var(--error-color);
        }
        
        .connections-layer path.connection-hit {
            stroke: transparent;
            stroke-width: 15px;
            fill: none;
            pointer-events: stroke;
            cursor: pointer;
        }

        .connections-layer path.connection-hit:hover + .connection-line {
            stroke-width: 3;
            filter: drop-shadow(0 0 2px currentColor);
        }

        .connections-layer marker polygon {
            fill: var(--accent-color);
        }

        .nodes-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 2;
            pointer-events: none;
        }

        .etl-node {
            pointer-events: all;
        }

        /* Nodes */
        .etl-node {
            position: absolute;
            min-width: 160px;
            background: var(--bg-secondary);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            cursor: move;
            user-select: none;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
        }

        .etl-node:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.25);
        }

        .etl-node.selected {
            border-color: var(--accent-color);
        }

        .etl-node.running {
            border-color: var(--warning-color);
            animation: pulse 1s infinite;
        }

        .etl-node.success {
            border-color: var(--success-color);
        }

        .etl-node.error {
            border-color: var(--error-color);
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .node-type-indicator {
            height: 4px;
            border-radius: 6px 6px 0 0;
        }

        .etl-node.sql .node-type-indicator { background: #4CAF50; }
        .etl-node.python .node-type-indicator { background: #3776AB; }
        .etl-node.container .node-type-indicator { background: #FF9800; }
        .etl-node.export .node-type-indicator { background: #2196F3; }
        .etl-node.import .node-type-indicator { background: #9C27B0; }

        .node-content {
            padding: 10px 12px;
        }

        .node-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 4px;
        }

        .node-icon {
            font-size: 1.2em;
        }

        .node-name {
            font-weight: 500;
            font-size: 0.9em;
        }

        .node-type {
            font-size: 0.75em;
            color: var(--text-muted);
            text-transform: uppercase;
        }

        .node-connectors {
            position: relative;
        }

        .node-actions {
            position: absolute;
            top: -8px;
            right: -8px;
            display: none;
        }

        .etl-node:hover .node-actions,
        .etl-node.selected .node-actions {
            display: block;
        }

        .node-delete-btn {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--error-color);
            color: white;
            border: 2px solid var(--bg-secondary);
            font-size: 12px;
            line-height: 16px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .node-delete-btn:hover {
            transform: scale(1.2);
        }

        .connector {
            width: 14px;
            height: 14px;
            background: var(--accent-color);
            border: 2px solid var(--bg-secondary);
            border-radius: 50%;
            position: absolute;
            cursor: crosshair;
            z-index: 10;
        }

        .connector.input {
            left: -9px;
            top: 50%;
            transform: translateY(-50%);
        }

        .connector.output {
            right: -9px;
            top: 50%;
            transform: translateY(-50%);
        }

        .connector:hover {
            transform: translateY(-50%) scale(1.3);
        }

        /* Properties Panel */
        .properties-panel {
            width: 250px;
            background: var(--bg-secondary);
            border-left: 1px solid var(--border-color);
            padding: 12px;
            overflow-y: auto;
        }

        .properties-panel h3 {
            margin: 0 0 12px 0;
            font-size: 0.9em;
            color: var(--text-muted);
            text-transform: uppercase;
        }

        .properties-panel .placeholder {
            color: var(--text-muted);
            font-style: italic;
        }

        .property-group {
            margin-bottom: 16px;
        }

        .property-label {
            display: block;
            font-size: 0.8em;
            color: var(--text-muted);
            margin-bottom: 4px;
        }

        .property-value {
            font-size: 0.9em;
            word-break: break-word;
        }

        .property-code {
            font-family: monospace;
            font-size: 0.8em;
            background: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: 4px;
            padding: 6px 8px;
            margin: 4px 0 0 0;
            white-space: pre-wrap;
            word-break: break-all;
            max-height: 80px;
            overflow-y: auto;
        }

        .configure-btn {
            width: 100%;
            margin-top: 16px;
            padding: 8px 12px;
            background: var(--accent-color);
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.85em;
        }

        .configure-btn:hover {
            background: var(--accent-hover);
        }

        /* Connection line being drawn */
        .temp-connection {
            stroke: var(--accent-color);
            stroke-width: 2;
            stroke-dasharray: 5,5;
            fill: none;
            pointer-events: none;
        }

        /* Container Editor Modal */
        .container-editor-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .container-editor-modal {
            width: 90%;
            height: 85%;
            background: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
        }

        .container-editor-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 16px;
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border-color);
            border-radius: 8px 8px 0 0;
        }

        .container-editor-title {
            font-weight: 600;
            font-size: 1.1em;
        }

        .container-editor-close {
            width: 28px;
            height: 28px;
            border: none;
            background: transparent;
            color: var(--text-color);
            font-size: 18px;
            cursor: pointer;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .container-editor-close:hover {
            background: var(--error-color);
            color: white;
        }

        .container-editor-content {
            flex: 1;
            display: flex;
            overflow: hidden;
        }

        .container-editor-toolbox {
            width: 180px;
            background: var(--bg-secondary);
            border-right: 1px solid var(--border-color);
            padding: 12px;
            overflow-y: auto;
        }

        .container-editor-toolbox h4 {
            margin: 0 0 10px 0;
            font-size: 0.85em;
            color: var(--text-muted);
            text-transform: uppercase;
        }

        .container-editor-canvas {
            flex: 1;
            position: relative;
            overflow: hidden;
            background: var(--bg-primary);
        }

        .container-editor-canvas .zoom-wrapper {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                linear-gradient(90deg, rgba(128,128,128,0.08) 1px, transparent 1px),
                linear-gradient(rgba(128,128,128,0.08) 1px, transparent 1px);
            background-size: 20px 20px;
        }

        .container-editor-footer {
            padding: 10px 16px;
            background: var(--bg-secondary);
            border-top: 1px solid var(--border-color);
            border-radius: 0 0 8px 8px;
            display: flex;
            justify-content: flex-end;
            gap: 8px;
        }

        .container-editor-footer button {
            padding: 6px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9em;
        }

        .container-editor-footer .btn-save {
            background: var(--accent-color);
            color: white;
            border: none;
        }

        .container-editor-footer .btn-save:hover {
            background: var(--accent-hover);
        }

        .container-editor-footer .btn-cancel {
            background: transparent;
            color: var(--text-color);
            border: 1px solid var(--border-color);
        }

        .container-editor-footer .btn-cancel:hover {
            background: var(--bg-hover);
        }

        /* Container node badge showing child count */
        .node-child-count {
            font-size: 0.7em;
            background: var(--warning-color);
            color: white;
            padding: 2px 6px;
            border-radius: 10px;
            margin-left: 4px;
        }
    `}function Xz(t){return`
        const vscode = acquireVsCodeApi();
        
        // State
        let project = ${JSON.stringify(t)};
        let selectedNodeId = null;
        let isDragging = false;
        let dragOffset = { x: 0, y: 0 };
        let isConnecting = false;
        let connectionStart = null;
        let tempLine = null;
        
        // Zoom & Pan state
        let scale = 1;
        let pan = { x: 0, y: 0 };
        let isPanning = false;
        let panStart = { x: 0, y: 0 };

        // Container Editor state
        let containerEditorOpen = false;
        let editingContainerId = null;
        let containerNodes = [];
        let containerConnections = [];
        let containerSelectedNodeId = null;
        let containerIsDragging = false;
        let containerDragOffset = { x: 0, y: 0 };
        let containerIsConnecting = false;
        let containerConnectionStart = null;
        let containerTempLine = null;

        // Node icons
        const nodeIcons = {
            sql: '\u{1F4DC}',
            python: '\u{1F40D}',
            container: '\u{1F4E6}',
            export: '\u{1F4E4}',
            import: '\u{1F4E5}',
            variable: '\u{1F524}'
        };
    `}function zz(){return`
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        function updateNodeStatus(nodeId, status) {
            const nodeEl = document.getElementById('node-' + nodeId);
            if (nodeEl) {
                nodeEl.classList.remove('running', 'success', 'error', 'pending', 'skipped');
                nodeEl.classList.add(status);
            }
            
            document.getElementById('status').textContent = status === 'running' 
                ? 'Running...' 
                : (status === 'error' ? 'Error!' : '');
        }
    `}function jz(){return`
        function updateTransform() {
            const wrapper = document.getElementById('zoom-wrapper');
            if (wrapper) {
                wrapper.style.transform = \`translate(\${pan.x}px, \${pan.y}px) scale(\${scale})\`;
            }
        }

        function setupZoomPan() {
            const container = document.getElementById('canvas');
            
            // Wheel zoom
            container.addEventListener('wheel', (e) => {
                if (e.ctrlKey || true) { 
                    e.preventDefault();
                    const zoomSensitivity = 0.001;
                    const delta = -e.deltaY * zoomSensitivity;
                    const newScale = Math.min(Math.max(0.1, scale + delta), 5);
                    scale = newScale;
                    updateTransform();
                }
            });

            // Pan
            container.addEventListener('mousedown', (e) => {
                if (e.target === container || e.target.id === 'nodes-container' || e.target.id === 'zoom-wrapper' || e.target.id === 'connections-svg') {
                    isPanning = true;
                    panStart = { x: e.clientX - pan.x, y: e.clientY - pan.y };
                    container.style.cursor = 'grabbing';
                }
            });

            window.addEventListener('mousemove', (e) => {
                if (isPanning) {
                    pan.x = e.clientX - panStart.x;
                    pan.y = e.clientY - panStart.y;
                    updateTransform();
                }
            });

            window.addEventListener('mouseup', () => {
                if (isPanning) {
                    isPanning = false;
                    container.style.cursor = 'grab';
                }
            });
        }
    `}function Kz(){return`
        function renderConnections() {
            const svg = document.getElementById('connections-svg');
            // Clear existing paths but keep defs
            svg.querySelectorAll('path').forEach(p => p.remove());

            for (const conn of project.connections) {
                const fromNode = project.nodes.find(n => n.id === conn.from);
                const toNode = project.nodes.find(n => n.id === conn.to);
                
                if (fromNode && toNode) {
                    const path = createConnectionPath(fromNode, toNode, conn);
                    svg.appendChild(path);
                }
            }
        }

        function createConnectionPath(from, to, conn) {
            const group = document.createElementNS('http://www.w3.org/2000/svg', 'g');
            
            // Determine marker based on connection type
            const markerType = conn.connectionType === 'failure' ? 'arrowhead-failure' : 'arrowhead';
            const lineClass = conn.connectionType === 'failure' ? 'connection-line connection-failure' : 'connection-line';
            
            // Node dimensions
            const nodeWidth = 160;
            const nodeHeight = 70;
            
            // Calculate center points
            const fromCenterX = from.position.x + nodeWidth / 2;
            const fromCenterY = from.position.y + nodeHeight / 2;
            const toCenterX = to.position.x + nodeWidth / 2;
            const toCenterY = to.position.y + nodeHeight / 2;
            
            // Calculate relative position
            const dx = toCenterX - fromCenterX;
            const dy = toCenterY - fromCenterY;
            
            // Determine connection points based on relative position
            let x1, y1, x2, y2;
            
            // Choose source point (from node)
            if (Math.abs(dy) > Math.abs(dx)) {
                // Vertical connection dominates
                if (dy > 0) {
                    // Target is below - start from bottom
                    x1 = fromCenterX;
                    y1 = from.position.y + nodeHeight;
                } else {
                    // Target is above - start from top
                    x1 = fromCenterX;
                    y1 = from.position.y;
                }
            } else {
                // Horizontal connection dominates
                if (dx > 0) {
                    // Target is to the right - start from right
                    x1 = from.position.x + nodeWidth;
                    y1 = fromCenterY;
                } else {
                    // Target is to the left - start from left
                    x1 = from.position.x;
                    y1 = fromCenterY;
                }
            }
            
            // Choose target point (to node)
            if (Math.abs(dy) > Math.abs(dx)) {
                // Vertical connection
                if (dy > 0) {
                    // Coming from above - end at top
                    x2 = toCenterX;
                    y2 = to.position.y;
                } else {
                    // Coming from below - end at bottom
                    x2 = toCenterX;
                    y2 = to.position.y + nodeHeight;
                }
            } else {
                // Horizontal connection
                if (dx > 0) {
                    // Coming from left - end at left
                    x2 = to.position.x;
                    y2 = toCenterY;
                } else {
                    // Coming from right - end at right
                    x2 = to.position.x + nodeWidth;
                    y2 = toCenterY;
                }
            }

            // Create bezier curve with appropriate control points
            let d;
            if (Math.abs(dy) > Math.abs(dx)) {
                // Vertical curve
                const midY = (y1 + y2) / 2;
                d = 'M ' + x1 + ' ' + y1 + ' C ' + x1 + ' ' + midY + ', ' + x2 + ' ' + midY + ', ' + x2 + ' ' + y2;
            } else {
                // Horizontal curve
                const midX = (x1 + x2) / 2;
                d = 'M ' + x1 + ' ' + y1 + ' C ' + midX + ' ' + y1 + ', ' + midX + ' ' + y2 + ', ' + x2 + ' ' + y2;
            }
            
            // 1. Hit path (invisible, wider)
            const hitPath = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            hitPath.setAttribute('d', d);
            hitPath.setAttribute('class', 'connection-hit');
            hitPath.dataset.connectionId = conn.id;
            
            // Right-click to toggle connection type
            hitPath.addEventListener('contextmenu', (e) => {
                e.preventDefault();
                e.stopPropagation();
                const currentType = conn.connectionType || 'success';
                const newType = currentType === 'success' ? 'failure' : 'success';
                vscode.postMessage({ 
                    type: 'toggleConnectionType', 
                    payload: { connectionId: conn.id, newType: newType }
                });
            });
            
            // Click to delete
            hitPath.addEventListener('click', (e) => {
                e.stopPropagation();
                vscode.postMessage({ type: 'confirmRemoveConnection', payload: conn.id });
            });

            // 2. Visible path
            const visiblePath = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            visiblePath.setAttribute('d', d);
            visiblePath.setAttribute('marker-end', 'url(#' + markerType + ')');
            visiblePath.setAttribute('class', lineClass);

            group.appendChild(hitPath);
            group.appendChild(visiblePath);
            
            return group;
        }

        function createTempLine(e) {
            const svg = document.getElementById('connections-svg');
            tempLine = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            tempLine.classList.add('temp-connection');
            svg.appendChild(tempLine);
            updateTempLine(e);
        }

        function updateTempLine(e) {
            if (!tempLine || !connectionStart) return;
            
            const fromNode = project.nodes.find(n => n.id === connectionStart);
            if (!fromNode) return;
            
            const canvas = document.getElementById('canvas');
            const rect = canvas.getBoundingClientRect();
            
            const x1 = fromNode.position.x + 160;
            const y1 = fromNode.position.y + 35;
            const x2 = (e.clientX - rect.left - pan.x) / scale;
            const y2 = (e.clientY - rect.top - pan.y) / scale;
            
            const midX = (x1 + x2) / 2;
            tempLine.setAttribute('d', 'M ' + x1 + ' ' + y1 + ' C ' + midX + ' ' + y1 + ', ' + midX + ' ' + y2 + ', ' + x2 + ' ' + y2);
        }

        function endConnection() {
            isConnecting = false;
            connectionStart = null;
            if (tempLine) {
                tempLine.remove();
                tempLine = null;
            }
        }
    `}function Jz(){return`
        // Keyboard events for Delete key
        function setupKeyboardEvents() {
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Delete' && selectedNodeId) {
                    vscode.postMessage({ type: 'confirmRemoveNode', payload: selectedNodeId });
                }
            });
        }

        // Handle messages from extension
        window.addEventListener('message', (event) => {
            const message = event.data;
            switch (message.type) {
                case 'projectUpdate':
                    project = message.payload;
                    renderNodes();
                    renderConnections();
                    break;
                case 'nodeStatusUpdate':
                    updateNodeStatus(message.payload.nodeId, message.payload.status);
                    break;
                case 'executionStarted':
                    document.getElementById('btn-run').style.display = 'none';
                    document.getElementById('btn-stop').style.display = 'inline-block';
                    document.getElementById('status').textContent = 'Running...';
                    break;
                case 'executionEnded':
                    document.getElementById('btn-run').style.display = 'inline-block';
                    document.getElementById('btn-stop').style.display = 'none';
                    document.getElementById('status').textContent = message.payload?.status || '';
                    break;
                case 'containerChildUpdated':
                    // Refresh container editor with updated child node
                    if (containerEditorOpen && editingContainerId === message.payload.containerId) {
                        const updatedChild = message.payload.childNode;
                        const idx = containerNodes.findIndex(n => n.id === updatedChild.id);
                        if (idx >= 0) {
                            containerNodes[idx] = updatedChild;
                            renderContainerNodes();
                        }
                    }
                    break;
            }
        });

        function setupToolbarButtons() {
            document.getElementById('btn-new').addEventListener('click', () => {
                vscode.postMessage({ type: 'newProject' });
            });
            
            document.getElementById('btn-open').addEventListener('click', () => {
                vscode.postMessage({ type: 'loadProject' });
            });
            
            document.getElementById('btn-save').addEventListener('click', () => {
                vscode.postMessage({ type: 'saveProject' });
            });
            
            document.getElementById('btn-run').addEventListener('click', () => {
                vscode.postMessage({ type: 'runProject' });
            });
            
            document.getElementById('btn-stop').addEventListener('click', () => {
                vscode.postMessage({ type: 'stopProject' });
            });
        }
    `}function Qz(){return`
        function updatePropertiesPanel(node) {
            const content = document.getElementById('properties-content');
            
            if (!node) {
                content.innerHTML = '<p class="placeholder">Select a task to view properties</p>';
                return;
            }
            
            let configHtml = '';
            const config = node.config;
            
            switch (node.type) {
                case 'sql':
                    const queryPreview = config.query 
                        ? (config.query.length > 100 ? config.query.substring(0, 100) + '...' : config.query)
                        : '(not configured)';
                    configHtml = \`
                        <div class="property-group">
                            <span class="property-label">Connection</span>
                            <div class="property-value">\${escapeHtml(config.connection || 'Active connection')}</div>
                        </div>
                        <div class="property-group">
                            <span class="property-label">Query</span>
                            <pre class="property-code">\${escapeHtml(queryPreview)}</pre>
                        </div>
                        <div class="property-group">
                            <span class="property-label">Timeout</span>
                            <div class="property-value">\${config.timeout ? config.timeout + 's' : '(default)'}</div>
                        </div>
                    \`;
                    break;
                case 'python':
                    let scriptInfo = '(not configured)';
                    if (config.scriptPath) {
                        const pathParts = config.scriptPath.split(/[/\\\\\\\\]/);
                        scriptInfo = '\u{1F4C1} ' + pathParts[pathParts.length - 1];
                    } else if (config.script) {
                        const preview = config.script.length > 50 ? config.script.substring(0, 50) + '...' : config.script;
                        scriptInfo = preview;
                    }
                    configHtml = \`
                        <div class="property-group">
                            <span class="property-label">Script Source</span>
                            <div class="property-value">\${config.scriptPath ? 'File' : (config.script ? 'Inline' : 'Not set')}</div>
                        </div>
                        <div class="property-group">
                            <span class="property-label">Script</span>
                            <pre class="property-code">\${escapeHtml(scriptInfo)}</pre>
                        </div>
                        <div class="property-group">
                            <span class="property-label">Interpreter</span>
                            <div class="property-value">\${escapeHtml(config.pythonPath || 'Auto-detect')}</div>
                        </div>
                        <div class="property-group">
                            <span class="property-label">Timeout</span>
                            <div class="property-value">\${config.timeout ? config.timeout + 's' : '(default)'}</div>
                        </div>
                    \`;
                    break;
                case 'export':
                    const outPath = config.outputPath 
                        ? config.outputPath.split(/[/\\\\\\\\]/).pop() 
                        : '(not configured)';
                    const exportQueryPreview = config.query 
                        ? (config.query.length > 50 ? config.query.substring(0, 50) + '...' : config.query)
                        : '(uses previous output)';
                    configHtml = \`
                        <div class="property-group">
                            <span class="property-label">Format</span>
                            <div class="property-value">\${config.format?.toUpperCase() || '(not set)'}</div>
                        </div>
                        <div class="property-group">
                            <span class="property-label">Output File</span>
                            <div class="property-value">\u{1F4C4} \${escapeHtml(outPath)}</div>
                        </div>
                        <div class="property-group">
                            <span class="property-label">Query</span>
                            <pre class="property-code">\${escapeHtml(exportQueryPreview)}</pre>
                        </div>
                        <div class="property-group">
                            <span class="property-label">Timeout</span>
                            <div class="property-value">\${config.timeout ? config.timeout + 's' : '(default)'}</div>
                        </div>
                    \`;
                    break;
                case 'import':
                    const inPath = config.inputPath 
                        ? config.inputPath.split(/[/\\\\\\\\]/).pop() 
                        : '(not configured)';
                    configHtml = \`
                        <div class="property-group">
                            <span class="property-label">Format</span>
                            <div class="property-value">\${config.format?.toUpperCase() || 'Auto-detect'}</div>
                        </div>
                        <div class="property-group">
                            <span class="property-label">Input File</span>
                            <div class="property-value">\u{1F4C4} \${escapeHtml(inPath)}</div>
                        </div>
                        <div class="property-group">
                            <span class="property-label">Target Table</span>
                            <div class="property-value">\${escapeHtml(config.targetTable || '(not set)')}</div>
                        </div>
                        <div class="property-group">
                            <span class="property-label">Create Table</span>
                            <div class="property-value">\${config.createTable !== false ? 'Yes (if needed)' : 'No'}</div>
                        </div>
                        <div class="property-group">
                            <span class="property-label">Timeout</span>
                            <div class="property-value">\${config.timeout ? config.timeout + 's' : '(default)'}</div>
                        </div>
                    \`;
                    break;
                case 'container':
                    const childCount = (config.nodes || []).length;
                    configHtml = \`
                        <div class="property-group">
                            <span class="property-label">Child Tasks</span>
                            <div class="property-value">\${childCount} task(s)</div>
                        </div>
                    \`;
                    break;
                case 'variable':
                    const sourceLabels = {
                        'prompt': '\u{1F4DD} Prompt User',
                        'static': '\u{1F512} Static Value',
                        'sql': '\u{1F5C4}\uFE0F SQL Query'
                    };
                    const sourceLabel = sourceLabels[config.source] || config.source;
                    let varDetails = '';
                    if (config.source === 'prompt') {
                        varDetails = \`
                            <div class="property-group">
                                <span class="property-label">Prompt Message</span>
                                <div class="property-value">\${escapeHtml(config.promptMessage || '(default)')}</div>
                            </div>
                            <div class="property-group">
                                <span class="property-label">Default Value</span>
                                <div class="property-value">\${escapeHtml(config.defaultValue || '(none)')}</div>
                            </div>
                        \`;
                    } else if (config.source === 'static') {
                        varDetails = \`
                            <div class="property-group">
                                <span class="property-label">Value</span>
                                <pre class="property-code">\${escapeHtml(config.value || '(empty)')}</pre>
                            </div>
                        \`;
                    } else if (config.source === 'sql') {
                        const sqlPreview = config.query 
                            ? (config.query.length > 50 ? config.query.substring(0, 50) + '...' : config.query)
                            : '(not configured)';
                        varDetails = \`
                            <div class="property-group">
                                <span class="property-label">Query</span>
                                <pre class="property-code">\${escapeHtml(sqlPreview)}</pre>
                            </div>
                            <div class="property-group">
                                <span class="property-label">Timeout</span>
                                <div class="property-value">\${config.timeout ? config.timeout + 's' : '(default)'}</div>
                            </div>
                        \`;
                    }
                    const varNameDisplay = config.variableName ? ('$' + '{' + escapeHtml(config.variableName) + '}') : '(not set)';
                    configHtml = \`
                        <div class="property-group">
                            <span class="property-label">Variable Name</span>
                            <div class="property-value" style="font-family: monospace;">\${varNameDisplay}</div>
                        </div>
                        <div class="property-group">
                            <span class="property-label">Source</span>
                            <div class="property-value">\${sourceLabel}</div>
                        </div>
                        \${varDetails}
                    \`;
                    break;
            }
            
            content.innerHTML = \`
                <div class="property-group">
                    <span class="property-label">ID</span>
                    <div class="property-value" style="font-family: monospace; font-size: 0.75em;">\${node.id}</div>
                </div>
                <div class="property-group">
                    <span class="property-label">Name</span>
                    <div class="property-value">\${escapeHtml(node.name)}</div>
                </div>
                <div class="property-group">
                    <span class="property-label">Type</span>
                    <div class="property-value">\${node.type.toUpperCase()}</div>
                </div>
                <div class="property-group">
                    <span class="property-label">Position</span>
                    <div class="property-value">(\${node.position.x}, \${node.position.y})</div>
                </div>
                <hr style="border: none; border-top: 1px solid var(--border-color); margin: 12px 0;">
                <h4 style="margin: 8px 0; font-size: 0.85em; color: var(--text-muted);">\u2699\uFE0F Configuration</h4>
                \${configHtml}
                <button class="configure-btn" data-node-id="\${node.id}">
                    \u270F\uFE0F Edit Configuration
                </button>
            \`;
            
            // Attach event listener to configure button (CSP-safe)
            const configBtn = content.querySelector('.configure-btn');
            if (configBtn) {
                configBtn.addEventListener('click', () => {
                    vscode.postMessage({ type: 'configureNode', payload: node.id });
                });
            }
        }
    `}function Zz(){return`
        function renderNodes() {
            const container = document.getElementById('nodes-container');
            container.innerHTML = '';

            for (const node of project.nodes) {
                const el = createNodeElement(node);
                container.appendChild(el);
            }
        }

        function createNodeElement(node, isContainerChild = false) {
            const el = document.createElement('div');
            const isSelected = isContainerChild 
                ? containerSelectedNodeId === node.id 
                : selectedNodeId === node.id;
            el.className = 'etl-node ' + node.type + (isSelected ? ' selected' : '');
            el.id = (isContainerChild ? 'container-node-' : 'node-') + node.id;
            el.style.left = node.position.x + 'px';
            el.style.top = node.position.y + 'px';

            // Show child count badge for containers
            const childCountBadge = node.type === 'container' && node.config?.nodes?.length > 0
                ? \`<span class="node-child-count">\${node.config.nodes.length}</span>\`
                : '';

            el.innerHTML = \`
                <div class="node-actions">
                    <button class="node-delete-btn" data-node="\${node.id}" title="Delete task">\xD7</button>
                </div>
                <div class="node-type-indicator"></div>
                <div class="node-content">
                    <div class="node-header">
                        <span class="node-icon">\${nodeIcons[node.type] || '\u{1F4CB}'}</span>
                        <span class="node-name">\${escapeHtml(node.name)}\${childCountBadge}</span>
                    </div>
                    <div class="node-type">\${node.type}</div>
                </div>
                <div class="node-connectors">
                    <div class="connector input" data-node="\${node.id}" data-type="input"></div>
                    <div class="connector output" data-node="\${node.id}" data-type="output"></div>
                </div>
            \`;

            setupNodeEvents(el, node);
            return el;
        }

        function setupNodeEvents(el, node) {
            // Delete button click
            const deleteBtn = el.querySelector('.node-delete-btn');
            if (deleteBtn) {
                deleteBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    vscode.postMessage({ type: 'confirmRemoveNode', payload: node.id });
                });
            }

            // Drag
            el.addEventListener('mousedown', (e) => {
                if (e.target.classList.contains('connector')) return;
                if (e.target.classList.contains('node-delete-btn')) return;
                
                selectedNodeId = node.id;
                isDragging = true;
                
                const rect = el.getBoundingClientRect();
                dragOffset.x = (e.clientX - rect.left) / scale;
                dragOffset.y = (e.clientY - rect.top) / scale;
                
                // Update selection
                document.querySelectorAll('.etl-node').forEach(n => n.classList.remove('selected'));
                el.classList.add('selected');
                
                updatePropertiesPanel(node);
            });

            // Double-click to configure (or open container editor)
            el.addEventListener('dblclick', () => {
                if (node.type === 'container') {
                    openContainerEditor(node.id);
                } else {
                    vscode.postMessage({ type: 'configureNode', payload: node.id });
                }
            });

            // Connector events
            el.querySelectorAll('.connector').forEach(conn => {
                conn.addEventListener('mousedown', (e) => {
                    e.stopPropagation();
                    if (conn.dataset.type === 'output') {
                        isConnecting = true;
                        connectionStart = node.id;
                        createTempLine(e);
                    }
                });

                conn.addEventListener('mouseup', (e) => {
                    if (isConnecting && conn.dataset.type === 'input' && connectionStart !== node.id) {
                        vscode.postMessage({
                            type: 'addConnection',
                            payload: { from: connectionStart, to: node.id }
                        });
                    }
                    endConnection();
                });
            });

            // Context menu for delete
            el.addEventListener('contextmenu', (e) => {
                e.preventDefault();
                vscode.postMessage({ type: 'confirmRemoveNode', payload: node.id });
            });
        }

        function setupToolboxDrag() {
            document.querySelectorAll('.toolbox-item').forEach(item => {
                item.addEventListener('dragstart', (e) => {
                    e.dataTransfer.setData('nodeType', item.dataset.type);
                });
            });
        }

        function setupCanvasDrop() {
            const canvas = document.getElementById('canvas');
            
            canvas.addEventListener('dragover', (e) => {
                e.preventDefault();
            });
            
            canvas.addEventListener('drop', (e) => {
                e.preventDefault();
                const nodeType = e.dataTransfer.getData('nodeType');
                if (nodeType) {
                    const rect = canvas.getBoundingClientRect();
                    const x = (e.clientX - rect.left - pan.x) / scale;
                    const y = (e.clientY - rect.top - pan.y) / scale;
                    
                    vscode.postMessage({
                        type: 'addNode',
                        payload: { type: nodeType, position: { x, y } }
                    });
                }
            });

            // Mouse move for dragging and connecting
            document.addEventListener('mousemove', (e) => {
                if (isDragging && selectedNodeId) {
                    const canvas = document.getElementById('canvas');
                    const rect = canvas.getBoundingClientRect();
                    const x = (e.clientX - rect.left - pan.x) / scale - dragOffset.x;
                    const y = (e.clientY - rect.top - pan.y) / scale - dragOffset.y;
                    
                    // Update node position in DOM
                    const nodeEl = document.getElementById('node-' + selectedNodeId);
                    if (nodeEl) {
                        nodeEl.style.left = Math.max(0, x) + 'px';
                        nodeEl.style.top = Math.max(0, y) + 'px';
                    }
                    
                    // Update connections
                    const node = project.nodes.find(n => n.id === selectedNodeId);
                    if (node) {
                        node.position = { x: Math.max(0, x), y: Math.max(0, y) };
                        renderConnections();
                    }
                }
                
                if (isConnecting && tempLine) {
                    updateTempLine(e);
                }
            });

            document.addEventListener('mouseup', (e) => {
                if (isDragging && selectedNodeId) {
                    // Save position
                    const node = project.nodes.find(n => n.id === selectedNodeId);
                    if (node) {
                        vscode.postMessage({
                            type: 'updateNodePosition',
                            payload: { nodeId: selectedNodeId, position: node.position }
                        });
                    }
                }
                
                isDragging = false;
                endConnection();
            });

            // Deselect on canvas click
            canvas.addEventListener('click', (e) => {
                if (e.target === canvas || e.target.classList.contains('nodes-layer')) {
                    selectedNodeId = null;
                    document.querySelectorAll('.etl-node').forEach(n => n.classList.remove('selected'));
                    updatePropertiesPanel(null);
                }
            });
        }
    `}function e6(){return`
        function setupContainerEditor() {
            // Close button
            document.getElementById('container-editor-close').addEventListener('click', closeContainerEditor);
            document.getElementById('container-editor-cancel').addEventListener('click', closeContainerEditor);
            document.getElementById('container-editor-save').addEventListener('click', saveContainerAndClose);

            // Toolbox drag for container editor
            document.querySelectorAll('.toolbox-item[data-container="true"]').forEach(item => {
                item.addEventListener('dragstart', (e) => {
                    e.dataTransfer.setData('containerNodeType', item.dataset.type);
                });
            });

            // Canvas drop for container editor
            const containerCanvas = document.getElementById('container-canvas');
            containerCanvas.addEventListener('dragover', (e) => e.preventDefault());
            containerCanvas.addEventListener('drop', (e) => {
                e.preventDefault();
                const nodeType = e.dataTransfer.getData('containerNodeType');
                if (nodeType && containerEditorOpen) {
                    const rect = containerCanvas.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;
                    addContainerChildNode(nodeType, { x, y });
                }
            });

            // Click to deselect in container canvas
            containerCanvas.addEventListener('click', (e) => {
                if (e.target === containerCanvas || e.target.id === 'container-nodes' || e.target.id === 'container-zoom-wrapper') {
                    containerSelectedNodeId = null;
                    document.querySelectorAll('#container-nodes .etl-node').forEach(n => n.classList.remove('selected'));
                }
            });

            // Mouse move for container dragging
            document.addEventListener('mousemove', (e) => {
                if (containerIsDragging && containerSelectedNodeId) {
                    const canvas = document.getElementById('container-canvas');
                    const rect = canvas.getBoundingClientRect();
                    const x = e.clientX - rect.left - containerDragOffset.x;
                    const y = e.clientY - rect.top - containerDragOffset.y;

                    const nodeEl = document.getElementById('container-node-' + containerSelectedNodeId);
                    if (nodeEl) {
                        nodeEl.style.left = Math.max(0, x) + 'px';
                        nodeEl.style.top = Math.max(0, y) + 'px';
                    }

                    const node = containerNodes.find(n => n.id === containerSelectedNodeId);
                    if (node) {
                        node.position = { x: Math.max(0, x), y: Math.max(0, y) };
                        renderContainerConnections();
                    }
                }

                if (containerIsConnecting && containerTempLine) {
                    updateContainerTempLine(e);
                }
            });

            document.addEventListener('mouseup', () => {
                containerIsDragging = false;
                endContainerConnection();
            });

            // Escape to close
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && containerEditorOpen) {
                    closeContainerEditor();
                }
                if (e.key === 'Delete' && containerEditorOpen && containerSelectedNodeId) {
                    removeContainerChildNode(containerSelectedNodeId);
                }
            });
        }

        function openContainerEditor(containerId) {
            const containerNode = project.nodes.find(n => n.id === containerId);
            if (!containerNode || containerNode.type !== 'container') return;

            editingContainerId = containerId;
            containerEditorOpen = true;
            containerNodes = JSON.parse(JSON.stringify(containerNode.config.nodes || []));
            containerConnections = JSON.parse(JSON.stringify(containerNode.config.connections || []));
            containerSelectedNodeId = null;

            document.getElementById('container-editor-title').textContent = '\u{1F4E6} Edit: ' + containerNode.name;
            document.getElementById('container-editor-overlay').style.display = 'flex';

            renderContainerNodes();
            renderContainerConnections();
        }

        function closeContainerEditor() {
            containerEditorOpen = false;
            editingContainerId = null;
            containerNodes = [];
            containerConnections = [];
            document.getElementById('container-editor-overlay').style.display = 'none';
        }

        function saveContainerAndClose() {
            if (!editingContainerId) return;

            vscode.postMessage({
                type: 'updateContainerNodes',
                payload: {
                    containerId: editingContainerId,
                    nodes: containerNodes,
                    connections: containerConnections
                }
            });

            closeContainerEditor();
        }

        function renderContainerNodes() {
            const container = document.getElementById('container-nodes');
            container.innerHTML = '';

            for (const node of containerNodes) {
                const el = createContainerNodeElement(node);
                container.appendChild(el);
            }
        }

        function createContainerNodeElement(node) {
            const el = document.createElement('div');
            el.className = 'etl-node ' + node.type + (containerSelectedNodeId === node.id ? ' selected' : '');
            el.id = 'container-node-' + node.id;
            el.style.left = node.position.x + 'px';
            el.style.top = node.position.y + 'px';

            el.innerHTML = \`
                <div class="node-actions">
                    <button class="node-delete-btn" data-node="\${node.id}" title="Delete">\xD7</button>
                </div>
                <div class="node-type-indicator"></div>
                <div class="node-content">
                    <div class="node-header">
                        <span class="node-icon">\${nodeIcons[node.type] || '\u{1F4CB}'}</span>
                        <span class="node-name">\${escapeHtml(node.name)}</span>
                    </div>
                    <div class="node-type">\${node.type}</div>
                </div>
                <div class="node-connectors">
                    <div class="connector input" data-node="\${node.id}" data-type="input"></div>
                    <div class="connector output" data-node="\${node.id}" data-type="output"></div>
                </div>
            \`;

            setupContainerNodeEvents(el, node);
            return el;
        }

        function setupContainerNodeEvents(el, node) {
            // Delete button
            const deleteBtn = el.querySelector('.node-delete-btn');
            if (deleteBtn) {
                deleteBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    removeContainerChildNode(node.id);
                });
            }

            // Drag
            el.addEventListener('mousedown', (e) => {
                if (e.target.classList.contains('connector')) return;
                if (e.target.classList.contains('node-delete-btn')) return;

                containerSelectedNodeId = node.id;
                containerIsDragging = true;

                const rect = el.getBoundingClientRect();
                containerDragOffset.x = e.clientX - rect.left;
                containerDragOffset.y = e.clientY - rect.top;

                document.querySelectorAll('#container-nodes .etl-node').forEach(n => n.classList.remove('selected'));
                el.classList.add('selected');
            });

            // Double-click to configure (first save, then configure)
            el.addEventListener('dblclick', () => {
                // First save current state to backend
                vscode.postMessage({
                    type: 'updateContainerNodes',
                    payload: {
                        containerId: editingContainerId,
                        nodes: containerNodes,
                        connections: containerConnections
                    }
                });
                // Then request configuration
                vscode.postMessage({ 
                    type: 'configureContainerChildNode', 
                    payload: { containerId: editingContainerId, nodeId: node.id } 
                });
            });

            // Connector events
            el.querySelectorAll('.connector').forEach(conn => {
                conn.addEventListener('mousedown', (e) => {
                    e.stopPropagation();
                    if (conn.dataset.type === 'output') {
                        containerIsConnecting = true;
                        containerConnectionStart = node.id;
                        createContainerTempLine(e);
                    }
                });

                conn.addEventListener('mouseup', () => {
                    if (containerIsConnecting && conn.dataset.type === 'input' && containerConnectionStart !== node.id) {
                        addContainerConnection(containerConnectionStart, node.id);
                    }
                    endContainerConnection();
                });
            });

            // Context menu delete
            el.addEventListener('contextmenu', (e) => {
                e.preventDefault();
                removeContainerChildNode(node.id);
            });
        }

        function addContainerChildNode(type, position) {
            const nodeNames = {
                sql: 'SQL Task',
                python: 'Python Script',
                export: 'Export Data',
                import: 'Import Data',
                variable: 'Variable'
            };

            const defaultConfigs = {
                sql: { type: 'sql', query: '', connection: 'default' },
                python: { type: 'python', script: '' },
                export: { type: 'export', format: 'csv', outputPath: '' },
                import: { type: 'import', format: 'csv', inputPath: '', targetTable: '' },
                variable: { type: 'variable', variableName: '', source: 'prompt', promptMessage: 'Enter value' }
            };

            const newNode = {
                id: 'child-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9),
                type: type,
                name: nodeNames[type] || 'New Task',
                position: position,
                config: defaultConfigs[type] || {}
            };

            containerNodes.push(newNode);
            renderContainerNodes();
            renderContainerConnections();
        }

        function removeContainerChildNode(nodeId) {
            containerNodes = containerNodes.filter(n => n.id !== nodeId);
            containerConnections = containerConnections.filter(c => c.from !== nodeId && c.to !== nodeId);
            if (containerSelectedNodeId === nodeId) containerSelectedNodeId = null;
            renderContainerNodes();
            renderContainerConnections();
        }

        function addContainerConnection(from, to) {
            // Check if connection already exists
            if (containerConnections.some(c => c.from === from && c.to === to)) return;

            containerConnections.push({
                id: 'conn-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9),
                from: from,
                to: to
            });
            renderContainerConnections();
        }

        function renderContainerConnections() {
            const svg = document.getElementById('container-connections-svg');
            svg.querySelectorAll('path').forEach(p => p.remove());

            for (const conn of containerConnections) {
                const fromNode = containerNodes.find(n => n.id === conn.from);
                const toNode = containerNodes.find(n => n.id === conn.to);

                if (fromNode && toNode) {
                    const path = createContainerConnectionPath(fromNode, toNode, conn);
                    svg.appendChild(path);
                }
            }
        }

        function createContainerConnectionPath(from, to, conn) {
            const group = document.createElementNS('http://www.w3.org/2000/svg', 'g');

            // Determine marker based on connection type
            const markerType = conn.connectionType === 'failure' ? 'container-arrowhead-failure' : 'container-arrowhead';
            const lineClass = conn.connectionType === 'failure' ? 'connection-line connection-failure' : 'connection-line';

            // Source: always right side (output connector)
            const x1 = from.position.x + 160;
            const y1 = from.position.y + 35;
            
            // Determine target connection point based on relative positions
            let x2, y2;
            const nodeWidth = 160;
            const nodeHeight = 70;
            
            const dx = to.position.x - from.position.x;
            const dy = to.position.y - from.position.y;
            
            if (dx > 50) {
                x2 = to.position.x;
                y2 = to.position.y + 35;
            } else if (dx < -50 && Math.abs(dy) < 80) {
                x2 = to.position.x + nodeWidth;
                y2 = to.position.y + 35;
            } else if (dy > 30) {
                x2 = to.position.x + nodeWidth / 2;
                y2 = to.position.y;
            } else if (dy < -30) {
                x2 = to.position.x + nodeWidth / 2;
                y2 = to.position.y + nodeHeight;
            } else {
                x2 = to.position.x;
                y2 = to.position.y + 35;
            }

            // Create bezier curve with appropriate control points
            let d;
            if (dx > 50) {
                const midX = (x1 + x2) / 2;
                d = 'M ' + x1 + ' ' + y1 + ' C ' + midX + ' ' + y1 + ', ' + midX + ' ' + y2 + ', ' + x2 + ' ' + y2;
            } else if (dx < -50 && Math.abs(dy) < 80) {
                d = 'M ' + x1 + ' ' + y1 + ' C ' + (x1 + 60) + ' ' + y1 + ', ' + (x2 + 60) + ' ' + y2 + ', ' + x2 + ' ' + y2;
            } else if (dy > 30) {
                d = 'M ' + x1 + ' ' + y1 + ' C ' + (x1 + 40) + ' ' + y1 + ', ' + x2 + ' ' + (y2 - 40) + ', ' + x2 + ' ' + y2;
            } else if (dy < -30) {
                d = 'M ' + x1 + ' ' + y1 + ' C ' + (x1 + 40) + ' ' + y1 + ', ' + x2 + ' ' + (y2 + 40) + ', ' + x2 + ' ' + y2;
            } else {
                const midX = (x1 + x2) / 2;
                d = 'M ' + x1 + ' ' + y1 + ' C ' + midX + ' ' + y1 + ', ' + midX + ' ' + y2 + ', ' + x2 + ' ' + y2;
            }

            const hitPath = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            hitPath.setAttribute('d', d);
            hitPath.setAttribute('class', 'connection-hit');
            
            // Right-click to toggle connection type
            hitPath.addEventListener('contextmenu', (e) => {
                e.preventDefault();
                e.stopPropagation();
                const currentType = conn.connectionType || 'success';
                const newType = currentType === 'success' ? 'failure' : 'success';
                // Update locally
                conn.connectionType = newType;
                renderContainerConnections();
            });
            
            // Click to delete
            hitPath.addEventListener('click', (e) => {
                e.stopPropagation();
                containerConnections = containerConnections.filter(c => c.id !== conn.id);
                renderContainerConnections();
            });

            const visiblePath = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            visiblePath.setAttribute('d', d);
            visiblePath.setAttribute('marker-end', 'url(#' + markerType + ')');
            visiblePath.setAttribute('class', lineClass);

            group.appendChild(hitPath);
            group.appendChild(visiblePath);

            return group;
        }

        function createContainerTempLine(e) {
            const svg = document.getElementById('container-connections-svg');
            containerTempLine = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            containerTempLine.classList.add('temp-connection');
            svg.appendChild(containerTempLine);
            updateContainerTempLine(e);
        }

        function updateContainerTempLine(e) {
            if (!containerTempLine || !containerConnectionStart) return;

            const fromNode = containerNodes.find(n => n.id === containerConnectionStart);
            if (!fromNode) return;

            const canvas = document.getElementById('container-canvas');
            const rect = canvas.getBoundingClientRect();

            const x1 = fromNode.position.x + 160;
            const y1 = fromNode.position.y + 35;
            const x2 = e.clientX - rect.left;
            const y2 = e.clientY - rect.top;

            const midX = (x1 + x2) / 2;
            containerTempLine.setAttribute('d', 'M ' + x1 + ' ' + y1 + ' C ' + midX + ' ' + y1 + ', ' + midX + ' ' + y2 + ', ' + x2 + ' ' + y2);
        }

        function endContainerConnection() {
            containerIsConnecting = false;
            containerConnectionStart = null;
            if (containerTempLine) {
                containerTempLine.remove();
                containerTempLine = null;
            }
        }
    `}function t6(t){return`
        (function() {
            'use strict';
            
            ${Xz(t)}
            
            ${zz()}
            
            ${jz()}
            
            ${Kz()}
            
            ${Zz()}
            
            ${Qz()}
            
            ${Jz()}
            
            ${e6()}
            
            // Initialize function
            function init() {
                renderNodes();
                renderConnections();
                setupToolboxDrag();
                setupCanvasDrop();
                setupToolbarButtons();
                setupKeyboardEvents();
                setupZoomPan();
                setupContainerEditor();
                
                // Request current project state
                vscode.postMessage({ type: 'getProject' });
            }
            
            // Start
            init();
        })();
    `}function n6(t){return t6(t)}function jye(t){return`
        <header class="toolbar">
            <div class="toolbar-left">
                <button id="btn-new" title="New Project">\u{1F4C4} New</button>
                <button id="btn-open" title="Open Project">\u{1F4C2} Open</button>
                <button id="btn-save" title="Save Project">\u{1F4BE} Save</button>
                <span class="separator"></span>
                <button id="btn-run" class="btn-primary" title="Run Project">\u25B6\uFE0F Run</button>
                <button id="btn-stop" class="btn-danger" title="Stop Execution" style="display:none;">\u23F9\uFE0F Stop</button>
            </div>
            <div class="toolbar-center">
                <span class="project-name">${t}</span>
            </div>
            <div class="toolbar-right">
                <span class="status" id="status"></span>
            </div>
        </header>`}function Kye(){return`
        <aside class="toolbox">
            <h3>\u{1F4E6} Tasks</h3>
            <div class="toolbox-items">
                <div class="toolbox-item" data-type="variable" draggable="true">
                    <span class="icon">\u{1F524}</span>
                    <span class="label">Variable</span>
                </div>
                <div class="toolbox-item" data-type="sql" draggable="true">
                    <span class="icon">\u{1F4DC}</span>
                    <span class="label">SQL Task</span>
                </div>
                <div class="toolbox-item" data-type="python" draggable="true">
                    <span class="icon">\u{1F40D}</span>
                    <span class="label">Python Script</span>
                </div>
                <div class="toolbox-item" data-type="container" draggable="true">
                    <span class="icon">\u{1F4E6}</span>
                    <span class="label">Container</span>
                </div>
                <div class="toolbox-item" data-type="export" draggable="true">
                    <span class="icon">\u{1F4E4}</span>
                    <span class="label">Export (CSV/XLSB)</span>
                </div>
                <div class="toolbox-item" data-type="import" draggable="true">
                    <span class="icon">\u{1F4E5}</span>
                    <span class="label">Import (CSV/XLSB)</span>
                </div>
            </div>
            
            <h3>\u2139\uFE0F Help</h3>
            <div class="help-text">
                <p>Drag tasks to canvas</p>
                <p>Connect outputs to inputs</p>
                <p>Double-click to configure</p>
                <p>Connected = Sequential</p>
                <p>Unconnected = Parallel</p>
                <p>Use \${name} in SQL</p>
            </div>
        </aside>`}function Jye(){return`
        <main class="canvas-container" id="canvas">
            <div id="zoom-wrapper" class="zoom-wrapper">
                <svg class="connections-layer" id="connections-svg">
                    <defs>
                        <marker id="arrowhead" markerWidth="10" markerHeight="7" 
                            refX="10" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="#4caf50" />
                        </marker>
                        <marker id="arrowhead-failure" markerWidth="10" markerHeight="7" 
                            refX="10" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="#f44336" />
                        </marker>
                    </defs>
                </svg>
                <div class="nodes-layer" id="nodes-container"></div>
            </div>
        </main>`}function Qye(){return`
        <aside class="properties-panel" id="properties">
            <h3>\u2699\uFE0F Properties</h3>
            <div id="properties-content">
                <p class="placeholder">Select a task to view properties</p>
            </div>
        </aside>`}function Zye(){return`
        <div id="container-editor-overlay" class="container-editor-overlay" style="display:none;">
            <div class="container-editor-modal">
                <header class="container-editor-header">
                    <span id="container-editor-title" class="container-editor-title">\u{1F4E6} Edit Container</span>
                    <button id="container-editor-close" class="container-editor-close" title="Close">\u2715</button>
                </header>
                <div class="container-editor-content">
                    <aside class="container-editor-toolbox">
                        <h4>\u{1F4E6} Tasks</h4>
                        <div class="toolbox-item" data-type="variable" data-container="true" draggable="true">
                            <span class="icon">\u{1F524}</span>
                            <span class="label">Variable</span>
                        </div>
                        <div class="toolbox-item" data-type="sql" data-container="true" draggable="true">
                            <span class="icon">\u{1F4DC}</span>
                            <span class="label">SQL Task</span>
                        </div>
                        <div class="toolbox-item" data-type="python" data-container="true" draggable="true">
                            <span class="icon">\u{1F40D}</span>
                            <span class="label">Python</span>
                        </div>
                        <div class="toolbox-item" data-type="export" data-container="true" draggable="true">
                            <span class="icon">\u{1F4E4}</span>
                            <span class="label">Export</span>
                        </div>
                        <div class="toolbox-item" data-type="import" data-container="true" draggable="true">
                            <span class="icon">\u{1F4E5}</span>
                            <span class="label">Import</span>
                        </div>
                    </aside>
                    <div class="container-editor-canvas" id="container-canvas">
                        <div class="zoom-wrapper" id="container-zoom-wrapper">
                            <svg class="connections-layer" id="container-connections-svg">
                                <defs>
                                    <marker id="container-arrowhead" markerWidth="10" markerHeight="7" 
                                        refX="10" refY="3.5" orient="auto">
                                        <polygon points="0 0, 10 3.5, 0 7" fill="#4caf50" />
                                    </marker>
                                    <marker id="container-arrowhead-failure" markerWidth="10" markerHeight="7" 
                                        refX="10" refY="3.5" orient="auto">
                                        <polygon points="0 0, 10 3.5, 0 7" fill="#f44336" />
                                    </marker>
                                </defs>
                            </svg>
                            <div class="nodes-layer" id="container-nodes"></div>
                        </div>
                    </div>
                </div>
                <footer class="container-editor-footer">
                    <button id="container-editor-cancel" class="btn-cancel">Cancel</button>
                    <button id="container-editor-save" class="btn-save">\u{1F4BE} Save</button>
                </footer>
            </div>
        </div>`}function r6(t){let{project:e,nonce:n}=t;return`<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'none'; style-src 'unsafe-inline'; script-src 'nonce-${n}';">
    <title>ETL Designer - ${e.name}</title>
    <style>${qz()}</style>
</head>
<body>
    <div class="etl-designer">
        ${jye(e.name)}

        <div class="main-content">
            ${Kye()}
            ${Jye()}
            ${Qye()}
        </div>
    </div>

    ${Zye()}

    <script nonce="${n}">
        ${n6(e)}
    </script>
</body>
</html>`}var Qe=z(require("vscode")),HS=class{constructor(e,n){this.projectManager=e;this.onUpdate=n}async configureNode(e){let n=this.projectManager.getNode(e);if(n)switch(n.type){case"sql":await this.configureSqlNode(n,e);break;case"python":await this.configurePythonNode(n,e);break;case"export":await this.configureExportNode(n,e);break;case"import":await this.configureImportNode(n,e);break;case"variable":await this.configureVariableNode(n,e);break}}getDefaultNodeName(e){return{sql:"SQL Task",python:"Python Script",container:"Container",export:"Export Data",import:"Import Data",variable:"Variable"}[e]||"New Task"}async configureSqlNode(e,n){let r=e.config,i=await Qe.window.showInputBox({prompt:"Enter task name",value:e.name,placeHolder:"e.g. Load Customer Data"});if(i===void 0)return;let s=await Qe.window.showInputBox({prompt:"Enter SQL query",value:r.query,placeHolder:"SELECT * FROM table_name"});if(s!==void 0){let o=await Qe.window.showInputBox({prompt:"Enter execution timeout in seconds (optional)",value:r.timeout?String(r.timeout):"",placeHolder:"e.g. 60"}),a=o&&!isNaN(parseInt(o))?parseInt(o):void 0;this.projectManager.updateNode(n,{name:i,config:{...r,query:s,timeout:a}}),this.onUpdate()}}async configurePythonNode(e,n){let r=e.config,i=await Qe.window.showInputBox({prompt:"Enter task name",value:e.name,placeHolder:"e.g. Transform Data"});if(i===void 0)return;let s=await Qe.window.showQuickPick(["Enter script inline","Select script file"],{placeHolder:"How to provide the Python script?"});if(s==="Enter script inline"){let o=await Qe.window.showInputBox({prompt:"Enter Python script",value:r.script,placeHolder:'print("Hello ETL")'});if(o!==void 0){let a=await Qe.window.showInputBox({prompt:"Enter execution timeout in seconds (optional)",value:r.timeout?String(r.timeout):"",placeHolder:"e.g. 60"}),l=a&&!isNaN(parseInt(a))?parseInt(a):void 0;this.projectManager.updateNode(n,{name:i,config:{...r,script:o,scriptPath:void 0,timeout:l}}),this.onUpdate()}}else if(s==="Select script file"){let o=await Qe.window.showOpenDialog({filters:{Python:["py"]},canSelectMany:!1});if(o&&o[0]){let a=await Qe.window.showInputBox({prompt:"Enter execution timeout in seconds (optional)",value:r.timeout?String(r.timeout):"",placeHolder:"e.g. 60"}),l=a&&!isNaN(parseInt(a))?parseInt(a):void 0;this.projectManager.updateNode(n,{name:i,config:{...r,scriptPath:o[0].fsPath,script:"",timeout:l}}),this.onUpdate()}}}async configureExportNode(e,n){let r=e.config,i=await Qe.window.showInputBox({prompt:"Enter task name",value:e.name,placeHolder:"e.g. Export to CSV"});if(i===void 0)return;let s=await Qe.window.showQuickPick(["csv","xlsb"],{placeHolder:"Select output format"});if(s){let o=await Qe.window.showSaveDialog({filters:s==="csv"?{CSV:["csv"]}:{"Excel Binary":["xlsb"]}});if(o){let a=await Qe.window.showInputBox({prompt:"Enter SQL query for export",value:r.query||"",placeHolder:"SELECT * FROM table_name"});if(a!==void 0){let l=await Qe.window.showInputBox({prompt:"Enter execution timeout in seconds (optional)",value:r.timeout?String(r.timeout):"",placeHolder:"e.g. 300"}),c=l&&!isNaN(parseInt(l))?parseInt(l):void 0;this.projectManager.updateNode(n,{name:i,config:{...r,format:s,outputPath:o.fsPath,query:a,timeout:c}}),this.onUpdate()}}}}async configureImportNode(e,n){let r=e.config,i=await Qe.window.showInputBox({prompt:"Enter task name",value:e.name,placeHolder:"e.g. Import Products"});if(i===void 0)return;let s=await Qe.window.showOpenDialog({filters:{"Data Files":["csv","xlsb"],CSV:["csv"],"Excel Binary":["xlsb"]},canSelectMany:!1});if(s&&s[0]){let o=s[0].fsPath,a=o.endsWith(".xlsb")?"xlsb":"csv",l=await Qe.window.showInputBox({prompt:"Enter target table name",value:r.targetTable,placeHolder:"SCHEMA.TABLE_NAME"});if(l){let c=await Qe.window.showInputBox({prompt:"Enter execution timeout in seconds (optional)",value:r.timeout?String(r.timeout):"",placeHolder:"e.g. 300"}),u=c&&!isNaN(parseInt(c))?parseInt(c):void 0;this.projectManager.updateNode(n,{name:i,config:{...r,format:a,inputPath:o,targetTable:l,timeout:u}}),this.onUpdate()}}}async configureVariableNode(e,n){let r=e.config,i=await Qe.window.showInputBox({prompt:"Enter task name",value:e.name,placeHolder:"e.g. Get Date Filter"});if(i===void 0)return;let s=await Qe.window.showInputBox({prompt:"Enter variable name (without ${})",value:r.variableName,placeHolder:"e.g. date_filter"});if(!s)return;let o=await Qe.window.showQuickPick([{label:"Prompt User",value:"prompt",description:"Ask user for value at runtime"},{label:"Static Value",value:"static",description:"Use fixed value"},{label:"SQL Query",value:"sql",description:"Get value from database query"}],{placeHolder:"How should the variable value be set?"});if(!o)return;let a={...r,variableName:s,source:o.value};switch(o.value){case"prompt":{let l=await Qe.window.showInputBox({prompt:"Enter prompt message to show user",value:r.promptMessage||`Enter value for ${s}`,placeHolder:"e.g. Enter date filter (YYYY-MM-DD)"}),c=await Qe.window.showInputBox({prompt:"Enter default value (optional)",value:r.defaultValue||"",placeHolder:"e.g. 2024-01-01"});a={...a,promptMessage:l,defaultValue:c};break}case"static":{let l=await Qe.window.showInputBox({prompt:"Enter static value",value:r.value||"",placeHolder:"e.g. 2024-06-15"});if(l===void 0)return;a={...a,value:l};break}case"sql":{let l=await Qe.window.showInputBox({prompt:"Enter SQL query (must return single value)",value:r.query||"",placeHolder:"SELECT MAX(date) FROM sales_data"});if(!l)return;let c=await Qe.window.showInputBox({prompt:"Enter timeout in seconds (optional)",value:r.timeout?String(r.timeout):"",placeHolder:"e.g. 30"}),u=c&&!isNaN(parseInt(c))?parseInt(c):void 0;a={...a,query:l,timeout:u};break}}this.projectManager.updateNode(n,{name:i,config:a}),this.onUpdate()}};var Vr=class t{constructor(e,n,r){this._disposables=[];this._panel=e,this._context=n,this._projectManager=Cs.getInstance(),this._nodeConfigurator=new HS(this._projectManager,()=>this._sendProjectUpdate()),this._executionEngine=new AE,this._executionEngine.registerExecutor("sql",new mE),this._executionEngine.registerExecutor("python",new gE),this._executionEngine.registerExecutor("export",new pS),this._executionEngine.registerExecutor("import",new MS),this._executionEngine.registerExecutor("container",new US(this._executionEngine)),this._executionEngine.registerExecutor("variable",new BS);let i=r||this._projectManager.createProject("New ETL Project");this._updateWebview(i),this._panel.onDidDispose(()=>this.dispose(),null,this._disposables),this._panel.webview.onDidReceiveMessage(s=>this._handleMessage(s),null,this._disposables)}static{this.viewType="netezza.etlDesigner"}static setConnectionManager(e){t._connectionManager=e}static createOrShow(e,n){let r=He.window.activeTextEditor?He.window.activeTextEditor.viewColumn:void 0;if(t.currentPanel){t.currentPanel._panel.reveal(r),n&&t.currentPanel._updateProject(n);return}let i=He.window.createWebviewPanel(t.viewType,"ETL Designer",r||He.ViewColumn.One,{enableScripts:!0,retainContextWhenHidden:!0,localResourceRoots:[e.extensionUri]});t.currentPanel=new t(i,e,n)}async _handleMessage(e){let n=this._projectManager.getCurrentProject();switch(e.type){case"addNode":{let r=e.payload,i={id:pE(),type:r.type,name:this._nodeConfigurator.getDefaultNodeName(r.type),position:r.position,config:L0(r.type)};this._projectManager.addNode(i),this._sendProjectUpdate();break}case"confirmRemoveNode":{let r=e.payload;await He.window.showWarningMessage("Delete this task?",{modal:!0},"Delete")==="Delete"&&(this._projectManager.removeNode(r),this._sendProjectUpdate());break}case"removeNode":{let r=e.payload;this._projectManager.removeNode(r),this._sendProjectUpdate();break}case"updateNodePosition":{let{nodeId:r,position:i}=e.payload;this._projectManager.updateNode(r,{position:i});break}case"updateNodeName":{let{nodeId:r,name:i}=e.payload;this._projectManager.updateNode(r,{name:i}),this._sendProjectUpdate();break}case"addConnection":{let{from:r,to:i}=e.payload;try{this._projectManager.addConnection({id:TE(),from:r,to:i}),this._sendProjectUpdate()}catch(s){He.window.showErrorMessage(String(s))}break}case"confirmRemoveConnection":{let r=e.payload;await He.window.showWarningMessage("Delete this connection?",{modal:!0},"Delete")==="Delete"&&(this._projectManager.removeConnection(r),this._sendProjectUpdate());break}case"removeConnection":{let r=e.payload;this._projectManager.removeConnection(r),this._sendProjectUpdate();break}case"toggleConnectionType":{let{connectionId:r,newType:i}=e.payload,s=n?.connections.find(o=>o.id===r);s&&(s.connectionType=i,this._sendProjectUpdate());break}case"configureNode":{let r=e.payload;await this._nodeConfigurator.configureNode(r);break}case"updateContainerNodes":{let{containerId:r,nodes:i,connections:s}=e.payload,o=this._projectManager.getNode(r);o&&o.type==="container"&&(this._projectManager.updateNode(r,{config:{type:"container",nodes:i,connections:s}}),this._sendProjectUpdate());break}case"configureContainerChildNode":{let{containerId:r,nodeId:i}=e.payload,s=this._projectManager.getNode(r);if(s&&s.type==="container"){let a=s.config.nodes.find(l=>l.id===i);a&&await this._configureContainerChildNode(r,a)}break}case"saveProject":{await this._saveProject();break}case"loadProject":{await this._loadProject();break}case"newProject":{let r=await He.window.showInputBox({prompt:"Enter project name",value:"New ETL Project"});r&&(this._projectManager.createProject(r),this._sendProjectUpdate());break}case"runProject":{n&&await this._runProject(n);break}case"stopProject":{this._stopExecution();break}case"getProject":{this._sendProjectUpdate();break}}}async _saveProject(){if(!this._projectManager.getCurrentProject())return;let n=await He.window.showSaveDialog({filters:{"ETL Project":["etl.json"]},defaultUri:this._projectManager.getProjectPath()?He.Uri.file(this._projectManager.getProjectPath()):void 0});if(n)try{await this._projectManager.saveProject(n.fsPath),He.window.showInformationMessage(`Project saved to ${n.fsPath}`)}catch(r){He.window.showErrorMessage(`Failed to save project: ${r}`)}}async _loadProject(){let e=await He.window.showOpenDialog({filters:{"ETL Project":["etl.json"]},canSelectMany:!1});if(e&&e[0])try{let n=await this._projectManager.loadProject(e[0].fsPath);this._updateWebview(n),He.window.showInformationMessage(`Project loaded: ${n.name}`)}catch(n){He.window.showErrorMessage(`Failed to load project: ${n}`)}}async _runProject(e){let n=this._projectManager.validateProject(e);if(n.length>0){He.window.showErrorMessage(`Project validation failed:
${n.join(`
`)}`);return}let r=t._connectionManager;if(!r){He.window.showErrorMessage("Connection manager not initialized. Please reload the extension.");return}let i=r.getActiveConnectionName();if(!i){He.window.showErrorMessage("No active connection. Please connect to a database first.");return}let s=await r.getConnection(i);if(!s){He.window.showErrorMessage(`Connection not found: ${i}`);return}let o=He.window.createOutputChannel("ETL Execution");o.show(),this._cancellationTokenSource=new He.CancellationTokenSource;let a=new FS(e.variables||{}),l={extensionContext:this._context,variables:e.variables||{},nodeOutputs:new Map,connectionDetails:s,cancellationToken:this._cancellationTokenSource.token,onProgress:c=>{o.appendLine(`[${new Date().toLocaleTimeString()}] ${c}`)},variableManager:a};this._executionEngine.onStatusChange((c,u,d)=>{this._panel.webview.postMessage({type:"nodeStatusUpdate",payload:{nodeId:c,status:u,message:d}})}),this._panel.webview.postMessage({type:"executionStarted"});try{o.appendLine(`Starting ETL Project: ${e.name}`),o.appendLine(`Connection: ${i}`),o.appendLine("---");let c=await this._executionEngine.execute(e,l);o.appendLine("---"),o.appendLine(`Execution ${c.status}`),o.appendLine(`Duration: ${c.endTime?((c.endTime.getTime()-c.startTime.getTime())/1e3).toFixed(2):"N/A"} seconds`),this._panel.webview.postMessage({type:"executionEnded",payload:{status:c.status==="completed"?"Completed \u2713":"Failed \u2717"}}),c.status==="completed"?He.window.showInformationMessage("ETL project completed successfully!"):c.status==="failed"&&He.window.showErrorMessage("ETL project failed. Check output for details.")}catch(c){o.appendLine(`Error: ${c}`),He.window.showErrorMessage(`ETL execution error: ${c}`),this._panel.webview.postMessage({type:"executionEnded",payload:{status:"Error \u2717"}})}finally{this._cancellationTokenSource?.dispose(),this._cancellationTokenSource=void 0}}_stopExecution(){this._cancellationTokenSource&&(this._cancellationTokenSource.cancel(),He.window.showInformationMessage("ETL execution cancellation requested..."))}_updateProject(e){this._projectManager.createProject(e.name);for(let n of e.nodes)this._projectManager.addNode(n);for(let n of e.connections)try{this._projectManager.addConnection(n)}catch{}this._updateWebview(e)}_updateWebview(e){this._panel.webview.html=this._getHtml(e)}_sendProjectUpdate(){let e=this._projectManager.getCurrentProject();e&&this._panel.webview.postMessage({type:"projectUpdate",payload:e})}async _configureContainerChildNode(e,n){let r=n.config,i=!1;switch(n.type){case"sql":{let s=await He.window.showInputBox({prompt:"Enter task name",value:n.name});if(s===void 0)return;let o=await He.window.showInputBox({prompt:"Enter SQL query",value:r.query||""});o!==void 0&&(n.name=s,r.query=o,i=!0);break}case"python":{let s=await He.window.showInputBox({prompt:"Enter task name",value:n.name});if(s===void 0)return;let o=await He.window.showInputBox({prompt:"Enter Python script",value:r.script||""});o!==void 0&&(n.name=s,r.script=o,i=!0);break}case"variable":{let s=await He.window.showInputBox({prompt:"Enter task name",value:n.name});if(s===void 0)return;let o=await He.window.showInputBox({prompt:"Enter variable name",value:r.variableName||""});o&&(n.name=s,r.variableName=o,i=!0);break}default:He.window.showInformationMessage(`Configure ${n.type} nodes by double-clicking in the main designer.`);return}if(i){let s=this._projectManager.getNode(e);if(s&&s.type==="container"){let o=s.config,a=o.nodes.findIndex(l=>l.id===n.id);a>=0&&(o.nodes[a]=n,this._projectManager.updateNode(e,{config:o}),this._sendProjectUpdate(),this._panel.webview.postMessage({type:"containerChildUpdated",payload:{containerId:e,childNode:n}}))}}}_getHtml(e){return r6({project:e,nonce:this._getNonce()})}_getNonce(){let e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let r=0;r<32;r++)e+=n.charAt(Math.floor(Math.random()*n.length));return e}dispose(){for(t.currentPanel=void 0,this._panel.dispose();this._disposables.length;){let e=this._disposables.pop();e&&e.dispose()}}};var Y=z(require("vscode"));nA();Ay();qr();var qS=class{constructor(e,n){this.connectionManager=e;this.ddlCache=new Map;this.DDL_CACHE_TTL=3600*1e3;this.MAX_TABLES_FOR_DDL=10;this.NETEZZA_OPTIMIZATION_RULES=`
NETEZZA OPTIMIZATION RULES TO APPLY:

1. Eliminate SELECT *
   Replace SELECT * with explicit column lists. Include only columns actually used in output or subsequent operations. This reduces I/O dramatically in Netezza's columnar architecture.

2. Push Filters into Subqueries
   Move WHERE conditions from outer query into CTEs/subqueries. Filter data as early as possible before joins and aggregations to reduce intermediate result sizes.

3. Align JOINs with Distribution Keys
   Check if join columns match table distribution keys. If not, consider redistributing smaller table or add distribution key to join condition when possible to avoid broadcast operations.

4. Replace Correlated Subqueries
   Convert correlated subqueries to JOINs or window functions. Correlated subqueries execute per row - JOINs and analytics leverage parallel processing across SPUs.

5. Simplify DISTINCT and GROUP BY
   Remove unnecessary DISTINCT operations. Ensure GROUP BY uses distribution keys when possible. Consider if aggregation is truly needed or if EXISTS/window functions could replace it.

6. Optimize Window Functions
   Add PARTITION BY on distribution key in window functions. Use ORDER BY only when necessary. Limit window frame size (ROWS BETWEEN) to minimum required range.

7. Use UNION ALL Instead of UNION
   Replace UNION with UNION ALL when duplicates don't matter. UNION performs implicit DISTINCT which causes expensive data redistribution and sorting.

8. Avoid Functions on Join/WHERE Columns
   Remove functions from join and filter columns: change WHERE YEAR(date_col) = 2024 to WHERE date_col BETWEEN '2024-01-01' AND '2024-12-31'. Functions prevent zone map usage.

9. Split Complex Queries with TEMP Tables
   Break multi-join, multi-aggregation queries into steps using CREATE TEMP TABLE AS SELECT. Distribute temp tables on appropriate keys for subsequent joins to control execution plan.
`;this.NZPLSQL_PROCEDURE_REFERENCE=`
NZPLSQL STORED PROCEDURE REFERENCE (IBM Netezza):

PROCEDURE STRUCTURE (PREFERRED FORMAT):
\`\`\`sql
CREATE [OR REPLACE] PROCEDURE database.schema.procedure_name(parameters)
RETURNS return_type
EXECUTE AS CALLER
LANGUAGE NZPLSQL
AS
BEGIN_PROC
  [DECLARE
    -- Variable declarations
    variable_name data_type [:= default_value];
    variable_name table_name%ROWTYPE;  -- Row type from table
    variable_name table_name.column%TYPE;  -- Column type
  ]
  BEGIN
    -- Statements
    [EXCEPTION WHEN OTHERS THEN
      -- Exception handling
      ROLLBACK;  -- Required for TRANSACTION_ABORTED
      RAISE NOTICE 'Error: %', SQLERRM;
    ]
  END;
END_PROC;
\`\`\`

KEY SYNTAX RULES:
- ALWAYS use EXECUTE AS CALLER (preferred) - runs with caller's permissions
- Use BEGIN_PROC / END_PROC to wrap the procedure body (NOT just BEGIN/END)
- DECLARE section comes BEFORE the inner BEGIN block
- Variables are initialized to NULL by default
- Use := for assignment (not =)
- Statements end with semicolon (;)
- Labels use <<label_name>> syntax

EXECUTE AS OPTIONS:
- EXECUTE AS CALLER (PREFERRED) - procedure runs with the permissions of the calling user
- EXECUTE AS OWNER - procedure runs with the permissions of the procedure owner

VARIABLE DECLARATIONS:
\`\`\`sql
DECLARE
  v_count INTEGER;
  v_name VARCHAR(100) := 'default';
  v_rate NUMERIC(10,2) NOT NULL := 0.0;
  v_const CONSTANT INTEGER := 100;
  v_row my_table%ROWTYPE;  -- Inherits structure from table
  v_id my_table.id%TYPE;   -- Inherits type from column
\`\`\`

CONTROL STRUCTURES:
- IF condition THEN ... [ELSIF condition THEN ...] [ELSE ...] END IF;
- CASE expression WHEN value THEN ... [ELSE ...] END CASE;
- LOOP ... EXIT [WHEN condition]; END LOOP;
- WHILE condition LOOP ... END LOOP;
- FOR i IN 1..10 LOOP ... END LOOP;
- FOR record IN SELECT ... LOOP ... END LOOP;

DYNAMIC SQL (EXECUTE IMMEDIATE):
\`\`\`sql
EXECUTE IMMEDIATE 'INSERT INTO ' || table_name || ' VALUES (1, 2)';
EXECUTE IMMEDIATE 'UPDATE ' || quote_ident(col) || ' SET x = ' || quote_literal(val);
\`\`\`
- Use quote_ident() for identifiers (table/column names)
- Use quote_literal() for string values

RETURNING RESULT SETS:
\`\`\`sql
CREATE PROCEDURE my_proc() RETURNS REFTABLE(reference_table)
LANGUAGE NZPLSQL AS
BEGIN_PROC
BEGIN
  EXECUTE IMMEDIATE 'INSERT INTO ' || REFTABLENAME || ' SELECT * FROM source';
  RETURN REFTABLE;
END;
END_PROC;
\`\`\`

EXCEPTION HANDLING:
\`\`\`sql
BEGIN
  -- statements that may fail
EXCEPTION
  WHEN TRANSACTION_ABORTED THEN
    ROLLBACK;
    RAISE ERROR 'Transaction failed: %', SQLERRM;
  WHEN OTHERS THEN
    RAISE NOTICE 'Error caught: %', SQLERRM;
END;
\`\`\`

BUILT-IN VARIABLES:
- FOUND: TRUE if last query returned rows
- ROW_COUNT: Number of rows affected by last statement
- SQLERRM: Error message text in exception handler
- REFTABLENAME: Name of temp table for REFTABLE procedures

IMPORTANT NOTES:
- Netezza does NOT support nested transactions (no SAVEPOINT)
- BEGIN/END in NZPLSQL is for grouping, NOT transaction control
- Use CALL procedure_name() or EXECUTE PROCEDURE procedure_name() to invoke
- Procedures run within the caller's transaction context
`;this.context=n,this.statusBarItem=Y.window.createStatusBarItem(Y.StatusBarAlignment.Right,100),this.statusBarItem.command="justyBaseLite.copilot.changeModel";let r=this.context.workspaceState.get("copilot.selectedModelId");r&&(this.selectedModelId=r)}async init(){try{let e=await Y.lm.selectChatModels({vendor:"copilot"});if(e.length===0)return this.statusBarItem.text="$(copilot) No Models",this.statusBarItem.tooltip="No Copilot models available",this.statusBarItem.show(),!1;if(this.selectedModelId&&(e.find(r=>r.id===this.selectedModelId)||(console.warn(`[CopilotService] Persisted model ${this.selectedModelId} no longer available, clearing...`),this.selectedModelId=void 0,await this.context.workspaceState.update("copilot.selectedModelId",void 0))),!this.selectedModelId){let n=e.find(r=>r.family.toLowerCase().includes("gpt-4o")||r.family.toLowerCase().includes("claude-3-5-sonnet"))||e[0];this.selectedModelId=n.id,await this.context.workspaceState.update("copilot.selectedModelId",this.selectedModelId),console.log(`[CopilotService] Auto-selected model: ${n.name||n.family}`)}return this.updateStatusBar(),!0}catch(e){return console.error("[CopilotService] Failed to initialize:",e),this.statusBarItem.text="$(copilot) Error",this.statusBarItem.tooltip="Click to select AI Model",this.statusBarItem.show(),!1}}async selectModel(){try{let n=(await Y.lm.selectChatModels({vendor:"copilot"})).map(i=>{let s=i,o=s.detail??s.tooltip,a=o?.match(/(0x|\d+(?:\.\d+)?x)/i)?.[1];return{label:`$(sparkle) ${i.name||i.family}`,description:a?`${a} cost`:void 0,detail:`${i.vendor} \u2022 ${i.family} \u2022 Max tokens: ${i.maxInputTokens}${o?" \u2022 "+o:""}`,modelId:i.id,model:i}});if(n.length===0){Y.window.showWarningMessage("No AI models detected. Ensure GitHub Copilot is installed and you are signed in.");return}let r=await Y.window.showQuickPick(n,{placeHolder:"Select AI Model for SQL Generation",matchOnDescription:!0,matchOnDetail:!0});if(r){this.selectedModelId=r.modelId,this.updateStatusBar();try{await this.context.workspaceState.update("copilot.selectedModelId",this.selectedModelId)}catch(i){console.warn("Failed to persist selected model:",i)}Y.window.showInformationMessage(`Model switched to: ${r.model.name||r.model.family}`)}}catch(e){Y.window.showErrorMessage(`Failed to select model: ${e}`)}}updateStatusBar(){this.selectedModelId&&Y.lm.selectChatModels().then(e=>{let n=e.find(s=>s.id===this.selectedModelId),r=n?n.name||n.family:"Copilot",i="";if(n){let s=n,a=(s.detail??s.tooltip)?.match(/(0x|\d+(?:\.\d+)?x)/i)?.[1];a&&(i=` [${a}]`)}this.statusBarItem.text=`$(copilot) ${r}${i}`,this.statusBarItem.tooltip=`Using model: ${r}${i}. Click to change.`,this.statusBarItem.show()})}async changeModel(){await this.selectModel()}async clearPersistedModel(){try{await this.context.workspaceState.update("copilot.selectedModelId",void 0),this.selectedModelId=void 0,this.statusBarItem.text="$(copilot) Select Model",this.statusBarItem.tooltip="Click to select AI Model",Y.window.showInformationMessage("Persisted model selection cleared. You will be prompted to select a model on next use.")}catch(e){let n=e instanceof Error?e.message:String(e);Y.window.showErrorMessage(`Failed to clear model selection: ${n}`)}}getPrompt(e){let n=Y.workspace.getConfiguration("justyBaseLite.prompts"),r={optimize:"Optimize the following IBM Netezza Performance Server (NPS) SQL query for performance and readability. Keep Netezza-specific syntax and features.",fix:"Fix the syntax errors in the following IBM Netezza Performance Server (NPS) SQL query. Preserve Netezza-specific SQL dialect features.",explain:"Explain what this IBM Netezza Performance Server (NPS) SQL query does, including any Netezza-specific features used."};return n.get(e)||r[e]}isProcedureCode(e){return/CREATE\s+(OR\s+REPLACE\s+)?PROCEDURE\s+/i.test(e)}async gatherContext(){let e=Y.window.activeTextEditor;if(!e)throw new Error("No active editor");let n=e.document,r=e.selection,i=r.isEmpty?n.getText():n.getText(new Y.Range(r.start,r.end));if(!i.trim())throw new Error("No SQL selected or document is empty");let s=$a(i),o=s.size>0?`Variables: ${Array.from(s).join(", ")}`:"No variables detected",a=this.connectionManager.getDocumentConnection(n.uri.toString())||this.connectionManager.getActiveConnectionName()||void 0,l=a?`Connected to: ${a}`:"No connection selected",c=this.extractTableReferences(i),u=await this.gatherTablesDDL(c,a),d=this.getRecentQueriesSummary();return{selectedSql:i,ddlContext:u,variables:o,recentQueries:d,connectionInfo:l}}extractTableReferences(e){try{let n=e.replace(/--.*$/gm,"").replace(/\/\*[\s\S]*?\*\//g,"").replace(/'([^'\\]|\\.)*'/g,""),r=new Map,i=[/FROM\s+(\w+)\.\.(\w+)/gi,/JOIN\s+(\w+)\.\.(\w+)/gi,/INSERT\s+INTO\s+(\w+)\.\.(\w+)/gi,/UPDATE\s+(\w+)\.\.(\w+)/gi,/DELETE\s+FROM\s+(\w+)\.\.(\w+)/gi];for(let o of i)n=n.replace(o,(a,l,c)=>{let u=`${l}||${c}`.toUpperCase();return r.set(u,{database:l,schema:void 0,name:c}),a.replace(/\w+\.\.\w+/,"__EXTRACTED__")});let s=[/FROM\s+(?:(\w+)\.)?(?:(\w+)\.)?(\w+)/gi,/JOIN\s+(?:(\w+)\.)?(?:(\w+)\.)?(\w+)/gi,/INSERT\s+INTO\s+(?:(\w+)\.)?(?:(\w+)\.)?(\w+)/gi,/UPDATE\s+(?:(\w+)\.)?(?:(\w+)\.)?(\w+)/gi,/DELETE\s+FROM\s+(?:(\w+)\.)?(?:(\w+)\.)?(\w+)/gi];for(let o of s){let a;for(;(a=o.exec(n))!==null;){let l,c,u;if(a[3]?(l=a[1],c=a[2],u=a[3]):a[2]?(c=a[1],u=a[2]):a[1]&&(u=a[1]),u&&u!=="__EXTRACTED__"){let d=`${l||""}|${c||""}|${u}`.toUpperCase();r.set(d,{database:l,schema:c,name:u})}}}return Array.from(r.values())}catch(n){return console.error("[CopilotService] Error extracting table references:",n),[]}}async getCachedDDL(e,n){let r=this.ddlCache.get(e),i=Date.now();if(r&&i-r.timestamp<this.DDL_CACHE_TTL)return console.log(`[CopilotService] Using cached DDL for ${e}`),r.ddl;let s=await n();return this.ddlCache.set(e,{ddl:s,timestamp:i}),s}clearDDLCache(){this.ddlCache.clear(),console.log("[CopilotService] DDL cache cleared")}async findTableSchema(e,n,r){try{let i=`
                SELECT SCHEMA 
                FROM ${n.toUpperCase()}.._V_OBJECT_DATA 
                WHERE UPPER(OBJNAME) = UPPER('${r.replace(/'/g,"''")}') 
                AND DBNAME = '${n.toUpperCase()}'
                AND OBJTYPE IN ('TABLE', 'VIEW', 'EXTERNAL TABLE')
                LIMIT 1
            `,s=await Ze(e,i);return s&&s.length>0?s[0].SCHEMA:void 0}catch(i){console.warn(`[CopilotService] Failed to find schema for ${n}..${r}:`,i);return}}async gatherTablesDDL(e,n){if(e.length===0)return"No table references detected in SQL";if(!n)return`Could not gather DDL - no connection selected.
Found table references: ${e.map(l=>[l.database,l.schema,l.name].filter(Boolean).join(".")).join(", ")}`;let r=await this.connectionManager.getConnection(n);if(!r)return`Connection "${n}" not found`;let i;try{i=await sf(r)}catch(a){return`Failed to create connection: ${a instanceof Error?a.message:String(a)}`}let s=[],o=e.slice(0,this.MAX_TABLES_FOR_DDL);e.length>this.MAX_TABLES_FOR_DDL&&(s.push(`-- NOTE: Showing DDL for ${this.MAX_TABLES_FOR_DDL} out of ${e.length} tables (limit reached)`),s.push("-- To see more tables, reduce the number of table references in your query"),s.push(""));try{for(let a of o)try{let l=a.database;if(l||(l=await this.connectionManager.getCurrentDatabase(n)||void 0),!l){s.push(`-- Table: ${a.name} (cannot determine database)`),s.push("");continue}let c=a.schema;if(c||(c=await this.findTableSchema(i,l,a.name)),!c){s.push(`-- Table: ${l}..${a.name} (table not found in database)`),s.push("");continue}let u=a.name,d=`${l}.${c}.${u}`,E=`${n}|${l}|${c}|${u}`,f=await this.getCachedDDL(E,async()=>await _a(i,l,c,u));f&&!f.toLowerCase().includes("not found")?(s.push(`-- Table: ${d}`),s.push(f),s.push("")):(s.push(`-- Table: ${d} (DDL not found)`),s.push(""))}catch(l){let c=`${a.database||""}.${a.schema||""}.${a.name}`.replace(/^\.+/,"");console.warn(`[CopilotService] Could not get DDL for ${c}:`,l),s.push(`-- Table: ${c} (error retrieving DDL: ${l instanceof Error?l.message:String(l)})`),s.push("")}}catch(a){console.error("[CopilotService] Error gathering DDL:",a),s.push(`-- Error gathering DDL: ${a instanceof Error?a.message:String(a)}`)}finally{if(i)try{await i.close()}catch(a){console.warn("[CopilotService] Error closing connection:",a)}}return s.length>0?s.join(`
`):`Could not retrieve DDL for tables: ${e.map(a=>a.name).join(", ")}`}formatDdlForPrompt(e){return e.includes("CREATE TABLE")||e.includes("-- Table:")&&!e.includes("error retrieving")&&!e.includes("not found")?"```sql\n"+e+"\n```":e}getRecentQueriesSummary(){return"Recent queries history not yet available in this context"}async sendToCopilotAgent(e,n){try{let i=`${this.buildSystemPrompt(e)}

User request: ${n}`;await Y.commands.executeCommand("workbench.action.chat.open",{query:i}),Y.window.showInformationMessage("\u2705 Sent to Copilot Chat with context")}catch(r){let i=r instanceof Error?r.message:String(r);Y.window.showErrorMessage(`Failed to send to Copilot: ${i}`)}}buildSystemPrompt(e){let r=Y.workspace.getConfiguration("justyBaseLite.copilot").get("preferredLanguage")||"english",i="";if(r==="system"){let s=Y.env.language;s&&!s.startsWith("en")&&(i=`

RESPONSE LANGUAGE: Please respond in ${s} language.`)}return`You are an expert in IBM Netezza Performance Server (NPS) / IBM PureData System for Analytics SQL.${i}

IMPORTANT NETEZZA SQL CONVENTIONS:
- Table references: Use DATABASE..TABLE (two dots) or DATABASE.SCHEMA.TABLE (three parts)
- DATABASE..TABLE syntax is valid and CORRECT in Netezza (do NOT change it to DATABASE.SCHEMA.TABLE)
- Three-part names: DATABASE.SCHEMA.TABLE are also valid
- Netezza supports specific SQL extensions and performance features
- Preserve Netezza-specific syntax like DISTRIBUTE ON, ORGANIZE ON, etc.

DATABASE CONNECTION:
${e.connectionInfo}

REFERENCED TABLE SCHEMAS:
${this.formatDdlForPrompt(e.ddlContext)}

QUERY VARIABLES:
${e.variables}

RECENT CONTEXT:
${e.recentQueries}

CURRENT SQL:
\`\`\`sql
${e.selectedSql}
\`\`\``}async sendToLanguageModel(e,n,r=!0,i){let s=Y.window.activeTextEditor;if(!s)throw new Error("No active editor");let a=`${this.buildSystemPrompt(e)}

User request:
${n}

IMPORTANT: Respond ONLY with the modified SQL code without any explanations or markdown formatting.`;if(!this.selectedModelId&&(await this.selectModel(),!this.selectedModelId))throw new Error("No AI model selected.");let l=await Y.lm.selectChatModels({vendor:"copilot"});if(l.length===0)throw new Error("No Copilot models available. Ensure GitHub Copilot extension is installed and you are signed in.");let c=l.find(p=>p.id===this.selectedModelId);if(c||(console.warn(`[CopilotService] Model ${this.selectedModelId} not found, selecting first available model...`),c=l[0],this.selectedModelId=c.id,await this.context.workspaceState.update("copilot.selectedModelId",this.selectedModelId),this.updateStatusBar(),Y.window.showWarningMessage(`Previously selected model is unavailable. Switched to: ${c.name||c.family}`)),console.log(`[CopilotService] Using model: ${c.id} (${c.name||c.family})`),!c)throw new Error("No valid Copilot model available.");let u=[Y.LanguageModelChatMessage.User(a)],d=i??new Y.CancellationTokenSource().token,E="";try{console.log(`[CopilotService] Sending request to ${c.id}`);let p=await c.sendRequest(u,{},d);for await(let h of p.text)E+=h}catch(p){throw new Error(`Model request failed: ${p instanceof Error?p.message:String(p)}`)}if(!E.trim())throw new Error("Model returned empty response.");let f=E.trim().replace(/^```sql\n?/i,"").replace(/^```\n?/i,"").replace(/\n?```$/i,"").trim();return r&&await this.showDiff(s.document,f),f}async askCopilotWithEdit(e,n){try{let i=`${this.buildSystemPrompt(e)}

${n}

Please use /edit to apply changes directly to the file.`;await Y.commands.executeCommand("workbench.action.chat.open",{query:i}),Y.window.showInformationMessage("\u2705 Sent to Copilot Chat. Type /edit in the chat to apply suggestions directly.")}catch(r){let i=r instanceof Error?r.message:String(r);Y.window.showErrorMessage(`Failed to open Copilot Chat: ${i}`)}}async fixSql(){try{let e=await this.gatherContext(),n=this.getPrompt("fix");this.isProcedureCode(e.selectedSql)&&(n+=`

${this.NZPLSQL_PROCEDURE_REFERENCE}`),await this.sendToLanguageModel(e,n,!0)}catch(e){let n=e instanceof Error?e.message:String(e);Y.window.showErrorMessage(`Error fixing SQL: ${n}`)}}async fixSqlInteractive(){try{let e=await this.gatherContext(),n=this.getPrompt("fix");this.isProcedureCode(e.selectedSql)&&(n+=`

${this.NZPLSQL_PROCEDURE_REFERENCE}`),await this.sendToChatInteractive(e,n,"Fix SQL with Context")}catch(e){let n=e instanceof Error?e.message:String(e);Y.window.showErrorMessage(`Error fixing SQL: ${n}`)}}async optimizeSql(){try{let e=await this.gatherContext(),r=`${this.getPrompt("optimize")}

${this.NETEZZA_OPTIMIZATION_RULES}`;this.isProcedureCode(e.selectedSql)&&(r+=`

${this.NZPLSQL_PROCEDURE_REFERENCE}`),await this.sendToLanguageModel(e,r,!0)}catch(e){let n=e instanceof Error?e.message:String(e);Y.window.showErrorMessage(`Error optimizing SQL: ${n}`)}}async optimizeSqlInteractive(){try{let e=await this.gatherContext(),r=`${this.getPrompt("optimize")}

${this.NETEZZA_OPTIMIZATION_RULES}`;this.isProcedureCode(e.selectedSql)&&(r+=`

${this.NZPLSQL_PROCEDURE_REFERENCE}`),await this.sendToChatInteractive(e,r,"Optimize SQL")}catch(e){let n=e instanceof Error?e.message:String(e);Y.window.showErrorMessage(`Error optimizing SQL: ${n}`)}}async explainSql(){try{let e=await this.gatherContext(),n=this.getPrompt("explain"),r=await this.sendToLanguageModel(e,n,!1),i=await Y.workspace.openTextDocument({content:`# SQL Query Explanation

${r}`,language:"markdown"});await Y.window.showTextDocument(i,Y.ViewColumn.Beside),Y.window.showInformationMessage("\u2705 SQL explanation opened in new editor")}catch(e){let n=e instanceof Error?e.message:String(e);Y.window.showErrorMessage(`Error explaining SQL: ${n}`)}}async explainSqlInteractive(){try{let e=await this.gatherContext(),n=this.getPrompt("explain");await this.sendToChatInteractive(e,n,"Explain SQL")}catch(e){let n=e instanceof Error?e.message:String(e);Y.window.showErrorMessage(`Error explaining SQL: ${n}`)}}async askCustomQuestion(){try{let e=await Y.window.showInputBox({prompt:"Ask Copilot about this SQL (with full database context)",placeHolder:'e.g., "How can I improve this query?" or "Add an index hint"'});if(!e)return;let n=await this.gatherContext(),r=await Y.window.showQuickPick([{label:"\u270F\uFE0F Apply SQL Changes",description:"Copilot will modify the SQL in editor",value:"edit"},{label:"\u{1F4A1} Just Ask for Advice",description:"Get response in new document without modifying code",value:"advice"}],{placeHolder:"How would you like Copilot to respond?"});if(!r)return;if(r.value==="edit")await this.sendToLanguageModel(n,e,!0);else{let s=await this.sendToLanguageModel(n,e,!1),o=await Y.workspace.openTextDocument({content:`# Copilot Advice

**Question:** ${e}

${s}`,language:"markdown"});await Y.window.showTextDocument(o,Y.ViewColumn.Beside)}}catch(e){let n=e instanceof Error?e.message:String(e);Y.window.showErrorMessage(`Error: ${n}`)}}async askCustomQuestionInteractive(){try{let e=await Y.window.showInputBox({prompt:"Ask Copilot about this SQL (opens in chat for interactive discussion)",placeHolder:'e.g., "How can I improve this query?" or "Add an index hint"'});if(!e)return;let n=await this.gatherContext();await this.sendToChatInteractive(n,e,"Custom Question")}catch(e){let n=e instanceof Error?e.message:String(e);Y.window.showErrorMessage(`Error: ${n}`)}}async generateSqlInteractive(){try{let e=await Y.window.showInputBox({prompt:"Describe the SQL query you need in natural language",placeHolder:'e.g., "Find all customers who made purchases over $1000 last month"',ignoreFocusOut:!0});if(!e)return;await Y.window.withProgress({location:Y.ProgressLocation.Notification,title:"Gathering database schema...",cancellable:!1},async()=>{let n=await this.gatherSchemaOverview();if(!n){Y.window.showErrorMessage("Could not gather schema information. Please ensure you are connected to a database.");return}let r=this.buildGenerateSqlPrompt(e,n),i=await this.connectionManager.getActiveConnectionName(),s={selectedSql:"",ddlContext:n,variables:"",recentQueries:this.getRecentQueriesSummary(),connectionInfo:i?`Connected to: ${i}`:"No active connection"};await this.sendToChatInteractiveWithCustomPrompt(s,r,"Generate SQL")})}catch(e){let n=e instanceof Error?e.message:String(e);Y.window.showErrorMessage(`Error generating SQL: ${n}`)}}async gatherSchemaOverview(){let e=await this.connectionManager.getActiveConnectionName();if(!e)return null;let n=await this.connectionManager.getConnection(e);if(!n)return null;let r=null;try{r=await sf(n);let i=await this.connectionManager.getCurrentDatabase(e);if(!i)return null;let s=`
                SELECT 
                    O.SCHEMA,
                    O.OBJNAME AS TABLE_NAME,
                    COALESCE(O.DESCRIPTION, '') AS TABLE_DESCRIPTION,
                    C.ATTNAME AS COLUMN_NAME,
                    C.FORMAT_TYPE,
                    COALESCE(C.DESCRIPTION, '') AS COLUMN_DESCRIPTION,
                    C.ATTNUM,
                    MAX(CASE WHEN K.CONTYPE = 'p' THEN 1 ELSE 0 END) AS IS_PK,
                    MAX(CASE WHEN K.CONTYPE = 'f' THEN 1 ELSE 0 END) AS IS_FK
                FROM ${i.toUpperCase()}.._V_RELATION_COLUMN C
                JOIN ${i.toUpperCase()}.._V_OBJECT_DATA O ON C.OBJID = O.OBJID
                LEFT JOIN ${i.toUpperCase()}.._V_RELATION_KEYDATA K 
                    ON UPPER(K.RELATION) = UPPER(O.OBJNAME) 
                    AND UPPER(K.SCHEMA) = UPPER(O.SCHEMA)
                    AND UPPER(K.ATTNAME) = UPPER(C.ATTNAME)
                    AND K.CONTYPE IN ('p', 'f')
                WHERE UPPER(O.DBNAME) = UPPER('${i}')
                AND O.OBJTYPE IN ('TABLE', 'VIEW')
                GROUP BY O.SCHEMA, O.OBJNAME, O.DESCRIPTION, C.ATTNAME, C.FORMAT_TYPE, C.DESCRIPTION, C.ATTNUM
                ORDER BY O.SCHEMA, O.OBJNAME, C.ATTNUM
            `,o=await Ze(r,s);if(!o||o.length===0)return"No tables found in database";let a=new Map;for(let u of o){let d=`${u.SCHEMA}.${u.TABLE_NAME}`;a.has(d)||a.set(d,{schema:u.SCHEMA,tableName:u.TABLE_NAME,tableDescription:u.TABLE_DESCRIPTION,columns:[]}),a.get(d).columns.push({name:u.COLUMN_NAME,type:u.FORMAT_TYPE,description:u.COLUMN_DESCRIPTION,isPk:Number(u.IS_PK)===1,isFk:Number(u.IS_FK)===1})}let l=[];l.push(`DATABASE: ${i}`),l.push(`TABLES: ${a.size}`),l.push(""),l.push("SCHEMA OVERVIEW:"),l.push("================"),l.push("");let c=new Map;for(let[u,d]of a)c.has(d.schema)||c.set(d.schema,new Map),c.get(d.schema).set(u,d);for(let[u,d]of c){l.push(`[SCHEMA: ${u}]`);for(let[,E]of d){let f=E.tableDescription?` -- ${E.tableDescription}`:"";l.push(`  TABLE: ${E.tableName}${f}`);let p=E.columns.map(h=>{let T=[];h.isPk&&T.push("PK"),h.isFk&&T.push("FK");let S=T.length>0?` [${T.join(", ")}]`:"",I=h.description?` (${h.description})`:"";return`    - ${h.name}: ${h.type}${S}${I}`});l.push(p.join(`
`)),l.push("")}}return l.join(`
`)}catch(i){return console.error("[CopilotService] Error gathering schema overview:",i),null}finally{if(r)try{await r.close()}catch(i){console.warn("[CopilotService] Error closing connection:",i)}}}buildGenerateSqlPrompt(e,n){return`You are a Netezza SQL expert. The user wants to generate a SQL query based on their description.

USER REQUEST:
${e}

AVAILABLE DATABASE SCHEMA:
\`\`\`
${n}
\`\`\`

INSTRUCTIONS:
1. Analyze the user's request and identify which tables and columns are relevant
2. Generate a complete, executable SQL query for Netezza
3. Use proper JOIN conditions based on likely relationships (matching column names like ID fields)
4. Include appropriate WHERE clauses, GROUP BY, ORDER BY as needed
5. Use table aliases for readability
6. Add comments explaining the query logic

If the request is ambiguous, ask clarifying questions before generating the SQL.
If certain tables or columns seem missing, suggest what additional information might be needed.

Please generate the SQL query:`}async sendToChatInteractiveWithCustomPrompt(e,n,r){try{let i=n;await Y.commands.executeCommand("workbench.action.chat.open",{query:i}),Y.window.showInformationMessage(`\u2705 ${r} sent to Copilot Chat. Describe your query requirements for interactive SQL generation.`)}catch(i){let s=i instanceof Error?i.message:String(i);Y.window.showErrorMessage(`Failed to open Copilot Chat: ${s}`)}}async showAvailableModels(){try{let e=await Y.lm.selectChatModels();if(e.length===0){Y.window.showWarningMessage("No Language Models available");return}let n=e.map(s=>`\u2022 ${s.id}
  Vendor: ${s.vendor}
  Family: ${s.family}
`).join(`
`),r=e.filter(s=>s.vendor==="copilot"),i=await Y.workspace.openTextDocument({content:`# Available Language Models

Total models: ${e.length}
Copilot models: ${r.length}

## All Models

${n}`,language:"markdown"});await Y.window.showTextDocument(i)}catch(e){let n=e instanceof Error?e.message:String(e);Y.window.showErrorMessage(`Error getting models: ${n}`)}}async sendToChatInteractive(e,n,r){try{let s=`${this.buildSystemPrompt(e)}

${n}`;await Y.commands.executeCommand("workbench.action.chat.open",{query:s}),Y.window.showInformationMessage(`\u2705 ${r} sent to Copilot Chat. Check the Chat panel for interactive discussion.`)}catch(i){let s=i instanceof Error?i.message:String(i);Y.window.showErrorMessage(`Failed to open Copilot Chat: ${s}`)}}async showDiff(e,n){let r=Y.window.activeTextEditor,i;r&&!r.selection.isEmpty?i=r.selection:i=new Y.Range(new Y.Position(0,0),new Y.Position(e.lineCount,0));try{let s=e.getText(i);if(s.trim()===n.trim()){Y.window.showInformationMessage("No changes detected - content is identical.");return}let o=await Y.workspace.openTextDocument({content:n,language:e.languageId}),a=await Y.workspace.openTextDocument({content:s,language:e.languageId});await Y.commands.executeCommand("vscode.diff",a.uri,o.uri,`AI Suggestions: ${e.fileName.split(/[\\\\/]/).pop()||"file"}`,{preview:!0});let l=await Y.window.showInformationMessage("Review the AI-suggested changes in the diff editor.",{modal:!0},"Apply Changes","Apply & Close Diff","Discard");if(l==="Apply Changes"||l==="Apply & Close Diff"){let c=new Y.WorkspaceEdit;c.replace(e.uri,i,n),await Y.workspace.applyEdit(c)?(Y.window.showInformationMessage("\u2705 Changes applied successfully."),l==="Apply & Close Diff"&&await Y.commands.executeCommand("workbench.action.closeActiveEditor")):Y.window.showErrorMessage("Failed to apply changes.")}else l==="Discard"&&await Y.commands.executeCommand("workbench.action.closeActiveEditor")}catch(s){console.error("Diff error:",s),Y.window.showErrorMessage(`Failed to show diff: ${s instanceof Error?s.message:String(s)}`)}}async describeDataWithCopilot(e,n){try{if(!e||e.length===0){Y.window.showWarningMessage("No data to describe");return}let r=e.length,i=Object.keys(e[0]||{}).length,s=r>50?"50 (limited for context)":r;if(await Y.window.showWarningMessage(`\u26A0\uFE0F Privacy Notice: You are about to send ${s} rows with ${i} columns to GitHub Copilot AI.

This data will be transmitted to external servers for analysis. Please ensure the data does NOT contain sensitive, confidential, or personally identifiable information.

Do you want to proceed?`,{modal:!0},"Yes, Send to Copilot","Cancel")!=="Yes, Send to Copilot"){Y.window.showInformationMessage("Data analysis cancelled - no data was sent.");return}let a=this.convertDataToMarkdown(e),l=`Describe and analyze the following data from IBM Netezza Performance Server:

`;n&&(l+=`**Source Query:**
\`\`\`sql
${n}
\`\`\`

`),l+=`**Data (${e.length} rows):**

${a}

`,l+=`Please provide:
`,l+=`1. A summary of the data patterns and key observations
`,l+=`2. Any notable trends, outliers, or anomalies
`,l+="3. Suggestions for further analysis if applicable",await Y.commands.executeCommand("workbench.action.chat.open",{query:l}),Y.window.showInformationMessage("\u2705 Data sent to Copilot Chat for analysis. Check the Chat panel for results.")}catch(r){let i=r instanceof Error?r.message:String(r);Y.window.showErrorMessage(`Failed to send data to Copilot: ${i}`)}}async fixSqlError(e,n){try{if(!n.trim()){Y.window.showWarningMessage("No SQL to fix");return}await Y.window.withProgress({location:Y.ProgressLocation.Notification,title:"Gathering table DDL for Copilot...",cancellable:!1},async()=>{let i=Y.workspace.getConfiguration("justyBaseLite.copilot").get("preferredLanguage")||"english",s="";if(i==="system"){let d=Y.env.language;d&&!d.startsWith("en")&&(s=`

Please respond in ${d} language.`)}let o=this.extractTableReferences(n),a=this.connectionManager.getActiveConnectionName()||void 0,l=await this.gatherTablesDDL(o,a),u=`${this.getPrompt("fix")}${s}

IMPORTANT NETEZZA SQL CONVENTIONS:
- Table references: Use DATABASE..TABLE (two dots) or DATABASE.SCHEMA.TABLE (three parts)
- DATABASE..TABLE syntax is valid and CORRECT in Netezza (do NOT change it to DATABASE.SCHEMA.TABLE)
- Three-part names: DATABASE.SCHEMA.TABLE are also valid
- Netezza supports specific SQL extensions and performance features

**Error from IBM Netezza:**
\`\`\`
${e}
\`\`\`

**SQL Query that caused the error:**
\`\`\`sql
${n}
\`\`\`
`;l&&!l.includes("No table references")&&!l.includes("Could not gather DDL")&&(u+=`
**Referenced Table Schemas (DDL):**
\`\`\`sql
${l}
\`\`\`
`),this.isProcedureCode(n)&&(u+=`
${this.NZPLSQL_PROCEDURE_REFERENCE}
`),u+=`
Please:
1. Explain what caused this error
2. Provide the corrected SQL query
3. Explain the fix you made`,await Y.commands.executeCommand("workbench.action.chat.open",{query:u})}),Y.window.showInformationMessage("\u2705 Error sent to Copilot Chat for fixing. Check the Chat panel.")}catch(r){let i=r instanceof Error?r.message:String(r);Y.window.showErrorMessage(`Failed to send error to Copilot: ${i}`)}}convertDataToMarkdown(e){if(e.length===0)return"*No data*";let n=e.slice(0,50),r=e.length>50,i=Object.keys(n[0]),s="| "+i.join(" | ")+` |
`;s+="| "+i.map(()=>"---").join(" | ")+` |
`;for(let o of n){let a=i.map(l=>{let c=o[l];if(c==null)return"NULL";let u=String(c).replace(/\|/g,"\\|");return u.length>100?u.substring(0,97)+"...":u});s+="| "+a.join(" | ")+` |
`}return r&&(s+=`
*... and ${e.length-50} more rows (total: ${e.length} rows)*`),s}};var af=z(require("vscode"));function Bn(t){return`${t.dbName}.${t.schema}.${t.label}`}async function Cr(t,e){return await t.getConnection(e||t.getActiveConnectionName()||"")?!0:(af.window.showErrorMessage("No database connection"),!1)}async function jt(t,e){return af.window.withProgress({location:af.ProgressLocation.Notification,title:t,cancellable:!1},e)}function my(t){return t.replace(/'/g,"''")}function lf(t){return/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(t.trim())}var Nn=z(require("vscode"));En();function l6(t){let{context:e,connectionManager:n,schemaProvider:r}=t;return[Nn.commands.registerCommand("netezza.copySelectAll",async i=>{if(i&&i.label&&i.dbName&&i.schema){let s=`SELECT * FROM ${i.dbName}.${i.schema}.${i.label} LIMIT 1000;`,o=await Nn.window.showQuickPick([{label:"Open in Editor",description:"Open SQL in a new editor",value:"editor"},{label:"Copy to Clipboard",description:"Copy SQL to clipboard",value:"clipboard"}],{placeHolder:"How would you like to access the SQL?"});if(o)if(o.value==="editor"){let a=await Nn.workspace.openTextDocument({content:s,language:"sql"});await Nn.window.showTextDocument(a)}else await Nn.env.clipboard.writeText(s),Nn.window.showInformationMessage("Copied to clipboard")}}),Nn.commands.registerCommand("netezza.copyDrop",async i=>{if(i&&i.label&&i.dbName&&i.schema&&i.objType){let s=Bn(i),o=`DROP ${i.objType} ${s};`;if(await Nn.window.showWarningMessage(`Are you sure you want to delete ${i.objType.toLowerCase()} "${s}"?`,{modal:!0},"Yes, delete","Cancel")==="Yes, delete")try{await jt(`Deleting ${i.objType.toLowerCase()} ${s}...`,async()=>{await fn(e,o,!0,i.connectionName,n)}),Nn.window.showInformationMessage(`Deleted ${i.objType.toLowerCase()}: ${s}`),r.refresh()}catch(l){let c=l instanceof Error?l.message:String(l);Nn.window.showErrorMessage(`Error during deletion: ${c}`)}}}),Nn.commands.registerCommand("netezza.copyName",i=>{if(i&&i.label&&i.dbName&&i.schema){let s=Bn(i);Nn.env.clipboard.writeText(s),Nn.window.showInformationMessage("Copied to clipboard")}})]}var Ee=z(require("vscode"));En();function c6(t){let{context:e,connectionManager:n,metadataCache:r,schemaProvider:i}=t;return[Ee.commands.registerCommand("netezza.grantPermissions",async s=>{if(s&&s.label&&s.dbName&&s.schema&&s.objType){let o=Bn(s),a=await Ee.window.showQuickPick([{label:"SELECT",description:"Privileges to read data"},{label:"INSERT",description:"Privileges to insert data"},{label:"UPDATE",description:"Privileges to update data"},{label:"DELETE",description:"Privileges to delete data"},{label:"ALL",description:"All privileges (SELECT, INSERT, UPDATE, DELETE)"},{label:"LIST",description:"Privileges to list objects"}],{placeHolder:"Select privilege type"});if(!a)return;let l=await Ee.window.showInputBox({prompt:"Enter user or group name",placeHolder:"e.g. SOME_USER or GROUP_NAME",validateInput:d=>!d||d.trim().length===0?"User/group name cannot be empty":lf(d)?null:"Invalid user/group name"});if(!l)return;let c=`GRANT ${a.label} ON ${o} TO ${l.trim().toUpperCase()};`;if(await Ee.window.showInformationMessage(`Execute: ${c}`,{modal:!0},"Yes, execute","Cancel")==="Yes, execute"){if(!await Cr(n))return;try{await jt(`Granting ${a.label} on ${o}...`,async()=>{await fn(e,c,!0,s.connectionName,n)}),Ee.window.showInformationMessage(`Granted ${a.label} on ${o} to ${l.trim().toUpperCase()}`)}catch(d){let E=d instanceof Error?d.message:String(d);Ee.window.showErrorMessage(`Error granting privileges: ${E}`)}}}}),Ee.commands.registerCommand("netezza.addTableComment",async s=>{if(s&&s.label&&s.dbName&&s.schema&&s.objType==="TABLE"){let o=Bn(s),a=await Ee.window.showInputBox({prompt:"Enter comment for table",placeHolder:"e.g. Table contains customer data",value:s.objectDescription||""});if(a===void 0)return;let l=`COMMENT ON TABLE ${o} IS '${my(a)}';`;try{if(!await Cr(n))return;await fn(e,l,!0,s.connectionName,n),Ee.window.showInformationMessage(`Comment added to table: ${o}`),i.refresh()}catch(c){let u=c instanceof Error?c.message:String(c);Ee.window.showErrorMessage(`Error adding comment: ${u}`)}}}),Ee.commands.registerCommand("netezza.addColumnComment",async s=>{if(s&&s.label&&s.dbName&&s.parentName){let o=s.label.split(" ")[0],a=s.parentName,l=s.schema||"ADMIN",c=`${s.dbName}.${l}.${a}.${o}`,u=await Ee.window.showInputBox({prompt:`Enter comment for column "${o}"`,placeHolder:"e.g. Customer ID from CRM",value:s.objectDescription||""});if(u===void 0)return;let d=`COMMENT ON COLUMN ${c} IS '${my(u)}';`;try{if(!await Cr(n))return;await fn(e,d,!0,s.connectionName,n),Ee.window.showInformationMessage(`Comment added to column: ${o}`),i.refresh()}catch(E){let f=E instanceof Error?E.message:String(E);Ee.window.showErrorMessage(`Error adding comment: ${f}`)}}}),Ee.commands.registerCommand("netezza.truncateTable",async s=>{if(s&&s.label&&s.dbName&&s.schema&&s.objType==="TABLE"){let o=Bn(s),a=`TRUNCATE TABLE ${o};`;if(await Ee.window.showWarningMessage(`\u26A0\uFE0F WARNING: Are you sure you want to delete ALL data from the table "${o}"?

${a}

This operation is IRREVERSIBLE!`,{modal:!0},"Yes, delete all data","Cancel")==="Yes, delete all data"){if(!await Cr(n))return;try{await jt(`Clearing table ${o}...`,async()=>{await fn(e,a,!0,s.connectionName,n)}),Ee.window.showInformationMessage(`Table cleared: ${o}`)}catch(c){let u=c instanceof Error?c.message:String(c);Ee.window.showErrorMessage(`Error clearing table: ${u}`)}}}}),Ee.commands.registerCommand("netezza.addPrimaryKey",async s=>{if(s&&s.label&&s.dbName&&s.schema&&s.objType==="TABLE"){let o=Bn(s),a=await Ee.window.showInputBox({prompt:"Enter primary key constraint name",placeHolder:`e.g. PK_${s.label}`,value:`PK_${s.label}`,validateInput:E=>!E||E.trim().length===0?"Constraint name cannot be empty":lf(E)?null:"Invalid constraint name"});if(!a)return;let l=await Ee.window.showInputBox({prompt:"Enter primary key column names (comma separated)",placeHolder:"e.g. COL1, COL2 or ID",validateInput:E=>!E||E.trim().length===0?"You must provide at least one column":null});if(!l)return;let c=l.split(",").map(E=>E.trim().toUpperCase()).join(", "),u=`ALTER TABLE ${o} ADD CONSTRAINT ${a.trim().toUpperCase()} PRIMARY KEY (${c});`;if(await Ee.window.showInformationMessage(`Add primary key to table "${o}"?

${u}`,{modal:!0},"Yes, add","Cancel")==="Yes, add"){if(!await Cr(n))return;try{await jt(`Adding primary key to ${o}...`,async()=>{await fn(e,u,!0,s.connectionName,n)}),Ee.window.showInformationMessage(`Primary key added: ${a.trim().toUpperCase()}`),i.refresh()}catch(E){let f=E instanceof Error?E.message:String(E);Ee.window.showErrorMessage(`Error adding primary key: ${f}`)}}}}),Ee.commands.registerCommand("netezza.addForeignKey",async s=>{if(s&&s.label&&s.dbName&&s.schema&&s.objType==="TABLE"){let o=Bn(s),a=await Ee.window.showInputBox({prompt:"Enter foreign key constraint name",placeHolder:`e.g. FK_${s.label}`,value:`FK_${s.label}`,validateInput:h=>!h||h.trim().length===0?"Constraint name cannot be empty":lf(h)?null:"Invalid constraint name"});if(!a)return;let l=await Ee.window.showInputBox({prompt:"Enter foreign key column names (comma separated)",placeHolder:"e.g. COL1, COL2 or ID",validateInput:h=>!h||h.trim().length===0?"You must provide at least one column":null});if(!l)return;let c=await Ee.window.showInputBox({prompt:"Enter referenced table name (schema.table)",placeHolder:"e.g. SCHEMA_NAME.TABLE_NAME",validateInput:h=>!h||h.trim().length===0?"Referenced table name cannot be empty":null});if(!c)return;let u=await Ee.window.showInputBox({prompt:"Enter referenced table column names (comma separated)",placeHolder:"e.g. COL1, COL2 or ID",validateInput:h=>!h||h.trim().length===0?"You must provide at least one column":null});if(!u)return;let d=l.split(",").map(h=>h.trim().toUpperCase()).join(", "),E=u.split(",").map(h=>h.trim().toUpperCase()).join(", "),f=`ALTER TABLE ${o} ADD CONSTRAINT ${a.trim().toUpperCase()} FOREIGN KEY (${d}) REFERENCES ${c.trim().toUpperCase()} (${E});`;if(await Ee.window.showInformationMessage(`Add foreign key to table "${o}"?

${f}`,{modal:!0},"Yes, add","Cancel")==="Yes, add"){if(!await Cr(n))return;try{await jt(`Adding foreign key to ${o}...`,async()=>{await fn(e,f,!0,s.connectionName,n)}),Ee.window.showInformationMessage(`Foreign key added: ${a.trim().toUpperCase()}`),i.refresh()}catch(h){let T=h instanceof Error?h.message:String(h);Ee.window.showErrorMessage(`Error adding foreign key: ${T}`)}}}}),Ee.commands.registerCommand("netezza.addUniqueConstraint",async s=>{if(s&&s.label&&s.dbName&&s.schema&&s.objType==="TABLE"){let o=Bn(s),a=await Ee.window.showInputBox({prompt:"Enter unique constraint name",placeHolder:`e.g. UQ_${s.label}`,value:`UQ_${s.label}`,validateInput:E=>!E||E.trim().length===0?"Constraint name cannot be empty":lf(E)?null:"Invalid constraint name"});if(!a)return;let l=await Ee.window.showInputBox({prompt:"Enter unique constraint column names (comma separated)",placeHolder:"e.g. COL1, COL2 or EMAIL",validateInput:E=>!E||E.trim().length===0?"You must provide at least one column":null});if(!l)return;let c=l.split(",").map(E=>E.trim().toUpperCase()).join(", "),u=`ALTER TABLE ${o} ADD CONSTRAINT ${a.trim().toUpperCase()} UNIQUE (${c});`;if(await Ee.window.showInformationMessage(`Add unique constraint to table "${o}"?

${u}`,{modal:!0},"Yes, add","Cancel")==="Yes, add"){if(!await Cr(n))return;try{await jt(`Adding unique constraint to ${o}...`,async()=>{await fn(e,u,!0,s.connectionName,n)}),Ee.window.showInformationMessage(`Unique constraint added: ${a.trim().toUpperCase()}`),i.refresh()}catch(E){let f=E instanceof Error?E.message:String(E);Ee.window.showErrorMessage(`Error adding unique constraint: ${f}`)}}}}),Ee.commands.registerCommand("netezza.changeOwner",async s=>{if(s&&s.label&&s.dbName&&s.schema&&s.objType==="TABLE"){let o=Bn(s),a=await Ee.window.showInputBox({prompt:"Enter new owner name",placeHolder:"e.g. USER_NAME or GROUP_NAME"});if(!a)return;let l=`ALTER TABLE ${o} OWNER TO ${a.trim()};`;try{if(!await Cr(n))return;await fn(e,l,!0,s.connectionName,n),Ee.window.showInformationMessage(`Owner changed to ${a} for ${o}`),r.invalidateSchema(s.connectionName,s.dbName,s.schema),i.refresh()}catch(c){let u=c instanceof Error?c.message:String(c);Ee.window.showErrorMessage(`Error changing owner: ${u}`)}}}),Ee.commands.registerCommand("netezza.renameTable",async s=>{if(s&&s.label&&s.dbName&&s.schema&&s.objType==="TABLE"){let o=Bn(s),a=await Ee.window.showInputBox({prompt:"Enter new table name",placeHolder:"NewTableName",value:s.label});if(!a||a===s.label)return;let l=`ALTER TABLE ${o} RENAME TO ${a.trim()};`;try{if(!await Cr(n))return;await fn(e,l,!0,s.connectionName,n),Ee.window.showInformationMessage(`Table renamed to ${a}`),r.invalidateSchema(s.connectionName,s.dbName,s.schema),i.refresh()}catch(c){let u=c instanceof Error?c.message:String(c);Ee.window.showErrorMessage(`Error renaming table: ${u}`)}}})]}var et=z(require("vscode"));En();function f6(t){let{context:e,connectionManager:n}=t;return[et.commands.registerCommand("netezza.groomTable",async r=>{if(r&&r.label&&r.dbName&&r.schema&&r.objType==="TABLE"){let i=Bn(r),s=await et.window.showQuickPick([{label:"RECORDS ALL",description:"Groom all records (reclaim space from deleted rows)"},{label:"RECORDS READY",description:"Groom only ready records"},{label:"PAGES ALL",description:"Groom all pages (reorganize data pages)"},{label:"PAGES START",description:"Groom pages from start"},{label:"VERSIONS",description:"Groom versions (clean up old row versions)"}],{placeHolder:"Select GROOM mode"});if(!s)return;let o=await et.window.showQuickPick([{label:"DEFAULT",description:"Use default backupset",value:"DEFAULT"},{label:"NONE",description:"No backupset",value:"NONE"},{label:"Custom",description:"Specify custom backupset ID",value:"CUSTOM"}],{placeHolder:"Select RECLAIM BACKUPSET option"});if(!o)return;let a=o.value;if(o.value==="CUSTOM"){let u=await et.window.showInputBox({prompt:"Enter backupset ID",placeHolder:"e.g. 12345",validateInput:d=>!d||d.trim().length===0?"Backupset ID cannot be empty":/^\d+$/.test(d.trim())?null:"Backupset ID must be a number"});if(!u)return;a=u.trim()}let l=`GROOM TABLE ${i} ${s.label} RECLAIM BACKUPSET ${a};`;if(await et.window.showWarningMessage(`Execute GROOM on table "${i}"?

${l}

Warning: This operation may be time-consuming for large tables.`,{modal:!0},"Yes, execute","Cancel")==="Yes, execute")try{let u=Date.now();await jt(`GROOM TABLE ${i} (${s.label})...`,async()=>{await fn(e,l,!0,r.connectionName,n)});let d=((Date.now()-u)/1e3).toFixed(1);et.window.showInformationMessage(`GROOM completed successfully (${d}s): ${i}`)}catch(u){let d=u instanceof Error?u.message:String(u);et.window.showErrorMessage(`Error during GROOM: ${d}`)}}}),et.commands.registerCommand("netezza.generateStatistics",async r=>{if(r&&r.label&&r.dbName&&r.schema&&r.objType==="TABLE"){let i=Bn(r),s=`GENERATE EXPRESS STATISTICS ON ${i};`;if(await et.window.showInformationMessage(`Generate statistics for table "${i}"?

${s}`,{modal:!0},"Yes, generate","Cancel")==="Yes, generate")try{let a=Date.now();await jt(`Generating statistics for ${i}...`,async()=>{await fn(e,s,!0,r.connectionName,n)});let l=((Date.now()-a)/1e3).toFixed(1);et.window.showInformationMessage(`Statistics generated successfully (${l}s): ${i}`)}catch(a){let l=a instanceof Error?a.message:String(a);et.window.showErrorMessage(`Error generating statistics: ${l}`)}}}),et.commands.registerCommand("netezza.checkSkew",async r=>{if(r&&r.label&&r.dbName&&r.schema&&r.objType==="TABLE"){let i=Bn(r),s=`SELECT datasliceid, count(*) as row_count FROM ${i} GROUP BY 1 ORDER BY 1;`;if(await et.window.showInformationMessage(`Check skew for "${i}"?

This will run: ${s}

Note: This may be slow on very large tables.`,{modal:!0},"Yes, check skew","Cancel")==="Yes, check skew"){let a=await et.workspace.openTextDocument({content:`-- Check Skew for ${i}
${s}`,language:"sql"});await et.window.showTextDocument(a),et.commands.executeCommand("netezza.runQuery")}}}),et.commands.registerCommand("netezza.recreateTable",async r=>{if(!r||!r.label||!r.dbName||!r.schema||!r.objType||r.objType!=="TABLE"){et.window.showErrorMessage("Invalid object selected for Recreate Table");return}let i=await n.getConnection(n.getActiveConnectionName()||"");if(!i){et.window.showErrorMessage("Connection not configured. Please connect via Netezza: Connect...");return}let s=await et.window.showInputBox({prompt:"Enter temporary table name (Optional)",placeHolder:"Leave empty to auto-generate timestamped name",value:""});if(s!==void 0)try{await jt(`Generating Recreate Script for ${r.label}...`,async()=>{let{generateRecreateTableScript:o}=await Promise.resolve().then(()=>(d6(),u6)),a=await o(i,r.dbName,r.schema,r.label,s||void 0);if(a.success&&a.sqlScript){let l=await et.workspace.openTextDocument({content:a.sqlScript,language:"sql"});await et.window.showTextDocument(l),et.window.showInformationMessage(`Recreate script generated for ${r.label}`)}else throw new Error(a.error||"Script generation failed")})}catch(o){let a=o instanceof Error?o.message:String(o);et.window.showErrorMessage(`Error generating recreate script: ${a}`)}})]}var be=z(require("vscode"));En();function p6(t){let{context:e,connectionManager:n}=t;return[be.commands.registerCommand("netezza.createDDL",async r=>{try{if(!r||!r.label||!r.dbName||!r.schema||!r.objType){be.window.showErrorMessage("Invalid object selected for DDL generation");return}let i=await n.getConnection(n.getActiveConnectionName()||"");if(!i){be.window.showErrorMessage("Connection not configured. Please connect via Netezza: Connect...");return}await jt(`Generating DDL for ${r.objType} ${r.label}...`,async()=>{let{generateDDL:s}=await Promise.resolve().then(()=>(cf(),gy)),o=await s(i,r.dbName,r.schema,r.label,r.objType);if(o.success&&o.ddlCode){let a=await be.window.showQuickPick([{label:"Open in Editor",description:"Open DDL code in a new editor",value:"editor"},{label:"Copy to Clipboard",description:"Copy DDL code to clipboard",value:"clipboard"}],{placeHolder:"How would you like to access the DDL code?"});if(a)if(a.value==="editor"){let l=await be.workspace.openTextDocument({content:o.ddlCode,language:"sql"});await be.window.showTextDocument(l),be.window.showInformationMessage(`DDL code generated for ${r.objType} ${r.label}`)}else a.value==="clipboard"&&(await be.env.clipboard.writeText(o.ddlCode),be.window.showInformationMessage("DDL code copied to clipboard"))}else throw new Error(o.error||"DDL generation failed")})}catch(i){let s=i instanceof Error?i.message:String(i);be.window.showErrorMessage(`Error generating DDL: ${s}`)}}),be.commands.registerCommand("netezza.compareSchema",async r=>{try{if(!r||!r.label||!r.dbName||!r.schema||!r.objType){be.window.showErrorMessage("Invalid object selected for comparison");return}let i=await n.getConnection(n.getActiveConnectionName()||"");if(!i){be.window.showErrorMessage("Connection not configured. Please connect via Netezza: Connect...");return}let s=r.objType,o=`${r.dbName}.${r.schema}.${r.label}`,a=[];if(await jt(`Loading ${s}s for comparison...`,async()=>{let c=s==="PROCEDURE"?"OBJTYPE = 'PROCEDURE'":s==="VIEW"?"OBJTYPE = 'VIEW'":"OBJTYPE = 'TABLE'",u=s==="PROCEDURE"?`SELECT DISTINCT SCHEMA, PROCEDURESIGNATURE AS OBJNAME FROM ${r.dbName}.._V_PROCEDURE WHERE DATABASE = '${r.dbName.toUpperCase()}' ORDER BY SCHEMA, PROCEDURESIGNATURE`:`SELECT SCHEMA, OBJNAME FROM ${r.dbName}.._V_OBJECT_DATA WHERE DBNAME = '${r.dbName.toUpperCase()}' AND ${c} ORDER BY SCHEMA, OBJNAME`,d=await ce(e,u,!0,n,r.connectionName);if(d&&d.data&&d.data.length>0){let E=Te(d);for(let f of E){let p=f.OBJNAME,h=f.SCHEMA;`${r.dbName}.${h}.${p}`.toUpperCase()!==o.toUpperCase()&&a.push({label:p,description:`${r.dbName}.${h}`,db:r.dbName,schema:h,name:p})}}}),a.length===0){be.window.showWarningMessage(`No other ${s}s found to compare with.`);return}let l=await be.window.showQuickPick(a,{placeHolder:`Select ${s} to compare with ${r.label}`,matchOnDescription:!0});if(!l)return;await jt(`Comparing ${r.label} with ${l.label}...`,async()=>{if(s==="PROCEDURE"){let{compareProcedures:c}=await Promise.resolve().then(()=>(_y(),Iy)),{SchemaCompareView:u}=await Promise.resolve().then(()=>(Cy(),Oy)),d=await c(i,r.dbName,r.schema,r.label,l.db,l.schema,l.name);u.createOrShow(e.extensionUri,d,"procedure")}else{let{compareTableStructures:c}=await Promise.resolve().then(()=>(_y(),Iy)),{SchemaCompareView:u}=await Promise.resolve().then(()=>(Cy(),Oy)),d=await c(i,r.dbName,r.schema,r.label,l.db,l.schema,l.name);u.createOrShow(e.extensionUri,d,"table")}}),be.window.showInformationMessage(`Comparison complete: ${r.label} \u2194 ${l.label}`)}catch(i){let s=i instanceof Error?i.message:String(i);be.window.showErrorMessage(`Error comparing objects: ${s}`)}}),be.commands.registerCommand("netezza.batchExportDDL",async r=>{try{if(!r||!r.contextValue){be.window.showErrorMessage("Invalid node selected for batch DDL export");return}let i=r.contextValue==="database",s=r.contextValue.startsWith("typeGroup:");if(!i&&!s){be.window.showErrorMessage("Batch DDL export is only available on database or object type nodes");return}let o=await n.getConnection(n.getActiveConnectionName()||"");if(!o){be.window.showErrorMessage("Connection not configured. Please connect via Netezza: Connect...");return}let a=r.dbName||r.label,l=s?[r.objType||r.contextValue.replace("typeGroup:","")]:void 0;await jt(i?`Exporting all DDL for database ${a}...`:`Exporting ${l?.[0]} DDL for ${a}...`,async()=>{let{generateBatchDDL:c}=await Promise.resolve().then(()=>(cf(),gy)),u=await c({connectionDetails:o,database:a,objectTypes:l});if(u.success&&u.ddlCode){let d=await be.window.showQuickPick([{label:"Open in Editor",description:"Open DDL code in a new editor",value:"editor"},{label:"Save to File",description:"Save DDL code to a .sql file",value:"file"},{label:"Copy to Clipboard",description:"Copy DDL code to clipboard",value:"clipboard"}],{placeHolder:`${u.objectCount} objects found. How would you like to access the DDL code?`});if(d)if(d.value==="editor"){let E=await be.workspace.openTextDocument({content:u.ddlCode,language:"sql"});await be.window.showTextDocument(E),be.window.showInformationMessage(`DDL exported: ${u.objectCount} objects`)}else if(d.value==="file"){let E=i?`${a}_all_ddl.sql`:`${a}_${l?.[0]?.toLowerCase()||"objects"}_ddl.sql`,f=await be.window.showSaveDialog({defaultUri:be.Uri.file(E),filters:{"SQL Files":["sql"]}});f&&(await be.workspace.fs.writeFile(f,Buffer.from(u.ddlCode,"utf8")),be.window.showInformationMessage(`DDL saved to ${f.fsPath}`))}else d.value==="clipboard"&&(await be.env.clipboard.writeText(u.ddlCode),be.window.showInformationMessage(`DDL copied: ${u.objectCount} objects`));u.errors.length>0&&be.window.showWarningMessage(`Batch DDL completed with ${u.errors.length} error(s). Check the generated file for details.`)}else throw new Error(u.errors.join(", ")||"Batch DDL generation failed")})}catch(i){let s=i instanceof Error?i.message:String(i);be.window.showErrorMessage(`Error exporting DDL: ${s}`)}})]}var lr=z(require("vscode"));En();function N6(t){let{context:e,connectionManager:n}=t;return[lr.commands.registerCommand("netezza.showERD",async r=>{try{if(!r||!r.contextValue||!r.contextValue.startsWith("typeGroup:")){lr.window.showErrorMessage("Please right-click on a TABLE type group to show ERD");return}let i=r.dbName||r.label,s=r.connectionName;if(!s){lr.window.showErrorMessage("No connection selected");return}let o=`SELECT DISTINCT SCHEMA FROM ${i}.._V_TABLE ORDER BY SCHEMA`,a=await ce(e,o,!0,n,s);if(!a||!a.data){lr.window.showErrorMessage("Could not retrieve schemas");return}let l=Te(a);if(l.length===0){lr.window.showWarningMessage("No tables found in this database");return}let c;if(l.length===1)c=l[0].SCHEMA;else{let E=l.map(p=>({label:p.SCHEMA,description:`${i}.${p.SCHEMA}`})),f=await lr.window.showQuickPick(E,{placeHolder:"Select schema to show ERD for"});if(!f)return;c=f.label}let u=0,d=0;await jt(`Building ERD for ${i}.${c}...`,async E=>{let{buildERDData:f}=await Promise.resolve().then(()=>(A6(),R6)),{ERDView:p}=await Promise.resolve().then(()=>(g6(),m6)),h=await f(e,n,s,i,c,E);u=h.tables.length,d=h.relationships.length,p.createOrShow(e.extensionUri,h)}),lr.window.showInformationMessage(`ERD generated: ${u} tables, ${d} relationships`)}catch(i){let s=i instanceof Error?i.message:String(i);lr.window.showErrorMessage(`Error generating ERD: ${s}`)}}),lr.commands.registerCommand("netezza.showSessionMonitor",async()=>{try{if(!await Cr(n)){lr.window.showErrorMessage("Please connect to a Netezza database first.");return}let{SessionMonitorView:r}=await Promise.resolve().then(()=>(_6(),I6));r.createOrShow(e.extensionUri,e,n)}catch(r){let i=r instanceof Error?r.message:String(r);lr.window.showErrorMessage(`Error opening Session Monitor: ${i}`)}})]}var bt=z(require("vscode"));En();function O6(t){let{context:e,connectionManager:n,metadataCache:r,schemaTreeView:i}=t;return[bt.commands.registerCommand("netezza.revealInSchema",async s=>{let o=bt.window.setStatusBarMessage(`$(loading~spin) Revealing ${s.name} in schema...`);try{let a,l=bt.window.activeTextEditor;if(l&&l.document.languageId==="sql"&&(a=n.getConnectionForExecution(l.document.uri.toString())),a||(a=s.connectionName),a||(a=n.getActiveConnectionName()||void 0),!a){o.dispose(),bt.window.showWarningMessage("No active connection. Please select a connection first.");return}let c=s.name,u=s.objType;if(u==="COLUMN"){if(!s.parent){o.dispose(),bt.window.showWarningMessage("Cannot find column without parent table");return}c=s.parent}if(s.database){let f=r.findObjectWithType(a,s.database,s.schema,c);if(f){let p=new en(f.name,bt.TreeItemCollapsibleState.Collapsed,`netezza:${f.objType}`,s.database,f.objType,f.schema||s.schema,f.objId,void 0,a);await i.reveal(p,{select:!0,focus:!0,expand:!0}),o.dispose(),bt.window.setStatusBarMessage(`$(check) Found ${c} in ${s.database}.${f.schema||s.schema} (cached)`,3e3);return}else r.hasConnectionPrefetchTriggered(a)||r.triggerConnectionPrefetch(a,async p=>ce(e,p,!0,n,a))}if(!await n.getConnection(a)){o.dispose(),bt.window.showWarningMessage("Not connected to database and object not found in cache.");return}let E=s.database||await n.getCurrentDatabase(a);if(E){let f=u&&u!=="COLUMN"?`AND UPPER(OBJTYPE) = UPPER('${u}')`:"",p=s.schema?`AND UPPER(SCHEMA) = UPPER('${s.schema.replace(/'/g,"''")}')`:"",h=`
                        SELECT OBJNAME, OBJTYPE, SCHEMA, OBJID 
                        FROM ${E}.._V_OBJECT_DATA 
                        WHERE UPPER(OBJNAME) = UPPER('${c.replace(/'/g,"''")}') 
                        AND DBNAME = '${E}'
                        ${f}
                        ${p}
                        LIMIT 1
                    `;try{let T=await ce(e,h,!0,n,a);if(T&&T.data){let S=Te(T);if(S.length>0){let I=S[0];if(I.OBJTYPE==="PROCEDURE")try{let m=`SELECT PROCEDURESIGNATURE FROM ${E}.._V_PROCEDURE WHERE OBJID = ${I.OBJID}`,A=await ce(e,m,!0,n,a);if(A&&A.data&&A.data.length>0){let N=Te(A);N.length>0&&N[0].PROCEDURESIGNATURE&&(I.OBJNAME=N[0].PROCEDURESIGNATURE)}}catch(m){console.warn("Failed to resolve procedure signature:",m)}let R=new en(I.OBJNAME,bt.TreeItemCollapsibleState.Collapsed,`netezza:${I.OBJTYPE}`,E,I.OBJTYPE,I.SCHEMA,I.OBJID,void 0,a);await i.reveal(R,{select:!0,focus:!0,expand:!0}),o.dispose(),bt.window.setStatusBarMessage(`$(check) Found ${c} in ${E}.${I.SCHEMA}`,3e3);return}}}catch(T){console.log(`Error searching in ${E}:`,T)}}if(!E){let f=await ce(e,"SELECT DATABASE FROM system.._v_database ORDER BY DATABASE",!0,n,a);if(f&&f.data){let p=Te(f);for(let h of p){let T=h.DATABASE;try{let S=s.schema?`AND UPPER(SCHEMA) = UPPER('${s.schema.replace(/'/g,"''")}')`:"",I=`
                                    SELECT OBJNAME, OBJTYPE, SCHEMA, OBJID 
                                    FROM ${T}.._V_OBJECT_DATA 
                                    WHERE UPPER(OBJNAME) = UPPER('${c.replace(/'/g,"''")}') 
                                    AND DBNAME = '${T}'
                                    ${S}
                                    LIMIT 1
                                `,R=await ce(e,I,!0,n,a);if(R&&R.data){let m=Te(R);if(m.length>0){let A=m[0];if(A.OBJTYPE==="PROCEDURE")try{let g=`SELECT PROCEDURESIGNATURE FROM ${T}.._V_PROCEDURE WHERE OBJID = ${A.OBJID}`,L=await ce(e,g,!0,n,a);if(L&&L.data&&L.data.length>0){let y=Te(L);y.length>0&&y[0].PROCEDURESIGNATURE&&(A.OBJNAME=y[0].PROCEDURESIGNATURE)}}catch(g){console.warn("Failed to resolve procedure signature:",g)}let N=new en(A.OBJNAME,bt.TreeItemCollapsibleState.Collapsed,`netezza:${A.OBJTYPE}`,T,A.OBJTYPE,A.SCHEMA,A.OBJID,void 0,a);await i.reveal(N,{select:!0,focus:!0,expand:!0}),o.dispose(),bt.window.setStatusBarMessage(`$(check) Found ${c} in ${T}.${A.SCHEMA}`,3e3);return}}}catch(S){console.log(`Error searching in ${T}:`,S)}}}}o.dispose(),bt.window.showWarningMessage(`Could not find ${u||"object"} ${c}`)}catch(a){o.dispose();let l=a instanceof Error?a.message:String(a);bt.window.showErrorMessage(`Error revealing item: ${l}`)}}),bt.commands.registerCommand("netezza.showQueryHistory",()=>{bt.commands.executeCommand("netezza.queryHistory.focus")}),bt.commands.registerCommand("netezza.clearQueryHistory",async()=>{let{QueryHistoryManager:s}=await Promise.resolve().then(()=>(Qf(),h0)),o=new s(e);await bt.window.showWarningMessage("Are you sure you want to clear all query history?",{modal:!0},"Clear All")==="Clear All"&&(await o.clearHistory(),bt.window.showInformationMessage("Query history cleared"))})]}function XS(t){return[...l6(t),...c6(t),...f6(t),...p6(t),...N6(t),...O6(t)]}var K=z(require("vscode")),vy=z(require("path")),df=z(require("os"));function uf(t,e,n){let r=Date.now()-n;t.appendLine(`[${new Date().toLocaleTimeString()}] ${e} completed in ${r}ms`),t.show(!0)}function v6(t){let{context:e,connectionManager:n,outputChannel:r}=t;return[K.commands.registerCommand("netezza.exportToXlsb",async()=>{let i=K.window.activeTextEditor;if(!i){K.window.showErrorMessage("No active editor found");return}let s=i.selection,o=s.isEmpty?i.document.getText():i.document.getText(s);if(!o.trim()){K.window.showWarningMessage("No SQL query to export");return}let a=await K.window.showSaveDialog({filters:{"Excel Binary Workbook":["xlsb"]},saveLabel:"Export to XLSB"});if(!a)return;let l=Date.now();try{let c=i.document.uri.toString(),u=n.getConnectionForExecution(c),d=await n.getConnection(u||"");if(!d)throw new Error("Connection not configured. Please connect via Netezza: Connect...");await K.window.withProgress({location:K.ProgressLocation.Notification,title:"Exporting to XLSB...",cancellable:!1},async E=>{let{exportQueryToXlsb:f}=await Promise.resolve().then(()=>(yi(),us)),p=await f(d,o,a.fsPath,!1,h=>{E.report({message:h}),r.appendLine(`[XLSB Export] ${h}`)});if(!p.success)throw new Error(p.message)}),uf(r,"Export to XLSB",l),K.window.showInformationMessage(`Results exported to ${a.fsPath}`)}catch(c){let u=c instanceof Error?c.message:String(c);K.window.showErrorMessage(`Error exporting to XLSB: ${u}`)}}),K.commands.registerCommand("netezza.exportToCsv",async()=>{let i=K.window.activeTextEditor;if(!i){K.window.showErrorMessage("No active editor found");return}let s=i.selection,o=s.isEmpty?i.document.getText():i.document.getText(s);if(!o.trim()){K.window.showWarningMessage("No SQL query to export");return}let a=await K.window.showSaveDialog({filters:{"CSV Files":["csv"]},saveLabel:"Export to CSV"});if(!a)return;let l=Date.now();try{let c=i.document.uri.toString(),u=n.getConnectionForExecution(c),d=await n.getConnection(u||"");if(!d)throw new Error("Connection not configured. Please connect via Netezza: Connect...");await K.window.withProgress({location:K.ProgressLocation.Notification,title:"Exporting to CSV...",cancellable:!1},async E=>{let{exportToCsv:f}=await Promise.resolve().then(()=>(SA(),B0));await f(e,d,o,a.fsPath,E)}),uf(r,"Export to CSV",l),K.window.showInformationMessage(`Results exported to ${a.fsPath}`)}catch(c){let u=c instanceof Error?c.message:String(c);K.window.showErrorMessage(`Error exporting to CSV: ${u}`)}}),K.commands.registerCommand("netezza.copyXlsbToClipboard",async()=>{let i=K.window.activeTextEditor;if(!i){K.window.showErrorMessage("No active editor found");return}let s=i.selection,o=s.isEmpty?i.document.getText():i.document.getText(s);if(!o.trim()){K.window.showWarningMessage("No SQL query to export");return}try{let a=i.document.uri.toString(),l=n.getConnectionForExecution(a),c=await n.getConnection(l||"");if(!c)throw new Error("Connection not configured. Please connect via Netezza: Connect...");let u=Date.now();if(await K.window.withProgress({location:K.ProgressLocation.Notification,title:"Exporting to XLSB and copying to clipboard...",cancellable:!1},async E=>{let{exportQueryToXlsb:f,getTempFilePath:p}=await Promise.resolve().then(()=>(yi(),us)),h=p(),T=await f(c,o,h,!0,S=>{E.report({message:S}),r.appendLine(`[XLSB Clipboard] ${S}`)});if(!T.success)throw new Error(T.message);if(!T.details?.clipboard_success)throw new Error("Failed to copy file to clipboard")}),uf(r,"Copy XLSB to Clipboard",u),await K.window.showInformationMessage("Excel file copied to clipboard! You can now paste it into Excel or Windows Explorer.","Show Temp Folder","OK")==="Show Temp Folder"){let E=df.tmpdir();await K.env.openExternal(K.Uri.file(E))}}catch(a){let l=a instanceof Error?a.message:String(a);K.window.showErrorMessage(`Error copying XLSB to clipboard: ${l}`)}}),K.commands.registerCommand("netezza.exportToXlsbAndOpen",async()=>{let i=K.window.activeTextEditor;if(!i){K.window.showErrorMessage("No active editor found");return}let s=i.selection,o=s.isEmpty?i.document.getText():i.document.getText(s);if(!o.trim()){K.window.showWarningMessage("No SQL query to export");return}let a=await K.window.showSaveDialog({filters:{"Excel Binary Workbook":["xlsb"]},saveLabel:"Export to XLSB and Open"});if(!a)return;let l=Date.now();try{let c=i.document.uri.toString(),u=n.getConnectionForExecution(c),d=await n.getConnection(u||"");if(!d)throw new Error("Connection not configured. Please connect via Netezza: Connect...");await K.window.withProgress({location:K.ProgressLocation.Notification,title:"Exporting to XLSB and opening...",cancellable:!1},async E=>{let{exportQueryToXlsb:f}=await Promise.resolve().then(()=>(yi(),us)),p=await f(d,o,a.fsPath,!1,h=>{E.report({message:h}),r.appendLine(`[XLSB Export] ${h}`)});if(!p.success)throw new Error(p.message)}),uf(r,"Export to XLSB and Open",l),await K.env.openExternal(a),K.window.showInformationMessage(`Results exported and opened: ${a.fsPath}`)}catch(c){let u=c instanceof Error?c.message:String(c);K.window.showErrorMessage(`Error exporting to XLSB: ${u}`)}}),K.commands.registerCommand("netezza.exportCurrentResultToXlsbAndOpen",async(i,s)=>{try{if(!i||Array.isArray(i)&&i.length===0){K.window.showErrorMessage("No data to export");return}let o=i;if(Array.isArray(i)&&i.length>1){let d=await K.window.showQuickPick(["Export All Results","Export Active Result Only"],{placeHolder:"Multiple results available. What would you like to export?"});if(!d)return;if(d==="Export Active Result Only"){let E=i.find(f=>f.isActive);E?o=[E]:o=[i[0]]}}let a=new Date().toISOString().replace(/[:.]/g,"-"),l=vy.join(df.tmpdir(),`netezza_results_${a}.xlsb`),c=Date.now();await K.window.withProgress({location:K.ProgressLocation.Notification,title:"Creating Excel file...",cancellable:!1},async d=>{if(Array.isArray(o)&&o.length>0&&"columns"in o[0]&&"rows"in o[0]){let{exportStructuredToXlsb:f}=await Promise.resolve().then(()=>(yi(),us)),p=await f(o,l,!1,h=>{d.report({message:h}),r.appendLine(`[Structured to XLSB] ${h}`)});if(!p.success)throw new Error(p.message)}else{let{exportCsvToXlsb:f}=await Promise.resolve().then(()=>(yi(),us)),p=await f(o,l,!1,{source:"Query Results Panel",sql:s},h=>{d.report({message:h}),r.appendLine(`[CSV to XLSB] ${h}`)});if(!p.success)throw new Error(p.message)}});let u=Date.now()-c;r.appendLine(`[${new Date().toLocaleTimeString()}] Export Current Result to Excel completed in ${u}ms`),await K.env.openExternal(K.Uri.file(l)),K.window.showInformationMessage(`Results exported and opened: ${l}`)}catch(o){let a=o instanceof Error?o.message:String(o);K.window.showErrorMessage(`Error exporting to Excel: ${a}`)}}),K.commands.registerCommand("netezza.copyCurrentResultToXlsbClipboard",async(i,s)=>{try{if(!i||Array.isArray(i)&&i.length===0){K.window.showErrorMessage("No data to copy");return}let o=i;if(Array.isArray(i)&&i.length>1){let d=await K.window.showQuickPick(["Export All Results","Export Active Result Only"],{placeHolder:"Multiple results available. What would you like to export?"});if(!d)return;if(d==="Export Active Result Only"){let E=i.find(f=>f.isActive);E?o=[E]:o=[i[0]]}}let{getTempFilePath:a}=await Promise.resolve().then(()=>(yi(),us)),l=a(),c=Date.now();if(await K.window.withProgress({location:K.ProgressLocation.Notification,title:"Copying to clipboard as Excel...",cancellable:!1},async d=>{if(Array.isArray(o)&&o.length>0&&"columns"in o[0]&&"rows"in o[0]){let{exportStructuredToXlsb:f}=await Promise.resolve().then(()=>(yi(),us)),p=await f(o,l,!0,h=>{d.report({message:h}),r.appendLine(`[Clipboard Structured XLSB] ${h}`)});if(!p.success)throw new Error(p.message)}else{let{exportCsvToXlsb:f}=await Promise.resolve().then(()=>(yi(),us)),p=await f(o,l,!0,{source:"Query Results Panel",sql:s},h=>{d.report({message:h}),r.appendLine(`[Clipboard XLSB] ${h}`)});if(!p.success)throw new Error(p.message)}}),uf(r,"Copy Result as Excel",c),await K.window.showInformationMessage("Excel file copied to clipboard! You can now paste it into Excel or Windows Explorer.","Show Temp Folder","OK")==="Show Temp Folder"){let d=df.tmpdir();await K.env.openExternal(K.Uri.file(d))}}catch(o){let a=o instanceof Error?o.message:String(o);K.window.showErrorMessage(`Error copying to Excel: ${a}`)}}),K.commands.registerCommand("netezza.exportCurrentResultToXlsxAndOpen",async(i,s)=>{try{if(!i||Array.isArray(i)&&i.length===0){K.window.showErrorMessage("No data to export");return}let o=i;if(Array.isArray(i)&&i.length>1){let d=await K.window.showQuickPick(["Export All Results","Export Active Result Only"],{placeHolder:"Multiple results available. What would you like to export?"});if(!d)return;if(d==="Export Active Result Only"){let E=i.find(f=>f.isActive);E?o=[E]:o=[i[0]]}}let a=new Date().toISOString().replace(/[:.]/g,"-"),l=vy.join(df.tmpdir(),`netezza_results_${a}.xlsx`),c=Date.now();await K.window.withProgress({location:K.ProgressLocation.Notification,title:"Creating Excel XLSX file...",cancellable:!1},async d=>{if(Array.isArray(o)&&o.length>0&&"columns"in o[0]&&"rows"in o[0]){let{exportStructuredToXlsx:f}=await Promise.resolve().then(()=>(xy(),Py)),p=await f(o,l,!1,h=>{d.report({message:h}),r.appendLine(`[Structured to XLSX] ${h}`)});if(!p.success)throw new Error(p.message)}else{let{exportCsvToXlsx:f}=await Promise.resolve().then(()=>(xy(),Py)),p=await f(o,l,!1,{source:"Query Results Panel",sql:s},h=>{d.report({message:h}),r.appendLine(`[CSV to XLSX] ${h}`)});if(!p.success)throw new Error(p.message)}});let u=Date.now()-c;r.appendLine(`[${new Date().toLocaleTimeString()}] Export Current Result to XLSX completed in ${u}ms`),await K.env.openExternal(K.Uri.file(l)),K.window.showInformationMessage(`Results exported and opened: ${l}`)}catch(o){let a=o instanceof Error?o.message:String(o);K.window.showErrorMessage(`Error exporting to Excel XLSX: ${a}`)}})]}var we=z(require("vscode")),k6=z(require("path"));En();function W6(t,e,n){let r=Date.now()-n;t.appendLine(`[${new Date().toLocaleTimeString()}] ${e} completed in ${r}ms`),t.show(!0)}async function $6(t,e,n){try{let i=await ce(t,"SELECT CURRENT_CATALOG, CURRENT_SCHEMA",!0,n,e);if(i&&i.data){let s=Te(i);if(s&&s.length>0){let o=s[0].CURRENT_CATALOG||"SYSTEM",a=s[0].CURRENT_SCHEMA||"ADMIN",c=new Date().toISOString().slice(0,10).replace(/-/g,""),u=Math.floor(Math.random()*1e4).toString().padStart(4,"0");return`${o}.${a}.IMPORT_${c}_${u}`}}}catch(r){we.window.showErrorMessage(`Error getting current database/schema: ${r instanceof Error?r.message:String(r)}`)}return null}function Y6(t){let{context:e,connectionManager:n,outputChannel:r}=t;return[we.commands.registerCommand("netezza.importClipboard",async()=>{try{let s=we.window.activeTextEditor?.document?.uri?.toString(),o=n.getConnectionForExecution(s),a=await n.getConnection(o||"");if(!a)throw new Error("Connection not configured. Please connect via Netezza: Connect...");let l=await we.window.showInputBox({prompt:"Enter target table name (leave empty for auto-generated name)",placeHolder:"e.g. my_schema.my_table or leave empty",validateInput:E=>!E||E.trim().length===0||/^[a-zA-Z_][a-zA-Z0-9_]*(\.[a-zA-Z_][a-zA-Z0-9_]*)?(\.[a-zA-Z_][a-zA-Z0-9_]*)?$/.test(E.trim())?null:"Invalid table name format. Use: [database.]schema.table"});if(l===void 0)return;let c;if(!l||l.trim().length===0){let E=await $6(e,o,n);if(!E)return;c=E,we.window.showInformationMessage(`Auto-generated table name: ${c}`)}else c=l.trim();let u=await we.window.showQuickPick([{label:"Auto-detect",description:"Automatically detect clipboard format (text or Excel XML)",value:null},{label:"Excel XML Spreadsheet",description:"Force Excel XML format processing",value:"XML Spreadsheet"},{label:"Plain Text",description:"Force plain text processing with delimiter detection",value:"TEXT"}],{placeHolder:"Select clipboard data format"});if(!u)return;let d=Date.now();await we.window.withProgress({location:we.ProgressLocation.Notification,title:"Importing clipboard data...",cancellable:!1},async E=>{let{importClipboardDataToNetezza:f}=await Promise.resolve().then(()=>(G6(),H6)),p="",h=await f(c,a,u.value,{},(T,S,I=!0)=>{E.report({message:T,increment:S}),I&&T!==p&&(r.appendLine(`[Clipboard Import] ${T}`),p=T)});if(!h.success)throw new Error(h.message);h.details&&(r.appendLine(`[Clipboard Import] Rows processed: ${h.details.rowsProcessed}`),r.appendLine(`[Clipboard Import] Columns: ${h.details.columns}`),r.appendLine(`[Clipboard Import] Format: ${h.details.format}`))}),W6(r,"Import Clipboard Data",d),we.window.showInformationMessage(`Clipboard data imported successfully to table: ${c}`,"Copy Table Name").then(E=>{E==="Copy Table Name"&&(we.env.clipboard.writeText(c),we.window.showInformationMessage("Table name copied to clipboard"))})}catch(i){we.window.showErrorMessage(`Error importing clipboard data: ${i instanceof Error?i.message:String(i)}`)}}),we.commands.registerCommand("netezza.importData",async()=>{try{let s=we.window.activeTextEditor?.document?.uri?.toString(),o=n.getConnectionForExecution(s),a=await n.getConnection(o||"");if(!a)throw new Error("Connection not configured. Please connect via Netezza: Connect...");let l=await we.window.showOpenDialog({canSelectFiles:!0,canSelectFolders:!1,canSelectMany:!1,filters:{"Data Files":["csv","txt","xlsx","xlsb","json"],"CSV Files":["csv"],"Excel Files":["xlsx","xlsb"],"Text Files":["txt"],"JSON Files":["json"],"All Files":["*"]},openLabel:"Select file to import"});if(!l||l.length===0)return;let c=l[0].fsPath,u=await we.window.showInputBox({prompt:"Enter target table name (leave empty for auto-generated name)",placeHolder:"e.g. my_schema.my_table or leave empty",validateInput:p=>!p||p.trim().length===0||/^[a-zA-Z_][a-zA-Z0-9_]*(\.[a-zA-Z_][a-zA-Z0-9_]*)?(\.[a-zA-Z_][a-zA-Z0-9_]*)?$/.test(p.trim())?null:"Invalid table name format. Use: [database.]schema.table"});if(u===void 0)return;let d;if(!u||u.trim().length===0){let p=await $6(e,o,n);if(!p)return;d=p,we.window.showInformationMessage(`Auto-generated table name: ${d}`)}else d=u.trim();let E=await we.window.showQuickPick([{label:"Default Import",description:"Use default settings",value:{}},{label:"Custom Options",description:"Configure import settings (coming soon)",value:null}],{placeHolder:"Select import options"});if(!E)return;if(E.value===null){we.window.showInformationMessage("Custom options will be available in future version");return}let f=Date.now();await we.window.withProgress({location:we.ProgressLocation.Notification,title:"Importing data...",cancellable:!1},async p=>{let{importDataToNetezza:h}=await Promise.resolve().then(()=>(vS(),kz)),T="",S=await h(c,d,a,(I,R,m=!0)=>{p.report({message:I,increment:R}),m&&I!==T&&(r.appendLine(`[Import] ${I}`),T=I)});if(!S.success)throw new Error(S.message);S.details&&(r.appendLine(`[Import] Rows processed: ${S.details.rowsProcessed}`),r.appendLine(`[Import] Columns: ${S.details.columns}`),r.appendLine(`[Import] Delimiter: ${S.details.detectedDelimiter}`))}),W6(r,"Import Data",f),we.window.showInformationMessage(`Data imported successfully to table: ${d}`,"Copy Table Name").then(p=>{p==="Copy Table Name"&&(we.env.clipboard.writeText(d),we.window.showInformationMessage("Table name copied to clipboard"))})}catch(i){we.window.showErrorMessage(`Error importing data: ${i instanceof Error?i.message:String(i)}`)}}),we.commands.registerCommand("netezza.smartPaste",async()=>{try{let i=we.window.activeTextEditor;if(!i)return;let o=we.workspace.getConfiguration("netezza").get("pythonPath")||"python",a=k6.join(e.extensionPath,"python","check_clipboard_format.py"),l=require("child_process");if(await new Promise(u=>{let d=l.spawn(o,[a]);d.on("close",E=>{u(E===1)}),d.on("error",()=>{u(!1)})})){let u=await we.window.showQuickPick([{label:"\u{1F4CA} import to Netezza table",description:'Detected "XML Spreadsheet" format - import data to database',value:"import"},{label:"\u{1F4DD} Paste as text",description:"Paste clipboard content as plain text",value:"paste"}],{placeHolder:'Detected "XML Spreadsheet" format in clipboard - choose an action'});if(u?.value==="import")we.commands.executeCommand("netezza.importClipboard");else if(u?.value==="paste"){let d=await we.env.clipboard.readText(),E=i.selection;await i.edit(f=>{f.replace(E,d)})}}else{let u=await we.env.clipboard.readText(),d=i.selection;await i.edit(E=>{E.replace(d,u)})}}catch(i){we.window.showErrorMessage(`Error during paste: ${i instanceof Error?i.message:String(i)}`)}})]}var se=z(require("vscode"));En();Eo();function Uy(t){return t&&(t.includes(" ")?`"${t.replace(/"/g,'\\"')}"`:t)}function Ss(t,e,n){let i=/[ \\/]/.test(t)?`& ${Uy(t)}`:t,s=Uy(e),o=n.map(a=>Uy(a)).join(" ");return`${i} ${s}${o?" "+o:""}`.trim()}function qK(t){let{context:e,connectionManager:n,resultPanelProvider:r}=t;return[se.commands.registerCommand("netezza.cancelQuery",async(i,s)=>{let o=typeof i=="string"?i:i?.toString();if(!o){let a=se.window.activeTextEditor;a&&(o=a.document.uri.toString())}if(o){console.log(`[netezza.cancelQuery] Cancelling: ${o}`),r.cancelExecution(o,s);try{await iA(o)}catch(a){console.error("[netezza.cancelQuery] Backend cancel failed:",a)}}else{let a=r.getActiveSource();a?(console.log(`[netezza.cancelQuery] No URI provided, falling back to active source: ${a}`),r.cancelExecution(a,s),await iA(a)):se.window.showWarningMessage("No active query to cancel.")}}),se.commands.registerCommand("netezza.runQuery",async()=>{let i=se.window.activeTextEditor;if(!i){se.window.showErrorMessage("No active editor found");return}let s=i.document,o=i.selection,a=s.getText(),l=s.uri.toString(),c=[];if(o.isEmpty){let d=s.offsetAt(o.active),E=Fn.getStatementAtPosition(a,d);if(E){c=[E.sql];let f=s.positionAt(E.start),p=s.positionAt(E.end);i.selection=new se.Selection(f,p)}else{se.window.showWarningMessage("No SQL statement found at cursor");return}}else{let d=s.getText(o);if(!d.trim()){se.window.showWarningMessage("No SQL query selected");return}/^\s*CREATE\s+(OR\s+REPLACE\s+)?PROCEDURE\b/i.test(d)?c=[d]:c=Fn.splitStatements(d).filter(E=>E.trim().length>0)}if(c.length===0)return;let u=c.length===1?c[0].trim():null;if(u){let d=u.split(/\s+/),E=d[0]||"",f=/python(\.exe)?$/i.test(E)&&d.length>=2&&d[1].toLowerCase().endsWith(".py"),p=E.toLowerCase().endsWith(".py");if(f||p){let T=se.workspace.getConfiguration("netezza").get("pythonPath")||"python",S="";if(f){let R=d[0],m=d[1],A=d.slice(2);S=Ss(R,m,A)}else{let R=E,m=d.slice(1);S=Ss(T,R,m)}let I=se.window.createTerminal({name:"Netezza: Script"});I.show(!0),I.sendText(S,!0),se.window.showInformationMessage(`Running script: ${S}`);return}}try{r.startExecution(l);let d=se.workspace.getConfiguration("netezza"),E=d.get("enableStreaming",!1),f=d.get("streamingChunkSize",5e3);await se.window.withProgress({location:se.ProgressLocation.Notification,title:`Executing SQL for ${l.split(/[\\/]/).pop()}...`,cancellable:!1},async()=>{E?await m0(e,c,n,l,p=>r.log(l,p),(p,h,T)=>{r.appendStreamingChunk(l,p,h,T)},f):await Yc(e,c,n,l,p=>r.log(l,p),p=>r.updateResults(p,l,!0))}),r.finalizeExecution(l),se.commands.executeCommand("netezza.results.focus")}catch(d){let E=d instanceof Error?d.message:String(d);r.log(l,`Error: ${E}`),r.updateResults([{columns:[],data:[],message:E,isError:!0,sql:c.length===1?c[0]:void 0}],l,!0),r.finalizeExecution(l),se.window.showErrorMessage(`Error executing query: ${E}`)}}),se.commands.registerCommand("netezza.runQueryBatch",async()=>{let i=se.window.activeTextEditor;if(!i){se.window.showErrorMessage("No active editor found");return}let s=i.document,o=i.selection,a=s.uri.toString(),l;if(o.isEmpty?l=s.getText():l=s.getText(o),!l.trim()){se.window.showWarningMessage("No SQL query to execute");return}let u=l.trim().split(/\s+/),d=u[0]||"",E=/python(\.exe)?$/i.test(d)&&u.length>=2&&u[1].toLowerCase().endsWith(".py"),f=d.toLowerCase().endsWith(".py");if(E||f){let h=se.workspace.getConfiguration("netezza").get("pythonPath")||"python",T="";if(E){let I=u[0],R=u[1],m=u.slice(2);T=Ss(I,R,m)}else{let I=d,R=u.slice(1);T=Ss(h,I,R)}let S=se.window.createTerminal({name:"Netezza: Script"});S.show(!0),S.sendText(T,!0),se.window.showInformationMessage(`Running script: ${T}`);return}try{r.startExecution(a),await se.window.withProgress({location:se.ProgressLocation.Notification,title:`Executing batch SQL for ${a.split(/[\\/]/).pop()}...`,cancellable:!1},async()=>{await Yc(e,[l],n,a,p=>r.log(a,p),p=>r.updateResults(p,a,!0))}),r.finalizeExecution(a),se.commands.executeCommand("netezza.results.focus")}catch(p){let h=p instanceof Error?p.message:String(p);r.log(a,`Error: ${h}`),r.updateResults([{columns:[],data:[],message:h,isError:!0,sql:l}],a,!0),r.finalizeExecution(a),se.window.showErrorMessage(`Error executing query: ${h}`)}}),se.commands.registerCommand("netezza.explainQuery",async()=>{await VK(e,n,!1)}),se.commands.registerCommand("netezza.explainQueryVerbose",async()=>{await VK(e,n,!0)}),se.commands.registerCommand("netezza.formatSQL",async()=>{let i=se.window.activeTextEditor;if(!i){se.window.showErrorMessage("No active editor");return}if(i.document.languageId!=="sql"&&i.document.languageId!=="mssql"){se.window.showWarningMessage("Format SQL is only available for SQL files");return}let s=se.workspace.getConfiguration("netezza"),o=s.get("formatSQL.tabWidth",4),a=s.get("formatSQL.keywordCase","upper"),l=i.selection,c=l.isEmpty?i.document.getText():i.document.getText(l);try{let{format:u}=await Promise.resolve().then(()=>(FK(),BK)),d="__NZ_DOUBLE_DOT__",E=c.replace(/\.\.(?=[a-zA-Z_])/g,`.${d}.`),p=u(E,{language:"sql",tabWidth:o,keywordCase:a,linesBetweenQueries:2}).replace(new RegExp(`\\.\\s*${d}\\s*\\.`,"g"),"..");await i.edit(h=>{if(l.isEmpty){let T=new se.Range(i.document.positionAt(0),i.document.positionAt(i.document.getText().length));h.replace(T,p)}else h.replace(l,p)}),se.window.showInformationMessage("SQL formatted successfully")}catch(u){let d=u instanceof Error?u.message:String(u);d.includes("Parse error")?se.window.showErrorMessage("SQL formatting failed: The SQL contains syntax not supported by the formatter. Try selecting a simpler portion of the SQL to format."):se.window.showErrorMessage(`Format SQL failed: ${d}`)}})]}async function VK(t,e,n){let r=se.window.activeTextEditor;if(!r){se.window.showErrorMessage("No active editor found");return}let i=r.document,s=r.selection,o;if(!s.isEmpty)o=i.getText(s);else{let c=r.selection.active,u=i.offsetAt(c),d=i.getText(),E=Fn.getStatementAtPosition(d,u);E?o=d.substring(E.start,E.end):o=i.getText()}if(!o.trim()){se.window.showWarningMessage("No SQL query to explain");return}let a=o.trim();a.toUpperCase().startsWith("EXPLAIN")&&(a=a.replace(/^EXPLAIN\s+(?:VERBOSE\s+)?/i,""));let l=n?`EXPLAIN VERBOSE ${a}`:`EXPLAIN ${a}`;try{let c=i.uri.toString(),u=e.getConnectionForExecution(c);if(!u){se.window.showErrorMessage("No database connection. Please connect first.");return}await se.window.withProgress({location:se.ProgressLocation.Notification,title:"Generating query plan...",cancellable:!1},async()=>{let d=await A0(t,l,u,e,c);if(d&&d.trim()){let{parseExplainOutput:E,ExplainPlanView:f}=await Promise.resolve().then(()=>(YK(),kK)),p=E(d);f.createOrShow(t.extensionUri,p,a)}else se.window.showWarningMessage("No explain output received")})}catch(c){let u=c instanceof Error?c.message:String(c);se.window.showErrorMessage(`Error generating query plan: ${u}`)}}var ms=z(require("vscode"));function $b(t,e){let n=e.getKeepConnectionOpen();t.text=n?"\u{1F517} Keep Connection ON":"\u26D3\uFE0F\u200D\u{1F4A5} Keep Connection OFF",t.tooltip=n?"Keep Connection Open: ENABLED - Click to disable":"Keep Connection Open: DISABLED - Click to enable",t.backgroundColor=n?new ms.ThemeColor("statusBarItem.prominentBackground"):void 0}function XK(t,e){let n=ms.window.createStatusBarItem(ms.StatusBarAlignment.Right,100);return n.command="netezza.toggleKeepConnectionOpen",$b(n,e),n.show(),t.subscriptions.push(n),n}function zK(t,e){let n=ms.window.createStatusBarItem(ms.StatusBarAlignment.Left,100);return n.command="netezza.selectConnectionForTab",n.tooltip="Click to select connection for this SQL tab",t.subscriptions.push(n),{statusBarItem:n,updateFn:()=>{let i=ms.window.activeTextEditor;if(i&&i.document.languageId==="sql"){let s=i.document.uri.toString(),o=e.getConnectionForExecution(s);o?(n.text=`$(database) ${o}`,n.show()):(n.text="$(database) Select Connection",n.show())}else n.hide()}}}var tt=z(require("vscode"));Eo();var jK=/(^|\s)(?:[A-Za-z]:\\|\\|\/)?[\w.\-\\/]+\.py\b|(^|\s)python(?:\.exe)?\s+[^\n]*\.py\b/i,wR=class{constructor(){this._onDidChange=new tt.EventEmitter;this.onDidChangeCodeLenses=this._onDidChange.event}provideCodeLenses(e){let n=[];for(let r=0;r<e.lineCount;r++){let i=e.lineAt(r);if(jK.test(i.text)){let s=i.range,o={title:"Run as script",command:"netezza.runScriptFromLens",arguments:[e.uri,s]};n.push(new tt.CodeLens(s,o))}}return n}refresh(){this._onDidChange.fire()}};function KK(){return tt.window.createTextEditorDecorationType({backgroundColor:new tt.ThemeColor("editor.rangeHighlightBackground"),borderRadius:"3px"})}function JK(){return tt.window.createTextEditorDecorationType({backgroundColor:"rgba(5, 115, 201, 0.10)",isWholeLine:!1,rangeBehavior:tt.DecorationRangeBehavior.ClosedClosed})}function kb(t,e){let n=e||tt.window.activeTextEditor;if(!n)return;let r=n.document,i=[];for(let s=0;s<r.lineCount;s++){let o=r.lineAt(s);jK.test(o.text)&&i.push({range:o.range,hoverMessage:"Python script invocation"})}n.setDecorations(t,i)}function bR(t,e){if(!tt.workspace.getConfiguration("netezza").get("highlightActiveStatement",!0)||!e||e.document.languageId!=="sql"&&e.document.languageId!=="mssql"){e&&e.setDecorations(t,[]);return}try{let i=e.document,s=e.selection.active,o=i.offsetAt(s),a=i.getText(),l=Fn.getStatementAtPosition(a,o);if(l){let c=i.positionAt(l.start),u=i.positionAt(l.end),d=new tt.Range(c,u);e.setDecorations(t,[d])}else e.setDecorations(t,[])}catch(i){console.error("Error updating SQL highlight:",i)}}function QK(t,e,n){t.subscriptions.push(tt.window.onDidChangeActiveTextEditor(()=>kb(e)),tt.workspace.onDidChangeTextDocument(r=>{tt.window.activeTextEditor&&r.document===tt.window.activeTextEditor.document&&kb(e,tt.window.activeTextEditor)})),t.subscriptions.push(tt.window.onDidChangeTextEditorSelection(r=>{bR(n,r.textEditor)}),tt.window.onDidChangeActiveTextEditor(r=>{bR(n,r)}),tt.workspace.onDidChangeConfiguration(r=>{r.affectsConfiguration("netezza.highlightActiveStatement")&&bR(n,tt.window.activeTextEditor)})),kb(e,tt.window.activeTextEditor),bR(n,tt.window.activeTextEditor)}var jr=z(require("vscode")),SLe=new Map([["SX","SELECT"],["WX","WHERE"],["GX","GROUP BY"],["HX","HAVING"],["OX","ORDER BY"],["FX","FROM"],["JX","JOIN"],["LX","LIMIT"],["IX","INSERT INTO"],["UX","UPDATE"],["DX","DELETE FROM"],["CX","CREATE TABLE"]]);function ZK(t){let e=jr.workspace.onDidChangeTextDocument(async n=>{if(n.document.languageId!=="sql"&&n.document.languageId!=="mssql"||n.contentChanges.length!==1)return;let r=n.contentChanges[0];if(r.text!==" ")return;let i=jr.window.activeTextEditor;if(!i||i.document!==n.document)return;let o=n.document.lineAt(r.range.start.line).text;for(let[a,l]of SLe)if(new RegExp(`\\b${a}\\s$`,"i").test(o)){let u=o.toUpperCase().lastIndexOf(a.toUpperCase());if(u>=0){let d=new jr.Position(r.range.start.line,u),E=new jr.Position(r.range.start.line,u+a.length+1);await i.edit(f=>{f.replace(new jr.Range(d,E),l+" ")}),["SELECT","FROM","JOIN"].includes(l)&&setTimeout(()=>{jr.commands.executeCommand("editor.action.triggerSuggest")},100);break}}});t.subscriptions.push(e)}var e4=[{id:"mtxr.sqltools",name:"SQLTools"},{id:"ms-mssql.mssql",name:"Microsoft SQL Server"},{id:"oracle.oracledevtools",name:"Oracle Developer Tools"},{id:"cweijan.vscode-mysql-client2",name:"MySQL"},{id:"ckolkman.vscode-postgres",name:"PostgreSQL"}];async function RLe(t){let e=q.workspace.getConfiguration("netezza");if(!e.get("showConflictWarnings",!0))return;let r=[];for(let a of e4)q.extensions.getExtension(a.id)&&r.push(a.name);let s=q.extensions.all.filter(a=>{let l=a.packageJSON;if(!l||a.id==="krzysztof-d.justybaselite-netezza"||e4.some(E=>E.id===a.id))return!1;let c=l.activationEvents?.some(E=>E.includes("onLanguage:sql")||E.includes("onLanguage:mssql")),u=l.contributes?.languages?.some(E=>E.id==="sql"||E.extensions?.includes(".sql"));return(l.displayName||"")==="SQL Language Basics"?!1:c||u}).map(a=>a.packageJSON.displayName||a.id),o=[...r,...s];if(o.length>0){let a=o.length===1?`SQL extension detected "${o[0]}" which may cause conflicts (e.g. duplicate keybindings F5, Ctrl+Enter).`:`SQL extensions detected which may cause conflicts: ${o.join(", ")}. Some functions (e.g. F5, Ctrl+Enter) may be duplicated.`;await q.window.showWarningMessage(a,"OK","Do not show again")==="Do not show again"&&await e.update("showConflictWarnings",!1,q.ConfigurationTarget.Global)}}async function ALe(t){console.log("Netezza extension: Activating..."),RLe(t);let e=new vi(t),n=new hE(t);await n.initialize();let r=new nE(t,e,n),i=new Xc(t.extensionUri);t.subscriptions.push({dispose:()=>{e.closeAllPersistentConnections()}});let s=q.window.createOutputChannel("Netezza"),o=XK(t,e),{updateFn:a}=zK(t,e);a(),e.onDidChangeActiveConnection(A=>{a(),A&&!n.hasConnectionPrefetchTriggered(A)&&n.triggerConnectionPrefetch(A,N=>ce(t,N,!0,e,A))}),e.onDidChangeConnections(a),e.onDidChangeDocumentConnection(A=>{a();let N=e.getDocumentConnection(A);N&&!n.hasConnectionPrefetchTriggered(N)&&n.triggerConnectionPrefetch(N,g=>ce(t,g,!0,e,N))}),q.window.onDidChangeActiveTextEditor(a),console.log("Netezza extension: Registering SchemaSearchProvider...");let l=new jc(t.extensionUri,t,n,e);console.log("Netezza extension: Registering QueryHistoryView...");let c=new Kc(t.extensionUri,t),u=q.window.createTreeView("netezza.schema",{treeDataProvider:r,showCollapseAll:!0});t.subscriptions.push(q.window.registerWebviewViewProvider(Xc.viewType,i),q.window.registerWebviewViewProvider(jc.viewType,l),q.window.registerWebviewViewProvider(Kc.viewType,c));let d=KK(),E=JK();QK(t,d,E);let f=new wR;t.subscriptions.push(q.languages.registerCodeLensProvider({scheme:"file"},f)),t.subscriptions.push(q.window.onDidChangeActiveTextEditor(A=>{if(A&&A.document){let N=A.document.uri.toString();i.setActiveSource(N)}}));let p=XS({context:t,connectionManager:e,metadataCache:n,schemaProvider:r,schemaTreeView:u});t.subscriptions.push(...p);let h=v6({context:t,connectionManager:e,outputChannel:s});t.subscriptions.push(...h);let T=Y6({context:t,connectionManager:e,outputChannel:s});t.subscriptions.push(...T);let S=qK({context:t,connectionManager:e,resultPanelProvider:i});t.subscriptions.push(...S);let I=new qS(e,t),R=[q.commands.registerCommand("netezza.copilotFixSql",async()=>{try{await I.fixSql()}catch(A){let N=A instanceof Error?A.message:String(A);q.window.showErrorMessage(`Copilot Error: ${N}`)}}),q.commands.registerCommand("netezza.copilotFixSqlInteractive",async()=>{try{await I.fixSqlInteractive()}catch(A){let N=A instanceof Error?A.message:String(A);q.window.showErrorMessage(`Copilot Error: ${N}`)}}),q.commands.registerCommand("netezza.copilotOptimizeSql",async()=>{try{await I.optimizeSql()}catch(A){let N=A instanceof Error?A.message:String(A);q.window.showErrorMessage(`Copilot Error: ${N}`)}}),q.commands.registerCommand("netezza.copilotOptimizeSqlInteractive",async()=>{try{await I.optimizeSqlInteractive()}catch(A){let N=A instanceof Error?A.message:String(A);q.window.showErrorMessage(`Copilot Error: ${N}`)}}),q.commands.registerCommand("netezza.copilotExplainSql",async()=>{try{await I.explainSql()}catch(A){let N=A instanceof Error?A.message:String(A);q.window.showErrorMessage(`Copilot Error: ${N}`)}}),q.commands.registerCommand("netezza.copilotExplainSqlInteractive",async()=>{try{await I.explainSqlInteractive()}catch(A){let N=A instanceof Error?A.message:String(A);q.window.showErrorMessage(`Copilot Error: ${N}`)}}),q.commands.registerCommand("netezza.copilotCustomQuestion",async()=>{try{await I.askCustomQuestion()}catch(A){let N=A instanceof Error?A.message:String(A);q.window.showErrorMessage(`Copilot Error: ${N}`)}}),q.commands.registerCommand("netezza.copilotCustomQuestionInteractive",async()=>{try{await I.askCustomQuestionInteractive()}catch(A){let N=A instanceof Error?A.message:String(A);q.window.showErrorMessage(`Copilot Error: ${N}`)}}),q.commands.registerCommand("netezza.copilotGenerateSql",async()=>{try{await I.generateSqlInteractive()}catch(A){let N=A instanceof Error?A.message:String(A);q.window.showErrorMessage(`Copilot Error: ${N}`)}}),q.commands.registerCommand("justyBaseLite.copilot.changeModel",async()=>{try{await I.changeModel()}catch(A){let N=A instanceof Error?A.message:String(A);q.window.showErrorMessage(`Copilot Error: ${N}`)}}),q.commands.registerCommand("justyBaseLite.copilot.clearModel",async()=>{try{await I.clearPersistedModel()}catch(A){let N=A instanceof Error?A.message:String(A);q.window.showErrorMessage(`Copilot Error: ${N}`)}}),q.commands.registerCommand("netezza.describeDataWithCopilot",async(A,N)=>{try{await I.describeDataWithCopilot(A,N)}catch(g){let L=g instanceof Error?g.message:String(g);q.window.showErrorMessage(`Copilot Error: ${L}`)}}),q.commands.registerCommand("netezza.fixSqlError",async(A,N)=>{try{await I.fixSqlError(A,N)}catch(g){let L=g instanceof Error?g.message:String(g);q.window.showErrorMessage(`Copilot Error: ${L}`)}})];t.subscriptions.push(...R),t.subscriptions.push(q.commands.registerCommand("netezza.viewEditData",A=>{cE.createOrShow(t.extensionUri,A,t,e)}),q.commands.registerCommand("netezza.createProcedure",async A=>{let N=A;if(!N||!N.dbName){q.window.showErrorMessage("Invalid selection. Select a Procedure folder.");return}let g=await q.window.showInputBox({prompt:"Enter new procedure name",placeHolder:"NEW_PROCEDURE",value:"NEW_PROCEDURE"});if(g===void 0)return;let L=g.trim()||"NEW_PROCEDURE",D=`CREATE OR REPLACE PROCEDURE ${N.dbName}.SCHEMA.${L}(INTEGER)
RETURNS INTEGER
EXECUTE AS CALLER
LANGUAGE NZPLSQL AS
BEGIN_PROC
DECLARE
    arg1 ALIAS FOR $1;
BEGIN
    -- YOUR CODE GOES HERE
    
    EXCEPTION
    WHEN OTHERS THEN
        ROLLBACK;
        RAISE EXCEPTION  'Procedure failed: %', sqlerrm;
        --RAISE NOTICE 'Caught error, continuing %', sqlerrm;

END;
END_PROC;`,x=await q.workspace.openTextDocument({content:D,language:"sql"});await q.window.showTextDocument(x)}),q.commands.registerCommand("netezza.toggleKeepConnectionOpen",()=>{let A=e.getKeepConnectionOpen();e.setKeepConnectionOpen(!A),$b(o,e);let N=!A;q.window.showInformationMessage(N?"Keep connection open: ENABLED - connection will remain open after queries":"Keep connection open: DISABLED - connection will be closed after each query")}),q.commands.registerCommand("netezza.selectActiveConnection",async()=>{let A=await e.getConnections();if(A.length===0){q.window.showWarningMessage("No connections configured. Please connect first.");return}let N=await q.window.showQuickPick(A.map(g=>g.name),{placeHolder:"Select Active Connection"});N&&(await e.setActiveConnection(N),q.window.showInformationMessage(`Active connection set to: ${N}`))}),q.commands.registerCommand("netezza.selectConnectionForTab",async()=>{let A=q.window.activeTextEditor;if(!A||A.document.languageId!=="sql"){q.window.showWarningMessage("This command is only available for SQL files");return}let N=await e.getConnections();if(N.length===0){q.window.showWarningMessage("No connections configured. Please connect first.");return}let g=A.document.uri.toString(),L=e.getDocumentConnection(g)||e.getActiveConnectionName(),y=N.map(x=>({label:x.name,description:L===x.name?"$(check) Currently selected":`${x.host}:${x.port}/${x.database}`,name:x.name})),D=await q.window.showQuickPick(y,{placeHolder:"Select connection for this SQL tab"});D&&(e.setDocumentConnection(g,D.name),q.window.showInformationMessage(`Connection for this tab set to: ${D.name}`))}),q.commands.registerCommand("netezza.openLogin",()=>{tE.createOrShow(t.extensionUri,e)}),q.commands.registerCommand("netezza.refreshSchema",async()=>{await n.clearCache(),r.refresh(),q.window.showInformationMessage("Schema refreshed (Cache cleared)")}),q.commands.registerCommand("netezza.jumpToSchema",async()=>{let A=q.window.activeTextEditor;if(!A)return;let N=A.document,g=A.selection,L=N.offsetAt(g.active),y=Fn.getObjectAtPosition(N.getText(),L);y?q.commands.executeCommand("netezza.revealInSchema",y):q.window.showWarningMessage("No object found at cursor")}),q.commands.registerCommand("netezza.runScriptFromLens",async(A,N)=>{try{let g=await q.workspace.openTextDocument(A),L=g.getText(N).trim()||g.lineAt(N.start.line).text.trim();if(!L){q.window.showWarningMessage("No script command found");return}let y=L.split(/\s+/),D=y[0]||"",x=/python(\.exe)?$/i.test(D)&&y.length>=2&&y[1].toLowerCase().endsWith(".py"),B=D.toLowerCase().endsWith(".py"),X=q.workspace.getConfiguration("netezza").get("pythonPath")||"python",J="";if(x){let Q=y[0],ie=y[1],fe=y.slice(2);J=Ss(Q,ie,fe)}else if(B){let Q=D,ie=y.slice(1);J=Ss(X,Q,ie)}else J=Ss(X,"",y);let ee=q.window.createTerminal({name:"Netezza: Script"});ee.show(!0),ee.sendText(J,!0),q.window.showInformationMessage(`Running script: ${J}`)}catch(g){let L=g instanceof Error?g.message:String(g);q.window.showErrorMessage(`Error running script: ${L}`)}}),q.commands.registerCommand("netezza.clearAutocompleteCache",async()=>{await q.window.showWarningMessage("Are you sure you want to clear the autocomplete cache? This will remove all cached databases, schemas, tables, and columns.",{modal:!0},"Clear Cache")==="Clear Cache"&&(await n.clearCache(),q.window.showInformationMessage("Autocomplete cache cleared successfully. Cache will be rebuilt on next use."))}),q.commands.registerCommand("netezza.copySelection",()=>{i.triggerCopySelection()}),q.commands.registerCommand("netezza.openEtlDesigner",()=>{Vr.setConnectionManager(e),Vr.createOrShow(t)}),q.commands.registerCommand("netezza.newEtlProject",async()=>{let A=await q.window.showInputBox({prompt:"Enter ETL project name",value:"New ETL Project"});A&&(Cs.getInstance().createProject(A),Vr.setConnectionManager(e),Vr.createOrShow(t))}),q.commands.registerCommand("netezza.openEtlProject",async()=>{let A=await q.window.showOpenDialog({filters:{"ETL Project":["etl.json"]},canSelectMany:!1});if(A&&A[0])try{let g=await Cs.getInstance().loadProject(A[0].fsPath);Vr.setConnectionManager(e),Vr.createOrShow(t,g),q.window.showInformationMessage(`ETL project loaded: ${g.name}`)}catch(N){q.window.showErrorMessage(`Failed to load ETL project: ${N}`)}}),q.commands.registerCommand("netezza.runEtlProject",async()=>{let N=Cs.getInstance().getCurrentProject();if(!N){q.window.showWarningMessage("No ETL project is currently open. Please open or create a project first.");return}Vr.setConnectionManager(e),Vr.createOrShow(t,N),q.window.showInformationMessage("ETL project opened. Use the Run button in the designer to execute.")})),t.subscriptions.push(q.languages.registerDocumentLinkProvider({language:"sql"},new oE),q.languages.registerFoldingRangeProvider({language:"sql"},new aE));let m=new sE(t,n,e);t.subscriptions.push(q.languages.registerCompletionItemProvider(["sql","mssql"],m,"."," ")),ZK(t),w0(t),t.subscriptions.push(q.languages.registerCodeActionsProvider(["sql","netezza-sql"],new Qc,{providedCodeActionKinds:Qc.providedCodeActionKinds})),console.log("Netezza extension: Activation complete.")}function mLe(){}0&&(module.exports={activate,deactivate});
/*! Bundled license information:

normalize-path/index.js:
  (*!
   * normalize-path <https://github.com/jonschlinkert/normalize-path>
   *
   * Copyright (c) 2014-2018, Jon Schlinkert.
   * Released under the MIT License.
   *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

archiver/lib/error.js:
archiver/lib/core.js:
  (**
   * Archiver Core
   *
   * @ignore
   * @license [MIT]{@link https://github.com/archiverjs/node-archiver/blob/master/LICENSE}
   * @copyright (c) 2012-2014 Chris Talkington, contributors.
   *)

crc-32/crc32.js:
  (*! crc32.js (C) 2014-present SheetJS -- http://sheetjs.com *)

zip-stream/index.js:
  (**
   * ZipStream
   *
   * @ignore
   * @license [MIT]{@link https://github.com/archiverjs/node-zip-stream/blob/master/LICENSE}
   * @copyright (c) 2014 Chris Talkington, contributors.
   *)

archiver/lib/plugins/zip.js:
  (**
   * ZIP Format Plugin
   *
   * @module plugins/zip
   * @license [MIT]{@link https://github.com/archiverjs/node-archiver/blob/master/LICENSE}
   * @copyright (c) 2012-2014 Chris Talkington, contributors.
   *)

archiver/lib/plugins/tar.js:
  (**
   * TAR Format Plugin
   *
   * @module plugins/tar
   * @license [MIT]{@link https://github.com/archiverjs/node-archiver/blob/master/LICENSE}
   * @copyright (c) 2012-2014 Chris Talkington, contributors.
   *)

archiver/lib/plugins/json.js:
  (**
   * JSON Format Plugin
   *
   * @module plugins/json
   * @license [MIT]{@link https://github.com/archiverjs/node-archiver/blob/master/LICENSE}
   * @copyright (c) 2012-2014 Chris Talkington, contributors.
   *)

archiver/index.js:
  (**
   * Archiver Vending
   *
   * @ignore
   * @license [MIT]{@link https://github.com/archiverjs/node-archiver/blob/master/LICENSE}
   * @copyright (c) 2012-2014 Chris Talkington, contributors.
   *)
*/
