"use strict";var W4=Object.create;var Mf=Object.defineProperty;var k4=Object.getOwnPropertyDescriptor;var $4=Object.getOwnPropertyNames;var Y4=Object.getPrototypeOf,V4=Object.prototype.hasOwnProperty;var H=(t,e)=>()=>(t&&(e=t(t=0)),e);var O=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),_t=(t,e)=>{for(var r in e)Mf(t,r,{get:e[r],enumerable:!0})},R0=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of $4(e))!V4.call(t,i)&&i!==r&&Mf(t,i,{get:()=>e[i],enumerable:!(n=k4(e,i))||n.enumerable});return t};var q=(t,e,r)=>(r=t!=null?W4(Y4(t)):{},R0(e||!t||!t.__esModule?Mf(r,"default",{value:t,enumerable:!0}):r,t)),Ma=t=>R0(Mf({},"__esModule",{value:!0}),t);var or,Ut,Vn,_e,Ss,bR=H(()=>{"use strict";or={AuthenticationRequest:82,ErrorResponse:69,NoticeResponse:78,BackendKeyData:75,ReadyForQuery:90,RowDescription:84,RowDescriptionStandard:88,DataRow:68,CommandComplete:67,EmptyQueryResponse:73,RowStandard:89,CopyInResponse:71,CopyOutResponse:72,CopyDone:99,CopyData:100},Ut={NzTypeRecAddr:1,NzTypeDouble:2,NzTypeInt:3,NzTypeFloat:4,NzTypeMoney:5,NzTypeDate:6,NzTypeNumeric:7,NzTypeTime:8,NzTypeTimestamp:9,NzTypeInterval:10,NzTypeTimeTz:11,NzTypeBool:12,NzTypeInt1:13,NzTypeBinary:14,NzTypeChar:15,NzTypeVarChar:16,NzDEPR_Text:17,NzTypeUnknown:18,NzTypeInt2:19,NzTypeInt8:20,NzTypeVarFixedChar:21,NzTypeGeometry:22,NzTypeVarBinary:23,NzDEPR_Blob:24,NzTypeNChar:25,NzTypeNVarChar:26,NzDEPR_NText:27,NzTypeJson:30,NzTypeJsonb:31,NzTypeJsonpath:32,NzTypeLastEntry:33,NzTypeIntvsAbsTimeFIX:39},Vn={CP_VERSION_2:2,CP_VERSION_3:3,CP_VERSION_4:4,CP_VERSION_5:5,CP_VERSION_6:6},_e={HSV2_CLIENT_BEGIN:1,HSV2_DB:2,HSV2_USER:3,HSV2_OPTIONS:4,HSV2_REMOTE_PID:6,HSV2_CLIENT_TYPE:8,HSV2_PROTOCOL:9,HSV2_SSL_NEGOTIATE:11,HSV2_SSL_CONNECT:12,HSV2_APPNAME:13,HSV2_CLIENT_OS:14,HSV2_CLIENT_HOST_NAME:15,HSV2_CLIENT_OS_USER:16,HSV2_64BIT_VARLENA_ENABLED:17,HSV2_CLIENT_DONE:1e3},Ss={DATA:1,ERROR:2,DONE:3}});function _0(t){let e=t.readBigInt64LE(0),r=Number(e/1000n);return new Date(m0+r)}function I0(t){let r=t.readInt32LE(0)*24*60*60*1e3;return new Date(m0+r)}function vf(t){let e=t.readBigInt64LE(0),r=Number(e/1000000n),n=Number(e%1000000n),i=Math.floor(r/3600),s=Math.floor(r%3600/60),o=r%60;return{hours:i,minutes:s,seconds:o,microseconds:n,toString(){let a=String(i).padStart(2,"0"),l=String(s).padStart(2,"0"),c=String(o).padStart(2,"0");if(n>0){let u=String(n).padStart(6,"0");return`${a}:${l}:${c}.${u}`}return`${a}:${l}:${c}`}}}function g0(t){if(!t)return null;let e=t.split(":"),r=parseInt(e[0],10)||0,n=parseInt(e[1],10)||0,i=(e[2]||"0").split("."),s=parseInt(i[0],10)||0,o=0;return i.length>1&&(o=parseInt(i[1].substring(0,6).padEnd(6,"0"),10)),{hours:r,minutes:n,seconds:s,microseconds:o,toString(){return t}}}function N0(t){let e=t.readBigInt64LE(0),r=t.readInt32LE(8),n=vf(t);if(r===0)return n.toString();let i=Math.floor(r/12),s=r%12;return i>0?`${i} years ${s} mons ${n.toString()}`:`${s} mons ${n.toString()}`}function O0(t,e){let r=vf(t),n=t.readInt32LE(e-4),i=n<0?"+":"-",s=Math.abs(n),o=Math.floor(s/3600),a=Math.floor(s%3600/60),l=s%60,c=String(o).padStart(2,"0");return l!==0?c+=":"+String(a).padStart(2,"0")+":"+String(l).padStart(2,"0"):a!==0&&(c+=":"+String(a).padStart(2,"0")),`${r.toString()}${i}${c}`}function C0(t,e,r,n){let i=e<=9?1:e<=18?2:4,s=[];for(let f=0;f<i;f++)s.push(t.readUInt32LE(f*4));let o=(s[0]&A0)!==0?4294967295:0,a=new Array(va).fill(o);for(let f=va-n,T=0;f<va;f++,T++)a[f]=s[T];let l=(a[0]&A0)!==0;l&&X4(a);let c=new Array(Uc).fill(0);for(let f=0;f<Uc;f++)c[Uc-f-1]=q4(a);let u="",d=!0;for(let f=0;f<Uc;f++)f<Uc-r-1&&d&&c[f]===0||(d=!1,u+=String(c[f]));if(u===""&&(u="0"),r!==0){let f=u.slice(0,-r)||"0",T=u.slice(-r).padStart(r,"0");u=f+"."+T}l&&(u="-"+u);let E=parseFloat(u);return e<=15&&u===String(E)?E:u}function q4(t){let e=0;for(let r=0;r<va;r++){let n=t[r]+e*4294967296;n!==0?(t[r]=Math.floor(n/10),e=n%10):(t[r]=0,e=0)}return e}function X4(t){for(let r=0;r<va;r++)t[r]=~t[r]>>>0;let e=1;for(let r=va-1;r>=0&&e;r--){let n=t[r]+e;t[r]=n>>>0,e=n>4294967295?1:0}}var m0,va,Uc,A0,y0=H(()=>{"use strict";m0=Date.UTC(2e3,0,1);va=4,Uc=38,A0=2147483648});var LR=O((lLe,b0)=>{"use strict";var wR=class{static readInt32(e,r=0){return e.readInt32BE(r)}static readInt16(e,r=0){return e.readInt16BE(r)}static writeInt32(e,r,n=0){if(Buffer.isBuffer(e))e.writeInt32BE(r,n);else{let i=Buffer.allocUnsafe(4);i.writeInt32BE(r,0),e.write(i)}}static writeInt16(e,r,n=0){if(Buffer.isBuffer(e))e.writeInt16BE(r,n);else{let i=Buffer.allocUnsafe(2);i.writeInt16BE(r,0),e.write(i)}}};b0.exports=wR});var L0=O((cLe,w0)=>{var Ua=1e3,Ba=Ua*60,Fa=Ba*60,oo=Fa*24,z4=oo*7,K4=oo*365.25;w0.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return J4(t);if(r==="number"&&isFinite(t))return e.long?Z4(t):Q4(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function J4(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*K4;case"weeks":case"week":case"w":return r*z4;case"days":case"day":case"d":return r*oo;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Fa;case"minutes":case"minute":case"mins":case"min":case"m":return r*Ba;case"seconds":case"second":case"secs":case"sec":case"s":return r*Ua;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function Q4(t){var e=Math.abs(t);return e>=oo?Math.round(t/oo)+"d":e>=Fa?Math.round(t/Fa)+"h":e>=Ba?Math.round(t/Ba)+"m":e>=Ua?Math.round(t/Ua)+"s":t+"ms"}function Z4(t){var e=Math.abs(t);return e>=oo?Uf(t,e,oo,"day"):e>=Fa?Uf(t,e,Fa,"hour"):e>=Ba?Uf(t,e,Ba,"minute"):e>=Ua?Uf(t,e,Ua,"second"):t+" ms"}function Uf(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var DR=O((uLe,D0)=>{function e8(t){r.debug=r,r.default=r,r.coerce=l,r.disable=o,r.enable=i,r.enabled=a,r.humanize=L0(),r.destroy=c,Object.keys(t).forEach(u=>{r[u]=t[u]}),r.names=[],r.skips=[],r.formatters={};function e(u){let d=0;for(let E=0;E<u.length;E++)d=(d<<5)-d+u.charCodeAt(E),d|=0;return r.colors[Math.abs(d)%r.colors.length]}r.selectColor=e;function r(u){let d,E=null,f,T;function h(...p){if(!h.enabled)return;let S=h,m=Number(new Date),R=m-(d||m);S.diff=R,S.prev=d,S.curr=m,d=m,p[0]=r.coerce(p[0]),typeof p[0]!="string"&&p.unshift("%O");let A=0;p[0]=p[0].replace(/%([a-zA-Z%])/g,(w,I)=>{if(w==="%%")return"%";A++;let D=r.formatters[I];if(typeof D=="function"){let b=p[A];w=D.call(S,b),p.splice(A,1),A--}return w}),r.formatArgs.call(S,p),(S.log||r.log).apply(S,p)}return h.namespace=u,h.useColors=r.useColors(),h.color=r.selectColor(u),h.extend=n,h.destroy=r.destroy,Object.defineProperty(h,"enabled",{enumerable:!0,configurable:!1,get:()=>E!==null?E:(f!==r.namespaces&&(f=r.namespaces,T=r.enabled(u)),T),set:p=>{E=p}}),typeof r.init=="function"&&r.init(h),h}function n(u,d){let E=r(this.namespace+(typeof d>"u"?":":d)+u);return E.log=this.log,E}function i(u){r.save(u),r.namespaces=u,r.names=[],r.skips=[];let d=(typeof u=="string"?u:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let E of d)E[0]==="-"?r.skips.push(E.slice(1)):r.names.push(E)}function s(u,d){let E=0,f=0,T=-1,h=0;for(;E<u.length;)if(f<d.length&&(d[f]===u[E]||d[f]==="*"))d[f]==="*"?(T=f,h=E,f++):(E++,f++);else if(T!==-1)f=T+1,h++,E=h;else return!1;for(;f<d.length&&d[f]==="*";)f++;return f===d.length}function o(){let u=[...r.names,...r.skips.map(d=>"-"+d)].join(",");return r.enable(""),u}function a(u){for(let d of r.skips)if(s(u,d))return!1;for(let d of r.names)if(s(u,d))return!0;return!1}function l(u){return u instanceof Error?u.stack||u.message:u}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}D0.exports=e8});var P0=O((Yr,Bf)=>{Yr.formatArgs=r8;Yr.save=n8;Yr.load=i8;Yr.useColors=t8;Yr.storage=s8();Yr.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Yr.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function t8(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let t;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function r8(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+Bf.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}Yr.log=console.debug||console.log||(()=>{});function n8(t){try{t?Yr.storage.setItem("debug",t):Yr.storage.removeItem("debug")}catch{}}function i8(){let t;try{t=Yr.storage.getItem("debug")||Yr.storage.getItem("DEBUG")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function s8(){try{return localStorage}catch{}}Bf.exports=DR()(Yr);var{formatters:o8}=Bf.exports;o8.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var M0=O((dLe,x0)=>{"use strict";x0.exports=(t,e=process.argv)=>{let r=t.startsWith("-")?"":t.length===1?"-":"--",n=e.indexOf(r+t),i=e.indexOf("--");return n!==-1&&(i===-1||n<i)}});var B0=O((fLe,U0)=>{"use strict";var a8=require("os"),v0=require("tty"),cn=M0(),{env:zt}=process,Rs;cn("no-color")||cn("no-colors")||cn("color=false")||cn("color=never")?Rs=0:(cn("color")||cn("colors")||cn("color=true")||cn("color=always"))&&(Rs=1);"FORCE_COLOR"in zt&&(zt.FORCE_COLOR==="true"?Rs=1:zt.FORCE_COLOR==="false"?Rs=0:Rs=zt.FORCE_COLOR.length===0?1:Math.min(parseInt(zt.FORCE_COLOR,10),3));function PR(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function xR(t,e){if(Rs===0)return 0;if(cn("color=16m")||cn("color=full")||cn("color=truecolor"))return 3;if(cn("color=256"))return 2;if(t&&!e&&Rs===void 0)return 0;let r=Rs||0;if(zt.TERM==="dumb")return r;if(process.platform==="win32"){let n=a8.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in zt)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in zt)||zt.CI_NAME==="codeship"?1:r;if("TEAMCITY_VERSION"in zt)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(zt.TEAMCITY_VERSION)?1:0;if(zt.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in zt){let n=parseInt((zt.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(zt.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(zt.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(zt.TERM)||"COLORTERM"in zt?1:r}function l8(t){let e=xR(t,t&&t.isTTY);return PR(e)}U0.exports={supportsColor:l8,stdout:PR(xR(!0,v0.isatty(1))),stderr:PR(xR(!0,v0.isatty(2)))}});var G0=O((Kt,Gf)=>{var c8=require("tty"),Ff=require("util");Kt.init=p8;Kt.log=E8;Kt.formatArgs=d8;Kt.save=h8;Kt.load=T8;Kt.useColors=u8;Kt.destroy=Ff.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");Kt.colors=[6,2,3,4,5,1];try{let t=B0();t&&(t.stderr||t).level>=2&&(Kt.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}Kt.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,s)=>s.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function u8(){return"colors"in Kt.inspectOpts?!!Kt.inspectOpts.colors:c8.isatty(process.stderr.fd)}function d8(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),s=`  ${i};1m${e} \x1B[0m`;t[0]=s+t[0].split(`
`).join(`
`+s),t.push(i+"m+"+Gf.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=f8()+e+" "+t[0]}function f8(){return Kt.inspectOpts.hideDate?"":new Date().toISOString()+" "}function E8(...t){return process.stderr.write(Ff.formatWithOptions(Kt.inspectOpts,...t)+`
`)}function h8(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function T8(){return process.env.DEBUG}function p8(t){t.inspectOpts={};let e=Object.keys(Kt.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=Kt.inspectOpts[e[r]]}Gf.exports=DR()(Kt);var{formatters:F0}=Gf.exports;F0.o=function(t){return this.inspectOpts.colors=this.useColors,Ff.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};F0.O=function(t){return this.inspectOpts.colors=this.useColors,Ff.inspect(t,this.inspectOpts)}});var vR=O((ELe,MR)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?MR.exports=P0():MR.exports=G0()});var V0=O((TLe,Y0)=>{"use strict";var H0=q(require("crypto")),W0=q(require("os")),k0=q(require("tls")),$0=q(require("fs"));bR();var ne=LR(),Bt=vR()("nz:handshake"),UR=class{constructor(e,r,n,i={}){this._hsVersion=-1;this._protocol1=-1;this._protocol2=-1;this.NPSCLIENT_TYPE_DOTNET=11;this.backendProcessId=0;this.backendSecretKey=0;this._socket=e,this._stream=r,this._host=n,this._options=i,this._guardiumClientOS=process.platform,this._guardiumClientOSUser=process.env.USERNAME||process.env.USER||"unknown",this._guardiumAppName="scJs-Driver",this._guardiumClientHostName=W0.hostname()}async startup(e,r,n){if(!await this.connHandshakeNegotiate())throw new Error("Handshake negotiation unsuccessful");if(Bt("Sending handshake info"),!await this.connSendHandshakeInfo(e,r))throw new Error("Error in ConnSendHandshakeInfo");if(!await this.connAuthenticate(n))throw new Error("Error in ConnAuthenticate");if(!await this.connConnectionComplete())throw new Error("Error in ConnConnectionComplete");return this._stream}async _readExactly(e){return new Promise((r,n)=>{let i=this._stream.read(e);i?r(i):this._stream.once("readable",()=>{let s=this._stream.read(e);s&&r(s)})})}async readBytes(e){for(;;){let r=this._stream.read(e);if(r!==null)return r;await new Promise(n=>this._stream.once("readable",n))}}async readByte(){return(await this.readBytes(1))[0]}async connHandshakeNegotiate(){let e=Vn.CP_VERSION_6;for(;;){Bt(`Sending version: ${e}`),ne.writeInt32(this._stream,8),ne.writeInt16(this._stream,_e.HSV2_CLIENT_BEGIN),ne.writeInt16(this._stream,e);let r=await this.readByte();if(Bt(`Got response: ${String.fromCharCode(r)}`),r===78)return this._hsVersion=e,this._protocol2=0,!0;if(r===77){let n=await this.readByte(),i=String.fromCharCode(n);i==="2"?e=Vn.CP_VERSION_2:i==="3"?e=Vn.CP_VERSION_3:i==="4"?e=Vn.CP_VERSION_4:i==="5"&&(e=Vn.CP_VERSION_5)}else return!1}}async connSendHandshakeInfo(e,r){return await this.connSendDatabase(e)?(await this.connSecureSession(),this.connSetNextDataProtocol(this._protocol1,this._protocol2),this._hsVersion===Vn.CP_VERSION_6||this._hsVersion===Vn.CP_VERSION_4?this.connSendHandshakeVersion4(this._hsVersion,r):this.connSendHandshakeVersion2(this._hsVersion,r)):!1}async connSendDatabase(e){let r=Buffer.from(e,"utf8"),n=6+r.length+1;return ne.writeInt32(this._stream,n),ne.writeInt16(this._stream,_e.HSV2_DB),this._stream.write(r),this._stream.write(Buffer.from([0])),await this.readByte()===78}async connSecureSession(){let r=0,n=this._options.securityLevel;n==="OnlyUnsecuredSession"?r=1:n==="PreferredSecuredSession"?r=2:n==="OnlySecuredSession"&&(r=3),ne.writeInt32(this._stream,10),ne.writeInt16(this._stream,_e.HSV2_SSL_NEGOTIATE),ne.writeInt32(this._stream,r);let i=await this.readByte();if(i===78){if(this._options.securityLevel==="OnlySecuredSession")throw new Error("Server refused secure session, but OnlySecuredSession was requested.");return!0}if(i===83){Bt("Upgrading to SSL...");let s=Buffer.alloc(6);s.writeInt32BE(6,0),s.writeInt16BE(_e.HSV2_SSL_CONNECT,4),await new Promise(a=>{this._stream.write(s)?a():this._stream.once("drain",a)}),this._socket.removeAllListeners("data"),this._socket.removeAllListeners("readable");let o={socket:this._socket,rejectUnauthorized:!1};if(this._options.sslCerFilePath){this._options.rejectUnauthorized===!1?o.rejectUnauthorized=!1:o.rejectUnauthorized=!0;try{o.ca=$0.readFileSync(this._options.sslCerFilePath)}catch(a){throw Bt("Failed to load cert file",a),a}}return new Promise((a,l)=>{let c=k0.connect(o,()=>{Bt("SSL Connected"),this._stream=c,this._stream.on("error",u=>{Bt("Secure Stream Error",u)}),this.readByte().then(u=>{u===78?a(!0):l(new Error(`SSL Handshake failed: Unexpected response ${String.fromCharCode(u)}`))}).catch(u=>{Bt("Failed to read SSL confirmation",u),l(u)})});c.on("error",u=>{Bt("SSL Connection Error",u),l(u)})})}return!1}connSetNextDataProtocol(e,r){return this._protocol2===0&&(this._protocol2=5),this._protocol1=3,!0}async connSendHandshakeVersion4(e,r){let n=Buffer.from(r,"utf8"),i=6+n.length+1;ne.writeInt32(this._stream,i),ne.writeInt16(this._stream,_e.HSV2_USER),this._stream.write(n),this._stream.write(Buffer.from([0]));let s=_e.HSV2_APPNAME;for(;s!==0;){if(await this.readByte()!==78)return!1;switch(s){case _e.HSV2_APPNAME:await this.sendStringOption(s,this._guardiumAppName),s=_e.HSV2_CLIENT_OS;break;case _e.HSV2_CLIENT_OS:await this.sendStringOption(s,this._guardiumClientOS),s=_e.HSV2_CLIENT_HOST_NAME;break;case _e.HSV2_CLIENT_HOST_NAME:await this.sendStringOption(s,this._guardiumClientHostName),s=_e.HSV2_CLIENT_OS_USER;break;case _e.HSV2_CLIENT_OS_USER:await this.sendStringOption(s,this._guardiumClientOSUser),s=_e.HSV2_PROTOCOL;break;case _e.HSV2_PROTOCOL:i=10,ne.writeInt32(this._stream,i),ne.writeInt16(this._stream,s),ne.writeInt16(this._stream,this._protocol1),ne.writeInt16(this._stream,this._protocol2),s=_e.HSV2_REMOTE_PID;break;case _e.HSV2_REMOTE_PID:i=10,ne.writeInt32(this._stream,i),ne.writeInt16(this._stream,s),ne.writeInt32(this._stream,process.pid),s=_e.HSV2_CLIENT_TYPE;break;case _e.HSV2_CLIENT_TYPE:i=8,ne.writeInt32(this._stream,i),ne.writeInt16(this._stream,s),ne.writeInt16(this._stream,11),e>=5?s=_e.HSV2_64BIT_VARLENA_ENABLED:s=_e.HSV2_CLIENT_DONE;break;case _e.HSV2_64BIT_VARLENA_ENABLED:i=8,ne.writeInt32(this._stream,i),ne.writeInt16(this._stream,s),ne.writeInt16(this._stream,1),s=_e.HSV2_CLIENT_DONE;break;case _e.HSV2_CLIENT_DONE:return i=6,ne.writeInt32(this._stream,i),ne.writeInt16(this._stream,s),s=0,!0}}return!1}async connSendHandshakeVersion2(e,r){let n=Buffer.from(r,"utf8"),i=6+n.length+1;ne.writeInt32(this._stream,i),ne.writeInt16(this._stream,_e.HSV2_USER),this._stream.write(n),this._stream.write(Buffer.from([0]));let s=_e.HSV2_PROTOCOL;for(;s!==0;){Bt(`Waiting for response in v2 loop. Info: ${s}`);let o=await this.readByte();if(Bt(`Got response: ${String.fromCharCode(o)}`),o===78)switch(s){case _e.HSV2_PROTOCOL:i=10,ne.writeInt32(this._stream,i),ne.writeInt16(this._stream,s),ne.writeInt16(this._stream,this._protocol1),ne.writeInt16(this._stream,this._protocol2),s=_e.HSV2_REMOTE_PID;break;case _e.HSV2_REMOTE_PID:i=10,ne.writeInt32(this._stream,i),ne.writeInt16(this._stream,s),ne.writeInt32(this._stream,process.pid),s=_e.HSV2_CLIENT_TYPE;break;case _e.HSV2_OPTIONS:s=_e.HSV2_CLIENT_TYPE;break;case _e.HSV2_CLIENT_TYPE:i=8,ne.writeInt32(this._stream,i),ne.writeInt16(this._stream,s),ne.writeInt16(this._stream,11),e===Vn.CP_VERSION_5||e===Vn.CP_VERSION_6?s=_e.HSV2_64BIT_VARLENA_ENABLED:s=_e.HSV2_CLIENT_DONE;break;case _e.HSV2_64BIT_VARLENA_ENABLED:i=8,ne.writeInt32(this._stream,i),ne.writeInt16(this._stream,s),ne.writeInt16(this._stream,1),s=_e.HSV2_CLIENT_DONE;break;case _e.HSV2_CLIENT_DONE:return i=6,ne.writeInt32(this._stream,i),ne.writeInt16(this._stream,s),s=0,!0}else throw o===or.ErrorResponse?new Error("Handshake V2 Failed: ErrorResponse from backend"):new Error(`Handshake V2 Failed: Unexpected response ${String.fromCharCode(o)}`)}return!1}async sendStringOption(e,r){let n=Buffer.from(r,"utf8"),i=6+n.length+1;ne.writeInt32(this._stream,i),ne.writeInt16(this._stream,e),this._stream.write(n),this._stream.write(Buffer.from([0]))}async connAuthenticate(e){if(await this.readByte()!==or.AuthenticationRequest)return!1;let n=ne.readInt32(await this.readBytes(4));if(Bt(`Auth request: ${n}`),n===0)return!0;if(n===3){let i=Buffer.from(e,"utf8"),s=4+i.length+1;return ne.writeInt32(this._stream,s),this._stream.write(i),this._stream.write(Buffer.from([0])),!0}if(n===5){let i=await this.readBytes(2),s=Buffer.from(e,"utf8"),a=H0.createHash("md5").update(Buffer.concat([i,s])).digest("base64").replace(/=+$/,""),l=Buffer.from(a,"utf8"),c=4+l.length+1;return ne.writeInt32(this._stream,c),this._stream.write(l),this._stream.write(Buffer.from([0])),!0}return!1}async readString(){let e=[];for(;;){let r=await this.readByte();if(r===0)break;e.push(r)}return Buffer.from(e).toString("utf8")}async connConnectionComplete(){for(;;){let e=await this.readByte();if(Bt(`Resp: ${String.fromCharCode(e)} (0x${e.toString(16)})`),e===or.AuthenticationRequest){let n=ne.readInt32(await this.readBytes(4));Bt(`Auth req in complete: ${n}`);continue}if(e===or.ErrorResponse){let n=await this.readBytes(4),i=ne.readInt32(n);if(i<0||i>1e8){let o=n.toString("utf8");throw o+=await this.readString(),new Error(`Backend Error: ${o}`)}let s=await this.readBytes(i-4);throw new Error(`Backend Error: ${s.toString()}`)}let r=await this.readBytes(4);if(Bt(`Skipped 4 bytes: ${r.toString("hex")}`),e===or.BackendKeyData){let n=await this.readBytes(4);Bt(`KeyData Padding: ${n.toString("hex")}`);let i=ne.readInt32(await this.readBytes(4)),s=ne.readInt32(await this.readBytes(4));Bt(`KeyData: PID=${i} Key=${s}`),this.backendProcessId=i,this.backendSecretKey=s;continue}if(e===or.ReadyForQuery)return Bt("ReadyForQuery"),!0;if(e===or.NoticeResponse){let n=ne.readInt32(await this.readBytes(4)),i=await this.readBytes(n);Bt(`Notice: ${i.toString()}`);continue}}}};Y0.exports=UR});var X0=O((pLe,q0)=>{"use strict";var BR=class{constructor(e){this.connection=e,this.commandText="",this.parameters=[],this._recordsAffected=-1,this.commandTimeout=e.commandTimeout!==void 0?e.commandTimeout:30}async execute(){return this.connection.execute(this,!1)}async executeNonQuery(){return await this.connection.execute(this,!1),this._recordsAffected}async executeReader(){return this.connection.executeReader(this)}async cancel(){return this.connection.cancel()}};q0.exports=BR});var z0=O((SLe,j0)=>{"use strict";var Te={Bool:16,Bytea:17,Char:18,Name:19,Int8:20,Int2:21,Int4:23,Text:25,ShowDate:2530,BpChar:1042,VarChar:1043,Date:1082,Time:1083,Timestamp:1114,TimestampTz:1184,Interval:1186,TimeTz:1266,Numeric:1700,Float4:700,Float8:701},Bc=16,FR=class{constructor(e,r,n,i,s){this.currentRow=null;this.closed=!1;this._nameIndex={};this._pendingColumns=null;this._isFinished=!1;this.command=e,this.generator=r,this.columnDescriptions=n||[],this.releaseCallback=i,this._initNameIndex(),this._nextItem=s,this._hasRows=!!(this._nextItem&&this._nextItem.type==="DataRow")}get hasRows(){return this._hasRows}_initNameIndex(){if(this._nameIndex={},this.columnDescriptions)for(let e=0;e<this.columnDescriptions.length;e++)this._nameIndex[this.columnDescriptions[e].name.toLowerCase()]=e}_markFinished(){this._isFinished=!0,this._nextItem=null,this._hasRows=!1,this.releaseCallback&&(this.releaseCallback(),this.releaseCallback=null)}async nextResult(){if(this._pendingColumns){for(this.columnDescriptions=this._pendingColumns,this._pendingColumns=null,this._initNameIndex(),this.currentRow=null;;){let e=await this.generator.next();if(e.done){this._nextItem=null,this._hasRows=!1;break}let r=e.value;if(r.type!=="RowDescriptionStandard")if(r.type==="DataRow"){this._nextItem=r,this._hasRows=!0;break}else if(r.type==="CommandComplete"){this._nextItem=r,this._hasRows=!1;break}else{this._nextItem=r,this._hasRows=!1;break}}return!0}if(this.closed||this._isFinished)return!1;for(;;){let e;if(this._nextItem?(e={value:this._nextItem,done:!1},this._nextItem=null):e=await this.generator.next(),e.done)return this._markFinished(),!1;let r=e.value;if(r.type==="RowDescription"){this.columnDescriptions=r.columns,this._initNameIndex(),this.currentRow=null;continue}if(r.type==="RowDescriptionStandard"){let n=this.command?._preparedStatement;this.columnDescriptions.length===0&&n&&n.description&&(this.columnDescriptions=n.description,this._initNameIndex()),this.currentRow=null;continue}if(r.type==="DataRow")return this._nextItem=r,this._hasRows=!0,!0;if(r.type!=="CommandComplete"){if(r.type==="ErrorResponse")throw new Error(r.message||"Unknown Netezza Error");if(r.type==="ReadyForQuery")return this._markFinished(),!1}}}getSchemaTable(){if(!this.columnDescriptions)return[];let e=[];for(let r=0;r<this.columnDescriptions.length;r++){let n=this.columnDescriptions[r],i={ColumnName:n.name,ColumnOrdinal:r+1,ColumnSize:-1,NumericPrecision:0,NumericScale:0,DataType:String,ProviderType:n.typeOid,AllowDBNull:!0,IsReadOnly:!0,IsLong:!1},s=n.typeMod,o=n.typeOid;switch(o){case Te.Bool:i.DataType=Boolean,i.ColumnSize=1;break;case Te.Int2:i.DataType=Number,i.ColumnSize=2;break;case Te.Int4:i.DataType=Number,i.ColumnSize=4;break;case Te.Int8:i.DataType=Number,i.ColumnSize=8;break;case Te.Float4:case Te.Float8:i.DataType=Number,i.ColumnSize=o===Te.Float8?8:4,i.NumericPrecision=o===Te.Float8?53:24;break;case Te.Numeric:if(i.DataType=Number,s>Bc){let a=s-Bc>>16,l=s-Bc&65535;i.NumericPrecision=a,i.NumericScale=l,i.ColumnSize=Math.floor(a/2)+1,i.ColumnSize<n.typeLen&&n.typeLen>0&&(i.ColumnSize=n.typeLen)}else i.ColumnSize=n.typeLen;break;case Te.Date:case Te.Timestamp:case Te.TimestampTz:case Te.Time:case Te.TimeTz:i.DataType=Date,(o===Te.Time||o===Te.TimeTz)&&(i.DataType=Object),i.ColumnSize=n.typeLen;break;case Te.Char:case Te.BpChar:case Te.VarChar:case Te.Text:case Te.Name:case Te.ShowDate:i.DataType=String,s>Bc?i.ColumnSize=s-Bc:(i.ColumnSize=-1,n.typeLen>0&&(i.ColumnSize=n.typeLen)),i.ColumnSize>8e3&&(i.IsLong=!0);break;default:i.DataType=String,i.ColumnSize=n.typeLen;break}e.push(i)}return{Rows:e,Columns:{Count:e.length}}}getTypeName(e){if(e<0||e>=this.columnDescriptions.length)throw new Error(`Column ordinal ${e} is out of range`);let n=this.columnDescriptions[e].typeOid;switch(n){case Te.Bool:return"BOOL";case Te.Bytea:return"BYTEA";case Te.Char:return"CHAR";case Te.Name:return"NAME";case Te.Int8:return"INT8";case Te.Int2:return"INT2";case Te.Int4:return"INT4";case Te.Text:return"TEXT";case Te.BpChar:return"CHAR";case Te.VarChar:return"VARCHAR";case Te.Date:return"DATE";case Te.Time:return"TIME";case Te.Timestamp:return"TIMESTAMP";case Te.TimestampTz:return"TIMESTAMPTZ";case Te.Interval:return"INTERVAL";case Te.TimeTz:return"TIMETZ";case Te.Numeric:return"NUMERIC";case Te.Float4:return"FLOAT4";case Te.Float8:return"FLOAT8";case 2530:return"DATE";case 15:return"CHAR";case 16:return"BOOL";default:return`UNKNOWN(${n})`}}async read(){if(this.closed||this._isFinished||this._pendingColumns)return!1;let e;if(this._nextItem?(e={value:this._nextItem,done:!1},this._nextItem=null):e=await this.generator.next(),e.done)return this._markFinished(),this.currentRow=null,!1;let r=e.value;if(r.type==="DataRow")return this.currentRow=r.row,!0;if(r.type==="RowDescription")return this._pendingColumns=r.columns,this.currentRow=null,!1;if(r.type==="RowDescriptionStandard"){let n=this.command?._preparedStatement;return this._pendingColumns=n&&n.description?n.description:this.columnDescriptions,this.currentRow=null,!1}if(r.type==="CommandComplete")return this.currentRow=null,this.read();if(r.type==="ErrorResponse")throw new Error(r.message||"Unknown Netezza Error");return r.type==="ReadyForQuery"?(this._markFinished(),this.currentRow=null,!1):this.read()}getValue(e){return this._validateOrdinal(e),this.currentRow[e]}getValueByName(e){let r=this.getOrdinal(e);return this.getValue(r)}getName(e){if(e<0||e>=this.columnDescriptions.length)throw new Error(`Column ordinal ${e} is out of range`);return this.columnDescriptions[e].name}getOrdinal(e){let r=this._nameIndex[e.toLowerCase()];if(r===void 0)throw new Error(`Column '${e}' not found`);return r}get fieldCount(){return this.columnDescriptions?.length||0}get FieldCount(){return this.fieldCount}isDBNull(e){return this._validateOrdinal(e),this.currentRow[e]===null}getBoolean(e){let r=this.getValue(e);return r===null?!1:typeof r=="boolean"?r:typeof r=="string"?r.toLowerCase()==="t"||r==="1"||r.toLowerCase()==="true":!!r}getByte(e){let r=this.getValue(e);return r===null?0:Number(r)&255}getInt16(e){let r=this.getValue(e);return r===null?0:Number(r)}getInt32(e){let r=this.getValue(e);return r===null?0:Number(r)}getInt64(e){let r=this.getValue(e);return r===null?0:typeof r=="bigint"?r:Number(r)}getFloat(e){let r=this.getValue(e);return r===null?0:Number(r)}getDouble(e){let r=this.getValue(e);return r===null?0:Number(r)}getDecimal(e){let r=this.getValue(e);return r===null?0:typeof r=="string"?r:Number(r)}getString(e){let r=this.getValue(e);return r===null?null:typeof r=="string"?r:r.toString?r.toString():String(r)}getDateTime(e){let r=this.getValue(e);return r===null?null:r instanceof Date?r:new Date(r)}getTimeSpan(e){let r=this.getValue(e);if(r===null)return null;if(typeof r=="object"&&"hours"in r)return r;if(typeof r=="string"){let n=r.split(":");if(n.length>=2){let i=(n[2]||"0").split(".");return{hours:parseInt(n[0],10),minutes:parseInt(n[1],10),seconds:parseInt(i[0],10),microseconds:i.length>1?parseInt(i[1].padEnd(6,"0"),10):0,toString(){return r}}}}return r}getRowObject(){if(!this.currentRow)return null;let e={};for(let r=0;r<this.columnDescriptions.length;r++)e[this.columnDescriptions[r].name]=this.currentRow[r];return e}getValues(){return this.currentRow?[...this.currentRow]:[]}async close(){if(!this.closed){if(this.closed=!0,!this._isFinished&&this.generator)try{for await(let e of this.generator)if(e.type==="ReadyForQuery")break}catch{}this.releaseCallback&&(this.releaseCallback(),this.releaseCallback=null)}}get isClosed(){return this.closed}_validateOrdinal(e){if(!this.currentRow)throw new Error("No current row. Did you call read()?");if(e<0||e>=this.columnDescriptions.length)throw new Error(`Column ordinal ${e} is out of range`)}async*[Symbol.asyncIterator](){for(;await this.read();)yield this.getRowObject()}};j0.exports=FR});var J0=O((RLe,K0)=>{"use strict";var GR=class{constructor(){this.version=null;this.nullsAllowed=null;this.sizeWord=null;this.sizeWordSize=null;this.numFixedFields=null;this.numVaryingFields=null;this.fixedFieldsSize=0;this.maxRecordSize=null;this.numFields=0;this.fieldType=[];this.fieldSize=[];this.fieldTrueSize=[];this.fieldOffset=[];this.fieldPhysField=[];this.fieldLogField=[];this.fieldNullAllowed=[];this.fieldFixedSize=[];this.fieldSpringField=[];this.dateStyle=null;this.euroDates=null}clear(){this.fieldType=[],this.fieldSize=[],this.fieldTrueSize=[],this.fieldOffset=[],this.fieldPhysField=[],this.fieldLogField=[],this.fieldNullAllowed=[],this.fieldFixedSize=[],this.fieldSpringField=[]}parse(e,r){this.clear();let n=0;this.version=e.readInt32BE(n),n+=4,this.nullsAllowed=e.readInt32BE(n),n+=4,this.sizeWord=e.readInt32BE(n),n+=4,this.sizeWordSize=e.readInt32BE(n),n+=4,this.numFixedFields=e.readInt32BE(n),n+=4,this.numVaryingFields=e.readInt32BE(n),n+=4,this.fixedFieldsSize=e.readInt32BE(n),n+=4,this.maxRecordSize=e.readInt32BE(n),n+=4,this.numFields=e.readInt32BE(n),n+=4;let i=3,s=39;for(let o=0;o<this.numFields;o++){let a=e.readInt32BE(n);a===i&&r?.description?.[o]?.typeOid===702&&(a=s),this.fieldType.push(a),this.fieldSize.push(e.readInt32BE(n+4)),this.fieldTrueSize.push(e.readInt32BE(n+8)),this.fieldOffset.push(e.readInt32BE(n+12)),this.fieldPhysField.push(e.readInt32BE(n+16)),this.fieldLogField.push(e.readInt32BE(n+20)),this.fieldNullAllowed.push(e.readInt32BE(n+24)!==0),this.fieldFixedSize.push(e.readInt32BE(n+28)),this.fieldSpringField.push(e.readInt32BE(n+32)),n+=36}this.dateStyle=e.readInt32BE(n),n+=4,this.euroDates=e.readInt32BE(n)}getFieldPrecision(e){return this.fieldSize[e]>>8&127}getFieldScale(e){return this.fieldSize[e]&255}getNumericDigitCount(e){return Math.floor(this.fieldTrueSize[e]/4)}};K0.exports=GR});var Ir=O((mLe,Z0)=>{"use strict";var HR=q(require("net")),As=q(require("fs")),Q0=require("events");bR();y0();var S8=V0(),It=LR(),R8=X0(),A8=z0(),m8=J0(),ue=vR()("nz:connection"),WR=class t extends Q0.EventEmitter{constructor(r){super();this._socket=null;this._stream=null;this._backendProcessId=0;this._backendSecretKey=0;this._commandNumber=-1;this._connected=!1;this._rowDescription=null;this._rows=[];this._tupdesc=new m8;this._tmpBuffer=Buffer.alloc(65536);this._intBuf=Buffer.allocUnsafe(65536);this._intBufStart=0;this._intBufEnd=0;this.commandTimeout=30;this.connectionTimeout=30;this._executing=!1;this._exportStream=null;this.config=r,r.connectionTimeout!==void 0&&(this.connectionTimeout=r.connectionTimeout)}static{this._streamRegistry=new Map}static registerImportStream(r,n){this._streamRegistry.set(r,n)}static unregisterImportStream(r){this._streamRegistry.delete(r)}async connect(){return new Promise((r,n)=>{if(!this.config.host)return n(new Error("Host is required"));let i=!1,s;this.connectionTimeout>0&&(s=setTimeout(()=>{i=!0,ue("Connection timeout triggered after",this.connectionTimeout,"seconds"),this._socket&&this._socket.destroy(),n(new Error(`Connection timeout after ${this.connectionTimeout} seconds`))},this.connectionTimeout*1e3));let o=()=>{s&&(clearTimeout(s),s=void 0)};this._socket=new HR.Socket,this._socket.connect(this.config.port||5480,this.config.host,async()=>{if(i)return;ue("Socket connected"),this._socket.setNoDelay(!0),this._stream=this._socket;let a=new S8(this._socket,this._stream,this.config.host,this.config);try{if(this._stream=await a.startup(this.config.database,this.config.user,this.config.password),i)return;o(),this._connected=!0,this._backendProcessId=a.backendProcessId,this._backendSecretKey=a.backendSecretKey,r()}catch(l){o(),this._socket.destroy(),n(l)}}),this._socket.on("error",a=>{ue("Socket error",a),o(),this._connected?this.emit("error",a):n(a)}),this._socket.on("close",()=>{ue("Socket closed"),o(),this._connected=!1,this.emit("close")})})}async cancel(){if(!(!this._backendProcessId||!this._backendSecretKey))return new Promise((r,n)=>{let i=new HR.Socket;i.on("error",s=>{ue("Cancel socket error",s),n(s)}),i.connect(this.config.port||5480,this.config.host,()=>{let s=Buffer.alloc(16);It.writeInt32(s,16,0),It.writeInt32(s,80877102,4),It.writeInt32(s,this._backendProcessId,8),It.writeInt32(s,this._backendSecretKey,12),i.write(s,()=>{}),i.on("close",()=>r()),i.on("end",()=>r()),i.on("error",()=>r())})})}close(){this._socket&&(this._socket.end(),this._socket.destroy())}createCommand(r){let n=new R8(this);return r&&(n.commandText=r),n}async beginTransaction(){let r=this.createCommand("BEGIN");await this.execute(r)}async commit(){let r=this.createCommand("COMMIT");await this.execute(r)}async rollback(){let r=this.createCommand("ROLLBACK");await this.execute(r)}async _readBytes(r){if(this._intBufEnd-this._intBufStart>=r){let n=Buffer.from(this._intBuf.subarray(this._intBufStart,this._intBufStart+r));return this._intBufStart+=r,n}return this._readBytesSlow(r)}async _readBytesSlow(r){if(r>this._intBuf.length){let i=[],s=this._intBufEnd-this._intBufStart;s>0&&(i.push(Buffer.from(this._intBuf.subarray(this._intBufStart,this._intBufEnd))),this._intBufStart=0,this._intBufEnd=0);let o=r-s;for(;o>0;){let a=this._stream.read();a!==null?a.length<=o?(i.push(a),o-=a.length):(i.push(a.slice(0,o)),this._feedBuffer(a.slice(o)),o=0):await this._waitForReadable()}return Buffer.concat(i,r)}if(this._intBuf.length-this._intBufStart<r){let i=this._intBufEnd-this._intBufStart;this._intBuf.copy(this._intBuf,0,this._intBufStart,this._intBufEnd),this._intBufStart=0,this._intBufEnd=i}for(;this._intBufEnd-this._intBufStart<r;){let i=this._stream.read();if(i!==null){let s=this._intBuf.length-this._intBufEnd;i.length<=s?(i.copy(this._intBuf,this._intBufEnd),this._intBufEnd+=i.length):(i.copy(this._intBuf,this._intBufEnd,0,s),this._intBufEnd+=s,this._stream.unshift(i.slice(s)))}else await this._waitForReadable()}let n=Buffer.from(this._intBuf.subarray(this._intBufStart,this._intBufStart+r));return this._intBufStart+=r,n}async _waitForReadable(){if(!this._socket||this._socket.destroyed)throw new Error("Socket closed or destroyed during read");return new Promise((r,n)=>{let i=()=>{this._stream.removeListener("readable",s),this._stream.removeListener("close",o),this._stream.removeListener("error",a),this._stream.removeListener("end",o)},s=()=>{i(),r()},o=()=>{i(),n(new Error("Socket closed/ended during read"))},a=l=>{i(),n(l)};this._stream.once("readable",s),this._stream.once("close",o),this._stream.once("end",o),this._stream.once("error",a)})}_feedBuffer(r){this._stream.unshift(r)}async _readInt32(){await this._ensureBufferData(4);let r=this._intBuf.readInt32BE(this._intBufStart);return this._intBufStart+=4,r}async _readInt16(){await this._ensureBufferData(2);let r=this._intBuf.readInt16BE(this._intBufStart);return this._intBufStart+=2,r}async _readByte(){await this._ensureBufferData(1);let r=this._intBuf[this._intBufStart];return this._intBufStart+=1,r}async _ensureBufferData(r){if(!(this._intBufEnd-this._intBufStart>=r)){if(this._intBuf.length-this._intBufStart<r){let n=this._intBufEnd-this._intBufStart;this._intBuf.copy(this._intBuf,0,this._intBufStart,this._intBufEnd),this._intBufStart=0,this._intBufEnd=n}for(;this._intBufEnd-this._intBufStart<r;){let n=this._stream.read();if(n!==null){let i=this._intBuf.length-this._intBufEnd;n.length<=i?(n.copy(this._intBuf,this._intBufEnd),this._intBufEnd+=n.length):(n.copy(this._intBuf,this._intBufEnd,0,i),this._intBufEnd+=i,this._stream.unshift(n.slice(i)))}else await this._waitForReadable()}}}async execute(r,n=!1){let i=r.commandTimeout;if(!i||i<=0)return this._doExecute(r);let s,o=this._doExecute(r),a=new Promise((l,c)=>{s=setTimeout(async()=>{ue("Command timeout triggered");try{await this.cancel(),c(new Error("Command execution timeout"))}catch(u){c(new Error("Command execution timeout (Cancel failed: "+u.message+")"))}},i*1e3)});try{return await Promise.race([o,a])}catch(l){throw l.message&&l.message.includes("Command execution timeout")&&o.catch(()=>{}),l}finally{clearTimeout(s)}}async _doExecute(r){if(this._executing)throw new Error("Connection is already executing a command");this._executing=!0;try{ue("Executing:",r.commandText),this._preExecution(r.commandText);let n=null;for await(let i of this._responseGenerator(r))i.type==="ErrorResponse"&&(n=new Error("Netezza Error: "+i.message));if(n)throw n;return!0}finally{this._executing=!1}}async executeReader(r){let n=r.commandTimeout||this.commandTimeout;if(!n||n<=0)return this._doExecuteReader(r);let i,s=this._doExecuteReader(r),o=new Promise((a,l)=>{i=setTimeout(async()=>{ue("Command timeout triggered");try{await this.cancel(),l(new Error("Command execution timeout"))}catch(c){l(new Error("Command execution timeout (Cancel failed: "+c.message+")"))}},n*1e3)});try{return await Promise.race([s,o])}catch(a){throw a.message&&a.message.includes("Command execution timeout")&&s.catch(()=>{}),a}finally{clearTimeout(i)}}async _doExecuteReader(r){if(this._executing)throw new Error("Connection is already executing a command");this._executing=!0;try{ue("Executing Reader:",r.commandText),this._preExecution(r.commandText);let n=this._responseGenerator(r),i=[],s=await n.next(),o=null,a=null;for(;!s.done;){let l=s.value;if(l.type==="RowDescription")i=l.columns;else if(l.type==="RowDescriptionStandard"){let c=l.desc;if(c&&c.numFields>0&&i.length===0){let u=r._preparedStatement;u&&u.description&&(i=u.description)}}else if(l.type==="DataRow"||l.type==="CommandComplete"||l.type==="ReadyForQuery"){if(!o&&i.length>0){a=l;break}}else l.type==="ErrorResponse"&&(o=new Error("Netezza Error: "+l.message));s=await n.next()}if(o)throw this._executing=!1,o;return new A8(r,n,i,()=>{this._executing=!1},a)}catch(n){throw this._executing=!1,n}}_preExecution(r){let n=Buffer.from(r,"utf8"),i=Buffer.allocUnsafe(5+n.length+1);i[0]=80,this._commandNumber!==-1?(this._commandNumber++,i.writeInt32BE(this._commandNumber,1)):(i[1]=255,i[2]=255,i[3]=255,i[4]=255),this._commandNumber>1e5&&(this._commandNumber=1),n.copy(i,5),i[5+n.length]=0,this._stream.write(i)}async*_responseGenerator(r){this._rows=[],this._rowDescription=null;let n=!1;for(;!n;){let i=await this._readByte();for(;i===0;)i=await this._readByte();if(i===117){await this._handleExternalTableExportStart();continue}if(i===85){await this._handleExternalTableExportData();continue}if(i===108){await this._handleExternalTableImport();continue}if(i===120){await this._readBytes(4),ue("Error operation cancel (Ext Tbl)");continue}if(i===101){await this._readBytes(4);let o=It.readInt32(await this._readBytes(4)),a=(await this._readBytes(o-1)).toString("utf8");await this._readBytes(1);let l=[],c=(await this._readBytes(1))[0];for(l.push(c);c=(await this._readBytes(1))[0],c!==0;)l.push(c);let u=It.readInt32(await this._readBytes(4));await this._consumeExternalTableLogData();continue}let s=await this._readBytes(4);if(i===or.CommandComplete){let o=await this._readInt32(),a=await this._readBytes(o);ue("CommandComplete:",a.toString("utf8")),yield{type:"CommandComplete",text:a.toString("utf8")};continue}if(i===or.ReadyForQuery){n=!0,yield{type:"ReadyForQuery"};continue}if(i===76){n=!0;continue}if(!(i===48||i===65)){if(i===80){let o=await this._readInt32();await this._readBytes(o);continue}if(i===or.ErrorResponse){let o=await this._readInt32();yield{type:"ErrorResponse",message:(await this._readBytes(o)).toString("utf8")};continue}if(i===or.RowDescription){let o=await this._readInt32(),a=await this._readBytes(o);this._parseRowDescription(a,r),yield{type:"RowDescription",columns:this._rowDescription};continue}if(i===or.DataRow){let o=await this._readInt32(),a=await this._readBytes(o);yield{type:"DataRow",row:this._parseDataRow(a)};continue}if(i===or.RowDescriptionStandard){let o=await this._readInt32(),a=await this._readBytes(o);this._tupdesc.parse(a,r._preparedStatement),yield{type:"RowDescriptionStandard",desc:this._tupdesc};continue}if(i===or.RowStandard){yield{type:"DataRow",row:await this._resReadDbosTuple(r)};continue}if(i===or.NoticeResponse){let o=await this._readInt32(),l=(await this._readBytes(o)).toString("utf8").replace(/\0/g,"").trim();this.emit("notice",{message:l});continue}ue("Unknown message:","0x"+i.toString(16));try{let o=await this._readInt32();o>0&&o<1e7&&await this._readBytes(o)}catch{}}}}async _consumeExternalTableLogData(){for(;;){let r=await this._readBytes(4),n=It.readInt32(r);if(n===0)return;let i=await this._readBytes(n);ue("ExtLog Content:",i.toString("utf8"))}}async _handleExternalTableExportStart(){await this._readBytes(4),await this._readBytes(10),await this._readBytes(16);let r=It.readInt32(await this._readBytes(4)),i=(await this._readBytes(r)).toString("utf8");ue("ExternalTable Export Start. File:",i);try{this._exportStream=As.createWriteStream(i),this._exportStream.on("error",o=>{ue("Export Stream Error:",o)});let s=Buffer.alloc(4);await new Promise(o=>this._stream.write(s,()=>o()))}catch(s){ue("Error opening export file:",s);let o=Buffer.alloc(4);It.writeInt32(o,1,0),this._stream.write(o)}}async _handleExternalTableExportData(){ue("Handle Export Data: Skipping 8 bytes...");let r=await this._readBytes(4);ue("Skipped 4:",r.toString("hex"));let n=await this._readBytes(4);ue("Skipped 4 (2):",n.toString("hex")),await this._consumeExternalTableData(this._exportStream),this._exportStream=null}async _consumeExternalTableData(r){for(ue("Entering Consume Loop");;){ue("Reading status...");let n=await this._readBytes(4),i=It.readInt32(n);if(ue("ExtTab Status:",i),i===Ss.DATA){let s=It.readInt32(await this._readBytes(4));ue("Block Length:",s);let o=await this._readBytes(s);r&&r.write(o)}else if(i===Ss.DONE){ue("ExternalTable Data Done"),r&&await new Promise(s=>{if(ue("Waiting for writeStream finish..."),r.writableFinished)return ue("Stream already finished"),s();let o=setTimeout(()=>{ue("Stream finish timeout! Destroying..."),r.destroy(),s()},5e3),a=()=>{ue("Stream finished event"),clearTimeout(o),c(),s()},l=u=>{ue("Stream error on end:",u),clearTimeout(o),c(),s()},c=()=>{r.removeListener("finish",a),r.removeListener("error",l)};r.on("finish",a),r.on("error",l),r.end()});return}else if(i===Ss.ERROR){let s=It.readInt16(await this._readBytes(2)),o=(await this._readBytes(s)).toString("utf8");ue("ExternalTable Data Error:",o),r&&r.end();return}else{ue("Unknown ExtTab Status:",i),r&&r.end();return}}}async _handleExternalTableImport(){await this._readBytes(8);let r=[],n=(await this._readBytes(1))[0];for(r.push(n);n!==0;)n=(await this._readBytes(1))[0],n!==0&&r.push(n);let i=Buffer.from(r).toString("utf8");ue("ExternalTable Import Start. File:",i);let s=It.readInt32(await this._readBytes(4));ue("Host Version:",s);let o=Buffer.alloc(4);It.writeInt32(o,1,0),await new Promise(E=>this._stream.write(o,()=>E())),ue("Sent Client Version");let a=It.readInt32(await this._readBytes(4)),l=It.readInt32(await this._readBytes(4));if(ue("ExtTab Import Config:",{hostVersion:s,format:a,bufSize:l}),t._streamRegistry.has(i))ue("Using virtual import stream for:",i);else if(!As.existsSync(i)){ue("Import file not found:",i);let E=Buffer.alloc(4);It.writeInt32(E,Ss.ERROR,0),this._stream.write(E);return}let c=0,u;t._streamRegistry.has(i)?(u=t._streamRegistry.get(i),c=u.byteLength||0):(c=As.statSync(i).size,u=As.createReadStream(i,{highWaterMark:l||65536}));let d=0;await new Promise((E,f)=>{u.on("data",T=>{let h=Buffer.isBuffer(T)?T:Buffer.from(T),p=Buffer.alloc(8);It.writeInt32(p,Ss.DATA,0),It.writeInt32(p,h.length,4),this._stream.write(p),this._stream.write(h),d+=h.length,this.emit("importProgress",{bytesSent:d,totalSize:c,percentComplete:c>0?Math.round(d/c*100):0})}),u.on("end",()=>{ue("Import Stream End");let T=Buffer.alloc(4);It.writeInt32(T,Ss.DONE,0),this._stream.write(T),E()}),u.on("error",T=>{ue("Import Stream Error:",T);let h=Buffer.alloc(4);It.writeInt32(h,Ss.ERROR,0),this._stream.write(h);let p=T.message||"Error",S=Buffer.alloc(2);S.writeInt16BE(p.length),this._stream.write(S),this._stream.write(Buffer.from(p,"utf8")),f(T)})})}_parseRowDescription(r,n){ue("parseRowDescription data length:",r.length,"hex:",r.toString("hex").substring(0,100));let i=0;if(r.length<2){ue("Data too short for row description");return}let s=r.readInt16BE(i);i+=2,ue("Column count:",s),this._rowDescription=[];for(let o=0;o<s&&i<r.length;o++){let a=i;for(;i<r.length&&r[i]!==0;)i++;let l=r.toString("utf8",a,i);if(i++,i+11>r.length){ue("Not enough data for column",o,"at offset",i,"need 11 more, have",r.length-i);break}let c=r.readInt32BE(i);i+=4;let u=r.readInt16BE(i);i+=2;let d=r.readInt32BE(i);i+=4;let E=r[i];i+=1,this._rowDescription.push({name:l,typeOid:c,typeLen:u,typeMod:d,format:E}),ue("Column",o,":",l,"typeOid:",c,"typeLen:",u)}n&&(n._preparedStatement={description:this._rowDescription})}_parseDataRow(r){let n=this._rowDescription.length,s=Math.ceil(n/8),o=[];for(let a=0;a<n;a++){let l=r[Math.floor(a/8)],c=7-a%8;if(!((l&1<<c)!==0)){o.push(null);continue}let d=r.readInt32BE(s);s+=4;let E=d-4;if(E<=0){o.push(null);continue}let T=this._rowDescription[a]?.typeOid,h=r.toString("utf8",s,s+E);T===1083?o.push(g0(h)):o.push(h),s+=E}return o}async _resReadDbosTuple(r){let n=this._tupdesc.numFields;await this._readBytes(4);let i=It.readInt32(await this._readBytes(4)),s=await this._readBytes(i),o=new Array(n);for(let a=0;a<n;a++){if(this._columnIsNull(s,a)){o[a]=null;continue}let l=this._cTableFieldAt(s,a),c=this._tupdesc.fieldType[a],u=this._tupdesc.fieldSize[a];o[a]=this._parseFieldByType(l,c,u,a)}return o}_parseFieldByType(r,n,i,s){switch(n){case Ut.NzTypeChar:return r.toString("latin1",0,i).trimEnd();case Ut.NzTypeNChar:case Ut.NzTypeNVarChar:{let o=r.readInt16LE(0)-2;return r.toString("utf8",2,2+o)}case Ut.NzTypeVarChar:case Ut.NzTypeVarFixedChar:{let o=r.readInt16LE(0)-2;return r.toString("latin1",2,2+o)}case Ut.NzTypeInt8:return r.readBigInt64LE(0);case Ut.NzTypeInt:return r.readInt32LE(0);case Ut.NzTypeInt2:return r.readInt16LE(0);case Ut.NzTypeInt1:return r.readInt8(0);case Ut.NzTypeDouble:return r.readDoubleLE(0);case Ut.NzTypeFloat:return r.readFloatLE(0);case Ut.NzTypeDate:return I0(r);case Ut.NzTypeTime:return vf(r);case Ut.NzTypeInterval:return N0(r);case Ut.NzTypeTimeTz:return O0(r,i);case Ut.NzTypeTimestamp:return _0(r);case Ut.NzTypeBool:return r[0]===1;case Ut.NzTypeNumeric:{let o=this._tupdesc.getFieldPrecision(s),a=this._tupdesc.getFieldScale(s),l=this._tupdesc.getNumericDigitCount(s);return C0(r,o,a,l)}default:return r.toString("utf8",0,i)}}_columnIsNull(r,n){if(!this._tupdesc.nullsAllowed)return!1;let i=this._tupdesc.fieldPhysField[n];return(r[2+Math.floor(i/8)]&1<<i%8)!==0}_cTableFieldAt(r,n){if(this._tupdesc.fieldFixedSize[n]!==0)return r.slice(this._tupdesc.fieldOffset[n]);let i=r.slice(this._tupdesc.fixedFieldsSize);for(let s=0;s<this._tupdesc.fieldOffset[n];s++){let o=i.readInt16LE(0);i=i.slice(o%2===0?o:o+1)}return i}};Z0.exports=WR});var kR={};_t(kR,{createNzConnection:()=>_8});function _8(t){let e=Ir();return new e(t)}var $R=H(()=>{"use strict"});var Hf,Li,YR=H(()=>{"use strict";Hf=q(require("vscode")),Li=class t{constructor(e){this.context=e;this._connections={};this._activeConnectionName=null;this._documentConnections=new Map;this._persistentConnections=new Map;this._keepConnectionOpen=!1;this._onDidChangeConnections=new Hf.EventEmitter;this.onDidChangeConnections=this._onDidChangeConnections.event;this._onDidChangeActiveConnection=new Hf.EventEmitter;this.onDidChangeActiveConnection=this._onDidChangeActiveConnection.event;this._onDidChangeDocumentConnection=new Hf.EventEmitter;this.onDidChangeDocumentConnection=this._onDidChangeDocumentConnection.event;this._loadingPromise=this.loadConnections()}static{this.SERVICE_NAME="netezza-vscode-connections"}static{this.ACTIVE_CONN_KEY="netezza-active-connection"}async loadConnections(){this._activeConnectionName=this.context.globalState.get(t.ACTIVE_CONN_KEY)||null;let e=await this.context.secrets.get(t.SERVICE_NAME);if(e)try{this._connections=JSON.parse(e)}catch(r){console.error("Failed to parse connections:",r),this._connections={}}else{let r=await this.context.secrets.get("netezza-vscode");if(r)try{let n=JSON.parse(r);if(n&&n.host){let i=`Default (${n.host})`;this._connections={[i]:{...n,name:i}},this._activeConnectionName=i,await this.saveConnectionsToStorage()}}catch{}}this._onDidChangeConnections.fire()}async ensureLoaded(){await this._loadingPromise}async saveConnectionsToStorage(){await this.context.secrets.store(t.SERVICE_NAME,JSON.stringify(this._connections)),this._activeConnectionName?await this.context.globalState.update(t.ACTIVE_CONN_KEY,this._activeConnectionName):await this.context.globalState.update(t.ACTIVE_CONN_KEY,void 0)}async saveConnection(e){if(await this.ensureLoaded(),!e.name)throw new Error("Connection name is required");this._connections[e.name]=e,this._activeConnectionName||await this.setActiveConnection(e.name),await this.saveConnectionsToStorage(),this._onDidChangeConnections.fire()}async deleteConnection(e){if(await this.ensureLoaded(),this._connections[e]){if(await this.closePersistentConnection(e),delete this._connections[e],this._activeConnectionName===e){let r=Object.keys(this._connections);await this.setActiveConnection(r.length>0?r[0]:null)}await this.saveConnectionsToStorage(),this._onDidChangeConnections.fire()}}async getConnections(){return await this.ensureLoaded(),Object.values(this._connections)}async getConnection(e){return await this.ensureLoaded(),this._connections[e]}async setActiveConnection(e){await this.ensureLoaded(),this._activeConnectionName=e,await this.context.globalState.update(t.ACTIVE_CONN_KEY,e),this._onDidChangeActiveConnection.fire(e)}getActiveConnectionName(){return this._activeConnectionName}async getCurrentDatabase(e){await this.ensureLoaded();let r=e||this._activeConnectionName;return r&&this._connections[r]?.database||null}setKeepConnectionOpen(e){this._keepConnectionOpen=e,e||this.closeAllPersistentConnections()}getKeepConnectionOpen(){return this._keepConnectionOpen}async getPersistentConnection(e){let r=e||this._activeConnectionName;if(!r)throw new Error("No connection selected");let n=await this.getConnection(r);if(!n)throw new Error(`Connection '${r}' not found or invalid`);let i=this._persistentConnections.get(r);if(!i){let{createNzConnection:s}=($R(),Ma(kR)),o=s({host:n.host,port:n.port||5480,database:n.database,user:n.user,password:n.password});await o.connect(),i=o,this._persistentConnections.set(r,i)}return i}async closePersistentConnection(e){let r=this._persistentConnections.get(e);if(r){try{await r.close()}catch(n){console.error(`Error closing connection ${e}:`,n)}this._persistentConnections.delete(e)}}async closeAllPersistentConnections(){for(let e of this._persistentConnections.keys())await this.closePersistentConnection(e)}dispose(){this.closeAllPersistentConnections(),this._onDidChangeConnections.dispose(),this._onDidChangeActiveConnection.dispose(),this._onDidChangeDocumentConnection.dispose()}getDocumentConnection(e){return this._documentConnections.get(e)}setDocumentConnection(e,r){this._documentConnections.set(e,r),this._onDidChangeDocumentConnection.fire(e)}clearDocumentConnection(e){this._documentConnections.delete(e),this._onDidChangeDocumentConnection.fire(e)}getConnectionForExecution(e){if(e){let r=this._documentConnections.get(e);if(r)return r}return this._activeConnectionName||void 0}}});var ew={};_t(ew,{QueryHistoryManager:()=>ar});var Mt,VR,ar,Wf=H(()=>{"use strict";Mt=q(require("fs")),VR=q(require("path")),ar=class t{constructor(e){this.context=e;this.cache=[];this.initialized=!1;this.writeQueue=Promise.resolve();this.archiveQueue=Promise.resolve();if(this.context.globalStorageUri){let r=this.context.globalStorageUri.fsPath;this.historyFilePath=VR.join(r,"query-history.json"),this.archiveFilePath=VR.join(r,"query-history-archive.json");try{Mt.existsSync(r)||Mt.mkdirSync(r,{recursive:!0})}catch(n){console.error("[QueryHistoryManager] Error creating storage directory:",n)}}this.initialize()}static{this.STORAGE_KEY="queryHistory"}static{this.ACTIVE_LIMIT=1e3}static{this.BATCH_ARCHIVE_SIZE=100}static{this.STORAGE_VERSION=1}async initialize(){if(!this.initialized)try{let e=!1;if(this.historyFilePath&&Mt.existsSync(this.historyFilePath))try{let r=await Mt.promises.readFile(this.historyFilePath,"utf-8");if(!r||!r.trim())console.log("[QueryHistoryManager] File is empty, starting fresh"),this.cache=[],e=!0;else{let n=JSON.parse(r);n&&n.entries&&(this.cache=n.entries,e=!0)}}catch(r){console.warn("[QueryHistoryManager] Corrupted history file, resetting:",r),this.cache=[],e=!0;try{await this.saveToStorage(),console.log("[QueryHistoryManager] Reset corrupted file to empty state")}catch(n){console.error("[QueryHistoryManager] Failed to reset file:",n)}}if(!e){let r=this.context.globalState.get(t.STORAGE_KEY);r&&r.entries&&(this.cache=r.entries,console.log(`\u2705 Migrated ${this.cache.length} entries from globalState`),await this.saveToStorage(),await this.context.globalState.update(t.STORAGE_KEY,void 0))}this.cache.length>t.ACTIVE_LIMIT+t.BATCH_ARCHIVE_SIZE&&(console.log(`[QueryHistoryManager] Cache (${this.cache.length}) exceeds active limit. Migrating to archive...`),await this.flushToArchive()),this.initialized=!0}catch(e){console.error("\u274C Error initializing query history:",e),this.cache=[],this.initialized=!0}}async saveToStorage(){if(!this.historyFilePath)return;let e=async()=>{try{let r={entries:this.cache,version:t.STORAGE_VERSION};await Mt.promises.writeFile(this.historyFilePath,JSON.stringify(r),"utf-8")}catch(r){console.error("Error saving to storage:",r)}};return this.writeQueue=this.writeQueue.then(e,e),this.writeQueue}async flushToArchive(){if(!this.archiveFilePath)return;let e=async()=>{try{if(this.cache.length-t.ACTIVE_LIMIT<=0)return;let n=this.cache.slice(t.ACTIVE_LIMIT);this.cache=this.cache.slice(0,t.ACTIVE_LIMIT),await this.saveToStorage();let i=[];if(Mt.existsSync(this.archiveFilePath))try{let o=await Mt.promises.readFile(this.archiveFilePath,"utf-8");if(o.trim()){let a=JSON.parse(o);i=Array.isArray(a)?a:a.entries||[]}}catch(o){console.warn("Error reading archive file, starting fresh archive append:",o)}let s=[...n,...i];await Mt.promises.writeFile(this.archiveFilePath,JSON.stringify({entries:s}),"utf-8"),console.log(`[QueryHistoryManager] Archived ${n.length} items. Active: ${this.cache.length}, Archive: ${s.length}`)}catch(r){console.error("Error flushing to archive:",r)}};return this.archiveQueue=this.archiveQueue.then(e,e),this.archiveQueue}async addEntry(e,r,n,i,s,o,a){try{this.initialized||await this.initialize();let l=`${Date.now()}-${Math.random().toString(36).substring(2,9)}`,c=Date.now(),u={id:l,host:e,database:r,schema:n,query:i.trim(),timestamp:c,connectionName:s,is_favorite:!1,tags:o||"",description:a||""};this.cache.unshift(u),this.cache.length>=t.ACTIVE_LIMIT+t.BATCH_ARCHIVE_SIZE?await this.flushToArchive():await this.saveToStorage()}catch(l){console.error("Error adding query to history:",l)}}async getHistory(e,r=0){return this.initialized||await this.initialize(),e!==void 0?this.cache.slice(r,r+e):[...this.cache]}async deleteEntry(e){try{this.initialized||await this.initialize();let r=this.cache.length;this.cache=this.cache.filter(n=>n.id!==e),this.cache.length!==r&&await this.saveToStorage()}catch(r){console.error("Error deleting entry:",r)}}async clearHistory(){try{this.initialized||await this.initialize(),this.cache=[],await this.saveToStorage(),this.archiveFilePath&&Mt.existsSync(this.archiveFilePath)&&await Mt.promises.unlink(this.archiveFilePath),console.log("All query history cleared")}catch(e){console.error("Error clearing history:",e)}}async getStats(){try{this.initialized||await this.initialize();let e=this.cache.length,r=JSON.stringify(this.cache),n=parseFloat((r.length/(1024*1024)).toFixed(2)),i=0,s=0;if(this.archiveFilePath&&Mt.existsSync(this.archiveFilePath)){let o=await Mt.promises.stat(this.archiveFilePath);s=parseFloat((o.size/(1024*1024)).toFixed(2));try{if(o.size<50*1024*1024){let a=await Mt.promises.readFile(this.archiveFilePath,"utf-8"),l=JSON.parse(a);l&&l.entries?i=l.entries.length:Array.isArray(l)&&(i=l.length)}else i=-1}catch(a){console.debug("[QueryHistoryManager] Error reading archive for stats:",a)}}return{activeEntries:e,archivedEntries:i===-1?99999:i,totalEntries:e+(i===-1?0:i),activeFileSizeMB:n,archiveFileSizeMB:s,totalFileSizeMB:parseFloat((n+s).toFixed(2))}}catch(e){return console.error("Error getting stats:",e),{activeEntries:0,archivedEntries:0,totalEntries:0,activeFileSizeMB:0,archiveFileSizeMB:0,totalFileSizeMB:0}}}async toggleFavorite(e){try{this.initialized||await this.initialize();let r=this.cache.find(n=>n.id===e);r&&(r.is_favorite=!r.is_favorite,await this.saveToStorage())}catch(r){console.error("Error toggling favorite:",r)}}async updateEntry(e,r,n){try{this.initialized||await this.initialize();let i=this.cache.find(s=>s.id===e);i&&(r!==void 0&&(i.tags=r),n!==void 0&&(i.description=n),await this.saveToStorage())}catch(i){console.error("Error updating entry:",i)}}async getFavorites(){return this.initialized||await this.initialize(),this.cache.filter(e=>e.is_favorite)}async getByTag(e){return this.initialized||await this.initialize(),this.cache.filter(r=>r.tags?.toLowerCase().includes(e.toLowerCase()))}async getAllTags(){this.initialized||await this.initialize();let e=new Set;return this.cache.forEach(r=>{r.tags&&r.tags.split(",").forEach(i=>{let s=i.trim();s&&e.add(s)})}),Array.from(e).sort()}async searchAll(e){this.initialized||await this.initialize();let r=e.toLowerCase();return this.cache.filter(i=>i.query.toLowerCase().includes(r)||i.host.toLowerCase().includes(r)||i.database&&i.database.toLowerCase().includes(r)||i.schema&&i.schema.toLowerCase().includes(r)||i.tags?.toLowerCase().includes(r)||i.description?.toLowerCase().includes(r))}async searchArchive(e,r=50){if(!this.archiveFilePath||!Mt.existsSync(this.archiveFilePath))return[];try{let n=await Mt.promises.readFile(this.archiveFilePath,"utf-8");if(!n)return[];let i=JSON.parse(n),s=Array.isArray(i)?i:i.entries||[],o=e.toLowerCase(),a=[];for(let l of s){if(a.length>=r)break;(l.query.toLowerCase().includes(o)||l.host.toLowerCase().includes(o)||l.database&&l.database.toLowerCase().includes(o))&&a.push(l)}return a}catch(n){return console.error("Error searching archive:",n),[]}}async getFilteredHistory(e,r,n,i){this.initialized||await this.initialize();let s=this.cache.filter(o=>!(e&&o.host!==e||r&&o.database!==r||n&&o.schema!==n));return i&&(s=s.slice(0,i)),s}async getArchivedHistory(){return[]}async clearArchive(){this.archiveFilePath&&Mt.existsSync(this.archiveFilePath)&&await Mt.promises.unlink(this.archiveFilePath)}close(){console.log("Query history manager closed")}}});function kf(t){let e=new Set;if(!t)return e;for(let r of t.matchAll(/\$\{([A-Za-z_][A-Za-z0-9_]*)\}/g))r[1]&&e.add(r[1]);for(let r of t.matchAll(/\$([A-Za-z_][A-Za-z0-9_]*)(?!\s*\})/g)){let n=r[0],i=r.index;if(i>0&&t[i-1]==="{")continue;let s=i+n.length;s<t.length&&t[s]==="}"||r[1]&&e.add(r[1])}return e}function $f(t){if(!t)return{sql:"",setValues:{}};let e=t.split(/\r?\n/),r=[],n={};for(let i of e){let s=i.match(/^\s*@SET\s+([A-Za-z0-9_]+)\s*=\s*(.+)$/i);if(s){let o=s[2].trim();o.endsWith(";")&&(o=o.slice(0,-1).trim());let a=o.match(/^'(.*)'$/s)||o.match(/^"(.*)"$/s);a&&(o=a[1]),n[s[1]]=o}else r.push(i)}return{sql:r.join(`
`),setValues:n}}function Yf(t,e){let r=t.replace(/\$\{([A-Za-z_][A-Za-z0-9_]*)\}/g,(i,s)=>e[s]??""),n=Object.keys(e).sort((i,s)=>s.length-i.length);for(let i of n)if(/^[A-Za-z_]/.test(i)){let s=new RegExp(`\\$${i}(?![A-Za-z0-9_])`,"g");r=r.replace(s,e[i]??"")}return r}var tw=H(()=>{"use strict"});async function rw(){let t=xr.window.activeTextEditor;if(!t){xr.window.showWarningMessage("No active editor to cancel query for.");return}let e=t.document.uri.toString(),r=Di.get(e);if(r)try{await r.cancel(),xr.window.showInformationMessage("Cancellation request sent.")}catch(n){let i=n instanceof Error?n.message:String(n);xr.window.showErrorMessage(`Failed to cancel query: ${i}`)}else xr.window.showInformationMessage("No active query found for this tab.")}async function qR(t,e,r){let n={};if(t.size===0)return n;if(e){let s=Array.from(t).filter(o=>!(r&&r[o]!==void 0));if(s.length>0)throw new Error("Query contains variables but silent mode is enabled; cannot prompt for values. Missing: "+s.join(", "));for(let o of t)n[o]=r[o];return n}let i=[];for(let s of t)r&&r[s]!==void 0?n[s]=r[s]:i.push(s);for(let s of i){let o=await xr.window.showInputBox({prompt:`Enter value for ${s}`,placeHolder:"",value:r&&r[s]?r[s]:void 0,ignoreFocusOut:!0});if(o===void 0)throw new Error("Variable input cancelled by user");n[s]=o}return n}function I8(t,e){let r;return!t&&!e&&(r=xr.window.createOutputChannel("Netezza SQL"),r.show(!0)),{outputChannel:r,logCallback:e}}function Fc(t,e){t.outputChannel&&t.outputChannel.appendLine(e),t.logCallback&&t.logCallback(e)}async function g8(t,e){let r=$f(t),n=r.sql,i=r.setValues,s=kf(n);if(s.size>0){let o=await qR(s,e,i);n=Yf(n,o)}return n}function nw(t,e,r){let n=e;if(!n&&r&&(n=t.getConnectionForExecution(r)),n||(n=t.getActiveConnectionName()||void 0),!n)throw new Error("No connection selected");return n}async function Vf(t,e,r){if(r)return{connection:await t.getPersistentConnection(e),shouldCloseConnection:!1};{let{createNzConnection:n}=($R(),Ma(kR)),i=await t.getConnection(e);if(!i)throw new Error(`Connection '${e}' not found`);let s=n({host:i.host,port:i.port||5480,database:i.database,user:i.user,password:i.password});return await s.connect(),{connection:s,shouldCloseConnection:!0}}}async function XR(t,e){let r=Date.now(),n=1e4;try{let i=!1;do{for(;await t.read();)if(Date.now()-r>n){i=!0;break}if(i)break;if(Date.now()-r>n){i=!0;break}}while(await t.nextResult());i&&console.warn(`consumeRestAndCancel timed out after ${n}ms, forcing cancel`),await e.cancel()}catch(i){console.warn("Failed to cancel command after limit reached:",i)}}async function N8(t,e,r,n){let i=t.createCommand(e);i.commandTimeout=r,n&&Di.set(n,i);try{let s=await i.executeReader(),o=[],a=[],l=2e5,c=0,u=!1;for(;await s.read();){if(o.length===0)for(let E=0;E<s.fieldCount;E++)o.push({name:s.getName(E),type:s.getTypeName(E)});let d=[];for(let E=0;E<s.fieldCount;E++)d.push(s.getValue(E));if(a.push(d),c++,c>=l){u=!0,await XR(s,i);break}}return{columns:o,data:a,limitReached:u}}finally{n&&Di.delete(n)}}async function O8(t,e,r,n){let i="unknown",s=await e.getConnection(r);s&&new ar(t).addEntry(s.host,s.database,i,n,r).catch(a=>console.error("History log error:",a))}async function oe(t,e,r=!1,n,i,s,o){let a=n||new Li(t),l=a.getKeepConnectionOpen(),c=I8(r,o);Fc(c,"Executing query..."),i&&Fc(c,`Target Connection: ${i}`);try{let u=await g8(e,r),d=nw(a,i,s),{connection:E,shouldCloseConnection:f}=await Vf(a,d,l);if(c.outputChannel){let T=h=>{let p=h;c.outputChannel.appendLine(`NOTICE: ${p.message}`)};E.on("notice",T)}try{let h=xr.workspace.getConfiguration("netezza").get("queryTimeout",1800),{columns:p,data:S,limitReached:m}=await N8(E,u,h,s);return await O8(t,a,d,e),p.length>0?(Fc(c,"Query completed."),{columns:p,data:S,rowsAffected:void 0,limitReached:m,sql:u}):(Fc(c,"Query executed successfully (no results)."),{columns:[],data:[],rowsAffected:void 0,message:"Query executed successfully (no results).",sql:u})}finally{f&&E&&await E.close()}}catch(u){let E=`Error: ${u.message||String(u)}`;throw Fc(c,E),new Error(E)}}async function Mr(t,e,r=!1,n,i,s){let o=await oe(t,e,r,i,n,s);if(o.data&&o.data.length>0){let a=o.data.map(c=>{let u={};return o.columns.forEach((d,E)=>{u[d.name]=c[E]}),u});return JSON.stringify(a,(c,u)=>typeof u=="bigint"?u>=Number.MIN_SAFE_INTEGER&&u<=Number.MAX_SAFE_INTEGER?Number(u):u.toString():u,2)}else if(o.message)return o.message}function Ee(t){return!t.columns||!t.data||t.data.length===0?[]:t.data.map(e=>{let r={};return t.columns.forEach((n,i)=>{let s=e[i];typeof s=="bigint"&&(s>=Number.MIN_SAFE_INTEGER&&s<=Number.MAX_SAFE_INTEGER?s=Number(s):s=s.toString()),r[n.name]=s}),r})}async function iw(t,e,r,n,i){let s=n||new Li(t),o=s.getKeepConnectionOpen(),a=[],l=nw(s,r,i),{connection:c,shouldCloseConnection:u}=await Vf(s,l,o);try{let d=E=>{let f=E;a.push(f.message)};c.on("notice",d);try{let f=xr.workspace.getConfiguration("netezza").get("queryTimeout",1800),T=c.createCommand(e);T.commandTimeout=f,i&&Di.set(i,T);try{let h=await T.executeReader();for(;await h.read(););}finally{i&&Di.delete(i)}}finally{c.removeListener("notice",d)}}finally{u&&c&&await c.close()}return a.join(`
`)}async function Gc(t,e,r,n,i,s){let o=r||new Li(t),a=o.getKeepConnectionOpen(),l;i||(l=xr.window.createOutputChannel("Netezza SQL"),l.show(!0),l.appendLine(`Executing ${e.length} queries sequentially...`));let c=[],u=r?r.getConnectionForExecution(n):void 0;if(u||(u=o.getActiveConnectionName()||void 0),!u)throw l&&l.appendLine("Error: No connection selected"),i&&i("Error: No connection selected"),new Error("No connection selected");try{let d=await o.getConnection(u);if(!d)throw new Error(`Connection '${u}' not found`);let{connection:E,shouldCloseConnection:f}=await Vf(o,u,a);E.on("notice",T=>{let h=T;l&&l.appendLine(`NOTICE: ${h.message}`),i&&i(`NOTICE: ${h.message}`)});try{let T="unknown";try{let m=await E.createCommand("SELECT CURRENT_SID").executeReader();if(await m.read()){let R=m.getValue(0);R!==void 0&&i&&i(`Connected. Session ID: ${R}`)}await m.close()}catch(S){console.debug("Could not retrieve session ID:",S),i&&i("Connected.")}let h=new ar(t),p=u;for(let S=0;S<e.length;S++){let m=e[S],R=`Executing query ${S+1}/${e.length}...`;l&&l.appendLine(R),i&&i(R);try{let A=$f(m),g=A.sql,w=A.setValues,I=kf(g);if(I.size>0){let V=await qR(I,!1,w);g=Yf(g,V)}let b=xr.workspace.getConfiguration("netezza").get("queryTimeout",1800),P=Date.now(),{results:M,error:B}=await C8(E,g,2e5,b,n),G=Date.now()-P;if(i&&i(`Executed query ${S+1}/${e.length} in ${G}ms`),h.addEntry(d.host,d.database,T,m,p).catch(V=>{console.error("Failed to log query to history:",V)}),M&&M.length>0)for(let V of M)V.columns.length>0?c.push({columns:V.columns,data:V.rows,rowsAffected:void 0,limitReached:V.limitReached,sql:g}):c.push({columns:[],data:[],rowsAffected:void 0,message:"Query executed successfully",sql:g});if(s&&M&&M.length>0){let V=[];for(let J of M)J.columns.length>0?V.push({columns:J.columns,data:J.rows,rowsAffected:void 0,limitReached:J.limitReached,sql:g}):V.push({columns:[],data:[],rowsAffected:void 0,message:"Query executed successfully",sql:g});s(V)}if(B)throw B}catch(A){let g=A instanceof Error?A.message:String(A);throw l&&l.appendLine(`Error in query ${S+1}: ${g}`),new Error(g)}}l&&l.appendLine("All queries completed.")}finally{f&&await E.close()}}catch(d){let f=`Error: ${d.message||String(d)}`;throw l&&l.appendLine(f),i&&i(f),new Error(f)}return c}async function C8(t,e,r,n,i){let s=t.createCommand(e);n&&n>0&&(s.commandTimeout=n),i&&Di.set(i,s);try{let o=await s.executeReader(),a=[],l=!0,c;try{do{let u=[],d=[],E=0,f=!1;for(;await o.read();){if(u.length===0)for(let T=0;T<o.fieldCount;T++)u.push({name:o.getName(T),type:o.getTypeName(T)});if(E<r){let T=[];for(let h=0;h<o.fieldCount;h++)T.push(o.getValue(h));d.push(T),E++}if(E>=r){f=!0,await XR(o,s);break}}a.push({columns:u,rows:d,limitReached:f}),l=await o.nextResult()}while(l)}catch(u){c=u instanceof Error?u:new Error(String(u))}return{results:a,error:c}}finally{i&&Di.delete(i)}}async function y8(t,e,r,n,i,s,o){let a=t.createCommand(e);i&&i>0&&(a.commandTimeout=i),s&&Di.set(s,a);try{let l=await a.executeReader(),c,u=0,d=!1;try{let E=[],f=[],T=!0;for(;await l.read();){if(E.length===0)for(let p=0;p<l.fieldCount;p++)E.push({name:l.getName(p),type:l.getTypeName(p)});let h=[];for(let p=0;p<l.fieldCount;p++)h.push(l.getValue(p));if(f.push(h),u++,f.length>=n&&(o({columns:T?E:[],rows:f,isFirstChunk:T,isLastChunk:!1,totalRowsSoFar:u,limitReached:!1}),f=[],T=!1),u>=r){d=!0,await XR(l,a);break}}o({columns:T?E:[],rows:f,isFirstChunk:T,isLastChunk:!0,totalRowsSoFar:u,limitReached:d})}catch(E){c=E instanceof Error?E:new Error(String(E))}return{totalRows:u,limitReached:d,error:c}}finally{s&&Di.delete(s)}}async function sw(t,e,r,n,i,s,o=5e3){let a=r||new Li(t),l=a.getKeepConnectionOpen(),c;i||(c=xr.window.createOutputChannel("Netezza SQL"),c.show(!0),c.appendLine(`Executing ${e.length} queries with streaming...`));let u=r?r.getConnectionForExecution(n):void 0;if(u||(u=a.getActiveConnectionName()||void 0),!u){let d="Error: No connection selected";throw c&&c.appendLine(d),i&&i(d),new Error("No connection selected")}try{let d=await a.getConnection(u);if(!d)throw new Error(`Connection '${u}' not found`);let{connection:E,shouldCloseConnection:f}=await Vf(a,u,l);E.on("notice",T=>{let h=T;c&&c.appendLine(`NOTICE: ${h.message}`),i&&i(`NOTICE: ${h.message}`)});try{try{let S=await E.createCommand("SELECT CURRENT_SID").executeReader();if(await S.read()){let m=S.getValue(0);m!==void 0&&i&&i(`Connected. Session ID: ${m}`)}await S.close()}catch(p){console.debug("Could not retrieve session ID:",p),i&&i("Connected.")}let T=new ar(t),h="unknown";for(let p=0;p<e.length;p++){let S=e[p],m=`Executing query ${p+1}/${e.length}...`;c&&c.appendLine(m),i&&i(m);try{let R=$f(S),A=R.sql,g=R.setValues,w=kf(A);if(w.size>0){let V=await qR(w,!1,g);A=Yf(A,V)}let D=xr.workspace.getConfiguration("netezza").get("queryTimeout",1800),b=Date.now(),{totalRows:P,limitReached:M,error:B}=await y8(E,A,2e5,o,D,n,V=>{s&&s(p,V,A)}),G=Date.now()-b;if(i&&i(`Query ${p+1}/${e.length}: ${P} rows in ${G}ms${M?" (limit reached)":""}`),T.addEntry(d.host,d.database,h,S,u).catch(V=>console.error("Failed to log query to history:",V)),B)throw B}catch(R){let A=R instanceof Error?R.message:String(R);throw c&&c.appendLine(`Error in query ${p+1}: ${A}`),new Error(A)}}c&&c.appendLine("All queries completed.")}finally{f&&await E.close()}}catch(d){let f=`Error: ${d.message||String(d)}`;throw c&&c.appendLine(f),i&&i(f),new Error(f)}}var xr,Di,lr=H(()=>{"use strict";xr=q(require("vscode"));YR();Wf();tw();Di=new Map});var lw={};_t(lw,{SqlParser:()=>vr});var vr,lo=H(()=>{"use strict";vr=class{static splitStatements(e){let r=[],n="",i=!1,s=!1,o=!1,a=!1,l=0;for(;l<e.length;){let c=e[l],u=l+1<e.length?e[l+1]:"";if(o)c===`
`&&(o=!1);else if(a){if(c==="*"&&u==="/"){a=!1,n+=c+u,l++,l++;continue}}else if(i)c==="'"&&e[l-1]!=="\\"&&(i=!1);else if(s)c==='"'&&e[l-1]!=="\\"&&(s=!1);else if(c==="-"&&u==="-")o=!0;else if(c==="/"&&u==="*")a=!0;else if(c==="'")i=!0;else if(c==='"')s=!0;else if(c===";"){n.trim()&&r.push(n.trim()),n="",l++;continue}n+=c,l++}return n.trim()&&r.push(n.trim()),r}static getStatementAtPosition(e,r){let n=0,i=e.length,s=!1,o=!1,a=!1,l=!1,c=-1;for(let d=0;d<r;d++){let E=e[d],f=d+1<e.length?e[d+1]:"";a?E===`
`&&(a=!1):l?E==="*"&&f==="/"&&(l=!1,d++):s?E==="'"&&e[d-1]!=="\\"&&(s=!1):o?E==='"'&&e[d-1]!=="\\"&&(o=!1):E==="-"&&f==="-"?a=!0:E==="/"&&f==="*"?l=!0:E==="'"?s=!0:E==='"'?o=!0:E===";"&&(c=d)}n=c+1,s=!1,o=!1,a=!1,l=!1;for(let d=n;d<e.length;d++){let E=e[d],f=d+1<e.length?e[d+1]:"";if(a)E===`
`&&(a=!1);else if(l)E==="*"&&f==="/"&&(l=!1,d++);else if(s)E==="'"&&e[d-1]!=="\\"&&(s=!1);else if(o)E==='"'&&e[d-1]!=="\\"&&(o=!1);else if(E==="-"&&f==="-")a=!0;else if(E==="/"&&f==="*")l=!0;else if(E==="'")s=!0;else if(E==='"')o=!0;else if(E===";"){i=d;break}}let u=e.substring(n,i).trim();return u?{sql:u,start:n,end:i}:null}static getObjectAtPosition(e,r){let n=c=>/[a-zA-Z0-9_."]/i.test(c),i=r;for(;i>0&&n(e[i-1]);)i--;let s=r;for(;s<e.length&&n(e[s]);)s++;let o=e.substring(i,s);if(!o)return null;let a=c=>c?c.replace(/"/g,""):void 0;if(o.includes("..")){let c=o.split("..");if(c.length===2)return{database:a(c[0]),name:a(c[1])}}let l=o.split(".");return l.length===1?{name:a(l[0])}:l.length===2?{schema:a(l[0]),name:a(l[1])}:l.length===3?{database:a(l[0]),schema:a(l[1]),name:a(l[2])}:null}}});var Iw={};_t(Iw,{exportToCsv:()=>oA});async function oA(t,e,r,n,i,s){let o=null;try{i&&i.report({message:"Connecting to database..."});let a={host:e.host,port:e.port||5480,database:e.database,user:e.user,password:e.password},l=Ir();o=new l(a),await o.connect(),i&&i.report({message:"Executing query..."});let c=o.createCommand(r);s&&(c.commandTimeout=s);let u=await c.executeReader();i&&i.report({message:"Writing to CSV..."});let d=_w.createWriteStream(n,{encoding:"utf8",highWaterMark:64*1024}),E=[];for(let p=0;p<u.fieldCount;p++)E.push(u.getName(p));E.length>0&&d.write(E.map(mw).join(",")+`
`);let f=0,T=[],h=500;for(;await u.read();){f++;let p=[];for(let S=0;S<u.fieldCount;S++)p.push(mw(u.getValue(S)));if(T.push(p.join(",")),T.length>=h){let S=d.write(T.join(`
`)+`
`);T=[],S||await new Promise(m=>d.once("drain",m)),i&&f%1e3===0&&i.report({message:`Processed ${f} rows...`})}}T.length>0&&d.write(T.join(`
`)+`
`),d.end(),await new Promise((p,S)=>{d.on("finish",p),d.on("error",S)}),i&&i.report({message:`Completed: ${f} rows exported`})}finally{if(o)try{await o.close()}catch(a){console.error("Error closing connection:",a)}}}function mw(t){if(t==null)return"";let e="";return typeof t=="bigint"?t>=Number.MIN_SAFE_INTEGER&&t<=Number.MAX_SAFE_INTEGER?e=Number(t).toString():e=t.toString():t instanceof Date?e=t.toISOString():typeof t=="object"&&Buffer.isBuffer(t)?e=t.toString("hex"):typeof t=="object"?e=JSON.stringify(t):e=String(t),e.includes('"')||e.includes(",")||e.includes(`
`)||e.includes("\r")?`"${e.replace(/"/g,'""')}"`:e}var _w,aA=H(()=>{"use strict";_w=q(require("fs"))});var Nw=O((qDe,gw)=>{var j8=typeof process=="object"&&process&&process.platform==="win32";gw.exports=j8?{sep:"\\"}:{sep:"/"}});var lA=O((XDe,bw)=>{"use strict";bw.exports=Cw;function Cw(t,e,r){t instanceof RegExp&&(t=Ow(t,r)),e instanceof RegExp&&(e=Ow(e,r));var n=yw(t,e,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+t.length,n[1]),post:r.slice(n[1]+e.length)}}function Ow(t,e){var r=e.match(t);return r?r[0]:null}Cw.range=yw;function yw(t,e,r){var n,i,s,o,a,l=r.indexOf(t),c=r.indexOf(e,l+1),u=l;if(l>=0&&c>0){if(t===e)return[l,c];for(n=[],s=r.length;u>=0&&!a;)u==l?(n.push(u),l=r.indexOf(t,u+1)):n.length==1?a=[n.pop(),c]:(i=n.pop(),i<s&&(s=i,o=c),c=r.indexOf(e,u+1)),u=l<c&&l>=0?l:c;n.length&&(a=[s,o])}return a}});var Uw=O((jDe,vw)=>{var ww=lA();vw.exports=J8;var Lw="\0SLASH"+Math.random()+"\0",Dw="\0OPEN"+Math.random()+"\0",uA="\0CLOSE"+Math.random()+"\0",Pw="\0COMMA"+Math.random()+"\0",xw="\0PERIOD"+Math.random()+"\0";function cA(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function z8(t){return t.split("\\\\").join(Lw).split("\\{").join(Dw).split("\\}").join(uA).split("\\,").join(Pw).split("\\.").join(xw)}function K8(t){return t.split(Lw).join("\\").split(Dw).join("{").split(uA).join("}").split(Pw).join(",").split(xw).join(".")}function Mw(t){if(!t)return[""];var e=[],r=ww("{","}",t);if(!r)return t.split(",");var n=r.pre,i=r.body,s=r.post,o=n.split(",");o[o.length-1]+="{"+i+"}";var a=Mw(s);return s.length&&(o[o.length-1]+=a.shift(),o.push.apply(o,a)),e.push.apply(e,o),e}function J8(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),jc(z8(t),!0).map(K8)):[]}function Q8(t){return"{"+t+"}"}function Z8(t){return/^-?0\d/.test(t)}function eJ(t,e){return t<=e}function tJ(t,e){return t>=e}function jc(t,e){var r=[],n=ww("{","}",t);if(!n)return[t];var i=n.pre,s=n.post.length?jc(n.post,!1):[""];if(/\$$/.test(n.pre))for(var o=0;o<s.length;o++){var a=i+"{"+n.body+"}"+s[o];r.push(a)}else{var l=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),c=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),u=l||c,d=n.body.indexOf(",")>=0;if(!u&&!d)return n.post.match(/,(?!,).*\}/)?(t=n.pre+"{"+n.body+uA+n.post,jc(t)):[t];var E;if(u)E=n.body.split(/\.\./);else if(E=Mw(n.body),E.length===1&&(E=jc(E[0],!1).map(Q8),E.length===1))return s.map(function(P){return n.pre+E[0]+P});var f;if(u){var T=cA(E[0]),h=cA(E[1]),p=Math.max(E[0].length,E[1].length),S=E.length==3?Math.abs(cA(E[2])):1,m=eJ,R=h<T;R&&(S*=-1,m=tJ);var A=E.some(Z8);f=[];for(var g=T;m(g,h);g+=S){var w;if(c)w=String.fromCharCode(g),w==="\\"&&(w="");else if(w=String(g),A){var I=p-w.length;if(I>0){var D=new Array(I+1).join("0");g<0?w="-"+D+w.slice(1):w=D+w}}f.push(w)}}else{f=[];for(var b=0;b<E.length;b++)f.push.apply(f,jc(E[b],!1))}for(var b=0;b<f.length;b++)for(var o=0;o<s.length;o++){var a=i+f[b]+s[o];(!e||u||a)&&r.push(a)}}return r}});var kw=O((KDe,TA)=>{var Jr=TA.exports=(t,e,r={})=>(hE(e),!r.nocomment&&e.charAt(0)==="#"?!1:new Wa(e,r).match(t));TA.exports=Jr;var EA=Nw();Jr.sep=EA.sep;var yn=Symbol("globstar **");Jr.GLOBSTAR=yn;var rJ=Uw(),Bw={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},hA="[^/]",dA=hA+"*?",nJ="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",iJ="(?:(?!(?:\\/|^)\\.).)*?",Hw=t=>t.split("").reduce((e,r)=>(e[r]=!0,e),{}),Fw=Hw("().*{}+?[]^$\\!"),sJ=Hw("[.("),Gw=/\/+/;Jr.filter=(t,e={})=>(r,n,i)=>Jr(r,t,e);var _s=(t,e={})=>{let r={};return Object.keys(t).forEach(n=>r[n]=t[n]),Object.keys(e).forEach(n=>r[n]=e[n]),r};Jr.defaults=t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return Jr;let e=Jr,r=(n,i,s)=>e(n,i,_s(t,s));return r.Minimatch=class extends e.Minimatch{constructor(i,s){super(i,_s(t,s))}},r.Minimatch.defaults=n=>e.defaults(_s(t,n)).Minimatch,r.filter=(n,i)=>e.filter(n,_s(t,i)),r.defaults=n=>e.defaults(_s(t,n)),r.makeRe=(n,i)=>e.makeRe(n,_s(t,i)),r.braceExpand=(n,i)=>e.braceExpand(n,_s(t,i)),r.match=(n,i,s)=>e.match(n,i,_s(t,s)),r};Jr.braceExpand=(t,e)=>Ww(t,e);var Ww=(t,e={})=>(hE(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:rJ(t)),oJ=1024*64,hE=t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>oJ)throw new TypeError("pattern is too long")},fA=Symbol("subparse");Jr.makeRe=(t,e)=>new Wa(t,e||{}).makeRe();Jr.match=(t,e,r={})=>{let n=new Wa(e,r);return t=t.filter(i=>n.match(i)),n.options.nonull&&!t.length&&t.push(e),t};var aJ=t=>t.replace(/\\(.)/g,"$1"),lJ=t=>t.replace(/\\([^-\]])/g,"$1"),cJ=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),uJ=t=>t.replace(/[[\]\\]/g,"\\$&"),Wa=class{constructor(e,r){hE(e),r||(r={}),this.options=r,this.set=[],this.pattern=e,this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!r.partial,this.make()}debug(){}make(){let e=this.pattern,r=this.options;if(!r.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate();let n=this.globSet=this.braceExpand();r.debug&&(this.debug=(...i)=>console.error(...i)),this.debug(this.pattern,n),n=this.globParts=n.map(i=>i.split(Gw)),this.debug(this.pattern,n),n=n.map((i,s,o)=>i.map(this.parse,this)),this.debug(this.pattern,n),n=n.filter(i=>i.indexOf(!1)===-1),this.debug(this.pattern,n),this.set=n}parseNegate(){if(this.options.nonegate)return;let e=this.pattern,r=!1,n=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)r=!r,n++;n&&(this.pattern=e.slice(n)),this.negate=r}matchOne(e,r,n){var i=this.options;this.debug("matchOne",{this:this,file:e,pattern:r}),this.debug("matchOne",e.length,r.length);for(var s=0,o=0,a=e.length,l=r.length;s<a&&o<l;s++,o++){this.debug("matchOne loop");var c=r[o],u=e[s];if(this.debug(r,c,u),c===!1)return!1;if(c===yn){this.debug("GLOBSTAR",[r,c,u]);var d=s,E=o+1;if(E===l){for(this.debug("** at the end");s<a;s++)if(e[s]==="."||e[s]===".."||!i.dot&&e[s].charAt(0)===".")return!1;return!0}for(;d<a;){var f=e[d];if(this.debug(`
globstar while`,e,d,r,E,f),this.matchOne(e.slice(d),r.slice(E),n))return this.debug("globstar found match!",d,a,f),!0;if(f==="."||f===".."||!i.dot&&f.charAt(0)==="."){this.debug("dot detected!",e,d,r,E);break}this.debug("globstar swallow a segment, and continue"),d++}return!!(n&&(this.debug(`
>>> no match, partial?`,e,d,r,E),d===a))}var T;if(typeof c=="string"?(T=u===c,this.debug("string match",c,u,T)):(T=u.match(c),this.debug("pattern match",c,u,T)),!T)return!1}if(s===a&&o===l)return!0;if(s===a)return n;if(o===l)return s===a-1&&e[s]==="";throw new Error("wtf?")}braceExpand(){return Ww(this.pattern,this.options)}parse(e,r){hE(e);let n=this.options;if(e==="**")if(n.noglobstar)e="*";else return yn;if(e==="")return"";let i="",s=!1,o=!1,a=[],l=[],c,u=!1,d=-1,E=-1,f,T,h,p=e.charAt(0)===".",S=n.dot||p,m=()=>p?"":S?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",R=I=>I.charAt(0)==="."?"":n.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",A=()=>{if(c){switch(c){case"*":i+=dA,s=!0;break;case"?":i+=hA,s=!0;break;default:i+="\\"+c;break}this.debug("clearStateChar %j %j",c,i),c=!1}};for(let I=0,D;I<e.length&&(D=e.charAt(I));I++){if(this.debug("%s	%s %s %j",e,I,i,D),o){if(D==="/")return!1;Fw[D]&&(i+="\\"),i+=D,o=!1;continue}switch(D){case"/":return!1;case"\\":if(u&&e.charAt(I+1)==="-"){i+=D;continue}A(),o=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",e,I,i,D),u){this.debug("  in class"),D==="!"&&I===E+1&&(D="^"),i+=D;continue}this.debug("call clearStateChar %j",c),A(),c=D,n.noext&&A();continue;case"(":{if(u){i+="(";continue}if(!c){i+="\\(";continue}let b={type:c,start:I-1,reStart:i.length,open:Bw[c].open,close:Bw[c].close};this.debug(this.pattern,"	",b),a.push(b),i+=b.open,b.start===0&&b.type!=="!"&&(p=!0,i+=R(e.slice(I+1))),this.debug("plType %j %j",c,i),c=!1;continue}case")":{let b=a[a.length-1];if(u||!b){i+="\\)";continue}a.pop(),A(),s=!0,T=b,i+=T.close,T.type==="!"&&l.push(Object.assign(T,{reEnd:i.length}));continue}case"|":{let b=a[a.length-1];if(u||!b){i+="\\|";continue}A(),i+="|",b.start===0&&b.type!=="!"&&(p=!0,i+=R(e.slice(I+1)));continue}case"[":if(A(),u){i+="\\"+D;continue}u=!0,E=I,d=i.length,i+=D;continue;case"]":if(I===E+1||!u){i+="\\"+D;continue}f=e.substring(E+1,I);try{RegExp("["+uJ(lJ(f))+"]"),i+=D}catch{i=i.substring(0,d)+"(?:$.)"}s=!0,u=!1;continue;default:A(),Fw[D]&&!(D==="^"&&u)&&(i+="\\"),i+=D;break}}for(u&&(f=e.slice(E+1),h=this.parse(f,fA),i=i.substring(0,d)+"\\["+h[0],s=s||h[1]),T=a.pop();T;T=a.pop()){let I;I=i.slice(T.reStart+T.open.length),this.debug("setting tail",i,T),I=I.replace(/((?:\\{2}){0,64})(\\?)\|/g,(b,P,M)=>(M||(M="\\"),P+P+M+"|")),this.debug(`tail=%j
   %s`,I,I,T,i);let D=T.type==="*"?dA:T.type==="?"?hA:"\\"+T.type;s=!0,i=i.slice(0,T.reStart)+D+"\\("+I}A(),o&&(i+="\\\\");let g=sJ[i.charAt(0)];for(let I=l.length-1;I>-1;I--){let D=l[I],b=i.slice(0,D.reStart),P=i.slice(D.reStart,D.reEnd-8),M=i.slice(D.reEnd),B=i.slice(D.reEnd-8,D.reEnd)+M,G=b.split(")").length,V=b.split("(").length-G,J=M;for(let te=0;te<V;te++)J=J.replace(/\)[+*?]?/,"");M=J;let re=M===""&&r!==fA?"(?:$|\\/)":"";i=b+P+M+re+B}if(i!==""&&s&&(i="(?=.)"+i),g&&(i=m()+i),r===fA)return[i,s];if(n.nocase&&!s&&(s=e.toUpperCase()!==e.toLowerCase()),!s)return aJ(e);let w=n.nocase?"i":"";try{return Object.assign(new RegExp("^"+i+"$",w),{_glob:e,_src:i})}catch{return new RegExp("$.")}}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let r=this.options,n=r.noglobstar?dA:r.dot?nJ:iJ,i=r.nocase?"i":"",s=e.map(o=>(o=o.map(a=>typeof a=="string"?cJ(a):a===yn?yn:a._src).reduce((a,l)=>(a[a.length-1]===yn&&l===yn||a.push(l),a),[]),o.forEach((a,l)=>{a!==yn||o[l-1]===yn||(l===0?o.length>1?o[l+1]="(?:\\/|"+n+"\\/)?"+o[l+1]:o[l]=n:l===o.length-1?o[l-1]+="(?:\\/|"+n+")?":(o[l-1]+="(?:\\/|\\/"+n+"\\/)"+o[l+1],o[l+1]=yn))}),o.filter(a=>a!==yn).join("/"))).join("|");s="^(?:"+s+")$",this.negate&&(s="^(?!"+s+").*$");try{this.regexp=new RegExp(s,i)}catch{this.regexp=!1}return this.regexp}match(e,r=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&r)return!0;let n=this.options;EA.sep!=="/"&&(e=e.split(EA.sep).join("/")),e=e.split(Gw),this.debug(this.pattern,"split",e);let i=this.set;this.debug(this.pattern,"set",i);let s;for(let o=e.length-1;o>=0&&(s=e[o],!s);o--);for(let o=0;o<i.length;o++){let a=i[o],l=e;if(n.matchBase&&a.length===1&&(l=[s]),this.matchOne(l,a,r))return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate}static defaults(e){return Jr.defaults(e).Minimatch}};Jr.Minimatch=Wa});var Xw=O((JDe,qw)=>{qw.exports=Vw;var SA=require("fs"),{EventEmitter:dJ}=require("events"),{Minimatch:pA}=kw(),{resolve:fJ}=require("path");function EJ(t,e){return new Promise((r,n)=>{SA.readdir(t,{withFileTypes:!0},(i,s)=>{if(i)switch(i.code){case"ENOTDIR":e?n(i):r([]);break;case"ENOTSUP":case"ENOENT":case"ENAMETOOLONG":case"UNKNOWN":r([]);break;case"ELOOP":default:n(i);break}else r(s)})})}function $w(t,e){return new Promise((r,n)=>{(e?SA.stat:SA.lstat)(t,(s,o)=>{if(s)switch(s.code){case"ENOENT":r(e?$w(t,!1):null);break;default:r(null);break}else r(o)})})}async function*Yw(t,e,r,n,i,s){let o=await EJ(e+t,s);for(let a of o){let l=a.name;l===void 0&&(l=a,n=!0);let c=t+"/"+l,u=c.slice(1),d=e+"/"+u,E=null;(n||r)&&(E=await $w(d,r)),!E&&a.name!==void 0&&(E=a),E===null&&(E={isDirectory:()=>!1}),E.isDirectory()?i(u)||(yield{relative:u,absolute:d,stats:E},yield*Yw(c,e,r,n,i,!1)):yield{relative:u,absolute:d,stats:E}}}async function*hJ(t,e,r,n){yield*Yw("",t,e,r,n,!0)}function TJ(t){return{pattern:t.pattern,dot:!!t.dot,noglobstar:!!t.noglobstar,matchBase:!!t.matchBase,nocase:!!t.nocase,ignore:t.ignore,skip:t.skip,follow:!!t.follow,stat:!!t.stat,nodir:!!t.nodir,mark:!!t.mark,silent:!!t.silent,absolute:!!t.absolute}}var TE=class extends dJ{constructor(e,r,n){if(super(),typeof r=="function"&&(n=r,r=null),this.options=TJ(r||{}),this.matchers=[],this.options.pattern){let i=Array.isArray(this.options.pattern)?this.options.pattern:[this.options.pattern];this.matchers=i.map(s=>new pA(s,{dot:this.options.dot,noglobstar:this.options.noglobstar,matchBase:this.options.matchBase,nocase:this.options.nocase}))}if(this.ignoreMatchers=[],this.options.ignore){let i=Array.isArray(this.options.ignore)?this.options.ignore:[this.options.ignore];this.ignoreMatchers=i.map(s=>new pA(s,{dot:!0}))}if(this.skipMatchers=[],this.options.skip){let i=Array.isArray(this.options.skip)?this.options.skip:[this.options.skip];this.skipMatchers=i.map(s=>new pA(s,{dot:!0}))}this.iterator=hJ(fJ(e||"."),this.options.follow,this.options.stat,this._shouldSkipDirectory.bind(this)),this.paused=!1,this.inactive=!1,this.aborted=!1,n&&(this._matches=[],this.on("match",i=>this._matches.push(this.options.absolute?i.absolute:i.relative)),this.on("error",i=>n(i)),this.on("end",()=>n(null,this._matches))),setTimeout(()=>this._next(),0)}_shouldSkipDirectory(e){return this.skipMatchers.some(r=>r.match(e))}_fileMatches(e,r){let n=e+(r?"/":"");return(this.matchers.length===0||this.matchers.some(i=>i.match(n)))&&!this.ignoreMatchers.some(i=>i.match(n))&&(!this.options.nodir||!r)}_next(){!this.paused&&!this.aborted?this.iterator.next().then(e=>{if(e.done)this.emit("end");else{let r=e.value.stats.isDirectory();if(this._fileMatches(e.value.relative,r)){let n=e.value.relative,i=e.value.absolute;this.options.mark&&r&&(n+="/",i+="/"),this.options.stat?this.emit("match",{relative:n,absolute:i,stat:e.value.stats}):this.emit("match",{relative:n,absolute:i})}this._next(this.iterator)}}).catch(e=>{this.abort(),this.emit("error",e),!e.code&&!this.options.silent&&console.error(e)}):this.inactive=!0}abort(){this.aborted=!0}pause(){this.paused=!0}resume(){this.paused=!1,this.inactive&&(this.inactive=!1,this._next())}};function Vw(t,e,r){return new TE(t,e,r)}Vw.ReaddirGlob=TE});var zw=O((pE,jw)=>{(function(t,e){typeof pE=="object"&&typeof jw<"u"?e(pE):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e(t.async={}))})(pE,(function(t){"use strict";function e(C,...N){return(...y)=>C(...N,...y)}function r(C){return function(...N){var y=N.pop();return C.call(this,N,y)}}var n=typeof queueMicrotask=="function"&&queueMicrotask,i=typeof setImmediate=="function"&&setImmediate,s=typeof process=="object"&&typeof process.nextTick=="function";function o(C){setTimeout(C,0)}function a(C){return(N,...y)=>C(()=>N(...y))}var l;n?l=queueMicrotask:i?l=setImmediate:s?l=process.nextTick:l=o;var c=a(l);function u(C){return f(C)?function(...N){let y=N.pop(),L=C.apply(this,N);return d(L,y)}:r(function(N,y){var L;try{L=C.apply(this,N)}catch(v){return y(v)}if(L&&typeof L.then=="function")return d(L,y);y(null,L)})}function d(C,N){return C.then(y=>{E(N,null,y)},y=>{E(N,y&&(y instanceof Error||y.message)?y:new Error(y))})}function E(C,N,y){try{C(N,y)}catch(L){c(v=>{throw v},L)}}function f(C){return C[Symbol.toStringTag]==="AsyncFunction"}function T(C){return C[Symbol.toStringTag]==="AsyncGenerator"}function h(C){return typeof C[Symbol.asyncIterator]=="function"}function p(C){if(typeof C!="function")throw new Error("expected a function");return f(C)?u(C):C}function S(C,N){if(N||(N=C.length),!N)throw new Error("arity is undefined");function y(...L){return typeof L[N-1]=="function"?C.apply(this,L):new Promise((v,U)=>{L[N-1]=(F,...W)=>{if(F)return U(F);v(W.length>1?W:W[0])},C.apply(this,L)})}return y}function m(C){return function(y,...L){return S(function(U){var F=this;return C(y,(W,Y)=>{p(W).apply(F,L.concat(Y))},U)})}}function R(C,N,y,L){N=N||[];var v=[],U=0,F=p(y);return C(N,(W,Y,ee)=>{var Ue=U++;F(W,(ke,Fe)=>{v[Ue]=Fe,ee(ke)})},W=>{L(W,v)})}function A(C){return C&&typeof C.length=="number"&&C.length>=0&&C.length%1===0}let g={};function w(C){function N(...y){if(C!==null){var L=C;C=null,L.apply(this,y)}}return Object.assign(N,C),N}function I(C){return C[Symbol.iterator]&&C[Symbol.iterator]()}function D(C){var N=-1,y=C.length;return function(){return++N<y?{value:C[N],key:N}:null}}function b(C){var N=-1;return function(){var L=C.next();return L.done?null:(N++,{value:L.value,key:N})}}function P(C){var N=C?Object.keys(C):[],y=-1,L=N.length;return function v(){var U=N[++y];return U==="__proto__"?v():y<L?{value:C[U],key:U}:null}}function M(C){if(A(C))return D(C);var N=I(C);return N?b(N):P(C)}function B(C){return function(...N){if(C===null)throw new Error("Callback was already called.");var y=C;C=null,y.apply(this,N)}}function G(C,N,y,L){let v=!1,U=!1,F=!1,W=0,Y=0;function ee(){W>=N||F||v||(F=!0,C.next().then(({value:Fe,done:an})=>{if(!(U||v)){if(F=!1,an){v=!0,W<=0&&L(null);return}W++,y(Fe,Y,Ue),Y++,ee()}}).catch(ke))}function Ue(Fe,an){if(W-=1,!U){if(Fe)return ke(Fe);if(Fe===!1){v=!0,U=!0;return}if(an===g||v&&W<=0)return v=!0,L(null);ee()}}function ke(Fe){U||(F=!1,v=!0,L(Fe))}ee()}var V=C=>(N,y,L)=>{if(L=w(L),C<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!N)return L(null);if(T(N))return G(N,C,y,L);if(h(N))return G(N[Symbol.asyncIterator](),C,y,L);var v=M(N),U=!1,F=!1,W=0,Y=!1;function ee(ke,Fe){if(!F)if(W-=1,ke)U=!0,L(ke);else if(ke===!1)U=!0,F=!0;else{if(Fe===g||U&&W<=0)return U=!0,L(null);Y||Ue()}}function Ue(){for(Y=!0;W<C&&!U;){var ke=v();if(ke===null){U=!0,W<=0&&L(null);return}W+=1,y(ke.value,ke.key,B(ee))}Y=!1}Ue()};function J(C,N,y,L){return V(N)(C,p(y),L)}var re=S(J,4);function te(C,N,y){y=w(y);var L=0,v=0,{length:U}=C,F=!1;U===0&&y(null);function W(Y,ee){Y===!1&&(F=!0),F!==!0&&(Y?y(Y):(++v===U||ee===g)&&y(null))}for(;L<U;L++)N(C[L],L,B(W))}function Be(C,N,y){return re(C,1/0,N,y)}function fe(C,N,y){var L=A(C)?te:Be;return L(C,p(N),y)}var $r=S(fe,3);function qK(C,N,y){return R($r,C,N,y)}var uf=S(qK,3),Lb=m(uf);function XK(C,N,y){return re(C,1,N,y)}var On=S(XK,3);function jK(C,N,y){return R(On,C,N,y)}var SR=S(jK,3),Db=m(SR);let wa=Symbol("promiseCallback");function La(){let C,N;function y(L,...v){if(L)return N(L);C(v.length>1?v:v[0])}return y[wa]=new Promise((L,v)=>{C=L,N=v}),y}function RR(C,N,y){typeof N!="number"&&(y=N,N=null),y=w(y||La());var L=Object.keys(C).length;if(!L)return y(null);N||(N=L);var v={},U=0,F=!1,W=!1,Y=Object.create(null),ee=[],Ue=[],ke={};Object.keys(C).forEach(Z=>{var se=C[Z];if(!Array.isArray(se)){Fe(Z,[se]),Ue.push(Z);return}var Ge=se.slice(0,se.length-1),at=Ge.length;if(at===0){Fe(Z,se),Ue.push(Z);return}ke[Z]=at,Ge.forEach(jt=>{if(!C[jt])throw new Error("async.auto task `"+Z+"` has a non-existent dependency `"+jt+"` in "+Ge.join(", "));Pa(jt,()=>{at--,at===0&&Fe(Z,se)})})}),$e(),an();function Fe(Z,se){ee.push(()=>Mc(Z,se))}function an(){if(!F){if(ee.length===0&&U===0)return y(null,v);for(;ee.length&&U<N;){var Z=ee.shift();Z()}}}function Pa(Z,se){var Ge=Y[Z];Ge||(Ge=Y[Z]=[]),Ge.push(se)}function io(Z){var se=Y[Z]||[];se.forEach(Ge=>Ge()),an()}function Mc(Z,se){if(!W){var Ge=B((jt,...ln)=>{if(U--,jt===!1){F=!0;return}if(ln.length<2&&([ln]=ln),jt){var xa={};if(Object.keys(v).forEach(so=>{xa[so]=v[so]}),xa[Z]=ln,W=!0,Y=Object.create(null),F)return;y(jt,xa)}else v[Z]=ln,io(Z)});U++;var at=p(se[se.length-1]);se.length>1?at(v,Ge):at(Ge)}}function $e(){for(var Z,se=0;Ue.length;)Z=Ue.pop(),se++,ie(Z).forEach(Ge=>{--ke[Ge]===0&&Ue.push(Ge)});if(se!==L)throw new Error("async.auto cannot execute tasks due to a recursive dependency")}function ie(Z){var se=[];return Object.keys(C).forEach(Ge=>{let at=C[Ge];Array.isArray(at)&&at.indexOf(Z)>=0&&se.push(Ge)}),se}return y[wa]}var zK=/^(?:async\s)?(?:function)?\s*(?:\w+\s*)?\(([^)]+)\)(?:\s*{)/,KK=/^(?:async\s)?\s*(?:\(\s*)?((?:[^)=\s]\s*)*)(?:\)\s*)?=>/,JK=/,/,QK=/(=.+)?(\s*)$/;function ZK(C){let N="",y=0,L=C.indexOf("*/");for(;y<C.length;)if(C[y]==="/"&&C[y+1]==="/"){let v=C.indexOf(`
`,y);y=v===-1?C.length:v}else if(L!==-1&&C[y]==="/"&&C[y+1]==="*"){let v=C.indexOf("*/",y);v!==-1?(y=v+2,L=C.indexOf("*/",y)):(N+=C[y],y++)}else N+=C[y],y++;return N}function e4(C){let N=ZK(C.toString()),y=N.match(zK);if(y||(y=N.match(KK)),!y)throw new Error(`could not parse args in autoInject
Source:
`+N);let[,L]=y;return L.replace(/\s/g,"").split(JK).map(v=>v.replace(QK,"").trim())}function Pb(C,N){var y={};return Object.keys(C).forEach(L=>{var v=C[L],U,F=f(v),W=!F&&v.length===1||F&&v.length===0;if(Array.isArray(v))U=[...v],v=U.pop(),y[L]=U.concat(U.length>0?Y:v);else if(W)y[L]=v;else{if(U=e4(v),v.length===0&&!F&&U.length===0)throw new Error("autoInject task functions require explicit parameters.");F||U.pop(),y[L]=U.concat(Y)}function Y(ee,Ue){var ke=U.map(Fe=>ee[Fe]);ke.push(Ue),p(v)(...ke)}}),RR(y,N)}class t4{constructor(){this.head=this.tail=null,this.length=0}removeLink(N){return N.prev?N.prev.next=N.next:this.head=N.next,N.next?N.next.prev=N.prev:this.tail=N.prev,N.prev=N.next=null,this.length-=1,N}empty(){for(;this.head;)this.shift();return this}insertAfter(N,y){y.prev=N,y.next=N.next,N.next?N.next.prev=y:this.tail=y,N.next=y,this.length+=1}insertBefore(N,y){y.prev=N.prev,y.next=N,N.prev?N.prev.next=y:this.head=y,N.prev=y,this.length+=1}unshift(N){this.head?this.insertBefore(this.head,N):xb(this,N)}push(N){this.tail?this.insertAfter(this.tail,N):xb(this,N)}shift(){return this.head&&this.removeLink(this.head)}pop(){return this.tail&&this.removeLink(this.tail)}toArray(){return[...this]}*[Symbol.iterator](){for(var N=this.head;N;)yield N.data,N=N.next}remove(N){for(var y=this.head;y;){var{next:L}=y;N(y)&&this.removeLink(y),y=L}return this}}function xb(C,N){C.length=1,C.head=C.tail=N}function AR(C,N,y){if(N==null)N=1;else if(N===0)throw new RangeError("Concurrency must not be zero");var L=p(C),v=0,U=[];let F={error:[],drain:[],saturated:[],unsaturated:[],empty:[]};function W(ie,Z){F[ie].push(Z)}function Y(ie,Z){let se=(...Ge)=>{ee(ie,se),Z(...Ge)};F[ie].push(se)}function ee(ie,Z){if(!ie)return Object.keys(F).forEach(se=>F[se]=[]);if(!Z)return F[ie]=[];F[ie]=F[ie].filter(se=>se!==Z)}function Ue(ie,...Z){F[ie].forEach(se=>se(...Z))}var ke=!1;function Fe(ie,Z,se,Ge){if(Ge!=null&&typeof Ge!="function")throw new Error("task callback must be a function");$e.started=!0;var at,jt;function ln(so,...vc){if(so)return se?jt(so):at();if(vc.length<=1)return at(vc[0]);at(vc)}var xa=$e._createTaskItem(ie,se?ln:Ge||ln);if(Z?$e._tasks.unshift(xa):$e._tasks.push(xa),ke||(ke=!0,c(()=>{ke=!1,$e.process()})),se||!Ge)return new Promise((so,vc)=>{at=so,jt=vc})}function an(ie){return function(Z,...se){v-=1;for(var Ge=0,at=ie.length;Ge<at;Ge++){var jt=ie[Ge],ln=U.indexOf(jt);ln===0?U.shift():ln>0&&U.splice(ln,1),jt.callback(Z,...se),Z!=null&&Ue("error",Z,jt.data)}v<=$e.concurrency-$e.buffer&&Ue("unsaturated"),$e.idle()&&Ue("drain"),$e.process()}}function Pa(ie){return ie.length===0&&$e.idle()?(c(()=>Ue("drain")),!0):!1}let io=ie=>Z=>{if(!Z)return new Promise((se,Ge)=>{Y(ie,(at,jt)=>{if(at)return Ge(at);se(jt)})});ee(ie),W(ie,Z)};var Mc=!1,$e={_tasks:new t4,_createTaskItem(ie,Z){return{data:ie,callback:Z}},*[Symbol.iterator](){yield*$e._tasks[Symbol.iterator]()},concurrency:N,payload:y,buffer:N/4,started:!1,paused:!1,push(ie,Z){return Array.isArray(ie)?Pa(ie)?void 0:ie.map(se=>Fe(se,!1,!1,Z)):Fe(ie,!1,!1,Z)},pushAsync(ie,Z){return Array.isArray(ie)?Pa(ie)?void 0:ie.map(se=>Fe(se,!1,!0,Z)):Fe(ie,!1,!0,Z)},kill(){ee(),$e._tasks.empty()},unshift(ie,Z){return Array.isArray(ie)?Pa(ie)?void 0:ie.map(se=>Fe(se,!0,!1,Z)):Fe(ie,!0,!1,Z)},unshiftAsync(ie,Z){return Array.isArray(ie)?Pa(ie)?void 0:ie.map(se=>Fe(se,!0,!0,Z)):Fe(ie,!0,!0,Z)},remove(ie){$e._tasks.remove(ie)},process(){if(!Mc){for(Mc=!0;!$e.paused&&v<$e.concurrency&&$e._tasks.length;){var ie=[],Z=[],se=$e._tasks.length;$e.payload&&(se=Math.min(se,$e.payload));for(var Ge=0;Ge<se;Ge++){var at=$e._tasks.shift();ie.push(at),U.push(at),Z.push(at.data)}v+=1,$e._tasks.length===0&&Ue("empty"),v===$e.concurrency&&Ue("saturated");var jt=B(an(ie));L(Z,jt)}Mc=!1}},length(){return $e._tasks.length},running(){return v},workersList(){return U},idle(){return $e._tasks.length+v===0},pause(){$e.paused=!0},resume(){$e.paused!==!1&&($e.paused=!1,c($e.process))}};return Object.defineProperties($e,{saturated:{writable:!1,value:io("saturated")},unsaturated:{writable:!1,value:io("unsaturated")},empty:{writable:!1,value:io("empty")},drain:{writable:!1,value:io("drain")},error:{writable:!1,value:io("error")}}),$e}function Mb(C,N){return AR(C,1,N)}function vb(C,N,y){return AR(C,N,y)}function r4(C,N,y,L){L=w(L);var v=p(y);return On(C,(U,F,W)=>{v(N,U,(Y,ee)=>{N=ee,W(Y)})},U=>L(U,N))}var ps=S(r4,4);function mR(...C){var N=C.map(p);return function(...y){var L=this,v=y[y.length-1];return typeof v=="function"?y.pop():v=La(),ps(N,y,(U,F,W)=>{F.apply(L,U.concat((Y,...ee)=>{W(Y,ee)}))},(U,F)=>v(U,...F)),v[wa]}}function Ub(...C){return mR(...C.reverse())}function n4(C,N,y,L){return R(V(N),C,y,L)}var wc=S(n4,4);function i4(C,N,y,L){var v=p(y);return wc(C,N,(U,F)=>{v(U,(W,...Y)=>W?F(W):F(W,Y))},(U,F)=>{for(var W=[],Y=0;Y<F.length;Y++)F[Y]&&(W=W.concat(...F[Y]));return L(U,W)})}var Da=S(i4,4);function s4(C,N,y){return Da(C,1/0,N,y)}var df=S(s4,3);function o4(C,N,y){return Da(C,1,N,y)}var ff=S(o4,3);function Bb(...C){return function(...N){var y=N.pop();return y(null,...C)}}function wi(C,N){return(y,L,v,U)=>{var F=!1,W;let Y=p(v);y(L,(ee,Ue,ke)=>{Y(ee,(Fe,an)=>{if(Fe||Fe===!1)return ke(Fe);if(C(an)&&!W)return F=!0,W=N(!0,ee),ke(null,g);ke()})},ee=>{if(ee)return U(ee);U(null,F?W:N(!1))})}}function a4(C,N,y){return wi(L=>L,(L,v)=>v)($r,C,N,y)}var Ef=S(a4,3);function l4(C,N,y,L){return wi(v=>v,(v,U)=>U)(V(N),C,y,L)}var hf=S(l4,4);function c4(C,N,y){return wi(L=>L,(L,v)=>v)(V(1),C,N,y)}var Tf=S(c4,3);function Fb(C){return(N,...y)=>p(N)(...y,(L,...v)=>{typeof console=="object"&&(L?console.error&&console.error(L):console[C]&&v.forEach(U=>console[C](U)))})}var Gb=Fb("dir");function u4(C,N,y){y=B(y);var L=p(C),v=p(N),U;function F(Y,...ee){if(Y)return y(Y);Y!==!1&&(U=ee,v(...ee,W))}function W(Y,ee){if(Y)return y(Y);if(Y!==!1){if(!ee)return y(null,...U);L(F)}}return W(null,!0)}var Lc=S(u4,3);function Hb(C,N,y){let L=p(N);return Lc(C,(...v)=>{let U=v.pop();L(...v,(F,W)=>U(F,!W))},y)}function Wb(C){return(N,y,L)=>C(N,L)}function d4(C,N,y){return $r(C,Wb(p(N)),y)}var pf=S(d4,3);function f4(C,N,y,L){return V(N)(C,Wb(p(y)),L)}var Dc=S(f4,4);function E4(C,N,y){return Dc(C,1,N,y)}var Pc=S(E4,3);function _R(C){return f(C)?C:function(...N){var y=N.pop(),L=!0;N.push((...v)=>{L?c(()=>y(...v)):y(...v)}),C.apply(this,N),L=!1}}function h4(C,N,y){return wi(L=>!L,L=>!L)($r,C,N,y)}var Sf=S(h4,3);function T4(C,N,y,L){return wi(v=>!v,v=>!v)(V(N),C,y,L)}var Rf=S(T4,4);function p4(C,N,y){return wi(L=>!L,L=>!L)(On,C,N,y)}var Af=S(p4,3);function S4(C,N,y,L){var v=new Array(N.length);C(N,(U,F,W)=>{y(U,(Y,ee)=>{v[F]=!!ee,W(Y)})},U=>{if(U)return L(U);for(var F=[],W=0;W<N.length;W++)v[W]&&F.push(N[W]);L(null,F)})}function R4(C,N,y,L){var v=[];C(N,(U,F,W)=>{y(U,(Y,ee)=>{if(Y)return W(Y);ee&&v.push({index:F,value:U}),W(Y)})},U=>{if(U)return L(U);L(null,v.sort((F,W)=>F.index-W.index).map(F=>F.value))})}function mf(C,N,y,L){var v=A(N)?S4:R4;return v(C,N,p(y),L)}function A4(C,N,y){return mf($r,C,N,y)}var _f=S(A4,3);function m4(C,N,y,L){return mf(V(N),C,y,L)}var If=S(m4,4);function _4(C,N,y){return mf(On,C,N,y)}var gf=S(_4,3);function I4(C,N){var y=B(N),L=p(_R(C));function v(U){if(U)return y(U);U!==!1&&L(v)}return v()}var kb=S(I4,2);function g4(C,N,y,L){var v=p(y);return wc(C,N,(U,F)=>{v(U,(W,Y)=>W?F(W):F(W,{key:Y,val:U}))},(U,F)=>{for(var W={},{hasOwnProperty:Y}=Object.prototype,ee=0;ee<F.length;ee++)if(F[ee]){var{key:Ue}=F[ee],{val:ke}=F[ee];Y.call(W,Ue)?W[Ue].push(ke):W[Ue]=[ke]}return L(U,W)})}var Nf=S(g4,4);function $b(C,N,y){return Nf(C,1/0,N,y)}function Yb(C,N,y){return Nf(C,1,N,y)}var Vb=Fb("log");function N4(C,N,y,L){L=w(L);var v={},U=p(y);return V(N)(C,(F,W,Y)=>{U(F,W,(ee,Ue)=>{if(ee)return Y(ee);v[W]=Ue,Y(ee)})},F=>L(F,v))}var Of=S(N4,4);function qb(C,N,y){return Of(C,1/0,N,y)}function Xb(C,N,y){return Of(C,1,N,y)}function jb(C,N=y=>y){var y=Object.create(null),L=Object.create(null),v=p(C),U=r((F,W)=>{var Y=N(...F);Y in y?c(()=>W(null,...y[Y])):Y in L?L[Y].push(W):(L[Y]=[W],v(...F,(ee,...Ue)=>{ee||(y[Y]=Ue);var ke=L[Y];delete L[Y];for(var Fe=0,an=ke.length;Fe<an;Fe++)ke[Fe](ee,...Ue)}))});return U.memo=y,U.unmemoized=C,U}var Cf;s?Cf=process.nextTick:i?Cf=setImmediate:Cf=o;var zb=a(Cf),IR=S((C,N,y)=>{var L=A(N)?[]:{};C(N,(v,U,F)=>{p(v)((W,...Y)=>{Y.length<2&&([Y]=Y),L[U]=Y,F(W)})},v=>y(v,L))},3);function Kb(C,N){return IR($r,C,N)}function Jb(C,N,y){return IR(V(N),C,y)}function gR(C,N){var y=p(C);return AR((L,v)=>{y(L[0],v)},N,1)}class O4{constructor(){this.heap=[],this.pushCount=Number.MIN_SAFE_INTEGER}get length(){return this.heap.length}empty(){return this.heap=[],this}percUp(N){let y;for(;N>0&&NR(this.heap[N],this.heap[y=Qb(N)]);){let L=this.heap[N];this.heap[N]=this.heap[y],this.heap[y]=L,N=y}}percDown(N){let y;for(;(y=C4(N))<this.heap.length&&(y+1<this.heap.length&&NR(this.heap[y+1],this.heap[y])&&(y=y+1),!NR(this.heap[N],this.heap[y]));){let L=this.heap[N];this.heap[N]=this.heap[y],this.heap[y]=L,N=y}}push(N){N.pushCount=++this.pushCount,this.heap.push(N),this.percUp(this.heap.length-1)}unshift(N){return this.heap.push(N)}shift(){let[N]=this.heap;return this.heap[0]=this.heap[this.heap.length-1],this.heap.pop(),this.percDown(0),N}toArray(){return[...this]}*[Symbol.iterator](){for(let N=0;N<this.heap.length;N++)yield this.heap[N].data}remove(N){let y=0;for(let L=0;L<this.heap.length;L++)N(this.heap[L])||(this.heap[y]=this.heap[L],y++);this.heap.splice(y);for(let L=Qb(this.heap.length-1);L>=0;L--)this.percDown(L);return this}}function C4(C){return(C<<1)+1}function Qb(C){return(C+1>>1)-1}function NR(C,N){return C.priority!==N.priority?C.priority<N.priority:C.pushCount<N.pushCount}function Zb(C,N){var y=gR(C,N),{push:L,pushAsync:v}=y;y._tasks=new O4,y._createTaskItem=({data:F,priority:W},Y)=>({data:F,priority:W,callback:Y});function U(F,W){return Array.isArray(F)?F.map(Y=>({data:Y,priority:W})):{data:F,priority:W}}return y.push=function(F,W=0,Y){return L(U(F,W),Y)},y.pushAsync=function(F,W=0,Y){return v(U(F,W),Y)},delete y.unshift,delete y.unshiftAsync,y}function y4(C,N){if(N=w(N),!Array.isArray(C))return N(new TypeError("First argument to race must be an array of functions"));if(!C.length)return N();for(var y=0,L=C.length;y<L;y++)p(C[y])(N)}var e0=S(y4,2);function yf(C,N,y,L){var v=[...C].reverse();return ps(v,N,y,L)}function bf(C){var N=p(C);return r(function(L,v){return L.push((U,...F)=>{let W={};if(U&&(W.error=U),F.length>0){var Y=F;F.length<=1&&([Y]=F),W.value=Y}v(null,W)}),N.apply(this,L)})}function t0(C){var N;return Array.isArray(C)?N=C.map(bf):(N={},Object.keys(C).forEach(y=>{N[y]=bf.call(this,C[y])})),N}function CR(C,N,y,L){let v=p(y);return mf(C,N,(U,F)=>{v(U,(W,Y)=>{F(W,!Y)})},L)}function b4(C,N,y){return CR($r,C,N,y)}var r0=S(b4,3);function w4(C,N,y,L){return CR(V(N),C,y,L)}var n0=S(w4,4);function L4(C,N,y){return CR(On,C,N,y)}var i0=S(L4,3);function s0(C){return function(){return C}}let yR=5,o0=0;function wf(C,N,y){var L={times:yR,intervalFunc:s0(o0)};if(arguments.length<3&&typeof C=="function"?(y=N||La(),N=C):(D4(L,C),y=y||La()),typeof N!="function")throw new Error("Invalid arguments for async.retry");var v=p(N),U=1;function F(){v((W,...Y)=>{W!==!1&&(W&&U++<L.times&&(typeof L.errorFilter!="function"||L.errorFilter(W))?setTimeout(F,L.intervalFunc(U-1)):y(W,...Y))})}return F(),y[wa]}function D4(C,N){if(typeof N=="object")C.times=+N.times||yR,C.intervalFunc=typeof N.interval=="function"?N.interval:s0(+N.interval||o0),C.errorFilter=N.errorFilter;else if(typeof N=="number"||typeof N=="string")C.times=+N||yR;else throw new Error("Invalid arguments for async.retry")}function a0(C,N){N||(N=C,C=null);let y=C&&C.arity||N.length;f(N)&&(y+=1);var L=p(N);return r((v,U)=>{(v.length<y-1||U==null)&&(v.push(U),U=La());function F(W){L(...v,W)}return C?wf(C,F,U):wf(F,U),U[wa]})}function l0(C,N){return IR(On,C,N)}function P4(C,N,y){return wi(Boolean,L=>L)($r,C,N,y)}var Lf=S(P4,3);function x4(C,N,y,L){return wi(Boolean,v=>v)(V(N),C,y,L)}var Df=S(x4,4);function M4(C,N,y){return wi(Boolean,L=>L)(On,C,N,y)}var Pf=S(M4,3);function v4(C,N,y){var L=p(N);return uf(C,(U,F)=>{L(U,(W,Y)=>{if(W)return F(W);F(W,{value:U,criteria:Y})})},(U,F)=>{if(U)return y(U);y(null,F.sort(v).map(W=>W.value))});function v(U,F){var W=U.criteria,Y=F.criteria;return W<Y?-1:W>Y?1:0}}var c0=S(v4,3);function u0(C,N,y){var L=p(C);return r((v,U)=>{var F=!1,W;function Y(){var ee=C.name||"anonymous",Ue=new Error('Callback function "'+ee+'" timed out.');Ue.code="ETIMEDOUT",y&&(Ue.info=y),F=!0,U(Ue)}v.push((...ee)=>{F||(U(...ee),clearTimeout(W))}),W=setTimeout(Y,N),L(...v)})}function U4(C){for(var N=Array(C);C--;)N[C]=C;return N}function xf(C,N,y,L){var v=p(y);return wc(U4(C),N,v,L)}function d0(C,N,y){return xf(C,1/0,N,y)}function f0(C,N,y){return xf(C,1,N,y)}function E0(C,N,y,L){arguments.length<=3&&typeof N=="function"&&(L=y,y=N,N=Array.isArray(C)?[]:{}),L=w(L||La());var v=p(y);return $r(C,(U,F,W)=>{v(N,U,F,W)},U=>L(U,N)),L[wa]}function B4(C,N){var y=null,L;return Pc(C,(v,U)=>{p(v)((F,...W)=>{if(F===!1)return U(F);W.length<2?[L]=W:L=W,y=F,U(F?null:{})})},()=>N(y,L))}var h0=S(B4);function T0(C){return(...N)=>(C.unmemoized||C)(...N)}function F4(C,N,y){y=B(y);var L=p(N),v=p(C),U=[];function F(Y,...ee){if(Y)return y(Y);U=ee,Y!==!1&&v(W)}function W(Y,ee){if(Y)return y(Y);if(Y!==!1){if(!ee)return y(null,...U);L(F)}}return v(W)}var xc=S(F4,3);function p0(C,N,y){let L=p(C);return xc(v=>L((U,F)=>v(U,!F)),N,y)}function G4(C,N){if(N=w(N),!Array.isArray(C))return N(new Error("First argument to waterfall must be an array of functions"));if(!C.length)return N();var y=0;function L(U){var F=p(C[y++]);F(...U,B(v))}function v(U,...F){if(U!==!1){if(U||y===C.length)return N(U,...F);L(F)}}L([])}var S0=S(G4),H4={apply:e,applyEach:Lb,applyEachSeries:Db,asyncify:u,auto:RR,autoInject:Pb,cargo:Mb,cargoQueue:vb,compose:Ub,concat:df,concatLimit:Da,concatSeries:ff,constant:Bb,detect:Ef,detectLimit:hf,detectSeries:Tf,dir:Gb,doUntil:Hb,doWhilst:Lc,each:pf,eachLimit:Dc,eachOf:$r,eachOfLimit:re,eachOfSeries:On,eachSeries:Pc,ensureAsync:_R,every:Sf,everyLimit:Rf,everySeries:Af,filter:_f,filterLimit:If,filterSeries:gf,forever:kb,groupBy:$b,groupByLimit:Nf,groupBySeries:Yb,log:Vb,map:uf,mapLimit:wc,mapSeries:SR,mapValues:qb,mapValuesLimit:Of,mapValuesSeries:Xb,memoize:jb,nextTick:zb,parallel:Kb,parallelLimit:Jb,priorityQueue:Zb,queue:gR,race:e0,reduce:ps,reduceRight:yf,reflect:bf,reflectAll:t0,reject:r0,rejectLimit:n0,rejectSeries:i0,retry:wf,retryable:a0,seq:mR,series:l0,setImmediate:c,some:Lf,someLimit:Df,someSeries:Pf,sortBy:c0,timeout:u0,times:d0,timesLimit:xf,timesSeries:f0,transform:E0,tryEach:h0,unmemoize:T0,until:p0,waterfall:S0,whilst:xc,all:Sf,allLimit:Rf,allSeries:Af,any:Lf,anyLimit:Df,anySeries:Pf,find:Ef,findLimit:hf,findSeries:Tf,flatMap:df,flatMapLimit:Da,flatMapSeries:ff,forEach:pf,forEachSeries:Pc,forEachLimit:Dc,forEachOf:$r,forEachOfSeries:On,forEachOfLimit:re,inject:ps,foldl:ps,foldr:yf,select:_f,selectLimit:If,selectSeries:gf,wrapSync:u,during:xc,doDuring:Lc};t.all=Sf,t.allLimit=Rf,t.allSeries=Af,t.any=Lf,t.anyLimit=Df,t.anySeries=Pf,t.apply=e,t.applyEach=Lb,t.applyEachSeries=Db,t.asyncify=u,t.auto=RR,t.autoInject=Pb,t.cargo=Mb,t.cargoQueue=vb,t.compose=Ub,t.concat=df,t.concatLimit=Da,t.concatSeries=ff,t.constant=Bb,t.default=H4,t.detect=Ef,t.detectLimit=hf,t.detectSeries=Tf,t.dir=Gb,t.doDuring=Lc,t.doUntil=Hb,t.doWhilst=Lc,t.during=xc,t.each=pf,t.eachLimit=Dc,t.eachOf=$r,t.eachOfLimit=re,t.eachOfSeries=On,t.eachSeries=Pc,t.ensureAsync=_R,t.every=Sf,t.everyLimit=Rf,t.everySeries=Af,t.filter=_f,t.filterLimit=If,t.filterSeries=gf,t.find=Ef,t.findLimit=hf,t.findSeries=Tf,t.flatMap=df,t.flatMapLimit=Da,t.flatMapSeries=ff,t.foldl=ps,t.foldr=yf,t.forEach=pf,t.forEachLimit=Dc,t.forEachOf=$r,t.forEachOfLimit=re,t.forEachOfSeries=On,t.forEachSeries=Pc,t.forever=kb,t.groupBy=$b,t.groupByLimit=Nf,t.groupBySeries=Yb,t.inject=ps,t.log=Vb,t.map=uf,t.mapLimit=wc,t.mapSeries=SR,t.mapValues=qb,t.mapValuesLimit=Of,t.mapValuesSeries=Xb,t.memoize=jb,t.nextTick=zb,t.parallel=Kb,t.parallelLimit=Jb,t.priorityQueue=Zb,t.queue=gR,t.race=e0,t.reduce=ps,t.reduceRight=yf,t.reflect=bf,t.reflectAll=t0,t.reject=r0,t.rejectLimit=n0,t.rejectSeries=i0,t.retry=wf,t.retryable=a0,t.select=_f,t.selectLimit=If,t.selectSeries=gf,t.seq=mR,t.series=l0,t.setImmediate=c,t.some=Lf,t.someLimit=Df,t.someSeries=Pf,t.sortBy=c0,t.timeout=u0,t.times=d0,t.timesLimit=xf,t.timesSeries=f0,t.transform=E0,t.tryEach=h0,t.unmemoize=T0,t.until=p0,t.waterfall=S0,t.whilst=xc,t.wrapSync=u,Object.defineProperty(t,"__esModule",{value:!0})}))});var Jw=O((QDe,Kw)=>{var Is=require("constants"),pJ=process.cwd,SE=null,SJ=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return SE||(SE=pJ.call(process)),SE};try{process.cwd()}catch{}typeof process.chdir=="function"&&(RA=process.chdir,process.chdir=function(t){SE=null,RA.call(process,t)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,RA));var RA;Kw.exports=RJ;function RJ(t){Is.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&e(t),t.lutimes||r(t),t.chown=s(t.chown),t.fchown=s(t.fchown),t.lchown=s(t.lchown),t.chmod=n(t.chmod),t.fchmod=n(t.fchmod),t.lchmod=n(t.lchmod),t.chownSync=o(t.chownSync),t.fchownSync=o(t.fchownSync),t.lchownSync=o(t.lchownSync),t.chmodSync=i(t.chmodSync),t.fchmodSync=i(t.fchmodSync),t.lchmodSync=i(t.lchmodSync),t.stat=a(t.stat),t.fstat=a(t.fstat),t.lstat=a(t.lstat),t.statSync=l(t.statSync),t.fstatSync=l(t.fstatSync),t.lstatSync=l(t.lstatSync),t.chmod&&!t.lchmod&&(t.lchmod=function(u,d,E){E&&process.nextTick(E)},t.lchmodSync=function(){}),t.chown&&!t.lchown&&(t.lchown=function(u,d,E,f){f&&process.nextTick(f)},t.lchownSync=function(){}),SJ==="win32"&&(t.rename=typeof t.rename!="function"?t.rename:(function(u){function d(E,f,T){var h=Date.now(),p=0;u(E,f,function S(m){if(m&&(m.code==="EACCES"||m.code==="EPERM"||m.code==="EBUSY")&&Date.now()-h<6e4){setTimeout(function(){t.stat(f,function(R,A){R&&R.code==="ENOENT"?u(E,f,S):T(m)})},p),p<100&&(p+=10);return}T&&T(m)})}return Object.setPrototypeOf&&Object.setPrototypeOf(d,u),d})(t.rename)),t.read=typeof t.read!="function"?t.read:(function(u){function d(E,f,T,h,p,S){var m;if(S&&typeof S=="function"){var R=0;m=function(A,g,w){if(A&&A.code==="EAGAIN"&&R<10)return R++,u.call(t,E,f,T,h,p,m);S.apply(this,arguments)}}return u.call(t,E,f,T,h,p,m)}return Object.setPrototypeOf&&Object.setPrototypeOf(d,u),d})(t.read),t.readSync=typeof t.readSync!="function"?t.readSync:(function(u){return function(d,E,f,T,h){for(var p=0;;)try{return u.call(t,d,E,f,T,h)}catch(S){if(S.code==="EAGAIN"&&p<10){p++;continue}throw S}}})(t.readSync);function e(u){u.lchmod=function(d,E,f){u.open(d,Is.O_WRONLY|Is.O_SYMLINK,E,function(T,h){if(T){f&&f(T);return}u.fchmod(h,E,function(p){u.close(h,function(S){f&&f(p||S)})})})},u.lchmodSync=function(d,E){var f=u.openSync(d,Is.O_WRONLY|Is.O_SYMLINK,E),T=!0,h;try{h=u.fchmodSync(f,E),T=!1}finally{if(T)try{u.closeSync(f)}catch{}else u.closeSync(f)}return h}}function r(u){Is.hasOwnProperty("O_SYMLINK")&&u.futimes?(u.lutimes=function(d,E,f,T){u.open(d,Is.O_SYMLINK,function(h,p){if(h){T&&T(h);return}u.futimes(p,E,f,function(S){u.close(p,function(m){T&&T(S||m)})})})},u.lutimesSync=function(d,E,f){var T=u.openSync(d,Is.O_SYMLINK),h,p=!0;try{h=u.futimesSync(T,E,f),p=!1}finally{if(p)try{u.closeSync(T)}catch{}else u.closeSync(T)}return h}):u.futimes&&(u.lutimes=function(d,E,f,T){T&&process.nextTick(T)},u.lutimesSync=function(){})}function n(u){return u&&function(d,E,f){return u.call(t,d,E,function(T){c(T)&&(T=null),f&&f.apply(this,arguments)})}}function i(u){return u&&function(d,E){try{return u.call(t,d,E)}catch(f){if(!c(f))throw f}}}function s(u){return u&&function(d,E,f,T){return u.call(t,d,E,f,function(h){c(h)&&(h=null),T&&T.apply(this,arguments)})}}function o(u){return u&&function(d,E,f){try{return u.call(t,d,E,f)}catch(T){if(!c(T))throw T}}}function a(u){return u&&function(d,E,f){typeof E=="function"&&(f=E,E=null);function T(h,p){p&&(p.uid<0&&(p.uid+=4294967296),p.gid<0&&(p.gid+=4294967296)),f&&f.apply(this,arguments)}return E?u.call(t,d,E,T):u.call(t,d,T)}}function l(u){return u&&function(d,E){var f=E?u.call(t,d,E):u.call(t,d);return f&&(f.uid<0&&(f.uid+=4294967296),f.gid<0&&(f.gid+=4294967296)),f}}function c(u){if(!u||u.code==="ENOSYS")return!0;var d=!process.getuid||process.getuid()!==0;return!!(d&&(u.code==="EINVAL"||u.code==="EPERM"))}}});var eL=O((ZDe,Zw)=>{var Qw=require("stream").Stream;Zw.exports=AJ;function AJ(t){return{ReadStream:e,WriteStream:r};function e(n,i){if(!(this instanceof e))return new e(n,i);Qw.call(this);var s=this;this.path=n,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,i=i||{};for(var o=Object.keys(i),a=0,l=o.length;a<l;a++){var c=o[a];this[c]=i[c]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){s._read()});return}t.open(this.path,this.flags,this.mode,function(u,d){if(u){s.emit("error",u),s.readable=!1;return}s.fd=d,s.emit("open",d),s._read()})}function r(n,i){if(!(this instanceof r))return new r(n,i);Qw.call(this),this.path=n,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,i=i||{};for(var s=Object.keys(i),o=0,a=s.length;o<a;o++){var l=s[o];this[l]=i[l]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=t.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}});var rL=O((ePe,tL)=>{"use strict";tL.exports=_J;var mJ=Object.getPrototypeOf||function(t){return t.__proto__};function _J(t){if(t===null||typeof t!="object")return t;if(t instanceof Object)var e={__proto__:mJ(t)};else var e=Object.create(null);return Object.getOwnPropertyNames(t).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}});var IA=O((tPe,_A)=>{var Et=require("fs"),IJ=Jw(),gJ=eL(),NJ=rL(),RE=require("util"),ur,mE;typeof Symbol=="function"&&typeof Symbol.for=="function"?(ur=Symbol.for("graceful-fs.queue"),mE=Symbol.for("graceful-fs.previous")):(ur="___graceful-fs.queue",mE="___graceful-fs.previous");function OJ(){}function sL(t,e){Object.defineProperty(t,ur,{get:function(){return e}})}var fo=OJ;RE.debuglog?fo=RE.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(fo=function(){var t=RE.format.apply(RE,arguments);t="GFS4: "+t.split(/\n/).join(`
GFS4: `),console.error(t)});Et[ur]||(nL=global[ur]||[],sL(Et,nL),Et.close=(function(t){function e(r,n){return t.call(Et,r,function(i){i||iL(),typeof n=="function"&&n.apply(this,arguments)})}return Object.defineProperty(e,mE,{value:t}),e})(Et.close),Et.closeSync=(function(t){function e(r){t.apply(Et,arguments),iL()}return Object.defineProperty(e,mE,{value:t}),e})(Et.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){fo(Et[ur]),require("assert").equal(Et[ur].length,0)}));var nL;global[ur]||sL(global,Et[ur]);_A.exports=AA(NJ(Et));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!Et.__patched&&(_A.exports=AA(Et),Et.__patched=!0);function AA(t){IJ(t),t.gracefulify=AA,t.createReadStream=g,t.createWriteStream=w;var e=t.readFile;t.readFile=r;function r(b,P,M){return typeof P=="function"&&(M=P,P=null),B(b,P,M);function B(G,V,J,re){return e(G,V,function(te){te&&(te.code==="EMFILE"||te.code==="ENFILE")?ka([B,[G,V,J],te,re||Date.now(),Date.now()]):typeof J=="function"&&J.apply(this,arguments)})}}var n=t.writeFile;t.writeFile=i;function i(b,P,M,B){return typeof M=="function"&&(B=M,M=null),G(b,P,M,B);function G(V,J,re,te,Be){return n(V,J,re,function(fe){fe&&(fe.code==="EMFILE"||fe.code==="ENFILE")?ka([G,[V,J,re,te],fe,Be||Date.now(),Date.now()]):typeof te=="function"&&te.apply(this,arguments)})}}var s=t.appendFile;s&&(t.appendFile=o);function o(b,P,M,B){return typeof M=="function"&&(B=M,M=null),G(b,P,M,B);function G(V,J,re,te,Be){return s(V,J,re,function(fe){fe&&(fe.code==="EMFILE"||fe.code==="ENFILE")?ka([G,[V,J,re,te],fe,Be||Date.now(),Date.now()]):typeof te=="function"&&te.apply(this,arguments)})}}var a=t.copyFile;a&&(t.copyFile=l);function l(b,P,M,B){return typeof M=="function"&&(B=M,M=0),G(b,P,M,B);function G(V,J,re,te,Be){return a(V,J,re,function(fe){fe&&(fe.code==="EMFILE"||fe.code==="ENFILE")?ka([G,[V,J,re,te],fe,Be||Date.now(),Date.now()]):typeof te=="function"&&te.apply(this,arguments)})}}var c=t.readdir;t.readdir=d;var u=/^v[0-5]\./;function d(b,P,M){typeof P=="function"&&(M=P,P=null);var B=u.test(process.version)?function(J,re,te,Be){return c(J,G(J,re,te,Be))}:function(J,re,te,Be){return c(J,re,G(J,re,te,Be))};return B(b,P,M);function G(V,J,re,te){return function(Be,fe){Be&&(Be.code==="EMFILE"||Be.code==="ENFILE")?ka([B,[V,J,re],Be,te||Date.now(),Date.now()]):(fe&&fe.sort&&fe.sort(),typeof re=="function"&&re.call(this,Be,fe))}}}if(process.version.substr(0,4)==="v0.8"){var E=gJ(t);S=E.ReadStream,R=E.WriteStream}var f=t.ReadStream;f&&(S.prototype=Object.create(f.prototype),S.prototype.open=m);var T=t.WriteStream;T&&(R.prototype=Object.create(T.prototype),R.prototype.open=A),Object.defineProperty(t,"ReadStream",{get:function(){return S},set:function(b){S=b},enumerable:!0,configurable:!0}),Object.defineProperty(t,"WriteStream",{get:function(){return R},set:function(b){R=b},enumerable:!0,configurable:!0});var h=S;Object.defineProperty(t,"FileReadStream",{get:function(){return h},set:function(b){h=b},enumerable:!0,configurable:!0});var p=R;Object.defineProperty(t,"FileWriteStream",{get:function(){return p},set:function(b){p=b},enumerable:!0,configurable:!0});function S(b,P){return this instanceof S?(f.apply(this,arguments),this):S.apply(Object.create(S.prototype),arguments)}function m(){var b=this;D(b.path,b.flags,b.mode,function(P,M){P?(b.autoClose&&b.destroy(),b.emit("error",P)):(b.fd=M,b.emit("open",M),b.read())})}function R(b,P){return this instanceof R?(T.apply(this,arguments),this):R.apply(Object.create(R.prototype),arguments)}function A(){var b=this;D(b.path,b.flags,b.mode,function(P,M){P?(b.destroy(),b.emit("error",P)):(b.fd=M,b.emit("open",M))})}function g(b,P){return new t.ReadStream(b,P)}function w(b,P){return new t.WriteStream(b,P)}var I=t.open;t.open=D;function D(b,P,M,B){return typeof M=="function"&&(B=M,M=null),G(b,P,M,B);function G(V,J,re,te,Be){return I(V,J,re,function(fe,$r){fe&&(fe.code==="EMFILE"||fe.code==="ENFILE")?ka([G,[V,J,re,te],fe,Be||Date.now(),Date.now()]):typeof te=="function"&&te.apply(this,arguments)})}}return t}function ka(t){fo("ENQUEUE",t[0].name,t[1]),Et[ur].push(t),mA()}var AE;function iL(){for(var t=Date.now(),e=0;e<Et[ur].length;++e)Et[ur][e].length>2&&(Et[ur][e][3]=t,Et[ur][e][4]=t);mA()}function mA(){if(clearTimeout(AE),AE=void 0,Et[ur].length!==0){var t=Et[ur].shift(),e=t[0],r=t[1],n=t[2],i=t[3],s=t[4];if(i===void 0)fo("RETRY",e.name,r),e.apply(null,r);else if(Date.now()-i>=6e4){fo("TIMEOUT",e.name,r);var o=r.pop();typeof o=="function"&&o.call(null,n)}else{var a=Date.now()-s,l=Math.max(s-i,1),c=Math.min(l*1.2,100);a>=c?(fo("RETRY",e.name,r),e.apply(null,r.concat([i]))):Et[ur].push(t)}AE===void 0&&(AE=setTimeout(mA,0))}}});var _E=O((rPe,oL)=>{"use strict";var qn=t=>t!==null&&typeof t=="object"&&typeof t.pipe=="function";qn.writable=t=>qn(t)&&t.writable!==!1&&typeof t._write=="function"&&typeof t._writableState=="object";qn.readable=t=>qn(t)&&t.readable!==!1&&typeof t._read=="function"&&typeof t._readableState=="object";qn.duplex=t=>qn.writable(t)&&qn.readable(t);qn.transform=t=>qn.duplex(t)&&typeof t._transform=="function";oL.exports=qn});var zc=O((nPe,gA)=>{"use strict";typeof process>"u"||!process.version||process.version.indexOf("v0.")===0||process.version.indexOf("v1.")===0&&process.version.indexOf("v1.8.")!==0?gA.exports={nextTick:CJ}:gA.exports=process;function CJ(t,e,r,n){if(typeof t!="function")throw new TypeError('"callback" argument must be a function');var i=arguments.length,s,o;switch(i){case 0:case 1:return process.nextTick(t);case 2:return process.nextTick(function(){t.call(null,e)});case 3:return process.nextTick(function(){t.call(null,e,r)});case 4:return process.nextTick(function(){t.call(null,e,r,n)});default:for(s=new Array(i-1),o=0;o<s.length;)s[o++]=arguments[o];return process.nextTick(function(){t.apply(null,s)})}}});var lL=O((iPe,aL)=>{var yJ={}.toString;aL.exports=Array.isArray||function(t){return yJ.call(t)=="[object Array]"}});var NA=O((sPe,cL)=>{cL.exports=require("stream")});var Kc=O((OA,dL)=>{var IE=require("buffer"),Pi=IE.Buffer;function uL(t,e){for(var r in t)e[r]=t[r]}Pi.from&&Pi.alloc&&Pi.allocUnsafe&&Pi.allocUnsafeSlow?dL.exports=IE:(uL(IE,OA),OA.Buffer=$a);function $a(t,e,r){return Pi(t,e,r)}uL(Pi,$a);$a.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return Pi(t,e,r)};$a.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=Pi(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};$a.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Pi(t)};$a.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return IE.SlowBuffer(t)}});var Ya=O(gr=>{function bJ(t){return Array.isArray?Array.isArray(t):gE(t)==="[object Array]"}gr.isArray=bJ;function wJ(t){return typeof t=="boolean"}gr.isBoolean=wJ;function LJ(t){return t===null}gr.isNull=LJ;function DJ(t){return t==null}gr.isNullOrUndefined=DJ;function PJ(t){return typeof t=="number"}gr.isNumber=PJ;function xJ(t){return typeof t=="string"}gr.isString=xJ;function MJ(t){return typeof t=="symbol"}gr.isSymbol=MJ;function vJ(t){return t===void 0}gr.isUndefined=vJ;function UJ(t){return gE(t)==="[object RegExp]"}gr.isRegExp=UJ;function BJ(t){return typeof t=="object"&&t!==null}gr.isObject=BJ;function FJ(t){return gE(t)==="[object Date]"}gr.isDate=FJ;function GJ(t){return gE(t)==="[object Error]"||t instanceof Error}gr.isError=GJ;function HJ(t){return typeof t=="function"}gr.isFunction=HJ;function WJ(t){return t===null||typeof t=="boolean"||typeof t=="number"||typeof t=="string"||typeof t=="symbol"||typeof t>"u"}gr.isPrimitive=WJ;gr.isBuffer=require("buffer").Buffer.isBuffer;function gE(t){return Object.prototype.toString.call(t)}});var fL=O((aPe,CA)=>{typeof Object.create=="function"?CA.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:CA.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}}});var Va=O((lPe,bA)=>{try{if(yA=require("util"),typeof yA.inherits!="function")throw"";bA.exports=yA.inherits}catch{bA.exports=fL()}var yA});var hL=O((cPe,wA)=>{"use strict";function kJ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var EL=Kc().Buffer,Jc=require("util");function $J(t,e,r){t.copy(e,r)}wA.exports=(function(){function t(){kJ(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length},t.prototype.unshift=function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length},t.prototype.shift=function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(r){if(this.length===0)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=r+n.data;return i},t.prototype.concat=function(r){if(this.length===0)return EL.alloc(0);for(var n=EL.allocUnsafe(r>>>0),i=this.head,s=0;i;)$J(i.data,n,s),s+=i.data.length,i=i.next;return n},t})();Jc&&Jc.inspect&&Jc.inspect.custom&&(wA.exports.prototype[Jc.inspect.custom]=function(){var t=Jc.inspect({length:this.length});return this.constructor.name+" "+t})});var LA=O((uPe,TL)=>{"use strict";var NE=zc();function YJ(t,e){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,NE.nextTick(OE,this,t)):NE.nextTick(OE,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(s){!e&&s?r._writableState?r._writableState.errorEmitted||(r._writableState.errorEmitted=!0,NE.nextTick(OE,r,s)):NE.nextTick(OE,r,s):e&&e(s)}),this)}function VJ(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function OE(t,e){t.emit("error",e)}TL.exports={destroy:YJ,undestroy:VJ}});var SL=O((dPe,pL)=>{pL.exports=require("util").deprecate});var PA=O((fPe,OL)=>{"use strict";var Eo=zc();OL.exports=vt;function AL(t){var e=this;this.next=null,this.entry=null,this.finish=function(){c5(e,t)}}var qJ=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:Eo.nextTick,qa;vt.WritableState=Zc;var mL=Object.create(Ya());mL.inherits=Va();var XJ={deprecate:SL()},_L=NA(),yE=Kc().Buffer,jJ=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function zJ(t){return yE.from(t)}function KJ(t){return yE.isBuffer(t)||t instanceof jJ}var IL=LA();mL.inherits(vt,_L);function JJ(){}function Zc(t,e){qa=qa||ho(),t=t||{};var r=e instanceof qa;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var n=t.highWaterMark,i=t.writableHighWaterMark,s=this.objectMode?16:16*1024;n||n===0?this.highWaterMark=n:r&&(i||i===0)?this.highWaterMark=i:this.highWaterMark=s,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var o=t.decodeStrings===!1;this.decodeStrings=!o,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(a){i5(e,a)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new AL(this)}Zc.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r};(function(){try{Object.defineProperty(Zc.prototype,"buffer",{get:XJ.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var CE;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(CE=Function.prototype[Symbol.hasInstance],Object.defineProperty(vt,Symbol.hasInstance,{value:function(t){return CE.call(this,t)?!0:this!==vt?!1:t&&t._writableState instanceof Zc}})):CE=function(t){return t instanceof this};function vt(t){if(qa=qa||ho(),!CE.call(vt,this)&&!(this instanceof qa))return new vt(t);this._writableState=new Zc(t,this),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),_L.call(this)}vt.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function QJ(t,e){var r=new Error("write after end");t.emit("error",r),Eo.nextTick(e,r)}function ZJ(t,e,r,n){var i=!0,s=!1;return r===null?s=new TypeError("May not write null values to stream"):typeof r!="string"&&r!==void 0&&!e.objectMode&&(s=new TypeError("Invalid non-string/buffer chunk")),s&&(t.emit("error",s),Eo.nextTick(n,s),i=!1),i}vt.prototype.write=function(t,e,r){var n=this._writableState,i=!1,s=!n.objectMode&&KJ(t);return s&&!yE.isBuffer(t)&&(t=zJ(t)),typeof e=="function"&&(r=e,e=null),s?e="buffer":e||(e=n.defaultEncoding),typeof r!="function"&&(r=JJ),n.ended?QJ(this,r):(s||ZJ(this,n,t,r))&&(n.pendingcb++,i=t5(this,n,s,t,e,r)),i};vt.prototype.cork=function(){var t=this._writableState;t.corked++};vt.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&gL(this,t))};vt.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this};function e5(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=yE.from(e,r)),e}Object.defineProperty(vt.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function t5(t,e,r,n,i,s){if(!r){var o=e5(e,n,i);n!==o&&(r=!0,i="buffer",n=o)}var a=e.objectMode?1:n.length;e.length+=a;var l=e.length<e.highWaterMark;if(l||(e.needDrain=!0),e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:s,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else DA(t,e,!1,a,n,i,s);return l}function DA(t,e,r,n,i,s,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,r?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function r5(t,e,r,n,i){--e.pendingcb,r?(Eo.nextTick(i,n),Eo.nextTick(Qc,t,e),t._writableState.errorEmitted=!0,t.emit("error",n)):(i(n),t._writableState.errorEmitted=!0,t.emit("error",n),Qc(t,e))}function n5(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function i5(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if(n5(r),e)r5(t,r,n,e,i);else{var s=NL(r);!s&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&gL(t,r),n?qJ(RL,t,r,s,i):RL(t,r,s,i)}}function RL(t,e,r,n){r||s5(t,e),e.pendingcb--,n(),Qc(t,e)}function s5(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function gL(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),s=e.corkedRequestsFree;s.entry=r;for(var o=0,a=!0;r;)i[o]=r,r.isBuf||(a=!1),r=r.next,o+=1;i.allBuffers=a,DA(t,e,!0,e.length,i,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new AL(e),e.bufferedRequestCount=0}else{for(;r;){var l=r.chunk,c=r.encoding,u=r.callback,d=e.objectMode?1:l.length;if(DA(t,e,!1,d,l,c,u),r=r.next,e.bufferedRequestCount--,e.writing)break}r===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}vt.prototype._write=function(t,e,r){r(new Error("_write() is not implemented"))};vt.prototype._writev=null;vt.prototype.end=function(t,e,r){var n=this._writableState;typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||l5(this,n,r)};function NL(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function o5(t,e){t._final(function(r){e.pendingcb--,r&&t.emit("error",r),e.prefinished=!0,t.emit("prefinish"),Qc(t,e)})}function a5(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"?(e.pendingcb++,e.finalCalled=!0,Eo.nextTick(o5,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function Qc(t,e){var r=NL(e);return r&&(a5(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"))),r}function l5(t,e,r){e.ending=!0,Qc(t,e),r&&(e.finished?Eo.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function c5(t,e,r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree.next=t}Object.defineProperty(vt.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}});vt.prototype.destroy=IL.destroy;vt.prototype._undestroy=IL.undestroy;vt.prototype._destroy=function(t,e){this.end(),e(t)}});var ho=O((EPe,wL)=>{"use strict";var CL=zc(),u5=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};wL.exports=xi;var yL=Object.create(Ya());yL.inherits=Va();var bL=vA(),MA=PA();yL.inherits(xi,bL);for(xA=u5(MA.prototype),bE=0;bE<xA.length;bE++)wE=xA[bE],xi.prototype[wE]||(xi.prototype[wE]=MA.prototype[wE]);var xA,wE,bE;function xi(t){if(!(this instanceof xi))return new xi(t);bL.call(this,t),MA.call(this,t),t&&t.readable===!1&&(this.readable=!1),t&&t.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,t&&t.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",d5)}Object.defineProperty(xi.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function d5(){this.allowHalfOpen||this._writableState.ended||CL.nextTick(f5,this)}function f5(t){t.end()}Object.defineProperty(xi.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(t){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=t,this._writableState.destroyed=t)}});xi.prototype._destroy=function(t,e){this.push(null),this.end(),CL.nextTick(e,t)}});var FA=O(DL=>{"use strict";var BA=Kc().Buffer,LL=BA.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function E5(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function h5(t){var e=E5(t);if(typeof e!="string"&&(BA.isEncoding===LL||!LL(t)))throw new Error("Unknown encoding: "+t);return e||t}DL.StringDecoder=eu;function eu(t){this.encoding=h5(t);var e;switch(this.encoding){case"utf16le":this.text=m5,this.end=_5,e=4;break;case"utf8":this.fillLast=S5,e=4;break;case"base64":this.text=I5,this.end=g5,e=3;break;default:this.write=N5,this.end=O5;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=BA.allocUnsafe(e)}eu.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};eu.prototype.end=A5;eu.prototype.text=R5;eu.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function UA(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function T5(t,e,r){var n=e.length-1;if(n<r)return 0;var i=UA(e[n]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--n<r||i===-2?0:(i=UA(e[n]),i>=0?(i>0&&(t.lastNeed=i-2),i):--n<r||i===-2?0:(i=UA(e[n]),i>=0?(i>0&&(i===2?i=0:t.lastNeed=i-3),i):0))}function p5(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function S5(t){var e=this.lastTotal-this.lastNeed,r=p5(this,t,e);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function R5(t,e){var r=T5(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function A5(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function m5(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function _5(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function I5(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function g5(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function N5(t){return t.toString(this.encoding)}function O5(t){return t&&t.length?this.write(t):""}});var vA=O((pPe,$L)=>{"use strict";var ja=zc();$L.exports=et;var C5=lL(),tu;et.ReadableState=FL;var TPe=require("events").EventEmitter,vL=function(t,e){return t.listeners(e).length},$A=NA(),ru=Kc().Buffer,y5=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function b5(t){return ru.from(t)}function w5(t){return ru.isBuffer(t)||t instanceof y5}var UL=Object.create(Ya());UL.inherits=Va();var GA=require("util"),qe=void 0;GA&&GA.debuglog?qe=GA.debuglog("stream"):qe=function(){};var L5=hL(),BL=LA(),Xa;UL.inherits(et,$A);var HA=["error","close","destroy","pause","resume"];function D5(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):C5(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}function FL(t,e){tu=tu||ho(),t=t||{};var r=e instanceof tu;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var n=t.highWaterMark,i=t.readableHighWaterMark,s=this.objectMode?16:16*1024;n||n===0?this.highWaterMark=n:r&&(i||i===0)?this.highWaterMark=i:this.highWaterMark=s,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new L5,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(Xa||(Xa=FA().StringDecoder),this.decoder=new Xa(t.encoding),this.encoding=t.encoding)}function et(t){if(tu=tu||ho(),!(this instanceof et))return new et(t);this._readableState=new FL(t,this),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),$A.call(this)}Object.defineProperty(et.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}});et.prototype.destroy=BL.destroy;et.prototype._undestroy=BL.undestroy;et.prototype._destroy=function(t,e){this.push(null),e(t)};et.prototype.push=function(t,e){var r=this._readableState,n;return r.objectMode?n=!0:typeof t=="string"&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=ru.from(t,e),e=""),n=!0),GL(this,t,e,!1,n)};et.prototype.unshift=function(t){return GL(this,t,null,!0,!1)};function GL(t,e,r,n,i){var s=t._readableState;if(e===null)s.reading=!1,v5(t,s);else{var o;i||(o=P5(s,e)),o?t.emit("error",o):s.objectMode||e&&e.length>0?(typeof e!="string"&&!s.objectMode&&Object.getPrototypeOf(e)!==ru.prototype&&(e=b5(e)),n?s.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):WA(t,s,e,!0):s.ended?t.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!r?(e=s.decoder.write(e),s.objectMode||e.length!==0?WA(t,s,e,!1):HL(t,s)):WA(t,s,e,!1))):n||(s.reading=!1)}return x5(s)}function WA(t,e,r,n){e.flowing&&e.length===0&&!e.sync?(t.emit("data",r),t.read(0)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&LE(t)),HL(t,e)}function P5(t,e){var r;return!w5(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(r=new TypeError("Invalid non-string/buffer chunk")),r}function x5(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||t.length===0)}et.prototype.isPaused=function(){return this._readableState.flowing===!1};et.prototype.setEncoding=function(t){return Xa||(Xa=FA().StringDecoder),this._readableState.decoder=new Xa(t),this._readableState.encoding=t,this};var PL=8388608;function M5(t){return t>=PL?t=PL:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function xL(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=M5(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}et.prototype.read=function(t){qe("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return qe("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?kA(this):LE(this),null;if(t=xL(t,e),t===0&&e.ended)return e.length===0&&kA(this),null;var n=e.needReadable;qe("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,qe("length less than watermark",n)),e.ended||e.reading?(n=!1,qe("reading or ended",n)):n&&(qe("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=xL(r,e)));var i;return t>0?i=WL(t,e):i=null,i===null?(e.needReadable=!0,t=0):e.length-=t,e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&kA(this)),i!==null&&this.emit("data",i),i};function v5(t,e){if(!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,LE(t)}}function LE(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(qe("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?ja.nextTick(ML,t):ML(t))}function ML(t){qe("emit readable"),t.emit("readable"),YA(t)}function HL(t,e){e.readingMore||(e.readingMore=!0,ja.nextTick(U5,t,e))}function U5(t,e){for(var r=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(qe("maybeReadMore read 0"),t.read(0),r!==e.length);)r=e.length;e.readingMore=!1}et.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))};et.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t);break}n.pipesCount+=1,qe("pipe count=%d opts=%j",n.pipesCount,e);var i=(!e||e.end!==!1)&&t!==process.stdout&&t!==process.stderr,s=i?a:p;n.endEmitted?ja.nextTick(s):r.once("end",s),t.on("unpipe",o);function o(S,m){qe("onunpipe"),S===r&&m&&m.hasUnpiped===!1&&(m.hasUnpiped=!0,u())}function a(){qe("onend"),t.end()}var l=B5(r);t.on("drain",l);var c=!1;function u(){qe("cleanup"),t.removeListener("close",T),t.removeListener("finish",h),t.removeListener("drain",l),t.removeListener("error",f),t.removeListener("unpipe",o),r.removeListener("end",a),r.removeListener("end",p),r.removeListener("data",E),c=!0,n.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&l()}var d=!1;r.on("data",E);function E(S){qe("ondata"),d=!1;var m=t.write(S);m===!1&&!d&&((n.pipesCount===1&&n.pipes===t||n.pipesCount>1&&kL(n.pipes,t)!==-1)&&!c&&(qe("false write response, pause",n.awaitDrain),n.awaitDrain++,d=!0),r.pause())}function f(S){qe("onerror",S),p(),t.removeListener("error",f),vL(t,"error")===0&&t.emit("error",S)}D5(t,"error",f);function T(){t.removeListener("finish",h),p()}t.once("close",T);function h(){qe("onfinish"),t.removeListener("close",T),p()}t.once("finish",h);function p(){qe("unpipe"),r.unpipe(t)}return t.emit("pipe",r),n.flowing||(qe("pipe resume"),r.resume()),t};function B5(t){return function(){var e=t._readableState;qe("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,e.awaitDrain===0&&vL(t,"data")&&(e.flowing=!0,YA(t))}}et.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var s=0;s<i;s++)n[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=kL(e.pipes,t);return o===-1?this:(e.pipes.splice(o,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)};et.prototype.on=function(t,e){var r=$A.prototype.on.call(this,t,e);if(t==="data")this._readableState.flowing!==!1&&this.resume();else if(t==="readable"){var n=this._readableState;!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&LE(this):ja.nextTick(F5,this))}return r};et.prototype.addListener=et.prototype.on;function F5(t){qe("readable nexttick read 0"),t.read(0)}et.prototype.resume=function(){var t=this._readableState;return t.flowing||(qe("resume"),t.flowing=!0,G5(this,t)),this};function G5(t,e){e.resumeScheduled||(e.resumeScheduled=!0,ja.nextTick(H5,t,e))}function H5(t,e){e.reading||(qe("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),YA(t),e.flowing&&!e.reading&&t.read(0)}et.prototype.pause=function(){return qe("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(qe("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function YA(t){var e=t._readableState;for(qe("flow",e.flowing);e.flowing&&t.read()!==null;);}et.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;t.on("end",function(){if(qe("wrapped end"),r.decoder&&!r.ended){var o=r.decoder.end();o&&o.length&&e.push(o)}e.push(null)}),t.on("data",function(o){if(qe("wrapped data"),r.decoder&&(o=r.decoder.write(o)),!(r.objectMode&&o==null)&&!(!r.objectMode&&(!o||!o.length))){var a=e.push(o);a||(n=!0,t.pause())}});for(var i in t)this[i]===void 0&&typeof t[i]=="function"&&(this[i]=(function(o){return function(){return t[o].apply(t,arguments)}})(i));for(var s=0;s<HA.length;s++)t.on(HA[s],this.emit.bind(this,HA[s]));return this._read=function(o){qe("wrapped _read",o),n&&(n=!1,t.resume())},this};Object.defineProperty(et.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});et._fromList=WL;function WL(t,e){if(e.length===0)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.head.data:r=e.buffer.concat(e.length),e.buffer.clear()):r=W5(t,e.buffer,e.decoder),r}function W5(t,e,r){var n;return t<e.head.data.length?(n=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):t===e.head.data.length?n=e.shift():n=r?k5(t,e):$5(t,e),n}function k5(t,e){var r=e.head,n=1,i=r.data;for(t-=i.length;r=r.next;){var s=r.data,o=t>s.length?s.length:t;if(o===s.length?i+=s:i+=s.slice(0,t),t-=o,t===0){o===s.length?(++n,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=s.slice(o));break}++n}return e.length-=n,i}function $5(t,e){var r=ru.allocUnsafe(t),n=e.head,i=1;for(n.data.copy(r),t-=n.data.length;n=n.next;){var s=n.data,o=t>s.length?s.length:t;if(s.copy(r,r.length-t,0,o),t-=o,t===0){o===s.length?(++i,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=s.slice(o));break}++i}return e.length-=i,r}function kA(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,ja.nextTick(Y5,e,t))}function Y5(t,e){!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function kL(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}});var VA=O((SPe,qL)=>{"use strict";qL.exports=Mi;var DE=ho(),VL=Object.create(Ya());VL.inherits=Va();VL.inherits(Mi,DE);function V5(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,e!=null&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function Mi(t){if(!(this instanceof Mi))return new Mi(t);DE.call(this,t),this._transformState={afterTransform:V5.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",q5)}function q5(){var t=this;typeof this._flush=="function"?this._flush(function(e,r){YL(t,e,r)}):YL(this,null,null)}Mi.prototype.push=function(t,e){return this._transformState.needTransform=!1,DE.prototype.push.call(this,t,e)};Mi.prototype._transform=function(t,e,r){throw new Error("_transform() is not implemented")};Mi.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};Mi.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};Mi.prototype._destroy=function(t,e){var r=this;DE.prototype._destroy.call(this,t,function(n){e(n),r.emit("close")})};function YL(t,e,r){if(e)return t.emit("error",e);if(r!=null&&t.push(r),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}});var KL=O((RPe,zL)=>{"use strict";zL.exports=nu;var XL=VA(),jL=Object.create(Ya());jL.inherits=Va();jL.inherits(nu,XL);function nu(t){if(!(this instanceof nu))return new nu(t);XL.call(this,t)}nu.prototype._transform=function(t,e,r){r(null,t)}});var JL=O((dr,PE)=>{var Xn=require("stream");process.env.READABLE_STREAM==="disable"&&Xn?(PE.exports=Xn,dr=PE.exports=Xn.Readable,dr.Readable=Xn.Readable,dr.Writable=Xn.Writable,dr.Duplex=Xn.Duplex,dr.Transform=Xn.Transform,dr.PassThrough=Xn.PassThrough,dr.Stream=Xn):(dr=PE.exports=vA(),dr.Stream=Xn||dr,dr.Readable=dr,dr.Writable=PA(),dr.Duplex=ho(),dr.Transform=VA(),dr.PassThrough=KL())});var ZL=O((APe,QL)=>{QL.exports=JL().PassThrough});var nD=O((mPe,rD)=>{var eD=require("util"),vE=ZL();rD.exports={Readable:xE,Writable:ME};eD.inherits(xE,vE);eD.inherits(ME,vE);function tD(t,e,r){t[e]=function(){return delete t[e],r.apply(this,arguments),this[e].apply(this,arguments)}}function xE(t,e){if(!(this instanceof xE))return new xE(t,e);vE.call(this,e),tD(this,"_read",function(){var r=t.call(this,e),n=this.emit.bind(this,"error");r.on("error",n),r.pipe(this)}),this.emit("readable")}function ME(t,e){if(!(this instanceof ME))return new ME(t,e);vE.call(this,e),tD(this,"_write",function(){var r=t.call(this,e),n=this.emit.bind(this,"error");r.on("error",n),this.pipe(r)}),this.emit("writable")}});var qA=O((_Pe,iD)=>{iD.exports=function(t,e){if(typeof t!="string")throw new TypeError("expected path to be a string");if(t==="\\"||t==="/")return"/";var r=t.length;if(r<=1)return t;var n="";if(r>4&&t[3]==="\\"){var i=t[2];(i==="?"||i===".")&&t.slice(0,2)==="\\\\"&&(t=t.slice(2),n="//")}var s=t.split(/[/\\]+/);return e!==!1&&s[s.length-1]===""&&s.pop(),n+s.join("/")}});var XA=O((IPe,sD)=>{function X5(t){return t}sD.exports=X5});var aD=O((gPe,oD)=>{function j5(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}oD.exports=j5});var uD=O((NPe,cD)=>{var z5=aD(),lD=Math.max;function K5(t,e,r){return e=lD(e===void 0?t.length-1:e,0),function(){for(var n=arguments,i=-1,s=lD(n.length-e,0),o=Array(s);++i<s;)o[i]=n[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=n[i];return a[e]=r(o),z5(t,this,a)}}cD.exports=K5});var fD=O((OPe,dD)=>{function J5(t){return function(){return t}}dD.exports=J5});var jA=O((CPe,ED)=>{var Q5=typeof global=="object"&&global&&global.Object===Object&&global;ED.exports=Q5});var za=O((yPe,hD)=>{var Z5=jA(),eQ=typeof self=="object"&&self&&self.Object===Object&&self,tQ=Z5||eQ||Function("return this")();hD.exports=tQ});var UE=O((bPe,TD)=>{var rQ=za(),nQ=rQ.Symbol;TD.exports=nQ});var AD=O((wPe,RD)=>{var pD=UE(),SD=Object.prototype,iQ=SD.hasOwnProperty,sQ=SD.toString,iu=pD?pD.toStringTag:void 0;function oQ(t){var e=iQ.call(t,iu),r=t[iu];try{t[iu]=void 0;var n=!0}catch{}var i=sQ.call(t);return n&&(e?t[iu]=r:delete t[iu]),i}RD.exports=oQ});var _D=O((LPe,mD)=>{var aQ=Object.prototype,lQ=aQ.toString;function cQ(t){return lQ.call(t)}mD.exports=cQ});var su=O((DPe,ND)=>{var ID=UE(),uQ=AD(),dQ=_D(),fQ="[object Null]",EQ="[object Undefined]",gD=ID?ID.toStringTag:void 0;function hQ(t){return t==null?t===void 0?EQ:fQ:gD&&gD in Object(t)?uQ(t):dQ(t)}ND.exports=hQ});var ou=O((PPe,OD)=>{function TQ(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}OD.exports=TQ});var zA=O((xPe,CD)=>{var pQ=su(),SQ=ou(),RQ="[object AsyncFunction]",AQ="[object Function]",mQ="[object GeneratorFunction]",_Q="[object Proxy]";function IQ(t){if(!SQ(t))return!1;var e=pQ(t);return e==AQ||e==mQ||e==RQ||e==_Q}CD.exports=IQ});var bD=O((MPe,yD)=>{var gQ=za(),NQ=gQ["__core-js_shared__"];yD.exports=NQ});var DD=O((vPe,LD)=>{var KA=bD(),wD=(function(){var t=/[^.]+$/.exec(KA&&KA.keys&&KA.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""})();function OQ(t){return!!wD&&wD in t}LD.exports=OQ});var xD=O((UPe,PD)=>{var CQ=Function.prototype,yQ=CQ.toString;function bQ(t){if(t!=null){try{return yQ.call(t)}catch{}try{return t+""}catch{}}return""}PD.exports=bQ});var vD=O((BPe,MD)=>{var wQ=zA(),LQ=DD(),DQ=ou(),PQ=xD(),xQ=/[\\^$.*+?()[\]{}|]/g,MQ=/^\[object .+?Constructor\]$/,vQ=Function.prototype,UQ=Object.prototype,BQ=vQ.toString,FQ=UQ.hasOwnProperty,GQ=RegExp("^"+BQ.call(FQ).replace(xQ,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function HQ(t){if(!DQ(t)||LQ(t))return!1;var e=wQ(t)?GQ:MQ;return e.test(PQ(t))}MD.exports=HQ});var BD=O((FPe,UD)=>{function WQ(t,e){return t?.[e]}UD.exports=WQ});var au=O((GPe,FD)=>{var kQ=vD(),$Q=BD();function YQ(t,e){var r=$Q(t,e);return kQ(r)?r:void 0}FD.exports=YQ});var HD=O((HPe,GD)=>{var VQ=au(),qQ=(function(){try{var t=VQ(Object,"defineProperty");return t({},"",{}),t}catch{}})();GD.exports=qQ});var $D=O((WPe,kD)=>{var XQ=fD(),WD=HD(),jQ=XA(),zQ=WD?function(t,e){return WD(t,"toString",{configurable:!0,enumerable:!1,value:XQ(e),writable:!0})}:jQ;kD.exports=zQ});var VD=O((kPe,YD)=>{var KQ=800,JQ=16,QQ=Date.now;function ZQ(t){var e=0,r=0;return function(){var n=QQ(),i=JQ-(n-r);if(r=n,i>0){if(++e>=KQ)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}YD.exports=ZQ});var XD=O(($Pe,qD)=>{var e9=$D(),t9=VD(),r9=t9(e9);qD.exports=r9});var BE=O((YPe,jD)=>{var n9=XA(),i9=uD(),s9=XD();function o9(t,e){return s9(i9(t,e,n9),t+"")}jD.exports=o9});var FE=O((VPe,zD)=>{function a9(t,e){return t===e||t!==t&&e!==e}zD.exports=a9});var JA=O((qPe,KD)=>{var l9=9007199254740991;function c9(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=l9}KD.exports=c9});var GE=O((XPe,JD)=>{var u9=zA(),d9=JA();function f9(t){return t!=null&&d9(t.length)&&!u9(t)}JD.exports=f9});var QA=O((jPe,QD)=>{var E9=9007199254740991,h9=/^(?:0|[1-9]\d*)$/;function T9(t,e){var r=typeof t;return e=e??E9,!!e&&(r=="number"||r!="symbol"&&h9.test(t))&&t>-1&&t%1==0&&t<e}QD.exports=T9});var eP=O((zPe,ZD)=>{var p9=FE(),S9=GE(),R9=QA(),A9=ou();function m9(t,e,r){if(!A9(r))return!1;var n=typeof e;return(n=="number"?S9(r)&&R9(e,r.length):n=="string"&&e in r)?p9(r[e],t):!1}ZD.exports=m9});var rP=O((KPe,tP)=>{function _9(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}tP.exports=_9});var Ka=O((JPe,nP)=>{function I9(t){return t!=null&&typeof t=="object"}nP.exports=I9});var sP=O((QPe,iP)=>{var g9=su(),N9=Ka(),O9="[object Arguments]";function C9(t){return N9(t)&&g9(t)==O9}iP.exports=C9});var ZA=O((ZPe,lP)=>{var oP=sP(),y9=Ka(),aP=Object.prototype,b9=aP.hasOwnProperty,w9=aP.propertyIsEnumerable,L9=oP((function(){return arguments})())?oP:function(t){return y9(t)&&b9.call(t,"callee")&&!w9.call(t,"callee")};lP.exports=L9});var em=O((exe,cP)=>{var D9=Array.isArray;cP.exports=D9});var dP=O((txe,uP)=>{function P9(){return!1}uP.exports=P9});var TP=O((lu,Ja)=>{var x9=za(),M9=dP(),hP=typeof lu=="object"&&lu&&!lu.nodeType&&lu,fP=hP&&typeof Ja=="object"&&Ja&&!Ja.nodeType&&Ja,v9=fP&&fP.exports===hP,EP=v9?x9.Buffer:void 0,U9=EP?EP.isBuffer:void 0,B9=U9||M9;Ja.exports=B9});var SP=O((rxe,pP)=>{var F9=su(),G9=JA(),H9=Ka(),W9="[object Arguments]",k9="[object Array]",$9="[object Boolean]",Y9="[object Date]",V9="[object Error]",q9="[object Function]",X9="[object Map]",j9="[object Number]",z9="[object Object]",K9="[object RegExp]",J9="[object Set]",Q9="[object String]",Z9="[object WeakMap]",e7="[object ArrayBuffer]",t7="[object DataView]",r7="[object Float32Array]",n7="[object Float64Array]",i7="[object Int8Array]",s7="[object Int16Array]",o7="[object Int32Array]",a7="[object Uint8Array]",l7="[object Uint8ClampedArray]",c7="[object Uint16Array]",u7="[object Uint32Array]",tt={};tt[r7]=tt[n7]=tt[i7]=tt[s7]=tt[o7]=tt[a7]=tt[l7]=tt[c7]=tt[u7]=!0;tt[W9]=tt[k9]=tt[e7]=tt[$9]=tt[t7]=tt[Y9]=tt[V9]=tt[q9]=tt[X9]=tt[j9]=tt[z9]=tt[K9]=tt[J9]=tt[Q9]=tt[Z9]=!1;function d7(t){return H9(t)&&G9(t.length)&&!!tt[F9(t)]}pP.exports=d7});var tm=O((nxe,RP)=>{function f7(t){return function(e){return t(e)}}RP.exports=f7});var mP=O((cu,Qa)=>{var E7=jA(),AP=typeof cu=="object"&&cu&&!cu.nodeType&&cu,uu=AP&&typeof Qa=="object"&&Qa&&!Qa.nodeType&&Qa,h7=uu&&uu.exports===AP,rm=h7&&E7.process,T7=(function(){try{var t=uu&&uu.require&&uu.require("util").types;return t||rm&&rm.binding&&rm.binding("util")}catch{}})();Qa.exports=T7});var NP=O((ixe,gP)=>{var p7=SP(),S7=tm(),_P=mP(),IP=_P&&_P.isTypedArray,R7=IP?S7(IP):p7;gP.exports=R7});var CP=O((sxe,OP)=>{var A7=rP(),m7=ZA(),_7=em(),I7=TP(),g7=QA(),N7=NP(),O7=Object.prototype,C7=O7.hasOwnProperty;function y7(t,e){var r=_7(t),n=!r&&m7(t),i=!r&&!n&&I7(t),s=!r&&!n&&!i&&N7(t),o=r||n||i||s,a=o?A7(t.length,String):[],l=a.length;for(var c in t)(e||C7.call(t,c))&&!(o&&(c=="length"||i&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||g7(c,l)))&&a.push(c);return a}OP.exports=y7});var bP=O((oxe,yP)=>{var b7=Object.prototype;function w7(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||b7;return t===r}yP.exports=w7});var LP=O((axe,wP)=>{function L7(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}wP.exports=L7});var PP=O((lxe,DP)=>{var D7=ou(),P7=bP(),x7=LP(),M7=Object.prototype,v7=M7.hasOwnProperty;function U7(t){if(!D7(t))return x7(t);var e=P7(t),r=[];for(var n in t)n=="constructor"&&(e||!v7.call(t,n))||r.push(n);return r}DP.exports=U7});var MP=O((cxe,xP)=>{var B7=CP(),F7=PP(),G7=GE();function H7(t){return G7(t)?B7(t,!0):F7(t)}xP.exports=H7});var BP=O((uxe,UP)=>{var W7=BE(),k7=FE(),$7=eP(),Y7=MP(),vP=Object.prototype,V7=vP.hasOwnProperty,q7=W7(function(t,e){t=Object(t);var r=-1,n=e.length,i=n>2?e[2]:void 0;for(i&&$7(e[0],e[1],i)&&(n=1);++r<n;)for(var s=e[r],o=Y7(s),a=-1,l=o.length;++a<l;){var c=o[a],u=t[c];(u===void 0||k7(u,vP[c])&&!V7.call(t,c))&&(t[c]=s[c])}return t});UP.exports=q7});var lt=O((dxe,FP)=>{"use strict";var nm=class extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError(`Expected input to be an Array, got ${typeof e}`);let r="";for(let n=0;n<e.length;n++)r+=`    ${e[n].stack}
`;super(r),this.name="AggregateError",this.errors=e}};FP.exports={AggregateError:nm,ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,e){return t.includes(e)},ArrayPrototypeIndexOf(t,e){return t.indexOf(e)},ArrayPrototypeJoin(t,e){return t.join(e)},ArrayPrototypeMap(t,e){return t.map(e)},ArrayPrototypePop(t,e){return t.pop(e)},ArrayPrototypePush(t,e){return t.push(e)},ArrayPrototypeSlice(t,e,r){return t.slice(e,r)},Error,FunctionPrototypeCall(t,e,...r){return t.call(e,...r)},FunctionPrototypeSymbolHasInstance(t,e){return Function.prototype[Symbol.hasInstance].call(t,e)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,e){return Object.defineProperties(t,e)},ObjectDefineProperty(t,e,r){return Object.defineProperty(t,e,r)},ObjectGetOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,e){return Object.setPrototypeOf(t,e)},Promise,PromisePrototypeCatch(t,e){return t.catch(e)},PromisePrototypeThen(t,e,r){return t.then(e,r)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,e){return t.test(e)},SafeSet:Set,String,StringPrototypeSlice(t,e,r){return t.slice(e,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,e,r){return t.set(e,r)},Boolean,Uint8Array}});var im=O((fxe,GP)=>{"use strict";GP.exports={format(t,...e){return t.replace(/%([sdifj])/g,function(...[r,n]){let i=e.shift();return n==="f"?i.toFixed(6):n==="j"?JSON.stringify(i):n==="s"&&typeof i=="object"?`${i.constructor!==Object?i.constructor.name:""} {}`.trim():i.toString()})},inspect(t){switch(typeof t){case"string":if(t.includes("'"))if(t.includes('"')){if(!t.includes("`")&&!t.includes("${"))return`\`${t}\``}else return`"${t}"`;return`'${t}'`;case"number":return isNaN(t)?"NaN":Object.is(t,-0)?String(t):t;case"bigint":return`${String(t)}n`;case"boolean":case"undefined":return String(t);case"object":return"{}"}}}});var Nr=O((Exe,kP)=>{"use strict";var{format:X7,inspect:HE}=im(),{AggregateError:j7}=lt(),z7=globalThis.AggregateError||j7,K7=Symbol("kIsNodeError"),J7=["string","function","number","object","Function","Object","boolean","bigint","symbol"],Q7=/^([A-Z][a-z0-9]*)+$/,Z7="__node_internal_",WE={};function To(t,e){if(!t)throw new WE.ERR_INTERNAL_ASSERTION(e)}function HP(t){let e="",r=t.length,n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function eZ(t,e,r){if(typeof e=="function")return To(e.length<=r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${e.length}).`),e(...r);let n=(e.match(/%[dfijoOs]/g)||[]).length;return To(n===r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${n}).`),r.length===0?e:X7(e,...r)}function fr(t,e,r){r||(r=Error);class n extends r{constructor(...s){super(eZ(t,e,s))}toString(){return`${this.name} [${t}]: ${this.message}`}}Object.defineProperties(n.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${t}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),n.prototype.code=t,n.prototype[K7]=!0,WE[t]=n}function WP(t){let e=Z7+t.name;return Object.defineProperty(t,"name",{value:e}),t}function tZ(t,e){if(t&&e&&t!==e){if(Array.isArray(e.errors))return e.errors.push(t),e;let r=new z7([e,t],e.message);return r.code=e.code,r}return t||e}var sm=class extends Error{constructor(e="The operation was aborted",r=void 0){if(r!==void 0&&typeof r!="object")throw new WE.ERR_INVALID_ARG_TYPE("options","Object",r);super(e,r),this.code="ABORT_ERR",this.name="AbortError"}};fr("ERR_ASSERTION","%s",Error);fr("ERR_INVALID_ARG_TYPE",(t,e,r)=>{To(typeof t=="string","'name' must be a string"),Array.isArray(e)||(e=[e]);let n="The ";t.endsWith(" argument")?n+=`${t} `:n+=`"${t}" ${t.includes(".")?"property":"argument"} `,n+="must be ";let i=[],s=[],o=[];for(let l of e)To(typeof l=="string","All expected entries have to be of type string"),J7.includes(l)?i.push(l.toLowerCase()):Q7.test(l)?s.push(l):(To(l!=="object",'The value "object" should be written as "Object"'),o.push(l));if(s.length>0){let l=i.indexOf("object");l!==-1&&(i.splice(i,l,1),s.push("Object"))}if(i.length>0){switch(i.length){case 1:n+=`of type ${i[0]}`;break;case 2:n+=`one of type ${i[0]} or ${i[1]}`;break;default:{let l=i.pop();n+=`one of type ${i.join(", ")}, or ${l}`}}(s.length>0||o.length>0)&&(n+=" or ")}if(s.length>0){switch(s.length){case 1:n+=`an instance of ${s[0]}`;break;case 2:n+=`an instance of ${s[0]} or ${s[1]}`;break;default:{let l=s.pop();n+=`an instance of ${s.join(", ")}, or ${l}`}}o.length>0&&(n+=" or ")}switch(o.length){case 0:break;case 1:o[0].toLowerCase()!==o[0]&&(n+="an "),n+=`${o[0]}`;break;case 2:n+=`one of ${o[0]} or ${o[1]}`;break;default:{let l=o.pop();n+=`one of ${o.join(", ")}, or ${l}`}}if(r==null)n+=`. Received ${r}`;else if(typeof r=="function"&&r.name)n+=`. Received function ${r.name}`;else if(typeof r=="object"){var a;if((a=r.constructor)!==null&&a!==void 0&&a.name)n+=`. Received an instance of ${r.constructor.name}`;else{let l=HE(r,{depth:-1});n+=`. Received ${l}`}}else{let l=HE(r,{colors:!1});l.length>25&&(l=`${l.slice(0,25)}...`),n+=`. Received type ${typeof r} (${l})`}return n},TypeError);fr("ERR_INVALID_ARG_VALUE",(t,e,r="is invalid")=>{let n=HE(e);return n.length>128&&(n=n.slice(0,128)+"..."),`The ${t.includes(".")?"property":"argument"} '${t}' ${r}. Received ${n}`},TypeError);fr("ERR_INVALID_RETURN_VALUE",(t,e,r)=>{var n;let i=r!=null&&(n=r.constructor)!==null&&n!==void 0&&n.name?`instance of ${r.constructor.name}`:`type ${typeof r}`;return`Expected ${t} to be returned from the "${e}" function but got ${i}.`},TypeError);fr("ERR_MISSING_ARGS",(...t)=>{To(t.length>0,"At least one arg needs to be specified");let e,r=t.length;switch(t=(Array.isArray(t)?t:[t]).map(n=>`"${n}"`).join(" or "),r){case 1:e+=`The ${t[0]} argument`;break;case 2:e+=`The ${t[0]} and ${t[1]} arguments`;break;default:{let n=t.pop();e+=`The ${t.join(", ")}, and ${n} arguments`}break}return`${e} must be specified`},TypeError);fr("ERR_OUT_OF_RANGE",(t,e,r)=>{To(e,'Missing "range" argument');let n;if(Number.isInteger(r)&&Math.abs(r)>2**32)n=HP(String(r));else if(typeof r=="bigint"){n=String(r);let i=BigInt(2)**BigInt(32);(r>i||r<-i)&&(n=HP(n)),n+="n"}else n=HE(r);return`The value of "${t}" is out of range. It must be ${e}. Received ${n}`},RangeError);fr("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);fr("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);fr("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);fr("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);fr("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);fr("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);fr("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);fr("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);fr("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);fr("ERR_STREAM_WRITE_AFTER_END","write after end",Error);fr("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);kP.exports={AbortError:sm,aggregateTwoErrors:WP(tZ),hideStackFrames:WP,codes:WE}});var QP=O((Eu,fu)=>{"use strict";Object.defineProperty(Eu,"__esModule",{value:!0});var jP=new WeakMap,om=new WeakMap;function rt(t){let e=jP.get(t);return console.assert(e!=null,"'this' is expected an Event object, but got",t),e}function $P(t){if(t.passiveListener!=null){typeof console<"u"&&typeof console.error=="function"&&console.error("Unable to preventDefault inside passive event listener invocation.",t.passiveListener);return}t.event.cancelable&&(t.canceled=!0,typeof t.event.preventDefault=="function"&&t.event.preventDefault())}function Za(t,e){jP.set(this,{eventTarget:t,event:e,eventPhase:2,currentTarget:t,canceled:!1,stopped:!1,immediateStopped:!1,passiveListener:null,timeStamp:e.timeStamp||Date.now()}),Object.defineProperty(this,"isTrusted",{value:!1,enumerable:!0});let r=Object.keys(e);for(let n=0;n<r.length;++n){let i=r[n];i in this||Object.defineProperty(this,i,zP(i))}}Za.prototype={get type(){return rt(this).event.type},get target(){return rt(this).eventTarget},get currentTarget(){return rt(this).currentTarget},composedPath(){let t=rt(this).currentTarget;return t==null?[]:[t]},get NONE(){return 0},get CAPTURING_PHASE(){return 1},get AT_TARGET(){return 2},get BUBBLING_PHASE(){return 3},get eventPhase(){return rt(this).eventPhase},stopPropagation(){let t=rt(this);t.stopped=!0,typeof t.event.stopPropagation=="function"&&t.event.stopPropagation()},stopImmediatePropagation(){let t=rt(this);t.stopped=!0,t.immediateStopped=!0,typeof t.event.stopImmediatePropagation=="function"&&t.event.stopImmediatePropagation()},get bubbles(){return!!rt(this).event.bubbles},get cancelable(){return!!rt(this).event.cancelable},preventDefault(){$P(rt(this))},get defaultPrevented(){return rt(this).canceled},get composed(){return!!rt(this).event.composed},get timeStamp(){return rt(this).timeStamp},get srcElement(){return rt(this).eventTarget},get cancelBubble(){return rt(this).stopped},set cancelBubble(t){if(!t)return;let e=rt(this);e.stopped=!0,typeof e.event.cancelBubble=="boolean"&&(e.event.cancelBubble=!0)},get returnValue(){return!rt(this).canceled},set returnValue(t){t||$P(rt(this))},initEvent(){}};Object.defineProperty(Za.prototype,"constructor",{value:Za,configurable:!0,writable:!0});typeof window<"u"&&typeof window.Event<"u"&&(Object.setPrototypeOf(Za.prototype,window.Event.prototype),om.set(window.Event.prototype,Za));function zP(t){return{get(){return rt(this).event[t]},set(e){rt(this).event[t]=e},configurable:!0,enumerable:!0}}function rZ(t){return{value(){let e=rt(this).event;return e[t].apply(e,arguments)},configurable:!0,enumerable:!0}}function nZ(t,e){let r=Object.keys(e);if(r.length===0)return t;function n(i,s){t.call(this,i,s)}n.prototype=Object.create(t.prototype,{constructor:{value:n,configurable:!0,writable:!0}});for(let i=0;i<r.length;++i){let s=r[i];if(!(s in t.prototype)){let a=typeof Object.getOwnPropertyDescriptor(e,s).value=="function";Object.defineProperty(n.prototype,s,a?rZ(s):zP(s))}}return n}function KP(t){if(t==null||t===Object.prototype)return Za;let e=om.get(t);return e==null&&(e=nZ(KP(Object.getPrototypeOf(t)),t),om.set(t,e)),e}function iZ(t,e){let r=KP(Object.getPrototypeOf(e));return new r(t,e)}function sZ(t){return rt(t).immediateStopped}function oZ(t,e){rt(t).eventPhase=e}function aZ(t,e){rt(t).currentTarget=e}function YP(t,e){rt(t).passiveListener=e}var JP=new WeakMap,VP=1,qP=2,kE=3;function $E(t){return t!==null&&typeof t=="object"}function du(t){let e=JP.get(t);if(e==null)throw new TypeError("'this' is expected an EventTarget object, but got another value.");return e}function lZ(t){return{get(){let r=du(this).get(t);for(;r!=null;){if(r.listenerType===kE)return r.listener;r=r.next}return null},set(e){typeof e!="function"&&!$E(e)&&(e=null);let r=du(this),n=null,i=r.get(t);for(;i!=null;)i.listenerType===kE?n!==null?n.next=i.next:i.next!==null?r.set(t,i.next):r.delete(t):n=i,i=i.next;if(e!==null){let s={listener:e,listenerType:kE,passive:!1,once:!1,next:null};n===null?r.set(t,s):n.next=s}},configurable:!0,enumerable:!0}}function am(t,e){Object.defineProperty(t,`on${e}`,lZ(e))}function XP(t){function e(){bn.call(this)}e.prototype=Object.create(bn.prototype,{constructor:{value:e,configurable:!0,writable:!0}});for(let r=0;r<t.length;++r)am(e.prototype,t[r]);return e}function bn(){if(this instanceof bn){JP.set(this,new Map);return}if(arguments.length===1&&Array.isArray(arguments[0]))return XP(arguments[0]);if(arguments.length>0){let t=new Array(arguments.length);for(let e=0;e<arguments.length;++e)t[e]=arguments[e];return XP(t)}throw new TypeError("Cannot call a class as a function")}bn.prototype={addEventListener(t,e,r){if(e==null)return;if(typeof e!="function"&&!$E(e))throw new TypeError("'listener' should be a function or an object.");let n=du(this),i=$E(r),o=(i?!!r.capture:!!r)?VP:qP,a={listener:e,listenerType:o,passive:i&&!!r.passive,once:i&&!!r.once,next:null},l=n.get(t);if(l===void 0){n.set(t,a);return}let c=null;for(;l!=null;){if(l.listener===e&&l.listenerType===o)return;c=l,l=l.next}c.next=a},removeEventListener(t,e,r){if(e==null)return;let n=du(this),s=($E(r)?!!r.capture:!!r)?VP:qP,o=null,a=n.get(t);for(;a!=null;){if(a.listener===e&&a.listenerType===s){o!==null?o.next=a.next:a.next!==null?n.set(t,a.next):n.delete(t);return}o=a,a=a.next}},dispatchEvent(t){if(t==null||typeof t.type!="string")throw new TypeError('"event.type" should be a string.');let e=du(this),r=t.type,n=e.get(r);if(n==null)return!0;let i=iZ(this,t),s=null;for(;n!=null;){if(n.once?s!==null?s.next=n.next:n.next!==null?e.set(r,n.next):e.delete(r):s=n,YP(i,n.passive?n.listener:null),typeof n.listener=="function")try{n.listener.call(this,i)}catch(o){typeof console<"u"&&typeof console.error=="function"&&console.error(o)}else n.listenerType!==kE&&typeof n.listener.handleEvent=="function"&&n.listener.handleEvent(i);if(sZ(i))break;n=n.next}return YP(i,null),oZ(i,0),aZ(i,null),!i.defaultPrevented}};Object.defineProperty(bn.prototype,"constructor",{value:bn,configurable:!0,writable:!0});typeof window<"u"&&typeof window.EventTarget<"u"&&Object.setPrototypeOf(bn.prototype,window.EventTarget.prototype);Eu.defineEventAttribute=am;Eu.EventTarget=bn;Eu.default=bn;fu.exports=bn;fu.exports.EventTarget=fu.exports.default=bn;fu.exports.defineEventAttribute=am});var wt=O((Tu,hu)=>{"use strict";Object.defineProperty(Tu,"__esModule",{value:!0});var lm=QP(),gs=class extends lm.EventTarget{constructor(){throw super(),new TypeError("AbortSignal cannot be constructed directly")}get aborted(){let e=YE.get(this);if(typeof e!="boolean")throw new TypeError(`Expected 'this' to be an 'AbortSignal' object, but got ${this===null?"null":typeof this}`);return e}};lm.defineEventAttribute(gs.prototype,"abort");function cZ(){let t=Object.create(gs.prototype);return lm.EventTarget.call(t),YE.set(t,!1),t}function uZ(t){YE.get(t)===!1&&(YE.set(t,!0),t.dispatchEvent({type:"abort"}))}var YE=new WeakMap;Object.defineProperties(gs.prototype,{aborted:{enumerable:!0}});typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(gs.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortSignal"});var Ns=class{constructor(){ex.set(this,cZ())}get signal(){return ZP(this)}abort(){uZ(ZP(this))}},ex=new WeakMap;function ZP(t){let e=ex.get(t);if(e==null)throw new TypeError(`Expected 'this' to be an 'AbortController' object, but got ${t===null?"null":typeof t}`);return e}Object.defineProperties(Ns.prototype,{signal:{enumerable:!0},abort:{enumerable:!0}});typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Ns.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortController"});Tu.AbortController=Ns;Tu.AbortSignal=gs;Tu.default=Ns;hu.exports=Ns;hu.exports.AbortController=hu.exports.default=Ns;hu.exports.AbortSignal=gs});var Ur=O((hxe,um)=>{"use strict";var dZ=require("buffer"),{format:fZ,inspect:EZ}=im(),{codes:{ERR_INVALID_ARG_TYPE:cm}}=Nr(),{kResistStopPropagation:hZ,AggregateError:TZ,SymbolDispose:pZ}=lt(),SZ=globalThis.AbortSignal||wt().AbortSignal,RZ=globalThis.AbortController||wt().AbortController,AZ=Object.getPrototypeOf(async function(){}).constructor,tx=globalThis.Blob||dZ.Blob,mZ=typeof tx<"u"?function(e){return e instanceof tx}:function(e){return!1},rx=(t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new cm(e,"AbortSignal",t)},_Z=(t,e)=>{if(typeof t!="function")throw new cm(e,"Function",t)};um.exports={AggregateError:TZ,kEmptyObject:Object.freeze({}),once(t){let e=!1;return function(...r){e||(e=!0,t.apply(this,r))}},createDeferredPromise:function(){let t,e;return{promise:new Promise((n,i)=>{t=n,e=i}),resolve:t,reject:e}},promisify(t){return new Promise((e,r)=>{t((n,...i)=>n?r(n):e(...i))})},debuglog(){return function(){}},format:fZ,inspect:EZ,types:{isAsyncFunction(t){return t instanceof AZ},isArrayBufferView(t){return ArrayBuffer.isView(t)}},isBlob:mZ,deprecate(t,e){return t},addAbortListener:require("events").addAbortListener||function(e,r){if(e===void 0)throw new cm("signal","AbortSignal",e);rx(e,"signal"),_Z(r,"listener");let n;return e.aborted?queueMicrotask(()=>r()):(e.addEventListener("abort",r,{__proto__:null,once:!0,[hZ]:!0}),n=()=>{e.removeEventListener("abort",r)}),{__proto__:null,[pZ](){var i;(i=n)===null||i===void 0||i()}}},AbortSignalAny:SZ.any||function(e){if(e.length===1)return e[0];let r=new RZ,n=()=>r.abort();return e.forEach(i=>{rx(i,"signals"),i.addEventListener("abort",n,{once:!0})}),r.signal.addEventListener("abort",()=>{e.forEach(i=>i.removeEventListener("abort",n))},{once:!0}),r.signal}};um.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")});var tl=O((Txe,fx)=>{"use strict";var{ArrayIsArray:fm,ArrayPrototypeIncludes:ox,ArrayPrototypeJoin:ax,ArrayPrototypeMap:IZ,NumberIsInteger:Em,NumberIsNaN:gZ,NumberMAX_SAFE_INTEGER:NZ,NumberMIN_SAFE_INTEGER:OZ,NumberParseInt:CZ,ObjectPrototypeHasOwnProperty:yZ,RegExpPrototypeExec:lx,String:bZ,StringPrototypeToUpperCase:wZ,StringPrototypeTrim:LZ}=lt(),{hideStackFrames:dn,codes:{ERR_SOCKET_BAD_PORT:DZ,ERR_INVALID_ARG_TYPE:Or,ERR_INVALID_ARG_VALUE:el,ERR_OUT_OF_RANGE:po,ERR_UNKNOWN_SIGNAL:nx}}=Nr(),{normalizeEncoding:PZ}=Ur(),{isAsyncFunction:xZ,isArrayBufferView:MZ}=Ur().types,ix={};function vZ(t){return t===(t|0)}function UZ(t){return t===t>>>0}var BZ=/^[0-7]+$/,FZ="must be a 32-bit unsigned integer or an octal string";function GZ(t,e,r){if(typeof t>"u"&&(t=r),typeof t=="string"){if(lx(BZ,t)===null)throw new el(e,t,FZ);t=CZ(t,8)}return cx(t,e),t}var HZ=dn((t,e,r=OZ,n=NZ)=>{if(typeof t!="number")throw new Or(e,"number",t);if(!Em(t))throw new po(e,"an integer",t);if(t<r||t>n)throw new po(e,`>= ${r} && <= ${n}`,t)}),WZ=dn((t,e,r=-2147483648,n=2147483647)=>{if(typeof t!="number")throw new Or(e,"number",t);if(!Em(t))throw new po(e,"an integer",t);if(t<r||t>n)throw new po(e,`>= ${r} && <= ${n}`,t)}),cx=dn((t,e,r=!1)=>{if(typeof t!="number")throw new Or(e,"number",t);if(!Em(t))throw new po(e,"an integer",t);let n=r?1:0,i=4294967295;if(t<n||t>i)throw new po(e,`>= ${n} && <= ${i}`,t)});function hm(t,e){if(typeof t!="string")throw new Or(e,"string",t)}function kZ(t,e,r=void 0,n){if(typeof t!="number")throw new Or(e,"number",t);if(r!=null&&t<r||n!=null&&t>n||(r!=null||n!=null)&&gZ(t))throw new po(e,`${r!=null?`>= ${r}`:""}${r!=null&&n!=null?" && ":""}${n!=null?`<= ${n}`:""}`,t)}var $Z=dn((t,e,r)=>{if(!ox(r,t)){let i="must be one of: "+ax(IZ(r,s=>typeof s=="string"?`'${s}'`:bZ(s)),", ");throw new el(e,t,i)}});function ux(t,e){if(typeof t!="boolean")throw new Or(e,"boolean",t)}function dm(t,e,r){return t==null||!yZ(t,e)?r:t[e]}var YZ=dn((t,e,r=null)=>{let n=dm(r,"allowArray",!1),i=dm(r,"allowFunction",!1);if(!dm(r,"nullable",!1)&&t===null||!n&&fm(t)||typeof t!="object"&&(!i||typeof t!="function"))throw new Or(e,"Object",t)}),VZ=dn((t,e)=>{if(t!=null&&typeof t!="object"&&typeof t!="function")throw new Or(e,"a dictionary",t)}),VE=dn((t,e,r=0)=>{if(!fm(t))throw new Or(e,"Array",t);if(t.length<r){let n=`must be longer than ${r}`;throw new el(e,t,n)}});function qZ(t,e){VE(t,e);for(let r=0;r<t.length;r++)hm(t[r],`${e}[${r}]`)}function XZ(t,e){VE(t,e);for(let r=0;r<t.length;r++)ux(t[r],`${e}[${r}]`)}function jZ(t,e){VE(t,e);for(let r=0;r<t.length;r++){let n=t[r],i=`${e}[${r}]`;if(n==null)throw new Or(i,"AbortSignal",n);dx(n,i)}}function zZ(t,e="signal"){if(hm(t,e),ix[t]===void 0)throw ix[wZ(t)]!==void 0?new nx(t+" (signals must use all capital letters)"):new nx(t)}var KZ=dn((t,e="buffer")=>{if(!MZ(t))throw new Or(e,["Buffer","TypedArray","DataView"],t)});function JZ(t,e){let r=PZ(e),n=t.length;if(r==="hex"&&n%2!==0)throw new el("encoding",e,`is invalid for data of length ${n}`)}function QZ(t,e="Port",r=!0){if(typeof t!="number"&&typeof t!="string"||typeof t=="string"&&LZ(t).length===0||+t!==+t>>>0||t>65535||t===0&&!r)throw new DZ(e,t,r);return t|0}var dx=dn((t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new Or(e,"AbortSignal",t)}),ZZ=dn((t,e)=>{if(typeof t!="function")throw new Or(e,"Function",t)}),eee=dn((t,e)=>{if(typeof t!="function"||xZ(t))throw new Or(e,"Function",t)}),tee=dn((t,e)=>{if(t!==void 0)throw new Or(e,"undefined",t)});function ree(t,e,r){if(!ox(r,t))throw new Or(e,`('${ax(r,"|")}')`,t)}var nee=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function sx(t,e){if(typeof t>"u"||!lx(nee,t))throw new el(e,t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function iee(t){if(typeof t=="string")return sx(t,"hints"),t;if(fm(t)){let e=t.length,r="";if(e===0)return r;for(let n=0;n<e;n++){let i=t[n];sx(i,"hints"),r+=i,n!==e-1&&(r+=", ")}return r}throw new el("hints",t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}fx.exports={isInt32:vZ,isUint32:UZ,parseFileMode:GZ,validateArray:VE,validateStringArray:qZ,validateBooleanArray:XZ,validateAbortSignalArray:jZ,validateBoolean:ux,validateBuffer:KZ,validateDictionary:VZ,validateEncoding:JZ,validateFunction:ZZ,validateInt32:WZ,validateInteger:HZ,validateNumber:kZ,validateObject:YZ,validateOneOf:$Z,validatePlainFunction:eee,validatePort:QZ,validateSignalName:zZ,validateString:hm,validateUint32:cx,validateUndefined:tee,validateUnion:ree,validateAbortSignal:dx,validateLinkHeaderValue:iee}});var je=O((pxe,Ex)=>{Ex.exports=global.process});var zn=O((Sxe,bx)=>{"use strict";var{SymbolAsyncIterator:hx,SymbolIterator:Tx,SymbolFor:So}=lt(),px=So("nodejs.stream.destroyed"),Sx=So("nodejs.stream.errored"),Tm=So("nodejs.stream.readable"),pm=So("nodejs.stream.writable"),Rx=So("nodejs.stream.disturbed"),see=So("nodejs.webstream.isClosedPromise"),oee=So("nodejs.webstream.controllerErrorFunction");function qE(t,e=!1){var r;return!!(t&&typeof t.pipe=="function"&&typeof t.on=="function"&&(!e||typeof t.pause=="function"&&typeof t.resume=="function")&&(!t._writableState||((r=t._readableState)===null||r===void 0?void 0:r.readable)!==!1)&&(!t._writableState||t._readableState))}function XE(t){var e;return!!(t&&typeof t.write=="function"&&typeof t.on=="function"&&(!t._readableState||((e=t._writableState)===null||e===void 0?void 0:e.writable)!==!1))}function aee(t){return!!(t&&typeof t.pipe=="function"&&t._readableState&&typeof t.on=="function"&&typeof t.write=="function")}function jn(t){return t&&(t._readableState||t._writableState||typeof t.write=="function"&&typeof t.on=="function"||typeof t.pipe=="function"&&typeof t.on=="function")}function Ax(t){return!!(t&&!jn(t)&&typeof t.pipeThrough=="function"&&typeof t.getReader=="function"&&typeof t.cancel=="function")}function mx(t){return!!(t&&!jn(t)&&typeof t.getWriter=="function"&&typeof t.abort=="function")}function _x(t){return!!(t&&!jn(t)&&typeof t.readable=="object"&&typeof t.writable=="object")}function lee(t){return Ax(t)||mx(t)||_x(t)}function cee(t,e){return t==null?!1:e===!0?typeof t[hx]=="function":e===!1?typeof t[Tx]=="function":typeof t[hx]=="function"||typeof t[Tx]=="function"}function jE(t){if(!jn(t))return null;let e=t._writableState,r=t._readableState,n=e||r;return!!(t.destroyed||t[px]||n!=null&&n.destroyed)}function Ix(t){if(!XE(t))return null;if(t.writableEnded===!0)return!0;let e=t._writableState;return e!=null&&e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function uee(t,e){if(!XE(t))return null;if(t.writableFinished===!0)return!0;let r=t._writableState;return r!=null&&r.errored?!1:typeof r?.finished!="boolean"?null:!!(r.finished||e===!1&&r.ended===!0&&r.length===0)}function dee(t){if(!qE(t))return null;if(t.readableEnded===!0)return!0;let e=t._readableState;return!e||e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function gx(t,e){if(!qE(t))return null;let r=t._readableState;return r!=null&&r.errored?!1:typeof r?.endEmitted!="boolean"?null:!!(r.endEmitted||e===!1&&r.ended===!0&&r.length===0)}function Nx(t){return t&&t[Tm]!=null?t[Tm]:typeof t?.readable!="boolean"?null:jE(t)?!1:qE(t)&&t.readable&&!gx(t)}function Ox(t){return t&&t[pm]!=null?t[pm]:typeof t?.writable!="boolean"?null:jE(t)?!1:XE(t)&&t.writable&&!Ix(t)}function fee(t,e){return jn(t)?jE(t)?!0:!(e?.readable!==!1&&Nx(t)||e?.writable!==!1&&Ox(t)):null}function Eee(t){var e,r;return jn(t)?t.writableErrored?t.writableErrored:(e=(r=t._writableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function hee(t){var e,r;return jn(t)?t.readableErrored?t.readableErrored:(e=(r=t._readableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function Tee(t){if(!jn(t))return null;if(typeof t.closed=="boolean")return t.closed;let e=t._writableState,r=t._readableState;return typeof e?.closed=="boolean"||typeof r?.closed=="boolean"?e?.closed||r?.closed:typeof t._closed=="boolean"&&Cx(t)?t._closed:null}function Cx(t){return typeof t._closed=="boolean"&&typeof t._defaultKeepAlive=="boolean"&&typeof t._removedConnection=="boolean"&&typeof t._removedContLen=="boolean"}function yx(t){return typeof t._sent100=="boolean"&&Cx(t)}function pee(t){var e;return typeof t._consuming=="boolean"&&typeof t._dumped=="boolean"&&((e=t.req)===null||e===void 0?void 0:e.upgradeOrConnect)===void 0}function See(t){if(!jn(t))return null;let e=t._writableState,r=t._readableState,n=e||r;return!n&&yx(t)||!!(n&&n.autoDestroy&&n.emitClose&&n.closed===!1)}function Ree(t){var e;return!!(t&&((e=t[Rx])!==null&&e!==void 0?e:t.readableDidRead||t.readableAborted))}function Aee(t){var e,r,n,i,s,o,a,l,c,u;return!!(t&&((e=(r=(n=(i=(s=(o=t[Sx])!==null&&o!==void 0?o:t.readableErrored)!==null&&s!==void 0?s:t.writableErrored)!==null&&i!==void 0?i:(a=t._readableState)===null||a===void 0?void 0:a.errorEmitted)!==null&&n!==void 0?n:(l=t._writableState)===null||l===void 0?void 0:l.errorEmitted)!==null&&r!==void 0?r:(c=t._readableState)===null||c===void 0?void 0:c.errored)!==null&&e!==void 0?e:!((u=t._writableState)===null||u===void 0)&&u.errored))}bx.exports={isDestroyed:jE,kIsDestroyed:px,isDisturbed:Ree,kIsDisturbed:Rx,isErrored:Aee,kIsErrored:Sx,isReadable:Nx,kIsReadable:Tm,kIsClosedPromise:see,kControllerErrorFunction:oee,kIsWritable:pm,isClosed:Tee,isDuplexNodeStream:aee,isFinished:fee,isIterable:cee,isReadableNodeStream:qE,isReadableStream:Ax,isReadableEnded:dee,isReadableFinished:gx,isReadableErrored:hee,isNodeStream:jn,isWebStream:lee,isWritable:Ox,isWritableNodeStream:XE,isWritableStream:mx,isWritableEnded:Ix,isWritableFinished:uee,isWritableErrored:Eee,isServerRequest:pee,isServerResponse:yx,willEmitClose:See,isTransformStream:_x}});var vi=O((Rxe,_m)=>{"use strict";var Os=je(),{AbortError:Bx,codes:mee}=Nr(),{ERR_INVALID_ARG_TYPE:_ee,ERR_STREAM_PREMATURE_CLOSE:wx}=mee,{kEmptyObject:Rm,once:Am}=Ur(),{validateAbortSignal:Iee,validateFunction:gee,validateObject:Nee,validateBoolean:Oee}=tl(),{Promise:Cee,PromisePrototypeThen:yee,SymbolDispose:Fx}=lt(),{isClosed:bee,isReadable:Lx,isReadableNodeStream:Sm,isReadableStream:wee,isReadableFinished:Dx,isReadableErrored:Px,isWritable:xx,isWritableNodeStream:Mx,isWritableStream:Lee,isWritableFinished:vx,isWritableErrored:Ux,isNodeStream:Dee,willEmitClose:Pee,kIsClosedPromise:xee}=zn(),rl;function Mee(t){return t.setHeader&&typeof t.abort=="function"}var mm=()=>{};function Gx(t,e,r){var n,i;if(arguments.length===2?(r=e,e=Rm):e==null?e=Rm:Nee(e,"options"),gee(r,"callback"),Iee(e.signal,"options.signal"),r=Am(r),wee(t)||Lee(t))return vee(t,e,r);if(!Dee(t))throw new _ee("stream",["ReadableStream","WritableStream","Stream"],t);let s=(n=e.readable)!==null&&n!==void 0?n:Sm(t),o=(i=e.writable)!==null&&i!==void 0?i:Mx(t),a=t._writableState,l=t._readableState,c=()=>{t.writable||E()},u=Pee(t)&&Sm(t)===s&&Mx(t)===o,d=vx(t,!1),E=()=>{d=!0,t.destroyed&&(u=!1),!(u&&(!t.readable||s))&&(!s||f)&&r.call(t)},f=Dx(t,!1),T=()=>{f=!0,t.destroyed&&(u=!1),!(u&&(!t.writable||o))&&(!o||d)&&r.call(t)},h=g=>{r.call(t,g)},p=bee(t),S=()=>{p=!0;let g=Ux(t)||Px(t);if(g&&typeof g!="boolean")return r.call(t,g);if(s&&!f&&Sm(t,!0)&&!Dx(t,!1))return r.call(t,new wx);if(o&&!d&&!vx(t,!1))return r.call(t,new wx);r.call(t)},m=()=>{p=!0;let g=Ux(t)||Px(t);if(g&&typeof g!="boolean")return r.call(t,g);r.call(t)},R=()=>{t.req.on("finish",E)};Mee(t)?(t.on("complete",E),u||t.on("abort",S),t.req?R():t.on("request",R)):o&&!a&&(t.on("end",c),t.on("close",c)),!u&&typeof t.aborted=="boolean"&&t.on("aborted",S),t.on("end",T),t.on("finish",E),e.error!==!1&&t.on("error",h),t.on("close",S),p?Os.nextTick(S):a!=null&&a.errorEmitted||l!=null&&l.errorEmitted?u||Os.nextTick(m):(!s&&(!u||Lx(t))&&(d||xx(t)===!1)||!o&&(!u||xx(t))&&(f||Lx(t)===!1)||l&&t.req&&t.aborted)&&Os.nextTick(m);let A=()=>{r=mm,t.removeListener("aborted",S),t.removeListener("complete",E),t.removeListener("abort",S),t.removeListener("request",R),t.req&&t.req.removeListener("finish",E),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",E),t.removeListener("end",T),t.removeListener("error",h),t.removeListener("close",S)};if(e.signal&&!p){let g=()=>{let w=r;A(),w.call(t,new Bx(void 0,{cause:e.signal.reason}))};if(e.signal.aborted)Os.nextTick(g);else{rl=rl||Ur().addAbortListener;let w=rl(e.signal,g),I=r;r=Am((...D)=>{w[Fx](),I.apply(t,D)})}}return A}function vee(t,e,r){let n=!1,i=mm;if(e.signal)if(i=()=>{n=!0,r.call(t,new Bx(void 0,{cause:e.signal.reason}))},e.signal.aborted)Os.nextTick(i);else{rl=rl||Ur().addAbortListener;let o=rl(e.signal,i),a=r;r=Am((...l)=>{o[Fx](),a.apply(t,l)})}let s=(...o)=>{n||Os.nextTick(()=>r.apply(t,o))};return yee(t[xee].promise,s,s),mm}function Uee(t,e){var r;let n=!1;return e===null&&(e=Rm),(r=e)!==null&&r!==void 0&&r.cleanup&&(Oee(e.cleanup,"cleanup"),n=e.cleanup),new Cee((i,s)=>{let o=Gx(t,e,a=>{n&&o(),a?s(a):i()})})}_m.exports=Gx;_m.exports.finished=Uee});var Ro=O((Axe,Xx)=>{"use strict";var Kn=je(),{aggregateTwoErrors:Bee,codes:{ERR_MULTIPLE_CALLBACK:Fee},AbortError:Gee}=Nr(),{Symbol:kx}=lt(),{kIsDestroyed:Hee,isDestroyed:Wee,isFinished:kee,isServerRequest:$ee}=zn(),$x=kx("kDestroy"),Im=kx("kConstruct");function Yx(t,e,r){t&&(t.stack,e&&!e.errored&&(e.errored=t),r&&!r.errored&&(r.errored=t))}function Yee(t,e){let r=this._readableState,n=this._writableState,i=n||r;return n!=null&&n.destroyed||r!=null&&r.destroyed?(typeof e=="function"&&e(),this):(Yx(t,n,r),n&&(n.destroyed=!0),r&&(r.destroyed=!0),i.constructed?Hx(this,t,e):this.once($x,function(s){Hx(this,Bee(s,t),e)}),this)}function Hx(t,e,r){let n=!1;function i(s){if(n)return;n=!0;let o=t._readableState,a=t._writableState;Yx(s,a,o),a&&(a.closed=!0),o&&(o.closed=!0),typeof r=="function"&&r(s),s?Kn.nextTick(Vee,t,s):Kn.nextTick(Vx,t)}try{t._destroy(e||null,i)}catch(s){i(s)}}function Vee(t,e){gm(t,e),Vx(t)}function Vx(t){let e=t._readableState,r=t._writableState;r&&(r.closeEmitted=!0),e&&(e.closeEmitted=!0),(r!=null&&r.emitClose||e!=null&&e.emitClose)&&t.emit("close")}function gm(t,e){let r=t._readableState,n=t._writableState;n!=null&&n.errorEmitted||r!=null&&r.errorEmitted||(n&&(n.errorEmitted=!0),r&&(r.errorEmitted=!0),t.emit("error",e))}function qee(){let t=this._readableState,e=this._writableState;t&&(t.constructed=!0,t.closed=!1,t.closeEmitted=!1,t.destroyed=!1,t.errored=null,t.errorEmitted=!1,t.reading=!1,t.ended=t.readable===!1,t.endEmitted=t.readable===!1),e&&(e.constructed=!0,e.destroyed=!1,e.closed=!1,e.closeEmitted=!1,e.errored=null,e.errorEmitted=!1,e.finalCalled=!1,e.prefinished=!1,e.ended=e.writable===!1,e.ending=e.writable===!1,e.finished=e.writable===!1)}function Nm(t,e,r){let n=t._readableState,i=t._writableState;if(i!=null&&i.destroyed||n!=null&&n.destroyed)return this;n!=null&&n.autoDestroy||i!=null&&i.autoDestroy?t.destroy(e):e&&(e.stack,i&&!i.errored&&(i.errored=e),n&&!n.errored&&(n.errored=e),r?Kn.nextTick(gm,t,e):gm(t,e))}function Xee(t,e){if(typeof t._construct!="function")return;let r=t._readableState,n=t._writableState;r&&(r.constructed=!1),n&&(n.constructed=!1),t.once(Im,e),!(t.listenerCount(Im)>1)&&Kn.nextTick(jee,t)}function jee(t){let e=!1;function r(n){if(e){Nm(t,n??new Fee);return}e=!0;let i=t._readableState,s=t._writableState,o=s||i;i&&(i.constructed=!0),s&&(s.constructed=!0),o.destroyed?t.emit($x,n):n?Nm(t,n,!0):Kn.nextTick(zee,t)}try{t._construct(n=>{Kn.nextTick(r,n)})}catch(n){Kn.nextTick(r,n)}}function zee(t){t.emit(Im)}function Wx(t){return t?.setHeader&&typeof t.abort=="function"}function qx(t){t.emit("close")}function Kee(t,e){t.emit("error",e),Kn.nextTick(qx,t)}function Jee(t,e){!t||Wee(t)||(!e&&!kee(t)&&(e=new Gee),$ee(t)?(t.socket=null,t.destroy(e)):Wx(t)?t.abort():Wx(t.req)?t.req.abort():typeof t.destroy=="function"?t.destroy(e):typeof t.close=="function"?t.close():e?Kn.nextTick(Kee,t,e):Kn.nextTick(qx,t),t.destroyed||(t[Hee]=!0))}Xx.exports={construct:Xee,destroyer:Jee,destroy:Yee,undestroy:qee,errorOrDestroy:Nm}});var JE=O((mxe,zx)=>{"use strict";var{ArrayIsArray:Qee,ObjectSetPrototypeOf:jx}=lt(),{EventEmitter:zE}=require("events");function KE(t){zE.call(this,t)}jx(KE.prototype,zE.prototype);jx(KE,zE);KE.prototype.pipe=function(t,e){let r=this;function n(u){t.writable&&t.write(u)===!1&&r.pause&&r.pause()}r.on("data",n);function i(){r.readable&&r.resume&&r.resume()}t.on("drain",i),!t._isStdio&&(!e||e.end!==!1)&&(r.on("end",o),r.on("close",a));let s=!1;function o(){s||(s=!0,t.end())}function a(){s||(s=!0,typeof t.destroy=="function"&&t.destroy())}function l(u){c(),zE.listenerCount(this,"error")===0&&this.emit("error",u)}Om(r,"error",l),Om(t,"error",l);function c(){r.removeListener("data",n),t.removeListener("drain",i),r.removeListener("end",o),r.removeListener("close",a),r.removeListener("error",l),t.removeListener("error",l),r.removeListener("end",c),r.removeListener("close",c),t.removeListener("close",c)}return r.on("end",c),r.on("close",c),t.on("close",c),t.emit("pipe",r),t};function Om(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Qee(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}zx.exports={Stream:KE,prependListener:Om}});var pu=O((_xe,QE)=>{"use strict";var{SymbolDispose:Zee}=lt(),{AbortError:Kx,codes:ete}=Nr(),{isNodeStream:Jx,isWebStream:tte,kControllerErrorFunction:rte}=zn(),nte=vi(),{ERR_INVALID_ARG_TYPE:Qx}=ete,Cm,ite=(t,e)=>{if(typeof t!="object"||!("aborted"in t))throw new Qx(e,"AbortSignal",t)};QE.exports.addAbortSignal=function(e,r){if(ite(e,"signal"),!Jx(r)&&!tte(r))throw new Qx("stream",["ReadableStream","WritableStream","Stream"],r);return QE.exports.addAbortSignalNoValidate(e,r)};QE.exports.addAbortSignalNoValidate=function(t,e){if(typeof t!="object"||!("aborted"in t))return e;let r=Jx(e)?()=>{e.destroy(new Kx(void 0,{cause:t.reason}))}:()=>{e[rte](new Kx(void 0,{cause:t.reason}))};if(t.aborted)r();else{Cm=Cm||Ur().addAbortListener;let n=Cm(t,r);nte(e,n[Zee])}return e}});var tM=O((gxe,eM)=>{"use strict";var{StringPrototypeSlice:Zx,SymbolIterator:ste,TypedArrayPrototypeSet:ZE,Uint8Array:ote}=lt(),{Buffer:ym}=require("buffer"),{inspect:ate}=Ur();eM.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){let r={data:e,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length}unshift(e){let r={data:e,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length}shift(){if(this.length===0)return;let e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return"";let r=this.head,n=""+r.data;for(;(r=r.next)!==null;)n+=e+r.data;return n}concat(e){if(this.length===0)return ym.alloc(0);let r=ym.allocUnsafe(e>>>0),n=this.head,i=0;for(;n;)ZE(r,n.data,i),i+=n.data.length,n=n.next;return r}consume(e,r){let n=this.head.data;if(e<n.length){let i=n.slice(0,e);return this.head.data=n.slice(e),i}return e===n.length?this.shift():r?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[ste](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let r="",n=this.head,i=0;do{let s=n.data;if(e>s.length)r+=s,e-=s.length;else{e===s.length?(r+=s,++i,n.next?this.head=n.next:this.head=this.tail=null):(r+=Zx(s,0,e),this.head=n,n.data=Zx(s,e));break}++i}while((n=n.next)!==null);return this.length-=i,r}_getBuffer(e){let r=ym.allocUnsafe(e),n=e,i=this.head,s=0;do{let o=i.data;if(e>o.length)ZE(r,o,n-e),e-=o.length;else{e===o.length?(ZE(r,o,n-e),++s,i.next?this.head=i.next:this.head=this.tail=null):(ZE(r,new ote(o.buffer,o.byteOffset,e),n-e),this.head=i,i.data=o.slice(e));break}++s}while((i=i.next)!==null);return this.length-=s,r}[Symbol.for("nodejs.util.inspect.custom")](e,r){return ate(this,{...r,depth:0,customInspect:!1})}}});var Su=O((Nxe,sM)=>{"use strict";var{MathFloor:lte,NumberIsInteger:cte}=lt(),{validateInteger:ute}=tl(),{ERR_INVALID_ARG_VALUE:dte}=Nr().codes,rM=16*1024,nM=16;function fte(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function iM(t){return t?nM:rM}function Ete(t,e){ute(e,"value",0),t?nM=e:rM=e}function hte(t,e,r,n){let i=fte(e,n,r);if(i!=null){if(!cte(i)||i<0){let s=n?`options.${r}`:"options.highWaterMark";throw new dte(s,i)}return lte(i)}return iM(t.objectMode)}sM.exports={getHighWaterMark:hte,getDefaultHighWaterMark:iM,setDefaultHighWaterMark:Ete}});var lM=O((bm,aM)=>{var eh=require("buffer"),Jn=eh.Buffer;function oM(t,e){for(var r in t)e[r]=t[r]}Jn.from&&Jn.alloc&&Jn.allocUnsafe&&Jn.allocUnsafeSlow?aM.exports=eh:(oM(eh,bm),bm.Buffer=Ao);function Ao(t,e,r){return Jn(t,e,r)}Ao.prototype=Object.create(Jn.prototype);oM(Jn,Ao);Ao.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return Jn(t,e,r)};Ao.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=Jn(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};Ao.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Jn(t)};Ao.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return eh.SlowBuffer(t)}});var Au=O(uM=>{"use strict";var Lm=lM().Buffer,cM=Lm.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Tte(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function pte(t){var e=Tte(t);if(typeof e!="string"&&(Lm.isEncoding===cM||!cM(t)))throw new Error("Unknown encoding: "+t);return e||t}uM.StringDecoder=Ru;function Ru(t){this.encoding=pte(t);var e;switch(this.encoding){case"utf16le":this.text=Ite,this.end=gte,e=4;break;case"utf8":this.fillLast=Ate,e=4;break;case"base64":this.text=Nte,this.end=Ote,e=3;break;default:this.write=Cte,this.end=yte;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Lm.allocUnsafe(e)}Ru.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};Ru.prototype.end=_te;Ru.prototype.text=mte;Ru.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function wm(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function Ste(t,e,r){var n=e.length-1;if(n<r)return 0;var i=wm(e[n]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--n<r||i===-2?0:(i=wm(e[n]),i>=0?(i>0&&(t.lastNeed=i-2),i):--n<r||i===-2?0:(i=wm(e[n]),i>=0?(i>0&&(i===2?i=0:t.lastNeed=i-3),i):0))}function Rte(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function Ate(t){var e=this.lastTotal-this.lastNeed,r=Rte(this,t,e);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function mte(t,e){var r=Ste(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function _te(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function Ite(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function gte(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function Nte(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function Ote(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function Cte(t){return t.toString(this.encoding)}function yte(t){return t&&t.length?this.write(t):""}});var Dm=O((Cxe,hM)=>{"use strict";var dM=je(),{PromisePrototypeThen:bte,SymbolAsyncIterator:fM,SymbolIterator:EM}=lt(),{Buffer:wte}=require("buffer"),{ERR_INVALID_ARG_TYPE:Lte,ERR_STREAM_NULL_VALUES:Dte}=Nr().codes;function Pte(t,e,r){let n;if(typeof e=="string"||e instanceof wte)return new t({objectMode:!0,...r,read(){this.push(e),this.push(null)}});let i;if(e&&e[fM])i=!0,n=e[fM]();else if(e&&e[EM])i=!1,n=e[EM]();else throw new Lte("iterable",["Iterable"],e);let s=new t({objectMode:!0,highWaterMark:1,...r}),o=!1;s._read=function(){o||(o=!0,l())},s._destroy=function(c,u){bte(a(c),()=>dM.nextTick(u,c),d=>dM.nextTick(u,d||c))};async function a(c){let u=c!=null,d=typeof n.throw=="function";if(u&&d){let{value:E,done:f}=await n.throw(c);if(await E,f)return}if(typeof n.return=="function"){let{value:E}=await n.return();await E}}async function l(){for(;;){try{let{value:c,done:u}=i?await n.next():n.next();if(u)s.push(null);else{let d=c&&typeof c.then=="function"?await c:c;if(d===null)throw o=!1,new Dte;if(s.push(d))continue;o=!1}}catch(c){s.destroy(c)}break}}return s}hM.exports=Pte});var _u=O((yxe,PM)=>{"use strict";var wn=je(),{ArrayPrototypeIndexOf:xte,NumberIsInteger:Mte,NumberIsNaN:vte,NumberParseInt:Ute,ObjectDefineProperties:Gm,ObjectKeys:Bte,ObjectSetPrototypeOf:SM,Promise:RM,SafeSet:Fte,SymbolAsyncDispose:Gte,SymbolAsyncIterator:Hte,Symbol:Wte}=lt();PM.exports=Se;Se.ReadableState=ih;var{EventEmitter:kte}=require("events"),{Stream:Cs,prependListener:$te}=JE(),{Buffer:Pm}=require("buffer"),{addAbortSignal:Yte}=pu(),AM=vi(),Le=Ur().debuglog("stream",t=>{Le=t}),Vte=tM(),sl=Ro(),{getHighWaterMark:qte,getDefaultHighWaterMark:Xte}=Su(),{aggregateTwoErrors:TM,codes:{ERR_INVALID_ARG_TYPE:jte,ERR_METHOD_NOT_IMPLEMENTED:zte,ERR_OUT_OF_RANGE:Kte,ERR_STREAM_PUSH_AFTER_EOF:Jte,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:Qte},AbortError:Zte}=Nr(),{validateObject:ere}=tl(),mo=Wte("kPaused"),{StringDecoder:mM}=Au(),tre=Dm();SM(Se.prototype,Cs.prototype);SM(Se,Cs);var xm=()=>{},{errorOrDestroy:nl}=sl,il=1,rre=2,_M=4,mu=8,IM=16,th=32,rh=64,gM=128,nre=256,ire=512,sre=1024,Bm=2048,Fm=4096,ore=8192,are=16384,lre=32768,NM=65536,cre=1<<17,ure=1<<18;function Ft(t){return{enumerable:!1,get(){return(this.state&t)!==0},set(e){e?this.state|=t:this.state&=~t}}}Gm(ih.prototype,{objectMode:Ft(il),ended:Ft(rre),endEmitted:Ft(_M),reading:Ft(mu),constructed:Ft(IM),sync:Ft(th),needReadable:Ft(rh),emittedReadable:Ft(gM),readableListening:Ft(nre),resumeScheduled:Ft(ire),errorEmitted:Ft(sre),emitClose:Ft(Bm),autoDestroy:Ft(Fm),destroyed:Ft(ore),closed:Ft(are),closeEmitted:Ft(lre),multiAwaitDrain:Ft(NM),readingMore:Ft(cre),dataEmitted:Ft(ure)});function ih(t,e,r){typeof r!="boolean"&&(r=e instanceof Qn()),this.state=Bm|Fm|IM|th,t&&t.objectMode&&(this.state|=il),r&&t&&t.readableObjectMode&&(this.state|=il),this.highWaterMark=t?qte(this,t,"readableHighWaterMark",r):Xte(!1),this.buffer=new Vte,this.length=0,this.pipes=[],this.flowing=null,this[mo]=null,t&&t.emitClose===!1&&(this.state&=~Bm),t&&t.autoDestroy===!1&&(this.state&=~Fm),this.errored=null,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,t&&t.encoding&&(this.decoder=new mM(t.encoding),this.encoding=t.encoding)}function Se(t){if(!(this instanceof Se))return new Se(t);let e=this instanceof Qn();this._readableState=new ih(t,this,e),t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&!e&&Yte(t.signal,this)),Cs.call(this,t),sl.construct(this,()=>{this._readableState.needReadable&&nh(this,this._readableState)})}Se.prototype.destroy=sl.destroy;Se.prototype._undestroy=sl.undestroy;Se.prototype._destroy=function(t,e){e(t)};Se.prototype[kte.captureRejectionSymbol]=function(t){this.destroy(t)};Se.prototype[Gte]=function(){let t;return this.destroyed||(t=this.readableEnded?null:new Zte,this.destroy(t)),new RM((e,r)=>AM(this,n=>n&&n!==t?r(n):e(null)))};Se.prototype.push=function(t,e){return OM(this,t,e,!1)};Se.prototype.unshift=function(t,e){return OM(this,t,e,!0)};function OM(t,e,r,n){Le("readableAddChunk",e);let i=t._readableState,s;if((i.state&il)===0&&(typeof e=="string"?(r=r||i.defaultEncoding,i.encoding!==r&&(n&&i.encoding?e=Pm.from(e,r).toString(i.encoding):(e=Pm.from(e,r),r=""))):e instanceof Pm?r="":Cs._isUint8Array(e)?(e=Cs._uint8ArrayToBuffer(e),r=""):e!=null&&(s=new jte("chunk",["string","Buffer","Uint8Array"],e))),s)nl(t,s);else if(e===null)i.state&=~mu,Ere(t,i);else if((i.state&il)!==0||e&&e.length>0)if(n)if((i.state&_M)!==0)nl(t,new Qte);else{if(i.destroyed||i.errored)return!1;Mm(t,i,e,!0)}else if(i.ended)nl(t,new Jte);else{if(i.destroyed||i.errored)return!1;i.state&=~mu,i.decoder&&!r?(e=i.decoder.write(e),i.objectMode||e.length!==0?Mm(t,i,e,!1):nh(t,i)):Mm(t,i,e,!1)}else n||(i.state&=~mu,nh(t,i));return!i.ended&&(i.length<i.highWaterMark||i.length===0)}function Mm(t,e,r,n){e.flowing&&e.length===0&&!e.sync&&t.listenerCount("data")>0?((e.state&NM)!==0?e.awaitDrainWriters.clear():e.awaitDrainWriters=null,e.dataEmitted=!0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),(e.state&rh)!==0&&sh(t)),nh(t,e)}Se.prototype.isPaused=function(){let t=this._readableState;return t[mo]===!0||t.flowing===!1};Se.prototype.setEncoding=function(t){let e=new mM(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;let r=this._readableState.buffer,n="";for(let i of r)n+=e.write(i);return r.clear(),n!==""&&r.push(n),this._readableState.length=n.length,this};var dre=1073741824;function fre(t){if(t>dre)throw new Kte("size","<= 1GiB",t);return t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++,t}function pM(t,e){return t<=0||e.length===0&&e.ended?0:(e.state&il)!==0?1:vte(t)?e.flowing&&e.length?e.buffer.first().length:e.length:t<=e.length?t:e.ended?e.length:0}Se.prototype.read=function(t){Le("read",t),t===void 0?t=NaN:Mte(t)||(t=Ute(t,10));let e=this._readableState,r=t;if(t>e.highWaterMark&&(e.highWaterMark=fre(t)),t!==0&&(e.state&=~gM),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return Le("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?vm(this):sh(this),null;if(t=pM(t,e),t===0&&e.ended)return e.length===0&&vm(this),null;let n=(e.state&rh)!==0;if(Le("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,Le("length less than watermark",n)),e.ended||e.reading||e.destroyed||e.errored||!e.constructed)n=!1,Le("reading, ended or constructing",n);else if(n){Le("do read"),e.state|=mu|th,e.length===0&&(e.state|=rh);try{this._read(e.highWaterMark)}catch(s){nl(this,s)}e.state&=~th,e.reading||(t=pM(r,e))}let i;return t>0?i=LM(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.multiAwaitDrain?e.awaitDrainWriters.clear():e.awaitDrainWriters=null),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&vm(this)),i!==null&&!e.errorEmitted&&!e.closeEmitted&&(e.dataEmitted=!0,this.emit("data",i)),i};function Ere(t,e){if(Le("onEofChunk"),!e.ended){if(e.decoder){let r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?sh(t):(e.needReadable=!1,e.emittedReadable=!0,CM(t))}}function sh(t){let e=t._readableState;Le("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(Le("emitReadable",e.flowing),e.emittedReadable=!0,wn.nextTick(CM,t))}function CM(t){let e=t._readableState;Le("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&!e.errored&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,bM(t)}function nh(t,e){!e.readingMore&&e.constructed&&(e.readingMore=!0,wn.nextTick(hre,t,e))}function hre(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){let r=e.length;if(Le("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}Se.prototype._read=function(t){throw new zte("_read()")};Se.prototype.pipe=function(t,e){let r=this,n=this._readableState;n.pipes.length===1&&(n.multiAwaitDrain||(n.multiAwaitDrain=!0,n.awaitDrainWriters=new Fte(n.awaitDrainWriters?[n.awaitDrainWriters]:[]))),n.pipes.push(t),Le("pipe count=%d opts=%j",n.pipes.length,e);let s=(!e||e.end!==!1)&&t!==wn.stdout&&t!==wn.stderr?a:p;n.endEmitted?wn.nextTick(s):r.once("end",s),t.on("unpipe",o);function o(S,m){Le("onunpipe"),S===r&&m&&m.hasUnpiped===!1&&(m.hasUnpiped=!0,u())}function a(){Le("onend"),t.end()}let l,c=!1;function u(){Le("cleanup"),t.removeListener("close",T),t.removeListener("finish",h),l&&t.removeListener("drain",l),t.removeListener("error",f),t.removeListener("unpipe",o),r.removeListener("end",a),r.removeListener("end",p),r.removeListener("data",E),c=!0,l&&n.awaitDrainWriters&&(!t._writableState||t._writableState.needDrain)&&l()}function d(){c||(n.pipes.length===1&&n.pipes[0]===t?(Le("false write response, pause",0),n.awaitDrainWriters=t,n.multiAwaitDrain=!1):n.pipes.length>1&&n.pipes.includes(t)&&(Le("false write response, pause",n.awaitDrainWriters.size),n.awaitDrainWriters.add(t)),r.pause()),l||(l=Tre(r,t),t.on("drain",l))}r.on("data",E);function E(S){Le("ondata");let m=t.write(S);Le("dest.write",m),m===!1&&d()}function f(S){if(Le("onerror",S),p(),t.removeListener("error",f),t.listenerCount("error")===0){let m=t._writableState||t._readableState;m&&!m.errorEmitted?nl(t,S):t.emit("error",S)}}$te(t,"error",f);function T(){t.removeListener("finish",h),p()}t.once("close",T);function h(){Le("onfinish"),t.removeListener("close",T),p()}t.once("finish",h);function p(){Le("unpipe"),r.unpipe(t)}return t.emit("pipe",r),t.writableNeedDrain===!0?d():n.flowing||(Le("pipe resume"),r.resume()),t};function Tre(t,e){return function(){let n=t._readableState;n.awaitDrainWriters===e?(Le("pipeOnDrain",1),n.awaitDrainWriters=null):n.multiAwaitDrain&&(Le("pipeOnDrain",n.awaitDrainWriters.size),n.awaitDrainWriters.delete(e)),(!n.awaitDrainWriters||n.awaitDrainWriters.size===0)&&t.listenerCount("data")&&t.resume()}}Se.prototype.unpipe=function(t){let e=this._readableState,r={hasUnpiped:!1};if(e.pipes.length===0)return this;if(!t){let i=e.pipes;e.pipes=[],this.pause();for(let s=0;s<i.length;s++)i[s].emit("unpipe",this,{hasUnpiped:!1});return this}let n=xte(e.pipes,t);return n===-1?this:(e.pipes.splice(n,1),e.pipes.length===0&&this.pause(),t.emit("unpipe",this,r),this)};Se.prototype.on=function(t,e){let r=Cs.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,Le("on readable",n.length,n.reading),n.length?sh(this):n.reading||wn.nextTick(pre,this)),r};Se.prototype.addListener=Se.prototype.on;Se.prototype.removeListener=function(t,e){let r=Cs.prototype.removeListener.call(this,t,e);return t==="readable"&&wn.nextTick(yM,this),r};Se.prototype.off=Se.prototype.removeListener;Se.prototype.removeAllListeners=function(t){let e=Cs.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&wn.nextTick(yM,this),e};function yM(t){let e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&e[mo]===!1?e.flowing=!0:t.listenerCount("data")>0?t.resume():e.readableListening||(e.flowing=null)}function pre(t){Le("readable nexttick read 0"),t.read(0)}Se.prototype.resume=function(){let t=this._readableState;return t.flowing||(Le("resume"),t.flowing=!t.readableListening,Sre(this,t)),t[mo]=!1,this};function Sre(t,e){e.resumeScheduled||(e.resumeScheduled=!0,wn.nextTick(Rre,t,e))}function Rre(t,e){Le("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),bM(t),e.flowing&&!e.reading&&t.read(0)}Se.prototype.pause=function(){return Le("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Le("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[mo]=!0,this};function bM(t){let e=t._readableState;for(Le("flow",e.flowing);e.flowing&&t.read()!==null;);}Se.prototype.wrap=function(t){let e=!1;t.on("data",n=>{!this.push(n)&&t.pause&&(e=!0,t.pause())}),t.on("end",()=>{this.push(null)}),t.on("error",n=>{nl(this,n)}),t.on("close",()=>{this.destroy()}),t.on("destroy",()=>{this.destroy()}),this._read=()=>{e&&t.resume&&(e=!1,t.resume())};let r=Bte(t);for(let n=1;n<r.length;n++){let i=r[n];this[i]===void 0&&typeof t[i]=="function"&&(this[i]=t[i].bind(t))}return this};Se.prototype[Hte]=function(){return wM(this)};Se.prototype.iterator=function(t){return t!==void 0&&ere(t,"options"),wM(this,t)};function wM(t,e){typeof t.read!="function"&&(t=Se.wrap(t,{objectMode:!0}));let r=Are(t,e);return r.stream=t,r}async function*Are(t,e){let r=xm;function n(o){this===t?(r(),r=xm):r=o}t.on("readable",n);let i,s=AM(t,{writable:!1},o=>{i=o?TM(i,o):null,r(),r=xm});try{for(;;){let o=t.destroyed?null:t.read();if(o!==null)yield o;else{if(i)throw i;if(i===null)return;await new RM(n)}}}catch(o){throw i=TM(i,o),i}finally{(i||e?.destroyOnReturn!==!1)&&(i===void 0||t._readableState.autoDestroy)?sl.destroyer(t,null):(t.off("readable",n),s())}}Gm(Se.prototype,{readable:{__proto__:null,get(){let t=this._readableState;return!!t&&t.readable!==!1&&!t.destroyed&&!t.errorEmitted&&!t.endEmitted},set(t){this._readableState&&(this._readableState.readable=!!t)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(t){this._readableState&&(this._readableState.destroyed=t)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}});Gm(ih.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[mo]!==!1},set(t){this[mo]=!!t}}});Se._fromList=LM;function LM(t,e){if(e.length===0)return null;let r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function vm(t){let e=t._readableState;Le("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,wn.nextTick(mre,e,t))}function mre(t,e){if(Le("endReadableNT",t.endEmitted,t.length),!t.errored&&!t.closeEmitted&&!t.endEmitted&&t.length===0){if(t.endEmitted=!0,e.emit("end"),e.writable&&e.allowHalfOpen===!1)wn.nextTick(_re,e);else if(t.autoDestroy){let r=e._writableState;(!r||r.autoDestroy&&(r.finished||r.writable===!1))&&e.destroy()}}}function _re(t){t.writable&&!t.writableEnded&&!t.destroyed&&t.end()}Se.from=function(t,e){return tre(Se,t,e)};var Um;function DM(){return Um===void 0&&(Um={}),Um}Se.fromWeb=function(t,e){return DM().newStreamReadableFromReadableStream(t,e)};Se.toWeb=function(t,e){return DM().newReadableStreamFromStreamReadable(t,e)};Se.wrap=function(t,e){var r,n;return new Se({objectMode:(r=(n=t.readableObjectMode)!==null&&n!==void 0?n:t.objectMode)!==null&&r!==void 0?r:!0,...e,destroy(i,s){sl.destroyer(t,i),s(i)}}).wrap(t)}});var uh=O((bxe,YM)=>{"use strict";var _o=je(),{ArrayPrototypeSlice:vM,Error:Ire,FunctionPrototypeSymbolHasInstance:UM,ObjectDefineProperty:BM,ObjectDefineProperties:gre,ObjectSetPrototypeOf:FM,StringPrototypeToLowerCase:Nre,Symbol:Ore,SymbolHasInstance:Cre}=lt();YM.exports=ht;ht.WritableState=Nu;var{EventEmitter:yre}=require("events"),Iu=JE().Stream,{Buffer:oh}=require("buffer"),ch=Ro(),{addAbortSignal:bre}=pu(),{getHighWaterMark:wre,getDefaultHighWaterMark:Lre}=Su(),{ERR_INVALID_ARG_TYPE:Dre,ERR_METHOD_NOT_IMPLEMENTED:Pre,ERR_MULTIPLE_CALLBACK:GM,ERR_STREAM_CANNOT_PIPE:xre,ERR_STREAM_DESTROYED:gu,ERR_STREAM_ALREADY_FINISHED:Mre,ERR_STREAM_NULL_VALUES:vre,ERR_STREAM_WRITE_AFTER_END:Ure,ERR_UNKNOWN_ENCODING:HM}=Nr().codes,{errorOrDestroy:ol}=ch;FM(ht.prototype,Iu.prototype);FM(ht,Iu);function km(){}var al=Ore("kOnFinished");function Nu(t,e,r){typeof r!="boolean"&&(r=e instanceof Qn()),this.objectMode=!!(t&&t.objectMode),r&&(this.objectMode=this.objectMode||!!(t&&t.writableObjectMode)),this.highWaterMark=t?wre(this,t,"writableHighWaterMark",r):Lre(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let n=!!(t&&t.decodeStrings===!1);this.decodeStrings=!n,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=Fre.bind(void 0,e),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,lh(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!t||t.emitClose!==!1,this.autoDestroy=!t||t.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[al]=[]}function lh(t){t.buffered=[],t.bufferedIndex=0,t.allBuffers=!0,t.allNoop=!0}Nu.prototype.getBuffer=function(){return vM(this.buffered,this.bufferedIndex)};BM(Nu.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function ht(t){let e=this instanceof Qn();if(!e&&!UM(ht,this))return new ht(t);this._writableState=new Nu(t,this,e),t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&bre(t.signal,this)),Iu.call(this,t),ch.construct(this,()=>{let r=this._writableState;r.writing||Ym(this,r),Vm(this,r)})}BM(ht,Cre,{__proto__:null,value:function(t){return UM(this,t)?!0:this!==ht?!1:t&&t._writableState instanceof Nu}});ht.prototype.pipe=function(){ol(this,new xre)};function WM(t,e,r,n){let i=t._writableState;if(typeof r=="function")n=r,r=i.defaultEncoding;else{if(!r)r=i.defaultEncoding;else if(r!=="buffer"&&!oh.isEncoding(r))throw new HM(r);typeof n!="function"&&(n=km)}if(e===null)throw new vre;if(!i.objectMode)if(typeof e=="string")i.decodeStrings!==!1&&(e=oh.from(e,r),r="buffer");else if(e instanceof oh)r="buffer";else if(Iu._isUint8Array(e))e=Iu._uint8ArrayToBuffer(e),r="buffer";else throw new Dre("chunk",["string","Buffer","Uint8Array"],e);let s;return i.ending?s=new Ure:i.destroyed&&(s=new gu("write")),s?(_o.nextTick(n,s),ol(t,s,!0),s):(i.pendingcb++,Bre(t,i,e,r,n))}ht.prototype.write=function(t,e,r){return WM(this,t,e,r)===!0};ht.prototype.cork=function(){this._writableState.corked++};ht.prototype.uncork=function(){let t=this._writableState;t.corked&&(t.corked--,t.writing||Ym(this,t))};ht.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=Nre(e)),!oh.isEncoding(e))throw new HM(e);return this._writableState.defaultEncoding=e,this};function Bre(t,e,r,n,i){let s=e.objectMode?1:r.length;e.length+=s;let o=e.length<e.highWaterMark;return o||(e.needDrain=!0),e.writing||e.corked||e.errored||!e.constructed?(e.buffered.push({chunk:r,encoding:n,callback:i}),e.allBuffers&&n!=="buffer"&&(e.allBuffers=!1),e.allNoop&&i!==km&&(e.allNoop=!1)):(e.writelen=s,e.writecb=i,e.writing=!0,e.sync=!0,t._write(r,n,e.onwrite),e.sync=!1),o&&!e.errored&&!e.destroyed}function xM(t,e,r,n,i,s,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new gu("write")):r?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function MM(t,e,r,n){--e.pendingcb,n(r),$m(e),ol(t,r)}function Fre(t,e){let r=t._writableState,n=r.sync,i=r.writecb;if(typeof i!="function"){ol(t,new GM);return}r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0,e?(e.stack,r.errored||(r.errored=e),t._readableState&&!t._readableState.errored&&(t._readableState.errored=e),n?_o.nextTick(MM,t,r,e,i):MM(t,r,e,i)):(r.buffered.length>r.bufferedIndex&&Ym(t,r),n?r.afterWriteTickInfo!==null&&r.afterWriteTickInfo.cb===i?r.afterWriteTickInfo.count++:(r.afterWriteTickInfo={count:1,cb:i,stream:t,state:r},_o.nextTick(Gre,r.afterWriteTickInfo)):kM(t,r,1,i))}function Gre({stream:t,state:e,count:r,cb:n}){return e.afterWriteTickInfo=null,kM(t,e,r,n)}function kM(t,e,r,n){for(!e.ending&&!t.destroyed&&e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"));r-- >0;)e.pendingcb--,n();e.destroyed&&$m(e),Vm(t,e)}function $m(t){if(t.writing)return;for(let i=t.bufferedIndex;i<t.buffered.length;++i){var e;let{chunk:s,callback:o}=t.buffered[i],a=t.objectMode?1:s.length;t.length-=a,o((e=t.errored)!==null&&e!==void 0?e:new gu("write"))}let r=t[al].splice(0);for(let i=0;i<r.length;i++){var n;r[i]((n=t.errored)!==null&&n!==void 0?n:new gu("end"))}lh(t)}function Ym(t,e){if(e.corked||e.bufferProcessing||e.destroyed||!e.constructed)return;let{buffered:r,bufferedIndex:n,objectMode:i}=e,s=r.length-n;if(!s)return;let o=n;if(e.bufferProcessing=!0,s>1&&t._writev){e.pendingcb-=s-1;let a=e.allNoop?km:c=>{for(let u=o;u<r.length;++u)r[u].callback(c)},l=e.allNoop&&o===0?r:vM(r,o);l.allBuffers=e.allBuffers,xM(t,e,!0,e.length,l,"",a),lh(e)}else{do{let{chunk:a,encoding:l,callback:c}=r[o];r[o++]=null;let u=i?1:a.length;xM(t,e,!1,u,a,l,c)}while(o<r.length&&!e.writing);o===r.length?lh(e):o>256?(r.splice(0,o),e.bufferedIndex=0):e.bufferedIndex=o}e.bufferProcessing=!1}ht.prototype._write=function(t,e,r){if(this._writev)this._writev([{chunk:t,encoding:e}],r);else throw new Pre("_write()")};ht.prototype._writev=null;ht.prototype.end=function(t,e,r){let n=this._writableState;typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null);let i;if(t!=null){let s=WM(this,t,e);s instanceof Ire&&(i=s)}return n.corked&&(n.corked=1,this.uncork()),i||(!n.errored&&!n.ending?(n.ending=!0,Vm(this,n,!0),n.ended=!0):n.finished?i=new Mre("end"):n.destroyed&&(i=new gu("end"))),typeof r=="function"&&(i||n.finished?_o.nextTick(r,i):n[al].push(r)),this};function ah(t){return t.ending&&!t.destroyed&&t.constructed&&t.length===0&&!t.errored&&t.buffered.length===0&&!t.finished&&!t.writing&&!t.errorEmitted&&!t.closeEmitted}function Hre(t,e){let r=!1;function n(i){if(r){ol(t,i??GM());return}if(r=!0,e.pendingcb--,i){let s=e[al].splice(0);for(let o=0;o<s.length;o++)s[o](i);ol(t,i,e.sync)}else ah(e)&&(e.prefinished=!0,t.emit("prefinish"),e.pendingcb++,_o.nextTick(Wm,t,e))}e.sync=!0,e.pendingcb++;try{t._final(n)}catch(i){n(i)}e.sync=!1}function Wre(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.finalCalled=!0,Hre(t,e)):(e.prefinished=!0,t.emit("prefinish")))}function Vm(t,e,r){ah(e)&&(Wre(t,e),e.pendingcb===0&&(r?(e.pendingcb++,_o.nextTick((n,i)=>{ah(i)?Wm(n,i):i.pendingcb--},t,e)):ah(e)&&(e.pendingcb++,Wm(t,e))))}function Wm(t,e){e.pendingcb--,e.finished=!0;let r=e[al].splice(0);for(let n=0;n<r.length;n++)r[n]();if(t.emit("finish"),e.autoDestroy){let n=t._readableState;(!n||n.autoDestroy&&(n.endEmitted||n.readable===!1))&&t.destroy()}}gre(ht.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(t){this._writableState&&(this._writableState.destroyed=t)}},writable:{__proto__:null,get(){let t=this._writableState;return!!t&&t.writable!==!1&&!t.destroyed&&!t.errored&&!t.ending&&!t.ended},set(t){this._writableState&&(this._writableState.writable=!!t)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let t=this._writableState;return t?!t.destroyed&&!t.ending&&t.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var kre=ch.destroy;ht.prototype.destroy=function(t,e){let r=this._writableState;return!r.destroyed&&(r.bufferedIndex<r.buffered.length||r[al].length)&&_o.nextTick($m,r),kre.call(this,t,e),this};ht.prototype._undestroy=ch.undestroy;ht.prototype._destroy=function(t,e){e(t)};ht.prototype[yre.captureRejectionSymbol]=function(t){this.destroy(t)};var Hm;function $M(){return Hm===void 0&&(Hm={}),Hm}ht.fromWeb=function(t,e){return $M().newStreamWritableFromWritableStream(t,e)};ht.toWeb=function(t){return $M().newWritableStreamFromStreamWritable(t)}});var sv=O((wxe,iv)=>{var qm=je(),$re=require("buffer"),{isReadable:Yre,isWritable:Vre,isIterable:VM,isNodeStream:qre,isReadableNodeStream:qM,isWritableNodeStream:XM,isDuplexNodeStream:Xre,isReadableStream:jM,isWritableStream:zM}=zn(),KM=vi(),{AbortError:rv,codes:{ERR_INVALID_ARG_TYPE:jre,ERR_INVALID_RETURN_VALUE:JM}}=Nr(),{destroyer:cl}=Ro(),zre=Qn(),nv=_u(),Kre=uh(),{createDeferredPromise:QM}=Ur(),ZM=Dm(),ev=globalThis.Blob||$re.Blob,Jre=typeof ev<"u"?function(e){return e instanceof ev}:function(e){return!1},Qre=globalThis.AbortController||wt().AbortController,{FunctionPrototypeCall:tv}=lt(),ys=class extends zre{constructor(e){super(e),e?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),e?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};iv.exports=function t(e,r){if(Xre(e))return e;if(qM(e))return ll({readable:e});if(XM(e))return ll({writable:e});if(qre(e))return ll({writable:!1,readable:!1});if(jM(e))return ll({readable:nv.fromWeb(e)});if(zM(e))return ll({writable:Kre.fromWeb(e)});if(typeof e=="function"){let{value:i,write:s,final:o,destroy:a}=Zre(e);if(VM(i))return ZM(ys,i,{objectMode:!0,write:s,final:o,destroy:a});let l=i?.then;if(typeof l=="function"){let c,u=tv(l,i,d=>{if(d!=null)throw new JM("nully","body",d)},d=>{cl(c,d)});return c=new ys({objectMode:!0,readable:!1,write:s,final(d){o(async()=>{try{await u,qm.nextTick(d,null)}catch(E){qm.nextTick(d,E)}})},destroy:a})}throw new JM("Iterable, AsyncIterable or AsyncFunction",r,i)}if(Jre(e))return t(e.arrayBuffer());if(VM(e))return ZM(ys,e,{objectMode:!0,writable:!1});if(jM(e?.readable)&&zM(e?.writable))return ys.fromWeb(e);if(typeof e?.writable=="object"||typeof e?.readable=="object"){let i=e!=null&&e.readable?qM(e?.readable)?e?.readable:t(e.readable):void 0,s=e!=null&&e.writable?XM(e?.writable)?e?.writable:t(e.writable):void 0;return ll({readable:i,writable:s})}let n=e?.then;if(typeof n=="function"){let i;return tv(n,e,s=>{s!=null&&i.push(s),i.push(null)},s=>{cl(i,s)}),i=new ys({objectMode:!0,writable:!1,read(){}})}throw new jre(r,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],e)};function Zre(t){let{promise:e,resolve:r}=QM(),n=new Qre,i=n.signal;return{value:t((async function*(){for(;;){let o=e;e=null;let{chunk:a,done:l,cb:c}=await o;if(qm.nextTick(c),l)return;if(i.aborted)throw new rv(void 0,{cause:i.reason});({promise:e,resolve:r}=QM()),yield a}})(),{signal:i}),write(o,a,l){let c=r;r=null,c({chunk:o,done:!1,cb:l})},final(o){let a=r;r=null,a({done:!0,cb:o})},destroy(o,a){n.abort(),a(o)}}}function ll(t){let e=t.readable&&typeof t.readable.read!="function"?nv.wrap(t.readable):t.readable,r=t.writable,n=!!Yre(e),i=!!Vre(r),s,o,a,l,c;function u(d){let E=l;l=null,E?E(d):d&&c.destroy(d)}return c=new ys({readableObjectMode:!!(e!=null&&e.readableObjectMode),writableObjectMode:!!(r!=null&&r.writableObjectMode),readable:n,writable:i}),i&&(KM(r,d=>{i=!1,d&&cl(e,d),u(d)}),c._write=function(d,E,f){r.write(d,E)?f():s=f},c._final=function(d){r.end(),o=d},r.on("drain",function(){if(s){let d=s;s=null,d()}}),r.on("finish",function(){if(o){let d=o;o=null,d()}})),n&&(KM(e,d=>{n=!1,d&&cl(e,d),u(d)}),e.on("readable",function(){if(a){let d=a;a=null,d()}}),e.on("end",function(){c.push(null)}),c._read=function(){for(;;){let d=e.read();if(d===null){a=c._read;return}if(!c.push(d))return}}),c._destroy=function(d,E){!d&&l!==null&&(d=new rv),a=null,s=null,o=null,l===null?E(d):(l=E,cl(r,d),cl(e,d))},c}});var Qn=O((Lxe,lv)=>{"use strict";var{ObjectDefineProperties:ene,ObjectGetOwnPropertyDescriptor:Ui,ObjectKeys:tne,ObjectSetPrototypeOf:ov}=lt();lv.exports=Ln;var zm=_u(),fn=uh();ov(Ln.prototype,zm.prototype);ov(Ln,zm);{let t=tne(fn.prototype);for(let e=0;e<t.length;e++){let r=t[e];Ln.prototype[r]||(Ln.prototype[r]=fn.prototype[r])}}function Ln(t){if(!(this instanceof Ln))return new Ln(t);zm.call(this,t),fn.call(this,t),t?(this.allowHalfOpen=t.allowHalfOpen!==!1,t.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),t.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}ene(Ln.prototype,{writable:{__proto__:null,...Ui(fn.prototype,"writable")},writableHighWaterMark:{__proto__:null,...Ui(fn.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...Ui(fn.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...Ui(fn.prototype,"writableBuffer")},writableLength:{__proto__:null,...Ui(fn.prototype,"writableLength")},writableFinished:{__proto__:null,...Ui(fn.prototype,"writableFinished")},writableCorked:{__proto__:null,...Ui(fn.prototype,"writableCorked")},writableEnded:{__proto__:null,...Ui(fn.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...Ui(fn.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(t){this._readableState&&this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}});var Xm;function av(){return Xm===void 0&&(Xm={}),Xm}Ln.fromWeb=function(t,e){return av().newStreamDuplexFromReadableWritablePair(t,e)};Ln.toWeb=function(t){return av().newReadableWritablePairFromDuplex(t)};var jm;Ln.from=function(t){return jm||(jm=sv()),jm(t,"body")}});var Qm=O((Dxe,uv)=>{"use strict";var{ObjectSetPrototypeOf:cv,Symbol:rne}=lt();uv.exports=Bi;var{ERR_METHOD_NOT_IMPLEMENTED:nne}=Nr().codes,Jm=Qn(),{getHighWaterMark:ine}=Su();cv(Bi.prototype,Jm.prototype);cv(Bi,Jm);var Ou=rne("kCallback");function Bi(t){if(!(this instanceof Bi))return new Bi(t);let e=t?ine(this,t,"readableHighWaterMark",!0):null;e===0&&(t={...t,highWaterMark:null,readableHighWaterMark:e,writableHighWaterMark:t.writableHighWaterMark||0}),Jm.call(this,t),this._readableState.sync=!1,this[Ou]=null,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",sne)}function Km(t){typeof this._flush=="function"&&!this.destroyed?this._flush((e,r)=>{if(e){t?t(e):this.destroy(e);return}r!=null&&this.push(r),this.push(null),t&&t()}):(this.push(null),t&&t())}function sne(){this._final!==Km&&Km.call(this)}Bi.prototype._final=Km;Bi.prototype._transform=function(t,e,r){throw new nne("_transform()")};Bi.prototype._write=function(t,e,r){let n=this._readableState,i=this._writableState,s=n.length;this._transform(t,e,(o,a)=>{if(o){r(o);return}a!=null&&this.push(a),i.ended||s===n.length||n.length<n.highWaterMark?r():this[Ou]=r})};Bi.prototype._read=function(){if(this[Ou]){let t=this[Ou];this[Ou]=null,t()}}});var e_=O((Pxe,fv)=>{"use strict";var{ObjectSetPrototypeOf:dv}=lt();fv.exports=ul;var Zm=Qm();dv(ul.prototype,Zm.prototype);dv(ul,Zm);function ul(t){if(!(this instanceof ul))return new ul(t);Zm.call(this,t)}ul.prototype._transform=function(t,e,r){r(null,t)}});var hh=O((xxe,Sv)=>{var Cu=je(),{ArrayIsArray:one,Promise:ane,SymbolAsyncIterator:lne,SymbolDispose:cne}=lt(),Eh=vi(),{once:une}=Ur(),dne=Ro(),Ev=Qn(),{aggregateTwoErrors:fne,codes:{ERR_INVALID_ARG_TYPE:c_,ERR_INVALID_RETURN_VALUE:t_,ERR_MISSING_ARGS:Ene,ERR_STREAM_DESTROYED:hne,ERR_STREAM_PREMATURE_CLOSE:Tne},AbortError:pne}=Nr(),{validateFunction:Sne,validateAbortSignal:Rne}=tl(),{isIterable:Io,isReadable:r_,isReadableNodeStream:fh,isNodeStream:hv,isTransformStream:dl,isWebStream:Ane,isReadableStream:n_,isReadableFinished:mne}=zn(),_ne=globalThis.AbortController||wt().AbortController,i_,s_,o_;function Tv(t,e,r){let n=!1;t.on("close",()=>{n=!0});let i=Eh(t,{readable:e,writable:r},s=>{n=!s});return{destroy:s=>{n||(n=!0,dne.destroyer(t,s||new hne("pipe")))},cleanup:i}}function Ine(t){return Sne(t[t.length-1],"streams[stream.length - 1]"),t.pop()}function a_(t){if(Io(t))return t;if(fh(t))return gne(t);throw new c_("val",["Readable","Iterable","AsyncIterable"],t)}async function*gne(t){s_||(s_=_u()),yield*s_.prototype[lne].call(t)}async function dh(t,e,r,{end:n}){let i,s=null,o=c=>{if(c&&(i=c),s){let u=s;s=null,u()}},a=()=>new ane((c,u)=>{i?u(i):s=()=>{i?u(i):c()}});e.on("drain",o);let l=Eh(e,{readable:!1},o);try{e.writableNeedDrain&&await a();for await(let c of t)e.write(c)||await a();n&&(e.end(),await a()),r()}catch(c){r(i!==c?fne(i,c):c)}finally{l(),e.off("drain",o)}}async function l_(t,e,r,{end:n}){dl(e)&&(e=e.writable);let i=e.getWriter();try{for await(let s of t)await i.ready,i.write(s).catch(()=>{});await i.ready,n&&await i.close(),r()}catch(s){try{await i.abort(s),r(s)}catch(o){r(o)}}}function Nne(...t){return pv(t,une(Ine(t)))}function pv(t,e,r){if(t.length===1&&one(t[0])&&(t=t[0]),t.length<2)throw new Ene("streams");let n=new _ne,i=n.signal,s=r?.signal,o=[];Rne(s,"options.signal");function a(){T(new pne)}o_=o_||Ur().addAbortListener;let l;s&&(l=o_(s,a));let c,u,d=[],E=0;function f(R){T(R,--E===0)}function T(R,A){var g;if(R&&(!c||c.code==="ERR_STREAM_PREMATURE_CLOSE")&&(c=R),!(!c&&!A)){for(;d.length;)d.shift()(c);(g=l)===null||g===void 0||g[cne](),n.abort(),A&&(c||o.forEach(w=>w()),Cu.nextTick(e,c,u))}}let h;for(let R=0;R<t.length;R++){let A=t[R],g=R<t.length-1,w=R>0,I=g||r?.end!==!1,D=R===t.length-1;if(hv(A)){let b=function(P){P&&P.name!=="AbortError"&&P.code!=="ERR_STREAM_PREMATURE_CLOSE"&&f(P)};var m=b;if(I){let{destroy:P,cleanup:M}=Tv(A,g,w);d.push(P),r_(A)&&D&&o.push(M)}A.on("error",b),r_(A)&&D&&o.push(()=>{A.removeListener("error",b)})}if(R===0)if(typeof A=="function"){if(h=A({signal:i}),!Io(h))throw new t_("Iterable, AsyncIterable or Stream","source",h)}else Io(A)||fh(A)||dl(A)?h=A:h=Ev.from(A);else if(typeof A=="function"){if(dl(h)){var p;h=a_((p=h)===null||p===void 0?void 0:p.readable)}else h=a_(h);if(h=A(h,{signal:i}),g){if(!Io(h,!0))throw new t_("AsyncIterable",`transform[${R-1}]`,h)}else{var S;i_||(i_=e_());let b=new i_({objectMode:!0}),P=(S=h)===null||S===void 0?void 0:S.then;if(typeof P=="function")E++,P.call(h,G=>{u=G,G!=null&&b.write(G),I&&b.end(),Cu.nextTick(f)},G=>{b.destroy(G),Cu.nextTick(f,G)});else if(Io(h,!0))E++,dh(h,b,f,{end:I});else if(n_(h)||dl(h)){let G=h.readable||h;E++,dh(G,b,f,{end:I})}else throw new t_("AsyncIterable or Promise","destination",h);h=b;let{destroy:M,cleanup:B}=Tv(h,!1,!0);d.push(M),D&&o.push(B)}}else if(hv(A)){if(fh(h)){E+=2;let b=One(h,A,f,{end:I});r_(A)&&D&&o.push(b)}else if(dl(h)||n_(h)){let b=h.readable||h;E++,dh(b,A,f,{end:I})}else if(Io(h))E++,dh(h,A,f,{end:I});else throw new c_("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],h);h=A}else if(Ane(A)){if(fh(h))E++,l_(a_(h),A,f,{end:I});else if(n_(h)||Io(h))E++,l_(h,A,f,{end:I});else if(dl(h))E++,l_(h.readable,A,f,{end:I});else throw new c_("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],h);h=A}else h=Ev.from(A)}return(i!=null&&i.aborted||s!=null&&s.aborted)&&Cu.nextTick(a),h}function One(t,e,r,{end:n}){let i=!1;if(e.on("close",()=>{i||r(new Tne)}),t.pipe(e,{end:!1}),n){let o=function(){i=!0,e.end()};var s=o;mne(t)?Cu.nextTick(o):t.once("end",o)}else r();return Eh(t,{readable:!0,writable:!1},o=>{let a=t._readableState;o&&o.code==="ERR_STREAM_PREMATURE_CLOSE"&&a&&a.ended&&!a.errored&&!a.errorEmitted?t.once("end",r).once("error",r):r(o)}),Eh(e,{readable:!1,writable:!0},r)}Sv.exports={pipelineImpl:pv,pipeline:Nne}});var d_=O((Mxe,gv)=>{"use strict";var{pipeline:Cne}=hh(),Th=Qn(),{destroyer:yne}=Ro(),{isNodeStream:ph,isReadable:Rv,isWritable:Av,isWebStream:u_,isTransformStream:go,isWritableStream:mv,isReadableStream:_v}=zn(),{AbortError:bne,codes:{ERR_INVALID_ARG_VALUE:Iv,ERR_MISSING_ARGS:wne}}=Nr(),Lne=vi();gv.exports=function(...e){if(e.length===0)throw new wne("streams");if(e.length===1)return Th.from(e[0]);let r=[...e];if(typeof e[0]=="function"&&(e[0]=Th.from(e[0])),typeof e[e.length-1]=="function"){let f=e.length-1;e[f]=Th.from(e[f])}for(let f=0;f<e.length;++f)if(!(!ph(e[f])&&!u_(e[f]))){if(f<e.length-1&&!(Rv(e[f])||_v(e[f])||go(e[f])))throw new Iv(`streams[${f}]`,r[f],"must be readable");if(f>0&&!(Av(e[f])||mv(e[f])||go(e[f])))throw new Iv(`streams[${f}]`,r[f],"must be writable")}let n,i,s,o,a;function l(f){let T=o;o=null,T?T(f):f?a.destroy(f):!E&&!d&&a.destroy()}let c=e[0],u=Cne(e,l),d=!!(Av(c)||mv(c)||go(c)),E=!!(Rv(u)||_v(u)||go(u));if(a=new Th({writableObjectMode:!!(c!=null&&c.writableObjectMode),readableObjectMode:!!(u!=null&&u.readableObjectMode),writable:d,readable:E}),d){if(ph(c))a._write=function(T,h,p){c.write(T,h)?p():n=p},a._final=function(T){c.end(),i=T},c.on("drain",function(){if(n){let T=n;n=null,T()}});else if(u_(c)){let h=(go(c)?c.writable:c).getWriter();a._write=async function(p,S,m){try{await h.ready,h.write(p).catch(()=>{}),m()}catch(R){m(R)}},a._final=async function(p){try{await h.ready,h.close().catch(()=>{}),i=p}catch(S){p(S)}}}let f=go(u)?u.readable:u;Lne(f,()=>{if(i){let T=i;i=null,T()}})}if(E){if(ph(u))u.on("readable",function(){if(s){let f=s;s=null,f()}}),u.on("end",function(){a.push(null)}),a._read=function(){for(;;){let f=u.read();if(f===null){s=a._read;return}if(!a.push(f))return}};else if(u_(u)){let T=(go(u)?u.readable:u).getReader();a._read=async function(){for(;;)try{let{value:h,done:p}=await T.read();if(!a.push(h))return;if(p){a.push(null);return}}catch{return}}}}return a._destroy=function(f,T){!f&&o!==null&&(f=new bne),s=null,n=null,i=null,o===null?T(f):(o=T,ph(u)&&yne(u,f))},a}});var xv=O((vxe,h_)=>{"use strict";var Dne=globalThis.AbortController||wt().AbortController,{codes:{ERR_INVALID_ARG_VALUE:Pne,ERR_INVALID_ARG_TYPE:yu,ERR_MISSING_ARGS:xne,ERR_OUT_OF_RANGE:Mne},AbortError:Zn}=Nr(),{validateAbortSignal:No,validateInteger:Nv,validateObject:Oo}=tl(),vne=lt().Symbol("kWeak"),Une=lt().Symbol("kResistStopPropagation"),{finished:Bne}=vi(),Fne=d_(),{addAbortSignalNoValidate:Gne}=pu(),{isWritable:Hne,isNodeStream:Wne}=zn(),{deprecate:kne}=Ur(),{ArrayPrototypePush:$ne,Boolean:Yne,MathFloor:Ov,Number:Vne,NumberIsNaN:qne,Promise:Cv,PromiseReject:yv,PromiseResolve:Xne,PromisePrototypeThen:bv,Symbol:Lv}=lt(),Sh=Lv("kEmpty"),wv=Lv("kEof");function jne(t,e){if(e!=null&&Oo(e,"options"),e?.signal!=null&&No(e.signal,"options.signal"),Wne(t)&&!Hne(t))throw new Pne("stream",t,"must be writable");let r=Fne(this,t);return e!=null&&e.signal&&Gne(e.signal,r),r}function Rh(t,e){if(typeof t!="function")throw new yu("fn",["Function","AsyncFunction"],t);e!=null&&Oo(e,"options"),e?.signal!=null&&No(e.signal,"options.signal");let r=1;e?.concurrency!=null&&(r=Ov(e.concurrency));let n=r-1;return e?.highWaterMark!=null&&(n=Ov(e.highWaterMark)),Nv(r,"options.concurrency",1),Nv(n,"options.highWaterMark",0),n+=r,async function*(){let s=Ur().AbortSignalAny([e?.signal].filter(Yne)),o=this,a=[],l={signal:s},c,u,d=!1,E=0;function f(){d=!0,T()}function T(){E-=1,h()}function h(){u&&!d&&E<r&&a.length<n&&(u(),u=null)}async function p(){try{for await(let S of o){if(d)return;if(s.aborted)throw new Zn;try{if(S=t(S,l),S===Sh)continue;S=Xne(S)}catch(m){S=yv(m)}E+=1,bv(S,T,f),a.push(S),c&&(c(),c=null),!d&&(a.length>=n||E>=r)&&await new Cv(m=>{u=m})}a.push(wv)}catch(S){let m=yv(S);bv(m,T,f),a.push(m)}finally{d=!0,c&&(c(),c=null)}}p();try{for(;;){for(;a.length>0;){let S=await a[0];if(S===wv)return;if(s.aborted)throw new Zn;S!==Sh&&(yield S),a.shift(),h()}await new Cv(S=>{c=S})}}finally{d=!0,u&&(u(),u=null)}}.call(this)}function zne(t=void 0){return t!=null&&Oo(t,"options"),t?.signal!=null&&No(t.signal,"options.signal"),async function*(){let r=0;for await(let i of this){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new Zn({cause:t.signal.reason});yield[r++,i]}}.call(this)}async function Dv(t,e=void 0){for await(let r of E_.call(this,t,e))return!0;return!1}async function Kne(t,e=void 0){if(typeof t!="function")throw new yu("fn",["Function","AsyncFunction"],t);return!await Dv.call(this,async(...r)=>!await t(...r),e)}async function Jne(t,e){for await(let r of E_.call(this,t,e))return r}async function Qne(t,e){if(typeof t!="function")throw new yu("fn",["Function","AsyncFunction"],t);async function r(n,i){return await t(n,i),Sh}for await(let n of Rh.call(this,r,e));}function E_(t,e){if(typeof t!="function")throw new yu("fn",["Function","AsyncFunction"],t);async function r(n,i){return await t(n,i)?n:Sh}return Rh.call(this,r,e)}var f_=class extends xne{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function Zne(t,e,r){var n;if(typeof t!="function")throw new yu("reducer",["Function","AsyncFunction"],t);r!=null&&Oo(r,"options"),r?.signal!=null&&No(r.signal,"options.signal");let i=arguments.length>1;if(r!=null&&(n=r.signal)!==null&&n!==void 0&&n.aborted){let c=new Zn(void 0,{cause:r.signal.reason});throw this.once("error",()=>{}),await Bne(this.destroy(c)),c}let s=new Dne,o=s.signal;if(r!=null&&r.signal){let c={once:!0,[vne]:this,[Une]:!0};r.signal.addEventListener("abort",()=>s.abort(),c)}let a=!1;try{for await(let c of this){var l;if(a=!0,r!=null&&(l=r.signal)!==null&&l!==void 0&&l.aborted)throw new Zn;i?e=await t(e,c,{signal:o}):(e=c,i=!0)}if(!a&&!i)throw new f_}finally{s.abort()}return e}async function eie(t){t!=null&&Oo(t,"options"),t?.signal!=null&&No(t.signal,"options.signal");let e=[];for await(let n of this){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new Zn(void 0,{cause:t.signal.reason});$ne(e,n)}return e}function tie(t,e){let r=Rh.call(this,t,e);return async function*(){for await(let i of r)yield*i}.call(this)}function Pv(t){if(t=Vne(t),qne(t))return 0;if(t<0)throw new Mne("number",">= 0",t);return t}function rie(t,e=void 0){return e!=null&&Oo(e,"options"),e?.signal!=null&&No(e.signal,"options.signal"),t=Pv(t),async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new Zn;for await(let s of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new Zn;t--<=0&&(yield s)}}.call(this)}function nie(t,e=void 0){return e!=null&&Oo(e,"options"),e?.signal!=null&&No(e.signal,"options.signal"),t=Pv(t),async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new Zn;for await(let s of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new Zn;if(t-- >0&&(yield s),t<=0)return}}.call(this)}h_.exports.streamReturningOperators={asIndexedPairs:kne(zne,"readable.asIndexedPairs will be removed in a future version."),drop:rie,filter:E_,flatMap:tie,map:Rh,take:nie,compose:jne};h_.exports.promiseReturningOperators={every:Kne,forEach:Qne,reduce:Zne,toArray:eie,some:Dv,find:Jne}});var T_=O((Uxe,Mv)=>{"use strict";var{ArrayPrototypePop:iie,Promise:sie}=lt(),{isIterable:oie,isNodeStream:aie,isWebStream:lie}=zn(),{pipelineImpl:cie}=hh(),{finished:uie}=vi();p_();function die(...t){return new sie((e,r)=>{let n,i,s=t[t.length-1];if(s&&typeof s=="object"&&!aie(s)&&!oie(s)&&!lie(s)){let o=iie(t);n=o.signal,i=o.end}cie(t,(o,a)=>{o?r(o):e(a)},{signal:n,end:i})})}Mv.exports={finished:uie,pipeline:die}});var p_=O((Bxe,$v)=>{"use strict";var{Buffer:fie}=require("buffer"),{ObjectDefineProperty:Fi,ObjectKeys:Bv,ReflectApply:Fv}=lt(),{promisify:{custom:Gv}}=Ur(),{streamReturningOperators:vv,promiseReturningOperators:Uv}=xv(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:Hv}}=Nr(),Eie=d_(),{setDefaultHighWaterMark:hie,getDefaultHighWaterMark:Tie}=Su(),{pipeline:Wv}=hh(),{destroyer:pie}=Ro(),kv=vi(),S_=T_(),bu=zn(),nt=$v.exports=JE().Stream;nt.isDestroyed=bu.isDestroyed;nt.isDisturbed=bu.isDisturbed;nt.isErrored=bu.isErrored;nt.isReadable=bu.isReadable;nt.isWritable=bu.isWritable;nt.Readable=_u();for(let t of Bv(vv)){let r=function(...n){if(new.target)throw Hv();return nt.Readable.from(Fv(e,this,n))},e=vv[t];Fi(r,"name",{__proto__:null,value:e.name}),Fi(r,"length",{__proto__:null,value:e.length}),Fi(nt.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}for(let t of Bv(Uv)){let r=function(...n){if(new.target)throw Hv();return Fv(e,this,n)},e=Uv[t];Fi(r,"name",{__proto__:null,value:e.name}),Fi(r,"length",{__proto__:null,value:e.length}),Fi(nt.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}nt.Writable=uh();nt.Duplex=Qn();nt.Transform=Qm();nt.PassThrough=e_();nt.pipeline=Wv;var{addAbortSignal:Sie}=pu();nt.addAbortSignal=Sie;nt.finished=kv;nt.destroy=pie;nt.compose=Eie;nt.setDefaultHighWaterMark=hie;nt.getDefaultHighWaterMark=Tie;Fi(nt,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return S_}});Fi(Wv,Gv,{__proto__:null,enumerable:!0,get(){return S_.pipeline}});Fi(kv,Gv,{__proto__:null,enumerable:!0,get(){return S_.finished}});nt.Stream=nt;nt._isUint8Array=function(e){return e instanceof Uint8Array};nt._uint8ArrayToBuffer=function(e){return fie.from(e.buffer,e.byteOffset,e.byteLength)}});var Yv=O((Fxe,Oe)=>{"use strict";var Gt=require("stream");if(Gt&&process.env.READABLE_STREAM==="disable"){let t=Gt.promises;Oe.exports._uint8ArrayToBuffer=Gt._uint8ArrayToBuffer,Oe.exports._isUint8Array=Gt._isUint8Array,Oe.exports.isDisturbed=Gt.isDisturbed,Oe.exports.isErrored=Gt.isErrored,Oe.exports.isReadable=Gt.isReadable,Oe.exports.Readable=Gt.Readable,Oe.exports.Writable=Gt.Writable,Oe.exports.Duplex=Gt.Duplex,Oe.exports.Transform=Gt.Transform,Oe.exports.PassThrough=Gt.PassThrough,Oe.exports.addAbortSignal=Gt.addAbortSignal,Oe.exports.finished=Gt.finished,Oe.exports.destroy=Gt.destroy,Oe.exports.pipeline=Gt.pipeline,Oe.exports.compose=Gt.compose,Object.defineProperty(Gt,"promises",{configurable:!0,enumerable:!0,get(){return t}}),Oe.exports.Stream=Gt.Stream}else{let t=p_(),e=T_(),r=t.Readable.destroy;Oe.exports=t.Readable,Oe.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,Oe.exports._isUint8Array=t._isUint8Array,Oe.exports.isDisturbed=t.isDisturbed,Oe.exports.isErrored=t.isErrored,Oe.exports.isReadable=t.isReadable,Oe.exports.Readable=t.Readable,Oe.exports.Writable=t.Writable,Oe.exports.Duplex=t.Duplex,Oe.exports.Transform=t.Transform,Oe.exports.PassThrough=t.PassThrough,Oe.exports.addAbortSignal=t.addAbortSignal,Oe.exports.finished=t.finished,Oe.exports.destroy=t.destroy,Oe.exports.destroy=r,Oe.exports.pipeline=t.pipeline,Oe.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return e}}),Oe.exports.Stream=t.Stream}Oe.exports.default=Oe.exports});var qv=O((Gxe,Vv)=>{function Rie(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}Vv.exports=Rie});var Kv=O((Hxe,zv)=>{var Xv=UE(),Aie=ZA(),mie=em(),jv=Xv?Xv.isConcatSpreadable:void 0;function _ie(t){return mie(t)||Aie(t)||!!(jv&&t&&t[jv])}zv.exports=_ie});var Ah=O((Wxe,Qv)=>{var Iie=qv(),gie=Kv();function Jv(t,e,r,n,i){var s=-1,o=t.length;for(r||(r=gie),i||(i=[]);++s<o;){var a=t[s];e>0&&r(a)?e>1?Jv(a,e-1,r,n,i):Iie(i,a):n||(i[i.length]=a)}return i}Qv.exports=Jv});var eU=O((kxe,Zv)=>{var Nie=Ah();function Oie(t){var e=t==null?0:t.length;return e?Nie(t,1):[]}Zv.exports=Oie});var wu=O(($xe,tU)=>{var Cie=au(),yie=Cie(Object,"create");tU.exports=yie});var iU=O((Yxe,nU)=>{var rU=wu();function bie(){this.__data__=rU?rU(null):{},this.size=0}nU.exports=bie});var oU=O((Vxe,sU)=>{function wie(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}sU.exports=wie});var lU=O((qxe,aU)=>{var Lie=wu(),Die="__lodash_hash_undefined__",Pie=Object.prototype,xie=Pie.hasOwnProperty;function Mie(t){var e=this.__data__;if(Lie){var r=e[t];return r===Die?void 0:r}return xie.call(e,t)?e[t]:void 0}aU.exports=Mie});var uU=O((Xxe,cU)=>{var vie=wu(),Uie=Object.prototype,Bie=Uie.hasOwnProperty;function Fie(t){var e=this.__data__;return vie?e[t]!==void 0:Bie.call(e,t)}cU.exports=Fie});var fU=O((jxe,dU)=>{var Gie=wu(),Hie="__lodash_hash_undefined__";function Wie(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Gie&&e===void 0?Hie:e,this}dU.exports=Wie});var hU=O((zxe,EU)=>{var kie=iU(),$ie=oU(),Yie=lU(),Vie=uU(),qie=fU();function fl(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}fl.prototype.clear=kie;fl.prototype.delete=$ie;fl.prototype.get=Yie;fl.prototype.has=Vie;fl.prototype.set=qie;EU.exports=fl});var pU=O((Kxe,TU)=>{function Xie(){this.__data__=[],this.size=0}TU.exports=Xie});var Lu=O((Jxe,SU)=>{var jie=FE();function zie(t,e){for(var r=t.length;r--;)if(jie(t[r][0],e))return r;return-1}SU.exports=zie});var AU=O((Qxe,RU)=>{var Kie=Lu(),Jie=Array.prototype,Qie=Jie.splice;function Zie(t){var e=this.__data__,r=Kie(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():Qie.call(e,r,1),--this.size,!0}RU.exports=Zie});var _U=O((Zxe,mU)=>{var ese=Lu();function tse(t){var e=this.__data__,r=ese(e,t);return r<0?void 0:e[r][1]}mU.exports=tse});var gU=O((eMe,IU)=>{var rse=Lu();function nse(t){return rse(this.__data__,t)>-1}IU.exports=nse});var OU=O((tMe,NU)=>{var ise=Lu();function sse(t,e){var r=this.__data__,n=ise(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}NU.exports=sse});var yU=O((rMe,CU)=>{var ose=pU(),ase=AU(),lse=_U(),cse=gU(),use=OU();function El(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}El.prototype.clear=ose;El.prototype.delete=ase;El.prototype.get=lse;El.prototype.has=cse;El.prototype.set=use;CU.exports=El});var wU=O((nMe,bU)=>{var dse=au(),fse=za(),Ese=dse(fse,"Map");bU.exports=Ese});var PU=O((iMe,DU)=>{var LU=hU(),hse=yU(),Tse=wU();function pse(){this.size=0,this.__data__={hash:new LU,map:new(Tse||hse),string:new LU}}DU.exports=pse});var MU=O((sMe,xU)=>{function Sse(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}xU.exports=Sse});var Du=O((oMe,vU)=>{var Rse=MU();function Ase(t,e){var r=t.__data__;return Rse(e)?r[typeof e=="string"?"string":"hash"]:r.map}vU.exports=Ase});var BU=O((aMe,UU)=>{var mse=Du();function _se(t){var e=mse(this,t).delete(t);return this.size-=e?1:0,e}UU.exports=_se});var GU=O((lMe,FU)=>{var Ise=Du();function gse(t){return Ise(this,t).get(t)}FU.exports=gse});var WU=O((cMe,HU)=>{var Nse=Du();function Ose(t){return Nse(this,t).has(t)}HU.exports=Ose});var $U=O((uMe,kU)=>{var Cse=Du();function yse(t,e){var r=Cse(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}kU.exports=yse});var VU=O((dMe,YU)=>{var bse=PU(),wse=BU(),Lse=GU(),Dse=WU(),Pse=$U();function hl(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}hl.prototype.clear=bse;hl.prototype.delete=wse;hl.prototype.get=Lse;hl.prototype.has=Dse;hl.prototype.set=Pse;YU.exports=hl});var XU=O((fMe,qU)=>{var xse="__lodash_hash_undefined__";function Mse(t){return this.__data__.set(t,xse),this}qU.exports=Mse});var zU=O((EMe,jU)=>{function vse(t){return this.__data__.has(t)}jU.exports=vse});var R_=O((hMe,KU)=>{var Use=VU(),Bse=XU(),Fse=zU();function mh(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new Use;++e<r;)this.add(t[e])}mh.prototype.add=mh.prototype.push=Bse;mh.prototype.has=Fse;KU.exports=mh});var QU=O((TMe,JU)=>{function Gse(t,e,r,n){for(var i=t.length,s=r+(n?1:-1);n?s--:++s<i;)if(e(t[s],s,t))return s;return-1}JU.exports=Gse});var eB=O((pMe,ZU)=>{function Hse(t){return t!==t}ZU.exports=Hse});var rB=O((SMe,tB)=>{function Wse(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}tB.exports=Wse});var iB=O((RMe,nB)=>{var kse=QU(),$se=eB(),Yse=rB();function Vse(t,e,r){return e===e?Yse(t,e,r):kse(t,$se,r)}nB.exports=Vse});var A_=O((AMe,sB)=>{var qse=iB();function Xse(t,e){var r=t==null?0:t.length;return!!r&&qse(t,e,0)>-1}sB.exports=Xse});var m_=O((mMe,oB)=>{function jse(t,e,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}oB.exports=jse});var lB=O((_Me,aB)=>{function zse(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}aB.exports=zse});var __=O((IMe,cB)=>{function Kse(t,e){return t.has(e)}cB.exports=Kse});var dB=O((gMe,uB)=>{var Jse=R_(),Qse=A_(),Zse=m_(),eoe=lB(),toe=tm(),roe=__(),noe=200;function ioe(t,e,r,n){var i=-1,s=Qse,o=!0,a=t.length,l=[],c=e.length;if(!a)return l;r&&(e=eoe(e,toe(r))),n?(s=Zse,o=!1):e.length>=noe&&(s=roe,o=!1,e=new Jse(e));e:for(;++i<a;){var u=t[i],d=r==null?u:r(u);if(u=n||u!==0?u:0,o&&d===d){for(var E=c;E--;)if(e[E]===d)continue e;l.push(u)}else s(e,d,n)||l.push(u)}return l}uB.exports=ioe});var I_=O((NMe,fB)=>{var soe=GE(),ooe=Ka();function aoe(t){return ooe(t)&&soe(t)}fB.exports=aoe});var TB=O((OMe,hB)=>{var loe=dB(),coe=Ah(),uoe=BE(),EB=I_(),doe=uoe(function(t,e){return EB(t)?loe(t,coe(e,1,EB,!0)):[]});hB.exports=doe});var SB=O((CMe,pB)=>{var foe=au(),Eoe=za(),hoe=foe(Eoe,"Set");pB.exports=hoe});var AB=O((yMe,RB)=>{function Toe(){}RB.exports=Toe});var g_=O((bMe,mB)=>{function poe(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}mB.exports=poe});var IB=O((wMe,_B)=>{var N_=SB(),Soe=AB(),Roe=g_(),Aoe=1/0,moe=N_&&1/Roe(new N_([,-0]))[1]==Aoe?function(t){return new N_(t)}:Soe;_B.exports=moe});var NB=O((LMe,gB)=>{var _oe=R_(),Ioe=A_(),goe=m_(),Noe=__(),Ooe=IB(),Coe=g_(),yoe=200;function boe(t,e,r){var n=-1,i=Ioe,s=t.length,o=!0,a=[],l=a;if(r)o=!1,i=goe;else if(s>=yoe){var c=e?null:Ooe(t);if(c)return Coe(c);o=!1,i=Noe,l=new _oe}else l=e?[]:a;e:for(;++n<s;){var u=t[n],d=e?e(u):u;if(u=r||u!==0?u:0,o&&d===d){for(var E=l.length;E--;)if(l[E]===d)continue e;e&&l.push(d),a.push(u)}else i(l,d,r)||(l!==a&&l.push(d),a.push(u))}return a}gB.exports=boe});var CB=O((DMe,OB)=>{var woe=Ah(),Loe=BE(),Doe=NB(),Poe=I_(),xoe=Loe(function(t){return Doe(woe(t,1,Poe,!0))});OB.exports=xoe});var bB=O((PMe,yB)=>{function Moe(t,e){return function(r){return t(e(r))}}yB.exports=Moe});var LB=O((xMe,wB)=>{var voe=bB(),Uoe=voe(Object.getPrototypeOf,Object);wB.exports=Uoe});var xB=O((MMe,PB)=>{var Boe=su(),Foe=LB(),Goe=Ka(),Hoe="[object Object]",Woe=Function.prototype,koe=Object.prototype,DB=Woe.toString,$oe=koe.hasOwnProperty,Yoe=DB.call(Object);function Voe(t){if(!Goe(t)||Boe(t)!=Hoe)return!1;var e=Foe(t);if(e===null)return!0;var r=$oe.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&DB.call(r)==Yoe}PB.exports=Voe});var WB=O((vMe,HB)=>{var MB=lA();HB.exports=joe;var vB="\0SLASH"+Math.random()+"\0",UB="\0OPEN"+Math.random()+"\0",C_="\0CLOSE"+Math.random()+"\0",BB="\0COMMA"+Math.random()+"\0",FB="\0PERIOD"+Math.random()+"\0";function O_(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function qoe(t){return t.split("\\\\").join(vB).split("\\{").join(UB).split("\\}").join(C_).split("\\,").join(BB).split("\\.").join(FB)}function Xoe(t){return t.split(vB).join("\\").split(UB).join("{").split(C_).join("}").split(BB).join(",").split(FB).join(".")}function GB(t){if(!t)return[""];var e=[],r=MB("{","}",t);if(!r)return t.split(",");var n=r.pre,i=r.body,s=r.post,o=n.split(",");o[o.length-1]+="{"+i+"}";var a=GB(s);return s.length&&(o[o.length-1]+=a.shift(),o.push.apply(o,a)),e.push.apply(e,o),e}function joe(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),Pu(qoe(t),!0).map(Xoe)):[]}function zoe(t){return"{"+t+"}"}function Koe(t){return/^-?0\d/.test(t)}function Joe(t,e){return t<=e}function Qoe(t,e){return t>=e}function Pu(t,e){var r=[],n=MB("{","}",t);if(!n)return[t];var i=n.pre,s=n.post.length?Pu(n.post,!1):[""];if(/\$$/.test(n.pre))for(var o=0;o<s.length;o++){var a=i+"{"+n.body+"}"+s[o];r.push(a)}else{var l=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),c=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),u=l||c,d=n.body.indexOf(",")>=0;if(!u&&!d)return n.post.match(/,(?!,).*\}/)?(t=n.pre+"{"+n.body+C_+n.post,Pu(t)):[t];var E;if(u)E=n.body.split(/\.\./);else if(E=GB(n.body),E.length===1&&(E=Pu(E[0],!1).map(zoe),E.length===1))return s.map(function(P){return n.pre+E[0]+P});var f;if(u){var T=O_(E[0]),h=O_(E[1]),p=Math.max(E[0].length,E[1].length),S=E.length==3?Math.abs(O_(E[2])):1,m=Joe,R=h<T;R&&(S*=-1,m=Qoe);var A=E.some(Koe);f=[];for(var g=T;m(g,h);g+=S){var w;if(c)w=String.fromCharCode(g),w==="\\"&&(w="");else if(w=String(g),A){var I=p-w.length;if(I>0){var D=new Array(I+1).join("0");g<0?w="-"+D+w.slice(1):w=D+w}}f.push(w)}}else{f=[];for(var b=0;b<E.length;b++)f.push.apply(f,Pu(E[b],!1))}for(var b=0;b<f.length;b++)for(var o=0;o<s.length;o++){var a=i+f[b]+s[o];(!e||u||a)&&r.push(a)}}return r}});var kB=O(_h=>{"use strict";Object.defineProperty(_h,"__esModule",{value:!0});_h.assertValidPattern=void 0;var Zoe=1024*64,eae=t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>Zoe)throw new TypeError("pattern is too long")};_h.assertValidPattern=eae});var YB=O(Ih=>{"use strict";Object.defineProperty(Ih,"__esModule",{value:!0});Ih.parseClass=void 0;var tae={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},xu=t=>t.replace(/[[\]\\-]/g,"\\$&"),rae=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),$B=t=>t.join(""),nae=(t,e)=>{let r=e;if(t.charAt(r)!=="[")throw new Error("not in a brace expression");let n=[],i=[],s=r+1,o=!1,a=!1,l=!1,c=!1,u=r,d="";e:for(;s<t.length;){let h=t.charAt(s);if((h==="!"||h==="^")&&s===r+1){c=!0,s++;continue}if(h==="]"&&o&&!l){u=s+1;break}if(o=!0,h==="\\"&&!l){l=!0,s++;continue}if(h==="["&&!l){for(let[p,[S,m,R]]of Object.entries(tae))if(t.startsWith(p,s)){if(d)return["$.",!1,t.length-r,!0];s+=p.length,R?i.push(S):n.push(S),a=a||m;continue e}}if(l=!1,d){h>d?n.push(xu(d)+"-"+xu(h)):h===d&&n.push(xu(h)),d="",s++;continue}if(t.startsWith("-]",s+1)){n.push(xu(h+"-")),s+=2;continue}if(t.startsWith("-",s+1)){d=h,s+=2;continue}n.push(xu(h)),s++}if(u<s)return["",!1,0,!1];if(!n.length&&!i.length)return["$.",!1,t.length-r,!0];if(i.length===0&&n.length===1&&/^\\?.$/.test(n[0])&&!c){let h=n[0].length===2?n[0].slice(-1):n[0];return[rae(h),!1,u-r,!1]}let E="["+(c?"^":"")+$B(n)+"]",f="["+(c?"":"^")+$B(i)+"]";return[n.length&&i.length?"("+E+"|"+f+")":n.length?E:f,a,u-r,!0]};Ih.parseClass=nae});var Nh=O(gh=>{"use strict";Object.defineProperty(gh,"__esModule",{value:!0});gh.unescape=void 0;var iae=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1");gh.unescape=iae});var w_=O(yh=>{"use strict";Object.defineProperty(yh,"__esModule",{value:!0});yh.AST=void 0;var sae=YB(),Oh=Nh(),oae=new Set(["!","?","+","*","@"]),VB=t=>oae.has(t),aae="(?!(?:^|/)\\.\\.?(?:$|/))",Ch="(?!\\.)",lae=new Set(["[","."]),cae=new Set(["..","."]),uae=new Set("().*{}+?[]^$\\!"),dae=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),b_="[^/]",qB=b_+"*?",XB=b_+"+?",y_=class t{type;#e;#t;#s=!1;#n=[];#o;#m;#c;#d=!1;#a;#l;#i=!1;constructor(e,r,n={}){this.type=e,e&&(this.#t=!0),this.#o=r,this.#e=this.#o?this.#o.#e:this,this.#a=this.#e===this?n:this.#e.#a,this.#c=this.#e===this?[]:this.#e.#c,e==="!"&&!this.#e.#d&&this.#c.push(this),this.#m=this.#o?this.#o.#n.length:0}get hasMagic(){if(this.#t!==void 0)return this.#t;for(let e of this.#n)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#t=!0;return this.#t}toString(){return this.#l!==void 0?this.#l:this.type?this.#l=this.type+"("+this.#n.map(e=>String(e)).join("|")+")":this.#l=this.#n.map(e=>String(e)).join("")}#p(){if(this!==this.#e)throw new Error("should only call on root");if(this.#d)return this;this.toString(),this.#d=!0;let e;for(;e=this.#c.pop();){if(e.type!=="!")continue;let r=e,n=r.#o;for(;n;){for(let i=r.#m+1;!n.type&&i<n.#n.length;i++)for(let s of e.#n){if(typeof s=="string")throw new Error("string part in extglob AST??");s.copyIn(n.#n[i])}r=n,n=r.#o}}return this}push(...e){for(let r of e)if(r!==""){if(typeof r!="string"&&!(r instanceof t&&r.#o===this))throw new Error("invalid part: "+r);this.#n.push(r)}}toJSON(){let e=this.type===null?this.#n.slice().map(r=>typeof r=="string"?r:r.toJSON()):[this.type,...this.#n.map(r=>r.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#e||this.#e.#d&&this.#o?.type==="!")&&e.push({}),e}isStart(){if(this.#e===this)return!0;if(!this.#o?.isStart())return!1;if(this.#m===0)return!0;let e=this.#o;for(let r=0;r<this.#m;r++){let n=e.#n[r];if(!(n instanceof t&&n.type==="!"))return!1}return!0}isEnd(){if(this.#e===this||this.#o?.type==="!")return!0;if(!this.#o?.isEnd())return!1;if(!this.type)return this.#o?.isEnd();let e=this.#o?this.#o.#n.length:0;return this.#m===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let r=new t(this.type,e);for(let n of this.#n)r.copyIn(n);return r}static#S(e,r,n,i){let s=!1,o=!1,a=-1,l=!1;if(r.type===null){let f=n,T="";for(;f<e.length;){let h=e.charAt(f++);if(s||h==="\\"){s=!s,T+=h;continue}if(o){f===a+1?(h==="^"||h==="!")&&(l=!0):h==="]"&&!(f===a+2&&l)&&(o=!1),T+=h;continue}else if(h==="["){o=!0,a=f,l=!1,T+=h;continue}if(!i.noext&&VB(h)&&e.charAt(f)==="("){r.push(T),T="";let p=new t(h,r);f=t.#S(e,p,f,i),r.push(p);continue}T+=h}return r.push(T),f}let c=n+1,u=new t(null,r),d=[],E="";for(;c<e.length;){let f=e.charAt(c++);if(s||f==="\\"){s=!s,E+=f;continue}if(o){c===a+1?(f==="^"||f==="!")&&(l=!0):f==="]"&&!(c===a+2&&l)&&(o=!1),E+=f;continue}else if(f==="["){o=!0,a=c,l=!1,E+=f;continue}if(VB(f)&&e.charAt(c)==="("){u.push(E),E="";let T=new t(f,u);u.push(T),c=t.#S(e,T,c,i);continue}if(f==="|"){u.push(E),E="",d.push(u),u=new t(null,r);continue}if(f===")")return E===""&&r.#n.length===0&&(r.#i=!0),u.push(E),E="",r.push(...d,u),c;E+=f}return r.type=null,r.#t=void 0,r.#n=[e.substring(n-1)],c}static fromGlob(e,r={}){let n=new t(null,void 0,r);return t.#S(e,n,0,r),n}toMMPattern(){if(this!==this.#e)return this.#e.toMMPattern();let e=this.toString(),[r,n,i,s]=this.toRegExpSource();if(!(i||this.#t||this.#a.nocase&&!this.#a.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return n;let a=(this.#a.nocase?"i":"")+(s?"u":"");return Object.assign(new RegExp(`^${r}$`,a),{_src:r,_glob:e})}get options(){return this.#a}toRegExpSource(e){let r=e??!!this.#a.dot;if(this.#e===this&&this.#p(),!this.type){let l=this.isStart()&&this.isEnd(),c=this.#n.map(f=>{let[T,h,p,S]=typeof f=="string"?t.#f(f,this.#t,l):f.toRegExpSource(e);return this.#t=this.#t||p,this.#s=this.#s||S,T}).join(""),u="";if(this.isStart()&&typeof this.#n[0]=="string"&&!(this.#n.length===1&&cae.has(this.#n[0]))){let T=lae,h=r&&T.has(c.charAt(0))||c.startsWith("\\.")&&T.has(c.charAt(2))||c.startsWith("\\.\\.")&&T.has(c.charAt(4)),p=!r&&!e&&T.has(c.charAt(0));u=h?aae:p?Ch:""}let d="";return this.isEnd()&&this.#e.#d&&this.#o?.type==="!"&&(d="(?:$|\\/)"),[u+c+d,(0,Oh.unescape)(c),this.#t=!!this.#t,this.#s]}let n=this.type==="*"||this.type==="+",i=this.type==="!"?"(?:(?!(?:":"(?:",s=this.#E(r);if(this.isStart()&&this.isEnd()&&!s&&this.type!=="!"){let l=this.toString();return this.#n=[l],this.type=null,this.#t=void 0,[l,(0,Oh.unescape)(this.toString()),!1,!1]}let o=!n||e||r||!Ch?"":this.#E(!0);o===s&&(o=""),o&&(s=`(?:${s})(?:${o})*?`);let a="";if(this.type==="!"&&this.#i)a=(this.isStart()&&!r?Ch:"")+XB;else{let l=this.type==="!"?"))"+(this.isStart()&&!r&&!e?Ch:"")+qB+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&o?")":this.type==="*"&&o?")?":`)${this.type}`;a=i+s+l}return[a,(0,Oh.unescape)(s),this.#t=!!this.#t,this.#s]}#E(e){return this.#n.map(r=>{if(typeof r=="string")throw new Error("string type in extglob ast??");let[n,i,s,o]=r.toRegExpSource(e);return this.#s=this.#s||o,n}).filter(r=>!(this.isStart()&&this.isEnd())||!!r).join("|")}static#f(e,r,n=!1){let i=!1,s="",o=!1;for(let a=0;a<e.length;a++){let l=e.charAt(a);if(i){i=!1,s+=(uae.has(l)?"\\":"")+l;continue}if(l==="\\"){a===e.length-1?s+="\\\\":i=!0;continue}if(l==="["){let[c,u,d,E]=(0,sae.parseClass)(e,a);if(d){s+=c,o=o||u,a+=d-1,r=r||E;continue}}if(l==="*"){n&&e==="*"?s+=XB:s+=qB,r=!0;continue}if(l==="?"){s+=b_,r=!0;continue}s+=dae(l)}return[s,(0,Oh.unescape)(e),!!r,o]}};yh.AST=y_});var L_=O(bh=>{"use strict";Object.defineProperty(bh,"__esModule",{value:!0});bh.escape=void 0;var fae=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&");bh.escape=fae});var bs=O(Q=>{"use strict";var Eae=Q&&Q.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Q,"__esModule",{value:!0});Q.unescape=Q.escape=Q.AST=Q.Minimatch=Q.match=Q.makeRe=Q.braceExpand=Q.defaults=Q.filter=Q.GLOBSTAR=Q.sep=Q.minimatch=void 0;var hae=Eae(WB()),wh=kB(),KB=w_(),Tae=L_(),pae=Nh(),Sae=(t,e,r={})=>((0,wh.assertValidPattern)(e),!r.nocomment&&e.charAt(0)==="#"?!1:new Co(e,r).match(t));Q.minimatch=Sae;var Rae=/^\*+([^+@!?\*\[\(]*)$/,Aae=t=>e=>!e.startsWith(".")&&e.endsWith(t),mae=t=>e=>e.endsWith(t),_ae=t=>(t=t.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(t)),Iae=t=>(t=t.toLowerCase(),e=>e.toLowerCase().endsWith(t)),gae=/^\*+\.\*+$/,Nae=t=>!t.startsWith(".")&&t.includes("."),Oae=t=>t!=="."&&t!==".."&&t.includes("."),Cae=/^\.\*+$/,yae=t=>t!=="."&&t!==".."&&t.startsWith("."),bae=/^\*+$/,wae=t=>t.length!==0&&!t.startsWith("."),Lae=t=>t.length!==0&&t!=="."&&t!=="..",Dae=/^\?+([^+@!?\*\[\(]*)?$/,Pae=([t,e=""])=>{let r=JB([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},xae=([t,e=""])=>{let r=QB([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},Mae=([t,e=""])=>{let r=QB([t]);return e?n=>r(n)&&n.endsWith(e):r},vae=([t,e=""])=>{let r=JB([t]);return e?n=>r(n)&&n.endsWith(e):r},JB=([t])=>{let e=t.length;return r=>r.length===e&&!r.startsWith(".")},QB=([t])=>{let e=t.length;return r=>r.length===e&&r!=="."&&r!==".."},ZB=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",jB={win32:{sep:"\\"},posix:{sep:"/"}};Q.sep=ZB==="win32"?jB.win32.sep:jB.posix.sep;Q.minimatch.sep=Q.sep;Q.GLOBSTAR=Symbol("globstar **");Q.minimatch.GLOBSTAR=Q.GLOBSTAR;var Uae="[^/]",Bae=Uae+"*?",Fae="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",Gae="(?:(?!(?:\\/|^)\\.).)*?",Hae=(t,e={})=>r=>(0,Q.minimatch)(r,t,e);Q.filter=Hae;Q.minimatch.filter=Q.filter;var En=(t,e={})=>Object.assign({},t,e),Wae=t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return Q.minimatch;let e=Q.minimatch;return Object.assign((n,i,s={})=>e(n,i,En(t,s)),{Minimatch:class extends e.Minimatch{constructor(i,s={}){super(i,En(t,s))}static defaults(i){return e.defaults(En(t,i)).Minimatch}},AST:class extends e.AST{constructor(i,s,o={}){super(i,s,En(t,o))}static fromGlob(i,s={}){return e.AST.fromGlob(i,En(t,s))}},unescape:(n,i={})=>e.unescape(n,En(t,i)),escape:(n,i={})=>e.escape(n,En(t,i)),filter:(n,i={})=>e.filter(n,En(t,i)),defaults:n=>e.defaults(En(t,n)),makeRe:(n,i={})=>e.makeRe(n,En(t,i)),braceExpand:(n,i={})=>e.braceExpand(n,En(t,i)),match:(n,i,s={})=>e.match(n,i,En(t,s)),sep:e.sep,GLOBSTAR:Q.GLOBSTAR})};Q.defaults=Wae;Q.minimatch.defaults=Q.defaults;var kae=(t,e={})=>((0,wh.assertValidPattern)(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:(0,hae.default)(t));Q.braceExpand=kae;Q.minimatch.braceExpand=Q.braceExpand;var $ae=(t,e={})=>new Co(t,e).makeRe();Q.makeRe=$ae;Q.minimatch.makeRe=Q.makeRe;var Yae=(t,e,r={})=>{let n=new Co(e,r);return t=t.filter(i=>n.match(i)),n.options.nonull&&!t.length&&t.push(e),t};Q.match=Yae;Q.minimatch.match=Q.match;var zB=/[?*]|[+@!]\(.*?\)|\[|\]/,Vae=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Co=class{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,r={}){(0,wh.assertValidPattern)(e),r=r||{},this.options=r,this.pattern=e,this.platform=r.platform||ZB,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!r.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!r.nonegate,this.comment=!1,this.empty=!1,this.partial=!!r.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=r.windowsNoMagicRoot!==void 0?r.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let r of e)if(typeof r!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,r=this.options;if(!r.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],r.debug&&(this.debug=(...s)=>console.error(...s)),this.debug(this.pattern,this.globSet);let n=this.globSet.map(s=>this.slashSplit(s));this.globParts=this.preprocess(n),this.debug(this.pattern,this.globParts);let i=this.globParts.map((s,o,a)=>{if(this.isWindows&&this.windowsNoMagicRoot){let l=s[0]===""&&s[1]===""&&(s[2]==="?"||!zB.test(s[2]))&&!zB.test(s[3]),c=/^[a-z]:/i.test(s[0]);if(l)return[...s.slice(0,4),...s.slice(4).map(u=>this.parse(u))];if(c)return[s[0],...s.slice(1).map(u=>this.parse(u))]}return s.map(l=>this.parse(l))});if(this.debug(this.pattern,i),this.set=i.filter(s=>s.indexOf(!1)===-1),this.isWindows)for(let s=0;s<this.set.length;s++){let o=this.set[s];o[0]===""&&o[1]===""&&this.globParts[s][2]==="?"&&typeof o[3]=="string"&&/^[a-z]:$/i.test(o[3])&&(o[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let n=0;n<e.length;n++)for(let i=0;i<e[n].length;i++)e[n][i]==="**"&&(e[n][i]="*");let{optimizationLevel:r=1}=this.options;return r>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):r>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(r=>{let n=-1;for(;(n=r.indexOf("**",n+1))!==-1;){let i=n;for(;r[i+1]==="**";)i++;i!==n&&r.splice(n,i-n)}return r})}levelOneOptimize(e){return e.map(r=>(r=r.reduce((n,i)=>{let s=n[n.length-1];return i==="**"&&s==="**"?n:i===".."&&s&&s!==".."&&s!=="."&&s!=="**"?(n.pop(),n):(n.push(i),n)},[]),r.length===0?[""]:r))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let r=!1;do{if(r=!1,!this.preserveMultipleSlashes){for(let i=1;i<e.length-1;i++){let s=e[i];i===1&&s===""&&e[0]===""||(s==="."||s==="")&&(r=!0,e.splice(i,1),i--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(r=!0,e.pop())}let n=0;for(;(n=e.indexOf("..",n+1))!==-1;){let i=e[n-1];i&&i!=="."&&i!==".."&&i!=="**"&&(r=!0,e.splice(n-1,2),n-=2)}}while(r);return e.length===0?[""]:e}firstPhasePreProcess(e){let r=!1;do{r=!1;for(let n of e){let i=-1;for(;(i=n.indexOf("**",i+1))!==-1;){let o=i;for(;n[o+1]==="**";)o++;o>i&&n.splice(i+1,o-i);let a=n[i+1],l=n[i+2],c=n[i+3];if(a!==".."||!l||l==="."||l===".."||!c||c==="."||c==="..")continue;r=!0,n.splice(i,1);let u=n.slice(0);u[i]="**",e.push(u),i--}if(!this.preserveMultipleSlashes){for(let o=1;o<n.length-1;o++){let a=n[o];o===1&&a===""&&n[0]===""||(a==="."||a==="")&&(r=!0,n.splice(o,1),o--)}n[0]==="."&&n.length===2&&(n[1]==="."||n[1]==="")&&(r=!0,n.pop())}let s=0;for(;(s=n.indexOf("..",s+1))!==-1;){let o=n[s-1];if(o&&o!=="."&&o!==".."&&o!=="**"){r=!0;let l=s===1&&n[s+1]==="**"?["."]:[];n.splice(s-1,2,...l),n.length===0&&n.push(""),s-=2}}}}while(r);return e}secondPhasePreProcess(e){for(let r=0;r<e.length-1;r++)for(let n=r+1;n<e.length;n++){let i=this.partsMatch(e[r],e[n],!this.preserveMultipleSlashes);if(i){e[r]=[],e[n]=i;break}}return e.filter(r=>r.length)}partsMatch(e,r,n=!1){let i=0,s=0,o=[],a="";for(;i<e.length&&s<r.length;)if(e[i]===r[s])o.push(a==="b"?r[s]:e[i]),i++,s++;else if(n&&e[i]==="**"&&r[s]===e[i+1])o.push(e[i]),i++;else if(n&&r[s]==="**"&&e[i]===r[s+1])o.push(r[s]),s++;else if(e[i]==="*"&&r[s]&&(this.options.dot||!r[s].startsWith("."))&&r[s]!=="**"){if(a==="b")return!1;a="a",o.push(e[i]),i++,s++}else if(r[s]==="*"&&e[i]&&(this.options.dot||!e[i].startsWith("."))&&e[i]!=="**"){if(a==="a")return!1;a="b",o.push(r[s]),i++,s++}else return!1;return e.length===r.length&&o}parseNegate(){if(this.nonegate)return;let e=this.pattern,r=!1,n=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)r=!r,n++;n&&(this.pattern=e.slice(n)),this.negate=r}matchOne(e,r,n=!1){let i=this.options;if(this.isWindows){let h=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),p=!h&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),S=typeof r[0]=="string"&&/^[a-z]:$/i.test(r[0]),m=!S&&r[0]===""&&r[1]===""&&r[2]==="?"&&typeof r[3]=="string"&&/^[a-z]:$/i.test(r[3]),R=p?3:h?0:void 0,A=m?3:S?0:void 0;if(typeof R=="number"&&typeof A=="number"){let[g,w]=[e[R],r[A]];g.toLowerCase()===w.toLowerCase()&&(r[A]=g,A>R?r=r.slice(A):R>A&&(e=e.slice(R)))}}let{optimizationLevel:s=1}=this.options;s>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:r}),this.debug("matchOne",e.length,r.length);for(var o=0,a=0,l=e.length,c=r.length;o<l&&a<c;o++,a++){this.debug("matchOne loop");var u=r[a],d=e[o];if(this.debug(r,u,d),u===!1)return!1;if(u===Q.GLOBSTAR){this.debug("GLOBSTAR",[r,u,d]);var E=o,f=a+1;if(f===c){for(this.debug("** at the end");o<l;o++)if(e[o]==="."||e[o]===".."||!i.dot&&e[o].charAt(0)===".")return!1;return!0}for(;E<l;){var T=e[E];if(this.debug(`
globstar while`,e,E,r,f,T),this.matchOne(e.slice(E),r.slice(f),n))return this.debug("globstar found match!",E,l,T),!0;if(T==="."||T===".."||!i.dot&&T.charAt(0)==="."){this.debug("dot detected!",e,E,r,f);break}this.debug("globstar swallow a segment, and continue"),E++}return!!(n&&(this.debug(`
>>> no match, partial?`,e,E,r,f),E===l))}let h;if(typeof u=="string"?(h=d===u,this.debug("string match",u,d,h)):(h=u.test(d),this.debug("pattern match",u,d,h)),!h)return!1}if(o===l&&a===c)return!0;if(o===l)return n;if(a===c)return o===l-1&&e[o]==="";throw new Error("wtf?")}braceExpand(){return(0,Q.braceExpand)(this.pattern,this.options)}parse(e){(0,wh.assertValidPattern)(e);let r=this.options;if(e==="**")return Q.GLOBSTAR;if(e==="")return"";let n,i=null;(n=e.match(bae))?i=r.dot?Lae:wae:(n=e.match(Rae))?i=(r.nocase?r.dot?Iae:_ae:r.dot?mae:Aae)(n[1]):(n=e.match(Dae))?i=(r.nocase?r.dot?xae:Pae:r.dot?Mae:vae)(n):(n=e.match(gae))?i=r.dot?Oae:Nae:(n=e.match(Cae))&&(i=yae);let s=KB.AST.fromGlob(e,this.options).toMMPattern();return i&&typeof s=="object"&&Reflect.defineProperty(s,"test",{value:i}),s}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let r=this.options,n=r.noglobstar?Bae:r.dot?Fae:Gae,i=new Set(r.nocase?["i"]:[]),s=e.map(l=>{let c=l.map(u=>{if(u instanceof RegExp)for(let d of u.flags.split(""))i.add(d);return typeof u=="string"?Vae(u):u===Q.GLOBSTAR?Q.GLOBSTAR:u._src});return c.forEach((u,d)=>{let E=c[d+1],f=c[d-1];u!==Q.GLOBSTAR||f===Q.GLOBSTAR||(f===void 0?E!==void 0&&E!==Q.GLOBSTAR?c[d+1]="(?:\\/|"+n+"\\/)?"+E:c[d]=n:E===void 0?c[d-1]=f+"(?:\\/|"+n+")?":E!==Q.GLOBSTAR&&(c[d-1]=f+"(?:\\/|\\/"+n+"\\/)"+E,c[d+1]=Q.GLOBSTAR))}),c.filter(u=>u!==Q.GLOBSTAR).join("/")}).join("|"),[o,a]=e.length>1?["(?:",")"]:["",""];s="^"+o+s+a+"$",this.negate&&(s="^(?!"+s+").+$");try{this.regexp=new RegExp(s,[...i].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,r=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&r)return!0;let n=this.options;this.isWindows&&(e=e.split("\\").join("/"));let i=this.slashSplit(e);this.debug(this.pattern,"split",i);let s=this.set;this.debug(this.pattern,"set",s);let o=i[i.length-1];if(!o)for(let a=i.length-2;!o&&a>=0;a--)o=i[a];for(let a=0;a<s.length;a++){let l=s[a],c=i;if(n.matchBase&&l.length===1&&(c=[o]),this.matchOne(c,l,r))return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate}static defaults(e){return Q.minimatch.defaults(e).Minimatch}};Q.Minimatch=Co;var qae=w_();Object.defineProperty(Q,"AST",{enumerable:!0,get:function(){return qae.AST}});var Xae=L_();Object.defineProperty(Q,"escape",{enumerable:!0,get:function(){return Xae.escape}});var jae=Nh();Object.defineProperty(Q,"unescape",{enumerable:!0,get:function(){return jae.unescape}});Q.minimatch.AST=KB.AST;Q.minimatch.Minimatch=Co;Q.minimatch.escape=Tae.escape;Q.minimatch.unescape=pae.unescape});var iF=O(Dh=>{"use strict";Object.defineProperty(Dh,"__esModule",{value:!0});Dh.LRUCache=void 0;var Tl=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,tF=new Set,D_=typeof process=="object"&&process?process:{},rF=(t,e,r,n)=>{typeof D_.emitWarning=="function"?D_.emitWarning(t,e,r,n):console.error(`[${r}] ${e}: ${t}`)},Lh=globalThis.AbortController,eF=globalThis.AbortSignal;if(typeof Lh>"u"){eF=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(n,i){this._onabort.push(i)}},Lh=class{constructor(){e()}signal=new eF;abort(n){if(!this.signal.aborted){this.signal.reason=n,this.signal.aborted=!0;for(let i of this.signal._onabort)i(n);this.signal.onabort?.(n)}}};let t=D_.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",e=()=>{t&&(t=!1,rF("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}var zae=t=>!tF.has(t),ws=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),nF=t=>ws(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?pl:null:null,pl=class extends Array{constructor(e){super(e),this.fill(0)}},P_=class t{heap;length;static#e=!1;static create(e){let r=nF(e);if(!r)return[];t.#e=!0;let n=new t(e,r);return t.#e=!1,n}constructor(e,r){if(!t.#e)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new r(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},x_=class t{#e;#t;#s;#n;#o;#m;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#c;#d;#a;#l;#i;#p;#S;#E;#f;#g;#T;#N;#O;#A;#_;#I;#h;static unsafeExposeInternals(e){return{starts:e.#O,ttls:e.#A,sizes:e.#N,keyMap:e.#a,keyList:e.#l,valList:e.#i,next:e.#p,prev:e.#S,get head(){return e.#E},get tail(){return e.#f},free:e.#g,isBackgroundFetch:r=>e.#u(r),backgroundFetch:(r,n,i,s)=>e.#F(r,n,i,s),moveToTail:r=>e.#H(r),indexes:r=>e.#y(r),rindexes:r=>e.#b(r),isStale:r=>e.#R(r)}}get max(){return this.#e}get maxSize(){return this.#t}get calculatedSize(){return this.#d}get size(){return this.#c}get fetchMethod(){return this.#o}get memoMethod(){return this.#m}get dispose(){return this.#s}get disposeAfter(){return this.#n}constructor(e){let{max:r=0,ttl:n,ttlResolution:i=1,ttlAutopurge:s,updateAgeOnGet:o,updateAgeOnHas:a,allowStale:l,dispose:c,disposeAfter:u,noDisposeOnSet:d,noUpdateTTL:E,maxSize:f=0,maxEntrySize:T=0,sizeCalculation:h,fetchMethod:p,memoMethod:S,noDeleteOnFetchRejection:m,noDeleteOnStaleGet:R,allowStaleOnFetchRejection:A,allowStaleOnFetchAbort:g,ignoreFetchAbort:w}=e;if(r!==0&&!ws(r))throw new TypeError("max option must be a nonnegative integer");let I=r?nF(r):Array;if(!I)throw new Error("invalid max value: "+r);if(this.#e=r,this.#t=f,this.maxEntrySize=T||this.#t,this.sizeCalculation=h,this.sizeCalculation){if(!this.#t&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(S!==void 0&&typeof S!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#m=S,p!==void 0&&typeof p!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#o=p,this.#I=!!p,this.#a=new Map,this.#l=new Array(r).fill(void 0),this.#i=new Array(r).fill(void 0),this.#p=new I(r),this.#S=new I(r),this.#E=0,this.#f=0,this.#g=P_.create(r),this.#c=0,this.#d=0,typeof c=="function"&&(this.#s=c),typeof u=="function"?(this.#n=u,this.#T=[]):(this.#n=void 0,this.#T=void 0),this.#_=!!this.#s,this.#h=!!this.#n,this.noDisposeOnSet=!!d,this.noUpdateTTL=!!E,this.noDeleteOnFetchRejection=!!m,this.allowStaleOnFetchRejection=!!A,this.allowStaleOnFetchAbort=!!g,this.ignoreFetchAbort=!!w,this.maxEntrySize!==0){if(this.#t!==0&&!ws(this.#t))throw new TypeError("maxSize must be a positive integer if specified");if(!ws(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#L()}if(this.allowStale=!!l,this.noDeleteOnStaleGet=!!R,this.updateAgeOnGet=!!o,this.updateAgeOnHas=!!a,this.ttlResolution=ws(i)||i===0?i:1,this.ttlAutopurge=!!s,this.ttl=n||0,this.ttl){if(!ws(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#w()}if(this.#e===0&&this.ttl===0&&this.#t===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#e&&!this.#t){let D="LRU_CACHE_UNBOUNDED";zae(D)&&(tF.add(D),rF("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",D,t))}}getRemainingTTL(e){return this.#a.has(e)?1/0:0}#w(){let e=new pl(this.#e),r=new pl(this.#e);this.#A=e,this.#O=r,this.#P=(s,o,a=Tl.now())=>{if(r[s]=o!==0?a:0,e[s]=o,o!==0&&this.ttlAutopurge){let l=setTimeout(()=>{this.#R(s)&&this.#D(this.#l[s],"expire")},o+1);l.unref&&l.unref()}},this.#C=s=>{r[s]=e[s]!==0?Tl.now():0},this.#r=(s,o)=>{if(e[o]){let a=e[o],l=r[o];if(!a||!l)return;s.ttl=a,s.start=l,s.now=n||i();let c=s.now-l;s.remainingTTL=a-c}};let n=0,i=()=>{let s=Tl.now();if(this.ttlResolution>0){n=s;let o=setTimeout(()=>n=0,this.ttlResolution);o.unref&&o.unref()}return s};this.getRemainingTTL=s=>{let o=this.#a.get(s);if(o===void 0)return 0;let a=e[o],l=r[o];if(!a||!l)return 1/0;let c=(n||i())-l;return a-c},this.#R=s=>{let o=r[s],a=e[s];return!!a&&!!o&&(n||i())-o>a}}#C=()=>{};#r=()=>{};#P=()=>{};#R=()=>!1;#L(){let e=new pl(this.#e);this.#d=0,this.#N=e,this.#x=r=>{this.#d-=e[r],e[r]=0},this.#v=(r,n,i,s)=>{if(this.#u(n))return 0;if(!ws(i))if(s){if(typeof s!="function")throw new TypeError("sizeCalculation must be a function");if(i=s(n,r),!ws(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i},this.#M=(r,n,i)=>{if(e[r]=n,this.#t){let s=this.#t-e[r];for(;this.#d>s;)this.#B(!0)}this.#d+=e[r],i&&(i.entrySize=n,i.totalCalculatedSize=this.#d)}}#x=e=>{};#M=(e,r,n)=>{};#v=(e,r,n,i)=>{if(n||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#y({allowStale:e=this.allowStale}={}){if(this.#c)for(let r=this.#f;!(!this.#U(r)||((e||!this.#R(r))&&(yield r),r===this.#E));)r=this.#S[r]}*#b({allowStale:e=this.allowStale}={}){if(this.#c)for(let r=this.#E;!(!this.#U(r)||((e||!this.#R(r))&&(yield r),r===this.#f));)r=this.#p[r]}#U(e){return e!==void 0&&this.#a.get(this.#l[e])===e}*entries(){for(let e of this.#y())this.#i[e]!==void 0&&this.#l[e]!==void 0&&!this.#u(this.#i[e])&&(yield[this.#l[e],this.#i[e]])}*rentries(){for(let e of this.#b())this.#i[e]!==void 0&&this.#l[e]!==void 0&&!this.#u(this.#i[e])&&(yield[this.#l[e],this.#i[e]])}*keys(){for(let e of this.#y()){let r=this.#l[e];r!==void 0&&!this.#u(this.#i[e])&&(yield r)}}*rkeys(){for(let e of this.#b()){let r=this.#l[e];r!==void 0&&!this.#u(this.#i[e])&&(yield r)}}*values(){for(let e of this.#y())this.#i[e]!==void 0&&!this.#u(this.#i[e])&&(yield this.#i[e])}*rvalues(){for(let e of this.#b())this.#i[e]!==void 0&&!this.#u(this.#i[e])&&(yield this.#i[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,r={}){for(let n of this.#y()){let i=this.#i[n],s=this.#u(i)?i.__staleWhileFetching:i;if(s!==void 0&&e(s,this.#l[n],this))return this.get(this.#l[n],r)}}forEach(e,r=this){for(let n of this.#y()){let i=this.#i[n],s=this.#u(i)?i.__staleWhileFetching:i;s!==void 0&&e.call(r,s,this.#l[n],this)}}rforEach(e,r=this){for(let n of this.#b()){let i=this.#i[n],s=this.#u(i)?i.__staleWhileFetching:i;s!==void 0&&e.call(r,s,this.#l[n],this)}}purgeStale(){let e=!1;for(let r of this.#b({allowStale:!0}))this.#R(r)&&(this.#D(this.#l[r],"expire"),e=!0);return e}info(e){let r=this.#a.get(e);if(r===void 0)return;let n=this.#i[r],i=this.#u(n)?n.__staleWhileFetching:n;if(i===void 0)return;let s={value:i};if(this.#A&&this.#O){let o=this.#A[r],a=this.#O[r];if(o&&a){let l=o-(Tl.now()-a);s.ttl=l,s.start=Date.now()}}return this.#N&&(s.size=this.#N[r]),s}dump(){let e=[];for(let r of this.#y({allowStale:!0})){let n=this.#l[r],i=this.#i[r],s=this.#u(i)?i.__staleWhileFetching:i;if(s===void 0||n===void 0)continue;let o={value:s};if(this.#A&&this.#O){o.ttl=this.#A[r];let a=Tl.now()-this.#O[r];o.start=Math.floor(Date.now()-a)}this.#N&&(o.size=this.#N[r]),e.unshift([n,o])}return e}load(e){this.clear();for(let[r,n]of e){if(n.start){let i=Date.now()-n.start;n.start=Tl.now()-i}this.set(r,n.value,n)}}set(e,r,n={}){if(r===void 0)return this.delete(e),this;let{ttl:i=this.ttl,start:s,noDisposeOnSet:o=this.noDisposeOnSet,sizeCalculation:a=this.sizeCalculation,status:l}=n,{noUpdateTTL:c=this.noUpdateTTL}=n,u=this.#v(e,r,n.size||0,a);if(this.maxEntrySize&&u>this.maxEntrySize)return l&&(l.set="miss",l.maxEntrySizeExceeded=!0),this.#D(e,"set"),this;let d=this.#c===0?void 0:this.#a.get(e);if(d===void 0)d=this.#c===0?this.#f:this.#g.length!==0?this.#g.pop():this.#c===this.#e?this.#B(!1):this.#c,this.#l[d]=e,this.#i[d]=r,this.#a.set(e,d),this.#p[this.#f]=d,this.#S[d]=this.#f,this.#f=d,this.#c++,this.#M(d,u,l),l&&(l.set="add"),c=!1;else{this.#H(d);let E=this.#i[d];if(r!==E){if(this.#I&&this.#u(E)){E.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:f}=E;f!==void 0&&!o&&(this.#_&&this.#s?.(f,e,"set"),this.#h&&this.#T?.push([f,e,"set"]))}else o||(this.#_&&this.#s?.(E,e,"set"),this.#h&&this.#T?.push([E,e,"set"]));if(this.#x(d),this.#M(d,u,l),this.#i[d]=r,l){l.set="replace";let f=E&&this.#u(E)?E.__staleWhileFetching:E;f!==void 0&&(l.oldValue=f)}}else l&&(l.set="update")}if(i!==0&&!this.#A&&this.#w(),this.#A&&(c||this.#P(d,i,s),l&&this.#r(l,d)),!o&&this.#h&&this.#T){let E=this.#T,f;for(;f=E?.shift();)this.#n?.(...f)}return this}pop(){try{for(;this.#c;){let e=this.#i[this.#E];if(this.#B(!0),this.#u(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#h&&this.#T){let e=this.#T,r;for(;r=e?.shift();)this.#n?.(...r)}}}#B(e){let r=this.#E,n=this.#l[r],i=this.#i[r];return this.#I&&this.#u(i)?i.__abortController.abort(new Error("evicted")):(this.#_||this.#h)&&(this.#_&&this.#s?.(i,n,"evict"),this.#h&&this.#T?.push([i,n,"evict"])),this.#x(r),e&&(this.#l[r]=void 0,this.#i[r]=void 0,this.#g.push(r)),this.#c===1?(this.#E=this.#f=0,this.#g.length=0):this.#E=this.#p[r],this.#a.delete(n),this.#c--,r}has(e,r={}){let{updateAgeOnHas:n=this.updateAgeOnHas,status:i}=r,s=this.#a.get(e);if(s!==void 0){let o=this.#i[s];if(this.#u(o)&&o.__staleWhileFetching===void 0)return!1;if(this.#R(s))i&&(i.has="stale",this.#r(i,s));else return n&&this.#C(s),i&&(i.has="hit",this.#r(i,s)),!0}else i&&(i.has="miss");return!1}peek(e,r={}){let{allowStale:n=this.allowStale}=r,i=this.#a.get(e);if(i===void 0||!n&&this.#R(i))return;let s=this.#i[i];return this.#u(s)?s.__staleWhileFetching:s}#F(e,r,n,i){let s=r===void 0?void 0:this.#i[r];if(this.#u(s))return s;let o=new Lh,{signal:a}=n;a?.addEventListener("abort",()=>o.abort(a.reason),{signal:o.signal});let l={signal:o.signal,options:n,context:i},c=(h,p=!1)=>{let{aborted:S}=o.signal,m=n.ignoreFetchAbort&&h!==void 0;if(n.status&&(S&&!p?(n.status.fetchAborted=!0,n.status.fetchError=o.signal.reason,m&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),S&&!m&&!p)return d(o.signal.reason);let R=f;return this.#i[r]===f&&(h===void 0?R.__staleWhileFetching?this.#i[r]=R.__staleWhileFetching:this.#D(e,"fetch"):(n.status&&(n.status.fetchUpdated=!0),this.set(e,h,l.options))),h},u=h=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=h),d(h)),d=h=>{let{aborted:p}=o.signal,S=p&&n.allowStaleOnFetchAbort,m=S||n.allowStaleOnFetchRejection,R=m||n.noDeleteOnFetchRejection,A=f;if(this.#i[r]===f&&(!R||A.__staleWhileFetching===void 0?this.#D(e,"fetch"):S||(this.#i[r]=A.__staleWhileFetching)),m)return n.status&&A.__staleWhileFetching!==void 0&&(n.status.returnedStale=!0),A.__staleWhileFetching;if(A.__returned===A)throw h},E=(h,p)=>{let S=this.#o?.(e,s,l);S&&S instanceof Promise&&S.then(m=>h(m===void 0?void 0:m),p),o.signal.addEventListener("abort",()=>{(!n.ignoreFetchAbort||n.allowStaleOnFetchAbort)&&(h(void 0),n.allowStaleOnFetchAbort&&(h=m=>c(m,!0)))})};n.status&&(n.status.fetchDispatched=!0);let f=new Promise(E).then(c,u),T=Object.assign(f,{__abortController:o,__staleWhileFetching:s,__returned:void 0});return r===void 0?(this.set(e,T,{...l.options,status:void 0}),r=this.#a.get(e)):this.#i[r]=T,T}#u(e){if(!this.#I)return!1;let r=e;return!!r&&r instanceof Promise&&r.hasOwnProperty("__staleWhileFetching")&&r.__abortController instanceof Lh}async fetch(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:l=0,sizeCalculation:c=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL,noDeleteOnFetchRejection:d=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:E=this.allowStaleOnFetchRejection,ignoreFetchAbort:f=this.ignoreFetchAbort,allowStaleOnFetchAbort:T=this.allowStaleOnFetchAbort,context:h,forceRefresh:p=!1,status:S,signal:m}=r;if(!this.#I)return S&&(S.fetch="get"),this.get(e,{allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:s,status:S});let R={allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:s,ttl:o,noDisposeOnSet:a,size:l,sizeCalculation:c,noUpdateTTL:u,noDeleteOnFetchRejection:d,allowStaleOnFetchRejection:E,allowStaleOnFetchAbort:T,ignoreFetchAbort:f,status:S,signal:m},A=this.#a.get(e);if(A===void 0){S&&(S.fetch="miss");let g=this.#F(e,A,R,h);return g.__returned=g}else{let g=this.#i[A];if(this.#u(g)){let P=n&&g.__staleWhileFetching!==void 0;return S&&(S.fetch="inflight",P&&(S.returnedStale=!0)),P?g.__staleWhileFetching:g.__returned=g}let w=this.#R(A);if(!p&&!w)return S&&(S.fetch="hit"),this.#H(A),i&&this.#C(A),S&&this.#r(S,A),g;let I=this.#F(e,A,R,h),b=I.__staleWhileFetching!==void 0&&n;return S&&(S.fetch=w?"stale":"refresh",b&&w&&(S.returnedStale=!0)),b?I.__staleWhileFetching:I.__returned=I}}async forceFetch(e,r={}){let n=await this.fetch(e,r);if(n===void 0)throw new Error("fetch() returned undefined");return n}memo(e,r={}){let n=this.#m;if(!n)throw new Error("no memoMethod provided to constructor");let{context:i,forceRefresh:s,...o}=r,a=this.get(e,o);if(!s&&a!==void 0)return a;let l=n(e,a,{options:o,context:i});return this.set(e,l,o),l}get(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,status:o}=r,a=this.#a.get(e);if(a!==void 0){let l=this.#i[a],c=this.#u(l);return o&&this.#r(o,a),this.#R(a)?(o&&(o.get="stale"),c?(o&&n&&l.__staleWhileFetching!==void 0&&(o.returnedStale=!0),n?l.__staleWhileFetching:void 0):(s||this.#D(e,"expire"),o&&n&&(o.returnedStale=!0),n?l:void 0)):(o&&(o.get="hit"),c?l.__staleWhileFetching:(this.#H(a),i&&this.#C(a),l))}else o&&(o.get="miss")}#G(e,r){this.#S[r]=e,this.#p[e]=r}#H(e){e!==this.#f&&(e===this.#E?this.#E=this.#p[e]:this.#G(this.#S[e],this.#p[e]),this.#G(this.#f,e),this.#f=e)}delete(e){return this.#D(e,"delete")}#D(e,r){let n=!1;if(this.#c!==0){let i=this.#a.get(e);if(i!==void 0)if(n=!0,this.#c===1)this.#W(r);else{this.#x(i);let s=this.#i[i];if(this.#u(s)?s.__abortController.abort(new Error("deleted")):(this.#_||this.#h)&&(this.#_&&this.#s?.(s,e,r),this.#h&&this.#T?.push([s,e,r])),this.#a.delete(e),this.#l[i]=void 0,this.#i[i]=void 0,i===this.#f)this.#f=this.#S[i];else if(i===this.#E)this.#E=this.#p[i];else{let o=this.#S[i];this.#p[o]=this.#p[i];let a=this.#p[i];this.#S[a]=this.#S[i]}this.#c--,this.#g.push(i)}}if(this.#h&&this.#T?.length){let i=this.#T,s;for(;s=i?.shift();)this.#n?.(...s)}return n}clear(){return this.#W("delete")}#W(e){for(let r of this.#b({allowStale:!0})){let n=this.#i[r];if(this.#u(n))n.__abortController.abort(new Error("deleted"));else{let i=this.#l[r];this.#_&&this.#s?.(n,i,e),this.#h&&this.#T?.push([n,i,e])}}if(this.#a.clear(),this.#i.fill(void 0),this.#l.fill(void 0),this.#A&&this.#O&&(this.#A.fill(0),this.#O.fill(0)),this.#N&&this.#N.fill(0),this.#E=0,this.#f=0,this.#g.length=0,this.#d=0,this.#c=0,this.#h&&this.#T){let r=this.#T,n;for(;n=r?.shift();)this.#n?.(...n)}}};Dh.LRUCache=x_});var TF=O(hF=>{"use strict";var sF=typeof process=="object"&&process?process:{stdout:null,stderr:null},Kae=require("events"),oF=require("stream"),Jae=require("string_decoder"),aF=Jae.StringDecoder,Gi=Symbol("EOF"),Hi=Symbol("maybeEmitEnd"),Ls=Symbol("emittedEnd"),Ph=Symbol("emittingEnd"),Mu=Symbol("emittedError"),xh=Symbol("closed"),lF=Symbol("read"),Mh=Symbol("flush"),cF=Symbol("flushChunk"),Xr=Symbol("encoding"),Wi=Symbol("decoder"),vh=Symbol("flowing"),vu=Symbol("paused"),Sl=Symbol("resume"),Lt=Symbol("buffer"),ei=Symbol("pipes"),Zt=Symbol("bufferLength"),M_=Symbol("bufferPush"),v_=Symbol("bufferShift"),Er=Symbol("objectMode"),Dt=Symbol("destroyed"),U_=Symbol("error"),B_=Symbol("emitData"),uF=Symbol("emitEnd"),F_=Symbol("emitEnd2"),ki=Symbol("async"),G_=Symbol("abort"),Uh=Symbol("aborted"),yo=Symbol("signal"),Uu=t=>Promise.resolve().then(t),EF=global._MP_NO_ITERATOR_SYMBOLS_!=="1",dF=EF&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),fF=EF&&Symbol.iterator||Symbol("iterator not implemented"),Qae=t=>t==="end"||t==="finish"||t==="prefinish",Zae=t=>t instanceof ArrayBuffer||typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,ele=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),Bh=class{constructor(e,r,n){this.src=e,this.dest=r,this.opts=n,this.ondrain=()=>e[Sl](),r.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},H_=class extends Bh{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,r,n){super(e,r,n),this.proxyErrors=i=>r.emit("error",i),e.on("error",this.proxyErrors)}},W_=class t extends oF{constructor(e){super(),this[vh]=!1,this[vu]=!1,this[ei]=[],this[Lt]=[],this[Er]=e&&e.objectMode||!1,this[Er]?this[Xr]=null:this[Xr]=e&&e.encoding||null,this[Xr]==="buffer"&&(this[Xr]=null),this[ki]=e&&!!e.async||!1,this[Wi]=this[Xr]?new aF(this[Xr]):null,this[Gi]=!1,this[Ls]=!1,this[Ph]=!1,this[xh]=!1,this[Mu]=null,this.writable=!0,this.readable=!0,this[Zt]=0,this[Dt]=!1,e&&e.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[Lt]}),e&&e.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[ei]}),this[yo]=e&&e.signal,this[Uh]=!1,this[yo]&&(this[yo].addEventListener("abort",()=>this[G_]()),this[yo].aborted&&this[G_]())}get bufferLength(){return this[Zt]}get encoding(){return this[Xr]}set encoding(e){if(this[Er])throw new Error("cannot set encoding in objectMode");if(this[Xr]&&e!==this[Xr]&&(this[Wi]&&this[Wi].lastNeed||this[Zt]))throw new Error("cannot change encoding");this[Xr]!==e&&(this[Wi]=e?new aF(e):null,this[Lt].length&&(this[Lt]=this[Lt].map(r=>this[Wi].write(r)))),this[Xr]=e}setEncoding(e){this.encoding=e}get objectMode(){return this[Er]}set objectMode(e){this[Er]=this[Er]||!!e}get async(){return this[ki]}set async(e){this[ki]=this[ki]||!!e}[G_](){this[Uh]=!0,this.emit("abort",this[yo].reason),this.destroy(this[yo].reason)}get aborted(){return this[Uh]}set aborted(e){}write(e,r,n){if(this[Uh])return!1;if(this[Gi])throw new Error("write after end");if(this[Dt])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof r=="function"&&(n=r,r="utf8"),r||(r="utf8");let i=this[ki]?Uu:s=>s();return!this[Er]&&!Buffer.isBuffer(e)&&(ele(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):Zae(e)?e=Buffer.from(e):typeof e!="string"&&(this.objectMode=!0)),this[Er]?(this.flowing&&this[Zt]!==0&&this[Mh](!0),this.flowing?this.emit("data",e):this[M_](e),this[Zt]!==0&&this.emit("readable"),n&&i(n),this.flowing):e.length?(typeof e=="string"&&!(r===this[Xr]&&!this[Wi].lastNeed)&&(e=Buffer.from(e,r)),Buffer.isBuffer(e)&&this[Xr]&&(e=this[Wi].write(e)),this.flowing&&this[Zt]!==0&&this[Mh](!0),this.flowing?this.emit("data",e):this[M_](e),this[Zt]!==0&&this.emit("readable"),n&&i(n),this.flowing):(this[Zt]!==0&&this.emit("readable"),n&&i(n),this.flowing)}read(e){if(this[Dt])return null;if(this[Zt]===0||e===0||e>this[Zt])return this[Hi](),null;this[Er]&&(e=null),this[Lt].length>1&&!this[Er]&&(this.encoding?this[Lt]=[this[Lt].join("")]:this[Lt]=[Buffer.concat(this[Lt],this[Zt])]);let r=this[lF](e||null,this[Lt][0]);return this[Hi](),r}[lF](e,r){return e===r.length||e===null?this[v_]():(this[Lt][0]=r.slice(e),r=r.slice(0,e),this[Zt]-=e),this.emit("data",r),!this[Lt].length&&!this[Gi]&&this.emit("drain"),r}end(e,r,n){return typeof e=="function"&&(n=e,e=null),typeof r=="function"&&(n=r,r="utf8"),e&&this.write(e,r),n&&this.once("end",n),this[Gi]=!0,this.writable=!1,(this.flowing||!this[vu])&&this[Hi](),this}[Sl](){this[Dt]||(this[vu]=!1,this[vh]=!0,this.emit("resume"),this[Lt].length?this[Mh]():this[Gi]?this[Hi]():this.emit("drain"))}resume(){return this[Sl]()}pause(){this[vh]=!1,this[vu]=!0}get destroyed(){return this[Dt]}get flowing(){return this[vh]}get paused(){return this[vu]}[M_](e){this[Er]?this[Zt]+=1:this[Zt]+=e.length,this[Lt].push(e)}[v_](){return this[Er]?this[Zt]-=1:this[Zt]-=this[Lt][0].length,this[Lt].shift()}[Mh](e){do;while(this[cF](this[v_]())&&this[Lt].length);!e&&!this[Lt].length&&!this[Gi]&&this.emit("drain")}[cF](e){return this.emit("data",e),this.flowing}pipe(e,r){if(this[Dt])return;let n=this[Ls];return r=r||{},e===sF.stdout||e===sF.stderr?r.end=!1:r.end=r.end!==!1,r.proxyErrors=!!r.proxyErrors,n?r.end&&e.end():(this[ei].push(r.proxyErrors?new H_(this,e,r):new Bh(this,e,r)),this[ki]?Uu(()=>this[Sl]()):this[Sl]()),e}unpipe(e){let r=this[ei].find(n=>n.dest===e);r&&(this[ei].splice(this[ei].indexOf(r),1),r.unpipe())}addListener(e,r){return this.on(e,r)}on(e,r){let n=super.on(e,r);return e==="data"&&!this[ei].length&&!this.flowing?this[Sl]():e==="readable"&&this[Zt]!==0?super.emit("readable"):Qae(e)&&this[Ls]?(super.emit(e),this.removeAllListeners(e)):e==="error"&&this[Mu]&&(this[ki]?Uu(()=>r.call(this,this[Mu])):r.call(this,this[Mu])),n}get emittedEnd(){return this[Ls]}[Hi](){!this[Ph]&&!this[Ls]&&!this[Dt]&&this[Lt].length===0&&this[Gi]&&(this[Ph]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[xh]&&this.emit("close"),this[Ph]=!1)}emit(e,r,...n){if(e!=="error"&&e!=="close"&&e!==Dt&&this[Dt])return;if(e==="data")return!this[Er]&&!r?!1:this[ki]?Uu(()=>this[B_](r)):this[B_](r);if(e==="end")return this[uF]();if(e==="close"){if(this[xh]=!0,!this[Ls]&&!this[Dt])return;let s=super.emit("close");return this.removeAllListeners("close"),s}else if(e==="error"){this[Mu]=r,super.emit(U_,r);let s=!this[yo]||this.listeners("error").length?super.emit("error",r):!1;return this[Hi](),s}else if(e==="resume"){let s=super.emit("resume");return this[Hi](),s}else if(e==="finish"||e==="prefinish"){let s=super.emit(e);return this.removeAllListeners(e),s}let i=super.emit(e,r,...n);return this[Hi](),i}[B_](e){for(let n of this[ei])n.dest.write(e)===!1&&this.pause();let r=super.emit("data",e);return this[Hi](),r}[uF](){this[Ls]||(this[Ls]=!0,this.readable=!1,this[ki]?Uu(()=>this[F_]()):this[F_]())}[F_](){if(this[Wi]){let r=this[Wi].end();if(r){for(let n of this[ei])n.dest.write(r);super.emit("data",r)}}for(let r of this[ei])r.end();let e=super.emit("end");return this.removeAllListeners("end"),e}collect(){let e=[];this[Er]||(e.dataLength=0);let r=this.promise();return this.on("data",n=>{e.push(n),this[Er]||(e.dataLength+=n.length)}),r.then(()=>e)}concat(){return this[Er]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then(e=>this[Er]?Promise.reject(new Error("cannot concat in objectMode")):this[Xr]?e.join(""):Buffer.concat(e,e.dataLength))}promise(){return new Promise((e,r)=>{this.on(Dt,()=>r(new Error("stream destroyed"))),this.on("error",n=>r(n)),this.on("end",()=>e())})}[dF](){let e=!1,r=()=>(this.pause(),e=!0,Promise.resolve({done:!0}));return{next:()=>{if(e)return r();let i=this.read();if(i!==null)return Promise.resolve({done:!1,value:i});if(this[Gi])return r();let s=null,o=null,a=d=>{this.removeListener("data",l),this.removeListener("end",c),this.removeListener(Dt,u),r(),o(d)},l=d=>{this.removeListener("error",a),this.removeListener("end",c),this.removeListener(Dt,u),this.pause(),s({value:d,done:!!this[Gi]})},c=()=>{this.removeListener("error",a),this.removeListener("data",l),this.removeListener(Dt,u),r(),s({done:!0})},u=()=>a(new Error("stream destroyed"));return new Promise((d,E)=>{o=E,s=d,this.once(Dt,u),this.once("error",a),this.once("end",c),this.once("data",l)})},throw:r,return:r,[dF](){return this}}}[fF](){let e=!1,r=()=>(this.pause(),this.removeListener(U_,r),this.removeListener(Dt,r),this.removeListener("end",r),e=!0,{done:!0}),n=()=>{if(e)return r();let i=this.read();return i===null?r():{value:i}};return this.once("end",r),this.once(U_,r),this.once(Dt,r),{next:n,throw:r,return:r,[fF](){return this}}}destroy(e){return this[Dt]?(e?this.emit("error",e):this.emit(Dt),this):(this[Dt]=!0,this[Lt].length=0,this[Zt]=0,typeof this.close=="function"&&!this[xh]&&this.close(),e?this.emit("error",e):this.emit(Dt),this)}static isStream(e){return!!e&&(e instanceof t||e instanceof oF||e instanceof Kae&&(typeof e.pipe=="function"||typeof e.write=="function"&&typeof e.end=="function"))}};hF.Minipass=W_});var LF=O(Xe=>{"use strict";var tle=Xe&&Xe.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),rle=Xe&&Xe.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),nle=Xe&&Xe.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&tle(e,t,r);return rle(e,t),e};Object.defineProperty(Xe,"__esModule",{value:!0});Xe.PathScurry=Xe.Path=Xe.PathScurryDarwin=Xe.PathScurryPosix=Xe.PathScurryWin32=Xe.PathScurryBase=Xe.PathPosix=Xe.PathWin32=Xe.PathBase=Xe.ChildrenCache=Xe.ResolveCache=void 0;var _F=iF(),kh=require("node:path"),ile=require("node:url"),Fu=require("fs"),sle=nle(require("node:fs")),ole=Fu.realpathSync.native,Fh=require("node:fs/promises"),pF=TF(),Gu={lstatSync:Fu.lstatSync,readdir:Fu.readdir,readdirSync:Fu.readdirSync,readlinkSync:Fu.readlinkSync,realpathSync:ole,promises:{lstat:Fh.lstat,readdir:Fh.readdir,readlink:Fh.readlink,realpath:Fh.realpath}},IF=t=>!t||t===Gu||t===sle?Gu:{...Gu,...t,promises:{...Gu.promises,...t.promises||{}}},gF=/^\\\\\?\\([a-z]:)\\?$/i,ale=t=>t.replace(/\//g,"\\").replace(gF,"$1\\"),lle=/[\\\/]/,Tn=0,NF=1,OF=2,ti=4,CF=6,yF=8,bo=10,bF=12,hn=15,Bu=~hn,k_=16,SF=32,Hu=64,Dn=128,Gh=256,Wh=512,RF=Hu|Dn|Wh,cle=1023,$_=t=>t.isFile()?yF:t.isDirectory()?ti:t.isSymbolicLink()?bo:t.isCharacterDevice()?OF:t.isBlockDevice()?CF:t.isSocket()?bF:t.isFIFO()?NF:Tn,AF=new Map,Wu=t=>{let e=AF.get(t);if(e)return e;let r=t.normalize("NFKD");return AF.set(t,r),r},mF=new Map,Hh=t=>{let e=mF.get(t);if(e)return e;let r=Wu(t.toLowerCase());return mF.set(t,r),r},ku=class extends _F.LRUCache{constructor(){super({max:256})}};Xe.ResolveCache=ku;var $h=class extends _F.LRUCache{constructor(e=16*1024){super({maxSize:e,sizeCalculation:r=>r.length+1})}};Xe.ChildrenCache=$h;var wF=Symbol("PathScurry setAsCwd"),hr=class{name;root;roots;parent;nocase;isCWD=!1;#e;#t;get dev(){return this.#t}#s;get mode(){return this.#s}#n;get nlink(){return this.#n}#o;get uid(){return this.#o}#m;get gid(){return this.#m}#c;get rdev(){return this.#c}#d;get blksize(){return this.#d}#a;get ino(){return this.#a}#l;get size(){return this.#l}#i;get blocks(){return this.#i}#p;get atimeMs(){return this.#p}#S;get mtimeMs(){return this.#S}#E;get ctimeMs(){return this.#E}#f;get birthtimeMs(){return this.#f}#g;get atime(){return this.#g}#T;get mtime(){return this.#T}#N;get ctime(){return this.#N}#O;get birthtime(){return this.#O}#A;#_;#I;#h;#w;#C;#r;#P;#R;#L;get parentPath(){return(this.parent||this).fullpath()}get path(){return this.parentPath}constructor(e,r=Tn,n,i,s,o,a){this.name=e,this.#A=s?Hh(e):Wu(e),this.#r=r&cle,this.nocase=s,this.roots=i,this.root=n||this,this.#P=o,this.#I=a.fullpath,this.#w=a.relative,this.#C=a.relativePosix,this.parent=a.parent,this.parent?this.#e=this.parent.#e:this.#e=IF(a.fs)}depth(){return this.#_!==void 0?this.#_:this.parent?this.#_=this.parent.depth()+1:this.#_=0}childrenCache(){return this.#P}resolve(e){if(!e)return this;let r=this.getRootString(e),i=e.substring(r.length).split(this.splitSep);return r?this.getRoot(r).#x(i):this.#x(i)}#x(e){let r=this;for(let n of e)r=r.child(n);return r}children(){let e=this.#P.get(this);if(e)return e;let r=Object.assign([],{provisional:0});return this.#P.set(this,r),this.#r&=~k_,r}child(e,r){if(e===""||e===".")return this;if(e==="..")return this.parent||this;let n=this.children(),i=this.nocase?Hh(e):Wu(e);for(let l of n)if(l.#A===i)return l;let s=this.parent?this.sep:"",o=this.#I?this.#I+s+e:void 0,a=this.newChild(e,Tn,{...r,parent:this,fullpath:o});return this.canReaddir()||(a.#r|=Dn),n.push(a),a}relative(){if(this.isCWD)return"";if(this.#w!==void 0)return this.#w;let e=this.name,r=this.parent;if(!r)return this.#w=this.name;let n=r.relative();return n+(!n||!r.parent?"":this.sep)+e}relativePosix(){if(this.sep==="/")return this.relative();if(this.isCWD)return"";if(this.#C!==void 0)return this.#C;let e=this.name,r=this.parent;if(!r)return this.#C=this.fullpathPosix();let n=r.relativePosix();return n+(!n||!r.parent?"":"/")+e}fullpath(){if(this.#I!==void 0)return this.#I;let e=this.name,r=this.parent;if(!r)return this.#I=this.name;let i=r.fullpath()+(r.parent?this.sep:"")+e;return this.#I=i}fullpathPosix(){if(this.#h!==void 0)return this.#h;if(this.sep==="/")return this.#h=this.fullpath();if(!this.parent){let i=this.fullpath().replace(/\\/g,"/");return/^[a-z]:\//i.test(i)?this.#h=`//?/${i}`:this.#h=i}let e=this.parent,r=e.fullpathPosix(),n=r+(!r||!e.parent?"":"/")+this.name;return this.#h=n}isUnknown(){return(this.#r&hn)===Tn}isType(e){return this[`is${e}`]()}getType(){return this.isUnknown()?"Unknown":this.isDirectory()?"Directory":this.isFile()?"File":this.isSymbolicLink()?"SymbolicLink":this.isFIFO()?"FIFO":this.isCharacterDevice()?"CharacterDevice":this.isBlockDevice()?"BlockDevice":this.isSocket()?"Socket":"Unknown"}isFile(){return(this.#r&hn)===yF}isDirectory(){return(this.#r&hn)===ti}isCharacterDevice(){return(this.#r&hn)===OF}isBlockDevice(){return(this.#r&hn)===CF}isFIFO(){return(this.#r&hn)===NF}isSocket(){return(this.#r&hn)===bF}isSymbolicLink(){return(this.#r&bo)===bo}lstatCached(){return this.#r&SF?this:void 0}readlinkCached(){return this.#R}realpathCached(){return this.#L}readdirCached(){let e=this.children();return e.slice(0,e.provisional)}canReadlink(){if(this.#R)return!0;if(!this.parent)return!1;let e=this.#r&hn;return!(e!==Tn&&e!==bo||this.#r&Gh||this.#r&Dn)}calledReaddir(){return!!(this.#r&k_)}isENOENT(){return!!(this.#r&Dn)}isNamed(e){return this.nocase?this.#A===Hh(e):this.#A===Wu(e)}async readlink(){let e=this.#R;if(e)return e;if(this.canReadlink()&&this.parent)try{let r=await this.#e.promises.readlink(this.fullpath()),n=(await this.parent.realpath())?.resolve(r);if(n)return this.#R=n}catch(r){this.#u(r.code);return}}readlinkSync(){let e=this.#R;if(e)return e;if(this.canReadlink()&&this.parent)try{let r=this.#e.readlinkSync(this.fullpath()),n=this.parent.realpathSync()?.resolve(r);if(n)return this.#R=n}catch(r){this.#u(r.code);return}}#M(e){this.#r|=k_;for(let r=e.provisional;r<e.length;r++){let n=e[r];n&&n.#v()}}#v(){this.#r&Dn||(this.#r=(this.#r|Dn)&Bu,this.#y())}#y(){let e=this.children();e.provisional=0;for(let r of e)r.#v()}#b(){this.#r|=Wh,this.#U()}#U(){if(this.#r&Hu)return;let e=this.#r;(e&hn)===ti&&(e&=Bu),this.#r=e|Hu,this.#y()}#B(e=""){e==="ENOTDIR"||e==="EPERM"?this.#U():e==="ENOENT"?this.#v():this.children().provisional=0}#F(e=""){e==="ENOTDIR"?this.parent.#U():e==="ENOENT"&&this.#v()}#u(e=""){let r=this.#r;r|=Gh,e==="ENOENT"&&(r|=Dn),(e==="EINVAL"||e==="UNKNOWN")&&(r&=Bu),this.#r=r,e==="ENOTDIR"&&this.parent&&this.parent.#U()}#G(e,r){return this.#D(e,r)||this.#H(e,r)}#H(e,r){let n=$_(e),i=this.newChild(e.name,n,{parent:this}),s=i.#r&hn;return s!==ti&&s!==bo&&s!==Tn&&(i.#r|=Hu),r.unshift(i),r.provisional++,i}#D(e,r){for(let n=r.provisional;n<r.length;n++){let i=r[n];if((this.nocase?Hh(e.name):Wu(e.name))===i.#A)return this.#W(e,i,n,r)}}#W(e,r,n,i){let s=r.name;return r.#r=r.#r&Bu|$_(e),s!==e.name&&(r.name=e.name),n!==i.provisional&&(n===i.length-1?i.pop():i.splice(n,1),i.unshift(r)),i.provisional++,r}async lstat(){if((this.#r&Dn)===0)try{return this.#V(await this.#e.promises.lstat(this.fullpath())),this}catch(e){this.#F(e.code)}}lstatSync(){if((this.#r&Dn)===0)try{return this.#V(this.#e.lstatSync(this.fullpath())),this}catch(e){this.#F(e.code)}}#V(e){let{atime:r,atimeMs:n,birthtime:i,birthtimeMs:s,blksize:o,blocks:a,ctime:l,ctimeMs:c,dev:u,gid:d,ino:E,mode:f,mtime:T,mtimeMs:h,nlink:p,rdev:S,size:m,uid:R}=e;this.#g=r,this.#p=n,this.#O=i,this.#f=s,this.#d=o,this.#i=a,this.#N=l,this.#E=c,this.#t=u,this.#m=d,this.#a=E,this.#s=f,this.#T=T,this.#S=h,this.#n=p,this.#c=S,this.#l=m,this.#o=R;let A=$_(e);this.#r=this.#r&Bu|A|SF,A!==Tn&&A!==ti&&A!==bo&&(this.#r|=Hu)}#$=[];#Y=!1;#q(e){this.#Y=!1;let r=this.#$.slice();this.#$.length=0,r.forEach(n=>n(null,e))}readdirCB(e,r=!1){if(!this.canReaddir()){r?e(null,[]):queueMicrotask(()=>e(null,[]));return}let n=this.children();if(this.calledReaddir()){let s=n.slice(0,n.provisional);r?e(null,s):queueMicrotask(()=>e(null,s));return}if(this.#$.push(e),this.#Y)return;this.#Y=!0;let i=this.fullpath();this.#e.readdir(i,{withFileTypes:!0},(s,o)=>{if(s)this.#B(s.code),n.provisional=0;else{for(let a of o)this.#G(a,n);this.#M(n)}this.#q(n.slice(0,n.provisional))})}#k;async readdir(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let r=this.fullpath();if(this.#k)await this.#k;else{let n=()=>{};this.#k=new Promise(i=>n=i);try{for(let i of await this.#e.promises.readdir(r,{withFileTypes:!0}))this.#G(i,e);this.#M(e)}catch(i){this.#B(i.code),e.provisional=0}this.#k=void 0,n()}return e.slice(0,e.provisional)}readdirSync(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let r=this.fullpath();try{for(let n of this.#e.readdirSync(r,{withFileTypes:!0}))this.#G(n,e);this.#M(e)}catch(n){this.#B(n.code),e.provisional=0}return e.slice(0,e.provisional)}canReaddir(){if(this.#r&RF)return!1;let e=hn&this.#r;return e===Tn||e===ti||e===bo}shouldWalk(e,r){return(this.#r&ti)===ti&&!(this.#r&RF)&&!e.has(this)&&(!r||r(this))}async realpath(){if(this.#L)return this.#L;if(!((Wh|Gh|Dn)&this.#r))try{let e=await this.#e.promises.realpath(this.fullpath());return this.#L=this.resolve(e)}catch{this.#b()}}realpathSync(){if(this.#L)return this.#L;if(!((Wh|Gh|Dn)&this.#r))try{let e=this.#e.realpathSync(this.fullpath());return this.#L=this.resolve(e)}catch{this.#b()}}[wF](e){if(e===this)return;e.isCWD=!1,this.isCWD=!0;let r=new Set([]),n=[],i=this;for(;i&&i.parent;)r.add(i),i.#w=n.join(this.sep),i.#C=n.join("/"),i=i.parent,n.push("..");for(i=e;i&&i.parent&&!r.has(i);)i.#w=void 0,i.#C=void 0,i=i.parent}};Xe.PathBase=hr;var $u=class t extends hr{sep="\\";splitSep=lle;constructor(e,r=Tn,n,i,s,o,a){super(e,r,n,i,s,o,a)}newChild(e,r=Tn,n={}){return new t(e,r,this.root,this.roots,this.nocase,this.childrenCache(),n)}getRootString(e){return kh.win32.parse(e).root}getRoot(e){if(e=ale(e.toUpperCase()),e===this.root.name)return this.root;for(let[r,n]of Object.entries(this.roots))if(this.sameRoot(e,r))return this.roots[e]=n;return this.roots[e]=new qu(e,this).root}sameRoot(e,r=this.root.name){return e=e.toUpperCase().replace(/\//g,"\\").replace(gF,"$1\\"),e===r}};Xe.PathWin32=$u;var Yu=class t extends hr{splitSep="/";sep="/";constructor(e,r=Tn,n,i,s,o,a){super(e,r,n,i,s,o,a)}getRootString(e){return e.startsWith("/")?"/":""}getRoot(e){return this.root}newChild(e,r=Tn,n={}){return new t(e,r,this.root,this.roots,this.nocase,this.childrenCache(),n)}};Xe.PathPosix=Yu;var Vu=class{root;rootPath;roots;cwd;#e;#t;#s;nocase;#n;constructor(e=process.cwd(),r,n,{nocase:i,childrenCacheSize:s=16*1024,fs:o=Gu}={}){this.#n=IF(o),(e instanceof URL||e.startsWith("file://"))&&(e=(0,ile.fileURLToPath)(e));let a=r.resolve(e);this.roots=Object.create(null),this.rootPath=this.parseRootPath(a),this.#e=new ku,this.#t=new ku,this.#s=new $h(s);let l=a.substring(this.rootPath.length).split(n);if(l.length===1&&!l[0]&&l.pop(),i===void 0)throw new TypeError("must provide nocase setting to PathScurryBase ctor");this.nocase=i,this.root=this.newRoot(this.#n),this.roots[this.rootPath]=this.root;let c=this.root,u=l.length-1,d=r.sep,E=this.rootPath,f=!1;for(let T of l){let h=u--;c=c.child(T,{relative:new Array(h).fill("..").join(d),relativePosix:new Array(h).fill("..").join("/"),fullpath:E+=(f?"":d)+T}),f=!0}this.cwd=c}depth(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.depth()}childrenCache(){return this.#s}resolve(...e){let r="";for(let s=e.length-1;s>=0;s--){let o=e[s];if(!(!o||o===".")&&(r=r?`${o}/${r}`:o,this.isAbsolute(o)))break}let n=this.#e.get(r);if(n!==void 0)return n;let i=this.cwd.resolve(r).fullpath();return this.#e.set(r,i),i}resolvePosix(...e){let r="";for(let s=e.length-1;s>=0;s--){let o=e[s];if(!(!o||o===".")&&(r=r?`${o}/${r}`:o,this.isAbsolute(o)))break}let n=this.#t.get(r);if(n!==void 0)return n;let i=this.cwd.resolve(r).fullpathPosix();return this.#t.set(r,i),i}relative(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relative()}relativePosix(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relativePosix()}basename(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.name}dirname(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),(e.parent||e).fullpath()}async readdir(e=this.cwd,r={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof hr||(r=e,e=this.cwd);let{withFileTypes:n}=r;if(e.canReaddir()){let i=await e.readdir();return n?i:i.map(s=>s.name)}else return[]}readdirSync(e=this.cwd,r={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof hr||(r=e,e=this.cwd);let{withFileTypes:n=!0}=r;return e.canReaddir()?n?e.readdirSync():e.readdirSync().map(i=>i.name):[]}async lstat(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstat()}lstatSync(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstatSync()}async readlink(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof hr||(r=e.withFileTypes,e=this.cwd);let n=await e.readlink();return r?n:n?.fullpath()}readlinkSync(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof hr||(r=e.withFileTypes,e=this.cwd);let n=e.readlinkSync();return r?n:n?.fullpath()}async realpath(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof hr||(r=e.withFileTypes,e=this.cwd);let n=await e.realpath();return r?n:n?.fullpath()}realpathSync(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof hr||(r=e.withFileTypes,e=this.cwd);let n=e.realpathSync();return r?n:n?.fullpath()}async walk(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof hr||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:s,walkFilter:o}=r,a=[];(!s||s(e))&&a.push(n?e:e.fullpath());let l=new Set,c=(d,E)=>{l.add(d),d.readdirCB((f,T)=>{if(f)return E(f);let h=T.length;if(!h)return E();let p=()=>{--h===0&&E()};for(let S of T)(!s||s(S))&&a.push(n?S:S.fullpath()),i&&S.isSymbolicLink()?S.realpath().then(m=>m?.isUnknown()?m.lstat():m).then(m=>m?.shouldWalk(l,o)?c(m,p):p()):S.shouldWalk(l,o)?c(S,p):p()},!0)},u=e;return new Promise((d,E)=>{c(u,f=>{if(f)return E(f);d(a)})})}walkSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof hr||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:s,walkFilter:o}=r,a=[];(!s||s(e))&&a.push(n?e:e.fullpath());let l=new Set([e]);for(let c of l){let u=c.readdirSync();for(let d of u){(!s||s(d))&&a.push(n?d:d.fullpath());let E=d;if(d.isSymbolicLink()){if(!(i&&(E=d.realpathSync())))continue;E.isUnknown()&&E.lstatSync()}E.shouldWalk(l,o)&&l.add(E)}}return a}[Symbol.asyncIterator](){return this.iterate()}iterate(e=this.cwd,r={}){return typeof e=="string"?e=this.cwd.resolve(e):e instanceof hr||(r=e,e=this.cwd),this.stream(e,r)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof hr||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:s,walkFilter:o}=r;(!s||s(e))&&(yield n?e:e.fullpath());let a=new Set([e]);for(let l of a){let c=l.readdirSync();for(let u of c){(!s||s(u))&&(yield n?u:u.fullpath());let d=u;if(u.isSymbolicLink()){if(!(i&&(d=u.realpathSync())))continue;d.isUnknown()&&d.lstatSync()}d.shouldWalk(a,o)&&a.add(d)}}}stream(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof hr||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:s,walkFilter:o}=r,a=new pF.Minipass({objectMode:!0});(!s||s(e))&&a.write(n?e:e.fullpath());let l=new Set,c=[e],u=0,d=()=>{let E=!1;for(;!E;){let f=c.shift();if(!f){u===0&&a.end();return}u++,l.add(f);let T=(p,S,m=!1)=>{if(p)return a.emit("error",p);if(i&&!m){let R=[];for(let A of S)A.isSymbolicLink()&&R.push(A.realpath().then(g=>g?.isUnknown()?g.lstat():g));if(R.length){Promise.all(R).then(()=>T(null,S,!0));return}}for(let R of S)R&&(!s||s(R))&&(a.write(n?R:R.fullpath())||(E=!0));u--;for(let R of S){let A=R.realpathCached()||R;A.shouldWalk(l,o)&&c.push(A)}E&&!a.flowing?a.once("drain",d):h||d()},h=!0;f.readdirCB(T,!0),h=!1}};return d(),a}streamSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof hr||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:s,walkFilter:o}=r,a=new pF.Minipass({objectMode:!0}),l=new Set;(!s||s(e))&&a.write(n?e:e.fullpath());let c=[e],u=0,d=()=>{let E=!1;for(;!E;){let f=c.shift();if(!f){u===0&&a.end();return}u++,l.add(f);let T=f.readdirSync();for(let h of T)(!s||s(h))&&(a.write(n?h:h.fullpath())||(E=!0));u--;for(let h of T){let p=h;if(h.isSymbolicLink()){if(!(i&&(p=h.realpathSync())))continue;p.isUnknown()&&p.lstatSync()}p.shouldWalk(l,o)&&c.push(p)}}E&&!a.flowing&&a.once("drain",d)};return d(),a}chdir(e=this.cwd){let r=this.cwd;this.cwd=typeof e=="string"?this.cwd.resolve(e):e,this.cwd[wF](r)}};Xe.PathScurryBase=Vu;var qu=class extends Vu{sep="\\";constructor(e=process.cwd(),r={}){let{nocase:n=!0}=r;super(e,kh.win32,"\\",{...r,nocase:n}),this.nocase=n;for(let i=this.cwd;i;i=i.parent)i.nocase=this.nocase}parseRootPath(e){return kh.win32.parse(e).root.toUpperCase()}newRoot(e){return new $u(this.rootPath,ti,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")||e.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(e)}};Xe.PathScurryWin32=qu;var Xu=class extends Vu{sep="/";constructor(e=process.cwd(),r={}){let{nocase:n=!1}=r;super(e,kh.posix,"/",{...r,nocase:n}),this.nocase=n}parseRootPath(e){return"/"}newRoot(e){return new Yu(this.rootPath,ti,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")}};Xe.PathScurryPosix=Xu;var Yh=class extends Xu{constructor(e=process.cwd(),r={}){let{nocase:n=!0}=r;super(e,{...r,nocase:n})}};Xe.PathScurryDarwin=Yh;Xe.Path=process.platform==="win32"?$u:Yu;Xe.PathScurry=process.platform==="win32"?qu:process.platform==="darwin"?Yh:Xu});var V_=O(Vh=>{"use strict";Object.defineProperty(Vh,"__esModule",{value:!0});Vh.Pattern=void 0;var ule=bs(),dle=t=>t.length>=1,fle=t=>t.length>=1,Y_=class t{#e;#t;#s;length;#n;#o;#m;#c;#d;#a;#l=!0;constructor(e,r,n,i){if(!dle(e))throw new TypeError("empty pattern list");if(!fle(r))throw new TypeError("empty glob list");if(r.length!==e.length)throw new TypeError("mismatched pattern list and glob list lengths");if(this.length=e.length,n<0||n>=this.length)throw new TypeError("index out of range");if(this.#e=e,this.#t=r,this.#s=n,this.#n=i,this.#s===0){if(this.isUNC()){let[s,o,a,l,...c]=this.#e,[u,d,E,f,...T]=this.#t;c[0]===""&&(c.shift(),T.shift());let h=[s,o,a,l,""].join("/"),p=[u,d,E,f,""].join("/");this.#e=[h,...c],this.#t=[p,...T],this.length=this.#e.length}else if(this.isDrive()||this.isAbsolute()){let[s,...o]=this.#e,[a,...l]=this.#t;o[0]===""&&(o.shift(),l.shift());let c=s+"/",u=a+"/";this.#e=[c,...o],this.#t=[u,...l],this.length=this.#e.length}}}pattern(){return this.#e[this.#s]}isString(){return typeof this.#e[this.#s]=="string"}isGlobstar(){return this.#e[this.#s]===ule.GLOBSTAR}isRegExp(){return this.#e[this.#s]instanceof RegExp}globString(){return this.#m=this.#m||(this.#s===0?this.isAbsolute()?this.#t[0]+this.#t.slice(1).join("/"):this.#t.join("/"):this.#t.slice(this.#s).join("/"))}hasMore(){return this.length>this.#s+1}rest(){return this.#o!==void 0?this.#o:this.hasMore()?(this.#o=new t(this.#e,this.#t,this.#s+1,this.#n),this.#o.#a=this.#a,this.#o.#d=this.#d,this.#o.#c=this.#c,this.#o):this.#o=null}isUNC(){let e=this.#e;return this.#d!==void 0?this.#d:this.#d=this.#n==="win32"&&this.#s===0&&e[0]===""&&e[1]===""&&typeof e[2]=="string"&&!!e[2]&&typeof e[3]=="string"&&!!e[3]}isDrive(){let e=this.#e;return this.#c!==void 0?this.#c:this.#c=this.#n==="win32"&&this.#s===0&&this.length>1&&typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0])}isAbsolute(){let e=this.#e;return this.#a!==void 0?this.#a:this.#a=e[0]===""&&e.length>1||this.isDrive()||this.isUNC()}root(){let e=this.#e[0];return typeof e=="string"&&this.isAbsolute()&&this.#s===0?e:""}checkFollowGlobstar(){return!(this.#s===0||!this.isGlobstar()||!this.#l)}markFollowGlobstar(){return this.#s===0||!this.isGlobstar()||!this.#l?!1:(this.#l=!1,!0)}};Vh.Pattern=Y_});var UF=O(Fr=>{"use strict";var Ele=Fr&&Fr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Fr,"__esModule",{value:!0});Fr.Minipass=Fr.isWritable=Fr.isReadable=Fr.isStream=void 0;var DF=typeof process=="object"&&process?process:{stdout:null,stderr:null},Q_=require("node:events"),vF=Ele(require("node:stream")),hle=require("node:string_decoder"),Tle=t=>!!t&&typeof t=="object"&&(t instanceof Qh||t instanceof vF.default||(0,Fr.isReadable)(t)||(0,Fr.isWritable)(t));Fr.isStream=Tle;var ple=t=>!!t&&typeof t=="object"&&t instanceof Q_.EventEmitter&&typeof t.pipe=="function"&&t.pipe!==vF.default.Writable.prototype.pipe;Fr.isReadable=ple;var Sle=t=>!!t&&typeof t=="object"&&t instanceof Q_.EventEmitter&&typeof t.write=="function"&&typeof t.end=="function";Fr.isWritable=Sle;var $i=Symbol("EOF"),Yi=Symbol("maybeEmitEnd"),Ds=Symbol("emittedEnd"),qh=Symbol("emittingEnd"),ju=Symbol("emittedError"),Xh=Symbol("closed"),PF=Symbol("read"),jh=Symbol("flush"),xF=Symbol("flushChunk"),Pn=Symbol("encoding"),Rl=Symbol("decoder"),er=Symbol("flowing"),zu=Symbol("paused"),Al=Symbol("resume"),tr=Symbol("buffer"),Br=Symbol("pipes"),rr=Symbol("bufferLength"),q_=Symbol("bufferPush"),zh=Symbol("bufferShift"),Cr=Symbol("objectMode"),Pt=Symbol("destroyed"),X_=Symbol("error"),j_=Symbol("emitData"),MF=Symbol("emitEnd"),z_=Symbol("emitEnd2"),ri=Symbol("async"),K_=Symbol("abort"),Kh=Symbol("aborted"),Ku=Symbol("signal"),wo=Symbol("dataListeners"),Qr=Symbol("discarded"),Ju=t=>Promise.resolve().then(t),Rle=t=>t(),Ale=t=>t==="end"||t==="finish"||t==="prefinish",mle=t=>t instanceof ArrayBuffer||!!t&&typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,_le=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),Jh=class{src;dest;opts;ondrain;constructor(e,r,n){this.src=e,this.dest=r,this.opts=n,this.ondrain=()=>e[Al](),this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(e){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},J_=class extends Jh{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,r,n){super(e,r,n),this.proxyErrors=i=>r.emit("error",i),e.on("error",this.proxyErrors)}},Ile=t=>!!t.objectMode,gle=t=>!t.objectMode&&!!t.encoding&&t.encoding!=="buffer",Qh=class extends Q_.EventEmitter{[er]=!1;[zu]=!1;[Br]=[];[tr]=[];[Cr];[Pn];[ri];[Rl];[$i]=!1;[Ds]=!1;[qh]=!1;[Xh]=!1;[ju]=null;[rr]=0;[Pt]=!1;[Ku];[Kh]=!1;[wo]=0;[Qr]=!1;writable=!0;readable=!0;constructor(...e){let r=e[0]||{};if(super(),r.objectMode&&typeof r.encoding=="string")throw new TypeError("Encoding and objectMode may not be used together");Ile(r)?(this[Cr]=!0,this[Pn]=null):gle(r)?(this[Pn]=r.encoding,this[Cr]=!1):(this[Cr]=!1,this[Pn]=null),this[ri]=!!r.async,this[Rl]=this[Pn]?new hle.StringDecoder(this[Pn]):null,r&&r.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[tr]}),r&&r.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[Br]});let{signal:n}=r;n&&(this[Ku]=n,n.aborted?this[K_]():n.addEventListener("abort",()=>this[K_]()))}get bufferLength(){return this[rr]}get encoding(){return this[Pn]}set encoding(e){throw new Error("Encoding must be set at instantiation time")}setEncoding(e){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[Cr]}set objectMode(e){throw new Error("objectMode must be set at instantiation time")}get async(){return this[ri]}set async(e){this[ri]=this[ri]||!!e}[K_](){this[Kh]=!0,this.emit("abort",this[Ku]?.reason),this.destroy(this[Ku]?.reason)}get aborted(){return this[Kh]}set aborted(e){}write(e,r,n){if(this[Kh])return!1;if(this[$i])throw new Error("write after end");if(this[Pt])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof r=="function"&&(n=r,r="utf8"),r||(r="utf8");let i=this[ri]?Ju:Rle;if(!this[Cr]&&!Buffer.isBuffer(e)){if(_le(e))e=Buffer.from(e.buffer,e.byteOffset,e.byteLength);else if(mle(e))e=Buffer.from(e);else if(typeof e!="string")throw new Error("Non-contiguous data written to non-objectMode stream")}return this[Cr]?(this[er]&&this[rr]!==0&&this[jh](!0),this[er]?this.emit("data",e):this[q_](e),this[rr]!==0&&this.emit("readable"),n&&i(n),this[er]):e.length?(typeof e=="string"&&!(r===this[Pn]&&!this[Rl]?.lastNeed)&&(e=Buffer.from(e,r)),Buffer.isBuffer(e)&&this[Pn]&&(e=this[Rl].write(e)),this[er]&&this[rr]!==0&&this[jh](!0),this[er]?this.emit("data",e):this[q_](e),this[rr]!==0&&this.emit("readable"),n&&i(n),this[er]):(this[rr]!==0&&this.emit("readable"),n&&i(n),this[er])}read(e){if(this[Pt])return null;if(this[Qr]=!1,this[rr]===0||e===0||e&&e>this[rr])return this[Yi](),null;this[Cr]&&(e=null),this[tr].length>1&&!this[Cr]&&(this[tr]=[this[Pn]?this[tr].join(""):Buffer.concat(this[tr],this[rr])]);let r=this[PF](e||null,this[tr][0]);return this[Yi](),r}[PF](e,r){if(this[Cr])this[zh]();else{let n=r;e===n.length||e===null?this[zh]():typeof n=="string"?(this[tr][0]=n.slice(e),r=n.slice(0,e),this[rr]-=e):(this[tr][0]=n.subarray(e),r=n.subarray(0,e),this[rr]-=e)}return this.emit("data",r),!this[tr].length&&!this[$i]&&this.emit("drain"),r}end(e,r,n){return typeof e=="function"&&(n=e,e=void 0),typeof r=="function"&&(n=r,r="utf8"),e!==void 0&&this.write(e,r),n&&this.once("end",n),this[$i]=!0,this.writable=!1,(this[er]||!this[zu])&&this[Yi](),this}[Al](){this[Pt]||(!this[wo]&&!this[Br].length&&(this[Qr]=!0),this[zu]=!1,this[er]=!0,this.emit("resume"),this[tr].length?this[jh]():this[$i]?this[Yi]():this.emit("drain"))}resume(){return this[Al]()}pause(){this[er]=!1,this[zu]=!0,this[Qr]=!1}get destroyed(){return this[Pt]}get flowing(){return this[er]}get paused(){return this[zu]}[q_](e){this[Cr]?this[rr]+=1:this[rr]+=e.length,this[tr].push(e)}[zh](){return this[Cr]?this[rr]-=1:this[rr]-=this[tr][0].length,this[tr].shift()}[jh](e=!1){do;while(this[xF](this[zh]())&&this[tr].length);!e&&!this[tr].length&&!this[$i]&&this.emit("drain")}[xF](e){return this.emit("data",e),this[er]}pipe(e,r){if(this[Pt])return e;this[Qr]=!1;let n=this[Ds];return r=r||{},e===DF.stdout||e===DF.stderr?r.end=!1:r.end=r.end!==!1,r.proxyErrors=!!r.proxyErrors,n?r.end&&e.end():(this[Br].push(r.proxyErrors?new J_(this,e,r):new Jh(this,e,r)),this[ri]?Ju(()=>this[Al]()):this[Al]()),e}unpipe(e){let r=this[Br].find(n=>n.dest===e);r&&(this[Br].length===1?(this[er]&&this[wo]===0&&(this[er]=!1),this[Br]=[]):this[Br].splice(this[Br].indexOf(r),1),r.unpipe())}addListener(e,r){return this.on(e,r)}on(e,r){let n=super.on(e,r);if(e==="data")this[Qr]=!1,this[wo]++,!this[Br].length&&!this[er]&&this[Al]();else if(e==="readable"&&this[rr]!==0)super.emit("readable");else if(Ale(e)&&this[Ds])super.emit(e),this.removeAllListeners(e);else if(e==="error"&&this[ju]){let i=r;this[ri]?Ju(()=>i.call(this,this[ju])):i.call(this,this[ju])}return n}removeListener(e,r){return this.off(e,r)}off(e,r){let n=super.off(e,r);return e==="data"&&(this[wo]=this.listeners("data").length,this[wo]===0&&!this[Qr]&&!this[Br].length&&(this[er]=!1)),n}removeAllListeners(e){let r=super.removeAllListeners(e);return(e==="data"||e===void 0)&&(this[wo]=0,!this[Qr]&&!this[Br].length&&(this[er]=!1)),r}get emittedEnd(){return this[Ds]}[Yi](){!this[qh]&&!this[Ds]&&!this[Pt]&&this[tr].length===0&&this[$i]&&(this[qh]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[Xh]&&this.emit("close"),this[qh]=!1)}emit(e,...r){let n=r[0];if(e!=="error"&&e!=="close"&&e!==Pt&&this[Pt])return!1;if(e==="data")return!this[Cr]&&!n?!1:this[ri]?(Ju(()=>this[j_](n)),!0):this[j_](n);if(e==="end")return this[MF]();if(e==="close"){if(this[Xh]=!0,!this[Ds]&&!this[Pt])return!1;let s=super.emit("close");return this.removeAllListeners("close"),s}else if(e==="error"){this[ju]=n,super.emit(X_,n);let s=!this[Ku]||this.listeners("error").length?super.emit("error",n):!1;return this[Yi](),s}else if(e==="resume"){let s=super.emit("resume");return this[Yi](),s}else if(e==="finish"||e==="prefinish"){let s=super.emit(e);return this.removeAllListeners(e),s}let i=super.emit(e,...r);return this[Yi](),i}[j_](e){for(let n of this[Br])n.dest.write(e)===!1&&this.pause();let r=this[Qr]?!1:super.emit("data",e);return this[Yi](),r}[MF](){return this[Ds]?!1:(this[Ds]=!0,this.readable=!1,this[ri]?(Ju(()=>this[z_]()),!0):this[z_]())}[z_](){if(this[Rl]){let r=this[Rl].end();if(r){for(let n of this[Br])n.dest.write(r);this[Qr]||super.emit("data",r)}}for(let r of this[Br])r.end();let e=super.emit("end");return this.removeAllListeners("end"),e}async collect(){let e=Object.assign([],{dataLength:0});this[Cr]||(e.dataLength=0);let r=this.promise();return this.on("data",n=>{e.push(n),this[Cr]||(e.dataLength+=n.length)}),await r,e}async concat(){if(this[Cr])throw new Error("cannot concat in objectMode");let e=await this.collect();return this[Pn]?e.join(""):Buffer.concat(e,e.dataLength)}async promise(){return new Promise((e,r)=>{this.on(Pt,()=>r(new Error("stream destroyed"))),this.on("error",n=>r(n)),this.on("end",()=>e())})}[Symbol.asyncIterator](){this[Qr]=!1;let e=!1,r=async()=>(this.pause(),e=!0,{value:void 0,done:!0});return{next:()=>{if(e)return r();let i=this.read();if(i!==null)return Promise.resolve({done:!1,value:i});if(this[$i])return r();let s,o,a=d=>{this.off("data",l),this.off("end",c),this.off(Pt,u),r(),o(d)},l=d=>{this.off("error",a),this.off("end",c),this.off(Pt,u),this.pause(),s({value:d,done:!!this[$i]})},c=()=>{this.off("error",a),this.off("data",l),this.off(Pt,u),r(),s({done:!0,value:void 0})},u=()=>a(new Error("stream destroyed"));return new Promise((d,E)=>{o=E,s=d,this.once(Pt,u),this.once("error",a),this.once("end",c),this.once("data",l)})},throw:r,return:r,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[Qr]=!1;let e=!1,r=()=>(this.pause(),this.off(X_,r),this.off(Pt,r),this.off("end",r),e=!0,{done:!0,value:void 0}),n=()=>{if(e)return r();let i=this.read();return i===null?r():{done:!1,value:i}};return this.once("end",r),this.once(X_,r),this.once(Pt,r),{next:n,throw:r,return:r,[Symbol.iterator](){return this}}}destroy(e){if(this[Pt])return e?this.emit("error",e):this.emit(Pt),this;this[Pt]=!0,this[Qr]=!0,this[tr].length=0,this[rr]=0;let r=this;return typeof r.close=="function"&&!this[Xh]&&r.close(),e?this.emit("error",e):this.emit(Pt),this}static get isStream(){return Fr.isStream}};Fr.Minipass=Qh});var eI=O(Zh=>{"use strict";Object.defineProperty(Zh,"__esModule",{value:!0});Zh.Ignore=void 0;var BF=bs(),Nle=V_(),Ole=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",Z_=class{relative;relativeChildren;absolute;absoluteChildren;platform;mmopts;constructor(e,{nobrace:r,nocase:n,noext:i,noglobstar:s,platform:o=Ole}){this.relative=[],this.absolute=[],this.relativeChildren=[],this.absoluteChildren=[],this.platform=o,this.mmopts={dot:!0,nobrace:r,nocase:n,noext:i,noglobstar:s,optimizationLevel:2,platform:o,nocomment:!0,nonegate:!0};for(let a of e)this.add(a)}add(e){let r=new BF.Minimatch(e,this.mmopts);for(let n=0;n<r.set.length;n++){let i=r.set[n],s=r.globParts[n];if(!i||!s)throw new Error("invalid pattern object");for(;i[0]==="."&&s[0]===".";)i.shift(),s.shift();let o=new Nle.Pattern(i,s,0,this.platform),a=new BF.Minimatch(o.globString(),this.mmopts),l=s[s.length-1]==="**",c=o.isAbsolute();c?this.absolute.push(a):this.relative.push(a),l&&(c?this.absoluteChildren.push(a):this.relativeChildren.push(a))}}ignored(e){let r=e.fullpath(),n=`${r}/`,i=e.relative()||".",s=`${i}/`;for(let o of this.relative)if(o.match(i)||o.match(s))return!0;for(let o of this.absolute)if(o.match(r)||o.match(n))return!0;return!1}childrenIgnored(e){let r=e.fullpath()+"/",n=(e.relative()||".")+"/";for(let i of this.relativeChildren)if(i.match(n))return!0;for(let i of this.absoluteChildren)if(i.match(r))return!0;return!1}};Zh.Ignore=Z_});var GF=O(ni=>{"use strict";Object.defineProperty(ni,"__esModule",{value:!0});ni.Processor=ni.SubWalks=ni.MatchRecord=ni.HasWalkedCache=void 0;var FF=bs(),eT=class t{store;constructor(e=new Map){this.store=e}copy(){return new t(new Map(this.store))}hasWalked(e,r){return this.store.get(e.fullpath())?.has(r.globString())}storeWalked(e,r){let n=e.fullpath(),i=this.store.get(n);i?i.add(r.globString()):this.store.set(n,new Set([r.globString()]))}};ni.HasWalkedCache=eT;var tT=class{store=new Map;add(e,r,n){let i=(r?2:0)|(n?1:0),s=this.store.get(e);this.store.set(e,s===void 0?i:i&s)}entries(){return[...this.store.entries()].map(([e,r])=>[e,!!(r&2),!!(r&1)])}};ni.MatchRecord=tT;var rT=class{store=new Map;add(e,r){if(!e.canReaddir())return;let n=this.store.get(e);n?n.find(i=>i.globString()===r.globString())||n.push(r):this.store.set(e,[r])}get(e){let r=this.store.get(e);if(!r)throw new Error("attempting to walk unknown path");return r}entries(){return this.keys().map(e=>[e,this.store.get(e)])}keys(){return[...this.store.keys()].filter(e=>e.canReaddir())}};ni.SubWalks=rT;var tI=class t{hasWalkedCache;matches=new tT;subwalks=new rT;patterns;follow;dot;opts;constructor(e,r){this.opts=e,this.follow=!!e.follow,this.dot=!!e.dot,this.hasWalkedCache=r?r.copy():new eT}processPatterns(e,r){this.patterns=r;let n=r.map(i=>[e,i]);for(let[i,s]of n){this.hasWalkedCache.storeWalked(i,s);let o=s.root(),a=s.isAbsolute()&&this.opts.absolute!==!1;if(o){i=i.resolve(o==="/"&&this.opts.root!==void 0?this.opts.root:o);let d=s.rest();if(d)s=d;else{this.matches.add(i,!0,!1);continue}}if(i.isENOENT())continue;let l,c,u=!1;for(;typeof(l=s.pattern())=="string"&&(c=s.rest());)i=i.resolve(l),s=c,u=!0;if(l=s.pattern(),c=s.rest(),u){if(this.hasWalkedCache.hasWalked(i,s))continue;this.hasWalkedCache.storeWalked(i,s)}if(typeof l=="string"){let d=l===".."||l===""||l===".";this.matches.add(i.resolve(l),a,d);continue}else if(l===FF.GLOBSTAR){(!i.isSymbolicLink()||this.follow||s.checkFollowGlobstar())&&this.subwalks.add(i,s);let d=c?.pattern(),E=c?.rest();if(!c||(d===""||d===".")&&!E)this.matches.add(i,a,d===""||d===".");else if(d===".."){let f=i.parent||i;E?this.hasWalkedCache.hasWalked(f,E)||this.subwalks.add(f,E):this.matches.add(f,a,!0)}}else l instanceof RegExp&&this.subwalks.add(i,s)}return this}subwalkTargets(){return this.subwalks.keys()}child(){return new t(this.opts,this.hasWalkedCache)}filterEntries(e,r){let n=this.subwalks.get(e),i=this.child();for(let s of r)for(let o of n){let a=o.isAbsolute(),l=o.pattern(),c=o.rest();l===FF.GLOBSTAR?i.testGlobstar(s,o,c,a):l instanceof RegExp?i.testRegExp(s,l,c,a):i.testString(s,l,c,a)}return i}testGlobstar(e,r,n,i){if((this.dot||!e.name.startsWith("."))&&(r.hasMore()||this.matches.add(e,i,!1),e.canReaddir()&&(this.follow||!e.isSymbolicLink()?this.subwalks.add(e,r):e.isSymbolicLink()&&(n&&r.checkFollowGlobstar()?this.subwalks.add(e,n):r.markFollowGlobstar()&&this.subwalks.add(e,r)))),n){let s=n.pattern();if(typeof s=="string"&&s!==".."&&s!==""&&s!==".")this.testString(e,s,n.rest(),i);else if(s===".."){let o=e.parent||e;this.subwalks.add(o,n)}else s instanceof RegExp&&this.testRegExp(e,s,n.rest(),i)}}testRegExp(e,r,n,i){r.test(e.name)&&(n?this.subwalks.add(e,n):this.matches.add(e,i,!1))}testString(e,r,n,i){e.isNamed(r)&&(n?this.subwalks.add(e,n):this.matches.add(e,i,!1))}};ni.Processor=tI});var kF=O(Ps=>{"use strict";Object.defineProperty(Ps,"__esModule",{value:!0});Ps.GlobStream=Ps.GlobWalker=Ps.GlobUtil=void 0;var Cle=UF(),HF=eI(),WF=GF(),yle=(t,e)=>typeof t=="string"?new HF.Ignore([t],e):Array.isArray(t)?new HF.Ignore(t,e):t,Qu=class{path;patterns;opts;seen=new Set;paused=!1;aborted=!1;#e=[];#t;#s;signal;maxDepth;includeChildMatches;constructor(e,r,n){if(this.patterns=e,this.path=r,this.opts=n,this.#s=!n.posix&&n.platform==="win32"?"\\":"/",this.includeChildMatches=n.includeChildMatches!==!1,(n.ignore||!this.includeChildMatches)&&(this.#t=yle(n.ignore??[],n),!this.includeChildMatches&&typeof this.#t.add!="function")){let i="cannot ignore child matches, ignore lacks add() method.";throw new Error(i)}this.maxDepth=n.maxDepth||1/0,n.signal&&(this.signal=n.signal,this.signal.addEventListener("abort",()=>{this.#e.length=0}))}#n(e){return this.seen.has(e)||!!this.#t?.ignored?.(e)}#o(e){return!!this.#t?.childrenIgnored?.(e)}pause(){this.paused=!0}resume(){if(this.signal?.aborted)return;this.paused=!1;let e;for(;!this.paused&&(e=this.#e.shift());)e()}onResume(e){this.signal?.aborted||(this.paused?this.#e.push(e):e())}async matchCheck(e,r){if(r&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||await e.realpath(),!n)return;e=n}let s=e.isUnknown()||this.opts.stat?await e.lstat():e;if(this.opts.follow&&this.opts.nodir&&s?.isSymbolicLink()){let o=await s.realpath();o&&(o.isUnknown()||this.opts.stat)&&await o.lstat()}return this.matchCheckTest(s,r)}matchCheckTest(e,r){return e&&(this.maxDepth===1/0||e.depth()<=this.maxDepth)&&(!r||e.canReaddir())&&(!this.opts.nodir||!e.isDirectory())&&(!this.opts.nodir||!this.opts.follow||!e.isSymbolicLink()||!e.realpathCached()?.isDirectory())&&!this.#n(e)?e:void 0}matchCheckSync(e,r){if(r&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||e.realpathSync(),!n)return;e=n}let s=e.isUnknown()||this.opts.stat?e.lstatSync():e;if(this.opts.follow&&this.opts.nodir&&s?.isSymbolicLink()){let o=s.realpathSync();o&&(o?.isUnknown()||this.opts.stat)&&o.lstatSync()}return this.matchCheckTest(s,r)}matchFinish(e,r){if(this.#n(e))return;if(!this.includeChildMatches&&this.#t?.add){let s=`${e.relativePosix()}/**`;this.#t.add(s)}let n=this.opts.absolute===void 0?r:this.opts.absolute;this.seen.add(e);let i=this.opts.mark&&e.isDirectory()?this.#s:"";if(this.opts.withFileTypes)this.matchEmit(e);else if(n){let s=this.opts.posix?e.fullpathPosix():e.fullpath();this.matchEmit(s+i)}else{let s=this.opts.posix?e.relativePosix():e.relative(),o=this.opts.dotRelative&&!s.startsWith(".."+this.#s)?"."+this.#s:"";this.matchEmit(s?o+s+i:"."+i)}}async match(e,r,n){let i=await this.matchCheck(e,n);i&&this.matchFinish(i,r)}matchSync(e,r,n){let i=this.matchCheckSync(e,n);i&&this.matchFinish(i,r)}walkCB(e,r,n){this.signal?.aborted&&n(),this.walkCB2(e,r,new WF.Processor(this.opts),n)}walkCB2(e,r,n,i){if(this.#o(e))return i();if(this.signal?.aborted&&i(),this.paused){this.onResume(()=>this.walkCB2(e,r,n,i));return}n.processPatterns(e,r);let s=1,o=()=>{--s===0&&i()};for(let[a,l,c]of n.matches.entries())this.#n(a)||(s++,this.match(a,l,c).then(()=>o()));for(let a of n.subwalkTargets()){if(this.maxDepth!==1/0&&a.depth()>=this.maxDepth)continue;s++;let l=a.readdirCached();a.calledReaddir()?this.walkCB3(a,l,n,o):a.readdirCB((c,u)=>this.walkCB3(a,u,n,o),!0)}o()}walkCB3(e,r,n,i){n=n.filterEntries(e,r);let s=1,o=()=>{--s===0&&i()};for(let[a,l,c]of n.matches.entries())this.#n(a)||(s++,this.match(a,l,c).then(()=>o()));for(let[a,l]of n.subwalks.entries())s++,this.walkCB2(a,l,n.child(),o);o()}walkCBSync(e,r,n){this.signal?.aborted&&n(),this.walkCB2Sync(e,r,new WF.Processor(this.opts),n)}walkCB2Sync(e,r,n,i){if(this.#o(e))return i();if(this.signal?.aborted&&i(),this.paused){this.onResume(()=>this.walkCB2Sync(e,r,n,i));return}n.processPatterns(e,r);let s=1,o=()=>{--s===0&&i()};for(let[a,l,c]of n.matches.entries())this.#n(a)||this.matchSync(a,l,c);for(let a of n.subwalkTargets()){if(this.maxDepth!==1/0&&a.depth()>=this.maxDepth)continue;s++;let l=a.readdirSync();this.walkCB3Sync(a,l,n,o)}o()}walkCB3Sync(e,r,n,i){n=n.filterEntries(e,r);let s=1,o=()=>{--s===0&&i()};for(let[a,l,c]of n.matches.entries())this.#n(a)||this.matchSync(a,l,c);for(let[a,l]of n.subwalks.entries())s++,this.walkCB2Sync(a,l,n.child(),o);o()}};Ps.GlobUtil=Qu;var rI=class extends Qu{matches=new Set;constructor(e,r,n){super(e,r,n)}matchEmit(e){this.matches.add(e)}async walk(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&await this.path.lstat(),await new Promise((e,r)=>{this.walkCB(this.path,this.patterns,()=>{this.signal?.aborted?r(this.signal.reason):e(this.matches)})}),this.matches}walkSync(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>{if(this.signal?.aborted)throw this.signal.reason}),this.matches}};Ps.GlobWalker=rI;var nI=class extends Qu{results;constructor(e,r,n){super(e,r,n),this.results=new Cle.Minipass({signal:this.signal,objectMode:!0}),this.results.on("drain",()=>this.resume()),this.results.on("resume",()=>this.resume())}matchEmit(e){this.results.write(e),this.results.flowing||this.pause()}stream(){let e=this.path;return e.isUnknown()?e.lstat().then(()=>{this.walkCB(e,this.patterns,()=>this.results.end())}):this.walkCB(e,this.patterns,()=>this.results.end()),this.results}streamSync(){return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>this.results.end()),this.results}};Ps.GlobStream=nI});var sI=O(sT=>{"use strict";Object.defineProperty(sT,"__esModule",{value:!0});sT.Glob=void 0;var ble=bs(),wle=require("node:url"),nT=LF(),Lle=V_(),iT=kF(),Dle=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",iI=class{absolute;cwd;root;dot;dotRelative;follow;ignore;magicalBraces;mark;matchBase;maxDepth;nobrace;nocase;nodir;noext;noglobstar;pattern;platform;realpath;scurry;stat;signal;windowsPathsNoEscape;withFileTypes;includeChildMatches;opts;patterns;constructor(e,r){if(!r)throw new TypeError("glob options required");if(this.withFileTypes=!!r.withFileTypes,this.signal=r.signal,this.follow=!!r.follow,this.dot=!!r.dot,this.dotRelative=!!r.dotRelative,this.nodir=!!r.nodir,this.mark=!!r.mark,r.cwd?(r.cwd instanceof URL||r.cwd.startsWith("file://"))&&(r.cwd=(0,wle.fileURLToPath)(r.cwd)):this.cwd="",this.cwd=r.cwd||"",this.root=r.root,this.magicalBraces=!!r.magicalBraces,this.nobrace=!!r.nobrace,this.noext=!!r.noext,this.realpath=!!r.realpath,this.absolute=r.absolute,this.includeChildMatches=r.includeChildMatches!==!1,this.noglobstar=!!r.noglobstar,this.matchBase=!!r.matchBase,this.maxDepth=typeof r.maxDepth=="number"?r.maxDepth:1/0,this.stat=!!r.stat,this.ignore=r.ignore,this.withFileTypes&&this.absolute!==void 0)throw new Error("cannot set absolute and withFileTypes:true");if(typeof e=="string"&&(e=[e]),this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(e=e.map(l=>l.replace(/\\/g,"/"))),this.matchBase){if(r.noglobstar)throw new TypeError("base matching requires globstar");e=e.map(l=>l.includes("/")?l:`./**/${l}`)}if(this.pattern=e,this.platform=r.platform||Dle,this.opts={...r,platform:this.platform},r.scurry){if(this.scurry=r.scurry,r.nocase!==void 0&&r.nocase!==r.scurry.nocase)throw new Error("nocase option contradicts provided scurry option")}else{let l=r.platform==="win32"?nT.PathScurryWin32:r.platform==="darwin"?nT.PathScurryDarwin:r.platform?nT.PathScurryPosix:nT.PathScurry;this.scurry=new l(this.cwd,{nocase:r.nocase,fs:r.fs})}this.nocase=this.scurry.nocase;let n=this.platform==="darwin"||this.platform==="win32",i={...r,dot:this.dot,matchBase:this.matchBase,nobrace:this.nobrace,nocase:this.nocase,nocaseMagicOnly:n,nocomment:!0,noext:this.noext,nonegate:!0,optimizationLevel:2,platform:this.platform,windowsPathsNoEscape:this.windowsPathsNoEscape,debug:!!this.opts.debug},s=this.pattern.map(l=>new ble.Minimatch(l,i)),[o,a]=s.reduce((l,c)=>(l[0].push(...c.set),l[1].push(...c.globParts),l),[[],[]]);this.patterns=o.map((l,c)=>{let u=a[c];if(!u)throw new Error("invalid pattern object");return new Lle.Pattern(l,u,0,this.platform)})}async walk(){return[...await new iT.GlobWalker(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walk()]}walkSync(){return[...new iT.GlobWalker(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walkSync()]}stream(){return new iT.GlobStream(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).stream()}streamSync(){return new iT.GlobStream(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).streamSync()}iterateSync(){return this.streamSync()[Symbol.iterator]()}[Symbol.iterator](){return this.iterateSync()}iterate(){return this.stream()[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterate()}};sT.Glob=iI});var oI=O(oT=>{"use strict";Object.defineProperty(oT,"__esModule",{value:!0});oT.hasMagic=void 0;var Ple=bs(),xle=(t,e={})=>{Array.isArray(t)||(t=[t]);for(let r of t)if(new Ple.Minimatch(r,e).hasMagic())return!0;return!1};oT.hasMagic=xle});var qF=O(De=>{"use strict";Object.defineProperty(De,"__esModule",{value:!0});De.glob=De.sync=De.iterate=De.iterateSync=De.stream=De.streamSync=De.Ignore=De.hasMagic=De.Glob=De.unescape=De.escape=void 0;De.globStreamSync=Zu;De.globStream=aI;De.globSync=lI;De.globIterateSync=ed;De.globIterate=cI;var $F=bs(),Lo=sI(),Mle=oI(),VF=bs();Object.defineProperty(De,"escape",{enumerable:!0,get:function(){return VF.escape}});Object.defineProperty(De,"unescape",{enumerable:!0,get:function(){return VF.unescape}});var vle=sI();Object.defineProperty(De,"Glob",{enumerable:!0,get:function(){return vle.Glob}});var Ule=oI();Object.defineProperty(De,"hasMagic",{enumerable:!0,get:function(){return Ule.hasMagic}});var Ble=eI();Object.defineProperty(De,"Ignore",{enumerable:!0,get:function(){return Ble.Ignore}});function Zu(t,e={}){return new Lo.Glob(t,e).streamSync()}function aI(t,e={}){return new Lo.Glob(t,e).stream()}function lI(t,e={}){return new Lo.Glob(t,e).walkSync()}async function YF(t,e={}){return new Lo.Glob(t,e).walk()}function ed(t,e={}){return new Lo.Glob(t,e).iterateSync()}function cI(t,e={}){return new Lo.Glob(t,e).iterate()}De.streamSync=Zu;De.stream=Object.assign(aI,{sync:Zu});De.iterateSync=ed;De.iterate=Object.assign(cI,{sync:ed});De.sync=Object.assign(lI,{stream:Zu,iterate:ed});De.glob=Object.assign(YF,{glob:YF,globSync:lI,sync:De.sync,globStream:aI,stream:De.stream,globStreamSync:Zu,streamSync:De.streamSync,globIterate:cI,iterate:De.iterate,globIterateSync:ed,iterateSync:De.iterateSync,Glob:Lo.Glob,hasMagic:Mle.hasMagic,escape:$F.escape,unescape:$F.unescape});De.glob.glob=De.glob});var KF=O((nve,zF)=>{var jF=IA(),ml=require("path"),uI=eU(),Fle=TB(),Gle=CB(),Hle=xB(),Wle=qF(),Do=zF.exports={},XF=/[\/\\]/g,kle=function(t,e){var r=[];return uI(t).forEach(function(n){var i=n.indexOf("!")===0;i&&(n=n.slice(1));var s=e(n);i?r=Fle(r,s):r=Gle(r,s)}),r};Do.exists=function(){var t=ml.join.apply(ml,arguments);return jF.existsSync(t)};Do.expand=function(...t){var e=Hle(t[0])?t.shift():{},r=Array.isArray(t[0])?t[0]:t;if(r.length===0)return[];var n=kle(r,function(i){return Wle.sync(i,e)});return e.filter&&(n=n.filter(function(i){i=ml.join(e.cwd||"",i);try{return typeof e.filter=="function"?e.filter(i):jF.statSync(i)[e.filter]()}catch{return!1}})),n};Do.expandMapping=function(t,e,r){r=Object.assign({rename:function(s,o){return ml.join(s||"",o)}},r);var n=[],i={};return Do.expand(r,t).forEach(function(s){var o=s;r.flatten&&(o=ml.basename(o)),r.ext&&(o=o.replace(/(\.[^\/]*)?$/,r.ext));var a=r.rename(e,o,r);r.cwd&&(s=ml.join(r.cwd,s)),a=a.replace(XF,"/"),s=s.replace(XF,"/"),i[a]?i[a].src.push(s):(n.push({src:[s],dest:a}),i[a]=n[n.length-1])}),n};Do.normalizeFilesArray=function(t){var e=[];return t.forEach(function(r){var n;("src"in r||"dest"in r)&&e.push(r)}),e.length===0?[]:(e=_(e).chain().forEach(function(r){!("src"in r)||!r.src||(Array.isArray(r.src)?r.src=uI(r.src):r.src=[r.src])}).map(function(r){var n=Object.assign({},r);if(delete n.src,delete n.dest,r.expand)return Do.expandMapping(r.src,r.dest,n).map(function(s){var o=Object.assign({},r);return o.orig=Object.assign({},r),o.src=s.src,o.dest=s.dest,["expand","cwd","flatten","rename","ext"].forEach(function(a){delete o[a]}),o});var i=Object.assign({},r);return i.orig=Object.assign({},r),"src"in i&&Object.defineProperty(i,"src",{enumerable:!0,get:function s(){var o;return"result"in s||(o=r.src,o=Array.isArray(o)?uI(o):[o],s.result=Do.expand(n,o)),s.result}}),"dest"in i&&(i.dest=r.dest),i}).flatten().value(),e)}});var _l=O((sve,ZF)=>{var dI=IA(),JF=require("path"),$le=_E(),Yle=nD(),QF=qA(),Vle=BP(),ive=require("stream").Stream,qle=Yv().PassThrough,Zr=ZF.exports={};Zr.file=KF();Zr.collectStream=function(t,e){var r=[],n=0;t.on("error",e),t.on("data",function(i){r.push(i),n+=i.length}),t.on("end",function(){var i=Buffer.alloc(n),s=0;r.forEach(function(o){o.copy(i,s),s+=o.length}),e(null,i)})};Zr.dateify=function(t){return t=t||new Date,t instanceof Date?t=t:typeof t=="string"?t=new Date(t):t=new Date,t};Zr.defaults=function(t,e,r){var n=arguments;return n[0]=n[0]||{},Vle(...n)};Zr.isStream=function(t){return $le(t)};Zr.lazyReadStream=function(t){return new Yle.Readable(function(){return dI.createReadStream(t)})};Zr.normalizeInputSource=function(t){return t===null?Buffer.alloc(0):typeof t=="string"?Buffer.from(t):Zr.isStream(t)?t.pipe(new qle):t};Zr.sanitizePath=function(t){return QF(t,!1).replace(/^\w+:/,"").replace(/^(\.\.\/|\/)+/,"")};Zr.trailingSlashIt=function(t){return t.slice(-1)!=="/"?t+"/":t};Zr.unixifyPath=function(t){return QF(t,!1).replace(/^\w+:/,"")};Zr.walkdir=function(t,e,r){var n=[];typeof e=="function"&&(r=e,e=t),dI.readdir(t,function(i,s){var o=0,a,l;if(i)return r(i);(function c(){if(a=s[o++],!a)return r(null,n);l=JF.join(t,a),dI.stat(l,function(u,d){n.push({path:l,relative:JF.relative(e,l).replace(/\\/g,"/"),stats:d}),d&&d.isDirectory()?Zr.walkdir(l,e,function(E,f){if(E)return r(E);f.forEach(function(T){n.push(T)}),c()}):c()})})()})}});var n1=O((t1,r1)=>{var Xle=require("util"),jle={ABORTED:"archive was aborted",DIRECTORYDIRPATHREQUIRED:"diretory dirpath argument must be a non-empty string value",DIRECTORYFUNCTIONINVALIDDATA:"invalid data returned by directory custom data function",ENTRYNAMEREQUIRED:"entry name must be a non-empty string value",FILEFILEPATHREQUIRED:"file filepath argument must be a non-empty string value",FINALIZING:"archive already finalizing",QUEUECLOSED:"queue closed",NOENDMETHOD:"no suitable finalize/end method defined by module",DIRECTORYNOTSUPPORTED:"support for directory entries not defined by module",FORMATSET:"archive format already set",INPUTSTEAMBUFFERREQUIRED:"input source must be valid Stream or Buffer instance",MODULESET:"module already set",SYMLINKNOTSUPPORTED:"support for symlink entries not defined by module",SYMLINKFILEPATHREQUIRED:"symlink filepath argument must be a non-empty string value",SYMLINKTARGETREQUIRED:"symlink target argument must be a non-empty string value",ENTRYNOTSUPPORTED:"entry not supported"};function e1(t,e){Error.captureStackTrace(this,this.constructor),this.message=jle[t]||t,this.code=t,this.data=e}Xle.inherits(e1,Error);t1=r1.exports=e1});var ct=O((ove,i1)=>{"use strict";var fI=class extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError(`Expected input to be an Array, got ${typeof e}`);let r="";for(let n=0;n<e.length;n++)r+=`    ${e[n].stack}
`;super(r),this.name="AggregateError",this.errors=e}};i1.exports={AggregateError:fI,ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,e){return t.includes(e)},ArrayPrototypeIndexOf(t,e){return t.indexOf(e)},ArrayPrototypeJoin(t,e){return t.join(e)},ArrayPrototypeMap(t,e){return t.map(e)},ArrayPrototypePop(t,e){return t.pop(e)},ArrayPrototypePush(t,e){return t.push(e)},ArrayPrototypeSlice(t,e,r){return t.slice(e,r)},Error,FunctionPrototypeCall(t,e,...r){return t.call(e,...r)},FunctionPrototypeSymbolHasInstance(t,e){return Function.prototype[Symbol.hasInstance].call(t,e)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,e){return Object.defineProperties(t,e)},ObjectDefineProperty(t,e,r){return Object.defineProperty(t,e,r)},ObjectGetOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,e){return Object.setPrototypeOf(t,e)},Promise,PromisePrototypeCatch(t,e){return t.catch(e)},PromisePrototypeThen(t,e,r){return t.then(e,r)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,e){return t.test(e)},SafeSet:Set,String,StringPrototypeSlice(t,e,r){return t.slice(e,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,e,r){return t.set(e,r)},Boolean,Uint8Array}});var EI=O((ave,s1)=>{"use strict";s1.exports={format(t,...e){return t.replace(/%([sdifj])/g,function(...[r,n]){let i=e.shift();return n==="f"?i.toFixed(6):n==="j"?JSON.stringify(i):n==="s"&&typeof i=="object"?`${i.constructor!==Object?i.constructor.name:""} {}`.trim():i.toString()})},inspect(t){switch(typeof t){case"string":if(t.includes("'"))if(t.includes('"')){if(!t.includes("`")&&!t.includes("${"))return`\`${t}\``}else return`"${t}"`;return`'${t}'`;case"number":return isNaN(t)?"NaN":Object.is(t,-0)?String(t):t;case"bigint":return`${String(t)}n`;case"boolean":case"undefined":return String(t);case"object":return"{}"}}}});var yr=O((lve,l1)=>{"use strict";var{format:zle,inspect:aT}=EI(),{AggregateError:Kle}=ct(),Jle=globalThis.AggregateError||Kle,Qle=Symbol("kIsNodeError"),Zle=["string","function","number","object","Function","Object","boolean","bigint","symbol"],ece=/^([A-Z][a-z0-9]*)+$/,tce="__node_internal_",lT={};function Po(t,e){if(!t)throw new lT.ERR_INTERNAL_ASSERTION(e)}function o1(t){let e="",r=t.length,n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function rce(t,e,r){if(typeof e=="function")return Po(e.length<=r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${e.length}).`),e(...r);let n=(e.match(/%[dfijoOs]/g)||[]).length;return Po(n===r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${n}).`),r.length===0?e:zle(e,...r)}function Tr(t,e,r){r||(r=Error);class n extends r{constructor(...s){super(rce(t,e,s))}toString(){return`${this.name} [${t}]: ${this.message}`}}Object.defineProperties(n.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${t}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),n.prototype.code=t,n.prototype[Qle]=!0,lT[t]=n}function a1(t){let e=tce+t.name;return Object.defineProperty(t,"name",{value:e}),t}function nce(t,e){if(t&&e&&t!==e){if(Array.isArray(e.errors))return e.errors.push(t),e;let r=new Jle([e,t],e.message);return r.code=e.code,r}return t||e}var hI=class extends Error{constructor(e="The operation was aborted",r=void 0){if(r!==void 0&&typeof r!="object")throw new lT.ERR_INVALID_ARG_TYPE("options","Object",r);super(e,r),this.code="ABORT_ERR",this.name="AbortError"}};Tr("ERR_ASSERTION","%s",Error);Tr("ERR_INVALID_ARG_TYPE",(t,e,r)=>{Po(typeof t=="string","'name' must be a string"),Array.isArray(e)||(e=[e]);let n="The ";t.endsWith(" argument")?n+=`${t} `:n+=`"${t}" ${t.includes(".")?"property":"argument"} `,n+="must be ";let i=[],s=[],o=[];for(let l of e)Po(typeof l=="string","All expected entries have to be of type string"),Zle.includes(l)?i.push(l.toLowerCase()):ece.test(l)?s.push(l):(Po(l!=="object",'The value "object" should be written as "Object"'),o.push(l));if(s.length>0){let l=i.indexOf("object");l!==-1&&(i.splice(i,l,1),s.push("Object"))}if(i.length>0){switch(i.length){case 1:n+=`of type ${i[0]}`;break;case 2:n+=`one of type ${i[0]} or ${i[1]}`;break;default:{let l=i.pop();n+=`one of type ${i.join(", ")}, or ${l}`}}(s.length>0||o.length>0)&&(n+=" or ")}if(s.length>0){switch(s.length){case 1:n+=`an instance of ${s[0]}`;break;case 2:n+=`an instance of ${s[0]} or ${s[1]}`;break;default:{let l=s.pop();n+=`an instance of ${s.join(", ")}, or ${l}`}}o.length>0&&(n+=" or ")}switch(o.length){case 0:break;case 1:o[0].toLowerCase()!==o[0]&&(n+="an "),n+=`${o[0]}`;break;case 2:n+=`one of ${o[0]} or ${o[1]}`;break;default:{let l=o.pop();n+=`one of ${o.join(", ")}, or ${l}`}}if(r==null)n+=`. Received ${r}`;else if(typeof r=="function"&&r.name)n+=`. Received function ${r.name}`;else if(typeof r=="object"){var a;if((a=r.constructor)!==null&&a!==void 0&&a.name)n+=`. Received an instance of ${r.constructor.name}`;else{let l=aT(r,{depth:-1});n+=`. Received ${l}`}}else{let l=aT(r,{colors:!1});l.length>25&&(l=`${l.slice(0,25)}...`),n+=`. Received type ${typeof r} (${l})`}return n},TypeError);Tr("ERR_INVALID_ARG_VALUE",(t,e,r="is invalid")=>{let n=aT(e);return n.length>128&&(n=n.slice(0,128)+"..."),`The ${t.includes(".")?"property":"argument"} '${t}' ${r}. Received ${n}`},TypeError);Tr("ERR_INVALID_RETURN_VALUE",(t,e,r)=>{var n;let i=r!=null&&(n=r.constructor)!==null&&n!==void 0&&n.name?`instance of ${r.constructor.name}`:`type ${typeof r}`;return`Expected ${t} to be returned from the "${e}" function but got ${i}.`},TypeError);Tr("ERR_MISSING_ARGS",(...t)=>{Po(t.length>0,"At least one arg needs to be specified");let e,r=t.length;switch(t=(Array.isArray(t)?t:[t]).map(n=>`"${n}"`).join(" or "),r){case 1:e+=`The ${t[0]} argument`;break;case 2:e+=`The ${t[0]} and ${t[1]} arguments`;break;default:{let n=t.pop();e+=`The ${t.join(", ")}, and ${n} arguments`}break}return`${e} must be specified`},TypeError);Tr("ERR_OUT_OF_RANGE",(t,e,r)=>{Po(e,'Missing "range" argument');let n;if(Number.isInteger(r)&&Math.abs(r)>2**32)n=o1(String(r));else if(typeof r=="bigint"){n=String(r);let i=BigInt(2)**BigInt(32);(r>i||r<-i)&&(n=o1(n)),n+="n"}else n=aT(r);return`The value of "${t}" is out of range. It must be ${e}. Received ${n}`},RangeError);Tr("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);Tr("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);Tr("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);Tr("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);Tr("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);Tr("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Tr("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);Tr("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);Tr("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);Tr("ERR_STREAM_WRITE_AFTER_END","write after end",Error);Tr("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);l1.exports={AbortError:hI,aggregateTwoErrors:a1(nce),hideStackFrames:a1,codes:lT}});var Gr=O((cve,pI)=>{"use strict";var ice=require("buffer"),{format:sce,inspect:oce}=EI(),{codes:{ERR_INVALID_ARG_TYPE:TI}}=yr(),{kResistStopPropagation:ace,AggregateError:lce,SymbolDispose:cce}=ct(),uce=globalThis.AbortSignal||wt().AbortSignal,dce=globalThis.AbortController||wt().AbortController,fce=Object.getPrototypeOf(async function(){}).constructor,c1=globalThis.Blob||ice.Blob,Ece=typeof c1<"u"?function(e){return e instanceof c1}:function(e){return!1},u1=(t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new TI(e,"AbortSignal",t)},hce=(t,e)=>{if(typeof t!="function")throw new TI(e,"Function",t)};pI.exports={AggregateError:lce,kEmptyObject:Object.freeze({}),once(t){let e=!1;return function(...r){e||(e=!0,t.apply(this,r))}},createDeferredPromise:function(){let t,e;return{promise:new Promise((n,i)=>{t=n,e=i}),resolve:t,reject:e}},promisify(t){return new Promise((e,r)=>{t((n,...i)=>n?r(n):e(...i))})},debuglog(){return function(){}},format:sce,inspect:oce,types:{isAsyncFunction(t){return t instanceof fce},isArrayBufferView(t){return ArrayBuffer.isView(t)}},isBlob:Ece,deprecate(t,e){return t},addAbortListener:require("events").addAbortListener||function(e,r){if(e===void 0)throw new TI("signal","AbortSignal",e);u1(e,"signal"),hce(r,"listener");let n;return e.aborted?queueMicrotask(()=>r()):(e.addEventListener("abort",r,{__proto__:null,once:!0,[ace]:!0}),n=()=>{e.removeEventListener("abort",r)}),{__proto__:null,[cce](){var i;(i=n)===null||i===void 0||i()}}},AbortSignalAny:uce.any||function(e){if(e.length===1)return e[0];let r=new dce,n=()=>r.abort();return e.forEach(i=>{u1(i,"signals"),i.addEventListener("abort",n,{once:!0})}),r.signal.addEventListener("abort",()=>{e.forEach(i=>i.removeEventListener("abort",n))},{once:!0}),r.signal}};pI.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")});var gl=O((uve,m1)=>{"use strict";var{ArrayIsArray:RI,ArrayPrototypeIncludes:h1,ArrayPrototypeJoin:T1,ArrayPrototypeMap:Tce,NumberIsInteger:AI,NumberIsNaN:pce,NumberMAX_SAFE_INTEGER:Sce,NumberMIN_SAFE_INTEGER:Rce,NumberParseInt:Ace,ObjectPrototypeHasOwnProperty:mce,RegExpPrototypeExec:p1,String:_ce,StringPrototypeToUpperCase:Ice,StringPrototypeTrim:gce}=ct(),{hideStackFrames:pn,codes:{ERR_SOCKET_BAD_PORT:Nce,ERR_INVALID_ARG_TYPE:br,ERR_INVALID_ARG_VALUE:Il,ERR_OUT_OF_RANGE:xo,ERR_UNKNOWN_SIGNAL:d1}}=yr(),{normalizeEncoding:Oce}=Gr(),{isAsyncFunction:Cce,isArrayBufferView:yce}=Gr().types,f1={};function bce(t){return t===(t|0)}function wce(t){return t===t>>>0}var Lce=/^[0-7]+$/,Dce="must be a 32-bit unsigned integer or an octal string";function Pce(t,e,r){if(typeof t>"u"&&(t=r),typeof t=="string"){if(p1(Lce,t)===null)throw new Il(e,t,Dce);t=Ace(t,8)}return S1(t,e),t}var xce=pn((t,e,r=Rce,n=Sce)=>{if(typeof t!="number")throw new br(e,"number",t);if(!AI(t))throw new xo(e,"an integer",t);if(t<r||t>n)throw new xo(e,`>= ${r} && <= ${n}`,t)}),Mce=pn((t,e,r=-2147483648,n=2147483647)=>{if(typeof t!="number")throw new br(e,"number",t);if(!AI(t))throw new xo(e,"an integer",t);if(t<r||t>n)throw new xo(e,`>= ${r} && <= ${n}`,t)}),S1=pn((t,e,r=!1)=>{if(typeof t!="number")throw new br(e,"number",t);if(!AI(t))throw new xo(e,"an integer",t);let n=r?1:0,i=4294967295;if(t<n||t>i)throw new xo(e,`>= ${n} && <= ${i}`,t)});function mI(t,e){if(typeof t!="string")throw new br(e,"string",t)}function vce(t,e,r=void 0,n){if(typeof t!="number")throw new br(e,"number",t);if(r!=null&&t<r||n!=null&&t>n||(r!=null||n!=null)&&pce(t))throw new xo(e,`${r!=null?`>= ${r}`:""}${r!=null&&n!=null?" && ":""}${n!=null?`<= ${n}`:""}`,t)}var Uce=pn((t,e,r)=>{if(!h1(r,t)){let i="must be one of: "+T1(Tce(r,s=>typeof s=="string"?`'${s}'`:_ce(s)),", ");throw new Il(e,t,i)}});function R1(t,e){if(typeof t!="boolean")throw new br(e,"boolean",t)}function SI(t,e,r){return t==null||!mce(t,e)?r:t[e]}var Bce=pn((t,e,r=null)=>{let n=SI(r,"allowArray",!1),i=SI(r,"allowFunction",!1);if(!SI(r,"nullable",!1)&&t===null||!n&&RI(t)||typeof t!="object"&&(!i||typeof t!="function"))throw new br(e,"Object",t)}),Fce=pn((t,e)=>{if(t!=null&&typeof t!="object"&&typeof t!="function")throw new br(e,"a dictionary",t)}),cT=pn((t,e,r=0)=>{if(!RI(t))throw new br(e,"Array",t);if(t.length<r){let n=`must be longer than ${r}`;throw new Il(e,t,n)}});function Gce(t,e){cT(t,e);for(let r=0;r<t.length;r++)mI(t[r],`${e}[${r}]`)}function Hce(t,e){cT(t,e);for(let r=0;r<t.length;r++)R1(t[r],`${e}[${r}]`)}function Wce(t,e){cT(t,e);for(let r=0;r<t.length;r++){let n=t[r],i=`${e}[${r}]`;if(n==null)throw new br(i,"AbortSignal",n);A1(n,i)}}function kce(t,e="signal"){if(mI(t,e),f1[t]===void 0)throw f1[Ice(t)]!==void 0?new d1(t+" (signals must use all capital letters)"):new d1(t)}var $ce=pn((t,e="buffer")=>{if(!yce(t))throw new br(e,["Buffer","TypedArray","DataView"],t)});function Yce(t,e){let r=Oce(e),n=t.length;if(r==="hex"&&n%2!==0)throw new Il("encoding",e,`is invalid for data of length ${n}`)}function Vce(t,e="Port",r=!0){if(typeof t!="number"&&typeof t!="string"||typeof t=="string"&&gce(t).length===0||+t!==+t>>>0||t>65535||t===0&&!r)throw new Nce(e,t,r);return t|0}var A1=pn((t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new br(e,"AbortSignal",t)}),qce=pn((t,e)=>{if(typeof t!="function")throw new br(e,"Function",t)}),Xce=pn((t,e)=>{if(typeof t!="function"||Cce(t))throw new br(e,"Function",t)}),jce=pn((t,e)=>{if(t!==void 0)throw new br(e,"undefined",t)});function zce(t,e,r){if(!h1(r,t))throw new br(e,`('${T1(r,"|")}')`,t)}var Kce=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function E1(t,e){if(typeof t>"u"||!p1(Kce,t))throw new Il(e,t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function Jce(t){if(typeof t=="string")return E1(t,"hints"),t;if(RI(t)){let e=t.length,r="";if(e===0)return r;for(let n=0;n<e;n++){let i=t[n];E1(i,"hints"),r+=i,n!==e-1&&(r+=", ")}return r}throw new Il("hints",t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}m1.exports={isInt32:bce,isUint32:wce,parseFileMode:Pce,validateArray:cT,validateStringArray:Gce,validateBooleanArray:Hce,validateAbortSignalArray:Wce,validateBoolean:R1,validateBuffer:$ce,validateDictionary:Fce,validateEncoding:Yce,validateFunction:qce,validateInt32:Mce,validateInteger:xce,validateNumber:vce,validateObject:Bce,validateOneOf:Uce,validatePlainFunction:Xce,validatePort:Vce,validateSignalName:kce,validateString:mI,validateUint32:S1,validateUndefined:jce,validateUnion:zce,validateAbortSignal:A1,validateLinkHeaderValue:Jce}});var si=O((dve,v1)=>{"use strict";var{SymbolAsyncIterator:_1,SymbolIterator:I1,SymbolFor:Mo}=ct(),g1=Mo("nodejs.stream.destroyed"),N1=Mo("nodejs.stream.errored"),_I=Mo("nodejs.stream.readable"),II=Mo("nodejs.stream.writable"),O1=Mo("nodejs.stream.disturbed"),Qce=Mo("nodejs.webstream.isClosedPromise"),Zce=Mo("nodejs.webstream.controllerErrorFunction");function uT(t,e=!1){var r;return!!(t&&typeof t.pipe=="function"&&typeof t.on=="function"&&(!e||typeof t.pause=="function"&&typeof t.resume=="function")&&(!t._writableState||((r=t._readableState)===null||r===void 0?void 0:r.readable)!==!1)&&(!t._writableState||t._readableState))}function dT(t){var e;return!!(t&&typeof t.write=="function"&&typeof t.on=="function"&&(!t._readableState||((e=t._writableState)===null||e===void 0?void 0:e.writable)!==!1))}function eue(t){return!!(t&&typeof t.pipe=="function"&&t._readableState&&typeof t.on=="function"&&typeof t.write=="function")}function ii(t){return t&&(t._readableState||t._writableState||typeof t.write=="function"&&typeof t.on=="function"||typeof t.pipe=="function"&&typeof t.on=="function")}function C1(t){return!!(t&&!ii(t)&&typeof t.pipeThrough=="function"&&typeof t.getReader=="function"&&typeof t.cancel=="function")}function y1(t){return!!(t&&!ii(t)&&typeof t.getWriter=="function"&&typeof t.abort=="function")}function b1(t){return!!(t&&!ii(t)&&typeof t.readable=="object"&&typeof t.writable=="object")}function tue(t){return C1(t)||y1(t)||b1(t)}function rue(t,e){return t==null?!1:e===!0?typeof t[_1]=="function":e===!1?typeof t[I1]=="function":typeof t[_1]=="function"||typeof t[I1]=="function"}function fT(t){if(!ii(t))return null;let e=t._writableState,r=t._readableState,n=e||r;return!!(t.destroyed||t[g1]||n!=null&&n.destroyed)}function w1(t){if(!dT(t))return null;if(t.writableEnded===!0)return!0;let e=t._writableState;return e!=null&&e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function nue(t,e){if(!dT(t))return null;if(t.writableFinished===!0)return!0;let r=t._writableState;return r!=null&&r.errored?!1:typeof r?.finished!="boolean"?null:!!(r.finished||e===!1&&r.ended===!0&&r.length===0)}function iue(t){if(!uT(t))return null;if(t.readableEnded===!0)return!0;let e=t._readableState;return!e||e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function L1(t,e){if(!uT(t))return null;let r=t._readableState;return r!=null&&r.errored?!1:typeof r?.endEmitted!="boolean"?null:!!(r.endEmitted||e===!1&&r.ended===!0&&r.length===0)}function D1(t){return t&&t[_I]!=null?t[_I]:typeof t?.readable!="boolean"?null:fT(t)?!1:uT(t)&&t.readable&&!L1(t)}function P1(t){return t&&t[II]!=null?t[II]:typeof t?.writable!="boolean"?null:fT(t)?!1:dT(t)&&t.writable&&!w1(t)}function sue(t,e){return ii(t)?fT(t)?!0:!(e?.readable!==!1&&D1(t)||e?.writable!==!1&&P1(t)):null}function oue(t){var e,r;return ii(t)?t.writableErrored?t.writableErrored:(e=(r=t._writableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function aue(t){var e,r;return ii(t)?t.readableErrored?t.readableErrored:(e=(r=t._readableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function lue(t){if(!ii(t))return null;if(typeof t.closed=="boolean")return t.closed;let e=t._writableState,r=t._readableState;return typeof e?.closed=="boolean"||typeof r?.closed=="boolean"?e?.closed||r?.closed:typeof t._closed=="boolean"&&x1(t)?t._closed:null}function x1(t){return typeof t._closed=="boolean"&&typeof t._defaultKeepAlive=="boolean"&&typeof t._removedConnection=="boolean"&&typeof t._removedContLen=="boolean"}function M1(t){return typeof t._sent100=="boolean"&&x1(t)}function cue(t){var e;return typeof t._consuming=="boolean"&&typeof t._dumped=="boolean"&&((e=t.req)===null||e===void 0?void 0:e.upgradeOrConnect)===void 0}function uue(t){if(!ii(t))return null;let e=t._writableState,r=t._readableState,n=e||r;return!n&&M1(t)||!!(n&&n.autoDestroy&&n.emitClose&&n.closed===!1)}function due(t){var e;return!!(t&&((e=t[O1])!==null&&e!==void 0?e:t.readableDidRead||t.readableAborted))}function fue(t){var e,r,n,i,s,o,a,l,c,u;return!!(t&&((e=(r=(n=(i=(s=(o=t[N1])!==null&&o!==void 0?o:t.readableErrored)!==null&&s!==void 0?s:t.writableErrored)!==null&&i!==void 0?i:(a=t._readableState)===null||a===void 0?void 0:a.errorEmitted)!==null&&n!==void 0?n:(l=t._writableState)===null||l===void 0?void 0:l.errorEmitted)!==null&&r!==void 0?r:(c=t._readableState)===null||c===void 0?void 0:c.errored)!==null&&e!==void 0?e:!((u=t._writableState)===null||u===void 0)&&u.errored))}v1.exports={isDestroyed:fT,kIsDestroyed:g1,isDisturbed:due,kIsDisturbed:O1,isErrored:fue,kIsErrored:N1,isReadable:D1,kIsReadable:_I,kIsClosedPromise:Qce,kControllerErrorFunction:Zce,kIsWritable:II,isClosed:lue,isDuplexNodeStream:eue,isFinished:sue,isIterable:rue,isReadableNodeStream:uT,isReadableStream:C1,isReadableEnded:iue,isReadableFinished:L1,isReadableErrored:aue,isNodeStream:ii,isWebStream:tue,isWritable:P1,isWritableNodeStream:dT,isWritableStream:y1,isWritableEnded:w1,isWritableFinished:nue,isWritableErrored:oue,isServerRequest:cue,isServerResponse:M1,willEmitClose:uue,isTransformStream:b1}});var Vi=O((fve,yI)=>{"use strict";var xs=je(),{AbortError:Y1,codes:Eue}=yr(),{ERR_INVALID_ARG_TYPE:hue,ERR_STREAM_PREMATURE_CLOSE:U1}=Eue,{kEmptyObject:NI,once:OI}=Gr(),{validateAbortSignal:Tue,validateFunction:pue,validateObject:Sue,validateBoolean:Rue}=gl(),{Promise:Aue,PromisePrototypeThen:mue,SymbolDispose:V1}=ct(),{isClosed:_ue,isReadable:B1,isReadableNodeStream:gI,isReadableStream:Iue,isReadableFinished:F1,isReadableErrored:G1,isWritable:H1,isWritableNodeStream:W1,isWritableStream:gue,isWritableFinished:k1,isWritableErrored:$1,isNodeStream:Nue,willEmitClose:Oue,kIsClosedPromise:Cue}=si(),Nl;function yue(t){return t.setHeader&&typeof t.abort=="function"}var CI=()=>{};function q1(t,e,r){var n,i;if(arguments.length===2?(r=e,e=NI):e==null?e=NI:Sue(e,"options"),pue(r,"callback"),Tue(e.signal,"options.signal"),r=OI(r),Iue(t)||gue(t))return bue(t,e,r);if(!Nue(t))throw new hue("stream",["ReadableStream","WritableStream","Stream"],t);let s=(n=e.readable)!==null&&n!==void 0?n:gI(t),o=(i=e.writable)!==null&&i!==void 0?i:W1(t),a=t._writableState,l=t._readableState,c=()=>{t.writable||E()},u=Oue(t)&&gI(t)===s&&W1(t)===o,d=k1(t,!1),E=()=>{d=!0,t.destroyed&&(u=!1),!(u&&(!t.readable||s))&&(!s||f)&&r.call(t)},f=F1(t,!1),T=()=>{f=!0,t.destroyed&&(u=!1),!(u&&(!t.writable||o))&&(!o||d)&&r.call(t)},h=g=>{r.call(t,g)},p=_ue(t),S=()=>{p=!0;let g=$1(t)||G1(t);if(g&&typeof g!="boolean")return r.call(t,g);if(s&&!f&&gI(t,!0)&&!F1(t,!1))return r.call(t,new U1);if(o&&!d&&!k1(t,!1))return r.call(t,new U1);r.call(t)},m=()=>{p=!0;let g=$1(t)||G1(t);if(g&&typeof g!="boolean")return r.call(t,g);r.call(t)},R=()=>{t.req.on("finish",E)};yue(t)?(t.on("complete",E),u||t.on("abort",S),t.req?R():t.on("request",R)):o&&!a&&(t.on("end",c),t.on("close",c)),!u&&typeof t.aborted=="boolean"&&t.on("aborted",S),t.on("end",T),t.on("finish",E),e.error!==!1&&t.on("error",h),t.on("close",S),p?xs.nextTick(S):a!=null&&a.errorEmitted||l!=null&&l.errorEmitted?u||xs.nextTick(m):(!s&&(!u||B1(t))&&(d||H1(t)===!1)||!o&&(!u||H1(t))&&(f||B1(t)===!1)||l&&t.req&&t.aborted)&&xs.nextTick(m);let A=()=>{r=CI,t.removeListener("aborted",S),t.removeListener("complete",E),t.removeListener("abort",S),t.removeListener("request",R),t.req&&t.req.removeListener("finish",E),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",E),t.removeListener("end",T),t.removeListener("error",h),t.removeListener("close",S)};if(e.signal&&!p){let g=()=>{let w=r;A(),w.call(t,new Y1(void 0,{cause:e.signal.reason}))};if(e.signal.aborted)xs.nextTick(g);else{Nl=Nl||Gr().addAbortListener;let w=Nl(e.signal,g),I=r;r=OI((...D)=>{w[V1](),I.apply(t,D)})}}return A}function bue(t,e,r){let n=!1,i=CI;if(e.signal)if(i=()=>{n=!0,r.call(t,new Y1(void 0,{cause:e.signal.reason}))},e.signal.aborted)xs.nextTick(i);else{Nl=Nl||Gr().addAbortListener;let o=Nl(e.signal,i),a=r;r=OI((...l)=>{o[V1](),a.apply(t,l)})}let s=(...o)=>{n||xs.nextTick(()=>r.apply(t,o))};return mue(t[Cue].promise,s,s),CI}function wue(t,e){var r;let n=!1;return e===null&&(e=NI),(r=e)!==null&&r!==void 0&&r.cleanup&&(Rue(e.cleanup,"cleanup"),n=e.cleanup),new Aue((i,s)=>{let o=q1(t,e,a=>{n&&o(),a?s(a):i()})})}yI.exports=q1;yI.exports.finished=wue});var vo=O((Eve,eG)=>{"use strict";var oi=je(),{aggregateTwoErrors:Lue,codes:{ERR_MULTIPLE_CALLBACK:Due},AbortError:Pue}=yr(),{Symbol:z1}=ct(),{kIsDestroyed:xue,isDestroyed:Mue,isFinished:vue,isServerRequest:Uue}=si(),K1=z1("kDestroy"),bI=z1("kConstruct");function J1(t,e,r){t&&(t.stack,e&&!e.errored&&(e.errored=t),r&&!r.errored&&(r.errored=t))}function Bue(t,e){let r=this._readableState,n=this._writableState,i=n||r;return n!=null&&n.destroyed||r!=null&&r.destroyed?(typeof e=="function"&&e(),this):(J1(t,n,r),n&&(n.destroyed=!0),r&&(r.destroyed=!0),i.constructed?X1(this,t,e):this.once(K1,function(s){X1(this,Lue(s,t),e)}),this)}function X1(t,e,r){let n=!1;function i(s){if(n)return;n=!0;let o=t._readableState,a=t._writableState;J1(s,a,o),a&&(a.closed=!0),o&&(o.closed=!0),typeof r=="function"&&r(s),s?oi.nextTick(Fue,t,s):oi.nextTick(Q1,t)}try{t._destroy(e||null,i)}catch(s){i(s)}}function Fue(t,e){wI(t,e),Q1(t)}function Q1(t){let e=t._readableState,r=t._writableState;r&&(r.closeEmitted=!0),e&&(e.closeEmitted=!0),(r!=null&&r.emitClose||e!=null&&e.emitClose)&&t.emit("close")}function wI(t,e){let r=t._readableState,n=t._writableState;n!=null&&n.errorEmitted||r!=null&&r.errorEmitted||(n&&(n.errorEmitted=!0),r&&(r.errorEmitted=!0),t.emit("error",e))}function Gue(){let t=this._readableState,e=this._writableState;t&&(t.constructed=!0,t.closed=!1,t.closeEmitted=!1,t.destroyed=!1,t.errored=null,t.errorEmitted=!1,t.reading=!1,t.ended=t.readable===!1,t.endEmitted=t.readable===!1),e&&(e.constructed=!0,e.destroyed=!1,e.closed=!1,e.closeEmitted=!1,e.errored=null,e.errorEmitted=!1,e.finalCalled=!1,e.prefinished=!1,e.ended=e.writable===!1,e.ending=e.writable===!1,e.finished=e.writable===!1)}function LI(t,e,r){let n=t._readableState,i=t._writableState;if(i!=null&&i.destroyed||n!=null&&n.destroyed)return this;n!=null&&n.autoDestroy||i!=null&&i.autoDestroy?t.destroy(e):e&&(e.stack,i&&!i.errored&&(i.errored=e),n&&!n.errored&&(n.errored=e),r?oi.nextTick(wI,t,e):wI(t,e))}function Hue(t,e){if(typeof t._construct!="function")return;let r=t._readableState,n=t._writableState;r&&(r.constructed=!1),n&&(n.constructed=!1),t.once(bI,e),!(t.listenerCount(bI)>1)&&oi.nextTick(Wue,t)}function Wue(t){let e=!1;function r(n){if(e){LI(t,n??new Due);return}e=!0;let i=t._readableState,s=t._writableState,o=s||i;i&&(i.constructed=!0),s&&(s.constructed=!0),o.destroyed?t.emit(K1,n):n?LI(t,n,!0):oi.nextTick(kue,t)}try{t._construct(n=>{oi.nextTick(r,n)})}catch(n){oi.nextTick(r,n)}}function kue(t){t.emit(bI)}function j1(t){return t?.setHeader&&typeof t.abort=="function"}function Z1(t){t.emit("close")}function $ue(t,e){t.emit("error",e),oi.nextTick(Z1,t)}function Yue(t,e){!t||Mue(t)||(!e&&!vue(t)&&(e=new Pue),Uue(t)?(t.socket=null,t.destroy(e)):j1(t)?t.abort():j1(t.req)?t.req.abort():typeof t.destroy=="function"?t.destroy(e):typeof t.close=="function"?t.close():e?oi.nextTick($ue,t,e):oi.nextTick(Z1,t),t.destroyed||(t[xue]=!0))}eG.exports={construct:Hue,destroyer:Yue,destroy:Bue,undestroy:Gue,errorOrDestroy:LI}});var TT=O((hve,rG)=>{"use strict";var{ArrayIsArray:Vue,ObjectSetPrototypeOf:tG}=ct(),{EventEmitter:ET}=require("events");function hT(t){ET.call(this,t)}tG(hT.prototype,ET.prototype);tG(hT,ET);hT.prototype.pipe=function(t,e){let r=this;function n(u){t.writable&&t.write(u)===!1&&r.pause&&r.pause()}r.on("data",n);function i(){r.readable&&r.resume&&r.resume()}t.on("drain",i),!t._isStdio&&(!e||e.end!==!1)&&(r.on("end",o),r.on("close",a));let s=!1;function o(){s||(s=!0,t.end())}function a(){s||(s=!0,typeof t.destroy=="function"&&t.destroy())}function l(u){c(),ET.listenerCount(this,"error")===0&&this.emit("error",u)}DI(r,"error",l),DI(t,"error",l);function c(){r.removeListener("data",n),t.removeListener("drain",i),r.removeListener("end",o),r.removeListener("close",a),r.removeListener("error",l),t.removeListener("error",l),r.removeListener("end",c),r.removeListener("close",c),t.removeListener("close",c)}return r.on("end",c),r.on("close",c),t.on("close",c),t.emit("pipe",r),t};function DI(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Vue(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}rG.exports={Stream:hT,prependListener:DI}});var td=O((Tve,pT)=>{"use strict";var{SymbolDispose:que}=ct(),{AbortError:nG,codes:Xue}=yr(),{isNodeStream:iG,isWebStream:jue,kControllerErrorFunction:zue}=si(),Kue=Vi(),{ERR_INVALID_ARG_TYPE:sG}=Xue,PI,Jue=(t,e)=>{if(typeof t!="object"||!("aborted"in t))throw new sG(e,"AbortSignal",t)};pT.exports.addAbortSignal=function(e,r){if(Jue(e,"signal"),!iG(r)&&!jue(r))throw new sG("stream",["ReadableStream","WritableStream","Stream"],r);return pT.exports.addAbortSignalNoValidate(e,r)};pT.exports.addAbortSignalNoValidate=function(t,e){if(typeof t!="object"||!("aborted"in t))return e;let r=iG(e)?()=>{e.destroy(new nG(void 0,{cause:t.reason}))}:()=>{e[zue](new nG(void 0,{cause:t.reason}))};if(t.aborted)r();else{PI=PI||Gr().addAbortListener;let n=PI(t,r);Kue(e,n[que])}return e}});var lG=O((Sve,aG)=>{"use strict";var{StringPrototypeSlice:oG,SymbolIterator:Que,TypedArrayPrototypeSet:ST,Uint8Array:Zue}=ct(),{Buffer:xI}=require("buffer"),{inspect:ede}=Gr();aG.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){let r={data:e,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length}unshift(e){let r={data:e,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length}shift(){if(this.length===0)return;let e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return"";let r=this.head,n=""+r.data;for(;(r=r.next)!==null;)n+=e+r.data;return n}concat(e){if(this.length===0)return xI.alloc(0);let r=xI.allocUnsafe(e>>>0),n=this.head,i=0;for(;n;)ST(r,n.data,i),i+=n.data.length,n=n.next;return r}consume(e,r){let n=this.head.data;if(e<n.length){let i=n.slice(0,e);return this.head.data=n.slice(e),i}return e===n.length?this.shift():r?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[Que](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let r="",n=this.head,i=0;do{let s=n.data;if(e>s.length)r+=s,e-=s.length;else{e===s.length?(r+=s,++i,n.next?this.head=n.next:this.head=this.tail=null):(r+=oG(s,0,e),this.head=n,n.data=oG(s,e));break}++i}while((n=n.next)!==null);return this.length-=i,r}_getBuffer(e){let r=xI.allocUnsafe(e),n=e,i=this.head,s=0;do{let o=i.data;if(e>o.length)ST(r,o,n-e),e-=o.length;else{e===o.length?(ST(r,o,n-e),++s,i.next?this.head=i.next:this.head=this.tail=null):(ST(r,new Zue(o.buffer,o.byteOffset,e),n-e),this.head=i,i.data=o.slice(e));break}++s}while((i=i.next)!==null);return this.length-=s,r}[Symbol.for("nodejs.util.inspect.custom")](e,r){return ede(this,{...r,depth:0,customInspect:!1})}}});var rd=O((Rve,fG)=>{"use strict";var{MathFloor:tde,NumberIsInteger:rde}=ct(),{validateInteger:nde}=gl(),{ERR_INVALID_ARG_VALUE:ide}=yr().codes,cG=16*1024,uG=16;function sde(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function dG(t){return t?uG:cG}function ode(t,e){nde(e,"value",0),t?uG=e:cG=e}function ade(t,e,r,n){let i=sde(e,n,r);if(i!=null){if(!rde(i)||i<0){let s=n?`options.${r}`:"options.highWaterMark";throw new ide(s,i)}return tde(i)}return dG(t.objectMode)}fG.exports={getHighWaterMark:ade,getDefaultHighWaterMark:dG,setDefaultHighWaterMark:ode}});var MI=O((Ave,pG)=>{"use strict";var EG=je(),{PromisePrototypeThen:lde,SymbolAsyncIterator:hG,SymbolIterator:TG}=ct(),{Buffer:cde}=require("buffer"),{ERR_INVALID_ARG_TYPE:ude,ERR_STREAM_NULL_VALUES:dde}=yr().codes;function fde(t,e,r){let n;if(typeof e=="string"||e instanceof cde)return new t({objectMode:!0,...r,read(){this.push(e),this.push(null)}});let i;if(e&&e[hG])i=!0,n=e[hG]();else if(e&&e[TG])i=!1,n=e[TG]();else throw new ude("iterable",["Iterable"],e);let s=new t({objectMode:!0,highWaterMark:1,...r}),o=!1;s._read=function(){o||(o=!0,l())},s._destroy=function(c,u){lde(a(c),()=>EG.nextTick(u,c),d=>EG.nextTick(u,d||c))};async function a(c){let u=c!=null,d=typeof n.throw=="function";if(u&&d){let{value:E,done:f}=await n.throw(c);if(await E,f)return}if(typeof n.return=="function"){let{value:E}=await n.return();await E}}async function l(){for(;;){try{let{value:c,done:u}=i?await n.next():n.next();if(u)s.push(null);else{let d=c&&typeof c.then=="function"?await c:c;if(d===null)throw o=!1,new dde;if(s.push(d))continue;o=!1}}catch(c){s.destroy(c)}break}}return s}pG.exports=fde});var id=O((mve,MG)=>{"use strict";var xn=je(),{ArrayPrototypeIndexOf:Ede,NumberIsInteger:hde,NumberIsNaN:Tde,NumberParseInt:pde,ObjectDefineProperties:kI,ObjectKeys:Sde,ObjectSetPrototypeOf:AG,Promise:mG,SafeSet:Rde,SymbolAsyncDispose:Ade,SymbolAsyncIterator:mde,Symbol:_de}=ct();MG.exports=Re;Re.ReadableState=_T;var{EventEmitter:Ide}=require("events"),{Stream:Ms,prependListener:gde}=TT(),{Buffer:vI}=require("buffer"),{addAbortSignal:Nde}=td(),_G=Vi(),Pe=Gr().debuglog("stream",t=>{Pe=t}),Ode=lG(),yl=vo(),{getHighWaterMark:Cde,getDefaultHighWaterMark:yde}=rd(),{aggregateTwoErrors:SG,codes:{ERR_INVALID_ARG_TYPE:bde,ERR_METHOD_NOT_IMPLEMENTED:wde,ERR_OUT_OF_RANGE:Lde,ERR_STREAM_PUSH_AFTER_EOF:Dde,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:Pde},AbortError:xde}=yr(),{validateObject:Mde}=gl(),Uo=_de("kPaused"),{StringDecoder:IG}=Au(),vde=MI();AG(Re.prototype,Ms.prototype);AG(Re,Ms);var UI=()=>{},{errorOrDestroy:Ol}=yl,Cl=1,Ude=2,gG=4,nd=8,NG=16,RT=32,AT=64,OG=128,Bde=256,Fde=512,Gde=1024,HI=2048,WI=4096,Hde=8192,Wde=16384,kde=32768,CG=65536,$de=1<<17,Yde=1<<18;function Ht(t){return{enumerable:!1,get(){return(this.state&t)!==0},set(e){e?this.state|=t:this.state&=~t}}}kI(_T.prototype,{objectMode:Ht(Cl),ended:Ht(Ude),endEmitted:Ht(gG),reading:Ht(nd),constructed:Ht(NG),sync:Ht(RT),needReadable:Ht(AT),emittedReadable:Ht(OG),readableListening:Ht(Bde),resumeScheduled:Ht(Fde),errorEmitted:Ht(Gde),emitClose:Ht(HI),autoDestroy:Ht(WI),destroyed:Ht(Hde),closed:Ht(Wde),closeEmitted:Ht(kde),multiAwaitDrain:Ht(CG),readingMore:Ht($de),dataEmitted:Ht(Yde)});function _T(t,e,r){typeof r!="boolean"&&(r=e instanceof ai()),this.state=HI|WI|NG|RT,t&&t.objectMode&&(this.state|=Cl),r&&t&&t.readableObjectMode&&(this.state|=Cl),this.highWaterMark=t?Cde(this,t,"readableHighWaterMark",r):yde(!1),this.buffer=new Ode,this.length=0,this.pipes=[],this.flowing=null,this[Uo]=null,t&&t.emitClose===!1&&(this.state&=~HI),t&&t.autoDestroy===!1&&(this.state&=~WI),this.errored=null,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,t&&t.encoding&&(this.decoder=new IG(t.encoding),this.encoding=t.encoding)}function Re(t){if(!(this instanceof Re))return new Re(t);let e=this instanceof ai();this._readableState=new _T(t,this,e),t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&!e&&Nde(t.signal,this)),Ms.call(this,t),yl.construct(this,()=>{this._readableState.needReadable&&mT(this,this._readableState)})}Re.prototype.destroy=yl.destroy;Re.prototype._undestroy=yl.undestroy;Re.prototype._destroy=function(t,e){e(t)};Re.prototype[Ide.captureRejectionSymbol]=function(t){this.destroy(t)};Re.prototype[Ade]=function(){let t;return this.destroyed||(t=this.readableEnded?null:new xde,this.destroy(t)),new mG((e,r)=>_G(this,n=>n&&n!==t?r(n):e(null)))};Re.prototype.push=function(t,e){return yG(this,t,e,!1)};Re.prototype.unshift=function(t,e){return yG(this,t,e,!0)};function yG(t,e,r,n){Pe("readableAddChunk",e);let i=t._readableState,s;if((i.state&Cl)===0&&(typeof e=="string"?(r=r||i.defaultEncoding,i.encoding!==r&&(n&&i.encoding?e=vI.from(e,r).toString(i.encoding):(e=vI.from(e,r),r=""))):e instanceof vI?r="":Ms._isUint8Array(e)?(e=Ms._uint8ArrayToBuffer(e),r=""):e!=null&&(s=new bde("chunk",["string","Buffer","Uint8Array"],e))),s)Ol(t,s);else if(e===null)i.state&=~nd,Xde(t,i);else if((i.state&Cl)!==0||e&&e.length>0)if(n)if((i.state&gG)!==0)Ol(t,new Pde);else{if(i.destroyed||i.errored)return!1;BI(t,i,e,!0)}else if(i.ended)Ol(t,new Dde);else{if(i.destroyed||i.errored)return!1;i.state&=~nd,i.decoder&&!r?(e=i.decoder.write(e),i.objectMode||e.length!==0?BI(t,i,e,!1):mT(t,i)):BI(t,i,e,!1)}else n||(i.state&=~nd,mT(t,i));return!i.ended&&(i.length<i.highWaterMark||i.length===0)}function BI(t,e,r,n){e.flowing&&e.length===0&&!e.sync&&t.listenerCount("data")>0?((e.state&CG)!==0?e.awaitDrainWriters.clear():e.awaitDrainWriters=null,e.dataEmitted=!0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),(e.state&AT)!==0&&IT(t)),mT(t,e)}Re.prototype.isPaused=function(){let t=this._readableState;return t[Uo]===!0||t.flowing===!1};Re.prototype.setEncoding=function(t){let e=new IG(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;let r=this._readableState.buffer,n="";for(let i of r)n+=e.write(i);return r.clear(),n!==""&&r.push(n),this._readableState.length=n.length,this};var Vde=1073741824;function qde(t){if(t>Vde)throw new Lde("size","<= 1GiB",t);return t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++,t}function RG(t,e){return t<=0||e.length===0&&e.ended?0:(e.state&Cl)!==0?1:Tde(t)?e.flowing&&e.length?e.buffer.first().length:e.length:t<=e.length?t:e.ended?e.length:0}Re.prototype.read=function(t){Pe("read",t),t===void 0?t=NaN:hde(t)||(t=pde(t,10));let e=this._readableState,r=t;if(t>e.highWaterMark&&(e.highWaterMark=qde(t)),t!==0&&(e.state&=~OG),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return Pe("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?FI(this):IT(this),null;if(t=RG(t,e),t===0&&e.ended)return e.length===0&&FI(this),null;let n=(e.state&AT)!==0;if(Pe("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,Pe("length less than watermark",n)),e.ended||e.reading||e.destroyed||e.errored||!e.constructed)n=!1,Pe("reading, ended or constructing",n);else if(n){Pe("do read"),e.state|=nd|RT,e.length===0&&(e.state|=AT);try{this._read(e.highWaterMark)}catch(s){Ol(this,s)}e.state&=~RT,e.reading||(t=RG(r,e))}let i;return t>0?i=PG(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.multiAwaitDrain?e.awaitDrainWriters.clear():e.awaitDrainWriters=null),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&FI(this)),i!==null&&!e.errorEmitted&&!e.closeEmitted&&(e.dataEmitted=!0,this.emit("data",i)),i};function Xde(t,e){if(Pe("onEofChunk"),!e.ended){if(e.decoder){let r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?IT(t):(e.needReadable=!1,e.emittedReadable=!0,bG(t))}}function IT(t){let e=t._readableState;Pe("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(Pe("emitReadable",e.flowing),e.emittedReadable=!0,xn.nextTick(bG,t))}function bG(t){let e=t._readableState;Pe("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&!e.errored&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,LG(t)}function mT(t,e){!e.readingMore&&e.constructed&&(e.readingMore=!0,xn.nextTick(jde,t,e))}function jde(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){let r=e.length;if(Pe("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}Re.prototype._read=function(t){throw new wde("_read()")};Re.prototype.pipe=function(t,e){let r=this,n=this._readableState;n.pipes.length===1&&(n.multiAwaitDrain||(n.multiAwaitDrain=!0,n.awaitDrainWriters=new Rde(n.awaitDrainWriters?[n.awaitDrainWriters]:[]))),n.pipes.push(t),Pe("pipe count=%d opts=%j",n.pipes.length,e);let s=(!e||e.end!==!1)&&t!==xn.stdout&&t!==xn.stderr?a:p;n.endEmitted?xn.nextTick(s):r.once("end",s),t.on("unpipe",o);function o(S,m){Pe("onunpipe"),S===r&&m&&m.hasUnpiped===!1&&(m.hasUnpiped=!0,u())}function a(){Pe("onend"),t.end()}let l,c=!1;function u(){Pe("cleanup"),t.removeListener("close",T),t.removeListener("finish",h),l&&t.removeListener("drain",l),t.removeListener("error",f),t.removeListener("unpipe",o),r.removeListener("end",a),r.removeListener("end",p),r.removeListener("data",E),c=!0,l&&n.awaitDrainWriters&&(!t._writableState||t._writableState.needDrain)&&l()}function d(){c||(n.pipes.length===1&&n.pipes[0]===t?(Pe("false write response, pause",0),n.awaitDrainWriters=t,n.multiAwaitDrain=!1):n.pipes.length>1&&n.pipes.includes(t)&&(Pe("false write response, pause",n.awaitDrainWriters.size),n.awaitDrainWriters.add(t)),r.pause()),l||(l=zde(r,t),t.on("drain",l))}r.on("data",E);function E(S){Pe("ondata");let m=t.write(S);Pe("dest.write",m),m===!1&&d()}function f(S){if(Pe("onerror",S),p(),t.removeListener("error",f),t.listenerCount("error")===0){let m=t._writableState||t._readableState;m&&!m.errorEmitted?Ol(t,S):t.emit("error",S)}}gde(t,"error",f);function T(){t.removeListener("finish",h),p()}t.once("close",T);function h(){Pe("onfinish"),t.removeListener("close",T),p()}t.once("finish",h);function p(){Pe("unpipe"),r.unpipe(t)}return t.emit("pipe",r),t.writableNeedDrain===!0?d():n.flowing||(Pe("pipe resume"),r.resume()),t};function zde(t,e){return function(){let n=t._readableState;n.awaitDrainWriters===e?(Pe("pipeOnDrain",1),n.awaitDrainWriters=null):n.multiAwaitDrain&&(Pe("pipeOnDrain",n.awaitDrainWriters.size),n.awaitDrainWriters.delete(e)),(!n.awaitDrainWriters||n.awaitDrainWriters.size===0)&&t.listenerCount("data")&&t.resume()}}Re.prototype.unpipe=function(t){let e=this._readableState,r={hasUnpiped:!1};if(e.pipes.length===0)return this;if(!t){let i=e.pipes;e.pipes=[],this.pause();for(let s=0;s<i.length;s++)i[s].emit("unpipe",this,{hasUnpiped:!1});return this}let n=Ede(e.pipes,t);return n===-1?this:(e.pipes.splice(n,1),e.pipes.length===0&&this.pause(),t.emit("unpipe",this,r),this)};Re.prototype.on=function(t,e){let r=Ms.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,Pe("on readable",n.length,n.reading),n.length?IT(this):n.reading||xn.nextTick(Kde,this)),r};Re.prototype.addListener=Re.prototype.on;Re.prototype.removeListener=function(t,e){let r=Ms.prototype.removeListener.call(this,t,e);return t==="readable"&&xn.nextTick(wG,this),r};Re.prototype.off=Re.prototype.removeListener;Re.prototype.removeAllListeners=function(t){let e=Ms.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&xn.nextTick(wG,this),e};function wG(t){let e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&e[Uo]===!1?e.flowing=!0:t.listenerCount("data")>0?t.resume():e.readableListening||(e.flowing=null)}function Kde(t){Pe("readable nexttick read 0"),t.read(0)}Re.prototype.resume=function(){let t=this._readableState;return t.flowing||(Pe("resume"),t.flowing=!t.readableListening,Jde(this,t)),t[Uo]=!1,this};function Jde(t,e){e.resumeScheduled||(e.resumeScheduled=!0,xn.nextTick(Qde,t,e))}function Qde(t,e){Pe("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),LG(t),e.flowing&&!e.reading&&t.read(0)}Re.prototype.pause=function(){return Pe("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Pe("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[Uo]=!0,this};function LG(t){let e=t._readableState;for(Pe("flow",e.flowing);e.flowing&&t.read()!==null;);}Re.prototype.wrap=function(t){let e=!1;t.on("data",n=>{!this.push(n)&&t.pause&&(e=!0,t.pause())}),t.on("end",()=>{this.push(null)}),t.on("error",n=>{Ol(this,n)}),t.on("close",()=>{this.destroy()}),t.on("destroy",()=>{this.destroy()}),this._read=()=>{e&&t.resume&&(e=!1,t.resume())};let r=Sde(t);for(let n=1;n<r.length;n++){let i=r[n];this[i]===void 0&&typeof t[i]=="function"&&(this[i]=t[i].bind(t))}return this};Re.prototype[mde]=function(){return DG(this)};Re.prototype.iterator=function(t){return t!==void 0&&Mde(t,"options"),DG(this,t)};function DG(t,e){typeof t.read!="function"&&(t=Re.wrap(t,{objectMode:!0}));let r=Zde(t,e);return r.stream=t,r}async function*Zde(t,e){let r=UI;function n(o){this===t?(r(),r=UI):r=o}t.on("readable",n);let i,s=_G(t,{writable:!1},o=>{i=o?SG(i,o):null,r(),r=UI});try{for(;;){let o=t.destroyed?null:t.read();if(o!==null)yield o;else{if(i)throw i;if(i===null)return;await new mG(n)}}}catch(o){throw i=SG(i,o),i}finally{(i||e?.destroyOnReturn!==!1)&&(i===void 0||t._readableState.autoDestroy)?yl.destroyer(t,null):(t.off("readable",n),s())}}kI(Re.prototype,{readable:{__proto__:null,get(){let t=this._readableState;return!!t&&t.readable!==!1&&!t.destroyed&&!t.errorEmitted&&!t.endEmitted},set(t){this._readableState&&(this._readableState.readable=!!t)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(t){this._readableState&&(this._readableState.destroyed=t)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}});kI(_T.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[Uo]!==!1},set(t){this[Uo]=!!t}}});Re._fromList=PG;function PG(t,e){if(e.length===0)return null;let r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function FI(t){let e=t._readableState;Pe("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,xn.nextTick(efe,e,t))}function efe(t,e){if(Pe("endReadableNT",t.endEmitted,t.length),!t.errored&&!t.closeEmitted&&!t.endEmitted&&t.length===0){if(t.endEmitted=!0,e.emit("end"),e.writable&&e.allowHalfOpen===!1)xn.nextTick(tfe,e);else if(t.autoDestroy){let r=e._writableState;(!r||r.autoDestroy&&(r.finished||r.writable===!1))&&e.destroy()}}}function tfe(t){t.writable&&!t.writableEnded&&!t.destroyed&&t.end()}Re.from=function(t,e){return vde(Re,t,e)};var GI;function xG(){return GI===void 0&&(GI={}),GI}Re.fromWeb=function(t,e){return xG().newStreamReadableFromReadableStream(t,e)};Re.toWeb=function(t,e){return xG().newReadableStreamFromStreamReadable(t,e)};Re.wrap=function(t,e){var r,n;return new Re({objectMode:(r=(n=t.readableObjectMode)!==null&&n!==void 0?n:t.objectMode)!==null&&r!==void 0?r:!0,...e,destroy(i,s){yl.destroyer(t,i),s(i)}}).wrap(t)}});var yT=O((_ve,qG)=>{"use strict";var Bo=je(),{ArrayPrototypeSlice:BG,Error:rfe,FunctionPrototypeSymbolHasInstance:FG,ObjectDefineProperty:GG,ObjectDefineProperties:nfe,ObjectSetPrototypeOf:HG,StringPrototypeToLowerCase:ife,Symbol:sfe,SymbolHasInstance:ofe}=ct();qG.exports=Tt;Tt.WritableState=ad;var{EventEmitter:afe}=require("events"),sd=TT().Stream,{Buffer:gT}=require("buffer"),CT=vo(),{addAbortSignal:lfe}=td(),{getHighWaterMark:cfe,getDefaultHighWaterMark:ufe}=rd(),{ERR_INVALID_ARG_TYPE:dfe,ERR_METHOD_NOT_IMPLEMENTED:ffe,ERR_MULTIPLE_CALLBACK:WG,ERR_STREAM_CANNOT_PIPE:Efe,ERR_STREAM_DESTROYED:od,ERR_STREAM_ALREADY_FINISHED:hfe,ERR_STREAM_NULL_VALUES:Tfe,ERR_STREAM_WRITE_AFTER_END:pfe,ERR_UNKNOWN_ENCODING:kG}=yr().codes,{errorOrDestroy:bl}=CT;HG(Tt.prototype,sd.prototype);HG(Tt,sd);function VI(){}var wl=sfe("kOnFinished");function ad(t,e,r){typeof r!="boolean"&&(r=e instanceof ai()),this.objectMode=!!(t&&t.objectMode),r&&(this.objectMode=this.objectMode||!!(t&&t.writableObjectMode)),this.highWaterMark=t?cfe(this,t,"writableHighWaterMark",r):ufe(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let n=!!(t&&t.decodeStrings===!1);this.decodeStrings=!n,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=Rfe.bind(void 0,e),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,OT(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!t||t.emitClose!==!1,this.autoDestroy=!t||t.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[wl]=[]}function OT(t){t.buffered=[],t.bufferedIndex=0,t.allBuffers=!0,t.allNoop=!0}ad.prototype.getBuffer=function(){return BG(this.buffered,this.bufferedIndex)};GG(ad.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function Tt(t){let e=this instanceof ai();if(!e&&!FG(Tt,this))return new Tt(t);this._writableState=new ad(t,this,e),t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&lfe(t.signal,this)),sd.call(this,t),CT.construct(this,()=>{let r=this._writableState;r.writing||XI(this,r),jI(this,r)})}GG(Tt,ofe,{__proto__:null,value:function(t){return FG(this,t)?!0:this!==Tt?!1:t&&t._writableState instanceof ad}});Tt.prototype.pipe=function(){bl(this,new Efe)};function $G(t,e,r,n){let i=t._writableState;if(typeof r=="function")n=r,r=i.defaultEncoding;else{if(!r)r=i.defaultEncoding;else if(r!=="buffer"&&!gT.isEncoding(r))throw new kG(r);typeof n!="function"&&(n=VI)}if(e===null)throw new Tfe;if(!i.objectMode)if(typeof e=="string")i.decodeStrings!==!1&&(e=gT.from(e,r),r="buffer");else if(e instanceof gT)r="buffer";else if(sd._isUint8Array(e))e=sd._uint8ArrayToBuffer(e),r="buffer";else throw new dfe("chunk",["string","Buffer","Uint8Array"],e);let s;return i.ending?s=new pfe:i.destroyed&&(s=new od("write")),s?(Bo.nextTick(n,s),bl(t,s,!0),s):(i.pendingcb++,Sfe(t,i,e,r,n))}Tt.prototype.write=function(t,e,r){return $G(this,t,e,r)===!0};Tt.prototype.cork=function(){this._writableState.corked++};Tt.prototype.uncork=function(){let t=this._writableState;t.corked&&(t.corked--,t.writing||XI(this,t))};Tt.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=ife(e)),!gT.isEncoding(e))throw new kG(e);return this._writableState.defaultEncoding=e,this};function Sfe(t,e,r,n,i){let s=e.objectMode?1:r.length;e.length+=s;let o=e.length<e.highWaterMark;return o||(e.needDrain=!0),e.writing||e.corked||e.errored||!e.constructed?(e.buffered.push({chunk:r,encoding:n,callback:i}),e.allBuffers&&n!=="buffer"&&(e.allBuffers=!1),e.allNoop&&i!==VI&&(e.allNoop=!1)):(e.writelen=s,e.writecb=i,e.writing=!0,e.sync=!0,t._write(r,n,e.onwrite),e.sync=!1),o&&!e.errored&&!e.destroyed}function vG(t,e,r,n,i,s,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new od("write")):r?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function UG(t,e,r,n){--e.pendingcb,n(r),qI(e),bl(t,r)}function Rfe(t,e){let r=t._writableState,n=r.sync,i=r.writecb;if(typeof i!="function"){bl(t,new WG);return}r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0,e?(e.stack,r.errored||(r.errored=e),t._readableState&&!t._readableState.errored&&(t._readableState.errored=e),n?Bo.nextTick(UG,t,r,e,i):UG(t,r,e,i)):(r.buffered.length>r.bufferedIndex&&XI(t,r),n?r.afterWriteTickInfo!==null&&r.afterWriteTickInfo.cb===i?r.afterWriteTickInfo.count++:(r.afterWriteTickInfo={count:1,cb:i,stream:t,state:r},Bo.nextTick(Afe,r.afterWriteTickInfo)):YG(t,r,1,i))}function Afe({stream:t,state:e,count:r,cb:n}){return e.afterWriteTickInfo=null,YG(t,e,r,n)}function YG(t,e,r,n){for(!e.ending&&!t.destroyed&&e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"));r-- >0;)e.pendingcb--,n();e.destroyed&&qI(e),jI(t,e)}function qI(t){if(t.writing)return;for(let i=t.bufferedIndex;i<t.buffered.length;++i){var e;let{chunk:s,callback:o}=t.buffered[i],a=t.objectMode?1:s.length;t.length-=a,o((e=t.errored)!==null&&e!==void 0?e:new od("write"))}let r=t[wl].splice(0);for(let i=0;i<r.length;i++){var n;r[i]((n=t.errored)!==null&&n!==void 0?n:new od("end"))}OT(t)}function XI(t,e){if(e.corked||e.bufferProcessing||e.destroyed||!e.constructed)return;let{buffered:r,bufferedIndex:n,objectMode:i}=e,s=r.length-n;if(!s)return;let o=n;if(e.bufferProcessing=!0,s>1&&t._writev){e.pendingcb-=s-1;let a=e.allNoop?VI:c=>{for(let u=o;u<r.length;++u)r[u].callback(c)},l=e.allNoop&&o===0?r:BG(r,o);l.allBuffers=e.allBuffers,vG(t,e,!0,e.length,l,"",a),OT(e)}else{do{let{chunk:a,encoding:l,callback:c}=r[o];r[o++]=null;let u=i?1:a.length;vG(t,e,!1,u,a,l,c)}while(o<r.length&&!e.writing);o===r.length?OT(e):o>256?(r.splice(0,o),e.bufferedIndex=0):e.bufferedIndex=o}e.bufferProcessing=!1}Tt.prototype._write=function(t,e,r){if(this._writev)this._writev([{chunk:t,encoding:e}],r);else throw new ffe("_write()")};Tt.prototype._writev=null;Tt.prototype.end=function(t,e,r){let n=this._writableState;typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null);let i;if(t!=null){let s=$G(this,t,e);s instanceof rfe&&(i=s)}return n.corked&&(n.corked=1,this.uncork()),i||(!n.errored&&!n.ending?(n.ending=!0,jI(this,n,!0),n.ended=!0):n.finished?i=new hfe("end"):n.destroyed&&(i=new od("end"))),typeof r=="function"&&(i||n.finished?Bo.nextTick(r,i):n[wl].push(r)),this};function NT(t){return t.ending&&!t.destroyed&&t.constructed&&t.length===0&&!t.errored&&t.buffered.length===0&&!t.finished&&!t.writing&&!t.errorEmitted&&!t.closeEmitted}function mfe(t,e){let r=!1;function n(i){if(r){bl(t,i??WG());return}if(r=!0,e.pendingcb--,i){let s=e[wl].splice(0);for(let o=0;o<s.length;o++)s[o](i);bl(t,i,e.sync)}else NT(e)&&(e.prefinished=!0,t.emit("prefinish"),e.pendingcb++,Bo.nextTick(YI,t,e))}e.sync=!0,e.pendingcb++;try{t._final(n)}catch(i){n(i)}e.sync=!1}function _fe(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.finalCalled=!0,mfe(t,e)):(e.prefinished=!0,t.emit("prefinish")))}function jI(t,e,r){NT(e)&&(_fe(t,e),e.pendingcb===0&&(r?(e.pendingcb++,Bo.nextTick((n,i)=>{NT(i)?YI(n,i):i.pendingcb--},t,e)):NT(e)&&(e.pendingcb++,YI(t,e))))}function YI(t,e){e.pendingcb--,e.finished=!0;let r=e[wl].splice(0);for(let n=0;n<r.length;n++)r[n]();if(t.emit("finish"),e.autoDestroy){let n=t._readableState;(!n||n.autoDestroy&&(n.endEmitted||n.readable===!1))&&t.destroy()}}nfe(Tt.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(t){this._writableState&&(this._writableState.destroyed=t)}},writable:{__proto__:null,get(){let t=this._writableState;return!!t&&t.writable!==!1&&!t.destroyed&&!t.errored&&!t.ending&&!t.ended},set(t){this._writableState&&(this._writableState.writable=!!t)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let t=this._writableState;return t?!t.destroyed&&!t.ending&&t.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var Ife=CT.destroy;Tt.prototype.destroy=function(t,e){let r=this._writableState;return!r.destroyed&&(r.bufferedIndex<r.buffered.length||r[wl].length)&&Bo.nextTick(qI,r),Ife.call(this,t,e),this};Tt.prototype._undestroy=CT.undestroy;Tt.prototype._destroy=function(t,e){e(t)};Tt.prototype[afe.captureRejectionSymbol]=function(t){this.destroy(t)};var $I;function VG(){return $I===void 0&&($I={}),$I}Tt.fromWeb=function(t,e){return VG().newStreamWritableFromWritableStream(t,e)};Tt.toWeb=function(t){return VG().newWritableStreamFromStreamWritable(t)}});var aH=O((Ive,oH)=>{var zI=je(),gfe=require("buffer"),{isReadable:Nfe,isWritable:Ofe,isIterable:XG,isNodeStream:Cfe,isReadableNodeStream:jG,isWritableNodeStream:zG,isDuplexNodeStream:yfe,isReadableStream:KG,isWritableStream:JG}=si(),QG=Vi(),{AbortError:iH,codes:{ERR_INVALID_ARG_TYPE:bfe,ERR_INVALID_RETURN_VALUE:ZG}}=yr(),{destroyer:Dl}=vo(),wfe=ai(),sH=id(),Lfe=yT(),{createDeferredPromise:eH}=Gr(),tH=MI(),rH=globalThis.Blob||gfe.Blob,Dfe=typeof rH<"u"?function(e){return e instanceof rH}:function(e){return!1},Pfe=globalThis.AbortController||wt().AbortController,{FunctionPrototypeCall:nH}=ct(),vs=class extends wfe{constructor(e){super(e),e?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),e?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};oH.exports=function t(e,r){if(yfe(e))return e;if(jG(e))return Ll({readable:e});if(zG(e))return Ll({writable:e});if(Cfe(e))return Ll({writable:!1,readable:!1});if(KG(e))return Ll({readable:sH.fromWeb(e)});if(JG(e))return Ll({writable:Lfe.fromWeb(e)});if(typeof e=="function"){let{value:i,write:s,final:o,destroy:a}=xfe(e);if(XG(i))return tH(vs,i,{objectMode:!0,write:s,final:o,destroy:a});let l=i?.then;if(typeof l=="function"){let c,u=nH(l,i,d=>{if(d!=null)throw new ZG("nully","body",d)},d=>{Dl(c,d)});return c=new vs({objectMode:!0,readable:!1,write:s,final(d){o(async()=>{try{await u,zI.nextTick(d,null)}catch(E){zI.nextTick(d,E)}})},destroy:a})}throw new ZG("Iterable, AsyncIterable or AsyncFunction",r,i)}if(Dfe(e))return t(e.arrayBuffer());if(XG(e))return tH(vs,e,{objectMode:!0,writable:!1});if(KG(e?.readable)&&JG(e?.writable))return vs.fromWeb(e);if(typeof e?.writable=="object"||typeof e?.readable=="object"){let i=e!=null&&e.readable?jG(e?.readable)?e?.readable:t(e.readable):void 0,s=e!=null&&e.writable?zG(e?.writable)?e?.writable:t(e.writable):void 0;return Ll({readable:i,writable:s})}let n=e?.then;if(typeof n=="function"){let i;return nH(n,e,s=>{s!=null&&i.push(s),i.push(null)},s=>{Dl(i,s)}),i=new vs({objectMode:!0,writable:!1,read(){}})}throw new bfe(r,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],e)};function xfe(t){let{promise:e,resolve:r}=eH(),n=new Pfe,i=n.signal;return{value:t((async function*(){for(;;){let o=e;e=null;let{chunk:a,done:l,cb:c}=await o;if(zI.nextTick(c),l)return;if(i.aborted)throw new iH(void 0,{cause:i.reason});({promise:e,resolve:r}=eH()),yield a}})(),{signal:i}),write(o,a,l){let c=r;r=null,c({chunk:o,done:!1,cb:l})},final(o){let a=r;r=null,a({done:!0,cb:o})},destroy(o,a){n.abort(),a(o)}}}function Ll(t){let e=t.readable&&typeof t.readable.read!="function"?sH.wrap(t.readable):t.readable,r=t.writable,n=!!Nfe(e),i=!!Ofe(r),s,o,a,l,c;function u(d){let E=l;l=null,E?E(d):d&&c.destroy(d)}return c=new vs({readableObjectMode:!!(e!=null&&e.readableObjectMode),writableObjectMode:!!(r!=null&&r.writableObjectMode),readable:n,writable:i}),i&&(QG(r,d=>{i=!1,d&&Dl(e,d),u(d)}),c._write=function(d,E,f){r.write(d,E)?f():s=f},c._final=function(d){r.end(),o=d},r.on("drain",function(){if(s){let d=s;s=null,d()}}),r.on("finish",function(){if(o){let d=o;o=null,d()}})),n&&(QG(e,d=>{n=!1,d&&Dl(e,d),u(d)}),e.on("readable",function(){if(a){let d=a;a=null,d()}}),e.on("end",function(){c.push(null)}),c._read=function(){for(;;){let d=e.read();if(d===null){a=c._read;return}if(!c.push(d))return}}),c._destroy=function(d,E){!d&&l!==null&&(d=new iH),a=null,s=null,o=null,l===null?E(d):(l=E,Dl(r,d),Dl(e,d))},c}});var ai=O((gve,uH)=>{"use strict";var{ObjectDefineProperties:Mfe,ObjectGetOwnPropertyDescriptor:qi,ObjectKeys:vfe,ObjectSetPrototypeOf:lH}=ct();uH.exports=Mn;var QI=id(),Sn=yT();lH(Mn.prototype,QI.prototype);lH(Mn,QI);{let t=vfe(Sn.prototype);for(let e=0;e<t.length;e++){let r=t[e];Mn.prototype[r]||(Mn.prototype[r]=Sn.prototype[r])}}function Mn(t){if(!(this instanceof Mn))return new Mn(t);QI.call(this,t),Sn.call(this,t),t?(this.allowHalfOpen=t.allowHalfOpen!==!1,t.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),t.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}Mfe(Mn.prototype,{writable:{__proto__:null,...qi(Sn.prototype,"writable")},writableHighWaterMark:{__proto__:null,...qi(Sn.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...qi(Sn.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...qi(Sn.prototype,"writableBuffer")},writableLength:{__proto__:null,...qi(Sn.prototype,"writableLength")},writableFinished:{__proto__:null,...qi(Sn.prototype,"writableFinished")},writableCorked:{__proto__:null,...qi(Sn.prototype,"writableCorked")},writableEnded:{__proto__:null,...qi(Sn.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...qi(Sn.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(t){this._readableState&&this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}});var KI;function cH(){return KI===void 0&&(KI={}),KI}Mn.fromWeb=function(t,e){return cH().newStreamDuplexFromReadableWritablePair(t,e)};Mn.toWeb=function(t){return cH().newReadableWritablePairFromDuplex(t)};var JI;Mn.from=function(t){return JI||(JI=aH()),JI(t,"body")}});var tg=O((Nve,fH)=>{"use strict";var{ObjectSetPrototypeOf:dH,Symbol:Ufe}=ct();fH.exports=Xi;var{ERR_METHOD_NOT_IMPLEMENTED:Bfe}=yr().codes,eg=ai(),{getHighWaterMark:Ffe}=rd();dH(Xi.prototype,eg.prototype);dH(Xi,eg);var ld=Ufe("kCallback");function Xi(t){if(!(this instanceof Xi))return new Xi(t);let e=t?Ffe(this,t,"readableHighWaterMark",!0):null;e===0&&(t={...t,highWaterMark:null,readableHighWaterMark:e,writableHighWaterMark:t.writableHighWaterMark||0}),eg.call(this,t),this._readableState.sync=!1,this[ld]=null,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",Gfe)}function ZI(t){typeof this._flush=="function"&&!this.destroyed?this._flush((e,r)=>{if(e){t?t(e):this.destroy(e);return}r!=null&&this.push(r),this.push(null),t&&t()}):(this.push(null),t&&t())}function Gfe(){this._final!==ZI&&ZI.call(this)}Xi.prototype._final=ZI;Xi.prototype._transform=function(t,e,r){throw new Bfe("_transform()")};Xi.prototype._write=function(t,e,r){let n=this._readableState,i=this._writableState,s=n.length;this._transform(t,e,(o,a)=>{if(o){r(o);return}a!=null&&this.push(a),i.ended||s===n.length||n.length<n.highWaterMark?r():this[ld]=r})};Xi.prototype._read=function(){if(this[ld]){let t=this[ld];this[ld]=null,t()}}});var ng=O((Ove,hH)=>{"use strict";var{ObjectSetPrototypeOf:EH}=ct();hH.exports=Pl;var rg=tg();EH(Pl.prototype,rg.prototype);EH(Pl,rg);function Pl(t){if(!(this instanceof Pl))return new Pl(t);rg.call(this,t)}Pl.prototype._transform=function(t,e,r){r(null,t)}});var DT=O((Cve,AH)=>{var cd=je(),{ArrayIsArray:Hfe,Promise:Wfe,SymbolAsyncIterator:kfe,SymbolDispose:$fe}=ct(),LT=Vi(),{once:Yfe}=Gr(),Vfe=vo(),TH=ai(),{aggregateTwoErrors:qfe,codes:{ERR_INVALID_ARG_TYPE:fg,ERR_INVALID_RETURN_VALUE:ig,ERR_MISSING_ARGS:Xfe,ERR_STREAM_DESTROYED:jfe,ERR_STREAM_PREMATURE_CLOSE:zfe},AbortError:Kfe}=yr(),{validateFunction:Jfe,validateAbortSignal:Qfe}=gl(),{isIterable:Fo,isReadable:sg,isReadableNodeStream:wT,isNodeStream:pH,isTransformStream:xl,isWebStream:Zfe,isReadableStream:og,isReadableFinished:eEe}=si(),tEe=globalThis.AbortController||wt().AbortController,ag,lg,cg;function SH(t,e,r){let n=!1;t.on("close",()=>{n=!0});let i=LT(t,{readable:e,writable:r},s=>{n=!s});return{destroy:s=>{n||(n=!0,Vfe.destroyer(t,s||new jfe("pipe")))},cleanup:i}}function rEe(t){return Jfe(t[t.length-1],"streams[stream.length - 1]"),t.pop()}function ug(t){if(Fo(t))return t;if(wT(t))return nEe(t);throw new fg("val",["Readable","Iterable","AsyncIterable"],t)}async function*nEe(t){lg||(lg=id()),yield*lg.prototype[kfe].call(t)}async function bT(t,e,r,{end:n}){let i,s=null,o=c=>{if(c&&(i=c),s){let u=s;s=null,u()}},a=()=>new Wfe((c,u)=>{i?u(i):s=()=>{i?u(i):c()}});e.on("drain",o);let l=LT(e,{readable:!1},o);try{e.writableNeedDrain&&await a();for await(let c of t)e.write(c)||await a();n&&(e.end(),await a()),r()}catch(c){r(i!==c?qfe(i,c):c)}finally{l(),e.off("drain",o)}}async function dg(t,e,r,{end:n}){xl(e)&&(e=e.writable);let i=e.getWriter();try{for await(let s of t)await i.ready,i.write(s).catch(()=>{});await i.ready,n&&await i.close(),r()}catch(s){try{await i.abort(s),r(s)}catch(o){r(o)}}}function iEe(...t){return RH(t,Yfe(rEe(t)))}function RH(t,e,r){if(t.length===1&&Hfe(t[0])&&(t=t[0]),t.length<2)throw new Xfe("streams");let n=new tEe,i=n.signal,s=r?.signal,o=[];Qfe(s,"options.signal");function a(){T(new Kfe)}cg=cg||Gr().addAbortListener;let l;s&&(l=cg(s,a));let c,u,d=[],E=0;function f(R){T(R,--E===0)}function T(R,A){var g;if(R&&(!c||c.code==="ERR_STREAM_PREMATURE_CLOSE")&&(c=R),!(!c&&!A)){for(;d.length;)d.shift()(c);(g=l)===null||g===void 0||g[$fe](),n.abort(),A&&(c||o.forEach(w=>w()),cd.nextTick(e,c,u))}}let h;for(let R=0;R<t.length;R++){let A=t[R],g=R<t.length-1,w=R>0,I=g||r?.end!==!1,D=R===t.length-1;if(pH(A)){let b=function(P){P&&P.name!=="AbortError"&&P.code!=="ERR_STREAM_PREMATURE_CLOSE"&&f(P)};var m=b;if(I){let{destroy:P,cleanup:M}=SH(A,g,w);d.push(P),sg(A)&&D&&o.push(M)}A.on("error",b),sg(A)&&D&&o.push(()=>{A.removeListener("error",b)})}if(R===0)if(typeof A=="function"){if(h=A({signal:i}),!Fo(h))throw new ig("Iterable, AsyncIterable or Stream","source",h)}else Fo(A)||wT(A)||xl(A)?h=A:h=TH.from(A);else if(typeof A=="function"){if(xl(h)){var p;h=ug((p=h)===null||p===void 0?void 0:p.readable)}else h=ug(h);if(h=A(h,{signal:i}),g){if(!Fo(h,!0))throw new ig("AsyncIterable",`transform[${R-1}]`,h)}else{var S;ag||(ag=ng());let b=new ag({objectMode:!0}),P=(S=h)===null||S===void 0?void 0:S.then;if(typeof P=="function")E++,P.call(h,G=>{u=G,G!=null&&b.write(G),I&&b.end(),cd.nextTick(f)},G=>{b.destroy(G),cd.nextTick(f,G)});else if(Fo(h,!0))E++,bT(h,b,f,{end:I});else if(og(h)||xl(h)){let G=h.readable||h;E++,bT(G,b,f,{end:I})}else throw new ig("AsyncIterable or Promise","destination",h);h=b;let{destroy:M,cleanup:B}=SH(h,!1,!0);d.push(M),D&&o.push(B)}}else if(pH(A)){if(wT(h)){E+=2;let b=sEe(h,A,f,{end:I});sg(A)&&D&&o.push(b)}else if(xl(h)||og(h)){let b=h.readable||h;E++,bT(b,A,f,{end:I})}else if(Fo(h))E++,bT(h,A,f,{end:I});else throw new fg("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],h);h=A}else if(Zfe(A)){if(wT(h))E++,dg(ug(h),A,f,{end:I});else if(og(h)||Fo(h))E++,dg(h,A,f,{end:I});else if(xl(h))E++,dg(h.readable,A,f,{end:I});else throw new fg("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],h);h=A}else h=TH.from(A)}return(i!=null&&i.aborted||s!=null&&s.aborted)&&cd.nextTick(a),h}function sEe(t,e,r,{end:n}){let i=!1;if(e.on("close",()=>{i||r(new zfe)}),t.pipe(e,{end:!1}),n){let o=function(){i=!0,e.end()};var s=o;eEe(t)?cd.nextTick(o):t.once("end",o)}else r();return LT(t,{readable:!0,writable:!1},o=>{let a=t._readableState;o&&o.code==="ERR_STREAM_PREMATURE_CLOSE"&&a&&a.ended&&!a.errored&&!a.errorEmitted?t.once("end",r).once("error",r):r(o)}),LT(e,{readable:!1,writable:!0},r)}AH.exports={pipelineImpl:RH,pipeline:iEe}});var hg=O((yve,OH)=>{"use strict";var{pipeline:oEe}=DT(),PT=ai(),{destroyer:aEe}=vo(),{isNodeStream:xT,isReadable:mH,isWritable:_H,isWebStream:Eg,isTransformStream:Go,isWritableStream:IH,isReadableStream:gH}=si(),{AbortError:lEe,codes:{ERR_INVALID_ARG_VALUE:NH,ERR_MISSING_ARGS:cEe}}=yr(),uEe=Vi();OH.exports=function(...e){if(e.length===0)throw new cEe("streams");if(e.length===1)return PT.from(e[0]);let r=[...e];if(typeof e[0]=="function"&&(e[0]=PT.from(e[0])),typeof e[e.length-1]=="function"){let f=e.length-1;e[f]=PT.from(e[f])}for(let f=0;f<e.length;++f)if(!(!xT(e[f])&&!Eg(e[f]))){if(f<e.length-1&&!(mH(e[f])||gH(e[f])||Go(e[f])))throw new NH(`streams[${f}]`,r[f],"must be readable");if(f>0&&!(_H(e[f])||IH(e[f])||Go(e[f])))throw new NH(`streams[${f}]`,r[f],"must be writable")}let n,i,s,o,a;function l(f){let T=o;o=null,T?T(f):f?a.destroy(f):!E&&!d&&a.destroy()}let c=e[0],u=oEe(e,l),d=!!(_H(c)||IH(c)||Go(c)),E=!!(mH(u)||gH(u)||Go(u));if(a=new PT({writableObjectMode:!!(c!=null&&c.writableObjectMode),readableObjectMode:!!(u!=null&&u.readableObjectMode),writable:d,readable:E}),d){if(xT(c))a._write=function(T,h,p){c.write(T,h)?p():n=p},a._final=function(T){c.end(),i=T},c.on("drain",function(){if(n){let T=n;n=null,T()}});else if(Eg(c)){let h=(Go(c)?c.writable:c).getWriter();a._write=async function(p,S,m){try{await h.ready,h.write(p).catch(()=>{}),m()}catch(R){m(R)}},a._final=async function(p){try{await h.ready,h.close().catch(()=>{}),i=p}catch(S){p(S)}}}let f=Go(u)?u.readable:u;uEe(f,()=>{if(i){let T=i;i=null,T()}})}if(E){if(xT(u))u.on("readable",function(){if(s){let f=s;s=null,f()}}),u.on("end",function(){a.push(null)}),a._read=function(){for(;;){let f=u.read();if(f===null){s=a._read;return}if(!a.push(f))return}};else if(Eg(u)){let T=(Go(u)?u.readable:u).getReader();a._read=async function(){for(;;)try{let{value:h,done:p}=await T.read();if(!a.push(h))return;if(p){a.push(null);return}}catch{return}}}}return a._destroy=function(f,T){!f&&o!==null&&(f=new lEe),s=null,n=null,i=null,o===null?T(f):(o=T,xT(u)&&aEe(u,f))},a}});var vH=O((bve,Sg)=>{"use strict";var dEe=globalThis.AbortController||wt().AbortController,{codes:{ERR_INVALID_ARG_VALUE:fEe,ERR_INVALID_ARG_TYPE:ud,ERR_MISSING_ARGS:EEe,ERR_OUT_OF_RANGE:hEe},AbortError:li}=yr(),{validateAbortSignal:Ho,validateInteger:CH,validateObject:Wo}=gl(),TEe=ct().Symbol("kWeak"),pEe=ct().Symbol("kResistStopPropagation"),{finished:SEe}=Vi(),REe=hg(),{addAbortSignalNoValidate:AEe}=td(),{isWritable:mEe,isNodeStream:_Ee}=si(),{deprecate:IEe}=Gr(),{ArrayPrototypePush:gEe,Boolean:NEe,MathFloor:yH,Number:OEe,NumberIsNaN:CEe,Promise:bH,PromiseReject:wH,PromiseResolve:yEe,PromisePrototypeThen:LH,Symbol:PH}=ct(),MT=PH("kEmpty"),DH=PH("kEof");function bEe(t,e){if(e!=null&&Wo(e,"options"),e?.signal!=null&&Ho(e.signal,"options.signal"),_Ee(t)&&!mEe(t))throw new fEe("stream",t,"must be writable");let r=REe(this,t);return e!=null&&e.signal&&AEe(e.signal,r),r}function vT(t,e){if(typeof t!="function")throw new ud("fn",["Function","AsyncFunction"],t);e!=null&&Wo(e,"options"),e?.signal!=null&&Ho(e.signal,"options.signal");let r=1;e?.concurrency!=null&&(r=yH(e.concurrency));let n=r-1;return e?.highWaterMark!=null&&(n=yH(e.highWaterMark)),CH(r,"options.concurrency",1),CH(n,"options.highWaterMark",0),n+=r,async function*(){let s=Gr().AbortSignalAny([e?.signal].filter(NEe)),o=this,a=[],l={signal:s},c,u,d=!1,E=0;function f(){d=!0,T()}function T(){E-=1,h()}function h(){u&&!d&&E<r&&a.length<n&&(u(),u=null)}async function p(){try{for await(let S of o){if(d)return;if(s.aborted)throw new li;try{if(S=t(S,l),S===MT)continue;S=yEe(S)}catch(m){S=wH(m)}E+=1,LH(S,T,f),a.push(S),c&&(c(),c=null),!d&&(a.length>=n||E>=r)&&await new bH(m=>{u=m})}a.push(DH)}catch(S){let m=wH(S);LH(m,T,f),a.push(m)}finally{d=!0,c&&(c(),c=null)}}p();try{for(;;){for(;a.length>0;){let S=await a[0];if(S===DH)return;if(s.aborted)throw new li;S!==MT&&(yield S),a.shift(),h()}await new bH(S=>{c=S})}}finally{d=!0,u&&(u(),u=null)}}.call(this)}function wEe(t=void 0){return t!=null&&Wo(t,"options"),t?.signal!=null&&Ho(t.signal,"options.signal"),async function*(){let r=0;for await(let i of this){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new li({cause:t.signal.reason});yield[r++,i]}}.call(this)}async function xH(t,e=void 0){for await(let r of pg.call(this,t,e))return!0;return!1}async function LEe(t,e=void 0){if(typeof t!="function")throw new ud("fn",["Function","AsyncFunction"],t);return!await xH.call(this,async(...r)=>!await t(...r),e)}async function DEe(t,e){for await(let r of pg.call(this,t,e))return r}async function PEe(t,e){if(typeof t!="function")throw new ud("fn",["Function","AsyncFunction"],t);async function r(n,i){return await t(n,i),MT}for await(let n of vT.call(this,r,e));}function pg(t,e){if(typeof t!="function")throw new ud("fn",["Function","AsyncFunction"],t);async function r(n,i){return await t(n,i)?n:MT}return vT.call(this,r,e)}var Tg=class extends EEe{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function xEe(t,e,r){var n;if(typeof t!="function")throw new ud("reducer",["Function","AsyncFunction"],t);r!=null&&Wo(r,"options"),r?.signal!=null&&Ho(r.signal,"options.signal");let i=arguments.length>1;if(r!=null&&(n=r.signal)!==null&&n!==void 0&&n.aborted){let c=new li(void 0,{cause:r.signal.reason});throw this.once("error",()=>{}),await SEe(this.destroy(c)),c}let s=new dEe,o=s.signal;if(r!=null&&r.signal){let c={once:!0,[TEe]:this,[pEe]:!0};r.signal.addEventListener("abort",()=>s.abort(),c)}let a=!1;try{for await(let c of this){var l;if(a=!0,r!=null&&(l=r.signal)!==null&&l!==void 0&&l.aborted)throw new li;i?e=await t(e,c,{signal:o}):(e=c,i=!0)}if(!a&&!i)throw new Tg}finally{s.abort()}return e}async function MEe(t){t!=null&&Wo(t,"options"),t?.signal!=null&&Ho(t.signal,"options.signal");let e=[];for await(let n of this){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new li(void 0,{cause:t.signal.reason});gEe(e,n)}return e}function vEe(t,e){let r=vT.call(this,t,e);return async function*(){for await(let i of r)yield*i}.call(this)}function MH(t){if(t=OEe(t),CEe(t))return 0;if(t<0)throw new hEe("number",">= 0",t);return t}function UEe(t,e=void 0){return e!=null&&Wo(e,"options"),e?.signal!=null&&Ho(e.signal,"options.signal"),t=MH(t),async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new li;for await(let s of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new li;t--<=0&&(yield s)}}.call(this)}function BEe(t,e=void 0){return e!=null&&Wo(e,"options"),e?.signal!=null&&Ho(e.signal,"options.signal"),t=MH(t),async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new li;for await(let s of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new li;if(t-- >0&&(yield s),t<=0)return}}.call(this)}Sg.exports.streamReturningOperators={asIndexedPairs:IEe(wEe,"readable.asIndexedPairs will be removed in a future version."),drop:UEe,filter:pg,flatMap:vEe,map:vT,take:BEe,compose:bEe};Sg.exports.promiseReturningOperators={every:LEe,forEach:PEe,reduce:xEe,toArray:MEe,some:xH,find:DEe}});var Rg=O((wve,UH)=>{"use strict";var{ArrayPrototypePop:FEe,Promise:GEe}=ct(),{isIterable:HEe,isNodeStream:WEe,isWebStream:kEe}=si(),{pipelineImpl:$Ee}=DT(),{finished:YEe}=Vi();Ag();function VEe(...t){return new GEe((e,r)=>{let n,i,s=t[t.length-1];if(s&&typeof s=="object"&&!WEe(s)&&!HEe(s)&&!kEe(s)){let o=FEe(t);n=o.signal,i=o.end}$Ee(t,(o,a)=>{o?r(o):e(a)},{signal:n,end:i})})}UH.exports={finished:YEe,pipeline:VEe}});var Ag=O((Lve,VH)=>{"use strict";var{Buffer:qEe}=require("buffer"),{ObjectDefineProperty:ji,ObjectKeys:GH,ReflectApply:HH}=ct(),{promisify:{custom:WH}}=Gr(),{streamReturningOperators:BH,promiseReturningOperators:FH}=vH(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:kH}}=yr(),XEe=hg(),{setDefaultHighWaterMark:jEe,getDefaultHighWaterMark:zEe}=rd(),{pipeline:$H}=DT(),{destroyer:KEe}=vo(),YH=Vi(),mg=Rg(),dd=si(),it=VH.exports=TT().Stream;it.isDestroyed=dd.isDestroyed;it.isDisturbed=dd.isDisturbed;it.isErrored=dd.isErrored;it.isReadable=dd.isReadable;it.isWritable=dd.isWritable;it.Readable=id();for(let t of GH(BH)){let r=function(...n){if(new.target)throw kH();return it.Readable.from(HH(e,this,n))},e=BH[t];ji(r,"name",{__proto__:null,value:e.name}),ji(r,"length",{__proto__:null,value:e.length}),ji(it.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}for(let t of GH(FH)){let r=function(...n){if(new.target)throw kH();return HH(e,this,n)},e=FH[t];ji(r,"name",{__proto__:null,value:e.name}),ji(r,"length",{__proto__:null,value:e.length}),ji(it.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}it.Writable=yT();it.Duplex=ai();it.Transform=tg();it.PassThrough=ng();it.pipeline=$H;var{addAbortSignal:JEe}=td();it.addAbortSignal=JEe;it.finished=YH;it.destroy=KEe;it.compose=XEe;it.setDefaultHighWaterMark=jEe;it.getDefaultHighWaterMark=zEe;ji(it,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return mg}});ji($H,WH,{__proto__:null,enumerable:!0,get(){return mg.pipeline}});ji(YH,WH,{__proto__:null,enumerable:!0,get(){return mg.finished}});it.Stream=it;it._isUint8Array=function(e){return e instanceof Uint8Array};it._uint8ArrayToBuffer=function(e){return qEe.from(e.buffer,e.byteOffset,e.byteLength)}});var _g=O((Dve,Ce)=>{"use strict";var Wt=require("stream");if(Wt&&process.env.READABLE_STREAM==="disable"){let t=Wt.promises;Ce.exports._uint8ArrayToBuffer=Wt._uint8ArrayToBuffer,Ce.exports._isUint8Array=Wt._isUint8Array,Ce.exports.isDisturbed=Wt.isDisturbed,Ce.exports.isErrored=Wt.isErrored,Ce.exports.isReadable=Wt.isReadable,Ce.exports.Readable=Wt.Readable,Ce.exports.Writable=Wt.Writable,Ce.exports.Duplex=Wt.Duplex,Ce.exports.Transform=Wt.Transform,Ce.exports.PassThrough=Wt.PassThrough,Ce.exports.addAbortSignal=Wt.addAbortSignal,Ce.exports.finished=Wt.finished,Ce.exports.destroy=Wt.destroy,Ce.exports.pipeline=Wt.pipeline,Ce.exports.compose=Wt.compose,Object.defineProperty(Wt,"promises",{configurable:!0,enumerable:!0,get(){return t}}),Ce.exports.Stream=Wt.Stream}else{let t=Ag(),e=Rg(),r=t.Readable.destroy;Ce.exports=t.Readable,Ce.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,Ce.exports._isUint8Array=t._isUint8Array,Ce.exports.isDisturbed=t.isDisturbed,Ce.exports.isErrored=t.isErrored,Ce.exports.isReadable=t.isReadable,Ce.exports.Readable=t.Readable,Ce.exports.Writable=t.Writable,Ce.exports.Duplex=t.Duplex,Ce.exports.Transform=t.Transform,Ce.exports.PassThrough=t.PassThrough,Ce.exports.addAbortSignal=t.addAbortSignal,Ce.exports.finished=t.finished,Ce.exports.destroy=t.destroy,Ce.exports.destroy=r,Ce.exports.pipeline=t.pipeline,Ce.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return e}}),Ce.exports.Stream=t.Stream}Ce.exports.default=Ce.exports});var KH=O((Pve,zH)=>{var Ng=require("fs"),XH=Xw(),qH=zw(),Ig=require("path"),ci=_l(),QEe=require("util").inherits,gt=n1(),jH=_g().Transform,gg=process.platform==="win32",Ye=function(t,e){if(!(this instanceof Ye))return new Ye(t,e);typeof t!="string"&&(e=t,t="zip"),e=this.options=ci.defaults(e,{highWaterMark:1024*1024,statConcurrency:4}),jH.call(this,e),this._format=!1,this._module=!1,this._pending=0,this._pointer=0,this._entriesCount=0,this._entriesProcessedCount=0,this._fsEntriesTotalBytes=0,this._fsEntriesProcessedBytes=0,this._queue=qH.queue(this._onQueueTask.bind(this),1),this._queue.drain(this._onQueueDrain.bind(this)),this._statQueue=qH.queue(this._onStatQueueTask.bind(this),e.statConcurrency),this._statQueue.drain(this._onQueueDrain.bind(this)),this._state={aborted:!1,finalize:!1,finalizing:!1,finalized:!1,modulePiped:!1},this._streams=[]};QEe(Ye,jH);Ye.prototype._abort=function(){this._state.aborted=!0,this._queue.kill(),this._statQueue.kill(),this._queue.idle()&&this._shutdown()};Ye.prototype._append=function(t,e){e=e||{};var r={source:null,filepath:t};e.name||(e.name=t),e.sourcePath=t,r.data=e,this._entriesCount++,e.stats&&e.stats instanceof Ng.Stats?(r=this._updateQueueTaskWithStats(r,e.stats),r&&(e.stats.size&&(this._fsEntriesTotalBytes+=e.stats.size),this._queue.push(r))):this._statQueue.push(r)};Ye.prototype._finalize=function(){this._state.finalizing||this._state.finalized||this._state.aborted||(this._state.finalizing=!0,this._moduleFinalize(),this._state.finalizing=!1,this._state.finalized=!0)};Ye.prototype._maybeFinalize=function(){return this._state.finalizing||this._state.finalized||this._state.aborted?!1:this._state.finalize&&this._pending===0&&this._queue.idle()&&this._statQueue.idle()?(this._finalize(),!0):!1};Ye.prototype._moduleAppend=function(t,e,r){if(this._state.aborted){r();return}this._module.append(t,e,function(n){if(this._task=null,this._state.aborted){this._shutdown();return}if(n){this.emit("error",n),setImmediate(r);return}this.emit("entry",e),this._entriesProcessedCount++,e.stats&&e.stats.size&&(this._fsEntriesProcessedBytes+=e.stats.size),this.emit("progress",{entries:{total:this._entriesCount,processed:this._entriesProcessedCount},fs:{totalBytes:this._fsEntriesTotalBytes,processedBytes:this._fsEntriesProcessedBytes}}),setImmediate(r)}.bind(this))};Ye.prototype._moduleFinalize=function(){typeof this._module.finalize=="function"?this._module.finalize():typeof this._module.end=="function"?this._module.end():this.emit("error",new gt("NOENDMETHOD"))};Ye.prototype._modulePipe=function(){this._module.on("error",this._onModuleError.bind(this)),this._module.pipe(this),this._state.modulePiped=!0};Ye.prototype._moduleSupports=function(t){return!this._module.supports||!this._module.supports[t]?!1:this._module.supports[t]};Ye.prototype._moduleUnpipe=function(){this._module.unpipe(this),this._state.modulePiped=!1};Ye.prototype._normalizeEntryData=function(t,e){t=ci.defaults(t,{type:"file",name:null,date:null,mode:null,prefix:null,sourcePath:null,stats:!1}),e&&t.stats===!1&&(t.stats=e);var r=t.type==="directory";return t.name&&(typeof t.prefix=="string"&&t.prefix!==""&&(t.name=t.prefix+"/"+t.name,t.prefix=null),t.name=ci.sanitizePath(t.name),t.type!=="symlink"&&t.name.slice(-1)==="/"?(r=!0,t.type="directory"):r&&(t.name+="/")),typeof t.mode=="number"?gg?t.mode&=511:t.mode&=4095:t.stats&&t.mode===null?(gg?t.mode=t.stats.mode&511:t.mode=t.stats.mode&4095,gg&&r&&(t.mode=493)):t.mode===null&&(t.mode=r?493:420),t.stats&&t.date===null?t.date=t.stats.mtime:t.date=ci.dateify(t.date),t};Ye.prototype._onModuleError=function(t){this.emit("error",t)};Ye.prototype._onQueueDrain=function(){this._state.finalizing||this._state.finalized||this._state.aborted||this._state.finalize&&this._pending===0&&this._queue.idle()&&this._statQueue.idle()&&this._finalize()};Ye.prototype._onQueueTask=function(t,e){var r=()=>{t.data.callback&&t.data.callback(),e()};if(this._state.finalizing||this._state.finalized||this._state.aborted){r();return}this._task=t,this._moduleAppend(t.source,t.data,r)};Ye.prototype._onStatQueueTask=function(t,e){if(this._state.finalizing||this._state.finalized||this._state.aborted){e();return}Ng.lstat(t.filepath,function(r,n){if(this._state.aborted){setImmediate(e);return}if(r){this._entriesCount--,this.emit("warning",r),setImmediate(e);return}t=this._updateQueueTaskWithStats(t,n),t&&(n.size&&(this._fsEntriesTotalBytes+=n.size),this._queue.push(t)),setImmediate(e)}.bind(this))};Ye.prototype._shutdown=function(){this._moduleUnpipe(),this.end()};Ye.prototype._transform=function(t,e,r){t&&(this._pointer+=t.length),r(null,t)};Ye.prototype._updateQueueTaskWithStats=function(t,e){if(e.isFile())t.data.type="file",t.data.sourceType="stream",t.source=ci.lazyReadStream(t.filepath);else if(e.isDirectory()&&this._moduleSupports("directory"))t.data.name=ci.trailingSlashIt(t.data.name),t.data.type="directory",t.data.sourcePath=ci.trailingSlashIt(t.filepath),t.data.sourceType="buffer",t.source=Buffer.concat([]);else if(e.isSymbolicLink()&&this._moduleSupports("symlink")){var r=Ng.readlinkSync(t.filepath),n=Ig.dirname(t.filepath);t.data.type="symlink",t.data.linkname=Ig.relative(n,Ig.resolve(n,r)),t.data.sourceType="buffer",t.source=Buffer.concat([])}else return e.isDirectory()?this.emit("warning",new gt("DIRECTORYNOTSUPPORTED",t.data)):e.isSymbolicLink()?this.emit("warning",new gt("SYMLINKNOTSUPPORTED",t.data)):this.emit("warning",new gt("ENTRYNOTSUPPORTED",t.data)),null;return t.data=this._normalizeEntryData(t.data,e),t};Ye.prototype.abort=function(){return this._state.aborted||this._state.finalized?this:(this._abort(),this)};Ye.prototype.append=function(t,e){if(this._state.finalize||this._state.aborted)return this.emit("error",new gt("QUEUECLOSED")),this;if(e=this._normalizeEntryData(e),typeof e.name!="string"||e.name.length===0)return this.emit("error",new gt("ENTRYNAMEREQUIRED")),this;if(e.type==="directory"&&!this._moduleSupports("directory"))return this.emit("error",new gt("DIRECTORYNOTSUPPORTED",{name:e.name})),this;if(t=ci.normalizeInputSource(t),Buffer.isBuffer(t))e.sourceType="buffer";else if(ci.isStream(t))e.sourceType="stream";else return this.emit("error",new gt("INPUTSTEAMBUFFERREQUIRED",{name:e.name})),this;return this._entriesCount++,this._queue.push({data:e,source:t}),this};Ye.prototype.directory=function(t,e,r){if(this._state.finalize||this._state.aborted)return this.emit("error",new gt("QUEUECLOSED")),this;if(typeof t!="string"||t.length===0)return this.emit("error",new gt("DIRECTORYDIRPATHREQUIRED")),this;this._pending++,e===!1?e="":typeof e!="string"&&(e=t);var n=!1;typeof r=="function"?(n=r,r={}):typeof r!="object"&&(r={});var i={stat:!0,dot:!0};function s(){this._pending--,this._maybeFinalize()}function o(c){this.emit("error",c)}function a(c){l.pause();var u=!1,d=Object.assign({},r);d.name=c.relative,d.prefix=e,d.stats=c.stat,d.callback=l.resume.bind(l);try{if(n){if(d=n(d),d===!1)u=!0;else if(typeof d!="object")throw new gt("DIRECTORYFUNCTIONINVALIDDATA",{dirpath:t})}}catch(E){this.emit("error",E);return}if(u){l.resume();return}this._append(c.absolute,d)}var l=XH(t,i);return l.on("error",o.bind(this)),l.on("match",a.bind(this)),l.on("end",s.bind(this)),this};Ye.prototype.file=function(t,e){return this._state.finalize||this._state.aborted?(this.emit("error",new gt("QUEUECLOSED")),this):typeof t!="string"||t.length===0?(this.emit("error",new gt("FILEFILEPATHREQUIRED")),this):(this._append(t,e),this)};Ye.prototype.glob=function(t,e,r){this._pending++,e=ci.defaults(e,{stat:!0,pattern:t});function n(){this._pending--,this._maybeFinalize()}function i(a){this.emit("error",a)}function s(a){o.pause();var l=Object.assign({},r);l.callback=o.resume.bind(o),l.stats=a.stat,l.name=a.relative,this._append(a.absolute,l)}var o=XH(e.cwd||".",e);return o.on("error",i.bind(this)),o.on("match",s.bind(this)),o.on("end",n.bind(this)),this};Ye.prototype.finalize=function(){if(this._state.aborted){var t=new gt("ABORTED");return this.emit("error",t),Promise.reject(t)}if(this._state.finalize){var e=new gt("FINALIZING");return this.emit("error",e),Promise.reject(e)}this._state.finalize=!0,this._pending===0&&this._queue.idle()&&this._statQueue.idle()&&this._finalize();var r=this;return new Promise(function(n,i){var s;r._module.on("end",function(){s||n()}),r._module.on("error",function(o){s=!0,i(o)})})};Ye.prototype.setFormat=function(t){return this._format?(this.emit("error",new gt("FORMATSET")),this):(this._format=t,this)};Ye.prototype.setModule=function(t){return this._state.aborted?(this.emit("error",new gt("ABORTED")),this):this._state.module?(this.emit("error",new gt("MODULESET")),this):(this._module=t,this._modulePipe(),this)};Ye.prototype.symlink=function(t,e,r){if(this._state.finalize||this._state.aborted)return this.emit("error",new gt("QUEUECLOSED")),this;if(typeof t!="string"||t.length===0)return this.emit("error",new gt("SYMLINKFILEPATHREQUIRED")),this;if(typeof e!="string"||e.length===0)return this.emit("error",new gt("SYMLINKTARGETREQUIRED",{filepath:t})),this;if(!this._moduleSupports("symlink"))return this.emit("error",new gt("SYMLINKNOTSUPPORTED",{filepath:t})),this;var n={};return n.type="symlink",n.name=t.replace(/\\/g,"/"),n.linkname=e.replace(/\\/g,"/"),n.sourceType="buffer",typeof r=="number"&&(n.mode=r),this._entriesCount++,this._queue.push({data:n,source:Buffer.concat([])}),this};Ye.prototype.pointer=function(){return this._pointer};Ye.prototype.use=function(t){return this._streams.push(t),this};zH.exports=Ye});var BT=O((xve,JH)=>{var UT=JH.exports=function(){};UT.prototype.getName=function(){};UT.prototype.getSize=function(){};UT.prototype.getLastModifiedDate=function(){};UT.prototype.isDirectory=function(){}});var FT=O((Mve,QH)=>{var Rn=QH.exports={};Rn.dateToDos=function(t,e){e=e||!1;var r=e?t.getFullYear():t.getUTCFullYear();if(r<1980)return 2162688;if(r>=2044)return 2141175677;var n={year:r,month:e?t.getMonth():t.getUTCMonth(),date:e?t.getDate():t.getUTCDate(),hours:e?t.getHours():t.getUTCHours(),minutes:e?t.getMinutes():t.getUTCMinutes(),seconds:e?t.getSeconds():t.getUTCSeconds()};return n.year-1980<<25|n.month+1<<21|n.date<<16|n.hours<<11|n.minutes<<5|n.seconds/2};Rn.dosToDate=function(t){return new Date((t>>25&127)+1980,(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(t&31)<<1)};Rn.fromDosTime=function(t){return Rn.dosToDate(t.readUInt32LE(0))};Rn.getEightBytes=function(t){var e=Buffer.alloc(8);return e.writeUInt32LE(t%4294967296,0),e.writeUInt32LE(t/4294967296|0,4),e};Rn.getShortBytes=function(t){var e=Buffer.alloc(2);return e.writeUInt16LE((t&65535)>>>0,0),e};Rn.getShortBytesValue=function(t,e){return t.readUInt16LE(e)};Rn.getLongBytes=function(t){var e=Buffer.alloc(4);return e.writeUInt32LE((t&4294967295)>>>0,0),e};Rn.getLongBytesValue=function(t,e){return t.readUInt32LE(e)};Rn.toDosTime=function(t){return Rn.getLongBytes(Rn.dateToDos(t))}});var Og=O((vve,iW)=>{var ZH=FT(),eW=8,tW=1,ZEe=4,ehe=2,rW=64,nW=2048,pr=iW.exports=function(){return this instanceof pr?(this.descriptor=!1,this.encryption=!1,this.utf8=!1,this.numberOfShannonFanoTrees=0,this.strongEncryption=!1,this.slidingDictionarySize=0,this):new pr};pr.prototype.encode=function(){return ZH.getShortBytes((this.descriptor?eW:0)|(this.utf8?nW:0)|(this.encryption?tW:0)|(this.strongEncryption?rW:0))};pr.prototype.parse=function(t,e){var r=ZH.getShortBytesValue(t,e),n=new pr;return n.useDataDescriptor((r&eW)!==0),n.useUTF8ForNames((r&nW)!==0),n.useStrongEncryption((r&rW)!==0),n.useEncryption((r&tW)!==0),n.setSlidingDictionarySize((r&ehe)!==0?8192:4096),n.setNumberOfShannonFanoTrees((r&ZEe)!==0?3:2),n};pr.prototype.setNumberOfShannonFanoTrees=function(t){this.numberOfShannonFanoTrees=t};pr.prototype.getNumberOfShannonFanoTrees=function(){return this.numberOfShannonFanoTrees};pr.prototype.setSlidingDictionarySize=function(t){this.slidingDictionarySize=t};pr.prototype.getSlidingDictionarySize=function(){return this.slidingDictionarySize};pr.prototype.useDataDescriptor=function(t){this.descriptor=t};pr.prototype.usesDataDescriptor=function(){return this.descriptor};pr.prototype.useEncryption=function(t){this.encryption=t};pr.prototype.usesEncryption=function(){return this.encryption};pr.prototype.useStrongEncryption=function(t){this.strongEncryption=t};pr.prototype.usesStrongEncryption=function(){return this.strongEncryption};pr.prototype.useUTF8ForNames=function(t){this.utf8=t};pr.prototype.usesUTF8ForNames=function(){return this.utf8}});var oW=O((Uve,sW)=>{sW.exports={PERM_MASK:4095,FILE_TYPE_FLAG:61440,LINK_FLAG:40960,FILE_FLAG:32768,DIR_FLAG:16384,DEFAULT_LINK_PERM:511,DEFAULT_DIR_PERM:493,DEFAULT_FILE_PERM:420}});var Cg=O((Bve,aW)=>{aW.exports={WORD:4,DWORD:8,EMPTY:Buffer.alloc(0),SHORT:2,SHORT_MASK:65535,SHORT_SHIFT:16,SHORT_ZERO:Buffer.from(Array(2)),LONG:4,LONG_ZERO:Buffer.from(Array(4)),MIN_VERSION_INITIAL:10,MIN_VERSION_DATA_DESCRIPTOR:20,MIN_VERSION_ZIP64:45,VERSION_MADEBY:45,METHOD_STORED:0,METHOD_DEFLATED:8,PLATFORM_UNIX:3,PLATFORM_FAT:0,SIG_LFH:67324752,SIG_DD:134695760,SIG_CFH:33639248,SIG_EOCD:101010256,SIG_ZIP64_EOCD:101075792,SIG_ZIP64_EOCD_LOC:117853008,ZIP64_MAGIC_SHORT:65535,ZIP64_MAGIC:4294967295,ZIP64_EXTRA_ID:1,ZLIB_NO_COMPRESSION:0,ZLIB_BEST_SPEED:1,ZLIB_BEST_COMPRESSION:9,ZLIB_DEFAULT_COMPRESSION:-1,MODE_MASK:4095,DEFAULT_FILE_MODE:33188,DEFAULT_DIR_MODE:16877,EXT_FILE_ATTR_DIR:1106051088,EXT_FILE_ATTR_FILE:2175008800,S_IFMT:61440,S_IFIFO:4096,S_IFCHR:8192,S_IFDIR:16384,S_IFBLK:24576,S_IFREG:32768,S_IFLNK:40960,S_IFSOCK:49152,S_DOS_A:32,S_DOS_D:16,S_DOS_V:8,S_DOS_S:4,S_DOS_H:2,S_DOS_R:1}});var yg=O((Fve,fW)=>{var the=require("util").inherits,rhe=qA(),cW=BT(),uW=Og(),lW=oW(),Hr=Cg(),dW=FT(),Ie=fW.exports=function(t){if(!(this instanceof Ie))return new Ie(t);cW.call(this),this.platform=Hr.PLATFORM_FAT,this.method=-1,this.name=null,this.size=0,this.csize=0,this.gpb=new uW,this.crc=0,this.time=-1,this.minver=Hr.MIN_VERSION_INITIAL,this.mode=-1,this.extra=null,this.exattr=0,this.inattr=0,this.comment=null,t&&this.setName(t)};the(Ie,cW);Ie.prototype.getCentralDirectoryExtra=function(){return this.getExtra()};Ie.prototype.getComment=function(){return this.comment!==null?this.comment:""};Ie.prototype.getCompressedSize=function(){return this.csize};Ie.prototype.getCrc=function(){return this.crc};Ie.prototype.getExternalAttributes=function(){return this.exattr};Ie.prototype.getExtra=function(){return this.extra!==null?this.extra:Hr.EMPTY};Ie.prototype.getGeneralPurposeBit=function(){return this.gpb};Ie.prototype.getInternalAttributes=function(){return this.inattr};Ie.prototype.getLastModifiedDate=function(){return this.getTime()};Ie.prototype.getLocalFileDataExtra=function(){return this.getExtra()};Ie.prototype.getMethod=function(){return this.method};Ie.prototype.getName=function(){return this.name};Ie.prototype.getPlatform=function(){return this.platform};Ie.prototype.getSize=function(){return this.size};Ie.prototype.getTime=function(){return this.time!==-1?dW.dosToDate(this.time):-1};Ie.prototype.getTimeDos=function(){return this.time!==-1?this.time:0};Ie.prototype.getUnixMode=function(){return this.platform!==Hr.PLATFORM_UNIX?0:this.getExternalAttributes()>>Hr.SHORT_SHIFT&Hr.SHORT_MASK};Ie.prototype.getVersionNeededToExtract=function(){return this.minver};Ie.prototype.setComment=function(t){Buffer.byteLength(t)!==t.length&&this.getGeneralPurposeBit().useUTF8ForNames(!0),this.comment=t};Ie.prototype.setCompressedSize=function(t){if(t<0)throw new Error("invalid entry compressed size");this.csize=t};Ie.prototype.setCrc=function(t){if(t<0)throw new Error("invalid entry crc32");this.crc=t};Ie.prototype.setExternalAttributes=function(t){this.exattr=t>>>0};Ie.prototype.setExtra=function(t){this.extra=t};Ie.prototype.setGeneralPurposeBit=function(t){if(!(t instanceof uW))throw new Error("invalid entry GeneralPurposeBit");this.gpb=t};Ie.prototype.setInternalAttributes=function(t){this.inattr=t};Ie.prototype.setMethod=function(t){if(t<0)throw new Error("invalid entry compression method");this.method=t};Ie.prototype.setName=function(t,e=!1){t=rhe(t,!1).replace(/^\w+:/,"").replace(/^(\.\.\/|\/)+/,""),e&&(t=`/${t}`),Buffer.byteLength(t)!==t.length&&this.getGeneralPurposeBit().useUTF8ForNames(!0),this.name=t};Ie.prototype.setPlatform=function(t){this.platform=t};Ie.prototype.setSize=function(t){if(t<0)throw new Error("invalid entry size");this.size=t};Ie.prototype.setTime=function(t,e){if(!(t instanceof Date))throw new Error("invalid entry time");this.time=dW.dateToDos(t,e)};Ie.prototype.setUnixMode=function(t){t|=this.isDirectory()?Hr.S_IFDIR:Hr.S_IFREG;var e=0;e|=t<<Hr.SHORT_SHIFT|(this.isDirectory()?Hr.S_DOS_D:Hr.S_DOS_A),this.setExternalAttributes(e),this.mode=t&Hr.MODE_MASK,this.platform=Hr.PLATFORM_UNIX};Ie.prototype.setVersionNeededToExtract=function(t){this.minver=t};Ie.prototype.isDirectory=function(){return this.getName().slice(-1)==="/"};Ie.prototype.isUnixSymlink=function(){return(this.getUnixMode()&lW.FILE_TYPE_FLAG)===lW.LINK_FLAG};Ie.prototype.isZip64=function(){return this.csize>Hr.ZIP64_MAGIC||this.size>Hr.ZIP64_MAGIC}});var ut=O((Gve,EW)=>{"use strict";var bg=class extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError(`Expected input to be an Array, got ${typeof e}`);let r="";for(let n=0;n<e.length;n++)r+=`    ${e[n].stack}
`;super(r),this.name="AggregateError",this.errors=e}};EW.exports={AggregateError:bg,ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,e){return t.includes(e)},ArrayPrototypeIndexOf(t,e){return t.indexOf(e)},ArrayPrototypeJoin(t,e){return t.join(e)},ArrayPrototypeMap(t,e){return t.map(e)},ArrayPrototypePop(t,e){return t.pop(e)},ArrayPrototypePush(t,e){return t.push(e)},ArrayPrototypeSlice(t,e,r){return t.slice(e,r)},Error,FunctionPrototypeCall(t,e,...r){return t.call(e,...r)},FunctionPrototypeSymbolHasInstance(t,e){return Function.prototype[Symbol.hasInstance].call(t,e)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,e){return Object.defineProperties(t,e)},ObjectDefineProperty(t,e,r){return Object.defineProperty(t,e,r)},ObjectGetOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,e){return Object.setPrototypeOf(t,e)},Promise,PromisePrototypeCatch(t,e){return t.catch(e)},PromisePrototypeThen(t,e,r){return t.then(e,r)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,e){return t.test(e)},SafeSet:Set,String,StringPrototypeSlice(t,e,r){return t.slice(e,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,e,r){return t.set(e,r)},Boolean,Uint8Array}});var wg=O((Hve,hW)=>{"use strict";hW.exports={format(t,...e){return t.replace(/%([sdifj])/g,function(...[r,n]){let i=e.shift();return n==="f"?i.toFixed(6):n==="j"?JSON.stringify(i):n==="s"&&typeof i=="object"?`${i.constructor!==Object?i.constructor.name:""} {}`.trim():i.toString()})},inspect(t){switch(typeof t){case"string":if(t.includes("'"))if(t.includes('"')){if(!t.includes("`")&&!t.includes("${"))return`\`${t}\``}else return`"${t}"`;return`'${t}'`;case"number":return isNaN(t)?"NaN":Object.is(t,-0)?String(t):t;case"bigint":return`${String(t)}n`;case"boolean":case"undefined":return String(t);case"object":return"{}"}}}});var wr=O((Wve,SW)=>{"use strict";var{format:nhe,inspect:GT}=wg(),{AggregateError:ihe}=ut(),she=globalThis.AggregateError||ihe,ohe=Symbol("kIsNodeError"),ahe=["string","function","number","object","Function","Object","boolean","bigint","symbol"],lhe=/^([A-Z][a-z0-9]*)+$/,che="__node_internal_",HT={};function ko(t,e){if(!t)throw new HT.ERR_INTERNAL_ASSERTION(e)}function TW(t){let e="",r=t.length,n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function uhe(t,e,r){if(typeof e=="function")return ko(e.length<=r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${e.length}).`),e(...r);let n=(e.match(/%[dfijoOs]/g)||[]).length;return ko(n===r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${n}).`),r.length===0?e:nhe(e,...r)}function Sr(t,e,r){r||(r=Error);class n extends r{constructor(...s){super(uhe(t,e,s))}toString(){return`${this.name} [${t}]: ${this.message}`}}Object.defineProperties(n.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${t}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),n.prototype.code=t,n.prototype[ohe]=!0,HT[t]=n}function pW(t){let e=che+t.name;return Object.defineProperty(t,"name",{value:e}),t}function dhe(t,e){if(t&&e&&t!==e){if(Array.isArray(e.errors))return e.errors.push(t),e;let r=new she([e,t],e.message);return r.code=e.code,r}return t||e}var Lg=class extends Error{constructor(e="The operation was aborted",r=void 0){if(r!==void 0&&typeof r!="object")throw new HT.ERR_INVALID_ARG_TYPE("options","Object",r);super(e,r),this.code="ABORT_ERR",this.name="AbortError"}};Sr("ERR_ASSERTION","%s",Error);Sr("ERR_INVALID_ARG_TYPE",(t,e,r)=>{ko(typeof t=="string","'name' must be a string"),Array.isArray(e)||(e=[e]);let n="The ";t.endsWith(" argument")?n+=`${t} `:n+=`"${t}" ${t.includes(".")?"property":"argument"} `,n+="must be ";let i=[],s=[],o=[];for(let l of e)ko(typeof l=="string","All expected entries have to be of type string"),ahe.includes(l)?i.push(l.toLowerCase()):lhe.test(l)?s.push(l):(ko(l!=="object",'The value "object" should be written as "Object"'),o.push(l));if(s.length>0){let l=i.indexOf("object");l!==-1&&(i.splice(i,l,1),s.push("Object"))}if(i.length>0){switch(i.length){case 1:n+=`of type ${i[0]}`;break;case 2:n+=`one of type ${i[0]} or ${i[1]}`;break;default:{let l=i.pop();n+=`one of type ${i.join(", ")}, or ${l}`}}(s.length>0||o.length>0)&&(n+=" or ")}if(s.length>0){switch(s.length){case 1:n+=`an instance of ${s[0]}`;break;case 2:n+=`an instance of ${s[0]} or ${s[1]}`;break;default:{let l=s.pop();n+=`an instance of ${s.join(", ")}, or ${l}`}}o.length>0&&(n+=" or ")}switch(o.length){case 0:break;case 1:o[0].toLowerCase()!==o[0]&&(n+="an "),n+=`${o[0]}`;break;case 2:n+=`one of ${o[0]} or ${o[1]}`;break;default:{let l=o.pop();n+=`one of ${o.join(", ")}, or ${l}`}}if(r==null)n+=`. Received ${r}`;else if(typeof r=="function"&&r.name)n+=`. Received function ${r.name}`;else if(typeof r=="object"){var a;if((a=r.constructor)!==null&&a!==void 0&&a.name)n+=`. Received an instance of ${r.constructor.name}`;else{let l=GT(r,{depth:-1});n+=`. Received ${l}`}}else{let l=GT(r,{colors:!1});l.length>25&&(l=`${l.slice(0,25)}...`),n+=`. Received type ${typeof r} (${l})`}return n},TypeError);Sr("ERR_INVALID_ARG_VALUE",(t,e,r="is invalid")=>{let n=GT(e);return n.length>128&&(n=n.slice(0,128)+"..."),`The ${t.includes(".")?"property":"argument"} '${t}' ${r}. Received ${n}`},TypeError);Sr("ERR_INVALID_RETURN_VALUE",(t,e,r)=>{var n;let i=r!=null&&(n=r.constructor)!==null&&n!==void 0&&n.name?`instance of ${r.constructor.name}`:`type ${typeof r}`;return`Expected ${t} to be returned from the "${e}" function but got ${i}.`},TypeError);Sr("ERR_MISSING_ARGS",(...t)=>{ko(t.length>0,"At least one arg needs to be specified");let e,r=t.length;switch(t=(Array.isArray(t)?t:[t]).map(n=>`"${n}"`).join(" or "),r){case 1:e+=`The ${t[0]} argument`;break;case 2:e+=`The ${t[0]} and ${t[1]} arguments`;break;default:{let n=t.pop();e+=`The ${t.join(", ")}, and ${n} arguments`}break}return`${e} must be specified`},TypeError);Sr("ERR_OUT_OF_RANGE",(t,e,r)=>{ko(e,'Missing "range" argument');let n;if(Number.isInteger(r)&&Math.abs(r)>2**32)n=TW(String(r));else if(typeof r=="bigint"){n=String(r);let i=BigInt(2)**BigInt(32);(r>i||r<-i)&&(n=TW(n)),n+="n"}else n=GT(r);return`The value of "${t}" is out of range. It must be ${e}. Received ${n}`},RangeError);Sr("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);Sr("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);Sr("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);Sr("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);Sr("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);Sr("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Sr("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);Sr("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);Sr("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);Sr("ERR_STREAM_WRITE_AFTER_END","write after end",Error);Sr("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);SW.exports={AbortError:Lg,aggregateTwoErrors:pW(dhe),hideStackFrames:pW,codes:HT}});var Wr=O((kve,Pg)=>{"use strict";var fhe=require("buffer"),{format:Ehe,inspect:hhe}=wg(),{codes:{ERR_INVALID_ARG_TYPE:Dg}}=wr(),{kResistStopPropagation:The,AggregateError:phe,SymbolDispose:She}=ut(),Rhe=globalThis.AbortSignal||wt().AbortSignal,Ahe=globalThis.AbortController||wt().AbortController,mhe=Object.getPrototypeOf(async function(){}).constructor,RW=globalThis.Blob||fhe.Blob,_he=typeof RW<"u"?function(e){return e instanceof RW}:function(e){return!1},AW=(t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new Dg(e,"AbortSignal",t)},Ihe=(t,e)=>{if(typeof t!="function")throw new Dg(e,"Function",t)};Pg.exports={AggregateError:phe,kEmptyObject:Object.freeze({}),once(t){let e=!1;return function(...r){e||(e=!0,t.apply(this,r))}},createDeferredPromise:function(){let t,e;return{promise:new Promise((n,i)=>{t=n,e=i}),resolve:t,reject:e}},promisify(t){return new Promise((e,r)=>{t((n,...i)=>n?r(n):e(...i))})},debuglog(){return function(){}},format:Ehe,inspect:hhe,types:{isAsyncFunction(t){return t instanceof mhe},isArrayBufferView(t){return ArrayBuffer.isView(t)}},isBlob:_he,deprecate(t,e){return t},addAbortListener:require("events").addAbortListener||function(e,r){if(e===void 0)throw new Dg("signal","AbortSignal",e);AW(e,"signal"),Ihe(r,"listener");let n;return e.aborted?queueMicrotask(()=>r()):(e.addEventListener("abort",r,{__proto__:null,once:!0,[The]:!0}),n=()=>{e.removeEventListener("abort",r)}),{__proto__:null,[She](){var i;(i=n)===null||i===void 0||i()}}},AbortSignalAny:Rhe.any||function(e){if(e.length===1)return e[0];let r=new Ahe,n=()=>r.abort();return e.forEach(i=>{AW(i,"signals"),i.addEventListener("abort",n,{once:!0})}),r.signal.addEventListener("abort",()=>{e.forEach(i=>i.removeEventListener("abort",n))},{once:!0}),r.signal}};Pg.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")});var vl=O(($ve,wW)=>{"use strict";var{ArrayIsArray:Mg,ArrayPrototypeIncludes:gW,ArrayPrototypeJoin:NW,ArrayPrototypeMap:ghe,NumberIsInteger:vg,NumberIsNaN:Nhe,NumberMAX_SAFE_INTEGER:Ohe,NumberMIN_SAFE_INTEGER:Che,NumberParseInt:yhe,ObjectPrototypeHasOwnProperty:bhe,RegExpPrototypeExec:OW,String:whe,StringPrototypeToUpperCase:Lhe,StringPrototypeTrim:Dhe}=ut(),{hideStackFrames:An,codes:{ERR_SOCKET_BAD_PORT:Phe,ERR_INVALID_ARG_TYPE:Lr,ERR_INVALID_ARG_VALUE:Ml,ERR_OUT_OF_RANGE:$o,ERR_UNKNOWN_SIGNAL:mW}}=wr(),{normalizeEncoding:xhe}=Wr(),{isAsyncFunction:Mhe,isArrayBufferView:vhe}=Wr().types,_W={};function Uhe(t){return t===(t|0)}function Bhe(t){return t===t>>>0}var Fhe=/^[0-7]+$/,Ghe="must be a 32-bit unsigned integer or an octal string";function Hhe(t,e,r){if(typeof t>"u"&&(t=r),typeof t=="string"){if(OW(Fhe,t)===null)throw new Ml(e,t,Ghe);t=yhe(t,8)}return CW(t,e),t}var Whe=An((t,e,r=Che,n=Ohe)=>{if(typeof t!="number")throw new Lr(e,"number",t);if(!vg(t))throw new $o(e,"an integer",t);if(t<r||t>n)throw new $o(e,`>= ${r} && <= ${n}`,t)}),khe=An((t,e,r=-2147483648,n=2147483647)=>{if(typeof t!="number")throw new Lr(e,"number",t);if(!vg(t))throw new $o(e,"an integer",t);if(t<r||t>n)throw new $o(e,`>= ${r} && <= ${n}`,t)}),CW=An((t,e,r=!1)=>{if(typeof t!="number")throw new Lr(e,"number",t);if(!vg(t))throw new $o(e,"an integer",t);let n=r?1:0,i=4294967295;if(t<n||t>i)throw new $o(e,`>= ${n} && <= ${i}`,t)});function Ug(t,e){if(typeof t!="string")throw new Lr(e,"string",t)}function $he(t,e,r=void 0,n){if(typeof t!="number")throw new Lr(e,"number",t);if(r!=null&&t<r||n!=null&&t>n||(r!=null||n!=null)&&Nhe(t))throw new $o(e,`${r!=null?`>= ${r}`:""}${r!=null&&n!=null?" && ":""}${n!=null?`<= ${n}`:""}`,t)}var Yhe=An((t,e,r)=>{if(!gW(r,t)){let i="must be one of: "+NW(ghe(r,s=>typeof s=="string"?`'${s}'`:whe(s)),", ");throw new Ml(e,t,i)}});function yW(t,e){if(typeof t!="boolean")throw new Lr(e,"boolean",t)}function xg(t,e,r){return t==null||!bhe(t,e)?r:t[e]}var Vhe=An((t,e,r=null)=>{let n=xg(r,"allowArray",!1),i=xg(r,"allowFunction",!1);if(!xg(r,"nullable",!1)&&t===null||!n&&Mg(t)||typeof t!="object"&&(!i||typeof t!="function"))throw new Lr(e,"Object",t)}),qhe=An((t,e)=>{if(t!=null&&typeof t!="object"&&typeof t!="function")throw new Lr(e,"a dictionary",t)}),WT=An((t,e,r=0)=>{if(!Mg(t))throw new Lr(e,"Array",t);if(t.length<r){let n=`must be longer than ${r}`;throw new Ml(e,t,n)}});function Xhe(t,e){WT(t,e);for(let r=0;r<t.length;r++)Ug(t[r],`${e}[${r}]`)}function jhe(t,e){WT(t,e);for(let r=0;r<t.length;r++)yW(t[r],`${e}[${r}]`)}function zhe(t,e){WT(t,e);for(let r=0;r<t.length;r++){let n=t[r],i=`${e}[${r}]`;if(n==null)throw new Lr(i,"AbortSignal",n);bW(n,i)}}function Khe(t,e="signal"){if(Ug(t,e),_W[t]===void 0)throw _W[Lhe(t)]!==void 0?new mW(t+" (signals must use all capital letters)"):new mW(t)}var Jhe=An((t,e="buffer")=>{if(!vhe(t))throw new Lr(e,["Buffer","TypedArray","DataView"],t)});function Qhe(t,e){let r=xhe(e),n=t.length;if(r==="hex"&&n%2!==0)throw new Ml("encoding",e,`is invalid for data of length ${n}`)}function Zhe(t,e="Port",r=!0){if(typeof t!="number"&&typeof t!="string"||typeof t=="string"&&Dhe(t).length===0||+t!==+t>>>0||t>65535||t===0&&!r)throw new Phe(e,t,r);return t|0}var bW=An((t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new Lr(e,"AbortSignal",t)}),eTe=An((t,e)=>{if(typeof t!="function")throw new Lr(e,"Function",t)}),tTe=An((t,e)=>{if(typeof t!="function"||Mhe(t))throw new Lr(e,"Function",t)}),rTe=An((t,e)=>{if(t!==void 0)throw new Lr(e,"undefined",t)});function nTe(t,e,r){if(!gW(r,t))throw new Lr(e,`('${NW(r,"|")}')`,t)}var iTe=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function IW(t,e){if(typeof t>"u"||!OW(iTe,t))throw new Ml(e,t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function sTe(t){if(typeof t=="string")return IW(t,"hints"),t;if(Mg(t)){let e=t.length,r="";if(e===0)return r;for(let n=0;n<e;n++){let i=t[n];IW(i,"hints"),r+=i,n!==e-1&&(r+=", ")}return r}throw new Ml("hints",t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}wW.exports={isInt32:Uhe,isUint32:Bhe,parseFileMode:Hhe,validateArray:WT,validateStringArray:Xhe,validateBooleanArray:jhe,validateAbortSignalArray:zhe,validateBoolean:yW,validateBuffer:Jhe,validateDictionary:qhe,validateEncoding:Qhe,validateFunction:eTe,validateInt32:khe,validateInteger:Whe,validateNumber:$he,validateObject:Vhe,validateOneOf:Yhe,validatePlainFunction:tTe,validatePort:Zhe,validateSignalName:Khe,validateString:Ug,validateUint32:CW,validateUndefined:rTe,validateUnion:nTe,validateAbortSignal:bW,validateLinkHeaderValue:sTe}});var di=O((Yve,YW)=>{"use strict";var{SymbolAsyncIterator:LW,SymbolIterator:DW,SymbolFor:Yo}=ut(),PW=Yo("nodejs.stream.destroyed"),xW=Yo("nodejs.stream.errored"),Bg=Yo("nodejs.stream.readable"),Fg=Yo("nodejs.stream.writable"),MW=Yo("nodejs.stream.disturbed"),oTe=Yo("nodejs.webstream.isClosedPromise"),aTe=Yo("nodejs.webstream.controllerErrorFunction");function kT(t,e=!1){var r;return!!(t&&typeof t.pipe=="function"&&typeof t.on=="function"&&(!e||typeof t.pause=="function"&&typeof t.resume=="function")&&(!t._writableState||((r=t._readableState)===null||r===void 0?void 0:r.readable)!==!1)&&(!t._writableState||t._readableState))}function $T(t){var e;return!!(t&&typeof t.write=="function"&&typeof t.on=="function"&&(!t._readableState||((e=t._writableState)===null||e===void 0?void 0:e.writable)!==!1))}function lTe(t){return!!(t&&typeof t.pipe=="function"&&t._readableState&&typeof t.on=="function"&&typeof t.write=="function")}function ui(t){return t&&(t._readableState||t._writableState||typeof t.write=="function"&&typeof t.on=="function"||typeof t.pipe=="function"&&typeof t.on=="function")}function vW(t){return!!(t&&!ui(t)&&typeof t.pipeThrough=="function"&&typeof t.getReader=="function"&&typeof t.cancel=="function")}function UW(t){return!!(t&&!ui(t)&&typeof t.getWriter=="function"&&typeof t.abort=="function")}function BW(t){return!!(t&&!ui(t)&&typeof t.readable=="object"&&typeof t.writable=="object")}function cTe(t){return vW(t)||UW(t)||BW(t)}function uTe(t,e){return t==null?!1:e===!0?typeof t[LW]=="function":e===!1?typeof t[DW]=="function":typeof t[LW]=="function"||typeof t[DW]=="function"}function YT(t){if(!ui(t))return null;let e=t._writableState,r=t._readableState,n=e||r;return!!(t.destroyed||t[PW]||n!=null&&n.destroyed)}function FW(t){if(!$T(t))return null;if(t.writableEnded===!0)return!0;let e=t._writableState;return e!=null&&e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function dTe(t,e){if(!$T(t))return null;if(t.writableFinished===!0)return!0;let r=t._writableState;return r!=null&&r.errored?!1:typeof r?.finished!="boolean"?null:!!(r.finished||e===!1&&r.ended===!0&&r.length===0)}function fTe(t){if(!kT(t))return null;if(t.readableEnded===!0)return!0;let e=t._readableState;return!e||e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function GW(t,e){if(!kT(t))return null;let r=t._readableState;return r!=null&&r.errored?!1:typeof r?.endEmitted!="boolean"?null:!!(r.endEmitted||e===!1&&r.ended===!0&&r.length===0)}function HW(t){return t&&t[Bg]!=null?t[Bg]:typeof t?.readable!="boolean"?null:YT(t)?!1:kT(t)&&t.readable&&!GW(t)}function WW(t){return t&&t[Fg]!=null?t[Fg]:typeof t?.writable!="boolean"?null:YT(t)?!1:$T(t)&&t.writable&&!FW(t)}function ETe(t,e){return ui(t)?YT(t)?!0:!(e?.readable!==!1&&HW(t)||e?.writable!==!1&&WW(t)):null}function hTe(t){var e,r;return ui(t)?t.writableErrored?t.writableErrored:(e=(r=t._writableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function TTe(t){var e,r;return ui(t)?t.readableErrored?t.readableErrored:(e=(r=t._readableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function pTe(t){if(!ui(t))return null;if(typeof t.closed=="boolean")return t.closed;let e=t._writableState,r=t._readableState;return typeof e?.closed=="boolean"||typeof r?.closed=="boolean"?e?.closed||r?.closed:typeof t._closed=="boolean"&&kW(t)?t._closed:null}function kW(t){return typeof t._closed=="boolean"&&typeof t._defaultKeepAlive=="boolean"&&typeof t._removedConnection=="boolean"&&typeof t._removedContLen=="boolean"}function $W(t){return typeof t._sent100=="boolean"&&kW(t)}function STe(t){var e;return typeof t._consuming=="boolean"&&typeof t._dumped=="boolean"&&((e=t.req)===null||e===void 0?void 0:e.upgradeOrConnect)===void 0}function RTe(t){if(!ui(t))return null;let e=t._writableState,r=t._readableState,n=e||r;return!n&&$W(t)||!!(n&&n.autoDestroy&&n.emitClose&&n.closed===!1)}function ATe(t){var e;return!!(t&&((e=t[MW])!==null&&e!==void 0?e:t.readableDidRead||t.readableAborted))}function mTe(t){var e,r,n,i,s,o,a,l,c,u;return!!(t&&((e=(r=(n=(i=(s=(o=t[xW])!==null&&o!==void 0?o:t.readableErrored)!==null&&s!==void 0?s:t.writableErrored)!==null&&i!==void 0?i:(a=t._readableState)===null||a===void 0?void 0:a.errorEmitted)!==null&&n!==void 0?n:(l=t._writableState)===null||l===void 0?void 0:l.errorEmitted)!==null&&r!==void 0?r:(c=t._readableState)===null||c===void 0?void 0:c.errored)!==null&&e!==void 0?e:!((u=t._writableState)===null||u===void 0)&&u.errored))}YW.exports={isDestroyed:YT,kIsDestroyed:PW,isDisturbed:ATe,kIsDisturbed:MW,isErrored:mTe,kIsErrored:xW,isReadable:HW,kIsReadable:Bg,kIsClosedPromise:oTe,kControllerErrorFunction:aTe,kIsWritable:Fg,isClosed:pTe,isDuplexNodeStream:lTe,isFinished:ETe,isIterable:uTe,isReadableNodeStream:kT,isReadableStream:vW,isReadableEnded:fTe,isReadableFinished:GW,isReadableErrored:TTe,isNodeStream:ui,isWebStream:cTe,isWritable:WW,isWritableNodeStream:$T,isWritableStream:UW,isWritableEnded:FW,isWritableFinished:dTe,isWritableErrored:hTe,isServerRequest:STe,isServerResponse:$W,willEmitClose:RTe,isTransformStream:BW}});var zi=O((Vve,$g)=>{"use strict";var Us=je(),{AbortError:ZW,codes:_Te}=wr(),{ERR_INVALID_ARG_TYPE:ITe,ERR_STREAM_PREMATURE_CLOSE:VW}=_Te,{kEmptyObject:Hg,once:Wg}=Wr(),{validateAbortSignal:gTe,validateFunction:NTe,validateObject:OTe,validateBoolean:CTe}=vl(),{Promise:yTe,PromisePrototypeThen:bTe,SymbolDispose:ek}=ut(),{isClosed:wTe,isReadable:qW,isReadableNodeStream:Gg,isReadableStream:LTe,isReadableFinished:XW,isReadableErrored:jW,isWritable:zW,isWritableNodeStream:KW,isWritableStream:DTe,isWritableFinished:JW,isWritableErrored:QW,isNodeStream:PTe,willEmitClose:xTe,kIsClosedPromise:MTe}=di(),Ul;function vTe(t){return t.setHeader&&typeof t.abort=="function"}var kg=()=>{};function tk(t,e,r){var n,i;if(arguments.length===2?(r=e,e=Hg):e==null?e=Hg:OTe(e,"options"),NTe(r,"callback"),gTe(e.signal,"options.signal"),r=Wg(r),LTe(t)||DTe(t))return UTe(t,e,r);if(!PTe(t))throw new ITe("stream",["ReadableStream","WritableStream","Stream"],t);let s=(n=e.readable)!==null&&n!==void 0?n:Gg(t),o=(i=e.writable)!==null&&i!==void 0?i:KW(t),a=t._writableState,l=t._readableState,c=()=>{t.writable||E()},u=xTe(t)&&Gg(t)===s&&KW(t)===o,d=JW(t,!1),E=()=>{d=!0,t.destroyed&&(u=!1),!(u&&(!t.readable||s))&&(!s||f)&&r.call(t)},f=XW(t,!1),T=()=>{f=!0,t.destroyed&&(u=!1),!(u&&(!t.writable||o))&&(!o||d)&&r.call(t)},h=g=>{r.call(t,g)},p=wTe(t),S=()=>{p=!0;let g=QW(t)||jW(t);if(g&&typeof g!="boolean")return r.call(t,g);if(s&&!f&&Gg(t,!0)&&!XW(t,!1))return r.call(t,new VW);if(o&&!d&&!JW(t,!1))return r.call(t,new VW);r.call(t)},m=()=>{p=!0;let g=QW(t)||jW(t);if(g&&typeof g!="boolean")return r.call(t,g);r.call(t)},R=()=>{t.req.on("finish",E)};vTe(t)?(t.on("complete",E),u||t.on("abort",S),t.req?R():t.on("request",R)):o&&!a&&(t.on("end",c),t.on("close",c)),!u&&typeof t.aborted=="boolean"&&t.on("aborted",S),t.on("end",T),t.on("finish",E),e.error!==!1&&t.on("error",h),t.on("close",S),p?Us.nextTick(S):a!=null&&a.errorEmitted||l!=null&&l.errorEmitted?u||Us.nextTick(m):(!s&&(!u||qW(t))&&(d||zW(t)===!1)||!o&&(!u||zW(t))&&(f||qW(t)===!1)||l&&t.req&&t.aborted)&&Us.nextTick(m);let A=()=>{r=kg,t.removeListener("aborted",S),t.removeListener("complete",E),t.removeListener("abort",S),t.removeListener("request",R),t.req&&t.req.removeListener("finish",E),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",E),t.removeListener("end",T),t.removeListener("error",h),t.removeListener("close",S)};if(e.signal&&!p){let g=()=>{let w=r;A(),w.call(t,new ZW(void 0,{cause:e.signal.reason}))};if(e.signal.aborted)Us.nextTick(g);else{Ul=Ul||Wr().addAbortListener;let w=Ul(e.signal,g),I=r;r=Wg((...D)=>{w[ek](),I.apply(t,D)})}}return A}function UTe(t,e,r){let n=!1,i=kg;if(e.signal)if(i=()=>{n=!0,r.call(t,new ZW(void 0,{cause:e.signal.reason}))},e.signal.aborted)Us.nextTick(i);else{Ul=Ul||Wr().addAbortListener;let o=Ul(e.signal,i),a=r;r=Wg((...l)=>{o[ek](),a.apply(t,l)})}let s=(...o)=>{n||Us.nextTick(()=>r.apply(t,o))};return bTe(t[MTe].promise,s,s),kg}function BTe(t,e){var r;let n=!1;return e===null&&(e=Hg),(r=e)!==null&&r!==void 0&&r.cleanup&&(CTe(e.cleanup,"cleanup"),n=e.cleanup),new yTe((i,s)=>{let o=tk(t,e,a=>{n&&o(),a?s(a):i()})})}$g.exports=tk;$g.exports.finished=BTe});var Vo=O((qve,ck)=>{"use strict";var fi=je(),{aggregateTwoErrors:FTe,codes:{ERR_MULTIPLE_CALLBACK:GTe},AbortError:HTe}=wr(),{Symbol:ik}=ut(),{kIsDestroyed:WTe,isDestroyed:kTe,isFinished:$Te,isServerRequest:YTe}=di(),sk=ik("kDestroy"),Yg=ik("kConstruct");function ok(t,e,r){t&&(t.stack,e&&!e.errored&&(e.errored=t),r&&!r.errored&&(r.errored=t))}function VTe(t,e){let r=this._readableState,n=this._writableState,i=n||r;return n!=null&&n.destroyed||r!=null&&r.destroyed?(typeof e=="function"&&e(),this):(ok(t,n,r),n&&(n.destroyed=!0),r&&(r.destroyed=!0),i.constructed?rk(this,t,e):this.once(sk,function(s){rk(this,FTe(s,t),e)}),this)}function rk(t,e,r){let n=!1;function i(s){if(n)return;n=!0;let o=t._readableState,a=t._writableState;ok(s,a,o),a&&(a.closed=!0),o&&(o.closed=!0),typeof r=="function"&&r(s),s?fi.nextTick(qTe,t,s):fi.nextTick(ak,t)}try{t._destroy(e||null,i)}catch(s){i(s)}}function qTe(t,e){Vg(t,e),ak(t)}function ak(t){let e=t._readableState,r=t._writableState;r&&(r.closeEmitted=!0),e&&(e.closeEmitted=!0),(r!=null&&r.emitClose||e!=null&&e.emitClose)&&t.emit("close")}function Vg(t,e){let r=t._readableState,n=t._writableState;n!=null&&n.errorEmitted||r!=null&&r.errorEmitted||(n&&(n.errorEmitted=!0),r&&(r.errorEmitted=!0),t.emit("error",e))}function XTe(){let t=this._readableState,e=this._writableState;t&&(t.constructed=!0,t.closed=!1,t.closeEmitted=!1,t.destroyed=!1,t.errored=null,t.errorEmitted=!1,t.reading=!1,t.ended=t.readable===!1,t.endEmitted=t.readable===!1),e&&(e.constructed=!0,e.destroyed=!1,e.closed=!1,e.closeEmitted=!1,e.errored=null,e.errorEmitted=!1,e.finalCalled=!1,e.prefinished=!1,e.ended=e.writable===!1,e.ending=e.writable===!1,e.finished=e.writable===!1)}function qg(t,e,r){let n=t._readableState,i=t._writableState;if(i!=null&&i.destroyed||n!=null&&n.destroyed)return this;n!=null&&n.autoDestroy||i!=null&&i.autoDestroy?t.destroy(e):e&&(e.stack,i&&!i.errored&&(i.errored=e),n&&!n.errored&&(n.errored=e),r?fi.nextTick(Vg,t,e):Vg(t,e))}function jTe(t,e){if(typeof t._construct!="function")return;let r=t._readableState,n=t._writableState;r&&(r.constructed=!1),n&&(n.constructed=!1),t.once(Yg,e),!(t.listenerCount(Yg)>1)&&fi.nextTick(zTe,t)}function zTe(t){let e=!1;function r(n){if(e){qg(t,n??new GTe);return}e=!0;let i=t._readableState,s=t._writableState,o=s||i;i&&(i.constructed=!0),s&&(s.constructed=!0),o.destroyed?t.emit(sk,n):n?qg(t,n,!0):fi.nextTick(KTe,t)}try{t._construct(n=>{fi.nextTick(r,n)})}catch(n){fi.nextTick(r,n)}}function KTe(t){t.emit(Yg)}function nk(t){return t?.setHeader&&typeof t.abort=="function"}function lk(t){t.emit("close")}function JTe(t,e){t.emit("error",e),fi.nextTick(lk,t)}function QTe(t,e){!t||kTe(t)||(!e&&!$Te(t)&&(e=new HTe),YTe(t)?(t.socket=null,t.destroy(e)):nk(t)?t.abort():nk(t.req)?t.req.abort():typeof t.destroy=="function"?t.destroy(e):typeof t.close=="function"?t.close():e?fi.nextTick(JTe,t,e):fi.nextTick(lk,t),t.destroyed||(t[WTe]=!0))}ck.exports={construct:jTe,destroyer:QTe,destroy:VTe,undestroy:XTe,errorOrDestroy:qg}});var XT=O((Xve,dk)=>{"use strict";var{ArrayIsArray:ZTe,ObjectSetPrototypeOf:uk}=ut(),{EventEmitter:VT}=require("events");function qT(t){VT.call(this,t)}uk(qT.prototype,VT.prototype);uk(qT,VT);qT.prototype.pipe=function(t,e){let r=this;function n(u){t.writable&&t.write(u)===!1&&r.pause&&r.pause()}r.on("data",n);function i(){r.readable&&r.resume&&r.resume()}t.on("drain",i),!t._isStdio&&(!e||e.end!==!1)&&(r.on("end",o),r.on("close",a));let s=!1;function o(){s||(s=!0,t.end())}function a(){s||(s=!0,typeof t.destroy=="function"&&t.destroy())}function l(u){c(),VT.listenerCount(this,"error")===0&&this.emit("error",u)}Xg(r,"error",l),Xg(t,"error",l);function c(){r.removeListener("data",n),t.removeListener("drain",i),r.removeListener("end",o),r.removeListener("close",a),r.removeListener("error",l),t.removeListener("error",l),r.removeListener("end",c),r.removeListener("close",c),t.removeListener("close",c)}return r.on("end",c),r.on("close",c),t.on("close",c),t.emit("pipe",r),t};function Xg(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):ZTe(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}dk.exports={Stream:qT,prependListener:Xg}});var fd=O((jve,jT)=>{"use strict";var{SymbolDispose:epe}=ut(),{AbortError:fk,codes:tpe}=wr(),{isNodeStream:Ek,isWebStream:rpe,kControllerErrorFunction:npe}=di(),ipe=zi(),{ERR_INVALID_ARG_TYPE:hk}=tpe,jg,spe=(t,e)=>{if(typeof t!="object"||!("aborted"in t))throw new hk(e,"AbortSignal",t)};jT.exports.addAbortSignal=function(e,r){if(spe(e,"signal"),!Ek(r)&&!rpe(r))throw new hk("stream",["ReadableStream","WritableStream","Stream"],r);return jT.exports.addAbortSignalNoValidate(e,r)};jT.exports.addAbortSignalNoValidate=function(t,e){if(typeof t!="object"||!("aborted"in t))return e;let r=Ek(e)?()=>{e.destroy(new fk(void 0,{cause:t.reason}))}:()=>{e[npe](new fk(void 0,{cause:t.reason}))};if(t.aborted)r();else{jg=jg||Wr().addAbortListener;let n=jg(t,r);ipe(e,n[epe])}return e}});var Sk=O((Kve,pk)=>{"use strict";var{StringPrototypeSlice:Tk,SymbolIterator:ope,TypedArrayPrototypeSet:zT,Uint8Array:ape}=ut(),{Buffer:zg}=require("buffer"),{inspect:lpe}=Wr();pk.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){let r={data:e,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length}unshift(e){let r={data:e,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length}shift(){if(this.length===0)return;let e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return"";let r=this.head,n=""+r.data;for(;(r=r.next)!==null;)n+=e+r.data;return n}concat(e){if(this.length===0)return zg.alloc(0);let r=zg.allocUnsafe(e>>>0),n=this.head,i=0;for(;n;)zT(r,n.data,i),i+=n.data.length,n=n.next;return r}consume(e,r){let n=this.head.data;if(e<n.length){let i=n.slice(0,e);return this.head.data=n.slice(e),i}return e===n.length?this.shift():r?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[ope](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let r="",n=this.head,i=0;do{let s=n.data;if(e>s.length)r+=s,e-=s.length;else{e===s.length?(r+=s,++i,n.next?this.head=n.next:this.head=this.tail=null):(r+=Tk(s,0,e),this.head=n,n.data=Tk(s,e));break}++i}while((n=n.next)!==null);return this.length-=i,r}_getBuffer(e){let r=zg.allocUnsafe(e),n=e,i=this.head,s=0;do{let o=i.data;if(e>o.length)zT(r,o,n-e),e-=o.length;else{e===o.length?(zT(r,o,n-e),++s,i.next?this.head=i.next:this.head=this.tail=null):(zT(r,new ape(o.buffer,o.byteOffset,e),n-e),this.head=i,i.data=o.slice(e));break}++s}while((i=i.next)!==null);return this.length-=s,r}[Symbol.for("nodejs.util.inspect.custom")](e,r){return lpe(this,{...r,depth:0,customInspect:!1})}}});var Ed=O((Jve,_k)=>{"use strict";var{MathFloor:cpe,NumberIsInteger:upe}=ut(),{validateInteger:dpe}=vl(),{ERR_INVALID_ARG_VALUE:fpe}=wr().codes,Rk=16*1024,Ak=16;function Epe(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function mk(t){return t?Ak:Rk}function hpe(t,e){dpe(e,"value",0),t?Ak=e:Rk=e}function Tpe(t,e,r,n){let i=Epe(e,n,r);if(i!=null){if(!upe(i)||i<0){let s=n?`options.${r}`:"options.highWaterMark";throw new fpe(s,i)}return cpe(i)}return mk(t.objectMode)}_k.exports={getHighWaterMark:Tpe,getDefaultHighWaterMark:mk,setDefaultHighWaterMark:hpe}});var Kg=O((Qve,Ok)=>{"use strict";var Ik=je(),{PromisePrototypeThen:ppe,SymbolAsyncIterator:gk,SymbolIterator:Nk}=ut(),{Buffer:Spe}=require("buffer"),{ERR_INVALID_ARG_TYPE:Rpe,ERR_STREAM_NULL_VALUES:Ape}=wr().codes;function mpe(t,e,r){let n;if(typeof e=="string"||e instanceof Spe)return new t({objectMode:!0,...r,read(){this.push(e),this.push(null)}});let i;if(e&&e[gk])i=!0,n=e[gk]();else if(e&&e[Nk])i=!1,n=e[Nk]();else throw new Rpe("iterable",["Iterable"],e);let s=new t({objectMode:!0,highWaterMark:1,...r}),o=!1;s._read=function(){o||(o=!0,l())},s._destroy=function(c,u){ppe(a(c),()=>Ik.nextTick(u,c),d=>Ik.nextTick(u,d||c))};async function a(c){let u=c!=null,d=typeof n.throw=="function";if(u&&d){let{value:E,done:f}=await n.throw(c);if(await E,f)return}if(typeof n.return=="function"){let{value:E}=await n.return();await E}}async function l(){for(;;){try{let{value:c,done:u}=i?await n.next():n.next();if(u)s.push(null);else{let d=c&&typeof c.then=="function"?await c:c;if(d===null)throw o=!1,new Ape;if(s.push(d))continue;o=!1}}catch(c){s.destroy(c)}break}}return s}Ok.exports=mpe});var Td=O((Zve,$k)=>{"use strict";var vn=je(),{ArrayPrototypeIndexOf:_pe,NumberIsInteger:Ipe,NumberIsNaN:gpe,NumberParseInt:Npe,ObjectDefineProperties:iN,ObjectKeys:Ope,ObjectSetPrototypeOf:bk,Promise:wk,SafeSet:Cpe,SymbolAsyncDispose:ype,SymbolAsyncIterator:bpe,Symbol:wpe}=ut();$k.exports=Ae;Ae.ReadableState=ZT;var{EventEmitter:Lpe}=require("events"),{Stream:Bs,prependListener:Dpe}=XT(),{Buffer:Jg}=require("buffer"),{addAbortSignal:Ppe}=fd(),Lk=zi(),xe=Wr().debuglog("stream",t=>{xe=t}),xpe=Sk(),Gl=Vo(),{getHighWaterMark:Mpe,getDefaultHighWaterMark:vpe}=Ed(),{aggregateTwoErrors:Ck,codes:{ERR_INVALID_ARG_TYPE:Upe,ERR_METHOD_NOT_IMPLEMENTED:Bpe,ERR_OUT_OF_RANGE:Fpe,ERR_STREAM_PUSH_AFTER_EOF:Gpe,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:Hpe},AbortError:Wpe}=wr(),{validateObject:kpe}=vl(),qo=wpe("kPaused"),{StringDecoder:Dk}=Au(),$pe=Kg();bk(Ae.prototype,Bs.prototype);bk(Ae,Bs);var Qg=()=>{},{errorOrDestroy:Bl}=Gl,Fl=1,Ype=2,Pk=4,hd=8,xk=16,KT=32,JT=64,Mk=128,Vpe=256,qpe=512,Xpe=1024,rN=2048,nN=4096,jpe=8192,zpe=16384,Kpe=32768,vk=65536,Jpe=1<<17,Qpe=1<<18;function kt(t){return{enumerable:!1,get(){return(this.state&t)!==0},set(e){e?this.state|=t:this.state&=~t}}}iN(ZT.prototype,{objectMode:kt(Fl),ended:kt(Ype),endEmitted:kt(Pk),reading:kt(hd),constructed:kt(xk),sync:kt(KT),needReadable:kt(JT),emittedReadable:kt(Mk),readableListening:kt(Vpe),resumeScheduled:kt(qpe),errorEmitted:kt(Xpe),emitClose:kt(rN),autoDestroy:kt(nN),destroyed:kt(jpe),closed:kt(zpe),closeEmitted:kt(Kpe),multiAwaitDrain:kt(vk),readingMore:kt(Jpe),dataEmitted:kt(Qpe)});function ZT(t,e,r){typeof r!="boolean"&&(r=e instanceof Ei()),this.state=rN|nN|xk|KT,t&&t.objectMode&&(this.state|=Fl),r&&t&&t.readableObjectMode&&(this.state|=Fl),this.highWaterMark=t?Mpe(this,t,"readableHighWaterMark",r):vpe(!1),this.buffer=new xpe,this.length=0,this.pipes=[],this.flowing=null,this[qo]=null,t&&t.emitClose===!1&&(this.state&=~rN),t&&t.autoDestroy===!1&&(this.state&=~nN),this.errored=null,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,t&&t.encoding&&(this.decoder=new Dk(t.encoding),this.encoding=t.encoding)}function Ae(t){if(!(this instanceof Ae))return new Ae(t);let e=this instanceof Ei();this._readableState=new ZT(t,this,e),t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&!e&&Ppe(t.signal,this)),Bs.call(this,t),Gl.construct(this,()=>{this._readableState.needReadable&&QT(this,this._readableState)})}Ae.prototype.destroy=Gl.destroy;Ae.prototype._undestroy=Gl.undestroy;Ae.prototype._destroy=function(t,e){e(t)};Ae.prototype[Lpe.captureRejectionSymbol]=function(t){this.destroy(t)};Ae.prototype[ype]=function(){let t;return this.destroyed||(t=this.readableEnded?null:new Wpe,this.destroy(t)),new wk((e,r)=>Lk(this,n=>n&&n!==t?r(n):e(null)))};Ae.prototype.push=function(t,e){return Uk(this,t,e,!1)};Ae.prototype.unshift=function(t,e){return Uk(this,t,e,!0)};function Uk(t,e,r,n){xe("readableAddChunk",e);let i=t._readableState,s;if((i.state&Fl)===0&&(typeof e=="string"?(r=r||i.defaultEncoding,i.encoding!==r&&(n&&i.encoding?e=Jg.from(e,r).toString(i.encoding):(e=Jg.from(e,r),r=""))):e instanceof Jg?r="":Bs._isUint8Array(e)?(e=Bs._uint8ArrayToBuffer(e),r=""):e!=null&&(s=new Upe("chunk",["string","Buffer","Uint8Array"],e))),s)Bl(t,s);else if(e===null)i.state&=~hd,tSe(t,i);else if((i.state&Fl)!==0||e&&e.length>0)if(n)if((i.state&Pk)!==0)Bl(t,new Hpe);else{if(i.destroyed||i.errored)return!1;Zg(t,i,e,!0)}else if(i.ended)Bl(t,new Gpe);else{if(i.destroyed||i.errored)return!1;i.state&=~hd,i.decoder&&!r?(e=i.decoder.write(e),i.objectMode||e.length!==0?Zg(t,i,e,!1):QT(t,i)):Zg(t,i,e,!1)}else n||(i.state&=~hd,QT(t,i));return!i.ended&&(i.length<i.highWaterMark||i.length===0)}function Zg(t,e,r,n){e.flowing&&e.length===0&&!e.sync&&t.listenerCount("data")>0?((e.state&vk)!==0?e.awaitDrainWriters.clear():e.awaitDrainWriters=null,e.dataEmitted=!0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),(e.state&JT)!==0&&ep(t)),QT(t,e)}Ae.prototype.isPaused=function(){let t=this._readableState;return t[qo]===!0||t.flowing===!1};Ae.prototype.setEncoding=function(t){let e=new Dk(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;let r=this._readableState.buffer,n="";for(let i of r)n+=e.write(i);return r.clear(),n!==""&&r.push(n),this._readableState.length=n.length,this};var Zpe=1073741824;function eSe(t){if(t>Zpe)throw new Fpe("size","<= 1GiB",t);return t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++,t}function yk(t,e){return t<=0||e.length===0&&e.ended?0:(e.state&Fl)!==0?1:gpe(t)?e.flowing&&e.length?e.buffer.first().length:e.length:t<=e.length?t:e.ended?e.length:0}Ae.prototype.read=function(t){xe("read",t),t===void 0?t=NaN:Ipe(t)||(t=Npe(t,10));let e=this._readableState,r=t;if(t>e.highWaterMark&&(e.highWaterMark=eSe(t)),t!==0&&(e.state&=~Mk),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return xe("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?eN(this):ep(this),null;if(t=yk(t,e),t===0&&e.ended)return e.length===0&&eN(this),null;let n=(e.state&JT)!==0;if(xe("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,xe("length less than watermark",n)),e.ended||e.reading||e.destroyed||e.errored||!e.constructed)n=!1,xe("reading, ended or constructing",n);else if(n){xe("do read"),e.state|=hd|KT,e.length===0&&(e.state|=JT);try{this._read(e.highWaterMark)}catch(s){Bl(this,s)}e.state&=~KT,e.reading||(t=yk(r,e))}let i;return t>0?i=Wk(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.multiAwaitDrain?e.awaitDrainWriters.clear():e.awaitDrainWriters=null),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&eN(this)),i!==null&&!e.errorEmitted&&!e.closeEmitted&&(e.dataEmitted=!0,this.emit("data",i)),i};function tSe(t,e){if(xe("onEofChunk"),!e.ended){if(e.decoder){let r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?ep(t):(e.needReadable=!1,e.emittedReadable=!0,Bk(t))}}function ep(t){let e=t._readableState;xe("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(xe("emitReadable",e.flowing),e.emittedReadable=!0,vn.nextTick(Bk,t))}function Bk(t){let e=t._readableState;xe("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&!e.errored&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,Gk(t)}function QT(t,e){!e.readingMore&&e.constructed&&(e.readingMore=!0,vn.nextTick(rSe,t,e))}function rSe(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){let r=e.length;if(xe("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}Ae.prototype._read=function(t){throw new Bpe("_read()")};Ae.prototype.pipe=function(t,e){let r=this,n=this._readableState;n.pipes.length===1&&(n.multiAwaitDrain||(n.multiAwaitDrain=!0,n.awaitDrainWriters=new Cpe(n.awaitDrainWriters?[n.awaitDrainWriters]:[]))),n.pipes.push(t),xe("pipe count=%d opts=%j",n.pipes.length,e);let s=(!e||e.end!==!1)&&t!==vn.stdout&&t!==vn.stderr?a:p;n.endEmitted?vn.nextTick(s):r.once("end",s),t.on("unpipe",o);function o(S,m){xe("onunpipe"),S===r&&m&&m.hasUnpiped===!1&&(m.hasUnpiped=!0,u())}function a(){xe("onend"),t.end()}let l,c=!1;function u(){xe("cleanup"),t.removeListener("close",T),t.removeListener("finish",h),l&&t.removeListener("drain",l),t.removeListener("error",f),t.removeListener("unpipe",o),r.removeListener("end",a),r.removeListener("end",p),r.removeListener("data",E),c=!0,l&&n.awaitDrainWriters&&(!t._writableState||t._writableState.needDrain)&&l()}function d(){c||(n.pipes.length===1&&n.pipes[0]===t?(xe("false write response, pause",0),n.awaitDrainWriters=t,n.multiAwaitDrain=!1):n.pipes.length>1&&n.pipes.includes(t)&&(xe("false write response, pause",n.awaitDrainWriters.size),n.awaitDrainWriters.add(t)),r.pause()),l||(l=nSe(r,t),t.on("drain",l))}r.on("data",E);function E(S){xe("ondata");let m=t.write(S);xe("dest.write",m),m===!1&&d()}function f(S){if(xe("onerror",S),p(),t.removeListener("error",f),t.listenerCount("error")===0){let m=t._writableState||t._readableState;m&&!m.errorEmitted?Bl(t,S):t.emit("error",S)}}Dpe(t,"error",f);function T(){t.removeListener("finish",h),p()}t.once("close",T);function h(){xe("onfinish"),t.removeListener("close",T),p()}t.once("finish",h);function p(){xe("unpipe"),r.unpipe(t)}return t.emit("pipe",r),t.writableNeedDrain===!0?d():n.flowing||(xe("pipe resume"),r.resume()),t};function nSe(t,e){return function(){let n=t._readableState;n.awaitDrainWriters===e?(xe("pipeOnDrain",1),n.awaitDrainWriters=null):n.multiAwaitDrain&&(xe("pipeOnDrain",n.awaitDrainWriters.size),n.awaitDrainWriters.delete(e)),(!n.awaitDrainWriters||n.awaitDrainWriters.size===0)&&t.listenerCount("data")&&t.resume()}}Ae.prototype.unpipe=function(t){let e=this._readableState,r={hasUnpiped:!1};if(e.pipes.length===0)return this;if(!t){let i=e.pipes;e.pipes=[],this.pause();for(let s=0;s<i.length;s++)i[s].emit("unpipe",this,{hasUnpiped:!1});return this}let n=_pe(e.pipes,t);return n===-1?this:(e.pipes.splice(n,1),e.pipes.length===0&&this.pause(),t.emit("unpipe",this,r),this)};Ae.prototype.on=function(t,e){let r=Bs.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,xe("on readable",n.length,n.reading),n.length?ep(this):n.reading||vn.nextTick(iSe,this)),r};Ae.prototype.addListener=Ae.prototype.on;Ae.prototype.removeListener=function(t,e){let r=Bs.prototype.removeListener.call(this,t,e);return t==="readable"&&vn.nextTick(Fk,this),r};Ae.prototype.off=Ae.prototype.removeListener;Ae.prototype.removeAllListeners=function(t){let e=Bs.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&vn.nextTick(Fk,this),e};function Fk(t){let e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&e[qo]===!1?e.flowing=!0:t.listenerCount("data")>0?t.resume():e.readableListening||(e.flowing=null)}function iSe(t){xe("readable nexttick read 0"),t.read(0)}Ae.prototype.resume=function(){let t=this._readableState;return t.flowing||(xe("resume"),t.flowing=!t.readableListening,sSe(this,t)),t[qo]=!1,this};function sSe(t,e){e.resumeScheduled||(e.resumeScheduled=!0,vn.nextTick(oSe,t,e))}function oSe(t,e){xe("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),Gk(t),e.flowing&&!e.reading&&t.read(0)}Ae.prototype.pause=function(){return xe("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(xe("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[qo]=!0,this};function Gk(t){let e=t._readableState;for(xe("flow",e.flowing);e.flowing&&t.read()!==null;);}Ae.prototype.wrap=function(t){let e=!1;t.on("data",n=>{!this.push(n)&&t.pause&&(e=!0,t.pause())}),t.on("end",()=>{this.push(null)}),t.on("error",n=>{Bl(this,n)}),t.on("close",()=>{this.destroy()}),t.on("destroy",()=>{this.destroy()}),this._read=()=>{e&&t.resume&&(e=!1,t.resume())};let r=Ope(t);for(let n=1;n<r.length;n++){let i=r[n];this[i]===void 0&&typeof t[i]=="function"&&(this[i]=t[i].bind(t))}return this};Ae.prototype[bpe]=function(){return Hk(this)};Ae.prototype.iterator=function(t){return t!==void 0&&kpe(t,"options"),Hk(this,t)};function Hk(t,e){typeof t.read!="function"&&(t=Ae.wrap(t,{objectMode:!0}));let r=aSe(t,e);return r.stream=t,r}async function*aSe(t,e){let r=Qg;function n(o){this===t?(r(),r=Qg):r=o}t.on("readable",n);let i,s=Lk(t,{writable:!1},o=>{i=o?Ck(i,o):null,r(),r=Qg});try{for(;;){let o=t.destroyed?null:t.read();if(o!==null)yield o;else{if(i)throw i;if(i===null)return;await new wk(n)}}}catch(o){throw i=Ck(i,o),i}finally{(i||e?.destroyOnReturn!==!1)&&(i===void 0||t._readableState.autoDestroy)?Gl.destroyer(t,null):(t.off("readable",n),s())}}iN(Ae.prototype,{readable:{__proto__:null,get(){let t=this._readableState;return!!t&&t.readable!==!1&&!t.destroyed&&!t.errorEmitted&&!t.endEmitted},set(t){this._readableState&&(this._readableState.readable=!!t)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(t){this._readableState&&(this._readableState.destroyed=t)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}});iN(ZT.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[qo]!==!1},set(t){this[qo]=!!t}}});Ae._fromList=Wk;function Wk(t,e){if(e.length===0)return null;let r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function eN(t){let e=t._readableState;xe("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,vn.nextTick(lSe,e,t))}function lSe(t,e){if(xe("endReadableNT",t.endEmitted,t.length),!t.errored&&!t.closeEmitted&&!t.endEmitted&&t.length===0){if(t.endEmitted=!0,e.emit("end"),e.writable&&e.allowHalfOpen===!1)vn.nextTick(cSe,e);else if(t.autoDestroy){let r=e._writableState;(!r||r.autoDestroy&&(r.finished||r.writable===!1))&&e.destroy()}}}function cSe(t){t.writable&&!t.writableEnded&&!t.destroyed&&t.end()}Ae.from=function(t,e){return $pe(Ae,t,e)};var tN;function kk(){return tN===void 0&&(tN={}),tN}Ae.fromWeb=function(t,e){return kk().newStreamReadableFromReadableStream(t,e)};Ae.toWeb=function(t,e){return kk().newReadableStreamFromStreamReadable(t,e)};Ae.wrap=function(t,e){var r,n;return new Ae({objectMode:(r=(n=t.readableObjectMode)!==null&&n!==void 0?n:t.objectMode)!==null&&r!==void 0?r:!0,...e,destroy(i,s){Gl.destroyer(t,i),s(i)}}).wrap(t)}});var sp=O((eUe,t$)=>{"use strict";var Xo=je(),{ArrayPrototypeSlice:qk,Error:uSe,FunctionPrototypeSymbolHasInstance:Xk,ObjectDefineProperty:jk,ObjectDefineProperties:dSe,ObjectSetPrototypeOf:zk,StringPrototypeToLowerCase:fSe,Symbol:ESe,SymbolHasInstance:hSe}=ut();t$.exports=pt;pt.WritableState=Rd;var{EventEmitter:TSe}=require("events"),pd=XT().Stream,{Buffer:tp}=require("buffer"),ip=Vo(),{addAbortSignal:pSe}=fd(),{getHighWaterMark:SSe,getDefaultHighWaterMark:RSe}=Ed(),{ERR_INVALID_ARG_TYPE:ASe,ERR_METHOD_NOT_IMPLEMENTED:mSe,ERR_MULTIPLE_CALLBACK:Kk,ERR_STREAM_CANNOT_PIPE:_Se,ERR_STREAM_DESTROYED:Sd,ERR_STREAM_ALREADY_FINISHED:ISe,ERR_STREAM_NULL_VALUES:gSe,ERR_STREAM_WRITE_AFTER_END:NSe,ERR_UNKNOWN_ENCODING:Jk}=wr().codes,{errorOrDestroy:Hl}=ip;zk(pt.prototype,pd.prototype);zk(pt,pd);function aN(){}var Wl=ESe("kOnFinished");function Rd(t,e,r){typeof r!="boolean"&&(r=e instanceof Ei()),this.objectMode=!!(t&&t.objectMode),r&&(this.objectMode=this.objectMode||!!(t&&t.writableObjectMode)),this.highWaterMark=t?SSe(this,t,"writableHighWaterMark",r):RSe(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let n=!!(t&&t.decodeStrings===!1);this.decodeStrings=!n,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=CSe.bind(void 0,e),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,np(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!t||t.emitClose!==!1,this.autoDestroy=!t||t.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[Wl]=[]}function np(t){t.buffered=[],t.bufferedIndex=0,t.allBuffers=!0,t.allNoop=!0}Rd.prototype.getBuffer=function(){return qk(this.buffered,this.bufferedIndex)};jk(Rd.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function pt(t){let e=this instanceof Ei();if(!e&&!Xk(pt,this))return new pt(t);this._writableState=new Rd(t,this,e),t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&pSe(t.signal,this)),pd.call(this,t),ip.construct(this,()=>{let r=this._writableState;r.writing||cN(this,r),uN(this,r)})}jk(pt,hSe,{__proto__:null,value:function(t){return Xk(this,t)?!0:this!==pt?!1:t&&t._writableState instanceof Rd}});pt.prototype.pipe=function(){Hl(this,new _Se)};function Qk(t,e,r,n){let i=t._writableState;if(typeof r=="function")n=r,r=i.defaultEncoding;else{if(!r)r=i.defaultEncoding;else if(r!=="buffer"&&!tp.isEncoding(r))throw new Jk(r);typeof n!="function"&&(n=aN)}if(e===null)throw new gSe;if(!i.objectMode)if(typeof e=="string")i.decodeStrings!==!1&&(e=tp.from(e,r),r="buffer");else if(e instanceof tp)r="buffer";else if(pd._isUint8Array(e))e=pd._uint8ArrayToBuffer(e),r="buffer";else throw new ASe("chunk",["string","Buffer","Uint8Array"],e);let s;return i.ending?s=new NSe:i.destroyed&&(s=new Sd("write")),s?(Xo.nextTick(n,s),Hl(t,s,!0),s):(i.pendingcb++,OSe(t,i,e,r,n))}pt.prototype.write=function(t,e,r){return Qk(this,t,e,r)===!0};pt.prototype.cork=function(){this._writableState.corked++};pt.prototype.uncork=function(){let t=this._writableState;t.corked&&(t.corked--,t.writing||cN(this,t))};pt.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=fSe(e)),!tp.isEncoding(e))throw new Jk(e);return this._writableState.defaultEncoding=e,this};function OSe(t,e,r,n,i){let s=e.objectMode?1:r.length;e.length+=s;let o=e.length<e.highWaterMark;return o||(e.needDrain=!0),e.writing||e.corked||e.errored||!e.constructed?(e.buffered.push({chunk:r,encoding:n,callback:i}),e.allBuffers&&n!=="buffer"&&(e.allBuffers=!1),e.allNoop&&i!==aN&&(e.allNoop=!1)):(e.writelen=s,e.writecb=i,e.writing=!0,e.sync=!0,t._write(r,n,e.onwrite),e.sync=!1),o&&!e.errored&&!e.destroyed}function Yk(t,e,r,n,i,s,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new Sd("write")):r?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function Vk(t,e,r,n){--e.pendingcb,n(r),lN(e),Hl(t,r)}function CSe(t,e){let r=t._writableState,n=r.sync,i=r.writecb;if(typeof i!="function"){Hl(t,new Kk);return}r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0,e?(e.stack,r.errored||(r.errored=e),t._readableState&&!t._readableState.errored&&(t._readableState.errored=e),n?Xo.nextTick(Vk,t,r,e,i):Vk(t,r,e,i)):(r.buffered.length>r.bufferedIndex&&cN(t,r),n?r.afterWriteTickInfo!==null&&r.afterWriteTickInfo.cb===i?r.afterWriteTickInfo.count++:(r.afterWriteTickInfo={count:1,cb:i,stream:t,state:r},Xo.nextTick(ySe,r.afterWriteTickInfo)):Zk(t,r,1,i))}function ySe({stream:t,state:e,count:r,cb:n}){return e.afterWriteTickInfo=null,Zk(t,e,r,n)}function Zk(t,e,r,n){for(!e.ending&&!t.destroyed&&e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"));r-- >0;)e.pendingcb--,n();e.destroyed&&lN(e),uN(t,e)}function lN(t){if(t.writing)return;for(let i=t.bufferedIndex;i<t.buffered.length;++i){var e;let{chunk:s,callback:o}=t.buffered[i],a=t.objectMode?1:s.length;t.length-=a,o((e=t.errored)!==null&&e!==void 0?e:new Sd("write"))}let r=t[Wl].splice(0);for(let i=0;i<r.length;i++){var n;r[i]((n=t.errored)!==null&&n!==void 0?n:new Sd("end"))}np(t)}function cN(t,e){if(e.corked||e.bufferProcessing||e.destroyed||!e.constructed)return;let{buffered:r,bufferedIndex:n,objectMode:i}=e,s=r.length-n;if(!s)return;let o=n;if(e.bufferProcessing=!0,s>1&&t._writev){e.pendingcb-=s-1;let a=e.allNoop?aN:c=>{for(let u=o;u<r.length;++u)r[u].callback(c)},l=e.allNoop&&o===0?r:qk(r,o);l.allBuffers=e.allBuffers,Yk(t,e,!0,e.length,l,"",a),np(e)}else{do{let{chunk:a,encoding:l,callback:c}=r[o];r[o++]=null;let u=i?1:a.length;Yk(t,e,!1,u,a,l,c)}while(o<r.length&&!e.writing);o===r.length?np(e):o>256?(r.splice(0,o),e.bufferedIndex=0):e.bufferedIndex=o}e.bufferProcessing=!1}pt.prototype._write=function(t,e,r){if(this._writev)this._writev([{chunk:t,encoding:e}],r);else throw new mSe("_write()")};pt.prototype._writev=null;pt.prototype.end=function(t,e,r){let n=this._writableState;typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null);let i;if(t!=null){let s=Qk(this,t,e);s instanceof uSe&&(i=s)}return n.corked&&(n.corked=1,this.uncork()),i||(!n.errored&&!n.ending?(n.ending=!0,uN(this,n,!0),n.ended=!0):n.finished?i=new ISe("end"):n.destroyed&&(i=new Sd("end"))),typeof r=="function"&&(i||n.finished?Xo.nextTick(r,i):n[Wl].push(r)),this};function rp(t){return t.ending&&!t.destroyed&&t.constructed&&t.length===0&&!t.errored&&t.buffered.length===0&&!t.finished&&!t.writing&&!t.errorEmitted&&!t.closeEmitted}function bSe(t,e){let r=!1;function n(i){if(r){Hl(t,i??Kk());return}if(r=!0,e.pendingcb--,i){let s=e[Wl].splice(0);for(let o=0;o<s.length;o++)s[o](i);Hl(t,i,e.sync)}else rp(e)&&(e.prefinished=!0,t.emit("prefinish"),e.pendingcb++,Xo.nextTick(oN,t,e))}e.sync=!0,e.pendingcb++;try{t._final(n)}catch(i){n(i)}e.sync=!1}function wSe(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.finalCalled=!0,bSe(t,e)):(e.prefinished=!0,t.emit("prefinish")))}function uN(t,e,r){rp(e)&&(wSe(t,e),e.pendingcb===0&&(r?(e.pendingcb++,Xo.nextTick((n,i)=>{rp(i)?oN(n,i):i.pendingcb--},t,e)):rp(e)&&(e.pendingcb++,oN(t,e))))}function oN(t,e){e.pendingcb--,e.finished=!0;let r=e[Wl].splice(0);for(let n=0;n<r.length;n++)r[n]();if(t.emit("finish"),e.autoDestroy){let n=t._readableState;(!n||n.autoDestroy&&(n.endEmitted||n.readable===!1))&&t.destroy()}}dSe(pt.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(t){this._writableState&&(this._writableState.destroyed=t)}},writable:{__proto__:null,get(){let t=this._writableState;return!!t&&t.writable!==!1&&!t.destroyed&&!t.errored&&!t.ending&&!t.ended},set(t){this._writableState&&(this._writableState.writable=!!t)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let t=this._writableState;return t?!t.destroyed&&!t.ending&&t.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var LSe=ip.destroy;pt.prototype.destroy=function(t,e){let r=this._writableState;return!r.destroyed&&(r.bufferedIndex<r.buffered.length||r[Wl].length)&&Xo.nextTick(lN,r),LSe.call(this,t,e),this};pt.prototype._undestroy=ip.undestroy;pt.prototype._destroy=function(t,e){e(t)};pt.prototype[TSe.captureRejectionSymbol]=function(t){this.destroy(t)};var sN;function e$(){return sN===void 0&&(sN={}),sN}pt.fromWeb=function(t,e){return e$().newStreamWritableFromWritableStream(t,e)};pt.toWeb=function(t){return e$().newWritableStreamFromStreamWritable(t)}});var p$=O((tUe,T$)=>{var dN=je(),DSe=require("buffer"),{isReadable:PSe,isWritable:xSe,isIterable:r$,isNodeStream:MSe,isReadableNodeStream:n$,isWritableNodeStream:i$,isDuplexNodeStream:vSe,isReadableStream:s$,isWritableStream:o$}=di(),a$=zi(),{AbortError:E$,codes:{ERR_INVALID_ARG_TYPE:USe,ERR_INVALID_RETURN_VALUE:l$}}=wr(),{destroyer:$l}=Vo(),BSe=Ei(),h$=Td(),FSe=sp(),{createDeferredPromise:c$}=Wr(),u$=Kg(),d$=globalThis.Blob||DSe.Blob,GSe=typeof d$<"u"?function(e){return e instanceof d$}:function(e){return!1},HSe=globalThis.AbortController||wt().AbortController,{FunctionPrototypeCall:f$}=ut(),Fs=class extends BSe{constructor(e){super(e),e?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),e?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};T$.exports=function t(e,r){if(vSe(e))return e;if(n$(e))return kl({readable:e});if(i$(e))return kl({writable:e});if(MSe(e))return kl({writable:!1,readable:!1});if(s$(e))return kl({readable:h$.fromWeb(e)});if(o$(e))return kl({writable:FSe.fromWeb(e)});if(typeof e=="function"){let{value:i,write:s,final:o,destroy:a}=WSe(e);if(r$(i))return u$(Fs,i,{objectMode:!0,write:s,final:o,destroy:a});let l=i?.then;if(typeof l=="function"){let c,u=f$(l,i,d=>{if(d!=null)throw new l$("nully","body",d)},d=>{$l(c,d)});return c=new Fs({objectMode:!0,readable:!1,write:s,final(d){o(async()=>{try{await u,dN.nextTick(d,null)}catch(E){dN.nextTick(d,E)}})},destroy:a})}throw new l$("Iterable, AsyncIterable or AsyncFunction",r,i)}if(GSe(e))return t(e.arrayBuffer());if(r$(e))return u$(Fs,e,{objectMode:!0,writable:!1});if(s$(e?.readable)&&o$(e?.writable))return Fs.fromWeb(e);if(typeof e?.writable=="object"||typeof e?.readable=="object"){let i=e!=null&&e.readable?n$(e?.readable)?e?.readable:t(e.readable):void 0,s=e!=null&&e.writable?i$(e?.writable)?e?.writable:t(e.writable):void 0;return kl({readable:i,writable:s})}let n=e?.then;if(typeof n=="function"){let i;return f$(n,e,s=>{s!=null&&i.push(s),i.push(null)},s=>{$l(i,s)}),i=new Fs({objectMode:!0,writable:!1,read(){}})}throw new USe(r,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],e)};function WSe(t){let{promise:e,resolve:r}=c$(),n=new HSe,i=n.signal;return{value:t((async function*(){for(;;){let o=e;e=null;let{chunk:a,done:l,cb:c}=await o;if(dN.nextTick(c),l)return;if(i.aborted)throw new E$(void 0,{cause:i.reason});({promise:e,resolve:r}=c$()),yield a}})(),{signal:i}),write(o,a,l){let c=r;r=null,c({chunk:o,done:!1,cb:l})},final(o){let a=r;r=null,a({done:!0,cb:o})},destroy(o,a){n.abort(),a(o)}}}function kl(t){let e=t.readable&&typeof t.readable.read!="function"?h$.wrap(t.readable):t.readable,r=t.writable,n=!!PSe(e),i=!!xSe(r),s,o,a,l,c;function u(d){let E=l;l=null,E?E(d):d&&c.destroy(d)}return c=new Fs({readableObjectMode:!!(e!=null&&e.readableObjectMode),writableObjectMode:!!(r!=null&&r.writableObjectMode),readable:n,writable:i}),i&&(a$(r,d=>{i=!1,d&&$l(e,d),u(d)}),c._write=function(d,E,f){r.write(d,E)?f():s=f},c._final=function(d){r.end(),o=d},r.on("drain",function(){if(s){let d=s;s=null,d()}}),r.on("finish",function(){if(o){let d=o;o=null,d()}})),n&&(a$(e,d=>{n=!1,d&&$l(e,d),u(d)}),e.on("readable",function(){if(a){let d=a;a=null,d()}}),e.on("end",function(){c.push(null)}),c._read=function(){for(;;){let d=e.read();if(d===null){a=c._read;return}if(!c.push(d))return}}),c._destroy=function(d,E){!d&&l!==null&&(d=new E$),a=null,s=null,o=null,l===null?E(d):(l=E,$l(r,d),$l(e,d))},c}});var Ei=O((rUe,A$)=>{"use strict";var{ObjectDefineProperties:kSe,ObjectGetOwnPropertyDescriptor:Ki,ObjectKeys:$Se,ObjectSetPrototypeOf:S$}=ut();A$.exports=Un;var hN=Td(),mn=sp();S$(Un.prototype,hN.prototype);S$(Un,hN);{let t=$Se(mn.prototype);for(let e=0;e<t.length;e++){let r=t[e];Un.prototype[r]||(Un.prototype[r]=mn.prototype[r])}}function Un(t){if(!(this instanceof Un))return new Un(t);hN.call(this,t),mn.call(this,t),t?(this.allowHalfOpen=t.allowHalfOpen!==!1,t.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),t.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}kSe(Un.prototype,{writable:{__proto__:null,...Ki(mn.prototype,"writable")},writableHighWaterMark:{__proto__:null,...Ki(mn.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...Ki(mn.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...Ki(mn.prototype,"writableBuffer")},writableLength:{__proto__:null,...Ki(mn.prototype,"writableLength")},writableFinished:{__proto__:null,...Ki(mn.prototype,"writableFinished")},writableCorked:{__proto__:null,...Ki(mn.prototype,"writableCorked")},writableEnded:{__proto__:null,...Ki(mn.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...Ki(mn.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(t){this._readableState&&this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}});var fN;function R$(){return fN===void 0&&(fN={}),fN}Un.fromWeb=function(t,e){return R$().newStreamDuplexFromReadableWritablePair(t,e)};Un.toWeb=function(t){return R$().newReadableWritablePairFromDuplex(t)};var EN;Un.from=function(t){return EN||(EN=p$()),EN(t,"body")}});var SN=O((nUe,_$)=>{"use strict";var{ObjectSetPrototypeOf:m$,Symbol:YSe}=ut();_$.exports=Ji;var{ERR_METHOD_NOT_IMPLEMENTED:VSe}=wr().codes,pN=Ei(),{getHighWaterMark:qSe}=Ed();m$(Ji.prototype,pN.prototype);m$(Ji,pN);var Ad=YSe("kCallback");function Ji(t){if(!(this instanceof Ji))return new Ji(t);let e=t?qSe(this,t,"readableHighWaterMark",!0):null;e===0&&(t={...t,highWaterMark:null,readableHighWaterMark:e,writableHighWaterMark:t.writableHighWaterMark||0}),pN.call(this,t),this._readableState.sync=!1,this[Ad]=null,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",XSe)}function TN(t){typeof this._flush=="function"&&!this.destroyed?this._flush((e,r)=>{if(e){t?t(e):this.destroy(e);return}r!=null&&this.push(r),this.push(null),t&&t()}):(this.push(null),t&&t())}function XSe(){this._final!==TN&&TN.call(this)}Ji.prototype._final=TN;Ji.prototype._transform=function(t,e,r){throw new VSe("_transform()")};Ji.prototype._write=function(t,e,r){let n=this._readableState,i=this._writableState,s=n.length;this._transform(t,e,(o,a)=>{if(o){r(o);return}a!=null&&this.push(a),i.ended||s===n.length||n.length<n.highWaterMark?r():this[Ad]=r})};Ji.prototype._read=function(){if(this[Ad]){let t=this[Ad];this[Ad]=null,t()}}});var AN=O((iUe,g$)=>{"use strict";var{ObjectSetPrototypeOf:I$}=ut();g$.exports=Yl;var RN=SN();I$(Yl.prototype,RN.prototype);I$(Yl,RN);function Yl(t){if(!(this instanceof Yl))return new Yl(t);RN.call(this,t)}Yl.prototype._transform=function(t,e,r){r(null,t)}});var cp=O((sUe,b$)=>{var md=je(),{ArrayIsArray:jSe,Promise:zSe,SymbolAsyncIterator:KSe,SymbolDispose:JSe}=ut(),lp=zi(),{once:QSe}=Wr(),ZSe=Vo(),N$=Ei(),{aggregateTwoErrors:eRe,codes:{ERR_INVALID_ARG_TYPE:bN,ERR_INVALID_RETURN_VALUE:mN,ERR_MISSING_ARGS:tRe,ERR_STREAM_DESTROYED:rRe,ERR_STREAM_PREMATURE_CLOSE:nRe},AbortError:iRe}=wr(),{validateFunction:sRe,validateAbortSignal:oRe}=vl(),{isIterable:jo,isReadable:_N,isReadableNodeStream:ap,isNodeStream:O$,isTransformStream:Vl,isWebStream:aRe,isReadableStream:IN,isReadableFinished:lRe}=di(),cRe=globalThis.AbortController||wt().AbortController,gN,NN,ON;function C$(t,e,r){let n=!1;t.on("close",()=>{n=!0});let i=lp(t,{readable:e,writable:r},s=>{n=!s});return{destroy:s=>{n||(n=!0,ZSe.destroyer(t,s||new rRe("pipe")))},cleanup:i}}function uRe(t){return sRe(t[t.length-1],"streams[stream.length - 1]"),t.pop()}function CN(t){if(jo(t))return t;if(ap(t))return dRe(t);throw new bN("val",["Readable","Iterable","AsyncIterable"],t)}async function*dRe(t){NN||(NN=Td()),yield*NN.prototype[KSe].call(t)}async function op(t,e,r,{end:n}){let i,s=null,o=c=>{if(c&&(i=c),s){let u=s;s=null,u()}},a=()=>new zSe((c,u)=>{i?u(i):s=()=>{i?u(i):c()}});e.on("drain",o);let l=lp(e,{readable:!1},o);try{e.writableNeedDrain&&await a();for await(let c of t)e.write(c)||await a();n&&(e.end(),await a()),r()}catch(c){r(i!==c?eRe(i,c):c)}finally{l(),e.off("drain",o)}}async function yN(t,e,r,{end:n}){Vl(e)&&(e=e.writable);let i=e.getWriter();try{for await(let s of t)await i.ready,i.write(s).catch(()=>{});await i.ready,n&&await i.close(),r()}catch(s){try{await i.abort(s),r(s)}catch(o){r(o)}}}function fRe(...t){return y$(t,QSe(uRe(t)))}function y$(t,e,r){if(t.length===1&&jSe(t[0])&&(t=t[0]),t.length<2)throw new tRe("streams");let n=new cRe,i=n.signal,s=r?.signal,o=[];oRe(s,"options.signal");function a(){T(new iRe)}ON=ON||Wr().addAbortListener;let l;s&&(l=ON(s,a));let c,u,d=[],E=0;function f(R){T(R,--E===0)}function T(R,A){var g;if(R&&(!c||c.code==="ERR_STREAM_PREMATURE_CLOSE")&&(c=R),!(!c&&!A)){for(;d.length;)d.shift()(c);(g=l)===null||g===void 0||g[JSe](),n.abort(),A&&(c||o.forEach(w=>w()),md.nextTick(e,c,u))}}let h;for(let R=0;R<t.length;R++){let A=t[R],g=R<t.length-1,w=R>0,I=g||r?.end!==!1,D=R===t.length-1;if(O$(A)){let b=function(P){P&&P.name!=="AbortError"&&P.code!=="ERR_STREAM_PREMATURE_CLOSE"&&f(P)};var m=b;if(I){let{destroy:P,cleanup:M}=C$(A,g,w);d.push(P),_N(A)&&D&&o.push(M)}A.on("error",b),_N(A)&&D&&o.push(()=>{A.removeListener("error",b)})}if(R===0)if(typeof A=="function"){if(h=A({signal:i}),!jo(h))throw new mN("Iterable, AsyncIterable or Stream","source",h)}else jo(A)||ap(A)||Vl(A)?h=A:h=N$.from(A);else if(typeof A=="function"){if(Vl(h)){var p;h=CN((p=h)===null||p===void 0?void 0:p.readable)}else h=CN(h);if(h=A(h,{signal:i}),g){if(!jo(h,!0))throw new mN("AsyncIterable",`transform[${R-1}]`,h)}else{var S;gN||(gN=AN());let b=new gN({objectMode:!0}),P=(S=h)===null||S===void 0?void 0:S.then;if(typeof P=="function")E++,P.call(h,G=>{u=G,G!=null&&b.write(G),I&&b.end(),md.nextTick(f)},G=>{b.destroy(G),md.nextTick(f,G)});else if(jo(h,!0))E++,op(h,b,f,{end:I});else if(IN(h)||Vl(h)){let G=h.readable||h;E++,op(G,b,f,{end:I})}else throw new mN("AsyncIterable or Promise","destination",h);h=b;let{destroy:M,cleanup:B}=C$(h,!1,!0);d.push(M),D&&o.push(B)}}else if(O$(A)){if(ap(h)){E+=2;let b=ERe(h,A,f,{end:I});_N(A)&&D&&o.push(b)}else if(Vl(h)||IN(h)){let b=h.readable||h;E++,op(b,A,f,{end:I})}else if(jo(h))E++,op(h,A,f,{end:I});else throw new bN("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],h);h=A}else if(aRe(A)){if(ap(h))E++,yN(CN(h),A,f,{end:I});else if(IN(h)||jo(h))E++,yN(h,A,f,{end:I});else if(Vl(h))E++,yN(h.readable,A,f,{end:I});else throw new bN("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],h);h=A}else h=N$.from(A)}return(i!=null&&i.aborted||s!=null&&s.aborted)&&md.nextTick(a),h}function ERe(t,e,r,{end:n}){let i=!1;if(e.on("close",()=>{i||r(new nRe)}),t.pipe(e,{end:!1}),n){let o=function(){i=!0,e.end()};var s=o;lRe(t)?md.nextTick(o):t.once("end",o)}else r();return lp(t,{readable:!0,writable:!1},o=>{let a=t._readableState;o&&o.code==="ERR_STREAM_PREMATURE_CLOSE"&&a&&a.ended&&!a.errored&&!a.errorEmitted?t.once("end",r).once("error",r):r(o)}),lp(e,{readable:!1,writable:!0},r)}b$.exports={pipelineImpl:y$,pipeline:fRe}});var LN=O((oUe,M$)=>{"use strict";var{pipeline:hRe}=cp(),up=Ei(),{destroyer:TRe}=Vo(),{isNodeStream:dp,isReadable:w$,isWritable:L$,isWebStream:wN,isTransformStream:zo,isWritableStream:D$,isReadableStream:P$}=di(),{AbortError:pRe,codes:{ERR_INVALID_ARG_VALUE:x$,ERR_MISSING_ARGS:SRe}}=wr(),RRe=zi();M$.exports=function(...e){if(e.length===0)throw new SRe("streams");if(e.length===1)return up.from(e[0]);let r=[...e];if(typeof e[0]=="function"&&(e[0]=up.from(e[0])),typeof e[e.length-1]=="function"){let f=e.length-1;e[f]=up.from(e[f])}for(let f=0;f<e.length;++f)if(!(!dp(e[f])&&!wN(e[f]))){if(f<e.length-1&&!(w$(e[f])||P$(e[f])||zo(e[f])))throw new x$(`streams[${f}]`,r[f],"must be readable");if(f>0&&!(L$(e[f])||D$(e[f])||zo(e[f])))throw new x$(`streams[${f}]`,r[f],"must be writable")}let n,i,s,o,a;function l(f){let T=o;o=null,T?T(f):f?a.destroy(f):!E&&!d&&a.destroy()}let c=e[0],u=hRe(e,l),d=!!(L$(c)||D$(c)||zo(c)),E=!!(w$(u)||P$(u)||zo(u));if(a=new up({writableObjectMode:!!(c!=null&&c.writableObjectMode),readableObjectMode:!!(u!=null&&u.readableObjectMode),writable:d,readable:E}),d){if(dp(c))a._write=function(T,h,p){c.write(T,h)?p():n=p},a._final=function(T){c.end(),i=T},c.on("drain",function(){if(n){let T=n;n=null,T()}});else if(wN(c)){let h=(zo(c)?c.writable:c).getWriter();a._write=async function(p,S,m){try{await h.ready,h.write(p).catch(()=>{}),m()}catch(R){m(R)}},a._final=async function(p){try{await h.ready,h.close().catch(()=>{}),i=p}catch(S){p(S)}}}let f=zo(u)?u.readable:u;RRe(f,()=>{if(i){let T=i;i=null,T()}})}if(E){if(dp(u))u.on("readable",function(){if(s){let f=s;s=null,f()}}),u.on("end",function(){a.push(null)}),a._read=function(){for(;;){let f=u.read();if(f===null){s=a._read;return}if(!a.push(f))return}};else if(wN(u)){let T=(zo(u)?u.readable:u).getReader();a._read=async function(){for(;;)try{let{value:h,done:p}=await T.read();if(!a.push(h))return;if(p){a.push(null);return}}catch{return}}}}return a._destroy=function(f,T){!f&&o!==null&&(f=new pRe),s=null,n=null,i=null,o===null?T(f):(o=T,dp(u)&&TRe(u,f))},a}});var Y$=O((aUe,xN)=>{"use strict";var ARe=globalThis.AbortController||wt().AbortController,{codes:{ERR_INVALID_ARG_VALUE:mRe,ERR_INVALID_ARG_TYPE:_d,ERR_MISSING_ARGS:_Re,ERR_OUT_OF_RANGE:IRe},AbortError:hi}=wr(),{validateAbortSignal:Ko,validateInteger:v$,validateObject:Jo}=vl(),gRe=ut().Symbol("kWeak"),NRe=ut().Symbol("kResistStopPropagation"),{finished:ORe}=zi(),CRe=LN(),{addAbortSignalNoValidate:yRe}=fd(),{isWritable:bRe,isNodeStream:wRe}=di(),{deprecate:LRe}=Wr(),{ArrayPrototypePush:DRe,Boolean:PRe,MathFloor:U$,Number:xRe,NumberIsNaN:MRe,Promise:B$,PromiseReject:F$,PromiseResolve:vRe,PromisePrototypeThen:G$,Symbol:W$}=ut(),fp=W$("kEmpty"),H$=W$("kEof");function URe(t,e){if(e!=null&&Jo(e,"options"),e?.signal!=null&&Ko(e.signal,"options.signal"),wRe(t)&&!bRe(t))throw new mRe("stream",t,"must be writable");let r=CRe(this,t);return e!=null&&e.signal&&yRe(e.signal,r),r}function Ep(t,e){if(typeof t!="function")throw new _d("fn",["Function","AsyncFunction"],t);e!=null&&Jo(e,"options"),e?.signal!=null&&Ko(e.signal,"options.signal");let r=1;e?.concurrency!=null&&(r=U$(e.concurrency));let n=r-1;return e?.highWaterMark!=null&&(n=U$(e.highWaterMark)),v$(r,"options.concurrency",1),v$(n,"options.highWaterMark",0),n+=r,async function*(){let s=Wr().AbortSignalAny([e?.signal].filter(PRe)),o=this,a=[],l={signal:s},c,u,d=!1,E=0;function f(){d=!0,T()}function T(){E-=1,h()}function h(){u&&!d&&E<r&&a.length<n&&(u(),u=null)}async function p(){try{for await(let S of o){if(d)return;if(s.aborted)throw new hi;try{if(S=t(S,l),S===fp)continue;S=vRe(S)}catch(m){S=F$(m)}E+=1,G$(S,T,f),a.push(S),c&&(c(),c=null),!d&&(a.length>=n||E>=r)&&await new B$(m=>{u=m})}a.push(H$)}catch(S){let m=F$(S);G$(m,T,f),a.push(m)}finally{d=!0,c&&(c(),c=null)}}p();try{for(;;){for(;a.length>0;){let S=await a[0];if(S===H$)return;if(s.aborted)throw new hi;S!==fp&&(yield S),a.shift(),h()}await new B$(S=>{c=S})}}finally{d=!0,u&&(u(),u=null)}}.call(this)}function BRe(t=void 0){return t!=null&&Jo(t,"options"),t?.signal!=null&&Ko(t.signal,"options.signal"),async function*(){let r=0;for await(let i of this){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new hi({cause:t.signal.reason});yield[r++,i]}}.call(this)}async function k$(t,e=void 0){for await(let r of PN.call(this,t,e))return!0;return!1}async function FRe(t,e=void 0){if(typeof t!="function")throw new _d("fn",["Function","AsyncFunction"],t);return!await k$.call(this,async(...r)=>!await t(...r),e)}async function GRe(t,e){for await(let r of PN.call(this,t,e))return r}async function HRe(t,e){if(typeof t!="function")throw new _d("fn",["Function","AsyncFunction"],t);async function r(n,i){return await t(n,i),fp}for await(let n of Ep.call(this,r,e));}function PN(t,e){if(typeof t!="function")throw new _d("fn",["Function","AsyncFunction"],t);async function r(n,i){return await t(n,i)?n:fp}return Ep.call(this,r,e)}var DN=class extends _Re{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function WRe(t,e,r){var n;if(typeof t!="function")throw new _d("reducer",["Function","AsyncFunction"],t);r!=null&&Jo(r,"options"),r?.signal!=null&&Ko(r.signal,"options.signal");let i=arguments.length>1;if(r!=null&&(n=r.signal)!==null&&n!==void 0&&n.aborted){let c=new hi(void 0,{cause:r.signal.reason});throw this.once("error",()=>{}),await ORe(this.destroy(c)),c}let s=new ARe,o=s.signal;if(r!=null&&r.signal){let c={once:!0,[gRe]:this,[NRe]:!0};r.signal.addEventListener("abort",()=>s.abort(),c)}let a=!1;try{for await(let c of this){var l;if(a=!0,r!=null&&(l=r.signal)!==null&&l!==void 0&&l.aborted)throw new hi;i?e=await t(e,c,{signal:o}):(e=c,i=!0)}if(!a&&!i)throw new DN}finally{s.abort()}return e}async function kRe(t){t!=null&&Jo(t,"options"),t?.signal!=null&&Ko(t.signal,"options.signal");let e=[];for await(let n of this){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new hi(void 0,{cause:t.signal.reason});DRe(e,n)}return e}function $Re(t,e){let r=Ep.call(this,t,e);return async function*(){for await(let i of r)yield*i}.call(this)}function $$(t){if(t=xRe(t),MRe(t))return 0;if(t<0)throw new IRe("number",">= 0",t);return t}function YRe(t,e=void 0){return e!=null&&Jo(e,"options"),e?.signal!=null&&Ko(e.signal,"options.signal"),t=$$(t),async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new hi;for await(let s of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new hi;t--<=0&&(yield s)}}.call(this)}function VRe(t,e=void 0){return e!=null&&Jo(e,"options"),e?.signal!=null&&Ko(e.signal,"options.signal"),t=$$(t),async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new hi;for await(let s of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new hi;if(t-- >0&&(yield s),t<=0)return}}.call(this)}xN.exports.streamReturningOperators={asIndexedPairs:LRe(BRe,"readable.asIndexedPairs will be removed in a future version."),drop:YRe,filter:PN,flatMap:$Re,map:Ep,take:VRe,compose:URe};xN.exports.promiseReturningOperators={every:FRe,forEach:HRe,reduce:WRe,toArray:kRe,some:k$,find:GRe}});var MN=O((lUe,V$)=>{"use strict";var{ArrayPrototypePop:qRe,Promise:XRe}=ut(),{isIterable:jRe,isNodeStream:zRe,isWebStream:KRe}=di(),{pipelineImpl:JRe}=cp(),{finished:QRe}=zi();vN();function ZRe(...t){return new XRe((e,r)=>{let n,i,s=t[t.length-1];if(s&&typeof s=="object"&&!zRe(s)&&!jRe(s)&&!KRe(s)){let o=qRe(t);n=o.signal,i=o.end}JRe(t,(o,a)=>{o?r(o):e(a)},{signal:n,end:i})})}V$.exports={finished:QRe,pipeline:ZRe}});var vN=O((cUe,eY)=>{"use strict";var{Buffer:eAe}=require("buffer"),{ObjectDefineProperty:Qi,ObjectKeys:j$,ReflectApply:z$}=ut(),{promisify:{custom:K$}}=Wr(),{streamReturningOperators:q$,promiseReturningOperators:X$}=Y$(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:J$}}=wr(),tAe=LN(),{setDefaultHighWaterMark:rAe,getDefaultHighWaterMark:nAe}=Ed(),{pipeline:Q$}=cp(),{destroyer:iAe}=Vo(),Z$=zi(),UN=MN(),Id=di(),st=eY.exports=XT().Stream;st.isDestroyed=Id.isDestroyed;st.isDisturbed=Id.isDisturbed;st.isErrored=Id.isErrored;st.isReadable=Id.isReadable;st.isWritable=Id.isWritable;st.Readable=Td();for(let t of j$(q$)){let r=function(...n){if(new.target)throw J$();return st.Readable.from(z$(e,this,n))},e=q$[t];Qi(r,"name",{__proto__:null,value:e.name}),Qi(r,"length",{__proto__:null,value:e.length}),Qi(st.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}for(let t of j$(X$)){let r=function(...n){if(new.target)throw J$();return z$(e,this,n)},e=X$[t];Qi(r,"name",{__proto__:null,value:e.name}),Qi(r,"length",{__proto__:null,value:e.length}),Qi(st.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}st.Writable=sp();st.Duplex=Ei();st.Transform=SN();st.PassThrough=AN();st.pipeline=Q$;var{addAbortSignal:sAe}=fd();st.addAbortSignal=sAe;st.finished=Z$;st.destroy=iAe;st.compose=tAe;st.setDefaultHighWaterMark=rAe;st.getDefaultHighWaterMark=nAe;Qi(st,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return UN}});Qi(Q$,K$,{__proto__:null,enumerable:!0,get(){return UN.pipeline}});Qi(Z$,K$,{__proto__:null,enumerable:!0,get(){return UN.finished}});st.Stream=st;st._isUint8Array=function(e){return e instanceof Uint8Array};st._uint8ArrayToBuffer=function(e){return eAe.from(e.buffer,e.byteOffset,e.byteLength)}});var BN=O((uUe,ye)=>{"use strict";var $t=require("stream");if($t&&process.env.READABLE_STREAM==="disable"){let t=$t.promises;ye.exports._uint8ArrayToBuffer=$t._uint8ArrayToBuffer,ye.exports._isUint8Array=$t._isUint8Array,ye.exports.isDisturbed=$t.isDisturbed,ye.exports.isErrored=$t.isErrored,ye.exports.isReadable=$t.isReadable,ye.exports.Readable=$t.Readable,ye.exports.Writable=$t.Writable,ye.exports.Duplex=$t.Duplex,ye.exports.Transform=$t.Transform,ye.exports.PassThrough=$t.PassThrough,ye.exports.addAbortSignal=$t.addAbortSignal,ye.exports.finished=$t.finished,ye.exports.destroy=$t.destroy,ye.exports.pipeline=$t.pipeline,ye.exports.compose=$t.compose,Object.defineProperty($t,"promises",{configurable:!0,enumerable:!0,get(){return t}}),ye.exports.Stream=$t.Stream}else{let t=vN(),e=MN(),r=t.Readable.destroy;ye.exports=t.Readable,ye.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,ye.exports._isUint8Array=t._isUint8Array,ye.exports.isDisturbed=t.isDisturbed,ye.exports.isErrored=t.isErrored,ye.exports.isReadable=t.isReadable,ye.exports.Readable=t.Readable,ye.exports.Writable=t.Writable,ye.exports.Duplex=t.Duplex,ye.exports.Transform=t.Transform,ye.exports.PassThrough=t.PassThrough,ye.exports.addAbortSignal=t.addAbortSignal,ye.exports.finished=t.finished,ye.exports.destroy=t.destroy,ye.exports.destroy=r,ye.exports.pipeline=t.pipeline,ye.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return e}}),ye.exports.Stream=t.Stream}ye.exports.default=ye.exports});var FN=O((fUe,tY)=>{var dUe=require("stream").Stream,oAe=BN().PassThrough,aAe=_E(),lAe=tY.exports={};lAe.normalizeInputSource=function(t){if(t===null)return Buffer.alloc(0);if(typeof t=="string")return Buffer.from(t);if(aAe(t)&&!t._readableState){var e=new oAe;return t.pipe(e),e}return t}});var HN=O((EUe,rY)=>{var cAe=require("util").inherits,uAe=_E(),GN=BN().Transform,dAe=BT(),fAe=FN(),en=rY.exports=function(t){if(!(this instanceof en))return new en(t);GN.call(this,t),this.offset=0,this._archive={finish:!1,finished:!1,processing:!1}};cAe(en,GN);en.prototype._appendBuffer=function(t,e,r){};en.prototype._appendStream=function(t,e,r){};en.prototype._emitErrorCallback=function(t){t&&this.emit("error",t)};en.prototype._finish=function(t){};en.prototype._normalizeEntry=function(t){};en.prototype._transform=function(t,e,r){r(null,t)};en.prototype.entry=function(t,e,r){if(e=e||null,typeof r!="function"&&(r=this._emitErrorCallback.bind(this)),!(t instanceof dAe)){r(new Error("not a valid instance of ArchiveEntry"));return}if(this._archive.finish||this._archive.finished){r(new Error("unacceptable entry after finish"));return}if(this._archive.processing){r(new Error("already processing an entry"));return}if(this._archive.processing=!0,this._normalizeEntry(t),this._entry=t,e=fAe.normalizeInputSource(e),Buffer.isBuffer(e))this._appendBuffer(t,e,r);else if(uAe(e))this._appendStream(t,e,r);else{this._archive.processing=!1,r(new Error("input source must be valid Stream or Buffer instance"));return}return this};en.prototype.finish=function(){if(this._archive.processing){this._archive.finish=!0;return}this._finish()};en.prototype.getBytesWritten=function(){return this.offset};en.prototype.write=function(t,e){return t&&(this.offset+=t.length),GN.prototype.write.call(this,t,e)}});var hp=O(WN=>{var nY;(function(t){typeof DO_NOT_EXPORT_CRC>"u"?typeof WN=="object"?t(WN):typeof define=="function"&&define.amd?define(function(){var e={};return t(e),e}):t(nY={}):t(nY={})})(function(t){t.version="1.2.2";function e(){for(var I=0,D=new Array(256),b=0;b!=256;++b)I=b,I=I&1?-306674912^I>>>1:I>>>1,I=I&1?-306674912^I>>>1:I>>>1,I=I&1?-306674912^I>>>1:I>>>1,I=I&1?-306674912^I>>>1:I>>>1,I=I&1?-306674912^I>>>1:I>>>1,I=I&1?-306674912^I>>>1:I>>>1,I=I&1?-306674912^I>>>1:I>>>1,I=I&1?-306674912^I>>>1:I>>>1,D[b]=I;return typeof Int32Array<"u"?new Int32Array(D):D}var r=e();function n(I){var D=0,b=0,P=0,M=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(P=0;P!=256;++P)M[P]=I[P];for(P=0;P!=256;++P)for(b=I[P],D=256+P;D<4096;D+=256)b=M[D]=b>>>8^I[b&255];var B=[];for(P=1;P!=16;++P)B[P-1]=typeof Int32Array<"u"?M.subarray(P*256,P*256+256):M.slice(P*256,P*256+256);return B}var i=n(r),s=i[0],o=i[1],a=i[2],l=i[3],c=i[4],u=i[5],d=i[6],E=i[7],f=i[8],T=i[9],h=i[10],p=i[11],S=i[12],m=i[13],R=i[14];function A(I,D){for(var b=D^-1,P=0,M=I.length;P<M;)b=b>>>8^r[(b^I.charCodeAt(P++))&255];return~b}function g(I,D){for(var b=D^-1,P=I.length-15,M=0;M<P;)b=R[I[M++]^b&255]^m[I[M++]^b>>8&255]^S[I[M++]^b>>16&255]^p[I[M++]^b>>>24]^h[I[M++]]^T[I[M++]]^f[I[M++]]^E[I[M++]]^d[I[M++]]^u[I[M++]]^c[I[M++]]^l[I[M++]]^a[I[M++]]^o[I[M++]]^s[I[M++]]^r[I[M++]];for(P+=15;M<P;)b=b>>>8^r[(b^I[M++])&255];return~b}function w(I,D){for(var b=D^-1,P=0,M=I.length,B=0,G=0;P<M;)B=I.charCodeAt(P++),B<128?b=b>>>8^r[(b^B)&255]:B<2048?(b=b>>>8^r[(b^(192|B>>6&31))&255],b=b>>>8^r[(b^(128|B&63))&255]):B>=55296&&B<57344?(B=(B&1023)+64,G=I.charCodeAt(P++)&1023,b=b>>>8^r[(b^(240|B>>8&7))&255],b=b>>>8^r[(b^(128|B>>2&63))&255],b=b>>>8^r[(b^(128|G>>6&15|(B&3)<<4))&255],b=b>>>8^r[(b^(128|G&63))&255]):(b=b>>>8^r[(b^(224|B>>12&15))&255],b=b>>>8^r[(b^(128|B>>6&63))&255],b=b>>>8^r[(b^(128|B&63))&255]);return~b}t.table=r,t.bstr=A,t.buf=g,t.str=w})});var dt=O((TUe,iY)=>{"use strict";var kN=class extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError(`Expected input to be an Array, got ${typeof e}`);let r="";for(let n=0;n<e.length;n++)r+=`    ${e[n].stack}
`;super(r),this.name="AggregateError",this.errors=e}};iY.exports={AggregateError:kN,ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,e){return t.includes(e)},ArrayPrototypeIndexOf(t,e){return t.indexOf(e)},ArrayPrototypeJoin(t,e){return t.join(e)},ArrayPrototypeMap(t,e){return t.map(e)},ArrayPrototypePop(t,e){return t.pop(e)},ArrayPrototypePush(t,e){return t.push(e)},ArrayPrototypeSlice(t,e,r){return t.slice(e,r)},Error,FunctionPrototypeCall(t,e,...r){return t.call(e,...r)},FunctionPrototypeSymbolHasInstance(t,e){return Function.prototype[Symbol.hasInstance].call(t,e)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,e){return Object.defineProperties(t,e)},ObjectDefineProperty(t,e,r){return Object.defineProperty(t,e,r)},ObjectGetOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,e){return Object.setPrototypeOf(t,e)},Promise,PromisePrototypeCatch(t,e){return t.catch(e)},PromisePrototypeThen(t,e,r){return t.then(e,r)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,e){return t.test(e)},SafeSet:Set,String,StringPrototypeSlice(t,e,r){return t.slice(e,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,e,r){return t.set(e,r)},Boolean,Uint8Array}});var $N=O((pUe,sY)=>{"use strict";sY.exports={format(t,...e){return t.replace(/%([sdifj])/g,function(...[r,n]){let i=e.shift();return n==="f"?i.toFixed(6):n==="j"?JSON.stringify(i):n==="s"&&typeof i=="object"?`${i.constructor!==Object?i.constructor.name:""} {}`.trim():i.toString()})},inspect(t){switch(typeof t){case"string":if(t.includes("'"))if(t.includes('"')){if(!t.includes("`")&&!t.includes("${"))return`\`${t}\``}else return`"${t}"`;return`'${t}'`;case"number":return isNaN(t)?"NaN":Object.is(t,-0)?String(t):t;case"bigint":return`${String(t)}n`;case"boolean":case"undefined":return String(t);case"object":return"{}"}}}});var Dr=O((SUe,lY)=>{"use strict";var{format:EAe,inspect:Tp}=$N(),{AggregateError:hAe}=dt(),TAe=globalThis.AggregateError||hAe,pAe=Symbol("kIsNodeError"),SAe=["string","function","number","object","Function","Object","boolean","bigint","symbol"],RAe=/^([A-Z][a-z0-9]*)+$/,AAe="__node_internal_",pp={};function Qo(t,e){if(!t)throw new pp.ERR_INTERNAL_ASSERTION(e)}function oY(t){let e="",r=t.length,n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function mAe(t,e,r){if(typeof e=="function")return Qo(e.length<=r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${e.length}).`),e(...r);let n=(e.match(/%[dfijoOs]/g)||[]).length;return Qo(n===r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${n}).`),r.length===0?e:EAe(e,...r)}function Rr(t,e,r){r||(r=Error);class n extends r{constructor(...s){super(mAe(t,e,s))}toString(){return`${this.name} [${t}]: ${this.message}`}}Object.defineProperties(n.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${t}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),n.prototype.code=t,n.prototype[pAe]=!0,pp[t]=n}function aY(t){let e=AAe+t.name;return Object.defineProperty(t,"name",{value:e}),t}function _Ae(t,e){if(t&&e&&t!==e){if(Array.isArray(e.errors))return e.errors.push(t),e;let r=new TAe([e,t],e.message);return r.code=e.code,r}return t||e}var YN=class extends Error{constructor(e="The operation was aborted",r=void 0){if(r!==void 0&&typeof r!="object")throw new pp.ERR_INVALID_ARG_TYPE("options","Object",r);super(e,r),this.code="ABORT_ERR",this.name="AbortError"}};Rr("ERR_ASSERTION","%s",Error);Rr("ERR_INVALID_ARG_TYPE",(t,e,r)=>{Qo(typeof t=="string","'name' must be a string"),Array.isArray(e)||(e=[e]);let n="The ";t.endsWith(" argument")?n+=`${t} `:n+=`"${t}" ${t.includes(".")?"property":"argument"} `,n+="must be ";let i=[],s=[],o=[];for(let l of e)Qo(typeof l=="string","All expected entries have to be of type string"),SAe.includes(l)?i.push(l.toLowerCase()):RAe.test(l)?s.push(l):(Qo(l!=="object",'The value "object" should be written as "Object"'),o.push(l));if(s.length>0){let l=i.indexOf("object");l!==-1&&(i.splice(i,l,1),s.push("Object"))}if(i.length>0){switch(i.length){case 1:n+=`of type ${i[0]}`;break;case 2:n+=`one of type ${i[0]} or ${i[1]}`;break;default:{let l=i.pop();n+=`one of type ${i.join(", ")}, or ${l}`}}(s.length>0||o.length>0)&&(n+=" or ")}if(s.length>0){switch(s.length){case 1:n+=`an instance of ${s[0]}`;break;case 2:n+=`an instance of ${s[0]} or ${s[1]}`;break;default:{let l=s.pop();n+=`an instance of ${s.join(", ")}, or ${l}`}}o.length>0&&(n+=" or ")}switch(o.length){case 0:break;case 1:o[0].toLowerCase()!==o[0]&&(n+="an "),n+=`${o[0]}`;break;case 2:n+=`one of ${o[0]} or ${o[1]}`;break;default:{let l=o.pop();n+=`one of ${o.join(", ")}, or ${l}`}}if(r==null)n+=`. Received ${r}`;else if(typeof r=="function"&&r.name)n+=`. Received function ${r.name}`;else if(typeof r=="object"){var a;if((a=r.constructor)!==null&&a!==void 0&&a.name)n+=`. Received an instance of ${r.constructor.name}`;else{let l=Tp(r,{depth:-1});n+=`. Received ${l}`}}else{let l=Tp(r,{colors:!1});l.length>25&&(l=`${l.slice(0,25)}...`),n+=`. Received type ${typeof r} (${l})`}return n},TypeError);Rr("ERR_INVALID_ARG_VALUE",(t,e,r="is invalid")=>{let n=Tp(e);return n.length>128&&(n=n.slice(0,128)+"..."),`The ${t.includes(".")?"property":"argument"} '${t}' ${r}. Received ${n}`},TypeError);Rr("ERR_INVALID_RETURN_VALUE",(t,e,r)=>{var n;let i=r!=null&&(n=r.constructor)!==null&&n!==void 0&&n.name?`instance of ${r.constructor.name}`:`type ${typeof r}`;return`Expected ${t} to be returned from the "${e}" function but got ${i}.`},TypeError);Rr("ERR_MISSING_ARGS",(...t)=>{Qo(t.length>0,"At least one arg needs to be specified");let e,r=t.length;switch(t=(Array.isArray(t)?t:[t]).map(n=>`"${n}"`).join(" or "),r){case 1:e+=`The ${t[0]} argument`;break;case 2:e+=`The ${t[0]} and ${t[1]} arguments`;break;default:{let n=t.pop();e+=`The ${t.join(", ")}, and ${n} arguments`}break}return`${e} must be specified`},TypeError);Rr("ERR_OUT_OF_RANGE",(t,e,r)=>{Qo(e,'Missing "range" argument');let n;if(Number.isInteger(r)&&Math.abs(r)>2**32)n=oY(String(r));else if(typeof r=="bigint"){n=String(r);let i=BigInt(2)**BigInt(32);(r>i||r<-i)&&(n=oY(n)),n+="n"}else n=Tp(r);return`The value of "${t}" is out of range. It must be ${e}. Received ${n}`},RangeError);Rr("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);Rr("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);Rr("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);Rr("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);Rr("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);Rr("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Rr("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);Rr("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);Rr("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);Rr("ERR_STREAM_WRITE_AFTER_END","write after end",Error);Rr("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);lY.exports={AbortError:YN,aggregateTwoErrors:aY(_Ae),hideStackFrames:aY,codes:pp}});var kr=O((RUe,qN)=>{"use strict";var IAe=require("buffer"),{format:gAe,inspect:NAe}=$N(),{codes:{ERR_INVALID_ARG_TYPE:VN}}=Dr(),{kResistStopPropagation:OAe,AggregateError:CAe,SymbolDispose:yAe}=dt(),bAe=globalThis.AbortSignal||wt().AbortSignal,wAe=globalThis.AbortController||wt().AbortController,LAe=Object.getPrototypeOf(async function(){}).constructor,cY=globalThis.Blob||IAe.Blob,DAe=typeof cY<"u"?function(e){return e instanceof cY}:function(e){return!1},uY=(t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new VN(e,"AbortSignal",t)},PAe=(t,e)=>{if(typeof t!="function")throw new VN(e,"Function",t)};qN.exports={AggregateError:CAe,kEmptyObject:Object.freeze({}),once(t){let e=!1;return function(...r){e||(e=!0,t.apply(this,r))}},createDeferredPromise:function(){let t,e;return{promise:new Promise((n,i)=>{t=n,e=i}),resolve:t,reject:e}},promisify(t){return new Promise((e,r)=>{t((n,...i)=>n?r(n):e(...i))})},debuglog(){return function(){}},format:gAe,inspect:NAe,types:{isAsyncFunction(t){return t instanceof LAe},isArrayBufferView(t){return ArrayBuffer.isView(t)}},isBlob:DAe,deprecate(t,e){return t},addAbortListener:require("events").addAbortListener||function(e,r){if(e===void 0)throw new VN("signal","AbortSignal",e);uY(e,"signal"),PAe(r,"listener");let n;return e.aborted?queueMicrotask(()=>r()):(e.addEventListener("abort",r,{__proto__:null,once:!0,[OAe]:!0}),n=()=>{e.removeEventListener("abort",r)}),{__proto__:null,[yAe](){var i;(i=n)===null||i===void 0||i()}}},AbortSignalAny:bAe.any||function(e){if(e.length===1)return e[0];let r=new wAe,n=()=>r.abort();return e.forEach(i=>{uY(i,"signals"),i.addEventListener("abort",n,{once:!0})}),r.signal.addEventListener("abort",()=>{e.forEach(i=>i.removeEventListener("abort",n))},{once:!0}),r.signal}};qN.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")});var Xl=O((AUe,mY)=>{"use strict";var{ArrayIsArray:jN,ArrayPrototypeIncludes:hY,ArrayPrototypeJoin:TY,ArrayPrototypeMap:xAe,NumberIsInteger:zN,NumberIsNaN:MAe,NumberMAX_SAFE_INTEGER:vAe,NumberMIN_SAFE_INTEGER:UAe,NumberParseInt:BAe,ObjectPrototypeHasOwnProperty:FAe,RegExpPrototypeExec:pY,String:GAe,StringPrototypeToUpperCase:HAe,StringPrototypeTrim:WAe}=dt(),{hideStackFrames:_n,codes:{ERR_SOCKET_BAD_PORT:kAe,ERR_INVALID_ARG_TYPE:Pr,ERR_INVALID_ARG_VALUE:ql,ERR_OUT_OF_RANGE:Zo,ERR_UNKNOWN_SIGNAL:dY}}=Dr(),{normalizeEncoding:$Ae}=kr(),{isAsyncFunction:YAe,isArrayBufferView:VAe}=kr().types,fY={};function qAe(t){return t===(t|0)}function XAe(t){return t===t>>>0}var jAe=/^[0-7]+$/,zAe="must be a 32-bit unsigned integer or an octal string";function KAe(t,e,r){if(typeof t>"u"&&(t=r),typeof t=="string"){if(pY(jAe,t)===null)throw new ql(e,t,zAe);t=BAe(t,8)}return SY(t,e),t}var JAe=_n((t,e,r=UAe,n=vAe)=>{if(typeof t!="number")throw new Pr(e,"number",t);if(!zN(t))throw new Zo(e,"an integer",t);if(t<r||t>n)throw new Zo(e,`>= ${r} && <= ${n}`,t)}),QAe=_n((t,e,r=-2147483648,n=2147483647)=>{if(typeof t!="number")throw new Pr(e,"number",t);if(!zN(t))throw new Zo(e,"an integer",t);if(t<r||t>n)throw new Zo(e,`>= ${r} && <= ${n}`,t)}),SY=_n((t,e,r=!1)=>{if(typeof t!="number")throw new Pr(e,"number",t);if(!zN(t))throw new Zo(e,"an integer",t);let n=r?1:0,i=4294967295;if(t<n||t>i)throw new Zo(e,`>= ${n} && <= ${i}`,t)});function KN(t,e){if(typeof t!="string")throw new Pr(e,"string",t)}function ZAe(t,e,r=void 0,n){if(typeof t!="number")throw new Pr(e,"number",t);if(r!=null&&t<r||n!=null&&t>n||(r!=null||n!=null)&&MAe(t))throw new Zo(e,`${r!=null?`>= ${r}`:""}${r!=null&&n!=null?" && ":""}${n!=null?`<= ${n}`:""}`,t)}var eme=_n((t,e,r)=>{if(!hY(r,t)){let i="must be one of: "+TY(xAe(r,s=>typeof s=="string"?`'${s}'`:GAe(s)),", ");throw new ql(e,t,i)}});function RY(t,e){if(typeof t!="boolean")throw new Pr(e,"boolean",t)}function XN(t,e,r){return t==null||!FAe(t,e)?r:t[e]}var tme=_n((t,e,r=null)=>{let n=XN(r,"allowArray",!1),i=XN(r,"allowFunction",!1);if(!XN(r,"nullable",!1)&&t===null||!n&&jN(t)||typeof t!="object"&&(!i||typeof t!="function"))throw new Pr(e,"Object",t)}),rme=_n((t,e)=>{if(t!=null&&typeof t!="object"&&typeof t!="function")throw new Pr(e,"a dictionary",t)}),Sp=_n((t,e,r=0)=>{if(!jN(t))throw new Pr(e,"Array",t);if(t.length<r){let n=`must be longer than ${r}`;throw new ql(e,t,n)}});function nme(t,e){Sp(t,e);for(let r=0;r<t.length;r++)KN(t[r],`${e}[${r}]`)}function ime(t,e){Sp(t,e);for(let r=0;r<t.length;r++)RY(t[r],`${e}[${r}]`)}function sme(t,e){Sp(t,e);for(let r=0;r<t.length;r++){let n=t[r],i=`${e}[${r}]`;if(n==null)throw new Pr(i,"AbortSignal",n);AY(n,i)}}function ome(t,e="signal"){if(KN(t,e),fY[t]===void 0)throw fY[HAe(t)]!==void 0?new dY(t+" (signals must use all capital letters)"):new dY(t)}var ame=_n((t,e="buffer")=>{if(!VAe(t))throw new Pr(e,["Buffer","TypedArray","DataView"],t)});function lme(t,e){let r=$Ae(e),n=t.length;if(r==="hex"&&n%2!==0)throw new ql("encoding",e,`is invalid for data of length ${n}`)}function cme(t,e="Port",r=!0){if(typeof t!="number"&&typeof t!="string"||typeof t=="string"&&WAe(t).length===0||+t!==+t>>>0||t>65535||t===0&&!r)throw new kAe(e,t,r);return t|0}var AY=_n((t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new Pr(e,"AbortSignal",t)}),ume=_n((t,e)=>{if(typeof t!="function")throw new Pr(e,"Function",t)}),dme=_n((t,e)=>{if(typeof t!="function"||YAe(t))throw new Pr(e,"Function",t)}),fme=_n((t,e)=>{if(t!==void 0)throw new Pr(e,"undefined",t)});function Eme(t,e,r){if(!hY(r,t))throw new Pr(e,`('${TY(r,"|")}')`,t)}var hme=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function EY(t,e){if(typeof t>"u"||!pY(hme,t))throw new ql(e,t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function Tme(t){if(typeof t=="string")return EY(t,"hints"),t;if(jN(t)){let e=t.length,r="";if(e===0)return r;for(let n=0;n<e;n++){let i=t[n];EY(i,"hints"),r+=i,n!==e-1&&(r+=", ")}return r}throw new ql("hints",t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}mY.exports={isInt32:qAe,isUint32:XAe,parseFileMode:KAe,validateArray:Sp,validateStringArray:nme,validateBooleanArray:ime,validateAbortSignalArray:sme,validateBoolean:RY,validateBuffer:ame,validateDictionary:rme,validateEncoding:lme,validateFunction:ume,validateInt32:QAe,validateInteger:JAe,validateNumber:ZAe,validateObject:tme,validateOneOf:eme,validatePlainFunction:dme,validatePort:cme,validateSignalName:ome,validateString:KN,validateUint32:SY,validateUndefined:fme,validateUnion:Eme,validateAbortSignal:AY,validateLinkHeaderValue:Tme}});var pi=O((mUe,vY)=>{"use strict";var{SymbolAsyncIterator:_Y,SymbolIterator:IY,SymbolFor:ea}=dt(),gY=ea("nodejs.stream.destroyed"),NY=ea("nodejs.stream.errored"),JN=ea("nodejs.stream.readable"),QN=ea("nodejs.stream.writable"),OY=ea("nodejs.stream.disturbed"),pme=ea("nodejs.webstream.isClosedPromise"),Sme=ea("nodejs.webstream.controllerErrorFunction");function Rp(t,e=!1){var r;return!!(t&&typeof t.pipe=="function"&&typeof t.on=="function"&&(!e||typeof t.pause=="function"&&typeof t.resume=="function")&&(!t._writableState||((r=t._readableState)===null||r===void 0?void 0:r.readable)!==!1)&&(!t._writableState||t._readableState))}function Ap(t){var e;return!!(t&&typeof t.write=="function"&&typeof t.on=="function"&&(!t._readableState||((e=t._writableState)===null||e===void 0?void 0:e.writable)!==!1))}function Rme(t){return!!(t&&typeof t.pipe=="function"&&t._readableState&&typeof t.on=="function"&&typeof t.write=="function")}function Ti(t){return t&&(t._readableState||t._writableState||typeof t.write=="function"&&typeof t.on=="function"||typeof t.pipe=="function"&&typeof t.on=="function")}function CY(t){return!!(t&&!Ti(t)&&typeof t.pipeThrough=="function"&&typeof t.getReader=="function"&&typeof t.cancel=="function")}function yY(t){return!!(t&&!Ti(t)&&typeof t.getWriter=="function"&&typeof t.abort=="function")}function bY(t){return!!(t&&!Ti(t)&&typeof t.readable=="object"&&typeof t.writable=="object")}function Ame(t){return CY(t)||yY(t)||bY(t)}function mme(t,e){return t==null?!1:e===!0?typeof t[_Y]=="function":e===!1?typeof t[IY]=="function":typeof t[_Y]=="function"||typeof t[IY]=="function"}function mp(t){if(!Ti(t))return null;let e=t._writableState,r=t._readableState,n=e||r;return!!(t.destroyed||t[gY]||n!=null&&n.destroyed)}function wY(t){if(!Ap(t))return null;if(t.writableEnded===!0)return!0;let e=t._writableState;return e!=null&&e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function _me(t,e){if(!Ap(t))return null;if(t.writableFinished===!0)return!0;let r=t._writableState;return r!=null&&r.errored?!1:typeof r?.finished!="boolean"?null:!!(r.finished||e===!1&&r.ended===!0&&r.length===0)}function Ime(t){if(!Rp(t))return null;if(t.readableEnded===!0)return!0;let e=t._readableState;return!e||e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function LY(t,e){if(!Rp(t))return null;let r=t._readableState;return r!=null&&r.errored?!1:typeof r?.endEmitted!="boolean"?null:!!(r.endEmitted||e===!1&&r.ended===!0&&r.length===0)}function DY(t){return t&&t[JN]!=null?t[JN]:typeof t?.readable!="boolean"?null:mp(t)?!1:Rp(t)&&t.readable&&!LY(t)}function PY(t){return t&&t[QN]!=null?t[QN]:typeof t?.writable!="boolean"?null:mp(t)?!1:Ap(t)&&t.writable&&!wY(t)}function gme(t,e){return Ti(t)?mp(t)?!0:!(e?.readable!==!1&&DY(t)||e?.writable!==!1&&PY(t)):null}function Nme(t){var e,r;return Ti(t)?t.writableErrored?t.writableErrored:(e=(r=t._writableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function Ome(t){var e,r;return Ti(t)?t.readableErrored?t.readableErrored:(e=(r=t._readableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function Cme(t){if(!Ti(t))return null;if(typeof t.closed=="boolean")return t.closed;let e=t._writableState,r=t._readableState;return typeof e?.closed=="boolean"||typeof r?.closed=="boolean"?e?.closed||r?.closed:typeof t._closed=="boolean"&&xY(t)?t._closed:null}function xY(t){return typeof t._closed=="boolean"&&typeof t._defaultKeepAlive=="boolean"&&typeof t._removedConnection=="boolean"&&typeof t._removedContLen=="boolean"}function MY(t){return typeof t._sent100=="boolean"&&xY(t)}function yme(t){var e;return typeof t._consuming=="boolean"&&typeof t._dumped=="boolean"&&((e=t.req)===null||e===void 0?void 0:e.upgradeOrConnect)===void 0}function bme(t){if(!Ti(t))return null;let e=t._writableState,r=t._readableState,n=e||r;return!n&&MY(t)||!!(n&&n.autoDestroy&&n.emitClose&&n.closed===!1)}function wme(t){var e;return!!(t&&((e=t[OY])!==null&&e!==void 0?e:t.readableDidRead||t.readableAborted))}function Lme(t){var e,r,n,i,s,o,a,l,c,u;return!!(t&&((e=(r=(n=(i=(s=(o=t[NY])!==null&&o!==void 0?o:t.readableErrored)!==null&&s!==void 0?s:t.writableErrored)!==null&&i!==void 0?i:(a=t._readableState)===null||a===void 0?void 0:a.errorEmitted)!==null&&n!==void 0?n:(l=t._writableState)===null||l===void 0?void 0:l.errorEmitted)!==null&&r!==void 0?r:(c=t._readableState)===null||c===void 0?void 0:c.errored)!==null&&e!==void 0?e:!((u=t._writableState)===null||u===void 0)&&u.errored))}vY.exports={isDestroyed:mp,kIsDestroyed:gY,isDisturbed:wme,kIsDisturbed:OY,isErrored:Lme,kIsErrored:NY,isReadable:DY,kIsReadable:JN,kIsClosedPromise:pme,kControllerErrorFunction:Sme,kIsWritable:QN,isClosed:Cme,isDuplexNodeStream:Rme,isFinished:gme,isIterable:mme,isReadableNodeStream:Rp,isReadableStream:CY,isReadableEnded:Ime,isReadableFinished:LY,isReadableErrored:Ome,isNodeStream:Ti,isWebStream:Ame,isWritable:PY,isWritableNodeStream:Ap,isWritableStream:yY,isWritableEnded:wY,isWritableFinished:_me,isWritableErrored:Nme,isServerRequest:yme,isServerResponse:MY,willEmitClose:bme,isTransformStream:bY}});var Zi=O((_Ue,nO)=>{"use strict";var Gs=je(),{AbortError:YY,codes:Dme}=Dr(),{ERR_INVALID_ARG_TYPE:Pme,ERR_STREAM_PREMATURE_CLOSE:UY}=Dme,{kEmptyObject:eO,once:tO}=kr(),{validateAbortSignal:xme,validateFunction:Mme,validateObject:vme,validateBoolean:Ume}=Xl(),{Promise:Bme,PromisePrototypeThen:Fme,SymbolDispose:VY}=dt(),{isClosed:Gme,isReadable:BY,isReadableNodeStream:ZN,isReadableStream:Hme,isReadableFinished:FY,isReadableErrored:GY,isWritable:HY,isWritableNodeStream:WY,isWritableStream:Wme,isWritableFinished:kY,isWritableErrored:$Y,isNodeStream:kme,willEmitClose:$me,kIsClosedPromise:Yme}=pi(),jl;function Vme(t){return t.setHeader&&typeof t.abort=="function"}var rO=()=>{};function qY(t,e,r){var n,i;if(arguments.length===2?(r=e,e=eO):e==null?e=eO:vme(e,"options"),Mme(r,"callback"),xme(e.signal,"options.signal"),r=tO(r),Hme(t)||Wme(t))return qme(t,e,r);if(!kme(t))throw new Pme("stream",["ReadableStream","WritableStream","Stream"],t);let s=(n=e.readable)!==null&&n!==void 0?n:ZN(t),o=(i=e.writable)!==null&&i!==void 0?i:WY(t),a=t._writableState,l=t._readableState,c=()=>{t.writable||E()},u=$me(t)&&ZN(t)===s&&WY(t)===o,d=kY(t,!1),E=()=>{d=!0,t.destroyed&&(u=!1),!(u&&(!t.readable||s))&&(!s||f)&&r.call(t)},f=FY(t,!1),T=()=>{f=!0,t.destroyed&&(u=!1),!(u&&(!t.writable||o))&&(!o||d)&&r.call(t)},h=g=>{r.call(t,g)},p=Gme(t),S=()=>{p=!0;let g=$Y(t)||GY(t);if(g&&typeof g!="boolean")return r.call(t,g);if(s&&!f&&ZN(t,!0)&&!FY(t,!1))return r.call(t,new UY);if(o&&!d&&!kY(t,!1))return r.call(t,new UY);r.call(t)},m=()=>{p=!0;let g=$Y(t)||GY(t);if(g&&typeof g!="boolean")return r.call(t,g);r.call(t)},R=()=>{t.req.on("finish",E)};Vme(t)?(t.on("complete",E),u||t.on("abort",S),t.req?R():t.on("request",R)):o&&!a&&(t.on("end",c),t.on("close",c)),!u&&typeof t.aborted=="boolean"&&t.on("aborted",S),t.on("end",T),t.on("finish",E),e.error!==!1&&t.on("error",h),t.on("close",S),p?Gs.nextTick(S):a!=null&&a.errorEmitted||l!=null&&l.errorEmitted?u||Gs.nextTick(m):(!s&&(!u||BY(t))&&(d||HY(t)===!1)||!o&&(!u||HY(t))&&(f||BY(t)===!1)||l&&t.req&&t.aborted)&&Gs.nextTick(m);let A=()=>{r=rO,t.removeListener("aborted",S),t.removeListener("complete",E),t.removeListener("abort",S),t.removeListener("request",R),t.req&&t.req.removeListener("finish",E),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",E),t.removeListener("end",T),t.removeListener("error",h),t.removeListener("close",S)};if(e.signal&&!p){let g=()=>{let w=r;A(),w.call(t,new YY(void 0,{cause:e.signal.reason}))};if(e.signal.aborted)Gs.nextTick(g);else{jl=jl||kr().addAbortListener;let w=jl(e.signal,g),I=r;r=tO((...D)=>{w[VY](),I.apply(t,D)})}}return A}function qme(t,e,r){let n=!1,i=rO;if(e.signal)if(i=()=>{n=!0,r.call(t,new YY(void 0,{cause:e.signal.reason}))},e.signal.aborted)Gs.nextTick(i);else{jl=jl||kr().addAbortListener;let o=jl(e.signal,i),a=r;r=tO((...l)=>{o[VY](),a.apply(t,l)})}let s=(...o)=>{n||Gs.nextTick(()=>r.apply(t,o))};return Fme(t[Yme].promise,s,s),rO}function Xme(t,e){var r;let n=!1;return e===null&&(e=eO),(r=e)!==null&&r!==void 0&&r.cleanup&&(Ume(e.cleanup,"cleanup"),n=e.cleanup),new Bme((i,s)=>{let o=qY(t,e,a=>{n&&o(),a?s(a):i()})})}nO.exports=qY;nO.exports.finished=Xme});var ta=O((IUe,eV)=>{"use strict";var Si=je(),{aggregateTwoErrors:jme,codes:{ERR_MULTIPLE_CALLBACK:zme},AbortError:Kme}=Dr(),{Symbol:zY}=dt(),{kIsDestroyed:Jme,isDestroyed:Qme,isFinished:Zme,isServerRequest:e_e}=pi(),KY=zY("kDestroy"),iO=zY("kConstruct");function JY(t,e,r){t&&(t.stack,e&&!e.errored&&(e.errored=t),r&&!r.errored&&(r.errored=t))}function t_e(t,e){let r=this._readableState,n=this._writableState,i=n||r;return n!=null&&n.destroyed||r!=null&&r.destroyed?(typeof e=="function"&&e(),this):(JY(t,n,r),n&&(n.destroyed=!0),r&&(r.destroyed=!0),i.constructed?XY(this,t,e):this.once(KY,function(s){XY(this,jme(s,t),e)}),this)}function XY(t,e,r){let n=!1;function i(s){if(n)return;n=!0;let o=t._readableState,a=t._writableState;JY(s,a,o),a&&(a.closed=!0),o&&(o.closed=!0),typeof r=="function"&&r(s),s?Si.nextTick(r_e,t,s):Si.nextTick(QY,t)}try{t._destroy(e||null,i)}catch(s){i(s)}}function r_e(t,e){sO(t,e),QY(t)}function QY(t){let e=t._readableState,r=t._writableState;r&&(r.closeEmitted=!0),e&&(e.closeEmitted=!0),(r!=null&&r.emitClose||e!=null&&e.emitClose)&&t.emit("close")}function sO(t,e){let r=t._readableState,n=t._writableState;n!=null&&n.errorEmitted||r!=null&&r.errorEmitted||(n&&(n.errorEmitted=!0),r&&(r.errorEmitted=!0),t.emit("error",e))}function n_e(){let t=this._readableState,e=this._writableState;t&&(t.constructed=!0,t.closed=!1,t.closeEmitted=!1,t.destroyed=!1,t.errored=null,t.errorEmitted=!1,t.reading=!1,t.ended=t.readable===!1,t.endEmitted=t.readable===!1),e&&(e.constructed=!0,e.destroyed=!1,e.closed=!1,e.closeEmitted=!1,e.errored=null,e.errorEmitted=!1,e.finalCalled=!1,e.prefinished=!1,e.ended=e.writable===!1,e.ending=e.writable===!1,e.finished=e.writable===!1)}function oO(t,e,r){let n=t._readableState,i=t._writableState;if(i!=null&&i.destroyed||n!=null&&n.destroyed)return this;n!=null&&n.autoDestroy||i!=null&&i.autoDestroy?t.destroy(e):e&&(e.stack,i&&!i.errored&&(i.errored=e),n&&!n.errored&&(n.errored=e),r?Si.nextTick(sO,t,e):sO(t,e))}function i_e(t,e){if(typeof t._construct!="function")return;let r=t._readableState,n=t._writableState;r&&(r.constructed=!1),n&&(n.constructed=!1),t.once(iO,e),!(t.listenerCount(iO)>1)&&Si.nextTick(s_e,t)}function s_e(t){let e=!1;function r(n){if(e){oO(t,n??new zme);return}e=!0;let i=t._readableState,s=t._writableState,o=s||i;i&&(i.constructed=!0),s&&(s.constructed=!0),o.destroyed?t.emit(KY,n):n?oO(t,n,!0):Si.nextTick(o_e,t)}try{t._construct(n=>{Si.nextTick(r,n)})}catch(n){Si.nextTick(r,n)}}function o_e(t){t.emit(iO)}function jY(t){return t?.setHeader&&typeof t.abort=="function"}function ZY(t){t.emit("close")}function a_e(t,e){t.emit("error",e),Si.nextTick(ZY,t)}function l_e(t,e){!t||Qme(t)||(!e&&!Zme(t)&&(e=new Kme),e_e(t)?(t.socket=null,t.destroy(e)):jY(t)?t.abort():jY(t.req)?t.req.abort():typeof t.destroy=="function"?t.destroy(e):typeof t.close=="function"?t.close():e?Si.nextTick(a_e,t,e):Si.nextTick(ZY,t),t.destroyed||(t[Jme]=!0))}eV.exports={construct:i_e,destroyer:l_e,destroy:t_e,undestroy:n_e,errorOrDestroy:oO}});var gp=O((gUe,rV)=>{"use strict";var{ArrayIsArray:c_e,ObjectSetPrototypeOf:tV}=dt(),{EventEmitter:_p}=require("events");function Ip(t){_p.call(this,t)}tV(Ip.prototype,_p.prototype);tV(Ip,_p);Ip.prototype.pipe=function(t,e){let r=this;function n(u){t.writable&&t.write(u)===!1&&r.pause&&r.pause()}r.on("data",n);function i(){r.readable&&r.resume&&r.resume()}t.on("drain",i),!t._isStdio&&(!e||e.end!==!1)&&(r.on("end",o),r.on("close",a));let s=!1;function o(){s||(s=!0,t.end())}function a(){s||(s=!0,typeof t.destroy=="function"&&t.destroy())}function l(u){c(),_p.listenerCount(this,"error")===0&&this.emit("error",u)}aO(r,"error",l),aO(t,"error",l);function c(){r.removeListener("data",n),t.removeListener("drain",i),r.removeListener("end",o),r.removeListener("close",a),r.removeListener("error",l),t.removeListener("error",l),r.removeListener("end",c),r.removeListener("close",c),t.removeListener("close",c)}return r.on("end",c),r.on("close",c),t.on("close",c),t.emit("pipe",r),t};function aO(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):c_e(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}rV.exports={Stream:Ip,prependListener:aO}});var gd=O((NUe,Np)=>{"use strict";var{SymbolDispose:u_e}=dt(),{AbortError:nV,codes:d_e}=Dr(),{isNodeStream:iV,isWebStream:f_e,kControllerErrorFunction:E_e}=pi(),h_e=Zi(),{ERR_INVALID_ARG_TYPE:sV}=d_e,lO,T_e=(t,e)=>{if(typeof t!="object"||!("aborted"in t))throw new sV(e,"AbortSignal",t)};Np.exports.addAbortSignal=function(e,r){if(T_e(e,"signal"),!iV(r)&&!f_e(r))throw new sV("stream",["ReadableStream","WritableStream","Stream"],r);return Np.exports.addAbortSignalNoValidate(e,r)};Np.exports.addAbortSignalNoValidate=function(t,e){if(typeof t!="object"||!("aborted"in t))return e;let r=iV(e)?()=>{e.destroy(new nV(void 0,{cause:t.reason}))}:()=>{e[E_e](new nV(void 0,{cause:t.reason}))};if(t.aborted)r();else{lO=lO||kr().addAbortListener;let n=lO(t,r);h_e(e,n[u_e])}return e}});var lV=O((CUe,aV)=>{"use strict";var{StringPrototypeSlice:oV,SymbolIterator:p_e,TypedArrayPrototypeSet:Op,Uint8Array:S_e}=dt(),{Buffer:cO}=require("buffer"),{inspect:R_e}=kr();aV.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){let r={data:e,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length}unshift(e){let r={data:e,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length}shift(){if(this.length===0)return;let e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return"";let r=this.head,n=""+r.data;for(;(r=r.next)!==null;)n+=e+r.data;return n}concat(e){if(this.length===0)return cO.alloc(0);let r=cO.allocUnsafe(e>>>0),n=this.head,i=0;for(;n;)Op(r,n.data,i),i+=n.data.length,n=n.next;return r}consume(e,r){let n=this.head.data;if(e<n.length){let i=n.slice(0,e);return this.head.data=n.slice(e),i}return e===n.length?this.shift():r?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[p_e](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let r="",n=this.head,i=0;do{let s=n.data;if(e>s.length)r+=s,e-=s.length;else{e===s.length?(r+=s,++i,n.next?this.head=n.next:this.head=this.tail=null):(r+=oV(s,0,e),this.head=n,n.data=oV(s,e));break}++i}while((n=n.next)!==null);return this.length-=i,r}_getBuffer(e){let r=cO.allocUnsafe(e),n=e,i=this.head,s=0;do{let o=i.data;if(e>o.length)Op(r,o,n-e),e-=o.length;else{e===o.length?(Op(r,o,n-e),++s,i.next?this.head=i.next:this.head=this.tail=null):(Op(r,new S_e(o.buffer,o.byteOffset,e),n-e),this.head=i,i.data=o.slice(e));break}++s}while((i=i.next)!==null);return this.length-=s,r}[Symbol.for("nodejs.util.inspect.custom")](e,r){return R_e(this,{...r,depth:0,customInspect:!1})}}});var Nd=O((yUe,fV)=>{"use strict";var{MathFloor:A_e,NumberIsInteger:m_e}=dt(),{validateInteger:__e}=Xl(),{ERR_INVALID_ARG_VALUE:I_e}=Dr().codes,cV=16*1024,uV=16;function g_e(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function dV(t){return t?uV:cV}function N_e(t,e){__e(e,"value",0),t?uV=e:cV=e}function O_e(t,e,r,n){let i=g_e(e,n,r);if(i!=null){if(!m_e(i)||i<0){let s=n?`options.${r}`:"options.highWaterMark";throw new I_e(s,i)}return A_e(i)}return dV(t.objectMode)}fV.exports={getHighWaterMark:O_e,getDefaultHighWaterMark:dV,setDefaultHighWaterMark:N_e}});var uO=O((bUe,pV)=>{"use strict";var EV=je(),{PromisePrototypeThen:C_e,SymbolAsyncIterator:hV,SymbolIterator:TV}=dt(),{Buffer:y_e}=require("buffer"),{ERR_INVALID_ARG_TYPE:b_e,ERR_STREAM_NULL_VALUES:w_e}=Dr().codes;function L_e(t,e,r){let n;if(typeof e=="string"||e instanceof y_e)return new t({objectMode:!0,...r,read(){this.push(e),this.push(null)}});let i;if(e&&e[hV])i=!0,n=e[hV]();else if(e&&e[TV])i=!1,n=e[TV]();else throw new b_e("iterable",["Iterable"],e);let s=new t({objectMode:!0,highWaterMark:1,...r}),o=!1;s._read=function(){o||(o=!0,l())},s._destroy=function(c,u){C_e(a(c),()=>EV.nextTick(u,c),d=>EV.nextTick(u,d||c))};async function a(c){let u=c!=null,d=typeof n.throw=="function";if(u&&d){let{value:E,done:f}=await n.throw(c);if(await E,f)return}if(typeof n.return=="function"){let{value:E}=await n.return();await E}}async function l(){for(;;){try{let{value:c,done:u}=i?await n.next():n.next();if(u)s.push(null);else{let d=c&&typeof c.then=="function"?await c:c;if(d===null)throw o=!1,new w_e;if(s.push(d))continue;o=!1}}catch(c){s.destroy(c)}break}}return s}pV.exports=L_e});var Cd=O((wUe,MV)=>{"use strict";var Bn=je(),{ArrayPrototypeIndexOf:D_e,NumberIsInteger:P_e,NumberIsNaN:x_e,NumberParseInt:M_e,ObjectDefineProperties:RO,ObjectKeys:v_e,ObjectSetPrototypeOf:AV,Promise:mV,SafeSet:U_e,SymbolAsyncDispose:B_e,SymbolAsyncIterator:F_e,Symbol:G_e}=dt();MV.exports=me;me.ReadableState=wp;var{EventEmitter:H_e}=require("events"),{Stream:Hs,prependListener:W_e}=gp(),{Buffer:dO}=require("buffer"),{addAbortSignal:k_e}=gd(),_V=Zi(),Me=kr().debuglog("stream",t=>{Me=t}),$_e=lV(),Jl=ta(),{getHighWaterMark:Y_e,getDefaultHighWaterMark:V_e}=Nd(),{aggregateTwoErrors:SV,codes:{ERR_INVALID_ARG_TYPE:q_e,ERR_METHOD_NOT_IMPLEMENTED:X_e,ERR_OUT_OF_RANGE:j_e,ERR_STREAM_PUSH_AFTER_EOF:z_e,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:K_e},AbortError:J_e}=Dr(),{validateObject:Q_e}=Xl(),ra=G_e("kPaused"),{StringDecoder:IV}=Au(),Z_e=uO();AV(me.prototype,Hs.prototype);AV(me,Hs);var fO=()=>{},{errorOrDestroy:zl}=Jl,Kl=1,eIe=2,gV=4,Od=8,NV=16,Cp=32,yp=64,OV=128,tIe=256,rIe=512,nIe=1024,pO=2048,SO=4096,iIe=8192,sIe=16384,oIe=32768,CV=65536,aIe=1<<17,lIe=1<<18;function Yt(t){return{enumerable:!1,get(){return(this.state&t)!==0},set(e){e?this.state|=t:this.state&=~t}}}RO(wp.prototype,{objectMode:Yt(Kl),ended:Yt(eIe),endEmitted:Yt(gV),reading:Yt(Od),constructed:Yt(NV),sync:Yt(Cp),needReadable:Yt(yp),emittedReadable:Yt(OV),readableListening:Yt(tIe),resumeScheduled:Yt(rIe),errorEmitted:Yt(nIe),emitClose:Yt(pO),autoDestroy:Yt(SO),destroyed:Yt(iIe),closed:Yt(sIe),closeEmitted:Yt(oIe),multiAwaitDrain:Yt(CV),readingMore:Yt(aIe),dataEmitted:Yt(lIe)});function wp(t,e,r){typeof r!="boolean"&&(r=e instanceof Ri()),this.state=pO|SO|NV|Cp,t&&t.objectMode&&(this.state|=Kl),r&&t&&t.readableObjectMode&&(this.state|=Kl),this.highWaterMark=t?Y_e(this,t,"readableHighWaterMark",r):V_e(!1),this.buffer=new $_e,this.length=0,this.pipes=[],this.flowing=null,this[ra]=null,t&&t.emitClose===!1&&(this.state&=~pO),t&&t.autoDestroy===!1&&(this.state&=~SO),this.errored=null,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,t&&t.encoding&&(this.decoder=new IV(t.encoding),this.encoding=t.encoding)}function me(t){if(!(this instanceof me))return new me(t);let e=this instanceof Ri();this._readableState=new wp(t,this,e),t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&!e&&k_e(t.signal,this)),Hs.call(this,t),Jl.construct(this,()=>{this._readableState.needReadable&&bp(this,this._readableState)})}me.prototype.destroy=Jl.destroy;me.prototype._undestroy=Jl.undestroy;me.prototype._destroy=function(t,e){e(t)};me.prototype[H_e.captureRejectionSymbol]=function(t){this.destroy(t)};me.prototype[B_e]=function(){let t;return this.destroyed||(t=this.readableEnded?null:new J_e,this.destroy(t)),new mV((e,r)=>_V(this,n=>n&&n!==t?r(n):e(null)))};me.prototype.push=function(t,e){return yV(this,t,e,!1)};me.prototype.unshift=function(t,e){return yV(this,t,e,!0)};function yV(t,e,r,n){Me("readableAddChunk",e);let i=t._readableState,s;if((i.state&Kl)===0&&(typeof e=="string"?(r=r||i.defaultEncoding,i.encoding!==r&&(n&&i.encoding?e=dO.from(e,r).toString(i.encoding):(e=dO.from(e,r),r=""))):e instanceof dO?r="":Hs._isUint8Array(e)?(e=Hs._uint8ArrayToBuffer(e),r=""):e!=null&&(s=new q_e("chunk",["string","Buffer","Uint8Array"],e))),s)zl(t,s);else if(e===null)i.state&=~Od,dIe(t,i);else if((i.state&Kl)!==0||e&&e.length>0)if(n)if((i.state&gV)!==0)zl(t,new K_e);else{if(i.destroyed||i.errored)return!1;EO(t,i,e,!0)}else if(i.ended)zl(t,new z_e);else{if(i.destroyed||i.errored)return!1;i.state&=~Od,i.decoder&&!r?(e=i.decoder.write(e),i.objectMode||e.length!==0?EO(t,i,e,!1):bp(t,i)):EO(t,i,e,!1)}else n||(i.state&=~Od,bp(t,i));return!i.ended&&(i.length<i.highWaterMark||i.length===0)}function EO(t,e,r,n){e.flowing&&e.length===0&&!e.sync&&t.listenerCount("data")>0?((e.state&CV)!==0?e.awaitDrainWriters.clear():e.awaitDrainWriters=null,e.dataEmitted=!0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),(e.state&yp)!==0&&Lp(t)),bp(t,e)}me.prototype.isPaused=function(){let t=this._readableState;return t[ra]===!0||t.flowing===!1};me.prototype.setEncoding=function(t){let e=new IV(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;let r=this._readableState.buffer,n="";for(let i of r)n+=e.write(i);return r.clear(),n!==""&&r.push(n),this._readableState.length=n.length,this};var cIe=1073741824;function uIe(t){if(t>cIe)throw new j_e("size","<= 1GiB",t);return t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++,t}function RV(t,e){return t<=0||e.length===0&&e.ended?0:(e.state&Kl)!==0?1:x_e(t)?e.flowing&&e.length?e.buffer.first().length:e.length:t<=e.length?t:e.ended?e.length:0}me.prototype.read=function(t){Me("read",t),t===void 0?t=NaN:P_e(t)||(t=M_e(t,10));let e=this._readableState,r=t;if(t>e.highWaterMark&&(e.highWaterMark=uIe(t)),t!==0&&(e.state&=~OV),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return Me("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?hO(this):Lp(this),null;if(t=RV(t,e),t===0&&e.ended)return e.length===0&&hO(this),null;let n=(e.state&yp)!==0;if(Me("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,Me("length less than watermark",n)),e.ended||e.reading||e.destroyed||e.errored||!e.constructed)n=!1,Me("reading, ended or constructing",n);else if(n){Me("do read"),e.state|=Od|Cp,e.length===0&&(e.state|=yp);try{this._read(e.highWaterMark)}catch(s){zl(this,s)}e.state&=~Cp,e.reading||(t=RV(r,e))}let i;return t>0?i=PV(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.multiAwaitDrain?e.awaitDrainWriters.clear():e.awaitDrainWriters=null),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&hO(this)),i!==null&&!e.errorEmitted&&!e.closeEmitted&&(e.dataEmitted=!0,this.emit("data",i)),i};function dIe(t,e){if(Me("onEofChunk"),!e.ended){if(e.decoder){let r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?Lp(t):(e.needReadable=!1,e.emittedReadable=!0,bV(t))}}function Lp(t){let e=t._readableState;Me("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(Me("emitReadable",e.flowing),e.emittedReadable=!0,Bn.nextTick(bV,t))}function bV(t){let e=t._readableState;Me("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&!e.errored&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,LV(t)}function bp(t,e){!e.readingMore&&e.constructed&&(e.readingMore=!0,Bn.nextTick(fIe,t,e))}function fIe(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){let r=e.length;if(Me("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}me.prototype._read=function(t){throw new X_e("_read()")};me.prototype.pipe=function(t,e){let r=this,n=this._readableState;n.pipes.length===1&&(n.multiAwaitDrain||(n.multiAwaitDrain=!0,n.awaitDrainWriters=new U_e(n.awaitDrainWriters?[n.awaitDrainWriters]:[]))),n.pipes.push(t),Me("pipe count=%d opts=%j",n.pipes.length,e);let s=(!e||e.end!==!1)&&t!==Bn.stdout&&t!==Bn.stderr?a:p;n.endEmitted?Bn.nextTick(s):r.once("end",s),t.on("unpipe",o);function o(S,m){Me("onunpipe"),S===r&&m&&m.hasUnpiped===!1&&(m.hasUnpiped=!0,u())}function a(){Me("onend"),t.end()}let l,c=!1;function u(){Me("cleanup"),t.removeListener("close",T),t.removeListener("finish",h),l&&t.removeListener("drain",l),t.removeListener("error",f),t.removeListener("unpipe",o),r.removeListener("end",a),r.removeListener("end",p),r.removeListener("data",E),c=!0,l&&n.awaitDrainWriters&&(!t._writableState||t._writableState.needDrain)&&l()}function d(){c||(n.pipes.length===1&&n.pipes[0]===t?(Me("false write response, pause",0),n.awaitDrainWriters=t,n.multiAwaitDrain=!1):n.pipes.length>1&&n.pipes.includes(t)&&(Me("false write response, pause",n.awaitDrainWriters.size),n.awaitDrainWriters.add(t)),r.pause()),l||(l=EIe(r,t),t.on("drain",l))}r.on("data",E);function E(S){Me("ondata");let m=t.write(S);Me("dest.write",m),m===!1&&d()}function f(S){if(Me("onerror",S),p(),t.removeListener("error",f),t.listenerCount("error")===0){let m=t._writableState||t._readableState;m&&!m.errorEmitted?zl(t,S):t.emit("error",S)}}W_e(t,"error",f);function T(){t.removeListener("finish",h),p()}t.once("close",T);function h(){Me("onfinish"),t.removeListener("close",T),p()}t.once("finish",h);function p(){Me("unpipe"),r.unpipe(t)}return t.emit("pipe",r),t.writableNeedDrain===!0?d():n.flowing||(Me("pipe resume"),r.resume()),t};function EIe(t,e){return function(){let n=t._readableState;n.awaitDrainWriters===e?(Me("pipeOnDrain",1),n.awaitDrainWriters=null):n.multiAwaitDrain&&(Me("pipeOnDrain",n.awaitDrainWriters.size),n.awaitDrainWriters.delete(e)),(!n.awaitDrainWriters||n.awaitDrainWriters.size===0)&&t.listenerCount("data")&&t.resume()}}me.prototype.unpipe=function(t){let e=this._readableState,r={hasUnpiped:!1};if(e.pipes.length===0)return this;if(!t){let i=e.pipes;e.pipes=[],this.pause();for(let s=0;s<i.length;s++)i[s].emit("unpipe",this,{hasUnpiped:!1});return this}let n=D_e(e.pipes,t);return n===-1?this:(e.pipes.splice(n,1),e.pipes.length===0&&this.pause(),t.emit("unpipe",this,r),this)};me.prototype.on=function(t,e){let r=Hs.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,Me("on readable",n.length,n.reading),n.length?Lp(this):n.reading||Bn.nextTick(hIe,this)),r};me.prototype.addListener=me.prototype.on;me.prototype.removeListener=function(t,e){let r=Hs.prototype.removeListener.call(this,t,e);return t==="readable"&&Bn.nextTick(wV,this),r};me.prototype.off=me.prototype.removeListener;me.prototype.removeAllListeners=function(t){let e=Hs.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&Bn.nextTick(wV,this),e};function wV(t){let e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&e[ra]===!1?e.flowing=!0:t.listenerCount("data")>0?t.resume():e.readableListening||(e.flowing=null)}function hIe(t){Me("readable nexttick read 0"),t.read(0)}me.prototype.resume=function(){let t=this._readableState;return t.flowing||(Me("resume"),t.flowing=!t.readableListening,TIe(this,t)),t[ra]=!1,this};function TIe(t,e){e.resumeScheduled||(e.resumeScheduled=!0,Bn.nextTick(pIe,t,e))}function pIe(t,e){Me("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),LV(t),e.flowing&&!e.reading&&t.read(0)}me.prototype.pause=function(){return Me("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Me("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[ra]=!0,this};function LV(t){let e=t._readableState;for(Me("flow",e.flowing);e.flowing&&t.read()!==null;);}me.prototype.wrap=function(t){let e=!1;t.on("data",n=>{!this.push(n)&&t.pause&&(e=!0,t.pause())}),t.on("end",()=>{this.push(null)}),t.on("error",n=>{zl(this,n)}),t.on("close",()=>{this.destroy()}),t.on("destroy",()=>{this.destroy()}),this._read=()=>{e&&t.resume&&(e=!1,t.resume())};let r=v_e(t);for(let n=1;n<r.length;n++){let i=r[n];this[i]===void 0&&typeof t[i]=="function"&&(this[i]=t[i].bind(t))}return this};me.prototype[F_e]=function(){return DV(this)};me.prototype.iterator=function(t){return t!==void 0&&Q_e(t,"options"),DV(this,t)};function DV(t,e){typeof t.read!="function"&&(t=me.wrap(t,{objectMode:!0}));let r=SIe(t,e);return r.stream=t,r}async function*SIe(t,e){let r=fO;function n(o){this===t?(r(),r=fO):r=o}t.on("readable",n);let i,s=_V(t,{writable:!1},o=>{i=o?SV(i,o):null,r(),r=fO});try{for(;;){let o=t.destroyed?null:t.read();if(o!==null)yield o;else{if(i)throw i;if(i===null)return;await new mV(n)}}}catch(o){throw i=SV(i,o),i}finally{(i||e?.destroyOnReturn!==!1)&&(i===void 0||t._readableState.autoDestroy)?Jl.destroyer(t,null):(t.off("readable",n),s())}}RO(me.prototype,{readable:{__proto__:null,get(){let t=this._readableState;return!!t&&t.readable!==!1&&!t.destroyed&&!t.errorEmitted&&!t.endEmitted},set(t){this._readableState&&(this._readableState.readable=!!t)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(t){this._readableState&&(this._readableState.destroyed=t)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}});RO(wp.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[ra]!==!1},set(t){this[ra]=!!t}}});me._fromList=PV;function PV(t,e){if(e.length===0)return null;let r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function hO(t){let e=t._readableState;Me("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,Bn.nextTick(RIe,e,t))}function RIe(t,e){if(Me("endReadableNT",t.endEmitted,t.length),!t.errored&&!t.closeEmitted&&!t.endEmitted&&t.length===0){if(t.endEmitted=!0,e.emit("end"),e.writable&&e.allowHalfOpen===!1)Bn.nextTick(AIe,e);else if(t.autoDestroy){let r=e._writableState;(!r||r.autoDestroy&&(r.finished||r.writable===!1))&&e.destroy()}}}function AIe(t){t.writable&&!t.writableEnded&&!t.destroyed&&t.end()}me.from=function(t,e){return Z_e(me,t,e)};var TO;function xV(){return TO===void 0&&(TO={}),TO}me.fromWeb=function(t,e){return xV().newStreamReadableFromReadableStream(t,e)};me.toWeb=function(t,e){return xV().newReadableStreamFromStreamReadable(t,e)};me.wrap=function(t,e){var r,n;return new me({objectMode:(r=(n=t.readableObjectMode)!==null&&n!==void 0?n:t.objectMode)!==null&&r!==void 0?r:!0,...e,destroy(i,s){Jl.destroyer(t,i),s(i)}}).wrap(t)}});var vp=O((LUe,qV)=>{"use strict";var na=je(),{ArrayPrototypeSlice:BV,Error:mIe,FunctionPrototypeSymbolHasInstance:FV,ObjectDefineProperty:GV,ObjectDefineProperties:_Ie,ObjectSetPrototypeOf:HV,StringPrototypeToLowerCase:IIe,Symbol:gIe,SymbolHasInstance:NIe}=dt();qV.exports=St;St.WritableState=wd;var{EventEmitter:OIe}=require("events"),yd=gp().Stream,{Buffer:Dp}=require("buffer"),Mp=ta(),{addAbortSignal:CIe}=gd(),{getHighWaterMark:yIe,getDefaultHighWaterMark:bIe}=Nd(),{ERR_INVALID_ARG_TYPE:wIe,ERR_METHOD_NOT_IMPLEMENTED:LIe,ERR_MULTIPLE_CALLBACK:WV,ERR_STREAM_CANNOT_PIPE:DIe,ERR_STREAM_DESTROYED:bd,ERR_STREAM_ALREADY_FINISHED:PIe,ERR_STREAM_NULL_VALUES:xIe,ERR_STREAM_WRITE_AFTER_END:MIe,ERR_UNKNOWN_ENCODING:kV}=Dr().codes,{errorOrDestroy:Ql}=Mp;HV(St.prototype,yd.prototype);HV(St,yd);function _O(){}var Zl=gIe("kOnFinished");function wd(t,e,r){typeof r!="boolean"&&(r=e instanceof Ri()),this.objectMode=!!(t&&t.objectMode),r&&(this.objectMode=this.objectMode||!!(t&&t.writableObjectMode)),this.highWaterMark=t?yIe(this,t,"writableHighWaterMark",r):bIe(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let n=!!(t&&t.decodeStrings===!1);this.decodeStrings=!n,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=UIe.bind(void 0,e),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,xp(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!t||t.emitClose!==!1,this.autoDestroy=!t||t.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[Zl]=[]}function xp(t){t.buffered=[],t.bufferedIndex=0,t.allBuffers=!0,t.allNoop=!0}wd.prototype.getBuffer=function(){return BV(this.buffered,this.bufferedIndex)};GV(wd.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function St(t){let e=this instanceof Ri();if(!e&&!FV(St,this))return new St(t);this._writableState=new wd(t,this,e),t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&CIe(t.signal,this)),yd.call(this,t),Mp.construct(this,()=>{let r=this._writableState;r.writing||gO(this,r),NO(this,r)})}GV(St,NIe,{__proto__:null,value:function(t){return FV(this,t)?!0:this!==St?!1:t&&t._writableState instanceof wd}});St.prototype.pipe=function(){Ql(this,new DIe)};function $V(t,e,r,n){let i=t._writableState;if(typeof r=="function")n=r,r=i.defaultEncoding;else{if(!r)r=i.defaultEncoding;else if(r!=="buffer"&&!Dp.isEncoding(r))throw new kV(r);typeof n!="function"&&(n=_O)}if(e===null)throw new xIe;if(!i.objectMode)if(typeof e=="string")i.decodeStrings!==!1&&(e=Dp.from(e,r),r="buffer");else if(e instanceof Dp)r="buffer";else if(yd._isUint8Array(e))e=yd._uint8ArrayToBuffer(e),r="buffer";else throw new wIe("chunk",["string","Buffer","Uint8Array"],e);let s;return i.ending?s=new MIe:i.destroyed&&(s=new bd("write")),s?(na.nextTick(n,s),Ql(t,s,!0),s):(i.pendingcb++,vIe(t,i,e,r,n))}St.prototype.write=function(t,e,r){return $V(this,t,e,r)===!0};St.prototype.cork=function(){this._writableState.corked++};St.prototype.uncork=function(){let t=this._writableState;t.corked&&(t.corked--,t.writing||gO(this,t))};St.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=IIe(e)),!Dp.isEncoding(e))throw new kV(e);return this._writableState.defaultEncoding=e,this};function vIe(t,e,r,n,i){let s=e.objectMode?1:r.length;e.length+=s;let o=e.length<e.highWaterMark;return o||(e.needDrain=!0),e.writing||e.corked||e.errored||!e.constructed?(e.buffered.push({chunk:r,encoding:n,callback:i}),e.allBuffers&&n!=="buffer"&&(e.allBuffers=!1),e.allNoop&&i!==_O&&(e.allNoop=!1)):(e.writelen=s,e.writecb=i,e.writing=!0,e.sync=!0,t._write(r,n,e.onwrite),e.sync=!1),o&&!e.errored&&!e.destroyed}function vV(t,e,r,n,i,s,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new bd("write")):r?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function UV(t,e,r,n){--e.pendingcb,n(r),IO(e),Ql(t,r)}function UIe(t,e){let r=t._writableState,n=r.sync,i=r.writecb;if(typeof i!="function"){Ql(t,new WV);return}r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0,e?(e.stack,r.errored||(r.errored=e),t._readableState&&!t._readableState.errored&&(t._readableState.errored=e),n?na.nextTick(UV,t,r,e,i):UV(t,r,e,i)):(r.buffered.length>r.bufferedIndex&&gO(t,r),n?r.afterWriteTickInfo!==null&&r.afterWriteTickInfo.cb===i?r.afterWriteTickInfo.count++:(r.afterWriteTickInfo={count:1,cb:i,stream:t,state:r},na.nextTick(BIe,r.afterWriteTickInfo)):YV(t,r,1,i))}function BIe({stream:t,state:e,count:r,cb:n}){return e.afterWriteTickInfo=null,YV(t,e,r,n)}function YV(t,e,r,n){for(!e.ending&&!t.destroyed&&e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"));r-- >0;)e.pendingcb--,n();e.destroyed&&IO(e),NO(t,e)}function IO(t){if(t.writing)return;for(let i=t.bufferedIndex;i<t.buffered.length;++i){var e;let{chunk:s,callback:o}=t.buffered[i],a=t.objectMode?1:s.length;t.length-=a,o((e=t.errored)!==null&&e!==void 0?e:new bd("write"))}let r=t[Zl].splice(0);for(let i=0;i<r.length;i++){var n;r[i]((n=t.errored)!==null&&n!==void 0?n:new bd("end"))}xp(t)}function gO(t,e){if(e.corked||e.bufferProcessing||e.destroyed||!e.constructed)return;let{buffered:r,bufferedIndex:n,objectMode:i}=e,s=r.length-n;if(!s)return;let o=n;if(e.bufferProcessing=!0,s>1&&t._writev){e.pendingcb-=s-1;let a=e.allNoop?_O:c=>{for(let u=o;u<r.length;++u)r[u].callback(c)},l=e.allNoop&&o===0?r:BV(r,o);l.allBuffers=e.allBuffers,vV(t,e,!0,e.length,l,"",a),xp(e)}else{do{let{chunk:a,encoding:l,callback:c}=r[o];r[o++]=null;let u=i?1:a.length;vV(t,e,!1,u,a,l,c)}while(o<r.length&&!e.writing);o===r.length?xp(e):o>256?(r.splice(0,o),e.bufferedIndex=0):e.bufferedIndex=o}e.bufferProcessing=!1}St.prototype._write=function(t,e,r){if(this._writev)this._writev([{chunk:t,encoding:e}],r);else throw new LIe("_write()")};St.prototype._writev=null;St.prototype.end=function(t,e,r){let n=this._writableState;typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null);let i;if(t!=null){let s=$V(this,t,e);s instanceof mIe&&(i=s)}return n.corked&&(n.corked=1,this.uncork()),i||(!n.errored&&!n.ending?(n.ending=!0,NO(this,n,!0),n.ended=!0):n.finished?i=new PIe("end"):n.destroyed&&(i=new bd("end"))),typeof r=="function"&&(i||n.finished?na.nextTick(r,i):n[Zl].push(r)),this};function Pp(t){return t.ending&&!t.destroyed&&t.constructed&&t.length===0&&!t.errored&&t.buffered.length===0&&!t.finished&&!t.writing&&!t.errorEmitted&&!t.closeEmitted}function FIe(t,e){let r=!1;function n(i){if(r){Ql(t,i??WV());return}if(r=!0,e.pendingcb--,i){let s=e[Zl].splice(0);for(let o=0;o<s.length;o++)s[o](i);Ql(t,i,e.sync)}else Pp(e)&&(e.prefinished=!0,t.emit("prefinish"),e.pendingcb++,na.nextTick(mO,t,e))}e.sync=!0,e.pendingcb++;try{t._final(n)}catch(i){n(i)}e.sync=!1}function GIe(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.finalCalled=!0,FIe(t,e)):(e.prefinished=!0,t.emit("prefinish")))}function NO(t,e,r){Pp(e)&&(GIe(t,e),e.pendingcb===0&&(r?(e.pendingcb++,na.nextTick((n,i)=>{Pp(i)?mO(n,i):i.pendingcb--},t,e)):Pp(e)&&(e.pendingcb++,mO(t,e))))}function mO(t,e){e.pendingcb--,e.finished=!0;let r=e[Zl].splice(0);for(let n=0;n<r.length;n++)r[n]();if(t.emit("finish"),e.autoDestroy){let n=t._readableState;(!n||n.autoDestroy&&(n.endEmitted||n.readable===!1))&&t.destroy()}}_Ie(St.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(t){this._writableState&&(this._writableState.destroyed=t)}},writable:{__proto__:null,get(){let t=this._writableState;return!!t&&t.writable!==!1&&!t.destroyed&&!t.errored&&!t.ending&&!t.ended},set(t){this._writableState&&(this._writableState.writable=!!t)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let t=this._writableState;return t?!t.destroyed&&!t.ending&&t.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var HIe=Mp.destroy;St.prototype.destroy=function(t,e){let r=this._writableState;return!r.destroyed&&(r.bufferedIndex<r.buffered.length||r[Zl].length)&&na.nextTick(IO,r),HIe.call(this,t,e),this};St.prototype._undestroy=Mp.undestroy;St.prototype._destroy=function(t,e){e(t)};St.prototype[OIe.captureRejectionSymbol]=function(t){this.destroy(t)};var AO;function VV(){return AO===void 0&&(AO={}),AO}St.fromWeb=function(t,e){return VV().newStreamWritableFromWritableStream(t,e)};St.toWeb=function(t){return VV().newWritableStreamFromStreamWritable(t)}});var a2=O((DUe,o2)=>{var OO=je(),WIe=require("buffer"),{isReadable:kIe,isWritable:$Ie,isIterable:XV,isNodeStream:YIe,isReadableNodeStream:jV,isWritableNodeStream:zV,isDuplexNodeStream:VIe,isReadableStream:KV,isWritableStream:JV}=pi(),QV=Zi(),{AbortError:i2,codes:{ERR_INVALID_ARG_TYPE:qIe,ERR_INVALID_RETURN_VALUE:ZV}}=Dr(),{destroyer:tc}=ta(),XIe=Ri(),s2=Cd(),jIe=vp(),{createDeferredPromise:e2}=kr(),t2=uO(),r2=globalThis.Blob||WIe.Blob,zIe=typeof r2<"u"?function(e){return e instanceof r2}:function(e){return!1},KIe=globalThis.AbortController||wt().AbortController,{FunctionPrototypeCall:n2}=dt(),Ws=class extends XIe{constructor(e){super(e),e?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),e?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};o2.exports=function t(e,r){if(VIe(e))return e;if(jV(e))return ec({readable:e});if(zV(e))return ec({writable:e});if(YIe(e))return ec({writable:!1,readable:!1});if(KV(e))return ec({readable:s2.fromWeb(e)});if(JV(e))return ec({writable:jIe.fromWeb(e)});if(typeof e=="function"){let{value:i,write:s,final:o,destroy:a}=JIe(e);if(XV(i))return t2(Ws,i,{objectMode:!0,write:s,final:o,destroy:a});let l=i?.then;if(typeof l=="function"){let c,u=n2(l,i,d=>{if(d!=null)throw new ZV("nully","body",d)},d=>{tc(c,d)});return c=new Ws({objectMode:!0,readable:!1,write:s,final(d){o(async()=>{try{await u,OO.nextTick(d,null)}catch(E){OO.nextTick(d,E)}})},destroy:a})}throw new ZV("Iterable, AsyncIterable or AsyncFunction",r,i)}if(zIe(e))return t(e.arrayBuffer());if(XV(e))return t2(Ws,e,{objectMode:!0,writable:!1});if(KV(e?.readable)&&JV(e?.writable))return Ws.fromWeb(e);if(typeof e?.writable=="object"||typeof e?.readable=="object"){let i=e!=null&&e.readable?jV(e?.readable)?e?.readable:t(e.readable):void 0,s=e!=null&&e.writable?zV(e?.writable)?e?.writable:t(e.writable):void 0;return ec({readable:i,writable:s})}let n=e?.then;if(typeof n=="function"){let i;return n2(n,e,s=>{s!=null&&i.push(s),i.push(null)},s=>{tc(i,s)}),i=new Ws({objectMode:!0,writable:!1,read(){}})}throw new qIe(r,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],e)};function JIe(t){let{promise:e,resolve:r}=e2(),n=new KIe,i=n.signal;return{value:t((async function*(){for(;;){let o=e;e=null;let{chunk:a,done:l,cb:c}=await o;if(OO.nextTick(c),l)return;if(i.aborted)throw new i2(void 0,{cause:i.reason});({promise:e,resolve:r}=e2()),yield a}})(),{signal:i}),write(o,a,l){let c=r;r=null,c({chunk:o,done:!1,cb:l})},final(o){let a=r;r=null,a({done:!0,cb:o})},destroy(o,a){n.abort(),a(o)}}}function ec(t){let e=t.readable&&typeof t.readable.read!="function"?s2.wrap(t.readable):t.readable,r=t.writable,n=!!kIe(e),i=!!$Ie(r),s,o,a,l,c;function u(d){let E=l;l=null,E?E(d):d&&c.destroy(d)}return c=new Ws({readableObjectMode:!!(e!=null&&e.readableObjectMode),writableObjectMode:!!(r!=null&&r.writableObjectMode),readable:n,writable:i}),i&&(QV(r,d=>{i=!1,d&&tc(e,d),u(d)}),c._write=function(d,E,f){r.write(d,E)?f():s=f},c._final=function(d){r.end(),o=d},r.on("drain",function(){if(s){let d=s;s=null,d()}}),r.on("finish",function(){if(o){let d=o;o=null,d()}})),n&&(QV(e,d=>{n=!1,d&&tc(e,d),u(d)}),e.on("readable",function(){if(a){let d=a;a=null,d()}}),e.on("end",function(){c.push(null)}),c._read=function(){for(;;){let d=e.read();if(d===null){a=c._read;return}if(!c.push(d))return}}),c._destroy=function(d,E){!d&&l!==null&&(d=new i2),a=null,s=null,o=null,l===null?E(d):(l=E,tc(r,d),tc(e,d))},c}});var Ri=O((PUe,u2)=>{"use strict";var{ObjectDefineProperties:QIe,ObjectGetOwnPropertyDescriptor:es,ObjectKeys:ZIe,ObjectSetPrototypeOf:l2}=dt();u2.exports=Fn;var bO=Cd(),In=vp();l2(Fn.prototype,bO.prototype);l2(Fn,bO);{let t=ZIe(In.prototype);for(let e=0;e<t.length;e++){let r=t[e];Fn.prototype[r]||(Fn.prototype[r]=In.prototype[r])}}function Fn(t){if(!(this instanceof Fn))return new Fn(t);bO.call(this,t),In.call(this,t),t?(this.allowHalfOpen=t.allowHalfOpen!==!1,t.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),t.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}QIe(Fn.prototype,{writable:{__proto__:null,...es(In.prototype,"writable")},writableHighWaterMark:{__proto__:null,...es(In.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...es(In.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...es(In.prototype,"writableBuffer")},writableLength:{__proto__:null,...es(In.prototype,"writableLength")},writableFinished:{__proto__:null,...es(In.prototype,"writableFinished")},writableCorked:{__proto__:null,...es(In.prototype,"writableCorked")},writableEnded:{__proto__:null,...es(In.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...es(In.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(t){this._readableState&&this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}});var CO;function c2(){return CO===void 0&&(CO={}),CO}Fn.fromWeb=function(t,e){return c2().newStreamDuplexFromReadableWritablePair(t,e)};Fn.toWeb=function(t){return c2().newReadableWritablePairFromDuplex(t)};var yO;Fn.from=function(t){return yO||(yO=a2()),yO(t,"body")}});var DO=O((xUe,f2)=>{"use strict";var{ObjectSetPrototypeOf:d2,Symbol:ege}=dt();f2.exports=ts;var{ERR_METHOD_NOT_IMPLEMENTED:tge}=Dr().codes,LO=Ri(),{getHighWaterMark:rge}=Nd();d2(ts.prototype,LO.prototype);d2(ts,LO);var Ld=ege("kCallback");function ts(t){if(!(this instanceof ts))return new ts(t);let e=t?rge(this,t,"readableHighWaterMark",!0):null;e===0&&(t={...t,highWaterMark:null,readableHighWaterMark:e,writableHighWaterMark:t.writableHighWaterMark||0}),LO.call(this,t),this._readableState.sync=!1,this[Ld]=null,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",nge)}function wO(t){typeof this._flush=="function"&&!this.destroyed?this._flush((e,r)=>{if(e){t?t(e):this.destroy(e);return}r!=null&&this.push(r),this.push(null),t&&t()}):(this.push(null),t&&t())}function nge(){this._final!==wO&&wO.call(this)}ts.prototype._final=wO;ts.prototype._transform=function(t,e,r){throw new tge("_transform()")};ts.prototype._write=function(t,e,r){let n=this._readableState,i=this._writableState,s=n.length;this._transform(t,e,(o,a)=>{if(o){r(o);return}a!=null&&this.push(a),i.ended||s===n.length||n.length<n.highWaterMark?r():this[Ld]=r})};ts.prototype._read=function(){if(this[Ld]){let t=this[Ld];this[Ld]=null,t()}}});var xO=O((MUe,h2)=>{"use strict";var{ObjectSetPrototypeOf:E2}=dt();h2.exports=rc;var PO=DO();E2(rc.prototype,PO.prototype);E2(rc,PO);function rc(t){if(!(this instanceof rc))return new rc(t);PO.call(this,t)}rc.prototype._transform=function(t,e,r){r(null,t)}});var Gp=O((vUe,A2)=>{var Dd=je(),{ArrayIsArray:ige,Promise:sge,SymbolAsyncIterator:oge,SymbolDispose:age}=dt(),Fp=Zi(),{once:lge}=kr(),cge=ta(),T2=Ri(),{aggregateTwoErrors:uge,codes:{ERR_INVALID_ARG_TYPE:kO,ERR_INVALID_RETURN_VALUE:MO,ERR_MISSING_ARGS:dge,ERR_STREAM_DESTROYED:fge,ERR_STREAM_PREMATURE_CLOSE:Ege},AbortError:hge}=Dr(),{validateFunction:Tge,validateAbortSignal:pge}=Xl(),{isIterable:ia,isReadable:vO,isReadableNodeStream:Bp,isNodeStream:p2,isTransformStream:nc,isWebStream:Sge,isReadableStream:UO,isReadableFinished:Rge}=pi(),Age=globalThis.AbortController||wt().AbortController,BO,FO,GO;function S2(t,e,r){let n=!1;t.on("close",()=>{n=!0});let i=Fp(t,{readable:e,writable:r},s=>{n=!s});return{destroy:s=>{n||(n=!0,cge.destroyer(t,s||new fge("pipe")))},cleanup:i}}function mge(t){return Tge(t[t.length-1],"streams[stream.length - 1]"),t.pop()}function HO(t){if(ia(t))return t;if(Bp(t))return _ge(t);throw new kO("val",["Readable","Iterable","AsyncIterable"],t)}async function*_ge(t){FO||(FO=Cd()),yield*FO.prototype[oge].call(t)}async function Up(t,e,r,{end:n}){let i,s=null,o=c=>{if(c&&(i=c),s){let u=s;s=null,u()}},a=()=>new sge((c,u)=>{i?u(i):s=()=>{i?u(i):c()}});e.on("drain",o);let l=Fp(e,{readable:!1},o);try{e.writableNeedDrain&&await a();for await(let c of t)e.write(c)||await a();n&&(e.end(),await a()),r()}catch(c){r(i!==c?uge(i,c):c)}finally{l(),e.off("drain",o)}}async function WO(t,e,r,{end:n}){nc(e)&&(e=e.writable);let i=e.getWriter();try{for await(let s of t)await i.ready,i.write(s).catch(()=>{});await i.ready,n&&await i.close(),r()}catch(s){try{await i.abort(s),r(s)}catch(o){r(o)}}}function Ige(...t){return R2(t,lge(mge(t)))}function R2(t,e,r){if(t.length===1&&ige(t[0])&&(t=t[0]),t.length<2)throw new dge("streams");let n=new Age,i=n.signal,s=r?.signal,o=[];pge(s,"options.signal");function a(){T(new hge)}GO=GO||kr().addAbortListener;let l;s&&(l=GO(s,a));let c,u,d=[],E=0;function f(R){T(R,--E===0)}function T(R,A){var g;if(R&&(!c||c.code==="ERR_STREAM_PREMATURE_CLOSE")&&(c=R),!(!c&&!A)){for(;d.length;)d.shift()(c);(g=l)===null||g===void 0||g[age](),n.abort(),A&&(c||o.forEach(w=>w()),Dd.nextTick(e,c,u))}}let h;for(let R=0;R<t.length;R++){let A=t[R],g=R<t.length-1,w=R>0,I=g||r?.end!==!1,D=R===t.length-1;if(p2(A)){let b=function(P){P&&P.name!=="AbortError"&&P.code!=="ERR_STREAM_PREMATURE_CLOSE"&&f(P)};var m=b;if(I){let{destroy:P,cleanup:M}=S2(A,g,w);d.push(P),vO(A)&&D&&o.push(M)}A.on("error",b),vO(A)&&D&&o.push(()=>{A.removeListener("error",b)})}if(R===0)if(typeof A=="function"){if(h=A({signal:i}),!ia(h))throw new MO("Iterable, AsyncIterable or Stream","source",h)}else ia(A)||Bp(A)||nc(A)?h=A:h=T2.from(A);else if(typeof A=="function"){if(nc(h)){var p;h=HO((p=h)===null||p===void 0?void 0:p.readable)}else h=HO(h);if(h=A(h,{signal:i}),g){if(!ia(h,!0))throw new MO("AsyncIterable",`transform[${R-1}]`,h)}else{var S;BO||(BO=xO());let b=new BO({objectMode:!0}),P=(S=h)===null||S===void 0?void 0:S.then;if(typeof P=="function")E++,P.call(h,G=>{u=G,G!=null&&b.write(G),I&&b.end(),Dd.nextTick(f)},G=>{b.destroy(G),Dd.nextTick(f,G)});else if(ia(h,!0))E++,Up(h,b,f,{end:I});else if(UO(h)||nc(h)){let G=h.readable||h;E++,Up(G,b,f,{end:I})}else throw new MO("AsyncIterable or Promise","destination",h);h=b;let{destroy:M,cleanup:B}=S2(h,!1,!0);d.push(M),D&&o.push(B)}}else if(p2(A)){if(Bp(h)){E+=2;let b=gge(h,A,f,{end:I});vO(A)&&D&&o.push(b)}else if(nc(h)||UO(h)){let b=h.readable||h;E++,Up(b,A,f,{end:I})}else if(ia(h))E++,Up(h,A,f,{end:I});else throw new kO("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],h);h=A}else if(Sge(A)){if(Bp(h))E++,WO(HO(h),A,f,{end:I});else if(UO(h)||ia(h))E++,WO(h,A,f,{end:I});else if(nc(h))E++,WO(h.readable,A,f,{end:I});else throw new kO("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],h);h=A}else h=T2.from(A)}return(i!=null&&i.aborted||s!=null&&s.aborted)&&Dd.nextTick(a),h}function gge(t,e,r,{end:n}){let i=!1;if(e.on("close",()=>{i||r(new Ege)}),t.pipe(e,{end:!1}),n){let o=function(){i=!0,e.end()};var s=o;Rge(t)?Dd.nextTick(o):t.once("end",o)}else r();return Fp(t,{readable:!0,writable:!1},o=>{let a=t._readableState;o&&o.code==="ERR_STREAM_PREMATURE_CLOSE"&&a&&a.ended&&!a.errored&&!a.errorEmitted?t.once("end",r).once("error",r):r(o)}),Fp(e,{readable:!1,writable:!0},r)}A2.exports={pipelineImpl:R2,pipeline:Ige}});var YO=O((UUe,O2)=>{"use strict";var{pipeline:Nge}=Gp(),Hp=Ri(),{destroyer:Oge}=ta(),{isNodeStream:Wp,isReadable:m2,isWritable:_2,isWebStream:$O,isTransformStream:sa,isWritableStream:I2,isReadableStream:g2}=pi(),{AbortError:Cge,codes:{ERR_INVALID_ARG_VALUE:N2,ERR_MISSING_ARGS:yge}}=Dr(),bge=Zi();O2.exports=function(...e){if(e.length===0)throw new yge("streams");if(e.length===1)return Hp.from(e[0]);let r=[...e];if(typeof e[0]=="function"&&(e[0]=Hp.from(e[0])),typeof e[e.length-1]=="function"){let f=e.length-1;e[f]=Hp.from(e[f])}for(let f=0;f<e.length;++f)if(!(!Wp(e[f])&&!$O(e[f]))){if(f<e.length-1&&!(m2(e[f])||g2(e[f])||sa(e[f])))throw new N2(`streams[${f}]`,r[f],"must be readable");if(f>0&&!(_2(e[f])||I2(e[f])||sa(e[f])))throw new N2(`streams[${f}]`,r[f],"must be writable")}let n,i,s,o,a;function l(f){let T=o;o=null,T?T(f):f?a.destroy(f):!E&&!d&&a.destroy()}let c=e[0],u=Nge(e,l),d=!!(_2(c)||I2(c)||sa(c)),E=!!(m2(u)||g2(u)||sa(u));if(a=new Hp({writableObjectMode:!!(c!=null&&c.writableObjectMode),readableObjectMode:!!(u!=null&&u.readableObjectMode),writable:d,readable:E}),d){if(Wp(c))a._write=function(T,h,p){c.write(T,h)?p():n=p},a._final=function(T){c.end(),i=T},c.on("drain",function(){if(n){let T=n;n=null,T()}});else if($O(c)){let h=(sa(c)?c.writable:c).getWriter();a._write=async function(p,S,m){try{await h.ready,h.write(p).catch(()=>{}),m()}catch(R){m(R)}},a._final=async function(p){try{await h.ready,h.close().catch(()=>{}),i=p}catch(S){p(S)}}}let f=sa(u)?u.readable:u;bge(f,()=>{if(i){let T=i;i=null,T()}})}if(E){if(Wp(u))u.on("readable",function(){if(s){let f=s;s=null,f()}}),u.on("end",function(){a.push(null)}),a._read=function(){for(;;){let f=u.read();if(f===null){s=a._read;return}if(!a.push(f))return}};else if($O(u)){let T=(sa(u)?u.readable:u).getReader();a._read=async function(){for(;;)try{let{value:h,done:p}=await T.read();if(!a.push(h))return;if(p){a.push(null);return}}catch{return}}}}return a._destroy=function(f,T){!f&&o!==null&&(f=new Cge),s=null,n=null,i=null,o===null?T(f):(o=T,Wp(u)&&Oge(u,f))},a}});var v2=O((BUe,XO)=>{"use strict";var wge=globalThis.AbortController||wt().AbortController,{codes:{ERR_INVALID_ARG_VALUE:Lge,ERR_INVALID_ARG_TYPE:Pd,ERR_MISSING_ARGS:Dge,ERR_OUT_OF_RANGE:Pge},AbortError:Ai}=Dr(),{validateAbortSignal:oa,validateInteger:C2,validateObject:aa}=Xl(),xge=dt().Symbol("kWeak"),Mge=dt().Symbol("kResistStopPropagation"),{finished:vge}=Zi(),Uge=YO(),{addAbortSignalNoValidate:Bge}=gd(),{isWritable:Fge,isNodeStream:Gge}=pi(),{deprecate:Hge}=kr(),{ArrayPrototypePush:Wge,Boolean:kge,MathFloor:y2,Number:$ge,NumberIsNaN:Yge,Promise:b2,PromiseReject:w2,PromiseResolve:Vge,PromisePrototypeThen:L2,Symbol:P2}=dt(),kp=P2("kEmpty"),D2=P2("kEof");function qge(t,e){if(e!=null&&aa(e,"options"),e?.signal!=null&&oa(e.signal,"options.signal"),Gge(t)&&!Fge(t))throw new Lge("stream",t,"must be writable");let r=Uge(this,t);return e!=null&&e.signal&&Bge(e.signal,r),r}function $p(t,e){if(typeof t!="function")throw new Pd("fn",["Function","AsyncFunction"],t);e!=null&&aa(e,"options"),e?.signal!=null&&oa(e.signal,"options.signal");let r=1;e?.concurrency!=null&&(r=y2(e.concurrency));let n=r-1;return e?.highWaterMark!=null&&(n=y2(e.highWaterMark)),C2(r,"options.concurrency",1),C2(n,"options.highWaterMark",0),n+=r,async function*(){let s=kr().AbortSignalAny([e?.signal].filter(kge)),o=this,a=[],l={signal:s},c,u,d=!1,E=0;function f(){d=!0,T()}function T(){E-=1,h()}function h(){u&&!d&&E<r&&a.length<n&&(u(),u=null)}async function p(){try{for await(let S of o){if(d)return;if(s.aborted)throw new Ai;try{if(S=t(S,l),S===kp)continue;S=Vge(S)}catch(m){S=w2(m)}E+=1,L2(S,T,f),a.push(S),c&&(c(),c=null),!d&&(a.length>=n||E>=r)&&await new b2(m=>{u=m})}a.push(D2)}catch(S){let m=w2(S);L2(m,T,f),a.push(m)}finally{d=!0,c&&(c(),c=null)}}p();try{for(;;){for(;a.length>0;){let S=await a[0];if(S===D2)return;if(s.aborted)throw new Ai;S!==kp&&(yield S),a.shift(),h()}await new b2(S=>{c=S})}}finally{d=!0,u&&(u(),u=null)}}.call(this)}function Xge(t=void 0){return t!=null&&aa(t,"options"),t?.signal!=null&&oa(t.signal,"options.signal"),async function*(){let r=0;for await(let i of this){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new Ai({cause:t.signal.reason});yield[r++,i]}}.call(this)}async function x2(t,e=void 0){for await(let r of qO.call(this,t,e))return!0;return!1}async function jge(t,e=void 0){if(typeof t!="function")throw new Pd("fn",["Function","AsyncFunction"],t);return!await x2.call(this,async(...r)=>!await t(...r),e)}async function zge(t,e){for await(let r of qO.call(this,t,e))return r}async function Kge(t,e){if(typeof t!="function")throw new Pd("fn",["Function","AsyncFunction"],t);async function r(n,i){return await t(n,i),kp}for await(let n of $p.call(this,r,e));}function qO(t,e){if(typeof t!="function")throw new Pd("fn",["Function","AsyncFunction"],t);async function r(n,i){return await t(n,i)?n:kp}return $p.call(this,r,e)}var VO=class extends Dge{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function Jge(t,e,r){var n;if(typeof t!="function")throw new Pd("reducer",["Function","AsyncFunction"],t);r!=null&&aa(r,"options"),r?.signal!=null&&oa(r.signal,"options.signal");let i=arguments.length>1;if(r!=null&&(n=r.signal)!==null&&n!==void 0&&n.aborted){let c=new Ai(void 0,{cause:r.signal.reason});throw this.once("error",()=>{}),await vge(this.destroy(c)),c}let s=new wge,o=s.signal;if(r!=null&&r.signal){let c={once:!0,[xge]:this,[Mge]:!0};r.signal.addEventListener("abort",()=>s.abort(),c)}let a=!1;try{for await(let c of this){var l;if(a=!0,r!=null&&(l=r.signal)!==null&&l!==void 0&&l.aborted)throw new Ai;i?e=await t(e,c,{signal:o}):(e=c,i=!0)}if(!a&&!i)throw new VO}finally{s.abort()}return e}async function Qge(t){t!=null&&aa(t,"options"),t?.signal!=null&&oa(t.signal,"options.signal");let e=[];for await(let n of this){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new Ai(void 0,{cause:t.signal.reason});Wge(e,n)}return e}function Zge(t,e){let r=$p.call(this,t,e);return async function*(){for await(let i of r)yield*i}.call(this)}function M2(t){if(t=$ge(t),Yge(t))return 0;if(t<0)throw new Pge("number",">= 0",t);return t}function eNe(t,e=void 0){return e!=null&&aa(e,"options"),e?.signal!=null&&oa(e.signal,"options.signal"),t=M2(t),async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new Ai;for await(let s of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new Ai;t--<=0&&(yield s)}}.call(this)}function tNe(t,e=void 0){return e!=null&&aa(e,"options"),e?.signal!=null&&oa(e.signal,"options.signal"),t=M2(t),async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new Ai;for await(let s of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new Ai;if(t-- >0&&(yield s),t<=0)return}}.call(this)}XO.exports.streamReturningOperators={asIndexedPairs:Hge(Xge,"readable.asIndexedPairs will be removed in a future version."),drop:eNe,filter:qO,flatMap:Zge,map:$p,take:tNe,compose:qge};XO.exports.promiseReturningOperators={every:jge,forEach:Kge,reduce:Jge,toArray:Qge,some:x2,find:zge}});var jO=O((FUe,U2)=>{"use strict";var{ArrayPrototypePop:rNe,Promise:nNe}=dt(),{isIterable:iNe,isNodeStream:sNe,isWebStream:oNe}=pi(),{pipelineImpl:aNe}=Gp(),{finished:lNe}=Zi();zO();function cNe(...t){return new nNe((e,r)=>{let n,i,s=t[t.length-1];if(s&&typeof s=="object"&&!sNe(s)&&!iNe(s)&&!oNe(s)){let o=rNe(t);n=o.signal,i=o.end}aNe(t,(o,a)=>{o?r(o):e(a)},{signal:n,end:i})})}U2.exports={finished:lNe,pipeline:cNe}});var zO=O((GUe,V2)=>{"use strict";var{Buffer:uNe}=require("buffer"),{ObjectDefineProperty:rs,ObjectKeys:G2,ReflectApply:H2}=dt(),{promisify:{custom:W2}}=kr(),{streamReturningOperators:B2,promiseReturningOperators:F2}=v2(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:k2}}=Dr(),dNe=YO(),{setDefaultHighWaterMark:fNe,getDefaultHighWaterMark:ENe}=Nd(),{pipeline:$2}=Gp(),{destroyer:hNe}=ta(),Y2=Zi(),KO=jO(),xd=pi(),ot=V2.exports=gp().Stream;ot.isDestroyed=xd.isDestroyed;ot.isDisturbed=xd.isDisturbed;ot.isErrored=xd.isErrored;ot.isReadable=xd.isReadable;ot.isWritable=xd.isWritable;ot.Readable=Cd();for(let t of G2(B2)){let r=function(...n){if(new.target)throw k2();return ot.Readable.from(H2(e,this,n))},e=B2[t];rs(r,"name",{__proto__:null,value:e.name}),rs(r,"length",{__proto__:null,value:e.length}),rs(ot.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}for(let t of G2(F2)){let r=function(...n){if(new.target)throw k2();return H2(e,this,n)},e=F2[t];rs(r,"name",{__proto__:null,value:e.name}),rs(r,"length",{__proto__:null,value:e.length}),rs(ot.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}ot.Writable=vp();ot.Duplex=Ri();ot.Transform=DO();ot.PassThrough=xO();ot.pipeline=$2;var{addAbortSignal:TNe}=gd();ot.addAbortSignal=TNe;ot.finished=Y2;ot.destroy=hNe;ot.compose=dNe;ot.setDefaultHighWaterMark=fNe;ot.getDefaultHighWaterMark=ENe;rs(ot,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return KO}});rs($2,W2,{__proto__:null,enumerable:!0,get(){return KO.pipeline}});rs(Y2,W2,{__proto__:null,enumerable:!0,get(){return KO.finished}});ot.Stream=ot;ot._isUint8Array=function(e){return e instanceof Uint8Array};ot._uint8ArrayToBuffer=function(e){return uNe.from(e.buffer,e.byteOffset,e.byteLength)}});var q2=O((HUe,be)=>{"use strict";var Vt=require("stream");if(Vt&&process.env.READABLE_STREAM==="disable"){let t=Vt.promises;be.exports._uint8ArrayToBuffer=Vt._uint8ArrayToBuffer,be.exports._isUint8Array=Vt._isUint8Array,be.exports.isDisturbed=Vt.isDisturbed,be.exports.isErrored=Vt.isErrored,be.exports.isReadable=Vt.isReadable,be.exports.Readable=Vt.Readable,be.exports.Writable=Vt.Writable,be.exports.Duplex=Vt.Duplex,be.exports.Transform=Vt.Transform,be.exports.PassThrough=Vt.PassThrough,be.exports.addAbortSignal=Vt.addAbortSignal,be.exports.finished=Vt.finished,be.exports.destroy=Vt.destroy,be.exports.pipeline=Vt.pipeline,be.exports.compose=Vt.compose,Object.defineProperty(Vt,"promises",{configurable:!0,enumerable:!0,get(){return t}}),be.exports.Stream=Vt.Stream}else{let t=zO(),e=jO(),r=t.Readable.destroy;be.exports=t.Readable,be.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,be.exports._isUint8Array=t._isUint8Array,be.exports.isDisturbed=t.isDisturbed,be.exports.isErrored=t.isErrored,be.exports.isReadable=t.isReadable,be.exports.Readable=t.Readable,be.exports.Writable=t.Writable,be.exports.Duplex=t.Duplex,be.exports.Transform=t.Transform,be.exports.PassThrough=t.PassThrough,be.exports.addAbortSignal=t.addAbortSignal,be.exports.finished=t.finished,be.exports.destroy=t.destroy,be.exports.destroy=r,be.exports.pipeline=t.pipeline,be.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return e}}),be.exports.Stream=t.Stream}be.exports.default=be.exports});var j2=O((WUe,X2)=>{"use strict";var{Transform:pNe}=q2(),SNe=hp(),JO=class extends pNe{constructor(e){super(e),this.checksum=Buffer.allocUnsafe(4),this.checksum.writeInt32BE(0,0),this.rawSize=0}_transform(e,r,n){e&&(this.checksum=SNe.buf(e,this.checksum)>>>0,this.rawSize+=e.length),n(null,e)}digest(e){let r=Buffer.allocUnsafe(4);return r.writeUInt32BE(this.checksum>>>0,0),e?r.toString(e):r}hex(){return this.digest("hex").toUpperCase()}size(){return this.rawSize}};X2.exports=JO});var K2=O((kUe,z2)=>{"use strict";var{DeflateRaw:RNe}=require("zlib"),ANe=hp(),QO=class extends RNe{constructor(e){super(e),this.checksum=Buffer.allocUnsafe(4),this.checksum.writeInt32BE(0,0),this.rawSize=0,this.compressedSize=0}push(e,r){return e&&(this.compressedSize+=e.length),super.push(e,r)}_transform(e,r,n){e&&(this.checksum=ANe.buf(e,this.checksum)>>>0,this.rawSize+=e.length),super._transform(e,r,n)}digest(e){let r=Buffer.allocUnsafe(4);return r.writeUInt32BE(this.checksum>>>0,0),e?r.toString(e):r}hex(){return this.digest("hex").toUpperCase()}size(e=!1){return e?this.compressedSize:this.rawSize}};z2.exports=QO});var ZO=O(($Ue,J2)=>{"use strict";J2.exports={CRC32Stream:j2(),DeflateCRC32Stream:K2()}});var eq=O((XUe,Z2)=>{var mNe=require("util").inherits,_Ne=hp(),{CRC32Stream:INe}=ZO(),{DeflateCRC32Stream:gNe}=ZO(),Q2=HN(),YUe=yg(),VUe=Og(),pe=Cg(),qUe=FN(),ae=FT(),nr=Z2.exports=function(t){if(!(this instanceof nr))return new nr(t);t=this.options=this._defaults(t),Q2.call(this,t),this._entry=null,this._entries=[],this._archive={centralLength:0,centralOffset:0,comment:"",finish:!1,finished:!1,processing:!1,forceZip64:t.forceZip64,forceLocalTime:t.forceLocalTime}};mNe(nr,Q2);nr.prototype._afterAppend=function(t){this._entries.push(t),t.getGeneralPurposeBit().usesDataDescriptor()&&this._writeDataDescriptor(t),this._archive.processing=!1,this._entry=null,this._archive.finish&&!this._archive.finished&&this._finish()};nr.prototype._appendBuffer=function(t,e,r){e.length===0&&t.setMethod(pe.METHOD_STORED);var n=t.getMethod();if(n===pe.METHOD_STORED&&(t.setSize(e.length),t.setCompressedSize(e.length),t.setCrc(_Ne.buf(e)>>>0)),this._writeLocalFileHeader(t),n===pe.METHOD_STORED){this.write(e),this._afterAppend(t),r(null,t);return}else if(n===pe.METHOD_DEFLATED){this._smartStream(t,r).end(e);return}else{r(new Error("compression method "+n+" not implemented"));return}};nr.prototype._appendStream=function(t,e,r){t.getGeneralPurposeBit().useDataDescriptor(!0),t.setVersionNeededToExtract(pe.MIN_VERSION_DATA_DESCRIPTOR),this._writeLocalFileHeader(t);var n=this._smartStream(t,r);e.once("error",function(i){n.emit("error",i),n.end()}),e.pipe(n)};nr.prototype._defaults=function(t){return typeof t!="object"&&(t={}),typeof t.zlib!="object"&&(t.zlib={}),typeof t.zlib.level!="number"&&(t.zlib.level=pe.ZLIB_BEST_SPEED),t.forceZip64=!!t.forceZip64,t.forceLocalTime=!!t.forceLocalTime,t};nr.prototype._finish=function(){this._archive.centralOffset=this.offset,this._entries.forEach(function(t){this._writeCentralFileHeader(t)}.bind(this)),this._archive.centralLength=this.offset-this._archive.centralOffset,this.isZip64()&&this._writeCentralDirectoryZip64(),this._writeCentralDirectoryEnd(),this._archive.processing=!1,this._archive.finish=!0,this._archive.finished=!0,this.end()};nr.prototype._normalizeEntry=function(t){t.getMethod()===-1&&t.setMethod(pe.METHOD_DEFLATED),t.getMethod()===pe.METHOD_DEFLATED&&(t.getGeneralPurposeBit().useDataDescriptor(!0),t.setVersionNeededToExtract(pe.MIN_VERSION_DATA_DESCRIPTOR)),t.getTime()===-1&&t.setTime(new Date,this._archive.forceLocalTime),t._offsets={file:0,data:0,contents:0}};nr.prototype._smartStream=function(t,e){var r=t.getMethod()===pe.METHOD_DEFLATED,n=r?new gNe(this.options.zlib):new INe,i=null;function s(){var o=n.digest().readUInt32BE(0);t.setCrc(o),t.setSize(n.size()),t.setCompressedSize(n.size(!0)),this._afterAppend(t),e(i,t)}return n.once("end",s.bind(this)),n.once("error",function(o){i=o}),n.pipe(this,{end:!1}),n};nr.prototype._writeCentralDirectoryEnd=function(){var t=this._entries.length,e=this._archive.centralLength,r=this._archive.centralOffset;this.isZip64()&&(t=pe.ZIP64_MAGIC_SHORT,e=pe.ZIP64_MAGIC,r=pe.ZIP64_MAGIC),this.write(ae.getLongBytes(pe.SIG_EOCD)),this.write(pe.SHORT_ZERO),this.write(pe.SHORT_ZERO),this.write(ae.getShortBytes(t)),this.write(ae.getShortBytes(t)),this.write(ae.getLongBytes(e)),this.write(ae.getLongBytes(r));var n=this.getComment(),i=Buffer.byteLength(n);this.write(ae.getShortBytes(i)),this.write(n)};nr.prototype._writeCentralDirectoryZip64=function(){this.write(ae.getLongBytes(pe.SIG_ZIP64_EOCD)),this.write(ae.getEightBytes(44)),this.write(ae.getShortBytes(pe.MIN_VERSION_ZIP64)),this.write(ae.getShortBytes(pe.MIN_VERSION_ZIP64)),this.write(pe.LONG_ZERO),this.write(pe.LONG_ZERO),this.write(ae.getEightBytes(this._entries.length)),this.write(ae.getEightBytes(this._entries.length)),this.write(ae.getEightBytes(this._archive.centralLength)),this.write(ae.getEightBytes(this._archive.centralOffset)),this.write(ae.getLongBytes(pe.SIG_ZIP64_EOCD_LOC)),this.write(pe.LONG_ZERO),this.write(ae.getEightBytes(this._archive.centralOffset+this._archive.centralLength)),this.write(ae.getLongBytes(1))};nr.prototype._writeCentralFileHeader=function(t){var e=t.getGeneralPurposeBit(),r=t.getMethod(),n=t._offsets.file,i=t.getSize(),s=t.getCompressedSize();if(t.isZip64()||n>pe.ZIP64_MAGIC){i=pe.ZIP64_MAGIC,s=pe.ZIP64_MAGIC,n=pe.ZIP64_MAGIC,t.setVersionNeededToExtract(pe.MIN_VERSION_ZIP64);var o=Buffer.concat([ae.getShortBytes(pe.ZIP64_EXTRA_ID),ae.getShortBytes(24),ae.getEightBytes(t.getSize()),ae.getEightBytes(t.getCompressedSize()),ae.getEightBytes(t._offsets.file)],28);t.setExtra(o)}this.write(ae.getLongBytes(pe.SIG_CFH)),this.write(ae.getShortBytes(t.getPlatform()<<8|pe.VERSION_MADEBY)),this.write(ae.getShortBytes(t.getVersionNeededToExtract())),this.write(e.encode()),this.write(ae.getShortBytes(r)),this.write(ae.getLongBytes(t.getTimeDos())),this.write(ae.getLongBytes(t.getCrc())),this.write(ae.getLongBytes(s)),this.write(ae.getLongBytes(i));var a=t.getName(),l=t.getComment(),c=t.getCentralDirectoryExtra();e.usesUTF8ForNames()&&(a=Buffer.from(a),l=Buffer.from(l)),this.write(ae.getShortBytes(a.length)),this.write(ae.getShortBytes(c.length)),this.write(ae.getShortBytes(l.length)),this.write(pe.SHORT_ZERO),this.write(ae.getShortBytes(t.getInternalAttributes())),this.write(ae.getLongBytes(t.getExternalAttributes())),this.write(ae.getLongBytes(n)),this.write(a),this.write(c),this.write(l)};nr.prototype._writeDataDescriptor=function(t){this.write(ae.getLongBytes(pe.SIG_DD)),this.write(ae.getLongBytes(t.getCrc())),t.isZip64()?(this.write(ae.getEightBytes(t.getCompressedSize())),this.write(ae.getEightBytes(t.getSize()))):(this.write(ae.getLongBytes(t.getCompressedSize())),this.write(ae.getLongBytes(t.getSize())))};nr.prototype._writeLocalFileHeader=function(t){var e=t.getGeneralPurposeBit(),r=t.getMethod(),n=t.getName(),i=t.getLocalFileDataExtra();t.isZip64()&&(e.useDataDescriptor(!0),t.setVersionNeededToExtract(pe.MIN_VERSION_ZIP64)),e.usesUTF8ForNames()&&(n=Buffer.from(n)),t._offsets.file=this.offset,this.write(ae.getLongBytes(pe.SIG_LFH)),this.write(ae.getShortBytes(t.getVersionNeededToExtract())),this.write(e.encode()),this.write(ae.getShortBytes(r)),this.write(ae.getLongBytes(t.getTimeDos())),t._offsets.data=this.offset,e.usesDataDescriptor()?(this.write(pe.LONG_ZERO),this.write(pe.LONG_ZERO),this.write(pe.LONG_ZERO)):(this.write(ae.getLongBytes(t.getCrc())),this.write(ae.getLongBytes(t.getCompressedSize())),this.write(ae.getLongBytes(t.getSize()))),this.write(ae.getShortBytes(n.length)),this.write(ae.getShortBytes(i.length)),this.write(n),this.write(i),t._offsets.contents=this.offset};nr.prototype.getComment=function(t){return this._archive.comment!==null?this._archive.comment:""};nr.prototype.isZip64=function(){return this._archive.forceZip64||this._entries.length>pe.ZIP64_MAGIC_SHORT||this._archive.centralLength>pe.ZIP64_MAGIC||this._archive.centralOffset>pe.ZIP64_MAGIC};nr.prototype.setComment=function(t){this._archive.comment=t}});var eC=O((jUe,tq)=>{tq.exports={ArchiveEntry:BT(),ZipArchiveEntry:yg(),ArchiveOutputStream:HN(),ZipArchiveOutputStream:eq()}});var nq=O((zUe,rq)=>{var NNe=require("util").inherits,rC=eC().ZipArchiveOutputStream,ONe=eC().ZipArchiveEntry,tC=_l(),ic=rq.exports=function(t){if(!(this instanceof ic))return new ic(t);t=this.options=t||{},t.zlib=t.zlib||{},rC.call(this,t),typeof t.level=="number"&&t.level>=0&&(t.zlib.level=t.level,delete t.level),!t.forceZip64&&typeof t.zlib.level=="number"&&t.zlib.level===0&&(t.store=!0),t.namePrependSlash=t.namePrependSlash||!1,t.comment&&t.comment.length>0&&this.setComment(t.comment)};NNe(ic,rC);ic.prototype._normalizeFileData=function(t){t=tC.defaults(t,{type:"file",name:null,namePrependSlash:this.options.namePrependSlash,linkname:null,date:null,mode:null,store:this.options.store,comment:""});var e=t.type==="directory",r=t.type==="symlink";return t.name&&(t.name=tC.sanitizePath(t.name),!r&&t.name.slice(-1)==="/"?(e=!0,t.type="directory"):e&&(t.name+="/")),(e||r)&&(t.store=!0),t.date=tC.dateify(t.date),t};ic.prototype.entry=function(t,e,r){if(typeof r!="function"&&(r=this._emitErrorCallback.bind(this)),e=this._normalizeFileData(e),e.type!=="file"&&e.type!=="directory"&&e.type!=="symlink"){r(new Error(e.type+" entries not currently supported"));return}if(typeof e.name!="string"||e.name.length===0){r(new Error("entry name must be a non-empty string value"));return}if(e.type==="symlink"&&typeof e.linkname!="string"){r(new Error("entry linkname must be a non-empty string value when type equals symlink"));return}var n=new ONe(e.name);return n.setTime(e.date,this.options.forceLocalTime),e.namePrependSlash&&n.setName(e.name,!0),e.store&&n.setMethod(0),e.comment.length>0&&n.setComment(e.comment),e.type==="symlink"&&typeof e.mode!="number"&&(e.mode=40960),typeof e.mode=="number"&&(e.type==="symlink"&&(e.mode|=40960),n.setUnixMode(e.mode)),e.type==="symlink"&&typeof e.linkname=="string"&&(t=Buffer.from(e.linkname)),rC.prototype.entry.call(this,n,t,r)};ic.prototype.finalize=function(){this.finish()}});var sq=O((KUe,iq)=>{var CNe=nq(),yNe=_l(),ks=function(t){if(!(this instanceof ks))return new ks(t);t=this.options=yNe.defaults(t,{comment:"",forceUTC:!1,namePrependSlash:!1,store:!1}),this.supports={directory:!0,symlink:!0},this.engine=new CNe(t)};ks.prototype.append=function(t,e,r){this.engine.entry(t,e,r)};ks.prototype.finalize=function(){this.engine.finalize()};ks.prototype.on=function(){return this.engine.on.apply(this.engine,arguments)};ks.prototype.pipe=function(){return this.engine.pipe.apply(this.engine,arguments)};ks.prototype.unpipe=function(){return this.engine.unpipe.apply(this.engine,arguments)};iq.exports=ks});var aq=O((JUe,oq)=>{oq.exports=require("events")});var cq=O((ZUe,lq)=>{lq.exports=class{constructor(e){if(!(e>0)||(e-1&e)!==0)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}clear(){this.top=this.btm=0,this.next=null,this.buffer.fill(void 0)}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){let e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}peek(){return this.buffer[this.btm]}isEmpty(){return this.buffer[this.btm]===void 0}}});var nC=O((tBe,dq)=>{var uq=cq();dq.exports=class{constructor(e){this.hwm=e||16,this.head=new uq(this.hwm),this.tail=this.head,this.length=0}clear(){this.head=this.tail,this.head.clear(),this.length=0}push(e){if(this.length++,!this.head.push(e)){let r=this.head;this.head=r.next=new uq(2*this.head.buffer.length),this.head.push(e)}}shift(){this.length!==0&&this.length--;let e=this.tail.shift();if(e===void 0&&this.tail.next){let r=this.tail.next;return this.tail.next=null,this.tail=r,this.tail.shift()}return e}peek(){let e=this.tail.peek();return e===void 0&&this.tail.next?this.tail.next.peek():e}isEmpty(){return this.length===0}}});var sc=O((rBe,fq)=>{function bNe(t){return Buffer.isBuffer(t)||t instanceof Uint8Array}function wNe(t){return Buffer.isEncoding(t)}function LNe(t,e,r){return Buffer.alloc(t,e,r)}function DNe(t){return Buffer.allocUnsafe(t)}function PNe(t){return Buffer.allocUnsafeSlow(t)}function xNe(t,e){return Buffer.byteLength(t,e)}function MNe(t,e){return Buffer.compare(t,e)}function vNe(t,e){return Buffer.concat(t,e)}function UNe(t,e,r,n,i){return Ke(t).copy(e,r,n,i)}function BNe(t,e){return Ke(t).equals(e)}function FNe(t,e,r,n,i){return Ke(t).fill(e,r,n,i)}function GNe(t,e,r){return Buffer.from(t,e,r)}function HNe(t,e,r,n){return Ke(t).includes(e,r,n)}function WNe(t,e,r,n){return Ke(t).indexOf(e,r,n)}function kNe(t,e,r,n){return Ke(t).lastIndexOf(e,r,n)}function $Ne(t){return Ke(t).swap16()}function YNe(t){return Ke(t).swap32()}function VNe(t){return Ke(t).swap64()}function Ke(t){return Buffer.isBuffer(t)?t:Buffer.from(t.buffer,t.byteOffset,t.byteLength)}function qNe(t,e,r,n){return Ke(t).toString(e,r,n)}function XNe(t,e,r,n,i){return Ke(t).write(e,r,n,i)}function jNe(t,e){return Ke(t).readDoubleBE(e)}function zNe(t,e){return Ke(t).readDoubleLE(e)}function KNe(t,e){return Ke(t).readFloatBE(e)}function JNe(t,e){return Ke(t).readFloatLE(e)}function QNe(t,e){return Ke(t).readInt32BE(e)}function ZNe(t,e){return Ke(t).readInt32LE(e)}function eOe(t,e){return Ke(t).readUInt32BE(e)}function tOe(t,e){return Ke(t).readUInt32LE(e)}function rOe(t,e,r){return Ke(t).writeDoubleBE(e,r)}function nOe(t,e,r){return Ke(t).writeDoubleLE(e,r)}function iOe(t,e,r){return Ke(t).writeFloatBE(e,r)}function sOe(t,e,r){return Ke(t).writeFloatLE(e,r)}function oOe(t,e,r){return Ke(t).writeInt32BE(e,r)}function aOe(t,e,r){return Ke(t).writeInt32LE(e,r)}function lOe(t,e,r){return Ke(t).writeUInt32BE(e,r)}function cOe(t,e,r){return Ke(t).writeUInt32LE(e,r)}fq.exports={isBuffer:bNe,isEncoding:wNe,alloc:LNe,allocUnsafe:DNe,allocUnsafeSlow:PNe,byteLength:xNe,compare:MNe,concat:vNe,copy:UNe,equals:BNe,fill:FNe,from:GNe,includes:HNe,indexOf:WNe,lastIndexOf:kNe,swap16:$Ne,swap32:YNe,swap64:VNe,toBuffer:Ke,toString:qNe,write:XNe,readDoubleBE:jNe,readDoubleLE:zNe,readFloatBE:KNe,readFloatLE:JNe,readInt32BE:QNe,readInt32LE:ZNe,readUInt32BE:eOe,readUInt32LE:tOe,writeDoubleBE:rOe,writeDoubleLE:nOe,writeFloatBE:iOe,writeFloatLE:sOe,writeInt32BE:oOe,writeInt32LE:aOe,writeUInt32BE:lOe,writeUInt32LE:cOe}});var hq=O((iBe,Eq)=>{var uOe=sc();Eq.exports=class{constructor(e){this.encoding=e}get remaining(){return 0}decode(e){return uOe.toString(e,this.encoding)}flush(){return""}}});var pq=O((oBe,Tq)=>{var dOe=sc();Tq.exports=class{constructor(){this.codePoint=0,this.bytesSeen=0,this.bytesNeeded=0,this.lowerBoundary=128,this.upperBoundary=191}get remaining(){return this.bytesSeen}decode(e){if(this.bytesNeeded===0){let n=!0;for(let i=Math.max(0,e.byteLength-4),s=e.byteLength;i<s&&n;i++)n=e[i]<=127;if(n)return dOe.toString(e,"utf8")}let r="";for(let n=0,i=e.byteLength;n<i;n++){let s=e[n];if(this.bytesNeeded===0){s<=127?r+=String.fromCharCode(s):(this.bytesSeen=1,s>=194&&s<=223?(this.bytesNeeded=2,this.codePoint=s&31):s>=224&&s<=239?(s===224?this.lowerBoundary=160:s===237&&(this.upperBoundary=159),this.bytesNeeded=3,this.codePoint=s&15):s>=240&&s<=244?(s===240&&(this.lowerBoundary=144),s===244&&(this.upperBoundary=143),this.bytesNeeded=4,this.codePoint=s&7):r+="\uFFFD");continue}if(s<this.lowerBoundary||s>this.upperBoundary){this.codePoint=0,this.bytesNeeded=0,this.bytesSeen=0,this.lowerBoundary=128,this.upperBoundary=191,r+="\uFFFD";continue}this.lowerBoundary=128,this.upperBoundary=191,this.codePoint=this.codePoint<<6|s&63,this.bytesSeen++,this.bytesSeen===this.bytesNeeded&&(r+=String.fromCodePoint(this.codePoint),this.codePoint=0,this.bytesNeeded=0,this.bytesSeen=0)}return r}flush(){let e=this.bytesNeeded>0?"\uFFFD":"";return this.codePoint=0,this.bytesNeeded=0,this.bytesSeen=0,this.lowerBoundary=128,this.upperBoundary=191,e}}});var Rq=O((lBe,Sq)=>{var fOe=hq(),EOe=pq();Sq.exports=class{constructor(e="utf8"){switch(this.encoding=hOe(e),this.encoding){case"utf8":this.decoder=new EOe;break;case"utf16le":case"base64":throw new Error("Unsupported encoding: "+this.encoding);default:this.decoder=new fOe(this.encoding)}}get remaining(){return this.decoder.remaining}push(e){return typeof e=="string"?e:this.decoder.decode(e)}write(e){return this.push(e)}end(e){let r="";return e&&(r=this.push(e)),r+=this.decoder.flush(),r}};function hOe(t){switch(t=t.toLowerCase(),t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:throw new Error("Unknown encoding: "+t)}}});var AC=O((cBe,Wq)=>{var{EventEmitter:TOe}=aq(),zp=new Error("Stream was destroyed"),iC=new Error("Premature close"),Nq=nC(),pOe=Rq(),sC=typeof queueMicrotask>"u"?t=>global.process.nextTick(t):queueMicrotask,Rt=(1<<29)-1,mi=1,fC=2,la=4,Md=8,Oq=Rt^mi,SOe=Rt^fC,Gd=16,oc=32,cc=64,Ys=128,Hd=256,EC=512,ca=1024,oC=2048,hC=4096,TC=8192,Gn=16384,$s=32768,Kp=65536,ua=131072,Cq=Hd|EC,ROe=Gd|Kp,AOe=cc|Gd,mOe=hC|Ys,pC=Hd|ua,_Oe=Rt^Gd,IOe=Rt^cc,gOe=Rt^(cc|Kp),Aq=Rt^Kp,NOe=Rt^Hd,OOe=Rt^(Ys|TC),COe=Rt^ca,mq=Rt^Cq,yq=Rt^$s,yOe=Rt^oc,bq=Rt^ua,bOe=Rt^pC,ns=1<<18,lc=2<<18,Wd=4<<18,da=8<<18,kd=16<<18,Vs=32<<18,aC=64<<18,ac=128<<18,SC=256<<18,fa=512<<18,Jp=1024<<18,wOe=Rt^(ns|SC),wq=Rt^Wd,LOe=Rt^(ns|fa),DOe=Rt^kd,POe=Rt^da,Lq=Rt^ac,xOe=Rt^lc,Dq=Rt^Jp,vd=Gd|ns,Pq=Rt^vd,RC=Gn|Vs,_i=la|Md|fC,tn=_i|mi,xq=_i|RC,MOe=wq&IOe,Qp=ac|$s,vOe=Qp&Pq,Mq=tn|vOe,UOe=tn|ca|Gn,_q=tn|Gn|Ys,BOe=tn|ca|Ys,FOe=tn|hC|Ys|TC,GOe=tn|Gd|ca|Gn|Kp|ua,HOe=_i|ca|Gn,WOe=oc|tn|$s|cc,kOe=$s|mi,$Oe=tn|fa|Vs,YOe=da|kd,vq=da|ns,VOe=da|kd|tn|ns,Iq=tn|ns|da|Jp,qOe=Wd|ns,XOe=ns|SC,jOe=tn|fa|vq|Vs,zOe=kd|_i|fa|Vs,KOe=lc|tn|ac|Wd,JOe=fa|Vs|_i,Yp=Symbol.asyncIterator||Symbol("asyncIterator"),Vp=class{constructor(e,{highWaterMark:r=16384,map:n=null,mapWritable:i,byteLength:s,byteLengthWritable:o}={}){this.stream=e,this.queue=new Nq,this.highWaterMark=r,this.buffered=0,this.error=null,this.pipeline=null,this.drains=null,this.byteLength=o||s||Hq,this.map=i||n,this.afterWrite=eCe.bind(this),this.afterUpdateNextTick=nCe.bind(this)}get ended(){return(this.stream._duplexState&Vs)!==0}push(e){return(this.stream._duplexState&JOe)!==0?!1:(this.map!==null&&(e=this.map(e)),this.buffered+=this.byteLength(e),this.queue.push(e),this.buffered<this.highWaterMark?(this.stream._duplexState|=da,!0):(this.stream._duplexState|=YOe,!1))}shift(){let e=this.queue.shift();return this.buffered-=this.byteLength(e),this.buffered===0&&(this.stream._duplexState&=POe),e}end(e){typeof e=="function"?this.stream.once("finish",e):e!=null&&this.push(e),this.stream._duplexState=(this.stream._duplexState|fa)&wq}autoBatch(e,r){let n=[],i=this.stream;for(n.push(e);(i._duplexState&Iq)===vq;)n.push(i._writableState.shift());if((i._duplexState&tn)!==0)return r(null);i._writev(n,r)}update(){let e=this.stream;e._duplexState|=lc;do{for(;(e._duplexState&Iq)===da;){let r=this.shift();e._duplexState|=XOe,e._write(r,this.afterWrite)}(e._duplexState&qOe)===0&&this.updateNonPrimary()}while(this.continueUpdate()===!0);e._duplexState&=xOe}updateNonPrimary(){let e=this.stream;if((e._duplexState&jOe)===fa){e._duplexState=e._duplexState|ns,e._final(ZOe.bind(this));return}if((e._duplexState&_i)===la){(e._duplexState&Qp)===0&&(e._duplexState|=vd,e._destroy(Uq.bind(this)));return}(e._duplexState&Mq)===mi&&(e._duplexState=(e._duplexState|vd)&Oq,e._open(Bq.bind(this)))}continueUpdate(){return(this.stream._duplexState&ac)===0?!1:(this.stream._duplexState&=Lq,!0)}updateCallback(){(this.stream._duplexState&KOe)===Wd?this.update():this.updateNextTick()}updateNextTick(){(this.stream._duplexState&ac)===0&&(this.stream._duplexState|=ac,(this.stream._duplexState&lc)===0&&sC(this.afterUpdateNextTick))}},lC=class{constructor(e,{highWaterMark:r=16384,map:n=null,mapReadable:i,byteLength:s,byteLengthReadable:o}={}){this.stream=e,this.queue=new Nq,this.highWaterMark=r===0?1:r,this.buffered=0,this.readAhead=r>0,this.error=null,this.pipeline=null,this.byteLength=o||s||Hq,this.map=i||n,this.pipeTo=null,this.afterRead=tCe.bind(this),this.afterUpdateNextTick=rCe.bind(this)}get ended(){return(this.stream._duplexState&Gn)!==0}pipe(e,r){if(this.pipeTo!==null)throw new Error("Can only pipe to one destination");if(typeof r!="function"&&(r=null),this.stream._duplexState|=EC,this.pipeTo=e,this.pipeline=new uC(this.stream,e,r),r&&this.stream.on("error",gq),Fd(e))e._writableState.pipeline=this.pipeline,r&&e.on("error",gq),e.on("finish",this.pipeline.finished.bind(this.pipeline));else{let n=this.pipeline.done.bind(this.pipeline,e),i=this.pipeline.done.bind(this.pipeline,e,null);e.on("error",n),e.on("close",i),e.on("finish",this.pipeline.finished.bind(this.pipeline))}e.on("drain",QOe.bind(this)),this.stream.emit("piping",e),e.emit("pipe",this.stream)}push(e){let r=this.stream;return e===null?(this.highWaterMark=0,r._duplexState=(r._duplexState|ca)&gOe,!1):this.map!==null&&(e=this.map(e),e===null)?(r._duplexState&=Aq,this.buffered<this.highWaterMark):(this.buffered+=this.byteLength(e),this.queue.push(e),r._duplexState=(r._duplexState|Ys)&Aq,this.buffered<this.highWaterMark)}shift(){let e=this.queue.shift();return this.buffered-=this.byteLength(e),this.buffered===0&&(this.stream._duplexState&=OOe),e}unshift(e){let r=[this.map!==null?this.map(e):e];for(;this.buffered>0;)r.push(this.shift());for(let n=0;n<r.length-1;n++){let i=r[n];this.buffered+=this.byteLength(i),this.queue.push(i)}this.push(r[r.length-1])}read(){let e=this.stream;if((e._duplexState&_q)===Ys){let r=this.shift();return this.pipeTo!==null&&this.pipeTo.write(r)===!1&&(e._duplexState&=mq),(e._duplexState&oC)!==0&&e.emit("data",r),r}return this.readAhead===!1&&(e._duplexState|=ua,this.updateNextTick()),null}drain(){let e=this.stream;for(;(e._duplexState&_q)===Ys&&(e._duplexState&Cq)!==0;){let r=this.shift();this.pipeTo!==null&&this.pipeTo.write(r)===!1&&(e._duplexState&=mq),(e._duplexState&oC)!==0&&e.emit("data",r)}}update(){let e=this.stream;e._duplexState|=oc;do{for(this.drain();this.buffered<this.highWaterMark&&(e._duplexState&GOe)===ua;)e._duplexState|=ROe,e._read(this.afterRead),this.drain();(e._duplexState&FOe)===mOe&&(e._duplexState|=TC,e.emit("readable")),(e._duplexState&AOe)===0&&this.updateNonPrimary()}while(this.continueUpdate()===!0);e._duplexState&=yOe}updateNonPrimary(){let e=this.stream;if((e._duplexState&BOe)===ca&&(e._duplexState=(e._duplexState|Gn)&COe,e.emit("end"),(e._duplexState&xq)===RC&&(e._duplexState|=la),this.pipeTo!==null&&this.pipeTo.end()),(e._duplexState&_i)===la){(e._duplexState&Qp)===0&&(e._duplexState|=vd,e._destroy(Uq.bind(this)));return}(e._duplexState&Mq)===mi&&(e._duplexState=(e._duplexState|vd)&Oq,e._open(Bq.bind(this)))}continueUpdate(){return(this.stream._duplexState&$s)===0?!1:(this.stream._duplexState&=yq,!0)}updateCallback(){(this.stream._duplexState&WOe)===cc?this.update():this.updateNextTick()}updateNextTickIfOpen(){(this.stream._duplexState&kOe)===0&&(this.stream._duplexState|=$s,(this.stream._duplexState&oc)===0&&sC(this.afterUpdateNextTick))}updateNextTick(){(this.stream._duplexState&$s)===0&&(this.stream._duplexState|=$s,(this.stream._duplexState&oc)===0&&sC(this.afterUpdateNextTick))}},cC=class{constructor(e){this.data=null,this.afterTransform=sCe.bind(e),this.afterFinal=null}},uC=class{constructor(e,r,n){this.from=e,this.to=r,this.afterPipe=n,this.error=null,this.pipeToFinished=!1}finished(){this.pipeToFinished=!0}done(e,r){if(r&&(this.error=r),e===this.to&&(this.to=null,this.from!==null)){((this.from._duplexState&Gn)===0||!this.pipeToFinished)&&this.from.destroy(this.error||new Error("Writable stream closed prematurely"));return}if(e===this.from&&(this.from=null,this.to!==null)){(e._duplexState&Gn)===0&&this.to.destroy(this.error||new Error("Readable stream closed before ending"));return}this.afterPipe!==null&&this.afterPipe(this.error),this.to=this.from=this.afterPipe=null}};function QOe(){this.stream._duplexState|=EC,this.updateCallback()}function ZOe(t){let e=this.stream;t&&e.destroy(t),(e._duplexState&_i)===0&&(e._duplexState|=Vs,e.emit("finish")),(e._duplexState&xq)===RC&&(e._duplexState|=la),e._duplexState&=LOe,(e._duplexState&lc)===0?this.update():this.updateNextTick()}function Uq(t){let e=this.stream;!t&&this.error!==zp&&(t=this.error),t&&e.emit("error",t),e._duplexState|=Md,e.emit("close");let r=e._readableState,n=e._writableState;if(r!==null&&r.pipeline!==null&&r.pipeline.done(e,t),n!==null){for(;n.drains!==null&&n.drains.length>0;)n.drains.shift().resolve(!1);n.pipeline!==null&&n.pipeline.done(e,t)}}function eCe(t){let e=this.stream;t&&e.destroy(t),e._duplexState&=wOe,this.drains!==null&&iCe(this.drains),(e._duplexState&VOe)===kd&&(e._duplexState&=DOe,(e._duplexState&aC)===aC&&e.emit("drain")),this.updateCallback()}function tCe(t){t&&this.stream.destroy(t),this.stream._duplexState&=_Oe,this.readAhead===!1&&(this.stream._duplexState&Hd)===0&&(this.stream._duplexState&=bq),this.updateCallback()}function rCe(){(this.stream._duplexState&oc)===0&&(this.stream._duplexState&=yq,this.update())}function nCe(){(this.stream._duplexState&lc)===0&&(this.stream._duplexState&=Lq,this.update())}function iCe(t){for(let e=0;e<t.length;e++)--t[e].writes===0&&(t.shift().resolve(!0),e--)}function Bq(t){let e=this.stream;t&&e.destroy(t),(e._duplexState&la)===0&&((e._duplexState&UOe)===0&&(e._duplexState|=cc),(e._duplexState&$Oe)===0&&(e._duplexState|=Wd),e.emit("open")),e._duplexState&=Pq,e._writableState!==null&&e._writableState.updateCallback(),e._readableState!==null&&e._readableState.updateCallback()}function sCe(t,e){e!=null&&this.push(e),this._writableState.afterWrite(t)}function oCe(t){this._readableState!==null&&(t==="data"&&(this._duplexState|=oC|pC,this._readableState.updateNextTick()),t==="readable"&&(this._duplexState|=hC,this._readableState.updateNextTick())),this._writableState!==null&&t==="drain"&&(this._duplexState|=aC,this._writableState.updateNextTick())}var Ud=class extends TOe{constructor(e){super(),this._duplexState=0,this._readableState=null,this._writableState=null,e&&(e.open&&(this._open=e.open),e.destroy&&(this._destroy=e.destroy),e.predestroy&&(this._predestroy=e.predestroy),e.signal&&e.signal.addEventListener("abort",pCe.bind(this))),this.on("newListener",oCe)}_open(e){e(null)}_destroy(e){e(null)}_predestroy(){}get readable(){return this._readableState!==null?!0:void 0}get writable(){return this._writableState!==null?!0:void 0}get destroyed(){return(this._duplexState&Md)!==0}get destroying(){return(this._duplexState&_i)!==0}destroy(e){(this._duplexState&_i)===0&&(e||(e=zp),this._duplexState=(this._duplexState|la)&MOe,this._readableState!==null&&(this._readableState.highWaterMark=0,this._readableState.error=e),this._writableState!==null&&(this._writableState.highWaterMark=0,this._writableState.error=e),this._duplexState|=fC,this._predestroy(),this._duplexState&=SOe,this._readableState!==null&&this._readableState.updateNextTick(),this._writableState!==null&&this._writableState.updateNextTick())}},qp=class t extends Ud{constructor(e){super(e),this._duplexState|=mi|Vs|ua,this._readableState=new lC(this,e),e&&(this._readableState.readAhead===!1&&(this._duplexState&=bq),e.read&&(this._read=e.read),e.eagerOpen&&this._readableState.updateNextTick(),e.encoding&&this.setEncoding(e.encoding))}setEncoding(e){let r=new pOe(e),n=this._readableState.map||cCe;return this._readableState.map=i,this;function i(s){let o=r.push(s);return o===""&&(s.byteLength!==0||r.remaining>0)?null:n(o)}}_read(e){e(null)}pipe(e,r){return this._readableState.updateNextTick(),this._readableState.pipe(e,r),e}read(){return this._readableState.updateNextTick(),this._readableState.read()}push(e){return this._readableState.updateNextTickIfOpen(),this._readableState.push(e)}unshift(e){return this._readableState.updateNextTickIfOpen(),this._readableState.unshift(e)}resume(){return this._duplexState|=pC,this._readableState.updateNextTick(),this}pause(){return this._duplexState&=this._readableState.readAhead===!1?bOe:NOe,this}static _fromAsyncIterator(e,r){let n,i=new t({...r,read(o){e.next().then(s).then(o.bind(null,null)).catch(o)},predestroy(){n=e.return()},destroy(o){if(!n)return o(null);n.then(o.bind(null,null)).catch(o)}});return i;function s(o){o.done?i.push(null):i.push(o.value)}}static from(e,r){if(ECe(e))return e;if(e[Yp])return this._fromAsyncIterator(e[Yp](),r);Array.isArray(e)||(e=e===void 0?[]:[e]);let n=0;return new t({...r,read(i){this.push(n===e.length?null:e[n++]),i(null)}})}static isBackpressured(e){return(e._duplexState&HOe)!==0||e._readableState.buffered>=e._readableState.highWaterMark}static isPaused(e){return(e._duplexState&Hd)===0}[Yp](){let e=this,r=null,n=null,i=null;return this.on("error",c=>{r=c}),this.on("readable",s),this.on("close",o),{[Yp](){return this},next(){return new Promise(function(c,u){n=c,i=u;let d=e.read();d!==null?a(d):(e._duplexState&Md)!==0&&a(null)})},return(){return l(null)},throw(c){return l(c)}};function s(){n!==null&&a(e.read())}function o(){n!==null&&a(null)}function a(c){i!==null&&(r?i(r):c===null&&(e._duplexState&Gn)===0?i(zp):n({value:c,done:c===null}),i=n=null)}function l(c){return e.destroy(c),new Promise((u,d)=>{if(e._duplexState&Md)return u({value:void 0,done:!0});e.once("close",function(){c?d(c):u({value:void 0,done:!0})})})}}},Xp=class extends Ud{constructor(e){super(e),this._duplexState|=mi|Gn,this._writableState=new Vp(this,e),e&&(e.writev&&(this._writev=e.writev),e.write&&(this._write=e.write),e.final&&(this._final=e.final),e.eagerOpen&&this._writableState.updateNextTick())}cork(){this._duplexState|=Jp}uncork(){this._duplexState&=Dq,this._writableState.updateNextTick()}_writev(e,r){r(null)}_write(e,r){this._writableState.autoBatch(e,r)}_final(e){e(null)}static isBackpressured(e){return(e._duplexState&zOe)!==0}static drained(e){if(e.destroyed)return Promise.resolve(!1);let r=e._writableState,i=(SCe(e)?Math.min(1,r.queue.length):r.queue.length)+(e._duplexState&SC?1:0);return i===0?Promise.resolve(!0):(r.drains===null&&(r.drains=[]),new Promise(s=>{r.drains.push({writes:i,resolve:s})}))}write(e){return this._writableState.updateNextTick(),this._writableState.push(e)}end(e){return this._writableState.updateNextTick(),this._writableState.end(e),this}},Bd=class extends qp{constructor(e){super(e),this._duplexState=mi|this._duplexState&ua,this._writableState=new Vp(this,e),e&&(e.writev&&(this._writev=e.writev),e.write&&(this._write=e.write),e.final&&(this._final=e.final))}cork(){this._duplexState|=Jp}uncork(){this._duplexState&=Dq,this._writableState.updateNextTick()}_writev(e,r){r(null)}_write(e,r){this._writableState.autoBatch(e,r)}_final(e){e(null)}write(e){return this._writableState.updateNextTick(),this._writableState.push(e)}end(e){return this._writableState.updateNextTick(),this._writableState.end(e),this}},jp=class extends Bd{constructor(e){super(e),this._transformState=new cC(this),e&&(e.transform&&(this._transform=e.transform),e.flush&&(this._flush=e.flush))}_write(e,r){this._readableState.buffered>=this._readableState.highWaterMark?this._transformState.data=e:this._transform(e,this._transformState.afterTransform)}_read(e){if(this._transformState.data!==null){let r=this._transformState.data;this._transformState.data=null,e(null),this._transform(r,this._transformState.afterTransform)}else e(null)}destroy(e){super.destroy(e),this._transformState.data!==null&&(this._transformState.data=null,this._transformState.afterTransform())}_transform(e,r){r(null,e)}_flush(e){e(null)}_final(e){this._transformState.afterFinal=e,this._flush(aCe.bind(this))}},dC=class extends jp{};function aCe(t,e){let r=this._transformState.afterFinal;if(t)return r(t);e!=null&&this.push(e),this.push(null),r(null)}function lCe(...t){return new Promise((e,r)=>Fq(...t,n=>{if(n)return r(n);e()}))}function Fq(t,...e){let r=Array.isArray(t)?[...t,...e]:[t,...e],n=r.length&&typeof r[r.length-1]=="function"?r.pop():null;if(r.length<2)throw new Error("Pipeline requires at least 2 streams");let i=r[0],s=null,o=null;for(let c=1;c<r.length;c++)s=r[c],Fd(i)?i.pipe(s,l):(a(i,!0,c>1,l),i.pipe(s)),i=s;if(n){let c=!1,u=Fd(s)||!!(s._writableState&&s._writableState.autoDestroy);s.on("error",d=>{o===null&&(o=d)}),s.on("finish",()=>{c=!0,u||n(o)}),u&&s.on("close",()=>n(o||(c?null:iC)))}return s;function a(c,u,d,E){c.on("error",E),c.on("close",f);function f(){if(u&&c._readableState&&!c._readableState.ended||d&&c._writableState&&!c._writableState.ended)return E(iC)}}function l(c){if(!(!c||o)){o=c;for(let u of r)u.destroy(c)}}}function cCe(t){return t}function Gq(t){return!!t._readableState||!!t._writableState}function Fd(t){return typeof t._duplexState=="number"&&Gq(t)}function uCe(t){return!!t._readableState&&t._readableState.ended}function dCe(t){return!!t._writableState&&t._writableState.ended}function fCe(t,e={}){let r=t._readableState&&t._readableState.error||t._writableState&&t._writableState.error;return!e.all&&r===zp?null:r}function ECe(t){return Fd(t)&&t.readable}function hCe(t){return(t._duplexState&mi)!==mi||(t._duplexState&Qp)!==0}function TCe(t){return typeof t=="object"&&t!==null&&typeof t.byteLength=="number"}function Hq(t){return TCe(t)?t.byteLength:1024}function gq(){}function pCe(){this.destroy(new Error("Stream aborted."))}function SCe(t){return t._writev!==Xp.prototype._writev&&t._writev!==Bd.prototype._writev}Wq.exports={pipeline:Fq,pipelinePromise:lCe,isStream:Gq,isStreamx:Fd,isEnded:uCe,isFinished:dCe,isDisturbed:hCe,getStreamError:fCe,Stream:Ud,Writable:Xp,Readable:qp,Duplex:Bd,Transform:jp,PassThrough:dC}});var IC=O(dc=>{var He=sc(),RCe="0000000000000000000",ACe="7777777777777777777",Zp=48,kq=He.from([117,115,116,97,114,0]),mCe=He.from([Zp,Zp]),_Ce=He.from([117,115,116,97,114,32]),ICe=He.from([32,0]),gCe=4095,$d=257,_C=263;dc.decodeLongPath=function(e,r){return uc(e,0,e.length,r)};dc.encodePax=function(e){let r="";e.name&&(r+=mC(" path="+e.name+`
`)),e.linkname&&(r+=mC(" linkpath="+e.linkname+`
`));let n=e.pax;if(n)for(let i in n)r+=mC(" "+i+"="+n[i]+`
`);return He.from(r)};dc.decodePax=function(e){let r={};for(;e.length;){let n=0;for(;n<e.length&&e[n]!==32;)n++;let i=parseInt(He.toString(e.subarray(0,n)),10);if(!i)return r;let s=He.toString(e.subarray(n+1,i-1)),o=s.indexOf("=");if(o===-1)return r;r[s.slice(0,o)]=s.slice(o+1),e=e.subarray(i)}return r};dc.encode=function(e){let r=He.alloc(512),n=e.name,i="";if(e.typeflag===5&&n[n.length-1]!=="/"&&(n+="/"),He.byteLength(n)!==n.length)return null;for(;He.byteLength(n)>100;){let s=n.indexOf("/");if(s===-1)return null;i+=i?"/"+n.slice(0,s):n.slice(0,s),n=n.slice(s+1)}return He.byteLength(n)>100||He.byteLength(i)>155||e.linkname&&He.byteLength(e.linkname)>100?null:(He.write(r,n),He.write(r,Xs(e.mode&gCe,6),100),He.write(r,Xs(e.uid,6),108),He.write(r,Xs(e.gid,6),116),LCe(e.size,r,124),He.write(r,Xs(e.mtime.getTime()/1e3|0,11),136),r[156]=Zp+bCe(e.type),e.linkname&&He.write(r,e.linkname,157),He.copy(kq,r,$d),He.copy(mCe,r,_C),e.uname&&He.write(r,e.uname,265),e.gname&&He.write(r,e.gname,297),He.write(r,Xs(e.devmajor||0,6),329),He.write(r,Xs(e.devminor||0,6),337),i&&He.write(r,i,345),He.write(r,Xs(Yq(r),6),148),r)};dc.decode=function(e,r,n){let i=e[156]===0?0:e[156]-Zp,s=uc(e,0,100,r),o=qs(e,100,8),a=qs(e,108,8),l=qs(e,116,8),c=qs(e,124,12),u=qs(e,136,12),d=yCe(i),E=e[157]===0?null:uc(e,157,100,r),f=uc(e,265,32),T=uc(e,297,32),h=qs(e,329,8),p=qs(e,337,8),S=Yq(e);if(S===256)return null;if(S!==qs(e,148,8))throw new Error("Invalid tar header. Maybe the tar is corrupted or it needs to be gunzipped?");if(NCe(e))e[345]&&(s=uc(e,345,155,r)+"/"+s);else if(!OCe(e)){if(!n)throw new Error("Invalid tar header: unknown format.")}return i===0&&s&&s[s.length-1]==="/"&&(i=5),{name:s,mode:o,uid:a,gid:l,size:c,mtime:new Date(1e3*u),type:d,linkname:E,uname:f,gname:T,devmajor:h,devminor:p,pax:null}};function NCe(t){return He.equals(kq,t.subarray($d,$d+6))}function OCe(t){return He.equals(_Ce,t.subarray($d,$d+6))&&He.equals(ICe,t.subarray(_C,_C+2))}function CCe(t,e,r){return typeof t!="number"?r:(t=~~t,t>=e?e:t>=0||(t+=e,t>=0)?t:0)}function yCe(t){switch(t){case 0:return"file";case 1:return"link";case 2:return"symlink";case 3:return"character-device";case 4:return"block-device";case 5:return"directory";case 6:return"fifo";case 7:return"contiguous-file";case 72:return"pax-header";case 55:return"pax-global-header";case 27:return"gnu-long-link-path";case 28:case 30:return"gnu-long-path"}return null}function bCe(t){switch(t){case"file":return 0;case"link":return 1;case"symlink":return 2;case"character-device":return 3;case"block-device":return 4;case"directory":return 5;case"fifo":return 6;case"contiguous-file":return 7;case"pax-header":return 72}return 0}function $q(t,e,r,n){for(;r<n;r++)if(t[r]===e)return r;return n}function Yq(t){let e=256;for(let r=0;r<148;r++)e+=t[r];for(let r=156;r<512;r++)e+=t[r];return e}function Xs(t,e){return t=t.toString(8),t.length>e?ACe.slice(0,e)+" ":RCe.slice(0,e-t.length)+t+" "}function wCe(t,e,r){e[r]=128;for(let n=11;n>0;n--)e[r+n]=t&255,t=Math.floor(t/256)}function LCe(t,e,r){t.toString(8).length>11?wCe(t,e,r):He.write(e,Xs(t,11),r)}function DCe(t){let e;if(t[0]===128)e=!0;else if(t[0]===255)e=!1;else return null;let r=[],n;for(n=t.length-1;n>0;n--){let o=t[n];e?r.push(o):r.push(255-o)}let i=0,s=r.length;for(n=0;n<s;n++)i+=r[n]*Math.pow(256,n);return e?i:-1*i}function qs(t,e,r){if(t=t.subarray(e,e+r),e=0,t[e]&128)return DCe(t);{for(;e<t.length&&t[e]===32;)e++;let n=CCe($q(t,32,e,t.length),t.length,t.length);for(;e<n&&t[e]===0;)e++;return n===e?0:parseInt(He.toString(t.subarray(e,n)),8)}}function uc(t,e,r,n){return He.toString(t.subarray(e,$q(t,0,e,e+r)),n)}function mC(t){let e=He.byteLength(t),r=Math.floor(Math.log(e)/Math.log(10))+1;return e+r>=Math.pow(10,r)&&r++,e+r+t}});var zq=O((dBe,jq)=>{var{Writable:PCe,Readable:xCe,getStreamError:Vq}=AC(),MCe=nC(),qq=sc(),fc=IC(),vCe=qq.alloc(0),NC=class{constructor(){this.buffered=0,this.shifted=0,this.queue=new MCe,this._offset=0}push(e){this.buffered+=e.byteLength,this.queue.push(e)}shiftFirst(e){return this._buffered===0?null:this._next(e)}shift(e){if(e>this.buffered)return null;if(e===0)return vCe;let r=this._next(e);if(e===r.byteLength)return r;let n=[r];for(;(e-=r.byteLength)>0;)r=this._next(e),n.push(r);return qq.concat(n)}_next(e){let r=this.queue.peek(),n=r.byteLength-this._offset;if(e>=n){let i=this._offset?r.subarray(this._offset,r.byteLength):r;return this.queue.shift(),this._offset=0,this.buffered-=n,this.shifted+=n,i}return this.buffered-=e,this.shifted+=e,r.subarray(this._offset,this._offset+=e)}},OC=class extends xCe{constructor(e,r,n){super(),this.header=r,this.offset=n,this._parent=e}_read(e){this.header.size===0&&this.push(null),this._parent._stream===this&&this._parent._update(),e(null)}_predestroy(){this._parent.destroy(Vq(this))}_detach(){this._parent._stream===this&&(this._parent._stream=null,this._parent._missing=Xq(this.header.size),this._parent._update())}_destroy(e){this._detach(),e(null)}},CC=class extends PCe{constructor(e){super(e),e||(e={}),this._buffer=new NC,this._offset=0,this._header=null,this._stream=null,this._missing=0,this._longHeader=!1,this._callback=gC,this._locked=!1,this._finished=!1,this._pax=null,this._paxGlobal=null,this._gnuLongPath=null,this._gnuLongLinkPath=null,this._filenameEncoding=e.filenameEncoding||"utf-8",this._allowUnknownFormat=!!e.allowUnknownFormat,this._unlockBound=this._unlock.bind(this)}_unlock(e){if(this._locked=!1,e){this.destroy(e),this._continueWrite(e);return}this._update()}_consumeHeader(){if(this._locked)return!1;this._offset=this._buffer.shifted;try{this._header=fc.decode(this._buffer.shift(512),this._filenameEncoding,this._allowUnknownFormat)}catch(e){return this._continueWrite(e),!1}if(!this._header)return!0;switch(this._header.type){case"gnu-long-path":case"gnu-long-link-path":case"pax-global-header":case"pax-header":return this._longHeader=!0,this._missing=this._header.size,!0}return this._locked=!0,this._applyLongHeaders(),this._header.size===0||this._header.type==="directory"?(this.emit("entry",this._header,this._createStream(),this._unlockBound),!0):(this._stream=this._createStream(),this._missing=this._header.size,this.emit("entry",this._header,this._stream,this._unlockBound),!0)}_applyLongHeaders(){this._gnuLongPath&&(this._header.name=this._gnuLongPath,this._gnuLongPath=null),this._gnuLongLinkPath&&(this._header.linkname=this._gnuLongLinkPath,this._gnuLongLinkPath=null),this._pax&&(this._pax.path&&(this._header.name=this._pax.path),this._pax.linkpath&&(this._header.linkname=this._pax.linkpath),this._pax.size&&(this._header.size=parseInt(this._pax.size,10)),this._header.pax=this._pax,this._pax=null)}_decodeLongHeader(e){switch(this._header.type){case"gnu-long-path":this._gnuLongPath=fc.decodeLongPath(e,this._filenameEncoding);break;case"gnu-long-link-path":this._gnuLongLinkPath=fc.decodeLongPath(e,this._filenameEncoding);break;case"pax-global-header":this._paxGlobal=fc.decodePax(e);break;case"pax-header":this._pax=this._paxGlobal===null?fc.decodePax(e):Object.assign({},this._paxGlobal,fc.decodePax(e));break}}_consumeLongHeader(){this._longHeader=!1,this._missing=Xq(this._header.size);let e=this._buffer.shift(this._header.size);try{this._decodeLongHeader(e)}catch(r){return this._continueWrite(r),!1}return!0}_consumeStream(){let e=this._buffer.shiftFirst(this._missing);if(e===null)return!1;this._missing-=e.byteLength;let r=this._stream.push(e);return this._missing===0?(this._stream.push(null),r&&this._stream._detach(),r&&this._locked===!1):r}_createStream(){return new OC(this,this._header,this._offset)}_update(){for(;this._buffer.buffered>0&&!this.destroying;){if(this._missing>0){if(this._stream!==null){if(this._consumeStream()===!1)return;continue}if(this._longHeader===!0){if(this._missing>this._buffer.buffered)break;if(this._consumeLongHeader()===!1)return!1;continue}let e=this._buffer.shiftFirst(this._missing);e!==null&&(this._missing-=e.byteLength);continue}if(this._buffer.buffered<512)break;if(this._stream!==null||this._consumeHeader()===!1)return}this._continueWrite(null)}_continueWrite(e){let r=this._callback;this._callback=gC,r(e)}_write(e,r){this._callback=r,this._buffer.push(e),this._update()}_final(e){this._finished=this._missing===0&&this._buffer.buffered===0,e(this._finished?null:new Error("Unexpected end of data"))}_predestroy(){this._continueWrite(null)}_destroy(e){this._stream&&this._stream.destroy(Vq(this)),e(null)}[Symbol.asyncIterator](){let e=null,r=null,n=null,i=null,s=null,o=this;return this.on("entry",c),this.on("error",E=>{e=E}),this.on("close",u),{[Symbol.asyncIterator](){return this},next(){return new Promise(l)},return(){return d(null)},throw(E){return d(E)}};function a(E){if(!s)return;let f=s;s=null,f(E)}function l(E,f){if(e)return f(e);if(i){E({value:i,done:!1}),i=null;return}r=E,n=f,a(null),o._finished&&r&&(r({value:void 0,done:!0}),r=n=null)}function c(E,f,T){s=T,f.on("error",gC),r?(r({value:f,done:!1}),r=n=null):i=f}function u(){a(e),r&&(e?n(e):r({value:void 0,done:!0}),r=n=null)}function d(E){return o.destroy(E),a(E),new Promise((f,T)=>{if(o.destroyed)return f({value:void 0,done:!0});o.once("close",function(){E?T(E):f({value:void 0,done:!0})})})}}};jq.exports=function(e){return new CC(e)};function gC(){}function Xq(t){return t&=511,t&&512-t}});var Jq=O((fBe,yC)=>{var Kq={S_IFMT:61440,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960};try{yC.exports=require("fs").constants||Kq}catch{yC.exports=Kq}});var rX=O((EBe,tX)=>{var{Readable:UCe,Writable:BCe,getStreamError:Qq}=AC(),Ea=sc(),Ec=Jq(),eS=IC(),FCe=493,GCe=420,Zq=Ea.alloc(1024),wC=class extends BCe{constructor(e,r,n){super({mapWritable:WCe,eagerOpen:!0}),this.written=0,this.header=r,this._callback=n,this._linkname=null,this._isLinkname=r.type==="symlink"&&!r.linkname,this._isVoid=r.type!=="file"&&r.type!=="contiguous-file",this._finished=!1,this._pack=e,this._openCallback=null,this._pack._stream===null?this._pack._stream=this:this._pack._pending.push(this)}_open(e){this._openCallback=e,this._pack._stream===this&&this._continueOpen()}_continuePack(e){if(this._callback===null)return;let r=this._callback;this._callback=null,r(e)}_continueOpen(){this._pack._stream===null&&(this._pack._stream=this);let e=this._openCallback;if(this._openCallback=null,e!==null){if(this._pack.destroying)return e(new Error("pack stream destroyed"));if(this._pack._finalized)return e(new Error("pack stream is already finalized"));this._pack._stream=this,this._isLinkname||this._pack._encode(this.header),this._isVoid&&(this._finish(),this._continuePack(null)),e(null)}}_write(e,r){if(this._isLinkname)return this._linkname=this._linkname?Ea.concat([this._linkname,e]):e,r(null);if(this._isVoid)return e.byteLength>0?r(new Error("No body allowed for this entry")):r();if(this.written+=e.byteLength,this._pack.push(e))return r();this._pack._drain=r}_finish(){this._finished||(this._finished=!0,this._isLinkname&&(this.header.linkname=this._linkname?Ea.toString(this._linkname,"utf-8"):"",this._pack._encode(this.header)),eX(this._pack,this.header.size),this._pack._done(this))}_final(e){if(this.written!==this.header.size)return e(new Error("Size mismatch"));this._finish(),e(null)}_getError(){return Qq(this)||new Error("tar entry destroyed")}_predestroy(){this._pack.destroy(this._getError())}_destroy(e){this._pack._done(this),this._continuePack(this._finished?null:this._getError()),e()}},LC=class extends UCe{constructor(e){super(e),this._drain=bC,this._finalized=!1,this._finalizing=!1,this._pending=[],this._stream=null}entry(e,r,n){if(this._finalized||this.destroying)throw new Error("already finalized or destroyed");typeof r=="function"&&(n=r,r=null),n||(n=bC),(!e.size||e.type==="symlink")&&(e.size=0),e.type||(e.type=HCe(e.mode)),e.mode||(e.mode=e.type==="directory"?FCe:GCe),e.uid||(e.uid=0),e.gid||(e.gid=0),e.mtime||(e.mtime=new Date),typeof r=="string"&&(r=Ea.from(r));let i=new wC(this,e,n);return Ea.isBuffer(r)?(e.size=r.byteLength,i.write(r),i.end(),i):(i._isVoid,i)}finalize(){if(this._stream||this._pending.length>0){this._finalizing=!0;return}this._finalized||(this._finalized=!0,this.push(Zq),this.push(null))}_done(e){e===this._stream&&(this._stream=null,this._finalizing&&this.finalize(),this._pending.length&&this._pending.shift()._continueOpen())}_encode(e){if(!e.pax){let r=eS.encode(e);if(r){this.push(r);return}}this._encodePax(e)}_encodePax(e){let r=eS.encodePax({name:e.name,linkname:e.linkname,pax:e.pax}),n={name:"PaxHeader",mode:e.mode,uid:e.uid,gid:e.gid,size:r.byteLength,mtime:e.mtime,type:"pax-header",linkname:e.linkname&&"PaxHeader",uname:e.uname,gname:e.gname,devmajor:e.devmajor,devminor:e.devminor};this.push(eS.encode(n)),this.push(r),eX(this,r.byteLength),n.size=e.size,n.type=e.type,this.push(eS.encode(n))}_doDrain(){let e=this._drain;this._drain=bC,e()}_predestroy(){let e=Qq(this);for(this._stream&&this._stream.destroy(e);this._pending.length;){let r=this._pending.shift();r.destroy(e),r._continueOpen()}this._doDrain()}_read(e){this._doDrain(),e()}};tX.exports=function(e){return new LC(e)};function HCe(t){switch(t&Ec.S_IFMT){case Ec.S_IFBLK:return"block-device";case Ec.S_IFCHR:return"character-device";case Ec.S_IFDIR:return"directory";case Ec.S_IFIFO:return"fifo";case Ec.S_IFLNK:return"symlink"}return"file"}function bC(){}function eX(t,e){e&=511,e&&t.push(Zq.subarray(0,512-e))}function WCe(t){return Ea.isBuffer(t)?t:Ea.from(t)}});var nX=O(DC=>{DC.extract=zq();DC.pack=rX()});var oX=O((TBe,sX)=>{var kCe=require("zlib"),$Ce=nX(),iX=_l(),is=function(t){if(!(this instanceof is))return new is(t);t=this.options=iX.defaults(t,{gzip:!1}),typeof t.gzipOptions!="object"&&(t.gzipOptions={}),this.supports={directory:!0,symlink:!0},this.engine=$Ce.pack(t),this.compressor=!1,t.gzip&&(this.compressor=kCe.createGzip(t.gzipOptions),this.compressor.on("error",this._onCompressorError.bind(this)))};is.prototype._onCompressorError=function(t){this.engine.emit("error",t)};is.prototype.append=function(t,e,r){var n=this;e.mtime=e.date;function i(o,a){if(o){r(o);return}n.engine.entry(e,a,function(l){r(l,e)})}if(e.sourceType==="buffer")i(null,t);else if(e.sourceType==="stream"&&e.stats){e.size=e.stats.size;var s=n.engine.entry(e,function(o){r(o,e)});t.pipe(s)}else e.sourceType==="stream"&&iX.collectStream(t,i)};is.prototype.finalize=function(){this.engine.finalize()};is.prototype.on=function(){return this.engine.on.apply(this.engine,arguments)};is.prototype.pipe=function(t,e){return this.compressor?this.engine.pipe.apply(this.engine,[this.compressor]).pipe(t,e):this.engine.pipe.apply(this.engine,arguments)};is.prototype.unpipe=function(){return this.compressor?this.compressor.unpipe.apply(this.compressor,arguments):this.engine.unpipe.apply(this.engine,arguments)};sX.exports=is});var cX=O((pBe,lX)=>{"use strict";function YCe(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var VCe=new Int32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]);function aX(t){if(Buffer.isBuffer(t))return t;if(typeof t=="number")return Buffer.alloc(t);if(typeof t=="string")return Buffer.from(t);throw new Error("input must be buffer, number, or string, received "+typeof t)}function qCe(t){let e=aX(4);return e.writeInt32BE(t,0),e}function PC(t,e){t=aX(t),Buffer.isBuffer(e)&&(e=e.readUInt32BE(0));let r=~~e^-1;for(var n=0;n<t.length;n++)r=VCe[(r^t[n])&255]^r>>>8;return r^-1}function xC(){return qCe(PC.apply(null,arguments))}xC.signed=function(){return PC.apply(null,arguments)};xC.unsigned=function(){return PC.apply(null,arguments)>>>0};var XCe=xC,jCe=YCe(XCe);lX.exports=jCe});var EX=O((SBe,fX)=>{var zCe=require("util").inherits,uX=_g().Transform,KCe=cX(),dX=_l(),js=function(t){if(!(this instanceof js))return new js(t);t=this.options=dX.defaults(t,{}),uX.call(this,t),this.supports={directory:!0,symlink:!0},this.files=[]};zCe(js,uX);js.prototype._transform=function(t,e,r){r(null,t)};js.prototype._writeStringified=function(){var t=JSON.stringify(this.files);this.write(t)};js.prototype.append=function(t,e,r){var n=this;e.crc32=0;function i(s,o){if(s){r(s);return}e.size=o.length||0,e.crc32=KCe.unsigned(o),n.files.push(e),r(null,e)}e.sourceType==="buffer"?i(null,t):e.sourceType==="stream"&&dX.collectStream(t,i)};js.prototype.finalize=function(){this._writeStringified(),this.end()};fX.exports=js});var MC=O((RBe,hX)=>{var JCe=KH(),Yd={},zs=function(t,e){return zs.create(t,e)};zs.create=function(t,e){if(Yd[t]){var r=new JCe(t,e);return r.setFormat(t),r.setModule(new Yd[t](e)),r}else throw new Error("create("+t+"): format not registered")};zs.registerFormat=function(t,e){if(Yd[t])throw new Error("register("+t+"): format already registered");if(typeof e!="function")throw new Error("register("+t+"): format module invalid");if(typeof e.prototype.append!="function"||typeof e.prototype.finalize!="function")throw new Error("register("+t+"): format module missing methods");Yd[t]=e};zs.isRegisteredFormat=function(t){return!!Yd[t]};zs.registerFormat("zip",sq());zs.registerFormat("tar",oX());zs.registerFormat("json",EX());hX.exports=zs});var ha,ss,vC=H(()=>{"use strict";ha=require("buffer"),ss=class{constructor(e=65536){this.chunkSize=e,this.chunks=[],this.currentBuffer=ha.Buffer.alloc(e),this.cursor=0}ensureCapacity(e){this.cursor+e>this.chunkSize&&this._flush()}_ensureCapacity(e){this.ensureCapacity(e)}_flush(){this.cursor>0&&(this.chunks.push(this.currentBuffer.subarray(0,this.cursor)),this.currentBuffer=ha.Buffer.alloc(this.chunkSize),this.cursor=0)}write(e){let r=e.length,n=0;for(;r>0;){let i=this.chunkSize-this.cursor;i===0&&(this._flush(),i=this.chunkSize);let s=Math.min(r,i);e.copy(this.currentBuffer,this.cursor,n,n+s),this.cursor+=s,n+=s,r-=s}}writeByte(e){this._ensureCapacity(1),this.currentBuffer[this.cursor]=e,this.cursor++}writeUnsafeByte(e){this.currentBuffer[this.cursor++]=e}writeInt32LE(e){this._ensureCapacity(4),this.currentBuffer.writeInt32LE(e,this.cursor),this.cursor+=4}writeUnsafeInt32LE(e){this.currentBuffer.writeInt32LE(e,this.cursor),this.cursor+=4}writeDoubleLE(e){this._ensureCapacity(8),this.currentBuffer.writeDoubleLE(e,this.cursor),this.cursor+=8}writeUnsafeDoubleLE(e){this.currentBuffer.writeDoubleLE(e,this.cursor),this.cursor+=8}writeString(e){let r=ha.Buffer.byteLength(e,"utf8");if(this.cursor+r<=this.chunkSize){this.cursor+=this.currentBuffer.write(e,this.cursor,"utf8");return}this._flush(),r>this.chunkSize?this.chunks.push(ha.Buffer.from(e,"utf8")):this.cursor+=this.currentBuffer.write(e,this.cursor,"utf8")}writeUtf16LE(e){let r=e.length*2;if(this.cursor+r<=this.chunkSize){for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);this.currentBuffer[this.cursor++]=i&255,this.currentBuffer[this.cursor++]=i>>8&255}return}if(this._flush(),r>this.chunkSize)this.chunks.push(ha.Buffer.from(e,"utf16le"));else for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);this.currentBuffer[this.cursor++]=i&255,this.currentBuffer[this.cursor++]=i>>8&255}}getChunks(){return this.cursor>0&&(this.chunks.push(this.currentBuffer.subarray(0,this.cursor)),this.currentBuffer=ha.Buffer.alloc(this.chunkSize),this.cursor=0),this.chunks}reset(){this.chunks=[],this.cursor=0}}});var SX={};_t(SX,{XlsbWriter:()=>rS,default:()=>ZCe});var TX,pX,tS,QCe,rS,ZCe,RX=H(()=>{"use strict";TX=q(require("fs")),pX=q(MC()),tS=require("stream");vC();QCe=/[\\/*?[\]:]/g,rS=class{constructor(e){this.sheetCount=0;this.sheetList=[];this.sstDic=new Map;this.sstCntUnique=0;this.sstCntAll=0;this.colWidths=[];this._autofilterIsOn=!1;this.currentSheetBuffer=null;this.currentSheetRowNum=0;this.currentSheetStartCol=0;this.currentSheetEndCol=0;this.currentSheetDoAutofilter=!1;this.isStreaming=!1;this.filePath=e,this.output=TX.createWriteStream(e),this.archive=(0,pX.default)("zip"),this.archive.pipe(this.output),this._oaEpoch=Date.UTC(1899,11,30),this._sheet1Bytes=Buffer.from([129,1,0,147,1,23,203,4,2,0,64,0,0,0,0,0,0,255,255,255,255,255,255,255,255,0,0,0,0,148,1,16,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,133,1,0,137,1,30,220,3,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,100,0,0,0,0,0,0,0,0,0,0,0,152,1,36,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,1,0,134,1,0,37,6,1,0,2,14,0,128,149,8,2,5,0,38,0,229,3,12,255,255,255,255,8,0,44,1,0,0,0,0,145,1,0,37,6,1,0,2,14,0,128,128,8,2,5,0,38,0,0,25,0,0,0,0,0,0,0,0,44,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,7,12,0,0,0,0,0,0,0,0,0,0,0,0,146,1,0,151,4,66,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,221,3,2,16,0,220,3,48,102,102,102,102,102,102,230,63,102,102,102,102,102,102,230,63,0,0,0,0,0,0,232,63,0,0,0,0,0,0,232,63,51,51,51,51,51,51,211,63,51,51,51,51,51,51,211,63,37,6,1,0,0,16,0,128,128,24,16,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,38,0,130,1,0]),this._workbookBinStart=Buffer.from([131,1,0,128,1,50,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,120,0,108,0,1,0,0,0,55,0,1,0,0,0,54,0,5,0,0,0,50,0,52,0,51,0,50,0,54,0,153,1,12,32,0,1,0,0,0,0,0,0,0,0,0,37,6,1,0,3,15,0,128,151,16,52,24,0,0,0,67,0,58,0,92,0,115,0,113,0,108,0,115,0,92,0,84,0,101,0,115,0,116,0,121,0,90,0,97,0,112,0,105,0,115,0,117,0,88,0,108,0,115,0,98,0,92,0,38,0,37,6,1,0,0,16,0,128,129,24,130,1,0,0,0,0,0,0,0,0,47,0,0,0,49,0,51,0,95,0,110,0,99,0,114,0,58,0,49,0,95,0,123,0,49,0,54,0,53,0,48,0,56,0,68,0,54,0,57,0,45,0,67,0,70,0,56,0,55,0,45,0,52,0,55,0,54,0,57,0,45,0,56,0,52,0,53,0,54,0,45,0,68,0,52,0,65,0,52,0,48,0,49,0,49,0,51,0,49,0,53,0,54,0,55,0,125,0,47,0,0,0,47,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,38,0,135,1,0,37,6,1,0,2,16,0,128,128,24,16,0,0,0,0,13,0,0,0,255,255,255,255,0,0,0,0,38,0,158,1,29,0,0,0,0,158,22,0,0,180,105,0,0,232,38,0,0,88,2,0,0,0,0,0,0,0,0,0,0,120,136,1,0,143,1,0]),this._workbookBinMiddle=Buffer.from([144,1,0]),this._workbookBinEnd=Buffer.from([157,1,26,53,234,2,0,1,0,0,0,100,0,0,0,252,169,241,210,77,98,80,63,1,0,0,0,106,0,155,1,1,0,35,4,3,15,0,0,171,16,1,1,36,0,132,1,0]),this._stylesBin=Buffer.from([150,2,0,231,4,4,2,0,0,0,44,44,164,0,19,0,0,0,121,0,121,0,121,0,121,0,92,0,45,0,109,0,109,0,92,0,45,0,100,0,100,0,92,0,32,0,104,0,104,0,58,0,109,0,109,0,44,30,166,0,12,0,0,0,121,0,121,0,121,0,121,0,92,0,45,0,109,0,109,0,92,0,45,0,100,0,100,0,232,4,0,227,4,4,1,0,0,0,43,39,220,0,0,0,144,1,0,0,0,2,0,0,7,1,0,0,0,0,0,255,2,7,0,0,0,67,0,97,0,108,0,105,0,98,0,114,0,105,0,43,39,220,0,1,0,188,2,0,0,0,2,238,0,7,1,0,0,0,0,0,255,2,7,0,0,0,67,0,97,0,108,0,105,0,98,0,114,0,105,0,37,6,1,0,2,14,0,128,129,8,0,38,0,228,4,0,219,4,4,2,0,0,0,45,68,0,0,0,0,3,64,0,0,0,0,0,255,3,65,0,0,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,45,68,17,0,0,0,3,64,0,0,0,0,0,255,3,65,0,0,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,220,4,0,229,4,4,1,0,0,0,46,51,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,230,4,0,242,4,4,1,0,0,0,47,16,255,255,0,0,0,0,0,0,0,0,0,0,16,16,0,0,243,4,0,233,4,4,4,0,0,0,47,16,0,0,0,0,0,0,0,0,0,0,0,0,16,16,0,0,47,16,0,0,164,0,0,0,0,0,0,0,0,0,16,16,1,0,47,16,0,0,166,0,0,0,0,0,0,0,0,0,16,16,1,0,47,16,0,0,0,1,1,0,0,0,0,0,0,0,16,16,0,0,234,4,0,235,4,4,1,0,0,0,37,6,1,0,2,17,0,128,128,24,16,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,38,0,48,28,0,0,0,0,1,0,0,0,8,0,0,0,78,0,111,0,114,0,109,0,97,0,108,0,110,0,121,0,236,4,0,249,3,4,0,0,0,0,250,3,0,252,3,80,0,0,0,0,17,0,0,0,84,0,97,0,98,0,108,0,101,0,83,0,116,0,121,0,108,0,101,0,77,0,101,0,100,0,105,0,117,0,109,0,50,0,17,0,0,0,80,0,105,0,118,0,111,0,116,0,83,0,116,0,121,0,108,0,101,0,76,0,105,0,103,0,104,0,116,0,49,0,54,0,253,3,0,35,4,2,14,0,0,235,8,0,246,8,42,0,0,0,0,17,0,0,0,83,0,108,0,105,0,99,0,101,0,114,0,83,0,116,0,121,0,108,0,101,0,76,0,105,0,103,0,104,0,116,0,49,0,247,8,0,236,8,0,36,0,35,4,3,15,0,0,176,16,0,178,16,50,0,0,0,0,21,0,0,0,84,0,105,0,109,0,101,0,83,0,108,0,105,0,99,0,101,0,114,0,83,0,116,0,121,0,108,0,101,0,76,0,105,0,103,0,104,0,116,0,49,0,179,16,0,177,16,0,36,0,151,2,0]),this._binaryIndexBin=Buffer.from([42,24,0,0,0,0,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,149,2,0]),this._rRkIntegerLowerLimit=-1<<29,this._rRkIntegerUpperLimit=(1<<29)-1,this._autoFilterStartBytes=Buffer.from([161,1,16]),this._autoFilterEndBytes=Buffer.from([162,1,0]),this._stickHeaderA1bytes=Buffer.from([151,1,29,0,0,0,0,0,0,0,0,0,0,0,0,0,0,240,63,1,0,0,0,0,0,0,0,2,0,0,0,3]),this._magicFilterExcel2016Fix0=Buffer.from([225,2,0,229,2,0,234,2]),this._magicFilterExcel2016Fix1=Buffer.from([39,70,33,0,0,0,0,255,0,0,0,15,0,0,0,95,0,70,0,105,0,108,0,116,0,101,0,114,0,68,0,97,0,116,0,97,0,98,0,97,0,115,0,101,0,15,0,0,0,59,255,0]),this._magicFilterExcel2016Fix2=Buffer.from([0,0,0,0,255,255,255,255])}_sanitizeSheetName(e){if(!e||typeof e!="string")return`Sheet${this.sheetCount+1}`;let r=e.replace(QCe,"_");return r.length>31&&(r=r.substring(0,31)),r.trim().length===0&&(r=`Sheet${this.sheetCount+1}`),r}addSheet(e,r=!1){let n=this._sanitizeSheetName(e);this.sheetCount++,this.sheetList.push({name:n,pathInArchive:`xl/worksheets/sheet${this.sheetCount}.bin`,hidden:r,nameInArchive:`sheet${this.sheetCount}.bin`,sheetId:this.sheetCount,filterHeaderRange:null})}startSheet(e,r,n,i={}){if(this.isStreaming)throw new Error("Already in streaming mode. Call endSheet() first.");let{hidden:s=!1,doAutofilter:o=!0}=i;this.addSheet(e,s),this.isStreaming=!0,this.currentSheetBuffer=new ss,this.currentSheetRowNum=0,this.currentSheetStartCol=0,this.currentSheetEndCol=r,this.currentSheetDoAutofilter=o&&n!==void 0;let a=this.currentSheetBuffer;if(this.colWidths=new Array(r).fill(-1),n)for(let c=0;c<r;c++){let d=1.25*(n[c]?n[c].length:0)+2;d>80&&(d=80),this.colWidths[c]<d&&(this.colWidths[c]=d)}let l=Buffer.from(this._sheet1Bytes);l.writeInt32LE(this.currentSheetStartCol,40),l.writeInt32LE(this.currentSheetEndCol,44),this.sheetCount!==1&&(l[54]=156),a.write(l.subarray(0,84)),this.currentSheetDoAutofilter&&a.write(this._stickHeaderA1bytes),a.write(l.subarray(84,159)),a.writeByte(134),a.writeByte(3);for(let c=this.currentSheetStartCol;c<this.currentSheetEndCol;c++){a.writeByte(0),a.writeByte(60),a.writeByte(18),a.writeInt32LE(c),a.writeInt32LE(c);let u=this.colWidths[c]>0?Math.floor(this.colWidths[c]):10;a.writeByte(0),a.writeByte(Math.max(0,Math.min(255,u))),a.writeByte(0),a.writeByte(0),a.writeByte(0),a.writeByte(0),a.writeByte(0),a.writeByte(0),a.writeByte(2)}if(a.writeByte(0),a.writeByte(135),a.writeByte(3),a.writeByte(0),a.write(l.subarray(159,175)),a.write(Buffer.from([38,0])),n){this.createRowHeader(a,this.currentSheetRowNum,this.currentSheetStartCol,this.currentSheetEndCol);for(let c=0;c<n.length;c++)this.writeString(a,n[c],c,!0);this.currentSheetRowNum++}}writeRow(e){if(!this.isStreaming||!this.currentSheetBuffer)throw new Error("Not in streaming mode. Call startSheet() first.");if(e.length!==this.currentSheetEndCol-this.currentSheetStartCol)throw new Error(`Row length mismatch. Expected ${this.currentSheetEndCol-this.currentSheetStartCol} columns, got ${e.length}`);let r=this.currentSheetBuffer;this.createRowHeader(r,this.currentSheetRowNum,this.currentSheetStartCol,this.currentSheetEndCol);for(let n=0;n<e.length;n++){let i=e[n];i!=null&&(typeof i=="number"?Number.isInteger(i)?i>=this._rRkIntegerLowerLimit&&i<=this._rRkIntegerUpperLimit?this.writeRkNumberInteger(r,i,n):this.writeDouble(r,i,n):this.writeDouble(r,i,n):typeof i=="bigint"?this.writeString(r,i.toString(),n):typeof i=="boolean"?this.writeBool(r,i,n):i instanceof Date?this.writeDateTime(r,i,n):this.writeString(r,i.toString(),n))}this.currentSheetRowNum++}endSheet(){if(!this.isStreaming||!this.currentSheetBuffer)throw new Error("Not in streaming mode. Call startSheet() first.");let e=this.currentSheetBuffer,r=Buffer.from(this._sheet1Bytes);if(e.write(r.subarray(218,290)),this.currentSheetDoAutofilter){this._autofilterIsOn=!0;let n=this.currentSheetRowNum;e.write(this._autoFilterStartBytes);let i=Buffer.alloc(8);i.writeInt32LE(0,0),i.writeInt32LE(n-1,4),e.write(i);let s=Buffer.alloc(8);s.writeInt32LE(this.currentSheetStartCol,0),s.writeInt32LE(this.currentSheetEndCol-1,4),e.write(s),e.write(this._autoFilterEndBytes);let o=this.sheetList[this.sheetCount-1];o.filterData={startRow:0,endRow:this.currentSheetRowNum-1,startColumn:this.currentSheetStartCol,endColumn:this.currentSheetEndCol-1}}e.write(r.subarray(290)),this.archive.append(tS.Readable.from(e.getChunks()),{name:this.sheetList[this.sheetCount-1].pathInArchive}),this.isStreaming=!1,this.currentSheetBuffer=null,this.currentSheetRowNum=0,this.currentSheetStartCol=0,this.currentSheetEndCol=0,this.currentSheetDoAutofilter=!1}writeSheet(e,r=null,n=!0){let i=new ss,s=0;if(e.length>0?s=e[0].length:r&&(s=r.length),this.colWidths=new Array(s).fill(-1),r)for(let u=0;u<s;u++){let E=1.25*(r[u]?r[u].length:0)+2;E>80&&(E=80),this.colWidths[u]<E&&(this.colWidths[u]=E)}for(let u=0;u<Math.min(e.length,100);u++){let d=e[u];for(let E=0;E<d.length;E++){let f=d[E],h=1.25*(f?f.toString().length:0)+2;h>80&&(h=80),this.colWidths[E]<h&&(this.colWidths[E]=h)}}let o=Buffer.from(this._sheet1Bytes),a=0,l=s;o.writeInt32LE(a,40),o.writeInt32LE(l,44),this.sheetCount!==1&&(o[54]=156),i.write(o.subarray(0,84)),n&&r&&i.write(this._stickHeaderA1bytes),i.write(o.subarray(84,159)),i.writeByte(134),i.writeByte(3);for(let u=a;u<l;u++){i.writeByte(0),i.writeByte(60),i.writeByte(18),i.writeInt32LE(u),i.writeInt32LE(u);let d=this.colWidths[u]>0?Math.floor(this.colWidths[u]):10;i.writeByte(0),i.writeByte(Math.max(0,Math.min(255,d))),i.writeByte(0),i.writeByte(0),i.writeByte(0),i.writeByte(0),i.writeByte(0),i.writeByte(0),i.writeByte(2)}i.writeByte(0),i.writeByte(135),i.writeByte(3),i.writeByte(0),i.write(o.subarray(159,175)),i.write(Buffer.from([38,0]));let c=0;if(r){this.createRowHeader(i,c,a,l);for(let u=0;u<r.length;u++)this.writeString(i,r[u],u,!0);c++}for(let u=0;u<e.length;u++){this.createRowHeader(i,c,a,l);let d=e[u];for(let E=0;E<d.length;E++){let f=d[E];f!=null&&(typeof f=="number"?Number.isInteger(f)?f>=this._rRkIntegerLowerLimit&&f<=this._rRkIntegerUpperLimit?this.writeRkNumberInteger(i,f,E):this.writeDouble(i,f,E):this.writeDouble(i,f,E):typeof f=="bigint"?this.writeString(i,f.toString(),E):typeof f=="boolean"?this.writeBool(i,f,E):f instanceof Date?this.writeDateTime(i,f,E):this.writeString(i,f.toString(),E))}c++}if(i.write(o.subarray(218,290)),n&&r){this._autofilterIsOn=!0;let u=e.length+1;i.write(this._autoFilterStartBytes);let d=Buffer.alloc(8);d.writeInt32LE(0,0),d.writeInt32LE(u-1,4),i.write(d);let E=Buffer.alloc(8);E.writeInt32LE(a,0),E.writeInt32LE(l-1,4),i.write(E),i.write(this._autoFilterEndBytes);let f=this.sheetList[this.sheetCount-1];f.filterData={startRow:0,endRow:e.length,startColumn:a,endColumn:l-1}}i.write(o.subarray(290)),this.archive.append(tS.Readable.from(i.getChunks()),{name:this.sheetList[this.sheetCount-1].pathInArchive})}_getColumnLetter(e){if(e<26)return String.fromCharCode(65+e);if(e<702){let r=Math.floor(e/26)-1,n=e%26;return String.fromCharCode(65+r)+String.fromCharCode(65+n)}return"A"}createRowHeader(e,r,n,i){e.ensureCapacity(27),e.writeUnsafeByte(0),e.writeUnsafeByte(25),e.writeUnsafeInt32LE(r),e.writeUnsafeInt32LE(0),e.writeUnsafeByte(44),e.writeUnsafeByte(1),e.writeUnsafeByte(0),e.writeUnsafeByte(0),e.writeUnsafeByte(0),e.writeUnsafeByte(1),e.writeUnsafeByte(0),e.writeUnsafeByte(0),e.writeUnsafeByte(0),e.writeUnsafeInt32LE(n),e.writeUnsafeInt32LE(i)}writeRkNumberInteger(e,r,n,i=0){e.ensureCapacity(14),e.writeUnsafeByte(2),e.writeUnsafeByte(12),e.writeUnsafeInt32LE(n),e.writeUnsafeByte(i),e.writeUnsafeByte(0),e.writeUnsafeByte(0),e.writeUnsafeByte(0);let s=r<<2|2;e.writeUnsafeInt32LE(s)}writeDouble(e,r,n,i=0){e.ensureCapacity(18),e.writeUnsafeByte(5),e.writeUnsafeByte(16),e.writeUnsafeInt32LE(n),e.writeUnsafeByte(i),e.writeUnsafeByte(0),e.writeUnsafeByte(0),e.writeUnsafeByte(0),e.writeUnsafeDoubleLE(r)}writeBool(e,r,n){e.ensureCapacity(13),e.writeUnsafeByte(4),e.writeUnsafeByte(9),e.writeUnsafeInt32LE(n),e.writeUnsafeInt32LE(0),e.writeUnsafeByte(r?1:0)}writeDateTime(e,r,n){let i=r.getTimezoneOffset()*6e4,s=(r.getTime()-i-this._oaEpoch)/864e5;this.writeDouble(e,s,n,1)}writeString(e,r,n,i=!1){let s;this.sstDic.has(r)?s=this.sstDic.get(r):(s=this.sstCntUnique,this.sstDic.set(r,s),this.sstCntUnique++),this.sstCntAll++,e.ensureCapacity(17),e.writeUnsafeByte(7),e.writeUnsafeByte(12),e.writeUnsafeInt32LE(n),e.writeUnsafeByte(i?3:0),e.writeUnsafeByte(0),e.writeUnsafeByte(0),e.writeUnsafeByte(0),e.writeUnsafeInt32LE(s)}saveSst(){let e=new ss;e.writeByte(159),e.writeByte(1),e.writeByte(8),e.writeInt32LE(this.sstCntUnique),e.writeInt32LE(this.sstCntAll);for(let[r]of this.sstDic){let n=r.length;e.writeByte(19);let i=5+2*n;if(i>=128){e.writeByte(128+i%128);let s=i>>7;s>=256?e.writeByte(128+s%128):e.writeByte(s),e.writeByte(i>>14),i>>14>0&&e.writeByte(0)}else e.writeByte(i&255),e.writeByte(i>>8&255);e.writeInt32LE(n),e.writeUtf16LE(r)}e.writeByte(160),e.writeByte(1),e.writeByte(0),this.archive.append(tS.Readable.from(e.getChunks()),{name:"xl/sharedStrings.bin"})}_writeFilterDefinedName(e,r,n){let i=r.filterData,s=r.sheetId-1,o=Buffer.alloc(this._magicFilterExcel2016Fix1.length);this._magicFilterExcel2016Fix1.copy(o);let a=this._magicFilterExcel2016Fix1.length-2;o[7]=s,o[a]=n,e.push(o);let l=Buffer.alloc(8);l.writeInt32LE(i.startRow,0),l.writeInt32LE(i.endRow,4),e.push(l);let c=Buffer.alloc(4);c.writeInt16LE(i.startColumn,0),c.writeInt16LE(i.endColumn,2),e.push(c),e.push(this._magicFilterExcel2016Fix2)}finalize(){return new Promise((e,r)=>{try{this.saveSst(),this.archive.append(this._stylesBin,{name:"xl/styles.bin"});let n=[];n.push(this._workbookBinStart);for(let a of this.sheetList){let l=`rId${a.sheetId}`,c=16+a.name.length*2+l.length*2,u=Buffer.alloc(3+c);u[0]=156,u[1]=1,u[2]=c;let d=3;u.writeInt32LE(a.hidden?1:0,d),d+=4,u.writeInt32LE(a.sheetId,d),d+=4,u.writeInt32LE(l.length,d),d+=4;for(let E=0;E<l.length;E++){let f=l.charCodeAt(E);u[d++]=f&255,u[d++]=f>>8&255}u.writeInt32LE(a.name.length,d),d+=4;for(let E=0;E<a.name.length;E++){let f=a.name.charCodeAt(E);u[d++]=f&255,u[d++]=f>>8&255}n.push(u)}if(n.push(this._workbookBinMiddle),this._autofilterIsOn){let a=this.sheetList.filter(c=>c.filterData),l=a.length;if(l>0){n.push(this._magicFilterExcel2016Fix0);let c=16+(l-1)*12,u=Buffer.from([c,l,0,0,0]);n.push(u);for(let d=0;d<l;d++){let E=a[d].sheetId-1,f=Buffer.alloc(12);f.writeInt32LE(0,0),f[4]=E,f[8]=E,n.push(f)}n.push(Buffer.from([226,2,0]));for(let d=0;d<l;d++){let E=a[d];this._writeFilterDefinedName(n,E,d)}}}n.push(this._workbookBinEnd),this.archive.append(Buffer.concat(n),{name:"xl/workbook.bin"});for(let a of this.sheetList)this.archive.append(this._binaryIndexBin,{name:`xl/worksheets/binaryIndex${a.sheetId}.bin`});let i=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types">
<Default Extension="bin" ContentType="application/vnd.ms-excel.sheet.binary.macroEnabled.main"/>
<Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml"/>
<Default Extension="xml" ContentType="application/xml"/>`;for(let a of this.sheetList)i+=`<Override PartName="/${a.pathInArchive}" ContentType="application/vnd.ms-excel.worksheet"/>`,i+=`<Override PartName="/xl/worksheets/binaryIndex${a.sheetId}.bin" ContentType="application/vnd.ms-excel.binIndexWs"/>`;i+=`<Override PartName="/xl/styles.bin" ContentType="application/vnd.ms-excel.styles"/>
<Override PartName="/xl/sharedStrings.bin" ContentType="application/vnd.ms-excel.sharedStrings"/>
</Types>`,this.archive.append(i,{name:"[Content_Types].xml"});let s=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">`;for(let a of this.sheetList){let l=`rId${a.sheetId}`;s+=`<Relationship Id="${l}" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="worksheets/${a.nameInArchive}"/>`}s+=`<Relationship Id="rId${this.sheetList.length+2}" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Target="styles.bin"/>
<Relationship Id="rId${this.sheetList.length+3}" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings" Target="sharedStrings.bin"/>
</Relationships>`,this.archive.append(s,{name:"xl/_rels/workbook.bin.rels"}),this.archive.append(`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">
<Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.bin"/>
</Relationships>`,{name:"_rels/.rels"});for(let a of this.sheetList){let l=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">
<Relationship Id="rId1" Type="http://schemas.microsoft.com/office/2006/relationships/xlBinaryIndex" Target="binaryIndex${a.sheetId}.bin"/>
</Relationships>`;this.archive.append(l,{name:`xl/worksheets/_rels/${a.nameInArchive}.rels`})}this.output.on("close",()=>e()),this.archive.on("error",a=>r(a)),this.archive.finalize()}catch(n){r(n)}})}},ZCe=rS});var Ta={};_t(Ta,{copyFileToClipboard:()=>FC,exportCsvToXlsb:()=>tye,exportQueryToXlsb:()=>BC,getTempFilePath:()=>rye});function eye(t){if(typeof t=="string"&&t.length>0&&/^-?\d+(\.\d+)?$/.test(t)){let e=parseFloat(t);if(Number.isFinite(e))return e}return t}function _X(t){return t.map(eye)}async function BC(t,e,r,n=!1,i,s){let o=null;try{i&&i("Connecting to database...");let a={host:t.host,port:t.port||5480,database:t.database,user:t.user,password:t.password},l=Ir();o=new l(a),await o.connect();let c=new mX(r),{SqlParser:u}=await Promise.resolve().then(()=>(lo(),lw)),d=u.splitStatements(e),E=0,f=0;for(let m=0;m<d.length;m++){let R=d[m];if(!R.trim())continue;let A=d.length>1?`Result ${m+1}`:"Query Results";i&&i(`Executing query ${m+1}/${d.length}...`);try{let g=o.createCommand(R);s&&(g.commandTimeout=s);let w=await g.executeReader(),I=[];for(let P=0;P<w.fieldCount;P++)I.push(w.getName(P));let D=I.length;f=Math.max(f,D),c.startSheet(A,D,I,{doAutofilter:!0});let b=0;for(;await w.read();){let P=[];for(let M=0;M<w.fieldCount;M++)P.push(w.getValue(M));c.writeRow(_X(P)),b++,b%1e4===0&&i&&i(`Streaming ${b.toLocaleString()} rows to "${A}"...`)}c.endSheet(),E+=b,i&&i(`Written ${b.toLocaleString()} rows to sheet "${A}"`)}catch(g){let w=g instanceof Error?g.message:String(g);c.startSheet(`Error ${m+1}`,1,["Error"],{doAutofilter:!1}),c.writeRow([`Error executing query: ${w}`]),c.endSheet()}}let T=e.split(`
`);c.startSheet("SQL Code",1,void 0,{doAutofilter:!1}),c.writeRow(["SQL Query:"]);for(let m of T)c.writeRow([m]);c.endSheet(),i&&i("Finalizing file..."),await c.finalize();let p=UC.statSync(r).size/(1024*1024);i&&(i("XLSB file created successfully"),i(`  - Total Rows: ${E.toLocaleString()}`),i(`  - File size: ${p.toFixed(1)} MB`),i(`  - Location: ${r}`));let S={success:!0,message:`Successfully exported ${E} rows to ${r}`,details:{rows_exported:E,columns:f,file_size_mb:parseFloat(p.toFixed(1)),file_path:r}};if(n){i&&i("Copying to clipboard...");let m=await FC(r);S.details&&(S.details.clipboard_success=m)}return S}catch(a){return{success:!1,message:`Export error: ${a instanceof Error?a.message:String(a)}`}}finally{if(o)try{await o.close()}catch{}}}async function tye(t,e,r=!1,n={source:"Unknown"},i){try{i&&i("Initializing XLSB writer...");let s=new mX(e),o=0,a=0,l=[],c=(f,T)=>{let h=f.split(/\r?\n/),p=A=>{let g=[],w=0,I=!1;for(let b=0;b<A.length;b++)if(A[b]==='"')I=!I;else if(A[b]===","&&!I){let P=A.substring(w,b);P.startsWith('"')&&P.endsWith('"')&&(P=P.substring(1,P.length-1).replace(/""/g,'"')),g.push(P),w=b+1}let D=A.substring(w);return D.startsWith('"')&&D.endsWith('"')&&(D=D.substring(1,D.length-1).replace(/""/g,'"')),g.push(D),g},S=0;for(;S<h.length&&!h[S].trim();)S++;if(S>=h.length)return;let m=p(h[S]);if(m.length===0)return;a=Math.max(a,m.length),s.startSheet(T,m.length,m,{doAutofilter:!0});let R=0;for(let A=S+1;A<h.length;A++){let g=h[A];if(!g.trim())continue;let w=p(g);s.writeRow(_X(w)),R++}s.endSheet(),o+=R};Array.isArray(t)?(i&&i(`Processing ${t.length} result sets...`),t.forEach((f,T)=>{let h=f.name||`Result ${T+1}`;i&&i(`Processing sheet "${h}"...`),c(f.csv,h),f.sql&&l.push({name:h,sql:f.sql})})):(i&&i("Reading CSV content..."),c(t,"Query Results"),n.sql?l.push({name:"Query Results",sql:n.sql}):n.source&&(s.startSheet("CSV Source",1,void 0,{doAutofilter:!1}),s.writeRow(["CSV Source:"]),s.writeRow([n.source]),s.endSheet())),l.length>0&&(s.startSheet("SQL Code",1,void 0,{doAutofilter:!1}),l.forEach(f=>{s.writeRow([`--- SQL for ${f.name} ---`]),f.sql.split(`
`).forEach(T=>{s.writeRow([T])}),s.writeRow([""])}),s.endSheet()),i&&i("Finalizing XLSB file..."),await s.finalize();let d=UC.statSync(e).size/(1024*1024);i&&(i("XLSB file created successfully"),i(`  - Rows: ${o.toLocaleString()}`),i(`  - File size: ${d.toFixed(1)} MB`));let E={success:!0,message:`Successfully exported ${o} rows to ${e}`,details:{rows_exported:o,columns:a,file_size_mb:parseFloat(d.toFixed(1)),file_path:e}};if(r){i&&i("Copying file to clipboard...");let f=await FC(e);E.details&&(E.details.clipboard_success=f)}return E}catch(s){return{success:!1,message:`Export failed: ${s instanceof Error?s.message:String(s)}`}}}async function FC(t){return nS.platform()!=="win32"?(console.error("Clipboard file copy is only supported on Windows"),!1):new Promise(e=>{try{let r=hc.normalize(hc.resolve(t)),n=`Set-Clipboard -Path "${r.replace(/"/g,'`"')}"`,i=(0,AX.spawn)("powershell.exe",["-NoProfile","-NonInteractive","-Command",n]),s="";i.stderr.on("data",o=>{s+=o.toString()}),i.on("close",o=>{o!==0?(console.error(`PowerShell clipboard copy failed: ${s}`),e(!1)):(console.log(`File copied to clipboard: ${r}`),e(!0))}),i.on("error",o=>{console.error(`Error spawning PowerShell: ${o.message}`),e(!1)})}catch(r){let n=r instanceof Error?r.message:String(r);console.error(`Error copying file to clipboard: ${n}`),e(!1)}})}function rye(){let t=nS.tmpdir(),r=`netezza_export_${Date.now()}.xlsb`;return hc.join(t,r)}var UC,hc,nS,AX,mX,Ks=H(()=>{"use strict";UC=q(require("fs")),hc=q(require("path")),nS=q(require("os")),AX=require("child_process"),mX=(RX(),Ma(SX)).default});var OX=O((OBe,NX)=>{NX.exports=sS;function sS(){this.pending=0,this.max=1/0,this.listeners=[],this.waiting=[],this.error=null}sS.prototype.go=function(t){this.pending<this.max?gX(this,t):this.waiting.push(t)};sS.prototype.wait=function(t){this.pending===0?t(this.error):this.listeners.push(t)};sS.prototype.hold=function(){return IX(this)};function IX(t){t.pending+=1;var e=!1;return r;function r(i){if(e)throw new Error("callback called twice");if(e=!0,t.error=t.error||i,t.pending-=1,t.waiting.length>0&&t.pending<t.max)gX(t,t.waiting.shift());else if(t.pending===0){var s=t.listeners;t.listeners=[],s.forEach(n)}}function n(i){i(t.error)}}function gX(t,e){e(IX(t))}});var yX=O(qd=>{var Vd=require("fs"),oS=require("util"),WC=require("stream"),CX=WC.Readable,kC=WC.Writable,nye=WC.PassThrough,iye=OX(),aS=require("events").EventEmitter;qd.createFromBuffer=sye;qd.createFromFd=oye;qd.BufferSlicer=as;qd.FdSlicer=os;oS.inherits(os,aS);function os(t,e){e=e||{},aS.call(this),this.fd=t,this.pend=new iye,this.pend.max=1,this.refCount=0,this.autoClose=!!e.autoClose}os.prototype.read=function(t,e,r,n,i){var s=this;s.pend.go(function(o){Vd.read(s.fd,t,e,r,n,function(a,l,c){o(),i(a,l,c)})})};os.prototype.write=function(t,e,r,n,i){var s=this;s.pend.go(function(o){Vd.write(s.fd,t,e,r,n,function(a,l,c){o(),i(a,l,c)})})};os.prototype.createReadStream=function(t){return new lS(this,t)};os.prototype.createWriteStream=function(t){return new cS(this,t)};os.prototype.ref=function(){this.refCount+=1};os.prototype.unref=function(){var t=this;if(t.refCount-=1,t.refCount>0)return;if(t.refCount<0)throw new Error("invalid unref");t.autoClose&&Vd.close(t.fd,e);function e(r){r?t.emit("error",r):t.emit("close")}};oS.inherits(lS,CX);function lS(t,e){e=e||{},CX.call(this,e),this.context=t,this.context.ref(),this.start=e.start||0,this.endOffset=e.end,this.pos=this.start,this.destroyed=!1}lS.prototype._read=function(t){var e=this;if(!e.destroyed){var r=Math.min(e._readableState.highWaterMark,t);if(e.endOffset!=null&&(r=Math.min(r,e.endOffset-e.pos)),r<=0){e.destroyed=!0,e.push(null),e.context.unref();return}e.context.pend.go(function(n){if(e.destroyed)return n();var i=Buffer.allocUnsafe(r);Vd.read(e.context.fd,i,0,r,e.pos,function(s,o){s?e.destroy(s):o===0?(e.destroyed=!0,e.push(null),e.context.unref()):(e.pos+=o,e.push(i.slice(0,o))),n()})})}};lS.prototype.destroy=function(t){this.destroyed||(t=t||new Error("stream destroyed"),this.destroyed=!0,this.emit("error",t),this.context.unref())};oS.inherits(cS,kC);function cS(t,e){e=e||{},kC.call(this,e),this.context=t,this.context.ref(),this.start=e.start||0,this.endOffset=e.end==null?1/0:+e.end,this.bytesWritten=0,this.pos=this.start,this.destroyed=!1,this.on("finish",this.destroy.bind(this))}cS.prototype._write=function(t,e,r){var n=this;if(!n.destroyed){if(n.pos+t.length>n.endOffset){var i=new Error("maximum file length exceeded");i.code="ETOOBIG",n.destroy(),r(i);return}n.context.pend.go(function(s){if(n.destroyed)return s();Vd.write(n.context.fd,t,0,t.length,n.pos,function(o,a){o?(n.destroy(),s(),r(o)):(n.bytesWritten+=a,n.pos+=a,n.emit("progress"),s(),r())})})}};cS.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.context.unref())};oS.inherits(as,aS);function as(t,e){aS.call(this),e=e||{},this.refCount=0,this.buffer=t,this.maxChunkSize=e.maxChunkSize||Number.MAX_SAFE_INTEGER}as.prototype.read=function(t,e,r,n,i){if(!(0<=e&&e<=t.length))throw new RangeError("offset outside buffer: 0 <= "+e+" <= "+t.length);if(n<0)throw new RangeError("position is negative: "+n);if(e+r>t.length&&(r=t.length-e),n+r>this.buffer.length&&(r=this.buffer.length-n),r<=0){setImmediate(function(){i(null,0)});return}this.buffer.copy(t,e,n,n+r),setImmediate(function(){i(null,r)})};as.prototype.write=function(t,e,r,n,i){t.copy(this.buffer,n,e,e+r),setImmediate(function(){i(null,r,t)})};as.prototype.createReadStream=function(t){t=t||{};var e=new nye(t);e.destroyed=!1,e.start=t.start||0,e.endOffset=t.end,e.pos=e.endOffset||this.buffer.length;for(var r=this.buffer.slice(e.start,e.pos),n=0;;){var i=n+this.maxChunkSize;if(i>=r.length){n<r.length&&e.write(r.slice(n,r.length));break}e.write(r.slice(n,i)),n=i}return e.end(),e.destroy=function(){e.destroyed=!0},e};as.prototype.createWriteStream=function(t){var e=this;t=t||{};var r=new kC(t);return r.start=t.start||0,r.endOffset=t.end==null?this.buffer.length:+t.end,r.bytesWritten=0,r.pos=r.start,r.destroyed=!1,r._write=function(n,i,s){if(!r.destroyed){var o=r.pos+n.length;if(o>r.endOffset){var a=new Error("maximum file length exceeded");a.code="ETOOBIG",r.destroyed=!0,s(a);return}n.copy(e.buffer,r.pos,0,n.length),r.bytesWritten+=n.length,r.pos=o,r.emit("progress"),s()}},r.destroy=function(){r.destroyed=!0},r};as.prototype.ref=function(){this.refCount+=1};as.prototype.unref=function(){if(this.refCount-=1,this.refCount<0)throw new Error("invalid unref")};function sye(t,e){return new as(t,e)}function oye(t,e){return new os(t,e)}});var LX=O((yBe,wX)=>{var Js=require("buffer").Buffer,$C=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];typeof Int32Array<"u"&&($C=new Int32Array($C));function bX(t){if(Js.isBuffer(t))return t;var e=typeof Js.alloc=="function"&&typeof Js.from=="function";if(typeof t=="number")return e?Js.alloc(t):new Js(t);if(typeof t=="string")return e?Js.from(t):new Js(t);throw new Error("input must be buffer, number, or string, received "+typeof t)}function aye(t){var e=bX(4);return e.writeInt32BE(t,0),e}function YC(t,e){t=bX(t),Js.isBuffer(e)&&(e=e.readUInt32BE(0));for(var r=~~e^-1,n=0;n<t.length;n++)r=$C[(r^t[n])&255]^r>>>8;return r^-1}function VC(){return aye(YC.apply(null,arguments))}VC.signed=function(){return YC.apply(null,arguments)};VC.unsigned=function(){return YC.apply(null,arguments)>>>0};wX.exports=VC});var HX=O(rn=>{var qC=require("fs"),lye=require("zlib"),DX=yX(),cye=LX(),fS=require("util"),ES=require("events").EventEmitter,PX=require("stream").Transform,jC=require("stream").PassThrough,uye=require("stream").Writable;rn.open=dye;rn.fromFd=xX;rn.fromBuffer=fye;rn.fromRandomAccessReader=zC;rn.dosDateTimeToDate=UX;rn.getFileNameLowLevel=BX;rn.validateFileName=FX;rn.parseExtraFields=GX;rn.ZipFile=gi;rn.Entry=Xd;rn.LocalFileHeader=vX;rn.RandomAccessReader=Qs;function dye(t,e,r){typeof e=="function"&&(r=e,e=null),e==null&&(e={}),e.autoClose==null&&(e.autoClose=!0),e.lazyEntries==null&&(e.lazyEntries=!1),e.decodeStrings==null&&(e.decodeStrings=!0),e.validateEntrySizes==null&&(e.validateEntrySizes=!0),e.strictFileNames==null&&(e.strictFileNames=!1),r==null&&(r=dS),qC.open(t,"r",function(n,i){if(n)return r(n);xX(i,e,function(s,o){s&&qC.close(i,dS),r(s,o)})})}function xX(t,e,r){typeof e=="function"&&(r=e,e=null),e==null&&(e={}),e.autoClose==null&&(e.autoClose=!1),e.lazyEntries==null&&(e.lazyEntries=!1),e.decodeStrings==null&&(e.decodeStrings=!0),e.validateEntrySizes==null&&(e.validateEntrySizes=!0),e.strictFileNames==null&&(e.strictFileNames=!1),r==null&&(r=dS),qC.fstat(t,function(n,i){if(n)return r(n);var s=DX.createFromFd(t,{autoClose:!0});zC(s,i.size,e,r)})}function fye(t,e,r){typeof e=="function"&&(r=e,e=null),e==null&&(e={}),e.autoClose=!1,e.lazyEntries==null&&(e.lazyEntries=!1),e.decodeStrings==null&&(e.decodeStrings=!0),e.validateEntrySizes==null&&(e.validateEntrySizes=!0),e.strictFileNames==null&&(e.strictFileNames=!1);var n=DX.createFromBuffer(t,{maxChunkSize:65536});zC(n,t.length,e,r)}function zC(t,e,r,n){typeof r=="function"&&(n=r,r=null),r==null&&(r={}),r.autoClose==null&&(r.autoClose=!0),r.lazyEntries==null&&(r.lazyEntries=!1),r.decodeStrings==null&&(r.decodeStrings=!0);var i=!!r.decodeStrings;if(r.validateEntrySizes==null&&(r.validateEntrySizes=!0),r.strictFileNames==null&&(r.strictFileNames=!1),n==null&&(n=dS),typeof e!="number")throw new Error("expected totalSize parameter to be a number");if(e>Number.MAX_SAFE_INTEGER)throw new Error("zip file too large. only file sizes up to 2^52 are supported due to JavaScript's Number type being an IEEE 754 double.");t.ref();var s=22,o=20,a=65535,l=Math.min(o+s+a,e),c=ls(l),u=e-c.length;pc(t,c,0,l,u,function(d){if(d)return n(d);for(var E=l-s;E>=0;E-=1)if(c.readUInt32LE(E)===101010256){var f=c.subarray(E),T=f.readUInt16LE(4),h=f.readUInt16LE(10),p=f.readUInt32LE(16),S=f.readUInt16LE(20),m=f.length-s;if(S!==m)return n(new Error("Invalid comment length. Expected: "+m+". Found: "+S+". Are there extra bytes at the end of the file? Or is the end of central dir signature `PK\u263A\u263B` in the comment?"));var R=i?uS(f.subarray(22),!1):f.subarray(22);if(E-o>=0&&c.readUInt32LE(E-o)===117853008){var A=c.subarray(E-o,E-o+o),g=Tc(A,8),w=ls(56);return pc(t,w,0,w.length,g,function(I){return I?n(I):w.readUInt32LE(0)!==101075792?n(new Error("invalid zip64 end of central directory record signature")):(T=w.readUInt32LE(16),T!==0?n(new Error("multi-disk zip files are not supported: found disk number: "+T)):(h=Tc(w,32),p=Tc(w,48),n(null,new gi(t,p,e,h,R,r.autoClose,r.lazyEntries,i,r.validateEntrySizes,r.strictFileNames))))})}return T!==0?n(new Error("multi-disk zip files are not supported: found disk number: "+T)):n(null,new gi(t,p,e,h,R,r.autoClose,r.lazyEntries,i,r.validateEntrySizes,r.strictFileNames))}n(new Error("End of central directory record signature not found. Either not a zip file, or file is truncated."))})}fS.inherits(gi,ES);function gi(t,e,r,n,i,s,o,a,l,c){var u=this;ES.call(u),u.reader=t,u.reader.on("error",function(d){MX(u,d)}),u.reader.once("close",function(){u.emit("close")}),u.readEntryCursor=e,u.fileSize=r,u.entryCount=n,u.comment=i,u.entriesRead=0,u.autoClose=!!s,u.lazyEntries=!!o,u.decodeStrings=!!a,u.validateEntrySizes=!!l,u.strictFileNames=!!c,u.isOpen=!0,u.emittedError=!1,u.lazyEntries||u._readEntry()}gi.prototype.close=function(){this.isOpen&&(this.isOpen=!1,this.reader.unref())};function Ii(t,e){t.autoClose&&t.close(),MX(t,e)}function MX(t,e){t.emittedError||(t.emittedError=!0,t.emit("error",e))}gi.prototype.readEntry=function(){if(!this.lazyEntries)throw new Error("readEntry() called without lazyEntries:true");this._readEntry()};gi.prototype._readEntry=function(){var t=this;if(t.entryCount===t.entriesRead){setImmediate(function(){t.autoClose&&t.close(),!t.emittedError&&t.emit("end")});return}if(!t.emittedError){var e=ls(46);pc(t.reader,e,0,e.length,t.readEntryCursor,function(r){if(r)return Ii(t,r);if(!t.emittedError){var n=new Xd,i=e.readUInt32LE(0);if(i!==33639248)return Ii(t,new Error("invalid central directory file header signature: 0x"+i.toString(16)));if(n.versionMadeBy=e.readUInt16LE(4),n.versionNeededToExtract=e.readUInt16LE(6),n.generalPurposeBitFlag=e.readUInt16LE(8),n.compressionMethod=e.readUInt16LE(10),n.lastModFileTime=e.readUInt16LE(12),n.lastModFileDate=e.readUInt16LE(14),n.crc32=e.readUInt32LE(16),n.compressedSize=e.readUInt32LE(20),n.uncompressedSize=e.readUInt32LE(24),n.fileNameLength=e.readUInt16LE(28),n.extraFieldLength=e.readUInt16LE(30),n.fileCommentLength=e.readUInt16LE(32),n.internalFileAttributes=e.readUInt16LE(36),n.externalFileAttributes=e.readUInt32LE(38),n.relativeOffsetOfLocalHeader=e.readUInt32LE(42),n.generalPurposeBitFlag&64)return Ii(t,new Error("strong encryption is not supported"));t.readEntryCursor+=46,e=ls(n.fileNameLength+n.extraFieldLength+n.fileCommentLength),pc(t.reader,e,0,e.length,t.readEntryCursor,function(s){if(s)return Ii(t,s);if(!t.emittedError){n.fileNameRaw=e.subarray(0,n.fileNameLength);var o=n.fileNameLength+n.extraFieldLength;n.extraFieldRaw=e.subarray(n.fileNameLength,o),n.fileCommentRaw=e.subarray(o,o+n.fileCommentLength);try{n.extraFields=GX(n.extraFieldRaw)}catch(h){return Ii(t,h)}if(t.decodeStrings){var a=(n.generalPurposeBitFlag&2048)!==0;n.fileComment=uS(n.fileCommentRaw,a),n.fileName=BX(n.generalPurposeBitFlag,n.fileNameRaw,n.extraFields,t.strictFileNames);var l=FX(n.fileName);if(l!=null)return Ii(t,new Error(l))}else n.fileComment=n.fileCommentRaw,n.fileName=n.fileNameRaw;n.comment=n.fileComment,t.readEntryCursor+=e.length,t.entriesRead+=1;for(var c=0;c<n.extraFields.length;c++){var u=n.extraFields[c];if(u.id===1){var d=u.data,E=0;if(n.uncompressedSize===4294967295){if(E+8>d.length)return Ii(t,new Error("zip64 extended information extra field does not include uncompressed size"));n.uncompressedSize=Tc(d,E),E+=8}if(n.compressedSize===4294967295){if(E+8>d.length)return Ii(t,new Error("zip64 extended information extra field does not include compressed size"));n.compressedSize=Tc(d,E),E+=8}if(n.relativeOffsetOfLocalHeader===4294967295){if(E+8>d.length)return Ii(t,new Error("zip64 extended information extra field does not include relative header offset"));n.relativeOffsetOfLocalHeader=Tc(d,E),E+=8}break}}if(t.validateEntrySizes&&n.compressionMethod===0){var f=n.uncompressedSize;if(n.isEncrypted()&&(f+=12),n.compressedSize!==f){var T="compressed/uncompressed size mismatch for stored file: "+n.compressedSize+" != "+n.uncompressedSize;return Ii(t,new Error(T))}}t.emit("entry",n),t.lazyEntries||t._readEntry()}})}})}};gi.prototype.openReadStream=function(t,e,r){var n=this,i=0,s=t.compressedSize;if(r==null&&(r=e,e=null),e==null)e={};else{if(e.decrypt!=null){if(!t.isEncrypted())throw new Error("options.decrypt can only be specified for encrypted entries");if(e.decrypt!==!1)throw new Error("invalid options.decrypt value: "+e.decrypt);if(t.isCompressed()&&e.decompress!==!1)throw new Error("entry is encrypted and compressed, and options.decompress !== false")}if(e.decompress!=null){if(!t.isCompressed())throw new Error("options.decompress can only be specified for compressed entries");if(!(e.decompress===!1||e.decompress===!0))throw new Error("invalid options.decompress value: "+e.decompress)}if(e.start!=null||e.end!=null){if(t.isCompressed()&&e.decompress!==!1)throw new Error("start/end range not allowed for compressed entry without options.decompress === false");if(t.isEncrypted()&&e.decrypt!==!1)throw new Error("start/end range not allowed for encrypted entry without options.decrypt === false")}if(e.start!=null){if(i=e.start,i<0)throw new Error("options.start < 0");if(i>t.compressedSize)throw new Error("options.start > entry.compressedSize")}if(e.end!=null){if(s=e.end,s<0)throw new Error("options.end < 0");if(s>t.compressedSize)throw new Error("options.end > entry.compressedSize");if(s<i)throw new Error("options.end < options.start")}}if(!n.isOpen)return r(new Error("closed"));if(t.isEncrypted()&&e.decrypt!==!1)return r(new Error("entry is encrypted, and options.decrypt !== false"));var o;if(t.compressionMethod===0)o=!1;else if(t.compressionMethod===8)o=e.decompress!=null?e.decompress:!0;else return r(new Error("unsupported compression method: "+t.compressionMethod));n.readLocalFileHeader(t,{minimal:!0},function(a,l){if(a)return r(a);n.openReadStreamLowLevel(l.fileDataStart,t.compressedSize,i,s,o,t.uncompressedSize,r)})};gi.prototype.openReadStreamLowLevel=function(t,e,r,n,i,s,o){var a=this,l=t+e,c=a.reader.createReadStream({start:t+r,end:t+n}),u=c;if(i){var d=!1,E=lye.createInflateRaw();c.on("error",function(f){setImmediate(function(){d||E.emit("error",f)})}),c.pipe(E),a.validateEntrySizes?(u=new jd(s),E.on("error",function(f){setImmediate(function(){d||u.emit("error",f)})}),E.pipe(u)):u=E,XC(u,function(){d=!0,E!==u&&E.unpipe(u),c.unpipe(E),c.destroy()})}o(null,u)};gi.prototype.readLocalFileHeader=function(t,e,r){var n=this;r==null&&(r=e,e=null),e==null&&(e={}),n.reader.ref();var i=ls(30);pc(n.reader,i,0,i.length,t.relativeOffsetOfLocalHeader,function(s){try{if(s)return r(s);var o=i.readUInt32LE(0);if(o!==67324752)return r(new Error("invalid local file header signature: 0x"+o.toString(16)));var a=i.readUInt16LE(26),l=i.readUInt16LE(28),c=t.relativeOffsetOfLocalHeader+30+a+l;if(c+t.compressedSize>n.fileSize)return r(new Error("file data overflows file bounds: "+c+" + "+t.compressedSize+" > "+n.fileSize));if(e.minimal)return r(null,{fileDataStart:c});var u=new vX;u.fileDataStart=c,u.versionNeededToExtract=i.readUInt16LE(4),u.generalPurposeBitFlag=i.readUInt16LE(6),u.compressionMethod=i.readUInt16LE(8),u.lastModFileTime=i.readUInt16LE(10),u.lastModFileDate=i.readUInt16LE(12),u.crc32=i.readUInt32LE(14),u.compressedSize=i.readUInt32LE(18),u.uncompressedSize=i.readUInt32LE(22),u.fileNameLength=a,u.extraFieldLength=l,i=ls(a+l),n.reader.ref(),pc(n.reader,i,0,i.length,t.relativeOffsetOfLocalHeader+30,function(d){try{return d?r(d):(u.fileName=i.subarray(0,a),u.extraField=i.subarray(a),r(null,u))}finally{n.reader.unref()}})}finally{n.reader.unref()}})};function Xd(){}Xd.prototype.getLastModDate=function(t){if(t==null&&(t={}),!t.forceDosFormat)for(var e=0;e<this.extraFields.length;e++){var r=this.extraFields[e];if(r.id===21589){var n=r.data;if(n.length<5)continue;var i=n[0],s=1;if(!(i&s))continue;var o=n.readInt32LE(1);return new Date(o*1e3)}else if(r.id===10)for(var n=r.data,a=4;a<n.length+4;){var l=n.readUInt16LE(a);a+=2;var c=n.readUInt16LE(a);if(a+=2,l!==1){a+=c;continue}if(c<8||a+c>n.length)break;var u=4294967296*n.readInt32LE(a+4)+n.readUInt32LE(a),d=u/1e4-116444736e5;return new Date(d)}}return UX(this.lastModFileDate,this.lastModFileTime,t.timezone)};Xd.prototype.isEncrypted=function(){return(this.generalPurposeBitFlag&1)!==0};Xd.prototype.isCompressed=function(){return this.compressionMethod===8};function vX(){}function UX(t,e,r){var n=t&31,i=(t>>5&15)-1,s=(t>>9&127)+1980,o=0,a=(e&31)*2,l=e>>5&63,c=e>>11&31;if(r==null||r==="local")return new Date(s,i,n,c,l,a,o);if(r==="UTC")return new Date(Date.UTC(s,i,n,c,l,a,o));throw new Error("unrecognized options.timezone: "+options.timezone)}function BX(t,e,r,n){for(var i=null,s=0;s<r.length;s++){var o=r[s];if(o.id===28789){if(o.data.length<6||o.data.readUInt8(0)!==1)continue;var a=o.data.readUInt32LE(1);if(cye.unsigned(e)!==a)continue;i=uS(o.data.subarray(5),!0);break}}if(i==null){var l=(t&2048)!==0;i=uS(e,l)}return n||(i=i.replace(/\\/g,"/")),i}function FX(t){return t.indexOf("\\")!==-1?"invalid characters in fileName: "+t:/^[a-zA-Z]:/.test(t)||/^\//.test(t)?"absolute path: "+t:t.split("/").indexOf("..")!==-1?"invalid relative path: "+t:null}function GX(t){for(var e=[],r=0;r<t.length-3;){var n=t.readUInt16LE(r+0),i=t.readUInt16LE(r+2),s=r+4,o=s+i;if(o>t.length)throw new Error("extra field length exceeds extra field buffer size");var a=t.subarray(s,o);e.push({id:n,data:a}),r=o}return e}function pc(t,e,r,n,i,s){if(n===0)return setImmediate(function(){s(null,ls(0))});t.read(e,r,n,i,function(o,a){if(o)return s(o);if(a<n)return s(new Error("unexpected EOF"));s()})}fS.inherits(jd,PX);function jd(t){PX.call(this),this.actualByteCount=0,this.expectedByteCount=t}jd.prototype._transform=function(t,e,r){if(this.actualByteCount+=t.length,this.actualByteCount>this.expectedByteCount){var n="too many bytes in the stream. expected "+this.expectedByteCount+". got at least "+this.actualByteCount;return r(new Error(n))}r(null,t)};jd.prototype._flush=function(t){if(this.actualByteCount<this.expectedByteCount){var e="not enough bytes in the stream. expected "+this.expectedByteCount+". got only "+this.actualByteCount;return t(new Error(e))}t()};fS.inherits(Qs,ES);function Qs(){ES.call(this),this.refCount=0}Qs.prototype.ref=function(){this.refCount+=1};Qs.prototype.unref=function(){var t=this;if(t.refCount-=1,t.refCount>0)return;if(t.refCount<0)throw new Error("invalid unref");t.close(e);function e(r){if(r)return t.emit("error",r);t.emit("close")}};Qs.prototype.createReadStream=function(t){t==null&&(t={});var e=t.start,r=t.end;if(e===r){var n=new jC;return setImmediate(function(){n.end()}),n}var i=this._readStreamForRange(e,r),s=!1,o=new hS(this);i.on("error",function(l){setImmediate(function(){s||o.emit("error",l)})}),XC(o,function(){i.unpipe(o),o.unref(),i.destroy()});var a=new jd(r-e);return o.on("error",function(l){setImmediate(function(){s||a.emit("error",l)})}),XC(a,function(){s=!0,o.unpipe(a),o.destroy()}),i.pipe(o).pipe(a)};Qs.prototype._readStreamForRange=function(t,e){throw new Error("not implemented")};Qs.prototype.read=function(t,e,r,n,i){var s=this.createReadStream({start:n,end:n+r}),o=new uye,a=0;o._write=function(l,c,u){l.copy(t,e+a,0,l.length),a+=l.length,u()},o.on("finish",i),s.on("error",function(l){i(l)}),s.pipe(o)};Qs.prototype.close=function(t){setImmediate(t)};fS.inherits(hS,jC);function hS(t){jC.call(this),this.context=t,this.context.ref(),this.unreffedYet=!1}hS.prototype._flush=function(t){this.unref(),t()};hS.prototype.unref=function(t){this.unreffedYet||(this.unreffedYet=!0,this.context.unref())};var Eye="\0\u263A\u263B\u2665\u2666\u2663\u2660\u2022\u25D8\u25CB\u25D9\u2642\u2640\u266A\u266B\u263C\u25BA\u25C4\u2195\u203C\xB6\xA7\u25AC\u21A8\u2191\u2193\u2192\u2190\u221F\u2194\u25B2\u25BC !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\u2302\xC7\xFC\xE9\xE2\xE4\xE0\xE5\xE7\xEA\xEB\xE8\xEF\xEE\xEC\xC4\xC5\xC9\xE6\xC6\xF4\xF6\xF2\xFB\xF9\xFF\xD6\xDC\xA2\xA3\xA5\u20A7\u0192\xE1\xED\xF3\xFA\xF1\xD1\xAA\xBA\xBF\u2310\xAC\xBD\xBC\xA1\xAB\xBB\u2591\u2592\u2593\u2502\u2524\u2561\u2562\u2556\u2555\u2563\u2551\u2557\u255D\u255C\u255B\u2510\u2514\u2534\u252C\u251C\u2500\u253C\u255E\u255F\u255A\u2554\u2569\u2566\u2560\u2550\u256C\u2567\u2568\u2564\u2565\u2559\u2558\u2552\u2553\u256B\u256A\u2518\u250C\u2588\u2584\u258C\u2590\u2580\u03B1\xDF\u0393\u03C0\u03A3\u03C3\xB5\u03C4\u03A6\u0398\u03A9\u03B4\u221E\u03C6\u03B5\u2229\u2261\xB1\u2265\u2264\u2320\u2321\xF7\u2248\xB0\u2219\xB7\u221A\u207F\xB2\u25A0\xA0";function uS(t,e){if(e)return t.toString("utf8");for(var r="",n=0;n<t.length;n++)r+=Eye[t[n]];return r}function Tc(t,e){var r=t.readUInt32LE(e),n=t.readUInt32LE(e+4);return n*4294967296+r}var ls;typeof Buffer.allocUnsafe=="function"?ls=function(t){return Buffer.allocUnsafe(t)}:ls=function(t){return new Buffer(t)};function XC(t,e){typeof t.destroy=="function"?t._destroy=function(r,n){e(),n?.(r)}:t.destroy=e}function dS(t){if(t)throw t}});var Sc,KC=H(()=>{"use strict";Sc=class{constructor(){this.fieldCount=0;this.rowCount=0;this.actualSheetName="";this.resultsCount=0;this._oaEpoch=Date.UTC(1899,11,30)}async close(){}dispose(){}getDateTimeFromOaDate(e){let r=e*864e5+this._oaEpoch;return new Date(r)}}});var WX,TS,kX=H(()=>{"use strict";WX=q(HX());KC();TS=class extends Sc{constructor(){super();this.zipfile=null;this.sharedStrings=[];this.styles=[];this.sheetNames=[];this.sheets=[];this.entries=new Map;this._currentSheetIndex=-1;this._sheetXml=null;this._xmlPos=0;this._currentRow=[];this.xfIdToNumFmtId=[];this.customDateFormats=new Set}async open(r,n=!0){return new Promise((i,s)=>{WX.default.open(r,{lazyEntries:!0,autoClose:!1},async(o,a)=>{if(o)return s(o);this.zipfile=a,this.entries=new Map,a.on("entry",l=>{this.entries.set(l.fileName,l),a.readEntry()}),a.on("end",async()=>{try{let l=await this._readZipEntryContent("xl/_rels/workbook.xml.rels"),c={};if(l){let E=/<Relationship[^>]*Id="([^"]*)"[^>]*Target="([^"]*)"/g,f;for(;(f=E.exec(l))!==null;)c[f[1]]=f[2]}let u=await this._readZipEntryContent("xl/workbook.xml");if(u){let E=/<sheet[^>]*name="([^"]*)"[^>]*sheetId="([^"]*)"[^>]*r:id="([^"]*)"/g,f;for(;(f=E.exec(u))!==null;){let T=this._unescapeXml(f[1]),h=f[2],p=f[3],m=c[p];m.startsWith("xl/")||(m="xl/"+m),this.sheetNames.push(T),this.sheets.push({name:T,sheetId:h,rId:p,path:m})}}if(n){let E=await this._readZipEntryContent("xl/sharedStrings.xml");E&&this._parseSharedStrings(E)}let d=await this._readZipEntryContent("xl/styles.xml");d&&this._parseStyles(d),this.resultsCount=this.sheets.length,this._currentSheetIndex=-1,i()}catch(l){s(l)}}),a.readEntry()})})}async close(){this.zipfile&&this.zipfile.close()}async _readZipEntryContent(r){let n=this.entries.get(r);return n?new Promise((i,s)=>{this.zipfile.openReadStream(n,(o,a)=>{if(o)return s(o);let l=[];a.on("data",c=>l.push(c)),a.on("end",()=>{i(Buffer.concat(l).toString("utf8"))}),a.on("error",s)})}):null}_unescapeXml(r){return r?r.indexOf("&")===-1?r:r.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&apos;/g,"'"):""}_parseSharedStrings(r){let n=0;for(;;){let i=r.indexOf("<si>",n);if(i===-1)break;let s=r.indexOf("</si>",i);if(s===-1)break;let o=r.substring(i,s),a="",l=0;for(;;){let c=o.indexOf("<t",l);if(c===-1)break;let u=o.indexOf(">",c),d=o.indexOf("</t>",u);if(d===-1)break;a+=o.substring(u+1,d),l=d+4}this.sharedStrings.push(this._unescapeXml(a)),n=s+5}}_parseStyles(r){let n=/<numFmt\s+[^>]*numFmtId="(\d+)"[^>]*formatCode="([^"]*)"/g,i;for(this.customDateFormats=new Set;(i=n.exec(r))!==null;){let o=parseInt(i[1]),a=i[2];(a.toLowerCase().includes("yy")||a.toLowerCase().includes("mm")||a.toLowerCase().includes("dd")||a.toLowerCase().includes("h:mm"))&&this.customDateFormats.add(o)}this.xfIdToNumFmtId=[];let s=r.indexOf("<cellXfs");if(s!==-1){let o=r.indexOf("</cellXfs>",s);if(o!==-1){let a=r.substring(s,o),l=/<xf\s+[^>]*numFmtId="(\d+)"/g;for(;(i=l.exec(a))!==null;){let c=parseInt(i[1]);this.xfIdToNumFmtId.push(c)}}}}getSheetNames(){return this.sheetNames}async read(){return this._currentSheetIndex===-1&&(this._currentSheetIndex=0,await this._initSheet(this._currentSheetIndex)),!!this._readNextRow()}async _initSheet(r){if(r>=this.sheets.length)return;let n=this.sheets[r];this.actualSheetName=n.name,this._sheetXml=await this._readZipEntryContent(n.path),this._sheetXml||(this._sheetXml=""),this._xmlPos=0;let i=this._sheetXml.indexOf("<sheetData>");i!==-1&&(this._xmlPos=i+11)}_readNextRow(){if(!this._sheetXml)return!1;let r=this._sheetXml.indexOf("<row",this._xmlPos);if(r===-1)return!1;let n=this._sheetXml.indexOf("</row>",r);return n===-1?!1:(this._xmlPos=n+6,this._parseRowByIndex(r,n),!0)}_parseRowByIndex(r,n){this._currentRow=[];let i=this._sheetXml,s=i.indexOf(">",r)+1;for(;s<n;){let o=i.indexOf("<c",s);if(o===-1||o>=n)break;let a=i.indexOf(">",o),l=-1,c="n",u=0,d=o+2;for(;d<a;){for(;i.charCodeAt(d)<=32&&d<a;)d++;if(d>=a)break;let T=d;for(;i.charCodeAt(d)!==61&&d<a;)d++;let h=i.substring(T,d);if(d++,i.charCodeAt(d)===34){d++;let p=d;for(;i.charCodeAt(d)!==34&&d<a;)d++;let S=i.substring(p,d);if(d++,h==="r"){let m=0;for(;m<S.length&&S.charCodeAt(m)>=65;)m++;l=this._columnLetterToIndex(S.substring(0,m))}else h==="t"?c=S:h==="s"&&(u=parseInt(S,10))}}let E=null;if(i.charCodeAt(a-1)===47)s=a+1;else{let T=i.indexOf("</c>",a),h=T!==-1&&T<n?T:n,p=i.indexOf("<v>",a);if(p!==-1&&p<h){let S=p+3,m=i.indexOf("</v>",S);m!==-1&&m<h&&(E=i.substring(S,m))}else if(c==="inlineStr"){let S=i.indexOf("<t",a);if(S!==-1&&S<h){let m=i.indexOf(">",S)+1,R=i.indexOf("</t>",m);R!==-1&&R<h&&(E=i.substring(m,R))}}s=h+4}let f=null;if(E!==null){if(c==="s"){let T=parseInt(E,10);f=this.sharedStrings[T]}else if(c==="b")f=E==="1"||E==="true";else if(c==="inlineStr")f=this._unescapeXml(E);else if((c==="n"||c==="")&&(f=parseFloat(E),u>0&&this.xfIdToNumFmtId)){let T=0;if(u<this.xfIdToNumFmtId.length&&(T=this.xfIdToNumFmtId[u]),T>=14&&T<=22||T>=45&&T<=47||this.customDateFormats&&this.customDateFormats.has(T))try{f=this.getDateTimeFromOaDate(f)}catch{}}}l!==-1&&(this._currentRow[l]=f,l>=this.fieldCount&&(this.fieldCount=l+1))}}_columnLetterToIndex(r){let n=0,i=r.length;for(let s=0;s<i;s++)n+=(r.charCodeAt(s)-64)*Math.pow(26,i-s-1);return n-1}getValue(r){return r<0||r>=this._currentRow.length?null:this._currentRow[r]}}});var JC=O((PBe,$X)=>{$X.exports={LOCHDR:30,LOCSIG:67324752,LOCVER:4,LOCFLG:6,LOCHOW:8,LOCTIM:10,LOCCRC:14,LOCSIZ:18,LOCLEN:22,LOCNAM:26,LOCEXT:28,EXTSIG:134695760,EXTHDR:16,EXTCRC:4,EXTSIZ:8,EXTLEN:12,CENHDR:46,CENSIG:33639248,CENVEM:4,CENVER:6,CENFLG:8,CENHOW:10,CENTIM:12,CENCRC:16,CENSIZ:20,CENLEN:24,CENNAM:28,CENEXT:30,CENCOM:32,CENDSK:34,CENATT:36,CENATX:38,CENOFF:42,ENDHDR:22,ENDSIG:101010256,ENDSUB:8,ENDTOT:10,ENDSIZ:12,ENDOFF:16,ENDCOM:20,END64HDR:20,END64SIG:117853008,END64START:4,END64OFF:8,END64NUMDISKS:16,ZIP64SIG:101075792,ZIP64HDR:56,ZIP64LEAD:12,ZIP64SIZE:4,ZIP64VEM:12,ZIP64VER:14,ZIP64DSK:16,ZIP64DSKDIR:20,ZIP64SUB:24,ZIP64TOT:32,ZIP64SIZB:40,ZIP64OFF:48,ZIP64EXTRA:56,STORED:0,SHRUNK:1,REDUCED1:2,REDUCED2:3,REDUCED3:4,REDUCED4:5,IMPLODED:6,DEFLATED:8,ENHANCED_DEFLATED:9,PKWARE:10,BZIP2:12,LZMA:14,IBM_TERSE:18,IBM_LZ77:19,AES_ENCRYPT:99,FLG_ENC:1,FLG_COMP1:2,FLG_COMP2:4,FLG_DESC:8,FLG_ENH:16,FLG_PATCH:32,FLG_STR:64,FLG_EFS:2048,FLG_MSK:4096,FILE:2,BUFFER:1,NONE:0,EF_ID:0,EF_SIZE:2,ID_ZIP64:1,ID_AVINFO:7,ID_PFS:8,ID_OS2:9,ID_NTFS:10,ID_OPENVMS:12,ID_UNIX:13,ID_FORK:14,ID_PATCH:15,ID_X509_PKCS7:20,ID_X509_CERTID_F:21,ID_X509_CERTID_C:22,ID_STRONGENC:23,ID_RECORD_MGT:24,ID_X509_PKCS7_RL:25,ID_IBM1:101,ID_IBM2:102,ID_POSZIP:18064,EF_ZIP64_OR_32:4294967295,EF_ZIP64_OR_16:65535,EF_ZIP64_SUNCOMP:0,EF_ZIP64_SCOMP:8,EF_ZIP64_RHO:16,EF_ZIP64_DSN:24}});var pS=O(VX=>{var YX={INVALID_LOC:"Invalid LOC header (bad signature)",INVALID_CEN:"Invalid CEN header (bad signature)",INVALID_END:"Invalid END header (bad signature)",DESCRIPTOR_NOT_EXIST:"No descriptor present",DESCRIPTOR_UNKNOWN:"Unknown descriptor format",DESCRIPTOR_FAULTY:"Descriptor data is malformed",NO_DATA:"Nothing to decompress",BAD_CRC:"CRC32 checksum failed {0}",FILE_IN_THE_WAY:"There is a file in the way: {0}",UNKNOWN_METHOD:"Invalid/unsupported compression method",AVAIL_DATA:"inflate::Available inflate data did not terminate",INVALID_DISTANCE:"inflate::Invalid literal/length or distance code in fixed or dynamic block",TO_MANY_CODES:"inflate::Dynamic block code description: too many length or distance codes",INVALID_REPEAT_LEN:"inflate::Dynamic block code description: repeat more than specified lengths",INVALID_REPEAT_FIRST:"inflate::Dynamic block code description: repeat lengths with no first length",INCOMPLETE_CODES:"inflate::Dynamic block code description: code lengths codes incomplete",INVALID_DYN_DISTANCE:"inflate::Dynamic block code description: invalid distance code lengths",INVALID_CODES_LEN:"inflate::Dynamic block code description: invalid literal/length code lengths",INVALID_STORE_BLOCK:"inflate::Stored block length did not match one's complement",INVALID_BLOCK_TYPE:"inflate::Invalid block type (type == 3)",CANT_EXTRACT_FILE:"Could not extract the file",CANT_OVERRIDE:"Target file already exists",DISK_ENTRY_TOO_LARGE:"Number of disk entries is too large",NO_ZIP:"No zip file was loaded",NO_ENTRY:"Entry doesn't exist",DIRECTORY_CONTENT_ERROR:"A directory cannot have content",FILE_NOT_FOUND:'File not found: "{0}"',NOT_IMPLEMENTED:"Not implemented",INVALID_FILENAME:"Invalid filename",INVALID_FORMAT:"Invalid or unsupported zip format. No END header found",INVALID_PASS_PARAM:"Incompatible password parameter",WRONG_PASSWORD:"Wrong Password",COMMENT_TOO_LONG:"Comment is too long",EXTRA_FIELD_PARSE_ERROR:"Extra field parsing error"};function hye(t){return function(...e){return e.length&&(t=t.replace(/\{(\d)\}/g,(r,n)=>e[n]||"")),new Error("ADM-ZIP: "+t)}}for(let t of Object.keys(YX))VX[t]=hye(YX[t])});var KX=O((MBe,zX)=>{var Tye=require("fs"),qt=require("path"),qX=JC(),pye=pS(),Sye=typeof process=="object"&&process.platform==="win32",XX=t=>typeof t=="object"&&t!==null,jX=new Uint32Array(256).map((t,e)=>{for(let r=0;r<8;r++)(e&1)!==0?e=3988292384^e>>>1:e>>>=1;return e>>>0});function Nt(t){this.sep=qt.sep,this.fs=Tye,XX(t)&&XX(t.fs)&&typeof t.fs.statSync=="function"&&(this.fs=t.fs)}zX.exports=Nt;Nt.prototype.makeDir=function(t){let e=this;function r(n){let i=n.split(e.sep)[0];n.split(e.sep).forEach(function(s){if(!(!s||s.substr(-1,1)===":")){i+=e.sep+s;var o;try{o=e.fs.statSync(i)}catch{e.fs.mkdirSync(i)}if(o&&o.isFile())throw pye.FILE_IN_THE_WAY(`"${i}"`)}})}r(t)};Nt.prototype.writeFileTo=function(t,e,r,n){let i=this;if(i.fs.existsSync(t)){if(!r)return!1;var s=i.fs.statSync(t);if(s.isDirectory())return!1}var o=qt.dirname(t);i.fs.existsSync(o)||i.makeDir(o);var a;try{a=i.fs.openSync(t,"w",438)}catch{i.fs.chmodSync(t,438),a=i.fs.openSync(t,"w",438)}if(a)try{i.fs.writeSync(a,e,0,e.length,0)}finally{i.fs.closeSync(a)}return i.fs.chmodSync(t,n||438),!0};Nt.prototype.writeFileToAsync=function(t,e,r,n,i){typeof n=="function"&&(i=n,n=void 0);let s=this;s.fs.exists(t,function(o){if(o&&!r)return i(!1);s.fs.stat(t,function(a,l){if(o&&l.isDirectory())return i(!1);var c=qt.dirname(t);s.fs.exists(c,function(u){u||s.makeDir(c),s.fs.open(t,"w",438,function(d,E){d?s.fs.chmod(t,438,function(){s.fs.open(t,"w",438,function(f,T){s.fs.write(T,e,0,e.length,0,function(){s.fs.close(T,function(){s.fs.chmod(t,n||438,function(){i(!0)})})})})}):E?s.fs.write(E,e,0,e.length,0,function(){s.fs.close(E,function(){s.fs.chmod(t,n||438,function(){i(!0)})})}):s.fs.chmod(t,n||438,function(){i(!0)})})})})})};Nt.prototype.findFiles=function(t){let e=this;function r(n,i,s){typeof i=="boolean"&&(s=i,i=void 0);let o=[];return e.fs.readdirSync(n).forEach(function(a){let l=qt.join(n,a),c=e.fs.statSync(l);(!i||i.test(l))&&o.push(qt.normalize(l)+(c.isDirectory()?e.sep:"")),c.isDirectory()&&s&&(o=o.concat(r(l,i,s)))}),o}return r(t,void 0,!0)};Nt.prototype.findFilesAsync=function(t,e){let r=this,n=[];r.fs.readdir(t,function(i,s){if(i)return e(i);let o=s.length;if(!o)return e(null,n);s.forEach(function(a){a=qt.join(t,a),r.fs.stat(a,function(l,c){if(l)return e(l);c&&(n.push(qt.normalize(a)+(c.isDirectory()?r.sep:"")),c.isDirectory()?r.findFilesAsync(a,function(u,d){if(u)return e(u);n=n.concat(d),--o||e(null,n)}):--o||e(null,n))})})})};Nt.prototype.getAttributes=function(){};Nt.prototype.setAttributes=function(){};Nt.crc32update=function(t,e){return jX[(t^e)&255]^t>>>8};Nt.crc32=function(t){typeof t=="string"&&(t=Buffer.from(t,"utf8"));let e=t.length,r=-1;for(let n=0;n<e;)r=Nt.crc32update(r,t[n++]);return~r>>>0};Nt.methodToString=function(t){switch(t){case qX.STORED:return"STORED ("+t+")";case qX.DEFLATED:return"DEFLATED ("+t+")";default:return"UNSUPPORTED ("+t+")"}};Nt.canonical=function(t){if(!t)return"";let e=qt.posix.normalize("/"+t.split("\\").join("/"));return qt.join(".",e)};Nt.zipnamefix=function(t){if(!t)return"";let e=qt.posix.normalize("/"+t.split("\\").join("/"));return qt.posix.join(".",e)};Nt.findLast=function(t,e){if(!Array.isArray(t))throw new TypeError("arr is not array");let r=t.length>>>0;for(let n=r-1;n>=0;n--)if(e(t[n],n,t))return t[n]};Nt.sanitize=function(t,e){t=qt.resolve(qt.normalize(t));for(var r=e.split("/"),n=0,i=r.length;n<i;n++){var s=qt.normalize(qt.join(t,r.slice(n,i).join(qt.sep)));if(s.indexOf(t)===0)return s}return qt.normalize(qt.join(t,qt.basename(e)))};Nt.toBuffer=function(e,r){return Buffer.isBuffer(e)?e:e instanceof Uint8Array?Buffer.from(e):typeof e=="string"?r(e):Buffer.alloc(0)};Nt.readBigUInt64LE=function(t,e){var r=Buffer.from(t.slice(e,e+8));return r.swap64(),parseInt(`0x${r.toString("hex")}`)};Nt.fromDOS2Date=function(t){return new Date((t>>25&127)+1980,Math.max((t>>21&15)-1,0),Math.max(t>>16&31,1),t>>11&31,t>>5&63,(t&31)<<1)};Nt.fromDate2DOS=function(t){let e=0,r=0;return t.getFullYear()>1979&&(e=(t.getFullYear()-1980&127)<<9|t.getMonth()+1<<5|t.getDate(),r=t.getHours()<<11|t.getMinutes()<<5|t.getSeconds()>>1),e<<16|r};Nt.isWin=Sye;Nt.crcTable=jX});var QX=O((vBe,JX)=>{var Rye=require("path");JX.exports=function(t,{fs:e}){var r=t||"",n=s(),i=null;function s(){return{directory:!1,readonly:!1,hidden:!1,executable:!1,mtime:0,atime:0}}return r&&e.existsSync(r)?(i=e.statSync(r),n.directory=i.isDirectory(),n.mtime=i.mtime,n.atime=i.atime,n.executable=(73&i.mode)!==0,n.readonly=(128&i.mode)===0,n.hidden=Rye.basename(r)[0]==="."):console.warn("Invalid path: "+r),{get directory(){return n.directory},get readOnly(){return n.readonly},get hidden(){return n.hidden},get mtime(){return n.mtime},get atime(){return n.atime},get executable(){return n.executable},decodeAttributes:function(){},encodeAttributes:function(){},toJSON:function(){return{path:r,isDirectory:n.directory,isReadOnly:n.readonly,isHidden:n.hidden,isExecutable:n.executable,mTime:n.mtime,aTime:n.atime}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var e6=O((UBe,ZX)=>{ZX.exports={efs:!0,encode:t=>Buffer.from(t,"utf8"),decode:t=>t.toString("utf8")}});var Ac=O((BBe,Rc)=>{Rc.exports=KX();Rc.exports.Constants=JC();Rc.exports.Errors=pS();Rc.exports.FileAttr=QX();Rc.exports.decoder=e6()});var r6=O((FBe,t6)=>{var Zs=Ac(),X=Zs.Constants;t6.exports=function(){var t=20,e=10,r=0,n=0,i=0,s=0,o=0,a=0,l=0,c=0,u=0,d=0,E=0,f=0,T=0;t|=Zs.isWin?2560:768,r|=X.FLG_EFS;let h={extraLen:0},p=R=>Math.max(0,R)>>>0,S=R=>Math.max(0,R)&65535,m=R=>Math.max(0,R)&255;return i=Zs.fromDate2DOS(new Date),{get made(){return t},set made(R){t=R},get version(){return e},set version(R){e=R},get flags(){return r},set flags(R){r=R},get flags_efs(){return(r&X.FLG_EFS)>0},set flags_efs(R){R?r|=X.FLG_EFS:r&=~X.FLG_EFS},get flags_desc(){return(r&X.FLG_DESC)>0},set flags_desc(R){R?r|=X.FLG_DESC:r&=~X.FLG_DESC},get method(){return n},set method(R){switch(R){case X.STORED:this.version=10;case X.DEFLATED:default:this.version=20}n=R},get time(){return Zs.fromDOS2Date(this.timeval)},set time(R){this.timeval=Zs.fromDate2DOS(R)},get timeval(){return i},set timeval(R){i=p(R)},get timeHighByte(){return m(i>>>8)},get crc(){return s},set crc(R){s=p(R)},get compressedSize(){return o},set compressedSize(R){o=p(R)},get size(){return a},set size(R){a=p(R)},get fileNameLength(){return l},set fileNameLength(R){l=R},get extraLength(){return c},set extraLength(R){c=R},get extraLocalLength(){return h.extraLen},set extraLocalLength(R){h.extraLen=R},get commentLength(){return u},set commentLength(R){u=R},get diskNumStart(){return d},set diskNumStart(R){d=p(R)},get inAttr(){return E},set inAttr(R){E=p(R)},get attr(){return f},set attr(R){f=p(R)},get fileAttr(){return(f||0)>>16&4095},get offset(){return T},set offset(R){T=p(R)},get encrypted(){return(r&X.FLG_ENC)===X.FLG_ENC},get centralHeaderSize(){return X.CENHDR+l+c+u},get realDataOffset(){return T+X.LOCHDR+h.fnameLen+h.extraLen},get localHeader(){return h},loadLocalHeaderFromBinary:function(R){var A=R.slice(T,T+X.LOCHDR);if(A.readUInt32LE(0)!==X.LOCSIG)throw Zs.Errors.INVALID_LOC();h.version=A.readUInt16LE(X.LOCVER),h.flags=A.readUInt16LE(X.LOCFLG),h.method=A.readUInt16LE(X.LOCHOW),h.time=A.readUInt32LE(X.LOCTIM),h.crc=A.readUInt32LE(X.LOCCRC),h.compressedSize=A.readUInt32LE(X.LOCSIZ),h.size=A.readUInt32LE(X.LOCLEN),h.fnameLen=A.readUInt16LE(X.LOCNAM),h.extraLen=A.readUInt16LE(X.LOCEXT);let g=T+X.LOCHDR+h.fnameLen,w=g+h.extraLen;return R.slice(g,w)},loadFromBinary:function(R){if(R.length!==X.CENHDR||R.readUInt32LE(0)!==X.CENSIG)throw Zs.Errors.INVALID_CEN();t=R.readUInt16LE(X.CENVEM),e=R.readUInt16LE(X.CENVER),r=R.readUInt16LE(X.CENFLG),n=R.readUInt16LE(X.CENHOW),i=R.readUInt32LE(X.CENTIM),s=R.readUInt32LE(X.CENCRC),o=R.readUInt32LE(X.CENSIZ),a=R.readUInt32LE(X.CENLEN),l=R.readUInt16LE(X.CENNAM),c=R.readUInt16LE(X.CENEXT),u=R.readUInt16LE(X.CENCOM),d=R.readUInt16LE(X.CENDSK),E=R.readUInt16LE(X.CENATT),f=R.readUInt32LE(X.CENATX),T=R.readUInt32LE(X.CENOFF)},localHeaderToBinary:function(){var R=Buffer.alloc(X.LOCHDR);return R.writeUInt32LE(X.LOCSIG,0),R.writeUInt16LE(e,X.LOCVER),R.writeUInt16LE(r,X.LOCFLG),R.writeUInt16LE(n,X.LOCHOW),R.writeUInt32LE(i,X.LOCTIM),R.writeUInt32LE(s,X.LOCCRC),R.writeUInt32LE(o,X.LOCSIZ),R.writeUInt32LE(a,X.LOCLEN),R.writeUInt16LE(l,X.LOCNAM),R.writeUInt16LE(h.extraLen,X.LOCEXT),R},centralHeaderToBinary:function(){var R=Buffer.alloc(X.CENHDR+l+c+u);return R.writeUInt32LE(X.CENSIG,0),R.writeUInt16LE(t,X.CENVEM),R.writeUInt16LE(e,X.CENVER),R.writeUInt16LE(r,X.CENFLG),R.writeUInt16LE(n,X.CENHOW),R.writeUInt32LE(i,X.CENTIM),R.writeUInt32LE(s,X.CENCRC),R.writeUInt32LE(o,X.CENSIZ),R.writeUInt32LE(a,X.CENLEN),R.writeUInt16LE(l,X.CENNAM),R.writeUInt16LE(c,X.CENEXT),R.writeUInt16LE(u,X.CENCOM),R.writeUInt16LE(d,X.CENDSK),R.writeUInt16LE(E,X.CENATT),R.writeUInt32LE(f,X.CENATX),R.writeUInt32LE(T,X.CENOFF),R},toJSON:function(){let R=function(A){return A+" bytes"};return{made:t,version:e,flags:r,method:Zs.methodToString(n),time:this.time,crc:"0x"+s.toString(16).toUpperCase(),compressedSize:R(o),size:R(a),fileNameLength:R(l),extraLength:R(c),commentLength:R(u),diskNumStart:d,inAttr:E,attr:f,offset:T,centralHeaderSize:R(X.CENHDR+l+c+u)}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var i6=O((GBe,n6)=>{var mc=Ac(),At=mc.Constants;n6.exports=function(){var t=0,e=0,r=0,n=0,i=0;return{get diskEntries(){return t},set diskEntries(s){t=e=s},get totalEntries(){return e},set totalEntries(s){e=t=s},get size(){return r},set size(s){r=s},get offset(){return n},set offset(s){n=s},get commentLength(){return i},set commentLength(s){i=s},get mainHeaderSize(){return At.ENDHDR+i},loadFromBinary:function(s){if((s.length!==At.ENDHDR||s.readUInt32LE(0)!==At.ENDSIG)&&(s.length<At.ZIP64HDR||s.readUInt32LE(0)!==At.ZIP64SIG))throw mc.Errors.INVALID_END();s.readUInt32LE(0)===At.ENDSIG?(t=s.readUInt16LE(At.ENDSUB),e=s.readUInt16LE(At.ENDTOT),r=s.readUInt32LE(At.ENDSIZ),n=s.readUInt32LE(At.ENDOFF),i=s.readUInt16LE(At.ENDCOM)):(t=mc.readBigUInt64LE(s,At.ZIP64SUB),e=mc.readBigUInt64LE(s,At.ZIP64TOT),r=mc.readBigUInt64LE(s,At.ZIP64SIZE),n=mc.readBigUInt64LE(s,At.ZIP64OFF),i=0)},toBinary:function(){var s=Buffer.alloc(At.ENDHDR+i);return s.writeUInt32LE(At.ENDSIG,0),s.writeUInt32LE(0,4),s.writeUInt16LE(t,At.ENDSUB),s.writeUInt16LE(e,At.ENDTOT),s.writeUInt32LE(r,At.ENDSIZ),s.writeUInt32LE(n,At.ENDOFF),s.writeUInt16LE(i,At.ENDCOM),s.fill(" ",At.ENDHDR),s},toJSON:function(){let s=function(o,a){let l=o.toString(16).toUpperCase();for(;l.length<a;)l="0"+l;return"0x"+l};return{diskEntries:t,totalEntries:e,size:r+" bytes",offset:s(n,4),commentLength:i}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var ZC=O(QC=>{QC.EntryHeader=r6();QC.MainHeader=i6()});var o6=O((WBe,s6)=>{s6.exports=function(t){var e=require("zlib"),r={chunkSize:(parseInt(t.length/1024)+1)*1024};return{deflate:function(){return e.deflateRawSync(t,r)},deflateAsync:function(n){var i=e.createDeflateRaw(r),s=[],o=0;i.on("data",function(a){s.push(a),o+=a.length}),i.on("end",function(){var a=Buffer.alloc(o),l=0;a.fill(0);for(var c=0;c<s.length;c++){var u=s[c];u.copy(a,l),l+=u.length}n&&n(a)}),i.end(t)}}}});var l6=O((kBe,a6)=>{var Aye=+(process.versions?process.versions.node:"").split(".")[0]||0;a6.exports=function(t,e){var r=require("zlib");let n=Aye>=15&&e>0?{maxOutputLength:e}:{};return{inflate:function(){return r.inflateRawSync(t,n)},inflateAsync:function(i){var s=r.createInflateRaw(n),o=[],a=0;s.on("data",function(l){o.push(l),a+=l.length}),s.on("end",function(){var l=Buffer.alloc(a),c=0;l.fill(0);for(var u=0;u<o.length;u++){var d=o[u];d.copy(l,c),c+=d.length}i&&i(l)}),s.end(t)}}}});var E6=O(($Be,f6)=>{"use strict";var{randomFillSync:c6}=require("crypto"),mye=pS(),_ye=new Uint32Array(256).map((t,e)=>{for(let r=0;r<8;r++)(e&1)!==0?e=e>>>1^3988292384:e>>>=1;return e>>>0}),d6=(t,e)=>Math.imul(t,e)>>>0,u6=(t,e)=>_ye[(t^e)&255]^t>>>8,zd=()=>typeof c6=="function"?c6(Buffer.alloc(12)):zd.node();zd.node=()=>{let t=Buffer.alloc(12),e=t.length;for(let r=0;r<e;r++)t[r]=Math.random()*256&255;return t};var SS={genSalt:zd};function RS(t){let e=Buffer.isBuffer(t)?t:Buffer.from(t);this.keys=new Uint32Array([305419896,591751049,878082192]);for(let r=0;r<e.length;r++)this.updateKeys(e[r])}RS.prototype.updateKeys=function(t){let e=this.keys;return e[0]=u6(e[0],t),e[1]+=e[0]&255,e[1]=d6(e[1],134775813)+1,e[2]=u6(e[2],e[1]>>>24),t};RS.prototype.next=function(){let t=(this.keys[2]|2)>>>0;return d6(t,t^1)>>8&255};function Iye(t){let e=new RS(t);return function(r){let n=Buffer.alloc(r.length),i=0;for(let s of r)n[i++]=e.updateKeys(s^e.next());return n}}function gye(t){let e=new RS(t);return function(r,n,i=0){n||(n=Buffer.alloc(r.length));for(let s of r){let o=e.next();n[i++]=s^o,e.updateKeys(s)}return n}}function Nye(t,e,r){if(!t||!Buffer.isBuffer(t)||t.length<12)return Buffer.alloc(0);let n=Iye(r),i=n(t.slice(0,12)),s=(e.flags&8)===8?e.timeHighByte:e.crc>>>24;if(i[11]!==s)throw mye.WRONG_PASSWORD();return n(t.slice(12))}function Oye(t){Buffer.isBuffer(t)&&t.length>=12?SS.genSalt=function(){return t.slice(0,12)}:t==="node"?SS.genSalt=zd.node:SS.genSalt=zd}function Cye(t,e,r,n=!1){t==null&&(t=Buffer.alloc(0)),Buffer.isBuffer(t)||(t=Buffer.from(t.toString()));let i=gye(r),s=SS.genSalt();s[11]=e.crc>>>24&255,n&&(s[10]=e.crc>>>16&255);let o=Buffer.alloc(t.length+12);return i(s,o),i(t,o,12)}f6.exports={decrypt:Nye,encrypt:Cye,_salter:Oye}});var h6=O(AS=>{AS.Deflater=o6();AS.Inflater=l6();AS.ZipCrypto=E6()});var ty=O((VBe,T6)=>{var ze=Ac(),yye=ZC(),Ot=ze.Constants,ey=h6();T6.exports=function(t,e){var r=new yye.EntryHeader,n=Buffer.alloc(0),i=Buffer.alloc(0),s=!1,o=null,a=Buffer.alloc(0),l=Buffer.alloc(0),c=!0;let u=t,d=typeof u.decoder=="object"?u.decoder:ze.decoder;c=d.hasOwnProperty("efs")?d.efs:!1;function E(){return!e||!(e instanceof Uint8Array)?Buffer.alloc(0):(l=r.loadLocalHeaderFromBinary(e),e.slice(r.realDataOffset,r.realDataOffset+r.compressedSize))}function f(R){if(r.flags_desc){let A={},g=r.realDataOffset+r.compressedSize;if(e.readUInt32LE(g)==Ot.LOCSIG||e.readUInt32LE(g)==Ot.CENSIG)throw ze.Errors.DESCRIPTOR_NOT_EXIST();if(e.readUInt32LE(g)==Ot.EXTSIG)A.crc=e.readUInt32LE(g+Ot.EXTCRC),A.compressedSize=e.readUInt32LE(g+Ot.EXTSIZ),A.size=e.readUInt32LE(g+Ot.EXTLEN);else if(e.readUInt16LE(g+12)===19280)A.crc=e.readUInt32LE(g+Ot.EXTCRC-4),A.compressedSize=e.readUInt32LE(g+Ot.EXTSIZ-4),A.size=e.readUInt32LE(g+Ot.EXTLEN-4);else throw ze.Errors.DESCRIPTOR_UNKNOWN();if(A.compressedSize!==r.compressedSize||A.size!==r.size||A.crc!==r.crc)throw ze.Errors.DESCRIPTOR_FAULTY();if(ze.crc32(R)!==A.crc)return!1}else if(ze.crc32(R)!==r.localHeader.crc)return!1;return!0}function T(R,A,g){if(typeof A>"u"&&typeof R=="string"&&(g=R,R=void 0),s)return R&&A&&A(Buffer.alloc(0),ze.Errors.DIRECTORY_CONTENT_ERROR()),Buffer.alloc(0);var w=E();if(w.length===0)return R&&A&&A(w),w;if(r.encrypted){if(typeof g!="string"&&!Buffer.isBuffer(g))throw ze.Errors.INVALID_PASS_PARAM();w=ey.ZipCrypto.decrypt(w,r,g)}var I=Buffer.alloc(r.size);switch(r.method){case ze.Constants.STORED:if(w.copy(I),f(I))return R&&A&&A(I),I;throw R&&A&&A(I,ze.Errors.BAD_CRC()),ze.Errors.BAD_CRC();case ze.Constants.DEFLATED:var D=new ey.Inflater(w,r.size);if(R)D.inflateAsync(function(b){b.copy(b,0),A&&(f(b)?A(b):A(b,ze.Errors.BAD_CRC()))});else{if(D.inflate(I).copy(I,0),!f(I))throw ze.Errors.BAD_CRC(`"${d.decode(n)}"`);return I}break;default:throw R&&A&&A(Buffer.alloc(0),ze.Errors.UNKNOWN_METHOD()),ze.Errors.UNKNOWN_METHOD()}}function h(R,A){if((!o||!o.length)&&Buffer.isBuffer(e))return R&&A&&A(E()),E();if(o.length&&!s){var g;switch(r.method){case ze.Constants.STORED:return r.compressedSize=r.size,g=Buffer.alloc(o.length),o.copy(g),R&&A&&A(g),g;default:case ze.Constants.DEFLATED:var w=new ey.Deflater(o);if(R)w.deflateAsync(function(D){g=Buffer.alloc(D.length),r.compressedSize=D.length,D.copy(g),A&&A(g)});else{var I=w.deflate();return r.compressedSize=I.length,I}w=null;break}}else if(R&&A)A(Buffer.alloc(0));else return Buffer.alloc(0)}function p(R,A){return(R.readUInt32LE(A+4)<<4)+R.readUInt32LE(A)}function S(R){try{for(var A=0,g,w,I;A+4<R.length;)g=R.readUInt16LE(A),A+=2,w=R.readUInt16LE(A),A+=2,I=R.slice(A,A+w),A+=w,Ot.ID_ZIP64===g&&m(I)}catch{throw ze.Errors.EXTRA_FIELD_PARSE_ERROR()}}function m(R){var A,g,w,I;R.length>=Ot.EF_ZIP64_SCOMP&&(A=p(R,Ot.EF_ZIP64_SUNCOMP),r.size===Ot.EF_ZIP64_OR_32&&(r.size=A)),R.length>=Ot.EF_ZIP64_RHO&&(g=p(R,Ot.EF_ZIP64_SCOMP),r.compressedSize===Ot.EF_ZIP64_OR_32&&(r.compressedSize=g)),R.length>=Ot.EF_ZIP64_DSN&&(w=p(R,Ot.EF_ZIP64_RHO),r.offset===Ot.EF_ZIP64_OR_32&&(r.offset=w)),R.length>=Ot.EF_ZIP64_DSN+4&&(I=R.readUInt32LE(Ot.EF_ZIP64_DSN),r.diskNumStart===Ot.EF_ZIP64_OR_16&&(r.diskNumStart=I))}return{get entryName(){return d.decode(n)},get rawEntryName(){return n},set entryName(R){n=ze.toBuffer(R,d.encode);var A=n[n.length-1];s=A===47||A===92,r.fileNameLength=n.length},get efs(){return typeof c=="function"?c(this.entryName):c},get extra(){return a},set extra(R){a=R,r.extraLength=R.length,S(R)},get comment(){return d.decode(i)},set comment(R){if(i=ze.toBuffer(R,d.encode),r.commentLength=i.length,i.length>65535)throw ze.Errors.COMMENT_TOO_LONG()},get name(){var R=d.decode(n);return s?R.substr(R.length-1).split("/").pop():R.split("/").pop()},get isDirectory(){return s},getCompressedData:function(){return h(!1,null)},getCompressedDataAsync:function(R){h(!0,R)},setData:function(R){o=ze.toBuffer(R,ze.decoder.encode),!s&&o.length?(r.size=o.length,r.method=ze.Constants.DEFLATED,r.crc=ze.crc32(R),r.changed=!0):r.method=ze.Constants.STORED},getData:function(R){return r.changed?o:T(!1,null,R)},getDataAsync:function(R,A){r.changed?R(o):T(!0,R,A)},set attr(R){r.attr=R},get attr(){return r.attr},set header(R){r.loadFromBinary(R)},get header(){return r},packCentralHeader:function(){r.flags_efs=this.efs,r.extraLength=a.length;var R=r.centralHeaderToBinary(),A=ze.Constants.CENHDR;return n.copy(R,A),A+=n.length,a.copy(R,A),A+=r.extraLength,i.copy(R,A),R},packLocalHeader:function(){let R=0;r.flags_efs=this.efs,r.extraLocalLength=l.length;let A=r.localHeaderToBinary(),g=Buffer.alloc(A.length+n.length+r.extraLocalLength);return A.copy(g,R),R+=A.length,n.copy(g,R),R+=n.length,l.copy(g,R),R+=l.length,g},toJSON:function(){let R=function(A){return"<"+(A&&A.length+" bytes buffer"||"null")+">"};return{entryName:this.entryName,name:this.name,comment:this.comment,isDirectory:this.isDirectory,header:r.toJSON(),compressedData:R(e),data:R(o)}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var R6=O((qBe,S6)=>{var p6=ty(),bye=ZC(),Ar=Ac();S6.exports=function(t,e){var r=[],n={},i=Buffer.alloc(0),s=new bye.MainHeader,o=!1,a=null;let l=new Set,c=e,{noSort:u,decoder:d}=c;t?T(c.readEntries):o=!0;function E(){let p=new Set;for(let S of Object.keys(n)){let m=S.split("/");if(m.pop(),!!m.length)for(let R=0;R<m.length;R++){let A=m.slice(0,R+1).join("/")+"/";p.add(A)}}for(let S of p)if(!(S in n)){let m=new p6(c);m.entryName=S,m.attr=16,m.temporary=!0,r.push(m),n[m.entryName]=m,l.add(m)}}function f(){if(o=!0,n={},s.diskEntries>(t.length-s.offset)/Ar.Constants.CENHDR)throw Ar.Errors.DISK_ENTRY_TOO_LARGE();r=new Array(s.diskEntries);for(var p=s.offset,S=0;S<r.length;S++){var m=p,R=new p6(c,t);R.header=t.slice(m,m+=Ar.Constants.CENHDR),R.entryName=t.slice(m,m+=R.header.fileNameLength),R.header.extraLength&&(R.extra=t.slice(m,m+=R.header.extraLength)),R.header.commentLength&&(R.comment=t.slice(m,m+R.header.commentLength)),p+=R.header.centralHeaderSize,r[S]=R,n[R.entryName]=R}l.clear(),E()}function T(p){var S=t.length-Ar.Constants.ENDHDR,m=Math.max(0,S-65535),R=m,A=t.length,g=-1,w=0;for(typeof c.trailingSpace=="boolean"&&c.trailingSpace&&(m=0),S;S>=R;S--)if(t[S]===80){if(t.readUInt32LE(S)===Ar.Constants.ENDSIG){g=S,w=S,A=S+Ar.Constants.ENDHDR,R=S-Ar.Constants.END64HDR;continue}if(t.readUInt32LE(S)===Ar.Constants.END64SIG){R=m;continue}if(t.readUInt32LE(S)===Ar.Constants.ZIP64SIG){g=S,A=S+Ar.readBigUInt64LE(t,S+Ar.Constants.ZIP64SIZE)+Ar.Constants.ZIP64LEAD;break}}if(g==-1)throw Ar.Errors.INVALID_FORMAT();s.loadFromBinary(t.slice(g,A)),s.commentLength&&(i=t.slice(w+Ar.Constants.ENDHDR)),p&&f()}function h(){r.length>1&&!u&&r.sort((p,S)=>p.entryName.toLowerCase().localeCompare(S.entryName.toLowerCase()))}return{get entries(){return o||f(),r.filter(p=>!l.has(p))},get comment(){return d.decode(i)},set comment(p){i=Ar.toBuffer(p,d.encode),s.commentLength=i.length},getEntryCount:function(){return o?r.length:s.diskEntries},forEach:function(p){this.entries.forEach(p)},getEntry:function(p){return o||f(),n[p]||null},setEntry:function(p){o||f(),r.push(p),n[p.entryName]=p,s.totalEntries=r.length},deleteFile:function(p,S=!0){o||f();let m=n[p];this.getEntryChildren(m,S).map(A=>A.entryName).forEach(this.deleteEntry)},deleteEntry:function(p){o||f();let S=n[p],m=r.indexOf(S);m>=0&&(r.splice(m,1),delete n[p],s.totalEntries=r.length)},getEntryChildren:function(p,S=!0){if(o||f(),typeof p=="object")if(p.isDirectory&&S){let m=[],R=p.entryName;for(let A of r)A.entryName.startsWith(R)&&m.push(A);return m}else return[p];return[]},getChildCount:function(p){if(p&&p.isDirectory){let S=this.getEntryChildren(p);return S.includes(p)?S.length-1:S.length}return 0},compressToBuffer:function(){o||f(),h();let p=[],S=[],m=0,R=0;s.size=0,s.offset=0;let A=0;for(let I of this.entries){let D=I.getCompressedData();I.header.offset=R;let b=I.packLocalHeader(),P=b.length+D.length;R+=P,p.push(b),p.push(D);let M=I.packCentralHeader();S.push(M),s.size+=M.length,m+=P+M.length,A++}m+=s.mainHeaderSize,s.offset=R,s.totalEntries=A,R=0;let g=Buffer.alloc(m);for(let I of p)I.copy(g,R),R+=I.length;for(let I of S)I.copy(g,R),R+=I.length;let w=s.toBinary();return i&&i.copy(w,Ar.Constants.ENDHDR),w.copy(g,R),t=g,o=!1,g},toAsyncBuffer:function(p,S,m,R){try{o||f(),h();let A=[],g=[],w=0,I=0,D=0;s.size=0,s.offset=0;let b=function(P){if(P.length>0){let M=P.shift(),B=M.entryName+M.extra.toString();m&&m(B),M.getCompressedDataAsync(function(G){R&&R(B),M.header.offset=I;let V=M.packLocalHeader(),J=V.length+G.length;I+=J,A.push(V),A.push(G);let re=M.packCentralHeader();g.push(re),s.size+=re.length,w+=J+re.length,D++,b(P)})}else{w+=s.mainHeaderSize,s.offset=I,s.totalEntries=D,I=0;let M=Buffer.alloc(w);A.forEach(function(G){G.copy(M,I),I+=G.length}),g.forEach(function(G){G.copy(M,I),I+=G.length});let B=s.toBinary();i&&i.copy(B,Ar.Constants.ENDHDR),B.copy(M,I),t=M,o=!1,p(M)}};b(Array.from(this.entries))}catch(A){S(A)}}}}});var _6=O((XBe,m6)=>{var mt=Ac(),Ct=require("path"),wye=ty(),Lye=R6(),pa=(...t)=>mt.findLast(t,e=>typeof e=="boolean"),A6=(...t)=>mt.findLast(t,e=>typeof e=="string"),Dye=(...t)=>mt.findLast(t,e=>typeof e=="function"),Pye={noSort:!1,readEntries:!1,method:mt.Constants.NONE,fs:null};m6.exports=function(t,e){let r=null,n=Object.assign(Object.create(null),Pye);t&&typeof t=="object"&&(t instanceof Uint8Array||(Object.assign(n,t),t=n.input?n.input:void 0,n.input&&delete n.input),Buffer.isBuffer(t)&&(r=t,n.method=mt.Constants.BUFFER,t=void 0)),Object.assign(n,e);let i=new mt(n);if((typeof n.decoder!="object"||typeof n.decoder.encode!="function"||typeof n.decoder.decode!="function")&&(n.decoder=mt.decoder),t&&typeof t=="string")if(i.fs.existsSync(t))n.method=mt.Constants.FILE,n.filename=t,r=i.fs.readFileSync(t);else throw mt.Errors.INVALID_FILENAME();let s=new Lye(r,n),{canonical:o,sanitize:a,zipnamefix:l}=mt;function c(f){if(f&&s){var T;if(typeof f=="string"&&(T=s.getEntry(Ct.posix.normalize(f))),typeof f=="object"&&typeof f.entryName<"u"&&typeof f.header<"u"&&(T=s.getEntry(f.entryName)),T)return T}return null}function u(f){let{join:T,normalize:h,sep:p}=Ct.posix;return T(".",h(p+f.split("\\").join(p)+p))}function d(f){return f instanceof RegExp?(function(T){return function(h){return T.test(h)}})(f):typeof f!="function"?()=>!0:f}let E=(f,T)=>{let h=T.slice(-1);return h=h===i.sep?i.sep:"",Ct.relative(f,T)+h};return{readFile:function(f,T){var h=c(f);return h&&h.getData(T)||null},childCount:function(f){let T=c(f);if(T)return s.getChildCount(T)},readFileAsync:function(f,T){var h=c(f);h?h.getDataAsync(T):T(null,"getEntry failed for:"+f)},readAsText:function(f,T){var h=c(f);if(h){var p=h.getData();if(p&&p.length)return p.toString(T||"utf8")}return""},readAsTextAsync:function(f,T,h){var p=c(f);p?p.getDataAsync(function(S,m){if(m){T(S,m);return}S&&S.length?T(S.toString(h||"utf8")):T("")}):T("")},deleteFile:function(f,T=!0){var h=c(f);h&&s.deleteFile(h.entryName,T)},deleteEntry:function(f){var T=c(f);T&&s.deleteEntry(T.entryName)},addZipComment:function(f){s.comment=f},getZipComment:function(){return s.comment||""},addZipEntryComment:function(f,T){var h=c(f);h&&(h.comment=T)},getZipEntryComment:function(f){var T=c(f);return T&&T.comment||""},updateFile:function(f,T){var h=c(f);h&&h.setData(T)},addLocalFile:function(f,T,h,p){if(i.fs.existsSync(f)){T=T?u(T):"";let S=Ct.win32.basename(Ct.win32.normalize(f));T+=h||S;let m=i.fs.statSync(f),R=m.isFile()?i.fs.readFileSync(f):Buffer.alloc(0);m.isDirectory()&&(T+=i.sep),this.addFile(T,R,p,m)}else throw mt.Errors.FILE_NOT_FOUND(f)},addLocalFileAsync:function(f,T){f=typeof f=="object"?f:{localPath:f};let h=Ct.resolve(f.localPath),{comment:p}=f,{zipPath:S,zipName:m}=f,R=this;i.fs.stat(h,function(A,g){if(A)return T(A,!1);S=S?u(S):"";let w=Ct.win32.basename(Ct.win32.normalize(h));if(S+=m||w,g.isFile())i.fs.readFile(h,function(I,D){return I?T(I,!1):(R.addFile(S,D,p,g),setImmediate(T,void 0,!0))});else if(g.isDirectory())return S+=i.sep,R.addFile(S,Buffer.alloc(0),p,g),setImmediate(T,void 0,!0)})},addLocalFolder:function(f,T,h){if(h=d(h),T=T?u(T):"",f=Ct.normalize(f),i.fs.existsSync(f)){let p=i.findFiles(f),S=this;if(p.length)for(let m of p){let R=Ct.join(T,E(f,m));h(R)&&S.addLocalFile(m,Ct.dirname(R))}}else throw mt.Errors.FILE_NOT_FOUND(f)},addLocalFolderAsync:function(f,T,h,p){p=d(p),h=h?u(h):"",f=Ct.normalize(f);var S=this;i.fs.open(f,"r",function(m){if(m&&m.code==="ENOENT")T(void 0,mt.Errors.FILE_NOT_FOUND(f));else if(m)T(void 0,m);else{var R=i.findFiles(f),A=-1,g=function(){if(A+=1,A<R.length){var w=R[A],I=E(f,w).split("\\").join("/");I=I.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\x20-\x7E]/g,""),p(I)?i.fs.stat(w,function(D,b){D&&T(void 0,D),b.isFile()?i.fs.readFile(w,function(P,M){P?T(void 0,P):(S.addFile(h+I,M,"",b),g())}):(S.addFile(h+I+"/",Buffer.alloc(0),"",b),g())}):process.nextTick(()=>{g()})}else T(!0,void 0)};g()}})},addLocalFolderAsync2:function(f,T){let h=this;f=typeof f=="object"?f:{localPath:f},localPath=Ct.resolve(u(f.localPath));let{zipPath:p,filter:S,namefix:m}=f;S instanceof RegExp?S=(function(g){return function(w){return g.test(w)}})(S):typeof S!="function"&&(S=function(){return!0}),p=p?u(p):"",m=="latin1"&&(m=g=>g.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\x20-\x7E]/g,"")),typeof m!="function"&&(m=g=>g);let R=g=>Ct.join(p,m(E(localPath,g))),A=g=>Ct.win32.basename(Ct.win32.normalize(m(g)));i.fs.open(localPath,"r",function(g){g&&g.code==="ENOENT"?T(void 0,mt.Errors.FILE_NOT_FOUND(localPath)):g?T(void 0,g):i.findFilesAsync(localPath,function(w,I){if(w)return T(w);I=I.filter(D=>S(R(D))),I.length||T(void 0,!1),setImmediate(I.reverse().reduce(function(D,b){return function(P,M){if(P||M===!1)return setImmediate(D,P,!1);h.addLocalFileAsync({localPath:b,zipPath:Ct.dirname(R(b)),zipName:A(b)},D)}},T))})})},addLocalFolderPromise:function(f,T){return new Promise((h,p)=>{this.addLocalFolderAsync2(Object.assign({localPath:f},T),(S,m)=>{S&&p(S),m&&h(this)})})},addFile:function(f,T,h,p){f=l(f);let S=c(f),m=S!=null;m||(S=new wye(n),S.entryName=f),S.comment=h||"";let R=typeof p=="object"&&p instanceof i.fs.Stats;R&&(S.header.time=p.mtime);var A=S.isDirectory?16:0;let g=S.isDirectory?16384:32768;return R?g|=4095&p.mode:typeof p=="number"?g|=4095&p:g|=S.isDirectory?493:420,A=(A|g<<16)>>>0,S.attr=A,S.setData(T),m||s.setEntry(S),S},getEntries:function(f){return s.password=f,s?s.entries:[]},getEntry:function(f){return c(f)},getEntryCount:function(){return s.getEntryCount()},forEach:function(f){return s.forEach(f)},extractEntryTo:function(f,T,h,p,S,m){p=pa(!1,p),S=pa(!1,S),h=pa(!0,h),m=A6(S,m);var R=c(f);if(!R)throw mt.Errors.NO_ENTRY();var A=o(R.entryName),g=a(T,m&&!R.isDirectory?m:h?A:Ct.basename(A));if(R.isDirectory){var w=s.getEntryChildren(R);return w.forEach(function(b){if(b.isDirectory)return;var P=b.getData();if(!P)throw mt.Errors.CANT_EXTRACT_FILE();var M=o(b.entryName),B=a(T,h?M:Ct.basename(M));let G=S?b.header.fileAttr:void 0;i.writeFileTo(B,P,p,G)}),!0}var I=R.getData(s.password);if(!I)throw mt.Errors.CANT_EXTRACT_FILE();if(i.fs.existsSync(g)&&!p)throw mt.Errors.CANT_OVERRIDE();let D=S?f.header.fileAttr:void 0;return i.writeFileTo(g,I,p,D),!0},test:function(f){if(!s)return!1;for(var T in s.entries)try{if(T.isDirectory)continue;var h=s.entries[T].getData(f);if(!h)return!1}catch{return!1}return!0},extractAllTo:function(f,T,h,p){if(h=pa(!1,h),p=A6(h,p),T=pa(!1,T),!s)throw mt.Errors.NO_ZIP();s.entries.forEach(function(S){var m=a(f,o(S.entryName));if(S.isDirectory){i.makeDir(m);return}var R=S.getData(p);if(!R)throw mt.Errors.CANT_EXTRACT_FILE();let A=h?S.header.fileAttr:void 0;i.writeFileTo(m,R,T,A);try{i.fs.utimesSync(m,S.header.time,S.header.time)}catch{throw mt.Errors.CANT_EXTRACT_FILE()}})},extractAllToAsync:function(f,T,h,p){if(p=Dye(T,h,p),h=pa(!1,h),T=pa(!1,T),!p)return new Promise((g,w)=>{this.extractAllToAsync(f,T,h,function(I){I?w(I):g(this)})});if(!s){p(mt.Errors.NO_ZIP());return}f=Ct.resolve(f);let S=g=>a(f,Ct.normalize(o(g.entryName))),m=(g,w)=>new Error(g+': "'+w+'"'),R=[],A=[];s.entries.forEach(g=>{g.isDirectory?R.push(g):A.push(g)});for(let g of R){let w=S(g),I=h?g.header.fileAttr:void 0;try{i.makeDir(w),I&&i.fs.chmodSync(w,I),i.fs.utimesSync(w,g.header.time,g.header.time)}catch{p(m("Unable to create folder",w))}}A.reverse().reduce(function(g,w){return function(I){if(I)g(I);else{let D=Ct.normalize(o(w.entryName)),b=a(f,D);w.getDataAsync(function(P,M){if(M)g(M);else if(!P)g(mt.Errors.CANT_EXTRACT_FILE());else{let B=h?w.header.fileAttr:void 0;i.writeFileToAsync(b,P,T,B,function(G){G||g(m("Unable to write file",b)),i.fs.utimes(b,w.header.time,w.header.time,function(V){V?g(m("Unable to set times",b)):g()})})}})}}},p)()},writeZip:function(f,T){if(arguments.length===1&&typeof f=="function"&&(T=f,f=""),!f&&n.filename&&(f=n.filename),!!f){var h=s.compressToBuffer();if(h){var p=i.writeFileTo(f,h,!0);typeof T=="function"&&T(p?null:new Error("failed"),"")}}},writeZipPromise:function(f,T){let{overwrite:h,perm:p}=Object.assign({overwrite:!0},T);return new Promise((S,m)=>{!f&&n.filename&&(f=n.filename),f||m("ADM-ZIP: ZIP File Name Missing"),this.toBufferPromise().then(R=>{let A=g=>g?S(g):m("ADM-ZIP: Wasn't able to write zip file");i.writeFileToAsync(f,R,h,p,A)},m)})},toBufferPromise:function(){return new Promise((f,T)=>{s.toAsyncBuffer(f,T)})},toBuffer:function(f,T,h,p){return typeof f=="function"?(s.toAsyncBuffer(f,T,h,p),null):s.compressToBuffer()}}}});var Sa,I6=H(()=>{"use strict";Sa=class{constructor(e){this._isSheet=!1;this._workbookId=0;this._recId=null;this._workbookName=null;this._inCellXf=!1;this._inCellStyleXf=!1;this._inNumberFormat=!1;this._parentCellStyleXf=0;this._numberFormatIndex=0;this._format=0;this._formatString=null;this._sharedStringValue=null;this._sharedStringUniqueCount=0;this._cellType=0;this._intValue=0;this._doubleVal=0;this._boolValue=!1;this._stringValue=null;this._columnNum=-1;this._xfIndex=0;this._readCell=!1;this._rowIndex=-1;this._recordStart=0;this._xfIndexToNumFmtId=[];this._customNumFmts=new Set;if(!Buffer.isBuffer(e))throw new Error("BiffReaderWriter expects a Buffer");this.buffer=e,this.pos=0,this.length=e.length}_tryReadVariableValue(){if(this.pos>=this.length)return null;let e=this.buffer[this.pos++],r=(e&127)>>>0;if((e&128)===0)return r;if(this.pos>=this.length)return null;let n=this.buffer[this.pos++];if(r=((n&127)<<7|r)>>>0,(n&128)===0)return r;if(this.pos>=this.length)return null;let i=this.buffer[this.pos++];return r=((i&127)<<14|r)>>>0,(i&128)===0?r:this.pos>=this.length?null:(r=((this.buffer[this.pos++]&127)<<21|r)>>>0,r)}_getDWord(e){return this.buffer.readUInt32LE(this._recordStart+e)}_getInt32(e){return this.buffer.readInt32LE(this._recordStart+e)}_getWord(e){return this.buffer.readUInt16LE(this._recordStart+e)}_getByte(e){return this.buffer[this._recordStart+e]}_getDouble(e){return this.buffer.readDoubleLE(this._recordStart+e)}_getString(e,r){let n=this._recordStart+e,i=n+r*2;return i>this.buffer.length?"":this.buffer.toString("utf16le",n,i)}_getNullableString(e){let r=this._getDWord(e.val);if(e.val+=4,r===4294967295)return null;let n=this._getString(e.val,r);return e.val+=r*2,n}readWorkbook(){let e=this._tryReadVariableValue(),r=this._tryReadVariableValue();if(e===null||r===null)return!1;let n=this.pos;if(n+r>this.length)return!1;if(this._recordStart=n,this.pos+=r,this._isSheet=!1,e===156){this._workbookId=this._getDWord(4);let i={val:8};this._recId=this._getNullableString(i);let s=this._getDWord(i.val);this._workbookName=this._getString(i.val+4,s),this._isSheet=!0}return!0}readSharedStrings(){let e=this._tryReadVariableValue(),r=this._tryReadVariableValue();if(e===null||r===null)return!1;let n=this.pos;if(n+r>this.length)return!1;if(this._recordStart=n,this.pos+=r,this._sharedStringValue=null,e===19){let i=this._getDWord(1);this._sharedStringValue=this._getString(5,i)}else e===159&&(this._sharedStringUniqueCount=this._getDWord(4));return!0}readStyles(){let e=this._tryReadVariableValue(),r=this._tryReadVariableValue();if(e===null||r===null)return!1;let n=this.pos;if(n+r>this.length)return!1;this._recordStart=n,this.pos+=r;let i=617,s=618,o=626,a=627,l=615,c=616,u=47,d=44;switch(e){case i:this._inCellXf=!0;break;case s:this._inCellXf=!1;break;case o:this._inCellStyleXf=!0;break;case a:this._inCellStyleXf=!1;break;case l:this._inNumberFormat=!0;break;case c:this._inNumberFormat=!1;break;case u:this._inCellXf&&(this._parentCellStyleXf=this._getWord(0),this._numberFormatIndex=this._getWord(2),this._xfIndexToNumFmtId.push(this._numberFormatIndex));break;case d:if(this._inNumberFormat){this._format=this._getWord(0);let E=this._getDWord(2);this._formatString=this._getString(6,E);let f=this._formatString.toLowerCase();(f.includes("yy")||f.includes("mm")||f.includes("dd")||f.includes("h:mm"))&&this._customNumFmts.add(this._format)}break}return!0}_getRkNumber(e){let r=this._getByte(e),n=0;if((r&2)!==0)n=this._getInt32(e)>>2;else{let s=this._getInt32(e)&4294967292,o=Buffer.allocUnsafe(8);o.writeInt32LE(0,0),o.writeInt32LE(s,4),n=o.readDoubleLE(0)}return(r&1)!==0&&(n/=100),n}readWorksheet(){let e=this._tryReadVariableValue(),r=this._tryReadVariableValue();if(e===null||r===null)return!1;let n=this.pos;if(n+r>this.length)return!1;this._recordStart=n,this.pos+=r,this._readCell=!1,this._columnNum=-1;let i=0,s=1,o=2,a=3,l=4,c=5,u=6,d=7,E=8,f=9,T=10,h=11;switch(e){case i:this._rowIndex=this._getInt32(0);break;case s:case a:case h:this._readCell=!0,this._cellType=0;break;case o:this._doubleVal=this._getRkNumber(8),this._readCell=!0,this._cellType=3;break;case l:case T:this._boolValue=this._getByte(8)===1,this._readCell=!0,this._cellType=4;break;case f:case c:this._doubleVal=this._getDouble(8),this._readCell=!0,this._cellType=3;break;case u:case E:{let p=this._getDWord(8);this._stringValue=this._getString(12,p),this._readCell=!0,this._cellType=5;break}case d:this._intValue=this._getDWord(8),this._readCell=!0,this._cellType=2;break}return this._readCell&&(this._columnNum=this._getDWord(0),this._xfIndex=this._getDWord(4)&16777215),!0}}});var g6,mS,N6=H(()=>{"use strict";g6=q(_6());KC();I6();mS=class extends Sc{constructor(){super();this.zip=null;this.sharedStrings=[];this.styles=[];this.sheetNames=[];this.sheets=[];this._currentSheetIndex=-1;this._reader=null;this._currentRow=[];this._pendingRowIndex=-1;this._eof=!1;this.xfIdToNumFmtId=[];this.customDateFormats=null}async open(r,n=!0){this.zip=new g6.default(r);let i=this.zip.getEntry("xl/workbook.bin");if(i){let a=i.getData(),l=new Sa(a);for(;l.readWorkbook();)if(l._isSheet){let c=l._workbookName,u=l._recId;this.sheetNames.push(c),this.sheets.push({name:c,rId:u,path:null})}}let s=this.zip.getEntry("xl/_rels/workbook.bin.rels");if(s){let a=s.getData().toString("utf8"),l=/<Relationship[^>]*Id="([^"]*)"[^>]*Target="([^"]*)"/g,c,u={};for(;(c=l.exec(a))!==null;)u[c[1]]=c[2];for(let d of this.sheets){let E=u[d.rId];E&&(E.startsWith("/")&&(E=E.substring(1)),E.startsWith("xl/")||(E="xl/"+E),d.path=E)}}if(n){let a="xl/sharedStrings.bin";this.zip.getEntry(a)&&this._readSharedStrings(a)}let o="xl/styles.bin";this.zip.getEntry(o)&&this._readStyles(o),this.resultsCount=this.sheets.length,this._currentSheetIndex=-1}_readSharedStrings(r){let n=this.zip.getEntry(r);if(!n)return;let i=new Sa(n.getData());for(;i.readSharedStrings();)i._sharedStringValue!==null&&this.sharedStrings.push(i._sharedStringValue)}_readStyles(r){let n=this.zip.getEntry(r);if(!n)return;let i=new Sa(n.getData());for(;i.readStyles(););this.xfIdToNumFmtId=i._xfIndexToNumFmtId,this.customDateFormats=i._customNumFmts}getSheetNames(){return this.sheetNames}read(){if(this._currentSheetIndex===-1&&(this._currentSheetIndex=0,!this._initSheet(0))||this._eof)return!1;for(this._currentRow=[];;){if(!this._reader.readWorksheet())return this._eof=!0,!0;if(this._reader._rowIndex!==-1&&this._reader._rowIndex!==this._pendingRowIndex)return this._pendingRowIndex=this._reader._rowIndex,!0;if(this._reader._readCell){let n=this._reader._columnNum,i=null;switch(this._reader._cellType){case 2:i=this.sharedStrings[this._reader._intValue];break;case 3:{i=this._reader._doubleVal;let s=this._reader._xfIndex,o=0;if(this.xfIdToNumFmtId&&s<this.xfIdToNumFmtId.length&&(o=this.xfIdToNumFmtId[s]),o>=14&&o<=22||o>=45&&o<=47||this.customDateFormats&&this.customDateFormats.has(o))try{i=this.getDateTimeFromOaDate(i)}catch{}break}case 4:i=this._reader._boolValue;break;case 5:i=this._reader._stringValue;break;default:i=null}this._currentRow[n]=i,n>=this.fieldCount&&(this.fieldCount=n+1)}}}_initSheet(r){if(r>=this.sheets.length)return!1;let n=this.sheets[r],i=this.zip.getEntry(n.path);if(!i)return!1;for(this._reader=new Sa(i.getData()),this._eof=!1,this._pendingRowIndex=-1;this._reader.readWorksheet();)if(this._reader._rowIndex!==-1)return this._pendingRowIndex=this._reader._rowIndex,!0;return this._eof=!0,!1}getValue(r){return r<0||r>=this._currentRow.length?null:this._currentRow[r]}}});var C6={};_t(C6,{ReaderFactory:()=>_S,default:()=>xye});var O6,_S,xye,y6=H(()=>{"use strict";O6=q(require("path"));kX();N6();_S=class{static create(e){let r=O6.extname(e).toLowerCase();if(r===".xlsx")return new TS;if(r===".xlsb")return new mS;throw new Error(`Unsupported extension: ${r}`)}},xye=_S});var L6={};_t(L6,{ColumnTypeChooser:()=>_c,NetezzaDataType:()=>Ni,NetezzaImporter:()=>IS,importDataToNetezza:()=>iy});async function iy(t,e,r,n,i){let s=Date.now(),o=null;try{if(!t||!Hn.existsSync(t))return{success:!1,message:`Source file not found: ${t}`};if(!e)return{success:!1,message:"Target table name is required"};if(!r||!r.host)return{success:!1,message:"Connection details are required"};let l=Hn.statSync(t).size,c=Ra.extname(t).toLowerCase(),u=[".csv",".txt",".xlsx",".xlsb"];if(!u.includes(c))return{success:!1,message:`Unsupported file format: ${c}. Supported: ${u.join(", ")}`};n?.("Starting import process..."),n?.(`  Source file: ${t}`),n?.(`  Target table: ${e}`),n?.(`  File size: ${l.toLocaleString()} bytes`),n?.(`  File format: ${c}`);let d=new IS(t,e);await d.analyzeDataTypes(n),n?.("Preparing in-memory data stream...");let E=await d.createDataStream(n),f=d.getVirtualFileName();n?.(`Registered virtual stream: ${f}`);let T=Ir();T&&T.registerImportStream?T.registerImportStream(f,E):n?.("Warning: NzConnection driver does not support stream registry. Import might fail.");let h=d.generateCreateTableSql();n?.("Generated SQL:"),n?.(h),n?.("Connecting to Netezza...");let p={host:r.host,port:r.port||5480,database:r.database,user:r.user,password:r.password},S=Ir();o=new S(p),await o.connect();try{n?.("Executing CREATE TABLE with EXTERNAL data...");let R=o.createCommand(h);R.commandTimeout=i||3600;let A=d.getRowsCount();o.on("importProgress",g=>{let w=g,I=A>0?Math.round(w.percentComplete/100*A):0;n?.(`Importing: ${w.percentComplete}% complete (${I.toLocaleString()} / ${A.toLocaleString()} rows)`)}),await R.execute(),n?.("Import completed successfully")}finally{await o.close(),T&&T.unregisterImportStream&&T.unregisterImportStream(f)}let m=(Date.now()-s)/1e3;return{success:!0,message:"Import completed successfully",details:{sourceFile:t,targetTable:e,fileSize:l,format:c,rowsProcessed:d.getRowsCount(),rowsInserted:d.getRowsCount(),processingTime:`${m.toFixed(1)}s`,columns:d.getSqlHeaders().length,detectedDelimiter:d.getCsvDelimiter()}}}catch(a){let l=(Date.now()-s)/1e3;return{success:!1,message:`Import failed: ${a instanceof Error?a.message:String(a)}`,details:{processingTime:`${l.toFixed(1)}s`}}}finally{if(o&&o._connected)try{await o.close()}catch{}}}var Hn,Ra,w6,b6,ry,Ni,_c,ny,IS,gS=H(()=>{"use strict";Hn=q(require("fs")),Ra=q(require("path")),w6=require("stream"),b6=()=>new Promise(t=>setTimeout(t,0));try{let t=(y6(),Ma(C6));ry=t.default||t.ReaderFactory||t}catch(t){console.error("libs/ExcelHelpersTs/ReaderFactory module not available",t)}Ni=class{constructor(e,r,n,i){this.dbType=e;this.precision=r;this.scale=n;this.length=i}toString(){return["BIGINT","DATE","DATETIME"].includes(this.dbType)?this.dbType:this.dbType==="NUMERIC"?`${this.dbType}(${this.precision},${this.scale})`:this.dbType==="NVARCHAR"?`${this.dbType}(${this.length})`:`TODO !!! ${this.dbType}`}},_c=class{constructor(e="."){this.decimalDelimInCsv=".";this.firstTime=!0;this.currentType=new Ni("BIGINT"),this.decimalDelimInCsv=e}getType(e){let r=this.currentType.dbType,n=e.length;if(r==="BIGINT"&&/^\d+$/.test(e)&&n<15)return this.firstTime=!1,new Ni("BIGINT");let i=this.decimalDelimInCsv==="."?"\\.":this.decimalDelimInCsv,s=(e.match(new RegExp(`${i}`,"g"))||[]).length;if(["BIGINT","NUMERIC"].includes(r)&&s<=1){let a=e.replace(this.decimalDelimInCsv,"");if(/^\d+$/.test(a)&&n<15&&(!a.startsWith("0")||s>0||a==="0"))return this.firstTime=!1,new Ni("NUMERIC",16,6)}if((r==="DATE"||this.firstTime)&&(e.match(/-/g)||[]).length===2&&n>=8&&n<=10){let a=e.split("-");if(a.length===3&&a.every(l=>/^\d+$/.test(l)))try{let l=new Date(parseInt(a[0]),parseInt(a[1])-1,parseInt(a[2]));if(!isNaN(l.getTime()))return this.firstTime=!1,new Ni("DATE")}catch{}}if((r==="DATETIME"||this.firstTime)&&(e.match(/-/g)||[]).length===2&&n>=12&&n<=20){let a=e.match(/^(\d{4})-(\d{1,2})-(\d{1,2})[\s|T](\d{2}):(\d{2})(:?(\d{2}))?$/);if(a)try{let l=a[7]?parseInt(a[7]):0,c=new Date(parseInt(a[1]),parseInt(a[2])-1,parseInt(a[3]),parseInt(a[4]),parseInt(a[5]),l);if(!isNaN(c.getTime()))return this.firstTime=!1,new Ni("DATETIME")}catch{}}if((r==="DATETIME"||this.firstTime)&&(e.match(/\./g)||[]).length>=2){let a=e.match(/^(\d{1,2})\.(\d{1,2})\.(\d{4})(?:\s+(\d{1,2}):(\d{1,2})(?::(\d{1,2}))?)?$/);if(a)try{let l=parseInt(a[1]),c=parseInt(a[2])-1,u=parseInt(a[3]),d=a[4]?parseInt(a[4]):0,E=a[5]?parseInt(a[5]):0,f=a[6]?parseInt(a[6]):0;if(c>=0&&c<=11&&l>=1&&l<=31){let T=new Date(u,c,l,d,E,f);if(!isNaN(T.getTime())&&T.getFullYear()===u&&T.getMonth()===c&&T.getDate()===l)return this.firstTime=!1,new Ni("DATETIME")}}catch{}}let o=Math.max(n+5,20);return this.currentType.length!==void 0&&o<this.currentType.length&&(o=this.currentType.length),this.firstTime=!1,new Ni("NVARCHAR",void 0,void 0,o)}refreshCurrentType(e){return this.currentType=this.getType(e),this.currentType}},ny=class extends w6.Readable{constructor(r,n,i){super();this.currentIndex=0;this.byteLength=0;this.lastReportedIndex=-1;this.lastReportTime=0;this.lastReportedMessage="";this.importer=r,this.rows=n,this.progressCallback=i,this.currentIndex=0,this.lastReportedIndex=-1,this.lastReportTime=0,this.lastReportedMessage="";try{this.byteLength=n.reduce((s,o)=>{let a=o.reduce((l,c)=>l+(c?c.length:0),0);return s+a+o.length},0)}catch{this.byteLength=1024*1024}}_read(r){try{let n=!0;for(;n&&this.currentIndex<this.rows.length;){let a=this.rows[this.currentIndex].map((l,c)=>this.importer.formatValue(l||"",c)).join(this.importer.getDelimiter())+this.importer.getRecordDelim();n=this.push(Buffer.from(a,"utf8")),this.currentIndex++}let i=this.rows.length;if(this.currentIndex>this.lastReportedIndex){let s=Date.now();if(this.currentIndex>=i||s-this.lastReportTime>=1e3){let c=`Importing: ${Math.floor(this.currentIndex/i*100)}% complete (${this.currentIndex.toLocaleString()} / ${i.toLocaleString()} rows)`,d=(this.currentIndex-(this.lastReportedIndex<0?0:this.lastReportedIndex))/i*100;c!==this.lastReportedMessage&&(this.progressCallback?.(c,d,!1),this.lastReportedIndex=this.currentIndex,this.lastReportTime=s,this.lastReportedMessage=c)}}this.currentIndex>=this.rows.length&&this.push(null)}catch(n){this.emit("error",n)}}},IS=class{constructor(e,r,n){this.delimiter="	";this.delimiterPlain="\\t";this.recordDelim=`
`;this.recordDelimPlain="\\n";this.escapechar="\\";this.csvDelimiter=",";this.excelData=[];this.isExcelFile=!1;this.sqlHeaders=[];this.dataTypes=[];this.rowsCount=0;this.valuesToEscape=[];this.filePath=e,this.targetTable=r,this.logDir=n||Ra.join(Ra.dirname(e),"netezza_logs");let i=Ra.extname(e).toLowerCase();this.isExcelFile=[".xlsx",".xlsb"].includes(i),this.virtualFileName=`virtual_import_${Date.now()}_${Math.floor(Math.random()*1e3)}.txt`,this.valuesToEscape=[this.escapechar,this.recordDelim,"\r",this.delimiter],Hn.existsSync(this.logDir)||Hn.mkdirSync(this.logDir,{recursive:!0})}getDelimiter(){return this.delimiter}getRecordDelim(){return this.recordDelim}detectCsvDelimiter(){let r=Hn.readFileSync(this.filePath,"utf-8").split(`
`)[0]||"";r.startsWith("\uFEFF")&&(r=r.slice(1));let n=[";","	","|",","],i={};for(let o of n)i[o]=(r.match(new RegExp(o==="|"?"\\|":o,"g"))||[]).length;let s=Math.max(...Object.values(i));s>0&&(this.csvDelimiter=Object.keys(i).find(o=>i[o]===s)||",")}cleanColumnName(e){let r=String(e).trim();return r=r.replace(/[^0-9a-zA-Z]+/g,"_").toUpperCase(),(!r||/^\d/.test(r)||r.startsWith("_"))&&(r="COL"+(r.startsWith("_")?"":"_")+r),r}parseCsvLine(e){let r=[],n="",i=!1;for(let s=0;s<e.length;s++){let o=e[s];o==='"'?i&&e[s+1]==='"'?(n+='"',s++):i=!i:o===this.csvDelimiter&&!i?(r.push(n),n=""):n+=o}return r.push(n),r}async readExcelFile(e){if(!ry)throw new Error("ReaderFactory module not available");e?.("Reading Excel file...");let r=ry.create(this.filePath);await r.open(this.filePath);let n=[],i=o=>{if(o==null)return"";if(o instanceof Date){let a=l=>l<10?"0"+l:l;return`${o.getFullYear()}-${a(o.getMonth()+1)}-${a(o.getDate())} ${a(o.getHours())}:${a(o.getMinutes())}:${a(o.getSeconds())}`}return String(o)},s=0;for(;await r.read();){let o=[],a=r._currentRow;if(a&&Array.isArray(a))for(let l=0;l<a.length;l++)o.push(i(a[l]));n.push(o),s++,s%1e4===0&&(e?.(`Processed ${s.toLocaleString()} rows...`,void 0,!1),await b6())}return typeof r.close=="function"&&await r.close(),e?.(`Excel file loaded: ${n.length} rows`),n}async analyzeDataTypes(e){e?.("Analyzing data types...");let r;if(this.isExcelFile)this.excelData=await this.readExcelFile(e),r=this.excelData;else{this.detectCsvDelimiter();let i=Hn.readFileSync(this.filePath,"utf-8");i.startsWith("\uFEFF")&&(i=i.slice(1));let s=i.split(/\r?\n/);r=[];for(let o of s)o.trim()&&r.push(this.parseCsvLine(o))}if(!r||r.length===0)throw new Error("No data found in file");let n=[];this.sqlHeaders=r[0].map(i=>this.cleanColumnName(i||"COLUMN"));for(let i=0;i<r[0].length;i++)n.push(new _c);for(let i=1;i<r.length;i++){let s=r[i];for(let o=0;o<s.length;o++)o<n.length&&s[o]&&s[o].trim()&&n[o].refreshCurrentType(s[o].trim());i%1e4===0&&(e?.(`Analyzed ${i.toLocaleString()} rows...`,void 0,!1),await b6())}return this.rowsCount=r.length-1,e?.(`Analysis complete: ${this.rowsCount.toLocaleString()} rows`),this.dataTypes=n,n}escapeValue(e){let r=String(e).trim();for(let n of this.valuesToEscape)r=r.split(n).join(`${this.escapechar}${n}`);return r}formatValue(e,r){let n=this.escapeValue(e);return r<this.dataTypes.length&&this.dataTypes[r].currentType.dbType==="DATETIME"&&(n=n.replace("T"," ")),n}generateCreateTableSql(){let e=[];for(let n=0;n<this.sqlHeaders.length;n++){let i=this.sqlHeaders[n],s=this.dataTypes[n];e.push(`        ${i} ${s.currentType.toString()}`)}let r=this.logDir.replace(/\\/g,"/");return`CREATE TABLE ${this.targetTable} AS 
(
    SELECT * FROM EXTERNAL '${this.virtualFileName}'
    (
${e.join(`,
`)}
    )
    USING
    (
        REMOTESOURCE 'jdbc'
        DELIMITER '${this.delimiterPlain}'
        RecordDelim '${this.recordDelimPlain}'
        ESCAPECHAR '${this.escapechar}'
        NULLVALUE ''
        ENCODING 'utf-8'
        TIMESTYLE '24HOUR'
        SKIPROWS 0
        MAXERRORS 10
        LOGDIR '${r}'
    )
) DISTRIBUTE ON RANDOM;`}async createDataStream(e){e?.("Preparing data stream...");try{let r;if(this.isExcelFile){if(!this.excelData||this.excelData.length===0)throw new Error("Excel data not loaded. Call analyzeDataTypes first.");r=this.excelData.slice(1)}else{let n=Hn.readFileSync(this.filePath,"utf-8");n.startsWith("\uFEFF")&&(n=n.slice(1));let i=n.split(/\r?\n/);r=[];let s=!0;for(let o of i)if(o.trim()){if(s){s=!1;continue}r.push(this.parseCsvLine(o))}}return this.rowsCount=r.length,new ny(this,r,e)}catch(r){let n=r instanceof Error?r.message:String(r);throw e?.(`Error preparing stream: ${n}`),r}}getVirtualFileName(){return this.virtualFileName}getRowsCount(){return this.rowsCount}getSqlHeaders(){return this.sqlHeaders}getCsvDelimiter(){return this.csvDelimiter}}});var X6=H(()=>{"use strict"});async function ft(t,e){let n=await t.createCommand(e).executeReader(),i=[];for(;await n.read();){let s={};for(let o=0;o<n.fieldCount;o++)s[n.getName(o)]=n.getValue(o);i.push(s)}return i}function de(t){return!t||/^[A-Z_][A-Z0-9_]*$/i.test(t)&&t===t.toUpperCase()?t:`"${t.replace(/"/g,'""')}"`}function j6(t){if(!t)return t;let e=t.trim().toUpperCase();return e==="CHARACTER VARYING"?"CHARACTER VARYING(ANY)":e==="NATIONAL CHARACTER VARYING"?"NATIONAL CHARACTER VARYING(ANY)":e==="NATIONAL CHARACTER"?"NATIONAL CHARACTER(ANY)":e==="CHARACTER"?"CHARACTER(ANY)":t}async function z6(t){let e={host:t.host,port:t.port||5480,database:t.database,user:t.user,password:t.password},r=Ir(),n=new r(e);return await n.connect(),n}var Ci=H(()=>{"use strict"});async function kn(t,e,r,n){let i=`
        SELECT 
            X.OBJID::INT AS OBJID
            , X.ATTNAME
            , X.DESCRIPTION
            , X.FORMAT_TYPE AS FULL_TYPE
            , X.ATTNOTNULL::BOOL AS ATTNOTNULL
            , X.COLDEFAULT
        FROM
            ${e.toUpperCase()}.._V_RELATION_COLUMN X
        INNER JOIN
            ${e.toUpperCase()}.._V_OBJECT_DATA D ON X.OBJID = D.OBJID
        WHERE
            X.TYPE IN ('TABLE','VIEW','EXTERNAL TABLE', 'SEQUENCE','SYSTEM VIEW','SYSTEM TABLE')
            AND X.OBJID NOT IN (4,5)
            AND D.SCHEMA = '${r.toUpperCase()}'
            AND D.OBJNAME = '${n.toUpperCase()}'
        ORDER BY 
            X.OBJID, X.ATTNUM
    `,s=await ft(t,i),o=[];for(let a of s){let l=!1,c=a.ATTNOTNULL;if(typeof c=="boolean")l=c;else if(typeof c=="number")l=c!==0;else if(typeof c=="string"){let u=c.trim().toLowerCase();l=u==="t"||u==="true"||u==="1"||u==="yes"}o.push({name:a.ATTNAME,description:a.DESCRIPTION||null,fullTypeName:a.FULL_TYPE,notNull:l,defaultValue:a.COLDEFAULT||null})}return o}async function cs(t,e,r,n){try{let i=`
            SELECT ATTNAME
            FROM ${e.toUpperCase()}.._V_TABLE_DIST_MAP
            WHERE SCHEMA = '${r.toUpperCase()}'
                AND TABLENAME = '${n.toUpperCase()}'
            ORDER BY DISTSEQNO
        `;return(await ft(t,i)).map(o=>o.ATTNAME)}catch{return[]}}async function us(t,e,r,n){try{let i=`
            SELECT ATTNAME
            FROM ${e.toUpperCase()}.._V_TABLE_ORGANIZE_COLUMN
            WHERE SCHEMA = '${r.toUpperCase()}'
                AND TABLENAME = '${n.toUpperCase()}'
            ORDER BY ORGSEQNO
        `;return(await ft(t,i)).map(o=>o.ATTNAME)}catch{return[]}}async function ds(t,e,r,n){let i=`
        SELECT 
            X.SCHEMA
            , X.RELATION
            , X.CONSTRAINTNAME
            , X.CONTYPE
            , X.ATTNAME
            , X.PKDATABASE
            , X.PKSCHEMA
            , X.PKRELATION
            , X.PKATTNAME
            , X.UPDT_TYPE
            , X.DEL_TYPE
        FROM 
            ${e.toUpperCase()}.._V_RELATION_KEYDATA X
        WHERE 
            X.OBJID NOT IN (4,5)
            AND X.SCHEMA = '${r.toUpperCase()}'
            AND X.RELATION = '${n.toUpperCase()}'
        ORDER BY
            X.SCHEMA, X.RELATION, X.CONSEQ
    `,s=new Map;try{let o=await ft(t,i);for(let a of o){let l=a.CONSTRAINTNAME;if(!s.has(l)){let u={p:"PRIMARY KEY",f:"FOREIGN KEY",u:"UNIQUE"};s.set(l,{type:u[a.CONTYPE]||"UNKNOWN",typeChar:a.CONTYPE,columns:[],pkDatabase:a.PKDATABASE||null,pkSchema:a.PKSCHEMA||null,pkRelation:a.PKRELATION||null,pkColumns:[],updateType:a.UPDT_TYPE||"NO ACTION",deleteType:a.DEL_TYPE||"NO ACTION"})}let c=s.get(l);c.columns.push(a.ATTNAME),a.PKATTNAME&&c.pkColumns.push(a.PKATTNAME)}}catch(o){console.warn("Cannot retrieve keys info:",o)}return s}async function Aa(t,e,r,n){try{let i=`
            SELECT DESCRIPTION
            FROM ${e.toUpperCase()}.._V_OBJECT_DATA
            WHERE SCHEMA = '${r.toUpperCase()}'
                AND OBJNAME = '${n.toUpperCase()}'
                AND OBJTYPE = 'TABLE'
        `,s=await ft(t,i);if(s.length>0&&s[0].DESCRIPTION)return s[0].DESCRIPTION}catch{try{let i=`
                SELECT DESCRIPTION
                FROM ${e.toUpperCase()}.._V_OBJECT_DATA
                WHERE SCHEMA = '${r.toUpperCase()}'
                    AND OBJNAME = '${n.toUpperCase()}'
            `,s=await ft(t,i);if(s.length>0&&s[0].DESCRIPTION)return s[0].DESCRIPTION}catch{}}return null}async function Jd(t,e,r,n){try{let i=`
            SELECT OWNER
            FROM ${e.toUpperCase()}.._V_TABLE
            WHERE SCHEMA = '${r.toUpperCase()}'
                AND TABLENAME = '${n.toUpperCase()}'
        `,s=await ft(t,i);if(s.length>0&&s[0].OWNER)return s[0].OWNER}catch{}return null}var wS=H(()=>{"use strict";Ci()});async function Qd(t,e,r,n){let i=await kn(t,e,r,n);if(i.length===0)throw new Error(`Table ${e}.${r}.${n} not found or has no columns`);let s=await cs(t,e,r,n),o=await us(t,e,r,n),a=await ds(t,e,r,n),l=await Aa(t,e,r,n);return Ic(e,r,n,i,s,o,a,l)}function Ic(t,e,r,n,i,s,o,a){if(n.length===0)return`-- Table ${t}.${e}.${r} has no columns or was not found`;let l=de(t),c=de(e),u=de(r),d=[];d.push(`CREATE TABLE ${l}.${c}.${u}`),d.push("(");let E=[];for(let f of n){let h=`    ${de(f.name)} ${f.fullTypeName}`;f.notNull&&(h+=" NOT NULL"),f.defaultValue!==null&&(h+=` DEFAULT ${f.defaultValue}`),E.push(h)}if(d.push(E.join(`,
`)),i.length>0){let f=i.map(T=>de(T));d.push(`)
DISTRIBUTE ON (${f.join(", ")})`)}else d.push(`)
DISTRIBUTE ON RANDOM`);if(s.length>0){let f=s.map(T=>de(T));d.push(`ORGANIZE ON (${f.join(", ")})`)}d.push(";"),d.push("");for(let[f,T]of o){let h=de(f),p=T.columns.map(S=>de(S));if(T.typeChar==="f"){let S=T.pkColumns.filter(m=>m).map(m=>de(m));S.length>0&&d.push(`ALTER TABLE ${l}.${c}.${u} ADD CONSTRAINT ${h} ${T.type} (${p.join(", ")}) REFERENCES ${T.pkDatabase}.${T.pkSchema}.${T.pkRelation} (${S.join(", ")}) ON DELETE ${T.deleteType} ON UPDATE ${T.updateType};`)}else(T.typeChar==="p"||T.typeChar==="u")&&d.push(`ALTER TABLE ${l}.${c}.${u} ADD CONSTRAINT ${h} ${T.type} (${p.join(", ")});`)}if(a){let f=a.replace(/'/g,"''");d.push(""),d.push(`COMMENT ON TABLE ${l}.${c}.${u} IS '${f}';`)}for(let f of n)if(f.description){let T=de(f.name),h=f.description.replace(/'/g,"''");d.push(`COMMENT ON COLUMN ${l}.${c}.${u}.${T} IS '${h}';`)}return d.join(`
`)}var LS=H(()=>{"use strict";Ci();wS()});async function ma(t,e,r,n){let i=`
        SELECT 
            SCHEMA,
            VIEWNAME,
            DEFINITION,
            OBJID::INT
        FROM ${e.toUpperCase()}.._V_VIEW
        WHERE DATABASE = '${e.toUpperCase()}'
            AND SCHEMA = '${r.toUpperCase()}'
            AND VIEWNAME = '${n.toUpperCase()}'
    `,o=await ft(t,i);if(o.length===0)throw new Error(`View ${e}.${r}.${n} not found`);let a=o[0],l=de(e),c=de(r),u=de(n),d=[];return d.push(`CREATE OR REPLACE VIEW ${l}.${c}.${u} AS`),d.push(a.DEFINITION||""),d.join(`
`)}var DS=H(()=>{"use strict";Ci()});async function _a(t,e,r,n){let i=`
        SELECT 
            SCHEMA,
            PROCEDURESOURCE,
            OBJID::INT,
            RETURNS,
            EXECUTEDASOWNER,
            DESCRIPTION,
            PROCEDURESIGNATURE,
            PROCEDURE,
            ARGUMENTS,
            NULL AS LANGUAGE
        FROM ${e.toUpperCase()}.._V_PROCEDURE
        WHERE DATABASE = '${e.toUpperCase()}'
            AND SCHEMA = '${r.toUpperCase()}'
            AND PROCEDURESIGNATURE = '${n.toUpperCase()}'
        ORDER BY 1, 2, 3
    `,o=await ft(t,i);if(o.length===0)throw new Error(`Procedure ${e}.${r}.${n} not found`);let a=o[0],l={schema:a.SCHEMA,procedureSource:a.PROCEDURESOURCE,objId:a.OBJID,returns:j6(a.RETURNS),executeAsOwner:!!a.EXECUTEDASOWNER,description:a.DESCRIPTION||null,procedureSignature:a.PROCEDURESIGNATURE,procedureName:a.PROCEDURE,arguments:a.ARGUMENTS||null},c=de(e),u=de(r),d=de(l.procedureName),E=[],f=`CREATE OR REPLACE PROCEDURE ${c}.${u}.${d}`;if(l.arguments){let T=l.arguments.trim();T.startsWith("(")&&T.endsWith(")")?f+=T:f+=`(${T})`}else f+="()";if(E.push(f),E.push(`RETURNS ${l.returns}`),l.executeAsOwner?E.push("EXECUTE AS OWNER"):E.push("EXECUTE AS CALLER"),E.push("LANGUAGE NZPLSQL AS"),E.push("BEGIN_PROC"),E.push(l.procedureSource),E.push("END_PROC;"),l.description){let T=l.description.replace(/'/g,"''");E.push(`COMMENT ON PROCEDURE ${d} IS '${T}';`)}return E.join(`
`)}var PS=H(()=>{"use strict";Ci()});async function Ia(t,e,r,n){let i=`
        SELECT 
            E1.SCHEMA,
            E1.TABLENAME,
            E2.EXTOBJNAME,
            E2.OBJID::INT,
            E1.DELIM,
            E1.ENCODING,
            E1.TIMESTYLE,
            E1.REMOTESOURCE,
            E1.SKIPROWS,
            E1.MAXERRORS,
            E1.ESCAPE,
            E1.LOGDIR,
            E1.DECIMALDELIM,
            E1.QUOTEDVALUE,
            E1.NULLVALUE,
            E1.CRINSTRING,
            E1.TRUNCSTRING,
            E1.CTRLCHARS,
            E1.IGNOREZERO,
            E1.TIMEEXTRAZEROS,
            E1.Y2BASE,
            E1.FILLRECORD,
            E1.COMPRESS,
            E1.INCLUDEHEADER,
            E1.LFINSTRING,
            E1.DATESTYLE,
            E1.DATEDELIM,
            E1.TIMEDELIM,
            E1.BOOLSTYLE,
            E1.FORMAT,
            E1.SOCKETBUFSIZE,
            E1.RECORDDELIM,
            E1.MAXROWS,
            E1.REQUIREQUOTES,
            E1.RECORDLENGTH,
            E1.DATETIMEDELIM,
            E1.REJECTFILE
        FROM 
            ${e.toUpperCase()}.._V_EXTERNAL E1
            JOIN ${e.toUpperCase()}.._V_EXTOBJECT E2 ON E1.DATABASE = E2.DATABASE
                AND E1.SCHEMA = E2.SCHEMA
                AND E1.TABLENAME = E2.TABLENAME
        WHERE 
            E1.DATABASE = '${e.toUpperCase()}'
            AND E1.SCHEMA = '${r.toUpperCase()}'
            AND E1.TABLENAME = '${n.toUpperCase()}'
    `,s=await ft(t,i);if(s.length===0)throw new Error(`External table ${e}.${r}.${n} not found`);let o=h=>{if(h==null)return null;if(typeof h=="boolean")return h;if(typeof h=="number")return h!==0;let p=String(h).toLowerCase();return p==="t"||p==="true"||p==="1"||p==="yes"||p==="on"},a=s[0],l={schema:a.SCHEMA,tableName:a.TABLENAME,dataObject:a.EXTOBJNAME||null,delimiter:a.DELIM||null,encoding:a.ENCODING||null,timeStyle:a.TIMESTYLE||null,remoteSource:a.REMOTESOURCE||null,skipRows:a.SKIPROWS||null,maxErrors:a.MAXERRORS||null,escapeChar:a.ESCAPE||null,logDir:a.LOGDIR||null,decimalDelim:a.DECIMALDELIM||null,quotedValue:a.QUOTEDVALUE||null,nullValue:a.NULLVALUE||null,crInString:o(a.CRINSTRING),truncString:o(a.TRUNCSTRING),ctrlChars:o(a.CTRLCHARS),ignoreZero:o(a.IGNOREZERO),timeExtraZeros:o(a.TIMEEXTRAZEROS),y2Base:a.Y2BASE||null,fillRecord:o(a.FILLRECORD),compress:o(a.COMPRESS),includeHeader:o(a.INCLUDEHEADER),lfInString:o(a.LFINSTRING),dateStyle:a.DATESTYLE||null,dateDelim:a.DATEDELIM||null,timeDelim:a.TIMEDELIM||null,boolStyle:a.BOOLSTYLE||null,format:a.FORMAT||null,socketBufSize:a.SOCKETBUFSIZE||null,recordDelim:a.RECORDDELIM?String(a.RECORDDELIM).replace(/\r/g,"\\r").replace(/\n/g,"\\n"):null,maxRows:a.MAXROWS||null,requireQuotes:o(a.REQUIREQUOTES),recordLength:a.RECORDLENGTH||null,dateTimeDelim:a.DATETIMEDELIM||null,rejectFile:a.REJECTFILE||null},c=await kn(t,e,r,n),u=de(e),d=de(r),E=de(n),f=[];f.push(`CREATE EXTERNAL TABLE ${u}.${d}.${E}`),f.push("(");let T=c.map(h=>{let p=`    ${de(h.name)} ${h.fullTypeName}`;return h.notNull&&(p+=" NOT NULL"),p});return f.push(T.join(`,
`)),f.push(")"),f.push("USING"),f.push("("),l.dataObject!==null&&f.push(`    DATAOBJECT('${l.dataObject}')`),l.delimiter!==null&&f.push(`    DELIMITER '${l.delimiter}'`),l.encoding!==null&&f.push(`    ENCODING '${l.encoding}'`),l.timeStyle!==null&&f.push(`    TIMESTYLE '${l.timeStyle}'`),l.remoteSource!==null&&f.push(`    REMOTESOURCE '${l.remoteSource}'`),l.maxErrors!==null&&f.push(`    MAXERRORS ${l.maxErrors}`),l.escapeChar!==null&&f.push(`    ESCAPECHAR '${l.escapeChar}'`),l.decimalDelim!==null&&f.push(`    DECIMALDELIM '${l.decimalDelim}'`),l.logDir!==null&&f.push(`    LOGDIR '${l.logDir}'`),l.quotedValue!==null&&f.push(`    QUOTEDVALUE '${l.quotedValue}'`),l.nullValue!==null&&f.push(`    NULLVALUE '${l.nullValue}'`),l.crInString!==null&&f.push(`    CRINSTRING ${l.crInString}`),l.truncString!==null&&f.push(`    TRUNCSTRING ${l.truncString}`),l.ctrlChars!==null&&f.push(`    CTRLCHARS ${l.ctrlChars}`),l.ignoreZero!==null&&f.push(`    IGNOREZERO ${l.ignoreZero}`),l.timeExtraZeros!==null&&f.push(`    TIMEEXTRAZEROS ${l.timeExtraZeros}`),l.y2Base!==null&&f.push(`    Y2BASE ${l.y2Base}`),l.fillRecord!==null&&f.push(`    FILLRECORD ${l.fillRecord}`),l.compress!==null&&f.push(`    COMPRESS ${l.compress}`),l.includeHeader!==null&&f.push(`    INCLUDEHEADER ${l.includeHeader}`),l.lfInString!==null&&f.push(`    LFINSTRING ${l.lfInString}`),l.dateStyle!==null&&f.push(`    DATESTYLE '${l.dateStyle}'`),l.dateDelim!==null&&f.push(`    DATEDELIM '${l.dateDelim}'`),l.timeDelim!==null&&f.push(`    TIMEDELIM '${l.timeDelim}'`),l.boolStyle!==null&&f.push(`    BOOLSTYLE '${l.boolStyle}'`),l.format!==null&&f.push(`    FORMAT '${l.format}'`),l.socketBufSize!==null&&f.push(`    SOCKETBUFSIZE ${l.socketBufSize}`),l.recordDelim!==null&&f.push(`    RECORDDELIM '${l.recordDelim}'`),l.maxRows!==null&&f.push(`    MAXROWS ${l.maxRows}`),l.requireQuotes!==null&&f.push(`    REQUIREQUOTES ${l.requireQuotes}`),l.recordLength!==null&&f.push(`    RECORDLENGTH ${l.recordLength}`),l.dateTimeDelim!==null&&f.push(`    DATETIMEDELIM '${l.dateTimeDelim}'`),l.rejectFile!==null&&f.push(`    REJECTFILE '${l.rejectFile}'`),f.push(");"),f.join(`
`)}var xS=H(()=>{"use strict";Ci();wS()});async function ga(t,e,r,n){let i=`
        SELECT 
            SCHEMA,
            OWNER,
            SYNONYM_NAME,
            REFOBJNAME,
            DESCRIPTION
        FROM ${e.toUpperCase()}.._V_SYNONYM
        WHERE DATABASE = '${e.toUpperCase()}'
            AND SCHEMA = '${r.toUpperCase()}'
            AND SYNONYM_NAME = '${n.toUpperCase()}'
    `,o=await ft(t,i);if(o.length===0)throw new Error(`Synonym ${e}.${r}.${n} not found`);let a=o[0],l=de(e),c=de(a.OWNER||r),u=de(n),d=a.REFOBJNAME,E=[];if(E.push(`CREATE SYNONYM ${l}.${c}.${u} FOR ${d};`),a.DESCRIPTION){let f=a.DESCRIPTION.replace(/'/g,"''");E.push(`COMMENT ON SYNONYM ${u} IS '${f}';`)}return E.join(`
`)}var MS=H(()=>{"use strict";Ci()});async function cy(t){let e=null,r=[],n=[],i=0,s=0,o=["TABLE","VIEW","PROCEDURE","EXTERNAL TABLE","SYNONYM"];try{let a={host:t.connectionDetails.host,port:t.connectionDetails.port||5480,database:t.connectionDetails.database,user:t.connectionDetails.user,password:t.connectionDetails.password},l=Ir();e=new l(a),await e.connect();let c=t.database.toUpperCase(),u=t.schema?t.schema.toUpperCase():null,d=t.objectTypes?t.objectTypes.map(A=>A.toUpperCase()).filter(A=>o.includes(A)):o;d.length===0&&(d=o),n.push("-- ============================================"),n.push("-- Batch DDL Export"),n.push(`-- Database: ${c}`),u&&n.push(`-- Schema: ${u}`),n.push(`-- Object Types: ${d.join(", ")}`),n.push(`-- Generated: ${new Date().toISOString()}`),n.push("-- ============================================"),n.push("");let E=new Map,f=new Map,T=new Map,h=new Map,p=new Map,S=d.includes("TABLE"),m=d.includes("VIEW"),R=d.includes("EXTERNAL TABLE");if(S||m||R){let A=u?`AND D.SCHEMA = '${u}'`:"",g=`
                SELECT 
                    D.SCHEMA,
                    D.OBJNAME,
                    D.OBJTYPE,
                    X.ATTNAME,
                    X.DESCRIPTION,
                    X.FORMAT_TYPE AS FULL_TYPE,
                    X.ATTNOTNULL::BOOL AS ATTNOTNULL,
                    X.COLDEFAULT
                FROM ${c}.._V_RELATION_COLUMN X
                INNER JOIN ${c}.._V_OBJECT_DATA D ON X.OBJID = D.OBJID
                WHERE D.DBNAME = '${c}'
                    AND D.OBJTYPE IN ('TABLE', 'VIEW', 'EXTERNAL TABLE')
                    ${A}
                ORDER BY D.SCHEMA, D.OBJNAME, X.ATTNUM
            `;try{let w=await ft(e,g);for(let I of w){let D=`${I.SCHEMA}.${I.OBJNAME}`;E.has(D)||E.set(D,[]);let b=!1,P=I.ATTNOTNULL;if(typeof P=="boolean")b=P;else if(typeof P=="number")b=P!==0;else if(typeof P=="string"){let M=P.trim().toLowerCase();b=M==="t"||M==="true"||M==="1"}E.get(D).push({name:I.ATTNAME,description:I.DESCRIPTION||null,fullTypeName:I.FULL_TYPE,notNull:b,defaultValue:I.COLDEFAULT||null})}}catch(w){let I=w instanceof Error?w.message:String(w);r.push(`Error bulk fetching columns: ${I}`)}}if(S){let A=u?`AND SCHEMA = '${u}'`:"",g=`
                SELECT SCHEMA, TABLENAME, ATTNAME
                FROM ${c}.._V_TABLE_DIST_MAP
                WHERE 1=1 ${A}
                ORDER BY SCHEMA, TABLENAME, DISTSEQNO
            `;try{let w=await ft(e,g);for(let I of w){let D=`${I.SCHEMA}.${I.TABLENAME}`;f.has(D)||f.set(D,[]),f.get(D).push(I.ATTNAME)}}catch{}}if(S){let A=u?`AND SCHEMA = '${u}'`:"",g=`
                SELECT SCHEMA, TABLENAME, ATTNAME
                FROM ${c}.._V_TABLE_ORGANIZE_COLUMN
                WHERE 1=1 ${A}
                ORDER BY SCHEMA, TABLENAME, ORGSEQNO
            `;try{let w=await ft(e,g);for(let I of w){let D=`${I.SCHEMA}.${I.TABLENAME}`;T.has(D)||T.set(D,[]),T.get(D).push(I.ATTNAME)}}catch{}}if(S){let A=u?`AND X.SCHEMA = '${u}'`:"",g=`
                SELECT 
                    X.SCHEMA, X.RELATION, X.CONSTRAINTNAME, X.CONTYPE,
                    X.ATTNAME, X.PKDATABASE, X.PKSCHEMA, X.PKRELATION, X.PKATTNAME,
                    X.UPDT_TYPE, X.DEL_TYPE
                FROM ${c}.._V_RELATION_KEYDATA X
                WHERE X.OBJID NOT IN (4,5) ${A}
                ORDER BY X.SCHEMA, X.RELATION, X.CONSTRAINTNAME, X.CONSEQ
            `;try{let w=await ft(e,g);for(let I of w){let D=`${I.SCHEMA}.${I.RELATION}`;h.has(D)||h.set(D,new Map);let b=h.get(D),P=I.CONSTRAINTNAME;if(!b.has(P)){let B={p:"PRIMARY KEY",f:"FOREIGN KEY",u:"UNIQUE"};b.set(P,{type:B[I.CONTYPE]||"UNKNOWN",typeChar:I.CONTYPE,columns:[],pkDatabase:I.PKDATABASE||null,pkSchema:I.PKSCHEMA||null,pkRelation:I.PKRELATION||null,pkColumns:[],updateType:I.UPDT_TYPE||"NO ACTION",deleteType:I.DEL_TYPE||"NO ACTION"})}let M=b.get(P);M.columns.push(I.ATTNAME),I.PKATTNAME&&M.pkColumns.push(I.PKATTNAME)}}catch{}}if(S){let A=u?`AND SCHEMA = '${u}'`:"",g=`
                SELECT SCHEMA, OBJNAME, DESCRIPTION
                FROM ${c}.._V_OBJECT_DATA
                WHERE DBNAME = '${c}' AND OBJTYPE = 'TABLE' AND DESCRIPTION IS NOT NULL ${A}
            `;try{let w=await ft(e,g);for(let I of w)I.DESCRIPTION&&p.set(`${I.SCHEMA}.${I.OBJNAME}`,I.DESCRIPTION)}catch{}}for(let A of d){let g=[];try{if(A==="PROCEDURE"){let w=`SELECT PROCEDURESIGNATURE AS OBJNAME, SCHEMA FROM ${c}.._V_PROCEDURE WHERE DATABASE = '${c}'`;u&&(w+=` AND SCHEMA = '${u}'`),w+=" ORDER BY SCHEMA, PROCEDURESIGNATURE",g=(await ft(e,w)).map(D=>({name:D.OBJNAME,schema:D.SCHEMA}))}else{let w=`SELECT OBJNAME, SCHEMA FROM ${c}.._V_OBJECT_DATA WHERE DBNAME = '${c}' AND OBJTYPE = '${A}'`;u&&(w+=` AND SCHEMA = '${u}'`),w+=" ORDER BY SCHEMA, OBJNAME",g=(await ft(e,w)).map(D=>({name:D.OBJNAME,schema:D.SCHEMA}))}}catch(w){let I=w instanceof Error?w.message:String(w);r.push(`Error querying ${A}s: ${I}`);continue}if(g.length!==0){n.push("-- ----------------------------------------"),n.push(`-- ${A}S (${g.length})`),n.push("-- ----------------------------------------"),n.push("");for(let w of g)try{let I,D=`${w.schema}.${w.name}`;switch(A){case"TABLE":I=Ic(c,w.schema,w.name,E.get(D)||[],f.get(D)||[],T.get(D)||[],h.get(D)||new Map,p.get(D)||null);break;case"VIEW":I=await ma(e,c,w.schema,w.name);break;case"PROCEDURE":I=await _a(e,c,w.schema,w.name);break;case"EXTERNAL TABLE":I=await Ia(e,c,w.schema,w.name);break;case"SYNONYM":I=await ga(e,c,w.schema,w.name);break;default:s++;continue}n.push(`-- ${A}: ${c}.${w.schema}.${w.name}`),n.push(I),n.push(""),i++}catch(I){let D=I instanceof Error?I.message:String(I);r.push(`Error generating DDL for ${A} ${c}.${w.schema}.${w.name}: ${D}`),s++}}}return n.push("-- ============================================"),n.push("-- End of Batch DDL Export"),n.push(`-- Total objects: ${i}`),s>0&&n.push(`-- Skipped: ${s}`),r.length>0&&n.push(`-- Errors: ${r.length}`),n.push("-- ============================================"),{success:!0,ddlCode:n.join(`
`),objectCount:i,errors:r,skipped:s}}catch(a){return{success:!1,objectCount:0,errors:[`Batch DDL generation error: ${a instanceof Error?a.message:String(a)}`],skipped:0}}finally{if(e)try{await e.close()}catch{}}}var K6=H(()=>{"use strict";Ci();LS();DS();PS();xS();MS()});async function uy(t,e,r,n,i){let s=null;try{s=await z6(t);let o=i.toUpperCase();return o==="TABLE"?{success:!0,ddlCode:await Qd(s,e,r,n),objectInfo:{database:e,schema:r,objectName:n,objectType:i}}:o==="VIEW"?{success:!0,ddlCode:await ma(s,e,r,n),objectInfo:{database:e,schema:r,objectName:n,objectType:i}}:o==="PROCEDURE"?{success:!0,ddlCode:await _a(s,e,r,n),objectInfo:{database:e,schema:r,objectName:n,objectType:i}}:o==="EXTERNAL TABLE"?{success:!0,ddlCode:await Ia(s,e,r,n),objectInfo:{database:e,schema:r,objectName:n,objectType:i}}:o==="SYNONYM"?{success:!0,ddlCode:await ga(s,e,r,n),objectInfo:{database:e,schema:r,objectName:n,objectType:i}}:{success:!0,ddlCode:`-- DDL generation for ${i} not yet implemented
-- Object: ${e}.${r}.${n}
-- Type: ${i}
--
-- This feature can be extended to support:
-- - FUNCTION: Query _V_FUNCTION system table
-- - AGGREGATE: Query _V_AGGREGATE system table
`,objectInfo:{database:e,schema:r,objectName:n,objectType:i},note:`${i} DDL generation not yet implemented`}}catch(o){return{success:!1,error:`DDL generation error: ${o instanceof Error?o.message:String(o)}`}}finally{if(s)try{await s.close()}catch{}}}var J6=H(()=>{"use strict";Ci();LS();DS();PS();xS();MS()});var Q6=H(()=>{"use strict";X6();Ci();wS();LS();DS();PS();xS();MS();K6();J6()});var dy={};_t(dy,{buildTableDDLFromCache:()=>Ic,generateBatchDDL:()=>cy,generateDDL:()=>uy,generateExternalTableDDL:()=>Ia,generateProcedureDDL:()=>_a,generateSynonymDDL:()=>ga,generateTableDDL:()=>Qd,generateViewDDL:()=>ma,getColumns:()=>kn,getDistributionInfo:()=>cs,getKeysInfo:()=>ds,getOrganizeInfo:()=>us,getTableComment:()=>Aa,getTableOwner:()=>Jd,quoteNameIfNeeded:()=>de});var Zd=H(()=>{"use strict";Q6()});var Z6={};_t(Z6,{generateRecreateTableScript:()=>Gye});async function Gye(t,e,r,n,i){let s=null;try{let o={host:t.host,port:t.port||5480,database:t.database,user:t.user,password:t.password},a=Ir();s=new a(o),await s.connect();let l=await kn(s,e,r,n);if(l.length===0)return{success:!1,error:`Table ${e}.${r}.${n} not found or has no columns`};let c=await cs(s,e,r,n),u=await us(s,e,r,n),d=await ds(s,e,r,n),E=await Aa(s,e,r,n),f=await Jd(s,e,r,n),T=de(e),h=de(r),p=de(n),S=new Date().toISOString().replace(/[-:T.]/g,"").substring(0,14),m=Math.random().toString(36).substring(2,7).toUpperCase(),R=i||`${n}_${S}_NEW`,A=de(R),g=`${n}_${S}_BACKUP_${m}`,w=de(g),I=[];I.push(`-- Recreate Table Script for ${T}.${h}.${p}`),I.push(`-- Generated at ${new Date().toISOString()}`),I.push(""),I.push("-- 1. Create new table with desired structure"),I.push(`CREATE TABLE ${T}.${h}.${A}`),I.push("(");let D=[];for(let P of l){let B=`    ${de(P.name)} ${P.fullTypeName}`;P.notNull&&(B+=" NOT NULL"),P.defaultValue!==null&&(B+=` DEFAULT ${P.defaultValue}`),D.push(B)}if(I.push(D.join(`,
`)),c.length>0){let P=c.map(M=>de(M));I.push(`)
DISTRIBUTE ON (${P.join(", ")})`)}else I.push(`)
DISTRIBUTE ON RANDOM`);if(u.length>0){let P=u.map(M=>de(M));I.push(`ORGANIZE ON (${P.join(", ")})`)}if(I.push(";"),I.push(""),I.push("-- 2. Copy data from original table"),I.push(`INSERT INTO ${T}.${h}.${A} SELECT * FROM ${T}.${h}.${p};`),I.push(""),I.push("-- 3. Copy privileges from original table"),I.push(`ALTER TABLE ${T}.${h}.${A} SET PRIVILEGES TO ${T}.${h}.${p};`),I.push(""),I.push("-- 4. Swap tables: Rename Original to Backup, New to Original"),I.push(`ALTER TABLE ${T}.${h}.${p} RENAME TO ${w};`),I.push(`ALTER TABLE ${T}.${h}.${A} RENAME TO ${p};`),I.push(""),f&&(I.push("-- 5. Restore Owner"),I.push(`ALTER TABLE ${T}.${h}.${p} OWNER TO ${f};`),I.push("")),I.push("-- 6. Drop Backup Table (Optional - Comment out if you want to keep it)"),I.push(`DROP TABLE ${T}.${h}.${w};`),I.push(""),d.size>0){I.push("-- 7. Restore Constraints");for(let[P,M]of d){let B=de(P),G=M.columns.map(J=>de(J)),V="";if(M.typeChar==="f"){let J=M.pkColumns.filter(re=>re).map(re=>de(re));J.length>0&&(V=`ALTER TABLE ${T}.${h}.${p} ADD CONSTRAINT ${B} ${M.type} (${G.join(", ")}) REFERENCES ${M.pkDatabase}.${M.pkSchema}.${M.pkRelation} (${J.join(", ")}) ON DELETE ${M.deleteType} ON UPDATE ${M.updateType};`)}else(M.typeChar==="p"||M.typeChar==="u")&&(V=`ALTER TABLE ${T}.${h}.${p} ADD CONSTRAINT ${B} ${M.type} (${G.join(", ")});`);V&&I.push(V)}I.push("")}if(E){let P=E.replace(/'/g,"''");I.push("-- 8. Restore Comments"),I.push(`COMMENT ON TABLE ${T}.${h}.${p} IS '${P}';`)}let b=[];for(let P of l)if(P.description){let M=de(P.name),B=P.description.replace(/'/g,"''");b.push(`COMMENT ON COLUMN ${T}.${h}.${p}.${M} IS '${B}';`)}return b.length>0&&(E||I.push("-- 8. Restore Comments"),I.push(b.join(`
`)),I.push("")),I.push("-- 9. Generate Statistics"),I.push(`GENERATE EXPRESS STATISTICS ON ${T}.${h}.${p};`),{success:!0,sqlScript:I.join(`
`)}}catch(o){return{success:!1,error:`Error generating recreate script: ${o instanceof Error?o.message:String(o)}`}}finally{if(s)try{await s.close()}catch{}}}var e3=H(()=>{"use strict";Zd()});var fy={};_t(fy,{compareProcedures:()=>Vye,compareTableStructures:()=>$ye});async function Hye(t,e){let n=await t.createCommand(e).executeReader(),i=[];for(;await n.read();){let s={};for(let o=0;o<n.fieldCount;o++)s[n.getName(o)]=n.getValue(o);i.push(s)}return i}async function r3(t,e,r,n){let i=await kn(t,e,r,n),s=await ds(t,e,r,n),o=await cs(t,e,r,n),a=await us(t,e,r,n);return{database:e,schema:r,tableName:n,columns:i,keys:s,distribution:o,organization:a}}function Wye(t,e){let r=[];return t.fullTypeName!==e.fullTypeName&&r.push(`Type: ${t.fullTypeName} \u2192 ${e.fullTypeName}`),t.notNull!==e.notNull&&r.push(`NOT NULL: ${t.notNull} \u2192 ${e.notNull}`),t.defaultValue!==e.defaultValue&&r.push(`Default: ${t.defaultValue||"NULL"} \u2192 ${e.defaultValue||"NULL"}`),r}function kye(t,e){let r=[];return t.type!==e.type&&r.push(`Type: ${t.type} \u2192 ${e.type}`),t.columns.join(",")!==e.columns.join(",")&&r.push(`Columns: (${t.columns.join(", ")}) \u2192 (${e.columns.join(", ")})`),t.typeChar==="f"&&e.typeChar==="f"&&t.pkRelation!==e.pkRelation&&r.push(`References: ${t.pkRelation} \u2192 ${e.pkRelation}`),r}async function $ye(t,e,r,n,i,s,o){let a=null;try{let l={host:t.host,port:t.port||5480,database:t.database,user:t.user,password:t.password},c=Ir();a=new c(l),await a.connect();let u=await r3(a,e,r,n),d=await r3(a,i,s,o),E=[],f=new Map(u.columns.map(g=>[g.name.toUpperCase(),g])),T=new Map(d.columns.map(g=>[g.name.toUpperCase(),g]));for(let[g,w]of f){let I=T.get(g);if(!I)E.push({name:w.name,status:"removed",sourceColumn:w});else{let D=Wye(w,I);E.push({name:w.name,status:D.length>0?"modified":"unchanged",sourceColumn:w,targetColumn:I,changes:D})}}for(let[g,w]of T)f.has(g)||E.push({name:w.name,status:"added",targetColumn:w});let h=[],p=u.keys,S=d.keys;for(let[g,w]of p){let I=S.get(g);if(!I)h.push({name:g,status:"removed",sourceKey:w});else{let D=kye(w,I);h.push({name:g,status:D.length>0?"modified":"unchanged",sourceKey:w,targetKey:I,changes:D})}}for(let[g,w]of S)p.has(g)||h.push({name:g,status:"added",targetKey:w});let m=JSON.stringify(u.distribution)===JSON.stringify(d.distribution),R=JSON.stringify(u.organization)===JSON.stringify(d.organization),A={columnsAdded:E.filter(g=>g.status==="added").length,columnsRemoved:E.filter(g=>g.status==="removed").length,columnsModified:E.filter(g=>g.status==="modified").length,columnsUnchanged:E.filter(g=>g.status==="unchanged").length,keysAdded:h.filter(g=>g.status==="added").length,keysRemoved:h.filter(g=>g.status==="removed").length,keysModified:h.filter(g=>g.status==="modified").length};return{source:{database:e,schema:r,name:n},target:{database:i,schema:s,name:o},columnDiffs:E,keyDiffs:h,distributionMatch:m,sourceDistribution:u.distribution,targetDistribution:d.distribution,organizationMatch:R,sourceOrganization:u.organization,targetOrganization:d.organization,summary:A}}finally{if(a)try{await a.close()}catch{}}}async function n3(t,e,r,n){let i=`
        SELECT 
            SCHEMA,
            PROCEDURESOURCE,
            RETURNS,
            EXECUTEDASOWNER,
            DESCRIPTION,
            PROCEDURESIGNATURE,
            PROCEDURE,
            ARGUMENTS
        FROM ${e.toUpperCase()}.._V_PROCEDURE
        WHERE DATABASE = '${e.toUpperCase()}'
            AND SCHEMA = '${r.toUpperCase()}'
            AND PROCEDURESIGNATURE = '${n.toUpperCase()}'
    `,s=await Hye(t,i);if(s.length===0)throw new Error(`Procedure ${e}.${r}.${n} not found`);let o=s[0];return{database:e,schema:r,procedureName:o.PROCEDURE,procedureSignature:o.PROCEDURESIGNATURE,arguments:o.ARGUMENTS||null,returns:o.RETURNS,executeAsOwner:!!o.EXECUTEDASOWNER,source:o.PROCEDURESOURCE,description:o.DESCRIPTION||null}}function Yye(t,e){let r=t.split(`
`).map(o=>o.trimEnd()),n=e.split(`
`).map(o=>o.trimEnd()),i=[],s=Math.max(r.length,n.length);for(let o=0;o<s;o++){let a=r[o]||"",l=n[o]||"";a===l?i.push(`  ${a}`):r[o]?n[o]?(i.push(`- ${a}`),i.push(`+ ${l}`)):i.push(`- ${a}`):i.push(`+ ${l}`)}return i}async function Vye(t,e,r,n,i,s,o){let a=null;try{let l={host:t.host,port:t.port||5480,database:t.database,user:t.user,password:t.password},c=Ir();a=new c(l),await a.connect();let u=await n3(a,e,r,n),d=await n3(a,i,s,o),E=u.arguments===d.arguments,f=u.returns===d.returns,T=u.executeAsOwner===d.executeAsOwner,h=u.source.trim()===d.source.trim(),p=h?[]:Yye(u.source,d.source);return{source:{database:e,schema:r,name:n},target:{database:i,schema:s,name:o},argumentsMatch:E,sourceArguments:u.arguments,targetArguments:d.arguments,returnsMatch:f,sourceReturns:u.returns,targetReturns:d.returns,executeAsOwnerMatch:T,sourceExecuteAsOwner:u.executeAsOwner,targetExecuteAsOwner:d.executeAsOwner,sourceMatch:h,sourceCode:u.source,targetCode:d.source,sourceDiff:p}}finally{if(a)try{await a.close()}catch{}}}var Ey=H(()=>{"use strict";Zd()});var Ty={};_t(Ty,{SchemaCompareView:()=>hy});var eo,hy,py=H(()=>{"use strict";eo=q(require("vscode")),hy=class t{constructor(e,r,n,i){this._disposables=[];this._panel=e,this._update(n,i),this._panel.onDidDispose(()=>this.dispose(),null,this._disposables)}static{this.viewType="netezza.schemaCompare"}static createOrShow(e,r,n){let i=eo.window.activeTextEditor?eo.window.activeTextEditor.viewColumn:void 0;if(t.currentPanel){t.currentPanel._panel.reveal(i),t.currentPanel._update(r,n);return}let s=eo.window.createWebviewPanel(t.viewType,"Schema Comparison",i||eo.ViewColumn.One,{enableScripts:!0,localResourceRoots:[eo.Uri.joinPath(e,"media")]});t.currentPanel=new t(s,e,r,n)}dispose(){for(t.currentPanel=void 0,this._panel.dispose();this._disposables.length;){let e=this._disposables.pop();e&&e.dispose()}}_update(e,r){r==="table"?(this._panel.title=`Compare: ${e.source.name} \u2194 ${e.target.name}`,this._panel.webview.html=this._getTableComparisonHtml(e)):(this._panel.title=`Compare: ${e.source.name} \u2194 ${e.target.name}`,this._panel.webview.html=this._getProcedureComparisonHtml(e))}_getStatusIcon(e){switch(e){case"added":return"\u{1F7E2}";case"removed":return"\u{1F534}";case"modified":return"\u{1F7E1}";case"unchanged":return"\u26AA"}}_getStatusClass(e){return`status-${e}`}_getTableComparisonHtml(e){let r=`${e.source.database}.${e.source.schema}.${e.source.name}`,n=`${e.target.database}.${e.target.schema}.${e.target.name}`,i=e.columnDiffs.map(l=>{let c=l.sourceColumn,u=l.targetColumn,d=l.changes?.join("<br>")||"";return`
                <tr class="${this._getStatusClass(l.status)}">
                    <td>${this._getStatusIcon(l.status)}</td>
                    <td><strong>${l.name}</strong></td>
                    <td>${c?.fullTypeName||"-"}</td>
                    <td>${u?.fullTypeName||"-"}</td>
                    <td class="changes">${d}</td>
                </tr>
            `}).join(""),s=e.keyDiffs.map(l=>{let c=l.sourceKey,u=l.targetKey,d=l.changes?.join("<br>")||"";return`
                <tr class="${this._getStatusClass(l.status)}">
                    <td>${this._getStatusIcon(l.status)}</td>
                    <td><strong>${l.name}</strong></td>
                    <td>${c?.type||"-"} (${c?.columns.join(", ")||"-"})</td>
                    <td>${u?.type||"-"} (${u?.columns.join(", ")||"-"})</td>
                    <td class="changes">${d}</td>
                </tr>
            `}).join(""),o=e.distributionMatch?"\u2705 Match":"\u274C Different",a=e.organizationMatch?"\u2705 Match":"\u274C Different";return`
            <!DOCTYPE html>
            <html lang="en">
            <head>
                <meta charset="UTF-8">
                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                <title>Schema Comparison</title>
                <style>
                    ${this._getStyles()}
                </style>
            </head>
            <body>
                <div class="container">
                    <h1>Table Structure Comparison</h1>
                    
                    <div class="header-info">
                        <div class="source-header">
                            <span class="label">Source:</span>
                            <span class="value">${r}</span>
                        </div>
                        <div class="arrow">\u2194</div>
                        <div class="target-header">
                            <span class="label">Target:</span>
                            <span class="value">${n}</span>
                        </div>
                    </div>

                    <div class="summary">
                        <h2>Summary</h2>
                        <div class="summary-grid">
                            <div class="summary-item added">\u{1F7E2} Added: ${e.summary.columnsAdded} columns, ${e.summary.keysAdded} keys</div>
                            <div class="summary-item removed">\u{1F534} Removed: ${e.summary.columnsRemoved} columns, ${e.summary.keysRemoved} keys</div>
                            <div class="summary-item modified">\u{1F7E1} Modified: ${e.summary.columnsModified} columns, ${e.summary.keysModified} keys</div>
                            <div class="summary-item unchanged">\u26AA Unchanged: ${e.summary.columnsUnchanged} columns</div>
                        </div>
                    </div>

                    <div class="section">
                        <h2>Columns</h2>
                        <table>
                            <thead>
                                <tr>
                                    <th width="40">Status</th>
                                    <th>Column Name</th>
                                    <th>Source Type</th>
                                    <th>Target Type</th>
                                    <th>Changes</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${i}
                            </tbody>
                        </table>
                    </div>

                    ${e.keyDiffs.length>0?`
                    <div class="section">
                        <h2>Keys & Constraints</h2>
                        <table>
                            <thead>
                                <tr>
                                    <th width="40">Status</th>
                                    <th>Key Name</th>
                                    <th>Source</th>
                                    <th>Target</th>
                                    <th>Changes</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${s}
                            </tbody>
                        </table>
                    </div>
                    `:""}

                    <div class="section">
                        <h2>Distribution & Organization</h2>
                        <table>
                            <thead>
                                <tr>
                                    <th>Property</th>
                                    <th>Source</th>
                                    <th>Target</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>DISTRIBUTE ON</strong></td>
                                    <td>${e.sourceDistribution.length>0?e.sourceDistribution.join(", "):"RANDOM"}</td>
                                    <td>${e.targetDistribution.length>0?e.targetDistribution.join(", "):"RANDOM"}</td>
                                    <td>${o}</td>
                                </tr>
                                <tr>
                                    <td><strong>ORGANIZE ON</strong></td>
                                    <td>${e.sourceOrganization.length>0?e.sourceOrganization.join(", "):"(none)"}</td>
                                    <td>${e.targetOrganization.length>0?e.targetOrganization.join(", "):"(none)"}</td>
                                    <td>${a}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </body>
            </html>
        `}_getProcedureComparisonHtml(e){let r=`${e.source.database}.${e.source.schema}.${e.source.name}`,n=`${e.target.database}.${e.target.schema}.${e.target.name}`,i=e.sourceDiff.map(s=>{let o="";return s.startsWith("+")?o="diff-added":s.startsWith("-")?o="diff-removed":o="diff-unchanged",`<div class="${o}">${this._escapeHtml(s)}</div>`}).join("");return`
            <!DOCTYPE html>
            <html lang="en">
            <head>
                <meta charset="UTF-8">
                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                <title>Procedure Comparison</title>
                <style>
                    ${this._getStyles()}
                </style>
            </head>
            <body>
                <div class="container">
                    <h1>Procedure Comparison</h1>
                    
                    <div class="header-info">
                        <div class="source-header">
                            <span class="label">Source:</span>
                            <span class="value">${r}</span>
                        </div>
                        <div class="arrow">\u2194</div>
                        <div class="target-header">
                            <span class="label">Target:</span>
                            <span class="value">${n}</span>
                        </div>
                    </div>

                    <div class="section">
                        <h2>Signature Comparison</h2>
                        <table>
                            <thead>
                                <tr>
                                    <th>Property</th>
                                    <th>Source</th>
                                    <th>Target</th>
                                    <th>Match</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="${e.argumentsMatch?"":"status-modified"}">
                                    <td><strong>Arguments</strong></td>
                                    <td><code>${e.sourceArguments||"(none)"}</code></td>
                                    <td><code>${e.targetArguments||"(none)"}</code></td>
                                    <td>${e.argumentsMatch?"\u2705":"\u274C"}</td>
                                </tr>
                                <tr class="${e.returnsMatch?"":"status-modified"}">
                                    <td><strong>Returns</strong></td>
                                    <td><code>${e.sourceReturns}</code></td>
                                    <td><code>${e.targetReturns}</code></td>
                                    <td>${e.returnsMatch?"\u2705":"\u274C"}</td>
                                </tr>
                                <tr class="${e.executeAsOwnerMatch?"":"status-modified"}">
                                    <td><strong>Execute As</strong></td>
                                    <td>${e.sourceExecuteAsOwner?"OWNER":"CALLER"}</td>
                                    <td>${e.targetExecuteAsOwner?"OWNER":"CALLER"}</td>
                                    <td>${e.executeAsOwnerMatch?"\u2705":"\u274C"}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="section">
                        <h2>Source Code ${e.sourceMatch?"\u2705 Identical":"\u274C Different"}</h2>
                        ${e.sourceMatch?`
                            <div class="code-block">
                                <pre>${this._escapeHtml(e.sourceCode)}</pre>
                            </div>
                        `:`
                            <div class="code-diff">
                                <pre>${i}</pre>
                            </div>
                        `}
                    </div>
                </div>
            </body>
            </html>
        `}_escapeHtml(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}_getStyles(){return`
            :root {
                --bg-color: var(--vscode-editor-background);
                --fg-color: var(--vscode-editor-foreground);
                --border-color: var(--vscode-widget-border);
                --header-bg: var(--vscode-sideBarSectionHeader-background);
                --added-bg: rgba(40, 167, 69, 0.2);
                --removed-bg: rgba(220, 53, 69, 0.2);
                --modified-bg: rgba(255, 193, 7, 0.2);
            }

            body {
                font-family: var(--vscode-font-family);
                font-size: var(--vscode-font-size);
                color: var(--fg-color);
                background-color: var(--bg-color);
                margin: 0;
                padding: 20px;
            }

            .container {
                max-width: 1400px;
                margin: 0 auto;
            }

            h1 {
                border-bottom: 1px solid var(--border-color);
                padding-bottom: 10px;
                margin-bottom: 20px;
            }

            h2 {
                font-size: 1.1em;
                margin-top: 25px;
                margin-bottom: 10px;
                color: var(--vscode-textLink-foreground);
            }

            .header-info {
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 20px;
                padding: 15px;
                background-color: var(--header-bg);
                border-radius: 6px;
                margin-bottom: 20px;
            }

            .header-info .label {
                font-weight: bold;
                margin-right: 8px;
            }

            .header-info .value {
                font-family: monospace;
                background-color: var(--vscode-textCodeBlock-background);
                padding: 4px 8px;
                border-radius: 4px;
            }

            .arrow {
                font-size: 1.5em;
                color: var(--vscode-charts-blue);
            }

            .summary {
                background-color: var(--header-bg);
                padding: 15px;
                border-radius: 6px;
                margin-bottom: 20px;
            }

            .summary h2 {
                margin-top: 0;
            }

            .summary-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 10px;
            }

            .summary-item {
                padding: 8px;
                border-radius: 4px;
            }

            .summary-item.added { background-color: var(--added-bg); }
            .summary-item.removed { background-color: var(--removed-bg); }
            .summary-item.modified { background-color: var(--modified-bg); }

            table {
                width: 100%;
                border-collapse: collapse;
                margin-bottom: 20px;
            }

            th, td {
                padding: 10px;
                text-align: left;
                border: 1px solid var(--border-color);
            }

            th {
                background-color: var(--header-bg);
                font-weight: 600;
            }

            tr.status-added {
                background-color: var(--added-bg);
            }

            tr.status-removed {
                background-color: var(--removed-bg);
            }

            tr.status-modified {
                background-color: var(--modified-bg);
            }

            .changes {
                font-size: 0.9em;
                color: var(--vscode-descriptionForeground);
            }

            .code-block, .code-diff {
                background-color: var(--vscode-textCodeBlock-background);
                border: 1px solid var(--border-color);
                border-radius: 6px;
                padding: 15px;
                overflow-x: auto;
            }

            .code-block pre, .code-diff pre {
                margin: 0;
                font-family: var(--vscode-editor-font-family);
                font-size: var(--vscode-editor-font-size);
                white-space: pre;
            }

            .diff-added {
                background-color: var(--added-bg);
                color: #28a745;
            }

            .diff-removed {
                background-color: var(--removed-bg);
                color: #dc3545;
            }

            .diff-unchanged {
                color: var(--fg-color);
            }

            code {
                font-family: var(--vscode-editor-font-family);
                background-color: var(--vscode-textCodeBlock-background);
                padding: 2px 6px;
                border-radius: 3px;
            }
        `}}});var a3={};_t(a3,{buildERDData:()=>qye,getForeignKeysForSchema:()=>s3,getTablesInSchema:()=>o3});async function s3(t,e,r,n,i){let s=`
        SELECT 
            X.SCHEMA,
            X.RELATION AS FROM_TABLE,
            X.CONSTRAINTNAME,
            X.ATTNAME AS FROM_COLUMN,
            X.PKDATABASE,
            X.PKSCHEMA,
            X.PKRELATION AS TO_TABLE,
            X.PKATTNAME AS TO_COLUMN,
            X.UPDT_TYPE,
            X.DEL_TYPE,
            X.CONSEQ
        FROM 
            ${n.toUpperCase()}.._V_RELATION_KEYDATA X
        WHERE 
            X.CONTYPE = 'f'
            AND X.SCHEMA = '${i.toUpperCase()}'
        ORDER BY
            X.CONSTRAINTNAME, X.CONSEQ
    `,o=new Map;try{let a=await oe(t,s,!0,e,r);if(!a||!a.data)return[];let l=Ee(a);for(let c of l){let u=c.CONSTRAINTNAME,d=`${c.SCHEMA}.${c.FROM_TABLE}`,E=`${c.PKSCHEMA}.${c.TO_TABLE}`;o.has(u)||o.set(u,{constraintName:u,fromTable:d,toTable:E,fromColumns:[],toColumns:[],onDelete:c.DEL_TYPE||"NO ACTION",onUpdate:c.UPDT_TYPE||"NO ACTION"});let f=o.get(u);f.fromColumns.push(c.FROM_COLUMN),f.toColumns.push(c.TO_COLUMN)}}catch(a){console.warn("Cannot retrieve FK relationships:",a)}return Array.from(o.values())}async function o3(t,e,r,n,i){let s=`
        SELECT 
            T.TABLENAME,
            T.OWNER
        FROM 
            ${n.toUpperCase()}.._V_TABLE T
        WHERE 
            T.SCHEMA = '${i.toUpperCase()}'
        ORDER BY T.TABLENAME
    `,o=`
        SELECT 
            A.NAME AS TABLENAME,
            A.ATTNAME,
            A.FORMAT_TYPE
        FROM 
            ${n.toUpperCase()}.._V_RELATION_COLUMN A
        WHERE 
            A.SCHEMA = '${i.toUpperCase()}'
            AND A.TYPE = 'TABLE'
        ORDER BY A.NAME, A.ATTNUM
    `,a=`
        SELECT 
            X.RELATION,
            X.ATTNAME
        FROM 
            ${n.toUpperCase()}.._V_RELATION_KEYDATA X
        WHERE 
            X.CONTYPE = 'p'
            AND X.SCHEMA = '${i.toUpperCase()}'
        ORDER BY X.RELATION, X.CONSEQ
    `,l=new Map;try{let c=await oe(t,s,!0,e,r);if(c&&c.data){let E=Ee(c);for(let f of E){let T=f.TABLENAME;l.set(T,{database:n,schema:i,tableName:T,fullName:`${i}.${T}`,columns:[],primaryKeyColumns:[]})}}let u=await oe(t,o,!0,e,r);if(u&&u.data){let E=Ee(u);for(let f of E){let T=l.get(f.TABLENAME);T&&T.columns.push({name:f.ATTNAME,dataType:f.FORMAT_TYPE,isPrimaryKey:!1,isForeignKey:!1})}}let d=await oe(t,a,!0,e,r);if(d&&d.data){let E=Ee(d);for(let f of E){let T=l.get(f.RELATION);if(T){T.primaryKeyColumns.push(f.ATTNAME);let h=T.columns.find(p=>p.name===f.ATTNAME);h&&(h.isPrimaryKey=!0)}}}}catch(c){console.warn("Cannot retrieve table information:",c)}return Array.from(l.values())}async function qye(t,e,r,n,i){let[s,o]=await Promise.all([o3(t,e,r,n,i),s3(t,e,r,n,i)]);for(let c of o){let u=c.fromTable.split(".")[1],d=s.find(E=>E.tableName===u);if(d)for(let E of c.fromColumns){let f=d.columns.find(T=>T.name===E);f&&(f.isForeignKey=!0)}}let a=new Set;for(let c of o)a.add(c.fromTable.split(".")[1]),a.add(c.toTable.split(".")[1]);let l=s.filter(c=>a.has(c.tableName)||s.length<=20);return{database:n,schema:i,tables:l,relationships:o}}var l3=H(()=>{"use strict";lr()});var c3={};_t(c3,{ERDView:()=>Sy});var to,Sy,u3=H(()=>{"use strict";to=q(require("vscode")),Sy=class t{constructor(e,r,n){this._disposables=[];this._panel=e,this._update(n),this._panel.onDidDispose(()=>this.dispose(),null,this._disposables)}static{this.viewType="netezza.erdView"}static createOrShow(e,r){let n=to.window.activeTextEditor?to.window.activeTextEditor.viewColumn:void 0;if(t.currentPanel){t.currentPanel._panel.reveal(n),t.currentPanel._update(r);return}let i=to.window.createWebviewPanel(t.viewType,`ERD: ${r.database}.${r.schema}`,n||to.ViewColumn.One,{enableScripts:!0,localResourceRoots:[to.Uri.joinPath(e,"media")]});t.currentPanel=new t(i,e,r)}dispose(){for(t.currentPanel=void 0,this._panel.dispose();this._disposables.length;){let e=this._disposables.pop();e&&e.dispose()}}_update(e){this._panel.title=`ERD: ${e.database}.${e.schema}`,this._panel.webview.html=this._getHtml(e)}_getHtml(e){let r=this._generateTableBoxes(e.tables,e.relationships),n=e.relationships.length,i=e.tables.length;return`
            <!DOCTYPE html>
            <html lang="en">
            <head>
                <meta charset="UTF-8">
                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                <title>Entity Relationship Diagram</title>
                <style>
                    ${this._getStyles()}
                </style>
            </head>
            <body>
                <div class="header">
                    <h1>Entity Relationship Diagram</h1>
                    <div class="header-info">
                        <span class="badge">${e.database}.${e.schema}</span>
                        <span class="stat">${i} tables</span>
                        <span class="stat">${n} relationships</span>
                    </div>
                </div>

                <div class="legend">
                    <span class="legend-item"><span class="pk-indicator">\u{1F511}</span> Primary Key</span>
                    <span class="legend-item"><span class="fk-indicator">\u{1F517}</span> Foreign Key</span>
                </div>

                ${n===0?`
                    <div class="no-relationships">
                        <p>\u26A0\uFE0F No foreign key relationships found in this schema.</p>
                        <p>Tables are displayed but no relationship lines can be drawn.</p>
                    </div>
                `:""}

                <div class="erd-container" id="erdContainer">
                    <div class="erd-canvas" id="erdCanvas">
                        ${r}
                        <svg class="relationships-svg" id="relationshipsSvg"></svg>
                    </div>
                </div>

                <div class="relationships-table">
                    <h2>Foreign Key Relationships</h2>
                    ${n>0?`
                        <table>
                            <thead>
                                <tr>
                                    <th>Constraint Name</th>
                                    <th>From Table</th>
                                    <th>Column(s)</th>
                                    <th>\u2192</th>
                                    <th>To Table</th>
                                    <th>Column(s)</th>
                                    <th>On Delete</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${e.relationships.map(s=>`
                                    <tr>
                                        <td><code>${s.constraintName}</code></td>
                                        <td><strong>${s.fromTable}</strong></td>
                                        <td>${s.fromColumns.join(", ")}</td>
                                        <td>\u2192</td>
                                        <td><strong>${s.toTable}</strong></td>
                                        <td>${s.toColumns.join(", ")}</td>
                                        <td>${s.onDelete}</td>
                                    </tr>
                                `).join("")}
                            </tbody>
                        </table>
                    `:"<p>No foreign key relationships defined.</p>"}
                </div>

                <script>
                    ${this._getScript(e)}
                </script>
            </body>
            </html>
        `}_generateTableBoxes(e,r){let n=new Map,i=new Map,s=new Map;e.forEach(B=>{let G=B.tableName;n.set(G,new Set),i.set(G,0),s.set(G,0)}),r.forEach(B=>{let G=B.fromTable.includes(".")?B.fromTable.split(".").pop():B.fromTable,V=B.toTable.includes(".")?B.toTable.split(".").pop():B.toTable;n.has(G)&&(n.get(G).add(V),i.set(G,(i.get(G)||0)+1)),n.has(V)&&(n.get(V).add(G),s.set(V,(s.get(V)||0)+1))});let o=[],a=[],l=[];e.forEach(B=>{let G=i.get(B.tableName)||0;(n.get(B.tableName)?.size||0)===0?l.push(B):G>0?o.push(B):a.push(B)}),o.sort((B,G)=>{let V=i.get(B.tableName)||0;return(i.get(G.tableName)||0)-V});let c=new Map,u=new Set,d=260,E=240,f=50,T=40,h=d+f,p=E+T,S=(B,G)=>`${B},${G}`,m=(B,G)=>u.add(S(B,G)),R=(B,G)=>u.has(S(B,G)),A=(B,G=0)=>{let V=G;for(;R(B,V);)V++;return V},g=0,w=1,I=2,D=B=>20+B*h,b=B=>20+B*p;o.forEach(B=>{let G=A(w);m(w,G),c.set(B.tableName,{x:D(w),y:b(G)})});let P=new Map,M=[];return a.forEach(B=>{let G=n.get(B.tableName)||new Set,V=null;for(let J of G)if(o.some(re=>re.tableName===J)){V=J;break}V?(P.has(V)||P.set(V,[]),P.get(V).push(B)):M.push(B)}),P.forEach((B,G)=>{let V=c.get(G);if(!V)return;let J=Math.round((V.y-20)/p);B.forEach((re,te)=>{let Be=te%2===0?g:I,fe=J+Math.floor(te/2);for(;R(Be,fe);)fe++;m(Be,fe),c.set(re.tableName,{x:D(Be),y:b(fe)})})}),M.forEach(B=>{let G=!1;for(let V of[g,I]){let J=A(V);G||(m(V,J),c.set(B.tableName,{x:D(V),y:b(J)}),G=!0)}}),l.length>0&&l.forEach((G,V)=>{let J=V;c.set(G.tableName,{x:D(3),y:b(J)})}),e.map(B=>{let G=c.get(B.tableName)||{x:20,y:20},V=B.columns.slice(0,10).map(re=>{let te=[];re.isPrimaryKey&&te.push("\u{1F511}"),re.isForeignKey&&te.push("\u{1F517}");let Be=te.length>0?`<span class="col-icons">${te.join("")}</span>`:"";return`
                    <div class="table-column ${re.isPrimaryKey?"pk":""} ${re.isForeignKey?"fk":""}" data-col="${re.name}">
                        ${Be}
                        <span class="col-name">${re.name}</span>
                        <span class="col-type">${re.dataType}</span>
                    </div>
                `}).join(""),J=B.columns.length>10?`<div class="more-columns">... and ${B.columns.length-10} more</div>`:"";return`
                <div class="table-box" id="table-${B.tableName}" 
                     data-table="${B.fullName}"
                     style="left: ${G.x}px; top: ${G.y}px;">
                    <div class="table-header">${B.tableName}</div>
                    <div class="table-columns">
                        ${V}
                        ${J}
                    </div>
                </div>
            `}).join("")}_getScript(e){return`
            (function() {
                const relationships = ${JSON.stringify(e.relationships)};
                const canvas = document.getElementById('erdCanvas');
                const svg = document.getElementById('relationshipsSvg');
                
                function getTableBox(el) {
                    const left = parseInt(el.style.left) || 0;
                    const top = parseInt(el.style.top) || 0;
                    const width = el.offsetWidth;
                    const height = el.offsetHeight;
                    return {
                        left: left,
                        top: top,
                        right: left + width,
                        bottom: top + height,
                        centerX: left + width / 2,
                        centerY: top + height / 2
                    };
                }

                function getColumnPosition(tableEl, columnName) {
                    // Try to find exact column
                    let colEl = tableEl.querySelector('.table-column[data-col="' + columnName + '"]');
                    
                    // If not found (hidden by "more columns"), try to estimate or return center
                    if (!colEl) return null;

                    // Calculate position relative to the table box
                    const tableRect = tableEl.getBoundingClientRect();
                    const colRect = colEl.getBoundingClientRect();
                    const canvasRect = canvas.getBoundingClientRect();

                    // Relative Y from canvas top
                    // We can't just subtract rects if the canvas is scrolled, but here we want SVG coords (absolute in canvas)
                    // The table.style.top is relative to canvas.
                    // The column offset within table is colRect.top - tableRect.top
                    // So Y = table.style.top + (colRect.top - tableRect.top) + colHeight/2
                    
                    const relativeTop = colRect.top - tableRect.top;
                    const centerY = relativeTop + colRect.height / 2;
                    
                    // We need to account for table scroll position if any?
                    // getBoundingClientRect takes visual position, so it accounts for scroll.
                    
                    const tableStyleTop = parseInt(tableEl.style.top) || 0;
                    
                    return tableStyleTop + centerY;
                }
                
                function drawRelationships() {
                    svg.innerHTML = '';
                    
                    // Update SVG size
                    let maxX = 1200, maxY = 600;
                    document.querySelectorAll('.table-box').forEach(el => {
                        const box = getTableBox(el);
                        maxX = Math.max(maxX, box.right + 50);
                        maxY = Math.max(maxY, box.bottom + 50);
                    });
                    
                    svg.setAttribute('width', maxX);
                    svg.setAttribute('height', maxY);
                    svg.style.width = maxX + 'px';
                    svg.style.height = maxY + 'px';
                    
                    // Defs
                    const defs = document.createElementNS('http://www.w3.org/2000/svg', 'defs');
                    const marker = document.createElementNS('http://www.w3.org/2000/svg', 'marker');
                    marker.setAttribute('id', 'arrowhead');
                    marker.setAttribute('markerWidth', '10');
                    marker.setAttribute('markerHeight', '7');
                    marker.setAttribute('refX', '10');
                    marker.setAttribute('refY', '3.5');
                    marker.setAttribute('orient', 'auto');
                    const polygon = document.createElementNS('http://www.w3.org/2000/svg', 'polygon');
                    polygon.setAttribute('points', '0 0, 10 3.5, 0 7');
                    polygon.setAttribute('fill', '#3794ff');
                    marker.appendChild(polygon);
                    defs.appendChild(marker);
                    svg.appendChild(defs);
                    
                    relationships.forEach((rel, index) => {
                        const childTableName = rel.fromTable.split('.')[1];
                        const parentTableName = rel.toTable.split('.')[1];
                        
                        const childEl = document.getElementById('table-' + childTableName);
                        const parentEl = document.getElementById('table-' + parentTableName);
                        
                        if (!childEl || !parentEl) return;
                        
                        const childBox = getTableBox(childEl);
                        const parentBox = getTableBox(parentEl);
                        
                        // Determine L/R relationship
                        // If Parent is to the right of Child: Child Right -> Parent Left
                        const parentIsRight = parentBox.centerX > childBox.centerX;
                        
                        let fromX, fromY, toX, toY;
                        let fromControlX, toControlX;
                        
                        // Default Y to center if col not found
                        fromY = childBox.centerY;
                        toY = parentBox.centerY;
                        
                        // Try get specific column Y
                        const colY1 = getColumnPosition(childEl, rel.fromColumns[0]);
                        const colY2 = getColumnPosition(parentEl, rel.toColumns[0]);
                        
                        if (colY1 !== null) fromY = colY1;
                        if (colY2 !== null) toY = colY2;
                        
                        if (parentIsRight) {
                            fromX = childBox.right;
                            toX = parentBox.left;
                            fromControlX = fromX + 50;
                            toControlX = toX - 50;
                        } else {
                            fromX = childBox.left;
                            toX = parentBox.right;
                            fromControlX = fromX - 50;
                            toControlX = toX + 50;
                        }
                        
                        // Calculate Bezier curve
                        // M start C c1 c2 end
                        const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                        
                        // Adjust constraints for multiple lines?
                        // Simple cubic bezier is best for side-to-side
                        const d = \`M \${fromX} \${fromY} C \${fromControlX} \${fromY}, \${toControlX} \${toY}, \${toX} \${toY}\`;
                        
                        path.setAttribute('d', d);
                        path.setAttribute('stroke', '#3794ff');
                        path.setAttribute('stroke-width', '2');
                        path.setAttribute('fill', 'none');
                        path.setAttribute('marker-end', 'url(#arrowhead)');
                        path.setAttribute('class', 'relationship-line');
                        
                        const title = document.createElementNS('http://www.w3.org/2000/svg', 'title');
                        title.textContent = rel.constraintName + ': ' + 
                            childTableName + '.' + rel.fromColumns.join(',') + ' -> ' + 
                            parentTableName + '.' + rel.toColumns.join(',');
                        path.appendChild(title);
                        
                        svg.appendChild(path);
                    });
                }
                
                // Dragging Logic
                let dragging = null;
                let dragStartX = 0, dragStartY = 0;
                let elemStartLeft = 0, elemStartTop = 0;
                
                document.querySelectorAll('.table-box').forEach(table => {
                    const header = table.querySelector('.table-header');
                    if (header) {
                        header.addEventListener('mousedown', function(e) {
                            e.preventDefault();
                            dragging = table;
                            dragStartX = e.pageX;
                            dragStartY = e.pageY;
                            elemStartLeft = parseInt(table.style.left) || 0;
                            elemStartTop = parseInt(table.style.top) || 0;
                            table.style.zIndex = '1000';
                            document.body.style.cursor = 'grabbing';
                        });
                    }
                });
                
                document.addEventListener('mousemove', function(e) {
                    if (!dragging) return;
                    const dx = e.pageX - dragStartX;
                    const dy = e.pageY - dragStartY;
                    dragging.style.left = Math.max(0, elemStartLeft + dx) + 'px';
                    dragging.style.top = Math.max(0, elemStartTop + dy) + 'px';
                    drawRelationships();
                });
                
                document.addEventListener('mouseup', function() {
                    if (dragging) {
                        dragging.style.zIndex = '';
                        document.body.style.cursor = '';
                        dragging = null;
                    }
                });
                
                requestAnimationFrame(() => setTimeout(drawRelationships, 50));
                window.addEventListener('resize', drawRelationships);
            })();
        `}_getStyles(){return`
            :root {
                --bg-color: var(--vscode-editor-background);
                --fg-color: var(--vscode-editor-foreground);
                --border-color: var(--vscode-widget-border);
                --header-bg: var(--vscode-sideBarSectionHeader-background);
                --table-bg: var(--vscode-editorWidget-background);
                --pk-color: #f1c40f;
                --fk-color: #3498db;
            }

            body {
                font-family: var(--vscode-font-family);
                font-size: var(--vscode-font-size);
                color: var(--fg-color);
                background-color: var(--bg-color);
                margin: 0;
                padding: 20px;
            }

            .header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 15px;
                padding-bottom: 10px;
                border-bottom: 1px solid var(--border-color);
            }

            .header h1 {
                margin: 0;
                font-size: 1.4em;
            }

            .header-info {
                display: flex;
                gap: 15px;
                align-items: center;
            }

            .badge {
                background-color: var(--vscode-badge-background);
                color: var(--vscode-badge-foreground);
                padding: 4px 10px;
                border-radius: 12px;
                font-size: 0.9em;
            }

            .stat {
                color: var(--vscode-descriptionForeground);
                font-size: 0.9em;
            }

            .legend {
                display: flex;
                gap: 20px;
                margin-bottom: 15px;
                font-size: 0.9em;
            }

            .legend-item {
                display: flex;
                align-items: center;
                gap: 5px;
            }

            .no-relationships {
                background-color: rgba(255, 193, 7, 0.2);
                padding: 15px;
                border-radius: 6px;
                margin-bottom: 15px;
            }

            .no-relationships p {
                margin: 5px 0;
            }

            .erd-container {
                background-color: var(--header-bg);
                border: 1px solid var(--border-color);
                border-radius: 6px;
                overflow: auto;
                margin-bottom: 20px;
                min-height: 400px;
            }

            .erd-canvas {
                position: relative;
                min-width: 1200px;
                min-height: 600px;
            }

            .relationships-svg {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                pointer-events: none;
            }

            .relationship-line {
                pointer-events: stroke;
            }

            .relationship-line:hover {
                stroke-width: 3;
            }

            .table-box {
                position: absolute;
                width: 250px;
                background-color: var(--table-bg);
                border: 2px solid var(--border-color);
                border-radius: 6px;
                overflow: hidden;
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
            }

            .table-header {
                background-color: var(--vscode-textLink-foreground);
                color: white;
                padding: 8px 12px;
                font-weight: bold;
                cursor: move;
                font-size: 0.95em;
            }

            .table-columns {
                max-height: 200px;
                overflow-y: auto;
            }

            .table-column {
                display: flex;
                align-items: center;
                padding: 4px 10px;
                border-bottom: 1px solid var(--border-color);
                font-size: 0.85em;
                gap: 6px;
            }

            .table-column:last-child {
                border-bottom: none;
            }

            .table-column.pk {
                background-color: rgba(241, 196, 15, 0.1);
            }

            .table-column.fk {
                background-color: rgba(52, 152, 219, 0.1);
            }

            .col-icons {
                font-size: 0.8em;
            }

            .col-name {
                flex: 1;
                font-weight: 500;
            }

            .col-type {
                color: var(--vscode-descriptionForeground);
                font-size: 0.85em;
            }

            .more-columns {
                padding: 6px 10px;
                color: var(--vscode-descriptionForeground);
                font-style: italic;
                font-size: 0.85em;
            }

            .relationships-table {
                margin-top: 20px;
            }

            .relationships-table h2 {
                font-size: 1.1em;
                margin-bottom: 10px;
            }

            table {
                width: 100%;
                border-collapse: collapse;
            }

            th, td {
                padding: 10px;
                text-align: left;
                border: 1px solid var(--border-color);
            }

            th {
                background-color: var(--header-bg);
                font-weight: 600;
            }

            code {
                font-family: var(--vscode-editor-font-family);
                background-color: var(--vscode-textCodeBlock-background);
                padding: 2px 6px;
                border-radius: 3px;
            }
        `}}});var d3={};_t(d3,{SessionMonitorView:()=>Ry});function Xye(){let t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let r=0;r<32;r++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}var nn,Ry,f3=H(()=>{"use strict";nn=q(require("vscode"));lr();Ry=class t{constructor(e,r,n,i){this._disposables=[];this._panel=e,this._extensionUri=r,this._context=n,this._connectionManager=i,this._update(),this._panel.onDidDispose(()=>this.dispose(),null,this._disposables),this._panel.webview.onDidReceiveMessage(async s=>{switch(s.command){case"refresh":await this._fetchAndSendData();return;case"killSession":await this._killSession(s.sessionId);return;case"toggleAutoRefresh":this._toggleAutoRefresh(s.enabled);return}},null,this._disposables),this._fetchAndSendData()}static{this.viewType="netezza.sessionMonitor"}static createOrShow(e,r,n){let i=nn.window.activeTextEditor?nn.ViewColumn.Beside:void 0;if(t.currentPanel){t.currentPanel._panel.reveal(i),t.currentPanel._fetchAndSendData();return}let s=nn.window.createWebviewPanel(t.viewType,"Session Monitor",i||nn.ViewColumn.One,{enableScripts:!0,localResourceRoots:[nn.Uri.joinPath(e,"media")],retainContextWhenHidden:!0});t.currentPanel=new t(s,e,r,n)}dispose(){for(t.currentPanel=void 0,this._refreshInterval&&clearInterval(this._refreshInterval),this._panel.dispose();this._disposables.length;){let e=this._disposables.pop();e&&e.dispose()}}_toggleAutoRefresh(e){e?this._refreshInterval=setInterval(()=>{this._fetchAndSendData()},3e4):this._refreshInterval&&(clearInterval(this._refreshInterval),this._refreshInterval=void 0)}async _killSession(e){try{if(await nn.window.showWarningMessage(`Are you sure you want to terminate session ${e}?`,{modal:!0},"Yes, Kill Session")!=="Yes, Kill Session")return;let n=`DROP SESSION ${e}`;await oe(this._context,n,!0,this._connectionManager,void 0),nn.window.showInformationMessage(`Session ${e} terminated successfully.`),await this._fetchAndSendData()}catch(r){nn.window.showErrorMessage(`Failed to kill session: ${r instanceof Error?r.message:String(r)}`)}}async _fetchAndSendData(){this._panel.webview.postMessage({command:"setLoading",loading:!0});try{let[e,r,n,i]=await Promise.all([this._fetchSessions(),this._fetchQueries(),this._fetchStorage(),this._fetchResources()]);this._panel.webview.postMessage({command:"updateData",data:{sessions:e,queries:r,storage:n,resources:i}})}catch(e){this._panel.webview.postMessage({command:"error",text:`Failed to fetch data: ${e instanceof Error?e.message:String(e)}`})}finally{this._panel.webview.postMessage({command:"setLoading",loading:!1})}}async _fetchSessions(){let e=`
            SELECT ID, PID, USERNAME, DBNAME, TYPE, CONNTIME, STATUS, 
                   SUBSTR(COMMAND, 1, 200) AS COMMAND, PRIORITY, CID, IPADDR, CLIENT_OS_USERNAME
            FROM _V_SESSION
            ORDER BY CONNTIME DESC
        `;try{let r=await oe(this._context,e,!0,this._connectionManager,void 0);return!r||!r.data?[]:Ee(r)}catch(r){return console.error("Error fetching sessions:",r),[]}}async _fetchQueries(){let e=`
            SELECT QS_SESSIONID, QS_PLANID, QS_CLIENTID, QS_CLIIPADDR,
                   SUBSTR(QS_SQL, 1, 300) AS QS_SQL, 
                   QS_STATE, QS_TSUBMIT, QS_TSTART, 
                   QS_PRIORITY, QS_PRITXT, QS_ESTCOST, 
                   QS_ESTDISK, QS_ESTMEM, QS_SNIPPETS, QS_CURSNIPT,
                   QS_RESROWS, QS_RESBYTES
            FROM _V_QRYSTAT
            ORDER BY QS_TSTART DESC
            LIMIT 100
        `;try{let r=await oe(this._context,e,!0,this._connectionManager,void 0);return!r||!r.data?[]:Ee(r)}catch(r){return console.error("Error fetching queries:",r),[]}}async _fetchStorage(){let e=`
            SELECT O.DBNAME AS DATABASE, TS.SCHEMA, 
                   ROUND(SUM(TS.ALLOCATED_BYTES) / 1024.0 / 1024.0, 2) AS ALLOC_MB,
                   ROUND(SUM(TS.USED_BYTES) / 1024.0 / 1024.0, 2) AS USED_MB,
                   ROUND(SUM(TS.SKEW * TS.USED_BYTES) / NULLIF(SUM(TS.USED_BYTES), 0), 2) AS AVG_SKEW,
                   COUNT(*) AS TABLE_COUNT
            FROM _V_TABLE_STORAGE_STAT TS
            JOIN _V_OBJECT_DATA O ON TS.OBJID = O.OBJID
            GROUP BY O.DBNAME, TS.SCHEMA
            ORDER BY USED_MB DESC
        `;try{let r=await oe(this._context,e,!0,this._connectionManager,void 0);return!r||!r.data?[]:Ee(r)}catch(r){return console.error("Error fetching storage:",r),[]}}async _fetchResources(){let e=[],r=[],n=null;try{let i=await oe(this._context,"SELECT * FROM _V_SCHED_GRA_EXT LIMIT 50",!0,this._connectionManager,void 0);i&&i.data&&(e=Ee(i))}catch(i){console.warn("_V_SCHED_GRA_EXT not available:",i)}try{let i=await oe(this._context,"SELECT * FROM _V_SYSTEM_UTIL ORDER BY 1 DESC LIMIT 50",!0,this._connectionManager,void 0);i&&i.data&&(r=Ee(i))}catch(i){console.warn("_V_SYSTEM_UTIL not available:",i)}try{let i=await oe(this._context,`SELECT 
                    ROUND(AVG(HOST_CPU) * 100, 1) AS AVG_HOST_CPU_PCT,
                    ROUND(AVG(SPU_CPU) * 100, 1) AS AVG_SPU_CPU_PCT,
                    ROUND(AVG(HOST_DISK) * 100, 1) AS AVG_DISK_PCT,
                    ROUND(AVG(HOST_MEMORY) * 100, 1) AS AVG_MEMORY_PCT,
                    ROUND(AVG(HOST_FABRIC) * 100, 1) AS AVG_FABRIC_PCT,
                    COUNT(*) AS SAMPLE_COUNT
                FROM _V_SYSTEM_UTIL`,!0,this._connectionManager,void 0);if(i&&i.data){let s=Ee(i);n=s.length>0?s[0]:null}}catch(i){console.warn("_V_SYSTEM_UTIL summary not available:",i)}return{gra:e,systemUtil:r,sysUtilSummary:n}}_update(){let e=this._panel.webview;this._panel.title="Session Monitor",this._panel.webview.html=this._getHtmlForWebview(e)}_getHtmlForWebview(e){let r=e.asWebviewUri(nn.Uri.joinPath(this._extensionUri,"media","sessionMonitor.js")),n=e.asWebviewUri(nn.Uri.joinPath(this._extensionUri,"media","sessionMonitor.css")),i=Xye();return`<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Security-Policy" content="default-src 'none'; style-src ${e.cspSource} 'unsafe-inline'; script-src 'nonce-${i}';">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="${n}" rel="stylesheet">
    <title>Session Monitor</title>
</head>
<body>
    <div class="container">
        <div class="header">
            <h2>\u{1F5A5}\uFE0F Session Monitor Dashboard</h2>
            <div class="header-actions">
                <label class="auto-refresh">
                    <input type="checkbox" id="autoRefresh"> Auto-refresh (30s)
                </label>
                <button id="refreshBtn" class="btn btn-primary">\u{1F504} Refresh</button>
            </div>
        </div>

        <div class="loading-overlay" id="loadingOverlay">
            <div class="spinner"></div>
            <span>Loading data...</span>
        </div>

        <div class="tabs">
            <button class="tab-btn active" data-tab="sessions">\u{1F4CB} Sessions</button>
            <button class="tab-btn" data-tab="queries">\u23F1\uFE0F Running Queries</button>
            <button class="tab-btn" data-tab="storage">\u{1F4BE} Storage</button>
            <button class="tab-btn" data-tab="resources">\u{1F4CA} Resources</button>
        </div>

        <div class="tab-content" id="sessions">
            <div class="section-header">
                <h3>Active Sessions</h3>
                <span class="count" id="sessionCount">0 sessions</span>
            </div>
            <div class="table-container">
                <table id="sessionsTable">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>PID</th>
                            <th>User</th>
                            <th>Database</th>
                            <th>Type</th>
                            <th>Connected</th>
                            <th>Status</th>
                            <th>IP</th>
                            <th>Command</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>

        <div class="tab-content hidden" id="queries">
            <div class="section-header">
                <h3>Running Queries</h3>
                <span class="count" id="queryCount">0 queries</span>
            </div>
            <div class="table-container">
                <table id="queriesTable">
                    <thead>
                        <tr>
                            <th>Session</th>
                            <th>Plan ID</th>
                            <th>State</th>
                            <th>Priority</th>
                            <th>Submitted</th>
                            <th>Started</th>
                            <th>Est. Cost</th>
                            <th>Rows</th>
                            <th>SQL</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>

        <div class="tab-content hidden" id="storage">
            <div class="section-header">
                <h3>Storage by Schema</h3>
                <span class="count" id="storageCount">0 schemas</span>
            </div>
            <div class="table-container">
                <table id="storageTable">
                    <thead>
                        <tr>
                            <th>Database</th>
                            <th>Schema</th>
                            <th>Allocated (MB)</th>
                            <th>Used (MB)</th>
                            <th>Usage %</th>
                            <th>Avg Skew</th>
                            <th>Tables</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>

        <div class="tab-content hidden" id="resources">
            <div class="section-header">
                <h3>Resource Utilization</h3>
            </div>
            <div class="resources-grid">
                <div class="resource-section">
                    <h4>GRA Scheduler</h4>
                    <div id="graTable" class="table-container small"></div>
                </div>
                <div class="resource-section">
                    <h4>System Utilization</h4>
                    <div id="sysUtilSummary"></div>
                    <div id="sysUtilTable" class="table-container small"></div>
                </div>
            </div>
        </div>
    </div>

    <script nonce="${i}" src="${r}"></script>
</body>
</html>`}}});var R3={};_t(R3,{XlsxWriter:()=>US,default:()=>zye});var p3,S3,Ay,T3,jye,US,zye,A3=H(()=>{"use strict";p3=q(require("fs")),S3=q(MC()),Ay=require("stream");vC();T3=(()=>{let t=[];for(let r=65;r<91;r++)t.push(String.fromCharCode(r));let e=[];for(let r of t)for(let n=65;n<91;n++)e.push(r+String.fromCharCode(n));return t.push(...e),t})(),jye=/[\\/*?[\]:]/g,US=class{constructor(e){this.sheetCount=0;this.sheetList=[];this.sstArray=[];this.sstMap=new Map;this.sstCntAll=0;this.colWidths=[];this._autofilterIsOn=!1;this.filePath=e,this.output=p3.createWriteStream(e),this.archive=(0,S3.default)("zip"),this.archive.pipe(this.output),this._oaEpoch=Date.UTC(1899,11,30)}_getColumnLetter(e){return e<T3.length?T3[e]:"A"}_sanitizeSheetName(e){if(!e||typeof e!="string")return`Sheet${this.sheetCount+1}`;let r=e.replace(jye,"_");return r.length>31&&(r=r.substring(0,31)),r.trim().length===0&&(r=`Sheet${this.sheetCount+1}`),r}_escapeSheetNameForXml(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}_formatSheetNameForFormula(e){return/[\s\-+=()!@#$%^&]/.test(e)||/^[0-9]/.test(e)?`'${e.replace(/'/g,"''")}'`:e}addSheet(e,r=!1){let n=this._sanitizeSheetName(e);this.sheetCount++;let i=`rId${this.sheetCount}`,s=`sheet${this.sheetCount}.xml`;this.sheetList.push({name:n,pathInArchive:`xl/worksheets/${s}`,hidden:r,nameInArchive:s,sheetId:this.sheetCount,rId:i,filterHeaderRange:null})}_needsEscape(e){for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);if(n===38||n===60||n===62||n===34||n===39||n>=0&&n<=8||n===11||n===12||n>=14&&n<=31)return!0}return!1}_escape(e){return typeof e!="string"||!this._needsEscape(e)?e:e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/[\x00-\x08\x0b\x0c\x0e-\x1f]/g,"")}writeSheet(e,r=null,n=!0){let i=new ss,s=0;e.length>0?s=e[0].length:r&&(s=r.length),this.colWidths=new Array(s).fill(-1);let o=new Array(s);for(let u=0;u<s;u++)o[u]=this._getColumnLetter(u);if(r)for(let u=0;u<s;u++){let E=1.25*(r[u]?r[u].length:0)+2;E>80&&(E=80),this.colWidths[u]<E&&(this.colWidths[u]=E)}for(let u=0;u<Math.min(e.length,100);u++){let d=e[u];for(let E=0;E<d.length;E++){let f=d[E];if(f==null)continue;let h=1.25*(f instanceof Date?10:f.toString().length)+2;h>80&&(h=80),this.colWidths[E]<h&&(this.colWidths[E]=h)}}i.writeString('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>'),i.writeString('<worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships">');let a=e.length+(r?1:0);a>0&&s>0?i.writeString(`<dimension ref="A1:${o[s-1]}${a}"/>`):i.writeString('<dimension ref="A1"/>');let l=this.sheetCount===1;n&&r?l?i.writeString('<sheetViews><sheetView tabSelected="1" workbookViewId="0"><pane ySplit="1" topLeftCell="A2" activePane="bottomLeft" state="frozen" /><selection pane="bottomLeft" /></sheetView></sheetViews><sheetFormatPr defaultRowHeight="15"/>'):i.writeString('<sheetViews><sheetView workbookViewId="0"><pane ySplit="1" topLeftCell="A2" activePane="bottomLeft" state="frozen" /><selection pane="bottomLeft" /></sheetView></sheetViews><sheetFormatPr defaultRowHeight="15"/>'):l?i.writeString('<sheetViews><sheetView tabSelected="1" workbookViewId="0"/></sheetViews><sheetFormatPr defaultRowHeight="15"/>'):i.writeString('<sheetViews><sheetView workbookViewId="0"/></sheetViews><sheetFormatPr defaultRowHeight="15"/>'),i.writeString("<cols>");for(let u=0;u<s;u++){let d=this.colWidths[u]>0?this.colWidths[u]:10;i.writeString(`<col min="${u+1}" max="${u+1}" width="${d}" bestFit="1" customWidth="1" />`)}i.writeString("</cols><sheetData>");let c=0;if(r){c++,i.writeString(`<row r="${c}">`);for(let u=0;u<r.length;u++)this._writeStringCell(i,r[u],o[u],c);i.writeString("</row>")}for(let u=0;u<e.length;u++){c++,i.writeString(`<row r="${c}">`);let d=e[u];for(let E=0;E<d.length;E++){let f=d[E];if(f==null)continue;let T=o[E];if(typeof f=="number")Number.isFinite(f)?i.writeString(`<c r="${T}${c}"><v>${f}</v></c>`):this._writeStringCell(i,f.toString(),T,c);else if(typeof f=="bigint")this._writeStringCell(i,f.toString(),T,c);else if(typeof f=="boolean")i.writeString(`<c r="${T}${c}" t="b"><v>${f?1:0}</v></c>`);else if(f instanceof Date){let h=this._toOADate(f);Number.isFinite(h)?i.writeString(`<c r="${T}${c}" s="1"><v>${h}</v></c>`):this._writeStringCell(i,f.toString(),T,c)}else this._writeStringCell(i,f.toString(),T,c)}i.writeString("</row>")}if(i.writeString("</sheetData>"),n&&r&&s>0){this._autofilterIsOn=!0;let u=`A1:${o[s-1]}${a}`;i.writeString(`<autoFilter ref="${u}"/>`);let d=this.sheetList[this.sheetCount-1],E=this._formatSheetNameForFormula(d.name);d.filterHeaderRange=`${E}!$A$1:$${o[s-1]}$${a}`}i.writeString("</worksheet>"),this.archive.append(Ay.Readable.from(i.getChunks()),{name:this.sheetList[this.sheetCount-1].pathInArchive})}_writeStringCell(e,r,n,i){let s=this.sstMap.get(r);s===void 0&&(s=this.sstArray.length,this.sstArray.push(r),this.sstMap.set(r,s)),this.sstCntAll++,e.writeString(`<c r="${n}${i}" t="s"><v>${s}</v></c>`)}_toOADate(e){let r=e.getTimezoneOffset()*6e4;return(e.getTime()-r-this._oaEpoch)/864e5}finalize(){return new Promise((e,r)=>{try{this._writeSharedStrings(),this._writeStyles(),this._writeWorkbook(),this._writeContentTypes(),this._writeRels(),this.output.on("close",()=>{e()}),this.archive.on("error",n=>{r(n)}),this.archive.finalize()}catch(n){r(n)}})}_writeSharedStrings(){let e=new ss;e.writeString('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>'),e.writeString(`<sst xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" count="${this.sstCntAll}" uniqueCount="${this.sstArray.length}">`);for(let r=0;r<this.sstArray.length;r++){let n=this.sstArray[r],i=this._escape(n);i.length>0&&(i[0]===" "||i[i.length-1]===" "||/[\t\n\r]/.test(i))?e.writeString(`<si><t xml:space="preserve">${i}</t></si>`):e.writeString(`<si><t>${i}</t></si>`)}e.writeString("</sst>"),this.archive.append(Ay.Readable.from(e.getChunks()),{name:"xl/sharedStrings.xml"})}_writeStyles(){this.archive.append(`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main">
<numFmts count="1">
    <numFmt numFmtId="164" formatCode="yyyy\\-mm\\-dd\\ hh:mm:ss"/>
</numFmts>
<fonts count="1">
<font><sz val="11"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font>
</fonts>
<fills count="2">
<fill><patternFill patternType="none"/></fill>
<fill><patternFill patternType="gray125"/></fill>
</fills>
<borders count="1">
<border><left/><right/><top/><bottom/><diagonal/></border>
</borders>
<cellStyleXfs count="1">
<xf numFmtId="0" fontId="0" fillId="0" borderId="0"/>
</cellStyleXfs>
<cellXfs count="3">
<xf numFmtId="0" fontId="0" fillId="0" borderId="0" xfId="0"/>
<xf numFmtId="14" fontId="0" fillId="0" borderId="0" xfId="0" applyNumberFormat="1"/>
<xf numFmtId="164" fontId="0" fillId="0" borderId="0" xfId="0" applyNumberFormat="1"/>
</cellXfs>
<cellStyles count="1">
<cellStyle name="Normal" xfId="0" builtinId="0"/>
</cellStyles>
<dxfs count="0"/>
<tableStyles count="0" defaultTableStyle="TableStyleMedium2" defaultPivotStyle="PivotStyleLight16"/>
</styleSheet>`,{name:"xl/styles.xml"})}_writeWorkbook(){let e=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<workbook xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships">
<sheets>`;for(let r of this.sheetList){let n=r.hidden?' state="hidden"':"",i=this._escapeSheetNameForXml(r.name);e+=`<sheet name="${i}" sheetId="${r.sheetId}"${n} r:id="${r.rId}"/>`}if(e+="</sheets>",this._autofilterIsOn){e+="<definedNames>";for(let r of this.sheetList)if(r.filterHeaderRange){let n=r.sheetId-1,i=this._escape(r.filterHeaderRange);e+=`<definedName name="_xlnm._FilterDatabase" localSheetId="${n}" hidden="1">${i}</definedName>`}e+="</definedNames>"}e+="</workbook>",this.archive.append(e,{name:"xl/workbook.xml"})}_writeContentTypes(){let e=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types">
<Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml"/>
<Default Extension="xml" ContentType="application/xml"/>
<Override PartName="/xl/workbook.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"/>
<Override PartName="/xl/styles.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"/>
<Override PartName="/xl/sharedStrings.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml"/>`;for(let r of this.sheetList)e+=`<Override PartName="/${r.pathInArchive}" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"/>`;e+="</Types>",this.archive.append(e,{name:"[Content_Types].xml"})}_writeRels(){this.archive.append(`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">
<Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.xml"/>
</Relationships>`,{name:"_rels/.rels"});let r=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">`;for(let i of this.sheetList)r+=`<Relationship Id="${i.rId}" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="worksheets/${i.nameInArchive}"/>`;let n=this.sheetList.length+1;r+=`<Relationship Id="rId${n++}" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Target="styles.xml"/>`,r+=`<Relationship Id="rId${n++}" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings" Target="sharedStrings.xml"/>`,r+="</Relationships>",this.archive.append(r,{name:"xl/_rels/workbook.xml.rels"})}},zye=US});var g3={};_t(g3,{copyFileToClipboard:()=>I3,exportCsvToXlsx:()=>Zye,getTempFilePath:()=>ebe});function Jye(t){if(typeof t=="string"&&t.length>0&&/^-?\d+(\.\d+)?$/.test(t)){let e=parseFloat(t);if(Number.isFinite(e))return e}return t}function Qye(t){return t.map(Jye)}async function Zye(t,e,r=!1,n={source:"Unknown"},i){try{i&&i("Initializing XLSX writer...");let s=new Kye(e),o=0,a=0,l=[],c=(f,T)=>{let h=f.split(/\r?\n/),p=A=>{let g=[],w=0,I=!1;for(let b=0;b<A.length;b++)if(A[b]==='"')I=!I;else if(A[b]===","&&!I){let P=A.substring(w,b);P.startsWith('"')&&P.endsWith('"')&&(P=P.substring(1,P.length-1).replace(/""/g,'"')),g.push(P),w=b+1}let D=A.substring(w);return D.startsWith('"')&&D.endsWith('"')&&(D=D.substring(1,D.length-1).replace(/""/g,'"')),g.push(D),g},S=0;for(;S<h.length&&!h[S].trim();)S++;if(S>=h.length)return;let m=p(h[S]);if(m.length===0)return;a=Math.max(a,m.length);let R=[];for(let A=S+1;A<h.length;A++){let g=h[A];if(!g.trim())continue;let w=p(g);R.push(Qye(w))}s.addSheet(T),s.writeSheet(R,m,!0),o+=R.length};if(Array.isArray(t)?(i&&i(`Processing ${t.length} result sets...`),t.forEach((f,T)=>{let h=f.name||`Result ${T+1}`;i&&i(`Processing sheet "${h}"...`),c(f.csv,h),f.sql&&l.push({name:h,sql:f.sql})})):(i&&i("Reading CSV content..."),c(t,"Query Results"),n.sql&&l.push({name:"Query Results",sql:n.sql})),l.length>0){s.addSheet("SQL Code");let f=[];l.forEach(T=>{f.push([`--- SQL for ${T.name} ---`]),T.sql.split(`
`).forEach(h=>{f.push([h])}),f.push([""])}),s.writeSheet(f,null,!1)}i&&i("Finalizing XLSX file..."),await s.finalize();let d=m3.statSync(e).size/(1024*1024);i&&(i("XLSX file created successfully"),i(`  - Rows: ${o.toLocaleString()}`),i(`  - File size: ${d.toFixed(1)} MB`));let E={success:!0,message:`Successfully exported ${o} rows to ${e}`,details:{rows_exported:o,columns:a,file_size_mb:parseFloat(d.toFixed(1)),file_path:e}};if(r){i&&i("Copying file to clipboard...");let f=await I3(e);E.details&&(E.details.clipboard_success=f)}return E}catch(s){return{success:!1,message:`Export failed: ${s instanceof Error?s.message:String(s)}`}}}async function I3(t){return BS.platform()!=="win32"?(console.error("Clipboard file copy is only supported on Windows"),!1):new Promise(e=>{try{let r=gc.normalize(gc.resolve(t)),n=`Set-Clipboard -Path "${r.replace(/"/g,'`"')}"`,i=(0,_3.spawn)("powershell.exe",["-NoProfile","-NonInteractive","-Command",n]),s="";i.stderr.on("data",o=>{s+=o.toString()}),i.on("close",o=>{o!==0?(console.error(`PowerShell clipboard copy failed: ${s}`),e(!1)):(console.log(`File copied to clipboard: ${r}`),e(!0))}),i.on("error",o=>{console.error(`Error spawning PowerShell: ${o.message}`),e(!1)})}catch(r){let n=r instanceof Error?r.message:String(r);console.error(`Error copying file to clipboard: ${n}`),e(!1)}})}function ebe(){let t=BS.tmpdir(),r=`netezza_export_${Date.now()}.xlsx`;return gc.join(t,r)}var m3,gc,BS,_3,Kye,N3=H(()=>{"use strict";m3=q(require("fs")),gc=q(require("path")),BS=q(require("os")),_3=require("child_process"),Kye=(A3(),Ma(R3)).default});var L3={};_t(L3,{ClipboardDataProcessor:()=>FS,importClipboardDataToNetezza:()=>ibe});function tbe(t){let e=String(t).trim();return e=e.replace(/[^0-9a-zA-Z]+/g,"_").toUpperCase(),(!e||/^\d/.test(e)||e.startsWith("_"))&&(e="COL"+(e.startsWith("_")?"":"_")+e),e}function rbe(t,e,r){let n=String(t).trim();for(let i of r)n=n.split(i).join(`${e}${i}`);return n}function nbe(t,e,r,n,i){let s=rbe(t,n,i);return e<r.length&&r[e].currentType.dbType==="DATETIME"&&(s=s.replace("T"," ")),s}async function ibe(t,e,r,n,i){let s=Date.now(),o=null,a=null;try{if(!t)return{success:!1,message:"Target table name is required"};if(!e||!e.host)return{success:!1,message:"Connection details are required"};i?.("Starting clipboard import process..."),i?.(`  Target table: ${t}`),i?.(`  Format preference: ${r||"auto-detect"}`);let l=new FS,[c,u]=await l.processClipboardData(r,i);if(!c||!c.length)return{success:!1,message:"No data found in clipboard"};if(c.length<2)return{success:!1,message:"Clipboard data must contain at least headers and one data row"};i?.(`  Detected format: ${u}`),i?.(`  Rows: ${c.length}`),i?.(`  Columns: ${c[0].length}`);let d=c[0].map(te=>tbe(te)),E=c.slice(1);i?.("Detecting decimal separator...");let f=".",T=0,h=0,p=E.slice(0,100);for(let te of p)for(let Be of te){if(!Be||!Be.trim())continue;let fe=Be.trim();/^\d+\.\d+$/.test(fe)&&T++,/^\d+,\d+$/.test(fe)&&h++}h>T&&h>0&&(f=","),i?.(`Detected decimal separator: '${f}'`),i?.("Analyzing clipboard data types...");let S=d.map(()=>new _c(f));for(let te=0;te<E.length;te++){let Be=E[te];for(let fe=0;fe<Be.length;fe++)fe<S.length&&Be[fe]&&Be[fe].trim()&&S[fe].refreshCurrentType(Be[fe].trim());(te+1)%1e3===0&&(i?.(`Analyzed ${(te+1).toLocaleString()} rows...`,void 0,!1),await w3())}i?.(`Analysis complete: ${E.length.toLocaleString()} data rows`);let m=C3.join(require("os").tmpdir(),"netezza_clipboard_logs");GS.existsSync(m)||GS.mkdirSync(m,{recursive:!0});let R="	",A="\\t",g=`
`,w="\\n",I="\\",D=[I,g,"\r",R];i?.("Preparing in-memory data stream...");let b=new _y(E,S,R,g,I,D,f,i);o=`virtual_clipboard_import_${Date.now()}_${Math.floor(Math.random()*1e3)}.txt`,i?.(`Registered virtual stream: ${o}`);let P=Ir();P&&P.registerImportStream?P.registerImportStream(o,b):i?.("Warning: NzConnection driver does not support stream registry. Import might fail.");let M=[];for(let te=0;te<d.length;te++)M.push(`        ${d[te]} ${S[te].currentType.toString()}`);let B=m.replace(/\\/g,"/"),G=`CREATE TABLE ${t} AS 
(
    SELECT * FROM EXTERNAL '${o}'
    (
${M.join(`,
`)}
    )
    USING
    (
        REMOTESOURCE 'jdbc'
        DELIMITER '${A}'
        RecordDelim '${w}'
        ESCAPECHAR '${I}'
        NULLVALUE ''
        ENCODING 'utf-8'
        TIMESTYLE '24HOUR'
        SKIPROWS 0
        MAXERRORS 10
        LOGDIR '${B}'
    )
) DISTRIBUTE ON RANDOM;`;i?.("Generated SQL:"),i?.(G),i?.("Connecting to Netezza...");let V={host:e.host,port:e.port||5480,database:e.database,user:e.user,password:e.password},J=Ir();a=new J(V),await a.connect();try{i?.("Executing CREATE TABLE with EXTERNAL clipboard data...");let te=a.createCommand(G);te.commandTimeout=3600,await te.execute(),i?.("Clipboard import completed successfully")}finally{await a.close()}let re=(Date.now()-s)/1e3;return{success:!0,message:"Clipboard import completed successfully",details:{targetTable:t,format:u,rowsProcessed:E.length,rowsInserted:E.length,processingTime:`${re.toFixed(1)}s`,columns:d.length,detectedDelimiter:R}}}catch(l){let c=(Date.now()-s)/1e3;return{success:!1,message:`Clipboard import failed: ${l instanceof Error?l.message:String(l)}`,details:{processingTime:`${c.toFixed(1)}s`}}}finally{if(a&&a._connected)try{await a.close()}catch{}if(o){let l=Ir();l&&l.unregisterImportStream&&l.unregisterImportStream(o)}}}var GS,C3,y3,b3,w3,FS,_y,D3=H(()=>{"use strict";GS=q(require("fs")),C3=q(require("path")),y3=q(require("vscode")),b3=require("stream");gS();w3=()=>new Promise(t=>setTimeout(t,0)),FS=class{async processXmlSpreadsheet(e,r){r?.("Processing XML Spreadsheet data...");let n=[],i=0,s=[],o=0,a=e.match(/ExpandedColumnCount="(\d+)"/);a&&(i=parseInt(a[1]),r?.(`Table has ${i} columns`));let l=e.match(/ExpandedRowCount="(\d+)"/);l&&r?.(`Table has ${l[1]} rows`);let c=/<Row[^>]*>([\s\S]*?)<\/Row>/gi,u;for(;(u=c.exec(e))!==null;){let d=u[1];s=new Array(i).fill("");let E,f=0,T=/<Cell(?:[^>]*ss:Index="(\d+)")?[^>]*>(?:[\s\S]*?<Data[^>]*(?:\s+ss:Type="([^"]*)")?[^>]*>([^<]*)<\/Data>)?[\s\S]*?<\/Cell>/gi;for(;(E=T.exec(d))!==null;){E[1]&&(f=parseInt(E[1])-1);let h=E[2]||"",p=E[3]||"";h==="Boolean"&&(p=p==="0"?"False":"True"),f<i&&(s[f]=p),f++}s.some(h=>h.trim())&&n.push([...s]),o++,o%1e4===0&&(r?.(`Analyzed ${o.toLocaleString()} rows...`,void 0,!1),await w3())}return r?.(`XML processing complete: ${n.length} rows, ${i} columns`),n}async processTextData(e,r){if(r?.("Processing text data..."),!e.trim())return[];let n=e.split(`
`);for(;n.length&&!n[n.length-1].trim();)n.pop();if(!n.length)return[];let i=["	",",",";","|"],s={};for(let c of i){let u=[];for(let d of n.slice(0,Math.min(5,n.length)))if(d.trim()){let E=d.split(c);u.push(E.length)}if(u.length){let d=u.reduce((f,T)=>f+T,0)/u.length,E=u.reduce((f,T)=>f+Math.pow(T-d,2),0)/u.length;s[c]=[d,-E]}}let o="	";Object.keys(s).length&&(o=Object.keys(s).reduce((c,u)=>{let[d,E]=s[c]||[0,0],[f,T]=s[u];return f>d||f===d&&T>E?u:c},"	")),r?.(`Auto-detected delimiter: '${o==="	"?"\\t":o}'`);let a=[],l=0;for(let c of n)if(c.trim()){let u=c.split(o).map(d=>d.trim());a.push(u),l=Math.max(l,u.length)}for(let c of a)for(;c.length<l;)c.push("");return r?.(`Text processing complete: ${a.length} rows, ${l} columns`),a}async getClipboardText(){return await y3.env.clipboard.readText()}async processClipboardData(e,r){r?.("Getting clipboard data...");let n=await this.getClipboardText();if(!n)throw new Error("No data found in clipboard");r?.(`Data size: ${n.length} characters`);let i="TEXT";e==="XML Spreadsheet"||!e&&n.includes("<Workbook")&&n.includes("<Worksheet")?i="XML Spreadsheet":e==="TEXT"&&(i="TEXT"),r?.(`Detected format: ${i}`);let s;return i==="XML Spreadsheet"?s=await this.processXmlSpreadsheet(n,r):s=await this.processTextData(n,r),r?.(`Processed ${s.length} rows`),s.length&&r?.(`Columns per row: ${s[0].length}`),[s,i]}};_y=class extends b3.Readable{constructor(r,n,i,s,o,a,l,c){super();this.currentIndex=0;this.byteLength=0;this.lastReportedIndex=-1;this.lastReportTime=0;this.lastReportedMessage="";this.rows=r,this.dataTypes=n,this.delimiter=i,this.recordDelim=s,this.escapechar=o,this.valuesToEscape=a,this.decimalDelimiter=l,this.progressCallback=c,this.currentIndex=0,this.lastReportedIndex=-1,this.lastReportTime=0,this.lastReportedMessage="";try{this.byteLength=r.reduce((u,d)=>{let E=d.reduce((f,T)=>f+(T?T.length:0),0);return u+E+d.length},0)}catch{this.byteLength=1024*1024}}_read(r){try{let n=!0;for(;n&&this.currentIndex<this.rows.length;){let a=this.rows[this.currentIndex].map((l,c)=>{let u=nbe(l,c,this.dataTypes,this.escapechar,this.valuesToEscape);if(this.dataTypes[c].currentType.dbType==="NUMERIC"&&this.decimalDelimiter===","&&(u=u.replace(",",".")),this.dataTypes[c].currentType.dbType==="DATETIME"){let d=u.match(/^(\d{1,2})\.(\d{1,2})\.(\d{4})(?:\s+(\d{1,2}):(\d{1,2})(?::(\d{1,2}))?)?$/);if(d){let E=d[1],f=d[2],T=d[3],h=d[4]||"00",p=d[5]||"00",S=d[6]||"00";u=`${T}-${f}-${E} ${h}:${p}:${S}`}}return u}).join(this.delimiter)+this.recordDelim;n=this.push(Buffer.from(a,"utf8")),this.currentIndex++}let i=this.rows.length;if(this.currentIndex>this.lastReportedIndex){let s=Date.now();if(this.currentIndex>=i||s-this.lastReportTime>=1e3){let c=`Streaming data: ${Math.floor(this.currentIndex/i*100)}% (${this.currentIndex.toLocaleString()}/${i.toLocaleString()})`,d=(this.currentIndex-(this.lastReportedIndex<0?0:this.lastReportedIndex))/i*100;c!==this.lastReportedMessage&&(this.progressCallback?.(c,d,!1),this.lastReportedIndex=this.currentIndex,this.lastReportTime=s,this.lastReportedMessage=c)}}this.currentIndex>=this.rows.length&&this.push(null)}catch(n){this.emit("error",n)}}}});var x,sbe,obe,abe,gy,lbe,cbe,ube,dbe,HS,fbe,xt=H(()=>{x=t=>t.flatMap(sbe),sbe=t=>HS(abe(t)).map(obe),obe=t=>t.replace(/ +/g," ").trim(),abe=t=>({type:"mandatory_block",items:gy(t,0)[0]}),gy=(t,e,r)=>{let n=[];for(;t[e];){let[i,s]=lbe(t,e);if(n.push(i),e=s,t[e]==="|")e++;else if(t[e]==="}"||t[e]==="]"){if(r!==t[e])throw new Error(`Unbalanced parenthesis in: ${t}`);return e++,[n,e]}else if(e===t.length){if(r)throw new Error(`Unbalanced parenthesis in: ${t}`);return[n,e]}else throw new Error(`Unexpected "${t[e]}"`)}return[n,e]},lbe=(t,e)=>{let r=[];for(;;){let[n,i]=cbe(t,e);if(n)r.push(n),e=i;else break}return r.length===1?[r[0],e]:[{type:"concatenation",items:r},e]},cbe=(t,e)=>{if(t[e]==="{")return ube(t,e+1);if(t[e]==="[")return dbe(t,e+1);{let r="";for(;t[e]&&/[A-Za-z0-9_ ]/.test(t[e]);)r+=t[e],e++;return[r,e]}},ube=(t,e)=>{let[r,n]=gy(t,e,"}");return[{type:"mandatory_block",items:r},n]},dbe=(t,e)=>{let[r,n]=gy(t,e,"]");return[{type:"optional_block",items:r},n]},HS=t=>{if(typeof t=="string")return[t];if(t.type==="concatenation")return t.items.map(HS).reduce(fbe,[""]);if(t.type==="mandatory_block")return t.items.flatMap(HS);if(t.type==="optional_block")return["",...t.items.flatMap(HS)];throw new Error(`Unknown node type: ${t}`)},fbe=(t,e)=>{let r=[];for(let n of t)for(let i of e)r.push(n+i);return r}});var $,Ny,yi,Nc,$n,WS,U3,gn=H(()=>{(function(t){t.QUOTED_IDENTIFIER="QUOTED_IDENTIFIER",t.IDENTIFIER="IDENTIFIER",t.STRING="STRING",t.VARIABLE="VARIABLE",t.RESERVED_DATA_TYPE="RESERVED_DATA_TYPE",t.RESERVED_PARAMETERIZED_DATA_TYPE="RESERVED_PARAMETERIZED_DATA_TYPE",t.RESERVED_KEYWORD="RESERVED_KEYWORD",t.RESERVED_FUNCTION_NAME="RESERVED_FUNCTION_NAME",t.RESERVED_KEYWORD_PHRASE="RESERVED_KEYWORD_PHRASE",t.RESERVED_DATA_TYPE_PHRASE="RESERVED_DATA_TYPE_PHRASE",t.RESERVED_SET_OPERATION="RESERVED_SET_OPERATION",t.RESERVED_CLAUSE="RESERVED_CLAUSE",t.RESERVED_SELECT="RESERVED_SELECT",t.RESERVED_JOIN="RESERVED_JOIN",t.ARRAY_IDENTIFIER="ARRAY_IDENTIFIER",t.ARRAY_KEYWORD="ARRAY_KEYWORD",t.CASE="CASE",t.END="END",t.WHEN="WHEN",t.ELSE="ELSE",t.THEN="THEN",t.LIMIT="LIMIT",t.BETWEEN="BETWEEN",t.AND="AND",t.OR="OR",t.XOR="XOR",t.OPERATOR="OPERATOR",t.COMMA="COMMA",t.ASTERISK="ASTERISK",t.PROPERTY_ACCESS_OPERATOR="PROPERTY_ACCESS_OPERATOR",t.OPEN_PAREN="OPEN_PAREN",t.CLOSE_PAREN="CLOSE_PAREN",t.LINE_COMMENT="LINE_COMMENT",t.BLOCK_COMMENT="BLOCK_COMMENT",t.DISABLE_COMMENT="DISABLE_COMMENT",t.NUMBER="NUMBER",t.NAMED_PARAMETER="NAMED_PARAMETER",t.QUOTED_PARAMETER="QUOTED_PARAMETER",t.NUMBERED_PARAMETER="NUMBERED_PARAMETER",t.POSITIONAL_PARAMETER="POSITIONAL_PARAMETER",t.CUSTOM_PARAMETER="CUSTOM_PARAMETER",t.DELIMITER="DELIMITER",t.EOF="EOF"})($=$||($={}));Ny=t=>({type:$.EOF,raw:"\xABEOF\xBB",text:"\xABEOF\xBB",start:t}),yi=Ny(1/0),Nc=t=>e=>e.type===t.type&&e.text===t.text,$n={ARRAY:Nc({text:"ARRAY",type:$.RESERVED_DATA_TYPE}),BY:Nc({text:"BY",type:$.RESERVED_KEYWORD}),SET:Nc({text:"SET",type:$.RESERVED_CLAUSE}),STRUCT:Nc({text:"STRUCT",type:$.RESERVED_DATA_TYPE}),WINDOW:Nc({text:"WINDOW",type:$.RESERVED_CLAUSE}),VALUES:Nc({text:"VALUES",type:$.RESERVED_CLAUSE})},WS=t=>t===$.RESERVED_DATA_TYPE||t===$.RESERVED_KEYWORD||t===$.RESERVED_FUNCTION_NAME||t===$.RESERVED_KEYWORD_PHRASE||t===$.RESERVED_DATA_TYPE_PHRASE||t===$.RESERVED_CLAUSE||t===$.RESERVED_SELECT||t===$.RESERVED_SET_OPERATION||t===$.RESERVED_JOIN||t===$.ARRAY_KEYWORD||t===$.CASE||t===$.END||t===$.WHEN||t===$.ELSE||t===$.THEN||t===$.LIMIT||t===$.BETWEEN||t===$.AND||t===$.OR||t===$.XOR,U3=t=>t===$.AND||t===$.OR||t===$.XOR});var B3,F3=H(()=>{B3=["KEYS.NEW_KEYSET","KEYS.ADD_KEY_FROM_RAW_BYTES","AEAD.DECRYPT_BYTES","AEAD.DECRYPT_STRING","AEAD.ENCRYPT","KEYS.KEYSET_CHAIN","KEYS.KEYSET_FROM_JSON","KEYS.KEYSET_TO_JSON","KEYS.ROTATE_KEYSET","KEYS.KEYSET_LENGTH","ANY_VALUE","ARRAY_AGG","AVG","CORR","COUNT","COUNTIF","COVAR_POP","COVAR_SAMP","MAX","MIN","ST_CLUSTERDBSCAN","STDDEV_POP","STDDEV_SAMP","STRING_AGG","SUM","VAR_POP","VAR_SAMP","ANY_VALUE","ARRAY_AGG","ARRAY_CONCAT_AGG","AVG","BIT_AND","BIT_OR","BIT_XOR","COUNT","COUNTIF","LOGICAL_AND","LOGICAL_OR","MAX","MIN","STRING_AGG","SUM","APPROX_COUNT_DISTINCT","APPROX_QUANTILES","APPROX_TOP_COUNT","APPROX_TOP_SUM","ARRAY_CONCAT","ARRAY_LENGTH","ARRAY_TO_STRING","GENERATE_ARRAY","GENERATE_DATE_ARRAY","GENERATE_TIMESTAMP_ARRAY","ARRAY_REVERSE","OFFSET","SAFE_OFFSET","ORDINAL","SAFE_ORDINAL","BIT_COUNT","PARSE_BIGNUMERIC","PARSE_NUMERIC","SAFE_CAST","CURRENT_DATE","EXTRACT","DATE","DATE_ADD","DATE_SUB","DATE_DIFF","DATE_TRUNC","DATE_FROM_UNIX_DATE","FORMAT_DATE","LAST_DAY","PARSE_DATE","UNIX_DATE","CURRENT_DATETIME","DATETIME","EXTRACT","DATETIME_ADD","DATETIME_SUB","DATETIME_DIFF","DATETIME_TRUNC","FORMAT_DATETIME","LAST_DAY","PARSE_DATETIME","ERROR","EXTERNAL_QUERY","S2_CELLIDFROMPOINT","S2_COVERINGCELLIDS","ST_ANGLE","ST_AREA","ST_ASBINARY","ST_ASGEOJSON","ST_ASTEXT","ST_AZIMUTH","ST_BOUNDARY","ST_BOUNDINGBOX","ST_BUFFER","ST_BUFFERWITHTOLERANCE","ST_CENTROID","ST_CENTROID_AGG","ST_CLOSESTPOINT","ST_CLUSTERDBSCAN","ST_CONTAINS","ST_CONVEXHULL","ST_COVEREDBY","ST_COVERS","ST_DIFFERENCE","ST_DIMENSION","ST_DISJOINT","ST_DISTANCE","ST_DUMP","ST_DWITHIN","ST_ENDPOINT","ST_EQUALS","ST_EXTENT","ST_EXTERIORRING","ST_GEOGFROM","ST_GEOGFROMGEOJSON","ST_GEOGFROMTEXT","ST_GEOGFROMWKB","ST_GEOGPOINT","ST_GEOGPOINTFROMGEOHASH","ST_GEOHASH","ST_GEOMETRYTYPE","ST_INTERIORRINGS","ST_INTERSECTION","ST_INTERSECTS","ST_INTERSECTSBOX","ST_ISCOLLECTION","ST_ISEMPTY","ST_LENGTH","ST_MAKELINE","ST_MAKEPOLYGON","ST_MAKEPOLYGONORIENTED","ST_MAXDISTANCE","ST_NPOINTS","ST_NUMGEOMETRIES","ST_NUMPOINTS","ST_PERIMETER","ST_POINTN","ST_SIMPLIFY","ST_SNAPTOGRID","ST_STARTPOINT","ST_TOUCHES","ST_UNION","ST_UNION_AGG","ST_WITHIN","ST_X","ST_Y","FARM_FINGERPRINT","MD5","SHA1","SHA256","SHA512","HLL_COUNT.INIT","HLL_COUNT.MERGE","HLL_COUNT.MERGE_PARTIAL","HLL_COUNT.EXTRACT","MAKE_INTERVAL","EXTRACT","JUSTIFY_DAYS","JUSTIFY_HOURS","JUSTIFY_INTERVAL","JSON_EXTRACT","JSON_QUERY","JSON_EXTRACT_SCALAR","JSON_VALUE","JSON_EXTRACT_ARRAY","JSON_QUERY_ARRAY","JSON_EXTRACT_STRING_ARRAY","JSON_VALUE_ARRAY","TO_JSON_STRING","ABS","SIGN","IS_INF","IS_NAN","IEEE_DIVIDE","RAND","SQRT","POW","POWER","EXP","LN","LOG","LOG10","GREATEST","LEAST","DIV","SAFE_DIVIDE","SAFE_MULTIPLY","SAFE_NEGATE","SAFE_ADD","SAFE_SUBTRACT","MOD","ROUND","TRUNC","CEIL","CEILING","FLOOR","COS","COSH","ACOS","ACOSH","SIN","SINH","ASIN","ASINH","TAN","TANH","ATAN","ATANH","ATAN2","RANGE_BUCKET","FIRST_VALUE","LAST_VALUE","NTH_VALUE","LEAD","LAG","PERCENTILE_CONT","PERCENTILE_DISC","NET.IP_FROM_STRING","NET.SAFE_IP_FROM_STRING","NET.IP_TO_STRING","NET.IP_NET_MASK","NET.IP_TRUNC","NET.IPV4_FROM_INT64","NET.IPV4_TO_INT64","NET.HOST","NET.PUBLIC_SUFFIX","NET.REG_DOMAIN","RANK","DENSE_RANK","PERCENT_RANK","CUME_DIST","NTILE","ROW_NUMBER","SESSION_USER","CORR","COVAR_POP","COVAR_SAMP","STDDEV_POP","STDDEV_SAMP","STDDEV","VAR_POP","VAR_SAMP","VARIANCE","ASCII","BYTE_LENGTH","CHAR_LENGTH","CHARACTER_LENGTH","CHR","CODE_POINTS_TO_BYTES","CODE_POINTS_TO_STRING","CONCAT","CONTAINS_SUBSTR","ENDS_WITH","FORMAT","FROM_BASE32","FROM_BASE64","FROM_HEX","INITCAP","INSTR","LEFT","LENGTH","LPAD","LOWER","LTRIM","NORMALIZE","NORMALIZE_AND_CASEFOLD","OCTET_LENGTH","REGEXP_CONTAINS","REGEXP_EXTRACT","REGEXP_EXTRACT_ALL","REGEXP_INSTR","REGEXP_REPLACE","REGEXP_SUBSTR","REPLACE","REPEAT","REVERSE","RIGHT","RPAD","RTRIM","SAFE_CONVERT_BYTES_TO_STRING","SOUNDEX","SPLIT","STARTS_WITH","STRPOS","SUBSTR","SUBSTRING","TO_BASE32","TO_BASE64","TO_CODE_POINTS","TO_HEX","TRANSLATE","TRIM","UNICODE","UPPER","CURRENT_TIME","TIME","EXTRACT","TIME_ADD","TIME_SUB","TIME_DIFF","TIME_TRUNC","FORMAT_TIME","PARSE_TIME","CURRENT_TIMESTAMP","EXTRACT","STRING","TIMESTAMP","TIMESTAMP_ADD","TIMESTAMP_SUB","TIMESTAMP_DIFF","TIMESTAMP_TRUNC","FORMAT_TIMESTAMP","PARSE_TIMESTAMP","TIMESTAMP_SECONDS","TIMESTAMP_MILLIS","TIMESTAMP_MICROS","UNIX_SECONDS","UNIX_MILLIS","UNIX_MICROS","GENERATE_UUID","COALESCE","IF","IFNULL","NULLIF","AVG","BIT_AND","BIT_OR","BIT_XOR","CORR","COUNT","COVAR_POP","COVAR_SAMP","EXACT_COUNT_DISTINCT","FIRST","GROUP_CONCAT","GROUP_CONCAT_UNQUOTED","LAST","MAX","MIN","NEST","NTH","QUANTILES","STDDEV","STDDEV_POP","STDDEV_SAMP","SUM","TOP","UNIQUE","VARIANCE","VAR_POP","VAR_SAMP","BIT_COUNT","BOOLEAN","BYTES","CAST","FLOAT","HEX_STRING","INTEGER","STRING","COALESCE","GREATEST","IFNULL","IS_INF","IS_NAN","IS_EXPLICITLY_DEFINED","LEAST","NVL","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","DATE","DATE_ADD","DATEDIFF","DAY","DAYOFWEEK","DAYOFYEAR","FORMAT_UTC_USEC","HOUR","MINUTE","MONTH","MSEC_TO_TIMESTAMP","NOW","PARSE_UTC_USEC","QUARTER","SEC_TO_TIMESTAMP","SECOND","STRFTIME_UTC_USEC","TIME","TIMESTAMP","TIMESTAMP_TO_MSEC","TIMESTAMP_TO_SEC","TIMESTAMP_TO_USEC","USEC_TO_TIMESTAMP","UTC_USEC_TO_DAY","UTC_USEC_TO_HOUR","UTC_USEC_TO_MONTH","UTC_USEC_TO_WEEK","UTC_USEC_TO_YEAR","WEEK","YEAR","FORMAT_IP","PARSE_IP","FORMAT_PACKED_IP","PARSE_PACKED_IP","JSON_EXTRACT","JSON_EXTRACT_SCALAR","ABS","ACOS","ACOSH","ASIN","ASINH","ATAN","ATANH","ATAN2","CEIL","COS","COSH","DEGREES","EXP","FLOOR","LN","LOG","LOG2","LOG10","PI","POW","RADIANS","RAND","ROUND","SIN","SINH","SQRT","TAN","TANH","REGEXP_MATCH","REGEXP_EXTRACT","REGEXP_REPLACE","CONCAT","INSTR","LEFT","LENGTH","LOWER","LPAD","LTRIM","REPLACE","RIGHT","RPAD","RTRIM","SPLIT","SUBSTR","UPPER","TABLE_DATE_RANGE","TABLE_DATE_RANGE_STRICT","TABLE_QUERY","HOST","DOMAIN","TLD","AVG","COUNT","MAX","MIN","STDDEV","SUM","CUME_DIST","DENSE_RANK","FIRST_VALUE","LAG","LAST_VALUE","LEAD","NTH_VALUE","NTILE","PERCENT_RANK","PERCENTILE_CONT","PERCENTILE_DISC","RANK","RATIO_TO_REPORT","ROW_NUMBER","CURRENT_USER","EVERY","FROM_BASE64","HASH","FARM_FINGERPRINT","IF","POSITION","SHA1","SOME","TO_BASE64","BQ.JOBS.CANCEL","BQ.REFRESH_MATERIALIZED_VIEW","OPTIONS","PIVOT","UNPIVOT"]});var G3,H3,W3=H(()=>{G3=["ALL","AND","ANY","AS","ASC","ASSERT_ROWS_MODIFIED","AT","BETWEEN","BY","CASE","CAST","COLLATE","CONTAINS","CREATE","CROSS","CUBE","CURRENT","DEFAULT","DEFINE","DESC","DISTINCT","ELSE","END","ENUM","ESCAPE","EXCEPT","EXCLUDE","EXISTS","EXTRACT","FALSE","FETCH","FOLLOWING","FOR","FROM","FULL","GROUP","GROUPING","GROUPS","HASH","HAVING","IF","IGNORE","IN","INNER","INTERSECT","INTO","IS","JOIN","LATERAL","LEFT","LIMIT","LOOKUP","MERGE","NATURAL","NEW","NO","NOT","NULL","NULLS","OF","ON","OR","ORDER","OUTER","OVER","PARTITION","PRECEDING","PROTO","RANGE","RECURSIVE","RESPECT","RIGHT","ROLLUP","ROWS","SELECT","SET","SOME","TABLE","TABLESAMPLE","THEN","TO","TREAT","TRUE","UNBOUNDED","UNION","UNNEST","USING","WHEN","WHERE","WINDOW","WITH","WITHIN","SAFE","LIKE","COPY","CLONE","IN","OUT","INOUT","RETURNS","LANGUAGE","CASCADE","RESTRICT","DETERMINISTIC"],H3=["ARRAY","BOOL","BYTES","DATE","DATETIME","GEOGRAPHY","INTERVAL","INT64","INT","SMALLINT","INTEGER","BIGINT","TINYINT","BYTEINT","NUMERIC","DECIMAL","BIGNUMERIC","BIGDECIMAL","FLOAT64","STRING","STRUCT","TIME","TIMEZONE"]});function Abe(t){return mbe(_be(t))}function mbe(t){let e=yi;return t.map(r=>r.text==="OFFSET"&&e.text==="["?(e=r,Object.assign(Object.assign({},r),{type:$.RESERVED_FUNCTION_NAME})):(e=r,r))}function _be(t){var e;let r=[];for(let n=0;n<t.length;n++){let i=t[n];if(($n.ARRAY(i)||$n.STRUCT(i))&&((e=t[n+1])===null||e===void 0?void 0:e.text)==="<"){let s=Ibe(t,n+1),o=t.slice(n,s+1);r.push({type:$.IDENTIFIER,raw:o.map($3("raw")).join(""),text:o.map($3("text")).join(""),start:i.start}),n=s}else r.push(i)}return r}function Ibe(t,e){let r=0;for(let n=e;n<t.length;n++){let i=t[n];if(i.text==="<"?r++:i.text===">"?r--:i.text===">>"&&(r-=2),r===0)return n}return t.length-1}var Ebe,hbe,k3,Oy,Tbe,pbe,Sbe,Rbe,kS,$3,Cy=H(()=>{xt();gn();F3();W3();Ebe=x(["SELECT [ALL | DISTINCT] [AS STRUCT | AS VALUE]"]),hbe=x(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY","HAVING","QUALIFY","WINDOW","PARTITION BY","ORDER BY","LIMIT","OFFSET","OMIT RECORD IF","INSERT [INTO]","VALUES","SET","MERGE [INTO]","WHEN [NOT] MATCHED [BY SOURCE | BY TARGET] [THEN]","UPDATE SET","CLUSTER BY","FOR SYSTEM_TIME AS OF","WITH CONNECTION","WITH PARTITION COLUMNS","REMOTE WITH CONNECTION"]),k3=x(["CREATE [OR REPLACE] [TEMP|TEMPORARY|SNAPSHOT|EXTERNAL] TABLE [IF NOT EXISTS]"]),Oy=x(["CREATE [OR REPLACE] [MATERIALIZED] VIEW [IF NOT EXISTS]","UPDATE","DELETE [FROM]","DROP [SNAPSHOT | EXTERNAL] TABLE [IF EXISTS]","ALTER TABLE [IF EXISTS]","ADD COLUMN [IF NOT EXISTS]","DROP COLUMN [IF EXISTS]","RENAME TO","ALTER COLUMN [IF EXISTS]","SET DEFAULT COLLATE","SET OPTIONS","DROP NOT NULL","SET DATA TYPE","ALTER SCHEMA [IF EXISTS]","ALTER [MATERIALIZED] VIEW [IF EXISTS]","ALTER BI_CAPACITY","TRUNCATE TABLE","CREATE SCHEMA [IF NOT EXISTS]","DEFAULT COLLATE","CREATE [OR REPLACE] [TEMP|TEMPORARY|TABLE] FUNCTION [IF NOT EXISTS]","CREATE [OR REPLACE] PROCEDURE [IF NOT EXISTS]","CREATE [OR REPLACE] ROW ACCESS POLICY [IF NOT EXISTS]","GRANT TO","FILTER USING","CREATE CAPACITY","AS JSON","CREATE RESERVATION","CREATE ASSIGNMENT","CREATE SEARCH INDEX [IF NOT EXISTS]","DROP SCHEMA [IF EXISTS]","DROP [MATERIALIZED] VIEW [IF EXISTS]","DROP [TABLE] FUNCTION [IF EXISTS]","DROP PROCEDURE [IF EXISTS]","DROP ROW ACCESS POLICY","DROP ALL ROW ACCESS POLICIES","DROP CAPACITY [IF EXISTS]","DROP RESERVATION [IF EXISTS]","DROP ASSIGNMENT [IF EXISTS]","DROP SEARCH INDEX [IF EXISTS]","DROP [IF EXISTS]","GRANT","REVOKE","DECLARE","EXECUTE IMMEDIATE","LOOP","END LOOP","REPEAT","END REPEAT","WHILE","END WHILE","BREAK","LEAVE","CONTINUE","ITERATE","FOR","END FOR","BEGIN","BEGIN TRANSACTION","COMMIT TRANSACTION","ROLLBACK TRANSACTION","RAISE","RETURN","CALL","ASSERT","EXPORT DATA"]),Tbe=x(["UNION {ALL | DISTINCT}","EXCEPT DISTINCT","INTERSECT DISTINCT"]),pbe=x(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN"]),Sbe=x(["TABLESAMPLE SYSTEM","ANY TYPE","ALL COLUMNS","NOT DETERMINISTIC","{ROWS | RANGE} BETWEEN","IS [NOT] DISTINCT FROM"]),Rbe=x([]),kS={name:"bigquery",tokenizerOptions:{reservedSelect:Ebe,reservedClauses:[...hbe,...Oy,...k3],reservedSetOperations:Tbe,reservedJoins:pbe,reservedKeywordPhrases:Sbe,reservedDataTypePhrases:Rbe,reservedKeywords:G3,reservedDataTypes:H3,reservedFunctionNames:B3,extraParens:["[]"],stringTypes:[{quote:'""".."""',prefixes:["R","B","RB","BR"]},{quote:"'''..'''",prefixes:["R","B","RB","BR"]},'""-bs',"''-bs",{quote:'""-raw',prefixes:["R","B","RB","BR"],requirePrefix:!0},{quote:"''-raw",prefixes:["R","B","RB","BR"],requirePrefix:!0}],identTypes:["``"],identChars:{dashes:!0},paramTypes:{positional:!0,named:["@"],quoted:["@"]},variableTypes:[{regex:String.raw`@@\w+`}],lineCommentTypes:["--","#"],operators:["&","|","^","~",">>","<<","||","=>"],postProcess:Abe},formatOptions:{onelineClauses:[...k3,...Oy],tabularOnelineClauses:Oy}};$3=t=>e=>e.type===$.IDENTIFIER||e.type===$.COMMA?e[t]+" ":e[t]});var Y3,V3=H(()=>{Y3=["ARRAY_AGG","AVG","CORRELATION","COUNT","COUNT_BIG","COVARIANCE","COVARIANCE_SAMP","CUME_DIST","GROUPING","LISTAGG","MAX","MEDIAN","MIN","PERCENTILE_CONT","PERCENTILE_DISC","PERCENT_RANK","REGR_AVGX","REGR_AVGY","REGR_COUNT","REGR_INTERCEPT","REGR_ICPT","REGR_R2","REGR_SLOPE","REGR_SXX","REGR_SXY","REGR_SYY","STDDEV","STDDEV_SAMP","SUM","VARIANCE","VARIANCE_SAMP","XMLAGG","XMLGROUP","ABS","ABSVAL","ACOS","ADD_DAYS","ADD_HOURS","ADD_MINUTES","ADD_MONTHS","ADD_SECONDS","ADD_YEARS","AGE","ARRAY_DELETE","ARRAY_FIRST","ARRAY_LAST","ARRAY_NEXT","ARRAY_PRIOR","ASCII","ASCII_STR","ASIN","ATAN","ATAN2","ATANH","BITAND","BITANDNOT","BITOR","BITXOR","BITNOT","BPCHAR","BSON_TO_JSON","BTRIM","CARDINALITY","CEILING","CEIL","CHARACTER_LENGTH","CHR","COALESCE","COLLATION_KEY","COLLATION_KEY_BIT","COMPARE_DECFLOAT","CONCAT","COS","COSH","COT","CURSOR_ROWCOUNT","DATAPARTITIONNUM","DATE_PART","DATE_TRUNC","DAY","DAYNAME","DAYOFMONTH","DAYOFWEEK","DAYOFWEEK_ISO","DAYOFYEAR","DAYS","DAYS_BETWEEN","DAYS_TO_END_OF_MONTH","DBPARTITIONNUM","DECFLOAT","DECFLOAT_FORMAT","DECODE","DECRYPT_BIN","DECRYPT_CHAR","DEGREES","DEREF","DIFFERENCE","DIGITS","DOUBLE_PRECISION","EMPTY_BLOB","EMPTY_CLOB","EMPTY_DBCLOB","EMPTY_NCLOB","ENCRYPT","EVENT_MON_STATE","EXP","EXTRACT","FIRST_DAY","FLOOR","FROM_UTC_TIMESTAMP","GENERATE_UNIQUE","GETHINT","GREATEST","HASH","HASH4","HASH8","HASHEDVALUE","HEX","HEXTORAW","HOUR","HOURS_BETWEEN","IDENTITY_VAL_LOCAL","IFNULL","INITCAP","INSERT","INSTR","INSTR2","INSTR4","INSTRB","INTNAND","INTNOR","INTNXOR","INTNNOT","ISNULL","JSON_ARRAY","JSON_OBJECT","JSON_QUERY","JSON_TO_BSON","JSON_VALUE","JULIAN_DAY","LAST_DAY","LCASE","LEAST","LEFT","LENGTH","LENGTH2","LENGTH4","LENGTHB","LN","LOCATE","LOCATE_IN_STRING","LOG10","LONG_VARCHAR","LONG_VARGRAPHIC","LOWER","LPAD","LTRIM","MAX","MAX_CARDINALITY","MICROSECOND","MIDNIGHT_SECONDS","MIN","MINUTE","MINUTES_BETWEEN","MOD","MONTH","MONTHNAME","MONTHS_BETWEEN","MULTIPLY_ALT","NEXT_DAY","NEXT_MONTH","NEXT_QUARTER","NEXT_WEEK","NEXT_YEAR","NORMALIZE_DECFLOAT","NOW","NULLIF","NVL","NVL2","OCTET_LENGTH","OVERLAY","PARAMETER","POSITION","POSSTR","POW","POWER","QUANTIZE","QUARTER","QUOTE_IDENT","QUOTE_LITERAL","RADIANS","RAISE_ERROR","RAND","RANDOM","RAWTOHEX","REC2XML","REGEXP_COUNT","REGEXP_EXTRACT","REGEXP_INSTR","REGEXP_LIKE","REGEXP_MATCH_COUNT","REGEXP_REPLACE","REGEXP_SUBSTR","REPEAT","REPLACE","RID","RID_BIT","RIGHT","ROUND","ROUND_TIMESTAMP","RPAD","RTRIM","SECLABEL","SECLABEL_BY_NAME","SECLABEL_TO_CHAR","SECOND","SECONDS_BETWEEN","SIGN","SIN","SINH","SOUNDEX","SPACE","SQRT","STRIP","STRLEFT","STRPOS","STRRIGHT","SUBSTR","SUBSTR2","SUBSTR4","SUBSTRB","SUBSTRING","TABLE_NAME","TABLE_SCHEMA","TAN","TANH","THIS_MONTH","THIS_QUARTER","THIS_WEEK","THIS_YEAR","TIMESTAMP_FORMAT","TIMESTAMP_ISO","TIMESTAMPDIFF","TIMEZONE","TO_CHAR","TO_CLOB","TO_DATE","TO_HEX","TO_MULTI_BYTE","TO_NCHAR","TO_NCLOB","TO_NUMBER","TO_SINGLE_BYTE","TO_TIMESTAMP","TO_UTC_TIMESTAMP","TOTALORDER","TRANSLATE","TRIM","TRIM_ARRAY","TRUNC_TIMESTAMP","TRUNCATE","TRUNC","TYPE_ID","TYPE_NAME","TYPE_SCHEMA","UCASE","UNICODE_STR","UPPER","VALUE","VARCHAR_BIT_FORMAT","VARCHAR_FORMAT","VARCHAR_FORMAT_BIT","VERIFY_GROUP_FOR_USER","VERIFY_ROLE_FOR_USER","VERIFY_TRUSTED_CONTEXT_ROLE_FOR_USER","WEEK","WEEK_ISO","WEEKS_BETWEEN","WIDTH_BUCKET","XMLATTRIBUTES","XMLCOMMENT","XMLCONCAT","XMLDOCUMENT","XMLELEMENT","XMLFOREST","XMLNAMESPACES","XMLPARSE","XMLPI","XMLQUERY","XMLROW","XMLSERIALIZE","XMLTEXT","XMLVALIDATE","XMLXSROBJECTID","XSLTRANSFORM","YEAR","YEARS_BETWEEN","YMD_BETWEEN","BASE_TABLE","JSON_TABLE","UNNEST","XMLTABLE","RANK","DENSE_RANK","NTILE","LAG","LEAD","ROW_NUMBER","FIRST_VALUE","LAST_VALUE","NTH_VALUE","RATIO_TO_REPORT","CAST"]});var q3,X3,j3=H(()=>{q3=["ACTIVATE","ADD","AFTER","ALIAS","ALL","ALLOCATE","ALLOW","ALTER","AND","ANY","AS","ASENSITIVE","ASSOCIATE","ASUTIME","AT","ATTRIBUTES","AUDIT","AUTHORIZATION","AUX","AUXILIARY","BEFORE","BEGIN","BETWEEN","BINARY","BUFFERPOOL","BY","CACHE","CALL","CALLED","CAPTURE","CARDINALITY","CASCADED","CASE","CAST","CHECK","CLONE","CLOSE","CLUSTER","COLLECTION","COLLID","COLUMN","COMMENT","COMMIT","CONCAT","CONDITION","CONNECT","CONNECTION","CONSTRAINT","CONTAINS","CONTINUE","COUNT","COUNT_BIG","CREATE","CROSS","CURRENT","CURRENT_DATE","CURRENT_LC_CTYPE","CURRENT_PATH","CURRENT_SCHEMA","CURRENT_SERVER","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_TIMEZONE","CURRENT_USER","CURSOR","CYCLE","DATA","DATABASE","DATAPARTITIONNAME","DATAPARTITIONNUM","DAY","DAYS","DB2GENERAL","DB2GENRL","DB2SQL","DBINFO","DBPARTITIONNAME","DBPARTITIONNUM","DEALLOCATE","DECLARE","DEFAULT","DEFAULTS","DEFINITION","DELETE","DENSERANK","DENSE_RANK","DESCRIBE","DESCRIPTOR","DETERMINISTIC","DIAGNOSTICS","DISABLE","DISALLOW","DISCONNECT","DISTINCT","DO","DOCUMENT","DROP","DSSIZE","DYNAMIC","EACH","EDITPROC","ELSE","ELSEIF","ENABLE","ENCODING","ENCRYPTION","END","END-EXEC","ENDING","ERASE","ESCAPE","EVERY","EXCEPT","EXCEPTION","EXCLUDING","EXCLUSIVE","EXECUTE","EXISTS","EXIT","EXPLAIN","EXTENDED","EXTERNAL","EXTRACT","FENCED","FETCH","FIELDPROC","FILE","FINAL","FIRST1","FOR","FOREIGN","FREE","FROM","FULL","FUNCTION","GENERAL","GENERATED","GET","GLOBAL","GO","GOTO","GRANT","GRAPHIC","GROUP","HANDLER","HASH","HASHED_VALUE","HAVING","HINT","HOLD","HOUR","HOURS","IDENTITY","IF","IMMEDIATE","IMPORT","IN","INCLUDING","INCLUSIVE","INCREMENT","INDEX","INDICATOR","INDICATORS","INF","INFINITY","INHERIT","INNER","INOUT","INSENSITIVE","INSERT","INTEGRITY","INTERSECT","INTO","IS","ISNULL","ISOBID","ISOLATION","ITERATE","JAR","JAVA","JOIN","KEEP","KEY","LABEL","LANGUAGE","LAST3","LATERAL","LC_CTYPE","LEAVE","LEFT","LIKE","LIMIT","LINKTYPE","LOCAL","LOCALDATE","LOCALE","LOCALTIME","LOCALTIMESTAMP","LOCATOR","LOCATORS","LOCK","LOCKMAX","LOCKSIZE","LOOP","MAINTAINED","MATERIALIZED","MAXVALUE","MICROSECOND","MICROSECONDS","MINUTE","MINUTES","MINVALUE","MODE","MODIFIES","MONTH","MONTHS","NAN","NEW","NEW_TABLE","NEXTVAL","NO","NOCACHE","NOCYCLE","NODENAME","NODENUMBER","NOMAXVALUE","NOMINVALUE","NONE","NOORDER","NORMALIZED","NOT2","NOTNULL","NULL","NULLS","NUMPARTS","OBID","OF","OFF","OFFSET","OLD","OLD_TABLE","ON","OPEN","OPTIMIZATION","OPTIMIZE","OPTION","OR","ORDER","OUT","OUTER","OVER","OVERRIDING","PACKAGE","PADDED","PAGESIZE","PARAMETER","PART","PARTITION","PARTITIONED","PARTITIONING","PARTITIONS","PASSWORD","PATH","PERCENT","PIECESIZE","PLAN","POSITION","PRECISION","PREPARE","PREVVAL","PRIMARY","PRIQTY","PRIVILEGES","PROCEDURE","PROGRAM","PSID","PUBLIC","QUERY","QUERYNO","RANGE","RANK","READ","READS","RECOVERY","REFERENCES","REFERENCING","REFRESH","RELEASE","RENAME","REPEAT","RESET","RESIGNAL","RESTART","RESTRICT","RESULT","RESULT_SET_LOCATOR","RETURN","RETURNS","REVOKE","RIGHT","ROLE","ROLLBACK","ROUND_CEILING","ROUND_DOWN","ROUND_FLOOR","ROUND_HALF_DOWN","ROUND_HALF_EVEN","ROUND_HALF_UP","ROUND_UP","ROUTINE","ROW","ROWNUMBER","ROWS","ROWSET","ROW_NUMBER","RRN","RUN","SAVEPOINT","SCHEMA","SCRATCHPAD","SCROLL","SEARCH","SECOND","SECONDS","SECQTY","SECURITY","SELECT","SENSITIVE","SEQUENCE","SESSION","SESSION_USER","SET","SIGNAL","SIMPLE","SNAN","SOME","SOURCE","SPECIFIC","SQL","SQLID","STACKED","STANDARD","START","STARTING","STATEMENT","STATIC","STATMENT","STAY","STOGROUP","STORES","STYLE","SUBSTRING","SUMMARY","SYNONYM","SYSFUN","SYSIBM","SYSPROC","SYSTEM","SYSTEM_USER","TABLE","TABLESPACE","THEN","TO","TRANSACTION","TRIGGER","TRIM","TRUNCATE","TYPE","UNDO","UNION","UNIQUE","UNTIL","UPDATE","USAGE","USER","USING","VALIDPROC","VALUE","VALUES","VARIABLE","VARIANT","VCAT","VERSION","VIEW","VOLATILE","VOLUMES","WHEN","WHENEVER","WHERE","WHILE","WITH","WITHOUT","WLM","WRITE","XMLELEMENT","XMLEXISTS","XMLNAMESPACES","YEAR","YEARS"],X3=["ARRAY","BIGINT","BINARY","BLOB","BOOLEAN","CCSID","CHAR","CHARACTER","CLOB","DATE","DATETIME","DBCLOB","DEC","DECIMAL","DOUBLE","DOUBLE PRECISION","FLOAT","FLOAT4","FLOAT8","GRAPHIC","INT","INT2","INT4","INT8","INTEGER","INTERVAL","LONG VARCHAR","LONG VARGRAPHIC","NCHAR","NCHR","NCLOB","NVARCHAR","NUMERIC","SMALLINT","REAL","TIME","TIMESTAMP","VARBINARY","VARCHAR","VARGRAPHIC"]});var gbe,Nbe,z3,yy,Obe,Cbe,ybe,bbe,$S,by=H(()=>{xt();V3();j3();gbe=x(["SELECT [ALL | DISTINCT]"]),Nbe=x(["WITH","FROM","WHERE","GROUP BY","HAVING","PARTITION BY","ORDER BY [INPUT SEQUENCE]","LIMIT","OFFSET","FETCH NEXT","FOR UPDATE [OF]","FOR {READ | FETCH} ONLY","FOR {RR | CS | UR | RS} [USE AND KEEP {SHARE | UPDATE | EXCLUSIVE} LOCKS]","WAIT FOR OUTCOME","SKIP LOCKED DATA","INTO","INSERT INTO","VALUES","SET","MERGE INTO","WHEN [NOT] MATCHED [THEN]","UPDATE SET","INSERT"]),z3=x(["CREATE [GLOBAL TEMPORARY | EXTERNAL] TABLE [IF NOT EXISTS]"]),yy=x(["CREATE [OR REPLACE] VIEW","UPDATE","WHERE CURRENT OF","WITH {RR | RS | CS | UR}","DELETE FROM","DROP TABLE [IF EXISTS]","ALTER TABLE","ADD [COLUMN]","DROP [COLUMN]","RENAME COLUMN","ALTER [COLUMN]","SET DATA TYPE","SET NOT NULL","DROP {DEFAULT | GENERATED | NOT NULL}","TRUNCATE [TABLE]","ALLOCATE","ALTER AUDIT POLICY","ALTER BUFFERPOOL","ALTER DATABASE PARTITION GROUP","ALTER DATABASE","ALTER EVENT MONITOR","ALTER FUNCTION","ALTER HISTOGRAM TEMPLATE","ALTER INDEX","ALTER MASK","ALTER METHOD","ALTER MODULE","ALTER NICKNAME","ALTER PACKAGE","ALTER PERMISSION","ALTER PROCEDURE","ALTER SCHEMA","ALTER SECURITY LABEL COMPONENT","ALTER SECURITY POLICY","ALTER SEQUENCE","ALTER SERVER","ALTER SERVICE CLASS","ALTER STOGROUP","ALTER TABLESPACE","ALTER THRESHOLD","ALTER TRIGGER","ALTER TRUSTED CONTEXT","ALTER TYPE","ALTER USAGE LIST","ALTER USER MAPPING","ALTER VIEW","ALTER WORK ACTION SET","ALTER WORK CLASS SET","ALTER WORKLOAD","ALTER WRAPPER","ALTER XSROBJECT","ALTER STOGROUP","ALTER TABLESPACE","ALTER TRIGGER","ALTER TRUSTED CONTEXT","ALTER VIEW","ASSOCIATE [RESULT SET] {LOCATOR | LOCATORS}","AUDIT","BEGIN DECLARE SECTION","CALL","CLOSE","COMMENT ON","COMMIT [WORK]","CONNECT","CREATE [OR REPLACE] [PUBLIC] ALIAS","CREATE AUDIT POLICY","CREATE BUFFERPOOL","CREATE DATABASE PARTITION GROUP","CREATE EVENT MONITOR","CREATE [OR REPLACE] FUNCTION","CREATE FUNCTION MAPPING","CREATE HISTOGRAM TEMPLATE","CREATE [UNIQUE] INDEX","CREATE INDEX EXTENSION","CREATE [OR REPLACE] MASK","CREATE [SPECIFIC] METHOD","CREATE [OR REPLACE] MODULE","CREATE [OR REPLACE] NICKNAME","CREATE [OR REPLACE] PERMISSION","CREATE [OR REPLACE] PROCEDURE","CREATE ROLE","CREATE SCHEMA","CREATE SECURITY LABEL [COMPONENT]","CREATE SECURITY POLICY","CREATE [OR REPLACE] SEQUENCE","CREATE SERVICE CLASS","CREATE SERVER","CREATE STOGROUP","CREATE SYNONYM","CREATE [LARGE | REGULAR | {SYSTEM | USER} TEMPORARY] TABLESPACE","CREATE THRESHOLD","CREATE {TRANSFORM | TRANSFORMS} FOR","CREATE [OR REPLACE] TRIGGER","CREATE TRUSTED CONTEXT","CREATE [OR REPLACE] TYPE","CREATE TYPE MAPPING","CREATE USAGE LIST","CREATE USER MAPPING FOR","CREATE [OR REPLACE] VARIABLE","CREATE WORK ACTION SET","CREATE WORK CLASS SET","CREATE WORKLOAD","CREATE WRAPPER","DECLARE","DECLARE GLOBAL TEMPORARY TABLE","DESCRIBE [INPUT | OUTPUT]","DISCONNECT","DROP [PUBLIC] ALIAS","DROP AUDIT POLICY","DROP BUFFERPOOL","DROP DATABASE PARTITION GROUP","DROP EVENT MONITOR","DROP [SPECIFIC] FUNCTION","DROP FUNCTION MAPPING","DROP HISTOGRAM TEMPLATE","DROP INDEX [EXTENSION]","DROP MASK","DROP [SPECIFIC] METHOD","DROP MODULE","DROP NICKNAME","DROP PACKAGE","DROP PERMISSION","DROP [SPECIFIC] PROCEDURE","DROP ROLE","DROP SCHEMA","DROP SECURITY LABEL [COMPONENT]","DROP SECURITY POLICY","DROP SEQUENCE","DROP SERVER","DROP SERVICE CLASS","DROP STOGROUP","DROP TABLE HIERARCHY","DROP {TABLESPACE | TABLESPACES}","DROP {TRANSFORM | TRANSFORMS}","DROP THRESHOLD","DROP TRIGGER","DROP TRUSTED CONTEXT","DROP TYPE [MAPPING]","DROP USAGE LIST","DROP USER MAPPING FOR","DROP VARIABLE","DROP VIEW [HIERARCHY]","DROP WORK {ACTION | CLASS} SET","DROP WORKLOAD","DROP WRAPPER","DROP XSROBJECT","END DECLARE SECTION","EXECUTE [IMMEDIATE]","EXPLAIN {PLAN [SECTION] | ALL}","FETCH [FROM]","FLUSH {BUFFERPOOL | BUFFERPOOLS} ALL","FLUSH EVENT MONITOR","FLUSH FEDERATED CACHE","FLUSH OPTIMIZATION PROFILE CACHE","FLUSH PACKAGE CACHE [DYNAMIC]","FLUSH AUTHENTICATION CACHE [FOR ALL]","FREE LOCATOR","GET DIAGNOSTICS","GOTO","GRANT","INCLUDE","ITERATE","LEAVE","LOCK TABLE","LOOP","OPEN","PIPE","PREPARE","REFRESH TABLE","RELEASE","RELEASE [TO] SAVEPOINT","RENAME [TABLE | INDEX | STOGROUP | TABLESPACE]","REPEAT","RESIGNAL","RETURN","REVOKE","ROLLBACK [WORK] [TO SAVEPOINT]","SAVEPOINT","SET COMPILATION ENVIRONMENT","SET CONNECTION","SET CURRENT","SET ENCRYPTION PASSWORD","SET EVENT MONITOR STATE","SET INTEGRITY","SET PASSTHRU","SET PATH","SET ROLE","SET SCHEMA","SET SERVER OPTION","SET {SESSION AUTHORIZATION | SESSION_USER}","SET USAGE LIST","SIGNAL","TRANSFER OWNERSHIP OF","WHENEVER {NOT FOUND | SQLERROR | SQLWARNING}","WHILE"]),Obe=x(["UNION [ALL]","EXCEPT [ALL]","INTERSECT [ALL]"]),Cbe=x(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN"]),ybe=x(["ON DELETE","ON UPDATE","SET NULL","{ROWS | RANGE} BETWEEN"]),bbe=x([]),$S={name:"db2",tokenizerOptions:{reservedSelect:gbe,reservedClauses:[...Nbe,...z3,...yy],reservedSetOperations:Obe,reservedJoins:Cbe,reservedKeywordPhrases:ybe,reservedDataTypePhrases:bbe,reservedKeywords:q3,reservedDataTypes:X3,reservedFunctionNames:Y3,extraParens:["[]"],stringTypes:[{quote:"''-qq",prefixes:["G","N","U&"]},{quote:"''-raw",prefixes:["X","BX","GX","UX"],requirePrefix:!0}],identTypes:['""-qq'],identChars:{first:"@#$",rest:"@#$"},paramTypes:{positional:!0,named:[":"]},paramChars:{first:"@#$",rest:"@#$"},operators:["**","%","|","&","^","~","\xAC=","\xAC>","\xAC<","!>","!<","^=","^>","^<","||","->","=>"]},formatOptions:{onelineClauses:[...z3,...yy],tabularOnelineClauses:yy}}});var K3,J3=H(()=>{K3=["ARRAY_AGG","AVG","CORR","CORRELATION","COUNT","COUNT_BIG","COVAR_POP","COVARIANCE","COVAR","COVAR_SAMP","COVARIANCE_SAMP","EVERY","GROUPING","JSON_ARRAYAGG","JSON_OBJECTAGG","LISTAGG","MAX","MEDIAN","MIN","PERCENTILE_CONT","PERCENTILE_DISC","REGR_AVGX","REGR_AVGY","REGR_COUNT","REGR_INTERCEPT","REGR_R2","REGR_SLOPE","REGR_SXX","REGR_SXY","REGR_SYY","SOME","STDDEV_POP","STDDEV","STDDEV_SAMP","SUM","VAR_POP","VARIANCE","VAR","VAR_SAMP","VARIANCE_SAMP","XMLAGG","XMLGROUP","ABS","ABSVAL","ACOS","ADD_DAYS","ADD_HOURS","ADD_MINUTES","ADD_MONTHS","ADD_SECONDS","ADD_YEARS","ANTILOG","ARRAY_MAX_CARDINALITY","ARRAY_TRIM","ASCII","ASIN","ATAN","ATAN2","ATANH","BASE64_DECODE","BASE64_ENCODE","BIT_LENGTH","BITAND","BITANDNOT","BITNOT","BITOR","BITXOR","BSON_TO_JSON","CARDINALITY","CEIL","CEILING","CHAR_LENGTH","CHARACTER_LENGTH","CHR","COALESCE","COMPARE_DECFLOAT","CONCAT","CONTAINS","COS","COSH","COT","CURDATE","CURTIME","DATABASE","DATAPARTITIONNAME","DATAPARTITIONNUM","DAY","DAYNAME","DAYOFMONTH","DAYOFWEEK_ISO","DAYOFWEEK","DAYOFYEAR","DAYS","DBPARTITIONNAME","DBPARTITIONNUM","DECFLOAT_FORMAT","DECFLOAT_SORTKEY","DECRYPT_BINARY","DECRYPT_BIT","DECRYPT_CHAR","DECRYPT_DB","DEGREES","DIFFERENCE","DIGITS","DLCOMMENT","DLLINKTYPE","DLURLCOMPLETE","DLURLPATH","DLURLPATHONLY","DLURLSCHEME","DLURLSERVER","DLVALUE","DOUBLE_PRECISION","DOUBLE","ENCRPYT","ENCRYPT_AES","ENCRYPT_AES256","ENCRYPT_RC2","ENCRYPT_TDES","EXP","EXTRACT","FIRST_DAY","FLOOR","GENERATE_UNIQUE","GET_BLOB_FROM_FILE","GET_CLOB_FROM_FILE","GET_DBCLOB_FROM_FILE","GET_XML_FILE","GETHINT","GREATEST","HASH_MD5","HASH_ROW","HASH_SHA1","HASH_SHA256","HASH_SHA512","HASH_VALUES","HASHED_VALUE","HEX","HEXTORAW","HOUR","HTML_ENTITY_DECODE","HTML_ENTITY_ENCODE","HTTP_DELETE_BLOB","HTTP_DELETE","HTTP_GET_BLOB","HTTP_GET","HTTP_PATCH_BLOB","HTTP_PATCH","HTTP_POST_BLOB","HTTP_POST","HTTP_PUT_BLOB","HTTP_PUT","IDENTITY_VAL_LOCAL","IFNULL","INSERT","INSTR","INTERPRET","ISFALSE","ISNOTFALSE","ISNOTTRUE","ISTRUE","JSON_ARRAY","JSON_OBJECT","JSON_QUERY","JSON_TO_BSON","JSON_UPDATE","JSON_VALUE","JULIAN_DAY","LAND","LAST_DAY","LCASE","LEAST","LEFT","LENGTH","LN","LNOT","LOCATE_IN_STRING","LOCATE","LOG10","LOR","LOWER","LPAD","LTRIM","MAX_CARDINALITY","MAX","MICROSECOND","MIDNIGHT_SECONDS","MIN","MINUTE","MOD","MONTH","MONTHNAME","MONTHS_BETWEEN","MQREAD","MQREADCLOB","MQRECEIVE","MQRECEIVECLOB","MQSEND","MULTIPLY_ALT","NEXT_DAY","NORMALIZE_DECFLOAT","NOW","NULLIF","NVL","OCTET_LENGTH","OVERLAY","PI","POSITION","POSSTR","POW","POWER","QUANTIZE","QUARTER","RADIANS","RAISE_ERROR","RANDOM","RAND","REGEXP_COUNT","REGEXP_INSTR","REGEXP_REPLACE","REGEXP_SUBSTR","REPEAT","REPLACE","RID","RIGHT","ROUND_TIMESTAMP","ROUND","RPAD","RRN","RTRIM","SCORE","SECOND","SIGN","SIN","SINH","SOUNDEX","SPACE","SQRT","STRIP","STRLEFT","STRPOS","STRRIGHT","SUBSTR","SUBSTRING","TABLE_NAME","TABLE_SCHEMA","TAN","TANH","TIMESTAMP_FORMAT","TIMESTAMP_ISO","TIMESTAMPDIFF_BIG","TIMESTAMPDIFF","TO_CHAR","TO_CLOB","TO_DATE","TO_NUMBER","TO_TIMESTAMP","TOTALORDER","TRANSLATE","TRIM_ARRAY","TRIM","TRUNC_TIMESTAMP","TRUNC","TRUNCATE","UCASE","UPPER","URL_DECODE","URL_ENCODE","VALUE","VARBINARY_FORMAT","VARCHAR_BIT_FORMAT","VARCHAR_FORMAT_BINARY","VARCHAR_FORMAT","VERIFY_GROUP_FOR_USER","WEEK_ISO","WEEK","WRAP","XMLATTRIBUTES","XMLCOMMENT","XMLCONCAT","XMLDOCUMENT","XMLELEMENT","XMLFOREST","XMLNAMESPACES","XMLPARSE","XMLPI","XMLROW","XMLSERIALIZE","XMLTEXT","XMLVALIDATE","XOR","XSLTRANSFORM","YEAR","ZONED","BASE_TABLE","HTTP_DELETE_BLOB_VERBOSE","HTTP_DELETE_VERBOSE","HTTP_GET_BLOB_VERBOSE","HTTP_GET_VERBOSE","HTTP_PATCH_BLOB_VERBOSE","HTTP_PATCH_VERBOSE","HTTP_POST_BLOB_VERBOSE","HTTP_POST_VERBOSE","HTTP_PUT_BLOB_VERBOSE","HTTP_PUT_VERBOSE","JSON_TABLE","MQREADALL","MQREADALLCLOB","MQRECEIVEALL","MQRECEIVEALLCLOB","XMLTABLE","UNPACK","CUME_DIST","DENSE_RANK","FIRST_VALUE","LAG","LAST_VALUE","LEAD","NTH_VALUE","NTILE","PERCENT_RANK","RANK","RATIO_TO_REPORT","ROW_NUMBER","CAST"]});var Q3,Z3,ej=H(()=>{Q3=["ABSENT","ACCORDING","ACCTNG","ACTION","ACTIVATE","ADD","ALIAS","ALL","ALLOCATE","ALLOW","ALTER","AND","ANY","APPEND","APPLNAME","ARRAY","ARRAY_AGG","ARRAY_TRIM","AS","ASC","ASENSITIVE","ASSOCIATE","ATOMIC","ATTACH","ATTRIBUTES","AUTHORIZATION","AUTONOMOUS","BEFORE","BEGIN","BETWEEN","BIND","BSON","BUFFERPOOL","BY","CACHE","CALL","CALLED","CARDINALITY","CASE","CAST","CHECK","CL","CLOSE","CLUSTER","COLLECT","COLLECTION","COLUMN","COMMENT","COMMIT","COMPACT","COMPARISONS","COMPRESS","CONCAT","CONCURRENT","CONDITION","CONNECT","CONNECT_BY_ROOT","CONNECTION","CONSTANT","CONSTRAINT","CONTAINS","CONTENT","CONTINUE","COPY","COUNT","COUNT_BIG","CREATE","CREATEIN","CROSS","CUBE","CUME_DIST","CURRENT","CURRENT_DATE","CURRENT_PATH","CURRENT_SCHEMA","CURRENT_SERVER","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_TIMEZONE","CURRENT_USER","CURSOR","CYCLE","DATABASE","DATAPARTITIONNAME","DATAPARTITIONNUM","DAY","DAYS","DB2GENERAL","DB2GENRL","DB2SQL","DBINFO","DBPARTITIONNAME","DBPARTITIONNUM","DEACTIVATE","DEALLOCATE","DECLARE","DEFAULT","DEFAULTS","DEFER","DEFINE","DEFINITION","DELETE","DELETING","DENSE_RANK","DENSERANK","DESC","DESCRIBE","DESCRIPTOR","DETACH","DETERMINISTIC","DIAGNOSTICS","DISABLE","DISALLOW","DISCONNECT","DISTINCT","DO","DOCUMENT","DROP","DYNAMIC","EACH","ELSE","ELSEIF","EMPTY","ENABLE","ENCODING","ENCRYPTION","END","END-EXEC","ENDING","ENFORCED","ERROR","ESCAPE","EVERY","EXCEPT","EXCEPTION","EXCLUDING","EXCLUSIVE","EXECUTE","EXISTS","EXIT","EXTEND","EXTERNAL","EXTRACT","FALSE","FENCED","FETCH","FIELDPROC","FILE","FINAL","FIRST_VALUE","FOR","FOREIGN","FORMAT","FREE","FREEPAGE","FROM","FULL","FUNCTION","GBPCACHE","GENERAL","GENERATED","GET","GLOBAL","GO","GOTO","GRANT","GROUP","HANDLER","HASH","HASH_ROW","HASHED_VALUE","HAVING","HINT","HOLD","HOUR","HOURS","IDENTITY","IF","IGNORE","IMMEDIATE","IMPLICITLY","IN","INCLUDE","INCLUDING","INCLUSIVE","INCREMENT","INDEX","INDEXBP","INDICATOR","INF","INFINITY","INHERIT","INLINE","INNER","INOUT","INSENSITIVE","INSERT","INSERTING","INTEGRITY","INTERPRET","INTERSECT","INTO","IS","ISNULL","ISOLATION","ITERATE","JAVA","JOIN","JSON","JSON_ARRAY","JSON_ARRAYAGG","JSON_EXISTS","JSON_OBJECT","JSON_OBJECTAGG","JSON_QUERY","JSON_TABLE","JSON_VALUE","KEEP","KEY","KEYS","LABEL","LAG","LANGUAGE","LAST_VALUE","LATERAL","LEAD","LEAVE","LEFT","LEVEL2","LIKE","LIMIT","LINKTYPE","LISTAGG","LOCAL","LOCALDATE","LOCALTIME","LOCALTIMESTAMP","LOCATION","LOCATOR","LOCK","LOCKSIZE","LOG","LOGGED","LOOP","MAINTAINED","MASK","MATCHED","MATERIALIZED","MAXVALUE","MERGE","MICROSECOND","MICROSECONDS","MINPCTUSED","MINUTE","MINUTES","MINVALUE","MIRROR","MIXED","MODE","MODIFIES","MONTH","MONTHS","NAMESPACE","NAN","NATIONAL","NCHAR","NCLOB","NESTED","NEW","NEW_TABLE","NEXTVAL","NO","NOCACHE","NOCYCLE","NODENAME","NODENUMBER","NOMAXVALUE","NOMINVALUE","NONE","NOORDER","NORMALIZED","NOT","NOTNULL","NTH_VALUE","NTILE","NULL","NULLS","NVARCHAR","OBID","OBJECT","OF","OFF","OFFSET","OLD","OLD_TABLE","OMIT","ON","ONLY","OPEN","OPTIMIZE","OPTION","OR","ORDER","ORDINALITY","ORGANIZE","OUT","OUTER","OVER","OVERLAY","OVERRIDING","PACKAGE","PADDED","PAGE","PAGESIZE","PARAMETER","PART","PARTITION","PARTITIONED","PARTITIONING","PARTITIONS","PASSING","PASSWORD","PATH","PCTFREE","PERCENT_RANK","PERCENTILE_CONT","PERCENTILE_DISC","PERIOD","PERMISSION","PIECESIZE","PIPE","PLAN","POSITION","PREPARE","PREVVAL","PRIMARY","PRIOR","PRIQTY","PRIVILEGES","PROCEDURE","PROGRAM","PROGRAMID","QUERY","RANGE","RANK","RATIO_TO_REPORT","RCDFMT","READ","READS","RECOVERY","REFERENCES","REFERENCING","REFRESH","REGEXP_LIKE","RELEASE","RENAME","REPEAT","RESET","RESIGNAL","RESTART","RESULT","RESULT_SET_LOCATOR","RETURN","RETURNING","RETURNS","REVOKE","RID","RIGHT","ROLLBACK","ROLLUP","ROUTINE","ROW","ROW_NUMBER","ROWNUMBER","ROWS","RRN","RUN","SAVEPOINT","SBCS","SCALAR","SCHEMA","SCRATCHPAD","SCROLL","SEARCH","SECOND","SECONDS","SECQTY","SECURED","SELECT","SENSITIVE","SEQUENCE","SESSION","SESSION_USER","SET","SIGNAL","SIMPLE","SKIP","SNAN","SOME","SOURCE","SPECIFIC","SQL","SQLID","SQLIND_DEFAULT","SQLIND_UNASSIGNED","STACKED","START","STARTING","STATEMENT","STATIC","STOGROUP","SUBSTRING","SUMMARY","SYNONYM","SYSTEM_TIME","SYSTEM_USER","TABLE","TABLESPACE","TABLESPACES","TAG","THEN","THREADSAFE","TO","TRANSACTION","TRANSFER","TRIGGER","TRIM","TRIM_ARRAY","TRUE","TRUNCATE","TRY_CAST","TYPE","UNDO","UNION","UNIQUE","UNIT","UNKNOWN","UNNEST","UNTIL","UPDATE","UPDATING","URI","USAGE","USE","USER","USERID","USING","VALUE","VALUES","VARIABLE","VARIANT","VCAT","VERSION","VERSIONING","VIEW","VOLATILE","WAIT","WHEN","WHENEVER","WHERE","WHILE","WITH","WITHIN","WITHOUT","WRAPPED","WRAPPER","WRITE","WRKSTNNAME","XMLAGG","XMLATTRIBUTES","XMLCAST","XMLCOMMENT","XMLCONCAT","XMLDOCUMENT","XMLELEMENT","XMLFOREST","XMLGROUP","XMLNAMESPACES","XMLPARSE","XMLPI","XMLROW","XMLSERIALIZE","XMLTABLE","XMLTEXT","XMLVALIDATE","XSLTRANSFORM","XSROBJECT","YEAR","YEARS","YES","ZONE"],Z3=["ARRAY","BIGINT","BINARY","BIT","BLOB","BOOLEAN","CCSID","CHAR","CHARACTER","CLOB","DATA","DATALINK","DATE","DBCLOB","DECFLOAT","DECIMAL","DEC","DOUBLE","DOUBLE PRECISION","FLOAT","GRAPHIC","INT","INTEGER","LONG","NUMERIC","REAL","ROWID","SMALLINT","TIME","TIMESTAMP","VARBINARY","VARCHAR","VARGRAPHIC","XML"]});var wbe,Lbe,tj,wy,Dbe,Pbe,xbe,Mbe,YS,Ly=H(()=>{xt();J3();ej();wbe=x(["SELECT [ALL | DISTINCT]"]),Lbe=x(["WITH [RECURSIVE]","INTO","FROM","WHERE","GROUP BY","HAVING","PARTITION BY","ORDER [SIBLINGS] BY [INPUT SEQUENCE]","LIMIT","OFFSET","FETCH {FIRST | NEXT}","FOR UPDATE [OF]","FOR READ ONLY","OPTIMIZE FOR","INSERT INTO","VALUES","SET","MERGE INTO","WHEN [NOT] MATCHED [THEN]","UPDATE SET","DELETE","INSERT","FOR SYSTEM NAME"]),tj=x(["CREATE [OR REPLACE] TABLE"]),wy=x(["CREATE [OR REPLACE] [RECURSIVE] VIEW","UPDATE","WHERE CURRENT OF","WITH {NC | RR | RS | CS | UR}","DELETE FROM","DROP TABLE","ALTER TABLE","ADD [COLUMN]","ALTER [COLUMN]","DROP [COLUMN]","SET DATA TYPE","SET {GENERATED ALWAYS | GENERATED BY DEFAULT}","SET NOT NULL","SET {NOT HIDDEN | IMPLICITLY HIDDEN}","SET FIELDPROC","DROP {DEFAULT | NOT NULL | GENERATED | IDENTITY | ROW CHANGE TIMESTAMP | FIELDPROC}","TRUNCATE [TABLE]","SET [CURRENT] SCHEMA","SET CURRENT_SCHEMA","ALLOCATE CURSOR","ALLOCATE [SQL] DESCRIPTOR [LOCAL | GLOBAL] SQL","ALTER [SPECIFIC] {FUNCTION | PROCEDURE}","ALTER {MASK | PERMISSION | SEQUENCE | TRIGGER}","ASSOCIATE [RESULT SET] {LOCATOR | LOCATORS}","BEGIN DECLARE SECTION","CALL","CLOSE","COMMENT ON {ALIAS | COLUMN | CONSTRAINT | INDEX | MASK | PACKAGE | PARAMETER | PERMISSION | SEQUENCE | TABLE | TRIGGER | VARIABLE | XSROBJECT}","COMMENT ON [SPECIFIC] {FUNCTION | PROCEDURE | ROUTINE}","COMMENT ON PARAMETER SPECIFIC {FUNCTION | PROCEDURE | ROUTINE}","COMMENT ON [TABLE FUNCTION] RETURN COLUMN","COMMENT ON [TABLE FUNCTION] RETURN COLUMN SPECIFIC [PROCEDURE | ROUTINE]","COMMIT [WORK] [HOLD]","CONNECT [TO | RESET] USER","CREATE [OR REPLACE] {ALIAS | FUNCTION | MASK | PERMISSION | PROCEDURE | SEQUENCE | TRIGGER | VARIABLE}","CREATE [ENCODED VECTOR] INDEX","CREATE UNIQUE [WHERE NOT NULL] INDEX","CREATE SCHEMA","CREATE TYPE","DEALLOCATE [SQL] DESCRIPTOR [LOCAL | GLOBAL]","DECLARE CURSOR","DECLARE GLOBAL TEMPORARY TABLE","DECLARE","DESCRIBE CURSOR","DESCRIBE INPUT","DESCRIBE [OUTPUT]","DESCRIBE {PROCEDURE | ROUTINE}","DESCRIBE TABLE","DISCONNECT ALL [SQL]","DISCONNECT [CURRENT]","DROP {ALIAS | INDEX | MASK | PACKAGE | PERMISSION | SCHEMA | SEQUENCE | TABLE | TYPE | VARIABLE | XSROBJECT} [IF EXISTS]","DROP [SPECIFIC] {FUNCTION | PROCEDURE | ROUTINE} [IF EXISTS]","END DECLARE SECTION","EXECUTE [IMMEDIATE]","FREE LOCATOR","GET [SQL] DESCRIPTOR [LOCAL | GLOBAL]","GET [CURRENT | STACKED] DIAGNOSTICS","GRANT {ALL [PRIVILEGES] | ALTER | EXECUTE} ON {FUNCTION | PROCEDURE | ROUTINE | PACKAGE | SCHEMA | SEQUENCE | TABLE | TYPE | VARIABLE | XSROBJECT}","HOLD LOCATOR","INCLUDE","LABEL ON {ALIAS | COLUMN | CONSTRAINT | INDEX | MASK | PACKAGE | PERMISSION | SEQUENCE | TABLE | TRIGGER | VARIABLE | XSROBJECT}","LABEL ON [SPECIFIC] {FUNCTION | PROCEDURE | ROUTINE}","LOCK TABLE","OPEN","PREPARE","REFRESH TABLE","RELEASE","RELEASE [TO] SAVEPOINT","RENAME [TABLE | INDEX] TO","REVOKE {ALL [PRIVILEGES] | ALTER | EXECUTE} ON {FUNCTION | PROCEDURE | ROUTINE | PACKAGE | SCHEMA | SEQUENCE | TABLE | TYPE | VARIABLE | XSROBJECT}","ROLLBACK [WORK] [HOLD | TO SAVEPOINT]","SAVEPOINT","SET CONNECTION","SET CURRENT {DEBUG MODE | DECFLOAT ROUNDING MODE | DEGREE | IMPLICIT XMLPARSE OPTION | TEMPORAL SYSTEM_TIME}","SET [SQL] DESCRIPTOR [LOCAL | GLOBAL]","SET ENCRYPTION PASSWORD","SET OPTION","SET {[CURRENT [FUNCTION]] PATH | CURRENT_PATH}","SET RESULT SETS [WITH RETURN [TO CALLER | TO CLIENT]]","SET SESSION AUTHORIZATION","SET SESSION_USER","SET TRANSACTION","SIGNAL SQLSTATE [VALUE]","TAG","TRANSFER OWNERSHIP OF","WHENEVER {NOT FOUND | SQLERROR | SQLWARNING}"]),Dbe=x(["UNION [ALL]","EXCEPT [ALL]","INTERSECT [ALL]"]),Pbe=x(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","[LEFT | RIGHT] EXCEPTION JOIN","{INNER | CROSS} JOIN"]),xbe=x(["ON DELETE","ON UPDATE","SET NULL","{ROWS | RANGE} BETWEEN"]),Mbe=x([]),YS={name:"db2i",tokenizerOptions:{reservedSelect:wbe,reservedClauses:[...Lbe,...tj,...wy],reservedSetOperations:Dbe,reservedJoins:Pbe,reservedKeywordPhrases:xbe,reservedDataTypePhrases:Mbe,reservedKeywords:Q3,reservedDataTypes:Z3,reservedFunctionNames:K3,nestedBlockComments:!0,extraParens:["[]"],stringTypes:[{quote:"''-qq",prefixes:["G","N"]},{quote:"''-raw",prefixes:["X","BX","GX","UX"],requirePrefix:!0}],identTypes:['""-qq'],identChars:{first:"@#$",rest:"@#$"},paramTypes:{positional:!0,named:[":"]},paramChars:{first:"@#$",rest:"@#$"},operators:["**","\xAC=","\xAC>","\xAC<","!>","!<","||","=>"]},formatOptions:{onelineClauses:[...tj,...wy],tabularOnelineClauses:wy}}});var rj,nj=H(()=>{rj=["ABS","ACOS","ADD","ADD_PARQUET_KEY","AGE","AGGREGATE","ALIAS","ALL_PROFILING_OUTPUT","ANY_VALUE","APPLY","APPROX_COUNT_DISTINCT","APPROX_QUANTILE","ARBITRARY","ARGMAX","ARGMIN","ARG_MAX","ARG_MAX_NULL","ARG_MIN","ARG_MIN_NULL","ARRAY_AGG","ARRAY_AGGR","ARRAY_AGGREGATE","ARRAY_APPEND","ARRAY_APPLY","ARRAY_CAT","ARRAY_CONCAT","ARRAY_CONTAINS","ARRAY_COSINE_SIMILARITY","ARRAY_CROSS_PRODUCT","ARRAY_DISTANCE","ARRAY_DISTINCT","ARRAY_DOT_PRODUCT","ARRAY_EXTRACT","ARRAY_FILTER","ARRAY_GRADE_UP","ARRAY_HAS","ARRAY_HAS_ALL","ARRAY_HAS_ANY","ARRAY_INDEXOF","ARRAY_INNER_PRODUCT","ARRAY_INTERSECT","ARRAY_LENGTH","ARRAY_POP_BACK","ARRAY_POP_FRONT","ARRAY_POSITION","ARRAY_PREPEND","ARRAY_PUSH_BACK","ARRAY_PUSH_FRONT","ARRAY_REDUCE","ARRAY_RESIZE","ARRAY_REVERSE","ARRAY_REVERSE_SORT","ARRAY_SELECT","ARRAY_SLICE","ARRAY_SORT","ARRAY_TO_JSON","ARRAY_TO_STRING","ARRAY_TRANSFORM","ARRAY_UNIQUE","ARRAY_VALUE","ARRAY_WHERE","ARRAY_ZIP","ARROW_SCAN","ARROW_SCAN_DUMB","ASCII","ASIN","ATAN","ATAN2","AVG","BASE64","BIN","BITSTRING","BITSTRING_AGG","BIT_AND","BIT_COUNT","BIT_LENGTH","BIT_OR","BIT_POSITION","BIT_XOR","BOOL_AND","BOOL_OR","CARDINALITY","CBRT","CEIL","CEILING","CENTURY","CHECKPOINT","CHR","COLLATIONS","COL_DESCRIPTION","COMBINE","CONCAT","CONCAT_WS","CONSTANT_OR_NULL","CONTAINS","COPY_DATABASE","CORR","COS","COT","COUNT","COUNT_IF","COUNT_STAR","COVAR_POP","COVAR_SAMP","CREATE_SORT_KEY","CURRENT_CATALOG","CURRENT_DATABASE","CURRENT_DATE","CURRENT_LOCALTIME","CURRENT_LOCALTIMESTAMP","CURRENT_QUERY","CURRENT_ROLE","CURRENT_SCHEMA","CURRENT_SCHEMAS","CURRENT_SETTING","CURRENT_USER","CURRVAL","DAMERAU_LEVENSHTEIN","DATABASE_LIST","DATABASE_SIZE","DATEDIFF","DATEPART","DATESUB","DATETRUNC","DATE_ADD","DATE_DIFF","DATE_PART","DATE_SUB","DATE_TRUNC","DAY","DAYNAME","DAYOFMONTH","DAYOFWEEK","DAYOFYEAR","DECADE","DECODE","DEGREES","DISABLE_CHECKPOINT_ON_SHUTDOWN","DISABLE_OBJECT_CACHE","DISABLE_OPTIMIZER","DISABLE_PRINT_PROGRESS_BAR","DISABLE_PROFILE","DISABLE_PROFILING","DISABLE_PROGRESS_BAR","DISABLE_VERIFICATION","DISABLE_VERIFY_EXTERNAL","DISABLE_VERIFY_FETCH_ROW","DISABLE_VERIFY_PARALLELISM","DISABLE_VERIFY_SERIALIZER","DIVIDE","DUCKDB_COLUMNS","DUCKDB_CONSTRAINTS","DUCKDB_DATABASES","DUCKDB_DEPENDENCIES","DUCKDB_EXTENSIONS","DUCKDB_FUNCTIONS","DUCKDB_INDEXES","DUCKDB_KEYWORDS","DUCKDB_MEMORY","DUCKDB_OPTIMIZERS","DUCKDB_SCHEMAS","DUCKDB_SECRETS","DUCKDB_SEQUENCES","DUCKDB_SETTINGS","DUCKDB_TABLES","DUCKDB_TEMPORARY_FILES","DUCKDB_TYPES","DUCKDB_VIEWS","EDIT","EDITDIST3","ELEMENT_AT","ENABLE_CHECKPOINT_ON_SHUTDOWN","ENABLE_OBJECT_CACHE","ENABLE_OPTIMIZER","ENABLE_PRINT_PROGRESS_BAR","ENABLE_PROFILE","ENABLE_PROFILING","ENABLE_PROGRESS_BAR","ENABLE_VERIFICATION","ENCODE","ENDS_WITH","ENTROPY","ENUM_CODE","ENUM_FIRST","ENUM_LAST","ENUM_RANGE","ENUM_RANGE_BOUNDARY","EPOCH","EPOCH_MS","EPOCH_NS","EPOCH_US","ERA","ERROR","EVEN","EXP","FACTORIAL","FAVG","FDIV","FILTER","FINALIZE","FIRST","FLATTEN","FLOOR","FMOD","FORCE_CHECKPOINT","FORMAT","FORMATREADABLEDECIMALSIZE","FORMATREADABLESIZE","FORMAT_BYTES","FORMAT_PG_TYPE","FORMAT_TYPE","FROM_BASE64","FROM_BINARY","FROM_HEX","FROM_JSON","FROM_JSON_STRICT","FSUM","FUNCTIONS","GAMMA","GCD","GENERATE_SERIES","GENERATE_SUBSCRIPTS","GEN_RANDOM_UUID","GEOMEAN","GEOMETRIC_MEAN","GETENV","GET_BIT","GET_BLOCK_SIZE","GET_CURRENT_TIME","GET_CURRENT_TIMESTAMP","GLOB","GRADE_UP","GREATEST","GREATEST_COMMON_DIVISOR","GROUP_CONCAT","HAMMING","HASH","HAS_ANY_COLUMN_PRIVILEGE","HAS_COLUMN_PRIVILEGE","HAS_DATABASE_PRIVILEGE","HAS_FOREIGN_DATA_WRAPPER_PRIVILEGE","HAS_FUNCTION_PRIVILEGE","HAS_LANGUAGE_PRIVILEGE","HAS_SCHEMA_PRIVILEGE","HAS_SEQUENCE_PRIVILEGE","HAS_SERVER_PRIVILEGE","HAS_TABLESPACE_PRIVILEGE","HAS_TABLE_PRIVILEGE","HEX","HISTOGRAM","HOUR","ICU_CALENDAR_NAMES","ICU_SORT_KEY","ILIKE_ESCAPE","IMPORT_DATABASE","INDEX_SCAN","INET_CLIENT_ADDR","INET_CLIENT_PORT","INET_SERVER_ADDR","INET_SERVER_PORT","INSTR","IN_SEARCH_PATH","ISFINITE","ISINF","ISNAN","ISODOW","ISOYEAR","JACCARD","JARO_SIMILARITY","JARO_WINKLER_SIMILARITY","JSON_ARRAY","JSON_ARRAY_LENGTH","JSON_CONTAINS","JSON_DESERIALIZE_SQL","JSON_EXECUTE_SERIALIZED_SQL","JSON_EXTRACT","JSON_EXTRACT_PATH","JSON_EXTRACT_PATH_TEXT","JSON_EXTRACT_STRING","JSON_GROUP_ARRAY","JSON_GROUP_OBJECT","JSON_GROUP_STRUCTURE","JSON_KEYS","JSON_MERGE_PATCH","JSON_OBJECT","JSON_QUOTE","JSON_SERIALIZE_PLAN","JSON_SERIALIZE_SQL","JSON_STRUCTURE","JSON_TRANSFORM","JSON_TRANSFORM_STRICT","JSON_TYPE","JSON_VALID","JULIAN","KAHAN_SUM","KURTOSIS","KURTOSIS_POP","LAST","LAST_DAY","LCASE","LCM","LEAST","LEAST_COMMON_MULTIPLE","LEFT","LEFT_GRAPHEME","LEN","LENGTH","LENGTH_GRAPHEME","LEVENSHTEIN","LGAMMA","LIKE_ESCAPE","LIST","LISTAGG","LIST_AGGR","LIST_AGGREGATE","LIST_ANY_VALUE","LIST_APPEND","LIST_APPLY","LIST_APPROX_COUNT_DISTINCT","LIST_AVG","LIST_BIT_AND","LIST_BIT_OR","LIST_BIT_XOR","LIST_BOOL_AND","LIST_BOOL_OR","LIST_CAT","LIST_CONCAT","LIST_CONTAINS","LIST_COSINE_SIMILARITY","LIST_COUNT","LIST_DISTANCE","LIST_DISTINCT","LIST_DOT_PRODUCT","LIST_ELEMENT","LIST_ENTROPY","LIST_EXTRACT","LIST_FILTER","LIST_FIRST","LIST_GRADE_UP","LIST_HAS","LIST_HAS_ALL","LIST_HAS_ANY","LIST_HISTOGRAM","LIST_INDEXOF","LIST_INNER_PRODUCT","LIST_INTERSECT","LIST_KURTOSIS","LIST_KURTOSIS_POP","LIST_LAST","LIST_MAD","LIST_MAX","LIST_MEDIAN","LIST_MIN","LIST_MODE","LIST_PACK","LIST_POSITION","LIST_PREPEND","LIST_PRODUCT","LIST_REDUCE","LIST_RESIZE","LIST_REVERSE","LIST_REVERSE_SORT","LIST_SELECT","LIST_SEM","LIST_SKEWNESS","LIST_SLICE","LIST_SORT","LIST_STDDEV_POP","LIST_STDDEV_SAMP","LIST_STRING_AGG","LIST_SUM","LIST_TRANSFORM","LIST_UNIQUE","LIST_VALUE","LIST_VAR_POP","LIST_VAR_SAMP","LIST_WHERE","LIST_ZIP","LN","LOG","LOG10","LOG2","LOWER","LPAD","LSMODE","LTRIM","MAD","MAKE_DATE","MAKE_TIME","MAKE_TIMESTAMP","MAKE_TIMESTAMPTZ","MAP","MAP_CONCAT","MAP_ENTRIES","MAP_EXTRACT","MAP_FROM_ENTRIES","MAP_KEYS","MAP_VALUES","MAX","MAX_BY","MD5","MD5_NUMBER","MD5_NUMBER_LOWER","MD5_NUMBER_UPPER","MEAN","MEDIAN","METADATA_INFO","MICROSECOND","MILLENNIUM","MILLISECOND","MIN","MINUTE","MIN_BY","MISMATCHES","MOD","MODE","MONTH","MONTHNAME","MULTIPLY","NEXTAFTER","NEXTVAL","NFC_NORMALIZE","NOT_ILIKE_ESCAPE","NOT_LIKE_ESCAPE","NOW","NULLIF","OBJ_DESCRIPTION","OCTET_LENGTH","ORD","PARQUET_FILE_METADATA","PARQUET_KV_METADATA","PARQUET_METADATA","PARQUET_SCAN","PARQUET_SCHEMA","PARSE_DIRNAME","PARSE_DIRPATH","PARSE_FILENAME","PARSE_PATH","PG_COLLATION_IS_VISIBLE","PG_CONF_LOAD_TIME","PG_CONVERSION_IS_VISIBLE","PG_FUNCTION_IS_VISIBLE","PG_GET_CONSTRAINTDEF","PG_GET_EXPR","PG_GET_VIEWDEF","PG_HAS_ROLE","PG_IS_OTHER_TEMP_SCHEMA","PG_MY_TEMP_SCHEMA","PG_OPCLASS_IS_VISIBLE","PG_OPERATOR_IS_VISIBLE","PG_OPFAMILY_IS_VISIBLE","PG_POSTMASTER_START_TIME","PG_SIZE_PRETTY","PG_TABLE_IS_VISIBLE","PG_TIMEZONE_NAMES","PG_TS_CONFIG_IS_VISIBLE","PG_TS_DICT_IS_VISIBLE","PG_TS_PARSER_IS_VISIBLE","PG_TS_TEMPLATE_IS_VISIBLE","PG_TYPEOF","PG_TYPE_IS_VISIBLE","PI","PLATFORM","POSITION","POW","POWER","PRAGMA_COLLATIONS","PRAGMA_DATABASE_SIZE","PRAGMA_METADATA_INFO","PRAGMA_PLATFORM","PRAGMA_SHOW","PRAGMA_STORAGE_INFO","PRAGMA_TABLE_INFO","PRAGMA_USER_AGENT","PRAGMA_VERSION","PREFIX","PRINTF","PRODUCT","QUANTILE","QUANTILE_CONT","QUANTILE_DISC","QUARTER","RADIANS","RANDOM","RANGE","READFILE","READ_BLOB","READ_CSV","READ_CSV_AUTO","READ_JSON","READ_JSON_AUTO","READ_JSON_OBJECTS","READ_JSON_OBJECTS_AUTO","READ_NDJSON","READ_NDJSON_AUTO","READ_NDJSON_OBJECTS","READ_PARQUET","READ_TEXT","REDUCE","REGEXP_ESCAPE","REGEXP_EXTRACT","REGEXP_EXTRACT_ALL","REGEXP_FULL_MATCH","REGEXP_MATCHES","REGEXP_REPLACE","REGEXP_SPLIT_TO_ARRAY","REGEXP_SPLIT_TO_TABLE","REGR_AVGX","REGR_AVGY","REGR_COUNT","REGR_INTERCEPT","REGR_R2","REGR_SLOPE","REGR_SXX","REGR_SXY","REGR_SYY","REPEAT","REPEAT_ROW","REPLACE","RESERVOIR_QUANTILE","REVERSE","RIGHT","RIGHT_GRAPHEME","ROUND","ROUNDBANKERS","ROUND_EVEN","ROW","ROW_TO_JSON","RPAD","RTRIM","SECOND","SEM","SEQ_SCAN","SESSION_USER","SETSEED","SET_BIT","SHA256","SHA3","SHELL_ADD_SCHEMA","SHELL_ESCAPE_CRNL","SHELL_IDQUOTE","SHELL_MODULE_SCHEMA","SHELL_PUTSNL","SHOBJ_DESCRIPTION","SHOW","SHOW_DATABASES","SHOW_TABLES","SHOW_TABLES_EXPANDED","SIGN","SIGNBIT","SIN","SKEWNESS","SNIFF_CSV","SPLIT","SPLIT_PART","SQL_AUTO_COMPLETE","SQRT","STARTS_WITH","STATS","STDDEV","STDDEV_POP","STDDEV_SAMP","STORAGE_INFO","STRFTIME","STRING_AGG","STRING_SPLIT","STRING_SPLIT_REGEX","STRING_TO_ARRAY","STRIP_ACCENTS","STRLEN","STRPOS","STRPTIME","STRUCT_EXTRACT","STRUCT_INSERT","STRUCT_PACK","STR_SPLIT","STR_SPLIT_REGEX","SUBSTR","SUBSTRING","SUBSTRING_GRAPHEME","SUBTRACT","SUFFIX","SUM","SUMKAHAN","SUMMARY","SUM_NO_OVERFLOW","TABLE_INFO","TAN","TEST_ALL_TYPES","TEST_VECTOR_TYPES","TIMEZONE","TIMEZONE_HOUR","TIMEZONE_MINUTE","TIME_BUCKET","TODAY","TO_BASE","TO_BASE64","TO_BINARY","TO_CENTURIES","TO_DAYS","TO_DECADES","TO_HEX","TO_HOURS","TO_JSON","TO_MICROSECONDS","TO_MILLENNIA","TO_MILLISECONDS","TO_MINUTES","TO_MONTHS","TO_SECONDS","TO_TIMESTAMP","TO_WEEKS","TO_YEARS","TRANSACTION_TIMESTAMP","TRANSLATE","TRIM","TRUNC","TRY_STRPTIME","TXID_CURRENT","TYPEOF","UCASE","UNBIN","UNHEX","UNICODE","UNION_EXTRACT","UNION_TAG","UNION_VALUE","UNNEST","UNPIVOT_LIST","UPPER","USER","USER_AGENT","UUID","VARIANCE","VAR_POP","VAR_SAMP","VECTOR_TYPE","VERIFY_EXTERNAL","VERIFY_FETCH_ROW","VERIFY_PARALLELISM","VERIFY_SERIALIZER","VERSION","WEEK","WEEKDAY","WEEKOFYEAR","WHICH_SECRET","WRITEFILE","XOR","YEAR","YEARWEEK","CAST","COALESCE","RANK","ROW_NUMBER"]});var ij,sj,oj=H(()=>{ij=["ALL","ANALYSE","ANALYZE","AND","ANY","AS","ASC","ATTACH","ASYMMETRIC","BOTH","CASE","CAST","CHECK","COLLATE","COLUMN","CONSTRAINT","CREATE","DEFAULT","DEFERRABLE","DESC","DESCRIBE","DETACH","DISTINCT","DO","ELSE","END","EXCEPT","FALSE","FETCH","FOR","FOREIGN","FROM","GRANT","GROUP","HAVING","IN","INITIALLY","INTERSECT","INTO","IS","LATERAL","LEADING","LIMIT","NOT","NULL","OFFSET","ON","ONLY","OR","ORDER","PIVOT","PIVOT_LONGER","PIVOT_WIDER","PLACING","PRIMARY","REFERENCES","RETURNING","SELECT","SHOW","SOME","SUMMARIZE","SYMMETRIC","TABLE","THEN","TO","TRAILING","TRUE","UNION","UNIQUE","UNPIVOT","USING","VARIADIC","WHEN","WHERE","WINDOW","WITH"],sj=["ARRAY","BIGINT","BINARY","BIT","BITSTRING","BLOB","BOOL","BOOLEAN","BPCHAR","BYTEA","CHAR","DATE","DATETIME","DEC","DECIMAL","DOUBLE","ENUM","FLOAT","FLOAT4","FLOAT8","GUID","HUGEINT","INET","INT","INT1","INT128","INT16","INT2","INT32","INT4","INT64","INT8","INTEGER","INTEGRAL","INTERVAL","JSON","LIST","LOGICAL","LONG","MAP","NUMERIC","NVARCHAR","OID","REAL","ROW","SHORT","SIGNED","SMALLINT","STRING","STRUCT","TEXT","TIME","TIMESTAMP_MS","TIMESTAMP_NS","TIMESTAMP_S","TIMESTAMP_US","TIMESTAMP","TIMESTAMPTZ","TIMETZ","TINYINT","UBIGINT","UHUGEINT","UINT128","UINT16","UINT32","UINT64","UINT8","UINTEGER","UNION","USMALLINT","UTINYINT","UUID","VARBINARY","VARCHAR"]});var vbe,Ube,aj,Dy,Bbe,Fbe,Gbe,Hbe,VS,Py=H(()=>{xt();nj();oj();vbe=x(["SELECT [ALL | DISTINCT]"]),Ube=x(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY [ALL]","HAVING","WINDOW","PARTITION BY","ORDER BY [ALL]","LIMIT","OFFSET","USING SAMPLE","QUALIFY","INSERT [OR REPLACE] INTO","VALUES","DEFAULT VALUES","SET","RETURNING"]),aj=x(["CREATE [OR REPLACE] [TEMPORARY | TEMP] TABLE [IF NOT EXISTS]"]),Dy=x(["UPDATE","ON CONFLICT","DELETE FROM","DROP TABLE [IF EXISTS]","TRUNCATE","ALTER TABLE","ADD [COLUMN] [IF NOT EXISTS]","ADD PRIMARY KEY","DROP [COLUMN] [IF EXISTS]","ALTER [COLUMN]","RENAME [COLUMN]","RENAME TO","SET [DATA] TYPE","{SET | DROP} DEFAULT","{SET | DROP} NOT NULL","CREATE [OR REPLACE] [TEMPORARY | TEMP] {MACRO | FUNCTION}","DROP MACRO [TABLE] [IF EXISTS]","DROP FUNCTION [IF EXISTS]","CREATE [UNIQUE] INDEX [IF NOT EXISTS]","DROP INDEX [IF EXISTS]","CREATE [OR REPLACE] SCHEMA [IF NOT EXISTS]","DROP SCHEMA [IF EXISTS]","CREATE [OR REPLACE] [PERSISTENT | TEMPORARY] SECRET [IF NOT EXISTS]","DROP [PERSISTENT | TEMPORARY] SECRET [IF EXISTS]","CREATE [OR REPLACE] [TEMPORARY | TEMP] SEQUENCE","DROP SEQUENCE [IF EXISTS]","CREATE [OR REPLACE] [TEMPORARY | TEMP] VIEW [IF NOT EXISTS]","DROP VIEW [IF EXISTS]","ALTER VIEW","CREATE TYPE","DROP TYPE [IF EXISTS]","ANALYZE","ATTACH [DATABASE] [IF NOT EXISTS]","DETACH [DATABASE] [IF EXISTS]","CALL","[FORCE] CHECKPOINT","COMMENT ON [TABLE | COLUMN | VIEW | INDEX | SEQUENCE | TYPE | MACRO | MACRO TABLE]","COPY [FROM DATABASE]","DESCRIBE","EXPORT DATABASE","IMPORT DATABASE","INSTALL","LOAD","PIVOT","PIVOT_WIDER","UNPIVOT","EXPLAIN [ANALYZE]","SET {LOCAL | SESSION | GLOBAL}","RESET [LOCAL | SESSION | GLOBAL]","{SET | RESET} VARIABLE","SUMMARIZE","BEGIN TRANSACTION","ROLLBACK","COMMIT","ABORT","USE","VACUUM [ANALYZE]","PREPARE","EXECUTE","DEALLOCATE [PREPARE]"]),Bbe=x(["UNION [ALL | BY NAME]","EXCEPT [ALL]","INTERSECT [ALL]"]),Fbe=x(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","{NATURAL | ASOF} [INNER] JOIN","{NATURAL | ASOF} {LEFT | RIGHT | FULL} [OUTER] JOIN","POSITIONAL JOIN","ANTI JOIN","SEMI JOIN"]),Gbe=x(["{ROWS | RANGE | GROUPS} BETWEEN","SIMILAR TO","IS [NOT] DISTINCT FROM"]),Hbe=x(["TIMESTAMP WITH TIME ZONE"]),VS={name:"duckdb",tokenizerOptions:{reservedSelect:vbe,reservedClauses:[...Ube,...aj,...Dy],reservedSetOperations:Bbe,reservedJoins:Fbe,reservedKeywordPhrases:Gbe,reservedDataTypePhrases:Hbe,supportsXor:!0,reservedKeywords:ij,reservedDataTypes:sj,reservedFunctionNames:rj,nestedBlockComments:!0,extraParens:["[]","{}"],underscoresInNumbers:!0,stringTypes:["$$","''-qq",{quote:"''-qq-bs",prefixes:["E"],requirePrefix:!0},{quote:"''-raw",prefixes:["B","X"],requirePrefix:!0}],identTypes:['""-qq'],identChars:{rest:"$"},paramTypes:{positional:!0,numbered:["$"],quoted:["$"]},operators:["//","%","**","^","!","&","|","~","<<",">>","::","==","->","->>",":",":=","=>","~~","!~~","~~*","!~~*","~~~","~","!~","~*","!~*","^@","||",">>=","<<="]},formatOptions:{alwaysDenseOperators:["::"],onelineClauses:[...aj,...Dy],tabularOnelineClauses:Dy}}});var lj,cj=H(()=>{lj=["ABS","ACOS","ASIN","ATAN","BIN","BROUND","CBRT","CEIL","CEILING","CONV","COS","DEGREES","EXP","FACTORIAL","FLOOR","GREATEST","HEX","LEAST","LN","LOG","LOG10","LOG2","NEGATIVE","PI","PMOD","POSITIVE","POW","POWER","RADIANS","RAND","ROUND","SHIFTLEFT","SHIFTRIGHT","SHIFTRIGHTUNSIGNED","SIGN","SIN","SQRT","TAN","UNHEX","WIDTH_BUCKET","ARRAY_CONTAINS","MAP_KEYS","MAP_VALUES","SIZE","SORT_ARRAY","BINARY","CAST","ADD_MONTHS","DATE","DATE_ADD","DATE_FORMAT","DATE_SUB","DATEDIFF","DAY","DAYNAME","DAYOFMONTH","DAYOFYEAR","EXTRACT","FROM_UNIXTIME","FROM_UTC_TIMESTAMP","HOUR","LAST_DAY","MINUTE","MONTH","MONTHS_BETWEEN","NEXT_DAY","QUARTER","SECOND","TIMESTAMP","TO_DATE","TO_UTC_TIMESTAMP","TRUNC","UNIX_TIMESTAMP","WEEKOFYEAR","YEAR","ASSERT_TRUE","COALESCE","IF","ISNOTNULL","ISNULL","NULLIF","NVL","ASCII","BASE64","CHARACTER_LENGTH","CHR","CONCAT","CONCAT_WS","CONTEXT_NGRAMS","DECODE","ELT","ENCODE","FIELD","FIND_IN_SET","FORMAT_NUMBER","GET_JSON_OBJECT","IN_FILE","INITCAP","INSTR","LCASE","LENGTH","LEVENSHTEIN","LOCATE","LOWER","LPAD","LTRIM","NGRAMS","OCTET_LENGTH","PARSE_URL","PRINTF","QUOTE","REGEXP_EXTRACT","REGEXP_REPLACE","REPEAT","REVERSE","RPAD","RTRIM","SENTENCES","SOUNDEX","SPACE","SPLIT","STR_TO_MAP","SUBSTR","SUBSTRING","TRANSLATE","TRIM","UCASE","UNBASE64","UPPER","MASK","MASK_FIRST_N","MASK_HASH","MASK_LAST_N","MASK_SHOW_FIRST_N","MASK_SHOW_LAST_N","AES_DECRYPT","AES_ENCRYPT","CRC32","CURRENT_DATABASE","CURRENT_USER","HASH","JAVA_METHOD","LOGGED_IN_USER","MD5","REFLECT","SHA","SHA1","SHA2","SURROGATE_KEY","VERSION","AVG","COLLECT_LIST","COLLECT_SET","CORR","COUNT","COVAR_POP","COVAR_SAMP","HISTOGRAM_NUMERIC","MAX","MIN","NTILE","PERCENTILE","PERCENTILE_APPROX","REGR_AVGX","REGR_AVGY","REGR_COUNT","REGR_INTERCEPT","REGR_R2","REGR_SLOPE","REGR_SXX","REGR_SXY","REGR_SYY","STDDEV_POP","STDDEV_SAMP","SUM","VAR_POP","VAR_SAMP","VARIANCE","EXPLODE","INLINE","JSON_TUPLE","PARSE_URL_TUPLE","POSEXPLODE","STACK","LEAD","LAG","FIRST_VALUE","LAST_VALUE","RANK","ROW_NUMBER","DENSE_RANK","CUME_DIST","PERCENT_RANK","NTILE"]});var uj,dj,fj=H(()=>{uj=["ADD","ADMIN","AFTER","ANALYZE","ARCHIVE","ASC","BEFORE","BUCKET","BUCKETS","CASCADE","CHANGE","CLUSTER","CLUSTERED","CLUSTERSTATUS","COLLECTION","COLUMNS","COMMENT","COMPACT","COMPACTIONS","COMPUTE","CONCATENATE","CONTINUE","DATA","DATABASES","DATETIME","DAY","DBPROPERTIES","DEFERRED","DEFINED","DELIMITED","DEPENDENCY","DESC","DIRECTORIES","DIRECTORY","DISABLE","DISTRIBUTE","ELEM_TYPE","ENABLE","ESCAPED","EXCLUSIVE","EXPLAIN","EXPORT","FIELDS","FILE","FILEFORMAT","FIRST","FORMAT","FORMATTED","FUNCTIONS","HOLD_DDLTIME","HOUR","IDXPROPERTIES","IGNORE","INDEX","INDEXES","INPATH","INPUTDRIVER","INPUTFORMAT","ITEMS","JAR","KEYS","KEY_TYPE","LIMIT","LINES","LOAD","LOCATION","LOCK","LOCKS","LOGICAL","LONG","MAPJOIN","MATERIALIZED","METADATA","MINUS","MINUTE","MONTH","MSCK","NOSCAN","NO_DROP","OFFLINE","OPTION","OUTPUTDRIVER","OUTPUTFORMAT","OVERWRITE","OWNER","PARTITIONED","PARTITIONS","PLUS","PRETTY","PRINCIPALS","PROTECTION","PURGE","READ","READONLY","REBUILD","RECORDREADER","RECORDWRITER","RELOAD","RENAME","REPAIR","REPLACE","REPLICATION","RESTRICT","REWRITE","ROLE","ROLES","SCHEMA","SCHEMAS","SECOND","SEMI","SERDE","SERDEPROPERTIES","SERVER","SETS","SHARED","SHOW","SHOW_DATABASE","SKEWED","SORT","SORTED","SSL","STATISTICS","STORED","STREAMTABLE","STRING","TABLES","TBLPROPERTIES","TEMPORARY","TERMINATED","TINYINT","TOUCH","TRANSACTIONS","UNARCHIVE","UNDO","UNIONTYPE","UNLOCK","UNSET","UNSIGNED","URI","USE","UTC","UTCTIMESTAMP","VALUE_TYPE","VIEW","WHILE","YEAR","AUTOCOMMIT","ISOLATION","LEVEL","OFFSET","SNAPSHOT","TRANSACTION","WORK","WRITE","ABORT","KEY","LAST","NORELY","NOVALIDATE","NULLS","RELY","VALIDATE","DETAIL","DOW","EXPRESSION","OPERATOR","QUARTER","SUMMARY","VECTORIZATION","WEEK","YEARS","MONTHS","WEEKS","DAYS","HOURS","MINUTES","SECONDS","TIMESTAMPTZ","ZONE","ALL","ALTER","AND","AS","AUTHORIZATION","BETWEEN","BOTH","BY","CASE","CAST","COLUMN","CONF","CREATE","CROSS","CUBE","CURRENT","CURRENT_DATE","CURRENT_TIMESTAMP","CURSOR","DATABASE","DELETE","DESCRIBE","DISTINCT","DROP","ELSE","END","EXCHANGE","EXISTS","EXTENDED","EXTERNAL","FALSE","FETCH","FOLLOWING","FOR","FROM","FULL","FUNCTION","GRANT","GROUP","GROUPING","HAVING","IF","IMPORT","IN","INNER","INSERT","INTERSECT","INTO","IS","JOIN","LATERAL","LEFT","LESS","LIKE","LOCAL","MACRO","MORE","NONE","NOT","NULL","OF","ON","OR","ORDER","OUT","OUTER","OVER","PARTIALSCAN","PARTITION","PERCENT","PRECEDING","PRESERVE","PROCEDURE","RANGE","READS","REDUCE","REVOKE","RIGHT","ROLLUP","ROW","ROWS","SELECT","SET","TABLE","TABLESAMPLE","THEN","TO","TRANSFORM","TRIGGER","TRUE","TRUNCATE","UNBOUNDED","UNION","UNIQUEJOIN","UPDATE","USER","USING","UTC_TMESTAMP","VALUES","WHEN","WHERE","WINDOW","WITH","COMMIT","ONLY","REGEXP","RLIKE","ROLLBACK","START","CACHE","CONSTRAINT","FOREIGN","PRIMARY","REFERENCES","DAYOFWEEK","EXTRACT","FLOOR","VIEWS","TIME","SYNC","TEXTFILE","SEQUENCEFILE","ORC","CSV","TSV","PARQUET","AVRO","RCFILE","JSONFILE","INPUTFORMAT","OUTPUTFORMAT"],dj=["ARRAY","BIGINT","BINARY","BOOLEAN","CHAR","DATE","DECIMAL","DOUBLE","FLOAT","INT","INTEGER","INTERVAL","MAP","NUMERIC","PRECISION","SMALLINT","STRUCT","TIMESTAMP","VARCHAR"]});var Wbe,kbe,Ej,xy,$be,Ybe,Vbe,qbe,qS,My=H(()=>{xt();cj();fj();Wbe=x(["SELECT [ALL | DISTINCT]"]),kbe=x(["WITH","FROM","WHERE","GROUP BY","HAVING","WINDOW","PARTITION BY","ORDER BY","SORT BY","CLUSTER BY","DISTRIBUTE BY","LIMIT","INSERT INTO [TABLE]","VALUES","SET","MERGE INTO","WHEN [NOT] MATCHED [THEN]","UPDATE SET","INSERT [VALUES]","INSERT OVERWRITE [LOCAL] DIRECTORY","LOAD DATA [LOCAL] INPATH","[OVERWRITE] INTO TABLE"]),Ej=x(["CREATE [TEMPORARY] [EXTERNAL] TABLE [IF NOT EXISTS]"]),xy=x(["CREATE [MATERIALIZED] VIEW [IF NOT EXISTS]","UPDATE","DELETE FROM","DROP TABLE [IF EXISTS]","ALTER TABLE","RENAME TO","TRUNCATE [TABLE]","ALTER","CREATE","USE","DESCRIBE","DROP","FETCH","SHOW","STORED AS","STORED BY","ROW FORMAT"]),$be=x(["UNION [ALL | DISTINCT]"]),Ybe=x(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","LEFT SEMI JOIN"]),Vbe=x(["{ROWS | RANGE} BETWEEN"]),qbe=x([]),qS={name:"hive",tokenizerOptions:{reservedSelect:Wbe,reservedClauses:[...kbe,...Ej,...xy],reservedSetOperations:$be,reservedJoins:Ybe,reservedKeywordPhrases:Vbe,reservedDataTypePhrases:qbe,reservedKeywords:uj,reservedDataTypes:dj,reservedFunctionNames:lj,extraParens:["[]"],stringTypes:['""-bs',"''-bs"],identTypes:["``"],variableTypes:[{quote:"{}",prefixes:["$"],requirePrefix:!0}],operators:["%","~","^","|","&","<=>","==","!","||"]},formatOptions:{onelineClauses:[...Ej,...xy],tabularOnelineClauses:xy}}});function ro(t){return t.map((e,r)=>{let n=t[r+1]||yi;if($n.SET(e)&&n.text==="(")return Object.assign(Object.assign({},e),{type:$.RESERVED_FUNCTION_NAME});let i=t[r-1]||yi;return $n.VALUES(e)&&i.text==="="?Object.assign(Object.assign({},e),{type:$.RESERVED_FUNCTION_NAME}):e})}var rf=H(()=>{gn()});var hj,Tj,pj=H(()=>{hj=["ACCESSIBLE","ADD","ALL","ALTER","ANALYZE","AND","AS","ASC","ASENSITIVE","BEFORE","BETWEEN","BOTH","BY","CALL","CASCADE","CASE","CHANGE","CHECK","COLLATE","COLUMN","CONDITION","CONSTRAINT","CONTINUE","CONVERT","CREATE","CROSS","CURRENT_DATE","CURRENT_ROLE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURSOR","DATABASE","DATABASES","DAY_HOUR","DAY_MICROSECOND","DAY_MINUTE","DAY_SECOND","DECLARE","DEFAULT","DELAYED","DELETE","DELETE_DOMAIN_ID","DESC","DESCRIBE","DETERMINISTIC","DISTINCT","DISTINCTROW","DIV","DO_DOMAIN_IDS","DROP","DUAL","EACH","ELSE","ELSEIF","ENCLOSED","ESCAPED","EXCEPT","EXISTS","EXIT","EXPLAIN","FALSE","FETCH","FOR","FORCE","FOREIGN","FROM","FULLTEXT","GENERAL","GRANT","GROUP","HAVING","HIGH_PRIORITY","HOUR_MICROSECOND","HOUR_MINUTE","HOUR_SECOND","IF","IGNORE","IGNORE_DOMAIN_IDS","IGNORE_SERVER_IDS","IN","INDEX","INFILE","INNER","INOUT","INSENSITIVE","INSERT","INTERSECT","INTERVAL","INTO","IS","ITERATE","JOIN","KEY","KEYS","KILL","LEADING","LEAVE","LEFT","LIKE","LIMIT","LINEAR","LINES","LOAD","LOCALTIME","LOCALTIMESTAMP","LOCK","LOOP","LOW_PRIORITY","MASTER_HEARTBEAT_PERIOD","MASTER_SSL_VERIFY_SERVER_CERT","MATCH","MAXVALUE","MINUTE_MICROSECOND","MINUTE_SECOND","MOD","MODIFIES","NATURAL","NOT","NO_WRITE_TO_BINLOG","NULL","OFFSET","ON","OPTIMIZE","OPTION","OPTIONALLY","OR","ORDER","OUT","OUTER","OUTFILE","OVER","PAGE_CHECKSUM","PARSE_VCOL_EXPR","PARTITION","POSITION","PRIMARY","PROCEDURE","PURGE","RANGE","READ","READS","READ_WRITE","RECURSIVE","REF_SYSTEM_ID","REFERENCES","REGEXP","RELEASE","RENAME","REPEAT","REPLACE","REQUIRE","RESIGNAL","RESTRICT","RETURN","RETURNING","REVOKE","RIGHT","RLIKE","ROW_NUMBER","ROWS","SCHEMA","SCHEMAS","SECOND_MICROSECOND","SELECT","SENSITIVE","SEPARATOR","SET","SHOW","SIGNAL","SLOW","SPATIAL","SPECIFIC","SQL","SQLEXCEPTION","SQLSTATE","SQLWARNING","SQL_BIG_RESULT","SQL_CALC_FOUND_ROWS","SQL_SMALL_RESULT","SSL","STARTING","STATS_AUTO_RECALC","STATS_PERSISTENT","STATS_SAMPLE_PAGES","STRAIGHT_JOIN","TABLE","TERMINATED","THEN","TO","TRAILING","TRIGGER","TRUE","UNDO","UNION","UNIQUE","UNLOCK","UNSIGNED","UPDATE","USAGE","USE","USING","UTC_DATE","UTC_TIME","UTC_TIMESTAMP","VALUES","WHEN","WHERE","WHILE","WINDOW","WITH","WRITE","XOR","YEAR_MONTH","ZEROFILL"],Tj=["BIGINT","BINARY","BIT","BLOB","CHAR BYTE","CHAR","CHARACTER","DATETIME","DEC","DECIMAL","DOUBLE PRECISION","DOUBLE","ENUM","FIXED","FLOAT","FLOAT4","FLOAT8","INT","INT1","INT2","INT3","INT4","INT8","INTEGER","LONG","LONGBLOB","LONGTEXT","MEDIUMBLOB","MEDIUMINT","MEDIUMTEXT","MIDDLEINT","NATIONAL CHAR","NATIONAL VARCHAR","NUMERIC","PRECISION","REAL","SMALLINT","TEXT","TIMESTAMP","TINYBLOB","TINYINT","TINYTEXT","VARBINARY","VARCHAR","VARCHARACTER","VARYING","YEAR"]});var Sj,Rj=H(()=>{Sj=["ADDDATE","ADD_MONTHS","BIT_AND","BIT_OR","BIT_XOR","CAST","COUNT","CUME_DIST","CURDATE","CURTIME","DATE_ADD","DATE_SUB","DATE_FORMAT","DECODE","DENSE_RANK","EXTRACT","FIRST_VALUE","GROUP_CONCAT","JSON_ARRAYAGG","JSON_OBJECTAGG","LAG","LEAD","MAX","MEDIAN","MID","MIN","NOW","NTH_VALUE","NTILE","POSITION","PERCENT_RANK","PERCENTILE_CONT","PERCENTILE_DISC","RANK","ROW_NUMBER","SESSION_USER","STD","STDDEV","STDDEV_POP","STDDEV_SAMP","SUBDATE","SUBSTR","SUBSTRING","SUM","SYSTEM_USER","TRIM","TRIM_ORACLE","VARIANCE","VAR_POP","VAR_SAMP","ABS","ACOS","ADDTIME","AES_DECRYPT","AES_ENCRYPT","ASIN","ATAN","ATAN2","BENCHMARK","BIN","BINLOG_GTID_POS","BIT_COUNT","BIT_LENGTH","CEIL","CEILING","CHARACTER_LENGTH","CHAR_LENGTH","CHR","COERCIBILITY","COLUMN_CHECK","COLUMN_EXISTS","COLUMN_LIST","COLUMN_JSON","COMPRESS","CONCAT","CONCAT_OPERATOR_ORACLE","CONCAT_WS","CONNECTION_ID","CONV","CONVERT_TZ","COS","COT","CRC32","DATEDIFF","DAYNAME","DAYOFMONTH","DAYOFWEEK","DAYOFYEAR","DEGREES","DECODE_HISTOGRAM","DECODE_ORACLE","DES_DECRYPT","DES_ENCRYPT","ELT","ENCODE","ENCRYPT","EXP","EXPORT_SET","EXTRACTVALUE","FIELD","FIND_IN_SET","FLOOR","FORMAT","FOUND_ROWS","FROM_BASE64","FROM_DAYS","FROM_UNIXTIME","GET_LOCK","GREATEST","HEX","IFNULL","INSTR","ISNULL","IS_FREE_LOCK","IS_USED_LOCK","JSON_ARRAY","JSON_ARRAY_APPEND","JSON_ARRAY_INSERT","JSON_COMPACT","JSON_CONTAINS","JSON_CONTAINS_PATH","JSON_DEPTH","JSON_DETAILED","JSON_EXISTS","JSON_EXTRACT","JSON_INSERT","JSON_KEYS","JSON_LENGTH","JSON_LOOSE","JSON_MERGE","JSON_MERGE_PATCH","JSON_MERGE_PRESERVE","JSON_QUERY","JSON_QUOTE","JSON_OBJECT","JSON_REMOVE","JSON_REPLACE","JSON_SET","JSON_SEARCH","JSON_TYPE","JSON_UNQUOTE","JSON_VALID","JSON_VALUE","LAST_DAY","LAST_INSERT_ID","LCASE","LEAST","LENGTH","LENGTHB","LN","LOAD_FILE","LOCATE","LOG","LOG10","LOG2","LOWER","LPAD","LPAD_ORACLE","LTRIM","LTRIM_ORACLE","MAKEDATE","MAKETIME","MAKE_SET","MASTER_GTID_WAIT","MASTER_POS_WAIT","MD5","MONTHNAME","NAME_CONST","NVL","NVL2","OCT","OCTET_LENGTH","ORD","PERIOD_ADD","PERIOD_DIFF","PI","POW","POWER","QUOTE","REGEXP_INSTR","REGEXP_REPLACE","REGEXP_SUBSTR","RADIANS","RAND","RELEASE_ALL_LOCKS","RELEASE_LOCK","REPLACE_ORACLE","REVERSE","ROUND","RPAD","RPAD_ORACLE","RTRIM","RTRIM_ORACLE","SEC_TO_TIME","SHA","SHA1","SHA2","SIGN","SIN","SLEEP","SOUNDEX","SPACE","SQRT","STRCMP","STR_TO_DATE","SUBSTR_ORACLE","SUBSTRING_INDEX","SUBTIME","SYS_GUID","TAN","TIMEDIFF","TIME_FORMAT","TIME_TO_SEC","TO_BASE64","TO_CHAR","TO_DAYS","TO_SECONDS","UCASE","UNCOMPRESS","UNCOMPRESSED_LENGTH","UNHEX","UNIX_TIMESTAMP","UPDATEXML","UPPER","UUID","UUID_SHORT","VERSION","WEEKDAY","WEEKOFYEAR","WSREP_LAST_WRITTEN_GTID","WSREP_LAST_SEEN_GTID","WSREP_SYNC_WAIT_UPTO_GTID","YEARWEEK","COALESCE","NULLIF"]});var Xbe,jbe,Aj,vy,zbe,Kbe,Jbe,Qbe,XS,Uy=H(()=>{xt();rf();pj();Rj();Xbe=x(["SELECT [ALL | DISTINCT | DISTINCTROW]"]),jbe=x(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY","HAVING","PARTITION BY","ORDER BY","LIMIT","OFFSET","FETCH {FIRST | NEXT}","INSERT [LOW_PRIORITY | DELAYED | HIGH_PRIORITY] [IGNORE] [INTO]","REPLACE [LOW_PRIORITY | DELAYED] [INTO]","VALUES","ON DUPLICATE KEY UPDATE","SET","RETURNING"]),Aj=x(["CREATE [OR REPLACE] [TEMPORARY] TABLE [IF NOT EXISTS]"]),vy=x(["CREATE [OR REPLACE] [SQL SECURITY DEFINER | SQL SECURITY INVOKER] VIEW [IF NOT EXISTS]","UPDATE [LOW_PRIORITY] [IGNORE]","DELETE [LOW_PRIORITY] [QUICK] [IGNORE] FROM","DROP [TEMPORARY] TABLE [IF EXISTS]","ALTER [ONLINE] [IGNORE] TABLE [IF EXISTS]","ADD [COLUMN] [IF NOT EXISTS]","{CHANGE | MODIFY} [COLUMN] [IF EXISTS]","DROP [COLUMN] [IF EXISTS]","RENAME [TO]","RENAME COLUMN","ALTER [COLUMN]","{SET | DROP} DEFAULT","SET {VISIBLE | INVISIBLE}","TRUNCATE [TABLE]","ALTER DATABASE","ALTER DATABASE COMMENT","ALTER EVENT","ALTER FUNCTION","ALTER PROCEDURE","ALTER SCHEMA","ALTER SCHEMA COMMENT","ALTER SEQUENCE","ALTER SERVER","ALTER USER","ALTER VIEW","ANALYZE","ANALYZE TABLE","BACKUP LOCK","BACKUP STAGE","BACKUP UNLOCK","BEGIN","BINLOG","CACHE INDEX","CALL","CHANGE MASTER TO","CHECK TABLE","CHECK VIEW","CHECKSUM TABLE","COMMIT","CREATE AGGREGATE FUNCTION","CREATE DATABASE","CREATE EVENT","CREATE FUNCTION","CREATE INDEX","CREATE PROCEDURE","CREATE ROLE","CREATE SEQUENCE","CREATE SERVER","CREATE SPATIAL INDEX","CREATE TRIGGER","CREATE UNIQUE INDEX","CREATE USER","DEALLOCATE PREPARE","DESCRIBE","DROP DATABASE","DROP EVENT","DROP FUNCTION","DROP INDEX","DROP PREPARE","DROP PROCEDURE","DROP ROLE","DROP SEQUENCE","DROP SERVER","DROP TRIGGER","DROP USER","DROP VIEW","EXECUTE","EXPLAIN","FLUSH","GET DIAGNOSTICS","GET DIAGNOSTICS CONDITION","GRANT","HANDLER","HELP","INSTALL PLUGIN","INSTALL SONAME","KILL","LOAD DATA INFILE","LOAD INDEX INTO CACHE","LOAD XML INFILE","LOCK TABLE","OPTIMIZE TABLE","PREPARE","PURGE BINARY LOGS","PURGE MASTER LOGS","RELEASE SAVEPOINT","RENAME TABLE","RENAME USER","REPAIR TABLE","REPAIR VIEW","RESET MASTER","RESET QUERY CACHE","RESET REPLICA","RESET SLAVE","RESIGNAL","REVOKE","ROLLBACK","SAVEPOINT","SET CHARACTER SET","SET DEFAULT ROLE","SET GLOBAL TRANSACTION","SET NAMES","SET PASSWORD","SET ROLE","SET STATEMENT","SET TRANSACTION","SHOW","SHOW ALL REPLICAS STATUS","SHOW ALL SLAVES STATUS","SHOW AUTHORS","SHOW BINARY LOGS","SHOW BINLOG EVENTS","SHOW BINLOG STATUS","SHOW CHARACTER SET","SHOW CLIENT_STATISTICS","SHOW COLLATION","SHOW COLUMNS","SHOW CONTRIBUTORS","SHOW CREATE DATABASE","SHOW CREATE EVENT","SHOW CREATE FUNCTION","SHOW CREATE PACKAGE","SHOW CREATE PACKAGE BODY","SHOW CREATE PROCEDURE","SHOW CREATE SEQUENCE","SHOW CREATE TABLE","SHOW CREATE TRIGGER","SHOW CREATE USER","SHOW CREATE VIEW","SHOW DATABASES","SHOW ENGINE","SHOW ENGINE INNODB STATUS","SHOW ENGINES","SHOW ERRORS","SHOW EVENTS","SHOW EXPLAIN","SHOW FUNCTION CODE","SHOW FUNCTION STATUS","SHOW GRANTS","SHOW INDEX","SHOW INDEXES","SHOW INDEX_STATISTICS","SHOW KEYS","SHOW LOCALES","SHOW MASTER LOGS","SHOW MASTER STATUS","SHOW OPEN TABLES","SHOW PACKAGE BODY CODE","SHOW PACKAGE BODY STATUS","SHOW PACKAGE STATUS","SHOW PLUGINS","SHOW PLUGINS SONAME","SHOW PRIVILEGES","SHOW PROCEDURE CODE","SHOW PROCEDURE STATUS","SHOW PROCESSLIST","SHOW PROFILE","SHOW PROFILES","SHOW QUERY_RESPONSE_TIME","SHOW RELAYLOG EVENTS","SHOW REPLICA","SHOW REPLICA HOSTS","SHOW REPLICA STATUS","SHOW SCHEMAS","SHOW SLAVE","SHOW SLAVE HOSTS","SHOW SLAVE STATUS","SHOW STATUS","SHOW STORAGE ENGINES","SHOW TABLE STATUS","SHOW TABLES","SHOW TRIGGERS","SHOW USER_STATISTICS","SHOW VARIABLES","SHOW WARNINGS","SHOW WSREP_MEMBERSHIP","SHOW WSREP_STATUS","SHUTDOWN","SIGNAL","START ALL REPLICAS","START ALL SLAVES","START REPLICA","START SLAVE","START TRANSACTION","STOP ALL REPLICAS","STOP ALL SLAVES","STOP REPLICA","STOP SLAVE","UNINSTALL PLUGIN","UNINSTALL SONAME","UNLOCK TABLE","USE","XA BEGIN","XA COMMIT","XA END","XA PREPARE","XA RECOVER","XA ROLLBACK","XA START"]),zbe=x(["UNION [ALL | DISTINCT]","EXCEPT [ALL | DISTINCT]","INTERSECT [ALL | DISTINCT]","MINUS [ALL | DISTINCT]"]),Kbe=x(["JOIN","{LEFT | RIGHT} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL JOIN","NATURAL {LEFT | RIGHT} [OUTER] JOIN","STRAIGHT_JOIN"]),Jbe=x(["ON {UPDATE | DELETE} [SET NULL | SET DEFAULT]","CHARACTER SET","{ROWS | RANGE} BETWEEN","IDENTIFIED BY"]),Qbe=x([]),XS={name:"mariadb",tokenizerOptions:{reservedSelect:Xbe,reservedClauses:[...jbe,...Aj,...vy],reservedSetOperations:zbe,reservedJoins:Kbe,reservedKeywordPhrases:Jbe,reservedDataTypePhrases:Qbe,supportsXor:!0,reservedKeywords:hj,reservedDataTypes:Tj,reservedFunctionNames:Sj,stringTypes:['""-qq-bs',"''-qq-bs",{quote:"''-raw",prefixes:["B","X"],requirePrefix:!0}],identTypes:["``"],identChars:{first:"$",rest:"$",allowFirstCharNumber:!0},variableTypes:[{regex:"@@?[A-Za-z0-9_.$]+"},{quote:'""-qq-bs',prefixes:["@"],requirePrefix:!0},{quote:"''-qq-bs",prefixes:["@"],requirePrefix:!0},{quote:"``",prefixes:["@"],requirePrefix:!0}],paramTypes:{positional:!0},lineCommentTypes:["--","#"],operators:["%",":=","&","|","^","~","<<",">>","<=>","&&","||","!","*.*"],postProcess:ro},formatOptions:{onelineClauses:[...Aj,...vy],tabularOnelineClauses:vy}}});var mj,_j,Ij=H(()=>{mj=["ACCESSIBLE","ADD","ALL","ALTER","ANALYZE","AND","AS","ASC","ASENSITIVE","BEFORE","BETWEEN","BOTH","BY","CALL","CASCADE","CASE","CHANGE","CHECK","COLLATE","COLUMN","CONDITION","CONSTRAINT","CONTINUE","CONVERT","CREATE","CROSS","CUBE","CUME_DIST","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURSOR","DATABASE","DATABASES","DAY_HOUR","DAY_MICROSECOND","DAY_MINUTE","DAY_SECOND","DECLARE","DEFAULT","DELAYED","DELETE","DENSE_RANK","DESC","DESCRIBE","DETERMINISTIC","DISTINCT","DISTINCTROW","DIV","DROP","DUAL","EACH","ELSE","ELSEIF","EMPTY","ENCLOSED","ESCAPED","EXCEPT","EXISTS","EXIT","EXPLAIN","FALSE","FETCH","FIRST_VALUE","FOR","FORCE","FOREIGN","FROM","FULLTEXT","FUNCTION","GENERATED","GET","GRANT","GROUP","GROUPING","GROUPS","HAVING","HIGH_PRIORITY","HOUR_MICROSECOND","HOUR_MINUTE","HOUR_SECOND","IF","IGNORE","IN","INDEX","INFILE","INNER","INOUT","INSENSITIVE","INSERT","IN","INTERSECT","INTERVAL","INTO","IO_AFTER_GTIDS","IO_BEFORE_GTIDS","IS","ITERATE","JOIN","JSON_TABLE","KEY","KEYS","KILL","LAG","LAST_VALUE","LATERAL","LEAD","LEADING","LEAVE","LEFT","LIKE","LIMIT","LINEAR","LINES","LOAD","LOCALTIME","LOCALTIMESTAMP","LOCK","LONG","LOOP","LOW_PRIORITY","MASTER_BIND","MASTER_SSL_VERIFY_SERVER_CERT","MATCH","MAXVALUE","MINUTE_MICROSECOND","MINUTE_SECOND","MOD","MODIFIES","NATURAL","NOT","NO_WRITE_TO_BINLOG","NTH_VALUE","NTILE","NULL","OF","ON","OPTIMIZE","OPTIMIZER_COSTS","OPTION","OPTIONALLY","OR","ORDER","OUT","OUTER","OUTFILE","OVER","PARTITION","PERCENT_RANK","PRIMARY","PROCEDURE","PURGE","RANGE","RANK","READ","READS","READ_WRITE","RECURSIVE","REFERENCES","REGEXP","RELEASE","RENAME","REPEAT","REPLACE","REQUIRE","RESIGNAL","RESTRICT","RETURN","REVOKE","RIGHT","RLIKE","ROW","ROWS","ROW_NUMBER","SCHEMA","SCHEMAS","SECOND_MICROSECOND","SELECT","SENSITIVE","SEPARATOR","SET","SHOW","SIGNAL","SPATIAL","SPECIFIC","SQL","SQLEXCEPTION","SQLSTATE","SQLWARNING","SQL_BIG_RESULT","SQL_CALC_FOUND_ROWS","SQL_SMALL_RESULT","SSL","STARTING","STORED","STRAIGHT_JOIN","SYSTEM","TABLE","TERMINATED","THEN","TO","TRAILING","TRIGGER","TRUE","UNDO","UNION","UNIQUE","UNLOCK","UNSIGNED","UPDATE","USAGE","USE","USING","UTC_DATE","UTC_TIME","UTC_TIMESTAMP","VALUES","VIRTUAL","WHEN","WHERE","WHILE","WINDOW","WITH","WRITE","XOR","YEAR_MONTH","ZEROFILL"],_j=["BIGINT","BINARY","BIT","BLOB","BOOL","BOOLEAN","CHAR","CHARACTER","DATE","DATETIME","DEC","DECIMAL","DOUBLE PRECISION","DOUBLE","ENUM","FIXED","FLOAT","FLOAT4","FLOAT8","INT","INT1","INT2","INT3","INT4","INT8","INTEGER","LONGBLOB","LONGTEXT","MEDIUMBLOB","MEDIUMINT","MEDIUMTEXT","MIDDLEINT","NATIONAL CHAR","NATIONAL VARCHAR","NUMERIC","PRECISION","REAL","SMALLINT","TEXT","TIME","TIMESTAMP","TINYBLOB","TINYINT","TINYTEXT","VARBINARY","VARCHAR","VARCHARACTER","VARYING","YEAR"]});var gj,Nj=H(()=>{gj=["ABS","ACOS","ADDDATE","ADDTIME","AES_DECRYPT","AES_ENCRYPT","ANY_VALUE","ASCII","ASIN","ATAN","ATAN2","AVG","BENCHMARK","BIN","BIN_TO_UUID","BINARY","BIT_AND","BIT_COUNT","BIT_LENGTH","BIT_OR","BIT_XOR","CAN_ACCESS_COLUMN","CAN_ACCESS_DATABASE","CAN_ACCESS_TABLE","CAN_ACCESS_USER","CAN_ACCESS_VIEW","CAST","CEIL","CEILING","CHAR","CHAR_LENGTH","CHARACTER_LENGTH","CHARSET","COALESCE","COERCIBILITY","COLLATION","COMPRESS","CONCAT","CONCAT_WS","CONNECTION_ID","CONV","CONVERT","CONVERT_TZ","COS","COT","COUNT","CRC32","CUME_DIST","CURDATE","CURRENT_DATE","CURRENT_ROLE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURTIME","DATABASE","DATE","DATE_ADD","DATE_FORMAT","DATE_SUB","DATEDIFF","DAY","DAYNAME","DAYOFMONTH","DAYOFWEEK","DAYOFYEAR","DEFAULT","DEGREES","DENSE_RANK","DIV","ELT","EXP","EXPORT_SET","EXTRACT","EXTRACTVALUE","FIELD","FIND_IN_SET","FIRST_VALUE","FLOOR","FORMAT","FORMAT_BYTES","FORMAT_PICO_TIME","FOUND_ROWS","FROM_BASE64","FROM_DAYS","FROM_UNIXTIME","GEOMCOLLECTION","GEOMETRYCOLLECTION","GET_DD_COLUMN_PRIVILEGES","GET_DD_CREATE_OPTIONS","GET_DD_INDEX_SUB_PART_LENGTH","GET_FORMAT","GET_LOCK","GREATEST","GROUP_CONCAT","GROUPING","GTID_SUBSET","GTID_SUBTRACT","HEX","HOUR","ICU_VERSION","IF","IFNULL","INET_ATON","INET_NTOA","INET6_ATON","INET6_NTOA","INSERT","INSTR","INTERNAL_AUTO_INCREMENT","INTERNAL_AVG_ROW_LENGTH","INTERNAL_CHECK_TIME","INTERNAL_CHECKSUM","INTERNAL_DATA_FREE","INTERNAL_DATA_LENGTH","INTERNAL_DD_CHAR_LENGTH","INTERNAL_GET_COMMENT_OR_ERROR","INTERNAL_GET_ENABLED_ROLE_JSON","INTERNAL_GET_HOSTNAME","INTERNAL_GET_USERNAME","INTERNAL_GET_VIEW_WARNING_OR_ERROR","INTERNAL_INDEX_COLUMN_CARDINALITY","INTERNAL_INDEX_LENGTH","INTERNAL_IS_ENABLED_ROLE","INTERNAL_IS_MANDATORY_ROLE","INTERNAL_KEYS_DISABLED","INTERNAL_MAX_DATA_LENGTH","INTERNAL_TABLE_ROWS","INTERNAL_UPDATE_TIME","INTERVAL","IS","IS_FREE_LOCK","IS_IPV4","IS_IPV4_COMPAT","IS_IPV4_MAPPED","IS_IPV6","IS NOT","IS NOT NULL","IS NULL","IS_USED_LOCK","IS_UUID","ISNULL","JSON_ARRAY","JSON_ARRAY_APPEND","JSON_ARRAY_INSERT","JSON_ARRAYAGG","JSON_CONTAINS","JSON_CONTAINS_PATH","JSON_DEPTH","JSON_EXTRACT","JSON_INSERT","JSON_KEYS","JSON_LENGTH","JSON_MERGE","JSON_MERGE_PATCH","JSON_MERGE_PRESERVE","JSON_OBJECT","JSON_OBJECTAGG","JSON_OVERLAPS","JSON_PRETTY","JSON_QUOTE","JSON_REMOVE","JSON_REPLACE","JSON_SCHEMA_VALID","JSON_SCHEMA_VALIDATION_REPORT","JSON_SEARCH","JSON_SET","JSON_STORAGE_FREE","JSON_STORAGE_SIZE","JSON_TABLE","JSON_TYPE","JSON_UNQUOTE","JSON_VALID","JSON_VALUE","LAG","LAST_DAY","LAST_INSERT_ID","LAST_VALUE","LCASE","LEAD","LEAST","LEFT","LENGTH","LIKE","LINESTRING","LN","LOAD_FILE","LOCALTIME","LOCALTIMESTAMP","LOCATE","LOG","LOG10","LOG2","LOWER","LPAD","LTRIM","MAKE_SET","MAKEDATE","MAKETIME","MASTER_POS_WAIT","MATCH","MAX","MBRCONTAINS","MBRCOVEREDBY","MBRCOVERS","MBRDISJOINT","MBREQUALS","MBRINTERSECTS","MBROVERLAPS","MBRTOUCHES","MBRWITHIN","MD5","MEMBER OF","MICROSECOND","MID","MIN","MINUTE","MOD","MONTH","MONTHNAME","MULTILINESTRING","MULTIPOINT","MULTIPOLYGON","NAME_CONST","NOT","NOT IN","NOT LIKE","NOT REGEXP","NOW","NTH_VALUE","NTILE","NULLIF","OCT","OCTET_LENGTH","ORD","PERCENT_RANK","PERIOD_ADD","PERIOD_DIFF","PI","POINT","POLYGON","POSITION","POW","POWER","PS_CURRENT_THREAD_ID","PS_THREAD_ID","QUARTER","QUOTE","RADIANS","RAND","RANDOM_BYTES","RANK","REGEXP","REGEXP_INSTR","REGEXP_LIKE","REGEXP_REPLACE","REGEXP_SUBSTR","RELEASE_ALL_LOCKS","RELEASE_LOCK","REPEAT","REPLACE","REVERSE","RIGHT","RLIKE","ROLES_GRAPHML","ROUND","ROW_COUNT","ROW_NUMBER","RPAD","RTRIM","SCHEMA","SEC_TO_TIME","SECOND","SESSION_USER","SHA1","SHA2","SIGN","SIN","SLEEP","SOUNDEX","SOUNDS LIKE","SOURCE_POS_WAIT","SPACE","SQRT","ST_AREA","ST_ASBINARY","ST_ASGEOJSON","ST_ASTEXT","ST_BUFFER","ST_BUFFER_STRATEGY","ST_CENTROID","ST_COLLECT","ST_CONTAINS","ST_CONVEXHULL","ST_CROSSES","ST_DIFFERENCE","ST_DIMENSION","ST_DISJOINT","ST_DISTANCE","ST_DISTANCE_SPHERE","ST_ENDPOINT","ST_ENVELOPE","ST_EQUALS","ST_EXTERIORRING","ST_FRECHETDISTANCE","ST_GEOHASH","ST_GEOMCOLLFROMTEXT","ST_GEOMCOLLFROMWKB","ST_GEOMETRYN","ST_GEOMETRYTYPE","ST_GEOMFROMGEOJSON","ST_GEOMFROMTEXT","ST_GEOMFROMWKB","ST_HAUSDORFFDISTANCE","ST_INTERIORRINGN","ST_INTERSECTION","ST_INTERSECTS","ST_ISCLOSED","ST_ISEMPTY","ST_ISSIMPLE","ST_ISVALID","ST_LATFROMGEOHASH","ST_LATITUDE","ST_LENGTH","ST_LINEFROMTEXT","ST_LINEFROMWKB","ST_LINEINTERPOLATEPOINT","ST_LINEINTERPOLATEPOINTS","ST_LONGFROMGEOHASH","ST_LONGITUDE","ST_MAKEENVELOPE","ST_MLINEFROMTEXT","ST_MLINEFROMWKB","ST_MPOINTFROMTEXT","ST_MPOINTFROMWKB","ST_MPOLYFROMTEXT","ST_MPOLYFROMWKB","ST_NUMGEOMETRIES","ST_NUMINTERIORRING","ST_NUMPOINTS","ST_OVERLAPS","ST_POINTATDISTANCE","ST_POINTFROMGEOHASH","ST_POINTFROMTEXT","ST_POINTFROMWKB","ST_POINTN","ST_POLYFROMTEXT","ST_POLYFROMWKB","ST_SIMPLIFY","ST_SRID","ST_STARTPOINT","ST_SWAPXY","ST_SYMDIFFERENCE","ST_TOUCHES","ST_TRANSFORM","ST_UNION","ST_VALIDATE","ST_WITHIN","ST_X","ST_Y","STATEMENT_DIGEST","STATEMENT_DIGEST_TEXT","STD","STDDEV","STDDEV_POP","STDDEV_SAMP","STR_TO_DATE","STRCMP","SUBDATE","SUBSTR","SUBSTRING","SUBSTRING_INDEX","SUBTIME","SUM","SYSDATE","SYSTEM_USER","TAN","TIME","TIME_FORMAT","TIME_TO_SEC","TIMEDIFF","TIMESTAMP","TIMESTAMPADD","TIMESTAMPDIFF","TO_BASE64","TO_DAYS","TO_SECONDS","TRIM","TRUNCATE","UCASE","UNCOMPRESS","UNCOMPRESSED_LENGTH","UNHEX","UNIX_TIMESTAMP","UPDATEXML","UPPER","UTC_DATE","UTC_TIME","UTC_TIMESTAMP","UUID","UUID_SHORT","UUID_TO_BIN","VALIDATE_PASSWORD_STRENGTH","VALUES","VAR_POP","VAR_SAMP","VARIANCE","VERSION","WAIT_FOR_EXECUTED_GTID_SET","WAIT_UNTIL_SQL_THREAD_AFTER_GTIDS","WEEK","WEEKDAY","WEEKOFYEAR","WEIGHT_STRING","YEAR","YEARWEEK"]});var Zbe,e0e,Oj,By,t0e,r0e,n0e,i0e,jS,Fy=H(()=>{xt();rf();Ij();Nj();Zbe=x(["SELECT [ALL | DISTINCT | DISTINCTROW]"]),e0e=x(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY","HAVING","WINDOW","PARTITION BY","ORDER BY","LIMIT","OFFSET","INSERT [LOW_PRIORITY | DELAYED | HIGH_PRIORITY] [IGNORE] [INTO]","REPLACE [LOW_PRIORITY | DELAYED] [INTO]","VALUES","ON DUPLICATE KEY UPDATE","SET"]),Oj=x(["CREATE [TEMPORARY] TABLE [IF NOT EXISTS]"]),By=x(["CREATE [OR REPLACE] [SQL SECURITY DEFINER | SQL SECURITY INVOKER] VIEW [IF NOT EXISTS]","UPDATE [LOW_PRIORITY] [IGNORE]","DELETE [LOW_PRIORITY] [QUICK] [IGNORE] FROM","DROP [TEMPORARY] TABLE [IF EXISTS]","ALTER TABLE","ADD [COLUMN]","{CHANGE | MODIFY} [COLUMN]","DROP [COLUMN]","RENAME [TO | AS]","RENAME COLUMN","ALTER [COLUMN]","{SET | DROP} DEFAULT","TRUNCATE [TABLE]","ALTER DATABASE","ALTER EVENT","ALTER FUNCTION","ALTER INSTANCE","ALTER LOGFILE GROUP","ALTER PROCEDURE","ALTER RESOURCE GROUP","ALTER SERVER","ALTER TABLESPACE","ALTER USER","ALTER VIEW","ANALYZE TABLE","BINLOG","CACHE INDEX","CALL","CHANGE MASTER TO","CHANGE REPLICATION FILTER","CHANGE REPLICATION SOURCE TO","CHECK TABLE","CHECKSUM TABLE","CLONE","COMMIT","CREATE DATABASE","CREATE EVENT","CREATE FUNCTION","CREATE FUNCTION","CREATE INDEX","CREATE LOGFILE GROUP","CREATE PROCEDURE","CREATE RESOURCE GROUP","CREATE ROLE","CREATE SERVER","CREATE SPATIAL REFERENCE SYSTEM","CREATE TABLESPACE","CREATE TRIGGER","CREATE USER","DEALLOCATE PREPARE","DESCRIBE","DROP DATABASE","DROP EVENT","DROP FUNCTION","DROP FUNCTION","DROP INDEX","DROP LOGFILE GROUP","DROP PROCEDURE","DROP RESOURCE GROUP","DROP ROLE","DROP SERVER","DROP SPATIAL REFERENCE SYSTEM","DROP TABLESPACE","DROP TRIGGER","DROP USER","DROP VIEW","EXECUTE","EXPLAIN","FLUSH","GRANT","HANDLER","HELP","IMPORT TABLE","INSTALL COMPONENT","INSTALL PLUGIN","KILL","LOAD DATA","LOAD INDEX INTO CACHE","LOAD XML","LOCK INSTANCE FOR BACKUP","LOCK TABLES","MASTER_POS_WAIT","OPTIMIZE TABLE","PREPARE","PURGE BINARY LOGS","RELEASE SAVEPOINT","RENAME TABLE","RENAME USER","REPAIR TABLE","RESET","RESET MASTER","RESET PERSIST","RESET REPLICA","RESET SLAVE","RESTART","REVOKE","ROLLBACK","ROLLBACK TO SAVEPOINT","SAVEPOINT","SET CHARACTER SET","SET DEFAULT ROLE","SET NAMES","SET PASSWORD","SET RESOURCE GROUP","SET ROLE","SET TRANSACTION","SHOW","SHOW BINARY LOGS","SHOW BINLOG EVENTS","SHOW CHARACTER SET","SHOW COLLATION","SHOW COLUMNS","SHOW CREATE DATABASE","SHOW CREATE EVENT","SHOW CREATE FUNCTION","SHOW CREATE PROCEDURE","SHOW CREATE TABLE","SHOW CREATE TRIGGER","SHOW CREATE USER","SHOW CREATE VIEW","SHOW DATABASES","SHOW ENGINE","SHOW ENGINES","SHOW ERRORS","SHOW EVENTS","SHOW FUNCTION CODE","SHOW FUNCTION STATUS","SHOW GRANTS","SHOW INDEX","SHOW MASTER STATUS","SHOW OPEN TABLES","SHOW PLUGINS","SHOW PRIVILEGES","SHOW PROCEDURE CODE","SHOW PROCEDURE STATUS","SHOW PROCESSLIST","SHOW PROFILE","SHOW PROFILES","SHOW RELAYLOG EVENTS","SHOW REPLICA STATUS","SHOW REPLICAS","SHOW SLAVE","SHOW SLAVE HOSTS","SHOW STATUS","SHOW TABLE STATUS","SHOW TABLES","SHOW TRIGGERS","SHOW VARIABLES","SHOW WARNINGS","SHUTDOWN","SOURCE_POS_WAIT","START GROUP_REPLICATION","START REPLICA","START SLAVE","START TRANSACTION","STOP GROUP_REPLICATION","STOP REPLICA","STOP SLAVE","TABLE","UNINSTALL COMPONENT","UNINSTALL PLUGIN","UNLOCK INSTANCE","UNLOCK TABLES","USE","XA","ITERATE","LEAVE","LOOP","REPEAT","RETURN","WHILE"]),t0e=x(["UNION [ALL | DISTINCT]"]),r0e=x(["JOIN","{LEFT | RIGHT} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL [INNER] JOIN","NATURAL {LEFT | RIGHT} [OUTER] JOIN","STRAIGHT_JOIN"]),n0e=x(["ON {UPDATE | DELETE} [SET NULL]","CHARACTER SET","{ROWS | RANGE} BETWEEN","IDENTIFIED BY"]),i0e=x([]),jS={name:"mysql",tokenizerOptions:{reservedSelect:Zbe,reservedClauses:[...e0e,...Oj,...By],reservedSetOperations:t0e,reservedJoins:r0e,reservedKeywordPhrases:n0e,reservedDataTypePhrases:i0e,supportsXor:!0,reservedKeywords:mj,reservedDataTypes:_j,reservedFunctionNames:gj,stringTypes:['""-qq-bs',{quote:"''-qq-bs",prefixes:["N"]},{quote:"''-raw",prefixes:["B","X"],requirePrefix:!0}],identTypes:["``"],identChars:{first:"$",rest:"$",allowFirstCharNumber:!0},variableTypes:[{regex:"@@?[A-Za-z0-9_.$]+"},{quote:'""-qq-bs',prefixes:["@"],requirePrefix:!0},{quote:"''-qq-bs",prefixes:["@"],requirePrefix:!0},{quote:"``",prefixes:["@"],requirePrefix:!0}],paramTypes:{positional:!0},lineCommentTypes:["--","#"],operators:["%",":=","&","|","^","~","<<",">>","<=>","->","->>","&&","||","!","*.*"],postProcess:ro},formatOptions:{onelineClauses:[...Oj,...By],tabularOnelineClauses:By}}});var Cj,yj,bj=H(()=>{Cj=["ADD","ALL","ALTER","ANALYZE","AND","ARRAY","AS","ASC","BETWEEN","BOTH","BY","CALL","CASCADE","CASE","CHANGE","CHECK","COLLATE","COLUMN","CONSTRAINT","CONTINUE","CONVERT","CREATE","CROSS","CURRENT_DATE","CURRENT_ROLE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURSOR","DATABASE","DATABASES","DAY_HOUR","DAY_MICROSECOND","DAY_MINUTE","DAY_SECOND","DEFAULT","DELAYED","DELETE","DESC","DESCRIBE","DISTINCT","DISTINCTROW","DIV","DOUBLE","DROP","DUAL","ELSE","ELSEIF","ENCLOSED","ESCAPED","EXCEPT","EXISTS","EXIT","EXPLAIN","FALSE","FETCH","FOR","FORCE","FOREIGN","FROM","FULLTEXT","GENERATED","GRANT","GROUP","GROUPS","HAVING","HIGH_PRIORITY","HOUR_MICROSECOND","HOUR_MINUTE","HOUR_SECOND","IF","IGNORE","ILIKE","IN","INDEX","INFILE","INNER","INOUT","INSERT","INTERSECT","INTERVAL","INTO","IS","ITERATE","JOIN","KEY","KEYS","KILL","LEADING","LEAVE","LEFT","LIKE","LIMIT","LINEAR","LINES","LOAD","LOCALTIME","LOCALTIMESTAMP","LOCK","LONG","LOW_PRIORITY","MATCH","MAXVALUE","MINUTE_MICROSECOND","MINUTE_SECOND","MOD","NATURAL","NOT","NO_WRITE_TO_BINLOG","NULL","OF","ON","OPTIMIZE","OPTION","OPTIONALLY","OR","ORDER","OUT","OUTER","OUTFILE","OVER","PARTITION","PRIMARY","PROCEDURE","RANGE","READ","RECURSIVE","REFERENCES","REGEXP","RELEASE","RENAME","REPEAT","REPLACE","REQUIRE","RESTRICT","REVOKE","RIGHT","RLIKE","ROW","ROWS","SECOND_MICROSECOND","SELECT","SET","SHOW","SPATIAL","SQL","SQLEXCEPTION","SQLSTATE","SQLWARNING","SQL_BIG_RESULT","SQL_CALC_FOUND_ROWS","SQL_SMALL_RESULT","SSL","STARTING","STATS_EXTENDED","STORED","STRAIGHT_JOIN","TABLE","TABLESAMPLE","TERMINATED","THEN","TO","TRAILING","TRIGGER","TRUE","TiDB_CURRENT_TSO","UNION","UNIQUE","UNLOCK","UNSIGNED","UNTIL","UPDATE","USAGE","USE","USING","UTC_DATE","UTC_TIME","UTC_TIMESTAMP","VALUES","VIRTUAL","WHEN","WHERE","WHILE","WINDOW","WITH","WRITE","XOR","YEAR_MONTH","ZEROFILL"],yj=["BIGINT","BINARY","BIT","BLOB","BOOL","BOOLEAN","CHAR","CHARACTER","DATE","DATETIME","DEC","DECIMAL","DOUBLE PRECISION","DOUBLE","ENUM","FIXED","INT","INT1","INT2","INT3","INT4","INT8","INTEGER","LONGBLOB","LONGTEXT","MEDIUMBLOB","MEDIUMINT","MIDDLEINT","NATIONAL CHAR","NATIONAL VARCHAR","NUMERIC","PRECISION","SMALLINT","TEXT","TIME","TIMESTAMP","TINYBLOB","TINYINT","TINYTEXT","VARBINARY","VARCHAR","VARCHARACTER","VARYING","YEAR"]});var wj,Lj=H(()=>{wj=["ABS","ACOS","ADDDATE","ADDTIME","AES_DECRYPT","AES_ENCRYPT","ANY_VALUE","ASCII","ASIN","ATAN","ATAN2","AVG","BENCHMARK","BIN","BIN_TO_UUID","BIT_AND","BIT_COUNT","BIT_LENGTH","BIT_OR","BIT_XOR","BITAND","BITNEG","BITOR","BITXOR","CASE","CAST","CEIL","CEILING","CHAR_FUNC","CHAR_LENGTH","CHARACTER_LENGTH","CHARSET","COALESCE","COERCIBILITY","COLLATION","COMPRESS","CONCAT","CONCAT_WS","CONNECTION_ID","CONV","CONVERT","CONVERT_TZ","COS","COT","COUNT","CRC32","CUME_DIST","CURDATE","CURRENT_DATE","CURRENT_RESOURCE_GROUP","CURRENT_ROLE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURTIME","DATABASE","DATE","DATE_ADD","DATE_FORMAT","DATE_SUB","DATEDIFF","DAY","DAYNAME","DAYOFMONTH","DAYOFWEEK","DAYOFYEAR","DECODE","DEFAULT_FUNC","DEGREES","DENSE_RANK","DES_DECRYPT","DES_ENCRYPT","DIV","ELT","ENCODE","ENCRYPT","EQ","EXP","EXPORT_SET","EXTRACT","FIELD","FIND_IN_SET","FIRST_VALUE","FLOOR","FORMAT","FORMAT_BYTES","FORMAT_NANO_TIME","FOUND_ROWS","FROM_BASE64","FROM_DAYS","FROM_UNIXTIME","GE","GET_FORMAT","GET_LOCK","GETPARAM","GREATEST","GROUP_CONCAT","GROUPING","GT","HEX","HOUR","IF","IFNULL","ILIKE","INET6_ATON","INET6_NTOA","INET_ATON","INET_NTOA","INSERT_FUNC","INSTR","INTDIV","INTERVAL","IS_FREE_LOCK","IS_IPV4","IS_IPV4_COMPAT","IS_IPV4_MAPPED","IS_IPV6","IS_USED_LOCK","IS_UUID","ISFALSE","ISNULL","ISTRUE","JSON_ARRAY","JSON_ARRAYAGG","JSON_ARRAY_APPEND","JSON_ARRAY_INSERT","JSON_CONTAINS","JSON_CONTAINS_PATH","JSON_DEPTH","JSON_EXTRACT","JSON_INSERT","JSON_KEYS","JSON_LENGTH","JSON_MEMBEROF","JSON_MERGE","JSON_MERGE_PATCH","JSON_MERGE_PRESERVE","JSON_OBJECT","JSON_OBJECTAGG","JSON_OVERLAPS","JSON_PRETTY","JSON_QUOTE","JSON_REMOVE","JSON_REPLACE","JSON_SEARCH","JSON_SET","JSON_STORAGE_FREE","JSON_STORAGE_SIZE","JSON_TYPE","JSON_UNQUOTE","JSON_VALID","LAG","LAST_DAY","LAST_INSERT_ID","LAST_VALUE","LASTVAL","LCASE","LE","LEAD","LEAST","LEFT","LEFTSHIFT","LENGTH","LIKE","LN","LOAD_FILE","LOCALTIME","LOCALTIMESTAMP","LOCATE","LOG","LOG10","LOG2","LOWER","LPAD","LT","LTRIM","MAKE_SET","MAKEDATE","MAKETIME","MASTER_POS_WAIT","MAX","MD5","MICROSECOND","MID","MIN","MINUS","MINUTE","MOD","MONTH","MONTHNAME","MUL","NAME_CONST","NE","NEXTVAL","NOT","NOW","NTH_VALUE","NTILE","NULLEQ","OCT","OCTET_LENGTH","OLD_PASSWORD","ORD","PASSWORD_FUNC","PERCENT_RANK","PERIOD_ADD","PERIOD_DIFF","PI","PLUS","POSITION","POW","POWER","QUARTER","QUOTE","RADIANS","RAND","RANDOM_BYTES","RANK","REGEXP","REGEXP_INSTR","REGEXP_LIKE","REGEXP_REPLACE","REGEXP_SUBSTR","RELEASE_ALL_LOCKS","RELEASE_LOCK","REPEAT","REPLACE","REVERSE","RIGHT","RIGHTSHIFT","ROUND","ROW_COUNT","ROW_NUMBER","RPAD","RTRIM","SCHEMA","SEC_TO_TIME","SECOND","SESSION_USER","SETVAL","SETVAR","SHA","SHA1","SHA2","SIGN","SIN","SLEEP","SM3","SPACE","SQRT","STD","STDDEV","STDDEV_POP","STDDEV_SAMP","STR_TO_DATE","STRCMP","SUBDATE","SUBSTR","SUBSTRING","SUBSTRING_INDEX","SUBTIME","SUM","SYSDATE","SYSTEM_USER","TAN","TIDB_BOUNDED_STALENESS","TIDB_CURRENT_TSO","TIDB_DECODE_BINARY_PLAN","TIDB_DECODE_KEY","TIDB_DECODE_PLAN","TIDB_DECODE_SQL_DIGESTS","TIDB_ENCODE_SQL_DIGEST","TIDB_IS_DDL_OWNER","TIDB_PARSE_TSO","TIDB_PARSE_TSO_LOGICAL","TIDB_ROW_CHECKSUM","TIDB_SHARD","TIDB_VERSION","TIME","TIME_FORMAT","TIME_TO_SEC","TIMEDIFF","TIMESTAMP","TIMESTAMPADD","TIMESTAMPDIFF","TO_BASE64","TO_DAYS","TO_SECONDS","TRANSLATE","TRIM","TRUNCATE","UCASE","UNARYMINUS","UNCOMPRESS","UNCOMPRESSED_LENGTH","UNHEX","UNIX_TIMESTAMP","UPPER","UTC_DATE","UTC_TIME","UTC_TIMESTAMP","UUID","UUID_SHORT","UUID_TO_BIN","VALIDATE_PASSWORD_STRENGTH","VAR_POP","VAR_SAMP","VARIANCE","VERSION","VITESS_HASH","WEEK","WEEKDAY","WEEKOFYEAR","WEIGHT_STRING","YEAR","YEARWEEK"]});var s0e,o0e,Dj,Gy,a0e,l0e,c0e,u0e,zS,Hy=H(()=>{xt();rf();bj();Lj();s0e=x(["SELECT [ALL | DISTINCT | DISTINCTROW]"]),o0e=x(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY","HAVING","WINDOW","PARTITION BY","ORDER BY","LIMIT","OFFSET","INSERT [LOW_PRIORITY | DELAYED | HIGH_PRIORITY] [IGNORE] [INTO]","REPLACE [LOW_PRIORITY | DELAYED] [INTO]","VALUES","ON DUPLICATE KEY UPDATE","SET"]),Dj=x(["CREATE [TEMPORARY] TABLE [IF NOT EXISTS]"]),Gy=x(["CREATE [OR REPLACE] [SQL SECURITY DEFINER | SQL SECURITY INVOKER] VIEW [IF NOT EXISTS]","UPDATE [LOW_PRIORITY] [IGNORE]","DELETE [LOW_PRIORITY] [QUICK] [IGNORE] FROM","DROP [TEMPORARY] TABLE [IF EXISTS]","ALTER TABLE","ADD [COLUMN]","{CHANGE | MODIFY} [COLUMN]","DROP [COLUMN]","RENAME [TO | AS]","RENAME COLUMN","ALTER [COLUMN]","{SET | DROP} DEFAULT","TRUNCATE [TABLE]","ALTER DATABASE","ALTER INSTANCE","ALTER RESOURCE GROUP","ALTER SEQUENCE","ALTER USER","ALTER VIEW","ANALYZE TABLE","CHECK TABLE","CHECKSUM TABLE","COMMIT","CREATE DATABASE","CREATE INDEX","CREATE RESOURCE GROUP","CREATE ROLE","CREATE SEQUENCE","CREATE USER","DEALLOCATE PREPARE","DESCRIBE","DROP DATABASE","DROP INDEX","DROP RESOURCE GROUP","DROP ROLE","DROP TABLESPACE","DROP USER","DROP VIEW","EXPLAIN","FLUSH","GRANT","IMPORT TABLE","INSTALL COMPONENT","INSTALL PLUGIN","KILL","LOAD DATA","LOCK INSTANCE FOR BACKUP","LOCK TABLES","OPTIMIZE TABLE","PREPARE","RELEASE SAVEPOINT","RENAME TABLE","RENAME USER","REPAIR TABLE","RESET","REVOKE","ROLLBACK","ROLLBACK TO SAVEPOINT","SAVEPOINT","SET CHARACTER SET","SET DEFAULT ROLE","SET NAMES","SET PASSWORD","SET RESOURCE GROUP","SET ROLE","SET TRANSACTION","SHOW","SHOW BINARY LOGS","SHOW BINLOG EVENTS","SHOW CHARACTER SET","SHOW COLLATION","SHOW COLUMNS","SHOW CREATE DATABASE","SHOW CREATE TABLE","SHOW CREATE USER","SHOW CREATE VIEW","SHOW DATABASES","SHOW ENGINE","SHOW ENGINES","SHOW ERRORS","SHOW EVENTS","SHOW GRANTS","SHOW INDEX","SHOW MASTER STATUS","SHOW OPEN TABLES","SHOW PLUGINS","SHOW PRIVILEGES","SHOW PROCESSLIST","SHOW PROFILE","SHOW PROFILES","SHOW STATUS","SHOW TABLE STATUS","SHOW TABLES","SHOW TRIGGERS","SHOW VARIABLES","SHOW WARNINGS","TABLE","UNINSTALL COMPONENT","UNINSTALL PLUGIN","UNLOCK INSTANCE","UNLOCK TABLES","USE"]),a0e=x(["UNION [ALL | DISTINCT]"]),l0e=x(["JOIN","{LEFT | RIGHT} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL [INNER] JOIN","NATURAL {LEFT | RIGHT} [OUTER] JOIN","STRAIGHT_JOIN"]),c0e=x(["ON {UPDATE | DELETE} [SET NULL]","CHARACTER SET","{ROWS | RANGE} BETWEEN","IDENTIFIED BY"]),u0e=x([]),zS={name:"tidb",tokenizerOptions:{reservedSelect:s0e,reservedClauses:[...o0e,...Dj,...Gy],reservedSetOperations:a0e,reservedJoins:l0e,reservedKeywordPhrases:c0e,reservedDataTypePhrases:u0e,supportsXor:!0,reservedKeywords:Cj,reservedDataTypes:yj,reservedFunctionNames:wj,stringTypes:['""-qq-bs',{quote:"''-qq-bs",prefixes:["N"]},{quote:"''-raw",prefixes:["B","X"],requirePrefix:!0}],identTypes:["``"],identChars:{first:"$",rest:"$",allowFirstCharNumber:!0},variableTypes:[{regex:"@@?[A-Za-z0-9_.$]+"},{quote:'""-qq-bs',prefixes:["@"],requirePrefix:!0},{quote:"''-qq-bs",prefixes:["@"],requirePrefix:!0},{quote:"``",prefixes:["@"],requirePrefix:!0}],paramTypes:{positional:!0},lineCommentTypes:["--","#"],operators:["%",":=","&","|","^","~","<<",">>","<=>","->","->>","&&","||","!","*.*"],postProcess:ro},formatOptions:{onelineClauses:[...Dj,...Gy],tabularOnelineClauses:Gy}}});var Pj,xj=H(()=>{Pj=["ABORT","ABS","ACOS","ADVISOR","ARRAY_AGG","ARRAY_AGG","ARRAY_APPEND","ARRAY_AVG","ARRAY_BINARY_SEARCH","ARRAY_CONCAT","ARRAY_CONTAINS","ARRAY_COUNT","ARRAY_DISTINCT","ARRAY_EXCEPT","ARRAY_FLATTEN","ARRAY_IFNULL","ARRAY_INSERT","ARRAY_INTERSECT","ARRAY_LENGTH","ARRAY_MAX","ARRAY_MIN","ARRAY_MOVE","ARRAY_POSITION","ARRAY_PREPEND","ARRAY_PUT","ARRAY_RANGE","ARRAY_REMOVE","ARRAY_REPEAT","ARRAY_REPLACE","ARRAY_REVERSE","ARRAY_SORT","ARRAY_STAR","ARRAY_SUM","ARRAY_SYMDIFF","ARRAY_SYMDIFF1","ARRAY_SYMDIFFN","ARRAY_UNION","ASIN","ATAN","ATAN2","AVG","BASE64","BASE64_DECODE","BASE64_ENCODE","BITAND ","BITCLEAR ","BITNOT ","BITOR ","BITSET ","BITSHIFT ","BITTEST ","BITXOR ","CEIL","CLOCK_LOCAL","CLOCK_MILLIS","CLOCK_STR","CLOCK_TZ","CLOCK_UTC","COALESCE","CONCAT","CONCAT2","CONTAINS","CONTAINS_TOKEN","CONTAINS_TOKEN_LIKE","CONTAINS_TOKEN_REGEXP","COS","COUNT","COUNT","COUNTN","CUME_DIST","CURL","DATE_ADD_MILLIS","DATE_ADD_STR","DATE_DIFF_MILLIS","DATE_DIFF_STR","DATE_FORMAT_STR","DATE_PART_MILLIS","DATE_PART_STR","DATE_RANGE_MILLIS","DATE_RANGE_STR","DATE_TRUNC_MILLIS","DATE_TRUNC_STR","DECODE","DECODE_JSON","DEGREES","DENSE_RANK","DURATION_TO_STR","ENCODED_SIZE","ENCODE_JSON","EXP","FIRST_VALUE","FLOOR","GREATEST","HAS_TOKEN","IFINF","IFMISSING","IFMISSINGORNULL","IFNAN","IFNANORINF","IFNULL","INITCAP","ISARRAY","ISATOM","ISBITSET","ISBOOLEAN","ISNUMBER","ISOBJECT","ISSTRING","LAG","LAST_VALUE","LEAD","LEAST","LENGTH","LN","LOG","LOWER","LTRIM","MAX","MEAN","MEDIAN","META","MILLIS","MILLIS_TO_LOCAL","MILLIS_TO_STR","MILLIS_TO_TZ","MILLIS_TO_UTC","MILLIS_TO_ZONE_NAME","MIN","MISSINGIF","NANIF","NEGINFIF","NOW_LOCAL","NOW_MILLIS","NOW_STR","NOW_TZ","NOW_UTC","NTH_VALUE","NTILE","NULLIF","NVL","NVL2","OBJECT_ADD","OBJECT_CONCAT","OBJECT_INNER_PAIRS","OBJECT_INNER_VALUES","OBJECT_LENGTH","OBJECT_NAMES","OBJECT_PAIRS","OBJECT_PUT","OBJECT_REMOVE","OBJECT_RENAME","OBJECT_REPLACE","OBJECT_UNWRAP","OBJECT_VALUES","PAIRS","PERCENT_RANK","PI","POLY_LENGTH","POSINFIF","POSITION","POWER","RADIANS","RANDOM","RANK","RATIO_TO_REPORT","REGEXP_CONTAINS","REGEXP_LIKE","REGEXP_MATCHES","REGEXP_POSITION","REGEXP_REPLACE","REGEXP_SPLIT","REGEX_CONTAINS","REGEX_LIKE","REGEX_MATCHES","REGEX_POSITION","REGEX_REPLACE","REGEX_SPLIT","REPEAT","REPLACE","REVERSE","ROUND","ROW_NUMBER","RTRIM","SEARCH","SEARCH_META","SEARCH_SCORE","SIGN","SIN","SPLIT","SQRT","STDDEV","STDDEV_POP","STDDEV_SAMP","STR_TO_DURATION","STR_TO_MILLIS","STR_TO_TZ","STR_TO_UTC","STR_TO_ZONE_NAME","SUBSTR","SUFFIXES","SUM","TAN","TITLE","TOARRAY","TOATOM","TOBOOLEAN","TOKENS","TOKENS","TONUMBER","TOOBJECT","TOSTRING","TRIM","TRUNC","UPPER","UUID","VARIANCE","VARIANCE_POP","VARIANCE_SAMP","VAR_POP","VAR_SAMP","WEEKDAY_MILLIS","WEEKDAY_STR","CAST"]});var Mj,vj,Uj=H(()=>{Mj=["ADVISE","ALL","ALTER","ANALYZE","AND","ANY","ARRAY","AS","ASC","AT","BEGIN","BETWEEN","BINARY","BOOLEAN","BREAK","BUCKET","BUILD","BY","CALL","CASE","CAST","CLUSTER","COLLATE","COLLECTION","COMMIT","COMMITTED","CONNECT","CONTINUE","CORRELATED","COVER","CREATE","CURRENT","DATABASE","DATASET","DATASTORE","DECLARE","DECREMENT","DELETE","DERIVED","DESC","DESCRIBE","DISTINCT","DO","DROP","EACH","ELEMENT","ELSE","END","EVERY","EXCEPT","EXCLUDE","EXECUTE","EXISTS","EXPLAIN","FALSE","FETCH","FILTER","FIRST","FLATTEN","FLUSH","FOLLOWING","FOR","FORCE","FROM","FTS","FUNCTION","GOLANG","GRANT","GROUP","GROUPS","GSI","HASH","HAVING","IF","IGNORE","ILIKE","IN","INCLUDE","INCREMENT","INDEX","INFER","INLINE","INNER","INSERT","INTERSECT","INTO","IS","ISOLATION","JAVASCRIPT","JOIN","KEY","KEYS","KEYSPACE","KNOWN","LANGUAGE","LAST","LEFT","LET","LETTING","LEVEL","LIKE","LIMIT","LSM","MAP","MAPPING","MATCHED","MATERIALIZED","MERGE","MINUS","MISSING","NAMESPACE","NEST","NL","NO","NOT","NTH_VALUE","NULL","NULLS","NUMBER","OBJECT","OFFSET","ON","OPTION","OPTIONS","OR","ORDER","OTHERS","OUTER","OVER","PARSE","PARTITION","PASSWORD","PATH","POOL","PRECEDING","PREPARE","PRIMARY","PRIVATE","PRIVILEGE","PROBE","PROCEDURE","PUBLIC","RANGE","RAW","REALM","REDUCE","RENAME","RESPECT","RETURN","RETURNING","REVOKE","RIGHT","ROLE","ROLLBACK","ROW","ROWS","SATISFIES","SAVEPOINT","SCHEMA","SCOPE","SELECT","SELF","SEMI","SET","SHOW","SOME","START","STATISTICS","STRING","SYSTEM","THEN","TIES","TO","TRAN","TRANSACTION","TRIGGER","TRUE","TRUNCATE","UNBOUNDED","UNDER","UNION","UNIQUE","UNKNOWN","UNNEST","UNSET","UPDATE","UPSERT","USE","USER","USING","VALIDATE","VALUE","VALUED","VALUES","VIA","VIEW","WHEN","WHERE","WHILE","WINDOW","WITH","WITHIN","WORK","XOR"],vj=[]});var d0e,f0e,Bj,E0e,h0e,T0e,p0e,KS,Wy=H(()=>{xt();xj();Uj();d0e=x(["SELECT [ALL | DISTINCT]"]),f0e=x(["WITH","FROM","WHERE","GROUP BY","HAVING","WINDOW","PARTITION BY","ORDER BY","LIMIT","OFFSET","INSERT INTO","VALUES","SET","MERGE INTO","WHEN [NOT] MATCHED THEN","UPDATE SET","INSERT","NEST","UNNEST","RETURNING"]),Bj=x(["UPDATE","DELETE FROM","SET SCHEMA","ADVISE","ALTER INDEX","BEGIN TRANSACTION","BUILD INDEX","COMMIT TRANSACTION","CREATE COLLECTION","CREATE FUNCTION","CREATE INDEX","CREATE PRIMARY INDEX","CREATE SCOPE","DROP COLLECTION","DROP FUNCTION","DROP INDEX","DROP PRIMARY INDEX","DROP SCOPE","EXECUTE","EXECUTE FUNCTION","EXPLAIN","GRANT","INFER","PREPARE","REVOKE","ROLLBACK TRANSACTION","SAVEPOINT","SET TRANSACTION","UPDATE STATISTICS","UPSERT","LET","SET CURRENT SCHEMA","SHOW","USE [PRIMARY] KEYS"]),E0e=x(["UNION [ALL]","EXCEPT [ALL]","INTERSECT [ALL]"]),h0e=x(["JOIN","{LEFT | RIGHT} [OUTER] JOIN","INNER JOIN"]),T0e=x(["{ROWS | RANGE | GROUPS} BETWEEN"]),p0e=x([]),KS={name:"n1ql",tokenizerOptions:{reservedSelect:d0e,reservedClauses:[...f0e,...Bj],reservedSetOperations:E0e,reservedJoins:h0e,reservedKeywordPhrases:T0e,reservedDataTypePhrases:p0e,supportsXor:!0,reservedKeywords:Mj,reservedDataTypes:vj,reservedFunctionNames:Pj,stringTypes:['""-bs',"''-bs"],identTypes:["``"],extraParens:["[]","{}"],paramTypes:{positional:!0,numbered:["$"],named:["$"]},lineCommentTypes:["#","--"],operators:["%","==",":","||"]},formatOptions:{onelineClauses:Bj}}});var Fj,Gj,Hj=H(()=>{Fj=["ADD","AGENT","AGGREGATE","ALL","ALTER","AND","ANY","ARROW","AS","ASC","AT","ATTRIBUTE","AUTHID","AVG","BEGIN","BETWEEN","BLOCK","BODY","BOTH","BOUND","BULK","BY","BYTE","CALL","CALLING","CASCADE","CASE","CHARSET","CHARSETFORM","CHARSETID","CHECK","CLOSE","CLUSTER","CLUSTERS","COLAUTH","COLLECT","COLUMNS","COMMENT","COMMIT","COMMITTED","COMPILED","COMPRESS","CONNECT","CONSTANT","CONSTRUCTOR","CONTEXT","CONVERT","COUNT","CRASH","CREATE","CURRENT","CURSOR","CUSTOMDATUM","DANGLING","DATA","DAY","DECLARE","DEFAULT","DEFINE","DELETE","DESC","DETERMINISTIC","DISTINCT","DROP","DURATION","ELEMENT","ELSE","ELSIF","EMPTY","END","ESCAPE","EXCEPT","EXCEPTION","EXCEPTIONS","EXCLUSIVE","EXECUTE","EXISTS","EXIT","EXTERNAL","FETCH","FINAL","FIXED","FOR","FORALL","FORCE","FORM","FROM","FUNCTION","GENERAL","GOTO","GRANT","GROUP","HASH","HAVING","HEAP","HIDDEN","HOUR","IDENTIFIED","IF","IMMEDIATE","IN","INCLUDING","INDEX","INDEXES","INDICATOR","INDICES","INFINITE","INSERT","INSTANTIABLE","INTERFACE","INTERSECT","INTERVAL","INTO","INVALIDATE","IS","ISOLATION","JAVA","LANGUAGE","LARGE","LEADING","LENGTH","LEVEL","LIBRARY","LIKE","LIKE2","LIKE4","LIKEC","LIMIT","LIMITED","LOCAL","LOCK","LOOP","MAP","MAX","MAXLEN","MEMBER","MERGE","MIN","MINUS","MINUTE","MOD","MODE","MODIFY","MONTH","MULTISET","NAME","NAN","NATIONAL","NATIVE","NEW","NOCOMPRESS","NOCOPY","NOT","NOWAIT","NULL","OBJECT","OCICOLL","OCIDATE","OCIDATETIME","OCIDURATION","OCIINTERVAL","OCILOBLOCATOR","OCINUMBER","OCIRAW","OCIREF","OCIREFCURSOR","OCIROWID","OCISTRING","OCITYPE","OF","ON","ONLY","OPAQUE","OPEN","OPERATOR","OPTION","OR","ORACLE","ORADATA","ORDER","OVERLAPS","ORGANIZATION","ORLANY","ORLVARY","OTHERS","OUT","OVERRIDING","PACKAGE","PARALLEL_ENABLE","PARAMETER","PARAMETERS","PARTITION","PASCAL","PIPE","PIPELINED","PRAGMA","PRIOR","PRIVATE","PROCEDURE","PUBLIC","RAISE","RANGE","READ","RECORD","REF","REFERENCE","REM","REMAINDER","RENAME","RESOURCE","RESULT","RETURN","RETURNING","REVERSE","REVOKE","ROLLBACK","ROW","SAMPLE","SAVE","SAVEPOINT","SB1","SB2","SB4","SECOND","SEGMENT","SELECT","SELF","SEPARATE","SEQUENCE","SERIALIZABLE","SET","SHARE","SHORT","SIZE","SIZE_T","SOME","SPARSE","SQL","SQLCODE","SQLDATA","SQLNAME","SQLSTATE","STANDARD","START","STATIC","STDDEV","STORED","STRING","STRUCT","STYLE","SUBMULTISET","SUBPARTITION","SUBSTITUTABLE","SUBTYPE","SUM","SYNONYM","TABAUTH","TABLE","TDO","THE","THEN","TIME","TIMEZONE_ABBR","TIMEZONE_HOUR","TIMEZONE_MINUTE","TIMEZONE_REGION","TO","TRAILING","TRANSAC","TRANSACTIONAL","TRUSTED","TYPE","UB1","UB2","UB4","UNDER","UNION","UNIQUE","UNSIGNED","UNTRUSTED","UPDATE","USE","USING","VALIST","VALUE","VALUES","VARIABLE","VARIANCE","VARRAY","VIEW","VIEWS","VOID","WHEN","WHERE","WHILE","WITH","WORK","WRAPPED","WRITE","YEAR","ZONE"],Gj=["ARRAY","BFILE_BASE","BINARY","BLOB_BASE","CHAR VARYING","CHAR_BASE","CHAR","CHARACTER VARYING","CHARACTER","CLOB_BASE","DATE_BASE","DATE","DECIMAL","DOUBLE","FLOAT","INT","INTERVAL DAY","INTERVAL YEAR","LONG","NATIONAL CHAR VARYING","NATIONAL CHAR","NATIONAL CHARACTER VARYING","NATIONAL CHARACTER","NCHAR VARYING","NCHAR","NCHAR","NUMBER_BASE","NUMBER","NUMBERIC","NVARCHAR","PRECISION","RAW","TIMESTAMP","UROWID","VARCHAR","VARCHAR2"]});var Wj,kj=H(()=>{Wj=["ABS","ACOS","ASIN","ATAN","ATAN2","BITAND","CEIL","COS","COSH","EXP","FLOOR","LN","LOG","MOD","NANVL","POWER","REMAINDER","ROUND","SIGN","SIN","SINH","SQRT","TAN","TANH","TRUNC","WIDTH_BUCKET","CHR","CONCAT","INITCAP","LOWER","LPAD","LTRIM","NLS_INITCAP","NLS_LOWER","NLSSORT","NLS_UPPER","REGEXP_REPLACE","REGEXP_SUBSTR","REPLACE","RPAD","RTRIM","SOUNDEX","SUBSTR","TRANSLATE","TREAT","TRIM","UPPER","NLS_CHARSET_DECL_LEN","NLS_CHARSET_ID","NLS_CHARSET_NAME","ASCII","INSTR","LENGTH","REGEXP_INSTR","ADD_MONTHS","CURRENT_DATE","CURRENT_TIMESTAMP","DBTIMEZONE","EXTRACT","FROM_TZ","LAST_DAY","LOCALTIMESTAMP","MONTHS_BETWEEN","NEW_TIME","NEXT_DAY","NUMTODSINTERVAL","NUMTOYMINTERVAL","ROUND","SESSIONTIMEZONE","SYS_EXTRACT_UTC","SYSDATE","SYSTIMESTAMP","TO_CHAR","TO_TIMESTAMP","TO_TIMESTAMP_TZ","TO_DSINTERVAL","TO_YMINTERVAL","TRUNC","TZ_OFFSET","GREATEST","LEAST","ASCIISTR","BIN_TO_NUM","CAST","CHARTOROWID","COMPOSE","CONVERT","DECOMPOSE","HEXTORAW","NUMTODSINTERVAL","NUMTOYMINTERVAL","RAWTOHEX","RAWTONHEX","ROWIDTOCHAR","ROWIDTONCHAR","SCN_TO_TIMESTAMP","TIMESTAMP_TO_SCN","TO_BINARY_DOUBLE","TO_BINARY_FLOAT","TO_CHAR","TO_CLOB","TO_DATE","TO_DSINTERVAL","TO_LOB","TO_MULTI_BYTE","TO_NCHAR","TO_NCLOB","TO_NUMBER","TO_DSINTERVAL","TO_SINGLE_BYTE","TO_TIMESTAMP","TO_TIMESTAMP_TZ","TO_YMINTERVAL","TO_YMINTERVAL","TRANSLATE","UNISTR","BFILENAME","EMPTY_BLOB,","EMPTY_CLOB","CARDINALITY","COLLECT","POWERMULTISET","POWERMULTISET_BY_CARDINALITY","SET","SYS_CONNECT_BY_PATH","CLUSTER_ID","CLUSTER_PROBABILITY","CLUSTER_SET","FEATURE_ID","FEATURE_SET","FEATURE_VALUE","PREDICTION","PREDICTION_COST","PREDICTION_DETAILS","PREDICTION_PROBABILITY","PREDICTION_SET","APPENDCHILDXML","DELETEXML","DEPTH","EXTRACT","EXISTSNODE","EXTRACTVALUE","INSERTCHILDXML","INSERTXMLBEFORE","PATH","SYS_DBURIGEN","SYS_XMLAGG","SYS_XMLGEN","UPDATEXML","XMLAGG","XMLCDATA","XMLCOLATTVAL","XMLCOMMENT","XMLCONCAT","XMLFOREST","XMLPARSE","XMLPI","XMLQUERY","XMLROOT","XMLSEQUENCE","XMLSERIALIZE","XMLTABLE","XMLTRANSFORM","DECODE","DUMP","ORA_HASH","VSIZE","COALESCE","LNNVL","NULLIF","NVL","NVL2","SYS_CONTEXT","SYS_GUID","SYS_TYPEID","UID","USER","USERENV","AVG","COLLECT","CORR","CORR_S","CORR_K","COUNT","COVAR_POP","COVAR_SAMP","CUME_DIST","DENSE_RANK","FIRST","GROUP_ID","GROUPING","GROUPING_ID","LAST","MAX","MEDIAN","MIN","PERCENTILE_CONT","PERCENTILE_DISC","PERCENT_RANK","RANK","REGR_SLOPE","REGR_INTERCEPT","REGR_COUNT","REGR_R2","REGR_AVGX","REGR_AVGY","REGR_SXX","REGR_SYY","REGR_SXY","STATS_BINOMIAL_TEST","STATS_CROSSTAB","STATS_F_TEST","STATS_KS_TEST","STATS_MODE","STATS_MW_TEST","STATS_ONE_WAY_ANOVA","STATS_T_TEST_ONE","STATS_T_TEST_PAIRED","STATS_T_TEST_INDEP","STATS_T_TEST_INDEPU","STATS_WSR_TEST","STDDEV","STDDEV_POP","STDDEV_SAMP","SUM","VAR_POP","VAR_SAMP","VARIANCE","FIRST_VALUE","LAG","LAST_VALUE","LEAD","NTILE","RATIO_TO_REPORT","ROW_NUMBER","DEREF","MAKE_REF","REF","REFTOHEX","VALUE","CV","ITERATION_NUMBER","PRESENTNNV","PRESENTV","PREVIOUS"]});function g0e(t){let e=yi;return t.map(r=>$n.SET(r)&&$n.BY(e)?Object.assign(Object.assign({},r),{type:$.RESERVED_KEYWORD}):(WS(r.type)&&(e=r),r))}var S0e,R0e,$j,ky,A0e,m0e,_0e,I0e,JS,$y=H(()=>{xt();gn();Hj();kj();S0e=x(["SELECT [ALL | DISTINCT | UNIQUE]"]),R0e=x(["WITH","FROM","WHERE","GROUP BY","HAVING","PARTITION BY","ORDER [SIBLINGS] BY","OFFSET","FETCH {FIRST | NEXT}","FOR UPDATE [OF]","INSERT [INTO | ALL INTO]","VALUES","SET","MERGE [INTO]","WHEN [NOT] MATCHED [THEN]","UPDATE SET","RETURNING"]),$j=x(["CREATE [GLOBAL TEMPORARY | PRIVATE TEMPORARY | SHARDED | DUPLICATED | IMMUTABLE BLOCKCHAIN | BLOCKCHAIN | IMMUTABLE] TABLE"]),ky=x(["CREATE [OR REPLACE] [NO FORCE | FORCE] [EDITIONING | EDITIONABLE | EDITIONABLE EDITIONING | NONEDITIONABLE] VIEW","CREATE MATERIALIZED VIEW","UPDATE [ONLY]","DELETE FROM [ONLY]","DROP TABLE","ALTER TABLE","ADD","DROP {COLUMN | UNUSED COLUMNS | COLUMNS CONTINUE}","MODIFY","RENAME TO","RENAME COLUMN","TRUNCATE TABLE","SET SCHEMA","BEGIN","CONNECT BY","DECLARE","EXCEPT","EXCEPTION","LOOP","START WITH"]),A0e=x(["UNION [ALL]","MINUS","INTERSECT"]),m0e=x(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL [INNER] JOIN","NATURAL {LEFT | RIGHT | FULL} [OUTER] JOIN","{CROSS | OUTER} APPLY"]),_0e=x(["ON {UPDATE | DELETE} [SET NULL]","ON COMMIT","{ROWS | RANGE} BETWEEN"]),I0e=x([]),JS={name:"plsql",tokenizerOptions:{reservedSelect:S0e,reservedClauses:[...R0e,...$j,...ky],reservedSetOperations:A0e,reservedJoins:m0e,reservedKeywordPhrases:_0e,reservedDataTypePhrases:I0e,supportsXor:!0,reservedKeywords:Fj,reservedDataTypes:Gj,reservedFunctionNames:Wj,stringTypes:[{quote:"''-qq",prefixes:["N"]},{quote:"q''",prefixes:["N"]}],identTypes:['""-qq'],identChars:{rest:"$#"},variableTypes:[{regex:"&{1,2}[A-Za-z][A-Za-z0-9_$#]*"}],paramTypes:{numbered:[":"],named:[":"]},operators:["**",":=","%","~=","^=",">>","<<","=>","@","||"],postProcess:g0e},formatOptions:{alwaysDenseOperators:["@"],onelineClauses:[...$j,...ky],tabularOnelineClauses:ky}}});var Yj,Vj=H(()=>{Yj=["ABS","ACOS","ACOSD","ACOSH","ASIN","ASIND","ASINH","ATAN","ATAN2","ATAN2D","ATAND","ATANH","CBRT","CEIL","CEILING","COS","COSD","COSH","COT","COTD","DEGREES","DIV","EXP","FACTORIAL","FLOOR","GCD","LCM","LN","LOG","LOG10","MIN_SCALE","MOD","PI","POWER","RADIANS","RANDOM","ROUND","SCALE","SETSEED","SIGN","SIN","SIND","SINH","SQRT","TAN","TAND","TANH","TRIM_SCALE","TRUNC","WIDTH_BUCKET","ABS","ASCII","BIT_LENGTH","BTRIM","CHARACTER_LENGTH","CHAR_LENGTH","CHR","CONCAT","CONCAT_WS","FORMAT","INITCAP","LEFT","LENGTH","LOWER","LPAD","LTRIM","MD5","NORMALIZE","OCTET_LENGTH","OVERLAY","PARSE_IDENT","PG_CLIENT_ENCODING","POSITION","QUOTE_IDENT","QUOTE_LITERAL","QUOTE_NULLABLE","REGEXP_MATCH","REGEXP_MATCHES","REGEXP_REPLACE","REGEXP_SPLIT_TO_ARRAY","REGEXP_SPLIT_TO_TABLE","REPEAT","REPLACE","REVERSE","RIGHT","RPAD","RTRIM","SPLIT_PART","SPRINTF","STARTS_WITH","STRING_AGG","STRING_TO_ARRAY","STRING_TO_TABLE","STRPOS","SUBSTR","SUBSTRING","TO_ASCII","TO_HEX","TRANSLATE","TRIM","UNISTR","UPPER","BIT_COUNT","BIT_LENGTH","BTRIM","CONVERT","CONVERT_FROM","CONVERT_TO","DECODE","ENCODE","GET_BIT","GET_BYTE","LENGTH","LTRIM","MD5","OCTET_LENGTH","OVERLAY","POSITION","RTRIM","SET_BIT","SET_BYTE","SHA224","SHA256","SHA384","SHA512","STRING_AGG","SUBSTR","SUBSTRING","TRIM","BIT_COUNT","BIT_LENGTH","GET_BIT","LENGTH","OCTET_LENGTH","OVERLAY","POSITION","SET_BIT","SUBSTRING","REGEXP_MATCH","REGEXP_MATCHES","REGEXP_REPLACE","REGEXP_SPLIT_TO_ARRAY","REGEXP_SPLIT_TO_TABLE","TO_CHAR","TO_DATE","TO_NUMBER","TO_TIMESTAMP","CLOCK_TIMESTAMP","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","DATE_BIN","DATE_PART","DATE_TRUNC","EXTRACT","ISFINITE","JUSTIFY_DAYS","JUSTIFY_HOURS","JUSTIFY_INTERVAL","LOCALTIME","LOCALTIMESTAMP","MAKE_DATE","MAKE_INTERVAL","MAKE_TIME","MAKE_TIMESTAMP","MAKE_TIMESTAMPTZ","NOW","PG_SLEEP","PG_SLEEP_FOR","PG_SLEEP_UNTIL","STATEMENT_TIMESTAMP","TIMEOFDAY","TO_TIMESTAMP","TRANSACTION_TIMESTAMP","ENUM_FIRST","ENUM_LAST","ENUM_RANGE","AREA","BOUND_BOX","BOX","CENTER","CIRCLE","DIAGONAL","DIAMETER","HEIGHT","ISCLOSED","ISOPEN","LENGTH","LINE","LSEG","NPOINTS","PATH","PCLOSE","POINT","POLYGON","POPEN","RADIUS","SLOPE","WIDTH","ABBREV","BROADCAST","FAMILY","HOST","HOSTMASK","INET_MERGE","INET_SAME_FAMILY","MACADDR8_SET7BIT","MASKLEN","NETMASK","NETWORK","SET_MASKLEN","TRUNC","ARRAY_TO_TSVECTOR","GET_CURRENT_TS_CONFIG","JSONB_TO_TSVECTOR","JSON_TO_TSVECTOR","LENGTH","NUMNODE","PHRASETO_TSQUERY","PLAINTO_TSQUERY","QUERYTREE","SETWEIGHT","STRIP","TO_TSQUERY","TO_TSVECTOR","TSQUERY_PHRASE","TSVECTOR_TO_ARRAY","TS_DEBUG","TS_DELETE","TS_FILTER","TS_HEADLINE","TS_LEXIZE","TS_PARSE","TS_RANK","TS_RANK_CD","TS_REWRITE","TS_STAT","TS_TOKEN_TYPE","WEBSEARCH_TO_TSQUERY","GEN_RANDOM_UUID","UUIDV4","UUIDV7","UUID_EXTRACT_TIMESTAMP","UUID_EXTRACT_VERSION","CURSOR_TO_XML","CURSOR_TO_XMLSCHEMA","DATABASE_TO_XML","DATABASE_TO_XMLSCHEMA","DATABASE_TO_XML_AND_XMLSCHEMA","NEXTVAL","QUERY_TO_XML","QUERY_TO_XMLSCHEMA","QUERY_TO_XML_AND_XMLSCHEMA","SCHEMA_TO_XML","SCHEMA_TO_XMLSCHEMA","SCHEMA_TO_XML_AND_XMLSCHEMA","STRING","TABLE_TO_XML","TABLE_TO_XMLSCHEMA","TABLE_TO_XML_AND_XMLSCHEMA","XMLAGG","XMLCOMMENT","XMLCONCAT","XMLELEMENT","XMLEXISTS","XMLFOREST","XMLPARSE","XMLPI","XMLROOT","XMLSERIALIZE","XMLTABLE","XML_IS_WELL_FORMED","XML_IS_WELL_FORMED_CONTENT","XML_IS_WELL_FORMED_DOCUMENT","XPATH","XPATH_EXISTS","ARRAY_TO_JSON","JSONB_AGG","JSONB_ARRAY_ELEMENTS","JSONB_ARRAY_ELEMENTS_TEXT","JSONB_ARRAY_LENGTH","JSONB_BUILD_ARRAY","JSONB_BUILD_OBJECT","JSONB_EACH","JSONB_EACH_TEXT","JSONB_EXTRACT_PATH","JSONB_EXTRACT_PATH_TEXT","JSONB_INSERT","JSONB_OBJECT","JSONB_OBJECT_AGG","JSONB_OBJECT_KEYS","JSONB_PATH_EXISTS","JSONB_PATH_EXISTS_TZ","JSONB_PATH_MATCH","JSONB_PATH_MATCH_TZ","JSONB_PATH_QUERY","JSONB_PATH_QUERY_ARRAY","JSONB_PATH_QUERY_ARRAY_TZ","JSONB_PATH_QUERY_FIRST","JSONB_PATH_QUERY_FIRST_TZ","JSONB_PATH_QUERY_TZ","JSONB_POPULATE_RECORD","JSONB_POPULATE_RECORDSET","JSONB_PRETTY","JSONB_SET","JSONB_SET_LAX","JSONB_STRIP_NULLS","JSONB_TO_RECORD","JSONB_TO_RECORDSET","JSONB_TYPEOF","JSON_AGG","JSON_ARRAY_ELEMENTS","JSON_ARRAY_ELEMENTS_TEXT","JSON_ARRAY_LENGTH","JSON_BUILD_ARRAY","JSON_BUILD_OBJECT","JSON_EACH","JSON_EACH_TEXT","JSON_EXTRACT_PATH","JSON_EXTRACT_PATH_TEXT","JSON_OBJECT","JSON_OBJECT_AGG","JSON_OBJECT_KEYS","JSON_POPULATE_RECORD","JSON_POPULATE_RECORDSET","JSON_STRIP_NULLS","JSON_TO_RECORD","JSON_TO_RECORDSET","JSON_TYPEOF","ROW_TO_JSON","TO_JSON","TO_JSONB","TO_TIMESTAMP","CURRVAL","LASTVAL","NEXTVAL","SETVAL","COALESCE","GREATEST","LEAST","NULLIF","ARRAY_AGG","ARRAY_APPEND","ARRAY_CAT","ARRAY_DIMS","ARRAY_FILL","ARRAY_LENGTH","ARRAY_LOWER","ARRAY_NDIMS","ARRAY_POSITION","ARRAY_POSITIONS","ARRAY_PREPEND","ARRAY_REMOVE","ARRAY_REPLACE","ARRAY_TO_STRING","ARRAY_UPPER","CARDINALITY","STRING_TO_ARRAY","TRIM_ARRAY","UNNEST","ISEMPTY","LOWER","LOWER_INC","LOWER_INF","MULTIRANGE","RANGE_MERGE","UPPER","UPPER_INC","UPPER_INF","ARRAY_AGG","AVG","BIT_AND","BIT_OR","BIT_XOR","BOOL_AND","BOOL_OR","COALESCE","CORR","COUNT","COVAR_POP","COVAR_SAMP","CUME_DIST","DENSE_RANK","EVERY","GROUPING","JSONB_AGG","JSONB_OBJECT_AGG","JSON_AGG","JSON_OBJECT_AGG","MAX","MIN","MODE","PERCENTILE_CONT","PERCENTILE_DISC","PERCENT_RANK","RANGE_AGG","RANGE_INTERSECT_AGG","RANK","REGR_AVGX","REGR_AVGY","REGR_COUNT","REGR_INTERCEPT","REGR_R2","REGR_SLOPE","REGR_SXX","REGR_SXY","REGR_SYY","STDDEV","STDDEV_POP","STDDEV_SAMP","STRING_AGG","SUM","TO_JSON","TO_JSONB","VARIANCE","VAR_POP","VAR_SAMP","XMLAGG","CUME_DIST","DENSE_RANK","FIRST_VALUE","LAG","LAST_VALUE","LEAD","NTH_VALUE","NTILE","PERCENT_RANK","RANK","ROW_NUMBER","GENERATE_SERIES","GENERATE_SUBSCRIPTS","ACLDEFAULT","ACLEXPLODE","COL_DESCRIPTION","CURRENT_CATALOG","CURRENT_DATABASE","CURRENT_QUERY","CURRENT_ROLE","CURRENT_SCHEMA","CURRENT_SCHEMAS","CURRENT_USER","FORMAT_TYPE","HAS_ANY_COLUMN_PRIVILEGE","HAS_COLUMN_PRIVILEGE","HAS_DATABASE_PRIVILEGE","HAS_FOREIGN_DATA_WRAPPER_PRIVILEGE","HAS_FUNCTION_PRIVILEGE","HAS_LANGUAGE_PRIVILEGE","HAS_SCHEMA_PRIVILEGE","HAS_SEQUENCE_PRIVILEGE","HAS_SERVER_PRIVILEGE","HAS_TABLESPACE_PRIVILEGE","HAS_TABLE_PRIVILEGE","HAS_TYPE_PRIVILEGE","INET_CLIENT_ADDR","INET_CLIENT_PORT","INET_SERVER_ADDR","INET_SERVER_PORT","MAKEACLITEM","OBJ_DESCRIPTION","PG_BACKEND_PID","PG_BLOCKING_PIDS","PG_COLLATION_IS_VISIBLE","PG_CONF_LOAD_TIME","PG_CONTROL_CHECKPOINT","PG_CONTROL_INIT","PG_CONTROL_SYSTEM","PG_CONVERSION_IS_VISIBLE","PG_CURRENT_LOGFILE","PG_CURRENT_SNAPSHOT","PG_CURRENT_XACT_ID","PG_CURRENT_XACT_ID_IF_ASSIGNED","PG_DESCRIBE_OBJECT","PG_FUNCTION_IS_VISIBLE","PG_GET_CATALOG_FOREIGN_KEYS","PG_GET_CONSTRAINTDEF","PG_GET_EXPR","PG_GET_FUNCTIONDEF","PG_GET_FUNCTION_ARGUMENTS","PG_GET_FUNCTION_IDENTITY_ARGUMENTS","PG_GET_FUNCTION_RESULT","PG_GET_INDEXDEF","PG_GET_KEYWORDS","PG_GET_OBJECT_ADDRESS","PG_GET_OWNED_SEQUENCE","PG_GET_RULEDEF","PG_GET_SERIAL_SEQUENCE","PG_GET_STATISTICSOBJDEF","PG_GET_TRIGGERDEF","PG_GET_USERBYID","PG_GET_VIEWDEF","PG_HAS_ROLE","PG_IDENTIFY_OBJECT","PG_IDENTIFY_OBJECT_AS_ADDRESS","PG_INDEXAM_HAS_PROPERTY","PG_INDEX_COLUMN_HAS_PROPERTY","PG_INDEX_HAS_PROPERTY","PG_IS_OTHER_TEMP_SCHEMA","PG_JIT_AVAILABLE","PG_LAST_COMMITTED_XACT","PG_LISTENING_CHANNELS","PG_MY_TEMP_SCHEMA","PG_NOTIFICATION_QUEUE_USAGE","PG_OPCLASS_IS_VISIBLE","PG_OPERATOR_IS_VISIBLE","PG_OPFAMILY_IS_VISIBLE","PG_OPTIONS_TO_TABLE","PG_POSTMASTER_START_TIME","PG_SAFE_SNAPSHOT_BLOCKING_PIDS","PG_SNAPSHOT_XIP","PG_SNAPSHOT_XMAX","PG_SNAPSHOT_XMIN","PG_STATISTICS_OBJ_IS_VISIBLE","PG_TABLESPACE_DATABASES","PG_TABLESPACE_LOCATION","PG_TABLE_IS_VISIBLE","PG_TRIGGER_DEPTH","PG_TS_CONFIG_IS_VISIBLE","PG_TS_DICT_IS_VISIBLE","PG_TS_PARSER_IS_VISIBLE","PG_TS_TEMPLATE_IS_VISIBLE","PG_TYPEOF","PG_TYPE_IS_VISIBLE","PG_VISIBLE_IN_SNAPSHOT","PG_XACT_COMMIT_TIMESTAMP","PG_XACT_COMMIT_TIMESTAMP_ORIGIN","PG_XACT_STATUS","PQSERVERVERSION","ROW_SECURITY_ACTIVE","SESSION_USER","SHOBJ_DESCRIPTION","TO_REGCLASS","TO_REGCOLLATION","TO_REGNAMESPACE","TO_REGOPER","TO_REGOPERATOR","TO_REGPROC","TO_REGPROCEDURE","TO_REGROLE","TO_REGTYPE","TXID_CURRENT","TXID_CURRENT_IF_ASSIGNED","TXID_CURRENT_SNAPSHOT","TXID_SNAPSHOT_XIP","TXID_SNAPSHOT_XMAX","TXID_SNAPSHOT_XMIN","TXID_STATUS","TXID_VISIBLE_IN_SNAPSHOT","USER","VERSION","BRIN_DESUMMARIZE_RANGE","BRIN_SUMMARIZE_NEW_VALUES","BRIN_SUMMARIZE_RANGE","CONVERT_FROM","CURRENT_SETTING","GIN_CLEAN_PENDING_LIST","PG_ADVISORY_LOCK","PG_ADVISORY_LOCK_SHARED","PG_ADVISORY_UNLOCK","PG_ADVISORY_UNLOCK_ALL","PG_ADVISORY_UNLOCK_SHARED","PG_ADVISORY_XACT_LOCK","PG_ADVISORY_XACT_LOCK_SHARED","PG_BACKUP_START_TIME","PG_CANCEL_BACKEND","PG_COLLATION_ACTUAL_VERSION","PG_COLUMN_COMPRESSION","PG_COLUMN_SIZE","PG_COPY_LOGICAL_REPLICATION_SLOT","PG_COPY_PHYSICAL_REPLICATION_SLOT","PG_CREATE_LOGICAL_REPLICATION_SLOT","PG_CREATE_PHYSICAL_REPLICATION_SLOT","PG_CREATE_RESTORE_POINT","PG_CURRENT_WAL_FLUSH_LSN","PG_CURRENT_WAL_INSERT_LSN","PG_CURRENT_WAL_LSN","PG_DATABASE_SIZE","PG_DROP_REPLICATION_SLOT","PG_EXPORT_SNAPSHOT","PG_FILENODE_RELATION","PG_GET_WAL_REPLAY_PAUSE_STATE","PG_IMPORT_SYSTEM_COLLATIONS","PG_INDEXES_SIZE","PG_IS_IN_BACKUP","PG_IS_IN_RECOVERY","PG_IS_WAL_REPLAY_PAUSED","PG_LAST_WAL_RECEIVE_LSN","PG_LAST_WAL_REPLAY_LSN","PG_LAST_XACT_REPLAY_TIMESTAMP","PG_LOGICAL_EMIT_MESSAGE","PG_LOGICAL_SLOT_GET_BINARY_CHANGES","PG_LOGICAL_SLOT_GET_CHANGES","PG_LOGICAL_SLOT_PEEK_BINARY_CHANGES","PG_LOGICAL_SLOT_PEEK_CHANGES","PG_LOG_BACKEND_MEMORY_CONTEXTS","PG_LS_ARCHIVE_STATUSDIR","PG_LS_DIR","PG_LS_LOGDIR","PG_LS_TMPDIR","PG_LS_WALDIR","PG_PARTITION_ANCESTORS","PG_PARTITION_ROOT","PG_PARTITION_TREE","PG_PROMOTE","PG_READ_BINARY_FILE","PG_READ_FILE","PG_RELATION_FILENODE","PG_RELATION_FILEPATH","PG_RELATION_SIZE","PG_RELOAD_CONF","PG_REPLICATION_ORIGIN_ADVANCE","PG_REPLICATION_ORIGIN_CREATE","PG_REPLICATION_ORIGIN_DROP","PG_REPLICATION_ORIGIN_OID","PG_REPLICATION_ORIGIN_PROGRESS","PG_REPLICATION_ORIGIN_SESSION_IS_SETUP","PG_REPLICATION_ORIGIN_SESSION_PROGRESS","PG_REPLICATION_ORIGIN_SESSION_RESET","PG_REPLICATION_ORIGIN_SESSION_SETUP","PG_REPLICATION_ORIGIN_XACT_RESET","PG_REPLICATION_ORIGIN_XACT_SETUP","PG_REPLICATION_SLOT_ADVANCE","PG_ROTATE_LOGFILE","PG_SIZE_BYTES","PG_SIZE_PRETTY","PG_START_BACKUP","PG_STAT_FILE","PG_STOP_BACKUP","PG_SWITCH_WAL","PG_TABLESPACE_SIZE","PG_TABLE_SIZE","PG_TERMINATE_BACKEND","PG_TOTAL_RELATION_SIZE","PG_TRY_ADVISORY_LOCK","PG_TRY_ADVISORY_LOCK_SHARED","PG_TRY_ADVISORY_XACT_LOCK","PG_TRY_ADVISORY_XACT_LOCK_SHARED","PG_WALFILE_NAME","PG_WALFILE_NAME_OFFSET","PG_WAL_LSN_DIFF","PG_WAL_REPLAY_PAUSE","PG_WAL_REPLAY_RESUME","SET_CONFIG","SUPPRESS_REDUNDANT_UPDATES_TRIGGER","TSVECTOR_UPDATE_TRIGGER","TSVECTOR_UPDATE_TRIGGER_COLUMN","PG_EVENT_TRIGGER_DDL_COMMANDS","PG_EVENT_TRIGGER_DROPPED_OBJECTS","PG_EVENT_TRIGGER_TABLE_REWRITE_OID","PG_EVENT_TRIGGER_TABLE_REWRITE_REASON","PG_GET_OBJECT_ADDRESS","PG_MCV_LIST_ITEMS","CAST"]});var qj,Xj,jj=H(()=>{qj=["ALL","ANALYSE","ANALYZE","AND","ANY","AS","ASC","ASYMMETRIC","AUTHORIZATION","BETWEEN","BINARY","BOTH","CASE","CAST","CHECK","COLLATE","COLLATION","COLUMN","CONCURRENTLY","CONSTRAINT","CREATE","CROSS","CURRENT_CATALOG","CURRENT_DATE","CURRENT_ROLE","CURRENT_SCHEMA","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","DAY","DEFAULT","DEFERRABLE","DESC","DISTINCT","DO","ELSE","END","EXCEPT","EXISTS","FALSE","FETCH","FILTER","FOR","FOREIGN","FREEZE","FROM","FULL","GRANT","GROUP","HAVING","HOUR","ILIKE","IN","INITIALLY","INNER","INOUT","INTERSECT","INTO","IS","ISNULL","JOIN","LATERAL","LEADING","LEFT","LIKE","LIMIT","LOCALTIME","LOCALTIMESTAMP","MINUTE","MONTH","NATURAL","NOT","NOTNULL","NULL","NULLIF","OFFSET","ON","ONLY","OR","ORDER","OUT","OUTER","OVER","OVERLAPS","PLACING","PRIMARY","REFERENCES","RETURNING","RIGHT","ROW","SECOND","SELECT","SESSION_USER","SIMILAR","SOME","SYMMETRIC","TABLE","TABLESAMPLE","THEN","TO","TRAILING","TRUE","UNION","UNIQUE","USER","USING","VALUES","VARIADIC","VERBOSE","WHEN","WHERE","WINDOW","WITH","WITHIN","WITHOUT","YEAR"],Xj=["ARRAY","BIGINT","BIT","BIT VARYING","BOOL","BOOLEAN","CHAR","CHARACTER","CHARACTER VARYING","DECIMAL","DEC","DOUBLE","ENUM","FLOAT","INT","INTEGER","INTERVAL","NCHAR","NUMERIC","JSON","JSONB","PRECISION","REAL","SMALLINT","TEXT","TIME","TIMESTAMP","TIMESTAMPTZ","UUID","VARCHAR","XML","ZONE"]});var N0e,O0e,zj,Yy,C0e,y0e,b0e,w0e,QS,Vy=H(()=>{xt();Vj();jj();N0e=x(["SELECT [ALL | DISTINCT]"]),O0e=x(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY [ALL | DISTINCT]","HAVING","WINDOW","PARTITION BY","ORDER BY","LIMIT","OFFSET","FETCH {FIRST | NEXT}","FOR {UPDATE | NO KEY UPDATE | SHARE | KEY SHARE} [OF]","INSERT INTO","VALUES","DEFAULT VALUES","SET","RETURNING"]),zj=x(["CREATE [GLOBAL | LOCAL] [TEMPORARY | TEMP | UNLOGGED] TABLE [IF NOT EXISTS]"]),Yy=x(["CREATE [OR REPLACE] [TEMP | TEMPORARY] [RECURSIVE] VIEW","CREATE [MATERIALIZED] VIEW [IF NOT EXISTS]","UPDATE [ONLY]","WHERE CURRENT OF","ON CONFLICT","DELETE FROM [ONLY]","DROP TABLE [IF EXISTS]","ALTER TABLE [IF EXISTS] [ONLY]","ALTER TABLE ALL IN TABLESPACE","RENAME [COLUMN]","RENAME TO","ADD [COLUMN] [IF NOT EXISTS]","DROP [COLUMN] [IF EXISTS]","ALTER [COLUMN]","SET DATA TYPE","{SET | DROP} DEFAULT","{SET | DROP} NOT NULL","TRUNCATE [TABLE] [ONLY]","SET SCHEMA","AFTER","ABORT","ALTER AGGREGATE","ALTER COLLATION","ALTER CONVERSION","ALTER DATABASE","ALTER DEFAULT PRIVILEGES","ALTER DOMAIN","ALTER EVENT TRIGGER","ALTER EXTENSION","ALTER FOREIGN DATA WRAPPER","ALTER FOREIGN TABLE","ALTER FUNCTION","ALTER GROUP","ALTER INDEX","ALTER LANGUAGE","ALTER LARGE OBJECT","ALTER MATERIALIZED VIEW","ALTER OPERATOR","ALTER OPERATOR CLASS","ALTER OPERATOR FAMILY","ALTER POLICY","ALTER PROCEDURE","ALTER PUBLICATION","ALTER ROLE","ALTER ROUTINE","ALTER RULE","ALTER SCHEMA","ALTER SEQUENCE","ALTER SERVER","ALTER STATISTICS","ALTER SUBSCRIPTION","ALTER SYSTEM","ALTER TABLESPACE","ALTER TEXT SEARCH CONFIGURATION","ALTER TEXT SEARCH DICTIONARY","ALTER TEXT SEARCH PARSER","ALTER TEXT SEARCH TEMPLATE","ALTER TRIGGER","ALTER TYPE","ALTER USER","ALTER USER MAPPING","ALTER VIEW","ANALYZE","BEGIN","CALL","CHECKPOINT","CLOSE","CLUSTER","COMMENT ON","COMMIT","COMMIT PREPARED","COPY","CREATE ACCESS METHOD","CREATE [OR REPLACE] AGGREGATE","CREATE CAST","CREATE COLLATION","CREATE [DEFAULT] CONVERSION","CREATE DATABASE","CREATE DOMAIN","CREATE EVENT TRIGGER","CREATE EXTENSION","CREATE FOREIGN DATA WRAPPER","CREATE FOREIGN TABLE","CREATE [OR REPLACE] FUNCTION","CREATE GROUP","CREATE [UNIQUE] INDEX","CREATE [OR REPLACE] [TRUSTED] [PROCEDURAL] LANGUAGE","CREATE OPERATOR","CREATE OPERATOR CLASS","CREATE OPERATOR FAMILY","CREATE POLICY","CREATE [OR REPLACE] PROCEDURE","CREATE PUBLICATION","CREATE ROLE","CREATE [OR REPLACE] RULE","CREATE SCHEMA [AUTHORIZATION]","CREATE [TEMPORARY | TEMP | UNLOGGED] SEQUENCE","CREATE SERVER","CREATE STATISTICS","CREATE SUBSCRIPTION","CREATE TABLESPACE","CREATE TEXT SEARCH CONFIGURATION","CREATE TEXT SEARCH DICTIONARY","CREATE TEXT SEARCH PARSER","CREATE TEXT SEARCH TEMPLATE","CREATE [OR REPLACE] TRANSFORM","CREATE [OR REPLACE] [CONSTRAINT] TRIGGER","CREATE TYPE","CREATE USER","CREATE USER MAPPING","DEALLOCATE","DECLARE","DISCARD","DROP ACCESS METHOD","DROP AGGREGATE","DROP CAST","DROP COLLATION","DROP CONVERSION","DROP DATABASE","DROP DOMAIN","DROP EVENT TRIGGER","DROP EXTENSION","DROP FOREIGN DATA WRAPPER","DROP FOREIGN TABLE","DROP FUNCTION","DROP GROUP","DROP IDENTITY","DROP INDEX","DROP LANGUAGE","DROP MATERIALIZED VIEW [IF EXISTS]","DROP OPERATOR","DROP OPERATOR CLASS","DROP OPERATOR FAMILY","DROP OWNED","DROP POLICY","DROP PROCEDURE","DROP PUBLICATION","DROP ROLE","DROP ROUTINE","DROP RULE","DROP SCHEMA","DROP SEQUENCE","DROP SERVER","DROP STATISTICS","DROP SUBSCRIPTION","DROP TABLESPACE","DROP TEXT SEARCH CONFIGURATION","DROP TEXT SEARCH DICTIONARY","DROP TEXT SEARCH PARSER","DROP TEXT SEARCH TEMPLATE","DROP TRANSFORM","DROP TRIGGER","DROP TYPE","DROP USER","DROP USER MAPPING","DROP VIEW","EXECUTE","EXPLAIN","FETCH","GRANT","IMPORT FOREIGN SCHEMA","LISTEN","LOAD","LOCK","MOVE","NOTIFY","OVERRIDING SYSTEM VALUE","PREPARE","PREPARE TRANSACTION","REASSIGN OWNED","REFRESH MATERIALIZED VIEW","REINDEX","RELEASE SAVEPOINT","RESET [ALL|ROLE|SESSION AUTHORIZATION]","REVOKE","ROLLBACK","ROLLBACK PREPARED","ROLLBACK TO SAVEPOINT","SAVEPOINT","SECURITY LABEL","SELECT INTO","SET CONSTRAINTS","SET ROLE","SET SESSION AUTHORIZATION","SET TRANSACTION","SHOW","START TRANSACTION","UNLISTEN","VACUUM"]),C0e=x(["UNION [ALL | DISTINCT]","EXCEPT [ALL | DISTINCT]","INTERSECT [ALL | DISTINCT]"]),y0e=x(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL [INNER] JOIN","NATURAL {LEFT | RIGHT | FULL} [OUTER] JOIN"]),b0e=x(["PRIMARY KEY","GENERATED {ALWAYS | BY DEFAULT} AS IDENTITY","ON {UPDATE | DELETE} [NO ACTION | RESTRICT | CASCADE | SET NULL | SET DEFAULT]","DO {NOTHING | UPDATE}","AS MATERIALIZED","{ROWS | RANGE | GROUPS} BETWEEN","IS [NOT] DISTINCT FROM","NULLS {FIRST | LAST}","WITH ORDINALITY"]),w0e=x(["[TIMESTAMP | TIME] {WITH | WITHOUT} TIME ZONE"]),QS={name:"postgresql",tokenizerOptions:{reservedSelect:N0e,reservedClauses:[...O0e,...zj,...Yy],reservedSetOperations:C0e,reservedJoins:y0e,reservedKeywordPhrases:b0e,reservedDataTypePhrases:w0e,reservedKeywords:qj,reservedDataTypes:Xj,reservedFunctionNames:Yj,nestedBlockComments:!0,extraParens:["[]"],underscoresInNumbers:!0,stringTypes:["$$",{quote:"''-qq",prefixes:["U&"]},{quote:"''-qq-bs",prefixes:["E"],requirePrefix:!0},{quote:"''-raw",prefixes:["B","X"],requirePrefix:!0}],identTypes:[{quote:'""-qq',prefixes:["U&"]}],identChars:{rest:"$"},paramTypes:{numbered:["$"]},operators:["%","^","|/","||/","@",":=","&","|","#","~","<<",">>","~>~","~<~","~>=~","~<=~","@-@","@@","##","<->","&&","&<","&>","<<|","&<|","|>>","|&>","<^","^>","?#","?-","?|","?-|","?||","@>","<@","~=","?","@?","?&","->","->>","#>","#>>","#-","=>",">>=","<<=","~~","~~*","!~~","!~~*","~","~*","!~","!~*","-|-","||","@@@","!!","^@","<%","%>","<<%","%>>","<<->","<->>","<<<->","<->>>","::",":","<#>","<=>","<+>","<~>","<%>"],operatorKeyword:!0},formatOptions:{alwaysDenseOperators:["::",":"],onelineClauses:[...zj,...Yy],tabularOnelineClauses:Yy}}});var Kj,Jj=H(()=>{Kj=["ANY_VALUE","APPROXIMATE PERCENTILE_DISC","AVG","COUNT","LISTAGG","MAX","MEDIAN","MIN","PERCENTILE_CONT","STDDEV_SAMP","STDDEV_POP","SUM","VAR_SAMP","VAR_POP","array_concat","array_flatten","get_array_length","split_to_array","subarray","BIT_AND","BIT_OR","BOOL_AND","BOOL_OR","COALESCE","DECODE","GREATEST","LEAST","NVL","NVL2","NULLIF","ADD_MONTHS","AT TIME ZONE","CONVERT_TIMEZONE","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","DATE_CMP","DATE_CMP_TIMESTAMP","DATE_CMP_TIMESTAMPTZ","DATE_PART_YEAR","DATEADD","DATEDIFF","DATE_PART","DATE_TRUNC","EXTRACT","GETDATE","INTERVAL_CMP","LAST_DAY","MONTHS_BETWEEN","NEXT_DAY","SYSDATE","TIMEOFDAY","TIMESTAMP_CMP","TIMESTAMP_CMP_DATE","TIMESTAMP_CMP_TIMESTAMPTZ","TIMESTAMPTZ_CMP","TIMESTAMPTZ_CMP_DATE","TIMESTAMPTZ_CMP_TIMESTAMP","TIMEZONE","TO_TIMESTAMP","TRUNC","AddBBox","DropBBox","GeometryType","ST_AddPoint","ST_Angle","ST_Area","ST_AsBinary","ST_AsEWKB","ST_AsEWKT","ST_AsGeoJSON","ST_AsText","ST_Azimuth","ST_Boundary","ST_Collect","ST_Contains","ST_ContainsProperly","ST_ConvexHull","ST_CoveredBy","ST_Covers","ST_Crosses","ST_Dimension","ST_Disjoint","ST_Distance","ST_DistanceSphere","ST_DWithin","ST_EndPoint","ST_Envelope","ST_Equals","ST_ExteriorRing","ST_Force2D","ST_Force3D","ST_Force3DM","ST_Force3DZ","ST_Force4D","ST_GeometryN","ST_GeometryType","ST_GeomFromEWKB","ST_GeomFromEWKT","ST_GeomFromText","ST_GeomFromWKB","ST_InteriorRingN","ST_Intersects","ST_IsPolygonCCW","ST_IsPolygonCW","ST_IsClosed","ST_IsCollection","ST_IsEmpty","ST_IsSimple","ST_IsValid","ST_Length","ST_LengthSphere","ST_Length2D","ST_LineFromMultiPoint","ST_LineInterpolatePoint","ST_M","ST_MakeEnvelope","ST_MakeLine","ST_MakePoint","ST_MakePolygon","ST_MemSize","ST_MMax","ST_MMin","ST_Multi","ST_NDims","ST_NPoints","ST_NRings","ST_NumGeometries","ST_NumInteriorRings","ST_NumPoints","ST_Perimeter","ST_Perimeter2D","ST_Point","ST_PointN","ST_Points","ST_Polygon","ST_RemovePoint","ST_Reverse","ST_SetPoint","ST_SetSRID","ST_Simplify","ST_SRID","ST_StartPoint","ST_Touches","ST_Within","ST_X","ST_XMax","ST_XMin","ST_Y","ST_YMax","ST_YMin","ST_Z","ST_ZMax","ST_ZMin","SupportsBBox","CHECKSUM","FUNC_SHA1","FNV_HASH","MD5","SHA","SHA1","SHA2","HLL","HLL_CREATE_SKETCH","HLL_CARDINALITY","HLL_COMBINE","IS_VALID_JSON","IS_VALID_JSON_ARRAY","JSON_ARRAY_LENGTH","JSON_EXTRACT_ARRAY_ELEMENT_TEXT","JSON_EXTRACT_PATH_TEXT","JSON_PARSE","JSON_SERIALIZE","ABS","ACOS","ASIN","ATAN","ATAN2","CBRT","CEILING","CEIL","COS","COT","DEGREES","DEXP","DLOG1","DLOG10","EXP","FLOOR","LN","LOG","MOD","PI","POWER","RADIANS","RANDOM","ROUND","SIN","SIGN","SQRT","TAN","TO_HEX","TRUNC","EXPLAIN_MODEL","ASCII","BPCHARCMP","BTRIM","BTTEXT_PATTERN_CMP","CHAR_LENGTH","CHARACTER_LENGTH","CHARINDEX","CHR","COLLATE","CONCAT","CRC32","DIFFERENCE","INITCAP","LEFT","RIGHT","LEN","LENGTH","LOWER","LPAD","RPAD","LTRIM","OCTETINDEX","OCTET_LENGTH","POSITION","QUOTE_IDENT","QUOTE_LITERAL","REGEXP_COUNT","REGEXP_INSTR","REGEXP_REPLACE","REGEXP_SUBSTR","REPEAT","REPLACE","REPLICATE","REVERSE","RTRIM","SOUNDEX","SPLIT_PART","STRPOS","STRTOL","SUBSTRING","TEXTLEN","TRANSLATE","TRIM","UPPER","decimal_precision","decimal_scale","is_array","is_bigint","is_boolean","is_char","is_decimal","is_float","is_integer","is_object","is_scalar","is_smallint","is_varchar","json_typeof","AVG","COUNT","CUME_DIST","DENSE_RANK","FIRST_VALUE","LAST_VALUE","LAG","LEAD","LISTAGG","MAX","MEDIAN","MIN","NTH_VALUE","NTILE","PERCENT_RANK","PERCENTILE_CONT","PERCENTILE_DISC","RANK","RATIO_TO_REPORT","ROW_NUMBER","STDDEV_SAMP","STDDEV_POP","SUM","VAR_SAMP","VAR_POP","CAST","CONVERT","TO_CHAR","TO_DATE","TO_NUMBER","TEXT_TO_INT_ALT","TEXT_TO_NUMERIC_ALT","CHANGE_QUERY_PRIORITY","CHANGE_SESSION_PRIORITY","CHANGE_USER_PRIORITY","CURRENT_SETTING","PG_CANCEL_BACKEND","PG_TERMINATE_BACKEND","REBOOT_CLUSTER","SET_CONFIG","CURRENT_AWS_ACCOUNT","CURRENT_DATABASE","CURRENT_NAMESPACE","CURRENT_SCHEMA","CURRENT_SCHEMAS","CURRENT_USER","CURRENT_USER_ID","HAS_ASSUMEROLE_PRIVILEGE","HAS_DATABASE_PRIVILEGE","HAS_SCHEMA_PRIVILEGE","HAS_TABLE_PRIVILEGE","PG_BACKEND_PID","PG_GET_COLS","PG_GET_GRANTEE_BY_IAM_ROLE","PG_GET_IAM_ROLE_BY_USER","PG_GET_LATE_BINDING_VIEW_COLS","PG_LAST_COPY_COUNT","PG_LAST_COPY_ID","PG_LAST_UNLOAD_ID","PG_LAST_QUERY_ID","PG_LAST_UNLOAD_COUNT","SESSION_USER","SLICE_NUM","USER","VERSION"]});var Qj,Zj,ez=H(()=>{Qj=["AES128","AES256","ALL","ALLOWOVERWRITE","ANY","AS","ASC","AUTHORIZATION","BACKUP","BETWEEN","BINARY","BOTH","CHECK","COLUMN","CONSTRAINT","CREATE","CROSS","DEFAULT","DEFERRABLE","DEFLATE","DEFRAG","DESC","DISABLE","DISTINCT","DO","ENABLE","ENCODE","ENCRYPT","ENCRYPTION","EXPLICIT","FALSE","FOR","FOREIGN","FREEZE","FROM","FULL","GLOBALDICT256","GLOBALDICT64K","GROUP","IDENTITY","IGNORE","ILIKE","IN","INITIALLY","INNER","INTO","IS","ISNULL","LANGUAGE","LEADING","LIKE","LIMIT","LOCALTIME","LOCALTIMESTAMP","LUN","LUNS","MINUS","NATURAL","NEW","NOT","NOTNULL","NULL","NULLS","OFF","OFFLINE","OFFSET","OID","OLD","ON","ONLY","OPEN","ORDER","OUTER","OVERLAPS","PARALLEL","PARTITION","PERCENT","PERMISSIONS","PLACING","PRIMARY","RECOVER","REFERENCES","REJECTLOG","RESORT","RESPECT","RESTORE","SIMILAR","SNAPSHOT","SOME","SYSTEM","TABLE","TAG","TDES","THEN","TIMESTAMP","TO","TOP","TRAILING","TRUE","UNIQUE","USING","VERBOSE","WALLET","WITHOUT","ACCEPTANYDATE","ACCEPTINVCHARS","BLANKSASNULL","DATEFORMAT","EMPTYASNULL","ENCODING","ESCAPE","EXPLICIT_IDS","FILLRECORD","IGNOREBLANKLINES","IGNOREHEADER","REMOVEQUOTES","ROUNDEC","TIMEFORMAT","TRIMBLANKS","TRUNCATECOLUMNS","COMPROWS","COMPUPDATE","MAXERROR","NOLOAD","STATUPDATE","FORMAT","CSV","DELIMITER","FIXEDWIDTH","SHAPEFILE","AVRO","JSON","PARQUET","ORC","ACCESS_KEY_ID","CREDENTIALS","ENCRYPTED","IAM_ROLE","MASTER_SYMMETRIC_KEY","SECRET_ACCESS_KEY","SESSION_TOKEN","BZIP2","GZIP","LZOP","ZSTD","MANIFEST","READRATIO","REGION","SSH","RAW","AZ64","BYTEDICT","DELTA","DELTA32K","LZO","MOSTLY8","MOSTLY16","MOSTLY32","RUNLENGTH","TEXT255","TEXT32K","CATALOG_ROLE","SECRET_ARN","EXTERNAL","AUTO","EVEN","KEY","PREDICATE","COMPRESSION"],Zj=["ARRAY","BIGINT","BPCHAR","CHAR","CHARACTER VARYING","CHARACTER","DECIMAL","INT","INT2","INT4","INT8","INTEGER","NCHAR","NUMERIC","NVARCHAR","SMALLINT","TEXT","VARBYTE","VARCHAR"]});var L0e,D0e,tz,qy,P0e,x0e,M0e,v0e,ZS,Xy=H(()=>{xt();Jj();ez();L0e=x(["SELECT [ALL | DISTINCT]"]),D0e=x(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY","HAVING","QUALIFY","PARTITION BY","ORDER BY","LIMIT","OFFSET","INSERT INTO","VALUES","SET"]),tz=x(["CREATE [TEMPORARY | TEMP | LOCAL TEMPORARY | LOCAL TEMP] TABLE [IF NOT EXISTS]"]),qy=x(["CREATE [OR REPLACE | MATERIALIZED] VIEW","UPDATE","DELETE [FROM]","DROP TABLE [IF EXISTS]","ALTER TABLE","ALTER TABLE APPEND","ADD [COLUMN]","DROP [COLUMN]","RENAME TO","RENAME COLUMN","ALTER COLUMN","TYPE","ENCODE","TRUNCATE [TABLE]","ABORT","ALTER DATABASE","ALTER DATASHARE","ALTER DEFAULT PRIVILEGES","ALTER GROUP","ALTER MATERIALIZED VIEW","ALTER PROCEDURE","ALTER SCHEMA","ALTER USER","ANALYSE","ANALYZE","ANALYSE COMPRESSION","ANALYZE COMPRESSION","BEGIN","CALL","CANCEL","CLOSE","COMMIT","COPY","CREATE DATABASE","CREATE DATASHARE","CREATE EXTERNAL FUNCTION","CREATE EXTERNAL SCHEMA","CREATE EXTERNAL TABLE","CREATE FUNCTION","CREATE GROUP","CREATE LIBRARY","CREATE MODEL","CREATE PROCEDURE","CREATE SCHEMA","CREATE USER","DEALLOCATE","DECLARE","DESC DATASHARE","DROP DATABASE","DROP DATASHARE","DROP FUNCTION","DROP GROUP","DROP LIBRARY","DROP MODEL","DROP MATERIALIZED VIEW","DROP PROCEDURE","DROP SCHEMA","DROP USER","DROP VIEW","DROP","EXECUTE","EXPLAIN","FETCH","GRANT","LOCK","PREPARE","REFRESH MATERIALIZED VIEW","RESET","REVOKE","ROLLBACK","SELECT INTO","SET SESSION AUTHORIZATION","SET SESSION CHARACTERISTICS","SHOW","SHOW EXTERNAL TABLE","SHOW MODEL","SHOW DATASHARES","SHOW PROCEDURE","SHOW TABLE","SHOW VIEW","START TRANSACTION","UNLOAD","VACUUM"]),P0e=x(["UNION [ALL]","EXCEPT","INTERSECT","MINUS"]),x0e=x(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL [INNER] JOIN","NATURAL {LEFT | RIGHT | FULL} [OUTER] JOIN"]),M0e=x(["NULL AS","DATA CATALOG","HIVE METASTORE","{ROWS | RANGE} BETWEEN"]),v0e=x([]),ZS={name:"redshift",tokenizerOptions:{reservedSelect:L0e,reservedClauses:[...D0e,...tz,...qy],reservedSetOperations:P0e,reservedJoins:x0e,reservedKeywordPhrases:M0e,reservedDataTypePhrases:v0e,reservedKeywords:Qj,reservedDataTypes:Zj,reservedFunctionNames:Kj,extraParens:["[]"],stringTypes:["''-qq"],identTypes:['""-qq'],identChars:{first:"#"},paramTypes:{numbered:["$"]},operators:["^","%","@","|/","||/","&","|","~","<<",">>","||","::"]},formatOptions:{alwaysDenseOperators:["::"],onelineClauses:[...tz,...qy],tabularOnelineClauses:qy}}});var rz,nz,iz=H(()=>{rz=["ADD","AFTER","ALL","ALTER","ANALYZE","AND","ANTI","ANY","ARCHIVE","AS","ASC","AT","AUTHORIZATION","BETWEEN","BOTH","BUCKET","BUCKETS","BY","CACHE","CASCADE","CAST","CHANGE","CHECK","CLEAR","CLUSTER","CLUSTERED","CODEGEN","COLLATE","COLLECTION","COLUMN","COLUMNS","COMMENT","COMMIT","COMPACT","COMPACTIONS","COMPUTE","CONCATENATE","CONSTRAINT","COST","CREATE","CROSS","CUBE","CURRENT","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","DATA","DATABASE","DATABASES","DAY","DBPROPERTIES","DEFINED","DELETE","DELIMITED","DESC","DESCRIBE","DFS","DIRECTORIES","DIRECTORY","DISTINCT","DISTRIBUTE","DIV","DROP","ESCAPE","ESCAPED","EXCEPT","EXCHANGE","EXISTS","EXPORT","EXTENDED","EXTERNAL","EXTRACT","FALSE","FETCH","FIELDS","FILTER","FILEFORMAT","FIRST","FIRST_VALUE","FOLLOWING","FOR","FOREIGN","FORMAT","FORMATTED","FULL","FUNCTION","FUNCTIONS","GLOBAL","GRANT","GROUP","GROUPING","HOUR","IF","IGNORE","IMPORT","IN","INDEX","INDEXES","INNER","INPATH","INPUTFORMAT","INTERSECT","INTO","IS","ITEMS","KEYS","LAST","LAST_VALUE","LATERAL","LAZY","LEADING","LEFT","LIKE","LINES","LIST","LOCAL","LOCATION","LOCK","LOCKS","LOGICAL","MACRO","MATCHED","MERGE","MINUTE","MONTH","MSCK","NAMESPACE","NAMESPACES","NATURAL","NO","NOT","NULL","NULLS","OF","ONLY","OPTION","OPTIONS","OR","ORDER","OUT","OUTER","OUTPUTFORMAT","OVER","OVERLAPS","OVERLAY","OVERWRITE","OWNER","PARTITION","PARTITIONED","PARTITIONS","PERCENT","PLACING","POSITION","PRECEDING","PRIMARY","PRINCIPALS","PROPERTIES","PURGE","QUERY","RANGE","RECORDREADER","RECORDWRITER","RECOVER","REDUCE","REFERENCES","RENAME","REPAIR","REPLACE","RESPECT","RESTRICT","REVOKE","RIGHT","RLIKE","ROLE","ROLES","ROLLBACK","ROLLUP","ROW","ROWS","SCHEMA","SECOND","SELECT","SEMI","SEPARATED","SERDE","SERDEPROPERTIES","SESSION_USER","SETS","SHOW","SKEWED","SOME","SORT","SORTED","START","STATISTICS","STORED","STRATIFY","SUBSTR","SUBSTRING","TABLE","TABLES","TBLPROPERTIES","TEMPORARY","TERMINATED","THEN","TO","TOUCH","TRAILING","TRANSACTION","TRANSACTIONS","TRIM","TRUE","TRUNCATE","UNARCHIVE","UNBOUNDED","UNCACHE","UNIQUE","UNKNOWN","UNLOCK","UNSET","USE","USER","USING","VIEW","WINDOW","YEAR","ANALYSE","ARRAY_ZIP","COALESCE","CONTAINS","CONVERT","DAYS","DAY_HOUR","DAY_MINUTE","DAY_SECOND","DECODE","DEFAULT","DISTINCTROW","ENCODE","EXPLODE","EXPLODE_OUTER","FIXED","GREATEST","GROUP_CONCAT","HOURS","HOUR_MINUTE","HOUR_SECOND","IFNULL","LEAST","LEVEL","MINUTE_SECOND","NULLIF","OFFSET","ON","OPTIMIZE","REGEXP","SEPARATOR","SIZE","TYPE","TYPES","UNSIGNED","VARIABLES","YEAR_MONTH"],nz=["ARRAY","BIGINT","BINARY","BOOLEAN","BYTE","CHAR","DATE","DEC","DECIMAL","DOUBLE","FLOAT","INT","INTEGER","INTERVAL","LONG","MAP","NUMERIC","REAL","SHORT","SMALLINT","STRING","STRUCT","TIMESTAMP_LTZ","TIMESTAMP_NTZ","TIMESTAMP","TINYINT","VARCHAR"]});var sz,oz=H(()=>{sz=["APPROX_COUNT_DISTINCT","APPROX_PERCENTILE","AVG","BIT_AND","BIT_OR","BIT_XOR","BOOL_AND","BOOL_OR","COLLECT_LIST","COLLECT_SET","CORR","COUNT","COUNT","COUNT","COUNT_IF","COUNT_MIN_SKETCH","COVAR_POP","COVAR_SAMP","EVERY","FIRST","FIRST_VALUE","GROUPING","GROUPING_ID","KURTOSIS","LAST","LAST_VALUE","MAX","MAX_BY","MEAN","MIN","MIN_BY","PERCENTILE","PERCENTILE","PERCENTILE_APPROX","SKEWNESS","STD","STDDEV","STDDEV_POP","STDDEV_SAMP","SUM","VAR_POP","VAR_SAMP","VARIANCE","CUME_DIST","DENSE_RANK","LAG","LEAD","NTH_VALUE","NTILE","PERCENT_RANK","RANK","ROW_NUMBER","ARRAY","ARRAY_CONTAINS","ARRAY_DISTINCT","ARRAY_EXCEPT","ARRAY_INTERSECT","ARRAY_JOIN","ARRAY_MAX","ARRAY_MIN","ARRAY_POSITION","ARRAY_REMOVE","ARRAY_REPEAT","ARRAY_UNION","ARRAYS_OVERLAP","ARRAYS_ZIP","FLATTEN","SEQUENCE","SHUFFLE","SLICE","SORT_ARRAY","ELEMENT_AT","ELEMENT_AT","MAP_CONCAT","MAP_ENTRIES","MAP_FROM_ARRAYS","MAP_FROM_ENTRIES","MAP_KEYS","MAP_VALUES","STR_TO_MAP","ADD_MONTHS","CURRENT_DATE","CURRENT_DATE","CURRENT_TIMESTAMP","CURRENT_TIMESTAMP","CURRENT_TIMEZONE","DATE_ADD","DATE_FORMAT","DATE_FROM_UNIX_DATE","DATE_PART","DATE_SUB","DATE_TRUNC","DATEDIFF","DAY","DAYOFMONTH","DAYOFWEEK","DAYOFYEAR","EXTRACT","FROM_UNIXTIME","FROM_UTC_TIMESTAMP","HOUR","LAST_DAY","MAKE_DATE","MAKE_DT_INTERVAL","MAKE_INTERVAL","MAKE_TIMESTAMP","MAKE_YM_INTERVAL","MINUTE","MONTH","MONTHS_BETWEEN","NEXT_DAY","NOW","QUARTER","SECOND","SESSION_WINDOW","TIMESTAMP_MICROS","TIMESTAMP_MILLIS","TIMESTAMP_SECONDS","TO_DATE","TO_TIMESTAMP","TO_UNIX_TIMESTAMP","TO_UTC_TIMESTAMP","TRUNC","UNIX_DATE","UNIX_MICROS","UNIX_MILLIS","UNIX_SECONDS","UNIX_TIMESTAMP","WEEKDAY","WEEKOFYEAR","WINDOW","YEAR","FROM_JSON","GET_JSON_OBJECT","JSON_ARRAY_LENGTH","JSON_OBJECT_KEYS","JSON_TUPLE","SCHEMA_OF_JSON","TO_JSON","ABS","ACOS","ACOSH","AGGREGATE","ARRAY_SORT","ASCII","ASIN","ASINH","ASSERT_TRUE","ATAN","ATAN2","ATANH","BASE64","BIN","BIT_COUNT","BIT_GET","BIT_LENGTH","BROUND","BTRIM","CARDINALITY","CBRT","CEIL","CEILING","CHAR_LENGTH","CHARACTER_LENGTH","CHR","CONCAT","CONCAT_WS","CONV","COS","COSH","COT","CRC32","CURRENT_CATALOG","CURRENT_DATABASE","CURRENT_USER","DEGREES","ELT","EXP","EXPM1","FACTORIAL","FIND_IN_SET","FLOOR","FORALL","FORMAT_NUMBER","FORMAT_STRING","FROM_CSV","GETBIT","HASH","HEX","HYPOT","INITCAP","INLINE","INLINE_OUTER","INPUT_FILE_BLOCK_LENGTH","INPUT_FILE_BLOCK_START","INPUT_FILE_NAME","INSTR","ISNAN","ISNOTNULL","ISNULL","JAVA_METHOD","LCASE","LEFT","LENGTH","LEVENSHTEIN","LN","LOCATE","LOG","LOG10","LOG1P","LOG2","LOWER","LPAD","LTRIM","MAP_FILTER","MAP_ZIP_WITH","MD5","MOD","MONOTONICALLY_INCREASING_ID","NAMED_STRUCT","NANVL","NEGATIVE","NVL","NVL2","OCTET_LENGTH","OVERLAY","PARSE_URL","PI","PMOD","POSEXPLODE","POSEXPLODE_OUTER","POSITION","POSITIVE","POW","POWER","PRINTF","RADIANS","RAISE_ERROR","RAND","RANDN","RANDOM","REFLECT","REGEXP_EXTRACT","REGEXP_EXTRACT_ALL","REGEXP_LIKE","REGEXP_REPLACE","REPEAT","REPLACE","REVERSE","RIGHT","RINT","ROUND","RPAD","RTRIM","SCHEMA_OF_CSV","SENTENCES","SHA","SHA1","SHA2","SHIFTLEFT","SHIFTRIGHT","SHIFTRIGHTUNSIGNED","SIGN","SIGNUM","SIN","SINH","SOUNDEX","SPACE","SPARK_PARTITION_ID","SPLIT","SQRT","STACK","SUBSTR","SUBSTRING","SUBSTRING_INDEX","TAN","TANH","TO_CSV","TRANSFORM_KEYS","TRANSFORM_VALUES","TRANSLATE","TRIM","TRY_ADD","TRY_DIVIDE","TYPEOF","UCASE","UNBASE64","UNHEX","UPPER","UUID","VERSION","WIDTH_BUCKET","XPATH","XPATH_BOOLEAN","XPATH_DOUBLE","XPATH_FLOAT","XPATH_INT","XPATH_LONG","XPATH_NUMBER","XPATH_SHORT","XPATH_STRING","XXHASH64","ZIP_WITH","CAST","COALESCE","NULLIF"]});function k0e(t){return t.map((e,r)=>{let n=t[r-1]||yi,i=t[r+1]||yi;return $n.WINDOW(e)&&i.type===$.OPEN_PAREN?Object.assign(Object.assign({},e),{type:$.RESERVED_FUNCTION_NAME}):e.text==="ITEMS"&&e.type===$.RESERVED_KEYWORD&&!(n.text==="COLLECTION"&&i.text==="TERMINATED")?Object.assign(Object.assign({},e),{type:$.IDENTIFIER,text:e.raw}):e})}var U0e,B0e,az,jy,F0e,G0e,H0e,W0e,eR,zy=H(()=>{xt();gn();iz();oz();U0e=x(["SELECT [ALL | DISTINCT]"]),B0e=x(["WITH","FROM","WHERE","GROUP BY","HAVING","WINDOW","PARTITION BY","ORDER BY","SORT BY","CLUSTER BY","DISTRIBUTE BY","LIMIT","INSERT [INTO | OVERWRITE] [TABLE]","VALUES","INSERT OVERWRITE [LOCAL] DIRECTORY","LOAD DATA [LOCAL] INPATH","[OVERWRITE] INTO TABLE"]),az=x(["CREATE [EXTERNAL] TABLE [IF NOT EXISTS]"]),jy=x(["CREATE [OR REPLACE] [GLOBAL TEMPORARY | TEMPORARY] VIEW [IF NOT EXISTS]","DROP TABLE [IF EXISTS]","ALTER TABLE","ADD COLUMNS","DROP {COLUMN | COLUMNS}","RENAME TO","RENAME COLUMN","ALTER COLUMN","TRUNCATE TABLE","LATERAL VIEW","ALTER DATABASE","ALTER VIEW","CREATE DATABASE","CREATE FUNCTION","DROP DATABASE","DROP FUNCTION","DROP VIEW","REPAIR TABLE","USE DATABASE","TABLESAMPLE","PIVOT","TRANSFORM","EXPLAIN","ADD FILE","ADD JAR","ANALYZE TABLE","CACHE TABLE","CLEAR CACHE","DESCRIBE DATABASE","DESCRIBE FUNCTION","DESCRIBE QUERY","DESCRIBE TABLE","LIST FILE","LIST JAR","REFRESH","REFRESH TABLE","REFRESH FUNCTION","RESET","SHOW COLUMNS","SHOW CREATE TABLE","SHOW DATABASES","SHOW FUNCTIONS","SHOW PARTITIONS","SHOW TABLE EXTENDED","SHOW TABLES","SHOW TBLPROPERTIES","SHOW VIEWS","UNCACHE TABLE"]),F0e=x(["UNION [ALL | DISTINCT]","EXCEPT [ALL | DISTINCT]","INTERSECT [ALL | DISTINCT]"]),G0e=x(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL [INNER] JOIN","NATURAL {LEFT | RIGHT | FULL} [OUTER] JOIN","[LEFT] {ANTI | SEMI} JOIN","NATURAL [LEFT] {ANTI | SEMI} JOIN"]),H0e=x(["ON DELETE","ON UPDATE","CURRENT ROW","{ROWS | RANGE} BETWEEN"]),W0e=x([]),eR={name:"spark",tokenizerOptions:{reservedSelect:U0e,reservedClauses:[...B0e,...az,...jy],reservedSetOperations:F0e,reservedJoins:G0e,reservedKeywordPhrases:H0e,reservedDataTypePhrases:W0e,supportsXor:!0,reservedKeywords:rz,reservedDataTypes:nz,reservedFunctionNames:sz,extraParens:["[]"],stringTypes:["''-bs",'""-bs',{quote:"''-raw",prefixes:["R","X"],requirePrefix:!0},{quote:'""-raw',prefixes:["R","X"],requirePrefix:!0}],identTypes:["``"],identChars:{allowFirstCharNumber:!0},variableTypes:[{quote:"{}",prefixes:["$"],requirePrefix:!0}],operators:["%","~","^","|","&","<=>","==","!","||","->"],postProcess:k0e},formatOptions:{onelineClauses:[...az,...jy],tabularOnelineClauses:jy}}});var lz,cz=H(()=>{lz=["ABS","CHANGES","CHAR","COALESCE","FORMAT","GLOB","HEX","IFNULL","IIF","INSTR","LAST_INSERT_ROWID","LENGTH","LIKE","LIKELIHOOD","LIKELY","LOAD_EXTENSION","LOWER","LTRIM","NULLIF","PRINTF","QUOTE","RANDOM","RANDOMBLOB","REPLACE","ROUND","RTRIM","SIGN","SOUNDEX","SQLITE_COMPILEOPTION_GET","SQLITE_COMPILEOPTION_USED","SQLITE_OFFSET","SQLITE_SOURCE_ID","SQLITE_VERSION","SUBSTR","SUBSTRING","TOTAL_CHANGES","TRIM","TYPEOF","UNICODE","UNLIKELY","UPPER","ZEROBLOB","AVG","COUNT","GROUP_CONCAT","MAX","MIN","SUM","TOTAL","DATE","TIME","DATETIME","JULIANDAY","UNIXEPOCH","STRFTIME","row_number","rank","dense_rank","percent_rank","cume_dist","ntile","lag","lead","first_value","last_value","nth_value","ACOS","ACOSH","ASIN","ASINH","ATAN","ATAN2","ATANH","CEIL","CEILING","COS","COSH","DEGREES","EXP","FLOOR","LN","LOG","LOG","LOG10","LOG2","MOD","PI","POW","POWER","RADIANS","SIN","SINH","SQRT","TAN","TANH","TRUNC","JSON","JSON_ARRAY","JSON_ARRAY_LENGTH","JSON_ARRAY_LENGTH","JSON_EXTRACT","JSON_INSERT","JSON_OBJECT","JSON_PATCH","JSON_REMOVE","JSON_REPLACE","JSON_SET","JSON_TYPE","JSON_TYPE","JSON_VALID","JSON_QUOTE","JSON_GROUP_ARRAY","JSON_GROUP_OBJECT","JSON_EACH","JSON_TREE","CAST"]});var uz,dz,fz=H(()=>{uz=["ABORT","ACTION","ADD","AFTER","ALL","ALTER","AND","ARE","ALWAYS","ANALYZE","AS","ASC","ATTACH","AUTOINCREMENT","BEFORE","BEGIN","BETWEEN","BY","CASCADE","CASE","CAST","CHECK","COLLATE","COLUMN","COMMIT","CONFLICT","CONSTRAINT","CREATE","CROSS","CURRENT","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","DATABASE","DEFAULT","DEFERRABLE","DEFERRED","DELETE","DESC","DETACH","DISTINCT","DO","DROP","EACH","ELSE","END","ESCAPE","EXCEPT","EXCLUDE","EXCLUSIVE","EXISTS","EXPLAIN","FAIL","FILTER","FIRST","FOLLOWING","FOR","FOREIGN","FROM","FULL","GENERATED","GLOB","GROUP","HAVING","IF","IGNORE","IMMEDIATE","IN","INDEX","INDEXED","INITIALLY","INNER","INSERT","INSTEAD","INTERSECT","INTO","IS","ISNULL","JOIN","KEY","LAST","LEFT","LIKE","LIMIT","MATCH","MATERIALIZED","NATURAL","NO","NOT","NOTHING","NOTNULL","NULL","NULLS","OF","OFFSET","ON","ONLY","OPEN","OR","ORDER","OTHERS","OUTER","OVER","PARTITION","PLAN","PRAGMA","PRECEDING","PRIMARY","QUERY","RAISE","RANGE","RECURSIVE","REFERENCES","REGEXP","REINDEX","RELEASE","RENAME","REPLACE","RESTRICT","RETURNING","RIGHT","ROLLBACK","ROW","ROWS","SAVEPOINT","SELECT","SET","TABLE","TEMP","TEMPORARY","THEN","TIES","TO","TRANSACTION","TRIGGER","UNBOUNDED","UNION","UNIQUE","UPDATE","USING","VACUUM","VALUES","VIEW","VIRTUAL","WHEN","WHERE","WINDOW","WITH","WITHOUT"],dz=["ANY","ARRAY","BLOB","CHARACTER","DECIMAL","INT","INTEGER","NATIVE CHARACTER","NCHAR","NUMERIC","NVARCHAR","REAL","TEXT","VARCHAR","VARYING CHARACTER"]});var $0e,Y0e,Ez,Ky,V0e,q0e,X0e,j0e,tR,Jy=H(()=>{xt();cz();fz();$0e=x(["SELECT [ALL | DISTINCT]"]),Y0e=x(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY","HAVING","WINDOW","PARTITION BY","ORDER BY","LIMIT","OFFSET","INSERT [OR ABORT | OR FAIL | OR IGNORE | OR REPLACE | OR ROLLBACK] INTO","REPLACE INTO","VALUES","SET","RETURNING"]),Ez=x(["CREATE [TEMPORARY | TEMP] TABLE [IF NOT EXISTS]"]),Ky=x(["CREATE [TEMPORARY | TEMP] VIEW [IF NOT EXISTS]","UPDATE [OR ABORT | OR FAIL | OR IGNORE | OR REPLACE | OR ROLLBACK]","ON CONFLICT","DELETE FROM","DROP TABLE [IF EXISTS]","ALTER TABLE","ADD [COLUMN]","DROP [COLUMN]","RENAME [COLUMN]","RENAME TO","SET SCHEMA"]),V0e=x(["UNION [ALL]","EXCEPT","INTERSECT"]),q0e=x(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL [INNER] JOIN","NATURAL {LEFT | RIGHT | FULL} [OUTER] JOIN"]),X0e=x(["ON {UPDATE | DELETE} [SET NULL | SET DEFAULT]","{ROWS | RANGE | GROUPS} BETWEEN","DO UPDATE"]),j0e=x([]),tR={name:"sqlite",tokenizerOptions:{reservedSelect:$0e,reservedClauses:[...Y0e,...Ez,...Ky],reservedSetOperations:V0e,reservedJoins:q0e,reservedKeywordPhrases:X0e,reservedDataTypePhrases:j0e,reservedKeywords:uz,reservedDataTypes:dz,reservedFunctionNames:lz,stringTypes:["''-qq",{quote:"''-raw",prefixes:["X"],requirePrefix:!0}],identTypes:['""-qq',"``","[]"],paramTypes:{positional:!0,numbered:["?"],named:[":","@","$"]},operators:["%","~","&","|","<<",">>","==","->","->>","||"]},formatOptions:{onelineClauses:[...Ez,...Ky],tabularOnelineClauses:Ky}}});var hz,Tz=H(()=>{hz=["GROUPING","RANK","DENSE_RANK","PERCENT_RANK","CUME_DIST","ROW_NUMBER","POSITION","OCCURRENCES_REGEX","POSITION_REGEX","EXTRACT","CHAR_LENGTH","CHARACTER_LENGTH","OCTET_LENGTH","CARDINALITY","ABS","MOD","LN","EXP","POWER","SQRT","FLOOR","CEIL","CEILING","WIDTH_BUCKET","SUBSTRING","SUBSTRING_REGEX","UPPER","LOWER","CONVERT","TRANSLATE","TRANSLATE_REGEX","TRIM","OVERLAY","NORMALIZE","SPECIFICTYPE","CURRENT_DATE","CURRENT_TIME","LOCALTIME","CURRENT_TIMESTAMP","LOCALTIMESTAMP","COUNT","AVG","MAX","MIN","SUM","STDDEV_POP","STDDEV_SAMP","VAR_SAMP","VAR_POP","COLLECT","FUSION","INTERSECTION","COVAR_POP","COVAR_SAMP","CORR","REGR_SLOPE","REGR_INTERCEPT","REGR_COUNT","REGR_R2","REGR_AVGX","REGR_AVGY","REGR_SXX","REGR_SYY","REGR_SXY","PERCENTILE_CONT","PERCENTILE_DISC","CAST","COALESCE","NULLIF","ROUND","SIN","COS","TAN","ASIN","ACOS","ATAN"]});var pz,Sz,Rz=H(()=>{pz=["ALL","ALLOCATE","ALTER","ANY","ARE","AS","ASC","ASENSITIVE","ASYMMETRIC","AT","ATOMIC","AUTHORIZATION","BEGIN","BETWEEN","BOTH","BY","CALL","CALLED","CASCADED","CAST","CHECK","CLOSE","COALESCE","COLLATE","COLUMN","COMMIT","CONDITION","CONNECT","CONSTRAINT","CORRESPONDING","CREATE","CROSS","CUBE","CURRENT","CURRENT_CATALOG","CURRENT_DEFAULT_TRANSFORM_GROUP","CURRENT_PATH","CURRENT_ROLE","CURRENT_SCHEMA","CURRENT_TRANSFORM_GROUP_FOR_TYPE","CURRENT_USER","CURSOR","CYCLE","DEALLOCATE","DAY","DECLARE","DEFAULT","DELETE","DEREF","DESC","DESCRIBE","DETERMINISTIC","DISCONNECT","DISTINCT","DROP","DYNAMIC","EACH","ELEMENT","END-EXEC","ESCAPE","EVERY","EXCEPT","EXEC","EXECUTE","EXISTS","EXTERNAL","FALSE","FETCH","FILTER","FOR","FOREIGN","FREE","FROM","FULL","FUNCTION","GET","GLOBAL","GRANT","GROUP","HAVING","HOLD","HOUR","IDENTITY","IN","INDICATOR","INNER","INOUT","INSENSITIVE","INSERT","INTERSECT","INTO","IS","LANGUAGE","LARGE","LATERAL","LEADING","LEFT","LIKE","LIKE_REGEX","LOCAL","MATCH","MEMBER","MERGE","METHOD","MINUTE","MODIFIES","MODULE","MONTH","NATURAL","NEW","NO","NONE","NOT","NULL","NULLIF","OF","OLD","ON","ONLY","OPEN","ORDER","OUT","OUTER","OVER","OVERLAPS","PARAMETER","PARTITION","PRECISION","PREPARE","PRIMARY","PROCEDURE","RANGE","READS","REAL","RECURSIVE","REF","REFERENCES","REFERENCING","RELEASE","RESULT","RETURN","RETURNS","REVOKE","RIGHT","ROLLBACK","ROLLUP","ROW","ROWS","SAVEPOINT","SCOPE","SCROLL","SEARCH","SECOND","SELECT","SENSITIVE","SESSION_USER","SET","SIMILAR","SOME","SPECIFIC","SQL","SQLEXCEPTION","SQLSTATE","SQLWARNING","START","STATIC","SUBMULTISET","SYMMETRIC","SYSTEM","SYSTEM_USER","TABLE","TABLESAMPLE","THEN","TIMEZONE_HOUR","TIMEZONE_MINUTE","TO","TRAILING","TRANSLATION","TREAT","TRIGGER","TRUE","UESCAPE","UNION","UNIQUE","UNKNOWN","UNNEST","UPDATE","USER","USING","VALUE","VALUES","WHENEVER","WINDOW","WITHIN","WITHOUT","YEAR"],Sz=["ARRAY","BIGINT","BINARY LARGE OBJECT","BINARY VARYING","BINARY","BLOB","BOOLEAN","CHAR LARGE OBJECT","CHAR VARYING","CHAR","CHARACTER LARGE OBJECT","CHARACTER VARYING","CHARACTER","CLOB","DATE","DEC","DECIMAL","DOUBLE","FLOAT","INT","INTEGER","INTERVAL","MULTISET","NATIONAL CHAR VARYING","NATIONAL CHAR","NATIONAL CHARACTER LARGE OBJECT","NATIONAL CHARACTER VARYING","NATIONAL CHARACTER","NCHAR LARGE OBJECT","NCHAR VARYING","NCHAR","NCLOB","NUMERIC","SMALLINT","TIME","TIMESTAMP","VARBINARY","VARCHAR"]});var z0e,K0e,Az,Qy,J0e,Q0e,Z0e,ewe,rR,Zy=H(()=>{xt();Tz();Rz();z0e=x(["SELECT [ALL | DISTINCT]"]),K0e=x(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY [ALL | DISTINCT]","HAVING","WINDOW","PARTITION BY","ORDER BY","LIMIT","OFFSET","FETCH {FIRST | NEXT}","INSERT INTO","VALUES","SET"]),Az=x(["CREATE [GLOBAL TEMPORARY | LOCAL TEMPORARY] TABLE"]),Qy=x(["CREATE [RECURSIVE] VIEW","UPDATE","WHERE CURRENT OF","DELETE FROM","DROP TABLE","ALTER TABLE","ADD COLUMN","DROP [COLUMN]","RENAME COLUMN","RENAME TO","ALTER [COLUMN]","{SET | DROP} DEFAULT","ADD SCOPE","DROP SCOPE {CASCADE | RESTRICT}","RESTART WITH","TRUNCATE TABLE","SET SCHEMA"]),J0e=x(["UNION [ALL | DISTINCT]","EXCEPT [ALL | DISTINCT]","INTERSECT [ALL | DISTINCT]"]),Q0e=x(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL [INNER] JOIN","NATURAL {LEFT | RIGHT | FULL} [OUTER] JOIN"]),Z0e=x(["ON {UPDATE | DELETE} [SET NULL | SET DEFAULT]","{ROWS | RANGE} BETWEEN"]),ewe=x([]),rR={name:"sql",tokenizerOptions:{reservedSelect:z0e,reservedClauses:[...K0e,...Az,...Qy],reservedSetOperations:J0e,reservedJoins:Q0e,reservedKeywordPhrases:Z0e,reservedDataTypePhrases:ewe,reservedKeywords:pz,reservedDataTypes:Sz,reservedFunctionNames:hz,stringTypes:[{quote:"''-qq-bs",prefixes:["N","U&"]},{quote:"''-raw",prefixes:["X"],requirePrefix:!0}],identTypes:['""-qq',"``"],paramTypes:{positional:!0},operators:["||"]},formatOptions:{onelineClauses:[...Az,...Qy],tabularOnelineClauses:Qy}}});var mz,_z=H(()=>{mz=["ABS","ACOS","ALL_MATCH","ANY_MATCH","APPROX_DISTINCT","APPROX_MOST_FREQUENT","APPROX_PERCENTILE","APPROX_SET","ARBITRARY","ARRAYS_OVERLAP","ARRAY_AGG","ARRAY_DISTINCT","ARRAY_EXCEPT","ARRAY_INTERSECT","ARRAY_JOIN","ARRAY_MAX","ARRAY_MIN","ARRAY_POSITION","ARRAY_REMOVE","ARRAY_SORT","ARRAY_UNION","ASIN","ATAN","ATAN2","AT_TIMEZONE","AVG","BAR","BETA_CDF","BING_TILE","BING_TILES_AROUND","BING_TILE_AT","BING_TILE_COORDINATES","BING_TILE_POLYGON","BING_TILE_QUADKEY","BING_TILE_ZOOM_LEVEL","BITWISE_AND","BITWISE_AND_AGG","BITWISE_LEFT_SHIFT","BITWISE_NOT","BITWISE_OR","BITWISE_OR_AGG","BITWISE_RIGHT_SHIFT","BITWISE_RIGHT_SHIFT_ARITHMETIC","BITWISE_XOR","BIT_COUNT","BOOL_AND","BOOL_OR","CARDINALITY","CAST","CBRT","CEIL","CEILING","CHAR2HEXINT","CHECKSUM","CHR","CLASSIFY","COALESCE","CODEPOINT","COLOR","COMBINATIONS","CONCAT","CONCAT_WS","CONTAINS","CONTAINS_SEQUENCE","CONVEX_HULL_AGG","CORR","COS","COSH","COSINE_SIMILARITY","COUNT","COUNT_IF","COVAR_POP","COVAR_SAMP","CRC32","CUME_DIST","CURRENT_CATALOG","CURRENT_DATE","CURRENT_GROUPS","CURRENT_SCHEMA","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_TIMEZONE","CURRENT_USER","DATE","DATE_ADD","DATE_DIFF","DATE_FORMAT","DATE_PARSE","DATE_TRUNC","DAY","DAY_OF_MONTH","DAY_OF_WEEK","DAY_OF_YEAR","DEGREES","DENSE_RANK","DOW","DOY","E","ELEMENT_AT","EMPTY_APPROX_SET","EVALUATE_CLASSIFIER_PREDICTIONS","EVERY","EXP","EXTRACT","FEATURES","FILTER","FIRST_VALUE","FLATTEN","FLOOR","FORMAT","FORMAT_DATETIME","FORMAT_NUMBER","FROM_BASE","FROM_BASE32","FROM_BASE64","FROM_BASE64URL","FROM_BIG_ENDIAN_32","FROM_BIG_ENDIAN_64","FROM_ENCODED_POLYLINE","FROM_GEOJSON_GEOMETRY","FROM_HEX","FROM_IEEE754_32","FROM_IEEE754_64","FROM_ISO8601_DATE","FROM_ISO8601_TIMESTAMP","FROM_ISO8601_TIMESTAMP_NANOS","FROM_UNIXTIME","FROM_UNIXTIME_NANOS","FROM_UTF8","GEOMETRIC_MEAN","GEOMETRY_FROM_HADOOP_SHAPE","GEOMETRY_INVALID_REASON","GEOMETRY_NEAREST_POINTS","GEOMETRY_TO_BING_TILES","GEOMETRY_UNION","GEOMETRY_UNION_AGG","GREATEST","GREAT_CIRCLE_DISTANCE","HAMMING_DISTANCE","HASH_COUNTS","HISTOGRAM","HMAC_MD5","HMAC_SHA1","HMAC_SHA256","HMAC_SHA512","HOUR","HUMAN_READABLE_SECONDS","IF","INDEX","INFINITY","INTERSECTION_CARDINALITY","INVERSE_BETA_CDF","INVERSE_NORMAL_CDF","IS_FINITE","IS_INFINITE","IS_JSON_SCALAR","IS_NAN","JACCARD_INDEX","JSON_ARRAY_CONTAINS","JSON_ARRAY_GET","JSON_ARRAY_LENGTH","JSON_EXISTS","JSON_EXTRACT","JSON_EXTRACT_SCALAR","JSON_FORMAT","JSON_PARSE","JSON_QUERY","JSON_SIZE","JSON_VALUE","KURTOSIS","LAG","LAST_DAY_OF_MONTH","LAST_VALUE","LEAD","LEARN_CLASSIFIER","LEARN_LIBSVM_CLASSIFIER","LEARN_LIBSVM_REGRESSOR","LEARN_REGRESSOR","LEAST","LENGTH","LEVENSHTEIN_DISTANCE","LINE_INTERPOLATE_POINT","LINE_INTERPOLATE_POINTS","LINE_LOCATE_POINT","LISTAGG","LN","LOCALTIME","LOCALTIMESTAMP","LOG","LOG10","LOG2","LOWER","LPAD","LTRIM","LUHN_CHECK","MAKE_SET_DIGEST","MAP","MAP_AGG","MAP_CONCAT","MAP_ENTRIES","MAP_FILTER","MAP_FROM_ENTRIES","MAP_KEYS","MAP_UNION","MAP_VALUES","MAP_ZIP_WITH","MAX","MAX_BY","MD5","MERGE","MERGE_SET_DIGEST","MILLISECOND","MIN","MINUTE","MIN_BY","MOD","MONTH","MULTIMAP_AGG","MULTIMAP_FROM_ENTRIES","MURMUR3","NAN","NGRAMS","NONE_MATCH","NORMALIZE","NORMAL_CDF","NOW","NTH_VALUE","NTILE","NULLIF","NUMERIC_HISTOGRAM","OBJECTID","OBJECTID_TIMESTAMP","PARSE_DATA_SIZE","PARSE_DATETIME","PARSE_DURATION","PERCENT_RANK","PI","POSITION","POW","POWER","QDIGEST_AGG","QUARTER","RADIANS","RAND","RANDOM","RANK","REDUCE","REDUCE_AGG","REGEXP_COUNT","REGEXP_EXTRACT","REGEXP_EXTRACT_ALL","REGEXP_LIKE","REGEXP_POSITION","REGEXP_REPLACE","REGEXP_SPLIT","REGRESS","REGR_INTERCEPT","REGR_SLOPE","RENDER","REPEAT","REPLACE","REVERSE","RGB","ROUND","ROW_NUMBER","RPAD","RTRIM","SECOND","SEQUENCE","SHA1","SHA256","SHA512","SHUFFLE","SIGN","SIMPLIFY_GEOMETRY","SIN","SKEWNESS","SLICE","SOUNDEX","SPATIAL_PARTITIONING","SPATIAL_PARTITIONS","SPLIT","SPLIT_PART","SPLIT_TO_MAP","SPLIT_TO_MULTIMAP","SPOOKY_HASH_V2_32","SPOOKY_HASH_V2_64","SQRT","STARTS_WITH","STDDEV","STDDEV_POP","STDDEV_SAMP","STRPOS","ST_AREA","ST_ASBINARY","ST_ASTEXT","ST_BOUNDARY","ST_BUFFER","ST_CENTROID","ST_CONTAINS","ST_CONVEXHULL","ST_COORDDIM","ST_CROSSES","ST_DIFFERENCE","ST_DIMENSION","ST_DISJOINT","ST_DISTANCE","ST_ENDPOINT","ST_ENVELOPE","ST_ENVELOPEASPTS","ST_EQUALS","ST_EXTERIORRING","ST_GEOMETRIES","ST_GEOMETRYFROMTEXT","ST_GEOMETRYN","ST_GEOMETRYTYPE","ST_GEOMFROMBINARY","ST_INTERIORRINGN","ST_INTERIORRINGS","ST_INTERSECTION","ST_INTERSECTS","ST_ISCLOSED","ST_ISEMPTY","ST_ISRING","ST_ISSIMPLE","ST_ISVALID","ST_LENGTH","ST_LINEFROMTEXT","ST_LINESTRING","ST_MULTIPOINT","ST_NUMGEOMETRIES","ST_NUMINTERIORRING","ST_NUMPOINTS","ST_OVERLAPS","ST_POINT","ST_POINTN","ST_POINTS","ST_POLYGON","ST_RELATE","ST_STARTPOINT","ST_SYMDIFFERENCE","ST_TOUCHES","ST_UNION","ST_WITHIN","ST_X","ST_XMAX","ST_XMIN","ST_Y","ST_YMAX","ST_YMIN","SUBSTR","SUBSTRING","SUM","TAN","TANH","TDIGEST_AGG","TIMESTAMP_OBJECTID","TIMEZONE_HOUR","TIMEZONE_MINUTE","TO_BASE","TO_BASE32","TO_BASE64","TO_BASE64URL","TO_BIG_ENDIAN_32","TO_BIG_ENDIAN_64","TO_CHAR","TO_DATE","TO_ENCODED_POLYLINE","TO_GEOJSON_GEOMETRY","TO_GEOMETRY","TO_HEX","TO_IEEE754_32","TO_IEEE754_64","TO_ISO8601","TO_MILLISECONDS","TO_SPHERICAL_GEOGRAPHY","TO_TIMESTAMP","TO_UNIXTIME","TO_UTF8","TRANSFORM","TRANSFORM_KEYS","TRANSFORM_VALUES","TRANSLATE","TRIM","TRIM_ARRAY","TRUNCATE","TRY","TRY_CAST","TYPEOF","UPPER","URL_DECODE","URL_ENCODE","URL_EXTRACT_FRAGMENT","URL_EXTRACT_HOST","URL_EXTRACT_PARAMETER","URL_EXTRACT_PATH","URL_EXTRACT_PORT","URL_EXTRACT_PROTOCOL","URL_EXTRACT_QUERY","UUID","VALUES_AT_QUANTILES","VALUE_AT_QUANTILE","VARIANCE","VAR_POP","VAR_SAMP","VERSION","WEEK","WEEK_OF_YEAR","WIDTH_BUCKET","WILSON_INTERVAL_LOWER","WILSON_INTERVAL_UPPER","WITH_TIMEZONE","WORD_STEM","XXHASH64","YEAR","YEAR_OF_WEEK","YOW","ZIP","ZIP_WITH","CLASSIFIER","FIRST","LAST","MATCH_NUMBER","NEXT","PERMUTE","PREV"]});var Iz,gz,Nz=H(()=>{Iz=["ABSENT","ADD","ADMIN","AFTER","ALL","ALTER","ANALYZE","AND","ANY","AS","ASC","AT","AUTHORIZATION","BERNOULLI","BETWEEN","BOTH","BY","CALL","CASCADE","CASE","CATALOGS","COLUMN","COLUMNS","COMMENT","COMMIT","COMMITTED","CONDITIONAL","CONSTRAINT","COPARTITION","CREATE","CROSS","CUBE","CURRENT","CURRENT_PATH","CURRENT_ROLE","DATA","DEALLOCATE","DEFAULT","DEFINE","DEFINER","DELETE","DENY","DESC","DESCRIBE","DESCRIPTOR","DISTINCT","DISTRIBUTED","DOUBLE","DROP","ELSE","EMPTY","ENCODING","END","ERROR","ESCAPE","EXCEPT","EXCLUDING","EXECUTE","EXISTS","EXPLAIN","FALSE","FETCH","FINAL","FIRST","FOLLOWING","FOR","FROM","FULL","FUNCTIONS","GRANT","GRANTED","GRANTS","GRAPHVIZ","GROUP","GROUPING","GROUPS","HAVING","IGNORE","IN","INCLUDING","INITIAL","INNER","INPUT","INSERT","INTERSECT","INTERVAL","INTO","INVOKER","IO","IS","ISOLATION","JOIN","JSON","JSON_ARRAY","JSON_OBJECT","KEEP","KEY","KEYS","LAST","LATERAL","LEADING","LEFT","LEVEL","LIKE","LIMIT","LOCAL","LOGICAL","MATCH","MATCHED","MATCHES","MATCH_RECOGNIZE","MATERIALIZED","MEASURES","NATURAL","NEXT","NFC","NFD","NFKC","NFKD","NO","NONE","NOT","NULL","NULLS","OBJECT","OF","OFFSET","OMIT","ON","ONE","ONLY","OPTION","OR","ORDER","ORDINALITY","OUTER","OUTPUT","OVER","OVERFLOW","PARTITION","PARTITIONS","PASSING","PAST","PATH","PATTERN","PER","PERMUTE","PRECEDING","PRECISION","PREPARE","PRIVILEGES","PROPERTIES","PRUNE","QUOTES","RANGE","READ","RECURSIVE","REFRESH","RENAME","REPEATABLE","RESET","RESPECT","RESTRICT","RETURNING","REVOKE","RIGHT","ROLE","ROLES","ROLLBACK","ROLLUP","ROW","ROWS","RUNNING","SCALAR","SCHEMA","SCHEMAS","SECURITY","SEEK","SELECT","SERIALIZABLE","SESSION","SET","SETS","SHOW","SKIP","SOME","START","STATS","STRING","SUBSET","SYSTEM","TABLE","TABLES","TABLESAMPLE","TEXT","THEN","TIES","TIME","TIMESTAMP","TO","TRAILING","TRANSACTION","TRUE","TYPE","UESCAPE","UNBOUNDED","UNCOMMITTED","UNCONDITIONAL","UNION","UNIQUE","UNKNOWN","UNMATCHED","UNNEST","UPDATE","USE","USER","USING","UTF16","UTF32","UTF8","VALIDATE","VALUE","VALUES","VERBOSE","VIEW","WHEN","WHERE","WINDOW","WITH","WITHIN","WITHOUT","WORK","WRAPPER","WRITE","ZONE"],gz=["BIGINT","INT","INTEGER","SMALLINT","TINYINT","BOOLEAN","DATE","DECIMAL","REAL","DOUBLE","HYPERLOGLOG","QDIGEST","TDIGEST","P4HYPERLOGLOG","INTERVAL","TIMESTAMP","TIME","VARBINARY","VARCHAR","CHAR","ROW","ARRAY","MAP","JSON","JSON2016","IPADDRESS","GEOMETRY","UUID","SETDIGEST","JONIREGEXP","RE2JREGEXP","LIKEPATTERN","COLOR","CODEPOINTS","FUNCTION","JSONPATH"]});var twe,rwe,Oz,eb,nwe,iwe,swe,owe,nR,tb=H(()=>{xt();_z();Nz();twe=x(["SELECT [ALL | DISTINCT]"]),rwe=x(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY [ALL | DISTINCT]","HAVING","WINDOW","PARTITION BY","ORDER BY","LIMIT","OFFSET","FETCH {FIRST | NEXT}","INSERT INTO","VALUES","SET","MATCH_RECOGNIZE","MEASURES","ONE ROW PER MATCH","ALL ROWS PER MATCH","AFTER MATCH","PATTERN","SUBSET","DEFINE"]),Oz=x(["CREATE TABLE [IF NOT EXISTS]"]),eb=x(["CREATE [OR REPLACE] [MATERIALIZED] VIEW","UPDATE","DELETE FROM","DROP TABLE [IF EXISTS]","ALTER TABLE [IF EXISTS]","ADD COLUMN [IF NOT EXISTS]","DROP COLUMN [IF EXISTS]","RENAME COLUMN [IF EXISTS]","RENAME TO","SET AUTHORIZATION [USER | ROLE]","SET PROPERTIES","EXECUTE","TRUNCATE TABLE","ALTER SCHEMA","ALTER MATERIALIZED VIEW","ALTER VIEW","CREATE SCHEMA","CREATE ROLE","DROP SCHEMA","DROP MATERIALIZED VIEW","DROP VIEW","DROP ROLE","EXPLAIN","ANALYZE","EXPLAIN ANALYZE","EXPLAIN ANALYZE VERBOSE","USE","DESCRIBE INPUT","DESCRIBE OUTPUT","REFRESH MATERIALIZED VIEW","RESET SESSION","SET SESSION","SET PATH","SET TIME ZONE","SHOW GRANTS","SHOW CREATE TABLE","SHOW CREATE SCHEMA","SHOW CREATE VIEW","SHOW CREATE MATERIALIZED VIEW","SHOW TABLES","SHOW SCHEMAS","SHOW CATALOGS","SHOW COLUMNS","SHOW STATS FOR","SHOW ROLES","SHOW CURRENT ROLES","SHOW ROLE GRANTS","SHOW FUNCTIONS","SHOW SESSION"]),nwe=x(["UNION [ALL | DISTINCT]","EXCEPT [ALL | DISTINCT]","INTERSECT [ALL | DISTINCT]"]),iwe=x(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL [INNER] JOIN","NATURAL {LEFT | RIGHT | FULL} [OUTER] JOIN"]),swe=x(["{ROWS | RANGE | GROUPS} BETWEEN","IS [NOT] DISTINCT FROM"]),owe=x([]),nR={name:"trino",tokenizerOptions:{reservedSelect:twe,reservedClauses:[...rwe,...Oz,...eb],reservedSetOperations:nwe,reservedJoins:iwe,reservedKeywordPhrases:swe,reservedDataTypePhrases:owe,reservedKeywords:Iz,reservedDataTypes:gz,reservedFunctionNames:mz,extraParens:["[]","{}"],stringTypes:[{quote:"''-qq",prefixes:["U&"]},{quote:"''-raw",prefixes:["X"],requirePrefix:!0}],identTypes:['""-qq'],paramTypes:{positional:!0},operators:["%","->","=>",":","||","|","^","$"]},formatOptions:{onelineClauses:[...Oz,...eb],tabularOnelineClauses:eb}}});var Cz,yz=H(()=>{Cz=["APPROX_COUNT_DISTINCT","AVG","CHECKSUM_AGG","COUNT","COUNT_BIG","GROUPING","GROUPING_ID","MAX","MIN","STDEV","STDEVP","SUM","VAR","VARP","CUME_DIST","FIRST_VALUE","LAG","LAST_VALUE","LEAD","PERCENTILE_CONT","PERCENTILE_DISC","PERCENT_RANK","Collation - COLLATIONPROPERTY","Collation - TERTIARY_WEIGHTS","@@DBTS","@@LANGID","@@LANGUAGE","@@LOCK_TIMEOUT","@@MAX_CONNECTIONS","@@MAX_PRECISION","@@NESTLEVEL","@@OPTIONS","@@REMSERVER","@@SERVERNAME","@@SERVICENAME","@@SPID","@@TEXTSIZE","@@VERSION","CAST","CONVERT","PARSE","TRY_CAST","TRY_CONVERT","TRY_PARSE","ASYMKEY_ID","ASYMKEYPROPERTY","CERTPROPERTY","CERT_ID","CRYPT_GEN_RANDOM","DECRYPTBYASYMKEY","DECRYPTBYCERT","DECRYPTBYKEY","DECRYPTBYKEYAUTOASYMKEY","DECRYPTBYKEYAUTOCERT","DECRYPTBYPASSPHRASE","ENCRYPTBYASYMKEY","ENCRYPTBYCERT","ENCRYPTBYKEY","ENCRYPTBYPASSPHRASE","HASHBYTES","IS_OBJECTSIGNED","KEY_GUID","KEY_ID","KEY_NAME","SIGNBYASYMKEY","SIGNBYCERT","SYMKEYPROPERTY","VERIFYSIGNEDBYCERT","VERIFYSIGNEDBYASYMKEY","@@CURSOR_ROWS","@@FETCH_STATUS","CURSOR_STATUS","DATALENGTH","IDENT_CURRENT","IDENT_INCR","IDENT_SEED","IDENTITY","SQL_VARIANT_PROPERTY","@@DATEFIRST","CURRENT_TIMESTAMP","CURRENT_TIMEZONE","CURRENT_TIMEZONE_ID","DATEADD","DATEDIFF","DATEDIFF_BIG","DATEFROMPARTS","DATENAME","DATEPART","DATETIME2FROMPARTS","DATETIMEFROMPARTS","DATETIMEOFFSETFROMPARTS","DAY","EOMONTH","GETDATE","GETUTCDATE","ISDATE","MONTH","SMALLDATETIMEFROMPARTS","SWITCHOFFSET","SYSDATETIME","SYSDATETIMEOFFSET","SYSUTCDATETIME","TIMEFROMPARTS","TODATETIMEOFFSET","YEAR","JSON","ISJSON","JSON_VALUE","JSON_QUERY","JSON_MODIFY","ABS","ACOS","ASIN","ATAN","ATN2","CEILING","COS","COT","DEGREES","EXP","FLOOR","LOG","LOG10","PI","POWER","RADIANS","RAND","ROUND","SIGN","SIN","SQRT","SQUARE","TAN","CHOOSE","GREATEST","IIF","LEAST","@@PROCID","APP_NAME","APPLOCK_MODE","APPLOCK_TEST","ASSEMBLYPROPERTY","COL_LENGTH","COL_NAME","COLUMNPROPERTY","DATABASEPROPERTYEX","DB_ID","DB_NAME","FILE_ID","FILE_IDEX","FILE_NAME","FILEGROUP_ID","FILEGROUP_NAME","FILEGROUPPROPERTY","FILEPROPERTY","FILEPROPERTYEX","FULLTEXTCATALOGPROPERTY","FULLTEXTSERVICEPROPERTY","INDEX_COL","INDEXKEY_PROPERTY","INDEXPROPERTY","NEXT VALUE FOR","OBJECT_DEFINITION","OBJECT_ID","OBJECT_NAME","OBJECT_SCHEMA_NAME","OBJECTPROPERTY","OBJECTPROPERTYEX","ORIGINAL_DB_NAME","PARSENAME","SCHEMA_ID","SCHEMA_NAME","SCOPE_IDENTITY","SERVERPROPERTY","STATS_DATE","TYPE_ID","TYPE_NAME","TYPEPROPERTY","DENSE_RANK","NTILE","RANK","ROW_NUMBER","PUBLISHINGSERVERNAME","CERTENCODED","CERTPRIVATEKEY","CURRENT_USER","DATABASE_PRINCIPAL_ID","HAS_DBACCESS","HAS_PERMS_BY_NAME","IS_MEMBER","IS_ROLEMEMBER","IS_SRVROLEMEMBER","LOGINPROPERTY","ORIGINAL_LOGIN","PERMISSIONS","PWDENCRYPT","PWDCOMPARE","SESSION_USER","SESSIONPROPERTY","SUSER_ID","SUSER_NAME","SUSER_SID","SUSER_SNAME","SYSTEM_USER","USER","USER_ID","USER_NAME","ASCII","CHARINDEX","CONCAT","CONCAT_WS","DIFFERENCE","FORMAT","LEFT","LEN","LOWER","LTRIM","PATINDEX","QUOTENAME","REPLACE","REPLICATE","REVERSE","RIGHT","RTRIM","SOUNDEX","SPACE","STR","STRING_AGG","STRING_ESCAPE","STUFF","SUBSTRING","TRANSLATE","TRIM","UNICODE","UPPER","$PARTITION","@@ERROR","@@IDENTITY","@@PACK_RECEIVED","@@ROWCOUNT","@@TRANCOUNT","BINARY_CHECKSUM","CHECKSUM","COMPRESS","CONNECTIONPROPERTY","CONTEXT_INFO","CURRENT_REQUEST_ID","CURRENT_TRANSACTION_ID","DECOMPRESS","ERROR_LINE","ERROR_MESSAGE","ERROR_NUMBER","ERROR_PROCEDURE","ERROR_SEVERITY","ERROR_STATE","FORMATMESSAGE","GET_FILESTREAM_TRANSACTION_CONTEXT","GETANSINULL","HOST_ID","HOST_NAME","ISNULL","ISNUMERIC","MIN_ACTIVE_ROWVERSION","NEWID","NEWSEQUENTIALID","ROWCOUNT_BIG","SESSION_CONTEXT","XACT_STATE","@@CONNECTIONS","@@CPU_BUSY","@@IDLE","@@IO_BUSY","@@PACK_SENT","@@PACKET_ERRORS","@@TIMETICKS","@@TOTAL_ERRORS","@@TOTAL_READ","@@TOTAL_WRITE","TEXTPTR","TEXTVALID","COLUMNS_UPDATED","EVENTDATA","TRIGGER_NESTLEVEL","UPDATE","COALESCE","NULLIF"]});var bz,wz,Lz=H(()=>{bz=["ADD","ALL","ALTER","AND","ANY","AS","ASC","AUTHORIZATION","BACKUP","BEGIN","BETWEEN","BREAK","BROWSE","BULK","BY","CASCADE","CHECK","CHECKPOINT","CLOSE","CLUSTERED","COALESCE","COLLATE","COLUMN","COMMIT","COMPUTE","CONSTRAINT","CONTAINS","CONTAINSTABLE","CONTINUE","CONVERT","CREATE","CROSS","CURRENT","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURSOR","DATABASE","DBCC","DEALLOCATE","DECLARE","DEFAULT","DELETE","DENY","DESC","DISK","DISTINCT","DISTRIBUTED","DROP","DUMP","ERRLVL","ESCAPE","EXEC","EXECUTE","EXISTS","EXIT","EXTERNAL","FETCH","FILE","FILLFACTOR","FOR","FOREIGN","FREETEXT","FREETEXTTABLE","FROM","FULL","FUNCTION","GOTO","GRANT","GROUP","HAVING","HOLDLOCK","IDENTITY","IDENTITYCOL","IDENTITY_INSERT","IF","IN","INDEX","INNER","INSERT","INTERSECT","INTO","IS","JOIN","KEY","KILL","LEFT","LIKE","LINENO","LOAD","MERGE","NOCHECK","NONCLUSTERED","NOT","NULL","NULLIF","OF","OFF","OFFSETS","ON","OPEN","OPENDATASOURCE","OPENQUERY","OPENROWSET","OPENXML","OPTION","OR","ORDER","OUTER","OVER","PERCENT","PIVOT","PLAN","PRIMARY","PRINT","PROC","PROCEDURE","PUBLIC","RAISERROR","READ","READTEXT","RECONFIGURE","REFERENCES","REPLICATION","RESTORE","RESTRICT","RETURN","REVERT","REVOKE","RIGHT","ROLLBACK","ROWCOUNT","ROWGUIDCOL","RULE","SAVE","SCHEMA","SECURITYAUDIT","SELECT","SEMANTICKEYPHRASETABLE","SEMANTICSIMILARITYDETAILSTABLE","SEMANTICSIMILARITYTABLE","SESSION_USER","SET","SETUSER","SHUTDOWN","SOME","STATISTICS","SYSTEM_USER","TABLE","TABLESAMPLE","TEXTSIZE","THEN","TO","TOP","TRAN","TRANSACTION","TRIGGER","TRUNCATE","TRY_CONVERT","TSEQUAL","UNION","UNIQUE","UNPIVOT","UPDATE","UPDATETEXT","USE","USER","VALUES","VIEW","WAITFOR","WHERE","WHILE","WITH","WITHIN GROUP","WRITETEXT","$ACTION"],wz=["BINARY","BIT","CHAR","CHAR","CHARACTER","DATE","DATETIME2","DATETIMEOFFSET","DEC","DECIMAL","DOUBLE","FLOAT","INT","INTEGER","NATIONAL","NCHAR","NUMERIC","NVARCHAR","PRECISION","REAL","SMALLINT","TIME","TIMESTAMP","VARBINARY","VARCHAR"]});var awe,lwe,Dz,rb,cwe,uwe,dwe,fwe,iR,nb=H(()=>{xt();yz();Lz();awe=x(["SELECT [ALL | DISTINCT]"]),lwe=x(["WITH","INTO","FROM","WHERE","GROUP BY","HAVING","WINDOW","PARTITION BY","ORDER BY","OFFSET","FETCH {FIRST | NEXT}","FOR {BROWSE | XML | JSON}","OPTION","INSERT [INTO]","VALUES","SET","MERGE [INTO]","WHEN [NOT] MATCHED [BY TARGET | BY SOURCE] [THEN]","UPDATE SET"]),Dz=x(["CREATE TABLE"]),rb=x(["CREATE [OR ALTER] [MATERIALIZED] VIEW","UPDATE","WHERE CURRENT OF","DELETE [FROM]","DROP TABLE [IF EXISTS]","ALTER TABLE","ADD","DROP COLUMN [IF EXISTS]","ALTER COLUMN","TRUNCATE TABLE","CREATE [UNIQUE] [CLUSTERED] INDEX","CREATE DATABASE","ALTER DATABASE","DROP DATABASE [IF EXISTS]","CREATE [OR ALTER] [PARTITION] {FUNCTION | PROCEDURE | PROC}","ALTER [PARTITION] {FUNCTION | PROCEDURE | PROC}","DROP [PARTITION] {FUNCTION | PROCEDURE | PROC} [IF EXISTS]","GO","USE","ADD SENSITIVITY CLASSIFICATION","ADD SIGNATURE","AGGREGATE","ANSI_DEFAULTS","ANSI_NULLS","ANSI_NULL_DFLT_OFF","ANSI_NULL_DFLT_ON","ANSI_PADDING","ANSI_WARNINGS","APPLICATION ROLE","ARITHABORT","ARITHIGNORE","ASSEMBLY","ASYMMETRIC KEY","AUTHORIZATION","AVAILABILITY GROUP","BACKUP","BACKUP CERTIFICATE","BACKUP MASTER KEY","BACKUP SERVICE MASTER KEY","BEGIN CONVERSATION TIMER","BEGIN DIALOG CONVERSATION","BROKER PRIORITY","BULK INSERT","CERTIFICATE","CLOSE MASTER KEY","CLOSE SYMMETRIC KEY","COLUMN ENCRYPTION KEY","COLUMN MASTER KEY","COLUMNSTORE INDEX","CONCAT_NULL_YIELDS_NULL","CONTEXT_INFO","CONTRACT","CREDENTIAL","CRYPTOGRAPHIC PROVIDER","CURSOR_CLOSE_ON_COMMIT","DATABASE","DATABASE AUDIT SPECIFICATION","DATABASE ENCRYPTION KEY","DATABASE HADR","DATABASE SCOPED CONFIGURATION","DATABASE SCOPED CREDENTIAL","DATABASE SET","DATEFIRST","DATEFORMAT","DEADLOCK_PRIORITY","DENY","DENY XML","DISABLE TRIGGER","ENABLE TRIGGER","END CONVERSATION","ENDPOINT","EVENT NOTIFICATION","EVENT SESSION","EXECUTE AS","EXTERNAL DATA SOURCE","EXTERNAL FILE FORMAT","EXTERNAL LANGUAGE","EXTERNAL LIBRARY","EXTERNAL RESOURCE POOL","EXTERNAL TABLE","FIPS_FLAGGER","FMTONLY","FORCEPLAN","FULLTEXT CATALOG","FULLTEXT INDEX","FULLTEXT STOPLIST","GET CONVERSATION GROUP","GET_TRANSMISSION_STATUS","GRANT","GRANT XML","IDENTITY_INSERT","IMPLICIT_TRANSACTIONS","INDEX","LANGUAGE","LOCK_TIMEOUT","LOGIN","MASTER KEY","MESSAGE TYPE","MOVE CONVERSATION","NOCOUNT","NOEXEC","NUMERIC_ROUNDABORT","OFFSETS","OPEN MASTER KEY","OPEN SYMMETRIC KEY","PARSEONLY","PARTITION SCHEME","QUERY_GOVERNOR_COST_LIMIT","QUEUE","QUOTED_IDENTIFIER","RECEIVE","REMOTE SERVICE BINDING","REMOTE_PROC_TRANSACTIONS","RESOURCE GOVERNOR","RESOURCE POOL","RESTORE","RESTORE FILELISTONLY","RESTORE HEADERONLY","RESTORE LABELONLY","RESTORE MASTER KEY","RESTORE REWINDONLY","RESTORE SERVICE MASTER KEY","RESTORE VERIFYONLY","REVERT","REVOKE","REVOKE XML","ROLE","ROUTE","ROWCOUNT","RULE","SCHEMA","SEARCH PROPERTY LIST","SECURITY POLICY","SELECTIVE XML INDEX","SEND","SENSITIVITY CLASSIFICATION","SEQUENCE","SERVER AUDIT","SERVER AUDIT SPECIFICATION","SERVER CONFIGURATION","SERVER ROLE","SERVICE","SERVICE MASTER KEY","SETUSER","SHOWPLAN_ALL","SHOWPLAN_TEXT","SHOWPLAN_XML","SIGNATURE","SPATIAL INDEX","STATISTICS","STATISTICS IO","STATISTICS PROFILE","STATISTICS TIME","STATISTICS XML","SYMMETRIC KEY","SYNONYM","TABLE","TABLE IDENTITY","TEXTSIZE","TRANSACTION ISOLATION LEVEL","TRIGGER","TYPE","UPDATE STATISTICS","USER","WORKLOAD GROUP","XACT_ABORT","XML INDEX","XML SCHEMA COLLECTION"]),cwe=x(["UNION [ALL]","EXCEPT","INTERSECT"]),uwe=x(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","{CROSS | OUTER} APPLY"]),dwe=x(["ON {UPDATE | DELETE} [SET NULL | SET DEFAULT]","{ROWS | RANGE} BETWEEN"]),fwe=x([]),iR={name:"transactsql",tokenizerOptions:{reservedSelect:awe,reservedClauses:[...lwe,...Dz,...rb],reservedSetOperations:cwe,reservedJoins:uwe,reservedKeywordPhrases:dwe,reservedDataTypePhrases:fwe,reservedKeywords:bz,reservedDataTypes:wz,reservedFunctionNames:Cz,nestedBlockComments:!0,stringTypes:[{quote:"''-qq",prefixes:["N"]},"{}"],identTypes:['""-qq',"[]"],identChars:{first:"#@",rest:"#@$"},paramTypes:{named:["@"],quoted:["@"]},operators:["%","&","|","^","~","!<","!>","+=","-=","*=","/=","%=","|=","&=","^=","::",":"],propertyAccessOperators:[".."]},formatOptions:{alwaysDenseOperators:["::"],onelineClauses:[...Dz,...rb],tabularOnelineClauses:rb}}});var Pz,xz,Mz=H(()=>{Pz=["ADD","ALL","ALTER","ANALYZE","AND","AS","ASC","ASENSITIVE","BEFORE","BETWEEN","_BINARY","BOTH","BY","CALL","CASCADE","CASE","CHANGE","CHECK","COLLATE","COLUMN","CONDITION","CONSTRAINT","CONTINUE","CONVERT","CREATE","CROSS","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURSOR","DATABASE","DATABASES","DAY_HOUR","DAY_MICROSECOND","DAY_MINUTE","DAY_SECOND","DECLARE","DEFAULT","DELAYED","DELETE","DESC","DESCRIBE","DETERMINISTIC","DISTINCT","DISTINCTROW","DIV","DROP","DUAL","EACH","ELSE","ELSEIF","ENCLOSED","ESCAPED","EXCEPT","EXISTS","EXIT","EXPLAIN","EXTRA_JOIN","FALSE","FETCH","FOR","FORCE","FORCE_COMPILED_MODE","FORCE_INTERPRETER_MODE","FOREIGN","FROM","FULL","FULLTEXT","GRANT","GROUP","HAVING","HEARTBEAT_NO_LOGGING","HIGH_PRIORITY","HOUR_MICROSECOND","HOUR_MINUTE","HOUR_SECOND","IF","IGNORE","IN","INDEX","INFILE","INNER","INOUT","INSENSITIVE","INSERT","IN","_INTERNAL_DYNAMIC_TYPECAST","INTERSECT","INTERVAL","INTO","ITERATE","JOIN","KEY","KEYS","KILL","LEADING","LEAVE","LEFT","LIKE","LIMIT","LINES","LOAD","LOCALTIME","LOCALTIMESTAMP","LOCK","LOOP","LOW_PRIORITY","MATCH","MAXVALUE","MINUS","MINUTE_MICROSECOND","MINUTE_SECOND","MOD","MODIFIES","NATURAL","NO_QUERY_REWRITE","NOT","NO_WRITE_TO_BINLOG","NO_QUERY_REWRITE","NULL","ON","OPTIMIZE","OPTION","OPTIONALLY","OR","ORDER","OUT","OUTER","OUTFILE","OVER","PRIMARY","PROCEDURE","PURGE","RANGE","READ","READS","REFERENCES","REGEXP","RELEASE","RENAME","REPEAT","REPLACE","REQUIRE","RESTRICT","RETURN","REVOKE","RIGHT","RIGHT_ANTI_JOIN","RIGHT_SEMI_JOIN","RIGHT_STRAIGHT_JOIN","RLIKE","SCHEMA","SCHEMAS","SECOND_MICROSECOND","SELECT","SEMI_JOIN","SENSITIVE","SEPARATOR","SET","SHOW","SIGNAL","SPATIAL","SPECIFIC","SQL","SQL_BIG_RESULT","SQL_BUFFER_RESULT","SQL_CACHE","SQL_CALC_FOUND_ROWS","SQLEXCEPTION","SQL_NO_CACHE","SQL_NO_LOGGING","SQL_SMALL_RESULT","SQLSTATE","SQLWARNING","STRAIGHT_JOIN","TABLE","TERMINATED","THEN","TO","TRAILING","TRIGGER","TRUE","UNBOUNDED","UNDO","UNION","UNIQUE","UNLOCK","UPDATE","USAGE","USE","USING","UTC_DATE","UTC_TIME","UTC_TIMESTAMP","_UTF8","VALUES","WHEN","WHERE","WHILE","WINDOW","WITH","WITHIN","WRITE","XOR","YEAR_MONTH","ZEROFILL"],xz=["BIGINT","BINARY","BIT","BLOB","CHAR","CHARACTER","DATETIME","DEC","DECIMAL","DOUBLE PRECISION","DOUBLE","ENUM","FIXED","FLOAT","FLOAT4","FLOAT8","INT","INT1","INT2","INT3","INT4","INT8","INTEGER","LONG","LONGBLOB","LONGTEXT","MEDIUMBLOB","MEDIUMINT","MEDIUMTEXT","MIDDLEINT","NATIONAL CHAR","NATIONAL VARCHAR","NUMERIC","PRECISION","REAL","SMALLINT","TEXT","TIME","TIMESTAMP","TINYBLOB","TINYINT","TINYTEXT","UNSIGNED","VARBINARY","VARCHAR","VARCHARACTER","YEAR"]});var vz,Uz=H(()=>{vz=["ABS","ACOS","ADDDATE","ADDTIME","AES_DECRYPT","AES_ENCRYPT","ANY_VALUE","APPROX_COUNT_DISTINCT","APPROX_COUNT_DISTINCT_ACCUMULATE","APPROX_COUNT_DISTINCT_COMBINE","APPROX_COUNT_DISTINCT_ESTIMATE","APPROX_GEOGRAPHY_INTERSECTS","APPROX_PERCENTILE","ASCII","ASIN","ATAN","ATAN2","AVG","BIN","BINARY","BIT_AND","BIT_COUNT","BIT_OR","BIT_XOR","CAST","CEIL","CEILING","CHAR","CHARACTER_LENGTH","CHAR_LENGTH","CHARSET","COALESCE","COERCIBILITY","COLLATION","COLLECT","CONCAT","CONCAT_WS","CONNECTION_ID","CONV","CONVERT","CONVERT_TZ","COS","COT","COUNT","CUME_DIST","CURDATE","CURRENT_DATE","CURRENT_ROLE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURTIME","DATABASE","DATE","DATE_ADD","DATEDIFF","DATE_FORMAT","DATE_SUB","DATE_TRUNC","DAY","DAYNAME","DAYOFMONTH","DAYOFWEEK","DAYOFYEAR","DECODE","DEFAULT","DEGREES","DENSE_RANK","DIV","DOT_PRODUCT","ELT","EUCLIDEAN_DISTANCE","EXP","EXTRACT","FIELD","FIRST","FIRST_VALUE","FLOOR","FORMAT","FOUND_ROWS","FROM_BASE64","FROM_DAYS","FROM_UNIXTIME","GEOGRAPHY_AREA","GEOGRAPHY_CONTAINS","GEOGRAPHY_DISTANCE","GEOGRAPHY_INTERSECTS","GEOGRAPHY_LATITUDE","GEOGRAPHY_LENGTH","GEOGRAPHY_LONGITUDE","GEOGRAPHY_POINT","GEOGRAPHY_WITHIN_DISTANCE","GEOMETRY_AREA","GEOMETRY_CONTAINS","GEOMETRY_DISTANCE","GEOMETRY_FILTER","GEOMETRY_INTERSECTS","GEOMETRY_LENGTH","GEOMETRY_POINT","GEOMETRY_WITHIN_DISTANCE","GEOMETRY_X","GEOMETRY_Y","GREATEST","GROUPING","GROUP_CONCAT","HEX","HIGHLIGHT","HOUR","ICU_VERSION","IF","IFNULL","INET_ATON","INET_NTOA","INET6_ATON","INET6_NTOA","INITCAP","INSERT","INSTR","INTERVAL","IS","IS NULL","JSON_AGG","JSON_ARRAY_CONTAINS_DOUBLE","JSON_ARRAY_CONTAINS_JSON","JSON_ARRAY_CONTAINS_STRING","JSON_ARRAY_PUSH_DOUBLE","JSON_ARRAY_PUSH_JSON","JSON_ARRAY_PUSH_STRING","JSON_DELETE_KEY","JSON_EXTRACT_DOUBLE","JSON_EXTRACT_JSON","JSON_EXTRACT_STRING","JSON_EXTRACT_BIGINT","JSON_GET_TYPE","JSON_LENGTH","JSON_SET_DOUBLE","JSON_SET_JSON","JSON_SET_STRING","JSON_SPLICE_DOUBLE","JSON_SPLICE_JSON","JSON_SPLICE_STRING","LAG","LAST_DAY","LAST_VALUE","LCASE","LEAD","LEAST","LEFT","LENGTH","LIKE","LN","LOCALTIME","LOCALTIMESTAMP","LOCATE","LOG","LOG10","LOG2","LPAD","LTRIM","MATCH","MAX","MD5","MEDIAN","MICROSECOND","MIN","MINUTE","MOD","MONTH","MONTHNAME","MONTHS_BETWEEN","NOT","NOW","NTH_VALUE","NTILE","NULLIF","OCTET_LENGTH","PERCENT_RANK","PERCENTILE_CONT","PERCENTILE_DISC","PI","PIVOT","POSITION","POW","POWER","QUARTER","QUOTE","RADIANS","RAND","RANK","REGEXP","REPEAT","REPLACE","REVERSE","RIGHT","RLIKE","ROUND","ROW_COUNT","ROW_NUMBER","RPAD","RTRIM","SCALAR","SCHEMA","SEC_TO_TIME","SHA1","SHA2","SIGMOID","SIGN","SIN","SLEEP","SPLIT","SOUNDEX","SOUNDS LIKE","SOURCE_POS_WAIT","SPACE","SQRT","STDDEV","STDDEV_POP","STDDEV_SAMP","STR_TO_DATE","SUBDATE","SUBSTR","SUBSTRING","SUBSTRING_INDEX","SUM","SYS_GUID","TAN","TIME","TIMEDIFF","TIME_BUCKET","TIME_FORMAT","TIMESTAMP","TIMESTAMPADD","TIMESTAMPDIFF","TIME_TO_SEC","TO_BASE64","TO_CHAR","TO_DAYS","TO_JSON","TO_NUMBER","TO_SECONDS","TO_TIMESTAMP","TRIM","TRUNC","TRUNCATE","UCASE","UNHEX","UNIX_TIMESTAMP","UPDATEXML","UPPER","UTC_DATE","UTC_TIME","UTC_TIMESTAMP","UUID","VALUES","VARIANCE","VAR_POP","VAR_SAMP","VECTOR_SUB","VERSION","WEEK","WEEKDAY","WEEKOFYEAR","YEAR"]});var Ewe,hwe,Bz,ib,Twe,pwe,Swe,Rwe,sR,sb=H(()=>{xt();rf();Mz();Uz();Ewe=x(["SELECT [ALL | DISTINCT | DISTINCTROW]"]),hwe=x(["WITH","FROM","WHERE","GROUP BY","HAVING","PARTITION BY","ORDER BY","LIMIT","OFFSET","INSERT [IGNORE] [INTO]","VALUES","REPLACE [INTO]","ON DUPLICATE KEY UPDATE","SET","CREATE [OR REPLACE] [TEMPORARY] PROCEDURE [IF NOT EXISTS]","CREATE [OR REPLACE] [EXTERNAL] FUNCTION"]),Bz=x(["CREATE [ROWSTORE] [REFERENCE | TEMPORARY | GLOBAL TEMPORARY] TABLE [IF NOT EXISTS]"]),ib=x(["CREATE VIEW","UPDATE","DELETE [FROM]","DROP [TEMPORARY] TABLE [IF EXISTS]","ALTER [ONLINE] TABLE","ADD [COLUMN]","ADD [UNIQUE] {INDEX | KEY}","DROP [COLUMN]","MODIFY [COLUMN]","CHANGE","RENAME [TO | AS]","TRUNCATE [TABLE]","ADD AGGREGATOR","ADD LEAF","AGGREGATOR SET AS MASTER","ALTER DATABASE","ALTER PIPELINE","ALTER RESOURCE POOL","ALTER USER","ALTER VIEW","ANALYZE TABLE","ATTACH DATABASE","ATTACH LEAF","ATTACH LEAF ALL","BACKUP DATABASE","BINLOG","BOOTSTRAP AGGREGATOR","CACHE INDEX","CALL","CHANGE","CHANGE MASTER TO","CHANGE REPLICATION FILTER","CHANGE REPLICATION SOURCE TO","CHECK BLOB CHECKSUM","CHECK TABLE","CHECKSUM TABLE","CLEAR ORPHAN DATABASES","CLONE","COMMIT","CREATE DATABASE","CREATE GROUP","CREATE INDEX","CREATE LINK","CREATE MILESTONE","CREATE PIPELINE","CREATE RESOURCE POOL","CREATE ROLE","CREATE USER","DEALLOCATE PREPARE","DESCRIBE","DETACH DATABASE","DETACH PIPELINE","DROP DATABASE","DROP FUNCTION","DROP INDEX","DROP LINK","DROP PIPELINE","DROP PROCEDURE","DROP RESOURCE POOL","DROP ROLE","DROP USER","DROP VIEW","EXECUTE","EXPLAIN","FLUSH","FORCE","GRANT","HANDLER","HELP","KILL CONNECTION","KILLALL QUERIES","LOAD DATA","LOAD INDEX INTO CACHE","LOAD XML","LOCK INSTANCE FOR BACKUP","LOCK TABLES","MASTER_POS_WAIT","OPTIMIZE TABLE","PREPARE","PURGE BINARY LOGS","REBALANCE PARTITIONS","RELEASE SAVEPOINT","REMOVE AGGREGATOR","REMOVE LEAF","REPAIR TABLE","REPLACE","REPLICATE DATABASE","RESET","RESET MASTER","RESET PERSIST","RESET REPLICA","RESET SLAVE","RESTART","RESTORE DATABASE","RESTORE REDUNDANCY","REVOKE","ROLLBACK","ROLLBACK TO SAVEPOINT","SAVEPOINT","SET CHARACTER SET","SET DEFAULT ROLE","SET NAMES","SET PASSWORD","SET RESOURCE GROUP","SET ROLE","SET TRANSACTION","SHOW","SHOW CHARACTER SET","SHOW COLLATION","SHOW COLUMNS","SHOW CREATE DATABASE","SHOW CREATE FUNCTION","SHOW CREATE PIPELINE","SHOW CREATE PROCEDURE","SHOW CREATE TABLE","SHOW CREATE USER","SHOW CREATE VIEW","SHOW DATABASES","SHOW ENGINE","SHOW ENGINES","SHOW ERRORS","SHOW FUNCTION CODE","SHOW FUNCTION STATUS","SHOW GRANTS","SHOW INDEX","SHOW MASTER STATUS","SHOW OPEN TABLES","SHOW PLUGINS","SHOW PRIVILEGES","SHOW PROCEDURE CODE","SHOW PROCEDURE STATUS","SHOW PROCESSLIST","SHOW PROFILE","SHOW PROFILES","SHOW RELAYLOG EVENTS","SHOW REPLICA STATUS","SHOW REPLICAS","SHOW SLAVE","SHOW SLAVE HOSTS","SHOW STATUS","SHOW TABLE STATUS","SHOW TABLES","SHOW VARIABLES","SHOW WARNINGS","SHUTDOWN","SNAPSHOT DATABASE","SOURCE_POS_WAIT","START GROUP_REPLICATION","START PIPELINE","START REPLICA","START SLAVE","START TRANSACTION","STOP GROUP_REPLICATION","STOP PIPELINE","STOP REPLICA","STOP REPLICATING","STOP SLAVE","TEST PIPELINE","UNLOCK INSTANCE","UNLOCK TABLES","USE","XA","ITERATE","LEAVE","LOOP","REPEAT","RETURN","WHILE"]),Twe=x(["UNION [ALL | DISTINCT]","EXCEPT","INTERSECT","MINUS"]),pwe=x(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL {LEFT | RIGHT} [OUTER] JOIN","STRAIGHT_JOIN"]),Swe=x(["ON DELETE","ON UPDATE","CHARACTER SET","{ROWS | RANGE} BETWEEN","IDENTIFIED BY"]),Rwe=x([]),sR={name:"singlestoredb",tokenizerOptions:{reservedSelect:Ewe,reservedClauses:[...hwe,...Bz,...ib],reservedSetOperations:Twe,reservedJoins:pwe,reservedKeywordPhrases:Swe,reservedDataTypePhrases:Rwe,reservedKeywords:Pz,reservedDataTypes:xz,reservedFunctionNames:vz,stringTypes:['""-qq-bs',"''-qq-bs",{quote:"''-raw",prefixes:["B","X"],requirePrefix:!0}],identTypes:["``"],identChars:{first:"$",rest:"$",allowFirstCharNumber:!0},variableTypes:[{regex:"@@?[A-Za-z0-9_$]+"},{quote:"``",prefixes:["@"],requirePrefix:!0}],lineCommentTypes:["--","#"],operators:[":=","&","|","^","~","<<",">>","<=>","&&","||","::","::$","::%",":>","!:>","*.*"],postProcess:ro},formatOptions:{alwaysDenseOperators:["::","::$","::%"],onelineClauses:[...Bz,...ib],tabularOnelineClauses:ib}}});var Fz,Gz=H(()=>{Fz=["ABS","ACOS","ACOSH","ADD_MONTHS","ALL_USER_NAMES","ANY_VALUE","APPROX_COUNT_DISTINCT","APPROX_PERCENTILE","APPROX_PERCENTILE_ACCUMULATE","APPROX_PERCENTILE_COMBINE","APPROX_PERCENTILE_ESTIMATE","APPROX_TOP_K","APPROX_TOP_K_ACCUMULATE","APPROX_TOP_K_COMBINE","APPROX_TOP_K_ESTIMATE","APPROXIMATE_JACCARD_INDEX","APPROXIMATE_SIMILARITY","ARRAY_AGG","ARRAY_APPEND","ARRAY_CAT","ARRAY_COMPACT","ARRAY_CONSTRUCT","ARRAY_CONSTRUCT_COMPACT","ARRAY_CONTAINS","ARRAY_INSERT","ARRAY_INTERSECTION","ARRAY_POSITION","ARRAY_PREPEND","ARRAY_SIZE","ARRAY_SLICE","ARRAY_TO_STRING","ARRAY_UNION_AGG","ARRAY_UNIQUE_AGG","ARRAYS_OVERLAP","AS_ARRAY","AS_BINARY","AS_BOOLEAN","AS_CHAR","AS_VARCHAR","AS_DATE","AS_DECIMAL","AS_NUMBER","AS_DOUBLE","AS_REAL","AS_INTEGER","AS_OBJECT","AS_TIME","AS_TIMESTAMP_LTZ","AS_TIMESTAMP_NTZ","AS_TIMESTAMP_TZ","ASCII","ASIN","ASINH","ATAN","ATAN2","ATANH","AUTO_REFRESH_REGISTRATION_HISTORY","AUTOMATIC_CLUSTERING_HISTORY","AVG","BASE64_DECODE_BINARY","BASE64_DECODE_STRING","BASE64_ENCODE","BIT_LENGTH","BITAND","BITAND_AGG","BITMAP_BIT_POSITION","BITMAP_BUCKET_NUMBER","BITMAP_CONSTRUCT_AGG","BITMAP_COUNT","BITMAP_OR_AGG","BITNOT","BITOR","BITOR_AGG","BITSHIFTLEFT","BITSHIFTRIGHT","BITXOR","BITXOR_AGG","BOOLAND","BOOLAND_AGG","BOOLNOT","BOOLOR","BOOLOR_AGG","BOOLXOR","BOOLXOR_AGG","BUILD_SCOPED_FILE_URL","BUILD_STAGE_FILE_URL","CASE","CAST","CBRT","CEIL","CHARINDEX","CHECK_JSON","CHECK_XML","CHR","CHAR","COALESCE","COLLATE","COLLATION","COMPLETE_TASK_GRAPHS","COMPRESS","CONCAT","CONCAT_WS","CONDITIONAL_CHANGE_EVENT","CONDITIONAL_TRUE_EVENT","CONTAINS","CONVERT_TIMEZONE","COPY_HISTORY","CORR","COS","COSH","COT","COUNT","COUNT_IF","COVAR_POP","COVAR_SAMP","CUME_DIST","CURRENT_ACCOUNT","CURRENT_AVAILABLE_ROLES","CURRENT_CLIENT","CURRENT_DATABASE","CURRENT_DATE","CURRENT_IP_ADDRESS","CURRENT_REGION","CURRENT_ROLE","CURRENT_SCHEMA","CURRENT_SCHEMAS","CURRENT_SECONDARY_ROLES","CURRENT_SESSION","CURRENT_STATEMENT","CURRENT_TASK_GRAPHS","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_TRANSACTION","CURRENT_USER","CURRENT_VERSION","CURRENT_WAREHOUSE","DATA_TRANSFER_HISTORY","DATABASE_REFRESH_HISTORY","DATABASE_REFRESH_PROGRESS","DATABASE_REFRESH_PROGRESS_BY_JOB","DATABASE_STORAGE_USAGE_HISTORY","DATE_FROM_PARTS","DATE_PART","DATE_TRUNC","DATEADD","DATEDIFF","DAYNAME","DECODE","DECOMPRESS_BINARY","DECOMPRESS_STRING","DECRYPT","DECRYPT_RAW","DEGREES","DENSE_RANK","DIV0","EDITDISTANCE","ENCRYPT","ENCRYPT_RAW","ENDSWITH","EQUAL_NULL","EXP","EXPLAIN_JSON","EXTERNAL_FUNCTIONS_HISTORY","EXTERNAL_TABLE_FILES","EXTERNAL_TABLE_FILE_REGISTRATION_HISTORY","EXTRACT","EXTRACT_SEMANTIC_CATEGORIES","FACTORIAL","FILTER","FIRST_VALUE","FLATTEN","FLOOR","GENERATE_COLUMN_DESCRIPTION","GENERATOR","GET","GET_ABSOLUTE_PATH","GET_DDL","GET_IGNORE_CASE","GET_OBJECT_REFERENCES","GET_PATH","GET_PRESIGNED_URL","GET_RELATIVE_PATH","GET_STAGE_LOCATION","GETBIT","GREATEST","GREATEST_IGNORE_NULLS","GROUPING","GROUPING_ID","HASH","HASH_AGG","HAVERSINE","HEX_DECODE_BINARY","HEX_DECODE_STRING","HEX_ENCODE","HLL","HLL_ACCUMULATE","HLL_COMBINE","HLL_ESTIMATE","HLL_EXPORT","HLL_IMPORT","HOUR","MINUTE","SECOND","IDENTIFIER","IFF","IFNULL","ILIKE","ILIKE ANY","INFER_SCHEMA","INITCAP","INSERT","INVOKER_ROLE","INVOKER_SHARE","IS_ARRAY","IS_BINARY","IS_BOOLEAN","IS_CHAR","IS_VARCHAR","IS_DATE","IS_DATE_VALUE","IS_DECIMAL","IS_DOUBLE","IS_REAL","IS_GRANTED_TO_INVOKER_ROLE","IS_INTEGER","IS_NULL_VALUE","IS_OBJECT","IS_ROLE_IN_SESSION","IS_TIME","IS_TIMESTAMP_LTZ","IS_TIMESTAMP_NTZ","IS_TIMESTAMP_TZ","JAROWINKLER_SIMILARITY","JSON_EXTRACT_PATH_TEXT","KURTOSIS","LAG","LAST_DAY","LAST_QUERY_ID","LAST_TRANSACTION","LAST_VALUE","LEAD","LEAST","LEFT","LENGTH","LEN","LIKE","LIKE ALL","LIKE ANY","LISTAGG","LN","LOCALTIME","LOCALTIMESTAMP","LOG","LOGIN_HISTORY","LOGIN_HISTORY_BY_USER","LOWER","LPAD","LTRIM","MATERIALIZED_VIEW_REFRESH_HISTORY","MD5","MD5_HEX","MD5_BINARY","MD5_NUMBER \u2014 Obsoleted","MD5_NUMBER_LOWER64","MD5_NUMBER_UPPER64","MEDIAN","MIN","MAX","MINHASH","MINHASH_COMBINE","MOD","MODE","MONTHNAME","MONTHS_BETWEEN","NEXT_DAY","NORMAL","NTH_VALUE","NTILE","NULLIF","NULLIFZERO","NVL","NVL2","OBJECT_AGG","OBJECT_CONSTRUCT","OBJECT_CONSTRUCT_KEEP_NULL","OBJECT_DELETE","OBJECT_INSERT","OBJECT_KEYS","OBJECT_PICK","OCTET_LENGTH","PARSE_IP","PARSE_JSON","PARSE_URL","PARSE_XML","PERCENT_RANK","PERCENTILE_CONT","PERCENTILE_DISC","PI","PIPE_USAGE_HISTORY","POLICY_CONTEXT","POLICY_REFERENCES","POSITION","POW","POWER","PREVIOUS_DAY","QUERY_ACCELERATION_HISTORY","QUERY_HISTORY","QUERY_HISTORY_BY_SESSION","QUERY_HISTORY_BY_USER","QUERY_HISTORY_BY_WAREHOUSE","RADIANS","RANDOM","RANDSTR","RANK","RATIO_TO_REPORT","REGEXP","REGEXP_COUNT","REGEXP_INSTR","REGEXP_LIKE","REGEXP_REPLACE","REGEXP_SUBSTR","REGEXP_SUBSTR_ALL","REGR_AVGX","REGR_AVGY","REGR_COUNT","REGR_INTERCEPT","REGR_R2","REGR_SLOPE","REGR_SXX","REGR_SXY","REGR_SYY","REGR_VALX","REGR_VALY","REPEAT","REPLACE","REPLICATION_GROUP_REFRESH_HISTORY","REPLICATION_GROUP_REFRESH_PROGRESS","REPLICATION_GROUP_REFRESH_PROGRESS_BY_JOB","REPLICATION_GROUP_USAGE_HISTORY","REPLICATION_USAGE_HISTORY","REST_EVENT_HISTORY","RESULT_SCAN","REVERSE","RIGHT","RLIKE","ROUND","ROW_NUMBER","RPAD","RTRIM","RTRIMMED_LENGTH","SEARCH_OPTIMIZATION_HISTORY","SEQ1","SEQ2","SEQ4","SEQ8","SERVERLESS_TASK_HISTORY","SHA1","SHA1_HEX","SHA1_BINARY","SHA2","SHA2_HEX","SHA2_BINARY","SIGN","SIN","SINH","SKEW","SOUNDEX","SPACE","SPLIT","SPLIT_PART","SPLIT_TO_TABLE","SQRT","SQUARE","ST_AREA","ST_ASEWKB","ST_ASEWKT","ST_ASGEOJSON","ST_ASWKB","ST_ASBINARY","ST_ASWKT","ST_ASTEXT","ST_AZIMUTH","ST_CENTROID","ST_COLLECT","ST_CONTAINS","ST_COVEREDBY","ST_COVERS","ST_DIFFERENCE","ST_DIMENSION","ST_DISJOINT","ST_DISTANCE","ST_DWITHIN","ST_ENDPOINT","ST_ENVELOPE","ST_GEOGFROMGEOHASH","ST_GEOGPOINTFROMGEOHASH","ST_GEOGRAPHYFROMWKB","ST_GEOGRAPHYFROMWKT","ST_GEOHASH","ST_GEOMETRYFROMWKB","ST_GEOMETRYFROMWKT","ST_HAUSDORFFDISTANCE","ST_INTERSECTION","ST_INTERSECTS","ST_LENGTH","ST_MAKEGEOMPOINT","ST_GEOM_POINT","ST_MAKELINE","ST_MAKEPOINT","ST_POINT","ST_MAKEPOLYGON","ST_POLYGON","ST_NPOINTS","ST_NUMPOINTS","ST_PERIMETER","ST_POINTN","ST_SETSRID","ST_SIMPLIFY","ST_SRID","ST_STARTPOINT","ST_SYMDIFFERENCE","ST_UNION","ST_WITHIN","ST_X","ST_XMAX","ST_XMIN","ST_Y","ST_YMAX","ST_YMIN","STAGE_DIRECTORY_FILE_REGISTRATION_HISTORY","STAGE_STORAGE_USAGE_HISTORY","STARTSWITH","STDDEV","STDDEV_POP","STDDEV_SAMP","STRIP_NULL_VALUE","STRTOK","STRTOK_SPLIT_TO_TABLE","STRTOK_TO_ARRAY","SUBSTR","SUBSTRING","SUM","SYSDATE","SYSTEM$ABORT_SESSION","SYSTEM$ABORT_TRANSACTION","SYSTEM$AUTHORIZE_PRIVATELINK","SYSTEM$AUTHORIZE_STAGE_PRIVATELINK_ACCESS","SYSTEM$BEHAVIOR_CHANGE_BUNDLE_STATUS","SYSTEM$CANCEL_ALL_QUERIES","SYSTEM$CANCEL_QUERY","SYSTEM$CLUSTERING_DEPTH","SYSTEM$CLUSTERING_INFORMATION","SYSTEM$CLUSTERING_RATIO ","SYSTEM$CURRENT_USER_TASK_NAME","SYSTEM$DATABASE_REFRESH_HISTORY ","SYSTEM$DATABASE_REFRESH_PROGRESS","SYSTEM$DATABASE_REFRESH_PROGRESS_BY_JOB ","SYSTEM$DISABLE_BEHAVIOR_CHANGE_BUNDLE","SYSTEM$DISABLE_DATABASE_REPLICATION","SYSTEM$ENABLE_BEHAVIOR_CHANGE_BUNDLE","SYSTEM$ESTIMATE_QUERY_ACCELERATION","SYSTEM$ESTIMATE_SEARCH_OPTIMIZATION_COSTS","SYSTEM$EXPLAIN_JSON_TO_TEXT","SYSTEM$EXPLAIN_PLAN_JSON","SYSTEM$EXTERNAL_TABLE_PIPE_STATUS","SYSTEM$GENERATE_SAML_CSR","SYSTEM$GENERATE_SCIM_ACCESS_TOKEN","SYSTEM$GET_AWS_SNS_IAM_POLICY","SYSTEM$GET_PREDECESSOR_RETURN_VALUE","SYSTEM$GET_PRIVATELINK","SYSTEM$GET_PRIVATELINK_AUTHORIZED_ENDPOINTS","SYSTEM$GET_PRIVATELINK_CONFIG","SYSTEM$GET_SNOWFLAKE_PLATFORM_INFO","SYSTEM$GET_TAG","SYSTEM$GET_TAG_ALLOWED_VALUES","SYSTEM$GET_TAG_ON_CURRENT_COLUMN","SYSTEM$GET_TAG_ON_CURRENT_TABLE","SYSTEM$GLOBAL_ACCOUNT_SET_PARAMETER","SYSTEM$LAST_CHANGE_COMMIT_TIME","SYSTEM$LINK_ACCOUNT_OBJECTS_BY_NAME","SYSTEM$MIGRATE_SAML_IDP_REGISTRATION","SYSTEM$PIPE_FORCE_RESUME","SYSTEM$PIPE_STATUS","SYSTEM$REVOKE_PRIVATELINK","SYSTEM$REVOKE_STAGE_PRIVATELINK_ACCESS","SYSTEM$SET_RETURN_VALUE","SYSTEM$SHOW_OAUTH_CLIENT_SECRETS","SYSTEM$STREAM_GET_TABLE_TIMESTAMP","SYSTEM$STREAM_HAS_DATA","SYSTEM$TASK_DEPENDENTS_ENABLE","SYSTEM$TYPEOF","SYSTEM$USER_TASK_CANCEL_ONGOING_EXECUTIONS","SYSTEM$VERIFY_EXTERNAL_OAUTH_TOKEN","SYSTEM$WAIT","SYSTEM$WHITELIST","SYSTEM$WHITELIST_PRIVATELINK","TAG_REFERENCES","TAG_REFERENCES_ALL_COLUMNS","TAG_REFERENCES_WITH_LINEAGE","TAN","TANH","TASK_DEPENDENTS","TASK_HISTORY","TIME_FROM_PARTS","TIME_SLICE","TIMEADD","TIMEDIFF","TIMESTAMP_FROM_PARTS","TIMESTAMPADD","TIMESTAMPDIFF","TO_ARRAY","TO_BINARY","TO_BOOLEAN","TO_CHAR","TO_VARCHAR","TO_DATE","DATE","TO_DECIMAL","TO_NUMBER","TO_NUMERIC","TO_DOUBLE","TO_GEOGRAPHY","TO_GEOMETRY","TO_JSON","TO_OBJECT","TO_TIME","TIME","TO_TIMESTAMP","TO_TIMESTAMP_LTZ","TO_TIMESTAMP_NTZ","TO_TIMESTAMP_TZ","TO_VARIANT","TO_XML","TRANSLATE","TRIM","TRUNCATE","TRUNC","TRUNC","TRY_BASE64_DECODE_BINARY","TRY_BASE64_DECODE_STRING","TRY_CAST","TRY_HEX_DECODE_BINARY","TRY_HEX_DECODE_STRING","TRY_PARSE_JSON","TRY_TO_BINARY","TRY_TO_BOOLEAN","TRY_TO_DATE","TRY_TO_DECIMAL","TRY_TO_NUMBER","TRY_TO_NUMERIC","TRY_TO_DOUBLE","TRY_TO_GEOGRAPHY","TRY_TO_GEOMETRY","TRY_TO_TIME","TRY_TO_TIMESTAMP","TRY_TO_TIMESTAMP_LTZ","TRY_TO_TIMESTAMP_NTZ","TRY_TO_TIMESTAMP_TZ","TYPEOF","UNICODE","UNIFORM","UPPER","UUID_STRING","VALIDATE","VALIDATE_PIPE_LOAD","VAR_POP","VAR_SAMP","VARIANCE","VARIANCE_SAMP","VARIANCE_POP","WAREHOUSE_LOAD_HISTORY","WAREHOUSE_METERING_HISTORY","WIDTH_BUCKET","XMLGET","YEAR","YEAROFWEEK","YEAROFWEEKISO","DAY","DAYOFMONTH","DAYOFWEEK","DAYOFWEEKISO","DAYOFYEAR","WEEK","WEEK","WEEKOFYEAR","WEEKISO","MONTH","QUARTER","ZEROIFNULL","ZIPF"]});var Hz,Wz,kz=H(()=>{Hz=["ACCOUNT","ALL","ALTER","AND","ANY","AS","BETWEEN","BY","CASE","CAST","CHECK","COLUMN","CONNECT","CONNECTION","CONSTRAINT","CREATE","CROSS","CURRENT","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","DATABASE","DELETE","DISTINCT","DROP","ELSE","EXISTS","FALSE","FOLLOWING","FOR","FROM","FULL","GRANT","GROUP","GSCLUSTER","HAVING","ILIKE","IN","INCREMENT","INNER","INSERT","INTERSECT","INTO","IS","ISSUE","JOIN","LATERAL","LEFT","LIKE","LOCALTIME","LOCALTIMESTAMP","MINUS","NATURAL","NOT","NULL","OF","ON","OR","ORDER","ORGANIZATION","QUALIFY","REGEXP","REVOKE","RIGHT","RLIKE","ROW","ROWS","SAMPLE","SCHEMA","SELECT","SET","SOME","START","TABLE","TABLESAMPLE","THEN","TO","TRIGGER","TRUE","TRY_CAST","UNION","UNIQUE","UPDATE","USING","VALUES","VIEW","WHEN","WHENEVER","WHERE","WITH","COMMENT"],Wz=["NUMBER","DECIMAL","NUMERIC","INT","INTEGER","BIGINT","SMALLINT","TINYINT","BYTEINT","FLOAT","FLOAT4","FLOAT8","DOUBLE","DOUBLE PRECISION","REAL","VARCHAR","CHAR","CHARACTER","STRING","TEXT","BINARY","VARBINARY","BOOLEAN","DATE","DATETIME","TIME","TIMESTAMP","TIMESTAMP_LTZ","TIMESTAMP_NTZ","TIMESTAMP","TIMESTAMP_TZ","VARIANT","OBJECT","ARRAY","GEOGRAPHY","GEOMETRY"]});var Awe,mwe,$z,ob,_we,Iwe,gwe,Nwe,oR,ab=H(()=>{xt();Gz();kz();Awe=x(["SELECT [ALL | DISTINCT]"]),mwe=x(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY","HAVING","PARTITION BY","ORDER BY","QUALIFY","LIMIT","OFFSET","FETCH [FIRST | NEXT]","INSERT [OVERWRITE] [ALL INTO | INTO | ALL | FIRST]","{THEN | ELSE} INTO","VALUES","SET","CLUSTER BY","[WITH] {MASKING POLICY | TAG | ROW ACCESS POLICY}","COPY GRANTS","USING TEMPLATE","MERGE INTO","WHEN MATCHED [AND]","THEN {UPDATE SET | DELETE}","WHEN NOT MATCHED THEN INSERT"]),$z=x(["CREATE [OR REPLACE] [VOLATILE] TABLE [IF NOT EXISTS]","CREATE [OR REPLACE] [LOCAL | GLOBAL] {TEMP|TEMPORARY} TABLE [IF NOT EXISTS]"]),ob=x(["CREATE [OR REPLACE] [SECURE] [RECURSIVE] VIEW [IF NOT EXISTS]","UPDATE","DELETE FROM","DROP TABLE [IF EXISTS]","ALTER TABLE [IF EXISTS]","RENAME TO","SWAP WITH","[SUSPEND | RESUME] RECLUSTER","DROP CLUSTERING KEY","ADD [COLUMN]","RENAME COLUMN","{ALTER | MODIFY} [COLUMN]","DROP [COLUMN]","{ADD | ALTER | MODIFY | DROP} [CONSTRAINT]","RENAME CONSTRAINT","{ADD | DROP} SEARCH OPTIMIZATION","{SET | UNSET} TAG","{ADD | DROP} ROW ACCESS POLICY","DROP ALL ROW ACCESS POLICIES","{SET | DROP} DEFAULT","{SET | DROP} NOT NULL","SET DATA TYPE","UNSET COMMENT","{SET | UNSET} MASKING POLICY","TRUNCATE [TABLE] [IF EXISTS]","ALTER ACCOUNT","ALTER API INTEGRATION","ALTER CONNECTION","ALTER DATABASE","ALTER EXTERNAL TABLE","ALTER FAILOVER GROUP","ALTER FILE FORMAT","ALTER FUNCTION","ALTER INTEGRATION","ALTER MASKING POLICY","ALTER MATERIALIZED VIEW","ALTER NETWORK POLICY","ALTER NOTIFICATION INTEGRATION","ALTER PIPE","ALTER PROCEDURE","ALTER REPLICATION GROUP","ALTER RESOURCE MONITOR","ALTER ROLE","ALTER ROW ACCESS POLICY","ALTER SCHEMA","ALTER SECURITY INTEGRATION","ALTER SEQUENCE","ALTER SESSION","ALTER SESSION POLICY","ALTER SHARE","ALTER STAGE","ALTER STORAGE INTEGRATION","ALTER STREAM","ALTER TAG","ALTER TASK","ALTER USER","ALTER VIEW","ALTER WAREHOUSE","BEGIN","CALL","COMMIT","COPY INTO","CREATE ACCOUNT","CREATE API INTEGRATION","CREATE CONNECTION","CREATE DATABASE","CREATE EXTERNAL FUNCTION","CREATE EXTERNAL TABLE","CREATE FAILOVER GROUP","CREATE FILE FORMAT","CREATE FUNCTION","CREATE INTEGRATION","CREATE MANAGED ACCOUNT","CREATE MASKING POLICY","CREATE MATERIALIZED VIEW","CREATE NETWORK POLICY","CREATE NOTIFICATION INTEGRATION","CREATE PIPE","CREATE PROCEDURE","CREATE REPLICATION GROUP","CREATE RESOURCE MONITOR","CREATE ROLE","CREATE ROW ACCESS POLICY","CREATE SCHEMA","CREATE SECURITY INTEGRATION","CREATE SEQUENCE","CREATE SESSION POLICY","CREATE SHARE","CREATE STAGE","CREATE STORAGE INTEGRATION","CREATE STREAM","CREATE TAG","CREATE TASK","CREATE USER","CREATE WAREHOUSE","DELETE","DESCRIBE DATABASE","DESCRIBE EXTERNAL TABLE","DESCRIBE FILE FORMAT","DESCRIBE FUNCTION","DESCRIBE INTEGRATION","DESCRIBE MASKING POLICY","DESCRIBE MATERIALIZED VIEW","DESCRIBE NETWORK POLICY","DESCRIBE PIPE","DESCRIBE PROCEDURE","DESCRIBE RESULT","DESCRIBE ROW ACCESS POLICY","DESCRIBE SCHEMA","DESCRIBE SEQUENCE","DESCRIBE SESSION POLICY","DESCRIBE SHARE","DESCRIBE STAGE","DESCRIBE STREAM","DESCRIBE TABLE","DESCRIBE TASK","DESCRIBE TRANSACTION","DESCRIBE USER","DESCRIBE VIEW","DESCRIBE WAREHOUSE","DROP CONNECTION","DROP DATABASE","DROP EXTERNAL TABLE","DROP FAILOVER GROUP","DROP FILE FORMAT","DROP FUNCTION","DROP INTEGRATION","DROP MANAGED ACCOUNT","DROP MASKING POLICY","DROP MATERIALIZED VIEW","DROP NETWORK POLICY","DROP PIPE","DROP PROCEDURE","DROP REPLICATION GROUP","DROP RESOURCE MONITOR","DROP ROLE","DROP ROW ACCESS POLICY","DROP SCHEMA","DROP SEQUENCE","DROP SESSION POLICY","DROP SHARE","DROP STAGE","DROP STREAM","DROP TAG","DROP TASK","DROP USER","DROP VIEW","DROP WAREHOUSE","EXECUTE IMMEDIATE","EXECUTE TASK","EXPLAIN","GET","GRANT OWNERSHIP","GRANT ROLE","INSERT","LIST","MERGE","PUT","REMOVE","REVOKE ROLE","ROLLBACK","SHOW COLUMNS","SHOW CONNECTIONS","SHOW DATABASES","SHOW DATABASES IN FAILOVER GROUP","SHOW DATABASES IN REPLICATION GROUP","SHOW DELEGATED AUTHORIZATIONS","SHOW EXTERNAL FUNCTIONS","SHOW EXTERNAL TABLES","SHOW FAILOVER GROUPS","SHOW FILE FORMATS","SHOW FUNCTIONS","SHOW GLOBAL ACCOUNTS","SHOW GRANTS","SHOW INTEGRATIONS","SHOW LOCKS","SHOW MANAGED ACCOUNTS","SHOW MASKING POLICIES","SHOW MATERIALIZED VIEWS","SHOW NETWORK POLICIES","SHOW OBJECTS","SHOW ORGANIZATION ACCOUNTS","SHOW PARAMETERS","SHOW PIPES","SHOW PRIMARY KEYS","SHOW PROCEDURES","SHOW REGIONS","SHOW REPLICATION ACCOUNTS","SHOW REPLICATION DATABASES","SHOW REPLICATION GROUPS","SHOW RESOURCE MONITORS","SHOW ROLES","SHOW ROW ACCESS POLICIES","SHOW SCHEMAS","SHOW SEQUENCES","SHOW SESSION POLICIES","SHOW SHARES","SHOW SHARES IN FAILOVER GROUP","SHOW SHARES IN REPLICATION GROUP","SHOW STAGES","SHOW STREAMS","SHOW TABLES","SHOW TAGS","SHOW TASKS","SHOW TRANSACTIONS","SHOW USER FUNCTIONS","SHOW USERS","SHOW VARIABLES","SHOW VIEWS","SHOW WAREHOUSES","TRUNCATE MATERIALIZED VIEW","UNDROP DATABASE","UNDROP SCHEMA","UNDROP TABLE","UNDROP TAG","UNSET","USE DATABASE","USE ROLE","USE SCHEMA","USE SECONDARY ROLES","USE WAREHOUSE"]),_we=x(["UNION [ALL]","MINUS","EXCEPT","INTERSECT"]),Iwe=x(["[INNER] JOIN","[NATURAL] {LEFT | RIGHT | FULL} [OUTER] JOIN","{CROSS | NATURAL} JOIN"]),gwe=x(["{ROWS | RANGE} BETWEEN","ON {UPDATE | DELETE} [SET NULL | SET DEFAULT]"]),Nwe=x([]),oR={name:"snowflake",tokenizerOptions:{reservedSelect:Awe,reservedClauses:[...mwe,...$z,...ob],reservedSetOperations:_we,reservedJoins:Iwe,reservedKeywordPhrases:gwe,reservedDataTypePhrases:Nwe,reservedKeywords:Hz,reservedDataTypes:Wz,reservedFunctionNames:Fz,stringTypes:["$$","''-qq-bs"],identTypes:['""-qq'],variableTypes:[{regex:"[$][1-9]\\d*"},{regex:"[$][_a-zA-Z][_a-zA-Z0-9$]*"}],extraParens:["[]"],identChars:{rest:"$"},lineCommentTypes:["--","//"],operators:["%","::","||","=>",":=","->"],propertyAccessOperators:[":"]},formatOptions:{alwaysDenseOperators:["::"],onelineClauses:[...$z,...ob],tabularOnelineClauses:ob}}});var lb={};_t(lb,{bigquery:()=>kS,db2:()=>$S,db2i:()=>YS,duckdb:()=>VS,hive:()=>qS,mariadb:()=>XS,mysql:()=>jS,n1ql:()=>KS,plsql:()=>JS,postgresql:()=>QS,redshift:()=>ZS,singlestoredb:()=>sR,snowflake:()=>oR,spark:()=>eR,sql:()=>rR,sqlite:()=>tR,tidb:()=>zS,transactsql:()=>iR,trino:()=>nR});var Yz=H(()=>{Cy();by();Ly();Py();My();Uy();Fy();Hy();Wy();$y();Vy();Xy();zy();Jy();Zy();tb();nb();sb();ab()});var no,cb,Oc,aR,Cc=H(()=>{no=t=>t[t.length-1],cb=t=>t.sort((e,r)=>r.length-e.length||e.localeCompare(r)),Oc=t=>t.replace(/\s+/gu," "),aR=t=>/\n/.test(t)});var on,ub,Es,Owe,Vz,qz,lR=H(()=>{on=t=>t.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&"),ub=/\s+/uy,Es=t=>new RegExp(`(?:${t})`,"uy"),Owe=t=>t.split("").map(e=>/ /gu.test(e)?"\\s+":`[${e.toUpperCase()}${e.toLowerCase()}]`).join(""),Vz=t=>t+"(?:-"+t+")*",qz=({prefixes:t,requirePrefix:e})=>`(?:${t.map(Owe).join("|")}${e?"":"|"})`});var jz,db,fb,Cwe,bi,cR,ywe,Xz,zz,Kz,Eb,hb,Jz,Tb,Qz=H(()=>{Cc();lR();jz=t=>new RegExp(`(?:${t.map(on).join("|")}).*?(?=\r
|\r|
|$)`,"uy"),db=(t,e=[])=>{let r=t==="open"?0:1,n=["()",...e].map(i=>i[r]);return Es(n.map(on).join("|"))},fb=t=>Es(`${cb(t).map(on).join("|")}`),Cwe=({rest:t,dashes:e})=>t||e?`(?![${t||""}${e?"-":""}])`:"",bi=(t,e={})=>{if(t.length===0)return/^\b$/u;let r=Cwe(e),n=cb(t).map(on).join("|").replace(/ /gu,"\\s+");return new RegExp(`(?:${n})${r}\\b`,"iuy")},cR=(t,e)=>{if(!t.length)return;let r=t.map(on).join("|");return Es(`(?:${r})(?:${e})`)},ywe=()=>{let t={"<":">","[":"]","(":")","{":"}"},e="{left}(?:(?!{right}').)*?{right}",r=Object.entries(t).map(([o,a])=>e.replace(/{left}/g,on(o)).replace(/{right}/g,on(a))),n=on(Object.keys(t).join(""));return`[Qq]'(?:${String.raw`(?<tag>[^\s${n}])(?:(?!\k<tag>').)*?\k<tag>`}|${r.join("|")})'`},Xz={"``":"(?:`[^`]*`)+","[]":String.raw`(?:\[[^\]]*\])(?:\][^\]]*\])*`,'""-qq':String.raw`(?:"[^"]*")+`,'""-bs':String.raw`(?:"[^"\\]*(?:\\.[^"\\]*)*")`,'""-qq-bs':String.raw`(?:"[^"\\]*(?:\\.[^"\\]*)*")+`,'""-raw':String.raw`(?:"[^"]*")`,"''-qq":String.raw`(?:'[^']*')+`,"''-bs":String.raw`(?:'[^'\\]*(?:\\.[^'\\]*)*')`,"''-qq-bs":String.raw`(?:'[^'\\]*(?:\\.[^'\\]*)*')+`,"''-raw":String.raw`(?:'[^']*')`,$$:String.raw`(?<tag>\$\w*\$)[\s\S]*?\k<tag>`,"'''..'''":String.raw`'''[^\\]*?(?:\\.[^\\]*?)*?'''`,'""".."""':String.raw`"""[^\\]*?(?:\\.[^\\]*?)*?"""`,"{}":String.raw`(?:\{[^\}]*\})`,"q''":ywe()},zz=t=>typeof t=="string"?Xz[t]:"regex"in t?t.regex:qz(t)+Xz[t.quote],Kz=t=>Es(t.map(e=>"regex"in e?e.regex:zz(e)).join("|")),Eb=t=>t.map(zz).join("|"),hb=t=>Es(Eb(t)),Jz=(t={})=>Es(Tb(t)),Tb=({first:t,rest:e,dashes:r,allowFirstCharNumber:n}={})=>{let i="\\p{Alphabetic}\\p{Mark}_",s="\\p{Decimal_Number}",o=on(t??""),a=on(e??""),l=n?`[${i}${s}${o}][${i}${s}${a}]*`:`[${i}${o}][${i}${s}${a}]*`;return r?Vz(l):l}});function uR(t,e){let r=t.slice(0,e).split(/\n/);return{line:r.length,col:r[r.length-1].length+1}}var pb=H(()=>{});var nf,Zz=H(()=>{pb();lR();nf=class{constructor(e,r){this.rules=e,this.dialectName=r,this.input="",this.index=0}tokenize(e){this.input=e,this.index=0;let r=[],n;for(;this.index<this.input.length;){let i=this.getWhitespace();if(this.index<this.input.length){if(n=this.getNextToken(),!n)throw this.createParseError();r.push(Object.assign(Object.assign({},n),{precedingWhitespace:i}))}}return r}createParseError(){let e=this.input.slice(this.index,this.index+10),{line:r,col:n}=uR(this.input,this.index);return new Error(`Parse error: Unexpected "${e}" at line ${r} column ${n}.
${this.dialectInfo()}`)}dialectInfo(){return this.dialectName==="sql"?`This likely happens because you're using the default "sql" dialect.
If possible, please select a more specific dialect (like sqlite, postgresql, etc).`:`SQL dialect used: "${this.dialectName}".`}getWhitespace(){ub.lastIndex=this.index;let e=ub.exec(this.input);if(e)return this.index+=e[0].length,e[0]}getNextToken(){for(let e of this.rules){let r=this.match(e);if(r)return r}}match(e){e.regex.lastIndex=this.index;let r=e.regex.exec(this.input);if(r){let n=r[0],i={type:e.type,raw:n,text:e.text?e.text(n):n,start:this.index};return e.key&&(i.key=e.key(n)),this.index+=n.length,i}}}});var eK,wwe,Lwe,dR,tK=H(()=>{eK=/\/\*/uy,wwe=/[\s\S]/uy,Lwe=/\*\//uy,dR=class{constructor(){this.lastIndex=0}exec(e){let r="",n,i=0;if(n=this.matchSection(eK,e))r+=n,i++;else return null;for(;i>0;)if(n=this.matchSection(eK,e))r+=n,i++;else if(n=this.matchSection(Lwe,e))r+=n,i--;else if(n=this.matchSection(wwe,e))r+=n;else return null;return[r]}matchSection(e,r){e.lastIndex=this.lastIndex;let n=e.exec(r);return n&&(this.lastIndex+=n[0].length),n?n[0]:null}}});var sf,Xt,rK=H(()=>{gn();Qz();Zz();lR();Cc();tK();sf=class{constructor(e,r){this.cfg=e,this.dialectName=r,this.rulesBeforeParams=this.buildRulesBeforeParams(e),this.rulesAfterParams=this.buildRulesAfterParams(e)}tokenize(e,r){let n=[...this.rulesBeforeParams,...this.buildParamRules(this.cfg,r),...this.rulesAfterParams],i=new nf(n,this.dialectName).tokenize(e);return this.cfg.postProcess?this.cfg.postProcess(i):i}buildRulesBeforeParams(e){var r,n,i;return this.validRules([{type:$.DISABLE_COMMENT,regex:/(\/\* *sql-formatter-disable *\*\/[\s\S]*?(?:\/\* *sql-formatter-enable *\*\/|$))/uy},{type:$.BLOCK_COMMENT,regex:e.nestedBlockComments?new dR:/(\/\*[^]*?\*\/)/uy},{type:$.LINE_COMMENT,regex:jz((r=e.lineCommentTypes)!==null&&r!==void 0?r:["--"])},{type:$.QUOTED_IDENTIFIER,regex:hb(e.identTypes)},{type:$.NUMBER,regex:e.underscoresInNumbers?/(?:0x[0-9a-fA-F_]+|0b[01_]+|(?:-\s*)?(?:[0-9_]*\.[0-9_]+|[0-9_]+(?:\.[0-9_]*)?)(?:[eE][-+]?[0-9_]+(?:\.[0-9_]+)?)?)(?![\w\p{Alphabetic}])/uy:/(?:0x[0-9a-fA-F]+|0b[01]+|(?:-\s*)?(?:[0-9]*\.[0-9]+|[0-9]+(?:\.[0-9]*)?)(?:[eE][-+]?[0-9]+(?:\.[0-9]+)?)?)(?![\w\p{Alphabetic}])/uy},{type:$.RESERVED_KEYWORD_PHRASE,regex:bi((n=e.reservedKeywordPhrases)!==null&&n!==void 0?n:[],e.identChars),text:Xt},{type:$.RESERVED_DATA_TYPE_PHRASE,regex:bi((i=e.reservedDataTypePhrases)!==null&&i!==void 0?i:[],e.identChars),text:Xt},{type:$.CASE,regex:/CASE\b/iuy,text:Xt},{type:$.END,regex:/END\b/iuy,text:Xt},{type:$.BETWEEN,regex:/BETWEEN\b/iuy,text:Xt},{type:$.LIMIT,regex:e.reservedClauses.includes("LIMIT")?/LIMIT\b/iuy:void 0,text:Xt},{type:$.RESERVED_CLAUSE,regex:bi(e.reservedClauses,e.identChars),text:Xt},{type:$.RESERVED_SELECT,regex:bi(e.reservedSelect,e.identChars),text:Xt},{type:$.RESERVED_SET_OPERATION,regex:bi(e.reservedSetOperations,e.identChars),text:Xt},{type:$.WHEN,regex:/WHEN\b/iuy,text:Xt},{type:$.ELSE,regex:/ELSE\b/iuy,text:Xt},{type:$.THEN,regex:/THEN\b/iuy,text:Xt},{type:$.RESERVED_JOIN,regex:bi(e.reservedJoins,e.identChars),text:Xt},{type:$.AND,regex:/AND\b/iuy,text:Xt},{type:$.OR,regex:/OR\b/iuy,text:Xt},{type:$.XOR,regex:e.supportsXor?/XOR\b/iuy:void 0,text:Xt},...e.operatorKeyword?[{type:$.OPERATOR,regex:/OPERATOR *\([^)]+\)/iuy}]:[],{type:$.RESERVED_FUNCTION_NAME,regex:bi(e.reservedFunctionNames,e.identChars),text:Xt},{type:$.RESERVED_DATA_TYPE,regex:bi(e.reservedDataTypes,e.identChars),text:Xt},{type:$.RESERVED_KEYWORD,regex:bi(e.reservedKeywords,e.identChars),text:Xt}])}buildRulesAfterParams(e){var r,n;return this.validRules([{type:$.VARIABLE,regex:e.variableTypes?Kz(e.variableTypes):void 0},{type:$.STRING,regex:hb(e.stringTypes)},{type:$.IDENTIFIER,regex:Jz(e.identChars)},{type:$.DELIMITER,regex:/[;]/uy},{type:$.COMMA,regex:/[,]/y},{type:$.OPEN_PAREN,regex:db("open",e.extraParens)},{type:$.CLOSE_PAREN,regex:db("close",e.extraParens)},{type:$.OPERATOR,regex:fb(["+","-","/",">","<","=","<>","<=",">=","!=",...(r=e.operators)!==null&&r!==void 0?r:[]])},{type:$.ASTERISK,regex:/[*]/uy},{type:$.PROPERTY_ACCESS_OPERATOR,regex:fb([".",...(n=e.propertyAccessOperators)!==null&&n!==void 0?n:[]])}])}buildParamRules(e,r){var n,i,s,o,a;let l={named:r?.named||((n=e.paramTypes)===null||n===void 0?void 0:n.named)||[],quoted:r?.quoted||((i=e.paramTypes)===null||i===void 0?void 0:i.quoted)||[],numbered:r?.numbered||((s=e.paramTypes)===null||s===void 0?void 0:s.numbered)||[],positional:typeof r?.positional=="boolean"?r.positional:(o=e.paramTypes)===null||o===void 0?void 0:o.positional,custom:r?.custom||((a=e.paramTypes)===null||a===void 0?void 0:a.custom)||[]};return this.validRules([{type:$.NAMED_PARAMETER,regex:cR(l.named,Tb(e.paramChars||e.identChars)),key:c=>c.slice(1)},{type:$.QUOTED_PARAMETER,regex:cR(l.quoted,Eb(e.identTypes)),key:c=>(({tokenKey:u,quoteChar:d})=>u.replace(new RegExp(on("\\"+d),"gu"),d))({tokenKey:c.slice(2,-1),quoteChar:c.slice(-1)})},{type:$.NUMBERED_PARAMETER,regex:cR(l.numbered,"[0-9]+"),key:c=>c.slice(1)},{type:$.POSITIONAL_PARAMETER,regex:l.positional?/[?]/y:void 0},...l.custom.map(c=>{var u;return{type:$.CUSTOM_PARAMETER,regex:Es(c.regex),key:(u=c.key)!==null&&u!==void 0?u:(d=>d)}})])}validRules(e){return e.filter(r=>!!r.regex)}},Xt=t=>Oc(t.toUpperCase())});var nK,iK,Dwe,Pwe,sK=H(()=>{rK();nK=new Map,iK=t=>{let e=nK.get(t);return e||(e=Dwe(t),nK.set(t,e)),e},Dwe=t=>({tokenizer:new sf(t.tokenizerOptions,t.name),formatOptions:Pwe(t.formatOptions)}),Pwe=t=>{var e;return{alwaysDenseOperators:t.alwaysDenseOperators||[],onelineClauses:Object.fromEntries(t.onelineClauses.map(r=>[r,!0])),tabularOnelineClauses:Object.fromEntries(((e=t.tabularOnelineClauses)!==null&&e!==void 0?e:t.onelineClauses).map(r=>[r,!0]))}}});function oK(t){return t.indentStyle==="tabularLeft"||t.indentStyle==="tabularRight"?" ".repeat(10):t.useTabs?"	":" ".repeat(t.tabWidth)}function Na(t){return t.indentStyle==="tabularLeft"||t.indentStyle==="tabularRight"}var Sb=H(()=>{});var of,aK=H(()=>{of=class{constructor(e){this.params=e,this.index=0}get({key:e,text:r}){return this.params?e?this.params[e]:this.params[this.index++]:r}getPositionalParameterIndex(){return this.index}setPositionalParameterIndex(e){this.index=e}}});var cK=O((lK,fR)=>{(function(t,e){typeof fR=="object"&&fR.exports?fR.exports=e():t.nearley=e()})(lK,function(){function t(l,c,u){return this.id=++t.highestId,this.name=l,this.symbols=c,this.postprocess=u,this}t.highestId=0,t.prototype.toString=function(l){var c=typeof l>"u"?this.symbols.map(a).join(" "):this.symbols.slice(0,l).map(a).join(" ")+" \u25CF "+this.symbols.slice(l).map(a).join(" ");return this.name+" \u2192 "+c};function e(l,c,u,d){this.rule=l,this.dot=c,this.reference=u,this.data=[],this.wantedBy=d,this.isComplete=this.dot===l.symbols.length}e.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},e.prototype.nextState=function(l){var c=new e(this.rule,this.dot+1,this.reference,this.wantedBy);return c.left=this,c.right=l,c.isComplete&&(c.data=c.build(),c.right=void 0),c},e.prototype.build=function(){var l=[],c=this;do l.push(c.right.data),c=c.left;while(c.left);return l.reverse(),l},e.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,s.fail))};function r(l,c){this.grammar=l,this.index=c,this.states=[],this.wants={},this.scannable=[],this.completed={}}r.prototype.process=function(l){for(var c=this.states,u=this.wants,d=this.completed,E=0;E<c.length;E++){var f=c[E];if(f.isComplete){if(f.finish(),f.data!==s.fail){for(var T=f.wantedBy,h=T.length;h--;){var p=T[h];this.complete(p,f)}if(f.reference===this.index){var S=f.rule.name;(this.completed[S]=this.completed[S]||[]).push(f)}}}else{var S=f.rule.symbols[f.dot];if(typeof S!="string"){this.scannable.push(f);continue}if(u[S]){if(u[S].push(f),d.hasOwnProperty(S))for(var m=d[S],h=0;h<m.length;h++){var R=m[h];this.complete(f,R)}}else u[S]=[f],this.predict(S)}}},r.prototype.predict=function(l){for(var c=this.grammar.byName[l]||[],u=0;u<c.length;u++){var d=c[u],E=this.wants[l],f=new e(d,0,this.index,E);this.states.push(f)}},r.prototype.complete=function(l,c){var u=l.nextState(c);this.states.push(u)};function n(l,c){this.rules=l,this.start=c||this.rules[0].name;var u=this.byName={};this.rules.forEach(function(d){u.hasOwnProperty(d.name)||(u[d.name]=[]),u[d.name].push(d)})}n.fromCompiled=function(d,c){var u=d.Lexer;d.ParserStart&&(c=d.ParserStart,d=d.ParserRules);var d=d.map(function(f){return new t(f.name,f.symbols,f.postprocess)}),E=new n(d,c);return E.lexer=u,E};function i(){this.reset("")}i.prototype.reset=function(l,c){this.buffer=l,this.index=0,this.line=c?c.line:1,this.lastLineBreak=c?-c.col:0},i.prototype.next=function(){if(this.index<this.buffer.length){var l=this.buffer[this.index++];return l===`
`&&(this.line+=1,this.lastLineBreak=this.index),{value:l}}},i.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},i.prototype.formatError=function(l,c){var u=this.buffer;if(typeof u=="string"){var d=u.split(`
`).slice(Math.max(0,this.line-5),this.line),E=u.indexOf(`
`,this.index);E===-1&&(E=u.length);var f=this.index-this.lastLineBreak,T=String(this.line).length;return c+=" at line "+this.line+" col "+f+`:

`,c+=d.map(function(p,S){return h(this.line-d.length+S+1,T)+" "+p},this).join(`
`),c+=`
`+h("",T+f)+`^
`,c}else return c+" at index "+(this.index-1);function h(p,S){var m=String(p);return Array(S-m.length+1).join(" ")+m}};function s(l,c,u){if(l instanceof n)var d=l,u=c;else var d=n.fromCompiled(l,c);this.grammar=d,this.options={keepHistory:!1,lexer:d.lexer||new i};for(var E in u||{})this.options[E]=u[E];this.lexer=this.options.lexer,this.lexerState=void 0;var f=new r(d,0),T=this.table=[f];f.wants[d.start]=[],f.predict(d.start),f.process(),this.current=0}s.fail={},s.prototype.feed=function(l){var c=this.lexer;c.reset(l,this.lexerState);for(var u;;){try{if(u=c.next(),!u)break}catch(w){var T=new r(this.grammar,this.current+1);this.table.push(T);var d=new Error(this.reportLexerError(w));throw d.offset=this.current,d.token=w.token,d}var E=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var f=this.current+1,T=new r(this.grammar,f);this.table.push(T);for(var h=u.text!==void 0?u.text:u.value,p=c.constructor===i?u.value:u,S=E.scannable,m=S.length;m--;){var R=S[m],A=R.rule.symbols[R.dot];if(A.test?A.test(p):A.type?A.type===u.type:A.literal===h){var g=R.nextState({data:p,token:u,isToken:!0,reference:f-1});T.states.push(g)}}if(T.process(),T.states.length===0){var d=new Error(this.reportError(u));throw d.offset=this.current,d.token=u,d}this.options.keepHistory&&(E.lexerState=c.save()),this.current++}return E&&(this.lexerState=c.save()),this.results=this.finish(),this},s.prototype.reportLexerError=function(l){var c,u,d=l.token;return d?(c="input "+JSON.stringify(d.text[0])+" (lexer error)",u=this.lexer.formatError(d,"Syntax error")):(c="input (lexer error)",u=l.message),this.reportErrorCommon(u,c)},s.prototype.reportError=function(l){var c=(l.type?l.type+" token: ":"")+JSON.stringify(l.value!==void 0?l.value:l),u=this.lexer.formatError(l,"Syntax error");return this.reportErrorCommon(u,c)},s.prototype.reportErrorCommon=function(l,c){var u=[];u.push(l);var d=this.table.length-2,E=this.table[d],f=E.states.filter(function(h){var p=h.rule.symbols[h.dot];return p&&typeof p!="string"});if(f.length===0)u.push("Unexpected "+c+`. I did not expect any more input. Here is the state of my parse table:
`),this.displayStateStack(E.states,u);else{u.push("Unexpected "+c+`. Instead, I was expecting to see one of the following:
`);var T=f.map(function(h){return this.buildFirstStateStack(h,[])||[h]},this);T.forEach(function(h){var p=h[0],S=p.rule.symbols[p.dot],m=this.getSymbolDisplay(S);u.push("A "+m+" based on:"),this.displayStateStack(h,u)},this)}return u.push(""),u.join(`
`)},s.prototype.displayStateStack=function(l,c){for(var u,d=0,E=0;E<l.length;E++){var f=l[E],T=f.rule.toString(f.dot);T===u?d++:(d>0&&c.push("    ^ "+d+" more lines identical to this"),d=0,c.push("    "+T)),u=T}},s.prototype.getSymbolDisplay=function(l){return o(l)},s.prototype.buildFirstStateStack=function(l,c){if(c.indexOf(l)!==-1)return null;if(l.wantedBy.length===0)return[l];var u=l.wantedBy[0],d=[l].concat(c),E=this.buildFirstStateStack(u,d);return E===null?null:[l].concat(E)},s.prototype.save=function(){var l=this.table[this.current];return l.lexerState=this.lexerState,l},s.prototype.restore=function(l){var c=l.index;this.current=c,this.table[c]=l,this.table.splice(c+1),this.lexerState=l.lexerState,this.results=this.finish()},s.prototype.rewind=function(l){if(!this.options.keepHistory)throw new Error("set option `keepHistory` to enable rewinding");this.restore(this.table[l])},s.prototype.finish=function(){var l=[],c=this.grammar.start,u=this.table[this.table.length-1];return u.states.forEach(function(d){d.rule.name===c&&d.dot===d.rule.symbols.length&&d.reference===0&&d.data!==s.fail&&l.push(d)}),l.map(function(d){return d.data})};function o(l){var c=typeof l;if(c==="string")return l;if(c==="object"){if(l.literal)return JSON.stringify(l.literal);if(l instanceof RegExp)return"character matching "+l;if(l.type)return l.type+" token";if(l.test)return"token matching "+String(l.test);throw new Error("Unknown symbol type: "+l)}}function a(l){var c=typeof l;if(c==="string")return l;if(c==="object"){if(l.literal)return JSON.stringify(l.literal);if(l instanceof RegExp)return l.toString();if(l.type)return"%"+l.type;if(l.test)return"<"+String(l.test)+">";throw new Error("Unknown symbol type: "+l)}}return{Parser:s,Grammar:n,Rule:t}})});function uK(t){return t.map(xwe).map(Mwe).map(vwe).map(Uwe).map(Bwe)}var xwe,Mwe,vwe,Uwe,Bwe,Fwe,yc,dK,fK,Gwe,EK=H(()=>{gn();xwe=(t,e,r)=>{if(WS(t.type)){let n=Fwe(r,e);if(n&&n.type===$.PROPERTY_ACCESS_OPERATOR)return Object.assign(Object.assign({},t),{type:$.IDENTIFIER,text:t.raw});let i=yc(r,e);if(i&&i.type===$.PROPERTY_ACCESS_OPERATOR)return Object.assign(Object.assign({},t),{type:$.IDENTIFIER,text:t.raw})}return t},Mwe=(t,e,r)=>{if(t.type===$.RESERVED_FUNCTION_NAME){let n=yc(r,e);if(!n||!dK(n))return Object.assign(Object.assign({},t),{type:$.IDENTIFIER,text:t.raw})}return t},vwe=(t,e,r)=>{if(t.type===$.RESERVED_DATA_TYPE){let n=yc(r,e);if(n&&dK(n))return Object.assign(Object.assign({},t),{type:$.RESERVED_PARAMETERIZED_DATA_TYPE})}return t},Uwe=(t,e,r)=>{if(t.type===$.IDENTIFIER){let n=yc(r,e);if(n&&fK(n))return Object.assign(Object.assign({},t),{type:$.ARRAY_IDENTIFIER})}return t},Bwe=(t,e,r)=>{if(t.type===$.RESERVED_DATA_TYPE){let n=yc(r,e);if(n&&fK(n))return Object.assign(Object.assign({},t),{type:$.ARRAY_KEYWORD})}return t},Fwe=(t,e)=>yc(t,e,-1),yc=(t,e,r=1)=>{let n=1;for(;t[e+n*r]&&Gwe(t[e+n*r]);)n++;return t[e+n*r]},dK=t=>t.type===$.OPEN_PAREN&&t.text==="(",fK=t=>t.type===$.OPEN_PAREN&&t.text==="[",Gwe=t=>t.type===$.BLOCK_COMMENT||t.type===$.LINE_COMMENT});var Oa,Rb=H(()=>{pb();gn();Oa=class{constructor(e){this.tokenize=e,this.index=0,this.tokens=[],this.input=""}reset(e,r){this.input=e,this.index=0,this.tokens=this.tokenize(e)}next(){return this.tokens[this.index++]}save(){}formatError(e){let{line:r,col:n}=uR(this.input,e.start);return`Parse error at token: ${e.text} at line ${r} column ${n}`}has(e){return e in $}}});var K,Ab=H(()=>{(function(t){t.statement="statement",t.clause="clause",t.set_operation="set_operation",t.function_call="function_call",t.parameterized_data_type="parameterized_data_type",t.array_subscript="array_subscript",t.property_access="property_access",t.parenthesis="parenthesis",t.between_predicate="between_predicate",t.case_expression="case_expression",t.case_when="case_when",t.case_else="case_else",t.limit_clause="limit_clause",t.all_columns_asterisk="all_columns_asterisk",t.literal="literal",t.identifier="identifier",t.keyword="keyword",t.data_type="data_type",t.parameter="parameter",t.operator="operator",t.comma="comma",t.line_comment="line_comment",t.block_comment="block_comment",t.disable_comment="disable_comment"})(K=K||(K={}))});function mb(t){return t[0]}var le,Ca,ir,hK,sr,Hwe,Wwe,TK,pK=H(()=>{Rb();Ab();gn();le=new Oa(t=>[]),Ca=([[t]])=>t,ir=t=>({type:K.keyword,tokenType:t.type,text:t.text,raw:t.raw}),hK=t=>({type:K.data_type,text:t.text,raw:t.raw}),sr=(t,{leading:e,trailing:r})=>(e?.length&&(t=Object.assign(Object.assign({},t),{leadingComments:e})),r?.length&&(t=Object.assign(Object.assign({},t),{trailingComments:r})),t),Hwe=(t,{leading:e,trailing:r})=>{if(e?.length){let[n,...i]=t;t=[sr(n,{leading:e}),...i]}if(r?.length){let n=t.slice(0,-1),i=t[t.length-1];t=[...n,sr(i,{trailing:r})]}return t},Wwe={Lexer:le,ParserRules:[{name:"main$ebnf$1",symbols:[]},{name:"main$ebnf$1",symbols:["main$ebnf$1","statement"],postprocess:t=>t[0].concat([t[1]])},{name:"main",symbols:["main$ebnf$1"],postprocess:([t])=>{let e=t[t.length-1];return e&&!e.hasSemicolon?e.children.length>0?t:t.slice(0,-1):t}},{name:"statement$subexpression$1",symbols:[le.has("DELIMITER")?{type:"DELIMITER"}:DELIMITER]},{name:"statement$subexpression$1",symbols:[le.has("EOF")?{type:"EOF"}:EOF]},{name:"statement",symbols:["expressions_or_clauses","statement$subexpression$1"],postprocess:([t,[e]])=>({type:K.statement,children:t,hasSemicolon:e.type===$.DELIMITER})},{name:"expressions_or_clauses$ebnf$1",symbols:[]},{name:"expressions_or_clauses$ebnf$1",symbols:["expressions_or_clauses$ebnf$1","free_form_sql"],postprocess:t=>t[0].concat([t[1]])},{name:"expressions_or_clauses$ebnf$2",symbols:[]},{name:"expressions_or_clauses$ebnf$2",symbols:["expressions_or_clauses$ebnf$2","clause"],postprocess:t=>t[0].concat([t[1]])},{name:"expressions_or_clauses",symbols:["expressions_or_clauses$ebnf$1","expressions_or_clauses$ebnf$2"],postprocess:([t,e])=>[...t,...e]},{name:"clause$subexpression$1",symbols:["limit_clause"]},{name:"clause$subexpression$1",symbols:["select_clause"]},{name:"clause$subexpression$1",symbols:["other_clause"]},{name:"clause$subexpression$1",symbols:["set_operation"]},{name:"clause",symbols:["clause$subexpression$1"],postprocess:Ca},{name:"limit_clause$ebnf$1$subexpression$1$ebnf$1",symbols:["free_form_sql"]},{name:"limit_clause$ebnf$1$subexpression$1$ebnf$1",symbols:["limit_clause$ebnf$1$subexpression$1$ebnf$1","free_form_sql"],postprocess:t=>t[0].concat([t[1]])},{name:"limit_clause$ebnf$1$subexpression$1",symbols:[le.has("COMMA")?{type:"COMMA"}:COMMA,"limit_clause$ebnf$1$subexpression$1$ebnf$1"]},{name:"limit_clause$ebnf$1",symbols:["limit_clause$ebnf$1$subexpression$1"],postprocess:mb},{name:"limit_clause$ebnf$1",symbols:[],postprocess:()=>null},{name:"limit_clause",symbols:[le.has("LIMIT")?{type:"LIMIT"}:LIMIT,"_","expression_chain_","limit_clause$ebnf$1"],postprocess:([t,e,r,n])=>{if(n){let[i,s]=n;return{type:K.limit_clause,limitKw:sr(ir(t),{trailing:e}),offset:r,count:s}}else return{type:K.limit_clause,limitKw:sr(ir(t),{trailing:e}),count:r}}},{name:"select_clause$subexpression$1$ebnf$1",symbols:[]},{name:"select_clause$subexpression$1$ebnf$1",symbols:["select_clause$subexpression$1$ebnf$1","free_form_sql"],postprocess:t=>t[0].concat([t[1]])},{name:"select_clause$subexpression$1",symbols:["all_columns_asterisk","select_clause$subexpression$1$ebnf$1"]},{name:"select_clause$subexpression$1$ebnf$2",symbols:[]},{name:"select_clause$subexpression$1$ebnf$2",symbols:["select_clause$subexpression$1$ebnf$2","free_form_sql"],postprocess:t=>t[0].concat([t[1]])},{name:"select_clause$subexpression$1",symbols:["asteriskless_free_form_sql","select_clause$subexpression$1$ebnf$2"]},{name:"select_clause",symbols:[le.has("RESERVED_SELECT")?{type:"RESERVED_SELECT"}:RESERVED_SELECT,"select_clause$subexpression$1"],postprocess:([t,[e,r]])=>({type:K.clause,nameKw:ir(t),children:[e,...r]})},{name:"select_clause",symbols:[le.has("RESERVED_SELECT")?{type:"RESERVED_SELECT"}:RESERVED_SELECT],postprocess:([t])=>({type:K.clause,nameKw:ir(t),children:[]})},{name:"all_columns_asterisk",symbols:[le.has("ASTERISK")?{type:"ASTERISK"}:ASTERISK],postprocess:()=>({type:K.all_columns_asterisk})},{name:"other_clause$ebnf$1",symbols:[]},{name:"other_clause$ebnf$1",symbols:["other_clause$ebnf$1","free_form_sql"],postprocess:t=>t[0].concat([t[1]])},{name:"other_clause",symbols:[le.has("RESERVED_CLAUSE")?{type:"RESERVED_CLAUSE"}:RESERVED_CLAUSE,"other_clause$ebnf$1"],postprocess:([t,e])=>({type:K.clause,nameKw:ir(t),children:e})},{name:"set_operation$ebnf$1",symbols:[]},{name:"set_operation$ebnf$1",symbols:["set_operation$ebnf$1","free_form_sql"],postprocess:t=>t[0].concat([t[1]])},{name:"set_operation",symbols:[le.has("RESERVED_SET_OPERATION")?{type:"RESERVED_SET_OPERATION"}:RESERVED_SET_OPERATION,"set_operation$ebnf$1"],postprocess:([t,e])=>({type:K.set_operation,nameKw:ir(t),children:e})},{name:"expression_chain_$ebnf$1",symbols:["expression_with_comments_"]},{name:"expression_chain_$ebnf$1",symbols:["expression_chain_$ebnf$1","expression_with_comments_"],postprocess:t=>t[0].concat([t[1]])},{name:"expression_chain_",symbols:["expression_chain_$ebnf$1"],postprocess:mb},{name:"expression_chain$ebnf$1",symbols:[]},{name:"expression_chain$ebnf$1",symbols:["expression_chain$ebnf$1","_expression_with_comments"],postprocess:t=>t[0].concat([t[1]])},{name:"expression_chain",symbols:["expression","expression_chain$ebnf$1"],postprocess:([t,e])=>[t,...e]},{name:"andless_expression_chain$ebnf$1",symbols:[]},{name:"andless_expression_chain$ebnf$1",symbols:["andless_expression_chain$ebnf$1","_andless_expression_with_comments"],postprocess:t=>t[0].concat([t[1]])},{name:"andless_expression_chain",symbols:["andless_expression","andless_expression_chain$ebnf$1"],postprocess:([t,e])=>[t,...e]},{name:"expression_with_comments_",symbols:["expression","_"],postprocess:([t,e])=>sr(t,{trailing:e})},{name:"_expression_with_comments",symbols:["_","expression"],postprocess:([t,e])=>sr(e,{leading:t})},{name:"_andless_expression_with_comments",symbols:["_","andless_expression"],postprocess:([t,e])=>sr(e,{leading:t})},{name:"free_form_sql$subexpression$1",symbols:["asteriskless_free_form_sql"]},{name:"free_form_sql$subexpression$1",symbols:["asterisk"]},{name:"free_form_sql",symbols:["free_form_sql$subexpression$1"],postprocess:Ca},{name:"asteriskless_free_form_sql$subexpression$1",symbols:["asteriskless_andless_expression"]},{name:"asteriskless_free_form_sql$subexpression$1",symbols:["logic_operator"]},{name:"asteriskless_free_form_sql$subexpression$1",symbols:["comma"]},{name:"asteriskless_free_form_sql$subexpression$1",symbols:["comment"]},{name:"asteriskless_free_form_sql$subexpression$1",symbols:["other_keyword"]},{name:"asteriskless_free_form_sql",symbols:["asteriskless_free_form_sql$subexpression$1"],postprocess:Ca},{name:"expression$subexpression$1",symbols:["andless_expression"]},{name:"expression$subexpression$1",symbols:["logic_operator"]},{name:"expression",symbols:["expression$subexpression$1"],postprocess:Ca},{name:"andless_expression$subexpression$1",symbols:["asteriskless_andless_expression"]},{name:"andless_expression$subexpression$1",symbols:["asterisk"]},{name:"andless_expression",symbols:["andless_expression$subexpression$1"],postprocess:Ca},{name:"asteriskless_andless_expression$subexpression$1",symbols:["atomic_expression"]},{name:"asteriskless_andless_expression$subexpression$1",symbols:["between_predicate"]},{name:"asteriskless_andless_expression$subexpression$1",symbols:["case_expression"]},{name:"asteriskless_andless_expression",symbols:["asteriskless_andless_expression$subexpression$1"],postprocess:Ca},{name:"atomic_expression$subexpression$1",symbols:["array_subscript"]},{name:"atomic_expression$subexpression$1",symbols:["function_call"]},{name:"atomic_expression$subexpression$1",symbols:["property_access"]},{name:"atomic_expression$subexpression$1",symbols:["parenthesis"]},{name:"atomic_expression$subexpression$1",symbols:["curly_braces"]},{name:"atomic_expression$subexpression$1",symbols:["square_brackets"]},{name:"atomic_expression$subexpression$1",symbols:["operator"]},{name:"atomic_expression$subexpression$1",symbols:["identifier"]},{name:"atomic_expression$subexpression$1",symbols:["parameter"]},{name:"atomic_expression$subexpression$1",symbols:["literal"]},{name:"atomic_expression$subexpression$1",symbols:["data_type"]},{name:"atomic_expression$subexpression$1",symbols:["keyword"]},{name:"atomic_expression",symbols:["atomic_expression$subexpression$1"],postprocess:Ca},{name:"array_subscript",symbols:[le.has("ARRAY_IDENTIFIER")?{type:"ARRAY_IDENTIFIER"}:ARRAY_IDENTIFIER,"_","square_brackets"],postprocess:([t,e,r])=>({type:K.array_subscript,array:sr({type:K.identifier,quoted:!1,text:t.text},{trailing:e}),parenthesis:r})},{name:"array_subscript",symbols:[le.has("ARRAY_KEYWORD")?{type:"ARRAY_KEYWORD"}:ARRAY_KEYWORD,"_","square_brackets"],postprocess:([t,e,r])=>({type:K.array_subscript,array:sr(ir(t),{trailing:e}),parenthesis:r})},{name:"function_call",symbols:[le.has("RESERVED_FUNCTION_NAME")?{type:"RESERVED_FUNCTION_NAME"}:RESERVED_FUNCTION_NAME,"_","parenthesis"],postprocess:([t,e,r])=>({type:K.function_call,nameKw:sr(ir(t),{trailing:e}),parenthesis:r})},{name:"parenthesis",symbols:[{literal:"("},"expressions_or_clauses",{literal:")"}],postprocess:([t,e,r])=>({type:K.parenthesis,children:e,openParen:"(",closeParen:")"})},{name:"curly_braces$ebnf$1",symbols:[]},{name:"curly_braces$ebnf$1",symbols:["curly_braces$ebnf$1","free_form_sql"],postprocess:t=>t[0].concat([t[1]])},{name:"curly_braces",symbols:[{literal:"{"},"curly_braces$ebnf$1",{literal:"}"}],postprocess:([t,e,r])=>({type:K.parenthesis,children:e,openParen:"{",closeParen:"}"})},{name:"square_brackets$ebnf$1",symbols:[]},{name:"square_brackets$ebnf$1",symbols:["square_brackets$ebnf$1","free_form_sql"],postprocess:t=>t[0].concat([t[1]])},{name:"square_brackets",symbols:[{literal:"["},"square_brackets$ebnf$1",{literal:"]"}],postprocess:([t,e,r])=>({type:K.parenthesis,children:e,openParen:"[",closeParen:"]"})},{name:"property_access$subexpression$1",symbols:["identifier"]},{name:"property_access$subexpression$1",symbols:["array_subscript"]},{name:"property_access$subexpression$1",symbols:["all_columns_asterisk"]},{name:"property_access$subexpression$1",symbols:["parameter"]},{name:"property_access",symbols:["atomic_expression","_",le.has("PROPERTY_ACCESS_OPERATOR")?{type:"PROPERTY_ACCESS_OPERATOR"}:PROPERTY_ACCESS_OPERATOR,"_","property_access$subexpression$1"],postprocess:([t,e,r,n,[i]])=>({type:K.property_access,object:sr(t,{trailing:e}),operator:r.text,property:sr(i,{leading:n})})},{name:"between_predicate",symbols:[le.has("BETWEEN")?{type:"BETWEEN"}:BETWEEN,"_","andless_expression_chain","_",le.has("AND")?{type:"AND"}:AND,"_","andless_expression"],postprocess:([t,e,r,n,i,s,o])=>({type:K.between_predicate,betweenKw:ir(t),expr1:Hwe(r,{leading:e,trailing:n}),andKw:ir(i),expr2:[sr(o,{leading:s})]})},{name:"case_expression$ebnf$1",symbols:["expression_chain_"],postprocess:mb},{name:"case_expression$ebnf$1",symbols:[],postprocess:()=>null},{name:"case_expression$ebnf$2",symbols:[]},{name:"case_expression$ebnf$2",symbols:["case_expression$ebnf$2","case_clause"],postprocess:t=>t[0].concat([t[1]])},{name:"case_expression",symbols:[le.has("CASE")?{type:"CASE"}:CASE,"_","case_expression$ebnf$1","case_expression$ebnf$2",le.has("END")?{type:"END"}:END],postprocess:([t,e,r,n,i])=>({type:K.case_expression,caseKw:sr(ir(t),{trailing:e}),endKw:ir(i),expr:r||[],clauses:n})},{name:"case_clause",symbols:[le.has("WHEN")?{type:"WHEN"}:WHEN,"_","expression_chain_",le.has("THEN")?{type:"THEN"}:THEN,"_","expression_chain_"],postprocess:([t,e,r,n,i,s])=>({type:K.case_when,whenKw:sr(ir(t),{trailing:e}),thenKw:sr(ir(n),{trailing:i}),condition:r,result:s})},{name:"case_clause",symbols:[le.has("ELSE")?{type:"ELSE"}:ELSE,"_","expression_chain_"],postprocess:([t,e,r])=>({type:K.case_else,elseKw:sr(ir(t),{trailing:e}),result:r})},{name:"comma$subexpression$1",symbols:[le.has("COMMA")?{type:"COMMA"}:COMMA]},{name:"comma",symbols:["comma$subexpression$1"],postprocess:([[t]])=>({type:K.comma})},{name:"asterisk$subexpression$1",symbols:[le.has("ASTERISK")?{type:"ASTERISK"}:ASTERISK]},{name:"asterisk",symbols:["asterisk$subexpression$1"],postprocess:([[t]])=>({type:K.operator,text:t.text})},{name:"operator$subexpression$1",symbols:[le.has("OPERATOR")?{type:"OPERATOR"}:OPERATOR]},{name:"operator",symbols:["operator$subexpression$1"],postprocess:([[t]])=>({type:K.operator,text:t.text})},{name:"identifier$subexpression$1",symbols:[le.has("IDENTIFIER")?{type:"IDENTIFIER"}:IDENTIFIER]},{name:"identifier$subexpression$1",symbols:[le.has("QUOTED_IDENTIFIER")?{type:"QUOTED_IDENTIFIER"}:QUOTED_IDENTIFIER]},{name:"identifier$subexpression$1",symbols:[le.has("VARIABLE")?{type:"VARIABLE"}:VARIABLE]},{name:"identifier",symbols:["identifier$subexpression$1"],postprocess:([[t]])=>({type:K.identifier,quoted:t.type!=="IDENTIFIER",text:t.text})},{name:"parameter$subexpression$1",symbols:[le.has("NAMED_PARAMETER")?{type:"NAMED_PARAMETER"}:NAMED_PARAMETER]},{name:"parameter$subexpression$1",symbols:[le.has("QUOTED_PARAMETER")?{type:"QUOTED_PARAMETER"}:QUOTED_PARAMETER]},{name:"parameter$subexpression$1",symbols:[le.has("NUMBERED_PARAMETER")?{type:"NUMBERED_PARAMETER"}:NUMBERED_PARAMETER]},{name:"parameter$subexpression$1",symbols:[le.has("POSITIONAL_PARAMETER")?{type:"POSITIONAL_PARAMETER"}:POSITIONAL_PARAMETER]},{name:"parameter$subexpression$1",symbols:[le.has("CUSTOM_PARAMETER")?{type:"CUSTOM_PARAMETER"}:CUSTOM_PARAMETER]},{name:"parameter",symbols:["parameter$subexpression$1"],postprocess:([[t]])=>({type:K.parameter,key:t.key,text:t.text})},{name:"literal$subexpression$1",symbols:[le.has("NUMBER")?{type:"NUMBER"}:NUMBER]},{name:"literal$subexpression$1",symbols:[le.has("STRING")?{type:"STRING"}:STRING]},{name:"literal",symbols:["literal$subexpression$1"],postprocess:([[t]])=>({type:K.literal,text:t.text})},{name:"keyword$subexpression$1",symbols:[le.has("RESERVED_KEYWORD")?{type:"RESERVED_KEYWORD"}:RESERVED_KEYWORD]},{name:"keyword$subexpression$1",symbols:[le.has("RESERVED_KEYWORD_PHRASE")?{type:"RESERVED_KEYWORD_PHRASE"}:RESERVED_KEYWORD_PHRASE]},{name:"keyword$subexpression$1",symbols:[le.has("RESERVED_JOIN")?{type:"RESERVED_JOIN"}:RESERVED_JOIN]},{name:"keyword",symbols:["keyword$subexpression$1"],postprocess:([[t]])=>ir(t)},{name:"data_type$subexpression$1",symbols:[le.has("RESERVED_DATA_TYPE")?{type:"RESERVED_DATA_TYPE"}:RESERVED_DATA_TYPE]},{name:"data_type$subexpression$1",symbols:[le.has("RESERVED_DATA_TYPE_PHRASE")?{type:"RESERVED_DATA_TYPE_PHRASE"}:RESERVED_DATA_TYPE_PHRASE]},{name:"data_type",symbols:["data_type$subexpression$1"],postprocess:([[t]])=>hK(t)},{name:"data_type",symbols:[le.has("RESERVED_PARAMETERIZED_DATA_TYPE")?{type:"RESERVED_PARAMETERIZED_DATA_TYPE"}:RESERVED_PARAMETERIZED_DATA_TYPE,"_","parenthesis"],postprocess:([t,e,r])=>({type:K.parameterized_data_type,dataType:sr(hK(t),{trailing:e}),parenthesis:r})},{name:"logic_operator$subexpression$1",symbols:[le.has("AND")?{type:"AND"}:AND]},{name:"logic_operator$subexpression$1",symbols:[le.has("OR")?{type:"OR"}:OR]},{name:"logic_operator$subexpression$1",symbols:[le.has("XOR")?{type:"XOR"}:XOR]},{name:"logic_operator",symbols:["logic_operator$subexpression$1"],postprocess:([[t]])=>ir(t)},{name:"other_keyword$subexpression$1",symbols:[le.has("WHEN")?{type:"WHEN"}:WHEN]},{name:"other_keyword$subexpression$1",symbols:[le.has("THEN")?{type:"THEN"}:THEN]},{name:"other_keyword$subexpression$1",symbols:[le.has("ELSE")?{type:"ELSE"}:ELSE]},{name:"other_keyword$subexpression$1",symbols:[le.has("END")?{type:"END"}:END]},{name:"other_keyword",symbols:["other_keyword$subexpression$1"],postprocess:([[t]])=>ir(t)},{name:"_$ebnf$1",symbols:[]},{name:"_$ebnf$1",symbols:["_$ebnf$1","comment"],postprocess:t=>t[0].concat([t[1]])},{name:"_",symbols:["_$ebnf$1"],postprocess:([t])=>t},{name:"comment",symbols:[le.has("LINE_COMMENT")?{type:"LINE_COMMENT"}:LINE_COMMENT],postprocess:([t])=>({type:K.line_comment,text:t.text,precedingWhitespace:t.precedingWhitespace})},{name:"comment",symbols:[le.has("BLOCK_COMMENT")?{type:"BLOCK_COMMENT"}:BLOCK_COMMENT],postprocess:([t])=>({type:K.block_comment,text:t.text,precedingWhitespace:t.precedingWhitespace})},{name:"comment",symbols:[le.has("DISABLE_COMMENT")?{type:"DISABLE_COMMENT"}:DISABLE_COMMENT],postprocess:([t])=>({type:K.disable_comment,text:t.text,precedingWhitespace:t.precedingWhitespace})}],ParserStart:"main"},TK=Wwe});function RK(t){let e={},r=new Oa(i=>[...uK(t.tokenize(i,e)),Ny(i.length)]),n=new kwe($we.fromCompiled(TK),{lexer:r});return{parse:(i,s)=>{e=s;let{results:o}=n.feed(i);if(o.length===1)return o[0];throw o.length===0?new Error("Parse error: Invalid SQL"):new Error(`Parse error: Ambiguous grammar
${JSON.stringify(o,void 0,2)}`)}}}var SK,kwe,$we,AK=H(()=>{SK=q(cK(),1);EK();pK();Rb();gn();({Parser:kwe,Grammar:$we}=SK.default)});var k,ya,Ywe,Vwe,ER=H(()=>{Cc();(function(t){t[t.SPACE=0]="SPACE",t[t.NO_SPACE=1]="NO_SPACE",t[t.NO_NEWLINE=2]="NO_NEWLINE",t[t.NEWLINE=3]="NEWLINE",t[t.MANDATORY_NEWLINE=4]="MANDATORY_NEWLINE",t[t.INDENT=5]="INDENT",t[t.SINGLE_INDENT=6]="SINGLE_INDENT"})(k=k||(k={}));ya=class{constructor(e){this.indentation=e,this.items=[]}add(...e){for(let r of e)switch(r){case k.SPACE:this.items.push(k.SPACE);break;case k.NO_SPACE:this.trimHorizontalWhitespace();break;case k.NO_NEWLINE:this.trimWhitespace();break;case k.NEWLINE:this.trimHorizontalWhitespace(),this.addNewline(k.NEWLINE);break;case k.MANDATORY_NEWLINE:this.trimHorizontalWhitespace(),this.addNewline(k.MANDATORY_NEWLINE);break;case k.INDENT:this.addIndentation();break;case k.SINGLE_INDENT:this.items.push(k.SINGLE_INDENT);break;default:this.items.push(r)}}trimHorizontalWhitespace(){for(;Ywe(no(this.items));)this.items.pop()}trimWhitespace(){for(;Vwe(no(this.items));)this.items.pop()}addNewline(e){if(this.items.length>0)switch(no(this.items)){case k.NEWLINE:this.items.pop(),this.items.push(e);break;case k.MANDATORY_NEWLINE:break;default:this.items.push(e);break}}addIndentation(){for(let e=0;e<this.indentation.getLevel();e++)this.items.push(k.SINGLE_INDENT)}toString(){return this.items.map(e=>this.itemToString(e)).join("")}getLayoutItems(){return this.items}itemToString(e){switch(e){case k.SPACE:return" ";case k.NEWLINE:case k.MANDATORY_NEWLINE:return`
`;case k.SINGLE_INDENT:return this.indentation.getSingleIndent();default:return e}}},Ywe=t=>t===k.SPACE||t===k.SINGLE_INDENT,Vwe=t=>t===k.SPACE||t===k.SINGLE_INDENT||t===k.NEWLINE});function hR(t,e){if(e==="standard")return t;let r=[];return t.length>=10&&t.includes(" ")&&([t,...r]=t.split(" ")),e==="tabularLeft"?t=t.padEnd(9," "):t=t.padStart(9," "),t+["",...r].join(" ")}function _b(t){return U3(t)||t===$.RESERVED_CLAUSE||t===$.RESERVED_SELECT||t===$.RESERVED_SET_OPERATION||t===$.RESERVED_JOIN||t===$.LIMIT}var mK=H(()=>{gn()});var Ib,qwe,ba,gb=H(()=>{Cc();Ib="top-level",qwe="block-level",ba=class{constructor(e){this.indent=e,this.indentTypes=[]}getSingleIndent(){return this.indent}getLevel(){return this.indentTypes.length}increaseTopLevel(){this.indentTypes.push(Ib)}increaseBlockLevel(){this.indentTypes.push(qwe)}decreaseTopLevel(){this.indentTypes.length>0&&no(this.indentTypes)===Ib&&this.indentTypes.pop()}decreaseBlockLevel(){for(;this.indentTypes.length>0&&this.indentTypes.pop()===Ib;);}}});var af,bc,_K=H(()=>{gb();ER();af=class extends ya{constructor(e){super(new ba("")),this.expressionWidth=e,this.length=0,this.trailingSpace=!1}add(...e){if(e.forEach(r=>this.addToLength(r)),this.length>this.expressionWidth)throw new bc;super.add(...e)}addToLength(e){if(typeof e=="string")this.length+=e.length,this.trailingSpace=!1;else{if(e===k.MANDATORY_NEWLINE||e===k.NEWLINE)throw new bc;e===k.INDENT||e===k.SINGLE_INDENT||e===k.SPACE?this.trailingSpace||(this.length++,this.trailingSpace=!0):(e===k.NO_NEWLINE||e===k.NO_SPACE)&&this.trailingSpace&&(this.trailingSpace=!1,this.length--)}}},bc=class extends Error{}});var lf,IK=H(()=>{Cc();Sb();gn();Ab();ER();mK();_K();lf=class t{constructor({cfg:e,dialectCfg:r,params:n,layout:i,inline:s=!1}){this.inline=!1,this.nodes=[],this.index=-1,this.cfg=e,this.dialectCfg=r,this.inline=s,this.params=n,this.layout=i}format(e){for(this.nodes=e,this.index=0;this.index<this.nodes.length;this.index++)this.formatNode(this.nodes[this.index]);return this.layout}formatNode(e){this.formatComments(e.leadingComments),this.formatNodeWithoutComments(e),this.formatComments(e.trailingComments)}formatNodeWithoutComments(e){switch(e.type){case K.function_call:return this.formatFunctionCall(e);case K.parameterized_data_type:return this.formatParameterizedDataType(e);case K.array_subscript:return this.formatArraySubscript(e);case K.property_access:return this.formatPropertyAccess(e);case K.parenthesis:return this.formatParenthesis(e);case K.between_predicate:return this.formatBetweenPredicate(e);case K.case_expression:return this.formatCaseExpression(e);case K.case_when:return this.formatCaseWhen(e);case K.case_else:return this.formatCaseElse(e);case K.clause:return this.formatClause(e);case K.set_operation:return this.formatSetOperation(e);case K.limit_clause:return this.formatLimitClause(e);case K.all_columns_asterisk:return this.formatAllColumnsAsterisk(e);case K.literal:return this.formatLiteral(e);case K.identifier:return this.formatIdentifier(e);case K.parameter:return this.formatParameter(e);case K.operator:return this.formatOperator(e);case K.comma:return this.formatComma(e);case K.line_comment:return this.formatLineComment(e);case K.block_comment:return this.formatBlockComment(e);case K.disable_comment:return this.formatBlockComment(e);case K.data_type:return this.formatDataType(e);case K.keyword:return this.formatKeywordNode(e)}}formatFunctionCall(e){this.withComments(e.nameKw,()=>{this.layout.add(this.showFunctionKw(e.nameKw))}),this.formatNode(e.parenthesis)}formatParameterizedDataType(e){this.withComments(e.dataType,()=>{this.layout.add(this.showDataType(e.dataType))}),this.formatNode(e.parenthesis)}formatArraySubscript(e){let r;switch(e.array.type){case K.data_type:r=this.showDataType(e.array);break;case K.keyword:r=this.showKw(e.array);break;default:r=this.showIdentifier(e.array);break}this.withComments(e.array,()=>{this.layout.add(r)}),this.formatNode(e.parenthesis)}formatPropertyAccess(e){this.formatNode(e.object),this.layout.add(k.NO_SPACE,e.operator),this.formatNode(e.property)}formatParenthesis(e){let r=this.formatInlineExpression(e.children);r?(this.layout.add(e.openParen),this.layout.add(...r.getLayoutItems()),this.layout.add(k.NO_SPACE,e.closeParen,k.SPACE)):(this.layout.add(e.openParen,k.NEWLINE),Na(this.cfg)?(this.layout.add(k.INDENT),this.layout=this.formatSubExpression(e.children)):(this.layout.indentation.increaseBlockLevel(),this.layout.add(k.INDENT),this.layout=this.formatSubExpression(e.children),this.layout.indentation.decreaseBlockLevel()),this.layout.add(k.NEWLINE,k.INDENT,e.closeParen,k.SPACE))}formatBetweenPredicate(e){this.layout.add(this.showKw(e.betweenKw),k.SPACE),this.layout=this.formatSubExpression(e.expr1),this.layout.add(k.NO_SPACE,k.SPACE,this.showNonTabularKw(e.andKw),k.SPACE),this.layout=this.formatSubExpression(e.expr2),this.layout.add(k.SPACE)}formatCaseExpression(e){this.formatNode(e.caseKw),this.layout.indentation.increaseBlockLevel(),this.layout=this.formatSubExpression(e.expr),this.layout=this.formatSubExpression(e.clauses),this.layout.indentation.decreaseBlockLevel(),this.layout.add(k.NEWLINE,k.INDENT),this.formatNode(e.endKw)}formatCaseWhen(e){this.layout.add(k.NEWLINE,k.INDENT),this.formatNode(e.whenKw),this.layout=this.formatSubExpression(e.condition),this.formatNode(e.thenKw),this.layout=this.formatSubExpression(e.result)}formatCaseElse(e){this.layout.add(k.NEWLINE,k.INDENT),this.formatNode(e.elseKw),this.layout=this.formatSubExpression(e.result)}formatClause(e){this.isOnelineClause(e)?this.formatClauseInOnelineStyle(e):Na(this.cfg)?this.formatClauseInTabularStyle(e):this.formatClauseInIndentedStyle(e)}isOnelineClause(e){return Na(this.cfg)?this.dialectCfg.tabularOnelineClauses[e.nameKw.text]:this.dialectCfg.onelineClauses[e.nameKw.text]}formatClauseInIndentedStyle(e){this.layout.add(k.NEWLINE,k.INDENT,this.showKw(e.nameKw),k.NEWLINE),this.layout.indentation.increaseTopLevel(),this.layout.add(k.INDENT),this.layout=this.formatSubExpression(e.children),this.layout.indentation.decreaseTopLevel()}formatClauseInOnelineStyle(e){this.layout.add(k.NEWLINE,k.INDENT,this.showKw(e.nameKw),k.SPACE),this.layout=this.formatSubExpression(e.children)}formatClauseInTabularStyle(e){this.layout.add(k.NEWLINE,k.INDENT,this.showKw(e.nameKw),k.SPACE),this.layout.indentation.increaseTopLevel(),this.layout=this.formatSubExpression(e.children),this.layout.indentation.decreaseTopLevel()}formatSetOperation(e){this.layout.add(k.NEWLINE,k.INDENT,this.showKw(e.nameKw),k.NEWLINE),this.layout.add(k.INDENT),this.layout=this.formatSubExpression(e.children)}formatLimitClause(e){this.withComments(e.limitKw,()=>{this.layout.add(k.NEWLINE,k.INDENT,this.showKw(e.limitKw))}),this.layout.indentation.increaseTopLevel(),Na(this.cfg)?this.layout.add(k.SPACE):this.layout.add(k.NEWLINE,k.INDENT),e.offset?(this.layout=this.formatSubExpression(e.offset),this.layout.add(k.NO_SPACE,",",k.SPACE),this.layout=this.formatSubExpression(e.count)):this.layout=this.formatSubExpression(e.count),this.layout.indentation.decreaseTopLevel()}formatAllColumnsAsterisk(e){this.layout.add("*",k.SPACE)}formatLiteral(e){this.layout.add(e.text,k.SPACE)}formatIdentifier(e){this.layout.add(this.showIdentifier(e),k.SPACE)}formatParameter(e){this.layout.add(this.params.get(e),k.SPACE)}formatOperator({text:e}){this.cfg.denseOperators||this.dialectCfg.alwaysDenseOperators.includes(e)?this.layout.add(k.NO_SPACE,e):e===":"?this.layout.add(k.NO_SPACE,e,k.SPACE):this.layout.add(e,k.SPACE)}formatComma(e){this.inline?this.layout.add(k.NO_SPACE,",",k.SPACE):this.layout.add(k.NO_SPACE,",",k.NEWLINE,k.INDENT)}withComments(e,r){this.formatComments(e.leadingComments),r(),this.formatComments(e.trailingComments)}formatComments(e){e&&e.forEach(r=>{r.type===K.line_comment?this.formatLineComment(r):this.formatBlockComment(r)})}formatLineComment(e){aR(e.precedingWhitespace||"")?this.layout.add(k.NEWLINE,k.INDENT,e.text,k.MANDATORY_NEWLINE,k.INDENT):this.layout.getLayoutItems().length>0?this.layout.add(k.NO_NEWLINE,k.SPACE,e.text,k.MANDATORY_NEWLINE,k.INDENT):this.layout.add(e.text,k.MANDATORY_NEWLINE,k.INDENT)}formatBlockComment(e){e.type===K.block_comment&&this.isMultilineBlockComment(e)?(this.splitBlockComment(e.text).forEach(r=>{this.layout.add(k.NEWLINE,k.INDENT,r)}),this.layout.add(k.NEWLINE,k.INDENT)):this.layout.add(e.text,k.SPACE)}isMultilineBlockComment(e){return aR(e.text)||aR(e.precedingWhitespace||"")}isDocComment(e){let r=e.split(/\n/);return/^\/\*\*?$/.test(r[0])&&r.slice(1,r.length-1).every(n=>/^\s*\*/.test(n))&&/^\s*\*\/$/.test(no(r))}splitBlockComment(e){return this.isDocComment(e)?e.split(/\n/).map(r=>/^\s*\*/.test(r)?" "+r.replace(/^\s*/,""):r):e.split(/\n/).map(r=>r.replace(/^\s*/,""))}formatSubExpression(e){return new t({cfg:this.cfg,dialectCfg:this.dialectCfg,params:this.params,layout:this.layout,inline:this.inline}).format(e)}formatInlineExpression(e){let r=this.params.getPositionalParameterIndex();try{return new t({cfg:this.cfg,dialectCfg:this.dialectCfg,params:this.params,layout:new af(this.cfg.expressionWidth),inline:!0}).format(e)}catch(n){if(n instanceof bc){this.params.setPositionalParameterIndex(r);return}else throw n}}formatKeywordNode(e){switch(e.tokenType){case $.RESERVED_JOIN:return this.formatJoin(e);case $.AND:case $.OR:case $.XOR:return this.formatLogicalOperator(e);default:return this.formatKeyword(e)}}formatJoin(e){Na(this.cfg)?(this.layout.indentation.decreaseTopLevel(),this.layout.add(k.NEWLINE,k.INDENT,this.showKw(e),k.SPACE),this.layout.indentation.increaseTopLevel()):this.layout.add(k.NEWLINE,k.INDENT,this.showKw(e),k.SPACE)}formatKeyword(e){this.layout.add(this.showKw(e),k.SPACE)}formatLogicalOperator(e){this.cfg.logicalOperatorNewline==="before"?Na(this.cfg)?(this.layout.indentation.decreaseTopLevel(),this.layout.add(k.NEWLINE,k.INDENT,this.showKw(e),k.SPACE),this.layout.indentation.increaseTopLevel()):this.layout.add(k.NEWLINE,k.INDENT,this.showKw(e),k.SPACE):this.layout.add(this.showKw(e),k.NEWLINE,k.INDENT)}formatDataType(e){this.layout.add(this.showDataType(e),k.SPACE)}showKw(e){return _b(e.tokenType)?hR(this.showNonTabularKw(e),this.cfg.indentStyle):this.showNonTabularKw(e)}showNonTabularKw(e){switch(this.cfg.keywordCase){case"preserve":return Oc(e.raw);case"upper":return e.text;case"lower":return e.text.toLowerCase()}}showFunctionKw(e){return _b(e.tokenType)?hR(this.showNonTabularFunctionKw(e),this.cfg.indentStyle):this.showNonTabularFunctionKw(e)}showNonTabularFunctionKw(e){switch(this.cfg.functionCase){case"preserve":return Oc(e.raw);case"upper":return e.text;case"lower":return e.text.toLowerCase()}}showIdentifier(e){if(e.quoted)return e.text;switch(this.cfg.identifierCase){case"preserve":return e.text;case"upper":return e.text.toUpperCase();case"lower":return e.text.toLowerCase()}}showDataType(e){switch(this.cfg.dataTypeCase){case"preserve":return Oc(e.raw);case"upper":return e.text;case"lower":return e.text.toLowerCase()}}}});var cf,gK=H(()=>{Sb();aK();AK();IK();ER();gb();cf=class{constructor(e,r){this.dialect=e,this.cfg=r,this.params=new of(this.cfg.params)}format(e){let r=this.parse(e);return this.formatAst(r).trimEnd()}parse(e){return RK(this.dialect.tokenizer).parse(e,this.cfg.paramTypes||{})}formatAst(e){return e.map(r=>this.formatStatement(r)).join(`
`.repeat(this.cfg.linesBetweenQueries+1))}formatStatement(e){let r=new lf({cfg:this.cfg,dialectCfg:this.dialect.formatOptions,params:this.params,layout:new ya(new ba(oK(this.cfg)))}).format(e.children);return e.hasSemicolon&&(this.cfg.newlineBeforeSemicolon?r.add(k.NEWLINE,";"):r.add(k.NO_NEWLINE,";")),r.toString()}}});function NK(t){let e=["multilineLists","newlineBeforeOpenParen","newlineBeforeCloseParen","aliasAs","commaPosition","tabulateAlias"];for(let r of e)if(r in t)throw new hs(`${r} config is no more supported.`);if(t.expressionWidth<=0)throw new hs(`expressionWidth config must be positive number. Received ${t.expressionWidth} instead.`);if(t.params&&!Xwe(t.params)&&console.warn('WARNING: All "params" option values should be strings.'),t.paramTypes&&!jwe(t.paramTypes))throw new hs("Empty regex given in custom paramTypes. That would result in matching infinite amount of parameters.");return t}function Xwe(t){return(t instanceof Array?t:Object.values(t)).every(r=>typeof r=="string")}function jwe(t){return t.custom&&Array.isArray(t.custom)?t.custom.every(e=>e.regex!==""):!0}var hs,Nb=H(()=>{hs=class extends Error{}});var zwe,OK,Ob,Kwe,CK,Cb,yK=H(()=>{Yz();sK();gK();Nb();zwe=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},OK={bigquery:"bigquery",db2:"db2",db2i:"db2i",duckdb:"duckdb",hive:"hive",mariadb:"mariadb",mysql:"mysql",n1ql:"n1ql",plsql:"plsql",postgresql:"postgresql",redshift:"redshift",spark:"spark",sqlite:"sqlite",sql:"sql",tidb:"tidb",trino:"trino",transactsql:"transactsql",tsql:"transactsql",singlestoredb:"singlestoredb",snowflake:"snowflake"},Ob=Object.keys(OK),Kwe={tabWidth:2,useTabs:!1,keywordCase:"preserve",identifierCase:"preserve",dataTypeCase:"preserve",functionCase:"preserve",indentStyle:"standard",logicalOperatorNewline:"before",expressionWidth:50,linesBetweenQueries:1,denseOperators:!1,newlineBeforeSemicolon:!1},CK=(t,e={})=>{if(typeof e.language=="string"&&!Ob.includes(e.language))throw new hs(`Unsupported SQL dialect: ${e.language}`);let r=OK[e.language||"sql"];return Cb(t,Object.assign(Object.assign({},e),{dialect:lb[r]}))},Cb=(t,e)=>{var{dialect:r}=e,n=zwe(e,["dialect"]);if(typeof t!="string")throw new Error("Invalid query argument. Expected string, instead got "+typeof t);let i=NK(Object.assign(Object.assign({},Kwe),n));return new cf(iK(r),i).format(t)}});var bK={};_t(bK,{ConfigError:()=>hs,bigquery:()=>kS,db2:()=>$S,db2i:()=>YS,duckdb:()=>VS,expandPhrases:()=>x,format:()=>CK,formatDialect:()=>Cb,hive:()=>qS,mariadb:()=>XS,mysql:()=>jS,n1ql:()=>KS,plsql:()=>JS,postgresql:()=>QS,redshift:()=>ZS,singlestoredb:()=>sR,snowflake:()=>oR,spark:()=>eR,sql:()=>rR,sqlite:()=>tR,supportedDialects:()=>Ob,tidb:()=>zS,transactsql:()=>iR,trino:()=>nR});var wK=H(()=>{yK();xt();Nb();Cy();by();Ly();Py();My();Uy();Fy();Hy();Wy();$y();Vy();Xy();zy();Jy();Zy();tb();nb();sb();ab()});var MK={};_t(MK,{ExplainPlanView:()=>yb,parseExplainOutput:()=>Jwe});function Jwe(t){let e=t.split(`
`).filter(d=>d.trim()),r=t.includes("QUERY VERBOSE PLAN:")||t.includes("Node 1."),n=e.map(d=>d.replace(/^NOTICE:\s*/i,"").trim()).filter(d=>d&&!d.startsWith("QUERY PLAN")&&!d.startsWith("QUERY VERBOSE")),i=[],s=[],o=0,a=0,l=n.findIndex(d=>d.includes("PLANTEXT:")),c=l>=0?n.slice(l+1).filter(d=>!d.startsWith("(")&&!d.includes("locus=")):n,u=[];for(let d of c){if(!d.trim()||d.startsWith("(xpath_")||d.includes("locus="))continue;let E=d.match(/^(\s*)/)?.[1]?.length||0,f=Math.floor(E/3),T=d.match(/^[\s]*(?:[lr]:\s*)?([\w\s-]+?)(?:\s+table\s+"(\w+)")?(?:\s+{[^}]*})?\s*\(cost=([\d.]+)\.\.([\d.]+)\s+rows=(\d+)\s+width=(\d+)\s+conf=([\d.]+)\)/i);if(T){let[,h,p,S,m,R,A,g]=T,w=h.trim(),I={id:++o,type:w,table:p,cost:{start:parseFloat(S),end:parseFloat(m)},rows:parseInt(R),width:parseInt(A),confidence:parseFloat(g),indent:f,children:[],raw:d.trim(),warnings:[]};for(Qwe(I),s.push(...I.warnings),I.cost.end>a&&(a=I.cost.end);u.length>0&&u[u.length-1].indent>=f;)u.pop();u.length>0?u[u.length-1].children.push(I):i.push(I),u.push(I)}}return{nodes:i,rawText:t,isVerbose:r,totalCost:a,warnings:s}}function Qwe(t){t.type.includes("Sequential Scan")&&t.rows>5e5&&t.warnings.push({type:"warning",message:`Sequential Scan on ${t.table||"table"} (${t.rows.toLocaleString()} rows) - consider adding an index`,icon:"\u26A0\uFE0F"}),t.type.includes("Nested Loop")&&t.rows>1e5&&t.warnings.push({type:"critical",message:`Nested Loop producing ${t.rows.toLocaleString()} rows - potential performance issue`,icon:"\u{1F534}"}),t.cost.end>1e10?t.warnings.push({type:"critical",message:`Very high estimated cost: ${t.cost.end.toExponential(2)}`,icon:"\u{1F534}"}):t.cost.end>1e7&&t.warnings.push({type:"warning",message:`High estimated cost: ${t.cost.end.toLocaleString()}`,icon:"\u26A0\uFE0F"}),t.confidence===0&&t.warnings.push({type:"info",message:"Low confidence estimate (conf=0) - statistics may be outdated",icon:"\u2139\uFE0F"})}function Zwe(t){return t.includes("Sequential Scan")?"#e74c3c":t.includes("Index Scan")?"#27ae60":t.includes("Nested Loop")?"#e67e22":t.includes("Hash Join")?"#3498db":t.includes("Merge Join")?"#9b59b6":t.includes("Aggregate")?"#1abc9c":t.includes("Group")?"#16a085":t.includes("Sort")?"#f39c12":t.includes("Limit")?"#95a5a6":t.includes("Sub-query")?"#34495e":"#7f8c8d"}function PK(t,e=0){return t.map(r=>{let n=r.children.length>0,i=Zwe(r.type),s=r.warnings.map(o=>`<span class="warning-badge warning-${o.type}" title="${o.message}">${o.icon}</span>`).join("");return`
        <div class="plan-node" style="--node-color: ${i}">
            <div class="node-header">
                ${n?'<span class="toggle-btn">\u25BC</span>':'<span class="toggle-spacer"></span>'}
                <span class="node-type" style="background-color: ${i}">${r.type}</span>
                ${r.table?`<span class="node-table">${r.table}${r.alias?` (${r.alias})`:""}</span>`:""}
                ${s}
            </div>
            <div class="node-metrics">
                <span class="metric"><b>Cost:</b> ${LK(r.cost.start)}..${LK(r.cost.end)}</span>
                <span class="metric"><b>Rows:</b> ${r.rows.toLocaleString()}</span>
                <span class="metric"><b>Width:</b> ${r.width}</span>
                <span class="metric ${r.confidence===0?"low-conf":""}"><b>Conf:</b> ${r.confidence}%</span>
            </div>
            ${n?`<div class="node-children">${PK(r.children,e+1)}</div>`:""}
        </div>`}).join("")}function LK(t){return t>1e6?t.toExponential(1):t.toLocaleString(void 0,{maximumFractionDigits:1})}function xK(t){return t.reduce((e,r)=>e+1+xK(r.children),0)}function DK(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function eLe(){let t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let r=0;r<32;r++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}var Nn,yb,vK=H(()=>{"use strict";Nn=q(require("vscode"));yb=class t{constructor(e,r,n,i){this._disposables=[];this._panel=e,this._extensionUri=r,this._update(n,i),this._panel.onDidDispose(()=>this.dispose(),null,this._disposables),this._panel.webview.onDidReceiveMessage(s=>{switch(s.command){case"copyPlan":Nn.env.clipboard.writeText(n.rawText),Nn.window.showInformationMessage("Plan copied to clipboard");return}},null,this._disposables)}static{this.viewType="netezza.explainPlan"}static createOrShow(e,r,n){let i=Nn.window.activeTextEditor?Nn.ViewColumn.Beside:void 0,s=Nn.window.createWebviewPanel(t.viewType,"Query Execution Plan",i||Nn.ViewColumn.One,{enableScripts:!0,localResourceRoots:[Nn.Uri.joinPath(e,"media")],retainContextWhenHidden:!0});new t(s,e,r,n)}dispose(){for(this._panel.dispose();this._disposables.length;){let e=this._disposables.pop();e&&e.dispose()}}_update(e,r){this._panel.title="Query Execution Plan",this._panel.webview.html=this._getHtmlForWebview(e,r)}_getHtmlForWebview(e,r){let n=this._panel.webview.asWebviewUri(Nn.Uri.joinPath(this._extensionUri,"media","explainPlan.css")),i=eLe(),s=DK(r);return`<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Security-Policy" content="default-src 'none'; style-src ${this._panel.webview.cspSource} 'unsafe-inline'; script-src 'nonce-${i}';">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="${n}" rel="stylesheet">
    <title>Query Execution Plan</title>
</head>
<body>
    <div class="container">
        <div class="header">
            <h2>Query Execution Plan</h2>
            <div class="header-actions">
                <button id="copyBtn" class="btn">\u{1F4CB} Copy Plan</button>
                <button id="expandAllBtn" class="btn">\u2795 Expand All</button>
                <button id="collapseAllBtn" class="btn">\u2796 Collapse All</button>
            </div>
        </div>

        ${e.warnings.length>0?`
        <div class="warnings-summary">
            <h3>\u26A0\uFE0F Performance Issues Detected (${e.warnings.length})</h3>
            <ul>
                ${e.warnings.map(o=>`<li class="warning-${o.type}">${o.icon} ${o.message}</li>`).join("")}
            </ul>
        </div>
        `:`
        <div class="no-warnings">
            <span>\u2705 No obvious performance issues detected</span>
        </div>
        `}

        <div class="stats-bar">
            <div class="stat">
                <span class="stat-label">Total Cost:</span>
                <span class="stat-value">${e.totalCost>1e6?e.totalCost.toExponential(2):e.totalCost.toLocaleString()}</span>
            </div>
            <div class="stat">
                <span class="stat-label">Nodes:</span>
                <span class="stat-value">${xK(e.nodes)}</span>
            </div>
        </div>

        <div class="query-section">
            <h3>Query</h3>
            <pre class="query-text">${s}</pre>
        </div>

        <div class="plan-section">
            <h3>Execution Plan</h3>
            <div id="planTree" class="plan-tree">
                ${PK(e.nodes)}
            </div>
        </div>

        <div class="raw-section">
            <details>
                <summary>Raw Plan Output</summary>
                <pre class="raw-plan">${DK(e.rawText)}</pre>
            </details>
        </div>
    </div>

    <script nonce="${i}">
        const vscode = acquireVsCodeApi();
        
        document.getElementById('copyBtn').addEventListener('click', () => {
            vscode.postMessage({ command: 'copyPlan' });
        });

        document.getElementById('expandAllBtn').addEventListener('click', () => {
            document.querySelectorAll('.node-children').forEach(el => el.style.display = 'block');
            document.querySelectorAll('.toggle-btn').forEach(el => el.textContent = '\u25BC');
        });

        document.getElementById('collapseAllBtn').addEventListener('click', () => {
            document.querySelectorAll('.node-children').forEach(el => el.style.display = 'none');
            document.querySelectorAll('.toggle-btn').forEach(el => el.textContent = '\u25B6');
        });

        document.querySelectorAll('.toggle-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                const node = e.target.closest('.plan-node');
                const children = node.querySelector('.node-children');
                if (children) {
                    const isHidden = children.style.display === 'none';
                    children.style.display = isHidden ? 'block' : 'none';
                    e.target.textContent = isHidden ? '\u25BC' : '\u25B6';
                }
            });
        });
    </script>
</body>
</html>`}}});var sLe={};_t(sLe,{activate:()=>nLe,deactivate:()=>iLe});module.exports=Ma(sLe);var z=q(require("vscode"));lr();YR();var zr=q(require("vscode")),qf=class t{constructor(e,r,n){this.extensionUri=r;this.connectionManager=n;this._disposables=[];this._panel=e,this._panel.onDidDispose(()=>this.dispose(),null,this._disposables),this._panel.webview.html=this._getHtmlForWebview(this._panel.webview),this._panel.webview.onDidReceiveMessage(async i=>{switch(i.command){case"save":try{await this.connectionManager.saveConnection(i.data),zr.window.showInformationMessage(`Connection '${i.data.name}' saved and activated!`),this.sendConnectionsToWebview()}catch(s){let o=s instanceof Error?s.message:String(s);zr.window.showErrorMessage(`Error saving: ${o}`)}return;case"delete":try{await zr.window.showWarningMessage(`Are you sure you want to delete '${i.name}'?`,{modal:!0},"Yes","No")==="Yes"&&(await this.connectionManager.deleteConnection(i.name),zr.window.showInformationMessage(`Connection '${i.name}' deleted.`),this.sendConnectionsToWebview())}catch(s){let o=s instanceof Error?s.message:String(s);zr.window.showErrorMessage(`Error deleting: ${o}`)}return;case"loadConnections":this.sendConnectionsToWebview();return}},null,this._disposables)}async sendConnectionsToWebview(){let e=await this.connectionManager.getConnections(),r=this.connectionManager.getActiveConnectionName();await this._panel.webview.postMessage({command:"updateConnections",connections:e,activeName:r})}static createOrShow(e,r){let n=zr.window.activeTextEditor?zr.window.activeTextEditor.viewColumn:void 0;if(t.currentPanel){t.currentPanel._panel.reveal(n);return}let i=zr.window.createWebviewPanel("netezzaLogin","Connect to Netezza",n||zr.ViewColumn.One,{enableScripts:!0,retainContextWhenHidden:!0});t.currentPanel=new t(i,e,r)}dispose(){for(t.currentPanel=void 0,this._panel.dispose();this._disposables.length;){let e=this._disposables.pop();e&&e.dispose()}}_getHtmlForWebview(e){let r=e.asWebviewUri(zr.Uri.joinPath(this.extensionUri,"netezza_icon64.png"));return`<!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>Connect to Netezza</title>
            <style>
                :root {
                    --container-paddding: 20px;
                    --input-padding-vertical: 6px;
                    --input-padding-horizontal: 8px;
                    --input-margin-vertical: 4px;
                    --input-margin-horizontal: 0;
                }
                body {
                    font-family: var(--vscode-font-family);
                    padding: 0;
                    margin: 0;
                    color: var(--vscode-foreground);
                    background-color: var(--vscode-editor-background);
                    display: flex;
                    height: 100vh;
                    overflow: hidden;
                }
                
                /* Sidebar */
                .sidebar {
                    width: 260px;
                    background-color: var(--vscode-sideBar-background);
                    border-right: 1px solid var(--vscode-panel-border);
                    display: flex;
                    flex-direction: column;
                    flex-shrink: 0;
                    user-select: none;
                }
                .sidebar-header {
                    padding: 10px 15px;
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    border-bottom: 1px solid var(--vscode-panel-border);
                    background-color: var(--vscode-sideBarSectionHeader-background);
                }
                .sidebar-title {
                    font-weight: bold;
                    font-size: 11px;
                    text-transform: uppercase;
                    color: var(--vscode-sideBarTitle-foreground);
                }
                .connection-list {
                    flex: 1;
                    overflow-y: auto;
                    padding: 0;
                }
                .connection-item {
                    padding: 8px 15px;
                    cursor: pointer;
                    display: flex;
                    align-items: center;
                    border-left: 3px solid transparent;
                    color: var(--vscode-sideBar-foreground);
                }
                .connection-item:hover {
                    background-color: var(--vscode-list-hoverBackground);
                }
                .connection-item.active {
                    background-color: var(--vscode-list-activeSelectionBackground);
                    color: var(--vscode-list-activeSelectionForeground);
                    border-left-color: var(--vscode-focusBorder);
                }
                .connection-item .name {
                    flex: 1;
                    overflow: hidden;
                    text-overflow: ellipsis;
                    white-space: nowrap;
                    display: flex;
                    align-items: center;
                    gap: 8px;
                }
                .connection-item .status {
                    font-size: 0.8em;
                    margin-left: 5px;
                    opacity: 0.7;
                }

                /* Main Content */
                .main {
                    flex: 1;
                    padding: 40px;
                    overflow-y: auto;
                    display: flex;
                    justify-content: center;
                    align-items: flex-start;
                }
                .form-container {
                    width: 100%;
                    max-width: 500px;
                    background-color: var(--vscode-editorWidget-background);
                    border: 1px solid var(--vscode-widget-border);
                    padding: 30px;
                    border-radius: 4px;
                    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
                }
                
                h2 {
                    margin-top: 0;
                    margin-bottom: 25px;
                    font-size: 1.4em;
                    font-weight: 500;
                    padding-bottom: 10px;
                    border-bottom: 1px solid var(--vscode-panel-border);
                    display: flex;
                    align-items: center;
                    gap: 10px;
                }

                .form-group {
                    margin-bottom: 18px;
                }
                .form-row {
                    display: flex;
                    gap: 15px;
                }
                .form-col {
                    flex: 1;
                }

                label {
                    display: block;
                    margin-bottom: 6px;
                    font-weight: 600;
                    font-size: 12px;
                    color: var(--vscode-input-placeholderForeground);
                    display: flex;
                    align-items: center;
                    gap: 6px;
                }

                input, select {
                    width: 100%;
                    padding: 8px 10px;
                    box-sizing: border-box;
                    background: var(--vscode-input-background);
                    color: var(--vscode-input-foreground);
                    border: 1px solid var(--vscode-input-border);
                    border-radius: 2px;
                    font-family: inherit;
                    font-size: 13px;
                }
                input:focus, select:focus {
                    border-color: var(--vscode-focusBorder);
                    outline: 1px solid var(--vscode-focusBorder);
                }
                
                /* Buttons */
                .actions {
                    margin-top: 30px;
                    display: flex;
                    gap: 12px;
                    padding-top: 20px;
                    border-top: 1px solid var(--vscode-panel-border);
                }
                button {
                    background: var(--vscode-button-background);
                    color: var(--vscode-button-foreground);
                    padding: 8px 16px;
                    border: none;
                    cursor: pointer;
                    border-radius: 2px;
                    font-size: 13px;
                    font-weight: 500;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                }
                button:hover {
                    background: var(--vscode-button-hoverBackground);
                }
                button.secondary {
                    background: var(--vscode-button-secondaryBackground);
                    color: var(--vscode-button-secondaryForeground);
                }
                button.secondary:hover {
                    background: var(--vscode-button-secondaryHoverBackground);
                }
                button.danger {
                    background: var(--vscode-errorForeground);
                    color: white;
                }
                button.icon-btn {
                    padding: 4px;
                    background: transparent;
                    color: var(--vscode-icon-foreground);
                }
                button.icon-btn:hover {
                    background: var(--vscode-toolbar-hoverBackground);
                }

                .icon-img {
                    width: 16px;
                    height: 16px;
                    object-fit: contain;
                }
                .logo-header {
                    width: 32px;
                    height: 32px;
                    margin-right: 10px;
                }

            </style>
        </head>
        <body>
            <div class="sidebar">
                <div class="sidebar-header">
                    <span class="sidebar-title">Saved Connections</span>
                    <button class="icon-btn" id="btnNew" title="New Connection">
                        <svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M14 7v1H8v6H7V8H1V7h6V1h1v6h6z"/></svg>
                    </button>
                </div>
                <div id="connectionList" class="connection-list"></div>
            </div>
            
            <div class="main">
                <div class="form-container">
                    <h2 id="formTitle">
                        <img src="${r}" class="logo-header" />
                        New Connection
                    </h2>
                    
                    <div class="form-group">
                        <label for="name">Connection Name</label>
                        <input type="text" id="name" placeholder="Friendly name (e.g. Production)">
                    </div>

                    <div class="form-group">
                        <label for="dbType">
                            Database Type 
                            <img src="${r}" class="icon-img" />
                        </label>
                        <select id="dbType">
                            <option value="NetezzaSQL">NetezzaSQL</option>
                        </select>
                    </div>

                    <div class="form-row">
                        <div class="form-col">
                            <div class="form-group">
                                <label for="host">Host</label>
                                <input type="text" id="host" placeholder="Hostname or IP">
                            </div>
                        </div>
                        <div class="form-col" style="flex: 0 0 80px;">
                            <div class="form-group">
                                <label for="port">Port</label>
                                <input type="number" id="port" value="5480">
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="database">
                            Database
                        </label>
                        <input type="text" id="database" placeholder="Database name" value="system">
                    </div>

                    <div class="form-row">
                         <div class="form-col">
                            <div class="form-group">
                                <label for="user">User</label>
                                <input type="text" id="user" placeholder="Username">
                            </div>
                         </div>
                         <div class="form-col">
                            <div class="form-group">
                                <label for="password">Password</label>
                                <input type="password" id="password" placeholder="Password">
                            </div>
                         </div>
                    </div>
                    
                    <div class="actions">
                        <button id="btnSave" onclick="save()">Save & Connect</button>
                        <button id="btnDelete" class="danger" onclick="del()" style="display: none;">Delete</button>
                    </div>
                </div>
            </div>

            <script>
                const vscode = acquireVsCodeApi();
                let connections = [];
                let activeName = null;
                let currentEditName = null;
                const iconSrc = "${r}";

                // Load initial data
                window.addEventListener('message', event => {
                    const message = event.data;
                    switch (message.command) {
                        case 'updateConnections':
                            connections = message.connections;
                            activeName = message.activeName;
                            renderList();
                            break;
                    }
                });
                
                vscode.postMessage({ command: 'loadConnections' });

                document.getElementById('btnNew').addEventListener('click', () => {
                    clearForm();
                });

                function renderList() {
                    const list = document.getElementById('connectionList');
                    list.innerHTML = '';
                    
                    connections.forEach(conn => {
                        const div = document.createElement('div');
                        div.className = 'connection-item';
                        if (conn.name === currentEditName) {
                             div.classList.add('active');
                        }
                        
                        div.innerHTML = \`<span class="name"><img src="\${iconSrc}" class="icon-img"> \${conn.name}</span>\`;
                        if (conn.name === activeName) {
                            div.innerHTML += \`<span class="status">\u25CF</span>\`;
                            div.title = 'Active Connection';
                        }
                        
                        div.onclick = () => loadForm(conn);
                        list.appendChild(div);
                    });
                }

                function loadForm(conn) {
                    currentEditName = conn.name;
                    document.getElementById('formTitle').innerHTML = \`<img src="\${iconSrc}" class="logo-header" /> Edit Connection\`;
                    document.getElementById('name').value = conn.name;
                    document.getElementById('dbType').value = conn.dbType || 'NetezzaSQL';
                    document.getElementById('host').value = conn.host;
                    document.getElementById('port').value = conn.port;
                    document.getElementById('database').value = conn.database;
                    document.getElementById('user').value = conn.user;
                    document.getElementById('password').value = conn.password || ''; 
                    
                    document.getElementById('btnDelete').style.display = 'block';
                    renderList();
                }

                function clearForm() {
                    currentEditName = null;
                    document.getElementById('formTitle').innerHTML = \`<img src="\${iconSrc}" class="logo-header" /> New Connection\`;
                    document.getElementById('name').value = '';
                    document.getElementById('dbType').value = 'NetezzaSQL';
                    document.getElementById('host').value = '';
                    document.getElementById('port').value = '5480';
                    document.getElementById('database').value = 'system';
                    document.getElementById('user').value = '';
                    document.getElementById('password').value = '';
                    
                    document.getElementById('btnDelete').style.display = 'none';
                    renderList();
                }

                function save() {
                    const name = document.getElementById('name').value;
                    if (!name) {
                        return; // Add validation UI?
                    }
                    
                    const data = {
                        name: name,
                        dbType: document.getElementById('dbType').value,
                        host: document.getElementById('host').value,
                        port: parseInt(document.getElementById('port').value),
                        database: document.getElementById('database').value,
                        user: document.getElementById('user').value,
                        password: document.getElementById('password').value
                    };
                    
                    vscode.postMessage({
                        command: 'save',
                        data: data
                    });
                }

                function del() {
                    if (currentEditName) {
                        vscode.postMessage({
                            command: 'delete',
                            name: currentEditName
                        });
                    }
                }
            </script>
        </body>
        </html>`}};var he=q(require("vscode"));lr();lr();function b8(t,e,r){return`SELECT description FROM ${t}.._v_object_data WHERE objtype='TABLE' AND objname='${r}' AND schema='${e}'`}function jR(t,e,r){return`
        SELECT 
            X.ATTNAME
            , X.FORMAT_TYPE
            , CASE WHEN X.ATTNOTNULL THEN 1 ELSE 0 END AS IS_NOT_NULL
            , X.COLDEFAULT
            , COALESCE(X.DESCRIPTION, '') AS DESCRIPTION
            , MAX(CASE WHEN K.CONTYPE = 'p' THEN 1 ELSE 0 END) AS IS_PK
            , MAX(CASE WHEN K.CONTYPE = 'f' THEN 1 ELSE 0 END) AS IS_FK
        FROM
            ${t}.._V_RELATION_COLUMN X
        INNER JOIN
            ${t}.._V_OBJECT_DATA O ON X.OBJID = O.OBJID
        LEFT JOIN
            ${t}.._V_RELATION_KEYDATA K 
            ON UPPER(K.RELATION) = UPPER(O.OBJNAME) 
            AND UPPER(K.SCHEMA) = UPPER(O.SCHEMA)
            AND UPPER(K.ATTNAME) = UPPER(X.ATTNAME)
            AND K.CONTYPE IN ('p', 'f')
        WHERE
            UPPER(O.OBJNAME) = UPPER('${r}')
            AND UPPER(O.DBNAME) = UPPER('${t}')
            AND UPPER(O.SCHEMA) = UPPER('${e}')
        GROUP BY 
            X.ATTNAME, X.FORMAT_TYPE, X.ATTNOTNULL, X.COLDEFAULT, X.DESCRIPTION, X.ATTNUM
        ORDER BY 
            X.ATTNUM
    `}function w8(t){let e=!1,r=t.IS_NOT_NULL;return typeof r=="boolean"?e=r:typeof r=="number"?e=r===1:typeof r=="string"&&(e=r==="1"||r.toLowerCase()==="true"||r.toLowerCase()==="t"),{attname:t.ATTNAME,formatType:t.FORMAT_TYPE,isNotNull:e,colDefault:t.COLDEFAULT||null,description:t.DESCRIPTION||"",isPk:Number(t.IS_PK)===1,isFk:Number(t.IS_FK)===1}}function L8(t){if(!t)return null;let e=Ee(t);return e.length>0&&e[0].DESCRIPTION?e[0].DESCRIPTION:null}function zR(t){if(!t)return[];try{return Ee(t).map(w8)}catch(e){return console.error("[TableMetadataProvider] Error parsing column metadata:",e),[]}}async function ow(t,e,r,n){let i=b8(e,r,n),s=jR(e,r,n),[o,a]=await Promise.all([t(i),t(s)]);return{tableComment:L8(o),columns:zR(a)}}function aw(t){return t.map(e=>({ATTNAME:e.attname,FORMAT_TYPE:e.formatType,IS_NOT_NULL:e.isNotNull?1:0,COLDEFAULT:e.colDefault,DESCRIPTION:e.description,IS_PK:e.isPk?1:0,IS_FK:e.isFk?1:0}))}var Xf=class{constructor(e,r,n){this.context=e;this.connectionManager=r;this.metadataCache=n;this._onDidChangeTreeData=new he.EventEmitter;this.onDidChangeTreeData=this._onDidChangeTreeData.event;this.connectionManager.onDidChangeConnections(()=>this.refresh())}refresh(){this._onDidChangeTreeData.fire()}triggerDatabasePrefetch(e,r){this.metadataCache.hasConnectionPrefetchTriggered(e)||(console.log(`[SchemaProvider] Triggering connection prefetch for: ${e}`),this.metadataCache.triggerConnectionPrefetch(e,async n=>{try{return await oe(this.context,n,!0,this.connectionManager,e)}catch(i){console.error("[SchemaProvider] Prefetch query error:",i);return}}))}getTreeItem(e){return e}getParent(e){if(e.contextValue!=="serverInstance"){if(e.contextValue==="database")return new Jt(e.connectionName,he.TreeItemCollapsibleState.Collapsed,"serverInstance",void 0,void 0,void 0,void 0,void 0,e.connectionName,void 0);if(e.contextValue.startsWith("typeGroup"))return new Jt(e.dbName,he.TreeItemCollapsibleState.Collapsed,"database",e.dbName,void 0,void 0,void 0,void 0,e.connectionName);if(e.contextValue.startsWith("netezza:"))return new Jt(e.objType,he.TreeItemCollapsibleState.Collapsed,`typeGroup:${e.objType}`,e.dbName,e.objType,void 0,void 0,void 0,e.connectionName)}}async getChildren(e){if(e){if(e.contextValue==="serverInstance"){if(!e.connectionName)return[];let r=this.metadataCache.getDatabases(e.connectionName);if(r)return r.map(n=>new Jt(n.label||n.DATABASE,he.TreeItemCollapsibleState.Collapsed,"database",n.label||n.DATABASE,void 0,void 0,void 0,void 0,e.connectionName));try{let n=await oe(this.context,"SELECT DATABASE FROM system.._v_database ORDER BY DATABASE",!0,this.connectionManager,e.connectionName);if(!n)return[];let i=Ee(n),s=i.map(o=>({DATABASE:o.DATABASE,label:o.DATABASE,kind:9,detail:"Database"}));return this.metadataCache.setDatabases(e.connectionName,s),i.map(o=>new Jt(o.DATABASE,he.TreeItemCollapsibleState.Collapsed,"database",o.DATABASE,void 0,void 0,void 0,void 0,e.connectionName))}catch(n){let i=n instanceof Error?n.message:String(n);return he.window.showErrorMessage(`Failed to load databases for ${e.connectionName}: ${i}`),[]}}else if(e.contextValue==="database"){if(e.connectionName&&e.dbName&&this.triggerDatabasePrefetch(e.connectionName,e.dbName),e.connectionName&&e.dbName){let r=this.metadataCache.getTypeGroups(e.connectionName,e.dbName);if(r&&r.length>0)return r.map(n=>new Jt(n,he.TreeItemCollapsibleState.Collapsed,`typeGroup:${n}`,e.dbName,n,void 0,void 0,void 0,e.connectionName))}try{let r=`SELECT DISTINCT OBJTYPE FROM ${e.dbName}.._V_OBJECT_DATA WHERE DBNAME = '${e.dbName}' ORDER BY OBJTYPE`,n=await oe(this.context,r,!0,this.connectionManager,e.connectionName),i=n?Ee(n):[];if(e.connectionName&&e.dbName){let s=i.map(o=>o.OBJTYPE);this.metadataCache.setTypeGroups(e.connectionName,e.dbName,s)}return i.map(s=>new Jt(s.OBJTYPE,he.TreeItemCollapsibleState.Collapsed,`typeGroup:${s.OBJTYPE}`,e.dbName,s.OBJTYPE,void 0,void 0,void 0,e.connectionName))}catch(r){let n=r instanceof Error?r.message:String(r);return he.window.showErrorMessage("Failed to load object types: "+n),[]}}else if(e.contextValue.startsWith("typeGroup")){if(e.connectionName&&e.dbName&&(e.objType==="TABLE"||e.objType==="VIEW"||e.objType==="EXTERNAL TABLE")){let r=this.metadataCache.getObjectsWithSchema(e.connectionName,e.dbName);if(r&&r.length>0){let n=e.objType,i=r.filter(s=>{let o=s.item;return o.objType?o.objType===n:n==="VIEW"?o.kind===18:n==="TABLE"?o.kind!==18&&o.detail!=="EXTERNAL TABLE":n==="EXTERNAL TABLE"?o.detail==="EXTERNAL TABLE"||o.detail?.startsWith("EXTERNAL TABLE"):!1});if(i.length>0)return i.map(s=>{let o=s.item;return new Jt(typeof o.label=="string"?o.label:o.label?.label||"unknown",he.TreeItemCollapsibleState.Collapsed,`netezza:${e.objType}`,e.dbName,e.objType,s.schema,s.objId,void 0,e.connectionName)})}}try{let r;e.objType==="PROCEDURE"?r=`SELECT PROCEDURESIGNATURE AS OBJNAME, SCHEMA, OBJID::INT AS OBJID, COALESCE(DESCRIPTION, '') AS DESCRIPTION FROM ${e.dbName}.._V_PROCEDURE WHERE DATABASE = '${e.dbName}' ORDER BY PROCEDURESIGNATURE`:r=`SELECT OBJNAME, SCHEMA, OBJID, COALESCE(DESCRIPTION, '') AS DESCRIPTION FROM ${e.dbName}.._V_OBJECT_DATA WHERE DBNAME = '${e.dbName}' AND OBJTYPE = '${e.objType}' ORDER BY OBJNAME`;let n=await oe(this.context,r,!0,this.connectionManager,e.connectionName),i=n?Ee(n):[];if(e.connectionName&&e.dbName&&(e.objType==="TABLE"||e.objType==="VIEW")){let s=new Map;for(let o of i){let a=o.SCHEMA?`${e.dbName}.${o.SCHEMA}`:`${e.dbName}..`;s.has(a)||s.set(a,{tables:[],idMap:new Map});let l=s.get(a);l.tables.push({label:o.OBJNAME,kind:e.objType==="VIEW"?18:7,detail:o.SCHEMA?e.objType:`${e.objType} (${o.SCHEMA})`,sortText:o.OBJNAME});let c=o.SCHEMA?`${e.dbName}.${o.SCHEMA}.${o.OBJNAME}`:`${e.dbName}..${o.OBJNAME}`;o.OBJID!==void 0&&l.idMap.set(c,o.OBJID)}}return i.map(s=>{let a=["TABLE","VIEW","EXTERNAL TABLE","SYSTEM VIEW","SYSTEM TABLE"].includes(e.objType||"");return new Jt(s.OBJNAME,a?he.TreeItemCollapsibleState.Collapsed:he.TreeItemCollapsibleState.None,`netezza:${e.objType}`,e.dbName,e.objType,s.SCHEMA,s.OBJID,s.DESCRIPTION,e.connectionName)})}catch(r){let n=r instanceof Error?r.message:String(r);return he.window.showErrorMessage("Failed to load objects: "+n),[]}}else if(e.contextValue.startsWith("netezza:")){let r=e.label,n=e.schema,i=e.dbName;if(e.connectionName&&i){let s=`${i}.${n||""}.${r}`,o=this.metadataCache.getColumns(e.connectionName,s);if(o&&o.length>0&&o[0].isPk!==void 0)return o.map(a=>new Jt(a.detail?`${a.label||a.ATTNAME} (${a.detail})`:a.label||a.ATTNAME,he.TreeItemCollapsibleState.None,"column",e.dbName,void 0,void 0,void 0,a.documentation||"",e.connectionName,r,void 0,a.isPk,a.isFk))}if(!e.connectionName||!i)return[];try{let s=jR(i,n||"",r),o=await oe(this.context,s,!0,this.connectionManager,e.connectionName),a=zR(o),l=`${i}.${n||""}.${r}`,c=a.map(u=>({ATTNAME:u.attname,FORMAT_TYPE:u.formatType,label:u.attname,kind:5,detail:u.formatType,documentation:u.description,isPk:u.isPk,isFk:u.isFk}));return this.metadataCache.setColumns(e.connectionName,l,c),a.map(u=>new Jt(`${u.attname} (${u.formatType})`,he.TreeItemCollapsibleState.None,"column",e.dbName,void 0,void 0,void 0,u.description,e.connectionName,r,void 0,u.isPk,u.isFk))}catch(s){let o=s instanceof Error?s.message:String(s);return he.window.showErrorMessage("Failed to load columns: "+o),[]}}}else{let r=await this.connectionManager.getConnections(),n=he.Uri.file(this.context.asAbsolutePath("netezza_icon64.png"));return r.map(i=>new Jt(i.name,he.TreeItemCollapsibleState.Collapsed,"serverInstance",void 0,void 0,void 0,void 0,void 0,i.name,void 0,n))}return[]}},Jt=class extends he.TreeItem{constructor(r,n,i,s,o,a,l,c,u,d,E,f,T){super(r,n);this.label=r;this.collapsibleState=n;this.contextValue=i;this.dbName=s;this.objType=o;this.schema=a;this.objId=l;this.objectDescription=c;this.connectionName=u;this.parentName=d;this.isPk=f;this.isFk=T;let h=this.label;u&&(h+=`
[Server: ${u}]`),c&&c.trim()&&(h+=`

${c.trim()}`),a&&i.startsWith("netezza:")&&(h+=`

Schema: ${a}`),this.isPk&&(h+=`
\u{1F511} Primary Key`),this.isFk&&(h+=`
\u{1F517} Foreign Key`),this.tooltip=h,this.description=a?`(${a})`:"";let p=[u||"global",i,s||"",a||"",o||"",d||"",r,l?l.toString():""];this.id=p.join("|"),E?this.iconPath=E:i==="serverInstance"?this.iconPath=new he.ThemeIcon("server"):i==="database"?this.iconPath=new he.ThemeIcon("database"):i.startsWith("typeGroup")?this.iconPath=new he.ThemeIcon("folder"):i.startsWith("netezza:")?this.iconPath=this.getIconForType(o):i==="column"&&(this.isPk?this.iconPath=new he.ThemeIcon("key",new he.ThemeColor("charts.yellow")):this.isFk?this.iconPath=new he.ThemeIcon("link",new he.ThemeColor("charts.blue")):this.iconPath=new he.ThemeIcon("symbol-field"))}getIconForType(r){switch(r){case"TABLE":return new he.ThemeIcon("table");case"VIEW":return new he.ThemeIcon("eye");case"PROCEDURE":return new he.ThemeIcon("gear");case"FUNCTION":return new he.ThemeIcon("symbol-function");case"AGGREGATE":return new he.ThemeIcon("symbol-operator");case"EXTERNAL TABLE":return new he.ThemeIcon("server");default:return new he.ThemeIcon("file")}}};var we=q(require("vscode"));var Vr=q(require("vscode")),jf=class t{constructor(e,r,n){this._disposables=[];this._panel=e,this._extensionUri=r,this._update(n),this._panel.onDidDispose(()=>this.dispose(),null,this._disposables),this._panel.webview.onDidReceiveMessage(i=>{switch(i.command){case"alert":Vr.window.showErrorMessage(i.text);return;case"info":Vr.window.showInformationMessage(i.text);return}},null,this._disposables)}static{this.viewType="netezza.analysisPanel"}static createOrShow(e,r){let n=Vr.window.activeTextEditor?Vr.ViewColumn.Beside:void 0,i=Vr.window.createWebviewPanel(t.viewType,"Data Analysis",n||Vr.ViewColumn.One,{enableScripts:!0,localResourceRoots:[Vr.Uri.joinPath(e,"media")],retainContextWhenHidden:!0});new t(i,e,r)}dispose(){for(this._panel.dispose();this._disposables.length;){let e=this._disposables.pop();e&&e.dispose()}}_update(e){let r=this._panel.webview;this._panel.title="Data Analysis",this._panel.webview.html=this._getHtmlForWebview(r,e)}_getHtmlForWebview(e,r){let n=Vr.Uri.joinPath(this._extensionUri,"media","analysisPanel.js"),i=e.asWebviewUri(n),s=Vr.Uri.joinPath(this._extensionUri,"media","analysisPanel.css"),o=e.asWebviewUri(s),a=e.asWebviewUri(Vr.Uri.joinPath(this._extensionUri,"media","tanstack-table-core.js")),l=e.asWebviewUri(Vr.Uri.joinPath(this._extensionUri,"media","tanstack-virtual-core.js")),c=D8();return`<!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <meta http-equiv="Content-Security-Policy" content="default-src 'none'; style-src ${e.cspSource} 'unsafe-inline'; script-src 'nonce-${c}'; font-src ${e.cspSource};">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <link href="${o}" rel="stylesheet">

            <title>Data Analysis</title>
        </head>
        <body>
            <div id="app">
                <div class="sidebar">
                    <div class="section">
                        <h3>Fields</h3>
                        <div id="fieldList" class="field-list"></div>
                    </div>
                </div>
                <div class="main-content">
                    <div class="filter-section" style="margin-bottom: 15px; display: flex; gap: 10px; align-items: center;">
                        <label for="dataFilter" style="font-weight: bold;">Filter:</label>
                        <input type="text" id="dataFilter" placeholder="Type to filter data..." style="flex: 1; padding: 6px 10px; background: var(--vscode-input-background); color: var(--vscode-input-foreground); border: 1px solid var(--vscode-input-border); border-radius: 4px;">
                        <button id="applyFilter" style="padding: 6px 12px; cursor: pointer;">Apply</button>
                        <button id="clearFilter" style="padding: 6px 12px; cursor: pointer;">Clear</button>
                    </div>
                    <div class="config-zones">
                        <div class="zone-container">
                            <h4>Rows</h4>
                            <div id="rowsZone" class="drop-zone" data-zone="rows"></div>
                        </div>
                        <div class="zone-container">
                            <h4>Columns</h4>
                            <div id="colsZone" class="drop-zone" data-zone="cols"></div>
                        </div>
                        <div class="zone-container">
                            <h4>Values</h4>
                            <div id="valuesZone" class="drop-zone" data-zone="values"></div>
                        </div>
                    </div>
                    <div class="pivot-grid-container">
                        <div id="pivotGrid"></div>
                    </div>
                    <div class="chart-container" style="margin-top: 20px;">
                        <div class="chart-header" style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                            <h4 style="margin: 0;">Chart</h4>
                            <select id="chartType" style="padding: 4px;">
                                <option value="bar">Bar Chart</option>
                                <option value="line">Line Chart</option>
                            </select>
                        </div>
                        <canvas id="pivotChart" width="600" height="300" style="background: var(--vscode-editor-background); border: 1px solid var(--vscode-panel-border); border-radius: 4px;"></canvas>
                    </div>
                </div>
            </div>
            
            <script nonce="${c}" src="${a}"></script>
            <script nonce="${c}" src="${l}"></script>
            <script nonce="${c}">
                // Pass initial data to the script
                window.initialData = ${JSON.stringify(r)};
                window.TableCore = TableCore;
                window.VirtualCore = VirtualCore;
            </script>
            <script nonce="${c}" src="${i}"></script>
        </body>
        </html>`}};function D8(){let t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let r=0;r<32;r++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}var zf=class{constructor(e){this._cspSource=e}generateHtml(e,r){let n=this._getIcons();return`<!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <meta http-equiv="Content-Security-Policy" content="default-src 'none'; script-src ${this._cspSource} 'unsafe-inline'; worker-src ${this._cspSource} blob:; connect-src ${this._cspSource}; style-src ${this._cspSource} 'unsafe-inline';">
            <title>Query Results</title>
            <script src="${e.scriptUri}"></script>
            <script src="${e.virtualUri}"></script>
            <link rel="stylesheet" href="${e.styleUri}">
        </head>
        <body>
            <div id="sourceTabs" class="source-tabs"></div>
            <div id="resultSetTabs" class="result-set-tabs" style="display: none;"></div>
            
            <div class="controls">
                <input type="text" id="globalFilter" placeholder="Filter..." onkeyup="onFilterChanged()" style="background: var(--vscode-input-background); color: var(--vscode-input-foreground); border: 1px solid var(--vscode-input-border); padding: 4px;">
                <button onclick="toggleRowView()" title="Toggle Row View">${n.eye} Row View</button>
                
                <!-- Split Button for Export -->
                <div class="split-btn-container">
                    <button id="exportMainBtn" class="split-btn-main" onclick="executeSplitExport()" title="Export results (Excel)">
                        ${n.excel} Excel
                    </button>
                    <button id="exportArrowBtn" class="split-btn-arrow" onclick="toggleExportMenu()" title="Select export format">
                        <svg width="10" height="10" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor">
                            <path d="M8 11L3 6h10l-5 5z"/>
                        </svg>
                    </button>
                    <div id="exportMenu" class="split-btn-menu" style="display:none;">
                        <div class="split-btn-menu-item" onclick="selectExportFormat('excel')">
                            ${n.excel} Excel (XLSB)
                        </div>
                        <div class="split-btn-menu-item" onclick="selectExportFormat('xlsx')">
                            ${n.excel} Excel (XLSX)
                        </div>
                        <div class="split-btn-menu-item" onclick="selectExportFormat('csv')">
                            ${n.csv} CSV
                        </div>
                        <div class="split-btn-menu-item" onclick="selectExportFormat('json')">
                            ${n.json} JSON
                        </div>
                        <div class="split-btn-menu-item" onclick="selectExportFormat('xml')">
                            ${n.xml} XML
                        </div>
                        <div class="split-btn-menu-item" onclick="selectExportFormat('sql')">
                            ${n.sql} SQL INSERT
                        </div>
                        <div class="split-btn-menu-item" onclick="selectExportFormat('markdown')">
                            ${n.markdown} Markdown Table
                        </div>
                    </div>
                </div>

                <div style="width: 1px; height: 16px; background: var(--vscode-panel-border); margin: 0 2px;"></div>
                <button onclick="copyAsExcel()" title="Copy results as Excel to clipboard">${n.excel} Excel Copy</button>
                <div style="width: 1px; height: 16px; background: var(--vscode-panel-border); margin: 0 2px;"></div>
                <button onclick="selectAll()" title="Select all rows">${n.checkAll} Select All</button>
                <button onclick="copySelection(false)" title="Copy selected cells to clipboard">${n.copy} Copy</button>
                <button onclick="copySelection(true)" title="Copy selected cells with headers">${n.copy} Copy w/ Headers</button>
                <button onclick="clearAllFilters()" title="Clear all column filters">${n.clear} Clear Filters</button>
                <span id="rowCountInfo" style="margin-left: auto; font-size: 12px; opacity: 0.8;"></span>
            </div>

            <div id="groupingPanel" class="grouping-panel" ondragover="onDragOverGroup(event)" ondragleave="onDragLeaveGroup(event)" ondrop="onDropGroup(event)">
                <span style="opacity: 0.5;">Drag headers here to group</span>
            </div>

            <div id="mainSplitView" class="main-split-view">
                <div id="gridContainer"></div>
                <div id="rowViewPanel" class="row-view-panel">
                    <div class="row-view-header">
                        <span>Row Details & Comparison</span>
                        <span class="row-view-close" onclick="toggleRowView()">\xD7</span>
                    </div>
                    <div id="rowViewContent" class="row-view-content">
                        <div class="row-view-placeholder">Select 1 or 2 rows to view details or compare</div>
                    </div>
                </div>
            </div>
            
            <script>
                const vscode = acquireVsCodeApi();
                window.sources = ${r.sourcesJson};
                window.pinnedSources = new Set(${r.pinnedSourcesJson});
                window.pinnedResults = ${r.pinnedResultsJson};
                window.activeSource = ${r.activeSourceJson};
                window.resultSets = ${r.resultSetsJson};
                
                let grids = [];
                let activeGridIndex = window.resultSets && window.resultSets.length > 0 ? window.resultSets.length - 1 : 0;
                const workerUri = "${e.workerUri}";
            </script>
            <script src="${e.mainScriptUri}"></script>
            <script>
                // Initialize on load
                init();
            </script>
        </body>
        </html>`}_getIcons(){return{eye:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M8 3c-3 0-6 2.5-6 5s3 5 6 5 6-2.5 6-5-3-5-6-5zm0 9c-2.5 0-4.5-2-4.5-4S5.5 4 8 4s4.5 2 4.5 4-2 4.5-4.5 4.5z"/><circle cx="8" cy="8" r="2"/></svg>',excel:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M6 3h8v10H6V3zm-1 0H3v10h2V3zm-2-1h9a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1z"/><path d="M6 6h8v1H6V6zm0 2h8v1H6V8zm0 2h8v1H6v-1z"/></svg>',copy:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M4 4h7v2H4V4zm0 4h7v2H4V8zm0 4h7v2H4v-2zM2 1h12v14H2V1zm1 1v12h10V2H3z"/></svg>',csv:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M13 2H6L2 6v8a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1zm-1 11H4V7h3V4h5v9z"/></svg>',json:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M5 2c0-1.1.9-2 2-2h2a2 2 0 0 1 2 2v2h-2V2H7v2H5V2zm0 12c0 1.1.9 2 2 2h2a2 2 0 0 0 2-2v-2h-2v2H7v-2H5v2zM2 7v2h2V7H2zm10 0v2h2V7h-2z"/></svg>',xml:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M11.5 1L7 15h2l4.5-14h-2zM4.5 1L0 15h2l4.5-14h-2z"/></svg>',sql:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M8 0C3.6 0 0 1.8 0 4v8c0 2.2 3.6 4 8 4s8-1.8 8-4V4c0-2.2-3.6-4-8-4zm0 2c3.3 0 6 1.3 6 3s-2.7 3-6 3-6-1.3-6-3 2.7-3 6-3zm0 12c-3.3 0-6-1.3-6-3V9c1.6 1.7 4.3 2 6 2s4.4-.3 6-2v2c0 1.7-2.7 3-6 3z"/></svg>',markdown:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M14.5 2H1.5C.7 2 0 2.7 0 3.5v9C0 13.3.7 14 1.5 14h13c.8 0 1.5-.7 1.5-1.5v-9c0-.8-.7-1.5-1.5-1.5zM3 11V5l2 2 2-2v6H6V7l-1 1-1-1v4H3zm10 0h-2V9h-2v2H7V5h2v2h2V5h2v6z"/></svg>',export:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M6 3h8v10H6V3zm-1 0H3v10h2V3zm-2-1h9a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1z"/><path d="M6 6h8v1H6V6zm0 2h8v1H6V8zm0 2h8v1H6v-1z"/><path d="M10 12L8 14L6 12" stroke="currentColor" stroke-width="1.5" fill="none"/></svg>',checkAll:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M13.485 1.929l1.414 1.414-9.9 9.9-4.243-4.242 1.415-1.415 2.828 2.829z"/></svg>',clear:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M8 7.293l4.146-4.147.708.708L8.707 8l4.147 4.146-.708.708L8 8.707l-4.146 4.147-.708-.708L7.293 8 3.146 3.854l.708-.708L8 7.293z"/></svg>'}}};var Hc=class{constructor(e){this._resultsMap=new Map;this._pinnedSources=new Set;this._pinnedResults=new Map;this._autoPinnedResults=new Set;this._resultIdCounter=0;this._extensionUri=e}static{this.viewType="netezza.results"}resolveWebviewView(e,r,n){this._view=e,e.webview.options={enableScripts:!0,localResourceRoots:[we.Uri.joinPath(this._extensionUri,"media")]},e.webview.html=this._getHtmlForWebview(),e.webview.onDidReceiveMessage(i=>{switch(i.command){case"analyze":jf.createOrShow(this._extensionUri,i.data);return;case"exportCsv":this.exportCsv(i.data);return;case"openInExcel":this.openInExcel(i.data,i.sql);return;case"copyAsExcel":this.copyAsExcel(i.data,i.sql);return;case"openInExcelXlsx":this.openInExcelXlsx(i.data,i.sql);return;case"exportJson":this.exportJson(i.data);return;case"exportXml":this.exportXml(i.data);return;case"exportSqlInsert":this.exportSqlInsert(i.data);return;case"exportMarkdown":this.exportMarkdown(i.data);return;case"switchSource":this._activeSourceUri=i.sourceUri,this._updateWebview();return;case"togglePin":this._pinnedSources.has(i.sourceUri)?this._pinnedSources.delete(i.sourceUri):this._pinnedSources.add(i.sourceUri),this._updateWebview();return;case"toggleResultPin":this._toggleResultPin(i.sourceUri,i.resultSetIndex);return;case"switchToPinnedResult":this._switchToPinnedResult(i.resultId);return;case"unpinResult":this._pinnedResults.delete(i.resultId),this._updateWebview();return;case"closeSource":this.closeSource(i.sourceUri);return;case"copyToClipboard":we.env.clipboard.writeText(i.text),we.window.showInformationMessage("Copied to clipboard");return;case"info":we.window.showInformationMessage(i.text);return;case"error":we.window.showErrorMessage(i.text);return;case"setContext":we.commands.executeCommand("setContext",i.key,i.value);return}})}triggerCopySelection(){this._postMessageToWebview({command:"copySelection"})}setActiveSource(e){this._resultsMap.has(e)&&this._activeSourceUri!==e&&(this._activeSourceUri=e,this._updateWebview())}startExecution(e){let r=this._resultsMap.get(e)||[],n,i=r.findIndex(d=>d.isLog);if(i!==-1){n=r[i];let d=new Date().toLocaleTimeString();n.data.push(["",""]),n.data.push([d,"--- New Execution Started ---"]),n.message="Execution started...",n.executionTimestamp=Date.now()}else n={columns:[{name:"Time",type:"string"},{name:"Message",type:"string"}],data:[],message:"Execution started...",executionTimestamp:Date.now(),isLog:!0,name:"Logs"};let s=Array.from(this._pinnedResults.entries()).filter(([d,E])=>E.sourceUri===e&&r[E.resultSetIndex]!==n).sort((d,E)=>d[1].resultSetIndex-E[1].resultSetIndex),o=[];s.forEach(([d,E])=>{E.resultSetIndex<r.length&&o.push(r[E.resultSetIndex])});let a=[n,...o];this._resultsMap.set(e,a),Array.from(this._pinnedResults.entries()).filter(([d,E])=>E.sourceUri===e).map(([d,E])=>d).forEach(d=>this._pinnedResults.delete(d));let c=`result_${++this._resultIdCounter}`,u=e.split(/[\\/]/).pop()||e;this._pinnedResults.set(c,{sourceUri:e,resultSetIndex:0,timestamp:Date.now(),label:`${u} - Logs`}),s.forEach(([d,E],f)=>{let T=`result_${++this._resultIdCounter}`;this._pinnedResults.set(T,{sourceUri:e,resultSetIndex:f+1,timestamp:Date.now(),label:`${u} - Result ${f+2}`})}),this._pinnedSources.add(e),this._activeSourceUri=e,this._updateWebview(),this._view?.show?.(!0)}log(e,r){let n=this._resultsMap.get(e);if(!n||n.length===0)return;let i=n.find(s=>s.isLog);if(i){let s=new Date().toLocaleTimeString();i.data.push([s,r]),this._updateWebview()}}finalizeExecution(e){for(let r of this._autoPinnedResults){let n=this._pinnedResults.get(r);n&&n.sourceUri===e&&this._pinnedResults.delete(r)}this._autoPinnedResults.clear()}updateResults(e,r,n=!1){this._resultsMap.has(r)||this._pinnedSources.add(r);let i=[];Array.isArray(e)?i=e:i=[e];let s=Date.now();i.forEach(f=>{f.executionTimestamp=s});let o=this._resultsMap.get(r)||[],a=o.find(f=>f.isLog),l=Array.from(this._pinnedResults.entries()).filter(f=>f[1].sourceUri===r).sort((f,T)=>f[1].resultSetIndex-T[1].resultSetIndex),c=[],u=new Map;a&&c.push(a),l.forEach(([f,T])=>{let h=o[T.resultSetIndex];h&&(h===a||c.includes(h)||c.push(h),u.set(f,h))});let d=c.length;c.push(...i);let E=r.split(/[\\\\/]/).pop()||r;if(i.forEach((f,T)=>{let h=`result_${++this._resultIdCounter}`,p=d+T;this._pinnedResults.set(h,{sourceUri:r,resultSetIndex:p,timestamp:Date.now(),label:f.isLog?`${E} - Logs`:`${E} - Result ${p}`}),this._autoPinnedResults.add(h)}),this._resultsMap.set(r,c),u.forEach((f,T)=>{let h=c.indexOf(f);if(h!==-1){let p=this._pinnedResults.get(T);p&&(p.resultSetIndex=h)}}),a&&!Array.from(u.values()).includes(a)){let T=`result_${++this._resultIdCounter}`,h=r.split(/[\\/]/).pop()||r;this._pinnedResults.set(T,{sourceUri:r,resultSetIndex:0,timestamp:Date.now(),label:`${h} - Logs`})}n||Array.from(this._resultsMap.keys()).filter(T=>T!==r&&!this._pinnedSources.has(T)).forEach(T=>{this._resultsMap.delete(T),Array.from(this._pinnedResults.entries()).filter(p=>p[1].sourceUri===T).map(([p,S])=>p).forEach(p=>this._pinnedResults.delete(p))}),this._activeSourceUri=r,this._view?(this._updateWebview(),this._view.show?.(!0)):we.window.showInformationMessage('Query completed. Please open "Query Results" panel to view data.')}appendStreamingChunk(e,r,n,i){let s=this._resultsMap.get(e)||[];if(n.isFirstChunk&&n.columns.length>0){let o={columns:n.columns,data:n.rows,executionTimestamp:Date.now(),sql:i,limitReached:n.limitReached};s.findIndex(d=>d.isLog)>=0,s.push(o),this._resultsMap.set(e,s);let l=e.split(/[\\/]/).pop()||e,c=`result_${++this._resultIdCounter}`,u=s.length-1;this._pinnedResults.set(c,{sourceUri:e,resultSetIndex:u,timestamp:Date.now(),label:`${l} - Result ${u}`}),this._autoPinnedResults.add(c),this._activeSourceUri=e,this._updateWebview(),this._view?.show?.(!0)}else if(n.rows.length>0){let o=s[s.length-1];o&&!o.isLog&&(o.data.push(...n.rows),o.limitReached=n.limitReached,this._postMessageToWebview({command:"appendRows",resultSetIndex:s.length-1,rows:n.rows,totalRows:n.totalRowsSoFar,isLastChunk:n.isLastChunk,limitReached:n.limitReached}))}n.isLastChunk&&this._postMessageToWebview({command:"streamingComplete",resultSetIndex:s.length-1,totalRows:n.totalRowsSoFar,limitReached:n.limitReached})}_postMessageToWebview(e){this._view&&this._view.webview.postMessage(e)}_updateWebview(){this._view&&(this._view.webview.html=this._getHtmlForWebview())}_toggleResultPin(e,r){let n=Array.from(this._pinnedResults.entries()).find(i=>{let s=i[1];return s.sourceUri===e&&s.resultSetIndex===r});if(n)this._pinnedResults.delete(n[0]);else{let i=`result_${++this._resultIdCounter}`,s=Date.now(),a=`${e.split(/[\\/]/).pop()||e} - Result ${r+1}`;this._pinnedResults.set(i,{sourceUri:e,resultSetIndex:r,timestamp:s,label:a})}this._updateWebview()}_switchToPinnedResult(e){let r=this._pinnedResults.get(e);r&&(this._activeSourceUri=r.sourceUri,this._updateWebview(),this._view&&this._view.webview.postMessage({command:"switchToResultSet",resultSetIndex:r.resultSetIndex}))}async exportCsv(e){let r=await we.window.showSaveDialog({filters:{"CSV Files":["csv"]},saveLabel:"Export"});r&&(await we.workspace.fs.writeFile(r,Buffer.from(e)),we.window.showInformationMessage(`Results exported to ${r.fsPath}`))}async openInExcel(e,r){we.commands.executeCommand("netezza.exportCurrentResultToXlsbAndOpen",e,r)}async copyAsExcel(e,r){we.commands.executeCommand("netezza.copyCurrentResultToXlsbClipboard",e,r)}async openInExcelXlsx(e,r){try{await we.commands.executeCommand("netezza.exportCurrentResultToXlsxAndOpen",e,r)}catch(n){let i=n instanceof Error?n.message:String(n);we.window.showErrorMessage(`Failed to export to XLSX: ${i}. Please try reloading the window.`)}}async exportJson(e){let r=await we.window.showSaveDialog({filters:{"JSON Files":["json"]},saveLabel:"Export JSON"});r&&(await we.workspace.fs.writeFile(r,Buffer.from(e)),we.window.showInformationMessage(`Results exported to ${r.fsPath}`))}async exportXml(e){let r=await we.window.showSaveDialog({filters:{"XML Files":["xml"]},saveLabel:"Export XML"});r&&(await we.workspace.fs.writeFile(r,Buffer.from(e)),we.window.showInformationMessage(`Results exported to ${r.fsPath}`))}async exportSqlInsert(e){let r=await we.window.showSaveDialog({filters:{"SQL Files":["sql"]},saveLabel:"Export SQL"});r&&(await we.workspace.fs.writeFile(r,Buffer.from(e)),we.window.showInformationMessage(`Results exported to ${r.fsPath}`))}async exportMarkdown(e){let r=await we.window.showSaveDialog({filters:{"Markdown Files":["md"]},saveLabel:"Export Markdown"});r&&(await we.workspace.fs.writeFile(r,Buffer.from(e)),we.window.showInformationMessage(`Results exported to ${r.fsPath}`))}closeSource(e){if(this._resultsMap.has(e)){if(this._resultsMap.delete(e),this._pinnedSources.delete(e),Array.from(this._pinnedResults.entries()).filter(([n,i])=>i.sourceUri===e).map(([n,i])=>n).forEach(n=>this._pinnedResults.delete(n)),this._activeSourceUri===e){let n=Array.from(this._resultsMap.keys());this._activeSourceUri=n.length>0?n[0]:void 0}this._updateWebview()}}_getHtmlForWebview(){if(!this._view)return"";let e=this._getScriptUris(),r=this._prepareViewData();return new zf(this._view.webview.cspSource).generateHtml(e,r)}_getScriptUris(){return{scriptUri:this._view.webview.asWebviewUri(we.Uri.joinPath(this._extensionUri,"media","tanstack-table-core.js")),virtualUri:this._view.webview.asWebviewUri(we.Uri.joinPath(this._extensionUri,"media","tanstack-virtual-core.js")),mainScriptUri:this._view.webview.asWebviewUri(we.Uri.joinPath(this._extensionUri,"media","resultPanel.js")),workerUri:this._view.webview.asWebviewUri(we.Uri.joinPath(this._extensionUri,"media","searchWorker.js")),styleUri:this._view.webview.asWebviewUri(we.Uri.joinPath(this._extensionUri,"media","resultPanel.css"))}}_prepareViewData(){let e=Array.from(this._resultsMap.keys()),r=Array.from(this._pinnedSources),n=Array.from(this._pinnedResults.entries()).map(([a,l])=>({id:a,...l})),i=this._activeSourceUri&&this._resultsMap.has(this._activeSourceUri)?this._activeSourceUri:e.length>0?e[0]:null,s=i?this._resultsMap.get(i):[],o=(a,l)=>typeof l=="bigint"?l>=Number.MIN_SAFE_INTEGER&&l<=Number.MAX_SAFE_INTEGER?Number(l):l.toString():l;return{sourcesJson:JSON.stringify(e),pinnedSourcesJson:JSON.stringify(r),pinnedResultsJson:JSON.stringify(n),activeSourceJson:JSON.stringify(i),resultSetsJson:JSON.stringify(s,o)}}};var Ve=q(require("vscode"));lr();var Kf=class{constructor(e,r,n){this.context=e;this.metadataCache=r;this.connectionManager=n}async provideCompletionItems(e,r,n,i){let s=e.getText(),o=this.stripComments(s),a=this.parseLocalDefinitions(o),l=e.lineAt(r).text.substr(0,r.character),c=l.toUpperCase(),u=r.line>0?e.lineAt(r.line-1).text:"",d=this.connectionManager.getConnectionForExecution(e.uri.toString());if(d||(d=this.connectionManager.getActiveConnectionName()||void 0),d&&!this.metadataCache.hasConnectionPrefetchTriggered(d)&&this.metadataCache.triggerConnectionPrefetch(d,m=>oe(this.context,m,!0,this.connectionManager,d)),/(FROM|JOIN)\s+$/.test(c)){let m=await this.getDatabases(d);return[...a.map(A=>{let g=new Ve.CompletionItem(A.name,Ve.CompletionItemKind.Class);return g.detail=A.type,g}),...m]}if(/(?:FROM|JOIN)\s*$/i.test(u)&&/^\s*[a-zA-Z0-9_]*$/.test(l)){let m=await this.getDatabases(d);return[...a.map(A=>{let g=new Ve.CompletionItem(A.name,Ve.CompletionItemKind.Class);return g.detail=A.type,g}),...m]}let E=l.match(/(?:FROM|JOIN)\s+([a-zA-Z0-9_]+)\.\s*$/i);if(E){let m=E[1],R=await this.getSchemas(d,m);return new Ve.CompletionList(R,!1)}let f=l.match(/^\s*([a-zA-Z0-9_]+)\.\s*$/i);if(f&&/(?:FROM|JOIN)\s*$/i.test(u)){let m=f[1],R=await this.getSchemas(d,m);return new Ve.CompletionList(R,!1)}let T=l.match(/(?:FROM|JOIN)\s+([a-zA-Z0-9_]+)\.([a-zA-Z0-9_]+)\.$/i);if(T){let m=T[1],R=T[2];return this.getTables(d,m,R)}let h=l.match(/^\s*([a-zA-Z0-9_]+)\.([a-zA-Z0-9_]+)\.\s*$/i);if(h&&/(?:FROM|JOIN)\s*$/i.test(u)){let m=h[1],R=h[2];return this.getTables(d,m,R)}let p=l.match(/(?:FROM|JOIN)\s+([a-zA-Z0-9_]+)\.\.$/i);if(p){let m=p[1];return this.getTables(d,m,void 0)}let S=l.match(/^\s*([a-zA-Z0-9_]+)\.\.\s*$/i);if(S&&/(?:FROM|JOIN)\s*$/i.test(u)){let m=S[1];return this.getTables(d,m,void 0)}if(l.trim().endsWith(".")){let m=l.match(/([a-zA-Z0-9_]+)\.$/);if(m){let R=m[1],A=this.findAlias(o,R);if(A){let w=a.find(I=>I.name.toUpperCase()===A.table.toUpperCase());return w?w.columns.map(I=>{let D=new Ve.CompletionItem(I,Ve.CompletionItemKind.Field);return D.detail="Local Column",D}):this.getColumns(d,A.db,A.schema,A.table)}let g=a.find(w=>w.name.toUpperCase()===R.toUpperCase());if(g)return g.columns.map(w=>{let I=new Ve.CompletionItem(w,Ve.CompletionItemKind.Field);return I.detail="Local Column",I})}}return this.getKeywords()}stripComments(e){let r=e.replace(/--.*$/gm,"");return r=r.replace(/\/\*[\s\S]*?\*\//g,""),r}parseLocalDefinitions(e){let r=[],n=/CREATE\s+TABLE\s+([a-zA-Z0-9_]+)\s+AS\s*\(/gi,i;for(;(i=n.exec(e))!==null;){let a=i[1],l=i.index+i[0].length,c=this.extractBalancedParenthesisContent(e,l);if(c){let u=this.extractColumnsFromQuery(c);r.push({name:a,type:"Temp Table",columns:u})}}let s=/\bWITH\s+/gi;for(;(i=s.exec(e))!==null;){let a=i.index+i[0].length;for(;;){let l=/^\s*([a-zA-Z0-9_]+)\s+AS\s*\(/i,c=e.substring(a),u=c.match(l);if(!u)break;let d=u[1],E=c.indexOf("(",u.index+u[1].length),f=a+E,T=this.extractBalancedParenthesisContent(e,f+1);if(T){let h=this.extractColumnsFromQuery(T);r.push({name:d,type:"CTE",columns:h}),a=f+1+T.length+1;let p=/^\s*,/,S=e.substring(a);if(p.test(S)){let m=S.match(p);a+=m[0].length}else break}else break}}let o=/\bJOIN\s+\(/gi;for(;(i=o.exec(e))!==null;){let a=i.index+i[0].length,l=this.extractBalancedParenthesisContent(e,a);if(l&&/^\s*SELECT\b/i.test(l)){let c=a+l.length+1,d=e.substring(c).match(/^\s+(?:AS\s+)?([a-zA-Z0-9_]+)/i);if(d){let E=d[1],f=this.extractColumnsFromQuery(l);r.push({name:E,type:"Subquery",columns:f})}}}return r}extractBalancedParenthesisContent(e,r){let n=1,i=r;for(;i<e.length;i++)if(e[i]==="("?n++:e[i]===")"&&n--,n===0)return e.substring(r,i);return null}extractColumnsFromQuery(e){let r=e.match(/^\s*SELECT\s+/i);if(!r)return[];let n=r[0].length,i="",s=0,o=-1;for(let c=n;c<e.length;c++)if(e[c]==="("?s++:e[c]===")"&&s--,s===0&&e.substr(c).match(/^\s+FROM\b/i)){o=c;break}o!==-1?i=e.substring(n,o):i=e.substring(n);let a=[],l="";s=0;for(let c=0;c<i.length;c++){let u=i[c];u==="("?s++:u===")"&&s--,u===","&&s===0?(a.push(l.trim()),l=""):l+=u}return l.trim()&&a.push(l.trim()),a.map(c=>{let u=c.match(/\s+AS\s+([a-zA-Z0-9_]+)$/i);if(u)return u[1];let d=c.match(/\s+([a-zA-Z0-9_]+)$/i);if(d)return d[1];let E=c.split(".");return E[E.length-1]})}findAlias(e,r){let n=new RegExp("(?:FROM|JOIN)\\s+([a-zA-Z0-9_\\.]+)(?:\\s+(?:AS\\s+)?([a-zA-Z0-9_]+))?","gi"),i;for(;(i=n.exec(e))!==null;){let s=i[1],o=i[2];if(o&&o.toUpperCase()===r.toUpperCase()){let a=s.split(".");return a.length===3?{db:a[0],schema:a[1],table:a[2]}:a.length===2?{schema:a[0],table:a[1]}:{table:a[0]}}else if(!o){let a=s.split(".");if(a[a.length-1].toUpperCase()===r.toUpperCase())return a.length===3?{db:a[0],schema:a[1],table:a[2]}:a.length===2?{schema:a[0],table:a[1]}:{table:a[0]}}}return null}getKeywords(){return["SELECT","FROM","WHERE","GROUP BY","ORDER BY","LIMIT","INSERT","INTO","VALUES","UPDATE","SET","DELETE","CREATE","DROP","TABLE","VIEW","DATABASE","JOIN","INNER","LEFT","RIGHT","OUTER","ON","AND","OR","NOT","NULL","IS","IN","BETWEEN","LIKE","AS","DISTINCT","CASE","WHEN","THEN","ELSE","END","WITH","UNION","ALL"].map(r=>{let n=new Ve.CompletionItem(r,Ve.CompletionItemKind.Keyword);return n.detail="SQL Keyword",n})}async getDatabases(e){if(!e)return[];let r=this.metadataCache.getDatabases(e);if(r)return r.map(n=>{let i=new Ve.CompletionItem(n.label||n.DATABASE,n.kind||Ve.CompletionItemKind.Module);return i.detail=n.detail,i});try{let i=await oe(this.context,"SELECT DATABASE FROM system.._v_database ORDER BY DATABASE",!0,this.connectionManager,e);if(!i)return[];let o=Ee(i).map(a=>({DATABASE:a.DATABASE,label:a.DATABASE,kind:9,detail:"Database"}));return this.metadataCache.setDatabases(e,o),o.map(a=>{let l=new Ve.CompletionItem(a.label,a.kind);return l.detail=a.detail,l})}catch(n){return console.error(n),[]}}async getSchemas(e,r){if(!e)return[];let n=this.metadataCache.getSchemas(e,r);if(n)return n.map(s=>{let o=new Ve.CompletionItem(s.label||s.SCHEMA,s.kind||Ve.CompletionItemKind.Folder);return o.detail=s.detail,o.insertText=s.insertText,o.sortText=s.sortText,o.filterText=s.filterText,o});let i=Ve.window.setStatusBarMessage(`Fetching schemas for ${r}...`);try{let s=`SELECT SCHEMA FROM ${r}.._V_SCHEMA ORDER BY SCHEMA`,o=await oe(this.context,s,!0,this.connectionManager,e);if(!o)return[];let l=Ee(o).filter(c=>c.SCHEMA!=null&&c.SCHEMA!=="").map(c=>{let u=c.SCHEMA;return{SCHEMA:u,label:u,kind:19,detail:`Schema in ${r}`,insertText:u,sortText:u,filterText:u}});return this.metadataCache.setSchemas(e,r,l),l.map(c=>{let u=new Ve.CompletionItem(c.label,c.kind);return u.detail=c.detail,u.insertText=c.insertText,u.sortText=c.sortText,u.filterText=c.filterText,u})}catch(s){return console.error("[SqlCompletion] Error in getSchemas:",s),[]}finally{i.dispose()}}async getTables(e,r,n){if(!e)return[];let i=n?`${r}.${n}`:`${r}..`,s=n?this.metadataCache.getTables(e,i):this.metadataCache.getTables(e,i)||this.metadataCache.getTablesAllSchemas(e,r);if(s)return s.map(l=>{let c=typeof l.label=="string"?l.label:l.label?.label||l.OBJNAME||l.TABLENAME||"?",u=new Ve.CompletionItem(c,l.kind||Ve.CompletionItemKind.Class);return u.detail=l.detail,u.sortText=l.sortText,u});let o=n?`Fetching tables for ${r}.${n}...`:`Fetching tables for ${r}...`,a=Ve.window.setStatusBarMessage(o);try{let l="";n?l=`SELECT OBJNAME, OBJID FROM ${r}.._V_OBJECT_DATA WHERE UPPER(DBNAME) = UPPER('${r}') AND UPPER(SCHEMA) = UPPER('${n}') AND OBJTYPE='TABLE' ORDER BY OBJNAME`:l=`SELECT OBJNAME, OBJID, SCHEMA FROM ${r}.._V_OBJECT_DATA WHERE UPPER(DBNAME) = UPPER('${r}') AND OBJTYPE='TABLE' ORDER BY OBJNAME`;let c=await oe(this.context,l,!0,this.connectionManager,e);if(!c)return[];let u=Ee(c),d=new Map,E=u.map(f=>{let T=f.OBJNAME,h=f.SCHEMA||n,p=h?`${r}.${h}.${f.OBJNAME}`:`${r}..${f.OBJNAME}`;return d.set(p,f.OBJID),{OBJNAME:f.OBJNAME,TABLENAME:f.OBJNAME,OBJID:f.OBJID,SCHEMA:h,label:T,kind:6,detail:n?"Table":`Table (${h})`,sortText:f.OBJNAME}});return this.metadataCache.setTables(e,i,E,d),E.map(f=>{let T=typeof f.label=="string"?f.label:f.label?.label||"?",h=new Ve.CompletionItem(T,f.kind);return h.detail=f.detail,h.sortText=f.sortText,h})}catch(l){return console.error(l),[]}finally{a.dispose()}}async getColumns(e,r,n,i){if(!e)return[];let s,o=r?`${r}..`:"",a=n&&r?`${r}.${n}.${i}`:r?`${r}..${i}`:void 0;a&&(s=this.metadataCache.findTableId(e,a));let l=`${r||"CURRENT"}.${n||""}.${i}`,c=this.metadataCache.getColumns(e,l);if(c)return c.map(d=>{let E=new Ve.CompletionItem(d.label||d.ATTNAME,d.kind||Ve.CompletionItemKind.Field);return E.detail=d.detail,E});let u=Ve.window.setStatusBarMessage(`Fetching columns for ${i}...`);try{let d="";if(s)d=`SELECT ATTNAME, FORMAT_TYPE FROM ${o}_V_RELATION_COLUMN WHERE OBJID = ${s} ORDER BY ATTNUM`;else{let h=n?`AND UPPER(O.SCHEMA) = UPPER('${n}')`:"",p=r?`AND UPPER(O.DBNAME) = UPPER('${r}')`:"";d=`
                    SELECT C.ATTNAME, C.FORMAT_TYPE 
                    FROM ${o}_V_RELATION_COLUMN C
                    JOIN ${o}_V_OBJECT_DATA O ON C.OBJID = O.OBJID
                    WHERE UPPER(O.OBJNAME) = UPPER('${i}') ${h} ${p}
                    ORDER BY C.ATTNUM
                `}let E=await oe(this.context,d,!0,this.connectionManager,e);if(!E)return[];let T=Ee(E).map(h=>({ATTNAME:h.ATTNAME,FORMAT_TYPE:h.FORMAT_TYPE,label:h.ATTNAME,kind:9,detail:h.FORMAT_TYPE}));if(this.metadataCache.setColumns(e,l,T),r){let h=this.context,p=this.metadataCache;setImmediate(async()=>{try{await p.prefetchColumnsForSchema(e,r,n,S=>oe(h,S,!0,this.connectionManager,e))}catch(S){console.error("[SqlCompletion] Background column prefetch error:",S)}})}return T.map(h=>{let p=new Ve.CompletionItem(h.label,h.kind);return p.detail=h.detail,p})}catch(d){return console.error(d),[]}finally{u.dispose()}}};var ao=q(require("vscode"));lr();function P8(t){let e="",r=0;for(;r<t.length;){if(t[r]==="-"&&r+1<t.length&&t[r+1]==="-"){for(;r<t.length&&t[r]!==`
`;)r++;r<t.length&&(e+=" ",r++);continue}if(t[r]==="/"&&r+1<t.length&&t[r+1]==="*"){for(r+=2;r<t.length-1&&!(t[r]==="*"&&t[r+1]==="/");)r++;r<t.length-1&&(r+=2),e+=" ";continue}if(t[r]==="'"){for(r++;r<t.length;)if(t[r]==="'"&&r+1<t.length&&t[r+1]==="'")r+=2;else if(t[r]==="'"){r++;break}else r++;e+=" ";continue}e+=t[r],r++}return e}function KR(t,e){return P8(t).toUpperCase().includes(e.toUpperCase())}var Wc=class{constructor(e,r,n,i){this._extensionUri=e;this.context=r;this.metadataCache=n;this.connectionManager=i;this.currentSearchId=0}static{this.viewType="netezza.search"}resolveWebviewView(e,r,n){this._view=e,e.webview.options={enableScripts:!0,localResourceRoots:[this._extensionUri]},e.webview.html=this._getHtmlForWebview(e.webview),e.webview.onDidReceiveMessage(async i=>{switch(i.type){case"search":await this.search(i.value);break;case"searchSource":await this.searchSourceCode(i.value);break;case"navigate":ao.commands.executeCommand("netezza.revealInSchema",i);break}})}async search(e){if(!e||e.length<2)return;let r,n=ao.window.activeTextEditor;if(n&&n.document.languageId==="sql"&&(r=this.connectionManager.getConnectionForExecution(n.document.uri.toString())),r||(r=this.connectionManager.getActiveConnectionName()||void 0),!r){this._view?.webview.postMessage({type:"results",data:[],append:!1});return}let i=++this.currentSearchId,s=ao.window.setStatusBarMessage(`$(loading~spin) Searching for "${e}"...`),o=new Set;if(this._view){let u=this.metadataCache.search(e,r);if(u.length>0){let d=[];u.forEach(E=>{let f=`${E.name.toUpperCase().trim()}|${E.type.toUpperCase().trim()}|${(E.parent||"").toUpperCase().trim()}`;o.has(f)||(o.add(f),d.push({NAME:E.name,SCHEMA:E.schema||"",DATABASE:E.database||"",TYPE:E.type,PARENT:E.parent||"",DESCRIPTION:"Result from Cache",MATCH_TYPE:"NAME",connectionName:r}))}),d.sort((E,f)=>{let T=h=>h==="COLUMN"?2:1;return T(f.TYPE)-T(E.TYPE)?T(E.TYPE)-T(f.TYPE):E.NAME.localeCompare(f.NAME)}),d.length>0&&i===this.currentSearchId&&this._view.webview.postMessage({type:"results",data:d,append:!1})}else i===this.currentSearchId&&this._view.webview.postMessage({type:"results",data:[],append:!1});this.metadataCache.hasAllObjectsPrefetchTriggered(r)||this.metadataCache.prefetchAllObjects(r,async d=>oe(this.context,d,!0,this.connectionManager,r))}let l=`%${e.replace(/'/g,"''").toUpperCase()}%`,c=`
            SELECT * FROM (
                SELECT 1 AS PRIORITY, OBJNAME AS NAME, SCHEMA, DBNAME AS DATABASE, OBJTYPE AS TYPE, '' AS PARENT, 
                       COALESCE(DESCRIPTION, '') AS DESCRIPTION, 'NAME' AS MATCH_TYPE
                FROM _V_OBJECT_DATA 
                WHERE UPPER(OBJNAME) LIKE '${l}'
                UNION ALL
                SELECT 1 AS PRIORITY, OBJNAME AS NAME, SCHEMA, DBNAME AS DATABASE, OBJTYPE AS TYPE, '' AS PARENT, 
                       COALESCE(DESCRIPTION, '') AS DESCRIPTION, 'DESC' AS MATCH_TYPE
                FROM _V_OBJECT_DATA 
                WHERE UPPER(DESCRIPTION) LIKE '${l}' AND UPPER(OBJNAME) NOT LIKE '${l}'
                UNION ALL
                SELECT 2 AS PRIORITY, C.ATTNAME AS NAME, O.SCHEMA, O.DBNAME AS DATABASE, 'COLUMN' AS TYPE, O.OBJNAME AS PARENT,
                       COALESCE(C.DESCRIPTION, '') AS DESCRIPTION, 'NAME' AS MATCH_TYPE
                FROM _V_RELATION_COLUMN C
                JOIN _V_OBJECT_DATA O ON C.OBJID = O.OBJID
                WHERE UPPER(C.ATTNAME) LIKE '${l}'
                UNION ALL
                SELECT 4 AS PRIORITY, V.VIEWNAME AS NAME, V.SCHEMA, V.DATABASE, 'VIEW' AS TYPE, '' AS PARENT, 
                       'Found in view definition' AS DESCRIPTION, 'DEFINITION' AS MATCH_TYPE
                FROM _V_VIEW V
                WHERE UPPER(V.DEFINITION) LIKE '${l}'
                UNION ALL
                SELECT 4 AS PRIORITY, P.PROCEDURE AS NAME, P.SCHEMA, P.DATABASE, 'PROCEDURE' AS TYPE, '' AS PARENT, 
                       'Found in procedure source' AS DESCRIPTION, 'SOURCE' AS MATCH_TYPE
                FROM _V_PROCEDURE P
                WHERE UPPER(P.PROCEDURESOURCE) LIKE '${l}'
                UNION ALL
                SELECT 3 AS PRIORITY, E1.TABLENAME AS NAME, E1.SCHEMA, E1.DATABASE, 'EXTERNAL TABLE' AS TYPE, '' AS PARENT,
                       COALESCE(E2.EXTOBJNAME, '') AS DESCRIPTION, 'DATAOBJECT' AS MATCH_TYPE
                FROM _V_EXTERNAL E1
                JOIN _V_EXTOBJECT E2 ON E1.DATABASE = E2.DATABASE AND E1.SCHEMA = E2.SCHEMA AND E1.TABLENAME = E2.TABLENAME
                WHERE UPPER(E2.EXTOBJNAME) LIKE '${l}'
            ) AS R
            ORDER BY PRIORITY, NAME
            LIMIT 100
        `;try{let u=await oe(this.context,c,!0,this.connectionManager,r);if(i!==this.currentSearchId){s.dispose();return}if(u&&u.data&&u.data.length>0){let d=Ee(u),E=[];d.forEach(f=>{let T=f,h=`${T.NAME.toUpperCase().trim()}|${T.TYPE.toUpperCase().trim()}|${(T.PARENT||"").toUpperCase().trim()}`;o.has(h)||(E.push({NAME:T.NAME,SCHEMA:T.SCHEMA,DATABASE:T.DATABASE,TYPE:T.TYPE,PARENT:T.PARENT,DESCRIPTION:T.DESCRIPTION,MATCH_TYPE:T.MATCH_TYPE,connectionName:r}),o.add(h))}),E.length>0&&this._view&&this._view.webview.postMessage({type:"results",data:E,append:!0})}}catch(u){console.error("Search error:",u),this._view&&i===this.currentSearchId&&this._view.webview.postMessage({type:"error",message:u instanceof Error?u.message:String(u)})}finally{s.dispose()}}async searchSourceCode(e){if(!e||e.length<2)return;let r,n=ao.window.activeTextEditor;if(n&&n.document.languageId==="sql"&&(r=this.connectionManager.getConnectionForExecution(n.document.uri.toString())),r||(r=this.connectionManager.getActiveConnectionName()||void 0),!r){this._view?.webview.postMessage({type:"results",data:[],append:!1});return}let i=++this.currentSearchId,s=ao.window.setStatusBarMessage(`$(loading~spin) Searching in source code for "${e}"...`);try{this._view&&i===this.currentSearchId&&this._view.webview.postMessage({type:"results",data:[],append:!1});let o=e.toUpperCase(),a=[],l=`
                SELECT VIEWNAME AS NAME, SCHEMA, DATABASE, DEFINITION AS SOURCE
                FROM _V_VIEW
            `;try{let u=await oe(this.context,l,!0,this.connectionManager,r);if(u&&u.data&&i===this.currentSearchId){let d=Ee(u);for(let E of d)E.SOURCE&&KR(E.SOURCE,o)&&a.push({NAME:E.NAME,SCHEMA:E.SCHEMA,DATABASE:E.DATABASE,TYPE:"VIEW",PARENT:"",DESCRIPTION:"Found in view source (excluding comments/strings)",MATCH_TYPE:"SOURCE_CODE",connectionName:r})}}catch(u){console.error("Error searching views:",u)}let c=`
                SELECT PROCEDURE AS NAME, SCHEMA, DATABASE, PROCEDURESOURCE AS SOURCE
                FROM _V_PROCEDURE
            `;try{let u=await oe(this.context,c,!0,this.connectionManager,r);if(u&&u.data&&i===this.currentSearchId){let d=Ee(u);for(let E of d)E.SOURCE&&KR(E.SOURCE,o)&&a.push({NAME:E.NAME,SCHEMA:E.SCHEMA,DATABASE:E.DATABASE,TYPE:"PROCEDURE",PARENT:"",DESCRIPTION:"Found in procedure source (excluding comments/strings)",MATCH_TYPE:"SOURCE_CODE",connectionName:r})}}catch(u){console.error("Error searching procedures:",u)}this._view&&i===this.currentSearchId&&this._view.webview.postMessage({type:"results",data:a,append:!1})}catch(o){console.error("Source code search error:",o),this._view&&i===this.currentSearchId&&this._view.webview.postMessage({type:"error",message:o instanceof Error?o.message:String(o)})}finally{s.dispose()}}_getHtmlForWebview(e){return`<!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Schema Search</title>
        <style>
            body { 
                font-family: var(--vscode-font-family); 
                padding: 0; 
                margin: 0;
                color: var(--vscode-foreground); 
                display: flex;
                flex-direction: column;
                height: 100vh;
                overflow: hidden;
            }
            .search-box { 
                display: flex; 
                gap: 5px; 
                padding: 10px;
                flex-shrink: 0;
                border-bottom: 1px solid var(--vscode-panel-border);
            }
            input { flex-grow: 1; padding: 5px; background: var(--vscode-input-background); color: var(--vscode-input-foreground); border: 1px solid var(--vscode-input-border); }
            button {
                display: inline-flex;
                align-items: center;
                justify-content: center;
                gap: 6px;
                background-color: var(--vscode-button-secondaryBackground);
                color: var(--vscode-button-secondaryForeground);
                border: 1px solid var(--vscode-contrastBorder, transparent);
                padding: 4px 10px;
                cursor: pointer;
                border-radius: 2px;
                font-family: var(--vscode-font-family);
                font-size: 12px;
                line-height: 18px;
            }
            button:hover { background-color: var(--vscode-button-secondaryHoverBackground); }
            button.primary { background-color: var(--vscode-button-background); color: var(--vscode-button-foreground); }
            button.primary:hover { background-color: var(--vscode-button-hoverBackground); }
            #status { padding: 5px 10px; flex-shrink: 0; }
            .results { 
                list-style: none; 
                padding: 0; 
                margin: 0; 
                flex-grow: 1; 
                overflow-y: auto; 
            }
            .result-item { padding: 8px 10px; border-bottom: 1px solid var(--vscode-panel-border); display: flex; flex-direction: column; cursor: pointer; position: relative; }
            .result-item:hover { background: var(--vscode-list-hoverBackground); }
            .item-header { display: flex; justify-content: space-between; font-weight: bold; }
            .item-details { font-size: 0.9em; opacity: 0.8; display: flex; gap: 10px; }
            .type-badge { font-size: 0.8em; background: var(--vscode-badge-background); color: var(--vscode-badge-foreground); padding: 2px 5px; border-radius: 3px; }
            .tooltip { position: absolute; background: var(--vscode-editorHoverWidget-background); color: var(--vscode-editorHoverWidget-foreground); border: 1px solid var(--vscode-editorHoverWidget-border); padding: 8px; border-radius: 4px; font-size: 0.9em; max-width: 300px; word-wrap: break-word; z-index: 1000; opacity: 0; visibility: hidden; transition: opacity 0.2s, visibility 0.2s; pointer-events: none; }
            .result-item:hover .tooltip { opacity: 1; visibility: visible; }
            .tooltip.top { bottom: 100%; left: 0; margin-bottom: 5px; }
            .tooltip.bottom { top: 100%; left: 0; margin-top: 5px; }
            .cache-badge { background-color: var(--vscode-charts-green); color: white; padding: 1px 4px; border-radius: 2px; font-size: 0.7em; margin-left: 5px; }
            .spinner {
                border: 2px solid transparent;
                border-top: 2px solid var(--vscode-progressBar-background);
                border-radius: 50%;
                width: 14px;
                height: 14px;
                animation: spin 1s linear infinite;
                display: inline-block;
                vertical-align: middle;
                margin-right: 8px;
            }
            @keyframes spin {
                0% { transform: rotate(0deg); }
                100% { transform: rotate(360deg); }
            }
            .options-row {
                display: flex;
                align-items: center;
                gap: 8px;
                padding: 5px 10px;
                font-size: 12px;
                border-bottom: 1px solid var(--vscode-panel-border);
            }
            .options-row label {
                display: flex;
                align-items: center;
                gap: 4px;
                cursor: pointer;
            }
            .options-row input[type="checkbox"] {
                margin: 0;
                cursor: pointer;
            }
        </style>
    </head>
    <body>
        <div class="search-box">
            <input type="text" id="searchInput" placeholder="Search tables, columns, view definitions, procedure source..." />
            <button id="searchBtn" class="primary">Search</button>
        </div>
        <div class="options-row">
            <label>
                <input type="checkbox" id="sourceOnlyCheck" />
                Source Code Only (exclude comments/strings)
            </label>
        </div>
        <div id="status"></div>
        <ul class="results" id="resultsList"></ul>

        <script>
            try {
            const vscode = acquireVsCodeApi();
            const searchInput = document.getElementById('searchInput');
            const searchBtn = document.getElementById('searchBtn');
            const sourceOnlyCheck = document.getElementById('sourceOnlyCheck');
            const resultsList = document.getElementById('resultsList');
            const status = document.getElementById('status');

            searchBtn.addEventListener('click', () => {
                const term = searchInput.value;
                if (term) {
                    status.innerHTML = '<span class="spinner"></span> Searching...';
                    const messageType = sourceOnlyCheck.checked ? 'searchSource' : 'search';
                    vscode.postMessage({ type: messageType, value: term });
                }
            });

            searchInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    searchBtn.click();
                }
            });

            window.addEventListener('message', event => {
                const message = event.data;
                switch (message.type) {
                    case 'results':
                        status.textContent = '';
                        renderResults(message.data, message.append);
                        break;
                    case 'error':
                        status.textContent = 'Error: ' + message.message;
                        break;
                }
            });

            function renderResults(data, append) {
                if (!append) {
                    resultsList.innerHTML = '';
                }

                if (!data || data.length === 0) {
                    if (!append && resultsList.children.length === 0) {
                        status.textContent = 'No results found.';
                    }
                    return;
                }

                data.forEach(item => {
                    const li = document.createElement('li');
                    li.className = 'result-item';

                    const parentInfo = item.PARENT ? \`Parent: \${item.PARENT}\` : '';
                    const schemaInfo = item.SCHEMA ? \`Schema: \${item.SCHEMA}\` : '';
                    const databaseInfo = item.DATABASE ? \`Database: \${item.DATABASE}\` : '';
                    const description = item.DESCRIPTION && item.DESCRIPTION.trim() ? item.DESCRIPTION : '';
                    
                    // Add match type indicator
                    const matchTypeInfo = item.MATCH_TYPE === 'DEFINITION' ? 'Match in view definition' :
                                        item.MATCH_TYPE === 'SOURCE' ? 'Match in procedure source' :
                                        item.MATCH_TYPE === 'NAME' ? 'Match in name' : '';
                    
                    li.innerHTML = \`
                        <div class="item-header">
                            <span>\${item.NAME}</span>
                            <span class="type-badge">\${item.TYPE}</span>
                        </div>
                        <div class="item-details">
                            <span>\${databaseInfo}</span>
                            <span>\${schemaInfo}</span>
                            <span>\${parentInfo}</span>
                            \${matchTypeInfo ? \`<span style="font-style: italic; color: var(--vscode-descriptionForeground);">\${matchTypeInfo}</span>\` : ''}
                        </div>
                        \${description ? \`<div class="tooltip bottom">\${description}</div>\` : ''}
                    \`;
                    
                    // Add double-click handler to navigate to schema tree
                    li.addEventListener('dblclick', () => {
                        vscode.postMessage({ 
                            type: 'navigate', 
                            name: item.NAME,
                            schema: item.SCHEMA,
                            database: item.DATABASE,
                            objType: item.TYPE,
                            parent: item.PARENT,
                            connectionName: item.connectionName // Pass back connection name
                        });
                    });
                    
                    resultsList.appendChild(li);
                });
            }
            } catch (e) {
                document.body.innerHTML = '<pre style="color:red;">Error loading Schema Search: ' + e.message + '\\n' + e.stack + '</pre>';
            }
        </script>
    </body>
    </html>`}};lo();var Ga=q(require("vscode"));lo();var Jf=class{provideDocumentLinks(e,r){let n=[],i=e.getText(),s=/[a-zA-Z0-9_"]+(\.[a-zA-Z0-9_"]*)+/g,o;for(;(o=s.exec(i))!==null;){let a=e.positionAt(o.index),l=e.positionAt(o.index+o[0].length),c=new Ga.Range(a,l),u=vr.getObjectAtPosition(i,o.index+Math.floor(o[0].length/2));if(u){if(o[0].split(".").length===2&&!u.database&&this.isLikelyAliasReference(i,o.index))continue;let f={name:u.name,schema:u.schema,database:u.database},T=Ga.Uri.parse(`command:netezza.revealInSchema?${encodeURIComponent(JSON.stringify(f))}`),h=new Ga.DocumentLink(c,T);h.tooltip=`Reveal ${u.name} in Schema`,n.push(h)}}return n}isLikelyAliasReference(e,r){let i=e.substring(Math.max(0,r-200),r).replace(/--[^\n]*/g,"").replace(/\/\*[\s\S]*?\*\//g,"").toUpperCase();return/(?:FROM|JOIN)\s+[a-zA-Z0-9_"]*$/i.test(i)?!1:!!i.match(/\b(SELECT|WHERE|ON|HAVING|ORDER\s+BY|GROUP\s+BY|AND|OR|SET|VALUES)\b(?!.*\b(?:FROM|JOIN)\b)/)}};var Zf=q(require("vscode")),Qf=class{provideFoldingRanges(e,r,n){let i=[],s=[],o=/^\s*--\s*REGION\b/i,a=/^\s*--\s*ENDREGION\b/i;for(let l=0;l<e.lineCount;l++){let u=e.lineAt(l).text;if(o.test(u))s.push(l);else if(a.test(u)&&s.length>0){let d=s.pop();i.push(new Zf.FoldingRange(d,l,Zf.FoldingRangeKind.Region))}}return i}};var Qt=q(require("vscode"));Wf();var kc=class t{constructor(e,r){this._extensionUri=e;this._context=r;this._currentOffset=0}static{this.viewType="netezza.queryHistory"}static{this.PAGE_SIZE=50}resolveWebviewView(e,r,n){this._view=e,e.webview.options={enableScripts:!0,localResourceRoots:[this._extensionUri]},e.webview.html=this._getHtmlForWebview(e.webview),this.sendHistoryToWebview(!0),e.webview.onDidReceiveMessage(async i=>{switch(i.type){case"refresh":this.refresh();break;case"loadMore":await this.loadMore();break;case"searchArchive":await this.searchArchive(i.term);break;case"clearAll":await this.clearAllHistory();break;case"deleteEntry":await this.deleteEntry(i.id,i.query);break;case"copyQuery":await Qt.env.clipboard.writeText(i.query),Qt.window.showInformationMessage("Query copied to clipboard");break;case"executeQuery":await this.executeQuery(i.query);break;case"getHistory":await this.sendHistoryToWebview(!0);break;case"toggleFavorite":await this.toggleFavorite(i.id);break;case"updateEntry":await this.updateEntry(i.id,i.tags,i.description);break;case"requestEdit":await this.requestEdit(i.id);break;case"requestTagFilter":await this.requestTagFilter(i.tags);break;case"showFavoritesOnly":await this.sendFavoritesToWebview();break;case"filterByTag":await this.sendFilteredByTagToWebview(i.tag);break}})}refresh(){this._view&&this.sendHistoryToWebview(!0)}async loadMore(){this._view&&(this._currentOffset+=t.PAGE_SIZE,this.sendHistoryToWebview(!1))}async searchArchive(e){if(!this._view)return;let r=new ar(this._context),n=await r.searchArchive(e),i=await r.getStats();this._view.webview.postMessage({type:"archiveSearchResults",history:n,stats:i,term:e})}async sendHistoryToWebview(e=!1){if(!this._view)return;e&&(this._currentOffset=0);let r=new ar(this._context),n=await r.getHistory(t.PAGE_SIZE,this._currentOffset),i=await r.getStats();console.log(`QueryHistoryView: sending history to webview, entries=${n.length}, offset=${this._currentOffset}, reset=${e}`),this._view.webview.postMessage({type:"historyData",history:n,stats:i,reset:e})}async clearAllHistory(){await Qt.window.showWarningMessage("Are you sure you want to clear all query history?",{modal:!0},"Clear All")==="Clear All"&&(await new ar(this._context).clearHistory(),this.refresh(),Qt.window.showInformationMessage("Query history cleared"))}async deleteEntry(e,r){let n=r?`: ${r.substring(0,50)}${r.length>50?"...":""}`:"";if(await Qt.window.showWarningMessage(`Are you sure you want to delete this query${n}?`,{modal:!0},"Delete")==="Delete"){let s=new ar(this._context);await s.deleteEntry(e),this._view?.webview.postMessage({type:"entryDeleted",id:e});let o=await s.getStats();this._view?.webview.postMessage({type:"updateStats",stats:o})}}async executeQuery(e){let r=await Qt.workspace.openTextDocument({content:e,language:"sql"});await Qt.window.showTextDocument(r)}async toggleFavorite(e){await new ar(this._context).toggleFavorite(e),this.refresh()}async updateEntry(e,r,n){await new ar(this._context).updateEntry(e,r,n),this.refresh(),Qt.window.showInformationMessage("Entry updated successfully")}async requestEdit(e){let i=(await new ar(this._context).getHistory()).find(a=>a.id===e);if(!i){Qt.window.showErrorMessage("Entry not found (might be archived)");return}let s=await Qt.window.showInputBox({prompt:"Enter tags (comma separated)",value:i.tags||"",placeHolder:"tag1, tag2, tag3"});if(s===void 0)return;let o=await Qt.window.showInputBox({prompt:"Enter description",value:i.description||"",placeHolder:"Description for this query"});o!==void 0&&await this.updateEntry(e,s,o)}async requestTagFilter(e){if(e.length===1)await this.sendFilteredByTagToWebview(e[0]);else if(e.length>1){let r=await Qt.window.showQuickPick(e,{placeHolder:"Filter by which tag?"});r&&await this.sendFilteredByTagToWebview(r)}}async sendFavoritesToWebview(){if(!this._view)return;let e=new ar(this._context),r=await e.getFavorites(),n=await e.getStats();this._view.webview.postMessage({type:"historyData",history:r,stats:n,filter:"favorites",reset:!0})}async sendFilteredByTagToWebview(e){if(!this._view)return;let r=new ar(this._context),n=await r.getByTag(e),i=await r.getStats();this._view.webview.postMessage({type:"historyData",history:n,stats:i,filter:`tag: ${e}`,reset:!0})}_getHtmlForWebview(e){let r=e.asWebviewUri(Qt.Uri.joinPath(this._extensionUri,"media","queryHistory.css")),n=e.asWebviewUri(Qt.Uri.joinPath(this._extensionUri,"media","queryHistory.js"));return`<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Security-Policy" content="default-src 'none'; style-src ${e.cspSource}; script-src ${e.cspSource};">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Query History</title>
    <link href="${r}" rel="stylesheet">
</head>
<body>
    <div class="toolbar">
        <div class="toolbar-top">
            <input type="search" id="searchInput" placeholder="Search queries..." />
            <span class="stats" id="stats">Loading...</span>
        </div>
        <div class="toolbar-buttons">
            <button class="secondary" id="showAllBtn">\u{1F4DC} All</button>
            <button class="secondary" id="showFavoritesBtn">\u2B50 Favorites</button>
            <button class="secondary" id="refreshBtn">\u21BB Refresh</button>
            <button class="secondary" id="clearAllBtn">\u{1F5D1}\uFE0F Clear All</button>
        </div>
    </div>
    <div class="history-container" id="historyContainer">
        <div class="empty-state">
            <div class="empty-state-icon">\u{1F4DC}</div>
            <div>No query history yet</div>
        </div>
    </div>
    <div id="loadingIndicator" class="loading-indicator" style="display:none;">Loading more...</div>

    <script src="${n}"></script>
</body>
</html>`}};var bt=q(require("vscode"));lr();var eE=class t{static{this.viewType="netezza.editData"}static async createOrShow(e,r,n,i){if(!r||!r.label||!r.dbName||!r.schema){bt.window.showErrorMessage("Invalid table selection");return}let s=r.label,o=r.schema,a=r.dbName,l=`${a}.${o}.${s}`,c=bt.window.createWebviewPanel(t.viewType,`Edit: ${s}`,bt.ViewColumn.One,{enableScripts:!0,localResourceRoots:[bt.Uri.joinPath(e,"media")],retainContextWhenHidden:!0});c.webview.html=this._getHtmlForWebview(c.webview,e,l),this._loadData(c,a,o,s,r.connectionName,n,i),c.webview.onDidReceiveMessage(async u=>{try{switch(u.command){case"save":await this._handleSave(c,u.changes,l,r.connectionName,n,i),this._loadData(c,a,o,s,r.connectionName,n,i);break;case"refresh":this._loadData(c,a,o,s,r.connectionName,n,i);break;case"updateTableComment":await this._execSimpleCommand(n,i,r.connectionName,`COMMENT ON TABLE ${l} IS '${(u.comment||"").replace(/'/g,"''")}'`,"Table comment updated");break;case"updateColumnComment":await this._execSimpleCommand(n,i,r.connectionName,`COMMENT ON COLUMN ${l}.${u.column} IS '${(u.comment||"").replace(/'/g,"''")}'`,"Column comment updated");break;case"addColumn":await this._execSimpleCommand(n,i,r.connectionName,`ALTER TABLE ${l} ADD COLUMN ${u.name} ${u.type}`,`Column ${u.name} added`,!0),this._loadData(c,a,o,s,r.connectionName,n,i);break;case"dropColumn":await this._execSimpleCommand(n,i,r.connectionName,`ALTER TABLE ${l} DROP COLUMN ${u.column}`,`Column ${u.column} dropped`,!0),this._loadData(c,a,o,s,r.connectionName,n,i);break;case"error":bt.window.showErrorMessage(u.text);break;case"info":bt.window.showInformationMessage(u.text);break}}catch(d){bt.window.showErrorMessage(`Error: ${d instanceof Error?d.message:String(d)}`)}})}static async _execSimpleCommand(e,r,n,i,s,o=!1){try{await Mr(e,i,!0,n,r),bt.window.showInformationMessage(s)}catch(a){bt.window.showErrorMessage(`Operation failed: ${a instanceof Error?a.message:String(a)}`)}}static async _loadData(e,r,n,i,s,o,a){let l=`${r}.${n}.${i}`;try{e.webview.postMessage({command:"setLoading",loading:!0,message:"Fetching data..."});let c=p=>oe(o,p,!0,a,s),[u,d]=await Promise.all([oe(o,`SELECT ROWID, * FROM ${l} LIMIT 50000`,!0,a,s),ow(c,r,n,i)]),E=d.tableComment||"",f=aw(d.columns),T=[];try{u&&u.data?(T=Ee(u),console.log("[EditDataProvider] Parsed data rows:",T.length)):console.log("[EditDataProvider] No data returned")}catch(p){console.error("[EditDataProvider] Data Parse Error",p)}let h=[];f.length>0?h=["ROWID",...f.map(p=>p.ATTNAME)]:T.length>0&&(h=Object.keys(T[0])),console.log("[EditDataProvider] Sending to webview:",{dataRows:T.length,columns:h.length}),e.webview.postMessage({command:"setData",data:T,columns:h,metadata:{tableComment:E,columns:f}})}catch(c){let u=c instanceof Error?c.message:String(c);bt.window.showErrorMessage(`Failed to load data: ${u}`),e.webview.postMessage({command:"setError",text:u})}finally{e.webview.postMessage({command:"setLoading",loading:!1})}}static async _handleSave(e,r,n,i,s,o){let a=[];if(r.deletes&&r.deletes.length>0){let l=r.deletes.join(",");a.push(`DELETE FROM ${n} WHERE ROWID IN (${l})`)}if(r.updates&&r.updates.length>0)for(let l of r.updates){let c=[];for(let[u,d]of Object.entries(l.changes))u!=="ROWID"&&c.push(`${u} = ${this._formatValue(d)}`);c.length>0&&a.push(`UPDATE ${n} SET ${c.join(", ")} WHERE ROWID = ${l.rowId}`)}if(r.inserts&&r.inserts.length>0)for(let l of r.inserts){let c=Object.keys(l).filter(d=>d!=="ROWID");if(c.length===0)continue;let u=c.map(d=>this._formatValue(l[d]));a.push(`INSERT INTO ${n} (${c.join(", ")}) VALUES (${u.join(", ")})`)}if(a.length===0){bt.window.showInformationMessage("No changes to save.");return}try{let l=["BEGIN",...a,"COMMIT"];await Gc(s,l,o),bt.window.showInformationMessage(`Successfully executed ${a.length} changes.`)}catch(l){bt.window.showErrorMessage(`Failed to save changes: ${l instanceof Error?l.message:String(l)}`)}}static _formatValue(e){return e==null||e===""?"NULL":typeof e=="number"?e.toString():typeof e=="boolean"?e?"TRUE":"FALSE":`'${String(e).replace(/'/g,"''")}'`}static _getHtmlForWebview(e,r,n){let i=e.asWebviewUri(bt.Uri.joinPath(r,"media","tanstack-table-core.js")),s=e.asWebviewUri(bt.Uri.joinPath(r,"media","tanstack-virtual-core.js")),o=e.asWebviewUri(bt.Uri.joinPath(r,"media","editDataPanel.js")),a=e.asWebviewUri(bt.Uri.joinPath(r,"media","editDataPanel.css")),l=e.asWebviewUri(bt.Uri.joinPath(r,"media","codicon.ttf")),c=x8();return`<!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <meta http-equiv="Content-Security-Policy" content="default-src 'none'; font-src ${e.cspSource}; style-src ${e.cspSource} 'unsafe-inline'; script-src 'nonce-${c}';">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <link href="${a}" rel="stylesheet">
            <style>
                @font-face {
                    font-family: 'codicon';
                    src: url('${l}') format('truetype');
                }
                .codicon { font-family: 'codicon'; }
            </style>
            <script nonce="${c}" src="${i}"></script>
            <script nonce="${c}" src="${s}"></script>
            <title>Edit Data: ${n}</title>
        </head>
        <body>
            <div class="main-layout">
                <!-- Tabs Header -->
                <div class="tabs-header">
                    <div class="tab active" data-target="tab-data">
                        Data
                    </div>
                    <div class="tab" data-target="tab-metadata">
                        Table Description
                    </div>
                </div>

                <!-- Tab: Data -->
                <div id="tab-data" class="tab-content active">
                    <div class="toolbar">
                        <span id="status" class="status"></span>
                        <div class="actions">
                            <button id="refreshBtn">Refresh</button>
                            <button id="addRowBtn">Add Row</button>
                            <button id="saveBtn" class="primary">Save Changes</button>
                        </div>
                    </div>
                    <div id="gridContainer" class="grid-container"></div>
                </div>

                <!-- Tab: Metadata -->
                <div id="tab-metadata" class="tab-content">
                    <div id="metadataContent" class="metadata-content">
                        <!-- Populated by JS -->
                        Loading metadata...
                    </div>
                </div>
            </div>
            
            <script nonce="${c}" src="${o}"></script>
        </body>
        </html>`}};function x8(){let t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let r=0;r<32;r++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}var uw=q(require("vscode"));function JR(t,e){return e?t.startsWith(`${e}|`):!0}function Cn(t){if(!t||typeof t!="object")return;let e=t;if(e.label)return typeof e.label=="string"?e.label:e.label.label}function tE(t){let e={};return t.forEach((r,n)=>{e[n]=r}),e}function cw(t){let e={};return t.forEach((r,n)=>{let i={};r.data.forEach((s,o)=>{i[o]=s}),e[n]={data:i,timestamp:r.timestamp}}),e}function QR(t,e,r){return e?`${t}.${e}.${r}`:`${t}..${r}`}var M8=4,rE=class{constructor(){this.dbCache=new Map;this.schemaCache=new Map;this.tableCache=new Map;this.columnCache=new Map;this.tableIdMap=new Map;this.typeGroupCache=new Map;let r=uw.workspace.getConfiguration("netezza").get("cacheTTL",M8);this.CACHE_TTL=r*60*60*1e3}isEntryValid(e){return Date.now()-e<this.CACHE_TTL}setOnDataChange(e){this.onDataChange=e}clearAll(){this.dbCache.clear(),this.schemaCache.clear(),this.tableCache.clear(),this.columnCache.clear(),this.tableIdMap.clear(),this.typeGroupCache.clear()}getDatabases(e){let r=this.dbCache.get(e);if(r){if(!this.isEntryValid(r.timestamp)){this.dbCache.delete(e);return}return r.data}}setDatabases(e,r){this.dbCache.set(e,{data:r,timestamp:Date.now()}),this.onDataChange?.("db")}getSchemas(e,r){let n=`${e}|${r}`,i=this.schemaCache.get(n);if(i){if(!this.isEntryValid(i.timestamp)){this.schemaCache.delete(n);return}return i.data}}setSchemas(e,r,n){let i=`${e}|${r}`;this.schemaCache.set(i,{data:n,timestamp:Date.now()}),this.onDataChange?.("schema")}getTables(e,r){let n=`${e}|${r}`,i=this.tableCache.get(n);if(i){if(!this.isEntryValid(i.timestamp)){this.tableCache.delete(n),this.tableIdMap.delete(n);return}return i.data}}getTablesAllSchemas(e,r){let n=`${e}|${r}.`,i=[],s=new Set;for(let[o,a]of this.tableCache)if(o.startsWith(n))for(let l of a.data){let c=Cn(l);c&&!s.has(c.toUpperCase())&&(s.add(c.toUpperCase()),i.push(l))}return i.length>0?i:void 0}setTables(e,r,n,i){let s=Date.now(),o=`${e}|${r}`;this.tableCache.set(o,{data:n,timestamp:s}),this.tableIdMap.set(o,{data:i,timestamp:s}),this.onDataChange?.("table")}getObjectsWithSchema(e,r){let n=`${e}|${r}.`,i=[],s=new Set;for(let[o,a]of this.tableCache)if(o.startsWith(n)||o===`${e}|${r}..`){let l=o.split("|");if(l.length<2)continue;let u=l[1].split("."),d=(u.length>1?u[1]:"")||"",E=this.tableIdMap.get(o);for(let f of a.data){let T=Cn(f),h=`${d}.${T}`;if(T&&!s.has(h)){s.add(h);let p;if(E){let S=QR(r,d||void 0,T);p=E.data.get(S)}i.push({item:f,schema:d,objId:p})}}}return i}getColumns(e,r){let n=`${e}|${r}`,i=this.columnCache.get(n);if(i){if(!this.isEntryValid(i.timestamp)){this.columnCache.delete(n);return}return i.data}}setColumns(e,r,n){let i=`${e}|${r}`;this.columnCache.set(i,{data:n,timestamp:Date.now()}),this.onDataChange?.("column")}findTableId(e,r){let n=`${e}|`;for(let[i,s]of this.tableIdMap)if(i.startsWith(n)){let o=s.data.get(r);if(o!==void 0)return o}}getTypeGroups(e,r){let n=`${e}|${r}`;return this.typeGroupCache.get(n)?.data}setTypeGroups(e,r,n){let i=`${e}|${r}`;this.typeGroupCache.set(i,{data:n,timestamp:Date.now()})}findObjectWithType(e,r,n,i){let s=`${e}|`,o=i.toUpperCase();for(let[a,l]of this.tableCache){if(!a.startsWith(s))continue;let c=a.split("|");if(c.length<2)continue;let d=c[1].split("."),E=d[0],f=d.length>1?d[1]:void 0;if(E.toUpperCase()===r.toUpperCase()&&!(n!=null&&n!==""&&f?.toUpperCase()!==n.toUpperCase()))for(let T of l.data){let h=Cn(T);if(h?.toUpperCase()===o){let p=T.objType||(T.kind===18?"VIEW":"TABLE"),S=QR(E,f,h),R=this.tableIdMap.get(a)?.data.get(S);if(R!==void 0)return{objId:R,objType:p,schema:f||"",name:h||i}}}}}invalidateSchema(e,r,n){let i=n?`${r}.${n}`:`${r}..`,s=`${e}|${i}`;this.tableCache.has(s)&&(this.tableCache.delete(s),this.tableIdMap.delete(s),this.onDataChange?.("table"),console.log(`[CacheStorage] Invalidated cache for ${s}`))}getDbCacheMap(){return this.dbCache}getSchemaCacheMap(){return this.schemaCache}getTableCacheMap(){return this.tableCache}getTableIdMapMap(){return this.tableIdMap}loadDbCache(e){this.dbCache=e}loadSchemaCache(e){this.schemaCache=e}loadTableCache(e){this.tableCache=e}loadTableIdMap(e){this.tableIdMap=e}};var $c=q(require("vscode")),co=q(require("fs"));var v8=4,nE=class{constructor(e,r){this.context=e;this.storage=r;let i=$c.workspace.getConfiguration("netezza").get("cacheTTL",v8);this.CACHE_TTL=i*60*60*1e3,this.context.storageUri&&(this.cacheFilePath=$c.Uri.joinPath(this.context.storageUri,"schema-cache.json").fsPath,this.ensureStorageDir())}async ensureStorageDir(){if(this.context.storageUri)try{await $c.workspace.fs.createDirectory(this.context.storageUri)}catch{}}async initialize(){try{let e=["sqlCompletion.dbCache","sqlCompletion.schemaCache","sqlCompletion.tableCache","sqlCompletion.columnCache","sqlCompletion.tableIdMap"];for(let r of e)this.context.workspaceState.get(r)!==void 0&&await this.context.workspaceState.update(r,void 0)}catch(e){console.error("[CachePersistence] Error cleaning up legacy workspace state:",e)}if(this.cacheFilePath)try{if(co.existsSync(this.cacheFilePath)){let e=await co.promises.readFile(this.cacheFilePath,"utf-8"),r=JSON.parse(e),n=Date.now();if(r.dbCache){let i=new Map;for(let[s,o]of Object.entries(r.dbCache))n-o.timestamp<this.CACHE_TTL&&i.set(s,o);this.storage.loadDbCache(i)}if(r.schemaCache){let i=new Map;for(let[s,o]of Object.entries(r.schemaCache))n-o.timestamp<this.CACHE_TTL&&i.set(s,o);this.storage.loadSchemaCache(i)}if(r.tableCache){let i=new Map;for(let[s,o]of Object.entries(r.tableCache))n-o.timestamp<this.CACHE_TTL&&i.set(s,o);this.storage.loadTableCache(i)}if(r.tableIdMap){let i=new Map;for(let[s,o]of Object.entries(r.tableIdMap))(this.storage.getTableCacheMap().has(s)||n-o.timestamp<this.CACHE_TTL)&&i.set(s,{data:new Map(Object.entries(o.data)),timestamp:o.timestamp});this.storage.loadTableIdMap(i)}}}catch(e){console.error("[CachePersistence] Error loading cache from disk:",e)}}scheduleSave(e){this.saveTimeoutId&&clearTimeout(this.saveTimeoutId),this.saveTimeoutId=setTimeout(()=>this.flushSave(),2e3)}async flushSave(){if(this.saveTimeoutId=void 0,!!this.cacheFilePath)try{let e={dbCache:tE(this.storage.getDbCacheMap()),schemaCache:tE(this.storage.getSchemaCacheMap()),tableCache:tE(this.storage.getTableCacheMap()),tableIdMap:cw(this.storage.getTableIdMapMap())};await co.promises.writeFile(this.cacheFilePath,JSON.stringify(e),"utf-8")}catch(e){console.error("[CachePersistence] Error saving cache to disk:",e)}}async clearCache(){if(this.saveTimeoutId&&(clearTimeout(this.saveTimeoutId),this.saveTimeoutId=void 0),this.storage.clearAll(),this.cacheFilePath)try{co.existsSync(this.cacheFilePath)&&await co.promises.unlink(this.cacheFilePath)}catch(e){console.error("[CachePersistence] Error clearing cache file:",e)}}};function Ha(t){return!t.columns||!t.data||t.data.length===0?[]:t.data.map(e=>{let r={};return t.columns.forEach((n,i)=>{r[n.name]=e[i]}),r})}var iE=class{constructor(e){this.storage=e;this.columnPrefetchInProgress=new Set;this.allObjectsPrefetchTriggeredSet=new Set;this.connectionPrefetchTriggered=new Set;this.connectionPrefetchInProgress=new Set}async prefetchColumnsForSchema(e,r,n,i){let s=n?`${r}.${n}`:`${r}..`,o=`${e}|${s}`;if(this.columnPrefetchInProgress.has(o))return;let a=this.storage.getTables(e,s);if(!(!a||a.length===0)){this.columnPrefetchInProgress.add(o);try{let l=[];for(let E of a){let f=Cn(E);if(!f)continue;let T=`${r}.${n||""}.${f}`;this.storage.getColumns(e,T)||l.push(f)}if(l.length===0)return;let c=`${r}..`,u=n?`AND UPPER(O.SCHEMA) = UPPER('${n}')`:"",d=`
                SELECT O.OBJNAME AS TABLENAME, C.ATTNAME, C.FORMAT_TYPE, C.ATTNUM
                FROM ${c}_V_RELATION_COLUMN C
                JOIN ${c}_V_OBJECT_DATA O ON C.OBJID = O.OBJID
                WHERE UPPER(O.DBNAME) = UPPER('${r}')
                ${u}
                AND O.OBJTYPE IN ('TABLE', 'VIEW', 'EXTERNAL TABLE')
                ORDER BY O.OBJNAME, C.ATTNUM
            `;try{let E=await i(d);if(E){let f=Ha(E),T=new Map;for(let h of f){let p=h.TABLENAME;T.has(p)||T.set(p,[]),T.get(p).push({ATTNAME:h.ATTNAME,FORMAT_TYPE:h.FORMAT_TYPE,label:h.ATTNAME,kind:5,detail:h.FORMAT_TYPE})}for(let[h,p]of T){let S=`${r}.${n||""}.${h}`;this.storage.setColumns(e,S,p)}}}catch(E){console.error("[CachePrefetcher] Error fetching columns:",E)}}finally{this.columnPrefetchInProgress.delete(o)}}}async prefetchAllObjects(e,r){let n=`ALL_OBJECTS|${e}`;if(!this.allObjectsPrefetchTriggeredSet.has(n)){this.allObjectsPrefetchTriggeredSet.add(n),console.log(`[CachePrefetcher] Starting background prefetch of all objects (Connection: ${e})`);try{let s=await r(`
                SELECT OBJNAME, OBJID, SCHEMA, DBNAME, OBJTYPE
                FROM _V_OBJECT_DATA 
                WHERE OBJTYPE IN ('TABLE', 'VIEW') 
                ORDER BY DBNAME, SCHEMA, OBJNAME
            `);if(!s)return;let o=Ha(s),a=new Map;for(let l of o){let c=l.SCHEMA?`${l.DBNAME}.${l.SCHEMA}`:`${l.DBNAME}..`;a.has(c)||a.set(c,{tables:[],idMap:new Map});let u=a.get(c);u.tables.push({OBJNAME:l.OBJNAME,label:l.OBJNAME,kind:l.OBJTYPE==="VIEW"?18:6,detail:l.SCHEMA?l.OBJTYPE==="VIEW"?"View":"Table":`${l.OBJTYPE==="VIEW"?"View":"Table"} (${l.SCHEMA})`,objType:l.OBJTYPE,OBJID:l.OBJID,SCHEMA:l.SCHEMA});let d=l.SCHEMA?`${l.DBNAME}.${l.SCHEMA}.${l.OBJNAME}`:`${l.DBNAME}..${l.OBJNAME}`;u.idMap.set(d,l.OBJID)}for(let[l,c]of a)this.storage.setTables(e,l,c.tables,c.idMap);console.log(`[CachePrefetcher] Prefetched tables for ${a.size} schema(s) on ${e}`)}catch(i){console.error("[CachePrefetcher] Error in prefetchAllObjects:",i)}}}hasAllObjectsPrefetchTriggered(e){return this.allObjectsPrefetchTriggeredSet.has(`ALL_OBJECTS|${e}`)}hasConnectionPrefetchTriggered(e){return this.connectionPrefetchTriggered.has(e)}triggerConnectionPrefetch(e,r){this.connectionPrefetchTriggered.has(e)||this.connectionPrefetchInProgress.has(e)||(this.connectionPrefetchInProgress.add(e),console.log(`[CachePrefetcher] Starting eager prefetch for connection: ${e}`),this.executeConnectionPrefetch(e,r).catch(n=>console.error("[CachePrefetcher] Connection prefetch error:",n)).finally(()=>{this.connectionPrefetchInProgress.delete(e),this.connectionPrefetchTriggered.add(e),console.log(`[CachePrefetcher] Completed eager prefetch for connection: ${e}`)}))}async executeConnectionPrefetch(e,r){let n=await this.prefetchDatabases(e,r);!n||n.length===0||(await Promise.all(n.map(i=>this.prefetchSchemasForDb(e,i,r))),await this.prefetchAllTablesAndViews(e,r),await this.prefetchAllColumnsForConnection(e,r))}async prefetchDatabases(e,r){if(this.storage.getDatabases(e))return this.storage.getDatabases(e)?.map(i=>Cn(i)).filter(Boolean)||[];try{let i=await r("SELECT DATABASE FROM system.._v_database ORDER BY DATABASE");if(!i)return[];let s=Ha(i),o=s.map(a=>({DATABASE:a.DATABASE,label:a.DATABASE,kind:9,detail:"Database"}));return this.storage.setDatabases(e,o),s.map(a=>a.DATABASE)}catch(n){return console.error("[CachePrefetcher] prefetchDatabases error:",n),[]}}async prefetchSchemasForDb(e,r,n){if(!this.storage.getSchemas(e,r))try{let i=`SELECT SCHEMA FROM ${r}.._V_SCHEMA ORDER BY SCHEMA`,s=await n(i);if(!s)return;let a=Ha(s).filter(l=>l.SCHEMA!=null&&l.SCHEMA!=="").map(l=>({SCHEMA:l.SCHEMA,label:l.SCHEMA,kind:19,detail:`Schema in ${r}`,insertText:l.SCHEMA,sortText:l.SCHEMA,filterText:l.SCHEMA}));this.storage.setSchemas(e,r,a)}catch(i){console.error(`[CachePrefetcher] prefetchSchemasForDb error for ${r}:`,i)}}async prefetchAllTablesAndViews(e,r){try{let i=await r(`
                SELECT OBJNAME, OBJID, SCHEMA, DBNAME, OBJTYPE
                FROM _V_OBJECT_DATA 
                WHERE OBJTYPE IN ('TABLE', 'VIEW', 'EXTERNAL TABLE')
                ORDER BY DBNAME, SCHEMA, OBJNAME
            `);if(!i)return;let s=Ha(i),o=new Map;for(let a of s){let l=a.SCHEMA?`${a.DBNAME}.${a.SCHEMA}`:`${a.DBNAME}..`;o.has(l)||o.set(l,{tables:[],idMap:new Map});let c=o.get(l);c.tables.push({OBJNAME:a.OBJNAME,label:a.OBJNAME,kind:a.OBJTYPE==="VIEW"?18:6,detail:a.SCHEMA?a.OBJTYPE:`${a.OBJTYPE} (${a.SCHEMA})`,objType:a.OBJTYPE});let u=a.SCHEMA?`${a.DBNAME}.${a.SCHEMA}.${a.OBJNAME}`:`${a.DBNAME}..${a.OBJNAME}`;c.idMap.set(u,a.OBJID)}for(let[a,l]of o)this.storage.getTables(e,a)||this.storage.setTables(e,a,l.tables,l.idMap);console.log(`[CachePrefetcher] Prefetched tables/views for ${o.size} schema(s)`)}catch(n){console.error("[CachePrefetcher] prefetchAllTablesAndViews error:",n)}}async prefetchAllColumnsForConnection(e,r){try{let n=`${e}|`,i=[];for(let[u,d]of this.storage.tableCache){if(!u.startsWith(n))continue;let E=u.split("|");if(E.length<2)continue;let T=E[1].split("."),h=T[0],p=T.length>1?T[1]:"";for(let S of d.data){let m=Cn(S);m&&i.push({schema:p,name:m,db:h})}}if(i.length===0)return;let s=0,o=Date.now(),a=new Map;for(let u of i)a.has(u.db)||a.set(u.db,[]),a.get(u.db).push(u);let l=Array.from(a.entries()).map(async([u,d])=>{let E=`
                    SELECT O.OBJNAME AS TABLENAME, O.SCHEMA, O.DBNAME, 
                           C.ATTNAME, C.FORMAT_TYPE, C.ATTNUM
                    FROM ${u}.._V_RELATION_COLUMN C
                    JOIN ${u}.._V_OBJECT_DATA O ON C.OBJID = O.OBJID
                    WHERE O.DBNAME = '${u}' 
                    AND O.OBJTYPE IN ('TABLE', 'VIEW', 'EXTERNAL TABLE')
                    ORDER BY O.SCHEMA, O.OBJNAME, C.ATTNUM
                `;try{let f=Date.now(),T=await r(E),h=Date.now()-f;if(T){let p=Date.now(),S=Ha(T),m=Date.now()-p,R=new Map;for(let A of S){let g=`${A.DBNAME}.${A.SCHEMA||""}.${A.TABLENAME}`;R.has(g)||R.set(g,[]),R.get(g).push({ATTNAME:A.ATTNAME,FORMAT_TYPE:A.FORMAT_TYPE,label:A.ATTNAME,kind:5,detail:A.FORMAT_TYPE})}for(let[A,g]of R)this.storage.getColumns(e,A)||(this.storage.setColumns(e,A,g),s++);console.log(`[CachePrefetcher] DB ${u}: ${d.length} tables (expected), ${S.length} columns (total fetched) | query=${h}ms, parse=${m}ms`)}}catch(f){console.error(`[CachePrefetcher] Error fetching columns for DB ${u}:`,f)}});await Promise.all(l);let c=Date.now()-o;console.log(`[CachePrefetcher] Prefetched columns for ${s} tables/views in ${c}ms`)}catch(n){console.error("[CachePrefetcher] prefetchAllColumnsForConnection error:",n)}}};function dw(t,e,r){let n=[],i=e.toLowerCase();for(let[s,o]of t.tableCache){if(!JR(s,r))continue;let a=s.split("|");if(a.length<2)continue;let c=a[1].split("."),u=c[0],d=c.length>1?c[1]:void 0;for(let E of o.data){let f=Cn(E);if(f&&f.toLowerCase().includes(i)){let T=E.objType||(E.kind===18?"VIEW":"TABLE");n.push({name:f,type:T,database:u,schema:d||(E.detail&&E.detail.includes("(")?E.detail.match(/\((.*?)\)/)?.[1]:void 0)})}}}for(let[s,o]of t.columnCache){if(!JR(s,r))continue;let a=s.split("|");if(a.length<2)continue;let c=a[1].split("."),u=c[0],d=c[1],E=c[2];for(let f of o.data){let T=Cn(f);T&&T.toLowerCase().includes(i)&&n.push({name:T,type:"COLUMN",database:u,schema:d,parent:E})}}return n}var sE=class{constructor(e){this.storage=new rE,this.persistence=new nE(e,this.storage),this.prefetcher=new iE(this.storage),this.storage.setOnDataChange(r=>{this.persistence.scheduleSave(r)})}async initialize(){return this.persistence.initialize()}scheduleSave(e){this.persistence.scheduleSave(e)}async flushSave(){return this.persistence.flushSave()}async clearCache(){return this.persistence.clearCache()}getDatabases(e){return this.storage.getDatabases(e)}setDatabases(e,r){this.storage.setDatabases(e,r)}getSchemas(e,r){return this.storage.getSchemas(e,r)}setSchemas(e,r,n){this.storage.setSchemas(e,r,n)}getTables(e,r){return this.storage.getTables(e,r)}getTablesAllSchemas(e,r){return this.storage.getTablesAllSchemas(e,r)}setTables(e,r,n,i){this.storage.setTables(e,r,n,i)}getObjectsWithSchema(e,r){return this.storage.getObjectsWithSchema(e,r)}getColumns(e,r){return this.storage.getColumns(e,r)}setColumns(e,r,n){this.storage.setColumns(e,r,n)}findTableId(e,r){return this.storage.findTableId(e,r)}getTypeGroups(e,r){return this.storage.getTypeGroups(e,r)}setTypeGroups(e,r,n){this.storage.setTypeGroups(e,r,n)}findObjectWithType(e,r,n,i){return this.storage.findObjectWithType(e,r,n,i)}invalidateSchema(e,r,n){this.storage.invalidateSchema(e,r,n)}search(e,r){return dw(this.storage,e,r)}async prefetchColumnsForSchema(e,r,n,i){return this.prefetcher.prefetchColumnsForSchema(e,r,n,i)}async prefetchAllObjects(e,r){return this.prefetcher.prefetchAllObjects(e,r)}hasAllObjectsPrefetchTriggered(e){return this.prefetcher.hasAllObjectsPrefetchTriggered(e)}hasConnectionPrefetchTriggered(e){return this.prefetcher.hasConnectionPrefetchTriggered(e)}triggerConnectionPrefetch(e,r){this.prefetcher.triggerConnectionPrefetch(e,r)}get schemaCache(){return this.storage.schemaCache}get tableCache(){return this.storage.tableCache}get columnCache(){return this.storage.columnCache}get tableIdMap(){return this.storage.tableIdMap}get typeGroupCache(){return this.storage.typeGroupCache}};var Kr=q(require("vscode"));var cr=q(require("vscode"));function fw(t){switch(t){case"error":return cr.DiagnosticSeverity.Error;case"warning":return cr.DiagnosticSeverity.Warning;case"information":return cr.DiagnosticSeverity.Information;case"hint":return cr.DiagnosticSeverity.Hint;case"off":return null;default:return cr.DiagnosticSeverity.Warning}}function ZR(t,e){let r=!1,n=!1,i=!1,s=!1;for(let o=0;o<e&&o<t.length;o++){let a=t[o],l=o+1<t.length?t[o+1]:"";i?a===`
`&&(i=!1):s?a==="*"&&l==="/"&&(s=!1,o++):r?a==="'"&&t[o-1]!=="\\"&&(r=!1):n?a==='"'&&t[o-1]!=="\\"&&(n=!1):a==="-"&&l==="-"?i=!0:a==="/"&&l==="*"?s=!0:a==="'"?r=!0:a==='"'&&(n=!0)}return r||n||i||s}function un(t,e){let r=[],n,i=new RegExp(e.source,e.flags.includes("g")?e.flags:e.flags+"g");for(;(n=i.exec(t))!==null;)ZR(t,n.index)||r.push(n);return r}var U8={id:"NZ001",name:"Select Star",description:"Avoid using SELECT * - specify explicit column names for better performance and maintainability",defaultSeverity:cr.DiagnosticSeverity.Warning,check(t){let e=[],n=un(t,/\bSELECT\s+\*/gi);for(let i of n){let s=i[0].indexOf("*");e.push({ruleId:this.id,message:`${this.id}: ${this.description}`,severity:this.defaultSeverity,startOffset:i.index+s,endOffset:i.index+s+1})}return e}},B8={id:"NZ002",name:"Delete Without Where",description:"DELETE statement without WHERE clause will delete all rows",defaultSeverity:cr.DiagnosticSeverity.Error,check(t){let e=[],n=un(t,/\bDELETE\s+FROM\s+[\w."]+/gi);for(let i of n){let s=t.substring(i.index+i[0].length),o=s.indexOf(";"),a=o>=0?s.substring(0,o):s;/\bWHERE\b/i.test(a)||e.push({ruleId:this.id,message:`${this.id}: ${this.description}`,severity:this.defaultSeverity,startOffset:i.index,endOffset:i.index+6})}return e}},F8={id:"NZ003",name:"Update Without Where",description:"UPDATE statement without WHERE clause will update all rows",defaultSeverity:cr.DiagnosticSeverity.Error,check(t){let e=[],n=un(t,/\bUPDATE\s+[\w."]+\s+SET\b/gi);for(let i of n){let s=t.substring(i.index+i[0].length),o=s.indexOf(";"),a=o>=0?s.substring(0,o):s;/\bWHERE\b/i.test(a)||e.push({ruleId:this.id,message:`${this.id}: ${this.description}`,severity:this.defaultSeverity,startOffset:i.index,endOffset:i.index+6})}return e}},G8={id:"NZ004",name:"Cross Join",description:"CROSS JOIN produces a Cartesian product - verify this is intentional",defaultSeverity:cr.DiagnosticSeverity.Warning,check(t){let e=[],n=un(t,/\bCROSS\s+JOIN\b/gi);for(let i of n)e.push({ruleId:this.id,message:`${this.id}: ${this.description}`,severity:this.defaultSeverity,startOffset:i.index,endOffset:i.index+i[0].length});return e}},H8={id:"NZ005",name:"Leading Wildcard Like",description:"LIKE pattern with leading wildcard ('%...') prevents index usage",defaultSeverity:cr.DiagnosticSeverity.Hint,check(t){let e=[],n=un(t,/\bLIKE\s+'%/gi);for(let i of n)e.push({ruleId:this.id,message:`${this.id}: ${this.description}`,severity:this.defaultSeverity,startOffset:i.index,endOffset:i.index+i[0].length});return e}},W8={id:"NZ006",name:"Order By Without Limit",description:"ORDER BY without LIMIT/FETCH may cause performance issues on large datasets",defaultSeverity:cr.DiagnosticSeverity.Information,check(t){let e=[],n=un(t,/\bORDER\s+BY\b/gi);for(let i of n){let s=t.substring(i.index+i[0].length),o=s.indexOf(";"),a=o>=0?s.substring(0,o):s;if(!/\b(LIMIT|FETCH|TOP)\b/i.test(a)){let l=t.substring(0,i.index);/\bTOP\s+\d+\b/i.test(l)||e.push({ruleId:this.id,message:`${this.id}: ${this.description}`,severity:this.defaultSeverity,startOffset:i.index,endOffset:i.index+i[0].length})}}return e}},k8={id:"NZ007",name:"Inconsistent Keyword Case",description:"SQL keywords have inconsistent casing - consider using consistent UPPER or lower case",defaultSeverity:cr.DiagnosticSeverity.Warning,check(t){let e=[],r=["SELECT","FROM","WHERE","JOIN","LEFT","RIGHT","INNER","OUTER","ON","AND","OR","INSERT","INTO","UPDATE","DELETE","CREATE","DROP","ALTER","TABLE","VIEW","INDEX","ORDER","BY","GROUP","HAVING","UNION","ALL","DISTINCT","AS","SET","VALUES","NULL","NOT","IN","BETWEEN","LIKE","IS","EXISTS","CASE","WHEN","THEN","ELSE","END","LIMIT","OFFSET"],n=0,i=0,s=[],o=new Set;for(let c of r){let u=new RegExp(`\\b${c}\\b`,"gi"),d=un(t,u);for(let E of d){if(o.has(E.index))continue;o.add(E.index);let f=E[0],T;f===f.toUpperCase()?(n++,T="UPPER"):f===f.toLowerCase()?(i++,T="lower"):T="Mixed",s.push({keyword:f,index:E.index,type:T})}}let a=n>=i,l=a?"UPPER":"lower";for(let c of s)c.type==="Mixed"?e.push({ruleId:this.id,message:`${this.id}: Keyword '${c.keyword}' has mixed casing (expected ${a?"UPPERCASE":"lowercase"})`,severity:this.defaultSeverity,startOffset:c.index,endOffset:c.index+c.keyword.length}):c.type!==l&&e.push({ruleId:this.id,message:`${this.id}: Keyword '${c.keyword}' should be ${a?"UPPERCASE":"lowercase"}`,severity:this.defaultSeverity,startOffset:c.index,endOffset:c.index+c.keyword.length});return e}},$8={id:"NZ008",name:"Truncate Table",description:"TRUNCATE removes all data and cannot be rolled back - use with caution",defaultSeverity:cr.DiagnosticSeverity.Warning,check(t){let e=[],n=un(t,/\bTRUNCATE\s+(TABLE\s+)?[\w."]+/gi);for(let i of n)e.push({ruleId:this.id,message:`${this.id}: ${this.description}`,severity:this.defaultSeverity,startOffset:i.index,endOffset:i.index+8});return e}},Y8={id:"NZ009",name:"Or In Where Clause",description:"Multiple OR conditions may prevent index usage - consider UNION for better performance",defaultSeverity:cr.DiagnosticSeverity.Hint,check(t){let e=[],n=un(t,/\bWHERE\b/gi);for(let i of n){let s=t.substring(i.index),o=s.search(/\b(GROUP\s+BY|ORDER\s+BY|HAVING|LIMIT|UNION|;)/i),a=o>=0?s.substring(0,o):s,l=un(a,/\bOR\b/gi);if(l.length>=2){let c=l[0];e.push({ruleId:this.id,message:`${this.id}: ${this.description} (${l.length} OR conditions found)`,severity:this.defaultSeverity,startOffset:i.index+c.index,endOffset:i.index+c.index+2})}}return e}},V8={id:"NZ010",name:"Missing Table Alias",description:"Consider using table aliases in JOINs for better readability",defaultSeverity:cr.DiagnosticSeverity.Information,check(t){let e=[],n=un(t,/\bJOIN\s+([\w."]+)\s+ON\b/gi);for(let i of n)e.push({ruleId:this.id,message:`${this.id}: Table '${i[1]}' in JOIN has no alias - ${this.description}`,severity:this.defaultSeverity,startOffset:i.index,endOffset:i.index+i[0].length});return e}},q8={id:"NZ011",name:"CTAS Missing Distribution",description:"CREATE TABLE AS SELECT should specify explicit data distribution",defaultSeverity:cr.DiagnosticSeverity.Warning,check(t){let e=[],n=un(t,/\bCREATE\s+TABLE\s+(?:(?:IF\s+NOT\s+EXISTS\s+)?[\w."]+\s+)?AS\s+(?:\(\s*)?SELECT\b/gi);for(let i of n){let s=t.length;for(let u=i.index;u<t.length;u++)if(t[u]===";"&&!ZR(t,u)){s=u;break}let o=t.substring(i.index,s),l=/\bDISTRIBUTE\s+ON\b/i.exec(o),c=!1;l&&(ZR(t,i.index+l.index)||(c=!0)),c||e.push({ruleId:this.id,message:`${this.id}: ${this.description} - Add 'DISTRIBUTE ON (...)' or 'DISTRIBUTE ON RANDOM'`,severity:this.defaultSeverity,startOffset:i.index,endOffset:i.index+i[0].length})}return e}},Ew=[U8,B8,F8,G8,H8,W8,k8,$8,Y8,V8,q8];var tA=class{constructor(){this.disposables=[];this.diagnosticCollection=Kr.languages.createDiagnosticCollection("netezza-sql-linter")}activate(e){e.subscriptions.push(this.diagnosticCollection),this.disposables.push(Kr.workspace.onDidOpenTextDocument(r=>{this.shouldLint(r)&&this.lintDocument(r)})),this.disposables.push(Kr.workspace.onDidChangeTextDocument(r=>{this.shouldLint(r.document)&&this.lintDocument(r.document)})),this.disposables.push(Kr.workspace.onDidCloseTextDocument(r=>{this.diagnosticCollection.delete(r.uri)})),this.disposables.push(Kr.workspace.onDidChangeConfiguration(r=>{r.affectsConfiguration("netezza.linter")&&this.lintAllOpenDocuments()})),e.subscriptions.push(...this.disposables),this.lintAllOpenDocuments()}shouldLint(e){return e.languageId==="sql"}getConfig(){let e=Kr.workspace.getConfiguration("netezza.linter");return{enabled:e.get("enabled",!0),rules:e.get("rules",{})}}lintAllOpenDocuments(){for(let e of Kr.workspace.textDocuments)this.shouldLint(e)&&this.lintDocument(e)}lintDocument(e){let r=this.getConfig();if(!r.enabled){this.diagnosticCollection.delete(e.uri);return}let n=e.getText(),i=this.lintSql(n,r.rules),s=this.issuesToDiagnostics(e,i);this.diagnosticCollection.set(e.uri,s)}lintSql(e,r={}){let n=[];for(let i of Ew){let s=r[i.id],o=s!==void 0?fw(s):i.defaultSeverity;if(o===null)continue;let a=i.check(e);for(let l of a)n.push({...l,severity:o})}return n}issuesToDiagnostics(e,r){return r.map(n=>{let i=e.positionAt(n.startOffset),s=e.positionAt(n.endOffset),o=new Kr.Range(i,s),a=new Kr.Diagnostic(o,n.message,n.severity);return a.source="Netezza SQL Linter",a.code=n.ruleId,a})}dispose(){this.diagnosticCollection.dispose();for(let e of this.disposables)e.dispose()}},eA;function X8(){return eA||(eA=new tA),eA}function hw(t){let e=X8();return e.activate(t),e}var uo=q(require("vscode"));lo();var Yc=class{static{this.providedCodeActionKinds=[uo.CodeActionKind.QuickFix]}provideCodeActions(e,r,n,i){let s=[];for(let o of n.diagnostics)if(o.code==="NZ011"){let a=this.createDistributeOnRandomFix(e,o);a&&s.push(a)}return s}createDistributeOnRandomFix(e,r){let n=new uo.CodeAction("Add DISTRIBUTE ON RANDOM",uo.CodeActionKind.QuickFix);n.diagnostics=[r],n.isPreferred=!0;let i=e.offsetAt(r.range.start),s=e.getText(),o=vr.getStatementAtPosition(s,i);if(o)return n.edit=new uo.WorkspaceEdit,n.edit.insert(e.uri,e.positionAt(o.end)," DISTRIBUTE ON RANDOM"),n}};var ve=q(require("vscode"));function Tw(t){switch(t){case"sql":return{type:"sql",query:"",connection:"default"};case"python":return{type:"python",script:""};case"container":return{type:"container",nodes:[],connections:[]};case"export":return{type:"export",format:"csv",outputPath:""};case"import":return{type:"import",format:"csv",inputPath:"",targetTable:""};case"variable":return{type:"variable",variableName:"",source:"prompt",promptMessage:"Enter value"}}}function oE(){return"node-"+Date.now()+"-"+Math.random().toString(36).substr(2,9)}function aE(){return"conn-"+Date.now()+"-"+Math.random().toString(36).substr(2,9)}var rA=q(require("fs"));var Vc=class{validateProject(e){let r=[],n=[];e.name||r.push("Project name is required"),e.version||r.push("Project version is required"),Array.isArray(e.nodes)||r.push("Nodes must be an array"),Array.isArray(e.connections)||r.push("Connections must be an array");let i=this.validateNodes(e.nodes||[]);r.push(...i.errors),n.push(...i.warnings);let s=new Set((e.nodes||[]).map(l=>l.id)),o=this.validateConnections(e.connections||[],s);r.push(...o.errors),n.push(...o.warnings);let a=this.detectCycles(e);return r.push(...a),{isValid:r.length===0,errors:r,warnings:n}}validateNodes(e){let r=[],n=[],i=new Set;for(let s of e){if(!s.id){r.push("Node missing ID");continue}i.has(s.id)?r.push(`Duplicate node ID: ${s.id}`):i.add(s.id),s.type||r.push(`Node ${s.id} missing type`),s.name||n.push(`Node ${s.id} has no name`),(!s.position||typeof s.position.x!="number"||typeof s.position.y!="number")&&r.push(`Node ${s.id} has invalid position`),s.config||r.push(`Node ${s.id} has no configuration`)}return{errors:r,warnings:n}}validateConnections(e,r){let n=[],i=[],s=new Set;for(let o of e){if(!o.id){n.push("Connection missing ID");continue}(!o.from||!r.has(o.from))&&n.push(`Connection ${o.id} has invalid 'from' node: ${o.from}`),(!o.to||!r.has(o.to))&&n.push(`Connection ${o.id} has invalid 'to' node: ${o.to}`),o.from===o.to&&n.push(`Connection ${o.id} cannot connect node to itself`);let a=`${o.from}->${o.to}`;s.has(a)?i.push(`Duplicate connection from ${o.from} to ${o.to}`):s.add(a)}return{errors:n,warnings:i}}detectCycles(e){let r=[],n=new Set,i=new Set,s=new Map;for(let a of e.nodes||[])s.set(a.id,[]);for(let a of e.connections||[])s.get(a.from)?.push(a.to);let o=a=>{n.add(a),i.add(a);for(let l of s.get(a)||[])if(n.has(l)){if(i.has(l))return!0}else if(o(l))return!0;return i.delete(a),!1};for(let a of e.nodes||[])if(!n.has(a.id)&&o(a.id)){r.push("Project contains circular dependencies");break}return r}getTopologicalOrder(e){let r=new Map,n=new Map;for(let o of e.nodes)r.set(o.id,0),n.set(o.id,[]);for(let o of e.connections)n.get(o.from)?.push(o.to),r.set(o.to,(r.get(o.to)||0)+1);let i=[];for(let[o,a]of r)a===0&&i.push(o);let s=[];for(;i.length>0;){let o=i.shift();s.push(o);for(let a of n.get(o)||[]){let l=(r.get(a)||1)-1;r.set(a,l),l===0&&i.push(a)}}return s.length!==e.nodes.length?null:s}},NDe=new Vc;var ms=class t{constructor(e){this.currentProject=null;this.projectPath=null;this.isDirty=!1;this.validator=e||new Vc}static getInstance(){return t.instance||(t.instance=new t),t.instance}static resetInstance(){t.instance=void 0}createProject(e){return this.currentProject={name:e,version:"1.0.0",description:"",variables:{},nodes:[],connections:[]},this.projectPath=null,this.isDirty=!0,this.currentProject}async loadProject(e){let r=await rA.promises.readFile(e,"utf-8"),n=JSON.parse(r),i=this.validateProject(n);if(i.length>0)throw new Error(`Invalid project: ${i.join(", ")}`);return this.currentProject=n,this.projectPath=e,this.isDirty=!1,this.currentProject}async saveProject(e){let r=e||this.projectPath;if(!r)throw new Error("No file path specified");if(!this.currentProject)throw new Error("No project to save");let n=JSON.stringify(this.currentProject,null,2);await rA.promises.writeFile(r,n,"utf-8"),this.projectPath=r,this.isDirty=!1}validateProject(e){return this.validator.validateProject(e).errors}validateProjectDetailed(e){return this.validator.validateProject(e)}addNode(e){if(!this.currentProject)throw new Error("No project loaded");e.id||(e.id=oE()),this.currentProject.nodes.push(e),this.isDirty=!0}updateNode(e,r){if(!this.currentProject)throw new Error("No project loaded");let n=this.currentProject.nodes.findIndex(i=>i.id===e);if(n===-1)throw new Error(`Node not found: ${e}`);this.currentProject.nodes[n]={...this.currentProject.nodes[n],...r},this.isDirty=!0}removeNode(e){if(!this.currentProject)throw new Error("No project loaded");this.currentProject.nodes=this.currentProject.nodes.filter(r=>r.id!==e),this.currentProject.connections=this.currentProject.connections.filter(r=>r.from!==e&&r.to!==e),this.isDirty=!0}addConnection(e){if(!this.currentProject)throw new Error("No project loaded");if(e.id||(e.id=aE()),this.currentProject.connections.some(i=>i.from===e.from&&i.to===e.to))throw new Error("Connection already exists");if(this.currentProject.connections.push(e),this.validator.detectCycles(this.currentProject).length>0)throw this.currentProject.connections.pop(),new Error("Connection would create a cycle");this.isDirty=!0}removeConnection(e){if(!this.currentProject)throw new Error("No project loaded");this.currentProject.connections=this.currentProject.connections.filter(r=>r.id!==e),this.isDirty=!0}getCurrentProject(){return this.currentProject}getProjectPath(){return this.projectPath}hasUnsavedChanges(){return this.isDirty}getNode(e){return this.currentProject?.nodes.find(r=>r.id===e)}getOutgoingConnections(e){return this.currentProject?.connections.filter(r=>r.from===e)||[]}getIncomingConnections(e){return this.currentProject?.connections.filter(r=>r.to===e)||[]}setProject(e){this.currentProject=e,this.isDirty=!0}markDirty(){this.isDirty=!0}getTopologicalOrder(){return this.currentProject?this.validator.getTopologicalOrder(this.currentProject):null}};function pw(t,e,r){return{nodeId:t,status:"success",startTime:e,endTime:new Date,output:r?.output,rowsAffected:r?.rowsAffected}}function Sw(t,e,r){return{nodeId:t,status:"error",startTime:e,endTime:new Date,error:r instanceof Error?r.message:r}}function cE(t){let e=new Date;return{nodeId:t,status:"skipped",startTime:e,endTime:e}}var lE=class{constructor(e){this.startTime=new Date,this.result={nodeId:e,startTime:this.startTime}}success(){return this.result.status="success",this}error(e){return this.result.status="error",this.result.error=e instanceof Error?e.message:e,this}skipped(){return this.result.status="skipped",this}withOutput(e){return this.result.output=e,this}withRowsAffected(e){return this.result.rowsAffected=e,this}build(){return{nodeId:this.result.nodeId,status:this.result.status||"pending",startTime:this.startTime,endTime:new Date,error:this.result.error,output:this.result.output,rowsAffected:this.result.rowsAffected}}};var uE=class{constructor(){this.executors=new Map}registerExecutor(e,r){this.executors.set(e,r)}getExecutor(e){return this.executors.get(e)}onStatusChange(e){this.statusCallback=e}async execute(e,r){let n={projectName:e.name,startTime:new Date,status:"running",nodeResults:new Map};for(let i of e.nodes)this.statusCallback?.(i.id,"pending");try{r.onProgress?.(`Starting ETL project: ${e.name}`),r.onProgress?.(`Found ${e.nodes.length} tasks`),await this.executeDynamic(e,r,n);let i=Array.from(n.nodeResults.values()).some(o=>o.status==="error");n.status=i?"failed":"completed",n.endTime=new Date;let s=n.status==="completed"?"completed successfully":"completed with errors";r.onProgress?.(`ETL project ${s}`)}catch(i){n.status="failed",n.endTime=new Date,r.onProgress?.(`ETL project failed: ${String(i)}`)}return n}async executeDynamic(e,r,n){let i=new Set,s=[],o=new Set(e.connections.map(a=>a.to));for(let a of e.nodes)o.has(a.id)||s.push(a.id);for(;s.length>0;){if(r.cancellationToken?.isCancellationRequested){n.status="cancelled",n.endTime=new Date;for(let d of e.nodes)i.has(d.id)||(n.nodeResults.set(d.id,cE(d.id)),this.statusCallback?.(d.id,"skipped"));return}let a=s.shift();if(i.has(a))continue;let l=e.nodes.find(d=>d.id===a);if(!l)continue;let c=await this.executeNode(l,r);n.nodeResults.set(a,c),i.add(a),c.output!==void 0&&r.nodeOutputs.set(a,c.output);let u=e.connections.filter(d=>d.from===a);for(let d of u){let E=d.connectionType||"success";c.status==="success"&&E==="success"||c.status==="error"&&E==="failure"?!i.has(d.to)&&!s.includes(d.to)&&s.push(d.to):i.has(d.to)||!e.connections.some(h=>{if(h.to!==d.to||h.id===d.id)return!1;let p=n.nodeResults.get(h.from);if(!p)return!0;let S=h.connectionType||"success";return p.status==="success"&&S==="success"||p.status==="error"&&S==="failure"})&&!s.includes(d.to)&&(n.nodeResults.set(d.to,cE(d.to)),this.statusCallback?.(d.to,"skipped"),i.add(d.to))}}for(let a of e.nodes)i.has(a.id)||(n.nodeResults.set(a.id,cE(a.id)),this.statusCallback?.(a.id,"skipped"))}async executeNode(e,r){this.statusCallback?.(e.id,"running"),r.onProgress?.(`Running task: ${e.name}`);let n=this.executors.get(e.type);if(!n){let i={nodeId:e.id,status:"error",startTime:new Date,endTime:new Date,error:`No executor registered for node type: ${e.type}`};return this.statusCallback?.(e.id,"error",i.error),i}try{let i=await n.execute(e,r);return this.statusCallback?.(e.id,i.status,i.error),i.status==="success"&&(r.onProgress?.(`Task ${e.name} completed successfully`),i.rowsAffected!==void 0&&r.onProgress?.(`  Rows affected: ${i.rowsAffected}`)),i}catch(i){let s={nodeId:e.id,status:"error",startTime:new Date,endTime:new Date,error:String(i)};return this.statusCallback?.(e.id,"error",s.error),s}}getPreviousNodeOutput(e,r){return e.nodeOutputs.get(r)}};var qc=class{resolve(e,r){if(!e||!r||Object.keys(r).length===0)return e;let n=e;for(let[i,s]of Object.entries(r)){let o=new RegExp(`\\$\\{${this.escapeRegex(i)}\\}`,"g");n=n.replace(o,s)}return n}resolveAll(e,r){return e.map(n=>this.resolve(n,r))}escapeRegex(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}},UDe=new qc;var qr=class{constructor(e){this.variableResolver=e||new qc}getConfig(e){return e.config}resolveVariables(e,r){return this.variableResolver.resolve(e,r.variables)}createSuccess(e,r,n){return pw(e,r,n)}createError(e,r,n){return Sw(e,r,n)}resultBuilder(e){return new lE(e)}reportProgress(e,r){e.onProgress?.(r)}isCancelled(e){return e.cancellationToken?.isCancellationRequested??!1}validateRequired(e,r,n,i){if(n==null||n==="")return this.createError(e,r,`${i} is required`)}async safeExecute(e,r,n){try{return await n()}catch(i){return this.createError(e,r,i instanceof Error?i:String(i))}}};var nA=class{async createConnection(e){let r=Ir(),n=new r({host:e.host,port:e.port||5480,database:e.database,user:e.user,password:e.password});return await n.connect(),n}},dE=class extends qr{constructor(e,r){super(e),this.connectionFactory=r||new nA}async execute(e,r){let n=this.getConfig(e),i=new Date,s=this.validateRequired(e.id,i,n.query?.trim(),"SQL query");return s||this.safeExecute(e.id,i,async()=>{let o=this.resolveVariables(n.query,r);if(this.reportProgress(r,`Executing SQL: ${o.substring(0,100)}${o.length>100?"...":""}`),!r.connectionDetails)return this.createError(e.id,i,"No connection details available in context");let a=null;try{a=await this.connectionFactory.createConnection(r.connectionDetails);let l=await this.executeQuery(a,o,n.timeout);return this.createSuccess(e.id,i,{rowsAffected:l.rows.length,output:l})}finally{if(a)try{await a.close()}catch{}}})}async executeQuery(e,r,n){let i=e.createCommand(r);n&&(i.commandTimeout=n);let s=await i.executeReader(),o=[];for(let l=0;l<s.fieldCount;l++)o.push(s.getName(l));let a=[];for(;await s.read();){let l=[];for(let c=0;c<s.fieldCount;c++)l.push(s.getValue(c));a.push(l)}return s.close&&await s.close(),{columns:o,rows:a}}};var Rw=require("child_process"),Xc=q(require("fs")),EE=q(require("path")),Aw=q(require("os"));var iA=class{async run(e,r,n,i){return new Promise(s=>{let o=(0,Rw.spawn)(e,r,{env:n,shell:!0}),a="",l="";o.stdout?.on("data",c=>{a+=c.toString()}),o.stderr?.on("data",c=>{l+=c.toString()}),o.on("close",c=>{s({exitCode:c??1,stdout:a.trim(),stderr:l.trim()})}),o.on("error",c=>{s({exitCode:1,stdout:"",stderr:`Failed to start Python: ${c.message}`})}),i&&i>0&&setTimeout(()=>{o.kill(),s({exitCode:1,stdout:a.trim(),stderr:`Execution timed out after ${i} seconds`})},i*1e3)})}},sA=class{find(){return process.platform==="win32"?"py":"python3"}},fE=class extends qr{constructor(e,r,n){super(e),this.runner=r||new iA,this.interpreterFinder=n||new sA}async execute(e,r){let n=this.getConfig(e),i=new Date;return!n.script&&!n.scriptPath?this.createError(e.id,i,"Python script or script path is required"):this.safeExecute(e.id,i,async()=>{let s=n.interpreter||this.interpreterFinder.find();this.reportProgress(r,`Using Python interpreter: ${s}`);let{scriptPath:o,tempScript:a}=await this.prepareScript(n,r);try{this.reportProgress(r,`Executing Python script: ${EE.basename(o)}`);let l=[o,...n.arguments||[]],c=this.buildEnvironment(r.variables),u=await this.runWithProgress(s,l,c,r,n.timeout);return u.exitCode===0?this.createSuccess(e.id,i,{output:u.stdout}):this.resultBuilder(e.id).error(u.stderr||`Python exited with code ${u.exitCode}`).withOutput(u.stdout).build()}finally{a&&await this.cleanupTempScript(o)}})}async prepareScript(e,r){if(e.scriptPath){let s=this.resolveVariables(e.scriptPath,r);if(!Xc.existsSync(s))throw new Error(`Script file not found: ${s}`);return{scriptPath:s,tempScript:!1}}let n=this.resolveVariables(e.script,r),i=EE.join(Aw.tmpdir(),`etl_script_${Date.now()}.py`);return await Xc.promises.writeFile(i,n,"utf-8"),{scriptPath:i,tempScript:!0}}buildEnvironment(e){return{...process.env,...Object.fromEntries(Object.entries(e).map(([r,n])=>[`ETL_VAR_${r.toUpperCase()}`,n]))}}async runWithProgress(e,r,n,i,s){let o=await this.runner.run(e,r,n,s);if(o.stdout)for(let a of o.stdout.split(`
`).slice(0,10))a.trim()&&this.reportProgress(i,`[Python] ${a.trim()}`);if(o.stderr)for(let a of o.stderr.split(`
`).slice(0,5))a.trim()&&this.reportProgress(i,`[Python ERROR] ${a.trim()}`);return o}async cleanupTempScript(e){try{await Xc.promises.unlink(e)}catch{}}};aA();Ks();var GC=class{constructor(){this.format="csv"}async export(e,r,n,i,s,o){try{return await oA(e,r,n,i,void 0,o),{success:!0}}catch(a){return{success:!1,message:a instanceof Error?a.message:String(a)}}}},HC=class{constructor(){this.format="xlsb"}async export(e,r,n,i,s,o){let a=await BC(r,n,i,!1,s,o);return{success:a.success,message:a.message,rowsExported:a.details?.rows_exported}}},iS=class extends qr{constructor(e,r){super(e),this.strategies=r||new Map([["csv",new GC],["xlsb",new HC]])}registerStrategy(e){this.strategies.set(e.format,e)}async execute(e,r){let n=this.getConfig(e),i=new Date,s=this.validateRequired(e.id,i,n.outputPath,"Output path");return s||this.safeExecute(e.id,i,async()=>{let o=this.resolveVariables(n.outputPath,r),a=n.query?this.resolveVariables(n.query,r):"";if(!a&&n.sourceNodeId&&r.nodeOutputs.get(n.sourceNodeId)?.rows)return this.createError(e.id,i,"In-memory data export is not yet supported. Please specify a query.");if(!a)return this.createError(e.id,i,"No query or source node specified for export");let l=this.strategies.get(n.format);if(!l)return this.createError(e.id,i,`Unsupported export format: ${n.format}`);this.reportProgress(r,`Exporting to ${n.format.toUpperCase()}: ${o}`);let c=await l.export(r.extensionContext,r.connectionDetails,a,o,u=>this.reportProgress(r,`[Export] ${u}`),n.timeout);return c.success?this.createSuccess(e.id,i,{rowsAffected:c.rowsExported,output:{filePath:o,format:n.format,rowsExported:c.rowsExported}}):this.createError(e.id,i,c.message||"Export failed")})}};var D6=q(require("fs"));gS();var sy=class{async importData(e,r,n,i,s){return iy(e,r,n,i,s)}},NS=class extends qr{constructor(e,r){super(e),this.importer=r||new sy}async execute(e,r){let n=this.getConfig(e),i=new Date,s=this.validateRequired(e.id,i,n.inputPath,"Input path");if(s)return s;let o=this.validateRequired(e.id,i,n.targetTable,"Target table");return o||this.safeExecute(e.id,i,async()=>{let a=this.resolveVariables(n.inputPath,r),l=this.resolveVariables(n.targetTable,r),c=n.targetSchema?this.resolveVariables(n.targetSchema,r):"";if(!D6.existsSync(a))return this.createError(e.id,i,`Input file not found: ${a}`);this.reportProgress(r,`Importing from ${n.format.toUpperCase()}: ${a}`),this.reportProgress(r,`Target table: ${c?c+".":""}${l}`);let u=await this.importer.importData(a,l,r.connectionDetails,d=>{this.reportProgress(r,`[Import] ${d}`)},n.timeout);return u.success?this.createSuccess(e.id,i,{rowsAffected:u.details?.rowsInserted,output:{filePath:a,targetTable:`${c?c+".":""}${l}`,rowsProcessed:u.details?.rowsProcessed,rowsInserted:u.details?.rowsInserted}}):this.createError(e.id,i,u.message)})}};var OS=class extends qr{constructor(e,r){super(r),this.engine=e}async execute(e,r){let n=this.getConfig(e),i=new Date;return!n.nodes||n.nodes.length===0?this.createSuccess(e.id,i,{output:"Empty container - nothing to execute"}):this.safeExecute(e.id,i,async()=>{this.reportProgress(r,`Entering container: ${e.name} (${n.nodes.length} tasks)`);let s={name:`Container: ${e.name}`,version:"1.0.0",nodes:n.nodes,connections:n.connections||[]},o=await this.engine.execute(s,r);return this.reportProgress(r,`Exiting container: ${e.name}`),this.processExecutionResult(e.id,i,n,o)})}processExecutionResult(e,r,n,i){if(i.status==="completed"){let{successCount:o,totalRows:a}=this.countSuccesses(i),l={tasksExecuted:n.nodes.length,tasksSucceeded:o,nestedResults:Array.from(i.nodeResults.entries())};return this.createSuccess(e,r,{rowsAffected:a,output:l})}if(i.status==="cancelled")return this.resultBuilder(e).skipped().build();let s=this.findFirstError(i)||"Container execution failed";return this.createError(e,r,s)}countSuccesses(e){let r=0,n=0;for(let i of e.nodeResults.values())i.status==="success"&&(r++,i.rowsAffected&&(n+=i.rowsAffected));return{successCount:r,totalRows:n}}findFirstError(e){for(let r of e.nodeResults.values())if(r.status==="error"&&r.error)return r.error}};var oy=class{async createConnection(e){let r=Ir(),n=new r({host:e.host,port:e.port||5480,database:e.database,user:e.user,password:e.password});return await n.connect(),n}},CS=class extends qr{constructor(r,n){super(r);this.variableManager=null;this.connectionFactory=n||new oy}setVariableManager(r){this.variableManager=r}async execute(r,n){let i=this.getConfig(r),s=new Date,o=this.validateRequired(r.id,s,i.variableName,"Variable name");if(o)return o;let a=n.variableManager||this.variableManager;return a?this.safeExecute(r.id,s,async()=>{let l;switch(i.source){case"prompt":l=await this.handlePrompt(i,a,n);break;case"static":l=this.handleStatic(i,n);break;case"sql":l=await this.handleSql(i,n);break;default:return this.createError(r.id,s,`Unknown variable source: ${i.source}`)}return l===void 0?this.createError(r.id,s,`Variable ${i.variableName} was not set (user cancelled or query returned no results)`):(a.set(i.variableName,l),n.variables[i.variableName]=l,this.reportProgress(n,`Variable ${i.variableName} = "${l}"`),this.createSuccess(r.id,s,{output:{variableName:i.variableName,value:l,source:i.source}}))}):this.createError(r.id,s,"Variable manager not available")}async handlePrompt(r,n,i){let s=r.promptMessage?this.resolveVariables(r.promptMessage,i):`Enter value for ${r.variableName}`,o=r.defaultValue?this.resolveVariables(r.defaultValue,i):void 0;return this.reportProgress(i,`Prompting for variable: ${r.variableName}`),n.promptForValue(r.variableName,s,o)}handleStatic(r,n){let i=r.value||"";return this.resolveVariables(i,n)}async handleSql(r,n){if(!r.query)throw new Error("SQL query is required for sql variable source");let i=this.resolveVariables(r.query,n);this.reportProgress(n,`Executing SQL for variable ${r.variableName}`);let s=null;try{s=await this.connectionFactory.createConnection(n.connectionDetails);let o=s.createCommand(i);r.timeout&&(o.commandTimeout=r.timeout);let a=await o.executeReader(),l;if(await a.read()){let c=a.getValue(0);l=c!=null?String(c):void 0}return a.close&&await a.close(),l}finally{if(s)try{await s.close()}catch{}}}};var P6=q(require("vscode")),yS=class{constructor(e){this.variables=new Map(Object.entries(e||{}))}get(e){return this.variables.get(e)}set(e,r){this.variables.set(e,r)}has(e){return this.variables.has(e)}getAll(){return Object.fromEntries(this.variables)}async promptForValue(e,r,n){let i=await P6.window.showInputBox({prompt:r||`Enter value for ${e}`,value:n||"",placeHolder:`Value for \${${e}}`,ignoreFocusOut:!0});return i!==void 0&&this.set(e,i),i}snapshot(){return{...this.getAll()}}merge(e){for(let[r,n]of Object.entries(e))this.set(r,n)}};function x6(){return`
        :root {
            --bg-primary: var(--vscode-editor-background);
            --bg-secondary: var(--vscode-sideBar-background);
            --bg-hover: var(--vscode-list-hoverBackground);
            --border-color: var(--vscode-panel-border);
            --text-color: var(--vscode-editor-foreground);
            --text-muted: var(--vscode-descriptionForeground);
            --accent-color: var(--vscode-button-background);
            --accent-hover: var(--vscode-button-hoverBackground);
            --success-color: #4CAF50;
            --error-color: #f44336;
            --warning-color: #ff9800;
        }

        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            padding: 0;
            height: 100vh;
            overflow: hidden;
            font-family: var(--vscode-font-family);
            font-size: var(--vscode-font-size);
            color: var(--text-color);
            background: var(--bg-primary);
        }

        .etl-designer {
            display: flex;
            flex-direction: column;
            height: 100vh;
        }

        /* Toolbar */
        .toolbar {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 8px 16px;
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border-color);
        }

        .toolbar button {
            padding: 6px 12px;
            margin-right: 4px;
            border: 1px solid var(--border-color);
            background: var(--bg-primary);
            color: var(--text-color);
            cursor: pointer;
            border-radius: 4px;
        }

        .toolbar button:hover {
            background: var(--bg-hover);
        }

        .toolbar .btn-primary {
            background: var(--accent-color);
            border-color: var(--accent-color);
        }

        .toolbar .btn-primary:hover {
            background: var(--accent-hover);
        }

        .toolbar .btn-danger {
            background: var(--error-color);
            border-color: var(--error-color);
            color: white;
        }

        .toolbar .btn-danger:hover {
            opacity: 0.8;
        }

        .toolbar .separator {
            display: inline-block;
            width: 1px;
            height: 20px;
            background: var(--border-color);
            margin: 0 8px;
        }

        .project-name {
            font-weight: bold;
            font-size: 1.1em;
        }

        .status {
            color: var(--text-muted);
            font-size: 0.9em;
        }

        /* Main Content */
        .main-content {
            display: flex;
            flex: 1;
            overflow: hidden;
        }

        /* Toolbox */
        .toolbox {
            width: 200px;
            background: var(--bg-secondary);
            border-right: 1px solid var(--border-color);
            padding: 12px;
            overflow-y: auto;
        }

        .toolbox h3 {
            margin: 0 0 12px 0;
            font-size: 0.9em;
            color: var(--text-muted);
            text-transform: uppercase;
        }

        .toolbox-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 12px;
            margin-bottom: 6px;
            background: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            cursor: grab;
            transition: all 0.15s ease;
        }

        .toolbox-item:hover {
            border-color: var(--accent-color);
            transform: translateX(3px);
        }

        .toolbox-item:active {
            cursor: grabbing;
        }

        .toolbox-item .icon {
            font-size: 1.2em;
        }

        .toolbox-item .label {
            font-size: 0.85em;
        }

        .help-text {
            font-size: 0.8em;
            color: var(--text-muted);
            line-height: 1.6;
        }

        .help-text p {
            margin: 4px 0;
        }

        /* Canvas */
        .canvas-container {
            flex: 1;
            position: relative;
            overflow: hidden;
            background: var(--bg-primary);
            cursor: grab;
        }
        
        .canvas-container:active {
            cursor: grabbing;
        }

        .zoom-wrapper {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            transform-origin: 0 0;
            background: 
                linear-gradient(90deg, rgba(128,128,128,0.1) 1px, transparent 1px),
                linear-gradient(rgba(128,128,128,0.1) 1px, transparent 1px);
            background-size: 20px 20px;
        }

        .connections-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        .connections-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 5;
            pointer-events: none;
        }

        .connections-layer path.connection-line {
            stroke: var(--success-color);
            stroke-width: 2;
            fill: none;
            pointer-events: none;
        }
        
        .connections-layer path.connection-failure {
            stroke: var(--error-color);
        }
        
        .connections-layer path.connection-hit {
            stroke: transparent;
            stroke-width: 15px;
            fill: none;
            pointer-events: stroke;
            cursor: pointer;
        }

        .connections-layer path.connection-hit:hover + .connection-line {
            stroke-width: 3;
            filter: drop-shadow(0 0 2px currentColor);
        }

        .connections-layer marker polygon {
            fill: var(--accent-color);
        }

        .nodes-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 2;
            pointer-events: none;
        }

        .etl-node {
            pointer-events: all;
        }

        /* Nodes */
        .etl-node {
            position: absolute;
            min-width: 160px;
            background: var(--bg-secondary);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            cursor: move;
            user-select: none;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
        }

        .etl-node:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.25);
        }

        .etl-node.selected {
            border-color: var(--accent-color);
        }

        .etl-node.running {
            border-color: var(--warning-color);
            animation: pulse 1s infinite;
        }

        .etl-node.success {
            border-color: var(--success-color);
        }

        .etl-node.error {
            border-color: var(--error-color);
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .node-type-indicator {
            height: 4px;
            border-radius: 6px 6px 0 0;
        }

        .etl-node.sql .node-type-indicator { background: #4CAF50; }
        .etl-node.python .node-type-indicator { background: #3776AB; }
        .etl-node.container .node-type-indicator { background: #FF9800; }
        .etl-node.export .node-type-indicator { background: #2196F3; }
        .etl-node.import .node-type-indicator { background: #9C27B0; }

        .node-content {
            padding: 10px 12px;
        }

        .node-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 4px;
        }

        .node-icon {
            font-size: 1.2em;
        }

        .node-name {
            font-weight: 500;
            font-size: 0.9em;
        }

        .node-type {
            font-size: 0.75em;
            color: var(--text-muted);
            text-transform: uppercase;
        }

        .node-connectors {
            position: relative;
        }

        .node-actions {
            position: absolute;
            top: -8px;
            right: -8px;
            display: none;
        }

        .etl-node:hover .node-actions,
        .etl-node.selected .node-actions {
            display: block;
        }

        .node-delete-btn {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--error-color);
            color: white;
            border: 2px solid var(--bg-secondary);
            font-size: 12px;
            line-height: 16px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .node-delete-btn:hover {
            transform: scale(1.2);
        }

        .connector {
            width: 14px;
            height: 14px;
            background: var(--accent-color);
            border: 2px solid var(--bg-secondary);
            border-radius: 50%;
            position: absolute;
            cursor: crosshair;
            z-index: 10;
        }

        .connector.input {
            left: -9px;
            top: 50%;
            transform: translateY(-50%);
        }

        .connector.output {
            right: -9px;
            top: 50%;
            transform: translateY(-50%);
        }

        .connector:hover {
            transform: translateY(-50%) scale(1.3);
        }

        /* Properties Panel */
        .properties-panel {
            width: 250px;
            background: var(--bg-secondary);
            border-left: 1px solid var(--border-color);
            padding: 12px;
            overflow-y: auto;
        }

        .properties-panel h3 {
            margin: 0 0 12px 0;
            font-size: 0.9em;
            color: var(--text-muted);
            text-transform: uppercase;
        }

        .properties-panel .placeholder {
            color: var(--text-muted);
            font-style: italic;
        }

        .property-group {
            margin-bottom: 16px;
        }

        .property-label {
            display: block;
            font-size: 0.8em;
            color: var(--text-muted);
            margin-bottom: 4px;
        }

        .property-value {
            font-size: 0.9em;
            word-break: break-word;
        }

        .property-code {
            font-family: monospace;
            font-size: 0.8em;
            background: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: 4px;
            padding: 6px 8px;
            margin: 4px 0 0 0;
            white-space: pre-wrap;
            word-break: break-all;
            max-height: 80px;
            overflow-y: auto;
        }

        .configure-btn {
            width: 100%;
            margin-top: 16px;
            padding: 8px 12px;
            background: var(--accent-color);
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.85em;
        }

        .configure-btn:hover {
            background: var(--accent-hover);
        }

        /* Connection line being drawn */
        .temp-connection {
            stroke: var(--accent-color);
            stroke-width: 2;
            stroke-dasharray: 5,5;
            fill: none;
            pointer-events: none;
        }

        /* Container Editor Modal */
        .container-editor-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .container-editor-modal {
            width: 90%;
            height: 85%;
            background: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
        }

        .container-editor-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 16px;
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border-color);
            border-radius: 8px 8px 0 0;
        }

        .container-editor-title {
            font-weight: 600;
            font-size: 1.1em;
        }

        .container-editor-close {
            width: 28px;
            height: 28px;
            border: none;
            background: transparent;
            color: var(--text-color);
            font-size: 18px;
            cursor: pointer;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .container-editor-close:hover {
            background: var(--error-color);
            color: white;
        }

        .container-editor-content {
            flex: 1;
            display: flex;
            overflow: hidden;
        }

        .container-editor-toolbox {
            width: 180px;
            background: var(--bg-secondary);
            border-right: 1px solid var(--border-color);
            padding: 12px;
            overflow-y: auto;
        }

        .container-editor-toolbox h4 {
            margin: 0 0 10px 0;
            font-size: 0.85em;
            color: var(--text-muted);
            text-transform: uppercase;
        }

        .container-editor-canvas {
            flex: 1;
            position: relative;
            overflow: hidden;
            background: var(--bg-primary);
        }

        .container-editor-canvas .zoom-wrapper {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                linear-gradient(90deg, rgba(128,128,128,0.08) 1px, transparent 1px),
                linear-gradient(rgba(128,128,128,0.08) 1px, transparent 1px);
            background-size: 20px 20px;
        }

        .container-editor-footer {
            padding: 10px 16px;
            background: var(--bg-secondary);
            border-top: 1px solid var(--border-color);
            border-radius: 0 0 8px 8px;
            display: flex;
            justify-content: flex-end;
            gap: 8px;
        }

        .container-editor-footer button {
            padding: 6px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9em;
        }

        .container-editor-footer .btn-save {
            background: var(--accent-color);
            color: white;
            border: none;
        }

        .container-editor-footer .btn-save:hover {
            background: var(--accent-hover);
        }

        .container-editor-footer .btn-cancel {
            background: transparent;
            color: var(--text-color);
            border: 1px solid var(--border-color);
        }

        .container-editor-footer .btn-cancel:hover {
            background: var(--bg-hover);
        }

        /* Container node badge showing child count */
        .node-child-count {
            font-size: 0.7em;
            background: var(--warning-color);
            color: white;
            padding: 2px 6px;
            border-radius: 10px;
            margin-left: 4px;
        }
    `}function M6(t){return`
        const vscode = acquireVsCodeApi();
        
        // State
        let project = ${JSON.stringify(t)};
        let selectedNodeId = null;
        let isDragging = false;
        let dragOffset = { x: 0, y: 0 };
        let isConnecting = false;
        let connectionStart = null;
        let tempLine = null;
        
        // Zoom & Pan state
        let scale = 1;
        let pan = { x: 0, y: 0 };
        let isPanning = false;
        let panStart = { x: 0, y: 0 };

        // Container Editor state
        let containerEditorOpen = false;
        let editingContainerId = null;
        let containerNodes = [];
        let containerConnections = [];
        let containerSelectedNodeId = null;
        let containerIsDragging = false;
        let containerDragOffset = { x: 0, y: 0 };
        let containerIsConnecting = false;
        let containerConnectionStart = null;
        let containerTempLine = null;

        // Node icons
        const nodeIcons = {
            sql: '\u{1F4DC}',
            python: '\u{1F40D}',
            container: '\u{1F4E6}',
            export: '\u{1F4E4}',
            import: '\u{1F4E5}',
            variable: '\u{1F524}'
        };
    `}function v6(){return`
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        function updateNodeStatus(nodeId, status) {
            const nodeEl = document.getElementById('node-' + nodeId);
            if (nodeEl) {
                nodeEl.classList.remove('running', 'success', 'error', 'pending', 'skipped');
                nodeEl.classList.add(status);
            }
            
            document.getElementById('status').textContent = status === 'running' 
                ? 'Running...' 
                : (status === 'error' ? 'Error!' : '');
        }
    `}function U6(){return`
        function updateTransform() {
            const wrapper = document.getElementById('zoom-wrapper');
            if (wrapper) {
                wrapper.style.transform = \`translate(\${pan.x}px, \${pan.y}px) scale(\${scale})\`;
            }
        }

        function setupZoomPan() {
            const container = document.getElementById('canvas');
            
            // Wheel zoom
            container.addEventListener('wheel', (e) => {
                if (e.ctrlKey || true) { 
                    e.preventDefault();
                    const zoomSensitivity = 0.001;
                    const delta = -e.deltaY * zoomSensitivity;
                    const newScale = Math.min(Math.max(0.1, scale + delta), 5);
                    scale = newScale;
                    updateTransform();
                }
            });

            // Pan
            container.addEventListener('mousedown', (e) => {
                if (e.target === container || e.target.id === 'nodes-container' || e.target.id === 'zoom-wrapper' || e.target.id === 'connections-svg') {
                    isPanning = true;
                    panStart = { x: e.clientX - pan.x, y: e.clientY - pan.y };
                    container.style.cursor = 'grabbing';
                }
            });

            window.addEventListener('mousemove', (e) => {
                if (isPanning) {
                    pan.x = e.clientX - panStart.x;
                    pan.y = e.clientY - panStart.y;
                    updateTransform();
                }
            });

            window.addEventListener('mouseup', () => {
                if (isPanning) {
                    isPanning = false;
                    container.style.cursor = 'grab';
                }
            });
        }
    `}function B6(){return`
        function renderConnections() {
            const svg = document.getElementById('connections-svg');
            // Clear existing paths but keep defs
            svg.querySelectorAll('path').forEach(p => p.remove());

            for (const conn of project.connections) {
                const fromNode = project.nodes.find(n => n.id === conn.from);
                const toNode = project.nodes.find(n => n.id === conn.to);
                
                if (fromNode && toNode) {
                    const path = createConnectionPath(fromNode, toNode, conn);
                    svg.appendChild(path);
                }
            }
        }

        function createConnectionPath(from, to, conn) {
            const group = document.createElementNS('http://www.w3.org/2000/svg', 'g');
            
            // Determine marker based on connection type
            const markerType = conn.connectionType === 'failure' ? 'arrowhead-failure' : 'arrowhead';
            const lineClass = conn.connectionType === 'failure' ? 'connection-line connection-failure' : 'connection-line';
            
            // Node dimensions
            const nodeWidth = 160;
            const nodeHeight = 70;
            
            // Calculate center points
            const fromCenterX = from.position.x + nodeWidth / 2;
            const fromCenterY = from.position.y + nodeHeight / 2;
            const toCenterX = to.position.x + nodeWidth / 2;
            const toCenterY = to.position.y + nodeHeight / 2;
            
            // Calculate relative position
            const dx = toCenterX - fromCenterX;
            const dy = toCenterY - fromCenterY;
            
            // Determine connection points based on relative position
            let x1, y1, x2, y2;
            
            // Choose source point (from node)
            if (Math.abs(dy) > Math.abs(dx)) {
                // Vertical connection dominates
                if (dy > 0) {
                    // Target is below - start from bottom
                    x1 = fromCenterX;
                    y1 = from.position.y + nodeHeight;
                } else {
                    // Target is above - start from top
                    x1 = fromCenterX;
                    y1 = from.position.y;
                }
            } else {
                // Horizontal connection dominates
                if (dx > 0) {
                    // Target is to the right - start from right
                    x1 = from.position.x + nodeWidth;
                    y1 = fromCenterY;
                } else {
                    // Target is to the left - start from left
                    x1 = from.position.x;
                    y1 = fromCenterY;
                }
            }
            
            // Choose target point (to node)
            if (Math.abs(dy) > Math.abs(dx)) {
                // Vertical connection
                if (dy > 0) {
                    // Coming from above - end at top
                    x2 = toCenterX;
                    y2 = to.position.y;
                } else {
                    // Coming from below - end at bottom
                    x2 = toCenterX;
                    y2 = to.position.y + nodeHeight;
                }
            } else {
                // Horizontal connection
                if (dx > 0) {
                    // Coming from left - end at left
                    x2 = to.position.x;
                    y2 = toCenterY;
                } else {
                    // Coming from right - end at right
                    x2 = to.position.x + nodeWidth;
                    y2 = toCenterY;
                }
            }

            // Create bezier curve with appropriate control points
            let d;
            if (Math.abs(dy) > Math.abs(dx)) {
                // Vertical curve
                const midY = (y1 + y2) / 2;
                d = 'M ' + x1 + ' ' + y1 + ' C ' + x1 + ' ' + midY + ', ' + x2 + ' ' + midY + ', ' + x2 + ' ' + y2;
            } else {
                // Horizontal curve
                const midX = (x1 + x2) / 2;
                d = 'M ' + x1 + ' ' + y1 + ' C ' + midX + ' ' + y1 + ', ' + midX + ' ' + y2 + ', ' + x2 + ' ' + y2;
            }
            
            // 1. Hit path (invisible, wider)
            const hitPath = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            hitPath.setAttribute('d', d);
            hitPath.setAttribute('class', 'connection-hit');
            hitPath.dataset.connectionId = conn.id;
            
            // Right-click to toggle connection type
            hitPath.addEventListener('contextmenu', (e) => {
                e.preventDefault();
                e.stopPropagation();
                const currentType = conn.connectionType || 'success';
                const newType = currentType === 'success' ? 'failure' : 'success';
                vscode.postMessage({ 
                    type: 'toggleConnectionType', 
                    payload: { connectionId: conn.id, newType: newType }
                });
            });
            
            // Click to delete
            hitPath.addEventListener('click', (e) => {
                e.stopPropagation();
                vscode.postMessage({ type: 'confirmRemoveConnection', payload: conn.id });
            });

            // 2. Visible path
            const visiblePath = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            visiblePath.setAttribute('d', d);
            visiblePath.setAttribute('marker-end', 'url(#' + markerType + ')');
            visiblePath.setAttribute('class', lineClass);

            group.appendChild(hitPath);
            group.appendChild(visiblePath);
            
            return group;
        }

        function createTempLine(e) {
            const svg = document.getElementById('connections-svg');
            tempLine = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            tempLine.classList.add('temp-connection');
            svg.appendChild(tempLine);
            updateTempLine(e);
        }

        function updateTempLine(e) {
            if (!tempLine || !connectionStart) return;
            
            const fromNode = project.nodes.find(n => n.id === connectionStart);
            if (!fromNode) return;
            
            const canvas = document.getElementById('canvas');
            const rect = canvas.getBoundingClientRect();
            
            const x1 = fromNode.position.x + 160;
            const y1 = fromNode.position.y + 35;
            const x2 = (e.clientX - rect.left - pan.x) / scale;
            const y2 = (e.clientY - rect.top - pan.y) / scale;
            
            const midX = (x1 + x2) / 2;
            tempLine.setAttribute('d', 'M ' + x1 + ' ' + y1 + ' C ' + midX + ' ' + y1 + ', ' + midX + ' ' + y2 + ', ' + x2 + ' ' + y2);
        }

        function endConnection() {
            isConnecting = false;
            connectionStart = null;
            if (tempLine) {
                tempLine.remove();
                tempLine = null;
            }
        }
    `}function F6(){return`
        // Keyboard events for Delete key
        function setupKeyboardEvents() {
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Delete' && selectedNodeId) {
                    vscode.postMessage({ type: 'confirmRemoveNode', payload: selectedNodeId });
                }
            });
        }

        // Handle messages from extension
        window.addEventListener('message', (event) => {
            const message = event.data;
            switch (message.type) {
                case 'projectUpdate':
                    project = message.payload;
                    renderNodes();
                    renderConnections();
                    break;
                case 'nodeStatusUpdate':
                    updateNodeStatus(message.payload.nodeId, message.payload.status);
                    break;
                case 'executionStarted':
                    document.getElementById('btn-run').style.display = 'none';
                    document.getElementById('btn-stop').style.display = 'inline-block';
                    document.getElementById('status').textContent = 'Running...';
                    break;
                case 'executionEnded':
                    document.getElementById('btn-run').style.display = 'inline-block';
                    document.getElementById('btn-stop').style.display = 'none';
                    document.getElementById('status').textContent = message.payload?.status || '';
                    break;
                case 'containerChildUpdated':
                    // Refresh container editor with updated child node
                    if (containerEditorOpen && editingContainerId === message.payload.containerId) {
                        const updatedChild = message.payload.childNode;
                        const idx = containerNodes.findIndex(n => n.id === updatedChild.id);
                        if (idx >= 0) {
                            containerNodes[idx] = updatedChild;
                            renderContainerNodes();
                        }
                    }
                    break;
            }
        });

        function setupToolbarButtons() {
            document.getElementById('btn-new').addEventListener('click', () => {
                vscode.postMessage({ type: 'newProject' });
            });
            
            document.getElementById('btn-open').addEventListener('click', () => {
                vscode.postMessage({ type: 'loadProject' });
            });
            
            document.getElementById('btn-save').addEventListener('click', () => {
                vscode.postMessage({ type: 'saveProject' });
            });
            
            document.getElementById('btn-run').addEventListener('click', () => {
                vscode.postMessage({ type: 'runProject' });
            });
            
            document.getElementById('btn-stop').addEventListener('click', () => {
                vscode.postMessage({ type: 'stopProject' });
            });
        }
    `}function G6(){return`
        function updatePropertiesPanel(node) {
            const content = document.getElementById('properties-content');
            
            if (!node) {
                content.innerHTML = '<p class="placeholder">Select a task to view properties</p>';
                return;
            }
            
            let configHtml = '';
            const config = node.config;
            
            switch (node.type) {
                case 'sql':
                    const queryPreview = config.query 
                        ? (config.query.length > 100 ? config.query.substring(0, 100) + '...' : config.query)
                        : '(not configured)';
                    configHtml = \`
                        <div class="property-group">
                            <span class="property-label">Connection</span>
                            <div class="property-value">\${escapeHtml(config.connection || 'Active connection')}</div>
                        </div>
                        <div class="property-group">
                            <span class="property-label">Query</span>
                            <pre class="property-code">\${escapeHtml(queryPreview)}</pre>
                        </div>
                        <div class="property-group">
                            <span class="property-label">Timeout</span>
                            <div class="property-value">\${config.timeout ? config.timeout + 's' : '(default)'}</div>
                        </div>
                    \`;
                    break;
                case 'python':
                    let scriptInfo = '(not configured)';
                    if (config.scriptPath) {
                        const pathParts = config.scriptPath.split(/[/\\\\\\\\]/);
                        scriptInfo = '\u{1F4C1} ' + pathParts[pathParts.length - 1];
                    } else if (config.script) {
                        const preview = config.script.length > 50 ? config.script.substring(0, 50) + '...' : config.script;
                        scriptInfo = preview;
                    }
                    configHtml = \`
                        <div class="property-group">
                            <span class="property-label">Script Source</span>
                            <div class="property-value">\${config.scriptPath ? 'File' : (config.script ? 'Inline' : 'Not set')}</div>
                        </div>
                        <div class="property-group">
                            <span class="property-label">Script</span>
                            <pre class="property-code">\${escapeHtml(scriptInfo)}</pre>
                        </div>
                        <div class="property-group">
                            <span class="property-label">Interpreter</span>
                            <div class="property-value">\${escapeHtml(config.pythonPath || 'Auto-detect')}</div>
                        </div>
                        <div class="property-group">
                            <span class="property-label">Timeout</span>
                            <div class="property-value">\${config.timeout ? config.timeout + 's' : '(default)'}</div>
                        </div>
                    \`;
                    break;
                case 'export':
                    const outPath = config.outputPath 
                        ? config.outputPath.split(/[/\\\\\\\\]/).pop() 
                        : '(not configured)';
                    const exportQueryPreview = config.query 
                        ? (config.query.length > 50 ? config.query.substring(0, 50) + '...' : config.query)
                        : '(uses previous output)';
                    configHtml = \`
                        <div class="property-group">
                            <span class="property-label">Format</span>
                            <div class="property-value">\${config.format?.toUpperCase() || '(not set)'}</div>
                        </div>
                        <div class="property-group">
                            <span class="property-label">Output File</span>
                            <div class="property-value">\u{1F4C4} \${escapeHtml(outPath)}</div>
                        </div>
                        <div class="property-group">
                            <span class="property-label">Query</span>
                            <pre class="property-code">\${escapeHtml(exportQueryPreview)}</pre>
                        </div>
                        <div class="property-group">
                            <span class="property-label">Timeout</span>
                            <div class="property-value">\${config.timeout ? config.timeout + 's' : '(default)'}</div>
                        </div>
                    \`;
                    break;
                case 'import':
                    const inPath = config.inputPath 
                        ? config.inputPath.split(/[/\\\\\\\\]/).pop() 
                        : '(not configured)';
                    configHtml = \`
                        <div class="property-group">
                            <span class="property-label">Format</span>
                            <div class="property-value">\${config.format?.toUpperCase() || 'Auto-detect'}</div>
                        </div>
                        <div class="property-group">
                            <span class="property-label">Input File</span>
                            <div class="property-value">\u{1F4C4} \${escapeHtml(inPath)}</div>
                        </div>
                        <div class="property-group">
                            <span class="property-label">Target Table</span>
                            <div class="property-value">\${escapeHtml(config.targetTable || '(not set)')}</div>
                        </div>
                        <div class="property-group">
                            <span class="property-label">Create Table</span>
                            <div class="property-value">\${config.createTable !== false ? 'Yes (if needed)' : 'No'}</div>
                        </div>
                        <div class="property-group">
                            <span class="property-label">Timeout</span>
                            <div class="property-value">\${config.timeout ? config.timeout + 's' : '(default)'}</div>
                        </div>
                    \`;
                    break;
                case 'container':
                    const childCount = (config.nodes || []).length;
                    configHtml = \`
                        <div class="property-group">
                            <span class="property-label">Child Tasks</span>
                            <div class="property-value">\${childCount} task(s)</div>
                        </div>
                    \`;
                    break;
                case 'variable':
                    const sourceLabels = {
                        'prompt': '\u{1F4DD} Prompt User',
                        'static': '\u{1F512} Static Value',
                        'sql': '\u{1F5C4}\uFE0F SQL Query'
                    };
                    const sourceLabel = sourceLabels[config.source] || config.source;
                    let varDetails = '';
                    if (config.source === 'prompt') {
                        varDetails = \`
                            <div class="property-group">
                                <span class="property-label">Prompt Message</span>
                                <div class="property-value">\${escapeHtml(config.promptMessage || '(default)')}</div>
                            </div>
                            <div class="property-group">
                                <span class="property-label">Default Value</span>
                                <div class="property-value">\${escapeHtml(config.defaultValue || '(none)')}</div>
                            </div>
                        \`;
                    } else if (config.source === 'static') {
                        varDetails = \`
                            <div class="property-group">
                                <span class="property-label">Value</span>
                                <pre class="property-code">\${escapeHtml(config.value || '(empty)')}</pre>
                            </div>
                        \`;
                    } else if (config.source === 'sql') {
                        const sqlPreview = config.query 
                            ? (config.query.length > 50 ? config.query.substring(0, 50) + '...' : config.query)
                            : '(not configured)';
                        varDetails = \`
                            <div class="property-group">
                                <span class="property-label">Query</span>
                                <pre class="property-code">\${escapeHtml(sqlPreview)}</pre>
                            </div>
                            <div class="property-group">
                                <span class="property-label">Timeout</span>
                                <div class="property-value">\${config.timeout ? config.timeout + 's' : '(default)'}</div>
                            </div>
                        \`;
                    }
                    const varNameDisplay = config.variableName ? ('$' + '{' + escapeHtml(config.variableName) + '}') : '(not set)';
                    configHtml = \`
                        <div class="property-group">
                            <span class="property-label">Variable Name</span>
                            <div class="property-value" style="font-family: monospace;">\${varNameDisplay}</div>
                        </div>
                        <div class="property-group">
                            <span class="property-label">Source</span>
                            <div class="property-value">\${sourceLabel}</div>
                        </div>
                        \${varDetails}
                    \`;
                    break;
            }
            
            content.innerHTML = \`
                <div class="property-group">
                    <span class="property-label">ID</span>
                    <div class="property-value" style="font-family: monospace; font-size: 0.75em;">\${node.id}</div>
                </div>
                <div class="property-group">
                    <span class="property-label">Name</span>
                    <div class="property-value">\${escapeHtml(node.name)}</div>
                </div>
                <div class="property-group">
                    <span class="property-label">Type</span>
                    <div class="property-value">\${node.type.toUpperCase()}</div>
                </div>
                <div class="property-group">
                    <span class="property-label">Position</span>
                    <div class="property-value">(\${node.position.x}, \${node.position.y})</div>
                </div>
                <hr style="border: none; border-top: 1px solid var(--border-color); margin: 12px 0;">
                <h4 style="margin: 8px 0; font-size: 0.85em; color: var(--text-muted);">\u2699\uFE0F Configuration</h4>
                \${configHtml}
                <button class="configure-btn" data-node-id="\${node.id}">
                    \u270F\uFE0F Edit Configuration
                </button>
            \`;
            
            // Attach event listener to configure button (CSP-safe)
            const configBtn = content.querySelector('.configure-btn');
            if (configBtn) {
                configBtn.addEventListener('click', () => {
                    vscode.postMessage({ type: 'configureNode', payload: node.id });
                });
            }
        }
    `}function H6(){return`
        function renderNodes() {
            const container = document.getElementById('nodes-container');
            container.innerHTML = '';

            for (const node of project.nodes) {
                const el = createNodeElement(node);
                container.appendChild(el);
            }
        }

        function createNodeElement(node, isContainerChild = false) {
            const el = document.createElement('div');
            const isSelected = isContainerChild 
                ? containerSelectedNodeId === node.id 
                : selectedNodeId === node.id;
            el.className = 'etl-node ' + node.type + (isSelected ? ' selected' : '');
            el.id = (isContainerChild ? 'container-node-' : 'node-') + node.id;
            el.style.left = node.position.x + 'px';
            el.style.top = node.position.y + 'px';

            // Show child count badge for containers
            const childCountBadge = node.type === 'container' && node.config?.nodes?.length > 0
                ? \`<span class="node-child-count">\${node.config.nodes.length}</span>\`
                : '';

            el.innerHTML = \`
                <div class="node-actions">
                    <button class="node-delete-btn" data-node="\${node.id}" title="Delete task">\xD7</button>
                </div>
                <div class="node-type-indicator"></div>
                <div class="node-content">
                    <div class="node-header">
                        <span class="node-icon">\${nodeIcons[node.type] || '\u{1F4CB}'}</span>
                        <span class="node-name">\${escapeHtml(node.name)}\${childCountBadge}</span>
                    </div>
                    <div class="node-type">\${node.type}</div>
                </div>
                <div class="node-connectors">
                    <div class="connector input" data-node="\${node.id}" data-type="input"></div>
                    <div class="connector output" data-node="\${node.id}" data-type="output"></div>
                </div>
            \`;

            setupNodeEvents(el, node);
            return el;
        }

        function setupNodeEvents(el, node) {
            // Delete button click
            const deleteBtn = el.querySelector('.node-delete-btn');
            if (deleteBtn) {
                deleteBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    vscode.postMessage({ type: 'confirmRemoveNode', payload: node.id });
                });
            }

            // Drag
            el.addEventListener('mousedown', (e) => {
                if (e.target.classList.contains('connector')) return;
                if (e.target.classList.contains('node-delete-btn')) return;
                
                selectedNodeId = node.id;
                isDragging = true;
                
                const rect = el.getBoundingClientRect();
                dragOffset.x = (e.clientX - rect.left) / scale;
                dragOffset.y = (e.clientY - rect.top) / scale;
                
                // Update selection
                document.querySelectorAll('.etl-node').forEach(n => n.classList.remove('selected'));
                el.classList.add('selected');
                
                updatePropertiesPanel(node);
            });

            // Double-click to configure (or open container editor)
            el.addEventListener('dblclick', () => {
                if (node.type === 'container') {
                    openContainerEditor(node.id);
                } else {
                    vscode.postMessage({ type: 'configureNode', payload: node.id });
                }
            });

            // Connector events
            el.querySelectorAll('.connector').forEach(conn => {
                conn.addEventListener('mousedown', (e) => {
                    e.stopPropagation();
                    if (conn.dataset.type === 'output') {
                        isConnecting = true;
                        connectionStart = node.id;
                        createTempLine(e);
                    }
                });

                conn.addEventListener('mouseup', (e) => {
                    if (isConnecting && conn.dataset.type === 'input' && connectionStart !== node.id) {
                        vscode.postMessage({
                            type: 'addConnection',
                            payload: { from: connectionStart, to: node.id }
                        });
                    }
                    endConnection();
                });
            });

            // Context menu for delete
            el.addEventListener('contextmenu', (e) => {
                e.preventDefault();
                vscode.postMessage({ type: 'confirmRemoveNode', payload: node.id });
            });
        }

        function setupToolboxDrag() {
            document.querySelectorAll('.toolbox-item').forEach(item => {
                item.addEventListener('dragstart', (e) => {
                    e.dataTransfer.setData('nodeType', item.dataset.type);
                });
            });
        }

        function setupCanvasDrop() {
            const canvas = document.getElementById('canvas');
            
            canvas.addEventListener('dragover', (e) => {
                e.preventDefault();
            });
            
            canvas.addEventListener('drop', (e) => {
                e.preventDefault();
                const nodeType = e.dataTransfer.getData('nodeType');
                if (nodeType) {
                    const rect = canvas.getBoundingClientRect();
                    const x = (e.clientX - rect.left - pan.x) / scale;
                    const y = (e.clientY - rect.top - pan.y) / scale;
                    
                    vscode.postMessage({
                        type: 'addNode',
                        payload: { type: nodeType, position: { x, y } }
                    });
                }
            });

            // Mouse move for dragging and connecting
            document.addEventListener('mousemove', (e) => {
                if (isDragging && selectedNodeId) {
                    const canvas = document.getElementById('canvas');
                    const rect = canvas.getBoundingClientRect();
                    const x = (e.clientX - rect.left - pan.x) / scale - dragOffset.x;
                    const y = (e.clientY - rect.top - pan.y) / scale - dragOffset.y;
                    
                    // Update node position in DOM
                    const nodeEl = document.getElementById('node-' + selectedNodeId);
                    if (nodeEl) {
                        nodeEl.style.left = Math.max(0, x) + 'px';
                        nodeEl.style.top = Math.max(0, y) + 'px';
                    }
                    
                    // Update connections
                    const node = project.nodes.find(n => n.id === selectedNodeId);
                    if (node) {
                        node.position = { x: Math.max(0, x), y: Math.max(0, y) };
                        renderConnections();
                    }
                }
                
                if (isConnecting && tempLine) {
                    updateTempLine(e);
                }
            });

            document.addEventListener('mouseup', (e) => {
                if (isDragging && selectedNodeId) {
                    // Save position
                    const node = project.nodes.find(n => n.id === selectedNodeId);
                    if (node) {
                        vscode.postMessage({
                            type: 'updateNodePosition',
                            payload: { nodeId: selectedNodeId, position: node.position }
                        });
                    }
                }
                
                isDragging = false;
                endConnection();
            });

            // Deselect on canvas click
            canvas.addEventListener('click', (e) => {
                if (e.target === canvas || e.target.classList.contains('nodes-layer')) {
                    selectedNodeId = null;
                    document.querySelectorAll('.etl-node').forEach(n => n.classList.remove('selected'));
                    updatePropertiesPanel(null);
                }
            });
        }
    `}function W6(){return`
        function setupContainerEditor() {
            // Close button
            document.getElementById('container-editor-close').addEventListener('click', closeContainerEditor);
            document.getElementById('container-editor-cancel').addEventListener('click', closeContainerEditor);
            document.getElementById('container-editor-save').addEventListener('click', saveContainerAndClose);

            // Toolbox drag for container editor
            document.querySelectorAll('.toolbox-item[data-container="true"]').forEach(item => {
                item.addEventListener('dragstart', (e) => {
                    e.dataTransfer.setData('containerNodeType', item.dataset.type);
                });
            });

            // Canvas drop for container editor
            const containerCanvas = document.getElementById('container-canvas');
            containerCanvas.addEventListener('dragover', (e) => e.preventDefault());
            containerCanvas.addEventListener('drop', (e) => {
                e.preventDefault();
                const nodeType = e.dataTransfer.getData('containerNodeType');
                if (nodeType && containerEditorOpen) {
                    const rect = containerCanvas.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;
                    addContainerChildNode(nodeType, { x, y });
                }
            });

            // Click to deselect in container canvas
            containerCanvas.addEventListener('click', (e) => {
                if (e.target === containerCanvas || e.target.id === 'container-nodes' || e.target.id === 'container-zoom-wrapper') {
                    containerSelectedNodeId = null;
                    document.querySelectorAll('#container-nodes .etl-node').forEach(n => n.classList.remove('selected'));
                }
            });

            // Mouse move for container dragging
            document.addEventListener('mousemove', (e) => {
                if (containerIsDragging && containerSelectedNodeId) {
                    const canvas = document.getElementById('container-canvas');
                    const rect = canvas.getBoundingClientRect();
                    const x = e.clientX - rect.left - containerDragOffset.x;
                    const y = e.clientY - rect.top - containerDragOffset.y;

                    const nodeEl = document.getElementById('container-node-' + containerSelectedNodeId);
                    if (nodeEl) {
                        nodeEl.style.left = Math.max(0, x) + 'px';
                        nodeEl.style.top = Math.max(0, y) + 'px';
                    }

                    const node = containerNodes.find(n => n.id === containerSelectedNodeId);
                    if (node) {
                        node.position = { x: Math.max(0, x), y: Math.max(0, y) };
                        renderContainerConnections();
                    }
                }

                if (containerIsConnecting && containerTempLine) {
                    updateContainerTempLine(e);
                }
            });

            document.addEventListener('mouseup', () => {
                containerIsDragging = false;
                endContainerConnection();
            });

            // Escape to close
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && containerEditorOpen) {
                    closeContainerEditor();
                }
                if (e.key === 'Delete' && containerEditorOpen && containerSelectedNodeId) {
                    removeContainerChildNode(containerSelectedNodeId);
                }
            });
        }

        function openContainerEditor(containerId) {
            const containerNode = project.nodes.find(n => n.id === containerId);
            if (!containerNode || containerNode.type !== 'container') return;

            editingContainerId = containerId;
            containerEditorOpen = true;
            containerNodes = JSON.parse(JSON.stringify(containerNode.config.nodes || []));
            containerConnections = JSON.parse(JSON.stringify(containerNode.config.connections || []));
            containerSelectedNodeId = null;

            document.getElementById('container-editor-title').textContent = '\u{1F4E6} Edit: ' + containerNode.name;
            document.getElementById('container-editor-overlay').style.display = 'flex';

            renderContainerNodes();
            renderContainerConnections();
        }

        function closeContainerEditor() {
            containerEditorOpen = false;
            editingContainerId = null;
            containerNodes = [];
            containerConnections = [];
            document.getElementById('container-editor-overlay').style.display = 'none';
        }

        function saveContainerAndClose() {
            if (!editingContainerId) return;

            vscode.postMessage({
                type: 'updateContainerNodes',
                payload: {
                    containerId: editingContainerId,
                    nodes: containerNodes,
                    connections: containerConnections
                }
            });

            closeContainerEditor();
        }

        function renderContainerNodes() {
            const container = document.getElementById('container-nodes');
            container.innerHTML = '';

            for (const node of containerNodes) {
                const el = createContainerNodeElement(node);
                container.appendChild(el);
            }
        }

        function createContainerNodeElement(node) {
            const el = document.createElement('div');
            el.className = 'etl-node ' + node.type + (containerSelectedNodeId === node.id ? ' selected' : '');
            el.id = 'container-node-' + node.id;
            el.style.left = node.position.x + 'px';
            el.style.top = node.position.y + 'px';

            el.innerHTML = \`
                <div class="node-actions">
                    <button class="node-delete-btn" data-node="\${node.id}" title="Delete">\xD7</button>
                </div>
                <div class="node-type-indicator"></div>
                <div class="node-content">
                    <div class="node-header">
                        <span class="node-icon">\${nodeIcons[node.type] || '\u{1F4CB}'}</span>
                        <span class="node-name">\${escapeHtml(node.name)}</span>
                    </div>
                    <div class="node-type">\${node.type}</div>
                </div>
                <div class="node-connectors">
                    <div class="connector input" data-node="\${node.id}" data-type="input"></div>
                    <div class="connector output" data-node="\${node.id}" data-type="output"></div>
                </div>
            \`;

            setupContainerNodeEvents(el, node);
            return el;
        }

        function setupContainerNodeEvents(el, node) {
            // Delete button
            const deleteBtn = el.querySelector('.node-delete-btn');
            if (deleteBtn) {
                deleteBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    removeContainerChildNode(node.id);
                });
            }

            // Drag
            el.addEventListener('mousedown', (e) => {
                if (e.target.classList.contains('connector')) return;
                if (e.target.classList.contains('node-delete-btn')) return;

                containerSelectedNodeId = node.id;
                containerIsDragging = true;

                const rect = el.getBoundingClientRect();
                containerDragOffset.x = e.clientX - rect.left;
                containerDragOffset.y = e.clientY - rect.top;

                document.querySelectorAll('#container-nodes .etl-node').forEach(n => n.classList.remove('selected'));
                el.classList.add('selected');
            });

            // Double-click to configure (first save, then configure)
            el.addEventListener('dblclick', () => {
                // First save current state to backend
                vscode.postMessage({
                    type: 'updateContainerNodes',
                    payload: {
                        containerId: editingContainerId,
                        nodes: containerNodes,
                        connections: containerConnections
                    }
                });
                // Then request configuration
                vscode.postMessage({ 
                    type: 'configureContainerChildNode', 
                    payload: { containerId: editingContainerId, nodeId: node.id } 
                });
            });

            // Connector events
            el.querySelectorAll('.connector').forEach(conn => {
                conn.addEventListener('mousedown', (e) => {
                    e.stopPropagation();
                    if (conn.dataset.type === 'output') {
                        containerIsConnecting = true;
                        containerConnectionStart = node.id;
                        createContainerTempLine(e);
                    }
                });

                conn.addEventListener('mouseup', () => {
                    if (containerIsConnecting && conn.dataset.type === 'input' && containerConnectionStart !== node.id) {
                        addContainerConnection(containerConnectionStart, node.id);
                    }
                    endContainerConnection();
                });
            });

            // Context menu delete
            el.addEventListener('contextmenu', (e) => {
                e.preventDefault();
                removeContainerChildNode(node.id);
            });
        }

        function addContainerChildNode(type, position) {
            const nodeNames = {
                sql: 'SQL Task',
                python: 'Python Script',
                export: 'Export Data',
                import: 'Import Data',
                variable: 'Variable'
            };

            const defaultConfigs = {
                sql: { type: 'sql', query: '', connection: 'default' },
                python: { type: 'python', script: '' },
                export: { type: 'export', format: 'csv', outputPath: '' },
                import: { type: 'import', format: 'csv', inputPath: '', targetTable: '' },
                variable: { type: 'variable', variableName: '', source: 'prompt', promptMessage: 'Enter value' }
            };

            const newNode = {
                id: 'child-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9),
                type: type,
                name: nodeNames[type] || 'New Task',
                position: position,
                config: defaultConfigs[type] || {}
            };

            containerNodes.push(newNode);
            renderContainerNodes();
            renderContainerConnections();
        }

        function removeContainerChildNode(nodeId) {
            containerNodes = containerNodes.filter(n => n.id !== nodeId);
            containerConnections = containerConnections.filter(c => c.from !== nodeId && c.to !== nodeId);
            if (containerSelectedNodeId === nodeId) containerSelectedNodeId = null;
            renderContainerNodes();
            renderContainerConnections();
        }

        function addContainerConnection(from, to) {
            // Check if connection already exists
            if (containerConnections.some(c => c.from === from && c.to === to)) return;

            containerConnections.push({
                id: 'conn-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9),
                from: from,
                to: to
            });
            renderContainerConnections();
        }

        function renderContainerConnections() {
            const svg = document.getElementById('container-connections-svg');
            svg.querySelectorAll('path').forEach(p => p.remove());

            for (const conn of containerConnections) {
                const fromNode = containerNodes.find(n => n.id === conn.from);
                const toNode = containerNodes.find(n => n.id === conn.to);

                if (fromNode && toNode) {
                    const path = createContainerConnectionPath(fromNode, toNode, conn);
                    svg.appendChild(path);
                }
            }
        }

        function createContainerConnectionPath(from, to, conn) {
            const group = document.createElementNS('http://www.w3.org/2000/svg', 'g');

            // Determine marker based on connection type
            const markerType = conn.connectionType === 'failure' ? 'container-arrowhead-failure' : 'container-arrowhead';
            const lineClass = conn.connectionType === 'failure' ? 'connection-line connection-failure' : 'connection-line';

            // Source: always right side (output connector)
            const x1 = from.position.x + 160;
            const y1 = from.position.y + 35;
            
            // Determine target connection point based on relative positions
            let x2, y2;
            const nodeWidth = 160;
            const nodeHeight = 70;
            
            const dx = to.position.x - from.position.x;
            const dy = to.position.y - from.position.y;
            
            if (dx > 50) {
                x2 = to.position.x;
                y2 = to.position.y + 35;
            } else if (dx < -50 && Math.abs(dy) < 80) {
                x2 = to.position.x + nodeWidth;
                y2 = to.position.y + 35;
            } else if (dy > 30) {
                x2 = to.position.x + nodeWidth / 2;
                y2 = to.position.y;
            } else if (dy < -30) {
                x2 = to.position.x + nodeWidth / 2;
                y2 = to.position.y + nodeHeight;
            } else {
                x2 = to.position.x;
                y2 = to.position.y + 35;
            }

            // Create bezier curve with appropriate control points
            let d;
            if (dx > 50) {
                const midX = (x1 + x2) / 2;
                d = 'M ' + x1 + ' ' + y1 + ' C ' + midX + ' ' + y1 + ', ' + midX + ' ' + y2 + ', ' + x2 + ' ' + y2;
            } else if (dx < -50 && Math.abs(dy) < 80) {
                d = 'M ' + x1 + ' ' + y1 + ' C ' + (x1 + 60) + ' ' + y1 + ', ' + (x2 + 60) + ' ' + y2 + ', ' + x2 + ' ' + y2;
            } else if (dy > 30) {
                d = 'M ' + x1 + ' ' + y1 + ' C ' + (x1 + 40) + ' ' + y1 + ', ' + x2 + ' ' + (y2 - 40) + ', ' + x2 + ' ' + y2;
            } else if (dy < -30) {
                d = 'M ' + x1 + ' ' + y1 + ' C ' + (x1 + 40) + ' ' + y1 + ', ' + x2 + ' ' + (y2 + 40) + ', ' + x2 + ' ' + y2;
            } else {
                const midX = (x1 + x2) / 2;
                d = 'M ' + x1 + ' ' + y1 + ' C ' + midX + ' ' + y1 + ', ' + midX + ' ' + y2 + ', ' + x2 + ' ' + y2;
            }

            const hitPath = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            hitPath.setAttribute('d', d);
            hitPath.setAttribute('class', 'connection-hit');
            
            // Right-click to toggle connection type
            hitPath.addEventListener('contextmenu', (e) => {
                e.preventDefault();
                e.stopPropagation();
                const currentType = conn.connectionType || 'success';
                const newType = currentType === 'success' ? 'failure' : 'success';
                // Update locally
                conn.connectionType = newType;
                renderContainerConnections();
            });
            
            // Click to delete
            hitPath.addEventListener('click', (e) => {
                e.stopPropagation();
                containerConnections = containerConnections.filter(c => c.id !== conn.id);
                renderContainerConnections();
            });

            const visiblePath = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            visiblePath.setAttribute('d', d);
            visiblePath.setAttribute('marker-end', 'url(#' + markerType + ')');
            visiblePath.setAttribute('class', lineClass);

            group.appendChild(hitPath);
            group.appendChild(visiblePath);

            return group;
        }

        function createContainerTempLine(e) {
            const svg = document.getElementById('container-connections-svg');
            containerTempLine = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            containerTempLine.classList.add('temp-connection');
            svg.appendChild(containerTempLine);
            updateContainerTempLine(e);
        }

        function updateContainerTempLine(e) {
            if (!containerTempLine || !containerConnectionStart) return;

            const fromNode = containerNodes.find(n => n.id === containerConnectionStart);
            if (!fromNode) return;

            const canvas = document.getElementById('container-canvas');
            const rect = canvas.getBoundingClientRect();

            const x1 = fromNode.position.x + 160;
            const y1 = fromNode.position.y + 35;
            const x2 = e.clientX - rect.left;
            const y2 = e.clientY - rect.top;

            const midX = (x1 + x2) / 2;
            containerTempLine.setAttribute('d', 'M ' + x1 + ' ' + y1 + ' C ' + midX + ' ' + y1 + ', ' + midX + ' ' + y2 + ', ' + x2 + ' ' + y2);
        }

        function endContainerConnection() {
            containerIsConnecting = false;
            containerConnectionStart = null;
            if (containerTempLine) {
                containerTempLine.remove();
                containerTempLine = null;
            }
        }
    `}function k6(t){return`
        (function() {
            'use strict';
            
            ${M6(t)}
            
            ${v6()}
            
            ${U6()}
            
            ${B6()}
            
            ${H6()}
            
            ${G6()}
            
            ${F6()}
            
            ${W6()}
            
            // Initialize function
            function init() {
                renderNodes();
                renderConnections();
                setupToolboxDrag();
                setupCanvasDrop();
                setupToolbarButtons();
                setupKeyboardEvents();
                setupZoomPan();
                setupContainerEditor();
                
                // Request current project state
                vscode.postMessage({ type: 'getProject' });
            }
            
            // Start
            init();
        })();
    `}function $6(t){return k6(t)}function Mye(t){return`
        <header class="toolbar">
            <div class="toolbar-left">
                <button id="btn-new" title="New Project">\u{1F4C4} New</button>
                <button id="btn-open" title="Open Project">\u{1F4C2} Open</button>
                <button id="btn-save" title="Save Project">\u{1F4BE} Save</button>
                <span class="separator"></span>
                <button id="btn-run" class="btn-primary" title="Run Project">\u25B6\uFE0F Run</button>
                <button id="btn-stop" class="btn-danger" title="Stop Execution" style="display:none;">\u23F9\uFE0F Stop</button>
            </div>
            <div class="toolbar-center">
                <span class="project-name">${t}</span>
            </div>
            <div class="toolbar-right">
                <span class="status" id="status"></span>
            </div>
        </header>`}function vye(){return`
        <aside class="toolbox">
            <h3>\u{1F4E6} Tasks</h3>
            <div class="toolbox-items">
                <div class="toolbox-item" data-type="variable" draggable="true">
                    <span class="icon">\u{1F524}</span>
                    <span class="label">Variable</span>
                </div>
                <div class="toolbox-item" data-type="sql" draggable="true">
                    <span class="icon">\u{1F4DC}</span>
                    <span class="label">SQL Task</span>
                </div>
                <div class="toolbox-item" data-type="python" draggable="true">
                    <span class="icon">\u{1F40D}</span>
                    <span class="label">Python Script</span>
                </div>
                <div class="toolbox-item" data-type="container" draggable="true">
                    <span class="icon">\u{1F4E6}</span>
                    <span class="label">Container</span>
                </div>
                <div class="toolbox-item" data-type="export" draggable="true">
                    <span class="icon">\u{1F4E4}</span>
                    <span class="label">Export (CSV/XLSB)</span>
                </div>
                <div class="toolbox-item" data-type="import" draggable="true">
                    <span class="icon">\u{1F4E5}</span>
                    <span class="label">Import (CSV/XLSB)</span>
                </div>
            </div>
            
            <h3>\u2139\uFE0F Help</h3>
            <div class="help-text">
                <p>Drag tasks to canvas</p>
                <p>Connect outputs to inputs</p>
                <p>Double-click to configure</p>
                <p>Connected = Sequential</p>
                <p>Unconnected = Parallel</p>
                <p>Use \${name} in SQL</p>
            </div>
        </aside>`}function Uye(){return`
        <main class="canvas-container" id="canvas">
            <div id="zoom-wrapper" class="zoom-wrapper">
                <svg class="connections-layer" id="connections-svg">
                    <defs>
                        <marker id="arrowhead" markerWidth="10" markerHeight="7" 
                            refX="10" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="#4caf50" />
                        </marker>
                        <marker id="arrowhead-failure" markerWidth="10" markerHeight="7" 
                            refX="10" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="#f44336" />
                        </marker>
                    </defs>
                </svg>
                <div class="nodes-layer" id="nodes-container"></div>
            </div>
        </main>`}function Bye(){return`
        <aside class="properties-panel" id="properties">
            <h3>\u2699\uFE0F Properties</h3>
            <div id="properties-content">
                <p class="placeholder">Select a task to view properties</p>
            </div>
        </aside>`}function Fye(){return`
        <div id="container-editor-overlay" class="container-editor-overlay" style="display:none;">
            <div class="container-editor-modal">
                <header class="container-editor-header">
                    <span id="container-editor-title" class="container-editor-title">\u{1F4E6} Edit Container</span>
                    <button id="container-editor-close" class="container-editor-close" title="Close">\u2715</button>
                </header>
                <div class="container-editor-content">
                    <aside class="container-editor-toolbox">
                        <h4>\u{1F4E6} Tasks</h4>
                        <div class="toolbox-item" data-type="variable" data-container="true" draggable="true">
                            <span class="icon">\u{1F524}</span>
                            <span class="label">Variable</span>
                        </div>
                        <div class="toolbox-item" data-type="sql" data-container="true" draggable="true">
                            <span class="icon">\u{1F4DC}</span>
                            <span class="label">SQL Task</span>
                        </div>
                        <div class="toolbox-item" data-type="python" data-container="true" draggable="true">
                            <span class="icon">\u{1F40D}</span>
                            <span class="label">Python</span>
                        </div>
                        <div class="toolbox-item" data-type="export" data-container="true" draggable="true">
                            <span class="icon">\u{1F4E4}</span>
                            <span class="label">Export</span>
                        </div>
                        <div class="toolbox-item" data-type="import" data-container="true" draggable="true">
                            <span class="icon">\u{1F4E5}</span>
                            <span class="label">Import</span>
                        </div>
                    </aside>
                    <div class="container-editor-canvas" id="container-canvas">
                        <div class="zoom-wrapper" id="container-zoom-wrapper">
                            <svg class="connections-layer" id="container-connections-svg">
                                <defs>
                                    <marker id="container-arrowhead" markerWidth="10" markerHeight="7" 
                                        refX="10" refY="3.5" orient="auto">
                                        <polygon points="0 0, 10 3.5, 0 7" fill="#4caf50" />
                                    </marker>
                                    <marker id="container-arrowhead-failure" markerWidth="10" markerHeight="7" 
                                        refX="10" refY="3.5" orient="auto">
                                        <polygon points="0 0, 10 3.5, 0 7" fill="#f44336" />
                                    </marker>
                                </defs>
                            </svg>
                            <div class="nodes-layer" id="container-nodes"></div>
                        </div>
                    </div>
                </div>
                <footer class="container-editor-footer">
                    <button id="container-editor-cancel" class="btn-cancel">Cancel</button>
                    <button id="container-editor-save" class="btn-save">\u{1F4BE} Save</button>
                </footer>
            </div>
        </div>`}function Y6(t){let{project:e,nonce:r}=t;return`<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'none'; style-src 'unsafe-inline'; script-src 'nonce-${r}';">
    <title>ETL Designer - ${e.name}</title>
    <style>${x6()}</style>
</head>
<body>
    <div class="etl-designer">
        ${Mye(e.name)}

        <div class="main-content">
            ${vye()}
            ${Uye()}
            ${Bye()}
        </div>
    </div>

    ${Fye()}

    <script nonce="${r}">
        ${$6(e)}
    </script>
</body>
</html>`}var Je=q(require("vscode")),bS=class{constructor(e,r){this.projectManager=e;this.onUpdate=r}async configureNode(e){let r=this.projectManager.getNode(e);if(r)switch(r.type){case"sql":await this.configureSqlNode(r,e);break;case"python":await this.configurePythonNode(r,e);break;case"export":await this.configureExportNode(r,e);break;case"import":await this.configureImportNode(r,e);break;case"variable":await this.configureVariableNode(r,e);break}}getDefaultNodeName(e){return{sql:"SQL Task",python:"Python Script",container:"Container",export:"Export Data",import:"Import Data",variable:"Variable"}[e]||"New Task"}async configureSqlNode(e,r){let n=e.config,i=await Je.window.showInputBox({prompt:"Enter task name",value:e.name,placeHolder:"e.g. Load Customer Data"});if(i===void 0)return;let s=await Je.window.showInputBox({prompt:"Enter SQL query",value:n.query,placeHolder:"SELECT * FROM table_name"});if(s!==void 0){let o=await Je.window.showInputBox({prompt:"Enter execution timeout in seconds (optional)",value:n.timeout?String(n.timeout):"",placeHolder:"e.g. 60"}),a=o&&!isNaN(parseInt(o))?parseInt(o):void 0;this.projectManager.updateNode(r,{name:i,config:{...n,query:s,timeout:a}}),this.onUpdate()}}async configurePythonNode(e,r){let n=e.config,i=await Je.window.showInputBox({prompt:"Enter task name",value:e.name,placeHolder:"e.g. Transform Data"});if(i===void 0)return;let s=await Je.window.showQuickPick(["Enter script inline","Select script file"],{placeHolder:"How to provide the Python script?"});if(s==="Enter script inline"){let o=await Je.window.showInputBox({prompt:"Enter Python script",value:n.script,placeHolder:'print("Hello ETL")'});if(o!==void 0){let a=await Je.window.showInputBox({prompt:"Enter execution timeout in seconds (optional)",value:n.timeout?String(n.timeout):"",placeHolder:"e.g. 60"}),l=a&&!isNaN(parseInt(a))?parseInt(a):void 0;this.projectManager.updateNode(r,{name:i,config:{...n,script:o,scriptPath:void 0,timeout:l}}),this.onUpdate()}}else if(s==="Select script file"){let o=await Je.window.showOpenDialog({filters:{Python:["py"]},canSelectMany:!1});if(o&&o[0]){let a=await Je.window.showInputBox({prompt:"Enter execution timeout in seconds (optional)",value:n.timeout?String(n.timeout):"",placeHolder:"e.g. 60"}),l=a&&!isNaN(parseInt(a))?parseInt(a):void 0;this.projectManager.updateNode(r,{name:i,config:{...n,scriptPath:o[0].fsPath,script:"",timeout:l}}),this.onUpdate()}}}async configureExportNode(e,r){let n=e.config,i=await Je.window.showInputBox({prompt:"Enter task name",value:e.name,placeHolder:"e.g. Export to CSV"});if(i===void 0)return;let s=await Je.window.showQuickPick(["csv","xlsb"],{placeHolder:"Select output format"});if(s){let o=await Je.window.showSaveDialog({filters:s==="csv"?{CSV:["csv"]}:{"Excel Binary":["xlsb"]}});if(o){let a=await Je.window.showInputBox({prompt:"Enter SQL query for export",value:n.query||"",placeHolder:"SELECT * FROM table_name"});if(a!==void 0){let l=await Je.window.showInputBox({prompt:"Enter execution timeout in seconds (optional)",value:n.timeout?String(n.timeout):"",placeHolder:"e.g. 300"}),c=l&&!isNaN(parseInt(l))?parseInt(l):void 0;this.projectManager.updateNode(r,{name:i,config:{...n,format:s,outputPath:o.fsPath,query:a,timeout:c}}),this.onUpdate()}}}}async configureImportNode(e,r){let n=e.config,i=await Je.window.showInputBox({prompt:"Enter task name",value:e.name,placeHolder:"e.g. Import Products"});if(i===void 0)return;let s=await Je.window.showOpenDialog({filters:{"Data Files":["csv","xlsb"],CSV:["csv"],"Excel Binary":["xlsb"]},canSelectMany:!1});if(s&&s[0]){let o=s[0].fsPath,a=o.endsWith(".xlsb")?"xlsb":"csv",l=await Je.window.showInputBox({prompt:"Enter target table name",value:n.targetTable,placeHolder:"SCHEMA.TABLE_NAME"});if(l){let c=await Je.window.showInputBox({prompt:"Enter execution timeout in seconds (optional)",value:n.timeout?String(n.timeout):"",placeHolder:"e.g. 300"}),u=c&&!isNaN(parseInt(c))?parseInt(c):void 0;this.projectManager.updateNode(r,{name:i,config:{...n,format:a,inputPath:o,targetTable:l,timeout:u}}),this.onUpdate()}}}async configureVariableNode(e,r){let n=e.config,i=await Je.window.showInputBox({prompt:"Enter task name",value:e.name,placeHolder:"e.g. Get Date Filter"});if(i===void 0)return;let s=await Je.window.showInputBox({prompt:"Enter variable name (without ${})",value:n.variableName,placeHolder:"e.g. date_filter"});if(!s)return;let o=await Je.window.showQuickPick([{label:"Prompt User",value:"prompt",description:"Ask user for value at runtime"},{label:"Static Value",value:"static",description:"Use fixed value"},{label:"SQL Query",value:"sql",description:"Get value from database query"}],{placeHolder:"How should the variable value be set?"});if(!o)return;let a={...n,variableName:s,source:o.value};switch(o.value){case"prompt":{let l=await Je.window.showInputBox({prompt:"Enter prompt message to show user",value:n.promptMessage||`Enter value for ${s}`,placeHolder:"e.g. Enter date filter (YYYY-MM-DD)"}),c=await Je.window.showInputBox({prompt:"Enter default value (optional)",value:n.defaultValue||"",placeHolder:"e.g. 2024-01-01"});a={...a,promptMessage:l,defaultValue:c};break}case"static":{let l=await Je.window.showInputBox({prompt:"Enter static value",value:n.value||"",placeHolder:"e.g. 2024-06-15"});if(l===void 0)return;a={...a,value:l};break}case"sql":{let l=await Je.window.showInputBox({prompt:"Enter SQL query (must return single value)",value:n.query||"",placeHolder:"SELECT MAX(date) FROM sales_data"});if(!l)return;let c=await Je.window.showInputBox({prompt:"Enter timeout in seconds (optional)",value:n.timeout?String(n.timeout):"",placeHolder:"e.g. 30"}),u=c&&!isNaN(parseInt(c))?parseInt(c):void 0;a={...a,query:l,timeout:u};break}}this.projectManager.updateNode(r,{name:i,config:a}),this.onUpdate()}};var Wn=class t{constructor(e,r,n){this._disposables=[];this._panel=e,this._context=r,this._projectManager=ms.getInstance(),this._nodeConfigurator=new bS(this._projectManager,()=>this._sendProjectUpdate()),this._executionEngine=new uE,this._executionEngine.registerExecutor("sql",new dE),this._executionEngine.registerExecutor("python",new fE),this._executionEngine.registerExecutor("export",new iS),this._executionEngine.registerExecutor("import",new NS),this._executionEngine.registerExecutor("container",new OS(this._executionEngine)),this._executionEngine.registerExecutor("variable",new CS);let i=n||this._projectManager.createProject("New ETL Project");this._updateWebview(i),this._panel.onDidDispose(()=>this.dispose(),null,this._disposables),this._panel.webview.onDidReceiveMessage(s=>this._handleMessage(s),null,this._disposables)}static{this.viewType="netezza.etlDesigner"}static setConnectionManager(e){t._connectionManager=e}static createOrShow(e,r){let n=ve.window.activeTextEditor?ve.window.activeTextEditor.viewColumn:void 0;if(t.currentPanel){t.currentPanel._panel.reveal(n),r&&t.currentPanel._updateProject(r);return}let i=ve.window.createWebviewPanel(t.viewType,"ETL Designer",n||ve.ViewColumn.One,{enableScripts:!0,retainContextWhenHidden:!0,localResourceRoots:[e.extensionUri]});t.currentPanel=new t(i,e,r)}async _handleMessage(e){let r=this._projectManager.getCurrentProject();switch(e.type){case"addNode":{let n=e.payload,i={id:oE(),type:n.type,name:this._nodeConfigurator.getDefaultNodeName(n.type),position:n.position,config:Tw(n.type)};this._projectManager.addNode(i),this._sendProjectUpdate();break}case"confirmRemoveNode":{let n=e.payload;await ve.window.showWarningMessage("Delete this task?",{modal:!0},"Delete")==="Delete"&&(this._projectManager.removeNode(n),this._sendProjectUpdate());break}case"removeNode":{let n=e.payload;this._projectManager.removeNode(n),this._sendProjectUpdate();break}case"updateNodePosition":{let{nodeId:n,position:i}=e.payload;this._projectManager.updateNode(n,{position:i});break}case"updateNodeName":{let{nodeId:n,name:i}=e.payload;this._projectManager.updateNode(n,{name:i}),this._sendProjectUpdate();break}case"addConnection":{let{from:n,to:i}=e.payload;try{this._projectManager.addConnection({id:aE(),from:n,to:i}),this._sendProjectUpdate()}catch(s){ve.window.showErrorMessage(String(s))}break}case"confirmRemoveConnection":{let n=e.payload;await ve.window.showWarningMessage("Delete this connection?",{modal:!0},"Delete")==="Delete"&&(this._projectManager.removeConnection(n),this._sendProjectUpdate());break}case"removeConnection":{let n=e.payload;this._projectManager.removeConnection(n),this._sendProjectUpdate();break}case"toggleConnectionType":{let{connectionId:n,newType:i}=e.payload,s=r?.connections.find(o=>o.id===n);s&&(s.connectionType=i,this._sendProjectUpdate());break}case"configureNode":{let n=e.payload;await this._nodeConfigurator.configureNode(n);break}case"updateContainerNodes":{let{containerId:n,nodes:i,connections:s}=e.payload,o=this._projectManager.getNode(n);o&&o.type==="container"&&(this._projectManager.updateNode(n,{config:{type:"container",nodes:i,connections:s}}),this._sendProjectUpdate());break}case"configureContainerChildNode":{let{containerId:n,nodeId:i}=e.payload,s=this._projectManager.getNode(n);if(s&&s.type==="container"){let a=s.config.nodes.find(l=>l.id===i);a&&await this._configureContainerChildNode(n,a)}break}case"saveProject":{await this._saveProject();break}case"loadProject":{await this._loadProject();break}case"newProject":{let n=await ve.window.showInputBox({prompt:"Enter project name",value:"New ETL Project"});n&&(this._projectManager.createProject(n),this._sendProjectUpdate());break}case"runProject":{r&&await this._runProject(r);break}case"stopProject":{this._stopExecution();break}case"getProject":{this._sendProjectUpdate();break}}}async _saveProject(){if(!this._projectManager.getCurrentProject())return;let r=await ve.window.showSaveDialog({filters:{"ETL Project":["etl.json"]},defaultUri:this._projectManager.getProjectPath()?ve.Uri.file(this._projectManager.getProjectPath()):void 0});if(r)try{await this._projectManager.saveProject(r.fsPath),ve.window.showInformationMessage(`Project saved to ${r.fsPath}`)}catch(n){ve.window.showErrorMessage(`Failed to save project: ${n}`)}}async _loadProject(){let e=await ve.window.showOpenDialog({filters:{"ETL Project":["etl.json"]},canSelectMany:!1});if(e&&e[0])try{let r=await this._projectManager.loadProject(e[0].fsPath);this._updateWebview(r),ve.window.showInformationMessage(`Project loaded: ${r.name}`)}catch(r){ve.window.showErrorMessage(`Failed to load project: ${r}`)}}async _runProject(e){let r=this._projectManager.validateProject(e);if(r.length>0){ve.window.showErrorMessage(`Project validation failed:
${r.join(`
`)}`);return}let n=t._connectionManager;if(!n){ve.window.showErrorMessage("Connection manager not initialized. Please reload the extension.");return}let i=n.getActiveConnectionName();if(!i){ve.window.showErrorMessage("No active connection. Please connect to a database first.");return}let s=await n.getConnection(i);if(!s){ve.window.showErrorMessage(`Connection not found: ${i}`);return}let o=ve.window.createOutputChannel("ETL Execution");o.show(),this._cancellationTokenSource=new ve.CancellationTokenSource;let a=new yS(e.variables||{}),l={extensionContext:this._context,variables:e.variables||{},nodeOutputs:new Map,connectionDetails:s,cancellationToken:this._cancellationTokenSource.token,onProgress:c=>{o.appendLine(`[${new Date().toLocaleTimeString()}] ${c}`)},variableManager:a};this._executionEngine.onStatusChange((c,u,d)=>{this._panel.webview.postMessage({type:"nodeStatusUpdate",payload:{nodeId:c,status:u,message:d}})}),this._panel.webview.postMessage({type:"executionStarted"});try{o.appendLine(`Starting ETL Project: ${e.name}`),o.appendLine(`Connection: ${i}`),o.appendLine("---");let c=await this._executionEngine.execute(e,l);o.appendLine("---"),o.appendLine(`Execution ${c.status}`),o.appendLine(`Duration: ${c.endTime?((c.endTime.getTime()-c.startTime.getTime())/1e3).toFixed(2):"N/A"} seconds`),this._panel.webview.postMessage({type:"executionEnded",payload:{status:c.status==="completed"?"Completed \u2713":"Failed \u2717"}}),c.status==="completed"?ve.window.showInformationMessage("ETL project completed successfully!"):c.status==="failed"&&ve.window.showErrorMessage("ETL project failed. Check output for details.")}catch(c){o.appendLine(`Error: ${c}`),ve.window.showErrorMessage(`ETL execution error: ${c}`),this._panel.webview.postMessage({type:"executionEnded",payload:{status:"Error \u2717"}})}finally{this._cancellationTokenSource?.dispose(),this._cancellationTokenSource=void 0}}_stopExecution(){this._cancellationTokenSource&&(this._cancellationTokenSource.cancel(),ve.window.showInformationMessage("ETL execution cancellation requested..."))}_updateProject(e){this._projectManager.createProject(e.name);for(let r of e.nodes)this._projectManager.addNode(r);for(let r of e.connections)try{this._projectManager.addConnection(r)}catch{}this._updateWebview(e)}_updateWebview(e){this._panel.webview.html=this._getHtml(e)}_sendProjectUpdate(){let e=this._projectManager.getCurrentProject();e&&this._panel.webview.postMessage({type:"projectUpdate",payload:e})}async _configureContainerChildNode(e,r){let n=r.config,i=!1;switch(r.type){case"sql":{let s=await ve.window.showInputBox({prompt:"Enter task name",value:r.name});if(s===void 0)return;let o=await ve.window.showInputBox({prompt:"Enter SQL query",value:n.query||""});o!==void 0&&(r.name=s,n.query=o,i=!0);break}case"python":{let s=await ve.window.showInputBox({prompt:"Enter task name",value:r.name});if(s===void 0)return;let o=await ve.window.showInputBox({prompt:"Enter Python script",value:n.script||""});o!==void 0&&(r.name=s,n.script=o,i=!0);break}case"variable":{let s=await ve.window.showInputBox({prompt:"Enter task name",value:r.name});if(s===void 0)return;let o=await ve.window.showInputBox({prompt:"Enter variable name",value:n.variableName||""});o&&(r.name=s,n.variableName=o,i=!0);break}default:ve.window.showInformationMessage(`Configure ${r.type} nodes by double-clicking in the main designer.`);return}if(i){let s=this._projectManager.getNode(e);if(s&&s.type==="container"){let o=s.config,a=o.nodes.findIndex(l=>l.id===r.id);a>=0&&(o.nodes[a]=r,this._projectManager.updateNode(e,{config:o}),this._sendProjectUpdate(),this._panel.webview.postMessage({type:"containerChildUpdated",payload:{containerId:e,childNode:r}}))}}}_getHtml(e){return Y6({project:e,nonce:this._getNonce()})}_getNonce(){let e="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let n=0;n<32;n++)e+=r.charAt(Math.floor(Math.random()*r.length));return e}dispose(){for(t.currentPanel=void 0,this._panel.dispose();this._disposables.length;){let e=this._disposables.pop();e&&e.dispose()}}};var Kd=q(require("vscode"));function jr(t){return`${t.dbName}.${t.schema}.${t.label}`}async function Oi(t,e){return await t.getConnection(e||t.getActiveConnectionName()||"")?!0:(Kd.window.showErrorMessage("No database connection"),!1)}async function mr(t,e){return Kd.window.withProgress({location:Kd.ProgressLocation.Notification,title:t,cancellable:!1},e)}function ay(t){return t.replace(/'/g,"''")}function ly(t){return/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(t.trim())}var _r=q(require("vscode"));lr();function V6(t){let{context:e,connectionManager:r,schemaProvider:n}=t;return[_r.commands.registerCommand("netezza.copySelectAll",async i=>{if(i&&i.label&&i.dbName&&i.schema){let s=`SELECT * FROM ${i.dbName}.${i.schema}.${i.label} LIMIT 1000;`,o=await _r.window.showQuickPick([{label:"Open in Editor",description:"Open SQL in a new editor",value:"editor"},{label:"Copy to Clipboard",description:"Copy SQL to clipboard",value:"clipboard"}],{placeHolder:"How would you like to access the SQL?"});if(o)if(o.value==="editor"){let a=await _r.workspace.openTextDocument({content:s,language:"sql"});await _r.window.showTextDocument(a)}else await _r.env.clipboard.writeText(s),_r.window.showInformationMessage("Copied to clipboard")}}),_r.commands.registerCommand("netezza.copyDrop",async i=>{if(i&&i.label&&i.dbName&&i.schema&&i.objType){let s=jr(i),o=`DROP ${i.objType} ${s};`;if(await _r.window.showWarningMessage(`Are you sure you want to delete ${i.objType.toLowerCase()} "${s}"?`,{modal:!0},"Yes, delete","Cancel")==="Yes, delete")try{await mr(`Deleting ${i.objType.toLowerCase()} ${s}...`,async()=>{await Mr(e,o,!0,i.connectionName,r)}),_r.window.showInformationMessage(`Deleted ${i.objType.toLowerCase()}: ${s}`),n.refresh()}catch(l){let c=l instanceof Error?l.message:String(l);_r.window.showErrorMessage(`Error during deletion: ${c}`)}}}),_r.commands.registerCommand("netezza.copyName",i=>{if(i&&i.label&&i.dbName&&i.schema){let s=jr(i);_r.env.clipboard.writeText(s),_r.window.showInformationMessage("Copied to clipboard")}})]}var We=q(require("vscode"));lr();function q6(t){let{context:e,connectionManager:r,metadataCache:n,schemaProvider:i}=t;return[We.commands.registerCommand("netezza.grantPermissions",async s=>{if(s&&s.label&&s.dbName&&s.schema&&s.objType){let o=jr(s),a=await We.window.showQuickPick([{label:"SELECT",description:"Privileges to read data"},{label:"INSERT",description:"Privileges to insert data"},{label:"UPDATE",description:"Privileges to update data"},{label:"DELETE",description:"Privileges to delete data"},{label:"ALL",description:"All privileges (SELECT, INSERT, UPDATE, DELETE)"},{label:"LIST",description:"Privileges to list objects"}],{placeHolder:"Select privilege type"});if(!a)return;let l=await We.window.showInputBox({prompt:"Enter user or group name",placeHolder:"e.g. SOME_USER or GROUP_NAME",validateInput:d=>!d||d.trim().length===0?"User/group name cannot be empty":ly(d)?null:"Invalid user/group name"});if(!l)return;let c=`GRANT ${a.label} ON ${o} TO ${l.trim().toUpperCase()};`;if(await We.window.showInformationMessage(`Execute: ${c}`,{modal:!0},"Yes, execute","Cancel")==="Yes, execute"){if(!await Oi(r))return;try{await mr(`Granting ${a.label} on ${o}...`,async()=>{await Mr(e,c,!0,s.connectionName,r)}),We.window.showInformationMessage(`Granted ${a.label} on ${o} to ${l.trim().toUpperCase()}`)}catch(d){let E=d instanceof Error?d.message:String(d);We.window.showErrorMessage(`Error granting privileges: ${E}`)}}}}),We.commands.registerCommand("netezza.addTableComment",async s=>{if(s&&s.label&&s.dbName&&s.schema&&s.objType==="TABLE"){let o=jr(s),a=await We.window.showInputBox({prompt:"Enter comment for table",placeHolder:"e.g. Table contains customer data",value:s.objectDescription||""});if(a===void 0)return;let l=`COMMENT ON TABLE ${o} IS '${ay(a)}';`;try{if(!await Oi(r))return;await Mr(e,l,!0,s.connectionName,r),We.window.showInformationMessage(`Comment added to table: ${o}`),i.refresh()}catch(c){let u=c instanceof Error?c.message:String(c);We.window.showErrorMessage(`Error adding comment: ${u}`)}}}),We.commands.registerCommand("netezza.addColumnComment",async s=>{if(s&&s.label&&s.dbName&&s.parentName){let o=s.label.split(" ")[0],a=s.parentName,l=s.schema||"ADMIN",c=`${s.dbName}.${l}.${a}.${o}`,u=await We.window.showInputBox({prompt:`Enter comment for column "${o}"`,placeHolder:"e.g. Customer ID from CRM",value:s.objectDescription||""});if(u===void 0)return;let d=`COMMENT ON COLUMN ${c} IS '${ay(u)}';`;try{if(!await Oi(r))return;await Mr(e,d,!0,s.connectionName,r),We.window.showInformationMessage(`Comment added to column: ${o}`),i.refresh()}catch(E){let f=E instanceof Error?E.message:String(E);We.window.showErrorMessage(`Error adding comment: ${f}`)}}}),We.commands.registerCommand("netezza.truncateTable",async s=>{if(s&&s.label&&s.dbName&&s.schema&&s.objType==="TABLE"){let o=jr(s),a=`TRUNCATE TABLE ${o};`;if(await We.window.showWarningMessage(`\u26A0\uFE0F WARNING: Are you sure you want to delete ALL data from the table "${o}"?

${a}

This operation is IRREVERSIBLE!`,{modal:!0},"Yes, delete all data","Cancel")==="Yes, delete all data"){if(!await Oi(r))return;try{await mr(`Clearing table ${o}...`,async()=>{await Mr(e,a,!0,s.connectionName,r)}),We.window.showInformationMessage(`Table cleared: ${o}`)}catch(c){let u=c instanceof Error?c.message:String(c);We.window.showErrorMessage(`Error clearing table: ${u}`)}}}}),We.commands.registerCommand("netezza.addPrimaryKey",async s=>{if(s&&s.label&&s.dbName&&s.schema&&s.objType==="TABLE"){let o=jr(s),a=await We.window.showInputBox({prompt:"Enter primary key constraint name",placeHolder:`e.g. PK_${s.label}`,value:`PK_${s.label}`,validateInput:E=>!E||E.trim().length===0?"Constraint name cannot be empty":ly(E)?null:"Invalid constraint name"});if(!a)return;let l=await We.window.showInputBox({prompt:"Enter primary key column names (comma separated)",placeHolder:"e.g. COL1, COL2 or ID",validateInput:E=>!E||E.trim().length===0?"You must provide at least one column":null});if(!l)return;let c=l.split(",").map(E=>E.trim().toUpperCase()).join(", "),u=`ALTER TABLE ${o} ADD CONSTRAINT ${a.trim().toUpperCase()} PRIMARY KEY (${c});`;if(await We.window.showInformationMessage(`Add primary key to table "${o}"?

${u}`,{modal:!0},"Yes, add","Cancel")==="Yes, add"){if(!await Oi(r))return;try{await mr(`Adding primary key to ${o}...`,async()=>{await Mr(e,u,!0,s.connectionName,r)}),We.window.showInformationMessage(`Primary key added: ${a.trim().toUpperCase()}`),i.refresh()}catch(E){let f=E instanceof Error?E.message:String(E);We.window.showErrorMessage(`Error adding primary key: ${f}`)}}}}),We.commands.registerCommand("netezza.changeOwner",async s=>{if(s&&s.label&&s.dbName&&s.schema&&s.objType==="TABLE"){let o=jr(s),a=await We.window.showInputBox({prompt:"Enter new owner name",placeHolder:"e.g. USER_NAME or GROUP_NAME"});if(!a)return;let l=`ALTER TABLE ${o} OWNER TO ${a.trim()};`;try{if(!await Oi(r))return;await Mr(e,l,!0,s.connectionName,r),We.window.showInformationMessage(`Owner changed to ${a} for ${o}`),n.invalidateSchema(s.connectionName,s.dbName,s.schema),i.refresh()}catch(c){let u=c instanceof Error?c.message:String(c);We.window.showErrorMessage(`Error changing owner: ${u}`)}}}),We.commands.registerCommand("netezza.renameTable",async s=>{if(s&&s.label&&s.dbName&&s.schema&&s.objType==="TABLE"){let o=jr(s),a=await We.window.showInputBox({prompt:"Enter new table name",placeHolder:"NewTableName",value:s.label});if(!a||a===s.label)return;let l=`ALTER TABLE ${o} RENAME TO ${a.trim()};`;try{if(!await Oi(r))return;await Mr(e,l,!0,s.connectionName,r),We.window.showInformationMessage(`Table renamed to ${a}`),n.invalidateSchema(s.connectionName,s.dbName,s.schema),i.refresh()}catch(c){let u=c instanceof Error?c.message:String(c);We.window.showErrorMessage(`Error renaming table: ${u}`)}}})]}var Qe=q(require("vscode"));lr();function t3(t){let{context:e,connectionManager:r}=t;return[Qe.commands.registerCommand("netezza.groomTable",async n=>{if(n&&n.label&&n.dbName&&n.schema&&n.objType==="TABLE"){let i=jr(n),s=await Qe.window.showQuickPick([{label:"RECORDS ALL",description:"Groom all records (reclaim space from deleted rows)"},{label:"RECORDS READY",description:"Groom only ready records"},{label:"PAGES ALL",description:"Groom all pages (reorganize data pages)"},{label:"PAGES START",description:"Groom pages from start"},{label:"VERSIONS",description:"Groom versions (clean up old row versions)"}],{placeHolder:"Select GROOM mode"});if(!s)return;let o=await Qe.window.showQuickPick([{label:"DEFAULT",description:"Use default backupset",value:"DEFAULT"},{label:"NONE",description:"No backupset",value:"NONE"},{label:"Custom",description:"Specify custom backupset ID",value:"CUSTOM"}],{placeHolder:"Select RECLAIM BACKUPSET option"});if(!o)return;let a=o.value;if(o.value==="CUSTOM"){let u=await Qe.window.showInputBox({prompt:"Enter backupset ID",placeHolder:"e.g. 12345",validateInput:d=>!d||d.trim().length===0?"Backupset ID cannot be empty":/^\d+$/.test(d.trim())?null:"Backupset ID must be a number"});if(!u)return;a=u.trim()}let l=`GROOM TABLE ${i} ${s.label} RECLAIM BACKUPSET ${a};`;if(await Qe.window.showWarningMessage(`Execute GROOM on table "${i}"?

${l}

Warning: This operation may be time-consuming for large tables.`,{modal:!0},"Yes, execute","Cancel")==="Yes, execute")try{let u=Date.now();await mr(`GROOM TABLE ${i} (${s.label})...`,async()=>{await Mr(e,l,!0,n.connectionName,r)});let d=((Date.now()-u)/1e3).toFixed(1);Qe.window.showInformationMessage(`GROOM completed successfully (${d}s): ${i}`)}catch(u){let d=u instanceof Error?u.message:String(u);Qe.window.showErrorMessage(`Error during GROOM: ${d}`)}}}),Qe.commands.registerCommand("netezza.generateStatistics",async n=>{if(n&&n.label&&n.dbName&&n.schema&&n.objType==="TABLE"){let i=jr(n),s=`GENERATE EXPRESS STATISTICS ON ${i};`;if(await Qe.window.showInformationMessage(`Generate statistics for table "${i}"?

${s}`,{modal:!0},"Yes, generate","Cancel")==="Yes, generate")try{let a=Date.now();await mr(`Generating statistics for ${i}...`,async()=>{await Mr(e,s,!0,n.connectionName,r)});let l=((Date.now()-a)/1e3).toFixed(1);Qe.window.showInformationMessage(`Statistics generated successfully (${l}s): ${i}`)}catch(a){let l=a instanceof Error?a.message:String(a);Qe.window.showErrorMessage(`Error generating statistics: ${l}`)}}}),Qe.commands.registerCommand("netezza.checkSkew",async n=>{if(n&&n.label&&n.dbName&&n.schema&&n.objType==="TABLE"){let i=jr(n),s=`SELECT datasliceid, count(*) as row_count FROM ${i} GROUP BY 1 ORDER BY 1;`;if(await Qe.window.showInformationMessage(`Check skew for "${i}"?

This will run: ${s}

Note: This may be slow on very large tables.`,{modal:!0},"Yes, check skew","Cancel")==="Yes, check skew"){let a=await Qe.workspace.openTextDocument({content:`-- Check Skew for ${i}
${s}`,language:"sql"});await Qe.window.showTextDocument(a),Qe.commands.executeCommand("netezza.runQuery")}}}),Qe.commands.registerCommand("netezza.recreateTable",async n=>{if(!n||!n.label||!n.dbName||!n.schema||!n.objType||n.objType!=="TABLE"){Qe.window.showErrorMessage("Invalid object selected for Recreate Table");return}let i=await r.getConnection(r.getActiveConnectionName()||"");if(!i){Qe.window.showErrorMessage("Connection not configured. Please connect via Netezza: Connect...");return}let s=await Qe.window.showInputBox({prompt:"Enter temporary table name (Optional)",placeHolder:"Leave empty to auto-generate timestamped name",value:""});if(s!==void 0)try{await mr(`Generating Recreate Script for ${n.label}...`,async()=>{let{generateRecreateTableScript:o}=await Promise.resolve().then(()=>(e3(),Z6)),a=await o(i,n.dbName,n.schema,n.label,s||void 0);if(a.success&&a.sqlScript){let l=await Qe.workspace.openTextDocument({content:a.sqlScript,language:"sql"});await Qe.window.showTextDocument(l),Qe.window.showInformationMessage(`Recreate script generated for ${n.label}`)}else throw new Error(a.error||"Script generation failed")})}catch(o){let a=o instanceof Error?o.message:String(o);Qe.window.showErrorMessage(`Error generating recreate script: ${a}`)}})]}var ge=q(require("vscode"));lr();function i3(t){let{context:e,connectionManager:r}=t;return[ge.commands.registerCommand("netezza.createDDL",async n=>{try{if(!n||!n.label||!n.dbName||!n.schema||!n.objType){ge.window.showErrorMessage("Invalid object selected for DDL generation");return}let i=await r.getConnection(r.getActiveConnectionName()||"");if(!i){ge.window.showErrorMessage("Connection not configured. Please connect via Netezza: Connect...");return}await mr(`Generating DDL for ${n.objType} ${n.label}...`,async()=>{let{generateDDL:s}=await Promise.resolve().then(()=>(Zd(),dy)),o=await s(i,n.dbName,n.schema,n.label,n.objType);if(o.success&&o.ddlCode){let a=await ge.window.showQuickPick([{label:"Open in Editor",description:"Open DDL code in a new editor",value:"editor"},{label:"Copy to Clipboard",description:"Copy DDL code to clipboard",value:"clipboard"}],{placeHolder:"How would you like to access the DDL code?"});if(a)if(a.value==="editor"){let l=await ge.workspace.openTextDocument({content:o.ddlCode,language:"sql"});await ge.window.showTextDocument(l),ge.window.showInformationMessage(`DDL code generated for ${n.objType} ${n.label}`)}else a.value==="clipboard"&&(await ge.env.clipboard.writeText(o.ddlCode),ge.window.showInformationMessage("DDL code copied to clipboard"))}else throw new Error(o.error||"DDL generation failed")})}catch(i){let s=i instanceof Error?i.message:String(i);ge.window.showErrorMessage(`Error generating DDL: ${s}`)}}),ge.commands.registerCommand("netezza.compareSchema",async n=>{try{if(!n||!n.label||!n.dbName||!n.schema||!n.objType){ge.window.showErrorMessage("Invalid object selected for comparison");return}let i=await r.getConnection(r.getActiveConnectionName()||"");if(!i){ge.window.showErrorMessage("Connection not configured. Please connect via Netezza: Connect...");return}let s=n.objType,o=`${n.dbName}.${n.schema}.${n.label}`,a=[];if(await mr(`Loading ${s}s for comparison...`,async()=>{let c=s==="PROCEDURE"?"OBJTYPE = 'PROCEDURE'":s==="VIEW"?"OBJTYPE = 'VIEW'":"OBJTYPE = 'TABLE'",u=s==="PROCEDURE"?`SELECT DISTINCT SCHEMA, PROCEDURESIGNATURE AS OBJNAME FROM ${n.dbName}.._V_PROCEDURE WHERE DATABASE = '${n.dbName.toUpperCase()}' ORDER BY SCHEMA, PROCEDURESIGNATURE`:`SELECT SCHEMA, OBJNAME FROM ${n.dbName}.._V_OBJECT_DATA WHERE DBNAME = '${n.dbName.toUpperCase()}' AND ${c} ORDER BY SCHEMA, OBJNAME`,d=await oe(e,u,!0,r,n.connectionName);if(d&&d.data&&d.data.length>0){let E=Ee(d);for(let f of E){let T=f.OBJNAME,h=f.SCHEMA;`${n.dbName}.${h}.${T}`.toUpperCase()!==o.toUpperCase()&&a.push({label:T,description:`${n.dbName}.${h}`,db:n.dbName,schema:h,name:T})}}}),a.length===0){ge.window.showWarningMessage(`No other ${s}s found to compare with.`);return}let l=await ge.window.showQuickPick(a,{placeHolder:`Select ${s} to compare with ${n.label}`,matchOnDescription:!0});if(!l)return;await mr(`Comparing ${n.label} with ${l.label}...`,async()=>{if(s==="PROCEDURE"){let{compareProcedures:c}=await Promise.resolve().then(()=>(Ey(),fy)),{SchemaCompareView:u}=await Promise.resolve().then(()=>(py(),Ty)),d=await c(i,n.dbName,n.schema,n.label,l.db,l.schema,l.name);u.createOrShow(e.extensionUri,d,"procedure")}else{let{compareTableStructures:c}=await Promise.resolve().then(()=>(Ey(),fy)),{SchemaCompareView:u}=await Promise.resolve().then(()=>(py(),Ty)),d=await c(i,n.dbName,n.schema,n.label,l.db,l.schema,l.name);u.createOrShow(e.extensionUri,d,"table")}}),ge.window.showInformationMessage(`Comparison complete: ${n.label} \u2194 ${l.label}`)}catch(i){let s=i instanceof Error?i.message:String(i);ge.window.showErrorMessage(`Error comparing objects: ${s}`)}}),ge.commands.registerCommand("netezza.batchExportDDL",async n=>{try{if(!n||!n.contextValue){ge.window.showErrorMessage("Invalid node selected for batch DDL export");return}let i=n.contextValue==="database",s=n.contextValue.startsWith("typeGroup:");if(!i&&!s){ge.window.showErrorMessage("Batch DDL export is only available on database or object type nodes");return}let o=await r.getConnection(r.getActiveConnectionName()||"");if(!o){ge.window.showErrorMessage("Connection not configured. Please connect via Netezza: Connect...");return}let a=n.dbName||n.label,l=s?[n.objType||n.contextValue.replace("typeGroup:","")]:void 0;await mr(i?`Exporting all DDL for database ${a}...`:`Exporting ${l?.[0]} DDL for ${a}...`,async()=>{let{generateBatchDDL:c}=await Promise.resolve().then(()=>(Zd(),dy)),u=await c({connectionDetails:o,database:a,objectTypes:l});if(u.success&&u.ddlCode){let d=await ge.window.showQuickPick([{label:"Open in Editor",description:"Open DDL code in a new editor",value:"editor"},{label:"Save to File",description:"Save DDL code to a .sql file",value:"file"},{label:"Copy to Clipboard",description:"Copy DDL code to clipboard",value:"clipboard"}],{placeHolder:`${u.objectCount} objects found. How would you like to access the DDL code?`});if(d)if(d.value==="editor"){let E=await ge.workspace.openTextDocument({content:u.ddlCode,language:"sql"});await ge.window.showTextDocument(E),ge.window.showInformationMessage(`DDL exported: ${u.objectCount} objects`)}else if(d.value==="file"){let E=i?`${a}_all_ddl.sql`:`${a}_${l?.[0]?.toLowerCase()||"objects"}_ddl.sql`,f=await ge.window.showSaveDialog({defaultUri:ge.Uri.file(E),filters:{"SQL Files":["sql"]}});f&&(await ge.workspace.fs.writeFile(f,Buffer.from(u.ddlCode,"utf8")),ge.window.showInformationMessage(`DDL saved to ${f.fsPath}`))}else d.value==="clipboard"&&(await ge.env.clipboard.writeText(u.ddlCode),ge.window.showInformationMessage(`DDL copied: ${u.objectCount} objects`));u.errors.length>0&&ge.window.showWarningMessage(`Batch DDL completed with ${u.errors.length} error(s). Check the generated file for details.`)}else throw new Error(u.errors.join(", ")||"Batch DDL generation failed")})}catch(i){let s=i instanceof Error?i.message:String(i);ge.window.showErrorMessage(`Error exporting DDL: ${s}`)}})]}var sn=q(require("vscode"));lr();function E3(t){let{context:e,connectionManager:r}=t;return[sn.commands.registerCommand("netezza.showERD",async n=>{try{if(!n||!n.contextValue||!n.contextValue.startsWith("typeGroup:")){sn.window.showErrorMessage("Please right-click on a TABLE type group to show ERD");return}let i=n.dbName||n.label,s=n.connectionName;if(!s){sn.window.showErrorMessage("No connection selected");return}let o=`SELECT DISTINCT SCHEMA FROM ${i}.._V_TABLE ORDER BY SCHEMA`,a=await oe(e,o,!0,r,s);if(!a||!a.data){sn.window.showErrorMessage("Could not retrieve schemas");return}let l=Ee(a);if(l.length===0){sn.window.showWarningMessage("No tables found in this database");return}let c;if(l.length===1)c=l[0].SCHEMA;else{let E=l.map(T=>({label:T.SCHEMA,description:`${i}.${T.SCHEMA}`})),f=await sn.window.showQuickPick(E,{placeHolder:"Select schema to show ERD for"});if(!f)return;c=f.label}let u=0,d=0;await mr(`Building ERD for ${i}.${c}...`,async()=>{let{buildERDData:E}=await Promise.resolve().then(()=>(l3(),a3)),{ERDView:f}=await Promise.resolve().then(()=>(u3(),c3)),T=await E(e,r,s,i,c);u=T.tables.length,d=T.relationships.length,f.createOrShow(e.extensionUri,T)}),sn.window.showInformationMessage(`ERD generated: ${u} tables, ${d} relationships`)}catch(i){let s=i instanceof Error?i.message:String(i);sn.window.showErrorMessage(`Error generating ERD: ${s}`)}}),sn.commands.registerCommand("netezza.showSessionMonitor",async()=>{try{if(!await Oi(r)){sn.window.showErrorMessage("Please connect to a Netezza database first.");return}let{SessionMonitorView:n}=await Promise.resolve().then(()=>(f3(),d3));n.createOrShow(e.extensionUri,e,r)}catch(n){let i=n instanceof Error?n.message:String(n);sn.window.showErrorMessage(`Error opening Session Monitor: ${i}`)}})]}var yt=q(require("vscode"));lr();function h3(t){let{context:e,connectionManager:r,metadataCache:n,schemaTreeView:i}=t;return[yt.commands.registerCommand("netezza.revealInSchema",async s=>{let o=yt.window.setStatusBarMessage(`$(loading~spin) Revealing ${s.name} in schema...`);try{let a,l=yt.window.activeTextEditor;if(l&&l.document.languageId==="sql"&&(a=r.getConnectionForExecution(l.document.uri.toString())),a||(a=s.connectionName),a||(a=r.getActiveConnectionName()||void 0),!a){o.dispose(),yt.window.showWarningMessage("No active connection. Please select a connection first.");return}let c=s.name,u=s.objType;if(u==="COLUMN"){if(!s.parent){o.dispose(),yt.window.showWarningMessage("Cannot find column without parent table");return}c=s.parent}if(s.database){let f=n.findObjectWithType(a,s.database,s.schema,c);if(f){let T=new Jt(f.name,yt.TreeItemCollapsibleState.Collapsed,`netezza:${f.objType}`,s.database,f.objType,f.schema||s.schema,f.objId,void 0,a);await i.reveal(T,{select:!0,focus:!0,expand:!0}),o.dispose(),yt.window.setStatusBarMessage(`$(check) Found ${c} in ${s.database}.${f.schema||s.schema} (cached)`,3e3);return}else n.hasConnectionPrefetchTriggered(a)||n.triggerConnectionPrefetch(a,async T=>oe(e,T,!0,r,a))}if(!await r.getConnection(a)){o.dispose(),yt.window.showWarningMessage("Not connected to database and object not found in cache.");return}let E=s.database||await r.getCurrentDatabase(a);if(E){let f=u&&u!=="COLUMN"?`AND UPPER(OBJTYPE) = UPPER('${u}')`:"",T=s.schema?`AND UPPER(SCHEMA) = UPPER('${s.schema.replace(/'/g,"''")}')`:"",h=`
                        SELECT OBJNAME, OBJTYPE, SCHEMA, OBJID 
                        FROM ${E}.._V_OBJECT_DATA 
                        WHERE UPPER(OBJNAME) = UPPER('${c.replace(/'/g,"''")}') 
                        AND DBNAME = '${E}'
                        ${f}
                        ${T}
                        LIMIT 1
                    `;try{let p=await oe(e,h,!0,r,a);if(p&&p.data){let S=Ee(p);if(S.length>0){let m=S[0];if(m.OBJTYPE==="PROCEDURE")try{let A=`SELECT PROCEDURESIGNATURE FROM ${E}.._V_PROCEDURE WHERE OBJID = ${m.OBJID}`,g=await oe(e,A,!0,r,a);if(g&&g.data&&g.data.length>0){let w=Ee(g);w.length>0&&w[0].PROCEDURESIGNATURE&&(m.OBJNAME=w[0].PROCEDURESIGNATURE)}}catch(A){console.warn("Failed to resolve procedure signature:",A)}let R=new Jt(m.OBJNAME,yt.TreeItemCollapsibleState.Collapsed,`netezza:${m.OBJTYPE}`,E,m.OBJTYPE,m.SCHEMA,m.OBJID,void 0,a);await i.reveal(R,{select:!0,focus:!0,expand:!0}),o.dispose(),yt.window.setStatusBarMessage(`$(check) Found ${c} in ${E}.${m.SCHEMA}`,3e3);return}}}catch(p){console.log(`Error searching in ${E}:`,p)}}if(!E){let f=await oe(e,"SELECT DATABASE FROM system.._v_database ORDER BY DATABASE",!0,r,a);if(f&&f.data){let T=Ee(f);for(let h of T){let p=h.DATABASE;try{let S=s.schema?`AND UPPER(SCHEMA) = UPPER('${s.schema.replace(/'/g,"''")}')`:"",m=`
                                    SELECT OBJNAME, OBJTYPE, SCHEMA, OBJID 
                                    FROM ${p}.._V_OBJECT_DATA 
                                    WHERE UPPER(OBJNAME) = UPPER('${c.replace(/'/g,"''")}') 
                                    AND DBNAME = '${p}'
                                    ${S}
                                    LIMIT 1
                                `,R=await oe(e,m,!0,r,a);if(R&&R.data){let A=Ee(R);if(A.length>0){let g=A[0];if(g.OBJTYPE==="PROCEDURE")try{let I=`SELECT PROCEDURESIGNATURE FROM ${p}.._V_PROCEDURE WHERE OBJID = ${g.OBJID}`,D=await oe(e,I,!0,r,a);if(D&&D.data&&D.data.length>0){let b=Ee(D);b.length>0&&b[0].PROCEDURESIGNATURE&&(g.OBJNAME=b[0].PROCEDURESIGNATURE)}}catch(I){console.warn("Failed to resolve procedure signature:",I)}let w=new Jt(g.OBJNAME,yt.TreeItemCollapsibleState.Collapsed,`netezza:${g.OBJTYPE}`,p,g.OBJTYPE,g.SCHEMA,g.OBJID,void 0,a);await i.reveal(w,{select:!0,focus:!0,expand:!0}),o.dispose(),yt.window.setStatusBarMessage(`$(check) Found ${c} in ${p}.${g.SCHEMA}`,3e3);return}}}catch(S){console.log(`Error searching in ${p}:`,S)}}}}o.dispose(),yt.window.showWarningMessage(`Could not find ${u||"object"} ${c}`)}catch(a){o.dispose();let l=a instanceof Error?a.message:String(a);yt.window.showErrorMessage(`Error revealing item: ${l}`)}}),yt.commands.registerCommand("netezza.showQueryHistory",()=>{yt.commands.executeCommand("netezza.queryHistory.focus")}),yt.commands.registerCommand("netezza.clearQueryHistory",async()=>{let{QueryHistoryManager:s}=await Promise.resolve().then(()=>(Wf(),ew)),o=new s(e);await yt.window.showWarningMessage("Are you sure you want to clear all query history?",{modal:!0},"Clear All")==="Clear All"&&(await o.clearHistory(),yt.window.showInformationMessage("Query history cleared"))})]}function vS(t){return[...V6(t),...q6(t),...t3(t),...i3(t),...E3(t),...h3(t)]}var j=q(require("vscode")),my=q(require("path")),tf=q(require("os"));function ef(t,e,r){let n=Date.now()-r;t.appendLine(`[${new Date().toLocaleTimeString()}] ${e} completed in ${n}ms`),t.show(!0)}function O3(t){let{context:e,connectionManager:r,outputChannel:n}=t;return[j.commands.registerCommand("netezza.exportToXlsb",async()=>{let i=j.window.activeTextEditor;if(!i){j.window.showErrorMessage("No active editor found");return}let s=i.selection,o=s.isEmpty?i.document.getText():i.document.getText(s);if(!o.trim()){j.window.showWarningMessage("No SQL query to export");return}let a=await j.window.showSaveDialog({filters:{"Excel Binary Workbook":["xlsb"]},saveLabel:"Export to XLSB"});if(!a)return;let l=Date.now();try{let c=i.document.uri.toString(),u=r.getConnectionForExecution(c),d=await r.getConnection(u||"");if(!d)throw new Error("Connection not configured. Please connect via Netezza: Connect...");await j.window.withProgress({location:j.ProgressLocation.Notification,title:"Exporting to XLSB...",cancellable:!1},async E=>{let{exportQueryToXlsb:f}=await Promise.resolve().then(()=>(Ks(),Ta)),T=await f(d,o,a.fsPath,!1,h=>{E.report({message:h}),n.appendLine(`[XLSB Export] ${h}`)});if(!T.success)throw new Error(T.message)}),ef(n,"Export to XLSB",l),j.window.showInformationMessage(`Results exported to ${a.fsPath}`)}catch(c){let u=c instanceof Error?c.message:String(c);j.window.showErrorMessage(`Error exporting to XLSB: ${u}`)}}),j.commands.registerCommand("netezza.exportToCsv",async()=>{let i=j.window.activeTextEditor;if(!i){j.window.showErrorMessage("No active editor found");return}let s=i.selection,o=s.isEmpty?i.document.getText():i.document.getText(s);if(!o.trim()){j.window.showWarningMessage("No SQL query to export");return}let a=await j.window.showSaveDialog({filters:{"CSV Files":["csv"]},saveLabel:"Export to CSV"});if(!a)return;let l=Date.now();try{let c=i.document.uri.toString(),u=r.getConnectionForExecution(c),d=await r.getConnection(u||"");if(!d)throw new Error("Connection not configured. Please connect via Netezza: Connect...");await j.window.withProgress({location:j.ProgressLocation.Notification,title:"Exporting to CSV...",cancellable:!1},async E=>{let{exportToCsv:f}=await Promise.resolve().then(()=>(aA(),Iw));await f(e,d,o,a.fsPath,E)}),ef(n,"Export to CSV",l),j.window.showInformationMessage(`Results exported to ${a.fsPath}`)}catch(c){let u=c instanceof Error?c.message:String(c);j.window.showErrorMessage(`Error exporting to CSV: ${u}`)}}),j.commands.registerCommand("netezza.copyXlsbToClipboard",async()=>{let i=j.window.activeTextEditor;if(!i){j.window.showErrorMessage("No active editor found");return}let s=i.selection,o=s.isEmpty?i.document.getText():i.document.getText(s);if(!o.trim()){j.window.showWarningMessage("No SQL query to export");return}try{let a=i.document.uri.toString(),l=r.getConnectionForExecution(a),c=await r.getConnection(l||"");if(!c)throw new Error("Connection not configured. Please connect via Netezza: Connect...");let u=Date.now();if(await j.window.withProgress({location:j.ProgressLocation.Notification,title:"Exporting to XLSB and copying to clipboard...",cancellable:!1},async E=>{let{exportQueryToXlsb:f,getTempFilePath:T}=await Promise.resolve().then(()=>(Ks(),Ta)),h=T(),p=await f(c,o,h,!0,S=>{E.report({message:S}),n.appendLine(`[XLSB Clipboard] ${S}`)});if(!p.success)throw new Error(p.message);if(!p.details?.clipboard_success)throw new Error("Failed to copy file to clipboard")}),ef(n,"Copy XLSB to Clipboard",u),await j.window.showInformationMessage("Excel file copied to clipboard! You can now paste it into Excel or Windows Explorer.","Show Temp Folder","OK")==="Show Temp Folder"){let E=tf.tmpdir();await j.env.openExternal(j.Uri.file(E))}}catch(a){let l=a instanceof Error?a.message:String(a);j.window.showErrorMessage(`Error copying XLSB to clipboard: ${l}`)}}),j.commands.registerCommand("netezza.exportToXlsbAndOpen",async()=>{let i=j.window.activeTextEditor;if(!i){j.window.showErrorMessage("No active editor found");return}let s=i.selection,o=s.isEmpty?i.document.getText():i.document.getText(s);if(!o.trim()){j.window.showWarningMessage("No SQL query to export");return}let a=await j.window.showSaveDialog({filters:{"Excel Binary Workbook":["xlsb"]},saveLabel:"Export to XLSB and Open"});if(!a)return;let l=Date.now();try{let c=i.document.uri.toString(),u=r.getConnectionForExecution(c),d=await r.getConnection(u||"");if(!d)throw new Error("Connection not configured. Please connect via Netezza: Connect...");await j.window.withProgress({location:j.ProgressLocation.Notification,title:"Exporting to XLSB and opening...",cancellable:!1},async E=>{let{exportQueryToXlsb:f}=await Promise.resolve().then(()=>(Ks(),Ta)),T=await f(d,o,a.fsPath,!1,h=>{E.report({message:h}),n.appendLine(`[XLSB Export] ${h}`)});if(!T.success)throw new Error(T.message)}),ef(n,"Export to XLSB and Open",l),await j.env.openExternal(a),j.window.showInformationMessage(`Results exported and opened: ${a.fsPath}`)}catch(c){let u=c instanceof Error?c.message:String(c);j.window.showErrorMessage(`Error exporting to XLSB: ${u}`)}}),j.commands.registerCommand("netezza.exportCurrentResultToXlsbAndOpen",async(i,s)=>{try{if(!i||Array.isArray(i)&&i.length===0){j.window.showErrorMessage("No data to export");return}let o=i;if(Array.isArray(i)&&i.length>1){let d=await j.window.showQuickPick(["Export All Results","Export Active Result Only"],{placeHolder:"Multiple results available. What would you like to export?"});if(!d)return;if(d==="Export Active Result Only"){let E=i.find(f=>f.isActive);E?o=[E]:o=[i[0]]}}let a=new Date().toISOString().replace(/[:.]/g,"-"),l=my.join(tf.tmpdir(),`netezza_results_${a}.xlsb`),c=Date.now();await j.window.withProgress({location:j.ProgressLocation.Notification,title:"Creating Excel file...",cancellable:!1},async d=>{let{exportCsvToXlsb:E}=await Promise.resolve().then(()=>(Ks(),Ta)),f=await E(o,l,!1,{source:"Query Results Panel",sql:s},T=>{d.report({message:T}),n.appendLine(`[CSV to XLSB] ${T}`)});if(!f.success)throw new Error(f.message)});let u=Date.now()-c;n.appendLine(`[${new Date().toLocaleTimeString()}] Export Current Result to Excel completed in ${u}ms`),await j.env.openExternal(j.Uri.file(l)),j.window.showInformationMessage(`Results exported and opened: ${l}`)}catch(o){let a=o instanceof Error?o.message:String(o);j.window.showErrorMessage(`Error exporting to Excel: ${a}`)}}),j.commands.registerCommand("netezza.copyCurrentResultToXlsbClipboard",async(i,s)=>{try{if(!i||Array.isArray(i)&&i.length===0){j.window.showErrorMessage("No data to copy");return}let o=i;if(Array.isArray(i)&&i.length>1){let d=await j.window.showQuickPick(["Export All Results","Export Active Result Only"],{placeHolder:"Multiple results available. What would you like to export?"});if(!d)return;if(d==="Export Active Result Only"){let E=i.find(f=>f.isActive);E?o=[E]:o=[i[0]]}}let{getTempFilePath:a}=await Promise.resolve().then(()=>(Ks(),Ta)),l=a(),c=Date.now();if(await j.window.withProgress({location:j.ProgressLocation.Notification,title:"Copying to clipboard as Excel...",cancellable:!1},async d=>{let{exportCsvToXlsb:E}=await Promise.resolve().then(()=>(Ks(),Ta)),f=await E(o,l,!0,{source:"Query Results Panel",sql:s},T=>{d.report({message:T}),n.appendLine(`[Clipboard XLSB] ${T}`)});if(!f.success)throw new Error(f.message)}),ef(n,"Copy Result as Excel",c),await j.window.showInformationMessage("Excel file copied to clipboard! You can now paste it into Excel or Windows Explorer.","Show Temp Folder","OK")==="Show Temp Folder"){let d=tf.tmpdir();await j.env.openExternal(j.Uri.file(d))}}catch(o){let a=o instanceof Error?o.message:String(o);j.window.showErrorMessage(`Error copying to Excel: ${a}`)}}),j.commands.registerCommand("netezza.exportCurrentResultToXlsxAndOpen",async(i,s)=>{try{if(!i||Array.isArray(i)&&i.length===0){j.window.showErrorMessage("No data to export");return}let o=i;if(Array.isArray(i)&&i.length>1){let d=await j.window.showQuickPick(["Export All Results","Export Active Result Only"],{placeHolder:"Multiple results available. What would you like to export?"});if(!d)return;if(d==="Export Active Result Only"){let E=i.find(f=>f.isActive);E?o=[E]:o=[i[0]]}}let a=new Date().toISOString().replace(/[:.]/g,"-"),l=my.join(tf.tmpdir(),`netezza_results_${a}.xlsx`),c=Date.now();await j.window.withProgress({location:j.ProgressLocation.Notification,title:"Creating Excel XLSX file...",cancellable:!1},async d=>{let{exportCsvToXlsx:E}=await Promise.resolve().then(()=>(N3(),g3)),f=await E(o,l,!1,{source:"Query Results Panel",sql:s},T=>{d.report({message:T}),n.appendLine(`[CSV to XLSX] ${T}`)});if(!f.success)throw new Error(f.message)});let u=Date.now()-c;n.appendLine(`[${new Date().toLocaleTimeString()}] Export Current Result to XLSX completed in ${u}ms`),await j.env.openExternal(j.Uri.file(l)),j.window.showInformationMessage(`Results exported and opened: ${l}`)}catch(o){let a=o instanceof Error?o.message:String(o);j.window.showErrorMessage(`Error exporting to Excel XLSX: ${a}`)}})]}var Ne=q(require("vscode")),M3=q(require("path"));lr();function P3(t,e,r){let n=Date.now()-r;t.appendLine(`[${new Date().toLocaleTimeString()}] ${e} completed in ${n}ms`),t.show(!0)}async function x3(t,e,r){try{let i=await oe(t,"SELECT CURRENT_CATALOG, CURRENT_SCHEMA",!0,r,e);if(i&&i.data){let s=Ee(i);if(s&&s.length>0){let o=s[0].CURRENT_CATALOG||"SYSTEM",a=s[0].CURRENT_SCHEMA||"ADMIN",c=new Date().toISOString().slice(0,10).replace(/-/g,""),u=Math.floor(Math.random()*1e4).toString().padStart(4,"0");return`${o}.${a}.IMPORT_${c}_${u}`}}}catch(n){Ne.window.showErrorMessage(`Error getting current database/schema: ${n instanceof Error?n.message:String(n)}`)}return null}function v3(t){let{context:e,connectionManager:r,outputChannel:n}=t;return[Ne.commands.registerCommand("netezza.importClipboard",async()=>{try{let s=Ne.window.activeTextEditor?.document?.uri?.toString(),o=r.getConnectionForExecution(s),a=await r.getConnection(o||"");if(!a)throw new Error("Connection not configured. Please connect via Netezza: Connect...");let l=await Ne.window.showInputBox({prompt:"Enter target table name (leave empty for auto-generated name)",placeHolder:"e.g. my_schema.my_table or leave empty",validateInput:E=>!E||E.trim().length===0||/^[a-zA-Z_][a-zA-Z0-9_]*(\.[a-zA-Z_][a-zA-Z0-9_]*)?(\.[a-zA-Z_][a-zA-Z0-9_]*)?$/.test(E.trim())?null:"Invalid table name format. Use: [database.]schema.table"});if(l===void 0)return;let c;if(!l||l.trim().length===0){let E=await x3(e,o,r);if(!E)return;c=E,Ne.window.showInformationMessage(`Auto-generated table name: ${c}`)}else c=l.trim();let u=await Ne.window.showQuickPick([{label:"Auto-detect",description:"Automatically detect clipboard format (text or Excel XML)",value:null},{label:"Excel XML Spreadsheet",description:"Force Excel XML format processing",value:"XML Spreadsheet"},{label:"Plain Text",description:"Force plain text processing with delimiter detection",value:"TEXT"}],{placeHolder:"Select clipboard data format"});if(!u)return;let d=Date.now();await Ne.window.withProgress({location:Ne.ProgressLocation.Notification,title:"Importing clipboard data...",cancellable:!1},async E=>{let{importClipboardDataToNetezza:f}=await Promise.resolve().then(()=>(D3(),L3)),T="",h=await f(c,a,u.value,{},(p,S,m=!0)=>{E.report({message:p,increment:S}),m&&p!==T&&(n.appendLine(`[Clipboard Import] ${p}`),T=p)});if(!h.success)throw new Error(h.message);h.details&&(n.appendLine(`[Clipboard Import] Rows processed: ${h.details.rowsProcessed}`),n.appendLine(`[Clipboard Import] Columns: ${h.details.columns}`),n.appendLine(`[Clipboard Import] Format: ${h.details.format}`))}),P3(n,"Import Clipboard Data",d),Ne.window.showInformationMessage(`Clipboard data imported successfully to table: ${c}`,"Copy Table Name").then(E=>{E==="Copy Table Name"&&(Ne.env.clipboard.writeText(c),Ne.window.showInformationMessage("Table name copied to clipboard"))})}catch(i){Ne.window.showErrorMessage(`Error importing clipboard data: ${i instanceof Error?i.message:String(i)}`)}}),Ne.commands.registerCommand("netezza.importData",async()=>{try{let s=Ne.window.activeTextEditor?.document?.uri?.toString(),o=r.getConnectionForExecution(s),a=await r.getConnection(o||"");if(!a)throw new Error("Connection not configured. Please connect via Netezza: Connect...");let l=await Ne.window.showOpenDialog({canSelectFiles:!0,canSelectFolders:!1,canSelectMany:!1,filters:{"Data Files":["csv","txt","xlsx","xlsb","json"],"CSV Files":["csv"],"Excel Files":["xlsx","xlsb"],"Text Files":["txt"],"JSON Files":["json"],"All Files":["*"]},openLabel:"Select file to import"});if(!l||l.length===0)return;let c=l[0].fsPath,u=await Ne.window.showInputBox({prompt:"Enter target table name (leave empty for auto-generated name)",placeHolder:"e.g. my_schema.my_table or leave empty",validateInput:T=>!T||T.trim().length===0||/^[a-zA-Z_][a-zA-Z0-9_]*(\.[a-zA-Z_][a-zA-Z0-9_]*)?(\.[a-zA-Z_][a-zA-Z0-9_]*)?$/.test(T.trim())?null:"Invalid table name format. Use: [database.]schema.table"});if(u===void 0)return;let d;if(!u||u.trim().length===0){let T=await x3(e,o,r);if(!T)return;d=T,Ne.window.showInformationMessage(`Auto-generated table name: ${d}`)}else d=u.trim();let E=await Ne.window.showQuickPick([{label:"Default Import",description:"Use default settings",value:{}},{label:"Custom Options",description:"Configure import settings (coming soon)",value:null}],{placeHolder:"Select import options"});if(!E)return;if(E.value===null){Ne.window.showInformationMessage("Custom options will be available in future version");return}let f=Date.now();await Ne.window.withProgress({location:Ne.ProgressLocation.Notification,title:"Importing data...",cancellable:!1},async T=>{let{importDataToNetezza:h}=await Promise.resolve().then(()=>(gS(),L6)),p="",S=await h(c,d,a,(m,R,A=!0)=>{T.report({message:m,increment:R}),A&&m!==p&&(n.appendLine(`[Import] ${m}`),p=m)});if(!S.success)throw new Error(S.message);S.details&&(n.appendLine(`[Import] Rows processed: ${S.details.rowsProcessed}`),n.appendLine(`[Import] Columns: ${S.details.columns}`),n.appendLine(`[Import] Delimiter: ${S.details.detectedDelimiter}`))}),P3(n,"Import Data",f),Ne.window.showInformationMessage(`Data imported successfully to table: ${d}`,"Copy Table Name").then(T=>{T==="Copy Table Name"&&(Ne.env.clipboard.writeText(d),Ne.window.showInformationMessage("Table name copied to clipboard"))})}catch(i){Ne.window.showErrorMessage(`Error importing data: ${i instanceof Error?i.message:String(i)}`)}}),Ne.commands.registerCommand("netezza.smartPaste",async()=>{try{let i=Ne.window.activeTextEditor;if(!i)return;let o=Ne.workspace.getConfiguration("netezza").get("pythonPath")||"python",a=M3.join(e.extensionPath,"python","check_clipboard_format.py"),l=require("child_process");if(await new Promise(u=>{let d=l.spawn(o,[a]);d.on("close",E=>{u(E===1)}),d.on("error",()=>{u(!1)})})){let u=await Ne.window.showQuickPick([{label:"\u{1F4CA} import to Netezza table",description:'Detected "XML Spreadsheet" format - import data to database',value:"import"},{label:"\u{1F4DD} Paste as text",description:"Paste clipboard content as plain text",value:"paste"}],{placeHolder:'Detected "XML Spreadsheet" format in clipboard - choose an action'});if(u?.value==="import")Ne.commands.executeCommand("netezza.importClipboard");else if(u?.value==="paste"){let d=await Ne.env.clipboard.readText(),E=i.selection;await i.edit(f=>{f.replace(E,d)})}}else{let u=await Ne.env.clipboard.readText(),d=i.selection;await i.edit(E=>{E.replace(d,u)})}}catch(i){Ne.window.showErrorMessage(`Error during paste: ${i instanceof Error?i.message:String(i)}`)}})]}var ce=q(require("vscode"));lr();lo();function Iy(t){return t&&(t.includes(" ")?`"${t.replace(/"/g,'\\"')}"`:t)}function fs(t,e,r){let i=/[ \\/]/.test(t)?`& ${Iy(t)}`:t,s=Iy(e),o=r.map(a=>Iy(a)).join(" ");return`${i} ${s}${o?" "+o:""}`.trim()}function BK(t){let{context:e,connectionManager:r,resultPanelProvider:n}=t;return[ce.commands.registerCommand("netezza.runQuery",async()=>{let i=ce.window.activeTextEditor;if(!i){ce.window.showErrorMessage("No active editor found");return}let s=i.document,o=i.selection,a=s.getText(),l=s.uri.toString(),c=[];if(o.isEmpty){let d=s.offsetAt(o.active),E=vr.getStatementAtPosition(a,d);if(E){c=[E.sql];let f=s.positionAt(E.start),T=s.positionAt(E.end);i.selection=new ce.Selection(f,T)}else{ce.window.showWarningMessage("No SQL statement found at cursor");return}}else{let d=s.getText(o);if(!d.trim()){ce.window.showWarningMessage("No SQL query selected");return}/^\s*CREATE\s+(OR\s+REPLACE\s+)?PROCEDURE\b/i.test(d)?c=[d]:c=vr.splitStatements(d)}if(c.length===0)return;let u=c.length===1?c[0].trim():null;if(u){let d=u.split(/\s+/),E=d[0]||"",f=/python(\.exe)?$/i.test(E)&&d.length>=2&&d[1].toLowerCase().endsWith(".py"),T=E.toLowerCase().endsWith(".py");if(f||T){let p=ce.workspace.getConfiguration("netezza").get("pythonPath")||"python",S="";if(f){let R=d[0],A=d[1],g=d.slice(2);S=fs(R,A,g)}else{let R=E,A=d.slice(1);S=fs(p,R,A)}let m=ce.window.createTerminal({name:"Netezza: Script"});m.show(!0),m.sendText(S,!0),ce.window.showInformationMessage(`Running script: ${S}`);return}}try{n.startExecution(l);let d=ce.workspace.getConfiguration("netezza"),E=d.get("enableStreaming",!1),f=d.get("streamingChunkSize",5e3);E?await sw(e,c,r,l,T=>n.log(l,T),(T,h,p)=>{n.appendStreamingChunk(l,T,h,p)},f):await Gc(e,c,r,l,T=>n.log(l,T),T=>n.updateResults(T,l,!0)),n.finalizeExecution(l),ce.commands.executeCommand("netezza.results.focus")}catch(d){let E=d instanceof Error?d.message:String(d);n.finalizeExecution(l),n.log(l,`Error: ${E}`),ce.window.showErrorMessage(`Error executing query: ${E}`)}}),ce.commands.registerCommand("netezza.runQueryBatch",async()=>{let i=ce.window.activeTextEditor;if(!i){ce.window.showErrorMessage("No active editor found");return}let s=i.document,o=i.selection,a=s.uri.toString(),l;if(o.isEmpty?l=s.getText():l=s.getText(o),!l.trim()){ce.window.showWarningMessage("No SQL query to execute");return}let u=l.trim().split(/\s+/),d=u[0]||"",E=/python(\.exe)?$/i.test(d)&&u.length>=2&&u[1].toLowerCase().endsWith(".py"),f=d.toLowerCase().endsWith(".py");if(E||f){let h=ce.workspace.getConfiguration("netezza").get("pythonPath")||"python",p="";if(E){let m=u[0],R=u[1],A=u.slice(2);p=fs(m,R,A)}else{let m=d,R=u.slice(1);p=fs(h,m,R)}let S=ce.window.createTerminal({name:"Netezza: Script"});S.show(!0),S.sendText(p,!0),ce.window.showInformationMessage(`Running script: ${p}`);return}try{n.startExecution(a),await Gc(e,[l],r,a,T=>n.log(a,T),T=>n.updateResults(T,a,!0)),n.finalizeExecution(a),ce.commands.executeCommand("netezza.results.focus")}catch(T){let h=T instanceof Error?T.message:String(T);n.finalizeExecution(a),n.log(a,`Error: ${h}`),ce.window.showErrorMessage(`Error executing query: ${h}`)}}),ce.commands.registerCommand("netezza.explainQuery",async()=>{await UK(e,r,!1)}),ce.commands.registerCommand("netezza.explainQueryVerbose",async()=>{await UK(e,r,!0)}),ce.commands.registerCommand("netezza.formatSQL",async()=>{let i=ce.window.activeTextEditor;if(!i){ce.window.showErrorMessage("No active editor");return}if(i.document.languageId!=="sql"&&i.document.languageId!=="mssql"){ce.window.showWarningMessage("Format SQL is only available for SQL files");return}let s=ce.workspace.getConfiguration("netezza"),o=s.get("formatSQL.tabWidth",4),a=s.get("formatSQL.keywordCase","upper"),l=i.selection,c=l.isEmpty?i.document.getText():i.document.getText(l);try{let{format:u}=await Promise.resolve().then(()=>(wK(),bK)),d="__NZ_DOUBLE_DOT__",E=c.replace(/\.\.(?=[a-zA-Z_])/g,`.${d}.`),T=u(E,{language:"sql",tabWidth:o,keywordCase:a,linesBetweenQueries:2}).replace(new RegExp(`\\.\\s*${d}\\s*\\.`,"g"),"..");await i.edit(h=>{if(l.isEmpty){let p=new ce.Range(i.document.positionAt(0),i.document.positionAt(i.document.getText().length));h.replace(p,T)}else h.replace(l,T)}),ce.window.showInformationMessage("SQL formatted successfully")}catch(u){let d=u instanceof Error?u.message:String(u);d.includes("Parse error")?ce.window.showErrorMessage("SQL formatting failed: The SQL contains syntax not supported by the formatter. Try selecting a simpler portion of the SQL to format."):ce.window.showErrorMessage(`Format SQL failed: ${d}`)}})]}async function UK(t,e,r){let n=ce.window.activeTextEditor;if(!n){ce.window.showErrorMessage("No active editor found");return}let i=n.document,s=n.selection,o;if(!s.isEmpty)o=i.getText(s);else{let c=n.selection.active,u=i.offsetAt(c),d=i.getText(),E=vr.getStatementAtPosition(d,u);E?o=d.substring(E.start,E.end):o=i.getText()}if(!o.trim()){ce.window.showWarningMessage("No SQL query to explain");return}let a=o.trim();a.toUpperCase().startsWith("EXPLAIN")&&(a=a.replace(/^EXPLAIN\s+(?:VERBOSE\s+)?/i,""));let l=r?`EXPLAIN VERBOSE ${a}`:`EXPLAIN ${a}`;try{let c=i.uri.toString(),u=e.getConnectionForExecution(c);if(!u){ce.window.showErrorMessage("No database connection. Please connect first.");return}await ce.window.withProgress({location:ce.ProgressLocation.Notification,title:"Generating query plan...",cancellable:!1},async()=>{let d=await iw(t,l,u,e,c);if(d&&d.trim()){let{parseExplainOutput:E,ExplainPlanView:f}=await Promise.resolve().then(()=>(vK(),MK)),T=E(d);f.createOrShow(t.extensionUri,T,a)}else ce.window.showWarningMessage("No explain output received")})}catch(c){let u=c instanceof Error?c.message:String(c);ce.window.showErrorMessage(`Error generating query plan: ${u}`)}}var Ts=q(require("vscode"));function bb(t,e){let r=e.getKeepConnectionOpen();t.text=r?"\u{1F517} Keep Connection ON":"\u26D3\uFE0F\u200D\u{1F4A5} Keep Connection OFF",t.tooltip=r?"Keep Connection Open: ENABLED - Click to disable":"Keep Connection Open: DISABLED - Click to enable",t.backgroundColor=r?new Ts.ThemeColor("statusBarItem.prominentBackground"):void 0}function FK(t,e){let r=Ts.window.createStatusBarItem(Ts.StatusBarAlignment.Right,100);return r.command="netezza.toggleKeepConnectionOpen",bb(r,e),r.show(),t.subscriptions.push(r),r}function GK(t,e){let r=Ts.window.createStatusBarItem(Ts.StatusBarAlignment.Left,100);return r.command="netezza.selectConnectionForTab",r.tooltip="Click to select connection for this SQL tab",t.subscriptions.push(r),{statusBarItem:r,updateFn:()=>{let i=Ts.window.activeTextEditor;if(i&&i.document.languageId==="sql"){let s=i.document.uri.toString(),o=e.getConnectionForExecution(s);o?(r.text=`$(database) ${o}`,r.show()):(r.text="$(database) Select Connection",r.show())}else r.hide()}}}var Ze=q(require("vscode"));lo();var HK=/(^|\s)(?:[A-Za-z]:\\|\\|\/)?[\w.\-\\/]+\.py\b|(^|\s)python(?:\.exe)?\s+[^\n]*\.py\b/i,pR=class{constructor(){this._onDidChange=new Ze.EventEmitter;this.onDidChangeCodeLenses=this._onDidChange.event}provideCodeLenses(e){let r=[];for(let n=0;n<e.lineCount;n++){let i=e.lineAt(n);if(HK.test(i.text)){let s=i.range,o={title:"Run as script",command:"netezza.runScriptFromLens",arguments:[e.uri,s]};r.push(new Ze.CodeLens(s,o))}}return r}refresh(){this._onDidChange.fire()}};function WK(){return Ze.window.createTextEditorDecorationType({backgroundColor:new Ze.ThemeColor("editor.rangeHighlightBackground"),borderRadius:"3px"})}function kK(){return Ze.window.createTextEditorDecorationType({backgroundColor:"rgba(5, 115, 201, 0.10)",isWholeLine:!1,rangeBehavior:Ze.DecorationRangeBehavior.ClosedClosed})}function wb(t,e){let r=e||Ze.window.activeTextEditor;if(!r)return;let n=r.document,i=[];for(let s=0;s<n.lineCount;s++){let o=n.lineAt(s);HK.test(o.text)&&i.push({range:o.range,hoverMessage:"Python script invocation"})}r.setDecorations(t,i)}function TR(t,e){if(!Ze.workspace.getConfiguration("netezza").get("highlightActiveStatement",!0)||!e||e.document.languageId!=="sql"&&e.document.languageId!=="mssql"){e&&e.setDecorations(t,[]);return}try{let i=e.document,s=e.selection.active,o=i.offsetAt(s),a=i.getText(),l=vr.getStatementAtPosition(a,o);if(l){let c=i.positionAt(l.start),u=i.positionAt(l.end),d=new Ze.Range(c,u);e.setDecorations(t,[d])}else e.setDecorations(t,[])}catch(i){console.error("Error updating SQL highlight:",i)}}function $K(t,e,r){t.subscriptions.push(Ze.window.onDidChangeActiveTextEditor(()=>wb(e)),Ze.workspace.onDidChangeTextDocument(n=>{Ze.window.activeTextEditor&&n.document===Ze.window.activeTextEditor.document&&wb(e,Ze.window.activeTextEditor)})),t.subscriptions.push(Ze.window.onDidChangeTextEditorSelection(n=>{TR(r,n.textEditor)}),Ze.window.onDidChangeActiveTextEditor(n=>{TR(r,n)}),Ze.workspace.onDidChangeConfiguration(n=>{n.affectsConfiguration("netezza.highlightActiveStatement")&&TR(r,Ze.window.activeTextEditor)})),wb(e,Ze.window.activeTextEditor),TR(r,Ze.window.activeTextEditor)}var Yn=q(require("vscode")),tLe=new Map([["SX","SELECT"],["WX","WHERE"],["GX","GROUP BY"],["HX","HAVING"],["OX","ORDER BY"],["FX","FROM"],["JX","JOIN"],["LX","LIMIT"],["IX","INSERT INTO"],["UX","UPDATE"],["DX","DELETE FROM"],["CX","CREATE TABLE"]]);function YK(t){let e=Yn.workspace.onDidChangeTextDocument(async r=>{if(r.document.languageId!=="sql"&&r.document.languageId!=="mssql"||r.contentChanges.length!==1)return;let n=r.contentChanges[0];if(n.text!==" ")return;let i=Yn.window.activeTextEditor;if(!i||i.document!==r.document)return;let o=r.document.lineAt(n.range.start.line).text;for(let[a,l]of tLe)if(new RegExp(`\\b${a}\\s$`,"i").test(o)){let u=o.toUpperCase().lastIndexOf(a.toUpperCase());if(u>=0){let d=new Yn.Position(n.range.start.line,u),E=new Yn.Position(n.range.start.line,u+a.length+1);await i.edit(f=>{f.replace(new Yn.Range(d,E),l+" ")}),["SELECT","FROM","JOIN"].includes(l)&&setTimeout(()=>{Yn.commands.executeCommand("editor.action.triggerSuggest")},100);break}}});t.subscriptions.push(e)}var VK=[{id:"mtxr.sqltools",name:"SQLTools"},{id:"ms-mssql.mssql",name:"Microsoft SQL Server"},{id:"oracle.oracledevtools",name:"Oracle Developer Tools"},{id:"cweijan.vscode-mysql-client2",name:"MySQL"},{id:"ckolkman.vscode-postgres",name:"PostgreSQL"}];async function rLe(t){let e=z.workspace.getConfiguration("netezza");if(!e.get("showConflictWarnings",!0))return;let n=[];for(let a of VK)z.extensions.getExtension(a.id)&&n.push(a.name);let s=z.extensions.all.filter(a=>{let l=a.packageJSON;if(!l||a.id==="krzysztof-d.justybaselite-netezza"||VK.some(E=>E.id===a.id))return!1;let c=l.activationEvents?.some(E=>E.includes("onLanguage:sql")||E.includes("onLanguage:mssql")),u=l.contributes?.languages?.some(E=>E.id==="sql"||E.extensions?.includes(".sql"));return(l.displayName||"")==="SQL Language Basics"?!1:c||u}).map(a=>a.packageJSON.displayName||a.id),o=[...n,...s];if(o.length>0){let a=o.length===1?`SQL extension detected "${o[0]}" which may cause conflicts (e.g. duplicate keybindings F5, Ctrl+Enter).`:`SQL extensions detected which may cause conflicts: ${o.join(", ")}. Some functions (e.g. F5, Ctrl+Enter) may be duplicated.`;await z.window.showWarningMessage(a,"OK","Do not show again")==="Do not show again"&&await e.update("showConflictWarnings",!1,z.ConfigurationTarget.Global)}}async function nLe(t){console.log("Netezza extension: Activating..."),rLe(t);let e=new Li(t),r=new sE(t);await r.initialize();let n=new Xf(t,e,r),i=new Hc(t.extensionUri);t.subscriptions.push({dispose:()=>{e.closeAllPersistentConnections()}});let s=z.window.createOutputChannel("Netezza"),o=FK(t,e),{updateFn:a}=GK(t,e);a(),e.onDidChangeActiveConnection(R=>{a(),R&&!r.hasConnectionPrefetchTriggered(R)&&r.triggerConnectionPrefetch(R,A=>oe(t,A,!0,e,R))}),e.onDidChangeConnections(a),e.onDidChangeDocumentConnection(R=>{a();let A=e.getDocumentConnection(R);A&&!r.hasConnectionPrefetchTriggered(A)&&r.triggerConnectionPrefetch(A,g=>oe(t,g,!0,e,A))}),z.window.onDidChangeActiveTextEditor(a),console.log("Netezza extension: Registering SchemaSearchProvider...");let l=new Wc(t.extensionUri,t,r,e);console.log("Netezza extension: Registering QueryHistoryView...");let c=new kc(t.extensionUri,t),u=z.window.createTreeView("netezza.schema",{treeDataProvider:n,showCollapseAll:!0});t.subscriptions.push(z.window.registerWebviewViewProvider(Hc.viewType,i),z.window.registerWebviewViewProvider(Wc.viewType,l),z.window.registerWebviewViewProvider(kc.viewType,c));let d=WK(),E=kK();$K(t,d,E);let f=new pR;t.subscriptions.push(z.languages.registerCodeLensProvider({scheme:"file"},f)),t.subscriptions.push(z.window.onDidChangeActiveTextEditor(R=>{if(R&&R.document){let A=R.document.uri.toString();i.setActiveSource(A)}}));let T=vS({context:t,connectionManager:e,metadataCache:r,schemaProvider:n,schemaTreeView:u});t.subscriptions.push(...T);let h=O3({context:t,connectionManager:e,outputChannel:s});t.subscriptions.push(...h);let p=v3({context:t,connectionManager:e,outputChannel:s});t.subscriptions.push(...p);let S=BK({context:t,connectionManager:e,resultPanelProvider:i});t.subscriptions.push(...S),t.subscriptions.push(z.commands.registerCommand("netezza.viewEditData",R=>{eE.createOrShow(t.extensionUri,R,t,e)}),z.commands.registerCommand("netezza.createProcedure",async R=>{let A=R;if(!A||!A.dbName){z.window.showErrorMessage("Invalid selection. Select a Procedure folder.");return}let g=await z.window.showInputBox({prompt:"Enter new procedure name",placeHolder:"NEW_PROCEDURE",value:"NEW_PROCEDURE"});if(g===void 0)return;let w=g.trim()||"NEW_PROCEDURE",D=`CREATE OR REPLACE PROCEDURE ${A.dbName}.SCHEMA.${w}(INTEGER)
RETURNS INTEGER
EXECUTE AS CALLER
LANGUAGE NZPLSQL AS
BEGIN_PROC
DECLARE
    arg1 ALIAS FOR $1;
BEGIN
    -- YOUR CODE GOES HERE
    
    EXCEPTION
    WHEN OTHERS THEN
        ROLLBACK;
        RAISE EXCEPTION  'Procedure failed: %', sqlerrm;
        --RAISE NOTICE 'Caught error, continuing %', sqlerrm;

END;
END_PROC;`,b=await z.workspace.openTextDocument({content:D,language:"sql"});await z.window.showTextDocument(b)}),z.commands.registerCommand("netezza.toggleKeepConnectionOpen",()=>{let R=e.getKeepConnectionOpen();e.setKeepConnectionOpen(!R),bb(o,e);let A=!R;z.window.showInformationMessage(A?"Keep connection open: ENABLED - connection will remain open after queries":"Keep connection open: DISABLED - connection will be closed after each query")}),z.commands.registerCommand("netezza.cancelQuery",async()=>{await rw()}),z.commands.registerCommand("netezza.selectActiveConnection",async()=>{let R=await e.getConnections();if(R.length===0){z.window.showWarningMessage("No connections configured. Please connect first.");return}let A=await z.window.showQuickPick(R.map(g=>g.name),{placeHolder:"Select Active Connection"});A&&(await e.setActiveConnection(A),z.window.showInformationMessage(`Active connection set to: ${A}`))}),z.commands.registerCommand("netezza.selectConnectionForTab",async()=>{let R=z.window.activeTextEditor;if(!R||R.document.languageId!=="sql"){z.window.showWarningMessage("This command is only available for SQL files");return}let A=await e.getConnections();if(A.length===0){z.window.showWarningMessage("No connections configured. Please connect first.");return}let g=R.document.uri.toString(),w=e.getDocumentConnection(g)||e.getActiveConnectionName(),I=A.map(b=>({label:b.name,description:w===b.name?"$(check) Currently selected":`${b.host}:${b.port}/${b.database}`,name:b.name})),D=await z.window.showQuickPick(I,{placeHolder:"Select connection for this SQL tab"});D&&(e.setDocumentConnection(g,D.name),z.window.showInformationMessage(`Connection for this tab set to: ${D.name}`))}),z.commands.registerCommand("netezza.openLogin",()=>{qf.createOrShow(t.extensionUri,e)}),z.commands.registerCommand("netezza.refreshSchema",async()=>{await r.clearCache(),n.refresh(),z.window.showInformationMessage("Schema refreshed (Cache cleared)")}),z.commands.registerCommand("netezza.jumpToSchema",async()=>{let R=z.window.activeTextEditor;if(!R)return;let A=R.document,g=R.selection,w=A.offsetAt(g.active),I=vr.getObjectAtPosition(A.getText(),w);I?z.commands.executeCommand("netezza.revealInSchema",I):z.window.showWarningMessage("No object found at cursor")}),z.commands.registerCommand("netezza.runScriptFromLens",async(R,A)=>{try{let g=await z.workspace.openTextDocument(R),w=g.getText(A).trim()||g.lineAt(A.start.line).text.trim();if(!w){z.window.showWarningMessage("No script command found");return}let I=w.split(/\s+/),D=I[0]||"",b=/python(\.exe)?$/i.test(D)&&I.length>=2&&I[1].toLowerCase().endsWith(".py"),P=D.toLowerCase().endsWith(".py"),B=z.workspace.getConfiguration("netezza").get("pythonPath")||"python",G="";if(b){let J=I[0],re=I[1],te=I.slice(2);G=fs(J,re,te)}else if(P){let J=D,re=I.slice(1);G=fs(B,J,re)}else G=fs(B,"",I);let V=z.window.createTerminal({name:"Netezza: Script"});V.show(!0),V.sendText(G,!0),z.window.showInformationMessage(`Running script: ${G}`)}catch(g){let w=g instanceof Error?g.message:String(g);z.window.showErrorMessage(`Error running script: ${w}`)}}),z.commands.registerCommand("netezza.clearAutocompleteCache",async()=>{await z.window.showWarningMessage("Are you sure you want to clear the autocomplete cache? This will remove all cached databases, schemas, tables, and columns.",{modal:!0},"Clear Cache")==="Clear Cache"&&(await r.clearCache(),z.window.showInformationMessage("Autocomplete cache cleared successfully. Cache will be rebuilt on next use."))}),z.commands.registerCommand("netezza.copySelection",()=>{i.triggerCopySelection()}),z.commands.registerCommand("netezza.openEtlDesigner",()=>{Wn.setConnectionManager(e),Wn.createOrShow(t)}),z.commands.registerCommand("netezza.newEtlProject",async()=>{let R=await z.window.showInputBox({prompt:"Enter ETL project name",value:"New ETL Project"});R&&(ms.getInstance().createProject(R),Wn.setConnectionManager(e),Wn.createOrShow(t))}),z.commands.registerCommand("netezza.openEtlProject",async()=>{let R=await z.window.showOpenDialog({filters:{"ETL Project":["etl.json"]},canSelectMany:!1});if(R&&R[0])try{let g=await ms.getInstance().loadProject(R[0].fsPath);Wn.setConnectionManager(e),Wn.createOrShow(t,g),z.window.showInformationMessage(`ETL project loaded: ${g.name}`)}catch(A){z.window.showErrorMessage(`Failed to load ETL project: ${A}`)}}),z.commands.registerCommand("netezza.runEtlProject",async()=>{let A=ms.getInstance().getCurrentProject();if(!A){z.window.showWarningMessage("No ETL project is currently open. Please open or create a project first.");return}Wn.setConnectionManager(e),Wn.createOrShow(t,A),z.window.showInformationMessage("ETL project opened. Use the Run button in the designer to execute.")})),t.subscriptions.push(z.languages.registerDocumentLinkProvider({language:"sql"},new Jf),z.languages.registerFoldingRangeProvider({language:"sql"},new Qf));let m=new Kf(t,r,e);t.subscriptions.push(z.languages.registerCompletionItemProvider(["sql","mssql"],m,"."," ")),YK(t),hw(t),t.subscriptions.push(z.languages.registerCodeActionsProvider(["sql","netezza-sql"],new Yc,{providedCodeActionKinds:Yc.providedCodeActionKinds})),console.log("Netezza extension: Activation complete.")}function iLe(){}0&&(module.exports={activate,deactivate});
/*! Bundled license information:

normalize-path/index.js:
  (*!
   * normalize-path <https://github.com/jonschlinkert/normalize-path>
   *
   * Copyright (c) 2014-2018, Jon Schlinkert.
   * Released under the MIT License.
   *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

archiver/lib/error.js:
archiver/lib/core.js:
  (**
   * Archiver Core
   *
   * @ignore
   * @license [MIT]{@link https://github.com/archiverjs/node-archiver/blob/master/LICENSE}
   * @copyright (c) 2012-2014 Chris Talkington, contributors.
   *)

crc-32/crc32.js:
  (*! crc32.js (C) 2014-present SheetJS -- http://sheetjs.com *)

zip-stream/index.js:
  (**
   * ZipStream
   *
   * @ignore
   * @license [MIT]{@link https://github.com/archiverjs/node-zip-stream/blob/master/LICENSE}
   * @copyright (c) 2014 Chris Talkington, contributors.
   *)

archiver/lib/plugins/zip.js:
  (**
   * ZIP Format Plugin
   *
   * @module plugins/zip
   * @license [MIT]{@link https://github.com/archiverjs/node-archiver/blob/master/LICENSE}
   * @copyright (c) 2012-2014 Chris Talkington, contributors.
   *)

archiver/lib/plugins/tar.js:
  (**
   * TAR Format Plugin
   *
   * @module plugins/tar
   * @license [MIT]{@link https://github.com/archiverjs/node-archiver/blob/master/LICENSE}
   * @copyright (c) 2012-2014 Chris Talkington, contributors.
   *)

archiver/lib/plugins/json.js:
  (**
   * JSON Format Plugin
   *
   * @module plugins/json
   * @license [MIT]{@link https://github.com/archiverjs/node-archiver/blob/master/LICENSE}
   * @copyright (c) 2012-2014 Chris Talkington, contributors.
   *)

archiver/index.js:
  (**
   * Archiver Vending
   *
   * @ignore
   * @license [MIT]{@link https://github.com/archiverjs/node-archiver/blob/master/LICENSE}
   * @copyright (c) 2012-2014 Chris Talkington, contributors.
   *)
*/
