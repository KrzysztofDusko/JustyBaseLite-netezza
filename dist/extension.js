"use strict";var j4=Object.create;var Gf=Object.defineProperty;var z4=Object.getOwnPropertyDescriptor;var K4=Object.getOwnPropertyNames;var J4=Object.getPrototypeOf,Q4=Object.prototype.hasOwnProperty;var G=(t,e)=>()=>(t&&(e=t(t=0)),e);var O=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Et=(t,e)=>{for(var r in e)Gf(t,r,{get:e[r],enumerable:!0})},b0=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of K4(e))!Q4.call(t,i)&&i!==r&&Gf(t,i,{get:()=>e[i],enumerable:!(n=z4(e,i))||n.enumerable});return t};var q=(t,e,r)=>(r=t!=null?j4(J4(t)):{},b0(e||!t||!t.__esModule?Gf(r,"default",{value:t,enumerable:!0}):r,t)),gs=t=>b0(Gf({},"__esModule",{value:!0}),t);var ar,Ut,jn,Ie,_s,BR=G(()=>{"use strict";ar={AuthenticationRequest:82,ErrorResponse:69,NoticeResponse:78,BackendKeyData:75,ReadyForQuery:90,RowDescription:84,RowDescriptionStandard:88,DataRow:68,CommandComplete:67,EmptyQueryResponse:73,RowStandard:89,CopyInResponse:71,CopyOutResponse:72,CopyDone:99,CopyData:100},Ut={NzTypeRecAddr:1,NzTypeDouble:2,NzTypeInt:3,NzTypeFloat:4,NzTypeMoney:5,NzTypeDate:6,NzTypeNumeric:7,NzTypeTime:8,NzTypeTimestamp:9,NzTypeInterval:10,NzTypeTimeTz:11,NzTypeBool:12,NzTypeInt1:13,NzTypeBinary:14,NzTypeChar:15,NzTypeVarChar:16,NzDEPR_Text:17,NzTypeUnknown:18,NzTypeInt2:19,NzTypeInt8:20,NzTypeVarFixedChar:21,NzTypeGeometry:22,NzTypeVarBinary:23,NzDEPR_Blob:24,NzTypeNChar:25,NzTypeNVarChar:26,NzDEPR_NText:27,NzTypeJson:30,NzTypeJsonb:31,NzTypeJsonpath:32,NzTypeLastEntry:33,NzTypeIntvsAbsTimeFIX:39},jn={CP_VERSION_2:2,CP_VERSION_3:3,CP_VERSION_4:4,CP_VERSION_5:5,CP_VERSION_6:6},Ie={HSV2_CLIENT_BEGIN:1,HSV2_DB:2,HSV2_USER:3,HSV2_OPTIONS:4,HSV2_REMOTE_PID:6,HSV2_CLIENT_TYPE:8,HSV2_PROTOCOL:9,HSV2_SSL_NEGOTIATE:11,HSV2_SSL_CONNECT:12,HSV2_APPNAME:13,HSV2_CLIENT_OS:14,HSV2_CLIENT_HOST_NAME:15,HSV2_CLIENT_OS_USER:16,HSV2_64BIT_VARLENA_ENABLED:17,HSV2_CLIENT_DONE:1e3},_s={DATA:1,ERROR:2,DONE:3}});function L0(t){let e=t.readBigInt64LE(0),r=Number(e/1000n);return new Date(w0+r)}function D0(t){let r=t.readInt32LE(0)*24*60*60*1e3;return new Date(w0+r)}function Wf(t){let e=t.readBigInt64LE(0),r=Number(e/1000000n),n=Number(e%1000000n),i=Math.floor(r/3600),s=Math.floor(r%3600/60),o=r%60;return{hours:i,minutes:s,seconds:o,microseconds:n,toString(){let a=String(i).padStart(2,"0"),l=String(s).padStart(2,"0"),c=String(o).padStart(2,"0");if(n>0){let u=String(n).padStart(6,"0");return`${a}:${l}:${c}.${u}`}return`${a}:${l}:${c}`}}}function P0(t){if(!t)return null;let e=t.split(":"),r=parseInt(e[0],10)||0,n=parseInt(e[1],10)||0,i=(e[2]||"0").split("."),s=parseInt(i[0],10)||0,o=0;return i.length>1&&(o=parseInt(i[1].substring(0,6).padEnd(6,"0"),10)),{hours:r,minutes:n,seconds:s,microseconds:o,toString(){return t}}}function x0(t){let e=t.readBigInt64LE(0),r=t.readInt32LE(8),n=Wf(t);if(r===0)return n.toString();let i=Math.floor(r/12),s=r%12;return i>0?`${i} years ${s} mons ${n.toString()}`:`${s} mons ${n.toString()}`}function v0(t,e){let r=Wf(t),n=t.readInt32LE(e-4),i=n<0?"+":"-",s=Math.abs(n),o=Math.floor(s/3600),a=Math.floor(s%3600/60),l=s%60,c=String(o).padStart(2,"0");return l!==0?c+=":"+String(a).padStart(2,"0")+":"+String(l).padStart(2,"0"):a!==0&&(c+=":"+String(a).padStart(2,"0")),`${r.toString()}${i}${c}`}function M0(t,e,r,n){let i=e<=9?1:e<=18?2:4,s=[];for(let f=0;f<i;f++)s.push(t.readUInt32LE(f*4));let o=(s[0]&y0)!==0?4294967295:0,a=new Array(Ua).fill(o);for(let f=Ua-n,p=0;f<Ua;f++,p++)a[f]=s[p];let l=(a[0]&y0)!==0;l&&e8(a);let c=new Array(Hc).fill(0);for(let f=0;f<Hc;f++)c[Hc-f-1]=Z4(a);let u="",d=!0;for(let f=0;f<Hc;f++)f<Hc-r-1&&d&&c[f]===0||(d=!1,u+=String(c[f]));if(u===""&&(u="0"),r!==0){let f=u.slice(0,-r)||"0",p=u.slice(-r).padStart(r,"0");u=f+"."+p}l&&(u="-"+u);let E=parseFloat(u);return e<=15&&u===String(E)?E:u}function Z4(t){let e=0;for(let r=0;r<Ua;r++){let n=t[r]+e*4294967296;n!==0?(t[r]=Math.floor(n/10),e=n%10):(t[r]=0,e=0)}return e}function e8(t){for(let r=0;r<Ua;r++)t[r]=~t[r]>>>0;let e=1;for(let r=Ua-1;r>=0&&e;r--){let n=t[r]+e;t[r]=n>>>0,e=n>4294967295?1:0}}var w0,Ua,Hc,y0,U0=G(()=>{"use strict";w0=Date.UTC(2e3,0,1);Ua=4,Hc=38,y0=2147483648});var HR=O((mLe,B0)=>{"use strict";var FR=class{static readInt32(e,r=0){return e.readInt32BE(r)}static readInt16(e,r=0){return e.readInt16BE(r)}static writeInt32(e,r,n=0){if(Buffer.isBuffer(e))e.writeInt32BE(r,n);else{let i=Buffer.allocUnsafe(4);i.writeInt32BE(r,0),e.write(i)}}static writeInt16(e,r,n=0){if(Buffer.isBuffer(e))e.writeInt16BE(r,n);else{let i=Buffer.allocUnsafe(2);i.writeInt16BE(r,0),e.write(i)}}};B0.exports=FR});var H0=O((gLe,F0)=>{var Ba=1e3,Fa=Ba*60,Ha=Fa*60,uo=Ha*24,r8=uo*7,n8=uo*365.25;F0.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return i8(t);if(r==="number"&&isFinite(t))return e.long?o8(t):s8(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function i8(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*n8;case"weeks":case"week":case"w":return r*r8;case"days":case"day":case"d":return r*uo;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Ha;case"minutes":case"minute":case"mins":case"min":case"m":return r*Fa;case"seconds":case"second":case"secs":case"sec":case"s":return r*Ba;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function s8(t){var e=Math.abs(t);return e>=uo?Math.round(t/uo)+"d":e>=Ha?Math.round(t/Ha)+"h":e>=Fa?Math.round(t/Fa)+"m":e>=Ba?Math.round(t/Ba)+"s":t+"ms"}function o8(t){var e=Math.abs(t);return e>=uo?$f(t,e,uo,"day"):e>=Ha?$f(t,e,Ha,"hour"):e>=Fa?$f(t,e,Fa,"minute"):e>=Ba?$f(t,e,Ba,"second"):t+" ms"}function $f(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var GR=O((_Le,G0)=>{function a8(t){r.debug=r,r.default=r,r.coerce=l,r.disable=o,r.enable=i,r.enabled=a,r.humanize=H0(),r.destroy=c,Object.keys(t).forEach(u=>{r[u]=t[u]}),r.names=[],r.skips=[],r.formatters={};function e(u){let d=0;for(let E=0;E<u.length;E++)d=(d<<5)-d+u.charCodeAt(E),d|=0;return r.colors[Math.abs(d)%r.colors.length]}r.selectColor=e;function r(u){let d,E=null,f,p;function h(...S){if(!h.enabled)return;let T=h,m=Number(new Date),R=m-(d||m);T.diff=R,T.prev=d,T.curr=m,d=m,S[0]=r.coerce(S[0]),typeof S[0]!="string"&&S.unshift("%O");let A=0;S[0]=S[0].replace(/%([a-zA-Z%])/g,(w,g)=>{if(w==="%%")return"%";A++;let L=r.formatters[g];if(typeof L=="function"){let y=S[A];w=L.call(T,y),S.splice(A,1),A--}return w}),r.formatArgs.call(T,S),(T.log||r.log).apply(T,S)}return h.namespace=u,h.useColors=r.useColors(),h.color=r.selectColor(u),h.extend=n,h.destroy=r.destroy,Object.defineProperty(h,"enabled",{enumerable:!0,configurable:!1,get:()=>E!==null?E:(f!==r.namespaces&&(f=r.namespaces,p=r.enabled(u)),p),set:S=>{E=S}}),typeof r.init=="function"&&r.init(h),h}function n(u,d){let E=r(this.namespace+(typeof d>"u"?":":d)+u);return E.log=this.log,E}function i(u){r.save(u),r.namespaces=u,r.names=[],r.skips=[];let d=(typeof u=="string"?u:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let E of d)E[0]==="-"?r.skips.push(E.slice(1)):r.names.push(E)}function s(u,d){let E=0,f=0,p=-1,h=0;for(;E<u.length;)if(f<d.length&&(d[f]===u[E]||d[f]==="*"))d[f]==="*"?(p=f,h=E,f++):(E++,f++);else if(p!==-1)f=p+1,h++,E=h;else return!1;for(;f<d.length&&d[f]==="*";)f++;return f===d.length}function o(){let u=[...r.names,...r.skips.map(d=>"-"+d)].join(",");return r.enable(""),u}function a(u){for(let d of r.skips)if(s(u,d))return!1;for(let d of r.names)if(s(u,d))return!0;return!1}function l(u){return u instanceof Error?u.stack||u.message:u}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}G0.exports=a8});var W0=O((Vr,kf)=>{Vr.formatArgs=c8;Vr.save=u8;Vr.load=d8;Vr.useColors=l8;Vr.storage=f8();Vr.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Vr.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function l8(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let t;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function c8(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+kf.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}Vr.log=console.debug||console.log||(()=>{});function u8(t){try{t?Vr.storage.setItem("debug",t):Vr.storage.removeItem("debug")}catch{}}function d8(){let t;try{t=Vr.storage.getItem("debug")||Vr.storage.getItem("DEBUG")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function f8(){try{return localStorage}catch{}}kf.exports=GR()(Vr);var{formatters:E8}=kf.exports;E8.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var k0=O((ILe,$0)=>{"use strict";$0.exports=(t,e=process.argv)=>{let r=t.startsWith("-")?"":t.length===1?"-":"--",n=e.indexOf(r+t),i=e.indexOf("--");return n!==-1&&(i===-1||n<i)}});var q0=O((NLe,V0)=>{"use strict";var h8=require("os"),Y0=require("tty"),un=k0(),{env:Kt}=process,Is;un("no-color")||un("no-colors")||un("color=false")||un("color=never")?Is=0:(un("color")||un("colors")||un("color=true")||un("color=always"))&&(Is=1);"FORCE_COLOR"in Kt&&(Kt.FORCE_COLOR==="true"?Is=1:Kt.FORCE_COLOR==="false"?Is=0:Is=Kt.FORCE_COLOR.length===0?1:Math.min(parseInt(Kt.FORCE_COLOR,10),3));function WR(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function $R(t,e){if(Is===0)return 0;if(un("color=16m")||un("color=full")||un("color=truecolor"))return 3;if(un("color=256"))return 2;if(t&&!e&&Is===void 0)return 0;let r=Is||0;if(Kt.TERM==="dumb")return r;if(process.platform==="win32"){let n=h8.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in Kt)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in Kt)||Kt.CI_NAME==="codeship"?1:r;if("TEAMCITY_VERSION"in Kt)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Kt.TEAMCITY_VERSION)?1:0;if(Kt.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in Kt){let n=parseInt((Kt.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Kt.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Kt.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(Kt.TERM)||"COLORTERM"in Kt?1:r}function p8(t){let e=$R(t,t&&t.isTTY);return WR(e)}V0.exports={supportsColor:p8,stdout:WR($R(!0,Y0.isatty(1))),stderr:WR($R(!0,Y0.isatty(2)))}});var j0=O((Jt,Vf)=>{var T8=require("tty"),Yf=require("util");Jt.init=I8;Jt.log=m8;Jt.formatArgs=R8;Jt.save=g8;Jt.load=_8;Jt.useColors=S8;Jt.destroy=Yf.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");Jt.colors=[6,2,3,4,5,1];try{let t=q0();t&&(t.stderr||t).level>=2&&(Jt.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}Jt.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,s)=>s.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function S8(){return"colors"in Jt.inspectOpts?!!Jt.inspectOpts.colors:T8.isatty(process.stderr.fd)}function R8(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),s=`  ${i};1m${e} \x1B[0m`;t[0]=s+t[0].split(`
`).join(`
`+s),t.push(i+"m+"+Vf.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=A8()+e+" "+t[0]}function A8(){return Jt.inspectOpts.hideDate?"":new Date().toISOString()+" "}function m8(...t){return process.stderr.write(Yf.formatWithOptions(Jt.inspectOpts,...t)+`
`)}function g8(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function _8(){return process.env.DEBUG}function I8(t){t.inspectOpts={};let e=Object.keys(Jt.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=Jt.inspectOpts[e[r]]}Vf.exports=GR()(Jt);var{formatters:X0}=Vf.exports;X0.o=function(t){return this.inspectOpts.colors=this.useColors,Yf.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};X0.O=function(t){return this.inspectOpts.colors=this.useColors,Yf.inspect(t,this.inspectOpts)}});var YR=O((OLe,kR)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?kR.exports=W0():kR.exports=j0()});var ew=O((bLe,Z0)=>{"use strict";var z0=q(require("crypto")),K0=q(require("os")),J0=q(require("tls")),Q0=q(require("fs"));BR();var ie=HR(),Bt=YR()("nz:handshake"),VR=class{constructor(e,r,n,i={}){this._hsVersion=-1;this._protocol1=-1;this._protocol2=-1;this.NPSCLIENT_TYPE_DOTNET=11;this.backendProcessId=0;this.backendSecretKey=0;this._socket=e,this._stream=r,this._host=n,this._options=i,this._guardiumClientOS=process.platform,this._guardiumClientOSUser=process.env.USERNAME||process.env.USER||"unknown",this._guardiumAppName="scJs-Driver",this._guardiumClientHostName=K0.hostname()}async startup(e,r,n){if(!await this.connHandshakeNegotiate())throw new Error("Handshake negotiation unsuccessful");if(Bt("Sending handshake info"),!await this.connSendHandshakeInfo(e,r))throw new Error("Error in ConnSendHandshakeInfo");if(!await this.connAuthenticate(n))throw new Error("Error in ConnAuthenticate");if(!await this.connConnectionComplete())throw new Error("Error in ConnConnectionComplete");return this._stream}async _readExactly(e){return new Promise((r,n)=>{let i=this._stream.read(e);i?r(i):this._stream.once("readable",()=>{let s=this._stream.read(e);s&&r(s)})})}async readBytes(e){for(;;){let r=this._stream.read(e);if(r!==null)return r;await new Promise(n=>this._stream.once("readable",n))}}async readByte(){return(await this.readBytes(1))[0]}async connHandshakeNegotiate(){let e=jn.CP_VERSION_6;for(;;){Bt(`Sending version: ${e}`),ie.writeInt32(this._stream,8),ie.writeInt16(this._stream,Ie.HSV2_CLIENT_BEGIN),ie.writeInt16(this._stream,e);let r=await this.readByte();if(Bt(`Got response: ${String.fromCharCode(r)}`),r===78)return this._hsVersion=e,this._protocol2=0,!0;if(r===77){let n=await this.readByte(),i=String.fromCharCode(n);i==="2"?e=jn.CP_VERSION_2:i==="3"?e=jn.CP_VERSION_3:i==="4"?e=jn.CP_VERSION_4:i==="5"&&(e=jn.CP_VERSION_5)}else return!1}}async connSendHandshakeInfo(e,r){return await this.connSendDatabase(e)?(await this.connSecureSession(),this.connSetNextDataProtocol(this._protocol1,this._protocol2),this._hsVersion===jn.CP_VERSION_6||this._hsVersion===jn.CP_VERSION_4?this.connSendHandshakeVersion4(this._hsVersion,r):this.connSendHandshakeVersion2(this._hsVersion,r)):!1}async connSendDatabase(e){let r=Buffer.from(e,"utf8"),n=6+r.length+1;return ie.writeInt32(this._stream,n),ie.writeInt16(this._stream,Ie.HSV2_DB),this._stream.write(r),this._stream.write(Buffer.from([0])),await this.readByte()===78}async connSecureSession(){let r=0,n=this._options.securityLevel;n==="OnlyUnsecuredSession"?r=1:n==="PreferredSecuredSession"?r=2:n==="OnlySecuredSession"&&(r=3),ie.writeInt32(this._stream,10),ie.writeInt16(this._stream,Ie.HSV2_SSL_NEGOTIATE),ie.writeInt32(this._stream,r);let i=await this.readByte();if(i===78){if(this._options.securityLevel==="OnlySecuredSession")throw new Error("Server refused secure session, but OnlySecuredSession was requested.");return!0}if(i===83){Bt("Upgrading to SSL...");let s=Buffer.alloc(6);s.writeInt32BE(6,0),s.writeInt16BE(Ie.HSV2_SSL_CONNECT,4),await new Promise(a=>{this._stream.write(s)?a():this._stream.once("drain",a)}),this._socket.removeAllListeners("data"),this._socket.removeAllListeners("readable");let o={socket:this._socket,rejectUnauthorized:!1};if(this._options.sslCerFilePath){this._options.rejectUnauthorized===!1?o.rejectUnauthorized=!1:o.rejectUnauthorized=!0;try{o.ca=Q0.readFileSync(this._options.sslCerFilePath)}catch(a){throw Bt("Failed to load cert file",a),a}}return new Promise((a,l)=>{let c=J0.connect(o,()=>{Bt("SSL Connected"),this._stream=c,this._stream.on("error",u=>{Bt("Secure Stream Error",u)}),this.readByte().then(u=>{u===78?a(!0):l(new Error(`SSL Handshake failed: Unexpected response ${String.fromCharCode(u)}`))}).catch(u=>{Bt("Failed to read SSL confirmation",u),l(u)})});c.on("error",u=>{Bt("SSL Connection Error",u),l(u)})})}return!1}connSetNextDataProtocol(e,r){return this._protocol2===0&&(this._protocol2=5),this._protocol1=3,!0}async connSendHandshakeVersion4(e,r){let n=Buffer.from(r,"utf8"),i=6+n.length+1;ie.writeInt32(this._stream,i),ie.writeInt16(this._stream,Ie.HSV2_USER),this._stream.write(n),this._stream.write(Buffer.from([0]));let s=Ie.HSV2_APPNAME;for(;s!==0;){if(await this.readByte()!==78)return!1;switch(s){case Ie.HSV2_APPNAME:await this.sendStringOption(s,this._guardiumAppName),s=Ie.HSV2_CLIENT_OS;break;case Ie.HSV2_CLIENT_OS:await this.sendStringOption(s,this._guardiumClientOS),s=Ie.HSV2_CLIENT_HOST_NAME;break;case Ie.HSV2_CLIENT_HOST_NAME:await this.sendStringOption(s,this._guardiumClientHostName),s=Ie.HSV2_CLIENT_OS_USER;break;case Ie.HSV2_CLIENT_OS_USER:await this.sendStringOption(s,this._guardiumClientOSUser),s=Ie.HSV2_PROTOCOL;break;case Ie.HSV2_PROTOCOL:i=10,ie.writeInt32(this._stream,i),ie.writeInt16(this._stream,s),ie.writeInt16(this._stream,this._protocol1),ie.writeInt16(this._stream,this._protocol2),s=Ie.HSV2_REMOTE_PID;break;case Ie.HSV2_REMOTE_PID:i=10,ie.writeInt32(this._stream,i),ie.writeInt16(this._stream,s),ie.writeInt32(this._stream,process.pid),s=Ie.HSV2_CLIENT_TYPE;break;case Ie.HSV2_CLIENT_TYPE:i=8,ie.writeInt32(this._stream,i),ie.writeInt16(this._stream,s),ie.writeInt16(this._stream,11),e>=5?s=Ie.HSV2_64BIT_VARLENA_ENABLED:s=Ie.HSV2_CLIENT_DONE;break;case Ie.HSV2_64BIT_VARLENA_ENABLED:i=8,ie.writeInt32(this._stream,i),ie.writeInt16(this._stream,s),ie.writeInt16(this._stream,1),s=Ie.HSV2_CLIENT_DONE;break;case Ie.HSV2_CLIENT_DONE:return i=6,ie.writeInt32(this._stream,i),ie.writeInt16(this._stream,s),s=0,!0}}return!1}async connSendHandshakeVersion2(e,r){let n=Buffer.from(r,"utf8"),i=6+n.length+1;ie.writeInt32(this._stream,i),ie.writeInt16(this._stream,Ie.HSV2_USER),this._stream.write(n),this._stream.write(Buffer.from([0]));let s=Ie.HSV2_PROTOCOL;for(;s!==0;){Bt(`Waiting for response in v2 loop. Info: ${s}`);let o=await this.readByte();if(Bt(`Got response: ${String.fromCharCode(o)}`),o===78)switch(s){case Ie.HSV2_PROTOCOL:i=10,ie.writeInt32(this._stream,i),ie.writeInt16(this._stream,s),ie.writeInt16(this._stream,this._protocol1),ie.writeInt16(this._stream,this._protocol2),s=Ie.HSV2_REMOTE_PID;break;case Ie.HSV2_REMOTE_PID:i=10,ie.writeInt32(this._stream,i),ie.writeInt16(this._stream,s),ie.writeInt32(this._stream,process.pid),s=Ie.HSV2_CLIENT_TYPE;break;case Ie.HSV2_OPTIONS:s=Ie.HSV2_CLIENT_TYPE;break;case Ie.HSV2_CLIENT_TYPE:i=8,ie.writeInt32(this._stream,i),ie.writeInt16(this._stream,s),ie.writeInt16(this._stream,11),e===jn.CP_VERSION_5||e===jn.CP_VERSION_6?s=Ie.HSV2_64BIT_VARLENA_ENABLED:s=Ie.HSV2_CLIENT_DONE;break;case Ie.HSV2_64BIT_VARLENA_ENABLED:i=8,ie.writeInt32(this._stream,i),ie.writeInt16(this._stream,s),ie.writeInt16(this._stream,1),s=Ie.HSV2_CLIENT_DONE;break;case Ie.HSV2_CLIENT_DONE:return i=6,ie.writeInt32(this._stream,i),ie.writeInt16(this._stream,s),s=0,!0}else throw o===ar.ErrorResponse?new Error("Handshake V2 Failed: ErrorResponse from backend"):new Error(`Handshake V2 Failed: Unexpected response ${String.fromCharCode(o)}`)}return!1}async sendStringOption(e,r){let n=Buffer.from(r,"utf8"),i=6+n.length+1;ie.writeInt32(this._stream,i),ie.writeInt16(this._stream,e),this._stream.write(n),this._stream.write(Buffer.from([0]))}async connAuthenticate(e){if(await this.readByte()!==ar.AuthenticationRequest)return!1;let n=ie.readInt32(await this.readBytes(4));if(Bt(`Auth request: ${n}`),n===0)return!0;if(n===3){let i=Buffer.from(e,"utf8"),s=4+i.length+1;return ie.writeInt32(this._stream,s),this._stream.write(i),this._stream.write(Buffer.from([0])),!0}if(n===5){let i=await this.readBytes(2),s=Buffer.from(e,"utf8"),a=z0.createHash("md5").update(Buffer.concat([i,s])).digest("base64").replace(/=+$/,""),l=Buffer.from(a,"utf8"),c=4+l.length+1;return ie.writeInt32(this._stream,c),this._stream.write(l),this._stream.write(Buffer.from([0])),!0}return!1}async readString(){let e=[];for(;;){let r=await this.readByte();if(r===0)break;e.push(r)}return Buffer.from(e).toString("utf8")}async connConnectionComplete(){for(;;){let e=await this.readByte();if(Bt(`Resp: ${String.fromCharCode(e)} (0x${e.toString(16)})`),e===ar.AuthenticationRequest){let n=ie.readInt32(await this.readBytes(4));Bt(`Auth req in complete: ${n}`);continue}if(e===ar.ErrorResponse){let n=await this.readBytes(4),i=ie.readInt32(n);if(i<0||i>1e8){let o=n.toString("utf8");throw o+=await this.readString(),new Error(`Backend Error: ${o}`)}let s=await this.readBytes(i-4);throw new Error(`Backend Error: ${s.toString()}`)}let r=await this.readBytes(4);if(Bt(`Skipped 4 bytes: ${r.toString("hex")}`),e===ar.BackendKeyData){let n=await this.readBytes(4);Bt(`KeyData Padding: ${n.toString("hex")}`);let i=ie.readInt32(await this.readBytes(4)),s=ie.readInt32(await this.readBytes(4));Bt(`KeyData: PID=${i} Key=${s}`),this.backendProcessId=i,this.backendSecretKey=s;continue}if(e===ar.ReadyForQuery)return Bt("ReadyForQuery"),!0;if(e===ar.NoticeResponse){let n=ie.readInt32(await this.readBytes(4)),i=await this.readBytes(n);Bt(`Notice: ${i.toString()}`);continue}}}};Z0.exports=VR});var rw=O((yLe,tw)=>{"use strict";var qR=class{constructor(e){this.connection=e,this.commandText="",this.parameters=[],this._recordsAffected=-1,this.commandTimeout=e.commandTimeout!==void 0?e.commandTimeout:30}async execute(){return this.connection.execute(this,!1)}async executeNonQuery(){return await this.connection.execute(this,!1),this._recordsAffected}async executeReader(){return this.connection.executeReader(this)}async cancel(){return this.connection.cancel()}};tw.exports=qR});var iw=O((wLe,nw)=>{"use strict";var Se={Bool:16,Bytea:17,Char:18,Name:19,Int8:20,Int2:21,Int4:23,Text:25,ShowDate:2530,BpChar:1042,VarChar:1043,Date:1082,Time:1083,Timestamp:1114,TimestampTz:1184,Interval:1186,TimeTz:1266,Numeric:1700,Float4:700,Float8:701},Gc=16,XR=class{constructor(e,r,n,i,s){this.currentRow=null;this.closed=!1;this._nameIndex={};this._pendingColumns=null;this._isFinished=!1;this.command=e,this.generator=r,this.columnDescriptions=n||[],this.releaseCallback=i,this._initNameIndex(),this._nextItem=s,this._hasRows=!!(this._nextItem&&this._nextItem.type==="DataRow")}get hasRows(){return this._hasRows}_initNameIndex(){if(this._nameIndex={},this.columnDescriptions)for(let e=0;e<this.columnDescriptions.length;e++)this._nameIndex[this.columnDescriptions[e].name.toLowerCase()]=e}_markFinished(){this._isFinished=!0,this._nextItem=null,this._hasRows=!1,this.releaseCallback&&(this.releaseCallback(),this.releaseCallback=null)}async nextResult(){if(this._pendingColumns){for(this.columnDescriptions=this._pendingColumns,this._pendingColumns=null,this._initNameIndex(),this.currentRow=null;;){let e=await this.generator.next();if(e.done){this._nextItem=null,this._hasRows=!1;break}let r=e.value;if(r.type!=="RowDescriptionStandard")if(r.type==="DataRow"){this._nextItem=r,this._hasRows=!0;break}else if(r.type==="CommandComplete"){this._nextItem=r,this._hasRows=!1;break}else{this._nextItem=r,this._hasRows=!1;break}}return!0}if(this.closed||this._isFinished)return!1;for(;;){let e;if(this._nextItem?(e={value:this._nextItem,done:!1},this._nextItem=null):e=await this.generator.next(),e.done)return this._markFinished(),!1;let r=e.value;if(r.type==="RowDescription"){this.columnDescriptions=r.columns,this._initNameIndex(),this.currentRow=null;continue}if(r.type==="RowDescriptionStandard"){let n=this.command?._preparedStatement;this.columnDescriptions.length===0&&n&&n.description&&(this.columnDescriptions=n.description,this._initNameIndex()),this.currentRow=null;continue}if(r.type==="DataRow")return this._nextItem=r,this._hasRows=!0,!0;if(r.type!=="CommandComplete"){if(r.type==="ErrorResponse")throw new Error(r.message||"Unknown Netezza Error");if(r.type==="ReadyForQuery")return this._markFinished(),!1}}}getSchemaTable(){if(!this.columnDescriptions)return[];let e=[];for(let r=0;r<this.columnDescriptions.length;r++){let n=this.columnDescriptions[r],i={ColumnName:n.name,ColumnOrdinal:r+1,ColumnSize:-1,NumericPrecision:0,NumericScale:0,DataType:String,ProviderType:n.typeOid,AllowDBNull:!0,IsReadOnly:!0,IsLong:!1},s=n.typeMod,o=n.typeOid;switch(o){case Se.Bool:i.DataType=Boolean,i.ColumnSize=1;break;case Se.Int2:i.DataType=Number,i.ColumnSize=2;break;case Se.Int4:i.DataType=Number,i.ColumnSize=4;break;case Se.Int8:i.DataType=Number,i.ColumnSize=8;break;case Se.Float4:case Se.Float8:i.DataType=Number,i.ColumnSize=o===Se.Float8?8:4,i.NumericPrecision=o===Se.Float8?53:24;break;case Se.Numeric:if(i.DataType=Number,s>Gc){let a=s-Gc>>16,l=s-Gc&65535;i.NumericPrecision=a,i.NumericScale=l,i.ColumnSize=Math.floor(a/2)+1,i.ColumnSize<n.typeLen&&n.typeLen>0&&(i.ColumnSize=n.typeLen)}else i.ColumnSize=n.typeLen;break;case Se.Date:case Se.Timestamp:case Se.TimestampTz:case Se.Time:case Se.TimeTz:i.DataType=Date,(o===Se.Time||o===Se.TimeTz)&&(i.DataType=Object),i.ColumnSize=n.typeLen;break;case Se.Char:case Se.BpChar:case Se.VarChar:case Se.Text:case Se.Name:case Se.ShowDate:i.DataType=String,s>Gc?i.ColumnSize=s-Gc:(i.ColumnSize=-1,n.typeLen>0&&(i.ColumnSize=n.typeLen)),i.ColumnSize>8e3&&(i.IsLong=!0);break;default:i.DataType=String,i.ColumnSize=n.typeLen;break}e.push(i)}return{Rows:e,Columns:{Count:e.length}}}getTypeName(e){if(e<0||e>=this.columnDescriptions.length)throw new Error(`Column ordinal ${e} is out of range`);let n=this.columnDescriptions[e].typeOid;switch(n){case Se.Bool:return"BOOL";case Se.Bytea:return"BYTEA";case Se.Char:return"CHAR";case Se.Name:return"NAME";case Se.Int8:return"INT8";case Se.Int2:return"INT2";case Se.Int4:return"INT4";case Se.Text:return"TEXT";case Se.BpChar:return"CHAR";case Se.VarChar:return"VARCHAR";case Se.Date:return"DATE";case Se.Time:return"TIME";case Se.Timestamp:return"TIMESTAMP";case Se.TimestampTz:return"TIMESTAMPTZ";case Se.Interval:return"INTERVAL";case Se.TimeTz:return"TIMETZ";case Se.Numeric:return"NUMERIC";case Se.Float4:return"FLOAT4";case Se.Float8:return"FLOAT8";case 2530:return"DATE";case 15:return"CHAR";case 16:return"BOOL";default:return`UNKNOWN(${n})`}}async read(){if(this.closed||this._isFinished||this._pendingColumns)return!1;let e;if(this._nextItem?(e={value:this._nextItem,done:!1},this._nextItem=null):e=await this.generator.next(),e.done)return this._markFinished(),this.currentRow=null,!1;let r=e.value;if(r.type==="DataRow")return this.currentRow=r.row,!0;if(r.type==="RowDescription")return this._pendingColumns=r.columns,this.currentRow=null,!1;if(r.type==="RowDescriptionStandard"){let n=this.command?._preparedStatement;return this._pendingColumns=n&&n.description?n.description:this.columnDescriptions,this.currentRow=null,!1}if(r.type==="CommandComplete")return this.currentRow=null,this.read();if(r.type==="ErrorResponse")throw new Error(r.message||"Unknown Netezza Error");return r.type==="ReadyForQuery"?(this._markFinished(),this.currentRow=null,!1):this.read()}getValue(e){return this._validateOrdinal(e),this.currentRow[e]}getValueByName(e){let r=this.getOrdinal(e);return this.getValue(r)}getName(e){if(e<0||e>=this.columnDescriptions.length)throw new Error(`Column ordinal ${e} is out of range`);return this.columnDescriptions[e].name}getOrdinal(e){let r=this._nameIndex[e.toLowerCase()];if(r===void 0)throw new Error(`Column '${e}' not found`);return r}get fieldCount(){return this.columnDescriptions?.length||0}get FieldCount(){return this.fieldCount}isDBNull(e){return this._validateOrdinal(e),this.currentRow[e]===null}getBoolean(e){let r=this.getValue(e);return r===null?!1:typeof r=="boolean"?r:typeof r=="string"?r.toLowerCase()==="t"||r==="1"||r.toLowerCase()==="true":!!r}getByte(e){let r=this.getValue(e);return r===null?0:Number(r)&255}getInt16(e){let r=this.getValue(e);return r===null?0:Number(r)}getInt32(e){let r=this.getValue(e);return r===null?0:Number(r)}getInt64(e){let r=this.getValue(e);return r===null?0:typeof r=="bigint"?r:Number(r)}getFloat(e){let r=this.getValue(e);return r===null?0:Number(r)}getDouble(e){let r=this.getValue(e);return r===null?0:Number(r)}getDecimal(e){let r=this.getValue(e);return r===null?0:typeof r=="string"?r:Number(r)}getString(e){let r=this.getValue(e);return r===null?null:typeof r=="string"?r:r.toString?r.toString():String(r)}getDateTime(e){let r=this.getValue(e);return r===null?null:r instanceof Date?r:new Date(r)}getTimeSpan(e){let r=this.getValue(e);if(r===null)return null;if(typeof r=="object"&&"hours"in r)return r;if(typeof r=="string"){let n=r.split(":");if(n.length>=2){let i=(n[2]||"0").split(".");return{hours:parseInt(n[0],10),minutes:parseInt(n[1],10),seconds:parseInt(i[0],10),microseconds:i.length>1?parseInt(i[1].padEnd(6,"0"),10):0,toString(){return r}}}}return r}getRowObject(){if(!this.currentRow)return null;let e={};for(let r=0;r<this.columnDescriptions.length;r++)e[this.columnDescriptions[r].name]=this.currentRow[r];return e}getValues(){return this.currentRow?[...this.currentRow]:[]}async close(){if(!this.closed){if(this.closed=!0,!this._isFinished&&this.generator)try{for await(let e of this.generator)if(e.type==="ReadyForQuery")break}catch{}this.releaseCallback&&(this.releaseCallback(),this.releaseCallback=null)}}get isClosed(){return this.closed}_validateOrdinal(e){if(!this.currentRow)throw new Error("No current row. Did you call read()?");if(e<0||e>=this.columnDescriptions.length)throw new Error(`Column ordinal ${e} is out of range`)}async*[Symbol.asyncIterator](){for(;await this.read();)yield this.getRowObject()}};nw.exports=XR});var ow=O((LLe,sw)=>{"use strict";var jR=class{constructor(){this.version=null;this.nullsAllowed=null;this.sizeWord=null;this.sizeWordSize=null;this.numFixedFields=null;this.numVaryingFields=null;this.fixedFieldsSize=0;this.maxRecordSize=null;this.numFields=0;this.fieldType=[];this.fieldSize=[];this.fieldTrueSize=[];this.fieldOffset=[];this.fieldPhysField=[];this.fieldLogField=[];this.fieldNullAllowed=[];this.fieldFixedSize=[];this.fieldSpringField=[];this.dateStyle=null;this.euroDates=null}clear(){this.fieldType=[],this.fieldSize=[],this.fieldTrueSize=[],this.fieldOffset=[],this.fieldPhysField=[],this.fieldLogField=[],this.fieldNullAllowed=[],this.fieldFixedSize=[],this.fieldSpringField=[]}parse(e,r){this.clear();let n=0;this.version=e.readInt32BE(n),n+=4,this.nullsAllowed=e.readInt32BE(n),n+=4,this.sizeWord=e.readInt32BE(n),n+=4,this.sizeWordSize=e.readInt32BE(n),n+=4,this.numFixedFields=e.readInt32BE(n),n+=4,this.numVaryingFields=e.readInt32BE(n),n+=4,this.fixedFieldsSize=e.readInt32BE(n),n+=4,this.maxRecordSize=e.readInt32BE(n),n+=4,this.numFields=e.readInt32BE(n),n+=4;let i=3,s=39;for(let o=0;o<this.numFields;o++){let a=e.readInt32BE(n);a===i&&r?.description?.[o]?.typeOid===702&&(a=s),this.fieldType.push(a),this.fieldSize.push(e.readInt32BE(n+4)),this.fieldTrueSize.push(e.readInt32BE(n+8)),this.fieldOffset.push(e.readInt32BE(n+12)),this.fieldPhysField.push(e.readInt32BE(n+16)),this.fieldLogField.push(e.readInt32BE(n+20)),this.fieldNullAllowed.push(e.readInt32BE(n+24)!==0),this.fieldFixedSize.push(e.readInt32BE(n+28)),this.fieldSpringField.push(e.readInt32BE(n+32)),n+=36}this.dateStyle=e.readInt32BE(n),n+=4,this.euroDates=e.readInt32BE(n)}getFieldPrecision(e){return this.fieldSize[e]>>8&127}getFieldScale(e){return this.fieldSize[e]&255}getNumericDigitCount(e){return Math.floor(this.fieldTrueSize[e]/4)}};sw.exports=jR});var Ir=O((PLe,lw)=>{"use strict";var zR=q(require("net")),Ns=q(require("fs")),aw=require("events");BR();U0();var N8=ew(),_t=HR(),O8=rw(),C8=iw(),b8=ow(),Ee=YR()("nz:connection"),KR=class t extends aw.EventEmitter{constructor(r){super();this._socket=null;this._stream=null;this._backendProcessId=0;this._backendSecretKey=0;this._commandNumber=-1;this._connected=!1;this._rowDescription=null;this._rows=[];this._tupdesc=new b8;this._tmpBuffer=Buffer.alloc(65536);this._intBuf=Buffer.allocUnsafe(65536);this._intBufStart=0;this._intBufEnd=0;this.commandTimeout=30;this.connectionTimeout=30;this._executing=!1;this._exportStream=null;this.config=r,r.connectionTimeout!==void 0&&(this.connectionTimeout=r.connectionTimeout)}static{this._streamRegistry=new Map}static registerImportStream(r,n){this._streamRegistry.set(r,n)}static unregisterImportStream(r){this._streamRegistry.delete(r)}async connect(){return new Promise((r,n)=>{if(!this.config.host)return n(new Error("Host is required"));let i=!1,s;this.connectionTimeout>0&&(s=setTimeout(()=>{i=!0,Ee("Connection timeout triggered after",this.connectionTimeout,"seconds"),this._socket&&this._socket.destroy(),n(new Error(`Connection timeout after ${this.connectionTimeout} seconds`))},this.connectionTimeout*1e3));let o=()=>{s&&(clearTimeout(s),s=void 0)};this._socket=new zR.Socket,this._socket.connect(this.config.port||5480,this.config.host,async()=>{if(i)return;Ee("Socket connected"),this._socket.setNoDelay(!0),this._stream=this._socket;let a=new N8(this._socket,this._stream,this.config.host,this.config);try{if(this._stream=await a.startup(this.config.database,this.config.user,this.config.password),i)return;o(),this._connected=!0,this._backendProcessId=a.backendProcessId,this._backendSecretKey=a.backendSecretKey,r()}catch(l){o(),this._socket.destroy(),n(l)}}),this._socket.on("error",a=>{Ee("Socket error",a),o(),this._connected?this.emit("error",a):n(a)}),this._socket.on("close",()=>{Ee("Socket closed"),o(),this._connected=!1,this.emit("close")})})}async cancel(){if(!(!this._backendProcessId||!this._backendSecretKey))return new Promise((r,n)=>{let i=new zR.Socket;i.on("error",s=>{Ee("Cancel socket error",s),n(s)}),i.connect(this.config.port||5480,this.config.host,()=>{let s=Buffer.alloc(16);_t.writeInt32(s,16,0),_t.writeInt32(s,80877102,4),_t.writeInt32(s,this._backendProcessId,8),_t.writeInt32(s,this._backendSecretKey,12),i.write(s,()=>{}),i.on("close",()=>r()),i.on("end",()=>r()),i.on("error",()=>r())})})}close(){this._socket&&(this._socket.end(),this._socket.destroy())}createCommand(r){let n=new O8(this);return r&&(n.commandText=r),n}async beginTransaction(){let r=this.createCommand("BEGIN");await this.execute(r)}async commit(){let r=this.createCommand("COMMIT");await this.execute(r)}async rollback(){let r=this.createCommand("ROLLBACK");await this.execute(r)}async _readBytes(r){if(this._intBufEnd-this._intBufStart>=r){let n=Buffer.from(this._intBuf.subarray(this._intBufStart,this._intBufStart+r));return this._intBufStart+=r,n}return this._readBytesSlow(r)}async _readBytesSlow(r){if(r>this._intBuf.length){let i=[],s=this._intBufEnd-this._intBufStart;s>0&&(i.push(Buffer.from(this._intBuf.subarray(this._intBufStart,this._intBufEnd))),this._intBufStart=0,this._intBufEnd=0);let o=r-s;for(;o>0;){let a=this._stream.read();a!==null?a.length<=o?(i.push(a),o-=a.length):(i.push(a.slice(0,o)),this._feedBuffer(a.slice(o)),o=0):await this._waitForReadable()}return Buffer.concat(i,r)}if(this._intBuf.length-this._intBufStart<r){let i=this._intBufEnd-this._intBufStart;this._intBuf.copy(this._intBuf,0,this._intBufStart,this._intBufEnd),this._intBufStart=0,this._intBufEnd=i}for(;this._intBufEnd-this._intBufStart<r;){let i=this._stream.read();if(i!==null){let s=this._intBuf.length-this._intBufEnd;i.length<=s?(i.copy(this._intBuf,this._intBufEnd),this._intBufEnd+=i.length):(i.copy(this._intBuf,this._intBufEnd,0,s),this._intBufEnd+=s,this._stream.unshift(i.slice(s)))}else await this._waitForReadable()}let n=Buffer.from(this._intBuf.subarray(this._intBufStart,this._intBufStart+r));return this._intBufStart+=r,n}async _waitForReadable(){if(!this._socket||this._socket.destroyed)throw new Error("Socket closed or destroyed during read");return new Promise((r,n)=>{let i=()=>{this._stream.removeListener("readable",s),this._stream.removeListener("close",o),this._stream.removeListener("error",a),this._stream.removeListener("end",o)},s=()=>{i(),r()},o=()=>{i(),n(new Error("Socket closed/ended during read"))},a=l=>{i(),n(l)};this._stream.once("readable",s),this._stream.once("close",o),this._stream.once("end",o),this._stream.once("error",a)})}_feedBuffer(r){this._stream.unshift(r)}async _readInt32(){await this._ensureBufferData(4);let r=this._intBuf.readInt32BE(this._intBufStart);return this._intBufStart+=4,r}async _readInt16(){await this._ensureBufferData(2);let r=this._intBuf.readInt16BE(this._intBufStart);return this._intBufStart+=2,r}async _readByte(){await this._ensureBufferData(1);let r=this._intBuf[this._intBufStart];return this._intBufStart+=1,r}async _ensureBufferData(r){if(!(this._intBufEnd-this._intBufStart>=r)){if(this._intBuf.length-this._intBufStart<r){let n=this._intBufEnd-this._intBufStart;this._intBuf.copy(this._intBuf,0,this._intBufStart,this._intBufEnd),this._intBufStart=0,this._intBufEnd=n}for(;this._intBufEnd-this._intBufStart<r;){let n=this._stream.read();if(n!==null){let i=this._intBuf.length-this._intBufEnd;n.length<=i?(n.copy(this._intBuf,this._intBufEnd),this._intBufEnd+=n.length):(n.copy(this._intBuf,this._intBufEnd,0,i),this._intBufEnd+=i,this._stream.unshift(n.slice(i)))}else await this._waitForReadable()}}}async execute(r,n=!1){let i=r.commandTimeout;if(!i||i<=0)return this._doExecute(r);let s,o=this._doExecute(r),a=new Promise((l,c)=>{s=setTimeout(async()=>{Ee("Command timeout triggered");try{await this.cancel(),c(new Error("Command execution timeout"))}catch(u){c(new Error("Command execution timeout (Cancel failed: "+u.message+")"))}},i*1e3)});try{return await Promise.race([o,a])}catch(l){throw l.message&&l.message.includes("Command execution timeout")&&o.catch(()=>{}),l}finally{clearTimeout(s)}}async _doExecute(r){if(this._executing)throw new Error("Connection is already executing a command");this._executing=!0;try{Ee("Executing:",r.commandText),this._preExecution(r.commandText);let n=null;for await(let i of this._responseGenerator(r))i.type==="ErrorResponse"&&(n=new Error("Netezza Error: "+i.message));if(n)throw n;return!0}finally{this._executing=!1}}async executeReader(r){let n=r.commandTimeout||this.commandTimeout;if(!n||n<=0)return this._doExecuteReader(r);let i,s=this._doExecuteReader(r),o=new Promise((a,l)=>{i=setTimeout(async()=>{Ee("Command timeout triggered");try{await this.cancel(),l(new Error("Command execution timeout"))}catch(c){l(new Error("Command execution timeout (Cancel failed: "+c.message+")"))}},n*1e3)});try{return await Promise.race([s,o])}catch(a){throw a.message&&a.message.includes("Command execution timeout")&&s.catch(()=>{}),a}finally{clearTimeout(i)}}async _doExecuteReader(r){if(this._executing)throw new Error("Connection is already executing a command");this._executing=!0;try{Ee("Executing Reader:",r.commandText),this._preExecution(r.commandText);let n=this._responseGenerator(r),i=[],s=await n.next(),o=null,a=null;for(;!s.done;){let l=s.value;if(l.type==="RowDescription")i=l.columns;else if(l.type==="RowDescriptionStandard"){let c=l.desc;if(c&&c.numFields>0&&i.length===0){let u=r._preparedStatement;u&&u.description&&(i=u.description)}}else if(l.type==="DataRow"||l.type==="CommandComplete"||l.type==="ReadyForQuery"){if(!o&&i.length>0){a=l;break}}else l.type==="ErrorResponse"&&(o=new Error("Netezza Error: "+l.message));s=await n.next()}if(o)throw this._executing=!1,o;return new C8(r,n,i,()=>{this._executing=!1},a)}catch(n){throw this._executing=!1,n}}_preExecution(r){let n=Buffer.from(r,"utf8"),i=Buffer.allocUnsafe(5+n.length+1);i[0]=80,this._commandNumber!==-1?(this._commandNumber++,i.writeInt32BE(this._commandNumber,1)):(i[1]=255,i[2]=255,i[3]=255,i[4]=255),this._commandNumber>1e5&&(this._commandNumber=1),n.copy(i,5),i[5+n.length]=0,this._stream.write(i)}async*_responseGenerator(r){this._rows=[],this._rowDescription=null;let n=!1;for(;!n;){let i=await this._readByte();for(;i===0;)i=await this._readByte();if(i===117){await this._handleExternalTableExportStart();continue}if(i===85){await this._handleExternalTableExportData();continue}if(i===108){await this._handleExternalTableImport();continue}if(i===120){await this._readBytes(4),Ee("Error operation cancel (Ext Tbl)");continue}if(i===101){await this._readBytes(4);let o=_t.readInt32(await this._readBytes(4)),a=(await this._readBytes(o-1)).toString("utf8");await this._readBytes(1);let l=[],c=(await this._readBytes(1))[0];for(l.push(c);c=(await this._readBytes(1))[0],c!==0;)l.push(c);let u=_t.readInt32(await this._readBytes(4));await this._consumeExternalTableLogData();continue}let s=await this._readBytes(4);if(i===ar.CommandComplete){let o=await this._readInt32(),a=await this._readBytes(o);Ee("CommandComplete:",a.toString("utf8")),yield{type:"CommandComplete",text:a.toString("utf8")};continue}if(i===ar.ReadyForQuery){n=!0,yield{type:"ReadyForQuery"};continue}if(i===76){n=!0;continue}if(!(i===48||i===65)){if(i===80){let o=await this._readInt32();await this._readBytes(o);continue}if(i===ar.ErrorResponse){let o=await this._readInt32();yield{type:"ErrorResponse",message:(await this._readBytes(o)).toString("utf8")};continue}if(i===ar.RowDescription){let o=await this._readInt32(),a=await this._readBytes(o);this._parseRowDescription(a,r),yield{type:"RowDescription",columns:this._rowDescription};continue}if(i===ar.DataRow){let o=await this._readInt32(),a=await this._readBytes(o);yield{type:"DataRow",row:this._parseDataRow(a)};continue}if(i===ar.RowDescriptionStandard){let o=await this._readInt32(),a=await this._readBytes(o);this._tupdesc.parse(a,r._preparedStatement),yield{type:"RowDescriptionStandard",desc:this._tupdesc};continue}if(i===ar.RowStandard){yield{type:"DataRow",row:await this._resReadDbosTuple(r)};continue}if(i===ar.NoticeResponse){let o=await this._readInt32(),l=(await this._readBytes(o)).toString("utf8").replace(/\0/g,"").trim();this.emit("notice",{message:l});continue}Ee("Unknown message:","0x"+i.toString(16));try{let o=await this._readInt32();o>0&&o<1e7&&await this._readBytes(o)}catch{}}}}async _consumeExternalTableLogData(){for(;;){let r=await this._readBytes(4),n=_t.readInt32(r);if(n===0)return;let i=await this._readBytes(n);Ee("ExtLog Content:",i.toString("utf8"))}}async _handleExternalTableExportStart(){await this._readBytes(4),await this._readBytes(10),await this._readBytes(16);let r=_t.readInt32(await this._readBytes(4)),i=(await this._readBytes(r)).toString("utf8");Ee("ExternalTable Export Start. File:",i);try{this._exportStream=Ns.createWriteStream(i),this._exportStream.on("error",o=>{Ee("Export Stream Error:",o)});let s=Buffer.alloc(4);await new Promise(o=>this._stream.write(s,()=>o()))}catch(s){Ee("Error opening export file:",s);let o=Buffer.alloc(4);_t.writeInt32(o,1,0),this._stream.write(o)}}async _handleExternalTableExportData(){Ee("Handle Export Data: Skipping 8 bytes...");let r=await this._readBytes(4);Ee("Skipped 4:",r.toString("hex"));let n=await this._readBytes(4);Ee("Skipped 4 (2):",n.toString("hex")),await this._consumeExternalTableData(this._exportStream),this._exportStream=null}async _consumeExternalTableData(r){for(Ee("Entering Consume Loop");;){Ee("Reading status...");let n=await this._readBytes(4),i=_t.readInt32(n);if(Ee("ExtTab Status:",i),i===_s.DATA){let s=_t.readInt32(await this._readBytes(4));Ee("Block Length:",s);let o=await this._readBytes(s);r&&r.write(o)}else if(i===_s.DONE){Ee("ExternalTable Data Done"),r&&await new Promise(s=>{if(Ee("Waiting for writeStream finish..."),r.writableFinished)return Ee("Stream already finished"),s();let o=setTimeout(()=>{Ee("Stream finish timeout! Destroying..."),r.destroy(),s()},5e3),a=()=>{Ee("Stream finished event"),clearTimeout(o),c(),s()},l=u=>{Ee("Stream error on end:",u),clearTimeout(o),c(),s()},c=()=>{r.removeListener("finish",a),r.removeListener("error",l)};r.on("finish",a),r.on("error",l),r.end()});return}else if(i===_s.ERROR){let s=_t.readInt16(await this._readBytes(2)),o=(await this._readBytes(s)).toString("utf8");Ee("ExternalTable Data Error:",o),r&&r.end();return}else{Ee("Unknown ExtTab Status:",i),r&&r.end();return}}}async _handleExternalTableImport(){await this._readBytes(8);let r=[],n=(await this._readBytes(1))[0];for(r.push(n);n!==0;)n=(await this._readBytes(1))[0],n!==0&&r.push(n);let i=Buffer.from(r).toString("utf8");Ee("ExternalTable Import Start. File:",i);let s=_t.readInt32(await this._readBytes(4));Ee("Host Version:",s);let o=Buffer.alloc(4);_t.writeInt32(o,1,0),await new Promise(E=>this._stream.write(o,()=>E())),Ee("Sent Client Version");let a=_t.readInt32(await this._readBytes(4)),l=_t.readInt32(await this._readBytes(4));if(Ee("ExtTab Import Config:",{hostVersion:s,format:a,bufSize:l}),t._streamRegistry.has(i))Ee("Using virtual import stream for:",i);else if(!Ns.existsSync(i)){Ee("Import file not found:",i);let E=Buffer.alloc(4);_t.writeInt32(E,_s.ERROR,0),this._stream.write(E);return}let c=0,u;t._streamRegistry.has(i)?(u=t._streamRegistry.get(i),c=u.byteLength||0):(c=Ns.statSync(i).size,u=Ns.createReadStream(i,{highWaterMark:l||65536}));let d=0;await new Promise((E,f)=>{u.on("data",p=>{let h=Buffer.isBuffer(p)?p:Buffer.from(p),S=Buffer.alloc(8);_t.writeInt32(S,_s.DATA,0),_t.writeInt32(S,h.length,4),this._stream.write(S),this._stream.write(h),d+=h.length,this.emit("importProgress",{bytesSent:d,totalSize:c,percentComplete:c>0?Math.round(d/c*100):0})}),u.on("end",()=>{Ee("Import Stream End");let p=Buffer.alloc(4);_t.writeInt32(p,_s.DONE,0),this._stream.write(p),E()}),u.on("error",p=>{Ee("Import Stream Error:",p);let h=Buffer.alloc(4);_t.writeInt32(h,_s.ERROR,0),this._stream.write(h);let S=p.message||"Error",T=Buffer.alloc(2);T.writeInt16BE(S.length),this._stream.write(T),this._stream.write(Buffer.from(S,"utf8")),f(p)})})}_parseRowDescription(r,n){Ee("parseRowDescription data length:",r.length,"hex:",r.toString("hex").substring(0,100));let i=0;if(r.length<2){Ee("Data too short for row description");return}let s=r.readInt16BE(i);i+=2,Ee("Column count:",s),this._rowDescription=[];for(let o=0;o<s&&i<r.length;o++){let a=i;for(;i<r.length&&r[i]!==0;)i++;let l=r.toString("utf8",a,i);if(i++,i+11>r.length){Ee("Not enough data for column",o,"at offset",i,"need 11 more, have",r.length-i);break}let c=r.readInt32BE(i);i+=4;let u=r.readInt16BE(i);i+=2;let d=r.readInt32BE(i);i+=4;let E=r[i];i+=1,this._rowDescription.push({name:l,typeOid:c,typeLen:u,typeMod:d,format:E}),Ee("Column",o,":",l,"typeOid:",c,"typeLen:",u)}n&&(n._preparedStatement={description:this._rowDescription})}_parseDataRow(r){let n=this._rowDescription.length,s=Math.ceil(n/8),o=[];for(let a=0;a<n;a++){let l=r[Math.floor(a/8)],c=7-a%8;if(!((l&1<<c)!==0)){o.push(null);continue}let d=r.readInt32BE(s);s+=4;let E=d-4;if(E<=0){o.push(null);continue}let p=this._rowDescription[a]?.typeOid,h=r.toString("utf8",s,s+E);p===1083?o.push(P0(h)):o.push(h),s+=E}return o}async _resReadDbosTuple(r){let n=this._tupdesc.numFields;await this._readBytes(4);let i=_t.readInt32(await this._readBytes(4)),s=await this._readBytes(i),o=new Array(n);for(let a=0;a<n;a++){if(this._columnIsNull(s,a)){o[a]=null;continue}let l=this._cTableFieldAt(s,a),c=this._tupdesc.fieldType[a],u=this._tupdesc.fieldSize[a];o[a]=this._parseFieldByType(l,c,u,a)}return o}_parseFieldByType(r,n,i,s){switch(n){case Ut.NzTypeChar:return r.toString("latin1",0,i).trimEnd();case Ut.NzTypeNChar:case Ut.NzTypeNVarChar:{let o=r.readInt16LE(0)-2;return r.toString("utf8",2,2+o)}case Ut.NzTypeVarChar:case Ut.NzTypeVarFixedChar:{let o=r.readInt16LE(0)-2;return r.toString("latin1",2,2+o)}case Ut.NzTypeInt8:return r.readBigInt64LE(0);case Ut.NzTypeInt:return r.readInt32LE(0);case Ut.NzTypeInt2:return r.readInt16LE(0);case Ut.NzTypeInt1:return r.readInt8(0);case Ut.NzTypeDouble:return r.readDoubleLE(0);case Ut.NzTypeFloat:return r.readFloatLE(0);case Ut.NzTypeDate:return D0(r);case Ut.NzTypeTime:return Wf(r);case Ut.NzTypeInterval:return x0(r);case Ut.NzTypeTimeTz:return v0(r,i);case Ut.NzTypeTimestamp:return L0(r);case Ut.NzTypeBool:return r[0]===1;case Ut.NzTypeNumeric:{let o=this._tupdesc.getFieldPrecision(s),a=this._tupdesc.getFieldScale(s),l=this._tupdesc.getNumericDigitCount(s);return M0(r,o,a,l)}default:return r.toString("utf8",0,i)}}_columnIsNull(r,n){if(!this._tupdesc.nullsAllowed)return!1;let i=this._tupdesc.fieldPhysField[n];return(r[2+Math.floor(i/8)]&1<<i%8)!==0}_cTableFieldAt(r,n){if(this._tupdesc.fieldFixedSize[n]!==0)return r.slice(this._tupdesc.fieldOffset[n]);let i=r.slice(this._tupdesc.fixedFieldsSize);for(let s=0;s<this._tupdesc.fieldOffset[n];s++){let o=i.readInt16LE(0);i=i.slice(o%2===0?o:o+1)}return i}};lw.exports=KR});var qf={};Et(qf,{createNzConnection:()=>y8});function y8(t){let e=Ir();return new e(t)}var Xf=G(()=>{"use strict"});var jf,xi,JR=G(()=>{"use strict";jf=q(require("vscode")),xi=class t{constructor(e){this.context=e;this._connections={};this._activeConnectionName=null;this._documentConnections=new Map;this._persistentConnections=new Map;this._keepConnectionOpen=!1;this._onDidChangeConnections=new jf.EventEmitter;this.onDidChangeConnections=this._onDidChangeConnections.event;this._onDidChangeActiveConnection=new jf.EventEmitter;this.onDidChangeActiveConnection=this._onDidChangeActiveConnection.event;this._onDidChangeDocumentConnection=new jf.EventEmitter;this.onDidChangeDocumentConnection=this._onDidChangeDocumentConnection.event;this._loadingPromise=this.loadConnections()}static{this.SERVICE_NAME="netezza-vscode-connections"}static{this.ACTIVE_CONN_KEY="netezza-active-connection"}async loadConnections(){this._activeConnectionName=this.context.globalState.get(t.ACTIVE_CONN_KEY)||null;let e=await this.context.secrets.get(t.SERVICE_NAME);if(e)try{this._connections=JSON.parse(e)}catch(r){console.error("Failed to parse connections:",r),this._connections={}}else{let r=await this.context.secrets.get("netezza-vscode");if(r)try{let n=JSON.parse(r);if(n&&n.host){let i=`Default (${n.host})`;this._connections={[i]:{...n,name:i}},this._activeConnectionName=i,await this.saveConnectionsToStorage()}}catch{}}this._onDidChangeConnections.fire()}async ensureLoaded(){await this._loadingPromise}async saveConnectionsToStorage(){await this.context.secrets.store(t.SERVICE_NAME,JSON.stringify(this._connections)),this._activeConnectionName?await this.context.globalState.update(t.ACTIVE_CONN_KEY,this._activeConnectionName):await this.context.globalState.update(t.ACTIVE_CONN_KEY,void 0)}async saveConnection(e){if(await this.ensureLoaded(),!e.name)throw new Error("Connection name is required");this._connections[e.name]=e,this._activeConnectionName||await this.setActiveConnection(e.name),await this.saveConnectionsToStorage(),this._onDidChangeConnections.fire()}async deleteConnection(e){if(await this.ensureLoaded(),this._connections[e]){if(await this.closePersistentConnection(e),delete this._connections[e],this._activeConnectionName===e){let r=Object.keys(this._connections);await this.setActiveConnection(r.length>0?r[0]:null)}await this.saveConnectionsToStorage(),this._onDidChangeConnections.fire()}}async getConnections(){return await this.ensureLoaded(),Object.values(this._connections)}async getConnection(e){return await this.ensureLoaded(),this._connections[e]}async setActiveConnection(e){await this.ensureLoaded(),this._activeConnectionName=e,await this.context.globalState.update(t.ACTIVE_CONN_KEY,e),this._onDidChangeActiveConnection.fire(e)}getActiveConnectionName(){return this._activeConnectionName}async getCurrentDatabase(e){await this.ensureLoaded();let r=e||this._activeConnectionName;return r&&this._connections[r]?.database||null}setKeepConnectionOpen(e){this._keepConnectionOpen=e,e||this.closeAllPersistentConnections()}getKeepConnectionOpen(){return this._keepConnectionOpen}async getPersistentConnection(e){let r=e||this._activeConnectionName;if(!r)throw new Error("No connection selected");let n=await this.getConnection(r);if(!n)throw new Error(`Connection '${r}' not found or invalid`);let i=this._persistentConnections.get(r);if(!i){let{createNzConnection:s}=(Xf(),gs(qf)),o=s({host:n.host,port:n.port||5480,database:n.database,user:n.user,password:n.password});await o.connect(),i=o,this._persistentConnections.set(r,i)}return i}async closePersistentConnection(e){let r=this._persistentConnections.get(e);if(r){try{await r.close()}catch(n){console.error(`Error closing connection ${e}:`,n)}this._persistentConnections.delete(e)}}async closeAllPersistentConnections(){for(let e of this._persistentConnections.keys())await this.closePersistentConnection(e)}dispose(){this.closeAllPersistentConnections(),this._onDidChangeConnections.dispose(),this._onDidChangeActiveConnection.dispose(),this._onDidChangeDocumentConnection.dispose()}getDocumentConnection(e){return this._documentConnections.get(e)}setDocumentConnection(e,r){this._documentConnections.set(e,r),this._onDidChangeDocumentConnection.fire(e)}clearDocumentConnection(e){this._documentConnections.delete(e),this._onDidChangeDocumentConnection.fire(e)}getConnectionForExecution(e){if(e){let r=this._documentConnections.get(e);if(r)return r}return this._activeConnectionName||void 0}}});var cw={};Et(cw,{QueryHistoryManager:()=>lr});var vt,QR,lr,zf=G(()=>{"use strict";vt=q(require("fs")),QR=q(require("path")),lr=class t{constructor(e){this.context=e;this.cache=[];this.initialized=!1;this.writeQueue=Promise.resolve();this.archiveQueue=Promise.resolve();if(this.context.globalStorageUri){let r=this.context.globalStorageUri.fsPath;this.historyFilePath=QR.join(r,"query-history.json"),this.archiveFilePath=QR.join(r,"query-history-archive.json");try{vt.existsSync(r)||vt.mkdirSync(r,{recursive:!0})}catch(n){console.error("[QueryHistoryManager] Error creating storage directory:",n)}}this.initialize()}static{this.STORAGE_KEY="queryHistory"}static{this.ACTIVE_LIMIT=1e3}static{this.BATCH_ARCHIVE_SIZE=100}static{this.STORAGE_VERSION=1}async initialize(){if(!this.initialized)try{let e=!1;if(this.historyFilePath&&vt.existsSync(this.historyFilePath))try{let r=await vt.promises.readFile(this.historyFilePath,"utf-8");if(!r||!r.trim())console.log("[QueryHistoryManager] File is empty, starting fresh"),this.cache=[],e=!0;else{let n=JSON.parse(r);n&&n.entries&&(this.cache=n.entries,e=!0)}}catch(r){console.warn("[QueryHistoryManager] Corrupted history file, resetting:",r),this.cache=[],e=!0;try{await this.saveToStorage(),console.log("[QueryHistoryManager] Reset corrupted file to empty state")}catch(n){console.error("[QueryHistoryManager] Failed to reset file:",n)}}if(!e){let r=this.context.globalState.get(t.STORAGE_KEY);r&&r.entries&&(this.cache=r.entries,console.log(`\u2705 Migrated ${this.cache.length} entries from globalState`),await this.saveToStorage(),await this.context.globalState.update(t.STORAGE_KEY,void 0))}this.cache.length>t.ACTIVE_LIMIT+t.BATCH_ARCHIVE_SIZE&&(console.log(`[QueryHistoryManager] Cache (${this.cache.length}) exceeds active limit. Migrating to archive...`),await this.flushToArchive()),this.initialized=!0}catch(e){console.error("\u274C Error initializing query history:",e),this.cache=[],this.initialized=!0}}async saveToStorage(){if(!this.historyFilePath)return;let e=async()=>{try{let r={entries:this.cache,version:t.STORAGE_VERSION};await vt.promises.writeFile(this.historyFilePath,JSON.stringify(r),"utf-8")}catch(r){console.error("Error saving to storage:",r)}};return this.writeQueue=this.writeQueue.then(e,e),this.writeQueue}async flushToArchive(){if(!this.archiveFilePath)return;let e=async()=>{try{if(this.cache.length-t.ACTIVE_LIMIT<=0)return;let n=this.cache.slice(t.ACTIVE_LIMIT);this.cache=this.cache.slice(0,t.ACTIVE_LIMIT),await this.saveToStorage();let i=[];if(vt.existsSync(this.archiveFilePath))try{let o=await vt.promises.readFile(this.archiveFilePath,"utf-8");if(o.trim()){let a=JSON.parse(o);i=Array.isArray(a)?a:a.entries||[]}}catch(o){console.warn("Error reading archive file, starting fresh archive append:",o)}let s=[...n,...i];await vt.promises.writeFile(this.archiveFilePath,JSON.stringify({entries:s}),"utf-8"),console.log(`[QueryHistoryManager] Archived ${n.length} items. Active: ${this.cache.length}, Archive: ${s.length}`)}catch(r){console.error("Error flushing to archive:",r)}};return this.archiveQueue=this.archiveQueue.then(e,e),this.archiveQueue}async addEntry(e,r,n,i,s,o,a){try{this.initialized||await this.initialize();let l=`${Date.now()}-${Math.random().toString(36).substring(2,9)}`,c=Date.now(),u={id:l,host:e,database:r,schema:n,query:i.trim(),timestamp:c,connectionName:s,is_favorite:!1,tags:o||"",description:a||""};this.cache.unshift(u),this.cache.length>=t.ACTIVE_LIMIT+t.BATCH_ARCHIVE_SIZE?await this.flushToArchive():await this.saveToStorage()}catch(l){console.error("Error adding query to history:",l)}}async getHistory(e,r=0){return this.initialized||await this.initialize(),e!==void 0?this.cache.slice(r,r+e):[...this.cache]}async deleteEntry(e){try{this.initialized||await this.initialize();let r=this.cache.length;this.cache=this.cache.filter(n=>n.id!==e),this.cache.length!==r&&await this.saveToStorage()}catch(r){console.error("Error deleting entry:",r)}}async clearHistory(){try{this.initialized||await this.initialize(),this.cache=[],await this.saveToStorage(),this.archiveFilePath&&vt.existsSync(this.archiveFilePath)&&await vt.promises.unlink(this.archiveFilePath),console.log("All query history cleared")}catch(e){console.error("Error clearing history:",e)}}async getStats(){try{this.initialized||await this.initialize();let e=this.cache.length,r=JSON.stringify(this.cache),n=parseFloat((r.length/(1024*1024)).toFixed(2)),i=0,s=0;if(this.archiveFilePath&&vt.existsSync(this.archiveFilePath)){let o=await vt.promises.stat(this.archiveFilePath);s=parseFloat((o.size/(1024*1024)).toFixed(2));try{if(o.size<50*1024*1024){let a=await vt.promises.readFile(this.archiveFilePath,"utf-8"),l=JSON.parse(a);l&&l.entries?i=l.entries.length:Array.isArray(l)&&(i=l.length)}else i=-1}catch(a){console.debug("[QueryHistoryManager] Error reading archive for stats:",a)}}return{activeEntries:e,archivedEntries:i===-1?99999:i,totalEntries:e+(i===-1?0:i),activeFileSizeMB:n,archiveFileSizeMB:s,totalFileSizeMB:parseFloat((n+s).toFixed(2))}}catch(e){return console.error("Error getting stats:",e),{activeEntries:0,archivedEntries:0,totalEntries:0,activeFileSizeMB:0,archiveFileSizeMB:0,totalFileSizeMB:0}}}async toggleFavorite(e){try{this.initialized||await this.initialize();let r=this.cache.find(n=>n.id===e);r&&(r.is_favorite=!r.is_favorite,await this.saveToStorage())}catch(r){console.error("Error toggling favorite:",r)}}async updateEntry(e,r,n){try{this.initialized||await this.initialize();let i=this.cache.find(s=>s.id===e);i&&(r!==void 0&&(i.tags=r),n!==void 0&&(i.description=n),await this.saveToStorage())}catch(i){console.error("Error updating entry:",i)}}async getFavorites(){return this.initialized||await this.initialize(),this.cache.filter(e=>e.is_favorite)}async getByTag(e){return this.initialized||await this.initialize(),this.cache.filter(r=>r.tags?.toLowerCase().includes(e.toLowerCase()))}async getAllTags(){this.initialized||await this.initialize();let e=new Set;return this.cache.forEach(r=>{r.tags&&r.tags.split(",").forEach(i=>{let s=i.trim();s&&e.add(s)})}),Array.from(e).sort()}async searchAll(e){this.initialized||await this.initialize();let r=e.toLowerCase();return this.cache.filter(i=>i.query.toLowerCase().includes(r)||i.host.toLowerCase().includes(r)||i.database&&i.database.toLowerCase().includes(r)||i.schema&&i.schema.toLowerCase().includes(r)||i.tags?.toLowerCase().includes(r)||i.description?.toLowerCase().includes(r))}async searchArchive(e,r=50){if(!this.archiveFilePath||!vt.existsSync(this.archiveFilePath))return[];try{let n=await vt.promises.readFile(this.archiveFilePath,"utf-8");if(!n)return[];let i=JSON.parse(n),s=Array.isArray(i)?i:i.entries||[],o=e.toLowerCase(),a=[];for(let l of s){if(a.length>=r)break;(l.query.toLowerCase().includes(o)||l.host.toLowerCase().includes(o)||l.database&&l.database.toLowerCase().includes(o))&&a.push(l)}return a}catch(n){return console.error("Error searching archive:",n),[]}}async getFilteredHistory(e,r,n,i){this.initialized||await this.initialize();let s=this.cache.filter(o=>!(e&&o.host!==e||r&&o.database!==r||n&&o.schema!==n));return i&&(s=s.slice(0,i)),s}async getArchivedHistory(){return[]}async clearArchive(){this.archiveFilePath&&vt.existsSync(this.archiveFilePath)&&await vt.promises.unlink(this.archiveFilePath)}close(){console.log("Query history manager closed")}}});function Kf(t){let e=new Set;if(!t)return e;for(let r of t.matchAll(/\$\{([A-Za-z_][A-Za-z0-9_]*)\}/g))r[1]&&e.add(r[1]);for(let r of t.matchAll(/\$([A-Za-z_][A-Za-z0-9_]*)(?!\s*\})/g)){let n=r[0],i=r.index;if(i>0&&t[i-1]==="{")continue;let s=i+n.length;s<t.length&&t[s]==="}"||r[1]&&e.add(r[1])}return e}function Ga(t){if(!t)return{sql:"",setValues:{}};let e=t.split(/\r?\n/),r=[],n={};for(let i of e){let s=i.match(/^\s*@SET\s+([A-Za-z0-9_]+)\s*=\s*(.+)$/i);if(s){let o=s[2].trim(),a=o.indexOf(";"),l="";a!==-1&&(l=o.substring(a+1).trim(),o=o.substring(0,a).trim()),o.endsWith(";")&&(o=o.slice(0,-1).trim());let c=o.match(/^'(.*)'$/s)||o.match(/^"(.*)"$/s);c&&(o=c[1]),n[s[1]]=o,l&&r.push(l)}else r.push(i)}return{sql:r.join(`
`),setValues:n}}function Jf(t,e){let r=t.replace(/\$\{([A-Za-z_][A-Za-z0-9_]*)\}/g,(i,s)=>e[s]??""),n=Object.keys(e).sort((i,s)=>s.length-i.length);for(let i of n)if(/^[A-Za-z_]/.test(i)){let s=new RegExp(`\\$${i}(?![A-Za-z0-9_])`,"g");r=r.replace(s,e[i]??"")}return r}var uw=G(()=>{"use strict"});var dw={};Et(dw,{VariableInputPanel:()=>ZR});var Wa,ZR,fw=G(()=>{"use strict";Wa=q(require("vscode")),ZR=class t{constructor(e,r,n,i){this.extensionUri=r;this.variables=n;this.defaults=i;this._disposables=[];this._panel=e,this._panel.onDidDispose(()=>this.dispose(),null,this._disposables),this._panel.webview.html=this._getHtmlForWebview(this._panel.webview),this._panel.webview.onDidReceiveMessage(s=>{switch(s.command){case"submit":this._resolvePromise&&(this._resolvePromise(s.values),this._resolvePromise=void 0),this.dispose();return;case"cancel":this._resolvePromise&&(this._resolvePromise(void 0),this._resolvePromise=void 0),this.dispose();return}},null,this._disposables)}static async show(e,r,n){if(!n)throw new Error("extensionUri is required for VariableInputPanel");t.currentPanel&&t.currentPanel.dispose();let i=Wa.window.createWebviewPanel("netezzaVariableInput","SQL Variables",Wa.ViewColumn.One,{enableScripts:!0,retainContextWhenHidden:!1});return t.currentPanel=new t(i,n,e,r),new Promise(s=>{t.currentPanel._resolvePromise=s})}dispose(){for(t.currentPanel=void 0,this._panel.dispose();this._disposables.length;){let e=this._disposables.pop();e&&e.dispose()}}_getHtmlForWebview(e){let r=e.asWebviewUri(Wa.Uri.joinPath(this.extensionUri,"netezza_icon64.png")),n=this.variables.map(i=>{let s=this.defaults?.[i]||"";return`
                <div class="form-group">
                    <label for="var_${i}">${i}</label>
                    <input 
                        type="text" 
                        id="var_${i}" 
                        name="${i}"
                        placeholder="Enter value for ${i}"
                        value="${this._escapeHtml(s)}"
                        autocomplete="off"
                    >
                </div>`}).join(`
`);return`<!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>SQL Variables</title>
            <style>
                :root {
                    --container-padding: 20px;
                    --input-padding-vertical: 6px;
                    --input-padding-horizontal: 8px;
                }
                body {
                    font-family: var(--vscode-font-family);
                    padding: 0;
                    margin: 0;
                    color: var(--vscode-foreground);
                    background-color: var(--vscode-editor-background);
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    min-height: 100vh;
                }
                
                .container {
                    width: 100%;
                    max-width: 600px;
                    padding: var(--container-padding);
                }

                .form-container {
                    background-color: var(--vscode-editorWidget-background);
                    border: 1px solid var(--vscode-widget-border);
                    padding: 30px;
                    border-radius: 4px;
                    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
                }
                
                h2 {
                    margin-top: 0;
                    margin-bottom: 25px;
                    font-size: 1.4em;
                    font-weight: 500;
                    padding-bottom: 10px;
                    border-bottom: 1px solid var(--vscode-panel-border);
                    display: flex;
                    align-items: center;
                    gap: 10px;
                }

                .logo-header {
                    width: 32px;
                    height: 32px;
                    margin-right: 10px;
                }

                .description {
                    margin-bottom: 20px;
                    color: var(--vscode-descriptionForeground);
                    font-size: 13px;
                }

                .form-group {
                    margin-bottom: 18px;
                }

                label {
                    display: block;
                    margin-bottom: 6px;
                    font-weight: 600;
                    font-size: 12px;
                    color: var(--vscode-input-placeholderForeground);
                }

                input {
                    width: 100%;
                    padding: 8px 10px;
                    box-sizing: border-box;
                    background: var(--vscode-input-background);
                    color: var(--vscode-input-foreground);
                    border: 1px solid var(--vscode-input-border);
                    border-radius: 2px;
                    font-family: inherit;
                    font-size: 13px;
                }
                
                input:focus {
                    border-color: var(--vscode-focusBorder);
                    outline: 1px solid var(--vscode-focusBorder);
                }
                
                .actions {
                    margin-top: 30px;
                    display: flex;
                    gap: 12px;
                    padding-top: 20px;
                    border-top: 1px solid var(--vscode-panel-border);
                }
                
                button {
                    background: var(--vscode-button-background);
                    color: var(--vscode-button-foreground);
                    padding: 8px 16px;
                    border: none;
                    cursor: pointer;
                    border-radius: 2px;
                    font-size: 13px;
                    font-weight: 500;
                    flex: 1;
                }
                
                button:hover {
                    background: var(--vscode-button-hoverBackground);
                }
                
                button.secondary {
                    background: var(--vscode-button-secondaryBackground);
                    color: var(--vscode-button-secondaryForeground);
                }
                
                button.secondary:hover {
                    background: var(--vscode-button-secondaryHoverBackground);
                }

                .error {
                    color: var(--vscode-errorForeground);
                    font-size: 12px;
                    margin-top: 5px;
                    display: none;
                }

                .error.visible {
                    display: block;
                }
            </style>
        </head>
        <body>
            <div class="container">
                <div class="form-container">
                    <h2>
                        <img src="${r}" class="logo-header" />
                        SQL Variables
                    </h2>
                    
                    <div class="description">
                        Enter values for the following SQL variables. All fields are required.
                    </div>

                    <form id="variableForm">
                        ${n}
                        
                        <div id="errorMessage" class="error">
                            Please fill in all required fields.
                        </div>
                        
                        <div class="actions">
                            <button type="submit" id="btnExecute">Execute</button>
                            <button type="button" class="secondary" id="btnCancel">Cancel</button>
                        </div>
                    </form>
                </div>
            </div>

            <script>
                const vscode = acquireVsCodeApi();
                const form = document.getElementById('variableForm');
                const errorMessage = document.getElementById('errorMessage');
                const btnCancel = document.getElementById('btnCancel');

                form.addEventListener('submit', (e) => {
                    e.preventDefault();
                    
                    const formData = new FormData(form);
                    const values = {};
                    let hasEmptyFields = false;

                    for (const [key, value] of formData.entries()) {
                        const trimmedValue = value.toString().trim();
                        if (trimmedValue === '') {
                            hasEmptyFields = true;
                            break;
                        }
                        values[key] = trimmedValue;
                    }

                    if (hasEmptyFields) {
                        errorMessage.classList.add('visible');
                        return;
                    }

                    errorMessage.classList.remove('visible');
                    vscode.postMessage({
                        command: 'submit',
                        values: values
                    });
                });

                btnCancel.addEventListener('click', () => {
                    vscode.postMessage({
                        command: 'cancel'
                    });
                });

                // Focus first input
                const firstInput = document.querySelector('input');
                if (firstInput) {
                    firstInput.focus();
                }

                // Clear error on input
                form.addEventListener('input', () => {
                    errorMessage.classList.remove('visible');
                });
            </script>
        </body>
        </html>`}_escapeHtml(e){let r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return e.replace(/[&<>"']/g,n=>r[n])}}});function dn(t){if(t.startsWith("file:///")){let e=t.match(/^file:\/\/\/([A-Z]):\//i);if(e)return`file:///${e[1].toLowerCase()}:${t.substring(10)}`}return t}async function eA(t){let e=dn(typeof t=="string"?t:t.toString()),r=Nr.get(e);if(console.log(`[cancelQueryByUri] Found state for ${e}: ${!!r}`),r){r.isCancelled=!0;try{console.log(`[cancelQueryByUri] Calling cmd.cancel() for ${e}`),await r.command.cancel(),qr.window.showInformationMessage("Cancellation request sent.")}catch(n){let i=n instanceof Error?n.message:String(n);console.error(`[cancelQueryByUri] Failed to cancel: ${i}`),qr.window.showErrorMessage(`Failed to cancel query: ${i}`)}}else console.warn(`[cancelQueryByUri] No active command found for ${e}`),console.log(`[cancelQueryByUri] Active keys: ${Array.from(Nr.keys()).join(", ")}`)}async function tA(t,e,r,n){let i={};if(t.size===0)return i;if(e){let a=Array.from(t).filter(l=>!(r&&r[l]!==void 0));if(a.length>0)throw new Error("Query contains variables but silent mode is enabled; cannot prompt for values. Missing: "+a.join(", "));for(let l of t)i[l]=r[l];return i}let{VariableInputPanel:s}=(fw(),gs(dw)),o=await s.show(Array.from(t),r,n);if(!o)throw new Error("Variable input cancelled by user");return o}function w8(t,e){let r;return!t&&!e&&(r=qr.window.createOutputChannel("Netezza SQL"),r.show(!0)),{outputChannel:r,logCallback:e}}function vi(t,e){t.outputChannel&&t.outputChannel.appendLine(e),t.logCallback&&t.logCallback(e)}async function L8(t,e,r){let n=Ga(t),i=n.sql,s=n.setValues,o=Kf(i);if(o.size>0){let a=new Set;for(let u of o)console.log(`[VariableDebug] Checking variable '${u}'. Value in defaults: '${s[u]}'`),s[u]===void 0&&a.add(u);let l={};a.size>0?(console.log(`[VariableDebug] Prompting for missing vars: ${Array.from(a).join(", ")}`),l=await tA(a,e,void 0,r)):console.log("[VariableDebug] All variables defined in defaults. Skipping prompt.");let c={...s,...l};i=Jf(i,c)}return i}function Ew(t,e,r){let n=e;if(!n&&r&&(n=t.getConnectionForExecution(r)),n||(n=t.getActiveConnectionName()||void 0),!n)throw new Error("No connection selected");return n}async function Qf(t,e,r){if(r)return{connection:await t.getPersistentConnection(e),shouldCloseConnection:!1};{let{createNzConnection:n}=(Xf(),gs(qf)),i=await t.getConnection(e);if(!i)throw new Error(`Connection '${e}' not found`);let s=n({host:i.host,port:i.port||5480,database:i.database,user:i.user,password:i.password});return await s.connect(),{connection:s,shouldCloseConnection:!0}}}async function hw(t,e,r,n,i){let s=Date.now(),o=1e4;try{let a=!1;do{for(;await t.read();){if(r){let l=Nr.get(dn(r));if(l&&l.isCancelled)break}if(Date.now()-s>o){a=!0;break}}if(a)break;if(Date.now()-s>o){a=!0;break}}while(await t.nextResult());if(a&&(console.warn(`consumeRestAndCancel timed out after ${o}ms, forcing cancel`),n&&i)){let l=`Cancellation is taking longer than expected. Do you want to force DROP SESSION ${n}?`;if(await qr.window.showWarningMessage(l,`Drop Session ${n}`,"Keep Waiting")===`Drop Session ${n}`)try{let u=i.getActiveConnectionName();if(u){let d=await i.getConnection(u);if(d){let{createNzConnection:E}=(Xf(),gs(qf)),f=E({host:d.host,port:d.port||5480,database:d.database,user:d.user,password:d.password});await f.connect();try{await(await f.createCommand(`DROP SESSION ${n}`).executeReader()).close(),qr.window.showInformationMessage(`Session ${n} dropped successfully.`)}finally{await f.close()}}}}catch(u){let d=u instanceof Error?u.message:String(u);qr.window.showErrorMessage(`Failed to drop session: ${d}`)}}await e.cancel()}catch(a){console.warn("Failed to cancel command after limit reached:",a)}}async function D8(t,e,r,n,i){let s=t.createCommand(e);s.commandTimeout=r,n&&Nr.set(dn(n),{command:s,isCancelled:!1,sessionId:i});try{let o=await s.executeReader(),a=[],l=[],c=2e5,u=0,d=!1;for(let E=0;E<o.fieldCount;E++)a.push({name:o.getName(E),type:o.getTypeName(E)});for(;await o.read();){if(n){let f=Nr.get(dn(n));if(f&&f.isCancelled)break}let E=[];for(let f=0;f<o.fieldCount;f++)E.push(o.getValue(f));if(l.push(E),u++,u>=c){d=!0;break}}return{columns:a,data:l,limitReached:d}}finally{n&&Nr.delete(dn(n))}}async function P8(t,e,r,n){let i="unknown",s=await e.getConnection(r);s&&new lr(t).addEntry(s.host,s.database,i,n,r).catch(a=>console.error("History log error:",a))}async function ae(t,e,r=!1,n,i,s,o,a){let l=n||new xi(t),c=l.getKeepConnectionOpen(),u=w8(r,o);vi(u,"Executing query..."),i&&vi(u,`Target Connection: ${i}`);try{let d=await L8(e,r,a||t.extensionUri),E=Ew(l,i,s);vi(u,`Using connection: ${E}`),vi(u,"Connecting to database...");let{connection:f,shouldCloseConnection:p}=await Qf(l,E,c);if(vi(u,"Connected."),u.outputChannel){let S=T=>{let m=T;u.outputChannel.appendLine(`NOTICE: ${m.message}`)};f.on("notice",S)}let h;try{let T=await f.createCommand("SELECT CURRENT_SID").executeReader();await T.read()&&(h=String(T.getValue(0))),await T.close()}catch{}try{let T=qr.workspace.getConfiguration("netezza").get("queryTimeout",1800);vi(u,"Executing SQL on server...");let{columns:m,data:R,limitReached:A}=await D8(f,d,T,s,h);return await P8(t,l,E,e),m.length>0?(vi(u,"Query completed."),{columns:m,data:R,rowsAffected:void 0,limitReached:A,sql:d}):(vi(u,"Query executed successfully (no results)."),{columns:[],data:[],rowsAffected:void 0,message:"Query executed successfully (no results).",sql:d})}finally{p&&f&&await f.close()}}catch(d){let f=`Error: ${d.message||String(d)}`;throw vi(u,f),new Error(f)}}async function cr(t,e,r=!1,n,i,s){let o=await ae(t,e,r,i,n,s);if(o.data&&o.data.length>0){let a=o.data.map(c=>{let u={};return o.columns.forEach((d,E)=>{u[d.name]=c[E]}),u});return JSON.stringify(a,(c,u)=>typeof u=="bigint"?u>=Number.MIN_SAFE_INTEGER&&u<=Number.MAX_SAFE_INTEGER?Number(u):u.toString():u,2)}else if(o.message)return o.message}function pe(t){return!t.columns||!t.data||t.data.length===0?[]:t.data.map(e=>{let r={};return t.columns.forEach((n,i)=>{let s=e[i];typeof s=="bigint"&&(s>=Number.MIN_SAFE_INTEGER&&s<=Number.MAX_SAFE_INTEGER?s=Number(s):s=s.toString()),r[n.name]=s}),r})}async function pw(t,e,r,n,i){let s=n||new xi(t),o=s.getKeepConnectionOpen(),a=[],l=Ew(s,r,i),{connection:c,shouldCloseConnection:u}=await Qf(s,l,o);try{let d=E=>{let f=E;a.push(f.message)};c.on("notice",d);try{let f=qr.workspace.getConfiguration("netezza").get("queryTimeout",1800),p=c.createCommand(e);p.commandTimeout=f,i&&Nr.set(i,{command:p,isCancelled:!1});try{let h=await p.executeReader();for(;await h.read();)if(i){let S=Nr.get(i);if(S&&S.isCancelled)break}}finally{i&&Nr.delete(i)}}finally{c.removeListener("notice",d)}}finally{u&&c&&await c.close()}return a.join(`
`)}async function Wc(t,e,r,n,i,s,o){let a=r||new xi(t),l=a.getKeepConnectionOpen(),c;i||(c=qr.window.createOutputChannel("Netezza SQL"),c.show(!0),c.appendLine(`Executing ${e.length} queries sequentially...`));let u=[],d=r?r.getConnectionForExecution(n):void 0;if(d||(d=a.getActiveConnectionName()||void 0),!d)throw c&&c.appendLine("Error: No connection selected"),i&&i("Error: No connection selected"),new Error("No connection selected");try{let E=await a.getConnection(d);if(!E)throw new Error(`Connection '${d}' not found`);c&&c.appendLine(`Using connection: ${d}`),i&&i(`Using connection: ${d}`),c&&c.appendLine("Connecting to database..."),i&&i("Connecting to database...");let{connection:f,shouldCloseConnection:p}=await Qf(a,d,l);f.on("notice",h=>{let S=h;c&&c.appendLine(`NOTICE: ${S.message}`),i&&i(`NOTICE: ${S.message}`)});try{let h="unknown",S;try{let L=await f.createCommand("SELECT CURRENT_SID").executeReader();if(await L.read()){let y=L.getValue(0);y!==void 0&&(S=String(y),i&&i(`Connected. Session ID: ${S}`))}await L.close()}catch(g){console.debug("Could not retrieve session ID:",g),i&&i("Connected.")}let T=new lr(t),m=d,R=new Set,A={};for(let g of e){let L=Ga(g);Object.assign(A,L.setValues),Kf(L.sql).forEach(P=>R.add(P))}let I=new Set;for(let g of R)A[g]===void 0&&I.add(g);let w={...A};if(I.size>0){let g=await tA(I,!1,void 0,o||t.extensionUri);Object.assign(w,g)}for(let g=0;g<e.length;g++){let L=e[g],y=`Executing query ${g+1}/${e.length}...`;c&&c.appendLine(y),i&&i(y);try{let P=Ga(L),v=Jf(P.sql,w),F=qr.workspace.getConfiguration("netezza").get("queryTimeout",1800),V=Date.now(),{results:K,error:Z}=await x8(f,v,2e5,F,n,S?String(S):void 0,a),J=Date.now()-V;if(i&&i(`Executed query ${g+1}/${e.length} in ${J}ms`),T.addEntry(E.host,E.database,h,L,m).catch(fe=>{console.error("Failed to log query to history:",fe)}),K&&K.length>0)for(let fe of K)fe.columns.length>0?u.push({columns:fe.columns,data:fe.rows,rowsAffected:void 0,limitReached:fe.limitReached,sql:v}):u.push({columns:[],data:[],rowsAffected:void 0,message:"Query executed successfully",sql:v});if(s&&K&&K.length>0){let fe=[];for(let de of K)de.columns.length>0?fe.push({columns:de.columns,data:de.rows,rowsAffected:void 0,limitReached:de.limitReached,sql:v}):fe.push({columns:[],data:[],rowsAffected:void 0,message:"Query executed successfully",sql:v});s(fe)}if(Z)throw Z}catch(P){let v=P instanceof Error?P.message:String(P);throw c&&c.appendLine(`Error in query ${g+1}: ${v}`),new Error(v)}}c&&c.appendLine("All queries completed.")}finally{p&&await f.close()}}catch(E){let p=`Error: ${E.message||String(E)}`;throw c&&c.appendLine(p),i&&i(p),new Error(p)}return u}async function x8(t,e,r,n,i,s,o){let a=t.createCommand(e);n&&n>0&&(a.commandTimeout=n),i&&Nr.set(dn(i),{command:a,isCancelled:!1,sessionId:s});try{let l=await a.executeReader(),c=[],u=!0,d;try{do{let E=[],f=[],p=0,h=!1;for(let S=0;S<l.fieldCount;S++)E.push({name:l.getName(S),type:l.getTypeName(S)});for(;await l.read();){if(i){let S=Nr.get(dn(i));if(S&&S.isCancelled)throw new Error("Query cancelled by user")}if(p<r){let S=[];for(let T=0;T<l.fieldCount;T++)S.push(l.getValue(T));f.push(S),p++}if(p>=r){h=!0,await hw(l,a,i,s,o);break}}c.push({columns:E,rows:f,limitReached:h}),u=await l.nextResult()}while(u)}catch(E){d=E instanceof Error?E:new Error(String(E))}return{results:c,error:d}}finally{i&&Nr.delete(dn(i))}}async function v8(t,e,r,n,i,s,o,a,l){let c=t.createCommand(e);i&&i>0&&(c.commandTimeout=i),s&&Nr.set(dn(s),{command:c,isCancelled:!1,sessionId:a});try{let u=await c.executeReader(),d,E=0,f=!1;try{let p=[],h=[],S=!0;for(let T=0;T<u.fieldCount;T++)p.push({name:u.getName(T),type:u.getTypeName(T)});for(;await u.read();){if(s){let m=Nr.get(dn(s));if(m&&m.isCancelled)throw new Error("Query cancelled by user")}let T=[];for(let m=0;m<u.fieldCount;m++)T.push(u.getValue(m));if(h.push(T),E++,h.length>=n&&(o({columns:S?p:[],rows:h,isFirstChunk:S,isLastChunk:!1,totalRowsSoFar:E,limitReached:!1}),h=[],S=!1),E>=r){f=!0,await hw(u,c,s,a,l);break}}if(s){let T=Nr.get(dn(s));if(T&&T.isCancelled)return{totalRows:E,limitReached:f,error:d}}o({columns:S?p:[],rows:h,isFirstChunk:S,isLastChunk:!0,totalRowsSoFar:E,limitReached:f})}catch(p){d=p instanceof Error?p:new Error(String(p))}return{totalRows:E,limitReached:f,error:d}}finally{s&&Nr.delete(dn(s))}}async function Tw(t,e,r,n,i,s,o=5e3,a){let l=r||new xi(t),c=l.getKeepConnectionOpen(),u;i||(u=qr.window.createOutputChannel("Netezza SQL"),u.show(!0),u.appendLine(`Executing ${e.length} queries with streaming...`));let d=r?r.getConnectionForExecution(n):void 0;if(d||(d=l.getActiveConnectionName()||void 0),!d){let E="Error: No connection selected";throw u&&u.appendLine(E),i&&i(E),new Error("No connection selected")}try{let E=await l.getConnection(d);if(!E)throw new Error(`Connection '${d}' not found`);let{connection:f,shouldCloseConnection:p}=await Qf(l,d,c);f.on("notice",h=>{let S=h;u&&u.appendLine(`NOTICE: ${S.message}`),i&&i(`NOTICE: ${S.message}`)});try{let h;try{let w=await f.createCommand("SELECT CURRENT_SID").executeReader();await w.read()&&(h=String(w.getValue(0)),i&&i(`Connected. Session ID: ${h}`)),await w.close()}catch(I){console.debug("Could not retrieve session ID:",I),i&&i("Connected.")}let S=new lr(t),T="unknown",m=new Set,R={};for(let I of e){let w=Ga(I);Object.assign(R,w.setValues),Kf(w.sql).forEach(L=>m.add(L))}let A={};m.size>0&&(A=await tA(m,!1,R,a||t.extensionUri));for(let I=0;I<e.length;I++){let w=e[I],g=`Executing query ${I+1}/${e.length}...`;u&&u.appendLine(g),i&&i(g);try{let L=Ga(w),y=Jf(L.sql,A),v=qr.workspace.getConfiguration("netezza").get("queryTimeout",1800),B=Date.now(),{totalRows:F,limitReached:V,error:K}=await v8(f,y,2e5,o,v,n,J=>{s&&s(I,J,y)},h,l),Z=Date.now()-B;if(i&&i(`Query ${I+1}/${e.length}: ${F} rows in ${Z}ms${V?" (limit reached)":""}`),S.addEntry(E.host,E.database,T,w,d).catch(J=>console.error("Failed to log query to history:",J)),K)throw K}catch(L){let y=L instanceof Error?L.message:String(L);throw u&&u.appendLine(`Error in query ${I+1}: ${y}`),new Error(y)}}u&&u.appendLine("All queries completed.")}finally{p&&await f.close()}}catch(E){let p=`Error: ${E.message||String(E)}`;throw u&&u.appendLine(p),i&&i(p),new Error(p)}}var qr,Nr,ur=G(()=>{"use strict";qr=q(require("vscode"));JR();zf();uw();Nr=new Map});var Aw={};Et(Aw,{SqlParser:()=>Ur});var Ur,fo=G(()=>{"use strict";Ur=class{static splitStatements(e){let r=[],n="",i=!1,s=!1,o=!1,a=!1,l=0;for(;l<e.length;){let c=e[l],u=l+1<e.length?e[l+1]:"";if(o)c===`
`&&(o=!1);else if(a){if(c==="*"&&u==="/"){a=!1,n+=c+u,l++,l++;continue}}else if(i)c==="'"&&(i=!1);else if(s)c==='"'&&(s=!1);else if(c==="-"&&u==="-")o=!0;else if(c==="/"&&u==="*")a=!0;else if(c==="'")i=!0;else if(c==='"')s=!0;else if(c===";"){n.trim()&&r.push(n.trim()),n="",l++;continue}n+=c,l++}return n.trim()&&r.push(n.trim()),r}static getStatementAtPosition(e,r){let n=0,i=e.length,s=!1,o=!1,a=!1,l=!1,c=-1;for(let d=0;d<r;d++){let E=e[d],f=d+1<e.length?e[d+1]:"";a?E===`
`&&(a=!1):l?E==="*"&&f==="/"&&(l=!1,d++):s?E==="'"&&(s=!1):o?E==='"'&&(o=!1):E==="-"&&f==="-"?a=!0:E==="/"&&f==="*"?l=!0:E==="'"?s=!0:E==='"'?o=!0:E===";"&&(c=d)}n=c+1,s=!1,o=!1,a=!1,l=!1;for(let d=n;d<e.length;d++){let E=e[d],f=d+1<e.length?e[d+1]:"";if(a)E===`
`&&(a=!1);else if(l)E==="*"&&f==="/"&&(l=!1,d++);else if(s)E==="'"&&(s=!1);else if(o)E==='"'&&(o=!1);else if(E==="-"&&f==="-")a=!0;else if(E==="/"&&f==="*")l=!0;else if(E==="'")s=!0;else if(E==='"')o=!0;else if(E===";"){i=d;break}}let u=e.substring(n,i).trim();return u?{sql:u,start:n,end:i}:null}static getObjectAtPosition(e,r){let n=c=>/[a-zA-Z0-9_."]/i.test(c),i=r;for(;i>0&&n(e[i-1]);)i--;let s=r;for(;s<e.length&&n(e[s]);)s++;let o=e.substring(i,s);if(!o)return null;let a=c=>c?c.replace(/"/g,""):void 0;if(o.includes("..")){let c=o.split("..");if(c.length===2)return{database:a(c[0]),name:a(c[1])}}let l=o.split(".");return l.length===1?{name:a(l[0])}:l.length===2?{schema:a(l[0]),name:a(l[1])}:l.length===3?{database:a(l[0]),schema:a(l[1]),name:a(l[2])}:null}}});var xw={};Et(xw,{exportToCsv:()=>fA});async function fA(t,e,r,n,i,s){let o=null;try{i&&i.report({message:"Connecting to database..."});let a={host:e.host,port:e.port||5480,database:e.database,user:e.user,password:e.password},l=Ir();o=new l(a),await o.connect(),i&&i.report({message:"Executing query..."});let c=o.createCommand(r);s&&(c.commandTimeout=s);let u=await c.executeReader();i&&i.report({message:"Writing to CSV..."});let d=Pw.createWriteStream(n,{encoding:"utf8",highWaterMark:64*1024}),E=[];for(let S=0;S<u.fieldCount;S++)E.push(u.getName(S));E.length>0&&d.write(E.map(Dw).join(",")+`
`);let f=0,p=[],h=500;for(;await u.read();){f++;let S=[];for(let T=0;T<u.fieldCount;T++)S.push(Dw(u.getValue(T)));if(p.push(S.join(",")),p.length>=h){let T=d.write(p.join(`
`)+`
`);p=[],T||await new Promise(m=>d.once("drain",m)),i&&f%1e3===0&&i.report({message:`Processed ${f} rows...`})}}p.length>0&&d.write(p.join(`
`)+`
`),d.end(),await new Promise((S,T)=>{d.on("finish",S),d.on("error",T)}),i&&i.report({message:`Completed: ${f} rows exported`})}finally{if(o)try{await o.close()}catch(a){console.error("Error closing connection:",a)}}}function Dw(t){if(t==null)return"";let e="";return typeof t=="bigint"?t>=Number.MIN_SAFE_INTEGER&&t<=Number.MAX_SAFE_INTEGER?e=Number(t).toString():e=t.toString():t instanceof Date?e=t.toISOString():typeof t=="object"&&Buffer.isBuffer(t)?e=t.toString("hex"):typeof t=="object"?e=JSON.stringify(t):e=String(t),e.includes('"')||e.includes(",")||e.includes(`
`)||e.includes("\r")?`"${e.replace(/"/g,'""')}"`:e}var Pw,EA=G(()=>{"use strict";Pw=q(require("fs"))});var Mw=O((oPe,vw)=>{var rJ=typeof process=="object"&&process&&process.platform==="win32";vw.exports=rJ?{sep:"\\"}:{sep:"/"}});var hA=O((aPe,Hw)=>{"use strict";Hw.exports=Bw;function Bw(t,e,r){t instanceof RegExp&&(t=Uw(t,r)),e instanceof RegExp&&(e=Uw(e,r));var n=Fw(t,e,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+t.length,n[1]),post:r.slice(n[1]+e.length)}}function Uw(t,e){var r=e.match(t);return r?r[0]:null}Bw.range=Fw;function Fw(t,e,r){var n,i,s,o,a,l=r.indexOf(t),c=r.indexOf(e,l+1),u=l;if(l>=0&&c>0){if(t===e)return[l,c];for(n=[],s=r.length;u>=0&&!a;)u==l?(n.push(u),l=r.indexOf(t,u+1)):n.length==1?a=[n.pop(),c]:(i=n.pop(),i<s&&(s=i,o=c),c=r.indexOf(e,u+1)),u=l<c&&l>=0?l:c;n.length&&(a=[s,o])}return a}});var Xw=O((lPe,qw)=>{var Gw=hA();qw.exports=sJ;var Ww="\0SLASH"+Math.random()+"\0",$w="\0OPEN"+Math.random()+"\0",TA="\0CLOSE"+Math.random()+"\0",kw="\0COMMA"+Math.random()+"\0",Yw="\0PERIOD"+Math.random()+"\0";function pA(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function nJ(t){return t.split("\\\\").join(Ww).split("\\{").join($w).split("\\}").join(TA).split("\\,").join(kw).split("\\.").join(Yw)}function iJ(t){return t.split(Ww).join("\\").split($w).join("{").split(TA).join("}").split(kw).join(",").split(Yw).join(".")}function Vw(t){if(!t)return[""];var e=[],r=Gw("{","}",t);if(!r)return t.split(",");var n=r.pre,i=r.body,s=r.post,o=n.split(",");o[o.length-1]+="{"+i+"}";var a=Vw(s);return s.length&&(o[o.length-1]+=a.shift(),o.push.apply(o,a)),e.push.apply(e,o),e}function sJ(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),Zc(nJ(t),!0).map(iJ)):[]}function oJ(t){return"{"+t+"}"}function aJ(t){return/^-?0\d/.test(t)}function lJ(t,e){return t<=e}function cJ(t,e){return t>=e}function Zc(t,e){var r=[],n=Gw("{","}",t);if(!n)return[t];var i=n.pre,s=n.post.length?Zc(n.post,!1):[""];if(/\$$/.test(n.pre))for(var o=0;o<s.length;o++){var a=i+"{"+n.body+"}"+s[o];r.push(a)}else{var l=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),c=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),u=l||c,d=n.body.indexOf(",")>=0;if(!u&&!d)return n.post.match(/,(?!,).*\}/)?(t=n.pre+"{"+n.body+TA+n.post,Zc(t)):[t];var E;if(u)E=n.body.split(/\.\./);else if(E=Vw(n.body),E.length===1&&(E=Zc(E[0],!1).map(oJ),E.length===1))return s.map(function(P){return n.pre+E[0]+P});var f;if(u){var p=pA(E[0]),h=pA(E[1]),S=Math.max(E[0].length,E[1].length),T=E.length==3?Math.abs(pA(E[2])):1,m=lJ,R=h<p;R&&(T*=-1,m=cJ);var A=E.some(aJ);f=[];for(var I=p;m(I,h);I+=T){var w;if(c)w=String.fromCharCode(I),w==="\\"&&(w="");else if(w=String(I),A){var g=S-w.length;if(g>0){var L=new Array(g+1).join("0");I<0?w="-"+L+w.slice(1):w=L+w}}f.push(w)}}else{f=[];for(var y=0;y<E.length;y++)f.push.apply(f,Zc(E[y],!1))}for(var y=0;y<f.length;y++)for(var o=0;o<s.length;o++){var a=i+f[y]+s[o];(!e||u||a)&&r.push(a)}}return r}});var Zw=O((uPe,gA)=>{var Qr=gA.exports=(t,e,r={})=>(gE(e),!r.nocomment&&e.charAt(0)==="#"?!1:new Ya(e,r).match(t));gA.exports=Qr;var AA=Mw();Qr.sep=AA.sep;var Ln=Symbol("globstar **");Qr.GLOBSTAR=Ln;var uJ=Xw(),jw={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},mA="[^/]",SA=mA+"*?",dJ="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",fJ="(?:(?!(?:\\/|^)\\.).)*?",Jw=t=>t.split("").reduce((e,r)=>(e[r]=!0,e),{}),zw=Jw("().*{}+?[]^$\\!"),EJ=Jw("[.("),Kw=/\/+/;Qr.filter=(t,e={})=>(r,n,i)=>Qr(r,t,e);var Cs=(t,e={})=>{let r={};return Object.keys(t).forEach(n=>r[n]=t[n]),Object.keys(e).forEach(n=>r[n]=e[n]),r};Qr.defaults=t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return Qr;let e=Qr,r=(n,i,s)=>e(n,i,Cs(t,s));return r.Minimatch=class extends e.Minimatch{constructor(i,s){super(i,Cs(t,s))}},r.Minimatch.defaults=n=>e.defaults(Cs(t,n)).Minimatch,r.filter=(n,i)=>e.filter(n,Cs(t,i)),r.defaults=n=>e.defaults(Cs(t,n)),r.makeRe=(n,i)=>e.makeRe(n,Cs(t,i)),r.braceExpand=(n,i)=>e.braceExpand(n,Cs(t,i)),r.match=(n,i,s)=>e.match(n,i,Cs(t,s)),r};Qr.braceExpand=(t,e)=>Qw(t,e);var Qw=(t,e={})=>(gE(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:uJ(t)),hJ=1024*64,gE=t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>hJ)throw new TypeError("pattern is too long")},RA=Symbol("subparse");Qr.makeRe=(t,e)=>new Ya(t,e||{}).makeRe();Qr.match=(t,e,r={})=>{let n=new Ya(e,r);return t=t.filter(i=>n.match(i)),n.options.nonull&&!t.length&&t.push(e),t};var pJ=t=>t.replace(/\\(.)/g,"$1"),TJ=t=>t.replace(/\\([^-\]])/g,"$1"),SJ=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),RJ=t=>t.replace(/[[\]\\]/g,"\\$&"),Ya=class{constructor(e,r){gE(e),r||(r={}),this.options=r,this.set=[],this.pattern=e,this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!r.partial,this.make()}debug(){}make(){let e=this.pattern,r=this.options;if(!r.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate();let n=this.globSet=this.braceExpand();r.debug&&(this.debug=(...i)=>console.error(...i)),this.debug(this.pattern,n),n=this.globParts=n.map(i=>i.split(Kw)),this.debug(this.pattern,n),n=n.map((i,s,o)=>i.map(this.parse,this)),this.debug(this.pattern,n),n=n.filter(i=>i.indexOf(!1)===-1),this.debug(this.pattern,n),this.set=n}parseNegate(){if(this.options.nonegate)return;let e=this.pattern,r=!1,n=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)r=!r,n++;n&&(this.pattern=e.slice(n)),this.negate=r}matchOne(e,r,n){var i=this.options;this.debug("matchOne",{this:this,file:e,pattern:r}),this.debug("matchOne",e.length,r.length);for(var s=0,o=0,a=e.length,l=r.length;s<a&&o<l;s++,o++){this.debug("matchOne loop");var c=r[o],u=e[s];if(this.debug(r,c,u),c===!1)return!1;if(c===Ln){this.debug("GLOBSTAR",[r,c,u]);var d=s,E=o+1;if(E===l){for(this.debug("** at the end");s<a;s++)if(e[s]==="."||e[s]===".."||!i.dot&&e[s].charAt(0)===".")return!1;return!0}for(;d<a;){var f=e[d];if(this.debug(`
globstar while`,e,d,r,E,f),this.matchOne(e.slice(d),r.slice(E),n))return this.debug("globstar found match!",d,a,f),!0;if(f==="."||f===".."||!i.dot&&f.charAt(0)==="."){this.debug("dot detected!",e,d,r,E);break}this.debug("globstar swallow a segment, and continue"),d++}return!!(n&&(this.debug(`
>>> no match, partial?`,e,d,r,E),d===a))}var p;if(typeof c=="string"?(p=u===c,this.debug("string match",c,u,p)):(p=u.match(c),this.debug("pattern match",c,u,p)),!p)return!1}if(s===a&&o===l)return!0;if(s===a)return n;if(o===l)return s===a-1&&e[s]==="";throw new Error("wtf?")}braceExpand(){return Qw(this.pattern,this.options)}parse(e,r){gE(e);let n=this.options;if(e==="**")if(n.noglobstar)e="*";else return Ln;if(e==="")return"";let i="",s=!1,o=!1,a=[],l=[],c,u=!1,d=-1,E=-1,f,p,h,S=e.charAt(0)===".",T=n.dot||S,m=()=>S?"":T?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",R=g=>g.charAt(0)==="."?"":n.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",A=()=>{if(c){switch(c){case"*":i+=SA,s=!0;break;case"?":i+=mA,s=!0;break;default:i+="\\"+c;break}this.debug("clearStateChar %j %j",c,i),c=!1}};for(let g=0,L;g<e.length&&(L=e.charAt(g));g++){if(this.debug("%s	%s %s %j",e,g,i,L),o){if(L==="/")return!1;zw[L]&&(i+="\\"),i+=L,o=!1;continue}switch(L){case"/":return!1;case"\\":if(u&&e.charAt(g+1)==="-"){i+=L;continue}A(),o=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",e,g,i,L),u){this.debug("  in class"),L==="!"&&g===E+1&&(L="^"),i+=L;continue}this.debug("call clearStateChar %j",c),A(),c=L,n.noext&&A();continue;case"(":{if(u){i+="(";continue}if(!c){i+="\\(";continue}let y={type:c,start:g-1,reStart:i.length,open:jw[c].open,close:jw[c].close};this.debug(this.pattern,"	",y),a.push(y),i+=y.open,y.start===0&&y.type!=="!"&&(S=!0,i+=R(e.slice(g+1))),this.debug("plType %j %j",c,i),c=!1;continue}case")":{let y=a[a.length-1];if(u||!y){i+="\\)";continue}a.pop(),A(),s=!0,p=y,i+=p.close,p.type==="!"&&l.push(Object.assign(p,{reEnd:i.length}));continue}case"|":{let y=a[a.length-1];if(u||!y){i+="\\|";continue}A(),i+="|",y.start===0&&y.type!=="!"&&(S=!0,i+=R(e.slice(g+1)));continue}case"[":if(A(),u){i+="\\"+L;continue}u=!0,E=g,d=i.length,i+=L;continue;case"]":if(g===E+1||!u){i+="\\"+L;continue}f=e.substring(E+1,g);try{RegExp("["+RJ(TJ(f))+"]"),i+=L}catch{i=i.substring(0,d)+"(?:$.)"}s=!0,u=!1;continue;default:A(),zw[L]&&!(L==="^"&&u)&&(i+="\\"),i+=L;break}}for(u&&(f=e.slice(E+1),h=this.parse(f,RA),i=i.substring(0,d)+"\\["+h[0],s=s||h[1]),p=a.pop();p;p=a.pop()){let g;g=i.slice(p.reStart+p.open.length),this.debug("setting tail",i,p),g=g.replace(/((?:\\{2}){0,64})(\\?)\|/g,(y,P,v)=>(v||(v="\\"),P+P+v+"|")),this.debug(`tail=%j
   %s`,g,g,p,i);let L=p.type==="*"?SA:p.type==="?"?mA:"\\"+p.type;s=!0,i=i.slice(0,p.reStart)+L+"\\("+g}A(),o&&(i+="\\\\");let I=EJ[i.charAt(0)];for(let g=l.length-1;g>-1;g--){let L=l[g],y=i.slice(0,L.reStart),P=i.slice(L.reStart,L.reEnd-8),v=i.slice(L.reEnd),B=i.slice(L.reEnd-8,L.reEnd)+v,F=y.split(")").length,V=y.split("(").length-F,K=v;for(let J=0;J<V;J++)K=K.replace(/\)[+*?]?/,"");v=K;let Z=v===""&&r!==RA?"(?:$|\\/)":"";i=y+P+v+Z+B}if(i!==""&&s&&(i="(?=.)"+i),I&&(i=m()+i),r===RA)return[i,s];if(n.nocase&&!s&&(s=e.toUpperCase()!==e.toLowerCase()),!s)return pJ(e);let w=n.nocase?"i":"";try{return Object.assign(new RegExp("^"+i+"$",w),{_glob:e,_src:i})}catch{return new RegExp("$.")}}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let r=this.options,n=r.noglobstar?SA:r.dot?dJ:fJ,i=r.nocase?"i":"",s=e.map(o=>(o=o.map(a=>typeof a=="string"?SJ(a):a===Ln?Ln:a._src).reduce((a,l)=>(a[a.length-1]===Ln&&l===Ln||a.push(l),a),[]),o.forEach((a,l)=>{a!==Ln||o[l-1]===Ln||(l===0?o.length>1?o[l+1]="(?:\\/|"+n+"\\/)?"+o[l+1]:o[l]=n:l===o.length-1?o[l-1]+="(?:\\/|"+n+")?":(o[l-1]+="(?:\\/|\\/"+n+"\\/)"+o[l+1],o[l+1]=Ln))}),o.filter(a=>a!==Ln).join("/"))).join("|");s="^(?:"+s+")$",this.negate&&(s="^(?!"+s+").*$");try{this.regexp=new RegExp(s,i)}catch{this.regexp=!1}return this.regexp}match(e,r=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&r)return!0;let n=this.options;AA.sep!=="/"&&(e=e.split(AA.sep).join("/")),e=e.split(Kw),this.debug(this.pattern,"split",e);let i=this.set;this.debug(this.pattern,"set",i);let s;for(let o=e.length-1;o>=0&&(s=e[o],!s);o--);for(let o=0;o<i.length;o++){let a=i[o],l=e;if(n.matchBase&&a.length===1&&(l=[s]),this.matchOne(l,a,r))return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate}static defaults(e){return Qr.defaults(e).Minimatch}};Qr.Minimatch=Ya});var iL=O((dPe,nL)=>{nL.exports=rL;var IA=require("fs"),{EventEmitter:AJ}=require("events"),{Minimatch:_A}=Zw(),{resolve:mJ}=require("path");function gJ(t,e){return new Promise((r,n)=>{IA.readdir(t,{withFileTypes:!0},(i,s)=>{if(i)switch(i.code){case"ENOTDIR":e?n(i):r([]);break;case"ENOTSUP":case"ENOENT":case"ENAMETOOLONG":case"UNKNOWN":r([]);break;case"ELOOP":default:n(i);break}else r(s)})})}function eL(t,e){return new Promise((r,n)=>{(e?IA.stat:IA.lstat)(t,(s,o)=>{if(s)switch(s.code){case"ENOENT":r(e?eL(t,!1):null);break;default:r(null);break}else r(o)})})}async function*tL(t,e,r,n,i,s){let o=await gJ(e+t,s);for(let a of o){let l=a.name;l===void 0&&(l=a,n=!0);let c=t+"/"+l,u=c.slice(1),d=e+"/"+u,E=null;(n||r)&&(E=await eL(d,r)),!E&&a.name!==void 0&&(E=a),E===null&&(E={isDirectory:()=>!1}),E.isDirectory()?i(u)||(yield{relative:u,absolute:d,stats:E},yield*tL(c,e,r,n,i,!1)):yield{relative:u,absolute:d,stats:E}}}async function*_J(t,e,r,n){yield*tL("",t,e,r,n,!0)}function IJ(t){return{pattern:t.pattern,dot:!!t.dot,noglobstar:!!t.noglobstar,matchBase:!!t.matchBase,nocase:!!t.nocase,ignore:t.ignore,skip:t.skip,follow:!!t.follow,stat:!!t.stat,nodir:!!t.nodir,mark:!!t.mark,silent:!!t.silent,absolute:!!t.absolute}}var _E=class extends AJ{constructor(e,r,n){if(super(),typeof r=="function"&&(n=r,r=null),this.options=IJ(r||{}),this.matchers=[],this.options.pattern){let i=Array.isArray(this.options.pattern)?this.options.pattern:[this.options.pattern];this.matchers=i.map(s=>new _A(s,{dot:this.options.dot,noglobstar:this.options.noglobstar,matchBase:this.options.matchBase,nocase:this.options.nocase}))}if(this.ignoreMatchers=[],this.options.ignore){let i=Array.isArray(this.options.ignore)?this.options.ignore:[this.options.ignore];this.ignoreMatchers=i.map(s=>new _A(s,{dot:!0}))}if(this.skipMatchers=[],this.options.skip){let i=Array.isArray(this.options.skip)?this.options.skip:[this.options.skip];this.skipMatchers=i.map(s=>new _A(s,{dot:!0}))}this.iterator=_J(mJ(e||"."),this.options.follow,this.options.stat,this._shouldSkipDirectory.bind(this)),this.paused=!1,this.inactive=!1,this.aborted=!1,n&&(this._matches=[],this.on("match",i=>this._matches.push(this.options.absolute?i.absolute:i.relative)),this.on("error",i=>n(i)),this.on("end",()=>n(null,this._matches))),setTimeout(()=>this._next(),0)}_shouldSkipDirectory(e){return this.skipMatchers.some(r=>r.match(e))}_fileMatches(e,r){let n=e+(r?"/":"");return(this.matchers.length===0||this.matchers.some(i=>i.match(n)))&&!this.ignoreMatchers.some(i=>i.match(n))&&(!this.options.nodir||!r)}_next(){!this.paused&&!this.aborted?this.iterator.next().then(e=>{if(e.done)this.emit("end");else{let r=e.value.stats.isDirectory();if(this._fileMatches(e.value.relative,r)){let n=e.value.relative,i=e.value.absolute;this.options.mark&&r&&(n+="/",i+="/"),this.options.stat?this.emit("match",{relative:n,absolute:i,stat:e.value.stats}):this.emit("match",{relative:n,absolute:i})}this._next(this.iterator)}}).catch(e=>{this.abort(),this.emit("error",e),!e.code&&!this.options.silent&&console.error(e)}):this.inactive=!0}abort(){this.aborted=!0}pause(){this.paused=!0}resume(){this.paused=!1,this.inactive&&(this.inactive=!1,this._next())}};function rL(t,e,r){return new _E(t,e,r)}rL.ReaddirGlob=_E});var oL=O((IE,sL)=>{(function(t,e){typeof IE=="object"&&typeof sL<"u"?e(IE):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e(t.async={}))})(IE,(function(t){"use strict";function e(C,...N){return(...b)=>C(...N,...b)}function r(C){return function(...N){var b=N.pop();return C.call(this,N,b)}}var n=typeof queueMicrotask=="function"&&queueMicrotask,i=typeof setImmediate=="function"&&setImmediate,s=typeof process=="object"&&typeof process.nextTick=="function";function o(C){setTimeout(C,0)}function a(C){return(N,...b)=>C(()=>N(...b))}var l;n?l=queueMicrotask:i?l=setImmediate:s?l=process.nextTick:l=o;var c=a(l);function u(C){return f(C)?function(...N){let b=N.pop(),D=C.apply(this,N);return d(D,b)}:r(function(N,b){var D;try{D=C.apply(this,N)}catch(M){return b(M)}if(D&&typeof D.then=="function")return d(D,b);b(null,D)})}function d(C,N){return C.then(b=>{E(N,null,b)},b=>{E(N,b&&(b instanceof Error||b.message)?b:new Error(b))})}function E(C,N,b){try{C(N,b)}catch(D){c(M=>{throw M},D)}}function f(C){return C[Symbol.toStringTag]==="AsyncFunction"}function p(C){return C[Symbol.toStringTag]==="AsyncGenerator"}function h(C){return typeof C[Symbol.asyncIterator]=="function"}function S(C){if(typeof C!="function")throw new Error("expected a function");return f(C)?u(C):C}function T(C,N){if(N||(N=C.length),!N)throw new Error("arity is undefined");function b(...D){return typeof D[N-1]=="function"?C.apply(this,D):new Promise((M,U)=>{D[N-1]=(H,...W)=>{if(H)return U(H);M(W.length>1?W:W[0])},C.apply(this,D)})}return b}function m(C){return function(b,...D){return T(function(U){var H=this;return C(b,(W,Y)=>{S(W).apply(H,D.concat(Y))},U)})}}function R(C,N,b,D){N=N||[];var M=[],U=0,H=S(b);return C(N,(W,Y,re)=>{var Fe=U++;H(W,(ke,He)=>{M[Fe]=He,re(ke)})},W=>{D(W,M)})}function A(C){return C&&typeof C.length=="number"&&C.length>=0&&C.length%1===0}let I={};function w(C){function N(...b){if(C!==null){var D=C;C=null,D.apply(this,b)}}return Object.assign(N,C),N}function g(C){return C[Symbol.iterator]&&C[Symbol.iterator]()}function L(C){var N=-1,b=C.length;return function(){return++N<b?{value:C[N],key:N}:null}}function y(C){var N=-1;return function(){var D=C.next();return D.done?null:(N++,{value:D.value,key:N})}}function P(C){var N=C?Object.keys(C):[],b=-1,D=N.length;return function M(){var U=N[++b];return U==="__proto__"?M():b<D?{value:C[U],key:U}:null}}function v(C){if(A(C))return L(C);var N=g(C);return N?y(N):P(C)}function B(C){return function(...N){if(C===null)throw new Error("Callback was already called.");var b=C;C=null,b.apply(this,N)}}function F(C,N,b,D){let M=!1,U=!1,H=!1,W=0,Y=0;function re(){W>=N||H||M||(H=!0,C.next().then(({value:He,done:ln})=>{if(!(U||M)){if(H=!1,ln){M=!0,W<=0&&D(null);return}W++,b(He,Y,Fe),Y++,re()}}).catch(ke))}function Fe(He,ln){if(W-=1,!U){if(He)return ke(He);if(He===!1){M=!0,U=!0;return}if(ln===I||M&&W<=0)return M=!0,D(null);re()}}function ke(He){U||(H=!1,M=!0,D(He))}re()}var V=C=>(N,b,D)=>{if(D=w(D),C<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!N)return D(null);if(p(N))return F(N,C,b,D);if(h(N))return F(N[Symbol.asyncIterator](),C,b,D);var M=v(N),U=!1,H=!1,W=0,Y=!1;function re(ke,He){if(!H)if(W-=1,ke)U=!0,D(ke);else if(ke===!1)U=!0,H=!0;else{if(He===I||U&&W<=0)return U=!0,D(null);Y||Fe()}}function Fe(){for(Y=!0;W<C&&!U;){var ke=M();if(ke===null){U=!0,W<=0&&D(null);return}W+=1,b(ke.value,ke.key,B(re))}Y=!1}Fe()};function K(C,N,b,D){return V(N)(C,S(b),D)}var Z=T(K,4);function J(C,N,b){b=w(b);var D=0,M=0,{length:U}=C,H=!1;U===0&&b(null);function W(Y,re){Y===!1&&(H=!0),H!==!0&&(Y?b(Y):(++M===U||re===I)&&b(null))}for(;D<U;D++)N(C[D],D,B(W))}function fe(C,N,b){return Z(C,1/0,N,b)}function de(C,N,b){var D=A(C)?J:fe;return D(C,S(N),b)}var Yr=T(de,3);function ZK(C,N,b){return R(Yr,C,N,b)}var Tf=T(ZK,3),Hy=m(Tf);function e4(C,N,b){return Z(C,1,N,b)}var yn=T(e4,3);function t4(C,N,b){return R(yn,C,N,b)}var bR=T(t4,3),Gy=m(bR);let Da=Symbol("promiseCallback");function Pa(){let C,N;function b(D,...M){if(D)return N(D);C(M.length>1?M:M[0])}return b[Da]=new Promise((D,M)=>{C=D,N=M}),b}function yR(C,N,b){typeof N!="number"&&(b=N,N=null),b=w(b||Pa());var D=Object.keys(C).length;if(!D)return b(null);N||(N=D);var M={},U=0,H=!1,W=!1,Y=Object.create(null),re=[],Fe=[],ke={};Object.keys(C).forEach(te=>{var oe=C[te];if(!Array.isArray(oe)){He(te,[oe]),Fe.push(te);return}var Ge=oe.slice(0,oe.length-1),at=Ge.length;if(at===0){He(te,oe),Fe.push(te);return}ke[te]=at,Ge.forEach(zt=>{if(!C[zt])throw new Error("async.auto task `"+te+"` has a non-existent dependency `"+zt+"` in "+Ge.join(", "));va(zt,()=>{at--,at===0&&He(te,oe)})})}),Ye(),ln();function He(te,oe){re.push(()=>Bc(te,oe))}function ln(){if(!H){if(re.length===0&&U===0)return b(null,M);for(;re.length&&U<N;){var te=re.shift();te()}}}function va(te,oe){var Ge=Y[te];Ge||(Ge=Y[te]=[]),Ge.push(oe)}function lo(te){var oe=Y[te]||[];oe.forEach(Ge=>Ge()),ln()}function Bc(te,oe){if(!W){var Ge=B((zt,...cn)=>{if(U--,zt===!1){H=!0;return}if(cn.length<2&&([cn]=cn),zt){var Ma={};if(Object.keys(M).forEach(co=>{Ma[co]=M[co]}),Ma[te]=cn,W=!0,Y=Object.create(null),H)return;b(zt,Ma)}else M[te]=cn,lo(te)});U++;var at=S(oe[oe.length-1]);oe.length>1?at(M,Ge):at(Ge)}}function Ye(){for(var te,oe=0;Fe.length;)te=Fe.pop(),oe++,se(te).forEach(Ge=>{--ke[Ge]===0&&Fe.push(Ge)});if(oe!==D)throw new Error("async.auto cannot execute tasks due to a recursive dependency")}function se(te){var oe=[];return Object.keys(C).forEach(Ge=>{let at=C[Ge];Array.isArray(at)&&at.indexOf(te)>=0&&oe.push(Ge)}),oe}return b[Da]}var r4=/^(?:async\s)?(?:function)?\s*(?:\w+\s*)?\(([^)]+)\)(?:\s*{)/,n4=/^(?:async\s)?\s*(?:\(\s*)?((?:[^)=\s]\s*)*)(?:\)\s*)?=>/,i4=/,/,s4=/(=.+)?(\s*)$/;function o4(C){let N="",b=0,D=C.indexOf("*/");for(;b<C.length;)if(C[b]==="/"&&C[b+1]==="/"){let M=C.indexOf(`
`,b);b=M===-1?C.length:M}else if(D!==-1&&C[b]==="/"&&C[b+1]==="*"){let M=C.indexOf("*/",b);M!==-1?(b=M+2,D=C.indexOf("*/",b)):(N+=C[b],b++)}else N+=C[b],b++;return N}function a4(C){let N=o4(C.toString()),b=N.match(r4);if(b||(b=N.match(n4)),!b)throw new Error(`could not parse args in autoInject
Source:
`+N);let[,D]=b;return D.replace(/\s/g,"").split(i4).map(M=>M.replace(s4,"").trim())}function Wy(C,N){var b={};return Object.keys(C).forEach(D=>{var M=C[D],U,H=f(M),W=!H&&M.length===1||H&&M.length===0;if(Array.isArray(M))U=[...M],M=U.pop(),b[D]=U.concat(U.length>0?Y:M);else if(W)b[D]=M;else{if(U=a4(M),M.length===0&&!H&&U.length===0)throw new Error("autoInject task functions require explicit parameters.");H||U.pop(),b[D]=U.concat(Y)}function Y(re,Fe){var ke=U.map(He=>re[He]);ke.push(Fe),S(M)(...ke)}}),yR(b,N)}class l4{constructor(){this.head=this.tail=null,this.length=0}removeLink(N){return N.prev?N.prev.next=N.next:this.head=N.next,N.next?N.next.prev=N.prev:this.tail=N.prev,N.prev=N.next=null,this.length-=1,N}empty(){for(;this.head;)this.shift();return this}insertAfter(N,b){b.prev=N,b.next=N.next,N.next?N.next.prev=b:this.tail=b,N.next=b,this.length+=1}insertBefore(N,b){b.prev=N.prev,b.next=N,N.prev?N.prev.next=b:this.head=b,N.prev=b,this.length+=1}unshift(N){this.head?this.insertBefore(this.head,N):$y(this,N)}push(N){this.tail?this.insertAfter(this.tail,N):$y(this,N)}shift(){return this.head&&this.removeLink(this.head)}pop(){return this.tail&&this.removeLink(this.tail)}toArray(){return[...this]}*[Symbol.iterator](){for(var N=this.head;N;)yield N.data,N=N.next}remove(N){for(var b=this.head;b;){var{next:D}=b;N(b)&&this.removeLink(b),b=D}return this}}function $y(C,N){C.length=1,C.head=C.tail=N}function wR(C,N,b){if(N==null)N=1;else if(N===0)throw new RangeError("Concurrency must not be zero");var D=S(C),M=0,U=[];let H={error:[],drain:[],saturated:[],unsaturated:[],empty:[]};function W(se,te){H[se].push(te)}function Y(se,te){let oe=(...Ge)=>{re(se,oe),te(...Ge)};H[se].push(oe)}function re(se,te){if(!se)return Object.keys(H).forEach(oe=>H[oe]=[]);if(!te)return H[se]=[];H[se]=H[se].filter(oe=>oe!==te)}function Fe(se,...te){H[se].forEach(oe=>oe(...te))}var ke=!1;function He(se,te,oe,Ge){if(Ge!=null&&typeof Ge!="function")throw new Error("task callback must be a function");Ye.started=!0;var at,zt;function cn(co,...Fc){if(co)return oe?zt(co):at();if(Fc.length<=1)return at(Fc[0]);at(Fc)}var Ma=Ye._createTaskItem(se,oe?cn:Ge||cn);if(te?Ye._tasks.unshift(Ma):Ye._tasks.push(Ma),ke||(ke=!0,c(()=>{ke=!1,Ye.process()})),oe||!Ge)return new Promise((co,Fc)=>{at=co,zt=Fc})}function ln(se){return function(te,...oe){M-=1;for(var Ge=0,at=se.length;Ge<at;Ge++){var zt=se[Ge],cn=U.indexOf(zt);cn===0?U.shift():cn>0&&U.splice(cn,1),zt.callback(te,...oe),te!=null&&Fe("error",te,zt.data)}M<=Ye.concurrency-Ye.buffer&&Fe("unsaturated"),Ye.idle()&&Fe("drain"),Ye.process()}}function va(se){return se.length===0&&Ye.idle()?(c(()=>Fe("drain")),!0):!1}let lo=se=>te=>{if(!te)return new Promise((oe,Ge)=>{Y(se,(at,zt)=>{if(at)return Ge(at);oe(zt)})});re(se),W(se,te)};var Bc=!1,Ye={_tasks:new l4,_createTaskItem(se,te){return{data:se,callback:te}},*[Symbol.iterator](){yield*Ye._tasks[Symbol.iterator]()},concurrency:N,payload:b,buffer:N/4,started:!1,paused:!1,push(se,te){return Array.isArray(se)?va(se)?void 0:se.map(oe=>He(oe,!1,!1,te)):He(se,!1,!1,te)},pushAsync(se,te){return Array.isArray(se)?va(se)?void 0:se.map(oe=>He(oe,!1,!0,te)):He(se,!1,!0,te)},kill(){re(),Ye._tasks.empty()},unshift(se,te){return Array.isArray(se)?va(se)?void 0:se.map(oe=>He(oe,!0,!1,te)):He(se,!0,!1,te)},unshiftAsync(se,te){return Array.isArray(se)?va(se)?void 0:se.map(oe=>He(oe,!0,!0,te)):He(se,!0,!0,te)},remove(se){Ye._tasks.remove(se)},process(){if(!Bc){for(Bc=!0;!Ye.paused&&M<Ye.concurrency&&Ye._tasks.length;){var se=[],te=[],oe=Ye._tasks.length;Ye.payload&&(oe=Math.min(oe,Ye.payload));for(var Ge=0;Ge<oe;Ge++){var at=Ye._tasks.shift();se.push(at),U.push(at),te.push(at.data)}M+=1,Ye._tasks.length===0&&Fe("empty"),M===Ye.concurrency&&Fe("saturated");var zt=B(ln(se));D(te,zt)}Bc=!1}},length(){return Ye._tasks.length},running(){return M},workersList(){return U},idle(){return Ye._tasks.length+M===0},pause(){Ye.paused=!0},resume(){Ye.paused!==!1&&(Ye.paused=!1,c(Ye.process))}};return Object.defineProperties(Ye,{saturated:{writable:!1,value:lo("saturated")},unsaturated:{writable:!1,value:lo("unsaturated")},empty:{writable:!1,value:lo("empty")},drain:{writable:!1,value:lo("drain")},error:{writable:!1,value:lo("error")}}),Ye}function ky(C,N){return wR(C,1,N)}function Yy(C,N,b){return wR(C,N,b)}function c4(C,N,b,D){D=w(D);var M=S(b);return yn(C,(U,H,W)=>{M(N,U,(Y,re)=>{N=re,W(Y)})},U=>D(U,N))}var ms=T(c4,4);function LR(...C){var N=C.map(S);return function(...b){var D=this,M=b[b.length-1];return typeof M=="function"?b.pop():M=Pa(),ms(N,b,(U,H,W)=>{H.apply(D,U.concat((Y,...re)=>{W(Y,re)}))},(U,H)=>M(U,...H)),M[Da]}}function Vy(...C){return LR(...C.reverse())}function u4(C,N,b,D){return R(V(N),C,b,D)}var Pc=T(u4,4);function d4(C,N,b,D){var M=S(b);return Pc(C,N,(U,H)=>{M(U,(W,...Y)=>W?H(W):H(W,Y))},(U,H)=>{for(var W=[],Y=0;Y<H.length;Y++)H[Y]&&(W=W.concat(...H[Y]));return D(U,W)})}var xa=T(d4,4);function f4(C,N,b){return xa(C,1/0,N,b)}var Sf=T(f4,3);function E4(C,N,b){return xa(C,1,N,b)}var Rf=T(E4,3);function qy(...C){return function(...N){var b=N.pop();return b(null,...C)}}function Pi(C,N){return(b,D,M,U)=>{var H=!1,W;let Y=S(M);b(D,(re,Fe,ke)=>{Y(re,(He,ln)=>{if(He||He===!1)return ke(He);if(C(ln)&&!W)return H=!0,W=N(!0,re),ke(null,I);ke()})},re=>{if(re)return U(re);U(null,H?W:N(!1))})}}function h4(C,N,b){return Pi(D=>D,(D,M)=>M)(Yr,C,N,b)}var Af=T(h4,3);function p4(C,N,b,D){return Pi(M=>M,(M,U)=>U)(V(N),C,b,D)}var mf=T(p4,4);function T4(C,N,b){return Pi(D=>D,(D,M)=>M)(V(1),C,N,b)}var gf=T(T4,3);function Xy(C){return(N,...b)=>S(N)(...b,(D,...M)=>{typeof console=="object"&&(D?console.error&&console.error(D):console[C]&&M.forEach(U=>console[C](U)))})}var jy=Xy("dir");function S4(C,N,b){b=B(b);var D=S(C),M=S(N),U;function H(Y,...re){if(Y)return b(Y);Y!==!1&&(U=re,M(...re,W))}function W(Y,re){if(Y)return b(Y);if(Y!==!1){if(!re)return b(null,...U);D(H)}}return W(null,!0)}var xc=T(S4,3);function zy(C,N,b){let D=S(N);return xc(C,(...M)=>{let U=M.pop();D(...M,(H,W)=>U(H,!W))},b)}function Ky(C){return(N,b,D)=>C(N,D)}function R4(C,N,b){return Yr(C,Ky(S(N)),b)}var _f=T(R4,3);function A4(C,N,b,D){return V(N)(C,Ky(S(b)),D)}var vc=T(A4,4);function m4(C,N,b){return vc(C,1,N,b)}var Mc=T(m4,3);function DR(C){return f(C)?C:function(...N){var b=N.pop(),D=!0;N.push((...M)=>{D?c(()=>b(...M)):b(...M)}),C.apply(this,N),D=!1}}function g4(C,N,b){return Pi(D=>!D,D=>!D)(Yr,C,N,b)}var If=T(g4,3);function _4(C,N,b,D){return Pi(M=>!M,M=>!M)(V(N),C,b,D)}var Nf=T(_4,4);function I4(C,N,b){return Pi(D=>!D,D=>!D)(yn,C,N,b)}var Of=T(I4,3);function N4(C,N,b,D){var M=new Array(N.length);C(N,(U,H,W)=>{b(U,(Y,re)=>{M[H]=!!re,W(Y)})},U=>{if(U)return D(U);for(var H=[],W=0;W<N.length;W++)M[W]&&H.push(N[W]);D(null,H)})}function O4(C,N,b,D){var M=[];C(N,(U,H,W)=>{b(U,(Y,re)=>{if(Y)return W(Y);re&&M.push({index:H,value:U}),W(Y)})},U=>{if(U)return D(U);D(null,M.sort((H,W)=>H.index-W.index).map(H=>H.value))})}function Cf(C,N,b,D){var M=A(N)?N4:O4;return M(C,N,S(b),D)}function C4(C,N,b){return Cf(Yr,C,N,b)}var bf=T(C4,3);function b4(C,N,b,D){return Cf(V(N),C,b,D)}var yf=T(b4,4);function y4(C,N,b){return Cf(yn,C,N,b)}var wf=T(y4,3);function w4(C,N){var b=B(N),D=S(DR(C));function M(U){if(U)return b(U);U!==!1&&D(M)}return M()}var Jy=T(w4,2);function L4(C,N,b,D){var M=S(b);return Pc(C,N,(U,H)=>{M(U,(W,Y)=>W?H(W):H(W,{key:Y,val:U}))},(U,H)=>{for(var W={},{hasOwnProperty:Y}=Object.prototype,re=0;re<H.length;re++)if(H[re]){var{key:Fe}=H[re],{val:ke}=H[re];Y.call(W,Fe)?W[Fe].push(ke):W[Fe]=[ke]}return D(U,W)})}var Lf=T(L4,4);function Qy(C,N,b){return Lf(C,1/0,N,b)}function Zy(C,N,b){return Lf(C,1,N,b)}var e0=Xy("log");function D4(C,N,b,D){D=w(D);var M={},U=S(b);return V(N)(C,(H,W,Y)=>{U(H,W,(re,Fe)=>{if(re)return Y(re);M[W]=Fe,Y(re)})},H=>D(H,M))}var Df=T(D4,4);function t0(C,N,b){return Df(C,1/0,N,b)}function r0(C,N,b){return Df(C,1,N,b)}function n0(C,N=b=>b){var b=Object.create(null),D=Object.create(null),M=S(C),U=r((H,W)=>{var Y=N(...H);Y in b?c(()=>W(null,...b[Y])):Y in D?D[Y].push(W):(D[Y]=[W],M(...H,(re,...Fe)=>{re||(b[Y]=Fe);var ke=D[Y];delete D[Y];for(var He=0,ln=ke.length;He<ln;He++)ke[He](re,...Fe)}))});return U.memo=b,U.unmemoized=C,U}var Pf;s?Pf=process.nextTick:i?Pf=setImmediate:Pf=o;var i0=a(Pf),PR=T((C,N,b)=>{var D=A(N)?[]:{};C(N,(M,U,H)=>{S(M)((W,...Y)=>{Y.length<2&&([Y]=Y),D[U]=Y,H(W)})},M=>b(M,D))},3);function s0(C,N){return PR(Yr,C,N)}function o0(C,N,b){return PR(V(N),C,b)}function xR(C,N){var b=S(C);return wR((D,M)=>{b(D[0],M)},N,1)}class P4{constructor(){this.heap=[],this.pushCount=Number.MIN_SAFE_INTEGER}get length(){return this.heap.length}empty(){return this.heap=[],this}percUp(N){let b;for(;N>0&&vR(this.heap[N],this.heap[b=a0(N)]);){let D=this.heap[N];this.heap[N]=this.heap[b],this.heap[b]=D,N=b}}percDown(N){let b;for(;(b=x4(N))<this.heap.length&&(b+1<this.heap.length&&vR(this.heap[b+1],this.heap[b])&&(b=b+1),!vR(this.heap[N],this.heap[b]));){let D=this.heap[N];this.heap[N]=this.heap[b],this.heap[b]=D,N=b}}push(N){N.pushCount=++this.pushCount,this.heap.push(N),this.percUp(this.heap.length-1)}unshift(N){return this.heap.push(N)}shift(){let[N]=this.heap;return this.heap[0]=this.heap[this.heap.length-1],this.heap.pop(),this.percDown(0),N}toArray(){return[...this]}*[Symbol.iterator](){for(let N=0;N<this.heap.length;N++)yield this.heap[N].data}remove(N){let b=0;for(let D=0;D<this.heap.length;D++)N(this.heap[D])||(this.heap[b]=this.heap[D],b++);this.heap.splice(b);for(let D=a0(this.heap.length-1);D>=0;D--)this.percDown(D);return this}}function x4(C){return(C<<1)+1}function a0(C){return(C+1>>1)-1}function vR(C,N){return C.priority!==N.priority?C.priority<N.priority:C.pushCount<N.pushCount}function l0(C,N){var b=xR(C,N),{push:D,pushAsync:M}=b;b._tasks=new P4,b._createTaskItem=({data:H,priority:W},Y)=>({data:H,priority:W,callback:Y});function U(H,W){return Array.isArray(H)?H.map(Y=>({data:Y,priority:W})):{data:H,priority:W}}return b.push=function(H,W=0,Y){return D(U(H,W),Y)},b.pushAsync=function(H,W=0,Y){return M(U(H,W),Y)},delete b.unshift,delete b.unshiftAsync,b}function v4(C,N){if(N=w(N),!Array.isArray(C))return N(new TypeError("First argument to race must be an array of functions"));if(!C.length)return N();for(var b=0,D=C.length;b<D;b++)S(C[b])(N)}var c0=T(v4,2);function xf(C,N,b,D){var M=[...C].reverse();return ms(M,N,b,D)}function vf(C){var N=S(C);return r(function(D,M){return D.push((U,...H)=>{let W={};if(U&&(W.error=U),H.length>0){var Y=H;H.length<=1&&([Y]=H),W.value=Y}M(null,W)}),N.apply(this,D)})}function u0(C){var N;return Array.isArray(C)?N=C.map(vf):(N={},Object.keys(C).forEach(b=>{N[b]=vf.call(this,C[b])})),N}function MR(C,N,b,D){let M=S(b);return Cf(C,N,(U,H)=>{M(U,(W,Y)=>{H(W,!Y)})},D)}function M4(C,N,b){return MR(Yr,C,N,b)}var d0=T(M4,3);function U4(C,N,b,D){return MR(V(N),C,b,D)}var f0=T(U4,4);function B4(C,N,b){return MR(yn,C,N,b)}var E0=T(B4,3);function h0(C){return function(){return C}}let UR=5,p0=0;function Mf(C,N,b){var D={times:UR,intervalFunc:h0(p0)};if(arguments.length<3&&typeof C=="function"?(b=N||Pa(),N=C):(F4(D,C),b=b||Pa()),typeof N!="function")throw new Error("Invalid arguments for async.retry");var M=S(N),U=1;function H(){M((W,...Y)=>{W!==!1&&(W&&U++<D.times&&(typeof D.errorFilter!="function"||D.errorFilter(W))?setTimeout(H,D.intervalFunc(U-1)):b(W,...Y))})}return H(),b[Da]}function F4(C,N){if(typeof N=="object")C.times=+N.times||UR,C.intervalFunc=typeof N.interval=="function"?N.interval:h0(+N.interval||p0),C.errorFilter=N.errorFilter;else if(typeof N=="number"||typeof N=="string")C.times=+N||UR;else throw new Error("Invalid arguments for async.retry")}function T0(C,N){N||(N=C,C=null);let b=C&&C.arity||N.length;f(N)&&(b+=1);var D=S(N);return r((M,U)=>{(M.length<b-1||U==null)&&(M.push(U),U=Pa());function H(W){D(...M,W)}return C?Mf(C,H,U):Mf(H,U),U[Da]})}function S0(C,N){return PR(yn,C,N)}function H4(C,N,b){return Pi(Boolean,D=>D)(Yr,C,N,b)}var Uf=T(H4,3);function G4(C,N,b,D){return Pi(Boolean,M=>M)(V(N),C,b,D)}var Bf=T(G4,4);function W4(C,N,b){return Pi(Boolean,D=>D)(yn,C,N,b)}var Ff=T(W4,3);function $4(C,N,b){var D=S(N);return Tf(C,(U,H)=>{D(U,(W,Y)=>{if(W)return H(W);H(W,{value:U,criteria:Y})})},(U,H)=>{if(U)return b(U);b(null,H.sort(M).map(W=>W.value))});function M(U,H){var W=U.criteria,Y=H.criteria;return W<Y?-1:W>Y?1:0}}var R0=T($4,3);function A0(C,N,b){var D=S(C);return r((M,U)=>{var H=!1,W;function Y(){var re=C.name||"anonymous",Fe=new Error('Callback function "'+re+'" timed out.');Fe.code="ETIMEDOUT",b&&(Fe.info=b),H=!0,U(Fe)}M.push((...re)=>{H||(U(...re),clearTimeout(W))}),W=setTimeout(Y,N),D(...M)})}function k4(C){for(var N=Array(C);C--;)N[C]=C;return N}function Hf(C,N,b,D){var M=S(b);return Pc(k4(C),N,M,D)}function m0(C,N,b){return Hf(C,1/0,N,b)}function g0(C,N,b){return Hf(C,1,N,b)}function _0(C,N,b,D){arguments.length<=3&&typeof N=="function"&&(D=b,b=N,N=Array.isArray(C)?[]:{}),D=w(D||Pa());var M=S(b);return Yr(C,(U,H,W)=>{M(N,U,H,W)},U=>D(U,N)),D[Da]}function Y4(C,N){var b=null,D;return Mc(C,(M,U)=>{S(M)((H,...W)=>{if(H===!1)return U(H);W.length<2?[D]=W:D=W,b=H,U(H?null:{})})},()=>N(b,D))}var I0=T(Y4);function N0(C){return(...N)=>(C.unmemoized||C)(...N)}function V4(C,N,b){b=B(b);var D=S(N),M=S(C),U=[];function H(Y,...re){if(Y)return b(Y);U=re,Y!==!1&&M(W)}function W(Y,re){if(Y)return b(Y);if(Y!==!1){if(!re)return b(null,...U);D(H)}}return M(W)}var Uc=T(V4,3);function O0(C,N,b){let D=S(C);return Uc(M=>D((U,H)=>M(U,!H)),N,b)}function q4(C,N){if(N=w(N),!Array.isArray(C))return N(new Error("First argument to waterfall must be an array of functions"));if(!C.length)return N();var b=0;function D(U){var H=S(C[b++]);H(...U,B(M))}function M(U,...H){if(U!==!1){if(U||b===C.length)return N(U,...H);D(H)}}D([])}var C0=T(q4),X4={apply:e,applyEach:Hy,applyEachSeries:Gy,asyncify:u,auto:yR,autoInject:Wy,cargo:ky,cargoQueue:Yy,compose:Vy,concat:Sf,concatLimit:xa,concatSeries:Rf,constant:qy,detect:Af,detectLimit:mf,detectSeries:gf,dir:jy,doUntil:zy,doWhilst:xc,each:_f,eachLimit:vc,eachOf:Yr,eachOfLimit:Z,eachOfSeries:yn,eachSeries:Mc,ensureAsync:DR,every:If,everyLimit:Nf,everySeries:Of,filter:bf,filterLimit:yf,filterSeries:wf,forever:Jy,groupBy:Qy,groupByLimit:Lf,groupBySeries:Zy,log:e0,map:Tf,mapLimit:Pc,mapSeries:bR,mapValues:t0,mapValuesLimit:Df,mapValuesSeries:r0,memoize:n0,nextTick:i0,parallel:s0,parallelLimit:o0,priorityQueue:l0,queue:xR,race:c0,reduce:ms,reduceRight:xf,reflect:vf,reflectAll:u0,reject:d0,rejectLimit:f0,rejectSeries:E0,retry:Mf,retryable:T0,seq:LR,series:S0,setImmediate:c,some:Uf,someLimit:Bf,someSeries:Ff,sortBy:R0,timeout:A0,times:m0,timesLimit:Hf,timesSeries:g0,transform:_0,tryEach:I0,unmemoize:N0,until:O0,waterfall:C0,whilst:Uc,all:If,allLimit:Nf,allSeries:Of,any:Uf,anyLimit:Bf,anySeries:Ff,find:Af,findLimit:mf,findSeries:gf,flatMap:Sf,flatMapLimit:xa,flatMapSeries:Rf,forEach:_f,forEachSeries:Mc,forEachLimit:vc,forEachOf:Yr,forEachOfSeries:yn,forEachOfLimit:Z,inject:ms,foldl:ms,foldr:xf,select:bf,selectLimit:yf,selectSeries:wf,wrapSync:u,during:Uc,doDuring:xc};t.all=If,t.allLimit=Nf,t.allSeries=Of,t.any=Uf,t.anyLimit=Bf,t.anySeries=Ff,t.apply=e,t.applyEach=Hy,t.applyEachSeries=Gy,t.asyncify=u,t.auto=yR,t.autoInject=Wy,t.cargo=ky,t.cargoQueue=Yy,t.compose=Vy,t.concat=Sf,t.concatLimit=xa,t.concatSeries=Rf,t.constant=qy,t.default=X4,t.detect=Af,t.detectLimit=mf,t.detectSeries=gf,t.dir=jy,t.doDuring=xc,t.doUntil=zy,t.doWhilst=xc,t.during=Uc,t.each=_f,t.eachLimit=vc,t.eachOf=Yr,t.eachOfLimit=Z,t.eachOfSeries=yn,t.eachSeries=Mc,t.ensureAsync=DR,t.every=If,t.everyLimit=Nf,t.everySeries=Of,t.filter=bf,t.filterLimit=yf,t.filterSeries=wf,t.find=Af,t.findLimit=mf,t.findSeries=gf,t.flatMap=Sf,t.flatMapLimit=xa,t.flatMapSeries=Rf,t.foldl=ms,t.foldr=xf,t.forEach=_f,t.forEachLimit=vc,t.forEachOf=Yr,t.forEachOfLimit=Z,t.forEachOfSeries=yn,t.forEachSeries=Mc,t.forever=Jy,t.groupBy=Qy,t.groupByLimit=Lf,t.groupBySeries=Zy,t.inject=ms,t.log=e0,t.map=Tf,t.mapLimit=Pc,t.mapSeries=bR,t.mapValues=t0,t.mapValuesLimit=Df,t.mapValuesSeries=r0,t.memoize=n0,t.nextTick=i0,t.parallel=s0,t.parallelLimit=o0,t.priorityQueue=l0,t.queue=xR,t.race=c0,t.reduce=ms,t.reduceRight=xf,t.reflect=vf,t.reflectAll=u0,t.reject=d0,t.rejectLimit=f0,t.rejectSeries=E0,t.retry=Mf,t.retryable=T0,t.select=bf,t.selectLimit=yf,t.selectSeries=wf,t.seq=LR,t.series=S0,t.setImmediate=c,t.some=Uf,t.someLimit=Bf,t.someSeries=Ff,t.sortBy=R0,t.timeout=A0,t.times=m0,t.timesLimit=Hf,t.timesSeries=g0,t.transform=_0,t.tryEach=I0,t.unmemoize=N0,t.until=O0,t.waterfall=C0,t.whilst=Uc,t.wrapSync=u,Object.defineProperty(t,"__esModule",{value:!0})}))});var lL=O((fPe,aL)=>{var bs=require("constants"),NJ=process.cwd,NE=null,OJ=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return NE||(NE=NJ.call(process)),NE};try{process.cwd()}catch{}typeof process.chdir=="function"&&(NA=process.chdir,process.chdir=function(t){NE=null,NA.call(process,t)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,NA));var NA;aL.exports=CJ;function CJ(t){bs.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&e(t),t.lutimes||r(t),t.chown=s(t.chown),t.fchown=s(t.fchown),t.lchown=s(t.lchown),t.chmod=n(t.chmod),t.fchmod=n(t.fchmod),t.lchmod=n(t.lchmod),t.chownSync=o(t.chownSync),t.fchownSync=o(t.fchownSync),t.lchownSync=o(t.lchownSync),t.chmodSync=i(t.chmodSync),t.fchmodSync=i(t.fchmodSync),t.lchmodSync=i(t.lchmodSync),t.stat=a(t.stat),t.fstat=a(t.fstat),t.lstat=a(t.lstat),t.statSync=l(t.statSync),t.fstatSync=l(t.fstatSync),t.lstatSync=l(t.lstatSync),t.chmod&&!t.lchmod&&(t.lchmod=function(u,d,E){E&&process.nextTick(E)},t.lchmodSync=function(){}),t.chown&&!t.lchown&&(t.lchown=function(u,d,E,f){f&&process.nextTick(f)},t.lchownSync=function(){}),OJ==="win32"&&(t.rename=typeof t.rename!="function"?t.rename:(function(u){function d(E,f,p){var h=Date.now(),S=0;u(E,f,function T(m){if(m&&(m.code==="EACCES"||m.code==="EPERM"||m.code==="EBUSY")&&Date.now()-h<6e4){setTimeout(function(){t.stat(f,function(R,A){R&&R.code==="ENOENT"?u(E,f,T):p(m)})},S),S<100&&(S+=10);return}p&&p(m)})}return Object.setPrototypeOf&&Object.setPrototypeOf(d,u),d})(t.rename)),t.read=typeof t.read!="function"?t.read:(function(u){function d(E,f,p,h,S,T){var m;if(T&&typeof T=="function"){var R=0;m=function(A,I,w){if(A&&A.code==="EAGAIN"&&R<10)return R++,u.call(t,E,f,p,h,S,m);T.apply(this,arguments)}}return u.call(t,E,f,p,h,S,m)}return Object.setPrototypeOf&&Object.setPrototypeOf(d,u),d})(t.read),t.readSync=typeof t.readSync!="function"?t.readSync:(function(u){return function(d,E,f,p,h){for(var S=0;;)try{return u.call(t,d,E,f,p,h)}catch(T){if(T.code==="EAGAIN"&&S<10){S++;continue}throw T}}})(t.readSync);function e(u){u.lchmod=function(d,E,f){u.open(d,bs.O_WRONLY|bs.O_SYMLINK,E,function(p,h){if(p){f&&f(p);return}u.fchmod(h,E,function(S){u.close(h,function(T){f&&f(S||T)})})})},u.lchmodSync=function(d,E){var f=u.openSync(d,bs.O_WRONLY|bs.O_SYMLINK,E),p=!0,h;try{h=u.fchmodSync(f,E),p=!1}finally{if(p)try{u.closeSync(f)}catch{}else u.closeSync(f)}return h}}function r(u){bs.hasOwnProperty("O_SYMLINK")&&u.futimes?(u.lutimes=function(d,E,f,p){u.open(d,bs.O_SYMLINK,function(h,S){if(h){p&&p(h);return}u.futimes(S,E,f,function(T){u.close(S,function(m){p&&p(T||m)})})})},u.lutimesSync=function(d,E,f){var p=u.openSync(d,bs.O_SYMLINK),h,S=!0;try{h=u.futimesSync(p,E,f),S=!1}finally{if(S)try{u.closeSync(p)}catch{}else u.closeSync(p)}return h}):u.futimes&&(u.lutimes=function(d,E,f,p){p&&process.nextTick(p)},u.lutimesSync=function(){})}function n(u){return u&&function(d,E,f){return u.call(t,d,E,function(p){c(p)&&(p=null),f&&f.apply(this,arguments)})}}function i(u){return u&&function(d,E){try{return u.call(t,d,E)}catch(f){if(!c(f))throw f}}}function s(u){return u&&function(d,E,f,p){return u.call(t,d,E,f,function(h){c(h)&&(h=null),p&&p.apply(this,arguments)})}}function o(u){return u&&function(d,E,f){try{return u.call(t,d,E,f)}catch(p){if(!c(p))throw p}}}function a(u){return u&&function(d,E,f){typeof E=="function"&&(f=E,E=null);function p(h,S){S&&(S.uid<0&&(S.uid+=4294967296),S.gid<0&&(S.gid+=4294967296)),f&&f.apply(this,arguments)}return E?u.call(t,d,E,p):u.call(t,d,p)}}function l(u){return u&&function(d,E){var f=E?u.call(t,d,E):u.call(t,d);return f&&(f.uid<0&&(f.uid+=4294967296),f.gid<0&&(f.gid+=4294967296)),f}}function c(u){if(!u||u.code==="ENOSYS")return!0;var d=!process.getuid||process.getuid()!==0;return!!(d&&(u.code==="EINVAL"||u.code==="EPERM"))}}});var dL=O((EPe,uL)=>{var cL=require("stream").Stream;uL.exports=bJ;function bJ(t){return{ReadStream:e,WriteStream:r};function e(n,i){if(!(this instanceof e))return new e(n,i);cL.call(this);var s=this;this.path=n,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,i=i||{};for(var o=Object.keys(i),a=0,l=o.length;a<l;a++){var c=o[a];this[c]=i[c]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){s._read()});return}t.open(this.path,this.flags,this.mode,function(u,d){if(u){s.emit("error",u),s.readable=!1;return}s.fd=d,s.emit("open",d),s._read()})}function r(n,i){if(!(this instanceof r))return new r(n,i);cL.call(this),this.path=n,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,i=i||{};for(var s=Object.keys(i),o=0,a=s.length;o<a;o++){var l=s[o];this[l]=i[l]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=t.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}});var EL=O((hPe,fL)=>{"use strict";fL.exports=wJ;var yJ=Object.getPrototypeOf||function(t){return t.__proto__};function wJ(t){if(t===null||typeof t!="object")return t;if(t instanceof Object)var e={__proto__:yJ(t)};else var e=Object.create(null);return Object.getOwnPropertyNames(t).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}});var yA=O((pPe,bA)=>{var ht=require("fs"),LJ=lL(),DJ=dL(),PJ=EL(),OE=require("util"),fr,bE;typeof Symbol=="function"&&typeof Symbol.for=="function"?(fr=Symbol.for("graceful-fs.queue"),bE=Symbol.for("graceful-fs.previous")):(fr="___graceful-fs.queue",bE="___graceful-fs.previous");function xJ(){}function TL(t,e){Object.defineProperty(t,fr,{get:function(){return e}})}var po=xJ;OE.debuglog?po=OE.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(po=function(){var t=OE.format.apply(OE,arguments);t="GFS4: "+t.split(/\n/).join(`
GFS4: `),console.error(t)});ht[fr]||(hL=global[fr]||[],TL(ht,hL),ht.close=(function(t){function e(r,n){return t.call(ht,r,function(i){i||pL(),typeof n=="function"&&n.apply(this,arguments)})}return Object.defineProperty(e,bE,{value:t}),e})(ht.close),ht.closeSync=(function(t){function e(r){t.apply(ht,arguments),pL()}return Object.defineProperty(e,bE,{value:t}),e})(ht.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){po(ht[fr]),require("assert").equal(ht[fr].length,0)}));var hL;global[fr]||TL(global,ht[fr]);bA.exports=OA(PJ(ht));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!ht.__patched&&(bA.exports=OA(ht),ht.__patched=!0);function OA(t){LJ(t),t.gracefulify=OA,t.createReadStream=I,t.createWriteStream=w;var e=t.readFile;t.readFile=r;function r(y,P,v){return typeof P=="function"&&(v=P,P=null),B(y,P,v);function B(F,V,K,Z){return e(F,V,function(J){J&&(J.code==="EMFILE"||J.code==="ENFILE")?Va([B,[F,V,K],J,Z||Date.now(),Date.now()]):typeof K=="function"&&K.apply(this,arguments)})}}var n=t.writeFile;t.writeFile=i;function i(y,P,v,B){return typeof v=="function"&&(B=v,v=null),F(y,P,v,B);function F(V,K,Z,J,fe){return n(V,K,Z,function(de){de&&(de.code==="EMFILE"||de.code==="ENFILE")?Va([F,[V,K,Z,J],de,fe||Date.now(),Date.now()]):typeof J=="function"&&J.apply(this,arguments)})}}var s=t.appendFile;s&&(t.appendFile=o);function o(y,P,v,B){return typeof v=="function"&&(B=v,v=null),F(y,P,v,B);function F(V,K,Z,J,fe){return s(V,K,Z,function(de){de&&(de.code==="EMFILE"||de.code==="ENFILE")?Va([F,[V,K,Z,J],de,fe||Date.now(),Date.now()]):typeof J=="function"&&J.apply(this,arguments)})}}var a=t.copyFile;a&&(t.copyFile=l);function l(y,P,v,B){return typeof v=="function"&&(B=v,v=0),F(y,P,v,B);function F(V,K,Z,J,fe){return a(V,K,Z,function(de){de&&(de.code==="EMFILE"||de.code==="ENFILE")?Va([F,[V,K,Z,J],de,fe||Date.now(),Date.now()]):typeof J=="function"&&J.apply(this,arguments)})}}var c=t.readdir;t.readdir=d;var u=/^v[0-5]\./;function d(y,P,v){typeof P=="function"&&(v=P,P=null);var B=u.test(process.version)?function(K,Z,J,fe){return c(K,F(K,Z,J,fe))}:function(K,Z,J,fe){return c(K,Z,F(K,Z,J,fe))};return B(y,P,v);function F(V,K,Z,J){return function(fe,de){fe&&(fe.code==="EMFILE"||fe.code==="ENFILE")?Va([B,[V,K,Z],fe,J||Date.now(),Date.now()]):(de&&de.sort&&de.sort(),typeof Z=="function"&&Z.call(this,fe,de))}}}if(process.version.substr(0,4)==="v0.8"){var E=DJ(t);T=E.ReadStream,R=E.WriteStream}var f=t.ReadStream;f&&(T.prototype=Object.create(f.prototype),T.prototype.open=m);var p=t.WriteStream;p&&(R.prototype=Object.create(p.prototype),R.prototype.open=A),Object.defineProperty(t,"ReadStream",{get:function(){return T},set:function(y){T=y},enumerable:!0,configurable:!0}),Object.defineProperty(t,"WriteStream",{get:function(){return R},set:function(y){R=y},enumerable:!0,configurable:!0});var h=T;Object.defineProperty(t,"FileReadStream",{get:function(){return h},set:function(y){h=y},enumerable:!0,configurable:!0});var S=R;Object.defineProperty(t,"FileWriteStream",{get:function(){return S},set:function(y){S=y},enumerable:!0,configurable:!0});function T(y,P){return this instanceof T?(f.apply(this,arguments),this):T.apply(Object.create(T.prototype),arguments)}function m(){var y=this;L(y.path,y.flags,y.mode,function(P,v){P?(y.autoClose&&y.destroy(),y.emit("error",P)):(y.fd=v,y.emit("open",v),y.read())})}function R(y,P){return this instanceof R?(p.apply(this,arguments),this):R.apply(Object.create(R.prototype),arguments)}function A(){var y=this;L(y.path,y.flags,y.mode,function(P,v){P?(y.destroy(),y.emit("error",P)):(y.fd=v,y.emit("open",v))})}function I(y,P){return new t.ReadStream(y,P)}function w(y,P){return new t.WriteStream(y,P)}var g=t.open;t.open=L;function L(y,P,v,B){return typeof v=="function"&&(B=v,v=null),F(y,P,v,B);function F(V,K,Z,J,fe){return g(V,K,Z,function(de,Yr){de&&(de.code==="EMFILE"||de.code==="ENFILE")?Va([F,[V,K,Z,J],de,fe||Date.now(),Date.now()]):typeof J=="function"&&J.apply(this,arguments)})}}return t}function Va(t){po("ENQUEUE",t[0].name,t[1]),ht[fr].push(t),CA()}var CE;function pL(){for(var t=Date.now(),e=0;e<ht[fr].length;++e)ht[fr][e].length>2&&(ht[fr][e][3]=t,ht[fr][e][4]=t);CA()}function CA(){if(clearTimeout(CE),CE=void 0,ht[fr].length!==0){var t=ht[fr].shift(),e=t[0],r=t[1],n=t[2],i=t[3],s=t[4];if(i===void 0)po("RETRY",e.name,r),e.apply(null,r);else if(Date.now()-i>=6e4){po("TIMEOUT",e.name,r);var o=r.pop();typeof o=="function"&&o.call(null,n)}else{var a=Date.now()-s,l=Math.max(s-i,1),c=Math.min(l*1.2,100);a>=c?(po("RETRY",e.name,r),e.apply(null,r.concat([i]))):ht[fr].push(t)}CE===void 0&&(CE=setTimeout(CA,0))}}});var yE=O((TPe,SL)=>{"use strict";var zn=t=>t!==null&&typeof t=="object"&&typeof t.pipe=="function";zn.writable=t=>zn(t)&&t.writable!==!1&&typeof t._write=="function"&&typeof t._writableState=="object";zn.readable=t=>zn(t)&&t.readable!==!1&&typeof t._read=="function"&&typeof t._readableState=="object";zn.duplex=t=>zn.writable(t)&&zn.readable(t);zn.transform=t=>zn.duplex(t)&&typeof t._transform=="function";SL.exports=zn});var eu=O((SPe,wA)=>{"use strict";typeof process>"u"||!process.version||process.version.indexOf("v0.")===0||process.version.indexOf("v1.")===0&&process.version.indexOf("v1.8.")!==0?wA.exports={nextTick:vJ}:wA.exports=process;function vJ(t,e,r,n){if(typeof t!="function")throw new TypeError('"callback" argument must be a function');var i=arguments.length,s,o;switch(i){case 0:case 1:return process.nextTick(t);case 2:return process.nextTick(function(){t.call(null,e)});case 3:return process.nextTick(function(){t.call(null,e,r)});case 4:return process.nextTick(function(){t.call(null,e,r,n)});default:for(s=new Array(i-1),o=0;o<s.length;)s[o++]=arguments[o];return process.nextTick(function(){t.apply(null,s)})}}});var AL=O((RPe,RL)=>{var MJ={}.toString;RL.exports=Array.isArray||function(t){return MJ.call(t)=="[object Array]"}});var LA=O((APe,mL)=>{mL.exports=require("stream")});var tu=O((DA,_L)=>{var wE=require("buffer"),Mi=wE.Buffer;function gL(t,e){for(var r in t)e[r]=t[r]}Mi.from&&Mi.alloc&&Mi.allocUnsafe&&Mi.allocUnsafeSlow?_L.exports=wE:(gL(wE,DA),DA.Buffer=qa);function qa(t,e,r){return Mi(t,e,r)}gL(Mi,qa);qa.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return Mi(t,e,r)};qa.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=Mi(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};qa.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Mi(t)};qa.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return wE.SlowBuffer(t)}});var Xa=O(Or=>{function UJ(t){return Array.isArray?Array.isArray(t):LE(t)==="[object Array]"}Or.isArray=UJ;function BJ(t){return typeof t=="boolean"}Or.isBoolean=BJ;function FJ(t){return t===null}Or.isNull=FJ;function HJ(t){return t==null}Or.isNullOrUndefined=HJ;function GJ(t){return typeof t=="number"}Or.isNumber=GJ;function WJ(t){return typeof t=="string"}Or.isString=WJ;function $J(t){return typeof t=="symbol"}Or.isSymbol=$J;function kJ(t){return t===void 0}Or.isUndefined=kJ;function YJ(t){return LE(t)==="[object RegExp]"}Or.isRegExp=YJ;function VJ(t){return typeof t=="object"&&t!==null}Or.isObject=VJ;function qJ(t){return LE(t)==="[object Date]"}Or.isDate=qJ;function XJ(t){return LE(t)==="[object Error]"||t instanceof Error}Or.isError=XJ;function jJ(t){return typeof t=="function"}Or.isFunction=jJ;function zJ(t){return t===null||typeof t=="boolean"||typeof t=="number"||typeof t=="string"||typeof t=="symbol"||typeof t>"u"}Or.isPrimitive=zJ;Or.isBuffer=require("buffer").Buffer.isBuffer;function LE(t){return Object.prototype.toString.call(t)}});var IL=O((gPe,PA)=>{typeof Object.create=="function"?PA.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:PA.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}}});var ja=O((_Pe,vA)=>{try{if(xA=require("util"),typeof xA.inherits!="function")throw"";vA.exports=xA.inherits}catch{vA.exports=IL()}var xA});var OL=O((IPe,MA)=>{"use strict";function KJ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var NL=tu().Buffer,ru=require("util");function JJ(t,e,r){t.copy(e,r)}MA.exports=(function(){function t(){KJ(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length},t.prototype.unshift=function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length},t.prototype.shift=function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(r){if(this.length===0)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=r+n.data;return i},t.prototype.concat=function(r){if(this.length===0)return NL.alloc(0);for(var n=NL.allocUnsafe(r>>>0),i=this.head,s=0;i;)JJ(i.data,n,s),s+=i.data.length,i=i.next;return n},t})();ru&&ru.inspect&&ru.inspect.custom&&(MA.exports.prototype[ru.inspect.custom]=function(){var t=ru.inspect({length:this.length});return this.constructor.name+" "+t})});var UA=O((NPe,CL)=>{"use strict";var DE=eu();function QJ(t,e){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,DE.nextTick(PE,this,t)):DE.nextTick(PE,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(s){!e&&s?r._writableState?r._writableState.errorEmitted||(r._writableState.errorEmitted=!0,DE.nextTick(PE,r,s)):DE.nextTick(PE,r,s):e&&e(s)}),this)}function ZJ(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function PE(t,e){t.emit("error",e)}CL.exports={destroy:QJ,undestroy:ZJ}});var yL=O((OPe,bL)=>{bL.exports=require("util").deprecate});var FA=O((CPe,UL)=>{"use strict";var To=eu();UL.exports=Mt;function LL(t){var e=this;this.next=null,this.entry=null,this.finish=function(){S5(e,t)}}var e5=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:To.nextTick,za;Mt.WritableState=iu;var DL=Object.create(Xa());DL.inherits=ja();var t5={deprecate:yL()},PL=LA(),vE=tu().Buffer,r5=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function n5(t){return vE.from(t)}function i5(t){return vE.isBuffer(t)||t instanceof r5}var xL=UA();DL.inherits(Mt,PL);function s5(){}function iu(t,e){za=za||So(),t=t||{};var r=e instanceof za;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var n=t.highWaterMark,i=t.writableHighWaterMark,s=this.objectMode?16:16*1024;n||n===0?this.highWaterMark=n:r&&(i||i===0)?this.highWaterMark=i:this.highWaterMark=s,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var o=t.decodeStrings===!1;this.decodeStrings=!o,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(a){f5(e,a)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new LL(this)}iu.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r};(function(){try{Object.defineProperty(iu.prototype,"buffer",{get:t5.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var xE;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(xE=Function.prototype[Symbol.hasInstance],Object.defineProperty(Mt,Symbol.hasInstance,{value:function(t){return xE.call(this,t)?!0:this!==Mt?!1:t&&t._writableState instanceof iu}})):xE=function(t){return t instanceof this};function Mt(t){if(za=za||So(),!xE.call(Mt,this)&&!(this instanceof za))return new Mt(t);this._writableState=new iu(t,this),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),PL.call(this)}Mt.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function o5(t,e){var r=new Error("write after end");t.emit("error",r),To.nextTick(e,r)}function a5(t,e,r,n){var i=!0,s=!1;return r===null?s=new TypeError("May not write null values to stream"):typeof r!="string"&&r!==void 0&&!e.objectMode&&(s=new TypeError("Invalid non-string/buffer chunk")),s&&(t.emit("error",s),To.nextTick(n,s),i=!1),i}Mt.prototype.write=function(t,e,r){var n=this._writableState,i=!1,s=!n.objectMode&&i5(t);return s&&!vE.isBuffer(t)&&(t=n5(t)),typeof e=="function"&&(r=e,e=null),s?e="buffer":e||(e=n.defaultEncoding),typeof r!="function"&&(r=s5),n.ended?o5(this,r):(s||a5(this,n,t,r))&&(n.pendingcb++,i=c5(this,n,s,t,e,r)),i};Mt.prototype.cork=function(){var t=this._writableState;t.corked++};Mt.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&vL(this,t))};Mt.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this};function l5(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=vE.from(e,r)),e}Object.defineProperty(Mt.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function c5(t,e,r,n,i,s){if(!r){var o=l5(e,n,i);n!==o&&(r=!0,i="buffer",n=o)}var a=e.objectMode?1:n.length;e.length+=a;var l=e.length<e.highWaterMark;if(l||(e.needDrain=!0),e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:s,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else BA(t,e,!1,a,n,i,s);return l}function BA(t,e,r,n,i,s,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,r?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function u5(t,e,r,n,i){--e.pendingcb,r?(To.nextTick(i,n),To.nextTick(nu,t,e),t._writableState.errorEmitted=!0,t.emit("error",n)):(i(n),t._writableState.errorEmitted=!0,t.emit("error",n),nu(t,e))}function d5(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function f5(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if(d5(r),e)u5(t,r,n,e,i);else{var s=ML(r);!s&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&vL(t,r),n?e5(wL,t,r,s,i):wL(t,r,s,i)}}function wL(t,e,r,n){r||E5(t,e),e.pendingcb--,n(),nu(t,e)}function E5(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function vL(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),s=e.corkedRequestsFree;s.entry=r;for(var o=0,a=!0;r;)i[o]=r,r.isBuf||(a=!1),r=r.next,o+=1;i.allBuffers=a,BA(t,e,!0,e.length,i,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new LL(e),e.bufferedRequestCount=0}else{for(;r;){var l=r.chunk,c=r.encoding,u=r.callback,d=e.objectMode?1:l.length;if(BA(t,e,!1,d,l,c,u),r=r.next,e.bufferedRequestCount--,e.writing)break}r===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}Mt.prototype._write=function(t,e,r){r(new Error("_write() is not implemented"))};Mt.prototype._writev=null;Mt.prototype.end=function(t,e,r){var n=this._writableState;typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||T5(this,n,r)};function ML(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function h5(t,e){t._final(function(r){e.pendingcb--,r&&t.emit("error",r),e.prefinished=!0,t.emit("prefinish"),nu(t,e)})}function p5(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"?(e.pendingcb++,e.finalCalled=!0,To.nextTick(h5,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function nu(t,e){var r=ML(e);return r&&(p5(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"))),r}function T5(t,e,r){e.ending=!0,nu(t,e),r&&(e.finished?To.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function S5(t,e,r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree.next=t}Object.defineProperty(Mt.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}});Mt.prototype.destroy=xL.destroy;Mt.prototype._undestroy=xL.undestroy;Mt.prototype._destroy=function(t,e){this.end(),e(t)}});var So=O((bPe,GL)=>{"use strict";var BL=eu(),R5=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};GL.exports=Ui;var FL=Object.create(Xa());FL.inherits=ja();var HL=WA(),GA=FA();FL.inherits(Ui,HL);for(HA=R5(GA.prototype),ME=0;ME<HA.length;ME++)UE=HA[ME],Ui.prototype[UE]||(Ui.prototype[UE]=GA.prototype[UE]);var HA,UE,ME;function Ui(t){if(!(this instanceof Ui))return new Ui(t);HL.call(this,t),GA.call(this,t),t&&t.readable===!1&&(this.readable=!1),t&&t.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,t&&t.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",A5)}Object.defineProperty(Ui.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function A5(){this.allowHalfOpen||this._writableState.ended||BL.nextTick(m5,this)}function m5(t){t.end()}Object.defineProperty(Ui.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(t){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=t,this._writableState.destroyed=t)}});Ui.prototype._destroy=function(t,e){this.push(null),this.end(),BL.nextTick(e,t)}});var YA=O($L=>{"use strict";var kA=tu().Buffer,WL=kA.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function g5(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function _5(t){var e=g5(t);if(typeof e!="string"&&(kA.isEncoding===WL||!WL(t)))throw new Error("Unknown encoding: "+t);return e||t}$L.StringDecoder=su;function su(t){this.encoding=_5(t);var e;switch(this.encoding){case"utf16le":this.text=y5,this.end=w5,e=4;break;case"utf8":this.fillLast=O5,e=4;break;case"base64":this.text=L5,this.end=D5,e=3;break;default:this.write=P5,this.end=x5;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=kA.allocUnsafe(e)}su.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};su.prototype.end=b5;su.prototype.text=C5;su.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function $A(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function I5(t,e,r){var n=e.length-1;if(n<r)return 0;var i=$A(e[n]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--n<r||i===-2?0:(i=$A(e[n]),i>=0?(i>0&&(t.lastNeed=i-2),i):--n<r||i===-2?0:(i=$A(e[n]),i>=0?(i>0&&(i===2?i=0:t.lastNeed=i-3),i):0))}function N5(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function O5(t){var e=this.lastTotal-this.lastNeed,r=N5(this,t,e);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function C5(t,e){var r=I5(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function b5(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function y5(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function w5(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function L5(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function D5(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function P5(t){return t.toString(this.encoding)}function x5(t){return t&&t.length?this.write(t):""}});var WA=O((LPe,eD)=>{"use strict";var Ja=eu();eD.exports=et;var v5=AL(),ou;et.ReadableState=zL;var wPe=require("events").EventEmitter,qL=function(t,e){return t.listeners(e).length},zA=LA(),au=tu().Buffer,M5=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function U5(t){return au.from(t)}function B5(t){return au.isBuffer(t)||t instanceof M5}var XL=Object.create(Xa());XL.inherits=ja();var VA=require("util"),qe=void 0;VA&&VA.debuglog?qe=VA.debuglog("stream"):qe=function(){};var F5=OL(),jL=UA(),Ka;XL.inherits(et,zA);var qA=["error","close","destroy","pause","resume"];function H5(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):v5(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}function zL(t,e){ou=ou||So(),t=t||{};var r=e instanceof ou;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var n=t.highWaterMark,i=t.readableHighWaterMark,s=this.objectMode?16:16*1024;n||n===0?this.highWaterMark=n:r&&(i||i===0)?this.highWaterMark=i:this.highWaterMark=s,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new F5,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(Ka||(Ka=YA().StringDecoder),this.decoder=new Ka(t.encoding),this.encoding=t.encoding)}function et(t){if(ou=ou||So(),!(this instanceof et))return new et(t);this._readableState=new zL(t,this),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),zA.call(this)}Object.defineProperty(et.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}});et.prototype.destroy=jL.destroy;et.prototype._undestroy=jL.undestroy;et.prototype._destroy=function(t,e){this.push(null),e(t)};et.prototype.push=function(t,e){var r=this._readableState,n;return r.objectMode?n=!0:typeof t=="string"&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=au.from(t,e),e=""),n=!0),KL(this,t,e,!1,n)};et.prototype.unshift=function(t){return KL(this,t,null,!0,!1)};function KL(t,e,r,n,i){var s=t._readableState;if(e===null)s.reading=!1,k5(t,s);else{var o;i||(o=G5(s,e)),o?t.emit("error",o):s.objectMode||e&&e.length>0?(typeof e!="string"&&!s.objectMode&&Object.getPrototypeOf(e)!==au.prototype&&(e=U5(e)),n?s.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):XA(t,s,e,!0):s.ended?t.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!r?(e=s.decoder.write(e),s.objectMode||e.length!==0?XA(t,s,e,!1):JL(t,s)):XA(t,s,e,!1))):n||(s.reading=!1)}return W5(s)}function XA(t,e,r,n){e.flowing&&e.length===0&&!e.sync?(t.emit("data",r),t.read(0)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&BE(t)),JL(t,e)}function G5(t,e){var r;return!B5(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(r=new TypeError("Invalid non-string/buffer chunk")),r}function W5(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||t.length===0)}et.prototype.isPaused=function(){return this._readableState.flowing===!1};et.prototype.setEncoding=function(t){return Ka||(Ka=YA().StringDecoder),this._readableState.decoder=new Ka(t),this._readableState.encoding=t,this};var kL=8388608;function $5(t){return t>=kL?t=kL:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function YL(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=$5(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}et.prototype.read=function(t){qe("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return qe("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?jA(this):BE(this),null;if(t=YL(t,e),t===0&&e.ended)return e.length===0&&jA(this),null;var n=e.needReadable;qe("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,qe("length less than watermark",n)),e.ended||e.reading?(n=!1,qe("reading or ended",n)):n&&(qe("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=YL(r,e)));var i;return t>0?i=QL(t,e):i=null,i===null?(e.needReadable=!0,t=0):e.length-=t,e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&jA(this)),i!==null&&this.emit("data",i),i};function k5(t,e){if(!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,BE(t)}}function BE(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(qe("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?Ja.nextTick(VL,t):VL(t))}function VL(t){qe("emit readable"),t.emit("readable"),KA(t)}function JL(t,e){e.readingMore||(e.readingMore=!0,Ja.nextTick(Y5,t,e))}function Y5(t,e){for(var r=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(qe("maybeReadMore read 0"),t.read(0),r!==e.length);)r=e.length;e.readingMore=!1}et.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))};et.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t);break}n.pipesCount+=1,qe("pipe count=%d opts=%j",n.pipesCount,e);var i=(!e||e.end!==!1)&&t!==process.stdout&&t!==process.stderr,s=i?a:S;n.endEmitted?Ja.nextTick(s):r.once("end",s),t.on("unpipe",o);function o(T,m){qe("onunpipe"),T===r&&m&&m.hasUnpiped===!1&&(m.hasUnpiped=!0,u())}function a(){qe("onend"),t.end()}var l=V5(r);t.on("drain",l);var c=!1;function u(){qe("cleanup"),t.removeListener("close",p),t.removeListener("finish",h),t.removeListener("drain",l),t.removeListener("error",f),t.removeListener("unpipe",o),r.removeListener("end",a),r.removeListener("end",S),r.removeListener("data",E),c=!0,n.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&l()}var d=!1;r.on("data",E);function E(T){qe("ondata"),d=!1;var m=t.write(T);m===!1&&!d&&((n.pipesCount===1&&n.pipes===t||n.pipesCount>1&&ZL(n.pipes,t)!==-1)&&!c&&(qe("false write response, pause",n.awaitDrain),n.awaitDrain++,d=!0),r.pause())}function f(T){qe("onerror",T),S(),t.removeListener("error",f),qL(t,"error")===0&&t.emit("error",T)}H5(t,"error",f);function p(){t.removeListener("finish",h),S()}t.once("close",p);function h(){qe("onfinish"),t.removeListener("close",p),S()}t.once("finish",h);function S(){qe("unpipe"),r.unpipe(t)}return t.emit("pipe",r),n.flowing||(qe("pipe resume"),r.resume()),t};function V5(t){return function(){var e=t._readableState;qe("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,e.awaitDrain===0&&qL(t,"data")&&(e.flowing=!0,KA(t))}}et.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var s=0;s<i;s++)n[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=ZL(e.pipes,t);return o===-1?this:(e.pipes.splice(o,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)};et.prototype.on=function(t,e){var r=zA.prototype.on.call(this,t,e);if(t==="data")this._readableState.flowing!==!1&&this.resume();else if(t==="readable"){var n=this._readableState;!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&BE(this):Ja.nextTick(q5,this))}return r};et.prototype.addListener=et.prototype.on;function q5(t){qe("readable nexttick read 0"),t.read(0)}et.prototype.resume=function(){var t=this._readableState;return t.flowing||(qe("resume"),t.flowing=!0,X5(this,t)),this};function X5(t,e){e.resumeScheduled||(e.resumeScheduled=!0,Ja.nextTick(j5,t,e))}function j5(t,e){e.reading||(qe("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),KA(t),e.flowing&&!e.reading&&t.read(0)}et.prototype.pause=function(){return qe("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(qe("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function KA(t){var e=t._readableState;for(qe("flow",e.flowing);e.flowing&&t.read()!==null;);}et.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;t.on("end",function(){if(qe("wrapped end"),r.decoder&&!r.ended){var o=r.decoder.end();o&&o.length&&e.push(o)}e.push(null)}),t.on("data",function(o){if(qe("wrapped data"),r.decoder&&(o=r.decoder.write(o)),!(r.objectMode&&o==null)&&!(!r.objectMode&&(!o||!o.length))){var a=e.push(o);a||(n=!0,t.pause())}});for(var i in t)this[i]===void 0&&typeof t[i]=="function"&&(this[i]=(function(o){return function(){return t[o].apply(t,arguments)}})(i));for(var s=0;s<qA.length;s++)t.on(qA[s],this.emit.bind(this,qA[s]));return this._read=function(o){qe("wrapped _read",o),n&&(n=!1,t.resume())},this};Object.defineProperty(et.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});et._fromList=QL;function QL(t,e){if(e.length===0)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.head.data:r=e.buffer.concat(e.length),e.buffer.clear()):r=z5(t,e.buffer,e.decoder),r}function z5(t,e,r){var n;return t<e.head.data.length?(n=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):t===e.head.data.length?n=e.shift():n=r?K5(t,e):J5(t,e),n}function K5(t,e){var r=e.head,n=1,i=r.data;for(t-=i.length;r=r.next;){var s=r.data,o=t>s.length?s.length:t;if(o===s.length?i+=s:i+=s.slice(0,t),t-=o,t===0){o===s.length?(++n,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=s.slice(o));break}++n}return e.length-=n,i}function J5(t,e){var r=au.allocUnsafe(t),n=e.head,i=1;for(n.data.copy(r),t-=n.data.length;n=n.next;){var s=n.data,o=t>s.length?s.length:t;if(s.copy(r,r.length-t,0,o),t-=o,t===0){o===s.length?(++i,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=s.slice(o));break}++i}return e.length-=i,r}function jA(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,Ja.nextTick(Q5,e,t))}function Q5(t,e){!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function ZL(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}});var JA=O((DPe,nD)=>{"use strict";nD.exports=Bi;var FE=So(),rD=Object.create(Xa());rD.inherits=ja();rD.inherits(Bi,FE);function Z5(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,e!=null&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function Bi(t){if(!(this instanceof Bi))return new Bi(t);FE.call(this,t),this._transformState={afterTransform:Z5.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",eQ)}function eQ(){var t=this;typeof this._flush=="function"?this._flush(function(e,r){tD(t,e,r)}):tD(this,null,null)}Bi.prototype.push=function(t,e){return this._transformState.needTransform=!1,FE.prototype.push.call(this,t,e)};Bi.prototype._transform=function(t,e,r){throw new Error("_transform() is not implemented")};Bi.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};Bi.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};Bi.prototype._destroy=function(t,e){var r=this;FE.prototype._destroy.call(this,t,function(n){e(n),r.emit("close")})};function tD(t,e,r){if(e)return t.emit("error",e);if(r!=null&&t.push(r),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}});var aD=O((PPe,oD)=>{"use strict";oD.exports=lu;var iD=JA(),sD=Object.create(Xa());sD.inherits=ja();sD.inherits(lu,iD);function lu(t){if(!(this instanceof lu))return new lu(t);iD.call(this,t)}lu.prototype._transform=function(t,e,r){r(null,t)}});var lD=O((Er,HE)=>{var Kn=require("stream");process.env.READABLE_STREAM==="disable"&&Kn?(HE.exports=Kn,Er=HE.exports=Kn.Readable,Er.Readable=Kn.Readable,Er.Writable=Kn.Writable,Er.Duplex=Kn.Duplex,Er.Transform=Kn.Transform,Er.PassThrough=Kn.PassThrough,Er.Stream=Kn):(Er=HE.exports=WA(),Er.Stream=Kn||Er,Er.Readable=Er,Er.Writable=FA(),Er.Duplex=So(),Er.Transform=JA(),Er.PassThrough=aD())});var uD=O((xPe,cD)=>{cD.exports=lD().PassThrough});var hD=O((vPe,ED)=>{var dD=require("util"),$E=uD();ED.exports={Readable:GE,Writable:WE};dD.inherits(GE,$E);dD.inherits(WE,$E);function fD(t,e,r){t[e]=function(){return delete t[e],r.apply(this,arguments),this[e].apply(this,arguments)}}function GE(t,e){if(!(this instanceof GE))return new GE(t,e);$E.call(this,e),fD(this,"_read",function(){var r=t.call(this,e),n=this.emit.bind(this,"error");r.on("error",n),r.pipe(this)}),this.emit("readable")}function WE(t,e){if(!(this instanceof WE))return new WE(t,e);$E.call(this,e),fD(this,"_write",function(){var r=t.call(this,e),n=this.emit.bind(this,"error");r.on("error",n),this.pipe(r)}),this.emit("writable")}});var QA=O((MPe,pD)=>{pD.exports=function(t,e){if(typeof t!="string")throw new TypeError("expected path to be a string");if(t==="\\"||t==="/")return"/";var r=t.length;if(r<=1)return t;var n="";if(r>4&&t[3]==="\\"){var i=t[2];(i==="?"||i===".")&&t.slice(0,2)==="\\\\"&&(t=t.slice(2),n="//")}var s=t.split(/[/\\]+/);return e!==!1&&s[s.length-1]===""&&s.pop(),n+s.join("/")}});var ZA=O((UPe,TD)=>{function tQ(t){return t}TD.exports=tQ});var RD=O((BPe,SD)=>{function rQ(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}SD.exports=rQ});var gD=O((FPe,mD)=>{var nQ=RD(),AD=Math.max;function iQ(t,e,r){return e=AD(e===void 0?t.length-1:e,0),function(){for(var n=arguments,i=-1,s=AD(n.length-e,0),o=Array(s);++i<s;)o[i]=n[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=n[i];return a[e]=r(o),nQ(t,this,a)}}mD.exports=iQ});var ID=O((HPe,_D)=>{function sQ(t){return function(){return t}}_D.exports=sQ});var em=O((GPe,ND)=>{var oQ=typeof global=="object"&&global&&global.Object===Object&&global;ND.exports=oQ});var Qa=O((WPe,OD)=>{var aQ=em(),lQ=typeof self=="object"&&self&&self.Object===Object&&self,cQ=aQ||lQ||Function("return this")();OD.exports=cQ});var kE=O(($Pe,CD)=>{var uQ=Qa(),dQ=uQ.Symbol;CD.exports=dQ});var LD=O((kPe,wD)=>{var bD=kE(),yD=Object.prototype,fQ=yD.hasOwnProperty,EQ=yD.toString,cu=bD?bD.toStringTag:void 0;function hQ(t){var e=fQ.call(t,cu),r=t[cu];try{t[cu]=void 0;var n=!0}catch{}var i=EQ.call(t);return n&&(e?t[cu]=r:delete t[cu]),i}wD.exports=hQ});var PD=O((YPe,DD)=>{var pQ=Object.prototype,TQ=pQ.toString;function SQ(t){return TQ.call(t)}DD.exports=SQ});var uu=O((VPe,MD)=>{var xD=kE(),RQ=LD(),AQ=PD(),mQ="[object Null]",gQ="[object Undefined]",vD=xD?xD.toStringTag:void 0;function _Q(t){return t==null?t===void 0?gQ:mQ:vD&&vD in Object(t)?RQ(t):AQ(t)}MD.exports=_Q});var du=O((qPe,UD)=>{function IQ(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}UD.exports=IQ});var tm=O((XPe,BD)=>{var NQ=uu(),OQ=du(),CQ="[object AsyncFunction]",bQ="[object Function]",yQ="[object GeneratorFunction]",wQ="[object Proxy]";function LQ(t){if(!OQ(t))return!1;var e=NQ(t);return e==bQ||e==yQ||e==CQ||e==wQ}BD.exports=LQ});var HD=O((jPe,FD)=>{var DQ=Qa(),PQ=DQ["__core-js_shared__"];FD.exports=PQ});var $D=O((zPe,WD)=>{var rm=HD(),GD=(function(){var t=/[^.]+$/.exec(rm&&rm.keys&&rm.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""})();function xQ(t){return!!GD&&GD in t}WD.exports=xQ});var YD=O((KPe,kD)=>{var vQ=Function.prototype,MQ=vQ.toString;function UQ(t){if(t!=null){try{return MQ.call(t)}catch{}try{return t+""}catch{}}return""}kD.exports=UQ});var qD=O((JPe,VD)=>{var BQ=tm(),FQ=$D(),HQ=du(),GQ=YD(),WQ=/[\\^$.*+?()[\]{}|]/g,$Q=/^\[object .+?Constructor\]$/,kQ=Function.prototype,YQ=Object.prototype,VQ=kQ.toString,qQ=YQ.hasOwnProperty,XQ=RegExp("^"+VQ.call(qQ).replace(WQ,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function jQ(t){if(!HQ(t)||FQ(t))return!1;var e=BQ(t)?XQ:$Q;return e.test(GQ(t))}VD.exports=jQ});var jD=O((QPe,XD)=>{function zQ(t,e){return t?.[e]}XD.exports=zQ});var fu=O((ZPe,zD)=>{var KQ=qD(),JQ=jD();function QQ(t,e){var r=JQ(t,e);return KQ(r)?r:void 0}zD.exports=QQ});var JD=O((exe,KD)=>{var ZQ=fu(),e9=(function(){try{var t=ZQ(Object,"defineProperty");return t({},"",{}),t}catch{}})();KD.exports=e9});var eP=O((txe,ZD)=>{var t9=ID(),QD=JD(),r9=ZA(),n9=QD?function(t,e){return QD(t,"toString",{configurable:!0,enumerable:!1,value:t9(e),writable:!0})}:r9;ZD.exports=n9});var rP=O((rxe,tP)=>{var i9=800,s9=16,o9=Date.now;function a9(t){var e=0,r=0;return function(){var n=o9(),i=s9-(n-r);if(r=n,i>0){if(++e>=i9)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}tP.exports=a9});var iP=O((nxe,nP)=>{var l9=eP(),c9=rP(),u9=c9(l9);nP.exports=u9});var YE=O((ixe,sP)=>{var d9=ZA(),f9=gD(),E9=iP();function h9(t,e){return E9(f9(t,e,d9),t+"")}sP.exports=h9});var VE=O((sxe,oP)=>{function p9(t,e){return t===e||t!==t&&e!==e}oP.exports=p9});var nm=O((oxe,aP)=>{var T9=9007199254740991;function S9(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=T9}aP.exports=S9});var qE=O((axe,lP)=>{var R9=tm(),A9=nm();function m9(t){return t!=null&&A9(t.length)&&!R9(t)}lP.exports=m9});var im=O((lxe,cP)=>{var g9=9007199254740991,_9=/^(?:0|[1-9]\d*)$/;function I9(t,e){var r=typeof t;return e=e??g9,!!e&&(r=="number"||r!="symbol"&&_9.test(t))&&t>-1&&t%1==0&&t<e}cP.exports=I9});var dP=O((cxe,uP)=>{var N9=VE(),O9=qE(),C9=im(),b9=du();function y9(t,e,r){if(!b9(r))return!1;var n=typeof e;return(n=="number"?O9(r)&&C9(e,r.length):n=="string"&&e in r)?N9(r[e],t):!1}uP.exports=y9});var EP=O((uxe,fP)=>{function w9(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}fP.exports=w9});var Za=O((dxe,hP)=>{function L9(t){return t!=null&&typeof t=="object"}hP.exports=L9});var TP=O((fxe,pP)=>{var D9=uu(),P9=Za(),x9="[object Arguments]";function v9(t){return P9(t)&&D9(t)==x9}pP.exports=v9});var sm=O((Exe,AP)=>{var SP=TP(),M9=Za(),RP=Object.prototype,U9=RP.hasOwnProperty,B9=RP.propertyIsEnumerable,F9=SP((function(){return arguments})())?SP:function(t){return M9(t)&&U9.call(t,"callee")&&!B9.call(t,"callee")};AP.exports=F9});var om=O((hxe,mP)=>{var H9=Array.isArray;mP.exports=H9});var _P=O((pxe,gP)=>{function G9(){return!1}gP.exports=G9});var CP=O((Eu,el)=>{var W9=Qa(),$9=_P(),OP=typeof Eu=="object"&&Eu&&!Eu.nodeType&&Eu,IP=OP&&typeof el=="object"&&el&&!el.nodeType&&el,k9=IP&&IP.exports===OP,NP=k9?W9.Buffer:void 0,Y9=NP?NP.isBuffer:void 0,V9=Y9||$9;el.exports=V9});var yP=O((Txe,bP)=>{var q9=uu(),X9=nm(),j9=Za(),z9="[object Arguments]",K9="[object Array]",J9="[object Boolean]",Q9="[object Date]",Z9="[object Error]",e7="[object Function]",t7="[object Map]",r7="[object Number]",n7="[object Object]",i7="[object RegExp]",s7="[object Set]",o7="[object String]",a7="[object WeakMap]",l7="[object ArrayBuffer]",c7="[object DataView]",u7="[object Float32Array]",d7="[object Float64Array]",f7="[object Int8Array]",E7="[object Int16Array]",h7="[object Int32Array]",p7="[object Uint8Array]",T7="[object Uint8ClampedArray]",S7="[object Uint16Array]",R7="[object Uint32Array]",tt={};tt[u7]=tt[d7]=tt[f7]=tt[E7]=tt[h7]=tt[p7]=tt[T7]=tt[S7]=tt[R7]=!0;tt[z9]=tt[K9]=tt[l7]=tt[J9]=tt[c7]=tt[Q9]=tt[Z9]=tt[e7]=tt[t7]=tt[r7]=tt[n7]=tt[i7]=tt[s7]=tt[o7]=tt[a7]=!1;function A7(t){return j9(t)&&X9(t.length)&&!!tt[q9(t)]}bP.exports=A7});var am=O((Sxe,wP)=>{function m7(t){return function(e){return t(e)}}wP.exports=m7});var DP=O((hu,tl)=>{var g7=em(),LP=typeof hu=="object"&&hu&&!hu.nodeType&&hu,pu=LP&&typeof tl=="object"&&tl&&!tl.nodeType&&tl,_7=pu&&pu.exports===LP,lm=_7&&g7.process,I7=(function(){try{var t=pu&&pu.require&&pu.require("util").types;return t||lm&&lm.binding&&lm.binding("util")}catch{}})();tl.exports=I7});var MP=O((Rxe,vP)=>{var N7=yP(),O7=am(),PP=DP(),xP=PP&&PP.isTypedArray,C7=xP?O7(xP):N7;vP.exports=C7});var BP=O((Axe,UP)=>{var b7=EP(),y7=sm(),w7=om(),L7=CP(),D7=im(),P7=MP(),x7=Object.prototype,v7=x7.hasOwnProperty;function M7(t,e){var r=w7(t),n=!r&&y7(t),i=!r&&!n&&L7(t),s=!r&&!n&&!i&&P7(t),o=r||n||i||s,a=o?b7(t.length,String):[],l=a.length;for(var c in t)(e||v7.call(t,c))&&!(o&&(c=="length"||i&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||D7(c,l)))&&a.push(c);return a}UP.exports=M7});var HP=O((mxe,FP)=>{var U7=Object.prototype;function B7(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||U7;return t===r}FP.exports=B7});var WP=O((gxe,GP)=>{function F7(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}GP.exports=F7});var kP=O((_xe,$P)=>{var H7=du(),G7=HP(),W7=WP(),$7=Object.prototype,k7=$7.hasOwnProperty;function Y7(t){if(!H7(t))return W7(t);var e=G7(t),r=[];for(var n in t)n=="constructor"&&(e||!k7.call(t,n))||r.push(n);return r}$P.exports=Y7});var VP=O((Ixe,YP)=>{var V7=BP(),q7=kP(),X7=qE();function j7(t){return X7(t)?V7(t,!0):q7(t)}YP.exports=j7});var jP=O((Nxe,XP)=>{var z7=YE(),K7=VE(),J7=dP(),Q7=VP(),qP=Object.prototype,Z7=qP.hasOwnProperty,eZ=z7(function(t,e){t=Object(t);var r=-1,n=e.length,i=n>2?e[2]:void 0;for(i&&J7(e[0],e[1],i)&&(n=1);++r<n;)for(var s=e[r],o=Q7(s),a=-1,l=o.length;++a<l;){var c=o[a],u=t[c];(u===void 0||K7(u,qP[c])&&!Z7.call(t,c))&&(t[c]=s[c])}return t});XP.exports=eZ});var lt=O((Oxe,zP)=>{"use strict";var cm=class extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError(`Expected input to be an Array, got ${typeof e}`);let r="";for(let n=0;n<e.length;n++)r+=`    ${e[n].stack}
`;super(r),this.name="AggregateError",this.errors=e}};zP.exports={AggregateError:cm,ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,e){return t.includes(e)},ArrayPrototypeIndexOf(t,e){return t.indexOf(e)},ArrayPrototypeJoin(t,e){return t.join(e)},ArrayPrototypeMap(t,e){return t.map(e)},ArrayPrototypePop(t,e){return t.pop(e)},ArrayPrototypePush(t,e){return t.push(e)},ArrayPrototypeSlice(t,e,r){return t.slice(e,r)},Error,FunctionPrototypeCall(t,e,...r){return t.call(e,...r)},FunctionPrototypeSymbolHasInstance(t,e){return Function.prototype[Symbol.hasInstance].call(t,e)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,e){return Object.defineProperties(t,e)},ObjectDefineProperty(t,e,r){return Object.defineProperty(t,e,r)},ObjectGetOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,e){return Object.setPrototypeOf(t,e)},Promise,PromisePrototypeCatch(t,e){return t.catch(e)},PromisePrototypeThen(t,e,r){return t.then(e,r)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,e){return t.test(e)},SafeSet:Set,String,StringPrototypeSlice(t,e,r){return t.slice(e,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,e,r){return t.set(e,r)},Boolean,Uint8Array}});var um=O((Cxe,KP)=>{"use strict";KP.exports={format(t,...e){return t.replace(/%([sdifj])/g,function(...[r,n]){let i=e.shift();return n==="f"?i.toFixed(6):n==="j"?JSON.stringify(i):n==="s"&&typeof i=="object"?`${i.constructor!==Object?i.constructor.name:""} {}`.trim():i.toString()})},inspect(t){switch(typeof t){case"string":if(t.includes("'"))if(t.includes('"')){if(!t.includes("`")&&!t.includes("${"))return`\`${t}\``}else return`"${t}"`;return`'${t}'`;case"number":return isNaN(t)?"NaN":Object.is(t,-0)?String(t):t;case"bigint":return`${String(t)}n`;case"boolean":case"undefined":return String(t);case"object":return"{}"}}}});var Cr=O((bxe,ZP)=>{"use strict";var{format:tZ,inspect:XE}=um(),{AggregateError:rZ}=lt(),nZ=globalThis.AggregateError||rZ,iZ=Symbol("kIsNodeError"),sZ=["string","function","number","object","Function","Object","boolean","bigint","symbol"],oZ=/^([A-Z][a-z0-9]*)+$/,aZ="__node_internal_",jE={};function Ro(t,e){if(!t)throw new jE.ERR_INTERNAL_ASSERTION(e)}function JP(t){let e="",r=t.length,n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function lZ(t,e,r){if(typeof e=="function")return Ro(e.length<=r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${e.length}).`),e(...r);let n=(e.match(/%[dfijoOs]/g)||[]).length;return Ro(n===r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${n}).`),r.length===0?e:tZ(e,...r)}function hr(t,e,r){r||(r=Error);class n extends r{constructor(...s){super(lZ(t,e,s))}toString(){return`${this.name} [${t}]: ${this.message}`}}Object.defineProperties(n.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${t}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),n.prototype.code=t,n.prototype[iZ]=!0,jE[t]=n}function QP(t){let e=aZ+t.name;return Object.defineProperty(t,"name",{value:e}),t}function cZ(t,e){if(t&&e&&t!==e){if(Array.isArray(e.errors))return e.errors.push(t),e;let r=new nZ([e,t],e.message);return r.code=e.code,r}return t||e}var dm=class extends Error{constructor(e="The operation was aborted",r=void 0){if(r!==void 0&&typeof r!="object")throw new jE.ERR_INVALID_ARG_TYPE("options","Object",r);super(e,r),this.code="ABORT_ERR",this.name="AbortError"}};hr("ERR_ASSERTION","%s",Error);hr("ERR_INVALID_ARG_TYPE",(t,e,r)=>{Ro(typeof t=="string","'name' must be a string"),Array.isArray(e)||(e=[e]);let n="The ";t.endsWith(" argument")?n+=`${t} `:n+=`"${t}" ${t.includes(".")?"property":"argument"} `,n+="must be ";let i=[],s=[],o=[];for(let l of e)Ro(typeof l=="string","All expected entries have to be of type string"),sZ.includes(l)?i.push(l.toLowerCase()):oZ.test(l)?s.push(l):(Ro(l!=="object",'The value "object" should be written as "Object"'),o.push(l));if(s.length>0){let l=i.indexOf("object");l!==-1&&(i.splice(i,l,1),s.push("Object"))}if(i.length>0){switch(i.length){case 1:n+=`of type ${i[0]}`;break;case 2:n+=`one of type ${i[0]} or ${i[1]}`;break;default:{let l=i.pop();n+=`one of type ${i.join(", ")}, or ${l}`}}(s.length>0||o.length>0)&&(n+=" or ")}if(s.length>0){switch(s.length){case 1:n+=`an instance of ${s[0]}`;break;case 2:n+=`an instance of ${s[0]} or ${s[1]}`;break;default:{let l=s.pop();n+=`an instance of ${s.join(", ")}, or ${l}`}}o.length>0&&(n+=" or ")}switch(o.length){case 0:break;case 1:o[0].toLowerCase()!==o[0]&&(n+="an "),n+=`${o[0]}`;break;case 2:n+=`one of ${o[0]} or ${o[1]}`;break;default:{let l=o.pop();n+=`one of ${o.join(", ")}, or ${l}`}}if(r==null)n+=`. Received ${r}`;else if(typeof r=="function"&&r.name)n+=`. Received function ${r.name}`;else if(typeof r=="object"){var a;if((a=r.constructor)!==null&&a!==void 0&&a.name)n+=`. Received an instance of ${r.constructor.name}`;else{let l=XE(r,{depth:-1});n+=`. Received ${l}`}}else{let l=XE(r,{colors:!1});l.length>25&&(l=`${l.slice(0,25)}...`),n+=`. Received type ${typeof r} (${l})`}return n},TypeError);hr("ERR_INVALID_ARG_VALUE",(t,e,r="is invalid")=>{let n=XE(e);return n.length>128&&(n=n.slice(0,128)+"..."),`The ${t.includes(".")?"property":"argument"} '${t}' ${r}. Received ${n}`},TypeError);hr("ERR_INVALID_RETURN_VALUE",(t,e,r)=>{var n;let i=r!=null&&(n=r.constructor)!==null&&n!==void 0&&n.name?`instance of ${r.constructor.name}`:`type ${typeof r}`;return`Expected ${t} to be returned from the "${e}" function but got ${i}.`},TypeError);hr("ERR_MISSING_ARGS",(...t)=>{Ro(t.length>0,"At least one arg needs to be specified");let e,r=t.length;switch(t=(Array.isArray(t)?t:[t]).map(n=>`"${n}"`).join(" or "),r){case 1:e+=`The ${t[0]} argument`;break;case 2:e+=`The ${t[0]} and ${t[1]} arguments`;break;default:{let n=t.pop();e+=`The ${t.join(", ")}, and ${n} arguments`}break}return`${e} must be specified`},TypeError);hr("ERR_OUT_OF_RANGE",(t,e,r)=>{Ro(e,'Missing "range" argument');let n;if(Number.isInteger(r)&&Math.abs(r)>2**32)n=JP(String(r));else if(typeof r=="bigint"){n=String(r);let i=BigInt(2)**BigInt(32);(r>i||r<-i)&&(n=JP(n)),n+="n"}else n=XE(r);return`The value of "${t}" is out of range. It must be ${e}. Received ${n}`},RangeError);hr("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);hr("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);hr("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);hr("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);hr("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);hr("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);hr("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);hr("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);hr("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);hr("ERR_STREAM_WRITE_AFTER_END","write after end",Error);hr("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);ZP.exports={AbortError:dm,aggregateTwoErrors:QP(cZ),hideStackFrames:QP,codes:jE}});var cx=O((Ru,Su)=>{"use strict";Object.defineProperty(Ru,"__esModule",{value:!0});var sx=new WeakMap,fm=new WeakMap;function rt(t){let e=sx.get(t);return console.assert(e!=null,"'this' is expected an Event object, but got",t),e}function ex(t){if(t.passiveListener!=null){typeof console<"u"&&typeof console.error=="function"&&console.error("Unable to preventDefault inside passive event listener invocation.",t.passiveListener);return}t.event.cancelable&&(t.canceled=!0,typeof t.event.preventDefault=="function"&&t.event.preventDefault())}function rl(t,e){sx.set(this,{eventTarget:t,event:e,eventPhase:2,currentTarget:t,canceled:!1,stopped:!1,immediateStopped:!1,passiveListener:null,timeStamp:e.timeStamp||Date.now()}),Object.defineProperty(this,"isTrusted",{value:!1,enumerable:!0});let r=Object.keys(e);for(let n=0;n<r.length;++n){let i=r[n];i in this||Object.defineProperty(this,i,ox(i))}}rl.prototype={get type(){return rt(this).event.type},get target(){return rt(this).eventTarget},get currentTarget(){return rt(this).currentTarget},composedPath(){let t=rt(this).currentTarget;return t==null?[]:[t]},get NONE(){return 0},get CAPTURING_PHASE(){return 1},get AT_TARGET(){return 2},get BUBBLING_PHASE(){return 3},get eventPhase(){return rt(this).eventPhase},stopPropagation(){let t=rt(this);t.stopped=!0,typeof t.event.stopPropagation=="function"&&t.event.stopPropagation()},stopImmediatePropagation(){let t=rt(this);t.stopped=!0,t.immediateStopped=!0,typeof t.event.stopImmediatePropagation=="function"&&t.event.stopImmediatePropagation()},get bubbles(){return!!rt(this).event.bubbles},get cancelable(){return!!rt(this).event.cancelable},preventDefault(){ex(rt(this))},get defaultPrevented(){return rt(this).canceled},get composed(){return!!rt(this).event.composed},get timeStamp(){return rt(this).timeStamp},get srcElement(){return rt(this).eventTarget},get cancelBubble(){return rt(this).stopped},set cancelBubble(t){if(!t)return;let e=rt(this);e.stopped=!0,typeof e.event.cancelBubble=="boolean"&&(e.event.cancelBubble=!0)},get returnValue(){return!rt(this).canceled},set returnValue(t){t||ex(rt(this))},initEvent(){}};Object.defineProperty(rl.prototype,"constructor",{value:rl,configurable:!0,writable:!0});typeof window<"u"&&typeof window.Event<"u"&&(Object.setPrototypeOf(rl.prototype,window.Event.prototype),fm.set(window.Event.prototype,rl));function ox(t){return{get(){return rt(this).event[t]},set(e){rt(this).event[t]=e},configurable:!0,enumerable:!0}}function uZ(t){return{value(){let e=rt(this).event;return e[t].apply(e,arguments)},configurable:!0,enumerable:!0}}function dZ(t,e){let r=Object.keys(e);if(r.length===0)return t;function n(i,s){t.call(this,i,s)}n.prototype=Object.create(t.prototype,{constructor:{value:n,configurable:!0,writable:!0}});for(let i=0;i<r.length;++i){let s=r[i];if(!(s in t.prototype)){let a=typeof Object.getOwnPropertyDescriptor(e,s).value=="function";Object.defineProperty(n.prototype,s,a?uZ(s):ox(s))}}return n}function ax(t){if(t==null||t===Object.prototype)return rl;let e=fm.get(t);return e==null&&(e=dZ(ax(Object.getPrototypeOf(t)),t),fm.set(t,e)),e}function fZ(t,e){let r=ax(Object.getPrototypeOf(e));return new r(t,e)}function EZ(t){return rt(t).immediateStopped}function hZ(t,e){rt(t).eventPhase=e}function pZ(t,e){rt(t).currentTarget=e}function tx(t,e){rt(t).passiveListener=e}var lx=new WeakMap,rx=1,nx=2,zE=3;function KE(t){return t!==null&&typeof t=="object"}function Tu(t){let e=lx.get(t);if(e==null)throw new TypeError("'this' is expected an EventTarget object, but got another value.");return e}function TZ(t){return{get(){let r=Tu(this).get(t);for(;r!=null;){if(r.listenerType===zE)return r.listener;r=r.next}return null},set(e){typeof e!="function"&&!KE(e)&&(e=null);let r=Tu(this),n=null,i=r.get(t);for(;i!=null;)i.listenerType===zE?n!==null?n.next=i.next:i.next!==null?r.set(t,i.next):r.delete(t):n=i,i=i.next;if(e!==null){let s={listener:e,listenerType:zE,passive:!1,once:!1,next:null};n===null?r.set(t,s):n.next=s}},configurable:!0,enumerable:!0}}function Em(t,e){Object.defineProperty(t,`on${e}`,TZ(e))}function ix(t){function e(){Dn.call(this)}e.prototype=Object.create(Dn.prototype,{constructor:{value:e,configurable:!0,writable:!0}});for(let r=0;r<t.length;++r)Em(e.prototype,t[r]);return e}function Dn(){if(this instanceof Dn){lx.set(this,new Map);return}if(arguments.length===1&&Array.isArray(arguments[0]))return ix(arguments[0]);if(arguments.length>0){let t=new Array(arguments.length);for(let e=0;e<arguments.length;++e)t[e]=arguments[e];return ix(t)}throw new TypeError("Cannot call a class as a function")}Dn.prototype={addEventListener(t,e,r){if(e==null)return;if(typeof e!="function"&&!KE(e))throw new TypeError("'listener' should be a function or an object.");let n=Tu(this),i=KE(r),o=(i?!!r.capture:!!r)?rx:nx,a={listener:e,listenerType:o,passive:i&&!!r.passive,once:i&&!!r.once,next:null},l=n.get(t);if(l===void 0){n.set(t,a);return}let c=null;for(;l!=null;){if(l.listener===e&&l.listenerType===o)return;c=l,l=l.next}c.next=a},removeEventListener(t,e,r){if(e==null)return;let n=Tu(this),s=(KE(r)?!!r.capture:!!r)?rx:nx,o=null,a=n.get(t);for(;a!=null;){if(a.listener===e&&a.listenerType===s){o!==null?o.next=a.next:a.next!==null?n.set(t,a.next):n.delete(t);return}o=a,a=a.next}},dispatchEvent(t){if(t==null||typeof t.type!="string")throw new TypeError('"event.type" should be a string.');let e=Tu(this),r=t.type,n=e.get(r);if(n==null)return!0;let i=fZ(this,t),s=null;for(;n!=null;){if(n.once?s!==null?s.next=n.next:n.next!==null?e.set(r,n.next):e.delete(r):s=n,tx(i,n.passive?n.listener:null),typeof n.listener=="function")try{n.listener.call(this,i)}catch(o){typeof console<"u"&&typeof console.error=="function"&&console.error(o)}else n.listenerType!==zE&&typeof n.listener.handleEvent=="function"&&n.listener.handleEvent(i);if(EZ(i))break;n=n.next}return tx(i,null),hZ(i,0),pZ(i,null),!i.defaultPrevented}};Object.defineProperty(Dn.prototype,"constructor",{value:Dn,configurable:!0,writable:!0});typeof window<"u"&&typeof window.EventTarget<"u"&&Object.setPrototypeOf(Dn.prototype,window.EventTarget.prototype);Ru.defineEventAttribute=Em;Ru.EventTarget=Dn;Ru.default=Dn;Su.exports=Dn;Su.exports.EventTarget=Su.exports.default=Dn;Su.exports.defineEventAttribute=Em});var wt=O((mu,Au)=>{"use strict";Object.defineProperty(mu,"__esModule",{value:!0});var hm=cx(),ys=class extends hm.EventTarget{constructor(){throw super(),new TypeError("AbortSignal cannot be constructed directly")}get aborted(){let e=JE.get(this);if(typeof e!="boolean")throw new TypeError(`Expected 'this' to be an 'AbortSignal' object, but got ${this===null?"null":typeof this}`);return e}};hm.defineEventAttribute(ys.prototype,"abort");function SZ(){let t=Object.create(ys.prototype);return hm.EventTarget.call(t),JE.set(t,!1),t}function RZ(t){JE.get(t)===!1&&(JE.set(t,!0),t.dispatchEvent({type:"abort"}))}var JE=new WeakMap;Object.defineProperties(ys.prototype,{aborted:{enumerable:!0}});typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(ys.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortSignal"});var ws=class{constructor(){dx.set(this,SZ())}get signal(){return ux(this)}abort(){RZ(ux(this))}},dx=new WeakMap;function ux(t){let e=dx.get(t);if(e==null)throw new TypeError(`Expected 'this' to be an 'AbortController' object, but got ${t===null?"null":typeof t}`);return e}Object.defineProperties(ws.prototype,{signal:{enumerable:!0},abort:{enumerable:!0}});typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(ws.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortController"});mu.AbortController=ws;mu.AbortSignal=ys;mu.default=ws;Au.exports=ws;Au.exports.AbortController=Au.exports.default=ws;Au.exports.AbortSignal=ys});var Br=O((yxe,Tm)=>{"use strict";var AZ=require("buffer"),{format:mZ,inspect:gZ}=um(),{codes:{ERR_INVALID_ARG_TYPE:pm}}=Cr(),{kResistStopPropagation:_Z,AggregateError:IZ,SymbolDispose:NZ}=lt(),OZ=globalThis.AbortSignal||wt().AbortSignal,CZ=globalThis.AbortController||wt().AbortController,bZ=Object.getPrototypeOf(async function(){}).constructor,fx=globalThis.Blob||AZ.Blob,yZ=typeof fx<"u"?function(e){return e instanceof fx}:function(e){return!1},Ex=(t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new pm(e,"AbortSignal",t)},wZ=(t,e)=>{if(typeof t!="function")throw new pm(e,"Function",t)};Tm.exports={AggregateError:IZ,kEmptyObject:Object.freeze({}),once(t){let e=!1;return function(...r){e||(e=!0,t.apply(this,r))}},createDeferredPromise:function(){let t,e;return{promise:new Promise((n,i)=>{t=n,e=i}),resolve:t,reject:e}},promisify(t){return new Promise((e,r)=>{t((n,...i)=>n?r(n):e(...i))})},debuglog(){return function(){}},format:mZ,inspect:gZ,types:{isAsyncFunction(t){return t instanceof bZ},isArrayBufferView(t){return ArrayBuffer.isView(t)}},isBlob:yZ,deprecate(t,e){return t},addAbortListener:require("events").addAbortListener||function(e,r){if(e===void 0)throw new pm("signal","AbortSignal",e);Ex(e,"signal"),wZ(r,"listener");let n;return e.aborted?queueMicrotask(()=>r()):(e.addEventListener("abort",r,{__proto__:null,once:!0,[_Z]:!0}),n=()=>{e.removeEventListener("abort",r)}),{__proto__:null,[NZ](){var i;(i=n)===null||i===void 0||i()}}},AbortSignalAny:OZ.any||function(e){if(e.length===1)return e[0];let r=new CZ,n=()=>r.abort();return e.forEach(i=>{Ex(i,"signals"),i.addEventListener("abort",n,{once:!0})}),r.signal.addEventListener("abort",()=>{e.forEach(i=>i.removeEventListener("abort",n))},{once:!0}),r.signal}};Tm.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")});var il=O((wxe,Ix)=>{"use strict";var{ArrayIsArray:Rm,ArrayPrototypeIncludes:Sx,ArrayPrototypeJoin:Rx,ArrayPrototypeMap:LZ,NumberIsInteger:Am,NumberIsNaN:DZ,NumberMAX_SAFE_INTEGER:PZ,NumberMIN_SAFE_INTEGER:xZ,NumberParseInt:vZ,ObjectPrototypeHasOwnProperty:MZ,RegExpPrototypeExec:Ax,String:UZ,StringPrototypeToUpperCase:BZ,StringPrototypeTrim:FZ}=lt(),{hideStackFrames:En,codes:{ERR_SOCKET_BAD_PORT:HZ,ERR_INVALID_ARG_TYPE:br,ERR_INVALID_ARG_VALUE:nl,ERR_OUT_OF_RANGE:Ao,ERR_UNKNOWN_SIGNAL:hx}}=Cr(),{normalizeEncoding:GZ}=Br(),{isAsyncFunction:WZ,isArrayBufferView:$Z}=Br().types,px={};function kZ(t){return t===(t|0)}function YZ(t){return t===t>>>0}var VZ=/^[0-7]+$/,qZ="must be a 32-bit unsigned integer or an octal string";function XZ(t,e,r){if(typeof t>"u"&&(t=r),typeof t=="string"){if(Ax(VZ,t)===null)throw new nl(e,t,qZ);t=vZ(t,8)}return mx(t,e),t}var jZ=En((t,e,r=xZ,n=PZ)=>{if(typeof t!="number")throw new br(e,"number",t);if(!Am(t))throw new Ao(e,"an integer",t);if(t<r||t>n)throw new Ao(e,`>= ${r} && <= ${n}`,t)}),zZ=En((t,e,r=-2147483648,n=2147483647)=>{if(typeof t!="number")throw new br(e,"number",t);if(!Am(t))throw new Ao(e,"an integer",t);if(t<r||t>n)throw new Ao(e,`>= ${r} && <= ${n}`,t)}),mx=En((t,e,r=!1)=>{if(typeof t!="number")throw new br(e,"number",t);if(!Am(t))throw new Ao(e,"an integer",t);let n=r?1:0,i=4294967295;if(t<n||t>i)throw new Ao(e,`>= ${n} && <= ${i}`,t)});function mm(t,e){if(typeof t!="string")throw new br(e,"string",t)}function KZ(t,e,r=void 0,n){if(typeof t!="number")throw new br(e,"number",t);if(r!=null&&t<r||n!=null&&t>n||(r!=null||n!=null)&&DZ(t))throw new Ao(e,`${r!=null?`>= ${r}`:""}${r!=null&&n!=null?" && ":""}${n!=null?`<= ${n}`:""}`,t)}var JZ=En((t,e,r)=>{if(!Sx(r,t)){let i="must be one of: "+Rx(LZ(r,s=>typeof s=="string"?`'${s}'`:UZ(s)),", ");throw new nl(e,t,i)}});function gx(t,e){if(typeof t!="boolean")throw new br(e,"boolean",t)}function Sm(t,e,r){return t==null||!MZ(t,e)?r:t[e]}var QZ=En((t,e,r=null)=>{let n=Sm(r,"allowArray",!1),i=Sm(r,"allowFunction",!1);if(!Sm(r,"nullable",!1)&&t===null||!n&&Rm(t)||typeof t!="object"&&(!i||typeof t!="function"))throw new br(e,"Object",t)}),ZZ=En((t,e)=>{if(t!=null&&typeof t!="object"&&typeof t!="function")throw new br(e,"a dictionary",t)}),QE=En((t,e,r=0)=>{if(!Rm(t))throw new br(e,"Array",t);if(t.length<r){let n=`must be longer than ${r}`;throw new nl(e,t,n)}});function eee(t,e){QE(t,e);for(let r=0;r<t.length;r++)mm(t[r],`${e}[${r}]`)}function tee(t,e){QE(t,e);for(let r=0;r<t.length;r++)gx(t[r],`${e}[${r}]`)}function ree(t,e){QE(t,e);for(let r=0;r<t.length;r++){let n=t[r],i=`${e}[${r}]`;if(n==null)throw new br(i,"AbortSignal",n);_x(n,i)}}function nee(t,e="signal"){if(mm(t,e),px[t]===void 0)throw px[BZ(t)]!==void 0?new hx(t+" (signals must use all capital letters)"):new hx(t)}var iee=En((t,e="buffer")=>{if(!$Z(t))throw new br(e,["Buffer","TypedArray","DataView"],t)});function see(t,e){let r=GZ(e),n=t.length;if(r==="hex"&&n%2!==0)throw new nl("encoding",e,`is invalid for data of length ${n}`)}function oee(t,e="Port",r=!0){if(typeof t!="number"&&typeof t!="string"||typeof t=="string"&&FZ(t).length===0||+t!==+t>>>0||t>65535||t===0&&!r)throw new HZ(e,t,r);return t|0}var _x=En((t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new br(e,"AbortSignal",t)}),aee=En((t,e)=>{if(typeof t!="function")throw new br(e,"Function",t)}),lee=En((t,e)=>{if(typeof t!="function"||WZ(t))throw new br(e,"Function",t)}),cee=En((t,e)=>{if(t!==void 0)throw new br(e,"undefined",t)});function uee(t,e,r){if(!Sx(r,t))throw new br(e,`('${Rx(r,"|")}')`,t)}var dee=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function Tx(t,e){if(typeof t>"u"||!Ax(dee,t))throw new nl(e,t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function fee(t){if(typeof t=="string")return Tx(t,"hints"),t;if(Rm(t)){let e=t.length,r="";if(e===0)return r;for(let n=0;n<e;n++){let i=t[n];Tx(i,"hints"),r+=i,n!==e-1&&(r+=", ")}return r}throw new nl("hints",t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}Ix.exports={isInt32:kZ,isUint32:YZ,parseFileMode:XZ,validateArray:QE,validateStringArray:eee,validateBooleanArray:tee,validateAbortSignalArray:ree,validateBoolean:gx,validateBuffer:iee,validateDictionary:ZZ,validateEncoding:see,validateFunction:aee,validateInt32:zZ,validateInteger:jZ,validateNumber:KZ,validateObject:QZ,validateOneOf:JZ,validatePlainFunction:lee,validatePort:oee,validateSignalName:nee,validateString:mm,validateUint32:mx,validateUndefined:cee,validateUnion:uee,validateAbortSignal:_x,validateLinkHeaderValue:fee}});var je=O((Lxe,Nx)=>{Nx.exports=global.process});var Qn=O((Dxe,Hx)=>{"use strict";var{SymbolAsyncIterator:Ox,SymbolIterator:Cx,SymbolFor:mo}=lt(),bx=mo("nodejs.stream.destroyed"),yx=mo("nodejs.stream.errored"),gm=mo("nodejs.stream.readable"),_m=mo("nodejs.stream.writable"),wx=mo("nodejs.stream.disturbed"),Eee=mo("nodejs.webstream.isClosedPromise"),hee=mo("nodejs.webstream.controllerErrorFunction");function ZE(t,e=!1){var r;return!!(t&&typeof t.pipe=="function"&&typeof t.on=="function"&&(!e||typeof t.pause=="function"&&typeof t.resume=="function")&&(!t._writableState||((r=t._readableState)===null||r===void 0?void 0:r.readable)!==!1)&&(!t._writableState||t._readableState))}function eh(t){var e;return!!(t&&typeof t.write=="function"&&typeof t.on=="function"&&(!t._readableState||((e=t._writableState)===null||e===void 0?void 0:e.writable)!==!1))}function pee(t){return!!(t&&typeof t.pipe=="function"&&t._readableState&&typeof t.on=="function"&&typeof t.write=="function")}function Jn(t){return t&&(t._readableState||t._writableState||typeof t.write=="function"&&typeof t.on=="function"||typeof t.pipe=="function"&&typeof t.on=="function")}function Lx(t){return!!(t&&!Jn(t)&&typeof t.pipeThrough=="function"&&typeof t.getReader=="function"&&typeof t.cancel=="function")}function Dx(t){return!!(t&&!Jn(t)&&typeof t.getWriter=="function"&&typeof t.abort=="function")}function Px(t){return!!(t&&!Jn(t)&&typeof t.readable=="object"&&typeof t.writable=="object")}function Tee(t){return Lx(t)||Dx(t)||Px(t)}function See(t,e){return t==null?!1:e===!0?typeof t[Ox]=="function":e===!1?typeof t[Cx]=="function":typeof t[Ox]=="function"||typeof t[Cx]=="function"}function th(t){if(!Jn(t))return null;let e=t._writableState,r=t._readableState,n=e||r;return!!(t.destroyed||t[bx]||n!=null&&n.destroyed)}function xx(t){if(!eh(t))return null;if(t.writableEnded===!0)return!0;let e=t._writableState;return e!=null&&e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function Ree(t,e){if(!eh(t))return null;if(t.writableFinished===!0)return!0;let r=t._writableState;return r!=null&&r.errored?!1:typeof r?.finished!="boolean"?null:!!(r.finished||e===!1&&r.ended===!0&&r.length===0)}function Aee(t){if(!ZE(t))return null;if(t.readableEnded===!0)return!0;let e=t._readableState;return!e||e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function vx(t,e){if(!ZE(t))return null;let r=t._readableState;return r!=null&&r.errored?!1:typeof r?.endEmitted!="boolean"?null:!!(r.endEmitted||e===!1&&r.ended===!0&&r.length===0)}function Mx(t){return t&&t[gm]!=null?t[gm]:typeof t?.readable!="boolean"?null:th(t)?!1:ZE(t)&&t.readable&&!vx(t)}function Ux(t){return t&&t[_m]!=null?t[_m]:typeof t?.writable!="boolean"?null:th(t)?!1:eh(t)&&t.writable&&!xx(t)}function mee(t,e){return Jn(t)?th(t)?!0:!(e?.readable!==!1&&Mx(t)||e?.writable!==!1&&Ux(t)):null}function gee(t){var e,r;return Jn(t)?t.writableErrored?t.writableErrored:(e=(r=t._writableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function _ee(t){var e,r;return Jn(t)?t.readableErrored?t.readableErrored:(e=(r=t._readableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function Iee(t){if(!Jn(t))return null;if(typeof t.closed=="boolean")return t.closed;let e=t._writableState,r=t._readableState;return typeof e?.closed=="boolean"||typeof r?.closed=="boolean"?e?.closed||r?.closed:typeof t._closed=="boolean"&&Bx(t)?t._closed:null}function Bx(t){return typeof t._closed=="boolean"&&typeof t._defaultKeepAlive=="boolean"&&typeof t._removedConnection=="boolean"&&typeof t._removedContLen=="boolean"}function Fx(t){return typeof t._sent100=="boolean"&&Bx(t)}function Nee(t){var e;return typeof t._consuming=="boolean"&&typeof t._dumped=="boolean"&&((e=t.req)===null||e===void 0?void 0:e.upgradeOrConnect)===void 0}function Oee(t){if(!Jn(t))return null;let e=t._writableState,r=t._readableState,n=e||r;return!n&&Fx(t)||!!(n&&n.autoDestroy&&n.emitClose&&n.closed===!1)}function Cee(t){var e;return!!(t&&((e=t[wx])!==null&&e!==void 0?e:t.readableDidRead||t.readableAborted))}function bee(t){var e,r,n,i,s,o,a,l,c,u;return!!(t&&((e=(r=(n=(i=(s=(o=t[yx])!==null&&o!==void 0?o:t.readableErrored)!==null&&s!==void 0?s:t.writableErrored)!==null&&i!==void 0?i:(a=t._readableState)===null||a===void 0?void 0:a.errorEmitted)!==null&&n!==void 0?n:(l=t._writableState)===null||l===void 0?void 0:l.errorEmitted)!==null&&r!==void 0?r:(c=t._readableState)===null||c===void 0?void 0:c.errored)!==null&&e!==void 0?e:!((u=t._writableState)===null||u===void 0)&&u.errored))}Hx.exports={isDestroyed:th,kIsDestroyed:bx,isDisturbed:Cee,kIsDisturbed:wx,isErrored:bee,kIsErrored:yx,isReadable:Mx,kIsReadable:gm,kIsClosedPromise:Eee,kControllerErrorFunction:hee,kIsWritable:_m,isClosed:Iee,isDuplexNodeStream:pee,isFinished:mee,isIterable:See,isReadableNodeStream:ZE,isReadableStream:Lx,isReadableEnded:Aee,isReadableFinished:vx,isReadableErrored:_ee,isNodeStream:Jn,isWebStream:Tee,isWritable:Ux,isWritableNodeStream:eh,isWritableStream:Dx,isWritableEnded:xx,isWritableFinished:Ree,isWritableErrored:gee,isServerRequest:Nee,isServerResponse:Fx,willEmitClose:Oee,isTransformStream:Px}});var Fi=O((Pxe,bm)=>{"use strict";var Ls=je(),{AbortError:jx,codes:yee}=Cr(),{ERR_INVALID_ARG_TYPE:wee,ERR_STREAM_PREMATURE_CLOSE:Gx}=yee,{kEmptyObject:Nm,once:Om}=Br(),{validateAbortSignal:Lee,validateFunction:Dee,validateObject:Pee,validateBoolean:xee}=il(),{Promise:vee,PromisePrototypeThen:Mee,SymbolDispose:zx}=lt(),{isClosed:Uee,isReadable:Wx,isReadableNodeStream:Im,isReadableStream:Bee,isReadableFinished:$x,isReadableErrored:kx,isWritable:Yx,isWritableNodeStream:Vx,isWritableStream:Fee,isWritableFinished:qx,isWritableErrored:Xx,isNodeStream:Hee,willEmitClose:Gee,kIsClosedPromise:Wee}=Qn(),sl;function $ee(t){return t.setHeader&&typeof t.abort=="function"}var Cm=()=>{};function Kx(t,e,r){var n,i;if(arguments.length===2?(r=e,e=Nm):e==null?e=Nm:Pee(e,"options"),Dee(r,"callback"),Lee(e.signal,"options.signal"),r=Om(r),Bee(t)||Fee(t))return kee(t,e,r);if(!Hee(t))throw new wee("stream",["ReadableStream","WritableStream","Stream"],t);let s=(n=e.readable)!==null&&n!==void 0?n:Im(t),o=(i=e.writable)!==null&&i!==void 0?i:Vx(t),a=t._writableState,l=t._readableState,c=()=>{t.writable||E()},u=Gee(t)&&Im(t)===s&&Vx(t)===o,d=qx(t,!1),E=()=>{d=!0,t.destroyed&&(u=!1),!(u&&(!t.readable||s))&&(!s||f)&&r.call(t)},f=$x(t,!1),p=()=>{f=!0,t.destroyed&&(u=!1),!(u&&(!t.writable||o))&&(!o||d)&&r.call(t)},h=I=>{r.call(t,I)},S=Uee(t),T=()=>{S=!0;let I=Xx(t)||kx(t);if(I&&typeof I!="boolean")return r.call(t,I);if(s&&!f&&Im(t,!0)&&!$x(t,!1))return r.call(t,new Gx);if(o&&!d&&!qx(t,!1))return r.call(t,new Gx);r.call(t)},m=()=>{S=!0;let I=Xx(t)||kx(t);if(I&&typeof I!="boolean")return r.call(t,I);r.call(t)},R=()=>{t.req.on("finish",E)};$ee(t)?(t.on("complete",E),u||t.on("abort",T),t.req?R():t.on("request",R)):o&&!a&&(t.on("end",c),t.on("close",c)),!u&&typeof t.aborted=="boolean"&&t.on("aborted",T),t.on("end",p),t.on("finish",E),e.error!==!1&&t.on("error",h),t.on("close",T),S?Ls.nextTick(T):a!=null&&a.errorEmitted||l!=null&&l.errorEmitted?u||Ls.nextTick(m):(!s&&(!u||Wx(t))&&(d||Yx(t)===!1)||!o&&(!u||Yx(t))&&(f||Wx(t)===!1)||l&&t.req&&t.aborted)&&Ls.nextTick(m);let A=()=>{r=Cm,t.removeListener("aborted",T),t.removeListener("complete",E),t.removeListener("abort",T),t.removeListener("request",R),t.req&&t.req.removeListener("finish",E),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",E),t.removeListener("end",p),t.removeListener("error",h),t.removeListener("close",T)};if(e.signal&&!S){let I=()=>{let w=r;A(),w.call(t,new jx(void 0,{cause:e.signal.reason}))};if(e.signal.aborted)Ls.nextTick(I);else{sl=sl||Br().addAbortListener;let w=sl(e.signal,I),g=r;r=Om((...L)=>{w[zx](),g.apply(t,L)})}}return A}function kee(t,e,r){let n=!1,i=Cm;if(e.signal)if(i=()=>{n=!0,r.call(t,new jx(void 0,{cause:e.signal.reason}))},e.signal.aborted)Ls.nextTick(i);else{sl=sl||Br().addAbortListener;let o=sl(e.signal,i),a=r;r=Om((...l)=>{o[zx](),a.apply(t,l)})}let s=(...o)=>{n||Ls.nextTick(()=>r.apply(t,o))};return Mee(t[Wee].promise,s,s),Cm}function Yee(t,e){var r;let n=!1;return e===null&&(e=Nm),(r=e)!==null&&r!==void 0&&r.cleanup&&(xee(e.cleanup,"cleanup"),n=e.cleanup),new vee((i,s)=>{let o=Kx(t,e,a=>{n&&o(),a?s(a):i()})})}bm.exports=Kx;bm.exports.finished=Yee});var go=O((xxe,iv)=>{"use strict";var Zn=je(),{aggregateTwoErrors:Vee,codes:{ERR_MULTIPLE_CALLBACK:qee},AbortError:Xee}=Cr(),{Symbol:Zx}=lt(),{kIsDestroyed:jee,isDestroyed:zee,isFinished:Kee,isServerRequest:Jee}=Qn(),ev=Zx("kDestroy"),ym=Zx("kConstruct");function tv(t,e,r){t&&(t.stack,e&&!e.errored&&(e.errored=t),r&&!r.errored&&(r.errored=t))}function Qee(t,e){let r=this._readableState,n=this._writableState,i=n||r;return n!=null&&n.destroyed||r!=null&&r.destroyed?(typeof e=="function"&&e(),this):(tv(t,n,r),n&&(n.destroyed=!0),r&&(r.destroyed=!0),i.constructed?Jx(this,t,e):this.once(ev,function(s){Jx(this,Vee(s,t),e)}),this)}function Jx(t,e,r){let n=!1;function i(s){if(n)return;n=!0;let o=t._readableState,a=t._writableState;tv(s,a,o),a&&(a.closed=!0),o&&(o.closed=!0),typeof r=="function"&&r(s),s?Zn.nextTick(Zee,t,s):Zn.nextTick(rv,t)}try{t._destroy(e||null,i)}catch(s){i(s)}}function Zee(t,e){wm(t,e),rv(t)}function rv(t){let e=t._readableState,r=t._writableState;r&&(r.closeEmitted=!0),e&&(e.closeEmitted=!0),(r!=null&&r.emitClose||e!=null&&e.emitClose)&&t.emit("close")}function wm(t,e){let r=t._readableState,n=t._writableState;n!=null&&n.errorEmitted||r!=null&&r.errorEmitted||(n&&(n.errorEmitted=!0),r&&(r.errorEmitted=!0),t.emit("error",e))}function ete(){let t=this._readableState,e=this._writableState;t&&(t.constructed=!0,t.closed=!1,t.closeEmitted=!1,t.destroyed=!1,t.errored=null,t.errorEmitted=!1,t.reading=!1,t.ended=t.readable===!1,t.endEmitted=t.readable===!1),e&&(e.constructed=!0,e.destroyed=!1,e.closed=!1,e.closeEmitted=!1,e.errored=null,e.errorEmitted=!1,e.finalCalled=!1,e.prefinished=!1,e.ended=e.writable===!1,e.ending=e.writable===!1,e.finished=e.writable===!1)}function Lm(t,e,r){let n=t._readableState,i=t._writableState;if(i!=null&&i.destroyed||n!=null&&n.destroyed)return this;n!=null&&n.autoDestroy||i!=null&&i.autoDestroy?t.destroy(e):e&&(e.stack,i&&!i.errored&&(i.errored=e),n&&!n.errored&&(n.errored=e),r?Zn.nextTick(wm,t,e):wm(t,e))}function tte(t,e){if(typeof t._construct!="function")return;let r=t._readableState,n=t._writableState;r&&(r.constructed=!1),n&&(n.constructed=!1),t.once(ym,e),!(t.listenerCount(ym)>1)&&Zn.nextTick(rte,t)}function rte(t){let e=!1;function r(n){if(e){Lm(t,n??new qee);return}e=!0;let i=t._readableState,s=t._writableState,o=s||i;i&&(i.constructed=!0),s&&(s.constructed=!0),o.destroyed?t.emit(ev,n):n?Lm(t,n,!0):Zn.nextTick(nte,t)}try{t._construct(n=>{Zn.nextTick(r,n)})}catch(n){Zn.nextTick(r,n)}}function nte(t){t.emit(ym)}function Qx(t){return t?.setHeader&&typeof t.abort=="function"}function nv(t){t.emit("close")}function ite(t,e){t.emit("error",e),Zn.nextTick(nv,t)}function ste(t,e){!t||zee(t)||(!e&&!Kee(t)&&(e=new Xee),Jee(t)?(t.socket=null,t.destroy(e)):Qx(t)?t.abort():Qx(t.req)?t.req.abort():typeof t.destroy=="function"?t.destroy(e):typeof t.close=="function"?t.close():e?Zn.nextTick(ite,t,e):Zn.nextTick(nv,t),t.destroyed||(t[jee]=!0))}iv.exports={construct:tte,destroyer:ste,destroy:Qee,undestroy:ete,errorOrDestroy:Lm}});var ih=O((vxe,ov)=>{"use strict";var{ArrayIsArray:ote,ObjectSetPrototypeOf:sv}=lt(),{EventEmitter:rh}=require("events");function nh(t){rh.call(this,t)}sv(nh.prototype,rh.prototype);sv(nh,rh);nh.prototype.pipe=function(t,e){let r=this;function n(u){t.writable&&t.write(u)===!1&&r.pause&&r.pause()}r.on("data",n);function i(){r.readable&&r.resume&&r.resume()}t.on("drain",i),!t._isStdio&&(!e||e.end!==!1)&&(r.on("end",o),r.on("close",a));let s=!1;function o(){s||(s=!0,t.end())}function a(){s||(s=!0,typeof t.destroy=="function"&&t.destroy())}function l(u){c(),rh.listenerCount(this,"error")===0&&this.emit("error",u)}Dm(r,"error",l),Dm(t,"error",l);function c(){r.removeListener("data",n),t.removeListener("drain",i),r.removeListener("end",o),r.removeListener("close",a),r.removeListener("error",l),t.removeListener("error",l),r.removeListener("end",c),r.removeListener("close",c),t.removeListener("close",c)}return r.on("end",c),r.on("close",c),t.on("close",c),t.emit("pipe",r),t};function Dm(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):ote(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}ov.exports={Stream:nh,prependListener:Dm}});var gu=O((Mxe,sh)=>{"use strict";var{SymbolDispose:ate}=lt(),{AbortError:av,codes:lte}=Cr(),{isNodeStream:lv,isWebStream:cte,kControllerErrorFunction:ute}=Qn(),dte=Fi(),{ERR_INVALID_ARG_TYPE:cv}=lte,Pm,fte=(t,e)=>{if(typeof t!="object"||!("aborted"in t))throw new cv(e,"AbortSignal",t)};sh.exports.addAbortSignal=function(e,r){if(fte(e,"signal"),!lv(r)&&!cte(r))throw new cv("stream",["ReadableStream","WritableStream","Stream"],r);return sh.exports.addAbortSignalNoValidate(e,r)};sh.exports.addAbortSignalNoValidate=function(t,e){if(typeof t!="object"||!("aborted"in t))return e;let r=lv(e)?()=>{e.destroy(new av(void 0,{cause:t.reason}))}:()=>{e[ute](new av(void 0,{cause:t.reason}))};if(t.aborted)r();else{Pm=Pm||Br().addAbortListener;let n=Pm(t,r);dte(e,n[ate])}return e}});var fv=O((Bxe,dv)=>{"use strict";var{StringPrototypeSlice:uv,SymbolIterator:Ete,TypedArrayPrototypeSet:oh,Uint8Array:hte}=lt(),{Buffer:xm}=require("buffer"),{inspect:pte}=Br();dv.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){let r={data:e,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length}unshift(e){let r={data:e,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length}shift(){if(this.length===0)return;let e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return"";let r=this.head,n=""+r.data;for(;(r=r.next)!==null;)n+=e+r.data;return n}concat(e){if(this.length===0)return xm.alloc(0);let r=xm.allocUnsafe(e>>>0),n=this.head,i=0;for(;n;)oh(r,n.data,i),i+=n.data.length,n=n.next;return r}consume(e,r){let n=this.head.data;if(e<n.length){let i=n.slice(0,e);return this.head.data=n.slice(e),i}return e===n.length?this.shift():r?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[Ete](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let r="",n=this.head,i=0;do{let s=n.data;if(e>s.length)r+=s,e-=s.length;else{e===s.length?(r+=s,++i,n.next?this.head=n.next:this.head=this.tail=null):(r+=uv(s,0,e),this.head=n,n.data=uv(s,e));break}++i}while((n=n.next)!==null);return this.length-=i,r}_getBuffer(e){let r=xm.allocUnsafe(e),n=e,i=this.head,s=0;do{let o=i.data;if(e>o.length)oh(r,o,n-e),e-=o.length;else{e===o.length?(oh(r,o,n-e),++s,i.next?this.head=i.next:this.head=this.tail=null):(oh(r,new hte(o.buffer,o.byteOffset,e),n-e),this.head=i,i.data=o.slice(e));break}++s}while((i=i.next)!==null);return this.length-=s,r}[Symbol.for("nodejs.util.inspect.custom")](e,r){return pte(this,{...r,depth:0,customInspect:!1})}}});var _u=O((Fxe,Tv)=>{"use strict";var{MathFloor:Tte,NumberIsInteger:Ste}=lt(),{validateInteger:Rte}=il(),{ERR_INVALID_ARG_VALUE:Ate}=Cr().codes,Ev=16*1024,hv=16;function mte(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function pv(t){return t?hv:Ev}function gte(t,e){Rte(e,"value",0),t?hv=e:Ev=e}function _te(t,e,r,n){let i=mte(e,n,r);if(i!=null){if(!Ste(i)||i<0){let s=n?`options.${r}`:"options.highWaterMark";throw new Ate(s,i)}return Tte(i)}return pv(t.objectMode)}Tv.exports={getHighWaterMark:_te,getDefaultHighWaterMark:pv,setDefaultHighWaterMark:gte}});var Av=O((vm,Rv)=>{var ah=require("buffer"),ei=ah.Buffer;function Sv(t,e){for(var r in t)e[r]=t[r]}ei.from&&ei.alloc&&ei.allocUnsafe&&ei.allocUnsafeSlow?Rv.exports=ah:(Sv(ah,vm),vm.Buffer=_o);function _o(t,e,r){return ei(t,e,r)}_o.prototype=Object.create(ei.prototype);Sv(ei,_o);_o.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return ei(t,e,r)};_o.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=ei(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};_o.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return ei(t)};_o.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return ah.SlowBuffer(t)}});var Nu=O(gv=>{"use strict";var Um=Av().Buffer,mv=Um.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Ite(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function Nte(t){var e=Ite(t);if(typeof e!="string"&&(Um.isEncoding===mv||!mv(t)))throw new Error("Unknown encoding: "+t);return e||t}gv.StringDecoder=Iu;function Iu(t){this.encoding=Nte(t);var e;switch(this.encoding){case"utf16le":this.text=Lte,this.end=Dte,e=4;break;case"utf8":this.fillLast=bte,e=4;break;case"base64":this.text=Pte,this.end=xte,e=3;break;default:this.write=vte,this.end=Mte;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Um.allocUnsafe(e)}Iu.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};Iu.prototype.end=wte;Iu.prototype.text=yte;Iu.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function Mm(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function Ote(t,e,r){var n=e.length-1;if(n<r)return 0;var i=Mm(e[n]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--n<r||i===-2?0:(i=Mm(e[n]),i>=0?(i>0&&(t.lastNeed=i-2),i):--n<r||i===-2?0:(i=Mm(e[n]),i>=0?(i>0&&(i===2?i=0:t.lastNeed=i-3),i):0))}function Cte(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function bte(t){var e=this.lastTotal-this.lastNeed,r=Cte(this,t,e);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function yte(t,e){var r=Ote(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function wte(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function Lte(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function Dte(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function Pte(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function xte(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function vte(t){return t.toString(this.encoding)}function Mte(t){return t&&t.length?this.write(t):""}});var Bm=O((Gxe,Ov)=>{"use strict";var _v=je(),{PromisePrototypeThen:Ute,SymbolAsyncIterator:Iv,SymbolIterator:Nv}=lt(),{Buffer:Bte}=require("buffer"),{ERR_INVALID_ARG_TYPE:Fte,ERR_STREAM_NULL_VALUES:Hte}=Cr().codes;function Gte(t,e,r){let n;if(typeof e=="string"||e instanceof Bte)return new t({objectMode:!0,...r,read(){this.push(e),this.push(null)}});let i;if(e&&e[Iv])i=!0,n=e[Iv]();else if(e&&e[Nv])i=!1,n=e[Nv]();else throw new Fte("iterable",["Iterable"],e);let s=new t({objectMode:!0,highWaterMark:1,...r}),o=!1;s._read=function(){o||(o=!0,l())},s._destroy=function(c,u){Ute(a(c),()=>_v.nextTick(u,c),d=>_v.nextTick(u,d||c))};async function a(c){let u=c!=null,d=typeof n.throw=="function";if(u&&d){let{value:E,done:f}=await n.throw(c);if(await E,f)return}if(typeof n.return=="function"){let{value:E}=await n.return();await E}}async function l(){for(;;){try{let{value:c,done:u}=i?await n.next():n.next();if(u)s.push(null);else{let d=c&&typeof c.then=="function"?await c:c;if(d===null)throw o=!1,new Hte;if(s.push(d))continue;o=!1}}catch(c){s.destroy(c)}break}}return s}Ov.exports=Gte});var Cu=O((Wxe,kv)=>{"use strict";var Pn=je(),{ArrayPrototypeIndexOf:Wte,NumberIsInteger:$te,NumberIsNaN:kte,NumberParseInt:Yte,ObjectDefineProperties:Vm,ObjectKeys:Vte,ObjectSetPrototypeOf:yv,Promise:wv,SafeSet:qte,SymbolAsyncDispose:Xte,SymbolAsyncIterator:jte,Symbol:zte}=lt();kv.exports=Ae;Ae.ReadableState=dh;var{EventEmitter:Kte}=require("events"),{Stream:Ds,prependListener:Jte}=ih(),{Buffer:Fm}=require("buffer"),{addAbortSignal:Qte}=gu(),Lv=Fi(),Pe=Br().debuglog("stream",t=>{Pe=t}),Zte=fv(),ll=go(),{getHighWaterMark:ere,getDefaultHighWaterMark:tre}=_u(),{aggregateTwoErrors:Cv,codes:{ERR_INVALID_ARG_TYPE:rre,ERR_METHOD_NOT_IMPLEMENTED:nre,ERR_OUT_OF_RANGE:ire,ERR_STREAM_PUSH_AFTER_EOF:sre,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:ore},AbortError:are}=Cr(),{validateObject:lre}=il(),Io=zte("kPaused"),{StringDecoder:Dv}=Nu(),cre=Bm();yv(Ae.prototype,Ds.prototype);yv(Ae,Ds);var Hm=()=>{},{errorOrDestroy:ol}=ll,al=1,ure=2,Pv=4,Ou=8,xv=16,lh=32,ch=64,vv=128,dre=256,fre=512,Ere=1024,km=2048,Ym=4096,hre=8192,pre=16384,Tre=32768,Mv=65536,Sre=1<<17,Rre=1<<18;function Ft(t){return{enumerable:!1,get(){return(this.state&t)!==0},set(e){e?this.state|=t:this.state&=~t}}}Vm(dh.prototype,{objectMode:Ft(al),ended:Ft(ure),endEmitted:Ft(Pv),reading:Ft(Ou),constructed:Ft(xv),sync:Ft(lh),needReadable:Ft(ch),emittedReadable:Ft(vv),readableListening:Ft(dre),resumeScheduled:Ft(fre),errorEmitted:Ft(Ere),emitClose:Ft(km),autoDestroy:Ft(Ym),destroyed:Ft(hre),closed:Ft(pre),closeEmitted:Ft(Tre),multiAwaitDrain:Ft(Mv),readingMore:Ft(Sre),dataEmitted:Ft(Rre)});function dh(t,e,r){typeof r!="boolean"&&(r=e instanceof ti()),this.state=km|Ym|xv|lh,t&&t.objectMode&&(this.state|=al),r&&t&&t.readableObjectMode&&(this.state|=al),this.highWaterMark=t?ere(this,t,"readableHighWaterMark",r):tre(!1),this.buffer=new Zte,this.length=0,this.pipes=[],this.flowing=null,this[Io]=null,t&&t.emitClose===!1&&(this.state&=~km),t&&t.autoDestroy===!1&&(this.state&=~Ym),this.errored=null,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,t&&t.encoding&&(this.decoder=new Dv(t.encoding),this.encoding=t.encoding)}function Ae(t){if(!(this instanceof Ae))return new Ae(t);let e=this instanceof ti();this._readableState=new dh(t,this,e),t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&!e&&Qte(t.signal,this)),Ds.call(this,t),ll.construct(this,()=>{this._readableState.needReadable&&uh(this,this._readableState)})}Ae.prototype.destroy=ll.destroy;Ae.prototype._undestroy=ll.undestroy;Ae.prototype._destroy=function(t,e){e(t)};Ae.prototype[Kte.captureRejectionSymbol]=function(t){this.destroy(t)};Ae.prototype[Xte]=function(){let t;return this.destroyed||(t=this.readableEnded?null:new are,this.destroy(t)),new wv((e,r)=>Lv(this,n=>n&&n!==t?r(n):e(null)))};Ae.prototype.push=function(t,e){return Uv(this,t,e,!1)};Ae.prototype.unshift=function(t,e){return Uv(this,t,e,!0)};function Uv(t,e,r,n){Pe("readableAddChunk",e);let i=t._readableState,s;if((i.state&al)===0&&(typeof e=="string"?(r=r||i.defaultEncoding,i.encoding!==r&&(n&&i.encoding?e=Fm.from(e,r).toString(i.encoding):(e=Fm.from(e,r),r=""))):e instanceof Fm?r="":Ds._isUint8Array(e)?(e=Ds._uint8ArrayToBuffer(e),r=""):e!=null&&(s=new rre("chunk",["string","Buffer","Uint8Array"],e))),s)ol(t,s);else if(e===null)i.state&=~Ou,gre(t,i);else if((i.state&al)!==0||e&&e.length>0)if(n)if((i.state&Pv)!==0)ol(t,new ore);else{if(i.destroyed||i.errored)return!1;Gm(t,i,e,!0)}else if(i.ended)ol(t,new sre);else{if(i.destroyed||i.errored)return!1;i.state&=~Ou,i.decoder&&!r?(e=i.decoder.write(e),i.objectMode||e.length!==0?Gm(t,i,e,!1):uh(t,i)):Gm(t,i,e,!1)}else n||(i.state&=~Ou,uh(t,i));return!i.ended&&(i.length<i.highWaterMark||i.length===0)}function Gm(t,e,r,n){e.flowing&&e.length===0&&!e.sync&&t.listenerCount("data")>0?((e.state&Mv)!==0?e.awaitDrainWriters.clear():e.awaitDrainWriters=null,e.dataEmitted=!0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),(e.state&ch)!==0&&fh(t)),uh(t,e)}Ae.prototype.isPaused=function(){let t=this._readableState;return t[Io]===!0||t.flowing===!1};Ae.prototype.setEncoding=function(t){let e=new Dv(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;let r=this._readableState.buffer,n="";for(let i of r)n+=e.write(i);return r.clear(),n!==""&&r.push(n),this._readableState.length=n.length,this};var Are=1073741824;function mre(t){if(t>Are)throw new ire("size","<= 1GiB",t);return t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++,t}function bv(t,e){return t<=0||e.length===0&&e.ended?0:(e.state&al)!==0?1:kte(t)?e.flowing&&e.length?e.buffer.first().length:e.length:t<=e.length?t:e.ended?e.length:0}Ae.prototype.read=function(t){Pe("read",t),t===void 0?t=NaN:$te(t)||(t=Yte(t,10));let e=this._readableState,r=t;if(t>e.highWaterMark&&(e.highWaterMark=mre(t)),t!==0&&(e.state&=~vv),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return Pe("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?Wm(this):fh(this),null;if(t=bv(t,e),t===0&&e.ended)return e.length===0&&Wm(this),null;let n=(e.state&ch)!==0;if(Pe("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,Pe("length less than watermark",n)),e.ended||e.reading||e.destroyed||e.errored||!e.constructed)n=!1,Pe("reading, ended or constructing",n);else if(n){Pe("do read"),e.state|=Ou|lh,e.length===0&&(e.state|=ch);try{this._read(e.highWaterMark)}catch(s){ol(this,s)}e.state&=~lh,e.reading||(t=bv(r,e))}let i;return t>0?i=Wv(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.multiAwaitDrain?e.awaitDrainWriters.clear():e.awaitDrainWriters=null),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&Wm(this)),i!==null&&!e.errorEmitted&&!e.closeEmitted&&(e.dataEmitted=!0,this.emit("data",i)),i};function gre(t,e){if(Pe("onEofChunk"),!e.ended){if(e.decoder){let r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?fh(t):(e.needReadable=!1,e.emittedReadable=!0,Bv(t))}}function fh(t){let e=t._readableState;Pe("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(Pe("emitReadable",e.flowing),e.emittedReadable=!0,Pn.nextTick(Bv,t))}function Bv(t){let e=t._readableState;Pe("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&!e.errored&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,Hv(t)}function uh(t,e){!e.readingMore&&e.constructed&&(e.readingMore=!0,Pn.nextTick(_re,t,e))}function _re(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){let r=e.length;if(Pe("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}Ae.prototype._read=function(t){throw new nre("_read()")};Ae.prototype.pipe=function(t,e){let r=this,n=this._readableState;n.pipes.length===1&&(n.multiAwaitDrain||(n.multiAwaitDrain=!0,n.awaitDrainWriters=new qte(n.awaitDrainWriters?[n.awaitDrainWriters]:[]))),n.pipes.push(t),Pe("pipe count=%d opts=%j",n.pipes.length,e);let s=(!e||e.end!==!1)&&t!==Pn.stdout&&t!==Pn.stderr?a:S;n.endEmitted?Pn.nextTick(s):r.once("end",s),t.on("unpipe",o);function o(T,m){Pe("onunpipe"),T===r&&m&&m.hasUnpiped===!1&&(m.hasUnpiped=!0,u())}function a(){Pe("onend"),t.end()}let l,c=!1;function u(){Pe("cleanup"),t.removeListener("close",p),t.removeListener("finish",h),l&&t.removeListener("drain",l),t.removeListener("error",f),t.removeListener("unpipe",o),r.removeListener("end",a),r.removeListener("end",S),r.removeListener("data",E),c=!0,l&&n.awaitDrainWriters&&(!t._writableState||t._writableState.needDrain)&&l()}function d(){c||(n.pipes.length===1&&n.pipes[0]===t?(Pe("false write response, pause",0),n.awaitDrainWriters=t,n.multiAwaitDrain=!1):n.pipes.length>1&&n.pipes.includes(t)&&(Pe("false write response, pause",n.awaitDrainWriters.size),n.awaitDrainWriters.add(t)),r.pause()),l||(l=Ire(r,t),t.on("drain",l))}r.on("data",E);function E(T){Pe("ondata");let m=t.write(T);Pe("dest.write",m),m===!1&&d()}function f(T){if(Pe("onerror",T),S(),t.removeListener("error",f),t.listenerCount("error")===0){let m=t._writableState||t._readableState;m&&!m.errorEmitted?ol(t,T):t.emit("error",T)}}Jte(t,"error",f);function p(){t.removeListener("finish",h),S()}t.once("close",p);function h(){Pe("onfinish"),t.removeListener("close",p),S()}t.once("finish",h);function S(){Pe("unpipe"),r.unpipe(t)}return t.emit("pipe",r),t.writableNeedDrain===!0?d():n.flowing||(Pe("pipe resume"),r.resume()),t};function Ire(t,e){return function(){let n=t._readableState;n.awaitDrainWriters===e?(Pe("pipeOnDrain",1),n.awaitDrainWriters=null):n.multiAwaitDrain&&(Pe("pipeOnDrain",n.awaitDrainWriters.size),n.awaitDrainWriters.delete(e)),(!n.awaitDrainWriters||n.awaitDrainWriters.size===0)&&t.listenerCount("data")&&t.resume()}}Ae.prototype.unpipe=function(t){let e=this._readableState,r={hasUnpiped:!1};if(e.pipes.length===0)return this;if(!t){let i=e.pipes;e.pipes=[],this.pause();for(let s=0;s<i.length;s++)i[s].emit("unpipe",this,{hasUnpiped:!1});return this}let n=Wte(e.pipes,t);return n===-1?this:(e.pipes.splice(n,1),e.pipes.length===0&&this.pause(),t.emit("unpipe",this,r),this)};Ae.prototype.on=function(t,e){let r=Ds.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,Pe("on readable",n.length,n.reading),n.length?fh(this):n.reading||Pn.nextTick(Nre,this)),r};Ae.prototype.addListener=Ae.prototype.on;Ae.prototype.removeListener=function(t,e){let r=Ds.prototype.removeListener.call(this,t,e);return t==="readable"&&Pn.nextTick(Fv,this),r};Ae.prototype.off=Ae.prototype.removeListener;Ae.prototype.removeAllListeners=function(t){let e=Ds.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&Pn.nextTick(Fv,this),e};function Fv(t){let e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&e[Io]===!1?e.flowing=!0:t.listenerCount("data")>0?t.resume():e.readableListening||(e.flowing=null)}function Nre(t){Pe("readable nexttick read 0"),t.read(0)}Ae.prototype.resume=function(){let t=this._readableState;return t.flowing||(Pe("resume"),t.flowing=!t.readableListening,Ore(this,t)),t[Io]=!1,this};function Ore(t,e){e.resumeScheduled||(e.resumeScheduled=!0,Pn.nextTick(Cre,t,e))}function Cre(t,e){Pe("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),Hv(t),e.flowing&&!e.reading&&t.read(0)}Ae.prototype.pause=function(){return Pe("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Pe("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[Io]=!0,this};function Hv(t){let e=t._readableState;for(Pe("flow",e.flowing);e.flowing&&t.read()!==null;);}Ae.prototype.wrap=function(t){let e=!1;t.on("data",n=>{!this.push(n)&&t.pause&&(e=!0,t.pause())}),t.on("end",()=>{this.push(null)}),t.on("error",n=>{ol(this,n)}),t.on("close",()=>{this.destroy()}),t.on("destroy",()=>{this.destroy()}),this._read=()=>{e&&t.resume&&(e=!1,t.resume())};let r=Vte(t);for(let n=1;n<r.length;n++){let i=r[n];this[i]===void 0&&typeof t[i]=="function"&&(this[i]=t[i].bind(t))}return this};Ae.prototype[jte]=function(){return Gv(this)};Ae.prototype.iterator=function(t){return t!==void 0&&lre(t,"options"),Gv(this,t)};function Gv(t,e){typeof t.read!="function"&&(t=Ae.wrap(t,{objectMode:!0}));let r=bre(t,e);return r.stream=t,r}async function*bre(t,e){let r=Hm;function n(o){this===t?(r(),r=Hm):r=o}t.on("readable",n);let i,s=Lv(t,{writable:!1},o=>{i=o?Cv(i,o):null,r(),r=Hm});try{for(;;){let o=t.destroyed?null:t.read();if(o!==null)yield o;else{if(i)throw i;if(i===null)return;await new wv(n)}}}catch(o){throw i=Cv(i,o),i}finally{(i||e?.destroyOnReturn!==!1)&&(i===void 0||t._readableState.autoDestroy)?ll.destroyer(t,null):(t.off("readable",n),s())}}Vm(Ae.prototype,{readable:{__proto__:null,get(){let t=this._readableState;return!!t&&t.readable!==!1&&!t.destroyed&&!t.errorEmitted&&!t.endEmitted},set(t){this._readableState&&(this._readableState.readable=!!t)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(t){this._readableState&&(this._readableState.destroyed=t)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}});Vm(dh.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[Io]!==!1},set(t){this[Io]=!!t}}});Ae._fromList=Wv;function Wv(t,e){if(e.length===0)return null;let r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function Wm(t){let e=t._readableState;Pe("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,Pn.nextTick(yre,e,t))}function yre(t,e){if(Pe("endReadableNT",t.endEmitted,t.length),!t.errored&&!t.closeEmitted&&!t.endEmitted&&t.length===0){if(t.endEmitted=!0,e.emit("end"),e.writable&&e.allowHalfOpen===!1)Pn.nextTick(wre,e);else if(t.autoDestroy){let r=e._writableState;(!r||r.autoDestroy&&(r.finished||r.writable===!1))&&e.destroy()}}}function wre(t){t.writable&&!t.writableEnded&&!t.destroyed&&t.end()}Ae.from=function(t,e){return cre(Ae,t,e)};var $m;function $v(){return $m===void 0&&($m={}),$m}Ae.fromWeb=function(t,e){return $v().newStreamReadableFromReadableStream(t,e)};Ae.toWeb=function(t,e){return $v().newReadableStreamFromStreamReadable(t,e)};Ae.wrap=function(t,e){var r,n;return new Ae({objectMode:(r=(n=t.readableObjectMode)!==null&&n!==void 0?n:t.objectMode)!==null&&r!==void 0?r:!0,...e,destroy(i,s){ll.destroyer(t,i),s(i)}}).wrap(t)}});var Sh=O(($xe,tM)=>{"use strict";var No=je(),{ArrayPrototypeSlice:qv,Error:Lre,FunctionPrototypeSymbolHasInstance:Xv,ObjectDefineProperty:jv,ObjectDefineProperties:Dre,ObjectSetPrototypeOf:zv,StringPrototypeToLowerCase:Pre,Symbol:xre,SymbolHasInstance:vre}=lt();tM.exports=pt;pt.WritableState=wu;var{EventEmitter:Mre}=require("events"),bu=ih().Stream,{Buffer:Eh}=require("buffer"),Th=go(),{addAbortSignal:Ure}=gu(),{getHighWaterMark:Bre,getDefaultHighWaterMark:Fre}=_u(),{ERR_INVALID_ARG_TYPE:Hre,ERR_METHOD_NOT_IMPLEMENTED:Gre,ERR_MULTIPLE_CALLBACK:Kv,ERR_STREAM_CANNOT_PIPE:Wre,ERR_STREAM_DESTROYED:yu,ERR_STREAM_ALREADY_FINISHED:$re,ERR_STREAM_NULL_VALUES:kre,ERR_STREAM_WRITE_AFTER_END:Yre,ERR_UNKNOWN_ENCODING:Jv}=Cr().codes,{errorOrDestroy:cl}=Th;zv(pt.prototype,bu.prototype);zv(pt,bu);function jm(){}var ul=xre("kOnFinished");function wu(t,e,r){typeof r!="boolean"&&(r=e instanceof ti()),this.objectMode=!!(t&&t.objectMode),r&&(this.objectMode=this.objectMode||!!(t&&t.writableObjectMode)),this.highWaterMark=t?Bre(this,t,"writableHighWaterMark",r):Fre(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let n=!!(t&&t.decodeStrings===!1);this.decodeStrings=!n,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=qre.bind(void 0,e),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,ph(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!t||t.emitClose!==!1,this.autoDestroy=!t||t.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[ul]=[]}function ph(t){t.buffered=[],t.bufferedIndex=0,t.allBuffers=!0,t.allNoop=!0}wu.prototype.getBuffer=function(){return qv(this.buffered,this.bufferedIndex)};jv(wu.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function pt(t){let e=this instanceof ti();if(!e&&!Xv(pt,this))return new pt(t);this._writableState=new wu(t,this,e),t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&Ure(t.signal,this)),bu.call(this,t),Th.construct(this,()=>{let r=this._writableState;r.writing||Km(this,r),Jm(this,r)})}jv(pt,vre,{__proto__:null,value:function(t){return Xv(this,t)?!0:this!==pt?!1:t&&t._writableState instanceof wu}});pt.prototype.pipe=function(){cl(this,new Wre)};function Qv(t,e,r,n){let i=t._writableState;if(typeof r=="function")n=r,r=i.defaultEncoding;else{if(!r)r=i.defaultEncoding;else if(r!=="buffer"&&!Eh.isEncoding(r))throw new Jv(r);typeof n!="function"&&(n=jm)}if(e===null)throw new kre;if(!i.objectMode)if(typeof e=="string")i.decodeStrings!==!1&&(e=Eh.from(e,r),r="buffer");else if(e instanceof Eh)r="buffer";else if(bu._isUint8Array(e))e=bu._uint8ArrayToBuffer(e),r="buffer";else throw new Hre("chunk",["string","Buffer","Uint8Array"],e);let s;return i.ending?s=new Yre:i.destroyed&&(s=new yu("write")),s?(No.nextTick(n,s),cl(t,s,!0),s):(i.pendingcb++,Vre(t,i,e,r,n))}pt.prototype.write=function(t,e,r){return Qv(this,t,e,r)===!0};pt.prototype.cork=function(){this._writableState.corked++};pt.prototype.uncork=function(){let t=this._writableState;t.corked&&(t.corked--,t.writing||Km(this,t))};pt.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=Pre(e)),!Eh.isEncoding(e))throw new Jv(e);return this._writableState.defaultEncoding=e,this};function Vre(t,e,r,n,i){let s=e.objectMode?1:r.length;e.length+=s;let o=e.length<e.highWaterMark;return o||(e.needDrain=!0),e.writing||e.corked||e.errored||!e.constructed?(e.buffered.push({chunk:r,encoding:n,callback:i}),e.allBuffers&&n!=="buffer"&&(e.allBuffers=!1),e.allNoop&&i!==jm&&(e.allNoop=!1)):(e.writelen=s,e.writecb=i,e.writing=!0,e.sync=!0,t._write(r,n,e.onwrite),e.sync=!1),o&&!e.errored&&!e.destroyed}function Yv(t,e,r,n,i,s,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new yu("write")):r?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function Vv(t,e,r,n){--e.pendingcb,n(r),zm(e),cl(t,r)}function qre(t,e){let r=t._writableState,n=r.sync,i=r.writecb;if(typeof i!="function"){cl(t,new Kv);return}r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0,e?(e.stack,r.errored||(r.errored=e),t._readableState&&!t._readableState.errored&&(t._readableState.errored=e),n?No.nextTick(Vv,t,r,e,i):Vv(t,r,e,i)):(r.buffered.length>r.bufferedIndex&&Km(t,r),n?r.afterWriteTickInfo!==null&&r.afterWriteTickInfo.cb===i?r.afterWriteTickInfo.count++:(r.afterWriteTickInfo={count:1,cb:i,stream:t,state:r},No.nextTick(Xre,r.afterWriteTickInfo)):Zv(t,r,1,i))}function Xre({stream:t,state:e,count:r,cb:n}){return e.afterWriteTickInfo=null,Zv(t,e,r,n)}function Zv(t,e,r,n){for(!e.ending&&!t.destroyed&&e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"));r-- >0;)e.pendingcb--,n();e.destroyed&&zm(e),Jm(t,e)}function zm(t){if(t.writing)return;for(let i=t.bufferedIndex;i<t.buffered.length;++i){var e;let{chunk:s,callback:o}=t.buffered[i],a=t.objectMode?1:s.length;t.length-=a,o((e=t.errored)!==null&&e!==void 0?e:new yu("write"))}let r=t[ul].splice(0);for(let i=0;i<r.length;i++){var n;r[i]((n=t.errored)!==null&&n!==void 0?n:new yu("end"))}ph(t)}function Km(t,e){if(e.corked||e.bufferProcessing||e.destroyed||!e.constructed)return;let{buffered:r,bufferedIndex:n,objectMode:i}=e,s=r.length-n;if(!s)return;let o=n;if(e.bufferProcessing=!0,s>1&&t._writev){e.pendingcb-=s-1;let a=e.allNoop?jm:c=>{for(let u=o;u<r.length;++u)r[u].callback(c)},l=e.allNoop&&o===0?r:qv(r,o);l.allBuffers=e.allBuffers,Yv(t,e,!0,e.length,l,"",a),ph(e)}else{do{let{chunk:a,encoding:l,callback:c}=r[o];r[o++]=null;let u=i?1:a.length;Yv(t,e,!1,u,a,l,c)}while(o<r.length&&!e.writing);o===r.length?ph(e):o>256?(r.splice(0,o),e.bufferedIndex=0):e.bufferedIndex=o}e.bufferProcessing=!1}pt.prototype._write=function(t,e,r){if(this._writev)this._writev([{chunk:t,encoding:e}],r);else throw new Gre("_write()")};pt.prototype._writev=null;pt.prototype.end=function(t,e,r){let n=this._writableState;typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null);let i;if(t!=null){let s=Qv(this,t,e);s instanceof Lre&&(i=s)}return n.corked&&(n.corked=1,this.uncork()),i||(!n.errored&&!n.ending?(n.ending=!0,Jm(this,n,!0),n.ended=!0):n.finished?i=new $re("end"):n.destroyed&&(i=new yu("end"))),typeof r=="function"&&(i||n.finished?No.nextTick(r,i):n[ul].push(r)),this};function hh(t){return t.ending&&!t.destroyed&&t.constructed&&t.length===0&&!t.errored&&t.buffered.length===0&&!t.finished&&!t.writing&&!t.errorEmitted&&!t.closeEmitted}function jre(t,e){let r=!1;function n(i){if(r){cl(t,i??Kv());return}if(r=!0,e.pendingcb--,i){let s=e[ul].splice(0);for(let o=0;o<s.length;o++)s[o](i);cl(t,i,e.sync)}else hh(e)&&(e.prefinished=!0,t.emit("prefinish"),e.pendingcb++,No.nextTick(Xm,t,e))}e.sync=!0,e.pendingcb++;try{t._final(n)}catch(i){n(i)}e.sync=!1}function zre(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.finalCalled=!0,jre(t,e)):(e.prefinished=!0,t.emit("prefinish")))}function Jm(t,e,r){hh(e)&&(zre(t,e),e.pendingcb===0&&(r?(e.pendingcb++,No.nextTick((n,i)=>{hh(i)?Xm(n,i):i.pendingcb--},t,e)):hh(e)&&(e.pendingcb++,Xm(t,e))))}function Xm(t,e){e.pendingcb--,e.finished=!0;let r=e[ul].splice(0);for(let n=0;n<r.length;n++)r[n]();if(t.emit("finish"),e.autoDestroy){let n=t._readableState;(!n||n.autoDestroy&&(n.endEmitted||n.readable===!1))&&t.destroy()}}Dre(pt.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(t){this._writableState&&(this._writableState.destroyed=t)}},writable:{__proto__:null,get(){let t=this._writableState;return!!t&&t.writable!==!1&&!t.destroyed&&!t.errored&&!t.ending&&!t.ended},set(t){this._writableState&&(this._writableState.writable=!!t)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let t=this._writableState;return t?!t.destroyed&&!t.ending&&t.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var Kre=Th.destroy;pt.prototype.destroy=function(t,e){let r=this._writableState;return!r.destroyed&&(r.bufferedIndex<r.buffered.length||r[ul].length)&&No.nextTick(zm,r),Kre.call(this,t,e),this};pt.prototype._undestroy=Th.undestroy;pt.prototype._destroy=function(t,e){e(t)};pt.prototype[Mre.captureRejectionSymbol]=function(t){this.destroy(t)};var qm;function eM(){return qm===void 0&&(qm={}),qm}pt.fromWeb=function(t,e){return eM().newStreamWritableFromWritableStream(t,e)};pt.toWeb=function(t){return eM().newWritableStreamFromStreamWritable(t)}});var TM=O((kxe,pM)=>{var Qm=je(),Jre=require("buffer"),{isReadable:Qre,isWritable:Zre,isIterable:rM,isNodeStream:ene,isReadableNodeStream:nM,isWritableNodeStream:iM,isDuplexNodeStream:tne,isReadableStream:sM,isWritableStream:oM}=Qn(),aM=Fi(),{AbortError:EM,codes:{ERR_INVALID_ARG_TYPE:rne,ERR_INVALID_RETURN_VALUE:lM}}=Cr(),{destroyer:fl}=go(),nne=ti(),hM=Cu(),ine=Sh(),{createDeferredPromise:cM}=Br(),uM=Bm(),dM=globalThis.Blob||Jre.Blob,sne=typeof dM<"u"?function(e){return e instanceof dM}:function(e){return!1},one=globalThis.AbortController||wt().AbortController,{FunctionPrototypeCall:fM}=lt(),Ps=class extends nne{constructor(e){super(e),e?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),e?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};pM.exports=function t(e,r){if(tne(e))return e;if(nM(e))return dl({readable:e});if(iM(e))return dl({writable:e});if(ene(e))return dl({writable:!1,readable:!1});if(sM(e))return dl({readable:hM.fromWeb(e)});if(oM(e))return dl({writable:ine.fromWeb(e)});if(typeof e=="function"){let{value:i,write:s,final:o,destroy:a}=ane(e);if(rM(i))return uM(Ps,i,{objectMode:!0,write:s,final:o,destroy:a});let l=i?.then;if(typeof l=="function"){let c,u=fM(l,i,d=>{if(d!=null)throw new lM("nully","body",d)},d=>{fl(c,d)});return c=new Ps({objectMode:!0,readable:!1,write:s,final(d){o(async()=>{try{await u,Qm.nextTick(d,null)}catch(E){Qm.nextTick(d,E)}})},destroy:a})}throw new lM("Iterable, AsyncIterable or AsyncFunction",r,i)}if(sne(e))return t(e.arrayBuffer());if(rM(e))return uM(Ps,e,{objectMode:!0,writable:!1});if(sM(e?.readable)&&oM(e?.writable))return Ps.fromWeb(e);if(typeof e?.writable=="object"||typeof e?.readable=="object"){let i=e!=null&&e.readable?nM(e?.readable)?e?.readable:t(e.readable):void 0,s=e!=null&&e.writable?iM(e?.writable)?e?.writable:t(e.writable):void 0;return dl({readable:i,writable:s})}let n=e?.then;if(typeof n=="function"){let i;return fM(n,e,s=>{s!=null&&i.push(s),i.push(null)},s=>{fl(i,s)}),i=new Ps({objectMode:!0,writable:!1,read(){}})}throw new rne(r,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],e)};function ane(t){let{promise:e,resolve:r}=cM(),n=new one,i=n.signal;return{value:t((async function*(){for(;;){let o=e;e=null;let{chunk:a,done:l,cb:c}=await o;if(Qm.nextTick(c),l)return;if(i.aborted)throw new EM(void 0,{cause:i.reason});({promise:e,resolve:r}=cM()),yield a}})(),{signal:i}),write(o,a,l){let c=r;r=null,c({chunk:o,done:!1,cb:l})},final(o){let a=r;r=null,a({done:!0,cb:o})},destroy(o,a){n.abort(),a(o)}}}function dl(t){let e=t.readable&&typeof t.readable.read!="function"?hM.wrap(t.readable):t.readable,r=t.writable,n=!!Qre(e),i=!!Zre(r),s,o,a,l,c;function u(d){let E=l;l=null,E?E(d):d&&c.destroy(d)}return c=new Ps({readableObjectMode:!!(e!=null&&e.readableObjectMode),writableObjectMode:!!(r!=null&&r.writableObjectMode),readable:n,writable:i}),i&&(aM(r,d=>{i=!1,d&&fl(e,d),u(d)}),c._write=function(d,E,f){r.write(d,E)?f():s=f},c._final=function(d){r.end(),o=d},r.on("drain",function(){if(s){let d=s;s=null,d()}}),r.on("finish",function(){if(o){let d=o;o=null,d()}})),n&&(aM(e,d=>{n=!1,d&&fl(e,d),u(d)}),e.on("readable",function(){if(a){let d=a;a=null,d()}}),e.on("end",function(){c.push(null)}),c._read=function(){for(;;){let d=e.read();if(d===null){a=c._read;return}if(!c.push(d))return}}),c._destroy=function(d,E){!d&&l!==null&&(d=new EM),a=null,s=null,o=null,l===null?E(d):(l=E,fl(r,d),fl(e,d))},c}});var ti=O((Yxe,AM)=>{"use strict";var{ObjectDefineProperties:lne,ObjectGetOwnPropertyDescriptor:Hi,ObjectKeys:cne,ObjectSetPrototypeOf:SM}=lt();AM.exports=xn;var tg=Cu(),hn=Sh();SM(xn.prototype,tg.prototype);SM(xn,tg);{let t=cne(hn.prototype);for(let e=0;e<t.length;e++){let r=t[e];xn.prototype[r]||(xn.prototype[r]=hn.prototype[r])}}function xn(t){if(!(this instanceof xn))return new xn(t);tg.call(this,t),hn.call(this,t),t?(this.allowHalfOpen=t.allowHalfOpen!==!1,t.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),t.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}lne(xn.prototype,{writable:{__proto__:null,...Hi(hn.prototype,"writable")},writableHighWaterMark:{__proto__:null,...Hi(hn.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...Hi(hn.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...Hi(hn.prototype,"writableBuffer")},writableLength:{__proto__:null,...Hi(hn.prototype,"writableLength")},writableFinished:{__proto__:null,...Hi(hn.prototype,"writableFinished")},writableCorked:{__proto__:null,...Hi(hn.prototype,"writableCorked")},writableEnded:{__proto__:null,...Hi(hn.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...Hi(hn.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(t){this._readableState&&this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}});var Zm;function RM(){return Zm===void 0&&(Zm={}),Zm}xn.fromWeb=function(t,e){return RM().newStreamDuplexFromReadableWritablePair(t,e)};xn.toWeb=function(t){return RM().newReadableWritablePairFromDuplex(t)};var eg;xn.from=function(t){return eg||(eg=TM()),eg(t,"body")}});var ig=O((Vxe,gM)=>{"use strict";var{ObjectSetPrototypeOf:mM,Symbol:une}=lt();gM.exports=Gi;var{ERR_METHOD_NOT_IMPLEMENTED:dne}=Cr().codes,ng=ti(),{getHighWaterMark:fne}=_u();mM(Gi.prototype,ng.prototype);mM(Gi,ng);var Lu=une("kCallback");function Gi(t){if(!(this instanceof Gi))return new Gi(t);let e=t?fne(this,t,"readableHighWaterMark",!0):null;e===0&&(t={...t,highWaterMark:null,readableHighWaterMark:e,writableHighWaterMark:t.writableHighWaterMark||0}),ng.call(this,t),this._readableState.sync=!1,this[Lu]=null,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",Ene)}function rg(t){typeof this._flush=="function"&&!this.destroyed?this._flush((e,r)=>{if(e){t?t(e):this.destroy(e);return}r!=null&&this.push(r),this.push(null),t&&t()}):(this.push(null),t&&t())}function Ene(){this._final!==rg&&rg.call(this)}Gi.prototype._final=rg;Gi.prototype._transform=function(t,e,r){throw new dne("_transform()")};Gi.prototype._write=function(t,e,r){let n=this._readableState,i=this._writableState,s=n.length;this._transform(t,e,(o,a)=>{if(o){r(o);return}a!=null&&this.push(a),i.ended||s===n.length||n.length<n.highWaterMark?r():this[Lu]=r})};Gi.prototype._read=function(){if(this[Lu]){let t=this[Lu];this[Lu]=null,t()}}});var og=O((qxe,IM)=>{"use strict";var{ObjectSetPrototypeOf:_M}=lt();IM.exports=El;var sg=ig();_M(El.prototype,sg.prototype);_M(El,sg);function El(t){if(!(this instanceof El))return new El(t);sg.call(this,t)}El.prototype._transform=function(t,e,r){r(null,t)}});var gh=O((Xxe,yM)=>{var Du=je(),{ArrayIsArray:hne,Promise:pne,SymbolAsyncIterator:Tne,SymbolDispose:Sne}=lt(),mh=Fi(),{once:Rne}=Br(),Ane=go(),NM=ti(),{aggregateTwoErrors:mne,codes:{ERR_INVALID_ARG_TYPE:pg,ERR_INVALID_RETURN_VALUE:ag,ERR_MISSING_ARGS:gne,ERR_STREAM_DESTROYED:_ne,ERR_STREAM_PREMATURE_CLOSE:Ine},AbortError:Nne}=Cr(),{validateFunction:One,validateAbortSignal:Cne}=il(),{isIterable:Oo,isReadable:lg,isReadableNodeStream:Ah,isNodeStream:OM,isTransformStream:hl,isWebStream:bne,isReadableStream:cg,isReadableFinished:yne}=Qn(),wne=globalThis.AbortController||wt().AbortController,ug,dg,fg;function CM(t,e,r){let n=!1;t.on("close",()=>{n=!0});let i=mh(t,{readable:e,writable:r},s=>{n=!s});return{destroy:s=>{n||(n=!0,Ane.destroyer(t,s||new _ne("pipe")))},cleanup:i}}function Lne(t){return One(t[t.length-1],"streams[stream.length - 1]"),t.pop()}function Eg(t){if(Oo(t))return t;if(Ah(t))return Dne(t);throw new pg("val",["Readable","Iterable","AsyncIterable"],t)}async function*Dne(t){dg||(dg=Cu()),yield*dg.prototype[Tne].call(t)}async function Rh(t,e,r,{end:n}){let i,s=null,o=c=>{if(c&&(i=c),s){let u=s;s=null,u()}},a=()=>new pne((c,u)=>{i?u(i):s=()=>{i?u(i):c()}});e.on("drain",o);let l=mh(e,{readable:!1},o);try{e.writableNeedDrain&&await a();for await(let c of t)e.write(c)||await a();n&&(e.end(),await a()),r()}catch(c){r(i!==c?mne(i,c):c)}finally{l(),e.off("drain",o)}}async function hg(t,e,r,{end:n}){hl(e)&&(e=e.writable);let i=e.getWriter();try{for await(let s of t)await i.ready,i.write(s).catch(()=>{});await i.ready,n&&await i.close(),r()}catch(s){try{await i.abort(s),r(s)}catch(o){r(o)}}}function Pne(...t){return bM(t,Rne(Lne(t)))}function bM(t,e,r){if(t.length===1&&hne(t[0])&&(t=t[0]),t.length<2)throw new gne("streams");let n=new wne,i=n.signal,s=r?.signal,o=[];Cne(s,"options.signal");function a(){p(new Nne)}fg=fg||Br().addAbortListener;let l;s&&(l=fg(s,a));let c,u,d=[],E=0;function f(R){p(R,--E===0)}function p(R,A){var I;if(R&&(!c||c.code==="ERR_STREAM_PREMATURE_CLOSE")&&(c=R),!(!c&&!A)){for(;d.length;)d.shift()(c);(I=l)===null||I===void 0||I[Sne](),n.abort(),A&&(c||o.forEach(w=>w()),Du.nextTick(e,c,u))}}let h;for(let R=0;R<t.length;R++){let A=t[R],I=R<t.length-1,w=R>0,g=I||r?.end!==!1,L=R===t.length-1;if(OM(A)){let y=function(P){P&&P.name!=="AbortError"&&P.code!=="ERR_STREAM_PREMATURE_CLOSE"&&f(P)};var m=y;if(g){let{destroy:P,cleanup:v}=CM(A,I,w);d.push(P),lg(A)&&L&&o.push(v)}A.on("error",y),lg(A)&&L&&o.push(()=>{A.removeListener("error",y)})}if(R===0)if(typeof A=="function"){if(h=A({signal:i}),!Oo(h))throw new ag("Iterable, AsyncIterable or Stream","source",h)}else Oo(A)||Ah(A)||hl(A)?h=A:h=NM.from(A);else if(typeof A=="function"){if(hl(h)){var S;h=Eg((S=h)===null||S===void 0?void 0:S.readable)}else h=Eg(h);if(h=A(h,{signal:i}),I){if(!Oo(h,!0))throw new ag("AsyncIterable",`transform[${R-1}]`,h)}else{var T;ug||(ug=og());let y=new ug({objectMode:!0}),P=(T=h)===null||T===void 0?void 0:T.then;if(typeof P=="function")E++,P.call(h,F=>{u=F,F!=null&&y.write(F),g&&y.end(),Du.nextTick(f)},F=>{y.destroy(F),Du.nextTick(f,F)});else if(Oo(h,!0))E++,Rh(h,y,f,{end:g});else if(cg(h)||hl(h)){let F=h.readable||h;E++,Rh(F,y,f,{end:g})}else throw new ag("AsyncIterable or Promise","destination",h);h=y;let{destroy:v,cleanup:B}=CM(h,!1,!0);d.push(v),L&&o.push(B)}}else if(OM(A)){if(Ah(h)){E+=2;let y=xne(h,A,f,{end:g});lg(A)&&L&&o.push(y)}else if(hl(h)||cg(h)){let y=h.readable||h;E++,Rh(y,A,f,{end:g})}else if(Oo(h))E++,Rh(h,A,f,{end:g});else throw new pg("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],h);h=A}else if(bne(A)){if(Ah(h))E++,hg(Eg(h),A,f,{end:g});else if(cg(h)||Oo(h))E++,hg(h,A,f,{end:g});else if(hl(h))E++,hg(h.readable,A,f,{end:g});else throw new pg("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],h);h=A}else h=NM.from(A)}return(i!=null&&i.aborted||s!=null&&s.aborted)&&Du.nextTick(a),h}function xne(t,e,r,{end:n}){let i=!1;if(e.on("close",()=>{i||r(new Ine)}),t.pipe(e,{end:!1}),n){let o=function(){i=!0,e.end()};var s=o;yne(t)?Du.nextTick(o):t.once("end",o)}else r();return mh(t,{readable:!0,writable:!1},o=>{let a=t._readableState;o&&o.code==="ERR_STREAM_PREMATURE_CLOSE"&&a&&a.ended&&!a.errored&&!a.errorEmitted?t.once("end",r).once("error",r):r(o)}),mh(e,{readable:!1,writable:!0},r)}yM.exports={pipelineImpl:bM,pipeline:Pne}});var Sg=O((jxe,vM)=>{"use strict";var{pipeline:vne}=gh(),_h=ti(),{destroyer:Mne}=go(),{isNodeStream:Ih,isReadable:wM,isWritable:LM,isWebStream:Tg,isTransformStream:Co,isWritableStream:DM,isReadableStream:PM}=Qn(),{AbortError:Une,codes:{ERR_INVALID_ARG_VALUE:xM,ERR_MISSING_ARGS:Bne}}=Cr(),Fne=Fi();vM.exports=function(...e){if(e.length===0)throw new Bne("streams");if(e.length===1)return _h.from(e[0]);let r=[...e];if(typeof e[0]=="function"&&(e[0]=_h.from(e[0])),typeof e[e.length-1]=="function"){let f=e.length-1;e[f]=_h.from(e[f])}for(let f=0;f<e.length;++f)if(!(!Ih(e[f])&&!Tg(e[f]))){if(f<e.length-1&&!(wM(e[f])||PM(e[f])||Co(e[f])))throw new xM(`streams[${f}]`,r[f],"must be readable");if(f>0&&!(LM(e[f])||DM(e[f])||Co(e[f])))throw new xM(`streams[${f}]`,r[f],"must be writable")}let n,i,s,o,a;function l(f){let p=o;o=null,p?p(f):f?a.destroy(f):!E&&!d&&a.destroy()}let c=e[0],u=vne(e,l),d=!!(LM(c)||DM(c)||Co(c)),E=!!(wM(u)||PM(u)||Co(u));if(a=new _h({writableObjectMode:!!(c!=null&&c.writableObjectMode),readableObjectMode:!!(u!=null&&u.readableObjectMode),writable:d,readable:E}),d){if(Ih(c))a._write=function(p,h,S){c.write(p,h)?S():n=S},a._final=function(p){c.end(),i=p},c.on("drain",function(){if(n){let p=n;n=null,p()}});else if(Tg(c)){let h=(Co(c)?c.writable:c).getWriter();a._write=async function(S,T,m){try{await h.ready,h.write(S).catch(()=>{}),m()}catch(R){m(R)}},a._final=async function(S){try{await h.ready,h.close().catch(()=>{}),i=S}catch(T){S(T)}}}let f=Co(u)?u.readable:u;Fne(f,()=>{if(i){let p=i;i=null,p()}})}if(E){if(Ih(u))u.on("readable",function(){if(s){let f=s;s=null,f()}}),u.on("end",function(){a.push(null)}),a._read=function(){for(;;){let f=u.read();if(f===null){s=a._read;return}if(!a.push(f))return}};else if(Tg(u)){let p=(Co(u)?u.readable:u).getReader();a._read=async function(){for(;;)try{let{value:h,done:S}=await p.read();if(!a.push(h))return;if(S){a.push(null);return}}catch{return}}}}return a._destroy=function(f,p){!f&&o!==null&&(f=new Une),s=null,n=null,i=null,o===null?p(f):(o=p,Ih(u)&&Mne(u,f))},a}});var YM=O((zxe,mg)=>{"use strict";var Hne=globalThis.AbortController||wt().AbortController,{codes:{ERR_INVALID_ARG_VALUE:Gne,ERR_INVALID_ARG_TYPE:Pu,ERR_MISSING_ARGS:Wne,ERR_OUT_OF_RANGE:$ne},AbortError:ri}=Cr(),{validateAbortSignal:bo,validateInteger:MM,validateObject:yo}=il(),kne=lt().Symbol("kWeak"),Yne=lt().Symbol("kResistStopPropagation"),{finished:Vne}=Fi(),qne=Sg(),{addAbortSignalNoValidate:Xne}=gu(),{isWritable:jne,isNodeStream:zne}=Qn(),{deprecate:Kne}=Br(),{ArrayPrototypePush:Jne,Boolean:Qne,MathFloor:UM,Number:Zne,NumberIsNaN:eie,Promise:BM,PromiseReject:FM,PromiseResolve:tie,PromisePrototypeThen:HM,Symbol:WM}=lt(),Nh=WM("kEmpty"),GM=WM("kEof");function rie(t,e){if(e!=null&&yo(e,"options"),e?.signal!=null&&bo(e.signal,"options.signal"),zne(t)&&!jne(t))throw new Gne("stream",t,"must be writable");let r=qne(this,t);return e!=null&&e.signal&&Xne(e.signal,r),r}function Oh(t,e){if(typeof t!="function")throw new Pu("fn",["Function","AsyncFunction"],t);e!=null&&yo(e,"options"),e?.signal!=null&&bo(e.signal,"options.signal");let r=1;e?.concurrency!=null&&(r=UM(e.concurrency));let n=r-1;return e?.highWaterMark!=null&&(n=UM(e.highWaterMark)),MM(r,"options.concurrency",1),MM(n,"options.highWaterMark",0),n+=r,async function*(){let s=Br().AbortSignalAny([e?.signal].filter(Qne)),o=this,a=[],l={signal:s},c,u,d=!1,E=0;function f(){d=!0,p()}function p(){E-=1,h()}function h(){u&&!d&&E<r&&a.length<n&&(u(),u=null)}async function S(){try{for await(let T of o){if(d)return;if(s.aborted)throw new ri;try{if(T=t(T,l),T===Nh)continue;T=tie(T)}catch(m){T=FM(m)}E+=1,HM(T,p,f),a.push(T),c&&(c(),c=null),!d&&(a.length>=n||E>=r)&&await new BM(m=>{u=m})}a.push(GM)}catch(T){let m=FM(T);HM(m,p,f),a.push(m)}finally{d=!0,c&&(c(),c=null)}}S();try{for(;;){for(;a.length>0;){let T=await a[0];if(T===GM)return;if(s.aborted)throw new ri;T!==Nh&&(yield T),a.shift(),h()}await new BM(T=>{c=T})}}finally{d=!0,u&&(u(),u=null)}}.call(this)}function nie(t=void 0){return t!=null&&yo(t,"options"),t?.signal!=null&&bo(t.signal,"options.signal"),async function*(){let r=0;for await(let i of this){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new ri({cause:t.signal.reason});yield[r++,i]}}.call(this)}async function $M(t,e=void 0){for await(let r of Ag.call(this,t,e))return!0;return!1}async function iie(t,e=void 0){if(typeof t!="function")throw new Pu("fn",["Function","AsyncFunction"],t);return!await $M.call(this,async(...r)=>!await t(...r),e)}async function sie(t,e){for await(let r of Ag.call(this,t,e))return r}async function oie(t,e){if(typeof t!="function")throw new Pu("fn",["Function","AsyncFunction"],t);async function r(n,i){return await t(n,i),Nh}for await(let n of Oh.call(this,r,e));}function Ag(t,e){if(typeof t!="function")throw new Pu("fn",["Function","AsyncFunction"],t);async function r(n,i){return await t(n,i)?n:Nh}return Oh.call(this,r,e)}var Rg=class extends Wne{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function aie(t,e,r){var n;if(typeof t!="function")throw new Pu("reducer",["Function","AsyncFunction"],t);r!=null&&yo(r,"options"),r?.signal!=null&&bo(r.signal,"options.signal");let i=arguments.length>1;if(r!=null&&(n=r.signal)!==null&&n!==void 0&&n.aborted){let c=new ri(void 0,{cause:r.signal.reason});throw this.once("error",()=>{}),await Vne(this.destroy(c)),c}let s=new Hne,o=s.signal;if(r!=null&&r.signal){let c={once:!0,[kne]:this,[Yne]:!0};r.signal.addEventListener("abort",()=>s.abort(),c)}let a=!1;try{for await(let c of this){var l;if(a=!0,r!=null&&(l=r.signal)!==null&&l!==void 0&&l.aborted)throw new ri;i?e=await t(e,c,{signal:o}):(e=c,i=!0)}if(!a&&!i)throw new Rg}finally{s.abort()}return e}async function lie(t){t!=null&&yo(t,"options"),t?.signal!=null&&bo(t.signal,"options.signal");let e=[];for await(let n of this){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new ri(void 0,{cause:t.signal.reason});Jne(e,n)}return e}function cie(t,e){let r=Oh.call(this,t,e);return async function*(){for await(let i of r)yield*i}.call(this)}function kM(t){if(t=Zne(t),eie(t))return 0;if(t<0)throw new $ne("number",">= 0",t);return t}function uie(t,e=void 0){return e!=null&&yo(e,"options"),e?.signal!=null&&bo(e.signal,"options.signal"),t=kM(t),async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new ri;for await(let s of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new ri;t--<=0&&(yield s)}}.call(this)}function die(t,e=void 0){return e!=null&&yo(e,"options"),e?.signal!=null&&bo(e.signal,"options.signal"),t=kM(t),async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new ri;for await(let s of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new ri;if(t-- >0&&(yield s),t<=0)return}}.call(this)}mg.exports.streamReturningOperators={asIndexedPairs:Kne(nie,"readable.asIndexedPairs will be removed in a future version."),drop:uie,filter:Ag,flatMap:cie,map:Oh,take:die,compose:rie};mg.exports.promiseReturningOperators={every:iie,forEach:oie,reduce:aie,toArray:lie,some:$M,find:sie}});var gg=O((Kxe,VM)=>{"use strict";var{ArrayPrototypePop:fie,Promise:Eie}=lt(),{isIterable:hie,isNodeStream:pie,isWebStream:Tie}=Qn(),{pipelineImpl:Sie}=gh(),{finished:Rie}=Fi();_g();function Aie(...t){return new Eie((e,r)=>{let n,i,s=t[t.length-1];if(s&&typeof s=="object"&&!pie(s)&&!hie(s)&&!Tie(s)){let o=fie(t);n=o.signal,i=o.end}Sie(t,(o,a)=>{o?r(o):e(a)},{signal:n,end:i})})}VM.exports={finished:Rie,pipeline:Aie}});var _g=O((Jxe,eU)=>{"use strict";var{Buffer:mie}=require("buffer"),{ObjectDefineProperty:Wi,ObjectKeys:jM,ReflectApply:zM}=lt(),{promisify:{custom:KM}}=Br(),{streamReturningOperators:qM,promiseReturningOperators:XM}=YM(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:JM}}=Cr(),gie=Sg(),{setDefaultHighWaterMark:_ie,getDefaultHighWaterMark:Iie}=_u(),{pipeline:QM}=gh(),{destroyer:Nie}=go(),ZM=Fi(),Ig=gg(),xu=Qn(),nt=eU.exports=ih().Stream;nt.isDestroyed=xu.isDestroyed;nt.isDisturbed=xu.isDisturbed;nt.isErrored=xu.isErrored;nt.isReadable=xu.isReadable;nt.isWritable=xu.isWritable;nt.Readable=Cu();for(let t of jM(qM)){let r=function(...n){if(new.target)throw JM();return nt.Readable.from(zM(e,this,n))},e=qM[t];Wi(r,"name",{__proto__:null,value:e.name}),Wi(r,"length",{__proto__:null,value:e.length}),Wi(nt.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}for(let t of jM(XM)){let r=function(...n){if(new.target)throw JM();return zM(e,this,n)},e=XM[t];Wi(r,"name",{__proto__:null,value:e.name}),Wi(r,"length",{__proto__:null,value:e.length}),Wi(nt.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}nt.Writable=Sh();nt.Duplex=ti();nt.Transform=ig();nt.PassThrough=og();nt.pipeline=QM;var{addAbortSignal:Oie}=gu();nt.addAbortSignal=Oie;nt.finished=ZM;nt.destroy=Nie;nt.compose=gie;nt.setDefaultHighWaterMark=_ie;nt.getDefaultHighWaterMark=Iie;Wi(nt,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return Ig}});Wi(QM,KM,{__proto__:null,enumerable:!0,get(){return Ig.pipeline}});Wi(ZM,KM,{__proto__:null,enumerable:!0,get(){return Ig.finished}});nt.Stream=nt;nt._isUint8Array=function(e){return e instanceof Uint8Array};nt._uint8ArrayToBuffer=function(e){return mie.from(e.buffer,e.byteOffset,e.byteLength)}});var tU=O((Qxe,ye)=>{"use strict";var Ht=require("stream");if(Ht&&process.env.READABLE_STREAM==="disable"){let t=Ht.promises;ye.exports._uint8ArrayToBuffer=Ht._uint8ArrayToBuffer,ye.exports._isUint8Array=Ht._isUint8Array,ye.exports.isDisturbed=Ht.isDisturbed,ye.exports.isErrored=Ht.isErrored,ye.exports.isReadable=Ht.isReadable,ye.exports.Readable=Ht.Readable,ye.exports.Writable=Ht.Writable,ye.exports.Duplex=Ht.Duplex,ye.exports.Transform=Ht.Transform,ye.exports.PassThrough=Ht.PassThrough,ye.exports.addAbortSignal=Ht.addAbortSignal,ye.exports.finished=Ht.finished,ye.exports.destroy=Ht.destroy,ye.exports.pipeline=Ht.pipeline,ye.exports.compose=Ht.compose,Object.defineProperty(Ht,"promises",{configurable:!0,enumerable:!0,get(){return t}}),ye.exports.Stream=Ht.Stream}else{let t=_g(),e=gg(),r=t.Readable.destroy;ye.exports=t.Readable,ye.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,ye.exports._isUint8Array=t._isUint8Array,ye.exports.isDisturbed=t.isDisturbed,ye.exports.isErrored=t.isErrored,ye.exports.isReadable=t.isReadable,ye.exports.Readable=t.Readable,ye.exports.Writable=t.Writable,ye.exports.Duplex=t.Duplex,ye.exports.Transform=t.Transform,ye.exports.PassThrough=t.PassThrough,ye.exports.addAbortSignal=t.addAbortSignal,ye.exports.finished=t.finished,ye.exports.destroy=t.destroy,ye.exports.destroy=r,ye.exports.pipeline=t.pipeline,ye.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return e}}),ye.exports.Stream=t.Stream}ye.exports.default=ye.exports});var nU=O((Zxe,rU)=>{function Cie(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}rU.exports=Cie});var aU=O((eve,oU)=>{var iU=kE(),bie=sm(),yie=om(),sU=iU?iU.isConcatSpreadable:void 0;function wie(t){return yie(t)||bie(t)||!!(sU&&t&&t[sU])}oU.exports=wie});var Ch=O((tve,cU)=>{var Lie=nU(),Die=aU();function lU(t,e,r,n,i){var s=-1,o=t.length;for(r||(r=Die),i||(i=[]);++s<o;){var a=t[s];e>0&&r(a)?e>1?lU(a,e-1,r,n,i):Lie(i,a):n||(i[i.length]=a)}return i}cU.exports=lU});var dU=O((rve,uU)=>{var Pie=Ch();function xie(t){var e=t==null?0:t.length;return e?Pie(t,1):[]}uU.exports=xie});var vu=O((nve,fU)=>{var vie=fu(),Mie=vie(Object,"create");fU.exports=Mie});var pU=O((ive,hU)=>{var EU=vu();function Uie(){this.__data__=EU?EU(null):{},this.size=0}hU.exports=Uie});var SU=O((sve,TU)=>{function Bie(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}TU.exports=Bie});var AU=O((ove,RU)=>{var Fie=vu(),Hie="__lodash_hash_undefined__",Gie=Object.prototype,Wie=Gie.hasOwnProperty;function $ie(t){var e=this.__data__;if(Fie){var r=e[t];return r===Hie?void 0:r}return Wie.call(e,t)?e[t]:void 0}RU.exports=$ie});var gU=O((ave,mU)=>{var kie=vu(),Yie=Object.prototype,Vie=Yie.hasOwnProperty;function qie(t){var e=this.__data__;return kie?e[t]!==void 0:Vie.call(e,t)}mU.exports=qie});var IU=O((lve,_U)=>{var Xie=vu(),jie="__lodash_hash_undefined__";function zie(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Xie&&e===void 0?jie:e,this}_U.exports=zie});var OU=O((cve,NU)=>{var Kie=pU(),Jie=SU(),Qie=AU(),Zie=gU(),ese=IU();function pl(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}pl.prototype.clear=Kie;pl.prototype.delete=Jie;pl.prototype.get=Qie;pl.prototype.has=Zie;pl.prototype.set=ese;NU.exports=pl});var bU=O((uve,CU)=>{function tse(){this.__data__=[],this.size=0}CU.exports=tse});var Mu=O((dve,yU)=>{var rse=VE();function nse(t,e){for(var r=t.length;r--;)if(rse(t[r][0],e))return r;return-1}yU.exports=nse});var LU=O((fve,wU)=>{var ise=Mu(),sse=Array.prototype,ose=sse.splice;function ase(t){var e=this.__data__,r=ise(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():ose.call(e,r,1),--this.size,!0}wU.exports=ase});var PU=O((Eve,DU)=>{var lse=Mu();function cse(t){var e=this.__data__,r=lse(e,t);return r<0?void 0:e[r][1]}DU.exports=cse});var vU=O((hve,xU)=>{var use=Mu();function dse(t){return use(this.__data__,t)>-1}xU.exports=dse});var UU=O((pve,MU)=>{var fse=Mu();function Ese(t,e){var r=this.__data__,n=fse(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}MU.exports=Ese});var FU=O((Tve,BU)=>{var hse=bU(),pse=LU(),Tse=PU(),Sse=vU(),Rse=UU();function Tl(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Tl.prototype.clear=hse;Tl.prototype.delete=pse;Tl.prototype.get=Tse;Tl.prototype.has=Sse;Tl.prototype.set=Rse;BU.exports=Tl});var GU=O((Sve,HU)=>{var Ase=fu(),mse=Qa(),gse=Ase(mse,"Map");HU.exports=gse});var kU=O((Rve,$U)=>{var WU=OU(),_se=FU(),Ise=GU();function Nse(){this.size=0,this.__data__={hash:new WU,map:new(Ise||_se),string:new WU}}$U.exports=Nse});var VU=O((Ave,YU)=>{function Ose(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}YU.exports=Ose});var Uu=O((mve,qU)=>{var Cse=VU();function bse(t,e){var r=t.__data__;return Cse(e)?r[typeof e=="string"?"string":"hash"]:r.map}qU.exports=bse});var jU=O((gve,XU)=>{var yse=Uu();function wse(t){var e=yse(this,t).delete(t);return this.size-=e?1:0,e}XU.exports=wse});var KU=O((_ve,zU)=>{var Lse=Uu();function Dse(t){return Lse(this,t).get(t)}zU.exports=Dse});var QU=O((Ive,JU)=>{var Pse=Uu();function xse(t){return Pse(this,t).has(t)}JU.exports=xse});var eB=O((Nve,ZU)=>{var vse=Uu();function Mse(t,e){var r=vse(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}ZU.exports=Mse});var rB=O((Ove,tB)=>{var Use=kU(),Bse=jU(),Fse=KU(),Hse=QU(),Gse=eB();function Sl(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Sl.prototype.clear=Use;Sl.prototype.delete=Bse;Sl.prototype.get=Fse;Sl.prototype.has=Hse;Sl.prototype.set=Gse;tB.exports=Sl});var iB=O((Cve,nB)=>{var Wse="__lodash_hash_undefined__";function $se(t){return this.__data__.set(t,Wse),this}nB.exports=$se});var oB=O((bve,sB)=>{function kse(t){return this.__data__.has(t)}sB.exports=kse});var Ng=O((yve,aB)=>{var Yse=rB(),Vse=iB(),qse=oB();function bh(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new Yse;++e<r;)this.add(t[e])}bh.prototype.add=bh.prototype.push=Vse;bh.prototype.has=qse;aB.exports=bh});var cB=O((wve,lB)=>{function Xse(t,e,r,n){for(var i=t.length,s=r+(n?1:-1);n?s--:++s<i;)if(e(t[s],s,t))return s;return-1}lB.exports=Xse});var dB=O((Lve,uB)=>{function jse(t){return t!==t}uB.exports=jse});var EB=O((Dve,fB)=>{function zse(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}fB.exports=zse});var pB=O((Pve,hB)=>{var Kse=cB(),Jse=dB(),Qse=EB();function Zse(t,e,r){return e===e?Qse(t,e,r):Kse(t,Jse,r)}hB.exports=Zse});var Og=O((xve,TB)=>{var eoe=pB();function toe(t,e){var r=t==null?0:t.length;return!!r&&eoe(t,e,0)>-1}TB.exports=toe});var Cg=O((vve,SB)=>{function roe(t,e,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}SB.exports=roe});var AB=O((Mve,RB)=>{function noe(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}RB.exports=noe});var bg=O((Uve,mB)=>{function ioe(t,e){return t.has(e)}mB.exports=ioe});var _B=O((Bve,gB)=>{var soe=Ng(),ooe=Og(),aoe=Cg(),loe=AB(),coe=am(),uoe=bg(),doe=200;function foe(t,e,r,n){var i=-1,s=ooe,o=!0,a=t.length,l=[],c=e.length;if(!a)return l;r&&(e=loe(e,coe(r))),n?(s=aoe,o=!1):e.length>=doe&&(s=uoe,o=!1,e=new soe(e));e:for(;++i<a;){var u=t[i],d=r==null?u:r(u);if(u=n||u!==0?u:0,o&&d===d){for(var E=c;E--;)if(e[E]===d)continue e;l.push(u)}else s(e,d,n)||l.push(u)}return l}gB.exports=foe});var yg=O((Fve,IB)=>{var Eoe=qE(),hoe=Za();function poe(t){return hoe(t)&&Eoe(t)}IB.exports=poe});var CB=O((Hve,OB)=>{var Toe=_B(),Soe=Ch(),Roe=YE(),NB=yg(),Aoe=Roe(function(t,e){return NB(t)?Toe(t,Soe(e,1,NB,!0)):[]});OB.exports=Aoe});var yB=O((Gve,bB)=>{var moe=fu(),goe=Qa(),_oe=moe(goe,"Set");bB.exports=_oe});var LB=O((Wve,wB)=>{function Ioe(){}wB.exports=Ioe});var wg=O(($ve,DB)=>{function Noe(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}DB.exports=Noe});var xB=O((kve,PB)=>{var Lg=yB(),Ooe=LB(),Coe=wg(),boe=1/0,yoe=Lg&&1/Coe(new Lg([,-0]))[1]==boe?function(t){return new Lg(t)}:Ooe;PB.exports=yoe});var MB=O((Yve,vB)=>{var woe=Ng(),Loe=Og(),Doe=Cg(),Poe=bg(),xoe=xB(),voe=wg(),Moe=200;function Uoe(t,e,r){var n=-1,i=Loe,s=t.length,o=!0,a=[],l=a;if(r)o=!1,i=Doe;else if(s>=Moe){var c=e?null:xoe(t);if(c)return voe(c);o=!1,i=Poe,l=new woe}else l=e?[]:a;e:for(;++n<s;){var u=t[n],d=e?e(u):u;if(u=r||u!==0?u:0,o&&d===d){for(var E=l.length;E--;)if(l[E]===d)continue e;e&&l.push(d),a.push(u)}else i(l,d,r)||(l!==a&&l.push(d),a.push(u))}return a}vB.exports=Uoe});var BB=O((Vve,UB)=>{var Boe=Ch(),Foe=YE(),Hoe=MB(),Goe=yg(),Woe=Foe(function(t){return Hoe(Boe(t,1,Goe,!0))});UB.exports=Woe});var HB=O((qve,FB)=>{function $oe(t,e){return function(r){return t(e(r))}}FB.exports=$oe});var WB=O((Xve,GB)=>{var koe=HB(),Yoe=koe(Object.getPrototypeOf,Object);GB.exports=Yoe});var YB=O((jve,kB)=>{var Voe=uu(),qoe=WB(),Xoe=Za(),joe="[object Object]",zoe=Function.prototype,Koe=Object.prototype,$B=zoe.toString,Joe=Koe.hasOwnProperty,Qoe=$B.call(Object);function Zoe(t){if(!Xoe(t)||Voe(t)!=joe)return!1;var e=qoe(t);if(e===null)return!0;var r=Joe.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&$B.call(r)==Qoe}kB.exports=Zoe});var QB=O((zve,JB)=>{var VB=hA();JB.exports=rae;var qB="\0SLASH"+Math.random()+"\0",XB="\0OPEN"+Math.random()+"\0",Pg="\0CLOSE"+Math.random()+"\0",jB="\0COMMA"+Math.random()+"\0",zB="\0PERIOD"+Math.random()+"\0";function Dg(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function eae(t){return t.split("\\\\").join(qB).split("\\{").join(XB).split("\\}").join(Pg).split("\\,").join(jB).split("\\.").join(zB)}function tae(t){return t.split(qB).join("\\").split(XB).join("{").split(Pg).join("}").split(jB).join(",").split(zB).join(".")}function KB(t){if(!t)return[""];var e=[],r=VB("{","}",t);if(!r)return t.split(",");var n=r.pre,i=r.body,s=r.post,o=n.split(",");o[o.length-1]+="{"+i+"}";var a=KB(s);return s.length&&(o[o.length-1]+=a.shift(),o.push.apply(o,a)),e.push.apply(e,o),e}function rae(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),Bu(eae(t),!0).map(tae)):[]}function nae(t){return"{"+t+"}"}function iae(t){return/^-?0\d/.test(t)}function sae(t,e){return t<=e}function oae(t,e){return t>=e}function Bu(t,e){var r=[],n=VB("{","}",t);if(!n)return[t];var i=n.pre,s=n.post.length?Bu(n.post,!1):[""];if(/\$$/.test(n.pre))for(var o=0;o<s.length;o++){var a=i+"{"+n.body+"}"+s[o];r.push(a)}else{var l=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),c=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),u=l||c,d=n.body.indexOf(",")>=0;if(!u&&!d)return n.post.match(/,(?!,).*\}/)?(t=n.pre+"{"+n.body+Pg+n.post,Bu(t)):[t];var E;if(u)E=n.body.split(/\.\./);else if(E=KB(n.body),E.length===1&&(E=Bu(E[0],!1).map(nae),E.length===1))return s.map(function(P){return n.pre+E[0]+P});var f;if(u){var p=Dg(E[0]),h=Dg(E[1]),S=Math.max(E[0].length,E[1].length),T=E.length==3?Math.abs(Dg(E[2])):1,m=sae,R=h<p;R&&(T*=-1,m=oae);var A=E.some(iae);f=[];for(var I=p;m(I,h);I+=T){var w;if(c)w=String.fromCharCode(I),w==="\\"&&(w="");else if(w=String(I),A){var g=S-w.length;if(g>0){var L=new Array(g+1).join("0");I<0?w="-"+L+w.slice(1):w=L+w}}f.push(w)}}else{f=[];for(var y=0;y<E.length;y++)f.push.apply(f,Bu(E[y],!1))}for(var y=0;y<f.length;y++)for(var o=0;o<s.length;o++){var a=i+f[y]+s[o];(!e||u||a)&&r.push(a)}}return r}});var ZB=O(yh=>{"use strict";Object.defineProperty(yh,"__esModule",{value:!0});yh.assertValidPattern=void 0;var aae=1024*64,lae=t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>aae)throw new TypeError("pattern is too long")};yh.assertValidPattern=lae});var tF=O(wh=>{"use strict";Object.defineProperty(wh,"__esModule",{value:!0});wh.parseClass=void 0;var cae={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},Fu=t=>t.replace(/[[\]\\-]/g,"\\$&"),uae=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),eF=t=>t.join(""),dae=(t,e)=>{let r=e;if(t.charAt(r)!=="[")throw new Error("not in a brace expression");let n=[],i=[],s=r+1,o=!1,a=!1,l=!1,c=!1,u=r,d="";e:for(;s<t.length;){let h=t.charAt(s);if((h==="!"||h==="^")&&s===r+1){c=!0,s++;continue}if(h==="]"&&o&&!l){u=s+1;break}if(o=!0,h==="\\"&&!l){l=!0,s++;continue}if(h==="["&&!l){for(let[S,[T,m,R]]of Object.entries(cae))if(t.startsWith(S,s)){if(d)return["$.",!1,t.length-r,!0];s+=S.length,R?i.push(T):n.push(T),a=a||m;continue e}}if(l=!1,d){h>d?n.push(Fu(d)+"-"+Fu(h)):h===d&&n.push(Fu(h)),d="",s++;continue}if(t.startsWith("-]",s+1)){n.push(Fu(h+"-")),s+=2;continue}if(t.startsWith("-",s+1)){d=h,s+=2;continue}n.push(Fu(h)),s++}if(u<s)return["",!1,0,!1];if(!n.length&&!i.length)return["$.",!1,t.length-r,!0];if(i.length===0&&n.length===1&&/^\\?.$/.test(n[0])&&!c){let h=n[0].length===2?n[0].slice(-1):n[0];return[uae(h),!1,u-r,!1]}let E="["+(c?"^":"")+eF(n)+"]",f="["+(c?"":"^")+eF(i)+"]";return[n.length&&i.length?"("+E+"|"+f+")":n.length?E:f,a,u-r,!0]};wh.parseClass=dae});var Dh=O(Lh=>{"use strict";Object.defineProperty(Lh,"__esModule",{value:!0});Lh.unescape=void 0;var fae=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1");Lh.unescape=fae});var Mg=O(vh=>{"use strict";Object.defineProperty(vh,"__esModule",{value:!0});vh.AST=void 0;var Eae=tF(),Ph=Dh(),hae=new Set(["!","?","+","*","@"]),rF=t=>hae.has(t),pae="(?!(?:^|/)\\.\\.?(?:$|/))",xh="(?!\\.)",Tae=new Set(["[","."]),Sae=new Set(["..","."]),Rae=new Set("().*{}+?[]^$\\!"),Aae=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),vg="[^/]",nF=vg+"*?",iF=vg+"+?",xg=class t{type;#e;#t;#s=!1;#n=[];#o;#m;#c;#d=!1;#a;#l;#i=!1;constructor(e,r,n={}){this.type=e,e&&(this.#t=!0),this.#o=r,this.#e=this.#o?this.#o.#e:this,this.#a=this.#e===this?n:this.#e.#a,this.#c=this.#e===this?[]:this.#e.#c,e==="!"&&!this.#e.#d&&this.#c.push(this),this.#m=this.#o?this.#o.#n.length:0}get hasMagic(){if(this.#t!==void 0)return this.#t;for(let e of this.#n)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#t=!0;return this.#t}toString(){return this.#l!==void 0?this.#l:this.type?this.#l=this.type+"("+this.#n.map(e=>String(e)).join("|")+")":this.#l=this.#n.map(e=>String(e)).join("")}#T(){if(this!==this.#e)throw new Error("should only call on root");if(this.#d)return this;this.toString(),this.#d=!0;let e;for(;e=this.#c.pop();){if(e.type!=="!")continue;let r=e,n=r.#o;for(;n;){for(let i=r.#m+1;!n.type&&i<n.#n.length;i++)for(let s of e.#n){if(typeof s=="string")throw new Error("string part in extglob AST??");s.copyIn(n.#n[i])}r=n,n=r.#o}}return this}push(...e){for(let r of e)if(r!==""){if(typeof r!="string"&&!(r instanceof t&&r.#o===this))throw new Error("invalid part: "+r);this.#n.push(r)}}toJSON(){let e=this.type===null?this.#n.slice().map(r=>typeof r=="string"?r:r.toJSON()):[this.type,...this.#n.map(r=>r.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#e||this.#e.#d&&this.#o?.type==="!")&&e.push({}),e}isStart(){if(this.#e===this)return!0;if(!this.#o?.isStart())return!1;if(this.#m===0)return!0;let e=this.#o;for(let r=0;r<this.#m;r++){let n=e.#n[r];if(!(n instanceof t&&n.type==="!"))return!1}return!0}isEnd(){if(this.#e===this||this.#o?.type==="!")return!0;if(!this.#o?.isEnd())return!1;if(!this.type)return this.#o?.isEnd();let e=this.#o?this.#o.#n.length:0;return this.#m===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let r=new t(this.type,e);for(let n of this.#n)r.copyIn(n);return r}static#S(e,r,n,i){let s=!1,o=!1,a=-1,l=!1;if(r.type===null){let f=n,p="";for(;f<e.length;){let h=e.charAt(f++);if(s||h==="\\"){s=!s,p+=h;continue}if(o){f===a+1?(h==="^"||h==="!")&&(l=!0):h==="]"&&!(f===a+2&&l)&&(o=!1),p+=h;continue}else if(h==="["){o=!0,a=f,l=!1,p+=h;continue}if(!i.noext&&rF(h)&&e.charAt(f)==="("){r.push(p),p="";let S=new t(h,r);f=t.#S(e,S,f,i),r.push(S);continue}p+=h}return r.push(p),f}let c=n+1,u=new t(null,r),d=[],E="";for(;c<e.length;){let f=e.charAt(c++);if(s||f==="\\"){s=!s,E+=f;continue}if(o){c===a+1?(f==="^"||f==="!")&&(l=!0):f==="]"&&!(c===a+2&&l)&&(o=!1),E+=f;continue}else if(f==="["){o=!0,a=c,l=!1,E+=f;continue}if(rF(f)&&e.charAt(c)==="("){u.push(E),E="";let p=new t(f,u);u.push(p),c=t.#S(e,p,c,i);continue}if(f==="|"){u.push(E),E="",d.push(u),u=new t(null,r);continue}if(f===")")return E===""&&r.#n.length===0&&(r.#i=!0),u.push(E),E="",r.push(...d,u),c;E+=f}return r.type=null,r.#t=void 0,r.#n=[e.substring(n-1)],c}static fromGlob(e,r={}){let n=new t(null,void 0,r);return t.#S(e,n,0,r),n}toMMPattern(){if(this!==this.#e)return this.#e.toMMPattern();let e=this.toString(),[r,n,i,s]=this.toRegExpSource();if(!(i||this.#t||this.#a.nocase&&!this.#a.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return n;let a=(this.#a.nocase?"i":"")+(s?"u":"");return Object.assign(new RegExp(`^${r}$`,a),{_src:r,_glob:e})}get options(){return this.#a}toRegExpSource(e){let r=e??!!this.#a.dot;if(this.#e===this&&this.#T(),!this.type){let l=this.isStart()&&this.isEnd(),c=this.#n.map(f=>{let[p,h,S,T]=typeof f=="string"?t.#f(f,this.#t,l):f.toRegExpSource(e);return this.#t=this.#t||S,this.#s=this.#s||T,p}).join(""),u="";if(this.isStart()&&typeof this.#n[0]=="string"&&!(this.#n.length===1&&Sae.has(this.#n[0]))){let p=Tae,h=r&&p.has(c.charAt(0))||c.startsWith("\\.")&&p.has(c.charAt(2))||c.startsWith("\\.\\.")&&p.has(c.charAt(4)),S=!r&&!e&&p.has(c.charAt(0));u=h?pae:S?xh:""}let d="";return this.isEnd()&&this.#e.#d&&this.#o?.type==="!"&&(d="(?:$|\\/)"),[u+c+d,(0,Ph.unescape)(c),this.#t=!!this.#t,this.#s]}let n=this.type==="*"||this.type==="+",i=this.type==="!"?"(?:(?!(?:":"(?:",s=this.#E(r);if(this.isStart()&&this.isEnd()&&!s&&this.type!=="!"){let l=this.toString();return this.#n=[l],this.type=null,this.#t=void 0,[l,(0,Ph.unescape)(this.toString()),!1,!1]}let o=!n||e||r||!xh?"":this.#E(!0);o===s&&(o=""),o&&(s=`(?:${s})(?:${o})*?`);let a="";if(this.type==="!"&&this.#i)a=(this.isStart()&&!r?xh:"")+iF;else{let l=this.type==="!"?"))"+(this.isStart()&&!r&&!e?xh:"")+nF+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&o?")":this.type==="*"&&o?")?":`)${this.type}`;a=i+s+l}return[a,(0,Ph.unescape)(s),this.#t=!!this.#t,this.#s]}#E(e){return this.#n.map(r=>{if(typeof r=="string")throw new Error("string type in extglob ast??");let[n,i,s,o]=r.toRegExpSource(e);return this.#s=this.#s||o,n}).filter(r=>!(this.isStart()&&this.isEnd())||!!r).join("|")}static#f(e,r,n=!1){let i=!1,s="",o=!1;for(let a=0;a<e.length;a++){let l=e.charAt(a);if(i){i=!1,s+=(Rae.has(l)?"\\":"")+l;continue}if(l==="\\"){a===e.length-1?s+="\\\\":i=!0;continue}if(l==="["){let[c,u,d,E]=(0,Eae.parseClass)(e,a);if(d){s+=c,o=o||u,a+=d-1,r=r||E;continue}}if(l==="*"){n&&e==="*"?s+=iF:s+=nF,r=!0;continue}if(l==="?"){s+=vg,r=!0;continue}s+=Aae(l)}return[s,(0,Ph.unescape)(e),!!r,o]}};vh.AST=xg});var Ug=O(Mh=>{"use strict";Object.defineProperty(Mh,"__esModule",{value:!0});Mh.escape=void 0;var mae=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&");Mh.escape=mae});var xs=O(ee=>{"use strict";var gae=ee&&ee.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ee,"__esModule",{value:!0});ee.unescape=ee.escape=ee.AST=ee.Minimatch=ee.match=ee.makeRe=ee.braceExpand=ee.defaults=ee.filter=ee.GLOBSTAR=ee.sep=ee.minimatch=void 0;var _ae=gae(QB()),Uh=ZB(),aF=Mg(),Iae=Ug(),Nae=Dh(),Oae=(t,e,r={})=>((0,Uh.assertValidPattern)(e),!r.nocomment&&e.charAt(0)==="#"?!1:new wo(e,r).match(t));ee.minimatch=Oae;var Cae=/^\*+([^+@!?\*\[\(]*)$/,bae=t=>e=>!e.startsWith(".")&&e.endsWith(t),yae=t=>e=>e.endsWith(t),wae=t=>(t=t.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(t)),Lae=t=>(t=t.toLowerCase(),e=>e.toLowerCase().endsWith(t)),Dae=/^\*+\.\*+$/,Pae=t=>!t.startsWith(".")&&t.includes("."),xae=t=>t!=="."&&t!==".."&&t.includes("."),vae=/^\.\*+$/,Mae=t=>t!=="."&&t!==".."&&t.startsWith("."),Uae=/^\*+$/,Bae=t=>t.length!==0&&!t.startsWith("."),Fae=t=>t.length!==0&&t!=="."&&t!=="..",Hae=/^\?+([^+@!?\*\[\(]*)?$/,Gae=([t,e=""])=>{let r=lF([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},Wae=([t,e=""])=>{let r=cF([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},$ae=([t,e=""])=>{let r=cF([t]);return e?n=>r(n)&&n.endsWith(e):r},kae=([t,e=""])=>{let r=lF([t]);return e?n=>r(n)&&n.endsWith(e):r},lF=([t])=>{let e=t.length;return r=>r.length===e&&!r.startsWith(".")},cF=([t])=>{let e=t.length;return r=>r.length===e&&r!=="."&&r!==".."},uF=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",sF={win32:{sep:"\\"},posix:{sep:"/"}};ee.sep=uF==="win32"?sF.win32.sep:sF.posix.sep;ee.minimatch.sep=ee.sep;ee.GLOBSTAR=Symbol("globstar **");ee.minimatch.GLOBSTAR=ee.GLOBSTAR;var Yae="[^/]",Vae=Yae+"*?",qae="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",Xae="(?:(?!(?:\\/|^)\\.).)*?",jae=(t,e={})=>r=>(0,ee.minimatch)(r,t,e);ee.filter=jae;ee.minimatch.filter=ee.filter;var pn=(t,e={})=>Object.assign({},t,e),zae=t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return ee.minimatch;let e=ee.minimatch;return Object.assign((n,i,s={})=>e(n,i,pn(t,s)),{Minimatch:class extends e.Minimatch{constructor(i,s={}){super(i,pn(t,s))}static defaults(i){return e.defaults(pn(t,i)).Minimatch}},AST:class extends e.AST{constructor(i,s,o={}){super(i,s,pn(t,o))}static fromGlob(i,s={}){return e.AST.fromGlob(i,pn(t,s))}},unescape:(n,i={})=>e.unescape(n,pn(t,i)),escape:(n,i={})=>e.escape(n,pn(t,i)),filter:(n,i={})=>e.filter(n,pn(t,i)),defaults:n=>e.defaults(pn(t,n)),makeRe:(n,i={})=>e.makeRe(n,pn(t,i)),braceExpand:(n,i={})=>e.braceExpand(n,pn(t,i)),match:(n,i,s={})=>e.match(n,i,pn(t,s)),sep:e.sep,GLOBSTAR:ee.GLOBSTAR})};ee.defaults=zae;ee.minimatch.defaults=ee.defaults;var Kae=(t,e={})=>((0,Uh.assertValidPattern)(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:(0,_ae.default)(t));ee.braceExpand=Kae;ee.minimatch.braceExpand=ee.braceExpand;var Jae=(t,e={})=>new wo(t,e).makeRe();ee.makeRe=Jae;ee.minimatch.makeRe=ee.makeRe;var Qae=(t,e,r={})=>{let n=new wo(e,r);return t=t.filter(i=>n.match(i)),n.options.nonull&&!t.length&&t.push(e),t};ee.match=Qae;ee.minimatch.match=ee.match;var oF=/[?*]|[+@!]\(.*?\)|\[|\]/,Zae=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),wo=class{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,r={}){(0,Uh.assertValidPattern)(e),r=r||{},this.options=r,this.pattern=e,this.platform=r.platform||uF,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!r.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!r.nonegate,this.comment=!1,this.empty=!1,this.partial=!!r.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=r.windowsNoMagicRoot!==void 0?r.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let r of e)if(typeof r!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,r=this.options;if(!r.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],r.debug&&(this.debug=(...s)=>console.error(...s)),this.debug(this.pattern,this.globSet);let n=this.globSet.map(s=>this.slashSplit(s));this.globParts=this.preprocess(n),this.debug(this.pattern,this.globParts);let i=this.globParts.map((s,o,a)=>{if(this.isWindows&&this.windowsNoMagicRoot){let l=s[0]===""&&s[1]===""&&(s[2]==="?"||!oF.test(s[2]))&&!oF.test(s[3]),c=/^[a-z]:/i.test(s[0]);if(l)return[...s.slice(0,4),...s.slice(4).map(u=>this.parse(u))];if(c)return[s[0],...s.slice(1).map(u=>this.parse(u))]}return s.map(l=>this.parse(l))});if(this.debug(this.pattern,i),this.set=i.filter(s=>s.indexOf(!1)===-1),this.isWindows)for(let s=0;s<this.set.length;s++){let o=this.set[s];o[0]===""&&o[1]===""&&this.globParts[s][2]==="?"&&typeof o[3]=="string"&&/^[a-z]:$/i.test(o[3])&&(o[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let n=0;n<e.length;n++)for(let i=0;i<e[n].length;i++)e[n][i]==="**"&&(e[n][i]="*");let{optimizationLevel:r=1}=this.options;return r>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):r>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(r=>{let n=-1;for(;(n=r.indexOf("**",n+1))!==-1;){let i=n;for(;r[i+1]==="**";)i++;i!==n&&r.splice(n,i-n)}return r})}levelOneOptimize(e){return e.map(r=>(r=r.reduce((n,i)=>{let s=n[n.length-1];return i==="**"&&s==="**"?n:i===".."&&s&&s!==".."&&s!=="."&&s!=="**"?(n.pop(),n):(n.push(i),n)},[]),r.length===0?[""]:r))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let r=!1;do{if(r=!1,!this.preserveMultipleSlashes){for(let i=1;i<e.length-1;i++){let s=e[i];i===1&&s===""&&e[0]===""||(s==="."||s==="")&&(r=!0,e.splice(i,1),i--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(r=!0,e.pop())}let n=0;for(;(n=e.indexOf("..",n+1))!==-1;){let i=e[n-1];i&&i!=="."&&i!==".."&&i!=="**"&&(r=!0,e.splice(n-1,2),n-=2)}}while(r);return e.length===0?[""]:e}firstPhasePreProcess(e){let r=!1;do{r=!1;for(let n of e){let i=-1;for(;(i=n.indexOf("**",i+1))!==-1;){let o=i;for(;n[o+1]==="**";)o++;o>i&&n.splice(i+1,o-i);let a=n[i+1],l=n[i+2],c=n[i+3];if(a!==".."||!l||l==="."||l===".."||!c||c==="."||c==="..")continue;r=!0,n.splice(i,1);let u=n.slice(0);u[i]="**",e.push(u),i--}if(!this.preserveMultipleSlashes){for(let o=1;o<n.length-1;o++){let a=n[o];o===1&&a===""&&n[0]===""||(a==="."||a==="")&&(r=!0,n.splice(o,1),o--)}n[0]==="."&&n.length===2&&(n[1]==="."||n[1]==="")&&(r=!0,n.pop())}let s=0;for(;(s=n.indexOf("..",s+1))!==-1;){let o=n[s-1];if(o&&o!=="."&&o!==".."&&o!=="**"){r=!0;let l=s===1&&n[s+1]==="**"?["."]:[];n.splice(s-1,2,...l),n.length===0&&n.push(""),s-=2}}}}while(r);return e}secondPhasePreProcess(e){for(let r=0;r<e.length-1;r++)for(let n=r+1;n<e.length;n++){let i=this.partsMatch(e[r],e[n],!this.preserveMultipleSlashes);if(i){e[r]=[],e[n]=i;break}}return e.filter(r=>r.length)}partsMatch(e,r,n=!1){let i=0,s=0,o=[],a="";for(;i<e.length&&s<r.length;)if(e[i]===r[s])o.push(a==="b"?r[s]:e[i]),i++,s++;else if(n&&e[i]==="**"&&r[s]===e[i+1])o.push(e[i]),i++;else if(n&&r[s]==="**"&&e[i]===r[s+1])o.push(r[s]),s++;else if(e[i]==="*"&&r[s]&&(this.options.dot||!r[s].startsWith("."))&&r[s]!=="**"){if(a==="b")return!1;a="a",o.push(e[i]),i++,s++}else if(r[s]==="*"&&e[i]&&(this.options.dot||!e[i].startsWith("."))&&e[i]!=="**"){if(a==="a")return!1;a="b",o.push(r[s]),i++,s++}else return!1;return e.length===r.length&&o}parseNegate(){if(this.nonegate)return;let e=this.pattern,r=!1,n=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)r=!r,n++;n&&(this.pattern=e.slice(n)),this.negate=r}matchOne(e,r,n=!1){let i=this.options;if(this.isWindows){let h=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),S=!h&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),T=typeof r[0]=="string"&&/^[a-z]:$/i.test(r[0]),m=!T&&r[0]===""&&r[1]===""&&r[2]==="?"&&typeof r[3]=="string"&&/^[a-z]:$/i.test(r[3]),R=S?3:h?0:void 0,A=m?3:T?0:void 0;if(typeof R=="number"&&typeof A=="number"){let[I,w]=[e[R],r[A]];I.toLowerCase()===w.toLowerCase()&&(r[A]=I,A>R?r=r.slice(A):R>A&&(e=e.slice(R)))}}let{optimizationLevel:s=1}=this.options;s>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:r}),this.debug("matchOne",e.length,r.length);for(var o=0,a=0,l=e.length,c=r.length;o<l&&a<c;o++,a++){this.debug("matchOne loop");var u=r[a],d=e[o];if(this.debug(r,u,d),u===!1)return!1;if(u===ee.GLOBSTAR){this.debug("GLOBSTAR",[r,u,d]);var E=o,f=a+1;if(f===c){for(this.debug("** at the end");o<l;o++)if(e[o]==="."||e[o]===".."||!i.dot&&e[o].charAt(0)===".")return!1;return!0}for(;E<l;){var p=e[E];if(this.debug(`
globstar while`,e,E,r,f,p),this.matchOne(e.slice(E),r.slice(f),n))return this.debug("globstar found match!",E,l,p),!0;if(p==="."||p===".."||!i.dot&&p.charAt(0)==="."){this.debug("dot detected!",e,E,r,f);break}this.debug("globstar swallow a segment, and continue"),E++}return!!(n&&(this.debug(`
>>> no match, partial?`,e,E,r,f),E===l))}let h;if(typeof u=="string"?(h=d===u,this.debug("string match",u,d,h)):(h=u.test(d),this.debug("pattern match",u,d,h)),!h)return!1}if(o===l&&a===c)return!0;if(o===l)return n;if(a===c)return o===l-1&&e[o]==="";throw new Error("wtf?")}braceExpand(){return(0,ee.braceExpand)(this.pattern,this.options)}parse(e){(0,Uh.assertValidPattern)(e);let r=this.options;if(e==="**")return ee.GLOBSTAR;if(e==="")return"";let n,i=null;(n=e.match(Uae))?i=r.dot?Fae:Bae:(n=e.match(Cae))?i=(r.nocase?r.dot?Lae:wae:r.dot?yae:bae)(n[1]):(n=e.match(Hae))?i=(r.nocase?r.dot?Wae:Gae:r.dot?$ae:kae)(n):(n=e.match(Dae))?i=r.dot?xae:Pae:(n=e.match(vae))&&(i=Mae);let s=aF.AST.fromGlob(e,this.options).toMMPattern();return i&&typeof s=="object"&&Reflect.defineProperty(s,"test",{value:i}),s}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let r=this.options,n=r.noglobstar?Vae:r.dot?qae:Xae,i=new Set(r.nocase?["i"]:[]),s=e.map(l=>{let c=l.map(u=>{if(u instanceof RegExp)for(let d of u.flags.split(""))i.add(d);return typeof u=="string"?Zae(u):u===ee.GLOBSTAR?ee.GLOBSTAR:u._src});return c.forEach((u,d)=>{let E=c[d+1],f=c[d-1];u!==ee.GLOBSTAR||f===ee.GLOBSTAR||(f===void 0?E!==void 0&&E!==ee.GLOBSTAR?c[d+1]="(?:\\/|"+n+"\\/)?"+E:c[d]=n:E===void 0?c[d-1]=f+"(?:\\/|"+n+")?":E!==ee.GLOBSTAR&&(c[d-1]=f+"(?:\\/|\\/"+n+"\\/)"+E,c[d+1]=ee.GLOBSTAR))}),c.filter(u=>u!==ee.GLOBSTAR).join("/")}).join("|"),[o,a]=e.length>1?["(?:",")"]:["",""];s="^"+o+s+a+"$",this.negate&&(s="^(?!"+s+").+$");try{this.regexp=new RegExp(s,[...i].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,r=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&r)return!0;let n=this.options;this.isWindows&&(e=e.split("\\").join("/"));let i=this.slashSplit(e);this.debug(this.pattern,"split",i);let s=this.set;this.debug(this.pattern,"set",s);let o=i[i.length-1];if(!o)for(let a=i.length-2;!o&&a>=0;a--)o=i[a];for(let a=0;a<s.length;a++){let l=s[a],c=i;if(n.matchBase&&l.length===1&&(c=[o]),this.matchOne(c,l,r))return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate}static defaults(e){return ee.minimatch.defaults(e).Minimatch}};ee.Minimatch=wo;var ele=Mg();Object.defineProperty(ee,"AST",{enumerable:!0,get:function(){return ele.AST}});var tle=Ug();Object.defineProperty(ee,"escape",{enumerable:!0,get:function(){return tle.escape}});var rle=Dh();Object.defineProperty(ee,"unescape",{enumerable:!0,get:function(){return rle.unescape}});ee.minimatch.AST=aF.AST;ee.minimatch.Minimatch=wo;ee.minimatch.escape=Iae.escape;ee.minimatch.unescape=Nae.unescape});var pF=O(Fh=>{"use strict";Object.defineProperty(Fh,"__esModule",{value:!0});Fh.LRUCache=void 0;var Rl=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,fF=new Set,Bg=typeof process=="object"&&process?process:{},EF=(t,e,r,n)=>{typeof Bg.emitWarning=="function"?Bg.emitWarning(t,e,r,n):console.error(`[${r}] ${e}: ${t}`)},Bh=globalThis.AbortController,dF=globalThis.AbortSignal;if(typeof Bh>"u"){dF=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(n,i){this._onabort.push(i)}},Bh=class{constructor(){e()}signal=new dF;abort(n){if(!this.signal.aborted){this.signal.reason=n,this.signal.aborted=!0;for(let i of this.signal._onabort)i(n);this.signal.onabort?.(n)}}};let t=Bg.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",e=()=>{t&&(t=!1,EF("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}var nle=t=>!fF.has(t),vs=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),hF=t=>vs(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?Al:null:null,Al=class extends Array{constructor(e){super(e),this.fill(0)}},Fg=class t{heap;length;static#e=!1;static create(e){let r=hF(e);if(!r)return[];t.#e=!0;let n=new t(e,r);return t.#e=!1,n}constructor(e,r){if(!t.#e)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new r(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},Hg=class t{#e;#t;#s;#n;#o;#m;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#c;#d;#a;#l;#i;#T;#S;#E;#f;#I;#p;#N;#O;#A;#g;#_;#h;static unsafeExposeInternals(e){return{starts:e.#O,ttls:e.#A,sizes:e.#N,keyMap:e.#a,keyList:e.#l,valList:e.#i,next:e.#T,prev:e.#S,get head(){return e.#E},get tail(){return e.#f},free:e.#I,isBackgroundFetch:r=>e.#u(r),backgroundFetch:(r,n,i,s)=>e.#F(r,n,i,s),moveToTail:r=>e.#G(r),indexes:r=>e.#b(r),rindexes:r=>e.#y(r),isStale:r=>e.#R(r)}}get max(){return this.#e}get maxSize(){return this.#t}get calculatedSize(){return this.#d}get size(){return this.#c}get fetchMethod(){return this.#o}get memoMethod(){return this.#m}get dispose(){return this.#s}get disposeAfter(){return this.#n}constructor(e){let{max:r=0,ttl:n,ttlResolution:i=1,ttlAutopurge:s,updateAgeOnGet:o,updateAgeOnHas:a,allowStale:l,dispose:c,disposeAfter:u,noDisposeOnSet:d,noUpdateTTL:E,maxSize:f=0,maxEntrySize:p=0,sizeCalculation:h,fetchMethod:S,memoMethod:T,noDeleteOnFetchRejection:m,noDeleteOnStaleGet:R,allowStaleOnFetchRejection:A,allowStaleOnFetchAbort:I,ignoreFetchAbort:w}=e;if(r!==0&&!vs(r))throw new TypeError("max option must be a nonnegative integer");let g=r?hF(r):Array;if(!g)throw new Error("invalid max value: "+r);if(this.#e=r,this.#t=f,this.maxEntrySize=p||this.#t,this.sizeCalculation=h,this.sizeCalculation){if(!this.#t&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(T!==void 0&&typeof T!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#m=T,S!==void 0&&typeof S!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#o=S,this.#_=!!S,this.#a=new Map,this.#l=new Array(r).fill(void 0),this.#i=new Array(r).fill(void 0),this.#T=new g(r),this.#S=new g(r),this.#E=0,this.#f=0,this.#I=Fg.create(r),this.#c=0,this.#d=0,typeof c=="function"&&(this.#s=c),typeof u=="function"?(this.#n=u,this.#p=[]):(this.#n=void 0,this.#p=void 0),this.#g=!!this.#s,this.#h=!!this.#n,this.noDisposeOnSet=!!d,this.noUpdateTTL=!!E,this.noDeleteOnFetchRejection=!!m,this.allowStaleOnFetchRejection=!!A,this.allowStaleOnFetchAbort=!!I,this.ignoreFetchAbort=!!w,this.maxEntrySize!==0){if(this.#t!==0&&!vs(this.#t))throw new TypeError("maxSize must be a positive integer if specified");if(!vs(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#L()}if(this.allowStale=!!l,this.noDeleteOnStaleGet=!!R,this.updateAgeOnGet=!!o,this.updateAgeOnHas=!!a,this.ttlResolution=vs(i)||i===0?i:1,this.ttlAutopurge=!!s,this.ttl=n||0,this.ttl){if(!vs(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#w()}if(this.#e===0&&this.ttl===0&&this.#t===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#e&&!this.#t){let L="LRU_CACHE_UNBOUNDED";nle(L)&&(fF.add(L),EF("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",L,t))}}getRemainingTTL(e){return this.#a.has(e)?1/0:0}#w(){let e=new Al(this.#e),r=new Al(this.#e);this.#A=e,this.#O=r,this.#P=(s,o,a=Rl.now())=>{if(r[s]=o!==0?a:0,e[s]=o,o!==0&&this.ttlAutopurge){let l=setTimeout(()=>{this.#R(s)&&this.#D(this.#l[s],"expire")},o+1);l.unref&&l.unref()}},this.#C=s=>{r[s]=e[s]!==0?Rl.now():0},this.#r=(s,o)=>{if(e[o]){let a=e[o],l=r[o];if(!a||!l)return;s.ttl=a,s.start=l,s.now=n||i();let c=s.now-l;s.remainingTTL=a-c}};let n=0,i=()=>{let s=Rl.now();if(this.ttlResolution>0){n=s;let o=setTimeout(()=>n=0,this.ttlResolution);o.unref&&o.unref()}return s};this.getRemainingTTL=s=>{let o=this.#a.get(s);if(o===void 0)return 0;let a=e[o],l=r[o];if(!a||!l)return 1/0;let c=(n||i())-l;return a-c},this.#R=s=>{let o=r[s],a=e[s];return!!a&&!!o&&(n||i())-o>a}}#C=()=>{};#r=()=>{};#P=()=>{};#R=()=>!1;#L(){let e=new Al(this.#e);this.#d=0,this.#N=e,this.#x=r=>{this.#d-=e[r],e[r]=0},this.#M=(r,n,i,s)=>{if(this.#u(n))return 0;if(!vs(i))if(s){if(typeof s!="function")throw new TypeError("sizeCalculation must be a function");if(i=s(n,r),!vs(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i},this.#v=(r,n,i)=>{if(e[r]=n,this.#t){let s=this.#t-e[r];for(;this.#d>s;)this.#B(!0)}this.#d+=e[r],i&&(i.entrySize=n,i.totalCalculatedSize=this.#d)}}#x=e=>{};#v=(e,r,n)=>{};#M=(e,r,n,i)=>{if(n||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#b({allowStale:e=this.allowStale}={}){if(this.#c)for(let r=this.#f;!(!this.#U(r)||((e||!this.#R(r))&&(yield r),r===this.#E));)r=this.#S[r]}*#y({allowStale:e=this.allowStale}={}){if(this.#c)for(let r=this.#E;!(!this.#U(r)||((e||!this.#R(r))&&(yield r),r===this.#f));)r=this.#T[r]}#U(e){return e!==void 0&&this.#a.get(this.#l[e])===e}*entries(){for(let e of this.#b())this.#i[e]!==void 0&&this.#l[e]!==void 0&&!this.#u(this.#i[e])&&(yield[this.#l[e],this.#i[e]])}*rentries(){for(let e of this.#y())this.#i[e]!==void 0&&this.#l[e]!==void 0&&!this.#u(this.#i[e])&&(yield[this.#l[e],this.#i[e]])}*keys(){for(let e of this.#b()){let r=this.#l[e];r!==void 0&&!this.#u(this.#i[e])&&(yield r)}}*rkeys(){for(let e of this.#y()){let r=this.#l[e];r!==void 0&&!this.#u(this.#i[e])&&(yield r)}}*values(){for(let e of this.#b())this.#i[e]!==void 0&&!this.#u(this.#i[e])&&(yield this.#i[e])}*rvalues(){for(let e of this.#y())this.#i[e]!==void 0&&!this.#u(this.#i[e])&&(yield this.#i[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,r={}){for(let n of this.#b()){let i=this.#i[n],s=this.#u(i)?i.__staleWhileFetching:i;if(s!==void 0&&e(s,this.#l[n],this))return this.get(this.#l[n],r)}}forEach(e,r=this){for(let n of this.#b()){let i=this.#i[n],s=this.#u(i)?i.__staleWhileFetching:i;s!==void 0&&e.call(r,s,this.#l[n],this)}}rforEach(e,r=this){for(let n of this.#y()){let i=this.#i[n],s=this.#u(i)?i.__staleWhileFetching:i;s!==void 0&&e.call(r,s,this.#l[n],this)}}purgeStale(){let e=!1;for(let r of this.#y({allowStale:!0}))this.#R(r)&&(this.#D(this.#l[r],"expire"),e=!0);return e}info(e){let r=this.#a.get(e);if(r===void 0)return;let n=this.#i[r],i=this.#u(n)?n.__staleWhileFetching:n;if(i===void 0)return;let s={value:i};if(this.#A&&this.#O){let o=this.#A[r],a=this.#O[r];if(o&&a){let l=o-(Rl.now()-a);s.ttl=l,s.start=Date.now()}}return this.#N&&(s.size=this.#N[r]),s}dump(){let e=[];for(let r of this.#b({allowStale:!0})){let n=this.#l[r],i=this.#i[r],s=this.#u(i)?i.__staleWhileFetching:i;if(s===void 0||n===void 0)continue;let o={value:s};if(this.#A&&this.#O){o.ttl=this.#A[r];let a=Rl.now()-this.#O[r];o.start=Math.floor(Date.now()-a)}this.#N&&(o.size=this.#N[r]),e.unshift([n,o])}return e}load(e){this.clear();for(let[r,n]of e){if(n.start){let i=Date.now()-n.start;n.start=Rl.now()-i}this.set(r,n.value,n)}}set(e,r,n={}){if(r===void 0)return this.delete(e),this;let{ttl:i=this.ttl,start:s,noDisposeOnSet:o=this.noDisposeOnSet,sizeCalculation:a=this.sizeCalculation,status:l}=n,{noUpdateTTL:c=this.noUpdateTTL}=n,u=this.#M(e,r,n.size||0,a);if(this.maxEntrySize&&u>this.maxEntrySize)return l&&(l.set="miss",l.maxEntrySizeExceeded=!0),this.#D(e,"set"),this;let d=this.#c===0?void 0:this.#a.get(e);if(d===void 0)d=this.#c===0?this.#f:this.#I.length!==0?this.#I.pop():this.#c===this.#e?this.#B(!1):this.#c,this.#l[d]=e,this.#i[d]=r,this.#a.set(e,d),this.#T[this.#f]=d,this.#S[d]=this.#f,this.#f=d,this.#c++,this.#v(d,u,l),l&&(l.set="add"),c=!1;else{this.#G(d);let E=this.#i[d];if(r!==E){if(this.#_&&this.#u(E)){E.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:f}=E;f!==void 0&&!o&&(this.#g&&this.#s?.(f,e,"set"),this.#h&&this.#p?.push([f,e,"set"]))}else o||(this.#g&&this.#s?.(E,e,"set"),this.#h&&this.#p?.push([E,e,"set"]));if(this.#x(d),this.#v(d,u,l),this.#i[d]=r,l){l.set="replace";let f=E&&this.#u(E)?E.__staleWhileFetching:E;f!==void 0&&(l.oldValue=f)}}else l&&(l.set="update")}if(i!==0&&!this.#A&&this.#w(),this.#A&&(c||this.#P(d,i,s),l&&this.#r(l,d)),!o&&this.#h&&this.#p){let E=this.#p,f;for(;f=E?.shift();)this.#n?.(...f)}return this}pop(){try{for(;this.#c;){let e=this.#i[this.#E];if(this.#B(!0),this.#u(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#h&&this.#p){let e=this.#p,r;for(;r=e?.shift();)this.#n?.(...r)}}}#B(e){let r=this.#E,n=this.#l[r],i=this.#i[r];return this.#_&&this.#u(i)?i.__abortController.abort(new Error("evicted")):(this.#g||this.#h)&&(this.#g&&this.#s?.(i,n,"evict"),this.#h&&this.#p?.push([i,n,"evict"])),this.#x(r),e&&(this.#l[r]=void 0,this.#i[r]=void 0,this.#I.push(r)),this.#c===1?(this.#E=this.#f=0,this.#I.length=0):this.#E=this.#T[r],this.#a.delete(n),this.#c--,r}has(e,r={}){let{updateAgeOnHas:n=this.updateAgeOnHas,status:i}=r,s=this.#a.get(e);if(s!==void 0){let o=this.#i[s];if(this.#u(o)&&o.__staleWhileFetching===void 0)return!1;if(this.#R(s))i&&(i.has="stale",this.#r(i,s));else return n&&this.#C(s),i&&(i.has="hit",this.#r(i,s)),!0}else i&&(i.has="miss");return!1}peek(e,r={}){let{allowStale:n=this.allowStale}=r,i=this.#a.get(e);if(i===void 0||!n&&this.#R(i))return;let s=this.#i[i];return this.#u(s)?s.__staleWhileFetching:s}#F(e,r,n,i){let s=r===void 0?void 0:this.#i[r];if(this.#u(s))return s;let o=new Bh,{signal:a}=n;a?.addEventListener("abort",()=>o.abort(a.reason),{signal:o.signal});let l={signal:o.signal,options:n,context:i},c=(h,S=!1)=>{let{aborted:T}=o.signal,m=n.ignoreFetchAbort&&h!==void 0;if(n.status&&(T&&!S?(n.status.fetchAborted=!0,n.status.fetchError=o.signal.reason,m&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),T&&!m&&!S)return d(o.signal.reason);let R=f;return this.#i[r]===f&&(h===void 0?R.__staleWhileFetching?this.#i[r]=R.__staleWhileFetching:this.#D(e,"fetch"):(n.status&&(n.status.fetchUpdated=!0),this.set(e,h,l.options))),h},u=h=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=h),d(h)),d=h=>{let{aborted:S}=o.signal,T=S&&n.allowStaleOnFetchAbort,m=T||n.allowStaleOnFetchRejection,R=m||n.noDeleteOnFetchRejection,A=f;if(this.#i[r]===f&&(!R||A.__staleWhileFetching===void 0?this.#D(e,"fetch"):T||(this.#i[r]=A.__staleWhileFetching)),m)return n.status&&A.__staleWhileFetching!==void 0&&(n.status.returnedStale=!0),A.__staleWhileFetching;if(A.__returned===A)throw h},E=(h,S)=>{let T=this.#o?.(e,s,l);T&&T instanceof Promise&&T.then(m=>h(m===void 0?void 0:m),S),o.signal.addEventListener("abort",()=>{(!n.ignoreFetchAbort||n.allowStaleOnFetchAbort)&&(h(void 0),n.allowStaleOnFetchAbort&&(h=m=>c(m,!0)))})};n.status&&(n.status.fetchDispatched=!0);let f=new Promise(E).then(c,u),p=Object.assign(f,{__abortController:o,__staleWhileFetching:s,__returned:void 0});return r===void 0?(this.set(e,p,{...l.options,status:void 0}),r=this.#a.get(e)):this.#i[r]=p,p}#u(e){if(!this.#_)return!1;let r=e;return!!r&&r instanceof Promise&&r.hasOwnProperty("__staleWhileFetching")&&r.__abortController instanceof Bh}async fetch(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:l=0,sizeCalculation:c=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL,noDeleteOnFetchRejection:d=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:E=this.allowStaleOnFetchRejection,ignoreFetchAbort:f=this.ignoreFetchAbort,allowStaleOnFetchAbort:p=this.allowStaleOnFetchAbort,context:h,forceRefresh:S=!1,status:T,signal:m}=r;if(!this.#_)return T&&(T.fetch="get"),this.get(e,{allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:s,status:T});let R={allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:s,ttl:o,noDisposeOnSet:a,size:l,sizeCalculation:c,noUpdateTTL:u,noDeleteOnFetchRejection:d,allowStaleOnFetchRejection:E,allowStaleOnFetchAbort:p,ignoreFetchAbort:f,status:T,signal:m},A=this.#a.get(e);if(A===void 0){T&&(T.fetch="miss");let I=this.#F(e,A,R,h);return I.__returned=I}else{let I=this.#i[A];if(this.#u(I)){let P=n&&I.__staleWhileFetching!==void 0;return T&&(T.fetch="inflight",P&&(T.returnedStale=!0)),P?I.__staleWhileFetching:I.__returned=I}let w=this.#R(A);if(!S&&!w)return T&&(T.fetch="hit"),this.#G(A),i&&this.#C(A),T&&this.#r(T,A),I;let g=this.#F(e,A,R,h),y=g.__staleWhileFetching!==void 0&&n;return T&&(T.fetch=w?"stale":"refresh",y&&w&&(T.returnedStale=!0)),y?g.__staleWhileFetching:g.__returned=g}}async forceFetch(e,r={}){let n=await this.fetch(e,r);if(n===void 0)throw new Error("fetch() returned undefined");return n}memo(e,r={}){let n=this.#m;if(!n)throw new Error("no memoMethod provided to constructor");let{context:i,forceRefresh:s,...o}=r,a=this.get(e,o);if(!s&&a!==void 0)return a;let l=n(e,a,{options:o,context:i});return this.set(e,l,o),l}get(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,status:o}=r,a=this.#a.get(e);if(a!==void 0){let l=this.#i[a],c=this.#u(l);return o&&this.#r(o,a),this.#R(a)?(o&&(o.get="stale"),c?(o&&n&&l.__staleWhileFetching!==void 0&&(o.returnedStale=!0),n?l.__staleWhileFetching:void 0):(s||this.#D(e,"expire"),o&&n&&(o.returnedStale=!0),n?l:void 0)):(o&&(o.get="hit"),c?l.__staleWhileFetching:(this.#G(a),i&&this.#C(a),l))}else o&&(o.get="miss")}#H(e,r){this.#S[r]=e,this.#T[e]=r}#G(e){e!==this.#f&&(e===this.#E?this.#E=this.#T[e]:this.#H(this.#S[e],this.#T[e]),this.#H(this.#f,e),this.#f=e)}delete(e){return this.#D(e,"delete")}#D(e,r){let n=!1;if(this.#c!==0){let i=this.#a.get(e);if(i!==void 0)if(n=!0,this.#c===1)this.#W(r);else{this.#x(i);let s=this.#i[i];if(this.#u(s)?s.__abortController.abort(new Error("deleted")):(this.#g||this.#h)&&(this.#g&&this.#s?.(s,e,r),this.#h&&this.#p?.push([s,e,r])),this.#a.delete(e),this.#l[i]=void 0,this.#i[i]=void 0,i===this.#f)this.#f=this.#S[i];else if(i===this.#E)this.#E=this.#T[i];else{let o=this.#S[i];this.#T[o]=this.#T[i];let a=this.#T[i];this.#S[a]=this.#S[i]}this.#c--,this.#I.push(i)}}if(this.#h&&this.#p?.length){let i=this.#p,s;for(;s=i?.shift();)this.#n?.(...s)}return n}clear(){return this.#W("delete")}#W(e){for(let r of this.#y({allowStale:!0})){let n=this.#i[r];if(this.#u(n))n.__abortController.abort(new Error("deleted"));else{let i=this.#l[r];this.#g&&this.#s?.(n,i,e),this.#h&&this.#p?.push([n,i,e])}}if(this.#a.clear(),this.#i.fill(void 0),this.#l.fill(void 0),this.#A&&this.#O&&(this.#A.fill(0),this.#O.fill(0)),this.#N&&this.#N.fill(0),this.#E=0,this.#f=0,this.#I.length=0,this.#d=0,this.#c=0,this.#h&&this.#p){let r=this.#p,n;for(;n=r?.shift();)this.#n?.(...n)}}};Fh.LRUCache=Hg});var CF=O(OF=>{"use strict";var TF=typeof process=="object"&&process?process:{stdout:null,stderr:null},ile=require("events"),SF=require("stream"),sle=require("string_decoder"),RF=sle.StringDecoder,$i=Symbol("EOF"),ki=Symbol("maybeEmitEnd"),Ms=Symbol("emittedEnd"),Hh=Symbol("emittingEnd"),Hu=Symbol("emittedError"),Gh=Symbol("closed"),AF=Symbol("read"),Wh=Symbol("flush"),mF=Symbol("flushChunk"),zr=Symbol("encoding"),Yi=Symbol("decoder"),$h=Symbol("flowing"),Gu=Symbol("paused"),ml=Symbol("resume"),Lt=Symbol("buffer"),ni=Symbol("pipes"),er=Symbol("bufferLength"),Gg=Symbol("bufferPush"),Wg=Symbol("bufferShift"),pr=Symbol("objectMode"),Dt=Symbol("destroyed"),$g=Symbol("error"),kg=Symbol("emitData"),gF=Symbol("emitEnd"),Yg=Symbol("emitEnd2"),Vi=Symbol("async"),Vg=Symbol("abort"),kh=Symbol("aborted"),Lo=Symbol("signal"),Wu=t=>Promise.resolve().then(t),NF=global._MP_NO_ITERATOR_SYMBOLS_!=="1",_F=NF&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),IF=NF&&Symbol.iterator||Symbol("iterator not implemented"),ole=t=>t==="end"||t==="finish"||t==="prefinish",ale=t=>t instanceof ArrayBuffer||typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,lle=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),Yh=class{constructor(e,r,n){this.src=e,this.dest=r,this.opts=n,this.ondrain=()=>e[ml](),r.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},qg=class extends Yh{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,r,n){super(e,r,n),this.proxyErrors=i=>r.emit("error",i),e.on("error",this.proxyErrors)}},Xg=class t extends SF{constructor(e){super(),this[$h]=!1,this[Gu]=!1,this[ni]=[],this[Lt]=[],this[pr]=e&&e.objectMode||!1,this[pr]?this[zr]=null:this[zr]=e&&e.encoding||null,this[zr]==="buffer"&&(this[zr]=null),this[Vi]=e&&!!e.async||!1,this[Yi]=this[zr]?new RF(this[zr]):null,this[$i]=!1,this[Ms]=!1,this[Hh]=!1,this[Gh]=!1,this[Hu]=null,this.writable=!0,this.readable=!0,this[er]=0,this[Dt]=!1,e&&e.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[Lt]}),e&&e.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[ni]}),this[Lo]=e&&e.signal,this[kh]=!1,this[Lo]&&(this[Lo].addEventListener("abort",()=>this[Vg]()),this[Lo].aborted&&this[Vg]())}get bufferLength(){return this[er]}get encoding(){return this[zr]}set encoding(e){if(this[pr])throw new Error("cannot set encoding in objectMode");if(this[zr]&&e!==this[zr]&&(this[Yi]&&this[Yi].lastNeed||this[er]))throw new Error("cannot change encoding");this[zr]!==e&&(this[Yi]=e?new RF(e):null,this[Lt].length&&(this[Lt]=this[Lt].map(r=>this[Yi].write(r)))),this[zr]=e}setEncoding(e){this.encoding=e}get objectMode(){return this[pr]}set objectMode(e){this[pr]=this[pr]||!!e}get async(){return this[Vi]}set async(e){this[Vi]=this[Vi]||!!e}[Vg](){this[kh]=!0,this.emit("abort",this[Lo].reason),this.destroy(this[Lo].reason)}get aborted(){return this[kh]}set aborted(e){}write(e,r,n){if(this[kh])return!1;if(this[$i])throw new Error("write after end");if(this[Dt])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof r=="function"&&(n=r,r="utf8"),r||(r="utf8");let i=this[Vi]?Wu:s=>s();return!this[pr]&&!Buffer.isBuffer(e)&&(lle(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):ale(e)?e=Buffer.from(e):typeof e!="string"&&(this.objectMode=!0)),this[pr]?(this.flowing&&this[er]!==0&&this[Wh](!0),this.flowing?this.emit("data",e):this[Gg](e),this[er]!==0&&this.emit("readable"),n&&i(n),this.flowing):e.length?(typeof e=="string"&&!(r===this[zr]&&!this[Yi].lastNeed)&&(e=Buffer.from(e,r)),Buffer.isBuffer(e)&&this[zr]&&(e=this[Yi].write(e)),this.flowing&&this[er]!==0&&this[Wh](!0),this.flowing?this.emit("data",e):this[Gg](e),this[er]!==0&&this.emit("readable"),n&&i(n),this.flowing):(this[er]!==0&&this.emit("readable"),n&&i(n),this.flowing)}read(e){if(this[Dt])return null;if(this[er]===0||e===0||e>this[er])return this[ki](),null;this[pr]&&(e=null),this[Lt].length>1&&!this[pr]&&(this.encoding?this[Lt]=[this[Lt].join("")]:this[Lt]=[Buffer.concat(this[Lt],this[er])]);let r=this[AF](e||null,this[Lt][0]);return this[ki](),r}[AF](e,r){return e===r.length||e===null?this[Wg]():(this[Lt][0]=r.slice(e),r=r.slice(0,e),this[er]-=e),this.emit("data",r),!this[Lt].length&&!this[$i]&&this.emit("drain"),r}end(e,r,n){return typeof e=="function"&&(n=e,e=null),typeof r=="function"&&(n=r,r="utf8"),e&&this.write(e,r),n&&this.once("end",n),this[$i]=!0,this.writable=!1,(this.flowing||!this[Gu])&&this[ki](),this}[ml](){this[Dt]||(this[Gu]=!1,this[$h]=!0,this.emit("resume"),this[Lt].length?this[Wh]():this[$i]?this[ki]():this.emit("drain"))}resume(){return this[ml]()}pause(){this[$h]=!1,this[Gu]=!0}get destroyed(){return this[Dt]}get flowing(){return this[$h]}get paused(){return this[Gu]}[Gg](e){this[pr]?this[er]+=1:this[er]+=e.length,this[Lt].push(e)}[Wg](){return this[pr]?this[er]-=1:this[er]-=this[Lt][0].length,this[Lt].shift()}[Wh](e){do;while(this[mF](this[Wg]())&&this[Lt].length);!e&&!this[Lt].length&&!this[$i]&&this.emit("drain")}[mF](e){return this.emit("data",e),this.flowing}pipe(e,r){if(this[Dt])return;let n=this[Ms];return r=r||{},e===TF.stdout||e===TF.stderr?r.end=!1:r.end=r.end!==!1,r.proxyErrors=!!r.proxyErrors,n?r.end&&e.end():(this[ni].push(r.proxyErrors?new qg(this,e,r):new Yh(this,e,r)),this[Vi]?Wu(()=>this[ml]()):this[ml]()),e}unpipe(e){let r=this[ni].find(n=>n.dest===e);r&&(this[ni].splice(this[ni].indexOf(r),1),r.unpipe())}addListener(e,r){return this.on(e,r)}on(e,r){let n=super.on(e,r);return e==="data"&&!this[ni].length&&!this.flowing?this[ml]():e==="readable"&&this[er]!==0?super.emit("readable"):ole(e)&&this[Ms]?(super.emit(e),this.removeAllListeners(e)):e==="error"&&this[Hu]&&(this[Vi]?Wu(()=>r.call(this,this[Hu])):r.call(this,this[Hu])),n}get emittedEnd(){return this[Ms]}[ki](){!this[Hh]&&!this[Ms]&&!this[Dt]&&this[Lt].length===0&&this[$i]&&(this[Hh]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[Gh]&&this.emit("close"),this[Hh]=!1)}emit(e,r,...n){if(e!=="error"&&e!=="close"&&e!==Dt&&this[Dt])return;if(e==="data")return!this[pr]&&!r?!1:this[Vi]?Wu(()=>this[kg](r)):this[kg](r);if(e==="end")return this[gF]();if(e==="close"){if(this[Gh]=!0,!this[Ms]&&!this[Dt])return;let s=super.emit("close");return this.removeAllListeners("close"),s}else if(e==="error"){this[Hu]=r,super.emit($g,r);let s=!this[Lo]||this.listeners("error").length?super.emit("error",r):!1;return this[ki](),s}else if(e==="resume"){let s=super.emit("resume");return this[ki](),s}else if(e==="finish"||e==="prefinish"){let s=super.emit(e);return this.removeAllListeners(e),s}let i=super.emit(e,r,...n);return this[ki](),i}[kg](e){for(let n of this[ni])n.dest.write(e)===!1&&this.pause();let r=super.emit("data",e);return this[ki](),r}[gF](){this[Ms]||(this[Ms]=!0,this.readable=!1,this[Vi]?Wu(()=>this[Yg]()):this[Yg]())}[Yg](){if(this[Yi]){let r=this[Yi].end();if(r){for(let n of this[ni])n.dest.write(r);super.emit("data",r)}}for(let r of this[ni])r.end();let e=super.emit("end");return this.removeAllListeners("end"),e}collect(){let e=[];this[pr]||(e.dataLength=0);let r=this.promise();return this.on("data",n=>{e.push(n),this[pr]||(e.dataLength+=n.length)}),r.then(()=>e)}concat(){return this[pr]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then(e=>this[pr]?Promise.reject(new Error("cannot concat in objectMode")):this[zr]?e.join(""):Buffer.concat(e,e.dataLength))}promise(){return new Promise((e,r)=>{this.on(Dt,()=>r(new Error("stream destroyed"))),this.on("error",n=>r(n)),this.on("end",()=>e())})}[_F](){let e=!1,r=()=>(this.pause(),e=!0,Promise.resolve({done:!0}));return{next:()=>{if(e)return r();let i=this.read();if(i!==null)return Promise.resolve({done:!1,value:i});if(this[$i])return r();let s=null,o=null,a=d=>{this.removeListener("data",l),this.removeListener("end",c),this.removeListener(Dt,u),r(),o(d)},l=d=>{this.removeListener("error",a),this.removeListener("end",c),this.removeListener(Dt,u),this.pause(),s({value:d,done:!!this[$i]})},c=()=>{this.removeListener("error",a),this.removeListener("data",l),this.removeListener(Dt,u),r(),s({done:!0})},u=()=>a(new Error("stream destroyed"));return new Promise((d,E)=>{o=E,s=d,this.once(Dt,u),this.once("error",a),this.once("end",c),this.once("data",l)})},throw:r,return:r,[_F](){return this}}}[IF](){let e=!1,r=()=>(this.pause(),this.removeListener($g,r),this.removeListener(Dt,r),this.removeListener("end",r),e=!0,{done:!0}),n=()=>{if(e)return r();let i=this.read();return i===null?r():{value:i}};return this.once("end",r),this.once($g,r),this.once(Dt,r),{next:n,throw:r,return:r,[IF](){return this}}}destroy(e){return this[Dt]?(e?this.emit("error",e):this.emit(Dt),this):(this[Dt]=!0,this[Lt].length=0,this[er]=0,typeof this.close=="function"&&!this[Gh]&&this.close(),e?this.emit("error",e):this.emit(Dt),this)}static isStream(e){return!!e&&(e instanceof t||e instanceof SF||e instanceof ile&&(typeof e.pipe=="function"||typeof e.write=="function"&&typeof e.end=="function"))}};OF.Minipass=Xg});var WF=O(Xe=>{"use strict";var cle=Xe&&Xe.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),ule=Xe&&Xe.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),dle=Xe&&Xe.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&cle(e,t,r);return ule(e,t),e};Object.defineProperty(Xe,"__esModule",{value:!0});Xe.PathScurry=Xe.Path=Xe.PathScurryDarwin=Xe.PathScurryPosix=Xe.PathScurryWin32=Xe.PathScurryBase=Xe.PathPosix=Xe.PathWin32=Xe.PathBase=Xe.ChildrenCache=Xe.ResolveCache=void 0;var PF=pF(),zh=require("node:path"),fle=require("node:url"),ku=require("fs"),Ele=dle(require("node:fs")),hle=ku.realpathSync.native,Vh=require("node:fs/promises"),bF=CF(),Yu={lstatSync:ku.lstatSync,readdir:ku.readdir,readdirSync:ku.readdirSync,readlinkSync:ku.readlinkSync,realpathSync:hle,promises:{lstat:Vh.lstat,readdir:Vh.readdir,readlink:Vh.readlink,realpath:Vh.realpath}},xF=t=>!t||t===Yu||t===Ele?Yu:{...Yu,...t,promises:{...Yu.promises,...t.promises||{}}},vF=/^\\\\\?\\([a-z]:)\\?$/i,ple=t=>t.replace(/\//g,"\\").replace(vF,"$1\\"),Tle=/[\\\/]/,Sn=0,MF=1,UF=2,ii=4,BF=6,FF=8,Do=10,HF=12,Tn=15,$u=~Tn,jg=16,yF=32,Vu=64,vn=128,qh=256,jh=512,wF=Vu|vn|jh,Sle=1023,zg=t=>t.isFile()?FF:t.isDirectory()?ii:t.isSymbolicLink()?Do:t.isCharacterDevice()?UF:t.isBlockDevice()?BF:t.isSocket()?HF:t.isFIFO()?MF:Sn,LF=new Map,qu=t=>{let e=LF.get(t);if(e)return e;let r=t.normalize("NFKD");return LF.set(t,r),r},DF=new Map,Xh=t=>{let e=DF.get(t);if(e)return e;let r=qu(t.toLowerCase());return DF.set(t,r),r},Xu=class extends PF.LRUCache{constructor(){super({max:256})}};Xe.ResolveCache=Xu;var Kh=class extends PF.LRUCache{constructor(e=16*1024){super({maxSize:e,sizeCalculation:r=>r.length+1})}};Xe.ChildrenCache=Kh;var GF=Symbol("PathScurry setAsCwd"),Tr=class{name;root;roots;parent;nocase;isCWD=!1;#e;#t;get dev(){return this.#t}#s;get mode(){return this.#s}#n;get nlink(){return this.#n}#o;get uid(){return this.#o}#m;get gid(){return this.#m}#c;get rdev(){return this.#c}#d;get blksize(){return this.#d}#a;get ino(){return this.#a}#l;get size(){return this.#l}#i;get blocks(){return this.#i}#T;get atimeMs(){return this.#T}#S;get mtimeMs(){return this.#S}#E;get ctimeMs(){return this.#E}#f;get birthtimeMs(){return this.#f}#I;get atime(){return this.#I}#p;get mtime(){return this.#p}#N;get ctime(){return this.#N}#O;get birthtime(){return this.#O}#A;#g;#_;#h;#w;#C;#r;#P;#R;#L;get parentPath(){return(this.parent||this).fullpath()}get path(){return this.parentPath}constructor(e,r=Sn,n,i,s,o,a){this.name=e,this.#A=s?Xh(e):qu(e),this.#r=r&Sle,this.nocase=s,this.roots=i,this.root=n||this,this.#P=o,this.#_=a.fullpath,this.#w=a.relative,this.#C=a.relativePosix,this.parent=a.parent,this.parent?this.#e=this.parent.#e:this.#e=xF(a.fs)}depth(){return this.#g!==void 0?this.#g:this.parent?this.#g=this.parent.depth()+1:this.#g=0}childrenCache(){return this.#P}resolve(e){if(!e)return this;let r=this.getRootString(e),i=e.substring(r.length).split(this.splitSep);return r?this.getRoot(r).#x(i):this.#x(i)}#x(e){let r=this;for(let n of e)r=r.child(n);return r}children(){let e=this.#P.get(this);if(e)return e;let r=Object.assign([],{provisional:0});return this.#P.set(this,r),this.#r&=~jg,r}child(e,r){if(e===""||e===".")return this;if(e==="..")return this.parent||this;let n=this.children(),i=this.nocase?Xh(e):qu(e);for(let l of n)if(l.#A===i)return l;let s=this.parent?this.sep:"",o=this.#_?this.#_+s+e:void 0,a=this.newChild(e,Sn,{...r,parent:this,fullpath:o});return this.canReaddir()||(a.#r|=vn),n.push(a),a}relative(){if(this.isCWD)return"";if(this.#w!==void 0)return this.#w;let e=this.name,r=this.parent;if(!r)return this.#w=this.name;let n=r.relative();return n+(!n||!r.parent?"":this.sep)+e}relativePosix(){if(this.sep==="/")return this.relative();if(this.isCWD)return"";if(this.#C!==void 0)return this.#C;let e=this.name,r=this.parent;if(!r)return this.#C=this.fullpathPosix();let n=r.relativePosix();return n+(!n||!r.parent?"":"/")+e}fullpath(){if(this.#_!==void 0)return this.#_;let e=this.name,r=this.parent;if(!r)return this.#_=this.name;let i=r.fullpath()+(r.parent?this.sep:"")+e;return this.#_=i}fullpathPosix(){if(this.#h!==void 0)return this.#h;if(this.sep==="/")return this.#h=this.fullpath();if(!this.parent){let i=this.fullpath().replace(/\\/g,"/");return/^[a-z]:\//i.test(i)?this.#h=`//?/${i}`:this.#h=i}let e=this.parent,r=e.fullpathPosix(),n=r+(!r||!e.parent?"":"/")+this.name;return this.#h=n}isUnknown(){return(this.#r&Tn)===Sn}isType(e){return this[`is${e}`]()}getType(){return this.isUnknown()?"Unknown":this.isDirectory()?"Directory":this.isFile()?"File":this.isSymbolicLink()?"SymbolicLink":this.isFIFO()?"FIFO":this.isCharacterDevice()?"CharacterDevice":this.isBlockDevice()?"BlockDevice":this.isSocket()?"Socket":"Unknown"}isFile(){return(this.#r&Tn)===FF}isDirectory(){return(this.#r&Tn)===ii}isCharacterDevice(){return(this.#r&Tn)===UF}isBlockDevice(){return(this.#r&Tn)===BF}isFIFO(){return(this.#r&Tn)===MF}isSocket(){return(this.#r&Tn)===HF}isSymbolicLink(){return(this.#r&Do)===Do}lstatCached(){return this.#r&yF?this:void 0}readlinkCached(){return this.#R}realpathCached(){return this.#L}readdirCached(){let e=this.children();return e.slice(0,e.provisional)}canReadlink(){if(this.#R)return!0;if(!this.parent)return!1;let e=this.#r&Tn;return!(e!==Sn&&e!==Do||this.#r&qh||this.#r&vn)}calledReaddir(){return!!(this.#r&jg)}isENOENT(){return!!(this.#r&vn)}isNamed(e){return this.nocase?this.#A===Xh(e):this.#A===qu(e)}async readlink(){let e=this.#R;if(e)return e;if(this.canReadlink()&&this.parent)try{let r=await this.#e.promises.readlink(this.fullpath()),n=(await this.parent.realpath())?.resolve(r);if(n)return this.#R=n}catch(r){this.#u(r.code);return}}readlinkSync(){let e=this.#R;if(e)return e;if(this.canReadlink()&&this.parent)try{let r=this.#e.readlinkSync(this.fullpath()),n=this.parent.realpathSync()?.resolve(r);if(n)return this.#R=n}catch(r){this.#u(r.code);return}}#v(e){this.#r|=jg;for(let r=e.provisional;r<e.length;r++){let n=e[r];n&&n.#M()}}#M(){this.#r&vn||(this.#r=(this.#r|vn)&$u,this.#b())}#b(){let e=this.children();e.provisional=0;for(let r of e)r.#M()}#y(){this.#r|=jh,this.#U()}#U(){if(this.#r&Vu)return;let e=this.#r;(e&Tn)===ii&&(e&=$u),this.#r=e|Vu,this.#b()}#B(e=""){e==="ENOTDIR"||e==="EPERM"?this.#U():e==="ENOENT"?this.#M():this.children().provisional=0}#F(e=""){e==="ENOTDIR"?this.parent.#U():e==="ENOENT"&&this.#M()}#u(e=""){let r=this.#r;r|=qh,e==="ENOENT"&&(r|=vn),(e==="EINVAL"||e==="UNKNOWN")&&(r&=$u),this.#r=r,e==="ENOTDIR"&&this.parent&&this.parent.#U()}#H(e,r){return this.#D(e,r)||this.#G(e,r)}#G(e,r){let n=zg(e),i=this.newChild(e.name,n,{parent:this}),s=i.#r&Tn;return s!==ii&&s!==Do&&s!==Sn&&(i.#r|=Vu),r.unshift(i),r.provisional++,i}#D(e,r){for(let n=r.provisional;n<r.length;n++){let i=r[n];if((this.nocase?Xh(e.name):qu(e.name))===i.#A)return this.#W(e,i,n,r)}}#W(e,r,n,i){let s=r.name;return r.#r=r.#r&$u|zg(e),s!==e.name&&(r.name=e.name),n!==i.provisional&&(n===i.length-1?i.pop():i.splice(n,1),i.unshift(r)),i.provisional++,r}async lstat(){if((this.#r&vn)===0)try{return this.#V(await this.#e.promises.lstat(this.fullpath())),this}catch(e){this.#F(e.code)}}lstatSync(){if((this.#r&vn)===0)try{return this.#V(this.#e.lstatSync(this.fullpath())),this}catch(e){this.#F(e.code)}}#V(e){let{atime:r,atimeMs:n,birthtime:i,birthtimeMs:s,blksize:o,blocks:a,ctime:l,ctimeMs:c,dev:u,gid:d,ino:E,mode:f,mtime:p,mtimeMs:h,nlink:S,rdev:T,size:m,uid:R}=e;this.#I=r,this.#T=n,this.#O=i,this.#f=s,this.#d=o,this.#i=a,this.#N=l,this.#E=c,this.#t=u,this.#m=d,this.#a=E,this.#s=f,this.#p=p,this.#S=h,this.#n=S,this.#c=T,this.#l=m,this.#o=R;let A=zg(e);this.#r=this.#r&$u|A|yF,A!==Sn&&A!==ii&&A!==Do&&(this.#r|=Vu)}#k=[];#Y=!1;#q(e){this.#Y=!1;let r=this.#k.slice();this.#k.length=0,r.forEach(n=>n(null,e))}readdirCB(e,r=!1){if(!this.canReaddir()){r?e(null,[]):queueMicrotask(()=>e(null,[]));return}let n=this.children();if(this.calledReaddir()){let s=n.slice(0,n.provisional);r?e(null,s):queueMicrotask(()=>e(null,s));return}if(this.#k.push(e),this.#Y)return;this.#Y=!0;let i=this.fullpath();this.#e.readdir(i,{withFileTypes:!0},(s,o)=>{if(s)this.#B(s.code),n.provisional=0;else{for(let a of o)this.#H(a,n);this.#v(n)}this.#q(n.slice(0,n.provisional))})}#$;async readdir(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let r=this.fullpath();if(this.#$)await this.#$;else{let n=()=>{};this.#$=new Promise(i=>n=i);try{for(let i of await this.#e.promises.readdir(r,{withFileTypes:!0}))this.#H(i,e);this.#v(e)}catch(i){this.#B(i.code),e.provisional=0}this.#$=void 0,n()}return e.slice(0,e.provisional)}readdirSync(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let r=this.fullpath();try{for(let n of this.#e.readdirSync(r,{withFileTypes:!0}))this.#H(n,e);this.#v(e)}catch(n){this.#B(n.code),e.provisional=0}return e.slice(0,e.provisional)}canReaddir(){if(this.#r&wF)return!1;let e=Tn&this.#r;return e===Sn||e===ii||e===Do}shouldWalk(e,r){return(this.#r&ii)===ii&&!(this.#r&wF)&&!e.has(this)&&(!r||r(this))}async realpath(){if(this.#L)return this.#L;if(!((jh|qh|vn)&this.#r))try{let e=await this.#e.promises.realpath(this.fullpath());return this.#L=this.resolve(e)}catch{this.#y()}}realpathSync(){if(this.#L)return this.#L;if(!((jh|qh|vn)&this.#r))try{let e=this.#e.realpathSync(this.fullpath());return this.#L=this.resolve(e)}catch{this.#y()}}[GF](e){if(e===this)return;e.isCWD=!1,this.isCWD=!0;let r=new Set([]),n=[],i=this;for(;i&&i.parent;)r.add(i),i.#w=n.join(this.sep),i.#C=n.join("/"),i=i.parent,n.push("..");for(i=e;i&&i.parent&&!r.has(i);)i.#w=void 0,i.#C=void 0,i=i.parent}};Xe.PathBase=Tr;var ju=class t extends Tr{sep="\\";splitSep=Tle;constructor(e,r=Sn,n,i,s,o,a){super(e,r,n,i,s,o,a)}newChild(e,r=Sn,n={}){return new t(e,r,this.root,this.roots,this.nocase,this.childrenCache(),n)}getRootString(e){return zh.win32.parse(e).root}getRoot(e){if(e=ple(e.toUpperCase()),e===this.root.name)return this.root;for(let[r,n]of Object.entries(this.roots))if(this.sameRoot(e,r))return this.roots[e]=n;return this.roots[e]=new Ju(e,this).root}sameRoot(e,r=this.root.name){return e=e.toUpperCase().replace(/\//g,"\\").replace(vF,"$1\\"),e===r}};Xe.PathWin32=ju;var zu=class t extends Tr{splitSep="/";sep="/";constructor(e,r=Sn,n,i,s,o,a){super(e,r,n,i,s,o,a)}getRootString(e){return e.startsWith("/")?"/":""}getRoot(e){return this.root}newChild(e,r=Sn,n={}){return new t(e,r,this.root,this.roots,this.nocase,this.childrenCache(),n)}};Xe.PathPosix=zu;var Ku=class{root;rootPath;roots;cwd;#e;#t;#s;nocase;#n;constructor(e=process.cwd(),r,n,{nocase:i,childrenCacheSize:s=16*1024,fs:o=Yu}={}){this.#n=xF(o),(e instanceof URL||e.startsWith("file://"))&&(e=(0,fle.fileURLToPath)(e));let a=r.resolve(e);this.roots=Object.create(null),this.rootPath=this.parseRootPath(a),this.#e=new Xu,this.#t=new Xu,this.#s=new Kh(s);let l=a.substring(this.rootPath.length).split(n);if(l.length===1&&!l[0]&&l.pop(),i===void 0)throw new TypeError("must provide nocase setting to PathScurryBase ctor");this.nocase=i,this.root=this.newRoot(this.#n),this.roots[this.rootPath]=this.root;let c=this.root,u=l.length-1,d=r.sep,E=this.rootPath,f=!1;for(let p of l){let h=u--;c=c.child(p,{relative:new Array(h).fill("..").join(d),relativePosix:new Array(h).fill("..").join("/"),fullpath:E+=(f?"":d)+p}),f=!0}this.cwd=c}depth(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.depth()}childrenCache(){return this.#s}resolve(...e){let r="";for(let s=e.length-1;s>=0;s--){let o=e[s];if(!(!o||o===".")&&(r=r?`${o}/${r}`:o,this.isAbsolute(o)))break}let n=this.#e.get(r);if(n!==void 0)return n;let i=this.cwd.resolve(r).fullpath();return this.#e.set(r,i),i}resolvePosix(...e){let r="";for(let s=e.length-1;s>=0;s--){let o=e[s];if(!(!o||o===".")&&(r=r?`${o}/${r}`:o,this.isAbsolute(o)))break}let n=this.#t.get(r);if(n!==void 0)return n;let i=this.cwd.resolve(r).fullpathPosix();return this.#t.set(r,i),i}relative(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relative()}relativePosix(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relativePosix()}basename(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.name}dirname(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),(e.parent||e).fullpath()}async readdir(e=this.cwd,r={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Tr||(r=e,e=this.cwd);let{withFileTypes:n}=r;if(e.canReaddir()){let i=await e.readdir();return n?i:i.map(s=>s.name)}else return[]}readdirSync(e=this.cwd,r={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Tr||(r=e,e=this.cwd);let{withFileTypes:n=!0}=r;return e.canReaddir()?n?e.readdirSync():e.readdirSync().map(i=>i.name):[]}async lstat(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstat()}lstatSync(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstatSync()}async readlink(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Tr||(r=e.withFileTypes,e=this.cwd);let n=await e.readlink();return r?n:n?.fullpath()}readlinkSync(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Tr||(r=e.withFileTypes,e=this.cwd);let n=e.readlinkSync();return r?n:n?.fullpath()}async realpath(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Tr||(r=e.withFileTypes,e=this.cwd);let n=await e.realpath();return r?n:n?.fullpath()}realpathSync(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Tr||(r=e.withFileTypes,e=this.cwd);let n=e.realpathSync();return r?n:n?.fullpath()}async walk(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Tr||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:s,walkFilter:o}=r,a=[];(!s||s(e))&&a.push(n?e:e.fullpath());let l=new Set,c=(d,E)=>{l.add(d),d.readdirCB((f,p)=>{if(f)return E(f);let h=p.length;if(!h)return E();let S=()=>{--h===0&&E()};for(let T of p)(!s||s(T))&&a.push(n?T:T.fullpath()),i&&T.isSymbolicLink()?T.realpath().then(m=>m?.isUnknown()?m.lstat():m).then(m=>m?.shouldWalk(l,o)?c(m,S):S()):T.shouldWalk(l,o)?c(T,S):S()},!0)},u=e;return new Promise((d,E)=>{c(u,f=>{if(f)return E(f);d(a)})})}walkSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Tr||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:s,walkFilter:o}=r,a=[];(!s||s(e))&&a.push(n?e:e.fullpath());let l=new Set([e]);for(let c of l){let u=c.readdirSync();for(let d of u){(!s||s(d))&&a.push(n?d:d.fullpath());let E=d;if(d.isSymbolicLink()){if(!(i&&(E=d.realpathSync())))continue;E.isUnknown()&&E.lstatSync()}E.shouldWalk(l,o)&&l.add(E)}}return a}[Symbol.asyncIterator](){return this.iterate()}iterate(e=this.cwd,r={}){return typeof e=="string"?e=this.cwd.resolve(e):e instanceof Tr||(r=e,e=this.cwd),this.stream(e,r)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Tr||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:s,walkFilter:o}=r;(!s||s(e))&&(yield n?e:e.fullpath());let a=new Set([e]);for(let l of a){let c=l.readdirSync();for(let u of c){(!s||s(u))&&(yield n?u:u.fullpath());let d=u;if(u.isSymbolicLink()){if(!(i&&(d=u.realpathSync())))continue;d.isUnknown()&&d.lstatSync()}d.shouldWalk(a,o)&&a.add(d)}}}stream(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Tr||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:s,walkFilter:o}=r,a=new bF.Minipass({objectMode:!0});(!s||s(e))&&a.write(n?e:e.fullpath());let l=new Set,c=[e],u=0,d=()=>{let E=!1;for(;!E;){let f=c.shift();if(!f){u===0&&a.end();return}u++,l.add(f);let p=(S,T,m=!1)=>{if(S)return a.emit("error",S);if(i&&!m){let R=[];for(let A of T)A.isSymbolicLink()&&R.push(A.realpath().then(I=>I?.isUnknown()?I.lstat():I));if(R.length){Promise.all(R).then(()=>p(null,T,!0));return}}for(let R of T)R&&(!s||s(R))&&(a.write(n?R:R.fullpath())||(E=!0));u--;for(let R of T){let A=R.realpathCached()||R;A.shouldWalk(l,o)&&c.push(A)}E&&!a.flowing?a.once("drain",d):h||d()},h=!0;f.readdirCB(p,!0),h=!1}};return d(),a}streamSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Tr||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:s,walkFilter:o}=r,a=new bF.Minipass({objectMode:!0}),l=new Set;(!s||s(e))&&a.write(n?e:e.fullpath());let c=[e],u=0,d=()=>{let E=!1;for(;!E;){let f=c.shift();if(!f){u===0&&a.end();return}u++,l.add(f);let p=f.readdirSync();for(let h of p)(!s||s(h))&&(a.write(n?h:h.fullpath())||(E=!0));u--;for(let h of p){let S=h;if(h.isSymbolicLink()){if(!(i&&(S=h.realpathSync())))continue;S.isUnknown()&&S.lstatSync()}S.shouldWalk(l,o)&&c.push(S)}}E&&!a.flowing&&a.once("drain",d)};return d(),a}chdir(e=this.cwd){let r=this.cwd;this.cwd=typeof e=="string"?this.cwd.resolve(e):e,this.cwd[GF](r)}};Xe.PathScurryBase=Ku;var Ju=class extends Ku{sep="\\";constructor(e=process.cwd(),r={}){let{nocase:n=!0}=r;super(e,zh.win32,"\\",{...r,nocase:n}),this.nocase=n;for(let i=this.cwd;i;i=i.parent)i.nocase=this.nocase}parseRootPath(e){return zh.win32.parse(e).root.toUpperCase()}newRoot(e){return new ju(this.rootPath,ii,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")||e.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(e)}};Xe.PathScurryWin32=Ju;var Qu=class extends Ku{sep="/";constructor(e=process.cwd(),r={}){let{nocase:n=!1}=r;super(e,zh.posix,"/",{...r,nocase:n}),this.nocase=n}parseRootPath(e){return"/"}newRoot(e){return new zu(this.rootPath,ii,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")}};Xe.PathScurryPosix=Qu;var Jh=class extends Qu{constructor(e=process.cwd(),r={}){let{nocase:n=!0}=r;super(e,{...r,nocase:n})}};Xe.PathScurryDarwin=Jh;Xe.Path=process.platform==="win32"?ju:zu;Xe.PathScurry=process.platform==="win32"?Ju:process.platform==="darwin"?Jh:Qu});var Jg=O(Qh=>{"use strict";Object.defineProperty(Qh,"__esModule",{value:!0});Qh.Pattern=void 0;var Rle=xs(),Ale=t=>t.length>=1,mle=t=>t.length>=1,Kg=class t{#e;#t;#s;length;#n;#o;#m;#c;#d;#a;#l=!0;constructor(e,r,n,i){if(!Ale(e))throw new TypeError("empty pattern list");if(!mle(r))throw new TypeError("empty glob list");if(r.length!==e.length)throw new TypeError("mismatched pattern list and glob list lengths");if(this.length=e.length,n<0||n>=this.length)throw new TypeError("index out of range");if(this.#e=e,this.#t=r,this.#s=n,this.#n=i,this.#s===0){if(this.isUNC()){let[s,o,a,l,...c]=this.#e,[u,d,E,f,...p]=this.#t;c[0]===""&&(c.shift(),p.shift());let h=[s,o,a,l,""].join("/"),S=[u,d,E,f,""].join("/");this.#e=[h,...c],this.#t=[S,...p],this.length=this.#e.length}else if(this.isDrive()||this.isAbsolute()){let[s,...o]=this.#e,[a,...l]=this.#t;o[0]===""&&(o.shift(),l.shift());let c=s+"/",u=a+"/";this.#e=[c,...o],this.#t=[u,...l],this.length=this.#e.length}}}pattern(){return this.#e[this.#s]}isString(){return typeof this.#e[this.#s]=="string"}isGlobstar(){return this.#e[this.#s]===Rle.GLOBSTAR}isRegExp(){return this.#e[this.#s]instanceof RegExp}globString(){return this.#m=this.#m||(this.#s===0?this.isAbsolute()?this.#t[0]+this.#t.slice(1).join("/"):this.#t.join("/"):this.#t.slice(this.#s).join("/"))}hasMore(){return this.length>this.#s+1}rest(){return this.#o!==void 0?this.#o:this.hasMore()?(this.#o=new t(this.#e,this.#t,this.#s+1,this.#n),this.#o.#a=this.#a,this.#o.#d=this.#d,this.#o.#c=this.#c,this.#o):this.#o=null}isUNC(){let e=this.#e;return this.#d!==void 0?this.#d:this.#d=this.#n==="win32"&&this.#s===0&&e[0]===""&&e[1]===""&&typeof e[2]=="string"&&!!e[2]&&typeof e[3]=="string"&&!!e[3]}isDrive(){let e=this.#e;return this.#c!==void 0?this.#c:this.#c=this.#n==="win32"&&this.#s===0&&this.length>1&&typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0])}isAbsolute(){let e=this.#e;return this.#a!==void 0?this.#a:this.#a=e[0]===""&&e.length>1||this.isDrive()||this.isUNC()}root(){let e=this.#e[0];return typeof e=="string"&&this.isAbsolute()&&this.#s===0?e:""}checkFollowGlobstar(){return!(this.#s===0||!this.isGlobstar()||!this.#l)}markFollowGlobstar(){return this.#s===0||!this.isGlobstar()||!this.#l?!1:(this.#l=!1,!0)}};Qh.Pattern=Kg});var XF=O(Hr=>{"use strict";var gle=Hr&&Hr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Hr,"__esModule",{value:!0});Hr.Minipass=Hr.isWritable=Hr.isReadable=Hr.isStream=void 0;var $F=typeof process=="object"&&process?process:{stdout:null,stderr:null},i_=require("node:events"),qF=gle(require("node:stream")),_le=require("node:string_decoder"),Ile=t=>!!t&&typeof t=="object"&&(t instanceof sp||t instanceof qF.default||(0,Hr.isReadable)(t)||(0,Hr.isWritable)(t));Hr.isStream=Ile;var Nle=t=>!!t&&typeof t=="object"&&t instanceof i_.EventEmitter&&typeof t.pipe=="function"&&t.pipe!==qF.default.Writable.prototype.pipe;Hr.isReadable=Nle;var Ole=t=>!!t&&typeof t=="object"&&t instanceof i_.EventEmitter&&typeof t.write=="function"&&typeof t.end=="function";Hr.isWritable=Ole;var qi=Symbol("EOF"),Xi=Symbol("maybeEmitEnd"),Us=Symbol("emittedEnd"),Zh=Symbol("emittingEnd"),Zu=Symbol("emittedError"),ep=Symbol("closed"),kF=Symbol("read"),tp=Symbol("flush"),YF=Symbol("flushChunk"),Mn=Symbol("encoding"),gl=Symbol("decoder"),tr=Symbol("flowing"),ed=Symbol("paused"),_l=Symbol("resume"),rr=Symbol("buffer"),Fr=Symbol("pipes"),nr=Symbol("bufferLength"),Qg=Symbol("bufferPush"),rp=Symbol("bufferShift"),yr=Symbol("objectMode"),Pt=Symbol("destroyed"),Zg=Symbol("error"),e_=Symbol("emitData"),VF=Symbol("emitEnd"),t_=Symbol("emitEnd2"),si=Symbol("async"),r_=Symbol("abort"),np=Symbol("aborted"),td=Symbol("signal"),Po=Symbol("dataListeners"),Zr=Symbol("discarded"),rd=t=>Promise.resolve().then(t),Cle=t=>t(),ble=t=>t==="end"||t==="finish"||t==="prefinish",yle=t=>t instanceof ArrayBuffer||!!t&&typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,wle=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),ip=class{src;dest;opts;ondrain;constructor(e,r,n){this.src=e,this.dest=r,this.opts=n,this.ondrain=()=>e[_l](),this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(e){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},n_=class extends ip{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,r,n){super(e,r,n),this.proxyErrors=i=>r.emit("error",i),e.on("error",this.proxyErrors)}},Lle=t=>!!t.objectMode,Dle=t=>!t.objectMode&&!!t.encoding&&t.encoding!=="buffer",sp=class extends i_.EventEmitter{[tr]=!1;[ed]=!1;[Fr]=[];[rr]=[];[yr];[Mn];[si];[gl];[qi]=!1;[Us]=!1;[Zh]=!1;[ep]=!1;[Zu]=null;[nr]=0;[Pt]=!1;[td];[np]=!1;[Po]=0;[Zr]=!1;writable=!0;readable=!0;constructor(...e){let r=e[0]||{};if(super(),r.objectMode&&typeof r.encoding=="string")throw new TypeError("Encoding and objectMode may not be used together");Lle(r)?(this[yr]=!0,this[Mn]=null):Dle(r)?(this[Mn]=r.encoding,this[yr]=!1):(this[yr]=!1,this[Mn]=null),this[si]=!!r.async,this[gl]=this[Mn]?new _le.StringDecoder(this[Mn]):null,r&&r.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[rr]}),r&&r.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[Fr]});let{signal:n}=r;n&&(this[td]=n,n.aborted?this[r_]():n.addEventListener("abort",()=>this[r_]()))}get bufferLength(){return this[nr]}get encoding(){return this[Mn]}set encoding(e){throw new Error("Encoding must be set at instantiation time")}setEncoding(e){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[yr]}set objectMode(e){throw new Error("objectMode must be set at instantiation time")}get async(){return this[si]}set async(e){this[si]=this[si]||!!e}[r_](){this[np]=!0,this.emit("abort",this[td]?.reason),this.destroy(this[td]?.reason)}get aborted(){return this[np]}set aborted(e){}write(e,r,n){if(this[np])return!1;if(this[qi])throw new Error("write after end");if(this[Pt])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof r=="function"&&(n=r,r="utf8"),r||(r="utf8");let i=this[si]?rd:Cle;if(!this[yr]&&!Buffer.isBuffer(e)){if(wle(e))e=Buffer.from(e.buffer,e.byteOffset,e.byteLength);else if(yle(e))e=Buffer.from(e);else if(typeof e!="string")throw new Error("Non-contiguous data written to non-objectMode stream")}return this[yr]?(this[tr]&&this[nr]!==0&&this[tp](!0),this[tr]?this.emit("data",e):this[Qg](e),this[nr]!==0&&this.emit("readable"),n&&i(n),this[tr]):e.length?(typeof e=="string"&&!(r===this[Mn]&&!this[gl]?.lastNeed)&&(e=Buffer.from(e,r)),Buffer.isBuffer(e)&&this[Mn]&&(e=this[gl].write(e)),this[tr]&&this[nr]!==0&&this[tp](!0),this[tr]?this.emit("data",e):this[Qg](e),this[nr]!==0&&this.emit("readable"),n&&i(n),this[tr]):(this[nr]!==0&&this.emit("readable"),n&&i(n),this[tr])}read(e){if(this[Pt])return null;if(this[Zr]=!1,this[nr]===0||e===0||e&&e>this[nr])return this[Xi](),null;this[yr]&&(e=null),this[rr].length>1&&!this[yr]&&(this[rr]=[this[Mn]?this[rr].join(""):Buffer.concat(this[rr],this[nr])]);let r=this[kF](e||null,this[rr][0]);return this[Xi](),r}[kF](e,r){if(this[yr])this[rp]();else{let n=r;e===n.length||e===null?this[rp]():typeof n=="string"?(this[rr][0]=n.slice(e),r=n.slice(0,e),this[nr]-=e):(this[rr][0]=n.subarray(e),r=n.subarray(0,e),this[nr]-=e)}return this.emit("data",r),!this[rr].length&&!this[qi]&&this.emit("drain"),r}end(e,r,n){return typeof e=="function"&&(n=e,e=void 0),typeof r=="function"&&(n=r,r="utf8"),e!==void 0&&this.write(e,r),n&&this.once("end",n),this[qi]=!0,this.writable=!1,(this[tr]||!this[ed])&&this[Xi](),this}[_l](){this[Pt]||(!this[Po]&&!this[Fr].length&&(this[Zr]=!0),this[ed]=!1,this[tr]=!0,this.emit("resume"),this[rr].length?this[tp]():this[qi]?this[Xi]():this.emit("drain"))}resume(){return this[_l]()}pause(){this[tr]=!1,this[ed]=!0,this[Zr]=!1}get destroyed(){return this[Pt]}get flowing(){return this[tr]}get paused(){return this[ed]}[Qg](e){this[yr]?this[nr]+=1:this[nr]+=e.length,this[rr].push(e)}[rp](){return this[yr]?this[nr]-=1:this[nr]-=this[rr][0].length,this[rr].shift()}[tp](e=!1){do;while(this[YF](this[rp]())&&this[rr].length);!e&&!this[rr].length&&!this[qi]&&this.emit("drain")}[YF](e){return this.emit("data",e),this[tr]}pipe(e,r){if(this[Pt])return e;this[Zr]=!1;let n=this[Us];return r=r||{},e===$F.stdout||e===$F.stderr?r.end=!1:r.end=r.end!==!1,r.proxyErrors=!!r.proxyErrors,n?r.end&&e.end():(this[Fr].push(r.proxyErrors?new n_(this,e,r):new ip(this,e,r)),this[si]?rd(()=>this[_l]()):this[_l]()),e}unpipe(e){let r=this[Fr].find(n=>n.dest===e);r&&(this[Fr].length===1?(this[tr]&&this[Po]===0&&(this[tr]=!1),this[Fr]=[]):this[Fr].splice(this[Fr].indexOf(r),1),r.unpipe())}addListener(e,r){return this.on(e,r)}on(e,r){let n=super.on(e,r);if(e==="data")this[Zr]=!1,this[Po]++,!this[Fr].length&&!this[tr]&&this[_l]();else if(e==="readable"&&this[nr]!==0)super.emit("readable");else if(ble(e)&&this[Us])super.emit(e),this.removeAllListeners(e);else if(e==="error"&&this[Zu]){let i=r;this[si]?rd(()=>i.call(this,this[Zu])):i.call(this,this[Zu])}return n}removeListener(e,r){return this.off(e,r)}off(e,r){let n=super.off(e,r);return e==="data"&&(this[Po]=this.listeners("data").length,this[Po]===0&&!this[Zr]&&!this[Fr].length&&(this[tr]=!1)),n}removeAllListeners(e){let r=super.removeAllListeners(e);return(e==="data"||e===void 0)&&(this[Po]=0,!this[Zr]&&!this[Fr].length&&(this[tr]=!1)),r}get emittedEnd(){return this[Us]}[Xi](){!this[Zh]&&!this[Us]&&!this[Pt]&&this[rr].length===0&&this[qi]&&(this[Zh]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[ep]&&this.emit("close"),this[Zh]=!1)}emit(e,...r){let n=r[0];if(e!=="error"&&e!=="close"&&e!==Pt&&this[Pt])return!1;if(e==="data")return!this[yr]&&!n?!1:this[si]?(rd(()=>this[e_](n)),!0):this[e_](n);if(e==="end")return this[VF]();if(e==="close"){if(this[ep]=!0,!this[Us]&&!this[Pt])return!1;let s=super.emit("close");return this.removeAllListeners("close"),s}else if(e==="error"){this[Zu]=n,super.emit(Zg,n);let s=!this[td]||this.listeners("error").length?super.emit("error",n):!1;return this[Xi](),s}else if(e==="resume"){let s=super.emit("resume");return this[Xi](),s}else if(e==="finish"||e==="prefinish"){let s=super.emit(e);return this.removeAllListeners(e),s}let i=super.emit(e,...r);return this[Xi](),i}[e_](e){for(let n of this[Fr])n.dest.write(e)===!1&&this.pause();let r=this[Zr]?!1:super.emit("data",e);return this[Xi](),r}[VF](){return this[Us]?!1:(this[Us]=!0,this.readable=!1,this[si]?(rd(()=>this[t_]()),!0):this[t_]())}[t_](){if(this[gl]){let r=this[gl].end();if(r){for(let n of this[Fr])n.dest.write(r);this[Zr]||super.emit("data",r)}}for(let r of this[Fr])r.end();let e=super.emit("end");return this.removeAllListeners("end"),e}async collect(){let e=Object.assign([],{dataLength:0});this[yr]||(e.dataLength=0);let r=this.promise();return this.on("data",n=>{e.push(n),this[yr]||(e.dataLength+=n.length)}),await r,e}async concat(){if(this[yr])throw new Error("cannot concat in objectMode");let e=await this.collect();return this[Mn]?e.join(""):Buffer.concat(e,e.dataLength)}async promise(){return new Promise((e,r)=>{this.on(Pt,()=>r(new Error("stream destroyed"))),this.on("error",n=>r(n)),this.on("end",()=>e())})}[Symbol.asyncIterator](){this[Zr]=!1;let e=!1,r=async()=>(this.pause(),e=!0,{value:void 0,done:!0});return{next:()=>{if(e)return r();let i=this.read();if(i!==null)return Promise.resolve({done:!1,value:i});if(this[qi])return r();let s,o,a=d=>{this.off("data",l),this.off("end",c),this.off(Pt,u),r(),o(d)},l=d=>{this.off("error",a),this.off("end",c),this.off(Pt,u),this.pause(),s({value:d,done:!!this[qi]})},c=()=>{this.off("error",a),this.off("data",l),this.off(Pt,u),r(),s({done:!0,value:void 0})},u=()=>a(new Error("stream destroyed"));return new Promise((d,E)=>{o=E,s=d,this.once(Pt,u),this.once("error",a),this.once("end",c),this.once("data",l)})},throw:r,return:r,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[Zr]=!1;let e=!1,r=()=>(this.pause(),this.off(Zg,r),this.off(Pt,r),this.off("end",r),e=!0,{done:!0,value:void 0}),n=()=>{if(e)return r();let i=this.read();return i===null?r():{done:!1,value:i}};return this.once("end",r),this.once(Zg,r),this.once(Pt,r),{next:n,throw:r,return:r,[Symbol.iterator](){return this}}}destroy(e){if(this[Pt])return e?this.emit("error",e):this.emit(Pt),this;this[Pt]=!0,this[Zr]=!0,this[rr].length=0,this[nr]=0;let r=this;return typeof r.close=="function"&&!this[ep]&&r.close(),e?this.emit("error",e):this.emit(Pt),this}static get isStream(){return Hr.isStream}};Hr.Minipass=sp});var o_=O(op=>{"use strict";Object.defineProperty(op,"__esModule",{value:!0});op.Ignore=void 0;var jF=xs(),Ple=Jg(),xle=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",s_=class{relative;relativeChildren;absolute;absoluteChildren;platform;mmopts;constructor(e,{nobrace:r,nocase:n,noext:i,noglobstar:s,platform:o=xle}){this.relative=[],this.absolute=[],this.relativeChildren=[],this.absoluteChildren=[],this.platform=o,this.mmopts={dot:!0,nobrace:r,nocase:n,noext:i,noglobstar:s,optimizationLevel:2,platform:o,nocomment:!0,nonegate:!0};for(let a of e)this.add(a)}add(e){let r=new jF.Minimatch(e,this.mmopts);for(let n=0;n<r.set.length;n++){let i=r.set[n],s=r.globParts[n];if(!i||!s)throw new Error("invalid pattern object");for(;i[0]==="."&&s[0]===".";)i.shift(),s.shift();let o=new Ple.Pattern(i,s,0,this.platform),a=new jF.Minimatch(o.globString(),this.mmopts),l=s[s.length-1]==="**",c=o.isAbsolute();c?this.absolute.push(a):this.relative.push(a),l&&(c?this.absoluteChildren.push(a):this.relativeChildren.push(a))}}ignored(e){let r=e.fullpath(),n=`${r}/`,i=e.relative()||".",s=`${i}/`;for(let o of this.relative)if(o.match(i)||o.match(s))return!0;for(let o of this.absolute)if(o.match(r)||o.match(n))return!0;return!1}childrenIgnored(e){let r=e.fullpath()+"/",n=(e.relative()||".")+"/";for(let i of this.relativeChildren)if(i.match(n))return!0;for(let i of this.absoluteChildren)if(i.match(r))return!0;return!1}};op.Ignore=s_});var KF=O(oi=>{"use strict";Object.defineProperty(oi,"__esModule",{value:!0});oi.Processor=oi.SubWalks=oi.MatchRecord=oi.HasWalkedCache=void 0;var zF=xs(),ap=class t{store;constructor(e=new Map){this.store=e}copy(){return new t(new Map(this.store))}hasWalked(e,r){return this.store.get(e.fullpath())?.has(r.globString())}storeWalked(e,r){let n=e.fullpath(),i=this.store.get(n);i?i.add(r.globString()):this.store.set(n,new Set([r.globString()]))}};oi.HasWalkedCache=ap;var lp=class{store=new Map;add(e,r,n){let i=(r?2:0)|(n?1:0),s=this.store.get(e);this.store.set(e,s===void 0?i:i&s)}entries(){return[...this.store.entries()].map(([e,r])=>[e,!!(r&2),!!(r&1)])}};oi.MatchRecord=lp;var cp=class{store=new Map;add(e,r){if(!e.canReaddir())return;let n=this.store.get(e);n?n.find(i=>i.globString()===r.globString())||n.push(r):this.store.set(e,[r])}get(e){let r=this.store.get(e);if(!r)throw new Error("attempting to walk unknown path");return r}entries(){return this.keys().map(e=>[e,this.store.get(e)])}keys(){return[...this.store.keys()].filter(e=>e.canReaddir())}};oi.SubWalks=cp;var a_=class t{hasWalkedCache;matches=new lp;subwalks=new cp;patterns;follow;dot;opts;constructor(e,r){this.opts=e,this.follow=!!e.follow,this.dot=!!e.dot,this.hasWalkedCache=r?r.copy():new ap}processPatterns(e,r){this.patterns=r;let n=r.map(i=>[e,i]);for(let[i,s]of n){this.hasWalkedCache.storeWalked(i,s);let o=s.root(),a=s.isAbsolute()&&this.opts.absolute!==!1;if(o){i=i.resolve(o==="/"&&this.opts.root!==void 0?this.opts.root:o);let d=s.rest();if(d)s=d;else{this.matches.add(i,!0,!1);continue}}if(i.isENOENT())continue;let l,c,u=!1;for(;typeof(l=s.pattern())=="string"&&(c=s.rest());)i=i.resolve(l),s=c,u=!0;if(l=s.pattern(),c=s.rest(),u){if(this.hasWalkedCache.hasWalked(i,s))continue;this.hasWalkedCache.storeWalked(i,s)}if(typeof l=="string"){let d=l===".."||l===""||l===".";this.matches.add(i.resolve(l),a,d);continue}else if(l===zF.GLOBSTAR){(!i.isSymbolicLink()||this.follow||s.checkFollowGlobstar())&&this.subwalks.add(i,s);let d=c?.pattern(),E=c?.rest();if(!c||(d===""||d===".")&&!E)this.matches.add(i,a,d===""||d===".");else if(d===".."){let f=i.parent||i;E?this.hasWalkedCache.hasWalked(f,E)||this.subwalks.add(f,E):this.matches.add(f,a,!0)}}else l instanceof RegExp&&this.subwalks.add(i,s)}return this}subwalkTargets(){return this.subwalks.keys()}child(){return new t(this.opts,this.hasWalkedCache)}filterEntries(e,r){let n=this.subwalks.get(e),i=this.child();for(let s of r)for(let o of n){let a=o.isAbsolute(),l=o.pattern(),c=o.rest();l===zF.GLOBSTAR?i.testGlobstar(s,o,c,a):l instanceof RegExp?i.testRegExp(s,l,c,a):i.testString(s,l,c,a)}return i}testGlobstar(e,r,n,i){if((this.dot||!e.name.startsWith("."))&&(r.hasMore()||this.matches.add(e,i,!1),e.canReaddir()&&(this.follow||!e.isSymbolicLink()?this.subwalks.add(e,r):e.isSymbolicLink()&&(n&&r.checkFollowGlobstar()?this.subwalks.add(e,n):r.markFollowGlobstar()&&this.subwalks.add(e,r)))),n){let s=n.pattern();if(typeof s=="string"&&s!==".."&&s!==""&&s!==".")this.testString(e,s,n.rest(),i);else if(s===".."){let o=e.parent||e;this.subwalks.add(o,n)}else s instanceof RegExp&&this.testRegExp(e,s,n.rest(),i)}}testRegExp(e,r,n,i){r.test(e.name)&&(n?this.subwalks.add(e,n):this.matches.add(e,i,!1))}testString(e,r,n,i){e.isNamed(r)&&(n?this.subwalks.add(e,n):this.matches.add(e,i,!1))}};oi.Processor=a_});var ZF=O(Bs=>{"use strict";Object.defineProperty(Bs,"__esModule",{value:!0});Bs.GlobStream=Bs.GlobWalker=Bs.GlobUtil=void 0;var vle=XF(),JF=o_(),QF=KF(),Mle=(t,e)=>typeof t=="string"?new JF.Ignore([t],e):Array.isArray(t)?new JF.Ignore(t,e):t,nd=class{path;patterns;opts;seen=new Set;paused=!1;aborted=!1;#e=[];#t;#s;signal;maxDepth;includeChildMatches;constructor(e,r,n){if(this.patterns=e,this.path=r,this.opts=n,this.#s=!n.posix&&n.platform==="win32"?"\\":"/",this.includeChildMatches=n.includeChildMatches!==!1,(n.ignore||!this.includeChildMatches)&&(this.#t=Mle(n.ignore??[],n),!this.includeChildMatches&&typeof this.#t.add!="function")){let i="cannot ignore child matches, ignore lacks add() method.";throw new Error(i)}this.maxDepth=n.maxDepth||1/0,n.signal&&(this.signal=n.signal,this.signal.addEventListener("abort",()=>{this.#e.length=0}))}#n(e){return this.seen.has(e)||!!this.#t?.ignored?.(e)}#o(e){return!!this.#t?.childrenIgnored?.(e)}pause(){this.paused=!0}resume(){if(this.signal?.aborted)return;this.paused=!1;let e;for(;!this.paused&&(e=this.#e.shift());)e()}onResume(e){this.signal?.aborted||(this.paused?this.#e.push(e):e())}async matchCheck(e,r){if(r&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||await e.realpath(),!n)return;e=n}let s=e.isUnknown()||this.opts.stat?await e.lstat():e;if(this.opts.follow&&this.opts.nodir&&s?.isSymbolicLink()){let o=await s.realpath();o&&(o.isUnknown()||this.opts.stat)&&await o.lstat()}return this.matchCheckTest(s,r)}matchCheckTest(e,r){return e&&(this.maxDepth===1/0||e.depth()<=this.maxDepth)&&(!r||e.canReaddir())&&(!this.opts.nodir||!e.isDirectory())&&(!this.opts.nodir||!this.opts.follow||!e.isSymbolicLink()||!e.realpathCached()?.isDirectory())&&!this.#n(e)?e:void 0}matchCheckSync(e,r){if(r&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||e.realpathSync(),!n)return;e=n}let s=e.isUnknown()||this.opts.stat?e.lstatSync():e;if(this.opts.follow&&this.opts.nodir&&s?.isSymbolicLink()){let o=s.realpathSync();o&&(o?.isUnknown()||this.opts.stat)&&o.lstatSync()}return this.matchCheckTest(s,r)}matchFinish(e,r){if(this.#n(e))return;if(!this.includeChildMatches&&this.#t?.add){let s=`${e.relativePosix()}/**`;this.#t.add(s)}let n=this.opts.absolute===void 0?r:this.opts.absolute;this.seen.add(e);let i=this.opts.mark&&e.isDirectory()?this.#s:"";if(this.opts.withFileTypes)this.matchEmit(e);else if(n){let s=this.opts.posix?e.fullpathPosix():e.fullpath();this.matchEmit(s+i)}else{let s=this.opts.posix?e.relativePosix():e.relative(),o=this.opts.dotRelative&&!s.startsWith(".."+this.#s)?"."+this.#s:"";this.matchEmit(s?o+s+i:"."+i)}}async match(e,r,n){let i=await this.matchCheck(e,n);i&&this.matchFinish(i,r)}matchSync(e,r,n){let i=this.matchCheckSync(e,n);i&&this.matchFinish(i,r)}walkCB(e,r,n){this.signal?.aborted&&n(),this.walkCB2(e,r,new QF.Processor(this.opts),n)}walkCB2(e,r,n,i){if(this.#o(e))return i();if(this.signal?.aborted&&i(),this.paused){this.onResume(()=>this.walkCB2(e,r,n,i));return}n.processPatterns(e,r);let s=1,o=()=>{--s===0&&i()};for(let[a,l,c]of n.matches.entries())this.#n(a)||(s++,this.match(a,l,c).then(()=>o()));for(let a of n.subwalkTargets()){if(this.maxDepth!==1/0&&a.depth()>=this.maxDepth)continue;s++;let l=a.readdirCached();a.calledReaddir()?this.walkCB3(a,l,n,o):a.readdirCB((c,u)=>this.walkCB3(a,u,n,o),!0)}o()}walkCB3(e,r,n,i){n=n.filterEntries(e,r);let s=1,o=()=>{--s===0&&i()};for(let[a,l,c]of n.matches.entries())this.#n(a)||(s++,this.match(a,l,c).then(()=>o()));for(let[a,l]of n.subwalks.entries())s++,this.walkCB2(a,l,n.child(),o);o()}walkCBSync(e,r,n){this.signal?.aborted&&n(),this.walkCB2Sync(e,r,new QF.Processor(this.opts),n)}walkCB2Sync(e,r,n,i){if(this.#o(e))return i();if(this.signal?.aborted&&i(),this.paused){this.onResume(()=>this.walkCB2Sync(e,r,n,i));return}n.processPatterns(e,r);let s=1,o=()=>{--s===0&&i()};for(let[a,l,c]of n.matches.entries())this.#n(a)||this.matchSync(a,l,c);for(let a of n.subwalkTargets()){if(this.maxDepth!==1/0&&a.depth()>=this.maxDepth)continue;s++;let l=a.readdirSync();this.walkCB3Sync(a,l,n,o)}o()}walkCB3Sync(e,r,n,i){n=n.filterEntries(e,r);let s=1,o=()=>{--s===0&&i()};for(let[a,l,c]of n.matches.entries())this.#n(a)||this.matchSync(a,l,c);for(let[a,l]of n.subwalks.entries())s++,this.walkCB2Sync(a,l,n.child(),o);o()}};Bs.GlobUtil=nd;var l_=class extends nd{matches=new Set;constructor(e,r,n){super(e,r,n)}matchEmit(e){this.matches.add(e)}async walk(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&await this.path.lstat(),await new Promise((e,r)=>{this.walkCB(this.path,this.patterns,()=>{this.signal?.aborted?r(this.signal.reason):e(this.matches)})}),this.matches}walkSync(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>{if(this.signal?.aborted)throw this.signal.reason}),this.matches}};Bs.GlobWalker=l_;var c_=class extends nd{results;constructor(e,r,n){super(e,r,n),this.results=new vle.Minipass({signal:this.signal,objectMode:!0}),this.results.on("drain",()=>this.resume()),this.results.on("resume",()=>this.resume())}matchEmit(e){this.results.write(e),this.results.flowing||this.pause()}stream(){let e=this.path;return e.isUnknown()?e.lstat().then(()=>{this.walkCB(e,this.patterns,()=>this.results.end())}):this.walkCB(e,this.patterns,()=>this.results.end()),this.results}streamSync(){return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>this.results.end()),this.results}};Bs.GlobStream=c_});var d_=O(fp=>{"use strict";Object.defineProperty(fp,"__esModule",{value:!0});fp.Glob=void 0;var Ule=xs(),Ble=require("node:url"),up=WF(),Fle=Jg(),dp=ZF(),Hle=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",u_=class{absolute;cwd;root;dot;dotRelative;follow;ignore;magicalBraces;mark;matchBase;maxDepth;nobrace;nocase;nodir;noext;noglobstar;pattern;platform;realpath;scurry;stat;signal;windowsPathsNoEscape;withFileTypes;includeChildMatches;opts;patterns;constructor(e,r){if(!r)throw new TypeError("glob options required");if(this.withFileTypes=!!r.withFileTypes,this.signal=r.signal,this.follow=!!r.follow,this.dot=!!r.dot,this.dotRelative=!!r.dotRelative,this.nodir=!!r.nodir,this.mark=!!r.mark,r.cwd?(r.cwd instanceof URL||r.cwd.startsWith("file://"))&&(r.cwd=(0,Ble.fileURLToPath)(r.cwd)):this.cwd="",this.cwd=r.cwd||"",this.root=r.root,this.magicalBraces=!!r.magicalBraces,this.nobrace=!!r.nobrace,this.noext=!!r.noext,this.realpath=!!r.realpath,this.absolute=r.absolute,this.includeChildMatches=r.includeChildMatches!==!1,this.noglobstar=!!r.noglobstar,this.matchBase=!!r.matchBase,this.maxDepth=typeof r.maxDepth=="number"?r.maxDepth:1/0,this.stat=!!r.stat,this.ignore=r.ignore,this.withFileTypes&&this.absolute!==void 0)throw new Error("cannot set absolute and withFileTypes:true");if(typeof e=="string"&&(e=[e]),this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(e=e.map(l=>l.replace(/\\/g,"/"))),this.matchBase){if(r.noglobstar)throw new TypeError("base matching requires globstar");e=e.map(l=>l.includes("/")?l:`./**/${l}`)}if(this.pattern=e,this.platform=r.platform||Hle,this.opts={...r,platform:this.platform},r.scurry){if(this.scurry=r.scurry,r.nocase!==void 0&&r.nocase!==r.scurry.nocase)throw new Error("nocase option contradicts provided scurry option")}else{let l=r.platform==="win32"?up.PathScurryWin32:r.platform==="darwin"?up.PathScurryDarwin:r.platform?up.PathScurryPosix:up.PathScurry;this.scurry=new l(this.cwd,{nocase:r.nocase,fs:r.fs})}this.nocase=this.scurry.nocase;let n=this.platform==="darwin"||this.platform==="win32",i={...r,dot:this.dot,matchBase:this.matchBase,nobrace:this.nobrace,nocase:this.nocase,nocaseMagicOnly:n,nocomment:!0,noext:this.noext,nonegate:!0,optimizationLevel:2,platform:this.platform,windowsPathsNoEscape:this.windowsPathsNoEscape,debug:!!this.opts.debug},s=this.pattern.map(l=>new Ule.Minimatch(l,i)),[o,a]=s.reduce((l,c)=>(l[0].push(...c.set),l[1].push(...c.globParts),l),[[],[]]);this.patterns=o.map((l,c)=>{let u=a[c];if(!u)throw new Error("invalid pattern object");return new Fle.Pattern(l,u,0,this.platform)})}async walk(){return[...await new dp.GlobWalker(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walk()]}walkSync(){return[...new dp.GlobWalker(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walkSync()]}stream(){return new dp.GlobStream(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).stream()}streamSync(){return new dp.GlobStream(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).streamSync()}iterateSync(){return this.streamSync()[Symbol.iterator]()}[Symbol.iterator](){return this.iterateSync()}iterate(){return this.stream()[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterate()}};fp.Glob=u_});var f_=O(Ep=>{"use strict";Object.defineProperty(Ep,"__esModule",{value:!0});Ep.hasMagic=void 0;var Gle=xs(),Wle=(t,e={})=>{Array.isArray(t)||(t=[t]);for(let r of t)if(new Gle.Minimatch(r,e).hasMagic())return!0;return!1};Ep.hasMagic=Wle});var n1=O(xe=>{"use strict";Object.defineProperty(xe,"__esModule",{value:!0});xe.glob=xe.sync=xe.iterate=xe.iterateSync=xe.stream=xe.streamSync=xe.Ignore=xe.hasMagic=xe.Glob=xe.unescape=xe.escape=void 0;xe.globStreamSync=id;xe.globStream=E_;xe.globSync=h_;xe.globIterateSync=sd;xe.globIterate=p_;var e1=xs(),xo=d_(),$le=f_(),r1=xs();Object.defineProperty(xe,"escape",{enumerable:!0,get:function(){return r1.escape}});Object.defineProperty(xe,"unescape",{enumerable:!0,get:function(){return r1.unescape}});var kle=d_();Object.defineProperty(xe,"Glob",{enumerable:!0,get:function(){return kle.Glob}});var Yle=f_();Object.defineProperty(xe,"hasMagic",{enumerable:!0,get:function(){return Yle.hasMagic}});var Vle=o_();Object.defineProperty(xe,"Ignore",{enumerable:!0,get:function(){return Vle.Ignore}});function id(t,e={}){return new xo.Glob(t,e).streamSync()}function E_(t,e={}){return new xo.Glob(t,e).stream()}function h_(t,e={}){return new xo.Glob(t,e).walkSync()}async function t1(t,e={}){return new xo.Glob(t,e).walk()}function sd(t,e={}){return new xo.Glob(t,e).iterateSync()}function p_(t,e={}){return new xo.Glob(t,e).iterate()}xe.streamSync=id;xe.stream=Object.assign(E_,{sync:id});xe.iterateSync=sd;xe.iterate=Object.assign(p_,{sync:sd});xe.sync=Object.assign(h_,{stream:id,iterate:sd});xe.glob=Object.assign(t1,{glob:t1,globSync:h_,sync:xe.sync,globStream:E_,stream:xe.stream,globStreamSync:id,streamSync:xe.streamSync,globIterate:p_,iterate:xe.iterate,globIterateSync:sd,iterateSync:xe.iterateSync,Glob:xo.Glob,hasMagic:$le.hasMagic,escape:e1.escape,unescape:e1.unescape});xe.glob.glob=xe.glob});var a1=O((SMe,o1)=>{var s1=yA(),Il=require("path"),T_=dU(),qle=CB(),Xle=BB(),jle=YB(),zle=n1(),vo=o1.exports={},i1=/[\/\\]/g,Kle=function(t,e){var r=[];return T_(t).forEach(function(n){var i=n.indexOf("!")===0;i&&(n=n.slice(1));var s=e(n);i?r=qle(r,s):r=Xle(r,s)}),r};vo.exists=function(){var t=Il.join.apply(Il,arguments);return s1.existsSync(t)};vo.expand=function(...t){var e=jle(t[0])?t.shift():{},r=Array.isArray(t[0])?t[0]:t;if(r.length===0)return[];var n=Kle(r,function(i){return zle.sync(i,e)});return e.filter&&(n=n.filter(function(i){i=Il.join(e.cwd||"",i);try{return typeof e.filter=="function"?e.filter(i):s1.statSync(i)[e.filter]()}catch{return!1}})),n};vo.expandMapping=function(t,e,r){r=Object.assign({rename:function(s,o){return Il.join(s||"",o)}},r);var n=[],i={};return vo.expand(r,t).forEach(function(s){var o=s;r.flatten&&(o=Il.basename(o)),r.ext&&(o=o.replace(/(\.[^\/]*)?$/,r.ext));var a=r.rename(e,o,r);r.cwd&&(s=Il.join(r.cwd,s)),a=a.replace(i1,"/"),s=s.replace(i1,"/"),i[a]?i[a].src.push(s):(n.push({src:[s],dest:a}),i[a]=n[n.length-1])}),n};vo.normalizeFilesArray=function(t){var e=[];return t.forEach(function(r){var n;("src"in r||"dest"in r)&&e.push(r)}),e.length===0?[]:(e=_(e).chain().forEach(function(r){!("src"in r)||!r.src||(Array.isArray(r.src)?r.src=T_(r.src):r.src=[r.src])}).map(function(r){var n=Object.assign({},r);if(delete n.src,delete n.dest,r.expand)return vo.expandMapping(r.src,r.dest,n).map(function(s){var o=Object.assign({},r);return o.orig=Object.assign({},r),o.src=s.src,o.dest=s.dest,["expand","cwd","flatten","rename","ext"].forEach(function(a){delete o[a]}),o});var i=Object.assign({},r);return i.orig=Object.assign({},r),"src"in i&&Object.defineProperty(i,"src",{enumerable:!0,get:function s(){var o;return"result"in s||(o=r.src,o=Array.isArray(o)?T_(o):[o],s.result=vo.expand(n,o)),s.result}}),"dest"in i&&(i.dest=r.dest),i}).flatten().value(),e)}});var Nl=O((AMe,u1)=>{var S_=yA(),l1=require("path"),Jle=yE(),Qle=hD(),c1=QA(),Zle=jP(),RMe=require("stream").Stream,ece=tU().PassThrough,en=u1.exports={};en.file=a1();en.collectStream=function(t,e){var r=[],n=0;t.on("error",e),t.on("data",function(i){r.push(i),n+=i.length}),t.on("end",function(){var i=Buffer.alloc(n),s=0;r.forEach(function(o){o.copy(i,s),s+=o.length}),e(null,i)})};en.dateify=function(t){return t=t||new Date,t instanceof Date?t=t:typeof t=="string"?t=new Date(t):t=new Date,t};en.defaults=function(t,e,r){var n=arguments;return n[0]=n[0]||{},Zle(...n)};en.isStream=function(t){return Jle(t)};en.lazyReadStream=function(t){return new Qle.Readable(function(){return S_.createReadStream(t)})};en.normalizeInputSource=function(t){return t===null?Buffer.alloc(0):typeof t=="string"?Buffer.from(t):en.isStream(t)?t.pipe(new ece):t};en.sanitizePath=function(t){return c1(t,!1).replace(/^\w+:/,"").replace(/^(\.\.\/|\/)+/,"")};en.trailingSlashIt=function(t){return t.slice(-1)!=="/"?t+"/":t};en.unixifyPath=function(t){return c1(t,!1).replace(/^\w+:/,"")};en.walkdir=function(t,e,r){var n=[];typeof e=="function"&&(r=e,e=t),S_.readdir(t,function(i,s){var o=0,a,l;if(i)return r(i);(function c(){if(a=s[o++],!a)return r(null,n);l=l1.join(t,a),S_.stat(l,function(u,d){n.push({path:l,relative:l1.relative(e,l).replace(/\\/g,"/"),stats:d}),d&&d.isDirectory()?en.walkdir(l,e,function(E,f){if(E)return r(E);f.forEach(function(p){n.push(p)}),c()}):c()})})()})}});var h1=O((f1,E1)=>{var tce=require("util"),rce={ABORTED:"archive was aborted",DIRECTORYDIRPATHREQUIRED:"diretory dirpath argument must be a non-empty string value",DIRECTORYFUNCTIONINVALIDDATA:"invalid data returned by directory custom data function",ENTRYNAMEREQUIRED:"entry name must be a non-empty string value",FILEFILEPATHREQUIRED:"file filepath argument must be a non-empty string value",FINALIZING:"archive already finalizing",QUEUECLOSED:"queue closed",NOENDMETHOD:"no suitable finalize/end method defined by module",DIRECTORYNOTSUPPORTED:"support for directory entries not defined by module",FORMATSET:"archive format already set",INPUTSTEAMBUFFERREQUIRED:"input source must be valid Stream or Buffer instance",MODULESET:"module already set",SYMLINKNOTSUPPORTED:"support for symlink entries not defined by module",SYMLINKFILEPATHREQUIRED:"symlink filepath argument must be a non-empty string value",SYMLINKTARGETREQUIRED:"symlink target argument must be a non-empty string value",ENTRYNOTSUPPORTED:"entry not supported"};function d1(t,e){Error.captureStackTrace(this,this.constructor),this.message=rce[t]||t,this.code=t,this.data=e}tce.inherits(d1,Error);f1=E1.exports=d1});var ct=O((mMe,p1)=>{"use strict";var R_=class extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError(`Expected input to be an Array, got ${typeof e}`);let r="";for(let n=0;n<e.length;n++)r+=`    ${e[n].stack}
`;super(r),this.name="AggregateError",this.errors=e}};p1.exports={AggregateError:R_,ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,e){return t.includes(e)},ArrayPrototypeIndexOf(t,e){return t.indexOf(e)},ArrayPrototypeJoin(t,e){return t.join(e)},ArrayPrototypeMap(t,e){return t.map(e)},ArrayPrototypePop(t,e){return t.pop(e)},ArrayPrototypePush(t,e){return t.push(e)},ArrayPrototypeSlice(t,e,r){return t.slice(e,r)},Error,FunctionPrototypeCall(t,e,...r){return t.call(e,...r)},FunctionPrototypeSymbolHasInstance(t,e){return Function.prototype[Symbol.hasInstance].call(t,e)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,e){return Object.defineProperties(t,e)},ObjectDefineProperty(t,e,r){return Object.defineProperty(t,e,r)},ObjectGetOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,e){return Object.setPrototypeOf(t,e)},Promise,PromisePrototypeCatch(t,e){return t.catch(e)},PromisePrototypeThen(t,e,r){return t.then(e,r)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,e){return t.test(e)},SafeSet:Set,String,StringPrototypeSlice(t,e,r){return t.slice(e,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,e,r){return t.set(e,r)},Boolean,Uint8Array}});var A_=O((gMe,T1)=>{"use strict";T1.exports={format(t,...e){return t.replace(/%([sdifj])/g,function(...[r,n]){let i=e.shift();return n==="f"?i.toFixed(6):n==="j"?JSON.stringify(i):n==="s"&&typeof i=="object"?`${i.constructor!==Object?i.constructor.name:""} {}`.trim():i.toString()})},inspect(t){switch(typeof t){case"string":if(t.includes("'"))if(t.includes('"')){if(!t.includes("`")&&!t.includes("${"))return`\`${t}\``}else return`"${t}"`;return`'${t}'`;case"number":return isNaN(t)?"NaN":Object.is(t,-0)?String(t):t;case"bigint":return`${String(t)}n`;case"boolean":case"undefined":return String(t);case"object":return"{}"}}}});var wr=O((_Me,A1)=>{"use strict";var{format:nce,inspect:hp}=A_(),{AggregateError:ice}=ct(),sce=globalThis.AggregateError||ice,oce=Symbol("kIsNodeError"),ace=["string","function","number","object","Function","Object","boolean","bigint","symbol"],lce=/^([A-Z][a-z0-9]*)+$/,cce="__node_internal_",pp={};function Mo(t,e){if(!t)throw new pp.ERR_INTERNAL_ASSERTION(e)}function S1(t){let e="",r=t.length,n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function uce(t,e,r){if(typeof e=="function")return Mo(e.length<=r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${e.length}).`),e(...r);let n=(e.match(/%[dfijoOs]/g)||[]).length;return Mo(n===r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${n}).`),r.length===0?e:nce(e,...r)}function Sr(t,e,r){r||(r=Error);class n extends r{constructor(...s){super(uce(t,e,s))}toString(){return`${this.name} [${t}]: ${this.message}`}}Object.defineProperties(n.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${t}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),n.prototype.code=t,n.prototype[oce]=!0,pp[t]=n}function R1(t){let e=cce+t.name;return Object.defineProperty(t,"name",{value:e}),t}function dce(t,e){if(t&&e&&t!==e){if(Array.isArray(e.errors))return e.errors.push(t),e;let r=new sce([e,t],e.message);return r.code=e.code,r}return t||e}var m_=class extends Error{constructor(e="The operation was aborted",r=void 0){if(r!==void 0&&typeof r!="object")throw new pp.ERR_INVALID_ARG_TYPE("options","Object",r);super(e,r),this.code="ABORT_ERR",this.name="AbortError"}};Sr("ERR_ASSERTION","%s",Error);Sr("ERR_INVALID_ARG_TYPE",(t,e,r)=>{Mo(typeof t=="string","'name' must be a string"),Array.isArray(e)||(e=[e]);let n="The ";t.endsWith(" argument")?n+=`${t} `:n+=`"${t}" ${t.includes(".")?"property":"argument"} `,n+="must be ";let i=[],s=[],o=[];for(let l of e)Mo(typeof l=="string","All expected entries have to be of type string"),ace.includes(l)?i.push(l.toLowerCase()):lce.test(l)?s.push(l):(Mo(l!=="object",'The value "object" should be written as "Object"'),o.push(l));if(s.length>0){let l=i.indexOf("object");l!==-1&&(i.splice(i,l,1),s.push("Object"))}if(i.length>0){switch(i.length){case 1:n+=`of type ${i[0]}`;break;case 2:n+=`one of type ${i[0]} or ${i[1]}`;break;default:{let l=i.pop();n+=`one of type ${i.join(", ")}, or ${l}`}}(s.length>0||o.length>0)&&(n+=" or ")}if(s.length>0){switch(s.length){case 1:n+=`an instance of ${s[0]}`;break;case 2:n+=`an instance of ${s[0]} or ${s[1]}`;break;default:{let l=s.pop();n+=`an instance of ${s.join(", ")}, or ${l}`}}o.length>0&&(n+=" or ")}switch(o.length){case 0:break;case 1:o[0].toLowerCase()!==o[0]&&(n+="an "),n+=`${o[0]}`;break;case 2:n+=`one of ${o[0]} or ${o[1]}`;break;default:{let l=o.pop();n+=`one of ${o.join(", ")}, or ${l}`}}if(r==null)n+=`. Received ${r}`;else if(typeof r=="function"&&r.name)n+=`. Received function ${r.name}`;else if(typeof r=="object"){var a;if((a=r.constructor)!==null&&a!==void 0&&a.name)n+=`. Received an instance of ${r.constructor.name}`;else{let l=hp(r,{depth:-1});n+=`. Received ${l}`}}else{let l=hp(r,{colors:!1});l.length>25&&(l=`${l.slice(0,25)}...`),n+=`. Received type ${typeof r} (${l})`}return n},TypeError);Sr("ERR_INVALID_ARG_VALUE",(t,e,r="is invalid")=>{let n=hp(e);return n.length>128&&(n=n.slice(0,128)+"..."),`The ${t.includes(".")?"property":"argument"} '${t}' ${r}. Received ${n}`},TypeError);Sr("ERR_INVALID_RETURN_VALUE",(t,e,r)=>{var n;let i=r!=null&&(n=r.constructor)!==null&&n!==void 0&&n.name?`instance of ${r.constructor.name}`:`type ${typeof r}`;return`Expected ${t} to be returned from the "${e}" function but got ${i}.`},TypeError);Sr("ERR_MISSING_ARGS",(...t)=>{Mo(t.length>0,"At least one arg needs to be specified");let e,r=t.length;switch(t=(Array.isArray(t)?t:[t]).map(n=>`"${n}"`).join(" or "),r){case 1:e+=`The ${t[0]} argument`;break;case 2:e+=`The ${t[0]} and ${t[1]} arguments`;break;default:{let n=t.pop();e+=`The ${t.join(", ")}, and ${n} arguments`}break}return`${e} must be specified`},TypeError);Sr("ERR_OUT_OF_RANGE",(t,e,r)=>{Mo(e,'Missing "range" argument');let n;if(Number.isInteger(r)&&Math.abs(r)>2**32)n=S1(String(r));else if(typeof r=="bigint"){n=String(r);let i=BigInt(2)**BigInt(32);(r>i||r<-i)&&(n=S1(n)),n+="n"}else n=hp(r);return`The value of "${t}" is out of range. It must be ${e}. Received ${n}`},RangeError);Sr("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);Sr("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);Sr("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);Sr("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);Sr("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);Sr("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Sr("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);Sr("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);Sr("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);Sr("ERR_STREAM_WRITE_AFTER_END","write after end",Error);Sr("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);A1.exports={AbortError:m_,aggregateTwoErrors:R1(dce),hideStackFrames:R1,codes:pp}});var Gr=O((IMe,__)=>{"use strict";var fce=require("buffer"),{format:Ece,inspect:hce}=A_(),{codes:{ERR_INVALID_ARG_TYPE:g_}}=wr(),{kResistStopPropagation:pce,AggregateError:Tce,SymbolDispose:Sce}=ct(),Rce=globalThis.AbortSignal||wt().AbortSignal,Ace=globalThis.AbortController||wt().AbortController,mce=Object.getPrototypeOf(async function(){}).constructor,m1=globalThis.Blob||fce.Blob,gce=typeof m1<"u"?function(e){return e instanceof m1}:function(e){return!1},g1=(t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new g_(e,"AbortSignal",t)},_ce=(t,e)=>{if(typeof t!="function")throw new g_(e,"Function",t)};__.exports={AggregateError:Tce,kEmptyObject:Object.freeze({}),once(t){let e=!1;return function(...r){e||(e=!0,t.apply(this,r))}},createDeferredPromise:function(){let t,e;return{promise:new Promise((n,i)=>{t=n,e=i}),resolve:t,reject:e}},promisify(t){return new Promise((e,r)=>{t((n,...i)=>n?r(n):e(...i))})},debuglog(){return function(){}},format:Ece,inspect:hce,types:{isAsyncFunction(t){return t instanceof mce},isArrayBufferView(t){return ArrayBuffer.isView(t)}},isBlob:gce,deprecate(t,e){return t},addAbortListener:require("events").addAbortListener||function(e,r){if(e===void 0)throw new g_("signal","AbortSignal",e);g1(e,"signal"),_ce(r,"listener");let n;return e.aborted?queueMicrotask(()=>r()):(e.addEventListener("abort",r,{__proto__:null,once:!0,[pce]:!0}),n=()=>{e.removeEventListener("abort",r)}),{__proto__:null,[Sce](){var i;(i=n)===null||i===void 0||i()}}},AbortSignalAny:Rce.any||function(e){if(e.length===1)return e[0];let r=new Ace,n=()=>r.abort();return e.forEach(i=>{g1(i,"signals"),i.addEventListener("abort",n,{once:!0})}),r.signal.addEventListener("abort",()=>{e.forEach(i=>i.removeEventListener("abort",n))},{once:!0}),r.signal}};__.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")});var Cl=O((NMe,D1)=>{"use strict";var{ArrayIsArray:N_,ArrayPrototypeIncludes:O1,ArrayPrototypeJoin:C1,ArrayPrototypeMap:Ice,NumberIsInteger:O_,NumberIsNaN:Nce,NumberMAX_SAFE_INTEGER:Oce,NumberMIN_SAFE_INTEGER:Cce,NumberParseInt:bce,ObjectPrototypeHasOwnProperty:yce,RegExpPrototypeExec:b1,String:wce,StringPrototypeToUpperCase:Lce,StringPrototypeTrim:Dce}=ct(),{hideStackFrames:Rn,codes:{ERR_SOCKET_BAD_PORT:Pce,ERR_INVALID_ARG_TYPE:Lr,ERR_INVALID_ARG_VALUE:Ol,ERR_OUT_OF_RANGE:Uo,ERR_UNKNOWN_SIGNAL:_1}}=wr(),{normalizeEncoding:xce}=Gr(),{isAsyncFunction:vce,isArrayBufferView:Mce}=Gr().types,I1={};function Uce(t){return t===(t|0)}function Bce(t){return t===t>>>0}var Fce=/^[0-7]+$/,Hce="must be a 32-bit unsigned integer or an octal string";function Gce(t,e,r){if(typeof t>"u"&&(t=r),typeof t=="string"){if(b1(Fce,t)===null)throw new Ol(e,t,Hce);t=bce(t,8)}return y1(t,e),t}var Wce=Rn((t,e,r=Cce,n=Oce)=>{if(typeof t!="number")throw new Lr(e,"number",t);if(!O_(t))throw new Uo(e,"an integer",t);if(t<r||t>n)throw new Uo(e,`>= ${r} && <= ${n}`,t)}),$ce=Rn((t,e,r=-2147483648,n=2147483647)=>{if(typeof t!="number")throw new Lr(e,"number",t);if(!O_(t))throw new Uo(e,"an integer",t);if(t<r||t>n)throw new Uo(e,`>= ${r} && <= ${n}`,t)}),y1=Rn((t,e,r=!1)=>{if(typeof t!="number")throw new Lr(e,"number",t);if(!O_(t))throw new Uo(e,"an integer",t);let n=r?1:0,i=4294967295;if(t<n||t>i)throw new Uo(e,`>= ${n} && <= ${i}`,t)});function C_(t,e){if(typeof t!="string")throw new Lr(e,"string",t)}function kce(t,e,r=void 0,n){if(typeof t!="number")throw new Lr(e,"number",t);if(r!=null&&t<r||n!=null&&t>n||(r!=null||n!=null)&&Nce(t))throw new Uo(e,`${r!=null?`>= ${r}`:""}${r!=null&&n!=null?" && ":""}${n!=null?`<= ${n}`:""}`,t)}var Yce=Rn((t,e,r)=>{if(!O1(r,t)){let i="must be one of: "+C1(Ice(r,s=>typeof s=="string"?`'${s}'`:wce(s)),", ");throw new Ol(e,t,i)}});function w1(t,e){if(typeof t!="boolean")throw new Lr(e,"boolean",t)}function I_(t,e,r){return t==null||!yce(t,e)?r:t[e]}var Vce=Rn((t,e,r=null)=>{let n=I_(r,"allowArray",!1),i=I_(r,"allowFunction",!1);if(!I_(r,"nullable",!1)&&t===null||!n&&N_(t)||typeof t!="object"&&(!i||typeof t!="function"))throw new Lr(e,"Object",t)}),qce=Rn((t,e)=>{if(t!=null&&typeof t!="object"&&typeof t!="function")throw new Lr(e,"a dictionary",t)}),Tp=Rn((t,e,r=0)=>{if(!N_(t))throw new Lr(e,"Array",t);if(t.length<r){let n=`must be longer than ${r}`;throw new Ol(e,t,n)}});function Xce(t,e){Tp(t,e);for(let r=0;r<t.length;r++)C_(t[r],`${e}[${r}]`)}function jce(t,e){Tp(t,e);for(let r=0;r<t.length;r++)w1(t[r],`${e}[${r}]`)}function zce(t,e){Tp(t,e);for(let r=0;r<t.length;r++){let n=t[r],i=`${e}[${r}]`;if(n==null)throw new Lr(i,"AbortSignal",n);L1(n,i)}}function Kce(t,e="signal"){if(C_(t,e),I1[t]===void 0)throw I1[Lce(t)]!==void 0?new _1(t+" (signals must use all capital letters)"):new _1(t)}var Jce=Rn((t,e="buffer")=>{if(!Mce(t))throw new Lr(e,["Buffer","TypedArray","DataView"],t)});function Qce(t,e){let r=xce(e),n=t.length;if(r==="hex"&&n%2!==0)throw new Ol("encoding",e,`is invalid for data of length ${n}`)}function Zce(t,e="Port",r=!0){if(typeof t!="number"&&typeof t!="string"||typeof t=="string"&&Dce(t).length===0||+t!==+t>>>0||t>65535||t===0&&!r)throw new Pce(e,t,r);return t|0}var L1=Rn((t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new Lr(e,"AbortSignal",t)}),eue=Rn((t,e)=>{if(typeof t!="function")throw new Lr(e,"Function",t)}),tue=Rn((t,e)=>{if(typeof t!="function"||vce(t))throw new Lr(e,"Function",t)}),rue=Rn((t,e)=>{if(t!==void 0)throw new Lr(e,"undefined",t)});function nue(t,e,r){if(!O1(r,t))throw new Lr(e,`('${C1(r,"|")}')`,t)}var iue=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function N1(t,e){if(typeof t>"u"||!b1(iue,t))throw new Ol(e,t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function sue(t){if(typeof t=="string")return N1(t,"hints"),t;if(N_(t)){let e=t.length,r="";if(e===0)return r;for(let n=0;n<e;n++){let i=t[n];N1(i,"hints"),r+=i,n!==e-1&&(r+=", ")}return r}throw new Ol("hints",t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}D1.exports={isInt32:Uce,isUint32:Bce,parseFileMode:Gce,validateArray:Tp,validateStringArray:Xce,validateBooleanArray:jce,validateAbortSignalArray:zce,validateBoolean:w1,validateBuffer:Jce,validateDictionary:qce,validateEncoding:Qce,validateFunction:eue,validateInt32:$ce,validateInteger:Wce,validateNumber:kce,validateObject:Vce,validateOneOf:Yce,validatePlainFunction:tue,validatePort:Zce,validateSignalName:Kce,validateString:C_,validateUint32:y1,validateUndefined:rue,validateUnion:nue,validateAbortSignal:L1,validateLinkHeaderValue:sue}});var li=O((OMe,q1)=>{"use strict";var{SymbolAsyncIterator:P1,SymbolIterator:x1,SymbolFor:Bo}=ct(),v1=Bo("nodejs.stream.destroyed"),M1=Bo("nodejs.stream.errored"),b_=Bo("nodejs.stream.readable"),y_=Bo("nodejs.stream.writable"),U1=Bo("nodejs.stream.disturbed"),oue=Bo("nodejs.webstream.isClosedPromise"),aue=Bo("nodejs.webstream.controllerErrorFunction");function Sp(t,e=!1){var r;return!!(t&&typeof t.pipe=="function"&&typeof t.on=="function"&&(!e||typeof t.pause=="function"&&typeof t.resume=="function")&&(!t._writableState||((r=t._readableState)===null||r===void 0?void 0:r.readable)!==!1)&&(!t._writableState||t._readableState))}function Rp(t){var e;return!!(t&&typeof t.write=="function"&&typeof t.on=="function"&&(!t._readableState||((e=t._writableState)===null||e===void 0?void 0:e.writable)!==!1))}function lue(t){return!!(t&&typeof t.pipe=="function"&&t._readableState&&typeof t.on=="function"&&typeof t.write=="function")}function ai(t){return t&&(t._readableState||t._writableState||typeof t.write=="function"&&typeof t.on=="function"||typeof t.pipe=="function"&&typeof t.on=="function")}function B1(t){return!!(t&&!ai(t)&&typeof t.pipeThrough=="function"&&typeof t.getReader=="function"&&typeof t.cancel=="function")}function F1(t){return!!(t&&!ai(t)&&typeof t.getWriter=="function"&&typeof t.abort=="function")}function H1(t){return!!(t&&!ai(t)&&typeof t.readable=="object"&&typeof t.writable=="object")}function cue(t){return B1(t)||F1(t)||H1(t)}function uue(t,e){return t==null?!1:e===!0?typeof t[P1]=="function":e===!1?typeof t[x1]=="function":typeof t[P1]=="function"||typeof t[x1]=="function"}function Ap(t){if(!ai(t))return null;let e=t._writableState,r=t._readableState,n=e||r;return!!(t.destroyed||t[v1]||n!=null&&n.destroyed)}function G1(t){if(!Rp(t))return null;if(t.writableEnded===!0)return!0;let e=t._writableState;return e!=null&&e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function due(t,e){if(!Rp(t))return null;if(t.writableFinished===!0)return!0;let r=t._writableState;return r!=null&&r.errored?!1:typeof r?.finished!="boolean"?null:!!(r.finished||e===!1&&r.ended===!0&&r.length===0)}function fue(t){if(!Sp(t))return null;if(t.readableEnded===!0)return!0;let e=t._readableState;return!e||e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function W1(t,e){if(!Sp(t))return null;let r=t._readableState;return r!=null&&r.errored?!1:typeof r?.endEmitted!="boolean"?null:!!(r.endEmitted||e===!1&&r.ended===!0&&r.length===0)}function $1(t){return t&&t[b_]!=null?t[b_]:typeof t?.readable!="boolean"?null:Ap(t)?!1:Sp(t)&&t.readable&&!W1(t)}function k1(t){return t&&t[y_]!=null?t[y_]:typeof t?.writable!="boolean"?null:Ap(t)?!1:Rp(t)&&t.writable&&!G1(t)}function Eue(t,e){return ai(t)?Ap(t)?!0:!(e?.readable!==!1&&$1(t)||e?.writable!==!1&&k1(t)):null}function hue(t){var e,r;return ai(t)?t.writableErrored?t.writableErrored:(e=(r=t._writableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function pue(t){var e,r;return ai(t)?t.readableErrored?t.readableErrored:(e=(r=t._readableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function Tue(t){if(!ai(t))return null;if(typeof t.closed=="boolean")return t.closed;let e=t._writableState,r=t._readableState;return typeof e?.closed=="boolean"||typeof r?.closed=="boolean"?e?.closed||r?.closed:typeof t._closed=="boolean"&&Y1(t)?t._closed:null}function Y1(t){return typeof t._closed=="boolean"&&typeof t._defaultKeepAlive=="boolean"&&typeof t._removedConnection=="boolean"&&typeof t._removedContLen=="boolean"}function V1(t){return typeof t._sent100=="boolean"&&Y1(t)}function Sue(t){var e;return typeof t._consuming=="boolean"&&typeof t._dumped=="boolean"&&((e=t.req)===null||e===void 0?void 0:e.upgradeOrConnect)===void 0}function Rue(t){if(!ai(t))return null;let e=t._writableState,r=t._readableState,n=e||r;return!n&&V1(t)||!!(n&&n.autoDestroy&&n.emitClose&&n.closed===!1)}function Aue(t){var e;return!!(t&&((e=t[U1])!==null&&e!==void 0?e:t.readableDidRead||t.readableAborted))}function mue(t){var e,r,n,i,s,o,a,l,c,u;return!!(t&&((e=(r=(n=(i=(s=(o=t[M1])!==null&&o!==void 0?o:t.readableErrored)!==null&&s!==void 0?s:t.writableErrored)!==null&&i!==void 0?i:(a=t._readableState)===null||a===void 0?void 0:a.errorEmitted)!==null&&n!==void 0?n:(l=t._writableState)===null||l===void 0?void 0:l.errorEmitted)!==null&&r!==void 0?r:(c=t._readableState)===null||c===void 0?void 0:c.errored)!==null&&e!==void 0?e:!((u=t._writableState)===null||u===void 0)&&u.errored))}q1.exports={isDestroyed:Ap,kIsDestroyed:v1,isDisturbed:Aue,kIsDisturbed:U1,isErrored:mue,kIsErrored:M1,isReadable:$1,kIsReadable:b_,kIsClosedPromise:oue,kControllerErrorFunction:aue,kIsWritable:y_,isClosed:Tue,isDuplexNodeStream:lue,isFinished:Eue,isIterable:uue,isReadableNodeStream:Sp,isReadableStream:B1,isReadableEnded:fue,isReadableFinished:W1,isReadableErrored:pue,isNodeStream:ai,isWebStream:cue,isWritable:k1,isWritableNodeStream:Rp,isWritableStream:F1,isWritableEnded:G1,isWritableFinished:due,isWritableErrored:hue,isServerRequest:Sue,isServerResponse:V1,willEmitClose:Rue,isTransformStream:H1}});var ji=O((CMe,x_)=>{"use strict";var Fs=je(),{AbortError:tH,codes:gue}=wr(),{ERR_INVALID_ARG_TYPE:_ue,ERR_STREAM_PREMATURE_CLOSE:X1}=gue,{kEmptyObject:L_,once:D_}=Gr(),{validateAbortSignal:Iue,validateFunction:Nue,validateObject:Oue,validateBoolean:Cue}=Cl(),{Promise:bue,PromisePrototypeThen:yue,SymbolDispose:rH}=ct(),{isClosed:wue,isReadable:j1,isReadableNodeStream:w_,isReadableStream:Lue,isReadableFinished:z1,isReadableErrored:K1,isWritable:J1,isWritableNodeStream:Q1,isWritableStream:Due,isWritableFinished:Z1,isWritableErrored:eH,isNodeStream:Pue,willEmitClose:xue,kIsClosedPromise:vue}=li(),bl;function Mue(t){return t.setHeader&&typeof t.abort=="function"}var P_=()=>{};function nH(t,e,r){var n,i;if(arguments.length===2?(r=e,e=L_):e==null?e=L_:Oue(e,"options"),Nue(r,"callback"),Iue(e.signal,"options.signal"),r=D_(r),Lue(t)||Due(t))return Uue(t,e,r);if(!Pue(t))throw new _ue("stream",["ReadableStream","WritableStream","Stream"],t);let s=(n=e.readable)!==null&&n!==void 0?n:w_(t),o=(i=e.writable)!==null&&i!==void 0?i:Q1(t),a=t._writableState,l=t._readableState,c=()=>{t.writable||E()},u=xue(t)&&w_(t)===s&&Q1(t)===o,d=Z1(t,!1),E=()=>{d=!0,t.destroyed&&(u=!1),!(u&&(!t.readable||s))&&(!s||f)&&r.call(t)},f=z1(t,!1),p=()=>{f=!0,t.destroyed&&(u=!1),!(u&&(!t.writable||o))&&(!o||d)&&r.call(t)},h=I=>{r.call(t,I)},S=wue(t),T=()=>{S=!0;let I=eH(t)||K1(t);if(I&&typeof I!="boolean")return r.call(t,I);if(s&&!f&&w_(t,!0)&&!z1(t,!1))return r.call(t,new X1);if(o&&!d&&!Z1(t,!1))return r.call(t,new X1);r.call(t)},m=()=>{S=!0;let I=eH(t)||K1(t);if(I&&typeof I!="boolean")return r.call(t,I);r.call(t)},R=()=>{t.req.on("finish",E)};Mue(t)?(t.on("complete",E),u||t.on("abort",T),t.req?R():t.on("request",R)):o&&!a&&(t.on("end",c),t.on("close",c)),!u&&typeof t.aborted=="boolean"&&t.on("aborted",T),t.on("end",p),t.on("finish",E),e.error!==!1&&t.on("error",h),t.on("close",T),S?Fs.nextTick(T):a!=null&&a.errorEmitted||l!=null&&l.errorEmitted?u||Fs.nextTick(m):(!s&&(!u||j1(t))&&(d||J1(t)===!1)||!o&&(!u||J1(t))&&(f||j1(t)===!1)||l&&t.req&&t.aborted)&&Fs.nextTick(m);let A=()=>{r=P_,t.removeListener("aborted",T),t.removeListener("complete",E),t.removeListener("abort",T),t.removeListener("request",R),t.req&&t.req.removeListener("finish",E),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",E),t.removeListener("end",p),t.removeListener("error",h),t.removeListener("close",T)};if(e.signal&&!S){let I=()=>{let w=r;A(),w.call(t,new tH(void 0,{cause:e.signal.reason}))};if(e.signal.aborted)Fs.nextTick(I);else{bl=bl||Gr().addAbortListener;let w=bl(e.signal,I),g=r;r=D_((...L)=>{w[rH](),g.apply(t,L)})}}return A}function Uue(t,e,r){let n=!1,i=P_;if(e.signal)if(i=()=>{n=!0,r.call(t,new tH(void 0,{cause:e.signal.reason}))},e.signal.aborted)Fs.nextTick(i);else{bl=bl||Gr().addAbortListener;let o=bl(e.signal,i),a=r;r=D_((...l)=>{o[rH](),a.apply(t,l)})}let s=(...o)=>{n||Fs.nextTick(()=>r.apply(t,o))};return yue(t[vue].promise,s,s),P_}function Bue(t,e){var r;let n=!1;return e===null&&(e=L_),(r=e)!==null&&r!==void 0&&r.cleanup&&(Cue(e.cleanup,"cleanup"),n=e.cleanup),new bue((i,s)=>{let o=nH(t,e,a=>{n&&o(),a?s(a):i()})})}x_.exports=nH;x_.exports.finished=Bue});var Fo=O((bMe,dH)=>{"use strict";var ci=je(),{aggregateTwoErrors:Fue,codes:{ERR_MULTIPLE_CALLBACK:Hue},AbortError:Gue}=wr(),{Symbol:oH}=ct(),{kIsDestroyed:Wue,isDestroyed:$ue,isFinished:kue,isServerRequest:Yue}=li(),aH=oH("kDestroy"),v_=oH("kConstruct");function lH(t,e,r){t&&(t.stack,e&&!e.errored&&(e.errored=t),r&&!r.errored&&(r.errored=t))}function Vue(t,e){let r=this._readableState,n=this._writableState,i=n||r;return n!=null&&n.destroyed||r!=null&&r.destroyed?(typeof e=="function"&&e(),this):(lH(t,n,r),n&&(n.destroyed=!0),r&&(r.destroyed=!0),i.constructed?iH(this,t,e):this.once(aH,function(s){iH(this,Fue(s,t),e)}),this)}function iH(t,e,r){let n=!1;function i(s){if(n)return;n=!0;let o=t._readableState,a=t._writableState;lH(s,a,o),a&&(a.closed=!0),o&&(o.closed=!0),typeof r=="function"&&r(s),s?ci.nextTick(que,t,s):ci.nextTick(cH,t)}try{t._destroy(e||null,i)}catch(s){i(s)}}function que(t,e){M_(t,e),cH(t)}function cH(t){let e=t._readableState,r=t._writableState;r&&(r.closeEmitted=!0),e&&(e.closeEmitted=!0),(r!=null&&r.emitClose||e!=null&&e.emitClose)&&t.emit("close")}function M_(t,e){let r=t._readableState,n=t._writableState;n!=null&&n.errorEmitted||r!=null&&r.errorEmitted||(n&&(n.errorEmitted=!0),r&&(r.errorEmitted=!0),t.emit("error",e))}function Xue(){let t=this._readableState,e=this._writableState;t&&(t.constructed=!0,t.closed=!1,t.closeEmitted=!1,t.destroyed=!1,t.errored=null,t.errorEmitted=!1,t.reading=!1,t.ended=t.readable===!1,t.endEmitted=t.readable===!1),e&&(e.constructed=!0,e.destroyed=!1,e.closed=!1,e.closeEmitted=!1,e.errored=null,e.errorEmitted=!1,e.finalCalled=!1,e.prefinished=!1,e.ended=e.writable===!1,e.ending=e.writable===!1,e.finished=e.writable===!1)}function U_(t,e,r){let n=t._readableState,i=t._writableState;if(i!=null&&i.destroyed||n!=null&&n.destroyed)return this;n!=null&&n.autoDestroy||i!=null&&i.autoDestroy?t.destroy(e):e&&(e.stack,i&&!i.errored&&(i.errored=e),n&&!n.errored&&(n.errored=e),r?ci.nextTick(M_,t,e):M_(t,e))}function jue(t,e){if(typeof t._construct!="function")return;let r=t._readableState,n=t._writableState;r&&(r.constructed=!1),n&&(n.constructed=!1),t.once(v_,e),!(t.listenerCount(v_)>1)&&ci.nextTick(zue,t)}function zue(t){let e=!1;function r(n){if(e){U_(t,n??new Hue);return}e=!0;let i=t._readableState,s=t._writableState,o=s||i;i&&(i.constructed=!0),s&&(s.constructed=!0),o.destroyed?t.emit(aH,n):n?U_(t,n,!0):ci.nextTick(Kue,t)}try{t._construct(n=>{ci.nextTick(r,n)})}catch(n){ci.nextTick(r,n)}}function Kue(t){t.emit(v_)}function sH(t){return t?.setHeader&&typeof t.abort=="function"}function uH(t){t.emit("close")}function Jue(t,e){t.emit("error",e),ci.nextTick(uH,t)}function Que(t,e){!t||$ue(t)||(!e&&!kue(t)&&(e=new Gue),Yue(t)?(t.socket=null,t.destroy(e)):sH(t)?t.abort():sH(t.req)?t.req.abort():typeof t.destroy=="function"?t.destroy(e):typeof t.close=="function"?t.close():e?ci.nextTick(Jue,t,e):ci.nextTick(uH,t),t.destroyed||(t[Wue]=!0))}dH.exports={construct:jue,destroyer:Que,destroy:Vue,undestroy:Xue,errorOrDestroy:U_}});var _p=O((yMe,EH)=>{"use strict";var{ArrayIsArray:Zue,ObjectSetPrototypeOf:fH}=ct(),{EventEmitter:mp}=require("events");function gp(t){mp.call(this,t)}fH(gp.prototype,mp.prototype);fH(gp,mp);gp.prototype.pipe=function(t,e){let r=this;function n(u){t.writable&&t.write(u)===!1&&r.pause&&r.pause()}r.on("data",n);function i(){r.readable&&r.resume&&r.resume()}t.on("drain",i),!t._isStdio&&(!e||e.end!==!1)&&(r.on("end",o),r.on("close",a));let s=!1;function o(){s||(s=!0,t.end())}function a(){s||(s=!0,typeof t.destroy=="function"&&t.destroy())}function l(u){c(),mp.listenerCount(this,"error")===0&&this.emit("error",u)}B_(r,"error",l),B_(t,"error",l);function c(){r.removeListener("data",n),t.removeListener("drain",i),r.removeListener("end",o),r.removeListener("close",a),r.removeListener("error",l),t.removeListener("error",l),r.removeListener("end",c),r.removeListener("close",c),t.removeListener("close",c)}return r.on("end",c),r.on("close",c),t.on("close",c),t.emit("pipe",r),t};function B_(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Zue(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}EH.exports={Stream:gp,prependListener:B_}});var od=O((wMe,Ip)=>{"use strict";var{SymbolDispose:ede}=ct(),{AbortError:hH,codes:tde}=wr(),{isNodeStream:pH,isWebStream:rde,kControllerErrorFunction:nde}=li(),ide=ji(),{ERR_INVALID_ARG_TYPE:TH}=tde,F_,sde=(t,e)=>{if(typeof t!="object"||!("aborted"in t))throw new TH(e,"AbortSignal",t)};Ip.exports.addAbortSignal=function(e,r){if(sde(e,"signal"),!pH(r)&&!rde(r))throw new TH("stream",["ReadableStream","WritableStream","Stream"],r);return Ip.exports.addAbortSignalNoValidate(e,r)};Ip.exports.addAbortSignalNoValidate=function(t,e){if(typeof t!="object"||!("aborted"in t))return e;let r=pH(e)?()=>{e.destroy(new hH(void 0,{cause:t.reason}))}:()=>{e[nde](new hH(void 0,{cause:t.reason}))};if(t.aborted)r();else{F_=F_||Gr().addAbortListener;let n=F_(t,r);ide(e,n[ede])}return e}});var AH=O((DMe,RH)=>{"use strict";var{StringPrototypeSlice:SH,SymbolIterator:ode,TypedArrayPrototypeSet:Np,Uint8Array:ade}=ct(),{Buffer:H_}=require("buffer"),{inspect:lde}=Gr();RH.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){let r={data:e,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length}unshift(e){let r={data:e,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length}shift(){if(this.length===0)return;let e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return"";let r=this.head,n=""+r.data;for(;(r=r.next)!==null;)n+=e+r.data;return n}concat(e){if(this.length===0)return H_.alloc(0);let r=H_.allocUnsafe(e>>>0),n=this.head,i=0;for(;n;)Np(r,n.data,i),i+=n.data.length,n=n.next;return r}consume(e,r){let n=this.head.data;if(e<n.length){let i=n.slice(0,e);return this.head.data=n.slice(e),i}return e===n.length?this.shift():r?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[ode](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let r="",n=this.head,i=0;do{let s=n.data;if(e>s.length)r+=s,e-=s.length;else{e===s.length?(r+=s,++i,n.next?this.head=n.next:this.head=this.tail=null):(r+=SH(s,0,e),this.head=n,n.data=SH(s,e));break}++i}while((n=n.next)!==null);return this.length-=i,r}_getBuffer(e){let r=H_.allocUnsafe(e),n=e,i=this.head,s=0;do{let o=i.data;if(e>o.length)Np(r,o,n-e),e-=o.length;else{e===o.length?(Np(r,o,n-e),++s,i.next?this.head=i.next:this.head=this.tail=null):(Np(r,new ade(o.buffer,o.byteOffset,e),n-e),this.head=i,i.data=o.slice(e));break}++s}while((i=i.next)!==null);return this.length-=s,r}[Symbol.for("nodejs.util.inspect.custom")](e,r){return lde(this,{...r,depth:0,customInspect:!1})}}});var ad=O((PMe,IH)=>{"use strict";var{MathFloor:cde,NumberIsInteger:ude}=ct(),{validateInteger:dde}=Cl(),{ERR_INVALID_ARG_VALUE:fde}=wr().codes,mH=16*1024,gH=16;function Ede(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function _H(t){return t?gH:mH}function hde(t,e){dde(e,"value",0),t?gH=e:mH=e}function pde(t,e,r,n){let i=Ede(e,n,r);if(i!=null){if(!ude(i)||i<0){let s=n?`options.${r}`:"options.highWaterMark";throw new fde(s,i)}return cde(i)}return _H(t.objectMode)}IH.exports={getHighWaterMark:pde,getDefaultHighWaterMark:_H,setDefaultHighWaterMark:hde}});var G_=O((xMe,bH)=>{"use strict";var NH=je(),{PromisePrototypeThen:Tde,SymbolAsyncIterator:OH,SymbolIterator:CH}=ct(),{Buffer:Sde}=require("buffer"),{ERR_INVALID_ARG_TYPE:Rde,ERR_STREAM_NULL_VALUES:Ade}=wr().codes;function mde(t,e,r){let n;if(typeof e=="string"||e instanceof Sde)return new t({objectMode:!0,...r,read(){this.push(e),this.push(null)}});let i;if(e&&e[OH])i=!0,n=e[OH]();else if(e&&e[CH])i=!1,n=e[CH]();else throw new Rde("iterable",["Iterable"],e);let s=new t({objectMode:!0,highWaterMark:1,...r}),o=!1;s._read=function(){o||(o=!0,l())},s._destroy=function(c,u){Tde(a(c),()=>NH.nextTick(u,c),d=>NH.nextTick(u,d||c))};async function a(c){let u=c!=null,d=typeof n.throw=="function";if(u&&d){let{value:E,done:f}=await n.throw(c);if(await E,f)return}if(typeof n.return=="function"){let{value:E}=await n.return();await E}}async function l(){for(;;){try{let{value:c,done:u}=i?await n.next():n.next();if(u)s.push(null);else{let d=c&&typeof c.then=="function"?await c:c;if(d===null)throw o=!1,new Ade;if(s.push(d))continue;o=!1}}catch(c){s.destroy(c)}break}}return s}bH.exports=mde});var cd=O((vMe,VH)=>{"use strict";var Un=je(),{ArrayPrototypeIndexOf:gde,NumberIsInteger:_de,NumberIsNaN:Ide,NumberParseInt:Nde,ObjectDefineProperties:j_,ObjectKeys:Ode,ObjectSetPrototypeOf:LH,Promise:DH,SafeSet:Cde,SymbolAsyncDispose:bde,SymbolAsyncIterator:yde,Symbol:wde}=ct();VH.exports=me;me.ReadableState=yp;var{EventEmitter:Lde}=require("events"),{Stream:Hs,prependListener:Dde}=_p(),{Buffer:W_}=require("buffer"),{addAbortSignal:Pde}=od(),PH=ji(),ve=Gr().debuglog("stream",t=>{ve=t}),xde=AH(),Ll=Fo(),{getHighWaterMark:vde,getDefaultHighWaterMark:Mde}=ad(),{aggregateTwoErrors:yH,codes:{ERR_INVALID_ARG_TYPE:Ude,ERR_METHOD_NOT_IMPLEMENTED:Bde,ERR_OUT_OF_RANGE:Fde,ERR_STREAM_PUSH_AFTER_EOF:Hde,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:Gde},AbortError:Wde}=wr(),{validateObject:$de}=Cl(),Ho=wde("kPaused"),{StringDecoder:xH}=Nu(),kde=G_();LH(me.prototype,Hs.prototype);LH(me,Hs);var $_=()=>{},{errorOrDestroy:yl}=Ll,wl=1,Yde=2,vH=4,ld=8,MH=16,Op=32,Cp=64,UH=128,Vde=256,qde=512,Xde=1024,q_=2048,X_=4096,jde=8192,zde=16384,Kde=32768,BH=65536,Jde=1<<17,Qde=1<<18;function Gt(t){return{enumerable:!1,get(){return(this.state&t)!==0},set(e){e?this.state|=t:this.state&=~t}}}j_(yp.prototype,{objectMode:Gt(wl),ended:Gt(Yde),endEmitted:Gt(vH),reading:Gt(ld),constructed:Gt(MH),sync:Gt(Op),needReadable:Gt(Cp),emittedReadable:Gt(UH),readableListening:Gt(Vde),resumeScheduled:Gt(qde),errorEmitted:Gt(Xde),emitClose:Gt(q_),autoDestroy:Gt(X_),destroyed:Gt(jde),closed:Gt(zde),closeEmitted:Gt(Kde),multiAwaitDrain:Gt(BH),readingMore:Gt(Jde),dataEmitted:Gt(Qde)});function yp(t,e,r){typeof r!="boolean"&&(r=e instanceof ui()),this.state=q_|X_|MH|Op,t&&t.objectMode&&(this.state|=wl),r&&t&&t.readableObjectMode&&(this.state|=wl),this.highWaterMark=t?vde(this,t,"readableHighWaterMark",r):Mde(!1),this.buffer=new xde,this.length=0,this.pipes=[],this.flowing=null,this[Ho]=null,t&&t.emitClose===!1&&(this.state&=~q_),t&&t.autoDestroy===!1&&(this.state&=~X_),this.errored=null,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,t&&t.encoding&&(this.decoder=new xH(t.encoding),this.encoding=t.encoding)}function me(t){if(!(this instanceof me))return new me(t);let e=this instanceof ui();this._readableState=new yp(t,this,e),t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&!e&&Pde(t.signal,this)),Hs.call(this,t),Ll.construct(this,()=>{this._readableState.needReadable&&bp(this,this._readableState)})}me.prototype.destroy=Ll.destroy;me.prototype._undestroy=Ll.undestroy;me.prototype._destroy=function(t,e){e(t)};me.prototype[Lde.captureRejectionSymbol]=function(t){this.destroy(t)};me.prototype[bde]=function(){let t;return this.destroyed||(t=this.readableEnded?null:new Wde,this.destroy(t)),new DH((e,r)=>PH(this,n=>n&&n!==t?r(n):e(null)))};me.prototype.push=function(t,e){return FH(this,t,e,!1)};me.prototype.unshift=function(t,e){return FH(this,t,e,!0)};function FH(t,e,r,n){ve("readableAddChunk",e);let i=t._readableState,s;if((i.state&wl)===0&&(typeof e=="string"?(r=r||i.defaultEncoding,i.encoding!==r&&(n&&i.encoding?e=W_.from(e,r).toString(i.encoding):(e=W_.from(e,r),r=""))):e instanceof W_?r="":Hs._isUint8Array(e)?(e=Hs._uint8ArrayToBuffer(e),r=""):e!=null&&(s=new Ude("chunk",["string","Buffer","Uint8Array"],e))),s)yl(t,s);else if(e===null)i.state&=~ld,tfe(t,i);else if((i.state&wl)!==0||e&&e.length>0)if(n)if((i.state&vH)!==0)yl(t,new Gde);else{if(i.destroyed||i.errored)return!1;k_(t,i,e,!0)}else if(i.ended)yl(t,new Hde);else{if(i.destroyed||i.errored)return!1;i.state&=~ld,i.decoder&&!r?(e=i.decoder.write(e),i.objectMode||e.length!==0?k_(t,i,e,!1):bp(t,i)):k_(t,i,e,!1)}else n||(i.state&=~ld,bp(t,i));return!i.ended&&(i.length<i.highWaterMark||i.length===0)}function k_(t,e,r,n){e.flowing&&e.length===0&&!e.sync&&t.listenerCount("data")>0?((e.state&BH)!==0?e.awaitDrainWriters.clear():e.awaitDrainWriters=null,e.dataEmitted=!0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),(e.state&Cp)!==0&&wp(t)),bp(t,e)}me.prototype.isPaused=function(){let t=this._readableState;return t[Ho]===!0||t.flowing===!1};me.prototype.setEncoding=function(t){let e=new xH(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;let r=this._readableState.buffer,n="";for(let i of r)n+=e.write(i);return r.clear(),n!==""&&r.push(n),this._readableState.length=n.length,this};var Zde=1073741824;function efe(t){if(t>Zde)throw new Fde("size","<= 1GiB",t);return t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++,t}function wH(t,e){return t<=0||e.length===0&&e.ended?0:(e.state&wl)!==0?1:Ide(t)?e.flowing&&e.length?e.buffer.first().length:e.length:t<=e.length?t:e.ended?e.length:0}me.prototype.read=function(t){ve("read",t),t===void 0?t=NaN:_de(t)||(t=Nde(t,10));let e=this._readableState,r=t;if(t>e.highWaterMark&&(e.highWaterMark=efe(t)),t!==0&&(e.state&=~UH),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return ve("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?Y_(this):wp(this),null;if(t=wH(t,e),t===0&&e.ended)return e.length===0&&Y_(this),null;let n=(e.state&Cp)!==0;if(ve("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,ve("length less than watermark",n)),e.ended||e.reading||e.destroyed||e.errored||!e.constructed)n=!1,ve("reading, ended or constructing",n);else if(n){ve("do read"),e.state|=ld|Op,e.length===0&&(e.state|=Cp);try{this._read(e.highWaterMark)}catch(s){yl(this,s)}e.state&=~Op,e.reading||(t=wH(r,e))}let i;return t>0?i=kH(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.multiAwaitDrain?e.awaitDrainWriters.clear():e.awaitDrainWriters=null),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&Y_(this)),i!==null&&!e.errorEmitted&&!e.closeEmitted&&(e.dataEmitted=!0,this.emit("data",i)),i};function tfe(t,e){if(ve("onEofChunk"),!e.ended){if(e.decoder){let r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?wp(t):(e.needReadable=!1,e.emittedReadable=!0,HH(t))}}function wp(t){let e=t._readableState;ve("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(ve("emitReadable",e.flowing),e.emittedReadable=!0,Un.nextTick(HH,t))}function HH(t){let e=t._readableState;ve("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&!e.errored&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,WH(t)}function bp(t,e){!e.readingMore&&e.constructed&&(e.readingMore=!0,Un.nextTick(rfe,t,e))}function rfe(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){let r=e.length;if(ve("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}me.prototype._read=function(t){throw new Bde("_read()")};me.prototype.pipe=function(t,e){let r=this,n=this._readableState;n.pipes.length===1&&(n.multiAwaitDrain||(n.multiAwaitDrain=!0,n.awaitDrainWriters=new Cde(n.awaitDrainWriters?[n.awaitDrainWriters]:[]))),n.pipes.push(t),ve("pipe count=%d opts=%j",n.pipes.length,e);let s=(!e||e.end!==!1)&&t!==Un.stdout&&t!==Un.stderr?a:S;n.endEmitted?Un.nextTick(s):r.once("end",s),t.on("unpipe",o);function o(T,m){ve("onunpipe"),T===r&&m&&m.hasUnpiped===!1&&(m.hasUnpiped=!0,u())}function a(){ve("onend"),t.end()}let l,c=!1;function u(){ve("cleanup"),t.removeListener("close",p),t.removeListener("finish",h),l&&t.removeListener("drain",l),t.removeListener("error",f),t.removeListener("unpipe",o),r.removeListener("end",a),r.removeListener("end",S),r.removeListener("data",E),c=!0,l&&n.awaitDrainWriters&&(!t._writableState||t._writableState.needDrain)&&l()}function d(){c||(n.pipes.length===1&&n.pipes[0]===t?(ve("false write response, pause",0),n.awaitDrainWriters=t,n.multiAwaitDrain=!1):n.pipes.length>1&&n.pipes.includes(t)&&(ve("false write response, pause",n.awaitDrainWriters.size),n.awaitDrainWriters.add(t)),r.pause()),l||(l=nfe(r,t),t.on("drain",l))}r.on("data",E);function E(T){ve("ondata");let m=t.write(T);ve("dest.write",m),m===!1&&d()}function f(T){if(ve("onerror",T),S(),t.removeListener("error",f),t.listenerCount("error")===0){let m=t._writableState||t._readableState;m&&!m.errorEmitted?yl(t,T):t.emit("error",T)}}Dde(t,"error",f);function p(){t.removeListener("finish",h),S()}t.once("close",p);function h(){ve("onfinish"),t.removeListener("close",p),S()}t.once("finish",h);function S(){ve("unpipe"),r.unpipe(t)}return t.emit("pipe",r),t.writableNeedDrain===!0?d():n.flowing||(ve("pipe resume"),r.resume()),t};function nfe(t,e){return function(){let n=t._readableState;n.awaitDrainWriters===e?(ve("pipeOnDrain",1),n.awaitDrainWriters=null):n.multiAwaitDrain&&(ve("pipeOnDrain",n.awaitDrainWriters.size),n.awaitDrainWriters.delete(e)),(!n.awaitDrainWriters||n.awaitDrainWriters.size===0)&&t.listenerCount("data")&&t.resume()}}me.prototype.unpipe=function(t){let e=this._readableState,r={hasUnpiped:!1};if(e.pipes.length===0)return this;if(!t){let i=e.pipes;e.pipes=[],this.pause();for(let s=0;s<i.length;s++)i[s].emit("unpipe",this,{hasUnpiped:!1});return this}let n=gde(e.pipes,t);return n===-1?this:(e.pipes.splice(n,1),e.pipes.length===0&&this.pause(),t.emit("unpipe",this,r),this)};me.prototype.on=function(t,e){let r=Hs.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,ve("on readable",n.length,n.reading),n.length?wp(this):n.reading||Un.nextTick(ife,this)),r};me.prototype.addListener=me.prototype.on;me.prototype.removeListener=function(t,e){let r=Hs.prototype.removeListener.call(this,t,e);return t==="readable"&&Un.nextTick(GH,this),r};me.prototype.off=me.prototype.removeListener;me.prototype.removeAllListeners=function(t){let e=Hs.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&Un.nextTick(GH,this),e};function GH(t){let e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&e[Ho]===!1?e.flowing=!0:t.listenerCount("data")>0?t.resume():e.readableListening||(e.flowing=null)}function ife(t){ve("readable nexttick read 0"),t.read(0)}me.prototype.resume=function(){let t=this._readableState;return t.flowing||(ve("resume"),t.flowing=!t.readableListening,sfe(this,t)),t[Ho]=!1,this};function sfe(t,e){e.resumeScheduled||(e.resumeScheduled=!0,Un.nextTick(ofe,t,e))}function ofe(t,e){ve("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),WH(t),e.flowing&&!e.reading&&t.read(0)}me.prototype.pause=function(){return ve("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(ve("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[Ho]=!0,this};function WH(t){let e=t._readableState;for(ve("flow",e.flowing);e.flowing&&t.read()!==null;);}me.prototype.wrap=function(t){let e=!1;t.on("data",n=>{!this.push(n)&&t.pause&&(e=!0,t.pause())}),t.on("end",()=>{this.push(null)}),t.on("error",n=>{yl(this,n)}),t.on("close",()=>{this.destroy()}),t.on("destroy",()=>{this.destroy()}),this._read=()=>{e&&t.resume&&(e=!1,t.resume())};let r=Ode(t);for(let n=1;n<r.length;n++){let i=r[n];this[i]===void 0&&typeof t[i]=="function"&&(this[i]=t[i].bind(t))}return this};me.prototype[yde]=function(){return $H(this)};me.prototype.iterator=function(t){return t!==void 0&&$de(t,"options"),$H(this,t)};function $H(t,e){typeof t.read!="function"&&(t=me.wrap(t,{objectMode:!0}));let r=afe(t,e);return r.stream=t,r}async function*afe(t,e){let r=$_;function n(o){this===t?(r(),r=$_):r=o}t.on("readable",n);let i,s=PH(t,{writable:!1},o=>{i=o?yH(i,o):null,r(),r=$_});try{for(;;){let o=t.destroyed?null:t.read();if(o!==null)yield o;else{if(i)throw i;if(i===null)return;await new DH(n)}}}catch(o){throw i=yH(i,o),i}finally{(i||e?.destroyOnReturn!==!1)&&(i===void 0||t._readableState.autoDestroy)?Ll.destroyer(t,null):(t.off("readable",n),s())}}j_(me.prototype,{readable:{__proto__:null,get(){let t=this._readableState;return!!t&&t.readable!==!1&&!t.destroyed&&!t.errorEmitted&&!t.endEmitted},set(t){this._readableState&&(this._readableState.readable=!!t)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(t){this._readableState&&(this._readableState.destroyed=t)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}});j_(yp.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[Ho]!==!1},set(t){this[Ho]=!!t}}});me._fromList=kH;function kH(t,e){if(e.length===0)return null;let r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function Y_(t){let e=t._readableState;ve("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,Un.nextTick(lfe,e,t))}function lfe(t,e){if(ve("endReadableNT",t.endEmitted,t.length),!t.errored&&!t.closeEmitted&&!t.endEmitted&&t.length===0){if(t.endEmitted=!0,e.emit("end"),e.writable&&e.allowHalfOpen===!1)Un.nextTick(cfe,e);else if(t.autoDestroy){let r=e._writableState;(!r||r.autoDestroy&&(r.finished||r.writable===!1))&&e.destroy()}}}function cfe(t){t.writable&&!t.writableEnded&&!t.destroyed&&t.end()}me.from=function(t,e){return kde(me,t,e)};var V_;function YH(){return V_===void 0&&(V_={}),V_}me.fromWeb=function(t,e){return YH().newStreamReadableFromReadableStream(t,e)};me.toWeb=function(t,e){return YH().newReadableStreamFromStreamReadable(t,e)};me.wrap=function(t,e){var r,n;return new me({objectMode:(r=(n=t.readableObjectMode)!==null&&n!==void 0?n:t.objectMode)!==null&&r!==void 0?r:!0,...e,destroy(i,s){Ll.destroyer(t,i),s(i)}}).wrap(t)}});var vp=O((MMe,nG)=>{"use strict";var Go=je(),{ArrayPrototypeSlice:jH,Error:ufe,FunctionPrototypeSymbolHasInstance:zH,ObjectDefineProperty:KH,ObjectDefineProperties:dfe,ObjectSetPrototypeOf:JH,StringPrototypeToLowerCase:ffe,Symbol:Efe,SymbolHasInstance:hfe}=ct();nG.exports=Tt;Tt.WritableState=fd;var{EventEmitter:pfe}=require("events"),ud=_p().Stream,{Buffer:Lp}=require("buffer"),xp=Fo(),{addAbortSignal:Tfe}=od(),{getHighWaterMark:Sfe,getDefaultHighWaterMark:Rfe}=ad(),{ERR_INVALID_ARG_TYPE:Afe,ERR_METHOD_NOT_IMPLEMENTED:mfe,ERR_MULTIPLE_CALLBACK:QH,ERR_STREAM_CANNOT_PIPE:gfe,ERR_STREAM_DESTROYED:dd,ERR_STREAM_ALREADY_FINISHED:_fe,ERR_STREAM_NULL_VALUES:Ife,ERR_STREAM_WRITE_AFTER_END:Nfe,ERR_UNKNOWN_ENCODING:ZH}=wr().codes,{errorOrDestroy:Dl}=xp;JH(Tt.prototype,ud.prototype);JH(Tt,ud);function J_(){}var Pl=Efe("kOnFinished");function fd(t,e,r){typeof r!="boolean"&&(r=e instanceof ui()),this.objectMode=!!(t&&t.objectMode),r&&(this.objectMode=this.objectMode||!!(t&&t.writableObjectMode)),this.highWaterMark=t?Sfe(this,t,"writableHighWaterMark",r):Rfe(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let n=!!(t&&t.decodeStrings===!1);this.decodeStrings=!n,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=Cfe.bind(void 0,e),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,Pp(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!t||t.emitClose!==!1,this.autoDestroy=!t||t.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[Pl]=[]}function Pp(t){t.buffered=[],t.bufferedIndex=0,t.allBuffers=!0,t.allNoop=!0}fd.prototype.getBuffer=function(){return jH(this.buffered,this.bufferedIndex)};KH(fd.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function Tt(t){let e=this instanceof ui();if(!e&&!zH(Tt,this))return new Tt(t);this._writableState=new fd(t,this,e),t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&Tfe(t.signal,this)),ud.call(this,t),xp.construct(this,()=>{let r=this._writableState;r.writing||Z_(this,r),eI(this,r)})}KH(Tt,hfe,{__proto__:null,value:function(t){return zH(this,t)?!0:this!==Tt?!1:t&&t._writableState instanceof fd}});Tt.prototype.pipe=function(){Dl(this,new gfe)};function eG(t,e,r,n){let i=t._writableState;if(typeof r=="function")n=r,r=i.defaultEncoding;else{if(!r)r=i.defaultEncoding;else if(r!=="buffer"&&!Lp.isEncoding(r))throw new ZH(r);typeof n!="function"&&(n=J_)}if(e===null)throw new Ife;if(!i.objectMode)if(typeof e=="string")i.decodeStrings!==!1&&(e=Lp.from(e,r),r="buffer");else if(e instanceof Lp)r="buffer";else if(ud._isUint8Array(e))e=ud._uint8ArrayToBuffer(e),r="buffer";else throw new Afe("chunk",["string","Buffer","Uint8Array"],e);let s;return i.ending?s=new Nfe:i.destroyed&&(s=new dd("write")),s?(Go.nextTick(n,s),Dl(t,s,!0),s):(i.pendingcb++,Ofe(t,i,e,r,n))}Tt.prototype.write=function(t,e,r){return eG(this,t,e,r)===!0};Tt.prototype.cork=function(){this._writableState.corked++};Tt.prototype.uncork=function(){let t=this._writableState;t.corked&&(t.corked--,t.writing||Z_(this,t))};Tt.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=ffe(e)),!Lp.isEncoding(e))throw new ZH(e);return this._writableState.defaultEncoding=e,this};function Ofe(t,e,r,n,i){let s=e.objectMode?1:r.length;e.length+=s;let o=e.length<e.highWaterMark;return o||(e.needDrain=!0),e.writing||e.corked||e.errored||!e.constructed?(e.buffered.push({chunk:r,encoding:n,callback:i}),e.allBuffers&&n!=="buffer"&&(e.allBuffers=!1),e.allNoop&&i!==J_&&(e.allNoop=!1)):(e.writelen=s,e.writecb=i,e.writing=!0,e.sync=!0,t._write(r,n,e.onwrite),e.sync=!1),o&&!e.errored&&!e.destroyed}function qH(t,e,r,n,i,s,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new dd("write")):r?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function XH(t,e,r,n){--e.pendingcb,n(r),Q_(e),Dl(t,r)}function Cfe(t,e){let r=t._writableState,n=r.sync,i=r.writecb;if(typeof i!="function"){Dl(t,new QH);return}r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0,e?(e.stack,r.errored||(r.errored=e),t._readableState&&!t._readableState.errored&&(t._readableState.errored=e),n?Go.nextTick(XH,t,r,e,i):XH(t,r,e,i)):(r.buffered.length>r.bufferedIndex&&Z_(t,r),n?r.afterWriteTickInfo!==null&&r.afterWriteTickInfo.cb===i?r.afterWriteTickInfo.count++:(r.afterWriteTickInfo={count:1,cb:i,stream:t,state:r},Go.nextTick(bfe,r.afterWriteTickInfo)):tG(t,r,1,i))}function bfe({stream:t,state:e,count:r,cb:n}){return e.afterWriteTickInfo=null,tG(t,e,r,n)}function tG(t,e,r,n){for(!e.ending&&!t.destroyed&&e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"));r-- >0;)e.pendingcb--,n();e.destroyed&&Q_(e),eI(t,e)}function Q_(t){if(t.writing)return;for(let i=t.bufferedIndex;i<t.buffered.length;++i){var e;let{chunk:s,callback:o}=t.buffered[i],a=t.objectMode?1:s.length;t.length-=a,o((e=t.errored)!==null&&e!==void 0?e:new dd("write"))}let r=t[Pl].splice(0);for(let i=0;i<r.length;i++){var n;r[i]((n=t.errored)!==null&&n!==void 0?n:new dd("end"))}Pp(t)}function Z_(t,e){if(e.corked||e.bufferProcessing||e.destroyed||!e.constructed)return;let{buffered:r,bufferedIndex:n,objectMode:i}=e,s=r.length-n;if(!s)return;let o=n;if(e.bufferProcessing=!0,s>1&&t._writev){e.pendingcb-=s-1;let a=e.allNoop?J_:c=>{for(let u=o;u<r.length;++u)r[u].callback(c)},l=e.allNoop&&o===0?r:jH(r,o);l.allBuffers=e.allBuffers,qH(t,e,!0,e.length,l,"",a),Pp(e)}else{do{let{chunk:a,encoding:l,callback:c}=r[o];r[o++]=null;let u=i?1:a.length;qH(t,e,!1,u,a,l,c)}while(o<r.length&&!e.writing);o===r.length?Pp(e):o>256?(r.splice(0,o),e.bufferedIndex=0):e.bufferedIndex=o}e.bufferProcessing=!1}Tt.prototype._write=function(t,e,r){if(this._writev)this._writev([{chunk:t,encoding:e}],r);else throw new mfe("_write()")};Tt.prototype._writev=null;Tt.prototype.end=function(t,e,r){let n=this._writableState;typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null);let i;if(t!=null){let s=eG(this,t,e);s instanceof ufe&&(i=s)}return n.corked&&(n.corked=1,this.uncork()),i||(!n.errored&&!n.ending?(n.ending=!0,eI(this,n,!0),n.ended=!0):n.finished?i=new _fe("end"):n.destroyed&&(i=new dd("end"))),typeof r=="function"&&(i||n.finished?Go.nextTick(r,i):n[Pl].push(r)),this};function Dp(t){return t.ending&&!t.destroyed&&t.constructed&&t.length===0&&!t.errored&&t.buffered.length===0&&!t.finished&&!t.writing&&!t.errorEmitted&&!t.closeEmitted}function yfe(t,e){let r=!1;function n(i){if(r){Dl(t,i??QH());return}if(r=!0,e.pendingcb--,i){let s=e[Pl].splice(0);for(let o=0;o<s.length;o++)s[o](i);Dl(t,i,e.sync)}else Dp(e)&&(e.prefinished=!0,t.emit("prefinish"),e.pendingcb++,Go.nextTick(K_,t,e))}e.sync=!0,e.pendingcb++;try{t._final(n)}catch(i){n(i)}e.sync=!1}function wfe(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.finalCalled=!0,yfe(t,e)):(e.prefinished=!0,t.emit("prefinish")))}function eI(t,e,r){Dp(e)&&(wfe(t,e),e.pendingcb===0&&(r?(e.pendingcb++,Go.nextTick((n,i)=>{Dp(i)?K_(n,i):i.pendingcb--},t,e)):Dp(e)&&(e.pendingcb++,K_(t,e))))}function K_(t,e){e.pendingcb--,e.finished=!0;let r=e[Pl].splice(0);for(let n=0;n<r.length;n++)r[n]();if(t.emit("finish"),e.autoDestroy){let n=t._readableState;(!n||n.autoDestroy&&(n.endEmitted||n.readable===!1))&&t.destroy()}}dfe(Tt.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(t){this._writableState&&(this._writableState.destroyed=t)}},writable:{__proto__:null,get(){let t=this._writableState;return!!t&&t.writable!==!1&&!t.destroyed&&!t.errored&&!t.ending&&!t.ended},set(t){this._writableState&&(this._writableState.writable=!!t)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let t=this._writableState;return t?!t.destroyed&&!t.ending&&t.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var Lfe=xp.destroy;Tt.prototype.destroy=function(t,e){let r=this._writableState;return!r.destroyed&&(r.bufferedIndex<r.buffered.length||r[Pl].length)&&Go.nextTick(Q_,r),Lfe.call(this,t,e),this};Tt.prototype._undestroy=xp.undestroy;Tt.prototype._destroy=function(t,e){e(t)};Tt.prototype[pfe.captureRejectionSymbol]=function(t){this.destroy(t)};var z_;function rG(){return z_===void 0&&(z_={}),z_}Tt.fromWeb=function(t,e){return rG().newStreamWritableFromWritableStream(t,e)};Tt.toWeb=function(t){return rG().newWritableStreamFromStreamWritable(t)}});var RG=O((UMe,SG)=>{var tI=je(),Dfe=require("buffer"),{isReadable:Pfe,isWritable:xfe,isIterable:iG,isNodeStream:vfe,isReadableNodeStream:sG,isWritableNodeStream:oG,isDuplexNodeStream:Mfe,isReadableStream:aG,isWritableStream:lG}=li(),cG=ji(),{AbortError:pG,codes:{ERR_INVALID_ARG_TYPE:Ufe,ERR_INVALID_RETURN_VALUE:uG}}=wr(),{destroyer:vl}=Fo(),Bfe=ui(),TG=cd(),Ffe=vp(),{createDeferredPromise:dG}=Gr(),fG=G_(),EG=globalThis.Blob||Dfe.Blob,Hfe=typeof EG<"u"?function(e){return e instanceof EG}:function(e){return!1},Gfe=globalThis.AbortController||wt().AbortController,{FunctionPrototypeCall:hG}=ct(),Gs=class extends Bfe{constructor(e){super(e),e?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),e?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};SG.exports=function t(e,r){if(Mfe(e))return e;if(sG(e))return xl({readable:e});if(oG(e))return xl({writable:e});if(vfe(e))return xl({writable:!1,readable:!1});if(aG(e))return xl({readable:TG.fromWeb(e)});if(lG(e))return xl({writable:Ffe.fromWeb(e)});if(typeof e=="function"){let{value:i,write:s,final:o,destroy:a}=Wfe(e);if(iG(i))return fG(Gs,i,{objectMode:!0,write:s,final:o,destroy:a});let l=i?.then;if(typeof l=="function"){let c,u=hG(l,i,d=>{if(d!=null)throw new uG("nully","body",d)},d=>{vl(c,d)});return c=new Gs({objectMode:!0,readable:!1,write:s,final(d){o(async()=>{try{await u,tI.nextTick(d,null)}catch(E){tI.nextTick(d,E)}})},destroy:a})}throw new uG("Iterable, AsyncIterable or AsyncFunction",r,i)}if(Hfe(e))return t(e.arrayBuffer());if(iG(e))return fG(Gs,e,{objectMode:!0,writable:!1});if(aG(e?.readable)&&lG(e?.writable))return Gs.fromWeb(e);if(typeof e?.writable=="object"||typeof e?.readable=="object"){let i=e!=null&&e.readable?sG(e?.readable)?e?.readable:t(e.readable):void 0,s=e!=null&&e.writable?oG(e?.writable)?e?.writable:t(e.writable):void 0;return xl({readable:i,writable:s})}let n=e?.then;if(typeof n=="function"){let i;return hG(n,e,s=>{s!=null&&i.push(s),i.push(null)},s=>{vl(i,s)}),i=new Gs({objectMode:!0,writable:!1,read(){}})}throw new Ufe(r,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],e)};function Wfe(t){let{promise:e,resolve:r}=dG(),n=new Gfe,i=n.signal;return{value:t((async function*(){for(;;){let o=e;e=null;let{chunk:a,done:l,cb:c}=await o;if(tI.nextTick(c),l)return;if(i.aborted)throw new pG(void 0,{cause:i.reason});({promise:e,resolve:r}=dG()),yield a}})(),{signal:i}),write(o,a,l){let c=r;r=null,c({chunk:o,done:!1,cb:l})},final(o){let a=r;r=null,a({done:!0,cb:o})},destroy(o,a){n.abort(),a(o)}}}function xl(t){let e=t.readable&&typeof t.readable.read!="function"?TG.wrap(t.readable):t.readable,r=t.writable,n=!!Pfe(e),i=!!xfe(r),s,o,a,l,c;function u(d){let E=l;l=null,E?E(d):d&&c.destroy(d)}return c=new Gs({readableObjectMode:!!(e!=null&&e.readableObjectMode),writableObjectMode:!!(r!=null&&r.writableObjectMode),readable:n,writable:i}),i&&(cG(r,d=>{i=!1,d&&vl(e,d),u(d)}),c._write=function(d,E,f){r.write(d,E)?f():s=f},c._final=function(d){r.end(),o=d},r.on("drain",function(){if(s){let d=s;s=null,d()}}),r.on("finish",function(){if(o){let d=o;o=null,d()}})),n&&(cG(e,d=>{n=!1,d&&vl(e,d),u(d)}),e.on("readable",function(){if(a){let d=a;a=null,d()}}),e.on("end",function(){c.push(null)}),c._read=function(){for(;;){let d=e.read();if(d===null){a=c._read;return}if(!c.push(d))return}}),c._destroy=function(d,E){!d&&l!==null&&(d=new pG),a=null,s=null,o=null,l===null?E(d):(l=E,vl(r,d),vl(e,d))},c}});var ui=O((BMe,gG)=>{"use strict";var{ObjectDefineProperties:$fe,ObjectGetOwnPropertyDescriptor:zi,ObjectKeys:kfe,ObjectSetPrototypeOf:AG}=ct();gG.exports=Bn;var iI=cd(),An=vp();AG(Bn.prototype,iI.prototype);AG(Bn,iI);{let t=kfe(An.prototype);for(let e=0;e<t.length;e++){let r=t[e];Bn.prototype[r]||(Bn.prototype[r]=An.prototype[r])}}function Bn(t){if(!(this instanceof Bn))return new Bn(t);iI.call(this,t),An.call(this,t),t?(this.allowHalfOpen=t.allowHalfOpen!==!1,t.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),t.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}$fe(Bn.prototype,{writable:{__proto__:null,...zi(An.prototype,"writable")},writableHighWaterMark:{__proto__:null,...zi(An.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...zi(An.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...zi(An.prototype,"writableBuffer")},writableLength:{__proto__:null,...zi(An.prototype,"writableLength")},writableFinished:{__proto__:null,...zi(An.prototype,"writableFinished")},writableCorked:{__proto__:null,...zi(An.prototype,"writableCorked")},writableEnded:{__proto__:null,...zi(An.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...zi(An.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(t){this._readableState&&this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}});var rI;function mG(){return rI===void 0&&(rI={}),rI}Bn.fromWeb=function(t,e){return mG().newStreamDuplexFromReadableWritablePair(t,e)};Bn.toWeb=function(t){return mG().newReadableWritablePairFromDuplex(t)};var nI;Bn.from=function(t){return nI||(nI=RG()),nI(t,"body")}});var aI=O((FMe,IG)=>{"use strict";var{ObjectSetPrototypeOf:_G,Symbol:Yfe}=ct();IG.exports=Ki;var{ERR_METHOD_NOT_IMPLEMENTED:Vfe}=wr().codes,oI=ui(),{getHighWaterMark:qfe}=ad();_G(Ki.prototype,oI.prototype);_G(Ki,oI);var Ed=Yfe("kCallback");function Ki(t){if(!(this instanceof Ki))return new Ki(t);let e=t?qfe(this,t,"readableHighWaterMark",!0):null;e===0&&(t={...t,highWaterMark:null,readableHighWaterMark:e,writableHighWaterMark:t.writableHighWaterMark||0}),oI.call(this,t),this._readableState.sync=!1,this[Ed]=null,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",Xfe)}function sI(t){typeof this._flush=="function"&&!this.destroyed?this._flush((e,r)=>{if(e){t?t(e):this.destroy(e);return}r!=null&&this.push(r),this.push(null),t&&t()}):(this.push(null),t&&t())}function Xfe(){this._final!==sI&&sI.call(this)}Ki.prototype._final=sI;Ki.prototype._transform=function(t,e,r){throw new Vfe("_transform()")};Ki.prototype._write=function(t,e,r){let n=this._readableState,i=this._writableState,s=n.length;this._transform(t,e,(o,a)=>{if(o){r(o);return}a!=null&&this.push(a),i.ended||s===n.length||n.length<n.highWaterMark?r():this[Ed]=r})};Ki.prototype._read=function(){if(this[Ed]){let t=this[Ed];this[Ed]=null,t()}}});var cI=O((HMe,OG)=>{"use strict";var{ObjectSetPrototypeOf:NG}=ct();OG.exports=Ml;var lI=aI();NG(Ml.prototype,lI.prototype);NG(Ml,lI);function Ml(t){if(!(this instanceof Ml))return new Ml(t);lI.call(this,t)}Ml.prototype._transform=function(t,e,r){r(null,t)}});var Fp=O((GMe,LG)=>{var hd=je(),{ArrayIsArray:jfe,Promise:zfe,SymbolAsyncIterator:Kfe,SymbolDispose:Jfe}=ct(),Bp=ji(),{once:Qfe}=Gr(),Zfe=Fo(),CG=ui(),{aggregateTwoErrors:eEe,codes:{ERR_INVALID_ARG_TYPE:RI,ERR_INVALID_RETURN_VALUE:uI,ERR_MISSING_ARGS:tEe,ERR_STREAM_DESTROYED:rEe,ERR_STREAM_PREMATURE_CLOSE:nEe},AbortError:iEe}=wr(),{validateFunction:sEe,validateAbortSignal:oEe}=Cl(),{isIterable:Wo,isReadable:dI,isReadableNodeStream:Up,isNodeStream:bG,isTransformStream:Ul,isWebStream:aEe,isReadableStream:fI,isReadableFinished:lEe}=li(),cEe=globalThis.AbortController||wt().AbortController,EI,hI,pI;function yG(t,e,r){let n=!1;t.on("close",()=>{n=!0});let i=Bp(t,{readable:e,writable:r},s=>{n=!s});return{destroy:s=>{n||(n=!0,Zfe.destroyer(t,s||new rEe("pipe")))},cleanup:i}}function uEe(t){return sEe(t[t.length-1],"streams[stream.length - 1]"),t.pop()}function TI(t){if(Wo(t))return t;if(Up(t))return dEe(t);throw new RI("val",["Readable","Iterable","AsyncIterable"],t)}async function*dEe(t){hI||(hI=cd()),yield*hI.prototype[Kfe].call(t)}async function Mp(t,e,r,{end:n}){let i,s=null,o=c=>{if(c&&(i=c),s){let u=s;s=null,u()}},a=()=>new zfe((c,u)=>{i?u(i):s=()=>{i?u(i):c()}});e.on("drain",o);let l=Bp(e,{readable:!1},o);try{e.writableNeedDrain&&await a();for await(let c of t)e.write(c)||await a();n&&(e.end(),await a()),r()}catch(c){r(i!==c?eEe(i,c):c)}finally{l(),e.off("drain",o)}}async function SI(t,e,r,{end:n}){Ul(e)&&(e=e.writable);let i=e.getWriter();try{for await(let s of t)await i.ready,i.write(s).catch(()=>{});await i.ready,n&&await i.close(),r()}catch(s){try{await i.abort(s),r(s)}catch(o){r(o)}}}function fEe(...t){return wG(t,Qfe(uEe(t)))}function wG(t,e,r){if(t.length===1&&jfe(t[0])&&(t=t[0]),t.length<2)throw new tEe("streams");let n=new cEe,i=n.signal,s=r?.signal,o=[];oEe(s,"options.signal");function a(){p(new iEe)}pI=pI||Gr().addAbortListener;let l;s&&(l=pI(s,a));let c,u,d=[],E=0;function f(R){p(R,--E===0)}function p(R,A){var I;if(R&&(!c||c.code==="ERR_STREAM_PREMATURE_CLOSE")&&(c=R),!(!c&&!A)){for(;d.length;)d.shift()(c);(I=l)===null||I===void 0||I[Jfe](),n.abort(),A&&(c||o.forEach(w=>w()),hd.nextTick(e,c,u))}}let h;for(let R=0;R<t.length;R++){let A=t[R],I=R<t.length-1,w=R>0,g=I||r?.end!==!1,L=R===t.length-1;if(bG(A)){let y=function(P){P&&P.name!=="AbortError"&&P.code!=="ERR_STREAM_PREMATURE_CLOSE"&&f(P)};var m=y;if(g){let{destroy:P,cleanup:v}=yG(A,I,w);d.push(P),dI(A)&&L&&o.push(v)}A.on("error",y),dI(A)&&L&&o.push(()=>{A.removeListener("error",y)})}if(R===0)if(typeof A=="function"){if(h=A({signal:i}),!Wo(h))throw new uI("Iterable, AsyncIterable or Stream","source",h)}else Wo(A)||Up(A)||Ul(A)?h=A:h=CG.from(A);else if(typeof A=="function"){if(Ul(h)){var S;h=TI((S=h)===null||S===void 0?void 0:S.readable)}else h=TI(h);if(h=A(h,{signal:i}),I){if(!Wo(h,!0))throw new uI("AsyncIterable",`transform[${R-1}]`,h)}else{var T;EI||(EI=cI());let y=new EI({objectMode:!0}),P=(T=h)===null||T===void 0?void 0:T.then;if(typeof P=="function")E++,P.call(h,F=>{u=F,F!=null&&y.write(F),g&&y.end(),hd.nextTick(f)},F=>{y.destroy(F),hd.nextTick(f,F)});else if(Wo(h,!0))E++,Mp(h,y,f,{end:g});else if(fI(h)||Ul(h)){let F=h.readable||h;E++,Mp(F,y,f,{end:g})}else throw new uI("AsyncIterable or Promise","destination",h);h=y;let{destroy:v,cleanup:B}=yG(h,!1,!0);d.push(v),L&&o.push(B)}}else if(bG(A)){if(Up(h)){E+=2;let y=EEe(h,A,f,{end:g});dI(A)&&L&&o.push(y)}else if(Ul(h)||fI(h)){let y=h.readable||h;E++,Mp(y,A,f,{end:g})}else if(Wo(h))E++,Mp(h,A,f,{end:g});else throw new RI("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],h);h=A}else if(aEe(A)){if(Up(h))E++,SI(TI(h),A,f,{end:g});else if(fI(h)||Wo(h))E++,SI(h,A,f,{end:g});else if(Ul(h))E++,SI(h.readable,A,f,{end:g});else throw new RI("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],h);h=A}else h=CG.from(A)}return(i!=null&&i.aborted||s!=null&&s.aborted)&&hd.nextTick(a),h}function EEe(t,e,r,{end:n}){let i=!1;if(e.on("close",()=>{i||r(new nEe)}),t.pipe(e,{end:!1}),n){let o=function(){i=!0,e.end()};var s=o;lEe(t)?hd.nextTick(o):t.once("end",o)}else r();return Bp(t,{readable:!0,writable:!1},o=>{let a=t._readableState;o&&o.code==="ERR_STREAM_PREMATURE_CLOSE"&&a&&a.ended&&!a.errored&&!a.errorEmitted?t.once("end",r).once("error",r):r(o)}),Bp(e,{readable:!1,writable:!0},r)}LG.exports={pipelineImpl:wG,pipeline:fEe}});var mI=O((WMe,UG)=>{"use strict";var{pipeline:hEe}=Fp(),Hp=ui(),{destroyer:pEe}=Fo(),{isNodeStream:Gp,isReadable:DG,isWritable:PG,isWebStream:AI,isTransformStream:$o,isWritableStream:xG,isReadableStream:vG}=li(),{AbortError:TEe,codes:{ERR_INVALID_ARG_VALUE:MG,ERR_MISSING_ARGS:SEe}}=wr(),REe=ji();UG.exports=function(...e){if(e.length===0)throw new SEe("streams");if(e.length===1)return Hp.from(e[0]);let r=[...e];if(typeof e[0]=="function"&&(e[0]=Hp.from(e[0])),typeof e[e.length-1]=="function"){let f=e.length-1;e[f]=Hp.from(e[f])}for(let f=0;f<e.length;++f)if(!(!Gp(e[f])&&!AI(e[f]))){if(f<e.length-1&&!(DG(e[f])||vG(e[f])||$o(e[f])))throw new MG(`streams[${f}]`,r[f],"must be readable");if(f>0&&!(PG(e[f])||xG(e[f])||$o(e[f])))throw new MG(`streams[${f}]`,r[f],"must be writable")}let n,i,s,o,a;function l(f){let p=o;o=null,p?p(f):f?a.destroy(f):!E&&!d&&a.destroy()}let c=e[0],u=hEe(e,l),d=!!(PG(c)||xG(c)||$o(c)),E=!!(DG(u)||vG(u)||$o(u));if(a=new Hp({writableObjectMode:!!(c!=null&&c.writableObjectMode),readableObjectMode:!!(u!=null&&u.readableObjectMode),writable:d,readable:E}),d){if(Gp(c))a._write=function(p,h,S){c.write(p,h)?S():n=S},a._final=function(p){c.end(),i=p},c.on("drain",function(){if(n){let p=n;n=null,p()}});else if(AI(c)){let h=($o(c)?c.writable:c).getWriter();a._write=async function(S,T,m){try{await h.ready,h.write(S).catch(()=>{}),m()}catch(R){m(R)}},a._final=async function(S){try{await h.ready,h.close().catch(()=>{}),i=S}catch(T){S(T)}}}let f=$o(u)?u.readable:u;REe(f,()=>{if(i){let p=i;i=null,p()}})}if(E){if(Gp(u))u.on("readable",function(){if(s){let f=s;s=null,f()}}),u.on("end",function(){a.push(null)}),a._read=function(){for(;;){let f=u.read();if(f===null){s=a._read;return}if(!a.push(f))return}};else if(AI(u)){let p=($o(u)?u.readable:u).getReader();a._read=async function(){for(;;)try{let{value:h,done:S}=await p.read();if(!a.push(h))return;if(S){a.push(null);return}}catch{return}}}}return a._destroy=function(f,p){!f&&o!==null&&(f=new TEe),s=null,n=null,i=null,o===null?p(f):(o=p,Gp(u)&&pEe(u,f))},a}});var qG=O(($Me,II)=>{"use strict";var AEe=globalThis.AbortController||wt().AbortController,{codes:{ERR_INVALID_ARG_VALUE:mEe,ERR_INVALID_ARG_TYPE:pd,ERR_MISSING_ARGS:gEe,ERR_OUT_OF_RANGE:_Ee},AbortError:di}=wr(),{validateAbortSignal:ko,validateInteger:BG,validateObject:Yo}=Cl(),IEe=ct().Symbol("kWeak"),NEe=ct().Symbol("kResistStopPropagation"),{finished:OEe}=ji(),CEe=mI(),{addAbortSignalNoValidate:bEe}=od(),{isWritable:yEe,isNodeStream:wEe}=li(),{deprecate:LEe}=Gr(),{ArrayPrototypePush:DEe,Boolean:PEe,MathFloor:FG,Number:xEe,NumberIsNaN:vEe,Promise:HG,PromiseReject:GG,PromiseResolve:MEe,PromisePrototypeThen:WG,Symbol:kG}=ct(),Wp=kG("kEmpty"),$G=kG("kEof");function UEe(t,e){if(e!=null&&Yo(e,"options"),e?.signal!=null&&ko(e.signal,"options.signal"),wEe(t)&&!yEe(t))throw new mEe("stream",t,"must be writable");let r=CEe(this,t);return e!=null&&e.signal&&bEe(e.signal,r),r}function $p(t,e){if(typeof t!="function")throw new pd("fn",["Function","AsyncFunction"],t);e!=null&&Yo(e,"options"),e?.signal!=null&&ko(e.signal,"options.signal");let r=1;e?.concurrency!=null&&(r=FG(e.concurrency));let n=r-1;return e?.highWaterMark!=null&&(n=FG(e.highWaterMark)),BG(r,"options.concurrency",1),BG(n,"options.highWaterMark",0),n+=r,async function*(){let s=Gr().AbortSignalAny([e?.signal].filter(PEe)),o=this,a=[],l={signal:s},c,u,d=!1,E=0;function f(){d=!0,p()}function p(){E-=1,h()}function h(){u&&!d&&E<r&&a.length<n&&(u(),u=null)}async function S(){try{for await(let T of o){if(d)return;if(s.aborted)throw new di;try{if(T=t(T,l),T===Wp)continue;T=MEe(T)}catch(m){T=GG(m)}E+=1,WG(T,p,f),a.push(T),c&&(c(),c=null),!d&&(a.length>=n||E>=r)&&await new HG(m=>{u=m})}a.push($G)}catch(T){let m=GG(T);WG(m,p,f),a.push(m)}finally{d=!0,c&&(c(),c=null)}}S();try{for(;;){for(;a.length>0;){let T=await a[0];if(T===$G)return;if(s.aborted)throw new di;T!==Wp&&(yield T),a.shift(),h()}await new HG(T=>{c=T})}}finally{d=!0,u&&(u(),u=null)}}.call(this)}function BEe(t=void 0){return t!=null&&Yo(t,"options"),t?.signal!=null&&ko(t.signal,"options.signal"),async function*(){let r=0;for await(let i of this){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new di({cause:t.signal.reason});yield[r++,i]}}.call(this)}async function YG(t,e=void 0){for await(let r of _I.call(this,t,e))return!0;return!1}async function FEe(t,e=void 0){if(typeof t!="function")throw new pd("fn",["Function","AsyncFunction"],t);return!await YG.call(this,async(...r)=>!await t(...r),e)}async function HEe(t,e){for await(let r of _I.call(this,t,e))return r}async function GEe(t,e){if(typeof t!="function")throw new pd("fn",["Function","AsyncFunction"],t);async function r(n,i){return await t(n,i),Wp}for await(let n of $p.call(this,r,e));}function _I(t,e){if(typeof t!="function")throw new pd("fn",["Function","AsyncFunction"],t);async function r(n,i){return await t(n,i)?n:Wp}return $p.call(this,r,e)}var gI=class extends gEe{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function WEe(t,e,r){var n;if(typeof t!="function")throw new pd("reducer",["Function","AsyncFunction"],t);r!=null&&Yo(r,"options"),r?.signal!=null&&ko(r.signal,"options.signal");let i=arguments.length>1;if(r!=null&&(n=r.signal)!==null&&n!==void 0&&n.aborted){let c=new di(void 0,{cause:r.signal.reason});throw this.once("error",()=>{}),await OEe(this.destroy(c)),c}let s=new AEe,o=s.signal;if(r!=null&&r.signal){let c={once:!0,[IEe]:this,[NEe]:!0};r.signal.addEventListener("abort",()=>s.abort(),c)}let a=!1;try{for await(let c of this){var l;if(a=!0,r!=null&&(l=r.signal)!==null&&l!==void 0&&l.aborted)throw new di;i?e=await t(e,c,{signal:o}):(e=c,i=!0)}if(!a&&!i)throw new gI}finally{s.abort()}return e}async function $Ee(t){t!=null&&Yo(t,"options"),t?.signal!=null&&ko(t.signal,"options.signal");let e=[];for await(let n of this){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new di(void 0,{cause:t.signal.reason});DEe(e,n)}return e}function kEe(t,e){let r=$p.call(this,t,e);return async function*(){for await(let i of r)yield*i}.call(this)}function VG(t){if(t=xEe(t),vEe(t))return 0;if(t<0)throw new _Ee("number",">= 0",t);return t}function YEe(t,e=void 0){return e!=null&&Yo(e,"options"),e?.signal!=null&&ko(e.signal,"options.signal"),t=VG(t),async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new di;for await(let s of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new di;t--<=0&&(yield s)}}.call(this)}function VEe(t,e=void 0){return e!=null&&Yo(e,"options"),e?.signal!=null&&ko(e.signal,"options.signal"),t=VG(t),async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new di;for await(let s of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new di;if(t-- >0&&(yield s),t<=0)return}}.call(this)}II.exports.streamReturningOperators={asIndexedPairs:LEe(BEe,"readable.asIndexedPairs will be removed in a future version."),drop:YEe,filter:_I,flatMap:kEe,map:$p,take:VEe,compose:UEe};II.exports.promiseReturningOperators={every:FEe,forEach:GEe,reduce:WEe,toArray:$Ee,some:YG,find:HEe}});var NI=O((kMe,XG)=>{"use strict";var{ArrayPrototypePop:qEe,Promise:XEe}=ct(),{isIterable:jEe,isNodeStream:zEe,isWebStream:KEe}=li(),{pipelineImpl:JEe}=Fp(),{finished:QEe}=ji();OI();function ZEe(...t){return new XEe((e,r)=>{let n,i,s=t[t.length-1];if(s&&typeof s=="object"&&!zEe(s)&&!jEe(s)&&!KEe(s)){let o=qEe(t);n=o.signal,i=o.end}JEe(t,(o,a)=>{o?r(o):e(a)},{signal:n,end:i})})}XG.exports={finished:QEe,pipeline:ZEe}});var OI=O((YMe,rW)=>{"use strict";var{Buffer:ehe}=require("buffer"),{ObjectDefineProperty:Ji,ObjectKeys:KG,ReflectApply:JG}=ct(),{promisify:{custom:QG}}=Gr(),{streamReturningOperators:jG,promiseReturningOperators:zG}=qG(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:ZG}}=wr(),the=mI(),{setDefaultHighWaterMark:rhe,getDefaultHighWaterMark:nhe}=ad(),{pipeline:eW}=Fp(),{destroyer:ihe}=Fo(),tW=ji(),CI=NI(),Td=li(),it=rW.exports=_p().Stream;it.isDestroyed=Td.isDestroyed;it.isDisturbed=Td.isDisturbed;it.isErrored=Td.isErrored;it.isReadable=Td.isReadable;it.isWritable=Td.isWritable;it.Readable=cd();for(let t of KG(jG)){let r=function(...n){if(new.target)throw ZG();return it.Readable.from(JG(e,this,n))},e=jG[t];Ji(r,"name",{__proto__:null,value:e.name}),Ji(r,"length",{__proto__:null,value:e.length}),Ji(it.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}for(let t of KG(zG)){let r=function(...n){if(new.target)throw ZG();return JG(e,this,n)},e=zG[t];Ji(r,"name",{__proto__:null,value:e.name}),Ji(r,"length",{__proto__:null,value:e.length}),Ji(it.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}it.Writable=vp();it.Duplex=ui();it.Transform=aI();it.PassThrough=cI();it.pipeline=eW;var{addAbortSignal:she}=od();it.addAbortSignal=she;it.finished=tW;it.destroy=ihe;it.compose=the;it.setDefaultHighWaterMark=rhe;it.getDefaultHighWaterMark=nhe;Ji(it,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return CI}});Ji(eW,QG,{__proto__:null,enumerable:!0,get(){return CI.pipeline}});Ji(tW,QG,{__proto__:null,enumerable:!0,get(){return CI.finished}});it.Stream=it;it._isUint8Array=function(e){return e instanceof Uint8Array};it._uint8ArrayToBuffer=function(e){return ehe.from(e.buffer,e.byteOffset,e.byteLength)}});var bI=O((VMe,we)=>{"use strict";var Wt=require("stream");if(Wt&&process.env.READABLE_STREAM==="disable"){let t=Wt.promises;we.exports._uint8ArrayToBuffer=Wt._uint8ArrayToBuffer,we.exports._isUint8Array=Wt._isUint8Array,we.exports.isDisturbed=Wt.isDisturbed,we.exports.isErrored=Wt.isErrored,we.exports.isReadable=Wt.isReadable,we.exports.Readable=Wt.Readable,we.exports.Writable=Wt.Writable,we.exports.Duplex=Wt.Duplex,we.exports.Transform=Wt.Transform,we.exports.PassThrough=Wt.PassThrough,we.exports.addAbortSignal=Wt.addAbortSignal,we.exports.finished=Wt.finished,we.exports.destroy=Wt.destroy,we.exports.pipeline=Wt.pipeline,we.exports.compose=Wt.compose,Object.defineProperty(Wt,"promises",{configurable:!0,enumerable:!0,get(){return t}}),we.exports.Stream=Wt.Stream}else{let t=OI(),e=NI(),r=t.Readable.destroy;we.exports=t.Readable,we.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,we.exports._isUint8Array=t._isUint8Array,we.exports.isDisturbed=t.isDisturbed,we.exports.isErrored=t.isErrored,we.exports.isReadable=t.isReadable,we.exports.Readable=t.Readable,we.exports.Writable=t.Writable,we.exports.Duplex=t.Duplex,we.exports.Transform=t.Transform,we.exports.PassThrough=t.PassThrough,we.exports.addAbortSignal=t.addAbortSignal,we.exports.finished=t.finished,we.exports.destroy=t.destroy,we.exports.destroy=r,we.exports.pipeline=t.pipeline,we.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return e}}),we.exports.Stream=t.Stream}we.exports.default=we.exports});var aW=O((qMe,oW)=>{var LI=require("fs"),iW=iL(),nW=oL(),yI=require("path"),fi=Nl(),ohe=require("util").inherits,It=h1(),sW=bI().Transform,wI=process.platform==="win32",Ve=function(t,e){if(!(this instanceof Ve))return new Ve(t,e);typeof t!="string"&&(e=t,t="zip"),e=this.options=fi.defaults(e,{highWaterMark:1024*1024,statConcurrency:4}),sW.call(this,e),this._format=!1,this._module=!1,this._pending=0,this._pointer=0,this._entriesCount=0,this._entriesProcessedCount=0,this._fsEntriesTotalBytes=0,this._fsEntriesProcessedBytes=0,this._queue=nW.queue(this._onQueueTask.bind(this),1),this._queue.drain(this._onQueueDrain.bind(this)),this._statQueue=nW.queue(this._onStatQueueTask.bind(this),e.statConcurrency),this._statQueue.drain(this._onQueueDrain.bind(this)),this._state={aborted:!1,finalize:!1,finalizing:!1,finalized:!1,modulePiped:!1},this._streams=[]};ohe(Ve,sW);Ve.prototype._abort=function(){this._state.aborted=!0,this._queue.kill(),this._statQueue.kill(),this._queue.idle()&&this._shutdown()};Ve.prototype._append=function(t,e){e=e||{};var r={source:null,filepath:t};e.name||(e.name=t),e.sourcePath=t,r.data=e,this._entriesCount++,e.stats&&e.stats instanceof LI.Stats?(r=this._updateQueueTaskWithStats(r,e.stats),r&&(e.stats.size&&(this._fsEntriesTotalBytes+=e.stats.size),this._queue.push(r))):this._statQueue.push(r)};Ve.prototype._finalize=function(){this._state.finalizing||this._state.finalized||this._state.aborted||(this._state.finalizing=!0,this._moduleFinalize(),this._state.finalizing=!1,this._state.finalized=!0)};Ve.prototype._maybeFinalize=function(){return this._state.finalizing||this._state.finalized||this._state.aborted?!1:this._state.finalize&&this._pending===0&&this._queue.idle()&&this._statQueue.idle()?(this._finalize(),!0):!1};Ve.prototype._moduleAppend=function(t,e,r){if(this._state.aborted){r();return}this._module.append(t,e,function(n){if(this._task=null,this._state.aborted){this._shutdown();return}if(n){this.emit("error",n),setImmediate(r);return}this.emit("entry",e),this._entriesProcessedCount++,e.stats&&e.stats.size&&(this._fsEntriesProcessedBytes+=e.stats.size),this.emit("progress",{entries:{total:this._entriesCount,processed:this._entriesProcessedCount},fs:{totalBytes:this._fsEntriesTotalBytes,processedBytes:this._fsEntriesProcessedBytes}}),setImmediate(r)}.bind(this))};Ve.prototype._moduleFinalize=function(){typeof this._module.finalize=="function"?this._module.finalize():typeof this._module.end=="function"?this._module.end():this.emit("error",new It("NOENDMETHOD"))};Ve.prototype._modulePipe=function(){this._module.on("error",this._onModuleError.bind(this)),this._module.pipe(this),this._state.modulePiped=!0};Ve.prototype._moduleSupports=function(t){return!this._module.supports||!this._module.supports[t]?!1:this._module.supports[t]};Ve.prototype._moduleUnpipe=function(){this._module.unpipe(this),this._state.modulePiped=!1};Ve.prototype._normalizeEntryData=function(t,e){t=fi.defaults(t,{type:"file",name:null,date:null,mode:null,prefix:null,sourcePath:null,stats:!1}),e&&t.stats===!1&&(t.stats=e);var r=t.type==="directory";return t.name&&(typeof t.prefix=="string"&&t.prefix!==""&&(t.name=t.prefix+"/"+t.name,t.prefix=null),t.name=fi.sanitizePath(t.name),t.type!=="symlink"&&t.name.slice(-1)==="/"?(r=!0,t.type="directory"):r&&(t.name+="/")),typeof t.mode=="number"?wI?t.mode&=511:t.mode&=4095:t.stats&&t.mode===null?(wI?t.mode=t.stats.mode&511:t.mode=t.stats.mode&4095,wI&&r&&(t.mode=493)):t.mode===null&&(t.mode=r?493:420),t.stats&&t.date===null?t.date=t.stats.mtime:t.date=fi.dateify(t.date),t};Ve.prototype._onModuleError=function(t){this.emit("error",t)};Ve.prototype._onQueueDrain=function(){this._state.finalizing||this._state.finalized||this._state.aborted||this._state.finalize&&this._pending===0&&this._queue.idle()&&this._statQueue.idle()&&this._finalize()};Ve.prototype._onQueueTask=function(t,e){var r=()=>{t.data.callback&&t.data.callback(),e()};if(this._state.finalizing||this._state.finalized||this._state.aborted){r();return}this._task=t,this._moduleAppend(t.source,t.data,r)};Ve.prototype._onStatQueueTask=function(t,e){if(this._state.finalizing||this._state.finalized||this._state.aborted){e();return}LI.lstat(t.filepath,function(r,n){if(this._state.aborted){setImmediate(e);return}if(r){this._entriesCount--,this.emit("warning",r),setImmediate(e);return}t=this._updateQueueTaskWithStats(t,n),t&&(n.size&&(this._fsEntriesTotalBytes+=n.size),this._queue.push(t)),setImmediate(e)}.bind(this))};Ve.prototype._shutdown=function(){this._moduleUnpipe(),this.end()};Ve.prototype._transform=function(t,e,r){t&&(this._pointer+=t.length),r(null,t)};Ve.prototype._updateQueueTaskWithStats=function(t,e){if(e.isFile())t.data.type="file",t.data.sourceType="stream",t.source=fi.lazyReadStream(t.filepath);else if(e.isDirectory()&&this._moduleSupports("directory"))t.data.name=fi.trailingSlashIt(t.data.name),t.data.type="directory",t.data.sourcePath=fi.trailingSlashIt(t.filepath),t.data.sourceType="buffer",t.source=Buffer.concat([]);else if(e.isSymbolicLink()&&this._moduleSupports("symlink")){var r=LI.readlinkSync(t.filepath),n=yI.dirname(t.filepath);t.data.type="symlink",t.data.linkname=yI.relative(n,yI.resolve(n,r)),t.data.sourceType="buffer",t.source=Buffer.concat([])}else return e.isDirectory()?this.emit("warning",new It("DIRECTORYNOTSUPPORTED",t.data)):e.isSymbolicLink()?this.emit("warning",new It("SYMLINKNOTSUPPORTED",t.data)):this.emit("warning",new It("ENTRYNOTSUPPORTED",t.data)),null;return t.data=this._normalizeEntryData(t.data,e),t};Ve.prototype.abort=function(){return this._state.aborted||this._state.finalized?this:(this._abort(),this)};Ve.prototype.append=function(t,e){if(this._state.finalize||this._state.aborted)return this.emit("error",new It("QUEUECLOSED")),this;if(e=this._normalizeEntryData(e),typeof e.name!="string"||e.name.length===0)return this.emit("error",new It("ENTRYNAMEREQUIRED")),this;if(e.type==="directory"&&!this._moduleSupports("directory"))return this.emit("error",new It("DIRECTORYNOTSUPPORTED",{name:e.name})),this;if(t=fi.normalizeInputSource(t),Buffer.isBuffer(t))e.sourceType="buffer";else if(fi.isStream(t))e.sourceType="stream";else return this.emit("error",new It("INPUTSTEAMBUFFERREQUIRED",{name:e.name})),this;return this._entriesCount++,this._queue.push({data:e,source:t}),this};Ve.prototype.directory=function(t,e,r){if(this._state.finalize||this._state.aborted)return this.emit("error",new It("QUEUECLOSED")),this;if(typeof t!="string"||t.length===0)return this.emit("error",new It("DIRECTORYDIRPATHREQUIRED")),this;this._pending++,e===!1?e="":typeof e!="string"&&(e=t);var n=!1;typeof r=="function"?(n=r,r={}):typeof r!="object"&&(r={});var i={stat:!0,dot:!0};function s(){this._pending--,this._maybeFinalize()}function o(c){this.emit("error",c)}function a(c){l.pause();var u=!1,d=Object.assign({},r);d.name=c.relative,d.prefix=e,d.stats=c.stat,d.callback=l.resume.bind(l);try{if(n){if(d=n(d),d===!1)u=!0;else if(typeof d!="object")throw new It("DIRECTORYFUNCTIONINVALIDDATA",{dirpath:t})}}catch(E){this.emit("error",E);return}if(u){l.resume();return}this._append(c.absolute,d)}var l=iW(t,i);return l.on("error",o.bind(this)),l.on("match",a.bind(this)),l.on("end",s.bind(this)),this};Ve.prototype.file=function(t,e){return this._state.finalize||this._state.aborted?(this.emit("error",new It("QUEUECLOSED")),this):typeof t!="string"||t.length===0?(this.emit("error",new It("FILEFILEPATHREQUIRED")),this):(this._append(t,e),this)};Ve.prototype.glob=function(t,e,r){this._pending++,e=fi.defaults(e,{stat:!0,pattern:t});function n(){this._pending--,this._maybeFinalize()}function i(a){this.emit("error",a)}function s(a){o.pause();var l=Object.assign({},r);l.callback=o.resume.bind(o),l.stats=a.stat,l.name=a.relative,this._append(a.absolute,l)}var o=iW(e.cwd||".",e);return o.on("error",i.bind(this)),o.on("match",s.bind(this)),o.on("end",n.bind(this)),this};Ve.prototype.finalize=function(){if(this._state.aborted){var t=new It("ABORTED");return this.emit("error",t),Promise.reject(t)}if(this._state.finalize){var e=new It("FINALIZING");return this.emit("error",e),Promise.reject(e)}this._state.finalize=!0,this._pending===0&&this._queue.idle()&&this._statQueue.idle()&&this._finalize();var r=this;return new Promise(function(n,i){var s;r._module.on("end",function(){s||n()}),r._module.on("error",function(o){s=!0,i(o)})})};Ve.prototype.setFormat=function(t){return this._format?(this.emit("error",new It("FORMATSET")),this):(this._format=t,this)};Ve.prototype.setModule=function(t){return this._state.aborted?(this.emit("error",new It("ABORTED")),this):this._state.module?(this.emit("error",new It("MODULESET")),this):(this._module=t,this._modulePipe(),this)};Ve.prototype.symlink=function(t,e,r){if(this._state.finalize||this._state.aborted)return this.emit("error",new It("QUEUECLOSED")),this;if(typeof t!="string"||t.length===0)return this.emit("error",new It("SYMLINKFILEPATHREQUIRED")),this;if(typeof e!="string"||e.length===0)return this.emit("error",new It("SYMLINKTARGETREQUIRED",{filepath:t})),this;if(!this._moduleSupports("symlink"))return this.emit("error",new It("SYMLINKNOTSUPPORTED",{filepath:t})),this;var n={};return n.type="symlink",n.name=t.replace(/\\/g,"/"),n.linkname=e.replace(/\\/g,"/"),n.sourceType="buffer",typeof r=="number"&&(n.mode=r),this._entriesCount++,this._queue.push({data:n,source:Buffer.concat([])}),this};Ve.prototype.pointer=function(){return this._pointer};Ve.prototype.use=function(t){return this._streams.push(t),this};oW.exports=Ve});var Yp=O((XMe,lW)=>{var kp=lW.exports=function(){};kp.prototype.getName=function(){};kp.prototype.getSize=function(){};kp.prototype.getLastModifiedDate=function(){};kp.prototype.isDirectory=function(){}});var Vp=O((jMe,cW)=>{var mn=cW.exports={};mn.dateToDos=function(t,e){e=e||!1;var r=e?t.getFullYear():t.getUTCFullYear();if(r<1980)return 2162688;if(r>=2044)return 2141175677;var n={year:r,month:e?t.getMonth():t.getUTCMonth(),date:e?t.getDate():t.getUTCDate(),hours:e?t.getHours():t.getUTCHours(),minutes:e?t.getMinutes():t.getUTCMinutes(),seconds:e?t.getSeconds():t.getUTCSeconds()};return n.year-1980<<25|n.month+1<<21|n.date<<16|n.hours<<11|n.minutes<<5|n.seconds/2};mn.dosToDate=function(t){return new Date((t>>25&127)+1980,(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(t&31)<<1)};mn.fromDosTime=function(t){return mn.dosToDate(t.readUInt32LE(0))};mn.getEightBytes=function(t){var e=Buffer.alloc(8);return e.writeUInt32LE(t%4294967296,0),e.writeUInt32LE(t/4294967296|0,4),e};mn.getShortBytes=function(t){var e=Buffer.alloc(2);return e.writeUInt16LE((t&65535)>>>0,0),e};mn.getShortBytesValue=function(t,e){return t.readUInt16LE(e)};mn.getLongBytes=function(t){var e=Buffer.alloc(4);return e.writeUInt32LE((t&4294967295)>>>0,0),e};mn.getLongBytesValue=function(t,e){return t.readUInt32LE(e)};mn.toDosTime=function(t){return mn.getLongBytes(mn.dateToDos(t))}});var DI=O((zMe,pW)=>{var uW=Vp(),dW=8,fW=1,ahe=4,lhe=2,EW=64,hW=2048,Rr=pW.exports=function(){return this instanceof Rr?(this.descriptor=!1,this.encryption=!1,this.utf8=!1,this.numberOfShannonFanoTrees=0,this.strongEncryption=!1,this.slidingDictionarySize=0,this):new Rr};Rr.prototype.encode=function(){return uW.getShortBytes((this.descriptor?dW:0)|(this.utf8?hW:0)|(this.encryption?fW:0)|(this.strongEncryption?EW:0))};Rr.prototype.parse=function(t,e){var r=uW.getShortBytesValue(t,e),n=new Rr;return n.useDataDescriptor((r&dW)!==0),n.useUTF8ForNames((r&hW)!==0),n.useStrongEncryption((r&EW)!==0),n.useEncryption((r&fW)!==0),n.setSlidingDictionarySize((r&lhe)!==0?8192:4096),n.setNumberOfShannonFanoTrees((r&ahe)!==0?3:2),n};Rr.prototype.setNumberOfShannonFanoTrees=function(t){this.numberOfShannonFanoTrees=t};Rr.prototype.getNumberOfShannonFanoTrees=function(){return this.numberOfShannonFanoTrees};Rr.prototype.setSlidingDictionarySize=function(t){this.slidingDictionarySize=t};Rr.prototype.getSlidingDictionarySize=function(){return this.slidingDictionarySize};Rr.prototype.useDataDescriptor=function(t){this.descriptor=t};Rr.prototype.usesDataDescriptor=function(){return this.descriptor};Rr.prototype.useEncryption=function(t){this.encryption=t};Rr.prototype.usesEncryption=function(){return this.encryption};Rr.prototype.useStrongEncryption=function(t){this.strongEncryption=t};Rr.prototype.usesStrongEncryption=function(){return this.strongEncryption};Rr.prototype.useUTF8ForNames=function(t){this.utf8=t};Rr.prototype.usesUTF8ForNames=function(){return this.utf8}});var SW=O((KMe,TW)=>{TW.exports={PERM_MASK:4095,FILE_TYPE_FLAG:61440,LINK_FLAG:40960,FILE_FLAG:32768,DIR_FLAG:16384,DEFAULT_LINK_PERM:511,DEFAULT_DIR_PERM:493,DEFAULT_FILE_PERM:420}});var PI=O((JMe,RW)=>{RW.exports={WORD:4,DWORD:8,EMPTY:Buffer.alloc(0),SHORT:2,SHORT_MASK:65535,SHORT_SHIFT:16,SHORT_ZERO:Buffer.from(Array(2)),LONG:4,LONG_ZERO:Buffer.from(Array(4)),MIN_VERSION_INITIAL:10,MIN_VERSION_DATA_DESCRIPTOR:20,MIN_VERSION_ZIP64:45,VERSION_MADEBY:45,METHOD_STORED:0,METHOD_DEFLATED:8,PLATFORM_UNIX:3,PLATFORM_FAT:0,SIG_LFH:67324752,SIG_DD:134695760,SIG_CFH:33639248,SIG_EOCD:101010256,SIG_ZIP64_EOCD:101075792,SIG_ZIP64_EOCD_LOC:117853008,ZIP64_MAGIC_SHORT:65535,ZIP64_MAGIC:4294967295,ZIP64_EXTRA_ID:1,ZLIB_NO_COMPRESSION:0,ZLIB_BEST_SPEED:1,ZLIB_BEST_COMPRESSION:9,ZLIB_DEFAULT_COMPRESSION:-1,MODE_MASK:4095,DEFAULT_FILE_MODE:33188,DEFAULT_DIR_MODE:16877,EXT_FILE_ATTR_DIR:1106051088,EXT_FILE_ATTR_FILE:2175008800,S_IFMT:61440,S_IFIFO:4096,S_IFCHR:8192,S_IFDIR:16384,S_IFBLK:24576,S_IFREG:32768,S_IFLNK:40960,S_IFSOCK:49152,S_DOS_A:32,S_DOS_D:16,S_DOS_V:8,S_DOS_S:4,S_DOS_H:2,S_DOS_R:1}});var xI=O((QMe,IW)=>{var che=require("util").inherits,uhe=QA(),mW=Yp(),gW=DI(),AW=SW(),Wr=PI(),_W=Vp(),Ne=IW.exports=function(t){if(!(this instanceof Ne))return new Ne(t);mW.call(this),this.platform=Wr.PLATFORM_FAT,this.method=-1,this.name=null,this.size=0,this.csize=0,this.gpb=new gW,this.crc=0,this.time=-1,this.minver=Wr.MIN_VERSION_INITIAL,this.mode=-1,this.extra=null,this.exattr=0,this.inattr=0,this.comment=null,t&&this.setName(t)};che(Ne,mW);Ne.prototype.getCentralDirectoryExtra=function(){return this.getExtra()};Ne.prototype.getComment=function(){return this.comment!==null?this.comment:""};Ne.prototype.getCompressedSize=function(){return this.csize};Ne.prototype.getCrc=function(){return this.crc};Ne.prototype.getExternalAttributes=function(){return this.exattr};Ne.prototype.getExtra=function(){return this.extra!==null?this.extra:Wr.EMPTY};Ne.prototype.getGeneralPurposeBit=function(){return this.gpb};Ne.prototype.getInternalAttributes=function(){return this.inattr};Ne.prototype.getLastModifiedDate=function(){return this.getTime()};Ne.prototype.getLocalFileDataExtra=function(){return this.getExtra()};Ne.prototype.getMethod=function(){return this.method};Ne.prototype.getName=function(){return this.name};Ne.prototype.getPlatform=function(){return this.platform};Ne.prototype.getSize=function(){return this.size};Ne.prototype.getTime=function(){return this.time!==-1?_W.dosToDate(this.time):-1};Ne.prototype.getTimeDos=function(){return this.time!==-1?this.time:0};Ne.prototype.getUnixMode=function(){return this.platform!==Wr.PLATFORM_UNIX?0:this.getExternalAttributes()>>Wr.SHORT_SHIFT&Wr.SHORT_MASK};Ne.prototype.getVersionNeededToExtract=function(){return this.minver};Ne.prototype.setComment=function(t){Buffer.byteLength(t)!==t.length&&this.getGeneralPurposeBit().useUTF8ForNames(!0),this.comment=t};Ne.prototype.setCompressedSize=function(t){if(t<0)throw new Error("invalid entry compressed size");this.csize=t};Ne.prototype.setCrc=function(t){if(t<0)throw new Error("invalid entry crc32");this.crc=t};Ne.prototype.setExternalAttributes=function(t){this.exattr=t>>>0};Ne.prototype.setExtra=function(t){this.extra=t};Ne.prototype.setGeneralPurposeBit=function(t){if(!(t instanceof gW))throw new Error("invalid entry GeneralPurposeBit");this.gpb=t};Ne.prototype.setInternalAttributes=function(t){this.inattr=t};Ne.prototype.setMethod=function(t){if(t<0)throw new Error("invalid entry compression method");this.method=t};Ne.prototype.setName=function(t,e=!1){t=uhe(t,!1).replace(/^\w+:/,"").replace(/^(\.\.\/|\/)+/,""),e&&(t=`/${t}`),Buffer.byteLength(t)!==t.length&&this.getGeneralPurposeBit().useUTF8ForNames(!0),this.name=t};Ne.prototype.setPlatform=function(t){this.platform=t};Ne.prototype.setSize=function(t){if(t<0)throw new Error("invalid entry size");this.size=t};Ne.prototype.setTime=function(t,e){if(!(t instanceof Date))throw new Error("invalid entry time");this.time=_W.dateToDos(t,e)};Ne.prototype.setUnixMode=function(t){t|=this.isDirectory()?Wr.S_IFDIR:Wr.S_IFREG;var e=0;e|=t<<Wr.SHORT_SHIFT|(this.isDirectory()?Wr.S_DOS_D:Wr.S_DOS_A),this.setExternalAttributes(e),this.mode=t&Wr.MODE_MASK,this.platform=Wr.PLATFORM_UNIX};Ne.prototype.setVersionNeededToExtract=function(t){this.minver=t};Ne.prototype.isDirectory=function(){return this.getName().slice(-1)==="/"};Ne.prototype.isUnixSymlink=function(){return(this.getUnixMode()&AW.FILE_TYPE_FLAG)===AW.LINK_FLAG};Ne.prototype.isZip64=function(){return this.csize>Wr.ZIP64_MAGIC||this.size>Wr.ZIP64_MAGIC}});var ut=O((ZMe,NW)=>{"use strict";var vI=class extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError(`Expected input to be an Array, got ${typeof e}`);let r="";for(let n=0;n<e.length;n++)r+=`    ${e[n].stack}
`;super(r),this.name="AggregateError",this.errors=e}};NW.exports={AggregateError:vI,ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,e){return t.includes(e)},ArrayPrototypeIndexOf(t,e){return t.indexOf(e)},ArrayPrototypeJoin(t,e){return t.join(e)},ArrayPrototypeMap(t,e){return t.map(e)},ArrayPrototypePop(t,e){return t.pop(e)},ArrayPrototypePush(t,e){return t.push(e)},ArrayPrototypeSlice(t,e,r){return t.slice(e,r)},Error,FunctionPrototypeCall(t,e,...r){return t.call(e,...r)},FunctionPrototypeSymbolHasInstance(t,e){return Function.prototype[Symbol.hasInstance].call(t,e)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,e){return Object.defineProperties(t,e)},ObjectDefineProperty(t,e,r){return Object.defineProperty(t,e,r)},ObjectGetOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,e){return Object.setPrototypeOf(t,e)},Promise,PromisePrototypeCatch(t,e){return t.catch(e)},PromisePrototypeThen(t,e,r){return t.then(e,r)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,e){return t.test(e)},SafeSet:Set,String,StringPrototypeSlice(t,e,r){return t.slice(e,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,e,r){return t.set(e,r)},Boolean,Uint8Array}});var MI=O((eUe,OW)=>{"use strict";OW.exports={format(t,...e){return t.replace(/%([sdifj])/g,function(...[r,n]){let i=e.shift();return n==="f"?i.toFixed(6):n==="j"?JSON.stringify(i):n==="s"&&typeof i=="object"?`${i.constructor!==Object?i.constructor.name:""} {}`.trim():i.toString()})},inspect(t){switch(typeof t){case"string":if(t.includes("'"))if(t.includes('"')){if(!t.includes("`")&&!t.includes("${"))return`\`${t}\``}else return`"${t}"`;return`'${t}'`;case"number":return isNaN(t)?"NaN":Object.is(t,-0)?String(t):t;case"bigint":return`${String(t)}n`;case"boolean":case"undefined":return String(t);case"object":return"{}"}}}});var Dr=O((tUe,yW)=>{"use strict";var{format:dhe,inspect:qp}=MI(),{AggregateError:fhe}=ut(),Ehe=globalThis.AggregateError||fhe,hhe=Symbol("kIsNodeError"),phe=["string","function","number","object","Function","Object","boolean","bigint","symbol"],The=/^([A-Z][a-z0-9]*)+$/,She="__node_internal_",Xp={};function Vo(t,e){if(!t)throw new Xp.ERR_INTERNAL_ASSERTION(e)}function CW(t){let e="",r=t.length,n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function Rhe(t,e,r){if(typeof e=="function")return Vo(e.length<=r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${e.length}).`),e(...r);let n=(e.match(/%[dfijoOs]/g)||[]).length;return Vo(n===r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${n}).`),r.length===0?e:dhe(e,...r)}function Ar(t,e,r){r||(r=Error);class n extends r{constructor(...s){super(Rhe(t,e,s))}toString(){return`${this.name} [${t}]: ${this.message}`}}Object.defineProperties(n.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${t}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),n.prototype.code=t,n.prototype[hhe]=!0,Xp[t]=n}function bW(t){let e=She+t.name;return Object.defineProperty(t,"name",{value:e}),t}function Ahe(t,e){if(t&&e&&t!==e){if(Array.isArray(e.errors))return e.errors.push(t),e;let r=new Ehe([e,t],e.message);return r.code=e.code,r}return t||e}var UI=class extends Error{constructor(e="The operation was aborted",r=void 0){if(r!==void 0&&typeof r!="object")throw new Xp.ERR_INVALID_ARG_TYPE("options","Object",r);super(e,r),this.code="ABORT_ERR",this.name="AbortError"}};Ar("ERR_ASSERTION","%s",Error);Ar("ERR_INVALID_ARG_TYPE",(t,e,r)=>{Vo(typeof t=="string","'name' must be a string"),Array.isArray(e)||(e=[e]);let n="The ";t.endsWith(" argument")?n+=`${t} `:n+=`"${t}" ${t.includes(".")?"property":"argument"} `,n+="must be ";let i=[],s=[],o=[];for(let l of e)Vo(typeof l=="string","All expected entries have to be of type string"),phe.includes(l)?i.push(l.toLowerCase()):The.test(l)?s.push(l):(Vo(l!=="object",'The value "object" should be written as "Object"'),o.push(l));if(s.length>0){let l=i.indexOf("object");l!==-1&&(i.splice(i,l,1),s.push("Object"))}if(i.length>0){switch(i.length){case 1:n+=`of type ${i[0]}`;break;case 2:n+=`one of type ${i[0]} or ${i[1]}`;break;default:{let l=i.pop();n+=`one of type ${i.join(", ")}, or ${l}`}}(s.length>0||o.length>0)&&(n+=" or ")}if(s.length>0){switch(s.length){case 1:n+=`an instance of ${s[0]}`;break;case 2:n+=`an instance of ${s[0]} or ${s[1]}`;break;default:{let l=s.pop();n+=`an instance of ${s.join(", ")}, or ${l}`}}o.length>0&&(n+=" or ")}switch(o.length){case 0:break;case 1:o[0].toLowerCase()!==o[0]&&(n+="an "),n+=`${o[0]}`;break;case 2:n+=`one of ${o[0]} or ${o[1]}`;break;default:{let l=o.pop();n+=`one of ${o.join(", ")}, or ${l}`}}if(r==null)n+=`. Received ${r}`;else if(typeof r=="function"&&r.name)n+=`. Received function ${r.name}`;else if(typeof r=="object"){var a;if((a=r.constructor)!==null&&a!==void 0&&a.name)n+=`. Received an instance of ${r.constructor.name}`;else{let l=qp(r,{depth:-1});n+=`. Received ${l}`}}else{let l=qp(r,{colors:!1});l.length>25&&(l=`${l.slice(0,25)}...`),n+=`. Received type ${typeof r} (${l})`}return n},TypeError);Ar("ERR_INVALID_ARG_VALUE",(t,e,r="is invalid")=>{let n=qp(e);return n.length>128&&(n=n.slice(0,128)+"..."),`The ${t.includes(".")?"property":"argument"} '${t}' ${r}. Received ${n}`},TypeError);Ar("ERR_INVALID_RETURN_VALUE",(t,e,r)=>{var n;let i=r!=null&&(n=r.constructor)!==null&&n!==void 0&&n.name?`instance of ${r.constructor.name}`:`type ${typeof r}`;return`Expected ${t} to be returned from the "${e}" function but got ${i}.`},TypeError);Ar("ERR_MISSING_ARGS",(...t)=>{Vo(t.length>0,"At least one arg needs to be specified");let e,r=t.length;switch(t=(Array.isArray(t)?t:[t]).map(n=>`"${n}"`).join(" or "),r){case 1:e+=`The ${t[0]} argument`;break;case 2:e+=`The ${t[0]} and ${t[1]} arguments`;break;default:{let n=t.pop();e+=`The ${t.join(", ")}, and ${n} arguments`}break}return`${e} must be specified`},TypeError);Ar("ERR_OUT_OF_RANGE",(t,e,r)=>{Vo(e,'Missing "range" argument');let n;if(Number.isInteger(r)&&Math.abs(r)>2**32)n=CW(String(r));else if(typeof r=="bigint"){n=String(r);let i=BigInt(2)**BigInt(32);(r>i||r<-i)&&(n=CW(n)),n+="n"}else n=qp(r);return`The value of "${t}" is out of range. It must be ${e}. Received ${n}`},RangeError);Ar("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);Ar("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);Ar("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);Ar("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);Ar("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);Ar("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Ar("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);Ar("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);Ar("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);Ar("ERR_STREAM_WRITE_AFTER_END","write after end",Error);Ar("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);yW.exports={AbortError:UI,aggregateTwoErrors:bW(Ahe),hideStackFrames:bW,codes:Xp}});var $r=O((rUe,FI)=>{"use strict";var mhe=require("buffer"),{format:ghe,inspect:_he}=MI(),{codes:{ERR_INVALID_ARG_TYPE:BI}}=Dr(),{kResistStopPropagation:Ihe,AggregateError:Nhe,SymbolDispose:Ohe}=ut(),Che=globalThis.AbortSignal||wt().AbortSignal,bhe=globalThis.AbortController||wt().AbortController,yhe=Object.getPrototypeOf(async function(){}).constructor,wW=globalThis.Blob||mhe.Blob,whe=typeof wW<"u"?function(e){return e instanceof wW}:function(e){return!1},LW=(t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new BI(e,"AbortSignal",t)},Lhe=(t,e)=>{if(typeof t!="function")throw new BI(e,"Function",t)};FI.exports={AggregateError:Nhe,kEmptyObject:Object.freeze({}),once(t){let e=!1;return function(...r){e||(e=!0,t.apply(this,r))}},createDeferredPromise:function(){let t,e;return{promise:new Promise((n,i)=>{t=n,e=i}),resolve:t,reject:e}},promisify(t){return new Promise((e,r)=>{t((n,...i)=>n?r(n):e(...i))})},debuglog(){return function(){}},format:ghe,inspect:_he,types:{isAsyncFunction(t){return t instanceof yhe},isArrayBufferView(t){return ArrayBuffer.isView(t)}},isBlob:whe,deprecate(t,e){return t},addAbortListener:require("events").addAbortListener||function(e,r){if(e===void 0)throw new BI("signal","AbortSignal",e);LW(e,"signal"),Lhe(r,"listener");let n;return e.aborted?queueMicrotask(()=>r()):(e.addEventListener("abort",r,{__proto__:null,once:!0,[Ihe]:!0}),n=()=>{e.removeEventListener("abort",r)}),{__proto__:null,[Ohe](){var i;(i=n)===null||i===void 0||i()}}},AbortSignalAny:Che.any||function(e){if(e.length===1)return e[0];let r=new bhe,n=()=>r.abort();return e.forEach(i=>{LW(i,"signals"),i.addEventListener("abort",n,{once:!0})}),r.signal.addEventListener("abort",()=>{e.forEach(i=>i.removeEventListener("abort",n))},{once:!0}),r.signal}};FI.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")});var Fl=O((nUe,GW)=>{"use strict";var{ArrayIsArray:GI,ArrayPrototypeIncludes:vW,ArrayPrototypeJoin:MW,ArrayPrototypeMap:Dhe,NumberIsInteger:WI,NumberIsNaN:Phe,NumberMAX_SAFE_INTEGER:xhe,NumberMIN_SAFE_INTEGER:vhe,NumberParseInt:Mhe,ObjectPrototypeHasOwnProperty:Uhe,RegExpPrototypeExec:UW,String:Bhe,StringPrototypeToUpperCase:Fhe,StringPrototypeTrim:Hhe}=ut(),{hideStackFrames:gn,codes:{ERR_SOCKET_BAD_PORT:Ghe,ERR_INVALID_ARG_TYPE:Pr,ERR_INVALID_ARG_VALUE:Bl,ERR_OUT_OF_RANGE:qo,ERR_UNKNOWN_SIGNAL:DW}}=Dr(),{normalizeEncoding:Whe}=$r(),{isAsyncFunction:$he,isArrayBufferView:khe}=$r().types,PW={};function Yhe(t){return t===(t|0)}function Vhe(t){return t===t>>>0}var qhe=/^[0-7]+$/,Xhe="must be a 32-bit unsigned integer or an octal string";function jhe(t,e,r){if(typeof t>"u"&&(t=r),typeof t=="string"){if(UW(qhe,t)===null)throw new Bl(e,t,Xhe);t=Mhe(t,8)}return BW(t,e),t}var zhe=gn((t,e,r=vhe,n=xhe)=>{if(typeof t!="number")throw new Pr(e,"number",t);if(!WI(t))throw new qo(e,"an integer",t);if(t<r||t>n)throw new qo(e,`>= ${r} && <= ${n}`,t)}),Khe=gn((t,e,r=-2147483648,n=2147483647)=>{if(typeof t!="number")throw new Pr(e,"number",t);if(!WI(t))throw new qo(e,"an integer",t);if(t<r||t>n)throw new qo(e,`>= ${r} && <= ${n}`,t)}),BW=gn((t,e,r=!1)=>{if(typeof t!="number")throw new Pr(e,"number",t);if(!WI(t))throw new qo(e,"an integer",t);let n=r?1:0,i=4294967295;if(t<n||t>i)throw new qo(e,`>= ${n} && <= ${i}`,t)});function $I(t,e){if(typeof t!="string")throw new Pr(e,"string",t)}function Jhe(t,e,r=void 0,n){if(typeof t!="number")throw new Pr(e,"number",t);if(r!=null&&t<r||n!=null&&t>n||(r!=null||n!=null)&&Phe(t))throw new qo(e,`${r!=null?`>= ${r}`:""}${r!=null&&n!=null?" && ":""}${n!=null?`<= ${n}`:""}`,t)}var Qhe=gn((t,e,r)=>{if(!vW(r,t)){let i="must be one of: "+MW(Dhe(r,s=>typeof s=="string"?`'${s}'`:Bhe(s)),", ");throw new Bl(e,t,i)}});function FW(t,e){if(typeof t!="boolean")throw new Pr(e,"boolean",t)}function HI(t,e,r){return t==null||!Uhe(t,e)?r:t[e]}var Zhe=gn((t,e,r=null)=>{let n=HI(r,"allowArray",!1),i=HI(r,"allowFunction",!1);if(!HI(r,"nullable",!1)&&t===null||!n&&GI(t)||typeof t!="object"&&(!i||typeof t!="function"))throw new Pr(e,"Object",t)}),epe=gn((t,e)=>{if(t!=null&&typeof t!="object"&&typeof t!="function")throw new Pr(e,"a dictionary",t)}),jp=gn((t,e,r=0)=>{if(!GI(t))throw new Pr(e,"Array",t);if(t.length<r){let n=`must be longer than ${r}`;throw new Bl(e,t,n)}});function tpe(t,e){jp(t,e);for(let r=0;r<t.length;r++)$I(t[r],`${e}[${r}]`)}function rpe(t,e){jp(t,e);for(let r=0;r<t.length;r++)FW(t[r],`${e}[${r}]`)}function npe(t,e){jp(t,e);for(let r=0;r<t.length;r++){let n=t[r],i=`${e}[${r}]`;if(n==null)throw new Pr(i,"AbortSignal",n);HW(n,i)}}function ipe(t,e="signal"){if($I(t,e),PW[t]===void 0)throw PW[Fhe(t)]!==void 0?new DW(t+" (signals must use all capital letters)"):new DW(t)}var spe=gn((t,e="buffer")=>{if(!khe(t))throw new Pr(e,["Buffer","TypedArray","DataView"],t)});function ope(t,e){let r=Whe(e),n=t.length;if(r==="hex"&&n%2!==0)throw new Bl("encoding",e,`is invalid for data of length ${n}`)}function ape(t,e="Port",r=!0){if(typeof t!="number"&&typeof t!="string"||typeof t=="string"&&Hhe(t).length===0||+t!==+t>>>0||t>65535||t===0&&!r)throw new Ghe(e,t,r);return t|0}var HW=gn((t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new Pr(e,"AbortSignal",t)}),lpe=gn((t,e)=>{if(typeof t!="function")throw new Pr(e,"Function",t)}),cpe=gn((t,e)=>{if(typeof t!="function"||$he(t))throw new Pr(e,"Function",t)}),upe=gn((t,e)=>{if(t!==void 0)throw new Pr(e,"undefined",t)});function dpe(t,e,r){if(!vW(r,t))throw new Pr(e,`('${MW(r,"|")}')`,t)}var fpe=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function xW(t,e){if(typeof t>"u"||!UW(fpe,t))throw new Bl(e,t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function Epe(t){if(typeof t=="string")return xW(t,"hints"),t;if(GI(t)){let e=t.length,r="";if(e===0)return r;for(let n=0;n<e;n++){let i=t[n];xW(i,"hints"),r+=i,n!==e-1&&(r+=", ")}return r}throw new Bl("hints",t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}GW.exports={isInt32:Yhe,isUint32:Vhe,parseFileMode:jhe,validateArray:jp,validateStringArray:tpe,validateBooleanArray:rpe,validateAbortSignalArray:npe,validateBoolean:FW,validateBuffer:spe,validateDictionary:epe,validateEncoding:ope,validateFunction:lpe,validateInt32:Khe,validateInteger:zhe,validateNumber:Jhe,validateObject:Zhe,validateOneOf:Qhe,validatePlainFunction:cpe,validatePort:ape,validateSignalName:ipe,validateString:$I,validateUint32:BW,validateUndefined:upe,validateUnion:dpe,validateAbortSignal:HW,validateLinkHeaderValue:Epe}});var hi=O((iUe,t$)=>{"use strict";var{SymbolAsyncIterator:WW,SymbolIterator:$W,SymbolFor:Xo}=ut(),kW=Xo("nodejs.stream.destroyed"),YW=Xo("nodejs.stream.errored"),kI=Xo("nodejs.stream.readable"),YI=Xo("nodejs.stream.writable"),VW=Xo("nodejs.stream.disturbed"),hpe=Xo("nodejs.webstream.isClosedPromise"),ppe=Xo("nodejs.webstream.controllerErrorFunction");function zp(t,e=!1){var r;return!!(t&&typeof t.pipe=="function"&&typeof t.on=="function"&&(!e||typeof t.pause=="function"&&typeof t.resume=="function")&&(!t._writableState||((r=t._readableState)===null||r===void 0?void 0:r.readable)!==!1)&&(!t._writableState||t._readableState))}function Kp(t){var e;return!!(t&&typeof t.write=="function"&&typeof t.on=="function"&&(!t._readableState||((e=t._writableState)===null||e===void 0?void 0:e.writable)!==!1))}function Tpe(t){return!!(t&&typeof t.pipe=="function"&&t._readableState&&typeof t.on=="function"&&typeof t.write=="function")}function Ei(t){return t&&(t._readableState||t._writableState||typeof t.write=="function"&&typeof t.on=="function"||typeof t.pipe=="function"&&typeof t.on=="function")}function qW(t){return!!(t&&!Ei(t)&&typeof t.pipeThrough=="function"&&typeof t.getReader=="function"&&typeof t.cancel=="function")}function XW(t){return!!(t&&!Ei(t)&&typeof t.getWriter=="function"&&typeof t.abort=="function")}function jW(t){return!!(t&&!Ei(t)&&typeof t.readable=="object"&&typeof t.writable=="object")}function Spe(t){return qW(t)||XW(t)||jW(t)}function Rpe(t,e){return t==null?!1:e===!0?typeof t[WW]=="function":e===!1?typeof t[$W]=="function":typeof t[WW]=="function"||typeof t[$W]=="function"}function Jp(t){if(!Ei(t))return null;let e=t._writableState,r=t._readableState,n=e||r;return!!(t.destroyed||t[kW]||n!=null&&n.destroyed)}function zW(t){if(!Kp(t))return null;if(t.writableEnded===!0)return!0;let e=t._writableState;return e!=null&&e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function Ape(t,e){if(!Kp(t))return null;if(t.writableFinished===!0)return!0;let r=t._writableState;return r!=null&&r.errored?!1:typeof r?.finished!="boolean"?null:!!(r.finished||e===!1&&r.ended===!0&&r.length===0)}function mpe(t){if(!zp(t))return null;if(t.readableEnded===!0)return!0;let e=t._readableState;return!e||e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function KW(t,e){if(!zp(t))return null;let r=t._readableState;return r!=null&&r.errored?!1:typeof r?.endEmitted!="boolean"?null:!!(r.endEmitted||e===!1&&r.ended===!0&&r.length===0)}function JW(t){return t&&t[kI]!=null?t[kI]:typeof t?.readable!="boolean"?null:Jp(t)?!1:zp(t)&&t.readable&&!KW(t)}function QW(t){return t&&t[YI]!=null?t[YI]:typeof t?.writable!="boolean"?null:Jp(t)?!1:Kp(t)&&t.writable&&!zW(t)}function gpe(t,e){return Ei(t)?Jp(t)?!0:!(e?.readable!==!1&&JW(t)||e?.writable!==!1&&QW(t)):null}function _pe(t){var e,r;return Ei(t)?t.writableErrored?t.writableErrored:(e=(r=t._writableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function Ipe(t){var e,r;return Ei(t)?t.readableErrored?t.readableErrored:(e=(r=t._readableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function Npe(t){if(!Ei(t))return null;if(typeof t.closed=="boolean")return t.closed;let e=t._writableState,r=t._readableState;return typeof e?.closed=="boolean"||typeof r?.closed=="boolean"?e?.closed||r?.closed:typeof t._closed=="boolean"&&ZW(t)?t._closed:null}function ZW(t){return typeof t._closed=="boolean"&&typeof t._defaultKeepAlive=="boolean"&&typeof t._removedConnection=="boolean"&&typeof t._removedContLen=="boolean"}function e$(t){return typeof t._sent100=="boolean"&&ZW(t)}function Ope(t){var e;return typeof t._consuming=="boolean"&&typeof t._dumped=="boolean"&&((e=t.req)===null||e===void 0?void 0:e.upgradeOrConnect)===void 0}function Cpe(t){if(!Ei(t))return null;let e=t._writableState,r=t._readableState,n=e||r;return!n&&e$(t)||!!(n&&n.autoDestroy&&n.emitClose&&n.closed===!1)}function bpe(t){var e;return!!(t&&((e=t[VW])!==null&&e!==void 0?e:t.readableDidRead||t.readableAborted))}function ype(t){var e,r,n,i,s,o,a,l,c,u;return!!(t&&((e=(r=(n=(i=(s=(o=t[YW])!==null&&o!==void 0?o:t.readableErrored)!==null&&s!==void 0?s:t.writableErrored)!==null&&i!==void 0?i:(a=t._readableState)===null||a===void 0?void 0:a.errorEmitted)!==null&&n!==void 0?n:(l=t._writableState)===null||l===void 0?void 0:l.errorEmitted)!==null&&r!==void 0?r:(c=t._readableState)===null||c===void 0?void 0:c.errored)!==null&&e!==void 0?e:!((u=t._writableState)===null||u===void 0)&&u.errored))}t$.exports={isDestroyed:Jp,kIsDestroyed:kW,isDisturbed:bpe,kIsDisturbed:VW,isErrored:ype,kIsErrored:YW,isReadable:JW,kIsReadable:kI,kIsClosedPromise:hpe,kControllerErrorFunction:ppe,kIsWritable:YI,isClosed:Npe,isDuplexNodeStream:Tpe,isFinished:gpe,isIterable:Rpe,isReadableNodeStream:zp,isReadableStream:qW,isReadableEnded:mpe,isReadableFinished:KW,isReadableErrored:Ipe,isNodeStream:Ei,isWebStream:Spe,isWritable:QW,isWritableNodeStream:Kp,isWritableStream:XW,isWritableEnded:zW,isWritableFinished:Ape,isWritableErrored:_pe,isServerRequest:Ope,isServerResponse:e$,willEmitClose:Cpe,isTransformStream:jW}});var Qi=O((sUe,zI)=>{"use strict";var Ws=je(),{AbortError:u$,codes:wpe}=Dr(),{ERR_INVALID_ARG_TYPE:Lpe,ERR_STREAM_PREMATURE_CLOSE:r$}=wpe,{kEmptyObject:qI,once:XI}=$r(),{validateAbortSignal:Dpe,validateFunction:Ppe,validateObject:xpe,validateBoolean:vpe}=Fl(),{Promise:Mpe,PromisePrototypeThen:Upe,SymbolDispose:d$}=ut(),{isClosed:Bpe,isReadable:n$,isReadableNodeStream:VI,isReadableStream:Fpe,isReadableFinished:i$,isReadableErrored:s$,isWritable:o$,isWritableNodeStream:a$,isWritableStream:Hpe,isWritableFinished:l$,isWritableErrored:c$,isNodeStream:Gpe,willEmitClose:Wpe,kIsClosedPromise:$pe}=hi(),Hl;function kpe(t){return t.setHeader&&typeof t.abort=="function"}var jI=()=>{};function f$(t,e,r){var n,i;if(arguments.length===2?(r=e,e=qI):e==null?e=qI:xpe(e,"options"),Ppe(r,"callback"),Dpe(e.signal,"options.signal"),r=XI(r),Fpe(t)||Hpe(t))return Ype(t,e,r);if(!Gpe(t))throw new Lpe("stream",["ReadableStream","WritableStream","Stream"],t);let s=(n=e.readable)!==null&&n!==void 0?n:VI(t),o=(i=e.writable)!==null&&i!==void 0?i:a$(t),a=t._writableState,l=t._readableState,c=()=>{t.writable||E()},u=Wpe(t)&&VI(t)===s&&a$(t)===o,d=l$(t,!1),E=()=>{d=!0,t.destroyed&&(u=!1),!(u&&(!t.readable||s))&&(!s||f)&&r.call(t)},f=i$(t,!1),p=()=>{f=!0,t.destroyed&&(u=!1),!(u&&(!t.writable||o))&&(!o||d)&&r.call(t)},h=I=>{r.call(t,I)},S=Bpe(t),T=()=>{S=!0;let I=c$(t)||s$(t);if(I&&typeof I!="boolean")return r.call(t,I);if(s&&!f&&VI(t,!0)&&!i$(t,!1))return r.call(t,new r$);if(o&&!d&&!l$(t,!1))return r.call(t,new r$);r.call(t)},m=()=>{S=!0;let I=c$(t)||s$(t);if(I&&typeof I!="boolean")return r.call(t,I);r.call(t)},R=()=>{t.req.on("finish",E)};kpe(t)?(t.on("complete",E),u||t.on("abort",T),t.req?R():t.on("request",R)):o&&!a&&(t.on("end",c),t.on("close",c)),!u&&typeof t.aborted=="boolean"&&t.on("aborted",T),t.on("end",p),t.on("finish",E),e.error!==!1&&t.on("error",h),t.on("close",T),S?Ws.nextTick(T):a!=null&&a.errorEmitted||l!=null&&l.errorEmitted?u||Ws.nextTick(m):(!s&&(!u||n$(t))&&(d||o$(t)===!1)||!o&&(!u||o$(t))&&(f||n$(t)===!1)||l&&t.req&&t.aborted)&&Ws.nextTick(m);let A=()=>{r=jI,t.removeListener("aborted",T),t.removeListener("complete",E),t.removeListener("abort",T),t.removeListener("request",R),t.req&&t.req.removeListener("finish",E),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",E),t.removeListener("end",p),t.removeListener("error",h),t.removeListener("close",T)};if(e.signal&&!S){let I=()=>{let w=r;A(),w.call(t,new u$(void 0,{cause:e.signal.reason}))};if(e.signal.aborted)Ws.nextTick(I);else{Hl=Hl||$r().addAbortListener;let w=Hl(e.signal,I),g=r;r=XI((...L)=>{w[d$](),g.apply(t,L)})}}return A}function Ype(t,e,r){let n=!1,i=jI;if(e.signal)if(i=()=>{n=!0,r.call(t,new u$(void 0,{cause:e.signal.reason}))},e.signal.aborted)Ws.nextTick(i);else{Hl=Hl||$r().addAbortListener;let o=Hl(e.signal,i),a=r;r=XI((...l)=>{o[d$](),a.apply(t,l)})}let s=(...o)=>{n||Ws.nextTick(()=>r.apply(t,o))};return Upe(t[$pe].promise,s,s),jI}function Vpe(t,e){var r;let n=!1;return e===null&&(e=qI),(r=e)!==null&&r!==void 0&&r.cleanup&&(vpe(e.cleanup,"cleanup"),n=e.cleanup),new Mpe((i,s)=>{let o=f$(t,e,a=>{n&&o(),a?s(a):i()})})}zI.exports=f$;zI.exports.finished=Vpe});var jo=O((oUe,m$)=>{"use strict";var pi=je(),{aggregateTwoErrors:qpe,codes:{ERR_MULTIPLE_CALLBACK:Xpe},AbortError:jpe}=Dr(),{Symbol:p$}=ut(),{kIsDestroyed:zpe,isDestroyed:Kpe,isFinished:Jpe,isServerRequest:Qpe}=hi(),T$=p$("kDestroy"),KI=p$("kConstruct");function S$(t,e,r){t&&(t.stack,e&&!e.errored&&(e.errored=t),r&&!r.errored&&(r.errored=t))}function Zpe(t,e){let r=this._readableState,n=this._writableState,i=n||r;return n!=null&&n.destroyed||r!=null&&r.destroyed?(typeof e=="function"&&e(),this):(S$(t,n,r),n&&(n.destroyed=!0),r&&(r.destroyed=!0),i.constructed?E$(this,t,e):this.once(T$,function(s){E$(this,qpe(s,t),e)}),this)}function E$(t,e,r){let n=!1;function i(s){if(n)return;n=!0;let o=t._readableState,a=t._writableState;S$(s,a,o),a&&(a.closed=!0),o&&(o.closed=!0),typeof r=="function"&&r(s),s?pi.nextTick(eTe,t,s):pi.nextTick(R$,t)}try{t._destroy(e||null,i)}catch(s){i(s)}}function eTe(t,e){JI(t,e),R$(t)}function R$(t){let e=t._readableState,r=t._writableState;r&&(r.closeEmitted=!0),e&&(e.closeEmitted=!0),(r!=null&&r.emitClose||e!=null&&e.emitClose)&&t.emit("close")}function JI(t,e){let r=t._readableState,n=t._writableState;n!=null&&n.errorEmitted||r!=null&&r.errorEmitted||(n&&(n.errorEmitted=!0),r&&(r.errorEmitted=!0),t.emit("error",e))}function tTe(){let t=this._readableState,e=this._writableState;t&&(t.constructed=!0,t.closed=!1,t.closeEmitted=!1,t.destroyed=!1,t.errored=null,t.errorEmitted=!1,t.reading=!1,t.ended=t.readable===!1,t.endEmitted=t.readable===!1),e&&(e.constructed=!0,e.destroyed=!1,e.closed=!1,e.closeEmitted=!1,e.errored=null,e.errorEmitted=!1,e.finalCalled=!1,e.prefinished=!1,e.ended=e.writable===!1,e.ending=e.writable===!1,e.finished=e.writable===!1)}function QI(t,e,r){let n=t._readableState,i=t._writableState;if(i!=null&&i.destroyed||n!=null&&n.destroyed)return this;n!=null&&n.autoDestroy||i!=null&&i.autoDestroy?t.destroy(e):e&&(e.stack,i&&!i.errored&&(i.errored=e),n&&!n.errored&&(n.errored=e),r?pi.nextTick(JI,t,e):JI(t,e))}function rTe(t,e){if(typeof t._construct!="function")return;let r=t._readableState,n=t._writableState;r&&(r.constructed=!1),n&&(n.constructed=!1),t.once(KI,e),!(t.listenerCount(KI)>1)&&pi.nextTick(nTe,t)}function nTe(t){let e=!1;function r(n){if(e){QI(t,n??new Xpe);return}e=!0;let i=t._readableState,s=t._writableState,o=s||i;i&&(i.constructed=!0),s&&(s.constructed=!0),o.destroyed?t.emit(T$,n):n?QI(t,n,!0):pi.nextTick(iTe,t)}try{t._construct(n=>{pi.nextTick(r,n)})}catch(n){pi.nextTick(r,n)}}function iTe(t){t.emit(KI)}function h$(t){return t?.setHeader&&typeof t.abort=="function"}function A$(t){t.emit("close")}function sTe(t,e){t.emit("error",e),pi.nextTick(A$,t)}function oTe(t,e){!t||Kpe(t)||(!e&&!Jpe(t)&&(e=new jpe),Qpe(t)?(t.socket=null,t.destroy(e)):h$(t)?t.abort():h$(t.req)?t.req.abort():typeof t.destroy=="function"?t.destroy(e):typeof t.close=="function"?t.close():e?pi.nextTick(sTe,t,e):pi.nextTick(A$,t),t.destroyed||(t[zpe]=!0))}m$.exports={construct:rTe,destroyer:oTe,destroy:Zpe,undestroy:tTe,errorOrDestroy:QI}});var eT=O((aUe,_$)=>{"use strict";var{ArrayIsArray:aTe,ObjectSetPrototypeOf:g$}=ut(),{EventEmitter:Qp}=require("events");function Zp(t){Qp.call(this,t)}g$(Zp.prototype,Qp.prototype);g$(Zp,Qp);Zp.prototype.pipe=function(t,e){let r=this;function n(u){t.writable&&t.write(u)===!1&&r.pause&&r.pause()}r.on("data",n);function i(){r.readable&&r.resume&&r.resume()}t.on("drain",i),!t._isStdio&&(!e||e.end!==!1)&&(r.on("end",o),r.on("close",a));let s=!1;function o(){s||(s=!0,t.end())}function a(){s||(s=!0,typeof t.destroy=="function"&&t.destroy())}function l(u){c(),Qp.listenerCount(this,"error")===0&&this.emit("error",u)}ZI(r,"error",l),ZI(t,"error",l);function c(){r.removeListener("data",n),t.removeListener("drain",i),r.removeListener("end",o),r.removeListener("close",a),r.removeListener("error",l),t.removeListener("error",l),r.removeListener("end",c),r.removeListener("close",c),t.removeListener("close",c)}return r.on("end",c),r.on("close",c),t.on("close",c),t.emit("pipe",r),t};function ZI(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):aTe(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}_$.exports={Stream:Zp,prependListener:ZI}});var Sd=O((lUe,tT)=>{"use strict";var{SymbolDispose:lTe}=ut(),{AbortError:I$,codes:cTe}=Dr(),{isNodeStream:N$,isWebStream:uTe,kControllerErrorFunction:dTe}=hi(),fTe=Qi(),{ERR_INVALID_ARG_TYPE:O$}=cTe,eN,ETe=(t,e)=>{if(typeof t!="object"||!("aborted"in t))throw new O$(e,"AbortSignal",t)};tT.exports.addAbortSignal=function(e,r){if(ETe(e,"signal"),!N$(r)&&!uTe(r))throw new O$("stream",["ReadableStream","WritableStream","Stream"],r);return tT.exports.addAbortSignalNoValidate(e,r)};tT.exports.addAbortSignalNoValidate=function(t,e){if(typeof t!="object"||!("aborted"in t))return e;let r=N$(e)?()=>{e.destroy(new I$(void 0,{cause:t.reason}))}:()=>{e[dTe](new I$(void 0,{cause:t.reason}))};if(t.aborted)r();else{eN=eN||$r().addAbortListener;let n=eN(t,r);fTe(e,n[lTe])}return e}});var y$=O((uUe,b$)=>{"use strict";var{StringPrototypeSlice:C$,SymbolIterator:hTe,TypedArrayPrototypeSet:rT,Uint8Array:pTe}=ut(),{Buffer:tN}=require("buffer"),{inspect:TTe}=$r();b$.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){let r={data:e,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length}unshift(e){let r={data:e,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length}shift(){if(this.length===0)return;let e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return"";let r=this.head,n=""+r.data;for(;(r=r.next)!==null;)n+=e+r.data;return n}concat(e){if(this.length===0)return tN.alloc(0);let r=tN.allocUnsafe(e>>>0),n=this.head,i=0;for(;n;)rT(r,n.data,i),i+=n.data.length,n=n.next;return r}consume(e,r){let n=this.head.data;if(e<n.length){let i=n.slice(0,e);return this.head.data=n.slice(e),i}return e===n.length?this.shift():r?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[hTe](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let r="",n=this.head,i=0;do{let s=n.data;if(e>s.length)r+=s,e-=s.length;else{e===s.length?(r+=s,++i,n.next?this.head=n.next:this.head=this.tail=null):(r+=C$(s,0,e),this.head=n,n.data=C$(s,e));break}++i}while((n=n.next)!==null);return this.length-=i,r}_getBuffer(e){let r=tN.allocUnsafe(e),n=e,i=this.head,s=0;do{let o=i.data;if(e>o.length)rT(r,o,n-e),e-=o.length;else{e===o.length?(rT(r,o,n-e),++s,i.next?this.head=i.next:this.head=this.tail=null):(rT(r,new pTe(o.buffer,o.byteOffset,e),n-e),this.head=i,i.data=o.slice(e));break}++s}while((i=i.next)!==null);return this.length-=s,r}[Symbol.for("nodejs.util.inspect.custom")](e,r){return TTe(this,{...r,depth:0,customInspect:!1})}}});var Rd=O((dUe,P$)=>{"use strict";var{MathFloor:STe,NumberIsInteger:RTe}=ut(),{validateInteger:ATe}=Fl(),{ERR_INVALID_ARG_VALUE:mTe}=Dr().codes,w$=16*1024,L$=16;function gTe(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function D$(t){return t?L$:w$}function _Te(t,e){ATe(e,"value",0),t?L$=e:w$=e}function ITe(t,e,r,n){let i=gTe(e,n,r);if(i!=null){if(!RTe(i)||i<0){let s=n?`options.${r}`:"options.highWaterMark";throw new mTe(s,i)}return STe(i)}return D$(t.objectMode)}P$.exports={getHighWaterMark:ITe,getDefaultHighWaterMark:D$,setDefaultHighWaterMark:_Te}});var rN=O((fUe,U$)=>{"use strict";var x$=je(),{PromisePrototypeThen:NTe,SymbolAsyncIterator:v$,SymbolIterator:M$}=ut(),{Buffer:OTe}=require("buffer"),{ERR_INVALID_ARG_TYPE:CTe,ERR_STREAM_NULL_VALUES:bTe}=Dr().codes;function yTe(t,e,r){let n;if(typeof e=="string"||e instanceof OTe)return new t({objectMode:!0,...r,read(){this.push(e),this.push(null)}});let i;if(e&&e[v$])i=!0,n=e[v$]();else if(e&&e[M$])i=!1,n=e[M$]();else throw new CTe("iterable",["Iterable"],e);let s=new t({objectMode:!0,highWaterMark:1,...r}),o=!1;s._read=function(){o||(o=!0,l())},s._destroy=function(c,u){NTe(a(c),()=>x$.nextTick(u,c),d=>x$.nextTick(u,d||c))};async function a(c){let u=c!=null,d=typeof n.throw=="function";if(u&&d){let{value:E,done:f}=await n.throw(c);if(await E,f)return}if(typeof n.return=="function"){let{value:E}=await n.return();await E}}async function l(){for(;;){try{let{value:c,done:u}=i?await n.next():n.next();if(u)s.push(null);else{let d=c&&typeof c.then=="function"?await c:c;if(d===null)throw o=!1,new bTe;if(s.push(d))continue;o=!1}}catch(c){s.destroy(c)}break}}return s}U$.exports=yTe});var md=O((EUe,ek)=>{"use strict";var Fn=je(),{ArrayPrototypeIndexOf:wTe,NumberIsInteger:LTe,NumberIsNaN:DTe,NumberParseInt:PTe,ObjectDefineProperties:uN,ObjectKeys:xTe,ObjectSetPrototypeOf:H$,Promise:G$,SafeSet:vTe,SymbolAsyncDispose:MTe,SymbolAsyncIterator:UTe,Symbol:BTe}=ut();ek.exports=ge;ge.ReadableState=oT;var{EventEmitter:FTe}=require("events"),{Stream:$s,prependListener:HTe}=eT(),{Buffer:nN}=require("buffer"),{addAbortSignal:GTe}=Sd(),W$=Qi(),Me=$r().debuglog("stream",t=>{Me=t}),WTe=y$(),$l=jo(),{getHighWaterMark:$Te,getDefaultHighWaterMark:kTe}=Rd(),{aggregateTwoErrors:B$,codes:{ERR_INVALID_ARG_TYPE:YTe,ERR_METHOD_NOT_IMPLEMENTED:VTe,ERR_OUT_OF_RANGE:qTe,ERR_STREAM_PUSH_AFTER_EOF:XTe,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:jTe},AbortError:zTe}=Dr(),{validateObject:KTe}=Fl(),zo=BTe("kPaused"),{StringDecoder:$$}=Nu(),JTe=rN();H$(ge.prototype,$s.prototype);H$(ge,$s);var iN=()=>{},{errorOrDestroy:Gl}=$l,Wl=1,QTe=2,k$=4,Ad=8,Y$=16,nT=32,iT=64,V$=128,ZTe=256,eSe=512,tSe=1024,lN=2048,cN=4096,rSe=8192,nSe=16384,iSe=32768,q$=65536,sSe=1<<17,oSe=1<<18;function $t(t){return{enumerable:!1,get(){return(this.state&t)!==0},set(e){e?this.state|=t:this.state&=~t}}}uN(oT.prototype,{objectMode:$t(Wl),ended:$t(QTe),endEmitted:$t(k$),reading:$t(Ad),constructed:$t(Y$),sync:$t(nT),needReadable:$t(iT),emittedReadable:$t(V$),readableListening:$t(ZTe),resumeScheduled:$t(eSe),errorEmitted:$t(tSe),emitClose:$t(lN),autoDestroy:$t(cN),destroyed:$t(rSe),closed:$t(nSe),closeEmitted:$t(iSe),multiAwaitDrain:$t(q$),readingMore:$t(sSe),dataEmitted:$t(oSe)});function oT(t,e,r){typeof r!="boolean"&&(r=e instanceof Ti()),this.state=lN|cN|Y$|nT,t&&t.objectMode&&(this.state|=Wl),r&&t&&t.readableObjectMode&&(this.state|=Wl),this.highWaterMark=t?$Te(this,t,"readableHighWaterMark",r):kTe(!1),this.buffer=new WTe,this.length=0,this.pipes=[],this.flowing=null,this[zo]=null,t&&t.emitClose===!1&&(this.state&=~lN),t&&t.autoDestroy===!1&&(this.state&=~cN),this.errored=null,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,t&&t.encoding&&(this.decoder=new $$(t.encoding),this.encoding=t.encoding)}function ge(t){if(!(this instanceof ge))return new ge(t);let e=this instanceof Ti();this._readableState=new oT(t,this,e),t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&!e&&GTe(t.signal,this)),$s.call(this,t),$l.construct(this,()=>{this._readableState.needReadable&&sT(this,this._readableState)})}ge.prototype.destroy=$l.destroy;ge.prototype._undestroy=$l.undestroy;ge.prototype._destroy=function(t,e){e(t)};ge.prototype[FTe.captureRejectionSymbol]=function(t){this.destroy(t)};ge.prototype[MTe]=function(){let t;return this.destroyed||(t=this.readableEnded?null:new zTe,this.destroy(t)),new G$((e,r)=>W$(this,n=>n&&n!==t?r(n):e(null)))};ge.prototype.push=function(t,e){return X$(this,t,e,!1)};ge.prototype.unshift=function(t,e){return X$(this,t,e,!0)};function X$(t,e,r,n){Me("readableAddChunk",e);let i=t._readableState,s;if((i.state&Wl)===0&&(typeof e=="string"?(r=r||i.defaultEncoding,i.encoding!==r&&(n&&i.encoding?e=nN.from(e,r).toString(i.encoding):(e=nN.from(e,r),r=""))):e instanceof nN?r="":$s._isUint8Array(e)?(e=$s._uint8ArrayToBuffer(e),r=""):e!=null&&(s=new YTe("chunk",["string","Buffer","Uint8Array"],e))),s)Gl(t,s);else if(e===null)i.state&=~Ad,cSe(t,i);else if((i.state&Wl)!==0||e&&e.length>0)if(n)if((i.state&k$)!==0)Gl(t,new jTe);else{if(i.destroyed||i.errored)return!1;sN(t,i,e,!0)}else if(i.ended)Gl(t,new XTe);else{if(i.destroyed||i.errored)return!1;i.state&=~Ad,i.decoder&&!r?(e=i.decoder.write(e),i.objectMode||e.length!==0?sN(t,i,e,!1):sT(t,i)):sN(t,i,e,!1)}else n||(i.state&=~Ad,sT(t,i));return!i.ended&&(i.length<i.highWaterMark||i.length===0)}function sN(t,e,r,n){e.flowing&&e.length===0&&!e.sync&&t.listenerCount("data")>0?((e.state&q$)!==0?e.awaitDrainWriters.clear():e.awaitDrainWriters=null,e.dataEmitted=!0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),(e.state&iT)!==0&&aT(t)),sT(t,e)}ge.prototype.isPaused=function(){let t=this._readableState;return t[zo]===!0||t.flowing===!1};ge.prototype.setEncoding=function(t){let e=new $$(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;let r=this._readableState.buffer,n="";for(let i of r)n+=e.write(i);return r.clear(),n!==""&&r.push(n),this._readableState.length=n.length,this};var aSe=1073741824;function lSe(t){if(t>aSe)throw new qTe("size","<= 1GiB",t);return t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++,t}function F$(t,e){return t<=0||e.length===0&&e.ended?0:(e.state&Wl)!==0?1:DTe(t)?e.flowing&&e.length?e.buffer.first().length:e.length:t<=e.length?t:e.ended?e.length:0}ge.prototype.read=function(t){Me("read",t),t===void 0?t=NaN:LTe(t)||(t=PTe(t,10));let e=this._readableState,r=t;if(t>e.highWaterMark&&(e.highWaterMark=lSe(t)),t!==0&&(e.state&=~V$),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return Me("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?oN(this):aT(this),null;if(t=F$(t,e),t===0&&e.ended)return e.length===0&&oN(this),null;let n=(e.state&iT)!==0;if(Me("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,Me("length less than watermark",n)),e.ended||e.reading||e.destroyed||e.errored||!e.constructed)n=!1,Me("reading, ended or constructing",n);else if(n){Me("do read"),e.state|=Ad|nT,e.length===0&&(e.state|=iT);try{this._read(e.highWaterMark)}catch(s){Gl(this,s)}e.state&=~nT,e.reading||(t=F$(r,e))}let i;return t>0?i=Q$(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.multiAwaitDrain?e.awaitDrainWriters.clear():e.awaitDrainWriters=null),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&oN(this)),i!==null&&!e.errorEmitted&&!e.closeEmitted&&(e.dataEmitted=!0,this.emit("data",i)),i};function cSe(t,e){if(Me("onEofChunk"),!e.ended){if(e.decoder){let r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?aT(t):(e.needReadable=!1,e.emittedReadable=!0,j$(t))}}function aT(t){let e=t._readableState;Me("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(Me("emitReadable",e.flowing),e.emittedReadable=!0,Fn.nextTick(j$,t))}function j$(t){let e=t._readableState;Me("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&!e.errored&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,K$(t)}function sT(t,e){!e.readingMore&&e.constructed&&(e.readingMore=!0,Fn.nextTick(uSe,t,e))}function uSe(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){let r=e.length;if(Me("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}ge.prototype._read=function(t){throw new VTe("_read()")};ge.prototype.pipe=function(t,e){let r=this,n=this._readableState;n.pipes.length===1&&(n.multiAwaitDrain||(n.multiAwaitDrain=!0,n.awaitDrainWriters=new vTe(n.awaitDrainWriters?[n.awaitDrainWriters]:[]))),n.pipes.push(t),Me("pipe count=%d opts=%j",n.pipes.length,e);let s=(!e||e.end!==!1)&&t!==Fn.stdout&&t!==Fn.stderr?a:S;n.endEmitted?Fn.nextTick(s):r.once("end",s),t.on("unpipe",o);function o(T,m){Me("onunpipe"),T===r&&m&&m.hasUnpiped===!1&&(m.hasUnpiped=!0,u())}function a(){Me("onend"),t.end()}let l,c=!1;function u(){Me("cleanup"),t.removeListener("close",p),t.removeListener("finish",h),l&&t.removeListener("drain",l),t.removeListener("error",f),t.removeListener("unpipe",o),r.removeListener("end",a),r.removeListener("end",S),r.removeListener("data",E),c=!0,l&&n.awaitDrainWriters&&(!t._writableState||t._writableState.needDrain)&&l()}function d(){c||(n.pipes.length===1&&n.pipes[0]===t?(Me("false write response, pause",0),n.awaitDrainWriters=t,n.multiAwaitDrain=!1):n.pipes.length>1&&n.pipes.includes(t)&&(Me("false write response, pause",n.awaitDrainWriters.size),n.awaitDrainWriters.add(t)),r.pause()),l||(l=dSe(r,t),t.on("drain",l))}r.on("data",E);function E(T){Me("ondata");let m=t.write(T);Me("dest.write",m),m===!1&&d()}function f(T){if(Me("onerror",T),S(),t.removeListener("error",f),t.listenerCount("error")===0){let m=t._writableState||t._readableState;m&&!m.errorEmitted?Gl(t,T):t.emit("error",T)}}HTe(t,"error",f);function p(){t.removeListener("finish",h),S()}t.once("close",p);function h(){Me("onfinish"),t.removeListener("close",p),S()}t.once("finish",h);function S(){Me("unpipe"),r.unpipe(t)}return t.emit("pipe",r),t.writableNeedDrain===!0?d():n.flowing||(Me("pipe resume"),r.resume()),t};function dSe(t,e){return function(){let n=t._readableState;n.awaitDrainWriters===e?(Me("pipeOnDrain",1),n.awaitDrainWriters=null):n.multiAwaitDrain&&(Me("pipeOnDrain",n.awaitDrainWriters.size),n.awaitDrainWriters.delete(e)),(!n.awaitDrainWriters||n.awaitDrainWriters.size===0)&&t.listenerCount("data")&&t.resume()}}ge.prototype.unpipe=function(t){let e=this._readableState,r={hasUnpiped:!1};if(e.pipes.length===0)return this;if(!t){let i=e.pipes;e.pipes=[],this.pause();for(let s=0;s<i.length;s++)i[s].emit("unpipe",this,{hasUnpiped:!1});return this}let n=wTe(e.pipes,t);return n===-1?this:(e.pipes.splice(n,1),e.pipes.length===0&&this.pause(),t.emit("unpipe",this,r),this)};ge.prototype.on=function(t,e){let r=$s.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,Me("on readable",n.length,n.reading),n.length?aT(this):n.reading||Fn.nextTick(fSe,this)),r};ge.prototype.addListener=ge.prototype.on;ge.prototype.removeListener=function(t,e){let r=$s.prototype.removeListener.call(this,t,e);return t==="readable"&&Fn.nextTick(z$,this),r};ge.prototype.off=ge.prototype.removeListener;ge.prototype.removeAllListeners=function(t){let e=$s.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&Fn.nextTick(z$,this),e};function z$(t){let e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&e[zo]===!1?e.flowing=!0:t.listenerCount("data")>0?t.resume():e.readableListening||(e.flowing=null)}function fSe(t){Me("readable nexttick read 0"),t.read(0)}ge.prototype.resume=function(){let t=this._readableState;return t.flowing||(Me("resume"),t.flowing=!t.readableListening,ESe(this,t)),t[zo]=!1,this};function ESe(t,e){e.resumeScheduled||(e.resumeScheduled=!0,Fn.nextTick(hSe,t,e))}function hSe(t,e){Me("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),K$(t),e.flowing&&!e.reading&&t.read(0)}ge.prototype.pause=function(){return Me("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Me("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[zo]=!0,this};function K$(t){let e=t._readableState;for(Me("flow",e.flowing);e.flowing&&t.read()!==null;);}ge.prototype.wrap=function(t){let e=!1;t.on("data",n=>{!this.push(n)&&t.pause&&(e=!0,t.pause())}),t.on("end",()=>{this.push(null)}),t.on("error",n=>{Gl(this,n)}),t.on("close",()=>{this.destroy()}),t.on("destroy",()=>{this.destroy()}),this._read=()=>{e&&t.resume&&(e=!1,t.resume())};let r=xTe(t);for(let n=1;n<r.length;n++){let i=r[n];this[i]===void 0&&typeof t[i]=="function"&&(this[i]=t[i].bind(t))}return this};ge.prototype[UTe]=function(){return J$(this)};ge.prototype.iterator=function(t){return t!==void 0&&KTe(t,"options"),J$(this,t)};function J$(t,e){typeof t.read!="function"&&(t=ge.wrap(t,{objectMode:!0}));let r=pSe(t,e);return r.stream=t,r}async function*pSe(t,e){let r=iN;function n(o){this===t?(r(),r=iN):r=o}t.on("readable",n);let i,s=W$(t,{writable:!1},o=>{i=o?B$(i,o):null,r(),r=iN});try{for(;;){let o=t.destroyed?null:t.read();if(o!==null)yield o;else{if(i)throw i;if(i===null)return;await new G$(n)}}}catch(o){throw i=B$(i,o),i}finally{(i||e?.destroyOnReturn!==!1)&&(i===void 0||t._readableState.autoDestroy)?$l.destroyer(t,null):(t.off("readable",n),s())}}uN(ge.prototype,{readable:{__proto__:null,get(){let t=this._readableState;return!!t&&t.readable!==!1&&!t.destroyed&&!t.errorEmitted&&!t.endEmitted},set(t){this._readableState&&(this._readableState.readable=!!t)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(t){this._readableState&&(this._readableState.destroyed=t)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}});uN(oT.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[zo]!==!1},set(t){this[zo]=!!t}}});ge._fromList=Q$;function Q$(t,e){if(e.length===0)return null;let r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function oN(t){let e=t._readableState;Me("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,Fn.nextTick(TSe,e,t))}function TSe(t,e){if(Me("endReadableNT",t.endEmitted,t.length),!t.errored&&!t.closeEmitted&&!t.endEmitted&&t.length===0){if(t.endEmitted=!0,e.emit("end"),e.writable&&e.allowHalfOpen===!1)Fn.nextTick(SSe,e);else if(t.autoDestroy){let r=e._writableState;(!r||r.autoDestroy&&(r.finished||r.writable===!1))&&e.destroy()}}}function SSe(t){t.writable&&!t.writableEnded&&!t.destroyed&&t.end()}ge.from=function(t,e){return JTe(ge,t,e)};var aN;function Z$(){return aN===void 0&&(aN={}),aN}ge.fromWeb=function(t,e){return Z$().newStreamReadableFromReadableStream(t,e)};ge.toWeb=function(t,e){return Z$().newReadableStreamFromStreamReadable(t,e)};ge.wrap=function(t,e){var r,n;return new ge({objectMode:(r=(n=t.readableObjectMode)!==null&&n!==void 0?n:t.objectMode)!==null&&r!==void 0?r:!0,...e,destroy(i,s){$l.destroyer(t,i),s(i)}}).wrap(t)}});var fT=O((hUe,fk)=>{"use strict";var Ko=je(),{ArrayPrototypeSlice:nk,Error:RSe,FunctionPrototypeSymbolHasInstance:ik,ObjectDefineProperty:sk,ObjectDefineProperties:ASe,ObjectSetPrototypeOf:ok,StringPrototypeToLowerCase:mSe,Symbol:gSe,SymbolHasInstance:_Se}=ut();fk.exports=St;St.WritableState=Id;var{EventEmitter:ISe}=require("events"),gd=eT().Stream,{Buffer:lT}=require("buffer"),dT=jo(),{addAbortSignal:NSe}=Sd(),{getHighWaterMark:OSe,getDefaultHighWaterMark:CSe}=Rd(),{ERR_INVALID_ARG_TYPE:bSe,ERR_METHOD_NOT_IMPLEMENTED:ySe,ERR_MULTIPLE_CALLBACK:ak,ERR_STREAM_CANNOT_PIPE:wSe,ERR_STREAM_DESTROYED:_d,ERR_STREAM_ALREADY_FINISHED:LSe,ERR_STREAM_NULL_VALUES:DSe,ERR_STREAM_WRITE_AFTER_END:PSe,ERR_UNKNOWN_ENCODING:lk}=Dr().codes,{errorOrDestroy:kl}=dT;ok(St.prototype,gd.prototype);ok(St,gd);function EN(){}var Yl=gSe("kOnFinished");function Id(t,e,r){typeof r!="boolean"&&(r=e instanceof Ti()),this.objectMode=!!(t&&t.objectMode),r&&(this.objectMode=this.objectMode||!!(t&&t.writableObjectMode)),this.highWaterMark=t?OSe(this,t,"writableHighWaterMark",r):CSe(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let n=!!(t&&t.decodeStrings===!1);this.decodeStrings=!n,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=vSe.bind(void 0,e),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,uT(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!t||t.emitClose!==!1,this.autoDestroy=!t||t.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[Yl]=[]}function uT(t){t.buffered=[],t.bufferedIndex=0,t.allBuffers=!0,t.allNoop=!0}Id.prototype.getBuffer=function(){return nk(this.buffered,this.bufferedIndex)};sk(Id.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function St(t){let e=this instanceof Ti();if(!e&&!ik(St,this))return new St(t);this._writableState=new Id(t,this,e),t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&NSe(t.signal,this)),gd.call(this,t),dT.construct(this,()=>{let r=this._writableState;r.writing||pN(this,r),TN(this,r)})}sk(St,_Se,{__proto__:null,value:function(t){return ik(this,t)?!0:this!==St?!1:t&&t._writableState instanceof Id}});St.prototype.pipe=function(){kl(this,new wSe)};function ck(t,e,r,n){let i=t._writableState;if(typeof r=="function")n=r,r=i.defaultEncoding;else{if(!r)r=i.defaultEncoding;else if(r!=="buffer"&&!lT.isEncoding(r))throw new lk(r);typeof n!="function"&&(n=EN)}if(e===null)throw new DSe;if(!i.objectMode)if(typeof e=="string")i.decodeStrings!==!1&&(e=lT.from(e,r),r="buffer");else if(e instanceof lT)r="buffer";else if(gd._isUint8Array(e))e=gd._uint8ArrayToBuffer(e),r="buffer";else throw new bSe("chunk",["string","Buffer","Uint8Array"],e);let s;return i.ending?s=new PSe:i.destroyed&&(s=new _d("write")),s?(Ko.nextTick(n,s),kl(t,s,!0),s):(i.pendingcb++,xSe(t,i,e,r,n))}St.prototype.write=function(t,e,r){return ck(this,t,e,r)===!0};St.prototype.cork=function(){this._writableState.corked++};St.prototype.uncork=function(){let t=this._writableState;t.corked&&(t.corked--,t.writing||pN(this,t))};St.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=mSe(e)),!lT.isEncoding(e))throw new lk(e);return this._writableState.defaultEncoding=e,this};function xSe(t,e,r,n,i){let s=e.objectMode?1:r.length;e.length+=s;let o=e.length<e.highWaterMark;return o||(e.needDrain=!0),e.writing||e.corked||e.errored||!e.constructed?(e.buffered.push({chunk:r,encoding:n,callback:i}),e.allBuffers&&n!=="buffer"&&(e.allBuffers=!1),e.allNoop&&i!==EN&&(e.allNoop=!1)):(e.writelen=s,e.writecb=i,e.writing=!0,e.sync=!0,t._write(r,n,e.onwrite),e.sync=!1),o&&!e.errored&&!e.destroyed}function tk(t,e,r,n,i,s,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new _d("write")):r?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function rk(t,e,r,n){--e.pendingcb,n(r),hN(e),kl(t,r)}function vSe(t,e){let r=t._writableState,n=r.sync,i=r.writecb;if(typeof i!="function"){kl(t,new ak);return}r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0,e?(e.stack,r.errored||(r.errored=e),t._readableState&&!t._readableState.errored&&(t._readableState.errored=e),n?Ko.nextTick(rk,t,r,e,i):rk(t,r,e,i)):(r.buffered.length>r.bufferedIndex&&pN(t,r),n?r.afterWriteTickInfo!==null&&r.afterWriteTickInfo.cb===i?r.afterWriteTickInfo.count++:(r.afterWriteTickInfo={count:1,cb:i,stream:t,state:r},Ko.nextTick(MSe,r.afterWriteTickInfo)):uk(t,r,1,i))}function MSe({stream:t,state:e,count:r,cb:n}){return e.afterWriteTickInfo=null,uk(t,e,r,n)}function uk(t,e,r,n){for(!e.ending&&!t.destroyed&&e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"));r-- >0;)e.pendingcb--,n();e.destroyed&&hN(e),TN(t,e)}function hN(t){if(t.writing)return;for(let i=t.bufferedIndex;i<t.buffered.length;++i){var e;let{chunk:s,callback:o}=t.buffered[i],a=t.objectMode?1:s.length;t.length-=a,o((e=t.errored)!==null&&e!==void 0?e:new _d("write"))}let r=t[Yl].splice(0);for(let i=0;i<r.length;i++){var n;r[i]((n=t.errored)!==null&&n!==void 0?n:new _d("end"))}uT(t)}function pN(t,e){if(e.corked||e.bufferProcessing||e.destroyed||!e.constructed)return;let{buffered:r,bufferedIndex:n,objectMode:i}=e,s=r.length-n;if(!s)return;let o=n;if(e.bufferProcessing=!0,s>1&&t._writev){e.pendingcb-=s-1;let a=e.allNoop?EN:c=>{for(let u=o;u<r.length;++u)r[u].callback(c)},l=e.allNoop&&o===0?r:nk(r,o);l.allBuffers=e.allBuffers,tk(t,e,!0,e.length,l,"",a),uT(e)}else{do{let{chunk:a,encoding:l,callback:c}=r[o];r[o++]=null;let u=i?1:a.length;tk(t,e,!1,u,a,l,c)}while(o<r.length&&!e.writing);o===r.length?uT(e):o>256?(r.splice(0,o),e.bufferedIndex=0):e.bufferedIndex=o}e.bufferProcessing=!1}St.prototype._write=function(t,e,r){if(this._writev)this._writev([{chunk:t,encoding:e}],r);else throw new ySe("_write()")};St.prototype._writev=null;St.prototype.end=function(t,e,r){let n=this._writableState;typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null);let i;if(t!=null){let s=ck(this,t,e);s instanceof RSe&&(i=s)}return n.corked&&(n.corked=1,this.uncork()),i||(!n.errored&&!n.ending?(n.ending=!0,TN(this,n,!0),n.ended=!0):n.finished?i=new LSe("end"):n.destroyed&&(i=new _d("end"))),typeof r=="function"&&(i||n.finished?Ko.nextTick(r,i):n[Yl].push(r)),this};function cT(t){return t.ending&&!t.destroyed&&t.constructed&&t.length===0&&!t.errored&&t.buffered.length===0&&!t.finished&&!t.writing&&!t.errorEmitted&&!t.closeEmitted}function USe(t,e){let r=!1;function n(i){if(r){kl(t,i??ak());return}if(r=!0,e.pendingcb--,i){let s=e[Yl].splice(0);for(let o=0;o<s.length;o++)s[o](i);kl(t,i,e.sync)}else cT(e)&&(e.prefinished=!0,t.emit("prefinish"),e.pendingcb++,Ko.nextTick(fN,t,e))}e.sync=!0,e.pendingcb++;try{t._final(n)}catch(i){n(i)}e.sync=!1}function BSe(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.finalCalled=!0,USe(t,e)):(e.prefinished=!0,t.emit("prefinish")))}function TN(t,e,r){cT(e)&&(BSe(t,e),e.pendingcb===0&&(r?(e.pendingcb++,Ko.nextTick((n,i)=>{cT(i)?fN(n,i):i.pendingcb--},t,e)):cT(e)&&(e.pendingcb++,fN(t,e))))}function fN(t,e){e.pendingcb--,e.finished=!0;let r=e[Yl].splice(0);for(let n=0;n<r.length;n++)r[n]();if(t.emit("finish"),e.autoDestroy){let n=t._readableState;(!n||n.autoDestroy&&(n.endEmitted||n.readable===!1))&&t.destroy()}}ASe(St.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(t){this._writableState&&(this._writableState.destroyed=t)}},writable:{__proto__:null,get(){let t=this._writableState;return!!t&&t.writable!==!1&&!t.destroyed&&!t.errored&&!t.ending&&!t.ended},set(t){this._writableState&&(this._writableState.writable=!!t)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let t=this._writableState;return t?!t.destroyed&&!t.ending&&t.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var FSe=dT.destroy;St.prototype.destroy=function(t,e){let r=this._writableState;return!r.destroyed&&(r.bufferedIndex<r.buffered.length||r[Yl].length)&&Ko.nextTick(hN,r),FSe.call(this,t,e),this};St.prototype._undestroy=dT.undestroy;St.prototype._destroy=function(t,e){e(t)};St.prototype[ISe.captureRejectionSymbol]=function(t){this.destroy(t)};var dN;function dk(){return dN===void 0&&(dN={}),dN}St.fromWeb=function(t,e){return dk().newStreamWritableFromWritableStream(t,e)};St.toWeb=function(t){return dk().newWritableStreamFromStreamWritable(t)}});var bk=O((pUe,Ck)=>{var SN=je(),HSe=require("buffer"),{isReadable:GSe,isWritable:WSe,isIterable:Ek,isNodeStream:$Se,isReadableNodeStream:hk,isWritableNodeStream:pk,isDuplexNodeStream:kSe,isReadableStream:Tk,isWritableStream:Sk}=hi(),Rk=Qi(),{AbortError:Nk,codes:{ERR_INVALID_ARG_TYPE:YSe,ERR_INVALID_RETURN_VALUE:Ak}}=Dr(),{destroyer:ql}=jo(),VSe=Ti(),Ok=md(),qSe=fT(),{createDeferredPromise:mk}=$r(),gk=rN(),_k=globalThis.Blob||HSe.Blob,XSe=typeof _k<"u"?function(e){return e instanceof _k}:function(e){return!1},jSe=globalThis.AbortController||wt().AbortController,{FunctionPrototypeCall:Ik}=ut(),ks=class extends VSe{constructor(e){super(e),e?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),e?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};Ck.exports=function t(e,r){if(kSe(e))return e;if(hk(e))return Vl({readable:e});if(pk(e))return Vl({writable:e});if($Se(e))return Vl({writable:!1,readable:!1});if(Tk(e))return Vl({readable:Ok.fromWeb(e)});if(Sk(e))return Vl({writable:qSe.fromWeb(e)});if(typeof e=="function"){let{value:i,write:s,final:o,destroy:a}=zSe(e);if(Ek(i))return gk(ks,i,{objectMode:!0,write:s,final:o,destroy:a});let l=i?.then;if(typeof l=="function"){let c,u=Ik(l,i,d=>{if(d!=null)throw new Ak("nully","body",d)},d=>{ql(c,d)});return c=new ks({objectMode:!0,readable:!1,write:s,final(d){o(async()=>{try{await u,SN.nextTick(d,null)}catch(E){SN.nextTick(d,E)}})},destroy:a})}throw new Ak("Iterable, AsyncIterable or AsyncFunction",r,i)}if(XSe(e))return t(e.arrayBuffer());if(Ek(e))return gk(ks,e,{objectMode:!0,writable:!1});if(Tk(e?.readable)&&Sk(e?.writable))return ks.fromWeb(e);if(typeof e?.writable=="object"||typeof e?.readable=="object"){let i=e!=null&&e.readable?hk(e?.readable)?e?.readable:t(e.readable):void 0,s=e!=null&&e.writable?pk(e?.writable)?e?.writable:t(e.writable):void 0;return Vl({readable:i,writable:s})}let n=e?.then;if(typeof n=="function"){let i;return Ik(n,e,s=>{s!=null&&i.push(s),i.push(null)},s=>{ql(i,s)}),i=new ks({objectMode:!0,writable:!1,read(){}})}throw new YSe(r,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],e)};function zSe(t){let{promise:e,resolve:r}=mk(),n=new jSe,i=n.signal;return{value:t((async function*(){for(;;){let o=e;e=null;let{chunk:a,done:l,cb:c}=await o;if(SN.nextTick(c),l)return;if(i.aborted)throw new Nk(void 0,{cause:i.reason});({promise:e,resolve:r}=mk()),yield a}})(),{signal:i}),write(o,a,l){let c=r;r=null,c({chunk:o,done:!1,cb:l})},final(o){let a=r;r=null,a({done:!0,cb:o})},destroy(o,a){n.abort(),a(o)}}}function Vl(t){let e=t.readable&&typeof t.readable.read!="function"?Ok.wrap(t.readable):t.readable,r=t.writable,n=!!GSe(e),i=!!WSe(r),s,o,a,l,c;function u(d){let E=l;l=null,E?E(d):d&&c.destroy(d)}return c=new ks({readableObjectMode:!!(e!=null&&e.readableObjectMode),writableObjectMode:!!(r!=null&&r.writableObjectMode),readable:n,writable:i}),i&&(Rk(r,d=>{i=!1,d&&ql(e,d),u(d)}),c._write=function(d,E,f){r.write(d,E)?f():s=f},c._final=function(d){r.end(),o=d},r.on("drain",function(){if(s){let d=s;s=null,d()}}),r.on("finish",function(){if(o){let d=o;o=null,d()}})),n&&(Rk(e,d=>{n=!1,d&&ql(e,d),u(d)}),e.on("readable",function(){if(a){let d=a;a=null,d()}}),e.on("end",function(){c.push(null)}),c._read=function(){for(;;){let d=e.read();if(d===null){a=c._read;return}if(!c.push(d))return}}),c._destroy=function(d,E){!d&&l!==null&&(d=new Nk),a=null,s=null,o=null,l===null?E(d):(l=E,ql(r,d),ql(e,d))},c}});var Ti=O((TUe,Lk)=>{"use strict";var{ObjectDefineProperties:KSe,ObjectGetOwnPropertyDescriptor:Zi,ObjectKeys:JSe,ObjectSetPrototypeOf:yk}=ut();Lk.exports=Hn;var mN=md(),_n=fT();yk(Hn.prototype,mN.prototype);yk(Hn,mN);{let t=JSe(_n.prototype);for(let e=0;e<t.length;e++){let r=t[e];Hn.prototype[r]||(Hn.prototype[r]=_n.prototype[r])}}function Hn(t){if(!(this instanceof Hn))return new Hn(t);mN.call(this,t),_n.call(this,t),t?(this.allowHalfOpen=t.allowHalfOpen!==!1,t.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),t.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}KSe(Hn.prototype,{writable:{__proto__:null,...Zi(_n.prototype,"writable")},writableHighWaterMark:{__proto__:null,...Zi(_n.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...Zi(_n.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...Zi(_n.prototype,"writableBuffer")},writableLength:{__proto__:null,...Zi(_n.prototype,"writableLength")},writableFinished:{__proto__:null,...Zi(_n.prototype,"writableFinished")},writableCorked:{__proto__:null,...Zi(_n.prototype,"writableCorked")},writableEnded:{__proto__:null,...Zi(_n.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...Zi(_n.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(t){this._readableState&&this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}});var RN;function wk(){return RN===void 0&&(RN={}),RN}Hn.fromWeb=function(t,e){return wk().newStreamDuplexFromReadableWritablePair(t,e)};Hn.toWeb=function(t){return wk().newReadableWritablePairFromDuplex(t)};var AN;Hn.from=function(t){return AN||(AN=bk()),AN(t,"body")}});var IN=O((SUe,Pk)=>{"use strict";var{ObjectSetPrototypeOf:Dk,Symbol:QSe}=ut();Pk.exports=es;var{ERR_METHOD_NOT_IMPLEMENTED:ZSe}=Dr().codes,_N=Ti(),{getHighWaterMark:eRe}=Rd();Dk(es.prototype,_N.prototype);Dk(es,_N);var Nd=QSe("kCallback");function es(t){if(!(this instanceof es))return new es(t);let e=t?eRe(this,t,"readableHighWaterMark",!0):null;e===0&&(t={...t,highWaterMark:null,readableHighWaterMark:e,writableHighWaterMark:t.writableHighWaterMark||0}),_N.call(this,t),this._readableState.sync=!1,this[Nd]=null,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",tRe)}function gN(t){typeof this._flush=="function"&&!this.destroyed?this._flush((e,r)=>{if(e){t?t(e):this.destroy(e);return}r!=null&&this.push(r),this.push(null),t&&t()}):(this.push(null),t&&t())}function tRe(){this._final!==gN&&gN.call(this)}es.prototype._final=gN;es.prototype._transform=function(t,e,r){throw new ZSe("_transform()")};es.prototype._write=function(t,e,r){let n=this._readableState,i=this._writableState,s=n.length;this._transform(t,e,(o,a)=>{if(o){r(o);return}a!=null&&this.push(a),i.ended||s===n.length||n.length<n.highWaterMark?r():this[Nd]=r})};es.prototype._read=function(){if(this[Nd]){let t=this[Nd];this[Nd]=null,t()}}});var ON=O((RUe,vk)=>{"use strict";var{ObjectSetPrototypeOf:xk}=ut();vk.exports=Xl;var NN=IN();xk(Xl.prototype,NN.prototype);xk(Xl,NN);function Xl(t){if(!(this instanceof Xl))return new Xl(t);NN.call(this,t)}Xl.prototype._transform=function(t,e,r){r(null,t)}});var TT=O((AUe,Hk)=>{var Od=je(),{ArrayIsArray:rRe,Promise:nRe,SymbolAsyncIterator:iRe,SymbolDispose:sRe}=ut(),pT=Qi(),{once:oRe}=$r(),aRe=jo(),Mk=Ti(),{aggregateTwoErrors:lRe,codes:{ERR_INVALID_ARG_TYPE:vN,ERR_INVALID_RETURN_VALUE:CN,ERR_MISSING_ARGS:cRe,ERR_STREAM_DESTROYED:uRe,ERR_STREAM_PREMATURE_CLOSE:dRe},AbortError:fRe}=Dr(),{validateFunction:ERe,validateAbortSignal:hRe}=Fl(),{isIterable:Jo,isReadable:bN,isReadableNodeStream:hT,isNodeStream:Uk,isTransformStream:jl,isWebStream:pRe,isReadableStream:yN,isReadableFinished:TRe}=hi(),SRe=globalThis.AbortController||wt().AbortController,wN,LN,DN;function Bk(t,e,r){let n=!1;t.on("close",()=>{n=!0});let i=pT(t,{readable:e,writable:r},s=>{n=!s});return{destroy:s=>{n||(n=!0,aRe.destroyer(t,s||new uRe("pipe")))},cleanup:i}}function RRe(t){return ERe(t[t.length-1],"streams[stream.length - 1]"),t.pop()}function PN(t){if(Jo(t))return t;if(hT(t))return ARe(t);throw new vN("val",["Readable","Iterable","AsyncIterable"],t)}async function*ARe(t){LN||(LN=md()),yield*LN.prototype[iRe].call(t)}async function ET(t,e,r,{end:n}){let i,s=null,o=c=>{if(c&&(i=c),s){let u=s;s=null,u()}},a=()=>new nRe((c,u)=>{i?u(i):s=()=>{i?u(i):c()}});e.on("drain",o);let l=pT(e,{readable:!1},o);try{e.writableNeedDrain&&await a();for await(let c of t)e.write(c)||await a();n&&(e.end(),await a()),r()}catch(c){r(i!==c?lRe(i,c):c)}finally{l(),e.off("drain",o)}}async function xN(t,e,r,{end:n}){jl(e)&&(e=e.writable);let i=e.getWriter();try{for await(let s of t)await i.ready,i.write(s).catch(()=>{});await i.ready,n&&await i.close(),r()}catch(s){try{await i.abort(s),r(s)}catch(o){r(o)}}}function mRe(...t){return Fk(t,oRe(RRe(t)))}function Fk(t,e,r){if(t.length===1&&rRe(t[0])&&(t=t[0]),t.length<2)throw new cRe("streams");let n=new SRe,i=n.signal,s=r?.signal,o=[];hRe(s,"options.signal");function a(){p(new fRe)}DN=DN||$r().addAbortListener;let l;s&&(l=DN(s,a));let c,u,d=[],E=0;function f(R){p(R,--E===0)}function p(R,A){var I;if(R&&(!c||c.code==="ERR_STREAM_PREMATURE_CLOSE")&&(c=R),!(!c&&!A)){for(;d.length;)d.shift()(c);(I=l)===null||I===void 0||I[sRe](),n.abort(),A&&(c||o.forEach(w=>w()),Od.nextTick(e,c,u))}}let h;for(let R=0;R<t.length;R++){let A=t[R],I=R<t.length-1,w=R>0,g=I||r?.end!==!1,L=R===t.length-1;if(Uk(A)){let y=function(P){P&&P.name!=="AbortError"&&P.code!=="ERR_STREAM_PREMATURE_CLOSE"&&f(P)};var m=y;if(g){let{destroy:P,cleanup:v}=Bk(A,I,w);d.push(P),bN(A)&&L&&o.push(v)}A.on("error",y),bN(A)&&L&&o.push(()=>{A.removeListener("error",y)})}if(R===0)if(typeof A=="function"){if(h=A({signal:i}),!Jo(h))throw new CN("Iterable, AsyncIterable or Stream","source",h)}else Jo(A)||hT(A)||jl(A)?h=A:h=Mk.from(A);else if(typeof A=="function"){if(jl(h)){var S;h=PN((S=h)===null||S===void 0?void 0:S.readable)}else h=PN(h);if(h=A(h,{signal:i}),I){if(!Jo(h,!0))throw new CN("AsyncIterable",`transform[${R-1}]`,h)}else{var T;wN||(wN=ON());let y=new wN({objectMode:!0}),P=(T=h)===null||T===void 0?void 0:T.then;if(typeof P=="function")E++,P.call(h,F=>{u=F,F!=null&&y.write(F),g&&y.end(),Od.nextTick(f)},F=>{y.destroy(F),Od.nextTick(f,F)});else if(Jo(h,!0))E++,ET(h,y,f,{end:g});else if(yN(h)||jl(h)){let F=h.readable||h;E++,ET(F,y,f,{end:g})}else throw new CN("AsyncIterable or Promise","destination",h);h=y;let{destroy:v,cleanup:B}=Bk(h,!1,!0);d.push(v),L&&o.push(B)}}else if(Uk(A)){if(hT(h)){E+=2;let y=gRe(h,A,f,{end:g});bN(A)&&L&&o.push(y)}else if(jl(h)||yN(h)){let y=h.readable||h;E++,ET(y,A,f,{end:g})}else if(Jo(h))E++,ET(h,A,f,{end:g});else throw new vN("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],h);h=A}else if(pRe(A)){if(hT(h))E++,xN(PN(h),A,f,{end:g});else if(yN(h)||Jo(h))E++,xN(h,A,f,{end:g});else if(jl(h))E++,xN(h.readable,A,f,{end:g});else throw new vN("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],h);h=A}else h=Mk.from(A)}return(i!=null&&i.aborted||s!=null&&s.aborted)&&Od.nextTick(a),h}function gRe(t,e,r,{end:n}){let i=!1;if(e.on("close",()=>{i||r(new dRe)}),t.pipe(e,{end:!1}),n){let o=function(){i=!0,e.end()};var s=o;TRe(t)?Od.nextTick(o):t.once("end",o)}else r();return pT(t,{readable:!0,writable:!1},o=>{let a=t._readableState;o&&o.code==="ERR_STREAM_PREMATURE_CLOSE"&&a&&a.ended&&!a.errored&&!a.errorEmitted?t.once("end",r).once("error",r):r(o)}),pT(e,{readable:!1,writable:!0},r)}Hk.exports={pipelineImpl:Fk,pipeline:mRe}});var UN=O((mUe,Vk)=>{"use strict";var{pipeline:_Re}=TT(),ST=Ti(),{destroyer:IRe}=jo(),{isNodeStream:RT,isReadable:Gk,isWritable:Wk,isWebStream:MN,isTransformStream:Qo,isWritableStream:$k,isReadableStream:kk}=hi(),{AbortError:NRe,codes:{ERR_INVALID_ARG_VALUE:Yk,ERR_MISSING_ARGS:ORe}}=Dr(),CRe=Qi();Vk.exports=function(...e){if(e.length===0)throw new ORe("streams");if(e.length===1)return ST.from(e[0]);let r=[...e];if(typeof e[0]=="function"&&(e[0]=ST.from(e[0])),typeof e[e.length-1]=="function"){let f=e.length-1;e[f]=ST.from(e[f])}for(let f=0;f<e.length;++f)if(!(!RT(e[f])&&!MN(e[f]))){if(f<e.length-1&&!(Gk(e[f])||kk(e[f])||Qo(e[f])))throw new Yk(`streams[${f}]`,r[f],"must be readable");if(f>0&&!(Wk(e[f])||$k(e[f])||Qo(e[f])))throw new Yk(`streams[${f}]`,r[f],"must be writable")}let n,i,s,o,a;function l(f){let p=o;o=null,p?p(f):f?a.destroy(f):!E&&!d&&a.destroy()}let c=e[0],u=_Re(e,l),d=!!(Wk(c)||$k(c)||Qo(c)),E=!!(Gk(u)||kk(u)||Qo(u));if(a=new ST({writableObjectMode:!!(c!=null&&c.writableObjectMode),readableObjectMode:!!(u!=null&&u.readableObjectMode),writable:d,readable:E}),d){if(RT(c))a._write=function(p,h,S){c.write(p,h)?S():n=S},a._final=function(p){c.end(),i=p},c.on("drain",function(){if(n){let p=n;n=null,p()}});else if(MN(c)){let h=(Qo(c)?c.writable:c).getWriter();a._write=async function(S,T,m){try{await h.ready,h.write(S).catch(()=>{}),m()}catch(R){m(R)}},a._final=async function(S){try{await h.ready,h.close().catch(()=>{}),i=S}catch(T){S(T)}}}let f=Qo(u)?u.readable:u;CRe(f,()=>{if(i){let p=i;i=null,p()}})}if(E){if(RT(u))u.on("readable",function(){if(s){let f=s;s=null,f()}}),u.on("end",function(){a.push(null)}),a._read=function(){for(;;){let f=u.read();if(f===null){s=a._read;return}if(!a.push(f))return}};else if(MN(u)){let p=(Qo(u)?u.readable:u).getReader();a._read=async function(){for(;;)try{let{value:h,done:S}=await p.read();if(!a.push(h))return;if(S){a.push(null);return}}catch{return}}}}return a._destroy=function(f,p){!f&&o!==null&&(f=new NRe),s=null,n=null,i=null,o===null?p(f):(o=p,RT(u)&&IRe(u,f))},a}});var tY=O((gUe,HN)=>{"use strict";var bRe=globalThis.AbortController||wt().AbortController,{codes:{ERR_INVALID_ARG_VALUE:yRe,ERR_INVALID_ARG_TYPE:Cd,ERR_MISSING_ARGS:wRe,ERR_OUT_OF_RANGE:LRe},AbortError:Si}=Dr(),{validateAbortSignal:Zo,validateInteger:qk,validateObject:ea}=Fl(),DRe=ut().Symbol("kWeak"),PRe=ut().Symbol("kResistStopPropagation"),{finished:xRe}=Qi(),vRe=UN(),{addAbortSignalNoValidate:MRe}=Sd(),{isWritable:URe,isNodeStream:BRe}=hi(),{deprecate:FRe}=$r(),{ArrayPrototypePush:HRe,Boolean:GRe,MathFloor:Xk,Number:WRe,NumberIsNaN:$Re,Promise:jk,PromiseReject:zk,PromiseResolve:kRe,PromisePrototypeThen:Kk,Symbol:Qk}=ut(),AT=Qk("kEmpty"),Jk=Qk("kEof");function YRe(t,e){if(e!=null&&ea(e,"options"),e?.signal!=null&&Zo(e.signal,"options.signal"),BRe(t)&&!URe(t))throw new yRe("stream",t,"must be writable");let r=vRe(this,t);return e!=null&&e.signal&&MRe(e.signal,r),r}function mT(t,e){if(typeof t!="function")throw new Cd("fn",["Function","AsyncFunction"],t);e!=null&&ea(e,"options"),e?.signal!=null&&Zo(e.signal,"options.signal");let r=1;e?.concurrency!=null&&(r=Xk(e.concurrency));let n=r-1;return e?.highWaterMark!=null&&(n=Xk(e.highWaterMark)),qk(r,"options.concurrency",1),qk(n,"options.highWaterMark",0),n+=r,async function*(){let s=$r().AbortSignalAny([e?.signal].filter(GRe)),o=this,a=[],l={signal:s},c,u,d=!1,E=0;function f(){d=!0,p()}function p(){E-=1,h()}function h(){u&&!d&&E<r&&a.length<n&&(u(),u=null)}async function S(){try{for await(let T of o){if(d)return;if(s.aborted)throw new Si;try{if(T=t(T,l),T===AT)continue;T=kRe(T)}catch(m){T=zk(m)}E+=1,Kk(T,p,f),a.push(T),c&&(c(),c=null),!d&&(a.length>=n||E>=r)&&await new jk(m=>{u=m})}a.push(Jk)}catch(T){let m=zk(T);Kk(m,p,f),a.push(m)}finally{d=!0,c&&(c(),c=null)}}S();try{for(;;){for(;a.length>0;){let T=await a[0];if(T===Jk)return;if(s.aborted)throw new Si;T!==AT&&(yield T),a.shift(),h()}await new jk(T=>{c=T})}}finally{d=!0,u&&(u(),u=null)}}.call(this)}function VRe(t=void 0){return t!=null&&ea(t,"options"),t?.signal!=null&&Zo(t.signal,"options.signal"),async function*(){let r=0;for await(let i of this){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new Si({cause:t.signal.reason});yield[r++,i]}}.call(this)}async function Zk(t,e=void 0){for await(let r of FN.call(this,t,e))return!0;return!1}async function qRe(t,e=void 0){if(typeof t!="function")throw new Cd("fn",["Function","AsyncFunction"],t);return!await Zk.call(this,async(...r)=>!await t(...r),e)}async function XRe(t,e){for await(let r of FN.call(this,t,e))return r}async function jRe(t,e){if(typeof t!="function")throw new Cd("fn",["Function","AsyncFunction"],t);async function r(n,i){return await t(n,i),AT}for await(let n of mT.call(this,r,e));}function FN(t,e){if(typeof t!="function")throw new Cd("fn",["Function","AsyncFunction"],t);async function r(n,i){return await t(n,i)?n:AT}return mT.call(this,r,e)}var BN=class extends wRe{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function zRe(t,e,r){var n;if(typeof t!="function")throw new Cd("reducer",["Function","AsyncFunction"],t);r!=null&&ea(r,"options"),r?.signal!=null&&Zo(r.signal,"options.signal");let i=arguments.length>1;if(r!=null&&(n=r.signal)!==null&&n!==void 0&&n.aborted){let c=new Si(void 0,{cause:r.signal.reason});throw this.once("error",()=>{}),await xRe(this.destroy(c)),c}let s=new bRe,o=s.signal;if(r!=null&&r.signal){let c={once:!0,[DRe]:this,[PRe]:!0};r.signal.addEventListener("abort",()=>s.abort(),c)}let a=!1;try{for await(let c of this){var l;if(a=!0,r!=null&&(l=r.signal)!==null&&l!==void 0&&l.aborted)throw new Si;i?e=await t(e,c,{signal:o}):(e=c,i=!0)}if(!a&&!i)throw new BN}finally{s.abort()}return e}async function KRe(t){t!=null&&ea(t,"options"),t?.signal!=null&&Zo(t.signal,"options.signal");let e=[];for await(let n of this){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new Si(void 0,{cause:t.signal.reason});HRe(e,n)}return e}function JRe(t,e){let r=mT.call(this,t,e);return async function*(){for await(let i of r)yield*i}.call(this)}function eY(t){if(t=WRe(t),$Re(t))return 0;if(t<0)throw new LRe("number",">= 0",t);return t}function QRe(t,e=void 0){return e!=null&&ea(e,"options"),e?.signal!=null&&Zo(e.signal,"options.signal"),t=eY(t),async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new Si;for await(let s of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new Si;t--<=0&&(yield s)}}.call(this)}function ZRe(t,e=void 0){return e!=null&&ea(e,"options"),e?.signal!=null&&Zo(e.signal,"options.signal"),t=eY(t),async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new Si;for await(let s of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new Si;if(t-- >0&&(yield s),t<=0)return}}.call(this)}HN.exports.streamReturningOperators={asIndexedPairs:FRe(VRe,"readable.asIndexedPairs will be removed in a future version."),drop:QRe,filter:FN,flatMap:JRe,map:mT,take:ZRe,compose:YRe};HN.exports.promiseReturningOperators={every:qRe,forEach:jRe,reduce:zRe,toArray:KRe,some:Zk,find:XRe}});var GN=O((_Ue,rY)=>{"use strict";var{ArrayPrototypePop:eAe,Promise:tAe}=ut(),{isIterable:rAe,isNodeStream:nAe,isWebStream:iAe}=hi(),{pipelineImpl:sAe}=TT(),{finished:oAe}=Qi();WN();function aAe(...t){return new tAe((e,r)=>{let n,i,s=t[t.length-1];if(s&&typeof s=="object"&&!nAe(s)&&!rAe(s)&&!iAe(s)){let o=eAe(t);n=o.signal,i=o.end}sAe(t,(o,a)=>{o?r(o):e(a)},{signal:n,end:i})})}rY.exports={finished:oAe,pipeline:aAe}});var WN=O((IUe,dY)=>{"use strict";var{Buffer:lAe}=require("buffer"),{ObjectDefineProperty:ts,ObjectKeys:sY,ReflectApply:oY}=ut(),{promisify:{custom:aY}}=$r(),{streamReturningOperators:nY,promiseReturningOperators:iY}=tY(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:lY}}=Dr(),cAe=UN(),{setDefaultHighWaterMark:uAe,getDefaultHighWaterMark:dAe}=Rd(),{pipeline:cY}=TT(),{destroyer:fAe}=jo(),uY=Qi(),$N=GN(),bd=hi(),st=dY.exports=eT().Stream;st.isDestroyed=bd.isDestroyed;st.isDisturbed=bd.isDisturbed;st.isErrored=bd.isErrored;st.isReadable=bd.isReadable;st.isWritable=bd.isWritable;st.Readable=md();for(let t of sY(nY)){let r=function(...n){if(new.target)throw lY();return st.Readable.from(oY(e,this,n))},e=nY[t];ts(r,"name",{__proto__:null,value:e.name}),ts(r,"length",{__proto__:null,value:e.length}),ts(st.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}for(let t of sY(iY)){let r=function(...n){if(new.target)throw lY();return oY(e,this,n)},e=iY[t];ts(r,"name",{__proto__:null,value:e.name}),ts(r,"length",{__proto__:null,value:e.length}),ts(st.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}st.Writable=fT();st.Duplex=Ti();st.Transform=IN();st.PassThrough=ON();st.pipeline=cY;var{addAbortSignal:EAe}=Sd();st.addAbortSignal=EAe;st.finished=uY;st.destroy=fAe;st.compose=cAe;st.setDefaultHighWaterMark=uAe;st.getDefaultHighWaterMark=dAe;ts(st,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return $N}});ts(cY,aY,{__proto__:null,enumerable:!0,get(){return $N.pipeline}});ts(uY,aY,{__proto__:null,enumerable:!0,get(){return $N.finished}});st.Stream=st;st._isUint8Array=function(e){return e instanceof Uint8Array};st._uint8ArrayToBuffer=function(e){return lAe.from(e.buffer,e.byteOffset,e.byteLength)}});var kN=O((NUe,Le)=>{"use strict";var kt=require("stream");if(kt&&process.env.READABLE_STREAM==="disable"){let t=kt.promises;Le.exports._uint8ArrayToBuffer=kt._uint8ArrayToBuffer,Le.exports._isUint8Array=kt._isUint8Array,Le.exports.isDisturbed=kt.isDisturbed,Le.exports.isErrored=kt.isErrored,Le.exports.isReadable=kt.isReadable,Le.exports.Readable=kt.Readable,Le.exports.Writable=kt.Writable,Le.exports.Duplex=kt.Duplex,Le.exports.Transform=kt.Transform,Le.exports.PassThrough=kt.PassThrough,Le.exports.addAbortSignal=kt.addAbortSignal,Le.exports.finished=kt.finished,Le.exports.destroy=kt.destroy,Le.exports.pipeline=kt.pipeline,Le.exports.compose=kt.compose,Object.defineProperty(kt,"promises",{configurable:!0,enumerable:!0,get(){return t}}),Le.exports.Stream=kt.Stream}else{let t=WN(),e=GN(),r=t.Readable.destroy;Le.exports=t.Readable,Le.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,Le.exports._isUint8Array=t._isUint8Array,Le.exports.isDisturbed=t.isDisturbed,Le.exports.isErrored=t.isErrored,Le.exports.isReadable=t.isReadable,Le.exports.Readable=t.Readable,Le.exports.Writable=t.Writable,Le.exports.Duplex=t.Duplex,Le.exports.Transform=t.Transform,Le.exports.PassThrough=t.PassThrough,Le.exports.addAbortSignal=t.addAbortSignal,Le.exports.finished=t.finished,Le.exports.destroy=t.destroy,Le.exports.destroy=r,Le.exports.pipeline=t.pipeline,Le.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return e}}),Le.exports.Stream=t.Stream}Le.exports.default=Le.exports});var YN=O((CUe,fY)=>{var OUe=require("stream").Stream,hAe=kN().PassThrough,pAe=yE(),TAe=fY.exports={};TAe.normalizeInputSource=function(t){if(t===null)return Buffer.alloc(0);if(typeof t=="string")return Buffer.from(t);if(pAe(t)&&!t._readableState){var e=new hAe;return t.pipe(e),e}return t}});var qN=O((bUe,EY)=>{var SAe=require("util").inherits,RAe=yE(),VN=kN().Transform,AAe=Yp(),mAe=YN(),tn=EY.exports=function(t){if(!(this instanceof tn))return new tn(t);VN.call(this,t),this.offset=0,this._archive={finish:!1,finished:!1,processing:!1}};SAe(tn,VN);tn.prototype._appendBuffer=function(t,e,r){};tn.prototype._appendStream=function(t,e,r){};tn.prototype._emitErrorCallback=function(t){t&&this.emit("error",t)};tn.prototype._finish=function(t){};tn.prototype._normalizeEntry=function(t){};tn.prototype._transform=function(t,e,r){r(null,t)};tn.prototype.entry=function(t,e,r){if(e=e||null,typeof r!="function"&&(r=this._emitErrorCallback.bind(this)),!(t instanceof AAe)){r(new Error("not a valid instance of ArchiveEntry"));return}if(this._archive.finish||this._archive.finished){r(new Error("unacceptable entry after finish"));return}if(this._archive.processing){r(new Error("already processing an entry"));return}if(this._archive.processing=!0,this._normalizeEntry(t),this._entry=t,e=mAe.normalizeInputSource(e),Buffer.isBuffer(e))this._appendBuffer(t,e,r);else if(RAe(e))this._appendStream(t,e,r);else{this._archive.processing=!1,r(new Error("input source must be valid Stream or Buffer instance"));return}return this};tn.prototype.finish=function(){if(this._archive.processing){this._archive.finish=!0;return}this._finish()};tn.prototype.getBytesWritten=function(){return this.offset};tn.prototype.write=function(t,e){return t&&(this.offset+=t.length),VN.prototype.write.call(this,t,e)}});var gT=O(XN=>{var hY;(function(t){typeof DO_NOT_EXPORT_CRC>"u"?typeof XN=="object"?t(XN):typeof define=="function"&&define.amd?define(function(){var e={};return t(e),e}):t(hY={}):t(hY={})})(function(t){t.version="1.2.2";function e(){for(var g=0,L=new Array(256),y=0;y!=256;++y)g=y,g=g&1?-306674912^g>>>1:g>>>1,g=g&1?-306674912^g>>>1:g>>>1,g=g&1?-306674912^g>>>1:g>>>1,g=g&1?-306674912^g>>>1:g>>>1,g=g&1?-306674912^g>>>1:g>>>1,g=g&1?-306674912^g>>>1:g>>>1,g=g&1?-306674912^g>>>1:g>>>1,g=g&1?-306674912^g>>>1:g>>>1,L[y]=g;return typeof Int32Array<"u"?new Int32Array(L):L}var r=e();function n(g){var L=0,y=0,P=0,v=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(P=0;P!=256;++P)v[P]=g[P];for(P=0;P!=256;++P)for(y=g[P],L=256+P;L<4096;L+=256)y=v[L]=y>>>8^g[y&255];var B=[];for(P=1;P!=16;++P)B[P-1]=typeof Int32Array<"u"?v.subarray(P*256,P*256+256):v.slice(P*256,P*256+256);return B}var i=n(r),s=i[0],o=i[1],a=i[2],l=i[3],c=i[4],u=i[5],d=i[6],E=i[7],f=i[8],p=i[9],h=i[10],S=i[11],T=i[12],m=i[13],R=i[14];function A(g,L){for(var y=L^-1,P=0,v=g.length;P<v;)y=y>>>8^r[(y^g.charCodeAt(P++))&255];return~y}function I(g,L){for(var y=L^-1,P=g.length-15,v=0;v<P;)y=R[g[v++]^y&255]^m[g[v++]^y>>8&255]^T[g[v++]^y>>16&255]^S[g[v++]^y>>>24]^h[g[v++]]^p[g[v++]]^f[g[v++]]^E[g[v++]]^d[g[v++]]^u[g[v++]]^c[g[v++]]^l[g[v++]]^a[g[v++]]^o[g[v++]]^s[g[v++]]^r[g[v++]];for(P+=15;v<P;)y=y>>>8^r[(y^g[v++])&255];return~y}function w(g,L){for(var y=L^-1,P=0,v=g.length,B=0,F=0;P<v;)B=g.charCodeAt(P++),B<128?y=y>>>8^r[(y^B)&255]:B<2048?(y=y>>>8^r[(y^(192|B>>6&31))&255],y=y>>>8^r[(y^(128|B&63))&255]):B>=55296&&B<57344?(B=(B&1023)+64,F=g.charCodeAt(P++)&1023,y=y>>>8^r[(y^(240|B>>8&7))&255],y=y>>>8^r[(y^(128|B>>2&63))&255],y=y>>>8^r[(y^(128|F>>6&15|(B&3)<<4))&255],y=y>>>8^r[(y^(128|F&63))&255]):(y=y>>>8^r[(y^(224|B>>12&15))&255],y=y>>>8^r[(y^(128|B>>6&63))&255],y=y>>>8^r[(y^(128|B&63))&255]);return~y}t.table=r,t.bstr=A,t.buf=I,t.str=w})});var dt=O((wUe,pY)=>{"use strict";var jN=class extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError(`Expected input to be an Array, got ${typeof e}`);let r="";for(let n=0;n<e.length;n++)r+=`    ${e[n].stack}
`;super(r),this.name="AggregateError",this.errors=e}};pY.exports={AggregateError:jN,ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,e){return t.includes(e)},ArrayPrototypeIndexOf(t,e){return t.indexOf(e)},ArrayPrototypeJoin(t,e){return t.join(e)},ArrayPrototypeMap(t,e){return t.map(e)},ArrayPrototypePop(t,e){return t.pop(e)},ArrayPrototypePush(t,e){return t.push(e)},ArrayPrototypeSlice(t,e,r){return t.slice(e,r)},Error,FunctionPrototypeCall(t,e,...r){return t.call(e,...r)},FunctionPrototypeSymbolHasInstance(t,e){return Function.prototype[Symbol.hasInstance].call(t,e)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,e){return Object.defineProperties(t,e)},ObjectDefineProperty(t,e,r){return Object.defineProperty(t,e,r)},ObjectGetOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,e){return Object.setPrototypeOf(t,e)},Promise,PromisePrototypeCatch(t,e){return t.catch(e)},PromisePrototypeThen(t,e,r){return t.then(e,r)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,e){return t.test(e)},SafeSet:Set,String,StringPrototypeSlice(t,e,r){return t.slice(e,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,e,r){return t.set(e,r)},Boolean,Uint8Array}});var zN=O((LUe,TY)=>{"use strict";TY.exports={format(t,...e){return t.replace(/%([sdifj])/g,function(...[r,n]){let i=e.shift();return n==="f"?i.toFixed(6):n==="j"?JSON.stringify(i):n==="s"&&typeof i=="object"?`${i.constructor!==Object?i.constructor.name:""} {}`.trim():i.toString()})},inspect(t){switch(typeof t){case"string":if(t.includes("'"))if(t.includes('"')){if(!t.includes("`")&&!t.includes("${"))return`\`${t}\``}else return`"${t}"`;return`'${t}'`;case"number":return isNaN(t)?"NaN":Object.is(t,-0)?String(t):t;case"bigint":return`${String(t)}n`;case"boolean":case"undefined":return String(t);case"object":return"{}"}}}});var xr=O((DUe,AY)=>{"use strict";var{format:gAe,inspect:_T}=zN(),{AggregateError:_Ae}=dt(),IAe=globalThis.AggregateError||_Ae,NAe=Symbol("kIsNodeError"),OAe=["string","function","number","object","Function","Object","boolean","bigint","symbol"],CAe=/^([A-Z][a-z0-9]*)+$/,bAe="__node_internal_",IT={};function ta(t,e){if(!t)throw new IT.ERR_INTERNAL_ASSERTION(e)}function SY(t){let e="",r=t.length,n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function yAe(t,e,r){if(typeof e=="function")return ta(e.length<=r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${e.length}).`),e(...r);let n=(e.match(/%[dfijoOs]/g)||[]).length;return ta(n===r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${n}).`),r.length===0?e:gAe(e,...r)}function mr(t,e,r){r||(r=Error);class n extends r{constructor(...s){super(yAe(t,e,s))}toString(){return`${this.name} [${t}]: ${this.message}`}}Object.defineProperties(n.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${t}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),n.prototype.code=t,n.prototype[NAe]=!0,IT[t]=n}function RY(t){let e=bAe+t.name;return Object.defineProperty(t,"name",{value:e}),t}function wAe(t,e){if(t&&e&&t!==e){if(Array.isArray(e.errors))return e.errors.push(t),e;let r=new IAe([e,t],e.message);return r.code=e.code,r}return t||e}var KN=class extends Error{constructor(e="The operation was aborted",r=void 0){if(r!==void 0&&typeof r!="object")throw new IT.ERR_INVALID_ARG_TYPE("options","Object",r);super(e,r),this.code="ABORT_ERR",this.name="AbortError"}};mr("ERR_ASSERTION","%s",Error);mr("ERR_INVALID_ARG_TYPE",(t,e,r)=>{ta(typeof t=="string","'name' must be a string"),Array.isArray(e)||(e=[e]);let n="The ";t.endsWith(" argument")?n+=`${t} `:n+=`"${t}" ${t.includes(".")?"property":"argument"} `,n+="must be ";let i=[],s=[],o=[];for(let l of e)ta(typeof l=="string","All expected entries have to be of type string"),OAe.includes(l)?i.push(l.toLowerCase()):CAe.test(l)?s.push(l):(ta(l!=="object",'The value "object" should be written as "Object"'),o.push(l));if(s.length>0){let l=i.indexOf("object");l!==-1&&(i.splice(i,l,1),s.push("Object"))}if(i.length>0){switch(i.length){case 1:n+=`of type ${i[0]}`;break;case 2:n+=`one of type ${i[0]} or ${i[1]}`;break;default:{let l=i.pop();n+=`one of type ${i.join(", ")}, or ${l}`}}(s.length>0||o.length>0)&&(n+=" or ")}if(s.length>0){switch(s.length){case 1:n+=`an instance of ${s[0]}`;break;case 2:n+=`an instance of ${s[0]} or ${s[1]}`;break;default:{let l=s.pop();n+=`an instance of ${s.join(", ")}, or ${l}`}}o.length>0&&(n+=" or ")}switch(o.length){case 0:break;case 1:o[0].toLowerCase()!==o[0]&&(n+="an "),n+=`${o[0]}`;break;case 2:n+=`one of ${o[0]} or ${o[1]}`;break;default:{let l=o.pop();n+=`one of ${o.join(", ")}, or ${l}`}}if(r==null)n+=`. Received ${r}`;else if(typeof r=="function"&&r.name)n+=`. Received function ${r.name}`;else if(typeof r=="object"){var a;if((a=r.constructor)!==null&&a!==void 0&&a.name)n+=`. Received an instance of ${r.constructor.name}`;else{let l=_T(r,{depth:-1});n+=`. Received ${l}`}}else{let l=_T(r,{colors:!1});l.length>25&&(l=`${l.slice(0,25)}...`),n+=`. Received type ${typeof r} (${l})`}return n},TypeError);mr("ERR_INVALID_ARG_VALUE",(t,e,r="is invalid")=>{let n=_T(e);return n.length>128&&(n=n.slice(0,128)+"..."),`The ${t.includes(".")?"property":"argument"} '${t}' ${r}. Received ${n}`},TypeError);mr("ERR_INVALID_RETURN_VALUE",(t,e,r)=>{var n;let i=r!=null&&(n=r.constructor)!==null&&n!==void 0&&n.name?`instance of ${r.constructor.name}`:`type ${typeof r}`;return`Expected ${t} to be returned from the "${e}" function but got ${i}.`},TypeError);mr("ERR_MISSING_ARGS",(...t)=>{ta(t.length>0,"At least one arg needs to be specified");let e,r=t.length;switch(t=(Array.isArray(t)?t:[t]).map(n=>`"${n}"`).join(" or "),r){case 1:e+=`The ${t[0]} argument`;break;case 2:e+=`The ${t[0]} and ${t[1]} arguments`;break;default:{let n=t.pop();e+=`The ${t.join(", ")}, and ${n} arguments`}break}return`${e} must be specified`},TypeError);mr("ERR_OUT_OF_RANGE",(t,e,r)=>{ta(e,'Missing "range" argument');let n;if(Number.isInteger(r)&&Math.abs(r)>2**32)n=SY(String(r));else if(typeof r=="bigint"){n=String(r);let i=BigInt(2)**BigInt(32);(r>i||r<-i)&&(n=SY(n)),n+="n"}else n=_T(r);return`The value of "${t}" is out of range. It must be ${e}. Received ${n}`},RangeError);mr("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);mr("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);mr("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);mr("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);mr("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);mr("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);mr("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);mr("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);mr("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);mr("ERR_STREAM_WRITE_AFTER_END","write after end",Error);mr("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);AY.exports={AbortError:KN,aggregateTwoErrors:RY(wAe),hideStackFrames:RY,codes:IT}});var kr=O((PUe,QN)=>{"use strict";var LAe=require("buffer"),{format:DAe,inspect:PAe}=zN(),{codes:{ERR_INVALID_ARG_TYPE:JN}}=xr(),{kResistStopPropagation:xAe,AggregateError:vAe,SymbolDispose:MAe}=dt(),UAe=globalThis.AbortSignal||wt().AbortSignal,BAe=globalThis.AbortController||wt().AbortController,FAe=Object.getPrototypeOf(async function(){}).constructor,mY=globalThis.Blob||LAe.Blob,HAe=typeof mY<"u"?function(e){return e instanceof mY}:function(e){return!1},gY=(t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new JN(e,"AbortSignal",t)},GAe=(t,e)=>{if(typeof t!="function")throw new JN(e,"Function",t)};QN.exports={AggregateError:vAe,kEmptyObject:Object.freeze({}),once(t){let e=!1;return function(...r){e||(e=!0,t.apply(this,r))}},createDeferredPromise:function(){let t,e;return{promise:new Promise((n,i)=>{t=n,e=i}),resolve:t,reject:e}},promisify(t){return new Promise((e,r)=>{t((n,...i)=>n?r(n):e(...i))})},debuglog(){return function(){}},format:DAe,inspect:PAe,types:{isAsyncFunction(t){return t instanceof FAe},isArrayBufferView(t){return ArrayBuffer.isView(t)}},isBlob:HAe,deprecate(t,e){return t},addAbortListener:require("events").addAbortListener||function(e,r){if(e===void 0)throw new JN("signal","AbortSignal",e);gY(e,"signal"),GAe(r,"listener");let n;return e.aborted?queueMicrotask(()=>r()):(e.addEventListener("abort",r,{__proto__:null,once:!0,[xAe]:!0}),n=()=>{e.removeEventListener("abort",r)}),{__proto__:null,[MAe](){var i;(i=n)===null||i===void 0||i()}}},AbortSignalAny:UAe.any||function(e){if(e.length===1)return e[0];let r=new BAe,n=()=>r.abort();return e.forEach(i=>{gY(i,"signals"),i.addEventListener("abort",n,{once:!0})}),r.signal.addEventListener("abort",()=>{e.forEach(i=>i.removeEventListener("abort",n))},{once:!0}),r.signal}};QN.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")});var Kl=O((xUe,DY)=>{"use strict";var{ArrayIsArray:eO,ArrayPrototypeIncludes:OY,ArrayPrototypeJoin:CY,ArrayPrototypeMap:WAe,NumberIsInteger:tO,NumberIsNaN:$Ae,NumberMAX_SAFE_INTEGER:kAe,NumberMIN_SAFE_INTEGER:YAe,NumberParseInt:VAe,ObjectPrototypeHasOwnProperty:qAe,RegExpPrototypeExec:bY,String:XAe,StringPrototypeToUpperCase:jAe,StringPrototypeTrim:zAe}=dt(),{hideStackFrames:In,codes:{ERR_SOCKET_BAD_PORT:KAe,ERR_INVALID_ARG_TYPE:vr,ERR_INVALID_ARG_VALUE:zl,ERR_OUT_OF_RANGE:ra,ERR_UNKNOWN_SIGNAL:_Y}}=xr(),{normalizeEncoding:JAe}=kr(),{isAsyncFunction:QAe,isArrayBufferView:ZAe}=kr().types,IY={};function eme(t){return t===(t|0)}function tme(t){return t===t>>>0}var rme=/^[0-7]+$/,nme="must be a 32-bit unsigned integer or an octal string";function ime(t,e,r){if(typeof t>"u"&&(t=r),typeof t=="string"){if(bY(rme,t)===null)throw new zl(e,t,nme);t=VAe(t,8)}return yY(t,e),t}var sme=In((t,e,r=YAe,n=kAe)=>{if(typeof t!="number")throw new vr(e,"number",t);if(!tO(t))throw new ra(e,"an integer",t);if(t<r||t>n)throw new ra(e,`>= ${r} && <= ${n}`,t)}),ome=In((t,e,r=-2147483648,n=2147483647)=>{if(typeof t!="number")throw new vr(e,"number",t);if(!tO(t))throw new ra(e,"an integer",t);if(t<r||t>n)throw new ra(e,`>= ${r} && <= ${n}`,t)}),yY=In((t,e,r=!1)=>{if(typeof t!="number")throw new vr(e,"number",t);if(!tO(t))throw new ra(e,"an integer",t);let n=r?1:0,i=4294967295;if(t<n||t>i)throw new ra(e,`>= ${n} && <= ${i}`,t)});function rO(t,e){if(typeof t!="string")throw new vr(e,"string",t)}function ame(t,e,r=void 0,n){if(typeof t!="number")throw new vr(e,"number",t);if(r!=null&&t<r||n!=null&&t>n||(r!=null||n!=null)&&$Ae(t))throw new ra(e,`${r!=null?`>= ${r}`:""}${r!=null&&n!=null?" && ":""}${n!=null?`<= ${n}`:""}`,t)}var lme=In((t,e,r)=>{if(!OY(r,t)){let i="must be one of: "+CY(WAe(r,s=>typeof s=="string"?`'${s}'`:XAe(s)),", ");throw new zl(e,t,i)}});function wY(t,e){if(typeof t!="boolean")throw new vr(e,"boolean",t)}function ZN(t,e,r){return t==null||!qAe(t,e)?r:t[e]}var cme=In((t,e,r=null)=>{let n=ZN(r,"allowArray",!1),i=ZN(r,"allowFunction",!1);if(!ZN(r,"nullable",!1)&&t===null||!n&&eO(t)||typeof t!="object"&&(!i||typeof t!="function"))throw new vr(e,"Object",t)}),ume=In((t,e)=>{if(t!=null&&typeof t!="object"&&typeof t!="function")throw new vr(e,"a dictionary",t)}),NT=In((t,e,r=0)=>{if(!eO(t))throw new vr(e,"Array",t);if(t.length<r){let n=`must be longer than ${r}`;throw new zl(e,t,n)}});function dme(t,e){NT(t,e);for(let r=0;r<t.length;r++)rO(t[r],`${e}[${r}]`)}function fme(t,e){NT(t,e);for(let r=0;r<t.length;r++)wY(t[r],`${e}[${r}]`)}function Eme(t,e){NT(t,e);for(let r=0;r<t.length;r++){let n=t[r],i=`${e}[${r}]`;if(n==null)throw new vr(i,"AbortSignal",n);LY(n,i)}}function hme(t,e="signal"){if(rO(t,e),IY[t]===void 0)throw IY[jAe(t)]!==void 0?new _Y(t+" (signals must use all capital letters)"):new _Y(t)}var pme=In((t,e="buffer")=>{if(!ZAe(t))throw new vr(e,["Buffer","TypedArray","DataView"],t)});function Tme(t,e){let r=JAe(e),n=t.length;if(r==="hex"&&n%2!==0)throw new zl("encoding",e,`is invalid for data of length ${n}`)}function Sme(t,e="Port",r=!0){if(typeof t!="number"&&typeof t!="string"||typeof t=="string"&&zAe(t).length===0||+t!==+t>>>0||t>65535||t===0&&!r)throw new KAe(e,t,r);return t|0}var LY=In((t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new vr(e,"AbortSignal",t)}),Rme=In((t,e)=>{if(typeof t!="function")throw new vr(e,"Function",t)}),Ame=In((t,e)=>{if(typeof t!="function"||QAe(t))throw new vr(e,"Function",t)}),mme=In((t,e)=>{if(t!==void 0)throw new vr(e,"undefined",t)});function gme(t,e,r){if(!OY(r,t))throw new vr(e,`('${CY(r,"|")}')`,t)}var _me=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function NY(t,e){if(typeof t>"u"||!bY(_me,t))throw new zl(e,t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function Ime(t){if(typeof t=="string")return NY(t,"hints"),t;if(eO(t)){let e=t.length,r="";if(e===0)return r;for(let n=0;n<e;n++){let i=t[n];NY(i,"hints"),r+=i,n!==e-1&&(r+=", ")}return r}throw new zl("hints",t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}DY.exports={isInt32:eme,isUint32:tme,parseFileMode:ime,validateArray:NT,validateStringArray:dme,validateBooleanArray:fme,validateAbortSignalArray:Eme,validateBoolean:wY,validateBuffer:pme,validateDictionary:ume,validateEncoding:Tme,validateFunction:Rme,validateInt32:ome,validateInteger:sme,validateNumber:ame,validateObject:cme,validateOneOf:lme,validatePlainFunction:Ame,validatePort:Sme,validateSignalName:hme,validateString:rO,validateUint32:yY,validateUndefined:mme,validateUnion:gme,validateAbortSignal:LY,validateLinkHeaderValue:Ime}});var Ai=O((vUe,qY)=>{"use strict";var{SymbolAsyncIterator:PY,SymbolIterator:xY,SymbolFor:na}=dt(),vY=na("nodejs.stream.destroyed"),MY=na("nodejs.stream.errored"),nO=na("nodejs.stream.readable"),iO=na("nodejs.stream.writable"),UY=na("nodejs.stream.disturbed"),Nme=na("nodejs.webstream.isClosedPromise"),Ome=na("nodejs.webstream.controllerErrorFunction");function OT(t,e=!1){var r;return!!(t&&typeof t.pipe=="function"&&typeof t.on=="function"&&(!e||typeof t.pause=="function"&&typeof t.resume=="function")&&(!t._writableState||((r=t._readableState)===null||r===void 0?void 0:r.readable)!==!1)&&(!t._writableState||t._readableState))}function CT(t){var e;return!!(t&&typeof t.write=="function"&&typeof t.on=="function"&&(!t._readableState||((e=t._writableState)===null||e===void 0?void 0:e.writable)!==!1))}function Cme(t){return!!(t&&typeof t.pipe=="function"&&t._readableState&&typeof t.on=="function"&&typeof t.write=="function")}function Ri(t){return t&&(t._readableState||t._writableState||typeof t.write=="function"&&typeof t.on=="function"||typeof t.pipe=="function"&&typeof t.on=="function")}function BY(t){return!!(t&&!Ri(t)&&typeof t.pipeThrough=="function"&&typeof t.getReader=="function"&&typeof t.cancel=="function")}function FY(t){return!!(t&&!Ri(t)&&typeof t.getWriter=="function"&&typeof t.abort=="function")}function HY(t){return!!(t&&!Ri(t)&&typeof t.readable=="object"&&typeof t.writable=="object")}function bme(t){return BY(t)||FY(t)||HY(t)}function yme(t,e){return t==null?!1:e===!0?typeof t[PY]=="function":e===!1?typeof t[xY]=="function":typeof t[PY]=="function"||typeof t[xY]=="function"}function bT(t){if(!Ri(t))return null;let e=t._writableState,r=t._readableState,n=e||r;return!!(t.destroyed||t[vY]||n!=null&&n.destroyed)}function GY(t){if(!CT(t))return null;if(t.writableEnded===!0)return!0;let e=t._writableState;return e!=null&&e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function wme(t,e){if(!CT(t))return null;if(t.writableFinished===!0)return!0;let r=t._writableState;return r!=null&&r.errored?!1:typeof r?.finished!="boolean"?null:!!(r.finished||e===!1&&r.ended===!0&&r.length===0)}function Lme(t){if(!OT(t))return null;if(t.readableEnded===!0)return!0;let e=t._readableState;return!e||e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function WY(t,e){if(!OT(t))return null;let r=t._readableState;return r!=null&&r.errored?!1:typeof r?.endEmitted!="boolean"?null:!!(r.endEmitted||e===!1&&r.ended===!0&&r.length===0)}function $Y(t){return t&&t[nO]!=null?t[nO]:typeof t?.readable!="boolean"?null:bT(t)?!1:OT(t)&&t.readable&&!WY(t)}function kY(t){return t&&t[iO]!=null?t[iO]:typeof t?.writable!="boolean"?null:bT(t)?!1:CT(t)&&t.writable&&!GY(t)}function Dme(t,e){return Ri(t)?bT(t)?!0:!(e?.readable!==!1&&$Y(t)||e?.writable!==!1&&kY(t)):null}function Pme(t){var e,r;return Ri(t)?t.writableErrored?t.writableErrored:(e=(r=t._writableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function xme(t){var e,r;return Ri(t)?t.readableErrored?t.readableErrored:(e=(r=t._readableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function vme(t){if(!Ri(t))return null;if(typeof t.closed=="boolean")return t.closed;let e=t._writableState,r=t._readableState;return typeof e?.closed=="boolean"||typeof r?.closed=="boolean"?e?.closed||r?.closed:typeof t._closed=="boolean"&&YY(t)?t._closed:null}function YY(t){return typeof t._closed=="boolean"&&typeof t._defaultKeepAlive=="boolean"&&typeof t._removedConnection=="boolean"&&typeof t._removedContLen=="boolean"}function VY(t){return typeof t._sent100=="boolean"&&YY(t)}function Mme(t){var e;return typeof t._consuming=="boolean"&&typeof t._dumped=="boolean"&&((e=t.req)===null||e===void 0?void 0:e.upgradeOrConnect)===void 0}function Ume(t){if(!Ri(t))return null;let e=t._writableState,r=t._readableState,n=e||r;return!n&&VY(t)||!!(n&&n.autoDestroy&&n.emitClose&&n.closed===!1)}function Bme(t){var e;return!!(t&&((e=t[UY])!==null&&e!==void 0?e:t.readableDidRead||t.readableAborted))}function Fme(t){var e,r,n,i,s,o,a,l,c,u;return!!(t&&((e=(r=(n=(i=(s=(o=t[MY])!==null&&o!==void 0?o:t.readableErrored)!==null&&s!==void 0?s:t.writableErrored)!==null&&i!==void 0?i:(a=t._readableState)===null||a===void 0?void 0:a.errorEmitted)!==null&&n!==void 0?n:(l=t._writableState)===null||l===void 0?void 0:l.errorEmitted)!==null&&r!==void 0?r:(c=t._readableState)===null||c===void 0?void 0:c.errored)!==null&&e!==void 0?e:!((u=t._writableState)===null||u===void 0)&&u.errored))}qY.exports={isDestroyed:bT,kIsDestroyed:vY,isDisturbed:Bme,kIsDisturbed:UY,isErrored:Fme,kIsErrored:MY,isReadable:$Y,kIsReadable:nO,kIsClosedPromise:Nme,kControllerErrorFunction:Ome,kIsWritable:iO,isClosed:vme,isDuplexNodeStream:Cme,isFinished:Dme,isIterable:yme,isReadableNodeStream:OT,isReadableStream:BY,isReadableEnded:Lme,isReadableFinished:WY,isReadableErrored:xme,isNodeStream:Ri,isWebStream:bme,isWritable:kY,isWritableNodeStream:CT,isWritableStream:FY,isWritableEnded:GY,isWritableFinished:wme,isWritableErrored:Pme,isServerRequest:Mme,isServerResponse:VY,willEmitClose:Ume,isTransformStream:HY}});var rs=O((MUe,cO)=>{"use strict";var Ys=je(),{AbortError:tV,codes:Hme}=xr(),{ERR_INVALID_ARG_TYPE:Gme,ERR_STREAM_PREMATURE_CLOSE:XY}=Hme,{kEmptyObject:oO,once:aO}=kr(),{validateAbortSignal:Wme,validateFunction:$me,validateObject:kme,validateBoolean:Yme}=Kl(),{Promise:Vme,PromisePrototypeThen:qme,SymbolDispose:rV}=dt(),{isClosed:Xme,isReadable:jY,isReadableNodeStream:sO,isReadableStream:jme,isReadableFinished:zY,isReadableErrored:KY,isWritable:JY,isWritableNodeStream:QY,isWritableStream:zme,isWritableFinished:ZY,isWritableErrored:eV,isNodeStream:Kme,willEmitClose:Jme,kIsClosedPromise:Qme}=Ai(),Jl;function Zme(t){return t.setHeader&&typeof t.abort=="function"}var lO=()=>{};function nV(t,e,r){var n,i;if(arguments.length===2?(r=e,e=oO):e==null?e=oO:kme(e,"options"),$me(r,"callback"),Wme(e.signal,"options.signal"),r=aO(r),jme(t)||zme(t))return ege(t,e,r);if(!Kme(t))throw new Gme("stream",["ReadableStream","WritableStream","Stream"],t);let s=(n=e.readable)!==null&&n!==void 0?n:sO(t),o=(i=e.writable)!==null&&i!==void 0?i:QY(t),a=t._writableState,l=t._readableState,c=()=>{t.writable||E()},u=Jme(t)&&sO(t)===s&&QY(t)===o,d=ZY(t,!1),E=()=>{d=!0,t.destroyed&&(u=!1),!(u&&(!t.readable||s))&&(!s||f)&&r.call(t)},f=zY(t,!1),p=()=>{f=!0,t.destroyed&&(u=!1),!(u&&(!t.writable||o))&&(!o||d)&&r.call(t)},h=I=>{r.call(t,I)},S=Xme(t),T=()=>{S=!0;let I=eV(t)||KY(t);if(I&&typeof I!="boolean")return r.call(t,I);if(s&&!f&&sO(t,!0)&&!zY(t,!1))return r.call(t,new XY);if(o&&!d&&!ZY(t,!1))return r.call(t,new XY);r.call(t)},m=()=>{S=!0;let I=eV(t)||KY(t);if(I&&typeof I!="boolean")return r.call(t,I);r.call(t)},R=()=>{t.req.on("finish",E)};Zme(t)?(t.on("complete",E),u||t.on("abort",T),t.req?R():t.on("request",R)):o&&!a&&(t.on("end",c),t.on("close",c)),!u&&typeof t.aborted=="boolean"&&t.on("aborted",T),t.on("end",p),t.on("finish",E),e.error!==!1&&t.on("error",h),t.on("close",T),S?Ys.nextTick(T):a!=null&&a.errorEmitted||l!=null&&l.errorEmitted?u||Ys.nextTick(m):(!s&&(!u||jY(t))&&(d||JY(t)===!1)||!o&&(!u||JY(t))&&(f||jY(t)===!1)||l&&t.req&&t.aborted)&&Ys.nextTick(m);let A=()=>{r=lO,t.removeListener("aborted",T),t.removeListener("complete",E),t.removeListener("abort",T),t.removeListener("request",R),t.req&&t.req.removeListener("finish",E),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",E),t.removeListener("end",p),t.removeListener("error",h),t.removeListener("close",T)};if(e.signal&&!S){let I=()=>{let w=r;A(),w.call(t,new tV(void 0,{cause:e.signal.reason}))};if(e.signal.aborted)Ys.nextTick(I);else{Jl=Jl||kr().addAbortListener;let w=Jl(e.signal,I),g=r;r=aO((...L)=>{w[rV](),g.apply(t,L)})}}return A}function ege(t,e,r){let n=!1,i=lO;if(e.signal)if(i=()=>{n=!0,r.call(t,new tV(void 0,{cause:e.signal.reason}))},e.signal.aborted)Ys.nextTick(i);else{Jl=Jl||kr().addAbortListener;let o=Jl(e.signal,i),a=r;r=aO((...l)=>{o[rV](),a.apply(t,l)})}let s=(...o)=>{n||Ys.nextTick(()=>r.apply(t,o))};return qme(t[Qme].promise,s,s),lO}function tge(t,e){var r;let n=!1;return e===null&&(e=oO),(r=e)!==null&&r!==void 0&&r.cleanup&&(Yme(e.cleanup,"cleanup"),n=e.cleanup),new Vme((i,s)=>{let o=nV(t,e,a=>{n&&o(),a?s(a):i()})})}cO.exports=nV;cO.exports.finished=tge});var ia=O((UUe,dV)=>{"use strict";var mi=je(),{aggregateTwoErrors:rge,codes:{ERR_MULTIPLE_CALLBACK:nge},AbortError:ige}=xr(),{Symbol:oV}=dt(),{kIsDestroyed:sge,isDestroyed:oge,isFinished:age,isServerRequest:lge}=Ai(),aV=oV("kDestroy"),uO=oV("kConstruct");function lV(t,e,r){t&&(t.stack,e&&!e.errored&&(e.errored=t),r&&!r.errored&&(r.errored=t))}function cge(t,e){let r=this._readableState,n=this._writableState,i=n||r;return n!=null&&n.destroyed||r!=null&&r.destroyed?(typeof e=="function"&&e(),this):(lV(t,n,r),n&&(n.destroyed=!0),r&&(r.destroyed=!0),i.constructed?iV(this,t,e):this.once(aV,function(s){iV(this,rge(s,t),e)}),this)}function iV(t,e,r){let n=!1;function i(s){if(n)return;n=!0;let o=t._readableState,a=t._writableState;lV(s,a,o),a&&(a.closed=!0),o&&(o.closed=!0),typeof r=="function"&&r(s),s?mi.nextTick(uge,t,s):mi.nextTick(cV,t)}try{t._destroy(e||null,i)}catch(s){i(s)}}function uge(t,e){dO(t,e),cV(t)}function cV(t){let e=t._readableState,r=t._writableState;r&&(r.closeEmitted=!0),e&&(e.closeEmitted=!0),(r!=null&&r.emitClose||e!=null&&e.emitClose)&&t.emit("close")}function dO(t,e){let r=t._readableState,n=t._writableState;n!=null&&n.errorEmitted||r!=null&&r.errorEmitted||(n&&(n.errorEmitted=!0),r&&(r.errorEmitted=!0),t.emit("error",e))}function dge(){let t=this._readableState,e=this._writableState;t&&(t.constructed=!0,t.closed=!1,t.closeEmitted=!1,t.destroyed=!1,t.errored=null,t.errorEmitted=!1,t.reading=!1,t.ended=t.readable===!1,t.endEmitted=t.readable===!1),e&&(e.constructed=!0,e.destroyed=!1,e.closed=!1,e.closeEmitted=!1,e.errored=null,e.errorEmitted=!1,e.finalCalled=!1,e.prefinished=!1,e.ended=e.writable===!1,e.ending=e.writable===!1,e.finished=e.writable===!1)}function fO(t,e,r){let n=t._readableState,i=t._writableState;if(i!=null&&i.destroyed||n!=null&&n.destroyed)return this;n!=null&&n.autoDestroy||i!=null&&i.autoDestroy?t.destroy(e):e&&(e.stack,i&&!i.errored&&(i.errored=e),n&&!n.errored&&(n.errored=e),r?mi.nextTick(dO,t,e):dO(t,e))}function fge(t,e){if(typeof t._construct!="function")return;let r=t._readableState,n=t._writableState;r&&(r.constructed=!1),n&&(n.constructed=!1),t.once(uO,e),!(t.listenerCount(uO)>1)&&mi.nextTick(Ege,t)}function Ege(t){let e=!1;function r(n){if(e){fO(t,n??new nge);return}e=!0;let i=t._readableState,s=t._writableState,o=s||i;i&&(i.constructed=!0),s&&(s.constructed=!0),o.destroyed?t.emit(aV,n):n?fO(t,n,!0):mi.nextTick(hge,t)}try{t._construct(n=>{mi.nextTick(r,n)})}catch(n){mi.nextTick(r,n)}}function hge(t){t.emit(uO)}function sV(t){return t?.setHeader&&typeof t.abort=="function"}function uV(t){t.emit("close")}function pge(t,e){t.emit("error",e),mi.nextTick(uV,t)}function Tge(t,e){!t||oge(t)||(!e&&!age(t)&&(e=new ige),lge(t)?(t.socket=null,t.destroy(e)):sV(t)?t.abort():sV(t.req)?t.req.abort():typeof t.destroy=="function"?t.destroy(e):typeof t.close=="function"?t.close():e?mi.nextTick(pge,t,e):mi.nextTick(uV,t),t.destroyed||(t[sge]=!0))}dV.exports={construct:fge,destroyer:Tge,destroy:cge,undestroy:dge,errorOrDestroy:fO}});var LT=O((BUe,EV)=>{"use strict";var{ArrayIsArray:Sge,ObjectSetPrototypeOf:fV}=dt(),{EventEmitter:yT}=require("events");function wT(t){yT.call(this,t)}fV(wT.prototype,yT.prototype);fV(wT,yT);wT.prototype.pipe=function(t,e){let r=this;function n(u){t.writable&&t.write(u)===!1&&r.pause&&r.pause()}r.on("data",n);function i(){r.readable&&r.resume&&r.resume()}t.on("drain",i),!t._isStdio&&(!e||e.end!==!1)&&(r.on("end",o),r.on("close",a));let s=!1;function o(){s||(s=!0,t.end())}function a(){s||(s=!0,typeof t.destroy=="function"&&t.destroy())}function l(u){c(),yT.listenerCount(this,"error")===0&&this.emit("error",u)}EO(r,"error",l),EO(t,"error",l);function c(){r.removeListener("data",n),t.removeListener("drain",i),r.removeListener("end",o),r.removeListener("close",a),r.removeListener("error",l),t.removeListener("error",l),r.removeListener("end",c),r.removeListener("close",c),t.removeListener("close",c)}return r.on("end",c),r.on("close",c),t.on("close",c),t.emit("pipe",r),t};function EO(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Sge(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}EV.exports={Stream:wT,prependListener:EO}});var yd=O((FUe,DT)=>{"use strict";var{SymbolDispose:Rge}=dt(),{AbortError:hV,codes:Age}=xr(),{isNodeStream:pV,isWebStream:mge,kControllerErrorFunction:gge}=Ai(),_ge=rs(),{ERR_INVALID_ARG_TYPE:TV}=Age,hO,Ige=(t,e)=>{if(typeof t!="object"||!("aborted"in t))throw new TV(e,"AbortSignal",t)};DT.exports.addAbortSignal=function(e,r){if(Ige(e,"signal"),!pV(r)&&!mge(r))throw new TV("stream",["ReadableStream","WritableStream","Stream"],r);return DT.exports.addAbortSignalNoValidate(e,r)};DT.exports.addAbortSignalNoValidate=function(t,e){if(typeof t!="object"||!("aborted"in t))return e;let r=pV(e)?()=>{e.destroy(new hV(void 0,{cause:t.reason}))}:()=>{e[gge](new hV(void 0,{cause:t.reason}))};if(t.aborted)r();else{hO=hO||kr().addAbortListener;let n=hO(t,r);_ge(e,n[Rge])}return e}});var AV=O((GUe,RV)=>{"use strict";var{StringPrototypeSlice:SV,SymbolIterator:Nge,TypedArrayPrototypeSet:PT,Uint8Array:Oge}=dt(),{Buffer:pO}=require("buffer"),{inspect:Cge}=kr();RV.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){let r={data:e,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length}unshift(e){let r={data:e,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length}shift(){if(this.length===0)return;let e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return"";let r=this.head,n=""+r.data;for(;(r=r.next)!==null;)n+=e+r.data;return n}concat(e){if(this.length===0)return pO.alloc(0);let r=pO.allocUnsafe(e>>>0),n=this.head,i=0;for(;n;)PT(r,n.data,i),i+=n.data.length,n=n.next;return r}consume(e,r){let n=this.head.data;if(e<n.length){let i=n.slice(0,e);return this.head.data=n.slice(e),i}return e===n.length?this.shift():r?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[Nge](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let r="",n=this.head,i=0;do{let s=n.data;if(e>s.length)r+=s,e-=s.length;else{e===s.length?(r+=s,++i,n.next?this.head=n.next:this.head=this.tail=null):(r+=SV(s,0,e),this.head=n,n.data=SV(s,e));break}++i}while((n=n.next)!==null);return this.length-=i,r}_getBuffer(e){let r=pO.allocUnsafe(e),n=e,i=this.head,s=0;do{let o=i.data;if(e>o.length)PT(r,o,n-e),e-=o.length;else{e===o.length?(PT(r,o,n-e),++s,i.next?this.head=i.next:this.head=this.tail=null):(PT(r,new Oge(o.buffer,o.byteOffset,e),n-e),this.head=i,i.data=o.slice(e));break}++s}while((i=i.next)!==null);return this.length-=s,r}[Symbol.for("nodejs.util.inspect.custom")](e,r){return Cge(this,{...r,depth:0,customInspect:!1})}}});var wd=O((WUe,IV)=>{"use strict";var{MathFloor:bge,NumberIsInteger:yge}=dt(),{validateInteger:wge}=Kl(),{ERR_INVALID_ARG_VALUE:Lge}=xr().codes,mV=16*1024,gV=16;function Dge(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function _V(t){return t?gV:mV}function Pge(t,e){wge(e,"value",0),t?gV=e:mV=e}function xge(t,e,r,n){let i=Dge(e,n,r);if(i!=null){if(!yge(i)||i<0){let s=n?`options.${r}`:"options.highWaterMark";throw new Lge(s,i)}return bge(i)}return _V(t.objectMode)}IV.exports={getHighWaterMark:xge,getDefaultHighWaterMark:_V,setDefaultHighWaterMark:Pge}});var TO=O(($Ue,bV)=>{"use strict";var NV=je(),{PromisePrototypeThen:vge,SymbolAsyncIterator:OV,SymbolIterator:CV}=dt(),{Buffer:Mge}=require("buffer"),{ERR_INVALID_ARG_TYPE:Uge,ERR_STREAM_NULL_VALUES:Bge}=xr().codes;function Fge(t,e,r){let n;if(typeof e=="string"||e instanceof Mge)return new t({objectMode:!0,...r,read(){this.push(e),this.push(null)}});let i;if(e&&e[OV])i=!0,n=e[OV]();else if(e&&e[CV])i=!1,n=e[CV]();else throw new Uge("iterable",["Iterable"],e);let s=new t({objectMode:!0,highWaterMark:1,...r}),o=!1;s._read=function(){o||(o=!0,l())},s._destroy=function(c,u){vge(a(c),()=>NV.nextTick(u,c),d=>NV.nextTick(u,d||c))};async function a(c){let u=c!=null,d=typeof n.throw=="function";if(u&&d){let{value:E,done:f}=await n.throw(c);if(await E,f)return}if(typeof n.return=="function"){let{value:E}=await n.return();await E}}async function l(){for(;;){try{let{value:c,done:u}=i?await n.next():n.next();if(u)s.push(null);else{let d=c&&typeof c.then=="function"?await c:c;if(d===null)throw o=!1,new Bge;if(s.push(d))continue;o=!1}}catch(c){s.destroy(c)}break}}return s}bV.exports=Fge});var Dd=O((kUe,VV)=>{"use strict";var Gn=je(),{ArrayPrototypeIndexOf:Hge,NumberIsInteger:Gge,NumberIsNaN:Wge,NumberParseInt:$ge,ObjectDefineProperties:NO,ObjectKeys:kge,ObjectSetPrototypeOf:LV,Promise:DV,SafeSet:Yge,SymbolAsyncDispose:Vge,SymbolAsyncIterator:qge,Symbol:Xge}=dt();VV.exports=_e;_e.ReadableState=UT;var{EventEmitter:jge}=require("events"),{Stream:Vs,prependListener:zge}=LT(),{Buffer:SO}=require("buffer"),{addAbortSignal:Kge}=yd(),PV=rs(),Ue=kr().debuglog("stream",t=>{Ue=t}),Jge=AV(),ec=ia(),{getHighWaterMark:Qge,getDefaultHighWaterMark:Zge}=wd(),{aggregateTwoErrors:yV,codes:{ERR_INVALID_ARG_TYPE:e_e,ERR_METHOD_NOT_IMPLEMENTED:t_e,ERR_OUT_OF_RANGE:r_e,ERR_STREAM_PUSH_AFTER_EOF:n_e,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:i_e},AbortError:s_e}=xr(),{validateObject:o_e}=Kl(),sa=Xge("kPaused"),{StringDecoder:xV}=Nu(),a_e=TO();LV(_e.prototype,Vs.prototype);LV(_e,Vs);var RO=()=>{},{errorOrDestroy:Ql}=ec,Zl=1,l_e=2,vV=4,Ld=8,MV=16,xT=32,vT=64,UV=128,c_e=256,u_e=512,d_e=1024,_O=2048,IO=4096,f_e=8192,E_e=16384,h_e=32768,BV=65536,p_e=1<<17,T_e=1<<18;function Yt(t){return{enumerable:!1,get(){return(this.state&t)!==0},set(e){e?this.state|=t:this.state&=~t}}}NO(UT.prototype,{objectMode:Yt(Zl),ended:Yt(l_e),endEmitted:Yt(vV),reading:Yt(Ld),constructed:Yt(MV),sync:Yt(xT),needReadable:Yt(vT),emittedReadable:Yt(UV),readableListening:Yt(c_e),resumeScheduled:Yt(u_e),errorEmitted:Yt(d_e),emitClose:Yt(_O),autoDestroy:Yt(IO),destroyed:Yt(f_e),closed:Yt(E_e),closeEmitted:Yt(h_e),multiAwaitDrain:Yt(BV),readingMore:Yt(p_e),dataEmitted:Yt(T_e)});function UT(t,e,r){typeof r!="boolean"&&(r=e instanceof gi()),this.state=_O|IO|MV|xT,t&&t.objectMode&&(this.state|=Zl),r&&t&&t.readableObjectMode&&(this.state|=Zl),this.highWaterMark=t?Qge(this,t,"readableHighWaterMark",r):Zge(!1),this.buffer=new Jge,this.length=0,this.pipes=[],this.flowing=null,this[sa]=null,t&&t.emitClose===!1&&(this.state&=~_O),t&&t.autoDestroy===!1&&(this.state&=~IO),this.errored=null,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,t&&t.encoding&&(this.decoder=new xV(t.encoding),this.encoding=t.encoding)}function _e(t){if(!(this instanceof _e))return new _e(t);let e=this instanceof gi();this._readableState=new UT(t,this,e),t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&!e&&Kge(t.signal,this)),Vs.call(this,t),ec.construct(this,()=>{this._readableState.needReadable&&MT(this,this._readableState)})}_e.prototype.destroy=ec.destroy;_e.prototype._undestroy=ec.undestroy;_e.prototype._destroy=function(t,e){e(t)};_e.prototype[jge.captureRejectionSymbol]=function(t){this.destroy(t)};_e.prototype[Vge]=function(){let t;return this.destroyed||(t=this.readableEnded?null:new s_e,this.destroy(t)),new DV((e,r)=>PV(this,n=>n&&n!==t?r(n):e(null)))};_e.prototype.push=function(t,e){return FV(this,t,e,!1)};_e.prototype.unshift=function(t,e){return FV(this,t,e,!0)};function FV(t,e,r,n){Ue("readableAddChunk",e);let i=t._readableState,s;if((i.state&Zl)===0&&(typeof e=="string"?(r=r||i.defaultEncoding,i.encoding!==r&&(n&&i.encoding?e=SO.from(e,r).toString(i.encoding):(e=SO.from(e,r),r=""))):e instanceof SO?r="":Vs._isUint8Array(e)?(e=Vs._uint8ArrayToBuffer(e),r=""):e!=null&&(s=new e_e("chunk",["string","Buffer","Uint8Array"],e))),s)Ql(t,s);else if(e===null)i.state&=~Ld,A_e(t,i);else if((i.state&Zl)!==0||e&&e.length>0)if(n)if((i.state&vV)!==0)Ql(t,new i_e);else{if(i.destroyed||i.errored)return!1;AO(t,i,e,!0)}else if(i.ended)Ql(t,new n_e);else{if(i.destroyed||i.errored)return!1;i.state&=~Ld,i.decoder&&!r?(e=i.decoder.write(e),i.objectMode||e.length!==0?AO(t,i,e,!1):MT(t,i)):AO(t,i,e,!1)}else n||(i.state&=~Ld,MT(t,i));return!i.ended&&(i.length<i.highWaterMark||i.length===0)}function AO(t,e,r,n){e.flowing&&e.length===0&&!e.sync&&t.listenerCount("data")>0?((e.state&BV)!==0?e.awaitDrainWriters.clear():e.awaitDrainWriters=null,e.dataEmitted=!0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),(e.state&vT)!==0&&BT(t)),MT(t,e)}_e.prototype.isPaused=function(){let t=this._readableState;return t[sa]===!0||t.flowing===!1};_e.prototype.setEncoding=function(t){let e=new xV(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;let r=this._readableState.buffer,n="";for(let i of r)n+=e.write(i);return r.clear(),n!==""&&r.push(n),this._readableState.length=n.length,this};var S_e=1073741824;function R_e(t){if(t>S_e)throw new r_e("size","<= 1GiB",t);return t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++,t}function wV(t,e){return t<=0||e.length===0&&e.ended?0:(e.state&Zl)!==0?1:Wge(t)?e.flowing&&e.length?e.buffer.first().length:e.length:t<=e.length?t:e.ended?e.length:0}_e.prototype.read=function(t){Ue("read",t),t===void 0?t=NaN:Gge(t)||(t=$ge(t,10));let e=this._readableState,r=t;if(t>e.highWaterMark&&(e.highWaterMark=R_e(t)),t!==0&&(e.state&=~UV),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return Ue("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?mO(this):BT(this),null;if(t=wV(t,e),t===0&&e.ended)return e.length===0&&mO(this),null;let n=(e.state&vT)!==0;if(Ue("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,Ue("length less than watermark",n)),e.ended||e.reading||e.destroyed||e.errored||!e.constructed)n=!1,Ue("reading, ended or constructing",n);else if(n){Ue("do read"),e.state|=Ld|xT,e.length===0&&(e.state|=vT);try{this._read(e.highWaterMark)}catch(s){Ql(this,s)}e.state&=~xT,e.reading||(t=wV(r,e))}let i;return t>0?i=kV(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.multiAwaitDrain?e.awaitDrainWriters.clear():e.awaitDrainWriters=null),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&mO(this)),i!==null&&!e.errorEmitted&&!e.closeEmitted&&(e.dataEmitted=!0,this.emit("data",i)),i};function A_e(t,e){if(Ue("onEofChunk"),!e.ended){if(e.decoder){let r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?BT(t):(e.needReadable=!1,e.emittedReadable=!0,HV(t))}}function BT(t){let e=t._readableState;Ue("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(Ue("emitReadable",e.flowing),e.emittedReadable=!0,Gn.nextTick(HV,t))}function HV(t){let e=t._readableState;Ue("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&!e.errored&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,WV(t)}function MT(t,e){!e.readingMore&&e.constructed&&(e.readingMore=!0,Gn.nextTick(m_e,t,e))}function m_e(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){let r=e.length;if(Ue("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}_e.prototype._read=function(t){throw new t_e("_read()")};_e.prototype.pipe=function(t,e){let r=this,n=this._readableState;n.pipes.length===1&&(n.multiAwaitDrain||(n.multiAwaitDrain=!0,n.awaitDrainWriters=new Yge(n.awaitDrainWriters?[n.awaitDrainWriters]:[]))),n.pipes.push(t),Ue("pipe count=%d opts=%j",n.pipes.length,e);let s=(!e||e.end!==!1)&&t!==Gn.stdout&&t!==Gn.stderr?a:S;n.endEmitted?Gn.nextTick(s):r.once("end",s),t.on("unpipe",o);function o(T,m){Ue("onunpipe"),T===r&&m&&m.hasUnpiped===!1&&(m.hasUnpiped=!0,u())}function a(){Ue("onend"),t.end()}let l,c=!1;function u(){Ue("cleanup"),t.removeListener("close",p),t.removeListener("finish",h),l&&t.removeListener("drain",l),t.removeListener("error",f),t.removeListener("unpipe",o),r.removeListener("end",a),r.removeListener("end",S),r.removeListener("data",E),c=!0,l&&n.awaitDrainWriters&&(!t._writableState||t._writableState.needDrain)&&l()}function d(){c||(n.pipes.length===1&&n.pipes[0]===t?(Ue("false write response, pause",0),n.awaitDrainWriters=t,n.multiAwaitDrain=!1):n.pipes.length>1&&n.pipes.includes(t)&&(Ue("false write response, pause",n.awaitDrainWriters.size),n.awaitDrainWriters.add(t)),r.pause()),l||(l=g_e(r,t),t.on("drain",l))}r.on("data",E);function E(T){Ue("ondata");let m=t.write(T);Ue("dest.write",m),m===!1&&d()}function f(T){if(Ue("onerror",T),S(),t.removeListener("error",f),t.listenerCount("error")===0){let m=t._writableState||t._readableState;m&&!m.errorEmitted?Ql(t,T):t.emit("error",T)}}zge(t,"error",f);function p(){t.removeListener("finish",h),S()}t.once("close",p);function h(){Ue("onfinish"),t.removeListener("close",p),S()}t.once("finish",h);function S(){Ue("unpipe"),r.unpipe(t)}return t.emit("pipe",r),t.writableNeedDrain===!0?d():n.flowing||(Ue("pipe resume"),r.resume()),t};function g_e(t,e){return function(){let n=t._readableState;n.awaitDrainWriters===e?(Ue("pipeOnDrain",1),n.awaitDrainWriters=null):n.multiAwaitDrain&&(Ue("pipeOnDrain",n.awaitDrainWriters.size),n.awaitDrainWriters.delete(e)),(!n.awaitDrainWriters||n.awaitDrainWriters.size===0)&&t.listenerCount("data")&&t.resume()}}_e.prototype.unpipe=function(t){let e=this._readableState,r={hasUnpiped:!1};if(e.pipes.length===0)return this;if(!t){let i=e.pipes;e.pipes=[],this.pause();for(let s=0;s<i.length;s++)i[s].emit("unpipe",this,{hasUnpiped:!1});return this}let n=Hge(e.pipes,t);return n===-1?this:(e.pipes.splice(n,1),e.pipes.length===0&&this.pause(),t.emit("unpipe",this,r),this)};_e.prototype.on=function(t,e){let r=Vs.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,Ue("on readable",n.length,n.reading),n.length?BT(this):n.reading||Gn.nextTick(__e,this)),r};_e.prototype.addListener=_e.prototype.on;_e.prototype.removeListener=function(t,e){let r=Vs.prototype.removeListener.call(this,t,e);return t==="readable"&&Gn.nextTick(GV,this),r};_e.prototype.off=_e.prototype.removeListener;_e.prototype.removeAllListeners=function(t){let e=Vs.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&Gn.nextTick(GV,this),e};function GV(t){let e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&e[sa]===!1?e.flowing=!0:t.listenerCount("data")>0?t.resume():e.readableListening||(e.flowing=null)}function __e(t){Ue("readable nexttick read 0"),t.read(0)}_e.prototype.resume=function(){let t=this._readableState;return t.flowing||(Ue("resume"),t.flowing=!t.readableListening,I_e(this,t)),t[sa]=!1,this};function I_e(t,e){e.resumeScheduled||(e.resumeScheduled=!0,Gn.nextTick(N_e,t,e))}function N_e(t,e){Ue("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),WV(t),e.flowing&&!e.reading&&t.read(0)}_e.prototype.pause=function(){return Ue("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Ue("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[sa]=!0,this};function WV(t){let e=t._readableState;for(Ue("flow",e.flowing);e.flowing&&t.read()!==null;);}_e.prototype.wrap=function(t){let e=!1;t.on("data",n=>{!this.push(n)&&t.pause&&(e=!0,t.pause())}),t.on("end",()=>{this.push(null)}),t.on("error",n=>{Ql(this,n)}),t.on("close",()=>{this.destroy()}),t.on("destroy",()=>{this.destroy()}),this._read=()=>{e&&t.resume&&(e=!1,t.resume())};let r=kge(t);for(let n=1;n<r.length;n++){let i=r[n];this[i]===void 0&&typeof t[i]=="function"&&(this[i]=t[i].bind(t))}return this};_e.prototype[qge]=function(){return $V(this)};_e.prototype.iterator=function(t){return t!==void 0&&o_e(t,"options"),$V(this,t)};function $V(t,e){typeof t.read!="function"&&(t=_e.wrap(t,{objectMode:!0}));let r=O_e(t,e);return r.stream=t,r}async function*O_e(t,e){let r=RO;function n(o){this===t?(r(),r=RO):r=o}t.on("readable",n);let i,s=PV(t,{writable:!1},o=>{i=o?yV(i,o):null,r(),r=RO});try{for(;;){let o=t.destroyed?null:t.read();if(o!==null)yield o;else{if(i)throw i;if(i===null)return;await new DV(n)}}}catch(o){throw i=yV(i,o),i}finally{(i||e?.destroyOnReturn!==!1)&&(i===void 0||t._readableState.autoDestroy)?ec.destroyer(t,null):(t.off("readable",n),s())}}NO(_e.prototype,{readable:{__proto__:null,get(){let t=this._readableState;return!!t&&t.readable!==!1&&!t.destroyed&&!t.errorEmitted&&!t.endEmitted},set(t){this._readableState&&(this._readableState.readable=!!t)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(t){this._readableState&&(this._readableState.destroyed=t)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}});NO(UT.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[sa]!==!1},set(t){this[sa]=!!t}}});_e._fromList=kV;function kV(t,e){if(e.length===0)return null;let r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function mO(t){let e=t._readableState;Ue("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,Gn.nextTick(C_e,e,t))}function C_e(t,e){if(Ue("endReadableNT",t.endEmitted,t.length),!t.errored&&!t.closeEmitted&&!t.endEmitted&&t.length===0){if(t.endEmitted=!0,e.emit("end"),e.writable&&e.allowHalfOpen===!1)Gn.nextTick(b_e,e);else if(t.autoDestroy){let r=e._writableState;(!r||r.autoDestroy&&(r.finished||r.writable===!1))&&e.destroy()}}}function b_e(t){t.writable&&!t.writableEnded&&!t.destroyed&&t.end()}_e.from=function(t,e){return a_e(_e,t,e)};var gO;function YV(){return gO===void 0&&(gO={}),gO}_e.fromWeb=function(t,e){return YV().newStreamReadableFromReadableStream(t,e)};_e.toWeb=function(t,e){return YV().newReadableStreamFromStreamReadable(t,e)};_e.wrap=function(t,e){var r,n;return new _e({objectMode:(r=(n=t.readableObjectMode)!==null&&n!==void 0?n:t.objectMode)!==null&&r!==void 0?r:!0,...e,destroy(i,s){ec.destroyer(t,i),s(i)}}).wrap(t)}});var $T=O((YUe,n2)=>{"use strict";var oa=je(),{ArrayPrototypeSlice:jV,Error:y_e,FunctionPrototypeSymbolHasInstance:zV,ObjectDefineProperty:KV,ObjectDefineProperties:w_e,ObjectSetPrototypeOf:JV,StringPrototypeToLowerCase:L_e,Symbol:D_e,SymbolHasInstance:P_e}=dt();n2.exports=Rt;Rt.WritableState=vd;var{EventEmitter:x_e}=require("events"),Pd=LT().Stream,{Buffer:FT}=require("buffer"),WT=ia(),{addAbortSignal:v_e}=yd(),{getHighWaterMark:M_e,getDefaultHighWaterMark:U_e}=wd(),{ERR_INVALID_ARG_TYPE:B_e,ERR_METHOD_NOT_IMPLEMENTED:F_e,ERR_MULTIPLE_CALLBACK:QV,ERR_STREAM_CANNOT_PIPE:H_e,ERR_STREAM_DESTROYED:xd,ERR_STREAM_ALREADY_FINISHED:G_e,ERR_STREAM_NULL_VALUES:W_e,ERR_STREAM_WRITE_AFTER_END:$_e,ERR_UNKNOWN_ENCODING:ZV}=xr().codes,{errorOrDestroy:tc}=WT;JV(Rt.prototype,Pd.prototype);JV(Rt,Pd);function bO(){}var rc=D_e("kOnFinished");function vd(t,e,r){typeof r!="boolean"&&(r=e instanceof gi()),this.objectMode=!!(t&&t.objectMode),r&&(this.objectMode=this.objectMode||!!(t&&t.writableObjectMode)),this.highWaterMark=t?M_e(this,t,"writableHighWaterMark",r):U_e(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let n=!!(t&&t.decodeStrings===!1);this.decodeStrings=!n,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=Y_e.bind(void 0,e),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,GT(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!t||t.emitClose!==!1,this.autoDestroy=!t||t.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[rc]=[]}function GT(t){t.buffered=[],t.bufferedIndex=0,t.allBuffers=!0,t.allNoop=!0}vd.prototype.getBuffer=function(){return jV(this.buffered,this.bufferedIndex)};KV(vd.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function Rt(t){let e=this instanceof gi();if(!e&&!zV(Rt,this))return new Rt(t);this._writableState=new vd(t,this,e),t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&v_e(t.signal,this)),Pd.call(this,t),WT.construct(this,()=>{let r=this._writableState;r.writing||wO(this,r),LO(this,r)})}KV(Rt,P_e,{__proto__:null,value:function(t){return zV(this,t)?!0:this!==Rt?!1:t&&t._writableState instanceof vd}});Rt.prototype.pipe=function(){tc(this,new H_e)};function e2(t,e,r,n){let i=t._writableState;if(typeof r=="function")n=r,r=i.defaultEncoding;else{if(!r)r=i.defaultEncoding;else if(r!=="buffer"&&!FT.isEncoding(r))throw new ZV(r);typeof n!="function"&&(n=bO)}if(e===null)throw new W_e;if(!i.objectMode)if(typeof e=="string")i.decodeStrings!==!1&&(e=FT.from(e,r),r="buffer");else if(e instanceof FT)r="buffer";else if(Pd._isUint8Array(e))e=Pd._uint8ArrayToBuffer(e),r="buffer";else throw new B_e("chunk",["string","Buffer","Uint8Array"],e);let s;return i.ending?s=new $_e:i.destroyed&&(s=new xd("write")),s?(oa.nextTick(n,s),tc(t,s,!0),s):(i.pendingcb++,k_e(t,i,e,r,n))}Rt.prototype.write=function(t,e,r){return e2(this,t,e,r)===!0};Rt.prototype.cork=function(){this._writableState.corked++};Rt.prototype.uncork=function(){let t=this._writableState;t.corked&&(t.corked--,t.writing||wO(this,t))};Rt.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=L_e(e)),!FT.isEncoding(e))throw new ZV(e);return this._writableState.defaultEncoding=e,this};function k_e(t,e,r,n,i){let s=e.objectMode?1:r.length;e.length+=s;let o=e.length<e.highWaterMark;return o||(e.needDrain=!0),e.writing||e.corked||e.errored||!e.constructed?(e.buffered.push({chunk:r,encoding:n,callback:i}),e.allBuffers&&n!=="buffer"&&(e.allBuffers=!1),e.allNoop&&i!==bO&&(e.allNoop=!1)):(e.writelen=s,e.writecb=i,e.writing=!0,e.sync=!0,t._write(r,n,e.onwrite),e.sync=!1),o&&!e.errored&&!e.destroyed}function qV(t,e,r,n,i,s,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new xd("write")):r?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function XV(t,e,r,n){--e.pendingcb,n(r),yO(e),tc(t,r)}function Y_e(t,e){let r=t._writableState,n=r.sync,i=r.writecb;if(typeof i!="function"){tc(t,new QV);return}r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0,e?(e.stack,r.errored||(r.errored=e),t._readableState&&!t._readableState.errored&&(t._readableState.errored=e),n?oa.nextTick(XV,t,r,e,i):XV(t,r,e,i)):(r.buffered.length>r.bufferedIndex&&wO(t,r),n?r.afterWriteTickInfo!==null&&r.afterWriteTickInfo.cb===i?r.afterWriteTickInfo.count++:(r.afterWriteTickInfo={count:1,cb:i,stream:t,state:r},oa.nextTick(V_e,r.afterWriteTickInfo)):t2(t,r,1,i))}function V_e({stream:t,state:e,count:r,cb:n}){return e.afterWriteTickInfo=null,t2(t,e,r,n)}function t2(t,e,r,n){for(!e.ending&&!t.destroyed&&e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"));r-- >0;)e.pendingcb--,n();e.destroyed&&yO(e),LO(t,e)}function yO(t){if(t.writing)return;for(let i=t.bufferedIndex;i<t.buffered.length;++i){var e;let{chunk:s,callback:o}=t.buffered[i],a=t.objectMode?1:s.length;t.length-=a,o((e=t.errored)!==null&&e!==void 0?e:new xd("write"))}let r=t[rc].splice(0);for(let i=0;i<r.length;i++){var n;r[i]((n=t.errored)!==null&&n!==void 0?n:new xd("end"))}GT(t)}function wO(t,e){if(e.corked||e.bufferProcessing||e.destroyed||!e.constructed)return;let{buffered:r,bufferedIndex:n,objectMode:i}=e,s=r.length-n;if(!s)return;let o=n;if(e.bufferProcessing=!0,s>1&&t._writev){e.pendingcb-=s-1;let a=e.allNoop?bO:c=>{for(let u=o;u<r.length;++u)r[u].callback(c)},l=e.allNoop&&o===0?r:jV(r,o);l.allBuffers=e.allBuffers,qV(t,e,!0,e.length,l,"",a),GT(e)}else{do{let{chunk:a,encoding:l,callback:c}=r[o];r[o++]=null;let u=i?1:a.length;qV(t,e,!1,u,a,l,c)}while(o<r.length&&!e.writing);o===r.length?GT(e):o>256?(r.splice(0,o),e.bufferedIndex=0):e.bufferedIndex=o}e.bufferProcessing=!1}Rt.prototype._write=function(t,e,r){if(this._writev)this._writev([{chunk:t,encoding:e}],r);else throw new F_e("_write()")};Rt.prototype._writev=null;Rt.prototype.end=function(t,e,r){let n=this._writableState;typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null);let i;if(t!=null){let s=e2(this,t,e);s instanceof y_e&&(i=s)}return n.corked&&(n.corked=1,this.uncork()),i||(!n.errored&&!n.ending?(n.ending=!0,LO(this,n,!0),n.ended=!0):n.finished?i=new G_e("end"):n.destroyed&&(i=new xd("end"))),typeof r=="function"&&(i||n.finished?oa.nextTick(r,i):n[rc].push(r)),this};function HT(t){return t.ending&&!t.destroyed&&t.constructed&&t.length===0&&!t.errored&&t.buffered.length===0&&!t.finished&&!t.writing&&!t.errorEmitted&&!t.closeEmitted}function q_e(t,e){let r=!1;function n(i){if(r){tc(t,i??QV());return}if(r=!0,e.pendingcb--,i){let s=e[rc].splice(0);for(let o=0;o<s.length;o++)s[o](i);tc(t,i,e.sync)}else HT(e)&&(e.prefinished=!0,t.emit("prefinish"),e.pendingcb++,oa.nextTick(CO,t,e))}e.sync=!0,e.pendingcb++;try{t._final(n)}catch(i){n(i)}e.sync=!1}function X_e(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.finalCalled=!0,q_e(t,e)):(e.prefinished=!0,t.emit("prefinish")))}function LO(t,e,r){HT(e)&&(X_e(t,e),e.pendingcb===0&&(r?(e.pendingcb++,oa.nextTick((n,i)=>{HT(i)?CO(n,i):i.pendingcb--},t,e)):HT(e)&&(e.pendingcb++,CO(t,e))))}function CO(t,e){e.pendingcb--,e.finished=!0;let r=e[rc].splice(0);for(let n=0;n<r.length;n++)r[n]();if(t.emit("finish"),e.autoDestroy){let n=t._readableState;(!n||n.autoDestroy&&(n.endEmitted||n.readable===!1))&&t.destroy()}}w_e(Rt.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(t){this._writableState&&(this._writableState.destroyed=t)}},writable:{__proto__:null,get(){let t=this._writableState;return!!t&&t.writable!==!1&&!t.destroyed&&!t.errored&&!t.ending&&!t.ended},set(t){this._writableState&&(this._writableState.writable=!!t)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let t=this._writableState;return t?!t.destroyed&&!t.ending&&t.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var j_e=WT.destroy;Rt.prototype.destroy=function(t,e){let r=this._writableState;return!r.destroyed&&(r.bufferedIndex<r.buffered.length||r[rc].length)&&oa.nextTick(yO,r),j_e.call(this,t,e),this};Rt.prototype._undestroy=WT.undestroy;Rt.prototype._destroy=function(t,e){e(t)};Rt.prototype[x_e.captureRejectionSymbol]=function(t){this.destroy(t)};var OO;function r2(){return OO===void 0&&(OO={}),OO}Rt.fromWeb=function(t,e){return r2().newStreamWritableFromWritableStream(t,e)};Rt.toWeb=function(t){return r2().newWritableStreamFromStreamWritable(t)}});var R2=O((VUe,S2)=>{var DO=je(),z_e=require("buffer"),{isReadable:K_e,isWritable:J_e,isIterable:i2,isNodeStream:Q_e,isReadableNodeStream:s2,isWritableNodeStream:o2,isDuplexNodeStream:Z_e,isReadableStream:a2,isWritableStream:l2}=Ai(),c2=rs(),{AbortError:p2,codes:{ERR_INVALID_ARG_TYPE:eIe,ERR_INVALID_RETURN_VALUE:u2}}=xr(),{destroyer:ic}=ia(),tIe=gi(),T2=Dd(),rIe=$T(),{createDeferredPromise:d2}=kr(),f2=TO(),E2=globalThis.Blob||z_e.Blob,nIe=typeof E2<"u"?function(e){return e instanceof E2}:function(e){return!1},iIe=globalThis.AbortController||wt().AbortController,{FunctionPrototypeCall:h2}=dt(),qs=class extends tIe{constructor(e){super(e),e?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),e?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};S2.exports=function t(e,r){if(Z_e(e))return e;if(s2(e))return nc({readable:e});if(o2(e))return nc({writable:e});if(Q_e(e))return nc({writable:!1,readable:!1});if(a2(e))return nc({readable:T2.fromWeb(e)});if(l2(e))return nc({writable:rIe.fromWeb(e)});if(typeof e=="function"){let{value:i,write:s,final:o,destroy:a}=sIe(e);if(i2(i))return f2(qs,i,{objectMode:!0,write:s,final:o,destroy:a});let l=i?.then;if(typeof l=="function"){let c,u=h2(l,i,d=>{if(d!=null)throw new u2("nully","body",d)},d=>{ic(c,d)});return c=new qs({objectMode:!0,readable:!1,write:s,final(d){o(async()=>{try{await u,DO.nextTick(d,null)}catch(E){DO.nextTick(d,E)}})},destroy:a})}throw new u2("Iterable, AsyncIterable or AsyncFunction",r,i)}if(nIe(e))return t(e.arrayBuffer());if(i2(e))return f2(qs,e,{objectMode:!0,writable:!1});if(a2(e?.readable)&&l2(e?.writable))return qs.fromWeb(e);if(typeof e?.writable=="object"||typeof e?.readable=="object"){let i=e!=null&&e.readable?s2(e?.readable)?e?.readable:t(e.readable):void 0,s=e!=null&&e.writable?o2(e?.writable)?e?.writable:t(e.writable):void 0;return nc({readable:i,writable:s})}let n=e?.then;if(typeof n=="function"){let i;return h2(n,e,s=>{s!=null&&i.push(s),i.push(null)},s=>{ic(i,s)}),i=new qs({objectMode:!0,writable:!1,read(){}})}throw new eIe(r,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],e)};function sIe(t){let{promise:e,resolve:r}=d2(),n=new iIe,i=n.signal;return{value:t((async function*(){for(;;){let o=e;e=null;let{chunk:a,done:l,cb:c}=await o;if(DO.nextTick(c),l)return;if(i.aborted)throw new p2(void 0,{cause:i.reason});({promise:e,resolve:r}=d2()),yield a}})(),{signal:i}),write(o,a,l){let c=r;r=null,c({chunk:o,done:!1,cb:l})},final(o){let a=r;r=null,a({done:!0,cb:o})},destroy(o,a){n.abort(),a(o)}}}function nc(t){let e=t.readable&&typeof t.readable.read!="function"?T2.wrap(t.readable):t.readable,r=t.writable,n=!!K_e(e),i=!!J_e(r),s,o,a,l,c;function u(d){let E=l;l=null,E?E(d):d&&c.destroy(d)}return c=new qs({readableObjectMode:!!(e!=null&&e.readableObjectMode),writableObjectMode:!!(r!=null&&r.writableObjectMode),readable:n,writable:i}),i&&(c2(r,d=>{i=!1,d&&ic(e,d),u(d)}),c._write=function(d,E,f){r.write(d,E)?f():s=f},c._final=function(d){r.end(),o=d},r.on("drain",function(){if(s){let d=s;s=null,d()}}),r.on("finish",function(){if(o){let d=o;o=null,d()}})),n&&(c2(e,d=>{n=!1,d&&ic(e,d),u(d)}),e.on("readable",function(){if(a){let d=a;a=null,d()}}),e.on("end",function(){c.push(null)}),c._read=function(){for(;;){let d=e.read();if(d===null){a=c._read;return}if(!c.push(d))return}}),c._destroy=function(d,E){!d&&l!==null&&(d=new p2),a=null,s=null,o=null,l===null?E(d):(l=E,ic(r,d),ic(e,d))},c}});var gi=O((qUe,g2)=>{"use strict";var{ObjectDefineProperties:oIe,ObjectGetOwnPropertyDescriptor:ns,ObjectKeys:aIe,ObjectSetPrototypeOf:A2}=dt();g2.exports=Wn;var vO=Dd(),Nn=$T();A2(Wn.prototype,vO.prototype);A2(Wn,vO);{let t=aIe(Nn.prototype);for(let e=0;e<t.length;e++){let r=t[e];Wn.prototype[r]||(Wn.prototype[r]=Nn.prototype[r])}}function Wn(t){if(!(this instanceof Wn))return new Wn(t);vO.call(this,t),Nn.call(this,t),t?(this.allowHalfOpen=t.allowHalfOpen!==!1,t.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),t.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}oIe(Wn.prototype,{writable:{__proto__:null,...ns(Nn.prototype,"writable")},writableHighWaterMark:{__proto__:null,...ns(Nn.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...ns(Nn.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...ns(Nn.prototype,"writableBuffer")},writableLength:{__proto__:null,...ns(Nn.prototype,"writableLength")},writableFinished:{__proto__:null,...ns(Nn.prototype,"writableFinished")},writableCorked:{__proto__:null,...ns(Nn.prototype,"writableCorked")},writableEnded:{__proto__:null,...ns(Nn.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...ns(Nn.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(t){this._readableState&&this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}});var PO;function m2(){return PO===void 0&&(PO={}),PO}Wn.fromWeb=function(t,e){return m2().newStreamDuplexFromReadableWritablePair(t,e)};Wn.toWeb=function(t){return m2().newReadableWritablePairFromDuplex(t)};var xO;Wn.from=function(t){return xO||(xO=R2()),xO(t,"body")}});var BO=O((XUe,I2)=>{"use strict";var{ObjectSetPrototypeOf:_2,Symbol:lIe}=dt();I2.exports=is;var{ERR_METHOD_NOT_IMPLEMENTED:cIe}=xr().codes,UO=gi(),{getHighWaterMark:uIe}=wd();_2(is.prototype,UO.prototype);_2(is,UO);var Md=lIe("kCallback");function is(t){if(!(this instanceof is))return new is(t);let e=t?uIe(this,t,"readableHighWaterMark",!0):null;e===0&&(t={...t,highWaterMark:null,readableHighWaterMark:e,writableHighWaterMark:t.writableHighWaterMark||0}),UO.call(this,t),this._readableState.sync=!1,this[Md]=null,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",dIe)}function MO(t){typeof this._flush=="function"&&!this.destroyed?this._flush((e,r)=>{if(e){t?t(e):this.destroy(e);return}r!=null&&this.push(r),this.push(null),t&&t()}):(this.push(null),t&&t())}function dIe(){this._final!==MO&&MO.call(this)}is.prototype._final=MO;is.prototype._transform=function(t,e,r){throw new cIe("_transform()")};is.prototype._write=function(t,e,r){let n=this._readableState,i=this._writableState,s=n.length;this._transform(t,e,(o,a)=>{if(o){r(o);return}a!=null&&this.push(a),i.ended||s===n.length||n.length<n.highWaterMark?r():this[Md]=r})};is.prototype._read=function(){if(this[Md]){let t=this[Md];this[Md]=null,t()}}});var HO=O((jUe,O2)=>{"use strict";var{ObjectSetPrototypeOf:N2}=dt();O2.exports=sc;var FO=BO();N2(sc.prototype,FO.prototype);N2(sc,FO);function sc(t){if(!(this instanceof sc))return new sc(t);FO.call(this,t)}sc.prototype._transform=function(t,e,r){r(null,t)}});var qT=O((zUe,L2)=>{var Ud=je(),{ArrayIsArray:fIe,Promise:EIe,SymbolAsyncIterator:hIe,SymbolDispose:pIe}=dt(),VT=rs(),{once:TIe}=kr(),SIe=ia(),C2=gi(),{aggregateTwoErrors:RIe,codes:{ERR_INVALID_ARG_TYPE:jO,ERR_INVALID_RETURN_VALUE:GO,ERR_MISSING_ARGS:AIe,ERR_STREAM_DESTROYED:mIe,ERR_STREAM_PREMATURE_CLOSE:gIe},AbortError:_Ie}=xr(),{validateFunction:IIe,validateAbortSignal:NIe}=Kl(),{isIterable:aa,isReadable:WO,isReadableNodeStream:YT,isNodeStream:b2,isTransformStream:oc,isWebStream:OIe,isReadableStream:$O,isReadableFinished:CIe}=Ai(),bIe=globalThis.AbortController||wt().AbortController,kO,YO,VO;function y2(t,e,r){let n=!1;t.on("close",()=>{n=!0});let i=VT(t,{readable:e,writable:r},s=>{n=!s});return{destroy:s=>{n||(n=!0,SIe.destroyer(t,s||new mIe("pipe")))},cleanup:i}}function yIe(t){return IIe(t[t.length-1],"streams[stream.length - 1]"),t.pop()}function qO(t){if(aa(t))return t;if(YT(t))return wIe(t);throw new jO("val",["Readable","Iterable","AsyncIterable"],t)}async function*wIe(t){YO||(YO=Dd()),yield*YO.prototype[hIe].call(t)}async function kT(t,e,r,{end:n}){let i,s=null,o=c=>{if(c&&(i=c),s){let u=s;s=null,u()}},a=()=>new EIe((c,u)=>{i?u(i):s=()=>{i?u(i):c()}});e.on("drain",o);let l=VT(e,{readable:!1},o);try{e.writableNeedDrain&&await a();for await(let c of t)e.write(c)||await a();n&&(e.end(),await a()),r()}catch(c){r(i!==c?RIe(i,c):c)}finally{l(),e.off("drain",o)}}async function XO(t,e,r,{end:n}){oc(e)&&(e=e.writable);let i=e.getWriter();try{for await(let s of t)await i.ready,i.write(s).catch(()=>{});await i.ready,n&&await i.close(),r()}catch(s){try{await i.abort(s),r(s)}catch(o){r(o)}}}function LIe(...t){return w2(t,TIe(yIe(t)))}function w2(t,e,r){if(t.length===1&&fIe(t[0])&&(t=t[0]),t.length<2)throw new AIe("streams");let n=new bIe,i=n.signal,s=r?.signal,o=[];NIe(s,"options.signal");function a(){p(new _Ie)}VO=VO||kr().addAbortListener;let l;s&&(l=VO(s,a));let c,u,d=[],E=0;function f(R){p(R,--E===0)}function p(R,A){var I;if(R&&(!c||c.code==="ERR_STREAM_PREMATURE_CLOSE")&&(c=R),!(!c&&!A)){for(;d.length;)d.shift()(c);(I=l)===null||I===void 0||I[pIe](),n.abort(),A&&(c||o.forEach(w=>w()),Ud.nextTick(e,c,u))}}let h;for(let R=0;R<t.length;R++){let A=t[R],I=R<t.length-1,w=R>0,g=I||r?.end!==!1,L=R===t.length-1;if(b2(A)){let y=function(P){P&&P.name!=="AbortError"&&P.code!=="ERR_STREAM_PREMATURE_CLOSE"&&f(P)};var m=y;if(g){let{destroy:P,cleanup:v}=y2(A,I,w);d.push(P),WO(A)&&L&&o.push(v)}A.on("error",y),WO(A)&&L&&o.push(()=>{A.removeListener("error",y)})}if(R===0)if(typeof A=="function"){if(h=A({signal:i}),!aa(h))throw new GO("Iterable, AsyncIterable or Stream","source",h)}else aa(A)||YT(A)||oc(A)?h=A:h=C2.from(A);else if(typeof A=="function"){if(oc(h)){var S;h=qO((S=h)===null||S===void 0?void 0:S.readable)}else h=qO(h);if(h=A(h,{signal:i}),I){if(!aa(h,!0))throw new GO("AsyncIterable",`transform[${R-1}]`,h)}else{var T;kO||(kO=HO());let y=new kO({objectMode:!0}),P=(T=h)===null||T===void 0?void 0:T.then;if(typeof P=="function")E++,P.call(h,F=>{u=F,F!=null&&y.write(F),g&&y.end(),Ud.nextTick(f)},F=>{y.destroy(F),Ud.nextTick(f,F)});else if(aa(h,!0))E++,kT(h,y,f,{end:g});else if($O(h)||oc(h)){let F=h.readable||h;E++,kT(F,y,f,{end:g})}else throw new GO("AsyncIterable or Promise","destination",h);h=y;let{destroy:v,cleanup:B}=y2(h,!1,!0);d.push(v),L&&o.push(B)}}else if(b2(A)){if(YT(h)){E+=2;let y=DIe(h,A,f,{end:g});WO(A)&&L&&o.push(y)}else if(oc(h)||$O(h)){let y=h.readable||h;E++,kT(y,A,f,{end:g})}else if(aa(h))E++,kT(h,A,f,{end:g});else throw new jO("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],h);h=A}else if(OIe(A)){if(YT(h))E++,XO(qO(h),A,f,{end:g});else if($O(h)||aa(h))E++,XO(h,A,f,{end:g});else if(oc(h))E++,XO(h.readable,A,f,{end:g});else throw new jO("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],h);h=A}else h=C2.from(A)}return(i!=null&&i.aborted||s!=null&&s.aborted)&&Ud.nextTick(a),h}function DIe(t,e,r,{end:n}){let i=!1;if(e.on("close",()=>{i||r(new gIe)}),t.pipe(e,{end:!1}),n){let o=function(){i=!0,e.end()};var s=o;CIe(t)?Ud.nextTick(o):t.once("end",o)}else r();return VT(t,{readable:!0,writable:!1},o=>{let a=t._readableState;o&&o.code==="ERR_STREAM_PREMATURE_CLOSE"&&a&&a.ended&&!a.errored&&!a.errorEmitted?t.once("end",r).once("error",r):r(o)}),VT(e,{readable:!1,writable:!0},r)}L2.exports={pipelineImpl:w2,pipeline:LIe}});var KO=O((KUe,U2)=>{"use strict";var{pipeline:PIe}=qT(),XT=gi(),{destroyer:xIe}=ia(),{isNodeStream:jT,isReadable:D2,isWritable:P2,isWebStream:zO,isTransformStream:la,isWritableStream:x2,isReadableStream:v2}=Ai(),{AbortError:vIe,codes:{ERR_INVALID_ARG_VALUE:M2,ERR_MISSING_ARGS:MIe}}=xr(),UIe=rs();U2.exports=function(...e){if(e.length===0)throw new MIe("streams");if(e.length===1)return XT.from(e[0]);let r=[...e];if(typeof e[0]=="function"&&(e[0]=XT.from(e[0])),typeof e[e.length-1]=="function"){let f=e.length-1;e[f]=XT.from(e[f])}for(let f=0;f<e.length;++f)if(!(!jT(e[f])&&!zO(e[f]))){if(f<e.length-1&&!(D2(e[f])||v2(e[f])||la(e[f])))throw new M2(`streams[${f}]`,r[f],"must be readable");if(f>0&&!(P2(e[f])||x2(e[f])||la(e[f])))throw new M2(`streams[${f}]`,r[f],"must be writable")}let n,i,s,o,a;function l(f){let p=o;o=null,p?p(f):f?a.destroy(f):!E&&!d&&a.destroy()}let c=e[0],u=PIe(e,l),d=!!(P2(c)||x2(c)||la(c)),E=!!(D2(u)||v2(u)||la(u));if(a=new XT({writableObjectMode:!!(c!=null&&c.writableObjectMode),readableObjectMode:!!(u!=null&&u.readableObjectMode),writable:d,readable:E}),d){if(jT(c))a._write=function(p,h,S){c.write(p,h)?S():n=S},a._final=function(p){c.end(),i=p},c.on("drain",function(){if(n){let p=n;n=null,p()}});else if(zO(c)){let h=(la(c)?c.writable:c).getWriter();a._write=async function(S,T,m){try{await h.ready,h.write(S).catch(()=>{}),m()}catch(R){m(R)}},a._final=async function(S){try{await h.ready,h.close().catch(()=>{}),i=S}catch(T){S(T)}}}let f=la(u)?u.readable:u;UIe(f,()=>{if(i){let p=i;i=null,p()}})}if(E){if(jT(u))u.on("readable",function(){if(s){let f=s;s=null,f()}}),u.on("end",function(){a.push(null)}),a._read=function(){for(;;){let f=u.read();if(f===null){s=a._read;return}if(!a.push(f))return}};else if(zO(u)){let p=(la(u)?u.readable:u).getReader();a._read=async function(){for(;;)try{let{value:h,done:S}=await p.read();if(!a.push(h))return;if(S){a.push(null);return}}catch{return}}}}return a._destroy=function(f,p){!f&&o!==null&&(f=new vIe),s=null,n=null,i=null,o===null?p(f):(o=p,jT(u)&&xIe(u,f))},a}});var q2=O((JUe,ZO)=>{"use strict";var BIe=globalThis.AbortController||wt().AbortController,{codes:{ERR_INVALID_ARG_VALUE:FIe,ERR_INVALID_ARG_TYPE:Bd,ERR_MISSING_ARGS:HIe,ERR_OUT_OF_RANGE:GIe},AbortError:_i}=xr(),{validateAbortSignal:ca,validateInteger:B2,validateObject:ua}=Kl(),WIe=dt().Symbol("kWeak"),$Ie=dt().Symbol("kResistStopPropagation"),{finished:kIe}=rs(),YIe=KO(),{addAbortSignalNoValidate:VIe}=yd(),{isWritable:qIe,isNodeStream:XIe}=Ai(),{deprecate:jIe}=kr(),{ArrayPrototypePush:zIe,Boolean:KIe,MathFloor:F2,Number:JIe,NumberIsNaN:QIe,Promise:H2,PromiseReject:G2,PromiseResolve:ZIe,PromisePrototypeThen:W2,Symbol:k2}=dt(),zT=k2("kEmpty"),$2=k2("kEof");function eNe(t,e){if(e!=null&&ua(e,"options"),e?.signal!=null&&ca(e.signal,"options.signal"),XIe(t)&&!qIe(t))throw new FIe("stream",t,"must be writable");let r=YIe(this,t);return e!=null&&e.signal&&VIe(e.signal,r),r}function KT(t,e){if(typeof t!="function")throw new Bd("fn",["Function","AsyncFunction"],t);e!=null&&ua(e,"options"),e?.signal!=null&&ca(e.signal,"options.signal");let r=1;e?.concurrency!=null&&(r=F2(e.concurrency));let n=r-1;return e?.highWaterMark!=null&&(n=F2(e.highWaterMark)),B2(r,"options.concurrency",1),B2(n,"options.highWaterMark",0),n+=r,async function*(){let s=kr().AbortSignalAny([e?.signal].filter(KIe)),o=this,a=[],l={signal:s},c,u,d=!1,E=0;function f(){d=!0,p()}function p(){E-=1,h()}function h(){u&&!d&&E<r&&a.length<n&&(u(),u=null)}async function S(){try{for await(let T of o){if(d)return;if(s.aborted)throw new _i;try{if(T=t(T,l),T===zT)continue;T=ZIe(T)}catch(m){T=G2(m)}E+=1,W2(T,p,f),a.push(T),c&&(c(),c=null),!d&&(a.length>=n||E>=r)&&await new H2(m=>{u=m})}a.push($2)}catch(T){let m=G2(T);W2(m,p,f),a.push(m)}finally{d=!0,c&&(c(),c=null)}}S();try{for(;;){for(;a.length>0;){let T=await a[0];if(T===$2)return;if(s.aborted)throw new _i;T!==zT&&(yield T),a.shift(),h()}await new H2(T=>{c=T})}}finally{d=!0,u&&(u(),u=null)}}.call(this)}function tNe(t=void 0){return t!=null&&ua(t,"options"),t?.signal!=null&&ca(t.signal,"options.signal"),async function*(){let r=0;for await(let i of this){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new _i({cause:t.signal.reason});yield[r++,i]}}.call(this)}async function Y2(t,e=void 0){for await(let r of QO.call(this,t,e))return!0;return!1}async function rNe(t,e=void 0){if(typeof t!="function")throw new Bd("fn",["Function","AsyncFunction"],t);return!await Y2.call(this,async(...r)=>!await t(...r),e)}async function nNe(t,e){for await(let r of QO.call(this,t,e))return r}async function iNe(t,e){if(typeof t!="function")throw new Bd("fn",["Function","AsyncFunction"],t);async function r(n,i){return await t(n,i),zT}for await(let n of KT.call(this,r,e));}function QO(t,e){if(typeof t!="function")throw new Bd("fn",["Function","AsyncFunction"],t);async function r(n,i){return await t(n,i)?n:zT}return KT.call(this,r,e)}var JO=class extends HIe{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function sNe(t,e,r){var n;if(typeof t!="function")throw new Bd("reducer",["Function","AsyncFunction"],t);r!=null&&ua(r,"options"),r?.signal!=null&&ca(r.signal,"options.signal");let i=arguments.length>1;if(r!=null&&(n=r.signal)!==null&&n!==void 0&&n.aborted){let c=new _i(void 0,{cause:r.signal.reason});throw this.once("error",()=>{}),await kIe(this.destroy(c)),c}let s=new BIe,o=s.signal;if(r!=null&&r.signal){let c={once:!0,[WIe]:this,[$Ie]:!0};r.signal.addEventListener("abort",()=>s.abort(),c)}let a=!1;try{for await(let c of this){var l;if(a=!0,r!=null&&(l=r.signal)!==null&&l!==void 0&&l.aborted)throw new _i;i?e=await t(e,c,{signal:o}):(e=c,i=!0)}if(!a&&!i)throw new JO}finally{s.abort()}return e}async function oNe(t){t!=null&&ua(t,"options"),t?.signal!=null&&ca(t.signal,"options.signal");let e=[];for await(let n of this){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new _i(void 0,{cause:t.signal.reason});zIe(e,n)}return e}function aNe(t,e){let r=KT.call(this,t,e);return async function*(){for await(let i of r)yield*i}.call(this)}function V2(t){if(t=JIe(t),QIe(t))return 0;if(t<0)throw new GIe("number",">= 0",t);return t}function lNe(t,e=void 0){return e!=null&&ua(e,"options"),e?.signal!=null&&ca(e.signal,"options.signal"),t=V2(t),async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new _i;for await(let s of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new _i;t--<=0&&(yield s)}}.call(this)}function cNe(t,e=void 0){return e!=null&&ua(e,"options"),e?.signal!=null&&ca(e.signal,"options.signal"),t=V2(t),async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new _i;for await(let s of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new _i;if(t-- >0&&(yield s),t<=0)return}}.call(this)}ZO.exports.streamReturningOperators={asIndexedPairs:jIe(tNe,"readable.asIndexedPairs will be removed in a future version."),drop:lNe,filter:QO,flatMap:aNe,map:KT,take:cNe,compose:eNe};ZO.exports.promiseReturningOperators={every:rNe,forEach:iNe,reduce:sNe,toArray:oNe,some:Y2,find:nNe}});var eC=O((QUe,X2)=>{"use strict";var{ArrayPrototypePop:uNe,Promise:dNe}=dt(),{isIterable:fNe,isNodeStream:ENe,isWebStream:hNe}=Ai(),{pipelineImpl:pNe}=qT(),{finished:TNe}=rs();tC();function SNe(...t){return new dNe((e,r)=>{let n,i,s=t[t.length-1];if(s&&typeof s=="object"&&!ENe(s)&&!fNe(s)&&!hNe(s)){let o=uNe(t);n=o.signal,i=o.end}pNe(t,(o,a)=>{o?r(o):e(a)},{signal:n,end:i})})}X2.exports={finished:TNe,pipeline:SNe}});var tC=O((ZUe,rq)=>{"use strict";var{Buffer:RNe}=require("buffer"),{ObjectDefineProperty:ss,ObjectKeys:K2,ReflectApply:J2}=dt(),{promisify:{custom:Q2}}=kr(),{streamReturningOperators:j2,promiseReturningOperators:z2}=q2(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:Z2}}=xr(),ANe=KO(),{setDefaultHighWaterMark:mNe,getDefaultHighWaterMark:gNe}=wd(),{pipeline:eq}=qT(),{destroyer:_Ne}=ia(),tq=rs(),rC=eC(),Fd=Ai(),ot=rq.exports=LT().Stream;ot.isDestroyed=Fd.isDestroyed;ot.isDisturbed=Fd.isDisturbed;ot.isErrored=Fd.isErrored;ot.isReadable=Fd.isReadable;ot.isWritable=Fd.isWritable;ot.Readable=Dd();for(let t of K2(j2)){let r=function(...n){if(new.target)throw Z2();return ot.Readable.from(J2(e,this,n))},e=j2[t];ss(r,"name",{__proto__:null,value:e.name}),ss(r,"length",{__proto__:null,value:e.length}),ss(ot.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}for(let t of K2(z2)){let r=function(...n){if(new.target)throw Z2();return J2(e,this,n)},e=z2[t];ss(r,"name",{__proto__:null,value:e.name}),ss(r,"length",{__proto__:null,value:e.length}),ss(ot.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}ot.Writable=$T();ot.Duplex=gi();ot.Transform=BO();ot.PassThrough=HO();ot.pipeline=eq;var{addAbortSignal:INe}=yd();ot.addAbortSignal=INe;ot.finished=tq;ot.destroy=_Ne;ot.compose=ANe;ot.setDefaultHighWaterMark=mNe;ot.getDefaultHighWaterMark=gNe;ss(ot,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return rC}});ss(eq,Q2,{__proto__:null,enumerable:!0,get(){return rC.pipeline}});ss(tq,Q2,{__proto__:null,enumerable:!0,get(){return rC.finished}});ot.Stream=ot;ot._isUint8Array=function(e){return e instanceof Uint8Array};ot._uint8ArrayToBuffer=function(e){return RNe.from(e.buffer,e.byteOffset,e.byteLength)}});var nq=O((eBe,De)=>{"use strict";var Vt=require("stream");if(Vt&&process.env.READABLE_STREAM==="disable"){let t=Vt.promises;De.exports._uint8ArrayToBuffer=Vt._uint8ArrayToBuffer,De.exports._isUint8Array=Vt._isUint8Array,De.exports.isDisturbed=Vt.isDisturbed,De.exports.isErrored=Vt.isErrored,De.exports.isReadable=Vt.isReadable,De.exports.Readable=Vt.Readable,De.exports.Writable=Vt.Writable,De.exports.Duplex=Vt.Duplex,De.exports.Transform=Vt.Transform,De.exports.PassThrough=Vt.PassThrough,De.exports.addAbortSignal=Vt.addAbortSignal,De.exports.finished=Vt.finished,De.exports.destroy=Vt.destroy,De.exports.pipeline=Vt.pipeline,De.exports.compose=Vt.compose,Object.defineProperty(Vt,"promises",{configurable:!0,enumerable:!0,get(){return t}}),De.exports.Stream=Vt.Stream}else{let t=tC(),e=eC(),r=t.Readable.destroy;De.exports=t.Readable,De.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,De.exports._isUint8Array=t._isUint8Array,De.exports.isDisturbed=t.isDisturbed,De.exports.isErrored=t.isErrored,De.exports.isReadable=t.isReadable,De.exports.Readable=t.Readable,De.exports.Writable=t.Writable,De.exports.Duplex=t.Duplex,De.exports.Transform=t.Transform,De.exports.PassThrough=t.PassThrough,De.exports.addAbortSignal=t.addAbortSignal,De.exports.finished=t.finished,De.exports.destroy=t.destroy,De.exports.destroy=r,De.exports.pipeline=t.pipeline,De.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return e}}),De.exports.Stream=t.Stream}De.exports.default=De.exports});var sq=O((tBe,iq)=>{"use strict";var{Transform:NNe}=nq(),ONe=gT(),nC=class extends NNe{constructor(e){super(e),this.checksum=Buffer.allocUnsafe(4),this.checksum.writeInt32BE(0,0),this.rawSize=0}_transform(e,r,n){e&&(this.checksum=ONe.buf(e,this.checksum)>>>0,this.rawSize+=e.length),n(null,e)}digest(e){let r=Buffer.allocUnsafe(4);return r.writeUInt32BE(this.checksum>>>0,0),e?r.toString(e):r}hex(){return this.digest("hex").toUpperCase()}size(){return this.rawSize}};iq.exports=nC});var aq=O((rBe,oq)=>{"use strict";var{DeflateRaw:CNe}=require("zlib"),bNe=gT(),iC=class extends CNe{constructor(e){super(e),this.checksum=Buffer.allocUnsafe(4),this.checksum.writeInt32BE(0,0),this.rawSize=0,this.compressedSize=0}push(e,r){return e&&(this.compressedSize+=e.length),super.push(e,r)}_transform(e,r,n){e&&(this.checksum=bNe.buf(e,this.checksum)>>>0,this.rawSize+=e.length),super._transform(e,r,n)}digest(e){let r=Buffer.allocUnsafe(4);return r.writeUInt32BE(this.checksum>>>0,0),e?r.toString(e):r}hex(){return this.digest("hex").toUpperCase()}size(e=!1){return e?this.compressedSize:this.rawSize}};oq.exports=iC});var sC=O((nBe,lq)=>{"use strict";lq.exports={CRC32Stream:sq(),DeflateCRC32Stream:aq()}});var dq=O((aBe,uq)=>{var yNe=require("util").inherits,wNe=gT(),{CRC32Stream:LNe}=sC(),{DeflateCRC32Stream:DNe}=sC(),cq=qN(),iBe=xI(),sBe=DI(),Re=PI(),oBe=YN(),le=Vp(),ir=uq.exports=function(t){if(!(this instanceof ir))return new ir(t);t=this.options=this._defaults(t),cq.call(this,t),this._entry=null,this._entries=[],this._archive={centralLength:0,centralOffset:0,comment:"",finish:!1,finished:!1,processing:!1,forceZip64:t.forceZip64,forceLocalTime:t.forceLocalTime}};yNe(ir,cq);ir.prototype._afterAppend=function(t){this._entries.push(t),t.getGeneralPurposeBit().usesDataDescriptor()&&this._writeDataDescriptor(t),this._archive.processing=!1,this._entry=null,this._archive.finish&&!this._archive.finished&&this._finish()};ir.prototype._appendBuffer=function(t,e,r){e.length===0&&t.setMethod(Re.METHOD_STORED);var n=t.getMethod();if(n===Re.METHOD_STORED&&(t.setSize(e.length),t.setCompressedSize(e.length),t.setCrc(wNe.buf(e)>>>0)),this._writeLocalFileHeader(t),n===Re.METHOD_STORED){this.write(e),this._afterAppend(t),r(null,t);return}else if(n===Re.METHOD_DEFLATED){this._smartStream(t,r).end(e);return}else{r(new Error("compression method "+n+" not implemented"));return}};ir.prototype._appendStream=function(t,e,r){t.getGeneralPurposeBit().useDataDescriptor(!0),t.setVersionNeededToExtract(Re.MIN_VERSION_DATA_DESCRIPTOR),this._writeLocalFileHeader(t);var n=this._smartStream(t,r);e.once("error",function(i){n.emit("error",i),n.end()}),e.pipe(n)};ir.prototype._defaults=function(t){return typeof t!="object"&&(t={}),typeof t.zlib!="object"&&(t.zlib={}),typeof t.zlib.level!="number"&&(t.zlib.level=Re.ZLIB_BEST_SPEED),t.forceZip64=!!t.forceZip64,t.forceLocalTime=!!t.forceLocalTime,t};ir.prototype._finish=function(){this._archive.centralOffset=this.offset,this._entries.forEach(function(t){this._writeCentralFileHeader(t)}.bind(this)),this._archive.centralLength=this.offset-this._archive.centralOffset,this.isZip64()&&this._writeCentralDirectoryZip64(),this._writeCentralDirectoryEnd(),this._archive.processing=!1,this._archive.finish=!0,this._archive.finished=!0,this.end()};ir.prototype._normalizeEntry=function(t){t.getMethod()===-1&&t.setMethod(Re.METHOD_DEFLATED),t.getMethod()===Re.METHOD_DEFLATED&&(t.getGeneralPurposeBit().useDataDescriptor(!0),t.setVersionNeededToExtract(Re.MIN_VERSION_DATA_DESCRIPTOR)),t.getTime()===-1&&t.setTime(new Date,this._archive.forceLocalTime),t._offsets={file:0,data:0,contents:0}};ir.prototype._smartStream=function(t,e){var r=t.getMethod()===Re.METHOD_DEFLATED,n=r?new DNe(this.options.zlib):new LNe,i=null;function s(){var o=n.digest().readUInt32BE(0);t.setCrc(o),t.setSize(n.size()),t.setCompressedSize(n.size(!0)),this._afterAppend(t),e(i,t)}return n.once("end",s.bind(this)),n.once("error",function(o){i=o}),n.pipe(this,{end:!1}),n};ir.prototype._writeCentralDirectoryEnd=function(){var t=this._entries.length,e=this._archive.centralLength,r=this._archive.centralOffset;this.isZip64()&&(t=Re.ZIP64_MAGIC_SHORT,e=Re.ZIP64_MAGIC,r=Re.ZIP64_MAGIC),this.write(le.getLongBytes(Re.SIG_EOCD)),this.write(Re.SHORT_ZERO),this.write(Re.SHORT_ZERO),this.write(le.getShortBytes(t)),this.write(le.getShortBytes(t)),this.write(le.getLongBytes(e)),this.write(le.getLongBytes(r));var n=this.getComment(),i=Buffer.byteLength(n);this.write(le.getShortBytes(i)),this.write(n)};ir.prototype._writeCentralDirectoryZip64=function(){this.write(le.getLongBytes(Re.SIG_ZIP64_EOCD)),this.write(le.getEightBytes(44)),this.write(le.getShortBytes(Re.MIN_VERSION_ZIP64)),this.write(le.getShortBytes(Re.MIN_VERSION_ZIP64)),this.write(Re.LONG_ZERO),this.write(Re.LONG_ZERO),this.write(le.getEightBytes(this._entries.length)),this.write(le.getEightBytes(this._entries.length)),this.write(le.getEightBytes(this._archive.centralLength)),this.write(le.getEightBytes(this._archive.centralOffset)),this.write(le.getLongBytes(Re.SIG_ZIP64_EOCD_LOC)),this.write(Re.LONG_ZERO),this.write(le.getEightBytes(this._archive.centralOffset+this._archive.centralLength)),this.write(le.getLongBytes(1))};ir.prototype._writeCentralFileHeader=function(t){var e=t.getGeneralPurposeBit(),r=t.getMethod(),n=t._offsets.file,i=t.getSize(),s=t.getCompressedSize();if(t.isZip64()||n>Re.ZIP64_MAGIC){i=Re.ZIP64_MAGIC,s=Re.ZIP64_MAGIC,n=Re.ZIP64_MAGIC,t.setVersionNeededToExtract(Re.MIN_VERSION_ZIP64);var o=Buffer.concat([le.getShortBytes(Re.ZIP64_EXTRA_ID),le.getShortBytes(24),le.getEightBytes(t.getSize()),le.getEightBytes(t.getCompressedSize()),le.getEightBytes(t._offsets.file)],28);t.setExtra(o)}this.write(le.getLongBytes(Re.SIG_CFH)),this.write(le.getShortBytes(t.getPlatform()<<8|Re.VERSION_MADEBY)),this.write(le.getShortBytes(t.getVersionNeededToExtract())),this.write(e.encode()),this.write(le.getShortBytes(r)),this.write(le.getLongBytes(t.getTimeDos())),this.write(le.getLongBytes(t.getCrc())),this.write(le.getLongBytes(s)),this.write(le.getLongBytes(i));var a=t.getName(),l=t.getComment(),c=t.getCentralDirectoryExtra();e.usesUTF8ForNames()&&(a=Buffer.from(a),l=Buffer.from(l)),this.write(le.getShortBytes(a.length)),this.write(le.getShortBytes(c.length)),this.write(le.getShortBytes(l.length)),this.write(Re.SHORT_ZERO),this.write(le.getShortBytes(t.getInternalAttributes())),this.write(le.getLongBytes(t.getExternalAttributes())),this.write(le.getLongBytes(n)),this.write(a),this.write(c),this.write(l)};ir.prototype._writeDataDescriptor=function(t){this.write(le.getLongBytes(Re.SIG_DD)),this.write(le.getLongBytes(t.getCrc())),t.isZip64()?(this.write(le.getEightBytes(t.getCompressedSize())),this.write(le.getEightBytes(t.getSize()))):(this.write(le.getLongBytes(t.getCompressedSize())),this.write(le.getLongBytes(t.getSize())))};ir.prototype._writeLocalFileHeader=function(t){var e=t.getGeneralPurposeBit(),r=t.getMethod(),n=t.getName(),i=t.getLocalFileDataExtra();t.isZip64()&&(e.useDataDescriptor(!0),t.setVersionNeededToExtract(Re.MIN_VERSION_ZIP64)),e.usesUTF8ForNames()&&(n=Buffer.from(n)),t._offsets.file=this.offset,this.write(le.getLongBytes(Re.SIG_LFH)),this.write(le.getShortBytes(t.getVersionNeededToExtract())),this.write(e.encode()),this.write(le.getShortBytes(r)),this.write(le.getLongBytes(t.getTimeDos())),t._offsets.data=this.offset,e.usesDataDescriptor()?(this.write(Re.LONG_ZERO),this.write(Re.LONG_ZERO),this.write(Re.LONG_ZERO)):(this.write(le.getLongBytes(t.getCrc())),this.write(le.getLongBytes(t.getCompressedSize())),this.write(le.getLongBytes(t.getSize()))),this.write(le.getShortBytes(n.length)),this.write(le.getShortBytes(i.length)),this.write(n),this.write(i),t._offsets.contents=this.offset};ir.prototype.getComment=function(t){return this._archive.comment!==null?this._archive.comment:""};ir.prototype.isZip64=function(){return this._archive.forceZip64||this._entries.length>Re.ZIP64_MAGIC_SHORT||this._archive.centralLength>Re.ZIP64_MAGIC||this._archive.centralOffset>Re.ZIP64_MAGIC};ir.prototype.setComment=function(t){this._archive.comment=t}});var oC=O((lBe,fq)=>{fq.exports={ArchiveEntry:Yp(),ZipArchiveEntry:xI(),ArchiveOutputStream:qN(),ZipArchiveOutputStream:dq()}});var hq=O((cBe,Eq)=>{var PNe=require("util").inherits,lC=oC().ZipArchiveOutputStream,xNe=oC().ZipArchiveEntry,aC=Nl(),ac=Eq.exports=function(t){if(!(this instanceof ac))return new ac(t);t=this.options=t||{},t.zlib=t.zlib||{},lC.call(this,t),typeof t.level=="number"&&t.level>=0&&(t.zlib.level=t.level,delete t.level),!t.forceZip64&&typeof t.zlib.level=="number"&&t.zlib.level===0&&(t.store=!0),t.namePrependSlash=t.namePrependSlash||!1,t.comment&&t.comment.length>0&&this.setComment(t.comment)};PNe(ac,lC);ac.prototype._normalizeFileData=function(t){t=aC.defaults(t,{type:"file",name:null,namePrependSlash:this.options.namePrependSlash,linkname:null,date:null,mode:null,store:this.options.store,comment:""});var e=t.type==="directory",r=t.type==="symlink";return t.name&&(t.name=aC.sanitizePath(t.name),!r&&t.name.slice(-1)==="/"?(e=!0,t.type="directory"):e&&(t.name+="/")),(e||r)&&(t.store=!0),t.date=aC.dateify(t.date),t};ac.prototype.entry=function(t,e,r){if(typeof r!="function"&&(r=this._emitErrorCallback.bind(this)),e=this._normalizeFileData(e),e.type!=="file"&&e.type!=="directory"&&e.type!=="symlink"){r(new Error(e.type+" entries not currently supported"));return}if(typeof e.name!="string"||e.name.length===0){r(new Error("entry name must be a non-empty string value"));return}if(e.type==="symlink"&&typeof e.linkname!="string"){r(new Error("entry linkname must be a non-empty string value when type equals symlink"));return}var n=new xNe(e.name);return n.setTime(e.date,this.options.forceLocalTime),e.namePrependSlash&&n.setName(e.name,!0),e.store&&n.setMethod(0),e.comment.length>0&&n.setComment(e.comment),e.type==="symlink"&&typeof e.mode!="number"&&(e.mode=40960),typeof e.mode=="number"&&(e.type==="symlink"&&(e.mode|=40960),n.setUnixMode(e.mode)),e.type==="symlink"&&typeof e.linkname=="string"&&(t=Buffer.from(e.linkname)),lC.prototype.entry.call(this,n,t,r)};ac.prototype.finalize=function(){this.finish()}});var Tq=O((uBe,pq)=>{var vNe=hq(),MNe=Nl(),Xs=function(t){if(!(this instanceof Xs))return new Xs(t);t=this.options=MNe.defaults(t,{comment:"",forceUTC:!1,namePrependSlash:!1,store:!1}),this.supports={directory:!0,symlink:!0},this.engine=new vNe(t)};Xs.prototype.append=function(t,e,r){this.engine.entry(t,e,r)};Xs.prototype.finalize=function(){this.engine.finalize()};Xs.prototype.on=function(){return this.engine.on.apply(this.engine,arguments)};Xs.prototype.pipe=function(){return this.engine.pipe.apply(this.engine,arguments)};Xs.prototype.unpipe=function(){return this.engine.unpipe.apply(this.engine,arguments)};pq.exports=Xs});var Rq=O((dBe,Sq)=>{Sq.exports=require("events")});var mq=O((EBe,Aq)=>{Aq.exports=class{constructor(e){if(!(e>0)||(e-1&e)!==0)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}clear(){this.top=this.btm=0,this.next=null,this.buffer.fill(void 0)}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){let e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}peek(){return this.buffer[this.btm]}isEmpty(){return this.buffer[this.btm]===void 0}}});var cC=O((pBe,_q)=>{var gq=mq();_q.exports=class{constructor(e){this.hwm=e||16,this.head=new gq(this.hwm),this.tail=this.head,this.length=0}clear(){this.head=this.tail,this.head.clear(),this.length=0}push(e){if(this.length++,!this.head.push(e)){let r=this.head;this.head=r.next=new gq(2*this.head.buffer.length),this.head.push(e)}}shift(){this.length!==0&&this.length--;let e=this.tail.shift();if(e===void 0&&this.tail.next){let r=this.tail.next;return this.tail.next=null,this.tail=r,this.tail.shift()}return e}peek(){let e=this.tail.peek();return e===void 0&&this.tail.next?this.tail.next.peek():e}isEmpty(){return this.length===0}}});var lc=O((TBe,Iq)=>{function UNe(t){return Buffer.isBuffer(t)||t instanceof Uint8Array}function BNe(t){return Buffer.isEncoding(t)}function FNe(t,e,r){return Buffer.alloc(t,e,r)}function HNe(t){return Buffer.allocUnsafe(t)}function GNe(t){return Buffer.allocUnsafeSlow(t)}function WNe(t,e){return Buffer.byteLength(t,e)}function $Ne(t,e){return Buffer.compare(t,e)}function kNe(t,e){return Buffer.concat(t,e)}function YNe(t,e,r,n,i){return Ke(t).copy(e,r,n,i)}function VNe(t,e){return Ke(t).equals(e)}function qNe(t,e,r,n,i){return Ke(t).fill(e,r,n,i)}function XNe(t,e,r){return Buffer.from(t,e,r)}function jNe(t,e,r,n){return Ke(t).includes(e,r,n)}function zNe(t,e,r,n){return Ke(t).indexOf(e,r,n)}function KNe(t,e,r,n){return Ke(t).lastIndexOf(e,r,n)}function JNe(t){return Ke(t).swap16()}function QNe(t){return Ke(t).swap32()}function ZNe(t){return Ke(t).swap64()}function Ke(t){return Buffer.isBuffer(t)?t:Buffer.from(t.buffer,t.byteOffset,t.byteLength)}function eOe(t,e,r,n){return Ke(t).toString(e,r,n)}function tOe(t,e,r,n,i){return Ke(t).write(e,r,n,i)}function rOe(t,e){return Ke(t).readDoubleBE(e)}function nOe(t,e){return Ke(t).readDoubleLE(e)}function iOe(t,e){return Ke(t).readFloatBE(e)}function sOe(t,e){return Ke(t).readFloatLE(e)}function oOe(t,e){return Ke(t).readInt32BE(e)}function aOe(t,e){return Ke(t).readInt32LE(e)}function lOe(t,e){return Ke(t).readUInt32BE(e)}function cOe(t,e){return Ke(t).readUInt32LE(e)}function uOe(t,e,r){return Ke(t).writeDoubleBE(e,r)}function dOe(t,e,r){return Ke(t).writeDoubleLE(e,r)}function fOe(t,e,r){return Ke(t).writeFloatBE(e,r)}function EOe(t,e,r){return Ke(t).writeFloatLE(e,r)}function hOe(t,e,r){return Ke(t).writeInt32BE(e,r)}function pOe(t,e,r){return Ke(t).writeInt32LE(e,r)}function TOe(t,e,r){return Ke(t).writeUInt32BE(e,r)}function SOe(t,e,r){return Ke(t).writeUInt32LE(e,r)}Iq.exports={isBuffer:UNe,isEncoding:BNe,alloc:FNe,allocUnsafe:HNe,allocUnsafeSlow:GNe,byteLength:WNe,compare:$Ne,concat:kNe,copy:YNe,equals:VNe,fill:qNe,from:XNe,includes:jNe,indexOf:zNe,lastIndexOf:KNe,swap16:JNe,swap32:QNe,swap64:ZNe,toBuffer:Ke,toString:eOe,write:tOe,readDoubleBE:rOe,readDoubleLE:nOe,readFloatBE:iOe,readFloatLE:sOe,readInt32BE:oOe,readInt32LE:aOe,readUInt32BE:lOe,readUInt32LE:cOe,writeDoubleBE:uOe,writeDoubleLE:dOe,writeFloatBE:fOe,writeFloatLE:EOe,writeInt32BE:hOe,writeInt32LE:pOe,writeUInt32BE:TOe,writeUInt32LE:SOe}});var Oq=O((RBe,Nq)=>{var ROe=lc();Nq.exports=class{constructor(e){this.encoding=e}get remaining(){return 0}decode(e){return ROe.toString(e,this.encoding)}flush(){return""}}});var bq=O((mBe,Cq)=>{var AOe=lc();Cq.exports=class{constructor(){this.codePoint=0,this.bytesSeen=0,this.bytesNeeded=0,this.lowerBoundary=128,this.upperBoundary=191}get remaining(){return this.bytesSeen}decode(e){if(this.bytesNeeded===0){let n=!0;for(let i=Math.max(0,e.byteLength-4),s=e.byteLength;i<s&&n;i++)n=e[i]<=127;if(n)return AOe.toString(e,"utf8")}let r="";for(let n=0,i=e.byteLength;n<i;n++){let s=e[n];if(this.bytesNeeded===0){s<=127?r+=String.fromCharCode(s):(this.bytesSeen=1,s>=194&&s<=223?(this.bytesNeeded=2,this.codePoint=s&31):s>=224&&s<=239?(s===224?this.lowerBoundary=160:s===237&&(this.upperBoundary=159),this.bytesNeeded=3,this.codePoint=s&15):s>=240&&s<=244?(s===240&&(this.lowerBoundary=144),s===244&&(this.upperBoundary=143),this.bytesNeeded=4,this.codePoint=s&7):r+="\uFFFD");continue}if(s<this.lowerBoundary||s>this.upperBoundary){this.codePoint=0,this.bytesNeeded=0,this.bytesSeen=0,this.lowerBoundary=128,this.upperBoundary=191,r+="\uFFFD";continue}this.lowerBoundary=128,this.upperBoundary=191,this.codePoint=this.codePoint<<6|s&63,this.bytesSeen++,this.bytesSeen===this.bytesNeeded&&(r+=String.fromCodePoint(this.codePoint),this.codePoint=0,this.bytesNeeded=0,this.bytesSeen=0)}return r}flush(){let e=this.bytesNeeded>0?"\uFFFD":"";return this.codePoint=0,this.bytesNeeded=0,this.bytesSeen=0,this.lowerBoundary=128,this.upperBoundary=191,e}}});var wq=O((_Be,yq)=>{var mOe=Oq(),gOe=bq();yq.exports=class{constructor(e="utf8"){switch(this.encoding=_Oe(e),this.encoding){case"utf8":this.decoder=new gOe;break;case"utf16le":case"base64":throw new Error("Unsupported encoding: "+this.encoding);default:this.decoder=new mOe(this.encoding)}}get remaining(){return this.decoder.remaining}push(e){return typeof e=="string"?e:this.decoder.decode(e)}write(e){return this.push(e)}end(e){let r="";return e&&(r=this.push(e)),r+=this.decoder.flush(),r}};function _Oe(t){switch(t=t.toLowerCase(),t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:throw new Error("Unknown encoding: "+t)}}});var OC=O((IBe,Qq)=>{var{EventEmitter:IOe}=Rq(),rS=new Error("Stream was destroyed"),uC=new Error("Premature close"),Mq=cC(),NOe=wq(),dC=typeof queueMicrotask>"u"?t=>global.process.nextTick(t):queueMicrotask,At=(1<<29)-1,Ii=1,RC=2,da=4,Hd=8,Uq=At^Ii,OOe=At^RC,Yd=16,cc=32,fc=64,zs=128,Vd=256,AC=512,fa=1024,fC=2048,mC=4096,gC=8192,$n=16384,js=32768,nS=65536,Ea=131072,Bq=Vd|AC,COe=Yd|nS,bOe=fc|Yd,yOe=mC|zs,_C=Vd|Ea,wOe=At^Yd,LOe=At^fc,DOe=At^(fc|nS),Lq=At^nS,POe=At^Vd,xOe=At^(zs|gC),vOe=At^fa,Dq=At^Bq,Fq=At^js,MOe=At^cc,Hq=At^Ea,UOe=At^_C,os=1<<18,dc=2<<18,qd=4<<18,ha=8<<18,Xd=16<<18,Ks=32<<18,EC=64<<18,uc=128<<18,IC=256<<18,pa=512<<18,iS=1024<<18,BOe=At^(os|IC),Gq=At^qd,FOe=At^(os|pa),HOe=At^Xd,GOe=At^ha,Wq=At^uc,WOe=At^dc,$q=At^iS,Gd=Yd|os,kq=At^Gd,NC=$n|Ks,Ni=da|Hd|RC,rn=Ni|Ii,Yq=Ni|NC,$Oe=Gq&LOe,sS=uc|js,kOe=sS&kq,Vq=rn|kOe,YOe=rn|fa|$n,Pq=rn|$n|zs,VOe=rn|fa|zs,qOe=rn|mC|zs|gC,XOe=rn|Yd|fa|$n|nS|Ea,jOe=Ni|fa|$n,zOe=cc|rn|js|fc,KOe=js|Ii,JOe=rn|pa|Ks,QOe=ha|Xd,qq=ha|os,ZOe=ha|Xd|rn|os,xq=rn|os|ha|iS,eCe=qd|os,tCe=os|IC,rCe=rn|pa|qq|Ks,nCe=Xd|Ni|pa|Ks,iCe=dc|rn|uc|qd,sCe=pa|Ks|Ni,JT=Symbol.asyncIterator||Symbol("asyncIterator"),QT=class{constructor(e,{highWaterMark:r=16384,map:n=null,mapWritable:i,byteLength:s,byteLengthWritable:o}={}){this.stream=e,this.queue=new Mq,this.highWaterMark=r,this.buffered=0,this.error=null,this.pipeline=null,this.drains=null,this.byteLength=o||s||Jq,this.map=i||n,this.afterWrite=lCe.bind(this),this.afterUpdateNextTick=dCe.bind(this)}get ended(){return(this.stream._duplexState&Ks)!==0}push(e){return(this.stream._duplexState&sCe)!==0?!1:(this.map!==null&&(e=this.map(e)),this.buffered+=this.byteLength(e),this.queue.push(e),this.buffered<this.highWaterMark?(this.stream._duplexState|=ha,!0):(this.stream._duplexState|=QOe,!1))}shift(){let e=this.queue.shift();return this.buffered-=this.byteLength(e),this.buffered===0&&(this.stream._duplexState&=GOe),e}end(e){typeof e=="function"?this.stream.once("finish",e):e!=null&&this.push(e),this.stream._duplexState=(this.stream._duplexState|pa)&Gq}autoBatch(e,r){let n=[],i=this.stream;for(n.push(e);(i._duplexState&xq)===qq;)n.push(i._writableState.shift());if((i._duplexState&rn)!==0)return r(null);i._writev(n,r)}update(){let e=this.stream;e._duplexState|=dc;do{for(;(e._duplexState&xq)===ha;){let r=this.shift();e._duplexState|=tCe,e._write(r,this.afterWrite)}(e._duplexState&eCe)===0&&this.updateNonPrimary()}while(this.continueUpdate()===!0);e._duplexState&=WOe}updateNonPrimary(){let e=this.stream;if((e._duplexState&rCe)===pa){e._duplexState=e._duplexState|os,e._final(aCe.bind(this));return}if((e._duplexState&Ni)===da){(e._duplexState&sS)===0&&(e._duplexState|=Gd,e._destroy(Xq.bind(this)));return}(e._duplexState&Vq)===Ii&&(e._duplexState=(e._duplexState|Gd)&Uq,e._open(jq.bind(this)))}continueUpdate(){return(this.stream._duplexState&uc)===0?!1:(this.stream._duplexState&=Wq,!0)}updateCallback(){(this.stream._duplexState&iCe)===qd?this.update():this.updateNextTick()}updateNextTick(){(this.stream._duplexState&uc)===0&&(this.stream._duplexState|=uc,(this.stream._duplexState&dc)===0&&dC(this.afterUpdateNextTick))}},hC=class{constructor(e,{highWaterMark:r=16384,map:n=null,mapReadable:i,byteLength:s,byteLengthReadable:o}={}){this.stream=e,this.queue=new Mq,this.highWaterMark=r===0?1:r,this.buffered=0,this.readAhead=r>0,this.error=null,this.pipeline=null,this.byteLength=o||s||Jq,this.map=i||n,this.pipeTo=null,this.afterRead=cCe.bind(this),this.afterUpdateNextTick=uCe.bind(this)}get ended(){return(this.stream._duplexState&$n)!==0}pipe(e,r){if(this.pipeTo!==null)throw new Error("Can only pipe to one destination");if(typeof r!="function"&&(r=null),this.stream._duplexState|=AC,this.pipeTo=e,this.pipeline=new TC(this.stream,e,r),r&&this.stream.on("error",vq),kd(e))e._writableState.pipeline=this.pipeline,r&&e.on("error",vq),e.on("finish",this.pipeline.finished.bind(this.pipeline));else{let n=this.pipeline.done.bind(this.pipeline,e),i=this.pipeline.done.bind(this.pipeline,e,null);e.on("error",n),e.on("close",i),e.on("finish",this.pipeline.finished.bind(this.pipeline))}e.on("drain",oCe.bind(this)),this.stream.emit("piping",e),e.emit("pipe",this.stream)}push(e){let r=this.stream;return e===null?(this.highWaterMark=0,r._duplexState=(r._duplexState|fa)&DOe,!1):this.map!==null&&(e=this.map(e),e===null)?(r._duplexState&=Lq,this.buffered<this.highWaterMark):(this.buffered+=this.byteLength(e),this.queue.push(e),r._duplexState=(r._duplexState|zs)&Lq,this.buffered<this.highWaterMark)}shift(){let e=this.queue.shift();return this.buffered-=this.byteLength(e),this.buffered===0&&(this.stream._duplexState&=xOe),e}unshift(e){let r=[this.map!==null?this.map(e):e];for(;this.buffered>0;)r.push(this.shift());for(let n=0;n<r.length-1;n++){let i=r[n];this.buffered+=this.byteLength(i),this.queue.push(i)}this.push(r[r.length-1])}read(){let e=this.stream;if((e._duplexState&Pq)===zs){let r=this.shift();return this.pipeTo!==null&&this.pipeTo.write(r)===!1&&(e._duplexState&=Dq),(e._duplexState&fC)!==0&&e.emit("data",r),r}return this.readAhead===!1&&(e._duplexState|=Ea,this.updateNextTick()),null}drain(){let e=this.stream;for(;(e._duplexState&Pq)===zs&&(e._duplexState&Bq)!==0;){let r=this.shift();this.pipeTo!==null&&this.pipeTo.write(r)===!1&&(e._duplexState&=Dq),(e._duplexState&fC)!==0&&e.emit("data",r)}}update(){let e=this.stream;e._duplexState|=cc;do{for(this.drain();this.buffered<this.highWaterMark&&(e._duplexState&XOe)===Ea;)e._duplexState|=COe,e._read(this.afterRead),this.drain();(e._duplexState&qOe)===yOe&&(e._duplexState|=gC,e.emit("readable")),(e._duplexState&bOe)===0&&this.updateNonPrimary()}while(this.continueUpdate()===!0);e._duplexState&=MOe}updateNonPrimary(){let e=this.stream;if((e._duplexState&VOe)===fa&&(e._duplexState=(e._duplexState|$n)&vOe,e.emit("end"),(e._duplexState&Yq)===NC&&(e._duplexState|=da),this.pipeTo!==null&&this.pipeTo.end()),(e._duplexState&Ni)===da){(e._duplexState&sS)===0&&(e._duplexState|=Gd,e._destroy(Xq.bind(this)));return}(e._duplexState&Vq)===Ii&&(e._duplexState=(e._duplexState|Gd)&Uq,e._open(jq.bind(this)))}continueUpdate(){return(this.stream._duplexState&js)===0?!1:(this.stream._duplexState&=Fq,!0)}updateCallback(){(this.stream._duplexState&zOe)===fc?this.update():this.updateNextTick()}updateNextTickIfOpen(){(this.stream._duplexState&KOe)===0&&(this.stream._duplexState|=js,(this.stream._duplexState&cc)===0&&dC(this.afterUpdateNextTick))}updateNextTick(){(this.stream._duplexState&js)===0&&(this.stream._duplexState|=js,(this.stream._duplexState&cc)===0&&dC(this.afterUpdateNextTick))}},pC=class{constructor(e){this.data=null,this.afterTransform=ECe.bind(e),this.afterFinal=null}},TC=class{constructor(e,r,n){this.from=e,this.to=r,this.afterPipe=n,this.error=null,this.pipeToFinished=!1}finished(){this.pipeToFinished=!0}done(e,r){if(r&&(this.error=r),e===this.to&&(this.to=null,this.from!==null)){((this.from._duplexState&$n)===0||!this.pipeToFinished)&&this.from.destroy(this.error||new Error("Writable stream closed prematurely"));return}if(e===this.from&&(this.from=null,this.to!==null)){(e._duplexState&$n)===0&&this.to.destroy(this.error||new Error("Readable stream closed before ending"));return}this.afterPipe!==null&&this.afterPipe(this.error),this.to=this.from=this.afterPipe=null}};function oCe(){this.stream._duplexState|=AC,this.updateCallback()}function aCe(t){let e=this.stream;t&&e.destroy(t),(e._duplexState&Ni)===0&&(e._duplexState|=Ks,e.emit("finish")),(e._duplexState&Yq)===NC&&(e._duplexState|=da),e._duplexState&=FOe,(e._duplexState&dc)===0?this.update():this.updateNextTick()}function Xq(t){let e=this.stream;!t&&this.error!==rS&&(t=this.error),t&&e.emit("error",t),e._duplexState|=Hd,e.emit("close");let r=e._readableState,n=e._writableState;if(r!==null&&r.pipeline!==null&&r.pipeline.done(e,t),n!==null){for(;n.drains!==null&&n.drains.length>0;)n.drains.shift().resolve(!1);n.pipeline!==null&&n.pipeline.done(e,t)}}function lCe(t){let e=this.stream;t&&e.destroy(t),e._duplexState&=BOe,this.drains!==null&&fCe(this.drains),(e._duplexState&ZOe)===Xd&&(e._duplexState&=HOe,(e._duplexState&EC)===EC&&e.emit("drain")),this.updateCallback()}function cCe(t){t&&this.stream.destroy(t),this.stream._duplexState&=wOe,this.readAhead===!1&&(this.stream._duplexState&Vd)===0&&(this.stream._duplexState&=Hq),this.updateCallback()}function uCe(){(this.stream._duplexState&cc)===0&&(this.stream._duplexState&=Fq,this.update())}function dCe(){(this.stream._duplexState&dc)===0&&(this.stream._duplexState&=Wq,this.update())}function fCe(t){for(let e=0;e<t.length;e++)--t[e].writes===0&&(t.shift().resolve(!0),e--)}function jq(t){let e=this.stream;t&&e.destroy(t),(e._duplexState&da)===0&&((e._duplexState&YOe)===0&&(e._duplexState|=fc),(e._duplexState&JOe)===0&&(e._duplexState|=qd),e.emit("open")),e._duplexState&=kq,e._writableState!==null&&e._writableState.updateCallback(),e._readableState!==null&&e._readableState.updateCallback()}function ECe(t,e){e!=null&&this.push(e),this._writableState.afterWrite(t)}function hCe(t){this._readableState!==null&&(t==="data"&&(this._duplexState|=fC|_C,this._readableState.updateNextTick()),t==="readable"&&(this._duplexState|=mC,this._readableState.updateNextTick())),this._writableState!==null&&t==="drain"&&(this._duplexState|=EC,this._writableState.updateNextTick())}var Wd=class extends IOe{constructor(e){super(),this._duplexState=0,this._readableState=null,this._writableState=null,e&&(e.open&&(this._open=e.open),e.destroy&&(this._destroy=e.destroy),e.predestroy&&(this._predestroy=e.predestroy),e.signal&&e.signal.addEventListener("abort",NCe.bind(this))),this.on("newListener",hCe)}_open(e){e(null)}_destroy(e){e(null)}_predestroy(){}get readable(){return this._readableState!==null?!0:void 0}get writable(){return this._writableState!==null?!0:void 0}get destroyed(){return(this._duplexState&Hd)!==0}get destroying(){return(this._duplexState&Ni)!==0}destroy(e){(this._duplexState&Ni)===0&&(e||(e=rS),this._duplexState=(this._duplexState|da)&$Oe,this._readableState!==null&&(this._readableState.highWaterMark=0,this._readableState.error=e),this._writableState!==null&&(this._writableState.highWaterMark=0,this._writableState.error=e),this._duplexState|=RC,this._predestroy(),this._duplexState&=OOe,this._readableState!==null&&this._readableState.updateNextTick(),this._writableState!==null&&this._writableState.updateNextTick())}},ZT=class t extends Wd{constructor(e){super(e),this._duplexState|=Ii|Ks|Ea,this._readableState=new hC(this,e),e&&(this._readableState.readAhead===!1&&(this._duplexState&=Hq),e.read&&(this._read=e.read),e.eagerOpen&&this._readableState.updateNextTick(),e.encoding&&this.setEncoding(e.encoding))}setEncoding(e){let r=new NOe(e),n=this._readableState.map||SCe;return this._readableState.map=i,this;function i(s){let o=r.push(s);return o===""&&(s.byteLength!==0||r.remaining>0)?null:n(o)}}_read(e){e(null)}pipe(e,r){return this._readableState.updateNextTick(),this._readableState.pipe(e,r),e}read(){return this._readableState.updateNextTick(),this._readableState.read()}push(e){return this._readableState.updateNextTickIfOpen(),this._readableState.push(e)}unshift(e){return this._readableState.updateNextTickIfOpen(),this._readableState.unshift(e)}resume(){return this._duplexState|=_C,this._readableState.updateNextTick(),this}pause(){return this._duplexState&=this._readableState.readAhead===!1?UOe:POe,this}static _fromAsyncIterator(e,r){let n,i=new t({...r,read(o){e.next().then(s).then(o.bind(null,null)).catch(o)},predestroy(){n=e.return()},destroy(o){if(!n)return o(null);n.then(o.bind(null,null)).catch(o)}});return i;function s(o){o.done?i.push(null):i.push(o.value)}}static from(e,r){if(gCe(e))return e;if(e[JT])return this._fromAsyncIterator(e[JT](),r);Array.isArray(e)||(e=e===void 0?[]:[e]);let n=0;return new t({...r,read(i){this.push(n===e.length?null:e[n++]),i(null)}})}static isBackpressured(e){return(e._duplexState&jOe)!==0||e._readableState.buffered>=e._readableState.highWaterMark}static isPaused(e){return(e._duplexState&Vd)===0}[JT](){let e=this,r=null,n=null,i=null;return this.on("error",c=>{r=c}),this.on("readable",s),this.on("close",o),{[JT](){return this},next(){return new Promise(function(c,u){n=c,i=u;let d=e.read();d!==null?a(d):(e._duplexState&Hd)!==0&&a(null)})},return(){return l(null)},throw(c){return l(c)}};function s(){n!==null&&a(e.read())}function o(){n!==null&&a(null)}function a(c){i!==null&&(r?i(r):c===null&&(e._duplexState&$n)===0?i(rS):n({value:c,done:c===null}),i=n=null)}function l(c){return e.destroy(c),new Promise((u,d)=>{if(e._duplexState&Hd)return u({value:void 0,done:!0});e.once("close",function(){c?d(c):u({value:void 0,done:!0})})})}}},eS=class extends Wd{constructor(e){super(e),this._duplexState|=Ii|$n,this._writableState=new QT(this,e),e&&(e.writev&&(this._writev=e.writev),e.write&&(this._write=e.write),e.final&&(this._final=e.final),e.eagerOpen&&this._writableState.updateNextTick())}cork(){this._duplexState|=iS}uncork(){this._duplexState&=$q,this._writableState.updateNextTick()}_writev(e,r){r(null)}_write(e,r){this._writableState.autoBatch(e,r)}_final(e){e(null)}static isBackpressured(e){return(e._duplexState&nCe)!==0}static drained(e){if(e.destroyed)return Promise.resolve(!1);let r=e._writableState,i=(OCe(e)?Math.min(1,r.queue.length):r.queue.length)+(e._duplexState&IC?1:0);return i===0?Promise.resolve(!0):(r.drains===null&&(r.drains=[]),new Promise(s=>{r.drains.push({writes:i,resolve:s})}))}write(e){return this._writableState.updateNextTick(),this._writableState.push(e)}end(e){return this._writableState.updateNextTick(),this._writableState.end(e),this}},$d=class extends ZT{constructor(e){super(e),this._duplexState=Ii|this._duplexState&Ea,this._writableState=new QT(this,e),e&&(e.writev&&(this._writev=e.writev),e.write&&(this._write=e.write),e.final&&(this._final=e.final))}cork(){this._duplexState|=iS}uncork(){this._duplexState&=$q,this._writableState.updateNextTick()}_writev(e,r){r(null)}_write(e,r){this._writableState.autoBatch(e,r)}_final(e){e(null)}write(e){return this._writableState.updateNextTick(),this._writableState.push(e)}end(e){return this._writableState.updateNextTick(),this._writableState.end(e),this}},tS=class extends $d{constructor(e){super(e),this._transformState=new pC(this),e&&(e.transform&&(this._transform=e.transform),e.flush&&(this._flush=e.flush))}_write(e,r){this._readableState.buffered>=this._readableState.highWaterMark?this._transformState.data=e:this._transform(e,this._transformState.afterTransform)}_read(e){if(this._transformState.data!==null){let r=this._transformState.data;this._transformState.data=null,e(null),this._transform(r,this._transformState.afterTransform)}else e(null)}destroy(e){super.destroy(e),this._transformState.data!==null&&(this._transformState.data=null,this._transformState.afterTransform())}_transform(e,r){r(null,e)}_flush(e){e(null)}_final(e){this._transformState.afterFinal=e,this._flush(pCe.bind(this))}},SC=class extends tS{};function pCe(t,e){let r=this._transformState.afterFinal;if(t)return r(t);e!=null&&this.push(e),this.push(null),r(null)}function TCe(...t){return new Promise((e,r)=>zq(...t,n=>{if(n)return r(n);e()}))}function zq(t,...e){let r=Array.isArray(t)?[...t,...e]:[t,...e],n=r.length&&typeof r[r.length-1]=="function"?r.pop():null;if(r.length<2)throw new Error("Pipeline requires at least 2 streams");let i=r[0],s=null,o=null;for(let c=1;c<r.length;c++)s=r[c],kd(i)?i.pipe(s,l):(a(i,!0,c>1,l),i.pipe(s)),i=s;if(n){let c=!1,u=kd(s)||!!(s._writableState&&s._writableState.autoDestroy);s.on("error",d=>{o===null&&(o=d)}),s.on("finish",()=>{c=!0,u||n(o)}),u&&s.on("close",()=>n(o||(c?null:uC)))}return s;function a(c,u,d,E){c.on("error",E),c.on("close",f);function f(){if(u&&c._readableState&&!c._readableState.ended||d&&c._writableState&&!c._writableState.ended)return E(uC)}}function l(c){if(!(!c||o)){o=c;for(let u of r)u.destroy(c)}}}function SCe(t){return t}function Kq(t){return!!t._readableState||!!t._writableState}function kd(t){return typeof t._duplexState=="number"&&Kq(t)}function RCe(t){return!!t._readableState&&t._readableState.ended}function ACe(t){return!!t._writableState&&t._writableState.ended}function mCe(t,e={}){let r=t._readableState&&t._readableState.error||t._writableState&&t._writableState.error;return!e.all&&r===rS?null:r}function gCe(t){return kd(t)&&t.readable}function _Ce(t){return(t._duplexState&Ii)!==Ii||(t._duplexState&sS)!==0}function ICe(t){return typeof t=="object"&&t!==null&&typeof t.byteLength=="number"}function Jq(t){return ICe(t)?t.byteLength:1024}function vq(){}function NCe(){this.destroy(new Error("Stream aborted."))}function OCe(t){return t._writev!==eS.prototype._writev&&t._writev!==$d.prototype._writev}Qq.exports={pipeline:zq,pipelinePromise:TCe,isStream:Kq,isStreamx:kd,isEnded:RCe,isFinished:ACe,isDisturbed:_Ce,getStreamError:mCe,Stream:Wd,Writable:eS,Readable:ZT,Duplex:$d,Transform:tS,PassThrough:SC}});var yC=O(hc=>{var $e=lc(),CCe="0000000000000000000",bCe="7777777777777777777",oS=48,Zq=$e.from([117,115,116,97,114,0]),yCe=$e.from([oS,oS]),wCe=$e.from([117,115,116,97,114,32]),LCe=$e.from([32,0]),DCe=4095,jd=257,bC=263;hc.decodeLongPath=function(e,r){return Ec(e,0,e.length,r)};hc.encodePax=function(e){let r="";e.name&&(r+=CC(" path="+e.name+`
`)),e.linkname&&(r+=CC(" linkpath="+e.linkname+`
`));let n=e.pax;if(n)for(let i in n)r+=CC(" "+i+"="+n[i]+`
`);return $e.from(r)};hc.decodePax=function(e){let r={};for(;e.length;){let n=0;for(;n<e.length&&e[n]!==32;)n++;let i=parseInt($e.toString(e.subarray(0,n)),10);if(!i)return r;let s=$e.toString(e.subarray(n+1,i-1)),o=s.indexOf("=");if(o===-1)return r;r[s.slice(0,o)]=s.slice(o+1),e=e.subarray(i)}return r};hc.encode=function(e){let r=$e.alloc(512),n=e.name,i="";if(e.typeflag===5&&n[n.length-1]!=="/"&&(n+="/"),$e.byteLength(n)!==n.length)return null;for(;$e.byteLength(n)>100;){let s=n.indexOf("/");if(s===-1)return null;i+=i?"/"+n.slice(0,s):n.slice(0,s),n=n.slice(s+1)}return $e.byteLength(n)>100||$e.byteLength(i)>155||e.linkname&&$e.byteLength(e.linkname)>100?null:($e.write(r,n),$e.write(r,Qs(e.mode&DCe,6),100),$e.write(r,Qs(e.uid,6),108),$e.write(r,Qs(e.gid,6),116),FCe(e.size,r,124),$e.write(r,Qs(e.mtime.getTime()/1e3|0,11),136),r[156]=oS+UCe(e.type),e.linkname&&$e.write(r,e.linkname,157),$e.copy(Zq,r,jd),$e.copy(yCe,r,bC),e.uname&&$e.write(r,e.uname,265),e.gname&&$e.write(r,e.gname,297),$e.write(r,Qs(e.devmajor||0,6),329),$e.write(r,Qs(e.devminor||0,6),337),i&&$e.write(r,i,345),$e.write(r,Qs(tX(r),6),148),r)};hc.decode=function(e,r,n){let i=e[156]===0?0:e[156]-oS,s=Ec(e,0,100,r),o=Js(e,100,8),a=Js(e,108,8),l=Js(e,116,8),c=Js(e,124,12),u=Js(e,136,12),d=MCe(i),E=e[157]===0?null:Ec(e,157,100,r),f=Ec(e,265,32),p=Ec(e,297,32),h=Js(e,329,8),S=Js(e,337,8),T=tX(e);if(T===256)return null;if(T!==Js(e,148,8))throw new Error("Invalid tar header. Maybe the tar is corrupted or it needs to be gunzipped?");if(PCe(e))e[345]&&(s=Ec(e,345,155,r)+"/"+s);else if(!xCe(e)){if(!n)throw new Error("Invalid tar header: unknown format.")}return i===0&&s&&s[s.length-1]==="/"&&(i=5),{name:s,mode:o,uid:a,gid:l,size:c,mtime:new Date(1e3*u),type:d,linkname:E,uname:f,gname:p,devmajor:h,devminor:S,pax:null}};function PCe(t){return $e.equals(Zq,t.subarray(jd,jd+6))}function xCe(t){return $e.equals(wCe,t.subarray(jd,jd+6))&&$e.equals(LCe,t.subarray(bC,bC+2))}function vCe(t,e,r){return typeof t!="number"?r:(t=~~t,t>=e?e:t>=0||(t+=e,t>=0)?t:0)}function MCe(t){switch(t){case 0:return"file";case 1:return"link";case 2:return"symlink";case 3:return"character-device";case 4:return"block-device";case 5:return"directory";case 6:return"fifo";case 7:return"contiguous-file";case 72:return"pax-header";case 55:return"pax-global-header";case 27:return"gnu-long-link-path";case 28:case 30:return"gnu-long-path"}return null}function UCe(t){switch(t){case"file":return 0;case"link":return 1;case"symlink":return 2;case"character-device":return 3;case"block-device":return 4;case"directory":return 5;case"fifo":return 6;case"contiguous-file":return 7;case"pax-header":return 72}return 0}function eX(t,e,r,n){for(;r<n;r++)if(t[r]===e)return r;return n}function tX(t){let e=256;for(let r=0;r<148;r++)e+=t[r];for(let r=156;r<512;r++)e+=t[r];return e}function Qs(t,e){return t=t.toString(8),t.length>e?bCe.slice(0,e)+" ":CCe.slice(0,e-t.length)+t+" "}function BCe(t,e,r){e[r]=128;for(let n=11;n>0;n--)e[r+n]=t&255,t=Math.floor(t/256)}function FCe(t,e,r){t.toString(8).length>11?BCe(t,e,r):$e.write(e,Qs(t,11),r)}function HCe(t){let e;if(t[0]===128)e=!0;else if(t[0]===255)e=!1;else return null;let r=[],n;for(n=t.length-1;n>0;n--){let o=t[n];e?r.push(o):r.push(255-o)}let i=0,s=r.length;for(n=0;n<s;n++)i+=r[n]*Math.pow(256,n);return e?i:-1*i}function Js(t,e,r){if(t=t.subarray(e,e+r),e=0,t[e]&128)return HCe(t);{for(;e<t.length&&t[e]===32;)e++;let n=vCe(eX(t,32,e,t.length),t.length,t.length);for(;e<n&&t[e]===0;)e++;return n===e?0:parseInt($e.toString(t.subarray(e,n)),8)}}function Ec(t,e,r,n){return $e.toString(t.subarray(e,eX(t,0,e,e+r)),n)}function CC(t){let e=$e.byteLength(t),r=Math.floor(Math.log(e)/Math.log(10))+1;return e+r>=Math.pow(10,r)&&r++,e+r+t}});var oX=O((OBe,sX)=>{var{Writable:GCe,Readable:WCe,getStreamError:rX}=OC(),$Ce=cC(),nX=lc(),pc=yC(),kCe=nX.alloc(0),LC=class{constructor(){this.buffered=0,this.shifted=0,this.queue=new $Ce,this._offset=0}push(e){this.buffered+=e.byteLength,this.queue.push(e)}shiftFirst(e){return this._buffered===0?null:this._next(e)}shift(e){if(e>this.buffered)return null;if(e===0)return kCe;let r=this._next(e);if(e===r.byteLength)return r;let n=[r];for(;(e-=r.byteLength)>0;)r=this._next(e),n.push(r);return nX.concat(n)}_next(e){let r=this.queue.peek(),n=r.byteLength-this._offset;if(e>=n){let i=this._offset?r.subarray(this._offset,r.byteLength):r;return this.queue.shift(),this._offset=0,this.buffered-=n,this.shifted+=n,i}return this.buffered-=e,this.shifted+=e,r.subarray(this._offset,this._offset+=e)}},DC=class extends WCe{constructor(e,r,n){super(),this.header=r,this.offset=n,this._parent=e}_read(e){this.header.size===0&&this.push(null),this._parent._stream===this&&this._parent._update(),e(null)}_predestroy(){this._parent.destroy(rX(this))}_detach(){this._parent._stream===this&&(this._parent._stream=null,this._parent._missing=iX(this.header.size),this._parent._update())}_destroy(e){this._detach(),e(null)}},PC=class extends GCe{constructor(e){super(e),e||(e={}),this._buffer=new LC,this._offset=0,this._header=null,this._stream=null,this._missing=0,this._longHeader=!1,this._callback=wC,this._locked=!1,this._finished=!1,this._pax=null,this._paxGlobal=null,this._gnuLongPath=null,this._gnuLongLinkPath=null,this._filenameEncoding=e.filenameEncoding||"utf-8",this._allowUnknownFormat=!!e.allowUnknownFormat,this._unlockBound=this._unlock.bind(this)}_unlock(e){if(this._locked=!1,e){this.destroy(e),this._continueWrite(e);return}this._update()}_consumeHeader(){if(this._locked)return!1;this._offset=this._buffer.shifted;try{this._header=pc.decode(this._buffer.shift(512),this._filenameEncoding,this._allowUnknownFormat)}catch(e){return this._continueWrite(e),!1}if(!this._header)return!0;switch(this._header.type){case"gnu-long-path":case"gnu-long-link-path":case"pax-global-header":case"pax-header":return this._longHeader=!0,this._missing=this._header.size,!0}return this._locked=!0,this._applyLongHeaders(),this._header.size===0||this._header.type==="directory"?(this.emit("entry",this._header,this._createStream(),this._unlockBound),!0):(this._stream=this._createStream(),this._missing=this._header.size,this.emit("entry",this._header,this._stream,this._unlockBound),!0)}_applyLongHeaders(){this._gnuLongPath&&(this._header.name=this._gnuLongPath,this._gnuLongPath=null),this._gnuLongLinkPath&&(this._header.linkname=this._gnuLongLinkPath,this._gnuLongLinkPath=null),this._pax&&(this._pax.path&&(this._header.name=this._pax.path),this._pax.linkpath&&(this._header.linkname=this._pax.linkpath),this._pax.size&&(this._header.size=parseInt(this._pax.size,10)),this._header.pax=this._pax,this._pax=null)}_decodeLongHeader(e){switch(this._header.type){case"gnu-long-path":this._gnuLongPath=pc.decodeLongPath(e,this._filenameEncoding);break;case"gnu-long-link-path":this._gnuLongLinkPath=pc.decodeLongPath(e,this._filenameEncoding);break;case"pax-global-header":this._paxGlobal=pc.decodePax(e);break;case"pax-header":this._pax=this._paxGlobal===null?pc.decodePax(e):Object.assign({},this._paxGlobal,pc.decodePax(e));break}}_consumeLongHeader(){this._longHeader=!1,this._missing=iX(this._header.size);let e=this._buffer.shift(this._header.size);try{this._decodeLongHeader(e)}catch(r){return this._continueWrite(r),!1}return!0}_consumeStream(){let e=this._buffer.shiftFirst(this._missing);if(e===null)return!1;this._missing-=e.byteLength;let r=this._stream.push(e);return this._missing===0?(this._stream.push(null),r&&this._stream._detach(),r&&this._locked===!1):r}_createStream(){return new DC(this,this._header,this._offset)}_update(){for(;this._buffer.buffered>0&&!this.destroying;){if(this._missing>0){if(this._stream!==null){if(this._consumeStream()===!1)return;continue}if(this._longHeader===!0){if(this._missing>this._buffer.buffered)break;if(this._consumeLongHeader()===!1)return!1;continue}let e=this._buffer.shiftFirst(this._missing);e!==null&&(this._missing-=e.byteLength);continue}if(this._buffer.buffered<512)break;if(this._stream!==null||this._consumeHeader()===!1)return}this._continueWrite(null)}_continueWrite(e){let r=this._callback;this._callback=wC,r(e)}_write(e,r){this._callback=r,this._buffer.push(e),this._update()}_final(e){this._finished=this._missing===0&&this._buffer.buffered===0,e(this._finished?null:new Error("Unexpected end of data"))}_predestroy(){this._continueWrite(null)}_destroy(e){this._stream&&this._stream.destroy(rX(this)),e(null)}[Symbol.asyncIterator](){let e=null,r=null,n=null,i=null,s=null,o=this;return this.on("entry",c),this.on("error",E=>{e=E}),this.on("close",u),{[Symbol.asyncIterator](){return this},next(){return new Promise(l)},return(){return d(null)},throw(E){return d(E)}};function a(E){if(!s)return;let f=s;s=null,f(E)}function l(E,f){if(e)return f(e);if(i){E({value:i,done:!1}),i=null;return}r=E,n=f,a(null),o._finished&&r&&(r({value:void 0,done:!0}),r=n=null)}function c(E,f,p){s=p,f.on("error",wC),r?(r({value:f,done:!1}),r=n=null):i=f}function u(){a(e),r&&(e?n(e):r({value:void 0,done:!0}),r=n=null)}function d(E){return o.destroy(E),a(E),new Promise((f,p)=>{if(o.destroyed)return f({value:void 0,done:!0});o.once("close",function(){E?p(E):f({value:void 0,done:!0})})})}}};sX.exports=function(e){return new PC(e)};function wC(){}function iX(t){return t&=511,t&&512-t}});var lX=O((CBe,xC)=>{var aX={S_IFMT:61440,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960};try{xC.exports=require("fs").constants||aX}catch{xC.exports=aX}});var EX=O((bBe,fX)=>{var{Readable:YCe,Writable:VCe,getStreamError:cX}=OC(),Ta=lc(),Tc=lX(),aS=yC(),qCe=493,XCe=420,uX=Ta.alloc(1024),MC=class extends VCe{constructor(e,r,n){super({mapWritable:zCe,eagerOpen:!0}),this.written=0,this.header=r,this._callback=n,this._linkname=null,this._isLinkname=r.type==="symlink"&&!r.linkname,this._isVoid=r.type!=="file"&&r.type!=="contiguous-file",this._finished=!1,this._pack=e,this._openCallback=null,this._pack._stream===null?this._pack._stream=this:this._pack._pending.push(this)}_open(e){this._openCallback=e,this._pack._stream===this&&this._continueOpen()}_continuePack(e){if(this._callback===null)return;let r=this._callback;this._callback=null,r(e)}_continueOpen(){this._pack._stream===null&&(this._pack._stream=this);let e=this._openCallback;if(this._openCallback=null,e!==null){if(this._pack.destroying)return e(new Error("pack stream destroyed"));if(this._pack._finalized)return e(new Error("pack stream is already finalized"));this._pack._stream=this,this._isLinkname||this._pack._encode(this.header),this._isVoid&&(this._finish(),this._continuePack(null)),e(null)}}_write(e,r){if(this._isLinkname)return this._linkname=this._linkname?Ta.concat([this._linkname,e]):e,r(null);if(this._isVoid)return e.byteLength>0?r(new Error("No body allowed for this entry")):r();if(this.written+=e.byteLength,this._pack.push(e))return r();this._pack._drain=r}_finish(){this._finished||(this._finished=!0,this._isLinkname&&(this.header.linkname=this._linkname?Ta.toString(this._linkname,"utf-8"):"",this._pack._encode(this.header)),dX(this._pack,this.header.size),this._pack._done(this))}_final(e){if(this.written!==this.header.size)return e(new Error("Size mismatch"));this._finish(),e(null)}_getError(){return cX(this)||new Error("tar entry destroyed")}_predestroy(){this._pack.destroy(this._getError())}_destroy(e){this._pack._done(this),this._continuePack(this._finished?null:this._getError()),e()}},UC=class extends YCe{constructor(e){super(e),this._drain=vC,this._finalized=!1,this._finalizing=!1,this._pending=[],this._stream=null}entry(e,r,n){if(this._finalized||this.destroying)throw new Error("already finalized or destroyed");typeof r=="function"&&(n=r,r=null),n||(n=vC),(!e.size||e.type==="symlink")&&(e.size=0),e.type||(e.type=jCe(e.mode)),e.mode||(e.mode=e.type==="directory"?qCe:XCe),e.uid||(e.uid=0),e.gid||(e.gid=0),e.mtime||(e.mtime=new Date),typeof r=="string"&&(r=Ta.from(r));let i=new MC(this,e,n);return Ta.isBuffer(r)?(e.size=r.byteLength,i.write(r),i.end(),i):(i._isVoid,i)}finalize(){if(this._stream||this._pending.length>0){this._finalizing=!0;return}this._finalized||(this._finalized=!0,this.push(uX),this.push(null))}_done(e){e===this._stream&&(this._stream=null,this._finalizing&&this.finalize(),this._pending.length&&this._pending.shift()._continueOpen())}_encode(e){if(!e.pax){let r=aS.encode(e);if(r){this.push(r);return}}this._encodePax(e)}_encodePax(e){let r=aS.encodePax({name:e.name,linkname:e.linkname,pax:e.pax}),n={name:"PaxHeader",mode:e.mode,uid:e.uid,gid:e.gid,size:r.byteLength,mtime:e.mtime,type:"pax-header",linkname:e.linkname&&"PaxHeader",uname:e.uname,gname:e.gname,devmajor:e.devmajor,devminor:e.devminor};this.push(aS.encode(n)),this.push(r),dX(this,r.byteLength),n.size=e.size,n.type=e.type,this.push(aS.encode(n))}_doDrain(){let e=this._drain;this._drain=vC,e()}_predestroy(){let e=cX(this);for(this._stream&&this._stream.destroy(e);this._pending.length;){let r=this._pending.shift();r.destroy(e),r._continueOpen()}this._doDrain()}_read(e){this._doDrain(),e()}};fX.exports=function(e){return new UC(e)};function jCe(t){switch(t&Tc.S_IFMT){case Tc.S_IFBLK:return"block-device";case Tc.S_IFCHR:return"character-device";case Tc.S_IFDIR:return"directory";case Tc.S_IFIFO:return"fifo";case Tc.S_IFLNK:return"symlink"}return"file"}function vC(){}function dX(t,e){e&=511,e&&t.push(uX.subarray(0,512-e))}function zCe(t){return Ta.isBuffer(t)?t:Ta.from(t)}});var hX=O(BC=>{BC.extract=oX();BC.pack=EX()});var SX=O((wBe,TX)=>{var KCe=require("zlib"),JCe=hX(),pX=Nl(),as=function(t){if(!(this instanceof as))return new as(t);t=this.options=pX.defaults(t,{gzip:!1}),typeof t.gzipOptions!="object"&&(t.gzipOptions={}),this.supports={directory:!0,symlink:!0},this.engine=JCe.pack(t),this.compressor=!1,t.gzip&&(this.compressor=KCe.createGzip(t.gzipOptions),this.compressor.on("error",this._onCompressorError.bind(this)))};as.prototype._onCompressorError=function(t){this.engine.emit("error",t)};as.prototype.append=function(t,e,r){var n=this;e.mtime=e.date;function i(o,a){if(o){r(o);return}n.engine.entry(e,a,function(l){r(l,e)})}if(e.sourceType==="buffer")i(null,t);else if(e.sourceType==="stream"&&e.stats){e.size=e.stats.size;var s=n.engine.entry(e,function(o){r(o,e)});t.pipe(s)}else e.sourceType==="stream"&&pX.collectStream(t,i)};as.prototype.finalize=function(){this.engine.finalize()};as.prototype.on=function(){return this.engine.on.apply(this.engine,arguments)};as.prototype.pipe=function(t,e){return this.compressor?this.engine.pipe.apply(this.engine,[this.compressor]).pipe(t,e):this.engine.pipe.apply(this.engine,arguments)};as.prototype.unpipe=function(){return this.compressor?this.compressor.unpipe.apply(this.compressor,arguments):this.engine.unpipe.apply(this.engine,arguments)};TX.exports=as});var mX=O((LBe,AX)=>{"use strict";function QCe(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ZCe=new Int32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]);function RX(t){if(Buffer.isBuffer(t))return t;if(typeof t=="number")return Buffer.alloc(t);if(typeof t=="string")return Buffer.from(t);throw new Error("input must be buffer, number, or string, received "+typeof t)}function ebe(t){let e=RX(4);return e.writeInt32BE(t,0),e}function FC(t,e){t=RX(t),Buffer.isBuffer(e)&&(e=e.readUInt32BE(0));let r=~~e^-1;for(var n=0;n<t.length;n++)r=ZCe[(r^t[n])&255]^r>>>8;return r^-1}function HC(){return ebe(FC.apply(null,arguments))}HC.signed=function(){return FC.apply(null,arguments)};HC.unsigned=function(){return FC.apply(null,arguments)>>>0};var tbe=HC,rbe=QCe(tbe);AX.exports=rbe});var NX=O((DBe,IX)=>{var nbe=require("util").inherits,gX=bI().Transform,ibe=mX(),_X=Nl(),Zs=function(t){if(!(this instanceof Zs))return new Zs(t);t=this.options=_X.defaults(t,{}),gX.call(this,t),this.supports={directory:!0,symlink:!0},this.files=[]};nbe(Zs,gX);Zs.prototype._transform=function(t,e,r){r(null,t)};Zs.prototype._writeStringified=function(){var t=JSON.stringify(this.files);this.write(t)};Zs.prototype.append=function(t,e,r){var n=this;e.crc32=0;function i(s,o){if(s){r(s);return}e.size=o.length||0,e.crc32=ibe.unsigned(o),n.files.push(e),r(null,e)}e.sourceType==="buffer"?i(null,t):e.sourceType==="stream"&&_X.collectStream(t,i)};Zs.prototype.finalize=function(){this._writeStringified(),this.end()};IX.exports=Zs});var GC=O((PBe,OX)=>{var sbe=aW(),zd={},eo=function(t,e){return eo.create(t,e)};eo.create=function(t,e){if(zd[t]){var r=new sbe(t,e);return r.setFormat(t),r.setModule(new zd[t](e)),r}else throw new Error("create("+t+"): format not registered")};eo.registerFormat=function(t,e){if(zd[t])throw new Error("register("+t+"): format already registered");if(typeof e!="function")throw new Error("register("+t+"): format module invalid");if(typeof e.prototype.append!="function"||typeof e.prototype.finalize!="function")throw new Error("register("+t+"): format module missing methods");zd[t]=e};eo.isRegisteredFormat=function(t){return!!zd[t]};eo.registerFormat("zip",Tq());eo.registerFormat("tar",SX());eo.registerFormat("json",NX());OX.exports=eo});var Sa,ls,WC=G(()=>{"use strict";Sa=require("buffer"),ls=class{constructor(e=65536){this.chunkSize=e,this.chunks=[],this.currentBuffer=Sa.Buffer.alloc(e),this.cursor=0}ensureCapacity(e){this.cursor+e>this.chunkSize&&this._flush()}_ensureCapacity(e){this.ensureCapacity(e)}_flush(){this.cursor>0&&(this.chunks.push(this.currentBuffer.subarray(0,this.cursor)),this.currentBuffer=Sa.Buffer.alloc(this.chunkSize),this.cursor=0)}write(e){let r=e.length,n=0;for(;r>0;){let i=this.chunkSize-this.cursor;i===0&&(this._flush(),i=this.chunkSize);let s=Math.min(r,i);e.copy(this.currentBuffer,this.cursor,n,n+s),this.cursor+=s,n+=s,r-=s}}writeByte(e){this._ensureCapacity(1),this.currentBuffer[this.cursor]=e,this.cursor++}writeUnsafeByte(e){this.currentBuffer[this.cursor++]=e}writeInt32LE(e){this._ensureCapacity(4),this.currentBuffer.writeInt32LE(e,this.cursor),this.cursor+=4}writeUnsafeInt32LE(e){this.currentBuffer.writeInt32LE(e,this.cursor),this.cursor+=4}writeDoubleLE(e){this._ensureCapacity(8),this.currentBuffer.writeDoubleLE(e,this.cursor),this.cursor+=8}writeUnsafeDoubleLE(e){this.currentBuffer.writeDoubleLE(e,this.cursor),this.cursor+=8}writeString(e){let r=Sa.Buffer.byteLength(e,"utf8");if(this.cursor+r<=this.chunkSize){this.cursor+=this.currentBuffer.write(e,this.cursor,"utf8");return}this._flush(),r>this.chunkSize?this.chunks.push(Sa.Buffer.from(e,"utf8")):this.cursor+=this.currentBuffer.write(e,this.cursor,"utf8")}writeUtf16LE(e){let r=e.length*2;if(this.cursor+r<=this.chunkSize){for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);this.currentBuffer[this.cursor++]=i&255,this.currentBuffer[this.cursor++]=i>>8&255}return}if(this._flush(),r>this.chunkSize)this.chunks.push(Sa.Buffer.from(e,"utf16le"));else for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);this.currentBuffer[this.cursor++]=i&255,this.currentBuffer[this.cursor++]=i>>8&255}}getChunks(){return this.cursor>0&&(this.chunks.push(this.currentBuffer.subarray(0,this.cursor)),this.currentBuffer=Sa.Buffer.alloc(this.chunkSize),this.cursor=0),this.chunks}reset(){this.chunks=[],this.cursor=0}}});var yX={};Et(yX,{XlsbWriter:()=>cS,default:()=>abe});var CX,bX,lS,obe,cS,abe,wX=G(()=>{"use strict";CX=q(require("fs")),bX=q(GC()),lS=require("stream");WC();obe=/[\\/*?[\]:]/g,cS=class{constructor(e){this.sheetCount=0;this.sheetList=[];this.sstDic=new Map;this.sstCntUnique=0;this.sstCntAll=0;this.colWidths=[];this._autofilterIsOn=!1;this.currentSheetBuffer=null;this.currentSheetRowNum=0;this.currentSheetStartCol=0;this.currentSheetEndCol=0;this.currentSheetDoAutofilter=!1;this.isStreaming=!1;this.filePath=e,this.output=CX.createWriteStream(e),this.archive=(0,bX.default)("zip"),this.archive.pipe(this.output),this._oaEpoch=Date.UTC(1899,11,30),this._sheet1Bytes=Buffer.from([129,1,0,147,1,23,203,4,2,0,64,0,0,0,0,0,0,255,255,255,255,255,255,255,255,0,0,0,0,148,1,16,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,133,1,0,137,1,30,220,3,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,100,0,0,0,0,0,0,0,0,0,0,0,152,1,36,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,1,0,134,1,0,37,6,1,0,2,14,0,128,149,8,2,5,0,38,0,229,3,12,255,255,255,255,8,0,44,1,0,0,0,0,145,1,0,37,6,1,0,2,14,0,128,128,8,2,5,0,38,0,0,25,0,0,0,0,0,0,0,0,44,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,7,12,0,0,0,0,0,0,0,0,0,0,0,0,146,1,0,151,4,66,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,221,3,2,16,0,220,3,48,102,102,102,102,102,102,230,63,102,102,102,102,102,102,230,63,0,0,0,0,0,0,232,63,0,0,0,0,0,0,232,63,51,51,51,51,51,51,211,63,51,51,51,51,51,51,211,63,37,6,1,0,0,16,0,128,128,24,16,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,38,0,130,1,0]),this._workbookBinStart=Buffer.from([131,1,0,128,1,50,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,120,0,108,0,1,0,0,0,55,0,1,0,0,0,54,0,5,0,0,0,50,0,52,0,51,0,50,0,54,0,153,1,12,32,0,1,0,0,0,0,0,0,0,0,0,37,6,1,0,3,15,0,128,151,16,52,24,0,0,0,67,0,58,0,92,0,115,0,113,0,108,0,115,0,92,0,84,0,101,0,115,0,116,0,121,0,90,0,97,0,112,0,105,0,115,0,117,0,88,0,108,0,115,0,98,0,92,0,38,0,37,6,1,0,0,16,0,128,129,24,130,1,0,0,0,0,0,0,0,0,47,0,0,0,49,0,51,0,95,0,110,0,99,0,114,0,58,0,49,0,95,0,123,0,49,0,54,0,53,0,48,0,56,0,68,0,54,0,57,0,45,0,67,0,70,0,56,0,55,0,45,0,52,0,55,0,54,0,57,0,45,0,56,0,52,0,53,0,54,0,45,0,68,0,52,0,65,0,52,0,48,0,49,0,49,0,51,0,49,0,53,0,54,0,55,0,125,0,47,0,0,0,47,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,38,0,135,1,0,37,6,1,0,2,16,0,128,128,24,16,0,0,0,0,13,0,0,0,255,255,255,255,0,0,0,0,38,0,158,1,29,0,0,0,0,158,22,0,0,180,105,0,0,232,38,0,0,88,2,0,0,0,0,0,0,0,0,0,0,120,136,1,0,143,1,0]),this._workbookBinMiddle=Buffer.from([144,1,0]),this._workbookBinEnd=Buffer.from([157,1,26,53,234,2,0,1,0,0,0,100,0,0,0,252,169,241,210,77,98,80,63,1,0,0,0,106,0,155,1,1,0,35,4,3,15,0,0,171,16,1,1,36,0,132,1,0]),this._stylesBin=Buffer.from([150,2,0,231,4,4,2,0,0,0,44,44,164,0,19,0,0,0,121,0,121,0,121,0,121,0,92,0,45,0,109,0,109,0,92,0,45,0,100,0,100,0,92,0,32,0,104,0,104,0,58,0,109,0,109,0,44,30,166,0,12,0,0,0,121,0,121,0,121,0,121,0,92,0,45,0,109,0,109,0,92,0,45,0,100,0,100,0,232,4,0,227,4,4,1,0,0,0,43,39,220,0,0,0,144,1,0,0,0,2,0,0,7,1,0,0,0,0,0,255,2,7,0,0,0,67,0,97,0,108,0,105,0,98,0,114,0,105,0,43,39,220,0,1,0,188,2,0,0,0,2,238,0,7,1,0,0,0,0,0,255,2,7,0,0,0,67,0,97,0,108,0,105,0,98,0,114,0,105,0,37,6,1,0,2,14,0,128,129,8,0,38,0,228,4,0,219,4,4,2,0,0,0,45,68,0,0,0,0,3,64,0,0,0,0,0,255,3,65,0,0,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,45,68,17,0,0,0,3,64,0,0,0,0,0,255,3,65,0,0,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,220,4,0,229,4,4,1,0,0,0,46,51,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,230,4,0,242,4,4,1,0,0,0,47,16,255,255,0,0,0,0,0,0,0,0,0,0,16,16,0,0,243,4,0,233,4,4,4,0,0,0,47,16,0,0,0,0,0,0,0,0,0,0,0,0,16,16,0,0,47,16,0,0,164,0,0,0,0,0,0,0,0,0,16,16,1,0,47,16,0,0,166,0,0,0,0,0,0,0,0,0,16,16,1,0,47,16,0,0,0,1,1,0,0,0,0,0,0,0,16,16,0,0,234,4,0,235,4,4,1,0,0,0,37,6,1,0,2,17,0,128,128,24,16,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,38,0,48,28,0,0,0,0,1,0,0,0,8,0,0,0,78,0,111,0,114,0,109,0,97,0,108,0,110,0,121,0,236,4,0,249,3,4,0,0,0,0,250,3,0,252,3,80,0,0,0,0,17,0,0,0,84,0,97,0,98,0,108,0,101,0,83,0,116,0,121,0,108,0,101,0,77,0,101,0,100,0,105,0,117,0,109,0,50,0,17,0,0,0,80,0,105,0,118,0,111,0,116,0,83,0,116,0,121,0,108,0,101,0,76,0,105,0,103,0,104,0,116,0,49,0,54,0,253,3,0,35,4,2,14,0,0,235,8,0,246,8,42,0,0,0,0,17,0,0,0,83,0,108,0,105,0,99,0,101,0,114,0,83,0,116,0,121,0,108,0,101,0,76,0,105,0,103,0,104,0,116,0,49,0,247,8,0,236,8,0,36,0,35,4,3,15,0,0,176,16,0,178,16,50,0,0,0,0,21,0,0,0,84,0,105,0,109,0,101,0,83,0,108,0,105,0,99,0,101,0,114,0,83,0,116,0,121,0,108,0,101,0,76,0,105,0,103,0,104,0,116,0,49,0,179,16,0,177,16,0,36,0,151,2,0]),this._binaryIndexBin=Buffer.from([42,24,0,0,0,0,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,149,2,0]),this._rRkIntegerLowerLimit=-1<<29,this._rRkIntegerUpperLimit=(1<<29)-1,this._autoFilterStartBytes=Buffer.from([161,1,16]),this._autoFilterEndBytes=Buffer.from([162,1,0]),this._stickHeaderA1bytes=Buffer.from([151,1,29,0,0,0,0,0,0,0,0,0,0,0,0,0,0,240,63,1,0,0,0,0,0,0,0,2,0,0,0,3]),this._magicFilterExcel2016Fix0=Buffer.from([225,2,0,229,2,0,234,2]),this._magicFilterExcel2016Fix1=Buffer.from([39,70,33,0,0,0,0,255,0,0,0,15,0,0,0,95,0,70,0,105,0,108,0,116,0,101,0,114,0,68,0,97,0,116,0,97,0,98,0,97,0,115,0,101,0,15,0,0,0,59,255,0]),this._magicFilterExcel2016Fix2=Buffer.from([0,0,0,0,255,255,255,255])}_sanitizeSheetName(e){if(!e||typeof e!="string")return`Sheet${this.sheetCount+1}`;let r=e.replace(obe,"_");return r.length>31&&(r=r.substring(0,31)),r.trim().length===0&&(r=`Sheet${this.sheetCount+1}`),r}addSheet(e,r=!1){let n=this._sanitizeSheetName(e);this.sheetCount++,this.sheetList.push({name:n,pathInArchive:`xl/worksheets/sheet${this.sheetCount}.bin`,hidden:r,nameInArchive:`sheet${this.sheetCount}.bin`,sheetId:this.sheetCount,filterHeaderRange:null})}startSheet(e,r,n,i={}){if(this.isStreaming)throw new Error("Already in streaming mode. Call endSheet() first.");let{hidden:s=!1,doAutofilter:o=!0}=i;this.addSheet(e,s),this.isStreaming=!0,this.currentSheetBuffer=new ls,this.currentSheetRowNum=0,this.currentSheetStartCol=0,this.currentSheetEndCol=r,this.currentSheetDoAutofilter=o&&n!==void 0;let a=this.currentSheetBuffer;if(this.colWidths=new Array(r).fill(-1),n)for(let c=0;c<r;c++){let d=1.25*(n[c]?n[c].length:0)+2;d>80&&(d=80),this.colWidths[c]<d&&(this.colWidths[c]=d)}let l=Buffer.from(this._sheet1Bytes);l.writeInt32LE(this.currentSheetStartCol,40),l.writeInt32LE(this.currentSheetEndCol,44),this.sheetCount!==1&&(l[54]=156),a.write(l.subarray(0,84)),this.currentSheetDoAutofilter&&a.write(this._stickHeaderA1bytes),a.write(l.subarray(84,159)),a.writeByte(134),a.writeByte(3);for(let c=this.currentSheetStartCol;c<this.currentSheetEndCol;c++){a.writeByte(0),a.writeByte(60),a.writeByte(18),a.writeInt32LE(c),a.writeInt32LE(c);let u=this.colWidths[c]>0?Math.floor(this.colWidths[c]):10;a.writeByte(0),a.writeByte(Math.max(0,Math.min(255,u))),a.writeByte(0),a.writeByte(0),a.writeByte(0),a.writeByte(0),a.writeByte(0),a.writeByte(0),a.writeByte(2)}if(a.writeByte(0),a.writeByte(135),a.writeByte(3),a.writeByte(0),a.write(l.subarray(159,175)),a.write(Buffer.from([38,0])),n){this.createRowHeader(a,this.currentSheetRowNum,this.currentSheetStartCol,this.currentSheetEndCol);for(let c=0;c<n.length;c++)this.writeString(a,n[c],c,!0);this.currentSheetRowNum++}}writeRow(e){if(!this.isStreaming||!this.currentSheetBuffer)throw new Error("Not in streaming mode. Call startSheet() first.");if(e.length!==this.currentSheetEndCol-this.currentSheetStartCol)throw new Error(`Row length mismatch. Expected ${this.currentSheetEndCol-this.currentSheetStartCol} columns, got ${e.length}`);let r=this.currentSheetBuffer;this.createRowHeader(r,this.currentSheetRowNum,this.currentSheetStartCol,this.currentSheetEndCol);for(let n=0;n<e.length;n++){let i=e[n];i!=null&&(typeof i=="number"?Number.isInteger(i)?i>=this._rRkIntegerLowerLimit&&i<=this._rRkIntegerUpperLimit?this.writeRkNumberInteger(r,i,n):this.writeDouble(r,i,n):this.writeDouble(r,i,n):typeof i=="bigint"?this.writeString(r,i.toString(),n):typeof i=="boolean"?this.writeBool(r,i,n):i instanceof Date?this.writeDateTime(r,i,n):this.writeString(r,i.toString(),n))}this.currentSheetRowNum++}endSheet(){if(!this.isStreaming||!this.currentSheetBuffer)throw new Error("Not in streaming mode. Call startSheet() first.");let e=this.currentSheetBuffer,r=Buffer.from(this._sheet1Bytes);if(e.write(r.subarray(218,290)),this.currentSheetDoAutofilter){this._autofilterIsOn=!0;let n=this.currentSheetRowNum;e.write(this._autoFilterStartBytes);let i=Buffer.alloc(8);i.writeInt32LE(0,0),i.writeInt32LE(n-1,4),e.write(i);let s=Buffer.alloc(8);s.writeInt32LE(this.currentSheetStartCol,0),s.writeInt32LE(this.currentSheetEndCol-1,4),e.write(s),e.write(this._autoFilterEndBytes);let o=this.sheetList[this.sheetCount-1];o.filterData={startRow:0,endRow:this.currentSheetRowNum-1,startColumn:this.currentSheetStartCol,endColumn:this.currentSheetEndCol-1}}e.write(r.subarray(290)),this.archive.append(lS.Readable.from(e.getChunks()),{name:this.sheetList[this.sheetCount-1].pathInArchive}),this.isStreaming=!1,this.currentSheetBuffer=null,this.currentSheetRowNum=0,this.currentSheetStartCol=0,this.currentSheetEndCol=0,this.currentSheetDoAutofilter=!1}writeSheet(e,r=null,n=!0){let i=new ls,s=0;if(e.length>0?s=e[0].length:r&&(s=r.length),this.colWidths=new Array(s).fill(-1),r)for(let u=0;u<s;u++){let E=1.25*(r[u]?r[u].length:0)+2;E>80&&(E=80),this.colWidths[u]<E&&(this.colWidths[u]=E)}for(let u=0;u<Math.min(e.length,100);u++){let d=e[u];for(let E=0;E<d.length;E++){let f=d[E],h=1.25*(f?f.toString().length:0)+2;h>80&&(h=80),this.colWidths[E]<h&&(this.colWidths[E]=h)}}let o=Buffer.from(this._sheet1Bytes),a=0,l=s;o.writeInt32LE(a,40),o.writeInt32LE(l,44),this.sheetCount!==1&&(o[54]=156),i.write(o.subarray(0,84)),n&&r&&i.write(this._stickHeaderA1bytes),i.write(o.subarray(84,159)),i.writeByte(134),i.writeByte(3);for(let u=a;u<l;u++){i.writeByte(0),i.writeByte(60),i.writeByte(18),i.writeInt32LE(u),i.writeInt32LE(u);let d=this.colWidths[u]>0?Math.floor(this.colWidths[u]):10;i.writeByte(0),i.writeByte(Math.max(0,Math.min(255,d))),i.writeByte(0),i.writeByte(0),i.writeByte(0),i.writeByte(0),i.writeByte(0),i.writeByte(0),i.writeByte(2)}i.writeByte(0),i.writeByte(135),i.writeByte(3),i.writeByte(0),i.write(o.subarray(159,175)),i.write(Buffer.from([38,0]));let c=0;if(r){this.createRowHeader(i,c,a,l);for(let u=0;u<r.length;u++)this.writeString(i,r[u],u,!0);c++}for(let u=0;u<e.length;u++){this.createRowHeader(i,c,a,l);let d=e[u];for(let E=0;E<d.length;E++){let f=d[E];f!=null&&(typeof f=="number"?Number.isInteger(f)?f>=this._rRkIntegerLowerLimit&&f<=this._rRkIntegerUpperLimit?this.writeRkNumberInteger(i,f,E):this.writeDouble(i,f,E):this.writeDouble(i,f,E):typeof f=="bigint"?this.writeString(i,f.toString(),E):typeof f=="boolean"?this.writeBool(i,f,E):f instanceof Date?this.writeDateTime(i,f,E):this.writeString(i,f.toString(),E))}c++}if(i.write(o.subarray(218,290)),n&&r){this._autofilterIsOn=!0;let u=e.length+1;i.write(this._autoFilterStartBytes);let d=Buffer.alloc(8);d.writeInt32LE(0,0),d.writeInt32LE(u-1,4),i.write(d);let E=Buffer.alloc(8);E.writeInt32LE(a,0),E.writeInt32LE(l-1,4),i.write(E),i.write(this._autoFilterEndBytes);let f=this.sheetList[this.sheetCount-1];f.filterData={startRow:0,endRow:e.length,startColumn:a,endColumn:l-1}}i.write(o.subarray(290)),this.archive.append(lS.Readable.from(i.getChunks()),{name:this.sheetList[this.sheetCount-1].pathInArchive})}_getColumnLetter(e){if(e<26)return String.fromCharCode(65+e);if(e<702){let r=Math.floor(e/26)-1,n=e%26;return String.fromCharCode(65+r)+String.fromCharCode(65+n)}return"A"}createRowHeader(e,r,n,i){e.ensureCapacity(27),e.writeUnsafeByte(0),e.writeUnsafeByte(25),e.writeUnsafeInt32LE(r),e.writeUnsafeInt32LE(0),e.writeUnsafeByte(44),e.writeUnsafeByte(1),e.writeUnsafeByte(0),e.writeUnsafeByte(0),e.writeUnsafeByte(0),e.writeUnsafeByte(1),e.writeUnsafeByte(0),e.writeUnsafeByte(0),e.writeUnsafeByte(0),e.writeUnsafeInt32LE(n),e.writeUnsafeInt32LE(i)}writeRkNumberInteger(e,r,n,i=0){e.ensureCapacity(14),e.writeUnsafeByte(2),e.writeUnsafeByte(12),e.writeUnsafeInt32LE(n),e.writeUnsafeByte(i),e.writeUnsafeByte(0),e.writeUnsafeByte(0),e.writeUnsafeByte(0);let s=r<<2|2;e.writeUnsafeInt32LE(s)}writeDouble(e,r,n,i=0){e.ensureCapacity(18),e.writeUnsafeByte(5),e.writeUnsafeByte(16),e.writeUnsafeInt32LE(n),e.writeUnsafeByte(i),e.writeUnsafeByte(0),e.writeUnsafeByte(0),e.writeUnsafeByte(0),e.writeUnsafeDoubleLE(r)}writeBool(e,r,n){e.ensureCapacity(13),e.writeUnsafeByte(4),e.writeUnsafeByte(9),e.writeUnsafeInt32LE(n),e.writeUnsafeInt32LE(0),e.writeUnsafeByte(r?1:0)}writeDateTime(e,r,n){let i=r.getTimezoneOffset()*6e4,s=(r.getTime()-i-this._oaEpoch)/864e5;this.writeDouble(e,s,n,1)}writeString(e,r,n,i=!1){let s;this.sstDic.has(r)?s=this.sstDic.get(r):(s=this.sstCntUnique,this.sstDic.set(r,s),this.sstCntUnique++),this.sstCntAll++,e.ensureCapacity(17),e.writeUnsafeByte(7),e.writeUnsafeByte(12),e.writeUnsafeInt32LE(n),e.writeUnsafeByte(i?3:0),e.writeUnsafeByte(0),e.writeUnsafeByte(0),e.writeUnsafeByte(0),e.writeUnsafeInt32LE(s)}saveSst(){let e=new ls;e.writeByte(159),e.writeByte(1),e.writeByte(8),e.writeInt32LE(this.sstCntUnique),e.writeInt32LE(this.sstCntAll);for(let[r]of this.sstDic){let n=r.length;e.writeByte(19);let i=5+2*n;if(i>=128){e.writeByte(128+i%128);let s=i>>7;s>=256?e.writeByte(128+s%128):e.writeByte(s),e.writeByte(i>>14),i>>14>0&&e.writeByte(0)}else e.writeByte(i&255),e.writeByte(i>>8&255);e.writeInt32LE(n),e.writeUtf16LE(r)}e.writeByte(160),e.writeByte(1),e.writeByte(0),this.archive.append(lS.Readable.from(e.getChunks()),{name:"xl/sharedStrings.bin"})}_writeFilterDefinedName(e,r,n){let i=r.filterData,s=r.sheetId-1,o=Buffer.alloc(this._magicFilterExcel2016Fix1.length);this._magicFilterExcel2016Fix1.copy(o);let a=this._magicFilterExcel2016Fix1.length-2;o[7]=s,o[a]=n,e.push(o);let l=Buffer.alloc(8);l.writeInt32LE(i.startRow,0),l.writeInt32LE(i.endRow,4),e.push(l);let c=Buffer.alloc(4);c.writeInt16LE(i.startColumn,0),c.writeInt16LE(i.endColumn,2),e.push(c),e.push(this._magicFilterExcel2016Fix2)}finalize(){return new Promise((e,r)=>{try{this.saveSst(),this.archive.append(this._stylesBin,{name:"xl/styles.bin"});let n=[];n.push(this._workbookBinStart);for(let a of this.sheetList){let l=`rId${a.sheetId}`,c=16+a.name.length*2+l.length*2,u=Buffer.alloc(3+c);u[0]=156,u[1]=1,u[2]=c;let d=3;u.writeInt32LE(a.hidden?1:0,d),d+=4,u.writeInt32LE(a.sheetId,d),d+=4,u.writeInt32LE(l.length,d),d+=4;for(let E=0;E<l.length;E++){let f=l.charCodeAt(E);u[d++]=f&255,u[d++]=f>>8&255}u.writeInt32LE(a.name.length,d),d+=4;for(let E=0;E<a.name.length;E++){let f=a.name.charCodeAt(E);u[d++]=f&255,u[d++]=f>>8&255}n.push(u)}if(n.push(this._workbookBinMiddle),this._autofilterIsOn){let a=this.sheetList.filter(c=>c.filterData),l=a.length;if(l>0){n.push(this._magicFilterExcel2016Fix0);let c=16+(l-1)*12,u=Buffer.from([c,l,0,0,0]);n.push(u);for(let d=0;d<l;d++){let E=a[d].sheetId-1,f=Buffer.alloc(12);f.writeInt32LE(0,0),f[4]=E,f[8]=E,n.push(f)}n.push(Buffer.from([226,2,0]));for(let d=0;d<l;d++){let E=a[d];this._writeFilterDefinedName(n,E,d)}}}n.push(this._workbookBinEnd),this.archive.append(Buffer.concat(n),{name:"xl/workbook.bin"});for(let a of this.sheetList)this.archive.append(this._binaryIndexBin,{name:`xl/worksheets/binaryIndex${a.sheetId}.bin`});let i=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types">
<Default Extension="bin" ContentType="application/vnd.ms-excel.sheet.binary.macroEnabled.main"/>
<Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml"/>
<Default Extension="xml" ContentType="application/xml"/>`;for(let a of this.sheetList)i+=`<Override PartName="/${a.pathInArchive}" ContentType="application/vnd.ms-excel.worksheet"/>`,i+=`<Override PartName="/xl/worksheets/binaryIndex${a.sheetId}.bin" ContentType="application/vnd.ms-excel.binIndexWs"/>`;i+=`<Override PartName="/xl/styles.bin" ContentType="application/vnd.ms-excel.styles"/>
<Override PartName="/xl/sharedStrings.bin" ContentType="application/vnd.ms-excel.sharedStrings"/>
</Types>`,this.archive.append(i,{name:"[Content_Types].xml"});let s=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">`;for(let a of this.sheetList){let l=`rId${a.sheetId}`;s+=`<Relationship Id="${l}" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="worksheets/${a.nameInArchive}"/>`}s+=`<Relationship Id="rId${this.sheetList.length+2}" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Target="styles.bin"/>
<Relationship Id="rId${this.sheetList.length+3}" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings" Target="sharedStrings.bin"/>
</Relationships>`,this.archive.append(s,{name:"xl/_rels/workbook.bin.rels"}),this.archive.append(`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">
<Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.bin"/>
</Relationships>`,{name:"_rels/.rels"});for(let a of this.sheetList){let l=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">
<Relationship Id="rId1" Type="http://schemas.microsoft.com/office/2006/relationships/xlBinaryIndex" Target="binaryIndex${a.sheetId}.bin"/>
</Relationships>`;this.archive.append(l,{name:`xl/worksheets/_rels/${a.nameInArchive}.rels`})}this.output.on("close",()=>e()),this.archive.on("error",a=>r(a)),this.archive.finalize()}catch(n){r(n)}})}},abe=cS});var cs={};Et(cs,{copyFileToClipboard:()=>fS,exportCsvToXlsb:()=>dbe,exportQueryToXlsb:()=>YC,exportStructuredToXlsb:()=>fbe,getTempFilePath:()=>Ebe});function kC(t){if(typeof t=="string"&&t.length>0){if(t.length>15||/^-?0\d+/.test(t))return t;if(/^-?\d+(\.\d+)?$/.test(t)){let e=parseFloat(t);if(Number.isFinite(e))return e}}return t}function lbe(t){return t.map(kC)}async function YC(t,e,r,n=!1,i,s){let o=null;try{i&&i("Connecting to database...");let a={host:t.host,port:t.port||5480,database:t.database,user:t.user,password:t.password},l=Ir();o=new l(a),await o.connect();let c=new $C(r),{SqlParser:u}=await Promise.resolve().then(()=>(fo(),Aw)),d=u.splitStatements(e),E=0,f=0;for(let m=0;m<d.length;m++){let R=d[m];if(!R.trim())continue;let A=d.length>1?`Result ${m+1}`:"Query Results";i&&i(`Executing query ${m+1}/${d.length}...`);try{let I=o.createCommand(R);s&&(I.commandTimeout=s);let w=await I.executeReader(),g=[],L=[],y=new Set(["INT8","INT2","INT4","NUMERIC","FLOAT4","FLOAT8"]);for(let B=0;B<w.fieldCount;B++){let F=w.getName(B);g.push(F);try{let V=w.getTypeName(B);L.push(y.has(V))}catch{L.push(!1)}}let P=g.length;f=Math.max(f,P),c.startSheet(A,P,g,{doAutofilter:!0});let v=0;for(;await w.read();){let B=[];for(let F=0;F<w.fieldCount;F++){let V=w.getValue(F);L[F]&&(V=kC(V)),B.push(V)}c.writeRow(B),v++,v%1e4===0&&i&&i(`Streaming ${v.toLocaleString()} rows to "${A}"...`)}c.endSheet(),E+=v,i&&i(`Written ${v.toLocaleString()} rows to sheet "${A}"`)}catch(I){let w=I instanceof Error?I.message:String(I);c.startSheet(`Error ${m+1}`,1,["Error"],{doAutofilter:!1}),c.writeRow([`Error executing query: ${w}`]),c.endSheet()}}let p=e.split(`
`);c.startSheet("SQL Code",1,void 0,{doAutofilter:!1}),c.writeRow(["SQL Query:"]);for(let m of p)c.writeRow([m]);c.endSheet(),i&&i("Finalizing file..."),await c.finalize();let S=uS.statSync(r).size/(1024*1024);i&&(i("XLSB file created successfully"),i(`  - Total Rows: ${E.toLocaleString()}`),i(`  - File size: ${S.toFixed(1)} MB`),i(`  - Location: ${r}`));let T={success:!0,message:`Successfully exported ${E} rows to ${r}`,details:{rows_exported:E,columns:f,file_size_mb:parseFloat(S.toFixed(1)),file_path:r}};if(n){i&&i("Copying to clipboard...");let m=await fS(r);T.details&&(T.details.clipboard_success=m)}return T}catch(a){return{success:!1,message:`Export error: ${a instanceof Error?a.message:String(a)}`}}finally{if(o)try{await o.close()}catch{}}}function ube(t){return t?cbe.has(t.toUpperCase()):!1}async function dbe(t,e,r=!1,n={source:"Unknown"},i){try{i&&i("Initializing XLSB writer...");let s=new $C(e),o=0,a=0,l=[],c=(f,p)=>{let h=f.split(/\r?\n/),S=A=>{let I=[],w=0,g=!1;for(let y=0;y<A.length;y++)if(A[y]==='"')g=!g;else if(A[y]===","&&!g){let P=A.substring(w,y);P.startsWith('"')&&P.endsWith('"')&&(P=P.substring(1,P.length-1).replace(/""/g,'"')),I.push(P),w=y+1}let L=A.substring(w);return L.startsWith('"')&&L.endsWith('"')&&(L=L.substring(1,L.length-1).replace(/""/g,'"')),I.push(L),I},T=0;for(;T<h.length&&!h[T].trim();)T++;if(T>=h.length)return;let m=S(h[T]);if(m.length===0)return;a=Math.max(a,m.length),s.startSheet(p,m.length,m,{doAutofilter:!0});let R=0;for(let A=T+1;A<h.length;A++){let I=h[A];if(!I.trim())continue;let w=S(I);s.writeRow(lbe(w)),R++}s.endSheet(),o+=R};Array.isArray(t)?(i&&i(`Processing ${t.length} result sets...`),t.forEach((f,p)=>{let h=f.name||`Result ${p+1}`;i&&i(`Processing sheet "${h}"...`),c(f.csv,h),f.sql&&l.push({name:h,sql:f.sql})})):(i&&i("Reading CSV content..."),c(t,"Query Results"),n.sql?l.push({name:"Query Results",sql:n.sql}):n.source&&(s.startSheet("CSV Source",1,void 0,{doAutofilter:!1}),s.writeRow(["CSV Source:"]),s.writeRow([n.source]),s.endSheet())),l.length>0&&(s.startSheet("SQL Code",1,void 0,{doAutofilter:!1}),l.forEach(f=>{s.writeRow([`--- SQL for ${f.name} ---`]),f.sql.split(`
`).forEach(p=>{s.writeRow([p])}),s.writeRow([""])}),s.endSheet()),i&&i("Finalizing XLSB file..."),await s.finalize();let d=uS.statSync(e).size/(1024*1024);i&&(i("XLSB file created successfully"),i(`  - Rows: ${o.toLocaleString()}`),i(`  - File size: ${d.toFixed(1)} MB`));let E={success:!0,message:`Successfully exported ${o} rows to ${e}`,details:{rows_exported:o,columns:a,file_size_mb:parseFloat(d.toFixed(1)),file_path:e}};if(r){i&&i("Copying file to clipboard...");let f=await fS(e);E.details&&(E.details.clipboard_success=f)}return E}catch(s){return{success:!1,message:`Export failed: ${s instanceof Error?s.message:String(s)}`}}}async function fbe(t,e,r=!1,n){try{n&&n("Initializing XLSB writer...");let i=new $C(e),s=0,o=0,a=[];for(let d of t){let E=d.name||"Sheet";n&&n(`Processing sheet "${E}"...`);let f=d.columns.map(h=>h.name),p=d.columns.map(h=>ube(h.type));o=Math.max(o,f.length),i.startSheet(E,f.length,f,{doAutofilter:!0});for(let h of d.rows){let S=h.map((T,m)=>p[m]?kC(T):T);i.writeRow(S),s++}i.endSheet(),d.sql&&a.push({name:E,sql:d.sql})}a.length>0&&(i.startSheet("SQL Code",1,void 0,{doAutofilter:!1}),a.forEach(d=>{i.writeRow([`--- SQL for ${d.name} ---`]),d.sql.split(`
`).forEach(E=>{i.writeRow([E])}),i.writeRow([""])}),i.endSheet()),n&&n("Finalizing XLSB file..."),await i.finalize();let c=uS.statSync(e).size/(1024*1024);n&&(n("XLSB file created successfully"),n(`  - Rows: ${s.toLocaleString()}`),n(`  - File size: ${c.toFixed(1)} MB`));let u={success:!0,message:`Successfully exported ${s} rows to ${e}`,details:{rows_exported:s,columns:o,file_size_mb:parseFloat(c.toFixed(1)),file_path:e}};if(r){n&&n("Copying file to clipboard...");let d=await fS(e);u.details&&(u.details.clipboard_success=d)}return u}catch(i){return{success:!1,message:`Export failed: ${i instanceof Error?i.message:String(i)}`}}}async function fS(t){return dS.platform()!=="win32"?(console.error("Clipboard file copy is only supported on Windows"),!1):new Promise(e=>{try{let r=Sc.normalize(Sc.resolve(t)),n=`Set-Clipboard -Path "${r.replace(/"/g,'`"')}"`,i=(0,LX.spawn)("powershell.exe",["-NoProfile","-NonInteractive","-Command",n]),s="";i.stderr.on("data",o=>{s+=o.toString()}),i.on("close",o=>{o!==0?(console.error(`PowerShell clipboard copy failed: ${s}`),e(!1)):(console.log(`File copied to clipboard: ${r}`),e(!0))}),i.on("error",o=>{console.error(`Error spawning PowerShell: ${o.message}`),e(!1)})}catch(r){let n=r instanceof Error?r.message:String(r);console.error(`Error copying file to clipboard: ${n}`),e(!1)}})}function Ebe(){let t=dS.tmpdir(),r=`netezza_export_${Date.now()}.xlsb`;return Sc.join(t,r)}var uS,Sc,dS,LX,$C,cbe,Oi=G(()=>{"use strict";uS=q(require("fs")),Sc=q(require("path")),dS=q(require("os")),LX=require("child_process"),$C=(wX(),gs(yX)).default;cbe=new Set(["INT8","INT2","INT4","NUMERIC","FLOAT4","FLOAT8","INTEGER","BIGINT","SMALLINT","DECIMAL","REAL","DOUBLE PRECISION"])});var vX=O((HBe,xX)=>{xX.exports=hS;function hS(){this.pending=0,this.max=1/0,this.listeners=[],this.waiting=[],this.error=null}hS.prototype.go=function(t){this.pending<this.max?PX(this,t):this.waiting.push(t)};hS.prototype.wait=function(t){this.pending===0?t(this.error):this.listeners.push(t)};hS.prototype.hold=function(){return DX(this)};function DX(t){t.pending+=1;var e=!1;return r;function r(i){if(e)throw new Error("callback called twice");if(e=!0,t.error=t.error||i,t.pending-=1,t.waiting.length>0&&t.pending<t.max)PX(t,t.waiting.shift());else if(t.pending===0){var s=t.listeners;t.listeners=[],s.forEach(n)}}function n(i){i(t.error)}}function PX(t,e){e(DX(t))}});var UX=O(Jd=>{var Kd=require("fs"),pS=require("util"),XC=require("stream"),MX=XC.Readable,jC=XC.Writable,hbe=XC.PassThrough,pbe=vX(),TS=require("events").EventEmitter;Jd.createFromBuffer=Tbe;Jd.createFromFd=Sbe;Jd.BufferSlicer=ds;Jd.FdSlicer=us;pS.inherits(us,TS);function us(t,e){e=e||{},TS.call(this),this.fd=t,this.pend=new pbe,this.pend.max=1,this.refCount=0,this.autoClose=!!e.autoClose}us.prototype.read=function(t,e,r,n,i){var s=this;s.pend.go(function(o){Kd.read(s.fd,t,e,r,n,function(a,l,c){o(),i(a,l,c)})})};us.prototype.write=function(t,e,r,n,i){var s=this;s.pend.go(function(o){Kd.write(s.fd,t,e,r,n,function(a,l,c){o(),i(a,l,c)})})};us.prototype.createReadStream=function(t){return new SS(this,t)};us.prototype.createWriteStream=function(t){return new RS(this,t)};us.prototype.ref=function(){this.refCount+=1};us.prototype.unref=function(){var t=this;if(t.refCount-=1,t.refCount>0)return;if(t.refCount<0)throw new Error("invalid unref");t.autoClose&&Kd.close(t.fd,e);function e(r){r?t.emit("error",r):t.emit("close")}};pS.inherits(SS,MX);function SS(t,e){e=e||{},MX.call(this,e),this.context=t,this.context.ref(),this.start=e.start||0,this.endOffset=e.end,this.pos=this.start,this.destroyed=!1}SS.prototype._read=function(t){var e=this;if(!e.destroyed){var r=Math.min(e._readableState.highWaterMark,t);if(e.endOffset!=null&&(r=Math.min(r,e.endOffset-e.pos)),r<=0){e.destroyed=!0,e.push(null),e.context.unref();return}e.context.pend.go(function(n){if(e.destroyed)return n();var i=Buffer.allocUnsafe(r);Kd.read(e.context.fd,i,0,r,e.pos,function(s,o){s?e.destroy(s):o===0?(e.destroyed=!0,e.push(null),e.context.unref()):(e.pos+=o,e.push(i.slice(0,o))),n()})})}};SS.prototype.destroy=function(t){this.destroyed||(t=t||new Error("stream destroyed"),this.destroyed=!0,this.emit("error",t),this.context.unref())};pS.inherits(RS,jC);function RS(t,e){e=e||{},jC.call(this,e),this.context=t,this.context.ref(),this.start=e.start||0,this.endOffset=e.end==null?1/0:+e.end,this.bytesWritten=0,this.pos=this.start,this.destroyed=!1,this.on("finish",this.destroy.bind(this))}RS.prototype._write=function(t,e,r){var n=this;if(!n.destroyed){if(n.pos+t.length>n.endOffset){var i=new Error("maximum file length exceeded");i.code="ETOOBIG",n.destroy(),r(i);return}n.context.pend.go(function(s){if(n.destroyed)return s();Kd.write(n.context.fd,t,0,t.length,n.pos,function(o,a){o?(n.destroy(),s(),r(o)):(n.bytesWritten+=a,n.pos+=a,n.emit("progress"),s(),r())})})}};RS.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.context.unref())};pS.inherits(ds,TS);function ds(t,e){TS.call(this),e=e||{},this.refCount=0,this.buffer=t,this.maxChunkSize=e.maxChunkSize||Number.MAX_SAFE_INTEGER}ds.prototype.read=function(t,e,r,n,i){if(!(0<=e&&e<=t.length))throw new RangeError("offset outside buffer: 0 <= "+e+" <= "+t.length);if(n<0)throw new RangeError("position is negative: "+n);if(e+r>t.length&&(r=t.length-e),n+r>this.buffer.length&&(r=this.buffer.length-n),r<=0){setImmediate(function(){i(null,0)});return}this.buffer.copy(t,e,n,n+r),setImmediate(function(){i(null,r)})};ds.prototype.write=function(t,e,r,n,i){t.copy(this.buffer,n,e,e+r),setImmediate(function(){i(null,r,t)})};ds.prototype.createReadStream=function(t){t=t||{};var e=new hbe(t);e.destroyed=!1,e.start=t.start||0,e.endOffset=t.end,e.pos=e.endOffset||this.buffer.length;for(var r=this.buffer.slice(e.start,e.pos),n=0;;){var i=n+this.maxChunkSize;if(i>=r.length){n<r.length&&e.write(r.slice(n,r.length));break}e.write(r.slice(n,i)),n=i}return e.end(),e.destroy=function(){e.destroyed=!0},e};ds.prototype.createWriteStream=function(t){var e=this;t=t||{};var r=new jC(t);return r.start=t.start||0,r.endOffset=t.end==null?this.buffer.length:+t.end,r.bytesWritten=0,r.pos=r.start,r.destroyed=!1,r._write=function(n,i,s){if(!r.destroyed){var o=r.pos+n.length;if(o>r.endOffset){var a=new Error("maximum file length exceeded");a.code="ETOOBIG",r.destroyed=!0,s(a);return}n.copy(e.buffer,r.pos,0,n.length),r.bytesWritten+=n.length,r.pos=o,r.emit("progress"),s()}},r.destroy=function(){r.destroyed=!0},r};ds.prototype.ref=function(){this.refCount+=1};ds.prototype.unref=function(){if(this.refCount-=1,this.refCount<0)throw new Error("invalid unref")};function Tbe(t,e){return new ds(t,e)}function Sbe(t,e){return new us(t,e)}});var HX=O((WBe,FX)=>{var to=require("buffer").Buffer,zC=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];typeof Int32Array<"u"&&(zC=new Int32Array(zC));function BX(t){if(to.isBuffer(t))return t;var e=typeof to.alloc=="function"&&typeof to.from=="function";if(typeof t=="number")return e?to.alloc(t):new to(t);if(typeof t=="string")return e?to.from(t):new to(t);throw new Error("input must be buffer, number, or string, received "+typeof t)}function Rbe(t){var e=BX(4);return e.writeInt32BE(t,0),e}function KC(t,e){t=BX(t),to.isBuffer(e)&&(e=e.readUInt32BE(0));for(var r=~~e^-1,n=0;n<t.length;n++)r=zC[(r^t[n])&255]^r>>>8;return r^-1}function JC(){return Rbe(KC.apply(null,arguments))}JC.signed=function(){return KC.apply(null,arguments)};JC.unsigned=function(){return KC.apply(null,arguments)>>>0};FX.exports=JC});var zX=O(nn=>{var QC=require("fs"),Abe=require("zlib"),GX=UX(),mbe=HX(),gS=require("util"),_S=require("events").EventEmitter,WX=require("stream").Transform,eb=require("stream").PassThrough,gbe=require("stream").Writable;nn.open=_be;nn.fromFd=$X;nn.fromBuffer=Ibe;nn.fromRandomAccessReader=tb;nn.dosDateTimeToDate=VX;nn.getFileNameLowLevel=qX;nn.validateFileName=XX;nn.parseExtraFields=jX;nn.ZipFile=bi;nn.Entry=Qd;nn.LocalFileHeader=YX;nn.RandomAccessReader=ro;function _be(t,e,r){typeof e=="function"&&(r=e,e=null),e==null&&(e={}),e.autoClose==null&&(e.autoClose=!0),e.lazyEntries==null&&(e.lazyEntries=!1),e.decodeStrings==null&&(e.decodeStrings=!0),e.validateEntrySizes==null&&(e.validateEntrySizes=!0),e.strictFileNames==null&&(e.strictFileNames=!1),r==null&&(r=mS),QC.open(t,"r",function(n,i){if(n)return r(n);$X(i,e,function(s,o){s&&QC.close(i,mS),r(s,o)})})}function $X(t,e,r){typeof e=="function"&&(r=e,e=null),e==null&&(e={}),e.autoClose==null&&(e.autoClose=!1),e.lazyEntries==null&&(e.lazyEntries=!1),e.decodeStrings==null&&(e.decodeStrings=!0),e.validateEntrySizes==null&&(e.validateEntrySizes=!0),e.strictFileNames==null&&(e.strictFileNames=!1),r==null&&(r=mS),QC.fstat(t,function(n,i){if(n)return r(n);var s=GX.createFromFd(t,{autoClose:!0});tb(s,i.size,e,r)})}function Ibe(t,e,r){typeof e=="function"&&(r=e,e=null),e==null&&(e={}),e.autoClose=!1,e.lazyEntries==null&&(e.lazyEntries=!1),e.decodeStrings==null&&(e.decodeStrings=!0),e.validateEntrySizes==null&&(e.validateEntrySizes=!0),e.strictFileNames==null&&(e.strictFileNames=!1);var n=GX.createFromBuffer(t,{maxChunkSize:65536});tb(n,t.length,e,r)}function tb(t,e,r,n){typeof r=="function"&&(n=r,r=null),r==null&&(r={}),r.autoClose==null&&(r.autoClose=!0),r.lazyEntries==null&&(r.lazyEntries=!1),r.decodeStrings==null&&(r.decodeStrings=!0);var i=!!r.decodeStrings;if(r.validateEntrySizes==null&&(r.validateEntrySizes=!0),r.strictFileNames==null&&(r.strictFileNames=!1),n==null&&(n=mS),typeof e!="number")throw new Error("expected totalSize parameter to be a number");if(e>Number.MAX_SAFE_INTEGER)throw new Error("zip file too large. only file sizes up to 2^52 are supported due to JavaScript's Number type being an IEEE 754 double.");t.ref();var s=22,o=20,a=65535,l=Math.min(o+s+a,e),c=fs(l),u=e-c.length;Ac(t,c,0,l,u,function(d){if(d)return n(d);for(var E=l-s;E>=0;E-=1)if(c.readUInt32LE(E)===101010256){var f=c.subarray(E),p=f.readUInt16LE(4),h=f.readUInt16LE(10),S=f.readUInt32LE(16),T=f.readUInt16LE(20),m=f.length-s;if(T!==m)return n(new Error("Invalid comment length. Expected: "+m+". Found: "+T+". Are there extra bytes at the end of the file? Or is the end of central dir signature `PK\u263A\u263B` in the comment?"));var R=i?AS(f.subarray(22),!1):f.subarray(22);if(E-o>=0&&c.readUInt32LE(E-o)===117853008){var A=c.subarray(E-o,E-o+o),I=Rc(A,8),w=fs(56);return Ac(t,w,0,w.length,I,function(g){return g?n(g):w.readUInt32LE(0)!==101075792?n(new Error("invalid zip64 end of central directory record signature")):(p=w.readUInt32LE(16),p!==0?n(new Error("multi-disk zip files are not supported: found disk number: "+p)):(h=Rc(w,32),S=Rc(w,48),n(null,new bi(t,S,e,h,R,r.autoClose,r.lazyEntries,i,r.validateEntrySizes,r.strictFileNames))))})}return p!==0?n(new Error("multi-disk zip files are not supported: found disk number: "+p)):n(null,new bi(t,S,e,h,R,r.autoClose,r.lazyEntries,i,r.validateEntrySizes,r.strictFileNames))}n(new Error("End of central directory record signature not found. Either not a zip file, or file is truncated."))})}gS.inherits(bi,_S);function bi(t,e,r,n,i,s,o,a,l,c){var u=this;_S.call(u),u.reader=t,u.reader.on("error",function(d){kX(u,d)}),u.reader.once("close",function(){u.emit("close")}),u.readEntryCursor=e,u.fileSize=r,u.entryCount=n,u.comment=i,u.entriesRead=0,u.autoClose=!!s,u.lazyEntries=!!o,u.decodeStrings=!!a,u.validateEntrySizes=!!l,u.strictFileNames=!!c,u.isOpen=!0,u.emittedError=!1,u.lazyEntries||u._readEntry()}bi.prototype.close=function(){this.isOpen&&(this.isOpen=!1,this.reader.unref())};function Ci(t,e){t.autoClose&&t.close(),kX(t,e)}function kX(t,e){t.emittedError||(t.emittedError=!0,t.emit("error",e))}bi.prototype.readEntry=function(){if(!this.lazyEntries)throw new Error("readEntry() called without lazyEntries:true");this._readEntry()};bi.prototype._readEntry=function(){var t=this;if(t.entryCount===t.entriesRead){setImmediate(function(){t.autoClose&&t.close(),!t.emittedError&&t.emit("end")});return}if(!t.emittedError){var e=fs(46);Ac(t.reader,e,0,e.length,t.readEntryCursor,function(r){if(r)return Ci(t,r);if(!t.emittedError){var n=new Qd,i=e.readUInt32LE(0);if(i!==33639248)return Ci(t,new Error("invalid central directory file header signature: 0x"+i.toString(16)));if(n.versionMadeBy=e.readUInt16LE(4),n.versionNeededToExtract=e.readUInt16LE(6),n.generalPurposeBitFlag=e.readUInt16LE(8),n.compressionMethod=e.readUInt16LE(10),n.lastModFileTime=e.readUInt16LE(12),n.lastModFileDate=e.readUInt16LE(14),n.crc32=e.readUInt32LE(16),n.compressedSize=e.readUInt32LE(20),n.uncompressedSize=e.readUInt32LE(24),n.fileNameLength=e.readUInt16LE(28),n.extraFieldLength=e.readUInt16LE(30),n.fileCommentLength=e.readUInt16LE(32),n.internalFileAttributes=e.readUInt16LE(36),n.externalFileAttributes=e.readUInt32LE(38),n.relativeOffsetOfLocalHeader=e.readUInt32LE(42),n.generalPurposeBitFlag&64)return Ci(t,new Error("strong encryption is not supported"));t.readEntryCursor+=46,e=fs(n.fileNameLength+n.extraFieldLength+n.fileCommentLength),Ac(t.reader,e,0,e.length,t.readEntryCursor,function(s){if(s)return Ci(t,s);if(!t.emittedError){n.fileNameRaw=e.subarray(0,n.fileNameLength);var o=n.fileNameLength+n.extraFieldLength;n.extraFieldRaw=e.subarray(n.fileNameLength,o),n.fileCommentRaw=e.subarray(o,o+n.fileCommentLength);try{n.extraFields=jX(n.extraFieldRaw)}catch(h){return Ci(t,h)}if(t.decodeStrings){var a=(n.generalPurposeBitFlag&2048)!==0;n.fileComment=AS(n.fileCommentRaw,a),n.fileName=qX(n.generalPurposeBitFlag,n.fileNameRaw,n.extraFields,t.strictFileNames);var l=XX(n.fileName);if(l!=null)return Ci(t,new Error(l))}else n.fileComment=n.fileCommentRaw,n.fileName=n.fileNameRaw;n.comment=n.fileComment,t.readEntryCursor+=e.length,t.entriesRead+=1;for(var c=0;c<n.extraFields.length;c++){var u=n.extraFields[c];if(u.id===1){var d=u.data,E=0;if(n.uncompressedSize===4294967295){if(E+8>d.length)return Ci(t,new Error("zip64 extended information extra field does not include uncompressed size"));n.uncompressedSize=Rc(d,E),E+=8}if(n.compressedSize===4294967295){if(E+8>d.length)return Ci(t,new Error("zip64 extended information extra field does not include compressed size"));n.compressedSize=Rc(d,E),E+=8}if(n.relativeOffsetOfLocalHeader===4294967295){if(E+8>d.length)return Ci(t,new Error("zip64 extended information extra field does not include relative header offset"));n.relativeOffsetOfLocalHeader=Rc(d,E),E+=8}break}}if(t.validateEntrySizes&&n.compressionMethod===0){var f=n.uncompressedSize;if(n.isEncrypted()&&(f+=12),n.compressedSize!==f){var p="compressed/uncompressed size mismatch for stored file: "+n.compressedSize+" != "+n.uncompressedSize;return Ci(t,new Error(p))}}t.emit("entry",n),t.lazyEntries||t._readEntry()}})}})}};bi.prototype.openReadStream=function(t,e,r){var n=this,i=0,s=t.compressedSize;if(r==null&&(r=e,e=null),e==null)e={};else{if(e.decrypt!=null){if(!t.isEncrypted())throw new Error("options.decrypt can only be specified for encrypted entries");if(e.decrypt!==!1)throw new Error("invalid options.decrypt value: "+e.decrypt);if(t.isCompressed()&&e.decompress!==!1)throw new Error("entry is encrypted and compressed, and options.decompress !== false")}if(e.decompress!=null){if(!t.isCompressed())throw new Error("options.decompress can only be specified for compressed entries");if(!(e.decompress===!1||e.decompress===!0))throw new Error("invalid options.decompress value: "+e.decompress)}if(e.start!=null||e.end!=null){if(t.isCompressed()&&e.decompress!==!1)throw new Error("start/end range not allowed for compressed entry without options.decompress === false");if(t.isEncrypted()&&e.decrypt!==!1)throw new Error("start/end range not allowed for encrypted entry without options.decrypt === false")}if(e.start!=null){if(i=e.start,i<0)throw new Error("options.start < 0");if(i>t.compressedSize)throw new Error("options.start > entry.compressedSize")}if(e.end!=null){if(s=e.end,s<0)throw new Error("options.end < 0");if(s>t.compressedSize)throw new Error("options.end > entry.compressedSize");if(s<i)throw new Error("options.end < options.start")}}if(!n.isOpen)return r(new Error("closed"));if(t.isEncrypted()&&e.decrypt!==!1)return r(new Error("entry is encrypted, and options.decrypt !== false"));var o;if(t.compressionMethod===0)o=!1;else if(t.compressionMethod===8)o=e.decompress!=null?e.decompress:!0;else return r(new Error("unsupported compression method: "+t.compressionMethod));n.readLocalFileHeader(t,{minimal:!0},function(a,l){if(a)return r(a);n.openReadStreamLowLevel(l.fileDataStart,t.compressedSize,i,s,o,t.uncompressedSize,r)})};bi.prototype.openReadStreamLowLevel=function(t,e,r,n,i,s,o){var a=this,l=t+e,c=a.reader.createReadStream({start:t+r,end:t+n}),u=c;if(i){var d=!1,E=Abe.createInflateRaw();c.on("error",function(f){setImmediate(function(){d||E.emit("error",f)})}),c.pipe(E),a.validateEntrySizes?(u=new Zd(s),E.on("error",function(f){setImmediate(function(){d||u.emit("error",f)})}),E.pipe(u)):u=E,ZC(u,function(){d=!0,E!==u&&E.unpipe(u),c.unpipe(E),c.destroy()})}o(null,u)};bi.prototype.readLocalFileHeader=function(t,e,r){var n=this;r==null&&(r=e,e=null),e==null&&(e={}),n.reader.ref();var i=fs(30);Ac(n.reader,i,0,i.length,t.relativeOffsetOfLocalHeader,function(s){try{if(s)return r(s);var o=i.readUInt32LE(0);if(o!==67324752)return r(new Error("invalid local file header signature: 0x"+o.toString(16)));var a=i.readUInt16LE(26),l=i.readUInt16LE(28),c=t.relativeOffsetOfLocalHeader+30+a+l;if(c+t.compressedSize>n.fileSize)return r(new Error("file data overflows file bounds: "+c+" + "+t.compressedSize+" > "+n.fileSize));if(e.minimal)return r(null,{fileDataStart:c});var u=new YX;u.fileDataStart=c,u.versionNeededToExtract=i.readUInt16LE(4),u.generalPurposeBitFlag=i.readUInt16LE(6),u.compressionMethod=i.readUInt16LE(8),u.lastModFileTime=i.readUInt16LE(10),u.lastModFileDate=i.readUInt16LE(12),u.crc32=i.readUInt32LE(14),u.compressedSize=i.readUInt32LE(18),u.uncompressedSize=i.readUInt32LE(22),u.fileNameLength=a,u.extraFieldLength=l,i=fs(a+l),n.reader.ref(),Ac(n.reader,i,0,i.length,t.relativeOffsetOfLocalHeader+30,function(d){try{return d?r(d):(u.fileName=i.subarray(0,a),u.extraField=i.subarray(a),r(null,u))}finally{n.reader.unref()}})}finally{n.reader.unref()}})};function Qd(){}Qd.prototype.getLastModDate=function(t){if(t==null&&(t={}),!t.forceDosFormat)for(var e=0;e<this.extraFields.length;e++){var r=this.extraFields[e];if(r.id===21589){var n=r.data;if(n.length<5)continue;var i=n[0],s=1;if(!(i&s))continue;var o=n.readInt32LE(1);return new Date(o*1e3)}else if(r.id===10)for(var n=r.data,a=4;a<n.length+4;){var l=n.readUInt16LE(a);a+=2;var c=n.readUInt16LE(a);if(a+=2,l!==1){a+=c;continue}if(c<8||a+c>n.length)break;var u=4294967296*n.readInt32LE(a+4)+n.readUInt32LE(a),d=u/1e4-116444736e5;return new Date(d)}}return VX(this.lastModFileDate,this.lastModFileTime,t.timezone)};Qd.prototype.isEncrypted=function(){return(this.generalPurposeBitFlag&1)!==0};Qd.prototype.isCompressed=function(){return this.compressionMethod===8};function YX(){}function VX(t,e,r){var n=t&31,i=(t>>5&15)-1,s=(t>>9&127)+1980,o=0,a=(e&31)*2,l=e>>5&63,c=e>>11&31;if(r==null||r==="local")return new Date(s,i,n,c,l,a,o);if(r==="UTC")return new Date(Date.UTC(s,i,n,c,l,a,o));throw new Error("unrecognized options.timezone: "+options.timezone)}function qX(t,e,r,n){for(var i=null,s=0;s<r.length;s++){var o=r[s];if(o.id===28789){if(o.data.length<6||o.data.readUInt8(0)!==1)continue;var a=o.data.readUInt32LE(1);if(mbe.unsigned(e)!==a)continue;i=AS(o.data.subarray(5),!0);break}}if(i==null){var l=(t&2048)!==0;i=AS(e,l)}return n||(i=i.replace(/\\/g,"/")),i}function XX(t){return t.indexOf("\\")!==-1?"invalid characters in fileName: "+t:/^[a-zA-Z]:/.test(t)||/^\//.test(t)?"absolute path: "+t:t.split("/").indexOf("..")!==-1?"invalid relative path: "+t:null}function jX(t){for(var e=[],r=0;r<t.length-3;){var n=t.readUInt16LE(r+0),i=t.readUInt16LE(r+2),s=r+4,o=s+i;if(o>t.length)throw new Error("extra field length exceeds extra field buffer size");var a=t.subarray(s,o);e.push({id:n,data:a}),r=o}return e}function Ac(t,e,r,n,i,s){if(n===0)return setImmediate(function(){s(null,fs(0))});t.read(e,r,n,i,function(o,a){if(o)return s(o);if(a<n)return s(new Error("unexpected EOF"));s()})}gS.inherits(Zd,WX);function Zd(t){WX.call(this),this.actualByteCount=0,this.expectedByteCount=t}Zd.prototype._transform=function(t,e,r){if(this.actualByteCount+=t.length,this.actualByteCount>this.expectedByteCount){var n="too many bytes in the stream. expected "+this.expectedByteCount+". got at least "+this.actualByteCount;return r(new Error(n))}r(null,t)};Zd.prototype._flush=function(t){if(this.actualByteCount<this.expectedByteCount){var e="not enough bytes in the stream. expected "+this.expectedByteCount+". got only "+this.actualByteCount;return t(new Error(e))}t()};gS.inherits(ro,_S);function ro(){_S.call(this),this.refCount=0}ro.prototype.ref=function(){this.refCount+=1};ro.prototype.unref=function(){var t=this;if(t.refCount-=1,t.refCount>0)return;if(t.refCount<0)throw new Error("invalid unref");t.close(e);function e(r){if(r)return t.emit("error",r);t.emit("close")}};ro.prototype.createReadStream=function(t){t==null&&(t={});var e=t.start,r=t.end;if(e===r){var n=new eb;return setImmediate(function(){n.end()}),n}var i=this._readStreamForRange(e,r),s=!1,o=new IS(this);i.on("error",function(l){setImmediate(function(){s||o.emit("error",l)})}),ZC(o,function(){i.unpipe(o),o.unref(),i.destroy()});var a=new Zd(r-e);return o.on("error",function(l){setImmediate(function(){s||a.emit("error",l)})}),ZC(a,function(){s=!0,o.unpipe(a),o.destroy()}),i.pipe(o).pipe(a)};ro.prototype._readStreamForRange=function(t,e){throw new Error("not implemented")};ro.prototype.read=function(t,e,r,n,i){var s=this.createReadStream({start:n,end:n+r}),o=new gbe,a=0;o._write=function(l,c,u){l.copy(t,e+a,0,l.length),a+=l.length,u()},o.on("finish",i),s.on("error",function(l){i(l)}),s.pipe(o)};ro.prototype.close=function(t){setImmediate(t)};gS.inherits(IS,eb);function IS(t){eb.call(this),this.context=t,this.context.ref(),this.unreffedYet=!1}IS.prototype._flush=function(t){this.unref(),t()};IS.prototype.unref=function(t){this.unreffedYet||(this.unreffedYet=!0,this.context.unref())};var Nbe="\0\u263A\u263B\u2665\u2666\u2663\u2660\u2022\u25D8\u25CB\u25D9\u2642\u2640\u266A\u266B\u263C\u25BA\u25C4\u2195\u203C\xB6\xA7\u25AC\u21A8\u2191\u2193\u2192\u2190\u221F\u2194\u25B2\u25BC !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\u2302\xC7\xFC\xE9\xE2\xE4\xE0\xE5\xE7\xEA\xEB\xE8\xEF\xEE\xEC\xC4\xC5\xC9\xE6\xC6\xF4\xF6\xF2\xFB\xF9\xFF\xD6\xDC\xA2\xA3\xA5\u20A7\u0192\xE1\xED\xF3\xFA\xF1\xD1\xAA\xBA\xBF\u2310\xAC\xBD\xBC\xA1\xAB\xBB\u2591\u2592\u2593\u2502\u2524\u2561\u2562\u2556\u2555\u2563\u2551\u2557\u255D\u255C\u255B\u2510\u2514\u2534\u252C\u251C\u2500\u253C\u255E\u255F\u255A\u2554\u2569\u2566\u2560\u2550\u256C\u2567\u2568\u2564\u2565\u2559\u2558\u2552\u2553\u256B\u256A\u2518\u250C\u2588\u2584\u258C\u2590\u2580\u03B1\xDF\u0393\u03C0\u03A3\u03C3\xB5\u03C4\u03A6\u0398\u03A9\u03B4\u221E\u03C6\u03B5\u2229\u2261\xB1\u2265\u2264\u2320\u2321\xF7\u2248\xB0\u2219\xB7\u221A\u207F\xB2\u25A0\xA0";function AS(t,e){if(e)return t.toString("utf8");for(var r="",n=0;n<t.length;n++)r+=Nbe[t[n]];return r}function Rc(t,e){var r=t.readUInt32LE(e),n=t.readUInt32LE(e+4);return n*4294967296+r}var fs;typeof Buffer.allocUnsafe=="function"?fs=function(t){return Buffer.allocUnsafe(t)}:fs=function(t){return new Buffer(t)};function ZC(t,e){typeof t.destroy=="function"?t._destroy=function(r,n){e(),n?.(r)}:t.destroy=e}function mS(t){if(t)throw t}});var mc,rb=G(()=>{"use strict";mc=class{constructor(){this.fieldCount=0;this.rowCount=0;this.actualSheetName="";this.resultsCount=0;this._oaEpoch=Date.UTC(1899,11,30)}async close(){}dispose(){}getDateTimeFromOaDate(e){let r=e*864e5+this._oaEpoch;return new Date(r)}}});var KX,NS,JX=G(()=>{"use strict";KX=q(zX());rb();NS=class extends mc{constructor(){super();this.zipfile=null;this.sharedStrings=[];this.styles=[];this.sheetNames=[];this.sheets=[];this.entries=new Map;this._currentSheetIndex=-1;this._sheetXml=null;this._xmlPos=0;this._currentRow=[];this.xfIdToNumFmtId=[];this.customDateFormats=new Set}async open(r,n=!0){return new Promise((i,s)=>{KX.default.open(r,{lazyEntries:!0,autoClose:!1},async(o,a)=>{if(o)return s(o);this.zipfile=a,this.entries=new Map,a.on("entry",l=>{this.entries.set(l.fileName,l),a.readEntry()}),a.on("end",async()=>{try{let l=await this._readZipEntryContent("xl/_rels/workbook.xml.rels"),c={};if(l){let E=/<Relationship[^>]*Id="([^"]*)"[^>]*Target="([^"]*)"/g,f;for(;(f=E.exec(l))!==null;)c[f[1]]=f[2]}let u=await this._readZipEntryContent("xl/workbook.xml");if(u){let E=/<sheet[^>]*name="([^"]*)"[^>]*sheetId="([^"]*)"[^>]*r:id="([^"]*)"/g,f;for(;(f=E.exec(u))!==null;){let p=this._unescapeXml(f[1]),h=f[2],S=f[3],m=c[S];m.startsWith("xl/")||(m="xl/"+m),this.sheetNames.push(p),this.sheets.push({name:p,sheetId:h,rId:S,path:m})}}if(n){let E=await this._readZipEntryContent("xl/sharedStrings.xml");E&&this._parseSharedStrings(E)}let d=await this._readZipEntryContent("xl/styles.xml");d&&this._parseStyles(d),this.resultsCount=this.sheets.length,this._currentSheetIndex=-1,i()}catch(l){s(l)}}),a.readEntry()})})}async close(){this.zipfile&&this.zipfile.close()}async _readZipEntryContent(r){let n=this.entries.get(r);return n?new Promise((i,s)=>{this.zipfile.openReadStream(n,(o,a)=>{if(o)return s(o);let l=[];a.on("data",c=>l.push(c)),a.on("end",()=>{i(Buffer.concat(l).toString("utf8"))}),a.on("error",s)})}):null}_unescapeXml(r){return r?r.indexOf("&")===-1?r:r.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&apos;/g,"'"):""}_parseSharedStrings(r){let n=0;for(;;){let i=r.indexOf("<si>",n);if(i===-1)break;let s=r.indexOf("</si>",i);if(s===-1)break;let o=r.substring(i,s),a="",l=0;for(;;){let c=o.indexOf("<t",l);if(c===-1)break;let u=o.indexOf(">",c),d=o.indexOf("</t>",u);if(d===-1)break;a+=o.substring(u+1,d),l=d+4}this.sharedStrings.push(this._unescapeXml(a)),n=s+5}}_parseStyles(r){let n=/<numFmt\s+[^>]*numFmtId="(\d+)"[^>]*formatCode="([^"]*)"/g,i;for(this.customDateFormats=new Set;(i=n.exec(r))!==null;){let o=parseInt(i[1]),a=i[2];(a.toLowerCase().includes("yy")||a.toLowerCase().includes("mm")||a.toLowerCase().includes("dd")||a.toLowerCase().includes("h:mm"))&&this.customDateFormats.add(o)}this.xfIdToNumFmtId=[];let s=r.indexOf("<cellXfs");if(s!==-1){let o=r.indexOf("</cellXfs>",s);if(o!==-1){let a=r.substring(s,o),l=/<xf\s+[^>]*numFmtId="(\d+)"/g;for(;(i=l.exec(a))!==null;){let c=parseInt(i[1]);this.xfIdToNumFmtId.push(c)}}}}getSheetNames(){return this.sheetNames}async read(){return this._currentSheetIndex===-1&&(this._currentSheetIndex=0,await this._initSheet(this._currentSheetIndex)),!!this._readNextRow()}async _initSheet(r){if(r>=this.sheets.length)return;let n=this.sheets[r];this.actualSheetName=n.name,this._sheetXml=await this._readZipEntryContent(n.path),this._sheetXml||(this._sheetXml=""),this._xmlPos=0;let i=this._sheetXml.indexOf("<sheetData>");i!==-1&&(this._xmlPos=i+11)}_readNextRow(){if(!this._sheetXml)return!1;let r=this._sheetXml.indexOf("<row",this._xmlPos);if(r===-1)return!1;let n=this._sheetXml.indexOf("</row>",r);return n===-1?!1:(this._xmlPos=n+6,this._parseRowByIndex(r,n),!0)}_parseRowByIndex(r,n){this._currentRow=[];let i=this._sheetXml,s=i.indexOf(">",r)+1;for(;s<n;){let o=i.indexOf("<c",s);if(o===-1||o>=n)break;let a=i.indexOf(">",o),l=-1,c="n",u=0,d=o+2;for(;d<a;){for(;i.charCodeAt(d)<=32&&d<a;)d++;if(d>=a)break;let p=d;for(;i.charCodeAt(d)!==61&&d<a;)d++;let h=i.substring(p,d);if(d++,i.charCodeAt(d)===34){d++;let S=d;for(;i.charCodeAt(d)!==34&&d<a;)d++;let T=i.substring(S,d);if(d++,h==="r"){let m=0;for(;m<T.length&&T.charCodeAt(m)>=65;)m++;l=this._columnLetterToIndex(T.substring(0,m))}else h==="t"?c=T:h==="s"&&(u=parseInt(T,10))}}let E=null;if(i.charCodeAt(a-1)===47)s=a+1;else{let p=i.indexOf("</c>",a),h=p!==-1&&p<n?p:n,S=i.indexOf("<v>",a);if(S!==-1&&S<h){let T=S+3,m=i.indexOf("</v>",T);m!==-1&&m<h&&(E=i.substring(T,m))}else if(c==="inlineStr"){let T=i.indexOf("<t",a);if(T!==-1&&T<h){let m=i.indexOf(">",T)+1,R=i.indexOf("</t>",m);R!==-1&&R<h&&(E=i.substring(m,R))}}s=h+4}let f=null;if(E!==null){if(c==="s"){let p=parseInt(E,10);f=this.sharedStrings[p]}else if(c==="b")f=E==="1"||E==="true";else if(c==="inlineStr")f=this._unescapeXml(E);else if((c==="n"||c==="")&&(f=parseFloat(E),u>0&&this.xfIdToNumFmtId)){let p=0;if(u<this.xfIdToNumFmtId.length&&(p=this.xfIdToNumFmtId[u]),p>=14&&p<=22||p>=45&&p<=47||this.customDateFormats&&this.customDateFormats.has(p))try{f=this.getDateTimeFromOaDate(f)}catch{}}}l!==-1&&(this._currentRow[l]=f,l>=this.fieldCount&&(this.fieldCount=l+1))}}_columnLetterToIndex(r){let n=0,i=r.length;for(let s=0;s<i;s++)n+=(r.charCodeAt(s)-64)*Math.pow(26,i-s-1);return n-1}getValue(r){return r<0||r>=this._currentRow.length?null:this._currentRow[r]}}});var nb=O((qBe,QX)=>{QX.exports={LOCHDR:30,LOCSIG:67324752,LOCVER:4,LOCFLG:6,LOCHOW:8,LOCTIM:10,LOCCRC:14,LOCSIZ:18,LOCLEN:22,LOCNAM:26,LOCEXT:28,EXTSIG:134695760,EXTHDR:16,EXTCRC:4,EXTSIZ:8,EXTLEN:12,CENHDR:46,CENSIG:33639248,CENVEM:4,CENVER:6,CENFLG:8,CENHOW:10,CENTIM:12,CENCRC:16,CENSIZ:20,CENLEN:24,CENNAM:28,CENEXT:30,CENCOM:32,CENDSK:34,CENATT:36,CENATX:38,CENOFF:42,ENDHDR:22,ENDSIG:101010256,ENDSUB:8,ENDTOT:10,ENDSIZ:12,ENDOFF:16,ENDCOM:20,END64HDR:20,END64SIG:117853008,END64START:4,END64OFF:8,END64NUMDISKS:16,ZIP64SIG:101075792,ZIP64HDR:56,ZIP64LEAD:12,ZIP64SIZE:4,ZIP64VEM:12,ZIP64VER:14,ZIP64DSK:16,ZIP64DSKDIR:20,ZIP64SUB:24,ZIP64TOT:32,ZIP64SIZB:40,ZIP64OFF:48,ZIP64EXTRA:56,STORED:0,SHRUNK:1,REDUCED1:2,REDUCED2:3,REDUCED3:4,REDUCED4:5,IMPLODED:6,DEFLATED:8,ENHANCED_DEFLATED:9,PKWARE:10,BZIP2:12,LZMA:14,IBM_TERSE:18,IBM_LZ77:19,AES_ENCRYPT:99,FLG_ENC:1,FLG_COMP1:2,FLG_COMP2:4,FLG_DESC:8,FLG_ENH:16,FLG_PATCH:32,FLG_STR:64,FLG_EFS:2048,FLG_MSK:4096,FILE:2,BUFFER:1,NONE:0,EF_ID:0,EF_SIZE:2,ID_ZIP64:1,ID_AVINFO:7,ID_PFS:8,ID_OS2:9,ID_NTFS:10,ID_OPENVMS:12,ID_UNIX:13,ID_FORK:14,ID_PATCH:15,ID_X509_PKCS7:20,ID_X509_CERTID_F:21,ID_X509_CERTID_C:22,ID_STRONGENC:23,ID_RECORD_MGT:24,ID_X509_PKCS7_RL:25,ID_IBM1:101,ID_IBM2:102,ID_POSZIP:18064,EF_ZIP64_OR_32:4294967295,EF_ZIP64_OR_16:65535,EF_ZIP64_SUNCOMP:0,EF_ZIP64_SCOMP:8,EF_ZIP64_RHO:16,EF_ZIP64_DSN:24}});var OS=O(e6=>{var ZX={INVALID_LOC:"Invalid LOC header (bad signature)",INVALID_CEN:"Invalid CEN header (bad signature)",INVALID_END:"Invalid END header (bad signature)",DESCRIPTOR_NOT_EXIST:"No descriptor present",DESCRIPTOR_UNKNOWN:"Unknown descriptor format",DESCRIPTOR_FAULTY:"Descriptor data is malformed",NO_DATA:"Nothing to decompress",BAD_CRC:"CRC32 checksum failed {0}",FILE_IN_THE_WAY:"There is a file in the way: {0}",UNKNOWN_METHOD:"Invalid/unsupported compression method",AVAIL_DATA:"inflate::Available inflate data did not terminate",INVALID_DISTANCE:"inflate::Invalid literal/length or distance code in fixed or dynamic block",TO_MANY_CODES:"inflate::Dynamic block code description: too many length or distance codes",INVALID_REPEAT_LEN:"inflate::Dynamic block code description: repeat more than specified lengths",INVALID_REPEAT_FIRST:"inflate::Dynamic block code description: repeat lengths with no first length",INCOMPLETE_CODES:"inflate::Dynamic block code description: code lengths codes incomplete",INVALID_DYN_DISTANCE:"inflate::Dynamic block code description: invalid distance code lengths",INVALID_CODES_LEN:"inflate::Dynamic block code description: invalid literal/length code lengths",INVALID_STORE_BLOCK:"inflate::Stored block length did not match one's complement",INVALID_BLOCK_TYPE:"inflate::Invalid block type (type == 3)",CANT_EXTRACT_FILE:"Could not extract the file",CANT_OVERRIDE:"Target file already exists",DISK_ENTRY_TOO_LARGE:"Number of disk entries is too large",NO_ZIP:"No zip file was loaded",NO_ENTRY:"Entry doesn't exist",DIRECTORY_CONTENT_ERROR:"A directory cannot have content",FILE_NOT_FOUND:'File not found: "{0}"',NOT_IMPLEMENTED:"Not implemented",INVALID_FILENAME:"Invalid filename",INVALID_FORMAT:"Invalid or unsupported zip format. No END header found",INVALID_PASS_PARAM:"Incompatible password parameter",WRONG_PASSWORD:"Wrong Password",COMMENT_TOO_LONG:"Comment is too long",EXTRA_FIELD_PARSE_ERROR:"Extra field parsing error"};function Obe(t){return function(...e){return e.length&&(t=t.replace(/\{(\d)\}/g,(r,n)=>e[n]||"")),new Error("ADM-ZIP: "+t)}}for(let t of Object.keys(ZX))e6[t]=Obe(ZX[t])});var s6=O((jBe,i6)=>{var Cbe=require("fs"),qt=require("path"),t6=nb(),bbe=OS(),ybe=typeof process=="object"&&process.platform==="win32",r6=t=>typeof t=="object"&&t!==null,n6=new Uint32Array(256).map((t,e)=>{for(let r=0;r<8;r++)(e&1)!==0?e=3988292384^e>>>1:e>>>=1;return e>>>0});function Nt(t){this.sep=qt.sep,this.fs=Cbe,r6(t)&&r6(t.fs)&&typeof t.fs.statSync=="function"&&(this.fs=t.fs)}i6.exports=Nt;Nt.prototype.makeDir=function(t){let e=this;function r(n){let i=n.split(e.sep)[0];n.split(e.sep).forEach(function(s){if(!(!s||s.substr(-1,1)===":")){i+=e.sep+s;var o;try{o=e.fs.statSync(i)}catch{e.fs.mkdirSync(i)}if(o&&o.isFile())throw bbe.FILE_IN_THE_WAY(`"${i}"`)}})}r(t)};Nt.prototype.writeFileTo=function(t,e,r,n){let i=this;if(i.fs.existsSync(t)){if(!r)return!1;var s=i.fs.statSync(t);if(s.isDirectory())return!1}var o=qt.dirname(t);i.fs.existsSync(o)||i.makeDir(o);var a;try{a=i.fs.openSync(t,"w",438)}catch{i.fs.chmodSync(t,438),a=i.fs.openSync(t,"w",438)}if(a)try{i.fs.writeSync(a,e,0,e.length,0)}finally{i.fs.closeSync(a)}return i.fs.chmodSync(t,n||438),!0};Nt.prototype.writeFileToAsync=function(t,e,r,n,i){typeof n=="function"&&(i=n,n=void 0);let s=this;s.fs.exists(t,function(o){if(o&&!r)return i(!1);s.fs.stat(t,function(a,l){if(o&&l.isDirectory())return i(!1);var c=qt.dirname(t);s.fs.exists(c,function(u){u||s.makeDir(c),s.fs.open(t,"w",438,function(d,E){d?s.fs.chmod(t,438,function(){s.fs.open(t,"w",438,function(f,p){s.fs.write(p,e,0,e.length,0,function(){s.fs.close(p,function(){s.fs.chmod(t,n||438,function(){i(!0)})})})})}):E?s.fs.write(E,e,0,e.length,0,function(){s.fs.close(E,function(){s.fs.chmod(t,n||438,function(){i(!0)})})}):s.fs.chmod(t,n||438,function(){i(!0)})})})})})};Nt.prototype.findFiles=function(t){let e=this;function r(n,i,s){typeof i=="boolean"&&(s=i,i=void 0);let o=[];return e.fs.readdirSync(n).forEach(function(a){let l=qt.join(n,a),c=e.fs.statSync(l);(!i||i.test(l))&&o.push(qt.normalize(l)+(c.isDirectory()?e.sep:"")),c.isDirectory()&&s&&(o=o.concat(r(l,i,s)))}),o}return r(t,void 0,!0)};Nt.prototype.findFilesAsync=function(t,e){let r=this,n=[];r.fs.readdir(t,function(i,s){if(i)return e(i);let o=s.length;if(!o)return e(null,n);s.forEach(function(a){a=qt.join(t,a),r.fs.stat(a,function(l,c){if(l)return e(l);c&&(n.push(qt.normalize(a)+(c.isDirectory()?r.sep:"")),c.isDirectory()?r.findFilesAsync(a,function(u,d){if(u)return e(u);n=n.concat(d),--o||e(null,n)}):--o||e(null,n))})})})};Nt.prototype.getAttributes=function(){};Nt.prototype.setAttributes=function(){};Nt.crc32update=function(t,e){return n6[(t^e)&255]^t>>>8};Nt.crc32=function(t){typeof t=="string"&&(t=Buffer.from(t,"utf8"));let e=t.length,r=-1;for(let n=0;n<e;)r=Nt.crc32update(r,t[n++]);return~r>>>0};Nt.methodToString=function(t){switch(t){case t6.STORED:return"STORED ("+t+")";case t6.DEFLATED:return"DEFLATED ("+t+")";default:return"UNSUPPORTED ("+t+")"}};Nt.canonical=function(t){if(!t)return"";let e=qt.posix.normalize("/"+t.split("\\").join("/"));return qt.join(".",e)};Nt.zipnamefix=function(t){if(!t)return"";let e=qt.posix.normalize("/"+t.split("\\").join("/"));return qt.posix.join(".",e)};Nt.findLast=function(t,e){if(!Array.isArray(t))throw new TypeError("arr is not array");let r=t.length>>>0;for(let n=r-1;n>=0;n--)if(e(t[n],n,t))return t[n]};Nt.sanitize=function(t,e){t=qt.resolve(qt.normalize(t));for(var r=e.split("/"),n=0,i=r.length;n<i;n++){var s=qt.normalize(qt.join(t,r.slice(n,i).join(qt.sep)));if(s.indexOf(t)===0)return s}return qt.normalize(qt.join(t,qt.basename(e)))};Nt.toBuffer=function(e,r){return Buffer.isBuffer(e)?e:e instanceof Uint8Array?Buffer.from(e):typeof e=="string"?r(e):Buffer.alloc(0)};Nt.readBigUInt64LE=function(t,e){var r=Buffer.from(t.slice(e,e+8));return r.swap64(),parseInt(`0x${r.toString("hex")}`)};Nt.fromDOS2Date=function(t){return new Date((t>>25&127)+1980,Math.max((t>>21&15)-1,0),Math.max(t>>16&31,1),t>>11&31,t>>5&63,(t&31)<<1)};Nt.fromDate2DOS=function(t){let e=0,r=0;return t.getFullYear()>1979&&(e=(t.getFullYear()-1980&127)<<9|t.getMonth()+1<<5|t.getDate(),r=t.getHours()<<11|t.getMinutes()<<5|t.getSeconds()>>1),e<<16|r};Nt.isWin=ybe;Nt.crcTable=n6});var a6=O((zBe,o6)=>{var wbe=require("path");o6.exports=function(t,{fs:e}){var r=t||"",n=s(),i=null;function s(){return{directory:!1,readonly:!1,hidden:!1,executable:!1,mtime:0,atime:0}}return r&&e.existsSync(r)?(i=e.statSync(r),n.directory=i.isDirectory(),n.mtime=i.mtime,n.atime=i.atime,n.executable=(73&i.mode)!==0,n.readonly=(128&i.mode)===0,n.hidden=wbe.basename(r)[0]==="."):console.warn("Invalid path: "+r),{get directory(){return n.directory},get readOnly(){return n.readonly},get hidden(){return n.hidden},get mtime(){return n.mtime},get atime(){return n.atime},get executable(){return n.executable},decodeAttributes:function(){},encodeAttributes:function(){},toJSON:function(){return{path:r,isDirectory:n.directory,isReadOnly:n.readonly,isHidden:n.hidden,isExecutable:n.executable,mTime:n.mtime,aTime:n.atime}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var c6=O((KBe,l6)=>{l6.exports={efs:!0,encode:t=>Buffer.from(t,"utf8"),decode:t=>t.toString("utf8")}});var _c=O((JBe,gc)=>{gc.exports=s6();gc.exports.Constants=nb();gc.exports.Errors=OS();gc.exports.FileAttr=a6();gc.exports.decoder=c6()});var d6=O((QBe,u6)=>{var no=_c(),X=no.Constants;u6.exports=function(){var t=20,e=10,r=0,n=0,i=0,s=0,o=0,a=0,l=0,c=0,u=0,d=0,E=0,f=0,p=0;t|=no.isWin?2560:768,r|=X.FLG_EFS;let h={extraLen:0},S=R=>Math.max(0,R)>>>0,T=R=>Math.max(0,R)&65535,m=R=>Math.max(0,R)&255;return i=no.fromDate2DOS(new Date),{get made(){return t},set made(R){t=R},get version(){return e},set version(R){e=R},get flags(){return r},set flags(R){r=R},get flags_efs(){return(r&X.FLG_EFS)>0},set flags_efs(R){R?r|=X.FLG_EFS:r&=~X.FLG_EFS},get flags_desc(){return(r&X.FLG_DESC)>0},set flags_desc(R){R?r|=X.FLG_DESC:r&=~X.FLG_DESC},get method(){return n},set method(R){switch(R){case X.STORED:this.version=10;case X.DEFLATED:default:this.version=20}n=R},get time(){return no.fromDOS2Date(this.timeval)},set time(R){this.timeval=no.fromDate2DOS(R)},get timeval(){return i},set timeval(R){i=S(R)},get timeHighByte(){return m(i>>>8)},get crc(){return s},set crc(R){s=S(R)},get compressedSize(){return o},set compressedSize(R){o=S(R)},get size(){return a},set size(R){a=S(R)},get fileNameLength(){return l},set fileNameLength(R){l=R},get extraLength(){return c},set extraLength(R){c=R},get extraLocalLength(){return h.extraLen},set extraLocalLength(R){h.extraLen=R},get commentLength(){return u},set commentLength(R){u=R},get diskNumStart(){return d},set diskNumStart(R){d=S(R)},get inAttr(){return E},set inAttr(R){E=S(R)},get attr(){return f},set attr(R){f=S(R)},get fileAttr(){return(f||0)>>16&4095},get offset(){return p},set offset(R){p=S(R)},get encrypted(){return(r&X.FLG_ENC)===X.FLG_ENC},get centralHeaderSize(){return X.CENHDR+l+c+u},get realDataOffset(){return p+X.LOCHDR+h.fnameLen+h.extraLen},get localHeader(){return h},loadLocalHeaderFromBinary:function(R){var A=R.slice(p,p+X.LOCHDR);if(A.readUInt32LE(0)!==X.LOCSIG)throw no.Errors.INVALID_LOC();h.version=A.readUInt16LE(X.LOCVER),h.flags=A.readUInt16LE(X.LOCFLG),h.method=A.readUInt16LE(X.LOCHOW),h.time=A.readUInt32LE(X.LOCTIM),h.crc=A.readUInt32LE(X.LOCCRC),h.compressedSize=A.readUInt32LE(X.LOCSIZ),h.size=A.readUInt32LE(X.LOCLEN),h.fnameLen=A.readUInt16LE(X.LOCNAM),h.extraLen=A.readUInt16LE(X.LOCEXT);let I=p+X.LOCHDR+h.fnameLen,w=I+h.extraLen;return R.slice(I,w)},loadFromBinary:function(R){if(R.length!==X.CENHDR||R.readUInt32LE(0)!==X.CENSIG)throw no.Errors.INVALID_CEN();t=R.readUInt16LE(X.CENVEM),e=R.readUInt16LE(X.CENVER),r=R.readUInt16LE(X.CENFLG),n=R.readUInt16LE(X.CENHOW),i=R.readUInt32LE(X.CENTIM),s=R.readUInt32LE(X.CENCRC),o=R.readUInt32LE(X.CENSIZ),a=R.readUInt32LE(X.CENLEN),l=R.readUInt16LE(X.CENNAM),c=R.readUInt16LE(X.CENEXT),u=R.readUInt16LE(X.CENCOM),d=R.readUInt16LE(X.CENDSK),E=R.readUInt16LE(X.CENATT),f=R.readUInt32LE(X.CENATX),p=R.readUInt32LE(X.CENOFF)},localHeaderToBinary:function(){var R=Buffer.alloc(X.LOCHDR);return R.writeUInt32LE(X.LOCSIG,0),R.writeUInt16LE(e,X.LOCVER),R.writeUInt16LE(r,X.LOCFLG),R.writeUInt16LE(n,X.LOCHOW),R.writeUInt32LE(i,X.LOCTIM),R.writeUInt32LE(s,X.LOCCRC),R.writeUInt32LE(o,X.LOCSIZ),R.writeUInt32LE(a,X.LOCLEN),R.writeUInt16LE(l,X.LOCNAM),R.writeUInt16LE(h.extraLen,X.LOCEXT),R},centralHeaderToBinary:function(){var R=Buffer.alloc(X.CENHDR+l+c+u);return R.writeUInt32LE(X.CENSIG,0),R.writeUInt16LE(t,X.CENVEM),R.writeUInt16LE(e,X.CENVER),R.writeUInt16LE(r,X.CENFLG),R.writeUInt16LE(n,X.CENHOW),R.writeUInt32LE(i,X.CENTIM),R.writeUInt32LE(s,X.CENCRC),R.writeUInt32LE(o,X.CENSIZ),R.writeUInt32LE(a,X.CENLEN),R.writeUInt16LE(l,X.CENNAM),R.writeUInt16LE(c,X.CENEXT),R.writeUInt16LE(u,X.CENCOM),R.writeUInt16LE(d,X.CENDSK),R.writeUInt16LE(E,X.CENATT),R.writeUInt32LE(f,X.CENATX),R.writeUInt32LE(p,X.CENOFF),R},toJSON:function(){let R=function(A){return A+" bytes"};return{made:t,version:e,flags:r,method:no.methodToString(n),time:this.time,crc:"0x"+s.toString(16).toUpperCase(),compressedSize:R(o),size:R(a),fileNameLength:R(l),extraLength:R(c),commentLength:R(u),diskNumStart:d,inAttr:E,attr:f,offset:p,centralHeaderSize:R(X.CENHDR+l+c+u)}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var E6=O((ZBe,f6)=>{var Ic=_c(),mt=Ic.Constants;f6.exports=function(){var t=0,e=0,r=0,n=0,i=0;return{get diskEntries(){return t},set diskEntries(s){t=e=s},get totalEntries(){return e},set totalEntries(s){e=t=s},get size(){return r},set size(s){r=s},get offset(){return n},set offset(s){n=s},get commentLength(){return i},set commentLength(s){i=s},get mainHeaderSize(){return mt.ENDHDR+i},loadFromBinary:function(s){if((s.length!==mt.ENDHDR||s.readUInt32LE(0)!==mt.ENDSIG)&&(s.length<mt.ZIP64HDR||s.readUInt32LE(0)!==mt.ZIP64SIG))throw Ic.Errors.INVALID_END();s.readUInt32LE(0)===mt.ENDSIG?(t=s.readUInt16LE(mt.ENDSUB),e=s.readUInt16LE(mt.ENDTOT),r=s.readUInt32LE(mt.ENDSIZ),n=s.readUInt32LE(mt.ENDOFF),i=s.readUInt16LE(mt.ENDCOM)):(t=Ic.readBigUInt64LE(s,mt.ZIP64SUB),e=Ic.readBigUInt64LE(s,mt.ZIP64TOT),r=Ic.readBigUInt64LE(s,mt.ZIP64SIZE),n=Ic.readBigUInt64LE(s,mt.ZIP64OFF),i=0)},toBinary:function(){var s=Buffer.alloc(mt.ENDHDR+i);return s.writeUInt32LE(mt.ENDSIG,0),s.writeUInt32LE(0,4),s.writeUInt16LE(t,mt.ENDSUB),s.writeUInt16LE(e,mt.ENDTOT),s.writeUInt32LE(r,mt.ENDSIZ),s.writeUInt32LE(n,mt.ENDOFF),s.writeUInt16LE(i,mt.ENDCOM),s.fill(" ",mt.ENDHDR),s},toJSON:function(){let s=function(o,a){let l=o.toString(16).toUpperCase();for(;l.length<a;)l="0"+l;return"0x"+l};return{diskEntries:t,totalEntries:e,size:r+" bytes",offset:s(n,4),commentLength:i}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var sb=O(ib=>{ib.EntryHeader=d6();ib.MainHeader=E6()});var p6=O((tFe,h6)=>{h6.exports=function(t){var e=require("zlib"),r={chunkSize:(parseInt(t.length/1024)+1)*1024};return{deflate:function(){return e.deflateRawSync(t,r)},deflateAsync:function(n){var i=e.createDeflateRaw(r),s=[],o=0;i.on("data",function(a){s.push(a),o+=a.length}),i.on("end",function(){var a=Buffer.alloc(o),l=0;a.fill(0);for(var c=0;c<s.length;c++){var u=s[c];u.copy(a,l),l+=u.length}n&&n(a)}),i.end(t)}}}});var S6=O((rFe,T6)=>{var Lbe=+(process.versions?process.versions.node:"").split(".")[0]||0;T6.exports=function(t,e){var r=require("zlib");let n=Lbe>=15&&e>0?{maxOutputLength:e}:{};return{inflate:function(){return r.inflateRawSync(t,n)},inflateAsync:function(i){var s=r.createInflateRaw(n),o=[],a=0;s.on("data",function(l){o.push(l),a+=l.length}),s.on("end",function(){var l=Buffer.alloc(a),c=0;l.fill(0);for(var u=0;u<o.length;u++){var d=o[u];d.copy(l,c),c+=d.length}i&&i(l)}),s.end(t)}}}});var _6=O((nFe,g6)=>{"use strict";var{randomFillSync:R6}=require("crypto"),Dbe=OS(),Pbe=new Uint32Array(256).map((t,e)=>{for(let r=0;r<8;r++)(e&1)!==0?e=e>>>1^3988292384:e>>>=1;return e>>>0}),m6=(t,e)=>Math.imul(t,e)>>>0,A6=(t,e)=>Pbe[(t^e)&255]^t>>>8,ef=()=>typeof R6=="function"?R6(Buffer.alloc(12)):ef.node();ef.node=()=>{let t=Buffer.alloc(12),e=t.length;for(let r=0;r<e;r++)t[r]=Math.random()*256&255;return t};var CS={genSalt:ef};function bS(t){let e=Buffer.isBuffer(t)?t:Buffer.from(t);this.keys=new Uint32Array([305419896,591751049,878082192]);for(let r=0;r<e.length;r++)this.updateKeys(e[r])}bS.prototype.updateKeys=function(t){let e=this.keys;return e[0]=A6(e[0],t),e[1]+=e[0]&255,e[1]=m6(e[1],134775813)+1,e[2]=A6(e[2],e[1]>>>24),t};bS.prototype.next=function(){let t=(this.keys[2]|2)>>>0;return m6(t,t^1)>>8&255};function xbe(t){let e=new bS(t);return function(r){let n=Buffer.alloc(r.length),i=0;for(let s of r)n[i++]=e.updateKeys(s^e.next());return n}}function vbe(t){let e=new bS(t);return function(r,n,i=0){n||(n=Buffer.alloc(r.length));for(let s of r){let o=e.next();n[i++]=s^o,e.updateKeys(s)}return n}}function Mbe(t,e,r){if(!t||!Buffer.isBuffer(t)||t.length<12)return Buffer.alloc(0);let n=xbe(r),i=n(t.slice(0,12)),s=(e.flags&8)===8?e.timeHighByte:e.crc>>>24;if(i[11]!==s)throw Dbe.WRONG_PASSWORD();return n(t.slice(12))}function Ube(t){Buffer.isBuffer(t)&&t.length>=12?CS.genSalt=function(){return t.slice(0,12)}:t==="node"?CS.genSalt=ef.node:CS.genSalt=ef}function Bbe(t,e,r,n=!1){t==null&&(t=Buffer.alloc(0)),Buffer.isBuffer(t)||(t=Buffer.from(t.toString()));let i=vbe(r),s=CS.genSalt();s[11]=e.crc>>>24&255,n&&(s[10]=e.crc>>>16&255);let o=Buffer.alloc(t.length+12);return i(s,o),i(t,o,12)}g6.exports={decrypt:Mbe,encrypt:Bbe,_salter:Ube}});var I6=O(yS=>{yS.Deflater=p6();yS.Inflater=S6();yS.ZipCrypto=_6()});var ab=O((sFe,N6)=>{var ze=_c(),Fbe=sb(),Ot=ze.Constants,ob=I6();N6.exports=function(t,e){var r=new Fbe.EntryHeader,n=Buffer.alloc(0),i=Buffer.alloc(0),s=!1,o=null,a=Buffer.alloc(0),l=Buffer.alloc(0),c=!0;let u=t,d=typeof u.decoder=="object"?u.decoder:ze.decoder;c=d.hasOwnProperty("efs")?d.efs:!1;function E(){return!e||!(e instanceof Uint8Array)?Buffer.alloc(0):(l=r.loadLocalHeaderFromBinary(e),e.slice(r.realDataOffset,r.realDataOffset+r.compressedSize))}function f(R){if(r.flags_desc){let A={},I=r.realDataOffset+r.compressedSize;if(e.readUInt32LE(I)==Ot.LOCSIG||e.readUInt32LE(I)==Ot.CENSIG)throw ze.Errors.DESCRIPTOR_NOT_EXIST();if(e.readUInt32LE(I)==Ot.EXTSIG)A.crc=e.readUInt32LE(I+Ot.EXTCRC),A.compressedSize=e.readUInt32LE(I+Ot.EXTSIZ),A.size=e.readUInt32LE(I+Ot.EXTLEN);else if(e.readUInt16LE(I+12)===19280)A.crc=e.readUInt32LE(I+Ot.EXTCRC-4),A.compressedSize=e.readUInt32LE(I+Ot.EXTSIZ-4),A.size=e.readUInt32LE(I+Ot.EXTLEN-4);else throw ze.Errors.DESCRIPTOR_UNKNOWN();if(A.compressedSize!==r.compressedSize||A.size!==r.size||A.crc!==r.crc)throw ze.Errors.DESCRIPTOR_FAULTY();if(ze.crc32(R)!==A.crc)return!1}else if(ze.crc32(R)!==r.localHeader.crc)return!1;return!0}function p(R,A,I){if(typeof A>"u"&&typeof R=="string"&&(I=R,R=void 0),s)return R&&A&&A(Buffer.alloc(0),ze.Errors.DIRECTORY_CONTENT_ERROR()),Buffer.alloc(0);var w=E();if(w.length===0)return R&&A&&A(w),w;if(r.encrypted){if(typeof I!="string"&&!Buffer.isBuffer(I))throw ze.Errors.INVALID_PASS_PARAM();w=ob.ZipCrypto.decrypt(w,r,I)}var g=Buffer.alloc(r.size);switch(r.method){case ze.Constants.STORED:if(w.copy(g),f(g))return R&&A&&A(g),g;throw R&&A&&A(g,ze.Errors.BAD_CRC()),ze.Errors.BAD_CRC();case ze.Constants.DEFLATED:var L=new ob.Inflater(w,r.size);if(R)L.inflateAsync(function(y){y.copy(y,0),A&&(f(y)?A(y):A(y,ze.Errors.BAD_CRC()))});else{if(L.inflate(g).copy(g,0),!f(g))throw ze.Errors.BAD_CRC(`"${d.decode(n)}"`);return g}break;default:throw R&&A&&A(Buffer.alloc(0),ze.Errors.UNKNOWN_METHOD()),ze.Errors.UNKNOWN_METHOD()}}function h(R,A){if((!o||!o.length)&&Buffer.isBuffer(e))return R&&A&&A(E()),E();if(o.length&&!s){var I;switch(r.method){case ze.Constants.STORED:return r.compressedSize=r.size,I=Buffer.alloc(o.length),o.copy(I),R&&A&&A(I),I;default:case ze.Constants.DEFLATED:var w=new ob.Deflater(o);if(R)w.deflateAsync(function(L){I=Buffer.alloc(L.length),r.compressedSize=L.length,L.copy(I),A&&A(I)});else{var g=w.deflate();return r.compressedSize=g.length,g}w=null;break}}else if(R&&A)A(Buffer.alloc(0));else return Buffer.alloc(0)}function S(R,A){return(R.readUInt32LE(A+4)<<4)+R.readUInt32LE(A)}function T(R){try{for(var A=0,I,w,g;A+4<R.length;)I=R.readUInt16LE(A),A+=2,w=R.readUInt16LE(A),A+=2,g=R.slice(A,A+w),A+=w,Ot.ID_ZIP64===I&&m(g)}catch{throw ze.Errors.EXTRA_FIELD_PARSE_ERROR()}}function m(R){var A,I,w,g;R.length>=Ot.EF_ZIP64_SCOMP&&(A=S(R,Ot.EF_ZIP64_SUNCOMP),r.size===Ot.EF_ZIP64_OR_32&&(r.size=A)),R.length>=Ot.EF_ZIP64_RHO&&(I=S(R,Ot.EF_ZIP64_SCOMP),r.compressedSize===Ot.EF_ZIP64_OR_32&&(r.compressedSize=I)),R.length>=Ot.EF_ZIP64_DSN&&(w=S(R,Ot.EF_ZIP64_RHO),r.offset===Ot.EF_ZIP64_OR_32&&(r.offset=w)),R.length>=Ot.EF_ZIP64_DSN+4&&(g=R.readUInt32LE(Ot.EF_ZIP64_DSN),r.diskNumStart===Ot.EF_ZIP64_OR_16&&(r.diskNumStart=g))}return{get entryName(){return d.decode(n)},get rawEntryName(){return n},set entryName(R){n=ze.toBuffer(R,d.encode);var A=n[n.length-1];s=A===47||A===92,r.fileNameLength=n.length},get efs(){return typeof c=="function"?c(this.entryName):c},get extra(){return a},set extra(R){a=R,r.extraLength=R.length,T(R)},get comment(){return d.decode(i)},set comment(R){if(i=ze.toBuffer(R,d.encode),r.commentLength=i.length,i.length>65535)throw ze.Errors.COMMENT_TOO_LONG()},get name(){var R=d.decode(n);return s?R.substr(R.length-1).split("/").pop():R.split("/").pop()},get isDirectory(){return s},getCompressedData:function(){return h(!1,null)},getCompressedDataAsync:function(R){h(!0,R)},setData:function(R){o=ze.toBuffer(R,ze.decoder.encode),!s&&o.length?(r.size=o.length,r.method=ze.Constants.DEFLATED,r.crc=ze.crc32(R),r.changed=!0):r.method=ze.Constants.STORED},getData:function(R){return r.changed?o:p(!1,null,R)},getDataAsync:function(R,A){r.changed?R(o):p(!0,R,A)},set attr(R){r.attr=R},get attr(){return r.attr},set header(R){r.loadFromBinary(R)},get header(){return r},packCentralHeader:function(){r.flags_efs=this.efs,r.extraLength=a.length;var R=r.centralHeaderToBinary(),A=ze.Constants.CENHDR;return n.copy(R,A),A+=n.length,a.copy(R,A),A+=r.extraLength,i.copy(R,A),R},packLocalHeader:function(){let R=0;r.flags_efs=this.efs,r.extraLocalLength=l.length;let A=r.localHeaderToBinary(),I=Buffer.alloc(A.length+n.length+r.extraLocalLength);return A.copy(I,R),R+=A.length,n.copy(I,R),R+=n.length,l.copy(I,R),R+=l.length,I},toJSON:function(){let R=function(A){return"<"+(A&&A.length+" bytes buffer"||"null")+">"};return{entryName:this.entryName,name:this.name,comment:this.comment,isDirectory:this.isDirectory,header:r.toJSON(),compressedData:R(e),data:R(o)}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var b6=O((oFe,C6)=>{var O6=ab(),Hbe=sb(),gr=_c();C6.exports=function(t,e){var r=[],n={},i=Buffer.alloc(0),s=new Hbe.MainHeader,o=!1,a=null;let l=new Set,c=e,{noSort:u,decoder:d}=c;t?p(c.readEntries):o=!0;function E(){let S=new Set;for(let T of Object.keys(n)){let m=T.split("/");if(m.pop(),!!m.length)for(let R=0;R<m.length;R++){let A=m.slice(0,R+1).join("/")+"/";S.add(A)}}for(let T of S)if(!(T in n)){let m=new O6(c);m.entryName=T,m.attr=16,m.temporary=!0,r.push(m),n[m.entryName]=m,l.add(m)}}function f(){if(o=!0,n={},s.diskEntries>(t.length-s.offset)/gr.Constants.CENHDR)throw gr.Errors.DISK_ENTRY_TOO_LARGE();r=new Array(s.diskEntries);for(var S=s.offset,T=0;T<r.length;T++){var m=S,R=new O6(c,t);R.header=t.slice(m,m+=gr.Constants.CENHDR),R.entryName=t.slice(m,m+=R.header.fileNameLength),R.header.extraLength&&(R.extra=t.slice(m,m+=R.header.extraLength)),R.header.commentLength&&(R.comment=t.slice(m,m+R.header.commentLength)),S+=R.header.centralHeaderSize,r[T]=R,n[R.entryName]=R}l.clear(),E()}function p(S){var T=t.length-gr.Constants.ENDHDR,m=Math.max(0,T-65535),R=m,A=t.length,I=-1,w=0;for(typeof c.trailingSpace=="boolean"&&c.trailingSpace&&(m=0),T;T>=R;T--)if(t[T]===80){if(t.readUInt32LE(T)===gr.Constants.ENDSIG){I=T,w=T,A=T+gr.Constants.ENDHDR,R=T-gr.Constants.END64HDR;continue}if(t.readUInt32LE(T)===gr.Constants.END64SIG){R=m;continue}if(t.readUInt32LE(T)===gr.Constants.ZIP64SIG){I=T,A=T+gr.readBigUInt64LE(t,T+gr.Constants.ZIP64SIZE)+gr.Constants.ZIP64LEAD;break}}if(I==-1)throw gr.Errors.INVALID_FORMAT();s.loadFromBinary(t.slice(I,A)),s.commentLength&&(i=t.slice(w+gr.Constants.ENDHDR)),S&&f()}function h(){r.length>1&&!u&&r.sort((S,T)=>S.entryName.toLowerCase().localeCompare(T.entryName.toLowerCase()))}return{get entries(){return o||f(),r.filter(S=>!l.has(S))},get comment(){return d.decode(i)},set comment(S){i=gr.toBuffer(S,d.encode),s.commentLength=i.length},getEntryCount:function(){return o?r.length:s.diskEntries},forEach:function(S){this.entries.forEach(S)},getEntry:function(S){return o||f(),n[S]||null},setEntry:function(S){o||f(),r.push(S),n[S.entryName]=S,s.totalEntries=r.length},deleteFile:function(S,T=!0){o||f();let m=n[S];this.getEntryChildren(m,T).map(A=>A.entryName).forEach(this.deleteEntry)},deleteEntry:function(S){o||f();let T=n[S],m=r.indexOf(T);m>=0&&(r.splice(m,1),delete n[S],s.totalEntries=r.length)},getEntryChildren:function(S,T=!0){if(o||f(),typeof S=="object")if(S.isDirectory&&T){let m=[],R=S.entryName;for(let A of r)A.entryName.startsWith(R)&&m.push(A);return m}else return[S];return[]},getChildCount:function(S){if(S&&S.isDirectory){let T=this.getEntryChildren(S);return T.includes(S)?T.length-1:T.length}return 0},compressToBuffer:function(){o||f(),h();let S=[],T=[],m=0,R=0;s.size=0,s.offset=0;let A=0;for(let g of this.entries){let L=g.getCompressedData();g.header.offset=R;let y=g.packLocalHeader(),P=y.length+L.length;R+=P,S.push(y),S.push(L);let v=g.packCentralHeader();T.push(v),s.size+=v.length,m+=P+v.length,A++}m+=s.mainHeaderSize,s.offset=R,s.totalEntries=A,R=0;let I=Buffer.alloc(m);for(let g of S)g.copy(I,R),R+=g.length;for(let g of T)g.copy(I,R),R+=g.length;let w=s.toBinary();return i&&i.copy(w,gr.Constants.ENDHDR),w.copy(I,R),t=I,o=!1,I},toAsyncBuffer:function(S,T,m,R){try{o||f(),h();let A=[],I=[],w=0,g=0,L=0;s.size=0,s.offset=0;let y=function(P){if(P.length>0){let v=P.shift(),B=v.entryName+v.extra.toString();m&&m(B),v.getCompressedDataAsync(function(F){R&&R(B),v.header.offset=g;let V=v.packLocalHeader(),K=V.length+F.length;g+=K,A.push(V),A.push(F);let Z=v.packCentralHeader();I.push(Z),s.size+=Z.length,w+=K+Z.length,L++,y(P)})}else{w+=s.mainHeaderSize,s.offset=g,s.totalEntries=L,g=0;let v=Buffer.alloc(w);A.forEach(function(F){F.copy(v,g),g+=F.length}),I.forEach(function(F){F.copy(v,g),g+=F.length});let B=s.toBinary();i&&i.copy(B,gr.Constants.ENDHDR),B.copy(v,g),t=v,o=!1,S(v)}};y(Array.from(this.entries))}catch(A){T(A)}}}}});var L6=O((aFe,w6)=>{var gt=_c(),Ct=require("path"),Gbe=ab(),Wbe=b6(),Ra=(...t)=>gt.findLast(t,e=>typeof e=="boolean"),y6=(...t)=>gt.findLast(t,e=>typeof e=="string"),$be=(...t)=>gt.findLast(t,e=>typeof e=="function"),kbe={noSort:!1,readEntries:!1,method:gt.Constants.NONE,fs:null};w6.exports=function(t,e){let r=null,n=Object.assign(Object.create(null),kbe);t&&typeof t=="object"&&(t instanceof Uint8Array||(Object.assign(n,t),t=n.input?n.input:void 0,n.input&&delete n.input),Buffer.isBuffer(t)&&(r=t,n.method=gt.Constants.BUFFER,t=void 0)),Object.assign(n,e);let i=new gt(n);if((typeof n.decoder!="object"||typeof n.decoder.encode!="function"||typeof n.decoder.decode!="function")&&(n.decoder=gt.decoder),t&&typeof t=="string")if(i.fs.existsSync(t))n.method=gt.Constants.FILE,n.filename=t,r=i.fs.readFileSync(t);else throw gt.Errors.INVALID_FILENAME();let s=new Wbe(r,n),{canonical:o,sanitize:a,zipnamefix:l}=gt;function c(f){if(f&&s){var p;if(typeof f=="string"&&(p=s.getEntry(Ct.posix.normalize(f))),typeof f=="object"&&typeof f.entryName<"u"&&typeof f.header<"u"&&(p=s.getEntry(f.entryName)),p)return p}return null}function u(f){let{join:p,normalize:h,sep:S}=Ct.posix;return p(".",h(S+f.split("\\").join(S)+S))}function d(f){return f instanceof RegExp?(function(p){return function(h){return p.test(h)}})(f):typeof f!="function"?()=>!0:f}let E=(f,p)=>{let h=p.slice(-1);return h=h===i.sep?i.sep:"",Ct.relative(f,p)+h};return{readFile:function(f,p){var h=c(f);return h&&h.getData(p)||null},childCount:function(f){let p=c(f);if(p)return s.getChildCount(p)},readFileAsync:function(f,p){var h=c(f);h?h.getDataAsync(p):p(null,"getEntry failed for:"+f)},readAsText:function(f,p){var h=c(f);if(h){var S=h.getData();if(S&&S.length)return S.toString(p||"utf8")}return""},readAsTextAsync:function(f,p,h){var S=c(f);S?S.getDataAsync(function(T,m){if(m){p(T,m);return}T&&T.length?p(T.toString(h||"utf8")):p("")}):p("")},deleteFile:function(f,p=!0){var h=c(f);h&&s.deleteFile(h.entryName,p)},deleteEntry:function(f){var p=c(f);p&&s.deleteEntry(p.entryName)},addZipComment:function(f){s.comment=f},getZipComment:function(){return s.comment||""},addZipEntryComment:function(f,p){var h=c(f);h&&(h.comment=p)},getZipEntryComment:function(f){var p=c(f);return p&&p.comment||""},updateFile:function(f,p){var h=c(f);h&&h.setData(p)},addLocalFile:function(f,p,h,S){if(i.fs.existsSync(f)){p=p?u(p):"";let T=Ct.win32.basename(Ct.win32.normalize(f));p+=h||T;let m=i.fs.statSync(f),R=m.isFile()?i.fs.readFileSync(f):Buffer.alloc(0);m.isDirectory()&&(p+=i.sep),this.addFile(p,R,S,m)}else throw gt.Errors.FILE_NOT_FOUND(f)},addLocalFileAsync:function(f,p){f=typeof f=="object"?f:{localPath:f};let h=Ct.resolve(f.localPath),{comment:S}=f,{zipPath:T,zipName:m}=f,R=this;i.fs.stat(h,function(A,I){if(A)return p(A,!1);T=T?u(T):"";let w=Ct.win32.basename(Ct.win32.normalize(h));if(T+=m||w,I.isFile())i.fs.readFile(h,function(g,L){return g?p(g,!1):(R.addFile(T,L,S,I),setImmediate(p,void 0,!0))});else if(I.isDirectory())return T+=i.sep,R.addFile(T,Buffer.alloc(0),S,I),setImmediate(p,void 0,!0)})},addLocalFolder:function(f,p,h){if(h=d(h),p=p?u(p):"",f=Ct.normalize(f),i.fs.existsSync(f)){let S=i.findFiles(f),T=this;if(S.length)for(let m of S){let R=Ct.join(p,E(f,m));h(R)&&T.addLocalFile(m,Ct.dirname(R))}}else throw gt.Errors.FILE_NOT_FOUND(f)},addLocalFolderAsync:function(f,p,h,S){S=d(S),h=h?u(h):"",f=Ct.normalize(f);var T=this;i.fs.open(f,"r",function(m){if(m&&m.code==="ENOENT")p(void 0,gt.Errors.FILE_NOT_FOUND(f));else if(m)p(void 0,m);else{var R=i.findFiles(f),A=-1,I=function(){if(A+=1,A<R.length){var w=R[A],g=E(f,w).split("\\").join("/");g=g.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\x20-\x7E]/g,""),S(g)?i.fs.stat(w,function(L,y){L&&p(void 0,L),y.isFile()?i.fs.readFile(w,function(P,v){P?p(void 0,P):(T.addFile(h+g,v,"",y),I())}):(T.addFile(h+g+"/",Buffer.alloc(0),"",y),I())}):process.nextTick(()=>{I()})}else p(!0,void 0)};I()}})},addLocalFolderAsync2:function(f,p){let h=this;f=typeof f=="object"?f:{localPath:f},localPath=Ct.resolve(u(f.localPath));let{zipPath:S,filter:T,namefix:m}=f;T instanceof RegExp?T=(function(I){return function(w){return I.test(w)}})(T):typeof T!="function"&&(T=function(){return!0}),S=S?u(S):"",m=="latin1"&&(m=I=>I.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\x20-\x7E]/g,"")),typeof m!="function"&&(m=I=>I);let R=I=>Ct.join(S,m(E(localPath,I))),A=I=>Ct.win32.basename(Ct.win32.normalize(m(I)));i.fs.open(localPath,"r",function(I){I&&I.code==="ENOENT"?p(void 0,gt.Errors.FILE_NOT_FOUND(localPath)):I?p(void 0,I):i.findFilesAsync(localPath,function(w,g){if(w)return p(w);g=g.filter(L=>T(R(L))),g.length||p(void 0,!1),setImmediate(g.reverse().reduce(function(L,y){return function(P,v){if(P||v===!1)return setImmediate(L,P,!1);h.addLocalFileAsync({localPath:y,zipPath:Ct.dirname(R(y)),zipName:A(y)},L)}},p))})})},addLocalFolderPromise:function(f,p){return new Promise((h,S)=>{this.addLocalFolderAsync2(Object.assign({localPath:f},p),(T,m)=>{T&&S(T),m&&h(this)})})},addFile:function(f,p,h,S){f=l(f);let T=c(f),m=T!=null;m||(T=new Gbe(n),T.entryName=f),T.comment=h||"";let R=typeof S=="object"&&S instanceof i.fs.Stats;R&&(T.header.time=S.mtime);var A=T.isDirectory?16:0;let I=T.isDirectory?16384:32768;return R?I|=4095&S.mode:typeof S=="number"?I|=4095&S:I|=T.isDirectory?493:420,A=(A|I<<16)>>>0,T.attr=A,T.setData(p),m||s.setEntry(T),T},getEntries:function(f){return s.password=f,s?s.entries:[]},getEntry:function(f){return c(f)},getEntryCount:function(){return s.getEntryCount()},forEach:function(f){return s.forEach(f)},extractEntryTo:function(f,p,h,S,T,m){S=Ra(!1,S),T=Ra(!1,T),h=Ra(!0,h),m=y6(T,m);var R=c(f);if(!R)throw gt.Errors.NO_ENTRY();var A=o(R.entryName),I=a(p,m&&!R.isDirectory?m:h?A:Ct.basename(A));if(R.isDirectory){var w=s.getEntryChildren(R);return w.forEach(function(y){if(y.isDirectory)return;var P=y.getData();if(!P)throw gt.Errors.CANT_EXTRACT_FILE();var v=o(y.entryName),B=a(p,h?v:Ct.basename(v));let F=T?y.header.fileAttr:void 0;i.writeFileTo(B,P,S,F)}),!0}var g=R.getData(s.password);if(!g)throw gt.Errors.CANT_EXTRACT_FILE();if(i.fs.existsSync(I)&&!S)throw gt.Errors.CANT_OVERRIDE();let L=T?f.header.fileAttr:void 0;return i.writeFileTo(I,g,S,L),!0},test:function(f){if(!s)return!1;for(var p in s.entries)try{if(p.isDirectory)continue;var h=s.entries[p].getData(f);if(!h)return!1}catch{return!1}return!0},extractAllTo:function(f,p,h,S){if(h=Ra(!1,h),S=y6(h,S),p=Ra(!1,p),!s)throw gt.Errors.NO_ZIP();s.entries.forEach(function(T){var m=a(f,o(T.entryName));if(T.isDirectory){i.makeDir(m);return}var R=T.getData(S);if(!R)throw gt.Errors.CANT_EXTRACT_FILE();let A=h?T.header.fileAttr:void 0;i.writeFileTo(m,R,p,A);try{i.fs.utimesSync(m,T.header.time,T.header.time)}catch{throw gt.Errors.CANT_EXTRACT_FILE()}})},extractAllToAsync:function(f,p,h,S){if(S=$be(p,h,S),h=Ra(!1,h),p=Ra(!1,p),!S)return new Promise((I,w)=>{this.extractAllToAsync(f,p,h,function(g){g?w(g):I(this)})});if(!s){S(gt.Errors.NO_ZIP());return}f=Ct.resolve(f);let T=I=>a(f,Ct.normalize(o(I.entryName))),m=(I,w)=>new Error(I+': "'+w+'"'),R=[],A=[];s.entries.forEach(I=>{I.isDirectory?R.push(I):A.push(I)});for(let I of R){let w=T(I),g=h?I.header.fileAttr:void 0;try{i.makeDir(w),g&&i.fs.chmodSync(w,g),i.fs.utimesSync(w,I.header.time,I.header.time)}catch{S(m("Unable to create folder",w))}}A.reverse().reduce(function(I,w){return function(g){if(g)I(g);else{let L=Ct.normalize(o(w.entryName)),y=a(f,L);w.getDataAsync(function(P,v){if(v)I(v);else if(!P)I(gt.Errors.CANT_EXTRACT_FILE());else{let B=h?w.header.fileAttr:void 0;i.writeFileToAsync(y,P,p,B,function(F){F||I(m("Unable to write file",y)),i.fs.utimes(y,w.header.time,w.header.time,function(V){V?I(m("Unable to set times",y)):I()})})}})}}},S)()},writeZip:function(f,p){if(arguments.length===1&&typeof f=="function"&&(p=f,f=""),!f&&n.filename&&(f=n.filename),!!f){var h=s.compressToBuffer();if(h){var S=i.writeFileTo(f,h,!0);typeof p=="function"&&p(S?null:new Error("failed"),"")}}},writeZipPromise:function(f,p){let{overwrite:h,perm:S}=Object.assign({overwrite:!0},p);return new Promise((T,m)=>{!f&&n.filename&&(f=n.filename),f||m("ADM-ZIP: ZIP File Name Missing"),this.toBufferPromise().then(R=>{let A=I=>I?T(I):m("ADM-ZIP: Wasn't able to write zip file");i.writeFileToAsync(f,R,h,S,A)},m)})},toBufferPromise:function(){return new Promise((f,p)=>{s.toAsyncBuffer(f,p)})},toBuffer:function(f,p,h,S){return typeof f=="function"?(s.toAsyncBuffer(f,p,h,S),null):s.compressToBuffer()}}}});var Aa,D6=G(()=>{"use strict";Aa=class{constructor(e){this._isSheet=!1;this._workbookId=0;this._recId=null;this._workbookName=null;this._inCellXf=!1;this._inCellStyleXf=!1;this._inNumberFormat=!1;this._parentCellStyleXf=0;this._numberFormatIndex=0;this._format=0;this._formatString=null;this._sharedStringValue=null;this._sharedStringUniqueCount=0;this._cellType=0;this._intValue=0;this._doubleVal=0;this._boolValue=!1;this._stringValue=null;this._columnNum=-1;this._xfIndex=0;this._readCell=!1;this._rowIndex=-1;this._recordStart=0;this._xfIndexToNumFmtId=[];this._customNumFmts=new Set;if(!Buffer.isBuffer(e))throw new Error("BiffReaderWriter expects a Buffer");this.buffer=e,this.pos=0,this.length=e.length}_tryReadVariableValue(){if(this.pos>=this.length)return null;let e=this.buffer[this.pos++],r=(e&127)>>>0;if((e&128)===0)return r;if(this.pos>=this.length)return null;let n=this.buffer[this.pos++];if(r=((n&127)<<7|r)>>>0,(n&128)===0)return r;if(this.pos>=this.length)return null;let i=this.buffer[this.pos++];return r=((i&127)<<14|r)>>>0,(i&128)===0?r:this.pos>=this.length?null:(r=((this.buffer[this.pos++]&127)<<21|r)>>>0,r)}_getDWord(e){return this.buffer.readUInt32LE(this._recordStart+e)}_getInt32(e){return this.buffer.readInt32LE(this._recordStart+e)}_getWord(e){return this.buffer.readUInt16LE(this._recordStart+e)}_getByte(e){return this.buffer[this._recordStart+e]}_getDouble(e){return this.buffer.readDoubleLE(this._recordStart+e)}_getString(e,r){let n=this._recordStart+e,i=n+r*2;return i>this.buffer.length?"":this.buffer.toString("utf16le",n,i)}_getNullableString(e){let r=this._getDWord(e.val);if(e.val+=4,r===4294967295)return null;let n=this._getString(e.val,r);return e.val+=r*2,n}readWorkbook(){let e=this._tryReadVariableValue(),r=this._tryReadVariableValue();if(e===null||r===null)return!1;let n=this.pos;if(n+r>this.length)return!1;if(this._recordStart=n,this.pos+=r,this._isSheet=!1,e===156){this._workbookId=this._getDWord(4);let i={val:8};this._recId=this._getNullableString(i);let s=this._getDWord(i.val);this._workbookName=this._getString(i.val+4,s),this._isSheet=!0}return!0}readSharedStrings(){let e=this._tryReadVariableValue(),r=this._tryReadVariableValue();if(e===null||r===null)return!1;let n=this.pos;if(n+r>this.length)return!1;if(this._recordStart=n,this.pos+=r,this._sharedStringValue=null,e===19){let i=this._getDWord(1);this._sharedStringValue=this._getString(5,i)}else e===159&&(this._sharedStringUniqueCount=this._getDWord(4));return!0}readStyles(){let e=this._tryReadVariableValue(),r=this._tryReadVariableValue();if(e===null||r===null)return!1;let n=this.pos;if(n+r>this.length)return!1;this._recordStart=n,this.pos+=r;let i=617,s=618,o=626,a=627,l=615,c=616,u=47,d=44;switch(e){case i:this._inCellXf=!0;break;case s:this._inCellXf=!1;break;case o:this._inCellStyleXf=!0;break;case a:this._inCellStyleXf=!1;break;case l:this._inNumberFormat=!0;break;case c:this._inNumberFormat=!1;break;case u:this._inCellXf&&(this._parentCellStyleXf=this._getWord(0),this._numberFormatIndex=this._getWord(2),this._xfIndexToNumFmtId.push(this._numberFormatIndex));break;case d:if(this._inNumberFormat){this._format=this._getWord(0);let E=this._getDWord(2);this._formatString=this._getString(6,E);let f=this._formatString.toLowerCase();(f.includes("yy")||f.includes("mm")||f.includes("dd")||f.includes("h:mm"))&&this._customNumFmts.add(this._format)}break}return!0}_getRkNumber(e){let r=this._getByte(e),n=0;if((r&2)!==0)n=this._getInt32(e)>>2;else{let s=this._getInt32(e)&4294967292,o=Buffer.allocUnsafe(8);o.writeInt32LE(0,0),o.writeInt32LE(s,4),n=o.readDoubleLE(0)}return(r&1)!==0&&(n/=100),n}readWorksheet(){let e=this._tryReadVariableValue(),r=this._tryReadVariableValue();if(e===null||r===null)return!1;let n=this.pos;if(n+r>this.length)return!1;this._recordStart=n,this.pos+=r,this._readCell=!1,this._columnNum=-1;let i=0,s=1,o=2,a=3,l=4,c=5,u=6,d=7,E=8,f=9,p=10,h=11;switch(e){case i:this._rowIndex=this._getInt32(0);break;case s:case a:case h:this._readCell=!0,this._cellType=0;break;case o:this._doubleVal=this._getRkNumber(8),this._readCell=!0,this._cellType=3;break;case l:case p:this._boolValue=this._getByte(8)===1,this._readCell=!0,this._cellType=4;break;case f:case c:this._doubleVal=this._getDouble(8),this._readCell=!0,this._cellType=3;break;case u:case E:{let S=this._getDWord(8);this._stringValue=this._getString(12,S),this._readCell=!0,this._cellType=5;break}case d:this._intValue=this._getDWord(8),this._readCell=!0,this._cellType=2;break}return this._readCell&&(this._columnNum=this._getDWord(0),this._xfIndex=this._getDWord(4)&16777215),!0}}});var P6,wS,x6=G(()=>{"use strict";P6=q(L6());rb();D6();wS=class extends mc{constructor(){super();this.zip=null;this.sharedStrings=[];this.styles=[];this.sheetNames=[];this.sheets=[];this._currentSheetIndex=-1;this._reader=null;this._currentRow=[];this._pendingRowIndex=-1;this._eof=!1;this.xfIdToNumFmtId=[];this.customDateFormats=null}async open(r,n=!0){this.zip=new P6.default(r);let i=this.zip.getEntry("xl/workbook.bin");if(i){let a=i.getData(),l=new Aa(a);for(;l.readWorkbook();)if(l._isSheet){let c=l._workbookName,u=l._recId;this.sheetNames.push(c),this.sheets.push({name:c,rId:u,path:null})}}let s=this.zip.getEntry("xl/_rels/workbook.bin.rels");if(s){let a=s.getData().toString("utf8"),l=/<Relationship[^>]*Id="([^"]*)"[^>]*Target="([^"]*)"/g,c,u={};for(;(c=l.exec(a))!==null;)u[c[1]]=c[2];for(let d of this.sheets){let E=u[d.rId];E&&(E.startsWith("/")&&(E=E.substring(1)),E.startsWith("xl/")||(E="xl/"+E),d.path=E)}}if(n){let a="xl/sharedStrings.bin";this.zip.getEntry(a)&&this._readSharedStrings(a)}let o="xl/styles.bin";this.zip.getEntry(o)&&this._readStyles(o),this.resultsCount=this.sheets.length,this._currentSheetIndex=-1}_readSharedStrings(r){let n=this.zip.getEntry(r);if(!n)return;let i=new Aa(n.getData());for(;i.readSharedStrings();)i._sharedStringValue!==null&&this.sharedStrings.push(i._sharedStringValue)}_readStyles(r){let n=this.zip.getEntry(r);if(!n)return;let i=new Aa(n.getData());for(;i.readStyles(););this.xfIdToNumFmtId=i._xfIndexToNumFmtId,this.customDateFormats=i._customNumFmts}getSheetNames(){return this.sheetNames}read(){if(this._currentSheetIndex===-1&&(this._currentSheetIndex=0,!this._initSheet(0))||this._eof)return!1;for(this._currentRow=[];;){if(!this._reader.readWorksheet())return this._eof=!0,!0;if(this._reader._rowIndex!==-1&&this._reader._rowIndex!==this._pendingRowIndex)return this._pendingRowIndex=this._reader._rowIndex,!0;if(this._reader._readCell){let n=this._reader._columnNum,i=null;switch(this._reader._cellType){case 2:i=this.sharedStrings[this._reader._intValue];break;case 3:{i=this._reader._doubleVal;let s=this._reader._xfIndex,o=0;if(this.xfIdToNumFmtId&&s<this.xfIdToNumFmtId.length&&(o=this.xfIdToNumFmtId[s]),o>=14&&o<=22||o>=45&&o<=47||this.customDateFormats&&this.customDateFormats.has(o))try{i=this.getDateTimeFromOaDate(i)}catch{}break}case 4:i=this._reader._boolValue;break;case 5:i=this._reader._stringValue;break;default:i=null}this._currentRow[n]=i,n>=this.fieldCount&&(this.fieldCount=n+1)}}}_initSheet(r){if(r>=this.sheets.length)return!1;let n=this.sheets[r],i=this.zip.getEntry(n.path);if(!i)return!1;for(this._reader=new Aa(i.getData()),this._eof=!1,this._pendingRowIndex=-1;this._reader.readWorksheet();)if(this._reader._rowIndex!==-1)return this._pendingRowIndex=this._reader._rowIndex,!0;return this._eof=!0,!1}getValue(r){return r<0||r>=this._currentRow.length?null:this._currentRow[r]}}});var M6={};Et(M6,{ReaderFactory:()=>LS,default:()=>Ybe});var v6,LS,Ybe,U6=G(()=>{"use strict";v6=q(require("path"));JX();x6();LS=class{static create(e){let r=v6.extname(e).toLowerCase();if(r===".xlsx")return new NS;if(r===".xlsb")return new wS;throw new Error(`Unsupported extension: ${r}`)}},Ybe=LS});var H6={};Et(H6,{ColumnTypeChooser:()=>Nc,NetezzaDataType:()=>yi,NetezzaImporter:()=>DS,importDataToNetezza:()=>ub});async function ub(t,e,r,n,i){let s=Date.now(),o=null;try{if(!t||!kn.existsSync(t))return{success:!1,message:`Source file not found: ${t}`};if(!e)return{success:!1,message:"Target table name is required"};if(!r||!r.host)return{success:!1,message:"Connection details are required"};let l=kn.statSync(t).size,c=ma.extname(t).toLowerCase(),u=[".csv",".txt",".xlsx",".xlsb"];if(!u.includes(c))return{success:!1,message:`Unsupported file format: ${c}. Supported: ${u.join(", ")}`};n?.("Starting import process..."),n?.(`  Source file: ${t}`),n?.(`  Target table: ${e}`),n?.(`  File size: ${l.toLocaleString()} bytes`),n?.(`  File format: ${c}`);let d=new DS(t,e);await d.analyzeDataTypes(n),n?.("Preparing in-memory data stream...");let E=await d.createDataStream(n),f=d.getVirtualFileName();n?.(`Registered virtual stream: ${f}`);let p=Ir();p&&p.registerImportStream?p.registerImportStream(f,E):n?.("Warning: NzConnection driver does not support stream registry. Import might fail.");let h=d.generateCreateTableSql();n?.("Generated SQL:"),n?.(h),n?.("Connecting to Netezza...");let S={host:r.host,port:r.port||5480,database:r.database,user:r.user,password:r.password},T=Ir();o=new T(S),await o.connect();try{n?.("Executing CREATE TABLE with EXTERNAL data...");let R=o.createCommand(h);R.commandTimeout=i||3600;let A=d.getRowsCount();o.on("importProgress",I=>{let w=I,g=A>0?Math.round(w.percentComplete/100*A):0;n?.(`Importing: ${w.percentComplete}% complete (${g.toLocaleString()} / ${A.toLocaleString()} rows)`)}),await R.execute(),n?.("Import completed successfully")}finally{await o.close(),p&&p.unregisterImportStream&&p.unregisterImportStream(f)}let m=(Date.now()-s)/1e3;return{success:!0,message:"Import completed successfully",details:{sourceFile:t,targetTable:e,fileSize:l,format:c,rowsProcessed:d.getRowsCount(),rowsInserted:d.getRowsCount(),processingTime:`${m.toFixed(1)}s`,columns:d.getSqlHeaders().length,detectedDelimiter:d.getCsvDelimiter()}}}catch(a){let l=(Date.now()-s)/1e3;return{success:!1,message:`Import failed: ${a instanceof Error?a.message:String(a)}`,details:{processingTime:`${l.toFixed(1)}s`}}}finally{if(o&&o._connected)try{await o.close()}catch{}}}var kn,ma,F6,B6,lb,yi,Nc,cb,DS,PS=G(()=>{"use strict";kn=q(require("fs")),ma=q(require("path")),F6=require("stream"),B6=()=>new Promise(t=>setTimeout(t,0));try{let t=(U6(),gs(M6));lb=t.default||t.ReaderFactory||t}catch(t){console.error("libs/ExcelHelpersTs/ReaderFactory module not available",t)}yi=class{constructor(e,r,n,i){this.dbType=e;this.precision=r;this.scale=n;this.length=i}toString(){return["BIGINT","DATE","DATETIME"].includes(this.dbType)?this.dbType:this.dbType==="NUMERIC"?`${this.dbType}(${this.precision},${this.scale})`:this.dbType==="NVARCHAR"?`${this.dbType}(${this.length})`:`TODO !!! ${this.dbType}`}},Nc=class{constructor(e="."){this.decimalDelimInCsv=".";this.firstTime=!0;this.currentType=new yi("BIGINT"),this.decimalDelimInCsv=e}getType(e){let r=this.currentType.dbType,n=e.length;if(r==="BIGINT"&&/^\d+$/.test(e)&&n<15)return this.firstTime=!1,new yi("BIGINT");let i=this.decimalDelimInCsv==="."?"\\.":this.decimalDelimInCsv,s=(e.match(new RegExp(`${i}`,"g"))||[]).length;if(["BIGINT","NUMERIC"].includes(r)&&s<=1){let a=e.replace(this.decimalDelimInCsv,"");if(/^\d+$/.test(a)&&n<15&&(!a.startsWith("0")||s>0||a==="0"))return this.firstTime=!1,new yi("NUMERIC",16,6)}if((r==="DATE"||this.firstTime)&&(e.match(/-/g)||[]).length===2&&n>=8&&n<=10){let a=e.split("-");if(a.length===3&&a.every(l=>/^\d+$/.test(l)))try{let l=new Date(parseInt(a[0]),parseInt(a[1])-1,parseInt(a[2]));if(!isNaN(l.getTime()))return this.firstTime=!1,new yi("DATE")}catch{}}if((r==="DATETIME"||this.firstTime)&&(e.match(/-/g)||[]).length===2&&n>=12&&n<=20){let a=e.match(/^(\d{4})-(\d{1,2})-(\d{1,2})[\s|T](\d{2}):(\d{2})(:?(\d{2}))?$/);if(a)try{let l=a[7]?parseInt(a[7]):0,c=new Date(parseInt(a[1]),parseInt(a[2])-1,parseInt(a[3]),parseInt(a[4]),parseInt(a[5]),l);if(!isNaN(c.getTime()))return this.firstTime=!1,new yi("DATETIME")}catch{}}if((r==="DATETIME"||this.firstTime)&&(e.match(/\./g)||[]).length>=2){let a=e.match(/^(\d{1,2})\.(\d{1,2})\.(\d{4})(?:\s+(\d{1,2}):(\d{1,2})(?::(\d{1,2}))?)?$/);if(a)try{let l=parseInt(a[1]),c=parseInt(a[2])-1,u=parseInt(a[3]),d=a[4]?parseInt(a[4]):0,E=a[5]?parseInt(a[5]):0,f=a[6]?parseInt(a[6]):0;if(c>=0&&c<=11&&l>=1&&l<=31){let p=new Date(u,c,l,d,E,f);if(!isNaN(p.getTime())&&p.getFullYear()===u&&p.getMonth()===c&&p.getDate()===l)return this.firstTime=!1,new yi("DATETIME")}}catch{}}let o=Math.max(n+5,20);return this.currentType.length!==void 0&&o<this.currentType.length&&(o=this.currentType.length),this.firstTime=!1,new yi("NVARCHAR",void 0,void 0,o)}refreshCurrentType(e){return this.currentType=this.getType(e),this.currentType}},cb=class extends F6.Readable{constructor(r,n,i){super();this.currentIndex=0;this.byteLength=0;this.lastReportedIndex=-1;this.lastReportTime=0;this.lastReportedMessage="";this.importer=r,this.rows=n,this.progressCallback=i,this.currentIndex=0,this.lastReportedIndex=-1,this.lastReportTime=0,this.lastReportedMessage="";try{this.byteLength=n.reduce((s,o)=>{let a=o.reduce((l,c)=>l+(c?c.length:0),0);return s+a+o.length},0)}catch{this.byteLength=1024*1024}}_read(r){try{let n=!0;for(;n&&this.currentIndex<this.rows.length;){let a=this.rows[this.currentIndex].map((l,c)=>this.importer.formatValue(l||"",c)).join(this.importer.getDelimiter())+this.importer.getRecordDelim();n=this.push(Buffer.from(a,"utf8")),this.currentIndex++}let i=this.rows.length;if(this.currentIndex>this.lastReportedIndex){let s=Date.now();if(this.currentIndex>=i||s-this.lastReportTime>=1e3){let c=`Importing: ${Math.floor(this.currentIndex/i*100)}% complete (${this.currentIndex.toLocaleString()} / ${i.toLocaleString()} rows)`,d=(this.currentIndex-(this.lastReportedIndex<0?0:this.lastReportedIndex))/i*100;c!==this.lastReportedMessage&&(this.progressCallback?.(c,d,!1),this.lastReportedIndex=this.currentIndex,this.lastReportTime=s,this.lastReportedMessage=c)}}this.currentIndex>=this.rows.length&&this.push(null)}catch(n){this.emit("error",n)}}},DS=class{constructor(e,r,n){this.delimiter="	";this.delimiterPlain="\\t";this.recordDelim=`
`;this.recordDelimPlain="\\n";this.escapechar="\\";this.csvDelimiter=",";this.excelData=[];this.isExcelFile=!1;this.sqlHeaders=[];this.dataTypes=[];this.rowsCount=0;this.valuesToEscape=[];this.filePath=e,this.targetTable=r,this.logDir=n||ma.join(ma.dirname(e),"netezza_logs");let i=ma.extname(e).toLowerCase();this.isExcelFile=[".xlsx",".xlsb"].includes(i),this.virtualFileName=`virtual_import_${Date.now()}_${Math.floor(Math.random()*1e3)}.txt`,this.valuesToEscape=[this.escapechar,this.recordDelim,"\r",this.delimiter],kn.existsSync(this.logDir)||kn.mkdirSync(this.logDir,{recursive:!0})}getDelimiter(){return this.delimiter}getRecordDelim(){return this.recordDelim}detectCsvDelimiter(){let r=kn.readFileSync(this.filePath,"utf-8").split(`
`)[0]||"";r.startsWith("\uFEFF")&&(r=r.slice(1));let n=[";","	","|",","],i={};for(let o of n)i[o]=(r.match(new RegExp(o==="|"?"\\|":o,"g"))||[]).length;let s=Math.max(...Object.values(i));s>0&&(this.csvDelimiter=Object.keys(i).find(o=>i[o]===s)||",")}cleanColumnName(e){let r=String(e).trim();return r=r.replace(/[^0-9a-zA-Z]+/g,"_").toUpperCase(),(!r||/^\d/.test(r)||r.startsWith("_"))&&(r="COL"+(r.startsWith("_")?"":"_")+r),r}parseCsvLine(e){let r=[],n="",i=!1;for(let s=0;s<e.length;s++){let o=e[s];o==='"'?i&&e[s+1]==='"'?(n+='"',s++):i=!i:o===this.csvDelimiter&&!i?(r.push(n),n=""):n+=o}return r.push(n),r}async readExcelFile(e){if(!lb)throw new Error("ReaderFactory module not available");e?.("Reading Excel file...");let r=lb.create(this.filePath);await r.open(this.filePath);let n=[],i=o=>{if(o==null)return"";if(o instanceof Date){let a=l=>l<10?"0"+l:l;return`${o.getFullYear()}-${a(o.getMonth()+1)}-${a(o.getDate())} ${a(o.getHours())}:${a(o.getMinutes())}:${a(o.getSeconds())}`}return String(o)},s=0;for(;await r.read();){let o=[],a=r._currentRow;if(a&&Array.isArray(a))for(let l=0;l<a.length;l++)o.push(i(a[l]));n.push(o),s++,s%1e4===0&&(e?.(`Processed ${s.toLocaleString()} rows...`,void 0,!1),await B6())}return typeof r.close=="function"&&await r.close(),e?.(`Excel file loaded: ${n.length} rows`),n}async analyzeDataTypes(e){e?.("Analyzing data types...");let r;if(this.isExcelFile)this.excelData=await this.readExcelFile(e),r=this.excelData;else{this.detectCsvDelimiter();let i=kn.readFileSync(this.filePath,"utf-8");i.startsWith("\uFEFF")&&(i=i.slice(1));let s=i.split(/\r?\n/);r=[];for(let o of s)o.trim()&&r.push(this.parseCsvLine(o))}if(!r||r.length===0)throw new Error("No data found in file");let n=[];this.sqlHeaders=r[0].map(i=>this.cleanColumnName(i||"COLUMN"));for(let i=0;i<r[0].length;i++)n.push(new Nc);for(let i=1;i<r.length;i++){let s=r[i];for(let o=0;o<s.length;o++)o<n.length&&s[o]&&s[o].trim()&&n[o].refreshCurrentType(s[o].trim());i%1e4===0&&(e?.(`Analyzed ${i.toLocaleString()} rows...`,void 0,!1),await B6())}return this.rowsCount=r.length-1,e?.(`Analysis complete: ${this.rowsCount.toLocaleString()} rows`),this.dataTypes=n,n}escapeValue(e){let r=String(e).trim();for(let n of this.valuesToEscape)r=r.split(n).join(`${this.escapechar}${n}`);return r}formatValue(e,r){let n=this.escapeValue(e);return r<this.dataTypes.length&&this.dataTypes[r].currentType.dbType==="DATETIME"&&(n=n.replace("T"," ")),n}generateCreateTableSql(){let e=[];for(let n=0;n<this.sqlHeaders.length;n++){let i=this.sqlHeaders[n],s=this.dataTypes[n];e.push(`        ${i} ${s.currentType.toString()}`)}let r=this.logDir.replace(/\\/g,"/");return`CREATE TABLE ${this.targetTable} AS 
(
    SELECT * FROM EXTERNAL '${this.virtualFileName}'
    (
${e.join(`,
`)}
    )
    USING
    (
        REMOTESOURCE 'jdbc'
        DELIMITER '${this.delimiterPlain}'
        RecordDelim '${this.recordDelimPlain}'
        ESCAPECHAR '${this.escapechar}'
        NULLVALUE ''
        ENCODING 'utf-8'
        TIMESTYLE '24HOUR'
        SKIPROWS 0
        MAXERRORS 10
        LOGDIR '${r}'
    )
) DISTRIBUTE ON RANDOM;`}async createDataStream(e){e?.("Preparing data stream...");try{let r;if(this.isExcelFile){if(!this.excelData||this.excelData.length===0)throw new Error("Excel data not loaded. Call analyzeDataTypes first.");r=this.excelData.slice(1)}else{let n=kn.readFileSync(this.filePath,"utf-8");n.startsWith("\uFEFF")&&(n=n.slice(1));let i=n.split(/\r?\n/);r=[];let s=!0;for(let o of i)if(o.trim()){if(s){s=!1;continue}r.push(this.parseCsvLine(o))}}return this.rowsCount=r.length,new cb(this,r,e)}catch(r){let n=r instanceof Error?r.message:String(r);throw e?.(`Error preparing stream: ${n}`),r}}getVirtualFileName(){return this.virtualFileName}getRowsCount(){return this.rowsCount}getSqlHeaders(){return this.sqlHeaders}getCsvDelimiter(){return this.csvDelimiter}}});var r3=G(()=>{"use strict"});async function ft(t,e){let n=await t.createCommand(e).executeReader(),i=[];for(;await n.read();){let s={};for(let o=0;o<n.fieldCount;o++)s[n.getName(o)]=n.getValue(o);i.push(s)}return i}function he(t){return!t||/^[A-Z_][A-Z0-9_]*$/i.test(t)&&t===t.toUpperCase()?t:`"${t.replace(/"/g,'""')}"`}function n3(t){if(!t)return t;let e=t.trim().toUpperCase();return e==="CHARACTER VARYING"?"CHARACTER VARYING(ANY)":e==="NATIONAL CHARACTER VARYING"?"NATIONAL CHARACTER VARYING(ANY)":e==="NATIONAL CHARACTER"?"NATIONAL CHARACTER(ANY)":e==="CHARACTER"?"CHARACTER(ANY)":t}async function i3(t){let e={host:t.host,port:t.port||5480,database:t.database,user:t.user,password:t.password},r=Ir(),n=new r(e);return await n.connect(),n}var wi=G(()=>{"use strict"});async function Vn(t,e,r,n){let i=`
        SELECT 
            X.OBJID::INT AS OBJID
            , X.ATTNAME
            , X.DESCRIPTION
            , X.FORMAT_TYPE AS FULL_TYPE
            , X.ATTNOTNULL::BOOL AS ATTNOTNULL
            , X.COLDEFAULT
        FROM
            ${e.toUpperCase()}.._V_RELATION_COLUMN X
        INNER JOIN
            ${e.toUpperCase()}.._V_OBJECT_DATA D ON X.OBJID = D.OBJID
        WHERE
            X.TYPE IN ('TABLE','VIEW','EXTERNAL TABLE', 'SEQUENCE','SYSTEM VIEW','SYSTEM TABLE')
            AND X.OBJID NOT IN (4,5)
            AND D.SCHEMA = '${r.toUpperCase()}'
            AND D.OBJNAME = '${n.toUpperCase()}'
        ORDER BY 
            X.OBJID, X.ATTNUM
    `,s=await ft(t,i),o=[];for(let a of s){let l=!1,c=a.ATTNOTNULL;if(typeof c=="boolean")l=c;else if(typeof c=="number")l=c!==0;else if(typeof c=="string"){let u=c.trim().toLowerCase();l=u==="t"||u==="true"||u==="1"||u==="yes"}o.push({name:a.ATTNAME,description:a.DESCRIPTION||null,fullTypeName:a.FULL_TYPE,notNull:l,defaultValue:a.COLDEFAULT||null})}return o}async function Es(t,e,r,n){try{let i=`
            SELECT ATTNAME
            FROM ${e.toUpperCase()}.._V_TABLE_DIST_MAP
            WHERE SCHEMA = '${r.toUpperCase()}'
                AND TABLENAME = '${n.toUpperCase()}'
            ORDER BY DISTSEQNO
        `;return(await ft(t,i)).map(o=>o.ATTNAME)}catch{return[]}}async function hs(t,e,r,n){try{let i=`
            SELECT ATTNAME
            FROM ${e.toUpperCase()}.._V_TABLE_ORGANIZE_COLUMN
            WHERE SCHEMA = '${r.toUpperCase()}'
                AND TABLENAME = '${n.toUpperCase()}'
            ORDER BY ORGSEQNO
        `;return(await ft(t,i)).map(o=>o.ATTNAME)}catch{return[]}}async function ps(t,e,r,n){let i=`
        SELECT 
            X.SCHEMA
            , X.RELATION
            , X.CONSTRAINTNAME
            , X.CONTYPE
            , X.ATTNAME
            , X.PKDATABASE
            , X.PKSCHEMA
            , X.PKRELATION
            , X.PKATTNAME
            , X.UPDT_TYPE
            , X.DEL_TYPE
        FROM 
            ${e.toUpperCase()}.._V_RELATION_KEYDATA X
        WHERE 
            X.OBJID NOT IN (4,5)
            AND X.SCHEMA = '${r.toUpperCase()}'
            AND X.RELATION = '${n.toUpperCase()}'
        ORDER BY
            X.SCHEMA, X.RELATION, X.CONSEQ
    `,s=new Map;try{let o=await ft(t,i);for(let a of o){let l=a.CONSTRAINTNAME;if(!s.has(l)){let u={p:"PRIMARY KEY",f:"FOREIGN KEY",u:"UNIQUE"};s.set(l,{type:u[a.CONTYPE]||"UNKNOWN",typeChar:a.CONTYPE,columns:[],pkDatabase:a.PKDATABASE||null,pkSchema:a.PKSCHEMA||null,pkRelation:a.PKRELATION||null,pkColumns:[],updateType:a.UPDT_TYPE||"NO ACTION",deleteType:a.DEL_TYPE||"NO ACTION"})}let c=s.get(l);c.columns.push(a.ATTNAME),a.PKATTNAME&&c.pkColumns.push(a.PKATTNAME)}}catch(o){console.warn("Cannot retrieve keys info:",o)}return s}async function ga(t,e,r,n){try{let i=`
            SELECT DESCRIPTION
            FROM ${e.toUpperCase()}.._V_OBJECT_DATA
            WHERE SCHEMA = '${r.toUpperCase()}'
                AND OBJNAME = '${n.toUpperCase()}'
                AND OBJTYPE = 'TABLE'
        `,s=await ft(t,i);if(s.length>0&&s[0].DESCRIPTION)return s[0].DESCRIPTION}catch{try{let i=`
                SELECT DESCRIPTION
                FROM ${e.toUpperCase()}.._V_OBJECT_DATA
                WHERE SCHEMA = '${r.toUpperCase()}'
                    AND OBJNAME = '${n.toUpperCase()}'
            `,s=await ft(t,i);if(s.length>0&&s[0].DESCRIPTION)return s[0].DESCRIPTION}catch{}}return null}async function nf(t,e,r,n){try{let i=`
            SELECT OWNER
            FROM ${e.toUpperCase()}.._V_TABLE
            WHERE SCHEMA = '${r.toUpperCase()}'
                AND TABLENAME = '${n.toUpperCase()}'
        `,s=await ft(t,i);if(s.length>0&&s[0].OWNER)return s[0].OWNER}catch{}return null}var FS=G(()=>{"use strict";wi()});async function sf(t,e,r,n){let i=await Vn(t,e,r,n);if(i.length===0)throw new Error(`Table ${e}.${r}.${n} not found or has no columns`);let s=await Es(t,e,r,n),o=await hs(t,e,r,n),a=await ps(t,e,r,n),l=await ga(t,e,r,n);return Oc(e,r,n,i,s,o,a,l)}function Oc(t,e,r,n,i,s,o,a){if(n.length===0)return`-- Table ${t}.${e}.${r} has no columns or was not found`;let l=he(t),c=he(e),u=he(r),d=[];d.push(`CREATE TABLE ${l}.${c}.${u}`),d.push("(");let E=[];for(let f of n){let h=`    ${he(f.name)} ${f.fullTypeName}`;f.notNull&&(h+=" NOT NULL"),f.defaultValue!==null&&(h+=` DEFAULT ${f.defaultValue}`),E.push(h)}if(d.push(E.join(`,
`)),i.length>0){let f=i.map(p=>he(p));d.push(`)
DISTRIBUTE ON (${f.join(", ")})`)}else d.push(`)
DISTRIBUTE ON RANDOM`);if(s.length>0){let f=s.map(p=>he(p));d.push(`ORGANIZE ON (${f.join(", ")})`)}d.push(";"),d.push("");for(let[f,p]of o){let h=he(f),S=p.columns.map(T=>he(T));if(p.typeChar==="f"){let T=p.pkColumns.filter(m=>m).map(m=>he(m));T.length>0&&d.push(`ALTER TABLE ${l}.${c}.${u} ADD CONSTRAINT ${h} ${p.type} (${S.join(", ")}) REFERENCES ${p.pkDatabase}.${p.pkSchema}.${p.pkRelation} (${T.join(", ")}) ON DELETE ${p.deleteType} ON UPDATE ${p.updateType};`)}else(p.typeChar==="p"||p.typeChar==="u")&&d.push(`ALTER TABLE ${l}.${c}.${u} ADD CONSTRAINT ${h} ${p.type} (${S.join(", ")});`)}if(a){let f=a.replace(/'/g,"''");d.push(""),d.push(`COMMENT ON TABLE ${l}.${c}.${u} IS '${f}';`)}for(let f of n)if(f.description){let p=he(f.name),h=f.description.replace(/'/g,"''");d.push(`COMMENT ON COLUMN ${l}.${c}.${u}.${p} IS '${h}';`)}return d.join(`
`)}var HS=G(()=>{"use strict";wi();FS()});async function _a(t,e,r,n){let i=`
        SELECT 
            SCHEMA,
            VIEWNAME,
            DEFINITION,
            OBJID::INT
        FROM ${e.toUpperCase()}.._V_VIEW
        WHERE DATABASE = '${e.toUpperCase()}'
            AND SCHEMA = '${r.toUpperCase()}'
            AND VIEWNAME = '${n.toUpperCase()}'
    `,o=await ft(t,i);if(o.length===0)throw new Error(`View ${e}.${r}.${n} not found`);let a=o[0],l=he(e),c=he(r),u=he(n),d=[];return d.push(`CREATE OR REPLACE VIEW ${l}.${c}.${u} AS`),d.push(a.DEFINITION||""),d.join(`
`)}var GS=G(()=>{"use strict";wi()});async function Ia(t,e,r,n){let i=`
        SELECT 
            SCHEMA,
            PROCEDURESOURCE,
            OBJID::INT,
            RETURNS,
            EXECUTEDASOWNER,
            DESCRIPTION,
            PROCEDURESIGNATURE,
            PROCEDURE,
            ARGUMENTS,
            NULL AS LANGUAGE
        FROM ${e.toUpperCase()}.._V_PROCEDURE
        WHERE DATABASE = '${e.toUpperCase()}'
            AND SCHEMA = '${r.toUpperCase()}'
            AND PROCEDURESIGNATURE = '${n.toUpperCase()}'
        ORDER BY 1, 2, 3
    `,o=await ft(t,i);if(o.length===0)throw new Error(`Procedure ${e}.${r}.${n} not found`);let a=o[0],l={schema:a.SCHEMA,procedureSource:a.PROCEDURESOURCE,objId:a.OBJID,returns:n3(a.RETURNS),executeAsOwner:!!a.EXECUTEDASOWNER,description:a.DESCRIPTION||null,procedureSignature:a.PROCEDURESIGNATURE,procedureName:a.PROCEDURE,arguments:a.ARGUMENTS||null},c=he(e),u=he(r),d=he(l.procedureName),E=[],f=`CREATE OR REPLACE PROCEDURE ${c}.${u}.${d}`;if(l.arguments){let p=l.arguments.trim();p.startsWith("(")&&p.endsWith(")")?f+=p:f+=`(${p})`}else f+="()";if(E.push(f),E.push(`RETURNS ${l.returns}`),l.executeAsOwner?E.push("EXECUTE AS OWNER"):E.push("EXECUTE AS CALLER"),E.push("LANGUAGE NZPLSQL AS"),E.push("BEGIN_PROC"),E.push(l.procedureSource),E.push("END_PROC;"),l.description){let p=l.description.replace(/'/g,"''");E.push(`COMMENT ON PROCEDURE ${d} IS '${p}';`)}return E.join(`
`)}var WS=G(()=>{"use strict";wi()});async function Na(t,e,r,n){let i=`
        SELECT 
            E1.SCHEMA,
            E1.TABLENAME,
            E2.EXTOBJNAME,
            E2.OBJID::INT,
            E1.DELIM,
            E1.ENCODING,
            E1.TIMESTYLE,
            E1.REMOTESOURCE,
            E1.SKIPROWS,
            E1.MAXERRORS,
            E1.ESCAPE,
            E1.LOGDIR,
            E1.DECIMALDELIM,
            E1.QUOTEDVALUE,
            E1.NULLVALUE,
            E1.CRINSTRING,
            E1.TRUNCSTRING,
            E1.CTRLCHARS,
            E1.IGNOREZERO,
            E1.TIMEEXTRAZEROS,
            E1.Y2BASE,
            E1.FILLRECORD,
            E1.COMPRESS,
            E1.INCLUDEHEADER,
            E1.LFINSTRING,
            E1.DATESTYLE,
            E1.DATEDELIM,
            E1.TIMEDELIM,
            E1.BOOLSTYLE,
            E1.FORMAT,
            E1.SOCKETBUFSIZE,
            E1.RECORDDELIM,
            E1.MAXROWS,
            E1.REQUIREQUOTES,
            E1.RECORDLENGTH,
            E1.DATETIMEDELIM,
            E1.REJECTFILE
        FROM 
            ${e.toUpperCase()}.._V_EXTERNAL E1
            JOIN ${e.toUpperCase()}.._V_EXTOBJECT E2 ON E1.DATABASE = E2.DATABASE
                AND E1.SCHEMA = E2.SCHEMA
                AND E1.TABLENAME = E2.TABLENAME
        WHERE 
            E1.DATABASE = '${e.toUpperCase()}'
            AND E1.SCHEMA = '${r.toUpperCase()}'
            AND E1.TABLENAME = '${n.toUpperCase()}'
    `,s=await ft(t,i);if(s.length===0)throw new Error(`External table ${e}.${r}.${n} not found`);let o=h=>{if(h==null)return null;if(typeof h=="boolean")return h;if(typeof h=="number")return h!==0;let S=String(h).toLowerCase();return S==="t"||S==="true"||S==="1"||S==="yes"||S==="on"},a=s[0],l={schema:a.SCHEMA,tableName:a.TABLENAME,dataObject:a.EXTOBJNAME||null,delimiter:a.DELIM||null,encoding:a.ENCODING||null,timeStyle:a.TIMESTYLE||null,remoteSource:a.REMOTESOURCE||null,skipRows:a.SKIPROWS||null,maxErrors:a.MAXERRORS||null,escapeChar:a.ESCAPE||null,logDir:a.LOGDIR||null,decimalDelim:a.DECIMALDELIM||null,quotedValue:a.QUOTEDVALUE||null,nullValue:a.NULLVALUE||null,crInString:o(a.CRINSTRING),truncString:o(a.TRUNCSTRING),ctrlChars:o(a.CTRLCHARS),ignoreZero:o(a.IGNOREZERO),timeExtraZeros:o(a.TIMEEXTRAZEROS),y2Base:a.Y2BASE||null,fillRecord:o(a.FILLRECORD),compress:o(a.COMPRESS),includeHeader:o(a.INCLUDEHEADER),lfInString:o(a.LFINSTRING),dateStyle:a.DATESTYLE||null,dateDelim:a.DATEDELIM||null,timeDelim:a.TIMEDELIM||null,boolStyle:a.BOOLSTYLE||null,format:a.FORMAT||null,socketBufSize:a.SOCKETBUFSIZE||null,recordDelim:a.RECORDDELIM?String(a.RECORDDELIM).replace(/\r/g,"\\r").replace(/\n/g,"\\n"):null,maxRows:a.MAXROWS||null,requireQuotes:o(a.REQUIREQUOTES),recordLength:a.RECORDLENGTH||null,dateTimeDelim:a.DATETIMEDELIM||null,rejectFile:a.REJECTFILE||null},c=await Vn(t,e,r,n),u=he(e),d=he(r),E=he(n),f=[];f.push(`CREATE EXTERNAL TABLE ${u}.${d}.${E}`),f.push("(");let p=c.map(h=>{let S=`    ${he(h.name)} ${h.fullTypeName}`;return h.notNull&&(S+=" NOT NULL"),S});return f.push(p.join(`,
`)),f.push(")"),f.push("USING"),f.push("("),l.dataObject!==null&&f.push(`    DATAOBJECT('${l.dataObject}')`),l.delimiter!==null&&f.push(`    DELIMITER '${l.delimiter}'`),l.encoding!==null&&f.push(`    ENCODING '${l.encoding}'`),l.timeStyle!==null&&f.push(`    TIMESTYLE '${l.timeStyle}'`),l.remoteSource!==null&&f.push(`    REMOTESOURCE '${l.remoteSource}'`),l.maxErrors!==null&&f.push(`    MAXERRORS ${l.maxErrors}`),l.escapeChar!==null&&f.push(`    ESCAPECHAR '${l.escapeChar}'`),l.decimalDelim!==null&&f.push(`    DECIMALDELIM '${l.decimalDelim}'`),l.logDir!==null&&f.push(`    LOGDIR '${l.logDir}'`),l.quotedValue!==null&&f.push(`    QUOTEDVALUE '${l.quotedValue}'`),l.nullValue!==null&&f.push(`    NULLVALUE '${l.nullValue}'`),l.crInString!==null&&f.push(`    CRINSTRING ${l.crInString}`),l.truncString!==null&&f.push(`    TRUNCSTRING ${l.truncString}`),l.ctrlChars!==null&&f.push(`    CTRLCHARS ${l.ctrlChars}`),l.ignoreZero!==null&&f.push(`    IGNOREZERO ${l.ignoreZero}`),l.timeExtraZeros!==null&&f.push(`    TIMEEXTRAZEROS ${l.timeExtraZeros}`),l.y2Base!==null&&f.push(`    Y2BASE ${l.y2Base}`),l.fillRecord!==null&&f.push(`    FILLRECORD ${l.fillRecord}`),l.compress!==null&&f.push(`    COMPRESS ${l.compress}`),l.includeHeader!==null&&f.push(`    INCLUDEHEADER ${l.includeHeader}`),l.lfInString!==null&&f.push(`    LFINSTRING ${l.lfInString}`),l.dateStyle!==null&&f.push(`    DATESTYLE '${l.dateStyle}'`),l.dateDelim!==null&&f.push(`    DATEDELIM '${l.dateDelim}'`),l.timeDelim!==null&&f.push(`    TIMEDELIM '${l.timeDelim}'`),l.boolStyle!==null&&f.push(`    BOOLSTYLE '${l.boolStyle}'`),l.format!==null&&f.push(`    FORMAT '${l.format}'`),l.socketBufSize!==null&&f.push(`    SOCKETBUFSIZE ${l.socketBufSize}`),l.recordDelim!==null&&f.push(`    RECORDDELIM '${l.recordDelim}'`),l.maxRows!==null&&f.push(`    MAXROWS ${l.maxRows}`),l.requireQuotes!==null&&f.push(`    REQUIREQUOTES ${l.requireQuotes}`),l.recordLength!==null&&f.push(`    RECORDLENGTH ${l.recordLength}`),l.dateTimeDelim!==null&&f.push(`    DATETIMEDELIM '${l.dateTimeDelim}'`),l.rejectFile!==null&&f.push(`    REJECTFILE '${l.rejectFile}'`),f.push(");"),f.join(`
`)}var $S=G(()=>{"use strict";wi();FS()});async function Oa(t,e,r,n){let i=`
        SELECT 
            SCHEMA,
            OWNER,
            SYNONYM_NAME,
            REFOBJNAME,
            DESCRIPTION
        FROM ${e.toUpperCase()}.._V_SYNONYM
        WHERE DATABASE = '${e.toUpperCase()}'
            AND SCHEMA = '${r.toUpperCase()}'
            AND SYNONYM_NAME = '${n.toUpperCase()}'
    `,o=await ft(t,i);if(o.length===0)throw new Error(`Synonym ${e}.${r}.${n} not found`);let a=o[0],l=he(e),c=he(a.OWNER||r),u=he(n),d=a.REFOBJNAME,E=[];if(E.push(`CREATE SYNONYM ${l}.${c}.${u} FOR ${d};`),a.DESCRIPTION){let f=a.DESCRIPTION.replace(/'/g,"''");E.push(`COMMENT ON SYNONYM ${u} IS '${f}';`)}return E.join(`
`)}var kS=G(()=>{"use strict";wi()});async function hb(t){let e=null,r=[],n=[],i=0,s=0,o=["TABLE","VIEW","PROCEDURE","EXTERNAL TABLE","SYNONYM"];try{let a={host:t.connectionDetails.host,port:t.connectionDetails.port||5480,database:t.connectionDetails.database,user:t.connectionDetails.user,password:t.connectionDetails.password},l=Ir();e=new l(a),await e.connect();let c=t.database.toUpperCase(),u=t.schema?t.schema.toUpperCase():null,d=t.objectTypes?t.objectTypes.map(A=>A.toUpperCase()).filter(A=>o.includes(A)):o;d.length===0&&(d=o),n.push("-- ============================================"),n.push("-- Batch DDL Export"),n.push(`-- Database: ${c}`),u&&n.push(`-- Schema: ${u}`),n.push(`-- Object Types: ${d.join(", ")}`),n.push(`-- Generated: ${new Date().toISOString()}`),n.push("-- ============================================"),n.push("");let E=new Map,f=new Map,p=new Map,h=new Map,S=new Map,T=d.includes("TABLE"),m=d.includes("VIEW"),R=d.includes("EXTERNAL TABLE");if(T||m||R){let A=u?`AND D.SCHEMA = '${u}'`:"",I=`
                SELECT 
                    D.SCHEMA,
                    D.OBJNAME,
                    D.OBJTYPE,
                    X.ATTNAME,
                    X.DESCRIPTION,
                    X.FORMAT_TYPE AS FULL_TYPE,
                    X.ATTNOTNULL::BOOL AS ATTNOTNULL,
                    X.COLDEFAULT
                FROM ${c}.._V_RELATION_COLUMN X
                INNER JOIN ${c}.._V_OBJECT_DATA D ON X.OBJID = D.OBJID
                WHERE D.DBNAME = '${c}'
                    AND D.OBJTYPE IN ('TABLE', 'VIEW', 'EXTERNAL TABLE')
                    ${A}
                ORDER BY D.SCHEMA, D.OBJNAME, X.ATTNUM
            `;try{let w=await ft(e,I);for(let g of w){let L=`${g.SCHEMA}.${g.OBJNAME}`;E.has(L)||E.set(L,[]);let y=!1,P=g.ATTNOTNULL;if(typeof P=="boolean")y=P;else if(typeof P=="number")y=P!==0;else if(typeof P=="string"){let v=P.trim().toLowerCase();y=v==="t"||v==="true"||v==="1"}E.get(L).push({name:g.ATTNAME,description:g.DESCRIPTION||null,fullTypeName:g.FULL_TYPE,notNull:y,defaultValue:g.COLDEFAULT||null})}}catch(w){let g=w instanceof Error?w.message:String(w);r.push(`Error bulk fetching columns: ${g}`)}}if(T){let A=u?`AND SCHEMA = '${u}'`:"",I=`
                SELECT SCHEMA, TABLENAME, ATTNAME
                FROM ${c}.._V_TABLE_DIST_MAP
                WHERE 1=1 ${A}
                ORDER BY SCHEMA, TABLENAME, DISTSEQNO
            `;try{let w=await ft(e,I);for(let g of w){let L=`${g.SCHEMA}.${g.TABLENAME}`;f.has(L)||f.set(L,[]),f.get(L).push(g.ATTNAME)}}catch{}}if(T){let A=u?`AND SCHEMA = '${u}'`:"",I=`
                SELECT SCHEMA, TABLENAME, ATTNAME
                FROM ${c}.._V_TABLE_ORGANIZE_COLUMN
                WHERE 1=1 ${A}
                ORDER BY SCHEMA, TABLENAME, ORGSEQNO
            `;try{let w=await ft(e,I);for(let g of w){let L=`${g.SCHEMA}.${g.TABLENAME}`;p.has(L)||p.set(L,[]),p.get(L).push(g.ATTNAME)}}catch{}}if(T){let A=u?`AND X.SCHEMA = '${u}'`:"",I=`
                SELECT 
                    X.SCHEMA, X.RELATION, X.CONSTRAINTNAME, X.CONTYPE,
                    X.ATTNAME, X.PKDATABASE, X.PKSCHEMA, X.PKRELATION, X.PKATTNAME,
                    X.UPDT_TYPE, X.DEL_TYPE
                FROM ${c}.._V_RELATION_KEYDATA X
                WHERE X.OBJID NOT IN (4,5) ${A}
                ORDER BY X.SCHEMA, X.RELATION, X.CONSTRAINTNAME, X.CONSEQ
            `;try{let w=await ft(e,I);for(let g of w){let L=`${g.SCHEMA}.${g.RELATION}`;h.has(L)||h.set(L,new Map);let y=h.get(L),P=g.CONSTRAINTNAME;if(!y.has(P)){let B={p:"PRIMARY KEY",f:"FOREIGN KEY",u:"UNIQUE"};y.set(P,{type:B[g.CONTYPE]||"UNKNOWN",typeChar:g.CONTYPE,columns:[],pkDatabase:g.PKDATABASE||null,pkSchema:g.PKSCHEMA||null,pkRelation:g.PKRELATION||null,pkColumns:[],updateType:g.UPDT_TYPE||"NO ACTION",deleteType:g.DEL_TYPE||"NO ACTION"})}let v=y.get(P);v.columns.push(g.ATTNAME),g.PKATTNAME&&v.pkColumns.push(g.PKATTNAME)}}catch{}}if(T){let A=u?`AND SCHEMA = '${u}'`:"",I=`
                SELECT SCHEMA, OBJNAME, DESCRIPTION
                FROM ${c}.._V_OBJECT_DATA
                WHERE DBNAME = '${c}' AND OBJTYPE = 'TABLE' AND DESCRIPTION IS NOT NULL ${A}
            `;try{let w=await ft(e,I);for(let g of w)g.DESCRIPTION&&S.set(`${g.SCHEMA}.${g.OBJNAME}`,g.DESCRIPTION)}catch{}}for(let A of d){let I=[];try{if(A==="PROCEDURE"){let w=`SELECT PROCEDURESIGNATURE AS OBJNAME, SCHEMA FROM ${c}.._V_PROCEDURE WHERE DATABASE = '${c}'`;u&&(w+=` AND SCHEMA = '${u}'`),w+=" ORDER BY SCHEMA, PROCEDURESIGNATURE",I=(await ft(e,w)).map(L=>({name:L.OBJNAME,schema:L.SCHEMA}))}else{let w=`SELECT OBJNAME, SCHEMA FROM ${c}.._V_OBJECT_DATA WHERE DBNAME = '${c}' AND OBJTYPE = '${A}'`;u&&(w+=` AND SCHEMA = '${u}'`),w+=" ORDER BY SCHEMA, OBJNAME",I=(await ft(e,w)).map(L=>({name:L.OBJNAME,schema:L.SCHEMA}))}}catch(w){let g=w instanceof Error?w.message:String(w);r.push(`Error querying ${A}s: ${g}`);continue}if(I.length!==0){n.push("-- ----------------------------------------"),n.push(`-- ${A}S (${I.length})`),n.push("-- ----------------------------------------"),n.push("");for(let w of I)try{let g,L=`${w.schema}.${w.name}`;switch(A){case"TABLE":g=Oc(c,w.schema,w.name,E.get(L)||[],f.get(L)||[],p.get(L)||[],h.get(L)||new Map,S.get(L)||null);break;case"VIEW":g=await _a(e,c,w.schema,w.name);break;case"PROCEDURE":g=await Ia(e,c,w.schema,w.name);break;case"EXTERNAL TABLE":g=await Na(e,c,w.schema,w.name);break;case"SYNONYM":g=await Oa(e,c,w.schema,w.name);break;default:s++;continue}n.push(`-- ${A}: ${c}.${w.schema}.${w.name}`),n.push(g),n.push(""),i++}catch(g){let L=g instanceof Error?g.message:String(g);r.push(`Error generating DDL for ${A} ${c}.${w.schema}.${w.name}: ${L}`),s++}}}return n.push("-- ============================================"),n.push("-- End of Batch DDL Export"),n.push(`-- Total objects: ${i}`),s>0&&n.push(`-- Skipped: ${s}`),r.length>0&&n.push(`-- Errors: ${r.length}`),n.push("-- ============================================"),{success:!0,ddlCode:n.join(`
`),objectCount:i,errors:r,skipped:s}}catch(a){return{success:!1,objectCount:0,errors:[`Batch DDL generation error: ${a instanceof Error?a.message:String(a)}`],skipped:0}}finally{if(e)try{await e.close()}catch{}}}var s3=G(()=>{"use strict";wi();HS();GS();WS();$S();kS()});async function pb(t,e,r,n,i){let s=null;try{s=await i3(t);let o=i.toUpperCase();return o==="TABLE"?{success:!0,ddlCode:await sf(s,e,r,n),objectInfo:{database:e,schema:r,objectName:n,objectType:i}}:o==="VIEW"?{success:!0,ddlCode:await _a(s,e,r,n),objectInfo:{database:e,schema:r,objectName:n,objectType:i}}:o==="PROCEDURE"?{success:!0,ddlCode:await Ia(s,e,r,n),objectInfo:{database:e,schema:r,objectName:n,objectType:i}}:o==="EXTERNAL TABLE"?{success:!0,ddlCode:await Na(s,e,r,n),objectInfo:{database:e,schema:r,objectName:n,objectType:i}}:o==="SYNONYM"?{success:!0,ddlCode:await Oa(s,e,r,n),objectInfo:{database:e,schema:r,objectName:n,objectType:i}}:{success:!0,ddlCode:`-- DDL generation for ${i} not yet implemented
-- Object: ${e}.${r}.${n}
-- Type: ${i}
--
-- This feature can be extended to support:
-- - FUNCTION: Query _V_FUNCTION system table
-- - AGGREGATE: Query _V_AGGREGATE system table
`,objectInfo:{database:e,schema:r,objectName:n,objectType:i},note:`${i} DDL generation not yet implemented`}}catch(o){return{success:!1,error:`DDL generation error: ${o instanceof Error?o.message:String(o)}`}}finally{if(s)try{await s.close()}catch{}}}var o3=G(()=>{"use strict";wi();HS();GS();WS();$S();kS()});var a3=G(()=>{"use strict";r3();wi();FS();HS();GS();WS();$S();kS();s3();o3()});var Tb={};Et(Tb,{buildTableDDLFromCache:()=>Oc,generateBatchDDL:()=>hb,generateDDL:()=>pb,generateExternalTableDDL:()=>Na,generateProcedureDDL:()=>Ia,generateSynonymDDL:()=>Oa,generateTableDDL:()=>sf,generateViewDDL:()=>_a,getColumns:()=>Vn,getDistributionInfo:()=>Es,getKeysInfo:()=>ps,getOrganizeInfo:()=>hs,getTableComment:()=>ga,getTableOwner:()=>nf,quoteNameIfNeeded:()=>he});var of=G(()=>{"use strict";a3()});var l3={};Et(l3,{generateRecreateTableScript:()=>Kbe});async function Kbe(t,e,r,n,i){let s=null;try{let o={host:t.host,port:t.port||5480,database:t.database,user:t.user,password:t.password},a=Ir();s=new a(o),await s.connect();let l=await Vn(s,e,r,n);if(l.length===0)return{success:!1,error:`Table ${e}.${r}.${n} not found or has no columns`};let c=await Es(s,e,r,n),u=await hs(s,e,r,n),d=await ps(s,e,r,n),E=await ga(s,e,r,n),f=await nf(s,e,r,n),p=he(e),h=he(r),S=he(n),T=new Date().toISOString().replace(/[-:T.]/g,"").substring(0,14),m=Math.random().toString(36).substring(2,7).toUpperCase(),R=i||`${n}_${T}_NEW`,A=he(R),I=`${n}_${T}_BACKUP_${m}`,w=he(I),g=[];g.push(`-- Recreate Table Script for ${p}.${h}.${S}`),g.push(`-- Generated at ${new Date().toISOString()}`),g.push(""),g.push("-- 1. Create new table with desired structure"),g.push(`CREATE TABLE ${p}.${h}.${A}`),g.push("(");let L=[];for(let P of l){let B=`    ${he(P.name)} ${P.fullTypeName}`;P.notNull&&(B+=" NOT NULL"),P.defaultValue!==null&&(B+=` DEFAULT ${P.defaultValue}`),L.push(B)}if(g.push(L.join(`,
`)),c.length>0){let P=c.map(v=>he(v));g.push(`)
DISTRIBUTE ON (${P.join(", ")})`)}else g.push(`)
DISTRIBUTE ON RANDOM`);if(u.length>0){let P=u.map(v=>he(v));g.push(`ORGANIZE ON (${P.join(", ")})`)}if(g.push(";"),g.push(""),g.push("-- 2. Copy data from original table"),g.push(`INSERT INTO ${p}.${h}.${A} SELECT * FROM ${p}.${h}.${S};`),g.push(""),g.push("-- 3. Copy privileges from original table"),g.push(`ALTER TABLE ${p}.${h}.${A} SET PRIVILEGES TO ${p}.${h}.${S};`),g.push(""),g.push("-- 4. Swap tables: Rename Original to Backup, New to Original"),g.push(`ALTER TABLE ${p}.${h}.${S} RENAME TO ${w};`),g.push(`ALTER TABLE ${p}.${h}.${A} RENAME TO ${S};`),g.push(""),f&&(g.push("-- 5. Restore Owner"),g.push(`ALTER TABLE ${p}.${h}.${S} OWNER TO ${f};`),g.push("")),g.push("-- 6. Drop Backup Table (Optional - Comment out if you want to keep it)"),g.push(`DROP TABLE ${p}.${h}.${w};`),g.push(""),d.size>0){g.push("-- 7. Restore Constraints");for(let[P,v]of d){let B=he(P),F=v.columns.map(K=>he(K)),V="";if(v.typeChar==="f"){let K=v.pkColumns.filter(Z=>Z).map(Z=>he(Z));K.length>0&&(V=`ALTER TABLE ${p}.${h}.${S} ADD CONSTRAINT ${B} ${v.type} (${F.join(", ")}) REFERENCES ${v.pkDatabase}.${v.pkSchema}.${v.pkRelation} (${K.join(", ")}) ON DELETE ${v.deleteType} ON UPDATE ${v.updateType};`)}else(v.typeChar==="p"||v.typeChar==="u")&&(V=`ALTER TABLE ${p}.${h}.${S} ADD CONSTRAINT ${B} ${v.type} (${F.join(", ")});`);V&&g.push(V)}g.push("")}if(E){let P=E.replace(/'/g,"''");g.push("-- 8. Restore Comments"),g.push(`COMMENT ON TABLE ${p}.${h}.${S} IS '${P}';`)}let y=[];for(let P of l)if(P.description){let v=he(P.name),B=P.description.replace(/'/g,"''");y.push(`COMMENT ON COLUMN ${p}.${h}.${S}.${v} IS '${B}';`)}return y.length>0&&(E||g.push("-- 8. Restore Comments"),g.push(y.join(`
`)),g.push("")),g.push("-- 9. Generate Statistics"),g.push(`GENERATE EXPRESS STATISTICS ON ${p}.${h}.${S};`),{success:!0,sqlScript:g.join(`
`)}}catch(o){return{success:!1,error:`Error generating recreate script: ${o instanceof Error?o.message:String(o)}`}}finally{if(s)try{await s.close()}catch{}}}var c3=G(()=>{"use strict";of()});var Sb={};Et(Sb,{compareProcedures:()=>rye,compareTableStructures:()=>eye});async function Jbe(t,e){let n=await t.createCommand(e).executeReader(),i=[];for(;await n.read();){let s={};for(let o=0;o<n.fieldCount;o++)s[n.getName(o)]=n.getValue(o);i.push(s)}return i}async function d3(t,e,r,n){let i=await Vn(t,e,r,n),s=await ps(t,e,r,n),o=await Es(t,e,r,n),a=await hs(t,e,r,n);return{database:e,schema:r,tableName:n,columns:i,keys:s,distribution:o,organization:a}}function Qbe(t,e){let r=[];return t.fullTypeName!==e.fullTypeName&&r.push(`Type: ${t.fullTypeName} \u2192 ${e.fullTypeName}`),t.notNull!==e.notNull&&r.push(`NOT NULL: ${t.notNull} \u2192 ${e.notNull}`),t.defaultValue!==e.defaultValue&&r.push(`Default: ${t.defaultValue||"NULL"} \u2192 ${e.defaultValue||"NULL"}`),r}function Zbe(t,e){let r=[];return t.type!==e.type&&r.push(`Type: ${t.type} \u2192 ${e.type}`),t.columns.join(",")!==e.columns.join(",")&&r.push(`Columns: (${t.columns.join(", ")}) \u2192 (${e.columns.join(", ")})`),t.typeChar==="f"&&e.typeChar==="f"&&t.pkRelation!==e.pkRelation&&r.push(`References: ${t.pkRelation} \u2192 ${e.pkRelation}`),r}async function eye(t,e,r,n,i,s,o){let a=null;try{let l={host:t.host,port:t.port||5480,database:t.database,user:t.user,password:t.password},c=Ir();a=new c(l),await a.connect();let u=await d3(a,e,r,n),d=await d3(a,i,s,o),E=[],f=new Map(u.columns.map(I=>[I.name.toUpperCase(),I])),p=new Map(d.columns.map(I=>[I.name.toUpperCase(),I]));for(let[I,w]of f){let g=p.get(I);if(!g)E.push({name:w.name,status:"removed",sourceColumn:w});else{let L=Qbe(w,g);E.push({name:w.name,status:L.length>0?"modified":"unchanged",sourceColumn:w,targetColumn:g,changes:L})}}for(let[I,w]of p)f.has(I)||E.push({name:w.name,status:"added",targetColumn:w});let h=[],S=u.keys,T=d.keys;for(let[I,w]of S){let g=T.get(I);if(!g)h.push({name:I,status:"removed",sourceKey:w});else{let L=Zbe(w,g);h.push({name:I,status:L.length>0?"modified":"unchanged",sourceKey:w,targetKey:g,changes:L})}}for(let[I,w]of T)S.has(I)||h.push({name:I,status:"added",targetKey:w});let m=JSON.stringify(u.distribution)===JSON.stringify(d.distribution),R=JSON.stringify(u.organization)===JSON.stringify(d.organization),A={columnsAdded:E.filter(I=>I.status==="added").length,columnsRemoved:E.filter(I=>I.status==="removed").length,columnsModified:E.filter(I=>I.status==="modified").length,columnsUnchanged:E.filter(I=>I.status==="unchanged").length,keysAdded:h.filter(I=>I.status==="added").length,keysRemoved:h.filter(I=>I.status==="removed").length,keysModified:h.filter(I=>I.status==="modified").length};return{source:{database:e,schema:r,name:n},target:{database:i,schema:s,name:o},columnDiffs:E,keyDiffs:h,distributionMatch:m,sourceDistribution:u.distribution,targetDistribution:d.distribution,organizationMatch:R,sourceOrganization:u.organization,targetOrganization:d.organization,summary:A}}finally{if(a)try{await a.close()}catch{}}}async function f3(t,e,r,n){let i=`
        SELECT 
            SCHEMA,
            PROCEDURESOURCE,
            RETURNS,
            EXECUTEDASOWNER,
            DESCRIPTION,
            PROCEDURESIGNATURE,
            PROCEDURE,
            ARGUMENTS
        FROM ${e.toUpperCase()}.._V_PROCEDURE
        WHERE DATABASE = '${e.toUpperCase()}'
            AND SCHEMA = '${r.toUpperCase()}'
            AND PROCEDURESIGNATURE = '${n.toUpperCase()}'
    `,s=await Jbe(t,i);if(s.length===0)throw new Error(`Procedure ${e}.${r}.${n} not found`);let o=s[0];return{database:e,schema:r,procedureName:o.PROCEDURE,procedureSignature:o.PROCEDURESIGNATURE,arguments:o.ARGUMENTS||null,returns:o.RETURNS,executeAsOwner:!!o.EXECUTEDASOWNER,source:o.PROCEDURESOURCE,description:o.DESCRIPTION||null}}function tye(t,e){let r=t.split(`
`).map(o=>o.trimEnd()),n=e.split(`
`).map(o=>o.trimEnd()),i=[],s=Math.max(r.length,n.length);for(let o=0;o<s;o++){let a=r[o]||"",l=n[o]||"";a===l?i.push(`  ${a}`):r[o]?n[o]?(i.push(`- ${a}`),i.push(`+ ${l}`)):i.push(`- ${a}`):i.push(`+ ${l}`)}return i}async function rye(t,e,r,n,i,s,o){let a=null;try{let l={host:t.host,port:t.port||5480,database:t.database,user:t.user,password:t.password},c=Ir();a=new c(l),await a.connect();let u=await f3(a,e,r,n),d=await f3(a,i,s,o),E=u.arguments===d.arguments,f=u.returns===d.returns,p=u.executeAsOwner===d.executeAsOwner,h=u.source.trim()===d.source.trim(),S=h?[]:tye(u.source,d.source);return{source:{database:e,schema:r,name:n},target:{database:i,schema:s,name:o},argumentsMatch:E,sourceArguments:u.arguments,targetArguments:d.arguments,returnsMatch:f,sourceReturns:u.returns,targetReturns:d.returns,executeAsOwnerMatch:p,sourceExecuteAsOwner:u.executeAsOwner,targetExecuteAsOwner:d.executeAsOwner,sourceMatch:h,sourceCode:u.source,targetCode:d.source,sourceDiff:S}}finally{if(a)try{await a.close()}catch{}}}var Rb=G(()=>{"use strict";of()});var mb={};Et(mb,{SchemaCompareView:()=>Ab});var io,Ab,gb=G(()=>{"use strict";io=q(require("vscode")),Ab=class t{constructor(e,r,n,i){this._disposables=[];this._panel=e,this._update(n,i),this._panel.onDidDispose(()=>this.dispose(),null,this._disposables)}static{this.viewType="netezza.schemaCompare"}static createOrShow(e,r,n){let i=io.window.activeTextEditor?io.window.activeTextEditor.viewColumn:void 0;if(t.currentPanel){t.currentPanel._panel.reveal(i),t.currentPanel._update(r,n);return}let s=io.window.createWebviewPanel(t.viewType,"Schema Comparison",i||io.ViewColumn.One,{enableScripts:!0,localResourceRoots:[io.Uri.joinPath(e,"media")]});t.currentPanel=new t(s,e,r,n)}dispose(){for(t.currentPanel=void 0,this._panel.dispose();this._disposables.length;){let e=this._disposables.pop();e&&e.dispose()}}_update(e,r){r==="table"?(this._panel.title=`Compare: ${e.source.name} \u2194 ${e.target.name}`,this._panel.webview.html=this._getTableComparisonHtml(e)):(this._panel.title=`Compare: ${e.source.name} \u2194 ${e.target.name}`,this._panel.webview.html=this._getProcedureComparisonHtml(e))}_getStatusIcon(e){switch(e){case"added":return"\u{1F7E2}";case"removed":return"\u{1F534}";case"modified":return"\u{1F7E1}";case"unchanged":return"\u26AA"}}_getStatusClass(e){return`status-${e}`}_getTableComparisonHtml(e){let r=`${e.source.database}.${e.source.schema}.${e.source.name}`,n=`${e.target.database}.${e.target.schema}.${e.target.name}`,i=e.columnDiffs.map(l=>{let c=l.sourceColumn,u=l.targetColumn,d=l.changes?.join("<br>")||"";return`
                <tr class="${this._getStatusClass(l.status)}">
                    <td>${this._getStatusIcon(l.status)}</td>
                    <td><strong>${l.name}</strong></td>
                    <td>${c?.fullTypeName||"-"}</td>
                    <td>${u?.fullTypeName||"-"}</td>
                    <td class="changes">${d}</td>
                </tr>
            `}).join(""),s=e.keyDiffs.map(l=>{let c=l.sourceKey,u=l.targetKey,d=l.changes?.join("<br>")||"";return`
                <tr class="${this._getStatusClass(l.status)}">
                    <td>${this._getStatusIcon(l.status)}</td>
                    <td><strong>${l.name}</strong></td>
                    <td>${c?.type||"-"} (${c?.columns.join(", ")||"-"})</td>
                    <td>${u?.type||"-"} (${u?.columns.join(", ")||"-"})</td>
                    <td class="changes">${d}</td>
                </tr>
            `}).join(""),o=e.distributionMatch?"\u2705 Match":"\u274C Different",a=e.organizationMatch?"\u2705 Match":"\u274C Different";return`
            <!DOCTYPE html>
            <html lang="en">
            <head>
                <meta charset="UTF-8">
                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                <title>Schema Comparison</title>
                <style>
                    ${this._getStyles()}
                </style>
            </head>
            <body>
                <div class="container">
                    <h1>Table Structure Comparison</h1>
                    
                    <div class="header-info">
                        <div class="source-header">
                            <span class="label">Source:</span>
                            <span class="value">${r}</span>
                        </div>
                        <div class="arrow">\u2194</div>
                        <div class="target-header">
                            <span class="label">Target:</span>
                            <span class="value">${n}</span>
                        </div>
                    </div>

                    <div class="summary">
                        <h2>Summary</h2>
                        <div class="summary-grid">
                            <div class="summary-item added">\u{1F7E2} Added: ${e.summary.columnsAdded} columns, ${e.summary.keysAdded} keys</div>
                            <div class="summary-item removed">\u{1F534} Removed: ${e.summary.columnsRemoved} columns, ${e.summary.keysRemoved} keys</div>
                            <div class="summary-item modified">\u{1F7E1} Modified: ${e.summary.columnsModified} columns, ${e.summary.keysModified} keys</div>
                            <div class="summary-item unchanged">\u26AA Unchanged: ${e.summary.columnsUnchanged} columns</div>
                        </div>
                    </div>

                    <div class="section">
                        <h2>Columns</h2>
                        <table>
                            <thead>
                                <tr>
                                    <th width="40">Status</th>
                                    <th>Column Name</th>
                                    <th>Source Type</th>
                                    <th>Target Type</th>
                                    <th>Changes</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${i}
                            </tbody>
                        </table>
                    </div>

                    ${e.keyDiffs.length>0?`
                    <div class="section">
                        <h2>Keys & Constraints</h2>
                        <table>
                            <thead>
                                <tr>
                                    <th width="40">Status</th>
                                    <th>Key Name</th>
                                    <th>Source</th>
                                    <th>Target</th>
                                    <th>Changes</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${s}
                            </tbody>
                        </table>
                    </div>
                    `:""}

                    <div class="section">
                        <h2>Distribution & Organization</h2>
                        <table>
                            <thead>
                                <tr>
                                    <th>Property</th>
                                    <th>Source</th>
                                    <th>Target</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>DISTRIBUTE ON</strong></td>
                                    <td>${e.sourceDistribution.length>0?e.sourceDistribution.join(", "):"RANDOM"}</td>
                                    <td>${e.targetDistribution.length>0?e.targetDistribution.join(", "):"RANDOM"}</td>
                                    <td>${o}</td>
                                </tr>
                                <tr>
                                    <td><strong>ORGANIZE ON</strong></td>
                                    <td>${e.sourceOrganization.length>0?e.sourceOrganization.join(", "):"(none)"}</td>
                                    <td>${e.targetOrganization.length>0?e.targetOrganization.join(", "):"(none)"}</td>
                                    <td>${a}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </body>
            </html>
        `}_getProcedureComparisonHtml(e){let r=`${e.source.database}.${e.source.schema}.${e.source.name}`,n=`${e.target.database}.${e.target.schema}.${e.target.name}`,i=e.sourceDiff.map(s=>{let o="";return s.startsWith("+")?o="diff-added":s.startsWith("-")?o="diff-removed":o="diff-unchanged",`<div class="${o}">${this._escapeHtml(s)}</div>`}).join("");return`
            <!DOCTYPE html>
            <html lang="en">
            <head>
                <meta charset="UTF-8">
                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                <title>Procedure Comparison</title>
                <style>
                    ${this._getStyles()}
                </style>
            </head>
            <body>
                <div class="container">
                    <h1>Procedure Comparison</h1>
                    
                    <div class="header-info">
                        <div class="source-header">
                            <span class="label">Source:</span>
                            <span class="value">${r}</span>
                        </div>
                        <div class="arrow">\u2194</div>
                        <div class="target-header">
                            <span class="label">Target:</span>
                            <span class="value">${n}</span>
                        </div>
                    </div>

                    <div class="section">
                        <h2>Signature Comparison</h2>
                        <table>
                            <thead>
                                <tr>
                                    <th>Property</th>
                                    <th>Source</th>
                                    <th>Target</th>
                                    <th>Match</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="${e.argumentsMatch?"":"status-modified"}">
                                    <td><strong>Arguments</strong></td>
                                    <td><code>${e.sourceArguments||"(none)"}</code></td>
                                    <td><code>${e.targetArguments||"(none)"}</code></td>
                                    <td>${e.argumentsMatch?"\u2705":"\u274C"}</td>
                                </tr>
                                <tr class="${e.returnsMatch?"":"status-modified"}">
                                    <td><strong>Returns</strong></td>
                                    <td><code>${e.sourceReturns}</code></td>
                                    <td><code>${e.targetReturns}</code></td>
                                    <td>${e.returnsMatch?"\u2705":"\u274C"}</td>
                                </tr>
                                <tr class="${e.executeAsOwnerMatch?"":"status-modified"}">
                                    <td><strong>Execute As</strong></td>
                                    <td>${e.sourceExecuteAsOwner?"OWNER":"CALLER"}</td>
                                    <td>${e.targetExecuteAsOwner?"OWNER":"CALLER"}</td>
                                    <td>${e.executeAsOwnerMatch?"\u2705":"\u274C"}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="section">
                        <h2>Source Code ${e.sourceMatch?"\u2705 Identical":"\u274C Different"}</h2>
                        ${e.sourceMatch?`
                            <div class="code-block">
                                <pre>${this._escapeHtml(e.sourceCode)}</pre>
                            </div>
                        `:`
                            <div class="code-diff">
                                <pre>${i}</pre>
                            </div>
                        `}
                    </div>
                </div>
            </body>
            </html>
        `}_escapeHtml(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}_getStyles(){return`
            :root {
                --bg-color: var(--vscode-editor-background);
                --fg-color: var(--vscode-editor-foreground);
                --border-color: var(--vscode-widget-border);
                --header-bg: var(--vscode-sideBarSectionHeader-background);
                --added-bg: rgba(40, 167, 69, 0.2);
                --removed-bg: rgba(220, 53, 69, 0.2);
                --modified-bg: rgba(255, 193, 7, 0.2);
            }

            body {
                font-family: var(--vscode-font-family);
                font-size: var(--vscode-font-size);
                color: var(--fg-color);
                background-color: var(--bg-color);
                margin: 0;
                padding: 20px;
            }

            .container {
                max-width: 1400px;
                margin: 0 auto;
            }

            h1 {
                border-bottom: 1px solid var(--border-color);
                padding-bottom: 10px;
                margin-bottom: 20px;
            }

            h2 {
                font-size: 1.1em;
                margin-top: 25px;
                margin-bottom: 10px;
                color: var(--vscode-textLink-foreground);
            }

            .header-info {
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 20px;
                padding: 15px;
                background-color: var(--header-bg);
                border-radius: 6px;
                margin-bottom: 20px;
            }

            .header-info .label {
                font-weight: bold;
                margin-right: 8px;
            }

            .header-info .value {
                font-family: monospace;
                background-color: var(--vscode-textCodeBlock-background);
                padding: 4px 8px;
                border-radius: 4px;
            }

            .arrow {
                font-size: 1.5em;
                color: var(--vscode-charts-blue);
            }

            .summary {
                background-color: var(--header-bg);
                padding: 15px;
                border-radius: 6px;
                margin-bottom: 20px;
            }

            .summary h2 {
                margin-top: 0;
            }

            .summary-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 10px;
            }

            .summary-item {
                padding: 8px;
                border-radius: 4px;
            }

            .summary-item.added { background-color: var(--added-bg); }
            .summary-item.removed { background-color: var(--removed-bg); }
            .summary-item.modified { background-color: var(--modified-bg); }

            table {
                width: 100%;
                border-collapse: collapse;
                margin-bottom: 20px;
            }

            th, td {
                padding: 10px;
                text-align: left;
                border: 1px solid var(--border-color);
            }

            th {
                background-color: var(--header-bg);
                font-weight: 600;
            }

            tr.status-added {
                background-color: var(--added-bg);
            }

            tr.status-removed {
                background-color: var(--removed-bg);
            }

            tr.status-modified {
                background-color: var(--modified-bg);
            }

            .changes {
                font-size: 0.9em;
                color: var(--vscode-descriptionForeground);
            }

            .code-block, .code-diff {
                background-color: var(--vscode-textCodeBlock-background);
                border: 1px solid var(--border-color);
                border-radius: 6px;
                padding: 15px;
                overflow-x: auto;
            }

            .code-block pre, .code-diff pre {
                margin: 0;
                font-family: var(--vscode-editor-font-family);
                font-size: var(--vscode-editor-font-size);
                white-space: pre;
            }

            .diff-added {
                background-color: var(--added-bg);
                color: #28a745;
            }

            .diff-removed {
                background-color: var(--removed-bg);
                color: #dc3545;
            }

            .diff-unchanged {
                color: var(--fg-color);
            }

            code {
                font-family: var(--vscode-editor-font-family);
                background-color: var(--vscode-textCodeBlock-background);
                padding: 2px 6px;
                border-radius: 3px;
            }
        `}}});var T3={};Et(T3,{buildERDData:()=>nye,getForeignKeysForSchema:()=>h3,getTablesInSchema:()=>p3});async function h3(t,e,r,n,i){let s=`
        SELECT 
            X.SCHEMA,
            X.RELATION AS FROM_TABLE,
            X.CONSTRAINTNAME,
            X.ATTNAME AS FROM_COLUMN,
            X.PKDATABASE,
            X.PKSCHEMA,
            X.PKRELATION AS TO_TABLE,
            X.PKATTNAME AS TO_COLUMN,
            X.UPDT_TYPE,
            X.DEL_TYPE,
            X.CONSEQ
        FROM 
            ${n.toUpperCase()}.._V_RELATION_KEYDATA X
        WHERE 
            X.CONTYPE = 'f'
            AND X.SCHEMA = '${i.toUpperCase()}'
        ORDER BY
            X.CONSTRAINTNAME, X.CONSEQ
    `,o=new Map;try{let a=await ae(t,s,!0,e,r);if(!a||!a.data)return[];let l=pe(a);for(let c of l){let u=c.CONSTRAINTNAME,d=`${c.SCHEMA}.${c.FROM_TABLE}`,E=`${c.PKSCHEMA}.${c.TO_TABLE}`;o.has(u)||o.set(u,{constraintName:u,fromTable:d,toTable:E,fromColumns:[],toColumns:[],onDelete:c.DEL_TYPE||"NO ACTION",onUpdate:c.UPDT_TYPE||"NO ACTION"});let f=o.get(u);f.fromColumns.push(c.FROM_COLUMN),f.toColumns.push(c.TO_COLUMN)}}catch(a){console.warn("Cannot retrieve FK relationships:",a)}return Array.from(o.values())}async function p3(t,e,r,n,i,s){s?.report({message:"Fetching tables list..."});let o=`
        SELECT 
            T.TABLENAME,
            T.OWNER
        FROM 
            ${n.toUpperCase()}.._V_TABLE T
        WHERE 
            T.SCHEMA = '${i.toUpperCase()}'
        ORDER BY T.TABLENAME
    `,a=`
        SELECT 
            A.NAME AS TABLENAME,
            A.ATTNAME,
            A.FORMAT_TYPE
        FROM 
            ${n.toUpperCase()}.._V_RELATION_COLUMN A
        WHERE 
            A.SCHEMA = '${i.toUpperCase()}'
            AND A.TYPE = 'TABLE'
        ORDER BY A.NAME, A.ATTNUM
    `,l=`
        SELECT 
            X.RELATION,
            X.ATTNAME
        FROM 
            ${n.toUpperCase()}.._V_RELATION_KEYDATA X
        WHERE 
            X.CONTYPE = 'p'
            AND X.SCHEMA = '${i.toUpperCase()}'
        ORDER BY X.RELATION, X.CONSEQ
    `,c=new Map;try{let u=await ae(t,o,!0,e,r);if(u&&u.data){let f=pe(u);for(let p of f){let h=p.TABLENAME;c.set(h,{database:n,schema:i,tableName:h,fullName:`${i}.${h}`,columns:[],primaryKeyColumns:[]})}}s?.report({message:"Fetching columns..."});let d=await ae(t,a,!0,e,r);if(d&&d.data){let f=pe(d);for(let p of f){let h=c.get(p.TABLENAME);h&&h.columns.push({name:p.ATTNAME,dataType:p.FORMAT_TYPE,isPrimaryKey:!1,isForeignKey:!1})}}s?.report({message:"Fetching primary keys..."});let E=await ae(t,l,!0,e,r);if(E&&E.data){let f=pe(E);for(let p of f){let h=c.get(p.RELATION);if(h){h.primaryKeyColumns.push(p.ATTNAME);let S=h.columns.find(T=>T.name===p.ATTNAME);S&&(S.isPrimaryKey=!0)}}}}catch(u){console.warn("Cannot retrieve table information:",u)}return Array.from(c.values())}async function nye(t,e,r,n,i,s){let[o,a]=await Promise.all([p3(t,e,r,n,i,s),h3(t,e,r,n,i)]);for(let u of a){let d=u.fromTable.split(".")[1],E=o.find(f=>f.tableName===d);if(E)for(let f of u.fromColumns){let p=E.columns.find(h=>h.name===f);p&&(p.isForeignKey=!0)}}let l=new Set;for(let u of a)l.add(u.fromTable.split(".")[1]),l.add(u.toTable.split(".")[1]);let c=o.filter(u=>l.has(u.tableName)||o.length<=20);return{database:n,schema:i,tables:c,relationships:a}}var S3=G(()=>{"use strict";ur()});var R3={};Et(R3,{ERDView:()=>_b});var so,_b,A3=G(()=>{"use strict";so=q(require("vscode")),_b=class t{constructor(e,r,n){this._disposables=[];this._panel=e,this._update(n),this._panel.onDidDispose(()=>this.dispose(),null,this._disposables)}static{this.viewType="netezza.erdView"}static createOrShow(e,r){let n=so.window.activeTextEditor?so.window.activeTextEditor.viewColumn:void 0;if(t.currentPanel){t.currentPanel._panel.reveal(n),t.currentPanel._update(r);return}let i=so.window.createWebviewPanel(t.viewType,`ERD: ${r.database}.${r.schema}`,n||so.ViewColumn.One,{enableScripts:!0,localResourceRoots:[so.Uri.joinPath(e,"media")]});t.currentPanel=new t(i,e,r)}dispose(){for(t.currentPanel=void 0,this._panel.dispose();this._disposables.length;){let e=this._disposables.pop();e&&e.dispose()}}_update(e){this._panel.title=`ERD: ${e.database}.${e.schema}`,this._panel.webview.html=this._getHtml(e)}_getHtml(e){let r=this._generateTableBoxes(e.tables,e.relationships),n=e.relationships.length,i=e.tables.length;return`
            <!DOCTYPE html>
            <html lang="en">
            <head>
                <meta charset="UTF-8">
                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                <title>Entity Relationship Diagram</title>
                <style>
                    ${this._getStyles()}
                </style>
            </head>
            <body>
                <div class="header">
                    <h1>Entity Relationship Diagram</h1>
                    <div class="header-info">
                        <span class="badge">${e.database}.${e.schema}</span>
                        <span class="stat">${i} tables</span>
                        <span class="stat">${n} relationships</span>
                    </div>
                </div>

                <div class="legend">
                    <span class="legend-item"><span class="pk-indicator">\u{1F511}</span> Primary Key</span>
                    <span class="legend-item"><span class="fk-indicator">\u{1F517}</span> Foreign Key</span>
                </div>

                ${n===0?`
                    <div class="no-relationships">
                        <p>\u26A0\uFE0F No foreign key relationships found in this schema.</p>
                        <p>Tables are displayed but no relationship lines can be drawn.</p>
                    </div>
                `:""}

                <div class="erd-container" id="erdContainer">
                    <div class="erd-canvas" id="erdCanvas">
                        ${r}
                        <svg class="relationships-svg" id="relationshipsSvg"></svg>
                    </div>
                </div>

                <div class="relationships-table">
                    <h2>Foreign Key Relationships</h2>
                    ${n>0?`
                        <table>
                            <thead>
                                <tr>
                                    <th>Constraint Name</th>
                                    <th>From Table</th>
                                    <th>Column(s)</th>
                                    <th>\u2192</th>
                                    <th>To Table</th>
                                    <th>Column(s)</th>
                                    <th>On Delete</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${e.relationships.map(s=>`
                                    <tr>
                                        <td><code>${s.constraintName}</code></td>
                                        <td><strong>${s.fromTable}</strong></td>
                                        <td>${s.fromColumns.join(", ")}</td>
                                        <td>\u2192</td>
                                        <td><strong>${s.toTable}</strong></td>
                                        <td>${s.toColumns.join(", ")}</td>
                                        <td>${s.onDelete}</td>
                                    </tr>
                                `).join("")}
                            </tbody>
                        </table>
                    `:"<p>No foreign key relationships defined.</p>"}
                </div>

                <script>
                    ${this._getScript(e)}
                </script>
            </body>
            </html>
        `}_generateTableBoxes(e,r){let n=new Map,i=new Map,s=new Map;e.forEach(B=>{let F=B.tableName;n.set(F,new Set),i.set(F,0),s.set(F,0)}),r.forEach(B=>{let F=B.fromTable.includes(".")?B.fromTable.split(".").pop():B.fromTable,V=B.toTable.includes(".")?B.toTable.split(".").pop():B.toTable;n.has(F)&&(n.get(F).add(V),i.set(F,(i.get(F)||0)+1)),n.has(V)&&(n.get(V).add(F),s.set(V,(s.get(V)||0)+1))});let o=[],a=[],l=[];e.forEach(B=>{let F=i.get(B.tableName)||0;(n.get(B.tableName)?.size||0)===0?l.push(B):F>0?o.push(B):a.push(B)}),o.sort((B,F)=>{let V=i.get(B.tableName)||0;return(i.get(F.tableName)||0)-V});let c=new Map,u=new Set,d=260,E=240,f=50,p=40,h=d+f,S=E+p,T=(B,F)=>`${B},${F}`,m=(B,F)=>u.add(T(B,F)),R=(B,F)=>u.has(T(B,F)),A=(B,F=0)=>{let V=F;for(;R(B,V);)V++;return V},I=0,w=1,g=2,L=B=>20+B*h,y=B=>20+B*S;o.forEach(B=>{let F=A(w);m(w,F),c.set(B.tableName,{x:L(w),y:y(F)})});let P=new Map,v=[];return a.forEach(B=>{let F=n.get(B.tableName)||new Set,V=null;for(let K of F)if(o.some(Z=>Z.tableName===K)){V=K;break}V?(P.has(V)||P.set(V,[]),P.get(V).push(B)):v.push(B)}),P.forEach((B,F)=>{let V=c.get(F);if(!V)return;let K=Math.round((V.y-20)/S);B.forEach((Z,J)=>{let fe=J%2===0?I:g,de=K+Math.floor(J/2);for(;R(fe,de);)de++;m(fe,de),c.set(Z.tableName,{x:L(fe),y:y(de)})})}),v.forEach(B=>{let F=!1;for(let V of[I,g]){let K=A(V);F||(m(V,K),c.set(B.tableName,{x:L(V),y:y(K)}),F=!0)}}),l.length>0&&l.forEach((F,V)=>{let K=V;c.set(F.tableName,{x:L(3),y:y(K)})}),e.map(B=>{let F=c.get(B.tableName)||{x:20,y:20},V=B.columns.slice(0,10).map(Z=>{let J=[];Z.isPrimaryKey&&J.push("\u{1F511}"),Z.isForeignKey&&J.push("\u{1F517}");let fe=J.length>0?`<span class="col-icons">${J.join("")}</span>`:"";return`
                    <div class="table-column ${Z.isPrimaryKey?"pk":""} ${Z.isForeignKey?"fk":""}" data-col="${Z.name}">
                        ${fe}
                        <span class="col-name">${Z.name}</span>
                        <span class="col-type">${Z.dataType}</span>
                    </div>
                `}).join(""),K=B.columns.length>10?`<div class="more-columns">... and ${B.columns.length-10} more</div>`:"";return`
                <div class="table-box" id="table-${B.tableName}" 
                     data-table="${B.fullName}"
                     style="left: ${F.x}px; top: ${F.y}px;">
                    <div class="table-header">${B.tableName}</div>
                    <div class="table-columns">
                        ${V}
                        ${K}
                    </div>
                </div>
            `}).join("")}_getScript(e){return`
            (function() {
                const relationships = ${JSON.stringify(e.relationships)};
                const canvas = document.getElementById('erdCanvas');
                const svg = document.getElementById('relationshipsSvg');
                
                function getTableBox(el) {
                    const left = parseInt(el.style.left) || 0;
                    const top = parseInt(el.style.top) || 0;
                    const width = el.offsetWidth;
                    const height = el.offsetHeight;
                    return {
                        left: left,
                        top: top,
                        right: left + width,
                        bottom: top + height,
                        centerX: left + width / 2,
                        centerY: top + height / 2
                    };
                }

                function getColumnPosition(tableEl, columnName) {
                    // Try to find exact column
                    let colEl = tableEl.querySelector('.table-column[data-col="' + columnName + '"]');
                    
                    // If not found (hidden by "more columns"), try to estimate or return center
                    if (!colEl) return null;

                    // Calculate position relative to the table box
                    const tableRect = tableEl.getBoundingClientRect();
                    const colRect = colEl.getBoundingClientRect();
                    const canvasRect = canvas.getBoundingClientRect();

                    // Relative Y from canvas top
                    // We can't just subtract rects if the canvas is scrolled, but here we want SVG coords (absolute in canvas)
                    // The table.style.top is relative to canvas.
                    // The column offset within table is colRect.top - tableRect.top
                    // So Y = table.style.top + (colRect.top - tableRect.top) + colHeight/2
                    
                    const relativeTop = colRect.top - tableRect.top;
                    const centerY = relativeTop + colRect.height / 2;
                    
                    // We need to account for table scroll position if any?
                    // getBoundingClientRect takes visual position, so it accounts for scroll.
                    
                    const tableStyleTop = parseInt(tableEl.style.top) || 0;
                    
                    return tableStyleTop + centerY;
                }
                
                function drawRelationships() {
                    svg.innerHTML = '';
                    
                    // Update SVG size
                    let maxX = 1200, maxY = 600;
                    document.querySelectorAll('.table-box').forEach(el => {
                        const box = getTableBox(el);
                        maxX = Math.max(maxX, box.right + 50);
                        maxY = Math.max(maxY, box.bottom + 50);
                    });
                    
                    svg.setAttribute('width', maxX);
                    svg.setAttribute('height', maxY);
                    svg.style.width = maxX + 'px';
                    svg.style.height = maxY + 'px';
                    
                    // Defs
                    const defs = document.createElementNS('http://www.w3.org/2000/svg', 'defs');
                    const marker = document.createElementNS('http://www.w3.org/2000/svg', 'marker');
                    marker.setAttribute('id', 'arrowhead');
                    marker.setAttribute('markerWidth', '10');
                    marker.setAttribute('markerHeight', '7');
                    marker.setAttribute('refX', '10');
                    marker.setAttribute('refY', '3.5');
                    marker.setAttribute('orient', 'auto');
                    const polygon = document.createElementNS('http://www.w3.org/2000/svg', 'polygon');
                    polygon.setAttribute('points', '0 0, 10 3.5, 0 7');
                    polygon.setAttribute('fill', '#3794ff');
                    marker.appendChild(polygon);
                    defs.appendChild(marker);
                    svg.appendChild(defs);
                    
                    relationships.forEach((rel, index) => {
                        const childTableName = rel.fromTable.split('.')[1];
                        const parentTableName = rel.toTable.split('.')[1];
                        
                        const childEl = document.getElementById('table-' + childTableName);
                        const parentEl = document.getElementById('table-' + parentTableName);
                        
                        if (!childEl || !parentEl) return;
                        
                        const childBox = getTableBox(childEl);
                        const parentBox = getTableBox(parentEl);
                        
                        // Determine L/R relationship
                        // If Parent is to the right of Child: Child Right -> Parent Left
                        const parentIsRight = parentBox.centerX > childBox.centerX;
                        
                        let fromX, fromY, toX, toY;
                        let fromControlX, toControlX;
                        
                        // Default Y to center if col not found
                        fromY = childBox.centerY;
                        toY = parentBox.centerY;
                        
                        // Try get specific column Y
                        const colY1 = getColumnPosition(childEl, rel.fromColumns[0]);
                        const colY2 = getColumnPosition(parentEl, rel.toColumns[0]);
                        
                        if (colY1 !== null) fromY = colY1;
                        if (colY2 !== null) toY = colY2;
                        
                        if (parentIsRight) {
                            fromX = childBox.right;
                            toX = parentBox.left;
                            fromControlX = fromX + 50;
                            toControlX = toX - 50;
                        } else {
                            fromX = childBox.left;
                            toX = parentBox.right;
                            fromControlX = fromX - 50;
                            toControlX = toX + 50;
                        }
                        
                        // Calculate Bezier curve
                        // M start C c1 c2 end
                        const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                        
                        // Adjust constraints for multiple lines?
                        // Simple cubic bezier is best for side-to-side
                        const d = \`M \${fromX} \${fromY} C \${fromControlX} \${fromY}, \${toControlX} \${toY}, \${toX} \${toY}\`;
                        
                        path.setAttribute('d', d);
                        path.setAttribute('stroke', '#3794ff');
                        path.setAttribute('stroke-width', '2');
                        path.setAttribute('fill', 'none');
                        path.setAttribute('marker-end', 'url(#arrowhead)');
                        path.setAttribute('class', 'relationship-line');
                        
                        const title = document.createElementNS('http://www.w3.org/2000/svg', 'title');
                        title.textContent = rel.constraintName + ': ' + 
                            childTableName + '.' + rel.fromColumns.join(',') + ' -> ' + 
                            parentTableName + '.' + rel.toColumns.join(',');
                        path.appendChild(title);
                        
                        svg.appendChild(path);
                    });
                }
                
                // Dragging Logic
                let dragging = null;
                let dragStartX = 0, dragStartY = 0;
                let elemStartLeft = 0, elemStartTop = 0;
                
                document.querySelectorAll('.table-box').forEach(table => {
                    const header = table.querySelector('.table-header');
                    if (header) {
                        header.addEventListener('mousedown', function(e) {
                            e.preventDefault();
                            dragging = table;
                            dragStartX = e.pageX;
                            dragStartY = e.pageY;
                            elemStartLeft = parseInt(table.style.left) || 0;
                            elemStartTop = parseInt(table.style.top) || 0;
                            table.style.zIndex = '1000';
                            document.body.style.cursor = 'grabbing';
                        });
                    }
                });
                
                document.addEventListener('mousemove', function(e) {
                    if (!dragging) return;
                    const dx = e.pageX - dragStartX;
                    const dy = e.pageY - dragStartY;
                    dragging.style.left = Math.max(0, elemStartLeft + dx) + 'px';
                    dragging.style.top = Math.max(0, elemStartTop + dy) + 'px';
                    drawRelationships();
                });
                
                document.addEventListener('mouseup', function() {
                    if (dragging) {
                        dragging.style.zIndex = '';
                        document.body.style.cursor = '';
                        dragging = null;
                    }
                });
                
                requestAnimationFrame(() => setTimeout(drawRelationships, 50));
                window.addEventListener('resize', drawRelationships);
            })();
        `}_getStyles(){return`
            :root {
                --bg-color: var(--vscode-editor-background);
                --fg-color: var(--vscode-editor-foreground);
                --border-color: var(--vscode-widget-border);
                --header-bg: var(--vscode-sideBarSectionHeader-background);
                --table-bg: var(--vscode-editorWidget-background);
                --pk-color: #f1c40f;
                --fk-color: #3498db;
            }

            body {
                font-family: var(--vscode-font-family);
                font-size: var(--vscode-font-size);
                color: var(--fg-color);
                background-color: var(--bg-color);
                margin: 0;
                padding: 20px;
            }

            .header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 15px;
                padding-bottom: 10px;
                border-bottom: 1px solid var(--border-color);
            }

            .header h1 {
                margin: 0;
                font-size: 1.4em;
            }

            .header-info {
                display: flex;
                gap: 15px;
                align-items: center;
            }

            .badge {
                background-color: var(--vscode-badge-background);
                color: var(--vscode-badge-foreground);
                padding: 4px 10px;
                border-radius: 12px;
                font-size: 0.9em;
            }

            .stat {
                color: var(--vscode-descriptionForeground);
                font-size: 0.9em;
            }

            .legend {
                display: flex;
                gap: 20px;
                margin-bottom: 15px;
                font-size: 0.9em;
            }

            .legend-item {
                display: flex;
                align-items: center;
                gap: 5px;
            }

            .no-relationships {
                background-color: rgba(255, 193, 7, 0.2);
                padding: 15px;
                border-radius: 6px;
                margin-bottom: 15px;
            }

            .no-relationships p {
                margin: 5px 0;
            }

            .erd-container {
                background-color: var(--header-bg);
                border: 1px solid var(--border-color);
                border-radius: 6px;
                overflow: auto;
                margin-bottom: 20px;
                min-height: 400px;
            }

            .erd-canvas {
                position: relative;
                min-width: 1200px;
                min-height: 600px;
            }

            .relationships-svg {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                pointer-events: none;
            }

            .relationship-line {
                pointer-events: stroke;
            }

            .relationship-line:hover {
                stroke-width: 3;
            }

            .table-box {
                position: absolute;
                width: 250px;
                background-color: var(--table-bg);
                border: 2px solid var(--border-color);
                border-radius: 6px;
                overflow: hidden;
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
            }

            .table-header {
                background-color: var(--vscode-textLink-foreground);
                color: white;
                padding: 8px 12px;
                font-weight: bold;
                cursor: move;
                font-size: 0.95em;
            }

            .table-columns {
                max-height: 200px;
                overflow-y: auto;
            }

            .table-column {
                display: flex;
                align-items: center;
                padding: 4px 10px;
                border-bottom: 1px solid var(--border-color);
                font-size: 0.85em;
                gap: 6px;
            }

            .table-column:last-child {
                border-bottom: none;
            }

            .table-column.pk {
                background-color: rgba(241, 196, 15, 0.1);
            }

            .table-column.fk {
                background-color: rgba(52, 152, 219, 0.1);
            }

            .col-icons {
                font-size: 0.8em;
            }

            .col-name {
                flex: 1;
                font-weight: 500;
            }

            .col-type {
                color: var(--vscode-descriptionForeground);
                font-size: 0.85em;
            }

            .more-columns {
                padding: 6px 10px;
                color: var(--vscode-descriptionForeground);
                font-style: italic;
                font-size: 0.85em;
            }

            .relationships-table {
                margin-top: 20px;
            }

            .relationships-table h2 {
                font-size: 1.1em;
                margin-bottom: 10px;
            }

            table {
                width: 100%;
                border-collapse: collapse;
            }

            th, td {
                padding: 10px;
                text-align: left;
                border: 1px solid var(--border-color);
            }

            th {
                background-color: var(--header-bg);
                font-weight: 600;
            }

            code {
                font-family: var(--vscode-editor-font-family);
                background-color: var(--vscode-textCodeBlock-background);
                padding: 2px 6px;
                border-radius: 3px;
            }
        `}}});var m3={};Et(m3,{SessionMonitorView:()=>Ib});function iye(){let t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let r=0;r<32;r++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}var sn,Ib,g3=G(()=>{"use strict";sn=q(require("vscode"));ur();Ib=class t{constructor(e,r,n,i){this._disposables=[];this._panel=e,this._extensionUri=r,this._context=n,this._connectionManager=i,this._update(),this._panel.onDidDispose(()=>this.dispose(),null,this._disposables),this._panel.webview.onDidReceiveMessage(async s=>{switch(s.command){case"refresh":await this._fetchAndSendData();return;case"killSession":await this._killSession(s.sessionId);return;case"toggleAutoRefresh":this._toggleAutoRefresh(s.enabled);return}},null,this._disposables),this._fetchAndSendData()}static{this.viewType="netezza.sessionMonitor"}static createOrShow(e,r,n){let i=sn.window.activeTextEditor?sn.ViewColumn.Beside:void 0;if(t.currentPanel){t.currentPanel._panel.reveal(i),t.currentPanel._fetchAndSendData();return}let s=sn.window.createWebviewPanel(t.viewType,"Session Monitor",i||sn.ViewColumn.One,{enableScripts:!0,localResourceRoots:[sn.Uri.joinPath(e,"media")],retainContextWhenHidden:!0});t.currentPanel=new t(s,e,r,n)}dispose(){for(t.currentPanel=void 0,this._refreshInterval&&clearInterval(this._refreshInterval),this._panel.dispose();this._disposables.length;){let e=this._disposables.pop();e&&e.dispose()}}_toggleAutoRefresh(e){e?this._refreshInterval=setInterval(()=>{this._fetchAndSendData()},12e4):this._refreshInterval&&(clearInterval(this._refreshInterval),this._refreshInterval=void 0)}async _killSession(e){try{if(await sn.window.showWarningMessage(`Are you sure you want to terminate session ${e}?`,{modal:!0},"Yes, Kill Session")!=="Yes, Kill Session")return;let n=`DROP SESSION ${e}`;await ae(this._context,n,!0,this._connectionManager,void 0),sn.window.showInformationMessage(`Session ${e} terminated successfully.`),await this._fetchAndSendData()}catch(r){sn.window.showErrorMessage(`Failed to kill session: ${r instanceof Error?r.message:String(r)}`)}}async _fetchAndSendData(){this._panel.webview.postMessage({command:"setLoading",loading:!0});try{let[e,r,n,i]=await Promise.all([this._fetchSessions(),this._fetchQueries(),this._fetchStorage(),this._fetchResources()]);this._panel.webview.postMessage({command:"updateData",data:{sessions:e,queries:r,storage:n,resources:i}})}catch(e){this._panel.webview.postMessage({command:"error",text:`Failed to fetch data: ${e instanceof Error?e.message:String(e)}`})}finally{this._panel.webview.postMessage({command:"setLoading",loading:!1})}}async _fetchSessions(){let e=`
            SELECT ID, PID, USERNAME, DBNAME, TYPE, CONNTIME, STATUS, 
                   SUBSTR(COMMAND, 1, 200) AS COMMAND, PRIORITY, CID, IPADDR, CLIENT_OS_USERNAME
            FROM _V_SESSION
            ORDER BY CONNTIME DESC
        `;try{let r=await ae(this._context,e,!0,this._connectionManager,void 0);return!r||!r.data?[]:pe(r)}catch(r){return console.error("Error fetching sessions:",r),[]}}async _fetchQueries(){let e=`
            SELECT Q.QS_SESSIONID, Q.QS_PLANID, Q.QS_CLIENTID, Q.QS_CLIIPADDR,
                   SUBSTR(Q.QS_SQL, 1, 300) AS QS_SQL, 
                   Q.QS_STATE, Q.QS_TSUBMIT, Q.QS_TSTART, 
                   Q.QS_PRIORITY, Q.QS_PRITXT, Q.QS_ESTCOST, 
                   Q.QS_ESTDISK, Q.QS_ESTMEM, Q.QS_SNIPPETS, Q.QS_CURSNIPT,
                   Q.QS_RESROWS, Q.QS_RESBYTES,
                   S.USERNAME
            FROM _V_QRYSTAT Q
            LEFT JOIN _V_SESSION S ON Q.QS_SESSIONID = S.ID
            ORDER BY Q.QS_TSTART DESC
            LIMIT 100
        `;try{let r=await ae(this._context,e,!0,this._connectionManager,void 0);return!r||!r.data?[]:pe(r)}catch(r){return console.error("Error fetching queries:",r),[]}}async _fetchStorage(){let e=`
            SELECT O.DBNAME AS DATABASE, TS.SCHEMA, 
                   ROUND(SUM(TS.ALLOCATED_BYTES) / 1024.0 / 1024.0, 2) AS ALLOC_MB,
                   ROUND(SUM(TS.USED_BYTES) / 1024.0 / 1024.0, 2) AS USED_MB,
                   ROUND(SUM(TS.SKEW * TS.USED_BYTES) / NULLIF(SUM(TS.USED_BYTES), 0), 2) AS AVG_SKEW,
                   COUNT(*) AS TABLE_COUNT
            FROM _V_TABLE_STORAGE_STAT TS
            JOIN _V_OBJECT_DATA O ON TS.OBJID = O.OBJID
            GROUP BY O.DBNAME, TS.SCHEMA
            ORDER BY USED_MB DESC
        `;try{let r=await ae(this._context,e,!0,this._connectionManager,void 0);return!r||!r.data?[]:pe(r)}catch(r){return console.error("Error fetching storage:",r),[]}}async _fetchResources(){let e=[],r=[],n=null;try{let i=await ae(this._context,"SELECT * FROM _V_SCHED_GRA_EXT LIMIT 50",!0,this._connectionManager,void 0);i&&i.data&&(e=pe(i))}catch(i){console.warn("_V_SCHED_GRA_EXT not available:",i)}try{let i=await ae(this._context,"SELECT * FROM _V_SYSTEM_UTIL ORDER BY 1 DESC LIMIT 50",!0,this._connectionManager,void 0);i&&i.data&&(r=pe(i))}catch(i){console.warn("_V_SYSTEM_UTIL not available:",i)}try{let i=await ae(this._context,`SELECT 
                    ROUND(AVG(HOST_CPU) * 100, 1) AS AVG_HOST_CPU_PCT,
                    ROUND(AVG(SPU_CPU) * 100, 1) AS AVG_SPU_CPU_PCT,
                    ROUND(AVG(HOST_DISK) * 100, 1) AS AVG_DISK_PCT,
                    ROUND(AVG(HOST_MEMORY) * 100, 1) AS AVG_MEMORY_PCT,
                    ROUND(AVG(HOST_FABRIC) * 100, 1) AS AVG_FABRIC_PCT,
                    COUNT(*) AS SAMPLE_COUNT
                FROM _V_SYSTEM_UTIL`,!0,this._connectionManager,void 0);if(i&&i.data){let s=pe(i);n=s.length>0?s[0]:null}}catch(i){console.warn("_V_SYSTEM_UTIL summary not available:",i)}return{gra:e,systemUtil:r,sysUtilSummary:n}}_update(){let e=this._panel.webview;this._panel.title="Session Monitor",this._panel.webview.html=this._getHtmlForWebview(e)}_getHtmlForWebview(e){let r=e.asWebviewUri(sn.Uri.joinPath(this._extensionUri,"media","sessionMonitor.js")),n=e.asWebviewUri(sn.Uri.joinPath(this._extensionUri,"media","sessionMonitor.css")),i=iye();return`<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Security-Policy" content="default-src 'none'; style-src ${e.cspSource} 'unsafe-inline'; script-src 'nonce-${i}';">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="${n}" rel="stylesheet">
    <title>Session Monitor</title>
</head>
<body>
    <div class="container">
        <div class="header">
            <h2>\u{1F5A5}\uFE0F Session Monitor Dashboard</h2>
            <div class="header-actions">
                <label class="auto-refresh">
                    <input type="checkbox" id="autoRefresh"> Auto-refresh (2 min)
                </label>
                <button id="refreshBtn" class="btn btn-primary">\u{1F504} Refresh</button>
            </div>
        </div>

        <div class="loading-overlay" id="loadingOverlay">
            <div class="spinner"></div>
            <span>Loading data...</span>
        </div>

        <div class="tabs">
            <button class="tab-btn active" data-tab="sessions">\u{1F4CB} Sessions</button>
            <button class="tab-btn" data-tab="queries">\u23F1\uFE0F Running Queries</button>
            <button class="tab-btn" data-tab="storage">\u{1F4BE} Storage</button>
            <button class="tab-btn" data-tab="resources">\u{1F4CA} Resources</button>
        </div>

        <div class="tab-content" id="sessions">
            <div class="section-header">
                <h3>Active Sessions</h3>
                <div class="filter-controls">
                    <input type="text" id="sessionUserFilter" placeholder="Filter by User..." class="filter-input">
                </div>
                <span class="count" id="sessionCount">0 sessions</span>
            </div>
            <div class="table-container">
                <table id="sessionsTable">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>PID</th>
                            <th>User</th>
                            <th>Database</th>
                            <th>Type</th>
                            <th>Connected</th>
                            <th>Status</th>
                            <th>IP</th>
                            <th>Command</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>

        <div class="tab-content hidden" id="queries">
            <div class="section-header">
                <h3>Running Queries</h3>
                <div class="filter-controls">
                    <input type="text" id="queryUserFilter" placeholder="Filter by User..." class="filter-input">
                </div>
                <span class="count" id="queryCount">0 queries</span>
            </div>
            <div class="table-container">
                <table id="queriesTable">
                    <thead>
                        <tr>
                            <th>Session</th>
                            <th>User</th>
                            <th>Plan ID</th>
                            <th>State</th>
                            <th>Priority</th>
                            <th>Submitted</th>
                            <th>Started</th>
                            <th>Est. Cost</th>
                            <th>Rows</th>
                            <th>SQL</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>

        <div class="tab-content hidden" id="storage">
            <div class="section-header">
                <h3>Storage by Schema</h3>
                <span class="count" id="storageCount">0 schemas</span>
            </div>
            <div class="table-container">
                <table id="storageTable">
                    <thead>
                        <tr>
                            <th>Database</th>
                            <th>Schema</th>
                            <th>Allocated (MB)</th>
                            <th>Used (MB)</th>
                            <th>Usage %</th>
                            <th>Avg Skew</th>
                            <th>Tables</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>

        <div class="tab-content hidden" id="resources">
            <div class="section-header">
                <h3>Resource Utilization</h3>
            </div>
            <div class="resources-grid">
                <div class="resource-section">
                    <h4>GRA Scheduler</h4>
                    <div id="graTable" class="table-container small"></div>
                </div>
                <div class="resource-section">
                    <h4>System Utilization</h4>
                    <div id="sysUtilSummary"></div>
                    <div id="sysUtilTable" class="table-container small"></div>
                </div>
            </div>
        </div>
    </div>

    <script nonce="${i}" src="${r}"></script>
</body>
</html>`}}});var b3={};Et(b3,{XlsxWriter:()=>VS,default:()=>oye});var O3,C3,Nb,N3,sye,VS,oye,y3=G(()=>{"use strict";O3=q(require("fs")),C3=q(GC()),Nb=require("stream");WC();N3=(()=>{let t=[];for(let r=65;r<91;r++)t.push(String.fromCharCode(r));let e=[];for(let r of t)for(let n=65;n<91;n++)e.push(r+String.fromCharCode(n));return t.push(...e),t})(),sye=/[\\/*?[\]:]/g,VS=class{constructor(e){this.sheetCount=0;this.sheetList=[];this.sstArray=[];this.sstMap=new Map;this.sstCntAll=0;this.colWidths=[];this._autofilterIsOn=!1;this.filePath=e,this.output=O3.createWriteStream(e),this.archive=(0,C3.default)("zip"),this.archive.pipe(this.output),this._oaEpoch=Date.UTC(1899,11,30)}_getColumnLetter(e){return e<N3.length?N3[e]:"A"}_sanitizeSheetName(e){if(!e||typeof e!="string")return`Sheet${this.sheetCount+1}`;let r=e.replace(sye,"_");return r.length>31&&(r=r.substring(0,31)),r.trim().length===0&&(r=`Sheet${this.sheetCount+1}`),r}_escapeSheetNameForXml(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}_formatSheetNameForFormula(e){return/[\s\-+=()!@#$%^&]/.test(e)||/^[0-9]/.test(e)?`'${e.replace(/'/g,"''")}'`:e}addSheet(e,r=!1){let n=this._sanitizeSheetName(e);this.sheetCount++;let i=`rId${this.sheetCount}`,s=`sheet${this.sheetCount}.xml`;this.sheetList.push({name:n,pathInArchive:`xl/worksheets/${s}`,hidden:r,nameInArchive:s,sheetId:this.sheetCount,rId:i,filterHeaderRange:null})}_needsEscape(e){for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);if(n===38||n===60||n===62||n===34||n===39||n>=0&&n<=8||n===11||n===12||n>=14&&n<=31)return!0}return!1}_escape(e){return typeof e!="string"||!this._needsEscape(e)?e:e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/[\x00-\x08\x0b\x0c\x0e-\x1f]/g,"")}writeSheet(e,r=null,n=!0){let i=new ls,s=0;e.length>0?s=e[0].length:r&&(s=r.length),this.colWidths=new Array(s).fill(-1);let o=new Array(s);for(let u=0;u<s;u++)o[u]=this._getColumnLetter(u);if(r)for(let u=0;u<s;u++){let E=1.25*(r[u]?r[u].length:0)+2;E>80&&(E=80),this.colWidths[u]<E&&(this.colWidths[u]=E)}for(let u=0;u<Math.min(e.length,100);u++){let d=e[u];for(let E=0;E<d.length;E++){let f=d[E];if(f==null)continue;let h=1.25*(f instanceof Date?10:f.toString().length)+2;h>80&&(h=80),this.colWidths[E]<h&&(this.colWidths[E]=h)}}i.writeString('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>'),i.writeString('<worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships">');let a=e.length+(r?1:0);a>0&&s>0?i.writeString(`<dimension ref="A1:${o[s-1]}${a}"/>`):i.writeString('<dimension ref="A1"/>');let l=this.sheetCount===1;n&&r?l?i.writeString('<sheetViews><sheetView tabSelected="1" workbookViewId="0"><pane ySplit="1" topLeftCell="A2" activePane="bottomLeft" state="frozen" /><selection pane="bottomLeft" /></sheetView></sheetViews><sheetFormatPr defaultRowHeight="15"/>'):i.writeString('<sheetViews><sheetView workbookViewId="0"><pane ySplit="1" topLeftCell="A2" activePane="bottomLeft" state="frozen" /><selection pane="bottomLeft" /></sheetView></sheetViews><sheetFormatPr defaultRowHeight="15"/>'):l?i.writeString('<sheetViews><sheetView tabSelected="1" workbookViewId="0"/></sheetViews><sheetFormatPr defaultRowHeight="15"/>'):i.writeString('<sheetViews><sheetView workbookViewId="0"/></sheetViews><sheetFormatPr defaultRowHeight="15"/>'),i.writeString("<cols>");for(let u=0;u<s;u++){let d=this.colWidths[u]>0?this.colWidths[u]:10;i.writeString(`<col min="${u+1}" max="${u+1}" width="${d}" bestFit="1" customWidth="1" />`)}i.writeString("</cols><sheetData>");let c=0;if(r){c++,i.writeString(`<row r="${c}">`);for(let u=0;u<r.length;u++)this._writeStringCell(i,r[u],o[u],c);i.writeString("</row>")}for(let u=0;u<e.length;u++){c++,i.writeString(`<row r="${c}">`);let d=e[u];for(let E=0;E<d.length;E++){let f=d[E];if(f==null)continue;let p=o[E];if(typeof f=="number")Number.isFinite(f)?i.writeString(`<c r="${p}${c}"><v>${f}</v></c>`):this._writeStringCell(i,f.toString(),p,c);else if(typeof f=="bigint")this._writeStringCell(i,f.toString(),p,c);else if(typeof f=="boolean")i.writeString(`<c r="${p}${c}" t="b"><v>${f?1:0}</v></c>`);else if(f instanceof Date){let h=this._toOADate(f);Number.isFinite(h)?i.writeString(`<c r="${p}${c}" s="1"><v>${h}</v></c>`):this._writeStringCell(i,f.toString(),p,c)}else this._writeStringCell(i,f.toString(),p,c)}i.writeString("</row>")}if(i.writeString("</sheetData>"),n&&r&&s>0){this._autofilterIsOn=!0;let u=`A1:${o[s-1]}${a}`;i.writeString(`<autoFilter ref="${u}"/>`);let d=this.sheetList[this.sheetCount-1],E=this._formatSheetNameForFormula(d.name);d.filterHeaderRange=`${E}!$A$1:$${o[s-1]}$${a}`}i.writeString("</worksheet>"),this.archive.append(Nb.Readable.from(i.getChunks()),{name:this.sheetList[this.sheetCount-1].pathInArchive})}_writeStringCell(e,r,n,i){let s=this.sstMap.get(r);s===void 0&&(s=this.sstArray.length,this.sstArray.push(r),this.sstMap.set(r,s)),this.sstCntAll++,e.writeString(`<c r="${n}${i}" t="s"><v>${s}</v></c>`)}_toOADate(e){let r=e.getTimezoneOffset()*6e4;return(e.getTime()-r-this._oaEpoch)/864e5}finalize(){return new Promise((e,r)=>{try{this._writeSharedStrings(),this._writeStyles(),this._writeWorkbook(),this._writeContentTypes(),this._writeRels(),this.output.on("close",()=>{e()}),this.archive.on("error",n=>{r(n)}),this.archive.finalize()}catch(n){r(n)}})}_writeSharedStrings(){let e=new ls;e.writeString('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>'),e.writeString(`<sst xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" count="${this.sstCntAll}" uniqueCount="${this.sstArray.length}">`);for(let r=0;r<this.sstArray.length;r++){let n=this.sstArray[r],i=this._escape(n);i.length>0&&(i[0]===" "||i[i.length-1]===" "||/[\t\n\r]/.test(i))?e.writeString(`<si><t xml:space="preserve">${i}</t></si>`):e.writeString(`<si><t>${i}</t></si>`)}e.writeString("</sst>"),this.archive.append(Nb.Readable.from(e.getChunks()),{name:"xl/sharedStrings.xml"})}_writeStyles(){this.archive.append(`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main">
<numFmts count="1">
    <numFmt numFmtId="164" formatCode="yyyy\\-mm\\-dd\\ hh:mm:ss"/>
</numFmts>
<fonts count="1">
<font><sz val="11"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font>
</fonts>
<fills count="2">
<fill><patternFill patternType="none"/></fill>
<fill><patternFill patternType="gray125"/></fill>
</fills>
<borders count="1">
<border><left/><right/><top/><bottom/><diagonal/></border>
</borders>
<cellStyleXfs count="1">
<xf numFmtId="0" fontId="0" fillId="0" borderId="0"/>
</cellStyleXfs>
<cellXfs count="3">
<xf numFmtId="0" fontId="0" fillId="0" borderId="0" xfId="0"/>
<xf numFmtId="14" fontId="0" fillId="0" borderId="0" xfId="0" applyNumberFormat="1"/>
<xf numFmtId="164" fontId="0" fillId="0" borderId="0" xfId="0" applyNumberFormat="1"/>
</cellXfs>
<cellStyles count="1">
<cellStyle name="Normal" xfId="0" builtinId="0"/>
</cellStyles>
<dxfs count="0"/>
<tableStyles count="0" defaultTableStyle="TableStyleMedium2" defaultPivotStyle="PivotStyleLight16"/>
</styleSheet>`,{name:"xl/styles.xml"})}_writeWorkbook(){let e=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<workbook xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships">
<sheets>`;for(let r of this.sheetList){let n=r.hidden?' state="hidden"':"",i=this._escapeSheetNameForXml(r.name);e+=`<sheet name="${i}" sheetId="${r.sheetId}"${n} r:id="${r.rId}"/>`}if(e+="</sheets>",this._autofilterIsOn){e+="<definedNames>";for(let r of this.sheetList)if(r.filterHeaderRange){let n=r.sheetId-1,i=this._escape(r.filterHeaderRange);e+=`<definedName name="_xlnm._FilterDatabase" localSheetId="${n}" hidden="1">${i}</definedName>`}e+="</definedNames>"}e+="</workbook>",this.archive.append(e,{name:"xl/workbook.xml"})}_writeContentTypes(){let e=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types">
<Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml"/>
<Default Extension="xml" ContentType="application/xml"/>
<Override PartName="/xl/workbook.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"/>
<Override PartName="/xl/styles.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"/>
<Override PartName="/xl/sharedStrings.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml"/>`;for(let r of this.sheetList)e+=`<Override PartName="/${r.pathInArchive}" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"/>`;e+="</Types>",this.archive.append(e,{name:"[Content_Types].xml"})}_writeRels(){this.archive.append(`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">
<Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.xml"/>
</Relationships>`,{name:"_rels/.rels"});let r=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">`;for(let i of this.sheetList)r+=`<Relationship Id="${i.rId}" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="worksheets/${i.nameInArchive}"/>`;let n=this.sheetList.length+1;r+=`<Relationship Id="rId${n++}" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Target="styles.xml"/>`,r+=`<Relationship Id="rId${n++}" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings" Target="sharedStrings.xml"/>`,r+="</Relationships>",this.archive.append(r,{name:"xl/_rels/workbook.xml.rels"})}},oye=VS});var bb={};Et(bb,{copyFileToClipboard:()=>Cb,exportCsvToXlsx:()=>uye,exportStructuredToXlsx:()=>dye,getTempFilePath:()=>fye});function lye(t){return t?aye.has(t.toUpperCase()):!1}function D3(t){if(typeof t=="string"&&t.length>0){if(t.length>15||/^-?0\d+/.test(t))return t;if(/^-?\d+(\.\d+)?$/.test(t)){let e=parseFloat(t);if(Number.isFinite(e))return e}}return t}function cye(t){return t.map(D3)}async function uye(t,e,r=!1,n={source:"Unknown"},i){try{i&&i("Initializing XLSX writer...");let s=new L3(e),o=0,a=0,l=[],c=(f,p)=>{let h=f.split(/\r?\n/),S=A=>{let I=[],w=0,g=!1;for(let y=0;y<A.length;y++)if(A[y]==='"')g=!g;else if(A[y]===","&&!g){let P=A.substring(w,y);P.startsWith('"')&&P.endsWith('"')&&(P=P.substring(1,P.length-1).replace(/""/g,'"')),I.push(P),w=y+1}let L=A.substring(w);return L.startsWith('"')&&L.endsWith('"')&&(L=L.substring(1,L.length-1).replace(/""/g,'"')),I.push(L),I},T=0;for(;T<h.length&&!h[T].trim();)T++;if(T>=h.length)return;let m=S(h[T]);if(m.length===0)return;a=Math.max(a,m.length);let R=[];for(let A=T+1;A<h.length;A++){let I=h[A];if(!I.trim())continue;let w=S(I);R.push(cye(w))}s.addSheet(p),s.writeSheet(R,m,!0),o+=R.length};if(Array.isArray(t)?(i&&i(`Processing ${t.length} result sets...`),t.forEach((f,p)=>{let h=f.name||`Result ${p+1}`;i&&i(`Processing sheet "${h}"...`),c(f.csv,h),f.sql&&l.push({name:h,sql:f.sql})})):(i&&i("Reading CSV content..."),c(t,"Query Results"),n.sql&&l.push({name:"Query Results",sql:n.sql})),l.length>0){s.addSheet("SQL Code");let f=[];l.forEach(p=>{f.push([`--- SQL for ${p.name} ---`]),p.sql.split(`
`).forEach(h=>{f.push([h])}),f.push([""])}),s.writeSheet(f,null,!1)}i&&i("Finalizing XLSX file..."),await s.finalize();let d=Ob.statSync(e).size/(1024*1024);i&&(i("XLSX file created successfully"),i(`  - Rows: ${o.toLocaleString()}`),i(`  - File size: ${d.toFixed(1)} MB`));let E={success:!0,message:`Successfully exported ${o} rows to ${e}`,details:{rows_exported:o,columns:a,file_size_mb:parseFloat(d.toFixed(1)),file_path:e}};if(r){i&&i("Copying file to clipboard...");let f=await Cb(e);E.details&&(E.details.clipboard_success=f)}return E}catch(s){return{success:!1,message:`Export failed: ${s instanceof Error?s.message:String(s)}`}}}async function dye(t,e,r=!1,n){try{n&&n("Initializing XLSX writer...");let i=new L3(e),s=0,o=0,a=[];for(let d of t){let E=d.name||"Sheet";n&&n(`Processing sheet "${E}"...`);let f=d.columns.map(S=>S.name),p=d.columns.map(S=>lye(S.type));o=Math.max(o,f.length);let h=d.rows.map(S=>S.map((T,m)=>p[m]?D3(T):T));i.addSheet(E),i.writeSheet(h,f,!0),s+=h.length,d.sql&&a.push({name:E,sql:d.sql})}if(a.length>0){i.addSheet("SQL Code");let d=[];a.forEach(E=>{d.push([`--- SQL for ${E.name} ---`]),E.sql.split(`
`).forEach(f=>{d.push([f])}),d.push([""])}),i.writeSheet(d,null,!1)}n&&n("Finalizing XLSX file..."),await i.finalize();let c=Ob.statSync(e).size/(1024*1024);n&&(n("XLSX file created successfully"),n(`  - Rows: ${s.toLocaleString()}`),n(`  - File size: ${c.toFixed(1)} MB`));let u={success:!0,message:`Successfully exported ${s} rows to ${e}`,details:{rows_exported:s,columns:o,file_size_mb:parseFloat(c.toFixed(1)),file_path:e}};if(r){n&&n("Copying file to clipboard...");let d=await Cb(e);u.details&&(u.details.clipboard_success=d)}return u}catch(i){return{success:!1,message:`Export failed: ${i instanceof Error?i.message:String(i)}`}}}async function Cb(t){return qS.platform()!=="win32"?(console.error("Clipboard file copy is only supported on Windows"),!1):new Promise(e=>{try{let r=Cc.normalize(Cc.resolve(t)),n=`Set-Clipboard -Path "${r.replace(/"/g,'`"')}"`,i=(0,w3.spawn)("powershell.exe",["-NoProfile","-NonInteractive","-Command",n]),s="";i.stderr.on("data",o=>{s+=o.toString()}),i.on("close",o=>{o!==0?(console.error(`PowerShell clipboard copy failed: ${s}`),e(!1)):(console.log(`File copied to clipboard: ${r}`),e(!0))}),i.on("error",o=>{console.error(`Error spawning PowerShell: ${o.message}`),e(!1)})}catch(r){let n=r instanceof Error?r.message:String(r);console.error(`Error copying file to clipboard: ${n}`),e(!1)}})}function fye(){let t=qS.tmpdir(),r=`netezza_export_${Date.now()}.xlsx`;return Cc.join(t,r)}var Ob,Cc,qS,w3,L3,aye,yb=G(()=>{"use strict";Ob=q(require("fs")),Cc=q(require("path")),qS=q(require("os")),w3=require("child_process"),L3=(y3(),gs(b3)).default,aye=new Set(["INT8","INT2","INT4","NUMERIC","FLOAT4","FLOAT8","INTEGER","BIGINT","SMALLINT","DECIMAL","REAL","DOUBLE PRECISION"])});var B3={};Et(B3,{ClipboardDataProcessor:()=>XS,importClipboardDataToNetezza:()=>Tye});function Eye(t){let e=String(t).trim();return e=e.replace(/[^0-9a-zA-Z]+/g,"_").toUpperCase(),(!e||/^\d/.test(e)||e.startsWith("_"))&&(e="COL"+(e.startsWith("_")?"":"_")+e),e}function hye(t,e,r){let n=String(t).trim();for(let i of r)n=n.split(i).join(`${e}${i}`);return n}function pye(t,e,r,n,i){let s=hye(t,n,i);return e<r.length&&r[e].currentType.dbType==="DATETIME"&&(s=s.replace("T"," ")),s}async function Tye(t,e,r,n,i){let s=Date.now(),o=null,a=null;try{if(!t)return{success:!1,message:"Target table name is required"};if(!e||!e.host)return{success:!1,message:"Connection details are required"};i?.("Starting clipboard import process..."),i?.(`  Target table: ${t}`),i?.(`  Format preference: ${r||"auto-detect"}`);let l=new XS,[c,u]=await l.processClipboardData(r,i);if(!c||!c.length)return{success:!1,message:"No data found in clipboard"};if(c.length<2)return{success:!1,message:"Clipboard data must contain at least headers and one data row"};i?.(`  Detected format: ${u}`),i?.(`  Rows: ${c.length}`),i?.(`  Columns: ${c[0].length}`);let d=c[0].map(J=>Eye(J)),E=c.slice(1);i?.("Detecting decimal separator...");let f=".",p=0,h=0,S=E.slice(0,100);for(let J of S)for(let fe of J){if(!fe||!fe.trim())continue;let de=fe.trim();/^\d+\.\d+$/.test(de)&&p++,/^\d+,\d+$/.test(de)&&h++}h>p&&h>0&&(f=","),i?.(`Detected decimal separator: '${f}'`),i?.("Analyzing clipboard data types...");let T=d.map(()=>new Nc(f));for(let J=0;J<E.length;J++){let fe=E[J];for(let de=0;de<fe.length;de++)de<T.length&&fe[de]&&fe[de].trim()&&T[de].refreshCurrentType(fe[de].trim());(J+1)%1e3===0&&(i?.(`Analyzed ${(J+1).toLocaleString()} rows...`,void 0,!1),await U3())}i?.(`Analysis complete: ${E.length.toLocaleString()} data rows`);let m=x3.join(require("os").tmpdir(),"netezza_clipboard_logs");jS.existsSync(m)||jS.mkdirSync(m,{recursive:!0});let R="	",A="\\t",I=`
`,w="\\n",g="\\",L=[g,I,"\r",R];i?.("Preparing in-memory data stream...");let y=new Lb(E,T,R,I,g,L,f,i);o=`virtual_clipboard_import_${Date.now()}_${Math.floor(Math.random()*1e3)}.txt`,i?.(`Registered virtual stream: ${o}`);let P=Ir();P&&P.registerImportStream?P.registerImportStream(o,y):i?.("Warning: NzConnection driver does not support stream registry. Import might fail.");let v=[];for(let J=0;J<d.length;J++)v.push(`        ${d[J]} ${T[J].currentType.toString()}`);let B=m.replace(/\\/g,"/"),F=`CREATE TABLE ${t} AS 
(
    SELECT * FROM EXTERNAL '${o}'
    (
${v.join(`,
`)}
    )
    USING
    (
        REMOTESOURCE 'jdbc'
        DELIMITER '${A}'
        RecordDelim '${w}'
        ESCAPECHAR '${g}'
        NULLVALUE ''
        ENCODING 'utf-8'
        TIMESTYLE '24HOUR'
        SKIPROWS 0
        MAXERRORS 10
        LOGDIR '${B}'
    )
) DISTRIBUTE ON RANDOM;`;i?.("Generated SQL:"),i?.(F),i?.("Connecting to Netezza...");let V={host:e.host,port:e.port||5480,database:e.database,user:e.user,password:e.password},K=Ir();a=new K(V),await a.connect();try{i?.("Executing CREATE TABLE with EXTERNAL clipboard data...");let J=a.createCommand(F);J.commandTimeout=3600,await J.execute(),i?.("Clipboard import completed successfully")}finally{await a.close()}let Z=(Date.now()-s)/1e3;return{success:!0,message:"Clipboard import completed successfully",details:{targetTable:t,format:u,rowsProcessed:E.length,rowsInserted:E.length,processingTime:`${Z.toFixed(1)}s`,columns:d.length,detectedDelimiter:R}}}catch(l){let c=(Date.now()-s)/1e3;return{success:!1,message:`Clipboard import failed: ${l instanceof Error?l.message:String(l)}`,details:{processingTime:`${c.toFixed(1)}s`}}}finally{if(a&&a._connected)try{await a.close()}catch{}if(o){let l=Ir();l&&l.unregisterImportStream&&l.unregisterImportStream(o)}}}var jS,x3,v3,M3,U3,XS,Lb,F3=G(()=>{"use strict";jS=q(require("fs")),x3=q(require("path")),v3=q(require("vscode")),M3=require("stream");PS();U3=()=>new Promise(t=>setTimeout(t,0)),XS=class{async processXmlSpreadsheet(e,r){r?.("Processing XML Spreadsheet data...");let n=[],i=0,s=[],o=0,a=e.match(/ExpandedColumnCount="(\d+)"/);a&&(i=parseInt(a[1]),r?.(`Table has ${i} columns`));let l=e.match(/ExpandedRowCount="(\d+)"/);l&&r?.(`Table has ${l[1]} rows`);let c=/<Row[^>]*>([\s\S]*?)<\/Row>/gi,u;for(;(u=c.exec(e))!==null;){let d=u[1];s=new Array(i).fill("");let E,f=0,p=/<Cell(?:[^>]*ss:Index="(\d+)")?[^>]*>(?:[\s\S]*?<Data[^>]*(?:\s+ss:Type="([^"]*)")?[^>]*>([^<]*)<\/Data>)?[\s\S]*?<\/Cell>/gi;for(;(E=p.exec(d))!==null;){E[1]&&(f=parseInt(E[1])-1);let h=E[2]||"",S=E[3]||"";h==="Boolean"&&(S=S==="0"?"False":"True"),f<i&&(s[f]=S),f++}s.some(h=>h.trim())&&n.push([...s]),o++,o%1e4===0&&(r?.(`Analyzed ${o.toLocaleString()} rows...`,void 0,!1),await U3())}return r?.(`XML processing complete: ${n.length} rows, ${i} columns`),n}async processTextData(e,r){if(r?.("Processing text data..."),!e.trim())return[];let n=e.split(`
`);for(;n.length&&!n[n.length-1].trim();)n.pop();if(!n.length)return[];let i=["	",",",";","|"],s={};for(let c of i){let u=[];for(let d of n.slice(0,Math.min(5,n.length)))if(d.trim()){let E=d.split(c);u.push(E.length)}if(u.length){let d=u.reduce((f,p)=>f+p,0)/u.length,E=u.reduce((f,p)=>f+Math.pow(p-d,2),0)/u.length;s[c]=[d,-E]}}let o="	";Object.keys(s).length&&(o=Object.keys(s).reduce((c,u)=>{let[d,E]=s[c]||[0,0],[f,p]=s[u];return f>d||f===d&&p>E?u:c},"	")),r?.(`Auto-detected delimiter: '${o==="	"?"\\t":o}'`);let a=[],l=0;for(let c of n)if(c.trim()){let u=c.split(o).map(d=>d.trim());a.push(u),l=Math.max(l,u.length)}for(let c of a)for(;c.length<l;)c.push("");return r?.(`Text processing complete: ${a.length} rows, ${l} columns`),a}async getClipboardText(){return await v3.env.clipboard.readText()}async processClipboardData(e,r){r?.("Getting clipboard data...");let n=await this.getClipboardText();if(!n)throw new Error("No data found in clipboard");r?.(`Data size: ${n.length} characters`);let i="TEXT";e==="XML Spreadsheet"||!e&&n.includes("<Workbook")&&n.includes("<Worksheet")?i="XML Spreadsheet":e==="TEXT"&&(i="TEXT"),r?.(`Detected format: ${i}`);let s;return i==="XML Spreadsheet"?s=await this.processXmlSpreadsheet(n,r):s=await this.processTextData(n,r),r?.(`Processed ${s.length} rows`),s.length&&r?.(`Columns per row: ${s[0].length}`),[s,i]}};Lb=class extends M3.Readable{constructor(r,n,i,s,o,a,l,c){super();this.currentIndex=0;this.byteLength=0;this.lastReportedIndex=-1;this.lastReportTime=0;this.lastReportedMessage="";this.rows=r,this.dataTypes=n,this.delimiter=i,this.recordDelim=s,this.escapechar=o,this.valuesToEscape=a,this.decimalDelimiter=l,this.progressCallback=c,this.currentIndex=0,this.lastReportedIndex=-1,this.lastReportTime=0,this.lastReportedMessage="";try{this.byteLength=r.reduce((u,d)=>{let E=d.reduce((f,p)=>f+(p?p.length:0),0);return u+E+d.length},0)}catch{this.byteLength=1024*1024}}_read(r){try{let n=!0;for(;n&&this.currentIndex<this.rows.length;){let a=this.rows[this.currentIndex].map((l,c)=>{let u=pye(l,c,this.dataTypes,this.escapechar,this.valuesToEscape);if(this.dataTypes[c].currentType.dbType==="NUMERIC"&&this.decimalDelimiter===","&&(u=u.replace(",",".")),this.dataTypes[c].currentType.dbType==="DATETIME"){let d=u.match(/^(\d{1,2})\.(\d{1,2})\.(\d{4})(?:\s+(\d{1,2}):(\d{1,2})(?::(\d{1,2}))?)?$/);if(d){let E=d[1],f=d[2],p=d[3],h=d[4]||"00",S=d[5]||"00",T=d[6]||"00";u=`${p}-${f}-${E} ${h}:${S}:${T}`}}return u}).join(this.delimiter)+this.recordDelim;n=this.push(Buffer.from(a,"utf8")),this.currentIndex++}let i=this.rows.length;if(this.currentIndex>this.lastReportedIndex){let s=Date.now();if(this.currentIndex>=i||s-this.lastReportTime>=1e3){let c=`Streaming data: ${Math.floor(this.currentIndex/i*100)}% (${this.currentIndex.toLocaleString()}/${i.toLocaleString()})`,d=(this.currentIndex-(this.lastReportedIndex<0?0:this.lastReportedIndex))/i*100;c!==this.lastReportedMessage&&(this.progressCallback?.(c,d,!1),this.lastReportedIndex=this.currentIndex,this.lastReportTime=s,this.lastReportedMessage=c)}}this.currentIndex>=this.rows.length&&this.push(null)}catch(n){this.emit("error",n)}}}});var x,Sye,Rye,Aye,Pb,mye,gye,_ye,Iye,zS,Nye,xt=G(()=>{x=t=>t.flatMap(Sye),Sye=t=>zS(Aye(t)).map(Rye),Rye=t=>t.replace(/ +/g," ").trim(),Aye=t=>({type:"mandatory_block",items:Pb(t,0)[0]}),Pb=(t,e,r)=>{let n=[];for(;t[e];){let[i,s]=mye(t,e);if(n.push(i),e=s,t[e]==="|")e++;else if(t[e]==="}"||t[e]==="]"){if(r!==t[e])throw new Error(`Unbalanced parenthesis in: ${t}`);return e++,[n,e]}else if(e===t.length){if(r)throw new Error(`Unbalanced parenthesis in: ${t}`);return[n,e]}else throw new Error(`Unexpected "${t[e]}"`)}return[n,e]},mye=(t,e)=>{let r=[];for(;;){let[n,i]=gye(t,e);if(n)r.push(n),e=i;else break}return r.length===1?[r[0],e]:[{type:"concatenation",items:r},e]},gye=(t,e)=>{if(t[e]==="{")return _ye(t,e+1);if(t[e]==="[")return Iye(t,e+1);{let r="";for(;t[e]&&/[A-Za-z0-9_ ]/.test(t[e]);)r+=t[e],e++;return[r,e]}},_ye=(t,e)=>{let[r,n]=Pb(t,e,"}");return[{type:"mandatory_block",items:r},n]},Iye=(t,e)=>{let[r,n]=Pb(t,e,"]");return[{type:"optional_block",items:r},n]},zS=t=>{if(typeof t=="string")return[t];if(t.type==="concatenation")return t.items.map(zS).reduce(Nye,[""]);if(t.type==="mandatory_block")return t.items.flatMap(zS);if(t.type==="optional_block")return["",...t.items.flatMap(zS)];throw new Error(`Unknown node type: ${t}`)},Nye=(t,e)=>{let r=[];for(let n of t)for(let i of e)r.push(n+i);return r}});var k,xb,Li,bc,qn,KS,k3,Cn=G(()=>{(function(t){t.QUOTED_IDENTIFIER="QUOTED_IDENTIFIER",t.IDENTIFIER="IDENTIFIER",t.STRING="STRING",t.VARIABLE="VARIABLE",t.RESERVED_DATA_TYPE="RESERVED_DATA_TYPE",t.RESERVED_PARAMETERIZED_DATA_TYPE="RESERVED_PARAMETERIZED_DATA_TYPE",t.RESERVED_KEYWORD="RESERVED_KEYWORD",t.RESERVED_FUNCTION_NAME="RESERVED_FUNCTION_NAME",t.RESERVED_KEYWORD_PHRASE="RESERVED_KEYWORD_PHRASE",t.RESERVED_DATA_TYPE_PHRASE="RESERVED_DATA_TYPE_PHRASE",t.RESERVED_SET_OPERATION="RESERVED_SET_OPERATION",t.RESERVED_CLAUSE="RESERVED_CLAUSE",t.RESERVED_SELECT="RESERVED_SELECT",t.RESERVED_JOIN="RESERVED_JOIN",t.ARRAY_IDENTIFIER="ARRAY_IDENTIFIER",t.ARRAY_KEYWORD="ARRAY_KEYWORD",t.CASE="CASE",t.END="END",t.WHEN="WHEN",t.ELSE="ELSE",t.THEN="THEN",t.LIMIT="LIMIT",t.BETWEEN="BETWEEN",t.AND="AND",t.OR="OR",t.XOR="XOR",t.OPERATOR="OPERATOR",t.COMMA="COMMA",t.ASTERISK="ASTERISK",t.PROPERTY_ACCESS_OPERATOR="PROPERTY_ACCESS_OPERATOR",t.OPEN_PAREN="OPEN_PAREN",t.CLOSE_PAREN="CLOSE_PAREN",t.LINE_COMMENT="LINE_COMMENT",t.BLOCK_COMMENT="BLOCK_COMMENT",t.DISABLE_COMMENT="DISABLE_COMMENT",t.NUMBER="NUMBER",t.NAMED_PARAMETER="NAMED_PARAMETER",t.QUOTED_PARAMETER="QUOTED_PARAMETER",t.NUMBERED_PARAMETER="NUMBERED_PARAMETER",t.POSITIONAL_PARAMETER="POSITIONAL_PARAMETER",t.CUSTOM_PARAMETER="CUSTOM_PARAMETER",t.DELIMITER="DELIMITER",t.EOF="EOF"})(k=k||(k={}));xb=t=>({type:k.EOF,raw:"\xABEOF\xBB",text:"\xABEOF\xBB",start:t}),Li=xb(1/0),bc=t=>e=>e.type===t.type&&e.text===t.text,qn={ARRAY:bc({text:"ARRAY",type:k.RESERVED_DATA_TYPE}),BY:bc({text:"BY",type:k.RESERVED_KEYWORD}),SET:bc({text:"SET",type:k.RESERVED_CLAUSE}),STRUCT:bc({text:"STRUCT",type:k.RESERVED_DATA_TYPE}),WINDOW:bc({text:"WINDOW",type:k.RESERVED_CLAUSE}),VALUES:bc({text:"VALUES",type:k.RESERVED_CLAUSE})},KS=t=>t===k.RESERVED_DATA_TYPE||t===k.RESERVED_KEYWORD||t===k.RESERVED_FUNCTION_NAME||t===k.RESERVED_KEYWORD_PHRASE||t===k.RESERVED_DATA_TYPE_PHRASE||t===k.RESERVED_CLAUSE||t===k.RESERVED_SELECT||t===k.RESERVED_SET_OPERATION||t===k.RESERVED_JOIN||t===k.ARRAY_KEYWORD||t===k.CASE||t===k.END||t===k.WHEN||t===k.ELSE||t===k.THEN||t===k.LIMIT||t===k.BETWEEN||t===k.AND||t===k.OR||t===k.XOR,k3=t=>t===k.AND||t===k.OR||t===k.XOR});var Y3,V3=G(()=>{Y3=["KEYS.NEW_KEYSET","KEYS.ADD_KEY_FROM_RAW_BYTES","AEAD.DECRYPT_BYTES","AEAD.DECRYPT_STRING","AEAD.ENCRYPT","KEYS.KEYSET_CHAIN","KEYS.KEYSET_FROM_JSON","KEYS.KEYSET_TO_JSON","KEYS.ROTATE_KEYSET","KEYS.KEYSET_LENGTH","ANY_VALUE","ARRAY_AGG","AVG","CORR","COUNT","COUNTIF","COVAR_POP","COVAR_SAMP","MAX","MIN","ST_CLUSTERDBSCAN","STDDEV_POP","STDDEV_SAMP","STRING_AGG","SUM","VAR_POP","VAR_SAMP","ANY_VALUE","ARRAY_AGG","ARRAY_CONCAT_AGG","AVG","BIT_AND","BIT_OR","BIT_XOR","COUNT","COUNTIF","LOGICAL_AND","LOGICAL_OR","MAX","MIN","STRING_AGG","SUM","APPROX_COUNT_DISTINCT","APPROX_QUANTILES","APPROX_TOP_COUNT","APPROX_TOP_SUM","ARRAY_CONCAT","ARRAY_LENGTH","ARRAY_TO_STRING","GENERATE_ARRAY","GENERATE_DATE_ARRAY","GENERATE_TIMESTAMP_ARRAY","ARRAY_REVERSE","OFFSET","SAFE_OFFSET","ORDINAL","SAFE_ORDINAL","BIT_COUNT","PARSE_BIGNUMERIC","PARSE_NUMERIC","SAFE_CAST","CURRENT_DATE","EXTRACT","DATE","DATE_ADD","DATE_SUB","DATE_DIFF","DATE_TRUNC","DATE_FROM_UNIX_DATE","FORMAT_DATE","LAST_DAY","PARSE_DATE","UNIX_DATE","CURRENT_DATETIME","DATETIME","EXTRACT","DATETIME_ADD","DATETIME_SUB","DATETIME_DIFF","DATETIME_TRUNC","FORMAT_DATETIME","LAST_DAY","PARSE_DATETIME","ERROR","EXTERNAL_QUERY","S2_CELLIDFROMPOINT","S2_COVERINGCELLIDS","ST_ANGLE","ST_AREA","ST_ASBINARY","ST_ASGEOJSON","ST_ASTEXT","ST_AZIMUTH","ST_BOUNDARY","ST_BOUNDINGBOX","ST_BUFFER","ST_BUFFERWITHTOLERANCE","ST_CENTROID","ST_CENTROID_AGG","ST_CLOSESTPOINT","ST_CLUSTERDBSCAN","ST_CONTAINS","ST_CONVEXHULL","ST_COVEREDBY","ST_COVERS","ST_DIFFERENCE","ST_DIMENSION","ST_DISJOINT","ST_DISTANCE","ST_DUMP","ST_DWITHIN","ST_ENDPOINT","ST_EQUALS","ST_EXTENT","ST_EXTERIORRING","ST_GEOGFROM","ST_GEOGFROMGEOJSON","ST_GEOGFROMTEXT","ST_GEOGFROMWKB","ST_GEOGPOINT","ST_GEOGPOINTFROMGEOHASH","ST_GEOHASH","ST_GEOMETRYTYPE","ST_INTERIORRINGS","ST_INTERSECTION","ST_INTERSECTS","ST_INTERSECTSBOX","ST_ISCOLLECTION","ST_ISEMPTY","ST_LENGTH","ST_MAKELINE","ST_MAKEPOLYGON","ST_MAKEPOLYGONORIENTED","ST_MAXDISTANCE","ST_NPOINTS","ST_NUMGEOMETRIES","ST_NUMPOINTS","ST_PERIMETER","ST_POINTN","ST_SIMPLIFY","ST_SNAPTOGRID","ST_STARTPOINT","ST_TOUCHES","ST_UNION","ST_UNION_AGG","ST_WITHIN","ST_X","ST_Y","FARM_FINGERPRINT","MD5","SHA1","SHA256","SHA512","HLL_COUNT.INIT","HLL_COUNT.MERGE","HLL_COUNT.MERGE_PARTIAL","HLL_COUNT.EXTRACT","MAKE_INTERVAL","EXTRACT","JUSTIFY_DAYS","JUSTIFY_HOURS","JUSTIFY_INTERVAL","JSON_EXTRACT","JSON_QUERY","JSON_EXTRACT_SCALAR","JSON_VALUE","JSON_EXTRACT_ARRAY","JSON_QUERY_ARRAY","JSON_EXTRACT_STRING_ARRAY","JSON_VALUE_ARRAY","TO_JSON_STRING","ABS","SIGN","IS_INF","IS_NAN","IEEE_DIVIDE","RAND","SQRT","POW","POWER","EXP","LN","LOG","LOG10","GREATEST","LEAST","DIV","SAFE_DIVIDE","SAFE_MULTIPLY","SAFE_NEGATE","SAFE_ADD","SAFE_SUBTRACT","MOD","ROUND","TRUNC","CEIL","CEILING","FLOOR","COS","COSH","ACOS","ACOSH","SIN","SINH","ASIN","ASINH","TAN","TANH","ATAN","ATANH","ATAN2","RANGE_BUCKET","FIRST_VALUE","LAST_VALUE","NTH_VALUE","LEAD","LAG","PERCENTILE_CONT","PERCENTILE_DISC","NET.IP_FROM_STRING","NET.SAFE_IP_FROM_STRING","NET.IP_TO_STRING","NET.IP_NET_MASK","NET.IP_TRUNC","NET.IPV4_FROM_INT64","NET.IPV4_TO_INT64","NET.HOST","NET.PUBLIC_SUFFIX","NET.REG_DOMAIN","RANK","DENSE_RANK","PERCENT_RANK","CUME_DIST","NTILE","ROW_NUMBER","SESSION_USER","CORR","COVAR_POP","COVAR_SAMP","STDDEV_POP","STDDEV_SAMP","STDDEV","VAR_POP","VAR_SAMP","VARIANCE","ASCII","BYTE_LENGTH","CHAR_LENGTH","CHARACTER_LENGTH","CHR","CODE_POINTS_TO_BYTES","CODE_POINTS_TO_STRING","CONCAT","CONTAINS_SUBSTR","ENDS_WITH","FORMAT","FROM_BASE32","FROM_BASE64","FROM_HEX","INITCAP","INSTR","LEFT","LENGTH","LPAD","LOWER","LTRIM","NORMALIZE","NORMALIZE_AND_CASEFOLD","OCTET_LENGTH","REGEXP_CONTAINS","REGEXP_EXTRACT","REGEXP_EXTRACT_ALL","REGEXP_INSTR","REGEXP_REPLACE","REGEXP_SUBSTR","REPLACE","REPEAT","REVERSE","RIGHT","RPAD","RTRIM","SAFE_CONVERT_BYTES_TO_STRING","SOUNDEX","SPLIT","STARTS_WITH","STRPOS","SUBSTR","SUBSTRING","TO_BASE32","TO_BASE64","TO_CODE_POINTS","TO_HEX","TRANSLATE","TRIM","UNICODE","UPPER","CURRENT_TIME","TIME","EXTRACT","TIME_ADD","TIME_SUB","TIME_DIFF","TIME_TRUNC","FORMAT_TIME","PARSE_TIME","CURRENT_TIMESTAMP","EXTRACT","STRING","TIMESTAMP","TIMESTAMP_ADD","TIMESTAMP_SUB","TIMESTAMP_DIFF","TIMESTAMP_TRUNC","FORMAT_TIMESTAMP","PARSE_TIMESTAMP","TIMESTAMP_SECONDS","TIMESTAMP_MILLIS","TIMESTAMP_MICROS","UNIX_SECONDS","UNIX_MILLIS","UNIX_MICROS","GENERATE_UUID","COALESCE","IF","IFNULL","NULLIF","AVG","BIT_AND","BIT_OR","BIT_XOR","CORR","COUNT","COVAR_POP","COVAR_SAMP","EXACT_COUNT_DISTINCT","FIRST","GROUP_CONCAT","GROUP_CONCAT_UNQUOTED","LAST","MAX","MIN","NEST","NTH","QUANTILES","STDDEV","STDDEV_POP","STDDEV_SAMP","SUM","TOP","UNIQUE","VARIANCE","VAR_POP","VAR_SAMP","BIT_COUNT","BOOLEAN","BYTES","CAST","FLOAT","HEX_STRING","INTEGER","STRING","COALESCE","GREATEST","IFNULL","IS_INF","IS_NAN","IS_EXPLICITLY_DEFINED","LEAST","NVL","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","DATE","DATE_ADD","DATEDIFF","DAY","DAYOFWEEK","DAYOFYEAR","FORMAT_UTC_USEC","HOUR","MINUTE","MONTH","MSEC_TO_TIMESTAMP","NOW","PARSE_UTC_USEC","QUARTER","SEC_TO_TIMESTAMP","SECOND","STRFTIME_UTC_USEC","TIME","TIMESTAMP","TIMESTAMP_TO_MSEC","TIMESTAMP_TO_SEC","TIMESTAMP_TO_USEC","USEC_TO_TIMESTAMP","UTC_USEC_TO_DAY","UTC_USEC_TO_HOUR","UTC_USEC_TO_MONTH","UTC_USEC_TO_WEEK","UTC_USEC_TO_YEAR","WEEK","YEAR","FORMAT_IP","PARSE_IP","FORMAT_PACKED_IP","PARSE_PACKED_IP","JSON_EXTRACT","JSON_EXTRACT_SCALAR","ABS","ACOS","ACOSH","ASIN","ASINH","ATAN","ATANH","ATAN2","CEIL","COS","COSH","DEGREES","EXP","FLOOR","LN","LOG","LOG2","LOG10","PI","POW","RADIANS","RAND","ROUND","SIN","SINH","SQRT","TAN","TANH","REGEXP_MATCH","REGEXP_EXTRACT","REGEXP_REPLACE","CONCAT","INSTR","LEFT","LENGTH","LOWER","LPAD","LTRIM","REPLACE","RIGHT","RPAD","RTRIM","SPLIT","SUBSTR","UPPER","TABLE_DATE_RANGE","TABLE_DATE_RANGE_STRICT","TABLE_QUERY","HOST","DOMAIN","TLD","AVG","COUNT","MAX","MIN","STDDEV","SUM","CUME_DIST","DENSE_RANK","FIRST_VALUE","LAG","LAST_VALUE","LEAD","NTH_VALUE","NTILE","PERCENT_RANK","PERCENTILE_CONT","PERCENTILE_DISC","RANK","RATIO_TO_REPORT","ROW_NUMBER","CURRENT_USER","EVERY","FROM_BASE64","HASH","FARM_FINGERPRINT","IF","POSITION","SHA1","SOME","TO_BASE64","BQ.JOBS.CANCEL","BQ.REFRESH_MATERIALIZED_VIEW","OPTIONS","PIVOT","UNPIVOT"]});var q3,X3,j3=G(()=>{q3=["ALL","AND","ANY","AS","ASC","ASSERT_ROWS_MODIFIED","AT","BETWEEN","BY","CASE","CAST","COLLATE","CONTAINS","CREATE","CROSS","CUBE","CURRENT","DEFAULT","DEFINE","DESC","DISTINCT","ELSE","END","ENUM","ESCAPE","EXCEPT","EXCLUDE","EXISTS","EXTRACT","FALSE","FETCH","FOLLOWING","FOR","FROM","FULL","GROUP","GROUPING","GROUPS","HASH","HAVING","IF","IGNORE","IN","INNER","INTERSECT","INTO","IS","JOIN","LATERAL","LEFT","LIMIT","LOOKUP","MERGE","NATURAL","NEW","NO","NOT","NULL","NULLS","OF","ON","OR","ORDER","OUTER","OVER","PARTITION","PRECEDING","PROTO","RANGE","RECURSIVE","RESPECT","RIGHT","ROLLUP","ROWS","SELECT","SET","SOME","TABLE","TABLESAMPLE","THEN","TO","TREAT","TRUE","UNBOUNDED","UNION","UNNEST","USING","WHEN","WHERE","WINDOW","WITH","WITHIN","SAFE","LIKE","COPY","CLONE","IN","OUT","INOUT","RETURNS","LANGUAGE","CASCADE","RESTRICT","DETERMINISTIC"],X3=["ARRAY","BOOL","BYTES","DATE","DATETIME","GEOGRAPHY","INTERVAL","INT64","INT","SMALLINT","INTEGER","BIGINT","TINYINT","BYTEINT","NUMERIC","DECIMAL","BIGNUMERIC","BIGDECIMAL","FLOAT64","STRING","STRUCT","TIME","TIMEZONE"]});function Dye(t){return Pye(xye(t))}function Pye(t){let e=Li;return t.map(r=>r.text==="OFFSET"&&e.text==="["?(e=r,Object.assign(Object.assign({},r),{type:k.RESERVED_FUNCTION_NAME})):(e=r,r))}function xye(t){var e;let r=[];for(let n=0;n<t.length;n++){let i=t[n];if((qn.ARRAY(i)||qn.STRUCT(i))&&((e=t[n+1])===null||e===void 0?void 0:e.text)==="<"){let s=vye(t,n+1),o=t.slice(n,s+1);r.push({type:k.IDENTIFIER,raw:o.map(K3("raw")).join(""),text:o.map(K3("text")).join(""),start:i.start}),n=s}else r.push(i)}return r}function vye(t,e){let r=0;for(let n=e;n<t.length;n++){let i=t[n];if(i.text==="<"?r++:i.text===">"?r--:i.text===">>"&&(r-=2),r===0)return n}return t.length-1}var Oye,Cye,z3,vb,bye,yye,wye,Lye,JS,K3,Mb=G(()=>{xt();Cn();V3();j3();Oye=x(["SELECT [ALL | DISTINCT] [AS STRUCT | AS VALUE]"]),Cye=x(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY","HAVING","QUALIFY","WINDOW","PARTITION BY","ORDER BY","LIMIT","OFFSET","OMIT RECORD IF","INSERT [INTO]","VALUES","SET","MERGE [INTO]","WHEN [NOT] MATCHED [BY SOURCE | BY TARGET] [THEN]","UPDATE SET","CLUSTER BY","FOR SYSTEM_TIME AS OF","WITH CONNECTION","WITH PARTITION COLUMNS","REMOTE WITH CONNECTION"]),z3=x(["CREATE [OR REPLACE] [TEMP|TEMPORARY|SNAPSHOT|EXTERNAL] TABLE [IF NOT EXISTS]"]),vb=x(["CREATE [OR REPLACE] [MATERIALIZED] VIEW [IF NOT EXISTS]","UPDATE","DELETE [FROM]","DROP [SNAPSHOT | EXTERNAL] TABLE [IF EXISTS]","ALTER TABLE [IF EXISTS]","ADD COLUMN [IF NOT EXISTS]","DROP COLUMN [IF EXISTS]","RENAME TO","ALTER COLUMN [IF EXISTS]","SET DEFAULT COLLATE","SET OPTIONS","DROP NOT NULL","SET DATA TYPE","ALTER SCHEMA [IF EXISTS]","ALTER [MATERIALIZED] VIEW [IF EXISTS]","ALTER BI_CAPACITY","TRUNCATE TABLE","CREATE SCHEMA [IF NOT EXISTS]","DEFAULT COLLATE","CREATE [OR REPLACE] [TEMP|TEMPORARY|TABLE] FUNCTION [IF NOT EXISTS]","CREATE [OR REPLACE] PROCEDURE [IF NOT EXISTS]","CREATE [OR REPLACE] ROW ACCESS POLICY [IF NOT EXISTS]","GRANT TO","FILTER USING","CREATE CAPACITY","AS JSON","CREATE RESERVATION","CREATE ASSIGNMENT","CREATE SEARCH INDEX [IF NOT EXISTS]","DROP SCHEMA [IF EXISTS]","DROP [MATERIALIZED] VIEW [IF EXISTS]","DROP [TABLE] FUNCTION [IF EXISTS]","DROP PROCEDURE [IF EXISTS]","DROP ROW ACCESS POLICY","DROP ALL ROW ACCESS POLICIES","DROP CAPACITY [IF EXISTS]","DROP RESERVATION [IF EXISTS]","DROP ASSIGNMENT [IF EXISTS]","DROP SEARCH INDEX [IF EXISTS]","DROP [IF EXISTS]","GRANT","REVOKE","DECLARE","EXECUTE IMMEDIATE","LOOP","END LOOP","REPEAT","END REPEAT","WHILE","END WHILE","BREAK","LEAVE","CONTINUE","ITERATE","FOR","END FOR","BEGIN","BEGIN TRANSACTION","COMMIT TRANSACTION","ROLLBACK TRANSACTION","RAISE","RETURN","CALL","ASSERT","EXPORT DATA"]),bye=x(["UNION {ALL | DISTINCT}","EXCEPT DISTINCT","INTERSECT DISTINCT"]),yye=x(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN"]),wye=x(["TABLESAMPLE SYSTEM","ANY TYPE","ALL COLUMNS","NOT DETERMINISTIC","{ROWS | RANGE} BETWEEN","IS [NOT] DISTINCT FROM"]),Lye=x([]),JS={name:"bigquery",tokenizerOptions:{reservedSelect:Oye,reservedClauses:[...Cye,...vb,...z3],reservedSetOperations:bye,reservedJoins:yye,reservedKeywordPhrases:wye,reservedDataTypePhrases:Lye,reservedKeywords:q3,reservedDataTypes:X3,reservedFunctionNames:Y3,extraParens:["[]"],stringTypes:[{quote:'""".."""',prefixes:["R","B","RB","BR"]},{quote:"'''..'''",prefixes:["R","B","RB","BR"]},'""-bs',"''-bs",{quote:'""-raw',prefixes:["R","B","RB","BR"],requirePrefix:!0},{quote:"''-raw",prefixes:["R","B","RB","BR"],requirePrefix:!0}],identTypes:["``"],identChars:{dashes:!0},paramTypes:{positional:!0,named:["@"],quoted:["@"]},variableTypes:[{regex:String.raw`@@\w+`}],lineCommentTypes:["--","#"],operators:["&","|","^","~",">>","<<","||","=>"],postProcess:Dye},formatOptions:{onelineClauses:[...z3,...vb],tabularOnelineClauses:vb}};K3=t=>e=>e.type===k.IDENTIFIER||e.type===k.COMMA?e[t]+" ":e[t]});var J3,Q3=G(()=>{J3=["ARRAY_AGG","AVG","CORRELATION","COUNT","COUNT_BIG","COVARIANCE","COVARIANCE_SAMP","CUME_DIST","GROUPING","LISTAGG","MAX","MEDIAN","MIN","PERCENTILE_CONT","PERCENTILE_DISC","PERCENT_RANK","REGR_AVGX","REGR_AVGY","REGR_COUNT","REGR_INTERCEPT","REGR_ICPT","REGR_R2","REGR_SLOPE","REGR_SXX","REGR_SXY","REGR_SYY","STDDEV","STDDEV_SAMP","SUM","VARIANCE","VARIANCE_SAMP","XMLAGG","XMLGROUP","ABS","ABSVAL","ACOS","ADD_DAYS","ADD_HOURS","ADD_MINUTES","ADD_MONTHS","ADD_SECONDS","ADD_YEARS","AGE","ARRAY_DELETE","ARRAY_FIRST","ARRAY_LAST","ARRAY_NEXT","ARRAY_PRIOR","ASCII","ASCII_STR","ASIN","ATAN","ATAN2","ATANH","BITAND","BITANDNOT","BITOR","BITXOR","BITNOT","BPCHAR","BSON_TO_JSON","BTRIM","CARDINALITY","CEILING","CEIL","CHARACTER_LENGTH","CHR","COALESCE","COLLATION_KEY","COLLATION_KEY_BIT","COMPARE_DECFLOAT","CONCAT","COS","COSH","COT","CURSOR_ROWCOUNT","DATAPARTITIONNUM","DATE_PART","DATE_TRUNC","DAY","DAYNAME","DAYOFMONTH","DAYOFWEEK","DAYOFWEEK_ISO","DAYOFYEAR","DAYS","DAYS_BETWEEN","DAYS_TO_END_OF_MONTH","DBPARTITIONNUM","DECFLOAT","DECFLOAT_FORMAT","DECODE","DECRYPT_BIN","DECRYPT_CHAR","DEGREES","DEREF","DIFFERENCE","DIGITS","DOUBLE_PRECISION","EMPTY_BLOB","EMPTY_CLOB","EMPTY_DBCLOB","EMPTY_NCLOB","ENCRYPT","EVENT_MON_STATE","EXP","EXTRACT","FIRST_DAY","FLOOR","FROM_UTC_TIMESTAMP","GENERATE_UNIQUE","GETHINT","GREATEST","HASH","HASH4","HASH8","HASHEDVALUE","HEX","HEXTORAW","HOUR","HOURS_BETWEEN","IDENTITY_VAL_LOCAL","IFNULL","INITCAP","INSERT","INSTR","INSTR2","INSTR4","INSTRB","INTNAND","INTNOR","INTNXOR","INTNNOT","ISNULL","JSON_ARRAY","JSON_OBJECT","JSON_QUERY","JSON_TO_BSON","JSON_VALUE","JULIAN_DAY","LAST_DAY","LCASE","LEAST","LEFT","LENGTH","LENGTH2","LENGTH4","LENGTHB","LN","LOCATE","LOCATE_IN_STRING","LOG10","LONG_VARCHAR","LONG_VARGRAPHIC","LOWER","LPAD","LTRIM","MAX","MAX_CARDINALITY","MICROSECOND","MIDNIGHT_SECONDS","MIN","MINUTE","MINUTES_BETWEEN","MOD","MONTH","MONTHNAME","MONTHS_BETWEEN","MULTIPLY_ALT","NEXT_DAY","NEXT_MONTH","NEXT_QUARTER","NEXT_WEEK","NEXT_YEAR","NORMALIZE_DECFLOAT","NOW","NULLIF","NVL","NVL2","OCTET_LENGTH","OVERLAY","PARAMETER","POSITION","POSSTR","POW","POWER","QUANTIZE","QUARTER","QUOTE_IDENT","QUOTE_LITERAL","RADIANS","RAISE_ERROR","RAND","RANDOM","RAWTOHEX","REC2XML","REGEXP_COUNT","REGEXP_EXTRACT","REGEXP_INSTR","REGEXP_LIKE","REGEXP_MATCH_COUNT","REGEXP_REPLACE","REGEXP_SUBSTR","REPEAT","REPLACE","RID","RID_BIT","RIGHT","ROUND","ROUND_TIMESTAMP","RPAD","RTRIM","SECLABEL","SECLABEL_BY_NAME","SECLABEL_TO_CHAR","SECOND","SECONDS_BETWEEN","SIGN","SIN","SINH","SOUNDEX","SPACE","SQRT","STRIP","STRLEFT","STRPOS","STRRIGHT","SUBSTR","SUBSTR2","SUBSTR4","SUBSTRB","SUBSTRING","TABLE_NAME","TABLE_SCHEMA","TAN","TANH","THIS_MONTH","THIS_QUARTER","THIS_WEEK","THIS_YEAR","TIMESTAMP_FORMAT","TIMESTAMP_ISO","TIMESTAMPDIFF","TIMEZONE","TO_CHAR","TO_CLOB","TO_DATE","TO_HEX","TO_MULTI_BYTE","TO_NCHAR","TO_NCLOB","TO_NUMBER","TO_SINGLE_BYTE","TO_TIMESTAMP","TO_UTC_TIMESTAMP","TOTALORDER","TRANSLATE","TRIM","TRIM_ARRAY","TRUNC_TIMESTAMP","TRUNCATE","TRUNC","TYPE_ID","TYPE_NAME","TYPE_SCHEMA","UCASE","UNICODE_STR","UPPER","VALUE","VARCHAR_BIT_FORMAT","VARCHAR_FORMAT","VARCHAR_FORMAT_BIT","VERIFY_GROUP_FOR_USER","VERIFY_ROLE_FOR_USER","VERIFY_TRUSTED_CONTEXT_ROLE_FOR_USER","WEEK","WEEK_ISO","WEEKS_BETWEEN","WIDTH_BUCKET","XMLATTRIBUTES","XMLCOMMENT","XMLCONCAT","XMLDOCUMENT","XMLELEMENT","XMLFOREST","XMLNAMESPACES","XMLPARSE","XMLPI","XMLQUERY","XMLROW","XMLSERIALIZE","XMLTEXT","XMLVALIDATE","XMLXSROBJECTID","XSLTRANSFORM","YEAR","YEARS_BETWEEN","YMD_BETWEEN","BASE_TABLE","JSON_TABLE","UNNEST","XMLTABLE","RANK","DENSE_RANK","NTILE","LAG","LEAD","ROW_NUMBER","FIRST_VALUE","LAST_VALUE","NTH_VALUE","RATIO_TO_REPORT","CAST"]});var Z3,ej,tj=G(()=>{Z3=["ACTIVATE","ADD","AFTER","ALIAS","ALL","ALLOCATE","ALLOW","ALTER","AND","ANY","AS","ASENSITIVE","ASSOCIATE","ASUTIME","AT","ATTRIBUTES","AUDIT","AUTHORIZATION","AUX","AUXILIARY","BEFORE","BEGIN","BETWEEN","BINARY","BUFFERPOOL","BY","CACHE","CALL","CALLED","CAPTURE","CARDINALITY","CASCADED","CASE","CAST","CHECK","CLONE","CLOSE","CLUSTER","COLLECTION","COLLID","COLUMN","COMMENT","COMMIT","CONCAT","CONDITION","CONNECT","CONNECTION","CONSTRAINT","CONTAINS","CONTINUE","COUNT","COUNT_BIG","CREATE","CROSS","CURRENT","CURRENT_DATE","CURRENT_LC_CTYPE","CURRENT_PATH","CURRENT_SCHEMA","CURRENT_SERVER","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_TIMEZONE","CURRENT_USER","CURSOR","CYCLE","DATA","DATABASE","DATAPARTITIONNAME","DATAPARTITIONNUM","DAY","DAYS","DB2GENERAL","DB2GENRL","DB2SQL","DBINFO","DBPARTITIONNAME","DBPARTITIONNUM","DEALLOCATE","DECLARE","DEFAULT","DEFAULTS","DEFINITION","DELETE","DENSERANK","DENSE_RANK","DESCRIBE","DESCRIPTOR","DETERMINISTIC","DIAGNOSTICS","DISABLE","DISALLOW","DISCONNECT","DISTINCT","DO","DOCUMENT","DROP","DSSIZE","DYNAMIC","EACH","EDITPROC","ELSE","ELSEIF","ENABLE","ENCODING","ENCRYPTION","END","END-EXEC","ENDING","ERASE","ESCAPE","EVERY","EXCEPT","EXCEPTION","EXCLUDING","EXCLUSIVE","EXECUTE","EXISTS","EXIT","EXPLAIN","EXTENDED","EXTERNAL","EXTRACT","FENCED","FETCH","FIELDPROC","FILE","FINAL","FIRST1","FOR","FOREIGN","FREE","FROM","FULL","FUNCTION","GENERAL","GENERATED","GET","GLOBAL","GO","GOTO","GRANT","GRAPHIC","GROUP","HANDLER","HASH","HASHED_VALUE","HAVING","HINT","HOLD","HOUR","HOURS","IDENTITY","IF","IMMEDIATE","IMPORT","IN","INCLUDING","INCLUSIVE","INCREMENT","INDEX","INDICATOR","INDICATORS","INF","INFINITY","INHERIT","INNER","INOUT","INSENSITIVE","INSERT","INTEGRITY","INTERSECT","INTO","IS","ISNULL","ISOBID","ISOLATION","ITERATE","JAR","JAVA","JOIN","KEEP","KEY","LABEL","LANGUAGE","LAST3","LATERAL","LC_CTYPE","LEAVE","LEFT","LIKE","LIMIT","LINKTYPE","LOCAL","LOCALDATE","LOCALE","LOCALTIME","LOCALTIMESTAMP","LOCATOR","LOCATORS","LOCK","LOCKMAX","LOCKSIZE","LOOP","MAINTAINED","MATERIALIZED","MAXVALUE","MICROSECOND","MICROSECONDS","MINUTE","MINUTES","MINVALUE","MODE","MODIFIES","MONTH","MONTHS","NAN","NEW","NEW_TABLE","NEXTVAL","NO","NOCACHE","NOCYCLE","NODENAME","NODENUMBER","NOMAXVALUE","NOMINVALUE","NONE","NOORDER","NORMALIZED","NOT2","NOTNULL","NULL","NULLS","NUMPARTS","OBID","OF","OFF","OFFSET","OLD","OLD_TABLE","ON","OPEN","OPTIMIZATION","OPTIMIZE","OPTION","OR","ORDER","OUT","OUTER","OVER","OVERRIDING","PACKAGE","PADDED","PAGESIZE","PARAMETER","PART","PARTITION","PARTITIONED","PARTITIONING","PARTITIONS","PASSWORD","PATH","PERCENT","PIECESIZE","PLAN","POSITION","PRECISION","PREPARE","PREVVAL","PRIMARY","PRIQTY","PRIVILEGES","PROCEDURE","PROGRAM","PSID","PUBLIC","QUERY","QUERYNO","RANGE","RANK","READ","READS","RECOVERY","REFERENCES","REFERENCING","REFRESH","RELEASE","RENAME","REPEAT","RESET","RESIGNAL","RESTART","RESTRICT","RESULT","RESULT_SET_LOCATOR","RETURN","RETURNS","REVOKE","RIGHT","ROLE","ROLLBACK","ROUND_CEILING","ROUND_DOWN","ROUND_FLOOR","ROUND_HALF_DOWN","ROUND_HALF_EVEN","ROUND_HALF_UP","ROUND_UP","ROUTINE","ROW","ROWNUMBER","ROWS","ROWSET","ROW_NUMBER","RRN","RUN","SAVEPOINT","SCHEMA","SCRATCHPAD","SCROLL","SEARCH","SECOND","SECONDS","SECQTY","SECURITY","SELECT","SENSITIVE","SEQUENCE","SESSION","SESSION_USER","SET","SIGNAL","SIMPLE","SNAN","SOME","SOURCE","SPECIFIC","SQL","SQLID","STACKED","STANDARD","START","STARTING","STATEMENT","STATIC","STATMENT","STAY","STOGROUP","STORES","STYLE","SUBSTRING","SUMMARY","SYNONYM","SYSFUN","SYSIBM","SYSPROC","SYSTEM","SYSTEM_USER","TABLE","TABLESPACE","THEN","TO","TRANSACTION","TRIGGER","TRIM","TRUNCATE","TYPE","UNDO","UNION","UNIQUE","UNTIL","UPDATE","USAGE","USER","USING","VALIDPROC","VALUE","VALUES","VARIABLE","VARIANT","VCAT","VERSION","VIEW","VOLATILE","VOLUMES","WHEN","WHENEVER","WHERE","WHILE","WITH","WITHOUT","WLM","WRITE","XMLELEMENT","XMLEXISTS","XMLNAMESPACES","YEAR","YEARS"],ej=["ARRAY","BIGINT","BINARY","BLOB","BOOLEAN","CCSID","CHAR","CHARACTER","CLOB","DATE","DATETIME","DBCLOB","DEC","DECIMAL","DOUBLE","DOUBLE PRECISION","FLOAT","FLOAT4","FLOAT8","GRAPHIC","INT","INT2","INT4","INT8","INTEGER","INTERVAL","LONG VARCHAR","LONG VARGRAPHIC","NCHAR","NCHR","NCLOB","NVARCHAR","NUMERIC","SMALLINT","REAL","TIME","TIMESTAMP","VARBINARY","VARCHAR","VARGRAPHIC"]});var Mye,Uye,rj,Ub,Bye,Fye,Hye,Gye,QS,Bb=G(()=>{xt();Q3();tj();Mye=x(["SELECT [ALL | DISTINCT]"]),Uye=x(["WITH","FROM","WHERE","GROUP BY","HAVING","PARTITION BY","ORDER BY [INPUT SEQUENCE]","LIMIT","OFFSET","FETCH NEXT","FOR UPDATE [OF]","FOR {READ | FETCH} ONLY","FOR {RR | CS | UR | RS} [USE AND KEEP {SHARE | UPDATE | EXCLUSIVE} LOCKS]","WAIT FOR OUTCOME","SKIP LOCKED DATA","INTO","INSERT INTO","VALUES","SET","MERGE INTO","WHEN [NOT] MATCHED [THEN]","UPDATE SET","INSERT"]),rj=x(["CREATE [GLOBAL TEMPORARY | EXTERNAL] TABLE [IF NOT EXISTS]"]),Ub=x(["CREATE [OR REPLACE] VIEW","UPDATE","WHERE CURRENT OF","WITH {RR | RS | CS | UR}","DELETE FROM","DROP TABLE [IF EXISTS]","ALTER TABLE","ADD [COLUMN]","DROP [COLUMN]","RENAME COLUMN","ALTER [COLUMN]","SET DATA TYPE","SET NOT NULL","DROP {DEFAULT | GENERATED | NOT NULL}","TRUNCATE [TABLE]","ALLOCATE","ALTER AUDIT POLICY","ALTER BUFFERPOOL","ALTER DATABASE PARTITION GROUP","ALTER DATABASE","ALTER EVENT MONITOR","ALTER FUNCTION","ALTER HISTOGRAM TEMPLATE","ALTER INDEX","ALTER MASK","ALTER METHOD","ALTER MODULE","ALTER NICKNAME","ALTER PACKAGE","ALTER PERMISSION","ALTER PROCEDURE","ALTER SCHEMA","ALTER SECURITY LABEL COMPONENT","ALTER SECURITY POLICY","ALTER SEQUENCE","ALTER SERVER","ALTER SERVICE CLASS","ALTER STOGROUP","ALTER TABLESPACE","ALTER THRESHOLD","ALTER TRIGGER","ALTER TRUSTED CONTEXT","ALTER TYPE","ALTER USAGE LIST","ALTER USER MAPPING","ALTER VIEW","ALTER WORK ACTION SET","ALTER WORK CLASS SET","ALTER WORKLOAD","ALTER WRAPPER","ALTER XSROBJECT","ALTER STOGROUP","ALTER TABLESPACE","ALTER TRIGGER","ALTER TRUSTED CONTEXT","ALTER VIEW","ASSOCIATE [RESULT SET] {LOCATOR | LOCATORS}","AUDIT","BEGIN DECLARE SECTION","CALL","CLOSE","COMMENT ON","COMMIT [WORK]","CONNECT","CREATE [OR REPLACE] [PUBLIC] ALIAS","CREATE AUDIT POLICY","CREATE BUFFERPOOL","CREATE DATABASE PARTITION GROUP","CREATE EVENT MONITOR","CREATE [OR REPLACE] FUNCTION","CREATE FUNCTION MAPPING","CREATE HISTOGRAM TEMPLATE","CREATE [UNIQUE] INDEX","CREATE INDEX EXTENSION","CREATE [OR REPLACE] MASK","CREATE [SPECIFIC] METHOD","CREATE [OR REPLACE] MODULE","CREATE [OR REPLACE] NICKNAME","CREATE [OR REPLACE] PERMISSION","CREATE [OR REPLACE] PROCEDURE","CREATE ROLE","CREATE SCHEMA","CREATE SECURITY LABEL [COMPONENT]","CREATE SECURITY POLICY","CREATE [OR REPLACE] SEQUENCE","CREATE SERVICE CLASS","CREATE SERVER","CREATE STOGROUP","CREATE SYNONYM","CREATE [LARGE | REGULAR | {SYSTEM | USER} TEMPORARY] TABLESPACE","CREATE THRESHOLD","CREATE {TRANSFORM | TRANSFORMS} FOR","CREATE [OR REPLACE] TRIGGER","CREATE TRUSTED CONTEXT","CREATE [OR REPLACE] TYPE","CREATE TYPE MAPPING","CREATE USAGE LIST","CREATE USER MAPPING FOR","CREATE [OR REPLACE] VARIABLE","CREATE WORK ACTION SET","CREATE WORK CLASS SET","CREATE WORKLOAD","CREATE WRAPPER","DECLARE","DECLARE GLOBAL TEMPORARY TABLE","DESCRIBE [INPUT | OUTPUT]","DISCONNECT","DROP [PUBLIC] ALIAS","DROP AUDIT POLICY","DROP BUFFERPOOL","DROP DATABASE PARTITION GROUP","DROP EVENT MONITOR","DROP [SPECIFIC] FUNCTION","DROP FUNCTION MAPPING","DROP HISTOGRAM TEMPLATE","DROP INDEX [EXTENSION]","DROP MASK","DROP [SPECIFIC] METHOD","DROP MODULE","DROP NICKNAME","DROP PACKAGE","DROP PERMISSION","DROP [SPECIFIC] PROCEDURE","DROP ROLE","DROP SCHEMA","DROP SECURITY LABEL [COMPONENT]","DROP SECURITY POLICY","DROP SEQUENCE","DROP SERVER","DROP SERVICE CLASS","DROP STOGROUP","DROP TABLE HIERARCHY","DROP {TABLESPACE | TABLESPACES}","DROP {TRANSFORM | TRANSFORMS}","DROP THRESHOLD","DROP TRIGGER","DROP TRUSTED CONTEXT","DROP TYPE [MAPPING]","DROP USAGE LIST","DROP USER MAPPING FOR","DROP VARIABLE","DROP VIEW [HIERARCHY]","DROP WORK {ACTION | CLASS} SET","DROP WORKLOAD","DROP WRAPPER","DROP XSROBJECT","END DECLARE SECTION","EXECUTE [IMMEDIATE]","EXPLAIN {PLAN [SECTION] | ALL}","FETCH [FROM]","FLUSH {BUFFERPOOL | BUFFERPOOLS} ALL","FLUSH EVENT MONITOR","FLUSH FEDERATED CACHE","FLUSH OPTIMIZATION PROFILE CACHE","FLUSH PACKAGE CACHE [DYNAMIC]","FLUSH AUTHENTICATION CACHE [FOR ALL]","FREE LOCATOR","GET DIAGNOSTICS","GOTO","GRANT","INCLUDE","ITERATE","LEAVE","LOCK TABLE","LOOP","OPEN","PIPE","PREPARE","REFRESH TABLE","RELEASE","RELEASE [TO] SAVEPOINT","RENAME [TABLE | INDEX | STOGROUP | TABLESPACE]","REPEAT","RESIGNAL","RETURN","REVOKE","ROLLBACK [WORK] [TO SAVEPOINT]","SAVEPOINT","SET COMPILATION ENVIRONMENT","SET CONNECTION","SET CURRENT","SET ENCRYPTION PASSWORD","SET EVENT MONITOR STATE","SET INTEGRITY","SET PASSTHRU","SET PATH","SET ROLE","SET SCHEMA","SET SERVER OPTION","SET {SESSION AUTHORIZATION | SESSION_USER}","SET USAGE LIST","SIGNAL","TRANSFER OWNERSHIP OF","WHENEVER {NOT FOUND | SQLERROR | SQLWARNING}","WHILE"]),Bye=x(["UNION [ALL]","EXCEPT [ALL]","INTERSECT [ALL]"]),Fye=x(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN"]),Hye=x(["ON DELETE","ON UPDATE","SET NULL","{ROWS | RANGE} BETWEEN"]),Gye=x([]),QS={name:"db2",tokenizerOptions:{reservedSelect:Mye,reservedClauses:[...Uye,...rj,...Ub],reservedSetOperations:Bye,reservedJoins:Fye,reservedKeywordPhrases:Hye,reservedDataTypePhrases:Gye,reservedKeywords:Z3,reservedDataTypes:ej,reservedFunctionNames:J3,extraParens:["[]"],stringTypes:[{quote:"''-qq",prefixes:["G","N","U&"]},{quote:"''-raw",prefixes:["X","BX","GX","UX"],requirePrefix:!0}],identTypes:['""-qq'],identChars:{first:"@#$",rest:"@#$"},paramTypes:{positional:!0,named:[":"]},paramChars:{first:"@#$",rest:"@#$"},operators:["**","%","|","&","^","~","\xAC=","\xAC>","\xAC<","!>","!<","^=","^>","^<","||","->","=>"]},formatOptions:{onelineClauses:[...rj,...Ub],tabularOnelineClauses:Ub}}});var nj,ij=G(()=>{nj=["ARRAY_AGG","AVG","CORR","CORRELATION","COUNT","COUNT_BIG","COVAR_POP","COVARIANCE","COVAR","COVAR_SAMP","COVARIANCE_SAMP","EVERY","GROUPING","JSON_ARRAYAGG","JSON_OBJECTAGG","LISTAGG","MAX","MEDIAN","MIN","PERCENTILE_CONT","PERCENTILE_DISC","REGR_AVGX","REGR_AVGY","REGR_COUNT","REGR_INTERCEPT","REGR_R2","REGR_SLOPE","REGR_SXX","REGR_SXY","REGR_SYY","SOME","STDDEV_POP","STDDEV","STDDEV_SAMP","SUM","VAR_POP","VARIANCE","VAR","VAR_SAMP","VARIANCE_SAMP","XMLAGG","XMLGROUP","ABS","ABSVAL","ACOS","ADD_DAYS","ADD_HOURS","ADD_MINUTES","ADD_MONTHS","ADD_SECONDS","ADD_YEARS","ANTILOG","ARRAY_MAX_CARDINALITY","ARRAY_TRIM","ASCII","ASIN","ATAN","ATAN2","ATANH","BASE64_DECODE","BASE64_ENCODE","BIT_LENGTH","BITAND","BITANDNOT","BITNOT","BITOR","BITXOR","BSON_TO_JSON","CARDINALITY","CEIL","CEILING","CHAR_LENGTH","CHARACTER_LENGTH","CHR","COALESCE","COMPARE_DECFLOAT","CONCAT","CONTAINS","COS","COSH","COT","CURDATE","CURTIME","DATABASE","DATAPARTITIONNAME","DATAPARTITIONNUM","DAY","DAYNAME","DAYOFMONTH","DAYOFWEEK_ISO","DAYOFWEEK","DAYOFYEAR","DAYS","DBPARTITIONNAME","DBPARTITIONNUM","DECFLOAT_FORMAT","DECFLOAT_SORTKEY","DECRYPT_BINARY","DECRYPT_BIT","DECRYPT_CHAR","DECRYPT_DB","DEGREES","DIFFERENCE","DIGITS","DLCOMMENT","DLLINKTYPE","DLURLCOMPLETE","DLURLPATH","DLURLPATHONLY","DLURLSCHEME","DLURLSERVER","DLVALUE","DOUBLE_PRECISION","DOUBLE","ENCRPYT","ENCRYPT_AES","ENCRYPT_AES256","ENCRYPT_RC2","ENCRYPT_TDES","EXP","EXTRACT","FIRST_DAY","FLOOR","GENERATE_UNIQUE","GET_BLOB_FROM_FILE","GET_CLOB_FROM_FILE","GET_DBCLOB_FROM_FILE","GET_XML_FILE","GETHINT","GREATEST","HASH_MD5","HASH_ROW","HASH_SHA1","HASH_SHA256","HASH_SHA512","HASH_VALUES","HASHED_VALUE","HEX","HEXTORAW","HOUR","HTML_ENTITY_DECODE","HTML_ENTITY_ENCODE","HTTP_DELETE_BLOB","HTTP_DELETE","HTTP_GET_BLOB","HTTP_GET","HTTP_PATCH_BLOB","HTTP_PATCH","HTTP_POST_BLOB","HTTP_POST","HTTP_PUT_BLOB","HTTP_PUT","IDENTITY_VAL_LOCAL","IFNULL","INSERT","INSTR","INTERPRET","ISFALSE","ISNOTFALSE","ISNOTTRUE","ISTRUE","JSON_ARRAY","JSON_OBJECT","JSON_QUERY","JSON_TO_BSON","JSON_UPDATE","JSON_VALUE","JULIAN_DAY","LAND","LAST_DAY","LCASE","LEAST","LEFT","LENGTH","LN","LNOT","LOCATE_IN_STRING","LOCATE","LOG10","LOR","LOWER","LPAD","LTRIM","MAX_CARDINALITY","MAX","MICROSECOND","MIDNIGHT_SECONDS","MIN","MINUTE","MOD","MONTH","MONTHNAME","MONTHS_BETWEEN","MQREAD","MQREADCLOB","MQRECEIVE","MQRECEIVECLOB","MQSEND","MULTIPLY_ALT","NEXT_DAY","NORMALIZE_DECFLOAT","NOW","NULLIF","NVL","OCTET_LENGTH","OVERLAY","PI","POSITION","POSSTR","POW","POWER","QUANTIZE","QUARTER","RADIANS","RAISE_ERROR","RANDOM","RAND","REGEXP_COUNT","REGEXP_INSTR","REGEXP_REPLACE","REGEXP_SUBSTR","REPEAT","REPLACE","RID","RIGHT","ROUND_TIMESTAMP","ROUND","RPAD","RRN","RTRIM","SCORE","SECOND","SIGN","SIN","SINH","SOUNDEX","SPACE","SQRT","STRIP","STRLEFT","STRPOS","STRRIGHT","SUBSTR","SUBSTRING","TABLE_NAME","TABLE_SCHEMA","TAN","TANH","TIMESTAMP_FORMAT","TIMESTAMP_ISO","TIMESTAMPDIFF_BIG","TIMESTAMPDIFF","TO_CHAR","TO_CLOB","TO_DATE","TO_NUMBER","TO_TIMESTAMP","TOTALORDER","TRANSLATE","TRIM_ARRAY","TRIM","TRUNC_TIMESTAMP","TRUNC","TRUNCATE","UCASE","UPPER","URL_DECODE","URL_ENCODE","VALUE","VARBINARY_FORMAT","VARCHAR_BIT_FORMAT","VARCHAR_FORMAT_BINARY","VARCHAR_FORMAT","VERIFY_GROUP_FOR_USER","WEEK_ISO","WEEK","WRAP","XMLATTRIBUTES","XMLCOMMENT","XMLCONCAT","XMLDOCUMENT","XMLELEMENT","XMLFOREST","XMLNAMESPACES","XMLPARSE","XMLPI","XMLROW","XMLSERIALIZE","XMLTEXT","XMLVALIDATE","XOR","XSLTRANSFORM","YEAR","ZONED","BASE_TABLE","HTTP_DELETE_BLOB_VERBOSE","HTTP_DELETE_VERBOSE","HTTP_GET_BLOB_VERBOSE","HTTP_GET_VERBOSE","HTTP_PATCH_BLOB_VERBOSE","HTTP_PATCH_VERBOSE","HTTP_POST_BLOB_VERBOSE","HTTP_POST_VERBOSE","HTTP_PUT_BLOB_VERBOSE","HTTP_PUT_VERBOSE","JSON_TABLE","MQREADALL","MQREADALLCLOB","MQRECEIVEALL","MQRECEIVEALLCLOB","XMLTABLE","UNPACK","CUME_DIST","DENSE_RANK","FIRST_VALUE","LAG","LAST_VALUE","LEAD","NTH_VALUE","NTILE","PERCENT_RANK","RANK","RATIO_TO_REPORT","ROW_NUMBER","CAST"]});var sj,oj,aj=G(()=>{sj=["ABSENT","ACCORDING","ACCTNG","ACTION","ACTIVATE","ADD","ALIAS","ALL","ALLOCATE","ALLOW","ALTER","AND","ANY","APPEND","APPLNAME","ARRAY","ARRAY_AGG","ARRAY_TRIM","AS","ASC","ASENSITIVE","ASSOCIATE","ATOMIC","ATTACH","ATTRIBUTES","AUTHORIZATION","AUTONOMOUS","BEFORE","BEGIN","BETWEEN","BIND","BSON","BUFFERPOOL","BY","CACHE","CALL","CALLED","CARDINALITY","CASE","CAST","CHECK","CL","CLOSE","CLUSTER","COLLECT","COLLECTION","COLUMN","COMMENT","COMMIT","COMPACT","COMPARISONS","COMPRESS","CONCAT","CONCURRENT","CONDITION","CONNECT","CONNECT_BY_ROOT","CONNECTION","CONSTANT","CONSTRAINT","CONTAINS","CONTENT","CONTINUE","COPY","COUNT","COUNT_BIG","CREATE","CREATEIN","CROSS","CUBE","CUME_DIST","CURRENT","CURRENT_DATE","CURRENT_PATH","CURRENT_SCHEMA","CURRENT_SERVER","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_TIMEZONE","CURRENT_USER","CURSOR","CYCLE","DATABASE","DATAPARTITIONNAME","DATAPARTITIONNUM","DAY","DAYS","DB2GENERAL","DB2GENRL","DB2SQL","DBINFO","DBPARTITIONNAME","DBPARTITIONNUM","DEACTIVATE","DEALLOCATE","DECLARE","DEFAULT","DEFAULTS","DEFER","DEFINE","DEFINITION","DELETE","DELETING","DENSE_RANK","DENSERANK","DESC","DESCRIBE","DESCRIPTOR","DETACH","DETERMINISTIC","DIAGNOSTICS","DISABLE","DISALLOW","DISCONNECT","DISTINCT","DO","DOCUMENT","DROP","DYNAMIC","EACH","ELSE","ELSEIF","EMPTY","ENABLE","ENCODING","ENCRYPTION","END","END-EXEC","ENDING","ENFORCED","ERROR","ESCAPE","EVERY","EXCEPT","EXCEPTION","EXCLUDING","EXCLUSIVE","EXECUTE","EXISTS","EXIT","EXTEND","EXTERNAL","EXTRACT","FALSE","FENCED","FETCH","FIELDPROC","FILE","FINAL","FIRST_VALUE","FOR","FOREIGN","FORMAT","FREE","FREEPAGE","FROM","FULL","FUNCTION","GBPCACHE","GENERAL","GENERATED","GET","GLOBAL","GO","GOTO","GRANT","GROUP","HANDLER","HASH","HASH_ROW","HASHED_VALUE","HAVING","HINT","HOLD","HOUR","HOURS","IDENTITY","IF","IGNORE","IMMEDIATE","IMPLICITLY","IN","INCLUDE","INCLUDING","INCLUSIVE","INCREMENT","INDEX","INDEXBP","INDICATOR","INF","INFINITY","INHERIT","INLINE","INNER","INOUT","INSENSITIVE","INSERT","INSERTING","INTEGRITY","INTERPRET","INTERSECT","INTO","IS","ISNULL","ISOLATION","ITERATE","JAVA","JOIN","JSON","JSON_ARRAY","JSON_ARRAYAGG","JSON_EXISTS","JSON_OBJECT","JSON_OBJECTAGG","JSON_QUERY","JSON_TABLE","JSON_VALUE","KEEP","KEY","KEYS","LABEL","LAG","LANGUAGE","LAST_VALUE","LATERAL","LEAD","LEAVE","LEFT","LEVEL2","LIKE","LIMIT","LINKTYPE","LISTAGG","LOCAL","LOCALDATE","LOCALTIME","LOCALTIMESTAMP","LOCATION","LOCATOR","LOCK","LOCKSIZE","LOG","LOGGED","LOOP","MAINTAINED","MASK","MATCHED","MATERIALIZED","MAXVALUE","MERGE","MICROSECOND","MICROSECONDS","MINPCTUSED","MINUTE","MINUTES","MINVALUE","MIRROR","MIXED","MODE","MODIFIES","MONTH","MONTHS","NAMESPACE","NAN","NATIONAL","NCHAR","NCLOB","NESTED","NEW","NEW_TABLE","NEXTVAL","NO","NOCACHE","NOCYCLE","NODENAME","NODENUMBER","NOMAXVALUE","NOMINVALUE","NONE","NOORDER","NORMALIZED","NOT","NOTNULL","NTH_VALUE","NTILE","NULL","NULLS","NVARCHAR","OBID","OBJECT","OF","OFF","OFFSET","OLD","OLD_TABLE","OMIT","ON","ONLY","OPEN","OPTIMIZE","OPTION","OR","ORDER","ORDINALITY","ORGANIZE","OUT","OUTER","OVER","OVERLAY","OVERRIDING","PACKAGE","PADDED","PAGE","PAGESIZE","PARAMETER","PART","PARTITION","PARTITIONED","PARTITIONING","PARTITIONS","PASSING","PASSWORD","PATH","PCTFREE","PERCENT_RANK","PERCENTILE_CONT","PERCENTILE_DISC","PERIOD","PERMISSION","PIECESIZE","PIPE","PLAN","POSITION","PREPARE","PREVVAL","PRIMARY","PRIOR","PRIQTY","PRIVILEGES","PROCEDURE","PROGRAM","PROGRAMID","QUERY","RANGE","RANK","RATIO_TO_REPORT","RCDFMT","READ","READS","RECOVERY","REFERENCES","REFERENCING","REFRESH","REGEXP_LIKE","RELEASE","RENAME","REPEAT","RESET","RESIGNAL","RESTART","RESULT","RESULT_SET_LOCATOR","RETURN","RETURNING","RETURNS","REVOKE","RID","RIGHT","ROLLBACK","ROLLUP","ROUTINE","ROW","ROW_NUMBER","ROWNUMBER","ROWS","RRN","RUN","SAVEPOINT","SBCS","SCALAR","SCHEMA","SCRATCHPAD","SCROLL","SEARCH","SECOND","SECONDS","SECQTY","SECURED","SELECT","SENSITIVE","SEQUENCE","SESSION","SESSION_USER","SET","SIGNAL","SIMPLE","SKIP","SNAN","SOME","SOURCE","SPECIFIC","SQL","SQLID","SQLIND_DEFAULT","SQLIND_UNASSIGNED","STACKED","START","STARTING","STATEMENT","STATIC","STOGROUP","SUBSTRING","SUMMARY","SYNONYM","SYSTEM_TIME","SYSTEM_USER","TABLE","TABLESPACE","TABLESPACES","TAG","THEN","THREADSAFE","TO","TRANSACTION","TRANSFER","TRIGGER","TRIM","TRIM_ARRAY","TRUE","TRUNCATE","TRY_CAST","TYPE","UNDO","UNION","UNIQUE","UNIT","UNKNOWN","UNNEST","UNTIL","UPDATE","UPDATING","URI","USAGE","USE","USER","USERID","USING","VALUE","VALUES","VARIABLE","VARIANT","VCAT","VERSION","VERSIONING","VIEW","VOLATILE","WAIT","WHEN","WHENEVER","WHERE","WHILE","WITH","WITHIN","WITHOUT","WRAPPED","WRAPPER","WRITE","WRKSTNNAME","XMLAGG","XMLATTRIBUTES","XMLCAST","XMLCOMMENT","XMLCONCAT","XMLDOCUMENT","XMLELEMENT","XMLFOREST","XMLGROUP","XMLNAMESPACES","XMLPARSE","XMLPI","XMLROW","XMLSERIALIZE","XMLTABLE","XMLTEXT","XMLVALIDATE","XSLTRANSFORM","XSROBJECT","YEAR","YEARS","YES","ZONE"],oj=["ARRAY","BIGINT","BINARY","BIT","BLOB","BOOLEAN","CCSID","CHAR","CHARACTER","CLOB","DATA","DATALINK","DATE","DBCLOB","DECFLOAT","DECIMAL","DEC","DOUBLE","DOUBLE PRECISION","FLOAT","GRAPHIC","INT","INTEGER","LONG","NUMERIC","REAL","ROWID","SMALLINT","TIME","TIMESTAMP","VARBINARY","VARCHAR","VARGRAPHIC","XML"]});var Wye,$ye,lj,Fb,kye,Yye,Vye,qye,ZS,Hb=G(()=>{xt();ij();aj();Wye=x(["SELECT [ALL | DISTINCT]"]),$ye=x(["WITH [RECURSIVE]","INTO","FROM","WHERE","GROUP BY","HAVING","PARTITION BY","ORDER [SIBLINGS] BY [INPUT SEQUENCE]","LIMIT","OFFSET","FETCH {FIRST | NEXT}","FOR UPDATE [OF]","FOR READ ONLY","OPTIMIZE FOR","INSERT INTO","VALUES","SET","MERGE INTO","WHEN [NOT] MATCHED [THEN]","UPDATE SET","DELETE","INSERT","FOR SYSTEM NAME"]),lj=x(["CREATE [OR REPLACE] TABLE"]),Fb=x(["CREATE [OR REPLACE] [RECURSIVE] VIEW","UPDATE","WHERE CURRENT OF","WITH {NC | RR | RS | CS | UR}","DELETE FROM","DROP TABLE","ALTER TABLE","ADD [COLUMN]","ALTER [COLUMN]","DROP [COLUMN]","SET DATA TYPE","SET {GENERATED ALWAYS | GENERATED BY DEFAULT}","SET NOT NULL","SET {NOT HIDDEN | IMPLICITLY HIDDEN}","SET FIELDPROC","DROP {DEFAULT | NOT NULL | GENERATED | IDENTITY | ROW CHANGE TIMESTAMP | FIELDPROC}","TRUNCATE [TABLE]","SET [CURRENT] SCHEMA","SET CURRENT_SCHEMA","ALLOCATE CURSOR","ALLOCATE [SQL] DESCRIPTOR [LOCAL | GLOBAL] SQL","ALTER [SPECIFIC] {FUNCTION | PROCEDURE}","ALTER {MASK | PERMISSION | SEQUENCE | TRIGGER}","ASSOCIATE [RESULT SET] {LOCATOR | LOCATORS}","BEGIN DECLARE SECTION","CALL","CLOSE","COMMENT ON {ALIAS | COLUMN | CONSTRAINT | INDEX | MASK | PACKAGE | PARAMETER | PERMISSION | SEQUENCE | TABLE | TRIGGER | VARIABLE | XSROBJECT}","COMMENT ON [SPECIFIC] {FUNCTION | PROCEDURE | ROUTINE}","COMMENT ON PARAMETER SPECIFIC {FUNCTION | PROCEDURE | ROUTINE}","COMMENT ON [TABLE FUNCTION] RETURN COLUMN","COMMENT ON [TABLE FUNCTION] RETURN COLUMN SPECIFIC [PROCEDURE | ROUTINE]","COMMIT [WORK] [HOLD]","CONNECT [TO | RESET] USER","CREATE [OR REPLACE] {ALIAS | FUNCTION | MASK | PERMISSION | PROCEDURE | SEQUENCE | TRIGGER | VARIABLE}","CREATE [ENCODED VECTOR] INDEX","CREATE UNIQUE [WHERE NOT NULL] INDEX","CREATE SCHEMA","CREATE TYPE","DEALLOCATE [SQL] DESCRIPTOR [LOCAL | GLOBAL]","DECLARE CURSOR","DECLARE GLOBAL TEMPORARY TABLE","DECLARE","DESCRIBE CURSOR","DESCRIBE INPUT","DESCRIBE [OUTPUT]","DESCRIBE {PROCEDURE | ROUTINE}","DESCRIBE TABLE","DISCONNECT ALL [SQL]","DISCONNECT [CURRENT]","DROP {ALIAS | INDEX | MASK | PACKAGE | PERMISSION | SCHEMA | SEQUENCE | TABLE | TYPE | VARIABLE | XSROBJECT} [IF EXISTS]","DROP [SPECIFIC] {FUNCTION | PROCEDURE | ROUTINE} [IF EXISTS]","END DECLARE SECTION","EXECUTE [IMMEDIATE]","FREE LOCATOR","GET [SQL] DESCRIPTOR [LOCAL | GLOBAL]","GET [CURRENT | STACKED] DIAGNOSTICS","GRANT {ALL [PRIVILEGES] | ALTER | EXECUTE} ON {FUNCTION | PROCEDURE | ROUTINE | PACKAGE | SCHEMA | SEQUENCE | TABLE | TYPE | VARIABLE | XSROBJECT}","HOLD LOCATOR","INCLUDE","LABEL ON {ALIAS | COLUMN | CONSTRAINT | INDEX | MASK | PACKAGE | PERMISSION | SEQUENCE | TABLE | TRIGGER | VARIABLE | XSROBJECT}","LABEL ON [SPECIFIC] {FUNCTION | PROCEDURE | ROUTINE}","LOCK TABLE","OPEN","PREPARE","REFRESH TABLE","RELEASE","RELEASE [TO] SAVEPOINT","RENAME [TABLE | INDEX] TO","REVOKE {ALL [PRIVILEGES] | ALTER | EXECUTE} ON {FUNCTION | PROCEDURE | ROUTINE | PACKAGE | SCHEMA | SEQUENCE | TABLE | TYPE | VARIABLE | XSROBJECT}","ROLLBACK [WORK] [HOLD | TO SAVEPOINT]","SAVEPOINT","SET CONNECTION","SET CURRENT {DEBUG MODE | DECFLOAT ROUNDING MODE | DEGREE | IMPLICIT XMLPARSE OPTION | TEMPORAL SYSTEM_TIME}","SET [SQL] DESCRIPTOR [LOCAL | GLOBAL]","SET ENCRYPTION PASSWORD","SET OPTION","SET {[CURRENT [FUNCTION]] PATH | CURRENT_PATH}","SET RESULT SETS [WITH RETURN [TO CALLER | TO CLIENT]]","SET SESSION AUTHORIZATION","SET SESSION_USER","SET TRANSACTION","SIGNAL SQLSTATE [VALUE]","TAG","TRANSFER OWNERSHIP OF","WHENEVER {NOT FOUND | SQLERROR | SQLWARNING}"]),kye=x(["UNION [ALL]","EXCEPT [ALL]","INTERSECT [ALL]"]),Yye=x(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","[LEFT | RIGHT] EXCEPTION JOIN","{INNER | CROSS} JOIN"]),Vye=x(["ON DELETE","ON UPDATE","SET NULL","{ROWS | RANGE} BETWEEN"]),qye=x([]),ZS={name:"db2i",tokenizerOptions:{reservedSelect:Wye,reservedClauses:[...$ye,...lj,...Fb],reservedSetOperations:kye,reservedJoins:Yye,reservedKeywordPhrases:Vye,reservedDataTypePhrases:qye,reservedKeywords:sj,reservedDataTypes:oj,reservedFunctionNames:nj,nestedBlockComments:!0,extraParens:["[]"],stringTypes:[{quote:"''-qq",prefixes:["G","N"]},{quote:"''-raw",prefixes:["X","BX","GX","UX"],requirePrefix:!0}],identTypes:['""-qq'],identChars:{first:"@#$",rest:"@#$"},paramTypes:{positional:!0,named:[":"]},paramChars:{first:"@#$",rest:"@#$"},operators:["**","\xAC=","\xAC>","\xAC<","!>","!<","||","=>"]},formatOptions:{onelineClauses:[...lj,...Fb],tabularOnelineClauses:Fb}}});var cj,uj=G(()=>{cj=["ABS","ACOS","ADD","ADD_PARQUET_KEY","AGE","AGGREGATE","ALIAS","ALL_PROFILING_OUTPUT","ANY_VALUE","APPLY","APPROX_COUNT_DISTINCT","APPROX_QUANTILE","ARBITRARY","ARGMAX","ARGMIN","ARG_MAX","ARG_MAX_NULL","ARG_MIN","ARG_MIN_NULL","ARRAY_AGG","ARRAY_AGGR","ARRAY_AGGREGATE","ARRAY_APPEND","ARRAY_APPLY","ARRAY_CAT","ARRAY_CONCAT","ARRAY_CONTAINS","ARRAY_COSINE_SIMILARITY","ARRAY_CROSS_PRODUCT","ARRAY_DISTANCE","ARRAY_DISTINCT","ARRAY_DOT_PRODUCT","ARRAY_EXTRACT","ARRAY_FILTER","ARRAY_GRADE_UP","ARRAY_HAS","ARRAY_HAS_ALL","ARRAY_HAS_ANY","ARRAY_INDEXOF","ARRAY_INNER_PRODUCT","ARRAY_INTERSECT","ARRAY_LENGTH","ARRAY_POP_BACK","ARRAY_POP_FRONT","ARRAY_POSITION","ARRAY_PREPEND","ARRAY_PUSH_BACK","ARRAY_PUSH_FRONT","ARRAY_REDUCE","ARRAY_RESIZE","ARRAY_REVERSE","ARRAY_REVERSE_SORT","ARRAY_SELECT","ARRAY_SLICE","ARRAY_SORT","ARRAY_TO_JSON","ARRAY_TO_STRING","ARRAY_TRANSFORM","ARRAY_UNIQUE","ARRAY_VALUE","ARRAY_WHERE","ARRAY_ZIP","ARROW_SCAN","ARROW_SCAN_DUMB","ASCII","ASIN","ATAN","ATAN2","AVG","BASE64","BIN","BITSTRING","BITSTRING_AGG","BIT_AND","BIT_COUNT","BIT_LENGTH","BIT_OR","BIT_POSITION","BIT_XOR","BOOL_AND","BOOL_OR","CARDINALITY","CBRT","CEIL","CEILING","CENTURY","CHECKPOINT","CHR","COLLATIONS","COL_DESCRIPTION","COMBINE","CONCAT","CONCAT_WS","CONSTANT_OR_NULL","CONTAINS","COPY_DATABASE","CORR","COS","COT","COUNT","COUNT_IF","COUNT_STAR","COVAR_POP","COVAR_SAMP","CREATE_SORT_KEY","CURRENT_CATALOG","CURRENT_DATABASE","CURRENT_DATE","CURRENT_LOCALTIME","CURRENT_LOCALTIMESTAMP","CURRENT_QUERY","CURRENT_ROLE","CURRENT_SCHEMA","CURRENT_SCHEMAS","CURRENT_SETTING","CURRENT_USER","CURRVAL","DAMERAU_LEVENSHTEIN","DATABASE_LIST","DATABASE_SIZE","DATEDIFF","DATEPART","DATESUB","DATETRUNC","DATE_ADD","DATE_DIFF","DATE_PART","DATE_SUB","DATE_TRUNC","DAY","DAYNAME","DAYOFMONTH","DAYOFWEEK","DAYOFYEAR","DECADE","DECODE","DEGREES","DISABLE_CHECKPOINT_ON_SHUTDOWN","DISABLE_OBJECT_CACHE","DISABLE_OPTIMIZER","DISABLE_PRINT_PROGRESS_BAR","DISABLE_PROFILE","DISABLE_PROFILING","DISABLE_PROGRESS_BAR","DISABLE_VERIFICATION","DISABLE_VERIFY_EXTERNAL","DISABLE_VERIFY_FETCH_ROW","DISABLE_VERIFY_PARALLELISM","DISABLE_VERIFY_SERIALIZER","DIVIDE","DUCKDB_COLUMNS","DUCKDB_CONSTRAINTS","DUCKDB_DATABASES","DUCKDB_DEPENDENCIES","DUCKDB_EXTENSIONS","DUCKDB_FUNCTIONS","DUCKDB_INDEXES","DUCKDB_KEYWORDS","DUCKDB_MEMORY","DUCKDB_OPTIMIZERS","DUCKDB_SCHEMAS","DUCKDB_SECRETS","DUCKDB_SEQUENCES","DUCKDB_SETTINGS","DUCKDB_TABLES","DUCKDB_TEMPORARY_FILES","DUCKDB_TYPES","DUCKDB_VIEWS","EDIT","EDITDIST3","ELEMENT_AT","ENABLE_CHECKPOINT_ON_SHUTDOWN","ENABLE_OBJECT_CACHE","ENABLE_OPTIMIZER","ENABLE_PRINT_PROGRESS_BAR","ENABLE_PROFILE","ENABLE_PROFILING","ENABLE_PROGRESS_BAR","ENABLE_VERIFICATION","ENCODE","ENDS_WITH","ENTROPY","ENUM_CODE","ENUM_FIRST","ENUM_LAST","ENUM_RANGE","ENUM_RANGE_BOUNDARY","EPOCH","EPOCH_MS","EPOCH_NS","EPOCH_US","ERA","ERROR","EVEN","EXP","FACTORIAL","FAVG","FDIV","FILTER","FINALIZE","FIRST","FLATTEN","FLOOR","FMOD","FORCE_CHECKPOINT","FORMAT","FORMATREADABLEDECIMALSIZE","FORMATREADABLESIZE","FORMAT_BYTES","FORMAT_PG_TYPE","FORMAT_TYPE","FROM_BASE64","FROM_BINARY","FROM_HEX","FROM_JSON","FROM_JSON_STRICT","FSUM","FUNCTIONS","GAMMA","GCD","GENERATE_SERIES","GENERATE_SUBSCRIPTS","GEN_RANDOM_UUID","GEOMEAN","GEOMETRIC_MEAN","GETENV","GET_BIT","GET_BLOCK_SIZE","GET_CURRENT_TIME","GET_CURRENT_TIMESTAMP","GLOB","GRADE_UP","GREATEST","GREATEST_COMMON_DIVISOR","GROUP_CONCAT","HAMMING","HASH","HAS_ANY_COLUMN_PRIVILEGE","HAS_COLUMN_PRIVILEGE","HAS_DATABASE_PRIVILEGE","HAS_FOREIGN_DATA_WRAPPER_PRIVILEGE","HAS_FUNCTION_PRIVILEGE","HAS_LANGUAGE_PRIVILEGE","HAS_SCHEMA_PRIVILEGE","HAS_SEQUENCE_PRIVILEGE","HAS_SERVER_PRIVILEGE","HAS_TABLESPACE_PRIVILEGE","HAS_TABLE_PRIVILEGE","HEX","HISTOGRAM","HOUR","ICU_CALENDAR_NAMES","ICU_SORT_KEY","ILIKE_ESCAPE","IMPORT_DATABASE","INDEX_SCAN","INET_CLIENT_ADDR","INET_CLIENT_PORT","INET_SERVER_ADDR","INET_SERVER_PORT","INSTR","IN_SEARCH_PATH","ISFINITE","ISINF","ISNAN","ISODOW","ISOYEAR","JACCARD","JARO_SIMILARITY","JARO_WINKLER_SIMILARITY","JSON_ARRAY","JSON_ARRAY_LENGTH","JSON_CONTAINS","JSON_DESERIALIZE_SQL","JSON_EXECUTE_SERIALIZED_SQL","JSON_EXTRACT","JSON_EXTRACT_PATH","JSON_EXTRACT_PATH_TEXT","JSON_EXTRACT_STRING","JSON_GROUP_ARRAY","JSON_GROUP_OBJECT","JSON_GROUP_STRUCTURE","JSON_KEYS","JSON_MERGE_PATCH","JSON_OBJECT","JSON_QUOTE","JSON_SERIALIZE_PLAN","JSON_SERIALIZE_SQL","JSON_STRUCTURE","JSON_TRANSFORM","JSON_TRANSFORM_STRICT","JSON_TYPE","JSON_VALID","JULIAN","KAHAN_SUM","KURTOSIS","KURTOSIS_POP","LAST","LAST_DAY","LCASE","LCM","LEAST","LEAST_COMMON_MULTIPLE","LEFT","LEFT_GRAPHEME","LEN","LENGTH","LENGTH_GRAPHEME","LEVENSHTEIN","LGAMMA","LIKE_ESCAPE","LIST","LISTAGG","LIST_AGGR","LIST_AGGREGATE","LIST_ANY_VALUE","LIST_APPEND","LIST_APPLY","LIST_APPROX_COUNT_DISTINCT","LIST_AVG","LIST_BIT_AND","LIST_BIT_OR","LIST_BIT_XOR","LIST_BOOL_AND","LIST_BOOL_OR","LIST_CAT","LIST_CONCAT","LIST_CONTAINS","LIST_COSINE_SIMILARITY","LIST_COUNT","LIST_DISTANCE","LIST_DISTINCT","LIST_DOT_PRODUCT","LIST_ELEMENT","LIST_ENTROPY","LIST_EXTRACT","LIST_FILTER","LIST_FIRST","LIST_GRADE_UP","LIST_HAS","LIST_HAS_ALL","LIST_HAS_ANY","LIST_HISTOGRAM","LIST_INDEXOF","LIST_INNER_PRODUCT","LIST_INTERSECT","LIST_KURTOSIS","LIST_KURTOSIS_POP","LIST_LAST","LIST_MAD","LIST_MAX","LIST_MEDIAN","LIST_MIN","LIST_MODE","LIST_PACK","LIST_POSITION","LIST_PREPEND","LIST_PRODUCT","LIST_REDUCE","LIST_RESIZE","LIST_REVERSE","LIST_REVERSE_SORT","LIST_SELECT","LIST_SEM","LIST_SKEWNESS","LIST_SLICE","LIST_SORT","LIST_STDDEV_POP","LIST_STDDEV_SAMP","LIST_STRING_AGG","LIST_SUM","LIST_TRANSFORM","LIST_UNIQUE","LIST_VALUE","LIST_VAR_POP","LIST_VAR_SAMP","LIST_WHERE","LIST_ZIP","LN","LOG","LOG10","LOG2","LOWER","LPAD","LSMODE","LTRIM","MAD","MAKE_DATE","MAKE_TIME","MAKE_TIMESTAMP","MAKE_TIMESTAMPTZ","MAP","MAP_CONCAT","MAP_ENTRIES","MAP_EXTRACT","MAP_FROM_ENTRIES","MAP_KEYS","MAP_VALUES","MAX","MAX_BY","MD5","MD5_NUMBER","MD5_NUMBER_LOWER","MD5_NUMBER_UPPER","MEAN","MEDIAN","METADATA_INFO","MICROSECOND","MILLENNIUM","MILLISECOND","MIN","MINUTE","MIN_BY","MISMATCHES","MOD","MODE","MONTH","MONTHNAME","MULTIPLY","NEXTAFTER","NEXTVAL","NFC_NORMALIZE","NOT_ILIKE_ESCAPE","NOT_LIKE_ESCAPE","NOW","NULLIF","OBJ_DESCRIPTION","OCTET_LENGTH","ORD","PARQUET_FILE_METADATA","PARQUET_KV_METADATA","PARQUET_METADATA","PARQUET_SCAN","PARQUET_SCHEMA","PARSE_DIRNAME","PARSE_DIRPATH","PARSE_FILENAME","PARSE_PATH","PG_COLLATION_IS_VISIBLE","PG_CONF_LOAD_TIME","PG_CONVERSION_IS_VISIBLE","PG_FUNCTION_IS_VISIBLE","PG_GET_CONSTRAINTDEF","PG_GET_EXPR","PG_GET_VIEWDEF","PG_HAS_ROLE","PG_IS_OTHER_TEMP_SCHEMA","PG_MY_TEMP_SCHEMA","PG_OPCLASS_IS_VISIBLE","PG_OPERATOR_IS_VISIBLE","PG_OPFAMILY_IS_VISIBLE","PG_POSTMASTER_START_TIME","PG_SIZE_PRETTY","PG_TABLE_IS_VISIBLE","PG_TIMEZONE_NAMES","PG_TS_CONFIG_IS_VISIBLE","PG_TS_DICT_IS_VISIBLE","PG_TS_PARSER_IS_VISIBLE","PG_TS_TEMPLATE_IS_VISIBLE","PG_TYPEOF","PG_TYPE_IS_VISIBLE","PI","PLATFORM","POSITION","POW","POWER","PRAGMA_COLLATIONS","PRAGMA_DATABASE_SIZE","PRAGMA_METADATA_INFO","PRAGMA_PLATFORM","PRAGMA_SHOW","PRAGMA_STORAGE_INFO","PRAGMA_TABLE_INFO","PRAGMA_USER_AGENT","PRAGMA_VERSION","PREFIX","PRINTF","PRODUCT","QUANTILE","QUANTILE_CONT","QUANTILE_DISC","QUARTER","RADIANS","RANDOM","RANGE","READFILE","READ_BLOB","READ_CSV","READ_CSV_AUTO","READ_JSON","READ_JSON_AUTO","READ_JSON_OBJECTS","READ_JSON_OBJECTS_AUTO","READ_NDJSON","READ_NDJSON_AUTO","READ_NDJSON_OBJECTS","READ_PARQUET","READ_TEXT","REDUCE","REGEXP_ESCAPE","REGEXP_EXTRACT","REGEXP_EXTRACT_ALL","REGEXP_FULL_MATCH","REGEXP_MATCHES","REGEXP_REPLACE","REGEXP_SPLIT_TO_ARRAY","REGEXP_SPLIT_TO_TABLE","REGR_AVGX","REGR_AVGY","REGR_COUNT","REGR_INTERCEPT","REGR_R2","REGR_SLOPE","REGR_SXX","REGR_SXY","REGR_SYY","REPEAT","REPEAT_ROW","REPLACE","RESERVOIR_QUANTILE","REVERSE","RIGHT","RIGHT_GRAPHEME","ROUND","ROUNDBANKERS","ROUND_EVEN","ROW","ROW_TO_JSON","RPAD","RTRIM","SECOND","SEM","SEQ_SCAN","SESSION_USER","SETSEED","SET_BIT","SHA256","SHA3","SHELL_ADD_SCHEMA","SHELL_ESCAPE_CRNL","SHELL_IDQUOTE","SHELL_MODULE_SCHEMA","SHELL_PUTSNL","SHOBJ_DESCRIPTION","SHOW","SHOW_DATABASES","SHOW_TABLES","SHOW_TABLES_EXPANDED","SIGN","SIGNBIT","SIN","SKEWNESS","SNIFF_CSV","SPLIT","SPLIT_PART","SQL_AUTO_COMPLETE","SQRT","STARTS_WITH","STATS","STDDEV","STDDEV_POP","STDDEV_SAMP","STORAGE_INFO","STRFTIME","STRING_AGG","STRING_SPLIT","STRING_SPLIT_REGEX","STRING_TO_ARRAY","STRIP_ACCENTS","STRLEN","STRPOS","STRPTIME","STRUCT_EXTRACT","STRUCT_INSERT","STRUCT_PACK","STR_SPLIT","STR_SPLIT_REGEX","SUBSTR","SUBSTRING","SUBSTRING_GRAPHEME","SUBTRACT","SUFFIX","SUM","SUMKAHAN","SUMMARY","SUM_NO_OVERFLOW","TABLE_INFO","TAN","TEST_ALL_TYPES","TEST_VECTOR_TYPES","TIMEZONE","TIMEZONE_HOUR","TIMEZONE_MINUTE","TIME_BUCKET","TODAY","TO_BASE","TO_BASE64","TO_BINARY","TO_CENTURIES","TO_DAYS","TO_DECADES","TO_HEX","TO_HOURS","TO_JSON","TO_MICROSECONDS","TO_MILLENNIA","TO_MILLISECONDS","TO_MINUTES","TO_MONTHS","TO_SECONDS","TO_TIMESTAMP","TO_WEEKS","TO_YEARS","TRANSACTION_TIMESTAMP","TRANSLATE","TRIM","TRUNC","TRY_STRPTIME","TXID_CURRENT","TYPEOF","UCASE","UNBIN","UNHEX","UNICODE","UNION_EXTRACT","UNION_TAG","UNION_VALUE","UNNEST","UNPIVOT_LIST","UPPER","USER","USER_AGENT","UUID","VARIANCE","VAR_POP","VAR_SAMP","VECTOR_TYPE","VERIFY_EXTERNAL","VERIFY_FETCH_ROW","VERIFY_PARALLELISM","VERIFY_SERIALIZER","VERSION","WEEK","WEEKDAY","WEEKOFYEAR","WHICH_SECRET","WRITEFILE","XOR","YEAR","YEARWEEK","CAST","COALESCE","RANK","ROW_NUMBER"]});var dj,fj,Ej=G(()=>{dj=["ALL","ANALYSE","ANALYZE","AND","ANY","AS","ASC","ATTACH","ASYMMETRIC","BOTH","CASE","CAST","CHECK","COLLATE","COLUMN","CONSTRAINT","CREATE","DEFAULT","DEFERRABLE","DESC","DESCRIBE","DETACH","DISTINCT","DO","ELSE","END","EXCEPT","FALSE","FETCH","FOR","FOREIGN","FROM","GRANT","GROUP","HAVING","IN","INITIALLY","INTERSECT","INTO","IS","LATERAL","LEADING","LIMIT","NOT","NULL","OFFSET","ON","ONLY","OR","ORDER","PIVOT","PIVOT_LONGER","PIVOT_WIDER","PLACING","PRIMARY","REFERENCES","RETURNING","SELECT","SHOW","SOME","SUMMARIZE","SYMMETRIC","TABLE","THEN","TO","TRAILING","TRUE","UNION","UNIQUE","UNPIVOT","USING","VARIADIC","WHEN","WHERE","WINDOW","WITH"],fj=["ARRAY","BIGINT","BINARY","BIT","BITSTRING","BLOB","BOOL","BOOLEAN","BPCHAR","BYTEA","CHAR","DATE","DATETIME","DEC","DECIMAL","DOUBLE","ENUM","FLOAT","FLOAT4","FLOAT8","GUID","HUGEINT","INET","INT","INT1","INT128","INT16","INT2","INT32","INT4","INT64","INT8","INTEGER","INTEGRAL","INTERVAL","JSON","LIST","LOGICAL","LONG","MAP","NUMERIC","NVARCHAR","OID","REAL","ROW","SHORT","SIGNED","SMALLINT","STRING","STRUCT","TEXT","TIME","TIMESTAMP_MS","TIMESTAMP_NS","TIMESTAMP_S","TIMESTAMP_US","TIMESTAMP","TIMESTAMPTZ","TIMETZ","TINYINT","UBIGINT","UHUGEINT","UINT128","UINT16","UINT32","UINT64","UINT8","UINTEGER","UNION","USMALLINT","UTINYINT","UUID","VARBINARY","VARCHAR"]});var Xye,jye,hj,Gb,zye,Kye,Jye,Qye,eR,Wb=G(()=>{xt();uj();Ej();Xye=x(["SELECT [ALL | DISTINCT]"]),jye=x(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY [ALL]","HAVING","WINDOW","PARTITION BY","ORDER BY [ALL]","LIMIT","OFFSET","USING SAMPLE","QUALIFY","INSERT [OR REPLACE] INTO","VALUES","DEFAULT VALUES","SET","RETURNING"]),hj=x(["CREATE [OR REPLACE] [TEMPORARY | TEMP] TABLE [IF NOT EXISTS]"]),Gb=x(["UPDATE","ON CONFLICT","DELETE FROM","DROP TABLE [IF EXISTS]","TRUNCATE","ALTER TABLE","ADD [COLUMN] [IF NOT EXISTS]","ADD PRIMARY KEY","DROP [COLUMN] [IF EXISTS]","ALTER [COLUMN]","RENAME [COLUMN]","RENAME TO","SET [DATA] TYPE","{SET | DROP} DEFAULT","{SET | DROP} NOT NULL","CREATE [OR REPLACE] [TEMPORARY | TEMP] {MACRO | FUNCTION}","DROP MACRO [TABLE] [IF EXISTS]","DROP FUNCTION [IF EXISTS]","CREATE [UNIQUE] INDEX [IF NOT EXISTS]","DROP INDEX [IF EXISTS]","CREATE [OR REPLACE] SCHEMA [IF NOT EXISTS]","DROP SCHEMA [IF EXISTS]","CREATE [OR REPLACE] [PERSISTENT | TEMPORARY] SECRET [IF NOT EXISTS]","DROP [PERSISTENT | TEMPORARY] SECRET [IF EXISTS]","CREATE [OR REPLACE] [TEMPORARY | TEMP] SEQUENCE","DROP SEQUENCE [IF EXISTS]","CREATE [OR REPLACE] [TEMPORARY | TEMP] VIEW [IF NOT EXISTS]","DROP VIEW [IF EXISTS]","ALTER VIEW","CREATE TYPE","DROP TYPE [IF EXISTS]","ANALYZE","ATTACH [DATABASE] [IF NOT EXISTS]","DETACH [DATABASE] [IF EXISTS]","CALL","[FORCE] CHECKPOINT","COMMENT ON [TABLE | COLUMN | VIEW | INDEX | SEQUENCE | TYPE | MACRO | MACRO TABLE]","COPY [FROM DATABASE]","DESCRIBE","EXPORT DATABASE","IMPORT DATABASE","INSTALL","LOAD","PIVOT","PIVOT_WIDER","UNPIVOT","EXPLAIN [ANALYZE]","SET {LOCAL | SESSION | GLOBAL}","RESET [LOCAL | SESSION | GLOBAL]","{SET | RESET} VARIABLE","SUMMARIZE","BEGIN TRANSACTION","ROLLBACK","COMMIT","ABORT","USE","VACUUM [ANALYZE]","PREPARE","EXECUTE","DEALLOCATE [PREPARE]"]),zye=x(["UNION [ALL | BY NAME]","EXCEPT [ALL]","INTERSECT [ALL]"]),Kye=x(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","{NATURAL | ASOF} [INNER] JOIN","{NATURAL | ASOF} {LEFT | RIGHT | FULL} [OUTER] JOIN","POSITIONAL JOIN","ANTI JOIN","SEMI JOIN"]),Jye=x(["{ROWS | RANGE | GROUPS} BETWEEN","SIMILAR TO","IS [NOT] DISTINCT FROM"]),Qye=x(["TIMESTAMP WITH TIME ZONE"]),eR={name:"duckdb",tokenizerOptions:{reservedSelect:Xye,reservedClauses:[...jye,...hj,...Gb],reservedSetOperations:zye,reservedJoins:Kye,reservedKeywordPhrases:Jye,reservedDataTypePhrases:Qye,supportsXor:!0,reservedKeywords:dj,reservedDataTypes:fj,reservedFunctionNames:cj,nestedBlockComments:!0,extraParens:["[]","{}"],underscoresInNumbers:!0,stringTypes:["$$","''-qq",{quote:"''-qq-bs",prefixes:["E"],requirePrefix:!0},{quote:"''-raw",prefixes:["B","X"],requirePrefix:!0}],identTypes:['""-qq'],identChars:{rest:"$"},paramTypes:{positional:!0,numbered:["$"],quoted:["$"]},operators:["//","%","**","^","!","&","|","~","<<",">>","::","==","->","->>",":",":=","=>","~~","!~~","~~*","!~~*","~~~","~","!~","~*","!~*","^@","||",">>=","<<="]},formatOptions:{alwaysDenseOperators:["::"],onelineClauses:[...hj,...Gb],tabularOnelineClauses:Gb}}});var pj,Tj=G(()=>{pj=["ABS","ACOS","ASIN","ATAN","BIN","BROUND","CBRT","CEIL","CEILING","CONV","COS","DEGREES","EXP","FACTORIAL","FLOOR","GREATEST","HEX","LEAST","LN","LOG","LOG10","LOG2","NEGATIVE","PI","PMOD","POSITIVE","POW","POWER","RADIANS","RAND","ROUND","SHIFTLEFT","SHIFTRIGHT","SHIFTRIGHTUNSIGNED","SIGN","SIN","SQRT","TAN","UNHEX","WIDTH_BUCKET","ARRAY_CONTAINS","MAP_KEYS","MAP_VALUES","SIZE","SORT_ARRAY","BINARY","CAST","ADD_MONTHS","DATE","DATE_ADD","DATE_FORMAT","DATE_SUB","DATEDIFF","DAY","DAYNAME","DAYOFMONTH","DAYOFYEAR","EXTRACT","FROM_UNIXTIME","FROM_UTC_TIMESTAMP","HOUR","LAST_DAY","MINUTE","MONTH","MONTHS_BETWEEN","NEXT_DAY","QUARTER","SECOND","TIMESTAMP","TO_DATE","TO_UTC_TIMESTAMP","TRUNC","UNIX_TIMESTAMP","WEEKOFYEAR","YEAR","ASSERT_TRUE","COALESCE","IF","ISNOTNULL","ISNULL","NULLIF","NVL","ASCII","BASE64","CHARACTER_LENGTH","CHR","CONCAT","CONCAT_WS","CONTEXT_NGRAMS","DECODE","ELT","ENCODE","FIELD","FIND_IN_SET","FORMAT_NUMBER","GET_JSON_OBJECT","IN_FILE","INITCAP","INSTR","LCASE","LENGTH","LEVENSHTEIN","LOCATE","LOWER","LPAD","LTRIM","NGRAMS","OCTET_LENGTH","PARSE_URL","PRINTF","QUOTE","REGEXP_EXTRACT","REGEXP_REPLACE","REPEAT","REVERSE","RPAD","RTRIM","SENTENCES","SOUNDEX","SPACE","SPLIT","STR_TO_MAP","SUBSTR","SUBSTRING","TRANSLATE","TRIM","UCASE","UNBASE64","UPPER","MASK","MASK_FIRST_N","MASK_HASH","MASK_LAST_N","MASK_SHOW_FIRST_N","MASK_SHOW_LAST_N","AES_DECRYPT","AES_ENCRYPT","CRC32","CURRENT_DATABASE","CURRENT_USER","HASH","JAVA_METHOD","LOGGED_IN_USER","MD5","REFLECT","SHA","SHA1","SHA2","SURROGATE_KEY","VERSION","AVG","COLLECT_LIST","COLLECT_SET","CORR","COUNT","COVAR_POP","COVAR_SAMP","HISTOGRAM_NUMERIC","MAX","MIN","NTILE","PERCENTILE","PERCENTILE_APPROX","REGR_AVGX","REGR_AVGY","REGR_COUNT","REGR_INTERCEPT","REGR_R2","REGR_SLOPE","REGR_SXX","REGR_SXY","REGR_SYY","STDDEV_POP","STDDEV_SAMP","SUM","VAR_POP","VAR_SAMP","VARIANCE","EXPLODE","INLINE","JSON_TUPLE","PARSE_URL_TUPLE","POSEXPLODE","STACK","LEAD","LAG","FIRST_VALUE","LAST_VALUE","RANK","ROW_NUMBER","DENSE_RANK","CUME_DIST","PERCENT_RANK","NTILE"]});var Sj,Rj,Aj=G(()=>{Sj=["ADD","ADMIN","AFTER","ANALYZE","ARCHIVE","ASC","BEFORE","BUCKET","BUCKETS","CASCADE","CHANGE","CLUSTER","CLUSTERED","CLUSTERSTATUS","COLLECTION","COLUMNS","COMMENT","COMPACT","COMPACTIONS","COMPUTE","CONCATENATE","CONTINUE","DATA","DATABASES","DATETIME","DAY","DBPROPERTIES","DEFERRED","DEFINED","DELIMITED","DEPENDENCY","DESC","DIRECTORIES","DIRECTORY","DISABLE","DISTRIBUTE","ELEM_TYPE","ENABLE","ESCAPED","EXCLUSIVE","EXPLAIN","EXPORT","FIELDS","FILE","FILEFORMAT","FIRST","FORMAT","FORMATTED","FUNCTIONS","HOLD_DDLTIME","HOUR","IDXPROPERTIES","IGNORE","INDEX","INDEXES","INPATH","INPUTDRIVER","INPUTFORMAT","ITEMS","JAR","KEYS","KEY_TYPE","LIMIT","LINES","LOAD","LOCATION","LOCK","LOCKS","LOGICAL","LONG","MAPJOIN","MATERIALIZED","METADATA","MINUS","MINUTE","MONTH","MSCK","NOSCAN","NO_DROP","OFFLINE","OPTION","OUTPUTDRIVER","OUTPUTFORMAT","OVERWRITE","OWNER","PARTITIONED","PARTITIONS","PLUS","PRETTY","PRINCIPALS","PROTECTION","PURGE","READ","READONLY","REBUILD","RECORDREADER","RECORDWRITER","RELOAD","RENAME","REPAIR","REPLACE","REPLICATION","RESTRICT","REWRITE","ROLE","ROLES","SCHEMA","SCHEMAS","SECOND","SEMI","SERDE","SERDEPROPERTIES","SERVER","SETS","SHARED","SHOW","SHOW_DATABASE","SKEWED","SORT","SORTED","SSL","STATISTICS","STORED","STREAMTABLE","STRING","TABLES","TBLPROPERTIES","TEMPORARY","TERMINATED","TINYINT","TOUCH","TRANSACTIONS","UNARCHIVE","UNDO","UNIONTYPE","UNLOCK","UNSET","UNSIGNED","URI","USE","UTC","UTCTIMESTAMP","VALUE_TYPE","VIEW","WHILE","YEAR","AUTOCOMMIT","ISOLATION","LEVEL","OFFSET","SNAPSHOT","TRANSACTION","WORK","WRITE","ABORT","KEY","LAST","NORELY","NOVALIDATE","NULLS","RELY","VALIDATE","DETAIL","DOW","EXPRESSION","OPERATOR","QUARTER","SUMMARY","VECTORIZATION","WEEK","YEARS","MONTHS","WEEKS","DAYS","HOURS","MINUTES","SECONDS","TIMESTAMPTZ","ZONE","ALL","ALTER","AND","AS","AUTHORIZATION","BETWEEN","BOTH","BY","CASE","CAST","COLUMN","CONF","CREATE","CROSS","CUBE","CURRENT","CURRENT_DATE","CURRENT_TIMESTAMP","CURSOR","DATABASE","DELETE","DESCRIBE","DISTINCT","DROP","ELSE","END","EXCHANGE","EXISTS","EXTENDED","EXTERNAL","FALSE","FETCH","FOLLOWING","FOR","FROM","FULL","FUNCTION","GRANT","GROUP","GROUPING","HAVING","IF","IMPORT","IN","INNER","INSERT","INTERSECT","INTO","IS","JOIN","LATERAL","LEFT","LESS","LIKE","LOCAL","MACRO","MORE","NONE","NOT","NULL","OF","ON","OR","ORDER","OUT","OUTER","OVER","PARTIALSCAN","PARTITION","PERCENT","PRECEDING","PRESERVE","PROCEDURE","RANGE","READS","REDUCE","REVOKE","RIGHT","ROLLUP","ROW","ROWS","SELECT","SET","TABLE","TABLESAMPLE","THEN","TO","TRANSFORM","TRIGGER","TRUE","TRUNCATE","UNBOUNDED","UNION","UNIQUEJOIN","UPDATE","USER","USING","UTC_TMESTAMP","VALUES","WHEN","WHERE","WINDOW","WITH","COMMIT","ONLY","REGEXP","RLIKE","ROLLBACK","START","CACHE","CONSTRAINT","FOREIGN","PRIMARY","REFERENCES","DAYOFWEEK","EXTRACT","FLOOR","VIEWS","TIME","SYNC","TEXTFILE","SEQUENCEFILE","ORC","CSV","TSV","PARQUET","AVRO","RCFILE","JSONFILE","INPUTFORMAT","OUTPUTFORMAT"],Rj=["ARRAY","BIGINT","BINARY","BOOLEAN","CHAR","DATE","DECIMAL","DOUBLE","FLOAT","INT","INTEGER","INTERVAL","MAP","NUMERIC","PRECISION","SMALLINT","STRUCT","TIMESTAMP","VARCHAR"]});var Zye,e0e,mj,$b,t0e,r0e,n0e,i0e,tR,kb=G(()=>{xt();Tj();Aj();Zye=x(["SELECT [ALL | DISTINCT]"]),e0e=x(["WITH","FROM","WHERE","GROUP BY","HAVING","WINDOW","PARTITION BY","ORDER BY","SORT BY","CLUSTER BY","DISTRIBUTE BY","LIMIT","INSERT INTO [TABLE]","VALUES","SET","MERGE INTO","WHEN [NOT] MATCHED [THEN]","UPDATE SET","INSERT [VALUES]","INSERT OVERWRITE [LOCAL] DIRECTORY","LOAD DATA [LOCAL] INPATH","[OVERWRITE] INTO TABLE"]),mj=x(["CREATE [TEMPORARY] [EXTERNAL] TABLE [IF NOT EXISTS]"]),$b=x(["CREATE [MATERIALIZED] VIEW [IF NOT EXISTS]","UPDATE","DELETE FROM","DROP TABLE [IF EXISTS]","ALTER TABLE","RENAME TO","TRUNCATE [TABLE]","ALTER","CREATE","USE","DESCRIBE","DROP","FETCH","SHOW","STORED AS","STORED BY","ROW FORMAT"]),t0e=x(["UNION [ALL | DISTINCT]"]),r0e=x(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","LEFT SEMI JOIN"]),n0e=x(["{ROWS | RANGE} BETWEEN"]),i0e=x([]),tR={name:"hive",tokenizerOptions:{reservedSelect:Zye,reservedClauses:[...e0e,...mj,...$b],reservedSetOperations:t0e,reservedJoins:r0e,reservedKeywordPhrases:n0e,reservedDataTypePhrases:i0e,reservedKeywords:Sj,reservedDataTypes:Rj,reservedFunctionNames:pj,extraParens:["[]"],stringTypes:['""-bs',"''-bs"],identTypes:["``"],variableTypes:[{quote:"{}",prefixes:["$"],requirePrefix:!0}],operators:["%","~","^","|","&","<=>","==","!","||"]},formatOptions:{onelineClauses:[...mj,...$b],tabularOnelineClauses:$b}}});function oo(t){return t.map((e,r)=>{let n=t[r+1]||Li;if(qn.SET(e)&&n.text==="(")return Object.assign(Object.assign({},e),{type:k.RESERVED_FUNCTION_NAME});let i=t[r-1]||Li;return qn.VALUES(e)&&i.text==="="?Object.assign(Object.assign({},e),{type:k.RESERVED_FUNCTION_NAME}):e})}var cf=G(()=>{Cn()});var gj,_j,Ij=G(()=>{gj=["ACCESSIBLE","ADD","ALL","ALTER","ANALYZE","AND","AS","ASC","ASENSITIVE","BEFORE","BETWEEN","BOTH","BY","CALL","CASCADE","CASE","CHANGE","CHECK","COLLATE","COLUMN","CONDITION","CONSTRAINT","CONTINUE","CONVERT","CREATE","CROSS","CURRENT_DATE","CURRENT_ROLE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURSOR","DATABASE","DATABASES","DAY_HOUR","DAY_MICROSECOND","DAY_MINUTE","DAY_SECOND","DECLARE","DEFAULT","DELAYED","DELETE","DELETE_DOMAIN_ID","DESC","DESCRIBE","DETERMINISTIC","DISTINCT","DISTINCTROW","DIV","DO_DOMAIN_IDS","DROP","DUAL","EACH","ELSE","ELSEIF","ENCLOSED","ESCAPED","EXCEPT","EXISTS","EXIT","EXPLAIN","FALSE","FETCH","FOR","FORCE","FOREIGN","FROM","FULLTEXT","GENERAL","GRANT","GROUP","HAVING","HIGH_PRIORITY","HOUR_MICROSECOND","HOUR_MINUTE","HOUR_SECOND","IF","IGNORE","IGNORE_DOMAIN_IDS","IGNORE_SERVER_IDS","IN","INDEX","INFILE","INNER","INOUT","INSENSITIVE","INSERT","INTERSECT","INTERVAL","INTO","IS","ITERATE","JOIN","KEY","KEYS","KILL","LEADING","LEAVE","LEFT","LIKE","LIMIT","LINEAR","LINES","LOAD","LOCALTIME","LOCALTIMESTAMP","LOCK","LOOP","LOW_PRIORITY","MASTER_HEARTBEAT_PERIOD","MASTER_SSL_VERIFY_SERVER_CERT","MATCH","MAXVALUE","MINUTE_MICROSECOND","MINUTE_SECOND","MOD","MODIFIES","NATURAL","NOT","NO_WRITE_TO_BINLOG","NULL","OFFSET","ON","OPTIMIZE","OPTION","OPTIONALLY","OR","ORDER","OUT","OUTER","OUTFILE","OVER","PAGE_CHECKSUM","PARSE_VCOL_EXPR","PARTITION","POSITION","PRIMARY","PROCEDURE","PURGE","RANGE","READ","READS","READ_WRITE","RECURSIVE","REF_SYSTEM_ID","REFERENCES","REGEXP","RELEASE","RENAME","REPEAT","REPLACE","REQUIRE","RESIGNAL","RESTRICT","RETURN","RETURNING","REVOKE","RIGHT","RLIKE","ROW_NUMBER","ROWS","SCHEMA","SCHEMAS","SECOND_MICROSECOND","SELECT","SENSITIVE","SEPARATOR","SET","SHOW","SIGNAL","SLOW","SPATIAL","SPECIFIC","SQL","SQLEXCEPTION","SQLSTATE","SQLWARNING","SQL_BIG_RESULT","SQL_CALC_FOUND_ROWS","SQL_SMALL_RESULT","SSL","STARTING","STATS_AUTO_RECALC","STATS_PERSISTENT","STATS_SAMPLE_PAGES","STRAIGHT_JOIN","TABLE","TERMINATED","THEN","TO","TRAILING","TRIGGER","TRUE","UNDO","UNION","UNIQUE","UNLOCK","UNSIGNED","UPDATE","USAGE","USE","USING","UTC_DATE","UTC_TIME","UTC_TIMESTAMP","VALUES","WHEN","WHERE","WHILE","WINDOW","WITH","WRITE","XOR","YEAR_MONTH","ZEROFILL"],_j=["BIGINT","BINARY","BIT","BLOB","CHAR BYTE","CHAR","CHARACTER","DATETIME","DEC","DECIMAL","DOUBLE PRECISION","DOUBLE","ENUM","FIXED","FLOAT","FLOAT4","FLOAT8","INT","INT1","INT2","INT3","INT4","INT8","INTEGER","LONG","LONGBLOB","LONGTEXT","MEDIUMBLOB","MEDIUMINT","MEDIUMTEXT","MIDDLEINT","NATIONAL CHAR","NATIONAL VARCHAR","NUMERIC","PRECISION","REAL","SMALLINT","TEXT","TIMESTAMP","TINYBLOB","TINYINT","TINYTEXT","VARBINARY","VARCHAR","VARCHARACTER","VARYING","YEAR"]});var Nj,Oj=G(()=>{Nj=["ADDDATE","ADD_MONTHS","BIT_AND","BIT_OR","BIT_XOR","CAST","COUNT","CUME_DIST","CURDATE","CURTIME","DATE_ADD","DATE_SUB","DATE_FORMAT","DECODE","DENSE_RANK","EXTRACT","FIRST_VALUE","GROUP_CONCAT","JSON_ARRAYAGG","JSON_OBJECTAGG","LAG","LEAD","MAX","MEDIAN","MID","MIN","NOW","NTH_VALUE","NTILE","POSITION","PERCENT_RANK","PERCENTILE_CONT","PERCENTILE_DISC","RANK","ROW_NUMBER","SESSION_USER","STD","STDDEV","STDDEV_POP","STDDEV_SAMP","SUBDATE","SUBSTR","SUBSTRING","SUM","SYSTEM_USER","TRIM","TRIM_ORACLE","VARIANCE","VAR_POP","VAR_SAMP","ABS","ACOS","ADDTIME","AES_DECRYPT","AES_ENCRYPT","ASIN","ATAN","ATAN2","BENCHMARK","BIN","BINLOG_GTID_POS","BIT_COUNT","BIT_LENGTH","CEIL","CEILING","CHARACTER_LENGTH","CHAR_LENGTH","CHR","COERCIBILITY","COLUMN_CHECK","COLUMN_EXISTS","COLUMN_LIST","COLUMN_JSON","COMPRESS","CONCAT","CONCAT_OPERATOR_ORACLE","CONCAT_WS","CONNECTION_ID","CONV","CONVERT_TZ","COS","COT","CRC32","DATEDIFF","DAYNAME","DAYOFMONTH","DAYOFWEEK","DAYOFYEAR","DEGREES","DECODE_HISTOGRAM","DECODE_ORACLE","DES_DECRYPT","DES_ENCRYPT","ELT","ENCODE","ENCRYPT","EXP","EXPORT_SET","EXTRACTVALUE","FIELD","FIND_IN_SET","FLOOR","FORMAT","FOUND_ROWS","FROM_BASE64","FROM_DAYS","FROM_UNIXTIME","GET_LOCK","GREATEST","HEX","IFNULL","INSTR","ISNULL","IS_FREE_LOCK","IS_USED_LOCK","JSON_ARRAY","JSON_ARRAY_APPEND","JSON_ARRAY_INSERT","JSON_COMPACT","JSON_CONTAINS","JSON_CONTAINS_PATH","JSON_DEPTH","JSON_DETAILED","JSON_EXISTS","JSON_EXTRACT","JSON_INSERT","JSON_KEYS","JSON_LENGTH","JSON_LOOSE","JSON_MERGE","JSON_MERGE_PATCH","JSON_MERGE_PRESERVE","JSON_QUERY","JSON_QUOTE","JSON_OBJECT","JSON_REMOVE","JSON_REPLACE","JSON_SET","JSON_SEARCH","JSON_TYPE","JSON_UNQUOTE","JSON_VALID","JSON_VALUE","LAST_DAY","LAST_INSERT_ID","LCASE","LEAST","LENGTH","LENGTHB","LN","LOAD_FILE","LOCATE","LOG","LOG10","LOG2","LOWER","LPAD","LPAD_ORACLE","LTRIM","LTRIM_ORACLE","MAKEDATE","MAKETIME","MAKE_SET","MASTER_GTID_WAIT","MASTER_POS_WAIT","MD5","MONTHNAME","NAME_CONST","NVL","NVL2","OCT","OCTET_LENGTH","ORD","PERIOD_ADD","PERIOD_DIFF","PI","POW","POWER","QUOTE","REGEXP_INSTR","REGEXP_REPLACE","REGEXP_SUBSTR","RADIANS","RAND","RELEASE_ALL_LOCKS","RELEASE_LOCK","REPLACE_ORACLE","REVERSE","ROUND","RPAD","RPAD_ORACLE","RTRIM","RTRIM_ORACLE","SEC_TO_TIME","SHA","SHA1","SHA2","SIGN","SIN","SLEEP","SOUNDEX","SPACE","SQRT","STRCMP","STR_TO_DATE","SUBSTR_ORACLE","SUBSTRING_INDEX","SUBTIME","SYS_GUID","TAN","TIMEDIFF","TIME_FORMAT","TIME_TO_SEC","TO_BASE64","TO_CHAR","TO_DAYS","TO_SECONDS","UCASE","UNCOMPRESS","UNCOMPRESSED_LENGTH","UNHEX","UNIX_TIMESTAMP","UPDATEXML","UPPER","UUID","UUID_SHORT","VERSION","WEEKDAY","WEEKOFYEAR","WSREP_LAST_WRITTEN_GTID","WSREP_LAST_SEEN_GTID","WSREP_SYNC_WAIT_UPTO_GTID","YEARWEEK","COALESCE","NULLIF"]});var s0e,o0e,Cj,Yb,a0e,l0e,c0e,u0e,rR,Vb=G(()=>{xt();cf();Ij();Oj();s0e=x(["SELECT [ALL | DISTINCT | DISTINCTROW]"]),o0e=x(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY","HAVING","PARTITION BY","ORDER BY","LIMIT","OFFSET","FETCH {FIRST | NEXT}","INSERT [LOW_PRIORITY | DELAYED | HIGH_PRIORITY] [IGNORE] [INTO]","REPLACE [LOW_PRIORITY | DELAYED] [INTO]","VALUES","ON DUPLICATE KEY UPDATE","SET","RETURNING"]),Cj=x(["CREATE [OR REPLACE] [TEMPORARY] TABLE [IF NOT EXISTS]"]),Yb=x(["CREATE [OR REPLACE] [SQL SECURITY DEFINER | SQL SECURITY INVOKER] VIEW [IF NOT EXISTS]","UPDATE [LOW_PRIORITY] [IGNORE]","DELETE [LOW_PRIORITY] [QUICK] [IGNORE] FROM","DROP [TEMPORARY] TABLE [IF EXISTS]","ALTER [ONLINE] [IGNORE] TABLE [IF EXISTS]","ADD [COLUMN] [IF NOT EXISTS]","{CHANGE | MODIFY} [COLUMN] [IF EXISTS]","DROP [COLUMN] [IF EXISTS]","RENAME [TO]","RENAME COLUMN","ALTER [COLUMN]","{SET | DROP} DEFAULT","SET {VISIBLE | INVISIBLE}","TRUNCATE [TABLE]","ALTER DATABASE","ALTER DATABASE COMMENT","ALTER EVENT","ALTER FUNCTION","ALTER PROCEDURE","ALTER SCHEMA","ALTER SCHEMA COMMENT","ALTER SEQUENCE","ALTER SERVER","ALTER USER","ALTER VIEW","ANALYZE","ANALYZE TABLE","BACKUP LOCK","BACKUP STAGE","BACKUP UNLOCK","BEGIN","BINLOG","CACHE INDEX","CALL","CHANGE MASTER TO","CHECK TABLE","CHECK VIEW","CHECKSUM TABLE","COMMIT","CREATE AGGREGATE FUNCTION","CREATE DATABASE","CREATE EVENT","CREATE FUNCTION","CREATE INDEX","CREATE PROCEDURE","CREATE ROLE","CREATE SEQUENCE","CREATE SERVER","CREATE SPATIAL INDEX","CREATE TRIGGER","CREATE UNIQUE INDEX","CREATE USER","DEALLOCATE PREPARE","DESCRIBE","DROP DATABASE","DROP EVENT","DROP FUNCTION","DROP INDEX","DROP PREPARE","DROP PROCEDURE","DROP ROLE","DROP SEQUENCE","DROP SERVER","DROP TRIGGER","DROP USER","DROP VIEW","EXECUTE","EXPLAIN","FLUSH","GET DIAGNOSTICS","GET DIAGNOSTICS CONDITION","GRANT","HANDLER","HELP","INSTALL PLUGIN","INSTALL SONAME","KILL","LOAD DATA INFILE","LOAD INDEX INTO CACHE","LOAD XML INFILE","LOCK TABLE","OPTIMIZE TABLE","PREPARE","PURGE BINARY LOGS","PURGE MASTER LOGS","RELEASE SAVEPOINT","RENAME TABLE","RENAME USER","REPAIR TABLE","REPAIR VIEW","RESET MASTER","RESET QUERY CACHE","RESET REPLICA","RESET SLAVE","RESIGNAL","REVOKE","ROLLBACK","SAVEPOINT","SET CHARACTER SET","SET DEFAULT ROLE","SET GLOBAL TRANSACTION","SET NAMES","SET PASSWORD","SET ROLE","SET STATEMENT","SET TRANSACTION","SHOW","SHOW ALL REPLICAS STATUS","SHOW ALL SLAVES STATUS","SHOW AUTHORS","SHOW BINARY LOGS","SHOW BINLOG EVENTS","SHOW BINLOG STATUS","SHOW CHARACTER SET","SHOW CLIENT_STATISTICS","SHOW COLLATION","SHOW COLUMNS","SHOW CONTRIBUTORS","SHOW CREATE DATABASE","SHOW CREATE EVENT","SHOW CREATE FUNCTION","SHOW CREATE PACKAGE","SHOW CREATE PACKAGE BODY","SHOW CREATE PROCEDURE","SHOW CREATE SEQUENCE","SHOW CREATE TABLE","SHOW CREATE TRIGGER","SHOW CREATE USER","SHOW CREATE VIEW","SHOW DATABASES","SHOW ENGINE","SHOW ENGINE INNODB STATUS","SHOW ENGINES","SHOW ERRORS","SHOW EVENTS","SHOW EXPLAIN","SHOW FUNCTION CODE","SHOW FUNCTION STATUS","SHOW GRANTS","SHOW INDEX","SHOW INDEXES","SHOW INDEX_STATISTICS","SHOW KEYS","SHOW LOCALES","SHOW MASTER LOGS","SHOW MASTER STATUS","SHOW OPEN TABLES","SHOW PACKAGE BODY CODE","SHOW PACKAGE BODY STATUS","SHOW PACKAGE STATUS","SHOW PLUGINS","SHOW PLUGINS SONAME","SHOW PRIVILEGES","SHOW PROCEDURE CODE","SHOW PROCEDURE STATUS","SHOW PROCESSLIST","SHOW PROFILE","SHOW PROFILES","SHOW QUERY_RESPONSE_TIME","SHOW RELAYLOG EVENTS","SHOW REPLICA","SHOW REPLICA HOSTS","SHOW REPLICA STATUS","SHOW SCHEMAS","SHOW SLAVE","SHOW SLAVE HOSTS","SHOW SLAVE STATUS","SHOW STATUS","SHOW STORAGE ENGINES","SHOW TABLE STATUS","SHOW TABLES","SHOW TRIGGERS","SHOW USER_STATISTICS","SHOW VARIABLES","SHOW WARNINGS","SHOW WSREP_MEMBERSHIP","SHOW WSREP_STATUS","SHUTDOWN","SIGNAL","START ALL REPLICAS","START ALL SLAVES","START REPLICA","START SLAVE","START TRANSACTION","STOP ALL REPLICAS","STOP ALL SLAVES","STOP REPLICA","STOP SLAVE","UNINSTALL PLUGIN","UNINSTALL SONAME","UNLOCK TABLE","USE","XA BEGIN","XA COMMIT","XA END","XA PREPARE","XA RECOVER","XA ROLLBACK","XA START"]),a0e=x(["UNION [ALL | DISTINCT]","EXCEPT [ALL | DISTINCT]","INTERSECT [ALL | DISTINCT]","MINUS [ALL | DISTINCT]"]),l0e=x(["JOIN","{LEFT | RIGHT} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL JOIN","NATURAL {LEFT | RIGHT} [OUTER] JOIN","STRAIGHT_JOIN"]),c0e=x(["ON {UPDATE | DELETE} [SET NULL | SET DEFAULT]","CHARACTER SET","{ROWS | RANGE} BETWEEN","IDENTIFIED BY"]),u0e=x([]),rR={name:"mariadb",tokenizerOptions:{reservedSelect:s0e,reservedClauses:[...o0e,...Cj,...Yb],reservedSetOperations:a0e,reservedJoins:l0e,reservedKeywordPhrases:c0e,reservedDataTypePhrases:u0e,supportsXor:!0,reservedKeywords:gj,reservedDataTypes:_j,reservedFunctionNames:Nj,stringTypes:['""-qq-bs',"''-qq-bs",{quote:"''-raw",prefixes:["B","X"],requirePrefix:!0}],identTypes:["``"],identChars:{first:"$",rest:"$",allowFirstCharNumber:!0},variableTypes:[{regex:"@@?[A-Za-z0-9_.$]+"},{quote:'""-qq-bs',prefixes:["@"],requirePrefix:!0},{quote:"''-qq-bs",prefixes:["@"],requirePrefix:!0},{quote:"``",prefixes:["@"],requirePrefix:!0}],paramTypes:{positional:!0},lineCommentTypes:["--","#"],operators:["%",":=","&","|","^","~","<<",">>","<=>","&&","||","!","*.*"],postProcess:oo},formatOptions:{onelineClauses:[...Cj,...Yb],tabularOnelineClauses:Yb}}});var bj,yj,wj=G(()=>{bj=["ACCESSIBLE","ADD","ALL","ALTER","ANALYZE","AND","AS","ASC","ASENSITIVE","BEFORE","BETWEEN","BOTH","BY","CALL","CASCADE","CASE","CHANGE","CHECK","COLLATE","COLUMN","CONDITION","CONSTRAINT","CONTINUE","CONVERT","CREATE","CROSS","CUBE","CUME_DIST","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURSOR","DATABASE","DATABASES","DAY_HOUR","DAY_MICROSECOND","DAY_MINUTE","DAY_SECOND","DECLARE","DEFAULT","DELAYED","DELETE","DENSE_RANK","DESC","DESCRIBE","DETERMINISTIC","DISTINCT","DISTINCTROW","DIV","DROP","DUAL","EACH","ELSE","ELSEIF","EMPTY","ENCLOSED","ESCAPED","EXCEPT","EXISTS","EXIT","EXPLAIN","FALSE","FETCH","FIRST_VALUE","FOR","FORCE","FOREIGN","FROM","FULLTEXT","FUNCTION","GENERATED","GET","GRANT","GROUP","GROUPING","GROUPS","HAVING","HIGH_PRIORITY","HOUR_MICROSECOND","HOUR_MINUTE","HOUR_SECOND","IF","IGNORE","IN","INDEX","INFILE","INNER","INOUT","INSENSITIVE","INSERT","IN","INTERSECT","INTERVAL","INTO","IO_AFTER_GTIDS","IO_BEFORE_GTIDS","IS","ITERATE","JOIN","JSON_TABLE","KEY","KEYS","KILL","LAG","LAST_VALUE","LATERAL","LEAD","LEADING","LEAVE","LEFT","LIKE","LIMIT","LINEAR","LINES","LOAD","LOCALTIME","LOCALTIMESTAMP","LOCK","LONG","LOOP","LOW_PRIORITY","MASTER_BIND","MASTER_SSL_VERIFY_SERVER_CERT","MATCH","MAXVALUE","MINUTE_MICROSECOND","MINUTE_SECOND","MOD","MODIFIES","NATURAL","NOT","NO_WRITE_TO_BINLOG","NTH_VALUE","NTILE","NULL","OF","ON","OPTIMIZE","OPTIMIZER_COSTS","OPTION","OPTIONALLY","OR","ORDER","OUT","OUTER","OUTFILE","OVER","PARTITION","PERCENT_RANK","PRIMARY","PROCEDURE","PURGE","RANGE","RANK","READ","READS","READ_WRITE","RECURSIVE","REFERENCES","REGEXP","RELEASE","RENAME","REPEAT","REPLACE","REQUIRE","RESIGNAL","RESTRICT","RETURN","REVOKE","RIGHT","RLIKE","ROW","ROWS","ROW_NUMBER","SCHEMA","SCHEMAS","SECOND_MICROSECOND","SELECT","SENSITIVE","SEPARATOR","SET","SHOW","SIGNAL","SPATIAL","SPECIFIC","SQL","SQLEXCEPTION","SQLSTATE","SQLWARNING","SQL_BIG_RESULT","SQL_CALC_FOUND_ROWS","SQL_SMALL_RESULT","SSL","STARTING","STORED","STRAIGHT_JOIN","SYSTEM","TABLE","TERMINATED","THEN","TO","TRAILING","TRIGGER","TRUE","UNDO","UNION","UNIQUE","UNLOCK","UNSIGNED","UPDATE","USAGE","USE","USING","UTC_DATE","UTC_TIME","UTC_TIMESTAMP","VALUES","VIRTUAL","WHEN","WHERE","WHILE","WINDOW","WITH","WRITE","XOR","YEAR_MONTH","ZEROFILL"],yj=["BIGINT","BINARY","BIT","BLOB","BOOL","BOOLEAN","CHAR","CHARACTER","DATE","DATETIME","DEC","DECIMAL","DOUBLE PRECISION","DOUBLE","ENUM","FIXED","FLOAT","FLOAT4","FLOAT8","INT","INT1","INT2","INT3","INT4","INT8","INTEGER","LONGBLOB","LONGTEXT","MEDIUMBLOB","MEDIUMINT","MEDIUMTEXT","MIDDLEINT","NATIONAL CHAR","NATIONAL VARCHAR","NUMERIC","PRECISION","REAL","SMALLINT","TEXT","TIME","TIMESTAMP","TINYBLOB","TINYINT","TINYTEXT","VARBINARY","VARCHAR","VARCHARACTER","VARYING","YEAR"]});var Lj,Dj=G(()=>{Lj=["ABS","ACOS","ADDDATE","ADDTIME","AES_DECRYPT","AES_ENCRYPT","ANY_VALUE","ASCII","ASIN","ATAN","ATAN2","AVG","BENCHMARK","BIN","BIN_TO_UUID","BINARY","BIT_AND","BIT_COUNT","BIT_LENGTH","BIT_OR","BIT_XOR","CAN_ACCESS_COLUMN","CAN_ACCESS_DATABASE","CAN_ACCESS_TABLE","CAN_ACCESS_USER","CAN_ACCESS_VIEW","CAST","CEIL","CEILING","CHAR","CHAR_LENGTH","CHARACTER_LENGTH","CHARSET","COALESCE","COERCIBILITY","COLLATION","COMPRESS","CONCAT","CONCAT_WS","CONNECTION_ID","CONV","CONVERT","CONVERT_TZ","COS","COT","COUNT","CRC32","CUME_DIST","CURDATE","CURRENT_DATE","CURRENT_ROLE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURTIME","DATABASE","DATE","DATE_ADD","DATE_FORMAT","DATE_SUB","DATEDIFF","DAY","DAYNAME","DAYOFMONTH","DAYOFWEEK","DAYOFYEAR","DEFAULT","DEGREES","DENSE_RANK","DIV","ELT","EXP","EXPORT_SET","EXTRACT","EXTRACTVALUE","FIELD","FIND_IN_SET","FIRST_VALUE","FLOOR","FORMAT","FORMAT_BYTES","FORMAT_PICO_TIME","FOUND_ROWS","FROM_BASE64","FROM_DAYS","FROM_UNIXTIME","GEOMCOLLECTION","GEOMETRYCOLLECTION","GET_DD_COLUMN_PRIVILEGES","GET_DD_CREATE_OPTIONS","GET_DD_INDEX_SUB_PART_LENGTH","GET_FORMAT","GET_LOCK","GREATEST","GROUP_CONCAT","GROUPING","GTID_SUBSET","GTID_SUBTRACT","HEX","HOUR","ICU_VERSION","IF","IFNULL","INET_ATON","INET_NTOA","INET6_ATON","INET6_NTOA","INSERT","INSTR","INTERNAL_AUTO_INCREMENT","INTERNAL_AVG_ROW_LENGTH","INTERNAL_CHECK_TIME","INTERNAL_CHECKSUM","INTERNAL_DATA_FREE","INTERNAL_DATA_LENGTH","INTERNAL_DD_CHAR_LENGTH","INTERNAL_GET_COMMENT_OR_ERROR","INTERNAL_GET_ENABLED_ROLE_JSON","INTERNAL_GET_HOSTNAME","INTERNAL_GET_USERNAME","INTERNAL_GET_VIEW_WARNING_OR_ERROR","INTERNAL_INDEX_COLUMN_CARDINALITY","INTERNAL_INDEX_LENGTH","INTERNAL_IS_ENABLED_ROLE","INTERNAL_IS_MANDATORY_ROLE","INTERNAL_KEYS_DISABLED","INTERNAL_MAX_DATA_LENGTH","INTERNAL_TABLE_ROWS","INTERNAL_UPDATE_TIME","INTERVAL","IS","IS_FREE_LOCK","IS_IPV4","IS_IPV4_COMPAT","IS_IPV4_MAPPED","IS_IPV6","IS NOT","IS NOT NULL","IS NULL","IS_USED_LOCK","IS_UUID","ISNULL","JSON_ARRAY","JSON_ARRAY_APPEND","JSON_ARRAY_INSERT","JSON_ARRAYAGG","JSON_CONTAINS","JSON_CONTAINS_PATH","JSON_DEPTH","JSON_EXTRACT","JSON_INSERT","JSON_KEYS","JSON_LENGTH","JSON_MERGE","JSON_MERGE_PATCH","JSON_MERGE_PRESERVE","JSON_OBJECT","JSON_OBJECTAGG","JSON_OVERLAPS","JSON_PRETTY","JSON_QUOTE","JSON_REMOVE","JSON_REPLACE","JSON_SCHEMA_VALID","JSON_SCHEMA_VALIDATION_REPORT","JSON_SEARCH","JSON_SET","JSON_STORAGE_FREE","JSON_STORAGE_SIZE","JSON_TABLE","JSON_TYPE","JSON_UNQUOTE","JSON_VALID","JSON_VALUE","LAG","LAST_DAY","LAST_INSERT_ID","LAST_VALUE","LCASE","LEAD","LEAST","LEFT","LENGTH","LIKE","LINESTRING","LN","LOAD_FILE","LOCALTIME","LOCALTIMESTAMP","LOCATE","LOG","LOG10","LOG2","LOWER","LPAD","LTRIM","MAKE_SET","MAKEDATE","MAKETIME","MASTER_POS_WAIT","MATCH","MAX","MBRCONTAINS","MBRCOVEREDBY","MBRCOVERS","MBRDISJOINT","MBREQUALS","MBRINTERSECTS","MBROVERLAPS","MBRTOUCHES","MBRWITHIN","MD5","MEMBER OF","MICROSECOND","MID","MIN","MINUTE","MOD","MONTH","MONTHNAME","MULTILINESTRING","MULTIPOINT","MULTIPOLYGON","NAME_CONST","NOT","NOT IN","NOT LIKE","NOT REGEXP","NOW","NTH_VALUE","NTILE","NULLIF","OCT","OCTET_LENGTH","ORD","PERCENT_RANK","PERIOD_ADD","PERIOD_DIFF","PI","POINT","POLYGON","POSITION","POW","POWER","PS_CURRENT_THREAD_ID","PS_THREAD_ID","QUARTER","QUOTE","RADIANS","RAND","RANDOM_BYTES","RANK","REGEXP","REGEXP_INSTR","REGEXP_LIKE","REGEXP_REPLACE","REGEXP_SUBSTR","RELEASE_ALL_LOCKS","RELEASE_LOCK","REPEAT","REPLACE","REVERSE","RIGHT","RLIKE","ROLES_GRAPHML","ROUND","ROW_COUNT","ROW_NUMBER","RPAD","RTRIM","SCHEMA","SEC_TO_TIME","SECOND","SESSION_USER","SHA1","SHA2","SIGN","SIN","SLEEP","SOUNDEX","SOUNDS LIKE","SOURCE_POS_WAIT","SPACE","SQRT","ST_AREA","ST_ASBINARY","ST_ASGEOJSON","ST_ASTEXT","ST_BUFFER","ST_BUFFER_STRATEGY","ST_CENTROID","ST_COLLECT","ST_CONTAINS","ST_CONVEXHULL","ST_CROSSES","ST_DIFFERENCE","ST_DIMENSION","ST_DISJOINT","ST_DISTANCE","ST_DISTANCE_SPHERE","ST_ENDPOINT","ST_ENVELOPE","ST_EQUALS","ST_EXTERIORRING","ST_FRECHETDISTANCE","ST_GEOHASH","ST_GEOMCOLLFROMTEXT","ST_GEOMCOLLFROMWKB","ST_GEOMETRYN","ST_GEOMETRYTYPE","ST_GEOMFROMGEOJSON","ST_GEOMFROMTEXT","ST_GEOMFROMWKB","ST_HAUSDORFFDISTANCE","ST_INTERIORRINGN","ST_INTERSECTION","ST_INTERSECTS","ST_ISCLOSED","ST_ISEMPTY","ST_ISSIMPLE","ST_ISVALID","ST_LATFROMGEOHASH","ST_LATITUDE","ST_LENGTH","ST_LINEFROMTEXT","ST_LINEFROMWKB","ST_LINEINTERPOLATEPOINT","ST_LINEINTERPOLATEPOINTS","ST_LONGFROMGEOHASH","ST_LONGITUDE","ST_MAKEENVELOPE","ST_MLINEFROMTEXT","ST_MLINEFROMWKB","ST_MPOINTFROMTEXT","ST_MPOINTFROMWKB","ST_MPOLYFROMTEXT","ST_MPOLYFROMWKB","ST_NUMGEOMETRIES","ST_NUMINTERIORRING","ST_NUMPOINTS","ST_OVERLAPS","ST_POINTATDISTANCE","ST_POINTFROMGEOHASH","ST_POINTFROMTEXT","ST_POINTFROMWKB","ST_POINTN","ST_POLYFROMTEXT","ST_POLYFROMWKB","ST_SIMPLIFY","ST_SRID","ST_STARTPOINT","ST_SWAPXY","ST_SYMDIFFERENCE","ST_TOUCHES","ST_TRANSFORM","ST_UNION","ST_VALIDATE","ST_WITHIN","ST_X","ST_Y","STATEMENT_DIGEST","STATEMENT_DIGEST_TEXT","STD","STDDEV","STDDEV_POP","STDDEV_SAMP","STR_TO_DATE","STRCMP","SUBDATE","SUBSTR","SUBSTRING","SUBSTRING_INDEX","SUBTIME","SUM","SYSDATE","SYSTEM_USER","TAN","TIME","TIME_FORMAT","TIME_TO_SEC","TIMEDIFF","TIMESTAMP","TIMESTAMPADD","TIMESTAMPDIFF","TO_BASE64","TO_DAYS","TO_SECONDS","TRIM","TRUNCATE","UCASE","UNCOMPRESS","UNCOMPRESSED_LENGTH","UNHEX","UNIX_TIMESTAMP","UPDATEXML","UPPER","UTC_DATE","UTC_TIME","UTC_TIMESTAMP","UUID","UUID_SHORT","UUID_TO_BIN","VALIDATE_PASSWORD_STRENGTH","VALUES","VAR_POP","VAR_SAMP","VARIANCE","VERSION","WAIT_FOR_EXECUTED_GTID_SET","WAIT_UNTIL_SQL_THREAD_AFTER_GTIDS","WEEK","WEEKDAY","WEEKOFYEAR","WEIGHT_STRING","YEAR","YEARWEEK"]});var d0e,f0e,Pj,qb,E0e,h0e,p0e,T0e,nR,Xb=G(()=>{xt();cf();wj();Dj();d0e=x(["SELECT [ALL | DISTINCT | DISTINCTROW]"]),f0e=x(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY","HAVING","WINDOW","PARTITION BY","ORDER BY","LIMIT","OFFSET","INSERT [LOW_PRIORITY | DELAYED | HIGH_PRIORITY] [IGNORE] [INTO]","REPLACE [LOW_PRIORITY | DELAYED] [INTO]","VALUES","ON DUPLICATE KEY UPDATE","SET"]),Pj=x(["CREATE [TEMPORARY] TABLE [IF NOT EXISTS]"]),qb=x(["CREATE [OR REPLACE] [SQL SECURITY DEFINER | SQL SECURITY INVOKER] VIEW [IF NOT EXISTS]","UPDATE [LOW_PRIORITY] [IGNORE]","DELETE [LOW_PRIORITY] [QUICK] [IGNORE] FROM","DROP [TEMPORARY] TABLE [IF EXISTS]","ALTER TABLE","ADD [COLUMN]","{CHANGE | MODIFY} [COLUMN]","DROP [COLUMN]","RENAME [TO | AS]","RENAME COLUMN","ALTER [COLUMN]","{SET | DROP} DEFAULT","TRUNCATE [TABLE]","ALTER DATABASE","ALTER EVENT","ALTER FUNCTION","ALTER INSTANCE","ALTER LOGFILE GROUP","ALTER PROCEDURE","ALTER RESOURCE GROUP","ALTER SERVER","ALTER TABLESPACE","ALTER USER","ALTER VIEW","ANALYZE TABLE","BINLOG","CACHE INDEX","CALL","CHANGE MASTER TO","CHANGE REPLICATION FILTER","CHANGE REPLICATION SOURCE TO","CHECK TABLE","CHECKSUM TABLE","CLONE","COMMIT","CREATE DATABASE","CREATE EVENT","CREATE FUNCTION","CREATE FUNCTION","CREATE INDEX","CREATE LOGFILE GROUP","CREATE PROCEDURE","CREATE RESOURCE GROUP","CREATE ROLE","CREATE SERVER","CREATE SPATIAL REFERENCE SYSTEM","CREATE TABLESPACE","CREATE TRIGGER","CREATE USER","DEALLOCATE PREPARE","DESCRIBE","DROP DATABASE","DROP EVENT","DROP FUNCTION","DROP FUNCTION","DROP INDEX","DROP LOGFILE GROUP","DROP PROCEDURE","DROP RESOURCE GROUP","DROP ROLE","DROP SERVER","DROP SPATIAL REFERENCE SYSTEM","DROP TABLESPACE","DROP TRIGGER","DROP USER","DROP VIEW","EXECUTE","EXPLAIN","FLUSH","GRANT","HANDLER","HELP","IMPORT TABLE","INSTALL COMPONENT","INSTALL PLUGIN","KILL","LOAD DATA","LOAD INDEX INTO CACHE","LOAD XML","LOCK INSTANCE FOR BACKUP","LOCK TABLES","MASTER_POS_WAIT","OPTIMIZE TABLE","PREPARE","PURGE BINARY LOGS","RELEASE SAVEPOINT","RENAME TABLE","RENAME USER","REPAIR TABLE","RESET","RESET MASTER","RESET PERSIST","RESET REPLICA","RESET SLAVE","RESTART","REVOKE","ROLLBACK","ROLLBACK TO SAVEPOINT","SAVEPOINT","SET CHARACTER SET","SET DEFAULT ROLE","SET NAMES","SET PASSWORD","SET RESOURCE GROUP","SET ROLE","SET TRANSACTION","SHOW","SHOW BINARY LOGS","SHOW BINLOG EVENTS","SHOW CHARACTER SET","SHOW COLLATION","SHOW COLUMNS","SHOW CREATE DATABASE","SHOW CREATE EVENT","SHOW CREATE FUNCTION","SHOW CREATE PROCEDURE","SHOW CREATE TABLE","SHOW CREATE TRIGGER","SHOW CREATE USER","SHOW CREATE VIEW","SHOW DATABASES","SHOW ENGINE","SHOW ENGINES","SHOW ERRORS","SHOW EVENTS","SHOW FUNCTION CODE","SHOW FUNCTION STATUS","SHOW GRANTS","SHOW INDEX","SHOW MASTER STATUS","SHOW OPEN TABLES","SHOW PLUGINS","SHOW PRIVILEGES","SHOW PROCEDURE CODE","SHOW PROCEDURE STATUS","SHOW PROCESSLIST","SHOW PROFILE","SHOW PROFILES","SHOW RELAYLOG EVENTS","SHOW REPLICA STATUS","SHOW REPLICAS","SHOW SLAVE","SHOW SLAVE HOSTS","SHOW STATUS","SHOW TABLE STATUS","SHOW TABLES","SHOW TRIGGERS","SHOW VARIABLES","SHOW WARNINGS","SHUTDOWN","SOURCE_POS_WAIT","START GROUP_REPLICATION","START REPLICA","START SLAVE","START TRANSACTION","STOP GROUP_REPLICATION","STOP REPLICA","STOP SLAVE","TABLE","UNINSTALL COMPONENT","UNINSTALL PLUGIN","UNLOCK INSTANCE","UNLOCK TABLES","USE","XA","ITERATE","LEAVE","LOOP","REPEAT","RETURN","WHILE"]),E0e=x(["UNION [ALL | DISTINCT]"]),h0e=x(["JOIN","{LEFT | RIGHT} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL [INNER] JOIN","NATURAL {LEFT | RIGHT} [OUTER] JOIN","STRAIGHT_JOIN"]),p0e=x(["ON {UPDATE | DELETE} [SET NULL]","CHARACTER SET","{ROWS | RANGE} BETWEEN","IDENTIFIED BY"]),T0e=x([]),nR={name:"mysql",tokenizerOptions:{reservedSelect:d0e,reservedClauses:[...f0e,...Pj,...qb],reservedSetOperations:E0e,reservedJoins:h0e,reservedKeywordPhrases:p0e,reservedDataTypePhrases:T0e,supportsXor:!0,reservedKeywords:bj,reservedDataTypes:yj,reservedFunctionNames:Lj,stringTypes:['""-qq-bs',{quote:"''-qq-bs",prefixes:["N"]},{quote:"''-raw",prefixes:["B","X"],requirePrefix:!0}],identTypes:["``"],identChars:{first:"$",rest:"$",allowFirstCharNumber:!0},variableTypes:[{regex:"@@?[A-Za-z0-9_.$]+"},{quote:'""-qq-bs',prefixes:["@"],requirePrefix:!0},{quote:"''-qq-bs",prefixes:["@"],requirePrefix:!0},{quote:"``",prefixes:["@"],requirePrefix:!0}],paramTypes:{positional:!0},lineCommentTypes:["--","#"],operators:["%",":=","&","|","^","~","<<",">>","<=>","->","->>","&&","||","!","*.*"],postProcess:oo},formatOptions:{onelineClauses:[...Pj,...qb],tabularOnelineClauses:qb}}});var xj,vj,Mj=G(()=>{xj=["ADD","ALL","ALTER","ANALYZE","AND","ARRAY","AS","ASC","BETWEEN","BOTH","BY","CALL","CASCADE","CASE","CHANGE","CHECK","COLLATE","COLUMN","CONSTRAINT","CONTINUE","CONVERT","CREATE","CROSS","CURRENT_DATE","CURRENT_ROLE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURSOR","DATABASE","DATABASES","DAY_HOUR","DAY_MICROSECOND","DAY_MINUTE","DAY_SECOND","DEFAULT","DELAYED","DELETE","DESC","DESCRIBE","DISTINCT","DISTINCTROW","DIV","DOUBLE","DROP","DUAL","ELSE","ELSEIF","ENCLOSED","ESCAPED","EXCEPT","EXISTS","EXIT","EXPLAIN","FALSE","FETCH","FOR","FORCE","FOREIGN","FROM","FULLTEXT","GENERATED","GRANT","GROUP","GROUPS","HAVING","HIGH_PRIORITY","HOUR_MICROSECOND","HOUR_MINUTE","HOUR_SECOND","IF","IGNORE","ILIKE","IN","INDEX","INFILE","INNER","INOUT","INSERT","INTERSECT","INTERVAL","INTO","IS","ITERATE","JOIN","KEY","KEYS","KILL","LEADING","LEAVE","LEFT","LIKE","LIMIT","LINEAR","LINES","LOAD","LOCALTIME","LOCALTIMESTAMP","LOCK","LONG","LOW_PRIORITY","MATCH","MAXVALUE","MINUTE_MICROSECOND","MINUTE_SECOND","MOD","NATURAL","NOT","NO_WRITE_TO_BINLOG","NULL","OF","ON","OPTIMIZE","OPTION","OPTIONALLY","OR","ORDER","OUT","OUTER","OUTFILE","OVER","PARTITION","PRIMARY","PROCEDURE","RANGE","READ","RECURSIVE","REFERENCES","REGEXP","RELEASE","RENAME","REPEAT","REPLACE","REQUIRE","RESTRICT","REVOKE","RIGHT","RLIKE","ROW","ROWS","SECOND_MICROSECOND","SELECT","SET","SHOW","SPATIAL","SQL","SQLEXCEPTION","SQLSTATE","SQLWARNING","SQL_BIG_RESULT","SQL_CALC_FOUND_ROWS","SQL_SMALL_RESULT","SSL","STARTING","STATS_EXTENDED","STORED","STRAIGHT_JOIN","TABLE","TABLESAMPLE","TERMINATED","THEN","TO","TRAILING","TRIGGER","TRUE","TiDB_CURRENT_TSO","UNION","UNIQUE","UNLOCK","UNSIGNED","UNTIL","UPDATE","USAGE","USE","USING","UTC_DATE","UTC_TIME","UTC_TIMESTAMP","VALUES","VIRTUAL","WHEN","WHERE","WHILE","WINDOW","WITH","WRITE","XOR","YEAR_MONTH","ZEROFILL"],vj=["BIGINT","BINARY","BIT","BLOB","BOOL","BOOLEAN","CHAR","CHARACTER","DATE","DATETIME","DEC","DECIMAL","DOUBLE PRECISION","DOUBLE","ENUM","FIXED","INT","INT1","INT2","INT3","INT4","INT8","INTEGER","LONGBLOB","LONGTEXT","MEDIUMBLOB","MEDIUMINT","MIDDLEINT","NATIONAL CHAR","NATIONAL VARCHAR","NUMERIC","PRECISION","SMALLINT","TEXT","TIME","TIMESTAMP","TINYBLOB","TINYINT","TINYTEXT","VARBINARY","VARCHAR","VARCHARACTER","VARYING","YEAR"]});var Uj,Bj=G(()=>{Uj=["ABS","ACOS","ADDDATE","ADDTIME","AES_DECRYPT","AES_ENCRYPT","ANY_VALUE","ASCII","ASIN","ATAN","ATAN2","AVG","BENCHMARK","BIN","BIN_TO_UUID","BIT_AND","BIT_COUNT","BIT_LENGTH","BIT_OR","BIT_XOR","BITAND","BITNEG","BITOR","BITXOR","CASE","CAST","CEIL","CEILING","CHAR_FUNC","CHAR_LENGTH","CHARACTER_LENGTH","CHARSET","COALESCE","COERCIBILITY","COLLATION","COMPRESS","CONCAT","CONCAT_WS","CONNECTION_ID","CONV","CONVERT","CONVERT_TZ","COS","COT","COUNT","CRC32","CUME_DIST","CURDATE","CURRENT_DATE","CURRENT_RESOURCE_GROUP","CURRENT_ROLE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURTIME","DATABASE","DATE","DATE_ADD","DATE_FORMAT","DATE_SUB","DATEDIFF","DAY","DAYNAME","DAYOFMONTH","DAYOFWEEK","DAYOFYEAR","DECODE","DEFAULT_FUNC","DEGREES","DENSE_RANK","DES_DECRYPT","DES_ENCRYPT","DIV","ELT","ENCODE","ENCRYPT","EQ","EXP","EXPORT_SET","EXTRACT","FIELD","FIND_IN_SET","FIRST_VALUE","FLOOR","FORMAT","FORMAT_BYTES","FORMAT_NANO_TIME","FOUND_ROWS","FROM_BASE64","FROM_DAYS","FROM_UNIXTIME","GE","GET_FORMAT","GET_LOCK","GETPARAM","GREATEST","GROUP_CONCAT","GROUPING","GT","HEX","HOUR","IF","IFNULL","ILIKE","INET6_ATON","INET6_NTOA","INET_ATON","INET_NTOA","INSERT_FUNC","INSTR","INTDIV","INTERVAL","IS_FREE_LOCK","IS_IPV4","IS_IPV4_COMPAT","IS_IPV4_MAPPED","IS_IPV6","IS_USED_LOCK","IS_UUID","ISFALSE","ISNULL","ISTRUE","JSON_ARRAY","JSON_ARRAYAGG","JSON_ARRAY_APPEND","JSON_ARRAY_INSERT","JSON_CONTAINS","JSON_CONTAINS_PATH","JSON_DEPTH","JSON_EXTRACT","JSON_INSERT","JSON_KEYS","JSON_LENGTH","JSON_MEMBEROF","JSON_MERGE","JSON_MERGE_PATCH","JSON_MERGE_PRESERVE","JSON_OBJECT","JSON_OBJECTAGG","JSON_OVERLAPS","JSON_PRETTY","JSON_QUOTE","JSON_REMOVE","JSON_REPLACE","JSON_SEARCH","JSON_SET","JSON_STORAGE_FREE","JSON_STORAGE_SIZE","JSON_TYPE","JSON_UNQUOTE","JSON_VALID","LAG","LAST_DAY","LAST_INSERT_ID","LAST_VALUE","LASTVAL","LCASE","LE","LEAD","LEAST","LEFT","LEFTSHIFT","LENGTH","LIKE","LN","LOAD_FILE","LOCALTIME","LOCALTIMESTAMP","LOCATE","LOG","LOG10","LOG2","LOWER","LPAD","LT","LTRIM","MAKE_SET","MAKEDATE","MAKETIME","MASTER_POS_WAIT","MAX","MD5","MICROSECOND","MID","MIN","MINUS","MINUTE","MOD","MONTH","MONTHNAME","MUL","NAME_CONST","NE","NEXTVAL","NOT","NOW","NTH_VALUE","NTILE","NULLEQ","OCT","OCTET_LENGTH","OLD_PASSWORD","ORD","PASSWORD_FUNC","PERCENT_RANK","PERIOD_ADD","PERIOD_DIFF","PI","PLUS","POSITION","POW","POWER","QUARTER","QUOTE","RADIANS","RAND","RANDOM_BYTES","RANK","REGEXP","REGEXP_INSTR","REGEXP_LIKE","REGEXP_REPLACE","REGEXP_SUBSTR","RELEASE_ALL_LOCKS","RELEASE_LOCK","REPEAT","REPLACE","REVERSE","RIGHT","RIGHTSHIFT","ROUND","ROW_COUNT","ROW_NUMBER","RPAD","RTRIM","SCHEMA","SEC_TO_TIME","SECOND","SESSION_USER","SETVAL","SETVAR","SHA","SHA1","SHA2","SIGN","SIN","SLEEP","SM3","SPACE","SQRT","STD","STDDEV","STDDEV_POP","STDDEV_SAMP","STR_TO_DATE","STRCMP","SUBDATE","SUBSTR","SUBSTRING","SUBSTRING_INDEX","SUBTIME","SUM","SYSDATE","SYSTEM_USER","TAN","TIDB_BOUNDED_STALENESS","TIDB_CURRENT_TSO","TIDB_DECODE_BINARY_PLAN","TIDB_DECODE_KEY","TIDB_DECODE_PLAN","TIDB_DECODE_SQL_DIGESTS","TIDB_ENCODE_SQL_DIGEST","TIDB_IS_DDL_OWNER","TIDB_PARSE_TSO","TIDB_PARSE_TSO_LOGICAL","TIDB_ROW_CHECKSUM","TIDB_SHARD","TIDB_VERSION","TIME","TIME_FORMAT","TIME_TO_SEC","TIMEDIFF","TIMESTAMP","TIMESTAMPADD","TIMESTAMPDIFF","TO_BASE64","TO_DAYS","TO_SECONDS","TRANSLATE","TRIM","TRUNCATE","UCASE","UNARYMINUS","UNCOMPRESS","UNCOMPRESSED_LENGTH","UNHEX","UNIX_TIMESTAMP","UPPER","UTC_DATE","UTC_TIME","UTC_TIMESTAMP","UUID","UUID_SHORT","UUID_TO_BIN","VALIDATE_PASSWORD_STRENGTH","VAR_POP","VAR_SAMP","VARIANCE","VERSION","VITESS_HASH","WEEK","WEEKDAY","WEEKOFYEAR","WEIGHT_STRING","YEAR","YEARWEEK"]});var S0e,R0e,Fj,jb,A0e,m0e,g0e,_0e,iR,zb=G(()=>{xt();cf();Mj();Bj();S0e=x(["SELECT [ALL | DISTINCT | DISTINCTROW]"]),R0e=x(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY","HAVING","WINDOW","PARTITION BY","ORDER BY","LIMIT","OFFSET","INSERT [LOW_PRIORITY | DELAYED | HIGH_PRIORITY] [IGNORE] [INTO]","REPLACE [LOW_PRIORITY | DELAYED] [INTO]","VALUES","ON DUPLICATE KEY UPDATE","SET"]),Fj=x(["CREATE [TEMPORARY] TABLE [IF NOT EXISTS]"]),jb=x(["CREATE [OR REPLACE] [SQL SECURITY DEFINER | SQL SECURITY INVOKER] VIEW [IF NOT EXISTS]","UPDATE [LOW_PRIORITY] [IGNORE]","DELETE [LOW_PRIORITY] [QUICK] [IGNORE] FROM","DROP [TEMPORARY] TABLE [IF EXISTS]","ALTER TABLE","ADD [COLUMN]","{CHANGE | MODIFY} [COLUMN]","DROP [COLUMN]","RENAME [TO | AS]","RENAME COLUMN","ALTER [COLUMN]","{SET | DROP} DEFAULT","TRUNCATE [TABLE]","ALTER DATABASE","ALTER INSTANCE","ALTER RESOURCE GROUP","ALTER SEQUENCE","ALTER USER","ALTER VIEW","ANALYZE TABLE","CHECK TABLE","CHECKSUM TABLE","COMMIT","CREATE DATABASE","CREATE INDEX","CREATE RESOURCE GROUP","CREATE ROLE","CREATE SEQUENCE","CREATE USER","DEALLOCATE PREPARE","DESCRIBE","DROP DATABASE","DROP INDEX","DROP RESOURCE GROUP","DROP ROLE","DROP TABLESPACE","DROP USER","DROP VIEW","EXPLAIN","FLUSH","GRANT","IMPORT TABLE","INSTALL COMPONENT","INSTALL PLUGIN","KILL","LOAD DATA","LOCK INSTANCE FOR BACKUP","LOCK TABLES","OPTIMIZE TABLE","PREPARE","RELEASE SAVEPOINT","RENAME TABLE","RENAME USER","REPAIR TABLE","RESET","REVOKE","ROLLBACK","ROLLBACK TO SAVEPOINT","SAVEPOINT","SET CHARACTER SET","SET DEFAULT ROLE","SET NAMES","SET PASSWORD","SET RESOURCE GROUP","SET ROLE","SET TRANSACTION","SHOW","SHOW BINARY LOGS","SHOW BINLOG EVENTS","SHOW CHARACTER SET","SHOW COLLATION","SHOW COLUMNS","SHOW CREATE DATABASE","SHOW CREATE TABLE","SHOW CREATE USER","SHOW CREATE VIEW","SHOW DATABASES","SHOW ENGINE","SHOW ENGINES","SHOW ERRORS","SHOW EVENTS","SHOW GRANTS","SHOW INDEX","SHOW MASTER STATUS","SHOW OPEN TABLES","SHOW PLUGINS","SHOW PRIVILEGES","SHOW PROCESSLIST","SHOW PROFILE","SHOW PROFILES","SHOW STATUS","SHOW TABLE STATUS","SHOW TABLES","SHOW TRIGGERS","SHOW VARIABLES","SHOW WARNINGS","TABLE","UNINSTALL COMPONENT","UNINSTALL PLUGIN","UNLOCK INSTANCE","UNLOCK TABLES","USE"]),A0e=x(["UNION [ALL | DISTINCT]"]),m0e=x(["JOIN","{LEFT | RIGHT} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL [INNER] JOIN","NATURAL {LEFT | RIGHT} [OUTER] JOIN","STRAIGHT_JOIN"]),g0e=x(["ON {UPDATE | DELETE} [SET NULL]","CHARACTER SET","{ROWS | RANGE} BETWEEN","IDENTIFIED BY"]),_0e=x([]),iR={name:"tidb",tokenizerOptions:{reservedSelect:S0e,reservedClauses:[...R0e,...Fj,...jb],reservedSetOperations:A0e,reservedJoins:m0e,reservedKeywordPhrases:g0e,reservedDataTypePhrases:_0e,supportsXor:!0,reservedKeywords:xj,reservedDataTypes:vj,reservedFunctionNames:Uj,stringTypes:['""-qq-bs',{quote:"''-qq-bs",prefixes:["N"]},{quote:"''-raw",prefixes:["B","X"],requirePrefix:!0}],identTypes:["``"],identChars:{first:"$",rest:"$",allowFirstCharNumber:!0},variableTypes:[{regex:"@@?[A-Za-z0-9_.$]+"},{quote:'""-qq-bs',prefixes:["@"],requirePrefix:!0},{quote:"''-qq-bs",prefixes:["@"],requirePrefix:!0},{quote:"``",prefixes:["@"],requirePrefix:!0}],paramTypes:{positional:!0},lineCommentTypes:["--","#"],operators:["%",":=","&","|","^","~","<<",">>","<=>","->","->>","&&","||","!","*.*"],postProcess:oo},formatOptions:{onelineClauses:[...Fj,...jb],tabularOnelineClauses:jb}}});var Hj,Gj=G(()=>{Hj=["ABORT","ABS","ACOS","ADVISOR","ARRAY_AGG","ARRAY_AGG","ARRAY_APPEND","ARRAY_AVG","ARRAY_BINARY_SEARCH","ARRAY_CONCAT","ARRAY_CONTAINS","ARRAY_COUNT","ARRAY_DISTINCT","ARRAY_EXCEPT","ARRAY_FLATTEN","ARRAY_IFNULL","ARRAY_INSERT","ARRAY_INTERSECT","ARRAY_LENGTH","ARRAY_MAX","ARRAY_MIN","ARRAY_MOVE","ARRAY_POSITION","ARRAY_PREPEND","ARRAY_PUT","ARRAY_RANGE","ARRAY_REMOVE","ARRAY_REPEAT","ARRAY_REPLACE","ARRAY_REVERSE","ARRAY_SORT","ARRAY_STAR","ARRAY_SUM","ARRAY_SYMDIFF","ARRAY_SYMDIFF1","ARRAY_SYMDIFFN","ARRAY_UNION","ASIN","ATAN","ATAN2","AVG","BASE64","BASE64_DECODE","BASE64_ENCODE","BITAND ","BITCLEAR ","BITNOT ","BITOR ","BITSET ","BITSHIFT ","BITTEST ","BITXOR ","CEIL","CLOCK_LOCAL","CLOCK_MILLIS","CLOCK_STR","CLOCK_TZ","CLOCK_UTC","COALESCE","CONCAT","CONCAT2","CONTAINS","CONTAINS_TOKEN","CONTAINS_TOKEN_LIKE","CONTAINS_TOKEN_REGEXP","COS","COUNT","COUNT","COUNTN","CUME_DIST","CURL","DATE_ADD_MILLIS","DATE_ADD_STR","DATE_DIFF_MILLIS","DATE_DIFF_STR","DATE_FORMAT_STR","DATE_PART_MILLIS","DATE_PART_STR","DATE_RANGE_MILLIS","DATE_RANGE_STR","DATE_TRUNC_MILLIS","DATE_TRUNC_STR","DECODE","DECODE_JSON","DEGREES","DENSE_RANK","DURATION_TO_STR","ENCODED_SIZE","ENCODE_JSON","EXP","FIRST_VALUE","FLOOR","GREATEST","HAS_TOKEN","IFINF","IFMISSING","IFMISSINGORNULL","IFNAN","IFNANORINF","IFNULL","INITCAP","ISARRAY","ISATOM","ISBITSET","ISBOOLEAN","ISNUMBER","ISOBJECT","ISSTRING","LAG","LAST_VALUE","LEAD","LEAST","LENGTH","LN","LOG","LOWER","LTRIM","MAX","MEAN","MEDIAN","META","MILLIS","MILLIS_TO_LOCAL","MILLIS_TO_STR","MILLIS_TO_TZ","MILLIS_TO_UTC","MILLIS_TO_ZONE_NAME","MIN","MISSINGIF","NANIF","NEGINFIF","NOW_LOCAL","NOW_MILLIS","NOW_STR","NOW_TZ","NOW_UTC","NTH_VALUE","NTILE","NULLIF","NVL","NVL2","OBJECT_ADD","OBJECT_CONCAT","OBJECT_INNER_PAIRS","OBJECT_INNER_VALUES","OBJECT_LENGTH","OBJECT_NAMES","OBJECT_PAIRS","OBJECT_PUT","OBJECT_REMOVE","OBJECT_RENAME","OBJECT_REPLACE","OBJECT_UNWRAP","OBJECT_VALUES","PAIRS","PERCENT_RANK","PI","POLY_LENGTH","POSINFIF","POSITION","POWER","RADIANS","RANDOM","RANK","RATIO_TO_REPORT","REGEXP_CONTAINS","REGEXP_LIKE","REGEXP_MATCHES","REGEXP_POSITION","REGEXP_REPLACE","REGEXP_SPLIT","REGEX_CONTAINS","REGEX_LIKE","REGEX_MATCHES","REGEX_POSITION","REGEX_REPLACE","REGEX_SPLIT","REPEAT","REPLACE","REVERSE","ROUND","ROW_NUMBER","RTRIM","SEARCH","SEARCH_META","SEARCH_SCORE","SIGN","SIN","SPLIT","SQRT","STDDEV","STDDEV_POP","STDDEV_SAMP","STR_TO_DURATION","STR_TO_MILLIS","STR_TO_TZ","STR_TO_UTC","STR_TO_ZONE_NAME","SUBSTR","SUFFIXES","SUM","TAN","TITLE","TOARRAY","TOATOM","TOBOOLEAN","TOKENS","TOKENS","TONUMBER","TOOBJECT","TOSTRING","TRIM","TRUNC","UPPER","UUID","VARIANCE","VARIANCE_POP","VARIANCE_SAMP","VAR_POP","VAR_SAMP","WEEKDAY_MILLIS","WEEKDAY_STR","CAST"]});var Wj,$j,kj=G(()=>{Wj=["ADVISE","ALL","ALTER","ANALYZE","AND","ANY","ARRAY","AS","ASC","AT","BEGIN","BETWEEN","BINARY","BOOLEAN","BREAK","BUCKET","BUILD","BY","CALL","CASE","CAST","CLUSTER","COLLATE","COLLECTION","COMMIT","COMMITTED","CONNECT","CONTINUE","CORRELATED","COVER","CREATE","CURRENT","DATABASE","DATASET","DATASTORE","DECLARE","DECREMENT","DELETE","DERIVED","DESC","DESCRIBE","DISTINCT","DO","DROP","EACH","ELEMENT","ELSE","END","EVERY","EXCEPT","EXCLUDE","EXECUTE","EXISTS","EXPLAIN","FALSE","FETCH","FILTER","FIRST","FLATTEN","FLUSH","FOLLOWING","FOR","FORCE","FROM","FTS","FUNCTION","GOLANG","GRANT","GROUP","GROUPS","GSI","HASH","HAVING","IF","IGNORE","ILIKE","IN","INCLUDE","INCREMENT","INDEX","INFER","INLINE","INNER","INSERT","INTERSECT","INTO","IS","ISOLATION","JAVASCRIPT","JOIN","KEY","KEYS","KEYSPACE","KNOWN","LANGUAGE","LAST","LEFT","LET","LETTING","LEVEL","LIKE","LIMIT","LSM","MAP","MAPPING","MATCHED","MATERIALIZED","MERGE","MINUS","MISSING","NAMESPACE","NEST","NL","NO","NOT","NTH_VALUE","NULL","NULLS","NUMBER","OBJECT","OFFSET","ON","OPTION","OPTIONS","OR","ORDER","OTHERS","OUTER","OVER","PARSE","PARTITION","PASSWORD","PATH","POOL","PRECEDING","PREPARE","PRIMARY","PRIVATE","PRIVILEGE","PROBE","PROCEDURE","PUBLIC","RANGE","RAW","REALM","REDUCE","RENAME","RESPECT","RETURN","RETURNING","REVOKE","RIGHT","ROLE","ROLLBACK","ROW","ROWS","SATISFIES","SAVEPOINT","SCHEMA","SCOPE","SELECT","SELF","SEMI","SET","SHOW","SOME","START","STATISTICS","STRING","SYSTEM","THEN","TIES","TO","TRAN","TRANSACTION","TRIGGER","TRUE","TRUNCATE","UNBOUNDED","UNDER","UNION","UNIQUE","UNKNOWN","UNNEST","UNSET","UPDATE","UPSERT","USE","USER","USING","VALIDATE","VALUE","VALUED","VALUES","VIA","VIEW","WHEN","WHERE","WHILE","WINDOW","WITH","WITHIN","WORK","XOR"],$j=[]});var I0e,N0e,Yj,O0e,C0e,b0e,y0e,sR,Kb=G(()=>{xt();Gj();kj();I0e=x(["SELECT [ALL | DISTINCT]"]),N0e=x(["WITH","FROM","WHERE","GROUP BY","HAVING","WINDOW","PARTITION BY","ORDER BY","LIMIT","OFFSET","INSERT INTO","VALUES","SET","MERGE INTO","WHEN [NOT] MATCHED THEN","UPDATE SET","INSERT","NEST","UNNEST","RETURNING"]),Yj=x(["UPDATE","DELETE FROM","SET SCHEMA","ADVISE","ALTER INDEX","BEGIN TRANSACTION","BUILD INDEX","COMMIT TRANSACTION","CREATE COLLECTION","CREATE FUNCTION","CREATE INDEX","CREATE PRIMARY INDEX","CREATE SCOPE","DROP COLLECTION","DROP FUNCTION","DROP INDEX","DROP PRIMARY INDEX","DROP SCOPE","EXECUTE","EXECUTE FUNCTION","EXPLAIN","GRANT","INFER","PREPARE","REVOKE","ROLLBACK TRANSACTION","SAVEPOINT","SET TRANSACTION","UPDATE STATISTICS","UPSERT","LET","SET CURRENT SCHEMA","SHOW","USE [PRIMARY] KEYS"]),O0e=x(["UNION [ALL]","EXCEPT [ALL]","INTERSECT [ALL]"]),C0e=x(["JOIN","{LEFT | RIGHT} [OUTER] JOIN","INNER JOIN"]),b0e=x(["{ROWS | RANGE | GROUPS} BETWEEN"]),y0e=x([]),sR={name:"n1ql",tokenizerOptions:{reservedSelect:I0e,reservedClauses:[...N0e,...Yj],reservedSetOperations:O0e,reservedJoins:C0e,reservedKeywordPhrases:b0e,reservedDataTypePhrases:y0e,supportsXor:!0,reservedKeywords:Wj,reservedDataTypes:$j,reservedFunctionNames:Hj,stringTypes:['""-bs',"''-bs"],identTypes:["``"],extraParens:["[]","{}"],paramTypes:{positional:!0,numbered:["$"],named:["$"]},lineCommentTypes:["#","--"],operators:["%","==",":","||"]},formatOptions:{onelineClauses:Yj}}});var Vj,qj,Xj=G(()=>{Vj=["ADD","AGENT","AGGREGATE","ALL","ALTER","AND","ANY","ARROW","AS","ASC","AT","ATTRIBUTE","AUTHID","AVG","BEGIN","BETWEEN","BLOCK","BODY","BOTH","BOUND","BULK","BY","BYTE","CALL","CALLING","CASCADE","CASE","CHARSET","CHARSETFORM","CHARSETID","CHECK","CLOSE","CLUSTER","CLUSTERS","COLAUTH","COLLECT","COLUMNS","COMMENT","COMMIT","COMMITTED","COMPILED","COMPRESS","CONNECT","CONSTANT","CONSTRUCTOR","CONTEXT","CONVERT","COUNT","CRASH","CREATE","CURRENT","CURSOR","CUSTOMDATUM","DANGLING","DATA","DAY","DECLARE","DEFAULT","DEFINE","DELETE","DESC","DETERMINISTIC","DISTINCT","DROP","DURATION","ELEMENT","ELSE","ELSIF","EMPTY","END","ESCAPE","EXCEPT","EXCEPTION","EXCEPTIONS","EXCLUSIVE","EXECUTE","EXISTS","EXIT","EXTERNAL","FETCH","FINAL","FIXED","FOR","FORALL","FORCE","FORM","FROM","FUNCTION","GENERAL","GOTO","GRANT","GROUP","HASH","HAVING","HEAP","HIDDEN","HOUR","IDENTIFIED","IF","IMMEDIATE","IN","INCLUDING","INDEX","INDEXES","INDICATOR","INDICES","INFINITE","INSERT","INSTANTIABLE","INTERFACE","INTERSECT","INTERVAL","INTO","INVALIDATE","IS","ISOLATION","JAVA","LANGUAGE","LARGE","LEADING","LENGTH","LEVEL","LIBRARY","LIKE","LIKE2","LIKE4","LIKEC","LIMIT","LIMITED","LOCAL","LOCK","LOOP","MAP","MAX","MAXLEN","MEMBER","MERGE","MIN","MINUS","MINUTE","MOD","MODE","MODIFY","MONTH","MULTISET","NAME","NAN","NATIONAL","NATIVE","NEW","NOCOMPRESS","NOCOPY","NOT","NOWAIT","NULL","OBJECT","OCICOLL","OCIDATE","OCIDATETIME","OCIDURATION","OCIINTERVAL","OCILOBLOCATOR","OCINUMBER","OCIRAW","OCIREF","OCIREFCURSOR","OCIROWID","OCISTRING","OCITYPE","OF","ON","ONLY","OPAQUE","OPEN","OPERATOR","OPTION","OR","ORACLE","ORADATA","ORDER","OVERLAPS","ORGANIZATION","ORLANY","ORLVARY","OTHERS","OUT","OVERRIDING","PACKAGE","PARALLEL_ENABLE","PARAMETER","PARAMETERS","PARTITION","PASCAL","PIPE","PIPELINED","PRAGMA","PRIOR","PRIVATE","PROCEDURE","PUBLIC","RAISE","RANGE","READ","RECORD","REF","REFERENCE","REM","REMAINDER","RENAME","RESOURCE","RESULT","RETURN","RETURNING","REVERSE","REVOKE","ROLLBACK","ROW","SAMPLE","SAVE","SAVEPOINT","SB1","SB2","SB4","SECOND","SEGMENT","SELECT","SELF","SEPARATE","SEQUENCE","SERIALIZABLE","SET","SHARE","SHORT","SIZE","SIZE_T","SOME","SPARSE","SQL","SQLCODE","SQLDATA","SQLNAME","SQLSTATE","STANDARD","START","STATIC","STDDEV","STORED","STRING","STRUCT","STYLE","SUBMULTISET","SUBPARTITION","SUBSTITUTABLE","SUBTYPE","SUM","SYNONYM","TABAUTH","TABLE","TDO","THE","THEN","TIME","TIMEZONE_ABBR","TIMEZONE_HOUR","TIMEZONE_MINUTE","TIMEZONE_REGION","TO","TRAILING","TRANSAC","TRANSACTIONAL","TRUSTED","TYPE","UB1","UB2","UB4","UNDER","UNION","UNIQUE","UNSIGNED","UNTRUSTED","UPDATE","USE","USING","VALIST","VALUE","VALUES","VARIABLE","VARIANCE","VARRAY","VIEW","VIEWS","VOID","WHEN","WHERE","WHILE","WITH","WORK","WRAPPED","WRITE","YEAR","ZONE"],qj=["ARRAY","BFILE_BASE","BINARY","BLOB_BASE","CHAR VARYING","CHAR_BASE","CHAR","CHARACTER VARYING","CHARACTER","CLOB_BASE","DATE_BASE","DATE","DECIMAL","DOUBLE","FLOAT","INT","INTERVAL DAY","INTERVAL YEAR","LONG","NATIONAL CHAR VARYING","NATIONAL CHAR","NATIONAL CHARACTER VARYING","NATIONAL CHARACTER","NCHAR VARYING","NCHAR","NCHAR","NUMBER_BASE","NUMBER","NUMBERIC","NVARCHAR","PRECISION","RAW","TIMESTAMP","UROWID","VARCHAR","VARCHAR2"]});var jj,zj=G(()=>{jj=["ABS","ACOS","ASIN","ATAN","ATAN2","BITAND","CEIL","COS","COSH","EXP","FLOOR","LN","LOG","MOD","NANVL","POWER","REMAINDER","ROUND","SIGN","SIN","SINH","SQRT","TAN","TANH","TRUNC","WIDTH_BUCKET","CHR","CONCAT","INITCAP","LOWER","LPAD","LTRIM","NLS_INITCAP","NLS_LOWER","NLSSORT","NLS_UPPER","REGEXP_REPLACE","REGEXP_SUBSTR","REPLACE","RPAD","RTRIM","SOUNDEX","SUBSTR","TRANSLATE","TREAT","TRIM","UPPER","NLS_CHARSET_DECL_LEN","NLS_CHARSET_ID","NLS_CHARSET_NAME","ASCII","INSTR","LENGTH","REGEXP_INSTR","ADD_MONTHS","CURRENT_DATE","CURRENT_TIMESTAMP","DBTIMEZONE","EXTRACT","FROM_TZ","LAST_DAY","LOCALTIMESTAMP","MONTHS_BETWEEN","NEW_TIME","NEXT_DAY","NUMTODSINTERVAL","NUMTOYMINTERVAL","ROUND","SESSIONTIMEZONE","SYS_EXTRACT_UTC","SYSDATE","SYSTIMESTAMP","TO_CHAR","TO_TIMESTAMP","TO_TIMESTAMP_TZ","TO_DSINTERVAL","TO_YMINTERVAL","TRUNC","TZ_OFFSET","GREATEST","LEAST","ASCIISTR","BIN_TO_NUM","CAST","CHARTOROWID","COMPOSE","CONVERT","DECOMPOSE","HEXTORAW","NUMTODSINTERVAL","NUMTOYMINTERVAL","RAWTOHEX","RAWTONHEX","ROWIDTOCHAR","ROWIDTONCHAR","SCN_TO_TIMESTAMP","TIMESTAMP_TO_SCN","TO_BINARY_DOUBLE","TO_BINARY_FLOAT","TO_CHAR","TO_CLOB","TO_DATE","TO_DSINTERVAL","TO_LOB","TO_MULTI_BYTE","TO_NCHAR","TO_NCLOB","TO_NUMBER","TO_DSINTERVAL","TO_SINGLE_BYTE","TO_TIMESTAMP","TO_TIMESTAMP_TZ","TO_YMINTERVAL","TO_YMINTERVAL","TRANSLATE","UNISTR","BFILENAME","EMPTY_BLOB,","EMPTY_CLOB","CARDINALITY","COLLECT","POWERMULTISET","POWERMULTISET_BY_CARDINALITY","SET","SYS_CONNECT_BY_PATH","CLUSTER_ID","CLUSTER_PROBABILITY","CLUSTER_SET","FEATURE_ID","FEATURE_SET","FEATURE_VALUE","PREDICTION","PREDICTION_COST","PREDICTION_DETAILS","PREDICTION_PROBABILITY","PREDICTION_SET","APPENDCHILDXML","DELETEXML","DEPTH","EXTRACT","EXISTSNODE","EXTRACTVALUE","INSERTCHILDXML","INSERTXMLBEFORE","PATH","SYS_DBURIGEN","SYS_XMLAGG","SYS_XMLGEN","UPDATEXML","XMLAGG","XMLCDATA","XMLCOLATTVAL","XMLCOMMENT","XMLCONCAT","XMLFOREST","XMLPARSE","XMLPI","XMLQUERY","XMLROOT","XMLSEQUENCE","XMLSERIALIZE","XMLTABLE","XMLTRANSFORM","DECODE","DUMP","ORA_HASH","VSIZE","COALESCE","LNNVL","NULLIF","NVL","NVL2","SYS_CONTEXT","SYS_GUID","SYS_TYPEID","UID","USER","USERENV","AVG","COLLECT","CORR","CORR_S","CORR_K","COUNT","COVAR_POP","COVAR_SAMP","CUME_DIST","DENSE_RANK","FIRST","GROUP_ID","GROUPING","GROUPING_ID","LAST","MAX","MEDIAN","MIN","PERCENTILE_CONT","PERCENTILE_DISC","PERCENT_RANK","RANK","REGR_SLOPE","REGR_INTERCEPT","REGR_COUNT","REGR_R2","REGR_AVGX","REGR_AVGY","REGR_SXX","REGR_SYY","REGR_SXY","STATS_BINOMIAL_TEST","STATS_CROSSTAB","STATS_F_TEST","STATS_KS_TEST","STATS_MODE","STATS_MW_TEST","STATS_ONE_WAY_ANOVA","STATS_T_TEST_ONE","STATS_T_TEST_PAIRED","STATS_T_TEST_INDEP","STATS_T_TEST_INDEPU","STATS_WSR_TEST","STDDEV","STDDEV_POP","STDDEV_SAMP","SUM","VAR_POP","VAR_SAMP","VARIANCE","FIRST_VALUE","LAG","LAST_VALUE","LEAD","NTILE","RATIO_TO_REPORT","ROW_NUMBER","DEREF","MAKE_REF","REF","REFTOHEX","VALUE","CV","ITERATION_NUMBER","PRESENTNNV","PRESENTV","PREVIOUS"]});function M0e(t){let e=Li;return t.map(r=>qn.SET(r)&&qn.BY(e)?Object.assign(Object.assign({},r),{type:k.RESERVED_KEYWORD}):(KS(r.type)&&(e=r),r))}var w0e,L0e,Kj,Jb,D0e,P0e,x0e,v0e,oR,Qb=G(()=>{xt();Cn();Xj();zj();w0e=x(["SELECT [ALL | DISTINCT | UNIQUE]"]),L0e=x(["WITH","FROM","WHERE","GROUP BY","HAVING","PARTITION BY","ORDER [SIBLINGS] BY","OFFSET","FETCH {FIRST | NEXT}","FOR UPDATE [OF]","INSERT [INTO | ALL INTO]","VALUES","SET","MERGE [INTO]","WHEN [NOT] MATCHED [THEN]","UPDATE SET","RETURNING"]),Kj=x(["CREATE [GLOBAL TEMPORARY | PRIVATE TEMPORARY | SHARDED | DUPLICATED | IMMUTABLE BLOCKCHAIN | BLOCKCHAIN | IMMUTABLE] TABLE"]),Jb=x(["CREATE [OR REPLACE] [NO FORCE | FORCE] [EDITIONING | EDITIONABLE | EDITIONABLE EDITIONING | NONEDITIONABLE] VIEW","CREATE MATERIALIZED VIEW","UPDATE [ONLY]","DELETE FROM [ONLY]","DROP TABLE","ALTER TABLE","ADD","DROP {COLUMN | UNUSED COLUMNS | COLUMNS CONTINUE}","MODIFY","RENAME TO","RENAME COLUMN","TRUNCATE TABLE","SET SCHEMA","BEGIN","CONNECT BY","DECLARE","EXCEPT","EXCEPTION","LOOP","START WITH"]),D0e=x(["UNION [ALL]","MINUS","INTERSECT"]),P0e=x(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL [INNER] JOIN","NATURAL {LEFT | RIGHT | FULL} [OUTER] JOIN","{CROSS | OUTER} APPLY"]),x0e=x(["ON {UPDATE | DELETE} [SET NULL]","ON COMMIT","{ROWS | RANGE} BETWEEN"]),v0e=x([]),oR={name:"plsql",tokenizerOptions:{reservedSelect:w0e,reservedClauses:[...L0e,...Kj,...Jb],reservedSetOperations:D0e,reservedJoins:P0e,reservedKeywordPhrases:x0e,reservedDataTypePhrases:v0e,supportsXor:!0,reservedKeywords:Vj,reservedDataTypes:qj,reservedFunctionNames:jj,stringTypes:[{quote:"''-qq",prefixes:["N"]},{quote:"q''",prefixes:["N"]}],identTypes:['""-qq'],identChars:{rest:"$#"},variableTypes:[{regex:"&{1,2}[A-Za-z][A-Za-z0-9_$#]*"}],paramTypes:{numbered:[":"],named:[":"]},operators:["**",":=","%","~=","^=",">>","<<","=>","@","||"],postProcess:M0e},formatOptions:{alwaysDenseOperators:["@"],onelineClauses:[...Kj,...Jb],tabularOnelineClauses:Jb}}});var Jj,Qj=G(()=>{Jj=["ABS","ACOS","ACOSD","ACOSH","ASIN","ASIND","ASINH","ATAN","ATAN2","ATAN2D","ATAND","ATANH","CBRT","CEIL","CEILING","COS","COSD","COSH","COT","COTD","DEGREES","DIV","EXP","FACTORIAL","FLOOR","GCD","LCM","LN","LOG","LOG10","MIN_SCALE","MOD","PI","POWER","RADIANS","RANDOM","ROUND","SCALE","SETSEED","SIGN","SIN","SIND","SINH","SQRT","TAN","TAND","TANH","TRIM_SCALE","TRUNC","WIDTH_BUCKET","ABS","ASCII","BIT_LENGTH","BTRIM","CHARACTER_LENGTH","CHAR_LENGTH","CHR","CONCAT","CONCAT_WS","FORMAT","INITCAP","LEFT","LENGTH","LOWER","LPAD","LTRIM","MD5","NORMALIZE","OCTET_LENGTH","OVERLAY","PARSE_IDENT","PG_CLIENT_ENCODING","POSITION","QUOTE_IDENT","QUOTE_LITERAL","QUOTE_NULLABLE","REGEXP_MATCH","REGEXP_MATCHES","REGEXP_REPLACE","REGEXP_SPLIT_TO_ARRAY","REGEXP_SPLIT_TO_TABLE","REPEAT","REPLACE","REVERSE","RIGHT","RPAD","RTRIM","SPLIT_PART","SPRINTF","STARTS_WITH","STRING_AGG","STRING_TO_ARRAY","STRING_TO_TABLE","STRPOS","SUBSTR","SUBSTRING","TO_ASCII","TO_HEX","TRANSLATE","TRIM","UNISTR","UPPER","BIT_COUNT","BIT_LENGTH","BTRIM","CONVERT","CONVERT_FROM","CONVERT_TO","DECODE","ENCODE","GET_BIT","GET_BYTE","LENGTH","LTRIM","MD5","OCTET_LENGTH","OVERLAY","POSITION","RTRIM","SET_BIT","SET_BYTE","SHA224","SHA256","SHA384","SHA512","STRING_AGG","SUBSTR","SUBSTRING","TRIM","BIT_COUNT","BIT_LENGTH","GET_BIT","LENGTH","OCTET_LENGTH","OVERLAY","POSITION","SET_BIT","SUBSTRING","REGEXP_MATCH","REGEXP_MATCHES","REGEXP_REPLACE","REGEXP_SPLIT_TO_ARRAY","REGEXP_SPLIT_TO_TABLE","TO_CHAR","TO_DATE","TO_NUMBER","TO_TIMESTAMP","CLOCK_TIMESTAMP","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","DATE_BIN","DATE_PART","DATE_TRUNC","EXTRACT","ISFINITE","JUSTIFY_DAYS","JUSTIFY_HOURS","JUSTIFY_INTERVAL","LOCALTIME","LOCALTIMESTAMP","MAKE_DATE","MAKE_INTERVAL","MAKE_TIME","MAKE_TIMESTAMP","MAKE_TIMESTAMPTZ","NOW","PG_SLEEP","PG_SLEEP_FOR","PG_SLEEP_UNTIL","STATEMENT_TIMESTAMP","TIMEOFDAY","TO_TIMESTAMP","TRANSACTION_TIMESTAMP","ENUM_FIRST","ENUM_LAST","ENUM_RANGE","AREA","BOUND_BOX","BOX","CENTER","CIRCLE","DIAGONAL","DIAMETER","HEIGHT","ISCLOSED","ISOPEN","LENGTH","LINE","LSEG","NPOINTS","PATH","PCLOSE","POINT","POLYGON","POPEN","RADIUS","SLOPE","WIDTH","ABBREV","BROADCAST","FAMILY","HOST","HOSTMASK","INET_MERGE","INET_SAME_FAMILY","MACADDR8_SET7BIT","MASKLEN","NETMASK","NETWORK","SET_MASKLEN","TRUNC","ARRAY_TO_TSVECTOR","GET_CURRENT_TS_CONFIG","JSONB_TO_TSVECTOR","JSON_TO_TSVECTOR","LENGTH","NUMNODE","PHRASETO_TSQUERY","PLAINTO_TSQUERY","QUERYTREE","SETWEIGHT","STRIP","TO_TSQUERY","TO_TSVECTOR","TSQUERY_PHRASE","TSVECTOR_TO_ARRAY","TS_DEBUG","TS_DELETE","TS_FILTER","TS_HEADLINE","TS_LEXIZE","TS_PARSE","TS_RANK","TS_RANK_CD","TS_REWRITE","TS_STAT","TS_TOKEN_TYPE","WEBSEARCH_TO_TSQUERY","GEN_RANDOM_UUID","UUIDV4","UUIDV7","UUID_EXTRACT_TIMESTAMP","UUID_EXTRACT_VERSION","CURSOR_TO_XML","CURSOR_TO_XMLSCHEMA","DATABASE_TO_XML","DATABASE_TO_XMLSCHEMA","DATABASE_TO_XML_AND_XMLSCHEMA","NEXTVAL","QUERY_TO_XML","QUERY_TO_XMLSCHEMA","QUERY_TO_XML_AND_XMLSCHEMA","SCHEMA_TO_XML","SCHEMA_TO_XMLSCHEMA","SCHEMA_TO_XML_AND_XMLSCHEMA","STRING","TABLE_TO_XML","TABLE_TO_XMLSCHEMA","TABLE_TO_XML_AND_XMLSCHEMA","XMLAGG","XMLCOMMENT","XMLCONCAT","XMLELEMENT","XMLEXISTS","XMLFOREST","XMLPARSE","XMLPI","XMLROOT","XMLSERIALIZE","XMLTABLE","XML_IS_WELL_FORMED","XML_IS_WELL_FORMED_CONTENT","XML_IS_WELL_FORMED_DOCUMENT","XPATH","XPATH_EXISTS","ARRAY_TO_JSON","JSONB_AGG","JSONB_ARRAY_ELEMENTS","JSONB_ARRAY_ELEMENTS_TEXT","JSONB_ARRAY_LENGTH","JSONB_BUILD_ARRAY","JSONB_BUILD_OBJECT","JSONB_EACH","JSONB_EACH_TEXT","JSONB_EXTRACT_PATH","JSONB_EXTRACT_PATH_TEXT","JSONB_INSERT","JSONB_OBJECT","JSONB_OBJECT_AGG","JSONB_OBJECT_KEYS","JSONB_PATH_EXISTS","JSONB_PATH_EXISTS_TZ","JSONB_PATH_MATCH","JSONB_PATH_MATCH_TZ","JSONB_PATH_QUERY","JSONB_PATH_QUERY_ARRAY","JSONB_PATH_QUERY_ARRAY_TZ","JSONB_PATH_QUERY_FIRST","JSONB_PATH_QUERY_FIRST_TZ","JSONB_PATH_QUERY_TZ","JSONB_POPULATE_RECORD","JSONB_POPULATE_RECORDSET","JSONB_PRETTY","JSONB_SET","JSONB_SET_LAX","JSONB_STRIP_NULLS","JSONB_TO_RECORD","JSONB_TO_RECORDSET","JSONB_TYPEOF","JSON_AGG","JSON_ARRAY_ELEMENTS","JSON_ARRAY_ELEMENTS_TEXT","JSON_ARRAY_LENGTH","JSON_BUILD_ARRAY","JSON_BUILD_OBJECT","JSON_EACH","JSON_EACH_TEXT","JSON_EXTRACT_PATH","JSON_EXTRACT_PATH_TEXT","JSON_OBJECT","JSON_OBJECT_AGG","JSON_OBJECT_KEYS","JSON_POPULATE_RECORD","JSON_POPULATE_RECORDSET","JSON_STRIP_NULLS","JSON_TO_RECORD","JSON_TO_RECORDSET","JSON_TYPEOF","ROW_TO_JSON","TO_JSON","TO_JSONB","TO_TIMESTAMP","CURRVAL","LASTVAL","NEXTVAL","SETVAL","COALESCE","GREATEST","LEAST","NULLIF","ARRAY_AGG","ARRAY_APPEND","ARRAY_CAT","ARRAY_DIMS","ARRAY_FILL","ARRAY_LENGTH","ARRAY_LOWER","ARRAY_NDIMS","ARRAY_POSITION","ARRAY_POSITIONS","ARRAY_PREPEND","ARRAY_REMOVE","ARRAY_REPLACE","ARRAY_TO_STRING","ARRAY_UPPER","CARDINALITY","STRING_TO_ARRAY","TRIM_ARRAY","UNNEST","ISEMPTY","LOWER","LOWER_INC","LOWER_INF","MULTIRANGE","RANGE_MERGE","UPPER","UPPER_INC","UPPER_INF","ARRAY_AGG","AVG","BIT_AND","BIT_OR","BIT_XOR","BOOL_AND","BOOL_OR","COALESCE","CORR","COUNT","COVAR_POP","COVAR_SAMP","CUME_DIST","DENSE_RANK","EVERY","GROUPING","JSONB_AGG","JSONB_OBJECT_AGG","JSON_AGG","JSON_OBJECT_AGG","MAX","MIN","MODE","PERCENTILE_CONT","PERCENTILE_DISC","PERCENT_RANK","RANGE_AGG","RANGE_INTERSECT_AGG","RANK","REGR_AVGX","REGR_AVGY","REGR_COUNT","REGR_INTERCEPT","REGR_R2","REGR_SLOPE","REGR_SXX","REGR_SXY","REGR_SYY","STDDEV","STDDEV_POP","STDDEV_SAMP","STRING_AGG","SUM","TO_JSON","TO_JSONB","VARIANCE","VAR_POP","VAR_SAMP","XMLAGG","CUME_DIST","DENSE_RANK","FIRST_VALUE","LAG","LAST_VALUE","LEAD","NTH_VALUE","NTILE","PERCENT_RANK","RANK","ROW_NUMBER","GENERATE_SERIES","GENERATE_SUBSCRIPTS","ACLDEFAULT","ACLEXPLODE","COL_DESCRIPTION","CURRENT_CATALOG","CURRENT_DATABASE","CURRENT_QUERY","CURRENT_ROLE","CURRENT_SCHEMA","CURRENT_SCHEMAS","CURRENT_USER","FORMAT_TYPE","HAS_ANY_COLUMN_PRIVILEGE","HAS_COLUMN_PRIVILEGE","HAS_DATABASE_PRIVILEGE","HAS_FOREIGN_DATA_WRAPPER_PRIVILEGE","HAS_FUNCTION_PRIVILEGE","HAS_LANGUAGE_PRIVILEGE","HAS_SCHEMA_PRIVILEGE","HAS_SEQUENCE_PRIVILEGE","HAS_SERVER_PRIVILEGE","HAS_TABLESPACE_PRIVILEGE","HAS_TABLE_PRIVILEGE","HAS_TYPE_PRIVILEGE","INET_CLIENT_ADDR","INET_CLIENT_PORT","INET_SERVER_ADDR","INET_SERVER_PORT","MAKEACLITEM","OBJ_DESCRIPTION","PG_BACKEND_PID","PG_BLOCKING_PIDS","PG_COLLATION_IS_VISIBLE","PG_CONF_LOAD_TIME","PG_CONTROL_CHECKPOINT","PG_CONTROL_INIT","PG_CONTROL_SYSTEM","PG_CONVERSION_IS_VISIBLE","PG_CURRENT_LOGFILE","PG_CURRENT_SNAPSHOT","PG_CURRENT_XACT_ID","PG_CURRENT_XACT_ID_IF_ASSIGNED","PG_DESCRIBE_OBJECT","PG_FUNCTION_IS_VISIBLE","PG_GET_CATALOG_FOREIGN_KEYS","PG_GET_CONSTRAINTDEF","PG_GET_EXPR","PG_GET_FUNCTIONDEF","PG_GET_FUNCTION_ARGUMENTS","PG_GET_FUNCTION_IDENTITY_ARGUMENTS","PG_GET_FUNCTION_RESULT","PG_GET_INDEXDEF","PG_GET_KEYWORDS","PG_GET_OBJECT_ADDRESS","PG_GET_OWNED_SEQUENCE","PG_GET_RULEDEF","PG_GET_SERIAL_SEQUENCE","PG_GET_STATISTICSOBJDEF","PG_GET_TRIGGERDEF","PG_GET_USERBYID","PG_GET_VIEWDEF","PG_HAS_ROLE","PG_IDENTIFY_OBJECT","PG_IDENTIFY_OBJECT_AS_ADDRESS","PG_INDEXAM_HAS_PROPERTY","PG_INDEX_COLUMN_HAS_PROPERTY","PG_INDEX_HAS_PROPERTY","PG_IS_OTHER_TEMP_SCHEMA","PG_JIT_AVAILABLE","PG_LAST_COMMITTED_XACT","PG_LISTENING_CHANNELS","PG_MY_TEMP_SCHEMA","PG_NOTIFICATION_QUEUE_USAGE","PG_OPCLASS_IS_VISIBLE","PG_OPERATOR_IS_VISIBLE","PG_OPFAMILY_IS_VISIBLE","PG_OPTIONS_TO_TABLE","PG_POSTMASTER_START_TIME","PG_SAFE_SNAPSHOT_BLOCKING_PIDS","PG_SNAPSHOT_XIP","PG_SNAPSHOT_XMAX","PG_SNAPSHOT_XMIN","PG_STATISTICS_OBJ_IS_VISIBLE","PG_TABLESPACE_DATABASES","PG_TABLESPACE_LOCATION","PG_TABLE_IS_VISIBLE","PG_TRIGGER_DEPTH","PG_TS_CONFIG_IS_VISIBLE","PG_TS_DICT_IS_VISIBLE","PG_TS_PARSER_IS_VISIBLE","PG_TS_TEMPLATE_IS_VISIBLE","PG_TYPEOF","PG_TYPE_IS_VISIBLE","PG_VISIBLE_IN_SNAPSHOT","PG_XACT_COMMIT_TIMESTAMP","PG_XACT_COMMIT_TIMESTAMP_ORIGIN","PG_XACT_STATUS","PQSERVERVERSION","ROW_SECURITY_ACTIVE","SESSION_USER","SHOBJ_DESCRIPTION","TO_REGCLASS","TO_REGCOLLATION","TO_REGNAMESPACE","TO_REGOPER","TO_REGOPERATOR","TO_REGPROC","TO_REGPROCEDURE","TO_REGROLE","TO_REGTYPE","TXID_CURRENT","TXID_CURRENT_IF_ASSIGNED","TXID_CURRENT_SNAPSHOT","TXID_SNAPSHOT_XIP","TXID_SNAPSHOT_XMAX","TXID_SNAPSHOT_XMIN","TXID_STATUS","TXID_VISIBLE_IN_SNAPSHOT","USER","VERSION","BRIN_DESUMMARIZE_RANGE","BRIN_SUMMARIZE_NEW_VALUES","BRIN_SUMMARIZE_RANGE","CONVERT_FROM","CURRENT_SETTING","GIN_CLEAN_PENDING_LIST","PG_ADVISORY_LOCK","PG_ADVISORY_LOCK_SHARED","PG_ADVISORY_UNLOCK","PG_ADVISORY_UNLOCK_ALL","PG_ADVISORY_UNLOCK_SHARED","PG_ADVISORY_XACT_LOCK","PG_ADVISORY_XACT_LOCK_SHARED","PG_BACKUP_START_TIME","PG_CANCEL_BACKEND","PG_COLLATION_ACTUAL_VERSION","PG_COLUMN_COMPRESSION","PG_COLUMN_SIZE","PG_COPY_LOGICAL_REPLICATION_SLOT","PG_COPY_PHYSICAL_REPLICATION_SLOT","PG_CREATE_LOGICAL_REPLICATION_SLOT","PG_CREATE_PHYSICAL_REPLICATION_SLOT","PG_CREATE_RESTORE_POINT","PG_CURRENT_WAL_FLUSH_LSN","PG_CURRENT_WAL_INSERT_LSN","PG_CURRENT_WAL_LSN","PG_DATABASE_SIZE","PG_DROP_REPLICATION_SLOT","PG_EXPORT_SNAPSHOT","PG_FILENODE_RELATION","PG_GET_WAL_REPLAY_PAUSE_STATE","PG_IMPORT_SYSTEM_COLLATIONS","PG_INDEXES_SIZE","PG_IS_IN_BACKUP","PG_IS_IN_RECOVERY","PG_IS_WAL_REPLAY_PAUSED","PG_LAST_WAL_RECEIVE_LSN","PG_LAST_WAL_REPLAY_LSN","PG_LAST_XACT_REPLAY_TIMESTAMP","PG_LOGICAL_EMIT_MESSAGE","PG_LOGICAL_SLOT_GET_BINARY_CHANGES","PG_LOGICAL_SLOT_GET_CHANGES","PG_LOGICAL_SLOT_PEEK_BINARY_CHANGES","PG_LOGICAL_SLOT_PEEK_CHANGES","PG_LOG_BACKEND_MEMORY_CONTEXTS","PG_LS_ARCHIVE_STATUSDIR","PG_LS_DIR","PG_LS_LOGDIR","PG_LS_TMPDIR","PG_LS_WALDIR","PG_PARTITION_ANCESTORS","PG_PARTITION_ROOT","PG_PARTITION_TREE","PG_PROMOTE","PG_READ_BINARY_FILE","PG_READ_FILE","PG_RELATION_FILENODE","PG_RELATION_FILEPATH","PG_RELATION_SIZE","PG_RELOAD_CONF","PG_REPLICATION_ORIGIN_ADVANCE","PG_REPLICATION_ORIGIN_CREATE","PG_REPLICATION_ORIGIN_DROP","PG_REPLICATION_ORIGIN_OID","PG_REPLICATION_ORIGIN_PROGRESS","PG_REPLICATION_ORIGIN_SESSION_IS_SETUP","PG_REPLICATION_ORIGIN_SESSION_PROGRESS","PG_REPLICATION_ORIGIN_SESSION_RESET","PG_REPLICATION_ORIGIN_SESSION_SETUP","PG_REPLICATION_ORIGIN_XACT_RESET","PG_REPLICATION_ORIGIN_XACT_SETUP","PG_REPLICATION_SLOT_ADVANCE","PG_ROTATE_LOGFILE","PG_SIZE_BYTES","PG_SIZE_PRETTY","PG_START_BACKUP","PG_STAT_FILE","PG_STOP_BACKUP","PG_SWITCH_WAL","PG_TABLESPACE_SIZE","PG_TABLE_SIZE","PG_TERMINATE_BACKEND","PG_TOTAL_RELATION_SIZE","PG_TRY_ADVISORY_LOCK","PG_TRY_ADVISORY_LOCK_SHARED","PG_TRY_ADVISORY_XACT_LOCK","PG_TRY_ADVISORY_XACT_LOCK_SHARED","PG_WALFILE_NAME","PG_WALFILE_NAME_OFFSET","PG_WAL_LSN_DIFF","PG_WAL_REPLAY_PAUSE","PG_WAL_REPLAY_RESUME","SET_CONFIG","SUPPRESS_REDUNDANT_UPDATES_TRIGGER","TSVECTOR_UPDATE_TRIGGER","TSVECTOR_UPDATE_TRIGGER_COLUMN","PG_EVENT_TRIGGER_DDL_COMMANDS","PG_EVENT_TRIGGER_DROPPED_OBJECTS","PG_EVENT_TRIGGER_TABLE_REWRITE_OID","PG_EVENT_TRIGGER_TABLE_REWRITE_REASON","PG_GET_OBJECT_ADDRESS","PG_MCV_LIST_ITEMS","CAST"]});var Zj,ez,tz=G(()=>{Zj=["ALL","ANALYSE","ANALYZE","AND","ANY","AS","ASC","ASYMMETRIC","AUTHORIZATION","BETWEEN","BINARY","BOTH","CASE","CAST","CHECK","COLLATE","COLLATION","COLUMN","CONCURRENTLY","CONSTRAINT","CREATE","CROSS","CURRENT_CATALOG","CURRENT_DATE","CURRENT_ROLE","CURRENT_SCHEMA","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","DAY","DEFAULT","DEFERRABLE","DESC","DISTINCT","DO","ELSE","END","EXCEPT","EXISTS","FALSE","FETCH","FILTER","FOR","FOREIGN","FREEZE","FROM","FULL","GRANT","GROUP","HAVING","HOUR","ILIKE","IN","INITIALLY","INNER","INOUT","INTERSECT","INTO","IS","ISNULL","JOIN","LATERAL","LEADING","LEFT","LIKE","LIMIT","LOCALTIME","LOCALTIMESTAMP","MINUTE","MONTH","NATURAL","NOT","NOTNULL","NULL","NULLIF","OFFSET","ON","ONLY","OR","ORDER","OUT","OUTER","OVER","OVERLAPS","PLACING","PRIMARY","REFERENCES","RETURNING","RIGHT","ROW","SECOND","SELECT","SESSION_USER","SIMILAR","SOME","SYMMETRIC","TABLE","TABLESAMPLE","THEN","TO","TRAILING","TRUE","UNION","UNIQUE","USER","USING","VALUES","VARIADIC","VERBOSE","WHEN","WHERE","WINDOW","WITH","WITHIN","WITHOUT","YEAR"],ez=["ARRAY","BIGINT","BIT","BIT VARYING","BOOL","BOOLEAN","CHAR","CHARACTER","CHARACTER VARYING","DECIMAL","DEC","DOUBLE","ENUM","FLOAT","INT","INTEGER","INTERVAL","NCHAR","NUMERIC","JSON","JSONB","PRECISION","REAL","SMALLINT","TEXT","TIME","TIMESTAMP","TIMESTAMPTZ","UUID","VARCHAR","XML","ZONE"]});var U0e,B0e,rz,Zb,F0e,H0e,G0e,W0e,aR,ey=G(()=>{xt();Qj();tz();U0e=x(["SELECT [ALL | DISTINCT]"]),B0e=x(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY [ALL | DISTINCT]","HAVING","WINDOW","PARTITION BY","ORDER BY","LIMIT","OFFSET","FETCH {FIRST | NEXT}","FOR {UPDATE | NO KEY UPDATE | SHARE | KEY SHARE} [OF]","INSERT INTO","VALUES","DEFAULT VALUES","SET","RETURNING"]),rz=x(["CREATE [GLOBAL | LOCAL] [TEMPORARY | TEMP | UNLOGGED] TABLE [IF NOT EXISTS]"]),Zb=x(["CREATE [OR REPLACE] [TEMP | TEMPORARY] [RECURSIVE] VIEW","CREATE [MATERIALIZED] VIEW [IF NOT EXISTS]","UPDATE [ONLY]","WHERE CURRENT OF","ON CONFLICT","DELETE FROM [ONLY]","DROP TABLE [IF EXISTS]","ALTER TABLE [IF EXISTS] [ONLY]","ALTER TABLE ALL IN TABLESPACE","RENAME [COLUMN]","RENAME TO","ADD [COLUMN] [IF NOT EXISTS]","DROP [COLUMN] [IF EXISTS]","ALTER [COLUMN]","SET DATA TYPE","{SET | DROP} DEFAULT","{SET | DROP} NOT NULL","TRUNCATE [TABLE] [ONLY]","SET SCHEMA","AFTER","ABORT","ALTER AGGREGATE","ALTER COLLATION","ALTER CONVERSION","ALTER DATABASE","ALTER DEFAULT PRIVILEGES","ALTER DOMAIN","ALTER EVENT TRIGGER","ALTER EXTENSION","ALTER FOREIGN DATA WRAPPER","ALTER FOREIGN TABLE","ALTER FUNCTION","ALTER GROUP","ALTER INDEX","ALTER LANGUAGE","ALTER LARGE OBJECT","ALTER MATERIALIZED VIEW","ALTER OPERATOR","ALTER OPERATOR CLASS","ALTER OPERATOR FAMILY","ALTER POLICY","ALTER PROCEDURE","ALTER PUBLICATION","ALTER ROLE","ALTER ROUTINE","ALTER RULE","ALTER SCHEMA","ALTER SEQUENCE","ALTER SERVER","ALTER STATISTICS","ALTER SUBSCRIPTION","ALTER SYSTEM","ALTER TABLESPACE","ALTER TEXT SEARCH CONFIGURATION","ALTER TEXT SEARCH DICTIONARY","ALTER TEXT SEARCH PARSER","ALTER TEXT SEARCH TEMPLATE","ALTER TRIGGER","ALTER TYPE","ALTER USER","ALTER USER MAPPING","ALTER VIEW","ANALYZE","BEGIN","CALL","CHECKPOINT","CLOSE","CLUSTER","COMMENT ON","COMMIT","COMMIT PREPARED","COPY","CREATE ACCESS METHOD","CREATE [OR REPLACE] AGGREGATE","CREATE CAST","CREATE COLLATION","CREATE [DEFAULT] CONVERSION","CREATE DATABASE","CREATE DOMAIN","CREATE EVENT TRIGGER","CREATE EXTENSION","CREATE FOREIGN DATA WRAPPER","CREATE FOREIGN TABLE","CREATE [OR REPLACE] FUNCTION","CREATE GROUP","CREATE [UNIQUE] INDEX","CREATE [OR REPLACE] [TRUSTED] [PROCEDURAL] LANGUAGE","CREATE OPERATOR","CREATE OPERATOR CLASS","CREATE OPERATOR FAMILY","CREATE POLICY","CREATE [OR REPLACE] PROCEDURE","CREATE PUBLICATION","CREATE ROLE","CREATE [OR REPLACE] RULE","CREATE SCHEMA [AUTHORIZATION]","CREATE [TEMPORARY | TEMP | UNLOGGED] SEQUENCE","CREATE SERVER","CREATE STATISTICS","CREATE SUBSCRIPTION","CREATE TABLESPACE","CREATE TEXT SEARCH CONFIGURATION","CREATE TEXT SEARCH DICTIONARY","CREATE TEXT SEARCH PARSER","CREATE TEXT SEARCH TEMPLATE","CREATE [OR REPLACE] TRANSFORM","CREATE [OR REPLACE] [CONSTRAINT] TRIGGER","CREATE TYPE","CREATE USER","CREATE USER MAPPING","DEALLOCATE","DECLARE","DISCARD","DROP ACCESS METHOD","DROP AGGREGATE","DROP CAST","DROP COLLATION","DROP CONVERSION","DROP DATABASE","DROP DOMAIN","DROP EVENT TRIGGER","DROP EXTENSION","DROP FOREIGN DATA WRAPPER","DROP FOREIGN TABLE","DROP FUNCTION","DROP GROUP","DROP IDENTITY","DROP INDEX","DROP LANGUAGE","DROP MATERIALIZED VIEW [IF EXISTS]","DROP OPERATOR","DROP OPERATOR CLASS","DROP OPERATOR FAMILY","DROP OWNED","DROP POLICY","DROP PROCEDURE","DROP PUBLICATION","DROP ROLE","DROP ROUTINE","DROP RULE","DROP SCHEMA","DROP SEQUENCE","DROP SERVER","DROP STATISTICS","DROP SUBSCRIPTION","DROP TABLESPACE","DROP TEXT SEARCH CONFIGURATION","DROP TEXT SEARCH DICTIONARY","DROP TEXT SEARCH PARSER","DROP TEXT SEARCH TEMPLATE","DROP TRANSFORM","DROP TRIGGER","DROP TYPE","DROP USER","DROP USER MAPPING","DROP VIEW","EXECUTE","EXPLAIN","FETCH","GRANT","IMPORT FOREIGN SCHEMA","LISTEN","LOAD","LOCK","MOVE","NOTIFY","OVERRIDING SYSTEM VALUE","PREPARE","PREPARE TRANSACTION","REASSIGN OWNED","REFRESH MATERIALIZED VIEW","REINDEX","RELEASE SAVEPOINT","RESET [ALL|ROLE|SESSION AUTHORIZATION]","REVOKE","ROLLBACK","ROLLBACK PREPARED","ROLLBACK TO SAVEPOINT","SAVEPOINT","SECURITY LABEL","SELECT INTO","SET CONSTRAINTS","SET ROLE","SET SESSION AUTHORIZATION","SET TRANSACTION","SHOW","START TRANSACTION","UNLISTEN","VACUUM"]),F0e=x(["UNION [ALL | DISTINCT]","EXCEPT [ALL | DISTINCT]","INTERSECT [ALL | DISTINCT]"]),H0e=x(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL [INNER] JOIN","NATURAL {LEFT | RIGHT | FULL} [OUTER] JOIN"]),G0e=x(["PRIMARY KEY","GENERATED {ALWAYS | BY DEFAULT} AS IDENTITY","ON {UPDATE | DELETE} [NO ACTION | RESTRICT | CASCADE | SET NULL | SET DEFAULT]","DO {NOTHING | UPDATE}","AS MATERIALIZED","{ROWS | RANGE | GROUPS} BETWEEN","IS [NOT] DISTINCT FROM","NULLS {FIRST | LAST}","WITH ORDINALITY"]),W0e=x(["[TIMESTAMP | TIME] {WITH | WITHOUT} TIME ZONE"]),aR={name:"postgresql",tokenizerOptions:{reservedSelect:U0e,reservedClauses:[...B0e,...rz,...Zb],reservedSetOperations:F0e,reservedJoins:H0e,reservedKeywordPhrases:G0e,reservedDataTypePhrases:W0e,reservedKeywords:Zj,reservedDataTypes:ez,reservedFunctionNames:Jj,nestedBlockComments:!0,extraParens:["[]"],underscoresInNumbers:!0,stringTypes:["$$",{quote:"''-qq",prefixes:["U&"]},{quote:"''-qq-bs",prefixes:["E"],requirePrefix:!0},{quote:"''-raw",prefixes:["B","X"],requirePrefix:!0}],identTypes:[{quote:'""-qq',prefixes:["U&"]}],identChars:{rest:"$"},paramTypes:{numbered:["$"]},operators:["%","^","|/","||/","@",":=","&","|","#","~","<<",">>","~>~","~<~","~>=~","~<=~","@-@","@@","##","<->","&&","&<","&>","<<|","&<|","|>>","|&>","<^","^>","?#","?-","?|","?-|","?||","@>","<@","~=","?","@?","?&","->","->>","#>","#>>","#-","=>",">>=","<<=","~~","~~*","!~~","!~~*","~","~*","!~","!~*","-|-","||","@@@","!!","^@","<%","%>","<<%","%>>","<<->","<->>","<<<->","<->>>","::",":","<#>","<=>","<+>","<~>","<%>"],operatorKeyword:!0},formatOptions:{alwaysDenseOperators:["::",":"],onelineClauses:[...rz,...Zb],tabularOnelineClauses:Zb}}});var nz,iz=G(()=>{nz=["ANY_VALUE","APPROXIMATE PERCENTILE_DISC","AVG","COUNT","LISTAGG","MAX","MEDIAN","MIN","PERCENTILE_CONT","STDDEV_SAMP","STDDEV_POP","SUM","VAR_SAMP","VAR_POP","array_concat","array_flatten","get_array_length","split_to_array","subarray","BIT_AND","BIT_OR","BOOL_AND","BOOL_OR","COALESCE","DECODE","GREATEST","LEAST","NVL","NVL2","NULLIF","ADD_MONTHS","AT TIME ZONE","CONVERT_TIMEZONE","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","DATE_CMP","DATE_CMP_TIMESTAMP","DATE_CMP_TIMESTAMPTZ","DATE_PART_YEAR","DATEADD","DATEDIFF","DATE_PART","DATE_TRUNC","EXTRACT","GETDATE","INTERVAL_CMP","LAST_DAY","MONTHS_BETWEEN","NEXT_DAY","SYSDATE","TIMEOFDAY","TIMESTAMP_CMP","TIMESTAMP_CMP_DATE","TIMESTAMP_CMP_TIMESTAMPTZ","TIMESTAMPTZ_CMP","TIMESTAMPTZ_CMP_DATE","TIMESTAMPTZ_CMP_TIMESTAMP","TIMEZONE","TO_TIMESTAMP","TRUNC","AddBBox","DropBBox","GeometryType","ST_AddPoint","ST_Angle","ST_Area","ST_AsBinary","ST_AsEWKB","ST_AsEWKT","ST_AsGeoJSON","ST_AsText","ST_Azimuth","ST_Boundary","ST_Collect","ST_Contains","ST_ContainsProperly","ST_ConvexHull","ST_CoveredBy","ST_Covers","ST_Crosses","ST_Dimension","ST_Disjoint","ST_Distance","ST_DistanceSphere","ST_DWithin","ST_EndPoint","ST_Envelope","ST_Equals","ST_ExteriorRing","ST_Force2D","ST_Force3D","ST_Force3DM","ST_Force3DZ","ST_Force4D","ST_GeometryN","ST_GeometryType","ST_GeomFromEWKB","ST_GeomFromEWKT","ST_GeomFromText","ST_GeomFromWKB","ST_InteriorRingN","ST_Intersects","ST_IsPolygonCCW","ST_IsPolygonCW","ST_IsClosed","ST_IsCollection","ST_IsEmpty","ST_IsSimple","ST_IsValid","ST_Length","ST_LengthSphere","ST_Length2D","ST_LineFromMultiPoint","ST_LineInterpolatePoint","ST_M","ST_MakeEnvelope","ST_MakeLine","ST_MakePoint","ST_MakePolygon","ST_MemSize","ST_MMax","ST_MMin","ST_Multi","ST_NDims","ST_NPoints","ST_NRings","ST_NumGeometries","ST_NumInteriorRings","ST_NumPoints","ST_Perimeter","ST_Perimeter2D","ST_Point","ST_PointN","ST_Points","ST_Polygon","ST_RemovePoint","ST_Reverse","ST_SetPoint","ST_SetSRID","ST_Simplify","ST_SRID","ST_StartPoint","ST_Touches","ST_Within","ST_X","ST_XMax","ST_XMin","ST_Y","ST_YMax","ST_YMin","ST_Z","ST_ZMax","ST_ZMin","SupportsBBox","CHECKSUM","FUNC_SHA1","FNV_HASH","MD5","SHA","SHA1","SHA2","HLL","HLL_CREATE_SKETCH","HLL_CARDINALITY","HLL_COMBINE","IS_VALID_JSON","IS_VALID_JSON_ARRAY","JSON_ARRAY_LENGTH","JSON_EXTRACT_ARRAY_ELEMENT_TEXT","JSON_EXTRACT_PATH_TEXT","JSON_PARSE","JSON_SERIALIZE","ABS","ACOS","ASIN","ATAN","ATAN2","CBRT","CEILING","CEIL","COS","COT","DEGREES","DEXP","DLOG1","DLOG10","EXP","FLOOR","LN","LOG","MOD","PI","POWER","RADIANS","RANDOM","ROUND","SIN","SIGN","SQRT","TAN","TO_HEX","TRUNC","EXPLAIN_MODEL","ASCII","BPCHARCMP","BTRIM","BTTEXT_PATTERN_CMP","CHAR_LENGTH","CHARACTER_LENGTH","CHARINDEX","CHR","COLLATE","CONCAT","CRC32","DIFFERENCE","INITCAP","LEFT","RIGHT","LEN","LENGTH","LOWER","LPAD","RPAD","LTRIM","OCTETINDEX","OCTET_LENGTH","POSITION","QUOTE_IDENT","QUOTE_LITERAL","REGEXP_COUNT","REGEXP_INSTR","REGEXP_REPLACE","REGEXP_SUBSTR","REPEAT","REPLACE","REPLICATE","REVERSE","RTRIM","SOUNDEX","SPLIT_PART","STRPOS","STRTOL","SUBSTRING","TEXTLEN","TRANSLATE","TRIM","UPPER","decimal_precision","decimal_scale","is_array","is_bigint","is_boolean","is_char","is_decimal","is_float","is_integer","is_object","is_scalar","is_smallint","is_varchar","json_typeof","AVG","COUNT","CUME_DIST","DENSE_RANK","FIRST_VALUE","LAST_VALUE","LAG","LEAD","LISTAGG","MAX","MEDIAN","MIN","NTH_VALUE","NTILE","PERCENT_RANK","PERCENTILE_CONT","PERCENTILE_DISC","RANK","RATIO_TO_REPORT","ROW_NUMBER","STDDEV_SAMP","STDDEV_POP","SUM","VAR_SAMP","VAR_POP","CAST","CONVERT","TO_CHAR","TO_DATE","TO_NUMBER","TEXT_TO_INT_ALT","TEXT_TO_NUMERIC_ALT","CHANGE_QUERY_PRIORITY","CHANGE_SESSION_PRIORITY","CHANGE_USER_PRIORITY","CURRENT_SETTING","PG_CANCEL_BACKEND","PG_TERMINATE_BACKEND","REBOOT_CLUSTER","SET_CONFIG","CURRENT_AWS_ACCOUNT","CURRENT_DATABASE","CURRENT_NAMESPACE","CURRENT_SCHEMA","CURRENT_SCHEMAS","CURRENT_USER","CURRENT_USER_ID","HAS_ASSUMEROLE_PRIVILEGE","HAS_DATABASE_PRIVILEGE","HAS_SCHEMA_PRIVILEGE","HAS_TABLE_PRIVILEGE","PG_BACKEND_PID","PG_GET_COLS","PG_GET_GRANTEE_BY_IAM_ROLE","PG_GET_IAM_ROLE_BY_USER","PG_GET_LATE_BINDING_VIEW_COLS","PG_LAST_COPY_COUNT","PG_LAST_COPY_ID","PG_LAST_UNLOAD_ID","PG_LAST_QUERY_ID","PG_LAST_UNLOAD_COUNT","SESSION_USER","SLICE_NUM","USER","VERSION"]});var sz,oz,az=G(()=>{sz=["AES128","AES256","ALL","ALLOWOVERWRITE","ANY","AS","ASC","AUTHORIZATION","BACKUP","BETWEEN","BINARY","BOTH","CHECK","COLUMN","CONSTRAINT","CREATE","CROSS","DEFAULT","DEFERRABLE","DEFLATE","DEFRAG","DESC","DISABLE","DISTINCT","DO","ENABLE","ENCODE","ENCRYPT","ENCRYPTION","EXPLICIT","FALSE","FOR","FOREIGN","FREEZE","FROM","FULL","GLOBALDICT256","GLOBALDICT64K","GROUP","IDENTITY","IGNORE","ILIKE","IN","INITIALLY","INNER","INTO","IS","ISNULL","LANGUAGE","LEADING","LIKE","LIMIT","LOCALTIME","LOCALTIMESTAMP","LUN","LUNS","MINUS","NATURAL","NEW","NOT","NOTNULL","NULL","NULLS","OFF","OFFLINE","OFFSET","OID","OLD","ON","ONLY","OPEN","ORDER","OUTER","OVERLAPS","PARALLEL","PARTITION","PERCENT","PERMISSIONS","PLACING","PRIMARY","RECOVER","REFERENCES","REJECTLOG","RESORT","RESPECT","RESTORE","SIMILAR","SNAPSHOT","SOME","SYSTEM","TABLE","TAG","TDES","THEN","TIMESTAMP","TO","TOP","TRAILING","TRUE","UNIQUE","USING","VERBOSE","WALLET","WITHOUT","ACCEPTANYDATE","ACCEPTINVCHARS","BLANKSASNULL","DATEFORMAT","EMPTYASNULL","ENCODING","ESCAPE","EXPLICIT_IDS","FILLRECORD","IGNOREBLANKLINES","IGNOREHEADER","REMOVEQUOTES","ROUNDEC","TIMEFORMAT","TRIMBLANKS","TRUNCATECOLUMNS","COMPROWS","COMPUPDATE","MAXERROR","NOLOAD","STATUPDATE","FORMAT","CSV","DELIMITER","FIXEDWIDTH","SHAPEFILE","AVRO","JSON","PARQUET","ORC","ACCESS_KEY_ID","CREDENTIALS","ENCRYPTED","IAM_ROLE","MASTER_SYMMETRIC_KEY","SECRET_ACCESS_KEY","SESSION_TOKEN","BZIP2","GZIP","LZOP","ZSTD","MANIFEST","READRATIO","REGION","SSH","RAW","AZ64","BYTEDICT","DELTA","DELTA32K","LZO","MOSTLY8","MOSTLY16","MOSTLY32","RUNLENGTH","TEXT255","TEXT32K","CATALOG_ROLE","SECRET_ARN","EXTERNAL","AUTO","EVEN","KEY","PREDICATE","COMPRESSION"],oz=["ARRAY","BIGINT","BPCHAR","CHAR","CHARACTER VARYING","CHARACTER","DECIMAL","INT","INT2","INT4","INT8","INTEGER","NCHAR","NUMERIC","NVARCHAR","SMALLINT","TEXT","VARBYTE","VARCHAR"]});var $0e,k0e,lz,ty,Y0e,V0e,q0e,X0e,lR,ry=G(()=>{xt();iz();az();$0e=x(["SELECT [ALL | DISTINCT]"]),k0e=x(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY","HAVING","QUALIFY","PARTITION BY","ORDER BY","LIMIT","OFFSET","INSERT INTO","VALUES","SET"]),lz=x(["CREATE [TEMPORARY | TEMP | LOCAL TEMPORARY | LOCAL TEMP] TABLE [IF NOT EXISTS]"]),ty=x(["CREATE [OR REPLACE | MATERIALIZED] VIEW","UPDATE","DELETE [FROM]","DROP TABLE [IF EXISTS]","ALTER TABLE","ALTER TABLE APPEND","ADD [COLUMN]","DROP [COLUMN]","RENAME TO","RENAME COLUMN","ALTER COLUMN","TYPE","ENCODE","TRUNCATE [TABLE]","ABORT","ALTER DATABASE","ALTER DATASHARE","ALTER DEFAULT PRIVILEGES","ALTER GROUP","ALTER MATERIALIZED VIEW","ALTER PROCEDURE","ALTER SCHEMA","ALTER USER","ANALYSE","ANALYZE","ANALYSE COMPRESSION","ANALYZE COMPRESSION","BEGIN","CALL","CANCEL","CLOSE","COMMIT","COPY","CREATE DATABASE","CREATE DATASHARE","CREATE EXTERNAL FUNCTION","CREATE EXTERNAL SCHEMA","CREATE EXTERNAL TABLE","CREATE FUNCTION","CREATE GROUP","CREATE LIBRARY","CREATE MODEL","CREATE PROCEDURE","CREATE SCHEMA","CREATE USER","DEALLOCATE","DECLARE","DESC DATASHARE","DROP DATABASE","DROP DATASHARE","DROP FUNCTION","DROP GROUP","DROP LIBRARY","DROP MODEL","DROP MATERIALIZED VIEW","DROP PROCEDURE","DROP SCHEMA","DROP USER","DROP VIEW","DROP","EXECUTE","EXPLAIN","FETCH","GRANT","LOCK","PREPARE","REFRESH MATERIALIZED VIEW","RESET","REVOKE","ROLLBACK","SELECT INTO","SET SESSION AUTHORIZATION","SET SESSION CHARACTERISTICS","SHOW","SHOW EXTERNAL TABLE","SHOW MODEL","SHOW DATASHARES","SHOW PROCEDURE","SHOW TABLE","SHOW VIEW","START TRANSACTION","UNLOAD","VACUUM"]),Y0e=x(["UNION [ALL]","EXCEPT","INTERSECT","MINUS"]),V0e=x(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL [INNER] JOIN","NATURAL {LEFT | RIGHT | FULL} [OUTER] JOIN"]),q0e=x(["NULL AS","DATA CATALOG","HIVE METASTORE","{ROWS | RANGE} BETWEEN"]),X0e=x([]),lR={name:"redshift",tokenizerOptions:{reservedSelect:$0e,reservedClauses:[...k0e,...lz,...ty],reservedSetOperations:Y0e,reservedJoins:V0e,reservedKeywordPhrases:q0e,reservedDataTypePhrases:X0e,reservedKeywords:sz,reservedDataTypes:oz,reservedFunctionNames:nz,extraParens:["[]"],stringTypes:["''-qq"],identTypes:['""-qq'],identChars:{first:"#"},paramTypes:{numbered:["$"]},operators:["^","%","@","|/","||/","&","|","~","<<",">>","||","::"]},formatOptions:{alwaysDenseOperators:["::"],onelineClauses:[...lz,...ty],tabularOnelineClauses:ty}}});var cz,uz,dz=G(()=>{cz=["ADD","AFTER","ALL","ALTER","ANALYZE","AND","ANTI","ANY","ARCHIVE","AS","ASC","AT","AUTHORIZATION","BETWEEN","BOTH","BUCKET","BUCKETS","BY","CACHE","CASCADE","CAST","CHANGE","CHECK","CLEAR","CLUSTER","CLUSTERED","CODEGEN","COLLATE","COLLECTION","COLUMN","COLUMNS","COMMENT","COMMIT","COMPACT","COMPACTIONS","COMPUTE","CONCATENATE","CONSTRAINT","COST","CREATE","CROSS","CUBE","CURRENT","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","DATA","DATABASE","DATABASES","DAY","DBPROPERTIES","DEFINED","DELETE","DELIMITED","DESC","DESCRIBE","DFS","DIRECTORIES","DIRECTORY","DISTINCT","DISTRIBUTE","DIV","DROP","ESCAPE","ESCAPED","EXCEPT","EXCHANGE","EXISTS","EXPORT","EXTENDED","EXTERNAL","EXTRACT","FALSE","FETCH","FIELDS","FILTER","FILEFORMAT","FIRST","FIRST_VALUE","FOLLOWING","FOR","FOREIGN","FORMAT","FORMATTED","FULL","FUNCTION","FUNCTIONS","GLOBAL","GRANT","GROUP","GROUPING","HOUR","IF","IGNORE","IMPORT","IN","INDEX","INDEXES","INNER","INPATH","INPUTFORMAT","INTERSECT","INTO","IS","ITEMS","KEYS","LAST","LAST_VALUE","LATERAL","LAZY","LEADING","LEFT","LIKE","LINES","LIST","LOCAL","LOCATION","LOCK","LOCKS","LOGICAL","MACRO","MATCHED","MERGE","MINUTE","MONTH","MSCK","NAMESPACE","NAMESPACES","NATURAL","NO","NOT","NULL","NULLS","OF","ONLY","OPTION","OPTIONS","OR","ORDER","OUT","OUTER","OUTPUTFORMAT","OVER","OVERLAPS","OVERLAY","OVERWRITE","OWNER","PARTITION","PARTITIONED","PARTITIONS","PERCENT","PLACING","POSITION","PRECEDING","PRIMARY","PRINCIPALS","PROPERTIES","PURGE","QUERY","RANGE","RECORDREADER","RECORDWRITER","RECOVER","REDUCE","REFERENCES","RENAME","REPAIR","REPLACE","RESPECT","RESTRICT","REVOKE","RIGHT","RLIKE","ROLE","ROLES","ROLLBACK","ROLLUP","ROW","ROWS","SCHEMA","SECOND","SELECT","SEMI","SEPARATED","SERDE","SERDEPROPERTIES","SESSION_USER","SETS","SHOW","SKEWED","SOME","SORT","SORTED","START","STATISTICS","STORED","STRATIFY","SUBSTR","SUBSTRING","TABLE","TABLES","TBLPROPERTIES","TEMPORARY","TERMINATED","THEN","TO","TOUCH","TRAILING","TRANSACTION","TRANSACTIONS","TRIM","TRUE","TRUNCATE","UNARCHIVE","UNBOUNDED","UNCACHE","UNIQUE","UNKNOWN","UNLOCK","UNSET","USE","USER","USING","VIEW","WINDOW","YEAR","ANALYSE","ARRAY_ZIP","COALESCE","CONTAINS","CONVERT","DAYS","DAY_HOUR","DAY_MINUTE","DAY_SECOND","DECODE","DEFAULT","DISTINCTROW","ENCODE","EXPLODE","EXPLODE_OUTER","FIXED","GREATEST","GROUP_CONCAT","HOURS","HOUR_MINUTE","HOUR_SECOND","IFNULL","LEAST","LEVEL","MINUTE_SECOND","NULLIF","OFFSET","ON","OPTIMIZE","REGEXP","SEPARATOR","SIZE","TYPE","TYPES","UNSIGNED","VARIABLES","YEAR_MONTH"],uz=["ARRAY","BIGINT","BINARY","BOOLEAN","BYTE","CHAR","DATE","DEC","DECIMAL","DOUBLE","FLOAT","INT","INTEGER","INTERVAL","LONG","MAP","NUMERIC","REAL","SHORT","SMALLINT","STRING","STRUCT","TIMESTAMP_LTZ","TIMESTAMP_NTZ","TIMESTAMP","TINYINT","VARCHAR"]});var fz,Ez=G(()=>{fz=["APPROX_COUNT_DISTINCT","APPROX_PERCENTILE","AVG","BIT_AND","BIT_OR","BIT_XOR","BOOL_AND","BOOL_OR","COLLECT_LIST","COLLECT_SET","CORR","COUNT","COUNT","COUNT","COUNT_IF","COUNT_MIN_SKETCH","COVAR_POP","COVAR_SAMP","EVERY","FIRST","FIRST_VALUE","GROUPING","GROUPING_ID","KURTOSIS","LAST","LAST_VALUE","MAX","MAX_BY","MEAN","MIN","MIN_BY","PERCENTILE","PERCENTILE","PERCENTILE_APPROX","SKEWNESS","STD","STDDEV","STDDEV_POP","STDDEV_SAMP","SUM","VAR_POP","VAR_SAMP","VARIANCE","CUME_DIST","DENSE_RANK","LAG","LEAD","NTH_VALUE","NTILE","PERCENT_RANK","RANK","ROW_NUMBER","ARRAY","ARRAY_CONTAINS","ARRAY_DISTINCT","ARRAY_EXCEPT","ARRAY_INTERSECT","ARRAY_JOIN","ARRAY_MAX","ARRAY_MIN","ARRAY_POSITION","ARRAY_REMOVE","ARRAY_REPEAT","ARRAY_UNION","ARRAYS_OVERLAP","ARRAYS_ZIP","FLATTEN","SEQUENCE","SHUFFLE","SLICE","SORT_ARRAY","ELEMENT_AT","ELEMENT_AT","MAP_CONCAT","MAP_ENTRIES","MAP_FROM_ARRAYS","MAP_FROM_ENTRIES","MAP_KEYS","MAP_VALUES","STR_TO_MAP","ADD_MONTHS","CURRENT_DATE","CURRENT_DATE","CURRENT_TIMESTAMP","CURRENT_TIMESTAMP","CURRENT_TIMEZONE","DATE_ADD","DATE_FORMAT","DATE_FROM_UNIX_DATE","DATE_PART","DATE_SUB","DATE_TRUNC","DATEDIFF","DAY","DAYOFMONTH","DAYOFWEEK","DAYOFYEAR","EXTRACT","FROM_UNIXTIME","FROM_UTC_TIMESTAMP","HOUR","LAST_DAY","MAKE_DATE","MAKE_DT_INTERVAL","MAKE_INTERVAL","MAKE_TIMESTAMP","MAKE_YM_INTERVAL","MINUTE","MONTH","MONTHS_BETWEEN","NEXT_DAY","NOW","QUARTER","SECOND","SESSION_WINDOW","TIMESTAMP_MICROS","TIMESTAMP_MILLIS","TIMESTAMP_SECONDS","TO_DATE","TO_TIMESTAMP","TO_UNIX_TIMESTAMP","TO_UTC_TIMESTAMP","TRUNC","UNIX_DATE","UNIX_MICROS","UNIX_MILLIS","UNIX_SECONDS","UNIX_TIMESTAMP","WEEKDAY","WEEKOFYEAR","WINDOW","YEAR","FROM_JSON","GET_JSON_OBJECT","JSON_ARRAY_LENGTH","JSON_OBJECT_KEYS","JSON_TUPLE","SCHEMA_OF_JSON","TO_JSON","ABS","ACOS","ACOSH","AGGREGATE","ARRAY_SORT","ASCII","ASIN","ASINH","ASSERT_TRUE","ATAN","ATAN2","ATANH","BASE64","BIN","BIT_COUNT","BIT_GET","BIT_LENGTH","BROUND","BTRIM","CARDINALITY","CBRT","CEIL","CEILING","CHAR_LENGTH","CHARACTER_LENGTH","CHR","CONCAT","CONCAT_WS","CONV","COS","COSH","COT","CRC32","CURRENT_CATALOG","CURRENT_DATABASE","CURRENT_USER","DEGREES","ELT","EXP","EXPM1","FACTORIAL","FIND_IN_SET","FLOOR","FORALL","FORMAT_NUMBER","FORMAT_STRING","FROM_CSV","GETBIT","HASH","HEX","HYPOT","INITCAP","INLINE","INLINE_OUTER","INPUT_FILE_BLOCK_LENGTH","INPUT_FILE_BLOCK_START","INPUT_FILE_NAME","INSTR","ISNAN","ISNOTNULL","ISNULL","JAVA_METHOD","LCASE","LEFT","LENGTH","LEVENSHTEIN","LN","LOCATE","LOG","LOG10","LOG1P","LOG2","LOWER","LPAD","LTRIM","MAP_FILTER","MAP_ZIP_WITH","MD5","MOD","MONOTONICALLY_INCREASING_ID","NAMED_STRUCT","NANVL","NEGATIVE","NVL","NVL2","OCTET_LENGTH","OVERLAY","PARSE_URL","PI","PMOD","POSEXPLODE","POSEXPLODE_OUTER","POSITION","POSITIVE","POW","POWER","PRINTF","RADIANS","RAISE_ERROR","RAND","RANDN","RANDOM","REFLECT","REGEXP_EXTRACT","REGEXP_EXTRACT_ALL","REGEXP_LIKE","REGEXP_REPLACE","REPEAT","REPLACE","REVERSE","RIGHT","RINT","ROUND","RPAD","RTRIM","SCHEMA_OF_CSV","SENTENCES","SHA","SHA1","SHA2","SHIFTLEFT","SHIFTRIGHT","SHIFTRIGHTUNSIGNED","SIGN","SIGNUM","SIN","SINH","SOUNDEX","SPACE","SPARK_PARTITION_ID","SPLIT","SQRT","STACK","SUBSTR","SUBSTRING","SUBSTRING_INDEX","TAN","TANH","TO_CSV","TRANSFORM_KEYS","TRANSFORM_VALUES","TRANSLATE","TRIM","TRY_ADD","TRY_DIVIDE","TYPEOF","UCASE","UNBASE64","UNHEX","UPPER","UUID","VERSION","WIDTH_BUCKET","XPATH","XPATH_BOOLEAN","XPATH_DOUBLE","XPATH_FLOAT","XPATH_INT","XPATH_LONG","XPATH_NUMBER","XPATH_SHORT","XPATH_STRING","XXHASH64","ZIP_WITH","CAST","COALESCE","NULLIF"]});function ewe(t){return t.map((e,r)=>{let n=t[r-1]||Li,i=t[r+1]||Li;return qn.WINDOW(e)&&i.type===k.OPEN_PAREN?Object.assign(Object.assign({},e),{type:k.RESERVED_FUNCTION_NAME}):e.text==="ITEMS"&&e.type===k.RESERVED_KEYWORD&&!(n.text==="COLLECTION"&&i.text==="TERMINATED")?Object.assign(Object.assign({},e),{type:k.IDENTIFIER,text:e.raw}):e})}var j0e,z0e,hz,ny,K0e,J0e,Q0e,Z0e,cR,iy=G(()=>{xt();Cn();dz();Ez();j0e=x(["SELECT [ALL | DISTINCT]"]),z0e=x(["WITH","FROM","WHERE","GROUP BY","HAVING","WINDOW","PARTITION BY","ORDER BY","SORT BY","CLUSTER BY","DISTRIBUTE BY","LIMIT","INSERT [INTO | OVERWRITE] [TABLE]","VALUES","INSERT OVERWRITE [LOCAL] DIRECTORY","LOAD DATA [LOCAL] INPATH","[OVERWRITE] INTO TABLE"]),hz=x(["CREATE [EXTERNAL] TABLE [IF NOT EXISTS]"]),ny=x(["CREATE [OR REPLACE] [GLOBAL TEMPORARY | TEMPORARY] VIEW [IF NOT EXISTS]","DROP TABLE [IF EXISTS]","ALTER TABLE","ADD COLUMNS","DROP {COLUMN | COLUMNS}","RENAME TO","RENAME COLUMN","ALTER COLUMN","TRUNCATE TABLE","LATERAL VIEW","ALTER DATABASE","ALTER VIEW","CREATE DATABASE","CREATE FUNCTION","DROP DATABASE","DROP FUNCTION","DROP VIEW","REPAIR TABLE","USE DATABASE","TABLESAMPLE","PIVOT","TRANSFORM","EXPLAIN","ADD FILE","ADD JAR","ANALYZE TABLE","CACHE TABLE","CLEAR CACHE","DESCRIBE DATABASE","DESCRIBE FUNCTION","DESCRIBE QUERY","DESCRIBE TABLE","LIST FILE","LIST JAR","REFRESH","REFRESH TABLE","REFRESH FUNCTION","RESET","SHOW COLUMNS","SHOW CREATE TABLE","SHOW DATABASES","SHOW FUNCTIONS","SHOW PARTITIONS","SHOW TABLE EXTENDED","SHOW TABLES","SHOW TBLPROPERTIES","SHOW VIEWS","UNCACHE TABLE"]),K0e=x(["UNION [ALL | DISTINCT]","EXCEPT [ALL | DISTINCT]","INTERSECT [ALL | DISTINCT]"]),J0e=x(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL [INNER] JOIN","NATURAL {LEFT | RIGHT | FULL} [OUTER] JOIN","[LEFT] {ANTI | SEMI} JOIN","NATURAL [LEFT] {ANTI | SEMI} JOIN"]),Q0e=x(["ON DELETE","ON UPDATE","CURRENT ROW","{ROWS | RANGE} BETWEEN"]),Z0e=x([]),cR={name:"spark",tokenizerOptions:{reservedSelect:j0e,reservedClauses:[...z0e,...hz,...ny],reservedSetOperations:K0e,reservedJoins:J0e,reservedKeywordPhrases:Q0e,reservedDataTypePhrases:Z0e,supportsXor:!0,reservedKeywords:cz,reservedDataTypes:uz,reservedFunctionNames:fz,extraParens:["[]"],stringTypes:["''-bs",'""-bs',{quote:"''-raw",prefixes:["R","X"],requirePrefix:!0},{quote:'""-raw',prefixes:["R","X"],requirePrefix:!0}],identTypes:["``"],identChars:{allowFirstCharNumber:!0},variableTypes:[{quote:"{}",prefixes:["$"],requirePrefix:!0}],operators:["%","~","^","|","&","<=>","==","!","||","->"],postProcess:ewe},formatOptions:{onelineClauses:[...hz,...ny],tabularOnelineClauses:ny}}});var pz,Tz=G(()=>{pz=["ABS","CHANGES","CHAR","COALESCE","FORMAT","GLOB","HEX","IFNULL","IIF","INSTR","LAST_INSERT_ROWID","LENGTH","LIKE","LIKELIHOOD","LIKELY","LOAD_EXTENSION","LOWER","LTRIM","NULLIF","PRINTF","QUOTE","RANDOM","RANDOMBLOB","REPLACE","ROUND","RTRIM","SIGN","SOUNDEX","SQLITE_COMPILEOPTION_GET","SQLITE_COMPILEOPTION_USED","SQLITE_OFFSET","SQLITE_SOURCE_ID","SQLITE_VERSION","SUBSTR","SUBSTRING","TOTAL_CHANGES","TRIM","TYPEOF","UNICODE","UNLIKELY","UPPER","ZEROBLOB","AVG","COUNT","GROUP_CONCAT","MAX","MIN","SUM","TOTAL","DATE","TIME","DATETIME","JULIANDAY","UNIXEPOCH","STRFTIME","row_number","rank","dense_rank","percent_rank","cume_dist","ntile","lag","lead","first_value","last_value","nth_value","ACOS","ACOSH","ASIN","ASINH","ATAN","ATAN2","ATANH","CEIL","CEILING","COS","COSH","DEGREES","EXP","FLOOR","LN","LOG","LOG","LOG10","LOG2","MOD","PI","POW","POWER","RADIANS","SIN","SINH","SQRT","TAN","TANH","TRUNC","JSON","JSON_ARRAY","JSON_ARRAY_LENGTH","JSON_ARRAY_LENGTH","JSON_EXTRACT","JSON_INSERT","JSON_OBJECT","JSON_PATCH","JSON_REMOVE","JSON_REPLACE","JSON_SET","JSON_TYPE","JSON_TYPE","JSON_VALID","JSON_QUOTE","JSON_GROUP_ARRAY","JSON_GROUP_OBJECT","JSON_EACH","JSON_TREE","CAST"]});var Sz,Rz,Az=G(()=>{Sz=["ABORT","ACTION","ADD","AFTER","ALL","ALTER","AND","ARE","ALWAYS","ANALYZE","AS","ASC","ATTACH","AUTOINCREMENT","BEFORE","BEGIN","BETWEEN","BY","CASCADE","CASE","CAST","CHECK","COLLATE","COLUMN","COMMIT","CONFLICT","CONSTRAINT","CREATE","CROSS","CURRENT","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","DATABASE","DEFAULT","DEFERRABLE","DEFERRED","DELETE","DESC","DETACH","DISTINCT","DO","DROP","EACH","ELSE","END","ESCAPE","EXCEPT","EXCLUDE","EXCLUSIVE","EXISTS","EXPLAIN","FAIL","FILTER","FIRST","FOLLOWING","FOR","FOREIGN","FROM","FULL","GENERATED","GLOB","GROUP","HAVING","IF","IGNORE","IMMEDIATE","IN","INDEX","INDEXED","INITIALLY","INNER","INSERT","INSTEAD","INTERSECT","INTO","IS","ISNULL","JOIN","KEY","LAST","LEFT","LIKE","LIMIT","MATCH","MATERIALIZED","NATURAL","NO","NOT","NOTHING","NOTNULL","NULL","NULLS","OF","OFFSET","ON","ONLY","OPEN","OR","ORDER","OTHERS","OUTER","OVER","PARTITION","PLAN","PRAGMA","PRECEDING","PRIMARY","QUERY","RAISE","RANGE","RECURSIVE","REFERENCES","REGEXP","REINDEX","RELEASE","RENAME","REPLACE","RESTRICT","RETURNING","RIGHT","ROLLBACK","ROW","ROWS","SAVEPOINT","SELECT","SET","TABLE","TEMP","TEMPORARY","THEN","TIES","TO","TRANSACTION","TRIGGER","UNBOUNDED","UNION","UNIQUE","UPDATE","USING","VACUUM","VALUES","VIEW","VIRTUAL","WHEN","WHERE","WINDOW","WITH","WITHOUT"],Rz=["ANY","ARRAY","BLOB","CHARACTER","DECIMAL","INT","INTEGER","NATIVE CHARACTER","NCHAR","NUMERIC","NVARCHAR","REAL","TEXT","VARCHAR","VARYING CHARACTER"]});var twe,rwe,mz,sy,nwe,iwe,swe,owe,uR,oy=G(()=>{xt();Tz();Az();twe=x(["SELECT [ALL | DISTINCT]"]),rwe=x(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY","HAVING","WINDOW","PARTITION BY","ORDER BY","LIMIT","OFFSET","INSERT [OR ABORT | OR FAIL | OR IGNORE | OR REPLACE | OR ROLLBACK] INTO","REPLACE INTO","VALUES","SET","RETURNING"]),mz=x(["CREATE [TEMPORARY | TEMP] TABLE [IF NOT EXISTS]"]),sy=x(["CREATE [TEMPORARY | TEMP] VIEW [IF NOT EXISTS]","UPDATE [OR ABORT | OR FAIL | OR IGNORE | OR REPLACE | OR ROLLBACK]","ON CONFLICT","DELETE FROM","DROP TABLE [IF EXISTS]","ALTER TABLE","ADD [COLUMN]","DROP [COLUMN]","RENAME [COLUMN]","RENAME TO","SET SCHEMA"]),nwe=x(["UNION [ALL]","EXCEPT","INTERSECT"]),iwe=x(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL [INNER] JOIN","NATURAL {LEFT | RIGHT | FULL} [OUTER] JOIN"]),swe=x(["ON {UPDATE | DELETE} [SET NULL | SET DEFAULT]","{ROWS | RANGE | GROUPS} BETWEEN","DO UPDATE"]),owe=x([]),uR={name:"sqlite",tokenizerOptions:{reservedSelect:twe,reservedClauses:[...rwe,...mz,...sy],reservedSetOperations:nwe,reservedJoins:iwe,reservedKeywordPhrases:swe,reservedDataTypePhrases:owe,reservedKeywords:Sz,reservedDataTypes:Rz,reservedFunctionNames:pz,stringTypes:["''-qq",{quote:"''-raw",prefixes:["X"],requirePrefix:!0}],identTypes:['""-qq',"``","[]"],paramTypes:{positional:!0,numbered:["?"],named:[":","@","$"]},operators:["%","~","&","|","<<",">>","==","->","->>","||"]},formatOptions:{onelineClauses:[...mz,...sy],tabularOnelineClauses:sy}}});var gz,_z=G(()=>{gz=["GROUPING","RANK","DENSE_RANK","PERCENT_RANK","CUME_DIST","ROW_NUMBER","POSITION","OCCURRENCES_REGEX","POSITION_REGEX","EXTRACT","CHAR_LENGTH","CHARACTER_LENGTH","OCTET_LENGTH","CARDINALITY","ABS","MOD","LN","EXP","POWER","SQRT","FLOOR","CEIL","CEILING","WIDTH_BUCKET","SUBSTRING","SUBSTRING_REGEX","UPPER","LOWER","CONVERT","TRANSLATE","TRANSLATE_REGEX","TRIM","OVERLAY","NORMALIZE","SPECIFICTYPE","CURRENT_DATE","CURRENT_TIME","LOCALTIME","CURRENT_TIMESTAMP","LOCALTIMESTAMP","COUNT","AVG","MAX","MIN","SUM","STDDEV_POP","STDDEV_SAMP","VAR_SAMP","VAR_POP","COLLECT","FUSION","INTERSECTION","COVAR_POP","COVAR_SAMP","CORR","REGR_SLOPE","REGR_INTERCEPT","REGR_COUNT","REGR_R2","REGR_AVGX","REGR_AVGY","REGR_SXX","REGR_SYY","REGR_SXY","PERCENTILE_CONT","PERCENTILE_DISC","CAST","COALESCE","NULLIF","ROUND","SIN","COS","TAN","ASIN","ACOS","ATAN"]});var Iz,Nz,Oz=G(()=>{Iz=["ALL","ALLOCATE","ALTER","ANY","ARE","AS","ASC","ASENSITIVE","ASYMMETRIC","AT","ATOMIC","AUTHORIZATION","BEGIN","BETWEEN","BOTH","BY","CALL","CALLED","CASCADED","CAST","CHECK","CLOSE","COALESCE","COLLATE","COLUMN","COMMIT","CONDITION","CONNECT","CONSTRAINT","CORRESPONDING","CREATE","CROSS","CUBE","CURRENT","CURRENT_CATALOG","CURRENT_DEFAULT_TRANSFORM_GROUP","CURRENT_PATH","CURRENT_ROLE","CURRENT_SCHEMA","CURRENT_TRANSFORM_GROUP_FOR_TYPE","CURRENT_USER","CURSOR","CYCLE","DEALLOCATE","DAY","DECLARE","DEFAULT","DELETE","DEREF","DESC","DESCRIBE","DETERMINISTIC","DISCONNECT","DISTINCT","DROP","DYNAMIC","EACH","ELEMENT","END-EXEC","ESCAPE","EVERY","EXCEPT","EXEC","EXECUTE","EXISTS","EXTERNAL","FALSE","FETCH","FILTER","FOR","FOREIGN","FREE","FROM","FULL","FUNCTION","GET","GLOBAL","GRANT","GROUP","HAVING","HOLD","HOUR","IDENTITY","IN","INDICATOR","INNER","INOUT","INSENSITIVE","INSERT","INTERSECT","INTO","IS","LANGUAGE","LARGE","LATERAL","LEADING","LEFT","LIKE","LIKE_REGEX","LOCAL","MATCH","MEMBER","MERGE","METHOD","MINUTE","MODIFIES","MODULE","MONTH","NATURAL","NEW","NO","NONE","NOT","NULL","NULLIF","OF","OLD","ON","ONLY","OPEN","ORDER","OUT","OUTER","OVER","OVERLAPS","PARAMETER","PARTITION","PRECISION","PREPARE","PRIMARY","PROCEDURE","RANGE","READS","REAL","RECURSIVE","REF","REFERENCES","REFERENCING","RELEASE","RESULT","RETURN","RETURNS","REVOKE","RIGHT","ROLLBACK","ROLLUP","ROW","ROWS","SAVEPOINT","SCOPE","SCROLL","SEARCH","SECOND","SELECT","SENSITIVE","SESSION_USER","SET","SIMILAR","SOME","SPECIFIC","SQL","SQLEXCEPTION","SQLSTATE","SQLWARNING","START","STATIC","SUBMULTISET","SYMMETRIC","SYSTEM","SYSTEM_USER","TABLE","TABLESAMPLE","THEN","TIMEZONE_HOUR","TIMEZONE_MINUTE","TO","TRAILING","TRANSLATION","TREAT","TRIGGER","TRUE","UESCAPE","UNION","UNIQUE","UNKNOWN","UNNEST","UPDATE","USER","USING","VALUE","VALUES","WHENEVER","WINDOW","WITHIN","WITHOUT","YEAR"],Nz=["ARRAY","BIGINT","BINARY LARGE OBJECT","BINARY VARYING","BINARY","BLOB","BOOLEAN","CHAR LARGE OBJECT","CHAR VARYING","CHAR","CHARACTER LARGE OBJECT","CHARACTER VARYING","CHARACTER","CLOB","DATE","DEC","DECIMAL","DOUBLE","FLOAT","INT","INTEGER","INTERVAL","MULTISET","NATIONAL CHAR VARYING","NATIONAL CHAR","NATIONAL CHARACTER LARGE OBJECT","NATIONAL CHARACTER VARYING","NATIONAL CHARACTER","NCHAR LARGE OBJECT","NCHAR VARYING","NCHAR","NCLOB","NUMERIC","SMALLINT","TIME","TIMESTAMP","VARBINARY","VARCHAR"]});var awe,lwe,Cz,ay,cwe,uwe,dwe,fwe,dR,ly=G(()=>{xt();_z();Oz();awe=x(["SELECT [ALL | DISTINCT]"]),lwe=x(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY [ALL | DISTINCT]","HAVING","WINDOW","PARTITION BY","ORDER BY","LIMIT","OFFSET","FETCH {FIRST | NEXT}","INSERT INTO","VALUES","SET"]),Cz=x(["CREATE [GLOBAL TEMPORARY | LOCAL TEMPORARY] TABLE"]),ay=x(["CREATE [RECURSIVE] VIEW","UPDATE","WHERE CURRENT OF","DELETE FROM","DROP TABLE","ALTER TABLE","ADD COLUMN","DROP [COLUMN]","RENAME COLUMN","RENAME TO","ALTER [COLUMN]","{SET | DROP} DEFAULT","ADD SCOPE","DROP SCOPE {CASCADE | RESTRICT}","RESTART WITH","TRUNCATE TABLE","SET SCHEMA"]),cwe=x(["UNION [ALL | DISTINCT]","EXCEPT [ALL | DISTINCT]","INTERSECT [ALL | DISTINCT]"]),uwe=x(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL [INNER] JOIN","NATURAL {LEFT | RIGHT | FULL} [OUTER] JOIN"]),dwe=x(["ON {UPDATE | DELETE} [SET NULL | SET DEFAULT]","{ROWS | RANGE} BETWEEN"]),fwe=x([]),dR={name:"sql",tokenizerOptions:{reservedSelect:awe,reservedClauses:[...lwe,...Cz,...ay],reservedSetOperations:cwe,reservedJoins:uwe,reservedKeywordPhrases:dwe,reservedDataTypePhrases:fwe,reservedKeywords:Iz,reservedDataTypes:Nz,reservedFunctionNames:gz,stringTypes:[{quote:"''-qq-bs",prefixes:["N","U&"]},{quote:"''-raw",prefixes:["X"],requirePrefix:!0}],identTypes:['""-qq',"``"],paramTypes:{positional:!0},operators:["||"]},formatOptions:{onelineClauses:[...Cz,...ay],tabularOnelineClauses:ay}}});var bz,yz=G(()=>{bz=["ABS","ACOS","ALL_MATCH","ANY_MATCH","APPROX_DISTINCT","APPROX_MOST_FREQUENT","APPROX_PERCENTILE","APPROX_SET","ARBITRARY","ARRAYS_OVERLAP","ARRAY_AGG","ARRAY_DISTINCT","ARRAY_EXCEPT","ARRAY_INTERSECT","ARRAY_JOIN","ARRAY_MAX","ARRAY_MIN","ARRAY_POSITION","ARRAY_REMOVE","ARRAY_SORT","ARRAY_UNION","ASIN","ATAN","ATAN2","AT_TIMEZONE","AVG","BAR","BETA_CDF","BING_TILE","BING_TILES_AROUND","BING_TILE_AT","BING_TILE_COORDINATES","BING_TILE_POLYGON","BING_TILE_QUADKEY","BING_TILE_ZOOM_LEVEL","BITWISE_AND","BITWISE_AND_AGG","BITWISE_LEFT_SHIFT","BITWISE_NOT","BITWISE_OR","BITWISE_OR_AGG","BITWISE_RIGHT_SHIFT","BITWISE_RIGHT_SHIFT_ARITHMETIC","BITWISE_XOR","BIT_COUNT","BOOL_AND","BOOL_OR","CARDINALITY","CAST","CBRT","CEIL","CEILING","CHAR2HEXINT","CHECKSUM","CHR","CLASSIFY","COALESCE","CODEPOINT","COLOR","COMBINATIONS","CONCAT","CONCAT_WS","CONTAINS","CONTAINS_SEQUENCE","CONVEX_HULL_AGG","CORR","COS","COSH","COSINE_SIMILARITY","COUNT","COUNT_IF","COVAR_POP","COVAR_SAMP","CRC32","CUME_DIST","CURRENT_CATALOG","CURRENT_DATE","CURRENT_GROUPS","CURRENT_SCHEMA","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_TIMEZONE","CURRENT_USER","DATE","DATE_ADD","DATE_DIFF","DATE_FORMAT","DATE_PARSE","DATE_TRUNC","DAY","DAY_OF_MONTH","DAY_OF_WEEK","DAY_OF_YEAR","DEGREES","DENSE_RANK","DOW","DOY","E","ELEMENT_AT","EMPTY_APPROX_SET","EVALUATE_CLASSIFIER_PREDICTIONS","EVERY","EXP","EXTRACT","FEATURES","FILTER","FIRST_VALUE","FLATTEN","FLOOR","FORMAT","FORMAT_DATETIME","FORMAT_NUMBER","FROM_BASE","FROM_BASE32","FROM_BASE64","FROM_BASE64URL","FROM_BIG_ENDIAN_32","FROM_BIG_ENDIAN_64","FROM_ENCODED_POLYLINE","FROM_GEOJSON_GEOMETRY","FROM_HEX","FROM_IEEE754_32","FROM_IEEE754_64","FROM_ISO8601_DATE","FROM_ISO8601_TIMESTAMP","FROM_ISO8601_TIMESTAMP_NANOS","FROM_UNIXTIME","FROM_UNIXTIME_NANOS","FROM_UTF8","GEOMETRIC_MEAN","GEOMETRY_FROM_HADOOP_SHAPE","GEOMETRY_INVALID_REASON","GEOMETRY_NEAREST_POINTS","GEOMETRY_TO_BING_TILES","GEOMETRY_UNION","GEOMETRY_UNION_AGG","GREATEST","GREAT_CIRCLE_DISTANCE","HAMMING_DISTANCE","HASH_COUNTS","HISTOGRAM","HMAC_MD5","HMAC_SHA1","HMAC_SHA256","HMAC_SHA512","HOUR","HUMAN_READABLE_SECONDS","IF","INDEX","INFINITY","INTERSECTION_CARDINALITY","INVERSE_BETA_CDF","INVERSE_NORMAL_CDF","IS_FINITE","IS_INFINITE","IS_JSON_SCALAR","IS_NAN","JACCARD_INDEX","JSON_ARRAY_CONTAINS","JSON_ARRAY_GET","JSON_ARRAY_LENGTH","JSON_EXISTS","JSON_EXTRACT","JSON_EXTRACT_SCALAR","JSON_FORMAT","JSON_PARSE","JSON_QUERY","JSON_SIZE","JSON_VALUE","KURTOSIS","LAG","LAST_DAY_OF_MONTH","LAST_VALUE","LEAD","LEARN_CLASSIFIER","LEARN_LIBSVM_CLASSIFIER","LEARN_LIBSVM_REGRESSOR","LEARN_REGRESSOR","LEAST","LENGTH","LEVENSHTEIN_DISTANCE","LINE_INTERPOLATE_POINT","LINE_INTERPOLATE_POINTS","LINE_LOCATE_POINT","LISTAGG","LN","LOCALTIME","LOCALTIMESTAMP","LOG","LOG10","LOG2","LOWER","LPAD","LTRIM","LUHN_CHECK","MAKE_SET_DIGEST","MAP","MAP_AGG","MAP_CONCAT","MAP_ENTRIES","MAP_FILTER","MAP_FROM_ENTRIES","MAP_KEYS","MAP_UNION","MAP_VALUES","MAP_ZIP_WITH","MAX","MAX_BY","MD5","MERGE","MERGE_SET_DIGEST","MILLISECOND","MIN","MINUTE","MIN_BY","MOD","MONTH","MULTIMAP_AGG","MULTIMAP_FROM_ENTRIES","MURMUR3","NAN","NGRAMS","NONE_MATCH","NORMALIZE","NORMAL_CDF","NOW","NTH_VALUE","NTILE","NULLIF","NUMERIC_HISTOGRAM","OBJECTID","OBJECTID_TIMESTAMP","PARSE_DATA_SIZE","PARSE_DATETIME","PARSE_DURATION","PERCENT_RANK","PI","POSITION","POW","POWER","QDIGEST_AGG","QUARTER","RADIANS","RAND","RANDOM","RANK","REDUCE","REDUCE_AGG","REGEXP_COUNT","REGEXP_EXTRACT","REGEXP_EXTRACT_ALL","REGEXP_LIKE","REGEXP_POSITION","REGEXP_REPLACE","REGEXP_SPLIT","REGRESS","REGR_INTERCEPT","REGR_SLOPE","RENDER","REPEAT","REPLACE","REVERSE","RGB","ROUND","ROW_NUMBER","RPAD","RTRIM","SECOND","SEQUENCE","SHA1","SHA256","SHA512","SHUFFLE","SIGN","SIMPLIFY_GEOMETRY","SIN","SKEWNESS","SLICE","SOUNDEX","SPATIAL_PARTITIONING","SPATIAL_PARTITIONS","SPLIT","SPLIT_PART","SPLIT_TO_MAP","SPLIT_TO_MULTIMAP","SPOOKY_HASH_V2_32","SPOOKY_HASH_V2_64","SQRT","STARTS_WITH","STDDEV","STDDEV_POP","STDDEV_SAMP","STRPOS","ST_AREA","ST_ASBINARY","ST_ASTEXT","ST_BOUNDARY","ST_BUFFER","ST_CENTROID","ST_CONTAINS","ST_CONVEXHULL","ST_COORDDIM","ST_CROSSES","ST_DIFFERENCE","ST_DIMENSION","ST_DISJOINT","ST_DISTANCE","ST_ENDPOINT","ST_ENVELOPE","ST_ENVELOPEASPTS","ST_EQUALS","ST_EXTERIORRING","ST_GEOMETRIES","ST_GEOMETRYFROMTEXT","ST_GEOMETRYN","ST_GEOMETRYTYPE","ST_GEOMFROMBINARY","ST_INTERIORRINGN","ST_INTERIORRINGS","ST_INTERSECTION","ST_INTERSECTS","ST_ISCLOSED","ST_ISEMPTY","ST_ISRING","ST_ISSIMPLE","ST_ISVALID","ST_LENGTH","ST_LINEFROMTEXT","ST_LINESTRING","ST_MULTIPOINT","ST_NUMGEOMETRIES","ST_NUMINTERIORRING","ST_NUMPOINTS","ST_OVERLAPS","ST_POINT","ST_POINTN","ST_POINTS","ST_POLYGON","ST_RELATE","ST_STARTPOINT","ST_SYMDIFFERENCE","ST_TOUCHES","ST_UNION","ST_WITHIN","ST_X","ST_XMAX","ST_XMIN","ST_Y","ST_YMAX","ST_YMIN","SUBSTR","SUBSTRING","SUM","TAN","TANH","TDIGEST_AGG","TIMESTAMP_OBJECTID","TIMEZONE_HOUR","TIMEZONE_MINUTE","TO_BASE","TO_BASE32","TO_BASE64","TO_BASE64URL","TO_BIG_ENDIAN_32","TO_BIG_ENDIAN_64","TO_CHAR","TO_DATE","TO_ENCODED_POLYLINE","TO_GEOJSON_GEOMETRY","TO_GEOMETRY","TO_HEX","TO_IEEE754_32","TO_IEEE754_64","TO_ISO8601","TO_MILLISECONDS","TO_SPHERICAL_GEOGRAPHY","TO_TIMESTAMP","TO_UNIXTIME","TO_UTF8","TRANSFORM","TRANSFORM_KEYS","TRANSFORM_VALUES","TRANSLATE","TRIM","TRIM_ARRAY","TRUNCATE","TRY","TRY_CAST","TYPEOF","UPPER","URL_DECODE","URL_ENCODE","URL_EXTRACT_FRAGMENT","URL_EXTRACT_HOST","URL_EXTRACT_PARAMETER","URL_EXTRACT_PATH","URL_EXTRACT_PORT","URL_EXTRACT_PROTOCOL","URL_EXTRACT_QUERY","UUID","VALUES_AT_QUANTILES","VALUE_AT_QUANTILE","VARIANCE","VAR_POP","VAR_SAMP","VERSION","WEEK","WEEK_OF_YEAR","WIDTH_BUCKET","WILSON_INTERVAL_LOWER","WILSON_INTERVAL_UPPER","WITH_TIMEZONE","WORD_STEM","XXHASH64","YEAR","YEAR_OF_WEEK","YOW","ZIP","ZIP_WITH","CLASSIFIER","FIRST","LAST","MATCH_NUMBER","NEXT","PERMUTE","PREV"]});var wz,Lz,Dz=G(()=>{wz=["ABSENT","ADD","ADMIN","AFTER","ALL","ALTER","ANALYZE","AND","ANY","AS","ASC","AT","AUTHORIZATION","BERNOULLI","BETWEEN","BOTH","BY","CALL","CASCADE","CASE","CATALOGS","COLUMN","COLUMNS","COMMENT","COMMIT","COMMITTED","CONDITIONAL","CONSTRAINT","COPARTITION","CREATE","CROSS","CUBE","CURRENT","CURRENT_PATH","CURRENT_ROLE","DATA","DEALLOCATE","DEFAULT","DEFINE","DEFINER","DELETE","DENY","DESC","DESCRIBE","DESCRIPTOR","DISTINCT","DISTRIBUTED","DOUBLE","DROP","ELSE","EMPTY","ENCODING","END","ERROR","ESCAPE","EXCEPT","EXCLUDING","EXECUTE","EXISTS","EXPLAIN","FALSE","FETCH","FINAL","FIRST","FOLLOWING","FOR","FROM","FULL","FUNCTIONS","GRANT","GRANTED","GRANTS","GRAPHVIZ","GROUP","GROUPING","GROUPS","HAVING","IGNORE","IN","INCLUDING","INITIAL","INNER","INPUT","INSERT","INTERSECT","INTERVAL","INTO","INVOKER","IO","IS","ISOLATION","JOIN","JSON","JSON_ARRAY","JSON_OBJECT","KEEP","KEY","KEYS","LAST","LATERAL","LEADING","LEFT","LEVEL","LIKE","LIMIT","LOCAL","LOGICAL","MATCH","MATCHED","MATCHES","MATCH_RECOGNIZE","MATERIALIZED","MEASURES","NATURAL","NEXT","NFC","NFD","NFKC","NFKD","NO","NONE","NOT","NULL","NULLS","OBJECT","OF","OFFSET","OMIT","ON","ONE","ONLY","OPTION","OR","ORDER","ORDINALITY","OUTER","OUTPUT","OVER","OVERFLOW","PARTITION","PARTITIONS","PASSING","PAST","PATH","PATTERN","PER","PERMUTE","PRECEDING","PRECISION","PREPARE","PRIVILEGES","PROPERTIES","PRUNE","QUOTES","RANGE","READ","RECURSIVE","REFRESH","RENAME","REPEATABLE","RESET","RESPECT","RESTRICT","RETURNING","REVOKE","RIGHT","ROLE","ROLES","ROLLBACK","ROLLUP","ROW","ROWS","RUNNING","SCALAR","SCHEMA","SCHEMAS","SECURITY","SEEK","SELECT","SERIALIZABLE","SESSION","SET","SETS","SHOW","SKIP","SOME","START","STATS","STRING","SUBSET","SYSTEM","TABLE","TABLES","TABLESAMPLE","TEXT","THEN","TIES","TIME","TIMESTAMP","TO","TRAILING","TRANSACTION","TRUE","TYPE","UESCAPE","UNBOUNDED","UNCOMMITTED","UNCONDITIONAL","UNION","UNIQUE","UNKNOWN","UNMATCHED","UNNEST","UPDATE","USE","USER","USING","UTF16","UTF32","UTF8","VALIDATE","VALUE","VALUES","VERBOSE","VIEW","WHEN","WHERE","WINDOW","WITH","WITHIN","WITHOUT","WORK","WRAPPER","WRITE","ZONE"],Lz=["BIGINT","INT","INTEGER","SMALLINT","TINYINT","BOOLEAN","DATE","DECIMAL","REAL","DOUBLE","HYPERLOGLOG","QDIGEST","TDIGEST","P4HYPERLOGLOG","INTERVAL","TIMESTAMP","TIME","VARBINARY","VARCHAR","CHAR","ROW","ARRAY","MAP","JSON","JSON2016","IPADDRESS","GEOMETRY","UUID","SETDIGEST","JONIREGEXP","RE2JREGEXP","LIKEPATTERN","COLOR","CODEPOINTS","FUNCTION","JSONPATH"]});var Ewe,hwe,Pz,cy,pwe,Twe,Swe,Rwe,fR,uy=G(()=>{xt();yz();Dz();Ewe=x(["SELECT [ALL | DISTINCT]"]),hwe=x(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY [ALL | DISTINCT]","HAVING","WINDOW","PARTITION BY","ORDER BY","LIMIT","OFFSET","FETCH {FIRST | NEXT}","INSERT INTO","VALUES","SET","MATCH_RECOGNIZE","MEASURES","ONE ROW PER MATCH","ALL ROWS PER MATCH","AFTER MATCH","PATTERN","SUBSET","DEFINE"]),Pz=x(["CREATE TABLE [IF NOT EXISTS]"]),cy=x(["CREATE [OR REPLACE] [MATERIALIZED] VIEW","UPDATE","DELETE FROM","DROP TABLE [IF EXISTS]","ALTER TABLE [IF EXISTS]","ADD COLUMN [IF NOT EXISTS]","DROP COLUMN [IF EXISTS]","RENAME COLUMN [IF EXISTS]","RENAME TO","SET AUTHORIZATION [USER | ROLE]","SET PROPERTIES","EXECUTE","TRUNCATE TABLE","ALTER SCHEMA","ALTER MATERIALIZED VIEW","ALTER VIEW","CREATE SCHEMA","CREATE ROLE","DROP SCHEMA","DROP MATERIALIZED VIEW","DROP VIEW","DROP ROLE","EXPLAIN","ANALYZE","EXPLAIN ANALYZE","EXPLAIN ANALYZE VERBOSE","USE","DESCRIBE INPUT","DESCRIBE OUTPUT","REFRESH MATERIALIZED VIEW","RESET SESSION","SET SESSION","SET PATH","SET TIME ZONE","SHOW GRANTS","SHOW CREATE TABLE","SHOW CREATE SCHEMA","SHOW CREATE VIEW","SHOW CREATE MATERIALIZED VIEW","SHOW TABLES","SHOW SCHEMAS","SHOW CATALOGS","SHOW COLUMNS","SHOW STATS FOR","SHOW ROLES","SHOW CURRENT ROLES","SHOW ROLE GRANTS","SHOW FUNCTIONS","SHOW SESSION"]),pwe=x(["UNION [ALL | DISTINCT]","EXCEPT [ALL | DISTINCT]","INTERSECT [ALL | DISTINCT]"]),Twe=x(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL [INNER] JOIN","NATURAL {LEFT | RIGHT | FULL} [OUTER] JOIN"]),Swe=x(["{ROWS | RANGE | GROUPS} BETWEEN","IS [NOT] DISTINCT FROM"]),Rwe=x([]),fR={name:"trino",tokenizerOptions:{reservedSelect:Ewe,reservedClauses:[...hwe,...Pz,...cy],reservedSetOperations:pwe,reservedJoins:Twe,reservedKeywordPhrases:Swe,reservedDataTypePhrases:Rwe,reservedKeywords:wz,reservedDataTypes:Lz,reservedFunctionNames:bz,extraParens:["[]","{}"],stringTypes:[{quote:"''-qq",prefixes:["U&"]},{quote:"''-raw",prefixes:["X"],requirePrefix:!0}],identTypes:['""-qq'],paramTypes:{positional:!0},operators:["%","->","=>",":","||","|","^","$"]},formatOptions:{onelineClauses:[...Pz,...cy],tabularOnelineClauses:cy}}});var xz,vz=G(()=>{xz=["APPROX_COUNT_DISTINCT","AVG","CHECKSUM_AGG","COUNT","COUNT_BIG","GROUPING","GROUPING_ID","MAX","MIN","STDEV","STDEVP","SUM","VAR","VARP","CUME_DIST","FIRST_VALUE","LAG","LAST_VALUE","LEAD","PERCENTILE_CONT","PERCENTILE_DISC","PERCENT_RANK","Collation - COLLATIONPROPERTY","Collation - TERTIARY_WEIGHTS","@@DBTS","@@LANGID","@@LANGUAGE","@@LOCK_TIMEOUT","@@MAX_CONNECTIONS","@@MAX_PRECISION","@@NESTLEVEL","@@OPTIONS","@@REMSERVER","@@SERVERNAME","@@SERVICENAME","@@SPID","@@TEXTSIZE","@@VERSION","CAST","CONVERT","PARSE","TRY_CAST","TRY_CONVERT","TRY_PARSE","ASYMKEY_ID","ASYMKEYPROPERTY","CERTPROPERTY","CERT_ID","CRYPT_GEN_RANDOM","DECRYPTBYASYMKEY","DECRYPTBYCERT","DECRYPTBYKEY","DECRYPTBYKEYAUTOASYMKEY","DECRYPTBYKEYAUTOCERT","DECRYPTBYPASSPHRASE","ENCRYPTBYASYMKEY","ENCRYPTBYCERT","ENCRYPTBYKEY","ENCRYPTBYPASSPHRASE","HASHBYTES","IS_OBJECTSIGNED","KEY_GUID","KEY_ID","KEY_NAME","SIGNBYASYMKEY","SIGNBYCERT","SYMKEYPROPERTY","VERIFYSIGNEDBYCERT","VERIFYSIGNEDBYASYMKEY","@@CURSOR_ROWS","@@FETCH_STATUS","CURSOR_STATUS","DATALENGTH","IDENT_CURRENT","IDENT_INCR","IDENT_SEED","IDENTITY","SQL_VARIANT_PROPERTY","@@DATEFIRST","CURRENT_TIMESTAMP","CURRENT_TIMEZONE","CURRENT_TIMEZONE_ID","DATEADD","DATEDIFF","DATEDIFF_BIG","DATEFROMPARTS","DATENAME","DATEPART","DATETIME2FROMPARTS","DATETIMEFROMPARTS","DATETIMEOFFSETFROMPARTS","DAY","EOMONTH","GETDATE","GETUTCDATE","ISDATE","MONTH","SMALLDATETIMEFROMPARTS","SWITCHOFFSET","SYSDATETIME","SYSDATETIMEOFFSET","SYSUTCDATETIME","TIMEFROMPARTS","TODATETIMEOFFSET","YEAR","JSON","ISJSON","JSON_VALUE","JSON_QUERY","JSON_MODIFY","ABS","ACOS","ASIN","ATAN","ATN2","CEILING","COS","COT","DEGREES","EXP","FLOOR","LOG","LOG10","PI","POWER","RADIANS","RAND","ROUND","SIGN","SIN","SQRT","SQUARE","TAN","CHOOSE","GREATEST","IIF","LEAST","@@PROCID","APP_NAME","APPLOCK_MODE","APPLOCK_TEST","ASSEMBLYPROPERTY","COL_LENGTH","COL_NAME","COLUMNPROPERTY","DATABASEPROPERTYEX","DB_ID","DB_NAME","FILE_ID","FILE_IDEX","FILE_NAME","FILEGROUP_ID","FILEGROUP_NAME","FILEGROUPPROPERTY","FILEPROPERTY","FILEPROPERTYEX","FULLTEXTCATALOGPROPERTY","FULLTEXTSERVICEPROPERTY","INDEX_COL","INDEXKEY_PROPERTY","INDEXPROPERTY","NEXT VALUE FOR","OBJECT_DEFINITION","OBJECT_ID","OBJECT_NAME","OBJECT_SCHEMA_NAME","OBJECTPROPERTY","OBJECTPROPERTYEX","ORIGINAL_DB_NAME","PARSENAME","SCHEMA_ID","SCHEMA_NAME","SCOPE_IDENTITY","SERVERPROPERTY","STATS_DATE","TYPE_ID","TYPE_NAME","TYPEPROPERTY","DENSE_RANK","NTILE","RANK","ROW_NUMBER","PUBLISHINGSERVERNAME","CERTENCODED","CERTPRIVATEKEY","CURRENT_USER","DATABASE_PRINCIPAL_ID","HAS_DBACCESS","HAS_PERMS_BY_NAME","IS_MEMBER","IS_ROLEMEMBER","IS_SRVROLEMEMBER","LOGINPROPERTY","ORIGINAL_LOGIN","PERMISSIONS","PWDENCRYPT","PWDCOMPARE","SESSION_USER","SESSIONPROPERTY","SUSER_ID","SUSER_NAME","SUSER_SID","SUSER_SNAME","SYSTEM_USER","USER","USER_ID","USER_NAME","ASCII","CHARINDEX","CONCAT","CONCAT_WS","DIFFERENCE","FORMAT","LEFT","LEN","LOWER","LTRIM","PATINDEX","QUOTENAME","REPLACE","REPLICATE","REVERSE","RIGHT","RTRIM","SOUNDEX","SPACE","STR","STRING_AGG","STRING_ESCAPE","STUFF","SUBSTRING","TRANSLATE","TRIM","UNICODE","UPPER","$PARTITION","@@ERROR","@@IDENTITY","@@PACK_RECEIVED","@@ROWCOUNT","@@TRANCOUNT","BINARY_CHECKSUM","CHECKSUM","COMPRESS","CONNECTIONPROPERTY","CONTEXT_INFO","CURRENT_REQUEST_ID","CURRENT_TRANSACTION_ID","DECOMPRESS","ERROR_LINE","ERROR_MESSAGE","ERROR_NUMBER","ERROR_PROCEDURE","ERROR_SEVERITY","ERROR_STATE","FORMATMESSAGE","GET_FILESTREAM_TRANSACTION_CONTEXT","GETANSINULL","HOST_ID","HOST_NAME","ISNULL","ISNUMERIC","MIN_ACTIVE_ROWVERSION","NEWID","NEWSEQUENTIALID","ROWCOUNT_BIG","SESSION_CONTEXT","XACT_STATE","@@CONNECTIONS","@@CPU_BUSY","@@IDLE","@@IO_BUSY","@@PACK_SENT","@@PACKET_ERRORS","@@TIMETICKS","@@TOTAL_ERRORS","@@TOTAL_READ","@@TOTAL_WRITE","TEXTPTR","TEXTVALID","COLUMNS_UPDATED","EVENTDATA","TRIGGER_NESTLEVEL","UPDATE","COALESCE","NULLIF"]});var Mz,Uz,Bz=G(()=>{Mz=["ADD","ALL","ALTER","AND","ANY","AS","ASC","AUTHORIZATION","BACKUP","BEGIN","BETWEEN","BREAK","BROWSE","BULK","BY","CASCADE","CHECK","CHECKPOINT","CLOSE","CLUSTERED","COALESCE","COLLATE","COLUMN","COMMIT","COMPUTE","CONSTRAINT","CONTAINS","CONTAINSTABLE","CONTINUE","CONVERT","CREATE","CROSS","CURRENT","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURSOR","DATABASE","DBCC","DEALLOCATE","DECLARE","DEFAULT","DELETE","DENY","DESC","DISK","DISTINCT","DISTRIBUTED","DROP","DUMP","ERRLVL","ESCAPE","EXEC","EXECUTE","EXISTS","EXIT","EXTERNAL","FETCH","FILE","FILLFACTOR","FOR","FOREIGN","FREETEXT","FREETEXTTABLE","FROM","FULL","FUNCTION","GOTO","GRANT","GROUP","HAVING","HOLDLOCK","IDENTITY","IDENTITYCOL","IDENTITY_INSERT","IF","IN","INDEX","INNER","INSERT","INTERSECT","INTO","IS","JOIN","KEY","KILL","LEFT","LIKE","LINENO","LOAD","MERGE","NOCHECK","NONCLUSTERED","NOT","NULL","NULLIF","OF","OFF","OFFSETS","ON","OPEN","OPENDATASOURCE","OPENQUERY","OPENROWSET","OPENXML","OPTION","OR","ORDER","OUTER","OVER","PERCENT","PIVOT","PLAN","PRIMARY","PRINT","PROC","PROCEDURE","PUBLIC","RAISERROR","READ","READTEXT","RECONFIGURE","REFERENCES","REPLICATION","RESTORE","RESTRICT","RETURN","REVERT","REVOKE","RIGHT","ROLLBACK","ROWCOUNT","ROWGUIDCOL","RULE","SAVE","SCHEMA","SECURITYAUDIT","SELECT","SEMANTICKEYPHRASETABLE","SEMANTICSIMILARITYDETAILSTABLE","SEMANTICSIMILARITYTABLE","SESSION_USER","SET","SETUSER","SHUTDOWN","SOME","STATISTICS","SYSTEM_USER","TABLE","TABLESAMPLE","TEXTSIZE","THEN","TO","TOP","TRAN","TRANSACTION","TRIGGER","TRUNCATE","TRY_CONVERT","TSEQUAL","UNION","UNIQUE","UNPIVOT","UPDATE","UPDATETEXT","USE","USER","VALUES","VIEW","WAITFOR","WHERE","WHILE","WITH","WITHIN GROUP","WRITETEXT","$ACTION"],Uz=["BINARY","BIT","CHAR","CHAR","CHARACTER","DATE","DATETIME2","DATETIMEOFFSET","DEC","DECIMAL","DOUBLE","FLOAT","INT","INTEGER","NATIONAL","NCHAR","NUMERIC","NVARCHAR","PRECISION","REAL","SMALLINT","TIME","TIMESTAMP","VARBINARY","VARCHAR"]});var Awe,mwe,Fz,dy,gwe,_we,Iwe,Nwe,ER,fy=G(()=>{xt();vz();Bz();Awe=x(["SELECT [ALL | DISTINCT]"]),mwe=x(["WITH","INTO","FROM","WHERE","GROUP BY","HAVING","WINDOW","PARTITION BY","ORDER BY","OFFSET","FETCH {FIRST | NEXT}","FOR {BROWSE | XML | JSON}","OPTION","INSERT [INTO]","VALUES","SET","MERGE [INTO]","WHEN [NOT] MATCHED [BY TARGET | BY SOURCE] [THEN]","UPDATE SET"]),Fz=x(["CREATE TABLE"]),dy=x(["CREATE [OR ALTER] [MATERIALIZED] VIEW","UPDATE","WHERE CURRENT OF","DELETE [FROM]","DROP TABLE [IF EXISTS]","ALTER TABLE","ADD","DROP COLUMN [IF EXISTS]","ALTER COLUMN","TRUNCATE TABLE","CREATE [UNIQUE] [CLUSTERED] INDEX","CREATE DATABASE","ALTER DATABASE","DROP DATABASE [IF EXISTS]","CREATE [OR ALTER] [PARTITION] {FUNCTION | PROCEDURE | PROC}","ALTER [PARTITION] {FUNCTION | PROCEDURE | PROC}","DROP [PARTITION] {FUNCTION | PROCEDURE | PROC} [IF EXISTS]","GO","USE","ADD SENSITIVITY CLASSIFICATION","ADD SIGNATURE","AGGREGATE","ANSI_DEFAULTS","ANSI_NULLS","ANSI_NULL_DFLT_OFF","ANSI_NULL_DFLT_ON","ANSI_PADDING","ANSI_WARNINGS","APPLICATION ROLE","ARITHABORT","ARITHIGNORE","ASSEMBLY","ASYMMETRIC KEY","AUTHORIZATION","AVAILABILITY GROUP","BACKUP","BACKUP CERTIFICATE","BACKUP MASTER KEY","BACKUP SERVICE MASTER KEY","BEGIN CONVERSATION TIMER","BEGIN DIALOG CONVERSATION","BROKER PRIORITY","BULK INSERT","CERTIFICATE","CLOSE MASTER KEY","CLOSE SYMMETRIC KEY","COLUMN ENCRYPTION KEY","COLUMN MASTER KEY","COLUMNSTORE INDEX","CONCAT_NULL_YIELDS_NULL","CONTEXT_INFO","CONTRACT","CREDENTIAL","CRYPTOGRAPHIC PROVIDER","CURSOR_CLOSE_ON_COMMIT","DATABASE","DATABASE AUDIT SPECIFICATION","DATABASE ENCRYPTION KEY","DATABASE HADR","DATABASE SCOPED CONFIGURATION","DATABASE SCOPED CREDENTIAL","DATABASE SET","DATEFIRST","DATEFORMAT","DEADLOCK_PRIORITY","DENY","DENY XML","DISABLE TRIGGER","ENABLE TRIGGER","END CONVERSATION","ENDPOINT","EVENT NOTIFICATION","EVENT SESSION","EXECUTE AS","EXTERNAL DATA SOURCE","EXTERNAL FILE FORMAT","EXTERNAL LANGUAGE","EXTERNAL LIBRARY","EXTERNAL RESOURCE POOL","EXTERNAL TABLE","FIPS_FLAGGER","FMTONLY","FORCEPLAN","FULLTEXT CATALOG","FULLTEXT INDEX","FULLTEXT STOPLIST","GET CONVERSATION GROUP","GET_TRANSMISSION_STATUS","GRANT","GRANT XML","IDENTITY_INSERT","IMPLICIT_TRANSACTIONS","INDEX","LANGUAGE","LOCK_TIMEOUT","LOGIN","MASTER KEY","MESSAGE TYPE","MOVE CONVERSATION","NOCOUNT","NOEXEC","NUMERIC_ROUNDABORT","OFFSETS","OPEN MASTER KEY","OPEN SYMMETRIC KEY","PARSEONLY","PARTITION SCHEME","QUERY_GOVERNOR_COST_LIMIT","QUEUE","QUOTED_IDENTIFIER","RECEIVE","REMOTE SERVICE BINDING","REMOTE_PROC_TRANSACTIONS","RESOURCE GOVERNOR","RESOURCE POOL","RESTORE","RESTORE FILELISTONLY","RESTORE HEADERONLY","RESTORE LABELONLY","RESTORE MASTER KEY","RESTORE REWINDONLY","RESTORE SERVICE MASTER KEY","RESTORE VERIFYONLY","REVERT","REVOKE","REVOKE XML","ROLE","ROUTE","ROWCOUNT","RULE","SCHEMA","SEARCH PROPERTY LIST","SECURITY POLICY","SELECTIVE XML INDEX","SEND","SENSITIVITY CLASSIFICATION","SEQUENCE","SERVER AUDIT","SERVER AUDIT SPECIFICATION","SERVER CONFIGURATION","SERVER ROLE","SERVICE","SERVICE MASTER KEY","SETUSER","SHOWPLAN_ALL","SHOWPLAN_TEXT","SHOWPLAN_XML","SIGNATURE","SPATIAL INDEX","STATISTICS","STATISTICS IO","STATISTICS PROFILE","STATISTICS TIME","STATISTICS XML","SYMMETRIC KEY","SYNONYM","TABLE","TABLE IDENTITY","TEXTSIZE","TRANSACTION ISOLATION LEVEL","TRIGGER","TYPE","UPDATE STATISTICS","USER","WORKLOAD GROUP","XACT_ABORT","XML INDEX","XML SCHEMA COLLECTION"]),gwe=x(["UNION [ALL]","EXCEPT","INTERSECT"]),_we=x(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","{CROSS | OUTER} APPLY"]),Iwe=x(["ON {UPDATE | DELETE} [SET NULL | SET DEFAULT]","{ROWS | RANGE} BETWEEN"]),Nwe=x([]),ER={name:"transactsql",tokenizerOptions:{reservedSelect:Awe,reservedClauses:[...mwe,...Fz,...dy],reservedSetOperations:gwe,reservedJoins:_we,reservedKeywordPhrases:Iwe,reservedDataTypePhrases:Nwe,reservedKeywords:Mz,reservedDataTypes:Uz,reservedFunctionNames:xz,nestedBlockComments:!0,stringTypes:[{quote:"''-qq",prefixes:["N"]},"{}"],identTypes:['""-qq',"[]"],identChars:{first:"#@",rest:"#@$"},paramTypes:{named:["@"],quoted:["@"]},operators:["%","&","|","^","~","!<","!>","+=","-=","*=","/=","%=","|=","&=","^=","::",":"],propertyAccessOperators:[".."]},formatOptions:{alwaysDenseOperators:["::"],onelineClauses:[...Fz,...dy],tabularOnelineClauses:dy}}});var Hz,Gz,Wz=G(()=>{Hz=["ADD","ALL","ALTER","ANALYZE","AND","AS","ASC","ASENSITIVE","BEFORE","BETWEEN","_BINARY","BOTH","BY","CALL","CASCADE","CASE","CHANGE","CHECK","COLLATE","COLUMN","CONDITION","CONSTRAINT","CONTINUE","CONVERT","CREATE","CROSS","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURSOR","DATABASE","DATABASES","DAY_HOUR","DAY_MICROSECOND","DAY_MINUTE","DAY_SECOND","DECLARE","DEFAULT","DELAYED","DELETE","DESC","DESCRIBE","DETERMINISTIC","DISTINCT","DISTINCTROW","DIV","DROP","DUAL","EACH","ELSE","ELSEIF","ENCLOSED","ESCAPED","EXCEPT","EXISTS","EXIT","EXPLAIN","EXTRA_JOIN","FALSE","FETCH","FOR","FORCE","FORCE_COMPILED_MODE","FORCE_INTERPRETER_MODE","FOREIGN","FROM","FULL","FULLTEXT","GRANT","GROUP","HAVING","HEARTBEAT_NO_LOGGING","HIGH_PRIORITY","HOUR_MICROSECOND","HOUR_MINUTE","HOUR_SECOND","IF","IGNORE","IN","INDEX","INFILE","INNER","INOUT","INSENSITIVE","INSERT","IN","_INTERNAL_DYNAMIC_TYPECAST","INTERSECT","INTERVAL","INTO","ITERATE","JOIN","KEY","KEYS","KILL","LEADING","LEAVE","LEFT","LIKE","LIMIT","LINES","LOAD","LOCALTIME","LOCALTIMESTAMP","LOCK","LOOP","LOW_PRIORITY","MATCH","MAXVALUE","MINUS","MINUTE_MICROSECOND","MINUTE_SECOND","MOD","MODIFIES","NATURAL","NO_QUERY_REWRITE","NOT","NO_WRITE_TO_BINLOG","NO_QUERY_REWRITE","NULL","ON","OPTIMIZE","OPTION","OPTIONALLY","OR","ORDER","OUT","OUTER","OUTFILE","OVER","PRIMARY","PROCEDURE","PURGE","RANGE","READ","READS","REFERENCES","REGEXP","RELEASE","RENAME","REPEAT","REPLACE","REQUIRE","RESTRICT","RETURN","REVOKE","RIGHT","RIGHT_ANTI_JOIN","RIGHT_SEMI_JOIN","RIGHT_STRAIGHT_JOIN","RLIKE","SCHEMA","SCHEMAS","SECOND_MICROSECOND","SELECT","SEMI_JOIN","SENSITIVE","SEPARATOR","SET","SHOW","SIGNAL","SPATIAL","SPECIFIC","SQL","SQL_BIG_RESULT","SQL_BUFFER_RESULT","SQL_CACHE","SQL_CALC_FOUND_ROWS","SQLEXCEPTION","SQL_NO_CACHE","SQL_NO_LOGGING","SQL_SMALL_RESULT","SQLSTATE","SQLWARNING","STRAIGHT_JOIN","TABLE","TERMINATED","THEN","TO","TRAILING","TRIGGER","TRUE","UNBOUNDED","UNDO","UNION","UNIQUE","UNLOCK","UPDATE","USAGE","USE","USING","UTC_DATE","UTC_TIME","UTC_TIMESTAMP","_UTF8","VALUES","WHEN","WHERE","WHILE","WINDOW","WITH","WITHIN","WRITE","XOR","YEAR_MONTH","ZEROFILL"],Gz=["BIGINT","BINARY","BIT","BLOB","CHAR","CHARACTER","DATETIME","DEC","DECIMAL","DOUBLE PRECISION","DOUBLE","ENUM","FIXED","FLOAT","FLOAT4","FLOAT8","INT","INT1","INT2","INT3","INT4","INT8","INTEGER","LONG","LONGBLOB","LONGTEXT","MEDIUMBLOB","MEDIUMINT","MEDIUMTEXT","MIDDLEINT","NATIONAL CHAR","NATIONAL VARCHAR","NUMERIC","PRECISION","REAL","SMALLINT","TEXT","TIME","TIMESTAMP","TINYBLOB","TINYINT","TINYTEXT","UNSIGNED","VARBINARY","VARCHAR","VARCHARACTER","YEAR"]});var $z,kz=G(()=>{$z=["ABS","ACOS","ADDDATE","ADDTIME","AES_DECRYPT","AES_ENCRYPT","ANY_VALUE","APPROX_COUNT_DISTINCT","APPROX_COUNT_DISTINCT_ACCUMULATE","APPROX_COUNT_DISTINCT_COMBINE","APPROX_COUNT_DISTINCT_ESTIMATE","APPROX_GEOGRAPHY_INTERSECTS","APPROX_PERCENTILE","ASCII","ASIN","ATAN","ATAN2","AVG","BIN","BINARY","BIT_AND","BIT_COUNT","BIT_OR","BIT_XOR","CAST","CEIL","CEILING","CHAR","CHARACTER_LENGTH","CHAR_LENGTH","CHARSET","COALESCE","COERCIBILITY","COLLATION","COLLECT","CONCAT","CONCAT_WS","CONNECTION_ID","CONV","CONVERT","CONVERT_TZ","COS","COT","COUNT","CUME_DIST","CURDATE","CURRENT_DATE","CURRENT_ROLE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURTIME","DATABASE","DATE","DATE_ADD","DATEDIFF","DATE_FORMAT","DATE_SUB","DATE_TRUNC","DAY","DAYNAME","DAYOFMONTH","DAYOFWEEK","DAYOFYEAR","DECODE","DEFAULT","DEGREES","DENSE_RANK","DIV","DOT_PRODUCT","ELT","EUCLIDEAN_DISTANCE","EXP","EXTRACT","FIELD","FIRST","FIRST_VALUE","FLOOR","FORMAT","FOUND_ROWS","FROM_BASE64","FROM_DAYS","FROM_UNIXTIME","GEOGRAPHY_AREA","GEOGRAPHY_CONTAINS","GEOGRAPHY_DISTANCE","GEOGRAPHY_INTERSECTS","GEOGRAPHY_LATITUDE","GEOGRAPHY_LENGTH","GEOGRAPHY_LONGITUDE","GEOGRAPHY_POINT","GEOGRAPHY_WITHIN_DISTANCE","GEOMETRY_AREA","GEOMETRY_CONTAINS","GEOMETRY_DISTANCE","GEOMETRY_FILTER","GEOMETRY_INTERSECTS","GEOMETRY_LENGTH","GEOMETRY_POINT","GEOMETRY_WITHIN_DISTANCE","GEOMETRY_X","GEOMETRY_Y","GREATEST","GROUPING","GROUP_CONCAT","HEX","HIGHLIGHT","HOUR","ICU_VERSION","IF","IFNULL","INET_ATON","INET_NTOA","INET6_ATON","INET6_NTOA","INITCAP","INSERT","INSTR","INTERVAL","IS","IS NULL","JSON_AGG","JSON_ARRAY_CONTAINS_DOUBLE","JSON_ARRAY_CONTAINS_JSON","JSON_ARRAY_CONTAINS_STRING","JSON_ARRAY_PUSH_DOUBLE","JSON_ARRAY_PUSH_JSON","JSON_ARRAY_PUSH_STRING","JSON_DELETE_KEY","JSON_EXTRACT_DOUBLE","JSON_EXTRACT_JSON","JSON_EXTRACT_STRING","JSON_EXTRACT_BIGINT","JSON_GET_TYPE","JSON_LENGTH","JSON_SET_DOUBLE","JSON_SET_JSON","JSON_SET_STRING","JSON_SPLICE_DOUBLE","JSON_SPLICE_JSON","JSON_SPLICE_STRING","LAG","LAST_DAY","LAST_VALUE","LCASE","LEAD","LEAST","LEFT","LENGTH","LIKE","LN","LOCALTIME","LOCALTIMESTAMP","LOCATE","LOG","LOG10","LOG2","LPAD","LTRIM","MATCH","MAX","MD5","MEDIAN","MICROSECOND","MIN","MINUTE","MOD","MONTH","MONTHNAME","MONTHS_BETWEEN","NOT","NOW","NTH_VALUE","NTILE","NULLIF","OCTET_LENGTH","PERCENT_RANK","PERCENTILE_CONT","PERCENTILE_DISC","PI","PIVOT","POSITION","POW","POWER","QUARTER","QUOTE","RADIANS","RAND","RANK","REGEXP","REPEAT","REPLACE","REVERSE","RIGHT","RLIKE","ROUND","ROW_COUNT","ROW_NUMBER","RPAD","RTRIM","SCALAR","SCHEMA","SEC_TO_TIME","SHA1","SHA2","SIGMOID","SIGN","SIN","SLEEP","SPLIT","SOUNDEX","SOUNDS LIKE","SOURCE_POS_WAIT","SPACE","SQRT","STDDEV","STDDEV_POP","STDDEV_SAMP","STR_TO_DATE","SUBDATE","SUBSTR","SUBSTRING","SUBSTRING_INDEX","SUM","SYS_GUID","TAN","TIME","TIMEDIFF","TIME_BUCKET","TIME_FORMAT","TIMESTAMP","TIMESTAMPADD","TIMESTAMPDIFF","TIME_TO_SEC","TO_BASE64","TO_CHAR","TO_DAYS","TO_JSON","TO_NUMBER","TO_SECONDS","TO_TIMESTAMP","TRIM","TRUNC","TRUNCATE","UCASE","UNHEX","UNIX_TIMESTAMP","UPDATEXML","UPPER","UTC_DATE","UTC_TIME","UTC_TIMESTAMP","UUID","VALUES","VARIANCE","VAR_POP","VAR_SAMP","VECTOR_SUB","VERSION","WEEK","WEEKDAY","WEEKOFYEAR","YEAR"]});var Owe,Cwe,Yz,Ey,bwe,ywe,wwe,Lwe,hR,hy=G(()=>{xt();cf();Wz();kz();Owe=x(["SELECT [ALL | DISTINCT | DISTINCTROW]"]),Cwe=x(["WITH","FROM","WHERE","GROUP BY","HAVING","PARTITION BY","ORDER BY","LIMIT","OFFSET","INSERT [IGNORE] [INTO]","VALUES","REPLACE [INTO]","ON DUPLICATE KEY UPDATE","SET","CREATE [OR REPLACE] [TEMPORARY] PROCEDURE [IF NOT EXISTS]","CREATE [OR REPLACE] [EXTERNAL] FUNCTION"]),Yz=x(["CREATE [ROWSTORE] [REFERENCE | TEMPORARY | GLOBAL TEMPORARY] TABLE [IF NOT EXISTS]"]),Ey=x(["CREATE VIEW","UPDATE","DELETE [FROM]","DROP [TEMPORARY] TABLE [IF EXISTS]","ALTER [ONLINE] TABLE","ADD [COLUMN]","ADD [UNIQUE] {INDEX | KEY}","DROP [COLUMN]","MODIFY [COLUMN]","CHANGE","RENAME [TO | AS]","TRUNCATE [TABLE]","ADD AGGREGATOR","ADD LEAF","AGGREGATOR SET AS MASTER","ALTER DATABASE","ALTER PIPELINE","ALTER RESOURCE POOL","ALTER USER","ALTER VIEW","ANALYZE TABLE","ATTACH DATABASE","ATTACH LEAF","ATTACH LEAF ALL","BACKUP DATABASE","BINLOG","BOOTSTRAP AGGREGATOR","CACHE INDEX","CALL","CHANGE","CHANGE MASTER TO","CHANGE REPLICATION FILTER","CHANGE REPLICATION SOURCE TO","CHECK BLOB CHECKSUM","CHECK TABLE","CHECKSUM TABLE","CLEAR ORPHAN DATABASES","CLONE","COMMIT","CREATE DATABASE","CREATE GROUP","CREATE INDEX","CREATE LINK","CREATE MILESTONE","CREATE PIPELINE","CREATE RESOURCE POOL","CREATE ROLE","CREATE USER","DEALLOCATE PREPARE","DESCRIBE","DETACH DATABASE","DETACH PIPELINE","DROP DATABASE","DROP FUNCTION","DROP INDEX","DROP LINK","DROP PIPELINE","DROP PROCEDURE","DROP RESOURCE POOL","DROP ROLE","DROP USER","DROP VIEW","EXECUTE","EXPLAIN","FLUSH","FORCE","GRANT","HANDLER","HELP","KILL CONNECTION","KILLALL QUERIES","LOAD DATA","LOAD INDEX INTO CACHE","LOAD XML","LOCK INSTANCE FOR BACKUP","LOCK TABLES","MASTER_POS_WAIT","OPTIMIZE TABLE","PREPARE","PURGE BINARY LOGS","REBALANCE PARTITIONS","RELEASE SAVEPOINT","REMOVE AGGREGATOR","REMOVE LEAF","REPAIR TABLE","REPLACE","REPLICATE DATABASE","RESET","RESET MASTER","RESET PERSIST","RESET REPLICA","RESET SLAVE","RESTART","RESTORE DATABASE","RESTORE REDUNDANCY","REVOKE","ROLLBACK","ROLLBACK TO SAVEPOINT","SAVEPOINT","SET CHARACTER SET","SET DEFAULT ROLE","SET NAMES","SET PASSWORD","SET RESOURCE GROUP","SET ROLE","SET TRANSACTION","SHOW","SHOW CHARACTER SET","SHOW COLLATION","SHOW COLUMNS","SHOW CREATE DATABASE","SHOW CREATE FUNCTION","SHOW CREATE PIPELINE","SHOW CREATE PROCEDURE","SHOW CREATE TABLE","SHOW CREATE USER","SHOW CREATE VIEW","SHOW DATABASES","SHOW ENGINE","SHOW ENGINES","SHOW ERRORS","SHOW FUNCTION CODE","SHOW FUNCTION STATUS","SHOW GRANTS","SHOW INDEX","SHOW MASTER STATUS","SHOW OPEN TABLES","SHOW PLUGINS","SHOW PRIVILEGES","SHOW PROCEDURE CODE","SHOW PROCEDURE STATUS","SHOW PROCESSLIST","SHOW PROFILE","SHOW PROFILES","SHOW RELAYLOG EVENTS","SHOW REPLICA STATUS","SHOW REPLICAS","SHOW SLAVE","SHOW SLAVE HOSTS","SHOW STATUS","SHOW TABLE STATUS","SHOW TABLES","SHOW VARIABLES","SHOW WARNINGS","SHUTDOWN","SNAPSHOT DATABASE","SOURCE_POS_WAIT","START GROUP_REPLICATION","START PIPELINE","START REPLICA","START SLAVE","START TRANSACTION","STOP GROUP_REPLICATION","STOP PIPELINE","STOP REPLICA","STOP REPLICATING","STOP SLAVE","TEST PIPELINE","UNLOCK INSTANCE","UNLOCK TABLES","USE","XA","ITERATE","LEAVE","LOOP","REPEAT","RETURN","WHILE"]),bwe=x(["UNION [ALL | DISTINCT]","EXCEPT","INTERSECT","MINUS"]),ywe=x(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL {LEFT | RIGHT} [OUTER] JOIN","STRAIGHT_JOIN"]),wwe=x(["ON DELETE","ON UPDATE","CHARACTER SET","{ROWS | RANGE} BETWEEN","IDENTIFIED BY"]),Lwe=x([]),hR={name:"singlestoredb",tokenizerOptions:{reservedSelect:Owe,reservedClauses:[...Cwe,...Yz,...Ey],reservedSetOperations:bwe,reservedJoins:ywe,reservedKeywordPhrases:wwe,reservedDataTypePhrases:Lwe,reservedKeywords:Hz,reservedDataTypes:Gz,reservedFunctionNames:$z,stringTypes:['""-qq-bs',"''-qq-bs",{quote:"''-raw",prefixes:["B","X"],requirePrefix:!0}],identTypes:["``"],identChars:{first:"$",rest:"$",allowFirstCharNumber:!0},variableTypes:[{regex:"@@?[A-Za-z0-9_$]+"},{quote:"``",prefixes:["@"],requirePrefix:!0}],lineCommentTypes:["--","#"],operators:[":=","&","|","^","~","<<",">>","<=>","&&","||","::","::$","::%",":>","!:>","*.*"],postProcess:oo},formatOptions:{alwaysDenseOperators:["::","::$","::%"],onelineClauses:[...Yz,...Ey],tabularOnelineClauses:Ey}}});var Vz,qz=G(()=>{Vz=["ABS","ACOS","ACOSH","ADD_MONTHS","ALL_USER_NAMES","ANY_VALUE","APPROX_COUNT_DISTINCT","APPROX_PERCENTILE","APPROX_PERCENTILE_ACCUMULATE","APPROX_PERCENTILE_COMBINE","APPROX_PERCENTILE_ESTIMATE","APPROX_TOP_K","APPROX_TOP_K_ACCUMULATE","APPROX_TOP_K_COMBINE","APPROX_TOP_K_ESTIMATE","APPROXIMATE_JACCARD_INDEX","APPROXIMATE_SIMILARITY","ARRAY_AGG","ARRAY_APPEND","ARRAY_CAT","ARRAY_COMPACT","ARRAY_CONSTRUCT","ARRAY_CONSTRUCT_COMPACT","ARRAY_CONTAINS","ARRAY_INSERT","ARRAY_INTERSECTION","ARRAY_POSITION","ARRAY_PREPEND","ARRAY_SIZE","ARRAY_SLICE","ARRAY_TO_STRING","ARRAY_UNION_AGG","ARRAY_UNIQUE_AGG","ARRAYS_OVERLAP","AS_ARRAY","AS_BINARY","AS_BOOLEAN","AS_CHAR","AS_VARCHAR","AS_DATE","AS_DECIMAL","AS_NUMBER","AS_DOUBLE","AS_REAL","AS_INTEGER","AS_OBJECT","AS_TIME","AS_TIMESTAMP_LTZ","AS_TIMESTAMP_NTZ","AS_TIMESTAMP_TZ","ASCII","ASIN","ASINH","ATAN","ATAN2","ATANH","AUTO_REFRESH_REGISTRATION_HISTORY","AUTOMATIC_CLUSTERING_HISTORY","AVG","BASE64_DECODE_BINARY","BASE64_DECODE_STRING","BASE64_ENCODE","BIT_LENGTH","BITAND","BITAND_AGG","BITMAP_BIT_POSITION","BITMAP_BUCKET_NUMBER","BITMAP_CONSTRUCT_AGG","BITMAP_COUNT","BITMAP_OR_AGG","BITNOT","BITOR","BITOR_AGG","BITSHIFTLEFT","BITSHIFTRIGHT","BITXOR","BITXOR_AGG","BOOLAND","BOOLAND_AGG","BOOLNOT","BOOLOR","BOOLOR_AGG","BOOLXOR","BOOLXOR_AGG","BUILD_SCOPED_FILE_URL","BUILD_STAGE_FILE_URL","CASE","CAST","CBRT","CEIL","CHARINDEX","CHECK_JSON","CHECK_XML","CHR","CHAR","COALESCE","COLLATE","COLLATION","COMPLETE_TASK_GRAPHS","COMPRESS","CONCAT","CONCAT_WS","CONDITIONAL_CHANGE_EVENT","CONDITIONAL_TRUE_EVENT","CONTAINS","CONVERT_TIMEZONE","COPY_HISTORY","CORR","COS","COSH","COT","COUNT","COUNT_IF","COVAR_POP","COVAR_SAMP","CUME_DIST","CURRENT_ACCOUNT","CURRENT_AVAILABLE_ROLES","CURRENT_CLIENT","CURRENT_DATABASE","CURRENT_DATE","CURRENT_IP_ADDRESS","CURRENT_REGION","CURRENT_ROLE","CURRENT_SCHEMA","CURRENT_SCHEMAS","CURRENT_SECONDARY_ROLES","CURRENT_SESSION","CURRENT_STATEMENT","CURRENT_TASK_GRAPHS","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_TRANSACTION","CURRENT_USER","CURRENT_VERSION","CURRENT_WAREHOUSE","DATA_TRANSFER_HISTORY","DATABASE_REFRESH_HISTORY","DATABASE_REFRESH_PROGRESS","DATABASE_REFRESH_PROGRESS_BY_JOB","DATABASE_STORAGE_USAGE_HISTORY","DATE_FROM_PARTS","DATE_PART","DATE_TRUNC","DATEADD","DATEDIFF","DAYNAME","DECODE","DECOMPRESS_BINARY","DECOMPRESS_STRING","DECRYPT","DECRYPT_RAW","DEGREES","DENSE_RANK","DIV0","EDITDISTANCE","ENCRYPT","ENCRYPT_RAW","ENDSWITH","EQUAL_NULL","EXP","EXPLAIN_JSON","EXTERNAL_FUNCTIONS_HISTORY","EXTERNAL_TABLE_FILES","EXTERNAL_TABLE_FILE_REGISTRATION_HISTORY","EXTRACT","EXTRACT_SEMANTIC_CATEGORIES","FACTORIAL","FILTER","FIRST_VALUE","FLATTEN","FLOOR","GENERATE_COLUMN_DESCRIPTION","GENERATOR","GET","GET_ABSOLUTE_PATH","GET_DDL","GET_IGNORE_CASE","GET_OBJECT_REFERENCES","GET_PATH","GET_PRESIGNED_URL","GET_RELATIVE_PATH","GET_STAGE_LOCATION","GETBIT","GREATEST","GREATEST_IGNORE_NULLS","GROUPING","GROUPING_ID","HASH","HASH_AGG","HAVERSINE","HEX_DECODE_BINARY","HEX_DECODE_STRING","HEX_ENCODE","HLL","HLL_ACCUMULATE","HLL_COMBINE","HLL_ESTIMATE","HLL_EXPORT","HLL_IMPORT","HOUR","MINUTE","SECOND","IDENTIFIER","IFF","IFNULL","ILIKE","ILIKE ANY","INFER_SCHEMA","INITCAP","INSERT","INVOKER_ROLE","INVOKER_SHARE","IS_ARRAY","IS_BINARY","IS_BOOLEAN","IS_CHAR","IS_VARCHAR","IS_DATE","IS_DATE_VALUE","IS_DECIMAL","IS_DOUBLE","IS_REAL","IS_GRANTED_TO_INVOKER_ROLE","IS_INTEGER","IS_NULL_VALUE","IS_OBJECT","IS_ROLE_IN_SESSION","IS_TIME","IS_TIMESTAMP_LTZ","IS_TIMESTAMP_NTZ","IS_TIMESTAMP_TZ","JAROWINKLER_SIMILARITY","JSON_EXTRACT_PATH_TEXT","KURTOSIS","LAG","LAST_DAY","LAST_QUERY_ID","LAST_TRANSACTION","LAST_VALUE","LEAD","LEAST","LEFT","LENGTH","LEN","LIKE","LIKE ALL","LIKE ANY","LISTAGG","LN","LOCALTIME","LOCALTIMESTAMP","LOG","LOGIN_HISTORY","LOGIN_HISTORY_BY_USER","LOWER","LPAD","LTRIM","MATERIALIZED_VIEW_REFRESH_HISTORY","MD5","MD5_HEX","MD5_BINARY","MD5_NUMBER \u2014 Obsoleted","MD5_NUMBER_LOWER64","MD5_NUMBER_UPPER64","MEDIAN","MIN","MAX","MINHASH","MINHASH_COMBINE","MOD","MODE","MONTHNAME","MONTHS_BETWEEN","NEXT_DAY","NORMAL","NTH_VALUE","NTILE","NULLIF","NULLIFZERO","NVL","NVL2","OBJECT_AGG","OBJECT_CONSTRUCT","OBJECT_CONSTRUCT_KEEP_NULL","OBJECT_DELETE","OBJECT_INSERT","OBJECT_KEYS","OBJECT_PICK","OCTET_LENGTH","PARSE_IP","PARSE_JSON","PARSE_URL","PARSE_XML","PERCENT_RANK","PERCENTILE_CONT","PERCENTILE_DISC","PI","PIPE_USAGE_HISTORY","POLICY_CONTEXT","POLICY_REFERENCES","POSITION","POW","POWER","PREVIOUS_DAY","QUERY_ACCELERATION_HISTORY","QUERY_HISTORY","QUERY_HISTORY_BY_SESSION","QUERY_HISTORY_BY_USER","QUERY_HISTORY_BY_WAREHOUSE","RADIANS","RANDOM","RANDSTR","RANK","RATIO_TO_REPORT","REGEXP","REGEXP_COUNT","REGEXP_INSTR","REGEXP_LIKE","REGEXP_REPLACE","REGEXP_SUBSTR","REGEXP_SUBSTR_ALL","REGR_AVGX","REGR_AVGY","REGR_COUNT","REGR_INTERCEPT","REGR_R2","REGR_SLOPE","REGR_SXX","REGR_SXY","REGR_SYY","REGR_VALX","REGR_VALY","REPEAT","REPLACE","REPLICATION_GROUP_REFRESH_HISTORY","REPLICATION_GROUP_REFRESH_PROGRESS","REPLICATION_GROUP_REFRESH_PROGRESS_BY_JOB","REPLICATION_GROUP_USAGE_HISTORY","REPLICATION_USAGE_HISTORY","REST_EVENT_HISTORY","RESULT_SCAN","REVERSE","RIGHT","RLIKE","ROUND","ROW_NUMBER","RPAD","RTRIM","RTRIMMED_LENGTH","SEARCH_OPTIMIZATION_HISTORY","SEQ1","SEQ2","SEQ4","SEQ8","SERVERLESS_TASK_HISTORY","SHA1","SHA1_HEX","SHA1_BINARY","SHA2","SHA2_HEX","SHA2_BINARY","SIGN","SIN","SINH","SKEW","SOUNDEX","SPACE","SPLIT","SPLIT_PART","SPLIT_TO_TABLE","SQRT","SQUARE","ST_AREA","ST_ASEWKB","ST_ASEWKT","ST_ASGEOJSON","ST_ASWKB","ST_ASBINARY","ST_ASWKT","ST_ASTEXT","ST_AZIMUTH","ST_CENTROID","ST_COLLECT","ST_CONTAINS","ST_COVEREDBY","ST_COVERS","ST_DIFFERENCE","ST_DIMENSION","ST_DISJOINT","ST_DISTANCE","ST_DWITHIN","ST_ENDPOINT","ST_ENVELOPE","ST_GEOGFROMGEOHASH","ST_GEOGPOINTFROMGEOHASH","ST_GEOGRAPHYFROMWKB","ST_GEOGRAPHYFROMWKT","ST_GEOHASH","ST_GEOMETRYFROMWKB","ST_GEOMETRYFROMWKT","ST_HAUSDORFFDISTANCE","ST_INTERSECTION","ST_INTERSECTS","ST_LENGTH","ST_MAKEGEOMPOINT","ST_GEOM_POINT","ST_MAKELINE","ST_MAKEPOINT","ST_POINT","ST_MAKEPOLYGON","ST_POLYGON","ST_NPOINTS","ST_NUMPOINTS","ST_PERIMETER","ST_POINTN","ST_SETSRID","ST_SIMPLIFY","ST_SRID","ST_STARTPOINT","ST_SYMDIFFERENCE","ST_UNION","ST_WITHIN","ST_X","ST_XMAX","ST_XMIN","ST_Y","ST_YMAX","ST_YMIN","STAGE_DIRECTORY_FILE_REGISTRATION_HISTORY","STAGE_STORAGE_USAGE_HISTORY","STARTSWITH","STDDEV","STDDEV_POP","STDDEV_SAMP","STRIP_NULL_VALUE","STRTOK","STRTOK_SPLIT_TO_TABLE","STRTOK_TO_ARRAY","SUBSTR","SUBSTRING","SUM","SYSDATE","SYSTEM$ABORT_SESSION","SYSTEM$ABORT_TRANSACTION","SYSTEM$AUTHORIZE_PRIVATELINK","SYSTEM$AUTHORIZE_STAGE_PRIVATELINK_ACCESS","SYSTEM$BEHAVIOR_CHANGE_BUNDLE_STATUS","SYSTEM$CANCEL_ALL_QUERIES","SYSTEM$CANCEL_QUERY","SYSTEM$CLUSTERING_DEPTH","SYSTEM$CLUSTERING_INFORMATION","SYSTEM$CLUSTERING_RATIO ","SYSTEM$CURRENT_USER_TASK_NAME","SYSTEM$DATABASE_REFRESH_HISTORY ","SYSTEM$DATABASE_REFRESH_PROGRESS","SYSTEM$DATABASE_REFRESH_PROGRESS_BY_JOB ","SYSTEM$DISABLE_BEHAVIOR_CHANGE_BUNDLE","SYSTEM$DISABLE_DATABASE_REPLICATION","SYSTEM$ENABLE_BEHAVIOR_CHANGE_BUNDLE","SYSTEM$ESTIMATE_QUERY_ACCELERATION","SYSTEM$ESTIMATE_SEARCH_OPTIMIZATION_COSTS","SYSTEM$EXPLAIN_JSON_TO_TEXT","SYSTEM$EXPLAIN_PLAN_JSON","SYSTEM$EXTERNAL_TABLE_PIPE_STATUS","SYSTEM$GENERATE_SAML_CSR","SYSTEM$GENERATE_SCIM_ACCESS_TOKEN","SYSTEM$GET_AWS_SNS_IAM_POLICY","SYSTEM$GET_PREDECESSOR_RETURN_VALUE","SYSTEM$GET_PRIVATELINK","SYSTEM$GET_PRIVATELINK_AUTHORIZED_ENDPOINTS","SYSTEM$GET_PRIVATELINK_CONFIG","SYSTEM$GET_SNOWFLAKE_PLATFORM_INFO","SYSTEM$GET_TAG","SYSTEM$GET_TAG_ALLOWED_VALUES","SYSTEM$GET_TAG_ON_CURRENT_COLUMN","SYSTEM$GET_TAG_ON_CURRENT_TABLE","SYSTEM$GLOBAL_ACCOUNT_SET_PARAMETER","SYSTEM$LAST_CHANGE_COMMIT_TIME","SYSTEM$LINK_ACCOUNT_OBJECTS_BY_NAME","SYSTEM$MIGRATE_SAML_IDP_REGISTRATION","SYSTEM$PIPE_FORCE_RESUME","SYSTEM$PIPE_STATUS","SYSTEM$REVOKE_PRIVATELINK","SYSTEM$REVOKE_STAGE_PRIVATELINK_ACCESS","SYSTEM$SET_RETURN_VALUE","SYSTEM$SHOW_OAUTH_CLIENT_SECRETS","SYSTEM$STREAM_GET_TABLE_TIMESTAMP","SYSTEM$STREAM_HAS_DATA","SYSTEM$TASK_DEPENDENTS_ENABLE","SYSTEM$TYPEOF","SYSTEM$USER_TASK_CANCEL_ONGOING_EXECUTIONS","SYSTEM$VERIFY_EXTERNAL_OAUTH_TOKEN","SYSTEM$WAIT","SYSTEM$WHITELIST","SYSTEM$WHITELIST_PRIVATELINK","TAG_REFERENCES","TAG_REFERENCES_ALL_COLUMNS","TAG_REFERENCES_WITH_LINEAGE","TAN","TANH","TASK_DEPENDENTS","TASK_HISTORY","TIME_FROM_PARTS","TIME_SLICE","TIMEADD","TIMEDIFF","TIMESTAMP_FROM_PARTS","TIMESTAMPADD","TIMESTAMPDIFF","TO_ARRAY","TO_BINARY","TO_BOOLEAN","TO_CHAR","TO_VARCHAR","TO_DATE","DATE","TO_DECIMAL","TO_NUMBER","TO_NUMERIC","TO_DOUBLE","TO_GEOGRAPHY","TO_GEOMETRY","TO_JSON","TO_OBJECT","TO_TIME","TIME","TO_TIMESTAMP","TO_TIMESTAMP_LTZ","TO_TIMESTAMP_NTZ","TO_TIMESTAMP_TZ","TO_VARIANT","TO_XML","TRANSLATE","TRIM","TRUNCATE","TRUNC","TRUNC","TRY_BASE64_DECODE_BINARY","TRY_BASE64_DECODE_STRING","TRY_CAST","TRY_HEX_DECODE_BINARY","TRY_HEX_DECODE_STRING","TRY_PARSE_JSON","TRY_TO_BINARY","TRY_TO_BOOLEAN","TRY_TO_DATE","TRY_TO_DECIMAL","TRY_TO_NUMBER","TRY_TO_NUMERIC","TRY_TO_DOUBLE","TRY_TO_GEOGRAPHY","TRY_TO_GEOMETRY","TRY_TO_TIME","TRY_TO_TIMESTAMP","TRY_TO_TIMESTAMP_LTZ","TRY_TO_TIMESTAMP_NTZ","TRY_TO_TIMESTAMP_TZ","TYPEOF","UNICODE","UNIFORM","UPPER","UUID_STRING","VALIDATE","VALIDATE_PIPE_LOAD","VAR_POP","VAR_SAMP","VARIANCE","VARIANCE_SAMP","VARIANCE_POP","WAREHOUSE_LOAD_HISTORY","WAREHOUSE_METERING_HISTORY","WIDTH_BUCKET","XMLGET","YEAR","YEAROFWEEK","YEAROFWEEKISO","DAY","DAYOFMONTH","DAYOFWEEK","DAYOFWEEKISO","DAYOFYEAR","WEEK","WEEK","WEEKOFYEAR","WEEKISO","MONTH","QUARTER","ZEROIFNULL","ZIPF"]});var Xz,jz,zz=G(()=>{Xz=["ACCOUNT","ALL","ALTER","AND","ANY","AS","BETWEEN","BY","CASE","CAST","CHECK","COLUMN","CONNECT","CONNECTION","CONSTRAINT","CREATE","CROSS","CURRENT","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","DATABASE","DELETE","DISTINCT","DROP","ELSE","EXISTS","FALSE","FOLLOWING","FOR","FROM","FULL","GRANT","GROUP","GSCLUSTER","HAVING","ILIKE","IN","INCREMENT","INNER","INSERT","INTERSECT","INTO","IS","ISSUE","JOIN","LATERAL","LEFT","LIKE","LOCALTIME","LOCALTIMESTAMP","MINUS","NATURAL","NOT","NULL","OF","ON","OR","ORDER","ORGANIZATION","QUALIFY","REGEXP","REVOKE","RIGHT","RLIKE","ROW","ROWS","SAMPLE","SCHEMA","SELECT","SET","SOME","START","TABLE","TABLESAMPLE","THEN","TO","TRIGGER","TRUE","TRY_CAST","UNION","UNIQUE","UPDATE","USING","VALUES","VIEW","WHEN","WHENEVER","WHERE","WITH","COMMENT"],jz=["NUMBER","DECIMAL","NUMERIC","INT","INTEGER","BIGINT","SMALLINT","TINYINT","BYTEINT","FLOAT","FLOAT4","FLOAT8","DOUBLE","DOUBLE PRECISION","REAL","VARCHAR","CHAR","CHARACTER","STRING","TEXT","BINARY","VARBINARY","BOOLEAN","DATE","DATETIME","TIME","TIMESTAMP","TIMESTAMP_LTZ","TIMESTAMP_NTZ","TIMESTAMP","TIMESTAMP_TZ","VARIANT","OBJECT","ARRAY","GEOGRAPHY","GEOMETRY"]});var Dwe,Pwe,Kz,py,xwe,vwe,Mwe,Uwe,pR,Ty=G(()=>{xt();qz();zz();Dwe=x(["SELECT [ALL | DISTINCT]"]),Pwe=x(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY","HAVING","PARTITION BY","ORDER BY","QUALIFY","LIMIT","OFFSET","FETCH [FIRST | NEXT]","INSERT [OVERWRITE] [ALL INTO | INTO | ALL | FIRST]","{THEN | ELSE} INTO","VALUES","SET","CLUSTER BY","[WITH] {MASKING POLICY | TAG | ROW ACCESS POLICY}","COPY GRANTS","USING TEMPLATE","MERGE INTO","WHEN MATCHED [AND]","THEN {UPDATE SET | DELETE}","WHEN NOT MATCHED THEN INSERT"]),Kz=x(["CREATE [OR REPLACE] [VOLATILE] TABLE [IF NOT EXISTS]","CREATE [OR REPLACE] [LOCAL | GLOBAL] {TEMP|TEMPORARY} TABLE [IF NOT EXISTS]"]),py=x(["CREATE [OR REPLACE] [SECURE] [RECURSIVE] VIEW [IF NOT EXISTS]","UPDATE","DELETE FROM","DROP TABLE [IF EXISTS]","ALTER TABLE [IF EXISTS]","RENAME TO","SWAP WITH","[SUSPEND | RESUME] RECLUSTER","DROP CLUSTERING KEY","ADD [COLUMN]","RENAME COLUMN","{ALTER | MODIFY} [COLUMN]","DROP [COLUMN]","{ADD | ALTER | MODIFY | DROP} [CONSTRAINT]","RENAME CONSTRAINT","{ADD | DROP} SEARCH OPTIMIZATION","{SET | UNSET} TAG","{ADD | DROP} ROW ACCESS POLICY","DROP ALL ROW ACCESS POLICIES","{SET | DROP} DEFAULT","{SET | DROP} NOT NULL","SET DATA TYPE","UNSET COMMENT","{SET | UNSET} MASKING POLICY","TRUNCATE [TABLE] [IF EXISTS]","ALTER ACCOUNT","ALTER API INTEGRATION","ALTER CONNECTION","ALTER DATABASE","ALTER EXTERNAL TABLE","ALTER FAILOVER GROUP","ALTER FILE FORMAT","ALTER FUNCTION","ALTER INTEGRATION","ALTER MASKING POLICY","ALTER MATERIALIZED VIEW","ALTER NETWORK POLICY","ALTER NOTIFICATION INTEGRATION","ALTER PIPE","ALTER PROCEDURE","ALTER REPLICATION GROUP","ALTER RESOURCE MONITOR","ALTER ROLE","ALTER ROW ACCESS POLICY","ALTER SCHEMA","ALTER SECURITY INTEGRATION","ALTER SEQUENCE","ALTER SESSION","ALTER SESSION POLICY","ALTER SHARE","ALTER STAGE","ALTER STORAGE INTEGRATION","ALTER STREAM","ALTER TAG","ALTER TASK","ALTER USER","ALTER VIEW","ALTER WAREHOUSE","BEGIN","CALL","COMMIT","COPY INTO","CREATE ACCOUNT","CREATE API INTEGRATION","CREATE CONNECTION","CREATE DATABASE","CREATE EXTERNAL FUNCTION","CREATE EXTERNAL TABLE","CREATE FAILOVER GROUP","CREATE FILE FORMAT","CREATE FUNCTION","CREATE INTEGRATION","CREATE MANAGED ACCOUNT","CREATE MASKING POLICY","CREATE MATERIALIZED VIEW","CREATE NETWORK POLICY","CREATE NOTIFICATION INTEGRATION","CREATE PIPE","CREATE PROCEDURE","CREATE REPLICATION GROUP","CREATE RESOURCE MONITOR","CREATE ROLE","CREATE ROW ACCESS POLICY","CREATE SCHEMA","CREATE SECURITY INTEGRATION","CREATE SEQUENCE","CREATE SESSION POLICY","CREATE SHARE","CREATE STAGE","CREATE STORAGE INTEGRATION","CREATE STREAM","CREATE TAG","CREATE TASK","CREATE USER","CREATE WAREHOUSE","DELETE","DESCRIBE DATABASE","DESCRIBE EXTERNAL TABLE","DESCRIBE FILE FORMAT","DESCRIBE FUNCTION","DESCRIBE INTEGRATION","DESCRIBE MASKING POLICY","DESCRIBE MATERIALIZED VIEW","DESCRIBE NETWORK POLICY","DESCRIBE PIPE","DESCRIBE PROCEDURE","DESCRIBE RESULT","DESCRIBE ROW ACCESS POLICY","DESCRIBE SCHEMA","DESCRIBE SEQUENCE","DESCRIBE SESSION POLICY","DESCRIBE SHARE","DESCRIBE STAGE","DESCRIBE STREAM","DESCRIBE TABLE","DESCRIBE TASK","DESCRIBE TRANSACTION","DESCRIBE USER","DESCRIBE VIEW","DESCRIBE WAREHOUSE","DROP CONNECTION","DROP DATABASE","DROP EXTERNAL TABLE","DROP FAILOVER GROUP","DROP FILE FORMAT","DROP FUNCTION","DROP INTEGRATION","DROP MANAGED ACCOUNT","DROP MASKING POLICY","DROP MATERIALIZED VIEW","DROP NETWORK POLICY","DROP PIPE","DROP PROCEDURE","DROP REPLICATION GROUP","DROP RESOURCE MONITOR","DROP ROLE","DROP ROW ACCESS POLICY","DROP SCHEMA","DROP SEQUENCE","DROP SESSION POLICY","DROP SHARE","DROP STAGE","DROP STREAM","DROP TAG","DROP TASK","DROP USER","DROP VIEW","DROP WAREHOUSE","EXECUTE IMMEDIATE","EXECUTE TASK","EXPLAIN","GET","GRANT OWNERSHIP","GRANT ROLE","INSERT","LIST","MERGE","PUT","REMOVE","REVOKE ROLE","ROLLBACK","SHOW COLUMNS","SHOW CONNECTIONS","SHOW DATABASES","SHOW DATABASES IN FAILOVER GROUP","SHOW DATABASES IN REPLICATION GROUP","SHOW DELEGATED AUTHORIZATIONS","SHOW EXTERNAL FUNCTIONS","SHOW EXTERNAL TABLES","SHOW FAILOVER GROUPS","SHOW FILE FORMATS","SHOW FUNCTIONS","SHOW GLOBAL ACCOUNTS","SHOW GRANTS","SHOW INTEGRATIONS","SHOW LOCKS","SHOW MANAGED ACCOUNTS","SHOW MASKING POLICIES","SHOW MATERIALIZED VIEWS","SHOW NETWORK POLICIES","SHOW OBJECTS","SHOW ORGANIZATION ACCOUNTS","SHOW PARAMETERS","SHOW PIPES","SHOW PRIMARY KEYS","SHOW PROCEDURES","SHOW REGIONS","SHOW REPLICATION ACCOUNTS","SHOW REPLICATION DATABASES","SHOW REPLICATION GROUPS","SHOW RESOURCE MONITORS","SHOW ROLES","SHOW ROW ACCESS POLICIES","SHOW SCHEMAS","SHOW SEQUENCES","SHOW SESSION POLICIES","SHOW SHARES","SHOW SHARES IN FAILOVER GROUP","SHOW SHARES IN REPLICATION GROUP","SHOW STAGES","SHOW STREAMS","SHOW TABLES","SHOW TAGS","SHOW TASKS","SHOW TRANSACTIONS","SHOW USER FUNCTIONS","SHOW USERS","SHOW VARIABLES","SHOW VIEWS","SHOW WAREHOUSES","TRUNCATE MATERIALIZED VIEW","UNDROP DATABASE","UNDROP SCHEMA","UNDROP TABLE","UNDROP TAG","UNSET","USE DATABASE","USE ROLE","USE SCHEMA","USE SECONDARY ROLES","USE WAREHOUSE"]),xwe=x(["UNION [ALL]","MINUS","EXCEPT","INTERSECT"]),vwe=x(["[INNER] JOIN","[NATURAL] {LEFT | RIGHT | FULL} [OUTER] JOIN","{CROSS | NATURAL} JOIN"]),Mwe=x(["{ROWS | RANGE} BETWEEN","ON {UPDATE | DELETE} [SET NULL | SET DEFAULT]"]),Uwe=x([]),pR={name:"snowflake",tokenizerOptions:{reservedSelect:Dwe,reservedClauses:[...Pwe,...Kz,...py],reservedSetOperations:xwe,reservedJoins:vwe,reservedKeywordPhrases:Mwe,reservedDataTypePhrases:Uwe,reservedKeywords:Xz,reservedDataTypes:jz,reservedFunctionNames:Vz,stringTypes:["$$","''-qq-bs"],identTypes:['""-qq'],variableTypes:[{regex:"[$][1-9]\\d*"},{regex:"[$][_a-zA-Z][_a-zA-Z0-9$]*"}],extraParens:["[]"],identChars:{rest:"$"},lineCommentTypes:["--","//"],operators:["%","::","||","=>",":=","->"],propertyAccessOperators:[":"]},formatOptions:{alwaysDenseOperators:["::"],onelineClauses:[...Kz,...py],tabularOnelineClauses:py}}});var Sy={};Et(Sy,{bigquery:()=>JS,db2:()=>QS,db2i:()=>ZS,duckdb:()=>eR,hive:()=>tR,mariadb:()=>rR,mysql:()=>nR,n1ql:()=>sR,plsql:()=>oR,postgresql:()=>aR,redshift:()=>lR,singlestoredb:()=>hR,snowflake:()=>pR,spark:()=>cR,sql:()=>dR,sqlite:()=>uR,tidb:()=>iR,transactsql:()=>ER,trino:()=>fR});var Jz=G(()=>{Mb();Bb();Hb();Wb();kb();Vb();Xb();zb();Kb();Qb();ey();ry();iy();oy();ly();uy();fy();hy();Ty()});var ao,Ry,yc,TR,wc=G(()=>{ao=t=>t[t.length-1],Ry=t=>t.sort((e,r)=>r.length-e.length||e.localeCompare(r)),yc=t=>t.replace(/\s+/gu," "),TR=t=>/\n/.test(t)});var an,Ay,Ss,Bwe,Qz,Zz,SR=G(()=>{an=t=>t.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&"),Ay=/\s+/uy,Ss=t=>new RegExp(`(?:${t})`,"uy"),Bwe=t=>t.split("").map(e=>/ /gu.test(e)?"\\s+":`[${e.toUpperCase()}${e.toLowerCase()}]`).join(""),Qz=t=>t+"(?:-"+t+")*",Zz=({prefixes:t,requirePrefix:e})=>`(?:${t.map(Bwe).join("|")}${e?"":"|"})`});var tK,my,gy,Fwe,Di,RR,Hwe,eK,rK,nK,_y,Iy,iK,Ny,sK=G(()=>{wc();SR();tK=t=>new RegExp(`(?:${t.map(an).join("|")}).*?(?=\r
|\r|
|$)`,"uy"),my=(t,e=[])=>{let r=t==="open"?0:1,n=["()",...e].map(i=>i[r]);return Ss(n.map(an).join("|"))},gy=t=>Ss(`${Ry(t).map(an).join("|")}`),Fwe=({rest:t,dashes:e})=>t||e?`(?![${t||""}${e?"-":""}])`:"",Di=(t,e={})=>{if(t.length===0)return/^\b$/u;let r=Fwe(e),n=Ry(t).map(an).join("|").replace(/ /gu,"\\s+");return new RegExp(`(?:${n})${r}\\b`,"iuy")},RR=(t,e)=>{if(!t.length)return;let r=t.map(an).join("|");return Ss(`(?:${r})(?:${e})`)},Hwe=()=>{let t={"<":">","[":"]","(":")","{":"}"},e="{left}(?:(?!{right}').)*?{right}",r=Object.entries(t).map(([o,a])=>e.replace(/{left}/g,an(o)).replace(/{right}/g,an(a))),n=an(Object.keys(t).join(""));return`[Qq]'(?:${String.raw`(?<tag>[^\s${n}])(?:(?!\k<tag>').)*?\k<tag>`}|${r.join("|")})'`},eK={"``":"(?:`[^`]*`)+","[]":String.raw`(?:\[[^\]]*\])(?:\][^\]]*\])*`,'""-qq':String.raw`(?:"[^"]*")+`,'""-bs':String.raw`(?:"[^"\\]*(?:\\.[^"\\]*)*")`,'""-qq-bs':String.raw`(?:"[^"\\]*(?:\\.[^"\\]*)*")+`,'""-raw':String.raw`(?:"[^"]*")`,"''-qq":String.raw`(?:'[^']*')+`,"''-bs":String.raw`(?:'[^'\\]*(?:\\.[^'\\]*)*')`,"''-qq-bs":String.raw`(?:'[^'\\]*(?:\\.[^'\\]*)*')+`,"''-raw":String.raw`(?:'[^']*')`,$$:String.raw`(?<tag>\$\w*\$)[\s\S]*?\k<tag>`,"'''..'''":String.raw`'''[^\\]*?(?:\\.[^\\]*?)*?'''`,'""".."""':String.raw`"""[^\\]*?(?:\\.[^\\]*?)*?"""`,"{}":String.raw`(?:\{[^\}]*\})`,"q''":Hwe()},rK=t=>typeof t=="string"?eK[t]:"regex"in t?t.regex:Zz(t)+eK[t.quote],nK=t=>Ss(t.map(e=>"regex"in e?e.regex:rK(e)).join("|")),_y=t=>t.map(rK).join("|"),Iy=t=>Ss(_y(t)),iK=(t={})=>Ss(Ny(t)),Ny=({first:t,rest:e,dashes:r,allowFirstCharNumber:n}={})=>{let i="\\p{Alphabetic}\\p{Mark}_",s="\\p{Decimal_Number}",o=an(t??""),a=an(e??""),l=n?`[${i}${s}${o}][${i}${s}${a}]*`:`[${i}${o}][${i}${s}${a}]*`;return r?Qz(l):l}});function AR(t,e){let r=t.slice(0,e).split(/\n/);return{line:r.length,col:r[r.length-1].length+1}}var Oy=G(()=>{});var uf,oK=G(()=>{Oy();SR();uf=class{constructor(e,r){this.rules=e,this.dialectName=r,this.input="",this.index=0}tokenize(e){this.input=e,this.index=0;let r=[],n;for(;this.index<this.input.length;){let i=this.getWhitespace();if(this.index<this.input.length){if(n=this.getNextToken(),!n)throw this.createParseError();r.push(Object.assign(Object.assign({},n),{precedingWhitespace:i}))}}return r}createParseError(){let e=this.input.slice(this.index,this.index+10),{line:r,col:n}=AR(this.input,this.index);return new Error(`Parse error: Unexpected "${e}" at line ${r} column ${n}.
${this.dialectInfo()}`)}dialectInfo(){return this.dialectName==="sql"?`This likely happens because you're using the default "sql" dialect.
If possible, please select a more specific dialect (like sqlite, postgresql, etc).`:`SQL dialect used: "${this.dialectName}".`}getWhitespace(){Ay.lastIndex=this.index;let e=Ay.exec(this.input);if(e)return this.index+=e[0].length,e[0]}getNextToken(){for(let e of this.rules){let r=this.match(e);if(r)return r}}match(e){e.regex.lastIndex=this.index;let r=e.regex.exec(this.input);if(r){let n=r[0],i={type:e.type,raw:n,text:e.text?e.text(n):n,start:this.index};return e.key&&(i.key=e.key(n)),this.index+=n.length,i}}}});var aK,Wwe,$we,mR,lK=G(()=>{aK=/\/\*/uy,Wwe=/[\s\S]/uy,$we=/\*\//uy,mR=class{constructor(){this.lastIndex=0}exec(e){let r="",n,i=0;if(n=this.matchSection(aK,e))r+=n,i++;else return null;for(;i>0;)if(n=this.matchSection(aK,e))r+=n,i++;else if(n=this.matchSection($we,e))r+=n,i--;else if(n=this.matchSection(Wwe,e))r+=n;else return null;return[r]}matchSection(e,r){e.lastIndex=this.lastIndex;let n=e.exec(r);return n&&(this.lastIndex+=n[0].length),n?n[0]:null}}});var df,jt,cK=G(()=>{Cn();sK();oK();SR();wc();lK();df=class{constructor(e,r){this.cfg=e,this.dialectName=r,this.rulesBeforeParams=this.buildRulesBeforeParams(e),this.rulesAfterParams=this.buildRulesAfterParams(e)}tokenize(e,r){let n=[...this.rulesBeforeParams,...this.buildParamRules(this.cfg,r),...this.rulesAfterParams],i=new uf(n,this.dialectName).tokenize(e);return this.cfg.postProcess?this.cfg.postProcess(i):i}buildRulesBeforeParams(e){var r,n,i;return this.validRules([{type:k.DISABLE_COMMENT,regex:/(\/\* *sql-formatter-disable *\*\/[\s\S]*?(?:\/\* *sql-formatter-enable *\*\/|$))/uy},{type:k.BLOCK_COMMENT,regex:e.nestedBlockComments?new mR:/(\/\*[^]*?\*\/)/uy},{type:k.LINE_COMMENT,regex:tK((r=e.lineCommentTypes)!==null&&r!==void 0?r:["--"])},{type:k.QUOTED_IDENTIFIER,regex:Iy(e.identTypes)},{type:k.NUMBER,regex:e.underscoresInNumbers?/(?:0x[0-9a-fA-F_]+|0b[01_]+|(?:-\s*)?(?:[0-9_]*\.[0-9_]+|[0-9_]+(?:\.[0-9_]*)?)(?:[eE][-+]?[0-9_]+(?:\.[0-9_]+)?)?)(?![\w\p{Alphabetic}])/uy:/(?:0x[0-9a-fA-F]+|0b[01]+|(?:-\s*)?(?:[0-9]*\.[0-9]+|[0-9]+(?:\.[0-9]*)?)(?:[eE][-+]?[0-9]+(?:\.[0-9]+)?)?)(?![\w\p{Alphabetic}])/uy},{type:k.RESERVED_KEYWORD_PHRASE,regex:Di((n=e.reservedKeywordPhrases)!==null&&n!==void 0?n:[],e.identChars),text:jt},{type:k.RESERVED_DATA_TYPE_PHRASE,regex:Di((i=e.reservedDataTypePhrases)!==null&&i!==void 0?i:[],e.identChars),text:jt},{type:k.CASE,regex:/CASE\b/iuy,text:jt},{type:k.END,regex:/END\b/iuy,text:jt},{type:k.BETWEEN,regex:/BETWEEN\b/iuy,text:jt},{type:k.LIMIT,regex:e.reservedClauses.includes("LIMIT")?/LIMIT\b/iuy:void 0,text:jt},{type:k.RESERVED_CLAUSE,regex:Di(e.reservedClauses,e.identChars),text:jt},{type:k.RESERVED_SELECT,regex:Di(e.reservedSelect,e.identChars),text:jt},{type:k.RESERVED_SET_OPERATION,regex:Di(e.reservedSetOperations,e.identChars),text:jt},{type:k.WHEN,regex:/WHEN\b/iuy,text:jt},{type:k.ELSE,regex:/ELSE\b/iuy,text:jt},{type:k.THEN,regex:/THEN\b/iuy,text:jt},{type:k.RESERVED_JOIN,regex:Di(e.reservedJoins,e.identChars),text:jt},{type:k.AND,regex:/AND\b/iuy,text:jt},{type:k.OR,regex:/OR\b/iuy,text:jt},{type:k.XOR,regex:e.supportsXor?/XOR\b/iuy:void 0,text:jt},...e.operatorKeyword?[{type:k.OPERATOR,regex:/OPERATOR *\([^)]+\)/iuy}]:[],{type:k.RESERVED_FUNCTION_NAME,regex:Di(e.reservedFunctionNames,e.identChars),text:jt},{type:k.RESERVED_DATA_TYPE,regex:Di(e.reservedDataTypes,e.identChars),text:jt},{type:k.RESERVED_KEYWORD,regex:Di(e.reservedKeywords,e.identChars),text:jt}])}buildRulesAfterParams(e){var r,n;return this.validRules([{type:k.VARIABLE,regex:e.variableTypes?nK(e.variableTypes):void 0},{type:k.STRING,regex:Iy(e.stringTypes)},{type:k.IDENTIFIER,regex:iK(e.identChars)},{type:k.DELIMITER,regex:/[;]/uy},{type:k.COMMA,regex:/[,]/y},{type:k.OPEN_PAREN,regex:my("open",e.extraParens)},{type:k.CLOSE_PAREN,regex:my("close",e.extraParens)},{type:k.OPERATOR,regex:gy(["+","-","/",">","<","=","<>","<=",">=","!=",...(r=e.operators)!==null&&r!==void 0?r:[]])},{type:k.ASTERISK,regex:/[*]/uy},{type:k.PROPERTY_ACCESS_OPERATOR,regex:gy([".",...(n=e.propertyAccessOperators)!==null&&n!==void 0?n:[]])}])}buildParamRules(e,r){var n,i,s,o,a;let l={named:r?.named||((n=e.paramTypes)===null||n===void 0?void 0:n.named)||[],quoted:r?.quoted||((i=e.paramTypes)===null||i===void 0?void 0:i.quoted)||[],numbered:r?.numbered||((s=e.paramTypes)===null||s===void 0?void 0:s.numbered)||[],positional:typeof r?.positional=="boolean"?r.positional:(o=e.paramTypes)===null||o===void 0?void 0:o.positional,custom:r?.custom||((a=e.paramTypes)===null||a===void 0?void 0:a.custom)||[]};return this.validRules([{type:k.NAMED_PARAMETER,regex:RR(l.named,Ny(e.paramChars||e.identChars)),key:c=>c.slice(1)},{type:k.QUOTED_PARAMETER,regex:RR(l.quoted,_y(e.identTypes)),key:c=>(({tokenKey:u,quoteChar:d})=>u.replace(new RegExp(an("\\"+d),"gu"),d))({tokenKey:c.slice(2,-1),quoteChar:c.slice(-1)})},{type:k.NUMBERED_PARAMETER,regex:RR(l.numbered,"[0-9]+"),key:c=>c.slice(1)},{type:k.POSITIONAL_PARAMETER,regex:l.positional?/[?]/y:void 0},...l.custom.map(c=>{var u;return{type:k.CUSTOM_PARAMETER,regex:Ss(c.regex),key:(u=c.key)!==null&&u!==void 0?u:(d=>d)}})])}validRules(e){return e.filter(r=>!!r.regex)}},jt=t=>yc(t.toUpperCase())});var uK,dK,kwe,Ywe,fK=G(()=>{cK();uK=new Map,dK=t=>{let e=uK.get(t);return e||(e=kwe(t),uK.set(t,e)),e},kwe=t=>({tokenizer:new df(t.tokenizerOptions,t.name),formatOptions:Ywe(t.formatOptions)}),Ywe=t=>{var e;return{alwaysDenseOperators:t.alwaysDenseOperators||[],onelineClauses:Object.fromEntries(t.onelineClauses.map(r=>[r,!0])),tabularOnelineClauses:Object.fromEntries(((e=t.tabularOnelineClauses)!==null&&e!==void 0?e:t.onelineClauses).map(r=>[r,!0]))}}});function EK(t){return t.indentStyle==="tabularLeft"||t.indentStyle==="tabularRight"?" ".repeat(10):t.useTabs?"	":" ".repeat(t.tabWidth)}function Ca(t){return t.indentStyle==="tabularLeft"||t.indentStyle==="tabularRight"}var Cy=G(()=>{});var ff,hK=G(()=>{ff=class{constructor(e){this.params=e,this.index=0}get({key:e,text:r}){return this.params?e?this.params[e]:this.params[this.index++]:r}getPositionalParameterIndex(){return this.index}setPositionalParameterIndex(e){this.index=e}}});var TK=O((pK,gR)=>{(function(t,e){typeof gR=="object"&&gR.exports?gR.exports=e():t.nearley=e()})(pK,function(){function t(l,c,u){return this.id=++t.highestId,this.name=l,this.symbols=c,this.postprocess=u,this}t.highestId=0,t.prototype.toString=function(l){var c=typeof l>"u"?this.symbols.map(a).join(" "):this.symbols.slice(0,l).map(a).join(" ")+" \u25CF "+this.symbols.slice(l).map(a).join(" ");return this.name+" \u2192 "+c};function e(l,c,u,d){this.rule=l,this.dot=c,this.reference=u,this.data=[],this.wantedBy=d,this.isComplete=this.dot===l.symbols.length}e.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},e.prototype.nextState=function(l){var c=new e(this.rule,this.dot+1,this.reference,this.wantedBy);return c.left=this,c.right=l,c.isComplete&&(c.data=c.build(),c.right=void 0),c},e.prototype.build=function(){var l=[],c=this;do l.push(c.right.data),c=c.left;while(c.left);return l.reverse(),l},e.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,s.fail))};function r(l,c){this.grammar=l,this.index=c,this.states=[],this.wants={},this.scannable=[],this.completed={}}r.prototype.process=function(l){for(var c=this.states,u=this.wants,d=this.completed,E=0;E<c.length;E++){var f=c[E];if(f.isComplete){if(f.finish(),f.data!==s.fail){for(var p=f.wantedBy,h=p.length;h--;){var S=p[h];this.complete(S,f)}if(f.reference===this.index){var T=f.rule.name;(this.completed[T]=this.completed[T]||[]).push(f)}}}else{var T=f.rule.symbols[f.dot];if(typeof T!="string"){this.scannable.push(f);continue}if(u[T]){if(u[T].push(f),d.hasOwnProperty(T))for(var m=d[T],h=0;h<m.length;h++){var R=m[h];this.complete(f,R)}}else u[T]=[f],this.predict(T)}}},r.prototype.predict=function(l){for(var c=this.grammar.byName[l]||[],u=0;u<c.length;u++){var d=c[u],E=this.wants[l],f=new e(d,0,this.index,E);this.states.push(f)}},r.prototype.complete=function(l,c){var u=l.nextState(c);this.states.push(u)};function n(l,c){this.rules=l,this.start=c||this.rules[0].name;var u=this.byName={};this.rules.forEach(function(d){u.hasOwnProperty(d.name)||(u[d.name]=[]),u[d.name].push(d)})}n.fromCompiled=function(d,c){var u=d.Lexer;d.ParserStart&&(c=d.ParserStart,d=d.ParserRules);var d=d.map(function(f){return new t(f.name,f.symbols,f.postprocess)}),E=new n(d,c);return E.lexer=u,E};function i(){this.reset("")}i.prototype.reset=function(l,c){this.buffer=l,this.index=0,this.line=c?c.line:1,this.lastLineBreak=c?-c.col:0},i.prototype.next=function(){if(this.index<this.buffer.length){var l=this.buffer[this.index++];return l===`
`&&(this.line+=1,this.lastLineBreak=this.index),{value:l}}},i.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},i.prototype.formatError=function(l,c){var u=this.buffer;if(typeof u=="string"){var d=u.split(`
`).slice(Math.max(0,this.line-5),this.line),E=u.indexOf(`
`,this.index);E===-1&&(E=u.length);var f=this.index-this.lastLineBreak,p=String(this.line).length;return c+=" at line "+this.line+" col "+f+`:

`,c+=d.map(function(S,T){return h(this.line-d.length+T+1,p)+" "+S},this).join(`
`),c+=`
`+h("",p+f)+`^
`,c}else return c+" at index "+(this.index-1);function h(S,T){var m=String(S);return Array(T-m.length+1).join(" ")+m}};function s(l,c,u){if(l instanceof n)var d=l,u=c;else var d=n.fromCompiled(l,c);this.grammar=d,this.options={keepHistory:!1,lexer:d.lexer||new i};for(var E in u||{})this.options[E]=u[E];this.lexer=this.options.lexer,this.lexerState=void 0;var f=new r(d,0),p=this.table=[f];f.wants[d.start]=[],f.predict(d.start),f.process(),this.current=0}s.fail={},s.prototype.feed=function(l){var c=this.lexer;c.reset(l,this.lexerState);for(var u;;){try{if(u=c.next(),!u)break}catch(w){var p=new r(this.grammar,this.current+1);this.table.push(p);var d=new Error(this.reportLexerError(w));throw d.offset=this.current,d.token=w.token,d}var E=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var f=this.current+1,p=new r(this.grammar,f);this.table.push(p);for(var h=u.text!==void 0?u.text:u.value,S=c.constructor===i?u.value:u,T=E.scannable,m=T.length;m--;){var R=T[m],A=R.rule.symbols[R.dot];if(A.test?A.test(S):A.type?A.type===u.type:A.literal===h){var I=R.nextState({data:S,token:u,isToken:!0,reference:f-1});p.states.push(I)}}if(p.process(),p.states.length===0){var d=new Error(this.reportError(u));throw d.offset=this.current,d.token=u,d}this.options.keepHistory&&(E.lexerState=c.save()),this.current++}return E&&(this.lexerState=c.save()),this.results=this.finish(),this},s.prototype.reportLexerError=function(l){var c,u,d=l.token;return d?(c="input "+JSON.stringify(d.text[0])+" (lexer error)",u=this.lexer.formatError(d,"Syntax error")):(c="input (lexer error)",u=l.message),this.reportErrorCommon(u,c)},s.prototype.reportError=function(l){var c=(l.type?l.type+" token: ":"")+JSON.stringify(l.value!==void 0?l.value:l),u=this.lexer.formatError(l,"Syntax error");return this.reportErrorCommon(u,c)},s.prototype.reportErrorCommon=function(l,c){var u=[];u.push(l);var d=this.table.length-2,E=this.table[d],f=E.states.filter(function(h){var S=h.rule.symbols[h.dot];return S&&typeof S!="string"});if(f.length===0)u.push("Unexpected "+c+`. I did not expect any more input. Here is the state of my parse table:
`),this.displayStateStack(E.states,u);else{u.push("Unexpected "+c+`. Instead, I was expecting to see one of the following:
`);var p=f.map(function(h){return this.buildFirstStateStack(h,[])||[h]},this);p.forEach(function(h){var S=h[0],T=S.rule.symbols[S.dot],m=this.getSymbolDisplay(T);u.push("A "+m+" based on:"),this.displayStateStack(h,u)},this)}return u.push(""),u.join(`
`)},s.prototype.displayStateStack=function(l,c){for(var u,d=0,E=0;E<l.length;E++){var f=l[E],p=f.rule.toString(f.dot);p===u?d++:(d>0&&c.push("    ^ "+d+" more lines identical to this"),d=0,c.push("    "+p)),u=p}},s.prototype.getSymbolDisplay=function(l){return o(l)},s.prototype.buildFirstStateStack=function(l,c){if(c.indexOf(l)!==-1)return null;if(l.wantedBy.length===0)return[l];var u=l.wantedBy[0],d=[l].concat(c),E=this.buildFirstStateStack(u,d);return E===null?null:[l].concat(E)},s.prototype.save=function(){var l=this.table[this.current];return l.lexerState=this.lexerState,l},s.prototype.restore=function(l){var c=l.index;this.current=c,this.table[c]=l,this.table.splice(c+1),this.lexerState=l.lexerState,this.results=this.finish()},s.prototype.rewind=function(l){if(!this.options.keepHistory)throw new Error("set option `keepHistory` to enable rewinding");this.restore(this.table[l])},s.prototype.finish=function(){var l=[],c=this.grammar.start,u=this.table[this.table.length-1];return u.states.forEach(function(d){d.rule.name===c&&d.dot===d.rule.symbols.length&&d.reference===0&&d.data!==s.fail&&l.push(d)}),l.map(function(d){return d.data})};function o(l){var c=typeof l;if(c==="string")return l;if(c==="object"){if(l.literal)return JSON.stringify(l.literal);if(l instanceof RegExp)return"character matching "+l;if(l.type)return l.type+" token";if(l.test)return"token matching "+String(l.test);throw new Error("Unknown symbol type: "+l)}}function a(l){var c=typeof l;if(c==="string")return l;if(c==="object"){if(l.literal)return JSON.stringify(l.literal);if(l instanceof RegExp)return l.toString();if(l.type)return"%"+l.type;if(l.test)return"<"+String(l.test)+">";throw new Error("Unknown symbol type: "+l)}}return{Parser:s,Grammar:n,Rule:t}})});function SK(t){return t.map(Vwe).map(qwe).map(Xwe).map(jwe).map(zwe)}var Vwe,qwe,Xwe,jwe,zwe,Kwe,Lc,RK,AK,Jwe,mK=G(()=>{Cn();Vwe=(t,e,r)=>{if(KS(t.type)){let n=Kwe(r,e);if(n&&n.type===k.PROPERTY_ACCESS_OPERATOR)return Object.assign(Object.assign({},t),{type:k.IDENTIFIER,text:t.raw});let i=Lc(r,e);if(i&&i.type===k.PROPERTY_ACCESS_OPERATOR)return Object.assign(Object.assign({},t),{type:k.IDENTIFIER,text:t.raw})}return t},qwe=(t,e,r)=>{if(t.type===k.RESERVED_FUNCTION_NAME){let n=Lc(r,e);if(!n||!RK(n))return Object.assign(Object.assign({},t),{type:k.IDENTIFIER,text:t.raw})}return t},Xwe=(t,e,r)=>{if(t.type===k.RESERVED_DATA_TYPE){let n=Lc(r,e);if(n&&RK(n))return Object.assign(Object.assign({},t),{type:k.RESERVED_PARAMETERIZED_DATA_TYPE})}return t},jwe=(t,e,r)=>{if(t.type===k.IDENTIFIER){let n=Lc(r,e);if(n&&AK(n))return Object.assign(Object.assign({},t),{type:k.ARRAY_IDENTIFIER})}return t},zwe=(t,e,r)=>{if(t.type===k.RESERVED_DATA_TYPE){let n=Lc(r,e);if(n&&AK(n))return Object.assign(Object.assign({},t),{type:k.ARRAY_KEYWORD})}return t},Kwe=(t,e)=>Lc(t,e,-1),Lc=(t,e,r=1)=>{let n=1;for(;t[e+n*r]&&Jwe(t[e+n*r]);)n++;return t[e+n*r]},RK=t=>t.type===k.OPEN_PAREN&&t.text==="(",AK=t=>t.type===k.OPEN_PAREN&&t.text==="[",Jwe=t=>t.type===k.BLOCK_COMMENT||t.type===k.LINE_COMMENT});var ba,by=G(()=>{Oy();Cn();ba=class{constructor(e){this.tokenize=e,this.index=0,this.tokens=[],this.input=""}reset(e,r){this.input=e,this.index=0,this.tokens=this.tokenize(e)}next(){return this.tokens[this.index++]}save(){}formatError(e){let{line:r,col:n}=AR(this.input,e.start);return`Parse error at token: ${e.text} at line ${r} column ${n}`}has(e){return e in k}}});var Q,yy=G(()=>{(function(t){t.statement="statement",t.clause="clause",t.set_operation="set_operation",t.function_call="function_call",t.parameterized_data_type="parameterized_data_type",t.array_subscript="array_subscript",t.property_access="property_access",t.parenthesis="parenthesis",t.between_predicate="between_predicate",t.case_expression="case_expression",t.case_when="case_when",t.case_else="case_else",t.limit_clause="limit_clause",t.all_columns_asterisk="all_columns_asterisk",t.literal="literal",t.identifier="identifier",t.keyword="keyword",t.data_type="data_type",t.parameter="parameter",t.operator="operator",t.comma="comma",t.line_comment="line_comment",t.block_comment="block_comment",t.disable_comment="disable_comment"})(Q=Q||(Q={}))});function wy(t){return t[0]}var ce,ya,sr,gK,or,Qwe,Zwe,_K,IK=G(()=>{by();yy();Cn();ce=new ba(t=>[]),ya=([[t]])=>t,sr=t=>({type:Q.keyword,tokenType:t.type,text:t.text,raw:t.raw}),gK=t=>({type:Q.data_type,text:t.text,raw:t.raw}),or=(t,{leading:e,trailing:r})=>(e?.length&&(t=Object.assign(Object.assign({},t),{leadingComments:e})),r?.length&&(t=Object.assign(Object.assign({},t),{trailingComments:r})),t),Qwe=(t,{leading:e,trailing:r})=>{if(e?.length){let[n,...i]=t;t=[or(n,{leading:e}),...i]}if(r?.length){let n=t.slice(0,-1),i=t[t.length-1];t=[...n,or(i,{trailing:r})]}return t},Zwe={Lexer:ce,ParserRules:[{name:"main$ebnf$1",symbols:[]},{name:"main$ebnf$1",symbols:["main$ebnf$1","statement"],postprocess:t=>t[0].concat([t[1]])},{name:"main",symbols:["main$ebnf$1"],postprocess:([t])=>{let e=t[t.length-1];return e&&!e.hasSemicolon?e.children.length>0?t:t.slice(0,-1):t}},{name:"statement$subexpression$1",symbols:[ce.has("DELIMITER")?{type:"DELIMITER"}:DELIMITER]},{name:"statement$subexpression$1",symbols:[ce.has("EOF")?{type:"EOF"}:EOF]},{name:"statement",symbols:["expressions_or_clauses","statement$subexpression$1"],postprocess:([t,[e]])=>({type:Q.statement,children:t,hasSemicolon:e.type===k.DELIMITER})},{name:"expressions_or_clauses$ebnf$1",symbols:[]},{name:"expressions_or_clauses$ebnf$1",symbols:["expressions_or_clauses$ebnf$1","free_form_sql"],postprocess:t=>t[0].concat([t[1]])},{name:"expressions_or_clauses$ebnf$2",symbols:[]},{name:"expressions_or_clauses$ebnf$2",symbols:["expressions_or_clauses$ebnf$2","clause"],postprocess:t=>t[0].concat([t[1]])},{name:"expressions_or_clauses",symbols:["expressions_or_clauses$ebnf$1","expressions_or_clauses$ebnf$2"],postprocess:([t,e])=>[...t,...e]},{name:"clause$subexpression$1",symbols:["limit_clause"]},{name:"clause$subexpression$1",symbols:["select_clause"]},{name:"clause$subexpression$1",symbols:["other_clause"]},{name:"clause$subexpression$1",symbols:["set_operation"]},{name:"clause",symbols:["clause$subexpression$1"],postprocess:ya},{name:"limit_clause$ebnf$1$subexpression$1$ebnf$1",symbols:["free_form_sql"]},{name:"limit_clause$ebnf$1$subexpression$1$ebnf$1",symbols:["limit_clause$ebnf$1$subexpression$1$ebnf$1","free_form_sql"],postprocess:t=>t[0].concat([t[1]])},{name:"limit_clause$ebnf$1$subexpression$1",symbols:[ce.has("COMMA")?{type:"COMMA"}:COMMA,"limit_clause$ebnf$1$subexpression$1$ebnf$1"]},{name:"limit_clause$ebnf$1",symbols:["limit_clause$ebnf$1$subexpression$1"],postprocess:wy},{name:"limit_clause$ebnf$1",symbols:[],postprocess:()=>null},{name:"limit_clause",symbols:[ce.has("LIMIT")?{type:"LIMIT"}:LIMIT,"_","expression_chain_","limit_clause$ebnf$1"],postprocess:([t,e,r,n])=>{if(n){let[i,s]=n;return{type:Q.limit_clause,limitKw:or(sr(t),{trailing:e}),offset:r,count:s}}else return{type:Q.limit_clause,limitKw:or(sr(t),{trailing:e}),count:r}}},{name:"select_clause$subexpression$1$ebnf$1",symbols:[]},{name:"select_clause$subexpression$1$ebnf$1",symbols:["select_clause$subexpression$1$ebnf$1","free_form_sql"],postprocess:t=>t[0].concat([t[1]])},{name:"select_clause$subexpression$1",symbols:["all_columns_asterisk","select_clause$subexpression$1$ebnf$1"]},{name:"select_clause$subexpression$1$ebnf$2",symbols:[]},{name:"select_clause$subexpression$1$ebnf$2",symbols:["select_clause$subexpression$1$ebnf$2","free_form_sql"],postprocess:t=>t[0].concat([t[1]])},{name:"select_clause$subexpression$1",symbols:["asteriskless_free_form_sql","select_clause$subexpression$1$ebnf$2"]},{name:"select_clause",symbols:[ce.has("RESERVED_SELECT")?{type:"RESERVED_SELECT"}:RESERVED_SELECT,"select_clause$subexpression$1"],postprocess:([t,[e,r]])=>({type:Q.clause,nameKw:sr(t),children:[e,...r]})},{name:"select_clause",symbols:[ce.has("RESERVED_SELECT")?{type:"RESERVED_SELECT"}:RESERVED_SELECT],postprocess:([t])=>({type:Q.clause,nameKw:sr(t),children:[]})},{name:"all_columns_asterisk",symbols:[ce.has("ASTERISK")?{type:"ASTERISK"}:ASTERISK],postprocess:()=>({type:Q.all_columns_asterisk})},{name:"other_clause$ebnf$1",symbols:[]},{name:"other_clause$ebnf$1",symbols:["other_clause$ebnf$1","free_form_sql"],postprocess:t=>t[0].concat([t[1]])},{name:"other_clause",symbols:[ce.has("RESERVED_CLAUSE")?{type:"RESERVED_CLAUSE"}:RESERVED_CLAUSE,"other_clause$ebnf$1"],postprocess:([t,e])=>({type:Q.clause,nameKw:sr(t),children:e})},{name:"set_operation$ebnf$1",symbols:[]},{name:"set_operation$ebnf$1",symbols:["set_operation$ebnf$1","free_form_sql"],postprocess:t=>t[0].concat([t[1]])},{name:"set_operation",symbols:[ce.has("RESERVED_SET_OPERATION")?{type:"RESERVED_SET_OPERATION"}:RESERVED_SET_OPERATION,"set_operation$ebnf$1"],postprocess:([t,e])=>({type:Q.set_operation,nameKw:sr(t),children:e})},{name:"expression_chain_$ebnf$1",symbols:["expression_with_comments_"]},{name:"expression_chain_$ebnf$1",symbols:["expression_chain_$ebnf$1","expression_with_comments_"],postprocess:t=>t[0].concat([t[1]])},{name:"expression_chain_",symbols:["expression_chain_$ebnf$1"],postprocess:wy},{name:"expression_chain$ebnf$1",symbols:[]},{name:"expression_chain$ebnf$1",symbols:["expression_chain$ebnf$1","_expression_with_comments"],postprocess:t=>t[0].concat([t[1]])},{name:"expression_chain",symbols:["expression","expression_chain$ebnf$1"],postprocess:([t,e])=>[t,...e]},{name:"andless_expression_chain$ebnf$1",symbols:[]},{name:"andless_expression_chain$ebnf$1",symbols:["andless_expression_chain$ebnf$1","_andless_expression_with_comments"],postprocess:t=>t[0].concat([t[1]])},{name:"andless_expression_chain",symbols:["andless_expression","andless_expression_chain$ebnf$1"],postprocess:([t,e])=>[t,...e]},{name:"expression_with_comments_",symbols:["expression","_"],postprocess:([t,e])=>or(t,{trailing:e})},{name:"_expression_with_comments",symbols:["_","expression"],postprocess:([t,e])=>or(e,{leading:t})},{name:"_andless_expression_with_comments",symbols:["_","andless_expression"],postprocess:([t,e])=>or(e,{leading:t})},{name:"free_form_sql$subexpression$1",symbols:["asteriskless_free_form_sql"]},{name:"free_form_sql$subexpression$1",symbols:["asterisk"]},{name:"free_form_sql",symbols:["free_form_sql$subexpression$1"],postprocess:ya},{name:"asteriskless_free_form_sql$subexpression$1",symbols:["asteriskless_andless_expression"]},{name:"asteriskless_free_form_sql$subexpression$1",symbols:["logic_operator"]},{name:"asteriskless_free_form_sql$subexpression$1",symbols:["comma"]},{name:"asteriskless_free_form_sql$subexpression$1",symbols:["comment"]},{name:"asteriskless_free_form_sql$subexpression$1",symbols:["other_keyword"]},{name:"asteriskless_free_form_sql",symbols:["asteriskless_free_form_sql$subexpression$1"],postprocess:ya},{name:"expression$subexpression$1",symbols:["andless_expression"]},{name:"expression$subexpression$1",symbols:["logic_operator"]},{name:"expression",symbols:["expression$subexpression$1"],postprocess:ya},{name:"andless_expression$subexpression$1",symbols:["asteriskless_andless_expression"]},{name:"andless_expression$subexpression$1",symbols:["asterisk"]},{name:"andless_expression",symbols:["andless_expression$subexpression$1"],postprocess:ya},{name:"asteriskless_andless_expression$subexpression$1",symbols:["atomic_expression"]},{name:"asteriskless_andless_expression$subexpression$1",symbols:["between_predicate"]},{name:"asteriskless_andless_expression$subexpression$1",symbols:["case_expression"]},{name:"asteriskless_andless_expression",symbols:["asteriskless_andless_expression$subexpression$1"],postprocess:ya},{name:"atomic_expression$subexpression$1",symbols:["array_subscript"]},{name:"atomic_expression$subexpression$1",symbols:["function_call"]},{name:"atomic_expression$subexpression$1",symbols:["property_access"]},{name:"atomic_expression$subexpression$1",symbols:["parenthesis"]},{name:"atomic_expression$subexpression$1",symbols:["curly_braces"]},{name:"atomic_expression$subexpression$1",symbols:["square_brackets"]},{name:"atomic_expression$subexpression$1",symbols:["operator"]},{name:"atomic_expression$subexpression$1",symbols:["identifier"]},{name:"atomic_expression$subexpression$1",symbols:["parameter"]},{name:"atomic_expression$subexpression$1",symbols:["literal"]},{name:"atomic_expression$subexpression$1",symbols:["data_type"]},{name:"atomic_expression$subexpression$1",symbols:["keyword"]},{name:"atomic_expression",symbols:["atomic_expression$subexpression$1"],postprocess:ya},{name:"array_subscript",symbols:[ce.has("ARRAY_IDENTIFIER")?{type:"ARRAY_IDENTIFIER"}:ARRAY_IDENTIFIER,"_","square_brackets"],postprocess:([t,e,r])=>({type:Q.array_subscript,array:or({type:Q.identifier,quoted:!1,text:t.text},{trailing:e}),parenthesis:r})},{name:"array_subscript",symbols:[ce.has("ARRAY_KEYWORD")?{type:"ARRAY_KEYWORD"}:ARRAY_KEYWORD,"_","square_brackets"],postprocess:([t,e,r])=>({type:Q.array_subscript,array:or(sr(t),{trailing:e}),parenthesis:r})},{name:"function_call",symbols:[ce.has("RESERVED_FUNCTION_NAME")?{type:"RESERVED_FUNCTION_NAME"}:RESERVED_FUNCTION_NAME,"_","parenthesis"],postprocess:([t,e,r])=>({type:Q.function_call,nameKw:or(sr(t),{trailing:e}),parenthesis:r})},{name:"parenthesis",symbols:[{literal:"("},"expressions_or_clauses",{literal:")"}],postprocess:([t,e,r])=>({type:Q.parenthesis,children:e,openParen:"(",closeParen:")"})},{name:"curly_braces$ebnf$1",symbols:[]},{name:"curly_braces$ebnf$1",symbols:["curly_braces$ebnf$1","free_form_sql"],postprocess:t=>t[0].concat([t[1]])},{name:"curly_braces",symbols:[{literal:"{"},"curly_braces$ebnf$1",{literal:"}"}],postprocess:([t,e,r])=>({type:Q.parenthesis,children:e,openParen:"{",closeParen:"}"})},{name:"square_brackets$ebnf$1",symbols:[]},{name:"square_brackets$ebnf$1",symbols:["square_brackets$ebnf$1","free_form_sql"],postprocess:t=>t[0].concat([t[1]])},{name:"square_brackets",symbols:[{literal:"["},"square_brackets$ebnf$1",{literal:"]"}],postprocess:([t,e,r])=>({type:Q.parenthesis,children:e,openParen:"[",closeParen:"]"})},{name:"property_access$subexpression$1",symbols:["identifier"]},{name:"property_access$subexpression$1",symbols:["array_subscript"]},{name:"property_access$subexpression$1",symbols:["all_columns_asterisk"]},{name:"property_access$subexpression$1",symbols:["parameter"]},{name:"property_access",symbols:["atomic_expression","_",ce.has("PROPERTY_ACCESS_OPERATOR")?{type:"PROPERTY_ACCESS_OPERATOR"}:PROPERTY_ACCESS_OPERATOR,"_","property_access$subexpression$1"],postprocess:([t,e,r,n,[i]])=>({type:Q.property_access,object:or(t,{trailing:e}),operator:r.text,property:or(i,{leading:n})})},{name:"between_predicate",symbols:[ce.has("BETWEEN")?{type:"BETWEEN"}:BETWEEN,"_","andless_expression_chain","_",ce.has("AND")?{type:"AND"}:AND,"_","andless_expression"],postprocess:([t,e,r,n,i,s,o])=>({type:Q.between_predicate,betweenKw:sr(t),expr1:Qwe(r,{leading:e,trailing:n}),andKw:sr(i),expr2:[or(o,{leading:s})]})},{name:"case_expression$ebnf$1",symbols:["expression_chain_"],postprocess:wy},{name:"case_expression$ebnf$1",symbols:[],postprocess:()=>null},{name:"case_expression$ebnf$2",symbols:[]},{name:"case_expression$ebnf$2",symbols:["case_expression$ebnf$2","case_clause"],postprocess:t=>t[0].concat([t[1]])},{name:"case_expression",symbols:[ce.has("CASE")?{type:"CASE"}:CASE,"_","case_expression$ebnf$1","case_expression$ebnf$2",ce.has("END")?{type:"END"}:END],postprocess:([t,e,r,n,i])=>({type:Q.case_expression,caseKw:or(sr(t),{trailing:e}),endKw:sr(i),expr:r||[],clauses:n})},{name:"case_clause",symbols:[ce.has("WHEN")?{type:"WHEN"}:WHEN,"_","expression_chain_",ce.has("THEN")?{type:"THEN"}:THEN,"_","expression_chain_"],postprocess:([t,e,r,n,i,s])=>({type:Q.case_when,whenKw:or(sr(t),{trailing:e}),thenKw:or(sr(n),{trailing:i}),condition:r,result:s})},{name:"case_clause",symbols:[ce.has("ELSE")?{type:"ELSE"}:ELSE,"_","expression_chain_"],postprocess:([t,e,r])=>({type:Q.case_else,elseKw:or(sr(t),{trailing:e}),result:r})},{name:"comma$subexpression$1",symbols:[ce.has("COMMA")?{type:"COMMA"}:COMMA]},{name:"comma",symbols:["comma$subexpression$1"],postprocess:([[t]])=>({type:Q.comma})},{name:"asterisk$subexpression$1",symbols:[ce.has("ASTERISK")?{type:"ASTERISK"}:ASTERISK]},{name:"asterisk",symbols:["asterisk$subexpression$1"],postprocess:([[t]])=>({type:Q.operator,text:t.text})},{name:"operator$subexpression$1",symbols:[ce.has("OPERATOR")?{type:"OPERATOR"}:OPERATOR]},{name:"operator",symbols:["operator$subexpression$1"],postprocess:([[t]])=>({type:Q.operator,text:t.text})},{name:"identifier$subexpression$1",symbols:[ce.has("IDENTIFIER")?{type:"IDENTIFIER"}:IDENTIFIER]},{name:"identifier$subexpression$1",symbols:[ce.has("QUOTED_IDENTIFIER")?{type:"QUOTED_IDENTIFIER"}:QUOTED_IDENTIFIER]},{name:"identifier$subexpression$1",symbols:[ce.has("VARIABLE")?{type:"VARIABLE"}:VARIABLE]},{name:"identifier",symbols:["identifier$subexpression$1"],postprocess:([[t]])=>({type:Q.identifier,quoted:t.type!=="IDENTIFIER",text:t.text})},{name:"parameter$subexpression$1",symbols:[ce.has("NAMED_PARAMETER")?{type:"NAMED_PARAMETER"}:NAMED_PARAMETER]},{name:"parameter$subexpression$1",symbols:[ce.has("QUOTED_PARAMETER")?{type:"QUOTED_PARAMETER"}:QUOTED_PARAMETER]},{name:"parameter$subexpression$1",symbols:[ce.has("NUMBERED_PARAMETER")?{type:"NUMBERED_PARAMETER"}:NUMBERED_PARAMETER]},{name:"parameter$subexpression$1",symbols:[ce.has("POSITIONAL_PARAMETER")?{type:"POSITIONAL_PARAMETER"}:POSITIONAL_PARAMETER]},{name:"parameter$subexpression$1",symbols:[ce.has("CUSTOM_PARAMETER")?{type:"CUSTOM_PARAMETER"}:CUSTOM_PARAMETER]},{name:"parameter",symbols:["parameter$subexpression$1"],postprocess:([[t]])=>({type:Q.parameter,key:t.key,text:t.text})},{name:"literal$subexpression$1",symbols:[ce.has("NUMBER")?{type:"NUMBER"}:NUMBER]},{name:"literal$subexpression$1",symbols:[ce.has("STRING")?{type:"STRING"}:STRING]},{name:"literal",symbols:["literal$subexpression$1"],postprocess:([[t]])=>({type:Q.literal,text:t.text})},{name:"keyword$subexpression$1",symbols:[ce.has("RESERVED_KEYWORD")?{type:"RESERVED_KEYWORD"}:RESERVED_KEYWORD]},{name:"keyword$subexpression$1",symbols:[ce.has("RESERVED_KEYWORD_PHRASE")?{type:"RESERVED_KEYWORD_PHRASE"}:RESERVED_KEYWORD_PHRASE]},{name:"keyword$subexpression$1",symbols:[ce.has("RESERVED_JOIN")?{type:"RESERVED_JOIN"}:RESERVED_JOIN]},{name:"keyword",symbols:["keyword$subexpression$1"],postprocess:([[t]])=>sr(t)},{name:"data_type$subexpression$1",symbols:[ce.has("RESERVED_DATA_TYPE")?{type:"RESERVED_DATA_TYPE"}:RESERVED_DATA_TYPE]},{name:"data_type$subexpression$1",symbols:[ce.has("RESERVED_DATA_TYPE_PHRASE")?{type:"RESERVED_DATA_TYPE_PHRASE"}:RESERVED_DATA_TYPE_PHRASE]},{name:"data_type",symbols:["data_type$subexpression$1"],postprocess:([[t]])=>gK(t)},{name:"data_type",symbols:[ce.has("RESERVED_PARAMETERIZED_DATA_TYPE")?{type:"RESERVED_PARAMETERIZED_DATA_TYPE"}:RESERVED_PARAMETERIZED_DATA_TYPE,"_","parenthesis"],postprocess:([t,e,r])=>({type:Q.parameterized_data_type,dataType:or(gK(t),{trailing:e}),parenthesis:r})},{name:"logic_operator$subexpression$1",symbols:[ce.has("AND")?{type:"AND"}:AND]},{name:"logic_operator$subexpression$1",symbols:[ce.has("OR")?{type:"OR"}:OR]},{name:"logic_operator$subexpression$1",symbols:[ce.has("XOR")?{type:"XOR"}:XOR]},{name:"logic_operator",symbols:["logic_operator$subexpression$1"],postprocess:([[t]])=>sr(t)},{name:"other_keyword$subexpression$1",symbols:[ce.has("WHEN")?{type:"WHEN"}:WHEN]},{name:"other_keyword$subexpression$1",symbols:[ce.has("THEN")?{type:"THEN"}:THEN]},{name:"other_keyword$subexpression$1",symbols:[ce.has("ELSE")?{type:"ELSE"}:ELSE]},{name:"other_keyword$subexpression$1",symbols:[ce.has("END")?{type:"END"}:END]},{name:"other_keyword",symbols:["other_keyword$subexpression$1"],postprocess:([[t]])=>sr(t)},{name:"_$ebnf$1",symbols:[]},{name:"_$ebnf$1",symbols:["_$ebnf$1","comment"],postprocess:t=>t[0].concat([t[1]])},{name:"_",symbols:["_$ebnf$1"],postprocess:([t])=>t},{name:"comment",symbols:[ce.has("LINE_COMMENT")?{type:"LINE_COMMENT"}:LINE_COMMENT],postprocess:([t])=>({type:Q.line_comment,text:t.text,precedingWhitespace:t.precedingWhitespace})},{name:"comment",symbols:[ce.has("BLOCK_COMMENT")?{type:"BLOCK_COMMENT"}:BLOCK_COMMENT],postprocess:([t])=>({type:Q.block_comment,text:t.text,precedingWhitespace:t.precedingWhitespace})},{name:"comment",symbols:[ce.has("DISABLE_COMMENT")?{type:"DISABLE_COMMENT"}:DISABLE_COMMENT],postprocess:([t])=>({type:Q.disable_comment,text:t.text,precedingWhitespace:t.precedingWhitespace})}],ParserStart:"main"},_K=Zwe});function OK(t){let e={},r=new ba(i=>[...SK(t.tokenize(i,e)),xb(i.length)]),n=new eLe(tLe.fromCompiled(_K),{lexer:r});return{parse:(i,s)=>{e=s;let{results:o}=n.feed(i);if(o.length===1)return o[0];throw o.length===0?new Error("Parse error: Invalid SQL"):new Error(`Parse error: Ambiguous grammar
${JSON.stringify(o,void 0,2)}`)}}}var NK,eLe,tLe,CK=G(()=>{NK=q(TK(),1);mK();IK();by();Cn();({Parser:eLe,Grammar:tLe}=NK.default)});var $,wa,rLe,nLe,_R=G(()=>{wc();(function(t){t[t.SPACE=0]="SPACE",t[t.NO_SPACE=1]="NO_SPACE",t[t.NO_NEWLINE=2]="NO_NEWLINE",t[t.NEWLINE=3]="NEWLINE",t[t.MANDATORY_NEWLINE=4]="MANDATORY_NEWLINE",t[t.INDENT=5]="INDENT",t[t.SINGLE_INDENT=6]="SINGLE_INDENT"})($=$||($={}));wa=class{constructor(e){this.indentation=e,this.items=[]}add(...e){for(let r of e)switch(r){case $.SPACE:this.items.push($.SPACE);break;case $.NO_SPACE:this.trimHorizontalWhitespace();break;case $.NO_NEWLINE:this.trimWhitespace();break;case $.NEWLINE:this.trimHorizontalWhitespace(),this.addNewline($.NEWLINE);break;case $.MANDATORY_NEWLINE:this.trimHorizontalWhitespace(),this.addNewline($.MANDATORY_NEWLINE);break;case $.INDENT:this.addIndentation();break;case $.SINGLE_INDENT:this.items.push($.SINGLE_INDENT);break;default:this.items.push(r)}}trimHorizontalWhitespace(){for(;rLe(ao(this.items));)this.items.pop()}trimWhitespace(){for(;nLe(ao(this.items));)this.items.pop()}addNewline(e){if(this.items.length>0)switch(ao(this.items)){case $.NEWLINE:this.items.pop(),this.items.push(e);break;case $.MANDATORY_NEWLINE:break;default:this.items.push(e);break}}addIndentation(){for(let e=0;e<this.indentation.getLevel();e++)this.items.push($.SINGLE_INDENT)}toString(){return this.items.map(e=>this.itemToString(e)).join("")}getLayoutItems(){return this.items}itemToString(e){switch(e){case $.SPACE:return" ";case $.NEWLINE:case $.MANDATORY_NEWLINE:return`
`;case $.SINGLE_INDENT:return this.indentation.getSingleIndent();default:return e}}},rLe=t=>t===$.SPACE||t===$.SINGLE_INDENT,nLe=t=>t===$.SPACE||t===$.SINGLE_INDENT||t===$.NEWLINE});function IR(t,e){if(e==="standard")return t;let r=[];return t.length>=10&&t.includes(" ")&&([t,...r]=t.split(" ")),e==="tabularLeft"?t=t.padEnd(9," "):t=t.padStart(9," "),t+["",...r].join(" ")}function Ly(t){return k3(t)||t===k.RESERVED_CLAUSE||t===k.RESERVED_SELECT||t===k.RESERVED_SET_OPERATION||t===k.RESERVED_JOIN||t===k.LIMIT}var bK=G(()=>{Cn()});var Dy,iLe,La,Py=G(()=>{wc();Dy="top-level",iLe="block-level",La=class{constructor(e){this.indent=e,this.indentTypes=[]}getSingleIndent(){return this.indent}getLevel(){return this.indentTypes.length}increaseTopLevel(){this.indentTypes.push(Dy)}increaseBlockLevel(){this.indentTypes.push(iLe)}decreaseTopLevel(){this.indentTypes.length>0&&ao(this.indentTypes)===Dy&&this.indentTypes.pop()}decreaseBlockLevel(){for(;this.indentTypes.length>0&&this.indentTypes.pop()===Dy;);}}});var Ef,Dc,yK=G(()=>{Py();_R();Ef=class extends wa{constructor(e){super(new La("")),this.expressionWidth=e,this.length=0,this.trailingSpace=!1}add(...e){if(e.forEach(r=>this.addToLength(r)),this.length>this.expressionWidth)throw new Dc;super.add(...e)}addToLength(e){if(typeof e=="string")this.length+=e.length,this.trailingSpace=!1;else{if(e===$.MANDATORY_NEWLINE||e===$.NEWLINE)throw new Dc;e===$.INDENT||e===$.SINGLE_INDENT||e===$.SPACE?this.trailingSpace||(this.length++,this.trailingSpace=!0):(e===$.NO_NEWLINE||e===$.NO_SPACE)&&this.trailingSpace&&(this.trailingSpace=!1,this.length--)}}},Dc=class extends Error{}});var hf,wK=G(()=>{wc();Cy();Cn();yy();_R();bK();yK();hf=class t{constructor({cfg:e,dialectCfg:r,params:n,layout:i,inline:s=!1}){this.inline=!1,this.nodes=[],this.index=-1,this.cfg=e,this.dialectCfg=r,this.inline=s,this.params=n,this.layout=i}format(e){for(this.nodes=e,this.index=0;this.index<this.nodes.length;this.index++)this.formatNode(this.nodes[this.index]);return this.layout}formatNode(e){this.formatComments(e.leadingComments),this.formatNodeWithoutComments(e),this.formatComments(e.trailingComments)}formatNodeWithoutComments(e){switch(e.type){case Q.function_call:return this.formatFunctionCall(e);case Q.parameterized_data_type:return this.formatParameterizedDataType(e);case Q.array_subscript:return this.formatArraySubscript(e);case Q.property_access:return this.formatPropertyAccess(e);case Q.parenthesis:return this.formatParenthesis(e);case Q.between_predicate:return this.formatBetweenPredicate(e);case Q.case_expression:return this.formatCaseExpression(e);case Q.case_when:return this.formatCaseWhen(e);case Q.case_else:return this.formatCaseElse(e);case Q.clause:return this.formatClause(e);case Q.set_operation:return this.formatSetOperation(e);case Q.limit_clause:return this.formatLimitClause(e);case Q.all_columns_asterisk:return this.formatAllColumnsAsterisk(e);case Q.literal:return this.formatLiteral(e);case Q.identifier:return this.formatIdentifier(e);case Q.parameter:return this.formatParameter(e);case Q.operator:return this.formatOperator(e);case Q.comma:return this.formatComma(e);case Q.line_comment:return this.formatLineComment(e);case Q.block_comment:return this.formatBlockComment(e);case Q.disable_comment:return this.formatBlockComment(e);case Q.data_type:return this.formatDataType(e);case Q.keyword:return this.formatKeywordNode(e)}}formatFunctionCall(e){this.withComments(e.nameKw,()=>{this.layout.add(this.showFunctionKw(e.nameKw))}),this.formatNode(e.parenthesis)}formatParameterizedDataType(e){this.withComments(e.dataType,()=>{this.layout.add(this.showDataType(e.dataType))}),this.formatNode(e.parenthesis)}formatArraySubscript(e){let r;switch(e.array.type){case Q.data_type:r=this.showDataType(e.array);break;case Q.keyword:r=this.showKw(e.array);break;default:r=this.showIdentifier(e.array);break}this.withComments(e.array,()=>{this.layout.add(r)}),this.formatNode(e.parenthesis)}formatPropertyAccess(e){this.formatNode(e.object),this.layout.add($.NO_SPACE,e.operator),this.formatNode(e.property)}formatParenthesis(e){let r=this.formatInlineExpression(e.children);r?(this.layout.add(e.openParen),this.layout.add(...r.getLayoutItems()),this.layout.add($.NO_SPACE,e.closeParen,$.SPACE)):(this.layout.add(e.openParen,$.NEWLINE),Ca(this.cfg)?(this.layout.add($.INDENT),this.layout=this.formatSubExpression(e.children)):(this.layout.indentation.increaseBlockLevel(),this.layout.add($.INDENT),this.layout=this.formatSubExpression(e.children),this.layout.indentation.decreaseBlockLevel()),this.layout.add($.NEWLINE,$.INDENT,e.closeParen,$.SPACE))}formatBetweenPredicate(e){this.layout.add(this.showKw(e.betweenKw),$.SPACE),this.layout=this.formatSubExpression(e.expr1),this.layout.add($.NO_SPACE,$.SPACE,this.showNonTabularKw(e.andKw),$.SPACE),this.layout=this.formatSubExpression(e.expr2),this.layout.add($.SPACE)}formatCaseExpression(e){this.formatNode(e.caseKw),this.layout.indentation.increaseBlockLevel(),this.layout=this.formatSubExpression(e.expr),this.layout=this.formatSubExpression(e.clauses),this.layout.indentation.decreaseBlockLevel(),this.layout.add($.NEWLINE,$.INDENT),this.formatNode(e.endKw)}formatCaseWhen(e){this.layout.add($.NEWLINE,$.INDENT),this.formatNode(e.whenKw),this.layout=this.formatSubExpression(e.condition),this.formatNode(e.thenKw),this.layout=this.formatSubExpression(e.result)}formatCaseElse(e){this.layout.add($.NEWLINE,$.INDENT),this.formatNode(e.elseKw),this.layout=this.formatSubExpression(e.result)}formatClause(e){this.isOnelineClause(e)?this.formatClauseInOnelineStyle(e):Ca(this.cfg)?this.formatClauseInTabularStyle(e):this.formatClauseInIndentedStyle(e)}isOnelineClause(e){return Ca(this.cfg)?this.dialectCfg.tabularOnelineClauses[e.nameKw.text]:this.dialectCfg.onelineClauses[e.nameKw.text]}formatClauseInIndentedStyle(e){this.layout.add($.NEWLINE,$.INDENT,this.showKw(e.nameKw),$.NEWLINE),this.layout.indentation.increaseTopLevel(),this.layout.add($.INDENT),this.layout=this.formatSubExpression(e.children),this.layout.indentation.decreaseTopLevel()}formatClauseInOnelineStyle(e){this.layout.add($.NEWLINE,$.INDENT,this.showKw(e.nameKw),$.SPACE),this.layout=this.formatSubExpression(e.children)}formatClauseInTabularStyle(e){this.layout.add($.NEWLINE,$.INDENT,this.showKw(e.nameKw),$.SPACE),this.layout.indentation.increaseTopLevel(),this.layout=this.formatSubExpression(e.children),this.layout.indentation.decreaseTopLevel()}formatSetOperation(e){this.layout.add($.NEWLINE,$.INDENT,this.showKw(e.nameKw),$.NEWLINE),this.layout.add($.INDENT),this.layout=this.formatSubExpression(e.children)}formatLimitClause(e){this.withComments(e.limitKw,()=>{this.layout.add($.NEWLINE,$.INDENT,this.showKw(e.limitKw))}),this.layout.indentation.increaseTopLevel(),Ca(this.cfg)?this.layout.add($.SPACE):this.layout.add($.NEWLINE,$.INDENT),e.offset?(this.layout=this.formatSubExpression(e.offset),this.layout.add($.NO_SPACE,",",$.SPACE),this.layout=this.formatSubExpression(e.count)):this.layout=this.formatSubExpression(e.count),this.layout.indentation.decreaseTopLevel()}formatAllColumnsAsterisk(e){this.layout.add("*",$.SPACE)}formatLiteral(e){this.layout.add(e.text,$.SPACE)}formatIdentifier(e){this.layout.add(this.showIdentifier(e),$.SPACE)}formatParameter(e){this.layout.add(this.params.get(e),$.SPACE)}formatOperator({text:e}){this.cfg.denseOperators||this.dialectCfg.alwaysDenseOperators.includes(e)?this.layout.add($.NO_SPACE,e):e===":"?this.layout.add($.NO_SPACE,e,$.SPACE):this.layout.add(e,$.SPACE)}formatComma(e){this.inline?this.layout.add($.NO_SPACE,",",$.SPACE):this.layout.add($.NO_SPACE,",",$.NEWLINE,$.INDENT)}withComments(e,r){this.formatComments(e.leadingComments),r(),this.formatComments(e.trailingComments)}formatComments(e){e&&e.forEach(r=>{r.type===Q.line_comment?this.formatLineComment(r):this.formatBlockComment(r)})}formatLineComment(e){TR(e.precedingWhitespace||"")?this.layout.add($.NEWLINE,$.INDENT,e.text,$.MANDATORY_NEWLINE,$.INDENT):this.layout.getLayoutItems().length>0?this.layout.add($.NO_NEWLINE,$.SPACE,e.text,$.MANDATORY_NEWLINE,$.INDENT):this.layout.add(e.text,$.MANDATORY_NEWLINE,$.INDENT)}formatBlockComment(e){e.type===Q.block_comment&&this.isMultilineBlockComment(e)?(this.splitBlockComment(e.text).forEach(r=>{this.layout.add($.NEWLINE,$.INDENT,r)}),this.layout.add($.NEWLINE,$.INDENT)):this.layout.add(e.text,$.SPACE)}isMultilineBlockComment(e){return TR(e.text)||TR(e.precedingWhitespace||"")}isDocComment(e){let r=e.split(/\n/);return/^\/\*\*?$/.test(r[0])&&r.slice(1,r.length-1).every(n=>/^\s*\*/.test(n))&&/^\s*\*\/$/.test(ao(r))}splitBlockComment(e){return this.isDocComment(e)?e.split(/\n/).map(r=>/^\s*\*/.test(r)?" "+r.replace(/^\s*/,""):r):e.split(/\n/).map(r=>r.replace(/^\s*/,""))}formatSubExpression(e){return new t({cfg:this.cfg,dialectCfg:this.dialectCfg,params:this.params,layout:this.layout,inline:this.inline}).format(e)}formatInlineExpression(e){let r=this.params.getPositionalParameterIndex();try{return new t({cfg:this.cfg,dialectCfg:this.dialectCfg,params:this.params,layout:new Ef(this.cfg.expressionWidth),inline:!0}).format(e)}catch(n){if(n instanceof Dc){this.params.setPositionalParameterIndex(r);return}else throw n}}formatKeywordNode(e){switch(e.tokenType){case k.RESERVED_JOIN:return this.formatJoin(e);case k.AND:case k.OR:case k.XOR:return this.formatLogicalOperator(e);default:return this.formatKeyword(e)}}formatJoin(e){Ca(this.cfg)?(this.layout.indentation.decreaseTopLevel(),this.layout.add($.NEWLINE,$.INDENT,this.showKw(e),$.SPACE),this.layout.indentation.increaseTopLevel()):this.layout.add($.NEWLINE,$.INDENT,this.showKw(e),$.SPACE)}formatKeyword(e){this.layout.add(this.showKw(e),$.SPACE)}formatLogicalOperator(e){this.cfg.logicalOperatorNewline==="before"?Ca(this.cfg)?(this.layout.indentation.decreaseTopLevel(),this.layout.add($.NEWLINE,$.INDENT,this.showKw(e),$.SPACE),this.layout.indentation.increaseTopLevel()):this.layout.add($.NEWLINE,$.INDENT,this.showKw(e),$.SPACE):this.layout.add(this.showKw(e),$.NEWLINE,$.INDENT)}formatDataType(e){this.layout.add(this.showDataType(e),$.SPACE)}showKw(e){return Ly(e.tokenType)?IR(this.showNonTabularKw(e),this.cfg.indentStyle):this.showNonTabularKw(e)}showNonTabularKw(e){switch(this.cfg.keywordCase){case"preserve":return yc(e.raw);case"upper":return e.text;case"lower":return e.text.toLowerCase()}}showFunctionKw(e){return Ly(e.tokenType)?IR(this.showNonTabularFunctionKw(e),this.cfg.indentStyle):this.showNonTabularFunctionKw(e)}showNonTabularFunctionKw(e){switch(this.cfg.functionCase){case"preserve":return yc(e.raw);case"upper":return e.text;case"lower":return e.text.toLowerCase()}}showIdentifier(e){if(e.quoted)return e.text;switch(this.cfg.identifierCase){case"preserve":return e.text;case"upper":return e.text.toUpperCase();case"lower":return e.text.toLowerCase()}}showDataType(e){switch(this.cfg.dataTypeCase){case"preserve":return yc(e.raw);case"upper":return e.text;case"lower":return e.text.toLowerCase()}}}});var pf,LK=G(()=>{Cy();hK();CK();wK();_R();Py();pf=class{constructor(e,r){this.dialect=e,this.cfg=r,this.params=new ff(this.cfg.params)}format(e){let r=this.parse(e);return this.formatAst(r).trimEnd()}parse(e){return OK(this.dialect.tokenizer).parse(e,this.cfg.paramTypes||{})}formatAst(e){return e.map(r=>this.formatStatement(r)).join(`
`.repeat(this.cfg.linesBetweenQueries+1))}formatStatement(e){let r=new hf({cfg:this.cfg,dialectCfg:this.dialect.formatOptions,params:this.params,layout:new wa(new La(EK(this.cfg)))}).format(e.children);return e.hasSemicolon&&(this.cfg.newlineBeforeSemicolon?r.add($.NEWLINE,";"):r.add($.NO_NEWLINE,";")),r.toString()}}});function DK(t){let e=["multilineLists","newlineBeforeOpenParen","newlineBeforeCloseParen","aliasAs","commaPosition","tabulateAlias"];for(let r of e)if(r in t)throw new Rs(`${r} config is no more supported.`);if(t.expressionWidth<=0)throw new Rs(`expressionWidth config must be positive number. Received ${t.expressionWidth} instead.`);if(t.params&&!sLe(t.params)&&console.warn('WARNING: All "params" option values should be strings.'),t.paramTypes&&!oLe(t.paramTypes))throw new Rs("Empty regex given in custom paramTypes. That would result in matching infinite amount of parameters.");return t}function sLe(t){return(t instanceof Array?t:Object.values(t)).every(r=>typeof r=="string")}function oLe(t){return t.custom&&Array.isArray(t.custom)?t.custom.every(e=>e.regex!==""):!0}var Rs,xy=G(()=>{Rs=class extends Error{}});var aLe,PK,vy,lLe,xK,My,vK=G(()=>{Jz();fK();LK();xy();aLe=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},PK={bigquery:"bigquery",db2:"db2",db2i:"db2i",duckdb:"duckdb",hive:"hive",mariadb:"mariadb",mysql:"mysql",n1ql:"n1ql",plsql:"plsql",postgresql:"postgresql",redshift:"redshift",spark:"spark",sqlite:"sqlite",sql:"sql",tidb:"tidb",trino:"trino",transactsql:"transactsql",tsql:"transactsql",singlestoredb:"singlestoredb",snowflake:"snowflake"},vy=Object.keys(PK),lLe={tabWidth:2,useTabs:!1,keywordCase:"preserve",identifierCase:"preserve",dataTypeCase:"preserve",functionCase:"preserve",indentStyle:"standard",logicalOperatorNewline:"before",expressionWidth:50,linesBetweenQueries:1,denseOperators:!1,newlineBeforeSemicolon:!1},xK=(t,e={})=>{if(typeof e.language=="string"&&!vy.includes(e.language))throw new Rs(`Unsupported SQL dialect: ${e.language}`);let r=PK[e.language||"sql"];return My(t,Object.assign(Object.assign({},e),{dialect:Sy[r]}))},My=(t,e)=>{var{dialect:r}=e,n=aLe(e,["dialect"]);if(typeof t!="string")throw new Error("Invalid query argument. Expected string, instead got "+typeof t);let i=DK(Object.assign(Object.assign({},lLe),n));return new pf(dK(r),i).format(t)}});var MK={};Et(MK,{ConfigError:()=>Rs,bigquery:()=>JS,db2:()=>QS,db2i:()=>ZS,duckdb:()=>eR,expandPhrases:()=>x,format:()=>xK,formatDialect:()=>My,hive:()=>tR,mariadb:()=>rR,mysql:()=>nR,n1ql:()=>sR,plsql:()=>oR,postgresql:()=>aR,redshift:()=>lR,singlestoredb:()=>hR,snowflake:()=>pR,spark:()=>cR,sql:()=>dR,sqlite:()=>uR,supportedDialects:()=>vy,tidb:()=>iR,transactsql:()=>ER,trino:()=>fR});var UK=G(()=>{vK();xt();xy();Mb();Bb();Hb();Wb();kb();Vb();Xb();zb();Kb();Qb();ey();ry();iy();oy();ly();uy();fy();hy();Ty()});var WK={};Et(WK,{ExplainPlanView:()=>Uy,parseExplainOutput:()=>cLe});function cLe(t){let e=t.split(`
`).filter(d=>d.trim()),r=t.includes("QUERY VERBOSE PLAN:")||t.includes("Node 1."),n=e.map(d=>d.replace(/^NOTICE:\s*/i,"").trim()).filter(d=>d&&!d.startsWith("QUERY PLAN")&&!d.startsWith("QUERY VERBOSE")),i=[],s=[],o=0,a=0,l=n.findIndex(d=>d.includes("PLANTEXT:")),c=l>=0?n.slice(l+1).filter(d=>!d.startsWith("(")&&!d.includes("locus=")):n,u=[];for(let d of c){if(!d.trim()||d.startsWith("(xpath_")||d.includes("locus="))continue;let E=d.match(/^(\s*)/)?.[1]?.length||0,f=Math.floor(E/3),p=d.match(/^[\s]*(?:[lr]:\s*)?([\w\s-]+?)(?:\s+table\s+"(\w+)")?(?:\s+{[^}]*})?\s*\(cost=([\d.]+)\.\.([\d.]+)\s+rows=(\d+)\s+width=(\d+)\s+conf=([\d.]+)\)/i);if(p){let[,h,S,T,m,R,A,I]=p,w=h.trim(),g={id:++o,type:w,table:S,cost:{start:parseFloat(T),end:parseFloat(m)},rows:parseInt(R),width:parseInt(A),confidence:parseFloat(I),indent:f,children:[],raw:d.trim(),warnings:[]};for(uLe(g),s.push(...g.warnings),g.cost.end>a&&(a=g.cost.end);u.length>0&&u[u.length-1].indent>=f;)u.pop();u.length>0?u[u.length-1].children.push(g):i.push(g),u.push(g)}}return{nodes:i,rawText:t,isVerbose:r,totalCost:a,warnings:s}}function uLe(t){t.type.includes("Sequential Scan")&&t.rows>5e5&&t.warnings.push({type:"warning",message:`Sequential Scan on ${t.table||"table"} (${t.rows.toLocaleString()} rows) - consider adding an index`,icon:"\u26A0\uFE0F"}),t.type.includes("Nested Loop")&&t.rows>1e5&&t.warnings.push({type:"critical",message:`Nested Loop producing ${t.rows.toLocaleString()} rows - potential performance issue`,icon:"\u{1F534}"}),t.cost.end>1e10?t.warnings.push({type:"critical",message:`Very high estimated cost: ${t.cost.end.toExponential(2)}`,icon:"\u{1F534}"}):t.cost.end>1e7&&t.warnings.push({type:"warning",message:`High estimated cost: ${t.cost.end.toLocaleString()}`,icon:"\u26A0\uFE0F"}),t.confidence===0&&t.warnings.push({type:"info",message:"Low confidence estimate (conf=0) - statistics may be outdated",icon:"\u2139\uFE0F"})}function dLe(t){return t.includes("Sequential Scan")?"#e74c3c":t.includes("Index Scan")?"#27ae60":t.includes("Nested Loop")?"#e67e22":t.includes("Hash Join")?"#3498db":t.includes("Merge Join")?"#9b59b6":t.includes("Aggregate")?"#1abc9c":t.includes("Group")?"#16a085":t.includes("Sort")?"#f39c12":t.includes("Limit")?"#95a5a6":t.includes("Sub-query")?"#34495e":"#7f8c8d"}function HK(t,e=0){return t.map(r=>{let n=r.children.length>0,i=dLe(r.type),s=r.warnings.map(o=>`<span class="warning-badge warning-${o.type}" title="${o.message}">${o.icon}</span>`).join("");return`
        <div class="plan-node" style="--node-color: ${i}">
            <div class="node-header">
                ${n?'<span class="toggle-btn">\u25BC</span>':'<span class="toggle-spacer"></span>'}
                <span class="node-type" style="background-color: ${i}">${r.type}</span>
                ${r.table?`<span class="node-table">${r.table}${r.alias?` (${r.alias})`:""}</span>`:""}
                ${s}
            </div>
            <div class="node-metrics">
                <span class="metric"><b>Cost:</b> ${BK(r.cost.start)}..${BK(r.cost.end)}</span>
                <span class="metric"><b>Rows:</b> ${r.rows.toLocaleString()}</span>
                <span class="metric"><b>Width:</b> ${r.width}</span>
                <span class="metric ${r.confidence===0?"low-conf":""}"><b>Conf:</b> ${r.confidence}%</span>
            </div>
            ${n?`<div class="node-children">${HK(r.children,e+1)}</div>`:""}
        </div>`}).join("")}function BK(t){return t>1e6?t.toExponential(1):t.toLocaleString(void 0,{maximumFractionDigits:1})}function GK(t){return t.reduce((e,r)=>e+1+GK(r.children),0)}function FK(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function fLe(){let t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let r=0;r<32;r++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}var bn,Uy,$K=G(()=>{"use strict";bn=q(require("vscode"));Uy=class t{constructor(e,r,n,i){this._disposables=[];this._panel=e,this._extensionUri=r,this._update(n,i),this._panel.onDidDispose(()=>this.dispose(),null,this._disposables),this._panel.webview.onDidReceiveMessage(s=>{switch(s.command){case"copyPlan":bn.env.clipboard.writeText(n.rawText),bn.window.showInformationMessage("Plan copied to clipboard");return}},null,this._disposables)}static{this.viewType="netezza.explainPlan"}static createOrShow(e,r,n){let i=bn.window.activeTextEditor?bn.ViewColumn.Beside:void 0,s=bn.window.createWebviewPanel(t.viewType,"Query Execution Plan",i||bn.ViewColumn.One,{enableScripts:!0,localResourceRoots:[bn.Uri.joinPath(e,"media")],retainContextWhenHidden:!0});new t(s,e,r,n)}dispose(){for(this._panel.dispose();this._disposables.length;){let e=this._disposables.pop();e&&e.dispose()}}_update(e,r){this._panel.title="Query Execution Plan",this._panel.webview.html=this._getHtmlForWebview(e,r)}_getHtmlForWebview(e,r){let n=this._panel.webview.asWebviewUri(bn.Uri.joinPath(this._extensionUri,"media","explainPlan.css")),i=fLe(),s=FK(r);return`<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Security-Policy" content="default-src 'none'; style-src ${this._panel.webview.cspSource} 'unsafe-inline'; script-src 'nonce-${i}';">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="${n}" rel="stylesheet">
    <title>Query Execution Plan</title>
</head>
<body>
    <div class="container">
        <div class="header">
            <h2>Query Execution Plan</h2>
            <div class="header-actions">
                <button id="copyBtn" class="btn">\u{1F4CB} Copy Plan</button>
                <button id="expandAllBtn" class="btn">\u2795 Expand All</button>
                <button id="collapseAllBtn" class="btn">\u2796 Collapse All</button>
            </div>
        </div>

        ${e.warnings.length>0?`
        <div class="warnings-summary">
            <h3>\u26A0\uFE0F Performance Issues Detected (${e.warnings.length})</h3>
            <ul>
                ${e.warnings.map(o=>`<li class="warning-${o.type}">${o.icon} ${o.message}</li>`).join("")}
            </ul>
        </div>
        `:`
        <div class="no-warnings">
            <span>\u2705 No obvious performance issues detected</span>
        </div>
        `}

        <div class="stats-bar">
            <div class="stat">
                <span class="stat-label">Total Cost:</span>
                <span class="stat-value">${e.totalCost>1e6?e.totalCost.toExponential(2):e.totalCost.toLocaleString()}</span>
            </div>
            <div class="stat">
                <span class="stat-label">Nodes:</span>
                <span class="stat-value">${GK(e.nodes)}</span>
            </div>
        </div>

        <div class="query-section">
            <h3>Query</h3>
            <pre class="query-text">${s}</pre>
        </div>

        <div class="plan-section">
            <h3>Execution Plan</h3>
            <div id="planTree" class="plan-tree">
                ${HK(e.nodes)}
            </div>
        </div>

        <div class="raw-section">
            <details>
                <summary>Raw Plan Output</summary>
                <pre class="raw-plan">${FK(e.rawText)}</pre>
            </details>
        </div>
    </div>

    <script nonce="${i}">
        const vscode = acquireVsCodeApi();
        
        document.getElementById('copyBtn').addEventListener('click', () => {
            vscode.postMessage({ command: 'copyPlan' });
        });

        document.getElementById('expandAllBtn').addEventListener('click', () => {
            document.querySelectorAll('.node-children').forEach(el => el.style.display = 'block');
            document.querySelectorAll('.toggle-btn').forEach(el => el.textContent = '\u25BC');
        });

        document.getElementById('collapseAllBtn').addEventListener('click', () => {
            document.querySelectorAll('.node-children').forEach(el => el.style.display = 'none');
            document.querySelectorAll('.toggle-btn').forEach(el => el.textContent = '\u25B6');
        });

        document.querySelectorAll('.toggle-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                const node = e.target.closest('.plan-node');
                const children = node.querySelector('.node-children');
                if (children) {
                    const isHidden = children.style.display === 'none';
                    children.style.display = isHidden ? 'block' : 'none';
                    e.target.textContent = isHidden ? '\u25BC' : '\u25B6';
                }
            });
        });
    </script>
</body>
</html>`}}});var SLe={};Et(SLe,{activate:()=>pLe,deactivate:()=>TLe});module.exports=gs(SLe);var z=q(require("vscode"));ur();JR();var Kr=q(require("vscode")),Zf=class t{constructor(e,r,n){this.extensionUri=r;this.connectionManager=n;this._disposables=[];this._panel=e,this._panel.onDidDispose(()=>this.dispose(),null,this._disposables),this._panel.webview.html=this._getHtmlForWebview(this._panel.webview),this._panel.webview.onDidReceiveMessage(async i=>{switch(i.command){case"save":try{await this.connectionManager.saveConnection(i.data),Kr.window.showInformationMessage(`Connection '${i.data.name}' saved and activated!`),this.sendConnectionsToWebview()}catch(s){let o=s instanceof Error?s.message:String(s);Kr.window.showErrorMessage(`Error saving: ${o}`)}return;case"delete":try{await Kr.window.showWarningMessage(`Are you sure you want to delete '${i.name}'?`,{modal:!0},"Yes","No")==="Yes"&&(await this.connectionManager.deleteConnection(i.name),Kr.window.showInformationMessage(`Connection '${i.name}' deleted.`),this.sendConnectionsToWebview())}catch(s){let o=s instanceof Error?s.message:String(s);Kr.window.showErrorMessage(`Error deleting: ${o}`)}return;case"loadConnections":this.sendConnectionsToWebview();return}},null,this._disposables)}async sendConnectionsToWebview(){let e=await this.connectionManager.getConnections(),r=this.connectionManager.getActiveConnectionName();await this._panel.webview.postMessage({command:"updateConnections",connections:e,activeName:r})}static createOrShow(e,r){let n=Kr.window.activeTextEditor?Kr.window.activeTextEditor.viewColumn:void 0;if(t.currentPanel){t.currentPanel._panel.reveal(n);return}let i=Kr.window.createWebviewPanel("netezzaLogin","Connect to Netezza",n||Kr.ViewColumn.One,{enableScripts:!0,retainContextWhenHidden:!0});t.currentPanel=new t(i,e,r)}dispose(){for(t.currentPanel=void 0,this._panel.dispose();this._disposables.length;){let e=this._disposables.pop();e&&e.dispose()}}_getHtmlForWebview(e){let r=e.asWebviewUri(Kr.Uri.joinPath(this.extensionUri,"netezza_icon64.png"));return`<!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>Connect to Netezza</title>
            <style>
                :root {
                    --container-paddding: 20px;
                    --input-padding-vertical: 6px;
                    --input-padding-horizontal: 8px;
                    --input-margin-vertical: 4px;
                    --input-margin-horizontal: 0;
                }
                body {
                    font-family: var(--vscode-font-family);
                    padding: 0;
                    margin: 0;
                    color: var(--vscode-foreground);
                    background-color: var(--vscode-editor-background);
                    display: flex;
                    height: 100vh;
                    overflow: hidden;
                }
                
                /* Sidebar */
                .sidebar {
                    width: 260px;
                    background-color: var(--vscode-sideBar-background);
                    border-right: 1px solid var(--vscode-panel-border);
                    display: flex;
                    flex-direction: column;
                    flex-shrink: 0;
                    user-select: none;
                }
                .sidebar-header {
                    padding: 10px 15px;
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    border-bottom: 1px solid var(--vscode-panel-border);
                    background-color: var(--vscode-sideBarSectionHeader-background);
                }
                .sidebar-title {
                    font-weight: bold;
                    font-size: 11px;
                    text-transform: uppercase;
                    color: var(--vscode-sideBarTitle-foreground);
                }
                .connection-list {
                    flex: 1;
                    overflow-y: auto;
                    padding: 0;
                }
                .connection-item {
                    padding: 8px 15px;
                    cursor: pointer;
                    display: flex;
                    align-items: center;
                    border-left: 3px solid transparent;
                    color: var(--vscode-sideBar-foreground);
                }
                .connection-item:hover {
                    background-color: var(--vscode-list-hoverBackground);
                }
                .connection-item.active {
                    background-color: var(--vscode-list-activeSelectionBackground);
                    color: var(--vscode-list-activeSelectionForeground);
                    border-left-color: var(--vscode-focusBorder);
                }
                .connection-item .name {
                    flex: 1;
                    overflow: hidden;
                    text-overflow: ellipsis;
                    white-space: nowrap;
                    display: flex;
                    align-items: center;
                    gap: 8px;
                }
                .connection-item .status {
                    font-size: 0.8em;
                    margin-left: 5px;
                    opacity: 0.7;
                }

                /* Main Content */
                .main {
                    flex: 1;
                    padding: 40px;
                    overflow-y: auto;
                    display: flex;
                    justify-content: center;
                    align-items: flex-start;
                }
                .form-container {
                    width: 100%;
                    max-width: 500px;
                    background-color: var(--vscode-editorWidget-background);
                    border: 1px solid var(--vscode-widget-border);
                    padding: 30px;
                    border-radius: 4px;
                    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
                }
                
                h2 {
                    margin-top: 0;
                    margin-bottom: 25px;
                    font-size: 1.4em;
                    font-weight: 500;
                    padding-bottom: 10px;
                    border-bottom: 1px solid var(--vscode-panel-border);
                    display: flex;
                    align-items: center;
                    gap: 10px;
                }

                .form-group {
                    margin-bottom: 18px;
                }
                .form-row {
                    display: flex;
                    gap: 15px;
                }
                .form-col {
                    flex: 1;
                }

                label {
                    display: block;
                    margin-bottom: 6px;
                    font-weight: 600;
                    font-size: 12px;
                    color: var(--vscode-input-placeholderForeground);
                    display: flex;
                    align-items: center;
                    gap: 6px;
                }

                input, select {
                    width: 100%;
                    padding: 8px 10px;
                    box-sizing: border-box;
                    background: var(--vscode-input-background);
                    color: var(--vscode-input-foreground);
                    border: 1px solid var(--vscode-input-border);
                    border-radius: 2px;
                    font-family: inherit;
                    font-size: 13px;
                }
                input:focus, select:focus {
                    border-color: var(--vscode-focusBorder);
                    outline: 1px solid var(--vscode-focusBorder);
                }
                
                /* Buttons */
                .actions {
                    margin-top: 30px;
                    display: flex;
                    gap: 12px;
                    padding-top: 20px;
                    border-top: 1px solid var(--vscode-panel-border);
                }
                button {
                    background: var(--vscode-button-background);
                    color: var(--vscode-button-foreground);
                    padding: 8px 16px;
                    border: none;
                    cursor: pointer;
                    border-radius: 2px;
                    font-size: 13px;
                    font-weight: 500;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                }
                button:hover {
                    background: var(--vscode-button-hoverBackground);
                }
                button.secondary {
                    background: var(--vscode-button-secondaryBackground);
                    color: var(--vscode-button-secondaryForeground);
                }
                button.secondary:hover {
                    background: var(--vscode-button-secondaryHoverBackground);
                }
                button.danger {
                    background: var(--vscode-errorForeground);
                    color: white;
                }
                button.icon-btn {
                    padding: 4px;
                    background: transparent;
                    color: var(--vscode-icon-foreground);
                }
                button.icon-btn:hover {
                    background: var(--vscode-toolbar-hoverBackground);
                }

                .icon-img {
                    width: 16px;
                    height: 16px;
                    object-fit: contain;
                }
                .logo-header {
                    width: 32px;
                    height: 32px;
                    margin-right: 10px;
                }

            </style>
        </head>
        <body>
            <div class="sidebar">
                <div class="sidebar-header">
                    <span class="sidebar-title">Saved Connections</span>
                    <button class="icon-btn" id="btnNew" title="New Connection">
                        <svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M14 7v1H8v6H7V8H1V7h6V1h1v6h6z"/></svg>
                    </button>
                </div>
                <div id="connectionList" class="connection-list"></div>
            </div>
            
            <div class="main">
                <div class="form-container">
                    <h2 id="formTitle">
                        <img src="${r}" class="logo-header" />
                        New Connection
                    </h2>
                    
                    <div class="form-group">
                        <label for="name">Connection Name</label>
                        <input type="text" id="name" placeholder="Friendly name (e.g. Production)">
                    </div>

                    <div class="form-group">
                        <label for="dbType">
                            Database Type 
                            <img src="${r}" class="icon-img" />
                        </label>
                        <select id="dbType">
                            <option value="NetezzaSQL">NetezzaSQL</option>
                        </select>
                    </div>

                    <div class="form-row">
                        <div class="form-col">
                            <div class="form-group">
                                <label for="host">Host</label>
                                <input type="text" id="host" placeholder="Hostname or IP">
                            </div>
                        </div>
                        <div class="form-col" style="flex: 0 0 80px;">
                            <div class="form-group">
                                <label for="port">Port</label>
                                <input type="number" id="port" value="5480">
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="database">
                            Database
                        </label>
                        <input type="text" id="database" placeholder="Database name" value="system">
                    </div>

                    <div class="form-row">
                         <div class="form-col">
                            <div class="form-group">
                                <label for="user">User</label>
                                <input type="text" id="user" placeholder="Username">
                            </div>
                         </div>
                         <div class="form-col">
                            <div class="form-group">
                                <label for="password">Password</label>
                                <input type="password" id="password" placeholder="Password">
                            </div>
                         </div>
                    </div>
                    
                    <div class="actions">
                        <button id="btnSave" onclick="save()">Save & Connect</button>
                        <button id="btnDelete" class="danger" onclick="del()" style="display: none;">Delete</button>
                    </div>
                </div>
            </div>

            <script>
                const vscode = acquireVsCodeApi();
                let connections = [];
                let activeName = null;
                let currentEditName = null;
                const iconSrc = "${r}";

                // Load initial data
                window.addEventListener('message', event => {
                    const message = event.data;
                    switch (message.command) {
                        case 'updateConnections':
                            connections = message.connections;
                            activeName = message.activeName;
                            renderList();
                            break;
                    }
                });
                
                vscode.postMessage({ command: 'loadConnections' });

                document.getElementById('btnNew').addEventListener('click', () => {
                    clearForm();
                });

                function renderList() {
                    const list = document.getElementById('connectionList');
                    list.innerHTML = '';
                    
                    connections.forEach(conn => {
                        const div = document.createElement('div');
                        div.className = 'connection-item';
                        if (conn.name === currentEditName) {
                             div.classList.add('active');
                        }
                        
                        div.innerHTML = \`<span class="name"><img src="\${iconSrc}" class="icon-img"> \${conn.name}</span>\`;
                        if (conn.name === activeName) {
                            div.innerHTML += \`<span class="status">\u25CF</span>\`;
                            div.title = 'Active Connection';
                        }
                        
                        div.onclick = () => loadForm(conn);
                        list.appendChild(div);
                    });
                }

                function loadForm(conn) {
                    currentEditName = conn.name;
                    document.getElementById('formTitle').innerHTML = \`<img src="\${iconSrc}" class="logo-header" /> Edit Connection\`;
                    document.getElementById('name').value = conn.name;
                    document.getElementById('dbType').value = conn.dbType || 'NetezzaSQL';
                    document.getElementById('host').value = conn.host;
                    document.getElementById('port').value = conn.port;
                    document.getElementById('database').value = conn.database;
                    document.getElementById('user').value = conn.user;
                    document.getElementById('password').value = conn.password || ''; 
                    
                    document.getElementById('btnDelete').style.display = 'block';
                    renderList();
                }

                function clearForm() {
                    currentEditName = null;
                    document.getElementById('formTitle').innerHTML = \`<img src="\${iconSrc}" class="logo-header" /> New Connection\`;
                    document.getElementById('name').value = '';
                    document.getElementById('dbType').value = 'NetezzaSQL';
                    document.getElementById('host').value = '';
                    document.getElementById('port').value = '5480';
                    document.getElementById('database').value = 'system';
                    document.getElementById('user').value = '';
                    document.getElementById('password').value = '';
                    
                    document.getElementById('btnDelete').style.display = 'none';
                    renderList();
                }

                function save() {
                    const name = document.getElementById('name').value;
                    if (!name) {
                        return; // Add validation UI?
                    }
                    
                    const data = {
                        name: name,
                        dbType: document.getElementById('dbType').value,
                        host: document.getElementById('host').value,
                        port: parseInt(document.getElementById('port').value),
                        database: document.getElementById('database').value,
                        user: document.getElementById('user').value,
                        password: document.getElementById('password').value
                    };
                    
                    vscode.postMessage({
                        command: 'save',
                        data: data
                    });
                }

                function del() {
                    if (currentEditName) {
                        vscode.postMessage({
                            command: 'delete',
                            name: currentEditName
                        });
                    }
                }
            </script>
        </body>
        </html>`}};var Te=q(require("vscode"));ur();ur();function M8(t,e,r){return`SELECT description FROM ${t}.._v_object_data WHERE objtype='TABLE' AND objname='${r}' AND schema='${e}'`}function $c(t,e,r){return`
        SELECT 
            X.ATTNAME
            , X.FORMAT_TYPE
            , CASE WHEN X.ATTNOTNULL THEN 1 ELSE 0 END AS IS_NOT_NULL
            , X.COLDEFAULT
            , COALESCE(X.DESCRIPTION, '') AS DESCRIPTION
            , MAX(CASE WHEN K.CONTYPE = 'p' THEN 1 ELSE 0 END) AS IS_PK
            , MAX(CASE WHEN K.CONTYPE = 'f' THEN 1 ELSE 0 END) AS IS_FK
        FROM
            ${t}.._V_RELATION_COLUMN X
        INNER JOIN
            ${t}.._V_OBJECT_DATA O ON X.OBJID = O.OBJID
        LEFT JOIN
            ${t}.._V_RELATION_KEYDATA K 
            ON UPPER(K.RELATION) = UPPER(O.OBJNAME) 
            AND UPPER(K.SCHEMA) = UPPER(O.SCHEMA)
            AND UPPER(K.ATTNAME) = UPPER(X.ATTNAME)
            AND K.CONTYPE IN ('p', 'f')
        WHERE
            UPPER(O.OBJNAME) = UPPER('${r}')
            AND UPPER(O.DBNAME) = UPPER('${t}')
            AND UPPER(O.SCHEMA) = UPPER('${e}')
        GROUP BY 
            X.ATTNAME, X.FORMAT_TYPE, X.ATTNOTNULL, X.COLDEFAULT, X.DESCRIPTION, X.ATTNUM
        ORDER BY 
            X.ATTNUM
    `}function U8(t){let e=!1,r=t.IS_NOT_NULL;return typeof r=="boolean"?e=r:typeof r=="number"?e=r===1:typeof r=="string"&&(e=r==="1"||r.toLowerCase()==="true"||r.toLowerCase()==="t"),{attname:t.ATTNAME,formatType:t.FORMAT_TYPE,isNotNull:e,colDefault:t.COLDEFAULT||null,description:t.DESCRIPTION||"",isPk:Number(t.IS_PK)===1,isFk:Number(t.IS_FK)===1}}function B8(t){if(!t)return null;let e=pe(t);return e.length>0&&e[0].DESCRIPTION?e[0].DESCRIPTION:null}function kc(t){if(!t)return[];try{return pe(t).map(U8)}catch(e){return console.error("[TableMetadataProvider] Error parsing column metadata:",e),[]}}async function Sw(t,e,r,n){let i=M8(e,r,n),s=$c(e,r,n),[o,a]=await Promise.all([t(i),t(s)]);return{tableComment:B8(o),columns:kc(a)}}function Rw(t){return t.map(e=>({ATTNAME:e.attname,FORMAT_TYPE:e.formatType,IS_NOT_NULL:e.isNotNull?1:0,COLDEFAULT:e.colDefault,DESCRIPTION:e.description,IS_PK:e.isPk?1:0,IS_FK:e.isFk?1:0}))}var eE=class{constructor(e,r,n){this.context=e;this.connectionManager=r;this.metadataCache=n;this._onDidChangeTreeData=new Te.EventEmitter;this.onDidChangeTreeData=this._onDidChangeTreeData.event;this.connectionManager.onDidChangeConnections(()=>this.refresh())}refresh(){this._onDidChangeTreeData.fire()}triggerDatabasePrefetch(e,r){this.metadataCache.hasConnectionPrefetchTriggered(e)||(console.log(`[SchemaProvider] Triggering connection prefetch for: ${e}`),this.metadataCache.triggerConnectionPrefetch(e,async n=>{try{return await ae(this.context,n,!0,this.connectionManager,e)}catch(i){console.error("[SchemaProvider] Prefetch query error:",i);return}}))}getTreeItem(e){return e}getParent(e){if(e.contextValue!=="serverInstance"){if(e.contextValue==="database")return new Qt(e.connectionName,Te.TreeItemCollapsibleState.Collapsed,"serverInstance",void 0,void 0,void 0,void 0,void 0,e.connectionName,void 0);if(e.contextValue.startsWith("typeGroup"))return new Qt(e.dbName,Te.TreeItemCollapsibleState.Collapsed,"database",e.dbName,void 0,void 0,void 0,void 0,e.connectionName);if(e.contextValue.startsWith("netezza:"))return new Qt(e.objType,Te.TreeItemCollapsibleState.Collapsed,`typeGroup:${e.objType}`,e.dbName,e.objType,void 0,void 0,void 0,e.connectionName)}}async getChildren(e){if(e){if(e.contextValue==="serverInstance"){if(!e.connectionName)return[];let r=this.metadataCache.getDatabases(e.connectionName);if(r)return r.map(n=>new Qt(n.label||n.DATABASE,Te.TreeItemCollapsibleState.Collapsed,"database",n.label||n.DATABASE,void 0,void 0,void 0,void 0,e.connectionName));try{let n=await ae(this.context,"SELECT DATABASE FROM system.._v_database ORDER BY DATABASE",!0,this.connectionManager,e.connectionName);if(!n)return[];let i=pe(n),s=i.map(o=>({DATABASE:o.DATABASE,label:o.DATABASE,kind:9,detail:"Database"}));return this.metadataCache.setDatabases(e.connectionName,s),i.map(o=>new Qt(o.DATABASE,Te.TreeItemCollapsibleState.Collapsed,"database",o.DATABASE,void 0,void 0,void 0,void 0,e.connectionName))}catch(n){let i=n instanceof Error?n.message:String(n);return Te.window.showErrorMessage(`Failed to load databases for ${e.connectionName}: ${i}`),[]}}else if(e.contextValue==="database"){if(e.connectionName&&e.dbName&&this.triggerDatabasePrefetch(e.connectionName,e.dbName),e.connectionName&&e.dbName){let r=this.metadataCache.getTypeGroups(e.connectionName,e.dbName);if(r&&r.length>0)return r.map(n=>new Qt(n,Te.TreeItemCollapsibleState.Collapsed,`typeGroup:${n}`,e.dbName,n,void 0,void 0,void 0,e.connectionName))}try{let r=`SELECT DISTINCT OBJTYPE FROM ${e.dbName}.._V_OBJECT_DATA WHERE DBNAME = '${e.dbName}' ORDER BY OBJTYPE`,n=await ae(this.context,r,!0,this.connectionManager,e.connectionName),i=n?pe(n):[];if(e.connectionName&&e.dbName){let s=i.map(o=>o.OBJTYPE);this.metadataCache.setTypeGroups(e.connectionName,e.dbName,s)}return i.map(s=>new Qt(s.OBJTYPE,Te.TreeItemCollapsibleState.Collapsed,`typeGroup:${s.OBJTYPE}`,e.dbName,s.OBJTYPE,void 0,void 0,void 0,e.connectionName))}catch(r){let n=r instanceof Error?r.message:String(r);return Te.window.showErrorMessage("Failed to load object types: "+n),[]}}else if(e.contextValue.startsWith("typeGroup")){if(e.connectionName&&e.dbName&&(e.objType==="TABLE"||e.objType==="VIEW"||e.objType==="EXTERNAL TABLE")){let r=this.metadataCache.getObjectsWithSchema(e.connectionName,e.dbName);if(r&&r.length>0){let n=e.objType,i=r.filter(s=>{let o=s.item;return o.objType?o.objType===n:n==="VIEW"?o.kind===18:n==="TABLE"?o.kind!==18&&o.detail!=="EXTERNAL TABLE":n==="EXTERNAL TABLE"?o.detail==="EXTERNAL TABLE"||o.detail?.startsWith("EXTERNAL TABLE"):!1});if(i.length>0)return i.map(s=>{let o=s.item;return new Qt(typeof o.label=="string"?o.label:o.label?.label||"unknown",Te.TreeItemCollapsibleState.Collapsed,`netezza:${e.objType}`,e.dbName,e.objType,s.schema,s.objId,s.description,e.connectionName,void 0,void 0,void 0,void 0,s.owner)})}}try{let r;e.objType==="PROCEDURE"?r=`SELECT PROCEDURESIGNATURE AS OBJNAME, SCHEMA, OBJID::INT AS OBJID, COALESCE(DESCRIPTION, '') AS DESCRIPTION, OWNER FROM ${e.dbName}.._V_PROCEDURE WHERE DATABASE = '${e.dbName}' ORDER BY PROCEDURESIGNATURE`:r=`SELECT OBJNAME, SCHEMA, OBJID, COALESCE(DESCRIPTION, '') AS DESCRIPTION, OWNER FROM ${e.dbName}.._V_OBJECT_DATA WHERE DBNAME = '${e.dbName}' AND OBJTYPE = '${e.objType}' ORDER BY OBJNAME`;let n=await ae(this.context,r,!0,this.connectionManager,e.connectionName),i=n?pe(n):[];if(e.connectionName&&e.dbName&&(e.objType==="TABLE"||e.objType==="VIEW")){let s=new Map;for(let o of i){let a=o.SCHEMA?`${e.dbName}.${o.SCHEMA}`:`${e.dbName}..`;s.has(a)||s.set(a,{tables:[],idMap:new Map});let l=s.get(a);l.tables.push({label:o.OBJNAME,kind:e.objType==="VIEW"?18:7,detail:o.SCHEMA?e.objType:`${e.objType} (${o.SCHEMA})`,sortText:o.OBJNAME});let c=o.SCHEMA?`${e.dbName}.${o.SCHEMA}.${o.OBJNAME}`:`${e.dbName}..${o.OBJNAME}`;o.OBJID!==void 0&&l.idMap.set(c,o.OBJID)}}return i.map(s=>{let a=["TABLE","VIEW","EXTERNAL TABLE","SYSTEM VIEW","SYSTEM TABLE"].includes(e.objType||"");return new Qt(s.OBJNAME,a?Te.TreeItemCollapsibleState.Collapsed:Te.TreeItemCollapsibleState.None,`netezza:${e.objType}`,e.dbName,e.objType,s.SCHEMA,s.OBJID,s.DESCRIPTION,e.connectionName,void 0,void 0,void 0,void 0,s.OWNER)})}catch(r){let n=r instanceof Error?r.message:String(r);return Te.window.showErrorMessage("Failed to load objects: "+n),[]}}else if(e.contextValue.startsWith("netezza:")){let r=e.label,n=e.schema,i=e.dbName;if(e.connectionName&&i){let s=`${i}.${n||""}.${r}`,o=this.metadataCache.getColumns(e.connectionName,s);if(o&&o.length>0&&o[0].isPk!==void 0)return o.map(a=>new Qt(a.detail?`${a.label||a.ATTNAME} (${a.detail})`:a.label||a.ATTNAME,Te.TreeItemCollapsibleState.None,"column",e.dbName,void 0,void 0,void 0,a.documentation||"",e.connectionName,r,void 0,a.isPk,a.isFk))}if(!e.connectionName||!i)return[];try{let s=$c(i,n||"",r),o=await ae(this.context,s,!0,this.connectionManager,e.connectionName),a=kc(o),l=`${i}.${n||""}.${r}`,c=a.map(u=>({ATTNAME:u.attname,FORMAT_TYPE:u.formatType,label:u.attname,kind:5,detail:u.formatType,documentation:u.description,isPk:u.isPk,isFk:u.isFk}));return this.metadataCache.setColumns(e.connectionName,l,c),a.map(u=>new Qt(`${u.attname} (${u.formatType})`,Te.TreeItemCollapsibleState.None,"column",e.dbName,void 0,void 0,void 0,u.description,e.connectionName,r,void 0,u.isPk,u.isFk))}catch(s){let o=s instanceof Error?s.message:String(s);return Te.window.showErrorMessage("Failed to load columns: "+o),[]}}}else{let r=await this.connectionManager.getConnections(),n=Te.Uri.file(this.context.asAbsolutePath("netezza_icon64.png"));return r.map(i=>new Qt(i.name,Te.TreeItemCollapsibleState.Collapsed,"serverInstance",void 0,void 0,void 0,void 0,void 0,i.name,void 0,n))}return[]}},Qt=class extends Te.TreeItem{constructor(r,n,i,s,o,a,l,c,u,d,E,f,p,h){super(r,n);this.label=r;this.collapsibleState=n;this.contextValue=i;this.dbName=s;this.objType=o;this.schema=a;this.objId=l;this.objectDescription=c;this.connectionName=u;this.parentName=d;this.isPk=f;this.isFk=p;this.owner=h;let S=this.label;u&&(S+=`
[Server: ${u}]`),c&&c.trim()&&(S+=`

${c.trim()}`),a&&i.startsWith("netezza:")&&(S+=`

Schema: ${a}`),h&&i.startsWith("netezza:")&&(S+=`
Owner: ${h}`),this.isPk&&(S+=`
\u{1F511} Primary Key`),this.isFk&&(S+=`
\u{1F517} Foreign Key`),this.tooltip=S,this.description=a?`(${a})`:"";let T=[u||"global",i,s||"",a||"",o||"",d||"",r,l?l.toString():""];this.id=T.join("|"),E?this.iconPath=E:i==="serverInstance"?this.iconPath=new Te.ThemeIcon("server"):i==="database"?this.iconPath=new Te.ThemeIcon("database"):i.startsWith("typeGroup")?this.iconPath=new Te.ThemeIcon("folder"):i.startsWith("netezza:")?this.iconPath=this.getIconForType(o):i==="column"&&(this.isPk?this.iconPath=new Te.ThemeIcon("key",new Te.ThemeColor("charts.yellow")):this.isFk?this.iconPath=new Te.ThemeIcon("link",new Te.ThemeColor("charts.blue")):this.iconPath=new Te.ThemeIcon("symbol-field"))}getIconForType(r){switch(r){case"TABLE":return new Te.ThemeIcon("table");case"VIEW":return new Te.ThemeIcon("eye");case"PROCEDURE":return new Te.ThemeIcon("gear");case"FUNCTION":return new Te.ThemeIcon("symbol-function");case"AGGREGATE":return new Te.ThemeIcon("symbol-operator");case"EXTERNAL TABLE":return new Te.ThemeIcon("server");default:return new Te.ThemeIcon("file")}}};var be=q(require("vscode"));var Xr=q(require("vscode")),tE=class t{constructor(e,r,n){this._disposables=[];this._panel=e,this._extensionUri=r,this._update(n),this._panel.onDidDispose(()=>this.dispose(),null,this._disposables),this._panel.webview.onDidReceiveMessage(i=>{switch(i.command){case"alert":Xr.window.showErrorMessage(i.text);return;case"info":Xr.window.showInformationMessage(i.text);return}},null,this._disposables)}static{this.viewType="netezza.analysisPanel"}static createOrShow(e,r){let n=Xr.window.activeTextEditor?Xr.ViewColumn.Beside:void 0,i=Xr.window.createWebviewPanel(t.viewType,"Data Analysis",n||Xr.ViewColumn.One,{enableScripts:!0,localResourceRoots:[Xr.Uri.joinPath(e,"media")],retainContextWhenHidden:!0});new t(i,e,r)}dispose(){for(this._panel.dispose();this._disposables.length;){let e=this._disposables.pop();e&&e.dispose()}}_update(e){let r=this._panel.webview;this._panel.title="Data Analysis",this._panel.webview.html=this._getHtmlForWebview(r,e)}_getHtmlForWebview(e,r){let n=Xr.Uri.joinPath(this._extensionUri,"media","analysisPanel.js"),i=e.asWebviewUri(n),s=Xr.Uri.joinPath(this._extensionUri,"media","analysisPanel.css"),o=e.asWebviewUri(s),a=e.asWebviewUri(Xr.Uri.joinPath(this._extensionUri,"media","tanstack-table-core.js")),l=e.asWebviewUri(Xr.Uri.joinPath(this._extensionUri,"media","tanstack-virtual-core.js")),c=F8();return`<!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <meta http-equiv="Content-Security-Policy" content="default-src 'none'; style-src ${e.cspSource} 'unsafe-inline'; script-src 'nonce-${c}'; font-src ${e.cspSource};">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <link href="${o}" rel="stylesheet">

            <title>Data Analysis</title>
        </head>
        <body>
            <div id="app">
                <div class="sidebar">
                    <div class="section">
                        <h3>Fields</h3>
                        <div id="fieldList" class="field-list"></div>
                    </div>
                </div>
                <div class="main-content">
                    <div class="filter-section" style="margin-bottom: 15px; display: flex; gap: 10px; align-items: center;">
                        <label for="dataFilter" style="font-weight: bold;">Filter:</label>
                        <input type="text" id="dataFilter" placeholder="Type to filter data..." style="flex: 1; padding: 6px 10px; background: var(--vscode-input-background); color: var(--vscode-input-foreground); border: 1px solid var(--vscode-input-border); border-radius: 4px;">
                        <button id="applyFilter" style="padding: 6px 12px; cursor: pointer;">Apply</button>
                        <button id="clearFilter" style="padding: 6px 12px; cursor: pointer;">Clear</button>
                    </div>
                    <div class="config-zones">
                        <div class="zone-container">
                            <h4>Rows</h4>
                            <div id="rowsZone" class="drop-zone" data-zone="rows"></div>
                        </div>
                        <div class="zone-container">
                            <h4>Columns</h4>
                            <div id="colsZone" class="drop-zone" data-zone="cols"></div>
                        </div>
                        <div class="zone-container">
                            <h4>Values</h4>
                            <div id="valuesZone" class="drop-zone" data-zone="values"></div>
                        </div>
                    </div>
                    <div class="pivot-grid-container">
                        <div id="pivotGrid"></div>
                    </div>
                    <div class="chart-container" style="margin-top: 20px;">
                        <div class="chart-header" style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                            <h4 style="margin: 0;">Chart</h4>
                            <select id="chartType" style="padding: 4px;">
                                <option value="bar">Bar Chart</option>
                                <option value="line">Line Chart</option>
                            </select>
                        </div>
                        <canvas id="pivotChart" width="600" height="300" style="background: var(--vscode-editor-background); border: 1px solid var(--vscode-panel-border); border-radius: 4px;"></canvas>
                    </div>
                </div>
            </div>
            
            <script nonce="${c}" src="${a}"></script>
            <script nonce="${c}" src="${l}"></script>
            <script nonce="${c}">
                // Pass initial data to the script
                window.initialData = ${JSON.stringify(r)};
                window.TableCore = TableCore;
                window.VirtualCore = VirtualCore;
            </script>
            <script nonce="${c}" src="${i}"></script>
        </body>
        </html>`}};function F8(){let t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let r=0;r<32;r++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}var rE=class{constructor(e){this._cspSource=e}generateHtml(e,r){let n=this._getIcons();return`<!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <meta http-equiv="Content-Security-Policy" content="default-src 'none'; script-src ${this._cspSource} 'unsafe-inline'; worker-src ${this._cspSource} blob:; connect-src ${this._cspSource}; style-src ${this._cspSource} 'unsafe-inline';">
            <title>Query Results</title>
            <script src="${e.scriptUri}"></script>
            <script src="${e.virtualUri}"></script>
            <link rel="stylesheet" href="${e.styleUri}">
        </head>
        <body>
            <div id="sourceTabs" class="source-tabs"></div>
            <div id="resultSetTabs" class="result-set-tabs" style="display: none;"></div>
            
            <div id="loadingOverlay" class="loading-overlay">
                <div class="spinner"></div>
                <div class="executing-text">Executing SQL...</div>
                <button id="cancelQueryBtn" class="secondary" title="Cancel the current query">Cancel</button>
            </div>
            <div class="controls">
                <input type="text" id="globalFilter" placeholder="Filter..." onkeyup="onFilterChanged()" style="background: var(--vscode-input-background); color: var(--vscode-input-foreground); border: 1px solid var(--vscode-input-border); padding: 4px;">
                <button onclick="toggleRowView()" title="Toggle Row View">${n.eye} Row View</button>
                
                <!-- Split Button for Export -->
                <div class="split-btn-container">
                    <button id="exportMainBtn" class="split-btn-main" onclick="executeSplitExport()" title="Export results (Excel)">
                        ${n.excel} Excel
                    </button>
                    <button id="exportArrowBtn" class="split-btn-arrow" onclick="toggleExportMenu()" title="Select export format">
                        <svg width="10" height="10" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor">
                            <path d="M8 11L3 6h10l-5 5z"/>
                        </svg>
                    </button>
                    <div id="exportMenu" class="split-btn-menu" style="display:none;">
                        <div class="split-btn-menu-item" onclick="selectExportFormat('excel')">
                            ${n.excel} Excel (XLSB)
                        </div>
                        <div class="split-btn-menu-item" onclick="selectExportFormat('xlsx')">
                            ${n.excel} Excel (XLSX)
                        </div>
                        <div class="split-btn-menu-item" onclick="selectExportFormat('csv')">
                            ${n.csv} CSV
                        </div>
                        <div class="split-btn-menu-item" onclick="selectExportFormat('json')">
                            ${n.json} JSON
                        </div>
                        <div class="split-btn-menu-item" onclick="selectExportFormat('xml')">
                            ${n.xml} XML
                        </div>
                        <div class="split-btn-menu-item" onclick="selectExportFormat('sql')">
                            ${n.sql} SQL INSERT
                        </div>
                        <div class="split-btn-menu-item" onclick="selectExportFormat('markdown')">
                            ${n.markdown} Markdown Table
                        </div>
                    </div>
                </div>

                <div style="width: 1px; height: 16px; background: var(--vscode-panel-border); margin: 0 2px;"></div>
                <button onclick="copyAsExcel()" title="Copy results as Excel to clipboard">${n.excel} Excel Copy</button>
                <div style="width: 1px; height: 16px; background: var(--vscode-panel-border); margin: 0 2px;"></div>
                <button onclick="selectAll()" title="Select all rows">${n.checkAll} Select All</button>
                <button onclick="copySelection(false)" title="Copy selected cells to clipboard">${n.copy} Copy</button>
                <button onclick="copySelection(true)" title="Copy selected cells with headers">${n.copy} Copy w/ Headers</button>
                <button onclick="clearAllFilters()" title="Clear all column filters">${n.clear} Clear Filters</button>
                <button id="clearLogsBtn" onclick="clearLogs()" title="Clear execution logs" style="display: none;">${n.trash} Clear Logs</button>
                <span id="rowCountInfo" style="margin-left: auto; font-size: 12px; opacity: 0.8;"></span>
            </div>

            <div id="groupingPanel" class="grouping-panel" ondragover="onDragOverGroup(event)" ondragleave="onDragLeaveGroup(event)" ondrop="onDropGroup(event)">
                <span style="opacity: 0.5;">Drag headers here to group</span>
            </div>

            <div id="mainSplitView" class="main-split-view">
                <div id="gridContainer"></div>
                <div id="rowViewPanel" class="row-view-panel">
                    <div class="row-view-header">
                        <span>Row Details & Comparison</span>
                        <span class="row-view-close" onclick="toggleRowView()">\xD7</span>
                    </div>
                    <div id="rowViewContent" class="row-view-content">
                        <div class="row-view-placeholder">Select 1 or 2 rows to view details or compare</div>
                    </div>
                </div>
            </div>
            
            <script>
                const vscode = acquireVsCodeApi();
                window.sources = ${r.sourcesJson};
                window.pinnedSources = new Set(${r.pinnedSourcesJson});
                window.pinnedResults = ${r.pinnedResultsJson};
                window.activeSource = ${r.activeSourceJson};
                window.resultSets = ${r.resultSetsJson};
                window.executingSources = new Set(${r.executingSourcesJson});
                
                let grids = [];
                let activeGridIndex = ${r.activeResultSetIndex};
                const workerUri = "${e.workerUri}";
            </script>
            <script src="${e.mainScriptUri}"></script>
            <script>
                // Initialize on load
                init();
            </script>
        </body>
        </html>`}_getIcons(){return{eye:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M8 3c-3 0-6 2.5-6 5s3 5 6 5 6-2.5 6-5-3-5-6-5zm0 9c-2.5 0-4.5-2-4.5-4S5.5 4 8 4s4.5 2 4.5 4-2 4.5-4.5 4.5z"/><circle cx="8" cy="8" r="2"/></svg>',excel:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M6 3h8v10H6V3zm-1 0H3v10h2V3zm-2-1h9a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1z"/><path d="M6 6h8v1H6V6zm0 2h8v1H6V8zm0 2h8v1H6v-1z"/></svg>',copy:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M4 4h7v2H4V4zm0 4h7v2H4V8zm0 4h7v2H4v-2zM2 1h12v14H2V1zm1 1v12h10V2H3z"/></svg>',csv:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M13 2H6L2 6v8a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1zm-1 11H4V7h3V4h5v9z"/></svg>',json:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M5 2c0-1.1.9-2 2-2h2a2 2 0 0 1 2 2v2h-2V2H7v2H5V2zm0 12c0 1.1.9 2 2 2h2a2 2 0 0 0 2-2v-2h-2v2H7v-2H5v2zM2 7v2h2V7H2zm10 0v2h2V7h-2z"/></svg>',xml:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M11.5 1L7 15h2l4.5-14h-2zM4.5 1L0 15h2l4.5-14h-2z"/></svg>',sql:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M8 0C3.6 0 0 1.8 0 4v8c0 2.2 3.6 4 8 4s8-1.8 8-4V4c0-2.2-3.6-4-8-4zm0 2c3.3 0 6 1.3 6 3s-2.7 3-6 3-6-1.3-6-3 2.7-3 6-3zm0 12c-3.3 0-6-1.3-6-3V9c1.6 1.7 4.3 2 6 2s4.4-.3 6-2v2c0 1.7-2.7 3-6 3z"/></svg>',markdown:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M14.5 2H1.5C.7 2 0 2.7 0 3.5v9C0 13.3.7 14 1.5 14h13c.8 0 1.5-.7 1.5-1.5v-9c0-.8-.7-1.5-1.5-1.5zM3 11V5l2 2 2-2v6H6V7l-1 1-1-1v4H3zm10 0h-2V9h-2v2H7V5h2v2h2V5h2v6z"/></svg>',export:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M6 3h8v10H6V3zm-1 0H3v10h2V3zm-2-1h9a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1z"/><path d="M6 6h8v1H6V6zm0 2h8v1H6V8zm0 2h8v1H6v-1z"/><path d="M10 12L8 14L6 12" stroke="currentColor" stroke-width="1.5" fill="none"/></svg>',checkAll:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M13.485 1.929l1.414 1.414-9.9 9.9-4.243-4.242 1.415-1.415 2.828 2.829z"/></svg>',clear:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M8 7.293l4.146-4.147.708.708L8.707 8l4.147 4.146-.708.708L8 8.707l-4.146 4.147-.708-.708L7.293 8 3.146 3.854l.708-.708L8 7.293z"/></svg>',trash:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M6.5 1h3l.5.5V3h3v1h-1v10h-1v-10h-7v10h-1V4h-1V3h3V1.5l.5-.5zM7 2v1h2V2H7zm-2 2v9h6V4H5zm1 1h1v7H6V5zm2 0h1v7H8V5z"/></svg>'}}};var Yc=class{constructor(e){this._resultsMap=new Map;this._pinnedSources=new Set;this._pinnedResults=new Map;this._autoPinnedResults=new Set;this._activeResultSetIndexMap=new Map;this._resultIdCounter=0;this._executingSources=new Set;this._cancelledSources=new Set;this._extensionUri=e}static{this.viewType="netezza.results"}getActiveSource(){return this._activeSourceUri}resolveWebviewView(e,r,n){this._view=e,e.webview.options={enableScripts:!0,localResourceRoots:[be.Uri.joinPath(this._extensionUri,"media")]},e.webview.html=this._getHtmlForWebview(),e.webview.onDidReceiveMessage(i=>{switch(i.command){case"analyze":tE.createOrShow(this._extensionUri,i.data);return;case"exportCsv":this.exportCsv(i.data);return;case"openInExcel":this.openInExcel(i.data,i.sql);return;case"copyAsExcel":this.copyAsExcel(i.data,i.sql);return;case"openInExcelXlsx":this.openInExcelXlsx(i.data,i.sql);return;case"exportJson":this.exportJson(i.data);return;case"exportXml":this.exportXml(i.data);return;case"exportSqlInsert":this.exportSqlInsert(i.data);return;case"exportMarkdown":this.exportMarkdown(i.data);return;case"switchSource":this._activeSourceUri=i.sourceUri,this._resultsMap.has(i.sourceUri)||this._resultsMap.set(i.sourceUri,[]),this._updateWebview();return;case"togglePin":this._pinnedSources.has(i.sourceUri)?this._pinnedSources.delete(i.sourceUri):this._pinnedSources.add(i.sourceUri),this._updateWebview();return;case"toggleResultPin":this._toggleResultPin(i.sourceUri,i.resultSetIndex);return;case"switchToPinnedResult":this._switchToPinnedResult(i.resultId);return;case"unpinResult":this._pinnedResults.delete(i.resultId),this._updateWebview();return;case"closeSource":this.closeSource(i.sourceUri);return;case"closeResult":this.closeResult(i.sourceUri,i.resultSetIndex);return;case"closeAllResults":this.closeAllResults(i.sourceUri);return;case"cancelQuery":i.sourceUri&&be.commands.executeCommand("netezza.cancelQuery",i.sourceUri,i.currentRowCounts);return;case"copyToClipboard":be.env.clipboard.writeText(i.text),be.window.showInformationMessage("Copied to clipboard");return;case"info":be.window.showInformationMessage(i.text);return;case"error":be.window.showErrorMessage(i.text);return;case"setContext":be.commands.executeCommand("setContext",i.key,i.value);return;case"clearLogs":this.clearLogs(i.sourceUri);return;case"switchResultSet":this._activeResultSetIndexMap.set(i.sourceUri,i.resultSetIndex);return}})}triggerCopySelection(){this._postMessageToWebview({command:"copySelection"})}setActiveSource(e){this._activeSourceUri!==e&&(this._activeSourceUri=e,this._resultsMap.has(e)||this._resultsMap.set(e,[]),this._updateWebview())}startExecution(e){this._executingSources.add(e),this._cancelledSources.delete(e);let r=this._resultsMap.get(e)||[],n,i=r.findIndex(d=>d.isLog);if(i!==-1){n=r[i];let d=new Date().toLocaleTimeString();n.data.push(["",""]),n.data.push([d,"--- New Execution Started ---"]),n.message="Execution started...",n.executionTimestamp=Date.now()}else{let d=new Date().toLocaleTimeString();n={columns:[{name:"Time",type:"string"},{name:"Message",type:"string"}],data:[[d,"--- New Execution Started ---"]],message:"Execution started...",executionTimestamp:Date.now(),isLog:!0,name:"Logs"}}let s=Array.from(this._pinnedResults.entries()).filter(([d,E])=>E.sourceUri===e&&r[E.resultSetIndex]!==n).sort((d,E)=>d[1].resultSetIndex-E[1].resultSetIndex),o=[];s.forEach(([d,E])=>{if(E.resultSetIndex<r.length){let f=r[E.resultSetIndex];f&&o.push(f)}});let a=[n,...o];this._resultsMap.set(e,a),Array.from(this._pinnedResults.entries()).filter(([d,E])=>E.sourceUri===e).map(([d,E])=>d).forEach(d=>this._pinnedResults.delete(d));let c=`result_${++this._resultIdCounter} `,u=e.split(/[\\/]/).pop()||e;this._pinnedResults.set(c,{sourceUri:e,resultSetIndex:0,timestamp:Date.now(),label:`${u} - Logs`}),s.forEach(([d,E],f)=>{let p=`result_${++this._resultIdCounter} `;this._pinnedResults.set(p,{sourceUri:e,resultSetIndex:f+1,timestamp:Date.now(),label:`${u} - Result ${f+1} `})}),this._pinnedSources.add(e),this._activeSourceUri=e,this._activeResultSetIndexMap.set(e,0),this._updateWebview(),this._view?.show?.(!0)}log(e,r){let n=this._resultsMap.get(e);if(!n||n.length===0)return;let i=n.find(s=>s.isLog);if(i){let s=new Date().toLocaleTimeString();i.data.push([s,r]),this._updateWebview()}}cancelExecution(e,r){this._executingSources.has(e)&&this._executingSources.delete(e),this._cancelledSources.add(e),(this._resultsMap.get(e)||[]).forEach((i,s)=>{i.isCancelled=!0,r&&r[s]!==void 0&&(i.data=i.data.slice(0,r[s]))}),this._updateWebview(),this._postMessageToWebview({command:"cancelExecution",sourceUri:e})}finalizeExecution(e){this._executingSources.delete(e);let r=this._resultsMap.get(e)||[];for(let n of this._autoPinnedResults){let i=this._pinnedResults.get(n);if(i&&i.sourceUri===e){let s=r[i.resultSetIndex];if(s&&s.isError)continue;this._pinnedResults.delete(n)}}this._autoPinnedResults.clear(),this._updateWebview()}updateResults(e,r,n=!1){this._resultsMap.has(r)||this._pinnedSources.add(r);let i=[];Array.isArray(e)?i=e:i=[e];let s=Date.now();i.forEach(f=>{f.executionTimestamp=s});let o=this._resultsMap.get(r)||[],a=o.find(f=>f.isLog),l=Array.from(this._pinnedResults.entries()).filter(f=>f[1].sourceUri===r).sort((f,p)=>f[1].resultSetIndex-p[1].resultSetIndex),c=[],u=new Map;a&&c.push(a),l.forEach(([f,p])=>{let h=o[p.resultSetIndex];h&&(h===a||c.includes(h)||c.push(h),u.set(f,h))});let d=c.length;if(console.log("[updateResults] Before append:",{existingResults:o.map((f,p)=>`[${p}]isLog = ${f.isLog}, isError = ${f.isError} `),finalResultSetsSoFar:c.map((f,p)=>`[${p}]isLog = ${f.isLog}, isError = ${f.isError} `),newResults:i.map(f=>`isLog = ${f.isLog}, isError = ${f.isError} `)}),c.push(...i),this._resultsMap.set(r,c),u.forEach((f,p)=>{let h=c.indexOf(f);if(h!==-1){let S=this._pinnedResults.get(p);S&&(S.resultSetIndex=h)}}),a&&!Array.from(u.values()).includes(a)){let p=`result_${++this._resultIdCounter} `,h=r.split(/[\\\\/]/).pop()||r;this._pinnedResults.set(p,{sourceUri:r,resultSetIndex:0,timestamp:Date.now(),label:`${h} - Logs`})}let E=r.split(/[\\\\/]/).pop()||r;i.forEach((f,p)=>{let h=`result_${++this._resultIdCounter} `,S=d+p;this._pinnedResults.set(h,{sourceUri:r,resultSetIndex:S,timestamp:Date.now(),label:f.isLog?`${E} - Logs`:`${E} - Result ${S} `}),this._autoPinnedResults.add(h)}),n||Array.from(this._resultsMap.keys()).filter(p=>p!==r&&!this._pinnedSources.has(p)).forEach(p=>{this._resultsMap.delete(p),Array.from(this._pinnedResults.entries()).filter(S=>S[1].sourceUri===p).map(([S,T])=>S).forEach(S=>this._pinnedResults.delete(S))}),this._activeSourceUri=r,this._activeResultSetIndexMap.set(r,d),this._view?(this._updateWebview(),this._view.show?.(!0)):be.window.showInformationMessage('Query completed. Please open "Query Results" panel to view data.')}appendStreamingChunk(e,r,n,i){if(this._cancelledSources.has(e))return;let s=this._resultsMap.get(e)||[];if(n.isFirstChunk&&n.columns.length>0){let o={columns:n.columns,data:n.rows,executionTimestamp:Date.now(),sql:i,limitReached:n.limitReached};s.findIndex(d=>d.isLog)>=0,s.push(o),this._resultsMap.set(e,s);let l=e.split(/[\\/]/).pop()||e,c=`result_${++this._resultIdCounter} `,u=s.length-1;this._pinnedResults.set(c,{sourceUri:e,resultSetIndex:u,timestamp:Date.now(),label:`${l} - Result ${u} `}),this._autoPinnedResults.add(c),this._activeSourceUri=e,this._activeResultSetIndexMap.set(e,u),this._updateWebview(),this._view?.show?.(!0)}else if(n.rows.length>0){let o=s[s.length-1];o&&!o.isLog&&(o.data.push(...n.rows),o.limitReached=n.limitReached,this._postMessageToWebview({command:"appendRows",resultSetIndex:s.length-1,rows:n.rows,totalRows:n.totalRowsSoFar,isLastChunk:n.isLastChunk,limitReached:n.limitReached}))}n.isLastChunk&&this._postMessageToWebview({command:"streamingComplete",resultSetIndex:s.length-1,totalRows:n.totalRowsSoFar,limitReached:n.limitReached})}_postMessageToWebview(e){this._view&&this._view.webview.postMessage(e)}_updateWebview(){this._view&&(this._view.webview.html=this._getHtmlForWebview())}_toggleResultPin(e,r){let n=Array.from(this._pinnedResults.entries()).find(i=>{let s=i[1];return s.sourceUri===e&&s.resultSetIndex===r});if(n)this._pinnedResults.delete(n[0]);else{let i=`result_${++this._resultIdCounter} `,s=Date.now(),a=`${e.split(/[\\/]/).pop()||e} - Result ${r+1} `;this._pinnedResults.set(i,{sourceUri:e,resultSetIndex:r,timestamp:s,label:a})}this._updateWebview()}_switchToPinnedResult(e){let r=this._pinnedResults.get(e);r&&(this._activeSourceUri=r.sourceUri,this._updateWebview(),this._view&&this._view.webview.postMessage({command:"switchToResultSet",resultSetIndex:r.resultSetIndex}))}async exportCsv(e){let r=await be.window.showSaveDialog({filters:{"CSV Files":["csv"]},saveLabel:"Export"});r&&(await be.workspace.fs.writeFile(r,Buffer.from(e)),be.window.showInformationMessage(`Results exported to ${r.fsPath} `))}async openInExcel(e,r){be.commands.executeCommand("netezza.exportCurrentResultToXlsbAndOpen",e,r)}async copyAsExcel(e,r){be.commands.executeCommand("netezza.copyCurrentResultToXlsbClipboard",e,r)}async openInExcelXlsx(e,r){try{await be.commands.executeCommand("netezza.exportCurrentResultToXlsxAndOpen",e,r)}catch(n){let i=n instanceof Error?n.message:String(n);be.window.showErrorMessage(`Failed to export to XLSX: ${i}. Please try reloading the window.`)}}async exportJson(e){let r=await be.window.showSaveDialog({filters:{"JSON Files":["json"]},saveLabel:"Export JSON"});r&&(await be.workspace.fs.writeFile(r,Buffer.from(e)),be.window.showInformationMessage(`Results exported to ${r.fsPath} `))}async exportXml(e){let r=await be.window.showSaveDialog({filters:{"XML Files":["xml"]},saveLabel:"Export XML"});r&&(await be.workspace.fs.writeFile(r,Buffer.from(e)),be.window.showInformationMessage(`Results exported to ${r.fsPath} `))}async exportSqlInsert(e){let r=await be.window.showSaveDialog({filters:{"SQL Files":["sql"]},saveLabel:"Export SQL"});r&&(await be.workspace.fs.writeFile(r,Buffer.from(e)),be.window.showInformationMessage(`Results exported to ${r.fsPath} `))}async exportMarkdown(e){let r=await be.window.showSaveDialog({filters:{"Markdown Files":["md"]},saveLabel:"Export Markdown"});r&&(await be.workspace.fs.writeFile(r,Buffer.from(e)),be.window.showInformationMessage(`Results exported to ${r.fsPath} `))}closeSource(e){if(this._resultsMap.has(e)){if(this._resultsMap.delete(e),this._pinnedSources.delete(e),this._executingSources.delete(e),Array.from(this._pinnedResults.entries()).filter(([n,i])=>i.sourceUri===e).map(([n,i])=>n).forEach(n=>this._pinnedResults.delete(n)),this._activeSourceUri===e){let n=Array.from(this._resultsMap.keys());this._activeSourceUri=n.length>0?n[0]:void 0}this._updateWebview()}}closeResult(e,r){let n=this._resultsMap.get(e);if(!n||r<0||r>=n.length)return;n.splice(r,1),Array.from(this._pinnedResults.entries()).filter(([s,o])=>o.sourceUri===e&&o.resultSetIndex===r).map(([s,o])=>s).forEach(s=>this._pinnedResults.delete(s));for(let[s,o]of this._pinnedResults.entries())o.sourceUri===e&&o.resultSetIndex>r&&(o.resultSetIndex-=1);if(this._activeResultSetIndexMap.get(e)===r){let s=r<n.length?r:Math.max(0,n.length-1);this._activeResultSetIndexMap.set(e,s)}else this._activeResultSetIndexMap.get(e)>r&&this._activeResultSetIndexMap.set(e,this._activeResultSetIndexMap.get(e)-1);this._updateWebview()}closeAllResults(e){let r=this._resultsMap.get(e);if(!r||r.length===0)return;let n=r.findIndex(s=>s.isLog);if(n===-1)r.splice(0);else{let s=r[n];r.splice(0),r.push(s)}Array.from(this._pinnedResults.entries()).filter(([s,o])=>{if(o.sourceUri!==e)return!1;let a=r[o.resultSetIndex];return!a||!a.isLog}).map(([s,o])=>s).forEach(s=>this._pinnedResults.delete(s)),this._activeResultSetIndexMap.set(e,0),this._updateWebview()}clearLogs(e){let r=this._resultsMap.get(e);if(r){let n=r.find(i=>i.isLog);if(n){n.data=[];let i=new Date().toLocaleTimeString();n.data.push([i,"--- Logs Cleared ---"]),this._updateWebview()}}}_getHtmlForWebview(){if(!this._view)return"";let e=this._getScriptUris(),r=this._prepareViewData();return new rE(this._view.webview.cspSource).generateHtml(e,r)}_getScriptUris(){return{scriptUri:this._view.webview.asWebviewUri(be.Uri.joinPath(this._extensionUri,"media","tanstack-table-core.js")),virtualUri:this._view.webview.asWebviewUri(be.Uri.joinPath(this._extensionUri,"media","tanstack-virtual-core.js")),mainScriptUri:this._view.webview.asWebviewUri(be.Uri.joinPath(this._extensionUri,"media","resultPanel.js")),workerUri:this._view.webview.asWebviewUri(be.Uri.joinPath(this._extensionUri,"media","searchWorker.js")),styleUri:this._view.webview.asWebviewUri(be.Uri.joinPath(this._extensionUri,"media","resultPanel.css"))}}_prepareViewData(){let e=Array.from(this._resultsMap.keys()),r=Array.from(this._pinnedSources),n=Array.from(this._pinnedResults.entries()).map(([l,c])=>({id:l,...c})),i=this._activeSourceUri&&this._resultsMap.has(this._activeSourceUri)?this._activeSourceUri:e.length>0?e[0]:null,s=i?this._resultsMap.get(i)||[]:[];if(i&&s.length===0){let l=new Date().toLocaleTimeString();s=[{columns:[{name:"Time",type:"string"},{name:"Message",type:"string"}],data:[[l,"No results yet"]],message:"No results yet",executionTimestamp:Date.now(),isLog:!0,name:"Logs"}],this._resultsMap.set(i,s)}let o=i&&this._activeResultSetIndexMap.has(i)?this._activeResultSetIndexMap.get(i):(s&&s.length>0,0),a=(l,c)=>typeof c=="bigint"?c>=Number.MIN_SAFE_INTEGER&&c<=Number.MAX_SAFE_INTEGER?Number(c):c.toString():c;return{sourcesJson:JSON.stringify(e),pinnedSourcesJson:JSON.stringify(r),pinnedResultsJson:JSON.stringify(n),activeSourceJson:JSON.stringify(i),resultSetsJson:JSON.stringify(s,a),activeResultSetIndex:o,executingSourcesJson:JSON.stringify(Array.from(this._executingSources))}}};var We=q(require("vscode"));ur();var nE=class{constructor(e,r,n){this.context=e;this.metadataCache=r;this.connectionManager=n}async provideCompletionItems(e,r,n,i){let s=e.getText(),o=this.stripComments(s),a=this.parseLocalDefinitions(o),l=e.lineAt(r).text.substr(0,r.character),c=l.toUpperCase(),u=r.line>0?e.lineAt(r.line-1).text:"",d=this.connectionManager.getConnectionForExecution(e.uri.toString());if(d||(d=this.connectionManager.getActiveConnectionName()||void 0),d&&!this.metadataCache.hasConnectionPrefetchTriggered(d)&&this.metadataCache.triggerConnectionPrefetch(d,m=>ae(this.context,m,!0,this.connectionManager,d)),/(FROM|JOIN)\s+$/.test(c)){let m=await this.getDatabases(d);return[...a.map(A=>{let I=new We.CompletionItem(A.name,We.CompletionItemKind.Class);return I.detail=A.type,I}),...m]}if(/(?:FROM|JOIN)\s*$/i.test(u)&&/^\s*[a-zA-Z0-9_]*$/.test(l)){let m=await this.getDatabases(d);return[...a.map(A=>{let I=new We.CompletionItem(A.name,We.CompletionItemKind.Class);return I.detail=A.type,I}),...m]}let E=l.match(/(?:FROM|JOIN)\s+([a-zA-Z0-9_]+)\.\s*$/i);if(E){let m=E[1],R=await this.getSchemas(d,m);return new We.CompletionList(R,!1)}let f=l.match(/^\s*([a-zA-Z0-9_]+)\.\s*$/i);if(f&&/(?:FROM|JOIN)\s*$/i.test(u)){let m=f[1],R=await this.getSchemas(d,m);return new We.CompletionList(R,!1)}let p=l.match(/(?:FROM|JOIN)\s+([a-zA-Z0-9_]+)\.([a-zA-Z0-9_]+)\.$/i);if(p){let m=p[1],R=p[2];return this.getTables(d,m,R)}let h=l.match(/^\s*([a-zA-Z0-9_]+)\.([a-zA-Z0-9_]+)\.\s*$/i);if(h&&/(?:FROM|JOIN)\s*$/i.test(u)){let m=h[1],R=h[2];return this.getTables(d,m,R)}let S=l.match(/(?:FROM|JOIN)\s+([a-zA-Z0-9_]+)\.\.$/i);if(S){let m=S[1];return this.getTables(d,m,void 0)}let T=l.match(/^\s*([a-zA-Z0-9_]+)\.\.\s*$/i);if(T&&/(?:FROM|JOIN)\s*$/i.test(u)){let m=T[1];return this.getTables(d,m,void 0)}if(l.trim().endsWith(".")){let m=l.match(/([a-zA-Z0-9_]+)\.$/);if(m){let R=m[1],A=this.findAlias(o,R);if(A){let w=a.find(g=>g.name.toUpperCase()===A.table.toUpperCase());return w?w.columns.map(g=>{let L=new We.CompletionItem(g,We.CompletionItemKind.Field);return L.detail="Local Column",L}):this.getColumns(d,A.db,A.schema,A.table)}let I=a.find(w=>w.name.toUpperCase()===R.toUpperCase());if(I)return I.columns.map(w=>{let g=new We.CompletionItem(w,We.CompletionItemKind.Field);return g.detail="Local Column",g})}}return this.getKeywords()}stripComments(e){let r=e.replace(/--.*$/gm,"");return r=r.replace(/\/\*[\s\S]*?\*\//g,""),r}parseLocalDefinitions(e){let r=[],n=/CREATE\s+TABLE\s+([a-zA-Z0-9_]+)\s+AS\s*\(/gi,i;for(;(i=n.exec(e))!==null;){let a=i[1],l=i.index+i[0].length,c=this.extractBalancedParenthesisContent(e,l);if(c){let u=this.extractColumnsFromQuery(c);r.push({name:a,type:"Temp Table",columns:u})}}let s=/\bWITH\s+/gi;for(;(i=s.exec(e))!==null;){let a=i.index+i[0].length;for(;;){let l=/^\s*([a-zA-Z0-9_]+)\s+AS\s*\(/i,c=e.substring(a),u=c.match(l);if(!u)break;let d=u[1],E=c.indexOf("(",u.index+u[1].length),f=a+E,p=this.extractBalancedParenthesisContent(e,f+1);if(p){let h=this.extractColumnsFromQuery(p);r.push({name:d,type:"CTE",columns:h}),a=f+1+p.length+1;let S=/^\s*,/,T=e.substring(a);if(S.test(T)){let m=T.match(S);a+=m[0].length}else break}else break}}let o=/\bJOIN\s+\(/gi;for(;(i=o.exec(e))!==null;){let a=i.index+i[0].length,l=this.extractBalancedParenthesisContent(e,a);if(l&&/^\s*SELECT\b/i.test(l)){let c=a+l.length+1,d=e.substring(c).match(/^\s+(?:AS\s+)?([a-zA-Z0-9_]+)/i);if(d){let E=d[1],f=this.extractColumnsFromQuery(l);r.push({name:E,type:"Subquery",columns:f})}}}return r}extractBalancedParenthesisContent(e,r){let n=1,i=r;for(;i<e.length;i++)if(e[i]==="("?n++:e[i]===")"&&n--,n===0)return e.substring(r,i);return null}extractColumnsFromQuery(e){let r=e.match(/^\s*SELECT\s+/i);if(!r)return[];let n=r[0].length,i="",s=0,o=-1;for(let c=n;c<e.length;c++)if(e[c]==="("?s++:e[c]===")"&&s--,s===0&&e.substr(c).match(/^\s+FROM\b/i)){o=c;break}o!==-1?i=e.substring(n,o):i=e.substring(n);let a=[],l="";s=0;for(let c=0;c<i.length;c++){let u=i[c];u==="("?s++:u===")"&&s--,u===","&&s===0?(a.push(l.trim()),l=""):l+=u}return l.trim()&&a.push(l.trim()),a.map(c=>{let u=c.match(/\s+AS\s+([a-zA-Z0-9_]+)$/i);if(u)return u[1];let d=c.match(/\s+([a-zA-Z0-9_]+)$/i);if(d)return d[1];let E=c.split(".");return E[E.length-1]})}findAlias(e,r){let n=new RegExp("(?:FROM|JOIN)\\s+([a-zA-Z0-9_\\.]+)(?:\\s+(?:AS\\s+)?([a-zA-Z0-9_]+))?","gi"),i;for(;(i=n.exec(e))!==null;){let s=i[1],o=i[2];if(o&&o.toUpperCase()===r.toUpperCase()){let a=s.split(".");return a.length===3?{db:a[0],schema:a[1],table:a[2]}:a.length===2?{schema:a[0],table:a[1]}:{table:a[0]}}else if(!o){let a=s.split(".");if(a[a.length-1].toUpperCase()===r.toUpperCase())return a.length===3?{db:a[0],schema:a[1],table:a[2]}:a.length===2?{schema:a[0],table:a[1]}:{table:a[0]}}}return null}buildSimpleColumnQuery(e,r,n,i,s){if(r)return`SELECT ATTNAME, FORMAT_TYPE FROM ${e}_V_RELATION_COLUMN WHERE OBJID = ${r} ORDER BY ATTNUM`;let o=i?`AND UPPER(O.SCHEMA) = UPPER('${i}')`:"",a=s?`AND UPPER(O.DBNAME) = UPPER('${s}')`:"";return`
            SELECT C.ATTNAME, C.FORMAT_TYPE 
            FROM ${e}_V_RELATION_COLUMN C
            JOIN ${e}_V_OBJECT_DATA O ON C.OBJID = O.OBJID
            WHERE UPPER(O.OBJNAME) = UPPER('${n}') ${o} ${a}
            ORDER BY C.ATTNUM
        `}createColumnCompletionItem(e){let r=e.label||e.ATTNAME,n=r;e.isPk?n=`\u{1F511} ${r}`:e.isFk&&(n=`\u{1F517} ${r}`);let i=new We.CompletionItem(n,e.kind||We.CompletionItemKind.Field);i.insertText=r;let s=e.detail||"";return e.isPk&&e.isFk?s+=" (PK, FK)":e.isPk?s+=" (PK)":e.isFk&&(s+=" (FK)"),i.detail=s,e.documentation&&(i.documentation=new We.MarkdownString(e.documentation)),e.isPk?i.sortText=`0_${r}`:e.isFk?i.sortText=`1_${r}`:i.sortText=`2_${r}`,i}getKeywords(){return["SELECT","FROM","WHERE","GROUP BY","ORDER BY","LIMIT","INSERT","INTO","VALUES","UPDATE","SET","DELETE","CREATE","DROP","TABLE","VIEW","DATABASE","JOIN","INNER","LEFT","RIGHT","OUTER","ON","AND","OR","NOT","NULL","IS","IN","BETWEEN","LIKE","AS","DISTINCT","CASE","WHEN","THEN","ELSE","END","WITH","UNION","ALL"].map(r=>{let n=new We.CompletionItem(r,We.CompletionItemKind.Keyword);return n.detail="SQL Keyword",n})}async getDatabases(e){if(!e)return[];let r=this.metadataCache.getDatabases(e);if(r)return r.map(n=>{let i=new We.CompletionItem(n.label||n.DATABASE,n.kind||We.CompletionItemKind.Module);return i.detail=n.detail,i});try{let i=await ae(this.context,"SELECT DATABASE FROM system.._v_database ORDER BY DATABASE",!0,this.connectionManager,e);if(!i)return[];let o=pe(i).map(a=>({DATABASE:a.DATABASE,label:a.DATABASE,kind:9,detail:"Database"}));return this.metadataCache.setDatabases(e,o),o.map(a=>{let l=new We.CompletionItem(a.label,a.kind);return l.detail=a.detail,l})}catch(n){return console.error(n),[]}}async getSchemas(e,r){if(!e)return[];let n=this.metadataCache.getSchemas(e,r);if(n)return n.map(s=>{let o=new We.CompletionItem(s.label||s.SCHEMA,s.kind||We.CompletionItemKind.Folder);return o.detail=s.detail,o.insertText=s.insertText,o.sortText=s.sortText,o.filterText=s.filterText,o});let i=We.window.setStatusBarMessage(`Fetching schemas for ${r}...`);try{let s=`SELECT SCHEMA FROM ${r}.._V_SCHEMA ORDER BY SCHEMA`,o=await ae(this.context,s,!0,this.connectionManager,e);if(!o)return[];let l=pe(o).filter(c=>c.SCHEMA!=null&&c.SCHEMA!=="").map(c=>{let u=c.SCHEMA;return{SCHEMA:u,label:u,kind:19,detail:`Schema in ${r}`,insertText:u,sortText:u,filterText:u}});return this.metadataCache.setSchemas(e,r,l),l.map(c=>{let u=new We.CompletionItem(c.label,c.kind);return u.detail=c.detail,u.insertText=c.insertText,u.sortText=c.sortText,u.filterText=c.filterText,u})}catch(s){return console.error("[SqlCompletion] Error in getSchemas:",s),[]}finally{i.dispose()}}async getTables(e,r,n){if(!e)return[];let i=n?`${r}.${n}`:`${r}..`,s=n?this.metadataCache.getTables(e,i):this.metadataCache.getTables(e,i)||this.metadataCache.getTablesAllSchemas(e,r);if(s)return s.map(l=>{let c=typeof l.label=="string"?l.label:l.label?.label||l.OBJNAME||l.TABLENAME||"?",u=new We.CompletionItem(c,l.kind||We.CompletionItemKind.Class);return u.detail=l.detail,l.DESCRIPTION&&(u.documentation=new We.MarkdownString(l.DESCRIPTION)),u.sortText=l.sortText,u});let o=n?`Fetching tables for ${r}.${n}...`:`Fetching tables for ${r}...`,a=We.window.setStatusBarMessage(o);try{let l="";n?l=`SELECT OBJNAME, OBJID, COALESCE(DESCRIPTION, '') AS DESCRIPTION FROM ${r}.._V_OBJECT_DATA WHERE UPPER(DBNAME) = UPPER('${r}') AND UPPER(SCHEMA) = UPPER('${n}') AND OBJTYPE='TABLE' ORDER BY OBJNAME`:l=`SELECT OBJNAME, OBJID, SCHEMA, COALESCE(DESCRIPTION, '') AS DESCRIPTION FROM ${r}.._V_OBJECT_DATA WHERE UPPER(DBNAME) = UPPER('${r}') AND OBJTYPE='TABLE' ORDER BY OBJNAME`;let c=await ae(this.context,l,!0,this.connectionManager,e);if(!c)return[];let u=pe(c),d=new Map,E=u.map(f=>{let p=f.OBJNAME,h=f.SCHEMA||n,S=h?`${r}.${h}.${f.OBJNAME}`:`${r}..${f.OBJNAME}`;return d.set(S,f.OBJID),{OBJNAME:f.OBJNAME,TABLENAME:f.OBJNAME,OBJID:f.OBJID,SCHEMA:h,label:p,kind:6,detail:n?"Table":`Table (${h})`,sortText:f.OBJNAME,DESCRIPTION:f.DESCRIPTION}});return this.metadataCache.setTables(e,i,E,d),E.map(f=>{let p=typeof f.label=="string"?f.label:f.label?.label||"?",h=new We.CompletionItem(p,f.kind);return h.detail=f.detail,f.DESCRIPTION&&(h.documentation=new We.MarkdownString(f.DESCRIPTION)),h.sortText=f.sortText,h})}catch(l){return console.error(l),[]}finally{a.dispose()}}async getColumns(e,r,n,i){if(!e)return[];let s,o=r?`${r}..`:"",a=n&&r?`${r}.${n}.${i}`:r?`${r}..${i}`:void 0;a&&(s=this.metadataCache.findTableId(e,a));let l=`${r||"CURRENT"}.${n||""}.${i}`,c=this.metadataCache.getColumns(e,l);if(c)return c.map(d=>this.createColumnCompletionItem(d));if(!n&&r){let d=this.metadataCache.getColumnsAnySchema(e,r,i);if(d)return d.map(E=>this.createColumnCompletionItem(E))}let u=We.window.setStatusBarMessage(`Fetching columns for ${i}...`);try{let d=n||"",E=r||"",f=E&&d?$c(E,d,i):this.buildSimpleColumnQuery(o,s,i,n,r),p=await ae(this.context,f,!0,this.connectionManager,e);if(!p)return[];let h;if(E&&d?h=kc(p).map(T=>({ATTNAME:T.attname,FORMAT_TYPE:T.formatType,label:T.attname,kind:5,detail:T.formatType,isPk:T.isPk,isFk:T.isFk,documentation:T.description})):h=pe(p).map(T=>({ATTNAME:T.ATTNAME,FORMAT_TYPE:T.FORMAT_TYPE,label:T.ATTNAME,kind:5,detail:T.FORMAT_TYPE})),this.metadataCache.setColumns(e,l,h),r){let S=this.context,T=this.metadataCache;setImmediate(async()=>{try{await T.prefetchColumnsForSchema(e,r,n,m=>ae(S,m,!0,this.connectionManager,e))}catch(m){console.error("[SqlCompletion] Background column prefetch error:",m)}})}return h.map(S=>this.createColumnCompletionItem(S))}catch(d){return console.error(d),[]}finally{u.dispose()}}};var Vc=q(require("vscode"));ur();function H8(t){let e="",r=0;for(;r<t.length;){if(t[r]==="-"&&r+1<t.length&&t[r+1]==="-"){for(;r<t.length&&t[r]!==`
`;)r++;r<t.length&&(e+=" ",r++);continue}if(t[r]==="/"&&r+1<t.length&&t[r+1]==="*"){for(r+=2;r<t.length-1&&!(t[r]==="*"&&t[r+1]==="/");)r++;r<t.length-1&&(r+=2),e+=" ";continue}if(t[r]==="'"){for(r++;r<t.length;)if(t[r]==="'"&&r+1<t.length&&t[r+1]==="'")r+=2;else if(t[r]==="'"){r++;break}else r++;e+=" ";continue}e+=t[r],r++}return e}function G8(t){let e="",r=0;for(;r<t.length;){if(t[r]==="-"&&r+1<t.length&&t[r+1]==="-"){for(;r<t.length&&t[r]!==`
`;)r++;r<t.length&&(e+=" ",r++);continue}if(t[r]==="/"&&r+1<t.length&&t[r+1]==="*"){for(r+=2;r<t.length-1&&!(t[r]==="*"&&t[r+1]==="/");)r++;r<t.length-1&&(r+=2),e+=" ";continue}if(t[r]==="'"){for(e+=t[r],r++;r<t.length;)if(t[r]==="'"&&r+1<t.length&&t[r+1]==="'")e+="''",r+=2;else if(t[r]==="'"){e+=t[r],r++;break}else e+=t[r],r++;continue}e+=t[r],r++}return e}function rA(t,e,r){let n;switch(r){case"raw":n=t;break;case"noComments":n=G8(t);break;case"noCommentsNoLiterals":default:n=H8(t);break}return n.toUpperCase().includes(e.toUpperCase())}var qc=class{constructor(e,r,n,i){this._extensionUri=e;this.context=r;this.metadataCache=n;this.connectionManager=i;this.currentSearchId=0}static{this.viewType="netezza.search"}resolveWebviewView(e,r,n){this._view=e,e.webview.options={enableScripts:!0,localResourceRoots:[this._extensionUri]},e.webview.html=this._getHtmlForWebview(e.webview),e.webview.onDidReceiveMessage(async i=>{switch(i.type){case"search":await this.search(i.value);break;case"searchSource":await this.searchSourceCode(i.value,i.mode||"noCommentsNoLiterals");break;case"navigate":Vc.commands.executeCommand("netezza.revealInSchema",i);break;case"cancel":this.currentSearchId++,this._view?.webview.postMessage({type:"cancelled"});break;case"reset":this.currentSearchId++,this._view?.webview.postMessage({type:"reset"});break}})}async search(e){if(!e||e.length<2)return;let r,n=Vc.window.activeTextEditor;if(n&&n.document.languageId==="sql"&&(r=this.connectionManager.getConnectionForExecution(n.document.uri.toString())),r||(r=this.connectionManager.getActiveConnectionName()||void 0),!r){this._view?.webview.postMessage({type:"results",data:[],append:!1});return}let i=++this.currentSearchId,s=new Set;if(this._view){let c=this.metadataCache.search(e,r);if(c.length>0){let u=[];c.forEach(d=>{let E=`${d.name.toUpperCase().trim()}|${d.type.toUpperCase().trim()}|${(d.parent||"").toUpperCase().trim()}`;s.has(E)||(s.add(E),u.push({NAME:d.name,SCHEMA:d.schema||"",DATABASE:d.database||"",TYPE:d.type,PARENT:d.parent||"",DESCRIPTION:"Result from Cache",MATCH_TYPE:"NAME",connectionName:r}))}),u.sort((d,E)=>{let f=p=>p==="COLUMN"?2:1;return f(E.TYPE)-f(d.TYPE)?f(d.TYPE)-f(E.TYPE):d.NAME.localeCompare(E.NAME)}),u.length>0&&i===this.currentSearchId&&this._view.webview.postMessage({type:"results",data:u,append:!1})}else i===this.currentSearchId&&this._view.webview.postMessage({type:"searching",message:"Searching in database..."});this.metadataCache.hasAllObjectsPrefetchTriggered(r)||this.metadataCache.prefetchAllObjects(r,async u=>ae(this.context,u,!0,this.connectionManager,r))}let a=`%${e.replace(/'/g,"''").toUpperCase()}%`,l=`
            SELECT * FROM (
                SELECT 1 AS PRIORITY, OBJNAME AS NAME, SCHEMA, DBNAME AS DATABASE, OBJTYPE AS TYPE, '' AS PARENT, 
                       COALESCE(DESCRIPTION, '') AS DESCRIPTION, 'NAME' AS MATCH_TYPE
                FROM _V_OBJECT_DATA 
                WHERE UPPER(OBJNAME) LIKE '${a}'
                UNION ALL
                SELECT 1 AS PRIORITY, OBJNAME AS NAME, SCHEMA, DBNAME AS DATABASE, OBJTYPE AS TYPE, '' AS PARENT, 
                       COALESCE(DESCRIPTION, '') AS DESCRIPTION, 'DESC' AS MATCH_TYPE
                FROM _V_OBJECT_DATA 
                WHERE UPPER(DESCRIPTION) LIKE '${a}' AND UPPER(OBJNAME) NOT LIKE '${a}'
                UNION ALL
                SELECT 2 AS PRIORITY, C.ATTNAME AS NAME, O.SCHEMA, O.DBNAME AS DATABASE, 'COLUMN' AS TYPE, O.OBJNAME AS PARENT,
                       COALESCE(C.DESCRIPTION, '') AS DESCRIPTION, 'NAME' AS MATCH_TYPE
                FROM _V_RELATION_COLUMN C
                JOIN _V_OBJECT_DATA O ON C.OBJID = O.OBJID
                WHERE UPPER(C.ATTNAME) LIKE '${a}'
                UNION ALL
                SELECT 3 AS PRIORITY, E1.TABLENAME AS NAME, E1.SCHEMA, E1.DATABASE, 'EXTERNAL TABLE' AS TYPE, '' AS PARENT,
                       COALESCE(E2.EXTOBJNAME, '') AS DESCRIPTION, 'DATAOBJECT' AS MATCH_TYPE
                FROM _V_EXTERNAL E1
                JOIN _V_EXTOBJECT E2 ON E1.DATABASE = E2.DATABASE AND E1.SCHEMA = E2.SCHEMA AND E1.TABLENAME = E2.TABLENAME
                WHERE UPPER(E2.EXTOBJNAME) LIKE '${a}'
            ) AS R
            ORDER BY PRIORITY, NAME
            LIMIT 100
        `;try{let c=await ae(this.context,l,!0,this.connectionManager,r);if(i!==this.currentSearchId)return;if(c&&c.data&&c.data.length>0){let u=pe(c),d=[];u.forEach(E=>{let f=E,p=`${f.NAME.toUpperCase().trim()}|${f.TYPE.toUpperCase().trim()}|${(f.PARENT||"").toUpperCase().trim()}`;s.has(p)||(d.push({NAME:f.NAME,SCHEMA:f.SCHEMA,DATABASE:f.DATABASE,TYPE:f.TYPE,PARENT:f.PARENT,DESCRIPTION:f.DESCRIPTION,MATCH_TYPE:f.MATCH_TYPE,connectionName:r}),s.add(p))}),d.length>0&&this._view?this._view.webview.postMessage({type:"results",data:d,append:!0}):s.size===0&&this._view&&this._view.webview.postMessage({type:"results",data:[],append:!1})}else s.size===0&&this._view&&this._view.webview.postMessage({type:"results",data:[],append:!1})}catch(c){console.error("Search error:",c),this._view&&i===this.currentSearchId&&this._view.webview.postMessage({type:"error",message:c instanceof Error?c.message:String(c)})}}async searchSourceCode(e,r){if(!e||e.length<2)return;let n,i=Vc.window.activeTextEditor;if(i&&i.document.languageId==="sql"&&(n=this.connectionManager.getConnectionForExecution(i.document.uri.toString())),n||(n=this.connectionManager.getActiveConnectionName()||void 0),!n){this._view?.webview.postMessage({type:"results",data:[],append:!1});return}let s=++this.currentSearchId,o=r==="raw"?"raw source":r==="noComments"?"source (excl. comments)":"source (excl. comments/strings)";try{this._view&&s===this.currentSearchId&&this._view.webview.postMessage({type:"searching",message:`Searching in ${o}...`});let a=e.toUpperCase(),l=[],c=`
                SELECT VIEWNAME AS NAME, SCHEMA, DATABASE, DEFINITION AS SOURCE
                FROM _V_VIEW
            `;try{let d=await ae(this.context,c,!0,this.connectionManager,n);if(d&&d.data&&s===this.currentSearchId){let E=pe(d);for(let f of E)f.SOURCE&&rA(f.SOURCE,a,r)&&l.push({NAME:f.NAME,SCHEMA:f.SCHEMA,DATABASE:f.DATABASE,TYPE:"VIEW",PARENT:"",DESCRIPTION:`Found in view ${o}`,MATCH_TYPE:"SOURCE_CODE",connectionName:n})}}catch(d){console.error("Error searching views:",d)}let u=`
                SELECT PROCEDURE AS NAME, SCHEMA, DATABASE, PROCEDURESOURCE AS SOURCE
                FROM _V_PROCEDURE
            `;try{let d=await ae(this.context,u,!0,this.connectionManager,n);if(d&&d.data&&s===this.currentSearchId){let E=pe(d);for(let f of E)f.SOURCE&&rA(f.SOURCE,a,r)&&l.push({NAME:f.NAME,SCHEMA:f.SCHEMA,DATABASE:f.DATABASE,TYPE:"PROCEDURE",PARENT:"",DESCRIPTION:`Found in procedure ${o}`,MATCH_TYPE:"SOURCE_CODE",connectionName:n})}}catch(d){console.error("Error searching procedures:",d)}this._view&&s===this.currentSearchId&&this._view.webview.postMessage({type:"results",data:l,append:!1})}catch(a){console.error("Source code search error:",a),this._view&&s===this.currentSearchId&&this._view.webview.postMessage({type:"error",message:a instanceof Error?a.message:String(a)})}}_getHtmlForWebview(e){return`<!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Schema Search</title>
        <style>
            body { 
                font-family: var(--vscode-font-family); 
                padding: 0; 
                margin: 0;
                color: var(--vscode-foreground); 
                display: flex;
                flex-direction: column;
                height: 100vh;
                overflow: hidden;
            }
            .search-box { 
                display: flex; 
                gap: 5px; 
                padding: 10px;
                flex-shrink: 0;
                border-bottom: 1px solid var(--vscode-panel-border);
            }
            input { flex-grow: 1; padding: 5px; background: var(--vscode-input-background); color: var(--vscode-input-foreground); border: 1px solid var(--vscode-input-border); }
            button {
                display: inline-flex;
                align-items: center;
                justify-content: center;
                gap: 6px;
                background-color: var(--vscode-button-secondaryBackground);
                color: var(--vscode-button-secondaryForeground);
                border: 1px solid var(--vscode-contrastBorder, transparent);
                padding: 4px 10px;
                cursor: pointer;
                border-radius: 2px;
                font-family: var(--vscode-font-family);
                font-size: 12px;
                line-height: 18px;
            }
            button:hover { background-color: var(--vscode-button-secondaryHoverBackground); }
            button.primary { background-color: var(--vscode-button-background); color: var(--vscode-button-foreground); }
            button.primary:hover { background-color: var(--vscode-button-hoverBackground); }
            #status { padding: 5px 10px; flex-shrink: 0; }
            .results { 
                list-style: none; 
                padding: 0; 
                margin: 0; 
                flex-grow: 1; 
                overflow-y: auto; 
            }
            .result-item { padding: 8px 10px; border-bottom: 1px solid var(--vscode-panel-border); display: flex; flex-direction: column; cursor: pointer; position: relative; }
            .result-item:hover { background: var(--vscode-list-hoverBackground); }
            .item-header { display: flex; justify-content: space-between; font-weight: bold; }
            .item-details { font-size: 0.9em; opacity: 0.8; display: flex; gap: 10px; }
            .type-badge { font-size: 0.8em; background: var(--vscode-badge-background); color: var(--vscode-badge-foreground); padding: 2px 5px; border-radius: 3px; }
            .tooltip { position: absolute; background: var(--vscode-editorHoverWidget-background); color: var(--vscode-editorHoverWidget-foreground); border: 1px solid var(--vscode-editorHoverWidget-border); padding: 8px; border-radius: 4px; font-size: 0.9em; max-width: 300px; word-wrap: break-word; z-index: 1000; opacity: 0; visibility: hidden; transition: opacity 0.2s, visibility 0.2s; pointer-events: none; }
            .result-item:hover .tooltip { opacity: 1; visibility: visible; }
            .tooltip.top { bottom: 100%; left: 0; margin-bottom: 5px; }
            .tooltip.bottom { top: 100%; left: 0; margin-top: 5px; }
            .cache-badge { background-color: var(--vscode-charts-green); color: white; padding: 1px 4px; border-radius: 2px; font-size: 0.7em; margin-left: 5px; }
            .spinner {
                border: 2px solid transparent;
                border-top: 2px solid var(--vscode-progressBar-background);
                border-radius: 50%;
                width: 14px;
                height: 14px;
                animation: spin 1s linear infinite;
                display: inline-block;
                vertical-align: middle;
                margin-right: 8px;
            }
            @keyframes spin {
                0% { transform: rotate(0deg); }
                100% { transform: rotate(360deg); }
            }
            .options-row {
                display: flex;
                align-items: center;
                gap: 8px;
                padding: 5px 10px;
                font-size: 12px;
                border-bottom: 1px solid var(--vscode-panel-border);
            }
            .options-row label {
                display: flex;
                align-items: center;
                gap: 4px;
                cursor: pointer;
            }
            .options-row select {
                background: var(--vscode-dropdown-background);
                color: var(--vscode-dropdown-foreground);
                border: 1px solid var(--vscode-dropdown-border);
                padding: 3px 6px;
                border-radius: 2px;
                cursor: pointer;
                font-size: 12px;
            }
            .searching-indicator {
                display: flex;
                align-items: center;
                justify-content: center;
                padding: 20px;
                color: var(--vscode-descriptionForeground);
            }
        </style>
    </head>
    <body>
        <div class="search-box">
            <input type="text" id="searchInput" placeholder="Search tables, columns, view definitions, procedure source..." />
            <button id="searchBtn" class="primary">Search</button>
            <button id="cancelBtn" style="display: none;" title="Cancel search">\u2715</button>
            <button id="resetBtn" title="Reset search">\u21BA</button>
        </div>
        <div class="options-row">
            <label>
                Source search mode:
                <select id="sourceModeSelect">
                    <option value="">Objects Only</option>
                    <option value="raw">Source: Raw</option>
                    <option value="noComments">Source: No Comments</option>
                    <option value="noCommentsNoLiterals">Source: No Comments/Strings</option>
                </select>
            </label>
        </div>
        <div id="status"></div>
        <ul class="results" id="resultsList"></ul>

        <script>
            try {
            const vscode = acquireVsCodeApi();
            const searchInput = document.getElementById('searchInput');
            const searchBtn = document.getElementById('searchBtn');
            const cancelBtn = document.getElementById('cancelBtn');
            const resetBtn = document.getElementById('resetBtn');
            const sourceModeSelect = document.getElementById('sourceModeSelect');
            const resultsList = document.getElementById('resultsList');
            const status = document.getElementById('status');
            
            let isSearching = false;
            
            function setSearchingState(searching) {
                isSearching = searching;
                cancelBtn.style.display = searching ? 'inline-flex' : 'none';
                searchBtn.disabled = searching;
            }

            searchBtn.addEventListener('click', () => {
                const term = searchInput.value;
                if (term) {
                    // Show searching indicator in results panel
                    resultsList.innerHTML = '<li class="searching-indicator"><span class="spinner"></span> Searching...</li>';
                    status.textContent = '';
                    setSearchingState(true);
                    
                    const sourceMode = sourceModeSelect.value;
                    if (sourceMode) {
                        // Source code search with mode
                        vscode.postMessage({ type: 'searchSource', value: term, mode: sourceMode });
                    } else {
                        // Object search (cache + database)
                        vscode.postMessage({ type: 'search', value: term });
                    }
                }
            });
            
            cancelBtn.addEventListener('click', () => {
                vscode.postMessage({ type: 'cancel' });
            });
            
            resetBtn.addEventListener('click', () => {
                vscode.postMessage({ type: 'reset' });
            });

            searchInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    searchBtn.click();
                }
            });

            window.addEventListener('message', event => {
                const message = event.data;
                switch (message.type) {
                    case 'searching':
                        // Show searching indicator in results panel
                        resultsList.innerHTML = '<li class="searching-indicator"><span class="spinner"></span> ' + (message.message || 'Searching...') + '</li>';
                        status.textContent = '';
                        break;
                    case 'results':
                        status.textContent = '';
                        setSearchingState(false);
                        renderResults(message.data, message.append);
                        break;
                    case 'error':
                        resultsList.innerHTML = '';
                        status.textContent = 'Error: ' + message.message;
                        setSearchingState(false);
                        break;
                    case 'cancelled':
                        resultsList.innerHTML = '';
                        status.textContent = 'Search cancelled.';
                        setSearchingState(false);
                        break;
                    case 'reset':
                        searchInput.value = '';
                        resultsList.innerHTML = '';
                        status.textContent = '';
                        setSearchingState(false);
                        break;
                }
            });

            function renderResults(data, append) {
                if (!append) {
                    resultsList.innerHTML = '';
                }

                if (!data || data.length === 0) {
                    if (!append && resultsList.children.length === 0) {
                        status.textContent = 'No results found.';
                    }
                    return;
                }

                data.forEach(item => {
                    const li = document.createElement('li');
                    li.className = 'result-item';

                    const parentInfo = item.PARENT ? \`Parent: \${item.PARENT}\` : '';
                    const schemaInfo = item.SCHEMA ? \`Schema: \${item.SCHEMA}\` : '';
                    const databaseInfo = item.DATABASE ? \`Database: \${item.DATABASE}\` : '';
                    const description = item.DESCRIPTION && item.DESCRIPTION.trim() ? item.DESCRIPTION : '';
                    
                    // Add match type indicator
                    const matchTypeInfo = item.MATCH_TYPE === 'DEFINITION' ? 'Match in view definition' :
                                        item.MATCH_TYPE === 'SOURCE' ? 'Match in procedure source' :
                                        item.MATCH_TYPE === 'NAME' ? 'Match in name' : '';
                    
                    li.innerHTML = \`
                        <div class="item-header">
                            <span>\${item.NAME}</span>
                            <span class="type-badge">\${item.TYPE}</span>
                        </div>
                        <div class="item-details">
                            <span>\${databaseInfo}</span>
                            <span>\${schemaInfo}</span>
                            <span>\${parentInfo}</span>
                            \${matchTypeInfo ? \`<span style="font-style: italic; color: var(--vscode-descriptionForeground);">\${matchTypeInfo}</span>\` : ''}
                        </div>
                        \${description ? \`<div class="tooltip bottom">\${description}</div>\` : ''}
                    \`;
                    
                    // Add double-click handler to navigate to schema tree
                    li.addEventListener('dblclick', () => {
                        vscode.postMessage({ 
                            type: 'navigate', 
                            name: item.NAME,
                            schema: item.SCHEMA,
                            database: item.DATABASE,
                            objType: item.TYPE,
                            parent: item.PARENT,
                            connectionName: item.connectionName // Pass back connection name
                        });
                    });
                    
                    resultsList.appendChild(li);
                });
            }
            } catch (e) {
                document.body.innerHTML = '<pre style="color:red;">Error loading Schema Search: ' + e.message + '\\n' + e.stack + '</pre>';
            }
        </script>
    </body>
    </html>`}};fo();var $a=q(require("vscode"));fo();var iE=class{provideDocumentLinks(e,r){let n=[],i=e.getText(),s=/[a-zA-Z0-9_"]+(\.[a-zA-Z0-9_"]*)+/g,o;for(;(o=s.exec(i))!==null;){let a=e.positionAt(o.index),l=e.positionAt(o.index+o[0].length),c=new $a.Range(a,l),u=Ur.getObjectAtPosition(i,o.index+Math.floor(o[0].length/2));if(u){if(o[0].split(".").length===2&&!u.database&&this.isLikelyAliasReference(i,o.index))continue;let f={name:u.name,schema:u.schema,database:u.database},p=$a.Uri.parse(`command:netezza.revealInSchema?${encodeURIComponent(JSON.stringify(f))}`),h=new $a.DocumentLink(c,p);h.tooltip=`Reveal ${u.name} in Schema`,n.push(h)}}return n}isLikelyAliasReference(e,r){let i=e.substring(Math.max(0,r-200),r).replace(/--[^\n]*/g,"").replace(/\/\*[\s\S]*?\*\//g,"").toUpperCase();return/(?:FROM|JOIN)\s+[a-zA-Z0-9_"]*$/i.test(i)?!1:!!i.match(/\b(SELECT|WHERE|ON|HAVING|ORDER\s+BY|GROUP\s+BY|AND|OR|SET|VALUES)\b(?!.*\b(?:FROM|JOIN)\b)/)}};var oE=q(require("vscode")),sE=class{provideFoldingRanges(e,r,n){let i=[],s=[],o=/^\s*--\s*REGION\b/i,a=/^\s*--\s*ENDREGION\b/i;for(let l=0;l<e.lineCount;l++){let u=e.lineAt(l).text;if(o.test(u))s.push(l);else if(a.test(u)&&s.length>0){let d=s.pop();i.push(new oE.FoldingRange(d,l,oE.FoldingRangeKind.Region))}}return i}};var Zt=q(require("vscode"));zf();var Xc=class t{constructor(e,r){this._extensionUri=e;this._context=r;this._currentOffset=0}static{this.viewType="netezza.queryHistory"}static{this.PAGE_SIZE=50}resolveWebviewView(e,r,n){this._view=e,e.webview.options={enableScripts:!0,localResourceRoots:[this._extensionUri]},e.webview.html=this._getHtmlForWebview(e.webview),this.sendHistoryToWebview(!0),e.webview.onDidReceiveMessage(async i=>{switch(i.type){case"refresh":this.refresh();break;case"loadMore":await this.loadMore();break;case"searchArchive":await this.searchArchive(i.term);break;case"clearAll":await this.clearAllHistory();break;case"deleteEntry":await this.deleteEntry(i.id,i.query);break;case"copyQuery":await Zt.env.clipboard.writeText(i.query),Zt.window.showInformationMessage("Query copied to clipboard");break;case"executeQuery":await this.executeQuery(i.query);break;case"getHistory":await this.sendHistoryToWebview(!0);break;case"toggleFavorite":await this.toggleFavorite(i.id);break;case"updateEntry":await this.updateEntry(i.id,i.tags,i.description);break;case"requestEdit":await this.requestEdit(i.id);break;case"requestTagFilter":await this.requestTagFilter(i.tags);break;case"showFavoritesOnly":await this.sendFavoritesToWebview();break;case"filterByTag":await this.sendFilteredByTagToWebview(i.tag);break}})}refresh(){this._view&&this.sendHistoryToWebview(!0)}async loadMore(){this._view&&(this._currentOffset+=t.PAGE_SIZE,this.sendHistoryToWebview(!1))}async searchArchive(e){if(!this._view)return;let r=new lr(this._context),n=await r.searchArchive(e),i=await r.getStats();this._view.webview.postMessage({type:"archiveSearchResults",history:n,stats:i,term:e})}async sendHistoryToWebview(e=!1){if(!this._view)return;e&&(this._currentOffset=0);let r=new lr(this._context),n=await r.getHistory(t.PAGE_SIZE,this._currentOffset),i=await r.getStats();console.log(`QueryHistoryView: sending history to webview, entries=${n.length}, offset=${this._currentOffset}, reset=${e}`),this._view.webview.postMessage({type:"historyData",history:n,stats:i,reset:e})}async clearAllHistory(){await Zt.window.showWarningMessage("Are you sure you want to clear all query history?",{modal:!0},"Clear All")==="Clear All"&&(await new lr(this._context).clearHistory(),this.refresh(),Zt.window.showInformationMessage("Query history cleared"))}async deleteEntry(e,r){let n=r?`: ${r.substring(0,50)}${r.length>50?"...":""}`:"";if(await Zt.window.showWarningMessage(`Are you sure you want to delete this query${n}?`,{modal:!0},"Delete")==="Delete"){let s=new lr(this._context);await s.deleteEntry(e),this._view?.webview.postMessage({type:"entryDeleted",id:e});let o=await s.getStats();this._view?.webview.postMessage({type:"updateStats",stats:o})}}async executeQuery(e){let r=await Zt.workspace.openTextDocument({content:e,language:"sql"});await Zt.window.showTextDocument(r)}async toggleFavorite(e){await new lr(this._context).toggleFavorite(e),this.refresh()}async updateEntry(e,r,n){await new lr(this._context).updateEntry(e,r,n),this.refresh(),Zt.window.showInformationMessage("Entry updated successfully")}async requestEdit(e){let i=(await new lr(this._context).getHistory()).find(a=>a.id===e);if(!i){Zt.window.showErrorMessage("Entry not found (might be archived)");return}let s=await Zt.window.showInputBox({prompt:"Enter tags (comma separated)",value:i.tags||"",placeHolder:"tag1, tag2, tag3"});if(s===void 0)return;let o=await Zt.window.showInputBox({prompt:"Enter description",value:i.description||"",placeHolder:"Description for this query"});o!==void 0&&await this.updateEntry(e,s,o)}async requestTagFilter(e){if(e.length===1)await this.sendFilteredByTagToWebview(e[0]);else if(e.length>1){let r=await Zt.window.showQuickPick(e,{placeHolder:"Filter by which tag?"});r&&await this.sendFilteredByTagToWebview(r)}}async sendFavoritesToWebview(){if(!this._view)return;let e=new lr(this._context),r=await e.getFavorites(),n=await e.getStats();this._view.webview.postMessage({type:"historyData",history:r,stats:n,filter:"favorites",reset:!0})}async sendFilteredByTagToWebview(e){if(!this._view)return;let r=new lr(this._context),n=await r.getByTag(e),i=await r.getStats();this._view.webview.postMessage({type:"historyData",history:n,stats:i,filter:`tag: ${e}`,reset:!0})}_getHtmlForWebview(e){let r=e.asWebviewUri(Zt.Uri.joinPath(this._extensionUri,"media","queryHistory.css")),n=e.asWebviewUri(Zt.Uri.joinPath(this._extensionUri,"media","queryHistory.js"));return`<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Security-Policy" content="default-src 'none'; style-src ${e.cspSource}; script-src ${e.cspSource};">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Query History</title>
    <link href="${r}" rel="stylesheet">
</head>
<body>
    <div class="toolbar">
        <div class="toolbar-top">
            <input type="search" id="searchInput" placeholder="Search queries..." />
            <span class="stats" id="stats">Loading...</span>
        </div>
        <div class="toolbar-buttons">
            <button class="secondary" id="showAllBtn">\u{1F4DC} All</button>
            <button class="secondary" id="showFavoritesBtn">\u2B50 Favorites</button>
            <button class="secondary" id="refreshBtn">\u21BB Refresh</button>
            <button class="secondary" id="clearAllBtn">\u{1F5D1}\uFE0F Clear All</button>
        </div>
    </div>
    <div class="history-container" id="historyContainer">
        <div class="empty-state">
            <div class="empty-state-icon">\u{1F4DC}</div>
            <div>No query history yet</div>
        </div>
    </div>
    <div id="loadingIndicator" class="loading-indicator" style="display:none;">Loading more...</div>

    <script src="${n}"></script>
</body>
</html>`}};var yt=q(require("vscode"));ur();var aE=class t{static{this.viewType="netezza.editData"}static async createOrShow(e,r,n,i){if(!r||!r.label||!r.dbName||!r.schema){yt.window.showErrorMessage("Invalid table selection");return}let s=r.label,o=r.schema,a=r.dbName,l=`${a}.${o}.${s}`,c=yt.window.createWebviewPanel(t.viewType,`Edit: ${s}`,yt.ViewColumn.One,{enableScripts:!0,localResourceRoots:[yt.Uri.joinPath(e,"media")],retainContextWhenHidden:!0});c.webview.html=this._getHtmlForWebview(c.webview,e,l),this._loadData(c,a,o,s,r.connectionName,n,i),c.webview.onDidReceiveMessage(async u=>{try{switch(u.command){case"save":await this._handleSave(c,u.changes,l,r.connectionName,n,i),this._loadData(c,a,o,s,r.connectionName,n,i,{whereClause:u.whereClause,columns:u.columns});break;case"refresh":this._loadData(c,a,o,s,r.connectionName,n,i,{whereClause:u.whereClause,columns:u.columns});break;case"updateTableComment":await this._execSimpleCommand(n,i,r.connectionName,`COMMENT ON TABLE ${l} IS '${(u.comment||"").replace(/'/g,"''")}'`,"Table comment updated");break;case"updateColumnComment":await this._execSimpleCommand(n,i,r.connectionName,`COMMENT ON COLUMN ${l}.${u.column} IS '${(u.comment||"").replace(/'/g,"''")}'`,"Column comment updated");break;case"addColumn":await this._execSimpleCommand(n,i,r.connectionName,`ALTER TABLE ${l} ADD COLUMN ${u.name} ${u.type}`,`Column ${u.name} added`,!0),this._loadData(c,a,o,s,r.connectionName,n,i);break;case"dropColumn":await this._execSimpleCommand(n,i,r.connectionName,`ALTER TABLE ${l} DROP COLUMN ${u.column}`,`Column ${u.column} dropped`,!0),this._loadData(c,a,o,s,r.connectionName,n,i);break;case"error":yt.window.showErrorMessage(u.text);break;case"info":yt.window.showInformationMessage(u.text);break}}catch(d){yt.window.showErrorMessage(`Error: ${d instanceof Error?d.message:String(d)}`)}})}static async _execSimpleCommand(e,r,n,i,s,o=!1){try{await cr(e,i,!0,n,r),yt.window.showInformationMessage(s)}catch(a){yt.window.showErrorMessage(`Operation failed: ${a instanceof Error?a.message:String(a)}`)}}static async _loadData(e,r,n,i,s,o,a,l={}){let c=`${r}.${n}.${i}`;try{e.webview.postMessage({command:"setLoading",loading:!0,message:"Fetching data..."});let u=R=>ae(o,R,!0,a,s),d="ROWID, *";if(l.columns&&l.columns.trim()){let R=l.columns.trim();/\bROWID\b/i.test(R)?d=R:d="ROWID, "+R}let E=`SELECT ${d} FROM ${c}`;if(l.whereClause&&l.whereClause.trim()){let R=l.whereClause.trim();/^\s*WHERE\s/i.test(R)?E+=` ${R}`:E+=` WHERE ${R}`}E+=" ORDER BY ROWID LIMIT 50000";let[f,p]=await Promise.all([ae(o,E,!0,a,s),Sw(u,r,n,i)]),h=p.tableComment||"",S=Rw(p.columns),T=[];try{f&&f.data?(T=pe(f),console.log("[EditDataProvider] Parsed data rows:",T.length)):console.log("[EditDataProvider] No data returned")}catch(R){console.error("[EditDataProvider] Data Parse Error",R)}let m=[];if(T.length>0)m=Object.keys(T[0]),m.includes("ROWID")&&(m=["ROWID",...m.filter(R=>R!=="ROWID")]);else if(l.columns&&l.columns.trim()){let R=l.columns.trim().split(",").map(I=>I.trim()).filter(I=>I);m=R.some(I=>I.toUpperCase()==="ROWID")?R:["ROWID",...R]}else S.length>0&&(m=["ROWID",...S.map(R=>R.ATTNAME)]);console.log("[EditDataProvider] Sending to webview:",{dataRows:T.length,columns:m.length}),e.webview.postMessage({command:"setData",data:T,columns:m,metadata:{tableComment:h,columns:S}})}catch(u){let d=u instanceof Error?u.message:String(u);yt.window.showErrorMessage(`Failed to load data: ${d}`),e.webview.postMessage({command:"setError",text:d})}finally{e.webview.postMessage({command:"setLoading",loading:!1})}}static async _handleSave(e,r,n,i,s,o){let a=[];if(r.deletes&&r.deletes.length>0){let l=r.deletes.join(",");a.push(`DELETE FROM ${n} WHERE ROWID IN (${l})`)}if(r.updates&&r.updates.length>0)for(let l of r.updates){let c=[];for(let[u,d]of Object.entries(l.changes))u!=="ROWID"&&c.push(`${u} = ${this._formatValue(d)}`);c.length>0&&a.push(`UPDATE ${n} SET ${c.join(", ")} WHERE ROWID = ${l.rowId}`)}if(r.inserts&&r.inserts.length>0)for(let l of r.inserts){let c=Object.keys(l).filter(d=>d!=="ROWID");if(c.length===0)continue;let u=c.map(d=>this._formatValue(l[d]));a.push(`INSERT INTO ${n} (${c.join(", ")}) VALUES (${u.join(", ")})`)}if(a.length===0){yt.window.showInformationMessage("No changes to save.");return}try{let l=["BEGIN",...a,"COMMIT"];await Wc(s,l,o),yt.window.showInformationMessage(`Successfully executed ${a.length} changes.`)}catch(l){yt.window.showErrorMessage(`Failed to save changes: ${l instanceof Error?l.message:String(l)}`)}}static _formatValue(e){return e==null||e===""?"NULL":typeof e=="number"?e.toString():typeof e=="boolean"?e?"TRUE":"FALSE":`'${String(e).replace(/'/g,"''")}'`}static _getHtmlForWebview(e,r,n){let i=e.asWebviewUri(yt.Uri.joinPath(r,"media","tanstack-table-core.js")),s=e.asWebviewUri(yt.Uri.joinPath(r,"media","tanstack-virtual-core.js")),o=e.asWebviewUri(yt.Uri.joinPath(r,"media","editDataPanel.js")),a=e.asWebviewUri(yt.Uri.joinPath(r,"media","editDataPanel.css")),l=e.asWebviewUri(yt.Uri.joinPath(r,"media","codicon.ttf")),c=W8();return`<!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <meta http-equiv="Content-Security-Policy" content="default-src 'none'; font-src ${e.cspSource}; style-src ${e.cspSource} 'unsafe-inline'; script-src 'nonce-${c}';">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <link href="${a}" rel="stylesheet">
            <style>
                @font-face {
                    font-family: 'codicon';
                    src: url('${l}') format('truetype');
                }
                .codicon { font-family: 'codicon'; }
            </style>
            <script nonce="${c}" src="${i}"></script>
            <script nonce="${c}" src="${s}"></script>
            <title>Edit Data: ${n}</title>
        </head>
        <body>
            <div class="main-layout">
                <!-- Tabs Header -->
                <div class="tabs-header">
                    <div class="tab active" data-target="tab-data">
                        Data
                    </div>
                    <div class="tab" data-target="tab-metadata">
                        Table Description
                    </div>
                </div>

                <!-- Tab: Data -->
                <div id="tab-data" class="tab-content active">
                    <div class="toolbar">
                        <div class="filter-container">
                            <input type="text" id="filterColumns" class="toolbar-input" placeholder="Columns (e.g. ID, NAME)" title="Columns to select">
                            <input type="text" id="filterWhere" class="toolbar-input" placeholder="WHERE clause (e.g. ID > 100)" title="WHERE filter condition">
                        </div>
                        <span id="status" class="status"></span>
                        <div class="actions">
                            <button id="refreshBtn" title="Apply Filter / Refresh">Refresh</button>
                            <button id="addRowBtn">Add Row</button>
                            <button id="saveBtn" class="primary">Save Changes</button>
                        </div>
                    </div>
                    <div id="gridContainer" class="grid-container"></div>
                </div>

                <!-- Tab: Metadata -->
                <div id="tab-metadata" class="tab-content">
                    <div id="metadataContent" class="metadata-content">
                        <!-- Populated by JS -->
                        Loading metadata...
                    </div>
                </div>
            </div>
            
            <script nonce="${c}" src="${o}"></script>
        </body>
        </html>`}};function W8(){let t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let r=0;r<32;r++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}var gw=q(require("vscode"));function nA(t,e){return e?t.startsWith(`${e}|`):!0}function wn(t){if(!t||typeof t!="object")return;let e=t;if(e.label)return typeof e.label=="string"?e.label:e.label.label}function lE(t){let e={};return t.forEach((r,n)=>{e[n]=r}),e}function mw(t){let e={};return t.forEach((r,n)=>{let i={};r.data.forEach((s,o)=>{i[o]=s}),e[n]={data:i,timestamp:r.timestamp}}),e}function iA(t,e,r){return e?`${t}.${e}.${r}`:`${t}..${r}`}var $8=4,cE=class{constructor(){this.dbCache=new Map;this.schemaCache=new Map;this.tableCache=new Map;this.columnCache=new Map;this.tableIdMap=new Map;this.typeGroupCache=new Map;let r=gw.workspace.getConfiguration("netezza").get("cacheTTL",$8);this.CACHE_TTL=r*60*60*1e3}isEntryValid(e){return Date.now()-e<this.CACHE_TTL}setOnDataChange(e){this.onDataChange=e}clearAll(){this.dbCache.clear(),this.schemaCache.clear(),this.tableCache.clear(),this.columnCache.clear(),this.tableIdMap.clear(),this.typeGroupCache.clear()}getDatabases(e){let r=this.dbCache.get(e);if(r){if(!this.isEntryValid(r.timestamp)){this.dbCache.delete(e);return}return r.data}}setDatabases(e,r){this.dbCache.set(e,{data:r,timestamp:Date.now()}),this.onDataChange?.("db")}getSchemas(e,r){let n=`${e}|${r}`,i=this.schemaCache.get(n);if(i){if(!this.isEntryValid(i.timestamp)){this.schemaCache.delete(n);return}return i.data}}setSchemas(e,r,n){let i=`${e}|${r}`;this.schemaCache.set(i,{data:n,timestamp:Date.now()}),this.onDataChange?.("schema")}getTables(e,r){let n=`${e}|${r}`,i=this.tableCache.get(n);if(i){if(!this.isEntryValid(i.timestamp)){this.tableCache.delete(n),this.tableIdMap.delete(n);return}return i.data}}getTablesAllSchemas(e,r){let n=`${e}|${r}.`,i=[],s=new Set;for(let[o,a]of this.tableCache)if(o.startsWith(n))for(let l of a.data){let c=wn(l);c&&!s.has(c.toUpperCase())&&(s.add(c.toUpperCase()),i.push(l))}return i.length>0?i:void 0}setTables(e,r,n,i){let s=Date.now(),o=`${e}|${r}`;this.tableCache.set(o,{data:n,timestamp:s}),this.tableIdMap.set(o,{data:i,timestamp:s}),this.onDataChange?.("table")}getObjectsWithSchema(e,r){let n=`${e}|${r}.`,i=[],s=new Set;for(let[o,a]of this.tableCache)if(o.startsWith(n)||o===`${e}|${r}..`){let l=o.split("|");if(l.length<2)continue;let u=l[1].split("."),d=(u.length>1?u[1]:"")||"",E=this.tableIdMap.get(o);for(let f of a.data){let p=wn(f),h=`${d}.${p}`;if(p&&!s.has(h)){s.add(h);let S;if(E){let T=iA(r,d||void 0,p);S=E.data.get(T)}i.push({item:f,schema:d,objId:S,owner:f.OWNER,description:f.DESCRIPTION})}}}return i}getColumns(e,r){let n=`${e}|${r}`,i=this.columnCache.get(n);if(i){if(!this.isEntryValid(i.timestamp)){this.columnCache.delete(n);return}return i.data}}setColumns(e,r,n){let i=`${e}|${r}`;this.columnCache.set(i,{data:n,timestamp:Date.now()}),this.onDataChange?.("column")}getColumnsAnySchema(e,r,n){let i=`${e}|${r}.`,s=n.toUpperCase();for(let[o,a]of this.columnCache)if(o.startsWith(i)){let l=o.split(".");if(l.length>=3&&l[l.length-1].toUpperCase()===s&&this.isEntryValid(a.timestamp))return a.data}}findTableId(e,r){let n=`${e}|`;for(let[i,s]of this.tableIdMap)if(i.startsWith(n)){let o=s.data.get(r);if(o!==void 0)return o}}getTypeGroups(e,r){let n=`${e}|${r}`;return this.typeGroupCache.get(n)?.data}setTypeGroups(e,r,n){let i=`${e}|${r}`;this.typeGroupCache.set(i,{data:n,timestamp:Date.now()})}findObjectWithType(e,r,n,i){let s=`${e}|`,o=i.toUpperCase();for(let[a,l]of this.tableCache){if(!a.startsWith(s))continue;let c=a.split("|");if(c.length<2)continue;let d=c[1].split("."),E=d[0],f=d.length>1?d[1]:void 0;if(E.toUpperCase()===r.toUpperCase()&&!(n!=null&&n!==""&&f?.toUpperCase()!==n.toUpperCase()))for(let p of l.data){let h=wn(p);if(h?.toUpperCase()===o){let S=p.objType||(p.kind===18?"VIEW":"TABLE"),T=iA(E,f,h),R=this.tableIdMap.get(a)?.data.get(T);if(R!==void 0)return{objId:R,objType:S,schema:f||"",name:h||i}}}}}invalidateSchema(e,r,n){let i=n?`${r}.${n}`:`${r}..`,s=`${e}|${i}`;this.tableCache.has(s)&&(this.tableCache.delete(s),this.tableIdMap.delete(s),this.onDataChange?.("table"),console.log(`[CacheStorage] Invalidated cache for ${s}`))}getDbCacheMap(){return this.dbCache}getSchemaCacheMap(){return this.schemaCache}getTableCacheMap(){return this.tableCache}getTableIdMapMap(){return this.tableIdMap}loadDbCache(e){this.dbCache=e}loadSchemaCache(e){this.schemaCache=e}loadTableCache(e){this.tableCache=e}loadTableIdMap(e){this.tableIdMap=e}};var jc=q(require("vscode")),Eo=q(require("fs"));var k8=4,uE=class{constructor(e,r){this.context=e;this.storage=r;let i=jc.workspace.getConfiguration("netezza").get("cacheTTL",k8);this.CACHE_TTL=i*60*60*1e3,this.context.storageUri&&(this.cacheFilePath=jc.Uri.joinPath(this.context.storageUri,"schema-cache.json").fsPath,this.ensureStorageDir())}async ensureStorageDir(){if(this.context.storageUri)try{await jc.workspace.fs.createDirectory(this.context.storageUri)}catch{}}async initialize(){try{let e=["sqlCompletion.dbCache","sqlCompletion.schemaCache","sqlCompletion.tableCache","sqlCompletion.columnCache","sqlCompletion.tableIdMap"];for(let r of e)this.context.workspaceState.get(r)!==void 0&&await this.context.workspaceState.update(r,void 0)}catch(e){console.error("[CachePersistence] Error cleaning up legacy workspace state:",e)}if(this.cacheFilePath)try{if(Eo.existsSync(this.cacheFilePath)){let e=await Eo.promises.readFile(this.cacheFilePath,"utf-8"),r=JSON.parse(e),n=Date.now();if(r.dbCache){let i=new Map;for(let[s,o]of Object.entries(r.dbCache))n-o.timestamp<this.CACHE_TTL&&i.set(s,o);this.storage.loadDbCache(i)}if(r.schemaCache){let i=new Map;for(let[s,o]of Object.entries(r.schemaCache))n-o.timestamp<this.CACHE_TTL&&i.set(s,o);this.storage.loadSchemaCache(i)}if(r.tableCache){let i=new Map;for(let[s,o]of Object.entries(r.tableCache))n-o.timestamp<this.CACHE_TTL&&i.set(s,o);this.storage.loadTableCache(i)}if(r.tableIdMap){let i=new Map;for(let[s,o]of Object.entries(r.tableIdMap))(this.storage.getTableCacheMap().has(s)||n-o.timestamp<this.CACHE_TTL)&&i.set(s,{data:new Map(Object.entries(o.data)),timestamp:o.timestamp});this.storage.loadTableIdMap(i)}}}catch(e){console.error("[CachePersistence] Error loading cache from disk:",e)}}scheduleSave(e){this.saveTimeoutId&&clearTimeout(this.saveTimeoutId),this.saveTimeoutId=setTimeout(()=>this.flushSave(),2e3)}async flushSave(){if(this.saveTimeoutId=void 0,!!this.cacheFilePath)try{let e={dbCache:lE(this.storage.getDbCacheMap()),schemaCache:lE(this.storage.getSchemaCacheMap()),tableCache:lE(this.storage.getTableCacheMap()),tableIdMap:mw(this.storage.getTableIdMapMap())};await Eo.promises.writeFile(this.cacheFilePath,JSON.stringify(e),"utf-8")}catch(e){console.error("[CachePersistence] Error saving cache to disk:",e)}}async clearCache(){if(this.saveTimeoutId&&(clearTimeout(this.saveTimeoutId),this.saveTimeoutId=void 0),this.storage.clearAll(),this.cacheFilePath)try{Eo.existsSync(this.cacheFilePath)&&await Eo.promises.unlink(this.cacheFilePath)}catch(e){console.error("[CachePersistence] Error clearing cache file:",e)}}};function ka(t){return!t.columns||!t.data||t.data.length===0?[]:t.data.map(e=>{let r={};return t.columns.forEach((n,i)=>{r[n.name]=e[i]}),r})}var dE=class{constructor(e){this.storage=e;this.columnPrefetchInProgress=new Set;this.allObjectsPrefetchTriggeredSet=new Set;this.connectionPrefetchTriggered=new Set;this.connectionPrefetchInProgress=new Set}async prefetchColumnsForSchema(e,r,n,i){let s=n?`${r}.${n}`:`${r}..`,o=`${e}|${s}`;if(this.columnPrefetchInProgress.has(o))return;let a=this.storage.getTables(e,s);if(!(!a||a.length===0)){this.columnPrefetchInProgress.add(o);try{let l=[];for(let E of a){let f=wn(E);if(!f)continue;let p=`${r}.${n||""}.${f}`;this.storage.getColumns(e,p)||l.push(f)}if(l.length===0)return;let c=`${r}..`,u=n?`AND UPPER(O.SCHEMA) = UPPER('${n}')`:"",d=`
                SELECT 
                    O.OBJNAME AS TABLENAME,
                    C.ATTNAME,
                    C.FORMAT_TYPE,
                    C.ATTNUM,
                    COALESCE(C.DESCRIPTION, '') AS DESCRIPTION,
                    MAX(CASE WHEN K.CONTYPE = 'p' THEN 1 ELSE 0 END) AS IS_PK,
                    MAX(CASE WHEN K.CONTYPE = 'f' THEN 1 ELSE 0 END) AS IS_FK
                FROM ${c}_V_RELATION_COLUMN C
                JOIN ${c}_V_OBJECT_DATA O ON C.OBJID = O.OBJID
                LEFT JOIN ${c}_V_RELATION_KEYDATA K 
                    ON UPPER(K.RELATION) = UPPER(O.OBJNAME) 
                    AND UPPER(K.SCHEMA) = UPPER(O.SCHEMA)
                    AND UPPER(K.ATTNAME) = UPPER(C.ATTNAME)
                    AND K.CONTYPE IN ('p', 'f')
                WHERE UPPER(O.DBNAME) = UPPER('${r}')
                ${u}
                AND O.OBJTYPE IN ('TABLE', 'VIEW', 'EXTERNAL TABLE')
                GROUP BY O.OBJNAME, C.ATTNAME, C.FORMAT_TYPE, C.ATTNUM, C.DESCRIPTION
                ORDER BY O.OBJNAME, C.ATTNUM
            `;try{let E=await i(d);if(E){let f=ka(E),p=new Map;for(let h of f){let S=h.TABLENAME;p.has(S)||p.set(S,[]),p.get(S).push({ATTNAME:h.ATTNAME,FORMAT_TYPE:h.FORMAT_TYPE,label:h.ATTNAME,kind:5,detail:h.FORMAT_TYPE,documentation:h.DESCRIPTION||"",isPk:Number(h.IS_PK)===1,isFk:Number(h.IS_FK)===1})}for(let[h,S]of p){let T=`${r}.${n||""}.${h}`;this.storage.setColumns(e,T,S)}}}catch(E){console.error("[CachePrefetcher] Error fetching columns:",E)}}finally{this.columnPrefetchInProgress.delete(o)}}}async prefetchAllObjects(e,r){let n=`ALL_OBJECTS|${e}`;if(!this.allObjectsPrefetchTriggeredSet.has(n)){this.allObjectsPrefetchTriggeredSet.add(n),console.log(`[CachePrefetcher] Starting background prefetch of all objects (Connection: ${e})`);try{let s=await r(`
                SELECT OBJNAME, OBJID, SCHEMA, DBNAME, OBJTYPE, OWNER, COALESCE(DESCRIPTION, '') AS DESCRIPTION
                FROM _V_OBJECT_DATA 
                WHERE OBJTYPE IN ('TABLE', 'VIEW') 
                ORDER BY DBNAME, SCHEMA, OBJNAME
            `);if(!s)return;let o=ka(s),a=new Map;for(let l of o){let c=l.SCHEMA?`${l.DBNAME}.${l.SCHEMA}`:`${l.DBNAME}..`;a.has(c)||a.set(c,{tables:[],idMap:new Map});let u=a.get(c);u.tables.push({OBJNAME:l.OBJNAME,label:l.OBJNAME,kind:l.OBJTYPE==="VIEW"?18:6,detail:l.SCHEMA?l.OBJTYPE==="VIEW"?"View":"Table":`${l.OBJTYPE==="VIEW"?"View":"Table"} (${l.SCHEMA})`,objType:l.OBJTYPE,OBJID:l.OBJID,SCHEMA:l.SCHEMA,OWNER:l.OWNER,DESCRIPTION:l.DESCRIPTION});let d=l.SCHEMA?`${l.DBNAME}.${l.SCHEMA}.${l.OBJNAME}`:`${l.DBNAME}..${l.OBJNAME}`;u.idMap.set(d,l.OBJID)}for(let[l,c]of a)this.storage.setTables(e,l,c.tables,c.idMap);console.log(`[CachePrefetcher] Prefetched tables for ${a.size} schema(s) on ${e}`)}catch(i){console.error("[CachePrefetcher] Error in prefetchAllObjects:",i)}}}hasAllObjectsPrefetchTriggered(e){return this.allObjectsPrefetchTriggeredSet.has(`ALL_OBJECTS|${e}`)}hasConnectionPrefetchTriggered(e){return this.connectionPrefetchTriggered.has(e)}triggerConnectionPrefetch(e,r){this.connectionPrefetchTriggered.has(e)||this.connectionPrefetchInProgress.has(e)||(this.connectionPrefetchInProgress.add(e),console.log(`[CachePrefetcher] Starting eager prefetch for connection: ${e}`),this.executeConnectionPrefetch(e,r).catch(n=>console.error("[CachePrefetcher] Connection prefetch error:",n)).finally(()=>{this.connectionPrefetchInProgress.delete(e),this.connectionPrefetchTriggered.add(e),console.log(`[CachePrefetcher] Completed eager prefetch for connection: ${e}`)}))}async executeConnectionPrefetch(e,r){let n=await this.prefetchDatabases(e,r);!n||n.length===0||(await Promise.all(n.map(i=>this.prefetchSchemasForDb(e,i,r))),await this.prefetchAllTablesAndViews(e,r),await this.prefetchAllColumnsForConnection(e,r))}async prefetchDatabases(e,r){if(this.storage.getDatabases(e))return this.storage.getDatabases(e)?.map(i=>wn(i)).filter(Boolean)||[];try{let i=await r("SELECT DATABASE FROM system.._v_database ORDER BY DATABASE");if(!i)return[];let s=ka(i),o=s.map(a=>({DATABASE:a.DATABASE,label:a.DATABASE,kind:9,detail:"Database"}));return this.storage.setDatabases(e,o),s.map(a=>a.DATABASE)}catch(n){return console.error("[CachePrefetcher] prefetchDatabases error:",n),[]}}async prefetchSchemasForDb(e,r,n){if(!this.storage.getSchemas(e,r))try{let i=`SELECT SCHEMA FROM ${r}.._V_SCHEMA ORDER BY SCHEMA`,s=await n(i);if(!s)return;let a=ka(s).filter(l=>l.SCHEMA!=null&&l.SCHEMA!=="").map(l=>({SCHEMA:l.SCHEMA,label:l.SCHEMA,kind:19,detail:`Schema in ${r}`,insertText:l.SCHEMA,sortText:l.SCHEMA,filterText:l.SCHEMA}));this.storage.setSchemas(e,r,a)}catch(i){console.error(`[CachePrefetcher] prefetchSchemasForDb error for ${r}:`,i)}}async prefetchAllTablesAndViews(e,r){try{let i=await r(`
                SELECT OBJNAME, OBJID, SCHEMA, DBNAME, OBJTYPE, OWNER, COALESCE(DESCRIPTION, '') AS DESCRIPTION
                FROM _V_OBJECT_DATA 
                WHERE OBJTYPE IN ('TABLE', 'VIEW', 'EXTERNAL TABLE')
                ORDER BY DBNAME, SCHEMA, OBJNAME
            `);if(!i)return;let s=ka(i),o=new Map;for(let a of s){let l=a.SCHEMA?`${a.DBNAME}.${a.SCHEMA}`:`${a.DBNAME}..`;o.has(l)||o.set(l,{tables:[],idMap:new Map});let c=o.get(l);c.tables.push({OBJNAME:a.OBJNAME,label:a.OBJNAME,kind:a.OBJTYPE==="VIEW"?18:6,detail:a.SCHEMA?a.OBJTYPE:`${a.OBJTYPE} (${a.SCHEMA})`,objType:a.OBJTYPE,OWNER:a.OWNER,DESCRIPTION:a.DESCRIPTION});let u=a.SCHEMA?`${a.DBNAME}.${a.SCHEMA}.${a.OBJNAME}`:`${a.DBNAME}..${a.OBJNAME}`;c.idMap.set(u,a.OBJID)}for(let[a,l]of o)this.storage.getTables(e,a)||this.storage.setTables(e,a,l.tables,l.idMap);console.log(`[CachePrefetcher] Prefetched tables/views for ${o.size} schema(s)`)}catch(n){console.error("[CachePrefetcher] prefetchAllTablesAndViews error:",n)}}async prefetchAllColumnsForConnection(e,r){try{let n=`${e}|`,i=[];for(let[u,d]of this.storage.tableCache){if(!u.startsWith(n))continue;let E=u.split("|");if(E.length<2)continue;let p=E[1].split("."),h=p[0],S=p.length>1?p[1]:"";for(let T of d.data){let m=wn(T);m&&i.push({schema:S,name:m,db:h})}}if(i.length===0)return;let s=0,o=Date.now(),a=new Map;for(let u of i)a.has(u.db)||a.set(u.db,[]),a.get(u.db).push(u);let l=Array.from(a.entries()).map(async([u,d])=>{let E=`
                    SELECT 
                        O.OBJNAME AS TABLENAME, 
                        O.SCHEMA, 
                        O.DBNAME, 
                        C.ATTNAME, 
                        C.FORMAT_TYPE, 
                        C.ATTNUM,
                        COALESCE(C.DESCRIPTION, '') AS DESCRIPTION,
                        MAX(CASE WHEN K.CONTYPE = 'p' THEN 1 ELSE 0 END) AS IS_PK,
                        MAX(CASE WHEN K.CONTYPE = 'f' THEN 1 ELSE 0 END) AS IS_FK
                    FROM ${u}.._V_RELATION_COLUMN C
                    JOIN ${u}.._V_OBJECT_DATA O ON C.OBJID = O.OBJID
                    LEFT JOIN ${u}.._V_RELATION_KEYDATA K 
                        ON UPPER(K.RELATION) = UPPER(O.OBJNAME) 
                        AND UPPER(K.SCHEMA) = UPPER(O.SCHEMA)
                        AND UPPER(K.ATTNAME) = UPPER(C.ATTNAME)
                        AND K.CONTYPE IN ('p', 'f')
                    WHERE O.DBNAME = '${u}' 
                    AND O.OBJTYPE IN ('TABLE', 'VIEW', 'EXTERNAL TABLE')
                    GROUP BY O.OBJNAME, O.SCHEMA, O.DBNAME, C.ATTNAME, C.FORMAT_TYPE, C.ATTNUM, C.DESCRIPTION
                    ORDER BY O.SCHEMA, O.OBJNAME, C.ATTNUM
                `;try{let f=Date.now(),p=await r(E),h=Date.now()-f;if(p){let S=Date.now(),T=ka(p),m=Date.now()-S,R=new Map;for(let A of T){let I=`${A.DBNAME}.${A.SCHEMA||""}.${A.TABLENAME}`;R.has(I)||R.set(I,[]),R.get(I).push({ATTNAME:A.ATTNAME,FORMAT_TYPE:A.FORMAT_TYPE,label:A.ATTNAME,kind:5,detail:A.FORMAT_TYPE,documentation:A.DESCRIPTION||"",isPk:Number(A.IS_PK)===1,isFk:Number(A.IS_FK)===1})}for(let[A,I]of R)this.storage.getColumns(e,A)||(this.storage.setColumns(e,A,I),s++);console.log(`[CachePrefetcher] DB ${u}: ${d.length} tables (expected), ${T.length} columns (total fetched) | query=${h}ms, parse=${m}ms`)}}catch(f){console.error(`[CachePrefetcher] Error fetching columns for DB ${u}:`,f)}});await Promise.all(l);let c=Date.now()-o;console.log(`[CachePrefetcher] Prefetched columns for ${s} tables/views in ${c}ms`)}catch(n){console.error("[CachePrefetcher] prefetchAllColumnsForConnection error:",n)}}};function _w(t,e,r){let n=[],i=e.toLowerCase();for(let[s,o]of t.tableCache){if(!nA(s,r))continue;let a=s.split("|");if(a.length<2)continue;let c=a[1].split("."),u=c[0],d=c.length>1?c[1]:void 0;for(let E of o.data){let f=wn(E);if(f&&f.toLowerCase().includes(i)){let p=E.objType||(E.kind===18?"VIEW":"TABLE");n.push({name:f,type:p,database:u,schema:d||(E.detail&&E.detail.includes("(")?E.detail.match(/\((.*?)\)/)?.[1]:void 0)})}}}for(let[s,o]of t.columnCache){if(!nA(s,r))continue;let a=s.split("|");if(a.length<2)continue;let c=a[1].split("."),u=c[0],d=c[1],E=c[2];for(let f of o.data){let p=wn(f);p&&p.toLowerCase().includes(i)&&n.push({name:p,type:"COLUMN",database:u,schema:d,parent:E})}}return n}var fE=class{constructor(e){this.storage=new cE,this.persistence=new uE(e,this.storage),this.prefetcher=new dE(this.storage),this.storage.setOnDataChange(r=>{this.persistence.scheduleSave(r)})}async initialize(){return this.persistence.initialize()}scheduleSave(e){this.persistence.scheduleSave(e)}async flushSave(){return this.persistence.flushSave()}async clearCache(){return this.persistence.clearCache()}getDatabases(e){return this.storage.getDatabases(e)}setDatabases(e,r){this.storage.setDatabases(e,r)}getSchemas(e,r){return this.storage.getSchemas(e,r)}setSchemas(e,r,n){this.storage.setSchemas(e,r,n)}getTables(e,r){return this.storage.getTables(e,r)}getTablesAllSchemas(e,r){return this.storage.getTablesAllSchemas(e,r)}setTables(e,r,n,i){this.storage.setTables(e,r,n,i)}getObjectsWithSchema(e,r){return this.storage.getObjectsWithSchema(e,r)}getColumns(e,r){return this.storage.getColumns(e,r)}getColumnsAnySchema(e,r,n){return this.storage.getColumnsAnySchema(e,r,n)}setColumns(e,r,n){this.storage.setColumns(e,r,n)}findTableId(e,r){return this.storage.findTableId(e,r)}getTypeGroups(e,r){return this.storage.getTypeGroups(e,r)}setTypeGroups(e,r,n){this.storage.setTypeGroups(e,r,n)}findObjectWithType(e,r,n,i){return this.storage.findObjectWithType(e,r,n,i)}invalidateSchema(e,r,n){this.storage.invalidateSchema(e,r,n)}search(e,r){return _w(this.storage,e,r)}async prefetchColumnsForSchema(e,r,n,i){return this.prefetcher.prefetchColumnsForSchema(e,r,n,i)}async prefetchAllObjects(e,r){return this.prefetcher.prefetchAllObjects(e,r)}hasAllObjectsPrefetchTriggered(e){return this.prefetcher.hasAllObjectsPrefetchTriggered(e)}hasConnectionPrefetchTriggered(e){return this.prefetcher.hasConnectionPrefetchTriggered(e)}triggerConnectionPrefetch(e,r){this.prefetcher.triggerConnectionPrefetch(e,r)}get schemaCache(){return this.storage.schemaCache}get tableCache(){return this.storage.tableCache}get columnCache(){return this.storage.columnCache}get tableIdMap(){return this.storage.tableIdMap}get typeGroupCache(){return this.storage.typeGroupCache}};var Jr=q(require("vscode"));var dr=q(require("vscode"));function Iw(t){switch(t){case"error":return dr.DiagnosticSeverity.Error;case"warning":return dr.DiagnosticSeverity.Warning;case"information":return dr.DiagnosticSeverity.Information;case"hint":return dr.DiagnosticSeverity.Hint;case"off":return null;default:return dr.DiagnosticSeverity.Warning}}function sA(t,e){let r=!1,n=!1,i=!1,s=!1;for(let o=0;o<e&&o<t.length;o++){let a=t[o],l=o+1<t.length?t[o+1]:"";i?a===`
`&&(i=!1):s?a==="*"&&l==="/"&&(s=!1,o++):r?a==="'"&&(r=!1):n?a==='"'&&(n=!1):a==="-"&&l==="-"?i=!0:a==="/"&&l==="*"?s=!0:a==="'"?r=!0:a==='"'&&(n=!0)}return r||n||i||s}function fn(t,e){let r=[],n,i=new RegExp(e.source,e.flags.includes("g")?e.flags:e.flags+"g");for(;(n=i.exec(t))!==null;)sA(t,n.index)||r.push(n);return r}var Y8={id:"NZ001",name:"Select Star",description:"Avoid using SELECT * - specify explicit column names for better performance and maintainability",defaultSeverity:dr.DiagnosticSeverity.Warning,check(t){let e=[],n=fn(t,/\bSELECT\s+\*/gi);for(let i of n){let s=i[0].indexOf("*");e.push({ruleId:this.id,message:`${this.id}: ${this.description}`,severity:this.defaultSeverity,startOffset:i.index+s,endOffset:i.index+s+1})}return e}},V8={id:"NZ002",name:"Delete Without Where",description:"DELETE statement without WHERE clause will delete all rows",defaultSeverity:dr.DiagnosticSeverity.Error,check(t){let e=[],n=fn(t,/\bDELETE\s+FROM\s+[\w."]+/gi);for(let i of n){let s=t.substring(i.index+i[0].length),o=s.indexOf(";"),a=o>=0?s.substring(0,o):s;/\bWHERE\b/i.test(a)||e.push({ruleId:this.id,message:`${this.id}: ${this.description}`,severity:this.defaultSeverity,startOffset:i.index,endOffset:i.index+6})}return e}},q8={id:"NZ003",name:"Update Without Where",description:"UPDATE statement without WHERE clause will update all rows",defaultSeverity:dr.DiagnosticSeverity.Error,check(t){let e=[],n=fn(t,/\bUPDATE\s+[\w."]+\s+SET\b/gi);for(let i of n){let s=t.substring(i.index+i[0].length),o=s.indexOf(";"),a=o>=0?s.substring(0,o):s;/\bWHERE\b/i.test(a)||e.push({ruleId:this.id,message:`${this.id}: ${this.description}`,severity:this.defaultSeverity,startOffset:i.index,endOffset:i.index+6})}return e}},X8={id:"NZ004",name:"Cross Join",description:"CROSS JOIN produces a Cartesian product - verify this is intentional",defaultSeverity:dr.DiagnosticSeverity.Warning,check(t){let e=[],n=fn(t,/\bCROSS\s+JOIN\b/gi);for(let i of n)e.push({ruleId:this.id,message:`${this.id}: ${this.description}`,severity:this.defaultSeverity,startOffset:i.index,endOffset:i.index+i[0].length});return e}},j8={id:"NZ005",name:"Leading Wildcard Like",description:"LIKE pattern with leading wildcard ('%...') prevents index usage",defaultSeverity:dr.DiagnosticSeverity.Hint,check(t){let e=[],n=fn(t,/\bLIKE\s+'%/gi);for(let i of n)e.push({ruleId:this.id,message:`${this.id}: ${this.description}`,severity:this.defaultSeverity,startOffset:i.index,endOffset:i.index+i[0].length});return e}},z8={id:"NZ006",name:"Order By Without Limit",description:"ORDER BY without LIMIT/FETCH may cause performance issues on large datasets",defaultSeverity:dr.DiagnosticSeverity.Information,check(t){let e=[],n=fn(t,/\bORDER\s+BY\b/gi);for(let i of n){let s=t.substring(i.index+i[0].length),o=s.indexOf(";"),a=o>=0?s.substring(0,o):s;if(!/\b(LIMIT|FETCH|TOP)\b/i.test(a)){let l=t.substring(0,i.index);/\bTOP\s+\d+\b/i.test(l)||e.push({ruleId:this.id,message:`${this.id}: ${this.description}`,severity:this.defaultSeverity,startOffset:i.index,endOffset:i.index+i[0].length})}}return e}},K8={id:"NZ007",name:"Inconsistent Keyword Case",description:"SQL keywords have inconsistent casing - consider using consistent UPPER or lower case",defaultSeverity:dr.DiagnosticSeverity.Warning,check(t){let e=[],r=["SELECT","FROM","WHERE","JOIN","LEFT","RIGHT","INNER","OUTER","ON","AND","OR","INSERT","INTO","UPDATE","DELETE","CREATE","DROP","ALTER","TABLE","VIEW","INDEX","ORDER","BY","GROUP","HAVING","UNION","ALL","DISTINCT","AS","SET","VALUES","NULL","NOT","IN","BETWEEN","LIKE","IS","EXISTS","CASE","WHEN","THEN","ELSE","END","LIMIT","OFFSET"],n=0,i=0,s=[],o=new Set;for(let c of r){let u=new RegExp(`\\b${c}\\b`,"gi"),d=fn(t,u);for(let E of d){if(o.has(E.index))continue;o.add(E.index);let f=E[0],p;f===f.toUpperCase()?(n++,p="UPPER"):f===f.toLowerCase()?(i++,p="lower"):p="Mixed",s.push({keyword:f,index:E.index,type:p})}}let a=n>=i,l=a?"UPPER":"lower";for(let c of s)c.type==="Mixed"?e.push({ruleId:this.id,message:`${this.id}: Keyword '${c.keyword}' has mixed casing (expected ${a?"UPPERCASE":"lowercase"})`,severity:this.defaultSeverity,startOffset:c.index,endOffset:c.index+c.keyword.length}):c.type!==l&&e.push({ruleId:this.id,message:`${this.id}: Keyword '${c.keyword}' should be ${a?"UPPERCASE":"lowercase"}`,severity:this.defaultSeverity,startOffset:c.index,endOffset:c.index+c.keyword.length});return e}},J8={id:"NZ008",name:"Truncate Table",description:"TRUNCATE removes all data and cannot be rolled back - use with caution",defaultSeverity:dr.DiagnosticSeverity.Warning,check(t){let e=[],n=fn(t,/\bTRUNCATE\s+(TABLE\s+)?[\w."]+/gi);for(let i of n)e.push({ruleId:this.id,message:`${this.id}: ${this.description}`,severity:this.defaultSeverity,startOffset:i.index,endOffset:i.index+8});return e}},Q8={id:"NZ009",name:"Or In Where Clause",description:"Multiple OR conditions may prevent index usage - consider UNION for better performance",defaultSeverity:dr.DiagnosticSeverity.Hint,check(t){let e=[],n=fn(t,/\bWHERE\b/gi);for(let i of n){let s=t.substring(i.index),o=s.search(/\b(GROUP\s+BY|ORDER\s+BY|HAVING|LIMIT|UNION|;)/i),a=o>=0?s.substring(0,o):s,l=fn(a,/\bOR\b/gi);if(l.length>=2){let c=l[0];e.push({ruleId:this.id,message:`${this.id}: ${this.description} (${l.length} OR conditions found)`,severity:this.defaultSeverity,startOffset:i.index+c.index,endOffset:i.index+c.index+2})}}return e}},Z8={id:"NZ010",name:"Missing Table Alias",description:"Consider using table aliases in JOINs for better readability",defaultSeverity:dr.DiagnosticSeverity.Information,check(t){let e=[],n=fn(t,/\bJOIN\s+([\w."]+)\s+ON\b/gi);for(let i of n)e.push({ruleId:this.id,message:`${this.id}: Table '${i[1]}' in JOIN has no alias - ${this.description}`,severity:this.defaultSeverity,startOffset:i.index,endOffset:i.index+i[0].length});return e}},eJ={id:"NZ011",name:"CTAS Missing Distribution",description:"CREATE TABLE AS SELECT should specify explicit data distribution",defaultSeverity:dr.DiagnosticSeverity.Warning,check(t){let e=[],n=fn(t,/\bCREATE\s+TABLE\s+(?:(?:IF\s+NOT\s+EXISTS\s+)?[\w."]+\s+)?AS\s+(?:\(\s*)?SELECT\b/gi);for(let i of n){let s=t.length;for(let u=i.index;u<t.length;u++)if(t[u]===";"&&!sA(t,u)){s=u;break}let o=t.substring(i.index,s),l=/\bDISTRIBUTE\s+ON\b/i.exec(o),c=!1;l&&(sA(t,i.index+l.index)||(c=!0)),c||e.push({ruleId:this.id,message:`${this.id}: ${this.description} - Add 'DISTRIBUTE ON (...)' or 'DISTRIBUTE ON RANDOM'`,severity:this.defaultSeverity,startOffset:i.index,endOffset:i.index+i[0].length})}return e}},Nw=[Y8,V8,q8,X8,j8,z8,K8,J8,Q8,Z8,eJ];var aA=class{constructor(){this.disposables=[];this.diagnosticCollection=Jr.languages.createDiagnosticCollection("netezza-sql-linter")}activate(e){e.subscriptions.push(this.diagnosticCollection),this.disposables.push(Jr.workspace.onDidOpenTextDocument(r=>{this.shouldLint(r)&&this.lintDocument(r)})),this.disposables.push(Jr.workspace.onDidChangeTextDocument(r=>{this.shouldLint(r.document)&&this.lintDocument(r.document)})),this.disposables.push(Jr.workspace.onDidCloseTextDocument(r=>{this.diagnosticCollection.delete(r.uri)})),this.disposables.push(Jr.workspace.onDidChangeConfiguration(r=>{r.affectsConfiguration("netezza.linter")&&this.lintAllOpenDocuments()})),e.subscriptions.push(...this.disposables),this.lintAllOpenDocuments()}shouldLint(e){return e.languageId==="sql"}getConfig(){let e=Jr.workspace.getConfiguration("netezza.linter");return{enabled:e.get("enabled",!0),rules:e.get("rules",{})}}lintAllOpenDocuments(){for(let e of Jr.workspace.textDocuments)this.shouldLint(e)&&this.lintDocument(e)}lintDocument(e){let r=this.getConfig();if(!r.enabled){this.diagnosticCollection.delete(e.uri);return}let n=e.getText(),i=this.lintSql(n,r.rules),s=this.issuesToDiagnostics(e,i);this.diagnosticCollection.set(e.uri,s)}lintSql(e,r={}){let n=[];for(let i of Nw){let s=r[i.id],o=s!==void 0?Iw(s):i.defaultSeverity;if(o===null)continue;let a=i.check(e);for(let l of a)n.push({...l,severity:o})}return n}issuesToDiagnostics(e,r){return r.map(n=>{let i=e.positionAt(n.startOffset),s=e.positionAt(n.endOffset),o=new Jr.Range(i,s),a=new Jr.Diagnostic(o,n.message,n.severity);return a.source="Netezza SQL Linter",a.code=n.ruleId,a})}dispose(){this.diagnosticCollection.dispose();for(let e of this.disposables)e.dispose()}},oA;function tJ(){return oA||(oA=new aA),oA}function Ow(t){let e=tJ();return e.activate(t),e}var ho=q(require("vscode"));fo();var zc=class{static{this.providedCodeActionKinds=[ho.CodeActionKind.QuickFix]}provideCodeActions(e,r,n,i){let s=[];for(let o of n.diagnostics)if(o.code==="NZ011"){let a=this.createDistributeOnRandomFix(e,o);a&&s.push(a)}return s}createDistributeOnRandomFix(e,r){let n=new ho.CodeAction("Add DISTRIBUTE ON RANDOM",ho.CodeActionKind.QuickFix);n.diagnostics=[r],n.isPreferred=!0;let i=e.offsetAt(r.range.start),s=e.getText(),o=Ur.getStatementAtPosition(s,i);if(o)return n.edit=new ho.WorkspaceEdit,n.edit.insert(e.uri,e.positionAt(o.end)," DISTRIBUTE ON RANDOM"),n}};var Be=q(require("vscode"));function Cw(t){switch(t){case"sql":return{type:"sql",query:"",connection:"default"};case"python":return{type:"python",script:""};case"container":return{type:"container",nodes:[],connections:[]};case"export":return{type:"export",format:"csv",outputPath:""};case"import":return{type:"import",format:"csv",inputPath:"",targetTable:""};case"variable":return{type:"variable",variableName:"",source:"prompt",promptMessage:"Enter value"}}}function EE(){return"node-"+Date.now()+"-"+Math.random().toString(36).substr(2,9)}function hE(){return"conn-"+Date.now()+"-"+Math.random().toString(36).substr(2,9)}var lA=q(require("fs"));var Kc=class{validateProject(e){let r=[],n=[];e.name||r.push("Project name is required"),e.version||r.push("Project version is required"),Array.isArray(e.nodes)||r.push("Nodes must be an array"),Array.isArray(e.connections)||r.push("Connections must be an array");let i=this.validateNodes(e.nodes||[]);r.push(...i.errors),n.push(...i.warnings);let s=new Set((e.nodes||[]).map(l=>l.id)),o=this.validateConnections(e.connections||[],s);r.push(...o.errors),n.push(...o.warnings);let a=this.detectCycles(e);return r.push(...a),{isValid:r.length===0,errors:r,warnings:n}}validateNodes(e){let r=[],n=[],i=new Set;for(let s of e){if(!s.id){r.push("Node missing ID");continue}i.has(s.id)?r.push(`Duplicate node ID: ${s.id}`):i.add(s.id),s.type||r.push(`Node ${s.id} missing type`),s.name||n.push(`Node ${s.id} has no name`),(!s.position||typeof s.position.x!="number"||typeof s.position.y!="number")&&r.push(`Node ${s.id} has invalid position`),s.config||r.push(`Node ${s.id} has no configuration`)}return{errors:r,warnings:n}}validateConnections(e,r){let n=[],i=[],s=new Set;for(let o of e){if(!o.id){n.push("Connection missing ID");continue}(!o.from||!r.has(o.from))&&n.push(`Connection ${o.id} has invalid 'from' node: ${o.from}`),(!o.to||!r.has(o.to))&&n.push(`Connection ${o.id} has invalid 'to' node: ${o.to}`),o.from===o.to&&n.push(`Connection ${o.id} cannot connect node to itself`);let a=`${o.from}->${o.to}`;s.has(a)?i.push(`Duplicate connection from ${o.from} to ${o.to}`):s.add(a)}return{errors:n,warnings:i}}detectCycles(e){let r=[],n=new Set,i=new Set,s=new Map;for(let a of e.nodes||[])s.set(a.id,[]);for(let a of e.connections||[])s.get(a.from)?.push(a.to);let o=a=>{n.add(a),i.add(a);for(let l of s.get(a)||[])if(n.has(l)){if(i.has(l))return!0}else if(o(l))return!0;return i.delete(a),!1};for(let a of e.nodes||[])if(!n.has(a.id)&&o(a.id)){r.push("Project contains circular dependencies");break}return r}getTopologicalOrder(e){let r=new Map,n=new Map;for(let o of e.nodes)r.set(o.id,0),n.set(o.id,[]);for(let o of e.connections)n.get(o.from)?.push(o.to),r.set(o.to,(r.get(o.to)||0)+1);let i=[];for(let[o,a]of r)a===0&&i.push(o);let s=[];for(;i.length>0;){let o=i.shift();s.push(o);for(let a of n.get(o)||[]){let l=(r.get(a)||1)-1;r.set(a,l),l===0&&i.push(a)}}return s.length!==e.nodes.length?null:s}},FDe=new Kc;var Os=class t{constructor(e){this.currentProject=null;this.projectPath=null;this.isDirty=!1;this.validator=e||new Kc}static getInstance(){return t.instance||(t.instance=new t),t.instance}static resetInstance(){t.instance=void 0}createProject(e){return this.currentProject={name:e,version:"1.0.0",description:"",variables:{},nodes:[],connections:[]},this.projectPath=null,this.isDirty=!0,this.currentProject}async loadProject(e){let r=await lA.promises.readFile(e,"utf-8"),n=JSON.parse(r),i=this.validateProject(n);if(i.length>0)throw new Error(`Invalid project: ${i.join(", ")}`);return this.currentProject=n,this.projectPath=e,this.isDirty=!1,this.currentProject}async saveProject(e){let r=e||this.projectPath;if(!r)throw new Error("No file path specified");if(!this.currentProject)throw new Error("No project to save");let n=JSON.stringify(this.currentProject,null,2);await lA.promises.writeFile(r,n,"utf-8"),this.projectPath=r,this.isDirty=!1}validateProject(e){return this.validator.validateProject(e).errors}validateProjectDetailed(e){return this.validator.validateProject(e)}addNode(e){if(!this.currentProject)throw new Error("No project loaded");e.id||(e.id=EE()),this.currentProject.nodes.push(e),this.isDirty=!0}updateNode(e,r){if(!this.currentProject)throw new Error("No project loaded");let n=this.currentProject.nodes.findIndex(i=>i.id===e);if(n===-1)throw new Error(`Node not found: ${e}`);this.currentProject.nodes[n]={...this.currentProject.nodes[n],...r},this.isDirty=!0}removeNode(e){if(!this.currentProject)throw new Error("No project loaded");this.currentProject.nodes=this.currentProject.nodes.filter(r=>r.id!==e),this.currentProject.connections=this.currentProject.connections.filter(r=>r.from!==e&&r.to!==e),this.isDirty=!0}addConnection(e){if(!this.currentProject)throw new Error("No project loaded");if(e.id||(e.id=hE()),this.currentProject.connections.some(i=>i.from===e.from&&i.to===e.to))throw new Error("Connection already exists");if(this.currentProject.connections.push(e),this.validator.detectCycles(this.currentProject).length>0)throw this.currentProject.connections.pop(),new Error("Connection would create a cycle");this.isDirty=!0}removeConnection(e){if(!this.currentProject)throw new Error("No project loaded");this.currentProject.connections=this.currentProject.connections.filter(r=>r.id!==e),this.isDirty=!0}getCurrentProject(){return this.currentProject}getProjectPath(){return this.projectPath}hasUnsavedChanges(){return this.isDirty}getNode(e){return this.currentProject?.nodes.find(r=>r.id===e)}getOutgoingConnections(e){return this.currentProject?.connections.filter(r=>r.from===e)||[]}getIncomingConnections(e){return this.currentProject?.connections.filter(r=>r.to===e)||[]}setProject(e){this.currentProject=e,this.isDirty=!0}markDirty(){this.isDirty=!0}getTopologicalOrder(){return this.currentProject?this.validator.getTopologicalOrder(this.currentProject):null}};function bw(t,e,r){return{nodeId:t,status:"success",startTime:e,endTime:new Date,output:r?.output,rowsAffected:r?.rowsAffected}}function yw(t,e,r){return{nodeId:t,status:"error",startTime:e,endTime:new Date,error:r instanceof Error?r.message:r}}function TE(t){let e=new Date;return{nodeId:t,status:"skipped",startTime:e,endTime:e}}var pE=class{constructor(e){this.startTime=new Date,this.result={nodeId:e,startTime:this.startTime}}success(){return this.result.status="success",this}error(e){return this.result.status="error",this.result.error=e instanceof Error?e.message:e,this}skipped(){return this.result.status="skipped",this}withOutput(e){return this.result.output=e,this}withRowsAffected(e){return this.result.rowsAffected=e,this}build(){return{nodeId:this.result.nodeId,status:this.result.status||"pending",startTime:this.startTime,endTime:new Date,error:this.result.error,output:this.result.output,rowsAffected:this.result.rowsAffected}}};var SE=class{constructor(){this.executors=new Map}registerExecutor(e,r){this.executors.set(e,r)}getExecutor(e){return this.executors.get(e)}onStatusChange(e){this.statusCallback=e}async execute(e,r){let n={projectName:e.name,startTime:new Date,status:"running",nodeResults:new Map};for(let i of e.nodes)this.statusCallback?.(i.id,"pending");try{r.onProgress?.(`Starting ETL project: ${e.name}`),r.onProgress?.(`Found ${e.nodes.length} tasks`),await this.executeDynamic(e,r,n);let i=Array.from(n.nodeResults.values()).some(o=>o.status==="error");n.status=i?"failed":"completed",n.endTime=new Date;let s=n.status==="completed"?"completed successfully":"completed with errors";r.onProgress?.(`ETL project ${s}`)}catch(i){n.status="failed",n.endTime=new Date,r.onProgress?.(`ETL project failed: ${String(i)}`)}return n}async executeDynamic(e,r,n){let i=new Set,s=[],o=new Set(e.connections.map(a=>a.to));for(let a of e.nodes)o.has(a.id)||s.push(a.id);for(;s.length>0;){if(r.cancellationToken?.isCancellationRequested){n.status="cancelled",n.endTime=new Date;for(let d of e.nodes)i.has(d.id)||(n.nodeResults.set(d.id,TE(d.id)),this.statusCallback?.(d.id,"skipped"));return}let a=s.shift();if(i.has(a))continue;let l=e.nodes.find(d=>d.id===a);if(!l)continue;let c=await this.executeNode(l,r);n.nodeResults.set(a,c),i.add(a),c.output!==void 0&&r.nodeOutputs.set(a,c.output);let u=e.connections.filter(d=>d.from===a);for(let d of u){let E=d.connectionType||"success";c.status==="success"&&E==="success"||c.status==="error"&&E==="failure"?!i.has(d.to)&&!s.includes(d.to)&&s.push(d.to):i.has(d.to)||!e.connections.some(h=>{if(h.to!==d.to||h.id===d.id)return!1;let S=n.nodeResults.get(h.from);if(!S)return!0;let T=h.connectionType||"success";return S.status==="success"&&T==="success"||S.status==="error"&&T==="failure"})&&!s.includes(d.to)&&(n.nodeResults.set(d.to,TE(d.to)),this.statusCallback?.(d.to,"skipped"),i.add(d.to))}}for(let a of e.nodes)i.has(a.id)||(n.nodeResults.set(a.id,TE(a.id)),this.statusCallback?.(a.id,"skipped"))}async executeNode(e,r){this.statusCallback?.(e.id,"running"),r.onProgress?.(`Running task: ${e.name}`);let n=this.executors.get(e.type);if(!n){let i={nodeId:e.id,status:"error",startTime:new Date,endTime:new Date,error:`No executor registered for node type: ${e.type}`};return this.statusCallback?.(e.id,"error",i.error),i}try{let i=await n.execute(e,r);return this.statusCallback?.(e.id,i.status,i.error),i.status==="success"&&(r.onProgress?.(`Task ${e.name} completed successfully`),i.rowsAffected!==void 0&&r.onProgress?.(`  Rows affected: ${i.rowsAffected}`)),i}catch(i){let s={nodeId:e.id,status:"error",startTime:new Date,endTime:new Date,error:String(i)};return this.statusCallback?.(e.id,"error",s.error),s}}getPreviousNodeOutput(e,r){return e.nodeOutputs.get(r)}};var Jc=class{resolve(e,r){if(!e||!r||Object.keys(r).length===0)return e;let n=e;for(let[i,s]of Object.entries(r)){let o=new RegExp(`\\$\\{${this.escapeRegex(i)}\\}`,"g");n=n.replace(o,s)}return n}resolveAll(e,r){return e.map(n=>this.resolve(n,r))}escapeRegex(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}},KDe=new Jc;var jr=class{constructor(e){this.variableResolver=e||new Jc}getConfig(e){return e.config}resolveVariables(e,r){return this.variableResolver.resolve(e,r.variables)}createSuccess(e,r,n){return bw(e,r,n)}createError(e,r,n){return yw(e,r,n)}resultBuilder(e){return new pE(e)}reportProgress(e,r){e.onProgress?.(r)}isCancelled(e){return e.cancellationToken?.isCancellationRequested??!1}validateRequired(e,r,n,i){if(n==null||n==="")return this.createError(e,r,`${i} is required`)}async safeExecute(e,r,n){try{return await n()}catch(i){return this.createError(e,r,i instanceof Error?i:String(i))}}};var cA=class{async createConnection(e){let r=Ir(),n=new r({host:e.host,port:e.port||5480,database:e.database,user:e.user,password:e.password});return await n.connect(),n}},RE=class extends jr{constructor(e,r){super(e),this.connectionFactory=r||new cA}async execute(e,r){let n=this.getConfig(e),i=new Date,s=this.validateRequired(e.id,i,n.query?.trim(),"SQL query");return s||this.safeExecute(e.id,i,async()=>{let o=this.resolveVariables(n.query,r);if(this.reportProgress(r,`Executing SQL: ${o.substring(0,100)}${o.length>100?"...":""}`),!r.connectionDetails)return this.createError(e.id,i,"No connection details available in context");let a=null;try{a=await this.connectionFactory.createConnection(r.connectionDetails);let l=await this.executeQuery(a,o,n.timeout);return this.createSuccess(e.id,i,{rowsAffected:l.rows.length,output:l})}finally{if(a)try{await a.close()}catch{}}})}async executeQuery(e,r,n){let i=e.createCommand(r);n&&(i.commandTimeout=n);let s=await i.executeReader(),o=[];for(let l=0;l<s.fieldCount;l++)o.push(s.getName(l));let a=[];for(;await s.read();){let l=[];for(let c=0;c<s.fieldCount;c++)l.push(s.getValue(c));a.push(l)}return s.close&&await s.close(),{columns:o,rows:a}}};var ww=require("child_process"),Qc=q(require("fs")),mE=q(require("path")),Lw=q(require("os"));var uA=class{async run(e,r,n,i){return new Promise(s=>{let o=(0,ww.spawn)(e,r,{env:n,shell:!0}),a="",l="";o.stdout?.on("data",c=>{a+=c.toString()}),o.stderr?.on("data",c=>{l+=c.toString()}),o.on("close",c=>{s({exitCode:c??1,stdout:a.trim(),stderr:l.trim()})}),o.on("error",c=>{s({exitCode:1,stdout:"",stderr:`Failed to start Python: ${c.message}`})}),i&&i>0&&setTimeout(()=>{o.kill(),s({exitCode:1,stdout:a.trim(),stderr:`Execution timed out after ${i} seconds`})},i*1e3)})}},dA=class{find(){return process.platform==="win32"?"py":"python3"}},AE=class extends jr{constructor(e,r,n){super(e),this.runner=r||new uA,this.interpreterFinder=n||new dA}async execute(e,r){let n=this.getConfig(e),i=new Date;return!n.script&&!n.scriptPath?this.createError(e.id,i,"Python script or script path is required"):this.safeExecute(e.id,i,async()=>{let s=n.interpreter||this.interpreterFinder.find();this.reportProgress(r,`Using Python interpreter: ${s}`);let{scriptPath:o,tempScript:a}=await this.prepareScript(n,r);try{this.reportProgress(r,`Executing Python script: ${mE.basename(o)}`);let l=[o,...n.arguments||[]],c=this.buildEnvironment(r.variables),u=await this.runWithProgress(s,l,c,r,n.timeout);return u.exitCode===0?this.createSuccess(e.id,i,{output:u.stdout}):this.resultBuilder(e.id).error(u.stderr||`Python exited with code ${u.exitCode}`).withOutput(u.stdout).build()}finally{a&&await this.cleanupTempScript(o)}})}async prepareScript(e,r){if(e.scriptPath){let s=this.resolveVariables(e.scriptPath,r);if(!Qc.existsSync(s))throw new Error(`Script file not found: ${s}`);return{scriptPath:s,tempScript:!1}}let n=this.resolveVariables(e.script,r),i=mE.join(Lw.tmpdir(),`etl_script_${Date.now()}.py`);return await Qc.promises.writeFile(i,n,"utf-8"),{scriptPath:i,tempScript:!0}}buildEnvironment(e){return{...process.env,...Object.fromEntries(Object.entries(e).map(([r,n])=>[`ETL_VAR_${r.toUpperCase()}`,n]))}}async runWithProgress(e,r,n,i,s){let o=await this.runner.run(e,r,n,s);if(o.stdout)for(let a of o.stdout.split(`
`).slice(0,10))a.trim()&&this.reportProgress(i,`[Python] ${a.trim()}`);if(o.stderr)for(let a of o.stderr.split(`
`).slice(0,5))a.trim()&&this.reportProgress(i,`[Python ERROR] ${a.trim()}`);return o}async cleanupTempScript(e){try{await Qc.promises.unlink(e)}catch{}}};EA();Oi();var VC=class{constructor(){this.format="csv"}async export(e,r,n,i,s,o){try{return await fA(e,r,n,i,void 0,o),{success:!0}}catch(a){return{success:!1,message:a instanceof Error?a.message:String(a)}}}},qC=class{constructor(){this.format="xlsb"}async export(e,r,n,i,s,o){let a=await YC(r,n,i,!1,s,o);return{success:a.success,message:a.message,rowsExported:a.details?.rows_exported}}},ES=class extends jr{constructor(e,r){super(e),this.strategies=r||new Map([["csv",new VC],["xlsb",new qC]])}registerStrategy(e){this.strategies.set(e.format,e)}async execute(e,r){let n=this.getConfig(e),i=new Date,s=this.validateRequired(e.id,i,n.outputPath,"Output path");return s||this.safeExecute(e.id,i,async()=>{let o=this.resolveVariables(n.outputPath,r),a=n.query?this.resolveVariables(n.query,r):"";if(!a&&n.sourceNodeId&&r.nodeOutputs.get(n.sourceNodeId)?.rows)return this.createError(e.id,i,"In-memory data export is not yet supported. Please specify a query.");if(!a)return this.createError(e.id,i,"No query or source node specified for export");let l=this.strategies.get(n.format);if(!l)return this.createError(e.id,i,`Unsupported export format: ${n.format}`);this.reportProgress(r,`Exporting to ${n.format.toUpperCase()}: ${o}`);let c=await l.export(r.extensionContext,r.connectionDetails,a,o,u=>this.reportProgress(r,`[Export] ${u}`),n.timeout);return c.success?this.createSuccess(e.id,i,{rowsAffected:c.rowsExported,output:{filePath:o,format:n.format,rowsExported:c.rowsExported}}):this.createError(e.id,i,c.message||"Export failed")})}};var G6=q(require("fs"));PS();var db=class{async importData(e,r,n,i,s){return ub(e,r,n,i,s)}},xS=class extends jr{constructor(e,r){super(e),this.importer=r||new db}async execute(e,r){let n=this.getConfig(e),i=new Date,s=this.validateRequired(e.id,i,n.inputPath,"Input path");if(s)return s;let o=this.validateRequired(e.id,i,n.targetTable,"Target table");return o||this.safeExecute(e.id,i,async()=>{let a=this.resolveVariables(n.inputPath,r),l=this.resolveVariables(n.targetTable,r),c=n.targetSchema?this.resolveVariables(n.targetSchema,r):"";if(!G6.existsSync(a))return this.createError(e.id,i,`Input file not found: ${a}`);this.reportProgress(r,`Importing from ${n.format.toUpperCase()}: ${a}`),this.reportProgress(r,`Target table: ${c?c+".":""}${l}`);let u=await this.importer.importData(a,l,r.connectionDetails,d=>{this.reportProgress(r,`[Import] ${d}`)},n.timeout);return u.success?this.createSuccess(e.id,i,{rowsAffected:u.details?.rowsInserted,output:{filePath:a,targetTable:`${c?c+".":""}${l}`,rowsProcessed:u.details?.rowsProcessed,rowsInserted:u.details?.rowsInserted}}):this.createError(e.id,i,u.message)})}};var vS=class extends jr{constructor(e,r){super(r),this.engine=e}async execute(e,r){let n=this.getConfig(e),i=new Date;return!n.nodes||n.nodes.length===0?this.createSuccess(e.id,i,{output:"Empty container - nothing to execute"}):this.safeExecute(e.id,i,async()=>{this.reportProgress(r,`Entering container: ${e.name} (${n.nodes.length} tasks)`);let s={name:`Container: ${e.name}`,version:"1.0.0",nodes:n.nodes,connections:n.connections||[]},o=await this.engine.execute(s,r);return this.reportProgress(r,`Exiting container: ${e.name}`),this.processExecutionResult(e.id,i,n,o)})}processExecutionResult(e,r,n,i){if(i.status==="completed"){let{successCount:o,totalRows:a}=this.countSuccesses(i),l={tasksExecuted:n.nodes.length,tasksSucceeded:o,nestedResults:Array.from(i.nodeResults.entries())};return this.createSuccess(e,r,{rowsAffected:a,output:l})}if(i.status==="cancelled")return this.resultBuilder(e).skipped().build();let s=this.findFirstError(i)||"Container execution failed";return this.createError(e,r,s)}countSuccesses(e){let r=0,n=0;for(let i of e.nodeResults.values())i.status==="success"&&(r++,i.rowsAffected&&(n+=i.rowsAffected));return{successCount:r,totalRows:n}}findFirstError(e){for(let r of e.nodeResults.values())if(r.status==="error"&&r.error)return r.error}};var fb=class{async createConnection(e){let r=Ir(),n=new r({host:e.host,port:e.port||5480,database:e.database,user:e.user,password:e.password});return await n.connect(),n}},MS=class extends jr{constructor(r,n){super(r);this.variableManager=null;this.connectionFactory=n||new fb}setVariableManager(r){this.variableManager=r}async execute(r,n){let i=this.getConfig(r),s=new Date,o=this.validateRequired(r.id,s,i.variableName,"Variable name");if(o)return o;let a=n.variableManager||this.variableManager;return a?this.safeExecute(r.id,s,async()=>{let l;switch(i.source){case"prompt":l=await this.handlePrompt(i,a,n);break;case"static":l=this.handleStatic(i,n);break;case"sql":l=await this.handleSql(i,n);break;default:return this.createError(r.id,s,`Unknown variable source: ${i.source}`)}return l===void 0?this.createError(r.id,s,`Variable ${i.variableName} was not set (user cancelled or query returned no results)`):(a.set(i.variableName,l),n.variables[i.variableName]=l,this.reportProgress(n,`Variable ${i.variableName} = "${l}"`),this.createSuccess(r.id,s,{output:{variableName:i.variableName,value:l,source:i.source}}))}):this.createError(r.id,s,"Variable manager not available")}async handlePrompt(r,n,i){let s=r.promptMessage?this.resolveVariables(r.promptMessage,i):`Enter value for ${r.variableName}`,o=r.defaultValue?this.resolveVariables(r.defaultValue,i):void 0;return this.reportProgress(i,`Prompting for variable: ${r.variableName}`),n.promptForValue(r.variableName,s,o)}handleStatic(r,n){let i=r.value||"";return this.resolveVariables(i,n)}async handleSql(r,n){if(!r.query)throw new Error("SQL query is required for sql variable source");let i=this.resolveVariables(r.query,n);this.reportProgress(n,`Executing SQL for variable ${r.variableName}`);let s=null;try{s=await this.connectionFactory.createConnection(n.connectionDetails);let o=s.createCommand(i);r.timeout&&(o.commandTimeout=r.timeout);let a=await o.executeReader(),l;if(await a.read()){let c=a.getValue(0);l=c!=null?String(c):void 0}return a.close&&await a.close(),l}finally{if(s)try{await s.close()}catch{}}}};var W6=q(require("vscode")),US=class{constructor(e){this.variables=new Map(Object.entries(e||{}))}get(e){return this.variables.get(e)}set(e,r){this.variables.set(e,r)}has(e){return this.variables.has(e)}getAll(){return Object.fromEntries(this.variables)}async promptForValue(e,r,n){let i=await W6.window.showInputBox({prompt:r||`Enter value for ${e}`,value:n||"",placeHolder:`Value for \${${e}}`,ignoreFocusOut:!0});return i!==void 0&&this.set(e,i),i}snapshot(){return{...this.getAll()}}merge(e){for(let[r,n]of Object.entries(e))this.set(r,n)}};function $6(){return`
        :root {
            --bg-primary: var(--vscode-editor-background);
            --bg-secondary: var(--vscode-sideBar-background);
            --bg-hover: var(--vscode-list-hoverBackground);
            --border-color: var(--vscode-panel-border);
            --text-color: var(--vscode-editor-foreground);
            --text-muted: var(--vscode-descriptionForeground);
            --accent-color: var(--vscode-button-background);
            --accent-hover: var(--vscode-button-hoverBackground);
            --success-color: #4CAF50;
            --error-color: #f44336;
            --warning-color: #ff9800;
        }

        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            padding: 0;
            height: 100vh;
            overflow: hidden;
            font-family: var(--vscode-font-family);
            font-size: var(--vscode-font-size);
            color: var(--text-color);
            background: var(--bg-primary);
        }

        .etl-designer {
            display: flex;
            flex-direction: column;
            height: 100vh;
        }

        /* Toolbar */
        .toolbar {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 8px 16px;
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border-color);
        }

        .toolbar button {
            padding: 6px 12px;
            margin-right: 4px;
            border: 1px solid var(--border-color);
            background: var(--bg-primary);
            color: var(--text-color);
            cursor: pointer;
            border-radius: 4px;
        }

        .toolbar button:hover {
            background: var(--bg-hover);
        }

        .toolbar .btn-primary {
            background: var(--accent-color);
            border-color: var(--accent-color);
        }

        .toolbar .btn-primary:hover {
            background: var(--accent-hover);
        }

        .toolbar .btn-danger {
            background: var(--error-color);
            border-color: var(--error-color);
            color: white;
        }

        .toolbar .btn-danger:hover {
            opacity: 0.8;
        }

        .toolbar .separator {
            display: inline-block;
            width: 1px;
            height: 20px;
            background: var(--border-color);
            margin: 0 8px;
        }

        .project-name {
            font-weight: bold;
            font-size: 1.1em;
        }

        .status {
            color: var(--text-muted);
            font-size: 0.9em;
        }

        /* Main Content */
        .main-content {
            display: flex;
            flex: 1;
            overflow: hidden;
        }

        /* Toolbox */
        .toolbox {
            width: 200px;
            background: var(--bg-secondary);
            border-right: 1px solid var(--border-color);
            padding: 12px;
            overflow-y: auto;
        }

        .toolbox h3 {
            margin: 0 0 12px 0;
            font-size: 0.9em;
            color: var(--text-muted);
            text-transform: uppercase;
        }

        .toolbox-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 12px;
            margin-bottom: 6px;
            background: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            cursor: grab;
            transition: all 0.15s ease;
        }

        .toolbox-item:hover {
            border-color: var(--accent-color);
            transform: translateX(3px);
        }

        .toolbox-item:active {
            cursor: grabbing;
        }

        .toolbox-item .icon {
            font-size: 1.2em;
        }

        .toolbox-item .label {
            font-size: 0.85em;
        }

        .help-text {
            font-size: 0.8em;
            color: var(--text-muted);
            line-height: 1.6;
        }

        .help-text p {
            margin: 4px 0;
        }

        /* Canvas */
        .canvas-container {
            flex: 1;
            position: relative;
            overflow: hidden;
            background: var(--bg-primary);
            cursor: grab;
        }
        
        .canvas-container:active {
            cursor: grabbing;
        }

        .zoom-wrapper {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            transform-origin: 0 0;
            background: 
                linear-gradient(90deg, rgba(128,128,128,0.1) 1px, transparent 1px),
                linear-gradient(rgba(128,128,128,0.1) 1px, transparent 1px);
            background-size: 20px 20px;
        }

        .connections-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        .connections-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 5;
            pointer-events: none;
        }

        .connections-layer path.connection-line {
            stroke: var(--success-color);
            stroke-width: 2;
            fill: none;
            pointer-events: none;
        }
        
        .connections-layer path.connection-failure {
            stroke: var(--error-color);
        }
        
        .connections-layer path.connection-hit {
            stroke: transparent;
            stroke-width: 15px;
            fill: none;
            pointer-events: stroke;
            cursor: pointer;
        }

        .connections-layer path.connection-hit:hover + .connection-line {
            stroke-width: 3;
            filter: drop-shadow(0 0 2px currentColor);
        }

        .connections-layer marker polygon {
            fill: var(--accent-color);
        }

        .nodes-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 2;
            pointer-events: none;
        }

        .etl-node {
            pointer-events: all;
        }

        /* Nodes */
        .etl-node {
            position: absolute;
            min-width: 160px;
            background: var(--bg-secondary);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            cursor: move;
            user-select: none;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
        }

        .etl-node:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.25);
        }

        .etl-node.selected {
            border-color: var(--accent-color);
        }

        .etl-node.running {
            border-color: var(--warning-color);
            animation: pulse 1s infinite;
        }

        .etl-node.success {
            border-color: var(--success-color);
        }

        .etl-node.error {
            border-color: var(--error-color);
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .node-type-indicator {
            height: 4px;
            border-radius: 6px 6px 0 0;
        }

        .etl-node.sql .node-type-indicator { background: #4CAF50; }
        .etl-node.python .node-type-indicator { background: #3776AB; }
        .etl-node.container .node-type-indicator { background: #FF9800; }
        .etl-node.export .node-type-indicator { background: #2196F3; }
        .etl-node.import .node-type-indicator { background: #9C27B0; }

        .node-content {
            padding: 10px 12px;
        }

        .node-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 4px;
        }

        .node-icon {
            font-size: 1.2em;
        }

        .node-name {
            font-weight: 500;
            font-size: 0.9em;
        }

        .node-type {
            font-size: 0.75em;
            color: var(--text-muted);
            text-transform: uppercase;
        }

        .node-connectors {
            position: relative;
        }

        .node-actions {
            position: absolute;
            top: -8px;
            right: -8px;
            display: none;
        }

        .etl-node:hover .node-actions,
        .etl-node.selected .node-actions {
            display: block;
        }

        .node-delete-btn {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--error-color);
            color: white;
            border: 2px solid var(--bg-secondary);
            font-size: 12px;
            line-height: 16px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .node-delete-btn:hover {
            transform: scale(1.2);
        }

        .connector {
            width: 14px;
            height: 14px;
            background: var(--accent-color);
            border: 2px solid var(--bg-secondary);
            border-radius: 50%;
            position: absolute;
            cursor: crosshair;
            z-index: 10;
        }

        .connector.input {
            left: -9px;
            top: 50%;
            transform: translateY(-50%);
        }

        .connector.output {
            right: -9px;
            top: 50%;
            transform: translateY(-50%);
        }

        .connector:hover {
            transform: translateY(-50%) scale(1.3);
        }

        /* Properties Panel */
        .properties-panel {
            width: 250px;
            background: var(--bg-secondary);
            border-left: 1px solid var(--border-color);
            padding: 12px;
            overflow-y: auto;
        }

        .properties-panel h3 {
            margin: 0 0 12px 0;
            font-size: 0.9em;
            color: var(--text-muted);
            text-transform: uppercase;
        }

        .properties-panel .placeholder {
            color: var(--text-muted);
            font-style: italic;
        }

        .property-group {
            margin-bottom: 16px;
        }

        .property-label {
            display: block;
            font-size: 0.8em;
            color: var(--text-muted);
            margin-bottom: 4px;
        }

        .property-value {
            font-size: 0.9em;
            word-break: break-word;
        }

        .property-code {
            font-family: monospace;
            font-size: 0.8em;
            background: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: 4px;
            padding: 6px 8px;
            margin: 4px 0 0 0;
            white-space: pre-wrap;
            word-break: break-all;
            max-height: 80px;
            overflow-y: auto;
        }

        .configure-btn {
            width: 100%;
            margin-top: 16px;
            padding: 8px 12px;
            background: var(--accent-color);
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.85em;
        }

        .configure-btn:hover {
            background: var(--accent-hover);
        }

        /* Connection line being drawn */
        .temp-connection {
            stroke: var(--accent-color);
            stroke-width: 2;
            stroke-dasharray: 5,5;
            fill: none;
            pointer-events: none;
        }

        /* Container Editor Modal */
        .container-editor-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .container-editor-modal {
            width: 90%;
            height: 85%;
            background: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
        }

        .container-editor-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 16px;
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border-color);
            border-radius: 8px 8px 0 0;
        }

        .container-editor-title {
            font-weight: 600;
            font-size: 1.1em;
        }

        .container-editor-close {
            width: 28px;
            height: 28px;
            border: none;
            background: transparent;
            color: var(--text-color);
            font-size: 18px;
            cursor: pointer;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .container-editor-close:hover {
            background: var(--error-color);
            color: white;
        }

        .container-editor-content {
            flex: 1;
            display: flex;
            overflow: hidden;
        }

        .container-editor-toolbox {
            width: 180px;
            background: var(--bg-secondary);
            border-right: 1px solid var(--border-color);
            padding: 12px;
            overflow-y: auto;
        }

        .container-editor-toolbox h4 {
            margin: 0 0 10px 0;
            font-size: 0.85em;
            color: var(--text-muted);
            text-transform: uppercase;
        }

        .container-editor-canvas {
            flex: 1;
            position: relative;
            overflow: hidden;
            background: var(--bg-primary);
        }

        .container-editor-canvas .zoom-wrapper {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                linear-gradient(90deg, rgba(128,128,128,0.08) 1px, transparent 1px),
                linear-gradient(rgba(128,128,128,0.08) 1px, transparent 1px);
            background-size: 20px 20px;
        }

        .container-editor-footer {
            padding: 10px 16px;
            background: var(--bg-secondary);
            border-top: 1px solid var(--border-color);
            border-radius: 0 0 8px 8px;
            display: flex;
            justify-content: flex-end;
            gap: 8px;
        }

        .container-editor-footer button {
            padding: 6px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9em;
        }

        .container-editor-footer .btn-save {
            background: var(--accent-color);
            color: white;
            border: none;
        }

        .container-editor-footer .btn-save:hover {
            background: var(--accent-hover);
        }

        .container-editor-footer .btn-cancel {
            background: transparent;
            color: var(--text-color);
            border: 1px solid var(--border-color);
        }

        .container-editor-footer .btn-cancel:hover {
            background: var(--bg-hover);
        }

        /* Container node badge showing child count */
        .node-child-count {
            font-size: 0.7em;
            background: var(--warning-color);
            color: white;
            padding: 2px 6px;
            border-radius: 10px;
            margin-left: 4px;
        }
    `}function k6(t){return`
        const vscode = acquireVsCodeApi();
        
        // State
        let project = ${JSON.stringify(t)};
        let selectedNodeId = null;
        let isDragging = false;
        let dragOffset = { x: 0, y: 0 };
        let isConnecting = false;
        let connectionStart = null;
        let tempLine = null;
        
        // Zoom & Pan state
        let scale = 1;
        let pan = { x: 0, y: 0 };
        let isPanning = false;
        let panStart = { x: 0, y: 0 };

        // Container Editor state
        let containerEditorOpen = false;
        let editingContainerId = null;
        let containerNodes = [];
        let containerConnections = [];
        let containerSelectedNodeId = null;
        let containerIsDragging = false;
        let containerDragOffset = { x: 0, y: 0 };
        let containerIsConnecting = false;
        let containerConnectionStart = null;
        let containerTempLine = null;

        // Node icons
        const nodeIcons = {
            sql: '\u{1F4DC}',
            python: '\u{1F40D}',
            container: '\u{1F4E6}',
            export: '\u{1F4E4}',
            import: '\u{1F4E5}',
            variable: '\u{1F524}'
        };
    `}function Y6(){return`
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        function updateNodeStatus(nodeId, status) {
            const nodeEl = document.getElementById('node-' + nodeId);
            if (nodeEl) {
                nodeEl.classList.remove('running', 'success', 'error', 'pending', 'skipped');
                nodeEl.classList.add(status);
            }
            
            document.getElementById('status').textContent = status === 'running' 
                ? 'Running...' 
                : (status === 'error' ? 'Error!' : '');
        }
    `}function V6(){return`
        function updateTransform() {
            const wrapper = document.getElementById('zoom-wrapper');
            if (wrapper) {
                wrapper.style.transform = \`translate(\${pan.x}px, \${pan.y}px) scale(\${scale})\`;
            }
        }

        function setupZoomPan() {
            const container = document.getElementById('canvas');
            
            // Wheel zoom
            container.addEventListener('wheel', (e) => {
                if (e.ctrlKey || true) { 
                    e.preventDefault();
                    const zoomSensitivity = 0.001;
                    const delta = -e.deltaY * zoomSensitivity;
                    const newScale = Math.min(Math.max(0.1, scale + delta), 5);
                    scale = newScale;
                    updateTransform();
                }
            });

            // Pan
            container.addEventListener('mousedown', (e) => {
                if (e.target === container || e.target.id === 'nodes-container' || e.target.id === 'zoom-wrapper' || e.target.id === 'connections-svg') {
                    isPanning = true;
                    panStart = { x: e.clientX - pan.x, y: e.clientY - pan.y };
                    container.style.cursor = 'grabbing';
                }
            });

            window.addEventListener('mousemove', (e) => {
                if (isPanning) {
                    pan.x = e.clientX - panStart.x;
                    pan.y = e.clientY - panStart.y;
                    updateTransform();
                }
            });

            window.addEventListener('mouseup', () => {
                if (isPanning) {
                    isPanning = false;
                    container.style.cursor = 'grab';
                }
            });
        }
    `}function q6(){return`
        function renderConnections() {
            const svg = document.getElementById('connections-svg');
            // Clear existing paths but keep defs
            svg.querySelectorAll('path').forEach(p => p.remove());

            for (const conn of project.connections) {
                const fromNode = project.nodes.find(n => n.id === conn.from);
                const toNode = project.nodes.find(n => n.id === conn.to);
                
                if (fromNode && toNode) {
                    const path = createConnectionPath(fromNode, toNode, conn);
                    svg.appendChild(path);
                }
            }
        }

        function createConnectionPath(from, to, conn) {
            const group = document.createElementNS('http://www.w3.org/2000/svg', 'g');
            
            // Determine marker based on connection type
            const markerType = conn.connectionType === 'failure' ? 'arrowhead-failure' : 'arrowhead';
            const lineClass = conn.connectionType === 'failure' ? 'connection-line connection-failure' : 'connection-line';
            
            // Node dimensions
            const nodeWidth = 160;
            const nodeHeight = 70;
            
            // Calculate center points
            const fromCenterX = from.position.x + nodeWidth / 2;
            const fromCenterY = from.position.y + nodeHeight / 2;
            const toCenterX = to.position.x + nodeWidth / 2;
            const toCenterY = to.position.y + nodeHeight / 2;
            
            // Calculate relative position
            const dx = toCenterX - fromCenterX;
            const dy = toCenterY - fromCenterY;
            
            // Determine connection points based on relative position
            let x1, y1, x2, y2;
            
            // Choose source point (from node)
            if (Math.abs(dy) > Math.abs(dx)) {
                // Vertical connection dominates
                if (dy > 0) {
                    // Target is below - start from bottom
                    x1 = fromCenterX;
                    y1 = from.position.y + nodeHeight;
                } else {
                    // Target is above - start from top
                    x1 = fromCenterX;
                    y1 = from.position.y;
                }
            } else {
                // Horizontal connection dominates
                if (dx > 0) {
                    // Target is to the right - start from right
                    x1 = from.position.x + nodeWidth;
                    y1 = fromCenterY;
                } else {
                    // Target is to the left - start from left
                    x1 = from.position.x;
                    y1 = fromCenterY;
                }
            }
            
            // Choose target point (to node)
            if (Math.abs(dy) > Math.abs(dx)) {
                // Vertical connection
                if (dy > 0) {
                    // Coming from above - end at top
                    x2 = toCenterX;
                    y2 = to.position.y;
                } else {
                    // Coming from below - end at bottom
                    x2 = toCenterX;
                    y2 = to.position.y + nodeHeight;
                }
            } else {
                // Horizontal connection
                if (dx > 0) {
                    // Coming from left - end at left
                    x2 = to.position.x;
                    y2 = toCenterY;
                } else {
                    // Coming from right - end at right
                    x2 = to.position.x + nodeWidth;
                    y2 = toCenterY;
                }
            }

            // Create bezier curve with appropriate control points
            let d;
            if (Math.abs(dy) > Math.abs(dx)) {
                // Vertical curve
                const midY = (y1 + y2) / 2;
                d = 'M ' + x1 + ' ' + y1 + ' C ' + x1 + ' ' + midY + ', ' + x2 + ' ' + midY + ', ' + x2 + ' ' + y2;
            } else {
                // Horizontal curve
                const midX = (x1 + x2) / 2;
                d = 'M ' + x1 + ' ' + y1 + ' C ' + midX + ' ' + y1 + ', ' + midX + ' ' + y2 + ', ' + x2 + ' ' + y2;
            }
            
            // 1. Hit path (invisible, wider)
            const hitPath = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            hitPath.setAttribute('d', d);
            hitPath.setAttribute('class', 'connection-hit');
            hitPath.dataset.connectionId = conn.id;
            
            // Right-click to toggle connection type
            hitPath.addEventListener('contextmenu', (e) => {
                e.preventDefault();
                e.stopPropagation();
                const currentType = conn.connectionType || 'success';
                const newType = currentType === 'success' ? 'failure' : 'success';
                vscode.postMessage({ 
                    type: 'toggleConnectionType', 
                    payload: { connectionId: conn.id, newType: newType }
                });
            });
            
            // Click to delete
            hitPath.addEventListener('click', (e) => {
                e.stopPropagation();
                vscode.postMessage({ type: 'confirmRemoveConnection', payload: conn.id });
            });

            // 2. Visible path
            const visiblePath = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            visiblePath.setAttribute('d', d);
            visiblePath.setAttribute('marker-end', 'url(#' + markerType + ')');
            visiblePath.setAttribute('class', lineClass);

            group.appendChild(hitPath);
            group.appendChild(visiblePath);
            
            return group;
        }

        function createTempLine(e) {
            const svg = document.getElementById('connections-svg');
            tempLine = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            tempLine.classList.add('temp-connection');
            svg.appendChild(tempLine);
            updateTempLine(e);
        }

        function updateTempLine(e) {
            if (!tempLine || !connectionStart) return;
            
            const fromNode = project.nodes.find(n => n.id === connectionStart);
            if (!fromNode) return;
            
            const canvas = document.getElementById('canvas');
            const rect = canvas.getBoundingClientRect();
            
            const x1 = fromNode.position.x + 160;
            const y1 = fromNode.position.y + 35;
            const x2 = (e.clientX - rect.left - pan.x) / scale;
            const y2 = (e.clientY - rect.top - pan.y) / scale;
            
            const midX = (x1 + x2) / 2;
            tempLine.setAttribute('d', 'M ' + x1 + ' ' + y1 + ' C ' + midX + ' ' + y1 + ', ' + midX + ' ' + y2 + ', ' + x2 + ' ' + y2);
        }

        function endConnection() {
            isConnecting = false;
            connectionStart = null;
            if (tempLine) {
                tempLine.remove();
                tempLine = null;
            }
        }
    `}function X6(){return`
        // Keyboard events for Delete key
        function setupKeyboardEvents() {
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Delete' && selectedNodeId) {
                    vscode.postMessage({ type: 'confirmRemoveNode', payload: selectedNodeId });
                }
            });
        }

        // Handle messages from extension
        window.addEventListener('message', (event) => {
            const message = event.data;
            switch (message.type) {
                case 'projectUpdate':
                    project = message.payload;
                    renderNodes();
                    renderConnections();
                    break;
                case 'nodeStatusUpdate':
                    updateNodeStatus(message.payload.nodeId, message.payload.status);
                    break;
                case 'executionStarted':
                    document.getElementById('btn-run').style.display = 'none';
                    document.getElementById('btn-stop').style.display = 'inline-block';
                    document.getElementById('status').textContent = 'Running...';
                    break;
                case 'executionEnded':
                    document.getElementById('btn-run').style.display = 'inline-block';
                    document.getElementById('btn-stop').style.display = 'none';
                    document.getElementById('status').textContent = message.payload?.status || '';
                    break;
                case 'containerChildUpdated':
                    // Refresh container editor with updated child node
                    if (containerEditorOpen && editingContainerId === message.payload.containerId) {
                        const updatedChild = message.payload.childNode;
                        const idx = containerNodes.findIndex(n => n.id === updatedChild.id);
                        if (idx >= 0) {
                            containerNodes[idx] = updatedChild;
                            renderContainerNodes();
                        }
                    }
                    break;
            }
        });

        function setupToolbarButtons() {
            document.getElementById('btn-new').addEventListener('click', () => {
                vscode.postMessage({ type: 'newProject' });
            });
            
            document.getElementById('btn-open').addEventListener('click', () => {
                vscode.postMessage({ type: 'loadProject' });
            });
            
            document.getElementById('btn-save').addEventListener('click', () => {
                vscode.postMessage({ type: 'saveProject' });
            });
            
            document.getElementById('btn-run').addEventListener('click', () => {
                vscode.postMessage({ type: 'runProject' });
            });
            
            document.getElementById('btn-stop').addEventListener('click', () => {
                vscode.postMessage({ type: 'stopProject' });
            });
        }
    `}function j6(){return`
        function updatePropertiesPanel(node) {
            const content = document.getElementById('properties-content');
            
            if (!node) {
                content.innerHTML = '<p class="placeholder">Select a task to view properties</p>';
                return;
            }
            
            let configHtml = '';
            const config = node.config;
            
            switch (node.type) {
                case 'sql':
                    const queryPreview = config.query 
                        ? (config.query.length > 100 ? config.query.substring(0, 100) + '...' : config.query)
                        : '(not configured)';
                    configHtml = \`
                        <div class="property-group">
                            <span class="property-label">Connection</span>
                            <div class="property-value">\${escapeHtml(config.connection || 'Active connection')}</div>
                        </div>
                        <div class="property-group">
                            <span class="property-label">Query</span>
                            <pre class="property-code">\${escapeHtml(queryPreview)}</pre>
                        </div>
                        <div class="property-group">
                            <span class="property-label">Timeout</span>
                            <div class="property-value">\${config.timeout ? config.timeout + 's' : '(default)'}</div>
                        </div>
                    \`;
                    break;
                case 'python':
                    let scriptInfo = '(not configured)';
                    if (config.scriptPath) {
                        const pathParts = config.scriptPath.split(/[/\\\\\\\\]/);
                        scriptInfo = '\u{1F4C1} ' + pathParts[pathParts.length - 1];
                    } else if (config.script) {
                        const preview = config.script.length > 50 ? config.script.substring(0, 50) + '...' : config.script;
                        scriptInfo = preview;
                    }
                    configHtml = \`
                        <div class="property-group">
                            <span class="property-label">Script Source</span>
                            <div class="property-value">\${config.scriptPath ? 'File' : (config.script ? 'Inline' : 'Not set')}</div>
                        </div>
                        <div class="property-group">
                            <span class="property-label">Script</span>
                            <pre class="property-code">\${escapeHtml(scriptInfo)}</pre>
                        </div>
                        <div class="property-group">
                            <span class="property-label">Interpreter</span>
                            <div class="property-value">\${escapeHtml(config.pythonPath || 'Auto-detect')}</div>
                        </div>
                        <div class="property-group">
                            <span class="property-label">Timeout</span>
                            <div class="property-value">\${config.timeout ? config.timeout + 's' : '(default)'}</div>
                        </div>
                    \`;
                    break;
                case 'export':
                    const outPath = config.outputPath 
                        ? config.outputPath.split(/[/\\\\\\\\]/).pop() 
                        : '(not configured)';
                    const exportQueryPreview = config.query 
                        ? (config.query.length > 50 ? config.query.substring(0, 50) + '...' : config.query)
                        : '(uses previous output)';
                    configHtml = \`
                        <div class="property-group">
                            <span class="property-label">Format</span>
                            <div class="property-value">\${config.format?.toUpperCase() || '(not set)'}</div>
                        </div>
                        <div class="property-group">
                            <span class="property-label">Output File</span>
                            <div class="property-value">\u{1F4C4} \${escapeHtml(outPath)}</div>
                        </div>
                        <div class="property-group">
                            <span class="property-label">Query</span>
                            <pre class="property-code">\${escapeHtml(exportQueryPreview)}</pre>
                        </div>
                        <div class="property-group">
                            <span class="property-label">Timeout</span>
                            <div class="property-value">\${config.timeout ? config.timeout + 's' : '(default)'}</div>
                        </div>
                    \`;
                    break;
                case 'import':
                    const inPath = config.inputPath 
                        ? config.inputPath.split(/[/\\\\\\\\]/).pop() 
                        : '(not configured)';
                    configHtml = \`
                        <div class="property-group">
                            <span class="property-label">Format</span>
                            <div class="property-value">\${config.format?.toUpperCase() || 'Auto-detect'}</div>
                        </div>
                        <div class="property-group">
                            <span class="property-label">Input File</span>
                            <div class="property-value">\u{1F4C4} \${escapeHtml(inPath)}</div>
                        </div>
                        <div class="property-group">
                            <span class="property-label">Target Table</span>
                            <div class="property-value">\${escapeHtml(config.targetTable || '(not set)')}</div>
                        </div>
                        <div class="property-group">
                            <span class="property-label">Create Table</span>
                            <div class="property-value">\${config.createTable !== false ? 'Yes (if needed)' : 'No'}</div>
                        </div>
                        <div class="property-group">
                            <span class="property-label">Timeout</span>
                            <div class="property-value">\${config.timeout ? config.timeout + 's' : '(default)'}</div>
                        </div>
                    \`;
                    break;
                case 'container':
                    const childCount = (config.nodes || []).length;
                    configHtml = \`
                        <div class="property-group">
                            <span class="property-label">Child Tasks</span>
                            <div class="property-value">\${childCount} task(s)</div>
                        </div>
                    \`;
                    break;
                case 'variable':
                    const sourceLabels = {
                        'prompt': '\u{1F4DD} Prompt User',
                        'static': '\u{1F512} Static Value',
                        'sql': '\u{1F5C4}\uFE0F SQL Query'
                    };
                    const sourceLabel = sourceLabels[config.source] || config.source;
                    let varDetails = '';
                    if (config.source === 'prompt') {
                        varDetails = \`
                            <div class="property-group">
                                <span class="property-label">Prompt Message</span>
                                <div class="property-value">\${escapeHtml(config.promptMessage || '(default)')}</div>
                            </div>
                            <div class="property-group">
                                <span class="property-label">Default Value</span>
                                <div class="property-value">\${escapeHtml(config.defaultValue || '(none)')}</div>
                            </div>
                        \`;
                    } else if (config.source === 'static') {
                        varDetails = \`
                            <div class="property-group">
                                <span class="property-label">Value</span>
                                <pre class="property-code">\${escapeHtml(config.value || '(empty)')}</pre>
                            </div>
                        \`;
                    } else if (config.source === 'sql') {
                        const sqlPreview = config.query 
                            ? (config.query.length > 50 ? config.query.substring(0, 50) + '...' : config.query)
                            : '(not configured)';
                        varDetails = \`
                            <div class="property-group">
                                <span class="property-label">Query</span>
                                <pre class="property-code">\${escapeHtml(sqlPreview)}</pre>
                            </div>
                            <div class="property-group">
                                <span class="property-label">Timeout</span>
                                <div class="property-value">\${config.timeout ? config.timeout + 's' : '(default)'}</div>
                            </div>
                        \`;
                    }
                    const varNameDisplay = config.variableName ? ('$' + '{' + escapeHtml(config.variableName) + '}') : '(not set)';
                    configHtml = \`
                        <div class="property-group">
                            <span class="property-label">Variable Name</span>
                            <div class="property-value" style="font-family: monospace;">\${varNameDisplay}</div>
                        </div>
                        <div class="property-group">
                            <span class="property-label">Source</span>
                            <div class="property-value">\${sourceLabel}</div>
                        </div>
                        \${varDetails}
                    \`;
                    break;
            }
            
            content.innerHTML = \`
                <div class="property-group">
                    <span class="property-label">ID</span>
                    <div class="property-value" style="font-family: monospace; font-size: 0.75em;">\${node.id}</div>
                </div>
                <div class="property-group">
                    <span class="property-label">Name</span>
                    <div class="property-value">\${escapeHtml(node.name)}</div>
                </div>
                <div class="property-group">
                    <span class="property-label">Type</span>
                    <div class="property-value">\${node.type.toUpperCase()}</div>
                </div>
                <div class="property-group">
                    <span class="property-label">Position</span>
                    <div class="property-value">(\${node.position.x}, \${node.position.y})</div>
                </div>
                <hr style="border: none; border-top: 1px solid var(--border-color); margin: 12px 0;">
                <h4 style="margin: 8px 0; font-size: 0.85em; color: var(--text-muted);">\u2699\uFE0F Configuration</h4>
                \${configHtml}
                <button class="configure-btn" data-node-id="\${node.id}">
                    \u270F\uFE0F Edit Configuration
                </button>
            \`;
            
            // Attach event listener to configure button (CSP-safe)
            const configBtn = content.querySelector('.configure-btn');
            if (configBtn) {
                configBtn.addEventListener('click', () => {
                    vscode.postMessage({ type: 'configureNode', payload: node.id });
                });
            }
        }
    `}function z6(){return`
        function renderNodes() {
            const container = document.getElementById('nodes-container');
            container.innerHTML = '';

            for (const node of project.nodes) {
                const el = createNodeElement(node);
                container.appendChild(el);
            }
        }

        function createNodeElement(node, isContainerChild = false) {
            const el = document.createElement('div');
            const isSelected = isContainerChild 
                ? containerSelectedNodeId === node.id 
                : selectedNodeId === node.id;
            el.className = 'etl-node ' + node.type + (isSelected ? ' selected' : '');
            el.id = (isContainerChild ? 'container-node-' : 'node-') + node.id;
            el.style.left = node.position.x + 'px';
            el.style.top = node.position.y + 'px';

            // Show child count badge for containers
            const childCountBadge = node.type === 'container' && node.config?.nodes?.length > 0
                ? \`<span class="node-child-count">\${node.config.nodes.length}</span>\`
                : '';

            el.innerHTML = \`
                <div class="node-actions">
                    <button class="node-delete-btn" data-node="\${node.id}" title="Delete task">\xD7</button>
                </div>
                <div class="node-type-indicator"></div>
                <div class="node-content">
                    <div class="node-header">
                        <span class="node-icon">\${nodeIcons[node.type] || '\u{1F4CB}'}</span>
                        <span class="node-name">\${escapeHtml(node.name)}\${childCountBadge}</span>
                    </div>
                    <div class="node-type">\${node.type}</div>
                </div>
                <div class="node-connectors">
                    <div class="connector input" data-node="\${node.id}" data-type="input"></div>
                    <div class="connector output" data-node="\${node.id}" data-type="output"></div>
                </div>
            \`;

            setupNodeEvents(el, node);
            return el;
        }

        function setupNodeEvents(el, node) {
            // Delete button click
            const deleteBtn = el.querySelector('.node-delete-btn');
            if (deleteBtn) {
                deleteBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    vscode.postMessage({ type: 'confirmRemoveNode', payload: node.id });
                });
            }

            // Drag
            el.addEventListener('mousedown', (e) => {
                if (e.target.classList.contains('connector')) return;
                if (e.target.classList.contains('node-delete-btn')) return;
                
                selectedNodeId = node.id;
                isDragging = true;
                
                const rect = el.getBoundingClientRect();
                dragOffset.x = (e.clientX - rect.left) / scale;
                dragOffset.y = (e.clientY - rect.top) / scale;
                
                // Update selection
                document.querySelectorAll('.etl-node').forEach(n => n.classList.remove('selected'));
                el.classList.add('selected');
                
                updatePropertiesPanel(node);
            });

            // Double-click to configure (or open container editor)
            el.addEventListener('dblclick', () => {
                if (node.type === 'container') {
                    openContainerEditor(node.id);
                } else {
                    vscode.postMessage({ type: 'configureNode', payload: node.id });
                }
            });

            // Connector events
            el.querySelectorAll('.connector').forEach(conn => {
                conn.addEventListener('mousedown', (e) => {
                    e.stopPropagation();
                    if (conn.dataset.type === 'output') {
                        isConnecting = true;
                        connectionStart = node.id;
                        createTempLine(e);
                    }
                });

                conn.addEventListener('mouseup', (e) => {
                    if (isConnecting && conn.dataset.type === 'input' && connectionStart !== node.id) {
                        vscode.postMessage({
                            type: 'addConnection',
                            payload: { from: connectionStart, to: node.id }
                        });
                    }
                    endConnection();
                });
            });

            // Context menu for delete
            el.addEventListener('contextmenu', (e) => {
                e.preventDefault();
                vscode.postMessage({ type: 'confirmRemoveNode', payload: node.id });
            });
        }

        function setupToolboxDrag() {
            document.querySelectorAll('.toolbox-item').forEach(item => {
                item.addEventListener('dragstart', (e) => {
                    e.dataTransfer.setData('nodeType', item.dataset.type);
                });
            });
        }

        function setupCanvasDrop() {
            const canvas = document.getElementById('canvas');
            
            canvas.addEventListener('dragover', (e) => {
                e.preventDefault();
            });
            
            canvas.addEventListener('drop', (e) => {
                e.preventDefault();
                const nodeType = e.dataTransfer.getData('nodeType');
                if (nodeType) {
                    const rect = canvas.getBoundingClientRect();
                    const x = (e.clientX - rect.left - pan.x) / scale;
                    const y = (e.clientY - rect.top - pan.y) / scale;
                    
                    vscode.postMessage({
                        type: 'addNode',
                        payload: { type: nodeType, position: { x, y } }
                    });
                }
            });

            // Mouse move for dragging and connecting
            document.addEventListener('mousemove', (e) => {
                if (isDragging && selectedNodeId) {
                    const canvas = document.getElementById('canvas');
                    const rect = canvas.getBoundingClientRect();
                    const x = (e.clientX - rect.left - pan.x) / scale - dragOffset.x;
                    const y = (e.clientY - rect.top - pan.y) / scale - dragOffset.y;
                    
                    // Update node position in DOM
                    const nodeEl = document.getElementById('node-' + selectedNodeId);
                    if (nodeEl) {
                        nodeEl.style.left = Math.max(0, x) + 'px';
                        nodeEl.style.top = Math.max(0, y) + 'px';
                    }
                    
                    // Update connections
                    const node = project.nodes.find(n => n.id === selectedNodeId);
                    if (node) {
                        node.position = { x: Math.max(0, x), y: Math.max(0, y) };
                        renderConnections();
                    }
                }
                
                if (isConnecting && tempLine) {
                    updateTempLine(e);
                }
            });

            document.addEventListener('mouseup', (e) => {
                if (isDragging && selectedNodeId) {
                    // Save position
                    const node = project.nodes.find(n => n.id === selectedNodeId);
                    if (node) {
                        vscode.postMessage({
                            type: 'updateNodePosition',
                            payload: { nodeId: selectedNodeId, position: node.position }
                        });
                    }
                }
                
                isDragging = false;
                endConnection();
            });

            // Deselect on canvas click
            canvas.addEventListener('click', (e) => {
                if (e.target === canvas || e.target.classList.contains('nodes-layer')) {
                    selectedNodeId = null;
                    document.querySelectorAll('.etl-node').forEach(n => n.classList.remove('selected'));
                    updatePropertiesPanel(null);
                }
            });
        }
    `}function K6(){return`
        function setupContainerEditor() {
            // Close button
            document.getElementById('container-editor-close').addEventListener('click', closeContainerEditor);
            document.getElementById('container-editor-cancel').addEventListener('click', closeContainerEditor);
            document.getElementById('container-editor-save').addEventListener('click', saveContainerAndClose);

            // Toolbox drag for container editor
            document.querySelectorAll('.toolbox-item[data-container="true"]').forEach(item => {
                item.addEventListener('dragstart', (e) => {
                    e.dataTransfer.setData('containerNodeType', item.dataset.type);
                });
            });

            // Canvas drop for container editor
            const containerCanvas = document.getElementById('container-canvas');
            containerCanvas.addEventListener('dragover', (e) => e.preventDefault());
            containerCanvas.addEventListener('drop', (e) => {
                e.preventDefault();
                const nodeType = e.dataTransfer.getData('containerNodeType');
                if (nodeType && containerEditorOpen) {
                    const rect = containerCanvas.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;
                    addContainerChildNode(nodeType, { x, y });
                }
            });

            // Click to deselect in container canvas
            containerCanvas.addEventListener('click', (e) => {
                if (e.target === containerCanvas || e.target.id === 'container-nodes' || e.target.id === 'container-zoom-wrapper') {
                    containerSelectedNodeId = null;
                    document.querySelectorAll('#container-nodes .etl-node').forEach(n => n.classList.remove('selected'));
                }
            });

            // Mouse move for container dragging
            document.addEventListener('mousemove', (e) => {
                if (containerIsDragging && containerSelectedNodeId) {
                    const canvas = document.getElementById('container-canvas');
                    const rect = canvas.getBoundingClientRect();
                    const x = e.clientX - rect.left - containerDragOffset.x;
                    const y = e.clientY - rect.top - containerDragOffset.y;

                    const nodeEl = document.getElementById('container-node-' + containerSelectedNodeId);
                    if (nodeEl) {
                        nodeEl.style.left = Math.max(0, x) + 'px';
                        nodeEl.style.top = Math.max(0, y) + 'px';
                    }

                    const node = containerNodes.find(n => n.id === containerSelectedNodeId);
                    if (node) {
                        node.position = { x: Math.max(0, x), y: Math.max(0, y) };
                        renderContainerConnections();
                    }
                }

                if (containerIsConnecting && containerTempLine) {
                    updateContainerTempLine(e);
                }
            });

            document.addEventListener('mouseup', () => {
                containerIsDragging = false;
                endContainerConnection();
            });

            // Escape to close
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && containerEditorOpen) {
                    closeContainerEditor();
                }
                if (e.key === 'Delete' && containerEditorOpen && containerSelectedNodeId) {
                    removeContainerChildNode(containerSelectedNodeId);
                }
            });
        }

        function openContainerEditor(containerId) {
            const containerNode = project.nodes.find(n => n.id === containerId);
            if (!containerNode || containerNode.type !== 'container') return;

            editingContainerId = containerId;
            containerEditorOpen = true;
            containerNodes = JSON.parse(JSON.stringify(containerNode.config.nodes || []));
            containerConnections = JSON.parse(JSON.stringify(containerNode.config.connections || []));
            containerSelectedNodeId = null;

            document.getElementById('container-editor-title').textContent = '\u{1F4E6} Edit: ' + containerNode.name;
            document.getElementById('container-editor-overlay').style.display = 'flex';

            renderContainerNodes();
            renderContainerConnections();
        }

        function closeContainerEditor() {
            containerEditorOpen = false;
            editingContainerId = null;
            containerNodes = [];
            containerConnections = [];
            document.getElementById('container-editor-overlay').style.display = 'none';
        }

        function saveContainerAndClose() {
            if (!editingContainerId) return;

            vscode.postMessage({
                type: 'updateContainerNodes',
                payload: {
                    containerId: editingContainerId,
                    nodes: containerNodes,
                    connections: containerConnections
                }
            });

            closeContainerEditor();
        }

        function renderContainerNodes() {
            const container = document.getElementById('container-nodes');
            container.innerHTML = '';

            for (const node of containerNodes) {
                const el = createContainerNodeElement(node);
                container.appendChild(el);
            }
        }

        function createContainerNodeElement(node) {
            const el = document.createElement('div');
            el.className = 'etl-node ' + node.type + (containerSelectedNodeId === node.id ? ' selected' : '');
            el.id = 'container-node-' + node.id;
            el.style.left = node.position.x + 'px';
            el.style.top = node.position.y + 'px';

            el.innerHTML = \`
                <div class="node-actions">
                    <button class="node-delete-btn" data-node="\${node.id}" title="Delete">\xD7</button>
                </div>
                <div class="node-type-indicator"></div>
                <div class="node-content">
                    <div class="node-header">
                        <span class="node-icon">\${nodeIcons[node.type] || '\u{1F4CB}'}</span>
                        <span class="node-name">\${escapeHtml(node.name)}</span>
                    </div>
                    <div class="node-type">\${node.type}</div>
                </div>
                <div class="node-connectors">
                    <div class="connector input" data-node="\${node.id}" data-type="input"></div>
                    <div class="connector output" data-node="\${node.id}" data-type="output"></div>
                </div>
            \`;

            setupContainerNodeEvents(el, node);
            return el;
        }

        function setupContainerNodeEvents(el, node) {
            // Delete button
            const deleteBtn = el.querySelector('.node-delete-btn');
            if (deleteBtn) {
                deleteBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    removeContainerChildNode(node.id);
                });
            }

            // Drag
            el.addEventListener('mousedown', (e) => {
                if (e.target.classList.contains('connector')) return;
                if (e.target.classList.contains('node-delete-btn')) return;

                containerSelectedNodeId = node.id;
                containerIsDragging = true;

                const rect = el.getBoundingClientRect();
                containerDragOffset.x = e.clientX - rect.left;
                containerDragOffset.y = e.clientY - rect.top;

                document.querySelectorAll('#container-nodes .etl-node').forEach(n => n.classList.remove('selected'));
                el.classList.add('selected');
            });

            // Double-click to configure (first save, then configure)
            el.addEventListener('dblclick', () => {
                // First save current state to backend
                vscode.postMessage({
                    type: 'updateContainerNodes',
                    payload: {
                        containerId: editingContainerId,
                        nodes: containerNodes,
                        connections: containerConnections
                    }
                });
                // Then request configuration
                vscode.postMessage({ 
                    type: 'configureContainerChildNode', 
                    payload: { containerId: editingContainerId, nodeId: node.id } 
                });
            });

            // Connector events
            el.querySelectorAll('.connector').forEach(conn => {
                conn.addEventListener('mousedown', (e) => {
                    e.stopPropagation();
                    if (conn.dataset.type === 'output') {
                        containerIsConnecting = true;
                        containerConnectionStart = node.id;
                        createContainerTempLine(e);
                    }
                });

                conn.addEventListener('mouseup', () => {
                    if (containerIsConnecting && conn.dataset.type === 'input' && containerConnectionStart !== node.id) {
                        addContainerConnection(containerConnectionStart, node.id);
                    }
                    endContainerConnection();
                });
            });

            // Context menu delete
            el.addEventListener('contextmenu', (e) => {
                e.preventDefault();
                removeContainerChildNode(node.id);
            });
        }

        function addContainerChildNode(type, position) {
            const nodeNames = {
                sql: 'SQL Task',
                python: 'Python Script',
                export: 'Export Data',
                import: 'Import Data',
                variable: 'Variable'
            };

            const defaultConfigs = {
                sql: { type: 'sql', query: '', connection: 'default' },
                python: { type: 'python', script: '' },
                export: { type: 'export', format: 'csv', outputPath: '' },
                import: { type: 'import', format: 'csv', inputPath: '', targetTable: '' },
                variable: { type: 'variable', variableName: '', source: 'prompt', promptMessage: 'Enter value' }
            };

            const newNode = {
                id: 'child-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9),
                type: type,
                name: nodeNames[type] || 'New Task',
                position: position,
                config: defaultConfigs[type] || {}
            };

            containerNodes.push(newNode);
            renderContainerNodes();
            renderContainerConnections();
        }

        function removeContainerChildNode(nodeId) {
            containerNodes = containerNodes.filter(n => n.id !== nodeId);
            containerConnections = containerConnections.filter(c => c.from !== nodeId && c.to !== nodeId);
            if (containerSelectedNodeId === nodeId) containerSelectedNodeId = null;
            renderContainerNodes();
            renderContainerConnections();
        }

        function addContainerConnection(from, to) {
            // Check if connection already exists
            if (containerConnections.some(c => c.from === from && c.to === to)) return;

            containerConnections.push({
                id: 'conn-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9),
                from: from,
                to: to
            });
            renderContainerConnections();
        }

        function renderContainerConnections() {
            const svg = document.getElementById('container-connections-svg');
            svg.querySelectorAll('path').forEach(p => p.remove());

            for (const conn of containerConnections) {
                const fromNode = containerNodes.find(n => n.id === conn.from);
                const toNode = containerNodes.find(n => n.id === conn.to);

                if (fromNode && toNode) {
                    const path = createContainerConnectionPath(fromNode, toNode, conn);
                    svg.appendChild(path);
                }
            }
        }

        function createContainerConnectionPath(from, to, conn) {
            const group = document.createElementNS('http://www.w3.org/2000/svg', 'g');

            // Determine marker based on connection type
            const markerType = conn.connectionType === 'failure' ? 'container-arrowhead-failure' : 'container-arrowhead';
            const lineClass = conn.connectionType === 'failure' ? 'connection-line connection-failure' : 'connection-line';

            // Source: always right side (output connector)
            const x1 = from.position.x + 160;
            const y1 = from.position.y + 35;
            
            // Determine target connection point based on relative positions
            let x2, y2;
            const nodeWidth = 160;
            const nodeHeight = 70;
            
            const dx = to.position.x - from.position.x;
            const dy = to.position.y - from.position.y;
            
            if (dx > 50) {
                x2 = to.position.x;
                y2 = to.position.y + 35;
            } else if (dx < -50 && Math.abs(dy) < 80) {
                x2 = to.position.x + nodeWidth;
                y2 = to.position.y + 35;
            } else if (dy > 30) {
                x2 = to.position.x + nodeWidth / 2;
                y2 = to.position.y;
            } else if (dy < -30) {
                x2 = to.position.x + nodeWidth / 2;
                y2 = to.position.y + nodeHeight;
            } else {
                x2 = to.position.x;
                y2 = to.position.y + 35;
            }

            // Create bezier curve with appropriate control points
            let d;
            if (dx > 50) {
                const midX = (x1 + x2) / 2;
                d = 'M ' + x1 + ' ' + y1 + ' C ' + midX + ' ' + y1 + ', ' + midX + ' ' + y2 + ', ' + x2 + ' ' + y2;
            } else if (dx < -50 && Math.abs(dy) < 80) {
                d = 'M ' + x1 + ' ' + y1 + ' C ' + (x1 + 60) + ' ' + y1 + ', ' + (x2 + 60) + ' ' + y2 + ', ' + x2 + ' ' + y2;
            } else if (dy > 30) {
                d = 'M ' + x1 + ' ' + y1 + ' C ' + (x1 + 40) + ' ' + y1 + ', ' + x2 + ' ' + (y2 - 40) + ', ' + x2 + ' ' + y2;
            } else if (dy < -30) {
                d = 'M ' + x1 + ' ' + y1 + ' C ' + (x1 + 40) + ' ' + y1 + ', ' + x2 + ' ' + (y2 + 40) + ', ' + x2 + ' ' + y2;
            } else {
                const midX = (x1 + x2) / 2;
                d = 'M ' + x1 + ' ' + y1 + ' C ' + midX + ' ' + y1 + ', ' + midX + ' ' + y2 + ', ' + x2 + ' ' + y2;
            }

            const hitPath = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            hitPath.setAttribute('d', d);
            hitPath.setAttribute('class', 'connection-hit');
            
            // Right-click to toggle connection type
            hitPath.addEventListener('contextmenu', (e) => {
                e.preventDefault();
                e.stopPropagation();
                const currentType = conn.connectionType || 'success';
                const newType = currentType === 'success' ? 'failure' : 'success';
                // Update locally
                conn.connectionType = newType;
                renderContainerConnections();
            });
            
            // Click to delete
            hitPath.addEventListener('click', (e) => {
                e.stopPropagation();
                containerConnections = containerConnections.filter(c => c.id !== conn.id);
                renderContainerConnections();
            });

            const visiblePath = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            visiblePath.setAttribute('d', d);
            visiblePath.setAttribute('marker-end', 'url(#' + markerType + ')');
            visiblePath.setAttribute('class', lineClass);

            group.appendChild(hitPath);
            group.appendChild(visiblePath);

            return group;
        }

        function createContainerTempLine(e) {
            const svg = document.getElementById('container-connections-svg');
            containerTempLine = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            containerTempLine.classList.add('temp-connection');
            svg.appendChild(containerTempLine);
            updateContainerTempLine(e);
        }

        function updateContainerTempLine(e) {
            if (!containerTempLine || !containerConnectionStart) return;

            const fromNode = containerNodes.find(n => n.id === containerConnectionStart);
            if (!fromNode) return;

            const canvas = document.getElementById('container-canvas');
            const rect = canvas.getBoundingClientRect();

            const x1 = fromNode.position.x + 160;
            const y1 = fromNode.position.y + 35;
            const x2 = e.clientX - rect.left;
            const y2 = e.clientY - rect.top;

            const midX = (x1 + x2) / 2;
            containerTempLine.setAttribute('d', 'M ' + x1 + ' ' + y1 + ' C ' + midX + ' ' + y1 + ', ' + midX + ' ' + y2 + ', ' + x2 + ' ' + y2);
        }

        function endContainerConnection() {
            containerIsConnecting = false;
            containerConnectionStart = null;
            if (containerTempLine) {
                containerTempLine.remove();
                containerTempLine = null;
            }
        }
    `}function J6(t){return`
        (function() {
            'use strict';
            
            ${k6(t)}
            
            ${Y6()}
            
            ${V6()}
            
            ${q6()}
            
            ${z6()}
            
            ${j6()}
            
            ${X6()}
            
            ${K6()}
            
            // Initialize function
            function init() {
                renderNodes();
                renderConnections();
                setupToolboxDrag();
                setupCanvasDrop();
                setupToolbarButtons();
                setupKeyboardEvents();
                setupZoomPan();
                setupContainerEditor();
                
                // Request current project state
                vscode.postMessage({ type: 'getProject' });
            }
            
            // Start
            init();
        })();
    `}function Q6(t){return J6(t)}function Vbe(t){return`
        <header class="toolbar">
            <div class="toolbar-left">
                <button id="btn-new" title="New Project">\u{1F4C4} New</button>
                <button id="btn-open" title="Open Project">\u{1F4C2} Open</button>
                <button id="btn-save" title="Save Project">\u{1F4BE} Save</button>
                <span class="separator"></span>
                <button id="btn-run" class="btn-primary" title="Run Project">\u25B6\uFE0F Run</button>
                <button id="btn-stop" class="btn-danger" title="Stop Execution" style="display:none;">\u23F9\uFE0F Stop</button>
            </div>
            <div class="toolbar-center">
                <span class="project-name">${t}</span>
            </div>
            <div class="toolbar-right">
                <span class="status" id="status"></span>
            </div>
        </header>`}function qbe(){return`
        <aside class="toolbox">
            <h3>\u{1F4E6} Tasks</h3>
            <div class="toolbox-items">
                <div class="toolbox-item" data-type="variable" draggable="true">
                    <span class="icon">\u{1F524}</span>
                    <span class="label">Variable</span>
                </div>
                <div class="toolbox-item" data-type="sql" draggable="true">
                    <span class="icon">\u{1F4DC}</span>
                    <span class="label">SQL Task</span>
                </div>
                <div class="toolbox-item" data-type="python" draggable="true">
                    <span class="icon">\u{1F40D}</span>
                    <span class="label">Python Script</span>
                </div>
                <div class="toolbox-item" data-type="container" draggable="true">
                    <span class="icon">\u{1F4E6}</span>
                    <span class="label">Container</span>
                </div>
                <div class="toolbox-item" data-type="export" draggable="true">
                    <span class="icon">\u{1F4E4}</span>
                    <span class="label">Export (CSV/XLSB)</span>
                </div>
                <div class="toolbox-item" data-type="import" draggable="true">
                    <span class="icon">\u{1F4E5}</span>
                    <span class="label">Import (CSV/XLSB)</span>
                </div>
            </div>
            
            <h3>\u2139\uFE0F Help</h3>
            <div class="help-text">
                <p>Drag tasks to canvas</p>
                <p>Connect outputs to inputs</p>
                <p>Double-click to configure</p>
                <p>Connected = Sequential</p>
                <p>Unconnected = Parallel</p>
                <p>Use \${name} in SQL</p>
            </div>
        </aside>`}function Xbe(){return`
        <main class="canvas-container" id="canvas">
            <div id="zoom-wrapper" class="zoom-wrapper">
                <svg class="connections-layer" id="connections-svg">
                    <defs>
                        <marker id="arrowhead" markerWidth="10" markerHeight="7" 
                            refX="10" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="#4caf50" />
                        </marker>
                        <marker id="arrowhead-failure" markerWidth="10" markerHeight="7" 
                            refX="10" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="#f44336" />
                        </marker>
                    </defs>
                </svg>
                <div class="nodes-layer" id="nodes-container"></div>
            </div>
        </main>`}function jbe(){return`
        <aside class="properties-panel" id="properties">
            <h3>\u2699\uFE0F Properties</h3>
            <div id="properties-content">
                <p class="placeholder">Select a task to view properties</p>
            </div>
        </aside>`}function zbe(){return`
        <div id="container-editor-overlay" class="container-editor-overlay" style="display:none;">
            <div class="container-editor-modal">
                <header class="container-editor-header">
                    <span id="container-editor-title" class="container-editor-title">\u{1F4E6} Edit Container</span>
                    <button id="container-editor-close" class="container-editor-close" title="Close">\u2715</button>
                </header>
                <div class="container-editor-content">
                    <aside class="container-editor-toolbox">
                        <h4>\u{1F4E6} Tasks</h4>
                        <div class="toolbox-item" data-type="variable" data-container="true" draggable="true">
                            <span class="icon">\u{1F524}</span>
                            <span class="label">Variable</span>
                        </div>
                        <div class="toolbox-item" data-type="sql" data-container="true" draggable="true">
                            <span class="icon">\u{1F4DC}</span>
                            <span class="label">SQL Task</span>
                        </div>
                        <div class="toolbox-item" data-type="python" data-container="true" draggable="true">
                            <span class="icon">\u{1F40D}</span>
                            <span class="label">Python</span>
                        </div>
                        <div class="toolbox-item" data-type="export" data-container="true" draggable="true">
                            <span class="icon">\u{1F4E4}</span>
                            <span class="label">Export</span>
                        </div>
                        <div class="toolbox-item" data-type="import" data-container="true" draggable="true">
                            <span class="icon">\u{1F4E5}</span>
                            <span class="label">Import</span>
                        </div>
                    </aside>
                    <div class="container-editor-canvas" id="container-canvas">
                        <div class="zoom-wrapper" id="container-zoom-wrapper">
                            <svg class="connections-layer" id="container-connections-svg">
                                <defs>
                                    <marker id="container-arrowhead" markerWidth="10" markerHeight="7" 
                                        refX="10" refY="3.5" orient="auto">
                                        <polygon points="0 0, 10 3.5, 0 7" fill="#4caf50" />
                                    </marker>
                                    <marker id="container-arrowhead-failure" markerWidth="10" markerHeight="7" 
                                        refX="10" refY="3.5" orient="auto">
                                        <polygon points="0 0, 10 3.5, 0 7" fill="#f44336" />
                                    </marker>
                                </defs>
                            </svg>
                            <div class="nodes-layer" id="container-nodes"></div>
                        </div>
                    </div>
                </div>
                <footer class="container-editor-footer">
                    <button id="container-editor-cancel" class="btn-cancel">Cancel</button>
                    <button id="container-editor-save" class="btn-save">\u{1F4BE} Save</button>
                </footer>
            </div>
        </div>`}function Z6(t){let{project:e,nonce:r}=t;return`<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'none'; style-src 'unsafe-inline'; script-src 'nonce-${r}';">
    <title>ETL Designer - ${e.name}</title>
    <style>${$6()}</style>
</head>
<body>
    <div class="etl-designer">
        ${Vbe(e.name)}

        <div class="main-content">
            ${qbe()}
            ${Xbe()}
            ${jbe()}
        </div>
    </div>

    ${zbe()}

    <script nonce="${r}">
        ${Q6(e)}
    </script>
</body>
</html>`}var Je=q(require("vscode")),BS=class{constructor(e,r){this.projectManager=e;this.onUpdate=r}async configureNode(e){let r=this.projectManager.getNode(e);if(r)switch(r.type){case"sql":await this.configureSqlNode(r,e);break;case"python":await this.configurePythonNode(r,e);break;case"export":await this.configureExportNode(r,e);break;case"import":await this.configureImportNode(r,e);break;case"variable":await this.configureVariableNode(r,e);break}}getDefaultNodeName(e){return{sql:"SQL Task",python:"Python Script",container:"Container",export:"Export Data",import:"Import Data",variable:"Variable"}[e]||"New Task"}async configureSqlNode(e,r){let n=e.config,i=await Je.window.showInputBox({prompt:"Enter task name",value:e.name,placeHolder:"e.g. Load Customer Data"});if(i===void 0)return;let s=await Je.window.showInputBox({prompt:"Enter SQL query",value:n.query,placeHolder:"SELECT * FROM table_name"});if(s!==void 0){let o=await Je.window.showInputBox({prompt:"Enter execution timeout in seconds (optional)",value:n.timeout?String(n.timeout):"",placeHolder:"e.g. 60"}),a=o&&!isNaN(parseInt(o))?parseInt(o):void 0;this.projectManager.updateNode(r,{name:i,config:{...n,query:s,timeout:a}}),this.onUpdate()}}async configurePythonNode(e,r){let n=e.config,i=await Je.window.showInputBox({prompt:"Enter task name",value:e.name,placeHolder:"e.g. Transform Data"});if(i===void 0)return;let s=await Je.window.showQuickPick(["Enter script inline","Select script file"],{placeHolder:"How to provide the Python script?"});if(s==="Enter script inline"){let o=await Je.window.showInputBox({prompt:"Enter Python script",value:n.script,placeHolder:'print("Hello ETL")'});if(o!==void 0){let a=await Je.window.showInputBox({prompt:"Enter execution timeout in seconds (optional)",value:n.timeout?String(n.timeout):"",placeHolder:"e.g. 60"}),l=a&&!isNaN(parseInt(a))?parseInt(a):void 0;this.projectManager.updateNode(r,{name:i,config:{...n,script:o,scriptPath:void 0,timeout:l}}),this.onUpdate()}}else if(s==="Select script file"){let o=await Je.window.showOpenDialog({filters:{Python:["py"]},canSelectMany:!1});if(o&&o[0]){let a=await Je.window.showInputBox({prompt:"Enter execution timeout in seconds (optional)",value:n.timeout?String(n.timeout):"",placeHolder:"e.g. 60"}),l=a&&!isNaN(parseInt(a))?parseInt(a):void 0;this.projectManager.updateNode(r,{name:i,config:{...n,scriptPath:o[0].fsPath,script:"",timeout:l}}),this.onUpdate()}}}async configureExportNode(e,r){let n=e.config,i=await Je.window.showInputBox({prompt:"Enter task name",value:e.name,placeHolder:"e.g. Export to CSV"});if(i===void 0)return;let s=await Je.window.showQuickPick(["csv","xlsb"],{placeHolder:"Select output format"});if(s){let o=await Je.window.showSaveDialog({filters:s==="csv"?{CSV:["csv"]}:{"Excel Binary":["xlsb"]}});if(o){let a=await Je.window.showInputBox({prompt:"Enter SQL query for export",value:n.query||"",placeHolder:"SELECT * FROM table_name"});if(a!==void 0){let l=await Je.window.showInputBox({prompt:"Enter execution timeout in seconds (optional)",value:n.timeout?String(n.timeout):"",placeHolder:"e.g. 300"}),c=l&&!isNaN(parseInt(l))?parseInt(l):void 0;this.projectManager.updateNode(r,{name:i,config:{...n,format:s,outputPath:o.fsPath,query:a,timeout:c}}),this.onUpdate()}}}}async configureImportNode(e,r){let n=e.config,i=await Je.window.showInputBox({prompt:"Enter task name",value:e.name,placeHolder:"e.g. Import Products"});if(i===void 0)return;let s=await Je.window.showOpenDialog({filters:{"Data Files":["csv","xlsb"],CSV:["csv"],"Excel Binary":["xlsb"]},canSelectMany:!1});if(s&&s[0]){let o=s[0].fsPath,a=o.endsWith(".xlsb")?"xlsb":"csv",l=await Je.window.showInputBox({prompt:"Enter target table name",value:n.targetTable,placeHolder:"SCHEMA.TABLE_NAME"});if(l){let c=await Je.window.showInputBox({prompt:"Enter execution timeout in seconds (optional)",value:n.timeout?String(n.timeout):"",placeHolder:"e.g. 300"}),u=c&&!isNaN(parseInt(c))?parseInt(c):void 0;this.projectManager.updateNode(r,{name:i,config:{...n,format:a,inputPath:o,targetTable:l,timeout:u}}),this.onUpdate()}}}async configureVariableNode(e,r){let n=e.config,i=await Je.window.showInputBox({prompt:"Enter task name",value:e.name,placeHolder:"e.g. Get Date Filter"});if(i===void 0)return;let s=await Je.window.showInputBox({prompt:"Enter variable name (without ${})",value:n.variableName,placeHolder:"e.g. date_filter"});if(!s)return;let o=await Je.window.showQuickPick([{label:"Prompt User",value:"prompt",description:"Ask user for value at runtime"},{label:"Static Value",value:"static",description:"Use fixed value"},{label:"SQL Query",value:"sql",description:"Get value from database query"}],{placeHolder:"How should the variable value be set?"});if(!o)return;let a={...n,variableName:s,source:o.value};switch(o.value){case"prompt":{let l=await Je.window.showInputBox({prompt:"Enter prompt message to show user",value:n.promptMessage||`Enter value for ${s}`,placeHolder:"e.g. Enter date filter (YYYY-MM-DD)"}),c=await Je.window.showInputBox({prompt:"Enter default value (optional)",value:n.defaultValue||"",placeHolder:"e.g. 2024-01-01"});a={...a,promptMessage:l,defaultValue:c};break}case"static":{let l=await Je.window.showInputBox({prompt:"Enter static value",value:n.value||"",placeHolder:"e.g. 2024-06-15"});if(l===void 0)return;a={...a,value:l};break}case"sql":{let l=await Je.window.showInputBox({prompt:"Enter SQL query (must return single value)",value:n.query||"",placeHolder:"SELECT MAX(date) FROM sales_data"});if(!l)return;let c=await Je.window.showInputBox({prompt:"Enter timeout in seconds (optional)",value:n.timeout?String(n.timeout):"",placeHolder:"e.g. 30"}),u=c&&!isNaN(parseInt(c))?parseInt(c):void 0;a={...a,query:l,timeout:u};break}}this.projectManager.updateNode(r,{name:i,config:a}),this.onUpdate()}};var Yn=class t{constructor(e,r,n){this._disposables=[];this._panel=e,this._context=r,this._projectManager=Os.getInstance(),this._nodeConfigurator=new BS(this._projectManager,()=>this._sendProjectUpdate()),this._executionEngine=new SE,this._executionEngine.registerExecutor("sql",new RE),this._executionEngine.registerExecutor("python",new AE),this._executionEngine.registerExecutor("export",new ES),this._executionEngine.registerExecutor("import",new xS),this._executionEngine.registerExecutor("container",new vS(this._executionEngine)),this._executionEngine.registerExecutor("variable",new MS);let i=n||this._projectManager.createProject("New ETL Project");this._updateWebview(i),this._panel.onDidDispose(()=>this.dispose(),null,this._disposables),this._panel.webview.onDidReceiveMessage(s=>this._handleMessage(s),null,this._disposables)}static{this.viewType="netezza.etlDesigner"}static setConnectionManager(e){t._connectionManager=e}static createOrShow(e,r){let n=Be.window.activeTextEditor?Be.window.activeTextEditor.viewColumn:void 0;if(t.currentPanel){t.currentPanel._panel.reveal(n),r&&t.currentPanel._updateProject(r);return}let i=Be.window.createWebviewPanel(t.viewType,"ETL Designer",n||Be.ViewColumn.One,{enableScripts:!0,retainContextWhenHidden:!0,localResourceRoots:[e.extensionUri]});t.currentPanel=new t(i,e,r)}async _handleMessage(e){let r=this._projectManager.getCurrentProject();switch(e.type){case"addNode":{let n=e.payload,i={id:EE(),type:n.type,name:this._nodeConfigurator.getDefaultNodeName(n.type),position:n.position,config:Cw(n.type)};this._projectManager.addNode(i),this._sendProjectUpdate();break}case"confirmRemoveNode":{let n=e.payload;await Be.window.showWarningMessage("Delete this task?",{modal:!0},"Delete")==="Delete"&&(this._projectManager.removeNode(n),this._sendProjectUpdate());break}case"removeNode":{let n=e.payload;this._projectManager.removeNode(n),this._sendProjectUpdate();break}case"updateNodePosition":{let{nodeId:n,position:i}=e.payload;this._projectManager.updateNode(n,{position:i});break}case"updateNodeName":{let{nodeId:n,name:i}=e.payload;this._projectManager.updateNode(n,{name:i}),this._sendProjectUpdate();break}case"addConnection":{let{from:n,to:i}=e.payload;try{this._projectManager.addConnection({id:hE(),from:n,to:i}),this._sendProjectUpdate()}catch(s){Be.window.showErrorMessage(String(s))}break}case"confirmRemoveConnection":{let n=e.payload;await Be.window.showWarningMessage("Delete this connection?",{modal:!0},"Delete")==="Delete"&&(this._projectManager.removeConnection(n),this._sendProjectUpdate());break}case"removeConnection":{let n=e.payload;this._projectManager.removeConnection(n),this._sendProjectUpdate();break}case"toggleConnectionType":{let{connectionId:n,newType:i}=e.payload,s=r?.connections.find(o=>o.id===n);s&&(s.connectionType=i,this._sendProjectUpdate());break}case"configureNode":{let n=e.payload;await this._nodeConfigurator.configureNode(n);break}case"updateContainerNodes":{let{containerId:n,nodes:i,connections:s}=e.payload,o=this._projectManager.getNode(n);o&&o.type==="container"&&(this._projectManager.updateNode(n,{config:{type:"container",nodes:i,connections:s}}),this._sendProjectUpdate());break}case"configureContainerChildNode":{let{containerId:n,nodeId:i}=e.payload,s=this._projectManager.getNode(n);if(s&&s.type==="container"){let a=s.config.nodes.find(l=>l.id===i);a&&await this._configureContainerChildNode(n,a)}break}case"saveProject":{await this._saveProject();break}case"loadProject":{await this._loadProject();break}case"newProject":{let n=await Be.window.showInputBox({prompt:"Enter project name",value:"New ETL Project"});n&&(this._projectManager.createProject(n),this._sendProjectUpdate());break}case"runProject":{r&&await this._runProject(r);break}case"stopProject":{this._stopExecution();break}case"getProject":{this._sendProjectUpdate();break}}}async _saveProject(){if(!this._projectManager.getCurrentProject())return;let r=await Be.window.showSaveDialog({filters:{"ETL Project":["etl.json"]},defaultUri:this._projectManager.getProjectPath()?Be.Uri.file(this._projectManager.getProjectPath()):void 0});if(r)try{await this._projectManager.saveProject(r.fsPath),Be.window.showInformationMessage(`Project saved to ${r.fsPath}`)}catch(n){Be.window.showErrorMessage(`Failed to save project: ${n}`)}}async _loadProject(){let e=await Be.window.showOpenDialog({filters:{"ETL Project":["etl.json"]},canSelectMany:!1});if(e&&e[0])try{let r=await this._projectManager.loadProject(e[0].fsPath);this._updateWebview(r),Be.window.showInformationMessage(`Project loaded: ${r.name}`)}catch(r){Be.window.showErrorMessage(`Failed to load project: ${r}`)}}async _runProject(e){let r=this._projectManager.validateProject(e);if(r.length>0){Be.window.showErrorMessage(`Project validation failed:
${r.join(`
`)}`);return}let n=t._connectionManager;if(!n){Be.window.showErrorMessage("Connection manager not initialized. Please reload the extension.");return}let i=n.getActiveConnectionName();if(!i){Be.window.showErrorMessage("No active connection. Please connect to a database first.");return}let s=await n.getConnection(i);if(!s){Be.window.showErrorMessage(`Connection not found: ${i}`);return}let o=Be.window.createOutputChannel("ETL Execution");o.show(),this._cancellationTokenSource=new Be.CancellationTokenSource;let a=new US(e.variables||{}),l={extensionContext:this._context,variables:e.variables||{},nodeOutputs:new Map,connectionDetails:s,cancellationToken:this._cancellationTokenSource.token,onProgress:c=>{o.appendLine(`[${new Date().toLocaleTimeString()}] ${c}`)},variableManager:a};this._executionEngine.onStatusChange((c,u,d)=>{this._panel.webview.postMessage({type:"nodeStatusUpdate",payload:{nodeId:c,status:u,message:d}})}),this._panel.webview.postMessage({type:"executionStarted"});try{o.appendLine(`Starting ETL Project: ${e.name}`),o.appendLine(`Connection: ${i}`),o.appendLine("---");let c=await this._executionEngine.execute(e,l);o.appendLine("---"),o.appendLine(`Execution ${c.status}`),o.appendLine(`Duration: ${c.endTime?((c.endTime.getTime()-c.startTime.getTime())/1e3).toFixed(2):"N/A"} seconds`),this._panel.webview.postMessage({type:"executionEnded",payload:{status:c.status==="completed"?"Completed \u2713":"Failed \u2717"}}),c.status==="completed"?Be.window.showInformationMessage("ETL project completed successfully!"):c.status==="failed"&&Be.window.showErrorMessage("ETL project failed. Check output for details.")}catch(c){o.appendLine(`Error: ${c}`),Be.window.showErrorMessage(`ETL execution error: ${c}`),this._panel.webview.postMessage({type:"executionEnded",payload:{status:"Error \u2717"}})}finally{this._cancellationTokenSource?.dispose(),this._cancellationTokenSource=void 0}}_stopExecution(){this._cancellationTokenSource&&(this._cancellationTokenSource.cancel(),Be.window.showInformationMessage("ETL execution cancellation requested..."))}_updateProject(e){this._projectManager.createProject(e.name);for(let r of e.nodes)this._projectManager.addNode(r);for(let r of e.connections)try{this._projectManager.addConnection(r)}catch{}this._updateWebview(e)}_updateWebview(e){this._panel.webview.html=this._getHtml(e)}_sendProjectUpdate(){let e=this._projectManager.getCurrentProject();e&&this._panel.webview.postMessage({type:"projectUpdate",payload:e})}async _configureContainerChildNode(e,r){let n=r.config,i=!1;switch(r.type){case"sql":{let s=await Be.window.showInputBox({prompt:"Enter task name",value:r.name});if(s===void 0)return;let o=await Be.window.showInputBox({prompt:"Enter SQL query",value:n.query||""});o!==void 0&&(r.name=s,n.query=o,i=!0);break}case"python":{let s=await Be.window.showInputBox({prompt:"Enter task name",value:r.name});if(s===void 0)return;let o=await Be.window.showInputBox({prompt:"Enter Python script",value:n.script||""});o!==void 0&&(r.name=s,n.script=o,i=!0);break}case"variable":{let s=await Be.window.showInputBox({prompt:"Enter task name",value:r.name});if(s===void 0)return;let o=await Be.window.showInputBox({prompt:"Enter variable name",value:n.variableName||""});o&&(r.name=s,n.variableName=o,i=!0);break}default:Be.window.showInformationMessage(`Configure ${r.type} nodes by double-clicking in the main designer.`);return}if(i){let s=this._projectManager.getNode(e);if(s&&s.type==="container"){let o=s.config,a=o.nodes.findIndex(l=>l.id===r.id);a>=0&&(o.nodes[a]=r,this._projectManager.updateNode(e,{config:o}),this._sendProjectUpdate(),this._panel.webview.postMessage({type:"containerChildUpdated",payload:{containerId:e,childNode:r}}))}}}_getHtml(e){return Z6({project:e,nonce:this._getNonce()})}_getNonce(){let e="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let n=0;n<32;n++)e+=r.charAt(Math.floor(Math.random()*r.length));return e}dispose(){for(t.currentPanel=void 0,this._panel.dispose();this._disposables.length;){let e=this._disposables.pop();e&&e.dispose()}}};var tf=q(require("vscode"));function Mr(t){return`${t.dbName}.${t.schema}.${t.label}`}async function On(t,e){return await t.getConnection(e||t.getActiveConnectionName()||"")?!0:(tf.window.showErrorMessage("No database connection"),!1)}async function Xt(t,e){return tf.window.withProgress({location:tf.ProgressLocation.Notification,title:t,cancellable:!1},e)}function Eb(t){return t.replace(/'/g,"''")}function rf(t){return/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(t.trim())}var _r=q(require("vscode"));ur();function e3(t){let{context:e,connectionManager:r,schemaProvider:n}=t;return[_r.commands.registerCommand("netezza.copySelectAll",async i=>{if(i&&i.label&&i.dbName&&i.schema){let s=`SELECT * FROM ${i.dbName}.${i.schema}.${i.label} LIMIT 1000;`,o=await _r.window.showQuickPick([{label:"Open in Editor",description:"Open SQL in a new editor",value:"editor"},{label:"Copy to Clipboard",description:"Copy SQL to clipboard",value:"clipboard"}],{placeHolder:"How would you like to access the SQL?"});if(o)if(o.value==="editor"){let a=await _r.workspace.openTextDocument({content:s,language:"sql"});await _r.window.showTextDocument(a)}else await _r.env.clipboard.writeText(s),_r.window.showInformationMessage("Copied to clipboard")}}),_r.commands.registerCommand("netezza.copyDrop",async i=>{if(i&&i.label&&i.dbName&&i.schema&&i.objType){let s=Mr(i),o=`DROP ${i.objType} ${s};`;if(await _r.window.showWarningMessage(`Are you sure you want to delete ${i.objType.toLowerCase()} "${s}"?`,{modal:!0},"Yes, delete","Cancel")==="Yes, delete")try{await Xt(`Deleting ${i.objType.toLowerCase()} ${s}...`,async()=>{await cr(e,o,!0,i.connectionName,r)}),_r.window.showInformationMessage(`Deleted ${i.objType.toLowerCase()}: ${s}`),n.refresh()}catch(l){let c=l instanceof Error?l.message:String(l);_r.window.showErrorMessage(`Error during deletion: ${c}`)}}}),_r.commands.registerCommand("netezza.copyName",i=>{if(i&&i.label&&i.dbName&&i.schema){let s=Mr(i);_r.env.clipboard.writeText(s),_r.window.showInformationMessage("Copied to clipboard")}})]}var ue=q(require("vscode"));ur();function t3(t){let{context:e,connectionManager:r,metadataCache:n,schemaProvider:i}=t;return[ue.commands.registerCommand("netezza.grantPermissions",async s=>{if(s&&s.label&&s.dbName&&s.schema&&s.objType){let o=Mr(s),a=await ue.window.showQuickPick([{label:"SELECT",description:"Privileges to read data"},{label:"INSERT",description:"Privileges to insert data"},{label:"UPDATE",description:"Privileges to update data"},{label:"DELETE",description:"Privileges to delete data"},{label:"ALL",description:"All privileges (SELECT, INSERT, UPDATE, DELETE)"},{label:"LIST",description:"Privileges to list objects"}],{placeHolder:"Select privilege type"});if(!a)return;let l=await ue.window.showInputBox({prompt:"Enter user or group name",placeHolder:"e.g. SOME_USER or GROUP_NAME",validateInput:d=>!d||d.trim().length===0?"User/group name cannot be empty":rf(d)?null:"Invalid user/group name"});if(!l)return;let c=`GRANT ${a.label} ON ${o} TO ${l.trim().toUpperCase()};`;if(await ue.window.showInformationMessage(`Execute: ${c}`,{modal:!0},"Yes, execute","Cancel")==="Yes, execute"){if(!await On(r))return;try{await Xt(`Granting ${a.label} on ${o}...`,async()=>{await cr(e,c,!0,s.connectionName,r)}),ue.window.showInformationMessage(`Granted ${a.label} on ${o} to ${l.trim().toUpperCase()}`)}catch(d){let E=d instanceof Error?d.message:String(d);ue.window.showErrorMessage(`Error granting privileges: ${E}`)}}}}),ue.commands.registerCommand("netezza.addTableComment",async s=>{if(s&&s.label&&s.dbName&&s.schema&&s.objType==="TABLE"){let o=Mr(s),a=await ue.window.showInputBox({prompt:"Enter comment for table",placeHolder:"e.g. Table contains customer data",value:s.objectDescription||""});if(a===void 0)return;let l=`COMMENT ON TABLE ${o} IS '${Eb(a)}';`;try{if(!await On(r))return;await cr(e,l,!0,s.connectionName,r),ue.window.showInformationMessage(`Comment added to table: ${o}`),i.refresh()}catch(c){let u=c instanceof Error?c.message:String(c);ue.window.showErrorMessage(`Error adding comment: ${u}`)}}}),ue.commands.registerCommand("netezza.addColumnComment",async s=>{if(s&&s.label&&s.dbName&&s.parentName){let o=s.label.split(" ")[0],a=s.parentName,l=s.schema||"ADMIN",c=`${s.dbName}.${l}.${a}.${o}`,u=await ue.window.showInputBox({prompt:`Enter comment for column "${o}"`,placeHolder:"e.g. Customer ID from CRM",value:s.objectDescription||""});if(u===void 0)return;let d=`COMMENT ON COLUMN ${c} IS '${Eb(u)}';`;try{if(!await On(r))return;await cr(e,d,!0,s.connectionName,r),ue.window.showInformationMessage(`Comment added to column: ${o}`),i.refresh()}catch(E){let f=E instanceof Error?E.message:String(E);ue.window.showErrorMessage(`Error adding comment: ${f}`)}}}),ue.commands.registerCommand("netezza.truncateTable",async s=>{if(s&&s.label&&s.dbName&&s.schema&&s.objType==="TABLE"){let o=Mr(s),a=`TRUNCATE TABLE ${o};`;if(await ue.window.showWarningMessage(`\u26A0\uFE0F WARNING: Are you sure you want to delete ALL data from the table "${o}"?

${a}

This operation is IRREVERSIBLE!`,{modal:!0},"Yes, delete all data","Cancel")==="Yes, delete all data"){if(!await On(r))return;try{await Xt(`Clearing table ${o}...`,async()=>{await cr(e,a,!0,s.connectionName,r)}),ue.window.showInformationMessage(`Table cleared: ${o}`)}catch(c){let u=c instanceof Error?c.message:String(c);ue.window.showErrorMessage(`Error clearing table: ${u}`)}}}}),ue.commands.registerCommand("netezza.addPrimaryKey",async s=>{if(s&&s.label&&s.dbName&&s.schema&&s.objType==="TABLE"){let o=Mr(s),a=await ue.window.showInputBox({prompt:"Enter primary key constraint name",placeHolder:`e.g. PK_${s.label}`,value:`PK_${s.label}`,validateInput:E=>!E||E.trim().length===0?"Constraint name cannot be empty":rf(E)?null:"Invalid constraint name"});if(!a)return;let l=await ue.window.showInputBox({prompt:"Enter primary key column names (comma separated)",placeHolder:"e.g. COL1, COL2 or ID",validateInput:E=>!E||E.trim().length===0?"You must provide at least one column":null});if(!l)return;let c=l.split(",").map(E=>E.trim().toUpperCase()).join(", "),u=`ALTER TABLE ${o} ADD CONSTRAINT ${a.trim().toUpperCase()} PRIMARY KEY (${c});`;if(await ue.window.showInformationMessage(`Add primary key to table "${o}"?

${u}`,{modal:!0},"Yes, add","Cancel")==="Yes, add"){if(!await On(r))return;try{await Xt(`Adding primary key to ${o}...`,async()=>{await cr(e,u,!0,s.connectionName,r)}),ue.window.showInformationMessage(`Primary key added: ${a.trim().toUpperCase()}`),i.refresh()}catch(E){let f=E instanceof Error?E.message:String(E);ue.window.showErrorMessage(`Error adding primary key: ${f}`)}}}}),ue.commands.registerCommand("netezza.addForeignKey",async s=>{if(s&&s.label&&s.dbName&&s.schema&&s.objType==="TABLE"){let o=Mr(s),a=await ue.window.showInputBox({prompt:"Enter foreign key constraint name",placeHolder:`e.g. FK_${s.label}`,value:`FK_${s.label}`,validateInput:h=>!h||h.trim().length===0?"Constraint name cannot be empty":rf(h)?null:"Invalid constraint name"});if(!a)return;let l=await ue.window.showInputBox({prompt:"Enter foreign key column names (comma separated)",placeHolder:"e.g. COL1, COL2 or ID",validateInput:h=>!h||h.trim().length===0?"You must provide at least one column":null});if(!l)return;let c=await ue.window.showInputBox({prompt:"Enter referenced table name (schema.table)",placeHolder:"e.g. SCHEMA_NAME.TABLE_NAME",validateInput:h=>!h||h.trim().length===0?"Referenced table name cannot be empty":null});if(!c)return;let u=await ue.window.showInputBox({prompt:"Enter referenced table column names (comma separated)",placeHolder:"e.g. COL1, COL2 or ID",validateInput:h=>!h||h.trim().length===0?"You must provide at least one column":null});if(!u)return;let d=l.split(",").map(h=>h.trim().toUpperCase()).join(", "),E=u.split(",").map(h=>h.trim().toUpperCase()).join(", "),f=`ALTER TABLE ${o} ADD CONSTRAINT ${a.trim().toUpperCase()} FOREIGN KEY (${d}) REFERENCES ${c.trim().toUpperCase()} (${E});`;if(await ue.window.showInformationMessage(`Add foreign key to table "${o}"?

${f}`,{modal:!0},"Yes, add","Cancel")==="Yes, add"){if(!await On(r))return;try{await Xt(`Adding foreign key to ${o}...`,async()=>{await cr(e,f,!0,s.connectionName,r)}),ue.window.showInformationMessage(`Foreign key added: ${a.trim().toUpperCase()}`),i.refresh()}catch(h){let S=h instanceof Error?h.message:String(h);ue.window.showErrorMessage(`Error adding foreign key: ${S}`)}}}}),ue.commands.registerCommand("netezza.addUniqueConstraint",async s=>{if(s&&s.label&&s.dbName&&s.schema&&s.objType==="TABLE"){let o=Mr(s),a=await ue.window.showInputBox({prompt:"Enter unique constraint name",placeHolder:`e.g. UQ_${s.label}`,value:`UQ_${s.label}`,validateInput:E=>!E||E.trim().length===0?"Constraint name cannot be empty":rf(E)?null:"Invalid constraint name"});if(!a)return;let l=await ue.window.showInputBox({prompt:"Enter unique constraint column names (comma separated)",placeHolder:"e.g. COL1, COL2 or EMAIL",validateInput:E=>!E||E.trim().length===0?"You must provide at least one column":null});if(!l)return;let c=l.split(",").map(E=>E.trim().toUpperCase()).join(", "),u=`ALTER TABLE ${o} ADD CONSTRAINT ${a.trim().toUpperCase()} UNIQUE (${c});`;if(await ue.window.showInformationMessage(`Add unique constraint to table "${o}"?

${u}`,{modal:!0},"Yes, add","Cancel")==="Yes, add"){if(!await On(r))return;try{await Xt(`Adding unique constraint to ${o}...`,async()=>{await cr(e,u,!0,s.connectionName,r)}),ue.window.showInformationMessage(`Unique constraint added: ${a.trim().toUpperCase()}`),i.refresh()}catch(E){let f=E instanceof Error?E.message:String(E);ue.window.showErrorMessage(`Error adding unique constraint: ${f}`)}}}}),ue.commands.registerCommand("netezza.changeOwner",async s=>{if(s&&s.label&&s.dbName&&s.schema&&s.objType==="TABLE"){let o=Mr(s),a=await ue.window.showInputBox({prompt:"Enter new owner name",placeHolder:"e.g. USER_NAME or GROUP_NAME"});if(!a)return;let l=`ALTER TABLE ${o} OWNER TO ${a.trim()};`;try{if(!await On(r))return;await cr(e,l,!0,s.connectionName,r),ue.window.showInformationMessage(`Owner changed to ${a} for ${o}`),n.invalidateSchema(s.connectionName,s.dbName,s.schema),i.refresh()}catch(c){let u=c instanceof Error?c.message:String(c);ue.window.showErrorMessage(`Error changing owner: ${u}`)}}}),ue.commands.registerCommand("netezza.renameTable",async s=>{if(s&&s.label&&s.dbName&&s.schema&&s.objType==="TABLE"){let o=Mr(s),a=await ue.window.showInputBox({prompt:"Enter new table name",placeHolder:"NewTableName",value:s.label});if(!a||a===s.label)return;let l=`ALTER TABLE ${o} RENAME TO ${a.trim()};`;try{if(!await On(r))return;await cr(e,l,!0,s.connectionName,r),ue.window.showInformationMessage(`Table renamed to ${a}`),n.invalidateSchema(s.connectionName,s.dbName,s.schema),i.refresh()}catch(c){let u=c instanceof Error?c.message:String(c);ue.window.showErrorMessage(`Error renaming table: ${u}`)}}})]}var Qe=q(require("vscode"));ur();function u3(t){let{context:e,connectionManager:r}=t;return[Qe.commands.registerCommand("netezza.groomTable",async n=>{if(n&&n.label&&n.dbName&&n.schema&&n.objType==="TABLE"){let i=Mr(n),s=await Qe.window.showQuickPick([{label:"RECORDS ALL",description:"Groom all records (reclaim space from deleted rows)"},{label:"RECORDS READY",description:"Groom only ready records"},{label:"PAGES ALL",description:"Groom all pages (reorganize data pages)"},{label:"PAGES START",description:"Groom pages from start"},{label:"VERSIONS",description:"Groom versions (clean up old row versions)"}],{placeHolder:"Select GROOM mode"});if(!s)return;let o=await Qe.window.showQuickPick([{label:"DEFAULT",description:"Use default backupset",value:"DEFAULT"},{label:"NONE",description:"No backupset",value:"NONE"},{label:"Custom",description:"Specify custom backupset ID",value:"CUSTOM"}],{placeHolder:"Select RECLAIM BACKUPSET option"});if(!o)return;let a=o.value;if(o.value==="CUSTOM"){let u=await Qe.window.showInputBox({prompt:"Enter backupset ID",placeHolder:"e.g. 12345",validateInput:d=>!d||d.trim().length===0?"Backupset ID cannot be empty":/^\d+$/.test(d.trim())?null:"Backupset ID must be a number"});if(!u)return;a=u.trim()}let l=`GROOM TABLE ${i} ${s.label} RECLAIM BACKUPSET ${a};`;if(await Qe.window.showWarningMessage(`Execute GROOM on table "${i}"?

${l}

Warning: This operation may be time-consuming for large tables.`,{modal:!0},"Yes, execute","Cancel")==="Yes, execute")try{let u=Date.now();await Xt(`GROOM TABLE ${i} (${s.label})...`,async()=>{await cr(e,l,!0,n.connectionName,r)});let d=((Date.now()-u)/1e3).toFixed(1);Qe.window.showInformationMessage(`GROOM completed successfully (${d}s): ${i}`)}catch(u){let d=u instanceof Error?u.message:String(u);Qe.window.showErrorMessage(`Error during GROOM: ${d}`)}}}),Qe.commands.registerCommand("netezza.generateStatistics",async n=>{if(n&&n.label&&n.dbName&&n.schema&&n.objType==="TABLE"){let i=Mr(n),s=`GENERATE EXPRESS STATISTICS ON ${i};`;if(await Qe.window.showInformationMessage(`Generate statistics for table "${i}"?

${s}`,{modal:!0},"Yes, generate","Cancel")==="Yes, generate")try{let a=Date.now();await Xt(`Generating statistics for ${i}...`,async()=>{await cr(e,s,!0,n.connectionName,r)});let l=((Date.now()-a)/1e3).toFixed(1);Qe.window.showInformationMessage(`Statistics generated successfully (${l}s): ${i}`)}catch(a){let l=a instanceof Error?a.message:String(a);Qe.window.showErrorMessage(`Error generating statistics: ${l}`)}}}),Qe.commands.registerCommand("netezza.checkSkew",async n=>{if(n&&n.label&&n.dbName&&n.schema&&n.objType==="TABLE"){let i=Mr(n),s=`SELECT datasliceid, count(*) as row_count FROM ${i} GROUP BY 1 ORDER BY 1;`;if(await Qe.window.showInformationMessage(`Check skew for "${i}"?

This will run: ${s}

Note: This may be slow on very large tables.`,{modal:!0},"Yes, check skew","Cancel")==="Yes, check skew"){let a=await Qe.workspace.openTextDocument({content:`-- Check Skew for ${i}
${s}`,language:"sql"});await Qe.window.showTextDocument(a),Qe.commands.executeCommand("netezza.runQuery")}}}),Qe.commands.registerCommand("netezza.recreateTable",async n=>{if(!n||!n.label||!n.dbName||!n.schema||!n.objType||n.objType!=="TABLE"){Qe.window.showErrorMessage("Invalid object selected for Recreate Table");return}let i=await r.getConnection(r.getActiveConnectionName()||"");if(!i){Qe.window.showErrorMessage("Connection not configured. Please connect via Netezza: Connect...");return}let s=await Qe.window.showInputBox({prompt:"Enter temporary table name (Optional)",placeHolder:"Leave empty to auto-generate timestamped name",value:""});if(s!==void 0)try{await Xt(`Generating Recreate Script for ${n.label}...`,async()=>{let{generateRecreateTableScript:o}=await Promise.resolve().then(()=>(c3(),l3)),a=await o(i,n.dbName,n.schema,n.label,s||void 0);if(a.success&&a.sqlScript){let l=await Qe.workspace.openTextDocument({content:a.sqlScript,language:"sql"});await Qe.window.showTextDocument(l),Qe.window.showInformationMessage(`Recreate script generated for ${n.label}`)}else throw new Error(a.error||"Script generation failed")})}catch(o){let a=o instanceof Error?o.message:String(o);Qe.window.showErrorMessage(`Error generating recreate script: ${a}`)}})]}var Oe=q(require("vscode"));ur();function E3(t){let{context:e,connectionManager:r}=t;return[Oe.commands.registerCommand("netezza.createDDL",async n=>{try{if(!n||!n.label||!n.dbName||!n.schema||!n.objType){Oe.window.showErrorMessage("Invalid object selected for DDL generation");return}let i=await r.getConnection(r.getActiveConnectionName()||"");if(!i){Oe.window.showErrorMessage("Connection not configured. Please connect via Netezza: Connect...");return}await Xt(`Generating DDL for ${n.objType} ${n.label}...`,async()=>{let{generateDDL:s}=await Promise.resolve().then(()=>(of(),Tb)),o=await s(i,n.dbName,n.schema,n.label,n.objType);if(o.success&&o.ddlCode){let a=await Oe.window.showQuickPick([{label:"Open in Editor",description:"Open DDL code in a new editor",value:"editor"},{label:"Copy to Clipboard",description:"Copy DDL code to clipboard",value:"clipboard"}],{placeHolder:"How would you like to access the DDL code?"});if(a)if(a.value==="editor"){let l=await Oe.workspace.openTextDocument({content:o.ddlCode,language:"sql"});await Oe.window.showTextDocument(l),Oe.window.showInformationMessage(`DDL code generated for ${n.objType} ${n.label}`)}else a.value==="clipboard"&&(await Oe.env.clipboard.writeText(o.ddlCode),Oe.window.showInformationMessage("DDL code copied to clipboard"))}else throw new Error(o.error||"DDL generation failed")})}catch(i){let s=i instanceof Error?i.message:String(i);Oe.window.showErrorMessage(`Error generating DDL: ${s}`)}}),Oe.commands.registerCommand("netezza.compareSchema",async n=>{try{if(!n||!n.label||!n.dbName||!n.schema||!n.objType){Oe.window.showErrorMessage("Invalid object selected for comparison");return}let i=await r.getConnection(r.getActiveConnectionName()||"");if(!i){Oe.window.showErrorMessage("Connection not configured. Please connect via Netezza: Connect...");return}let s=n.objType,o=`${n.dbName}.${n.schema}.${n.label}`,a=[];if(await Xt(`Loading ${s}s for comparison...`,async()=>{let c=s==="PROCEDURE"?"OBJTYPE = 'PROCEDURE'":s==="VIEW"?"OBJTYPE = 'VIEW'":"OBJTYPE = 'TABLE'",u=s==="PROCEDURE"?`SELECT DISTINCT SCHEMA, PROCEDURESIGNATURE AS OBJNAME FROM ${n.dbName}.._V_PROCEDURE WHERE DATABASE = '${n.dbName.toUpperCase()}' ORDER BY SCHEMA, PROCEDURESIGNATURE`:`SELECT SCHEMA, OBJNAME FROM ${n.dbName}.._V_OBJECT_DATA WHERE DBNAME = '${n.dbName.toUpperCase()}' AND ${c} ORDER BY SCHEMA, OBJNAME`,d=await ae(e,u,!0,r,n.connectionName);if(d&&d.data&&d.data.length>0){let E=pe(d);for(let f of E){let p=f.OBJNAME,h=f.SCHEMA;`${n.dbName}.${h}.${p}`.toUpperCase()!==o.toUpperCase()&&a.push({label:p,description:`${n.dbName}.${h}`,db:n.dbName,schema:h,name:p})}}}),a.length===0){Oe.window.showWarningMessage(`No other ${s}s found to compare with.`);return}let l=await Oe.window.showQuickPick(a,{placeHolder:`Select ${s} to compare with ${n.label}`,matchOnDescription:!0});if(!l)return;await Xt(`Comparing ${n.label} with ${l.label}...`,async()=>{if(s==="PROCEDURE"){let{compareProcedures:c}=await Promise.resolve().then(()=>(Rb(),Sb)),{SchemaCompareView:u}=await Promise.resolve().then(()=>(gb(),mb)),d=await c(i,n.dbName,n.schema,n.label,l.db,l.schema,l.name);u.createOrShow(e.extensionUri,d,"procedure")}else{let{compareTableStructures:c}=await Promise.resolve().then(()=>(Rb(),Sb)),{SchemaCompareView:u}=await Promise.resolve().then(()=>(gb(),mb)),d=await c(i,n.dbName,n.schema,n.label,l.db,l.schema,l.name);u.createOrShow(e.extensionUri,d,"table")}}),Oe.window.showInformationMessage(`Comparison complete: ${n.label} \u2194 ${l.label}`)}catch(i){let s=i instanceof Error?i.message:String(i);Oe.window.showErrorMessage(`Error comparing objects: ${s}`)}}),Oe.commands.registerCommand("netezza.batchExportDDL",async n=>{try{if(!n||!n.contextValue){Oe.window.showErrorMessage("Invalid node selected for batch DDL export");return}let i=n.contextValue==="database",s=n.contextValue.startsWith("typeGroup:");if(!i&&!s){Oe.window.showErrorMessage("Batch DDL export is only available on database or object type nodes");return}let o=await r.getConnection(r.getActiveConnectionName()||"");if(!o){Oe.window.showErrorMessage("Connection not configured. Please connect via Netezza: Connect...");return}let a=n.dbName||n.label,l=s?[n.objType||n.contextValue.replace("typeGroup:","")]:void 0;await Xt(i?`Exporting all DDL for database ${a}...`:`Exporting ${l?.[0]} DDL for ${a}...`,async()=>{let{generateBatchDDL:c}=await Promise.resolve().then(()=>(of(),Tb)),u=await c({connectionDetails:o,database:a,objectTypes:l});if(u.success&&u.ddlCode){let d=await Oe.window.showQuickPick([{label:"Open in Editor",description:"Open DDL code in a new editor",value:"editor"},{label:"Save to File",description:"Save DDL code to a .sql file",value:"file"},{label:"Copy to Clipboard",description:"Copy DDL code to clipboard",value:"clipboard"}],{placeHolder:`${u.objectCount} objects found. How would you like to access the DDL code?`});if(d)if(d.value==="editor"){let E=await Oe.workspace.openTextDocument({content:u.ddlCode,language:"sql"});await Oe.window.showTextDocument(E),Oe.window.showInformationMessage(`DDL exported: ${u.objectCount} objects`)}else if(d.value==="file"){let E=i?`${a}_all_ddl.sql`:`${a}_${l?.[0]?.toLowerCase()||"objects"}_ddl.sql`,f=await Oe.window.showSaveDialog({defaultUri:Oe.Uri.file(E),filters:{"SQL Files":["sql"]}});f&&(await Oe.workspace.fs.writeFile(f,Buffer.from(u.ddlCode,"utf8")),Oe.window.showInformationMessage(`DDL saved to ${f.fsPath}`))}else d.value==="clipboard"&&(await Oe.env.clipboard.writeText(u.ddlCode),Oe.window.showInformationMessage(`DDL copied: ${u.objectCount} objects`));u.errors.length>0&&Oe.window.showWarningMessage(`Batch DDL completed with ${u.errors.length} error(s). Check the generated file for details.`)}else throw new Error(u.errors.join(", ")||"Batch DDL generation failed")})}catch(i){let s=i instanceof Error?i.message:String(i);Oe.window.showErrorMessage(`Error exporting DDL: ${s}`)}})]}var on=q(require("vscode"));ur();function _3(t){let{context:e,connectionManager:r}=t;return[on.commands.registerCommand("netezza.showERD",async n=>{try{if(!n||!n.contextValue||!n.contextValue.startsWith("typeGroup:")){on.window.showErrorMessage("Please right-click on a TABLE type group to show ERD");return}let i=n.dbName||n.label,s=n.connectionName;if(!s){on.window.showErrorMessage("No connection selected");return}let o=`SELECT DISTINCT SCHEMA FROM ${i}.._V_TABLE ORDER BY SCHEMA`,a=await ae(e,o,!0,r,s);if(!a||!a.data){on.window.showErrorMessage("Could not retrieve schemas");return}let l=pe(a);if(l.length===0){on.window.showWarningMessage("No tables found in this database");return}let c;if(l.length===1)c=l[0].SCHEMA;else{let E=l.map(p=>({label:p.SCHEMA,description:`${i}.${p.SCHEMA}`})),f=await on.window.showQuickPick(E,{placeHolder:"Select schema to show ERD for"});if(!f)return;c=f.label}let u=0,d=0;await Xt(`Building ERD for ${i}.${c}...`,async E=>{let{buildERDData:f}=await Promise.resolve().then(()=>(S3(),T3)),{ERDView:p}=await Promise.resolve().then(()=>(A3(),R3)),h=await f(e,r,s,i,c,E);u=h.tables.length,d=h.relationships.length,p.createOrShow(e.extensionUri,h)}),on.window.showInformationMessage(`ERD generated: ${u} tables, ${d} relationships`)}catch(i){let s=i instanceof Error?i.message:String(i);on.window.showErrorMessage(`Error generating ERD: ${s}`)}}),on.commands.registerCommand("netezza.showSessionMonitor",async()=>{try{if(!await On(r)){on.window.showErrorMessage("Please connect to a Netezza database first.");return}let{SessionMonitorView:n}=await Promise.resolve().then(()=>(g3(),m3));n.createOrShow(e.extensionUri,e,r)}catch(n){let i=n instanceof Error?n.message:String(n);on.window.showErrorMessage(`Error opening Session Monitor: ${i}`)}})]}var bt=q(require("vscode"));ur();function I3(t){let{context:e,connectionManager:r,metadataCache:n,schemaTreeView:i}=t;return[bt.commands.registerCommand("netezza.revealInSchema",async s=>{let o=bt.window.setStatusBarMessage(`$(loading~spin) Revealing ${s.name} in schema...`);try{let a,l=bt.window.activeTextEditor;if(l&&l.document.languageId==="sql"&&(a=r.getConnectionForExecution(l.document.uri.toString())),a||(a=s.connectionName),a||(a=r.getActiveConnectionName()||void 0),!a){o.dispose(),bt.window.showWarningMessage("No active connection. Please select a connection first.");return}let c=s.name,u=s.objType;if(u==="COLUMN"){if(!s.parent){o.dispose(),bt.window.showWarningMessage("Cannot find column without parent table");return}c=s.parent}if(s.database){let f=n.findObjectWithType(a,s.database,s.schema,c);if(f){let p=new Qt(f.name,bt.TreeItemCollapsibleState.Collapsed,`netezza:${f.objType}`,s.database,f.objType,f.schema||s.schema,f.objId,void 0,a);await i.reveal(p,{select:!0,focus:!0,expand:!0}),o.dispose(),bt.window.setStatusBarMessage(`$(check) Found ${c} in ${s.database}.${f.schema||s.schema} (cached)`,3e3);return}else n.hasConnectionPrefetchTriggered(a)||n.triggerConnectionPrefetch(a,async p=>ae(e,p,!0,r,a))}if(!await r.getConnection(a)){o.dispose(),bt.window.showWarningMessage("Not connected to database and object not found in cache.");return}let E=s.database||await r.getCurrentDatabase(a);if(E){let f=u&&u!=="COLUMN"?`AND UPPER(OBJTYPE) = UPPER('${u}')`:"",p=s.schema?`AND UPPER(SCHEMA) = UPPER('${s.schema.replace(/'/g,"''")}')`:"",h=`
                        SELECT OBJNAME, OBJTYPE, SCHEMA, OBJID 
                        FROM ${E}.._V_OBJECT_DATA 
                        WHERE UPPER(OBJNAME) = UPPER('${c.replace(/'/g,"''")}') 
                        AND DBNAME = '${E}'
                        ${f}
                        ${p}
                        LIMIT 1
                    `;try{let S=await ae(e,h,!0,r,a);if(S&&S.data){let T=pe(S);if(T.length>0){let m=T[0];if(m.OBJTYPE==="PROCEDURE")try{let A=`SELECT PROCEDURESIGNATURE FROM ${E}.._V_PROCEDURE WHERE OBJID = ${m.OBJID}`,I=await ae(e,A,!0,r,a);if(I&&I.data&&I.data.length>0){let w=pe(I);w.length>0&&w[0].PROCEDURESIGNATURE&&(m.OBJNAME=w[0].PROCEDURESIGNATURE)}}catch(A){console.warn("Failed to resolve procedure signature:",A)}let R=new Qt(m.OBJNAME,bt.TreeItemCollapsibleState.Collapsed,`netezza:${m.OBJTYPE}`,E,m.OBJTYPE,m.SCHEMA,m.OBJID,void 0,a);await i.reveal(R,{select:!0,focus:!0,expand:!0}),o.dispose(),bt.window.setStatusBarMessage(`$(check) Found ${c} in ${E}.${m.SCHEMA}`,3e3);return}}}catch(S){console.log(`Error searching in ${E}:`,S)}}if(!E){let f=await ae(e,"SELECT DATABASE FROM system.._v_database ORDER BY DATABASE",!0,r,a);if(f&&f.data){let p=pe(f);for(let h of p){let S=h.DATABASE;try{let T=s.schema?`AND UPPER(SCHEMA) = UPPER('${s.schema.replace(/'/g,"''")}')`:"",m=`
                                    SELECT OBJNAME, OBJTYPE, SCHEMA, OBJID 
                                    FROM ${S}.._V_OBJECT_DATA 
                                    WHERE UPPER(OBJNAME) = UPPER('${c.replace(/'/g,"''")}') 
                                    AND DBNAME = '${S}'
                                    ${T}
                                    LIMIT 1
                                `,R=await ae(e,m,!0,r,a);if(R&&R.data){let A=pe(R);if(A.length>0){let I=A[0];if(I.OBJTYPE==="PROCEDURE")try{let g=`SELECT PROCEDURESIGNATURE FROM ${S}.._V_PROCEDURE WHERE OBJID = ${I.OBJID}`,L=await ae(e,g,!0,r,a);if(L&&L.data&&L.data.length>0){let y=pe(L);y.length>0&&y[0].PROCEDURESIGNATURE&&(I.OBJNAME=y[0].PROCEDURESIGNATURE)}}catch(g){console.warn("Failed to resolve procedure signature:",g)}let w=new Qt(I.OBJNAME,bt.TreeItemCollapsibleState.Collapsed,`netezza:${I.OBJTYPE}`,S,I.OBJTYPE,I.SCHEMA,I.OBJID,void 0,a);await i.reveal(w,{select:!0,focus:!0,expand:!0}),o.dispose(),bt.window.setStatusBarMessage(`$(check) Found ${c} in ${S}.${I.SCHEMA}`,3e3);return}}}catch(T){console.log(`Error searching in ${S}:`,T)}}}}o.dispose(),bt.window.showWarningMessage(`Could not find ${u||"object"} ${c}`)}catch(a){o.dispose();let l=a instanceof Error?a.message:String(a);bt.window.showErrorMessage(`Error revealing item: ${l}`)}}),bt.commands.registerCommand("netezza.showQueryHistory",()=>{bt.commands.executeCommand("netezza.queryHistory.focus")}),bt.commands.registerCommand("netezza.clearQueryHistory",async()=>{let{QueryHistoryManager:s}=await Promise.resolve().then(()=>(zf(),cw)),o=new s(e);await bt.window.showWarningMessage("Are you sure you want to clear all query history?",{modal:!0},"Clear All")==="Clear All"&&(await o.clearHistory(),bt.window.showInformationMessage("Query history cleared"))})]}function YS(t){return[...e3(t),...t3(t),...u3(t),...E3(t),..._3(t),...I3(t)]}var j=q(require("vscode")),wb=q(require("path")),lf=q(require("os"));function af(t,e,r){let n=Date.now()-r;t.appendLine(`[${new Date().toLocaleTimeString()}] ${e} completed in ${n}ms`),t.show(!0)}function P3(t){let{context:e,connectionManager:r,outputChannel:n}=t;return[j.commands.registerCommand("netezza.exportToXlsb",async()=>{let i=j.window.activeTextEditor;if(!i){j.window.showErrorMessage("No active editor found");return}let s=i.selection,o=s.isEmpty?i.document.getText():i.document.getText(s);if(!o.trim()){j.window.showWarningMessage("No SQL query to export");return}let a=await j.window.showSaveDialog({filters:{"Excel Binary Workbook":["xlsb"]},saveLabel:"Export to XLSB"});if(!a)return;let l=Date.now();try{let c=i.document.uri.toString(),u=r.getConnectionForExecution(c),d=await r.getConnection(u||"");if(!d)throw new Error("Connection not configured. Please connect via Netezza: Connect...");await j.window.withProgress({location:j.ProgressLocation.Notification,title:"Exporting to XLSB...",cancellable:!1},async E=>{let{exportQueryToXlsb:f}=await Promise.resolve().then(()=>(Oi(),cs)),p=await f(d,o,a.fsPath,!1,h=>{E.report({message:h}),n.appendLine(`[XLSB Export] ${h}`)});if(!p.success)throw new Error(p.message)}),af(n,"Export to XLSB",l),j.window.showInformationMessage(`Results exported to ${a.fsPath}`)}catch(c){let u=c instanceof Error?c.message:String(c);j.window.showErrorMessage(`Error exporting to XLSB: ${u}`)}}),j.commands.registerCommand("netezza.exportToCsv",async()=>{let i=j.window.activeTextEditor;if(!i){j.window.showErrorMessage("No active editor found");return}let s=i.selection,o=s.isEmpty?i.document.getText():i.document.getText(s);if(!o.trim()){j.window.showWarningMessage("No SQL query to export");return}let a=await j.window.showSaveDialog({filters:{"CSV Files":["csv"]},saveLabel:"Export to CSV"});if(!a)return;let l=Date.now();try{let c=i.document.uri.toString(),u=r.getConnectionForExecution(c),d=await r.getConnection(u||"");if(!d)throw new Error("Connection not configured. Please connect via Netezza: Connect...");await j.window.withProgress({location:j.ProgressLocation.Notification,title:"Exporting to CSV...",cancellable:!1},async E=>{let{exportToCsv:f}=await Promise.resolve().then(()=>(EA(),xw));await f(e,d,o,a.fsPath,E)}),af(n,"Export to CSV",l),j.window.showInformationMessage(`Results exported to ${a.fsPath}`)}catch(c){let u=c instanceof Error?c.message:String(c);j.window.showErrorMessage(`Error exporting to CSV: ${u}`)}}),j.commands.registerCommand("netezza.copyXlsbToClipboard",async()=>{let i=j.window.activeTextEditor;if(!i){j.window.showErrorMessage("No active editor found");return}let s=i.selection,o=s.isEmpty?i.document.getText():i.document.getText(s);if(!o.trim()){j.window.showWarningMessage("No SQL query to export");return}try{let a=i.document.uri.toString(),l=r.getConnectionForExecution(a),c=await r.getConnection(l||"");if(!c)throw new Error("Connection not configured. Please connect via Netezza: Connect...");let u=Date.now();if(await j.window.withProgress({location:j.ProgressLocation.Notification,title:"Exporting to XLSB and copying to clipboard...",cancellable:!1},async E=>{let{exportQueryToXlsb:f,getTempFilePath:p}=await Promise.resolve().then(()=>(Oi(),cs)),h=p(),S=await f(c,o,h,!0,T=>{E.report({message:T}),n.appendLine(`[XLSB Clipboard] ${T}`)});if(!S.success)throw new Error(S.message);if(!S.details?.clipboard_success)throw new Error("Failed to copy file to clipboard")}),af(n,"Copy XLSB to Clipboard",u),await j.window.showInformationMessage("Excel file copied to clipboard! You can now paste it into Excel or Windows Explorer.","Show Temp Folder","OK")==="Show Temp Folder"){let E=lf.tmpdir();await j.env.openExternal(j.Uri.file(E))}}catch(a){let l=a instanceof Error?a.message:String(a);j.window.showErrorMessage(`Error copying XLSB to clipboard: ${l}`)}}),j.commands.registerCommand("netezza.exportToXlsbAndOpen",async()=>{let i=j.window.activeTextEditor;if(!i){j.window.showErrorMessage("No active editor found");return}let s=i.selection,o=s.isEmpty?i.document.getText():i.document.getText(s);if(!o.trim()){j.window.showWarningMessage("No SQL query to export");return}let a=await j.window.showSaveDialog({filters:{"Excel Binary Workbook":["xlsb"]},saveLabel:"Export to XLSB and Open"});if(!a)return;let l=Date.now();try{let c=i.document.uri.toString(),u=r.getConnectionForExecution(c),d=await r.getConnection(u||"");if(!d)throw new Error("Connection not configured. Please connect via Netezza: Connect...");await j.window.withProgress({location:j.ProgressLocation.Notification,title:"Exporting to XLSB and opening...",cancellable:!1},async E=>{let{exportQueryToXlsb:f}=await Promise.resolve().then(()=>(Oi(),cs)),p=await f(d,o,a.fsPath,!1,h=>{E.report({message:h}),n.appendLine(`[XLSB Export] ${h}`)});if(!p.success)throw new Error(p.message)}),af(n,"Export to XLSB and Open",l),await j.env.openExternal(a),j.window.showInformationMessage(`Results exported and opened: ${a.fsPath}`)}catch(c){let u=c instanceof Error?c.message:String(c);j.window.showErrorMessage(`Error exporting to XLSB: ${u}`)}}),j.commands.registerCommand("netezza.exportCurrentResultToXlsbAndOpen",async(i,s)=>{try{if(!i||Array.isArray(i)&&i.length===0){j.window.showErrorMessage("No data to export");return}let o=i;if(Array.isArray(i)&&i.length>1){let d=await j.window.showQuickPick(["Export All Results","Export Active Result Only"],{placeHolder:"Multiple results available. What would you like to export?"});if(!d)return;if(d==="Export Active Result Only"){let E=i.find(f=>f.isActive);E?o=[E]:o=[i[0]]}}let a=new Date().toISOString().replace(/[:.]/g,"-"),l=wb.join(lf.tmpdir(),`netezza_results_${a}.xlsb`),c=Date.now();await j.window.withProgress({location:j.ProgressLocation.Notification,title:"Creating Excel file...",cancellable:!1},async d=>{if(Array.isArray(o)&&o.length>0&&"columns"in o[0]&&"rows"in o[0]){let{exportStructuredToXlsb:f}=await Promise.resolve().then(()=>(Oi(),cs)),p=await f(o,l,!1,h=>{d.report({message:h}),n.appendLine(`[Structured to XLSB] ${h}`)});if(!p.success)throw new Error(p.message)}else{let{exportCsvToXlsb:f}=await Promise.resolve().then(()=>(Oi(),cs)),p=await f(o,l,!1,{source:"Query Results Panel",sql:s},h=>{d.report({message:h}),n.appendLine(`[CSV to XLSB] ${h}`)});if(!p.success)throw new Error(p.message)}});let u=Date.now()-c;n.appendLine(`[${new Date().toLocaleTimeString()}] Export Current Result to Excel completed in ${u}ms`),await j.env.openExternal(j.Uri.file(l)),j.window.showInformationMessage(`Results exported and opened: ${l}`)}catch(o){let a=o instanceof Error?o.message:String(o);j.window.showErrorMessage(`Error exporting to Excel: ${a}`)}}),j.commands.registerCommand("netezza.copyCurrentResultToXlsbClipboard",async(i,s)=>{try{if(!i||Array.isArray(i)&&i.length===0){j.window.showErrorMessage("No data to copy");return}let o=i;if(Array.isArray(i)&&i.length>1){let d=await j.window.showQuickPick(["Export All Results","Export Active Result Only"],{placeHolder:"Multiple results available. What would you like to export?"});if(!d)return;if(d==="Export Active Result Only"){let E=i.find(f=>f.isActive);E?o=[E]:o=[i[0]]}}let{getTempFilePath:a}=await Promise.resolve().then(()=>(Oi(),cs)),l=a(),c=Date.now();if(await j.window.withProgress({location:j.ProgressLocation.Notification,title:"Copying to clipboard as Excel...",cancellable:!1},async d=>{if(Array.isArray(o)&&o.length>0&&"columns"in o[0]&&"rows"in o[0]){let{exportStructuredToXlsb:f}=await Promise.resolve().then(()=>(Oi(),cs)),p=await f(o,l,!0,h=>{d.report({message:h}),n.appendLine(`[Clipboard Structured XLSB] ${h}`)});if(!p.success)throw new Error(p.message)}else{let{exportCsvToXlsb:f}=await Promise.resolve().then(()=>(Oi(),cs)),p=await f(o,l,!0,{source:"Query Results Panel",sql:s},h=>{d.report({message:h}),n.appendLine(`[Clipboard XLSB] ${h}`)});if(!p.success)throw new Error(p.message)}}),af(n,"Copy Result as Excel",c),await j.window.showInformationMessage("Excel file copied to clipboard! You can now paste it into Excel or Windows Explorer.","Show Temp Folder","OK")==="Show Temp Folder"){let d=lf.tmpdir();await j.env.openExternal(j.Uri.file(d))}}catch(o){let a=o instanceof Error?o.message:String(o);j.window.showErrorMessage(`Error copying to Excel: ${a}`)}}),j.commands.registerCommand("netezza.exportCurrentResultToXlsxAndOpen",async(i,s)=>{try{if(!i||Array.isArray(i)&&i.length===0){j.window.showErrorMessage("No data to export");return}let o=i;if(Array.isArray(i)&&i.length>1){let d=await j.window.showQuickPick(["Export All Results","Export Active Result Only"],{placeHolder:"Multiple results available. What would you like to export?"});if(!d)return;if(d==="Export Active Result Only"){let E=i.find(f=>f.isActive);E?o=[E]:o=[i[0]]}}let a=new Date().toISOString().replace(/[:.]/g,"-"),l=wb.join(lf.tmpdir(),`netezza_results_${a}.xlsx`),c=Date.now();await j.window.withProgress({location:j.ProgressLocation.Notification,title:"Creating Excel XLSX file...",cancellable:!1},async d=>{if(Array.isArray(o)&&o.length>0&&"columns"in o[0]&&"rows"in o[0]){let{exportStructuredToXlsx:f}=await Promise.resolve().then(()=>(yb(),bb)),p=await f(o,l,!1,h=>{d.report({message:h}),n.appendLine(`[Structured to XLSX] ${h}`)});if(!p.success)throw new Error(p.message)}else{let{exportCsvToXlsx:f}=await Promise.resolve().then(()=>(yb(),bb)),p=await f(o,l,!1,{source:"Query Results Panel",sql:s},h=>{d.report({message:h}),n.appendLine(`[CSV to XLSX] ${h}`)});if(!p.success)throw new Error(p.message)}});let u=Date.now()-c;n.appendLine(`[${new Date().toLocaleTimeString()}] Export Current Result to XLSX completed in ${u}ms`),await j.env.openExternal(j.Uri.file(l)),j.window.showInformationMessage(`Results exported and opened: ${l}`)}catch(o){let a=o instanceof Error?o.message:String(o);j.window.showErrorMessage(`Error exporting to Excel XLSX: ${a}`)}})]}var Ce=q(require("vscode")),W3=q(require("path"));ur();function H3(t,e,r){let n=Date.now()-r;t.appendLine(`[${new Date().toLocaleTimeString()}] ${e} completed in ${n}ms`),t.show(!0)}async function G3(t,e,r){try{let i=await ae(t,"SELECT CURRENT_CATALOG, CURRENT_SCHEMA",!0,r,e);if(i&&i.data){let s=pe(i);if(s&&s.length>0){let o=s[0].CURRENT_CATALOG||"SYSTEM",a=s[0].CURRENT_SCHEMA||"ADMIN",c=new Date().toISOString().slice(0,10).replace(/-/g,""),u=Math.floor(Math.random()*1e4).toString().padStart(4,"0");return`${o}.${a}.IMPORT_${c}_${u}`}}}catch(n){Ce.window.showErrorMessage(`Error getting current database/schema: ${n instanceof Error?n.message:String(n)}`)}return null}function $3(t){let{context:e,connectionManager:r,outputChannel:n}=t;return[Ce.commands.registerCommand("netezza.importClipboard",async()=>{try{let s=Ce.window.activeTextEditor?.document?.uri?.toString(),o=r.getConnectionForExecution(s),a=await r.getConnection(o||"");if(!a)throw new Error("Connection not configured. Please connect via Netezza: Connect...");let l=await Ce.window.showInputBox({prompt:"Enter target table name (leave empty for auto-generated name)",placeHolder:"e.g. my_schema.my_table or leave empty",validateInput:E=>!E||E.trim().length===0||/^[a-zA-Z_][a-zA-Z0-9_]*(\.[a-zA-Z_][a-zA-Z0-9_]*)?(\.[a-zA-Z_][a-zA-Z0-9_]*)?$/.test(E.trim())?null:"Invalid table name format. Use: [database.]schema.table"});if(l===void 0)return;let c;if(!l||l.trim().length===0){let E=await G3(e,o,r);if(!E)return;c=E,Ce.window.showInformationMessage(`Auto-generated table name: ${c}`)}else c=l.trim();let u=await Ce.window.showQuickPick([{label:"Auto-detect",description:"Automatically detect clipboard format (text or Excel XML)",value:null},{label:"Excel XML Spreadsheet",description:"Force Excel XML format processing",value:"XML Spreadsheet"},{label:"Plain Text",description:"Force plain text processing with delimiter detection",value:"TEXT"}],{placeHolder:"Select clipboard data format"});if(!u)return;let d=Date.now();await Ce.window.withProgress({location:Ce.ProgressLocation.Notification,title:"Importing clipboard data...",cancellable:!1},async E=>{let{importClipboardDataToNetezza:f}=await Promise.resolve().then(()=>(F3(),B3)),p="",h=await f(c,a,u.value,{},(S,T,m=!0)=>{E.report({message:S,increment:T}),m&&S!==p&&(n.appendLine(`[Clipboard Import] ${S}`),p=S)});if(!h.success)throw new Error(h.message);h.details&&(n.appendLine(`[Clipboard Import] Rows processed: ${h.details.rowsProcessed}`),n.appendLine(`[Clipboard Import] Columns: ${h.details.columns}`),n.appendLine(`[Clipboard Import] Format: ${h.details.format}`))}),H3(n,"Import Clipboard Data",d),Ce.window.showInformationMessage(`Clipboard data imported successfully to table: ${c}`,"Copy Table Name").then(E=>{E==="Copy Table Name"&&(Ce.env.clipboard.writeText(c),Ce.window.showInformationMessage("Table name copied to clipboard"))})}catch(i){Ce.window.showErrorMessage(`Error importing clipboard data: ${i instanceof Error?i.message:String(i)}`)}}),Ce.commands.registerCommand("netezza.importData",async()=>{try{let s=Ce.window.activeTextEditor?.document?.uri?.toString(),o=r.getConnectionForExecution(s),a=await r.getConnection(o||"");if(!a)throw new Error("Connection not configured. Please connect via Netezza: Connect...");let l=await Ce.window.showOpenDialog({canSelectFiles:!0,canSelectFolders:!1,canSelectMany:!1,filters:{"Data Files":["csv","txt","xlsx","xlsb","json"],"CSV Files":["csv"],"Excel Files":["xlsx","xlsb"],"Text Files":["txt"],"JSON Files":["json"],"All Files":["*"]},openLabel:"Select file to import"});if(!l||l.length===0)return;let c=l[0].fsPath,u=await Ce.window.showInputBox({prompt:"Enter target table name (leave empty for auto-generated name)",placeHolder:"e.g. my_schema.my_table or leave empty",validateInput:p=>!p||p.trim().length===0||/^[a-zA-Z_][a-zA-Z0-9_]*(\.[a-zA-Z_][a-zA-Z0-9_]*)?(\.[a-zA-Z_][a-zA-Z0-9_]*)?$/.test(p.trim())?null:"Invalid table name format. Use: [database.]schema.table"});if(u===void 0)return;let d;if(!u||u.trim().length===0){let p=await G3(e,o,r);if(!p)return;d=p,Ce.window.showInformationMessage(`Auto-generated table name: ${d}`)}else d=u.trim();let E=await Ce.window.showQuickPick([{label:"Default Import",description:"Use default settings",value:{}},{label:"Custom Options",description:"Configure import settings (coming soon)",value:null}],{placeHolder:"Select import options"});if(!E)return;if(E.value===null){Ce.window.showInformationMessage("Custom options will be available in future version");return}let f=Date.now();await Ce.window.withProgress({location:Ce.ProgressLocation.Notification,title:"Importing data...",cancellable:!1},async p=>{let{importDataToNetezza:h}=await Promise.resolve().then(()=>(PS(),H6)),S="",T=await h(c,d,a,(m,R,A=!0)=>{p.report({message:m,increment:R}),A&&m!==S&&(n.appendLine(`[Import] ${m}`),S=m)});if(!T.success)throw new Error(T.message);T.details&&(n.appendLine(`[Import] Rows processed: ${T.details.rowsProcessed}`),n.appendLine(`[Import] Columns: ${T.details.columns}`),n.appendLine(`[Import] Delimiter: ${T.details.detectedDelimiter}`))}),H3(n,"Import Data",f),Ce.window.showInformationMessage(`Data imported successfully to table: ${d}`,"Copy Table Name").then(p=>{p==="Copy Table Name"&&(Ce.env.clipboard.writeText(d),Ce.window.showInformationMessage("Table name copied to clipboard"))})}catch(i){Ce.window.showErrorMessage(`Error importing data: ${i instanceof Error?i.message:String(i)}`)}}),Ce.commands.registerCommand("netezza.smartPaste",async()=>{try{let i=Ce.window.activeTextEditor;if(!i)return;let o=Ce.workspace.getConfiguration("netezza").get("pythonPath")||"python",a=W3.join(e.extensionPath,"python","check_clipboard_format.py"),l=require("child_process");if(await new Promise(u=>{let d=l.spawn(o,[a]);d.on("close",E=>{u(E===1)}),d.on("error",()=>{u(!1)})})){let u=await Ce.window.showQuickPick([{label:"\u{1F4CA} import to Netezza table",description:'Detected "XML Spreadsheet" format - import data to database',value:"import"},{label:"\u{1F4DD} Paste as text",description:"Paste clipboard content as plain text",value:"paste"}],{placeHolder:'Detected "XML Spreadsheet" format in clipboard - choose an action'});if(u?.value==="import")Ce.commands.executeCommand("netezza.importClipboard");else if(u?.value==="paste"){let d=await Ce.env.clipboard.readText(),E=i.selection;await i.edit(f=>{f.replace(E,d)})}}else{let u=await Ce.env.clipboard.readText(),d=i.selection;await i.edit(E=>{E.replace(d,u)})}}catch(i){Ce.window.showErrorMessage(`Error during paste: ${i instanceof Error?i.message:String(i)}`)}})]}var ne=q(require("vscode"));ur();fo();function Db(t){return t&&(t.includes(" ")?`"${t.replace(/"/g,'\\"')}"`:t)}function Ts(t,e,r){let i=/[ \\/]/.test(t)?`& ${Db(t)}`:t,s=Db(e),o=r.map(a=>Db(a)).join(" ");return`${i} ${s}${o?" "+o:""}`.trim()}function YK(t){let{context:e,connectionManager:r,resultPanelProvider:n}=t;return[ne.commands.registerCommand("netezza.cancelQuery",async(i,s)=>{let o=typeof i=="string"?i:i?.toString();if(!o){let a=ne.window.activeTextEditor;a&&(o=a.document.uri.toString())}if(o){console.log(`[netezza.cancelQuery] Cancelling: ${o}`),n.cancelExecution(o,s);try{await eA(o)}catch(a){console.error("[netezza.cancelQuery] Backend cancel failed:",a)}}else{let a=n.getActiveSource();a?(console.log(`[netezza.cancelQuery] No URI provided, falling back to active source: ${a}`),n.cancelExecution(a,s),await eA(a)):ne.window.showWarningMessage("No active query to cancel.")}}),ne.commands.registerCommand("netezza.runQuery",async()=>{let i=ne.window.activeTextEditor;if(!i){ne.window.showErrorMessage("No active editor found");return}let s=i.document,o=i.selection,a=s.getText(),l=s.uri.toString(),c=[];if(o.isEmpty){let d=s.offsetAt(o.active),E=Ur.getStatementAtPosition(a,d);if(E){c=[E.sql];let f=s.positionAt(E.start),p=s.positionAt(E.end);i.selection=new ne.Selection(f,p)}else{ne.window.showWarningMessage("No SQL statement found at cursor");return}}else{let d=s.getText(o);if(!d.trim()){ne.window.showWarningMessage("No SQL query selected");return}/^\s*CREATE\s+(OR\s+REPLACE\s+)?PROCEDURE\b/i.test(d)?c=[d]:c=Ur.splitStatements(d).filter(E=>E.trim().length>0)}if(c.length===0)return;let u=c.length===1?c[0].trim():null;if(u){let d=u.split(/\s+/),E=d[0]||"",f=/python(\.exe)?$/i.test(E)&&d.length>=2&&d[1].toLowerCase().endsWith(".py"),p=E.toLowerCase().endsWith(".py");if(f||p){let S=ne.workspace.getConfiguration("netezza").get("pythonPath")||"python",T="";if(f){let R=d[0],A=d[1],I=d.slice(2);T=Ts(R,A,I)}else{let R=E,A=d.slice(1);T=Ts(S,R,A)}let m=ne.window.createTerminal({name:"Netezza: Script"});m.show(!0),m.sendText(T,!0),ne.window.showInformationMessage(`Running script: ${T}`);return}}try{n.startExecution(l);let d=ne.workspace.getConfiguration("netezza"),E=d.get("enableStreaming",!1),f=d.get("streamingChunkSize",5e3);await ne.window.withProgress({location:ne.ProgressLocation.Notification,title:`Executing SQL for ${l.split(/[\\/]/).pop()}...`,cancellable:!1},async()=>{E?await Tw(e,c,r,l,p=>n.log(l,p),(p,h,S)=>{n.appendStreamingChunk(l,p,h,S)},f):await Wc(e,c,r,l,p=>n.log(l,p),p=>n.updateResults(p,l,!0))}),n.finalizeExecution(l),ne.commands.executeCommand("netezza.results.focus")}catch(d){let E=d instanceof Error?d.message:String(d);n.log(l,`Error: ${E}`),n.updateResults([{columns:[],data:[],message:E,isError:!0,sql:c.length===1?c[0]:void 0}],l,!0),n.finalizeExecution(l),ne.window.showErrorMessage(`Error executing query: ${E}`)}}),ne.commands.registerCommand("netezza.runQueryBatch",async()=>{let i=ne.window.activeTextEditor;if(!i){ne.window.showErrorMessage("No active editor found");return}let s=i.document,o=i.selection,a=s.uri.toString(),l;if(o.isEmpty?l=s.getText():l=s.getText(o),!l.trim()){ne.window.showWarningMessage("No SQL query to execute");return}let u=l.trim().split(/\s+/),d=u[0]||"",E=/python(\.exe)?$/i.test(d)&&u.length>=2&&u[1].toLowerCase().endsWith(".py"),f=d.toLowerCase().endsWith(".py");if(E||f){let h=ne.workspace.getConfiguration("netezza").get("pythonPath")||"python",S="";if(E){let m=u[0],R=u[1],A=u.slice(2);S=Ts(m,R,A)}else{let m=d,R=u.slice(1);S=Ts(h,m,R)}let T=ne.window.createTerminal({name:"Netezza: Script"});T.show(!0),T.sendText(S,!0),ne.window.showInformationMessage(`Running script: ${S}`);return}try{n.startExecution(a),await ne.window.withProgress({location:ne.ProgressLocation.Notification,title:`Executing batch SQL for ${a.split(/[\\/]/).pop()}...`,cancellable:!1},async()=>{await Wc(e,[l],r,a,p=>n.log(a,p),p=>n.updateResults(p,a,!0))}),n.finalizeExecution(a),ne.commands.executeCommand("netezza.results.focus")}catch(p){let h=p instanceof Error?p.message:String(p);n.log(a,`Error: ${h}`),n.updateResults([{columns:[],data:[],message:h,isError:!0,sql:l}],a,!0),n.finalizeExecution(a),ne.window.showErrorMessage(`Error executing query: ${h}`)}}),ne.commands.registerCommand("netezza.explainQuery",async()=>{await kK(e,r,!1)}),ne.commands.registerCommand("netezza.explainQueryVerbose",async()=>{await kK(e,r,!0)}),ne.commands.registerCommand("netezza.formatSQL",async()=>{let i=ne.window.activeTextEditor;if(!i){ne.window.showErrorMessage("No active editor");return}if(i.document.languageId!=="sql"&&i.document.languageId!=="mssql"){ne.window.showWarningMessage("Format SQL is only available for SQL files");return}let s=ne.workspace.getConfiguration("netezza"),o=s.get("formatSQL.tabWidth",4),a=s.get("formatSQL.keywordCase","upper"),l=i.selection,c=l.isEmpty?i.document.getText():i.document.getText(l);try{let{format:u}=await Promise.resolve().then(()=>(UK(),MK)),d="__NZ_DOUBLE_DOT__",E=c.replace(/\.\.(?=[a-zA-Z_])/g,`.${d}.`),p=u(E,{language:"sql",tabWidth:o,keywordCase:a,linesBetweenQueries:2}).replace(new RegExp(`\\.\\s*${d}\\s*\\.`,"g"),"..");await i.edit(h=>{if(l.isEmpty){let S=new ne.Range(i.document.positionAt(0),i.document.positionAt(i.document.getText().length));h.replace(S,p)}else h.replace(l,p)}),ne.window.showInformationMessage("SQL formatted successfully")}catch(u){let d=u instanceof Error?u.message:String(u);d.includes("Parse error")?ne.window.showErrorMessage("SQL formatting failed: The SQL contains syntax not supported by the formatter. Try selecting a simpler portion of the SQL to format."):ne.window.showErrorMessage(`Format SQL failed: ${d}`)}})]}async function kK(t,e,r){let n=ne.window.activeTextEditor;if(!n){ne.window.showErrorMessage("No active editor found");return}let i=n.document,s=n.selection,o;if(!s.isEmpty)o=i.getText(s);else{let c=n.selection.active,u=i.offsetAt(c),d=i.getText(),E=Ur.getStatementAtPosition(d,u);E?o=d.substring(E.start,E.end):o=i.getText()}if(!o.trim()){ne.window.showWarningMessage("No SQL query to explain");return}let a=o.trim();a.toUpperCase().startsWith("EXPLAIN")&&(a=a.replace(/^EXPLAIN\s+(?:VERBOSE\s+)?/i,""));let l=r?`EXPLAIN VERBOSE ${a}`:`EXPLAIN ${a}`;try{let c=i.uri.toString(),u=e.getConnectionForExecution(c);if(!u){ne.window.showErrorMessage("No database connection. Please connect first.");return}await ne.window.withProgress({location:ne.ProgressLocation.Notification,title:"Generating query plan...",cancellable:!1},async()=>{let d=await pw(t,l,u,e,c);if(d&&d.trim()){let{parseExplainOutput:E,ExplainPlanView:f}=await Promise.resolve().then(()=>($K(),WK)),p=E(d);f.createOrShow(t.extensionUri,p,a)}else ne.window.showWarningMessage("No explain output received")})}catch(c){let u=c instanceof Error?c.message:String(c);ne.window.showErrorMessage(`Error generating query plan: ${u}`)}}var As=q(require("vscode"));function By(t,e){let r=e.getKeepConnectionOpen();t.text=r?"\u{1F517} Keep Connection ON":"\u26D3\uFE0F\u200D\u{1F4A5} Keep Connection OFF",t.tooltip=r?"Keep Connection Open: ENABLED - Click to disable":"Keep Connection Open: DISABLED - Click to enable",t.backgroundColor=r?new As.ThemeColor("statusBarItem.prominentBackground"):void 0}function VK(t,e){let r=As.window.createStatusBarItem(As.StatusBarAlignment.Right,100);return r.command="netezza.toggleKeepConnectionOpen",By(r,e),r.show(),t.subscriptions.push(r),r}function qK(t,e){let r=As.window.createStatusBarItem(As.StatusBarAlignment.Left,100);return r.command="netezza.selectConnectionForTab",r.tooltip="Click to select connection for this SQL tab",t.subscriptions.push(r),{statusBarItem:r,updateFn:()=>{let i=As.window.activeTextEditor;if(i&&i.document.languageId==="sql"){let s=i.document.uri.toString(),o=e.getConnectionForExecution(s);o?(r.text=`$(database) ${o}`,r.show()):(r.text="$(database) Select Connection",r.show())}else r.hide()}}}var Ze=q(require("vscode"));fo();var XK=/(^|\s)(?:[A-Za-z]:\\|\\|\/)?[\w.\-\\/]+\.py\b|(^|\s)python(?:\.exe)?\s+[^\n]*\.py\b/i,CR=class{constructor(){this._onDidChange=new Ze.EventEmitter;this.onDidChangeCodeLenses=this._onDidChange.event}provideCodeLenses(e){let r=[];for(let n=0;n<e.lineCount;n++){let i=e.lineAt(n);if(XK.test(i.text)){let s=i.range,o={title:"Run as script",command:"netezza.runScriptFromLens",arguments:[e.uri,s]};r.push(new Ze.CodeLens(s,o))}}return r}refresh(){this._onDidChange.fire()}};function jK(){return Ze.window.createTextEditorDecorationType({backgroundColor:new Ze.ThemeColor("editor.rangeHighlightBackground"),borderRadius:"3px"})}function zK(){return Ze.window.createTextEditorDecorationType({backgroundColor:"rgba(5, 115, 201, 0.10)",isWholeLine:!1,rangeBehavior:Ze.DecorationRangeBehavior.ClosedClosed})}function Fy(t,e){let r=e||Ze.window.activeTextEditor;if(!r)return;let n=r.document,i=[];for(let s=0;s<n.lineCount;s++){let o=n.lineAt(s);XK.test(o.text)&&i.push({range:o.range,hoverMessage:"Python script invocation"})}r.setDecorations(t,i)}function NR(t,e){if(!Ze.workspace.getConfiguration("netezza").get("highlightActiveStatement",!0)||!e||e.document.languageId!=="sql"&&e.document.languageId!=="mssql"){e&&e.setDecorations(t,[]);return}try{let i=e.document,s=e.selection.active,o=i.offsetAt(s),a=i.getText(),l=Ur.getStatementAtPosition(a,o);if(l){let c=i.positionAt(l.start),u=i.positionAt(l.end),d=new Ze.Range(c,u);e.setDecorations(t,[d])}else e.setDecorations(t,[])}catch(i){console.error("Error updating SQL highlight:",i)}}function KK(t,e,r){t.subscriptions.push(Ze.window.onDidChangeActiveTextEditor(()=>Fy(e)),Ze.workspace.onDidChangeTextDocument(n=>{Ze.window.activeTextEditor&&n.document===Ze.window.activeTextEditor.document&&Fy(e,Ze.window.activeTextEditor)})),t.subscriptions.push(Ze.window.onDidChangeTextEditorSelection(n=>{NR(r,n.textEditor)}),Ze.window.onDidChangeActiveTextEditor(n=>{NR(r,n)}),Ze.workspace.onDidChangeConfiguration(n=>{n.affectsConfiguration("netezza.highlightActiveStatement")&&NR(r,Ze.window.activeTextEditor)})),Fy(e,Ze.window.activeTextEditor),NR(r,Ze.window.activeTextEditor)}var Xn=q(require("vscode")),ELe=new Map([["SX","SELECT"],["WX","WHERE"],["GX","GROUP BY"],["HX","HAVING"],["OX","ORDER BY"],["FX","FROM"],["JX","JOIN"],["LX","LIMIT"],["IX","INSERT INTO"],["UX","UPDATE"],["DX","DELETE FROM"],["CX","CREATE TABLE"]]);function JK(t){let e=Xn.workspace.onDidChangeTextDocument(async r=>{if(r.document.languageId!=="sql"&&r.document.languageId!=="mssql"||r.contentChanges.length!==1)return;let n=r.contentChanges[0];if(n.text!==" ")return;let i=Xn.window.activeTextEditor;if(!i||i.document!==r.document)return;let o=r.document.lineAt(n.range.start.line).text;for(let[a,l]of ELe)if(new RegExp(`\\b${a}\\s$`,"i").test(o)){let u=o.toUpperCase().lastIndexOf(a.toUpperCase());if(u>=0){let d=new Xn.Position(n.range.start.line,u),E=new Xn.Position(n.range.start.line,u+a.length+1);await i.edit(f=>{f.replace(new Xn.Range(d,E),l+" ")}),["SELECT","FROM","JOIN"].includes(l)&&setTimeout(()=>{Xn.commands.executeCommand("editor.action.triggerSuggest")},100);break}}});t.subscriptions.push(e)}var QK=[{id:"mtxr.sqltools",name:"SQLTools"},{id:"ms-mssql.mssql",name:"Microsoft SQL Server"},{id:"oracle.oracledevtools",name:"Oracle Developer Tools"},{id:"cweijan.vscode-mysql-client2",name:"MySQL"},{id:"ckolkman.vscode-postgres",name:"PostgreSQL"}];async function hLe(t){let e=z.workspace.getConfiguration("netezza");if(!e.get("showConflictWarnings",!0))return;let n=[];for(let a of QK)z.extensions.getExtension(a.id)&&n.push(a.name);let s=z.extensions.all.filter(a=>{let l=a.packageJSON;if(!l||a.id==="krzysztof-d.justybaselite-netezza"||QK.some(E=>E.id===a.id))return!1;let c=l.activationEvents?.some(E=>E.includes("onLanguage:sql")||E.includes("onLanguage:mssql")),u=l.contributes?.languages?.some(E=>E.id==="sql"||E.extensions?.includes(".sql"));return(l.displayName||"")==="SQL Language Basics"?!1:c||u}).map(a=>a.packageJSON.displayName||a.id),o=[...n,...s];if(o.length>0){let a=o.length===1?`SQL extension detected "${o[0]}" which may cause conflicts (e.g. duplicate keybindings F5, Ctrl+Enter).`:`SQL extensions detected which may cause conflicts: ${o.join(", ")}. Some functions (e.g. F5, Ctrl+Enter) may be duplicated.`;await z.window.showWarningMessage(a,"OK","Do not show again")==="Do not show again"&&await e.update("showConflictWarnings",!1,z.ConfigurationTarget.Global)}}async function pLe(t){console.log("Netezza extension: Activating..."),hLe(t);let e=new xi(t),r=new fE(t);await r.initialize();let n=new eE(t,e,r),i=new Yc(t.extensionUri);t.subscriptions.push({dispose:()=>{e.closeAllPersistentConnections()}});let s=z.window.createOutputChannel("Netezza"),o=VK(t,e),{updateFn:a}=qK(t,e);a(),e.onDidChangeActiveConnection(R=>{a(),R&&!r.hasConnectionPrefetchTriggered(R)&&r.triggerConnectionPrefetch(R,A=>ae(t,A,!0,e,R))}),e.onDidChangeConnections(a),e.onDidChangeDocumentConnection(R=>{a();let A=e.getDocumentConnection(R);A&&!r.hasConnectionPrefetchTriggered(A)&&r.triggerConnectionPrefetch(A,I=>ae(t,I,!0,e,A))}),z.window.onDidChangeActiveTextEditor(a),console.log("Netezza extension: Registering SchemaSearchProvider...");let l=new qc(t.extensionUri,t,r,e);console.log("Netezza extension: Registering QueryHistoryView...");let c=new Xc(t.extensionUri,t),u=z.window.createTreeView("netezza.schema",{treeDataProvider:n,showCollapseAll:!0});t.subscriptions.push(z.window.registerWebviewViewProvider(Yc.viewType,i),z.window.registerWebviewViewProvider(qc.viewType,l),z.window.registerWebviewViewProvider(Xc.viewType,c));let d=jK(),E=zK();KK(t,d,E);let f=new CR;t.subscriptions.push(z.languages.registerCodeLensProvider({scheme:"file"},f)),t.subscriptions.push(z.window.onDidChangeActiveTextEditor(R=>{if(R&&R.document){let A=R.document.uri.toString();i.setActiveSource(A)}}));let p=YS({context:t,connectionManager:e,metadataCache:r,schemaProvider:n,schemaTreeView:u});t.subscriptions.push(...p);let h=P3({context:t,connectionManager:e,outputChannel:s});t.subscriptions.push(...h);let S=$3({context:t,connectionManager:e,outputChannel:s});t.subscriptions.push(...S);let T=YK({context:t,connectionManager:e,resultPanelProvider:i});t.subscriptions.push(...T),t.subscriptions.push(z.commands.registerCommand("netezza.viewEditData",R=>{aE.createOrShow(t.extensionUri,R,t,e)}),z.commands.registerCommand("netezza.createProcedure",async R=>{let A=R;if(!A||!A.dbName){z.window.showErrorMessage("Invalid selection. Select a Procedure folder.");return}let I=await z.window.showInputBox({prompt:"Enter new procedure name",placeHolder:"NEW_PROCEDURE",value:"NEW_PROCEDURE"});if(I===void 0)return;let w=I.trim()||"NEW_PROCEDURE",L=`CREATE OR REPLACE PROCEDURE ${A.dbName}.SCHEMA.${w}(INTEGER)
RETURNS INTEGER
EXECUTE AS CALLER
LANGUAGE NZPLSQL AS
BEGIN_PROC
DECLARE
    arg1 ALIAS FOR $1;
BEGIN
    -- YOUR CODE GOES HERE
    
    EXCEPTION
    WHEN OTHERS THEN
        ROLLBACK;
        RAISE EXCEPTION  'Procedure failed: %', sqlerrm;
        --RAISE NOTICE 'Caught error, continuing %', sqlerrm;

END;
END_PROC;`,y=await z.workspace.openTextDocument({content:L,language:"sql"});await z.window.showTextDocument(y)}),z.commands.registerCommand("netezza.toggleKeepConnectionOpen",()=>{let R=e.getKeepConnectionOpen();e.setKeepConnectionOpen(!R),By(o,e);let A=!R;z.window.showInformationMessage(A?"Keep connection open: ENABLED - connection will remain open after queries":"Keep connection open: DISABLED - connection will be closed after each query")}),z.commands.registerCommand("netezza.selectActiveConnection",async()=>{let R=await e.getConnections();if(R.length===0){z.window.showWarningMessage("No connections configured. Please connect first.");return}let A=await z.window.showQuickPick(R.map(I=>I.name),{placeHolder:"Select Active Connection"});A&&(await e.setActiveConnection(A),z.window.showInformationMessage(`Active connection set to: ${A}`))}),z.commands.registerCommand("netezza.selectConnectionForTab",async()=>{let R=z.window.activeTextEditor;if(!R||R.document.languageId!=="sql"){z.window.showWarningMessage("This command is only available for SQL files");return}let A=await e.getConnections();if(A.length===0){z.window.showWarningMessage("No connections configured. Please connect first.");return}let I=R.document.uri.toString(),w=e.getDocumentConnection(I)||e.getActiveConnectionName(),g=A.map(y=>({label:y.name,description:w===y.name?"$(check) Currently selected":`${y.host}:${y.port}/${y.database}`,name:y.name})),L=await z.window.showQuickPick(g,{placeHolder:"Select connection for this SQL tab"});L&&(e.setDocumentConnection(I,L.name),z.window.showInformationMessage(`Connection for this tab set to: ${L.name}`))}),z.commands.registerCommand("netezza.openLogin",()=>{Zf.createOrShow(t.extensionUri,e)}),z.commands.registerCommand("netezza.refreshSchema",async()=>{await r.clearCache(),n.refresh(),z.window.showInformationMessage("Schema refreshed (Cache cleared)")}),z.commands.registerCommand("netezza.jumpToSchema",async()=>{let R=z.window.activeTextEditor;if(!R)return;let A=R.document,I=R.selection,w=A.offsetAt(I.active),g=Ur.getObjectAtPosition(A.getText(),w);g?z.commands.executeCommand("netezza.revealInSchema",g):z.window.showWarningMessage("No object found at cursor")}),z.commands.registerCommand("netezza.runScriptFromLens",async(R,A)=>{try{let I=await z.workspace.openTextDocument(R),w=I.getText(A).trim()||I.lineAt(A.start.line).text.trim();if(!w){z.window.showWarningMessage("No script command found");return}let g=w.split(/\s+/),L=g[0]||"",y=/python(\.exe)?$/i.test(L)&&g.length>=2&&g[1].toLowerCase().endsWith(".py"),P=L.toLowerCase().endsWith(".py"),B=z.workspace.getConfiguration("netezza").get("pythonPath")||"python",F="";if(y){let K=g[0],Z=g[1],J=g.slice(2);F=Ts(K,Z,J)}else if(P){let K=L,Z=g.slice(1);F=Ts(B,K,Z)}else F=Ts(B,"",g);let V=z.window.createTerminal({name:"Netezza: Script"});V.show(!0),V.sendText(F,!0),z.window.showInformationMessage(`Running script: ${F}`)}catch(I){let w=I instanceof Error?I.message:String(I);z.window.showErrorMessage(`Error running script: ${w}`)}}),z.commands.registerCommand("netezza.clearAutocompleteCache",async()=>{await z.window.showWarningMessage("Are you sure you want to clear the autocomplete cache? This will remove all cached databases, schemas, tables, and columns.",{modal:!0},"Clear Cache")==="Clear Cache"&&(await r.clearCache(),z.window.showInformationMessage("Autocomplete cache cleared successfully. Cache will be rebuilt on next use."))}),z.commands.registerCommand("netezza.copySelection",()=>{i.triggerCopySelection()}),z.commands.registerCommand("netezza.openEtlDesigner",()=>{Yn.setConnectionManager(e),Yn.createOrShow(t)}),z.commands.registerCommand("netezza.newEtlProject",async()=>{let R=await z.window.showInputBox({prompt:"Enter ETL project name",value:"New ETL Project"});R&&(Os.getInstance().createProject(R),Yn.setConnectionManager(e),Yn.createOrShow(t))}),z.commands.registerCommand("netezza.openEtlProject",async()=>{let R=await z.window.showOpenDialog({filters:{"ETL Project":["etl.json"]},canSelectMany:!1});if(R&&R[0])try{let I=await Os.getInstance().loadProject(R[0].fsPath);Yn.setConnectionManager(e),Yn.createOrShow(t,I),z.window.showInformationMessage(`ETL project loaded: ${I.name}`)}catch(A){z.window.showErrorMessage(`Failed to load ETL project: ${A}`)}}),z.commands.registerCommand("netezza.runEtlProject",async()=>{let A=Os.getInstance().getCurrentProject();if(!A){z.window.showWarningMessage("No ETL project is currently open. Please open or create a project first.");return}Yn.setConnectionManager(e),Yn.createOrShow(t,A),z.window.showInformationMessage("ETL project opened. Use the Run button in the designer to execute.")})),t.subscriptions.push(z.languages.registerDocumentLinkProvider({language:"sql"},new iE),z.languages.registerFoldingRangeProvider({language:"sql"},new sE));let m=new nE(t,r,e);t.subscriptions.push(z.languages.registerCompletionItemProvider(["sql","mssql"],m,"."," ")),JK(t),Ow(t),t.subscriptions.push(z.languages.registerCodeActionsProvider(["sql","netezza-sql"],new zc,{providedCodeActionKinds:zc.providedCodeActionKinds})),console.log("Netezza extension: Activation complete.")}function TLe(){}0&&(module.exports={activate,deactivate});
/*! Bundled license information:

normalize-path/index.js:
  (*!
   * normalize-path <https://github.com/jonschlinkert/normalize-path>
   *
   * Copyright (c) 2014-2018, Jon Schlinkert.
   * Released under the MIT License.
   *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

archiver/lib/error.js:
archiver/lib/core.js:
  (**
   * Archiver Core
   *
   * @ignore
   * @license [MIT]{@link https://github.com/archiverjs/node-archiver/blob/master/LICENSE}
   * @copyright (c) 2012-2014 Chris Talkington, contributors.
   *)

crc-32/crc32.js:
  (*! crc32.js (C) 2014-present SheetJS -- http://sheetjs.com *)

zip-stream/index.js:
  (**
   * ZipStream
   *
   * @ignore
   * @license [MIT]{@link https://github.com/archiverjs/node-zip-stream/blob/master/LICENSE}
   * @copyright (c) 2014 Chris Talkington, contributors.
   *)

archiver/lib/plugins/zip.js:
  (**
   * ZIP Format Plugin
   *
   * @module plugins/zip
   * @license [MIT]{@link https://github.com/archiverjs/node-archiver/blob/master/LICENSE}
   * @copyright (c) 2012-2014 Chris Talkington, contributors.
   *)

archiver/lib/plugins/tar.js:
  (**
   * TAR Format Plugin
   *
   * @module plugins/tar
   * @license [MIT]{@link https://github.com/archiverjs/node-archiver/blob/master/LICENSE}
   * @copyright (c) 2012-2014 Chris Talkington, contributors.
   *)

archiver/lib/plugins/json.js:
  (**
   * JSON Format Plugin
   *
   * @module plugins/json
   * @license [MIT]{@link https://github.com/archiverjs/node-archiver/blob/master/LICENSE}
   * @copyright (c) 2012-2014 Chris Talkington, contributors.
   *)

archiver/index.js:
  (**
   * Archiver Vending
   *
   * @ignore
   * @license [MIT]{@link https://github.com/archiverjs/node-archiver/blob/master/LICENSE}
   * @copyright (c) 2012-2014 Chris Talkington, contributors.
   *)
*/
