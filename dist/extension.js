"use strict";var a8=Object.create;var Qf=Object.defineProperty;var l8=Object.getOwnPropertyDescriptor;var c8=Object.getOwnPropertyNames;var u8=Object.getPrototypeOf,d8=Object.prototype.hasOwnProperty;var W=(t,e)=>()=>(t&&(e=t(t=0)),e);var O=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),pt=(t,e)=>{for(var n in e)Qf(t,n,{get:e[n],enumerable:!0})},qw=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of c8(e))!d8.call(t,i)&&i!==n&&Qf(t,i,{get:()=>e[i],enumerable:!(r=l8(e,i))||r.enumerable});return t};var Q=(t,e,n)=>(n=t!=null?a8(u8(t)):{},qw(e||!t||!t.__esModule?Qf(n,"default",{value:t,enumerable:!0}):n,t)),Wi=t=>qw(Qf({},"__esModule",{value:!0}),t);var dn,Ft,ni,Ce,Ls,nA=W(()=>{"use strict";dn={AuthenticationRequest:82,ErrorResponse:69,NoticeResponse:78,BackendKeyData:75,ReadyForQuery:90,RowDescription:84,RowDescriptionStandard:88,DataRow:68,CommandComplete:67,EmptyQueryResponse:73,RowStandard:89,CopyInResponse:71,CopyOutResponse:72,CopyDone:99,CopyData:100},Ft={NzTypeRecAddr:1,NzTypeDouble:2,NzTypeInt:3,NzTypeFloat:4,NzTypeMoney:5,NzTypeDate:6,NzTypeNumeric:7,NzTypeTime:8,NzTypeTimestamp:9,NzTypeInterval:10,NzTypeTimeTz:11,NzTypeBool:12,NzTypeInt1:13,NzTypeBinary:14,NzTypeChar:15,NzTypeVarChar:16,NzDEPR_Text:17,NzTypeUnknown:18,NzTypeInt2:19,NzTypeInt8:20,NzTypeVarFixedChar:21,NzTypeGeometry:22,NzTypeVarBinary:23,NzDEPR_Blob:24,NzTypeNChar:25,NzTypeNVarChar:26,NzDEPR_NText:27,NzTypeJson:30,NzTypeJsonb:31,NzTypeJsonpath:32,NzTypeLastEntry:33,NzTypeIntvsAbsTimeFIX:39},ni={CP_VERSION_2:2,CP_VERSION_3:3,CP_VERSION_4:4,CP_VERSION_5:5,CP_VERSION_6:6},Ce={HSV2_CLIENT_BEGIN:1,HSV2_DB:2,HSV2_USER:3,HSV2_OPTIONS:4,HSV2_REMOTE_PID:6,HSV2_CLIENT_TYPE:8,HSV2_PROTOCOL:9,HSV2_SSL_NEGOTIATE:11,HSV2_SSL_CONNECT:12,HSV2_APPNAME:13,HSV2_CLIENT_OS:14,HSV2_CLIENT_HOST_NAME:15,HSV2_CLIENT_OS_USER:16,HSV2_64BIT_VARLENA_ENABLED:17,HSV2_CLIENT_DONE:1e3},Ls={DATA:1,ERROR:2,DONE:3}});function jw(t){let e=t.readBigInt64LE(0),n=Number(e/1000n);return new Date(zw+n)}function Kw(t){let n=t.readInt32LE(0)*24*60*60*1e3;return new Date(zw+n)}function Zf(t){let e=t.readBigInt64LE(0),n=Number(e/1000000n),r=Number(e%1000000n),i=Math.floor(n/3600),s=Math.floor(n%3600/60),o=n%60;return{hours:i,minutes:s,seconds:o,microseconds:r,toString(){let a=String(i).padStart(2,"0"),l=String(s).padStart(2,"0"),c=String(o).padStart(2,"0");if(r>0){let u=String(r).padStart(6,"0");return`${a}:${l}:${c}.${u}`}return`${a}:${l}:${c}`}}}function Jw(t){if(!t)return null;let e=t.split(":"),n=parseInt(e[0],10)||0,r=parseInt(e[1],10)||0,i=(e[2]||"0").split("."),s=parseInt(i[0],10)||0,o=0;return i.length>1&&(o=parseInt(i[1].substring(0,6).padEnd(6,"0"),10)),{hours:n,minutes:r,seconds:s,microseconds:o,toString(){return t}}}function Qw(t){let e=t.readBigInt64LE(0),n=t.readInt32LE(8),r=Zf(t);if(n===0)return r.toString();let i=Math.floor(n/12),s=n%12;return i>0?`${i} years ${s} mons ${r.toString()}`:`${s} mons ${r.toString()}`}function Zw(t,e){let n=Zf(t),r=t.readInt32LE(e-4),i=r<0?"+":"-",s=Math.abs(r),o=Math.floor(s/3600),a=Math.floor(s%3600/60),l=s%60,c=String(o).padStart(2,"0");return l!==0?c+=":"+String(a).padStart(2,"0")+":"+String(l).padStart(2,"0"):a!==0&&(c+=":"+String(a).padStart(2,"0")),`${n.toString()}${i}${c}`}function e0(t,e,n,r){let i=e<=9?1:e<=18?2:4,s=[];for(let f=0;f<i;f++)s.push(t.readUInt32LE(f*4));let o=(s[0]&Xw)!==0?4294967295:0,a=new Array(ka).fill(o);for(let f=ka-r,p=0;f<ka;f++,p++)a[f]=s[p];let l=(a[0]&Xw)!==0;l&&E8(a);let c=new Array(jc).fill(0);for(let f=0;f<jc;f++)c[jc-f-1]=f8(a);let u="",d=!0;for(let f=0;f<jc;f++)f<jc-n-1&&d&&c[f]===0||(d=!1,u+=String(c[f]));if(u===""&&(u="0"),n!==0){let f=u.slice(0,-n)||"0",p=u.slice(-n).padStart(n,"0");u=f+"."+p}l&&(u="-"+u);let E=parseFloat(u);return e<=15&&u===String(E)?E:u}function f8(t){let e=0;for(let n=0;n<ka;n++){let r=t[n]+e*4294967296;r!==0?(t[n]=Math.floor(r/10),e=r%10):(t[n]=0,e=0)}return e}function E8(t){for(let n=0;n<ka;n++)t[n]=~t[n]>>>0;let e=1;for(let n=ka-1;n>=0&&e;n--){let r=t[n]+e;t[n]=r>>>0,e=r>4294967295?1:0}}var zw,ka,jc,Xw,t0=W(()=>{"use strict";zw=Date.UTC(2e3,0,1);ka=4,jc=38,Xw=2147483648});var iA=O((MLe,n0)=>{"use strict";var rA=class{static readInt32(e,n=0){return e.readInt32BE(n)}static readInt16(e,n=0){return e.readInt16BE(n)}static writeInt32(e,n,r=0){if(Buffer.isBuffer(e))e.writeInt32BE(n,r);else{let i=Buffer.allocUnsafe(4);i.writeInt32BE(n,0),e.write(i)}}static writeInt16(e,n,r=0){if(Buffer.isBuffer(e))e.writeInt16BE(n,r);else{let i=Buffer.allocUnsafe(2);i.writeInt16BE(n,0),e.write(i)}}};n0.exports=rA});var i0=O((ULe,r0)=>{var Ya=1e3,Va=Ya*60,qa=Va*60,Ao=qa*24,p8=Ao*7,T8=Ao*365.25;r0.exports=function(t,e){e=e||{};var n=typeof t;if(n==="string"&&t.length>0)return S8(t);if(n==="number"&&isFinite(t))return e.long?A8(t):R8(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function S8(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var n=parseFloat(e[1]),r=(e[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*T8;case"weeks":case"week":case"w":return n*p8;case"days":case"day":case"d":return n*Ao;case"hours":case"hour":case"hrs":case"hr":case"h":return n*qa;case"minutes":case"minute":case"mins":case"min":case"m":return n*Va;case"seconds":case"second":case"secs":case"sec":case"s":return n*Ya;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function R8(t){var e=Math.abs(t);return e>=Ao?Math.round(t/Ao)+"d":e>=qa?Math.round(t/qa)+"h":e>=Va?Math.round(t/Va)+"m":e>=Ya?Math.round(t/Ya)+"s":t+"ms"}function A8(t){var e=Math.abs(t);return e>=Ao?eE(t,e,Ao,"day"):e>=qa?eE(t,e,qa,"hour"):e>=Va?eE(t,e,Va,"minute"):e>=Ya?eE(t,e,Ya,"second"):t+" ms"}function eE(t,e,n,r){var i=e>=n*1.5;return Math.round(t/n)+" "+r+(i?"s":"")}});var sA=O((BLe,s0)=>{function m8(t){n.debug=n,n.default=n,n.coerce=l,n.disable=o,n.enable=i,n.enabled=a,n.humanize=i0(),n.destroy=c,Object.keys(t).forEach(u=>{n[u]=t[u]}),n.names=[],n.skips=[],n.formatters={};function e(u){let d=0;for(let E=0;E<u.length;E++)d=(d<<5)-d+u.charCodeAt(E),d|=0;return n.colors[Math.abs(d)%n.colors.length]}n.selectColor=e;function n(u){let d,E=null,f,p;function h(...T){if(!h.enabled)return;let S=h,m=Number(new Date),R=m-(d||m);S.diff=R,S.prev=d,S.curr=m,d=m,T[0]=n.coerce(T[0]),typeof T[0]!="string"&&T.unshift("%O");let A=0;T[0]=T[0].replace(/%([a-zA-Z%])/g,(w,g)=>{if(w==="%%")return"%";A++;let L=n.formatters[g];if(typeof L=="function"){let b=T[A];w=L.call(S,b),T.splice(A,1),A--}return w}),n.formatArgs.call(S,T),(S.log||n.log).apply(S,T)}return h.namespace=u,h.useColors=n.useColors(),h.color=n.selectColor(u),h.extend=r,h.destroy=n.destroy,Object.defineProperty(h,"enabled",{enumerable:!0,configurable:!1,get:()=>E!==null?E:(f!==n.namespaces&&(f=n.namespaces,p=n.enabled(u)),p),set:T=>{E=T}}),typeof n.init=="function"&&n.init(h),h}function r(u,d){let E=n(this.namespace+(typeof d>"u"?":":d)+u);return E.log=this.log,E}function i(u){n.save(u),n.namespaces=u,n.names=[],n.skips=[];let d=(typeof u=="string"?u:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let E of d)E[0]==="-"?n.skips.push(E.slice(1)):n.names.push(E)}function s(u,d){let E=0,f=0,p=-1,h=0;for(;E<u.length;)if(f<d.length&&(d[f]===u[E]||d[f]==="*"))d[f]==="*"?(p=f,h=E,f++):(E++,f++);else if(p!==-1)f=p+1,h++,E=h;else return!1;for(;f<d.length&&d[f]==="*";)f++;return f===d.length}function o(){let u=[...n.names,...n.skips.map(d=>"-"+d)].join(",");return n.enable(""),u}function a(u){for(let d of n.skips)if(s(u,d))return!1;for(let d of n.names)if(s(u,d))return!0;return!1}function l(u){return u instanceof Error?u.stack||u.message:u}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}s0.exports=m8});var o0=O((jn,tE)=>{jn.formatArgs=I8;jn.save=_8;jn.load=N8;jn.useColors=g8;jn.storage=O8();jn.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();jn.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function g8(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let t;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function I8(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+tE.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let n=0,r=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(n++,i==="%c"&&(r=n))}),t.splice(r,0,e)}jn.log=console.debug||console.log||(()=>{});function _8(t){try{t?jn.storage.setItem("debug",t):jn.storage.removeItem("debug")}catch{}}function N8(){let t;try{t=jn.storage.getItem("debug")||jn.storage.getItem("DEBUG")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function O8(){try{return localStorage}catch{}}tE.exports=sA()(jn);var{formatters:C8}=tE.exports;C8.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var l0=O((FLe,a0)=>{"use strict";a0.exports=(t,e=process.argv)=>{let n=t.startsWith("-")?"":t.length===1?"-":"--",r=e.indexOf(n+t),i=e.indexOf("--");return r!==-1&&(i===-1||r<i)}});var d0=O((HLe,u0)=>{"use strict";var b8=require("os"),c0=require("tty"),Rr=l0(),{env:Zt}=process,Ds;Rr("no-color")||Rr("no-colors")||Rr("color=false")||Rr("color=never")?Ds=0:(Rr("color")||Rr("colors")||Rr("color=true")||Rr("color=always"))&&(Ds=1);"FORCE_COLOR"in Zt&&(Zt.FORCE_COLOR==="true"?Ds=1:Zt.FORCE_COLOR==="false"?Ds=0:Ds=Zt.FORCE_COLOR.length===0?1:Math.min(parseInt(Zt.FORCE_COLOR,10),3));function oA(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function aA(t,e){if(Ds===0)return 0;if(Rr("color=16m")||Rr("color=full")||Rr("color=truecolor"))return 3;if(Rr("color=256"))return 2;if(t&&!e&&Ds===void 0)return 0;let n=Ds||0;if(Zt.TERM==="dumb")return n;if(process.platform==="win32"){let r=b8.release().split(".");return Number(r[0])>=10&&Number(r[2])>=10586?Number(r[2])>=14931?3:2:1}if("CI"in Zt)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(r=>r in Zt)||Zt.CI_NAME==="codeship"?1:n;if("TEAMCITY_VERSION"in Zt)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Zt.TEAMCITY_VERSION)?1:0;if(Zt.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in Zt){let r=parseInt((Zt.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Zt.TERM_PROGRAM){case"iTerm.app":return r>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Zt.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(Zt.TERM)||"COLORTERM"in Zt?1:n}function y8(t){let e=aA(t,t&&t.isTTY);return oA(e)}u0.exports={supportsColor:y8,stdout:oA(aA(!0,c0.isatty(1))),stderr:oA(aA(!0,c0.isatty(2)))}});var E0=O((en,rE)=>{var w8=require("tty"),nE=require("util");en.init=U8;en.log=x8;en.formatArgs=D8;en.save=v8;en.load=M8;en.useColors=L8;en.destroy=nE.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");en.colors=[6,2,3,4,5,1];try{let t=d0();t&&(t.stderr||t).level>=2&&(en.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}en.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let n=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,s)=>s.toUpperCase()),r=process.env[e];return/^(yes|on|true|enabled)$/i.test(r)?r=!0:/^(no|off|false|disabled)$/i.test(r)?r=!1:r==="null"?r=null:r=Number(r),t[n]=r,t},{});function L8(){return"colors"in en.inspectOpts?!!en.inspectOpts.colors:w8.isatty(process.stderr.fd)}function D8(t){let{namespace:e,useColors:n}=this;if(n){let r=this.color,i="\x1B[3"+(r<8?r:"8;5;"+r),s=`  ${i};1m${e} \x1B[0m`;t[0]=s+t[0].split(`
`).join(`
`+s),t.push(i+"m+"+rE.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=P8()+e+" "+t[0]}function P8(){return en.inspectOpts.hideDate?"":new Date().toISOString()+" "}function x8(...t){return process.stderr.write(nE.formatWithOptions(en.inspectOpts,...t)+`
`)}function v8(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function M8(){return process.env.DEBUG}function U8(t){t.inspectOpts={};let e=Object.keys(en.inspectOpts);for(let n=0;n<e.length;n++)t.inspectOpts[e[n]]=en.inspectOpts[e[n]]}rE.exports=sA()(en);var{formatters:f0}=rE.exports;f0.o=function(t){return this.inspectOpts.colors=this.useColors,nE.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};f0.O=function(t){return this.inspectOpts.colors=this.useColors,nE.inspect(t,this.inspectOpts)}});var cA=O((GLe,lA)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?lA.exports=o0():lA.exports=E0()});var A0=O((WLe,R0)=>{"use strict";var h0=Q(require("crypto")),p0=Q(require("os")),T0=Q(require("tls")),S0=Q(require("fs"));nA();var ae=iA(),Ht=cA()("nz:handshake"),uA=class{constructor(e,n,r,i={}){this._hsVersion=-1;this._protocol1=-1;this._protocol2=-1;this.NPSCLIENT_TYPE_DOTNET=11;this.backendProcessId=0;this.backendSecretKey=0;this._socket=e,this._stream=n,this._host=r,this._options=i,this._guardiumClientOS=process.platform,this._guardiumClientOSUser=process.env.USERNAME||process.env.USER||"unknown",this._guardiumAppName="scJs-Driver",this._guardiumClientHostName=p0.hostname()}async startup(e,n,r){if(!await this.connHandshakeNegotiate())throw new Error("Handshake negotiation unsuccessful");if(Ht("Sending handshake info"),!await this.connSendHandshakeInfo(e,n))throw new Error("Error in ConnSendHandshakeInfo");if(!await this.connAuthenticate(r))throw new Error("Error in ConnAuthenticate");if(!await this.connConnectionComplete())throw new Error("Error in ConnConnectionComplete");return this._stream}async _readExactly(e){return new Promise((n,r)=>{let i=this._stream.read(e);i?n(i):this._stream.once("readable",()=>{let s=this._stream.read(e);s&&n(s)})})}async readBytes(e){for(;;){let n=this._stream.read(e);if(n!==null)return n;await new Promise(r=>this._stream.once("readable",r))}}async readByte(){return(await this.readBytes(1))[0]}async connHandshakeNegotiate(){let e=ni.CP_VERSION_6;for(;;){Ht(`Sending version: ${e}`),ae.writeInt32(this._stream,8),ae.writeInt16(this._stream,Ce.HSV2_CLIENT_BEGIN),ae.writeInt16(this._stream,e);let n=await this.readByte();if(Ht(`Got response: ${String.fromCharCode(n)}`),n===78)return this._hsVersion=e,this._protocol2=0,!0;if(n===77){let r=await this.readByte(),i=String.fromCharCode(r);i==="2"?e=ni.CP_VERSION_2:i==="3"?e=ni.CP_VERSION_3:i==="4"?e=ni.CP_VERSION_4:i==="5"&&(e=ni.CP_VERSION_5)}else return!1}}async connSendHandshakeInfo(e,n){return await this.connSendDatabase(e)?(await this.connSecureSession(),this.connSetNextDataProtocol(this._protocol1,this._protocol2),this._hsVersion===ni.CP_VERSION_6||this._hsVersion===ni.CP_VERSION_4?this.connSendHandshakeVersion4(this._hsVersion,n):this.connSendHandshakeVersion2(this._hsVersion,n)):!1}async connSendDatabase(e){let n=Buffer.from(e,"utf8"),r=6+n.length+1;return ae.writeInt32(this._stream,r),ae.writeInt16(this._stream,Ce.HSV2_DB),this._stream.write(n),this._stream.write(Buffer.from([0])),await this.readByte()===78}async connSecureSession(){let n=0,r=this._options.securityLevel;r==="OnlyUnsecuredSession"?n=1:r==="PreferredSecuredSession"?n=2:r==="OnlySecuredSession"&&(n=3),ae.writeInt32(this._stream,10),ae.writeInt16(this._stream,Ce.HSV2_SSL_NEGOTIATE),ae.writeInt32(this._stream,n);let i=await this.readByte();if(i===78){if(this._options.securityLevel==="OnlySecuredSession")throw new Error("Server refused secure session, but OnlySecuredSession was requested.");return!0}if(i===83){Ht("Upgrading to SSL...");let s=Buffer.alloc(6);s.writeInt32BE(6,0),s.writeInt16BE(Ce.HSV2_SSL_CONNECT,4),await new Promise(a=>{this._stream.write(s)?a():this._stream.once("drain",a)}),this._socket.removeAllListeners("data"),this._socket.removeAllListeners("readable");let o={socket:this._socket,rejectUnauthorized:!1};if(this._options.sslCerFilePath){this._options.rejectUnauthorized===!1?o.rejectUnauthorized=!1:o.rejectUnauthorized=!0;try{o.ca=S0.readFileSync(this._options.sslCerFilePath)}catch(a){throw Ht("Failed to load cert file",a),a}}return new Promise((a,l)=>{let c=T0.connect(o,()=>{Ht("SSL Connected"),this._stream=c,this._stream.on("error",u=>{Ht("Secure Stream Error",u)}),this.readByte().then(u=>{u===78?a(!0):l(new Error(`SSL Handshake failed: Unexpected response ${String.fromCharCode(u)}`))}).catch(u=>{Ht("Failed to read SSL confirmation",u),l(u)})});c.on("error",u=>{Ht("SSL Connection Error",u),l(u)})})}return!1}connSetNextDataProtocol(e,n){return this._protocol2===0&&(this._protocol2=5),this._protocol1=3,!0}async connSendHandshakeVersion4(e,n){let r=Buffer.from(n,"utf8"),i=6+r.length+1;ae.writeInt32(this._stream,i),ae.writeInt16(this._stream,Ce.HSV2_USER),this._stream.write(r),this._stream.write(Buffer.from([0]));let s=Ce.HSV2_APPNAME;for(;s!==0;){if(await this.readByte()!==78)return!1;switch(s){case Ce.HSV2_APPNAME:await this.sendStringOption(s,this._guardiumAppName),s=Ce.HSV2_CLIENT_OS;break;case Ce.HSV2_CLIENT_OS:await this.sendStringOption(s,this._guardiumClientOS),s=Ce.HSV2_CLIENT_HOST_NAME;break;case Ce.HSV2_CLIENT_HOST_NAME:await this.sendStringOption(s,this._guardiumClientHostName),s=Ce.HSV2_CLIENT_OS_USER;break;case Ce.HSV2_CLIENT_OS_USER:await this.sendStringOption(s,this._guardiumClientOSUser),s=Ce.HSV2_PROTOCOL;break;case Ce.HSV2_PROTOCOL:i=10,ae.writeInt32(this._stream,i),ae.writeInt16(this._stream,s),ae.writeInt16(this._stream,this._protocol1),ae.writeInt16(this._stream,this._protocol2),s=Ce.HSV2_REMOTE_PID;break;case Ce.HSV2_REMOTE_PID:i=10,ae.writeInt32(this._stream,i),ae.writeInt16(this._stream,s),ae.writeInt32(this._stream,process.pid),s=Ce.HSV2_CLIENT_TYPE;break;case Ce.HSV2_CLIENT_TYPE:i=8,ae.writeInt32(this._stream,i),ae.writeInt16(this._stream,s),ae.writeInt16(this._stream,11),e>=5?s=Ce.HSV2_64BIT_VARLENA_ENABLED:s=Ce.HSV2_CLIENT_DONE;break;case Ce.HSV2_64BIT_VARLENA_ENABLED:i=8,ae.writeInt32(this._stream,i),ae.writeInt16(this._stream,s),ae.writeInt16(this._stream,1),s=Ce.HSV2_CLIENT_DONE;break;case Ce.HSV2_CLIENT_DONE:return i=6,ae.writeInt32(this._stream,i),ae.writeInt16(this._stream,s),s=0,!0}}return!1}async connSendHandshakeVersion2(e,n){let r=Buffer.from(n,"utf8"),i=6+r.length+1;ae.writeInt32(this._stream,i),ae.writeInt16(this._stream,Ce.HSV2_USER),this._stream.write(r),this._stream.write(Buffer.from([0]));let s=Ce.HSV2_PROTOCOL;for(;s!==0;){Ht(`Waiting for response in v2 loop. Info: ${s}`);let o=await this.readByte();if(Ht(`Got response: ${String.fromCharCode(o)}`),o===78)switch(s){case Ce.HSV2_PROTOCOL:i=10,ae.writeInt32(this._stream,i),ae.writeInt16(this._stream,s),ae.writeInt16(this._stream,this._protocol1),ae.writeInt16(this._stream,this._protocol2),s=Ce.HSV2_REMOTE_PID;break;case Ce.HSV2_REMOTE_PID:i=10,ae.writeInt32(this._stream,i),ae.writeInt16(this._stream,s),ae.writeInt32(this._stream,process.pid),s=Ce.HSV2_CLIENT_TYPE;break;case Ce.HSV2_OPTIONS:s=Ce.HSV2_CLIENT_TYPE;break;case Ce.HSV2_CLIENT_TYPE:i=8,ae.writeInt32(this._stream,i),ae.writeInt16(this._stream,s),ae.writeInt16(this._stream,11),e===ni.CP_VERSION_5||e===ni.CP_VERSION_6?s=Ce.HSV2_64BIT_VARLENA_ENABLED:s=Ce.HSV2_CLIENT_DONE;break;case Ce.HSV2_64BIT_VARLENA_ENABLED:i=8,ae.writeInt32(this._stream,i),ae.writeInt16(this._stream,s),ae.writeInt16(this._stream,1),s=Ce.HSV2_CLIENT_DONE;break;case Ce.HSV2_CLIENT_DONE:return i=6,ae.writeInt32(this._stream,i),ae.writeInt16(this._stream,s),s=0,!0}else throw o===dn.ErrorResponse?new Error("Handshake V2 Failed: ErrorResponse from backend"):new Error(`Handshake V2 Failed: Unexpected response ${String.fromCharCode(o)}`)}return!1}async sendStringOption(e,n){let r=Buffer.from(n,"utf8"),i=6+r.length+1;ae.writeInt32(this._stream,i),ae.writeInt16(this._stream,e),this._stream.write(r),this._stream.write(Buffer.from([0]))}async connAuthenticate(e){if(await this.readByte()!==dn.AuthenticationRequest)return!1;let r=ae.readInt32(await this.readBytes(4));if(Ht(`Auth request: ${r}`),r===0)return!0;if(r===3){let i=Buffer.from(e,"utf8"),s=4+i.length+1;return ae.writeInt32(this._stream,s),this._stream.write(i),this._stream.write(Buffer.from([0])),!0}if(r===5){let i=await this.readBytes(2),s=Buffer.from(e,"utf8"),a=h0.createHash("md5").update(Buffer.concat([i,s])).digest("base64").replace(/=+$/,""),l=Buffer.from(a,"utf8"),c=4+l.length+1;return ae.writeInt32(this._stream,c),this._stream.write(l),this._stream.write(Buffer.from([0])),!0}return!1}async readString(){let e=[];for(;;){let n=await this.readByte();if(n===0)break;e.push(n)}return Buffer.from(e).toString("utf8")}async connConnectionComplete(){for(;;){let e=await this.readByte();if(Ht(`Resp: ${String.fromCharCode(e)} (0x${e.toString(16)})`),e===dn.AuthenticationRequest){let r=ae.readInt32(await this.readBytes(4));Ht(`Auth req in complete: ${r}`);continue}if(e===dn.ErrorResponse){let r=await this.readBytes(4),i=ae.readInt32(r);if(i<0||i>1e8){let o=r.toString("utf8");throw o+=await this.readString(),new Error(`Backend Error: ${o}`)}let s=await this.readBytes(i-4);throw new Error(`Backend Error: ${s.toString()}`)}let n=await this.readBytes(4);if(Ht(`Skipped 4 bytes: ${n.toString("hex")}`),e===dn.BackendKeyData){let r=await this.readBytes(4);Ht(`KeyData Padding: ${r.toString("hex")}`);let i=ae.readInt32(await this.readBytes(4)),s=ae.readInt32(await this.readBytes(4));Ht(`KeyData: PID=${i} Key=${s}`),this.backendProcessId=i,this.backendSecretKey=s;continue}if(e===dn.ReadyForQuery)return Ht("ReadyForQuery"),!0;if(e===dn.NoticeResponse){let r=ae.readInt32(await this.readBytes(4)),i=await this.readBytes(r);Ht(`Notice: ${i.toString()}`);continue}}}};R0.exports=uA});var g0=O((kLe,m0)=>{"use strict";var dA=class{constructor(e){this.connection=e,this.commandText="",this.parameters=[],this._recordsAffected=-1,this.commandTimeout=e.commandTimeout!==void 0?e.commandTimeout:30}async execute(){return this.connection.execute(this,!1)}async executeNonQuery(){return await this.connection.execute(this,!1),this._recordsAffected}async executeReader(){return this.connection.executeReader(this)}async cancel(){return this.connection.cancel()}};m0.exports=dA});var _0=O((YLe,I0)=>{"use strict";var Re={Bool:16,Bytea:17,Char:18,Name:19,Int8:20,Int2:21,Int4:23,Text:25,ShowDate:2530,BpChar:1042,VarChar:1043,Date:1082,Time:1083,Timestamp:1114,TimestampTz:1184,Interval:1186,TimeTz:1266,Numeric:1700,Float4:700,Float8:701},Kc=16,fA=class{constructor(e,n,r,i,s){this.currentRow=null;this.closed=!1;this._nameIndex={};this._pendingColumns=null;this._isFinished=!1;this.command=e,this.generator=n,this.columnDescriptions=r||[],this.releaseCallback=i,this._initNameIndex(),this._nextItem=s,this._hasRows=!!(this._nextItem&&this._nextItem.type==="DataRow")}get hasRows(){return this._hasRows}_initNameIndex(){if(this._nameIndex={},this.columnDescriptions)for(let e=0;e<this.columnDescriptions.length;e++)this._nameIndex[this.columnDescriptions[e].name.toLowerCase()]=e}_markFinished(){this._isFinished=!0,this._nextItem=null,this._hasRows=!1,this.releaseCallback&&(this.releaseCallback(),this.releaseCallback=null)}async nextResult(){if(this._pendingColumns){for(this.columnDescriptions=this._pendingColumns,this._pendingColumns=null,this._initNameIndex(),this.currentRow=null;;){let e=await this.generator.next();if(e.done){this._nextItem=null,this._hasRows=!1;break}let n=e.value;if(n.type!=="RowDescriptionStandard")if(n.type==="DataRow"){this._nextItem=n,this._hasRows=!0;break}else if(n.type==="CommandComplete"){this._nextItem=n,this._hasRows=!1;break}else{this._nextItem=n,this._hasRows=!1;break}}return!0}if(this.closed||this._isFinished)return!1;for(;;){let e;if(this._nextItem?(e={value:this._nextItem,done:!1},this._nextItem=null):e=await this.generator.next(),e.done)return this._markFinished(),!1;let n=e.value;if(n.type==="RowDescription"){this.columnDescriptions=n.columns,this._initNameIndex(),this.currentRow=null;continue}if(n.type==="RowDescriptionStandard"){let r=this.command?._preparedStatement;this.columnDescriptions.length===0&&r&&r.description&&(this.columnDescriptions=r.description,this._initNameIndex()),this.currentRow=null;continue}if(n.type==="DataRow")return this._nextItem=n,this._hasRows=!0,!0;if(n.type!=="CommandComplete"){if(n.type==="ErrorResponse")throw new Error(n.message||"Unknown Netezza Error");if(n.type==="ReadyForQuery")return this._markFinished(),!1}}}getSchemaTable(){if(!this.columnDescriptions)return[];let e=[];for(let n=0;n<this.columnDescriptions.length;n++){let r=this.columnDescriptions[n],i={ColumnName:r.name,ColumnOrdinal:n+1,ColumnSize:-1,NumericPrecision:0,NumericScale:0,DataType:String,ProviderType:r.typeOid,AllowDBNull:!0,IsReadOnly:!0,IsLong:!1},s=r.typeMod,o=r.typeOid;switch(o){case Re.Bool:i.DataType=Boolean,i.ColumnSize=1;break;case Re.Int2:i.DataType=Number,i.ColumnSize=2;break;case Re.Int4:i.DataType=Number,i.ColumnSize=4;break;case Re.Int8:i.DataType=Number,i.ColumnSize=8;break;case Re.Float4:case Re.Float8:i.DataType=Number,i.ColumnSize=o===Re.Float8?8:4,i.NumericPrecision=o===Re.Float8?53:24;break;case Re.Numeric:if(i.DataType=Number,s>Kc){let a=s-Kc>>16,l=s-Kc&65535;i.NumericPrecision=a,i.NumericScale=l,i.ColumnSize=Math.floor(a/2)+1,i.ColumnSize<r.typeLen&&r.typeLen>0&&(i.ColumnSize=r.typeLen)}else i.ColumnSize=r.typeLen;break;case Re.Date:case Re.Timestamp:case Re.TimestampTz:case Re.Time:case Re.TimeTz:i.DataType=Date,(o===Re.Time||o===Re.TimeTz)&&(i.DataType=Object),i.ColumnSize=r.typeLen;break;case Re.Char:case Re.BpChar:case Re.VarChar:case Re.Text:case Re.Name:case Re.ShowDate:i.DataType=String,s>Kc?i.ColumnSize=s-Kc:(i.ColumnSize=-1,r.typeLen>0&&(i.ColumnSize=r.typeLen)),i.ColumnSize>8e3&&(i.IsLong=!0);break;default:i.DataType=String,i.ColumnSize=r.typeLen;break}e.push(i)}return{Rows:e,Columns:{Count:e.length}}}getTypeName(e){if(e<0||e>=this.columnDescriptions.length)throw new Error(`Column ordinal ${e} is out of range`);let r=this.columnDescriptions[e].typeOid;switch(r){case Re.Bool:return"BOOL";case Re.Bytea:return"BYTEA";case Re.Char:return"CHAR";case Re.Name:return"NAME";case Re.Int8:return"INT8";case Re.Int2:return"INT2";case Re.Int4:return"INT4";case Re.Text:return"TEXT";case Re.BpChar:return"CHAR";case Re.VarChar:return"VARCHAR";case Re.Date:return"DATE";case Re.Time:return"TIME";case Re.Timestamp:return"TIMESTAMP";case Re.TimestampTz:return"TIMESTAMPTZ";case Re.Interval:return"INTERVAL";case Re.TimeTz:return"TIMETZ";case Re.Numeric:return"NUMERIC";case Re.Float4:return"FLOAT4";case Re.Float8:return"FLOAT8";case 2530:return"DATE";case 15:return"CHAR";case 16:return"BOOL";default:return`UNKNOWN(${r})`}}async read(){if(this.closed||this._isFinished||this._pendingColumns)return!1;let e;if(this._nextItem?(e={value:this._nextItem,done:!1},this._nextItem=null):e=await this.generator.next(),e.done)return this._markFinished(),this.currentRow=null,!1;let n=e.value;if(n.type==="DataRow")return this.currentRow=n.row,!0;if(n.type==="RowDescription")return this._pendingColumns=n.columns,this.currentRow=null,!1;if(n.type==="RowDescriptionStandard"){let r=this.command?._preparedStatement;return this._pendingColumns=r&&r.description?r.description:this.columnDescriptions,this.currentRow=null,!1}if(n.type==="CommandComplete")return this.currentRow=null,this.read();if(n.type==="ErrorResponse")throw new Error(n.message||"Unknown Netezza Error");return n.type==="ReadyForQuery"?(this._markFinished(),this.currentRow=null,!1):this.read()}getValue(e){return this._validateOrdinal(e),this.currentRow[e]}getValueByName(e){let n=this.getOrdinal(e);return this.getValue(n)}getName(e){if(e<0||e>=this.columnDescriptions.length)throw new Error(`Column ordinal ${e} is out of range`);return this.columnDescriptions[e].name}getOrdinal(e){let n=this._nameIndex[e.toLowerCase()];if(n===void 0)throw new Error(`Column '${e}' not found`);return n}get fieldCount(){return this.columnDescriptions?.length||0}get FieldCount(){return this.fieldCount}isDBNull(e){return this._validateOrdinal(e),this.currentRow[e]===null}getBoolean(e){let n=this.getValue(e);return n===null?!1:typeof n=="boolean"?n:typeof n=="string"?n.toLowerCase()==="t"||n==="1"||n.toLowerCase()==="true":!!n}getByte(e){let n=this.getValue(e);return n===null?0:Number(n)&255}getInt16(e){let n=this.getValue(e);return n===null?0:Number(n)}getInt32(e){let n=this.getValue(e);return n===null?0:Number(n)}getInt64(e){let n=this.getValue(e);return n===null?0:typeof n=="bigint"?n:Number(n)}getFloat(e){let n=this.getValue(e);return n===null?0:Number(n)}getDouble(e){let n=this.getValue(e);return n===null?0:Number(n)}getDecimal(e){let n=this.getValue(e);return n===null?0:typeof n=="string"?n:Number(n)}getString(e){let n=this.getValue(e);return n===null?null:typeof n=="string"?n:n.toString?n.toString():String(n)}getDateTime(e){let n=this.getValue(e);return n===null?null:n instanceof Date?n:new Date(n)}getTimeSpan(e){let n=this.getValue(e);if(n===null)return null;if(typeof n=="object"&&"hours"in n)return n;if(typeof n=="string"){let r=n.split(":");if(r.length>=2){let i=(r[2]||"0").split(".");return{hours:parseInt(r[0],10),minutes:parseInt(r[1],10),seconds:parseInt(i[0],10),microseconds:i.length>1?parseInt(i[1].padEnd(6,"0"),10):0,toString(){return n}}}}return n}getRowObject(){if(!this.currentRow)return null;let e={};for(let n=0;n<this.columnDescriptions.length;n++)e[this.columnDescriptions[n].name]=this.currentRow[n];return e}getValues(){return this.currentRow?[...this.currentRow]:[]}async close(){if(!this.closed){if(this.closed=!0,!this._isFinished&&this.generator)try{for await(let e of this.generator)if(e.type==="ReadyForQuery")break}catch{}this.releaseCallback&&(this.releaseCallback(),this.releaseCallback=null)}}get isClosed(){return this.closed}_validateOrdinal(e){if(!this.currentRow)throw new Error("No current row. Did you call read()?");if(e<0||e>=this.columnDescriptions.length)throw new Error(`Column ordinal ${e} is out of range`)}async*[Symbol.asyncIterator](){for(;await this.read();)yield this.getRowObject()}};I0.exports=fA});var O0=O((VLe,N0)=>{"use strict";var EA=class{constructor(){this.version=null;this.nullsAllowed=null;this.sizeWord=null;this.sizeWordSize=null;this.numFixedFields=null;this.numVaryingFields=null;this.fixedFieldsSize=0;this.maxRecordSize=null;this.numFields=0;this.fieldType=[];this.fieldSize=[];this.fieldTrueSize=[];this.fieldOffset=[];this.fieldPhysField=[];this.fieldLogField=[];this.fieldNullAllowed=[];this.fieldFixedSize=[];this.fieldSpringField=[];this.dateStyle=null;this.euroDates=null}clear(){this.fieldType=[],this.fieldSize=[],this.fieldTrueSize=[],this.fieldOffset=[],this.fieldPhysField=[],this.fieldLogField=[],this.fieldNullAllowed=[],this.fieldFixedSize=[],this.fieldSpringField=[]}parse(e,n){this.clear();let r=0;this.version=e.readInt32BE(r),r+=4,this.nullsAllowed=e.readInt32BE(r),r+=4,this.sizeWord=e.readInt32BE(r),r+=4,this.sizeWordSize=e.readInt32BE(r),r+=4,this.numFixedFields=e.readInt32BE(r),r+=4,this.numVaryingFields=e.readInt32BE(r),r+=4,this.fixedFieldsSize=e.readInt32BE(r),r+=4,this.maxRecordSize=e.readInt32BE(r),r+=4,this.numFields=e.readInt32BE(r),r+=4;let i=3,s=39;for(let o=0;o<this.numFields;o++){let a=e.readInt32BE(r);a===i&&n?.description?.[o]?.typeOid===702&&(a=s),this.fieldType.push(a),this.fieldSize.push(e.readInt32BE(r+4)),this.fieldTrueSize.push(e.readInt32BE(r+8)),this.fieldOffset.push(e.readInt32BE(r+12)),this.fieldPhysField.push(e.readInt32BE(r+16)),this.fieldLogField.push(e.readInt32BE(r+20)),this.fieldNullAllowed.push(e.readInt32BE(r+24)!==0),this.fieldFixedSize.push(e.readInt32BE(r+28)),this.fieldSpringField.push(e.readInt32BE(r+32)),r+=36}this.dateStyle=e.readInt32BE(r),r+=4,this.euroDates=e.readInt32BE(r)}getFieldPrecision(e){return this.fieldSize[e]>>8&127}getFieldScale(e){return this.fieldSize[e]&255}getNumericDigitCount(e){return Math.floor(this.fieldTrueSize[e]/4)}};N0.exports=EA});var yn=O((XLe,b0)=>{"use strict";var hA=Q(require("net")),Ps=Q(require("fs")),C0=require("events");nA();t0();var B8=A0(),Nt=iA(),F8=g0(),H8=_0(),G8=O0(),he=cA()("nz:connection"),pA=class t extends C0.EventEmitter{constructor(n){super();this._socket=null;this._stream=null;this._backendProcessId=0;this._backendSecretKey=0;this._commandNumber=-1;this._connected=!1;this._rowDescription=null;this._rows=[];this._tupdesc=new G8;this._tmpBuffer=Buffer.alloc(65536);this._intBuf=Buffer.allocUnsafe(65536);this._intBufStart=0;this._intBufEnd=0;this.commandTimeout=30;this.connectionTimeout=30;this._executing=!1;this._exportStream=null;this.config=n,n.connectionTimeout!==void 0&&(this.connectionTimeout=n.connectionTimeout)}static{this._streamRegistry=new Map}static registerImportStream(n,r){this._streamRegistry.set(n,r)}static unregisterImportStream(n){this._streamRegistry.delete(n)}async connect(){return new Promise((n,r)=>{if(!this.config.host)return r(new Error("Host is required"));let i=!1,s;this.connectionTimeout>0&&(s=setTimeout(()=>{i=!0,he("Connection timeout triggered after",this.connectionTimeout,"seconds"),this._socket&&this._socket.destroy(),r(new Error(`Connection timeout after ${this.connectionTimeout} seconds`))},this.connectionTimeout*1e3));let o=()=>{s&&(clearTimeout(s),s=void 0)};this._socket=new hA.Socket,this._socket.connect(this.config.port||5480,this.config.host,async()=>{if(i)return;he("Socket connected"),this._socket.setNoDelay(!0),this._stream=this._socket;let a=new B8(this._socket,this._stream,this.config.host,this.config);try{if(this._stream=await a.startup(this.config.database,this.config.user,this.config.password),i)return;o(),this._connected=!0,this._backendProcessId=a.backendProcessId,this._backendSecretKey=a.backendSecretKey,n()}catch(l){o(),this._socket.destroy(),r(l)}}),this._socket.on("error",a=>{he("Socket error",a),o(),this._connected?this.emit("error",a):r(a)}),this._socket.on("close",()=>{he("Socket closed"),o(),this._connected=!1,this.emit("close")})})}async cancel(){if(!(!this._backendProcessId||!this._backendSecretKey))return new Promise((n,r)=>{let i=new hA.Socket;i.on("error",s=>{he("Cancel socket error",s),r(s)}),i.connect(this.config.port||5480,this.config.host,()=>{let s=Buffer.alloc(16);Nt.writeInt32(s,16,0),Nt.writeInt32(s,80877102,4),Nt.writeInt32(s,this._backendProcessId,8),Nt.writeInt32(s,this._backendSecretKey,12),i.write(s,()=>{}),i.on("close",()=>n()),i.on("end",()=>n()),i.on("error",()=>n())})})}close(){this._socket&&(this._socket.end(),this._socket.destroy())}createCommand(n){let r=new F8(this);return n&&(r.commandText=n),r}async beginTransaction(){let n=this.createCommand("BEGIN");await this.execute(n)}async commit(){let n=this.createCommand("COMMIT");await this.execute(n)}async rollback(){let n=this.createCommand("ROLLBACK");await this.execute(n)}async _readBytes(n){if(this._intBufEnd-this._intBufStart>=n){let r=Buffer.from(this._intBuf.subarray(this._intBufStart,this._intBufStart+n));return this._intBufStart+=n,r}return this._readBytesSlow(n)}async _readBytesSlow(n){if(n>this._intBuf.length){let i=[],s=this._intBufEnd-this._intBufStart;s>0&&(i.push(Buffer.from(this._intBuf.subarray(this._intBufStart,this._intBufEnd))),this._intBufStart=0,this._intBufEnd=0);let o=n-s;for(;o>0;){let a=this._stream.read();a!==null?a.length<=o?(i.push(a),o-=a.length):(i.push(a.slice(0,o)),this._feedBuffer(a.slice(o)),o=0):await this._waitForReadable()}return Buffer.concat(i,n)}if(this._intBuf.length-this._intBufStart<n){let i=this._intBufEnd-this._intBufStart;this._intBuf.copy(this._intBuf,0,this._intBufStart,this._intBufEnd),this._intBufStart=0,this._intBufEnd=i}for(;this._intBufEnd-this._intBufStart<n;){let i=this._stream.read();if(i!==null){let s=this._intBuf.length-this._intBufEnd;i.length<=s?(i.copy(this._intBuf,this._intBufEnd),this._intBufEnd+=i.length):(i.copy(this._intBuf,this._intBufEnd,0,s),this._intBufEnd+=s,this._stream.unshift(i.slice(s)))}else await this._waitForReadable()}let r=Buffer.from(this._intBuf.subarray(this._intBufStart,this._intBufStart+n));return this._intBufStart+=n,r}async _waitForReadable(){if(!this._socket||this._socket.destroyed)throw new Error("Socket closed or destroyed during read");return new Promise((n,r)=>{let i=()=>{this._stream.removeListener("readable",s),this._stream.removeListener("close",o),this._stream.removeListener("error",a),this._stream.removeListener("end",o)},s=()=>{i(),n()},o=()=>{i(),r(new Error("Socket closed/ended during read"))},a=l=>{i(),r(l)};this._stream.once("readable",s),this._stream.once("close",o),this._stream.once("end",o),this._stream.once("error",a)})}_feedBuffer(n){this._stream.unshift(n)}async _readInt32(){await this._ensureBufferData(4);let n=this._intBuf.readInt32BE(this._intBufStart);return this._intBufStart+=4,n}async _readInt16(){await this._ensureBufferData(2);let n=this._intBuf.readInt16BE(this._intBufStart);return this._intBufStart+=2,n}async _readByte(){await this._ensureBufferData(1);let n=this._intBuf[this._intBufStart];return this._intBufStart+=1,n}async _ensureBufferData(n){if(!(this._intBufEnd-this._intBufStart>=n)){if(this._intBuf.length-this._intBufStart<n){let r=this._intBufEnd-this._intBufStart;this._intBuf.copy(this._intBuf,0,this._intBufStart,this._intBufEnd),this._intBufStart=0,this._intBufEnd=r}for(;this._intBufEnd-this._intBufStart<n;){let r=this._stream.read();if(r!==null){let i=this._intBuf.length-this._intBufEnd;r.length<=i?(r.copy(this._intBuf,this._intBufEnd),this._intBufEnd+=r.length):(r.copy(this._intBuf,this._intBufEnd,0,i),this._intBufEnd+=i,this._stream.unshift(r.slice(i)))}else await this._waitForReadable()}}}async execute(n,r=!1){let i=n.commandTimeout;if(!i||i<=0)return this._doExecute(n);let s,o=this._doExecute(n),a=new Promise((l,c)=>{s=setTimeout(async()=>{he("Command timeout triggered");try{await this.cancel(),c(new Error("Command execution timeout"))}catch(u){c(new Error("Command execution timeout (Cancel failed: "+u.message+")"))}},i*1e3)});try{return await Promise.race([o,a])}catch(l){throw l.message&&l.message.includes("Command execution timeout")&&o.catch(()=>{}),l}finally{clearTimeout(s)}}async _doExecute(n){if(this._executing)throw new Error("Connection is already executing a command");this._executing=!0;try{he("Executing:",n.commandText),this._preExecution(n.commandText);let r=null;for await(let i of this._responseGenerator(n))i.type==="ErrorResponse"&&(r=new Error("Netezza Error: "+i.message));if(r)throw r;return!0}finally{this._executing=!1}}async executeReader(n){let r=n.commandTimeout||this.commandTimeout;if(!r||r<=0)return this._doExecuteReader(n);let i,s=this._doExecuteReader(n),o=new Promise((a,l)=>{i=setTimeout(async()=>{he("Command timeout triggered");try{await this.cancel(),l(new Error("Command execution timeout"))}catch(c){l(new Error("Command execution timeout (Cancel failed: "+c.message+")"))}},r*1e3)});try{return await Promise.race([s,o])}catch(a){throw a.message&&a.message.includes("Command execution timeout")&&s.catch(()=>{}),a}finally{clearTimeout(i)}}async _doExecuteReader(n){if(this._executing)throw new Error("Connection is already executing a command");this._executing=!0;try{he("Executing Reader:",n.commandText),this._preExecution(n.commandText);let r=this._responseGenerator(n),i=[],s=await r.next(),o=null,a=null;for(;!s.done;){let l=s.value;if(l.type==="RowDescription")i=l.columns;else if(l.type==="RowDescriptionStandard"){let c=l.desc;if(c&&c.numFields>0&&i.length===0){let u=n._preparedStatement;u&&u.description&&(i=u.description)}}else if(l.type==="DataRow"||l.type==="CommandComplete"||l.type==="ReadyForQuery"){if(!o&&i.length>0){a=l;break}}else l.type==="ErrorResponse"&&(o=new Error("Netezza Error: "+l.message));s=await r.next()}if(o)throw this._executing=!1,o;return new H8(n,r,i,()=>{this._executing=!1},a)}catch(r){throw this._executing=!1,r}}_preExecution(n){let r=Buffer.from(n,"utf8"),i=Buffer.allocUnsafe(5+r.length+1);i[0]=80,this._commandNumber!==-1?(this._commandNumber++,i.writeInt32BE(this._commandNumber,1)):(i[1]=255,i[2]=255,i[3]=255,i[4]=255),this._commandNumber>1e5&&(this._commandNumber=1),r.copy(i,5),i[5+r.length]=0,this._stream.write(i)}async*_responseGenerator(n){this._rows=[],this._rowDescription=null;let r=!1;for(;!r;){let i=await this._readByte();for(;i===0;)i=await this._readByte();if(i===117){await this._handleExternalTableExportStart();continue}if(i===85){await this._handleExternalTableExportData();continue}if(i===108){await this._handleExternalTableImport();continue}if(i===120){await this._readBytes(4),he("Error operation cancel (Ext Tbl)");continue}if(i===101){await this._readBytes(4);let o=Nt.readInt32(await this._readBytes(4)),a=(await this._readBytes(o-1)).toString("utf8");await this._readBytes(1);let l=[],c=(await this._readBytes(1))[0];for(l.push(c);c=(await this._readBytes(1))[0],c!==0;)l.push(c);let u=Nt.readInt32(await this._readBytes(4));await this._consumeExternalTableLogData();continue}let s=await this._readBytes(4);if(i===dn.CommandComplete){let o=await this._readInt32(),a=await this._readBytes(o);he("CommandComplete:",a.toString("utf8")),yield{type:"CommandComplete",text:a.toString("utf8")};continue}if(i===dn.ReadyForQuery){r=!0,yield{type:"ReadyForQuery"};continue}if(i===76){r=!0;continue}if(!(i===48||i===65)){if(i===80){let o=await this._readInt32();await this._readBytes(o);continue}if(i===dn.ErrorResponse){let o=await this._readInt32();yield{type:"ErrorResponse",message:(await this._readBytes(o)).toString("utf8")};continue}if(i===dn.RowDescription){let o=await this._readInt32(),a=await this._readBytes(o);this._parseRowDescription(a,n),yield{type:"RowDescription",columns:this._rowDescription};continue}if(i===dn.DataRow){let o=await this._readInt32(),a=await this._readBytes(o);yield{type:"DataRow",row:this._parseDataRow(a)};continue}if(i===dn.RowDescriptionStandard){let o=await this._readInt32(),a=await this._readBytes(o);this._tupdesc.parse(a,n._preparedStatement),yield{type:"RowDescriptionStandard",desc:this._tupdesc};continue}if(i===dn.RowStandard){yield{type:"DataRow",row:await this._resReadDbosTuple(n)};continue}if(i===dn.NoticeResponse){let o=await this._readInt32(),l=(await this._readBytes(o)).toString("utf8").replace(/\0/g,"").trim();this.emit("notice",{message:l});continue}he("Unknown message:","0x"+i.toString(16));try{let o=await this._readInt32();o>0&&o<1e7&&await this._readBytes(o)}catch{}}}}async _consumeExternalTableLogData(){for(;;){let n=await this._readBytes(4),r=Nt.readInt32(n);if(r===0)return;let i=await this._readBytes(r);he("ExtLog Content:",i.toString("utf8"))}}async _handleExternalTableExportStart(){await this._readBytes(4),await this._readBytes(10),await this._readBytes(16);let n=Nt.readInt32(await this._readBytes(4)),i=(await this._readBytes(n)).toString("utf8");he("ExternalTable Export Start. File:",i);try{this._exportStream=Ps.createWriteStream(i),this._exportStream.on("error",o=>{he("Export Stream Error:",o)});let s=Buffer.alloc(4);await new Promise(o=>this._stream.write(s,()=>o()))}catch(s){he("Error opening export file:",s);let o=Buffer.alloc(4);Nt.writeInt32(o,1,0),this._stream.write(o)}}async _handleExternalTableExportData(){he("Handle Export Data: Skipping 8 bytes...");let n=await this._readBytes(4);he("Skipped 4:",n.toString("hex"));let r=await this._readBytes(4);he("Skipped 4 (2):",r.toString("hex")),await this._consumeExternalTableData(this._exportStream),this._exportStream=null}async _consumeExternalTableData(n){for(he("Entering Consume Loop");;){he("Reading status...");let r=await this._readBytes(4),i=Nt.readInt32(r);if(he("ExtTab Status:",i),i===Ls.DATA){let s=Nt.readInt32(await this._readBytes(4));he("Block Length:",s);let o=await this._readBytes(s);n&&n.write(o)}else if(i===Ls.DONE){he("ExternalTable Data Done"),n&&await new Promise(s=>{if(he("Waiting for writeStream finish..."),n.writableFinished)return he("Stream already finished"),s();let o=setTimeout(()=>{he("Stream finish timeout! Destroying..."),n.destroy(),s()},5e3),a=()=>{he("Stream finished event"),clearTimeout(o),c(),s()},l=u=>{he("Stream error on end:",u),clearTimeout(o),c(),s()},c=()=>{n.removeListener("finish",a),n.removeListener("error",l)};n.on("finish",a),n.on("error",l),n.end()});return}else if(i===Ls.ERROR){let s=Nt.readInt16(await this._readBytes(2)),o=(await this._readBytes(s)).toString("utf8");he("ExternalTable Data Error:",o),n&&n.end();return}else{he("Unknown ExtTab Status:",i),n&&n.end();return}}}async _handleExternalTableImport(){await this._readBytes(8);let n=[],r=(await this._readBytes(1))[0];for(n.push(r);r!==0;)r=(await this._readBytes(1))[0],r!==0&&n.push(r);let i=Buffer.from(n).toString("utf8");he("ExternalTable Import Start. File:",i);let s=Nt.readInt32(await this._readBytes(4));he("Host Version:",s);let o=Buffer.alloc(4);Nt.writeInt32(o,1,0),await new Promise(E=>this._stream.write(o,()=>E())),he("Sent Client Version");let a=Nt.readInt32(await this._readBytes(4)),l=Nt.readInt32(await this._readBytes(4));if(he("ExtTab Import Config:",{hostVersion:s,format:a,bufSize:l}),t._streamRegistry.has(i))he("Using virtual import stream for:",i);else if(!Ps.existsSync(i)){he("Import file not found:",i);let E=Buffer.alloc(4);Nt.writeInt32(E,Ls.ERROR,0),this._stream.write(E);return}let c=0,u;t._streamRegistry.has(i)?(u=t._streamRegistry.get(i),c=u.byteLength||0):(c=Ps.statSync(i).size,u=Ps.createReadStream(i,{highWaterMark:l||65536}));let d=0;await new Promise((E,f)=>{u.on("data",p=>{let h=Buffer.isBuffer(p)?p:Buffer.from(p),T=Buffer.alloc(8);Nt.writeInt32(T,Ls.DATA,0),Nt.writeInt32(T,h.length,4),this._stream.write(T),this._stream.write(h),d+=h.length,this.emit("importProgress",{bytesSent:d,totalSize:c,percentComplete:c>0?Math.round(d/c*100):0})}),u.on("end",()=>{he("Import Stream End");let p=Buffer.alloc(4);Nt.writeInt32(p,Ls.DONE,0),this._stream.write(p),E()}),u.on("error",p=>{he("Import Stream Error:",p);let h=Buffer.alloc(4);Nt.writeInt32(h,Ls.ERROR,0),this._stream.write(h);let T=p.message||"Error",S=Buffer.alloc(2);S.writeInt16BE(T.length),this._stream.write(S),this._stream.write(Buffer.from(T,"utf8")),f(p)})})}_parseRowDescription(n,r){he("parseRowDescription data length:",n.length,"hex:",n.toString("hex").substring(0,100));let i=0;if(n.length<2){he("Data too short for row description");return}let s=n.readInt16BE(i);i+=2,he("Column count:",s),this._rowDescription=[];for(let o=0;o<s&&i<n.length;o++){let a=i;for(;i<n.length&&n[i]!==0;)i++;let l=n.toString("utf8",a,i);if(i++,i+11>n.length){he("Not enough data for column",o,"at offset",i,"need 11 more, have",n.length-i);break}let c=n.readInt32BE(i);i+=4;let u=n.readInt16BE(i);i+=2;let d=n.readInt32BE(i);i+=4;let E=n[i];i+=1,this._rowDescription.push({name:l,typeOid:c,typeLen:u,typeMod:d,format:E}),he("Column",o,":",l,"typeOid:",c,"typeLen:",u)}r&&(r._preparedStatement={description:this._rowDescription})}_parseDataRow(n){let r=this._rowDescription.length,s=Math.ceil(r/8),o=[];for(let a=0;a<r;a++){let l=n[Math.floor(a/8)],c=7-a%8;if(!((l&1<<c)!==0)){o.push(null);continue}let d=n.readInt32BE(s);s+=4;let E=d-4;if(E<=0){o.push(null);continue}let p=this._rowDescription[a]?.typeOid,h=n.toString("utf8",s,s+E);p===1083?o.push(Jw(h)):o.push(h),s+=E}return o}async _resReadDbosTuple(n){let r=this._tupdesc.numFields;await this._readBytes(4);let i=Nt.readInt32(await this._readBytes(4)),s=await this._readBytes(i),o=new Array(r);for(let a=0;a<r;a++){if(this._columnIsNull(s,a)){o[a]=null;continue}let l=this._cTableFieldAt(s,a),c=this._tupdesc.fieldType[a],u=this._tupdesc.fieldSize[a];o[a]=this._parseFieldByType(l,c,u,a)}return o}_parseFieldByType(n,r,i,s){switch(r){case Ft.NzTypeChar:return n.toString("latin1",0,i).trimEnd();case Ft.NzTypeNChar:case Ft.NzTypeNVarChar:{let o=n.readInt16LE(0)-2;return n.toString("utf8",2,2+o)}case Ft.NzTypeVarChar:case Ft.NzTypeVarFixedChar:{let o=n.readInt16LE(0)-2;return n.toString("latin1",2,2+o)}case Ft.NzTypeInt8:return n.readBigInt64LE(0);case Ft.NzTypeInt:return n.readInt32LE(0);case Ft.NzTypeInt2:return n.readInt16LE(0);case Ft.NzTypeInt1:return n.readInt8(0);case Ft.NzTypeDouble:return n.readDoubleLE(0);case Ft.NzTypeFloat:return n.readFloatLE(0);case Ft.NzTypeDate:return Kw(n);case Ft.NzTypeTime:return Zf(n);case Ft.NzTypeInterval:return Qw(n);case Ft.NzTypeTimeTz:return Zw(n,i);case Ft.NzTypeTimestamp:return jw(n);case Ft.NzTypeBool:return n[0]===1;case Ft.NzTypeNumeric:{let o=this._tupdesc.getFieldPrecision(s),a=this._tupdesc.getFieldScale(s),l=this._tupdesc.getNumericDigitCount(s);return e0(n,o,a,l)}default:return n.toString("utf8",0,i)}}_columnIsNull(n,r){if(!this._tupdesc.nullsAllowed)return!1;let i=this._tupdesc.fieldPhysField[r];return(n[2+Math.floor(i/8)]&1<<i%8)!==0}_cTableFieldAt(n,r){if(this._tupdesc.fieldFixedSize[r]!==0)return n.slice(this._tupdesc.fieldOffset[r]);let i=n.slice(this._tupdesc.fixedFieldsSize);for(let s=0;s<this._tupdesc.fieldOffset[r];s++){let o=i.readInt16LE(0);i=i.slice(o%2===0?o:o+1)}return i}};b0.exports=pA});var Jc={};pt(Jc,{createNzConnection:()=>$8});function $8(t){let e=yn();return new e(t)}var Qc=W(()=>{"use strict"});var iE,ki,TA=W(()=>{"use strict";iE=Q(require("vscode")),ki=class t{constructor(e){this.context=e;this._connections={};this._activeConnectionName=null;this._documentConnections=new Map;this._documentPersistentConnections=new Map;this._documentKeepConnectionOpen=new Map;this._persistentConnections=new Map;this._keepConnectionOpen=!0;this._onDidChangeConnections=new iE.EventEmitter;this.onDidChangeConnections=this._onDidChangeConnections.event;this._onDidChangeActiveConnection=new iE.EventEmitter;this.onDidChangeActiveConnection=this._onDidChangeActiveConnection.event;this._onDidChangeDocumentConnection=new iE.EventEmitter;this.onDidChangeDocumentConnection=this._onDidChangeDocumentConnection.event;this._loadingPromise=this.loadConnections()}static{this.SERVICE_NAME="netezza-vscode-connections"}static{this.ACTIVE_CONN_KEY="netezza-active-connection"}async loadConnections(){this._activeConnectionName=this.context.globalState.get(t.ACTIVE_CONN_KEY)||null;let e=await this.context.secrets.get(t.SERVICE_NAME);if(e)try{this._connections=JSON.parse(e)}catch(n){console.error("Failed to parse connections:",n),this._connections={}}else{let n=await this.context.secrets.get("netezza-vscode");if(n)try{let r=JSON.parse(n);if(r&&r.host){let i=`Default (${r.host})`;this._connections={[i]:{...r,name:i}},this._activeConnectionName=i,await this.saveConnectionsToStorage()}}catch{}}this._onDidChangeConnections.fire()}async ensureLoaded(){await this._loadingPromise}async saveConnectionsToStorage(){await this.context.secrets.store(t.SERVICE_NAME,JSON.stringify(this._connections)),this._activeConnectionName?await this.context.globalState.update(t.ACTIVE_CONN_KEY,this._activeConnectionName):await this.context.globalState.update(t.ACTIVE_CONN_KEY,void 0)}async saveConnection(e){if(await this.ensureLoaded(),!e.name)throw new Error("Connection name is required");this._connections[e.name]=e,this._activeConnectionName||await this.setActiveConnection(e.name),await this.saveConnectionsToStorage(),this._onDidChangeConnections.fire()}async deleteConnection(e){if(await this.ensureLoaded(),this._connections[e]){if(await this.closePersistentConnection(e),delete this._connections[e],this._activeConnectionName===e){let n=Object.keys(this._connections);await this.setActiveConnection(n.length>0?n[0]:null)}await this.saveConnectionsToStorage(),this._onDidChangeConnections.fire()}}async getConnections(){return await this.ensureLoaded(),Object.values(this._connections)}async getConnection(e){return await this.ensureLoaded(),this._connections[e]}async setActiveConnection(e){await this.ensureLoaded(),this._activeConnectionName=e,await this.context.globalState.update(t.ACTIVE_CONN_KEY,e),this._onDidChangeActiveConnection.fire(e)}getActiveConnectionName(){return this._activeConnectionName}async getCurrentDatabase(e){await this.ensureLoaded();let n=e||this._activeConnectionName;return n&&this._connections[n]?.database||null}setDocumentKeepConnectionOpen(e,n){this._documentKeepConnectionOpen.set(e,n),n||this.closeDocumentPersistentConnection(e)}getDocumentKeepConnectionOpen(e){let n=this._documentKeepConnectionOpen.get(e);return n!==void 0?n:this._keepConnectionOpen}hasDocumentKeepConnectionOpen(e){return this._documentKeepConnectionOpen.has(e)}toggleDocumentKeepConnectionOpen(e){let r=!this.getDocumentKeepConnectionOpen(e);return this.setDocumentKeepConnectionOpen(e,r),r}async getDocumentPersistentConnection(e,n){let r=n||this.getConnectionForExecution(e);if(!r)throw new Error("No connection selected for this document");let i=await this.getConnection(r);if(!i)throw new Error(`Connection '${r}' not found or invalid`);let s=this._documentPersistentConnections.get(e);if(s)return s;let{createNzConnection:o}=(Qc(),Wi(Jc)),a=o({host:i.host,port:i.port||5480,database:i.database,user:i.user,password:i.password});return await a.connect(),this._documentPersistentConnections.set(e,a),a}async closeDocumentPersistentConnection(e){let n=this._documentPersistentConnections.get(e);if(n){try{await n.close()}catch(r){console.error(`Error closing document connection for ${e}:`,r)}this._documentPersistentConnections.delete(e)}}async closeAllDocumentPersistentConnections(){for(let e of this._documentPersistentConnections.keys())await this.closeDocumentPersistentConnection(e)}setKeepConnectionOpen(e){this._keepConnectionOpen=e,e||this.closeAllPersistentConnections()}getKeepConnectionOpen(){return this._keepConnectionOpen}async getPersistentConnection(e){let n=e||this._activeConnectionName;if(!n)throw new Error("No connection selected");let r=await this.getConnection(n);if(!r)throw new Error(`Connection '${n}' not found or invalid`);let i=this._persistentConnections.get(n);if(!i){let{createNzConnection:s}=(Qc(),Wi(Jc)),o=s({host:r.host,port:r.port||5480,database:r.database,user:r.user,password:r.password});await o.connect(),i=o,this._persistentConnections.set(n,i)}return i}async closePersistentConnection(e){let n=this._persistentConnections.get(e);if(n){try{await n.close()}catch(r){console.error(`Error closing connection ${e}:`,r)}this._persistentConnections.delete(e)}}async closeAllPersistentConnections(){for(let e of this._persistentConnections.keys())await this.closePersistentConnection(e)}dispose(){this.closeAllPersistentConnections(),this.closeAllDocumentPersistentConnections(),this._onDidChangeConnections.dispose(),this._onDidChangeActiveConnection.dispose(),this._onDidChangeDocumentConnection.dispose()}getDocumentConnection(e){return this._documentConnections.get(e)}setDocumentConnection(e,n){this._documentConnections.set(e,n),this.closeDocumentPersistentConnection(e),this._onDidChangeDocumentConnection.fire(e)}clearDocumentConnection(e){this._documentConnections.delete(e),this.closeDocumentPersistentConnection(e),this._documentKeepConnectionOpen.delete(e),this._onDidChangeDocumentConnection.fire(e)}getConnectionForExecution(e){if(e){let n=this._documentConnections.get(e);if(n)return n}return this._activeConnectionName||void 0}}});var y0={};pt(y0,{QueryHistoryManager:()=>fn});var Ut,SA,fn,sE=W(()=>{"use strict";Ut=Q(require("fs")),SA=Q(require("path")),fn=class t{constructor(e){this.context=e;this.cache=[];this.initialized=!1;this.writeQueue=Promise.resolve();this.archiveQueue=Promise.resolve();if(this.context.globalStorageUri){let n=this.context.globalStorageUri.fsPath;this.historyFilePath=SA.join(n,"query-history.json"),this.archiveFilePath=SA.join(n,"query-history-archive.json");try{Ut.existsSync(n)||Ut.mkdirSync(n,{recursive:!0})}catch(r){console.error("[QueryHistoryManager] Error creating storage directory:",r)}}this.initialize()}static{this.STORAGE_KEY="queryHistory"}static{this.ACTIVE_LIMIT=1e3}static{this.BATCH_ARCHIVE_SIZE=100}static{this.STORAGE_VERSION=1}async initialize(){if(!this.initialized)try{let e=!1;if(this.historyFilePath&&Ut.existsSync(this.historyFilePath))try{let n=await Ut.promises.readFile(this.historyFilePath,"utf-8");if(!n||!n.trim())console.log("[QueryHistoryManager] File is empty, starting fresh"),this.cache=[],e=!0;else{let r=JSON.parse(n);r&&r.entries&&(this.cache=r.entries,e=!0)}}catch(n){console.warn("[QueryHistoryManager] Corrupted history file, resetting:",n),this.cache=[],e=!0;try{await this.saveToStorage(),console.log("[QueryHistoryManager] Reset corrupted file to empty state")}catch(r){console.error("[QueryHistoryManager] Failed to reset file:",r)}}if(!e){let n=this.context.globalState.get(t.STORAGE_KEY);n&&n.entries&&(this.cache=n.entries,console.log(`\u2705 Migrated ${this.cache.length} entries from globalState`),await this.saveToStorage(),await this.context.globalState.update(t.STORAGE_KEY,void 0))}this.cache.length>t.ACTIVE_LIMIT+t.BATCH_ARCHIVE_SIZE&&(console.log(`[QueryHistoryManager] Cache (${this.cache.length}) exceeds active limit. Migrating to archive...`),await this.flushToArchive()),this.initialized=!0}catch(e){console.error("\u274C Error initializing query history:",e),this.cache=[],this.initialized=!0}}async saveToStorage(){if(!this.historyFilePath)return;let e=async()=>{try{let n={entries:this.cache,version:t.STORAGE_VERSION};await Ut.promises.writeFile(this.historyFilePath,JSON.stringify(n),"utf-8")}catch(n){console.error("Error saving to storage:",n)}};return this.writeQueue=this.writeQueue.then(e,e),this.writeQueue}async flushToArchive(){if(!this.archiveFilePath)return;let e=async()=>{try{if(this.cache.length-t.ACTIVE_LIMIT<=0)return;let r=this.cache.slice(t.ACTIVE_LIMIT);this.cache=this.cache.slice(0,t.ACTIVE_LIMIT),await this.saveToStorage();let i=[];if(Ut.existsSync(this.archiveFilePath))try{let o=await Ut.promises.readFile(this.archiveFilePath,"utf-8");if(o.trim()){let a=JSON.parse(o);i=Array.isArray(a)?a:a.entries||[]}}catch(o){console.warn("Error reading archive file, starting fresh archive append:",o)}let s=[...r,...i];await Ut.promises.writeFile(this.archiveFilePath,JSON.stringify({entries:s}),"utf-8"),console.log(`[QueryHistoryManager] Archived ${r.length} items. Active: ${this.cache.length}, Archive: ${s.length}`)}catch(n){console.error("Error flushing to archive:",n)}};return this.archiveQueue=this.archiveQueue.then(e,e),this.archiveQueue}async addEntry(e,n,r,i,s,o,a){try{this.initialized||await this.initialize();let l=`${Date.now()}-${Math.random().toString(36).substring(2,9)}`,c=Date.now(),u={id:l,host:e,database:n,schema:r,query:i.trim(),timestamp:c,connectionName:s,is_favorite:!1,tags:o||"",description:a||""};this.cache.unshift(u),this.cache.length>=t.ACTIVE_LIMIT+t.BATCH_ARCHIVE_SIZE?await this.flushToArchive():await this.saveToStorage()}catch(l){console.error("Error adding query to history:",l)}}async getHistory(e,n=0){return this.initialized||await this.initialize(),e!==void 0?this.cache.slice(n,n+e):[...this.cache]}async deleteEntry(e){try{this.initialized||await this.initialize();let n=this.cache.length;this.cache=this.cache.filter(r=>r.id!==e),this.cache.length!==n&&await this.saveToStorage()}catch(n){console.error("Error deleting entry:",n)}}async clearHistory(){try{this.initialized||await this.initialize(),this.cache=[],await this.saveToStorage(),this.archiveFilePath&&Ut.existsSync(this.archiveFilePath)&&await Ut.promises.unlink(this.archiveFilePath),console.log("All query history cleared")}catch(e){console.error("Error clearing history:",e)}}async getStats(){try{this.initialized||await this.initialize();let e=this.cache.length,n=JSON.stringify(this.cache),r=parseFloat((n.length/(1024*1024)).toFixed(2)),i=0,s=0;if(this.archiveFilePath&&Ut.existsSync(this.archiveFilePath)){let o=await Ut.promises.stat(this.archiveFilePath);s=parseFloat((o.size/(1024*1024)).toFixed(2));try{if(o.size<50*1024*1024){let a=await Ut.promises.readFile(this.archiveFilePath,"utf-8"),l=JSON.parse(a);l&&l.entries?i=l.entries.length:Array.isArray(l)&&(i=l.length)}else i=-1}catch(a){console.debug("[QueryHistoryManager] Error reading archive for stats:",a)}}return{activeEntries:e,archivedEntries:i===-1?99999:i,totalEntries:e+(i===-1?0:i),activeFileSizeMB:r,archiveFileSizeMB:s,totalFileSizeMB:parseFloat((r+s).toFixed(2))}}catch(e){return console.error("Error getting stats:",e),{activeEntries:0,archivedEntries:0,totalEntries:0,activeFileSizeMB:0,archiveFileSizeMB:0,totalFileSizeMB:0}}}async toggleFavorite(e){try{this.initialized||await this.initialize();let n=this.cache.find(r=>r.id===e);n&&(n.is_favorite=!n.is_favorite,await this.saveToStorage())}catch(n){console.error("Error toggling favorite:",n)}}async updateEntry(e,n,r){try{this.initialized||await this.initialize();let i=this.cache.find(s=>s.id===e);i&&(n!==void 0&&(i.tags=n),r!==void 0&&(i.description=r),await this.saveToStorage())}catch(i){console.error("Error updating entry:",i)}}async getFavorites(){return this.initialized||await this.initialize(),this.cache.filter(e=>e.is_favorite)}async getByTag(e){return this.initialized||await this.initialize(),this.cache.filter(n=>n.tags?.toLowerCase().includes(e.toLowerCase()))}async getAllTags(){this.initialized||await this.initialize();let e=new Set;return this.cache.forEach(n=>{n.tags&&n.tags.split(",").forEach(i=>{let s=i.trim();s&&e.add(s)})}),Array.from(e).sort()}async searchAll(e){this.initialized||await this.initialize();let n=e.toLowerCase();return this.cache.filter(i=>i.query.toLowerCase().includes(n)||i.host.toLowerCase().includes(n)||i.database&&i.database.toLowerCase().includes(n)||i.schema&&i.schema.toLowerCase().includes(n)||i.tags?.toLowerCase().includes(n)||i.description?.toLowerCase().includes(n))}async searchArchive(e,n=50){if(!this.archiveFilePath||!Ut.existsSync(this.archiveFilePath))return[];try{let r=await Ut.promises.readFile(this.archiveFilePath,"utf-8");if(!r)return[];let i=JSON.parse(r),s=Array.isArray(i)?i:i.entries||[],o=e.toLowerCase(),a=[];for(let l of s){if(a.length>=n)break;(l.query.toLowerCase().includes(o)||l.host.toLowerCase().includes(o)||l.database&&l.database.toLowerCase().includes(o))&&a.push(l)}return a}catch(r){return console.error("Error searching archive:",r),[]}}async getFilteredHistory(e,n,r,i){this.initialized||await this.initialize();let s=this.cache.filter(o=>!(e&&o.host!==e||n&&o.database!==n||r&&o.schema!==r));return i&&(s=s.slice(0,i)),s}async getArchivedHistory(){return[]}async clearArchive(){this.archiveFilePath&&Ut.existsSync(this.archiveFilePath)&&await Ut.promises.unlink(this.archiveFilePath)}close(){console.log("Query history manager closed")}}});function Xa(t){let e=new Set;if(!t)return e;for(let n of t.matchAll(/\$\{([A-Za-z_][A-Za-z0-9_]*)\}/g))n[1]&&e.add(n[1]);for(let n of t.matchAll(/\$([A-Za-z_][A-Za-z0-9_]*)(?!\s*\})/g)){let r=n[0],i=n.index;if(i>0&&t[i-1]==="{")continue;let s=i+r.length;s<t.length&&t[s]==="}"||n[1]&&e.add(n[1])}return e}function za(t){if(!t)return{sql:"",setValues:{}};let e=t.split(/\r?\n/),n=[],r={};for(let i of e){let s=i.match(/^\s*@SET\s+([A-Za-z0-9_]+)\s*=\s*(.+)$/i);if(s){let o=s[2].trim(),a=o.indexOf(";"),l="";a!==-1&&(l=o.substring(a+1).trim(),o=o.substring(0,a).trim()),o.endsWith(";")&&(o=o.slice(0,-1).trim());let c=o.match(/^'(.*)'$/s)||o.match(/^"(.*)"$/s);c&&(o=c[1]),r[s[1]]=o,l&&n.push(l)}else n.push(i)}return{sql:n.join(`
`),setValues:r}}function oE(t,e){let n=t.replace(/\$\{([A-Za-z_][A-Za-z0-9_]*)\}/g,(i,s)=>e[s]??""),r=Object.keys(e).sort((i,s)=>s.length-i.length);for(let i of r)if(/^[A-Za-z_]/.test(i)){let s=new RegExp(`\\$${i}(?![A-Za-z0-9_])`,"g");n=n.replace(s,e[i]??"")}return n}var RA=W(()=>{"use strict"});var w0={};pt(w0,{VariableInputPanel:()=>AA});var ja,AA,L0=W(()=>{"use strict";ja=Q(require("vscode")),AA=class t{constructor(e,n,r,i){this.extensionUri=n;this.variables=r;this.defaults=i;this._disposables=[];this._panel=e,this._panel.onDidDispose(()=>this.dispose(),null,this._disposables),this._panel.webview.html=this._getHtmlForWebview(this._panel.webview),this._panel.webview.onDidReceiveMessage(s=>{switch(s.command){case"submit":this._resolvePromise&&(this._resolvePromise(s.values),this._resolvePromise=void 0),this.dispose();return;case"cancel":this._resolvePromise&&(this._resolvePromise(void 0),this._resolvePromise=void 0),this.dispose();return}},null,this._disposables)}static async show(e,n,r){if(!r)throw new Error("extensionUri is required for VariableInputPanel");t.currentPanel&&t.currentPanel.dispose();let i=ja.window.createWebviewPanel("netezzaVariableInput","SQL Variables",ja.ViewColumn.One,{enableScripts:!0,retainContextWhenHidden:!1});return t.currentPanel=new t(i,r,e,n),new Promise(s=>{t.currentPanel._resolvePromise=s})}dispose(){for(t.currentPanel=void 0,this._panel.dispose();this._disposables.length;){let e=this._disposables.pop();e&&e.dispose()}}_getHtmlForWebview(e){let n=e.asWebviewUri(ja.Uri.joinPath(this.extensionUri,"netezza_icon64.png")),r=this.variables.map(i=>{let s=this.defaults?.[i]||"";return`
                <div class="form-group">
                    <label for="var_${i}">${i}</label>
                    <input 
                        type="text" 
                        id="var_${i}" 
                        name="${i}"
                        placeholder="Enter value for ${i}"
                        value="${this._escapeHtml(s)}"
                        autocomplete="off"
                    >
                </div>`}).join(`
`);return`<!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>SQL Variables</title>
            <style>
                :root {
                    --container-padding: 20px;
                    --input-padding-vertical: 6px;
                    --input-padding-horizontal: 8px;
                }
                body {
                    font-family: var(--vscode-font-family);
                    padding: 0;
                    margin: 0;
                    color: var(--vscode-foreground);
                    background-color: var(--vscode-editor-background);
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    min-height: 100vh;
                }
                
                .container {
                    width: 100%;
                    max-width: 600px;
                    padding: var(--container-padding);
                }

                .form-container {
                    background-color: var(--vscode-editorWidget-background);
                    border: 1px solid var(--vscode-widget-border);
                    padding: 30px;
                    border-radius: 4px;
                    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
                }
                
                h2 {
                    margin-top: 0;
                    margin-bottom: 25px;
                    font-size: 1.4em;
                    font-weight: 500;
                    padding-bottom: 10px;
                    border-bottom: 1px solid var(--vscode-panel-border);
                    display: flex;
                    align-items: center;
                    gap: 10px;
                }

                .logo-header {
                    width: 32px;
                    height: 32px;
                    margin-right: 10px;
                }

                .description {
                    margin-bottom: 20px;
                    color: var(--vscode-descriptionForeground);
                    font-size: 13px;
                }

                .form-group {
                    margin-bottom: 18px;
                }

                label {
                    display: block;
                    margin-bottom: 6px;
                    font-weight: 600;
                    font-size: 12px;
                    color: var(--vscode-input-placeholderForeground);
                }

                input {
                    width: 100%;
                    padding: 8px 10px;
                    box-sizing: border-box;
                    background: var(--vscode-input-background);
                    color: var(--vscode-input-foreground);
                    border: 1px solid var(--vscode-input-border);
                    border-radius: 2px;
                    font-family: inherit;
                    font-size: 13px;
                }
                
                input:focus {
                    border-color: var(--vscode-focusBorder);
                    outline: 1px solid var(--vscode-focusBorder);
                }
                
                .actions {
                    margin-top: 30px;
                    display: flex;
                    gap: 12px;
                    padding-top: 20px;
                    border-top: 1px solid var(--vscode-panel-border);
                }
                
                button {
                    background: var(--vscode-button-background);
                    color: var(--vscode-button-foreground);
                    padding: 8px 16px;
                    border: none;
                    cursor: pointer;
                    border-radius: 2px;
                    font-size: 13px;
                    font-weight: 500;
                    flex: 1;
                }
                
                button:hover {
                    background: var(--vscode-button-hoverBackground);
                }
                
                button.secondary {
                    background: var(--vscode-button-secondaryBackground);
                    color: var(--vscode-button-secondaryForeground);
                }
                
                button.secondary:hover {
                    background: var(--vscode-button-secondaryHoverBackground);
                }

                .error {
                    color: var(--vscode-errorForeground);
                    font-size: 12px;
                    margin-top: 5px;
                    display: none;
                }

                .error.visible {
                    display: block;
                }
            </style>
        </head>
        <body>
            <div class="container">
                <div class="form-container">
                    <h2>
                        <img src="${n}" class="logo-header" />
                        SQL Variables
                    </h2>
                    
                    <div class="description">
                        Enter values for the following SQL variables. All fields are required.
                    </div>

                    <form id="variableForm">
                        ${r}
                        
                        <div id="errorMessage" class="error">
                            Please fill in all required fields.
                        </div>
                        
                        <div class="actions">
                            <button type="submit" id="btnExecute">Execute</button>
                            <button type="button" class="secondary" id="btnCancel">Cancel</button>
                        </div>
                    </form>
                </div>
            </div>

            <script>
                const vscode = acquireVsCodeApi();
                const form = document.getElementById('variableForm');
                const errorMessage = document.getElementById('errorMessage');
                const btnCancel = document.getElementById('btnCancel');

                form.addEventListener('submit', (e) => {
                    e.preventDefault();
                    
                    const formData = new FormData(form);
                    const values = {};
                    let hasEmptyFields = false;

                    for (const [key, value] of formData.entries()) {
                        const trimmedValue = value.toString().trim();
                        if (trimmedValue === '') {
                            hasEmptyFields = true;
                            break;
                        }
                        values[key] = trimmedValue;
                    }

                    if (hasEmptyFields) {
                        errorMessage.classList.add('visible');
                        return;
                    }

                    errorMessage.classList.remove('visible');
                    vscode.postMessage({
                        command: 'submit',
                        values: values
                    });
                });

                btnCancel.addEventListener('click', () => {
                    vscode.postMessage({
                        command: 'cancel'
                    });
                });

                // Focus first input
                const firstInput = document.querySelector('input');
                if (firstInput) {
                    firstInput.focus();
                }

                // Clear error on input
                form.addEventListener('input', () => {
                    errorMessage.classList.remove('visible');
                });
            </script>
        </body>
        </html>`}_escapeHtml(e){let n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return e.replace(/[&<>"']/g,r=>n[r])}}});function nr(t){if(t.startsWith("file:///")){let e=t.match(/^file:\/\/\/([A-Z]):\//i);if(e)return`file:///${e[1].toLowerCase()}:${t.substring(10)}`}return t}async function gA(t){let e=nr(typeof t=="string"?t:t.toString()),n=En.get(e);if(console.log(`[cancelQueryByUri] Found state for ${e}: ${!!n}`),n){n.isCancelled=!0,Kn.window.showInformationMessage("Cancellation request sent.");try{console.log(`[cancelQueryByUri] Calling cmd.cancel() for ${e}`),await n.command.cancel(),console.log(`[cancelQueryByUri] cmd.cancel() completed for ${e}`)}catch(r){let i=r instanceof Error?r.message:String(r);console.error(`[cancelQueryByUri] Failed to cancel: ${i}`),Kn.window.showErrorMessage(`Failed to cancel query: ${i}`)}}else console.warn(`[cancelQueryByUri] No active command found for ${e}`),console.log(`[cancelQueryByUri] Active keys: ${Array.from(En.keys()).join(", ")}`)}async function IA(t,e,n,r){let i={};if(t.size===0)return i;if(e){let a=Array.from(t).filter(l=>!(n&&n[l]!==void 0));if(a.length>0)throw new Error("Query contains variables but silent mode is enabled; cannot prompt for values. Missing: "+a.join(", "));for(let l of t)i[l]=n[l];return i}let{VariableInputPanel:s}=(L0(),Wi(w0)),o=await s.show(Array.from(t),n,r);if(!o)throw new Error("Variable input cancelled by user");return o}function W8(t,e){let n;return!t&&!e&&(n=Kn.window.createOutputChannel("Netezza SQL"),n.show(!0)),{outputChannel:n,logCallback:e}}function Yi(t,e){t.outputChannel&&t.outputChannel.appendLine(e),t.logCallback&&t.logCallback(e)}async function k8(t,e,n){let r=za(t),i=r.sql,s=r.setValues,o=Xa(i);if(o.size>0){let a=new Set;for(let u of o)console.log(`[VariableDebug] Checking variable '${u}'. Value in defaults: '${s[u]}'`),s[u]===void 0&&a.add(u);let l={};a.size>0?(console.log(`[VariableDebug] Prompting for missing vars: ${Array.from(a).join(", ")}`),l=await IA(a,e,void 0,n)):console.log("[VariableDebug] All variables defined in defaults. Skipping prompt.");let c={...s,...l};i=oE(i,c)}return i}function P0(t,e,n){let r=e;if(!r&&n&&(r=t.getConnectionForExecution(n)),r||(r=t.getActiveConnectionName()||void 0),!r)throw new Error("No connection selected");return r}async function aE(t,e,n,r){if(n&&r)return{connection:await t.getDocumentPersistentConnection(r,e),shouldCloseConnection:!1};if(n)return{connection:await t.getPersistentConnection(e),shouldCloseConnection:!1};{let{createNzConnection:i}=(Qc(),Wi(Jc)),s=await t.getConnection(e);if(!s)throw new Error(`Connection '${e}' not found`);let o=i({host:s.host,port:s.port||5480,database:s.database,user:s.user,password:s.password});return await o.connect(),{connection:o,shouldCloseConnection:!0}}}async function D0(t,e,n){try{let r=e.getActiveConnectionName();if(r){let i=await e.getConnection(r);if(i){let{createNzConnection:s}=(Qc(),Wi(Jc)),o=s({host:i.host,port:i.port||5480,database:i.database,user:i.user,password:i.password});await o.connect();try{await(await o.createCommand(`DROP SESSION ${t}`).executeReader()).close(),Kn.window.showInformationMessage(`Session ${t} dropped successfully.`),n&&e.getDocumentKeepConnectionOpen(n)?(await e.closeDocumentPersistentConnection(n),await e.getDocumentPersistentConnection(n,r),console.log(`[executeDropSession] Re-established per-document persistent connection for ${n}`)):e.getKeepConnectionOpen()&&(await e.closePersistentConnection(r),await e.getPersistentConnection(r),console.log(`[executeDropSession] Re-established global persistent connection for ${r}`))}finally{await o.close()}}}}catch(r){let i=r instanceof Error?r.message:String(r);Kn.window.showErrorMessage(`Failed to drop session: ${i}`)}}async function mA(t,e,n,r,i){let s=Date.now(),o=5e3;try{let a=!1;do{for(;await t.read();){if(n){let l=En.get(nr(n));if(l&&l.isCancelled)break}if(Date.now()-s>o){a=!0;break}}if(a)break;if(Date.now()-s>o){a=!0;break}}while(await t.nextResult());if(a&&(console.warn(`consumeRestAndCancel timed out after ${o}ms, forcing cancel`),r&&i)){let l=`Cancellation is taking longer than expected. Do you want to force DROP SESSION ${r}?`,c=await Kn.window.showWarningMessage(l,`Drop Session ${r}`,"Keep Waiting");if(c===`Drop Session ${r}`)await D0(r,i,n);else if(c==="Keep Waiting"){let d=Date.now(),E=!1;try{do{for(;await t.read();){if(n){let f=En.get(nr(n));if(f&&f.isCancelled)break}if(Date.now()-d>15e3){E=!0;break}}if(E)break;if(Date.now()-d>15e3){E=!0;break}}while(await t.nextResult())}catch(f){console.warn("Error during extended consume:",f),E=!0}E&&(console.warn("Extended consume timed out after 15000ms, forcing DROP SESSION"),await D0(r,i,n))}}await e.cancel()}catch(a){console.warn("Failed to cancel command after limit reached:",a)}}async function Y8(t,e,n,r,i){let s=t.createCommand(e);s.commandTimeout=n,r&&En.set(nr(r),{command:s,isCancelled:!1,sessionId:i});try{let o=await s.executeReader(),a=[],l=[],c=2e5,u=0,d=!1;for(let E=0;E<o.fieldCount;E++)a.push({name:o.getName(E),type:o.getTypeName(E)});for(;await o.read();){if(r){let f=En.get(nr(r));if(f&&f.isCancelled)break}let E=[];for(let f=0;f<o.fieldCount;f++)E.push(o.getValue(f));if(l.push(E),u++,u>=c){d=!0;break}}return{columns:a,data:l,limitReached:d}}finally{r&&En.delete(nr(r))}}async function V8(t,e,n,r){let i="unknown",s=await e.getConnection(n);s&&new fn(t).addEntry(s.host,s.database,i,r,n).catch(a=>console.error("History log error:",a))}async function ue(t,e,n=!1,r,i,s,o,a){let l=r||new ki(t),c=s?l.getDocumentKeepConnectionOpen(s):l.getKeepConnectionOpen(),u=W8(n,o);Yi(u,"Executing query..."),i&&Yi(u,`Target Connection: ${i}`);try{let d=await k8(e,n,a||t.extensionUri),E=P0(l,i,s);Yi(u,`Using connection: ${E}`),Yi(u,"Connecting to database...");let{connection:f,shouldCloseConnection:p}=await aE(l,E,c,s);if(Yi(u,"Connected."),u.outputChannel){let T=S=>{let m=S;u.outputChannel.appendLine(`NOTICE: ${m.message}`)};f.on("notice",T)}let h;try{let S=await f.createCommand("SELECT CURRENT_SID").executeReader();await S.read()&&(h=String(S.getValue(0))),await S.close()}catch{}try{let S=Kn.workspace.getConfiguration("netezza").get("queryTimeout",1800);Yi(u,"Executing SQL on server...");let{columns:m,data:R,limitReached:A}=await Y8(f,d,S,s,h);return await V8(t,l,E,e),m.length>0?(Yi(u,"Query completed."),{columns:m,data:R,rowsAffected:void 0,limitReached:A,sql:d}):(Yi(u,"Query executed successfully (no results)."),{columns:[],data:[],rowsAffected:void 0,message:"Query executed successfully (no results).",sql:d})}finally{p&&f&&await f.close()}}catch(d){let f=`Error: ${d.message||String(d)}`;throw Yi(u,f),new Error(f)}}async function hn(t,e,n=!1,r,i,s){let o=await ue(t,e,n,i,r,s);if(o.data&&o.data.length>0){let a=o.data.map(c=>{let u={};return o.columns.forEach((d,E)=>{u[d.name]=c[E]}),u});return JSON.stringify(a,(c,u)=>typeof u=="bigint"?u>=Number.MIN_SAFE_INTEGER&&u<=Number.MAX_SAFE_INTEGER?Number(u):u.toString():u,2)}else if(o.message)return o.message}function Te(t){return!t.columns||!t.data||t.data.length===0?[]:t.data.map(e=>{let n={};return t.columns.forEach((r,i)=>{let s=e[i];typeof s=="bigint"&&(s>=Number.MIN_SAFE_INTEGER&&s<=Number.MAX_SAFE_INTEGER?s=Number(s):s=s.toString()),n[r.name]=s}),n})}async function x0(t,e,n,r,i){let s=r||new ki(t),o=i?s.getDocumentKeepConnectionOpen(i):s.getKeepConnectionOpen(),a=[],l=P0(s,n,i),{connection:c,shouldCloseConnection:u}=await aE(s,l,o,i);try{let d=E=>{let f=E;a.push(f.message)};c.on("notice",d);try{let f=Kn.workspace.getConfiguration("netezza").get("queryTimeout",1800),p=c.createCommand(e);p.commandTimeout=f,i&&En.set(i,{command:p,isCancelled:!1});try{let h=await p.executeReader();for(;await h.read();)if(i){let T=En.get(i);if(T&&T.isCancelled)break}}finally{i&&En.delete(i)}}finally{c.removeListener("notice",d)}}finally{u&&c&&await c.close()}return a.join(`
`)}async function Zc(t,e,n,r,i,s,o){let a=n||new ki(t),l=r?a.getDocumentKeepConnectionOpen(r):a.getKeepConnectionOpen(),c;i||(c=Kn.window.createOutputChannel("Netezza SQL"),c.show(!0),c.appendLine(`Executing ${e.length} queries sequentially...`));let u=[],d=n?n.getConnectionForExecution(r):void 0;if(d||(d=a.getActiveConnectionName()||void 0),!d)throw c&&c.appendLine("Error: No connection selected"),i&&i("Error: No connection selected"),new Error("No connection selected");try{let E=await a.getConnection(d);if(!E)throw new Error(`Connection '${d}' not found`);c&&c.appendLine(`Using connection: ${d}`),i&&i(`Using connection: ${d}`),c&&c.appendLine("Connecting to database..."),i&&i("Connecting to database...");let{connection:f,shouldCloseConnection:p}=await aE(a,d,l,r);f.on("notice",h=>{let T=h;c&&c.appendLine(`NOTICE: ${T.message}`),i&&i(`NOTICE: ${T.message}`)});try{let h="unknown",T;try{let L=await f.createCommand("SELECT CURRENT_SID").executeReader();if(await L.read()){let b=L.getValue(0);b!==void 0&&(T=String(b),i&&i(`Connected. Session ID: ${T}`))}await L.close()}catch(g){console.debug("Could not retrieve session ID:",g),i&&i("Connected.")}let S=new fn(t),m=d,R=new Set,A={};for(let g of e){let L=za(g);Object.assign(A,L.setValues),Xa(L.sql).forEach(P=>R.add(P))}let I=new Set;for(let g of R)A[g]===void 0&&I.add(g);let w={...A};if(I.size>0){let g=await IA(I,!1,void 0,o||t.extensionUri);Object.assign(w,g)}for(let g=0;g<e.length;g++){let L=e[g],b=`Executing query ${g+1}/${e.length}...`;c&&c.appendLine(b),i&&i(b);try{let P=za(L),v=oE(P.sql,w),$=Kn.workspace.getConfiguration("netezza").get("queryTimeout",1800),j=Date.now(),{results:J,error:Z}=await q8(f,v,2e5,$,r,T?String(T):void 0,a),M=Date.now()-j;if(i&&i(`Executed query ${g+1}/${e.length} in ${M}ms`),S.addEntry(E.host,E.database,h,L,m).catch(q=>{console.error("Failed to log query to history:",q)}),J&&J.length>0)for(let q of J)q.columns.length>0?u.push({columns:q.columns,data:q.rows,rowsAffected:void 0,limitReached:q.limitReached,sql:v}):u.push({columns:[],data:[],rowsAffected:void 0,message:"Query executed successfully",sql:v});if(s&&J&&J.length>0){let q=[];for(let K of J)K.columns.length>0?q.push({columns:K.columns,data:K.rows,rowsAffected:void 0,limitReached:K.limitReached,sql:v}):q.push({columns:[],data:[],rowsAffected:void 0,message:"Query executed successfully",sql:v});s(q)}if(Z)throw Z}catch(P){let v=P instanceof Error?P.message:String(P);throw c&&c.appendLine(`Error in query ${g+1}: ${v}`),new Error(v)}}c&&c.appendLine("All queries completed.")}finally{p&&await f.close()}}catch(E){let p=`Error: ${E.message||String(E)}`;throw c&&c.appendLine(p),i&&i(p),new Error(p)}return u}async function q8(t,e,n,r,i,s,o){let a=t.createCommand(e);if(r&&r>0&&(a.commandTimeout=r),i){let l=nr(i);console.log(`[executeWithStreaming] Registering command with key: ${l}`),En.set(l,{command:a,isCancelled:!1,sessionId:s})}try{let l=await a.executeReader(),c=[],u=!0,d;try{do{let E=[],f=[],p=0,h=!1;for(let T=0;T<l.fieldCount;T++)E.push({name:l.getName(T),type:l.getTypeName(T)});for(;await l.read();){if(i){let T=En.get(nr(i));if(T&&T.isCancelled)throw new Error("Query cancelled by user")}if(p<n){let T=[];for(let S=0;S<l.fieldCount;S++)T.push(l.getValue(S));f.push(T),p++}if(p>=n){h=!0,await mA(l,a,i,s,o);break}}c.push({columns:E,rows:f,limitReached:h}),u=await l.nextResult()}while(u)}catch(E){d=E instanceof Error?E:new Error(String(E))}return{results:c,error:d}}finally{i&&En.delete(nr(i))}}async function X8(t,e,n,r,i,s,o,a,l){let c=t.createCommand(e);if(i&&i>0&&(c.commandTimeout=i),s){let u=nr(s);console.log(`[executeAndFetchStreaming] Registering command with key: ${u}`),En.set(u,{command:c,isCancelled:!1,sessionId:a})}try{let u=await c.executeReader(),d,E=0,f=!1;try{let p=[],h=[],T=!0;for(let m=0;m<u.fieldCount;m++)p.push({name:u.getName(m),type:u.getTypeName(m)});let S=!1;for(;await u.read();){if(s){let R=En.get(nr(s));if(R&&R.isCancelled){S=!0,await mA(u,c,s,a,l);break}}let m=[];for(let R=0;R<u.fieldCount;R++)m.push(u.getValue(R));if(h.push(m),E++,h.length>=r&&(o({columns:T?p:[],rows:h,isFirstChunk:T,isLastChunk:!1,totalRowsSoFar:E,limitReached:!1}),h=[],T=!1,await new Promise(R=>setImmediate(R))),E>=n){f=!0,await mA(u,c,s,a,l);break}}if(S)return{totalRows:E,limitReached:f,error:new Error("Query cancelled")};if(s){let m=En.get(nr(s));if(m&&m.isCancelled)return{totalRows:E,limitReached:f,error:d||new Error("Query cancelled")}}o({columns:T?p:[],rows:h,isFirstChunk:T,isLastChunk:!0,totalRowsSoFar:E,limitReached:f})}catch(p){d=p instanceof Error?p:new Error(String(p))}return{totalRows:E,limitReached:f,error:d}}finally{s&&En.delete(nr(s))}}async function v0(t,e,n,r,i,s,o=5e3,a){let l=n||new ki(t),c=r?l.getDocumentKeepConnectionOpen(r):l.getKeepConnectionOpen(),u;i||(u=Kn.window.createOutputChannel("Netezza SQL"),u.show(!0),u.appendLine(`Executing ${e.length} queries with streaming...`));let d=n?n.getConnectionForExecution(r):void 0;if(d||(d=l.getActiveConnectionName()||void 0),!d){let E="Error: No connection selected";throw u&&u.appendLine(E),i&&i(E),new Error("No connection selected")}try{let E=await l.getConnection(d);if(!E)throw new Error(`Connection '${d}' not found`);let{connection:f,shouldCloseConnection:p}=await aE(l,d,c,r);f.on("notice",h=>{let T=h;u&&u.appendLine(`NOTICE: ${T.message}`),i&&i(`NOTICE: ${T.message}`)});try{let h;try{let g=await f.createCommand("SELECT CURRENT_SID").executeReader();await g.read()&&(h=String(g.getValue(0)),i&&i(`Connected. Session ID: ${h}`)),await g.close()}catch(w){console.debug("Could not retrieve session ID:",w),i&&i("Connected.")}let T=new fn(t),S="unknown",m=new Set,R={};for(let w of e){let g=za(w);Object.assign(R,g.setValues),Xa(g.sql).forEach(b=>m.add(b))}let A=new Set;for(let w of m)R[w]===void 0&&A.add(w);let I={...R};if(A.size>0){let w=await IA(A,!1,void 0,a||t.extensionUri);Object.assign(I,w)}for(let w=0;w<e.length;w++){let g=e[w],L=`Executing query ${w+1}/${e.length}...`;u&&u.appendLine(L),i&&i(L);try{let b=za(g),P=oE(b.sql,I),H=Kn.workspace.getConfiguration("netezza").get("queryTimeout",1800),$=Date.now(),{totalRows:j,limitReached:J,error:Z}=await X8(f,P,2e5,o,H,r,q=>{s&&s(w,q,P)},h,l),M=Date.now()-$;if(i&&i(`Query ${w+1}/${e.length}: ${j} rows in ${M}ms${J?" (limit reached)":""}`),T.addEntry(E.host,E.database,S,g,d).catch(q=>console.error("Failed to log query to history:",q)),Z)throw Z}catch(b){let P=b instanceof Error?b.message:String(b);throw u&&u.appendLine(`Error in query ${w+1}: ${P}`),new Error(P)}}u&&u.appendLine("All queries completed.")}finally{p&&await f.close()}}catch(E){let p=`Error: ${E.message||String(E)}`;throw u&&u.appendLine(p),i&&i(p),new Error(p)}}var Kn,En,pn=W(()=>{"use strict";Kn=Q(require("vscode"));TA();sE();RA();En=new Map});var B0={};pt(B0,{SqlParser:()=>Gn});var Gn,mo=W(()=>{"use strict";Gn=class{static splitStatements(e){let n=[],r="",i=!1,s=!1,o=!1,a=!1,l=0;for(;l<e.length;){let c=e[l],u=l+1<e.length?e[l+1]:"";if(o)c===`
`&&(o=!1);else if(a){if(c==="*"&&u==="/"){a=!1,r+=c+u,l++,l++;continue}}else if(i)c==="'"&&(i=!1);else if(s)c==='"'&&(s=!1);else if(c==="-"&&u==="-")o=!0;else if(c==="/"&&u==="*")a=!0;else if(c==="'")i=!0;else if(c==='"')s=!0;else if(c===";"){r.trim()&&n.push(r.trim()),r="",l++;continue}r+=c,l++}return r.trim()&&n.push(r.trim()),n}static getStatementAtPosition(e,n){let r=0,i=e.length,s=!1,o=!1,a=!1,l=!1,c=-1;for(let d=0;d<n;d++){let E=e[d],f=d+1<e.length?e[d+1]:"";a?E===`
`&&(a=!1):l?E==="*"&&f==="/"&&(l=!1,d++):s?E==="'"&&(s=!1):o?E==='"'&&(o=!1):E==="-"&&f==="-"?a=!0:E==="/"&&f==="*"?l=!0:E==="'"?s=!0:E==='"'?o=!0:E===";"&&(c=d)}r=c+1,s=!1,o=!1,a=!1,l=!1;for(let d=r;d<e.length;d++){let E=e[d],f=d+1<e.length?e[d+1]:"";if(a)E===`
`&&(a=!1);else if(l)E==="*"&&f==="/"&&(l=!1,d++);else if(s)E==="'"&&(s=!1);else if(o)E==='"'&&(o=!1);else if(E==="-"&&f==="-")a=!0;else if(E==="/"&&f==="*")l=!0;else if(E==="'")s=!0;else if(E==='"')o=!0;else if(E===";"){i=d;break}}let u=e.substring(r,i).trim();return u?{sql:u,start:r,end:i}:null}static getObjectAtPosition(e,n){let r=c=>/[a-zA-Z0-9_."]/i.test(c),i=n;for(;i>0&&r(e[i-1]);)i--;let s=n;for(;s<e.length&&r(e[s]);)s++;let o=e.substring(i,s);if(!o)return null;let a=c=>c?c.replace(/"/g,""):void 0;if(o.includes("..")){let c=o.split("..");if(c.length===2)return{database:a(c[0]),name:a(c[1])}}let l=o.split(".");return l.length===1?{name:a(l[0])}:l.length===2?{schema:a(l[0]),name:a(l[1])}:l.length===3?{database:a(l[0]),schema:a(l[1]),name:a(l[2])}:null}}});var J0={};pt(J0,{exportToCsv:()=>xA});async function xA(t,e,n,r,i,s){let o=null;try{if(s?.isCancellationRequested)throw new Error("Export cancelled by user");r&&r.report({message:"Connecting to database..."});let a={host:t.host,port:t.port||5480,database:t.database,user:t.user,password:t.password},l=yn();o=new l(a),await o.connect(),r&&r.report({message:"Executing query..."});let c=o.createCommand(e);i&&(c.commandTimeout=i);let u=await c.executeReader();r&&r.report({message:"Writing to CSV..."});let d=K0.createWriteStream(n,{encoding:"utf8",highWaterMark:64*1024}),E=[];for(let S=0;S<u.fieldCount;S++)E.push(u.getName(S));E.length>0&&d.write(E.map(j0).join(",")+`
`);let f=0,p=[],h=500,T=!1;try{for(;await u.read();){if(s?.isCancellationRequested){T=!0,r&&r.report({message:`Export cancelled - finalizing ${f} rows...`});break}f++;let S=[];for(let m=0;m<u.fieldCount;m++)S.push(j0(u.getValue(m)));if(p.push(S.join(",")),p.length>=h){let m=d.write(p.join(`
`)+`
`);if(p=[],m||await new Promise(R=>d.once("drain",R)),await new Promise(R=>setImmediate(R)),s?.isCancellationRequested){T=!0,r&&r.report({message:`Export cancelled - finalizing ${f} rows...`});break}r&&f%1e3===0&&r.report({message:`Processed ${f} rows...`})}}}catch(S){if(T=!0,r){let m=S instanceof Error?S.message:String(S);r.report({message:`Error after ${f} rows: ${m}`})}}if(p.length>0&&d.write(p.join(`
`)+`
`),d.end(),await new Promise((S,m)=>{d.on("finish",S),d.on("error",m)}),r){let S=T?" (cancelled - partial data saved)":"";r.report({message:`Completed: ${f} rows exported${S}`})}}finally{if(o)try{await o.close()}catch(a){console.error("Error closing connection:",a)}}}function j0(t){if(t==null)return"";let e="";return typeof t=="bigint"?t>=Number.MIN_SAFE_INTEGER&&t<=Number.MAX_SAFE_INTEGER?e=Number(t).toString():e=t.toString():t instanceof Date?e=t.toISOString():typeof t=="object"&&Buffer.isBuffer(t)?e=t.toString("hex"):typeof t=="object"?e=JSON.stringify(t):e=String(t),e.includes('"')||e.includes(",")||e.includes(`
`)||e.includes("\r")?`"${e.replace(/"/g,'""')}"`:e}var K0,vA=W(()=>{"use strict";K0=Q(require("fs"))});var Z0=O((gPe,Q0)=>{var SJ=typeof process=="object"&&process&&process.platform==="win32";Q0.exports=SJ?{sep:"\\"}:{sep:"/"}});var MA=O((IPe,rL)=>{"use strict";rL.exports=tL;function tL(t,e,n){t instanceof RegExp&&(t=eL(t,n)),e instanceof RegExp&&(e=eL(e,n));var r=nL(t,e,n);return r&&{start:r[0],end:r[1],pre:n.slice(0,r[0]),body:n.slice(r[0]+t.length,r[1]),post:n.slice(r[1]+e.length)}}function eL(t,e){var n=e.match(t);return n?n[0]:null}tL.range=nL;function nL(t,e,n){var r,i,s,o,a,l=n.indexOf(t),c=n.indexOf(e,l+1),u=l;if(l>=0&&c>0){if(t===e)return[l,c];for(r=[],s=n.length;u>=0&&!a;)u==l?(r.push(u),l=n.indexOf(t,u+1)):r.length==1?a=[r.pop(),c]:(i=r.pop(),i<s&&(s=i,o=c),c=n.indexOf(e,u+1)),u=l<c&&l>=0?l:c;r.length&&(a=[s,o])}return a}});var dL=O((_Pe,uL)=>{var iL=MA();uL.exports=mJ;var sL="\0SLASH"+Math.random()+"\0",oL="\0OPEN"+Math.random()+"\0",BA="\0CLOSE"+Math.random()+"\0",aL="\0COMMA"+Math.random()+"\0",lL="\0PERIOD"+Math.random()+"\0";function UA(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function RJ(t){return t.split("\\\\").join(sL).split("\\{").join(oL).split("\\}").join(BA).split("\\,").join(aL).split("\\.").join(lL)}function AJ(t){return t.split(sL).join("\\").split(oL).join("{").split(BA).join("}").split(aL).join(",").split(lL).join(".")}function cL(t){if(!t)return[""];var e=[],n=iL("{","}",t);if(!n)return t.split(",");var r=n.pre,i=n.body,s=n.post,o=r.split(",");o[o.length-1]+="{"+i+"}";var a=cL(s);return s.length&&(o[o.length-1]+=a.shift(),o.push.apply(o,a)),e.push.apply(e,o),e}function mJ(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),du(RJ(t),!0).map(AJ)):[]}function gJ(t){return"{"+t+"}"}function IJ(t){return/^-?0\d/.test(t)}function _J(t,e){return t<=e}function NJ(t,e){return t>=e}function du(t,e){var n=[],r=iL("{","}",t);if(!r)return[t];var i=r.pre,s=r.post.length?du(r.post,!1):[""];if(/\$$/.test(r.pre))for(var o=0;o<s.length;o++){var a=i+"{"+r.body+"}"+s[o];n.push(a)}else{var l=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(r.body),c=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(r.body),u=l||c,d=r.body.indexOf(",")>=0;if(!u&&!d)return r.post.match(/,(?!,).*\}/)?(t=r.pre+"{"+r.body+BA+r.post,du(t)):[t];var E;if(u)E=r.body.split(/\.\./);else if(E=cL(r.body),E.length===1&&(E=du(E[0],!1).map(gJ),E.length===1))return s.map(function(P){return r.pre+E[0]+P});var f;if(u){var p=UA(E[0]),h=UA(E[1]),T=Math.max(E[0].length,E[1].length),S=E.length==3?Math.abs(UA(E[2])):1,m=_J,R=h<p;R&&(S*=-1,m=NJ);var A=E.some(IJ);f=[];for(var I=p;m(I,h);I+=S){var w;if(c)w=String.fromCharCode(I),w==="\\"&&(w="");else if(w=String(I),A){var g=T-w.length;if(g>0){var L=new Array(g+1).join("0");I<0?w="-"+L+w.slice(1):w=L+w}}f.push(w)}}else{f=[];for(var b=0;b<E.length;b++)f.push.apply(f,du(E[b],!1))}for(var b=0;b<f.length;b++)for(var o=0;o<s.length;o++){var a=i+f[b]+s[o];(!e||u||a)&&n.push(a)}}return n}});var SL=O((OPe,WA)=>{var sr=WA.exports=(t,e,n={})=>(LE(e),!n.nocomment&&e.charAt(0)==="#"?!1:new Qa(e,n).match(t));WA.exports=sr;var GA=Z0();sr.sep=GA.sep;var Ur=Symbol("globstar **");sr.GLOBSTAR=Ur;var OJ=dL(),fL={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},$A="[^/]",FA=$A+"*?",CJ="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",bJ="(?:(?!(?:\\/|^)\\.).)*?",pL=t=>t.split("").reduce((e,n)=>(e[n]=!0,e),{}),EL=pL("().*{}+?[]^$\\!"),yJ=pL("[.("),hL=/\/+/;sr.filter=(t,e={})=>(n,r,i)=>sr(n,t,e);var vs=(t,e={})=>{let n={};return Object.keys(t).forEach(r=>n[r]=t[r]),Object.keys(e).forEach(r=>n[r]=e[r]),n};sr.defaults=t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return sr;let e=sr,n=(r,i,s)=>e(r,i,vs(t,s));return n.Minimatch=class extends e.Minimatch{constructor(i,s){super(i,vs(t,s))}},n.Minimatch.defaults=r=>e.defaults(vs(t,r)).Minimatch,n.filter=(r,i)=>e.filter(r,vs(t,i)),n.defaults=r=>e.defaults(vs(t,r)),n.makeRe=(r,i)=>e.makeRe(r,vs(t,i)),n.braceExpand=(r,i)=>e.braceExpand(r,vs(t,i)),n.match=(r,i,s)=>e.match(r,i,vs(t,s)),n};sr.braceExpand=(t,e)=>TL(t,e);var TL=(t,e={})=>(LE(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:OJ(t)),wJ=1024*64,LE=t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>wJ)throw new TypeError("pattern is too long")},HA=Symbol("subparse");sr.makeRe=(t,e)=>new Qa(t,e||{}).makeRe();sr.match=(t,e,n={})=>{let r=new Qa(e,n);return t=t.filter(i=>r.match(i)),r.options.nonull&&!t.length&&t.push(e),t};var LJ=t=>t.replace(/\\(.)/g,"$1"),DJ=t=>t.replace(/\\([^-\]])/g,"$1"),PJ=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),xJ=t=>t.replace(/[[\]\\]/g,"\\$&"),Qa=class{constructor(e,n){LE(e),n||(n={}),this.options=n,this.set=[],this.pattern=e,this.windowsPathsNoEscape=!!n.windowsPathsNoEscape||n.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!n.partial,this.make()}debug(){}make(){let e=this.pattern,n=this.options;if(!n.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate();let r=this.globSet=this.braceExpand();n.debug&&(this.debug=(...i)=>console.error(...i)),this.debug(this.pattern,r),r=this.globParts=r.map(i=>i.split(hL)),this.debug(this.pattern,r),r=r.map((i,s,o)=>i.map(this.parse,this)),this.debug(this.pattern,r),r=r.filter(i=>i.indexOf(!1)===-1),this.debug(this.pattern,r),this.set=r}parseNegate(){if(this.options.nonegate)return;let e=this.pattern,n=!1,r=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)n=!n,r++;r&&(this.pattern=e.slice(r)),this.negate=n}matchOne(e,n,r){var i=this.options;this.debug("matchOne",{this:this,file:e,pattern:n}),this.debug("matchOne",e.length,n.length);for(var s=0,o=0,a=e.length,l=n.length;s<a&&o<l;s++,o++){this.debug("matchOne loop");var c=n[o],u=e[s];if(this.debug(n,c,u),c===!1)return!1;if(c===Ur){this.debug("GLOBSTAR",[n,c,u]);var d=s,E=o+1;if(E===l){for(this.debug("** at the end");s<a;s++)if(e[s]==="."||e[s]===".."||!i.dot&&e[s].charAt(0)===".")return!1;return!0}for(;d<a;){var f=e[d];if(this.debug(`
globstar while`,e,d,n,E,f),this.matchOne(e.slice(d),n.slice(E),r))return this.debug("globstar found match!",d,a,f),!0;if(f==="."||f===".."||!i.dot&&f.charAt(0)==="."){this.debug("dot detected!",e,d,n,E);break}this.debug("globstar swallow a segment, and continue"),d++}return!!(r&&(this.debug(`
>>> no match, partial?`,e,d,n,E),d===a))}var p;if(typeof c=="string"?(p=u===c,this.debug("string match",c,u,p)):(p=u.match(c),this.debug("pattern match",c,u,p)),!p)return!1}if(s===a&&o===l)return!0;if(s===a)return r;if(o===l)return s===a-1&&e[s]==="";throw new Error("wtf?")}braceExpand(){return TL(this.pattern,this.options)}parse(e,n){LE(e);let r=this.options;if(e==="**")if(r.noglobstar)e="*";else return Ur;if(e==="")return"";let i="",s=!1,o=!1,a=[],l=[],c,u=!1,d=-1,E=-1,f,p,h,T=e.charAt(0)===".",S=r.dot||T,m=()=>T?"":S?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",R=g=>g.charAt(0)==="."?"":r.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",A=()=>{if(c){switch(c){case"*":i+=FA,s=!0;break;case"?":i+=$A,s=!0;break;default:i+="\\"+c;break}this.debug("clearStateChar %j %j",c,i),c=!1}};for(let g=0,L;g<e.length&&(L=e.charAt(g));g++){if(this.debug("%s	%s %s %j",e,g,i,L),o){if(L==="/")return!1;EL[L]&&(i+="\\"),i+=L,o=!1;continue}switch(L){case"/":return!1;case"\\":if(u&&e.charAt(g+1)==="-"){i+=L;continue}A(),o=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",e,g,i,L),u){this.debug("  in class"),L==="!"&&g===E+1&&(L="^"),i+=L;continue}this.debug("call clearStateChar %j",c),A(),c=L,r.noext&&A();continue;case"(":{if(u){i+="(";continue}if(!c){i+="\\(";continue}let b={type:c,start:g-1,reStart:i.length,open:fL[c].open,close:fL[c].close};this.debug(this.pattern,"	",b),a.push(b),i+=b.open,b.start===0&&b.type!=="!"&&(T=!0,i+=R(e.slice(g+1))),this.debug("plType %j %j",c,i),c=!1;continue}case")":{let b=a[a.length-1];if(u||!b){i+="\\)";continue}a.pop(),A(),s=!0,p=b,i+=p.close,p.type==="!"&&l.push(Object.assign(p,{reEnd:i.length}));continue}case"|":{let b=a[a.length-1];if(u||!b){i+="\\|";continue}A(),i+="|",b.start===0&&b.type!=="!"&&(T=!0,i+=R(e.slice(g+1)));continue}case"[":if(A(),u){i+="\\"+L;continue}u=!0,E=g,d=i.length,i+=L;continue;case"]":if(g===E+1||!u){i+="\\"+L;continue}f=e.substring(E+1,g);try{RegExp("["+xJ(DJ(f))+"]"),i+=L}catch{i=i.substring(0,d)+"(?:$.)"}s=!0,u=!1;continue;default:A(),EL[L]&&!(L==="^"&&u)&&(i+="\\"),i+=L;break}}for(u&&(f=e.slice(E+1),h=this.parse(f,HA),i=i.substring(0,d)+"\\["+h[0],s=s||h[1]),p=a.pop();p;p=a.pop()){let g;g=i.slice(p.reStart+p.open.length),this.debug("setting tail",i,p),g=g.replace(/((?:\\{2}){0,64})(\\?)\|/g,(b,P,v)=>(v||(v="\\"),P+P+v+"|")),this.debug(`tail=%j
   %s`,g,g,p,i);let L=p.type==="*"?FA:p.type==="?"?$A:"\\"+p.type;s=!0,i=i.slice(0,p.reStart)+L+"\\("+g}A(),o&&(i+="\\\\");let I=yJ[i.charAt(0)];for(let g=l.length-1;g>-1;g--){let L=l[g],b=i.slice(0,L.reStart),P=i.slice(L.reStart,L.reEnd-8),v=i.slice(L.reEnd),H=i.slice(L.reEnd-8,L.reEnd)+v,$=b.split(")").length,j=b.split("(").length-$,J=v;for(let M=0;M<j;M++)J=J.replace(/\)[+*?]?/,"");v=J;let Z=v===""&&n!==HA?"(?:$|\\/)":"";i=b+P+v+Z+H}if(i!==""&&s&&(i="(?=.)"+i),I&&(i=m()+i),n===HA)return[i,s];if(r.nocase&&!s&&(s=e.toUpperCase()!==e.toLowerCase()),!s)return LJ(e);let w=r.nocase?"i":"";try{return Object.assign(new RegExp("^"+i+"$",w),{_glob:e,_src:i})}catch{return new RegExp("$.")}}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let n=this.options,r=n.noglobstar?FA:n.dot?CJ:bJ,i=n.nocase?"i":"",s=e.map(o=>(o=o.map(a=>typeof a=="string"?PJ(a):a===Ur?Ur:a._src).reduce((a,l)=>(a[a.length-1]===Ur&&l===Ur||a.push(l),a),[]),o.forEach((a,l)=>{a!==Ur||o[l-1]===Ur||(l===0?o.length>1?o[l+1]="(?:\\/|"+r+"\\/)?"+o[l+1]:o[l]=r:l===o.length-1?o[l-1]+="(?:\\/|"+r+")?":(o[l-1]+="(?:\\/|\\/"+r+"\\/)"+o[l+1],o[l+1]=Ur))}),o.filter(a=>a!==Ur).join("/"))).join("|");s="^(?:"+s+")$",this.negate&&(s="^(?!"+s+").*$");try{this.regexp=new RegExp(s,i)}catch{this.regexp=!1}return this.regexp}match(e,n=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&n)return!0;let r=this.options;GA.sep!=="/"&&(e=e.split(GA.sep).join("/")),e=e.split(hL),this.debug(this.pattern,"split",e);let i=this.set;this.debug(this.pattern,"set",i);let s;for(let o=e.length-1;o>=0&&(s=e[o],!s);o--);for(let o=0;o<i.length;o++){let a=i[o],l=e;if(r.matchBase&&a.length===1&&(l=[s]),this.matchOne(l,a,n))return r.flipNegate?!0:!this.negate}return r.flipNegate?!1:this.negate}static defaults(e){return sr.defaults(e).Minimatch}};sr.Minimatch=Qa});var IL=O((CPe,gL)=>{gL.exports=mL;var YA=require("fs"),{EventEmitter:vJ}=require("events"),{Minimatch:kA}=SL(),{resolve:MJ}=require("path");function UJ(t,e){return new Promise((n,r)=>{YA.readdir(t,{withFileTypes:!0},(i,s)=>{if(i)switch(i.code){case"ENOTDIR":e?r(i):n([]);break;case"ENOTSUP":case"ENOENT":case"ENAMETOOLONG":case"UNKNOWN":n([]);break;case"ELOOP":default:r(i);break}else n(s)})})}function RL(t,e){return new Promise((n,r)=>{(e?YA.stat:YA.lstat)(t,(s,o)=>{if(s)switch(s.code){case"ENOENT":n(e?RL(t,!1):null);break;default:n(null);break}else n(o)})})}async function*AL(t,e,n,r,i,s){let o=await UJ(e+t,s);for(let a of o){let l=a.name;l===void 0&&(l=a,r=!0);let c=t+"/"+l,u=c.slice(1),d=e+"/"+u,E=null;(r||n)&&(E=await RL(d,n)),!E&&a.name!==void 0&&(E=a),E===null&&(E={isDirectory:()=>!1}),E.isDirectory()?i(u)||(yield{relative:u,absolute:d,stats:E},yield*AL(c,e,n,r,i,!1)):yield{relative:u,absolute:d,stats:E}}}async function*BJ(t,e,n,r){yield*AL("",t,e,n,r,!0)}function FJ(t){return{pattern:t.pattern,dot:!!t.dot,noglobstar:!!t.noglobstar,matchBase:!!t.matchBase,nocase:!!t.nocase,ignore:t.ignore,skip:t.skip,follow:!!t.follow,stat:!!t.stat,nodir:!!t.nodir,mark:!!t.mark,silent:!!t.silent,absolute:!!t.absolute}}var DE=class extends vJ{constructor(e,n,r){if(super(),typeof n=="function"&&(r=n,n=null),this.options=FJ(n||{}),this.matchers=[],this.options.pattern){let i=Array.isArray(this.options.pattern)?this.options.pattern:[this.options.pattern];this.matchers=i.map(s=>new kA(s,{dot:this.options.dot,noglobstar:this.options.noglobstar,matchBase:this.options.matchBase,nocase:this.options.nocase}))}if(this.ignoreMatchers=[],this.options.ignore){let i=Array.isArray(this.options.ignore)?this.options.ignore:[this.options.ignore];this.ignoreMatchers=i.map(s=>new kA(s,{dot:!0}))}if(this.skipMatchers=[],this.options.skip){let i=Array.isArray(this.options.skip)?this.options.skip:[this.options.skip];this.skipMatchers=i.map(s=>new kA(s,{dot:!0}))}this.iterator=BJ(MJ(e||"."),this.options.follow,this.options.stat,this._shouldSkipDirectory.bind(this)),this.paused=!1,this.inactive=!1,this.aborted=!1,r&&(this._matches=[],this.on("match",i=>this._matches.push(this.options.absolute?i.absolute:i.relative)),this.on("error",i=>r(i)),this.on("end",()=>r(null,this._matches))),setTimeout(()=>this._next(),0)}_shouldSkipDirectory(e){return this.skipMatchers.some(n=>n.match(e))}_fileMatches(e,n){let r=e+(n?"/":"");return(this.matchers.length===0||this.matchers.some(i=>i.match(r)))&&!this.ignoreMatchers.some(i=>i.match(r))&&(!this.options.nodir||!n)}_next(){!this.paused&&!this.aborted?this.iterator.next().then(e=>{if(e.done)this.emit("end");else{let n=e.value.stats.isDirectory();if(this._fileMatches(e.value.relative,n)){let r=e.value.relative,i=e.value.absolute;this.options.mark&&n&&(r+="/",i+="/"),this.options.stat?this.emit("match",{relative:r,absolute:i,stat:e.value.stats}):this.emit("match",{relative:r,absolute:i})}this._next(this.iterator)}}).catch(e=>{this.abort(),this.emit("error",e),!e.code&&!this.options.silent&&console.error(e)}):this.inactive=!0}abort(){this.aborted=!0}pause(){this.paused=!0}resume(){this.paused=!1,this.inactive&&(this.inactive=!1,this._next())}};function mL(t,e,n){return new DE(t,e,n)}mL.ReaddirGlob=DE});var NL=O((PE,_L)=>{(function(t,e){typeof PE=="object"&&typeof _L<"u"?e(PE):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e(t.async={}))})(PE,(function(t){"use strict";function e(C,...N){return(...y)=>C(...N,...y)}function n(C){return function(...N){var y=N.pop();return C.call(this,N,y)}}var r=typeof queueMicrotask=="function"&&queueMicrotask,i=typeof setImmediate=="function"&&setImmediate,s=typeof process=="object"&&typeof process.nextTick=="function";function o(C){setTimeout(C,0)}function a(C){return(N,...y)=>C(()=>N(...y))}var l;r?l=queueMicrotask:i?l=setImmediate:s?l=process.nextTick:l=o;var c=a(l);function u(C){return f(C)?function(...N){let y=N.pop(),D=C.apply(this,N);return d(D,y)}:n(function(N,y){var D;try{D=C.apply(this,N)}catch(U){return y(U)}if(D&&typeof D.then=="function")return d(D,y);y(null,D)})}function d(C,N){return C.then(y=>{E(N,null,y)},y=>{E(N,y&&(y instanceof Error||y.message)?y:new Error(y))})}function E(C,N,y){try{C(N,y)}catch(D){c(U=>{throw U},D)}}function f(C){return C[Symbol.toStringTag]==="AsyncFunction"}function p(C){return C[Symbol.toStringTag]==="AsyncGenerator"}function h(C){return typeof C[Symbol.asyncIterator]=="function"}function T(C){if(typeof C!="function")throw new Error("expected a function");return f(C)?u(C):C}function S(C,N){if(N||(N=C.length),!N)throw new Error("arity is undefined");function y(...D){return typeof D[N-1]=="function"?C.apply(this,D):new Promise((U,F)=>{D[N-1]=(G,...k)=>{if(G)return F(G);U(k.length>1?k:k[0])},C.apply(this,D)})}return y}function m(C){return function(y,...D){return S(function(F){var G=this;return C(y,(k,z)=>{T(k).apply(G,D.concat(z))},F)})}}function R(C,N,y,D){N=N||[];var U=[],F=0,G=T(y);return C(N,(k,z,se)=>{var $e=F++;G(k,(Ve,We)=>{U[$e]=We,se(Ve)})},k=>{D(k,U)})}function A(C){return C&&typeof C.length=="number"&&C.length>=0&&C.length%1===0}let I={};function w(C){function N(...y){if(C!==null){var D=C;C=null,D.apply(this,y)}}return Object.assign(N,C),N}function g(C){return C[Symbol.iterator]&&C[Symbol.iterator]()}function L(C){var N=-1,y=C.length;return function(){return++N<y?{value:C[N],key:N}:null}}function b(C){var N=-1;return function(){var D=C.next();return D.done?null:(N++,{value:D.value,key:N})}}function P(C){var N=C?Object.keys(C):[],y=-1,D=N.length;return function U(){var F=N[++y];return F==="__proto__"?U():y<D?{value:C[F],key:F}:null}}function v(C){if(A(C))return L(C);var N=g(C);return N?b(N):P(C)}function H(C){return function(...N){if(C===null)throw new Error("Callback was already called.");var y=C;C=null,y.apply(this,N)}}function $(C,N,y,D){let U=!1,F=!1,G=!1,k=0,z=0;function se(){k>=N||G||U||(G=!0,C.next().then(({value:We,done:Tr})=>{if(!(F||U)){if(G=!1,Tr){U=!0,k<=0&&D(null);return}k++,y(We,z,$e),z++,se()}}).catch(Ve))}function $e(We,Tr){if(k-=1,!F){if(We)return Ve(We);if(We===!1){U=!0,F=!0;return}if(Tr===I||U&&k<=0)return U=!0,D(null);se()}}function Ve(We){F||(G=!1,U=!0,D(We))}se()}var j=C=>(N,y,D)=>{if(D=w(D),C<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!N)return D(null);if(p(N))return $(N,C,y,D);if(h(N))return $(N[Symbol.asyncIterator](),C,y,D);var U=v(N),F=!1,G=!1,k=0,z=!1;function se(Ve,We){if(!G)if(k-=1,Ve)F=!0,D(Ve);else if(Ve===!1)F=!0,G=!0;else{if(We===I||F&&k<=0)return F=!0,D(null);z||$e()}}function $e(){for(z=!0;k<C&&!F;){var Ve=U();if(Ve===null){F=!0,k<=0&&D(null);return}k+=1,y(Ve.value,Ve.key,H(se))}z=!1}$e()};function J(C,N,y,D){return j(N)(C,T(y),D)}var Z=S(J,4);function M(C,N,y){y=w(y);var D=0,U=0,{length:F}=C,G=!1;F===0&&y(null);function k(z,se){z===!1&&(G=!0),G!==!0&&(z?y(z):(++U===F||se===I)&&y(null))}for(;D<F;D++)N(C[D],D,H(k))}function q(C,N,y){return Z(C,1/0,N,y)}function K(C,N,y){var D=A(C)?M:q;return D(C,T(N),y)}var Ke=S(K,3);function bn(C,N,y){return R(Ke,C,N,y)}var zn=S(bn,3),tr=m(zn);function XR(C,N,y){return Z(C,1,N,y)}var pr=S(XR,3);function yf(C,N,y){return R(pr,C,N,y)}var Gi=S(yf,3),Gc=m(Gi);let vr=Symbol("promiseCallback");function ti(){let C,N;function y(D,...U){if(D)return N(D);C(U.length>1?U:U[0])}return y[vr]=new Promise((D,U)=>{C=D,N=U}),y}function $c(C,N,y){typeof N!="number"&&(y=N,N=null),y=w(y||ti());var D=Object.keys(C).length;if(!D)return y(null);N||(N=D);var U={},F=0,G=!1,k=!1,z=Object.create(null),se=[],$e=[],Ve={};Object.keys(C).forEach(ie=>{var ce=C[ie];if(!Array.isArray(ce)){We(ie,[ce]),$e.push(ie);return}var ke=ce.slice(0,ce.length-1),ut=ke.length;if(ut===0){We(ie,ce),$e.push(ie);return}Ve[ie]=ut,ke.forEach(Qt=>{if(!C[Qt])throw new Error("async.auto task `"+ie+"` has a non-existent dependency `"+Qt+"` in "+ke.join(", "));$a(Qt,()=>{ut--,ut===0&&We(ie,ce)})})}),qe(),Tr();function We(ie,ce){se.push(()=>Xc(ie,ce))}function Tr(){if(!G){if(se.length===0&&F===0)return y(null,U);for(;se.length&&F<N;){var ie=se.shift();ie()}}}function $a(ie,ce){var ke=z[ie];ke||(ke=z[ie]=[]),ke.push(ce)}function So(ie){var ce=z[ie]||[];ce.forEach(ke=>ke()),Tr()}function Xc(ie,ce){if(!k){var ke=H((Qt,...Sr)=>{if(F--,Qt===!1){G=!0;return}if(Sr.length<2&&([Sr]=Sr),Qt){var Wa={};if(Object.keys(U).forEach(Ro=>{Wa[Ro]=U[Ro]}),Wa[ie]=Sr,k=!0,z=Object.create(null),G)return;y(Qt,Wa)}else U[ie]=Sr,So(ie)});F++;var ut=T(ce[ce.length-1]);ce.length>1?ut(U,ke):ut(ke)}}function qe(){for(var ie,ce=0;$e.length;)ie=$e.pop(),ce++,le(ie).forEach(ke=>{--Ve[ke]===0&&$e.push(ke)});if(ce!==D)throw new Error("async.auto cannot execute tasks due to a recursive dependency")}function le(ie){var ce=[];return Object.keys(C).forEach(ke=>{let ut=C[ke];Array.isArray(ut)&&ut.indexOf(ie)>=0&&ce.push(ke)}),ce}return y[vr]}var p4=/^(?:async\s)?(?:function)?\s*(?:\w+\s*)?\(([^)]+)\)(?:\s*{)/,T4=/^(?:async\s)?\s*(?:\(\s*)?((?:[^)=\s]\s*)*)(?:\)\s*)?=>/,S4=/,/,R4=/(=.+)?(\s*)$/;function A4(C){let N="",y=0,D=C.indexOf("*/");for(;y<C.length;)if(C[y]==="/"&&C[y+1]==="/"){let U=C.indexOf(`
`,y);y=U===-1?C.length:U}else if(D!==-1&&C[y]==="/"&&C[y+1]==="*"){let U=C.indexOf("*/",y);U!==-1?(y=U+2,D=C.indexOf("*/",y)):(N+=C[y],y++)}else N+=C[y],y++;return N}function m4(C){let N=A4(C.toString()),y=N.match(p4);if(y||(y=N.match(T4)),!y)throw new Error(`could not parse args in autoInject
Source:
`+N);let[,D]=y;return D.replace(/\s/g,"").split(S4).map(U=>U.replace(R4,"").trim())}function ow(C,N){var y={};return Object.keys(C).forEach(D=>{var U=C[D],F,G=f(U),k=!G&&U.length===1||G&&U.length===0;if(Array.isArray(U))F=[...U],U=F.pop(),y[D]=F.concat(F.length>0?z:U);else if(k)y[D]=U;else{if(F=m4(U),U.length===0&&!G&&F.length===0)throw new Error("autoInject task functions require explicit parameters.");G||F.pop(),y[D]=F.concat(z)}function z(se,$e){var Ve=F.map(We=>se[We]);Ve.push($e),T(U)(...Ve)}}),$c(y,N)}class g4{constructor(){this.head=this.tail=null,this.length=0}removeLink(N){return N.prev?N.prev.next=N.next:this.head=N.next,N.next?N.next.prev=N.prev:this.tail=N.prev,N.prev=N.next=null,this.length-=1,N}empty(){for(;this.head;)this.shift();return this}insertAfter(N,y){y.prev=N,y.next=N.next,N.next?N.next.prev=y:this.tail=y,N.next=y,this.length+=1}insertBefore(N,y){y.prev=N.prev,y.next=N,N.prev?N.prev.next=y:this.head=y,N.prev=y,this.length+=1}unshift(N){this.head?this.insertBefore(this.head,N):aw(this,N)}push(N){this.tail?this.insertAfter(this.tail,N):aw(this,N)}shift(){return this.head&&this.removeLink(this.head)}pop(){return this.tail&&this.removeLink(this.tail)}toArray(){return[...this]}*[Symbol.iterator](){for(var N=this.head;N;)yield N.data,N=N.next}remove(N){for(var y=this.head;y;){var{next:D}=y;N(y)&&this.removeLink(y),y=D}return this}}function aw(C,N){C.length=1,C.head=C.tail=N}function zR(C,N,y){if(N==null)N=1;else if(N===0)throw new RangeError("Concurrency must not be zero");var D=T(C),U=0,F=[];let G={error:[],drain:[],saturated:[],unsaturated:[],empty:[]};function k(le,ie){G[le].push(ie)}function z(le,ie){let ce=(...ke)=>{se(le,ce),ie(...ke)};G[le].push(ce)}function se(le,ie){if(!le)return Object.keys(G).forEach(ce=>G[ce]=[]);if(!ie)return G[le]=[];G[le]=G[le].filter(ce=>ce!==ie)}function $e(le,...ie){G[le].forEach(ce=>ce(...ie))}var Ve=!1;function We(le,ie,ce,ke){if(ke!=null&&typeof ke!="function")throw new Error("task callback must be a function");qe.started=!0;var ut,Qt;function Sr(Ro,...zc){if(Ro)return ce?Qt(Ro):ut();if(zc.length<=1)return ut(zc[0]);ut(zc)}var Wa=qe._createTaskItem(le,ce?Sr:ke||Sr);if(ie?qe._tasks.unshift(Wa):qe._tasks.push(Wa),Ve||(Ve=!0,c(()=>{Ve=!1,qe.process()})),ce||!ke)return new Promise((Ro,zc)=>{ut=Ro,Qt=zc})}function Tr(le){return function(ie,...ce){U-=1;for(var ke=0,ut=le.length;ke<ut;ke++){var Qt=le[ke],Sr=F.indexOf(Qt);Sr===0?F.shift():Sr>0&&F.splice(Sr,1),Qt.callback(ie,...ce),ie!=null&&$e("error",ie,Qt.data)}U<=qe.concurrency-qe.buffer&&$e("unsaturated"),qe.idle()&&$e("drain"),qe.process()}}function $a(le){return le.length===0&&qe.idle()?(c(()=>$e("drain")),!0):!1}let So=le=>ie=>{if(!ie)return new Promise((ce,ke)=>{z(le,(ut,Qt)=>{if(ut)return ke(ut);ce(Qt)})});se(le),k(le,ie)};var Xc=!1,qe={_tasks:new g4,_createTaskItem(le,ie){return{data:le,callback:ie}},*[Symbol.iterator](){yield*qe._tasks[Symbol.iterator]()},concurrency:N,payload:y,buffer:N/4,started:!1,paused:!1,push(le,ie){return Array.isArray(le)?$a(le)?void 0:le.map(ce=>We(ce,!1,!1,ie)):We(le,!1,!1,ie)},pushAsync(le,ie){return Array.isArray(le)?$a(le)?void 0:le.map(ce=>We(ce,!1,!0,ie)):We(le,!1,!0,ie)},kill(){se(),qe._tasks.empty()},unshift(le,ie){return Array.isArray(le)?$a(le)?void 0:le.map(ce=>We(ce,!0,!1,ie)):We(le,!0,!1,ie)},unshiftAsync(le,ie){return Array.isArray(le)?$a(le)?void 0:le.map(ce=>We(ce,!0,!0,ie)):We(le,!0,!0,ie)},remove(le){qe._tasks.remove(le)},process(){if(!Xc){for(Xc=!0;!qe.paused&&U<qe.concurrency&&qe._tasks.length;){var le=[],ie=[],ce=qe._tasks.length;qe.payload&&(ce=Math.min(ce,qe.payload));for(var ke=0;ke<ce;ke++){var ut=qe._tasks.shift();le.push(ut),F.push(ut),ie.push(ut.data)}U+=1,qe._tasks.length===0&&$e("empty"),U===qe.concurrency&&$e("saturated");var Qt=H(Tr(le));D(ie,Qt)}Xc=!1}},length(){return qe._tasks.length},running(){return U},workersList(){return F},idle(){return qe._tasks.length+U===0},pause(){qe.paused=!0},resume(){qe.paused!==!1&&(qe.paused=!1,c(qe.process))}};return Object.defineProperties(qe,{saturated:{writable:!1,value:So("saturated")},unsaturated:{writable:!1,value:So("unsaturated")},empty:{writable:!1,value:So("empty")},drain:{writable:!1,value:So("drain")},error:{writable:!1,value:So("error")}}),qe}function lw(C,N){return zR(C,1,N)}function cw(C,N,y){return zR(C,N,y)}function I4(C,N,y,D){D=w(D);var U=T(y);return pr(C,(F,G,k)=>{U(N,F,(z,se)=>{N=se,k(z)})},F=>D(F,N))}var ws=S(I4,4);function jR(...C){var N=C.map(T);return function(...y){var D=this,U=y[y.length-1];return typeof U=="function"?y.pop():U=ti(),ws(N,y,(F,G,k)=>{G.apply(D,F.concat((z,...se)=>{k(z,se)}))},(F,G)=>U(F,...G)),U[vr]}}function uw(...C){return jR(...C.reverse())}function _4(C,N,y,D){return R(j(N),C,y,D)}var Wc=S(_4,4);function N4(C,N,y,D){var U=T(y);return Wc(C,N,(F,G)=>{U(F,(k,...z)=>k?G(k):G(k,z))},(F,G)=>{for(var k=[],z=0;z<G.length;z++)G[z]&&(k=k.concat(...G[z]));return D(F,k)})}var Ga=S(N4,4);function O4(C,N,y){return Ga(C,1/0,N,y)}var wf=S(O4,3);function C4(C,N,y){return Ga(C,1,N,y)}var Lf=S(C4,3);function dw(...C){return function(...N){var y=N.pop();return y(null,...C)}}function $i(C,N){return(y,D,U,F)=>{var G=!1,k;let z=T(U);y(D,(se,$e,Ve)=>{z(se,(We,Tr)=>{if(We||We===!1)return Ve(We);if(C(Tr)&&!k)return G=!0,k=N(!0,se),Ve(null,I);Ve()})},se=>{if(se)return F(se);F(null,G?k:N(!1))})}}function b4(C,N,y){return $i(D=>D,(D,U)=>U)(Ke,C,N,y)}var Df=S(b4,3);function y4(C,N,y,D){return $i(U=>U,(U,F)=>F)(j(N),C,y,D)}var Pf=S(y4,4);function w4(C,N,y){return $i(D=>D,(D,U)=>U)(j(1),C,N,y)}var xf=S(w4,3);function fw(C){return(N,...y)=>T(N)(...y,(D,...U)=>{typeof console=="object"&&(D?console.error&&console.error(D):console[C]&&U.forEach(F=>console[C](F)))})}var Ew=fw("dir");function L4(C,N,y){y=H(y);var D=T(C),U=T(N),F;function G(z,...se){if(z)return y(z);z!==!1&&(F=se,U(...se,k))}function k(z,se){if(z)return y(z);if(z!==!1){if(!se)return y(null,...F);D(G)}}return k(null,!0)}var kc=S(L4,3);function hw(C,N,y){let D=T(N);return kc(C,(...U)=>{let F=U.pop();D(...U,(G,k)=>F(G,!k))},y)}function pw(C){return(N,y,D)=>C(N,D)}function D4(C,N,y){return Ke(C,pw(T(N)),y)}var vf=S(D4,3);function P4(C,N,y,D){return j(N)(C,pw(T(y)),D)}var Yc=S(P4,4);function x4(C,N,y){return Yc(C,1,N,y)}var Vc=S(x4,3);function KR(C){return f(C)?C:function(...N){var y=N.pop(),D=!0;N.push((...U)=>{D?c(()=>y(...U)):y(...U)}),C.apply(this,N),D=!1}}function v4(C,N,y){return $i(D=>!D,D=>!D)(Ke,C,N,y)}var Mf=S(v4,3);function M4(C,N,y,D){return $i(U=>!U,U=>!U)(j(N),C,y,D)}var Uf=S(M4,4);function U4(C,N,y){return $i(D=>!D,D=>!D)(pr,C,N,y)}var Bf=S(U4,3);function B4(C,N,y,D){var U=new Array(N.length);C(N,(F,G,k)=>{y(F,(z,se)=>{U[G]=!!se,k(z)})},F=>{if(F)return D(F);for(var G=[],k=0;k<N.length;k++)U[k]&&G.push(N[k]);D(null,G)})}function F4(C,N,y,D){var U=[];C(N,(F,G,k)=>{y(F,(z,se)=>{if(z)return k(z);se&&U.push({index:G,value:F}),k(z)})},F=>{if(F)return D(F);D(null,U.sort((G,k)=>G.index-k.index).map(G=>G.value))})}function Ff(C,N,y,D){var U=A(N)?B4:F4;return U(C,N,T(y),D)}function H4(C,N,y){return Ff(Ke,C,N,y)}var Hf=S(H4,3);function G4(C,N,y,D){return Ff(j(N),C,y,D)}var Gf=S(G4,4);function $4(C,N,y){return Ff(pr,C,N,y)}var $f=S($4,3);function W4(C,N){var y=H(N),D=T(KR(C));function U(F){if(F)return y(F);F!==!1&&D(U)}return U()}var Tw=S(W4,2);function k4(C,N,y,D){var U=T(y);return Wc(C,N,(F,G)=>{U(F,(k,z)=>k?G(k):G(k,{key:z,val:F}))},(F,G)=>{for(var k={},{hasOwnProperty:z}=Object.prototype,se=0;se<G.length;se++)if(G[se]){var{key:$e}=G[se],{val:Ve}=G[se];z.call(k,$e)?k[$e].push(Ve):k[$e]=[Ve]}return D(F,k)})}var Wf=S(k4,4);function Sw(C,N,y){return Wf(C,1/0,N,y)}function Rw(C,N,y){return Wf(C,1,N,y)}var Aw=fw("log");function Y4(C,N,y,D){D=w(D);var U={},F=T(y);return j(N)(C,(G,k,z)=>{F(G,k,(se,$e)=>{if(se)return z(se);U[k]=$e,z(se)})},G=>D(G,U))}var kf=S(Y4,4);function mw(C,N,y){return kf(C,1/0,N,y)}function gw(C,N,y){return kf(C,1,N,y)}function Iw(C,N=y=>y){var y=Object.create(null),D=Object.create(null),U=T(C),F=n((G,k)=>{var z=N(...G);z in y?c(()=>k(null,...y[z])):z in D?D[z].push(k):(D[z]=[k],U(...G,(se,...$e)=>{se||(y[z]=$e);var Ve=D[z];delete D[z];for(var We=0,Tr=Ve.length;We<Tr;We++)Ve[We](se,...$e)}))});return F.memo=y,F.unmemoized=C,F}var Yf;s?Yf=process.nextTick:i?Yf=setImmediate:Yf=o;var _w=a(Yf),JR=S((C,N,y)=>{var D=A(N)?[]:{};C(N,(U,F,G)=>{T(U)((k,...z)=>{z.length<2&&([z]=z),D[F]=z,G(k)})},U=>y(U,D))},3);function Nw(C,N){return JR(Ke,C,N)}function Ow(C,N,y){return JR(j(N),C,y)}function QR(C,N){var y=T(C);return zR((D,U)=>{y(D[0],U)},N,1)}class V4{constructor(){this.heap=[],this.pushCount=Number.MIN_SAFE_INTEGER}get length(){return this.heap.length}empty(){return this.heap=[],this}percUp(N){let y;for(;N>0&&ZR(this.heap[N],this.heap[y=Cw(N)]);){let D=this.heap[N];this.heap[N]=this.heap[y],this.heap[y]=D,N=y}}percDown(N){let y;for(;(y=q4(N))<this.heap.length&&(y+1<this.heap.length&&ZR(this.heap[y+1],this.heap[y])&&(y=y+1),!ZR(this.heap[N],this.heap[y]));){let D=this.heap[N];this.heap[N]=this.heap[y],this.heap[y]=D,N=y}}push(N){N.pushCount=++this.pushCount,this.heap.push(N),this.percUp(this.heap.length-1)}unshift(N){return this.heap.push(N)}shift(){let[N]=this.heap;return this.heap[0]=this.heap[this.heap.length-1],this.heap.pop(),this.percDown(0),N}toArray(){return[...this]}*[Symbol.iterator](){for(let N=0;N<this.heap.length;N++)yield this.heap[N].data}remove(N){let y=0;for(let D=0;D<this.heap.length;D++)N(this.heap[D])||(this.heap[y]=this.heap[D],y++);this.heap.splice(y);for(let D=Cw(this.heap.length-1);D>=0;D--)this.percDown(D);return this}}function q4(C){return(C<<1)+1}function Cw(C){return(C+1>>1)-1}function ZR(C,N){return C.priority!==N.priority?C.priority<N.priority:C.pushCount<N.pushCount}function bw(C,N){var y=QR(C,N),{push:D,pushAsync:U}=y;y._tasks=new V4,y._createTaskItem=({data:G,priority:k},z)=>({data:G,priority:k,callback:z});function F(G,k){return Array.isArray(G)?G.map(z=>({data:z,priority:k})):{data:G,priority:k}}return y.push=function(G,k=0,z){return D(F(G,k),z)},y.pushAsync=function(G,k=0,z){return U(F(G,k),z)},delete y.unshift,delete y.unshiftAsync,y}function X4(C,N){if(N=w(N),!Array.isArray(C))return N(new TypeError("First argument to race must be an array of functions"));if(!C.length)return N();for(var y=0,D=C.length;y<D;y++)T(C[y])(N)}var yw=S(X4,2);function Vf(C,N,y,D){var U=[...C].reverse();return ws(U,N,y,D)}function qf(C){var N=T(C);return n(function(D,U){return D.push((F,...G)=>{let k={};if(F&&(k.error=F),G.length>0){var z=G;G.length<=1&&([z]=G),k.value=z}U(null,k)}),N.apply(this,D)})}function ww(C){var N;return Array.isArray(C)?N=C.map(qf):(N={},Object.keys(C).forEach(y=>{N[y]=qf.call(this,C[y])})),N}function eA(C,N,y,D){let U=T(y);return Ff(C,N,(F,G)=>{U(F,(k,z)=>{G(k,!z)})},D)}function z4(C,N,y){return eA(Ke,C,N,y)}var Lw=S(z4,3);function j4(C,N,y,D){return eA(j(N),C,y,D)}var Dw=S(j4,4);function K4(C,N,y){return eA(pr,C,N,y)}var Pw=S(K4,3);function xw(C){return function(){return C}}let tA=5,vw=0;function Xf(C,N,y){var D={times:tA,intervalFunc:xw(vw)};if(arguments.length<3&&typeof C=="function"?(y=N||ti(),N=C):(J4(D,C),y=y||ti()),typeof N!="function")throw new Error("Invalid arguments for async.retry");var U=T(N),F=1;function G(){U((k,...z)=>{k!==!1&&(k&&F++<D.times&&(typeof D.errorFilter!="function"||D.errorFilter(k))?setTimeout(G,D.intervalFunc(F-1)):y(k,...z))})}return G(),y[vr]}function J4(C,N){if(typeof N=="object")C.times=+N.times||tA,C.intervalFunc=typeof N.interval=="function"?N.interval:xw(+N.interval||vw),C.errorFilter=N.errorFilter;else if(typeof N=="number"||typeof N=="string")C.times=+N||tA;else throw new Error("Invalid arguments for async.retry")}function Mw(C,N){N||(N=C,C=null);let y=C&&C.arity||N.length;f(N)&&(y+=1);var D=T(N);return n((U,F)=>{(U.length<y-1||F==null)&&(U.push(F),F=ti());function G(k){D(...U,k)}return C?Xf(C,G,F):Xf(G,F),F[vr]})}function Uw(C,N){return JR(pr,C,N)}function Q4(C,N,y){return $i(Boolean,D=>D)(Ke,C,N,y)}var zf=S(Q4,3);function Z4(C,N,y,D){return $i(Boolean,U=>U)(j(N),C,y,D)}var jf=S(Z4,4);function e8(C,N,y){return $i(Boolean,D=>D)(pr,C,N,y)}var Kf=S(e8,3);function t8(C,N,y){var D=T(N);return zn(C,(F,G)=>{D(F,(k,z)=>{if(k)return G(k);G(k,{value:F,criteria:z})})},(F,G)=>{if(F)return y(F);y(null,G.sort(U).map(k=>k.value))});function U(F,G){var k=F.criteria,z=G.criteria;return k<z?-1:k>z?1:0}}var Bw=S(t8,3);function Fw(C,N,y){var D=T(C);return n((U,F)=>{var G=!1,k;function z(){var se=C.name||"anonymous",$e=new Error('Callback function "'+se+'" timed out.');$e.code="ETIMEDOUT",y&&($e.info=y),G=!0,F($e)}U.push((...se)=>{G||(F(...se),clearTimeout(k))}),k=setTimeout(z,N),D(...U)})}function n8(C){for(var N=Array(C);C--;)N[C]=C;return N}function Jf(C,N,y,D){var U=T(y);return Wc(n8(C),N,U,D)}function Hw(C,N,y){return Jf(C,1/0,N,y)}function Gw(C,N,y){return Jf(C,1,N,y)}function $w(C,N,y,D){arguments.length<=3&&typeof N=="function"&&(D=y,y=N,N=Array.isArray(C)?[]:{}),D=w(D||ti());var U=T(y);return Ke(C,(F,G,k)=>{U(N,F,G,k)},F=>D(F,N)),D[vr]}function r8(C,N){var y=null,D;return Vc(C,(U,F)=>{T(U)((G,...k)=>{if(G===!1)return F(G);k.length<2?[D]=k:D=k,y=G,F(G?null:{})})},()=>N(y,D))}var Ww=S(r8);function kw(C){return(...N)=>(C.unmemoized||C)(...N)}function i8(C,N,y){y=H(y);var D=T(N),U=T(C),F=[];function G(z,...se){if(z)return y(z);F=se,z!==!1&&U(k)}function k(z,se){if(z)return y(z);if(z!==!1){if(!se)return y(null,...F);D(G)}}return U(k)}var qc=S(i8,3);function Yw(C,N,y){let D=T(C);return qc(U=>D((F,G)=>U(F,!G)),N,y)}function s8(C,N){if(N=w(N),!Array.isArray(C))return N(new Error("First argument to waterfall must be an array of functions"));if(!C.length)return N();var y=0;function D(F){var G=T(C[y++]);G(...F,H(U))}function U(F,...G){if(F!==!1){if(F||y===C.length)return N(F,...G);D(G)}}D([])}var Vw=S(s8),o8={apply:e,applyEach:tr,applyEachSeries:Gc,asyncify:u,auto:$c,autoInject:ow,cargo:lw,cargoQueue:cw,compose:uw,concat:wf,concatLimit:Ga,concatSeries:Lf,constant:dw,detect:Df,detectLimit:Pf,detectSeries:xf,dir:Ew,doUntil:hw,doWhilst:kc,each:vf,eachLimit:Yc,eachOf:Ke,eachOfLimit:Z,eachOfSeries:pr,eachSeries:Vc,ensureAsync:KR,every:Mf,everyLimit:Uf,everySeries:Bf,filter:Hf,filterLimit:Gf,filterSeries:$f,forever:Tw,groupBy:Sw,groupByLimit:Wf,groupBySeries:Rw,log:Aw,map:zn,mapLimit:Wc,mapSeries:Gi,mapValues:mw,mapValuesLimit:kf,mapValuesSeries:gw,memoize:Iw,nextTick:_w,parallel:Nw,parallelLimit:Ow,priorityQueue:bw,queue:QR,race:yw,reduce:ws,reduceRight:Vf,reflect:qf,reflectAll:ww,reject:Lw,rejectLimit:Dw,rejectSeries:Pw,retry:Xf,retryable:Mw,seq:jR,series:Uw,setImmediate:c,some:zf,someLimit:jf,someSeries:Kf,sortBy:Bw,timeout:Fw,times:Hw,timesLimit:Jf,timesSeries:Gw,transform:$w,tryEach:Ww,unmemoize:kw,until:Yw,waterfall:Vw,whilst:qc,all:Mf,allLimit:Uf,allSeries:Bf,any:zf,anyLimit:jf,anySeries:Kf,find:Df,findLimit:Pf,findSeries:xf,flatMap:wf,flatMapLimit:Ga,flatMapSeries:Lf,forEach:vf,forEachSeries:Vc,forEachLimit:Yc,forEachOf:Ke,forEachOfSeries:pr,forEachOfLimit:Z,inject:ws,foldl:ws,foldr:Vf,select:Hf,selectLimit:Gf,selectSeries:$f,wrapSync:u,during:qc,doDuring:kc};t.all=Mf,t.allLimit=Uf,t.allSeries=Bf,t.any=zf,t.anyLimit=jf,t.anySeries=Kf,t.apply=e,t.applyEach=tr,t.applyEachSeries=Gc,t.asyncify=u,t.auto=$c,t.autoInject=ow,t.cargo=lw,t.cargoQueue=cw,t.compose=uw,t.concat=wf,t.concatLimit=Ga,t.concatSeries=Lf,t.constant=dw,t.default=o8,t.detect=Df,t.detectLimit=Pf,t.detectSeries=xf,t.dir=Ew,t.doDuring=kc,t.doUntil=hw,t.doWhilst=kc,t.during=qc,t.each=vf,t.eachLimit=Yc,t.eachOf=Ke,t.eachOfLimit=Z,t.eachOfSeries=pr,t.eachSeries=Vc,t.ensureAsync=KR,t.every=Mf,t.everyLimit=Uf,t.everySeries=Bf,t.filter=Hf,t.filterLimit=Gf,t.filterSeries=$f,t.find=Df,t.findLimit=Pf,t.findSeries=xf,t.flatMap=wf,t.flatMapLimit=Ga,t.flatMapSeries=Lf,t.foldl=ws,t.foldr=Vf,t.forEach=vf,t.forEachLimit=Yc,t.forEachOf=Ke,t.forEachOfLimit=Z,t.forEachOfSeries=pr,t.forEachSeries=Vc,t.forever=Tw,t.groupBy=Sw,t.groupByLimit=Wf,t.groupBySeries=Rw,t.inject=ws,t.log=Aw,t.map=zn,t.mapLimit=Wc,t.mapSeries=Gi,t.mapValues=mw,t.mapValuesLimit=kf,t.mapValuesSeries=gw,t.memoize=Iw,t.nextTick=_w,t.parallel=Nw,t.parallelLimit=Ow,t.priorityQueue=bw,t.queue=QR,t.race=yw,t.reduce=ws,t.reduceRight=Vf,t.reflect=qf,t.reflectAll=ww,t.reject=Lw,t.rejectLimit=Dw,t.rejectSeries=Pw,t.retry=Xf,t.retryable=Mw,t.select=Hf,t.selectLimit=Gf,t.selectSeries=$f,t.seq=jR,t.series=Uw,t.setImmediate=c,t.some=zf,t.someLimit=jf,t.someSeries=Kf,t.sortBy=Bw,t.timeout=Fw,t.times=Hw,t.timesLimit=Jf,t.timesSeries=Gw,t.transform=$w,t.tryEach=Ww,t.unmemoize=kw,t.until=Yw,t.waterfall=Vw,t.whilst=qc,t.wrapSync=u,Object.defineProperty(t,"__esModule",{value:!0})}))});var CL=O((bPe,OL)=>{var Ms=require("constants"),HJ=process.cwd,xE=null,GJ=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return xE||(xE=HJ.call(process)),xE};try{process.cwd()}catch{}typeof process.chdir=="function"&&(VA=process.chdir,process.chdir=function(t){xE=null,VA.call(process,t)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,VA));var VA;OL.exports=$J;function $J(t){Ms.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&e(t),t.lutimes||n(t),t.chown=s(t.chown),t.fchown=s(t.fchown),t.lchown=s(t.lchown),t.chmod=r(t.chmod),t.fchmod=r(t.fchmod),t.lchmod=r(t.lchmod),t.chownSync=o(t.chownSync),t.fchownSync=o(t.fchownSync),t.lchownSync=o(t.lchownSync),t.chmodSync=i(t.chmodSync),t.fchmodSync=i(t.fchmodSync),t.lchmodSync=i(t.lchmodSync),t.stat=a(t.stat),t.fstat=a(t.fstat),t.lstat=a(t.lstat),t.statSync=l(t.statSync),t.fstatSync=l(t.fstatSync),t.lstatSync=l(t.lstatSync),t.chmod&&!t.lchmod&&(t.lchmod=function(u,d,E){E&&process.nextTick(E)},t.lchmodSync=function(){}),t.chown&&!t.lchown&&(t.lchown=function(u,d,E,f){f&&process.nextTick(f)},t.lchownSync=function(){}),GJ==="win32"&&(t.rename=typeof t.rename!="function"?t.rename:(function(u){function d(E,f,p){var h=Date.now(),T=0;u(E,f,function S(m){if(m&&(m.code==="EACCES"||m.code==="EPERM"||m.code==="EBUSY")&&Date.now()-h<6e4){setTimeout(function(){t.stat(f,function(R,A){R&&R.code==="ENOENT"?u(E,f,S):p(m)})},T),T<100&&(T+=10);return}p&&p(m)})}return Object.setPrototypeOf&&Object.setPrototypeOf(d,u),d})(t.rename)),t.read=typeof t.read!="function"?t.read:(function(u){function d(E,f,p,h,T,S){var m;if(S&&typeof S=="function"){var R=0;m=function(A,I,w){if(A&&A.code==="EAGAIN"&&R<10)return R++,u.call(t,E,f,p,h,T,m);S.apply(this,arguments)}}return u.call(t,E,f,p,h,T,m)}return Object.setPrototypeOf&&Object.setPrototypeOf(d,u),d})(t.read),t.readSync=typeof t.readSync!="function"?t.readSync:(function(u){return function(d,E,f,p,h){for(var T=0;;)try{return u.call(t,d,E,f,p,h)}catch(S){if(S.code==="EAGAIN"&&T<10){T++;continue}throw S}}})(t.readSync);function e(u){u.lchmod=function(d,E,f){u.open(d,Ms.O_WRONLY|Ms.O_SYMLINK,E,function(p,h){if(p){f&&f(p);return}u.fchmod(h,E,function(T){u.close(h,function(S){f&&f(T||S)})})})},u.lchmodSync=function(d,E){var f=u.openSync(d,Ms.O_WRONLY|Ms.O_SYMLINK,E),p=!0,h;try{h=u.fchmodSync(f,E),p=!1}finally{if(p)try{u.closeSync(f)}catch{}else u.closeSync(f)}return h}}function n(u){Ms.hasOwnProperty("O_SYMLINK")&&u.futimes?(u.lutimes=function(d,E,f,p){u.open(d,Ms.O_SYMLINK,function(h,T){if(h){p&&p(h);return}u.futimes(T,E,f,function(S){u.close(T,function(m){p&&p(S||m)})})})},u.lutimesSync=function(d,E,f){var p=u.openSync(d,Ms.O_SYMLINK),h,T=!0;try{h=u.futimesSync(p,E,f),T=!1}finally{if(T)try{u.closeSync(p)}catch{}else u.closeSync(p)}return h}):u.futimes&&(u.lutimes=function(d,E,f,p){p&&process.nextTick(p)},u.lutimesSync=function(){})}function r(u){return u&&function(d,E,f){return u.call(t,d,E,function(p){c(p)&&(p=null),f&&f.apply(this,arguments)})}}function i(u){return u&&function(d,E){try{return u.call(t,d,E)}catch(f){if(!c(f))throw f}}}function s(u){return u&&function(d,E,f,p){return u.call(t,d,E,f,function(h){c(h)&&(h=null),p&&p.apply(this,arguments)})}}function o(u){return u&&function(d,E,f){try{return u.call(t,d,E,f)}catch(p){if(!c(p))throw p}}}function a(u){return u&&function(d,E,f){typeof E=="function"&&(f=E,E=null);function p(h,T){T&&(T.uid<0&&(T.uid+=4294967296),T.gid<0&&(T.gid+=4294967296)),f&&f.apply(this,arguments)}return E?u.call(t,d,E,p):u.call(t,d,p)}}function l(u){return u&&function(d,E){var f=E?u.call(t,d,E):u.call(t,d);return f&&(f.uid<0&&(f.uid+=4294967296),f.gid<0&&(f.gid+=4294967296)),f}}function c(u){if(!u||u.code==="ENOSYS")return!0;var d=!process.getuid||process.getuid()!==0;return!!(d&&(u.code==="EINVAL"||u.code==="EPERM"))}}});var wL=O((yPe,yL)=>{var bL=require("stream").Stream;yL.exports=WJ;function WJ(t){return{ReadStream:e,WriteStream:n};function e(r,i){if(!(this instanceof e))return new e(r,i);bL.call(this);var s=this;this.path=r,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,i=i||{};for(var o=Object.keys(i),a=0,l=o.length;a<l;a++){var c=o[a];this[c]=i[c]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){s._read()});return}t.open(this.path,this.flags,this.mode,function(u,d){if(u){s.emit("error",u),s.readable=!1;return}s.fd=d,s.emit("open",d),s._read()})}function n(r,i){if(!(this instanceof n))return new n(r,i);bL.call(this),this.path=r,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,i=i||{};for(var s=Object.keys(i),o=0,a=s.length;o<a;o++){var l=s[o];this[l]=i[l]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=t.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}});var DL=O((wPe,LL)=>{"use strict";LL.exports=YJ;var kJ=Object.getPrototypeOf||function(t){return t.__proto__};function YJ(t){if(t===null||typeof t!="object")return t;if(t instanceof Object)var e={__proto__:kJ(t)};else var e=Object.create(null);return Object.getOwnPropertyNames(t).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}});var jA=O((LPe,zA)=>{var Tt=require("fs"),VJ=CL(),qJ=wL(),XJ=DL(),vE=require("util"),Tn,UE;typeof Symbol=="function"&&typeof Symbol.for=="function"?(Tn=Symbol.for("graceful-fs.queue"),UE=Symbol.for("graceful-fs.previous")):(Tn="___graceful-fs.queue",UE="___graceful-fs.previous");function zJ(){}function vL(t,e){Object.defineProperty(t,Tn,{get:function(){return e}})}var _o=zJ;vE.debuglog?_o=vE.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(_o=function(){var t=vE.format.apply(vE,arguments);t="GFS4: "+t.split(/\n/).join(`
GFS4: `),console.error(t)});Tt[Tn]||(PL=global[Tn]||[],vL(Tt,PL),Tt.close=(function(t){function e(n,r){return t.call(Tt,n,function(i){i||xL(),typeof r=="function"&&r.apply(this,arguments)})}return Object.defineProperty(e,UE,{value:t}),e})(Tt.close),Tt.closeSync=(function(t){function e(n){t.apply(Tt,arguments),xL()}return Object.defineProperty(e,UE,{value:t}),e})(Tt.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){_o(Tt[Tn]),require("assert").equal(Tt[Tn].length,0)}));var PL;global[Tn]||vL(global,Tt[Tn]);zA.exports=qA(XJ(Tt));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!Tt.__patched&&(zA.exports=qA(Tt),Tt.__patched=!0);function qA(t){VJ(t),t.gracefulify=qA,t.createReadStream=I,t.createWriteStream=w;var e=t.readFile;t.readFile=n;function n(b,P,v){return typeof P=="function"&&(v=P,P=null),H(b,P,v);function H($,j,J,Z){return e($,j,function(M){M&&(M.code==="EMFILE"||M.code==="ENFILE")?Za([H,[$,j,J],M,Z||Date.now(),Date.now()]):typeof J=="function"&&J.apply(this,arguments)})}}var r=t.writeFile;t.writeFile=i;function i(b,P,v,H){return typeof v=="function"&&(H=v,v=null),$(b,P,v,H);function $(j,J,Z,M,q){return r(j,J,Z,function(K){K&&(K.code==="EMFILE"||K.code==="ENFILE")?Za([$,[j,J,Z,M],K,q||Date.now(),Date.now()]):typeof M=="function"&&M.apply(this,arguments)})}}var s=t.appendFile;s&&(t.appendFile=o);function o(b,P,v,H){return typeof v=="function"&&(H=v,v=null),$(b,P,v,H);function $(j,J,Z,M,q){return s(j,J,Z,function(K){K&&(K.code==="EMFILE"||K.code==="ENFILE")?Za([$,[j,J,Z,M],K,q||Date.now(),Date.now()]):typeof M=="function"&&M.apply(this,arguments)})}}var a=t.copyFile;a&&(t.copyFile=l);function l(b,P,v,H){return typeof v=="function"&&(H=v,v=0),$(b,P,v,H);function $(j,J,Z,M,q){return a(j,J,Z,function(K){K&&(K.code==="EMFILE"||K.code==="ENFILE")?Za([$,[j,J,Z,M],K,q||Date.now(),Date.now()]):typeof M=="function"&&M.apply(this,arguments)})}}var c=t.readdir;t.readdir=d;var u=/^v[0-5]\./;function d(b,P,v){typeof P=="function"&&(v=P,P=null);var H=u.test(process.version)?function(J,Z,M,q){return c(J,$(J,Z,M,q))}:function(J,Z,M,q){return c(J,Z,$(J,Z,M,q))};return H(b,P,v);function $(j,J,Z,M){return function(q,K){q&&(q.code==="EMFILE"||q.code==="ENFILE")?Za([H,[j,J,Z],q,M||Date.now(),Date.now()]):(K&&K.sort&&K.sort(),typeof Z=="function"&&Z.call(this,q,K))}}}if(process.version.substr(0,4)==="v0.8"){var E=qJ(t);S=E.ReadStream,R=E.WriteStream}var f=t.ReadStream;f&&(S.prototype=Object.create(f.prototype),S.prototype.open=m);var p=t.WriteStream;p&&(R.prototype=Object.create(p.prototype),R.prototype.open=A),Object.defineProperty(t,"ReadStream",{get:function(){return S},set:function(b){S=b},enumerable:!0,configurable:!0}),Object.defineProperty(t,"WriteStream",{get:function(){return R},set:function(b){R=b},enumerable:!0,configurable:!0});var h=S;Object.defineProperty(t,"FileReadStream",{get:function(){return h},set:function(b){h=b},enumerable:!0,configurable:!0});var T=R;Object.defineProperty(t,"FileWriteStream",{get:function(){return T},set:function(b){T=b},enumerable:!0,configurable:!0});function S(b,P){return this instanceof S?(f.apply(this,arguments),this):S.apply(Object.create(S.prototype),arguments)}function m(){var b=this;L(b.path,b.flags,b.mode,function(P,v){P?(b.autoClose&&b.destroy(),b.emit("error",P)):(b.fd=v,b.emit("open",v),b.read())})}function R(b,P){return this instanceof R?(p.apply(this,arguments),this):R.apply(Object.create(R.prototype),arguments)}function A(){var b=this;L(b.path,b.flags,b.mode,function(P,v){P?(b.destroy(),b.emit("error",P)):(b.fd=v,b.emit("open",v))})}function I(b,P){return new t.ReadStream(b,P)}function w(b,P){return new t.WriteStream(b,P)}var g=t.open;t.open=L;function L(b,P,v,H){return typeof v=="function"&&(H=v,v=null),$(b,P,v,H);function $(j,J,Z,M,q){return g(j,J,Z,function(K,Ke){K&&(K.code==="EMFILE"||K.code==="ENFILE")?Za([$,[j,J,Z,M],K,q||Date.now(),Date.now()]):typeof M=="function"&&M.apply(this,arguments)})}}return t}function Za(t){_o("ENQUEUE",t[0].name,t[1]),Tt[Tn].push(t),XA()}var ME;function xL(){for(var t=Date.now(),e=0;e<Tt[Tn].length;++e)Tt[Tn][e].length>2&&(Tt[Tn][e][3]=t,Tt[Tn][e][4]=t);XA()}function XA(){if(clearTimeout(ME),ME=void 0,Tt[Tn].length!==0){var t=Tt[Tn].shift(),e=t[0],n=t[1],r=t[2],i=t[3],s=t[4];if(i===void 0)_o("RETRY",e.name,n),e.apply(null,n);else if(Date.now()-i>=6e4){_o("TIMEOUT",e.name,n);var o=n.pop();typeof o=="function"&&o.call(null,r)}else{var a=Date.now()-s,l=Math.max(s-i,1),c=Math.min(l*1.2,100);a>=c?(_o("RETRY",e.name,n),e.apply(null,n.concat([i]))):Tt[Tn].push(t)}ME===void 0&&(ME=setTimeout(XA,0))}}});var BE=O((DPe,ML)=>{"use strict";var ri=t=>t!==null&&typeof t=="object"&&typeof t.pipe=="function";ri.writable=t=>ri(t)&&t.writable!==!1&&typeof t._write=="function"&&typeof t._writableState=="object";ri.readable=t=>ri(t)&&t.readable!==!1&&typeof t._read=="function"&&typeof t._readableState=="object";ri.duplex=t=>ri.writable(t)&&ri.readable(t);ri.transform=t=>ri.duplex(t)&&typeof t._transform=="function";ML.exports=ri});var fu=O((PPe,KA)=>{"use strict";typeof process>"u"||!process.version||process.version.indexOf("v0.")===0||process.version.indexOf("v1.")===0&&process.version.indexOf("v1.8.")!==0?KA.exports={nextTick:jJ}:KA.exports=process;function jJ(t,e,n,r){if(typeof t!="function")throw new TypeError('"callback" argument must be a function');var i=arguments.length,s,o;switch(i){case 0:case 1:return process.nextTick(t);case 2:return process.nextTick(function(){t.call(null,e)});case 3:return process.nextTick(function(){t.call(null,e,n)});case 4:return process.nextTick(function(){t.call(null,e,n,r)});default:for(s=new Array(i-1),o=0;o<s.length;)s[o++]=arguments[o];return process.nextTick(function(){t.apply(null,s)})}}});var BL=O((xPe,UL)=>{var KJ={}.toString;UL.exports=Array.isArray||function(t){return KJ.call(t)=="[object Array]"}});var JA=O((vPe,FL)=>{FL.exports=require("stream")});var Eu=O((QA,GL)=>{var FE=require("buffer"),Vi=FE.Buffer;function HL(t,e){for(var n in t)e[n]=t[n]}Vi.from&&Vi.alloc&&Vi.allocUnsafe&&Vi.allocUnsafeSlow?GL.exports=FE:(HL(FE,QA),QA.Buffer=el);function el(t,e,n){return Vi(t,e,n)}HL(Vi,el);el.from=function(t,e,n){if(typeof t=="number")throw new TypeError("Argument must not be a number");return Vi(t,e,n)};el.alloc=function(t,e,n){if(typeof t!="number")throw new TypeError("Argument must be a number");var r=Vi(t);return e!==void 0?typeof n=="string"?r.fill(e,n):r.fill(e):r.fill(0),r};el.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Vi(t)};el.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return FE.SlowBuffer(t)}});var tl=O(wn=>{function JJ(t){return Array.isArray?Array.isArray(t):HE(t)==="[object Array]"}wn.isArray=JJ;function QJ(t){return typeof t=="boolean"}wn.isBoolean=QJ;function ZJ(t){return t===null}wn.isNull=ZJ;function eQ(t){return t==null}wn.isNullOrUndefined=eQ;function tQ(t){return typeof t=="number"}wn.isNumber=tQ;function nQ(t){return typeof t=="string"}wn.isString=nQ;function rQ(t){return typeof t=="symbol"}wn.isSymbol=rQ;function iQ(t){return t===void 0}wn.isUndefined=iQ;function sQ(t){return HE(t)==="[object RegExp]"}wn.isRegExp=sQ;function oQ(t){return typeof t=="object"&&t!==null}wn.isObject=oQ;function aQ(t){return HE(t)==="[object Date]"}wn.isDate=aQ;function lQ(t){return HE(t)==="[object Error]"||t instanceof Error}wn.isError=lQ;function cQ(t){return typeof t=="function"}wn.isFunction=cQ;function uQ(t){return t===null||typeof t=="boolean"||typeof t=="number"||typeof t=="string"||typeof t=="symbol"||typeof t>"u"}wn.isPrimitive=uQ;wn.isBuffer=require("buffer").Buffer.isBuffer;function HE(t){return Object.prototype.toString.call(t)}});var $L=O((UPe,ZA)=>{typeof Object.create=="function"?ZA.exports=function(e,n){n&&(e.super_=n,e.prototype=Object.create(n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:ZA.exports=function(e,n){if(n){e.super_=n;var r=function(){};r.prototype=n.prototype,e.prototype=new r,e.prototype.constructor=e}}});var nl=O((BPe,tm)=>{try{if(em=require("util"),typeof em.inherits!="function")throw"";tm.exports=em.inherits}catch{tm.exports=$L()}var em});var kL=O((FPe,nm)=>{"use strict";function dQ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var WL=Eu().Buffer,hu=require("util");function fQ(t,e,n){t.copy(e,n)}nm.exports=(function(){function t(){dQ(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(n){var r={data:n,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length},t.prototype.unshift=function(n){var r={data:n,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length},t.prototype.shift=function(){if(this.length!==0){var n=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,n}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(n){if(this.length===0)return"";for(var r=this.head,i=""+r.data;r=r.next;)i+=n+r.data;return i},t.prototype.concat=function(n){if(this.length===0)return WL.alloc(0);for(var r=WL.allocUnsafe(n>>>0),i=this.head,s=0;i;)fQ(i.data,r,s),s+=i.data.length,i=i.next;return r},t})();hu&&hu.inspect&&hu.inspect.custom&&(nm.exports.prototype[hu.inspect.custom]=function(){var t=hu.inspect({length:this.length});return this.constructor.name+" "+t})});var rm=O((HPe,YL)=>{"use strict";var GE=fu();function EQ(t,e){var n=this,r=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return r||i?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,GE.nextTick($E,this,t)):GE.nextTick($E,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(s){!e&&s?n._writableState?n._writableState.errorEmitted||(n._writableState.errorEmitted=!0,GE.nextTick($E,n,s)):GE.nextTick($E,n,s):e&&e(s)}),this)}function hQ(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function $E(t,e){t.emit("error",e)}YL.exports={destroy:EQ,undestroy:hQ}});var qL=O((GPe,VL)=>{VL.exports=require("util").deprecate});var sm=O(($Pe,eD)=>{"use strict";var No=fu();eD.exports=Bt;function zL(t){var e=this;this.next=null,this.entry=null,this.finish=function(){PQ(e,t)}}var pQ=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:No.nextTick,rl;Bt.WritableState=Tu;var jL=Object.create(tl());jL.inherits=nl();var TQ={deprecate:qL()},KL=JA(),kE=Eu().Buffer,SQ=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function RQ(t){return kE.from(t)}function AQ(t){return kE.isBuffer(t)||t instanceof SQ}var JL=rm();jL.inherits(Bt,KL);function mQ(){}function Tu(t,e){rl=rl||Oo(),t=t||{};var n=e instanceof rl;this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var r=t.highWaterMark,i=t.writableHighWaterMark,s=this.objectMode?16:16*1024;r||r===0?this.highWaterMark=r:n&&(i||i===0)?this.highWaterMark=i:this.highWaterMark=s,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var o=t.decodeStrings===!1;this.decodeStrings=!o,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(a){bQ(e,a)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new zL(this)}Tu.prototype.getBuffer=function(){for(var e=this.bufferedRequest,n=[];e;)n.push(e),e=e.next;return n};(function(){try{Object.defineProperty(Tu.prototype,"buffer",{get:TQ.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var WE;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(WE=Function.prototype[Symbol.hasInstance],Object.defineProperty(Bt,Symbol.hasInstance,{value:function(t){return WE.call(this,t)?!0:this!==Bt?!1:t&&t._writableState instanceof Tu}})):WE=function(t){return t instanceof this};function Bt(t){if(rl=rl||Oo(),!WE.call(Bt,this)&&!(this instanceof rl))return new Bt(t);this._writableState=new Tu(t,this),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),KL.call(this)}Bt.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function gQ(t,e){var n=new Error("write after end");t.emit("error",n),No.nextTick(e,n)}function IQ(t,e,n,r){var i=!0,s=!1;return n===null?s=new TypeError("May not write null values to stream"):typeof n!="string"&&n!==void 0&&!e.objectMode&&(s=new TypeError("Invalid non-string/buffer chunk")),s&&(t.emit("error",s),No.nextTick(r,s),i=!1),i}Bt.prototype.write=function(t,e,n){var r=this._writableState,i=!1,s=!r.objectMode&&AQ(t);return s&&!kE.isBuffer(t)&&(t=RQ(t)),typeof e=="function"&&(n=e,e=null),s?e="buffer":e||(e=r.defaultEncoding),typeof n!="function"&&(n=mQ),r.ended?gQ(this,n):(s||IQ(this,r,t,n))&&(r.pendingcb++,i=NQ(this,r,s,t,e,n)),i};Bt.prototype.cork=function(){var t=this._writableState;t.corked++};Bt.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&QL(this,t))};Bt.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this};function _Q(t,e,n){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=kE.from(e,n)),e}Object.defineProperty(Bt.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function NQ(t,e,n,r,i,s){if(!n){var o=_Q(e,r,i);r!==o&&(n=!0,i="buffer",r=o)}var a=e.objectMode?1:r.length;e.length+=a;var l=e.length<e.highWaterMark;if(l||(e.needDrain=!0),e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:s,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else im(t,e,!1,a,r,i,s);return l}function im(t,e,n,r,i,s,o){e.writelen=r,e.writecb=o,e.writing=!0,e.sync=!0,n?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function OQ(t,e,n,r,i){--e.pendingcb,n?(No.nextTick(i,r),No.nextTick(pu,t,e),t._writableState.errorEmitted=!0,t.emit("error",r)):(i(r),t._writableState.errorEmitted=!0,t.emit("error",r),pu(t,e))}function CQ(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function bQ(t,e){var n=t._writableState,r=n.sync,i=n.writecb;if(CQ(n),e)OQ(t,n,r,e,i);else{var s=ZL(n);!s&&!n.corked&&!n.bufferProcessing&&n.bufferedRequest&&QL(t,n),r?pQ(XL,t,n,s,i):XL(t,n,s,i)}}function XL(t,e,n,r){n||yQ(t,e),e.pendingcb--,r(),pu(t,e)}function yQ(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function QL(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var r=e.bufferedRequestCount,i=new Array(r),s=e.corkedRequestsFree;s.entry=n;for(var o=0,a=!0;n;)i[o]=n,n.isBuf||(a=!1),n=n.next,o+=1;i.allBuffers=a,im(t,e,!0,e.length,i,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new zL(e),e.bufferedRequestCount=0}else{for(;n;){var l=n.chunk,c=n.encoding,u=n.callback,d=e.objectMode?1:l.length;if(im(t,e,!1,d,l,c,u),n=n.next,e.bufferedRequestCount--,e.writing)break}n===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=n,e.bufferProcessing=!1}Bt.prototype._write=function(t,e,n){n(new Error("_write() is not implemented"))};Bt.prototype._writev=null;Bt.prototype.end=function(t,e,n){var r=this._writableState;typeof t=="function"?(n=t,t=null,e=null):typeof e=="function"&&(n=e,e=null),t!=null&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||DQ(this,r,n)};function ZL(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function wQ(t,e){t._final(function(n){e.pendingcb--,n&&t.emit("error",n),e.prefinished=!0,t.emit("prefinish"),pu(t,e)})}function LQ(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"?(e.pendingcb++,e.finalCalled=!0,No.nextTick(wQ,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function pu(t,e){var n=ZL(e);return n&&(LQ(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"))),n}function DQ(t,e,n){e.ending=!0,pu(t,e),n&&(e.finished?No.nextTick(n):t.once("finish",n)),e.ended=!0,t.writable=!1}function PQ(t,e,n){var r=t.entry;for(t.entry=null;r;){var i=r.callback;e.pendingcb--,i(n),r=r.next}e.corkedRequestsFree.next=t}Object.defineProperty(Bt.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}});Bt.prototype.destroy=JL.destroy;Bt.prototype._undestroy=JL.undestroy;Bt.prototype._destroy=function(t,e){this.end(),e(t)}});var Oo=O((WPe,iD)=>{"use strict";var tD=fu(),xQ=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};iD.exports=qi;var nD=Object.create(tl());nD.inherits=nl();var rD=lm(),am=sm();nD.inherits(qi,rD);for(om=xQ(am.prototype),YE=0;YE<om.length;YE++)VE=om[YE],qi.prototype[VE]||(qi.prototype[VE]=am.prototype[VE]);var om,VE,YE;function qi(t){if(!(this instanceof qi))return new qi(t);rD.call(this,t),am.call(this,t),t&&t.readable===!1&&(this.readable=!1),t&&t.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,t&&t.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",vQ)}Object.defineProperty(qi.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function vQ(){this.allowHalfOpen||this._writableState.ended||tD.nextTick(MQ,this)}function MQ(t){t.end()}Object.defineProperty(qi.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(t){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=t,this._writableState.destroyed=t)}});qi.prototype._destroy=function(t,e){this.push(null),this.end(),tD.nextTick(e,t)}});var dm=O(oD=>{"use strict";var um=Eu().Buffer,sD=um.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function UQ(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function BQ(t){var e=UQ(t);if(typeof e!="string"&&(um.isEncoding===sD||!sD(t)))throw new Error("Unknown encoding: "+t);return e||t}oD.StringDecoder=Su;function Su(t){this.encoding=BQ(t);var e;switch(this.encoding){case"utf16le":this.text=kQ,this.end=YQ,e=4;break;case"utf8":this.fillLast=GQ,e=4;break;case"base64":this.text=VQ,this.end=qQ,e=3;break;default:this.write=XQ,this.end=zQ;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=um.allocUnsafe(e)}Su.prototype.write=function(t){if(t.length===0)return"";var e,n;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""};Su.prototype.end=WQ;Su.prototype.text=$Q;Su.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function cm(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function FQ(t,e,n){var r=e.length-1;if(r<n)return 0;var i=cm(e[r]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--r<n||i===-2?0:(i=cm(e[r]),i>=0?(i>0&&(t.lastNeed=i-2),i):--r<n||i===-2?0:(i=cm(e[r]),i>=0?(i>0&&(i===2?i=0:t.lastNeed=i-3),i):0))}function HQ(t,e,n){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function GQ(t){var e=this.lastTotal-this.lastNeed,n=HQ(this,t,e);if(n!==void 0)return n;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function $Q(t,e){var n=FQ(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var r=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)}function WQ(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function kQ(t,e){if((t.length-e)%2===0){var n=t.toString("utf16le",e);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function YQ(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function VQ(t,e){var n=(t.length-e)%3;return n===0?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,n===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function qQ(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function XQ(t){return t.toString(this.encoding)}function zQ(t){return t&&t.length?this.write(t):""}});var lm=O((VPe,RD)=>{"use strict";var sl=fu();RD.exports=rt;var jQ=BL(),Ru;rt.ReadableState=ED;var YPe=require("events").EventEmitter,uD=function(t,e){return t.listeners(e).length},Tm=JA(),Au=Eu().Buffer,KQ=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function JQ(t){return Au.from(t)}function QQ(t){return Au.isBuffer(t)||t instanceof KQ}var dD=Object.create(tl());dD.inherits=nl();var fm=require("util"),ze=void 0;fm&&fm.debuglog?ze=fm.debuglog("stream"):ze=function(){};var ZQ=kL(),fD=rm(),il;dD.inherits(rt,Tm);var Em=["error","close","destroy","pause","resume"];function e5(t,e,n){if(typeof t.prependListener=="function")return t.prependListener(e,n);!t._events||!t._events[e]?t.on(e,n):jQ(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]}function ED(t,e){Ru=Ru||Oo(),t=t||{};var n=e instanceof Ru;this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var r=t.highWaterMark,i=t.readableHighWaterMark,s=this.objectMode?16:16*1024;r||r===0?this.highWaterMark=r:n&&(i||i===0)?this.highWaterMark=i:this.highWaterMark=s,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new ZQ,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(il||(il=dm().StringDecoder),this.decoder=new il(t.encoding),this.encoding=t.encoding)}function rt(t){if(Ru=Ru||Oo(),!(this instanceof rt))return new rt(t);this._readableState=new ED(t,this),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),Tm.call(this)}Object.defineProperty(rt.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}});rt.prototype.destroy=fD.destroy;rt.prototype._undestroy=fD.undestroy;rt.prototype._destroy=function(t,e){this.push(null),e(t)};rt.prototype.push=function(t,e){var n=this._readableState,r;return n.objectMode?r=!0:typeof t=="string"&&(e=e||n.defaultEncoding,e!==n.encoding&&(t=Au.from(t,e),e=""),r=!0),hD(this,t,e,!1,r)};rt.prototype.unshift=function(t){return hD(this,t,null,!0,!1)};function hD(t,e,n,r,i){var s=t._readableState;if(e===null)s.reading=!1,i5(t,s);else{var o;i||(o=t5(s,e)),o?t.emit("error",o):s.objectMode||e&&e.length>0?(typeof e!="string"&&!s.objectMode&&Object.getPrototypeOf(e)!==Au.prototype&&(e=JQ(e)),r?s.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):hm(t,s,e,!0):s.ended?t.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!n?(e=s.decoder.write(e),s.objectMode||e.length!==0?hm(t,s,e,!1):pD(t,s)):hm(t,s,e,!1))):r||(s.reading=!1)}return n5(s)}function hm(t,e,n,r){e.flowing&&e.length===0&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&qE(t)),pD(t,e)}function t5(t,e){var n;return!QQ(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(n=new TypeError("Invalid non-string/buffer chunk")),n}function n5(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||t.length===0)}rt.prototype.isPaused=function(){return this._readableState.flowing===!1};rt.prototype.setEncoding=function(t){return il||(il=dm().StringDecoder),this._readableState.decoder=new il(t),this._readableState.encoding=t,this};var aD=8388608;function r5(t){return t>=aD?t=aD:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function lD(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=r5(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}rt.prototype.read=function(t){ze("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return ze("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?pm(this):qE(this),null;if(t=lD(t,e),t===0&&e.ended)return e.length===0&&pm(this),null;var r=e.needReadable;ze("need readable",r),(e.length===0||e.length-t<e.highWaterMark)&&(r=!0,ze("length less than watermark",r)),e.ended||e.reading?(r=!1,ze("reading or ended",r)):r&&(ze("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=lD(n,e)));var i;return t>0?i=TD(t,e):i=null,i===null?(e.needReadable=!0,t=0):e.length-=t,e.length===0&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&pm(this)),i!==null&&this.emit("data",i),i};function i5(t,e){if(!e.ended){if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,qE(t)}}function qE(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(ze("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?sl.nextTick(cD,t):cD(t))}function cD(t){ze("emit readable"),t.emit("readable"),Sm(t)}function pD(t,e){e.readingMore||(e.readingMore=!0,sl.nextTick(s5,t,e))}function s5(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(ze("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}rt.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))};rt.prototype.pipe=function(t,e){var n=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=t;break;case 1:r.pipes=[r.pipes,t];break;default:r.pipes.push(t);break}r.pipesCount+=1,ze("pipe count=%d opts=%j",r.pipesCount,e);var i=(!e||e.end!==!1)&&t!==process.stdout&&t!==process.stderr,s=i?a:T;r.endEmitted?sl.nextTick(s):n.once("end",s),t.on("unpipe",o);function o(S,m){ze("onunpipe"),S===n&&m&&m.hasUnpiped===!1&&(m.hasUnpiped=!0,u())}function a(){ze("onend"),t.end()}var l=o5(n);t.on("drain",l);var c=!1;function u(){ze("cleanup"),t.removeListener("close",p),t.removeListener("finish",h),t.removeListener("drain",l),t.removeListener("error",f),t.removeListener("unpipe",o),n.removeListener("end",a),n.removeListener("end",T),n.removeListener("data",E),c=!0,r.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&l()}var d=!1;n.on("data",E);function E(S){ze("ondata"),d=!1;var m=t.write(S);m===!1&&!d&&((r.pipesCount===1&&r.pipes===t||r.pipesCount>1&&SD(r.pipes,t)!==-1)&&!c&&(ze("false write response, pause",r.awaitDrain),r.awaitDrain++,d=!0),n.pause())}function f(S){ze("onerror",S),T(),t.removeListener("error",f),uD(t,"error")===0&&t.emit("error",S)}e5(t,"error",f);function p(){t.removeListener("finish",h),T()}t.once("close",p);function h(){ze("onfinish"),t.removeListener("close",p),T()}t.once("finish",h);function T(){ze("unpipe"),n.unpipe(t)}return t.emit("pipe",n),r.flowing||(ze("pipe resume"),n.resume()),t};function o5(t){return function(){var e=t._readableState;ze("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,e.awaitDrain===0&&uD(t,"data")&&(e.flowing=!0,Sm(t))}}rt.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n),this);if(!t){var r=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var s=0;s<i;s++)r[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=SD(e.pipes,t);return o===-1?this:(e.pipes.splice(o,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n),this)};rt.prototype.on=function(t,e){var n=Tm.prototype.on.call(this,t,e);if(t==="data")this._readableState.flowing!==!1&&this.resume();else if(t==="readable"){var r=this._readableState;!r.endEmitted&&!r.readableListening&&(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&qE(this):sl.nextTick(a5,this))}return n};rt.prototype.addListener=rt.prototype.on;function a5(t){ze("readable nexttick read 0"),t.read(0)}rt.prototype.resume=function(){var t=this._readableState;return t.flowing||(ze("resume"),t.flowing=!0,l5(this,t)),this};function l5(t,e){e.resumeScheduled||(e.resumeScheduled=!0,sl.nextTick(c5,t,e))}function c5(t,e){e.reading||(ze("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),Sm(t),e.flowing&&!e.reading&&t.read(0)}rt.prototype.pause=function(){return ze("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(ze("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function Sm(t){var e=t._readableState;for(ze("flow",e.flowing);e.flowing&&t.read()!==null;);}rt.prototype.wrap=function(t){var e=this,n=this._readableState,r=!1;t.on("end",function(){if(ze("wrapped end"),n.decoder&&!n.ended){var o=n.decoder.end();o&&o.length&&e.push(o)}e.push(null)}),t.on("data",function(o){if(ze("wrapped data"),n.decoder&&(o=n.decoder.write(o)),!(n.objectMode&&o==null)&&!(!n.objectMode&&(!o||!o.length))){var a=e.push(o);a||(r=!0,t.pause())}});for(var i in t)this[i]===void 0&&typeof t[i]=="function"&&(this[i]=(function(o){return function(){return t[o].apply(t,arguments)}})(i));for(var s=0;s<Em.length;s++)t.on(Em[s],this.emit.bind(this,Em[s]));return this._read=function(o){ze("wrapped _read",o),r&&(r=!1,t.resume())},this};Object.defineProperty(rt.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});rt._fromList=TD;function TD(t,e){if(e.length===0)return null;var n;return e.objectMode?n=e.buffer.shift():!t||t>=e.length?(e.decoder?n=e.buffer.join(""):e.buffer.length===1?n=e.buffer.head.data:n=e.buffer.concat(e.length),e.buffer.clear()):n=u5(t,e.buffer,e.decoder),n}function u5(t,e,n){var r;return t<e.head.data.length?(r=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):t===e.head.data.length?r=e.shift():r=n?d5(t,e):f5(t,e),r}function d5(t,e){var n=e.head,r=1,i=n.data;for(t-=i.length;n=n.next;){var s=n.data,o=t>s.length?s.length:t;if(o===s.length?i+=s:i+=s.slice(0,t),t-=o,t===0){o===s.length?(++r,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=s.slice(o));break}++r}return e.length-=r,i}function f5(t,e){var n=Au.allocUnsafe(t),r=e.head,i=1;for(r.data.copy(n),t-=r.data.length;r=r.next;){var s=r.data,o=t>s.length?s.length:t;if(s.copy(n,n.length-t,0,o),t-=o,t===0){o===s.length?(++i,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=s.slice(o));break}++i}return e.length-=i,n}function pm(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,sl.nextTick(E5,e,t))}function E5(t,e){!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function SD(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}});var Rm=O((qPe,gD)=>{"use strict";gD.exports=Xi;var XE=Oo(),mD=Object.create(tl());mD.inherits=nl();mD.inherits(Xi,XE);function h5(t,e){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,e!=null&&this.push(e),r(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function Xi(t){if(!(this instanceof Xi))return new Xi(t);XE.call(this,t),this._transformState={afterTransform:h5.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",p5)}function p5(){var t=this;typeof this._flush=="function"?this._flush(function(e,n){AD(t,e,n)}):AD(this,null,null)}Xi.prototype.push=function(t,e){return this._transformState.needTransform=!1,XE.prototype.push.call(this,t,e)};Xi.prototype._transform=function(t,e,n){throw new Error("_transform() is not implemented")};Xi.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};Xi.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};Xi.prototype._destroy=function(t,e){var n=this;XE.prototype._destroy.call(this,t,function(r){e(r),n.emit("close")})};function AD(t,e,n){if(e)return t.emit("error",e);if(n!=null&&t.push(n),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}});var OD=O((XPe,ND)=>{"use strict";ND.exports=mu;var ID=Rm(),_D=Object.create(tl());_D.inherits=nl();_D.inherits(mu,ID);function mu(t){if(!(this instanceof mu))return new mu(t);ID.call(this,t)}mu.prototype._transform=function(t,e,n){n(null,t)}});var CD=O((Sn,zE)=>{var ii=require("stream");process.env.READABLE_STREAM==="disable"&&ii?(zE.exports=ii,Sn=zE.exports=ii.Readable,Sn.Readable=ii.Readable,Sn.Writable=ii.Writable,Sn.Duplex=ii.Duplex,Sn.Transform=ii.Transform,Sn.PassThrough=ii.PassThrough,Sn.Stream=ii):(Sn=zE.exports=lm(),Sn.Stream=ii||Sn,Sn.Readable=Sn,Sn.Writable=sm(),Sn.Duplex=Oo(),Sn.Transform=Rm(),Sn.PassThrough=OD())});var yD=O((zPe,bD)=>{bD.exports=CD().PassThrough});var PD=O((jPe,DD)=>{var wD=require("util"),JE=yD();DD.exports={Readable:jE,Writable:KE};wD.inherits(jE,JE);wD.inherits(KE,JE);function LD(t,e,n){t[e]=function(){return delete t[e],n.apply(this,arguments),this[e].apply(this,arguments)}}function jE(t,e){if(!(this instanceof jE))return new jE(t,e);JE.call(this,e),LD(this,"_read",function(){var n=t.call(this,e),r=this.emit.bind(this,"error");n.on("error",r),n.pipe(this)}),this.emit("readable")}function KE(t,e){if(!(this instanceof KE))return new KE(t,e);JE.call(this,e),LD(this,"_write",function(){var n=t.call(this,e),r=this.emit.bind(this,"error");n.on("error",r),this.pipe(n)}),this.emit("writable")}});var Am=O((KPe,xD)=>{xD.exports=function(t,e){if(typeof t!="string")throw new TypeError("expected path to be a string");if(t==="\\"||t==="/")return"/";var n=t.length;if(n<=1)return t;var r="";if(n>4&&t[3]==="\\"){var i=t[2];(i==="?"||i===".")&&t.slice(0,2)==="\\\\"&&(t=t.slice(2),r="//")}var s=t.split(/[/\\]+/);return e!==!1&&s[s.length-1]===""&&s.pop(),r+s.join("/")}});var mm=O((JPe,vD)=>{function T5(t){return t}vD.exports=T5});var UD=O((QPe,MD)=>{function S5(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}MD.exports=S5});var HD=O((ZPe,FD)=>{var R5=UD(),BD=Math.max;function A5(t,e,n){return e=BD(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,s=BD(r.length-e,0),o=Array(s);++i<s;)o[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=n(o),R5(t,this,a)}}FD.exports=A5});var $D=O((exe,GD)=>{function m5(t){return function(){return t}}GD.exports=m5});var gm=O((txe,WD)=>{var g5=typeof global=="object"&&global&&global.Object===Object&&global;WD.exports=g5});var ol=O((nxe,kD)=>{var I5=gm(),_5=typeof self=="object"&&self&&self.Object===Object&&self,N5=I5||_5||Function("return this")();kD.exports=N5});var QE=O((rxe,YD)=>{var O5=ol(),C5=O5.Symbol;YD.exports=C5});var zD=O((ixe,XD)=>{var VD=QE(),qD=Object.prototype,b5=qD.hasOwnProperty,y5=qD.toString,gu=VD?VD.toStringTag:void 0;function w5(t){var e=b5.call(t,gu),n=t[gu];try{t[gu]=void 0;var r=!0}catch{}var i=y5.call(t);return r&&(e?t[gu]=n:delete t[gu]),i}XD.exports=w5});var KD=O((sxe,jD)=>{var L5=Object.prototype,D5=L5.toString;function P5(t){return D5.call(t)}jD.exports=P5});var Iu=O((oxe,ZD)=>{var JD=QE(),x5=zD(),v5=KD(),M5="[object Null]",U5="[object Undefined]",QD=JD?JD.toStringTag:void 0;function B5(t){return t==null?t===void 0?U5:M5:QD&&QD in Object(t)?x5(t):v5(t)}ZD.exports=B5});var _u=O((axe,eP)=>{function F5(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}eP.exports=F5});var Im=O((lxe,tP)=>{var H5=Iu(),G5=_u(),$5="[object AsyncFunction]",W5="[object Function]",k5="[object GeneratorFunction]",Y5="[object Proxy]";function V5(t){if(!G5(t))return!1;var e=H5(t);return e==W5||e==k5||e==$5||e==Y5}tP.exports=V5});var rP=O((cxe,nP)=>{var q5=ol(),X5=q5["__core-js_shared__"];nP.exports=X5});var oP=O((uxe,sP)=>{var _m=rP(),iP=(function(){var t=/[^.]+$/.exec(_m&&_m.keys&&_m.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""})();function z5(t){return!!iP&&iP in t}sP.exports=z5});var lP=O((dxe,aP)=>{var j5=Function.prototype,K5=j5.toString;function J5(t){if(t!=null){try{return K5.call(t)}catch{}try{return t+""}catch{}}return""}aP.exports=J5});var uP=O((fxe,cP)=>{var Q5=Im(),Z5=oP(),e9=_u(),t9=lP(),n9=/[\\^$.*+?()[\]{}|]/g,r9=/^\[object .+?Constructor\]$/,i9=Function.prototype,s9=Object.prototype,o9=i9.toString,a9=s9.hasOwnProperty,l9=RegExp("^"+o9.call(a9).replace(n9,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function c9(t){if(!e9(t)||Z5(t))return!1;var e=Q5(t)?l9:r9;return e.test(t9(t))}cP.exports=c9});var fP=O((Exe,dP)=>{function u9(t,e){return t?.[e]}dP.exports=u9});var Nu=O((hxe,EP)=>{var d9=uP(),f9=fP();function E9(t,e){var n=f9(t,e);return d9(n)?n:void 0}EP.exports=E9});var pP=O((pxe,hP)=>{var h9=Nu(),p9=(function(){try{var t=h9(Object,"defineProperty");return t({},"",{}),t}catch{}})();hP.exports=p9});var RP=O((Txe,SP)=>{var T9=$D(),TP=pP(),S9=mm(),R9=TP?function(t,e){return TP(t,"toString",{configurable:!0,enumerable:!1,value:T9(e),writable:!0})}:S9;SP.exports=R9});var mP=O((Sxe,AP)=>{var A9=800,m9=16,g9=Date.now;function I9(t){var e=0,n=0;return function(){var r=g9(),i=m9-(r-n);if(n=r,i>0){if(++e>=A9)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}AP.exports=I9});var IP=O((Rxe,gP)=>{var _9=RP(),N9=mP(),O9=N9(_9);gP.exports=O9});var ZE=O((Axe,_P)=>{var C9=mm(),b9=HD(),y9=IP();function w9(t,e){return y9(b9(t,e,C9),t+"")}_P.exports=w9});var eh=O((mxe,NP)=>{function L9(t,e){return t===e||t!==t&&e!==e}NP.exports=L9});var Nm=O((gxe,OP)=>{var D9=9007199254740991;function P9(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=D9}OP.exports=P9});var th=O((Ixe,CP)=>{var x9=Im(),v9=Nm();function M9(t){return t!=null&&v9(t.length)&&!x9(t)}CP.exports=M9});var Om=O((_xe,bP)=>{var U9=9007199254740991,B9=/^(?:0|[1-9]\d*)$/;function F9(t,e){var n=typeof t;return e=e??U9,!!e&&(n=="number"||n!="symbol"&&B9.test(t))&&t>-1&&t%1==0&&t<e}bP.exports=F9});var wP=O((Nxe,yP)=>{var H9=eh(),G9=th(),$9=Om(),W9=_u();function k9(t,e,n){if(!W9(n))return!1;var r=typeof e;return(r=="number"?G9(n)&&$9(e,n.length):r=="string"&&e in n)?H9(n[e],t):!1}yP.exports=k9});var DP=O((Oxe,LP)=>{function Y9(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}LP.exports=Y9});var al=O((Cxe,PP)=>{function V9(t){return t!=null&&typeof t=="object"}PP.exports=V9});var vP=O((bxe,xP)=>{var q9=Iu(),X9=al(),z9="[object Arguments]";function j9(t){return X9(t)&&q9(t)==z9}xP.exports=j9});var Cm=O((yxe,BP)=>{var MP=vP(),K9=al(),UP=Object.prototype,J9=UP.hasOwnProperty,Q9=UP.propertyIsEnumerable,Z9=MP((function(){return arguments})())?MP:function(t){return K9(t)&&J9.call(t,"callee")&&!Q9.call(t,"callee")};BP.exports=Z9});var bm=O((wxe,FP)=>{var e7=Array.isArray;FP.exports=e7});var GP=O((Lxe,HP)=>{function t7(){return!1}HP.exports=t7});var YP=O((Ou,ll)=>{var n7=ol(),r7=GP(),kP=typeof Ou=="object"&&Ou&&!Ou.nodeType&&Ou,$P=kP&&typeof ll=="object"&&ll&&!ll.nodeType&&ll,i7=$P&&$P.exports===kP,WP=i7?n7.Buffer:void 0,s7=WP?WP.isBuffer:void 0,o7=s7||r7;ll.exports=o7});var qP=O((Dxe,VP)=>{var a7=Iu(),l7=Nm(),c7=al(),u7="[object Arguments]",d7="[object Array]",f7="[object Boolean]",E7="[object Date]",h7="[object Error]",p7="[object Function]",T7="[object Map]",S7="[object Number]",R7="[object Object]",A7="[object RegExp]",m7="[object Set]",g7="[object String]",I7="[object WeakMap]",_7="[object ArrayBuffer]",N7="[object DataView]",O7="[object Float32Array]",C7="[object Float64Array]",b7="[object Int8Array]",y7="[object Int16Array]",w7="[object Int32Array]",L7="[object Uint8Array]",D7="[object Uint8ClampedArray]",P7="[object Uint16Array]",x7="[object Uint32Array]",it={};it[O7]=it[C7]=it[b7]=it[y7]=it[w7]=it[L7]=it[D7]=it[P7]=it[x7]=!0;it[u7]=it[d7]=it[_7]=it[f7]=it[N7]=it[E7]=it[h7]=it[p7]=it[T7]=it[S7]=it[R7]=it[A7]=it[m7]=it[g7]=it[I7]=!1;function v7(t){return c7(t)&&l7(t.length)&&!!it[a7(t)]}VP.exports=v7});var ym=O((Pxe,XP)=>{function M7(t){return function(e){return t(e)}}XP.exports=M7});var jP=O((Cu,cl)=>{var U7=gm(),zP=typeof Cu=="object"&&Cu&&!Cu.nodeType&&Cu,bu=zP&&typeof cl=="object"&&cl&&!cl.nodeType&&cl,B7=bu&&bu.exports===zP,wm=B7&&U7.process,F7=(function(){try{var t=bu&&bu.require&&bu.require("util").types;return t||wm&&wm.binding&&wm.binding("util")}catch{}})();cl.exports=F7});var ZP=O((xxe,QP)=>{var H7=qP(),G7=ym(),KP=jP(),JP=KP&&KP.isTypedArray,$7=JP?G7(JP):H7;QP.exports=$7});var tx=O((vxe,ex)=>{var W7=DP(),k7=Cm(),Y7=bm(),V7=YP(),q7=Om(),X7=ZP(),z7=Object.prototype,j7=z7.hasOwnProperty;function K7(t,e){var n=Y7(t),r=!n&&k7(t),i=!n&&!r&&V7(t),s=!n&&!r&&!i&&X7(t),o=n||r||i||s,a=o?W7(t.length,String):[],l=a.length;for(var c in t)(e||j7.call(t,c))&&!(o&&(c=="length"||i&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||q7(c,l)))&&a.push(c);return a}ex.exports=K7});var rx=O((Mxe,nx)=>{var J7=Object.prototype;function Q7(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||J7;return t===n}nx.exports=Q7});var sx=O((Uxe,ix)=>{function Z7(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}ix.exports=Z7});var ax=O((Bxe,ox)=>{var eZ=_u(),tZ=rx(),nZ=sx(),rZ=Object.prototype,iZ=rZ.hasOwnProperty;function sZ(t){if(!eZ(t))return nZ(t);var e=tZ(t),n=[];for(var r in t)r=="constructor"&&(e||!iZ.call(t,r))||n.push(r);return n}ox.exports=sZ});var cx=O((Fxe,lx)=>{var oZ=tx(),aZ=ax(),lZ=th();function cZ(t){return lZ(t)?oZ(t,!0):aZ(t)}lx.exports=cZ});var fx=O((Hxe,dx)=>{var uZ=ZE(),dZ=eh(),fZ=wP(),EZ=cx(),ux=Object.prototype,hZ=ux.hasOwnProperty,pZ=uZ(function(t,e){t=Object(t);var n=-1,r=e.length,i=r>2?e[2]:void 0;for(i&&fZ(e[0],e[1],i)&&(r=1);++n<r;)for(var s=e[n],o=EZ(s),a=-1,l=o.length;++a<l;){var c=o[a],u=t[c];(u===void 0||dZ(u,ux[c])&&!hZ.call(t,c))&&(t[c]=s[c])}return t});dx.exports=pZ});var dt=O((Gxe,Ex)=>{"use strict";var Lm=class extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError(`Expected input to be an Array, got ${typeof e}`);let n="";for(let r=0;r<e.length;r++)n+=`    ${e[r].stack}
`;super(n),this.name="AggregateError",this.errors=e}};Ex.exports={AggregateError:Lm,ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,e){return t.includes(e)},ArrayPrototypeIndexOf(t,e){return t.indexOf(e)},ArrayPrototypeJoin(t,e){return t.join(e)},ArrayPrototypeMap(t,e){return t.map(e)},ArrayPrototypePop(t,e){return t.pop(e)},ArrayPrototypePush(t,e){return t.push(e)},ArrayPrototypeSlice(t,e,n){return t.slice(e,n)},Error,FunctionPrototypeCall(t,e,...n){return t.call(e,...n)},FunctionPrototypeSymbolHasInstance(t,e){return Function.prototype[Symbol.hasInstance].call(t,e)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,e){return Object.defineProperties(t,e)},ObjectDefineProperty(t,e,n){return Object.defineProperty(t,e,n)},ObjectGetOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,e){return Object.setPrototypeOf(t,e)},Promise,PromisePrototypeCatch(t,e){return t.catch(e)},PromisePrototypeThen(t,e,n){return t.then(e,n)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,e){return t.test(e)},SafeSet:Set,String,StringPrototypeSlice(t,e,n){return t.slice(e,n)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,e,n){return t.set(e,n)},Boolean,Uint8Array}});var Dm=O(($xe,hx)=>{"use strict";hx.exports={format(t,...e){return t.replace(/%([sdifj])/g,function(...[n,r]){let i=e.shift();return r==="f"?i.toFixed(6):r==="j"?JSON.stringify(i):r==="s"&&typeof i=="object"?`${i.constructor!==Object?i.constructor.name:""} {}`.trim():i.toString()})},inspect(t){switch(typeof t){case"string":if(t.includes("'"))if(t.includes('"')){if(!t.includes("`")&&!t.includes("${"))return`\`${t}\``}else return`"${t}"`;return`'${t}'`;case"number":return isNaN(t)?"NaN":Object.is(t,-0)?String(t):t;case"bigint":return`${String(t)}n`;case"boolean":case"undefined":return String(t);case"object":return"{}"}}}});var Ln=O((Wxe,Sx)=>{"use strict";var{format:TZ,inspect:nh}=Dm(),{AggregateError:SZ}=dt(),RZ=globalThis.AggregateError||SZ,AZ=Symbol("kIsNodeError"),mZ=["string","function","number","object","Function","Object","boolean","bigint","symbol"],gZ=/^([A-Z][a-z0-9]*)+$/,IZ="__node_internal_",rh={};function Co(t,e){if(!t)throw new rh.ERR_INTERNAL_ASSERTION(e)}function px(t){let e="",n=t.length,r=t[0]==="-"?1:0;for(;n>=r+4;n-=3)e=`_${t.slice(n-3,n)}${e}`;return`${t.slice(0,n)}${e}`}function _Z(t,e,n){if(typeof e=="function")return Co(e.length<=n.length,`Code: ${t}; The provided arguments length (${n.length}) does not match the required ones (${e.length}).`),e(...n);let r=(e.match(/%[dfijoOs]/g)||[]).length;return Co(r===n.length,`Code: ${t}; The provided arguments length (${n.length}) does not match the required ones (${r}).`),n.length===0?e:TZ(e,...n)}function Rn(t,e,n){n||(n=Error);class r extends n{constructor(...s){super(_Z(t,e,s))}toString(){return`${this.name} [${t}]: ${this.message}`}}Object.defineProperties(r.prototype,{name:{value:n.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${t}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),r.prototype.code=t,r.prototype[AZ]=!0,rh[t]=r}function Tx(t){let e=IZ+t.name;return Object.defineProperty(t,"name",{value:e}),t}function NZ(t,e){if(t&&e&&t!==e){if(Array.isArray(e.errors))return e.errors.push(t),e;let n=new RZ([e,t],e.message);return n.code=e.code,n}return t||e}var Pm=class extends Error{constructor(e="The operation was aborted",n=void 0){if(n!==void 0&&typeof n!="object")throw new rh.ERR_INVALID_ARG_TYPE("options","Object",n);super(e,n),this.code="ABORT_ERR",this.name="AbortError"}};Rn("ERR_ASSERTION","%s",Error);Rn("ERR_INVALID_ARG_TYPE",(t,e,n)=>{Co(typeof t=="string","'name' must be a string"),Array.isArray(e)||(e=[e]);let r="The ";t.endsWith(" argument")?r+=`${t} `:r+=`"${t}" ${t.includes(".")?"property":"argument"} `,r+="must be ";let i=[],s=[],o=[];for(let l of e)Co(typeof l=="string","All expected entries have to be of type string"),mZ.includes(l)?i.push(l.toLowerCase()):gZ.test(l)?s.push(l):(Co(l!=="object",'The value "object" should be written as "Object"'),o.push(l));if(s.length>0){let l=i.indexOf("object");l!==-1&&(i.splice(i,l,1),s.push("Object"))}if(i.length>0){switch(i.length){case 1:r+=`of type ${i[0]}`;break;case 2:r+=`one of type ${i[0]} or ${i[1]}`;break;default:{let l=i.pop();r+=`one of type ${i.join(", ")}, or ${l}`}}(s.length>0||o.length>0)&&(r+=" or ")}if(s.length>0){switch(s.length){case 1:r+=`an instance of ${s[0]}`;break;case 2:r+=`an instance of ${s[0]} or ${s[1]}`;break;default:{let l=s.pop();r+=`an instance of ${s.join(", ")}, or ${l}`}}o.length>0&&(r+=" or ")}switch(o.length){case 0:break;case 1:o[0].toLowerCase()!==o[0]&&(r+="an "),r+=`${o[0]}`;break;case 2:r+=`one of ${o[0]} or ${o[1]}`;break;default:{let l=o.pop();r+=`one of ${o.join(", ")}, or ${l}`}}if(n==null)r+=`. Received ${n}`;else if(typeof n=="function"&&n.name)r+=`. Received function ${n.name}`;else if(typeof n=="object"){var a;if((a=n.constructor)!==null&&a!==void 0&&a.name)r+=`. Received an instance of ${n.constructor.name}`;else{let l=nh(n,{depth:-1});r+=`. Received ${l}`}}else{let l=nh(n,{colors:!1});l.length>25&&(l=`${l.slice(0,25)}...`),r+=`. Received type ${typeof n} (${l})`}return r},TypeError);Rn("ERR_INVALID_ARG_VALUE",(t,e,n="is invalid")=>{let r=nh(e);return r.length>128&&(r=r.slice(0,128)+"..."),`The ${t.includes(".")?"property":"argument"} '${t}' ${n}. Received ${r}`},TypeError);Rn("ERR_INVALID_RETURN_VALUE",(t,e,n)=>{var r;let i=n!=null&&(r=n.constructor)!==null&&r!==void 0&&r.name?`instance of ${n.constructor.name}`:`type ${typeof n}`;return`Expected ${t} to be returned from the "${e}" function but got ${i}.`},TypeError);Rn("ERR_MISSING_ARGS",(...t)=>{Co(t.length>0,"At least one arg needs to be specified");let e,n=t.length;switch(t=(Array.isArray(t)?t:[t]).map(r=>`"${r}"`).join(" or "),n){case 1:e+=`The ${t[0]} argument`;break;case 2:e+=`The ${t[0]} and ${t[1]} arguments`;break;default:{let r=t.pop();e+=`The ${t.join(", ")}, and ${r} arguments`}break}return`${e} must be specified`},TypeError);Rn("ERR_OUT_OF_RANGE",(t,e,n)=>{Co(e,'Missing "range" argument');let r;if(Number.isInteger(n)&&Math.abs(n)>2**32)r=px(String(n));else if(typeof n=="bigint"){r=String(n);let i=BigInt(2)**BigInt(32);(n>i||n<-i)&&(r=px(r)),r+="n"}else r=nh(n);return`The value of "${t}" is out of range. It must be ${e}. Received ${r}`},RangeError);Rn("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);Rn("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);Rn("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);Rn("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);Rn("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);Rn("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Rn("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);Rn("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);Rn("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);Rn("ERR_STREAM_WRITE_AFTER_END","write after end",Error);Rn("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);Sx.exports={AbortError:Pm,aggregateTwoErrors:Tx(NZ),hideStackFrames:Tx,codes:rh}});var bx=O((Lu,wu)=>{"use strict";Object.defineProperty(Lu,"__esModule",{value:!0});var _x=new WeakMap,xm=new WeakMap;function st(t){let e=_x.get(t);return console.assert(e!=null,"'this' is expected an Event object, but got",t),e}function Rx(t){if(t.passiveListener!=null){typeof console<"u"&&typeof console.error=="function"&&console.error("Unable to preventDefault inside passive event listener invocation.",t.passiveListener);return}t.event.cancelable&&(t.canceled=!0,typeof t.event.preventDefault=="function"&&t.event.preventDefault())}function ul(t,e){_x.set(this,{eventTarget:t,event:e,eventPhase:2,currentTarget:t,canceled:!1,stopped:!1,immediateStopped:!1,passiveListener:null,timeStamp:e.timeStamp||Date.now()}),Object.defineProperty(this,"isTrusted",{value:!1,enumerable:!0});let n=Object.keys(e);for(let r=0;r<n.length;++r){let i=n[r];i in this||Object.defineProperty(this,i,Nx(i))}}ul.prototype={get type(){return st(this).event.type},get target(){return st(this).eventTarget},get currentTarget(){return st(this).currentTarget},composedPath(){let t=st(this).currentTarget;return t==null?[]:[t]},get NONE(){return 0},get CAPTURING_PHASE(){return 1},get AT_TARGET(){return 2},get BUBBLING_PHASE(){return 3},get eventPhase(){return st(this).eventPhase},stopPropagation(){let t=st(this);t.stopped=!0,typeof t.event.stopPropagation=="function"&&t.event.stopPropagation()},stopImmediatePropagation(){let t=st(this);t.stopped=!0,t.immediateStopped=!0,typeof t.event.stopImmediatePropagation=="function"&&t.event.stopImmediatePropagation()},get bubbles(){return!!st(this).event.bubbles},get cancelable(){return!!st(this).event.cancelable},preventDefault(){Rx(st(this))},get defaultPrevented(){return st(this).canceled},get composed(){return!!st(this).event.composed},get timeStamp(){return st(this).timeStamp},get srcElement(){return st(this).eventTarget},get cancelBubble(){return st(this).stopped},set cancelBubble(t){if(!t)return;let e=st(this);e.stopped=!0,typeof e.event.cancelBubble=="boolean"&&(e.event.cancelBubble=!0)},get returnValue(){return!st(this).canceled},set returnValue(t){t||Rx(st(this))},initEvent(){}};Object.defineProperty(ul.prototype,"constructor",{value:ul,configurable:!0,writable:!0});typeof window<"u"&&typeof window.Event<"u"&&(Object.setPrototypeOf(ul.prototype,window.Event.prototype),xm.set(window.Event.prototype,ul));function Nx(t){return{get(){return st(this).event[t]},set(e){st(this).event[t]=e},configurable:!0,enumerable:!0}}function OZ(t){return{value(){let e=st(this).event;return e[t].apply(e,arguments)},configurable:!0,enumerable:!0}}function CZ(t,e){let n=Object.keys(e);if(n.length===0)return t;function r(i,s){t.call(this,i,s)}r.prototype=Object.create(t.prototype,{constructor:{value:r,configurable:!0,writable:!0}});for(let i=0;i<n.length;++i){let s=n[i];if(!(s in t.prototype)){let a=typeof Object.getOwnPropertyDescriptor(e,s).value=="function";Object.defineProperty(r.prototype,s,a?OZ(s):Nx(s))}}return r}function Ox(t){if(t==null||t===Object.prototype)return ul;let e=xm.get(t);return e==null&&(e=CZ(Ox(Object.getPrototypeOf(t)),t),xm.set(t,e)),e}function bZ(t,e){let n=Ox(Object.getPrototypeOf(e));return new n(t,e)}function yZ(t){return st(t).immediateStopped}function wZ(t,e){st(t).eventPhase=e}function LZ(t,e){st(t).currentTarget=e}function Ax(t,e){st(t).passiveListener=e}var Cx=new WeakMap,mx=1,gx=2,ih=3;function sh(t){return t!==null&&typeof t=="object"}function yu(t){let e=Cx.get(t);if(e==null)throw new TypeError("'this' is expected an EventTarget object, but got another value.");return e}function DZ(t){return{get(){let n=yu(this).get(t);for(;n!=null;){if(n.listenerType===ih)return n.listener;n=n.next}return null},set(e){typeof e!="function"&&!sh(e)&&(e=null);let n=yu(this),r=null,i=n.get(t);for(;i!=null;)i.listenerType===ih?r!==null?r.next=i.next:i.next!==null?n.set(t,i.next):n.delete(t):r=i,i=i.next;if(e!==null){let s={listener:e,listenerType:ih,passive:!1,once:!1,next:null};r===null?n.set(t,s):r.next=s}},configurable:!0,enumerable:!0}}function vm(t,e){Object.defineProperty(t,`on${e}`,DZ(e))}function Ix(t){function e(){Br.call(this)}e.prototype=Object.create(Br.prototype,{constructor:{value:e,configurable:!0,writable:!0}});for(let n=0;n<t.length;++n)vm(e.prototype,t[n]);return e}function Br(){if(this instanceof Br){Cx.set(this,new Map);return}if(arguments.length===1&&Array.isArray(arguments[0]))return Ix(arguments[0]);if(arguments.length>0){let t=new Array(arguments.length);for(let e=0;e<arguments.length;++e)t[e]=arguments[e];return Ix(t)}throw new TypeError("Cannot call a class as a function")}Br.prototype={addEventListener(t,e,n){if(e==null)return;if(typeof e!="function"&&!sh(e))throw new TypeError("'listener' should be a function or an object.");let r=yu(this),i=sh(n),o=(i?!!n.capture:!!n)?mx:gx,a={listener:e,listenerType:o,passive:i&&!!n.passive,once:i&&!!n.once,next:null},l=r.get(t);if(l===void 0){r.set(t,a);return}let c=null;for(;l!=null;){if(l.listener===e&&l.listenerType===o)return;c=l,l=l.next}c.next=a},removeEventListener(t,e,n){if(e==null)return;let r=yu(this),s=(sh(n)?!!n.capture:!!n)?mx:gx,o=null,a=r.get(t);for(;a!=null;){if(a.listener===e&&a.listenerType===s){o!==null?o.next=a.next:a.next!==null?r.set(t,a.next):r.delete(t);return}o=a,a=a.next}},dispatchEvent(t){if(t==null||typeof t.type!="string")throw new TypeError('"event.type" should be a string.');let e=yu(this),n=t.type,r=e.get(n);if(r==null)return!0;let i=bZ(this,t),s=null;for(;r!=null;){if(r.once?s!==null?s.next=r.next:r.next!==null?e.set(n,r.next):e.delete(n):s=r,Ax(i,r.passive?r.listener:null),typeof r.listener=="function")try{r.listener.call(this,i)}catch(o){typeof console<"u"&&typeof console.error=="function"&&console.error(o)}else r.listenerType!==ih&&typeof r.listener.handleEvent=="function"&&r.listener.handleEvent(i);if(yZ(i))break;r=r.next}return Ax(i,null),wZ(i,0),LZ(i,null),!i.defaultPrevented}};Object.defineProperty(Br.prototype,"constructor",{value:Br,configurable:!0,writable:!0});typeof window<"u"&&typeof window.EventTarget<"u"&&Object.setPrototypeOf(Br.prototype,window.EventTarget.prototype);Lu.defineEventAttribute=vm;Lu.EventTarget=Br;Lu.default=Br;wu.exports=Br;wu.exports.EventTarget=wu.exports.default=Br;wu.exports.defineEventAttribute=vm});var Dt=O((Pu,Du)=>{"use strict";Object.defineProperty(Pu,"__esModule",{value:!0});var Mm=bx(),Us=class extends Mm.EventTarget{constructor(){throw super(),new TypeError("AbortSignal cannot be constructed directly")}get aborted(){let e=oh.get(this);if(typeof e!="boolean")throw new TypeError(`Expected 'this' to be an 'AbortSignal' object, but got ${this===null?"null":typeof this}`);return e}};Mm.defineEventAttribute(Us.prototype,"abort");function PZ(){let t=Object.create(Us.prototype);return Mm.EventTarget.call(t),oh.set(t,!1),t}function xZ(t){oh.get(t)===!1&&(oh.set(t,!0),t.dispatchEvent({type:"abort"}))}var oh=new WeakMap;Object.defineProperties(Us.prototype,{aborted:{enumerable:!0}});typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Us.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortSignal"});var Bs=class{constructor(){wx.set(this,PZ())}get signal(){return yx(this)}abort(){xZ(yx(this))}},wx=new WeakMap;function yx(t){let e=wx.get(t);if(e==null)throw new TypeError(`Expected 'this' to be an 'AbortController' object, but got ${t===null?"null":typeof t}`);return e}Object.defineProperties(Bs.prototype,{signal:{enumerable:!0},abort:{enumerable:!0}});typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Bs.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortController"});Pu.AbortController=Bs;Pu.AbortSignal=Us;Pu.default=Bs;Du.exports=Bs;Du.exports.AbortController=Du.exports.default=Bs;Du.exports.AbortSignal=Us});var $n=O((kxe,Bm)=>{"use strict";var vZ=require("buffer"),{format:MZ,inspect:UZ}=Dm(),{codes:{ERR_INVALID_ARG_TYPE:Um}}=Ln(),{kResistStopPropagation:BZ,AggregateError:FZ,SymbolDispose:HZ}=dt(),GZ=globalThis.AbortSignal||Dt().AbortSignal,$Z=globalThis.AbortController||Dt().AbortController,WZ=Object.getPrototypeOf(async function(){}).constructor,Lx=globalThis.Blob||vZ.Blob,kZ=typeof Lx<"u"?function(e){return e instanceof Lx}:function(e){return!1},Dx=(t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new Um(e,"AbortSignal",t)},YZ=(t,e)=>{if(typeof t!="function")throw new Um(e,"Function",t)};Bm.exports={AggregateError:FZ,kEmptyObject:Object.freeze({}),once(t){let e=!1;return function(...n){e||(e=!0,t.apply(this,n))}},createDeferredPromise:function(){let t,e;return{promise:new Promise((r,i)=>{t=r,e=i}),resolve:t,reject:e}},promisify(t){return new Promise((e,n)=>{t((r,...i)=>r?n(r):e(...i))})},debuglog(){return function(){}},format:MZ,inspect:UZ,types:{isAsyncFunction(t){return t instanceof WZ},isArrayBufferView(t){return ArrayBuffer.isView(t)}},isBlob:kZ,deprecate(t,e){return t},addAbortListener:require("events").addAbortListener||function(e,n){if(e===void 0)throw new Um("signal","AbortSignal",e);Dx(e,"signal"),YZ(n,"listener");let r;return e.aborted?queueMicrotask(()=>n()):(e.addEventListener("abort",n,{__proto__:null,once:!0,[BZ]:!0}),r=()=>{e.removeEventListener("abort",n)}),{__proto__:null,[HZ](){var i;(i=r)===null||i===void 0||i()}}},AbortSignalAny:GZ.any||function(e){if(e.length===1)return e[0];let n=new $Z,r=()=>n.abort();return e.forEach(i=>{Dx(i,"signals"),i.addEventListener("abort",r,{once:!0})}),n.signal.addEventListener("abort",()=>{e.forEach(i=>i.removeEventListener("abort",r))},{once:!0}),n.signal}};Bm.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")});var fl=O((Yxe,$x)=>{"use strict";var{ArrayIsArray:Hm,ArrayPrototypeIncludes:Mx,ArrayPrototypeJoin:Ux,ArrayPrototypeMap:VZ,NumberIsInteger:Gm,NumberIsNaN:qZ,NumberMAX_SAFE_INTEGER:XZ,NumberMIN_SAFE_INTEGER:zZ,NumberParseInt:jZ,ObjectPrototypeHasOwnProperty:KZ,RegExpPrototypeExec:Bx,String:JZ,StringPrototypeToUpperCase:QZ,StringPrototypeTrim:ZZ}=dt(),{hideStackFrames:Ar,codes:{ERR_SOCKET_BAD_PORT:eee,ERR_INVALID_ARG_TYPE:Dn,ERR_INVALID_ARG_VALUE:dl,ERR_OUT_OF_RANGE:bo,ERR_UNKNOWN_SIGNAL:Px}}=Ln(),{normalizeEncoding:tee}=$n(),{isAsyncFunction:nee,isArrayBufferView:ree}=$n().types,xx={};function iee(t){return t===(t|0)}function see(t){return t===t>>>0}var oee=/^[0-7]+$/,aee="must be a 32-bit unsigned integer or an octal string";function lee(t,e,n){if(typeof t>"u"&&(t=n),typeof t=="string"){if(Bx(oee,t)===null)throw new dl(e,t,aee);t=jZ(t,8)}return Fx(t,e),t}var cee=Ar((t,e,n=zZ,r=XZ)=>{if(typeof t!="number")throw new Dn(e,"number",t);if(!Gm(t))throw new bo(e,"an integer",t);if(t<n||t>r)throw new bo(e,`>= ${n} && <= ${r}`,t)}),uee=Ar((t,e,n=-2147483648,r=2147483647)=>{if(typeof t!="number")throw new Dn(e,"number",t);if(!Gm(t))throw new bo(e,"an integer",t);if(t<n||t>r)throw new bo(e,`>= ${n} && <= ${r}`,t)}),Fx=Ar((t,e,n=!1)=>{if(typeof t!="number")throw new Dn(e,"number",t);if(!Gm(t))throw new bo(e,"an integer",t);let r=n?1:0,i=4294967295;if(t<r||t>i)throw new bo(e,`>= ${r} && <= ${i}`,t)});function $m(t,e){if(typeof t!="string")throw new Dn(e,"string",t)}function dee(t,e,n=void 0,r){if(typeof t!="number")throw new Dn(e,"number",t);if(n!=null&&t<n||r!=null&&t>r||(n!=null||r!=null)&&qZ(t))throw new bo(e,`${n!=null?`>= ${n}`:""}${n!=null&&r!=null?" && ":""}${r!=null?`<= ${r}`:""}`,t)}var fee=Ar((t,e,n)=>{if(!Mx(n,t)){let i="must be one of: "+Ux(VZ(n,s=>typeof s=="string"?`'${s}'`:JZ(s)),", ");throw new dl(e,t,i)}});function Hx(t,e){if(typeof t!="boolean")throw new Dn(e,"boolean",t)}function Fm(t,e,n){return t==null||!KZ(t,e)?n:t[e]}var Eee=Ar((t,e,n=null)=>{let r=Fm(n,"allowArray",!1),i=Fm(n,"allowFunction",!1);if(!Fm(n,"nullable",!1)&&t===null||!r&&Hm(t)||typeof t!="object"&&(!i||typeof t!="function"))throw new Dn(e,"Object",t)}),hee=Ar((t,e)=>{if(t!=null&&typeof t!="object"&&typeof t!="function")throw new Dn(e,"a dictionary",t)}),ah=Ar((t,e,n=0)=>{if(!Hm(t))throw new Dn(e,"Array",t);if(t.length<n){let r=`must be longer than ${n}`;throw new dl(e,t,r)}});function pee(t,e){ah(t,e);for(let n=0;n<t.length;n++)$m(t[n],`${e}[${n}]`)}function Tee(t,e){ah(t,e);for(let n=0;n<t.length;n++)Hx(t[n],`${e}[${n}]`)}function See(t,e){ah(t,e);for(let n=0;n<t.length;n++){let r=t[n],i=`${e}[${n}]`;if(r==null)throw new Dn(i,"AbortSignal",r);Gx(r,i)}}function Ree(t,e="signal"){if($m(t,e),xx[t]===void 0)throw xx[QZ(t)]!==void 0?new Px(t+" (signals must use all capital letters)"):new Px(t)}var Aee=Ar((t,e="buffer")=>{if(!ree(t))throw new Dn(e,["Buffer","TypedArray","DataView"],t)});function mee(t,e){let n=tee(e),r=t.length;if(n==="hex"&&r%2!==0)throw new dl("encoding",e,`is invalid for data of length ${r}`)}function gee(t,e="Port",n=!0){if(typeof t!="number"&&typeof t!="string"||typeof t=="string"&&ZZ(t).length===0||+t!==+t>>>0||t>65535||t===0&&!n)throw new eee(e,t,n);return t|0}var Gx=Ar((t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new Dn(e,"AbortSignal",t)}),Iee=Ar((t,e)=>{if(typeof t!="function")throw new Dn(e,"Function",t)}),_ee=Ar((t,e)=>{if(typeof t!="function"||nee(t))throw new Dn(e,"Function",t)}),Nee=Ar((t,e)=>{if(t!==void 0)throw new Dn(e,"undefined",t)});function Oee(t,e,n){if(!Mx(n,t))throw new Dn(e,`('${Ux(n,"|")}')`,t)}var Cee=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function vx(t,e){if(typeof t>"u"||!Bx(Cee,t))throw new dl(e,t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function bee(t){if(typeof t=="string")return vx(t,"hints"),t;if(Hm(t)){let e=t.length,n="";if(e===0)return n;for(let r=0;r<e;r++){let i=t[r];vx(i,"hints"),n+=i,r!==e-1&&(n+=", ")}return n}throw new dl("hints",t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}$x.exports={isInt32:iee,isUint32:see,parseFileMode:lee,validateArray:ah,validateStringArray:pee,validateBooleanArray:Tee,validateAbortSignalArray:See,validateBoolean:Hx,validateBuffer:Aee,validateDictionary:hee,validateEncoding:mee,validateFunction:Iee,validateInt32:uee,validateInteger:cee,validateNumber:dee,validateObject:Eee,validateOneOf:fee,validatePlainFunction:_ee,validatePort:gee,validateSignalName:Ree,validateString:$m,validateUint32:Fx,validateUndefined:Nee,validateUnion:Oee,validateAbortSignal:Gx,validateLinkHeaderValue:bee}});var Je=O((Vxe,Wx)=>{Wx.exports=global.process});var oi=O((qxe,rv)=>{"use strict";var{SymbolAsyncIterator:kx,SymbolIterator:Yx,SymbolFor:yo}=dt(),Vx=yo("nodejs.stream.destroyed"),qx=yo("nodejs.stream.errored"),Wm=yo("nodejs.stream.readable"),km=yo("nodejs.stream.writable"),Xx=yo("nodejs.stream.disturbed"),yee=yo("nodejs.webstream.isClosedPromise"),wee=yo("nodejs.webstream.controllerErrorFunction");function lh(t,e=!1){var n;return!!(t&&typeof t.pipe=="function"&&typeof t.on=="function"&&(!e||typeof t.pause=="function"&&typeof t.resume=="function")&&(!t._writableState||((n=t._readableState)===null||n===void 0?void 0:n.readable)!==!1)&&(!t._writableState||t._readableState))}function ch(t){var e;return!!(t&&typeof t.write=="function"&&typeof t.on=="function"&&(!t._readableState||((e=t._writableState)===null||e===void 0?void 0:e.writable)!==!1))}function Lee(t){return!!(t&&typeof t.pipe=="function"&&t._readableState&&typeof t.on=="function"&&typeof t.write=="function")}function si(t){return t&&(t._readableState||t._writableState||typeof t.write=="function"&&typeof t.on=="function"||typeof t.pipe=="function"&&typeof t.on=="function")}function zx(t){return!!(t&&!si(t)&&typeof t.pipeThrough=="function"&&typeof t.getReader=="function"&&typeof t.cancel=="function")}function jx(t){return!!(t&&!si(t)&&typeof t.getWriter=="function"&&typeof t.abort=="function")}function Kx(t){return!!(t&&!si(t)&&typeof t.readable=="object"&&typeof t.writable=="object")}function Dee(t){return zx(t)||jx(t)||Kx(t)}function Pee(t,e){return t==null?!1:e===!0?typeof t[kx]=="function":e===!1?typeof t[Yx]=="function":typeof t[kx]=="function"||typeof t[Yx]=="function"}function uh(t){if(!si(t))return null;let e=t._writableState,n=t._readableState,r=e||n;return!!(t.destroyed||t[Vx]||r!=null&&r.destroyed)}function Jx(t){if(!ch(t))return null;if(t.writableEnded===!0)return!0;let e=t._writableState;return e!=null&&e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function xee(t,e){if(!ch(t))return null;if(t.writableFinished===!0)return!0;let n=t._writableState;return n!=null&&n.errored?!1:typeof n?.finished!="boolean"?null:!!(n.finished||e===!1&&n.ended===!0&&n.length===0)}function vee(t){if(!lh(t))return null;if(t.readableEnded===!0)return!0;let e=t._readableState;return!e||e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function Qx(t,e){if(!lh(t))return null;let n=t._readableState;return n!=null&&n.errored?!1:typeof n?.endEmitted!="boolean"?null:!!(n.endEmitted||e===!1&&n.ended===!0&&n.length===0)}function Zx(t){return t&&t[Wm]!=null?t[Wm]:typeof t?.readable!="boolean"?null:uh(t)?!1:lh(t)&&t.readable&&!Qx(t)}function ev(t){return t&&t[km]!=null?t[km]:typeof t?.writable!="boolean"?null:uh(t)?!1:ch(t)&&t.writable&&!Jx(t)}function Mee(t,e){return si(t)?uh(t)?!0:!(e?.readable!==!1&&Zx(t)||e?.writable!==!1&&ev(t)):null}function Uee(t){var e,n;return si(t)?t.writableErrored?t.writableErrored:(e=(n=t._writableState)===null||n===void 0?void 0:n.errored)!==null&&e!==void 0?e:null:null}function Bee(t){var e,n;return si(t)?t.readableErrored?t.readableErrored:(e=(n=t._readableState)===null||n===void 0?void 0:n.errored)!==null&&e!==void 0?e:null:null}function Fee(t){if(!si(t))return null;if(typeof t.closed=="boolean")return t.closed;let e=t._writableState,n=t._readableState;return typeof e?.closed=="boolean"||typeof n?.closed=="boolean"?e?.closed||n?.closed:typeof t._closed=="boolean"&&tv(t)?t._closed:null}function tv(t){return typeof t._closed=="boolean"&&typeof t._defaultKeepAlive=="boolean"&&typeof t._removedConnection=="boolean"&&typeof t._removedContLen=="boolean"}function nv(t){return typeof t._sent100=="boolean"&&tv(t)}function Hee(t){var e;return typeof t._consuming=="boolean"&&typeof t._dumped=="boolean"&&((e=t.req)===null||e===void 0?void 0:e.upgradeOrConnect)===void 0}function Gee(t){if(!si(t))return null;let e=t._writableState,n=t._readableState,r=e||n;return!r&&nv(t)||!!(r&&r.autoDestroy&&r.emitClose&&r.closed===!1)}function $ee(t){var e;return!!(t&&((e=t[Xx])!==null&&e!==void 0?e:t.readableDidRead||t.readableAborted))}function Wee(t){var e,n,r,i,s,o,a,l,c,u;return!!(t&&((e=(n=(r=(i=(s=(o=t[qx])!==null&&o!==void 0?o:t.readableErrored)!==null&&s!==void 0?s:t.writableErrored)!==null&&i!==void 0?i:(a=t._readableState)===null||a===void 0?void 0:a.errorEmitted)!==null&&r!==void 0?r:(l=t._writableState)===null||l===void 0?void 0:l.errorEmitted)!==null&&n!==void 0?n:(c=t._readableState)===null||c===void 0?void 0:c.errored)!==null&&e!==void 0?e:!((u=t._writableState)===null||u===void 0)&&u.errored))}rv.exports={isDestroyed:uh,kIsDestroyed:Vx,isDisturbed:$ee,kIsDisturbed:Xx,isErrored:Wee,kIsErrored:qx,isReadable:Zx,kIsReadable:Wm,kIsClosedPromise:yee,kControllerErrorFunction:wee,kIsWritable:km,isClosed:Fee,isDuplexNodeStream:Lee,isFinished:Mee,isIterable:Pee,isReadableNodeStream:lh,isReadableStream:zx,isReadableEnded:vee,isReadableFinished:Qx,isReadableErrored:Bee,isNodeStream:si,isWebStream:Dee,isWritable:ev,isWritableNodeStream:ch,isWritableStream:jx,isWritableEnded:Jx,isWritableFinished:xee,isWritableErrored:Uee,isServerRequest:Hee,isServerResponse:nv,willEmitClose:Gee,isTransformStream:Kx}});var zi=O((Xxe,zm)=>{"use strict";var Fs=Je(),{AbortError:fv,codes:kee}=Ln(),{ERR_INVALID_ARG_TYPE:Yee,ERR_STREAM_PREMATURE_CLOSE:iv}=kee,{kEmptyObject:Vm,once:qm}=$n(),{validateAbortSignal:Vee,validateFunction:qee,validateObject:Xee,validateBoolean:zee}=fl(),{Promise:jee,PromisePrototypeThen:Kee,SymbolDispose:Ev}=dt(),{isClosed:Jee,isReadable:sv,isReadableNodeStream:Ym,isReadableStream:Qee,isReadableFinished:ov,isReadableErrored:av,isWritable:lv,isWritableNodeStream:cv,isWritableStream:Zee,isWritableFinished:uv,isWritableErrored:dv,isNodeStream:ete,willEmitClose:tte,kIsClosedPromise:nte}=oi(),El;function rte(t){return t.setHeader&&typeof t.abort=="function"}var Xm=()=>{};function hv(t,e,n){var r,i;if(arguments.length===2?(n=e,e=Vm):e==null?e=Vm:Xee(e,"options"),qee(n,"callback"),Vee(e.signal,"options.signal"),n=qm(n),Qee(t)||Zee(t))return ite(t,e,n);if(!ete(t))throw new Yee("stream",["ReadableStream","WritableStream","Stream"],t);let s=(r=e.readable)!==null&&r!==void 0?r:Ym(t),o=(i=e.writable)!==null&&i!==void 0?i:cv(t),a=t._writableState,l=t._readableState,c=()=>{t.writable||E()},u=tte(t)&&Ym(t)===s&&cv(t)===o,d=uv(t,!1),E=()=>{d=!0,t.destroyed&&(u=!1),!(u&&(!t.readable||s))&&(!s||f)&&n.call(t)},f=ov(t,!1),p=()=>{f=!0,t.destroyed&&(u=!1),!(u&&(!t.writable||o))&&(!o||d)&&n.call(t)},h=I=>{n.call(t,I)},T=Jee(t),S=()=>{T=!0;let I=dv(t)||av(t);if(I&&typeof I!="boolean")return n.call(t,I);if(s&&!f&&Ym(t,!0)&&!ov(t,!1))return n.call(t,new iv);if(o&&!d&&!uv(t,!1))return n.call(t,new iv);n.call(t)},m=()=>{T=!0;let I=dv(t)||av(t);if(I&&typeof I!="boolean")return n.call(t,I);n.call(t)},R=()=>{t.req.on("finish",E)};rte(t)?(t.on("complete",E),u||t.on("abort",S),t.req?R():t.on("request",R)):o&&!a&&(t.on("end",c),t.on("close",c)),!u&&typeof t.aborted=="boolean"&&t.on("aborted",S),t.on("end",p),t.on("finish",E),e.error!==!1&&t.on("error",h),t.on("close",S),T?Fs.nextTick(S):a!=null&&a.errorEmitted||l!=null&&l.errorEmitted?u||Fs.nextTick(m):(!s&&(!u||sv(t))&&(d||lv(t)===!1)||!o&&(!u||lv(t))&&(f||sv(t)===!1)||l&&t.req&&t.aborted)&&Fs.nextTick(m);let A=()=>{n=Xm,t.removeListener("aborted",S),t.removeListener("complete",E),t.removeListener("abort",S),t.removeListener("request",R),t.req&&t.req.removeListener("finish",E),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",E),t.removeListener("end",p),t.removeListener("error",h),t.removeListener("close",S)};if(e.signal&&!T){let I=()=>{let w=n;A(),w.call(t,new fv(void 0,{cause:e.signal.reason}))};if(e.signal.aborted)Fs.nextTick(I);else{El=El||$n().addAbortListener;let w=El(e.signal,I),g=n;n=qm((...L)=>{w[Ev](),g.apply(t,L)})}}return A}function ite(t,e,n){let r=!1,i=Xm;if(e.signal)if(i=()=>{r=!0,n.call(t,new fv(void 0,{cause:e.signal.reason}))},e.signal.aborted)Fs.nextTick(i);else{El=El||$n().addAbortListener;let o=El(e.signal,i),a=n;n=qm((...l)=>{o[Ev](),a.apply(t,l)})}let s=(...o)=>{r||Fs.nextTick(()=>n.apply(t,o))};return Kee(t[nte].promise,s,s),Xm}function ste(t,e){var n;let r=!1;return e===null&&(e=Vm),(n=e)!==null&&n!==void 0&&n.cleanup&&(zee(e.cleanup,"cleanup"),r=e.cleanup),new jee((i,s)=>{let o=hv(t,e,a=>{r&&o(),a?s(a):i()})})}zm.exports=hv;zm.exports.finished=ste});var wo=O((zxe,Iv)=>{"use strict";var ai=Je(),{aggregateTwoErrors:ote,codes:{ERR_MULTIPLE_CALLBACK:ate},AbortError:lte}=Ln(),{Symbol:Sv}=dt(),{kIsDestroyed:cte,isDestroyed:ute,isFinished:dte,isServerRequest:fte}=oi(),Rv=Sv("kDestroy"),jm=Sv("kConstruct");function Av(t,e,n){t&&(t.stack,e&&!e.errored&&(e.errored=t),n&&!n.errored&&(n.errored=t))}function Ete(t,e){let n=this._readableState,r=this._writableState,i=r||n;return r!=null&&r.destroyed||n!=null&&n.destroyed?(typeof e=="function"&&e(),this):(Av(t,r,n),r&&(r.destroyed=!0),n&&(n.destroyed=!0),i.constructed?pv(this,t,e):this.once(Rv,function(s){pv(this,ote(s,t),e)}),this)}function pv(t,e,n){let r=!1;function i(s){if(r)return;r=!0;let o=t._readableState,a=t._writableState;Av(s,a,o),a&&(a.closed=!0),o&&(o.closed=!0),typeof n=="function"&&n(s),s?ai.nextTick(hte,t,s):ai.nextTick(mv,t)}try{t._destroy(e||null,i)}catch(s){i(s)}}function hte(t,e){Km(t,e),mv(t)}function mv(t){let e=t._readableState,n=t._writableState;n&&(n.closeEmitted=!0),e&&(e.closeEmitted=!0),(n!=null&&n.emitClose||e!=null&&e.emitClose)&&t.emit("close")}function Km(t,e){let n=t._readableState,r=t._writableState;r!=null&&r.errorEmitted||n!=null&&n.errorEmitted||(r&&(r.errorEmitted=!0),n&&(n.errorEmitted=!0),t.emit("error",e))}function pte(){let t=this._readableState,e=this._writableState;t&&(t.constructed=!0,t.closed=!1,t.closeEmitted=!1,t.destroyed=!1,t.errored=null,t.errorEmitted=!1,t.reading=!1,t.ended=t.readable===!1,t.endEmitted=t.readable===!1),e&&(e.constructed=!0,e.destroyed=!1,e.closed=!1,e.closeEmitted=!1,e.errored=null,e.errorEmitted=!1,e.finalCalled=!1,e.prefinished=!1,e.ended=e.writable===!1,e.ending=e.writable===!1,e.finished=e.writable===!1)}function Jm(t,e,n){let r=t._readableState,i=t._writableState;if(i!=null&&i.destroyed||r!=null&&r.destroyed)return this;r!=null&&r.autoDestroy||i!=null&&i.autoDestroy?t.destroy(e):e&&(e.stack,i&&!i.errored&&(i.errored=e),r&&!r.errored&&(r.errored=e),n?ai.nextTick(Km,t,e):Km(t,e))}function Tte(t,e){if(typeof t._construct!="function")return;let n=t._readableState,r=t._writableState;n&&(n.constructed=!1),r&&(r.constructed=!1),t.once(jm,e),!(t.listenerCount(jm)>1)&&ai.nextTick(Ste,t)}function Ste(t){let e=!1;function n(r){if(e){Jm(t,r??new ate);return}e=!0;let i=t._readableState,s=t._writableState,o=s||i;i&&(i.constructed=!0),s&&(s.constructed=!0),o.destroyed?t.emit(Rv,r):r?Jm(t,r,!0):ai.nextTick(Rte,t)}try{t._construct(r=>{ai.nextTick(n,r)})}catch(r){ai.nextTick(n,r)}}function Rte(t){t.emit(jm)}function Tv(t){return t?.setHeader&&typeof t.abort=="function"}function gv(t){t.emit("close")}function Ate(t,e){t.emit("error",e),ai.nextTick(gv,t)}function mte(t,e){!t||ute(t)||(!e&&!dte(t)&&(e=new lte),fte(t)?(t.socket=null,t.destroy(e)):Tv(t)?t.abort():Tv(t.req)?t.req.abort():typeof t.destroy=="function"?t.destroy(e):typeof t.close=="function"?t.close():e?ai.nextTick(Ate,t,e):ai.nextTick(gv,t),t.destroyed||(t[cte]=!0))}Iv.exports={construct:Tte,destroyer:mte,destroy:Ete,undestroy:pte,errorOrDestroy:Jm}});var Eh=O((jxe,Nv)=>{"use strict";var{ArrayIsArray:gte,ObjectSetPrototypeOf:_v}=dt(),{EventEmitter:dh}=require("events");function fh(t){dh.call(this,t)}_v(fh.prototype,dh.prototype);_v(fh,dh);fh.prototype.pipe=function(t,e){let n=this;function r(u){t.writable&&t.write(u)===!1&&n.pause&&n.pause()}n.on("data",r);function i(){n.readable&&n.resume&&n.resume()}t.on("drain",i),!t._isStdio&&(!e||e.end!==!1)&&(n.on("end",o),n.on("close",a));let s=!1;function o(){s||(s=!0,t.end())}function a(){s||(s=!0,typeof t.destroy=="function"&&t.destroy())}function l(u){c(),dh.listenerCount(this,"error")===0&&this.emit("error",u)}Qm(n,"error",l),Qm(t,"error",l);function c(){n.removeListener("data",r),t.removeListener("drain",i),n.removeListener("end",o),n.removeListener("close",a),n.removeListener("error",l),t.removeListener("error",l),n.removeListener("end",c),n.removeListener("close",c),t.removeListener("close",c)}return n.on("end",c),n.on("close",c),t.on("close",c),t.emit("pipe",n),t};function Qm(t,e,n){if(typeof t.prependListener=="function")return t.prependListener(e,n);!t._events||!t._events[e]?t.on(e,n):gte(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]}Nv.exports={Stream:fh,prependListener:Qm}});var xu=O((Kxe,hh)=>{"use strict";var{SymbolDispose:Ite}=dt(),{AbortError:Ov,codes:_te}=Ln(),{isNodeStream:Cv,isWebStream:Nte,kControllerErrorFunction:Ote}=oi(),Cte=zi(),{ERR_INVALID_ARG_TYPE:bv}=_te,Zm,bte=(t,e)=>{if(typeof t!="object"||!("aborted"in t))throw new bv(e,"AbortSignal",t)};hh.exports.addAbortSignal=function(e,n){if(bte(e,"signal"),!Cv(n)&&!Nte(n))throw new bv("stream",["ReadableStream","WritableStream","Stream"],n);return hh.exports.addAbortSignalNoValidate(e,n)};hh.exports.addAbortSignalNoValidate=function(t,e){if(typeof t!="object"||!("aborted"in t))return e;let n=Cv(e)?()=>{e.destroy(new Ov(void 0,{cause:t.reason}))}:()=>{e[Ote](new Ov(void 0,{cause:t.reason}))};if(t.aborted)n();else{Zm=Zm||$n().addAbortListener;let r=Zm(t,n);Cte(e,r[Ite])}return e}});var Lv=O((Qxe,wv)=>{"use strict";var{StringPrototypeSlice:yv,SymbolIterator:yte,TypedArrayPrototypeSet:ph,Uint8Array:wte}=dt(),{Buffer:eg}=require("buffer"),{inspect:Lte}=$n();wv.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){let n={data:e,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}unshift(e){let n={data:e,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}shift(){if(this.length===0)return;let e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return"";let n=this.head,r=""+n.data;for(;(n=n.next)!==null;)r+=e+n.data;return r}concat(e){if(this.length===0)return eg.alloc(0);let n=eg.allocUnsafe(e>>>0),r=this.head,i=0;for(;r;)ph(n,r.data,i),i+=r.data.length,r=r.next;return n}consume(e,n){let r=this.head.data;if(e<r.length){let i=r.slice(0,e);return this.head.data=r.slice(e),i}return e===r.length?this.shift():n?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[yte](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let n="",r=this.head,i=0;do{let s=r.data;if(e>s.length)n+=s,e-=s.length;else{e===s.length?(n+=s,++i,r.next?this.head=r.next:this.head=this.tail=null):(n+=yv(s,0,e),this.head=r,r.data=yv(s,e));break}++i}while((r=r.next)!==null);return this.length-=i,n}_getBuffer(e){let n=eg.allocUnsafe(e),r=e,i=this.head,s=0;do{let o=i.data;if(e>o.length)ph(n,o,r-e),e-=o.length;else{e===o.length?(ph(n,o,r-e),++s,i.next?this.head=i.next:this.head=this.tail=null):(ph(n,new wte(o.buffer,o.byteOffset,e),r-e),this.head=i,i.data=o.slice(e));break}++s}while((i=i.next)!==null);return this.length-=s,n}[Symbol.for("nodejs.util.inspect.custom")](e,n){return Lte(this,{...n,depth:0,customInspect:!1})}}});var vu=O((Zxe,vv)=>{"use strict";var{MathFloor:Dte,NumberIsInteger:Pte}=dt(),{validateInteger:xte}=fl(),{ERR_INVALID_ARG_VALUE:vte}=Ln().codes,Dv=16*1024,Pv=16;function Mte(t,e,n){return t.highWaterMark!=null?t.highWaterMark:e?t[n]:null}function xv(t){return t?Pv:Dv}function Ute(t,e){xte(e,"value",0),t?Pv=e:Dv=e}function Bte(t,e,n,r){let i=Mte(e,r,n);if(i!=null){if(!Pte(i)||i<0){let s=r?`options.${n}`:"options.highWaterMark";throw new vte(s,i)}return Dte(i)}return xv(t.objectMode)}vv.exports={getHighWaterMark:Bte,getDefaultHighWaterMark:xv,setDefaultHighWaterMark:Ute}});var Bv=O((tg,Uv)=>{var Th=require("buffer"),li=Th.Buffer;function Mv(t,e){for(var n in t)e[n]=t[n]}li.from&&li.alloc&&li.allocUnsafe&&li.allocUnsafeSlow?Uv.exports=Th:(Mv(Th,tg),tg.Buffer=Lo);function Lo(t,e,n){return li(t,e,n)}Lo.prototype=Object.create(li.prototype);Mv(li,Lo);Lo.from=function(t,e,n){if(typeof t=="number")throw new TypeError("Argument must not be a number");return li(t,e,n)};Lo.alloc=function(t,e,n){if(typeof t!="number")throw new TypeError("Argument must be a number");var r=li(t);return e!==void 0?typeof n=="string"?r.fill(e,n):r.fill(e):r.fill(0),r};Lo.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return li(t)};Lo.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Th.SlowBuffer(t)}});var Uu=O(Hv=>{"use strict";var rg=Bv().Buffer,Fv=rg.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Fte(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function Hte(t){var e=Fte(t);if(typeof e!="string"&&(rg.isEncoding===Fv||!Fv(t)))throw new Error("Unknown encoding: "+t);return e||t}Hv.StringDecoder=Mu;function Mu(t){this.encoding=Hte(t);var e;switch(this.encoding){case"utf16le":this.text=Vte,this.end=qte,e=4;break;case"utf8":this.fillLast=Wte,e=4;break;case"base64":this.text=Xte,this.end=zte,e=3;break;default:this.write=jte,this.end=Kte;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=rg.allocUnsafe(e)}Mu.prototype.write=function(t){if(t.length===0)return"";var e,n;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""};Mu.prototype.end=Yte;Mu.prototype.text=kte;Mu.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function ng(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function Gte(t,e,n){var r=e.length-1;if(r<n)return 0;var i=ng(e[r]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--r<n||i===-2?0:(i=ng(e[r]),i>=0?(i>0&&(t.lastNeed=i-2),i):--r<n||i===-2?0:(i=ng(e[r]),i>=0?(i>0&&(i===2?i=0:t.lastNeed=i-3),i):0))}function $te(t,e,n){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function Wte(t){var e=this.lastTotal-this.lastNeed,n=$te(this,t,e);if(n!==void 0)return n;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function kte(t,e){var n=Gte(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var r=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)}function Yte(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function Vte(t,e){if((t.length-e)%2===0){var n=t.toString("utf16le",e);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function qte(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function Xte(t,e){var n=(t.length-e)%3;return n===0?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,n===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function zte(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function jte(t){return t.toString(this.encoding)}function Kte(t){return t&&t.length?this.write(t):""}});var ig=O((tve,kv)=>{"use strict";var Gv=Je(),{PromisePrototypeThen:Jte,SymbolAsyncIterator:$v,SymbolIterator:Wv}=dt(),{Buffer:Qte}=require("buffer"),{ERR_INVALID_ARG_TYPE:Zte,ERR_STREAM_NULL_VALUES:ene}=Ln().codes;function tne(t,e,n){let r;if(typeof e=="string"||e instanceof Qte)return new t({objectMode:!0,...n,read(){this.push(e),this.push(null)}});let i;if(e&&e[$v])i=!0,r=e[$v]();else if(e&&e[Wv])i=!1,r=e[Wv]();else throw new Zte("iterable",["Iterable"],e);let s=new t({objectMode:!0,highWaterMark:1,...n}),o=!1;s._read=function(){o||(o=!0,l())},s._destroy=function(c,u){Jte(a(c),()=>Gv.nextTick(u,c),d=>Gv.nextTick(u,d||c))};async function a(c){let u=c!=null,d=typeof r.throw=="function";if(u&&d){let{value:E,done:f}=await r.throw(c);if(await E,f)return}if(typeof r.return=="function"){let{value:E}=await r.return();await E}}async function l(){for(;;){try{let{value:c,done:u}=i?await r.next():r.next();if(u)s.push(null);else{let d=c&&typeof c.then=="function"?await c:c;if(d===null)throw o=!1,new ene;if(s.push(d))continue;o=!1}}catch(c){s.destroy(c)}break}}return s}kv.exports=tne});var Fu=O((nve,aM)=>{"use strict";var Fr=Je(),{ArrayPrototypeIndexOf:nne,NumberIsInteger:rne,NumberIsNaN:ine,NumberParseInt:sne,ObjectDefineProperties:fg,ObjectKeys:one,ObjectSetPrototypeOf:qv,Promise:Xv,SafeSet:ane,SymbolAsyncDispose:lne,SymbolAsyncIterator:cne,Symbol:une}=dt();aM.exports=ge;ge.ReadableState=mh;var{EventEmitter:dne}=require("events"),{Stream:Hs,prependListener:fne}=Eh(),{Buffer:sg}=require("buffer"),{addAbortSignal:Ene}=xu(),zv=zi(),Me=$n().debuglog("stream",t=>{Me=t}),hne=Lv(),Tl=wo(),{getHighWaterMark:pne,getDefaultHighWaterMark:Tne}=vu(),{aggregateTwoErrors:Yv,codes:{ERR_INVALID_ARG_TYPE:Sne,ERR_METHOD_NOT_IMPLEMENTED:Rne,ERR_OUT_OF_RANGE:Ane,ERR_STREAM_PUSH_AFTER_EOF:mne,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:gne},AbortError:Ine}=Ln(),{validateObject:_ne}=fl(),Do=une("kPaused"),{StringDecoder:jv}=Uu(),Nne=ig();qv(ge.prototype,Hs.prototype);qv(ge,Hs);var og=()=>{},{errorOrDestroy:hl}=Tl,pl=1,One=2,Kv=4,Bu=8,Jv=16,Sh=32,Rh=64,Qv=128,Cne=256,bne=512,yne=1024,ug=2048,dg=4096,wne=8192,Lne=16384,Dne=32768,Zv=65536,Pne=1<<17,xne=1<<18;function $t(t){return{enumerable:!1,get(){return(this.state&t)!==0},set(e){e?this.state|=t:this.state&=~t}}}fg(mh.prototype,{objectMode:$t(pl),ended:$t(One),endEmitted:$t(Kv),reading:$t(Bu),constructed:$t(Jv),sync:$t(Sh),needReadable:$t(Rh),emittedReadable:$t(Qv),readableListening:$t(Cne),resumeScheduled:$t(bne),errorEmitted:$t(yne),emitClose:$t(ug),autoDestroy:$t(dg),destroyed:$t(wne),closed:$t(Lne),closeEmitted:$t(Dne),multiAwaitDrain:$t(Zv),readingMore:$t(Pne),dataEmitted:$t(xne)});function mh(t,e,n){typeof n!="boolean"&&(n=e instanceof ci()),this.state=ug|dg|Jv|Sh,t&&t.objectMode&&(this.state|=pl),n&&t&&t.readableObjectMode&&(this.state|=pl),this.highWaterMark=t?pne(this,t,"readableHighWaterMark",n):Tne(!1),this.buffer=new hne,this.length=0,this.pipes=[],this.flowing=null,this[Do]=null,t&&t.emitClose===!1&&(this.state&=~ug),t&&t.autoDestroy===!1&&(this.state&=~dg),this.errored=null,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,t&&t.encoding&&(this.decoder=new jv(t.encoding),this.encoding=t.encoding)}function ge(t){if(!(this instanceof ge))return new ge(t);let e=this instanceof ci();this._readableState=new mh(t,this,e),t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&!e&&Ene(t.signal,this)),Hs.call(this,t),Tl.construct(this,()=>{this._readableState.needReadable&&Ah(this,this._readableState)})}ge.prototype.destroy=Tl.destroy;ge.prototype._undestroy=Tl.undestroy;ge.prototype._destroy=function(t,e){e(t)};ge.prototype[dne.captureRejectionSymbol]=function(t){this.destroy(t)};ge.prototype[lne]=function(){let t;return this.destroyed||(t=this.readableEnded?null:new Ine,this.destroy(t)),new Xv((e,n)=>zv(this,r=>r&&r!==t?n(r):e(null)))};ge.prototype.push=function(t,e){return eM(this,t,e,!1)};ge.prototype.unshift=function(t,e){return eM(this,t,e,!0)};function eM(t,e,n,r){Me("readableAddChunk",e);let i=t._readableState,s;if((i.state&pl)===0&&(typeof e=="string"?(n=n||i.defaultEncoding,i.encoding!==n&&(r&&i.encoding?e=sg.from(e,n).toString(i.encoding):(e=sg.from(e,n),n=""))):e instanceof sg?n="":Hs._isUint8Array(e)?(e=Hs._uint8ArrayToBuffer(e),n=""):e!=null&&(s=new Sne("chunk",["string","Buffer","Uint8Array"],e))),s)hl(t,s);else if(e===null)i.state&=~Bu,Une(t,i);else if((i.state&pl)!==0||e&&e.length>0)if(r)if((i.state&Kv)!==0)hl(t,new gne);else{if(i.destroyed||i.errored)return!1;ag(t,i,e,!0)}else if(i.ended)hl(t,new mne);else{if(i.destroyed||i.errored)return!1;i.state&=~Bu,i.decoder&&!n?(e=i.decoder.write(e),i.objectMode||e.length!==0?ag(t,i,e,!1):Ah(t,i)):ag(t,i,e,!1)}else r||(i.state&=~Bu,Ah(t,i));return!i.ended&&(i.length<i.highWaterMark||i.length===0)}function ag(t,e,n,r){e.flowing&&e.length===0&&!e.sync&&t.listenerCount("data")>0?((e.state&Zv)!==0?e.awaitDrainWriters.clear():e.awaitDrainWriters=null,e.dataEmitted=!0,t.emit("data",n)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),(e.state&Rh)!==0&&gh(t)),Ah(t,e)}ge.prototype.isPaused=function(){let t=this._readableState;return t[Do]===!0||t.flowing===!1};ge.prototype.setEncoding=function(t){let e=new jv(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;let n=this._readableState.buffer,r="";for(let i of n)r+=e.write(i);return n.clear(),r!==""&&n.push(r),this._readableState.length=r.length,this};var vne=1073741824;function Mne(t){if(t>vne)throw new Ane("size","<= 1GiB",t);return t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++,t}function Vv(t,e){return t<=0||e.length===0&&e.ended?0:(e.state&pl)!==0?1:ine(t)?e.flowing&&e.length?e.buffer.first().length:e.length:t<=e.length?t:e.ended?e.length:0}ge.prototype.read=function(t){Me("read",t),t===void 0?t=NaN:rne(t)||(t=sne(t,10));let e=this._readableState,n=t;if(t>e.highWaterMark&&(e.highWaterMark=Mne(t)),t!==0&&(e.state&=~Qv),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return Me("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?lg(this):gh(this),null;if(t=Vv(t,e),t===0&&e.ended)return e.length===0&&lg(this),null;let r=(e.state&Rh)!==0;if(Me("need readable",r),(e.length===0||e.length-t<e.highWaterMark)&&(r=!0,Me("length less than watermark",r)),e.ended||e.reading||e.destroyed||e.errored||!e.constructed)r=!1,Me("reading, ended or constructing",r);else if(r){Me("do read"),e.state|=Bu|Sh,e.length===0&&(e.state|=Rh);try{this._read(e.highWaterMark)}catch(s){hl(this,s)}e.state&=~Sh,e.reading||(t=Vv(n,e))}let i;return t>0?i=sM(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.multiAwaitDrain?e.awaitDrainWriters.clear():e.awaitDrainWriters=null),e.length===0&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&lg(this)),i!==null&&!e.errorEmitted&&!e.closeEmitted&&(e.dataEmitted=!0,this.emit("data",i)),i};function Une(t,e){if(Me("onEofChunk"),!e.ended){if(e.decoder){let n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,e.sync?gh(t):(e.needReadable=!1,e.emittedReadable=!0,tM(t))}}function gh(t){let e=t._readableState;Me("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(Me("emitReadable",e.flowing),e.emittedReadable=!0,Fr.nextTick(tM,t))}function tM(t){let e=t._readableState;Me("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&!e.errored&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,rM(t)}function Ah(t,e){!e.readingMore&&e.constructed&&(e.readingMore=!0,Fr.nextTick(Bne,t,e))}function Bne(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){let n=e.length;if(Me("maybeReadMore read 0"),t.read(0),n===e.length)break}e.readingMore=!1}ge.prototype._read=function(t){throw new Rne("_read()")};ge.prototype.pipe=function(t,e){let n=this,r=this._readableState;r.pipes.length===1&&(r.multiAwaitDrain||(r.multiAwaitDrain=!0,r.awaitDrainWriters=new ane(r.awaitDrainWriters?[r.awaitDrainWriters]:[]))),r.pipes.push(t),Me("pipe count=%d opts=%j",r.pipes.length,e);let s=(!e||e.end!==!1)&&t!==Fr.stdout&&t!==Fr.stderr?a:T;r.endEmitted?Fr.nextTick(s):n.once("end",s),t.on("unpipe",o);function o(S,m){Me("onunpipe"),S===n&&m&&m.hasUnpiped===!1&&(m.hasUnpiped=!0,u())}function a(){Me("onend"),t.end()}let l,c=!1;function u(){Me("cleanup"),t.removeListener("close",p),t.removeListener("finish",h),l&&t.removeListener("drain",l),t.removeListener("error",f),t.removeListener("unpipe",o),n.removeListener("end",a),n.removeListener("end",T),n.removeListener("data",E),c=!0,l&&r.awaitDrainWriters&&(!t._writableState||t._writableState.needDrain)&&l()}function d(){c||(r.pipes.length===1&&r.pipes[0]===t?(Me("false write response, pause",0),r.awaitDrainWriters=t,r.multiAwaitDrain=!1):r.pipes.length>1&&r.pipes.includes(t)&&(Me("false write response, pause",r.awaitDrainWriters.size),r.awaitDrainWriters.add(t)),n.pause()),l||(l=Fne(n,t),t.on("drain",l))}n.on("data",E);function E(S){Me("ondata");let m=t.write(S);Me("dest.write",m),m===!1&&d()}function f(S){if(Me("onerror",S),T(),t.removeListener("error",f),t.listenerCount("error")===0){let m=t._writableState||t._readableState;m&&!m.errorEmitted?hl(t,S):t.emit("error",S)}}fne(t,"error",f);function p(){t.removeListener("finish",h),T()}t.once("close",p);function h(){Me("onfinish"),t.removeListener("close",p),T()}t.once("finish",h);function T(){Me("unpipe"),n.unpipe(t)}return t.emit("pipe",n),t.writableNeedDrain===!0?d():r.flowing||(Me("pipe resume"),n.resume()),t};function Fne(t,e){return function(){let r=t._readableState;r.awaitDrainWriters===e?(Me("pipeOnDrain",1),r.awaitDrainWriters=null):r.multiAwaitDrain&&(Me("pipeOnDrain",r.awaitDrainWriters.size),r.awaitDrainWriters.delete(e)),(!r.awaitDrainWriters||r.awaitDrainWriters.size===0)&&t.listenerCount("data")&&t.resume()}}ge.prototype.unpipe=function(t){let e=this._readableState,n={hasUnpiped:!1};if(e.pipes.length===0)return this;if(!t){let i=e.pipes;e.pipes=[],this.pause();for(let s=0;s<i.length;s++)i[s].emit("unpipe",this,{hasUnpiped:!1});return this}let r=nne(e.pipes,t);return r===-1?this:(e.pipes.splice(r,1),e.pipes.length===0&&this.pause(),t.emit("unpipe",this,n),this)};ge.prototype.on=function(t,e){let n=Hs.prototype.on.call(this,t,e),r=this._readableState;return t==="data"?(r.readableListening=this.listenerCount("readable")>0,r.flowing!==!1&&this.resume()):t==="readable"&&!r.endEmitted&&!r.readableListening&&(r.readableListening=r.needReadable=!0,r.flowing=!1,r.emittedReadable=!1,Me("on readable",r.length,r.reading),r.length?gh(this):r.reading||Fr.nextTick(Hne,this)),n};ge.prototype.addListener=ge.prototype.on;ge.prototype.removeListener=function(t,e){let n=Hs.prototype.removeListener.call(this,t,e);return t==="readable"&&Fr.nextTick(nM,this),n};ge.prototype.off=ge.prototype.removeListener;ge.prototype.removeAllListeners=function(t){let e=Hs.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&Fr.nextTick(nM,this),e};function nM(t){let e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&e[Do]===!1?e.flowing=!0:t.listenerCount("data")>0?t.resume():e.readableListening||(e.flowing=null)}function Hne(t){Me("readable nexttick read 0"),t.read(0)}ge.prototype.resume=function(){let t=this._readableState;return t.flowing||(Me("resume"),t.flowing=!t.readableListening,Gne(this,t)),t[Do]=!1,this};function Gne(t,e){e.resumeScheduled||(e.resumeScheduled=!0,Fr.nextTick($ne,t,e))}function $ne(t,e){Me("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),rM(t),e.flowing&&!e.reading&&t.read(0)}ge.prototype.pause=function(){return Me("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Me("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[Do]=!0,this};function rM(t){let e=t._readableState;for(Me("flow",e.flowing);e.flowing&&t.read()!==null;);}ge.prototype.wrap=function(t){let e=!1;t.on("data",r=>{!this.push(r)&&t.pause&&(e=!0,t.pause())}),t.on("end",()=>{this.push(null)}),t.on("error",r=>{hl(this,r)}),t.on("close",()=>{this.destroy()}),t.on("destroy",()=>{this.destroy()}),this._read=()=>{e&&t.resume&&(e=!1,t.resume())};let n=one(t);for(let r=1;r<n.length;r++){let i=n[r];this[i]===void 0&&typeof t[i]=="function"&&(this[i]=t[i].bind(t))}return this};ge.prototype[cne]=function(){return iM(this)};ge.prototype.iterator=function(t){return t!==void 0&&_ne(t,"options"),iM(this,t)};function iM(t,e){typeof t.read!="function"&&(t=ge.wrap(t,{objectMode:!0}));let n=Wne(t,e);return n.stream=t,n}async function*Wne(t,e){let n=og;function r(o){this===t?(n(),n=og):n=o}t.on("readable",r);let i,s=zv(t,{writable:!1},o=>{i=o?Yv(i,o):null,n(),n=og});try{for(;;){let o=t.destroyed?null:t.read();if(o!==null)yield o;else{if(i)throw i;if(i===null)return;await new Xv(r)}}}catch(o){throw i=Yv(i,o),i}finally{(i||e?.destroyOnReturn!==!1)&&(i===void 0||t._readableState.autoDestroy)?Tl.destroyer(t,null):(t.off("readable",r),s())}}fg(ge.prototype,{readable:{__proto__:null,get(){let t=this._readableState;return!!t&&t.readable!==!1&&!t.destroyed&&!t.errorEmitted&&!t.endEmitted},set(t){this._readableState&&(this._readableState.readable=!!t)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(t){this._readableState&&(this._readableState.destroyed=t)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}});fg(mh.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[Do]!==!1},set(t){this[Do]=!!t}}});ge._fromList=sM;function sM(t,e){if(e.length===0)return null;let n;return e.objectMode?n=e.buffer.shift():!t||t>=e.length?(e.decoder?n=e.buffer.join(""):e.buffer.length===1?n=e.buffer.first():n=e.buffer.concat(e.length),e.buffer.clear()):n=e.buffer.consume(t,e.decoder),n}function lg(t){let e=t._readableState;Me("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,Fr.nextTick(kne,e,t))}function kne(t,e){if(Me("endReadableNT",t.endEmitted,t.length),!t.errored&&!t.closeEmitted&&!t.endEmitted&&t.length===0){if(t.endEmitted=!0,e.emit("end"),e.writable&&e.allowHalfOpen===!1)Fr.nextTick(Yne,e);else if(t.autoDestroy){let n=e._writableState;(!n||n.autoDestroy&&(n.finished||n.writable===!1))&&e.destroy()}}}function Yne(t){t.writable&&!t.writableEnded&&!t.destroyed&&t.end()}ge.from=function(t,e){return Nne(ge,t,e)};var cg;function oM(){return cg===void 0&&(cg={}),cg}ge.fromWeb=function(t,e){return oM().newStreamReadableFromReadableStream(t,e)};ge.toWeb=function(t,e){return oM().newReadableStreamFromStreamReadable(t,e)};ge.wrap=function(t,e){var n,r;return new ge({objectMode:(n=(r=t.readableObjectMode)!==null&&r!==void 0?r:t.objectMode)!==null&&n!==void 0?n:!0,...e,destroy(i,s){Tl.destroyer(t,i),s(i)}}).wrap(t)}});var Ch=O((rve,AM)=>{"use strict";var Po=Je(),{ArrayPrototypeSlice:uM,Error:Vne,FunctionPrototypeSymbolHasInstance:dM,ObjectDefineProperty:fM,ObjectDefineProperties:qne,ObjectSetPrototypeOf:EM,StringPrototypeToLowerCase:Xne,Symbol:zne,SymbolHasInstance:jne}=dt();AM.exports=St;St.WritableState=$u;var{EventEmitter:Kne}=require("events"),Hu=Eh().Stream,{Buffer:Ih}=require("buffer"),Oh=wo(),{addAbortSignal:Jne}=xu(),{getHighWaterMark:Qne,getDefaultHighWaterMark:Zne}=vu(),{ERR_INVALID_ARG_TYPE:ere,ERR_METHOD_NOT_IMPLEMENTED:tre,ERR_MULTIPLE_CALLBACK:hM,ERR_STREAM_CANNOT_PIPE:nre,ERR_STREAM_DESTROYED:Gu,ERR_STREAM_ALREADY_FINISHED:rre,ERR_STREAM_NULL_VALUES:ire,ERR_STREAM_WRITE_AFTER_END:sre,ERR_UNKNOWN_ENCODING:pM}=Ln().codes,{errorOrDestroy:Sl}=Oh;EM(St.prototype,Hu.prototype);EM(St,Hu);function pg(){}var Rl=zne("kOnFinished");function $u(t,e,n){typeof n!="boolean"&&(n=e instanceof ci()),this.objectMode=!!(t&&t.objectMode),n&&(this.objectMode=this.objectMode||!!(t&&t.writableObjectMode)),this.highWaterMark=t?Qne(this,t,"writableHighWaterMark",n):Zne(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let r=!!(t&&t.decodeStrings===!1);this.decodeStrings=!r,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=are.bind(void 0,e),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,Nh(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!t||t.emitClose!==!1,this.autoDestroy=!t||t.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[Rl]=[]}function Nh(t){t.buffered=[],t.bufferedIndex=0,t.allBuffers=!0,t.allNoop=!0}$u.prototype.getBuffer=function(){return uM(this.buffered,this.bufferedIndex)};fM($u.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function St(t){let e=this instanceof ci();if(!e&&!dM(St,this))return new St(t);this._writableState=new $u(t,this,e),t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&Jne(t.signal,this)),Hu.call(this,t),Oh.construct(this,()=>{let n=this._writableState;n.writing||Sg(this,n),Rg(this,n)})}fM(St,jne,{__proto__:null,value:function(t){return dM(this,t)?!0:this!==St?!1:t&&t._writableState instanceof $u}});St.prototype.pipe=function(){Sl(this,new nre)};function TM(t,e,n,r){let i=t._writableState;if(typeof n=="function")r=n,n=i.defaultEncoding;else{if(!n)n=i.defaultEncoding;else if(n!=="buffer"&&!Ih.isEncoding(n))throw new pM(n);typeof r!="function"&&(r=pg)}if(e===null)throw new ire;if(!i.objectMode)if(typeof e=="string")i.decodeStrings!==!1&&(e=Ih.from(e,n),n="buffer");else if(e instanceof Ih)n="buffer";else if(Hu._isUint8Array(e))e=Hu._uint8ArrayToBuffer(e),n="buffer";else throw new ere("chunk",["string","Buffer","Uint8Array"],e);let s;return i.ending?s=new sre:i.destroyed&&(s=new Gu("write")),s?(Po.nextTick(r,s),Sl(t,s,!0),s):(i.pendingcb++,ore(t,i,e,n,r))}St.prototype.write=function(t,e,n){return TM(this,t,e,n)===!0};St.prototype.cork=function(){this._writableState.corked++};St.prototype.uncork=function(){let t=this._writableState;t.corked&&(t.corked--,t.writing||Sg(this,t))};St.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=Xne(e)),!Ih.isEncoding(e))throw new pM(e);return this._writableState.defaultEncoding=e,this};function ore(t,e,n,r,i){let s=e.objectMode?1:n.length;e.length+=s;let o=e.length<e.highWaterMark;return o||(e.needDrain=!0),e.writing||e.corked||e.errored||!e.constructed?(e.buffered.push({chunk:n,encoding:r,callback:i}),e.allBuffers&&r!=="buffer"&&(e.allBuffers=!1),e.allNoop&&i!==pg&&(e.allNoop=!1)):(e.writelen=s,e.writecb=i,e.writing=!0,e.sync=!0,t._write(n,r,e.onwrite),e.sync=!1),o&&!e.errored&&!e.destroyed}function lM(t,e,n,r,i,s,o){e.writelen=r,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new Gu("write")):n?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function cM(t,e,n,r){--e.pendingcb,r(n),Tg(e),Sl(t,n)}function are(t,e){let n=t._writableState,r=n.sync,i=n.writecb;if(typeof i!="function"){Sl(t,new hM);return}n.writing=!1,n.writecb=null,n.length-=n.writelen,n.writelen=0,e?(e.stack,n.errored||(n.errored=e),t._readableState&&!t._readableState.errored&&(t._readableState.errored=e),r?Po.nextTick(cM,t,n,e,i):cM(t,n,e,i)):(n.buffered.length>n.bufferedIndex&&Sg(t,n),r?n.afterWriteTickInfo!==null&&n.afterWriteTickInfo.cb===i?n.afterWriteTickInfo.count++:(n.afterWriteTickInfo={count:1,cb:i,stream:t,state:n},Po.nextTick(lre,n.afterWriteTickInfo)):SM(t,n,1,i))}function lre({stream:t,state:e,count:n,cb:r}){return e.afterWriteTickInfo=null,SM(t,e,n,r)}function SM(t,e,n,r){for(!e.ending&&!t.destroyed&&e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"));n-- >0;)e.pendingcb--,r();e.destroyed&&Tg(e),Rg(t,e)}function Tg(t){if(t.writing)return;for(let i=t.bufferedIndex;i<t.buffered.length;++i){var e;let{chunk:s,callback:o}=t.buffered[i],a=t.objectMode?1:s.length;t.length-=a,o((e=t.errored)!==null&&e!==void 0?e:new Gu("write"))}let n=t[Rl].splice(0);for(let i=0;i<n.length;i++){var r;n[i]((r=t.errored)!==null&&r!==void 0?r:new Gu("end"))}Nh(t)}function Sg(t,e){if(e.corked||e.bufferProcessing||e.destroyed||!e.constructed)return;let{buffered:n,bufferedIndex:r,objectMode:i}=e,s=n.length-r;if(!s)return;let o=r;if(e.bufferProcessing=!0,s>1&&t._writev){e.pendingcb-=s-1;let a=e.allNoop?pg:c=>{for(let u=o;u<n.length;++u)n[u].callback(c)},l=e.allNoop&&o===0?n:uM(n,o);l.allBuffers=e.allBuffers,lM(t,e,!0,e.length,l,"",a),Nh(e)}else{do{let{chunk:a,encoding:l,callback:c}=n[o];n[o++]=null;let u=i?1:a.length;lM(t,e,!1,u,a,l,c)}while(o<n.length&&!e.writing);o===n.length?Nh(e):o>256?(n.splice(0,o),e.bufferedIndex=0):e.bufferedIndex=o}e.bufferProcessing=!1}St.prototype._write=function(t,e,n){if(this._writev)this._writev([{chunk:t,encoding:e}],n);else throw new tre("_write()")};St.prototype._writev=null;St.prototype.end=function(t,e,n){let r=this._writableState;typeof t=="function"?(n=t,t=null,e=null):typeof e=="function"&&(n=e,e=null);let i;if(t!=null){let s=TM(this,t,e);s instanceof Vne&&(i=s)}return r.corked&&(r.corked=1,this.uncork()),i||(!r.errored&&!r.ending?(r.ending=!0,Rg(this,r,!0),r.ended=!0):r.finished?i=new rre("end"):r.destroyed&&(i=new Gu("end"))),typeof n=="function"&&(i||r.finished?Po.nextTick(n,i):r[Rl].push(n)),this};function _h(t){return t.ending&&!t.destroyed&&t.constructed&&t.length===0&&!t.errored&&t.buffered.length===0&&!t.finished&&!t.writing&&!t.errorEmitted&&!t.closeEmitted}function cre(t,e){let n=!1;function r(i){if(n){Sl(t,i??hM());return}if(n=!0,e.pendingcb--,i){let s=e[Rl].splice(0);for(let o=0;o<s.length;o++)s[o](i);Sl(t,i,e.sync)}else _h(e)&&(e.prefinished=!0,t.emit("prefinish"),e.pendingcb++,Po.nextTick(hg,t,e))}e.sync=!0,e.pendingcb++;try{t._final(r)}catch(i){r(i)}e.sync=!1}function ure(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.finalCalled=!0,cre(t,e)):(e.prefinished=!0,t.emit("prefinish")))}function Rg(t,e,n){_h(e)&&(ure(t,e),e.pendingcb===0&&(n?(e.pendingcb++,Po.nextTick((r,i)=>{_h(i)?hg(r,i):i.pendingcb--},t,e)):_h(e)&&(e.pendingcb++,hg(t,e))))}function hg(t,e){e.pendingcb--,e.finished=!0;let n=e[Rl].splice(0);for(let r=0;r<n.length;r++)n[r]();if(t.emit("finish"),e.autoDestroy){let r=t._readableState;(!r||r.autoDestroy&&(r.endEmitted||r.readable===!1))&&t.destroy()}}qne(St.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(t){this._writableState&&(this._writableState.destroyed=t)}},writable:{__proto__:null,get(){let t=this._writableState;return!!t&&t.writable!==!1&&!t.destroyed&&!t.errored&&!t.ending&&!t.ended},set(t){this._writableState&&(this._writableState.writable=!!t)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let t=this._writableState;return t?!t.destroyed&&!t.ending&&t.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var dre=Oh.destroy;St.prototype.destroy=function(t,e){let n=this._writableState;return!n.destroyed&&(n.bufferedIndex<n.buffered.length||n[Rl].length)&&Po.nextTick(Tg,n),dre.call(this,t,e),this};St.prototype._undestroy=Oh.undestroy;St.prototype._destroy=function(t,e){e(t)};St.prototype[Kne.captureRejectionSymbol]=function(t){this.destroy(t)};var Eg;function RM(){return Eg===void 0&&(Eg={}),Eg}St.fromWeb=function(t,e){return RM().newStreamWritableFromWritableStream(t,e)};St.toWeb=function(t){return RM().newWritableStreamFromStreamWritable(t)}});var vM=O((ive,xM)=>{var Ag=Je(),fre=require("buffer"),{isReadable:Ere,isWritable:hre,isIterable:mM,isNodeStream:pre,isReadableNodeStream:gM,isWritableNodeStream:IM,isDuplexNodeStream:Tre,isReadableStream:_M,isWritableStream:NM}=oi(),OM=zi(),{AbortError:DM,codes:{ERR_INVALID_ARG_TYPE:Sre,ERR_INVALID_RETURN_VALUE:CM}}=Ln(),{destroyer:ml}=wo(),Rre=ci(),PM=Fu(),Are=Ch(),{createDeferredPromise:bM}=$n(),yM=ig(),wM=globalThis.Blob||fre.Blob,mre=typeof wM<"u"?function(e){return e instanceof wM}:function(e){return!1},gre=globalThis.AbortController||Dt().AbortController,{FunctionPrototypeCall:LM}=dt(),Gs=class extends Rre{constructor(e){super(e),e?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),e?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};xM.exports=function t(e,n){if(Tre(e))return e;if(gM(e))return Al({readable:e});if(IM(e))return Al({writable:e});if(pre(e))return Al({writable:!1,readable:!1});if(_M(e))return Al({readable:PM.fromWeb(e)});if(NM(e))return Al({writable:Are.fromWeb(e)});if(typeof e=="function"){let{value:i,write:s,final:o,destroy:a}=Ire(e);if(mM(i))return yM(Gs,i,{objectMode:!0,write:s,final:o,destroy:a});let l=i?.then;if(typeof l=="function"){let c,u=LM(l,i,d=>{if(d!=null)throw new CM("nully","body",d)},d=>{ml(c,d)});return c=new Gs({objectMode:!0,readable:!1,write:s,final(d){o(async()=>{try{await u,Ag.nextTick(d,null)}catch(E){Ag.nextTick(d,E)}})},destroy:a})}throw new CM("Iterable, AsyncIterable or AsyncFunction",n,i)}if(mre(e))return t(e.arrayBuffer());if(mM(e))return yM(Gs,e,{objectMode:!0,writable:!1});if(_M(e?.readable)&&NM(e?.writable))return Gs.fromWeb(e);if(typeof e?.writable=="object"||typeof e?.readable=="object"){let i=e!=null&&e.readable?gM(e?.readable)?e?.readable:t(e.readable):void 0,s=e!=null&&e.writable?IM(e?.writable)?e?.writable:t(e.writable):void 0;return Al({readable:i,writable:s})}let r=e?.then;if(typeof r=="function"){let i;return LM(r,e,s=>{s!=null&&i.push(s),i.push(null)},s=>{ml(i,s)}),i=new Gs({objectMode:!0,writable:!1,read(){}})}throw new Sre(n,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],e)};function Ire(t){let{promise:e,resolve:n}=bM(),r=new gre,i=r.signal;return{value:t((async function*(){for(;;){let o=e;e=null;let{chunk:a,done:l,cb:c}=await o;if(Ag.nextTick(c),l)return;if(i.aborted)throw new DM(void 0,{cause:i.reason});({promise:e,resolve:n}=bM()),yield a}})(),{signal:i}),write(o,a,l){let c=n;n=null,c({chunk:o,done:!1,cb:l})},final(o){let a=n;n=null,a({done:!0,cb:o})},destroy(o,a){r.abort(),a(o)}}}function Al(t){let e=t.readable&&typeof t.readable.read!="function"?PM.wrap(t.readable):t.readable,n=t.writable,r=!!Ere(e),i=!!hre(n),s,o,a,l,c;function u(d){let E=l;l=null,E?E(d):d&&c.destroy(d)}return c=new Gs({readableObjectMode:!!(e!=null&&e.readableObjectMode),writableObjectMode:!!(n!=null&&n.writableObjectMode),readable:r,writable:i}),i&&(OM(n,d=>{i=!1,d&&ml(e,d),u(d)}),c._write=function(d,E,f){n.write(d,E)?f():s=f},c._final=function(d){n.end(),o=d},n.on("drain",function(){if(s){let d=s;s=null,d()}}),n.on("finish",function(){if(o){let d=o;o=null,d()}})),r&&(OM(e,d=>{r=!1,d&&ml(e,d),u(d)}),e.on("readable",function(){if(a){let d=a;a=null,d()}}),e.on("end",function(){c.push(null)}),c._read=function(){for(;;){let d=e.read();if(d===null){a=c._read;return}if(!c.push(d))return}}),c._destroy=function(d,E){!d&&l!==null&&(d=new DM),a=null,s=null,o=null,l===null?E(d):(l=E,ml(n,d),ml(e,d))},c}});var ci=O((sve,BM)=>{"use strict";var{ObjectDefineProperties:_re,ObjectGetOwnPropertyDescriptor:ji,ObjectKeys:Nre,ObjectSetPrototypeOf:MM}=dt();BM.exports=Hr;var Ig=Fu(),mr=Ch();MM(Hr.prototype,Ig.prototype);MM(Hr,Ig);{let t=Nre(mr.prototype);for(let e=0;e<t.length;e++){let n=t[e];Hr.prototype[n]||(Hr.prototype[n]=mr.prototype[n])}}function Hr(t){if(!(this instanceof Hr))return new Hr(t);Ig.call(this,t),mr.call(this,t),t?(this.allowHalfOpen=t.allowHalfOpen!==!1,t.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),t.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}_re(Hr.prototype,{writable:{__proto__:null,...ji(mr.prototype,"writable")},writableHighWaterMark:{__proto__:null,...ji(mr.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...ji(mr.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...ji(mr.prototype,"writableBuffer")},writableLength:{__proto__:null,...ji(mr.prototype,"writableLength")},writableFinished:{__proto__:null,...ji(mr.prototype,"writableFinished")},writableCorked:{__proto__:null,...ji(mr.prototype,"writableCorked")},writableEnded:{__proto__:null,...ji(mr.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...ji(mr.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(t){this._readableState&&this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}});var mg;function UM(){return mg===void 0&&(mg={}),mg}Hr.fromWeb=function(t,e){return UM().newStreamDuplexFromReadableWritablePair(t,e)};Hr.toWeb=function(t){return UM().newReadableWritablePairFromDuplex(t)};var gg;Hr.from=function(t){return gg||(gg=vM()),gg(t,"body")}});var Og=O((ove,HM)=>{"use strict";var{ObjectSetPrototypeOf:FM,Symbol:Ore}=dt();HM.exports=Ki;var{ERR_METHOD_NOT_IMPLEMENTED:Cre}=Ln().codes,Ng=ci(),{getHighWaterMark:bre}=vu();FM(Ki.prototype,Ng.prototype);FM(Ki,Ng);var Wu=Ore("kCallback");function Ki(t){if(!(this instanceof Ki))return new Ki(t);let e=t?bre(this,t,"readableHighWaterMark",!0):null;e===0&&(t={...t,highWaterMark:null,readableHighWaterMark:e,writableHighWaterMark:t.writableHighWaterMark||0}),Ng.call(this,t),this._readableState.sync=!1,this[Wu]=null,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",yre)}function _g(t){typeof this._flush=="function"&&!this.destroyed?this._flush((e,n)=>{if(e){t?t(e):this.destroy(e);return}n!=null&&this.push(n),this.push(null),t&&t()}):(this.push(null),t&&t())}function yre(){this._final!==_g&&_g.call(this)}Ki.prototype._final=_g;Ki.prototype._transform=function(t,e,n){throw new Cre("_transform()")};Ki.prototype._write=function(t,e,n){let r=this._readableState,i=this._writableState,s=r.length;this._transform(t,e,(o,a)=>{if(o){n(o);return}a!=null&&this.push(a),i.ended||s===r.length||r.length<r.highWaterMark?n():this[Wu]=n})};Ki.prototype._read=function(){if(this[Wu]){let t=this[Wu];this[Wu]=null,t()}}});var bg=O((ave,$M)=>{"use strict";var{ObjectSetPrototypeOf:GM}=dt();$M.exports=gl;var Cg=Og();GM(gl.prototype,Cg.prototype);GM(gl,Cg);function gl(t){if(!(this instanceof gl))return new gl(t);Cg.call(this,t)}gl.prototype._transform=function(t,e,n){n(null,t)}});var Lh=O((lve,qM)=>{var ku=Je(),{ArrayIsArray:wre,Promise:Lre,SymbolAsyncIterator:Dre,SymbolDispose:Pre}=dt(),wh=zi(),{once:xre}=$n(),vre=wo(),WM=ci(),{aggregateTwoErrors:Mre,codes:{ERR_INVALID_ARG_TYPE:Ug,ERR_INVALID_RETURN_VALUE:yg,ERR_MISSING_ARGS:Ure,ERR_STREAM_DESTROYED:Bre,ERR_STREAM_PREMATURE_CLOSE:Fre},AbortError:Hre}=Ln(),{validateFunction:Gre,validateAbortSignal:$re}=fl(),{isIterable:xo,isReadable:wg,isReadableNodeStream:yh,isNodeStream:kM,isTransformStream:Il,isWebStream:Wre,isReadableStream:Lg,isReadableFinished:kre}=oi(),Yre=globalThis.AbortController||Dt().AbortController,Dg,Pg,xg;function YM(t,e,n){let r=!1;t.on("close",()=>{r=!0});let i=wh(t,{readable:e,writable:n},s=>{r=!s});return{destroy:s=>{r||(r=!0,vre.destroyer(t,s||new Bre("pipe")))},cleanup:i}}function Vre(t){return Gre(t[t.length-1],"streams[stream.length - 1]"),t.pop()}function vg(t){if(xo(t))return t;if(yh(t))return qre(t);throw new Ug("val",["Readable","Iterable","AsyncIterable"],t)}async function*qre(t){Pg||(Pg=Fu()),yield*Pg.prototype[Dre].call(t)}async function bh(t,e,n,{end:r}){let i,s=null,o=c=>{if(c&&(i=c),s){let u=s;s=null,u()}},a=()=>new Lre((c,u)=>{i?u(i):s=()=>{i?u(i):c()}});e.on("drain",o);let l=wh(e,{readable:!1},o);try{e.writableNeedDrain&&await a();for await(let c of t)e.write(c)||await a();r&&(e.end(),await a()),n()}catch(c){n(i!==c?Mre(i,c):c)}finally{l(),e.off("drain",o)}}async function Mg(t,e,n,{end:r}){Il(e)&&(e=e.writable);let i=e.getWriter();try{for await(let s of t)await i.ready,i.write(s).catch(()=>{});await i.ready,r&&await i.close(),n()}catch(s){try{await i.abort(s),n(s)}catch(o){n(o)}}}function Xre(...t){return VM(t,xre(Vre(t)))}function VM(t,e,n){if(t.length===1&&wre(t[0])&&(t=t[0]),t.length<2)throw new Ure("streams");let r=new Yre,i=r.signal,s=n?.signal,o=[];$re(s,"options.signal");function a(){p(new Hre)}xg=xg||$n().addAbortListener;let l;s&&(l=xg(s,a));let c,u,d=[],E=0;function f(R){p(R,--E===0)}function p(R,A){var I;if(R&&(!c||c.code==="ERR_STREAM_PREMATURE_CLOSE")&&(c=R),!(!c&&!A)){for(;d.length;)d.shift()(c);(I=l)===null||I===void 0||I[Pre](),r.abort(),A&&(c||o.forEach(w=>w()),ku.nextTick(e,c,u))}}let h;for(let R=0;R<t.length;R++){let A=t[R],I=R<t.length-1,w=R>0,g=I||n?.end!==!1,L=R===t.length-1;if(kM(A)){let b=function(P){P&&P.name!=="AbortError"&&P.code!=="ERR_STREAM_PREMATURE_CLOSE"&&f(P)};var m=b;if(g){let{destroy:P,cleanup:v}=YM(A,I,w);d.push(P),wg(A)&&L&&o.push(v)}A.on("error",b),wg(A)&&L&&o.push(()=>{A.removeListener("error",b)})}if(R===0)if(typeof A=="function"){if(h=A({signal:i}),!xo(h))throw new yg("Iterable, AsyncIterable or Stream","source",h)}else xo(A)||yh(A)||Il(A)?h=A:h=WM.from(A);else if(typeof A=="function"){if(Il(h)){var T;h=vg((T=h)===null||T===void 0?void 0:T.readable)}else h=vg(h);if(h=A(h,{signal:i}),I){if(!xo(h,!0))throw new yg("AsyncIterable",`transform[${R-1}]`,h)}else{var S;Dg||(Dg=bg());let b=new Dg({objectMode:!0}),P=(S=h)===null||S===void 0?void 0:S.then;if(typeof P=="function")E++,P.call(h,$=>{u=$,$!=null&&b.write($),g&&b.end(),ku.nextTick(f)},$=>{b.destroy($),ku.nextTick(f,$)});else if(xo(h,!0))E++,bh(h,b,f,{end:g});else if(Lg(h)||Il(h)){let $=h.readable||h;E++,bh($,b,f,{end:g})}else throw new yg("AsyncIterable or Promise","destination",h);h=b;let{destroy:v,cleanup:H}=YM(h,!1,!0);d.push(v),L&&o.push(H)}}else if(kM(A)){if(yh(h)){E+=2;let b=zre(h,A,f,{end:g});wg(A)&&L&&o.push(b)}else if(Il(h)||Lg(h)){let b=h.readable||h;E++,bh(b,A,f,{end:g})}else if(xo(h))E++,bh(h,A,f,{end:g});else throw new Ug("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],h);h=A}else if(Wre(A)){if(yh(h))E++,Mg(vg(h),A,f,{end:g});else if(Lg(h)||xo(h))E++,Mg(h,A,f,{end:g});else if(Il(h))E++,Mg(h.readable,A,f,{end:g});else throw new Ug("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],h);h=A}else h=WM.from(A)}return(i!=null&&i.aborted||s!=null&&s.aborted)&&ku.nextTick(a),h}function zre(t,e,n,{end:r}){let i=!1;if(e.on("close",()=>{i||n(new Fre)}),t.pipe(e,{end:!1}),r){let o=function(){i=!0,e.end()};var s=o;kre(t)?ku.nextTick(o):t.once("end",o)}else n();return wh(t,{readable:!0,writable:!1},o=>{let a=t._readableState;o&&o.code==="ERR_STREAM_PREMATURE_CLOSE"&&a&&a.ended&&!a.errored&&!a.errorEmitted?t.once("end",n).once("error",n):n(o)}),wh(e,{readable:!1,writable:!0},n)}qM.exports={pipelineImpl:VM,pipeline:Xre}});var Fg=O((cve,QM)=>{"use strict";var{pipeline:jre}=Lh(),Dh=ci(),{destroyer:Kre}=wo(),{isNodeStream:Ph,isReadable:XM,isWritable:zM,isWebStream:Bg,isTransformStream:vo,isWritableStream:jM,isReadableStream:KM}=oi(),{AbortError:Jre,codes:{ERR_INVALID_ARG_VALUE:JM,ERR_MISSING_ARGS:Qre}}=Ln(),Zre=zi();QM.exports=function(...e){if(e.length===0)throw new Qre("streams");if(e.length===1)return Dh.from(e[0]);let n=[...e];if(typeof e[0]=="function"&&(e[0]=Dh.from(e[0])),typeof e[e.length-1]=="function"){let f=e.length-1;e[f]=Dh.from(e[f])}for(let f=0;f<e.length;++f)if(!(!Ph(e[f])&&!Bg(e[f]))){if(f<e.length-1&&!(XM(e[f])||KM(e[f])||vo(e[f])))throw new JM(`streams[${f}]`,n[f],"must be readable");if(f>0&&!(zM(e[f])||jM(e[f])||vo(e[f])))throw new JM(`streams[${f}]`,n[f],"must be writable")}let r,i,s,o,a;function l(f){let p=o;o=null,p?p(f):f?a.destroy(f):!E&&!d&&a.destroy()}let c=e[0],u=jre(e,l),d=!!(zM(c)||jM(c)||vo(c)),E=!!(XM(u)||KM(u)||vo(u));if(a=new Dh({writableObjectMode:!!(c!=null&&c.writableObjectMode),readableObjectMode:!!(u!=null&&u.readableObjectMode),writable:d,readable:E}),d){if(Ph(c))a._write=function(p,h,T){c.write(p,h)?T():r=T},a._final=function(p){c.end(),i=p},c.on("drain",function(){if(r){let p=r;r=null,p()}});else if(Bg(c)){let h=(vo(c)?c.writable:c).getWriter();a._write=async function(T,S,m){try{await h.ready,h.write(T).catch(()=>{}),m()}catch(R){m(R)}},a._final=async function(T){try{await h.ready,h.close().catch(()=>{}),i=T}catch(S){T(S)}}}let f=vo(u)?u.readable:u;Zre(f,()=>{if(i){let p=i;i=null,p()}})}if(E){if(Ph(u))u.on("readable",function(){if(s){let f=s;s=null,f()}}),u.on("end",function(){a.push(null)}),a._read=function(){for(;;){let f=u.read();if(f===null){s=a._read;return}if(!a.push(f))return}};else if(Bg(u)){let p=(vo(u)?u.readable:u).getReader();a._read=async function(){for(;;)try{let{value:h,done:T}=await p.read();if(!a.push(h))return;if(T){a.push(null);return}}catch{return}}}}return a._destroy=function(f,p){!f&&o!==null&&(f=new Jre),s=null,r=null,i=null,o===null?p(f):(o=p,Ph(u)&&Kre(u,f))},a}});var lU=O((uve,$g)=>{"use strict";var eie=globalThis.AbortController||Dt().AbortController,{codes:{ERR_INVALID_ARG_VALUE:tie,ERR_INVALID_ARG_TYPE:Yu,ERR_MISSING_ARGS:nie,ERR_OUT_OF_RANGE:rie},AbortError:ui}=Ln(),{validateAbortSignal:Mo,validateInteger:ZM,validateObject:Uo}=fl(),iie=dt().Symbol("kWeak"),sie=dt().Symbol("kResistStopPropagation"),{finished:oie}=zi(),aie=Fg(),{addAbortSignalNoValidate:lie}=xu(),{isWritable:cie,isNodeStream:uie}=oi(),{deprecate:die}=$n(),{ArrayPrototypePush:fie,Boolean:Eie,MathFloor:eU,Number:hie,NumberIsNaN:pie,Promise:tU,PromiseReject:nU,PromiseResolve:Tie,PromisePrototypeThen:rU,Symbol:sU}=dt(),xh=sU("kEmpty"),iU=sU("kEof");function Sie(t,e){if(e!=null&&Uo(e,"options"),e?.signal!=null&&Mo(e.signal,"options.signal"),uie(t)&&!cie(t))throw new tie("stream",t,"must be writable");let n=aie(this,t);return e!=null&&e.signal&&lie(e.signal,n),n}function vh(t,e){if(typeof t!="function")throw new Yu("fn",["Function","AsyncFunction"],t);e!=null&&Uo(e,"options"),e?.signal!=null&&Mo(e.signal,"options.signal");let n=1;e?.concurrency!=null&&(n=eU(e.concurrency));let r=n-1;return e?.highWaterMark!=null&&(r=eU(e.highWaterMark)),ZM(n,"options.concurrency",1),ZM(r,"options.highWaterMark",0),r+=n,async function*(){let s=$n().AbortSignalAny([e?.signal].filter(Eie)),o=this,a=[],l={signal:s},c,u,d=!1,E=0;function f(){d=!0,p()}function p(){E-=1,h()}function h(){u&&!d&&E<n&&a.length<r&&(u(),u=null)}async function T(){try{for await(let S of o){if(d)return;if(s.aborted)throw new ui;try{if(S=t(S,l),S===xh)continue;S=Tie(S)}catch(m){S=nU(m)}E+=1,rU(S,p,f),a.push(S),c&&(c(),c=null),!d&&(a.length>=r||E>=n)&&await new tU(m=>{u=m})}a.push(iU)}catch(S){let m=nU(S);rU(m,p,f),a.push(m)}finally{d=!0,c&&(c(),c=null)}}T();try{for(;;){for(;a.length>0;){let S=await a[0];if(S===iU)return;if(s.aborted)throw new ui;S!==xh&&(yield S),a.shift(),h()}await new tU(S=>{c=S})}}finally{d=!0,u&&(u(),u=null)}}.call(this)}function Rie(t=void 0){return t!=null&&Uo(t,"options"),t?.signal!=null&&Mo(t.signal,"options.signal"),async function*(){let n=0;for await(let i of this){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new ui({cause:t.signal.reason});yield[n++,i]}}.call(this)}async function oU(t,e=void 0){for await(let n of Gg.call(this,t,e))return!0;return!1}async function Aie(t,e=void 0){if(typeof t!="function")throw new Yu("fn",["Function","AsyncFunction"],t);return!await oU.call(this,async(...n)=>!await t(...n),e)}async function mie(t,e){for await(let n of Gg.call(this,t,e))return n}async function gie(t,e){if(typeof t!="function")throw new Yu("fn",["Function","AsyncFunction"],t);async function n(r,i){return await t(r,i),xh}for await(let r of vh.call(this,n,e));}function Gg(t,e){if(typeof t!="function")throw new Yu("fn",["Function","AsyncFunction"],t);async function n(r,i){return await t(r,i)?r:xh}return vh.call(this,n,e)}var Hg=class extends nie{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function Iie(t,e,n){var r;if(typeof t!="function")throw new Yu("reducer",["Function","AsyncFunction"],t);n!=null&&Uo(n,"options"),n?.signal!=null&&Mo(n.signal,"options.signal");let i=arguments.length>1;if(n!=null&&(r=n.signal)!==null&&r!==void 0&&r.aborted){let c=new ui(void 0,{cause:n.signal.reason});throw this.once("error",()=>{}),await oie(this.destroy(c)),c}let s=new eie,o=s.signal;if(n!=null&&n.signal){let c={once:!0,[iie]:this,[sie]:!0};n.signal.addEventListener("abort",()=>s.abort(),c)}let a=!1;try{for await(let c of this){var l;if(a=!0,n!=null&&(l=n.signal)!==null&&l!==void 0&&l.aborted)throw new ui;i?e=await t(e,c,{signal:o}):(e=c,i=!0)}if(!a&&!i)throw new Hg}finally{s.abort()}return e}async function _ie(t){t!=null&&Uo(t,"options"),t?.signal!=null&&Mo(t.signal,"options.signal");let e=[];for await(let r of this){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new ui(void 0,{cause:t.signal.reason});fie(e,r)}return e}function Nie(t,e){let n=vh.call(this,t,e);return async function*(){for await(let i of n)yield*i}.call(this)}function aU(t){if(t=hie(t),pie(t))return 0;if(t<0)throw new rie("number",">= 0",t);return t}function Oie(t,e=void 0){return e!=null&&Uo(e,"options"),e?.signal!=null&&Mo(e.signal,"options.signal"),t=aU(t),async function*(){var r;if(e!=null&&(r=e.signal)!==null&&r!==void 0&&r.aborted)throw new ui;for await(let s of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new ui;t--<=0&&(yield s)}}.call(this)}function Cie(t,e=void 0){return e!=null&&Uo(e,"options"),e?.signal!=null&&Mo(e.signal,"options.signal"),t=aU(t),async function*(){var r;if(e!=null&&(r=e.signal)!==null&&r!==void 0&&r.aborted)throw new ui;for await(let s of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new ui;if(t-- >0&&(yield s),t<=0)return}}.call(this)}$g.exports.streamReturningOperators={asIndexedPairs:die(Rie,"readable.asIndexedPairs will be removed in a future version."),drop:Oie,filter:Gg,flatMap:Nie,map:vh,take:Cie,compose:Sie};$g.exports.promiseReturningOperators={every:Aie,forEach:gie,reduce:Iie,toArray:_ie,some:oU,find:mie}});var Wg=O((dve,cU)=>{"use strict";var{ArrayPrototypePop:bie,Promise:yie}=dt(),{isIterable:wie,isNodeStream:Lie,isWebStream:Die}=oi(),{pipelineImpl:Pie}=Lh(),{finished:xie}=zi();kg();function vie(...t){return new yie((e,n)=>{let r,i,s=t[t.length-1];if(s&&typeof s=="object"&&!Lie(s)&&!wie(s)&&!Die(s)){let o=bie(t);r=o.signal,i=o.end}Pie(t,(o,a)=>{o?n(o):e(a)},{signal:r,end:i})})}cU.exports={finished:xie,pipeline:vie}});var kg=O((fve,RU)=>{"use strict";var{Buffer:Mie}=require("buffer"),{ObjectDefineProperty:Ji,ObjectKeys:fU,ReflectApply:EU}=dt(),{promisify:{custom:hU}}=$n(),{streamReturningOperators:uU,promiseReturningOperators:dU}=lU(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:pU}}=Ln(),Uie=Fg(),{setDefaultHighWaterMark:Bie,getDefaultHighWaterMark:Fie}=vu(),{pipeline:TU}=Lh(),{destroyer:Hie}=wo(),SU=zi(),Yg=Wg(),Vu=oi(),ot=RU.exports=Eh().Stream;ot.isDestroyed=Vu.isDestroyed;ot.isDisturbed=Vu.isDisturbed;ot.isErrored=Vu.isErrored;ot.isReadable=Vu.isReadable;ot.isWritable=Vu.isWritable;ot.Readable=Fu();for(let t of fU(uU)){let n=function(...r){if(new.target)throw pU();return ot.Readable.from(EU(e,this,r))},e=uU[t];Ji(n,"name",{__proto__:null,value:e.name}),Ji(n,"length",{__proto__:null,value:e.length}),Ji(ot.Readable.prototype,t,{__proto__:null,value:n,enumerable:!1,configurable:!0,writable:!0})}for(let t of fU(dU)){let n=function(...r){if(new.target)throw pU();return EU(e,this,r)},e=dU[t];Ji(n,"name",{__proto__:null,value:e.name}),Ji(n,"length",{__proto__:null,value:e.length}),Ji(ot.Readable.prototype,t,{__proto__:null,value:n,enumerable:!1,configurable:!0,writable:!0})}ot.Writable=Ch();ot.Duplex=ci();ot.Transform=Og();ot.PassThrough=bg();ot.pipeline=TU;var{addAbortSignal:Gie}=xu();ot.addAbortSignal=Gie;ot.finished=SU;ot.destroy=Hie;ot.compose=Uie;ot.setDefaultHighWaterMark=Bie;ot.getDefaultHighWaterMark=Fie;Ji(ot,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return Yg}});Ji(TU,hU,{__proto__:null,enumerable:!0,get(){return Yg.pipeline}});Ji(SU,hU,{__proto__:null,enumerable:!0,get(){return Yg.finished}});ot.Stream=ot;ot._isUint8Array=function(e){return e instanceof Uint8Array};ot._uint8ArrayToBuffer=function(e){return Mie.from(e.buffer,e.byteOffset,e.byteLength)}});var AU=O((Eve,De)=>{"use strict";var Wt=require("stream");if(Wt&&process.env.READABLE_STREAM==="disable"){let t=Wt.promises;De.exports._uint8ArrayToBuffer=Wt._uint8ArrayToBuffer,De.exports._isUint8Array=Wt._isUint8Array,De.exports.isDisturbed=Wt.isDisturbed,De.exports.isErrored=Wt.isErrored,De.exports.isReadable=Wt.isReadable,De.exports.Readable=Wt.Readable,De.exports.Writable=Wt.Writable,De.exports.Duplex=Wt.Duplex,De.exports.Transform=Wt.Transform,De.exports.PassThrough=Wt.PassThrough,De.exports.addAbortSignal=Wt.addAbortSignal,De.exports.finished=Wt.finished,De.exports.destroy=Wt.destroy,De.exports.pipeline=Wt.pipeline,De.exports.compose=Wt.compose,Object.defineProperty(Wt,"promises",{configurable:!0,enumerable:!0,get(){return t}}),De.exports.Stream=Wt.Stream}else{let t=kg(),e=Wg(),n=t.Readable.destroy;De.exports=t.Readable,De.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,De.exports._isUint8Array=t._isUint8Array,De.exports.isDisturbed=t.isDisturbed,De.exports.isErrored=t.isErrored,De.exports.isReadable=t.isReadable,De.exports.Readable=t.Readable,De.exports.Writable=t.Writable,De.exports.Duplex=t.Duplex,De.exports.Transform=t.Transform,De.exports.PassThrough=t.PassThrough,De.exports.addAbortSignal=t.addAbortSignal,De.exports.finished=t.finished,De.exports.destroy=t.destroy,De.exports.destroy=n,De.exports.pipeline=t.pipeline,De.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return e}}),De.exports.Stream=t.Stream}De.exports.default=De.exports});var gU=O((hve,mU)=>{function $ie(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}mU.exports=$ie});var OU=O((pve,NU)=>{var IU=QE(),Wie=Cm(),kie=bm(),_U=IU?IU.isConcatSpreadable:void 0;function Yie(t){return kie(t)||Wie(t)||!!(_U&&t&&t[_U])}NU.exports=Yie});var Mh=O((Tve,bU)=>{var Vie=gU(),qie=OU();function CU(t,e,n,r,i){var s=-1,o=t.length;for(n||(n=qie),i||(i=[]);++s<o;){var a=t[s];e>0&&n(a)?e>1?CU(a,e-1,n,r,i):Vie(i,a):r||(i[i.length]=a)}return i}bU.exports=CU});var wU=O((Sve,yU)=>{var Xie=Mh();function zie(t){var e=t==null?0:t.length;return e?Xie(t,1):[]}yU.exports=zie});var qu=O((Rve,LU)=>{var jie=Nu(),Kie=jie(Object,"create");LU.exports=Kie});var xU=O((Ave,PU)=>{var DU=qu();function Jie(){this.__data__=DU?DU(null):{},this.size=0}PU.exports=Jie});var MU=O((mve,vU)=>{function Qie(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}vU.exports=Qie});var BU=O((gve,UU)=>{var Zie=qu(),ese="__lodash_hash_undefined__",tse=Object.prototype,nse=tse.hasOwnProperty;function rse(t){var e=this.__data__;if(Zie){var n=e[t];return n===ese?void 0:n}return nse.call(e,t)?e[t]:void 0}UU.exports=rse});var HU=O((Ive,FU)=>{var ise=qu(),sse=Object.prototype,ose=sse.hasOwnProperty;function ase(t){var e=this.__data__;return ise?e[t]!==void 0:ose.call(e,t)}FU.exports=ase});var $U=O((_ve,GU)=>{var lse=qu(),cse="__lodash_hash_undefined__";function use(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=lse&&e===void 0?cse:e,this}GU.exports=use});var kU=O((Nve,WU)=>{var dse=xU(),fse=MU(),Ese=BU(),hse=HU(),pse=$U();function _l(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}_l.prototype.clear=dse;_l.prototype.delete=fse;_l.prototype.get=Ese;_l.prototype.has=hse;_l.prototype.set=pse;WU.exports=_l});var VU=O((Ove,YU)=>{function Tse(){this.__data__=[],this.size=0}YU.exports=Tse});var Xu=O((Cve,qU)=>{var Sse=eh();function Rse(t,e){for(var n=t.length;n--;)if(Sse(t[n][0],e))return n;return-1}qU.exports=Rse});var zU=O((bve,XU)=>{var Ase=Xu(),mse=Array.prototype,gse=mse.splice;function Ise(t){var e=this.__data__,n=Ase(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():gse.call(e,n,1),--this.size,!0}XU.exports=Ise});var KU=O((yve,jU)=>{var _se=Xu();function Nse(t){var e=this.__data__,n=_se(e,t);return n<0?void 0:e[n][1]}jU.exports=Nse});var QU=O((wve,JU)=>{var Ose=Xu();function Cse(t){return Ose(this.__data__,t)>-1}JU.exports=Cse});var eB=O((Lve,ZU)=>{var bse=Xu();function yse(t,e){var n=this.__data__,r=bse(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}ZU.exports=yse});var nB=O((Dve,tB)=>{var wse=VU(),Lse=zU(),Dse=KU(),Pse=QU(),xse=eB();function Nl(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Nl.prototype.clear=wse;Nl.prototype.delete=Lse;Nl.prototype.get=Dse;Nl.prototype.has=Pse;Nl.prototype.set=xse;tB.exports=Nl});var iB=O((Pve,rB)=>{var vse=Nu(),Mse=ol(),Use=vse(Mse,"Map");rB.exports=Use});var aB=O((xve,oB)=>{var sB=kU(),Bse=nB(),Fse=iB();function Hse(){this.size=0,this.__data__={hash:new sB,map:new(Fse||Bse),string:new sB}}oB.exports=Hse});var cB=O((vve,lB)=>{function Gse(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}lB.exports=Gse});var zu=O((Mve,uB)=>{var $se=cB();function Wse(t,e){var n=t.__data__;return $se(e)?n[typeof e=="string"?"string":"hash"]:n.map}uB.exports=Wse});var fB=O((Uve,dB)=>{var kse=zu();function Yse(t){var e=kse(this,t).delete(t);return this.size-=e?1:0,e}dB.exports=Yse});var hB=O((Bve,EB)=>{var Vse=zu();function qse(t){return Vse(this,t).get(t)}EB.exports=qse});var TB=O((Fve,pB)=>{var Xse=zu();function zse(t){return Xse(this,t).has(t)}pB.exports=zse});var RB=O((Hve,SB)=>{var jse=zu();function Kse(t,e){var n=jse(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}SB.exports=Kse});var mB=O((Gve,AB)=>{var Jse=aB(),Qse=fB(),Zse=hB(),eoe=TB(),toe=RB();function Ol(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Ol.prototype.clear=Jse;Ol.prototype.delete=Qse;Ol.prototype.get=Zse;Ol.prototype.has=eoe;Ol.prototype.set=toe;AB.exports=Ol});var IB=O(($ve,gB)=>{var noe="__lodash_hash_undefined__";function roe(t){return this.__data__.set(t,noe),this}gB.exports=roe});var NB=O((Wve,_B)=>{function ioe(t){return this.__data__.has(t)}_B.exports=ioe});var Vg=O((kve,OB)=>{var soe=mB(),ooe=IB(),aoe=NB();function Uh(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new soe;++e<n;)this.add(t[e])}Uh.prototype.add=Uh.prototype.push=ooe;Uh.prototype.has=aoe;OB.exports=Uh});var bB=O((Yve,CB)=>{function loe(t,e,n,r){for(var i=t.length,s=n+(r?1:-1);r?s--:++s<i;)if(e(t[s],s,t))return s;return-1}CB.exports=loe});var wB=O((Vve,yB)=>{function coe(t){return t!==t}yB.exports=coe});var DB=O((qve,LB)=>{function uoe(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}LB.exports=uoe});var xB=O((Xve,PB)=>{var doe=bB(),foe=wB(),Eoe=DB();function hoe(t,e,n){return e===e?Eoe(t,e,n):doe(t,foe,n)}PB.exports=hoe});var qg=O((zve,vB)=>{var poe=xB();function Toe(t,e){var n=t==null?0:t.length;return!!n&&poe(t,e,0)>-1}vB.exports=Toe});var Xg=O((jve,MB)=>{function Soe(t,e,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}MB.exports=Soe});var BB=O((Kve,UB)=>{function Roe(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}UB.exports=Roe});var zg=O((Jve,FB)=>{function Aoe(t,e){return t.has(e)}FB.exports=Aoe});var GB=O((Qve,HB)=>{var moe=Vg(),goe=qg(),Ioe=Xg(),_oe=BB(),Noe=ym(),Ooe=zg(),Coe=200;function boe(t,e,n,r){var i=-1,s=goe,o=!0,a=t.length,l=[],c=e.length;if(!a)return l;n&&(e=_oe(e,Noe(n))),r?(s=Ioe,o=!1):e.length>=Coe&&(s=Ooe,o=!1,e=new moe(e));e:for(;++i<a;){var u=t[i],d=n==null?u:n(u);if(u=r||u!==0?u:0,o&&d===d){for(var E=c;E--;)if(e[E]===d)continue e;l.push(u)}else s(e,d,r)||l.push(u)}return l}HB.exports=boe});var jg=O((Zve,$B)=>{var yoe=th(),woe=al();function Loe(t){return woe(t)&&yoe(t)}$B.exports=Loe});var YB=O((eMe,kB)=>{var Doe=GB(),Poe=Mh(),xoe=ZE(),WB=jg(),voe=xoe(function(t,e){return WB(t)?Doe(t,Poe(e,1,WB,!0)):[]});kB.exports=voe});var qB=O((tMe,VB)=>{var Moe=Nu(),Uoe=ol(),Boe=Moe(Uoe,"Set");VB.exports=Boe});var zB=O((nMe,XB)=>{function Foe(){}XB.exports=Foe});var Kg=O((rMe,jB)=>{function Hoe(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}jB.exports=Hoe});var JB=O((iMe,KB)=>{var Jg=qB(),Goe=zB(),$oe=Kg(),Woe=1/0,koe=Jg&&1/$oe(new Jg([,-0]))[1]==Woe?function(t){return new Jg(t)}:Goe;KB.exports=koe});var ZB=O((sMe,QB)=>{var Yoe=Vg(),Voe=qg(),qoe=Xg(),Xoe=zg(),zoe=JB(),joe=Kg(),Koe=200;function Joe(t,e,n){var r=-1,i=Voe,s=t.length,o=!0,a=[],l=a;if(n)o=!1,i=qoe;else if(s>=Koe){var c=e?null:zoe(t);if(c)return joe(c);o=!1,i=Xoe,l=new Yoe}else l=e?[]:a;e:for(;++r<s;){var u=t[r],d=e?e(u):u;if(u=n||u!==0?u:0,o&&d===d){for(var E=l.length;E--;)if(l[E]===d)continue e;e&&l.push(d),a.push(u)}else i(l,d,n)||(l!==a&&l.push(d),a.push(u))}return a}QB.exports=Joe});var tF=O((oMe,eF)=>{var Qoe=Mh(),Zoe=ZE(),eae=ZB(),tae=jg(),nae=Zoe(function(t){return eae(Qoe(t,1,tae,!0))});eF.exports=nae});var rF=O((aMe,nF)=>{function rae(t,e){return function(n){return t(e(n))}}nF.exports=rae});var sF=O((lMe,iF)=>{var iae=rF(),sae=iae(Object.getPrototypeOf,Object);iF.exports=sae});var lF=O((cMe,aF)=>{var oae=Iu(),aae=sF(),lae=al(),cae="[object Object]",uae=Function.prototype,dae=Object.prototype,oF=uae.toString,fae=dae.hasOwnProperty,Eae=oF.call(Object);function hae(t){if(!lae(t)||oae(t)!=cae)return!1;var e=aae(t);if(e===null)return!0;var n=fae.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&oF.call(n)==Eae}aF.exports=hae});var TF=O((uMe,pF)=>{var cF=MA();pF.exports=Sae;var uF="\0SLASH"+Math.random()+"\0",dF="\0OPEN"+Math.random()+"\0",Zg="\0CLOSE"+Math.random()+"\0",fF="\0COMMA"+Math.random()+"\0",EF="\0PERIOD"+Math.random()+"\0";function Qg(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function pae(t){return t.split("\\\\").join(uF).split("\\{").join(dF).split("\\}").join(Zg).split("\\,").join(fF).split("\\.").join(EF)}function Tae(t){return t.split(uF).join("\\").split(dF).join("{").split(Zg).join("}").split(fF).join(",").split(EF).join(".")}function hF(t){if(!t)return[""];var e=[],n=cF("{","}",t);if(!n)return t.split(",");var r=n.pre,i=n.body,s=n.post,o=r.split(",");o[o.length-1]+="{"+i+"}";var a=hF(s);return s.length&&(o[o.length-1]+=a.shift(),o.push.apply(o,a)),e.push.apply(e,o),e}function Sae(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),ju(pae(t),!0).map(Tae)):[]}function Rae(t){return"{"+t+"}"}function Aae(t){return/^-?0\d/.test(t)}function mae(t,e){return t<=e}function gae(t,e){return t>=e}function ju(t,e){var n=[],r=cF("{","}",t);if(!r)return[t];var i=r.pre,s=r.post.length?ju(r.post,!1):[""];if(/\$$/.test(r.pre))for(var o=0;o<s.length;o++){var a=i+"{"+r.body+"}"+s[o];n.push(a)}else{var l=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(r.body),c=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(r.body),u=l||c,d=r.body.indexOf(",")>=0;if(!u&&!d)return r.post.match(/,(?!,).*\}/)?(t=r.pre+"{"+r.body+Zg+r.post,ju(t)):[t];var E;if(u)E=r.body.split(/\.\./);else if(E=hF(r.body),E.length===1&&(E=ju(E[0],!1).map(Rae),E.length===1))return s.map(function(P){return r.pre+E[0]+P});var f;if(u){var p=Qg(E[0]),h=Qg(E[1]),T=Math.max(E[0].length,E[1].length),S=E.length==3?Math.abs(Qg(E[2])):1,m=mae,R=h<p;R&&(S*=-1,m=gae);var A=E.some(Aae);f=[];for(var I=p;m(I,h);I+=S){var w;if(c)w=String.fromCharCode(I),w==="\\"&&(w="");else if(w=String(I),A){var g=T-w.length;if(g>0){var L=new Array(g+1).join("0");I<0?w="-"+L+w.slice(1):w=L+w}}f.push(w)}}else{f=[];for(var b=0;b<E.length;b++)f.push.apply(f,ju(E[b],!1))}for(var b=0;b<f.length;b++)for(var o=0;o<s.length;o++){var a=i+f[b]+s[o];(!e||u||a)&&n.push(a)}}return n}});var SF=O(Bh=>{"use strict";Object.defineProperty(Bh,"__esModule",{value:!0});Bh.assertValidPattern=void 0;var Iae=1024*64,_ae=t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>Iae)throw new TypeError("pattern is too long")};Bh.assertValidPattern=_ae});var AF=O(Fh=>{"use strict";Object.defineProperty(Fh,"__esModule",{value:!0});Fh.parseClass=void 0;var Nae={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},Ku=t=>t.replace(/[[\]\\-]/g,"\\$&"),Oae=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),RF=t=>t.join(""),Cae=(t,e)=>{let n=e;if(t.charAt(n)!=="[")throw new Error("not in a brace expression");let r=[],i=[],s=n+1,o=!1,a=!1,l=!1,c=!1,u=n,d="";e:for(;s<t.length;){let h=t.charAt(s);if((h==="!"||h==="^")&&s===n+1){c=!0,s++;continue}if(h==="]"&&o&&!l){u=s+1;break}if(o=!0,h==="\\"&&!l){l=!0,s++;continue}if(h==="["&&!l){for(let[T,[S,m,R]]of Object.entries(Nae))if(t.startsWith(T,s)){if(d)return["$.",!1,t.length-n,!0];s+=T.length,R?i.push(S):r.push(S),a=a||m;continue e}}if(l=!1,d){h>d?r.push(Ku(d)+"-"+Ku(h)):h===d&&r.push(Ku(h)),d="",s++;continue}if(t.startsWith("-]",s+1)){r.push(Ku(h+"-")),s+=2;continue}if(t.startsWith("-",s+1)){d=h,s+=2;continue}r.push(Ku(h)),s++}if(u<s)return["",!1,0,!1];if(!r.length&&!i.length)return["$.",!1,t.length-n,!0];if(i.length===0&&r.length===1&&/^\\?.$/.test(r[0])&&!c){let h=r[0].length===2?r[0].slice(-1):r[0];return[Oae(h),!1,u-n,!1]}let E="["+(c?"^":"")+RF(r)+"]",f="["+(c?"":"^")+RF(i)+"]";return[r.length&&i.length?"("+E+"|"+f+")":r.length?E:f,a,u-n,!0]};Fh.parseClass=Cae});var Gh=O(Hh=>{"use strict";Object.defineProperty(Hh,"__esModule",{value:!0});Hh.unescape=void 0;var bae=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1");Hh.unescape=bae});var nI=O(kh=>{"use strict";Object.defineProperty(kh,"__esModule",{value:!0});kh.AST=void 0;var yae=AF(),$h=Gh(),wae=new Set(["!","?","+","*","@"]),mF=t=>wae.has(t),Lae="(?!(?:^|/)\\.\\.?(?:$|/))",Wh="(?!\\.)",Dae=new Set(["[","."]),Pae=new Set(["..","."]),xae=new Set("().*{}+?[]^$\\!"),vae=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),tI="[^/]",gF=tI+"*?",IF=tI+"+?",eI=class t{type;#e;#t;#s=!1;#r=[];#o;#m;#c;#d=!1;#a;#l;#i=!1;constructor(e,n,r={}){this.type=e,e&&(this.#t=!0),this.#o=n,this.#e=this.#o?this.#o.#e:this,this.#a=this.#e===this?r:this.#e.#a,this.#c=this.#e===this?[]:this.#e.#c,e==="!"&&!this.#e.#d&&this.#c.push(this),this.#m=this.#o?this.#o.#r.length:0}get hasMagic(){if(this.#t!==void 0)return this.#t;for(let e of this.#r)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#t=!0;return this.#t}toString(){return this.#l!==void 0?this.#l:this.type?this.#l=this.type+"("+this.#r.map(e=>String(e)).join("|")+")":this.#l=this.#r.map(e=>String(e)).join("")}#T(){if(this!==this.#e)throw new Error("should only call on root");if(this.#d)return this;this.toString(),this.#d=!0;let e;for(;e=this.#c.pop();){if(e.type!=="!")continue;let n=e,r=n.#o;for(;r;){for(let i=n.#m+1;!r.type&&i<r.#r.length;i++)for(let s of e.#r){if(typeof s=="string")throw new Error("string part in extglob AST??");s.copyIn(r.#r[i])}n=r,r=n.#o}}return this}push(...e){for(let n of e)if(n!==""){if(typeof n!="string"&&!(n instanceof t&&n.#o===this))throw new Error("invalid part: "+n);this.#r.push(n)}}toJSON(){let e=this.type===null?this.#r.slice().map(n=>typeof n=="string"?n:n.toJSON()):[this.type,...this.#r.map(n=>n.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#e||this.#e.#d&&this.#o?.type==="!")&&e.push({}),e}isStart(){if(this.#e===this)return!0;if(!this.#o?.isStart())return!1;if(this.#m===0)return!0;let e=this.#o;for(let n=0;n<this.#m;n++){let r=e.#r[n];if(!(r instanceof t&&r.type==="!"))return!1}return!0}isEnd(){if(this.#e===this||this.#o?.type==="!")return!0;if(!this.#o?.isEnd())return!1;if(!this.type)return this.#o?.isEnd();let e=this.#o?this.#o.#r.length:0;return this.#m===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let n=new t(this.type,e);for(let r of this.#r)n.copyIn(r);return n}static#S(e,n,r,i){let s=!1,o=!1,a=-1,l=!1;if(n.type===null){let f=r,p="";for(;f<e.length;){let h=e.charAt(f++);if(s||h==="\\"){s=!s,p+=h;continue}if(o){f===a+1?(h==="^"||h==="!")&&(l=!0):h==="]"&&!(f===a+2&&l)&&(o=!1),p+=h;continue}else if(h==="["){o=!0,a=f,l=!1,p+=h;continue}if(!i.noext&&mF(h)&&e.charAt(f)==="("){n.push(p),p="";let T=new t(h,n);f=t.#S(e,T,f,i),n.push(T);continue}p+=h}return n.push(p),f}let c=r+1,u=new t(null,n),d=[],E="";for(;c<e.length;){let f=e.charAt(c++);if(s||f==="\\"){s=!s,E+=f;continue}if(o){c===a+1?(f==="^"||f==="!")&&(l=!0):f==="]"&&!(c===a+2&&l)&&(o=!1),E+=f;continue}else if(f==="["){o=!0,a=c,l=!1,E+=f;continue}if(mF(f)&&e.charAt(c)==="("){u.push(E),E="";let p=new t(f,u);u.push(p),c=t.#S(e,p,c,i);continue}if(f==="|"){u.push(E),E="",d.push(u),u=new t(null,n);continue}if(f===")")return E===""&&n.#r.length===0&&(n.#i=!0),u.push(E),E="",n.push(...d,u),c;E+=f}return n.type=null,n.#t=void 0,n.#r=[e.substring(r-1)],c}static fromGlob(e,n={}){let r=new t(null,void 0,n);return t.#S(e,r,0,n),r}toMMPattern(){if(this!==this.#e)return this.#e.toMMPattern();let e=this.toString(),[n,r,i,s]=this.toRegExpSource();if(!(i||this.#t||this.#a.nocase&&!this.#a.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return r;let a=(this.#a.nocase?"i":"")+(s?"u":"");return Object.assign(new RegExp(`^${n}$`,a),{_src:n,_glob:e})}get options(){return this.#a}toRegExpSource(e){let n=e??!!this.#a.dot;if(this.#e===this&&this.#T(),!this.type){let l=this.isStart()&&this.isEnd(),c=this.#r.map(f=>{let[p,h,T,S]=typeof f=="string"?t.#f(f,this.#t,l):f.toRegExpSource(e);return this.#t=this.#t||T,this.#s=this.#s||S,p}).join(""),u="";if(this.isStart()&&typeof this.#r[0]=="string"&&!(this.#r.length===1&&Pae.has(this.#r[0]))){let p=Dae,h=n&&p.has(c.charAt(0))||c.startsWith("\\.")&&p.has(c.charAt(2))||c.startsWith("\\.\\.")&&p.has(c.charAt(4)),T=!n&&!e&&p.has(c.charAt(0));u=h?Lae:T?Wh:""}let d="";return this.isEnd()&&this.#e.#d&&this.#o?.type==="!"&&(d="(?:$|\\/)"),[u+c+d,(0,$h.unescape)(c),this.#t=!!this.#t,this.#s]}let r=this.type==="*"||this.type==="+",i=this.type==="!"?"(?:(?!(?:":"(?:",s=this.#E(n);if(this.isStart()&&this.isEnd()&&!s&&this.type!=="!"){let l=this.toString();return this.#r=[l],this.type=null,this.#t=void 0,[l,(0,$h.unescape)(this.toString()),!1,!1]}let o=!r||e||n||!Wh?"":this.#E(!0);o===s&&(o=""),o&&(s=`(?:${s})(?:${o})*?`);let a="";if(this.type==="!"&&this.#i)a=(this.isStart()&&!n?Wh:"")+IF;else{let l=this.type==="!"?"))"+(this.isStart()&&!n&&!e?Wh:"")+gF+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&o?")":this.type==="*"&&o?")?":`)${this.type}`;a=i+s+l}return[a,(0,$h.unescape)(s),this.#t=!!this.#t,this.#s]}#E(e){return this.#r.map(n=>{if(typeof n=="string")throw new Error("string type in extglob ast??");let[r,i,s,o]=n.toRegExpSource(e);return this.#s=this.#s||o,r}).filter(n=>!(this.isStart()&&this.isEnd())||!!n).join("|")}static#f(e,n,r=!1){let i=!1,s="",o=!1;for(let a=0;a<e.length;a++){let l=e.charAt(a);if(i){i=!1,s+=(xae.has(l)?"\\":"")+l;continue}if(l==="\\"){a===e.length-1?s+="\\\\":i=!0;continue}if(l==="["){let[c,u,d,E]=(0,yae.parseClass)(e,a);if(d){s+=c,o=o||u,a+=d-1,n=n||E;continue}}if(l==="*"){r&&e==="*"?s+=IF:s+=gF,n=!0;continue}if(l==="?"){s+=tI,n=!0;continue}s+=vae(l)}return[s,(0,$h.unescape)(e),!!n,o]}};kh.AST=eI});var rI=O(Yh=>{"use strict";Object.defineProperty(Yh,"__esModule",{value:!0});Yh.escape=void 0;var Mae=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&");Yh.escape=Mae});var $s=O(re=>{"use strict";var Uae=re&&re.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(re,"__esModule",{value:!0});re.unescape=re.escape=re.AST=re.Minimatch=re.match=re.makeRe=re.braceExpand=re.defaults=re.filter=re.GLOBSTAR=re.sep=re.minimatch=void 0;var Bae=Uae(TF()),Vh=SF(),OF=nI(),Fae=rI(),Hae=Gh(),Gae=(t,e,n={})=>((0,Vh.assertValidPattern)(e),!n.nocomment&&e.charAt(0)==="#"?!1:new Bo(e,n).match(t));re.minimatch=Gae;var $ae=/^\*+([^+@!?\*\[\(]*)$/,Wae=t=>e=>!e.startsWith(".")&&e.endsWith(t),kae=t=>e=>e.endsWith(t),Yae=t=>(t=t.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(t)),Vae=t=>(t=t.toLowerCase(),e=>e.toLowerCase().endsWith(t)),qae=/^\*+\.\*+$/,Xae=t=>!t.startsWith(".")&&t.includes("."),zae=t=>t!=="."&&t!==".."&&t.includes("."),jae=/^\.\*+$/,Kae=t=>t!=="."&&t!==".."&&t.startsWith("."),Jae=/^\*+$/,Qae=t=>t.length!==0&&!t.startsWith("."),Zae=t=>t.length!==0&&t!=="."&&t!=="..",ele=/^\?+([^+@!?\*\[\(]*)?$/,tle=([t,e=""])=>{let n=CF([t]);return e?(e=e.toLowerCase(),r=>n(r)&&r.toLowerCase().endsWith(e)):n},nle=([t,e=""])=>{let n=bF([t]);return e?(e=e.toLowerCase(),r=>n(r)&&r.toLowerCase().endsWith(e)):n},rle=([t,e=""])=>{let n=bF([t]);return e?r=>n(r)&&r.endsWith(e):n},ile=([t,e=""])=>{let n=CF([t]);return e?r=>n(r)&&r.endsWith(e):n},CF=([t])=>{let e=t.length;return n=>n.length===e&&!n.startsWith(".")},bF=([t])=>{let e=t.length;return n=>n.length===e&&n!=="."&&n!==".."},yF=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",_F={win32:{sep:"\\"},posix:{sep:"/"}};re.sep=yF==="win32"?_F.win32.sep:_F.posix.sep;re.minimatch.sep=re.sep;re.GLOBSTAR=Symbol("globstar **");re.minimatch.GLOBSTAR=re.GLOBSTAR;var sle="[^/]",ole=sle+"*?",ale="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",lle="(?:(?!(?:\\/|^)\\.).)*?",cle=(t,e={})=>n=>(0,re.minimatch)(n,t,e);re.filter=cle;re.minimatch.filter=re.filter;var gr=(t,e={})=>Object.assign({},t,e),ule=t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return re.minimatch;let e=re.minimatch;return Object.assign((r,i,s={})=>e(r,i,gr(t,s)),{Minimatch:class extends e.Minimatch{constructor(i,s={}){super(i,gr(t,s))}static defaults(i){return e.defaults(gr(t,i)).Minimatch}},AST:class extends e.AST{constructor(i,s,o={}){super(i,s,gr(t,o))}static fromGlob(i,s={}){return e.AST.fromGlob(i,gr(t,s))}},unescape:(r,i={})=>e.unescape(r,gr(t,i)),escape:(r,i={})=>e.escape(r,gr(t,i)),filter:(r,i={})=>e.filter(r,gr(t,i)),defaults:r=>e.defaults(gr(t,r)),makeRe:(r,i={})=>e.makeRe(r,gr(t,i)),braceExpand:(r,i={})=>e.braceExpand(r,gr(t,i)),match:(r,i,s={})=>e.match(r,i,gr(t,s)),sep:e.sep,GLOBSTAR:re.GLOBSTAR})};re.defaults=ule;re.minimatch.defaults=re.defaults;var dle=(t,e={})=>((0,Vh.assertValidPattern)(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:(0,Bae.default)(t));re.braceExpand=dle;re.minimatch.braceExpand=re.braceExpand;var fle=(t,e={})=>new Bo(t,e).makeRe();re.makeRe=fle;re.minimatch.makeRe=re.makeRe;var Ele=(t,e,n={})=>{let r=new Bo(e,n);return t=t.filter(i=>r.match(i)),r.options.nonull&&!t.length&&t.push(e),t};re.match=Ele;re.minimatch.match=re.match;var NF=/[?*]|[+@!]\(.*?\)|\[|\]/,hle=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Bo=class{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,n={}){(0,Vh.assertValidPattern)(e),n=n||{},this.options=n,this.pattern=e,this.platform=n.platform||yF,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!n.windowsPathsNoEscape||n.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!n.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!n.nonegate,this.comment=!1,this.empty=!1,this.partial=!!n.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=n.windowsNoMagicRoot!==void 0?n.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let n of e)if(typeof n!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,n=this.options;if(!n.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],n.debug&&(this.debug=(...s)=>console.error(...s)),this.debug(this.pattern,this.globSet);let r=this.globSet.map(s=>this.slashSplit(s));this.globParts=this.preprocess(r),this.debug(this.pattern,this.globParts);let i=this.globParts.map((s,o,a)=>{if(this.isWindows&&this.windowsNoMagicRoot){let l=s[0]===""&&s[1]===""&&(s[2]==="?"||!NF.test(s[2]))&&!NF.test(s[3]),c=/^[a-z]:/i.test(s[0]);if(l)return[...s.slice(0,4),...s.slice(4).map(u=>this.parse(u))];if(c)return[s[0],...s.slice(1).map(u=>this.parse(u))]}return s.map(l=>this.parse(l))});if(this.debug(this.pattern,i),this.set=i.filter(s=>s.indexOf(!1)===-1),this.isWindows)for(let s=0;s<this.set.length;s++){let o=this.set[s];o[0]===""&&o[1]===""&&this.globParts[s][2]==="?"&&typeof o[3]=="string"&&/^[a-z]:$/i.test(o[3])&&(o[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let r=0;r<e.length;r++)for(let i=0;i<e[r].length;i++)e[r][i]==="**"&&(e[r][i]="*");let{optimizationLevel:n=1}=this.options;return n>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):n>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(n=>{let r=-1;for(;(r=n.indexOf("**",r+1))!==-1;){let i=r;for(;n[i+1]==="**";)i++;i!==r&&n.splice(r,i-r)}return n})}levelOneOptimize(e){return e.map(n=>(n=n.reduce((r,i)=>{let s=r[r.length-1];return i==="**"&&s==="**"?r:i===".."&&s&&s!==".."&&s!=="."&&s!=="**"?(r.pop(),r):(r.push(i),r)},[]),n.length===0?[""]:n))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let n=!1;do{if(n=!1,!this.preserveMultipleSlashes){for(let i=1;i<e.length-1;i++){let s=e[i];i===1&&s===""&&e[0]===""||(s==="."||s==="")&&(n=!0,e.splice(i,1),i--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(n=!0,e.pop())}let r=0;for(;(r=e.indexOf("..",r+1))!==-1;){let i=e[r-1];i&&i!=="."&&i!==".."&&i!=="**"&&(n=!0,e.splice(r-1,2),r-=2)}}while(n);return e.length===0?[""]:e}firstPhasePreProcess(e){let n=!1;do{n=!1;for(let r of e){let i=-1;for(;(i=r.indexOf("**",i+1))!==-1;){let o=i;for(;r[o+1]==="**";)o++;o>i&&r.splice(i+1,o-i);let a=r[i+1],l=r[i+2],c=r[i+3];if(a!==".."||!l||l==="."||l===".."||!c||c==="."||c==="..")continue;n=!0,r.splice(i,1);let u=r.slice(0);u[i]="**",e.push(u),i--}if(!this.preserveMultipleSlashes){for(let o=1;o<r.length-1;o++){let a=r[o];o===1&&a===""&&r[0]===""||(a==="."||a==="")&&(n=!0,r.splice(o,1),o--)}r[0]==="."&&r.length===2&&(r[1]==="."||r[1]==="")&&(n=!0,r.pop())}let s=0;for(;(s=r.indexOf("..",s+1))!==-1;){let o=r[s-1];if(o&&o!=="."&&o!==".."&&o!=="**"){n=!0;let l=s===1&&r[s+1]==="**"?["."]:[];r.splice(s-1,2,...l),r.length===0&&r.push(""),s-=2}}}}while(n);return e}secondPhasePreProcess(e){for(let n=0;n<e.length-1;n++)for(let r=n+1;r<e.length;r++){let i=this.partsMatch(e[n],e[r],!this.preserveMultipleSlashes);if(i){e[n]=[],e[r]=i;break}}return e.filter(n=>n.length)}partsMatch(e,n,r=!1){let i=0,s=0,o=[],a="";for(;i<e.length&&s<n.length;)if(e[i]===n[s])o.push(a==="b"?n[s]:e[i]),i++,s++;else if(r&&e[i]==="**"&&n[s]===e[i+1])o.push(e[i]),i++;else if(r&&n[s]==="**"&&e[i]===n[s+1])o.push(n[s]),s++;else if(e[i]==="*"&&n[s]&&(this.options.dot||!n[s].startsWith("."))&&n[s]!=="**"){if(a==="b")return!1;a="a",o.push(e[i]),i++,s++}else if(n[s]==="*"&&e[i]&&(this.options.dot||!e[i].startsWith("."))&&e[i]!=="**"){if(a==="a")return!1;a="b",o.push(n[s]),i++,s++}else return!1;return e.length===n.length&&o}parseNegate(){if(this.nonegate)return;let e=this.pattern,n=!1,r=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)n=!n,r++;r&&(this.pattern=e.slice(r)),this.negate=n}matchOne(e,n,r=!1){let i=this.options;if(this.isWindows){let h=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),T=!h&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),S=typeof n[0]=="string"&&/^[a-z]:$/i.test(n[0]),m=!S&&n[0]===""&&n[1]===""&&n[2]==="?"&&typeof n[3]=="string"&&/^[a-z]:$/i.test(n[3]),R=T?3:h?0:void 0,A=m?3:S?0:void 0;if(typeof R=="number"&&typeof A=="number"){let[I,w]=[e[R],n[A]];I.toLowerCase()===w.toLowerCase()&&(n[A]=I,A>R?n=n.slice(A):R>A&&(e=e.slice(R)))}}let{optimizationLevel:s=1}=this.options;s>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:n}),this.debug("matchOne",e.length,n.length);for(var o=0,a=0,l=e.length,c=n.length;o<l&&a<c;o++,a++){this.debug("matchOne loop");var u=n[a],d=e[o];if(this.debug(n,u,d),u===!1)return!1;if(u===re.GLOBSTAR){this.debug("GLOBSTAR",[n,u,d]);var E=o,f=a+1;if(f===c){for(this.debug("** at the end");o<l;o++)if(e[o]==="."||e[o]===".."||!i.dot&&e[o].charAt(0)===".")return!1;return!0}for(;E<l;){var p=e[E];if(this.debug(`
globstar while`,e,E,n,f,p),this.matchOne(e.slice(E),n.slice(f),r))return this.debug("globstar found match!",E,l,p),!0;if(p==="."||p===".."||!i.dot&&p.charAt(0)==="."){this.debug("dot detected!",e,E,n,f);break}this.debug("globstar swallow a segment, and continue"),E++}return!!(r&&(this.debug(`
>>> no match, partial?`,e,E,n,f),E===l))}let h;if(typeof u=="string"?(h=d===u,this.debug("string match",u,d,h)):(h=u.test(d),this.debug("pattern match",u,d,h)),!h)return!1}if(o===l&&a===c)return!0;if(o===l)return r;if(a===c)return o===l-1&&e[o]==="";throw new Error("wtf?")}braceExpand(){return(0,re.braceExpand)(this.pattern,this.options)}parse(e){(0,Vh.assertValidPattern)(e);let n=this.options;if(e==="**")return re.GLOBSTAR;if(e==="")return"";let r,i=null;(r=e.match(Jae))?i=n.dot?Zae:Qae:(r=e.match($ae))?i=(n.nocase?n.dot?Vae:Yae:n.dot?kae:Wae)(r[1]):(r=e.match(ele))?i=(n.nocase?n.dot?nle:tle:n.dot?rle:ile)(r):(r=e.match(qae))?i=n.dot?zae:Xae:(r=e.match(jae))&&(i=Kae);let s=OF.AST.fromGlob(e,this.options).toMMPattern();return i&&typeof s=="object"&&Reflect.defineProperty(s,"test",{value:i}),s}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let n=this.options,r=n.noglobstar?ole:n.dot?ale:lle,i=new Set(n.nocase?["i"]:[]),s=e.map(l=>{let c=l.map(u=>{if(u instanceof RegExp)for(let d of u.flags.split(""))i.add(d);return typeof u=="string"?hle(u):u===re.GLOBSTAR?re.GLOBSTAR:u._src});return c.forEach((u,d)=>{let E=c[d+1],f=c[d-1];u!==re.GLOBSTAR||f===re.GLOBSTAR||(f===void 0?E!==void 0&&E!==re.GLOBSTAR?c[d+1]="(?:\\/|"+r+"\\/)?"+E:c[d]=r:E===void 0?c[d-1]=f+"(?:\\/|"+r+")?":E!==re.GLOBSTAR&&(c[d-1]=f+"(?:\\/|\\/"+r+"\\/)"+E,c[d+1]=re.GLOBSTAR))}),c.filter(u=>u!==re.GLOBSTAR).join("/")}).join("|"),[o,a]=e.length>1?["(?:",")"]:["",""];s="^"+o+s+a+"$",this.negate&&(s="^(?!"+s+").+$");try{this.regexp=new RegExp(s,[...i].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,n=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&n)return!0;let r=this.options;this.isWindows&&(e=e.split("\\").join("/"));let i=this.slashSplit(e);this.debug(this.pattern,"split",i);let s=this.set;this.debug(this.pattern,"set",s);let o=i[i.length-1];if(!o)for(let a=i.length-2;!o&&a>=0;a--)o=i[a];for(let a=0;a<s.length;a++){let l=s[a],c=i;if(r.matchBase&&l.length===1&&(c=[o]),this.matchOne(c,l,n))return r.flipNegate?!0:!this.negate}return r.flipNegate?!1:this.negate}static defaults(e){return re.minimatch.defaults(e).Minimatch}};re.Minimatch=Bo;var ple=nI();Object.defineProperty(re,"AST",{enumerable:!0,get:function(){return ple.AST}});var Tle=rI();Object.defineProperty(re,"escape",{enumerable:!0,get:function(){return Tle.escape}});var Sle=Gh();Object.defineProperty(re,"unescape",{enumerable:!0,get:function(){return Sle.unescape}});re.minimatch.AST=OF.AST;re.minimatch.Minimatch=Bo;re.minimatch.escape=Fae.escape;re.minimatch.unescape=Hae.unescape});var xF=O(Xh=>{"use strict";Object.defineProperty(Xh,"__esModule",{value:!0});Xh.LRUCache=void 0;var Cl=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,LF=new Set,iI=typeof process=="object"&&process?process:{},DF=(t,e,n,r)=>{typeof iI.emitWarning=="function"?iI.emitWarning(t,e,n,r):console.error(`[${n}] ${e}: ${t}`)},qh=globalThis.AbortController,wF=globalThis.AbortSignal;if(typeof qh>"u"){wF=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(r,i){this._onabort.push(i)}},qh=class{constructor(){e()}signal=new wF;abort(r){if(!this.signal.aborted){this.signal.reason=r,this.signal.aborted=!0;for(let i of this.signal._onabort)i(r);this.signal.onabort?.(r)}}};let t=iI.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",e=()=>{t&&(t=!1,DF("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}var Rle=t=>!LF.has(t),Ws=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),PF=t=>Ws(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?bl:null:null,bl=class extends Array{constructor(e){super(e),this.fill(0)}},sI=class t{heap;length;static#e=!1;static create(e){let n=PF(e);if(!n)return[];t.#e=!0;let r=new t(e,n);return t.#e=!1,r}constructor(e,n){if(!t.#e)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new n(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},oI=class t{#e;#t;#s;#r;#o;#m;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#c;#d;#a;#l;#i;#T;#S;#E;#f;#_;#p;#N;#O;#A;#g;#I;#h;static unsafeExposeInternals(e){return{starts:e.#O,ttls:e.#A,sizes:e.#N,keyMap:e.#a,keyList:e.#l,valList:e.#i,next:e.#T,prev:e.#S,get head(){return e.#E},get tail(){return e.#f},free:e.#_,isBackgroundFetch:n=>e.#u(n),backgroundFetch:(n,r,i,s)=>e.#F(n,r,i,s),moveToTail:n=>e.#G(n),indexes:n=>e.#b(n),rindexes:n=>e.#y(n),isStale:n=>e.#R(n)}}get max(){return this.#e}get maxSize(){return this.#t}get calculatedSize(){return this.#d}get size(){return this.#c}get fetchMethod(){return this.#o}get memoMethod(){return this.#m}get dispose(){return this.#s}get disposeAfter(){return this.#r}constructor(e){let{max:n=0,ttl:r,ttlResolution:i=1,ttlAutopurge:s,updateAgeOnGet:o,updateAgeOnHas:a,allowStale:l,dispose:c,disposeAfter:u,noDisposeOnSet:d,noUpdateTTL:E,maxSize:f=0,maxEntrySize:p=0,sizeCalculation:h,fetchMethod:T,memoMethod:S,noDeleteOnFetchRejection:m,noDeleteOnStaleGet:R,allowStaleOnFetchRejection:A,allowStaleOnFetchAbort:I,ignoreFetchAbort:w}=e;if(n!==0&&!Ws(n))throw new TypeError("max option must be a nonnegative integer");let g=n?PF(n):Array;if(!g)throw new Error("invalid max value: "+n);if(this.#e=n,this.#t=f,this.maxEntrySize=p||this.#t,this.sizeCalculation=h,this.sizeCalculation){if(!this.#t&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(S!==void 0&&typeof S!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#m=S,T!==void 0&&typeof T!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#o=T,this.#I=!!T,this.#a=new Map,this.#l=new Array(n).fill(void 0),this.#i=new Array(n).fill(void 0),this.#T=new g(n),this.#S=new g(n),this.#E=0,this.#f=0,this.#_=sI.create(n),this.#c=0,this.#d=0,typeof c=="function"&&(this.#s=c),typeof u=="function"?(this.#r=u,this.#p=[]):(this.#r=void 0,this.#p=void 0),this.#g=!!this.#s,this.#h=!!this.#r,this.noDisposeOnSet=!!d,this.noUpdateTTL=!!E,this.noDeleteOnFetchRejection=!!m,this.allowStaleOnFetchRejection=!!A,this.allowStaleOnFetchAbort=!!I,this.ignoreFetchAbort=!!w,this.maxEntrySize!==0){if(this.#t!==0&&!Ws(this.#t))throw new TypeError("maxSize must be a positive integer if specified");if(!Ws(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#L()}if(this.allowStale=!!l,this.noDeleteOnStaleGet=!!R,this.updateAgeOnGet=!!o,this.updateAgeOnHas=!!a,this.ttlResolution=Ws(i)||i===0?i:1,this.ttlAutopurge=!!s,this.ttl=r||0,this.ttl){if(!Ws(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#w()}if(this.#e===0&&this.ttl===0&&this.#t===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#e&&!this.#t){let L="LRU_CACHE_UNBOUNDED";Rle(L)&&(LF.add(L),DF("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",L,t))}}getRemainingTTL(e){return this.#a.has(e)?1/0:0}#w(){let e=new bl(this.#e),n=new bl(this.#e);this.#A=e,this.#O=n,this.#P=(s,o,a=Cl.now())=>{if(n[s]=o!==0?a:0,e[s]=o,o!==0&&this.ttlAutopurge){let l=setTimeout(()=>{this.#R(s)&&this.#D(this.#l[s],"expire")},o+1);l.unref&&l.unref()}},this.#C=s=>{n[s]=e[s]!==0?Cl.now():0},this.#n=(s,o)=>{if(e[o]){let a=e[o],l=n[o];if(!a||!l)return;s.ttl=a,s.start=l,s.now=r||i();let c=s.now-l;s.remainingTTL=a-c}};let r=0,i=()=>{let s=Cl.now();if(this.ttlResolution>0){r=s;let o=setTimeout(()=>r=0,this.ttlResolution);o.unref&&o.unref()}return s};this.getRemainingTTL=s=>{let o=this.#a.get(s);if(o===void 0)return 0;let a=e[o],l=n[o];if(!a||!l)return 1/0;let c=(r||i())-l;return a-c},this.#R=s=>{let o=n[s],a=e[s];return!!a&&!!o&&(r||i())-o>a}}#C=()=>{};#n=()=>{};#P=()=>{};#R=()=>!1;#L(){let e=new bl(this.#e);this.#d=0,this.#N=e,this.#x=n=>{this.#d-=e[n],e[n]=0},this.#M=(n,r,i,s)=>{if(this.#u(r))return 0;if(!Ws(i))if(s){if(typeof s!="function")throw new TypeError("sizeCalculation must be a function");if(i=s(r,n),!Ws(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i},this.#v=(n,r,i)=>{if(e[n]=r,this.#t){let s=this.#t-e[n];for(;this.#d>s;)this.#B(!0)}this.#d+=e[n],i&&(i.entrySize=r,i.totalCalculatedSize=this.#d)}}#x=e=>{};#v=(e,n,r)=>{};#M=(e,n,r,i)=>{if(r||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#b({allowStale:e=this.allowStale}={}){if(this.#c)for(let n=this.#f;!(!this.#U(n)||((e||!this.#R(n))&&(yield n),n===this.#E));)n=this.#S[n]}*#y({allowStale:e=this.allowStale}={}){if(this.#c)for(let n=this.#E;!(!this.#U(n)||((e||!this.#R(n))&&(yield n),n===this.#f));)n=this.#T[n]}#U(e){return e!==void 0&&this.#a.get(this.#l[e])===e}*entries(){for(let e of this.#b())this.#i[e]!==void 0&&this.#l[e]!==void 0&&!this.#u(this.#i[e])&&(yield[this.#l[e],this.#i[e]])}*rentries(){for(let e of this.#y())this.#i[e]!==void 0&&this.#l[e]!==void 0&&!this.#u(this.#i[e])&&(yield[this.#l[e],this.#i[e]])}*keys(){for(let e of this.#b()){let n=this.#l[e];n!==void 0&&!this.#u(this.#i[e])&&(yield n)}}*rkeys(){for(let e of this.#y()){let n=this.#l[e];n!==void 0&&!this.#u(this.#i[e])&&(yield n)}}*values(){for(let e of this.#b())this.#i[e]!==void 0&&!this.#u(this.#i[e])&&(yield this.#i[e])}*rvalues(){for(let e of this.#y())this.#i[e]!==void 0&&!this.#u(this.#i[e])&&(yield this.#i[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,n={}){for(let r of this.#b()){let i=this.#i[r],s=this.#u(i)?i.__staleWhileFetching:i;if(s!==void 0&&e(s,this.#l[r],this))return this.get(this.#l[r],n)}}forEach(e,n=this){for(let r of this.#b()){let i=this.#i[r],s=this.#u(i)?i.__staleWhileFetching:i;s!==void 0&&e.call(n,s,this.#l[r],this)}}rforEach(e,n=this){for(let r of this.#y()){let i=this.#i[r],s=this.#u(i)?i.__staleWhileFetching:i;s!==void 0&&e.call(n,s,this.#l[r],this)}}purgeStale(){let e=!1;for(let n of this.#y({allowStale:!0}))this.#R(n)&&(this.#D(this.#l[n],"expire"),e=!0);return e}info(e){let n=this.#a.get(e);if(n===void 0)return;let r=this.#i[n],i=this.#u(r)?r.__staleWhileFetching:r;if(i===void 0)return;let s={value:i};if(this.#A&&this.#O){let o=this.#A[n],a=this.#O[n];if(o&&a){let l=o-(Cl.now()-a);s.ttl=l,s.start=Date.now()}}return this.#N&&(s.size=this.#N[n]),s}dump(){let e=[];for(let n of this.#b({allowStale:!0})){let r=this.#l[n],i=this.#i[n],s=this.#u(i)?i.__staleWhileFetching:i;if(s===void 0||r===void 0)continue;let o={value:s};if(this.#A&&this.#O){o.ttl=this.#A[n];let a=Cl.now()-this.#O[n];o.start=Math.floor(Date.now()-a)}this.#N&&(o.size=this.#N[n]),e.unshift([r,o])}return e}load(e){this.clear();for(let[n,r]of e){if(r.start){let i=Date.now()-r.start;r.start=Cl.now()-i}this.set(n,r.value,r)}}set(e,n,r={}){if(n===void 0)return this.delete(e),this;let{ttl:i=this.ttl,start:s,noDisposeOnSet:o=this.noDisposeOnSet,sizeCalculation:a=this.sizeCalculation,status:l}=r,{noUpdateTTL:c=this.noUpdateTTL}=r,u=this.#M(e,n,r.size||0,a);if(this.maxEntrySize&&u>this.maxEntrySize)return l&&(l.set="miss",l.maxEntrySizeExceeded=!0),this.#D(e,"set"),this;let d=this.#c===0?void 0:this.#a.get(e);if(d===void 0)d=this.#c===0?this.#f:this.#_.length!==0?this.#_.pop():this.#c===this.#e?this.#B(!1):this.#c,this.#l[d]=e,this.#i[d]=n,this.#a.set(e,d),this.#T[this.#f]=d,this.#S[d]=this.#f,this.#f=d,this.#c++,this.#v(d,u,l),l&&(l.set="add"),c=!1;else{this.#G(d);let E=this.#i[d];if(n!==E){if(this.#I&&this.#u(E)){E.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:f}=E;f!==void 0&&!o&&(this.#g&&this.#s?.(f,e,"set"),this.#h&&this.#p?.push([f,e,"set"]))}else o||(this.#g&&this.#s?.(E,e,"set"),this.#h&&this.#p?.push([E,e,"set"]));if(this.#x(d),this.#v(d,u,l),this.#i[d]=n,l){l.set="replace";let f=E&&this.#u(E)?E.__staleWhileFetching:E;f!==void 0&&(l.oldValue=f)}}else l&&(l.set="update")}if(i!==0&&!this.#A&&this.#w(),this.#A&&(c||this.#P(d,i,s),l&&this.#n(l,d)),!o&&this.#h&&this.#p){let E=this.#p,f;for(;f=E?.shift();)this.#r?.(...f)}return this}pop(){try{for(;this.#c;){let e=this.#i[this.#E];if(this.#B(!0),this.#u(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#h&&this.#p){let e=this.#p,n;for(;n=e?.shift();)this.#r?.(...n)}}}#B(e){let n=this.#E,r=this.#l[n],i=this.#i[n];return this.#I&&this.#u(i)?i.__abortController.abort(new Error("evicted")):(this.#g||this.#h)&&(this.#g&&this.#s?.(i,r,"evict"),this.#h&&this.#p?.push([i,r,"evict"])),this.#x(n),e&&(this.#l[n]=void 0,this.#i[n]=void 0,this.#_.push(n)),this.#c===1?(this.#E=this.#f=0,this.#_.length=0):this.#E=this.#T[n],this.#a.delete(r),this.#c--,n}has(e,n={}){let{updateAgeOnHas:r=this.updateAgeOnHas,status:i}=n,s=this.#a.get(e);if(s!==void 0){let o=this.#i[s];if(this.#u(o)&&o.__staleWhileFetching===void 0)return!1;if(this.#R(s))i&&(i.has="stale",this.#n(i,s));else return r&&this.#C(s),i&&(i.has="hit",this.#n(i,s)),!0}else i&&(i.has="miss");return!1}peek(e,n={}){let{allowStale:r=this.allowStale}=n,i=this.#a.get(e);if(i===void 0||!r&&this.#R(i))return;let s=this.#i[i];return this.#u(s)?s.__staleWhileFetching:s}#F(e,n,r,i){let s=n===void 0?void 0:this.#i[n];if(this.#u(s))return s;let o=new qh,{signal:a}=r;a?.addEventListener("abort",()=>o.abort(a.reason),{signal:o.signal});let l={signal:o.signal,options:r,context:i},c=(h,T=!1)=>{let{aborted:S}=o.signal,m=r.ignoreFetchAbort&&h!==void 0;if(r.status&&(S&&!T?(r.status.fetchAborted=!0,r.status.fetchError=o.signal.reason,m&&(r.status.fetchAbortIgnored=!0)):r.status.fetchResolved=!0),S&&!m&&!T)return d(o.signal.reason);let R=f;return this.#i[n]===f&&(h===void 0?R.__staleWhileFetching?this.#i[n]=R.__staleWhileFetching:this.#D(e,"fetch"):(r.status&&(r.status.fetchUpdated=!0),this.set(e,h,l.options))),h},u=h=>(r.status&&(r.status.fetchRejected=!0,r.status.fetchError=h),d(h)),d=h=>{let{aborted:T}=o.signal,S=T&&r.allowStaleOnFetchAbort,m=S||r.allowStaleOnFetchRejection,R=m||r.noDeleteOnFetchRejection,A=f;if(this.#i[n]===f&&(!R||A.__staleWhileFetching===void 0?this.#D(e,"fetch"):S||(this.#i[n]=A.__staleWhileFetching)),m)return r.status&&A.__staleWhileFetching!==void 0&&(r.status.returnedStale=!0),A.__staleWhileFetching;if(A.__returned===A)throw h},E=(h,T)=>{let S=this.#o?.(e,s,l);S&&S instanceof Promise&&S.then(m=>h(m===void 0?void 0:m),T),o.signal.addEventListener("abort",()=>{(!r.ignoreFetchAbort||r.allowStaleOnFetchAbort)&&(h(void 0),r.allowStaleOnFetchAbort&&(h=m=>c(m,!0)))})};r.status&&(r.status.fetchDispatched=!0);let f=new Promise(E).then(c,u),p=Object.assign(f,{__abortController:o,__staleWhileFetching:s,__returned:void 0});return n===void 0?(this.set(e,p,{...l.options,status:void 0}),n=this.#a.get(e)):this.#i[n]=p,p}#u(e){if(!this.#I)return!1;let n=e;return!!n&&n instanceof Promise&&n.hasOwnProperty("__staleWhileFetching")&&n.__abortController instanceof qh}async fetch(e,n={}){let{allowStale:r=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:l=0,sizeCalculation:c=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL,noDeleteOnFetchRejection:d=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:E=this.allowStaleOnFetchRejection,ignoreFetchAbort:f=this.ignoreFetchAbort,allowStaleOnFetchAbort:p=this.allowStaleOnFetchAbort,context:h,forceRefresh:T=!1,status:S,signal:m}=n;if(!this.#I)return S&&(S.fetch="get"),this.get(e,{allowStale:r,updateAgeOnGet:i,noDeleteOnStaleGet:s,status:S});let R={allowStale:r,updateAgeOnGet:i,noDeleteOnStaleGet:s,ttl:o,noDisposeOnSet:a,size:l,sizeCalculation:c,noUpdateTTL:u,noDeleteOnFetchRejection:d,allowStaleOnFetchRejection:E,allowStaleOnFetchAbort:p,ignoreFetchAbort:f,status:S,signal:m},A=this.#a.get(e);if(A===void 0){S&&(S.fetch="miss");let I=this.#F(e,A,R,h);return I.__returned=I}else{let I=this.#i[A];if(this.#u(I)){let P=r&&I.__staleWhileFetching!==void 0;return S&&(S.fetch="inflight",P&&(S.returnedStale=!0)),P?I.__staleWhileFetching:I.__returned=I}let w=this.#R(A);if(!T&&!w)return S&&(S.fetch="hit"),this.#G(A),i&&this.#C(A),S&&this.#n(S,A),I;let g=this.#F(e,A,R,h),b=g.__staleWhileFetching!==void 0&&r;return S&&(S.fetch=w?"stale":"refresh",b&&w&&(S.returnedStale=!0)),b?g.__staleWhileFetching:g.__returned=g}}async forceFetch(e,n={}){let r=await this.fetch(e,n);if(r===void 0)throw new Error("fetch() returned undefined");return r}memo(e,n={}){let r=this.#m;if(!r)throw new Error("no memoMethod provided to constructor");let{context:i,forceRefresh:s,...o}=n,a=this.get(e,o);if(!s&&a!==void 0)return a;let l=r(e,a,{options:o,context:i});return this.set(e,l,o),l}get(e,n={}){let{allowStale:r=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,status:o}=n,a=this.#a.get(e);if(a!==void 0){let l=this.#i[a],c=this.#u(l);return o&&this.#n(o,a),this.#R(a)?(o&&(o.get="stale"),c?(o&&r&&l.__staleWhileFetching!==void 0&&(o.returnedStale=!0),r?l.__staleWhileFetching:void 0):(s||this.#D(e,"expire"),o&&r&&(o.returnedStale=!0),r?l:void 0)):(o&&(o.get="hit"),c?l.__staleWhileFetching:(this.#G(a),i&&this.#C(a),l))}else o&&(o.get="miss")}#H(e,n){this.#S[n]=e,this.#T[e]=n}#G(e){e!==this.#f&&(e===this.#E?this.#E=this.#T[e]:this.#H(this.#S[e],this.#T[e]),this.#H(this.#f,e),this.#f=e)}delete(e){return this.#D(e,"delete")}#D(e,n){let r=!1;if(this.#c!==0){let i=this.#a.get(e);if(i!==void 0)if(r=!0,this.#c===1)this.#$(n);else{this.#x(i);let s=this.#i[i];if(this.#u(s)?s.__abortController.abort(new Error("deleted")):(this.#g||this.#h)&&(this.#g&&this.#s?.(s,e,n),this.#h&&this.#p?.push([s,e,n])),this.#a.delete(e),this.#l[i]=void 0,this.#i[i]=void 0,i===this.#f)this.#f=this.#S[i];else if(i===this.#E)this.#E=this.#T[i];else{let o=this.#S[i];this.#T[o]=this.#T[i];let a=this.#T[i];this.#S[a]=this.#S[i]}this.#c--,this.#_.push(i)}}if(this.#h&&this.#p?.length){let i=this.#p,s;for(;s=i?.shift();)this.#r?.(...s)}return r}clear(){return this.#$("delete")}#$(e){for(let n of this.#y({allowStale:!0})){let r=this.#i[n];if(this.#u(r))r.__abortController.abort(new Error("deleted"));else{let i=this.#l[n];this.#g&&this.#s?.(r,i,e),this.#h&&this.#p?.push([r,i,e])}}if(this.#a.clear(),this.#i.fill(void 0),this.#l.fill(void 0),this.#A&&this.#O&&(this.#A.fill(0),this.#O.fill(0)),this.#N&&this.#N.fill(0),this.#E=0,this.#f=0,this.#_.length=0,this.#d=0,this.#c=0,this.#h&&this.#p){let n=this.#p,r;for(;r=n?.shift();)this.#r?.(...r)}}};Xh.LRUCache=oI});var YF=O(kF=>{"use strict";var vF=typeof process=="object"&&process?process:{stdout:null,stderr:null},Ale=require("events"),MF=require("stream"),mle=require("string_decoder"),UF=mle.StringDecoder,Qi=Symbol("EOF"),Zi=Symbol("maybeEmitEnd"),ks=Symbol("emittedEnd"),zh=Symbol("emittingEnd"),Ju=Symbol("emittedError"),jh=Symbol("closed"),BF=Symbol("read"),Kh=Symbol("flush"),FF=Symbol("flushChunk"),er=Symbol("encoding"),es=Symbol("decoder"),Jh=Symbol("flowing"),Qu=Symbol("paused"),yl=Symbol("resume"),Pt=Symbol("buffer"),di=Symbol("pipes"),rn=Symbol("bufferLength"),aI=Symbol("bufferPush"),lI=Symbol("bufferShift"),An=Symbol("objectMode"),xt=Symbol("destroyed"),cI=Symbol("error"),uI=Symbol("emitData"),HF=Symbol("emitEnd"),dI=Symbol("emitEnd2"),ts=Symbol("async"),fI=Symbol("abort"),Qh=Symbol("aborted"),Fo=Symbol("signal"),Zu=t=>Promise.resolve().then(t),WF=global._MP_NO_ITERATOR_SYMBOLS_!=="1",GF=WF&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),$F=WF&&Symbol.iterator||Symbol("iterator not implemented"),gle=t=>t==="end"||t==="finish"||t==="prefinish",Ile=t=>t instanceof ArrayBuffer||typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,_le=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),Zh=class{constructor(e,n,r){this.src=e,this.dest=n,this.opts=r,this.ondrain=()=>e[yl](),n.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},EI=class extends Zh{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,n,r){super(e,n,r),this.proxyErrors=i=>n.emit("error",i),e.on("error",this.proxyErrors)}},hI=class t extends MF{constructor(e){super(),this[Jh]=!1,this[Qu]=!1,this[di]=[],this[Pt]=[],this[An]=e&&e.objectMode||!1,this[An]?this[er]=null:this[er]=e&&e.encoding||null,this[er]==="buffer"&&(this[er]=null),this[ts]=e&&!!e.async||!1,this[es]=this[er]?new UF(this[er]):null,this[Qi]=!1,this[ks]=!1,this[zh]=!1,this[jh]=!1,this[Ju]=null,this.writable=!0,this.readable=!0,this[rn]=0,this[xt]=!1,e&&e.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[Pt]}),e&&e.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[di]}),this[Fo]=e&&e.signal,this[Qh]=!1,this[Fo]&&(this[Fo].addEventListener("abort",()=>this[fI]()),this[Fo].aborted&&this[fI]())}get bufferLength(){return this[rn]}get encoding(){return this[er]}set encoding(e){if(this[An])throw new Error("cannot set encoding in objectMode");if(this[er]&&e!==this[er]&&(this[es]&&this[es].lastNeed||this[rn]))throw new Error("cannot change encoding");this[er]!==e&&(this[es]=e?new UF(e):null,this[Pt].length&&(this[Pt]=this[Pt].map(n=>this[es].write(n)))),this[er]=e}setEncoding(e){this.encoding=e}get objectMode(){return this[An]}set objectMode(e){this[An]=this[An]||!!e}get async(){return this[ts]}set async(e){this[ts]=this[ts]||!!e}[fI](){this[Qh]=!0,this.emit("abort",this[Fo].reason),this.destroy(this[Fo].reason)}get aborted(){return this[Qh]}set aborted(e){}write(e,n,r){if(this[Qh])return!1;if(this[Qi])throw new Error("write after end");if(this[xt])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof n=="function"&&(r=n,n="utf8"),n||(n="utf8");let i=this[ts]?Zu:s=>s();return!this[An]&&!Buffer.isBuffer(e)&&(_le(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):Ile(e)?e=Buffer.from(e):typeof e!="string"&&(this.objectMode=!0)),this[An]?(this.flowing&&this[rn]!==0&&this[Kh](!0),this.flowing?this.emit("data",e):this[aI](e),this[rn]!==0&&this.emit("readable"),r&&i(r),this.flowing):e.length?(typeof e=="string"&&!(n===this[er]&&!this[es].lastNeed)&&(e=Buffer.from(e,n)),Buffer.isBuffer(e)&&this[er]&&(e=this[es].write(e)),this.flowing&&this[rn]!==0&&this[Kh](!0),this.flowing?this.emit("data",e):this[aI](e),this[rn]!==0&&this.emit("readable"),r&&i(r),this.flowing):(this[rn]!==0&&this.emit("readable"),r&&i(r),this.flowing)}read(e){if(this[xt])return null;if(this[rn]===0||e===0||e>this[rn])return this[Zi](),null;this[An]&&(e=null),this[Pt].length>1&&!this[An]&&(this.encoding?this[Pt]=[this[Pt].join("")]:this[Pt]=[Buffer.concat(this[Pt],this[rn])]);let n=this[BF](e||null,this[Pt][0]);return this[Zi](),n}[BF](e,n){return e===n.length||e===null?this[lI]():(this[Pt][0]=n.slice(e),n=n.slice(0,e),this[rn]-=e),this.emit("data",n),!this[Pt].length&&!this[Qi]&&this.emit("drain"),n}end(e,n,r){return typeof e=="function"&&(r=e,e=null),typeof n=="function"&&(r=n,n="utf8"),e&&this.write(e,n),r&&this.once("end",r),this[Qi]=!0,this.writable=!1,(this.flowing||!this[Qu])&&this[Zi](),this}[yl](){this[xt]||(this[Qu]=!1,this[Jh]=!0,this.emit("resume"),this[Pt].length?this[Kh]():this[Qi]?this[Zi]():this.emit("drain"))}resume(){return this[yl]()}pause(){this[Jh]=!1,this[Qu]=!0}get destroyed(){return this[xt]}get flowing(){return this[Jh]}get paused(){return this[Qu]}[aI](e){this[An]?this[rn]+=1:this[rn]+=e.length,this[Pt].push(e)}[lI](){return this[An]?this[rn]-=1:this[rn]-=this[Pt][0].length,this[Pt].shift()}[Kh](e){do;while(this[FF](this[lI]())&&this[Pt].length);!e&&!this[Pt].length&&!this[Qi]&&this.emit("drain")}[FF](e){return this.emit("data",e),this.flowing}pipe(e,n){if(this[xt])return;let r=this[ks];return n=n||{},e===vF.stdout||e===vF.stderr?n.end=!1:n.end=n.end!==!1,n.proxyErrors=!!n.proxyErrors,r?n.end&&e.end():(this[di].push(n.proxyErrors?new EI(this,e,n):new Zh(this,e,n)),this[ts]?Zu(()=>this[yl]()):this[yl]()),e}unpipe(e){let n=this[di].find(r=>r.dest===e);n&&(this[di].splice(this[di].indexOf(n),1),n.unpipe())}addListener(e,n){return this.on(e,n)}on(e,n){let r=super.on(e,n);return e==="data"&&!this[di].length&&!this.flowing?this[yl]():e==="readable"&&this[rn]!==0?super.emit("readable"):gle(e)&&this[ks]?(super.emit(e),this.removeAllListeners(e)):e==="error"&&this[Ju]&&(this[ts]?Zu(()=>n.call(this,this[Ju])):n.call(this,this[Ju])),r}get emittedEnd(){return this[ks]}[Zi](){!this[zh]&&!this[ks]&&!this[xt]&&this[Pt].length===0&&this[Qi]&&(this[zh]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[jh]&&this.emit("close"),this[zh]=!1)}emit(e,n,...r){if(e!=="error"&&e!=="close"&&e!==xt&&this[xt])return;if(e==="data")return!this[An]&&!n?!1:this[ts]?Zu(()=>this[uI](n)):this[uI](n);if(e==="end")return this[HF]();if(e==="close"){if(this[jh]=!0,!this[ks]&&!this[xt])return;let s=super.emit("close");return this.removeAllListeners("close"),s}else if(e==="error"){this[Ju]=n,super.emit(cI,n);let s=!this[Fo]||this.listeners("error").length?super.emit("error",n):!1;return this[Zi](),s}else if(e==="resume"){let s=super.emit("resume");return this[Zi](),s}else if(e==="finish"||e==="prefinish"){let s=super.emit(e);return this.removeAllListeners(e),s}let i=super.emit(e,n,...r);return this[Zi](),i}[uI](e){for(let r of this[di])r.dest.write(e)===!1&&this.pause();let n=super.emit("data",e);return this[Zi](),n}[HF](){this[ks]||(this[ks]=!0,this.readable=!1,this[ts]?Zu(()=>this[dI]()):this[dI]())}[dI](){if(this[es]){let n=this[es].end();if(n){for(let r of this[di])r.dest.write(n);super.emit("data",n)}}for(let n of this[di])n.end();let e=super.emit("end");return this.removeAllListeners("end"),e}collect(){let e=[];this[An]||(e.dataLength=0);let n=this.promise();return this.on("data",r=>{e.push(r),this[An]||(e.dataLength+=r.length)}),n.then(()=>e)}concat(){return this[An]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then(e=>this[An]?Promise.reject(new Error("cannot concat in objectMode")):this[er]?e.join(""):Buffer.concat(e,e.dataLength))}promise(){return new Promise((e,n)=>{this.on(xt,()=>n(new Error("stream destroyed"))),this.on("error",r=>n(r)),this.on("end",()=>e())})}[GF](){let e=!1,n=()=>(this.pause(),e=!0,Promise.resolve({done:!0}));return{next:()=>{if(e)return n();let i=this.read();if(i!==null)return Promise.resolve({done:!1,value:i});if(this[Qi])return n();let s=null,o=null,a=d=>{this.removeListener("data",l),this.removeListener("end",c),this.removeListener(xt,u),n(),o(d)},l=d=>{this.removeListener("error",a),this.removeListener("end",c),this.removeListener(xt,u),this.pause(),s({value:d,done:!!this[Qi]})},c=()=>{this.removeListener("error",a),this.removeListener("data",l),this.removeListener(xt,u),n(),s({done:!0})},u=()=>a(new Error("stream destroyed"));return new Promise((d,E)=>{o=E,s=d,this.once(xt,u),this.once("error",a),this.once("end",c),this.once("data",l)})},throw:n,return:n,[GF](){return this}}}[$F](){let e=!1,n=()=>(this.pause(),this.removeListener(cI,n),this.removeListener(xt,n),this.removeListener("end",n),e=!0,{done:!0}),r=()=>{if(e)return n();let i=this.read();return i===null?n():{value:i}};return this.once("end",n),this.once(cI,n),this.once(xt,n),{next:r,throw:n,return:n,[$F](){return this}}}destroy(e){return this[xt]?(e?this.emit("error",e):this.emit(xt),this):(this[xt]=!0,this[Pt].length=0,this[rn]=0,typeof this.close=="function"&&!this[jh]&&this.close(),e?this.emit("error",e):this.emit(xt),this)}static isStream(e){return!!e&&(e instanceof t||e instanceof MF||e instanceof Ale&&(typeof e.pipe=="function"||typeof e.write=="function"&&typeof e.end=="function"))}};kF.Minipass=hI});var s1=O(je=>{"use strict";var Nle=je&&je.__createBinding||(Object.create?(function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}):(function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]})),Ole=je&&je.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),Cle=je&&je.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&Nle(e,t,n);return Ole(e,t),e};Object.defineProperty(je,"__esModule",{value:!0});je.PathScurry=je.Path=je.PathScurryDarwin=je.PathScurryPosix=je.PathScurryWin32=je.PathScurryBase=je.PathPosix=je.PathWin32=je.PathBase=je.ChildrenCache=je.ResolveCache=void 0;var KF=xF(),ip=require("node:path"),ble=require("node:url"),td=require("fs"),yle=Cle(require("node:fs")),wle=td.realpathSync.native,ep=require("node:fs/promises"),VF=YF(),nd={lstatSync:td.lstatSync,readdir:td.readdir,readdirSync:td.readdirSync,readlinkSync:td.readlinkSync,realpathSync:wle,promises:{lstat:ep.lstat,readdir:ep.readdir,readlink:ep.readlink,realpath:ep.realpath}},JF=t=>!t||t===nd||t===yle?nd:{...nd,...t,promises:{...nd.promises,...t.promises||{}}},QF=/^\\\\\?\\([a-z]:)\\?$/i,Lle=t=>t.replace(/\//g,"\\").replace(QF,"$1\\"),Dle=/[\\\/]/,_r=0,ZF=1,e1=2,fi=4,t1=6,n1=8,Ho=10,r1=12,Ir=15,ed=~Ir,pI=16,qF=32,rd=64,Gr=128,tp=256,rp=512,XF=rd|Gr|rp,Ple=1023,TI=t=>t.isFile()?n1:t.isDirectory()?fi:t.isSymbolicLink()?Ho:t.isCharacterDevice()?e1:t.isBlockDevice()?t1:t.isSocket()?r1:t.isFIFO()?ZF:_r,zF=new Map,id=t=>{let e=zF.get(t);if(e)return e;let n=t.normalize("NFKD");return zF.set(t,n),n},jF=new Map,np=t=>{let e=jF.get(t);if(e)return e;let n=id(t.toLowerCase());return jF.set(t,n),n},sd=class extends KF.LRUCache{constructor(){super({max:256})}};je.ResolveCache=sd;var sp=class extends KF.LRUCache{constructor(e=16*1024){super({maxSize:e,sizeCalculation:n=>n.length+1})}};je.ChildrenCache=sp;var i1=Symbol("PathScurry setAsCwd"),mn=class{name;root;roots;parent;nocase;isCWD=!1;#e;#t;get dev(){return this.#t}#s;get mode(){return this.#s}#r;get nlink(){return this.#r}#o;get uid(){return this.#o}#m;get gid(){return this.#m}#c;get rdev(){return this.#c}#d;get blksize(){return this.#d}#a;get ino(){return this.#a}#l;get size(){return this.#l}#i;get blocks(){return this.#i}#T;get atimeMs(){return this.#T}#S;get mtimeMs(){return this.#S}#E;get ctimeMs(){return this.#E}#f;get birthtimeMs(){return this.#f}#_;get atime(){return this.#_}#p;get mtime(){return this.#p}#N;get ctime(){return this.#N}#O;get birthtime(){return this.#O}#A;#g;#I;#h;#w;#C;#n;#P;#R;#L;get parentPath(){return(this.parent||this).fullpath()}get path(){return this.parentPath}constructor(e,n=_r,r,i,s,o,a){this.name=e,this.#A=s?np(e):id(e),this.#n=n&Ple,this.nocase=s,this.roots=i,this.root=r||this,this.#P=o,this.#I=a.fullpath,this.#w=a.relative,this.#C=a.relativePosix,this.parent=a.parent,this.parent?this.#e=this.parent.#e:this.#e=JF(a.fs)}depth(){return this.#g!==void 0?this.#g:this.parent?this.#g=this.parent.depth()+1:this.#g=0}childrenCache(){return this.#P}resolve(e){if(!e)return this;let n=this.getRootString(e),i=e.substring(n.length).split(this.splitSep);return n?this.getRoot(n).#x(i):this.#x(i)}#x(e){let n=this;for(let r of e)n=n.child(r);return n}children(){let e=this.#P.get(this);if(e)return e;let n=Object.assign([],{provisional:0});return this.#P.set(this,n),this.#n&=~pI,n}child(e,n){if(e===""||e===".")return this;if(e==="..")return this.parent||this;let r=this.children(),i=this.nocase?np(e):id(e);for(let l of r)if(l.#A===i)return l;let s=this.parent?this.sep:"",o=this.#I?this.#I+s+e:void 0,a=this.newChild(e,_r,{...n,parent:this,fullpath:o});return this.canReaddir()||(a.#n|=Gr),r.push(a),a}relative(){if(this.isCWD)return"";if(this.#w!==void 0)return this.#w;let e=this.name,n=this.parent;if(!n)return this.#w=this.name;let r=n.relative();return r+(!r||!n.parent?"":this.sep)+e}relativePosix(){if(this.sep==="/")return this.relative();if(this.isCWD)return"";if(this.#C!==void 0)return this.#C;let e=this.name,n=this.parent;if(!n)return this.#C=this.fullpathPosix();let r=n.relativePosix();return r+(!r||!n.parent?"":"/")+e}fullpath(){if(this.#I!==void 0)return this.#I;let e=this.name,n=this.parent;if(!n)return this.#I=this.name;let i=n.fullpath()+(n.parent?this.sep:"")+e;return this.#I=i}fullpathPosix(){if(this.#h!==void 0)return this.#h;if(this.sep==="/")return this.#h=this.fullpath();if(!this.parent){let i=this.fullpath().replace(/\\/g,"/");return/^[a-z]:\//i.test(i)?this.#h=`//?/${i}`:this.#h=i}let e=this.parent,n=e.fullpathPosix(),r=n+(!n||!e.parent?"":"/")+this.name;return this.#h=r}isUnknown(){return(this.#n&Ir)===_r}isType(e){return this[`is${e}`]()}getType(){return this.isUnknown()?"Unknown":this.isDirectory()?"Directory":this.isFile()?"File":this.isSymbolicLink()?"SymbolicLink":this.isFIFO()?"FIFO":this.isCharacterDevice()?"CharacterDevice":this.isBlockDevice()?"BlockDevice":this.isSocket()?"Socket":"Unknown"}isFile(){return(this.#n&Ir)===n1}isDirectory(){return(this.#n&Ir)===fi}isCharacterDevice(){return(this.#n&Ir)===e1}isBlockDevice(){return(this.#n&Ir)===t1}isFIFO(){return(this.#n&Ir)===ZF}isSocket(){return(this.#n&Ir)===r1}isSymbolicLink(){return(this.#n&Ho)===Ho}lstatCached(){return this.#n&qF?this:void 0}readlinkCached(){return this.#R}realpathCached(){return this.#L}readdirCached(){let e=this.children();return e.slice(0,e.provisional)}canReadlink(){if(this.#R)return!0;if(!this.parent)return!1;let e=this.#n&Ir;return!(e!==_r&&e!==Ho||this.#n&tp||this.#n&Gr)}calledReaddir(){return!!(this.#n&pI)}isENOENT(){return!!(this.#n&Gr)}isNamed(e){return this.nocase?this.#A===np(e):this.#A===id(e)}async readlink(){let e=this.#R;if(e)return e;if(this.canReadlink()&&this.parent)try{let n=await this.#e.promises.readlink(this.fullpath()),r=(await this.parent.realpath())?.resolve(n);if(r)return this.#R=r}catch(n){this.#u(n.code);return}}readlinkSync(){let e=this.#R;if(e)return e;if(this.canReadlink()&&this.parent)try{let n=this.#e.readlinkSync(this.fullpath()),r=this.parent.realpathSync()?.resolve(n);if(r)return this.#R=r}catch(n){this.#u(n.code);return}}#v(e){this.#n|=pI;for(let n=e.provisional;n<e.length;n++){let r=e[n];r&&r.#M()}}#M(){this.#n&Gr||(this.#n=(this.#n|Gr)&ed,this.#b())}#b(){let e=this.children();e.provisional=0;for(let n of e)n.#M()}#y(){this.#n|=rp,this.#U()}#U(){if(this.#n&rd)return;let e=this.#n;(e&Ir)===fi&&(e&=ed),this.#n=e|rd,this.#b()}#B(e=""){e==="ENOTDIR"||e==="EPERM"?this.#U():e==="ENOENT"?this.#M():this.children().provisional=0}#F(e=""){e==="ENOTDIR"?this.parent.#U():e==="ENOENT"&&this.#M()}#u(e=""){let n=this.#n;n|=tp,e==="ENOENT"&&(n|=Gr),(e==="EINVAL"||e==="UNKNOWN")&&(n&=ed),this.#n=n,e==="ENOTDIR"&&this.parent&&this.parent.#U()}#H(e,n){return this.#D(e,n)||this.#G(e,n)}#G(e,n){let r=TI(e),i=this.newChild(e.name,r,{parent:this}),s=i.#n&Ir;return s!==fi&&s!==Ho&&s!==_r&&(i.#n|=rd),n.unshift(i),n.provisional++,i}#D(e,n){for(let r=n.provisional;r<n.length;r++){let i=n[r];if((this.nocase?np(e.name):id(e.name))===i.#A)return this.#$(e,i,r,n)}}#$(e,n,r,i){let s=n.name;return n.#n=n.#n&ed|TI(e),s!==e.name&&(n.name=e.name),r!==i.provisional&&(r===i.length-1?i.pop():i.splice(r,1),i.unshift(n)),i.provisional++,n}async lstat(){if((this.#n&Gr)===0)try{return this.#V(await this.#e.promises.lstat(this.fullpath())),this}catch(e){this.#F(e.code)}}lstatSync(){if((this.#n&Gr)===0)try{return this.#V(this.#e.lstatSync(this.fullpath())),this}catch(e){this.#F(e.code)}}#V(e){let{atime:n,atimeMs:r,birthtime:i,birthtimeMs:s,blksize:o,blocks:a,ctime:l,ctimeMs:c,dev:u,gid:d,ino:E,mode:f,mtime:p,mtimeMs:h,nlink:T,rdev:S,size:m,uid:R}=e;this.#_=n,this.#T=r,this.#O=i,this.#f=s,this.#d=o,this.#i=a,this.#N=l,this.#E=c,this.#t=u,this.#m=d,this.#a=E,this.#s=f,this.#p=p,this.#S=h,this.#r=T,this.#c=S,this.#l=m,this.#o=R;let A=TI(e);this.#n=this.#n&ed|A|qF,A!==_r&&A!==fi&&A!==Ho&&(this.#n|=rd)}#k=[];#Y=!1;#q(e){this.#Y=!1;let n=this.#k.slice();this.#k.length=0,n.forEach(r=>r(null,e))}readdirCB(e,n=!1){if(!this.canReaddir()){n?e(null,[]):queueMicrotask(()=>e(null,[]));return}let r=this.children();if(this.calledReaddir()){let s=r.slice(0,r.provisional);n?e(null,s):queueMicrotask(()=>e(null,s));return}if(this.#k.push(e),this.#Y)return;this.#Y=!0;let i=this.fullpath();this.#e.readdir(i,{withFileTypes:!0},(s,o)=>{if(s)this.#B(s.code),r.provisional=0;else{for(let a of o)this.#H(a,r);this.#v(r)}this.#q(r.slice(0,r.provisional))})}#W;async readdir(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let n=this.fullpath();if(this.#W)await this.#W;else{let r=()=>{};this.#W=new Promise(i=>r=i);try{for(let i of await this.#e.promises.readdir(n,{withFileTypes:!0}))this.#H(i,e);this.#v(e)}catch(i){this.#B(i.code),e.provisional=0}this.#W=void 0,r()}return e.slice(0,e.provisional)}readdirSync(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let n=this.fullpath();try{for(let r of this.#e.readdirSync(n,{withFileTypes:!0}))this.#H(r,e);this.#v(e)}catch(r){this.#B(r.code),e.provisional=0}return e.slice(0,e.provisional)}canReaddir(){if(this.#n&XF)return!1;let e=Ir&this.#n;return e===_r||e===fi||e===Ho}shouldWalk(e,n){return(this.#n&fi)===fi&&!(this.#n&XF)&&!e.has(this)&&(!n||n(this))}async realpath(){if(this.#L)return this.#L;if(!((rp|tp|Gr)&this.#n))try{let e=await this.#e.promises.realpath(this.fullpath());return this.#L=this.resolve(e)}catch{this.#y()}}realpathSync(){if(this.#L)return this.#L;if(!((rp|tp|Gr)&this.#n))try{let e=this.#e.realpathSync(this.fullpath());return this.#L=this.resolve(e)}catch{this.#y()}}[i1](e){if(e===this)return;e.isCWD=!1,this.isCWD=!0;let n=new Set([]),r=[],i=this;for(;i&&i.parent;)n.add(i),i.#w=r.join(this.sep),i.#C=r.join("/"),i=i.parent,r.push("..");for(i=e;i&&i.parent&&!n.has(i);)i.#w=void 0,i.#C=void 0,i=i.parent}};je.PathBase=mn;var od=class t extends mn{sep="\\";splitSep=Dle;constructor(e,n=_r,r,i,s,o,a){super(e,n,r,i,s,o,a)}newChild(e,n=_r,r={}){return new t(e,n,this.root,this.roots,this.nocase,this.childrenCache(),r)}getRootString(e){return ip.win32.parse(e).root}getRoot(e){if(e=Lle(e.toUpperCase()),e===this.root.name)return this.root;for(let[n,r]of Object.entries(this.roots))if(this.sameRoot(e,n))return this.roots[e]=r;return this.roots[e]=new cd(e,this).root}sameRoot(e,n=this.root.name){return e=e.toUpperCase().replace(/\//g,"\\").replace(QF,"$1\\"),e===n}};je.PathWin32=od;var ad=class t extends mn{splitSep="/";sep="/";constructor(e,n=_r,r,i,s,o,a){super(e,n,r,i,s,o,a)}getRootString(e){return e.startsWith("/")?"/":""}getRoot(e){return this.root}newChild(e,n=_r,r={}){return new t(e,n,this.root,this.roots,this.nocase,this.childrenCache(),r)}};je.PathPosix=ad;var ld=class{root;rootPath;roots;cwd;#e;#t;#s;nocase;#r;constructor(e=process.cwd(),n,r,{nocase:i,childrenCacheSize:s=16*1024,fs:o=nd}={}){this.#r=JF(o),(e instanceof URL||e.startsWith("file://"))&&(e=(0,ble.fileURLToPath)(e));let a=n.resolve(e);this.roots=Object.create(null),this.rootPath=this.parseRootPath(a),this.#e=new sd,this.#t=new sd,this.#s=new sp(s);let l=a.substring(this.rootPath.length).split(r);if(l.length===1&&!l[0]&&l.pop(),i===void 0)throw new TypeError("must provide nocase setting to PathScurryBase ctor");this.nocase=i,this.root=this.newRoot(this.#r),this.roots[this.rootPath]=this.root;let c=this.root,u=l.length-1,d=n.sep,E=this.rootPath,f=!1;for(let p of l){let h=u--;c=c.child(p,{relative:new Array(h).fill("..").join(d),relativePosix:new Array(h).fill("..").join("/"),fullpath:E+=(f?"":d)+p}),f=!0}this.cwd=c}depth(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.depth()}childrenCache(){return this.#s}resolve(...e){let n="";for(let s=e.length-1;s>=0;s--){let o=e[s];if(!(!o||o===".")&&(n=n?`${o}/${n}`:o,this.isAbsolute(o)))break}let r=this.#e.get(n);if(r!==void 0)return r;let i=this.cwd.resolve(n).fullpath();return this.#e.set(n,i),i}resolvePosix(...e){let n="";for(let s=e.length-1;s>=0;s--){let o=e[s];if(!(!o||o===".")&&(n=n?`${o}/${n}`:o,this.isAbsolute(o)))break}let r=this.#t.get(n);if(r!==void 0)return r;let i=this.cwd.resolve(n).fullpathPosix();return this.#t.set(n,i),i}relative(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relative()}relativePosix(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relativePosix()}basename(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.name}dirname(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),(e.parent||e).fullpath()}async readdir(e=this.cwd,n={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof mn||(n=e,e=this.cwd);let{withFileTypes:r}=n;if(e.canReaddir()){let i=await e.readdir();return r?i:i.map(s=>s.name)}else return[]}readdirSync(e=this.cwd,n={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof mn||(n=e,e=this.cwd);let{withFileTypes:r=!0}=n;return e.canReaddir()?r?e.readdirSync():e.readdirSync().map(i=>i.name):[]}async lstat(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstat()}lstatSync(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstatSync()}async readlink(e=this.cwd,{withFileTypes:n}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof mn||(n=e.withFileTypes,e=this.cwd);let r=await e.readlink();return n?r:r?.fullpath()}readlinkSync(e=this.cwd,{withFileTypes:n}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof mn||(n=e.withFileTypes,e=this.cwd);let r=e.readlinkSync();return n?r:r?.fullpath()}async realpath(e=this.cwd,{withFileTypes:n}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof mn||(n=e.withFileTypes,e=this.cwd);let r=await e.realpath();return n?r:r?.fullpath()}realpathSync(e=this.cwd,{withFileTypes:n}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof mn||(n=e.withFileTypes,e=this.cwd);let r=e.realpathSync();return n?r:r?.fullpath()}async walk(e=this.cwd,n={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof mn||(n=e,e=this.cwd);let{withFileTypes:r=!0,follow:i=!1,filter:s,walkFilter:o}=n,a=[];(!s||s(e))&&a.push(r?e:e.fullpath());let l=new Set,c=(d,E)=>{l.add(d),d.readdirCB((f,p)=>{if(f)return E(f);let h=p.length;if(!h)return E();let T=()=>{--h===0&&E()};for(let S of p)(!s||s(S))&&a.push(r?S:S.fullpath()),i&&S.isSymbolicLink()?S.realpath().then(m=>m?.isUnknown()?m.lstat():m).then(m=>m?.shouldWalk(l,o)?c(m,T):T()):S.shouldWalk(l,o)?c(S,T):T()},!0)},u=e;return new Promise((d,E)=>{c(u,f=>{if(f)return E(f);d(a)})})}walkSync(e=this.cwd,n={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof mn||(n=e,e=this.cwd);let{withFileTypes:r=!0,follow:i=!1,filter:s,walkFilter:o}=n,a=[];(!s||s(e))&&a.push(r?e:e.fullpath());let l=new Set([e]);for(let c of l){let u=c.readdirSync();for(let d of u){(!s||s(d))&&a.push(r?d:d.fullpath());let E=d;if(d.isSymbolicLink()){if(!(i&&(E=d.realpathSync())))continue;E.isUnknown()&&E.lstatSync()}E.shouldWalk(l,o)&&l.add(E)}}return a}[Symbol.asyncIterator](){return this.iterate()}iterate(e=this.cwd,n={}){return typeof e=="string"?e=this.cwd.resolve(e):e instanceof mn||(n=e,e=this.cwd),this.stream(e,n)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(e=this.cwd,n={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof mn||(n=e,e=this.cwd);let{withFileTypes:r=!0,follow:i=!1,filter:s,walkFilter:o}=n;(!s||s(e))&&(yield r?e:e.fullpath());let a=new Set([e]);for(let l of a){let c=l.readdirSync();for(let u of c){(!s||s(u))&&(yield r?u:u.fullpath());let d=u;if(u.isSymbolicLink()){if(!(i&&(d=u.realpathSync())))continue;d.isUnknown()&&d.lstatSync()}d.shouldWalk(a,o)&&a.add(d)}}}stream(e=this.cwd,n={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof mn||(n=e,e=this.cwd);let{withFileTypes:r=!0,follow:i=!1,filter:s,walkFilter:o}=n,a=new VF.Minipass({objectMode:!0});(!s||s(e))&&a.write(r?e:e.fullpath());let l=new Set,c=[e],u=0,d=()=>{let E=!1;for(;!E;){let f=c.shift();if(!f){u===0&&a.end();return}u++,l.add(f);let p=(T,S,m=!1)=>{if(T)return a.emit("error",T);if(i&&!m){let R=[];for(let A of S)A.isSymbolicLink()&&R.push(A.realpath().then(I=>I?.isUnknown()?I.lstat():I));if(R.length){Promise.all(R).then(()=>p(null,S,!0));return}}for(let R of S)R&&(!s||s(R))&&(a.write(r?R:R.fullpath())||(E=!0));u--;for(let R of S){let A=R.realpathCached()||R;A.shouldWalk(l,o)&&c.push(A)}E&&!a.flowing?a.once("drain",d):h||d()},h=!0;f.readdirCB(p,!0),h=!1}};return d(),a}streamSync(e=this.cwd,n={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof mn||(n=e,e=this.cwd);let{withFileTypes:r=!0,follow:i=!1,filter:s,walkFilter:o}=n,a=new VF.Minipass({objectMode:!0}),l=new Set;(!s||s(e))&&a.write(r?e:e.fullpath());let c=[e],u=0,d=()=>{let E=!1;for(;!E;){let f=c.shift();if(!f){u===0&&a.end();return}u++,l.add(f);let p=f.readdirSync();for(let h of p)(!s||s(h))&&(a.write(r?h:h.fullpath())||(E=!0));u--;for(let h of p){let T=h;if(h.isSymbolicLink()){if(!(i&&(T=h.realpathSync())))continue;T.isUnknown()&&T.lstatSync()}T.shouldWalk(l,o)&&c.push(T)}}E&&!a.flowing&&a.once("drain",d)};return d(),a}chdir(e=this.cwd){let n=this.cwd;this.cwd=typeof e=="string"?this.cwd.resolve(e):e,this.cwd[i1](n)}};je.PathScurryBase=ld;var cd=class extends ld{sep="\\";constructor(e=process.cwd(),n={}){let{nocase:r=!0}=n;super(e,ip.win32,"\\",{...n,nocase:r}),this.nocase=r;for(let i=this.cwd;i;i=i.parent)i.nocase=this.nocase}parseRootPath(e){return ip.win32.parse(e).root.toUpperCase()}newRoot(e){return new od(this.rootPath,fi,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")||e.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(e)}};je.PathScurryWin32=cd;var ud=class extends ld{sep="/";constructor(e=process.cwd(),n={}){let{nocase:r=!1}=n;super(e,ip.posix,"/",{...n,nocase:r}),this.nocase=r}parseRootPath(e){return"/"}newRoot(e){return new ad(this.rootPath,fi,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")}};je.PathScurryPosix=ud;var op=class extends ud{constructor(e=process.cwd(),n={}){let{nocase:r=!0}=n;super(e,{...n,nocase:r})}};je.PathScurryDarwin=op;je.Path=process.platform==="win32"?od:ad;je.PathScurry=process.platform==="win32"?cd:process.platform==="darwin"?op:ud});var RI=O(ap=>{"use strict";Object.defineProperty(ap,"__esModule",{value:!0});ap.Pattern=void 0;var xle=$s(),vle=t=>t.length>=1,Mle=t=>t.length>=1,SI=class t{#e;#t;#s;length;#r;#o;#m;#c;#d;#a;#l=!0;constructor(e,n,r,i){if(!vle(e))throw new TypeError("empty pattern list");if(!Mle(n))throw new TypeError("empty glob list");if(n.length!==e.length)throw new TypeError("mismatched pattern list and glob list lengths");if(this.length=e.length,r<0||r>=this.length)throw new TypeError("index out of range");if(this.#e=e,this.#t=n,this.#s=r,this.#r=i,this.#s===0){if(this.isUNC()){let[s,o,a,l,...c]=this.#e,[u,d,E,f,...p]=this.#t;c[0]===""&&(c.shift(),p.shift());let h=[s,o,a,l,""].join("/"),T=[u,d,E,f,""].join("/");this.#e=[h,...c],this.#t=[T,...p],this.length=this.#e.length}else if(this.isDrive()||this.isAbsolute()){let[s,...o]=this.#e,[a,...l]=this.#t;o[0]===""&&(o.shift(),l.shift());let c=s+"/",u=a+"/";this.#e=[c,...o],this.#t=[u,...l],this.length=this.#e.length}}}pattern(){return this.#e[this.#s]}isString(){return typeof this.#e[this.#s]=="string"}isGlobstar(){return this.#e[this.#s]===xle.GLOBSTAR}isRegExp(){return this.#e[this.#s]instanceof RegExp}globString(){return this.#m=this.#m||(this.#s===0?this.isAbsolute()?this.#t[0]+this.#t.slice(1).join("/"):this.#t.join("/"):this.#t.slice(this.#s).join("/"))}hasMore(){return this.length>this.#s+1}rest(){return this.#o!==void 0?this.#o:this.hasMore()?(this.#o=new t(this.#e,this.#t,this.#s+1,this.#r),this.#o.#a=this.#a,this.#o.#d=this.#d,this.#o.#c=this.#c,this.#o):this.#o=null}isUNC(){let e=this.#e;return this.#d!==void 0?this.#d:this.#d=this.#r==="win32"&&this.#s===0&&e[0]===""&&e[1]===""&&typeof e[2]=="string"&&!!e[2]&&typeof e[3]=="string"&&!!e[3]}isDrive(){let e=this.#e;return this.#c!==void 0?this.#c:this.#c=this.#r==="win32"&&this.#s===0&&this.length>1&&typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0])}isAbsolute(){let e=this.#e;return this.#a!==void 0?this.#a:this.#a=e[0]===""&&e.length>1||this.isDrive()||this.isUNC()}root(){let e=this.#e[0];return typeof e=="string"&&this.isAbsolute()&&this.#s===0?e:""}checkFollowGlobstar(){return!(this.#s===0||!this.isGlobstar()||!this.#l)}markFollowGlobstar(){return this.#s===0||!this.isGlobstar()||!this.#l?!1:(this.#l=!1,!0)}};ap.Pattern=SI});var d1=O(kn=>{"use strict";var Ule=kn&&kn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(kn,"__esModule",{value:!0});kn.Minipass=kn.isWritable=kn.isReadable=kn.isStream=void 0;var o1=typeof process=="object"&&process?process:{stdout:null,stderr:null},OI=require("node:events"),u1=Ule(require("node:stream")),Ble=require("node:string_decoder"),Fle=t=>!!t&&typeof t=="object"&&(t instanceof hp||t instanceof u1.default||(0,kn.isReadable)(t)||(0,kn.isWritable)(t));kn.isStream=Fle;var Hle=t=>!!t&&typeof t=="object"&&t instanceof OI.EventEmitter&&typeof t.pipe=="function"&&t.pipe!==u1.default.Writable.prototype.pipe;kn.isReadable=Hle;var Gle=t=>!!t&&typeof t=="object"&&t instanceof OI.EventEmitter&&typeof t.write=="function"&&typeof t.end=="function";kn.isWritable=Gle;var ns=Symbol("EOF"),rs=Symbol("maybeEmitEnd"),Ys=Symbol("emittedEnd"),lp=Symbol("emittingEnd"),dd=Symbol("emittedError"),cp=Symbol("closed"),a1=Symbol("read"),up=Symbol("flush"),l1=Symbol("flushChunk"),$r=Symbol("encoding"),wl=Symbol("decoder"),sn=Symbol("flowing"),fd=Symbol("paused"),Ll=Symbol("resume"),on=Symbol("buffer"),Wn=Symbol("pipes"),an=Symbol("bufferLength"),AI=Symbol("bufferPush"),dp=Symbol("bufferShift"),Pn=Symbol("objectMode"),vt=Symbol("destroyed"),mI=Symbol("error"),gI=Symbol("emitData"),c1=Symbol("emitEnd"),II=Symbol("emitEnd2"),Ei=Symbol("async"),_I=Symbol("abort"),fp=Symbol("aborted"),Ed=Symbol("signal"),Go=Symbol("dataListeners"),or=Symbol("discarded"),hd=t=>Promise.resolve().then(t),$le=t=>t(),Wle=t=>t==="end"||t==="finish"||t==="prefinish",kle=t=>t instanceof ArrayBuffer||!!t&&typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,Yle=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),Ep=class{src;dest;opts;ondrain;constructor(e,n,r){this.src=e,this.dest=n,this.opts=r,this.ondrain=()=>e[Ll](),this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(e){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},NI=class extends Ep{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,n,r){super(e,n,r),this.proxyErrors=i=>n.emit("error",i),e.on("error",this.proxyErrors)}},Vle=t=>!!t.objectMode,qle=t=>!t.objectMode&&!!t.encoding&&t.encoding!=="buffer",hp=class extends OI.EventEmitter{[sn]=!1;[fd]=!1;[Wn]=[];[on]=[];[Pn];[$r];[Ei];[wl];[ns]=!1;[Ys]=!1;[lp]=!1;[cp]=!1;[dd]=null;[an]=0;[vt]=!1;[Ed];[fp]=!1;[Go]=0;[or]=!1;writable=!0;readable=!0;constructor(...e){let n=e[0]||{};if(super(),n.objectMode&&typeof n.encoding=="string")throw new TypeError("Encoding and objectMode may not be used together");Vle(n)?(this[Pn]=!0,this[$r]=null):qle(n)?(this[$r]=n.encoding,this[Pn]=!1):(this[Pn]=!1,this[$r]=null),this[Ei]=!!n.async,this[wl]=this[$r]?new Ble.StringDecoder(this[$r]):null,n&&n.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[on]}),n&&n.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[Wn]});let{signal:r}=n;r&&(this[Ed]=r,r.aborted?this[_I]():r.addEventListener("abort",()=>this[_I]()))}get bufferLength(){return this[an]}get encoding(){return this[$r]}set encoding(e){throw new Error("Encoding must be set at instantiation time")}setEncoding(e){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[Pn]}set objectMode(e){throw new Error("objectMode must be set at instantiation time")}get async(){return this[Ei]}set async(e){this[Ei]=this[Ei]||!!e}[_I](){this[fp]=!0,this.emit("abort",this[Ed]?.reason),this.destroy(this[Ed]?.reason)}get aborted(){return this[fp]}set aborted(e){}write(e,n,r){if(this[fp])return!1;if(this[ns])throw new Error("write after end");if(this[vt])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof n=="function"&&(r=n,n="utf8"),n||(n="utf8");let i=this[Ei]?hd:$le;if(!this[Pn]&&!Buffer.isBuffer(e)){if(Yle(e))e=Buffer.from(e.buffer,e.byteOffset,e.byteLength);else if(kle(e))e=Buffer.from(e);else if(typeof e!="string")throw new Error("Non-contiguous data written to non-objectMode stream")}return this[Pn]?(this[sn]&&this[an]!==0&&this[up](!0),this[sn]?this.emit("data",e):this[AI](e),this[an]!==0&&this.emit("readable"),r&&i(r),this[sn]):e.length?(typeof e=="string"&&!(n===this[$r]&&!this[wl]?.lastNeed)&&(e=Buffer.from(e,n)),Buffer.isBuffer(e)&&this[$r]&&(e=this[wl].write(e)),this[sn]&&this[an]!==0&&this[up](!0),this[sn]?this.emit("data",e):this[AI](e),this[an]!==0&&this.emit("readable"),r&&i(r),this[sn]):(this[an]!==0&&this.emit("readable"),r&&i(r),this[sn])}read(e){if(this[vt])return null;if(this[or]=!1,this[an]===0||e===0||e&&e>this[an])return this[rs](),null;this[Pn]&&(e=null),this[on].length>1&&!this[Pn]&&(this[on]=[this[$r]?this[on].join(""):Buffer.concat(this[on],this[an])]);let n=this[a1](e||null,this[on][0]);return this[rs](),n}[a1](e,n){if(this[Pn])this[dp]();else{let r=n;e===r.length||e===null?this[dp]():typeof r=="string"?(this[on][0]=r.slice(e),n=r.slice(0,e),this[an]-=e):(this[on][0]=r.subarray(e),n=r.subarray(0,e),this[an]-=e)}return this.emit("data",n),!this[on].length&&!this[ns]&&this.emit("drain"),n}end(e,n,r){return typeof e=="function"&&(r=e,e=void 0),typeof n=="function"&&(r=n,n="utf8"),e!==void 0&&this.write(e,n),r&&this.once("end",r),this[ns]=!0,this.writable=!1,(this[sn]||!this[fd])&&this[rs](),this}[Ll](){this[vt]||(!this[Go]&&!this[Wn].length&&(this[or]=!0),this[fd]=!1,this[sn]=!0,this.emit("resume"),this[on].length?this[up]():this[ns]?this[rs]():this.emit("drain"))}resume(){return this[Ll]()}pause(){this[sn]=!1,this[fd]=!0,this[or]=!1}get destroyed(){return this[vt]}get flowing(){return this[sn]}get paused(){return this[fd]}[AI](e){this[Pn]?this[an]+=1:this[an]+=e.length,this[on].push(e)}[dp](){return this[Pn]?this[an]-=1:this[an]-=this[on][0].length,this[on].shift()}[up](e=!1){do;while(this[l1](this[dp]())&&this[on].length);!e&&!this[on].length&&!this[ns]&&this.emit("drain")}[l1](e){return this.emit("data",e),this[sn]}pipe(e,n){if(this[vt])return e;this[or]=!1;let r=this[Ys];return n=n||{},e===o1.stdout||e===o1.stderr?n.end=!1:n.end=n.end!==!1,n.proxyErrors=!!n.proxyErrors,r?n.end&&e.end():(this[Wn].push(n.proxyErrors?new NI(this,e,n):new Ep(this,e,n)),this[Ei]?hd(()=>this[Ll]()):this[Ll]()),e}unpipe(e){let n=this[Wn].find(r=>r.dest===e);n&&(this[Wn].length===1?(this[sn]&&this[Go]===0&&(this[sn]=!1),this[Wn]=[]):this[Wn].splice(this[Wn].indexOf(n),1),n.unpipe())}addListener(e,n){return this.on(e,n)}on(e,n){let r=super.on(e,n);if(e==="data")this[or]=!1,this[Go]++,!this[Wn].length&&!this[sn]&&this[Ll]();else if(e==="readable"&&this[an]!==0)super.emit("readable");else if(Wle(e)&&this[Ys])super.emit(e),this.removeAllListeners(e);else if(e==="error"&&this[dd]){let i=n;this[Ei]?hd(()=>i.call(this,this[dd])):i.call(this,this[dd])}return r}removeListener(e,n){return this.off(e,n)}off(e,n){let r=super.off(e,n);return e==="data"&&(this[Go]=this.listeners("data").length,this[Go]===0&&!this[or]&&!this[Wn].length&&(this[sn]=!1)),r}removeAllListeners(e){let n=super.removeAllListeners(e);return(e==="data"||e===void 0)&&(this[Go]=0,!this[or]&&!this[Wn].length&&(this[sn]=!1)),n}get emittedEnd(){return this[Ys]}[rs](){!this[lp]&&!this[Ys]&&!this[vt]&&this[on].length===0&&this[ns]&&(this[lp]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[cp]&&this.emit("close"),this[lp]=!1)}emit(e,...n){let r=n[0];if(e!=="error"&&e!=="close"&&e!==vt&&this[vt])return!1;if(e==="data")return!this[Pn]&&!r?!1:this[Ei]?(hd(()=>this[gI](r)),!0):this[gI](r);if(e==="end")return this[c1]();if(e==="close"){if(this[cp]=!0,!this[Ys]&&!this[vt])return!1;let s=super.emit("close");return this.removeAllListeners("close"),s}else if(e==="error"){this[dd]=r,super.emit(mI,r);let s=!this[Ed]||this.listeners("error").length?super.emit("error",r):!1;return this[rs](),s}else if(e==="resume"){let s=super.emit("resume");return this[rs](),s}else if(e==="finish"||e==="prefinish"){let s=super.emit(e);return this.removeAllListeners(e),s}let i=super.emit(e,...n);return this[rs](),i}[gI](e){for(let r of this[Wn])r.dest.write(e)===!1&&this.pause();let n=this[or]?!1:super.emit("data",e);return this[rs](),n}[c1](){return this[Ys]?!1:(this[Ys]=!0,this.readable=!1,this[Ei]?(hd(()=>this[II]()),!0):this[II]())}[II](){if(this[wl]){let n=this[wl].end();if(n){for(let r of this[Wn])r.dest.write(n);this[or]||super.emit("data",n)}}for(let n of this[Wn])n.end();let e=super.emit("end");return this.removeAllListeners("end"),e}async collect(){let e=Object.assign([],{dataLength:0});this[Pn]||(e.dataLength=0);let n=this.promise();return this.on("data",r=>{e.push(r),this[Pn]||(e.dataLength+=r.length)}),await n,e}async concat(){if(this[Pn])throw new Error("cannot concat in objectMode");let e=await this.collect();return this[$r]?e.join(""):Buffer.concat(e,e.dataLength)}async promise(){return new Promise((e,n)=>{this.on(vt,()=>n(new Error("stream destroyed"))),this.on("error",r=>n(r)),this.on("end",()=>e())})}[Symbol.asyncIterator](){this[or]=!1;let e=!1,n=async()=>(this.pause(),e=!0,{value:void 0,done:!0});return{next:()=>{if(e)return n();let i=this.read();if(i!==null)return Promise.resolve({done:!1,value:i});if(this[ns])return n();let s,o,a=d=>{this.off("data",l),this.off("end",c),this.off(vt,u),n(),o(d)},l=d=>{this.off("error",a),this.off("end",c),this.off(vt,u),this.pause(),s({value:d,done:!!this[ns]})},c=()=>{this.off("error",a),this.off("data",l),this.off(vt,u),n(),s({done:!0,value:void 0})},u=()=>a(new Error("stream destroyed"));return new Promise((d,E)=>{o=E,s=d,this.once(vt,u),this.once("error",a),this.once("end",c),this.once("data",l)})},throw:n,return:n,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[or]=!1;let e=!1,n=()=>(this.pause(),this.off(mI,n),this.off(vt,n),this.off("end",n),e=!0,{done:!0,value:void 0}),r=()=>{if(e)return n();let i=this.read();return i===null?n():{done:!1,value:i}};return this.once("end",n),this.once(mI,n),this.once(vt,n),{next:r,throw:n,return:n,[Symbol.iterator](){return this}}}destroy(e){if(this[vt])return e?this.emit("error",e):this.emit(vt),this;this[vt]=!0,this[or]=!0,this[on].length=0,this[an]=0;let n=this;return typeof n.close=="function"&&!this[cp]&&n.close(),e?this.emit("error",e):this.emit(vt),this}static get isStream(){return kn.isStream}};kn.Minipass=hp});var bI=O(pp=>{"use strict";Object.defineProperty(pp,"__esModule",{value:!0});pp.Ignore=void 0;var f1=$s(),Xle=RI(),zle=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",CI=class{relative;relativeChildren;absolute;absoluteChildren;platform;mmopts;constructor(e,{nobrace:n,nocase:r,noext:i,noglobstar:s,platform:o=zle}){this.relative=[],this.absolute=[],this.relativeChildren=[],this.absoluteChildren=[],this.platform=o,this.mmopts={dot:!0,nobrace:n,nocase:r,noext:i,noglobstar:s,optimizationLevel:2,platform:o,nocomment:!0,nonegate:!0};for(let a of e)this.add(a)}add(e){let n=new f1.Minimatch(e,this.mmopts);for(let r=0;r<n.set.length;r++){let i=n.set[r],s=n.globParts[r];if(!i||!s)throw new Error("invalid pattern object");for(;i[0]==="."&&s[0]===".";)i.shift(),s.shift();let o=new Xle.Pattern(i,s,0,this.platform),a=new f1.Minimatch(o.globString(),this.mmopts),l=s[s.length-1]==="**",c=o.isAbsolute();c?this.absolute.push(a):this.relative.push(a),l&&(c?this.absoluteChildren.push(a):this.relativeChildren.push(a))}}ignored(e){let n=e.fullpath(),r=`${n}/`,i=e.relative()||".",s=`${i}/`;for(let o of this.relative)if(o.match(i)||o.match(s))return!0;for(let o of this.absolute)if(o.match(n)||o.match(r))return!0;return!1}childrenIgnored(e){let n=e.fullpath()+"/",r=(e.relative()||".")+"/";for(let i of this.relativeChildren)if(i.match(r))return!0;for(let i of this.absoluteChildren)if(i.match(n))return!0;return!1}};pp.Ignore=CI});var h1=O(hi=>{"use strict";Object.defineProperty(hi,"__esModule",{value:!0});hi.Processor=hi.SubWalks=hi.MatchRecord=hi.HasWalkedCache=void 0;var E1=$s(),Tp=class t{store;constructor(e=new Map){this.store=e}copy(){return new t(new Map(this.store))}hasWalked(e,n){return this.store.get(e.fullpath())?.has(n.globString())}storeWalked(e,n){let r=e.fullpath(),i=this.store.get(r);i?i.add(n.globString()):this.store.set(r,new Set([n.globString()]))}};hi.HasWalkedCache=Tp;var Sp=class{store=new Map;add(e,n,r){let i=(n?2:0)|(r?1:0),s=this.store.get(e);this.store.set(e,s===void 0?i:i&s)}entries(){return[...this.store.entries()].map(([e,n])=>[e,!!(n&2),!!(n&1)])}};hi.MatchRecord=Sp;var Rp=class{store=new Map;add(e,n){if(!e.canReaddir())return;let r=this.store.get(e);r?r.find(i=>i.globString()===n.globString())||r.push(n):this.store.set(e,[n])}get(e){let n=this.store.get(e);if(!n)throw new Error("attempting to walk unknown path");return n}entries(){return this.keys().map(e=>[e,this.store.get(e)])}keys(){return[...this.store.keys()].filter(e=>e.canReaddir())}};hi.SubWalks=Rp;var yI=class t{hasWalkedCache;matches=new Sp;subwalks=new Rp;patterns;follow;dot;opts;constructor(e,n){this.opts=e,this.follow=!!e.follow,this.dot=!!e.dot,this.hasWalkedCache=n?n.copy():new Tp}processPatterns(e,n){this.patterns=n;let r=n.map(i=>[e,i]);for(let[i,s]of r){this.hasWalkedCache.storeWalked(i,s);let o=s.root(),a=s.isAbsolute()&&this.opts.absolute!==!1;if(o){i=i.resolve(o==="/"&&this.opts.root!==void 0?this.opts.root:o);let d=s.rest();if(d)s=d;else{this.matches.add(i,!0,!1);continue}}if(i.isENOENT())continue;let l,c,u=!1;for(;typeof(l=s.pattern())=="string"&&(c=s.rest());)i=i.resolve(l),s=c,u=!0;if(l=s.pattern(),c=s.rest(),u){if(this.hasWalkedCache.hasWalked(i,s))continue;this.hasWalkedCache.storeWalked(i,s)}if(typeof l=="string"){let d=l===".."||l===""||l===".";this.matches.add(i.resolve(l),a,d);continue}else if(l===E1.GLOBSTAR){(!i.isSymbolicLink()||this.follow||s.checkFollowGlobstar())&&this.subwalks.add(i,s);let d=c?.pattern(),E=c?.rest();if(!c||(d===""||d===".")&&!E)this.matches.add(i,a,d===""||d===".");else if(d===".."){let f=i.parent||i;E?this.hasWalkedCache.hasWalked(f,E)||this.subwalks.add(f,E):this.matches.add(f,a,!0)}}else l instanceof RegExp&&this.subwalks.add(i,s)}return this}subwalkTargets(){return this.subwalks.keys()}child(){return new t(this.opts,this.hasWalkedCache)}filterEntries(e,n){let r=this.subwalks.get(e),i=this.child();for(let s of n)for(let o of r){let a=o.isAbsolute(),l=o.pattern(),c=o.rest();l===E1.GLOBSTAR?i.testGlobstar(s,o,c,a):l instanceof RegExp?i.testRegExp(s,l,c,a):i.testString(s,l,c,a)}return i}testGlobstar(e,n,r,i){if((this.dot||!e.name.startsWith("."))&&(n.hasMore()||this.matches.add(e,i,!1),e.canReaddir()&&(this.follow||!e.isSymbolicLink()?this.subwalks.add(e,n):e.isSymbolicLink()&&(r&&n.checkFollowGlobstar()?this.subwalks.add(e,r):n.markFollowGlobstar()&&this.subwalks.add(e,n)))),r){let s=r.pattern();if(typeof s=="string"&&s!==".."&&s!==""&&s!==".")this.testString(e,s,r.rest(),i);else if(s===".."){let o=e.parent||e;this.subwalks.add(o,r)}else s instanceof RegExp&&this.testRegExp(e,s,r.rest(),i)}}testRegExp(e,n,r,i){n.test(e.name)&&(r?this.subwalks.add(e,r):this.matches.add(e,i,!1))}testString(e,n,r,i){e.isNamed(n)&&(r?this.subwalks.add(e,r):this.matches.add(e,i,!1))}};hi.Processor=yI});var S1=O(Vs=>{"use strict";Object.defineProperty(Vs,"__esModule",{value:!0});Vs.GlobStream=Vs.GlobWalker=Vs.GlobUtil=void 0;var jle=d1(),p1=bI(),T1=h1(),Kle=(t,e)=>typeof t=="string"?new p1.Ignore([t],e):Array.isArray(t)?new p1.Ignore(t,e):t,pd=class{path;patterns;opts;seen=new Set;paused=!1;aborted=!1;#e=[];#t;#s;signal;maxDepth;includeChildMatches;constructor(e,n,r){if(this.patterns=e,this.path=n,this.opts=r,this.#s=!r.posix&&r.platform==="win32"?"\\":"/",this.includeChildMatches=r.includeChildMatches!==!1,(r.ignore||!this.includeChildMatches)&&(this.#t=Kle(r.ignore??[],r),!this.includeChildMatches&&typeof this.#t.add!="function")){let i="cannot ignore child matches, ignore lacks add() method.";throw new Error(i)}this.maxDepth=r.maxDepth||1/0,r.signal&&(this.signal=r.signal,this.signal.addEventListener("abort",()=>{this.#e.length=0}))}#r(e){return this.seen.has(e)||!!this.#t?.ignored?.(e)}#o(e){return!!this.#t?.childrenIgnored?.(e)}pause(){this.paused=!0}resume(){if(this.signal?.aborted)return;this.paused=!1;let e;for(;!this.paused&&(e=this.#e.shift());)e()}onResume(e){this.signal?.aborted||(this.paused?this.#e.push(e):e())}async matchCheck(e,n){if(n&&this.opts.nodir)return;let r;if(this.opts.realpath){if(r=e.realpathCached()||await e.realpath(),!r)return;e=r}let s=e.isUnknown()||this.opts.stat?await e.lstat():e;if(this.opts.follow&&this.opts.nodir&&s?.isSymbolicLink()){let o=await s.realpath();o&&(o.isUnknown()||this.opts.stat)&&await o.lstat()}return this.matchCheckTest(s,n)}matchCheckTest(e,n){return e&&(this.maxDepth===1/0||e.depth()<=this.maxDepth)&&(!n||e.canReaddir())&&(!this.opts.nodir||!e.isDirectory())&&(!this.opts.nodir||!this.opts.follow||!e.isSymbolicLink()||!e.realpathCached()?.isDirectory())&&!this.#r(e)?e:void 0}matchCheckSync(e,n){if(n&&this.opts.nodir)return;let r;if(this.opts.realpath){if(r=e.realpathCached()||e.realpathSync(),!r)return;e=r}let s=e.isUnknown()||this.opts.stat?e.lstatSync():e;if(this.opts.follow&&this.opts.nodir&&s?.isSymbolicLink()){let o=s.realpathSync();o&&(o?.isUnknown()||this.opts.stat)&&o.lstatSync()}return this.matchCheckTest(s,n)}matchFinish(e,n){if(this.#r(e))return;if(!this.includeChildMatches&&this.#t?.add){let s=`${e.relativePosix()}/**`;this.#t.add(s)}let r=this.opts.absolute===void 0?n:this.opts.absolute;this.seen.add(e);let i=this.opts.mark&&e.isDirectory()?this.#s:"";if(this.opts.withFileTypes)this.matchEmit(e);else if(r){let s=this.opts.posix?e.fullpathPosix():e.fullpath();this.matchEmit(s+i)}else{let s=this.opts.posix?e.relativePosix():e.relative(),o=this.opts.dotRelative&&!s.startsWith(".."+this.#s)?"."+this.#s:"";this.matchEmit(s?o+s+i:"."+i)}}async match(e,n,r){let i=await this.matchCheck(e,r);i&&this.matchFinish(i,n)}matchSync(e,n,r){let i=this.matchCheckSync(e,r);i&&this.matchFinish(i,n)}walkCB(e,n,r){this.signal?.aborted&&r(),this.walkCB2(e,n,new T1.Processor(this.opts),r)}walkCB2(e,n,r,i){if(this.#o(e))return i();if(this.signal?.aborted&&i(),this.paused){this.onResume(()=>this.walkCB2(e,n,r,i));return}r.processPatterns(e,n);let s=1,o=()=>{--s===0&&i()};for(let[a,l,c]of r.matches.entries())this.#r(a)||(s++,this.match(a,l,c).then(()=>o()));for(let a of r.subwalkTargets()){if(this.maxDepth!==1/0&&a.depth()>=this.maxDepth)continue;s++;let l=a.readdirCached();a.calledReaddir()?this.walkCB3(a,l,r,o):a.readdirCB((c,u)=>this.walkCB3(a,u,r,o),!0)}o()}walkCB3(e,n,r,i){r=r.filterEntries(e,n);let s=1,o=()=>{--s===0&&i()};for(let[a,l,c]of r.matches.entries())this.#r(a)||(s++,this.match(a,l,c).then(()=>o()));for(let[a,l]of r.subwalks.entries())s++,this.walkCB2(a,l,r.child(),o);o()}walkCBSync(e,n,r){this.signal?.aborted&&r(),this.walkCB2Sync(e,n,new T1.Processor(this.opts),r)}walkCB2Sync(e,n,r,i){if(this.#o(e))return i();if(this.signal?.aborted&&i(),this.paused){this.onResume(()=>this.walkCB2Sync(e,n,r,i));return}r.processPatterns(e,n);let s=1,o=()=>{--s===0&&i()};for(let[a,l,c]of r.matches.entries())this.#r(a)||this.matchSync(a,l,c);for(let a of r.subwalkTargets()){if(this.maxDepth!==1/0&&a.depth()>=this.maxDepth)continue;s++;let l=a.readdirSync();this.walkCB3Sync(a,l,r,o)}o()}walkCB3Sync(e,n,r,i){r=r.filterEntries(e,n);let s=1,o=()=>{--s===0&&i()};for(let[a,l,c]of r.matches.entries())this.#r(a)||this.matchSync(a,l,c);for(let[a,l]of r.subwalks.entries())s++,this.walkCB2Sync(a,l,r.child(),o);o()}};Vs.GlobUtil=pd;var wI=class extends pd{matches=new Set;constructor(e,n,r){super(e,n,r)}matchEmit(e){this.matches.add(e)}async walk(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&await this.path.lstat(),await new Promise((e,n)=>{this.walkCB(this.path,this.patterns,()=>{this.signal?.aborted?n(this.signal.reason):e(this.matches)})}),this.matches}walkSync(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>{if(this.signal?.aborted)throw this.signal.reason}),this.matches}};Vs.GlobWalker=wI;var LI=class extends pd{results;constructor(e,n,r){super(e,n,r),this.results=new jle.Minipass({signal:this.signal,objectMode:!0}),this.results.on("drain",()=>this.resume()),this.results.on("resume",()=>this.resume())}matchEmit(e){this.results.write(e),this.results.flowing||this.pause()}stream(){let e=this.path;return e.isUnknown()?e.lstat().then(()=>{this.walkCB(e,this.patterns,()=>this.results.end())}):this.walkCB(e,this.patterns,()=>this.results.end()),this.results}streamSync(){return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>this.results.end()),this.results}};Vs.GlobStream=LI});var PI=O(gp=>{"use strict";Object.defineProperty(gp,"__esModule",{value:!0});gp.Glob=void 0;var Jle=$s(),Qle=require("node:url"),Ap=s1(),Zle=RI(),mp=S1(),ece=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",DI=class{absolute;cwd;root;dot;dotRelative;follow;ignore;magicalBraces;mark;matchBase;maxDepth;nobrace;nocase;nodir;noext;noglobstar;pattern;platform;realpath;scurry;stat;signal;windowsPathsNoEscape;withFileTypes;includeChildMatches;opts;patterns;constructor(e,n){if(!n)throw new TypeError("glob options required");if(this.withFileTypes=!!n.withFileTypes,this.signal=n.signal,this.follow=!!n.follow,this.dot=!!n.dot,this.dotRelative=!!n.dotRelative,this.nodir=!!n.nodir,this.mark=!!n.mark,n.cwd?(n.cwd instanceof URL||n.cwd.startsWith("file://"))&&(n.cwd=(0,Qle.fileURLToPath)(n.cwd)):this.cwd="",this.cwd=n.cwd||"",this.root=n.root,this.magicalBraces=!!n.magicalBraces,this.nobrace=!!n.nobrace,this.noext=!!n.noext,this.realpath=!!n.realpath,this.absolute=n.absolute,this.includeChildMatches=n.includeChildMatches!==!1,this.noglobstar=!!n.noglobstar,this.matchBase=!!n.matchBase,this.maxDepth=typeof n.maxDepth=="number"?n.maxDepth:1/0,this.stat=!!n.stat,this.ignore=n.ignore,this.withFileTypes&&this.absolute!==void 0)throw new Error("cannot set absolute and withFileTypes:true");if(typeof e=="string"&&(e=[e]),this.windowsPathsNoEscape=!!n.windowsPathsNoEscape||n.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(e=e.map(l=>l.replace(/\\/g,"/"))),this.matchBase){if(n.noglobstar)throw new TypeError("base matching requires globstar");e=e.map(l=>l.includes("/")?l:`./**/${l}`)}if(this.pattern=e,this.platform=n.platform||ece,this.opts={...n,platform:this.platform},n.scurry){if(this.scurry=n.scurry,n.nocase!==void 0&&n.nocase!==n.scurry.nocase)throw new Error("nocase option contradicts provided scurry option")}else{let l=n.platform==="win32"?Ap.PathScurryWin32:n.platform==="darwin"?Ap.PathScurryDarwin:n.platform?Ap.PathScurryPosix:Ap.PathScurry;this.scurry=new l(this.cwd,{nocase:n.nocase,fs:n.fs})}this.nocase=this.scurry.nocase;let r=this.platform==="darwin"||this.platform==="win32",i={...n,dot:this.dot,matchBase:this.matchBase,nobrace:this.nobrace,nocase:this.nocase,nocaseMagicOnly:r,nocomment:!0,noext:this.noext,nonegate:!0,optimizationLevel:2,platform:this.platform,windowsPathsNoEscape:this.windowsPathsNoEscape,debug:!!this.opts.debug},s=this.pattern.map(l=>new Jle.Minimatch(l,i)),[o,a]=s.reduce((l,c)=>(l[0].push(...c.set),l[1].push(...c.globParts),l),[[],[]]);this.patterns=o.map((l,c)=>{let u=a[c];if(!u)throw new Error("invalid pattern object");return new Zle.Pattern(l,u,0,this.platform)})}async walk(){return[...await new mp.GlobWalker(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walk()]}walkSync(){return[...new mp.GlobWalker(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walkSync()]}stream(){return new mp.GlobStream(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).stream()}streamSync(){return new mp.GlobStream(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).streamSync()}iterateSync(){return this.streamSync()[Symbol.iterator]()}[Symbol.iterator](){return this.iterateSync()}iterate(){return this.stream()[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterate()}};gp.Glob=DI});var xI=O(Ip=>{"use strict";Object.defineProperty(Ip,"__esModule",{value:!0});Ip.hasMagic=void 0;var tce=$s(),nce=(t,e={})=>{Array.isArray(t)||(t=[t]);for(let n of t)if(new tce.Minimatch(n,e).hasMagic())return!0;return!1};Ip.hasMagic=nce});var g1=O(Ue=>{"use strict";Object.defineProperty(Ue,"__esModule",{value:!0});Ue.glob=Ue.sync=Ue.iterate=Ue.iterateSync=Ue.stream=Ue.streamSync=Ue.Ignore=Ue.hasMagic=Ue.Glob=Ue.unescape=Ue.escape=void 0;Ue.globStreamSync=Td;Ue.globStream=vI;Ue.globSync=MI;Ue.globIterateSync=Sd;Ue.globIterate=UI;var R1=$s(),$o=PI(),rce=xI(),m1=$s();Object.defineProperty(Ue,"escape",{enumerable:!0,get:function(){return m1.escape}});Object.defineProperty(Ue,"unescape",{enumerable:!0,get:function(){return m1.unescape}});var ice=PI();Object.defineProperty(Ue,"Glob",{enumerable:!0,get:function(){return ice.Glob}});var sce=xI();Object.defineProperty(Ue,"hasMagic",{enumerable:!0,get:function(){return sce.hasMagic}});var oce=bI();Object.defineProperty(Ue,"Ignore",{enumerable:!0,get:function(){return oce.Ignore}});function Td(t,e={}){return new $o.Glob(t,e).streamSync()}function vI(t,e={}){return new $o.Glob(t,e).stream()}function MI(t,e={}){return new $o.Glob(t,e).walkSync()}async function A1(t,e={}){return new $o.Glob(t,e).walk()}function Sd(t,e={}){return new $o.Glob(t,e).iterateSync()}function UI(t,e={}){return new $o.Glob(t,e).iterate()}Ue.streamSync=Td;Ue.stream=Object.assign(vI,{sync:Td});Ue.iterateSync=Sd;Ue.iterate=Object.assign(UI,{sync:Sd});Ue.sync=Object.assign(MI,{stream:Td,iterate:Sd});Ue.glob=Object.assign(A1,{glob:A1,globSync:MI,sync:Ue.sync,globStream:vI,stream:Ue.stream,globStreamSync:Td,streamSync:Ue.streamSync,globIterate:UI,iterate:Ue.iterate,globIterateSync:Sd,iterateSync:Ue.iterateSync,Glob:$o.Glob,hasMagic:rce.hasMagic,escape:R1.escape,unescape:R1.unescape});Ue.glob.glob=Ue.glob});var O1=O((PMe,N1)=>{var _1=jA(),Dl=require("path"),BI=wU(),ace=YB(),lce=tF(),cce=lF(),uce=g1(),Wo=N1.exports={},I1=/[\/\\]/g,dce=function(t,e){var n=[];return BI(t).forEach(function(r){var i=r.indexOf("!")===0;i&&(r=r.slice(1));var s=e(r);i?n=ace(n,s):n=lce(n,s)}),n};Wo.exists=function(){var t=Dl.join.apply(Dl,arguments);return _1.existsSync(t)};Wo.expand=function(...t){var e=cce(t[0])?t.shift():{},n=Array.isArray(t[0])?t[0]:t;if(n.length===0)return[];var r=dce(n,function(i){return uce.sync(i,e)});return e.filter&&(r=r.filter(function(i){i=Dl.join(e.cwd||"",i);try{return typeof e.filter=="function"?e.filter(i):_1.statSync(i)[e.filter]()}catch{return!1}})),r};Wo.expandMapping=function(t,e,n){n=Object.assign({rename:function(s,o){return Dl.join(s||"",o)}},n);var r=[],i={};return Wo.expand(n,t).forEach(function(s){var o=s;n.flatten&&(o=Dl.basename(o)),n.ext&&(o=o.replace(/(\.[^\/]*)?$/,n.ext));var a=n.rename(e,o,n);n.cwd&&(s=Dl.join(n.cwd,s)),a=a.replace(I1,"/"),s=s.replace(I1,"/"),i[a]?i[a].src.push(s):(r.push({src:[s],dest:a}),i[a]=r[r.length-1])}),r};Wo.normalizeFilesArray=function(t){var e=[];return t.forEach(function(n){var r;("src"in n||"dest"in n)&&e.push(n)}),e.length===0?[]:(e=_(e).chain().forEach(function(n){!("src"in n)||!n.src||(Array.isArray(n.src)?n.src=BI(n.src):n.src=[n.src])}).map(function(n){var r=Object.assign({},n);if(delete r.src,delete r.dest,n.expand)return Wo.expandMapping(n.src,n.dest,r).map(function(s){var o=Object.assign({},n);return o.orig=Object.assign({},n),o.src=s.src,o.dest=s.dest,["expand","cwd","flatten","rename","ext"].forEach(function(a){delete o[a]}),o});var i=Object.assign({},n);return i.orig=Object.assign({},n),"src"in i&&Object.defineProperty(i,"src",{enumerable:!0,get:function s(){var o;return"result"in s||(o=n.src,o=Array.isArray(o)?BI(o):[o],s.result=Wo.expand(r,o)),s.result}}),"dest"in i&&(i.dest=n.dest),i}).flatten().value(),e)}});var Pl=O((vMe,y1)=>{var FI=jA(),C1=require("path"),fce=BE(),Ece=PD(),b1=Am(),hce=fx(),xMe=require("stream").Stream,pce=AU().PassThrough,ar=y1.exports={};ar.file=O1();ar.collectStream=function(t,e){var n=[],r=0;t.on("error",e),t.on("data",function(i){n.push(i),r+=i.length}),t.on("end",function(){var i=Buffer.alloc(r),s=0;n.forEach(function(o){o.copy(i,s),s+=o.length}),e(null,i)})};ar.dateify=function(t){return t=t||new Date,t instanceof Date?t=t:typeof t=="string"?t=new Date(t):t=new Date,t};ar.defaults=function(t,e,n){var r=arguments;return r[0]=r[0]||{},hce(...r)};ar.isStream=function(t){return fce(t)};ar.lazyReadStream=function(t){return new Ece.Readable(function(){return FI.createReadStream(t)})};ar.normalizeInputSource=function(t){return t===null?Buffer.alloc(0):typeof t=="string"?Buffer.from(t):ar.isStream(t)?t.pipe(new pce):t};ar.sanitizePath=function(t){return b1(t,!1).replace(/^\w+:/,"").replace(/^(\.\.\/|\/)+/,"")};ar.trailingSlashIt=function(t){return t.slice(-1)!=="/"?t+"/":t};ar.unixifyPath=function(t){return b1(t,!1).replace(/^\w+:/,"")};ar.walkdir=function(t,e,n){var r=[];typeof e=="function"&&(n=e,e=t),FI.readdir(t,function(i,s){var o=0,a,l;if(i)return n(i);(function c(){if(a=s[o++],!a)return n(null,r);l=C1.join(t,a),FI.stat(l,function(u,d){r.push({path:l,relative:C1.relative(e,l).replace(/\\/g,"/"),stats:d}),d&&d.isDirectory()?ar.walkdir(l,e,function(E,f){if(E)return n(E);f.forEach(function(p){r.push(p)}),c()}):c()})})()})}});var P1=O((L1,D1)=>{var Tce=require("util"),Sce={ABORTED:"archive was aborted",DIRECTORYDIRPATHREQUIRED:"diretory dirpath argument must be a non-empty string value",DIRECTORYFUNCTIONINVALIDDATA:"invalid data returned by directory custom data function",ENTRYNAMEREQUIRED:"entry name must be a non-empty string value",FILEFILEPATHREQUIRED:"file filepath argument must be a non-empty string value",FINALIZING:"archive already finalizing",QUEUECLOSED:"queue closed",NOENDMETHOD:"no suitable finalize/end method defined by module",DIRECTORYNOTSUPPORTED:"support for directory entries not defined by module",FORMATSET:"archive format already set",INPUTSTEAMBUFFERREQUIRED:"input source must be valid Stream or Buffer instance",MODULESET:"module already set",SYMLINKNOTSUPPORTED:"support for symlink entries not defined by module",SYMLINKFILEPATHREQUIRED:"symlink filepath argument must be a non-empty string value",SYMLINKTARGETREQUIRED:"symlink target argument must be a non-empty string value",ENTRYNOTSUPPORTED:"entry not supported"};function w1(t,e){Error.captureStackTrace(this,this.constructor),this.message=Sce[t]||t,this.code=t,this.data=e}Tce.inherits(w1,Error);L1=D1.exports=w1});var ft=O((MMe,x1)=>{"use strict";var HI=class extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError(`Expected input to be an Array, got ${typeof e}`);let n="";for(let r=0;r<e.length;r++)n+=`    ${e[r].stack}
`;super(n),this.name="AggregateError",this.errors=e}};x1.exports={AggregateError:HI,ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,e){return t.includes(e)},ArrayPrototypeIndexOf(t,e){return t.indexOf(e)},ArrayPrototypeJoin(t,e){return t.join(e)},ArrayPrototypeMap(t,e){return t.map(e)},ArrayPrototypePop(t,e){return t.pop(e)},ArrayPrototypePush(t,e){return t.push(e)},ArrayPrototypeSlice(t,e,n){return t.slice(e,n)},Error,FunctionPrototypeCall(t,e,...n){return t.call(e,...n)},FunctionPrototypeSymbolHasInstance(t,e){return Function.prototype[Symbol.hasInstance].call(t,e)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,e){return Object.defineProperties(t,e)},ObjectDefineProperty(t,e,n){return Object.defineProperty(t,e,n)},ObjectGetOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,e){return Object.setPrototypeOf(t,e)},Promise,PromisePrototypeCatch(t,e){return t.catch(e)},PromisePrototypeThen(t,e,n){return t.then(e,n)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,e){return t.test(e)},SafeSet:Set,String,StringPrototypeSlice(t,e,n){return t.slice(e,n)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,e,n){return t.set(e,n)},Boolean,Uint8Array}});var GI=O((UMe,v1)=>{"use strict";v1.exports={format(t,...e){return t.replace(/%([sdifj])/g,function(...[n,r]){let i=e.shift();return r==="f"?i.toFixed(6):r==="j"?JSON.stringify(i):r==="s"&&typeof i=="object"?`${i.constructor!==Object?i.constructor.name:""} {}`.trim():i.toString()})},inspect(t){switch(typeof t){case"string":if(t.includes("'"))if(t.includes('"')){if(!t.includes("`")&&!t.includes("${"))return`\`${t}\``}else return`"${t}"`;return`'${t}'`;case"number":return isNaN(t)?"NaN":Object.is(t,-0)?String(t):t;case"bigint":return`${String(t)}n`;case"boolean":case"undefined":return String(t);case"object":return"{}"}}}});var xn=O((BMe,B1)=>{"use strict";var{format:Rce,inspect:_p}=GI(),{AggregateError:Ace}=ft(),mce=globalThis.AggregateError||Ace,gce=Symbol("kIsNodeError"),Ice=["string","function","number","object","Function","Object","boolean","bigint","symbol"],_ce=/^([A-Z][a-z0-9]*)+$/,Nce="__node_internal_",Np={};function ko(t,e){if(!t)throw new Np.ERR_INTERNAL_ASSERTION(e)}function M1(t){let e="",n=t.length,r=t[0]==="-"?1:0;for(;n>=r+4;n-=3)e=`_${t.slice(n-3,n)}${e}`;return`${t.slice(0,n)}${e}`}function Oce(t,e,n){if(typeof e=="function")return ko(e.length<=n.length,`Code: ${t}; The provided arguments length (${n.length}) does not match the required ones (${e.length}).`),e(...n);let r=(e.match(/%[dfijoOs]/g)||[]).length;return ko(r===n.length,`Code: ${t}; The provided arguments length (${n.length}) does not match the required ones (${r}).`),n.length===0?e:Rce(e,...n)}function gn(t,e,n){n||(n=Error);class r extends n{constructor(...s){super(Oce(t,e,s))}toString(){return`${this.name} [${t}]: ${this.message}`}}Object.defineProperties(r.prototype,{name:{value:n.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${t}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),r.prototype.code=t,r.prototype[gce]=!0,Np[t]=r}function U1(t){let e=Nce+t.name;return Object.defineProperty(t,"name",{value:e}),t}function Cce(t,e){if(t&&e&&t!==e){if(Array.isArray(e.errors))return e.errors.push(t),e;let n=new mce([e,t],e.message);return n.code=e.code,n}return t||e}var $I=class extends Error{constructor(e="The operation was aborted",n=void 0){if(n!==void 0&&typeof n!="object")throw new Np.ERR_INVALID_ARG_TYPE("options","Object",n);super(e,n),this.code="ABORT_ERR",this.name="AbortError"}};gn("ERR_ASSERTION","%s",Error);gn("ERR_INVALID_ARG_TYPE",(t,e,n)=>{ko(typeof t=="string","'name' must be a string"),Array.isArray(e)||(e=[e]);let r="The ";t.endsWith(" argument")?r+=`${t} `:r+=`"${t}" ${t.includes(".")?"property":"argument"} `,r+="must be ";let i=[],s=[],o=[];for(let l of e)ko(typeof l=="string","All expected entries have to be of type string"),Ice.includes(l)?i.push(l.toLowerCase()):_ce.test(l)?s.push(l):(ko(l!=="object",'The value "object" should be written as "Object"'),o.push(l));if(s.length>0){let l=i.indexOf("object");l!==-1&&(i.splice(i,l,1),s.push("Object"))}if(i.length>0){switch(i.length){case 1:r+=`of type ${i[0]}`;break;case 2:r+=`one of type ${i[0]} or ${i[1]}`;break;default:{let l=i.pop();r+=`one of type ${i.join(", ")}, or ${l}`}}(s.length>0||o.length>0)&&(r+=" or ")}if(s.length>0){switch(s.length){case 1:r+=`an instance of ${s[0]}`;break;case 2:r+=`an instance of ${s[0]} or ${s[1]}`;break;default:{let l=s.pop();r+=`an instance of ${s.join(", ")}, or ${l}`}}o.length>0&&(r+=" or ")}switch(o.length){case 0:break;case 1:o[0].toLowerCase()!==o[0]&&(r+="an "),r+=`${o[0]}`;break;case 2:r+=`one of ${o[0]} or ${o[1]}`;break;default:{let l=o.pop();r+=`one of ${o.join(", ")}, or ${l}`}}if(n==null)r+=`. Received ${n}`;else if(typeof n=="function"&&n.name)r+=`. Received function ${n.name}`;else if(typeof n=="object"){var a;if((a=n.constructor)!==null&&a!==void 0&&a.name)r+=`. Received an instance of ${n.constructor.name}`;else{let l=_p(n,{depth:-1});r+=`. Received ${l}`}}else{let l=_p(n,{colors:!1});l.length>25&&(l=`${l.slice(0,25)}...`),r+=`. Received type ${typeof n} (${l})`}return r},TypeError);gn("ERR_INVALID_ARG_VALUE",(t,e,n="is invalid")=>{let r=_p(e);return r.length>128&&(r=r.slice(0,128)+"..."),`The ${t.includes(".")?"property":"argument"} '${t}' ${n}. Received ${r}`},TypeError);gn("ERR_INVALID_RETURN_VALUE",(t,e,n)=>{var r;let i=n!=null&&(r=n.constructor)!==null&&r!==void 0&&r.name?`instance of ${n.constructor.name}`:`type ${typeof n}`;return`Expected ${t} to be returned from the "${e}" function but got ${i}.`},TypeError);gn("ERR_MISSING_ARGS",(...t)=>{ko(t.length>0,"At least one arg needs to be specified");let e,n=t.length;switch(t=(Array.isArray(t)?t:[t]).map(r=>`"${r}"`).join(" or "),n){case 1:e+=`The ${t[0]} argument`;break;case 2:e+=`The ${t[0]} and ${t[1]} arguments`;break;default:{let r=t.pop();e+=`The ${t.join(", ")}, and ${r} arguments`}break}return`${e} must be specified`},TypeError);gn("ERR_OUT_OF_RANGE",(t,e,n)=>{ko(e,'Missing "range" argument');let r;if(Number.isInteger(n)&&Math.abs(n)>2**32)r=M1(String(n));else if(typeof n=="bigint"){r=String(n);let i=BigInt(2)**BigInt(32);(n>i||n<-i)&&(r=M1(r)),r+="n"}else r=_p(n);return`The value of "${t}" is out of range. It must be ${e}. Received ${r}`},RangeError);gn("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);gn("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);gn("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);gn("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);gn("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);gn("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);gn("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);gn("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);gn("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);gn("ERR_STREAM_WRITE_AFTER_END","write after end",Error);gn("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);B1.exports={AbortError:$I,aggregateTwoErrors:U1(Cce),hideStackFrames:U1,codes:Np}});var Yn=O((FMe,kI)=>{"use strict";var bce=require("buffer"),{format:yce,inspect:wce}=GI(),{codes:{ERR_INVALID_ARG_TYPE:WI}}=xn(),{kResistStopPropagation:Lce,AggregateError:Dce,SymbolDispose:Pce}=ft(),xce=globalThis.AbortSignal||Dt().AbortSignal,vce=globalThis.AbortController||Dt().AbortController,Mce=Object.getPrototypeOf(async function(){}).constructor,F1=globalThis.Blob||bce.Blob,Uce=typeof F1<"u"?function(e){return e instanceof F1}:function(e){return!1},H1=(t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new WI(e,"AbortSignal",t)},Bce=(t,e)=>{if(typeof t!="function")throw new WI(e,"Function",t)};kI.exports={AggregateError:Dce,kEmptyObject:Object.freeze({}),once(t){let e=!1;return function(...n){e||(e=!0,t.apply(this,n))}},createDeferredPromise:function(){let t,e;return{promise:new Promise((r,i)=>{t=r,e=i}),resolve:t,reject:e}},promisify(t){return new Promise((e,n)=>{t((r,...i)=>r?n(r):e(...i))})},debuglog(){return function(){}},format:yce,inspect:wce,types:{isAsyncFunction(t){return t instanceof Mce},isArrayBufferView(t){return ArrayBuffer.isView(t)}},isBlob:Uce,deprecate(t,e){return t},addAbortListener:require("events").addAbortListener||function(e,n){if(e===void 0)throw new WI("signal","AbortSignal",e);H1(e,"signal"),Bce(n,"listener");let r;return e.aborted?queueMicrotask(()=>n()):(e.addEventListener("abort",n,{__proto__:null,once:!0,[Lce]:!0}),r=()=>{e.removeEventListener("abort",n)}),{__proto__:null,[Pce](){var i;(i=r)===null||i===void 0||i()}}},AbortSignalAny:xce.any||function(e){if(e.length===1)return e[0];let n=new vce,r=()=>n.abort();return e.forEach(i=>{H1(i,"signals"),i.addEventListener("abort",r,{once:!0})}),n.signal.addEventListener("abort",()=>{e.forEach(i=>i.removeEventListener("abort",r))},{once:!0}),n.signal}};kI.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")});var vl=O((HMe,j1)=>{"use strict";var{ArrayIsArray:VI,ArrayPrototypeIncludes:k1,ArrayPrototypeJoin:Y1,ArrayPrototypeMap:Fce,NumberIsInteger:qI,NumberIsNaN:Hce,NumberMAX_SAFE_INTEGER:Gce,NumberMIN_SAFE_INTEGER:$ce,NumberParseInt:Wce,ObjectPrototypeHasOwnProperty:kce,RegExpPrototypeExec:V1,String:Yce,StringPrototypeToUpperCase:Vce,StringPrototypeTrim:qce}=ft(),{hideStackFrames:Nr,codes:{ERR_SOCKET_BAD_PORT:Xce,ERR_INVALID_ARG_TYPE:vn,ERR_INVALID_ARG_VALUE:xl,ERR_OUT_OF_RANGE:Yo,ERR_UNKNOWN_SIGNAL:G1}}=xn(),{normalizeEncoding:zce}=Yn(),{isAsyncFunction:jce,isArrayBufferView:Kce}=Yn().types,$1={};function Jce(t){return t===(t|0)}function Qce(t){return t===t>>>0}var Zce=/^[0-7]+$/,eue="must be a 32-bit unsigned integer or an octal string";function tue(t,e,n){if(typeof t>"u"&&(t=n),typeof t=="string"){if(V1(Zce,t)===null)throw new xl(e,t,eue);t=Wce(t,8)}return q1(t,e),t}var nue=Nr((t,e,n=$ce,r=Gce)=>{if(typeof t!="number")throw new vn(e,"number",t);if(!qI(t))throw new Yo(e,"an integer",t);if(t<n||t>r)throw new Yo(e,`>= ${n} && <= ${r}`,t)}),rue=Nr((t,e,n=-2147483648,r=2147483647)=>{if(typeof t!="number")throw new vn(e,"number",t);if(!qI(t))throw new Yo(e,"an integer",t);if(t<n||t>r)throw new Yo(e,`>= ${n} && <= ${r}`,t)}),q1=Nr((t,e,n=!1)=>{if(typeof t!="number")throw new vn(e,"number",t);if(!qI(t))throw new Yo(e,"an integer",t);let r=n?1:0,i=4294967295;if(t<r||t>i)throw new Yo(e,`>= ${r} && <= ${i}`,t)});function XI(t,e){if(typeof t!="string")throw new vn(e,"string",t)}function iue(t,e,n=void 0,r){if(typeof t!="number")throw new vn(e,"number",t);if(n!=null&&t<n||r!=null&&t>r||(n!=null||r!=null)&&Hce(t))throw new Yo(e,`${n!=null?`>= ${n}`:""}${n!=null&&r!=null?" && ":""}${r!=null?`<= ${r}`:""}`,t)}var sue=Nr((t,e,n)=>{if(!k1(n,t)){let i="must be one of: "+Y1(Fce(n,s=>typeof s=="string"?`'${s}'`:Yce(s)),", ");throw new xl(e,t,i)}});function X1(t,e){if(typeof t!="boolean")throw new vn(e,"boolean",t)}function YI(t,e,n){return t==null||!kce(t,e)?n:t[e]}var oue=Nr((t,e,n=null)=>{let r=YI(n,"allowArray",!1),i=YI(n,"allowFunction",!1);if(!YI(n,"nullable",!1)&&t===null||!r&&VI(t)||typeof t!="object"&&(!i||typeof t!="function"))throw new vn(e,"Object",t)}),aue=Nr((t,e)=>{if(t!=null&&typeof t!="object"&&typeof t!="function")throw new vn(e,"a dictionary",t)}),Op=Nr((t,e,n=0)=>{if(!VI(t))throw new vn(e,"Array",t);if(t.length<n){let r=`must be longer than ${n}`;throw new xl(e,t,r)}});function lue(t,e){Op(t,e);for(let n=0;n<t.length;n++)XI(t[n],`${e}[${n}]`)}function cue(t,e){Op(t,e);for(let n=0;n<t.length;n++)X1(t[n],`${e}[${n}]`)}function uue(t,e){Op(t,e);for(let n=0;n<t.length;n++){let r=t[n],i=`${e}[${n}]`;if(r==null)throw new vn(i,"AbortSignal",r);z1(r,i)}}function due(t,e="signal"){if(XI(t,e),$1[t]===void 0)throw $1[Vce(t)]!==void 0?new G1(t+" (signals must use all capital letters)"):new G1(t)}var fue=Nr((t,e="buffer")=>{if(!Kce(t))throw new vn(e,["Buffer","TypedArray","DataView"],t)});function Eue(t,e){let n=zce(e),r=t.length;if(n==="hex"&&r%2!==0)throw new xl("encoding",e,`is invalid for data of length ${r}`)}function hue(t,e="Port",n=!0){if(typeof t!="number"&&typeof t!="string"||typeof t=="string"&&qce(t).length===0||+t!==+t>>>0||t>65535||t===0&&!n)throw new Xce(e,t,n);return t|0}var z1=Nr((t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new vn(e,"AbortSignal",t)}),pue=Nr((t,e)=>{if(typeof t!="function")throw new vn(e,"Function",t)}),Tue=Nr((t,e)=>{if(typeof t!="function"||jce(t))throw new vn(e,"Function",t)}),Sue=Nr((t,e)=>{if(t!==void 0)throw new vn(e,"undefined",t)});function Rue(t,e,n){if(!k1(n,t))throw new vn(e,`('${Y1(n,"|")}')`,t)}var Aue=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function W1(t,e){if(typeof t>"u"||!V1(Aue,t))throw new xl(e,t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function mue(t){if(typeof t=="string")return W1(t,"hints"),t;if(VI(t)){let e=t.length,n="";if(e===0)return n;for(let r=0;r<e;r++){let i=t[r];W1(i,"hints"),n+=i,r!==e-1&&(n+=", ")}return n}throw new xl("hints",t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}j1.exports={isInt32:Jce,isUint32:Qce,parseFileMode:tue,validateArray:Op,validateStringArray:lue,validateBooleanArray:cue,validateAbortSignalArray:uue,validateBoolean:X1,validateBuffer:fue,validateDictionary:aue,validateEncoding:Eue,validateFunction:pue,validateInt32:rue,validateInteger:nue,validateNumber:iue,validateObject:oue,validateOneOf:sue,validatePlainFunction:Tue,validatePort:hue,validateSignalName:due,validateString:XI,validateUint32:q1,validateUndefined:Sue,validateUnion:Rue,validateAbortSignal:z1,validateLinkHeaderValue:mue}});var Ti=O((GMe,uH)=>{"use strict";var{SymbolAsyncIterator:K1,SymbolIterator:J1,SymbolFor:Vo}=ft(),Q1=Vo("nodejs.stream.destroyed"),Z1=Vo("nodejs.stream.errored"),zI=Vo("nodejs.stream.readable"),jI=Vo("nodejs.stream.writable"),eH=Vo("nodejs.stream.disturbed"),gue=Vo("nodejs.webstream.isClosedPromise"),Iue=Vo("nodejs.webstream.controllerErrorFunction");function Cp(t,e=!1){var n;return!!(t&&typeof t.pipe=="function"&&typeof t.on=="function"&&(!e||typeof t.pause=="function"&&typeof t.resume=="function")&&(!t._writableState||((n=t._readableState)===null||n===void 0?void 0:n.readable)!==!1)&&(!t._writableState||t._readableState))}function bp(t){var e;return!!(t&&typeof t.write=="function"&&typeof t.on=="function"&&(!t._readableState||((e=t._writableState)===null||e===void 0?void 0:e.writable)!==!1))}function _ue(t){return!!(t&&typeof t.pipe=="function"&&t._readableState&&typeof t.on=="function"&&typeof t.write=="function")}function pi(t){return t&&(t._readableState||t._writableState||typeof t.write=="function"&&typeof t.on=="function"||typeof t.pipe=="function"&&typeof t.on=="function")}function tH(t){return!!(t&&!pi(t)&&typeof t.pipeThrough=="function"&&typeof t.getReader=="function"&&typeof t.cancel=="function")}function nH(t){return!!(t&&!pi(t)&&typeof t.getWriter=="function"&&typeof t.abort=="function")}function rH(t){return!!(t&&!pi(t)&&typeof t.readable=="object"&&typeof t.writable=="object")}function Nue(t){return tH(t)||nH(t)||rH(t)}function Oue(t,e){return t==null?!1:e===!0?typeof t[K1]=="function":e===!1?typeof t[J1]=="function":typeof t[K1]=="function"||typeof t[J1]=="function"}function yp(t){if(!pi(t))return null;let e=t._writableState,n=t._readableState,r=e||n;return!!(t.destroyed||t[Q1]||r!=null&&r.destroyed)}function iH(t){if(!bp(t))return null;if(t.writableEnded===!0)return!0;let e=t._writableState;return e!=null&&e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function Cue(t,e){if(!bp(t))return null;if(t.writableFinished===!0)return!0;let n=t._writableState;return n!=null&&n.errored?!1:typeof n?.finished!="boolean"?null:!!(n.finished||e===!1&&n.ended===!0&&n.length===0)}function bue(t){if(!Cp(t))return null;if(t.readableEnded===!0)return!0;let e=t._readableState;return!e||e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function sH(t,e){if(!Cp(t))return null;let n=t._readableState;return n!=null&&n.errored?!1:typeof n?.endEmitted!="boolean"?null:!!(n.endEmitted||e===!1&&n.ended===!0&&n.length===0)}function oH(t){return t&&t[zI]!=null?t[zI]:typeof t?.readable!="boolean"?null:yp(t)?!1:Cp(t)&&t.readable&&!sH(t)}function aH(t){return t&&t[jI]!=null?t[jI]:typeof t?.writable!="boolean"?null:yp(t)?!1:bp(t)&&t.writable&&!iH(t)}function yue(t,e){return pi(t)?yp(t)?!0:!(e?.readable!==!1&&oH(t)||e?.writable!==!1&&aH(t)):null}function wue(t){var e,n;return pi(t)?t.writableErrored?t.writableErrored:(e=(n=t._writableState)===null||n===void 0?void 0:n.errored)!==null&&e!==void 0?e:null:null}function Lue(t){var e,n;return pi(t)?t.readableErrored?t.readableErrored:(e=(n=t._readableState)===null||n===void 0?void 0:n.errored)!==null&&e!==void 0?e:null:null}function Due(t){if(!pi(t))return null;if(typeof t.closed=="boolean")return t.closed;let e=t._writableState,n=t._readableState;return typeof e?.closed=="boolean"||typeof n?.closed=="boolean"?e?.closed||n?.closed:typeof t._closed=="boolean"&&lH(t)?t._closed:null}function lH(t){return typeof t._closed=="boolean"&&typeof t._defaultKeepAlive=="boolean"&&typeof t._removedConnection=="boolean"&&typeof t._removedContLen=="boolean"}function cH(t){return typeof t._sent100=="boolean"&&lH(t)}function Pue(t){var e;return typeof t._consuming=="boolean"&&typeof t._dumped=="boolean"&&((e=t.req)===null||e===void 0?void 0:e.upgradeOrConnect)===void 0}function xue(t){if(!pi(t))return null;let e=t._writableState,n=t._readableState,r=e||n;return!r&&cH(t)||!!(r&&r.autoDestroy&&r.emitClose&&r.closed===!1)}function vue(t){var e;return!!(t&&((e=t[eH])!==null&&e!==void 0?e:t.readableDidRead||t.readableAborted))}function Mue(t){var e,n,r,i,s,o,a,l,c,u;return!!(t&&((e=(n=(r=(i=(s=(o=t[Z1])!==null&&o!==void 0?o:t.readableErrored)!==null&&s!==void 0?s:t.writableErrored)!==null&&i!==void 0?i:(a=t._readableState)===null||a===void 0?void 0:a.errorEmitted)!==null&&r!==void 0?r:(l=t._writableState)===null||l===void 0?void 0:l.errorEmitted)!==null&&n!==void 0?n:(c=t._readableState)===null||c===void 0?void 0:c.errored)!==null&&e!==void 0?e:!((u=t._writableState)===null||u===void 0)&&u.errored))}uH.exports={isDestroyed:yp,kIsDestroyed:Q1,isDisturbed:vue,kIsDisturbed:eH,isErrored:Mue,kIsErrored:Z1,isReadable:oH,kIsReadable:zI,kIsClosedPromise:gue,kControllerErrorFunction:Iue,kIsWritable:jI,isClosed:Due,isDuplexNodeStream:_ue,isFinished:yue,isIterable:Oue,isReadableNodeStream:Cp,isReadableStream:tH,isReadableEnded:bue,isReadableFinished:sH,isReadableErrored:Lue,isNodeStream:pi,isWebStream:Nue,isWritable:aH,isWritableNodeStream:bp,isWritableStream:nH,isWritableEnded:iH,isWritableFinished:Cue,isWritableErrored:wue,isServerRequest:Pue,isServerResponse:cH,willEmitClose:xue,isTransformStream:rH}});var is=O(($Me,e_)=>{"use strict";var qs=Je(),{AbortError:AH,codes:Uue}=xn(),{ERR_INVALID_ARG_TYPE:Bue,ERR_STREAM_PREMATURE_CLOSE:dH}=Uue,{kEmptyObject:JI,once:QI}=Yn(),{validateAbortSignal:Fue,validateFunction:Hue,validateObject:Gue,validateBoolean:$ue}=vl(),{Promise:Wue,PromisePrototypeThen:kue,SymbolDispose:mH}=ft(),{isClosed:Yue,isReadable:fH,isReadableNodeStream:KI,isReadableStream:Vue,isReadableFinished:EH,isReadableErrored:hH,isWritable:pH,isWritableNodeStream:TH,isWritableStream:que,isWritableFinished:SH,isWritableErrored:RH,isNodeStream:Xue,willEmitClose:zue,kIsClosedPromise:jue}=Ti(),Ml;function Kue(t){return t.setHeader&&typeof t.abort=="function"}var ZI=()=>{};function gH(t,e,n){var r,i;if(arguments.length===2?(n=e,e=JI):e==null?e=JI:Gue(e,"options"),Hue(n,"callback"),Fue(e.signal,"options.signal"),n=QI(n),Vue(t)||que(t))return Jue(t,e,n);if(!Xue(t))throw new Bue("stream",["ReadableStream","WritableStream","Stream"],t);let s=(r=e.readable)!==null&&r!==void 0?r:KI(t),o=(i=e.writable)!==null&&i!==void 0?i:TH(t),a=t._writableState,l=t._readableState,c=()=>{t.writable||E()},u=zue(t)&&KI(t)===s&&TH(t)===o,d=SH(t,!1),E=()=>{d=!0,t.destroyed&&(u=!1),!(u&&(!t.readable||s))&&(!s||f)&&n.call(t)},f=EH(t,!1),p=()=>{f=!0,t.destroyed&&(u=!1),!(u&&(!t.writable||o))&&(!o||d)&&n.call(t)},h=I=>{n.call(t,I)},T=Yue(t),S=()=>{T=!0;let I=RH(t)||hH(t);if(I&&typeof I!="boolean")return n.call(t,I);if(s&&!f&&KI(t,!0)&&!EH(t,!1))return n.call(t,new dH);if(o&&!d&&!SH(t,!1))return n.call(t,new dH);n.call(t)},m=()=>{T=!0;let I=RH(t)||hH(t);if(I&&typeof I!="boolean")return n.call(t,I);n.call(t)},R=()=>{t.req.on("finish",E)};Kue(t)?(t.on("complete",E),u||t.on("abort",S),t.req?R():t.on("request",R)):o&&!a&&(t.on("end",c),t.on("close",c)),!u&&typeof t.aborted=="boolean"&&t.on("aborted",S),t.on("end",p),t.on("finish",E),e.error!==!1&&t.on("error",h),t.on("close",S),T?qs.nextTick(S):a!=null&&a.errorEmitted||l!=null&&l.errorEmitted?u||qs.nextTick(m):(!s&&(!u||fH(t))&&(d||pH(t)===!1)||!o&&(!u||pH(t))&&(f||fH(t)===!1)||l&&t.req&&t.aborted)&&qs.nextTick(m);let A=()=>{n=ZI,t.removeListener("aborted",S),t.removeListener("complete",E),t.removeListener("abort",S),t.removeListener("request",R),t.req&&t.req.removeListener("finish",E),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",E),t.removeListener("end",p),t.removeListener("error",h),t.removeListener("close",S)};if(e.signal&&!T){let I=()=>{let w=n;A(),w.call(t,new AH(void 0,{cause:e.signal.reason}))};if(e.signal.aborted)qs.nextTick(I);else{Ml=Ml||Yn().addAbortListener;let w=Ml(e.signal,I),g=n;n=QI((...L)=>{w[mH](),g.apply(t,L)})}}return A}function Jue(t,e,n){let r=!1,i=ZI;if(e.signal)if(i=()=>{r=!0,n.call(t,new AH(void 0,{cause:e.signal.reason}))},e.signal.aborted)qs.nextTick(i);else{Ml=Ml||Yn().addAbortListener;let o=Ml(e.signal,i),a=n;n=QI((...l)=>{o[mH](),a.apply(t,l)})}let s=(...o)=>{r||qs.nextTick(()=>n.apply(t,o))};return kue(t[jue].promise,s,s),ZI}function Que(t,e){var n;let r=!1;return e===null&&(e=JI),(n=e)!==null&&n!==void 0&&n.cleanup&&($ue(e.cleanup,"cleanup"),r=e.cleanup),new Wue((i,s)=>{let o=gH(t,e,a=>{r&&o(),a?s(a):i()})})}e_.exports=gH;e_.exports.finished=Que});var qo=O((WMe,wH)=>{"use strict";var Si=Je(),{aggregateTwoErrors:Zue,codes:{ERR_MULTIPLE_CALLBACK:ede},AbortError:tde}=xn(),{Symbol:NH}=ft(),{kIsDestroyed:nde,isDestroyed:rde,isFinished:ide,isServerRequest:sde}=Ti(),OH=NH("kDestroy"),t_=NH("kConstruct");function CH(t,e,n){t&&(t.stack,e&&!e.errored&&(e.errored=t),n&&!n.errored&&(n.errored=t))}function ode(t,e){let n=this._readableState,r=this._writableState,i=r||n;return r!=null&&r.destroyed||n!=null&&n.destroyed?(typeof e=="function"&&e(),this):(CH(t,r,n),r&&(r.destroyed=!0),n&&(n.destroyed=!0),i.constructed?IH(this,t,e):this.once(OH,function(s){IH(this,Zue(s,t),e)}),this)}function IH(t,e,n){let r=!1;function i(s){if(r)return;r=!0;let o=t._readableState,a=t._writableState;CH(s,a,o),a&&(a.closed=!0),o&&(o.closed=!0),typeof n=="function"&&n(s),s?Si.nextTick(ade,t,s):Si.nextTick(bH,t)}try{t._destroy(e||null,i)}catch(s){i(s)}}function ade(t,e){n_(t,e),bH(t)}function bH(t){let e=t._readableState,n=t._writableState;n&&(n.closeEmitted=!0),e&&(e.closeEmitted=!0),(n!=null&&n.emitClose||e!=null&&e.emitClose)&&t.emit("close")}function n_(t,e){let n=t._readableState,r=t._writableState;r!=null&&r.errorEmitted||n!=null&&n.errorEmitted||(r&&(r.errorEmitted=!0),n&&(n.errorEmitted=!0),t.emit("error",e))}function lde(){let t=this._readableState,e=this._writableState;t&&(t.constructed=!0,t.closed=!1,t.closeEmitted=!1,t.destroyed=!1,t.errored=null,t.errorEmitted=!1,t.reading=!1,t.ended=t.readable===!1,t.endEmitted=t.readable===!1),e&&(e.constructed=!0,e.destroyed=!1,e.closed=!1,e.closeEmitted=!1,e.errored=null,e.errorEmitted=!1,e.finalCalled=!1,e.prefinished=!1,e.ended=e.writable===!1,e.ending=e.writable===!1,e.finished=e.writable===!1)}function r_(t,e,n){let r=t._readableState,i=t._writableState;if(i!=null&&i.destroyed||r!=null&&r.destroyed)return this;r!=null&&r.autoDestroy||i!=null&&i.autoDestroy?t.destroy(e):e&&(e.stack,i&&!i.errored&&(i.errored=e),r&&!r.errored&&(r.errored=e),n?Si.nextTick(n_,t,e):n_(t,e))}function cde(t,e){if(typeof t._construct!="function")return;let n=t._readableState,r=t._writableState;n&&(n.constructed=!1),r&&(r.constructed=!1),t.once(t_,e),!(t.listenerCount(t_)>1)&&Si.nextTick(ude,t)}function ude(t){let e=!1;function n(r){if(e){r_(t,r??new ede);return}e=!0;let i=t._readableState,s=t._writableState,o=s||i;i&&(i.constructed=!0),s&&(s.constructed=!0),o.destroyed?t.emit(OH,r):r?r_(t,r,!0):Si.nextTick(dde,t)}try{t._construct(r=>{Si.nextTick(n,r)})}catch(r){Si.nextTick(n,r)}}function dde(t){t.emit(t_)}function _H(t){return t?.setHeader&&typeof t.abort=="function"}function yH(t){t.emit("close")}function fde(t,e){t.emit("error",e),Si.nextTick(yH,t)}function Ede(t,e){!t||rde(t)||(!e&&!ide(t)&&(e=new tde),sde(t)?(t.socket=null,t.destroy(e)):_H(t)?t.abort():_H(t.req)?t.req.abort():typeof t.destroy=="function"?t.destroy(e):typeof t.close=="function"?t.close():e?Si.nextTick(fde,t,e):Si.nextTick(yH,t),t.destroyed||(t[nde]=!0))}wH.exports={construct:cde,destroyer:Ede,destroy:ode,undestroy:lde,errorOrDestroy:r_}});var Dp=O((kMe,DH)=>{"use strict";var{ArrayIsArray:hde,ObjectSetPrototypeOf:LH}=ft(),{EventEmitter:wp}=require("events");function Lp(t){wp.call(this,t)}LH(Lp.prototype,wp.prototype);LH(Lp,wp);Lp.prototype.pipe=function(t,e){let n=this;function r(u){t.writable&&t.write(u)===!1&&n.pause&&n.pause()}n.on("data",r);function i(){n.readable&&n.resume&&n.resume()}t.on("drain",i),!t._isStdio&&(!e||e.end!==!1)&&(n.on("end",o),n.on("close",a));let s=!1;function o(){s||(s=!0,t.end())}function a(){s||(s=!0,typeof t.destroy=="function"&&t.destroy())}function l(u){c(),wp.listenerCount(this,"error")===0&&this.emit("error",u)}i_(n,"error",l),i_(t,"error",l);function c(){n.removeListener("data",r),t.removeListener("drain",i),n.removeListener("end",o),n.removeListener("close",a),n.removeListener("error",l),t.removeListener("error",l),n.removeListener("end",c),n.removeListener("close",c),t.removeListener("close",c)}return n.on("end",c),n.on("close",c),t.on("close",c),t.emit("pipe",n),t};function i_(t,e,n){if(typeof t.prependListener=="function")return t.prependListener(e,n);!t._events||!t._events[e]?t.on(e,n):hde(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]}DH.exports={Stream:Lp,prependListener:i_}});var Rd=O((YMe,Pp)=>{"use strict";var{SymbolDispose:pde}=ft(),{AbortError:PH,codes:Tde}=xn(),{isNodeStream:xH,isWebStream:Sde,kControllerErrorFunction:Rde}=Ti(),Ade=is(),{ERR_INVALID_ARG_TYPE:vH}=Tde,s_,mde=(t,e)=>{if(typeof t!="object"||!("aborted"in t))throw new vH(e,"AbortSignal",t)};Pp.exports.addAbortSignal=function(e,n){if(mde(e,"signal"),!xH(n)&&!Sde(n))throw new vH("stream",["ReadableStream","WritableStream","Stream"],n);return Pp.exports.addAbortSignalNoValidate(e,n)};Pp.exports.addAbortSignalNoValidate=function(t,e){if(typeof t!="object"||!("aborted"in t))return e;let n=xH(e)?()=>{e.destroy(new PH(void 0,{cause:t.reason}))}:()=>{e[Rde](new PH(void 0,{cause:t.reason}))};if(t.aborted)n();else{s_=s_||Yn().addAbortListener;let r=s_(t,n);Ade(e,r[pde])}return e}});var BH=O((qMe,UH)=>{"use strict";var{StringPrototypeSlice:MH,SymbolIterator:gde,TypedArrayPrototypeSet:xp,Uint8Array:Ide}=ft(),{Buffer:o_}=require("buffer"),{inspect:_de}=Yn();UH.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){let n={data:e,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}unshift(e){let n={data:e,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}shift(){if(this.length===0)return;let e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return"";let n=this.head,r=""+n.data;for(;(n=n.next)!==null;)r+=e+n.data;return r}concat(e){if(this.length===0)return o_.alloc(0);let n=o_.allocUnsafe(e>>>0),r=this.head,i=0;for(;r;)xp(n,r.data,i),i+=r.data.length,r=r.next;return n}consume(e,n){let r=this.head.data;if(e<r.length){let i=r.slice(0,e);return this.head.data=r.slice(e),i}return e===r.length?this.shift():n?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[gde](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let n="",r=this.head,i=0;do{let s=r.data;if(e>s.length)n+=s,e-=s.length;else{e===s.length?(n+=s,++i,r.next?this.head=r.next:this.head=this.tail=null):(n+=MH(s,0,e),this.head=r,r.data=MH(s,e));break}++i}while((r=r.next)!==null);return this.length-=i,n}_getBuffer(e){let n=o_.allocUnsafe(e),r=e,i=this.head,s=0;do{let o=i.data;if(e>o.length)xp(n,o,r-e),e-=o.length;else{e===o.length?(xp(n,o,r-e),++s,i.next?this.head=i.next:this.head=this.tail=null):(xp(n,new Ide(o.buffer,o.byteOffset,e),r-e),this.head=i,i.data=o.slice(e));break}++s}while((i=i.next)!==null);return this.length-=s,n}[Symbol.for("nodejs.util.inspect.custom")](e,n){return _de(this,{...n,depth:0,customInspect:!1})}}});var Ad=O((XMe,$H)=>{"use strict";var{MathFloor:Nde,NumberIsInteger:Ode}=ft(),{validateInteger:Cde}=vl(),{ERR_INVALID_ARG_VALUE:bde}=xn().codes,FH=16*1024,HH=16;function yde(t,e,n){return t.highWaterMark!=null?t.highWaterMark:e?t[n]:null}function GH(t){return t?HH:FH}function wde(t,e){Cde(e,"value",0),t?HH=e:FH=e}function Lde(t,e,n,r){let i=yde(e,r,n);if(i!=null){if(!Ode(i)||i<0){let s=r?`options.${n}`:"options.highWaterMark";throw new bde(s,i)}return Nde(i)}return GH(t.objectMode)}$H.exports={getHighWaterMark:Lde,getDefaultHighWaterMark:GH,setDefaultHighWaterMark:wde}});var a_=O((zMe,VH)=>{"use strict";var WH=Je(),{PromisePrototypeThen:Dde,SymbolAsyncIterator:kH,SymbolIterator:YH}=ft(),{Buffer:Pde}=require("buffer"),{ERR_INVALID_ARG_TYPE:xde,ERR_STREAM_NULL_VALUES:vde}=xn().codes;function Mde(t,e,n){let r;if(typeof e=="string"||e instanceof Pde)return new t({objectMode:!0,...n,read(){this.push(e),this.push(null)}});let i;if(e&&e[kH])i=!0,r=e[kH]();else if(e&&e[YH])i=!1,r=e[YH]();else throw new xde("iterable",["Iterable"],e);let s=new t({objectMode:!0,highWaterMark:1,...n}),o=!1;s._read=function(){o||(o=!0,l())},s._destroy=function(c,u){Dde(a(c),()=>WH.nextTick(u,c),d=>WH.nextTick(u,d||c))};async function a(c){let u=c!=null,d=typeof r.throw=="function";if(u&&d){let{value:E,done:f}=await r.throw(c);if(await E,f)return}if(typeof r.return=="function"){let{value:E}=await r.return();await E}}async function l(){for(;;){try{let{value:c,done:u}=i?await r.next():r.next();if(u)s.push(null);else{let d=c&&typeof c.then=="function"?await c:c;if(d===null)throw o=!1,new vde;if(s.push(d))continue;o=!1}}catch(c){s.destroy(c)}break}}return s}VH.exports=Mde});var gd=O((jMe,cG)=>{"use strict";var Wr=Je(),{ArrayPrototypeIndexOf:Ude,NumberIsInteger:Bde,NumberIsNaN:Fde,NumberParseInt:Hde,ObjectDefineProperties:p_,ObjectKeys:Gde,ObjectSetPrototypeOf:zH,Promise:jH,SafeSet:$de,SymbolAsyncDispose:Wde,SymbolAsyncIterator:kde,Symbol:Yde}=ft();cG.exports=Ie;Ie.ReadableState=Bp;var{EventEmitter:Vde}=require("events"),{Stream:Xs,prependListener:qde}=Dp(),{Buffer:l_}=require("buffer"),{addAbortSignal:Xde}=Rd(),KH=is(),Be=Yn().debuglog("stream",t=>{Be=t}),zde=BH(),Fl=qo(),{getHighWaterMark:jde,getDefaultHighWaterMark:Kde}=Ad(),{aggregateTwoErrors:qH,codes:{ERR_INVALID_ARG_TYPE:Jde,ERR_METHOD_NOT_IMPLEMENTED:Qde,ERR_OUT_OF_RANGE:Zde,ERR_STREAM_PUSH_AFTER_EOF:efe,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:tfe},AbortError:nfe}=xn(),{validateObject:rfe}=vl(),Xo=Yde("kPaused"),{StringDecoder:JH}=Uu(),ife=a_();zH(Ie.prototype,Xs.prototype);zH(Ie,Xs);var c_=()=>{},{errorOrDestroy:Ul}=Fl,Bl=1,sfe=2,QH=4,md=8,ZH=16,vp=32,Mp=64,eG=128,ofe=256,afe=512,lfe=1024,E_=2048,h_=4096,cfe=8192,ufe=16384,dfe=32768,tG=65536,ffe=1<<17,Efe=1<<18;function kt(t){return{enumerable:!1,get(){return(this.state&t)!==0},set(e){e?this.state|=t:this.state&=~t}}}p_(Bp.prototype,{objectMode:kt(Bl),ended:kt(sfe),endEmitted:kt(QH),reading:kt(md),constructed:kt(ZH),sync:kt(vp),needReadable:kt(Mp),emittedReadable:kt(eG),readableListening:kt(ofe),resumeScheduled:kt(afe),errorEmitted:kt(lfe),emitClose:kt(E_),autoDestroy:kt(h_),destroyed:kt(cfe),closed:kt(ufe),closeEmitted:kt(dfe),multiAwaitDrain:kt(tG),readingMore:kt(ffe),dataEmitted:kt(Efe)});function Bp(t,e,n){typeof n!="boolean"&&(n=e instanceof Ri()),this.state=E_|h_|ZH|vp,t&&t.objectMode&&(this.state|=Bl),n&&t&&t.readableObjectMode&&(this.state|=Bl),this.highWaterMark=t?jde(this,t,"readableHighWaterMark",n):Kde(!1),this.buffer=new zde,this.length=0,this.pipes=[],this.flowing=null,this[Xo]=null,t&&t.emitClose===!1&&(this.state&=~E_),t&&t.autoDestroy===!1&&(this.state&=~h_),this.errored=null,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,t&&t.encoding&&(this.decoder=new JH(t.encoding),this.encoding=t.encoding)}function Ie(t){if(!(this instanceof Ie))return new Ie(t);let e=this instanceof Ri();this._readableState=new Bp(t,this,e),t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&!e&&Xde(t.signal,this)),Xs.call(this,t),Fl.construct(this,()=>{this._readableState.needReadable&&Up(this,this._readableState)})}Ie.prototype.destroy=Fl.destroy;Ie.prototype._undestroy=Fl.undestroy;Ie.prototype._destroy=function(t,e){e(t)};Ie.prototype[Vde.captureRejectionSymbol]=function(t){this.destroy(t)};Ie.prototype[Wde]=function(){let t;return this.destroyed||(t=this.readableEnded?null:new nfe,this.destroy(t)),new jH((e,n)=>KH(this,r=>r&&r!==t?n(r):e(null)))};Ie.prototype.push=function(t,e){return nG(this,t,e,!1)};Ie.prototype.unshift=function(t,e){return nG(this,t,e,!0)};function nG(t,e,n,r){Be("readableAddChunk",e);let i=t._readableState,s;if((i.state&Bl)===0&&(typeof e=="string"?(n=n||i.defaultEncoding,i.encoding!==n&&(r&&i.encoding?e=l_.from(e,n).toString(i.encoding):(e=l_.from(e,n),n=""))):e instanceof l_?n="":Xs._isUint8Array(e)?(e=Xs._uint8ArrayToBuffer(e),n=""):e!=null&&(s=new Jde("chunk",["string","Buffer","Uint8Array"],e))),s)Ul(t,s);else if(e===null)i.state&=~md,Tfe(t,i);else if((i.state&Bl)!==0||e&&e.length>0)if(r)if((i.state&QH)!==0)Ul(t,new tfe);else{if(i.destroyed||i.errored)return!1;u_(t,i,e,!0)}else if(i.ended)Ul(t,new efe);else{if(i.destroyed||i.errored)return!1;i.state&=~md,i.decoder&&!n?(e=i.decoder.write(e),i.objectMode||e.length!==0?u_(t,i,e,!1):Up(t,i)):u_(t,i,e,!1)}else r||(i.state&=~md,Up(t,i));return!i.ended&&(i.length<i.highWaterMark||i.length===0)}function u_(t,e,n,r){e.flowing&&e.length===0&&!e.sync&&t.listenerCount("data")>0?((e.state&tG)!==0?e.awaitDrainWriters.clear():e.awaitDrainWriters=null,e.dataEmitted=!0,t.emit("data",n)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),(e.state&Mp)!==0&&Fp(t)),Up(t,e)}Ie.prototype.isPaused=function(){let t=this._readableState;return t[Xo]===!0||t.flowing===!1};Ie.prototype.setEncoding=function(t){let e=new JH(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;let n=this._readableState.buffer,r="";for(let i of n)r+=e.write(i);return n.clear(),r!==""&&n.push(r),this._readableState.length=r.length,this};var hfe=1073741824;function pfe(t){if(t>hfe)throw new Zde("size","<= 1GiB",t);return t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++,t}function XH(t,e){return t<=0||e.length===0&&e.ended?0:(e.state&Bl)!==0?1:Fde(t)?e.flowing&&e.length?e.buffer.first().length:e.length:t<=e.length?t:e.ended?e.length:0}Ie.prototype.read=function(t){Be("read",t),t===void 0?t=NaN:Bde(t)||(t=Hde(t,10));let e=this._readableState,n=t;if(t>e.highWaterMark&&(e.highWaterMark=pfe(t)),t!==0&&(e.state&=~eG),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return Be("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?d_(this):Fp(this),null;if(t=XH(t,e),t===0&&e.ended)return e.length===0&&d_(this),null;let r=(e.state&Mp)!==0;if(Be("need readable",r),(e.length===0||e.length-t<e.highWaterMark)&&(r=!0,Be("length less than watermark",r)),e.ended||e.reading||e.destroyed||e.errored||!e.constructed)r=!1,Be("reading, ended or constructing",r);else if(r){Be("do read"),e.state|=md|vp,e.length===0&&(e.state|=Mp);try{this._read(e.highWaterMark)}catch(s){Ul(this,s)}e.state&=~vp,e.reading||(t=XH(n,e))}let i;return t>0?i=aG(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.multiAwaitDrain?e.awaitDrainWriters.clear():e.awaitDrainWriters=null),e.length===0&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&d_(this)),i!==null&&!e.errorEmitted&&!e.closeEmitted&&(e.dataEmitted=!0,this.emit("data",i)),i};function Tfe(t,e){if(Be("onEofChunk"),!e.ended){if(e.decoder){let n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,e.sync?Fp(t):(e.needReadable=!1,e.emittedReadable=!0,rG(t))}}function Fp(t){let e=t._readableState;Be("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(Be("emitReadable",e.flowing),e.emittedReadable=!0,Wr.nextTick(rG,t))}function rG(t){let e=t._readableState;Be("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&!e.errored&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,sG(t)}function Up(t,e){!e.readingMore&&e.constructed&&(e.readingMore=!0,Wr.nextTick(Sfe,t,e))}function Sfe(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){let n=e.length;if(Be("maybeReadMore read 0"),t.read(0),n===e.length)break}e.readingMore=!1}Ie.prototype._read=function(t){throw new Qde("_read()")};Ie.prototype.pipe=function(t,e){let n=this,r=this._readableState;r.pipes.length===1&&(r.multiAwaitDrain||(r.multiAwaitDrain=!0,r.awaitDrainWriters=new $de(r.awaitDrainWriters?[r.awaitDrainWriters]:[]))),r.pipes.push(t),Be("pipe count=%d opts=%j",r.pipes.length,e);let s=(!e||e.end!==!1)&&t!==Wr.stdout&&t!==Wr.stderr?a:T;r.endEmitted?Wr.nextTick(s):n.once("end",s),t.on("unpipe",o);function o(S,m){Be("onunpipe"),S===n&&m&&m.hasUnpiped===!1&&(m.hasUnpiped=!0,u())}function a(){Be("onend"),t.end()}let l,c=!1;function u(){Be("cleanup"),t.removeListener("close",p),t.removeListener("finish",h),l&&t.removeListener("drain",l),t.removeListener("error",f),t.removeListener("unpipe",o),n.removeListener("end",a),n.removeListener("end",T),n.removeListener("data",E),c=!0,l&&r.awaitDrainWriters&&(!t._writableState||t._writableState.needDrain)&&l()}function d(){c||(r.pipes.length===1&&r.pipes[0]===t?(Be("false write response, pause",0),r.awaitDrainWriters=t,r.multiAwaitDrain=!1):r.pipes.length>1&&r.pipes.includes(t)&&(Be("false write response, pause",r.awaitDrainWriters.size),r.awaitDrainWriters.add(t)),n.pause()),l||(l=Rfe(n,t),t.on("drain",l))}n.on("data",E);function E(S){Be("ondata");let m=t.write(S);Be("dest.write",m),m===!1&&d()}function f(S){if(Be("onerror",S),T(),t.removeListener("error",f),t.listenerCount("error")===0){let m=t._writableState||t._readableState;m&&!m.errorEmitted?Ul(t,S):t.emit("error",S)}}qde(t,"error",f);function p(){t.removeListener("finish",h),T()}t.once("close",p);function h(){Be("onfinish"),t.removeListener("close",p),T()}t.once("finish",h);function T(){Be("unpipe"),n.unpipe(t)}return t.emit("pipe",n),t.writableNeedDrain===!0?d():r.flowing||(Be("pipe resume"),n.resume()),t};function Rfe(t,e){return function(){let r=t._readableState;r.awaitDrainWriters===e?(Be("pipeOnDrain",1),r.awaitDrainWriters=null):r.multiAwaitDrain&&(Be("pipeOnDrain",r.awaitDrainWriters.size),r.awaitDrainWriters.delete(e)),(!r.awaitDrainWriters||r.awaitDrainWriters.size===0)&&t.listenerCount("data")&&t.resume()}}Ie.prototype.unpipe=function(t){let e=this._readableState,n={hasUnpiped:!1};if(e.pipes.length===0)return this;if(!t){let i=e.pipes;e.pipes=[],this.pause();for(let s=0;s<i.length;s++)i[s].emit("unpipe",this,{hasUnpiped:!1});return this}let r=Ude(e.pipes,t);return r===-1?this:(e.pipes.splice(r,1),e.pipes.length===0&&this.pause(),t.emit("unpipe",this,n),this)};Ie.prototype.on=function(t,e){let n=Xs.prototype.on.call(this,t,e),r=this._readableState;return t==="data"?(r.readableListening=this.listenerCount("readable")>0,r.flowing!==!1&&this.resume()):t==="readable"&&!r.endEmitted&&!r.readableListening&&(r.readableListening=r.needReadable=!0,r.flowing=!1,r.emittedReadable=!1,Be("on readable",r.length,r.reading),r.length?Fp(this):r.reading||Wr.nextTick(Afe,this)),n};Ie.prototype.addListener=Ie.prototype.on;Ie.prototype.removeListener=function(t,e){let n=Xs.prototype.removeListener.call(this,t,e);return t==="readable"&&Wr.nextTick(iG,this),n};Ie.prototype.off=Ie.prototype.removeListener;Ie.prototype.removeAllListeners=function(t){let e=Xs.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&Wr.nextTick(iG,this),e};function iG(t){let e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&e[Xo]===!1?e.flowing=!0:t.listenerCount("data")>0?t.resume():e.readableListening||(e.flowing=null)}function Afe(t){Be("readable nexttick read 0"),t.read(0)}Ie.prototype.resume=function(){let t=this._readableState;return t.flowing||(Be("resume"),t.flowing=!t.readableListening,mfe(this,t)),t[Xo]=!1,this};function mfe(t,e){e.resumeScheduled||(e.resumeScheduled=!0,Wr.nextTick(gfe,t,e))}function gfe(t,e){Be("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),sG(t),e.flowing&&!e.reading&&t.read(0)}Ie.prototype.pause=function(){return Be("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Be("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[Xo]=!0,this};function sG(t){let e=t._readableState;for(Be("flow",e.flowing);e.flowing&&t.read()!==null;);}Ie.prototype.wrap=function(t){let e=!1;t.on("data",r=>{!this.push(r)&&t.pause&&(e=!0,t.pause())}),t.on("end",()=>{this.push(null)}),t.on("error",r=>{Ul(this,r)}),t.on("close",()=>{this.destroy()}),t.on("destroy",()=>{this.destroy()}),this._read=()=>{e&&t.resume&&(e=!1,t.resume())};let n=Gde(t);for(let r=1;r<n.length;r++){let i=n[r];this[i]===void 0&&typeof t[i]=="function"&&(this[i]=t[i].bind(t))}return this};Ie.prototype[kde]=function(){return oG(this)};Ie.prototype.iterator=function(t){return t!==void 0&&rfe(t,"options"),oG(this,t)};function oG(t,e){typeof t.read!="function"&&(t=Ie.wrap(t,{objectMode:!0}));let n=Ife(t,e);return n.stream=t,n}async function*Ife(t,e){let n=c_;function r(o){this===t?(n(),n=c_):n=o}t.on("readable",r);let i,s=KH(t,{writable:!1},o=>{i=o?qH(i,o):null,n(),n=c_});try{for(;;){let o=t.destroyed?null:t.read();if(o!==null)yield o;else{if(i)throw i;if(i===null)return;await new jH(r)}}}catch(o){throw i=qH(i,o),i}finally{(i||e?.destroyOnReturn!==!1)&&(i===void 0||t._readableState.autoDestroy)?Fl.destroyer(t,null):(t.off("readable",r),s())}}p_(Ie.prototype,{readable:{__proto__:null,get(){let t=this._readableState;return!!t&&t.readable!==!1&&!t.destroyed&&!t.errorEmitted&&!t.endEmitted},set(t){this._readableState&&(this._readableState.readable=!!t)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(t){this._readableState&&(this._readableState.destroyed=t)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}});p_(Bp.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[Xo]!==!1},set(t){this[Xo]=!!t}}});Ie._fromList=aG;function aG(t,e){if(e.length===0)return null;let n;return e.objectMode?n=e.buffer.shift():!t||t>=e.length?(e.decoder?n=e.buffer.join(""):e.buffer.length===1?n=e.buffer.first():n=e.buffer.concat(e.length),e.buffer.clear()):n=e.buffer.consume(t,e.decoder),n}function d_(t){let e=t._readableState;Be("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,Wr.nextTick(_fe,e,t))}function _fe(t,e){if(Be("endReadableNT",t.endEmitted,t.length),!t.errored&&!t.closeEmitted&&!t.endEmitted&&t.length===0){if(t.endEmitted=!0,e.emit("end"),e.writable&&e.allowHalfOpen===!1)Wr.nextTick(Nfe,e);else if(t.autoDestroy){let n=e._writableState;(!n||n.autoDestroy&&(n.finished||n.writable===!1))&&e.destroy()}}}function Nfe(t){t.writable&&!t.writableEnded&&!t.destroyed&&t.end()}Ie.from=function(t,e){return ife(Ie,t,e)};var f_;function lG(){return f_===void 0&&(f_={}),f_}Ie.fromWeb=function(t,e){return lG().newStreamReadableFromReadableStream(t,e)};Ie.toWeb=function(t,e){return lG().newReadableStreamFromStreamReadable(t,e)};Ie.wrap=function(t,e){var n,r;return new Ie({objectMode:(n=(r=t.readableObjectMode)!==null&&r!==void 0?r:t.objectMode)!==null&&n!==void 0?n:!0,...e,destroy(i,s){Fl.destroyer(t,i),s(i)}}).wrap(t)}});var kp=O((KMe,gG)=>{"use strict";var zo=Je(),{ArrayPrototypeSlice:fG,Error:Ofe,FunctionPrototypeSymbolHasInstance:EG,ObjectDefineProperty:hG,ObjectDefineProperties:Cfe,ObjectSetPrototypeOf:pG,StringPrototypeToLowerCase:bfe,Symbol:yfe,SymbolHasInstance:wfe}=ft();gG.exports=Rt;Rt.WritableState=Nd;var{EventEmitter:Lfe}=require("events"),Id=Dp().Stream,{Buffer:Hp}=require("buffer"),Wp=qo(),{addAbortSignal:Dfe}=Rd(),{getHighWaterMark:Pfe,getDefaultHighWaterMark:xfe}=Ad(),{ERR_INVALID_ARG_TYPE:vfe,ERR_METHOD_NOT_IMPLEMENTED:Mfe,ERR_MULTIPLE_CALLBACK:TG,ERR_STREAM_CANNOT_PIPE:Ufe,ERR_STREAM_DESTROYED:_d,ERR_STREAM_ALREADY_FINISHED:Bfe,ERR_STREAM_NULL_VALUES:Ffe,ERR_STREAM_WRITE_AFTER_END:Hfe,ERR_UNKNOWN_ENCODING:SG}=xn().codes,{errorOrDestroy:Hl}=Wp;pG(Rt.prototype,Id.prototype);pG(Rt,Id);function R_(){}var Gl=yfe("kOnFinished");function Nd(t,e,n){typeof n!="boolean"&&(n=e instanceof Ri()),this.objectMode=!!(t&&t.objectMode),n&&(this.objectMode=this.objectMode||!!(t&&t.writableObjectMode)),this.highWaterMark=t?Pfe(this,t,"writableHighWaterMark",n):xfe(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let r=!!(t&&t.decodeStrings===!1);this.decodeStrings=!r,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=$fe.bind(void 0,e),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,$p(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!t||t.emitClose!==!1,this.autoDestroy=!t||t.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[Gl]=[]}function $p(t){t.buffered=[],t.bufferedIndex=0,t.allBuffers=!0,t.allNoop=!0}Nd.prototype.getBuffer=function(){return fG(this.buffered,this.bufferedIndex)};hG(Nd.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function Rt(t){let e=this instanceof Ri();if(!e&&!EG(Rt,this))return new Rt(t);this._writableState=new Nd(t,this,e),t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&Dfe(t.signal,this)),Id.call(this,t),Wp.construct(this,()=>{let n=this._writableState;n.writing||m_(this,n),g_(this,n)})}hG(Rt,wfe,{__proto__:null,value:function(t){return EG(this,t)?!0:this!==Rt?!1:t&&t._writableState instanceof Nd}});Rt.prototype.pipe=function(){Hl(this,new Ufe)};function RG(t,e,n,r){let i=t._writableState;if(typeof n=="function")r=n,n=i.defaultEncoding;else{if(!n)n=i.defaultEncoding;else if(n!=="buffer"&&!Hp.isEncoding(n))throw new SG(n);typeof r!="function"&&(r=R_)}if(e===null)throw new Ffe;if(!i.objectMode)if(typeof e=="string")i.decodeStrings!==!1&&(e=Hp.from(e,n),n="buffer");else if(e instanceof Hp)n="buffer";else if(Id._isUint8Array(e))e=Id._uint8ArrayToBuffer(e),n="buffer";else throw new vfe("chunk",["string","Buffer","Uint8Array"],e);let s;return i.ending?s=new Hfe:i.destroyed&&(s=new _d("write")),s?(zo.nextTick(r,s),Hl(t,s,!0),s):(i.pendingcb++,Gfe(t,i,e,n,r))}Rt.prototype.write=function(t,e,n){return RG(this,t,e,n)===!0};Rt.prototype.cork=function(){this._writableState.corked++};Rt.prototype.uncork=function(){let t=this._writableState;t.corked&&(t.corked--,t.writing||m_(this,t))};Rt.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=bfe(e)),!Hp.isEncoding(e))throw new SG(e);return this._writableState.defaultEncoding=e,this};function Gfe(t,e,n,r,i){let s=e.objectMode?1:n.length;e.length+=s;let o=e.length<e.highWaterMark;return o||(e.needDrain=!0),e.writing||e.corked||e.errored||!e.constructed?(e.buffered.push({chunk:n,encoding:r,callback:i}),e.allBuffers&&r!=="buffer"&&(e.allBuffers=!1),e.allNoop&&i!==R_&&(e.allNoop=!1)):(e.writelen=s,e.writecb=i,e.writing=!0,e.sync=!0,t._write(n,r,e.onwrite),e.sync=!1),o&&!e.errored&&!e.destroyed}function uG(t,e,n,r,i,s,o){e.writelen=r,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new _d("write")):n?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function dG(t,e,n,r){--e.pendingcb,r(n),A_(e),Hl(t,n)}function $fe(t,e){let n=t._writableState,r=n.sync,i=n.writecb;if(typeof i!="function"){Hl(t,new TG);return}n.writing=!1,n.writecb=null,n.length-=n.writelen,n.writelen=0,e?(e.stack,n.errored||(n.errored=e),t._readableState&&!t._readableState.errored&&(t._readableState.errored=e),r?zo.nextTick(dG,t,n,e,i):dG(t,n,e,i)):(n.buffered.length>n.bufferedIndex&&m_(t,n),r?n.afterWriteTickInfo!==null&&n.afterWriteTickInfo.cb===i?n.afterWriteTickInfo.count++:(n.afterWriteTickInfo={count:1,cb:i,stream:t,state:n},zo.nextTick(Wfe,n.afterWriteTickInfo)):AG(t,n,1,i))}function Wfe({stream:t,state:e,count:n,cb:r}){return e.afterWriteTickInfo=null,AG(t,e,n,r)}function AG(t,e,n,r){for(!e.ending&&!t.destroyed&&e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"));n-- >0;)e.pendingcb--,r();e.destroyed&&A_(e),g_(t,e)}function A_(t){if(t.writing)return;for(let i=t.bufferedIndex;i<t.buffered.length;++i){var e;let{chunk:s,callback:o}=t.buffered[i],a=t.objectMode?1:s.length;t.length-=a,o((e=t.errored)!==null&&e!==void 0?e:new _d("write"))}let n=t[Gl].splice(0);for(let i=0;i<n.length;i++){var r;n[i]((r=t.errored)!==null&&r!==void 0?r:new _d("end"))}$p(t)}function m_(t,e){if(e.corked||e.bufferProcessing||e.destroyed||!e.constructed)return;let{buffered:n,bufferedIndex:r,objectMode:i}=e,s=n.length-r;if(!s)return;let o=r;if(e.bufferProcessing=!0,s>1&&t._writev){e.pendingcb-=s-1;let a=e.allNoop?R_:c=>{for(let u=o;u<n.length;++u)n[u].callback(c)},l=e.allNoop&&o===0?n:fG(n,o);l.allBuffers=e.allBuffers,uG(t,e,!0,e.length,l,"",a),$p(e)}else{do{let{chunk:a,encoding:l,callback:c}=n[o];n[o++]=null;let u=i?1:a.length;uG(t,e,!1,u,a,l,c)}while(o<n.length&&!e.writing);o===n.length?$p(e):o>256?(n.splice(0,o),e.bufferedIndex=0):e.bufferedIndex=o}e.bufferProcessing=!1}Rt.prototype._write=function(t,e,n){if(this._writev)this._writev([{chunk:t,encoding:e}],n);else throw new Mfe("_write()")};Rt.prototype._writev=null;Rt.prototype.end=function(t,e,n){let r=this._writableState;typeof t=="function"?(n=t,t=null,e=null):typeof e=="function"&&(n=e,e=null);let i;if(t!=null){let s=RG(this,t,e);s instanceof Ofe&&(i=s)}return r.corked&&(r.corked=1,this.uncork()),i||(!r.errored&&!r.ending?(r.ending=!0,g_(this,r,!0),r.ended=!0):r.finished?i=new Bfe("end"):r.destroyed&&(i=new _d("end"))),typeof n=="function"&&(i||r.finished?zo.nextTick(n,i):r[Gl].push(n)),this};function Gp(t){return t.ending&&!t.destroyed&&t.constructed&&t.length===0&&!t.errored&&t.buffered.length===0&&!t.finished&&!t.writing&&!t.errorEmitted&&!t.closeEmitted}function kfe(t,e){let n=!1;function r(i){if(n){Hl(t,i??TG());return}if(n=!0,e.pendingcb--,i){let s=e[Gl].splice(0);for(let o=0;o<s.length;o++)s[o](i);Hl(t,i,e.sync)}else Gp(e)&&(e.prefinished=!0,t.emit("prefinish"),e.pendingcb++,zo.nextTick(S_,t,e))}e.sync=!0,e.pendingcb++;try{t._final(r)}catch(i){r(i)}e.sync=!1}function Yfe(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.finalCalled=!0,kfe(t,e)):(e.prefinished=!0,t.emit("prefinish")))}function g_(t,e,n){Gp(e)&&(Yfe(t,e),e.pendingcb===0&&(n?(e.pendingcb++,zo.nextTick((r,i)=>{Gp(i)?S_(r,i):i.pendingcb--},t,e)):Gp(e)&&(e.pendingcb++,S_(t,e))))}function S_(t,e){e.pendingcb--,e.finished=!0;let n=e[Gl].splice(0);for(let r=0;r<n.length;r++)n[r]();if(t.emit("finish"),e.autoDestroy){let r=t._readableState;(!r||r.autoDestroy&&(r.endEmitted||r.readable===!1))&&t.destroy()}}Cfe(Rt.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(t){this._writableState&&(this._writableState.destroyed=t)}},writable:{__proto__:null,get(){let t=this._writableState;return!!t&&t.writable!==!1&&!t.destroyed&&!t.errored&&!t.ending&&!t.ended},set(t){this._writableState&&(this._writableState.writable=!!t)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let t=this._writableState;return t?!t.destroyed&&!t.ending&&t.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var Vfe=Wp.destroy;Rt.prototype.destroy=function(t,e){let n=this._writableState;return!n.destroyed&&(n.bufferedIndex<n.buffered.length||n[Gl].length)&&zo.nextTick(A_,n),Vfe.call(this,t,e),this};Rt.prototype._undestroy=Wp.undestroy;Rt.prototype._destroy=function(t,e){e(t)};Rt.prototype[Lfe.captureRejectionSymbol]=function(t){this.destroy(t)};var T_;function mG(){return T_===void 0&&(T_={}),T_}Rt.fromWeb=function(t,e){return mG().newStreamWritableFromWritableStream(t,e)};Rt.toWeb=function(t){return mG().newWritableStreamFromStreamWritable(t)}});var UG=O((JMe,MG)=>{var I_=Je(),qfe=require("buffer"),{isReadable:Xfe,isWritable:zfe,isIterable:IG,isNodeStream:jfe,isReadableNodeStream:_G,isWritableNodeStream:NG,isDuplexNodeStream:Kfe,isReadableStream:OG,isWritableStream:CG}=Ti(),bG=is(),{AbortError:xG,codes:{ERR_INVALID_ARG_TYPE:Jfe,ERR_INVALID_RETURN_VALUE:yG}}=xn(),{destroyer:Wl}=qo(),Qfe=Ri(),vG=gd(),Zfe=kp(),{createDeferredPromise:wG}=Yn(),LG=a_(),DG=globalThis.Blob||qfe.Blob,eEe=typeof DG<"u"?function(e){return e instanceof DG}:function(e){return!1},tEe=globalThis.AbortController||Dt().AbortController,{FunctionPrototypeCall:PG}=ft(),zs=class extends Qfe{constructor(e){super(e),e?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),e?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};MG.exports=function t(e,n){if(Kfe(e))return e;if(_G(e))return $l({readable:e});if(NG(e))return $l({writable:e});if(jfe(e))return $l({writable:!1,readable:!1});if(OG(e))return $l({readable:vG.fromWeb(e)});if(CG(e))return $l({writable:Zfe.fromWeb(e)});if(typeof e=="function"){let{value:i,write:s,final:o,destroy:a}=nEe(e);if(IG(i))return LG(zs,i,{objectMode:!0,write:s,final:o,destroy:a});let l=i?.then;if(typeof l=="function"){let c,u=PG(l,i,d=>{if(d!=null)throw new yG("nully","body",d)},d=>{Wl(c,d)});return c=new zs({objectMode:!0,readable:!1,write:s,final(d){o(async()=>{try{await u,I_.nextTick(d,null)}catch(E){I_.nextTick(d,E)}})},destroy:a})}throw new yG("Iterable, AsyncIterable or AsyncFunction",n,i)}if(eEe(e))return t(e.arrayBuffer());if(IG(e))return LG(zs,e,{objectMode:!0,writable:!1});if(OG(e?.readable)&&CG(e?.writable))return zs.fromWeb(e);if(typeof e?.writable=="object"||typeof e?.readable=="object"){let i=e!=null&&e.readable?_G(e?.readable)?e?.readable:t(e.readable):void 0,s=e!=null&&e.writable?NG(e?.writable)?e?.writable:t(e.writable):void 0;return $l({readable:i,writable:s})}let r=e?.then;if(typeof r=="function"){let i;return PG(r,e,s=>{s!=null&&i.push(s),i.push(null)},s=>{Wl(i,s)}),i=new zs({objectMode:!0,writable:!1,read(){}})}throw new Jfe(n,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],e)};function nEe(t){let{promise:e,resolve:n}=wG(),r=new tEe,i=r.signal;return{value:t((async function*(){for(;;){let o=e;e=null;let{chunk:a,done:l,cb:c}=await o;if(I_.nextTick(c),l)return;if(i.aborted)throw new xG(void 0,{cause:i.reason});({promise:e,resolve:n}=wG()),yield a}})(),{signal:i}),write(o,a,l){let c=n;n=null,c({chunk:o,done:!1,cb:l})},final(o){let a=n;n=null,a({done:!0,cb:o})},destroy(o,a){r.abort(),a(o)}}}function $l(t){let e=t.readable&&typeof t.readable.read!="function"?vG.wrap(t.readable):t.readable,n=t.writable,r=!!Xfe(e),i=!!zfe(n),s,o,a,l,c;function u(d){let E=l;l=null,E?E(d):d&&c.destroy(d)}return c=new zs({readableObjectMode:!!(e!=null&&e.readableObjectMode),writableObjectMode:!!(n!=null&&n.writableObjectMode),readable:r,writable:i}),i&&(bG(n,d=>{i=!1,d&&Wl(e,d),u(d)}),c._write=function(d,E,f){n.write(d,E)?f():s=f},c._final=function(d){n.end(),o=d},n.on("drain",function(){if(s){let d=s;s=null,d()}}),n.on("finish",function(){if(o){let d=o;o=null,d()}})),r&&(bG(e,d=>{r=!1,d&&Wl(e,d),u(d)}),e.on("readable",function(){if(a){let d=a;a=null,d()}}),e.on("end",function(){c.push(null)}),c._read=function(){for(;;){let d=e.read();if(d===null){a=c._read;return}if(!c.push(d))return}}),c._destroy=function(d,E){!d&&l!==null&&(d=new xG),a=null,s=null,o=null,l===null?E(d):(l=E,Wl(n,d),Wl(e,d))},c}});var Ri=O((QMe,HG)=>{"use strict";var{ObjectDefineProperties:rEe,ObjectGetOwnPropertyDescriptor:ss,ObjectKeys:iEe,ObjectSetPrototypeOf:BG}=ft();HG.exports=kr;var O_=gd(),Or=kp();BG(kr.prototype,O_.prototype);BG(kr,O_);{let t=iEe(Or.prototype);for(let e=0;e<t.length;e++){let n=t[e];kr.prototype[n]||(kr.prototype[n]=Or.prototype[n])}}function kr(t){if(!(this instanceof kr))return new kr(t);O_.call(this,t),Or.call(this,t),t?(this.allowHalfOpen=t.allowHalfOpen!==!1,t.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),t.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}rEe(kr.prototype,{writable:{__proto__:null,...ss(Or.prototype,"writable")},writableHighWaterMark:{__proto__:null,...ss(Or.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...ss(Or.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...ss(Or.prototype,"writableBuffer")},writableLength:{__proto__:null,...ss(Or.prototype,"writableLength")},writableFinished:{__proto__:null,...ss(Or.prototype,"writableFinished")},writableCorked:{__proto__:null,...ss(Or.prototype,"writableCorked")},writableEnded:{__proto__:null,...ss(Or.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...ss(Or.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(t){this._readableState&&this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}});var __;function FG(){return __===void 0&&(__={}),__}kr.fromWeb=function(t,e){return FG().newStreamDuplexFromReadableWritablePair(t,e)};kr.toWeb=function(t){return FG().newReadableWritablePairFromDuplex(t)};var N_;kr.from=function(t){return N_||(N_=UG()),N_(t,"body")}});var y_=O((ZMe,$G)=>{"use strict";var{ObjectSetPrototypeOf:GG,Symbol:sEe}=ft();$G.exports=os;var{ERR_METHOD_NOT_IMPLEMENTED:oEe}=xn().codes,b_=Ri(),{getHighWaterMark:aEe}=Ad();GG(os.prototype,b_.prototype);GG(os,b_);var Od=sEe("kCallback");function os(t){if(!(this instanceof os))return new os(t);let e=t?aEe(this,t,"readableHighWaterMark",!0):null;e===0&&(t={...t,highWaterMark:null,readableHighWaterMark:e,writableHighWaterMark:t.writableHighWaterMark||0}),b_.call(this,t),this._readableState.sync=!1,this[Od]=null,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",lEe)}function C_(t){typeof this._flush=="function"&&!this.destroyed?this._flush((e,n)=>{if(e){t?t(e):this.destroy(e);return}n!=null&&this.push(n),this.push(null),t&&t()}):(this.push(null),t&&t())}function lEe(){this._final!==C_&&C_.call(this)}os.prototype._final=C_;os.prototype._transform=function(t,e,n){throw new oEe("_transform()")};os.prototype._write=function(t,e,n){let r=this._readableState,i=this._writableState,s=r.length;this._transform(t,e,(o,a)=>{if(o){n(o);return}a!=null&&this.push(a),i.ended||s===r.length||r.length<r.highWaterMark?n():this[Od]=n})};os.prototype._read=function(){if(this[Od]){let t=this[Od];this[Od]=null,t()}}});var L_=O((eUe,kG)=>{"use strict";var{ObjectSetPrototypeOf:WG}=ft();kG.exports=kl;var w_=y_();WG(kl.prototype,w_.prototype);WG(kl,w_);function kl(t){if(!(this instanceof kl))return new kl(t);w_.call(this,t)}kl.prototype._transform=function(t,e,n){n(null,t)}});var Xp=O((tUe,zG)=>{var Cd=Je(),{ArrayIsArray:cEe,Promise:uEe,SymbolAsyncIterator:dEe,SymbolDispose:fEe}=ft(),qp=is(),{once:EEe}=Yn(),hEe=qo(),YG=Ri(),{aggregateTwoErrors:pEe,codes:{ERR_INVALID_ARG_TYPE:H_,ERR_INVALID_RETURN_VALUE:D_,ERR_MISSING_ARGS:TEe,ERR_STREAM_DESTROYED:SEe,ERR_STREAM_PREMATURE_CLOSE:REe},AbortError:AEe}=xn(),{validateFunction:mEe,validateAbortSignal:gEe}=vl(),{isIterable:jo,isReadable:P_,isReadableNodeStream:Vp,isNodeStream:VG,isTransformStream:Yl,isWebStream:IEe,isReadableStream:x_,isReadableFinished:_Ee}=Ti(),NEe=globalThis.AbortController||Dt().AbortController,v_,M_,U_;function qG(t,e,n){let r=!1;t.on("close",()=>{r=!0});let i=qp(t,{readable:e,writable:n},s=>{r=!s});return{destroy:s=>{r||(r=!0,hEe.destroyer(t,s||new SEe("pipe")))},cleanup:i}}function OEe(t){return mEe(t[t.length-1],"streams[stream.length - 1]"),t.pop()}function B_(t){if(jo(t))return t;if(Vp(t))return CEe(t);throw new H_("val",["Readable","Iterable","AsyncIterable"],t)}async function*CEe(t){M_||(M_=gd()),yield*M_.prototype[dEe].call(t)}async function Yp(t,e,n,{end:r}){let i,s=null,o=c=>{if(c&&(i=c),s){let u=s;s=null,u()}},a=()=>new uEe((c,u)=>{i?u(i):s=()=>{i?u(i):c()}});e.on("drain",o);let l=qp(e,{readable:!1},o);try{e.writableNeedDrain&&await a();for await(let c of t)e.write(c)||await a();r&&(e.end(),await a()),n()}catch(c){n(i!==c?pEe(i,c):c)}finally{l(),e.off("drain",o)}}async function F_(t,e,n,{end:r}){Yl(e)&&(e=e.writable);let i=e.getWriter();try{for await(let s of t)await i.ready,i.write(s).catch(()=>{});await i.ready,r&&await i.close(),n()}catch(s){try{await i.abort(s),n(s)}catch(o){n(o)}}}function bEe(...t){return XG(t,EEe(OEe(t)))}function XG(t,e,n){if(t.length===1&&cEe(t[0])&&(t=t[0]),t.length<2)throw new TEe("streams");let r=new NEe,i=r.signal,s=n?.signal,o=[];gEe(s,"options.signal");function a(){p(new AEe)}U_=U_||Yn().addAbortListener;let l;s&&(l=U_(s,a));let c,u,d=[],E=0;function f(R){p(R,--E===0)}function p(R,A){var I;if(R&&(!c||c.code==="ERR_STREAM_PREMATURE_CLOSE")&&(c=R),!(!c&&!A)){for(;d.length;)d.shift()(c);(I=l)===null||I===void 0||I[fEe](),r.abort(),A&&(c||o.forEach(w=>w()),Cd.nextTick(e,c,u))}}let h;for(let R=0;R<t.length;R++){let A=t[R],I=R<t.length-1,w=R>0,g=I||n?.end!==!1,L=R===t.length-1;if(VG(A)){let b=function(P){P&&P.name!=="AbortError"&&P.code!=="ERR_STREAM_PREMATURE_CLOSE"&&f(P)};var m=b;if(g){let{destroy:P,cleanup:v}=qG(A,I,w);d.push(P),P_(A)&&L&&o.push(v)}A.on("error",b),P_(A)&&L&&o.push(()=>{A.removeListener("error",b)})}if(R===0)if(typeof A=="function"){if(h=A({signal:i}),!jo(h))throw new D_("Iterable, AsyncIterable or Stream","source",h)}else jo(A)||Vp(A)||Yl(A)?h=A:h=YG.from(A);else if(typeof A=="function"){if(Yl(h)){var T;h=B_((T=h)===null||T===void 0?void 0:T.readable)}else h=B_(h);if(h=A(h,{signal:i}),I){if(!jo(h,!0))throw new D_("AsyncIterable",`transform[${R-1}]`,h)}else{var S;v_||(v_=L_());let b=new v_({objectMode:!0}),P=(S=h)===null||S===void 0?void 0:S.then;if(typeof P=="function")E++,P.call(h,$=>{u=$,$!=null&&b.write($),g&&b.end(),Cd.nextTick(f)},$=>{b.destroy($),Cd.nextTick(f,$)});else if(jo(h,!0))E++,Yp(h,b,f,{end:g});else if(x_(h)||Yl(h)){let $=h.readable||h;E++,Yp($,b,f,{end:g})}else throw new D_("AsyncIterable or Promise","destination",h);h=b;let{destroy:v,cleanup:H}=qG(h,!1,!0);d.push(v),L&&o.push(H)}}else if(VG(A)){if(Vp(h)){E+=2;let b=yEe(h,A,f,{end:g});P_(A)&&L&&o.push(b)}else if(Yl(h)||x_(h)){let b=h.readable||h;E++,Yp(b,A,f,{end:g})}else if(jo(h))E++,Yp(h,A,f,{end:g});else throw new H_("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],h);h=A}else if(IEe(A)){if(Vp(h))E++,F_(B_(h),A,f,{end:g});else if(x_(h)||jo(h))E++,F_(h,A,f,{end:g});else if(Yl(h))E++,F_(h.readable,A,f,{end:g});else throw new H_("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],h);h=A}else h=YG.from(A)}return(i!=null&&i.aborted||s!=null&&s.aborted)&&Cd.nextTick(a),h}function yEe(t,e,n,{end:r}){let i=!1;if(e.on("close",()=>{i||n(new REe)}),t.pipe(e,{end:!1}),r){let o=function(){i=!0,e.end()};var s=o;_Ee(t)?Cd.nextTick(o):t.once("end",o)}else n();return qp(t,{readable:!0,writable:!1},o=>{let a=t._readableState;o&&o.code==="ERR_STREAM_PREMATURE_CLOSE"&&a&&a.ended&&!a.errored&&!a.errorEmitted?t.once("end",n).once("error",n):n(o)}),qp(e,{readable:!1,writable:!0},n)}zG.exports={pipelineImpl:XG,pipeline:bEe}});var $_=O((nUe,e$)=>{"use strict";var{pipeline:wEe}=Xp(),zp=Ri(),{destroyer:LEe}=qo(),{isNodeStream:jp,isReadable:jG,isWritable:KG,isWebStream:G_,isTransformStream:Ko,isWritableStream:JG,isReadableStream:QG}=Ti(),{AbortError:DEe,codes:{ERR_INVALID_ARG_VALUE:ZG,ERR_MISSING_ARGS:PEe}}=xn(),xEe=is();e$.exports=function(...e){if(e.length===0)throw new PEe("streams");if(e.length===1)return zp.from(e[0]);let n=[...e];if(typeof e[0]=="function"&&(e[0]=zp.from(e[0])),typeof e[e.length-1]=="function"){let f=e.length-1;e[f]=zp.from(e[f])}for(let f=0;f<e.length;++f)if(!(!jp(e[f])&&!G_(e[f]))){if(f<e.length-1&&!(jG(e[f])||QG(e[f])||Ko(e[f])))throw new ZG(`streams[${f}]`,n[f],"must be readable");if(f>0&&!(KG(e[f])||JG(e[f])||Ko(e[f])))throw new ZG(`streams[${f}]`,n[f],"must be writable")}let r,i,s,o,a;function l(f){let p=o;o=null,p?p(f):f?a.destroy(f):!E&&!d&&a.destroy()}let c=e[0],u=wEe(e,l),d=!!(KG(c)||JG(c)||Ko(c)),E=!!(jG(u)||QG(u)||Ko(u));if(a=new zp({writableObjectMode:!!(c!=null&&c.writableObjectMode),readableObjectMode:!!(u!=null&&u.readableObjectMode),writable:d,readable:E}),d){if(jp(c))a._write=function(p,h,T){c.write(p,h)?T():r=T},a._final=function(p){c.end(),i=p},c.on("drain",function(){if(r){let p=r;r=null,p()}});else if(G_(c)){let h=(Ko(c)?c.writable:c).getWriter();a._write=async function(T,S,m){try{await h.ready,h.write(T).catch(()=>{}),m()}catch(R){m(R)}},a._final=async function(T){try{await h.ready,h.close().catch(()=>{}),i=T}catch(S){T(S)}}}let f=Ko(u)?u.readable:u;xEe(f,()=>{if(i){let p=i;i=null,p()}})}if(E){if(jp(u))u.on("readable",function(){if(s){let f=s;s=null,f()}}),u.on("end",function(){a.push(null)}),a._read=function(){for(;;){let f=u.read();if(f===null){s=a._read;return}if(!a.push(f))return}};else if(G_(u)){let p=(Ko(u)?u.readable:u).getReader();a._read=async function(){for(;;)try{let{value:h,done:T}=await p.read();if(!a.push(h))return;if(T){a.push(null);return}}catch{return}}}}return a._destroy=function(f,p){!f&&o!==null&&(f=new DEe),s=null,r=null,i=null,o===null?p(f):(o=p,jp(u)&&LEe(u,f))},a}});var u$=O((rUe,Y_)=>{"use strict";var vEe=globalThis.AbortController||Dt().AbortController,{codes:{ERR_INVALID_ARG_VALUE:MEe,ERR_INVALID_ARG_TYPE:bd,ERR_MISSING_ARGS:UEe,ERR_OUT_OF_RANGE:BEe},AbortError:Ai}=xn(),{validateAbortSignal:Jo,validateInteger:t$,validateObject:Qo}=vl(),FEe=ft().Symbol("kWeak"),HEe=ft().Symbol("kResistStopPropagation"),{finished:GEe}=is(),$Ee=$_(),{addAbortSignalNoValidate:WEe}=Rd(),{isWritable:kEe,isNodeStream:YEe}=Ti(),{deprecate:VEe}=Yn(),{ArrayPrototypePush:qEe,Boolean:XEe,MathFloor:n$,Number:zEe,NumberIsNaN:jEe,Promise:r$,PromiseReject:i$,PromiseResolve:KEe,PromisePrototypeThen:s$,Symbol:a$}=ft(),Kp=a$("kEmpty"),o$=a$("kEof");function JEe(t,e){if(e!=null&&Qo(e,"options"),e?.signal!=null&&Jo(e.signal,"options.signal"),YEe(t)&&!kEe(t))throw new MEe("stream",t,"must be writable");let n=$Ee(this,t);return e!=null&&e.signal&&WEe(e.signal,n),n}function Jp(t,e){if(typeof t!="function")throw new bd("fn",["Function","AsyncFunction"],t);e!=null&&Qo(e,"options"),e?.signal!=null&&Jo(e.signal,"options.signal");let n=1;e?.concurrency!=null&&(n=n$(e.concurrency));let r=n-1;return e?.highWaterMark!=null&&(r=n$(e.highWaterMark)),t$(n,"options.concurrency",1),t$(r,"options.highWaterMark",0),r+=n,async function*(){let s=Yn().AbortSignalAny([e?.signal].filter(XEe)),o=this,a=[],l={signal:s},c,u,d=!1,E=0;function f(){d=!0,p()}function p(){E-=1,h()}function h(){u&&!d&&E<n&&a.length<r&&(u(),u=null)}async function T(){try{for await(let S of o){if(d)return;if(s.aborted)throw new Ai;try{if(S=t(S,l),S===Kp)continue;S=KEe(S)}catch(m){S=i$(m)}E+=1,s$(S,p,f),a.push(S),c&&(c(),c=null),!d&&(a.length>=r||E>=n)&&await new r$(m=>{u=m})}a.push(o$)}catch(S){let m=i$(S);s$(m,p,f),a.push(m)}finally{d=!0,c&&(c(),c=null)}}T();try{for(;;){for(;a.length>0;){let S=await a[0];if(S===o$)return;if(s.aborted)throw new Ai;S!==Kp&&(yield S),a.shift(),h()}await new r$(S=>{c=S})}}finally{d=!0,u&&(u(),u=null)}}.call(this)}function QEe(t=void 0){return t!=null&&Qo(t,"options"),t?.signal!=null&&Jo(t.signal,"options.signal"),async function*(){let n=0;for await(let i of this){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new Ai({cause:t.signal.reason});yield[n++,i]}}.call(this)}async function l$(t,e=void 0){for await(let n of k_.call(this,t,e))return!0;return!1}async function ZEe(t,e=void 0){if(typeof t!="function")throw new bd("fn",["Function","AsyncFunction"],t);return!await l$.call(this,async(...n)=>!await t(...n),e)}async function ehe(t,e){for await(let n of k_.call(this,t,e))return n}async function the(t,e){if(typeof t!="function")throw new bd("fn",["Function","AsyncFunction"],t);async function n(r,i){return await t(r,i),Kp}for await(let r of Jp.call(this,n,e));}function k_(t,e){if(typeof t!="function")throw new bd("fn",["Function","AsyncFunction"],t);async function n(r,i){return await t(r,i)?r:Kp}return Jp.call(this,n,e)}var W_=class extends UEe{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function nhe(t,e,n){var r;if(typeof t!="function")throw new bd("reducer",["Function","AsyncFunction"],t);n!=null&&Qo(n,"options"),n?.signal!=null&&Jo(n.signal,"options.signal");let i=arguments.length>1;if(n!=null&&(r=n.signal)!==null&&r!==void 0&&r.aborted){let c=new Ai(void 0,{cause:n.signal.reason});throw this.once("error",()=>{}),await GEe(this.destroy(c)),c}let s=new vEe,o=s.signal;if(n!=null&&n.signal){let c={once:!0,[FEe]:this,[HEe]:!0};n.signal.addEventListener("abort",()=>s.abort(),c)}let a=!1;try{for await(let c of this){var l;if(a=!0,n!=null&&(l=n.signal)!==null&&l!==void 0&&l.aborted)throw new Ai;i?e=await t(e,c,{signal:o}):(e=c,i=!0)}if(!a&&!i)throw new W_}finally{s.abort()}return e}async function rhe(t){t!=null&&Qo(t,"options"),t?.signal!=null&&Jo(t.signal,"options.signal");let e=[];for await(let r of this){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new Ai(void 0,{cause:t.signal.reason});qEe(e,r)}return e}function ihe(t,e){let n=Jp.call(this,t,e);return async function*(){for await(let i of n)yield*i}.call(this)}function c$(t){if(t=zEe(t),jEe(t))return 0;if(t<0)throw new BEe("number",">= 0",t);return t}function she(t,e=void 0){return e!=null&&Qo(e,"options"),e?.signal!=null&&Jo(e.signal,"options.signal"),t=c$(t),async function*(){var r;if(e!=null&&(r=e.signal)!==null&&r!==void 0&&r.aborted)throw new Ai;for await(let s of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new Ai;t--<=0&&(yield s)}}.call(this)}function ohe(t,e=void 0){return e!=null&&Qo(e,"options"),e?.signal!=null&&Jo(e.signal,"options.signal"),t=c$(t),async function*(){var r;if(e!=null&&(r=e.signal)!==null&&r!==void 0&&r.aborted)throw new Ai;for await(let s of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new Ai;if(t-- >0&&(yield s),t<=0)return}}.call(this)}Y_.exports.streamReturningOperators={asIndexedPairs:VEe(QEe,"readable.asIndexedPairs will be removed in a future version."),drop:she,filter:k_,flatMap:ihe,map:Jp,take:ohe,compose:JEe};Y_.exports.promiseReturningOperators={every:ZEe,forEach:the,reduce:nhe,toArray:rhe,some:l$,find:ehe}});var V_=O((iUe,d$)=>{"use strict";var{ArrayPrototypePop:ahe,Promise:lhe}=ft(),{isIterable:che,isNodeStream:uhe,isWebStream:dhe}=Ti(),{pipelineImpl:fhe}=Xp(),{finished:Ehe}=is();q_();function hhe(...t){return new lhe((e,n)=>{let r,i,s=t[t.length-1];if(s&&typeof s=="object"&&!uhe(s)&&!che(s)&&!dhe(s)){let o=ahe(t);r=o.signal,i=o.end}fhe(t,(o,a)=>{o?n(o):e(a)},{signal:r,end:i})})}d$.exports={finished:Ehe,pipeline:hhe}});var q_=O((sUe,m$)=>{"use strict";var{Buffer:phe}=require("buffer"),{ObjectDefineProperty:as,ObjectKeys:h$,ReflectApply:p$}=ft(),{promisify:{custom:T$}}=Yn(),{streamReturningOperators:f$,promiseReturningOperators:E$}=u$(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:S$}}=xn(),The=$_(),{setDefaultHighWaterMark:She,getDefaultHighWaterMark:Rhe}=Ad(),{pipeline:R$}=Xp(),{destroyer:Ahe}=qo(),A$=is(),X_=V_(),yd=Ti(),at=m$.exports=Dp().Stream;at.isDestroyed=yd.isDestroyed;at.isDisturbed=yd.isDisturbed;at.isErrored=yd.isErrored;at.isReadable=yd.isReadable;at.isWritable=yd.isWritable;at.Readable=gd();for(let t of h$(f$)){let n=function(...r){if(new.target)throw S$();return at.Readable.from(p$(e,this,r))},e=f$[t];as(n,"name",{__proto__:null,value:e.name}),as(n,"length",{__proto__:null,value:e.length}),as(at.Readable.prototype,t,{__proto__:null,value:n,enumerable:!1,configurable:!0,writable:!0})}for(let t of h$(E$)){let n=function(...r){if(new.target)throw S$();return p$(e,this,r)},e=E$[t];as(n,"name",{__proto__:null,value:e.name}),as(n,"length",{__proto__:null,value:e.length}),as(at.Readable.prototype,t,{__proto__:null,value:n,enumerable:!1,configurable:!0,writable:!0})}at.Writable=kp();at.Duplex=Ri();at.Transform=y_();at.PassThrough=L_();at.pipeline=R$;var{addAbortSignal:mhe}=Rd();at.addAbortSignal=mhe;at.finished=A$;at.destroy=Ahe;at.compose=The;at.setDefaultHighWaterMark=She;at.getDefaultHighWaterMark=Rhe;as(at,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return X_}});as(R$,T$,{__proto__:null,enumerable:!0,get(){return X_.pipeline}});as(A$,T$,{__proto__:null,enumerable:!0,get(){return X_.finished}});at.Stream=at;at._isUint8Array=function(e){return e instanceof Uint8Array};at._uint8ArrayToBuffer=function(e){return phe.from(e.buffer,e.byteOffset,e.byteLength)}});var z_=O((oUe,Pe)=>{"use strict";var Yt=require("stream");if(Yt&&process.env.READABLE_STREAM==="disable"){let t=Yt.promises;Pe.exports._uint8ArrayToBuffer=Yt._uint8ArrayToBuffer,Pe.exports._isUint8Array=Yt._isUint8Array,Pe.exports.isDisturbed=Yt.isDisturbed,Pe.exports.isErrored=Yt.isErrored,Pe.exports.isReadable=Yt.isReadable,Pe.exports.Readable=Yt.Readable,Pe.exports.Writable=Yt.Writable,Pe.exports.Duplex=Yt.Duplex,Pe.exports.Transform=Yt.Transform,Pe.exports.PassThrough=Yt.PassThrough,Pe.exports.addAbortSignal=Yt.addAbortSignal,Pe.exports.finished=Yt.finished,Pe.exports.destroy=Yt.destroy,Pe.exports.pipeline=Yt.pipeline,Pe.exports.compose=Yt.compose,Object.defineProperty(Yt,"promises",{configurable:!0,enumerable:!0,get(){return t}}),Pe.exports.Stream=Yt.Stream}else{let t=q_(),e=V_(),n=t.Readable.destroy;Pe.exports=t.Readable,Pe.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,Pe.exports._isUint8Array=t._isUint8Array,Pe.exports.isDisturbed=t.isDisturbed,Pe.exports.isErrored=t.isErrored,Pe.exports.isReadable=t.isReadable,Pe.exports.Readable=t.Readable,Pe.exports.Writable=t.Writable,Pe.exports.Duplex=t.Duplex,Pe.exports.Transform=t.Transform,Pe.exports.PassThrough=t.PassThrough,Pe.exports.addAbortSignal=t.addAbortSignal,Pe.exports.finished=t.finished,Pe.exports.destroy=t.destroy,Pe.exports.destroy=n,Pe.exports.pipeline=t.pipeline,Pe.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return e}}),Pe.exports.Stream=t.Stream}Pe.exports.default=Pe.exports});var O$=O((aUe,N$)=>{var J_=require("fs"),I$=IL(),g$=NL(),j_=require("path"),mi=Pl(),ghe=require("util").inherits,Ot=P1(),_$=z_().Transform,K_=process.platform==="win32",Xe=function(t,e){if(!(this instanceof Xe))return new Xe(t,e);typeof t!="string"&&(e=t,t="zip"),e=this.options=mi.defaults(e,{highWaterMark:1024*1024,statConcurrency:4}),_$.call(this,e),this._format=!1,this._module=!1,this._pending=0,this._pointer=0,this._entriesCount=0,this._entriesProcessedCount=0,this._fsEntriesTotalBytes=0,this._fsEntriesProcessedBytes=0,this._queue=g$.queue(this._onQueueTask.bind(this),1),this._queue.drain(this._onQueueDrain.bind(this)),this._statQueue=g$.queue(this._onStatQueueTask.bind(this),e.statConcurrency),this._statQueue.drain(this._onQueueDrain.bind(this)),this._state={aborted:!1,finalize:!1,finalizing:!1,finalized:!1,modulePiped:!1},this._streams=[]};ghe(Xe,_$);Xe.prototype._abort=function(){this._state.aborted=!0,this._queue.kill(),this._statQueue.kill(),this._queue.idle()&&this._shutdown()};Xe.prototype._append=function(t,e){e=e||{};var n={source:null,filepath:t};e.name||(e.name=t),e.sourcePath=t,n.data=e,this._entriesCount++,e.stats&&e.stats instanceof J_.Stats?(n=this._updateQueueTaskWithStats(n,e.stats),n&&(e.stats.size&&(this._fsEntriesTotalBytes+=e.stats.size),this._queue.push(n))):this._statQueue.push(n)};Xe.prototype._finalize=function(){this._state.finalizing||this._state.finalized||this._state.aborted||(this._state.finalizing=!0,this._moduleFinalize(),this._state.finalizing=!1,this._state.finalized=!0)};Xe.prototype._maybeFinalize=function(){return this._state.finalizing||this._state.finalized||this._state.aborted?!1:this._state.finalize&&this._pending===0&&this._queue.idle()&&this._statQueue.idle()?(this._finalize(),!0):!1};Xe.prototype._moduleAppend=function(t,e,n){if(this._state.aborted){n();return}this._module.append(t,e,function(r){if(this._task=null,this._state.aborted){this._shutdown();return}if(r){this.emit("error",r),setImmediate(n);return}this.emit("entry",e),this._entriesProcessedCount++,e.stats&&e.stats.size&&(this._fsEntriesProcessedBytes+=e.stats.size),this.emit("progress",{entries:{total:this._entriesCount,processed:this._entriesProcessedCount},fs:{totalBytes:this._fsEntriesTotalBytes,processedBytes:this._fsEntriesProcessedBytes}}),setImmediate(n)}.bind(this))};Xe.prototype._moduleFinalize=function(){typeof this._module.finalize=="function"?this._module.finalize():typeof this._module.end=="function"?this._module.end():this.emit("error",new Ot("NOENDMETHOD"))};Xe.prototype._modulePipe=function(){this._module.on("error",this._onModuleError.bind(this)),this._module.pipe(this),this._state.modulePiped=!0};Xe.prototype._moduleSupports=function(t){return!this._module.supports||!this._module.supports[t]?!1:this._module.supports[t]};Xe.prototype._moduleUnpipe=function(){this._module.unpipe(this),this._state.modulePiped=!1};Xe.prototype._normalizeEntryData=function(t,e){t=mi.defaults(t,{type:"file",name:null,date:null,mode:null,prefix:null,sourcePath:null,stats:!1}),e&&t.stats===!1&&(t.stats=e);var n=t.type==="directory";return t.name&&(typeof t.prefix=="string"&&t.prefix!==""&&(t.name=t.prefix+"/"+t.name,t.prefix=null),t.name=mi.sanitizePath(t.name),t.type!=="symlink"&&t.name.slice(-1)==="/"?(n=!0,t.type="directory"):n&&(t.name+="/")),typeof t.mode=="number"?K_?t.mode&=511:t.mode&=4095:t.stats&&t.mode===null?(K_?t.mode=t.stats.mode&511:t.mode=t.stats.mode&4095,K_&&n&&(t.mode=493)):t.mode===null&&(t.mode=n?493:420),t.stats&&t.date===null?t.date=t.stats.mtime:t.date=mi.dateify(t.date),t};Xe.prototype._onModuleError=function(t){this.emit("error",t)};Xe.prototype._onQueueDrain=function(){this._state.finalizing||this._state.finalized||this._state.aborted||this._state.finalize&&this._pending===0&&this._queue.idle()&&this._statQueue.idle()&&this._finalize()};Xe.prototype._onQueueTask=function(t,e){var n=()=>{t.data.callback&&t.data.callback(),e()};if(this._state.finalizing||this._state.finalized||this._state.aborted){n();return}this._task=t,this._moduleAppend(t.source,t.data,n)};Xe.prototype._onStatQueueTask=function(t,e){if(this._state.finalizing||this._state.finalized||this._state.aborted){e();return}J_.lstat(t.filepath,function(n,r){if(this._state.aborted){setImmediate(e);return}if(n){this._entriesCount--,this.emit("warning",n),setImmediate(e);return}t=this._updateQueueTaskWithStats(t,r),t&&(r.size&&(this._fsEntriesTotalBytes+=r.size),this._queue.push(t)),setImmediate(e)}.bind(this))};Xe.prototype._shutdown=function(){this._moduleUnpipe(),this.end()};Xe.prototype._transform=function(t,e,n){t&&(this._pointer+=t.length),n(null,t)};Xe.prototype._updateQueueTaskWithStats=function(t,e){if(e.isFile())t.data.type="file",t.data.sourceType="stream",t.source=mi.lazyReadStream(t.filepath);else if(e.isDirectory()&&this._moduleSupports("directory"))t.data.name=mi.trailingSlashIt(t.data.name),t.data.type="directory",t.data.sourcePath=mi.trailingSlashIt(t.filepath),t.data.sourceType="buffer",t.source=Buffer.concat([]);else if(e.isSymbolicLink()&&this._moduleSupports("symlink")){var n=J_.readlinkSync(t.filepath),r=j_.dirname(t.filepath);t.data.type="symlink",t.data.linkname=j_.relative(r,j_.resolve(r,n)),t.data.sourceType="buffer",t.source=Buffer.concat([])}else return e.isDirectory()?this.emit("warning",new Ot("DIRECTORYNOTSUPPORTED",t.data)):e.isSymbolicLink()?this.emit("warning",new Ot("SYMLINKNOTSUPPORTED",t.data)):this.emit("warning",new Ot("ENTRYNOTSUPPORTED",t.data)),null;return t.data=this._normalizeEntryData(t.data,e),t};Xe.prototype.abort=function(){return this._state.aborted||this._state.finalized?this:(this._abort(),this)};Xe.prototype.append=function(t,e){if(this._state.finalize||this._state.aborted)return this.emit("error",new Ot("QUEUECLOSED")),this;if(e=this._normalizeEntryData(e),typeof e.name!="string"||e.name.length===0)return this.emit("error",new Ot("ENTRYNAMEREQUIRED")),this;if(e.type==="directory"&&!this._moduleSupports("directory"))return this.emit("error",new Ot("DIRECTORYNOTSUPPORTED",{name:e.name})),this;if(t=mi.normalizeInputSource(t),Buffer.isBuffer(t))e.sourceType="buffer";else if(mi.isStream(t))e.sourceType="stream";else return this.emit("error",new Ot("INPUTSTEAMBUFFERREQUIRED",{name:e.name})),this;return this._entriesCount++,this._queue.push({data:e,source:t}),this};Xe.prototype.directory=function(t,e,n){if(this._state.finalize||this._state.aborted)return this.emit("error",new Ot("QUEUECLOSED")),this;if(typeof t!="string"||t.length===0)return this.emit("error",new Ot("DIRECTORYDIRPATHREQUIRED")),this;this._pending++,e===!1?e="":typeof e!="string"&&(e=t);var r=!1;typeof n=="function"?(r=n,n={}):typeof n!="object"&&(n={});var i={stat:!0,dot:!0};function s(){this._pending--,this._maybeFinalize()}function o(c){this.emit("error",c)}function a(c){l.pause();var u=!1,d=Object.assign({},n);d.name=c.relative,d.prefix=e,d.stats=c.stat,d.callback=l.resume.bind(l);try{if(r){if(d=r(d),d===!1)u=!0;else if(typeof d!="object")throw new Ot("DIRECTORYFUNCTIONINVALIDDATA",{dirpath:t})}}catch(E){this.emit("error",E);return}if(u){l.resume();return}this._append(c.absolute,d)}var l=I$(t,i);return l.on("error",o.bind(this)),l.on("match",a.bind(this)),l.on("end",s.bind(this)),this};Xe.prototype.file=function(t,e){return this._state.finalize||this._state.aborted?(this.emit("error",new Ot("QUEUECLOSED")),this):typeof t!="string"||t.length===0?(this.emit("error",new Ot("FILEFILEPATHREQUIRED")),this):(this._append(t,e),this)};Xe.prototype.glob=function(t,e,n){this._pending++,e=mi.defaults(e,{stat:!0,pattern:t});function r(){this._pending--,this._maybeFinalize()}function i(a){this.emit("error",a)}function s(a){o.pause();var l=Object.assign({},n);l.callback=o.resume.bind(o),l.stats=a.stat,l.name=a.relative,this._append(a.absolute,l)}var o=I$(e.cwd||".",e);return o.on("error",i.bind(this)),o.on("match",s.bind(this)),o.on("end",r.bind(this)),this};Xe.prototype.finalize=function(){if(this._state.aborted){var t=new Ot("ABORTED");return this.emit("error",t),Promise.reject(t)}if(this._state.finalize){var e=new Ot("FINALIZING");return this.emit("error",e),Promise.reject(e)}this._state.finalize=!0,this._pending===0&&this._queue.idle()&&this._statQueue.idle()&&this._finalize();var n=this;return new Promise(function(r,i){var s;n._module.on("end",function(){s||r()}),n._module.on("error",function(o){s=!0,i(o)})})};Xe.prototype.setFormat=function(t){return this._format?(this.emit("error",new Ot("FORMATSET")),this):(this._format=t,this)};Xe.prototype.setModule=function(t){return this._state.aborted?(this.emit("error",new Ot("ABORTED")),this):this._state.module?(this.emit("error",new Ot("MODULESET")),this):(this._module=t,this._modulePipe(),this)};Xe.prototype.symlink=function(t,e,n){if(this._state.finalize||this._state.aborted)return this.emit("error",new Ot("QUEUECLOSED")),this;if(typeof t!="string"||t.length===0)return this.emit("error",new Ot("SYMLINKFILEPATHREQUIRED")),this;if(typeof e!="string"||e.length===0)return this.emit("error",new Ot("SYMLINKTARGETREQUIRED",{filepath:t})),this;if(!this._moduleSupports("symlink"))return this.emit("error",new Ot("SYMLINKNOTSUPPORTED",{filepath:t})),this;var r={};return r.type="symlink",r.name=t.replace(/\\/g,"/"),r.linkname=e.replace(/\\/g,"/"),r.sourceType="buffer",typeof n=="number"&&(r.mode=n),this._entriesCount++,this._queue.push({data:r,source:Buffer.concat([])}),this};Xe.prototype.pointer=function(){return this._pointer};Xe.prototype.use=function(t){return this._streams.push(t),this};N$.exports=Xe});var Zp=O((lUe,C$)=>{var Qp=C$.exports=function(){};Qp.prototype.getName=function(){};Qp.prototype.getSize=function(){};Qp.prototype.getLastModifiedDate=function(){};Qp.prototype.isDirectory=function(){}});var eT=O((cUe,b$)=>{var Cr=b$.exports={};Cr.dateToDos=function(t,e){e=e||!1;var n=e?t.getFullYear():t.getUTCFullYear();if(n<1980)return 2162688;if(n>=2044)return 2141175677;var r={year:n,month:e?t.getMonth():t.getUTCMonth(),date:e?t.getDate():t.getUTCDate(),hours:e?t.getHours():t.getUTCHours(),minutes:e?t.getMinutes():t.getUTCMinutes(),seconds:e?t.getSeconds():t.getUTCSeconds()};return r.year-1980<<25|r.month+1<<21|r.date<<16|r.hours<<11|r.minutes<<5|r.seconds/2};Cr.dosToDate=function(t){return new Date((t>>25&127)+1980,(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(t&31)<<1)};Cr.fromDosTime=function(t){return Cr.dosToDate(t.readUInt32LE(0))};Cr.getEightBytes=function(t){var e=Buffer.alloc(8);return e.writeUInt32LE(t%4294967296,0),e.writeUInt32LE(t/4294967296|0,4),e};Cr.getShortBytes=function(t){var e=Buffer.alloc(2);return e.writeUInt16LE((t&65535)>>>0,0),e};Cr.getShortBytesValue=function(t,e){return t.readUInt16LE(e)};Cr.getLongBytes=function(t){var e=Buffer.alloc(4);return e.writeUInt32LE((t&4294967295)>>>0,0),e};Cr.getLongBytesValue=function(t,e){return t.readUInt32LE(e)};Cr.toDosTime=function(t){return Cr.getLongBytes(Cr.dateToDos(t))}});var Q_=O((uUe,x$)=>{var y$=eT(),w$=8,L$=1,Ihe=4,_he=2,D$=64,P$=2048,In=x$.exports=function(){return this instanceof In?(this.descriptor=!1,this.encryption=!1,this.utf8=!1,this.numberOfShannonFanoTrees=0,this.strongEncryption=!1,this.slidingDictionarySize=0,this):new In};In.prototype.encode=function(){return y$.getShortBytes((this.descriptor?w$:0)|(this.utf8?P$:0)|(this.encryption?L$:0)|(this.strongEncryption?D$:0))};In.prototype.parse=function(t,e){var n=y$.getShortBytesValue(t,e),r=new In;return r.useDataDescriptor((n&w$)!==0),r.useUTF8ForNames((n&P$)!==0),r.useStrongEncryption((n&D$)!==0),r.useEncryption((n&L$)!==0),r.setSlidingDictionarySize((n&_he)!==0?8192:4096),r.setNumberOfShannonFanoTrees((n&Ihe)!==0?3:2),r};In.prototype.setNumberOfShannonFanoTrees=function(t){this.numberOfShannonFanoTrees=t};In.prototype.getNumberOfShannonFanoTrees=function(){return this.numberOfShannonFanoTrees};In.prototype.setSlidingDictionarySize=function(t){this.slidingDictionarySize=t};In.prototype.getSlidingDictionarySize=function(){return this.slidingDictionarySize};In.prototype.useDataDescriptor=function(t){this.descriptor=t};In.prototype.usesDataDescriptor=function(){return this.descriptor};In.prototype.useEncryption=function(t){this.encryption=t};In.prototype.usesEncryption=function(){return this.encryption};In.prototype.useStrongEncryption=function(t){this.strongEncryption=t};In.prototype.usesStrongEncryption=function(){return this.strongEncryption};In.prototype.useUTF8ForNames=function(t){this.utf8=t};In.prototype.usesUTF8ForNames=function(){return this.utf8}});var M$=O((dUe,v$)=>{v$.exports={PERM_MASK:4095,FILE_TYPE_FLAG:61440,LINK_FLAG:40960,FILE_FLAG:32768,DIR_FLAG:16384,DEFAULT_LINK_PERM:511,DEFAULT_DIR_PERM:493,DEFAULT_FILE_PERM:420}});var Z_=O((fUe,U$)=>{U$.exports={WORD:4,DWORD:8,EMPTY:Buffer.alloc(0),SHORT:2,SHORT_MASK:65535,SHORT_SHIFT:16,SHORT_ZERO:Buffer.from(Array(2)),LONG:4,LONG_ZERO:Buffer.from(Array(4)),MIN_VERSION_INITIAL:10,MIN_VERSION_DATA_DESCRIPTOR:20,MIN_VERSION_ZIP64:45,VERSION_MADEBY:45,METHOD_STORED:0,METHOD_DEFLATED:8,PLATFORM_UNIX:3,PLATFORM_FAT:0,SIG_LFH:67324752,SIG_DD:134695760,SIG_CFH:33639248,SIG_EOCD:101010256,SIG_ZIP64_EOCD:101075792,SIG_ZIP64_EOCD_LOC:117853008,ZIP64_MAGIC_SHORT:65535,ZIP64_MAGIC:4294967295,ZIP64_EXTRA_ID:1,ZLIB_NO_COMPRESSION:0,ZLIB_BEST_SPEED:1,ZLIB_BEST_COMPRESSION:9,ZLIB_DEFAULT_COMPRESSION:-1,MODE_MASK:4095,DEFAULT_FILE_MODE:33188,DEFAULT_DIR_MODE:16877,EXT_FILE_ATTR_DIR:1106051088,EXT_FILE_ATTR_FILE:2175008800,S_IFMT:61440,S_IFIFO:4096,S_IFCHR:8192,S_IFDIR:16384,S_IFBLK:24576,S_IFREG:32768,S_IFLNK:40960,S_IFSOCK:49152,S_DOS_A:32,S_DOS_D:16,S_DOS_V:8,S_DOS_S:4,S_DOS_H:2,S_DOS_R:1}});var eN=O((EUe,$$)=>{var Nhe=require("util").inherits,Ohe=Am(),F$=Zp(),H$=Q_(),B$=M$(),Vn=Z_(),G$=eT(),ye=$$.exports=function(t){if(!(this instanceof ye))return new ye(t);F$.call(this),this.platform=Vn.PLATFORM_FAT,this.method=-1,this.name=null,this.size=0,this.csize=0,this.gpb=new H$,this.crc=0,this.time=-1,this.minver=Vn.MIN_VERSION_INITIAL,this.mode=-1,this.extra=null,this.exattr=0,this.inattr=0,this.comment=null,t&&this.setName(t)};Nhe(ye,F$);ye.prototype.getCentralDirectoryExtra=function(){return this.getExtra()};ye.prototype.getComment=function(){return this.comment!==null?this.comment:""};ye.prototype.getCompressedSize=function(){return this.csize};ye.prototype.getCrc=function(){return this.crc};ye.prototype.getExternalAttributes=function(){return this.exattr};ye.prototype.getExtra=function(){return this.extra!==null?this.extra:Vn.EMPTY};ye.prototype.getGeneralPurposeBit=function(){return this.gpb};ye.prototype.getInternalAttributes=function(){return this.inattr};ye.prototype.getLastModifiedDate=function(){return this.getTime()};ye.prototype.getLocalFileDataExtra=function(){return this.getExtra()};ye.prototype.getMethod=function(){return this.method};ye.prototype.getName=function(){return this.name};ye.prototype.getPlatform=function(){return this.platform};ye.prototype.getSize=function(){return this.size};ye.prototype.getTime=function(){return this.time!==-1?G$.dosToDate(this.time):-1};ye.prototype.getTimeDos=function(){return this.time!==-1?this.time:0};ye.prototype.getUnixMode=function(){return this.platform!==Vn.PLATFORM_UNIX?0:this.getExternalAttributes()>>Vn.SHORT_SHIFT&Vn.SHORT_MASK};ye.prototype.getVersionNeededToExtract=function(){return this.minver};ye.prototype.setComment=function(t){Buffer.byteLength(t)!==t.length&&this.getGeneralPurposeBit().useUTF8ForNames(!0),this.comment=t};ye.prototype.setCompressedSize=function(t){if(t<0)throw new Error("invalid entry compressed size");this.csize=t};ye.prototype.setCrc=function(t){if(t<0)throw new Error("invalid entry crc32");this.crc=t};ye.prototype.setExternalAttributes=function(t){this.exattr=t>>>0};ye.prototype.setExtra=function(t){this.extra=t};ye.prototype.setGeneralPurposeBit=function(t){if(!(t instanceof H$))throw new Error("invalid entry GeneralPurposeBit");this.gpb=t};ye.prototype.setInternalAttributes=function(t){this.inattr=t};ye.prototype.setMethod=function(t){if(t<0)throw new Error("invalid entry compression method");this.method=t};ye.prototype.setName=function(t,e=!1){t=Ohe(t,!1).replace(/^\w+:/,"").replace(/^(\.\.\/|\/)+/,""),e&&(t=`/${t}`),Buffer.byteLength(t)!==t.length&&this.getGeneralPurposeBit().useUTF8ForNames(!0),this.name=t};ye.prototype.setPlatform=function(t){this.platform=t};ye.prototype.setSize=function(t){if(t<0)throw new Error("invalid entry size");this.size=t};ye.prototype.setTime=function(t,e){if(!(t instanceof Date))throw new Error("invalid entry time");this.time=G$.dateToDos(t,e)};ye.prototype.setUnixMode=function(t){t|=this.isDirectory()?Vn.S_IFDIR:Vn.S_IFREG;var e=0;e|=t<<Vn.SHORT_SHIFT|(this.isDirectory()?Vn.S_DOS_D:Vn.S_DOS_A),this.setExternalAttributes(e),this.mode=t&Vn.MODE_MASK,this.platform=Vn.PLATFORM_UNIX};ye.prototype.setVersionNeededToExtract=function(t){this.minver=t};ye.prototype.isDirectory=function(){return this.getName().slice(-1)==="/"};ye.prototype.isUnixSymlink=function(){return(this.getUnixMode()&B$.FILE_TYPE_FLAG)===B$.LINK_FLAG};ye.prototype.isZip64=function(){return this.csize>Vn.ZIP64_MAGIC||this.size>Vn.ZIP64_MAGIC}});var Et=O((hUe,W$)=>{"use strict";var tN=class extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError(`Expected input to be an Array, got ${typeof e}`);let n="";for(let r=0;r<e.length;r++)n+=`    ${e[r].stack}
`;super(n),this.name="AggregateError",this.errors=e}};W$.exports={AggregateError:tN,ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,e){return t.includes(e)},ArrayPrototypeIndexOf(t,e){return t.indexOf(e)},ArrayPrototypeJoin(t,e){return t.join(e)},ArrayPrototypeMap(t,e){return t.map(e)},ArrayPrototypePop(t,e){return t.pop(e)},ArrayPrototypePush(t,e){return t.push(e)},ArrayPrototypeSlice(t,e,n){return t.slice(e,n)},Error,FunctionPrototypeCall(t,e,...n){return t.call(e,...n)},FunctionPrototypeSymbolHasInstance(t,e){return Function.prototype[Symbol.hasInstance].call(t,e)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,e){return Object.defineProperties(t,e)},ObjectDefineProperty(t,e,n){return Object.defineProperty(t,e,n)},ObjectGetOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,e){return Object.setPrototypeOf(t,e)},Promise,PromisePrototypeCatch(t,e){return t.catch(e)},PromisePrototypeThen(t,e,n){return t.then(e,n)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,e){return t.test(e)},SafeSet:Set,String,StringPrototypeSlice(t,e,n){return t.slice(e,n)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,e,n){return t.set(e,n)},Boolean,Uint8Array}});var nN=O((pUe,k$)=>{"use strict";k$.exports={format(t,...e){return t.replace(/%([sdifj])/g,function(...[n,r]){let i=e.shift();return r==="f"?i.toFixed(6):r==="j"?JSON.stringify(i):r==="s"&&typeof i=="object"?`${i.constructor!==Object?i.constructor.name:""} {}`.trim():i.toString()})},inspect(t){switch(typeof t){case"string":if(t.includes("'"))if(t.includes('"')){if(!t.includes("`")&&!t.includes("${"))return`\`${t}\``}else return`"${t}"`;return`'${t}'`;case"number":return isNaN(t)?"NaN":Object.is(t,-0)?String(t):t;case"bigint":return`${String(t)}n`;case"boolean":case"undefined":return String(t);case"object":return"{}"}}}});var Mn=O((TUe,q$)=>{"use strict";var{format:Che,inspect:tT}=nN(),{AggregateError:bhe}=Et(),yhe=globalThis.AggregateError||bhe,whe=Symbol("kIsNodeError"),Lhe=["string","function","number","object","Function","Object","boolean","bigint","symbol"],Dhe=/^([A-Z][a-z0-9]*)+$/,Phe="__node_internal_",nT={};function Zo(t,e){if(!t)throw new nT.ERR_INTERNAL_ASSERTION(e)}function Y$(t){let e="",n=t.length,r=t[0]==="-"?1:0;for(;n>=r+4;n-=3)e=`_${t.slice(n-3,n)}${e}`;return`${t.slice(0,n)}${e}`}function xhe(t,e,n){if(typeof e=="function")return Zo(e.length<=n.length,`Code: ${t}; The provided arguments length (${n.length}) does not match the required ones (${e.length}).`),e(...n);let r=(e.match(/%[dfijoOs]/g)||[]).length;return Zo(r===n.length,`Code: ${t}; The provided arguments length (${n.length}) does not match the required ones (${r}).`),n.length===0?e:Che(e,...n)}function _n(t,e,n){n||(n=Error);class r extends n{constructor(...s){super(xhe(t,e,s))}toString(){return`${this.name} [${t}]: ${this.message}`}}Object.defineProperties(r.prototype,{name:{value:n.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${t}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),r.prototype.code=t,r.prototype[whe]=!0,nT[t]=r}function V$(t){let e=Phe+t.name;return Object.defineProperty(t,"name",{value:e}),t}function vhe(t,e){if(t&&e&&t!==e){if(Array.isArray(e.errors))return e.errors.push(t),e;let n=new yhe([e,t],e.message);return n.code=e.code,n}return t||e}var rN=class extends Error{constructor(e="The operation was aborted",n=void 0){if(n!==void 0&&typeof n!="object")throw new nT.ERR_INVALID_ARG_TYPE("options","Object",n);super(e,n),this.code="ABORT_ERR",this.name="AbortError"}};_n("ERR_ASSERTION","%s",Error);_n("ERR_INVALID_ARG_TYPE",(t,e,n)=>{Zo(typeof t=="string","'name' must be a string"),Array.isArray(e)||(e=[e]);let r="The ";t.endsWith(" argument")?r+=`${t} `:r+=`"${t}" ${t.includes(".")?"property":"argument"} `,r+="must be ";let i=[],s=[],o=[];for(let l of e)Zo(typeof l=="string","All expected entries have to be of type string"),Lhe.includes(l)?i.push(l.toLowerCase()):Dhe.test(l)?s.push(l):(Zo(l!=="object",'The value "object" should be written as "Object"'),o.push(l));if(s.length>0){let l=i.indexOf("object");l!==-1&&(i.splice(i,l,1),s.push("Object"))}if(i.length>0){switch(i.length){case 1:r+=`of type ${i[0]}`;break;case 2:r+=`one of type ${i[0]} or ${i[1]}`;break;default:{let l=i.pop();r+=`one of type ${i.join(", ")}, or ${l}`}}(s.length>0||o.length>0)&&(r+=" or ")}if(s.length>0){switch(s.length){case 1:r+=`an instance of ${s[0]}`;break;case 2:r+=`an instance of ${s[0]} or ${s[1]}`;break;default:{let l=s.pop();r+=`an instance of ${s.join(", ")}, or ${l}`}}o.length>0&&(r+=" or ")}switch(o.length){case 0:break;case 1:o[0].toLowerCase()!==o[0]&&(r+="an "),r+=`${o[0]}`;break;case 2:r+=`one of ${o[0]} or ${o[1]}`;break;default:{let l=o.pop();r+=`one of ${o.join(", ")}, or ${l}`}}if(n==null)r+=`. Received ${n}`;else if(typeof n=="function"&&n.name)r+=`. Received function ${n.name}`;else if(typeof n=="object"){var a;if((a=n.constructor)!==null&&a!==void 0&&a.name)r+=`. Received an instance of ${n.constructor.name}`;else{let l=tT(n,{depth:-1});r+=`. Received ${l}`}}else{let l=tT(n,{colors:!1});l.length>25&&(l=`${l.slice(0,25)}...`),r+=`. Received type ${typeof n} (${l})`}return r},TypeError);_n("ERR_INVALID_ARG_VALUE",(t,e,n="is invalid")=>{let r=tT(e);return r.length>128&&(r=r.slice(0,128)+"..."),`The ${t.includes(".")?"property":"argument"} '${t}' ${n}. Received ${r}`},TypeError);_n("ERR_INVALID_RETURN_VALUE",(t,e,n)=>{var r;let i=n!=null&&(r=n.constructor)!==null&&r!==void 0&&r.name?`instance of ${n.constructor.name}`:`type ${typeof n}`;return`Expected ${t} to be returned from the "${e}" function but got ${i}.`},TypeError);_n("ERR_MISSING_ARGS",(...t)=>{Zo(t.length>0,"At least one arg needs to be specified");let e,n=t.length;switch(t=(Array.isArray(t)?t:[t]).map(r=>`"${r}"`).join(" or "),n){case 1:e+=`The ${t[0]} argument`;break;case 2:e+=`The ${t[0]} and ${t[1]} arguments`;break;default:{let r=t.pop();e+=`The ${t.join(", ")}, and ${r} arguments`}break}return`${e} must be specified`},TypeError);_n("ERR_OUT_OF_RANGE",(t,e,n)=>{Zo(e,'Missing "range" argument');let r;if(Number.isInteger(n)&&Math.abs(n)>2**32)r=Y$(String(n));else if(typeof n=="bigint"){r=String(n);let i=BigInt(2)**BigInt(32);(n>i||n<-i)&&(r=Y$(r)),r+="n"}else r=tT(n);return`The value of "${t}" is out of range. It must be ${e}. Received ${r}`},RangeError);_n("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);_n("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);_n("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);_n("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);_n("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);_n("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);_n("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);_n("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);_n("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);_n("ERR_STREAM_WRITE_AFTER_END","write after end",Error);_n("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);q$.exports={AbortError:rN,aggregateTwoErrors:V$(vhe),hideStackFrames:V$,codes:nT}});var qn=O((SUe,sN)=>{"use strict";var Mhe=require("buffer"),{format:Uhe,inspect:Bhe}=nN(),{codes:{ERR_INVALID_ARG_TYPE:iN}}=Mn(),{kResistStopPropagation:Fhe,AggregateError:Hhe,SymbolDispose:Ghe}=Et(),$he=globalThis.AbortSignal||Dt().AbortSignal,Whe=globalThis.AbortController||Dt().AbortController,khe=Object.getPrototypeOf(async function(){}).constructor,X$=globalThis.Blob||Mhe.Blob,Yhe=typeof X$<"u"?function(e){return e instanceof X$}:function(e){return!1},z$=(t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new iN(e,"AbortSignal",t)},Vhe=(t,e)=>{if(typeof t!="function")throw new iN(e,"Function",t)};sN.exports={AggregateError:Hhe,kEmptyObject:Object.freeze({}),once(t){let e=!1;return function(...n){e||(e=!0,t.apply(this,n))}},createDeferredPromise:function(){let t,e;return{promise:new Promise((r,i)=>{t=r,e=i}),resolve:t,reject:e}},promisify(t){return new Promise((e,n)=>{t((r,...i)=>r?n(r):e(...i))})},debuglog(){return function(){}},format:Uhe,inspect:Bhe,types:{isAsyncFunction(t){return t instanceof khe},isArrayBufferView(t){return ArrayBuffer.isView(t)}},isBlob:Yhe,deprecate(t,e){return t},addAbortListener:require("events").addAbortListener||function(e,n){if(e===void 0)throw new iN("signal","AbortSignal",e);z$(e,"signal"),Vhe(n,"listener");let r;return e.aborted?queueMicrotask(()=>n()):(e.addEventListener("abort",n,{__proto__:null,once:!0,[Fhe]:!0}),r=()=>{e.removeEventListener("abort",n)}),{__proto__:null,[Ghe](){var i;(i=r)===null||i===void 0||i()}}},AbortSignalAny:$he.any||function(e){if(e.length===1)return e[0];let n=new Whe,r=()=>n.abort();return e.forEach(i=>{z$(i,"signals"),i.addEventListener("abort",r,{once:!0})}),n.signal.addEventListener("abort",()=>{e.forEach(i=>i.removeEventListener("abort",r))},{once:!0}),n.signal}};sN.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")});var ql=O((RUe,iW)=>{"use strict";var{ArrayIsArray:aN,ArrayPrototypeIncludes:Q$,ArrayPrototypeJoin:Z$,ArrayPrototypeMap:qhe,NumberIsInteger:lN,NumberIsNaN:Xhe,NumberMAX_SAFE_INTEGER:zhe,NumberMIN_SAFE_INTEGER:jhe,NumberParseInt:Khe,ObjectPrototypeHasOwnProperty:Jhe,RegExpPrototypeExec:eW,String:Qhe,StringPrototypeToUpperCase:Zhe,StringPrototypeTrim:epe}=Et(),{hideStackFrames:br,codes:{ERR_SOCKET_BAD_PORT:tpe,ERR_INVALID_ARG_TYPE:Un,ERR_INVALID_ARG_VALUE:Vl,ERR_OUT_OF_RANGE:ea,ERR_UNKNOWN_SIGNAL:j$}}=Mn(),{normalizeEncoding:npe}=qn(),{isAsyncFunction:rpe,isArrayBufferView:ipe}=qn().types,K$={};function spe(t){return t===(t|0)}function ope(t){return t===t>>>0}var ape=/^[0-7]+$/,lpe="must be a 32-bit unsigned integer or an octal string";function cpe(t,e,n){if(typeof t>"u"&&(t=n),typeof t=="string"){if(eW(ape,t)===null)throw new Vl(e,t,lpe);t=Khe(t,8)}return tW(t,e),t}var upe=br((t,e,n=jhe,r=zhe)=>{if(typeof t!="number")throw new Un(e,"number",t);if(!lN(t))throw new ea(e,"an integer",t);if(t<n||t>r)throw new ea(e,`>= ${n} && <= ${r}`,t)}),dpe=br((t,e,n=-2147483648,r=2147483647)=>{if(typeof t!="number")throw new Un(e,"number",t);if(!lN(t))throw new ea(e,"an integer",t);if(t<n||t>r)throw new ea(e,`>= ${n} && <= ${r}`,t)}),tW=br((t,e,n=!1)=>{if(typeof t!="number")throw new Un(e,"number",t);if(!lN(t))throw new ea(e,"an integer",t);let r=n?1:0,i=4294967295;if(t<r||t>i)throw new ea(e,`>= ${r} && <= ${i}`,t)});function cN(t,e){if(typeof t!="string")throw new Un(e,"string",t)}function fpe(t,e,n=void 0,r){if(typeof t!="number")throw new Un(e,"number",t);if(n!=null&&t<n||r!=null&&t>r||(n!=null||r!=null)&&Xhe(t))throw new ea(e,`${n!=null?`>= ${n}`:""}${n!=null&&r!=null?" && ":""}${r!=null?`<= ${r}`:""}`,t)}var Epe=br((t,e,n)=>{if(!Q$(n,t)){let i="must be one of: "+Z$(qhe(n,s=>typeof s=="string"?`'${s}'`:Qhe(s)),", ");throw new Vl(e,t,i)}});function nW(t,e){if(typeof t!="boolean")throw new Un(e,"boolean",t)}function oN(t,e,n){return t==null||!Jhe(t,e)?n:t[e]}var hpe=br((t,e,n=null)=>{let r=oN(n,"allowArray",!1),i=oN(n,"allowFunction",!1);if(!oN(n,"nullable",!1)&&t===null||!r&&aN(t)||typeof t!="object"&&(!i||typeof t!="function"))throw new Un(e,"Object",t)}),ppe=br((t,e)=>{if(t!=null&&typeof t!="object"&&typeof t!="function")throw new Un(e,"a dictionary",t)}),rT=br((t,e,n=0)=>{if(!aN(t))throw new Un(e,"Array",t);if(t.length<n){let r=`must be longer than ${n}`;throw new Vl(e,t,r)}});function Tpe(t,e){rT(t,e);for(let n=0;n<t.length;n++)cN(t[n],`${e}[${n}]`)}function Spe(t,e){rT(t,e);for(let n=0;n<t.length;n++)nW(t[n],`${e}[${n}]`)}function Rpe(t,e){rT(t,e);for(let n=0;n<t.length;n++){let r=t[n],i=`${e}[${n}]`;if(r==null)throw new Un(i,"AbortSignal",r);rW(r,i)}}function Ape(t,e="signal"){if(cN(t,e),K$[t]===void 0)throw K$[Zhe(t)]!==void 0?new j$(t+" (signals must use all capital letters)"):new j$(t)}var mpe=br((t,e="buffer")=>{if(!ipe(t))throw new Un(e,["Buffer","TypedArray","DataView"],t)});function gpe(t,e){let n=npe(e),r=t.length;if(n==="hex"&&r%2!==0)throw new Vl("encoding",e,`is invalid for data of length ${r}`)}function Ipe(t,e="Port",n=!0){if(typeof t!="number"&&typeof t!="string"||typeof t=="string"&&epe(t).length===0||+t!==+t>>>0||t>65535||t===0&&!n)throw new tpe(e,t,n);return t|0}var rW=br((t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new Un(e,"AbortSignal",t)}),_pe=br((t,e)=>{if(typeof t!="function")throw new Un(e,"Function",t)}),Npe=br((t,e)=>{if(typeof t!="function"||rpe(t))throw new Un(e,"Function",t)}),Ope=br((t,e)=>{if(t!==void 0)throw new Un(e,"undefined",t)});function Cpe(t,e,n){if(!Q$(n,t))throw new Un(e,`('${Z$(n,"|")}')`,t)}var bpe=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function J$(t,e){if(typeof t>"u"||!eW(bpe,t))throw new Vl(e,t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function ype(t){if(typeof t=="string")return J$(t,"hints"),t;if(aN(t)){let e=t.length,n="";if(e===0)return n;for(let r=0;r<e;r++){let i=t[r];J$(i,"hints"),n+=i,r!==e-1&&(n+=", ")}return n}throw new Vl("hints",t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}iW.exports={isInt32:spe,isUint32:ope,parseFileMode:cpe,validateArray:rT,validateStringArray:Tpe,validateBooleanArray:Spe,validateAbortSignalArray:Rpe,validateBoolean:nW,validateBuffer:mpe,validateDictionary:ppe,validateEncoding:gpe,validateFunction:_pe,validateInt32:dpe,validateInteger:upe,validateNumber:fpe,validateObject:hpe,validateOneOf:Epe,validatePlainFunction:Npe,validatePort:Ipe,validateSignalName:Ape,validateString:cN,validateUint32:tW,validateUndefined:Ope,validateUnion:Cpe,validateAbortSignal:rW,validateLinkHeaderValue:ype}});var Ii=O((AUe,AW)=>{"use strict";var{SymbolAsyncIterator:sW,SymbolIterator:oW,SymbolFor:ta}=Et(),aW=ta("nodejs.stream.destroyed"),lW=ta("nodejs.stream.errored"),uN=ta("nodejs.stream.readable"),dN=ta("nodejs.stream.writable"),cW=ta("nodejs.stream.disturbed"),wpe=ta("nodejs.webstream.isClosedPromise"),Lpe=ta("nodejs.webstream.controllerErrorFunction");function iT(t,e=!1){var n;return!!(t&&typeof t.pipe=="function"&&typeof t.on=="function"&&(!e||typeof t.pause=="function"&&typeof t.resume=="function")&&(!t._writableState||((n=t._readableState)===null||n===void 0?void 0:n.readable)!==!1)&&(!t._writableState||t._readableState))}function sT(t){var e;return!!(t&&typeof t.write=="function"&&typeof t.on=="function"&&(!t._readableState||((e=t._writableState)===null||e===void 0?void 0:e.writable)!==!1))}function Dpe(t){return!!(t&&typeof t.pipe=="function"&&t._readableState&&typeof t.on=="function"&&typeof t.write=="function")}function gi(t){return t&&(t._readableState||t._writableState||typeof t.write=="function"&&typeof t.on=="function"||typeof t.pipe=="function"&&typeof t.on=="function")}function uW(t){return!!(t&&!gi(t)&&typeof t.pipeThrough=="function"&&typeof t.getReader=="function"&&typeof t.cancel=="function")}function dW(t){return!!(t&&!gi(t)&&typeof t.getWriter=="function"&&typeof t.abort=="function")}function fW(t){return!!(t&&!gi(t)&&typeof t.readable=="object"&&typeof t.writable=="object")}function Ppe(t){return uW(t)||dW(t)||fW(t)}function xpe(t,e){return t==null?!1:e===!0?typeof t[sW]=="function":e===!1?typeof t[oW]=="function":typeof t[sW]=="function"||typeof t[oW]=="function"}function oT(t){if(!gi(t))return null;let e=t._writableState,n=t._readableState,r=e||n;return!!(t.destroyed||t[aW]||r!=null&&r.destroyed)}function EW(t){if(!sT(t))return null;if(t.writableEnded===!0)return!0;let e=t._writableState;return e!=null&&e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function vpe(t,e){if(!sT(t))return null;if(t.writableFinished===!0)return!0;let n=t._writableState;return n!=null&&n.errored?!1:typeof n?.finished!="boolean"?null:!!(n.finished||e===!1&&n.ended===!0&&n.length===0)}function Mpe(t){if(!iT(t))return null;if(t.readableEnded===!0)return!0;let e=t._readableState;return!e||e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function hW(t,e){if(!iT(t))return null;let n=t._readableState;return n!=null&&n.errored?!1:typeof n?.endEmitted!="boolean"?null:!!(n.endEmitted||e===!1&&n.ended===!0&&n.length===0)}function pW(t){return t&&t[uN]!=null?t[uN]:typeof t?.readable!="boolean"?null:oT(t)?!1:iT(t)&&t.readable&&!hW(t)}function TW(t){return t&&t[dN]!=null?t[dN]:typeof t?.writable!="boolean"?null:oT(t)?!1:sT(t)&&t.writable&&!EW(t)}function Upe(t,e){return gi(t)?oT(t)?!0:!(e?.readable!==!1&&pW(t)||e?.writable!==!1&&TW(t)):null}function Bpe(t){var e,n;return gi(t)?t.writableErrored?t.writableErrored:(e=(n=t._writableState)===null||n===void 0?void 0:n.errored)!==null&&e!==void 0?e:null:null}function Fpe(t){var e,n;return gi(t)?t.readableErrored?t.readableErrored:(e=(n=t._readableState)===null||n===void 0?void 0:n.errored)!==null&&e!==void 0?e:null:null}function Hpe(t){if(!gi(t))return null;if(typeof t.closed=="boolean")return t.closed;let e=t._writableState,n=t._readableState;return typeof e?.closed=="boolean"||typeof n?.closed=="boolean"?e?.closed||n?.closed:typeof t._closed=="boolean"&&SW(t)?t._closed:null}function SW(t){return typeof t._closed=="boolean"&&typeof t._defaultKeepAlive=="boolean"&&typeof t._removedConnection=="boolean"&&typeof t._removedContLen=="boolean"}function RW(t){return typeof t._sent100=="boolean"&&SW(t)}function Gpe(t){var e;return typeof t._consuming=="boolean"&&typeof t._dumped=="boolean"&&((e=t.req)===null||e===void 0?void 0:e.upgradeOrConnect)===void 0}function $pe(t){if(!gi(t))return null;let e=t._writableState,n=t._readableState,r=e||n;return!r&&RW(t)||!!(r&&r.autoDestroy&&r.emitClose&&r.closed===!1)}function Wpe(t){var e;return!!(t&&((e=t[cW])!==null&&e!==void 0?e:t.readableDidRead||t.readableAborted))}function kpe(t){var e,n,r,i,s,o,a,l,c,u;return!!(t&&((e=(n=(r=(i=(s=(o=t[lW])!==null&&o!==void 0?o:t.readableErrored)!==null&&s!==void 0?s:t.writableErrored)!==null&&i!==void 0?i:(a=t._readableState)===null||a===void 0?void 0:a.errorEmitted)!==null&&r!==void 0?r:(l=t._writableState)===null||l===void 0?void 0:l.errorEmitted)!==null&&n!==void 0?n:(c=t._readableState)===null||c===void 0?void 0:c.errored)!==null&&e!==void 0?e:!((u=t._writableState)===null||u===void 0)&&u.errored))}AW.exports={isDestroyed:oT,kIsDestroyed:aW,isDisturbed:Wpe,kIsDisturbed:cW,isErrored:kpe,kIsErrored:lW,isReadable:pW,kIsReadable:uN,kIsClosedPromise:wpe,kControllerErrorFunction:Lpe,kIsWritable:dN,isClosed:Hpe,isDuplexNodeStream:Dpe,isFinished:Upe,isIterable:xpe,isReadableNodeStream:iT,isReadableStream:uW,isReadableEnded:Mpe,isReadableFinished:hW,isReadableErrored:Fpe,isNodeStream:gi,isWebStream:Ppe,isWritable:TW,isWritableNodeStream:sT,isWritableStream:dW,isWritableEnded:EW,isWritableFinished:vpe,isWritableErrored:Bpe,isServerRequest:Gpe,isServerResponse:RW,willEmitClose:$pe,isTransformStream:fW}});var ls=O((mUe,TN)=>{"use strict";var js=Je(),{AbortError:yW,codes:Ype}=Mn(),{ERR_INVALID_ARG_TYPE:Vpe,ERR_STREAM_PREMATURE_CLOSE:mW}=Ype,{kEmptyObject:EN,once:hN}=qn(),{validateAbortSignal:qpe,validateFunction:Xpe,validateObject:zpe,validateBoolean:jpe}=ql(),{Promise:Kpe,PromisePrototypeThen:Jpe,SymbolDispose:wW}=Et(),{isClosed:Qpe,isReadable:gW,isReadableNodeStream:fN,isReadableStream:Zpe,isReadableFinished:IW,isReadableErrored:_W,isWritable:NW,isWritableNodeStream:OW,isWritableStream:eTe,isWritableFinished:CW,isWritableErrored:bW,isNodeStream:tTe,willEmitClose:nTe,kIsClosedPromise:rTe}=Ii(),Xl;function iTe(t){return t.setHeader&&typeof t.abort=="function"}var pN=()=>{};function LW(t,e,n){var r,i;if(arguments.length===2?(n=e,e=EN):e==null?e=EN:zpe(e,"options"),Xpe(n,"callback"),qpe(e.signal,"options.signal"),n=hN(n),Zpe(t)||eTe(t))return sTe(t,e,n);if(!tTe(t))throw new Vpe("stream",["ReadableStream","WritableStream","Stream"],t);let s=(r=e.readable)!==null&&r!==void 0?r:fN(t),o=(i=e.writable)!==null&&i!==void 0?i:OW(t),a=t._writableState,l=t._readableState,c=()=>{t.writable||E()},u=nTe(t)&&fN(t)===s&&OW(t)===o,d=CW(t,!1),E=()=>{d=!0,t.destroyed&&(u=!1),!(u&&(!t.readable||s))&&(!s||f)&&n.call(t)},f=IW(t,!1),p=()=>{f=!0,t.destroyed&&(u=!1),!(u&&(!t.writable||o))&&(!o||d)&&n.call(t)},h=I=>{n.call(t,I)},T=Qpe(t),S=()=>{T=!0;let I=bW(t)||_W(t);if(I&&typeof I!="boolean")return n.call(t,I);if(s&&!f&&fN(t,!0)&&!IW(t,!1))return n.call(t,new mW);if(o&&!d&&!CW(t,!1))return n.call(t,new mW);n.call(t)},m=()=>{T=!0;let I=bW(t)||_W(t);if(I&&typeof I!="boolean")return n.call(t,I);n.call(t)},R=()=>{t.req.on("finish",E)};iTe(t)?(t.on("complete",E),u||t.on("abort",S),t.req?R():t.on("request",R)):o&&!a&&(t.on("end",c),t.on("close",c)),!u&&typeof t.aborted=="boolean"&&t.on("aborted",S),t.on("end",p),t.on("finish",E),e.error!==!1&&t.on("error",h),t.on("close",S),T?js.nextTick(S):a!=null&&a.errorEmitted||l!=null&&l.errorEmitted?u||js.nextTick(m):(!s&&(!u||gW(t))&&(d||NW(t)===!1)||!o&&(!u||NW(t))&&(f||gW(t)===!1)||l&&t.req&&t.aborted)&&js.nextTick(m);let A=()=>{n=pN,t.removeListener("aborted",S),t.removeListener("complete",E),t.removeListener("abort",S),t.removeListener("request",R),t.req&&t.req.removeListener("finish",E),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",E),t.removeListener("end",p),t.removeListener("error",h),t.removeListener("close",S)};if(e.signal&&!T){let I=()=>{let w=n;A(),w.call(t,new yW(void 0,{cause:e.signal.reason}))};if(e.signal.aborted)js.nextTick(I);else{Xl=Xl||qn().addAbortListener;let w=Xl(e.signal,I),g=n;n=hN((...L)=>{w[wW](),g.apply(t,L)})}}return A}function sTe(t,e,n){let r=!1,i=pN;if(e.signal)if(i=()=>{r=!0,n.call(t,new yW(void 0,{cause:e.signal.reason}))},e.signal.aborted)js.nextTick(i);else{Xl=Xl||qn().addAbortListener;let o=Xl(e.signal,i),a=n;n=hN((...l)=>{o[wW](),a.apply(t,l)})}let s=(...o)=>{r||js.nextTick(()=>n.apply(t,o))};return Jpe(t[rTe].promise,s,s),pN}function oTe(t,e){var n;let r=!1;return e===null&&(e=EN),(n=e)!==null&&n!==void 0&&n.cleanup&&(jpe(e.cleanup,"cleanup"),r=e.cleanup),new Kpe((i,s)=>{let o=LW(t,e,a=>{r&&o(),a?s(a):i()})})}TN.exports=LW;TN.exports.finished=oTe});var na=O((gUe,FW)=>{"use strict";var _i=Je(),{aggregateTwoErrors:aTe,codes:{ERR_MULTIPLE_CALLBACK:lTe},AbortError:cTe}=Mn(),{Symbol:xW}=Et(),{kIsDestroyed:uTe,isDestroyed:dTe,isFinished:fTe,isServerRequest:ETe}=Ii(),vW=xW("kDestroy"),SN=xW("kConstruct");function MW(t,e,n){t&&(t.stack,e&&!e.errored&&(e.errored=t),n&&!n.errored&&(n.errored=t))}function hTe(t,e){let n=this._readableState,r=this._writableState,i=r||n;return r!=null&&r.destroyed||n!=null&&n.destroyed?(typeof e=="function"&&e(),this):(MW(t,r,n),r&&(r.destroyed=!0),n&&(n.destroyed=!0),i.constructed?DW(this,t,e):this.once(vW,function(s){DW(this,aTe(s,t),e)}),this)}function DW(t,e,n){let r=!1;function i(s){if(r)return;r=!0;let o=t._readableState,a=t._writableState;MW(s,a,o),a&&(a.closed=!0),o&&(o.closed=!0),typeof n=="function"&&n(s),s?_i.nextTick(pTe,t,s):_i.nextTick(UW,t)}try{t._destroy(e||null,i)}catch(s){i(s)}}function pTe(t,e){RN(t,e),UW(t)}function UW(t){let e=t._readableState,n=t._writableState;n&&(n.closeEmitted=!0),e&&(e.closeEmitted=!0),(n!=null&&n.emitClose||e!=null&&e.emitClose)&&t.emit("close")}function RN(t,e){let n=t._readableState,r=t._writableState;r!=null&&r.errorEmitted||n!=null&&n.errorEmitted||(r&&(r.errorEmitted=!0),n&&(n.errorEmitted=!0),t.emit("error",e))}function TTe(){let t=this._readableState,e=this._writableState;t&&(t.constructed=!0,t.closed=!1,t.closeEmitted=!1,t.destroyed=!1,t.errored=null,t.errorEmitted=!1,t.reading=!1,t.ended=t.readable===!1,t.endEmitted=t.readable===!1),e&&(e.constructed=!0,e.destroyed=!1,e.closed=!1,e.closeEmitted=!1,e.errored=null,e.errorEmitted=!1,e.finalCalled=!1,e.prefinished=!1,e.ended=e.writable===!1,e.ending=e.writable===!1,e.finished=e.writable===!1)}function AN(t,e,n){let r=t._readableState,i=t._writableState;if(i!=null&&i.destroyed||r!=null&&r.destroyed)return this;r!=null&&r.autoDestroy||i!=null&&i.autoDestroy?t.destroy(e):e&&(e.stack,i&&!i.errored&&(i.errored=e),r&&!r.errored&&(r.errored=e),n?_i.nextTick(RN,t,e):RN(t,e))}function STe(t,e){if(typeof t._construct!="function")return;let n=t._readableState,r=t._writableState;n&&(n.constructed=!1),r&&(r.constructed=!1),t.once(SN,e),!(t.listenerCount(SN)>1)&&_i.nextTick(RTe,t)}function RTe(t){let e=!1;function n(r){if(e){AN(t,r??new lTe);return}e=!0;let i=t._readableState,s=t._writableState,o=s||i;i&&(i.constructed=!0),s&&(s.constructed=!0),o.destroyed?t.emit(vW,r):r?AN(t,r,!0):_i.nextTick(ATe,t)}try{t._construct(r=>{_i.nextTick(n,r)})}catch(r){_i.nextTick(n,r)}}function ATe(t){t.emit(SN)}function PW(t){return t?.setHeader&&typeof t.abort=="function"}function BW(t){t.emit("close")}function mTe(t,e){t.emit("error",e),_i.nextTick(BW,t)}function gTe(t,e){!t||dTe(t)||(!e&&!fTe(t)&&(e=new cTe),ETe(t)?(t.socket=null,t.destroy(e)):PW(t)?t.abort():PW(t.req)?t.req.abort():typeof t.destroy=="function"?t.destroy(e):typeof t.close=="function"?t.close():e?_i.nextTick(mTe,t,e):_i.nextTick(BW,t),t.destroyed||(t[uTe]=!0))}FW.exports={construct:STe,destroyer:gTe,destroy:hTe,undestroy:TTe,errorOrDestroy:AN}});var cT=O((IUe,GW)=>{"use strict";var{ArrayIsArray:ITe,ObjectSetPrototypeOf:HW}=Et(),{EventEmitter:aT}=require("events");function lT(t){aT.call(this,t)}HW(lT.prototype,aT.prototype);HW(lT,aT);lT.prototype.pipe=function(t,e){let n=this;function r(u){t.writable&&t.write(u)===!1&&n.pause&&n.pause()}n.on("data",r);function i(){n.readable&&n.resume&&n.resume()}t.on("drain",i),!t._isStdio&&(!e||e.end!==!1)&&(n.on("end",o),n.on("close",a));let s=!1;function o(){s||(s=!0,t.end())}function a(){s||(s=!0,typeof t.destroy=="function"&&t.destroy())}function l(u){c(),aT.listenerCount(this,"error")===0&&this.emit("error",u)}mN(n,"error",l),mN(t,"error",l);function c(){n.removeListener("data",r),t.removeListener("drain",i),n.removeListener("end",o),n.removeListener("close",a),n.removeListener("error",l),t.removeListener("error",l),n.removeListener("end",c),n.removeListener("close",c),t.removeListener("close",c)}return n.on("end",c),n.on("close",c),t.on("close",c),t.emit("pipe",n),t};function mN(t,e,n){if(typeof t.prependListener=="function")return t.prependListener(e,n);!t._events||!t._events[e]?t.on(e,n):ITe(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]}GW.exports={Stream:lT,prependListener:mN}});var wd=O((_Ue,uT)=>{"use strict";var{SymbolDispose:_Te}=Et(),{AbortError:$W,codes:NTe}=Mn(),{isNodeStream:WW,isWebStream:OTe,kControllerErrorFunction:CTe}=Ii(),bTe=ls(),{ERR_INVALID_ARG_TYPE:kW}=NTe,gN,yTe=(t,e)=>{if(typeof t!="object"||!("aborted"in t))throw new kW(e,"AbortSignal",t)};uT.exports.addAbortSignal=function(e,n){if(yTe(e,"signal"),!WW(n)&&!OTe(n))throw new kW("stream",["ReadableStream","WritableStream","Stream"],n);return uT.exports.addAbortSignalNoValidate(e,n)};uT.exports.addAbortSignalNoValidate=function(t,e){if(typeof t!="object"||!("aborted"in t))return e;let n=WW(e)?()=>{e.destroy(new $W(void 0,{cause:t.reason}))}:()=>{e[CTe](new $W(void 0,{cause:t.reason}))};if(t.aborted)n();else{gN=gN||qn().addAbortListener;let r=gN(t,n);bTe(e,r[_Te])}return e}});var qW=O((OUe,VW)=>{"use strict";var{StringPrototypeSlice:YW,SymbolIterator:wTe,TypedArrayPrototypeSet:dT,Uint8Array:LTe}=Et(),{Buffer:IN}=require("buffer"),{inspect:DTe}=qn();VW.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){let n={data:e,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}unshift(e){let n={data:e,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}shift(){if(this.length===0)return;let e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return"";let n=this.head,r=""+n.data;for(;(n=n.next)!==null;)r+=e+n.data;return r}concat(e){if(this.length===0)return IN.alloc(0);let n=IN.allocUnsafe(e>>>0),r=this.head,i=0;for(;r;)dT(n,r.data,i),i+=r.data.length,r=r.next;return n}consume(e,n){let r=this.head.data;if(e<r.length){let i=r.slice(0,e);return this.head.data=r.slice(e),i}return e===r.length?this.shift():n?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[wTe](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let n="",r=this.head,i=0;do{let s=r.data;if(e>s.length)n+=s,e-=s.length;else{e===s.length?(n+=s,++i,r.next?this.head=r.next:this.head=this.tail=null):(n+=YW(s,0,e),this.head=r,r.data=YW(s,e));break}++i}while((r=r.next)!==null);return this.length-=i,n}_getBuffer(e){let n=IN.allocUnsafe(e),r=e,i=this.head,s=0;do{let o=i.data;if(e>o.length)dT(n,o,r-e),e-=o.length;else{e===o.length?(dT(n,o,r-e),++s,i.next?this.head=i.next:this.head=this.tail=null):(dT(n,new LTe(o.buffer,o.byteOffset,e),r-e),this.head=i,i.data=o.slice(e));break}++s}while((i=i.next)!==null);return this.length-=s,n}[Symbol.for("nodejs.util.inspect.custom")](e,n){return DTe(this,{...n,depth:0,customInspect:!1})}}});var Ld=O((CUe,KW)=>{"use strict";var{MathFloor:PTe,NumberIsInteger:xTe}=Et(),{validateInteger:vTe}=ql(),{ERR_INVALID_ARG_VALUE:MTe}=Mn().codes,XW=16*1024,zW=16;function UTe(t,e,n){return t.highWaterMark!=null?t.highWaterMark:e?t[n]:null}function jW(t){return t?zW:XW}function BTe(t,e){vTe(e,"value",0),t?zW=e:XW=e}function FTe(t,e,n,r){let i=UTe(e,r,n);if(i!=null){if(!xTe(i)||i<0){let s=r?`options.${n}`:"options.highWaterMark";throw new MTe(s,i)}return PTe(i)}return jW(t.objectMode)}KW.exports={getHighWaterMark:FTe,getDefaultHighWaterMark:jW,setDefaultHighWaterMark:BTe}});var _N=O((bUe,ek)=>{"use strict";var JW=Je(),{PromisePrototypeThen:HTe,SymbolAsyncIterator:QW,SymbolIterator:ZW}=Et(),{Buffer:GTe}=require("buffer"),{ERR_INVALID_ARG_TYPE:$Te,ERR_STREAM_NULL_VALUES:WTe}=Mn().codes;function kTe(t,e,n){let r;if(typeof e=="string"||e instanceof GTe)return new t({objectMode:!0,...n,read(){this.push(e),this.push(null)}});let i;if(e&&e[QW])i=!0,r=e[QW]();else if(e&&e[ZW])i=!1,r=e[ZW]();else throw new $Te("iterable",["Iterable"],e);let s=new t({objectMode:!0,highWaterMark:1,...n}),o=!1;s._read=function(){o||(o=!0,l())},s._destroy=function(c,u){HTe(a(c),()=>JW.nextTick(u,c),d=>JW.nextTick(u,d||c))};async function a(c){let u=c!=null,d=typeof r.throw=="function";if(u&&d){let{value:E,done:f}=await r.throw(c);if(await E,f)return}if(typeof r.return=="function"){let{value:E}=await r.return();await E}}async function l(){for(;;){try{let{value:c,done:u}=i?await r.next():r.next();if(u)s.push(null);else{let d=c&&typeof c.then=="function"?await c:c;if(d===null)throw o=!1,new WTe;if(s.push(d))continue;o=!1}}catch(c){s.destroy(c)}break}}return s}ek.exports=kTe});var Pd=O((yUe,Rk)=>{"use strict";var Yr=Je(),{ArrayPrototypeIndexOf:YTe,NumberIsInteger:VTe,NumberIsNaN:qTe,NumberParseInt:XTe,ObjectDefineProperties:DN,ObjectKeys:zTe,ObjectSetPrototypeOf:rk,Promise:ik,SafeSet:jTe,SymbolAsyncDispose:KTe,SymbolAsyncIterator:JTe,Symbol:QTe}=Et();Rk.exports=_e;_e.ReadableState=pT;var{EventEmitter:ZTe}=require("events"),{Stream:Ks,prependListener:eSe}=cT(),{Buffer:NN}=require("buffer"),{addAbortSignal:tSe}=wd(),sk=ls(),Fe=qn().debuglog("stream",t=>{Fe=t}),nSe=qW(),Kl=na(),{getHighWaterMark:rSe,getDefaultHighWaterMark:iSe}=Ld(),{aggregateTwoErrors:tk,codes:{ERR_INVALID_ARG_TYPE:sSe,ERR_METHOD_NOT_IMPLEMENTED:oSe,ERR_OUT_OF_RANGE:aSe,ERR_STREAM_PUSH_AFTER_EOF:lSe,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:cSe},AbortError:uSe}=Mn(),{validateObject:dSe}=ql(),ra=QTe("kPaused"),{StringDecoder:ok}=Uu(),fSe=_N();rk(_e.prototype,Ks.prototype);rk(_e,Ks);var ON=()=>{},{errorOrDestroy:zl}=Kl,jl=1,ESe=2,ak=4,Dd=8,lk=16,fT=32,ET=64,ck=128,hSe=256,pSe=512,TSe=1024,wN=2048,LN=4096,SSe=8192,RSe=16384,ASe=32768,uk=65536,mSe=1<<17,gSe=1<<18;function Vt(t){return{enumerable:!1,get(){return(this.state&t)!==0},set(e){e?this.state|=t:this.state&=~t}}}DN(pT.prototype,{objectMode:Vt(jl),ended:Vt(ESe),endEmitted:Vt(ak),reading:Vt(Dd),constructed:Vt(lk),sync:Vt(fT),needReadable:Vt(ET),emittedReadable:Vt(ck),readableListening:Vt(hSe),resumeScheduled:Vt(pSe),errorEmitted:Vt(TSe),emitClose:Vt(wN),autoDestroy:Vt(LN),destroyed:Vt(SSe),closed:Vt(RSe),closeEmitted:Vt(ASe),multiAwaitDrain:Vt(uk),readingMore:Vt(mSe),dataEmitted:Vt(gSe)});function pT(t,e,n){typeof n!="boolean"&&(n=e instanceof Ni()),this.state=wN|LN|lk|fT,t&&t.objectMode&&(this.state|=jl),n&&t&&t.readableObjectMode&&(this.state|=jl),this.highWaterMark=t?rSe(this,t,"readableHighWaterMark",n):iSe(!1),this.buffer=new nSe,this.length=0,this.pipes=[],this.flowing=null,this[ra]=null,t&&t.emitClose===!1&&(this.state&=~wN),t&&t.autoDestroy===!1&&(this.state&=~LN),this.errored=null,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,t&&t.encoding&&(this.decoder=new ok(t.encoding),this.encoding=t.encoding)}function _e(t){if(!(this instanceof _e))return new _e(t);let e=this instanceof Ni();this._readableState=new pT(t,this,e),t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&!e&&tSe(t.signal,this)),Ks.call(this,t),Kl.construct(this,()=>{this._readableState.needReadable&&hT(this,this._readableState)})}_e.prototype.destroy=Kl.destroy;_e.prototype._undestroy=Kl.undestroy;_e.prototype._destroy=function(t,e){e(t)};_e.prototype[ZTe.captureRejectionSymbol]=function(t){this.destroy(t)};_e.prototype[KTe]=function(){let t;return this.destroyed||(t=this.readableEnded?null:new uSe,this.destroy(t)),new ik((e,n)=>sk(this,r=>r&&r!==t?n(r):e(null)))};_e.prototype.push=function(t,e){return dk(this,t,e,!1)};_e.prototype.unshift=function(t,e){return dk(this,t,e,!0)};function dk(t,e,n,r){Fe("readableAddChunk",e);let i=t._readableState,s;if((i.state&jl)===0&&(typeof e=="string"?(n=n||i.defaultEncoding,i.encoding!==n&&(r&&i.encoding?e=NN.from(e,n).toString(i.encoding):(e=NN.from(e,n),n=""))):e instanceof NN?n="":Ks._isUint8Array(e)?(e=Ks._uint8ArrayToBuffer(e),n=""):e!=null&&(s=new sSe("chunk",["string","Buffer","Uint8Array"],e))),s)zl(t,s);else if(e===null)i.state&=~Dd,NSe(t,i);else if((i.state&jl)!==0||e&&e.length>0)if(r)if((i.state&ak)!==0)zl(t,new cSe);else{if(i.destroyed||i.errored)return!1;CN(t,i,e,!0)}else if(i.ended)zl(t,new lSe);else{if(i.destroyed||i.errored)return!1;i.state&=~Dd,i.decoder&&!n?(e=i.decoder.write(e),i.objectMode||e.length!==0?CN(t,i,e,!1):hT(t,i)):CN(t,i,e,!1)}else r||(i.state&=~Dd,hT(t,i));return!i.ended&&(i.length<i.highWaterMark||i.length===0)}function CN(t,e,n,r){e.flowing&&e.length===0&&!e.sync&&t.listenerCount("data")>0?((e.state&uk)!==0?e.awaitDrainWriters.clear():e.awaitDrainWriters=null,e.dataEmitted=!0,t.emit("data",n)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),(e.state&ET)!==0&&TT(t)),hT(t,e)}_e.prototype.isPaused=function(){let t=this._readableState;return t[ra]===!0||t.flowing===!1};_e.prototype.setEncoding=function(t){let e=new ok(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;let n=this._readableState.buffer,r="";for(let i of n)r+=e.write(i);return n.clear(),r!==""&&n.push(r),this._readableState.length=r.length,this};var ISe=1073741824;function _Se(t){if(t>ISe)throw new aSe("size","<= 1GiB",t);return t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++,t}function nk(t,e){return t<=0||e.length===0&&e.ended?0:(e.state&jl)!==0?1:qTe(t)?e.flowing&&e.length?e.buffer.first().length:e.length:t<=e.length?t:e.ended?e.length:0}_e.prototype.read=function(t){Fe("read",t),t===void 0?t=NaN:VTe(t)||(t=XTe(t,10));let e=this._readableState,n=t;if(t>e.highWaterMark&&(e.highWaterMark=_Se(t)),t!==0&&(e.state&=~ck),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return Fe("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?bN(this):TT(this),null;if(t=nk(t,e),t===0&&e.ended)return e.length===0&&bN(this),null;let r=(e.state&ET)!==0;if(Fe("need readable",r),(e.length===0||e.length-t<e.highWaterMark)&&(r=!0,Fe("length less than watermark",r)),e.ended||e.reading||e.destroyed||e.errored||!e.constructed)r=!1,Fe("reading, ended or constructing",r);else if(r){Fe("do read"),e.state|=Dd|fT,e.length===0&&(e.state|=ET);try{this._read(e.highWaterMark)}catch(s){zl(this,s)}e.state&=~fT,e.reading||(t=nk(n,e))}let i;return t>0?i=Tk(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.multiAwaitDrain?e.awaitDrainWriters.clear():e.awaitDrainWriters=null),e.length===0&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&bN(this)),i!==null&&!e.errorEmitted&&!e.closeEmitted&&(e.dataEmitted=!0,this.emit("data",i)),i};function NSe(t,e){if(Fe("onEofChunk"),!e.ended){if(e.decoder){let n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,e.sync?TT(t):(e.needReadable=!1,e.emittedReadable=!0,fk(t))}}function TT(t){let e=t._readableState;Fe("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(Fe("emitReadable",e.flowing),e.emittedReadable=!0,Yr.nextTick(fk,t))}function fk(t){let e=t._readableState;Fe("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&!e.errored&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,hk(t)}function hT(t,e){!e.readingMore&&e.constructed&&(e.readingMore=!0,Yr.nextTick(OSe,t,e))}function OSe(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){let n=e.length;if(Fe("maybeReadMore read 0"),t.read(0),n===e.length)break}e.readingMore=!1}_e.prototype._read=function(t){throw new oSe("_read()")};_e.prototype.pipe=function(t,e){let n=this,r=this._readableState;r.pipes.length===1&&(r.multiAwaitDrain||(r.multiAwaitDrain=!0,r.awaitDrainWriters=new jTe(r.awaitDrainWriters?[r.awaitDrainWriters]:[]))),r.pipes.push(t),Fe("pipe count=%d opts=%j",r.pipes.length,e);let s=(!e||e.end!==!1)&&t!==Yr.stdout&&t!==Yr.stderr?a:T;r.endEmitted?Yr.nextTick(s):n.once("end",s),t.on("unpipe",o);function o(S,m){Fe("onunpipe"),S===n&&m&&m.hasUnpiped===!1&&(m.hasUnpiped=!0,u())}function a(){Fe("onend"),t.end()}let l,c=!1;function u(){Fe("cleanup"),t.removeListener("close",p),t.removeListener("finish",h),l&&t.removeListener("drain",l),t.removeListener("error",f),t.removeListener("unpipe",o),n.removeListener("end",a),n.removeListener("end",T),n.removeListener("data",E),c=!0,l&&r.awaitDrainWriters&&(!t._writableState||t._writableState.needDrain)&&l()}function d(){c||(r.pipes.length===1&&r.pipes[0]===t?(Fe("false write response, pause",0),r.awaitDrainWriters=t,r.multiAwaitDrain=!1):r.pipes.length>1&&r.pipes.includes(t)&&(Fe("false write response, pause",r.awaitDrainWriters.size),r.awaitDrainWriters.add(t)),n.pause()),l||(l=CSe(n,t),t.on("drain",l))}n.on("data",E);function E(S){Fe("ondata");let m=t.write(S);Fe("dest.write",m),m===!1&&d()}function f(S){if(Fe("onerror",S),T(),t.removeListener("error",f),t.listenerCount("error")===0){let m=t._writableState||t._readableState;m&&!m.errorEmitted?zl(t,S):t.emit("error",S)}}eSe(t,"error",f);function p(){t.removeListener("finish",h),T()}t.once("close",p);function h(){Fe("onfinish"),t.removeListener("close",p),T()}t.once("finish",h);function T(){Fe("unpipe"),n.unpipe(t)}return t.emit("pipe",n),t.writableNeedDrain===!0?d():r.flowing||(Fe("pipe resume"),n.resume()),t};function CSe(t,e){return function(){let r=t._readableState;r.awaitDrainWriters===e?(Fe("pipeOnDrain",1),r.awaitDrainWriters=null):r.multiAwaitDrain&&(Fe("pipeOnDrain",r.awaitDrainWriters.size),r.awaitDrainWriters.delete(e)),(!r.awaitDrainWriters||r.awaitDrainWriters.size===0)&&t.listenerCount("data")&&t.resume()}}_e.prototype.unpipe=function(t){let e=this._readableState,n={hasUnpiped:!1};if(e.pipes.length===0)return this;if(!t){let i=e.pipes;e.pipes=[],this.pause();for(let s=0;s<i.length;s++)i[s].emit("unpipe",this,{hasUnpiped:!1});return this}let r=YTe(e.pipes,t);return r===-1?this:(e.pipes.splice(r,1),e.pipes.length===0&&this.pause(),t.emit("unpipe",this,n),this)};_e.prototype.on=function(t,e){let n=Ks.prototype.on.call(this,t,e),r=this._readableState;return t==="data"?(r.readableListening=this.listenerCount("readable")>0,r.flowing!==!1&&this.resume()):t==="readable"&&!r.endEmitted&&!r.readableListening&&(r.readableListening=r.needReadable=!0,r.flowing=!1,r.emittedReadable=!1,Fe("on readable",r.length,r.reading),r.length?TT(this):r.reading||Yr.nextTick(bSe,this)),n};_e.prototype.addListener=_e.prototype.on;_e.prototype.removeListener=function(t,e){let n=Ks.prototype.removeListener.call(this,t,e);return t==="readable"&&Yr.nextTick(Ek,this),n};_e.prototype.off=_e.prototype.removeListener;_e.prototype.removeAllListeners=function(t){let e=Ks.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&Yr.nextTick(Ek,this),e};function Ek(t){let e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&e[ra]===!1?e.flowing=!0:t.listenerCount("data")>0?t.resume():e.readableListening||(e.flowing=null)}function bSe(t){Fe("readable nexttick read 0"),t.read(0)}_e.prototype.resume=function(){let t=this._readableState;return t.flowing||(Fe("resume"),t.flowing=!t.readableListening,ySe(this,t)),t[ra]=!1,this};function ySe(t,e){e.resumeScheduled||(e.resumeScheduled=!0,Yr.nextTick(wSe,t,e))}function wSe(t,e){Fe("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),hk(t),e.flowing&&!e.reading&&t.read(0)}_e.prototype.pause=function(){return Fe("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Fe("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[ra]=!0,this};function hk(t){let e=t._readableState;for(Fe("flow",e.flowing);e.flowing&&t.read()!==null;);}_e.prototype.wrap=function(t){let e=!1;t.on("data",r=>{!this.push(r)&&t.pause&&(e=!0,t.pause())}),t.on("end",()=>{this.push(null)}),t.on("error",r=>{zl(this,r)}),t.on("close",()=>{this.destroy()}),t.on("destroy",()=>{this.destroy()}),this._read=()=>{e&&t.resume&&(e=!1,t.resume())};let n=zTe(t);for(let r=1;r<n.length;r++){let i=n[r];this[i]===void 0&&typeof t[i]=="function"&&(this[i]=t[i].bind(t))}return this};_e.prototype[JTe]=function(){return pk(this)};_e.prototype.iterator=function(t){return t!==void 0&&dSe(t,"options"),pk(this,t)};function pk(t,e){typeof t.read!="function"&&(t=_e.wrap(t,{objectMode:!0}));let n=LSe(t,e);return n.stream=t,n}async function*LSe(t,e){let n=ON;function r(o){this===t?(n(),n=ON):n=o}t.on("readable",r);let i,s=sk(t,{writable:!1},o=>{i=o?tk(i,o):null,n(),n=ON});try{for(;;){let o=t.destroyed?null:t.read();if(o!==null)yield o;else{if(i)throw i;if(i===null)return;await new ik(r)}}}catch(o){throw i=tk(i,o),i}finally{(i||e?.destroyOnReturn!==!1)&&(i===void 0||t._readableState.autoDestroy)?Kl.destroyer(t,null):(t.off("readable",r),s())}}DN(_e.prototype,{readable:{__proto__:null,get(){let t=this._readableState;return!!t&&t.readable!==!1&&!t.destroyed&&!t.errorEmitted&&!t.endEmitted},set(t){this._readableState&&(this._readableState.readable=!!t)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(t){this._readableState&&(this._readableState.destroyed=t)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}});DN(pT.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[ra]!==!1},set(t){this[ra]=!!t}}});_e._fromList=Tk;function Tk(t,e){if(e.length===0)return null;let n;return e.objectMode?n=e.buffer.shift():!t||t>=e.length?(e.decoder?n=e.buffer.join(""):e.buffer.length===1?n=e.buffer.first():n=e.buffer.concat(e.length),e.buffer.clear()):n=e.buffer.consume(t,e.decoder),n}function bN(t){let e=t._readableState;Fe("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,Yr.nextTick(DSe,e,t))}function DSe(t,e){if(Fe("endReadableNT",t.endEmitted,t.length),!t.errored&&!t.closeEmitted&&!t.endEmitted&&t.length===0){if(t.endEmitted=!0,e.emit("end"),e.writable&&e.allowHalfOpen===!1)Yr.nextTick(PSe,e);else if(t.autoDestroy){let n=e._writableState;(!n||n.autoDestroy&&(n.finished||n.writable===!1))&&e.destroy()}}}function PSe(t){t.writable&&!t.writableEnded&&!t.destroyed&&t.end()}_e.from=function(t,e){return fSe(_e,t,e)};var yN;function Sk(){return yN===void 0&&(yN={}),yN}_e.fromWeb=function(t,e){return Sk().newStreamReadableFromReadableStream(t,e)};_e.toWeb=function(t,e){return Sk().newReadableStreamFromStreamReadable(t,e)};_e.wrap=function(t,e){var n,r;return new _e({objectMode:(n=(r=t.readableObjectMode)!==null&&r!==void 0?r:t.objectMode)!==null&&n!==void 0?n:!0,...e,destroy(i,s){Kl.destroyer(t,i),s(i)}}).wrap(t)}});var gT=O((wUe,Lk)=>{"use strict";var ia=Je(),{ArrayPrototypeSlice:gk,Error:xSe,FunctionPrototypeSymbolHasInstance:Ik,ObjectDefineProperty:_k,ObjectDefineProperties:vSe,ObjectSetPrototypeOf:Nk,StringPrototypeToLowerCase:MSe,Symbol:USe,SymbolHasInstance:BSe}=Et();Lk.exports=At;At.WritableState=Md;var{EventEmitter:FSe}=require("events"),xd=cT().Stream,{Buffer:ST}=require("buffer"),mT=na(),{addAbortSignal:HSe}=wd(),{getHighWaterMark:GSe,getDefaultHighWaterMark:$Se}=Ld(),{ERR_INVALID_ARG_TYPE:WSe,ERR_METHOD_NOT_IMPLEMENTED:kSe,ERR_MULTIPLE_CALLBACK:Ok,ERR_STREAM_CANNOT_PIPE:YSe,ERR_STREAM_DESTROYED:vd,ERR_STREAM_ALREADY_FINISHED:VSe,ERR_STREAM_NULL_VALUES:qSe,ERR_STREAM_WRITE_AFTER_END:XSe,ERR_UNKNOWN_ENCODING:Ck}=Mn().codes,{errorOrDestroy:Jl}=mT;Nk(At.prototype,xd.prototype);Nk(At,xd);function vN(){}var Ql=USe("kOnFinished");function Md(t,e,n){typeof n!="boolean"&&(n=e instanceof Ni()),this.objectMode=!!(t&&t.objectMode),n&&(this.objectMode=this.objectMode||!!(t&&t.writableObjectMode)),this.highWaterMark=t?GSe(this,t,"writableHighWaterMark",n):$Se(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let r=!!(t&&t.decodeStrings===!1);this.decodeStrings=!r,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=jSe.bind(void 0,e),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,AT(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!t||t.emitClose!==!1,this.autoDestroy=!t||t.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[Ql]=[]}function AT(t){t.buffered=[],t.bufferedIndex=0,t.allBuffers=!0,t.allNoop=!0}Md.prototype.getBuffer=function(){return gk(this.buffered,this.bufferedIndex)};_k(Md.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function At(t){let e=this instanceof Ni();if(!e&&!Ik(At,this))return new At(t);this._writableState=new Md(t,this,e),t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&HSe(t.signal,this)),xd.call(this,t),mT.construct(this,()=>{let n=this._writableState;n.writing||UN(this,n),BN(this,n)})}_k(At,BSe,{__proto__:null,value:function(t){return Ik(this,t)?!0:this!==At?!1:t&&t._writableState instanceof Md}});At.prototype.pipe=function(){Jl(this,new YSe)};function bk(t,e,n,r){let i=t._writableState;if(typeof n=="function")r=n,n=i.defaultEncoding;else{if(!n)n=i.defaultEncoding;else if(n!=="buffer"&&!ST.isEncoding(n))throw new Ck(n);typeof r!="function"&&(r=vN)}if(e===null)throw new qSe;if(!i.objectMode)if(typeof e=="string")i.decodeStrings!==!1&&(e=ST.from(e,n),n="buffer");else if(e instanceof ST)n="buffer";else if(xd._isUint8Array(e))e=xd._uint8ArrayToBuffer(e),n="buffer";else throw new WSe("chunk",["string","Buffer","Uint8Array"],e);let s;return i.ending?s=new XSe:i.destroyed&&(s=new vd("write")),s?(ia.nextTick(r,s),Jl(t,s,!0),s):(i.pendingcb++,zSe(t,i,e,n,r))}At.prototype.write=function(t,e,n){return bk(this,t,e,n)===!0};At.prototype.cork=function(){this._writableState.corked++};At.prototype.uncork=function(){let t=this._writableState;t.corked&&(t.corked--,t.writing||UN(this,t))};At.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=MSe(e)),!ST.isEncoding(e))throw new Ck(e);return this._writableState.defaultEncoding=e,this};function zSe(t,e,n,r,i){let s=e.objectMode?1:n.length;e.length+=s;let o=e.length<e.highWaterMark;return o||(e.needDrain=!0),e.writing||e.corked||e.errored||!e.constructed?(e.buffered.push({chunk:n,encoding:r,callback:i}),e.allBuffers&&r!=="buffer"&&(e.allBuffers=!1),e.allNoop&&i!==vN&&(e.allNoop=!1)):(e.writelen=s,e.writecb=i,e.writing=!0,e.sync=!0,t._write(n,r,e.onwrite),e.sync=!1),o&&!e.errored&&!e.destroyed}function Ak(t,e,n,r,i,s,o){e.writelen=r,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new vd("write")):n?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function mk(t,e,n,r){--e.pendingcb,r(n),MN(e),Jl(t,n)}function jSe(t,e){let n=t._writableState,r=n.sync,i=n.writecb;if(typeof i!="function"){Jl(t,new Ok);return}n.writing=!1,n.writecb=null,n.length-=n.writelen,n.writelen=0,e?(e.stack,n.errored||(n.errored=e),t._readableState&&!t._readableState.errored&&(t._readableState.errored=e),r?ia.nextTick(mk,t,n,e,i):mk(t,n,e,i)):(n.buffered.length>n.bufferedIndex&&UN(t,n),r?n.afterWriteTickInfo!==null&&n.afterWriteTickInfo.cb===i?n.afterWriteTickInfo.count++:(n.afterWriteTickInfo={count:1,cb:i,stream:t,state:n},ia.nextTick(KSe,n.afterWriteTickInfo)):yk(t,n,1,i))}function KSe({stream:t,state:e,count:n,cb:r}){return e.afterWriteTickInfo=null,yk(t,e,n,r)}function yk(t,e,n,r){for(!e.ending&&!t.destroyed&&e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"));n-- >0;)e.pendingcb--,r();e.destroyed&&MN(e),BN(t,e)}function MN(t){if(t.writing)return;for(let i=t.bufferedIndex;i<t.buffered.length;++i){var e;let{chunk:s,callback:o}=t.buffered[i],a=t.objectMode?1:s.length;t.length-=a,o((e=t.errored)!==null&&e!==void 0?e:new vd("write"))}let n=t[Ql].splice(0);for(let i=0;i<n.length;i++){var r;n[i]((r=t.errored)!==null&&r!==void 0?r:new vd("end"))}AT(t)}function UN(t,e){if(e.corked||e.bufferProcessing||e.destroyed||!e.constructed)return;let{buffered:n,bufferedIndex:r,objectMode:i}=e,s=n.length-r;if(!s)return;let o=r;if(e.bufferProcessing=!0,s>1&&t._writev){e.pendingcb-=s-1;let a=e.allNoop?vN:c=>{for(let u=o;u<n.length;++u)n[u].callback(c)},l=e.allNoop&&o===0?n:gk(n,o);l.allBuffers=e.allBuffers,Ak(t,e,!0,e.length,l,"",a),AT(e)}else{do{let{chunk:a,encoding:l,callback:c}=n[o];n[o++]=null;let u=i?1:a.length;Ak(t,e,!1,u,a,l,c)}while(o<n.length&&!e.writing);o===n.length?AT(e):o>256?(n.splice(0,o),e.bufferedIndex=0):e.bufferedIndex=o}e.bufferProcessing=!1}At.prototype._write=function(t,e,n){if(this._writev)this._writev([{chunk:t,encoding:e}],n);else throw new kSe("_write()")};At.prototype._writev=null;At.prototype.end=function(t,e,n){let r=this._writableState;typeof t=="function"?(n=t,t=null,e=null):typeof e=="function"&&(n=e,e=null);let i;if(t!=null){let s=bk(this,t,e);s instanceof xSe&&(i=s)}return r.corked&&(r.corked=1,this.uncork()),i||(!r.errored&&!r.ending?(r.ending=!0,BN(this,r,!0),r.ended=!0):r.finished?i=new VSe("end"):r.destroyed&&(i=new vd("end"))),typeof n=="function"&&(i||r.finished?ia.nextTick(n,i):r[Ql].push(n)),this};function RT(t){return t.ending&&!t.destroyed&&t.constructed&&t.length===0&&!t.errored&&t.buffered.length===0&&!t.finished&&!t.writing&&!t.errorEmitted&&!t.closeEmitted}function JSe(t,e){let n=!1;function r(i){if(n){Jl(t,i??Ok());return}if(n=!0,e.pendingcb--,i){let s=e[Ql].splice(0);for(let o=0;o<s.length;o++)s[o](i);Jl(t,i,e.sync)}else RT(e)&&(e.prefinished=!0,t.emit("prefinish"),e.pendingcb++,ia.nextTick(xN,t,e))}e.sync=!0,e.pendingcb++;try{t._final(r)}catch(i){r(i)}e.sync=!1}function QSe(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.finalCalled=!0,JSe(t,e)):(e.prefinished=!0,t.emit("prefinish")))}function BN(t,e,n){RT(e)&&(QSe(t,e),e.pendingcb===0&&(n?(e.pendingcb++,ia.nextTick((r,i)=>{RT(i)?xN(r,i):i.pendingcb--},t,e)):RT(e)&&(e.pendingcb++,xN(t,e))))}function xN(t,e){e.pendingcb--,e.finished=!0;let n=e[Ql].splice(0);for(let r=0;r<n.length;r++)n[r]();if(t.emit("finish"),e.autoDestroy){let r=t._readableState;(!r||r.autoDestroy&&(r.endEmitted||r.readable===!1))&&t.destroy()}}vSe(At.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(t){this._writableState&&(this._writableState.destroyed=t)}},writable:{__proto__:null,get(){let t=this._writableState;return!!t&&t.writable!==!1&&!t.destroyed&&!t.errored&&!t.ending&&!t.ended},set(t){this._writableState&&(this._writableState.writable=!!t)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let t=this._writableState;return t?!t.destroyed&&!t.ending&&t.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var ZSe=mT.destroy;At.prototype.destroy=function(t,e){let n=this._writableState;return!n.destroyed&&(n.bufferedIndex<n.buffered.length||n[Ql].length)&&ia.nextTick(MN,n),ZSe.call(this,t,e),this};At.prototype._undestroy=mT.undestroy;At.prototype._destroy=function(t,e){e(t)};At.prototype[FSe.captureRejectionSymbol]=function(t){this.destroy(t)};var PN;function wk(){return PN===void 0&&(PN={}),PN}At.fromWeb=function(t,e){return wk().newStreamWritableFromWritableStream(t,e)};At.toWeb=function(t){return wk().newWritableStreamFromStreamWritable(t)}});var Vk=O((LUe,Yk)=>{var FN=Je(),eRe=require("buffer"),{isReadable:tRe,isWritable:nRe,isIterable:Dk,isNodeStream:rRe,isReadableNodeStream:Pk,isWritableNodeStream:xk,isDuplexNodeStream:iRe,isReadableStream:vk,isWritableStream:Mk}=Ii(),Uk=ls(),{AbortError:Wk,codes:{ERR_INVALID_ARG_TYPE:sRe,ERR_INVALID_RETURN_VALUE:Bk}}=Mn(),{destroyer:ec}=na(),oRe=Ni(),kk=Pd(),aRe=gT(),{createDeferredPromise:Fk}=qn(),Hk=_N(),Gk=globalThis.Blob||eRe.Blob,lRe=typeof Gk<"u"?function(e){return e instanceof Gk}:function(e){return!1},cRe=globalThis.AbortController||Dt().AbortController,{FunctionPrototypeCall:$k}=Et(),Js=class extends oRe{constructor(e){super(e),e?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),e?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};Yk.exports=function t(e,n){if(iRe(e))return e;if(Pk(e))return Zl({readable:e});if(xk(e))return Zl({writable:e});if(rRe(e))return Zl({writable:!1,readable:!1});if(vk(e))return Zl({readable:kk.fromWeb(e)});if(Mk(e))return Zl({writable:aRe.fromWeb(e)});if(typeof e=="function"){let{value:i,write:s,final:o,destroy:a}=uRe(e);if(Dk(i))return Hk(Js,i,{objectMode:!0,write:s,final:o,destroy:a});let l=i?.then;if(typeof l=="function"){let c,u=$k(l,i,d=>{if(d!=null)throw new Bk("nully","body",d)},d=>{ec(c,d)});return c=new Js({objectMode:!0,readable:!1,write:s,final(d){o(async()=>{try{await u,FN.nextTick(d,null)}catch(E){FN.nextTick(d,E)}})},destroy:a})}throw new Bk("Iterable, AsyncIterable or AsyncFunction",n,i)}if(lRe(e))return t(e.arrayBuffer());if(Dk(e))return Hk(Js,e,{objectMode:!0,writable:!1});if(vk(e?.readable)&&Mk(e?.writable))return Js.fromWeb(e);if(typeof e?.writable=="object"||typeof e?.readable=="object"){let i=e!=null&&e.readable?Pk(e?.readable)?e?.readable:t(e.readable):void 0,s=e!=null&&e.writable?xk(e?.writable)?e?.writable:t(e.writable):void 0;return Zl({readable:i,writable:s})}let r=e?.then;if(typeof r=="function"){let i;return $k(r,e,s=>{s!=null&&i.push(s),i.push(null)},s=>{ec(i,s)}),i=new Js({objectMode:!0,writable:!1,read(){}})}throw new sRe(n,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],e)};function uRe(t){let{promise:e,resolve:n}=Fk(),r=new cRe,i=r.signal;return{value:t((async function*(){for(;;){let o=e;e=null;let{chunk:a,done:l,cb:c}=await o;if(FN.nextTick(c),l)return;if(i.aborted)throw new Wk(void 0,{cause:i.reason});({promise:e,resolve:n}=Fk()),yield a}})(),{signal:i}),write(o,a,l){let c=n;n=null,c({chunk:o,done:!1,cb:l})},final(o){let a=n;n=null,a({done:!0,cb:o})},destroy(o,a){r.abort(),a(o)}}}function Zl(t){let e=t.readable&&typeof t.readable.read!="function"?kk.wrap(t.readable):t.readable,n=t.writable,r=!!tRe(e),i=!!nRe(n),s,o,a,l,c;function u(d){let E=l;l=null,E?E(d):d&&c.destroy(d)}return c=new Js({readableObjectMode:!!(e!=null&&e.readableObjectMode),writableObjectMode:!!(n!=null&&n.writableObjectMode),readable:r,writable:i}),i&&(Uk(n,d=>{i=!1,d&&ec(e,d),u(d)}),c._write=function(d,E,f){n.write(d,E)?f():s=f},c._final=function(d){n.end(),o=d},n.on("drain",function(){if(s){let d=s;s=null,d()}}),n.on("finish",function(){if(o){let d=o;o=null,d()}})),r&&(Uk(e,d=>{r=!1,d&&ec(e,d),u(d)}),e.on("readable",function(){if(a){let d=a;a=null,d()}}),e.on("end",function(){c.push(null)}),c._read=function(){for(;;){let d=e.read();if(d===null){a=c._read;return}if(!c.push(d))return}}),c._destroy=function(d,E){!d&&l!==null&&(d=new Wk),a=null,s=null,o=null,l===null?E(d):(l=E,ec(n,d),ec(e,d))},c}});var Ni=O((DUe,zk)=>{"use strict";var{ObjectDefineProperties:dRe,ObjectGetOwnPropertyDescriptor:cs,ObjectKeys:fRe,ObjectSetPrototypeOf:qk}=Et();zk.exports=Vr;var $N=Pd(),yr=gT();qk(Vr.prototype,$N.prototype);qk(Vr,$N);{let t=fRe(yr.prototype);for(let e=0;e<t.length;e++){let n=t[e];Vr.prototype[n]||(Vr.prototype[n]=yr.prototype[n])}}function Vr(t){if(!(this instanceof Vr))return new Vr(t);$N.call(this,t),yr.call(this,t),t?(this.allowHalfOpen=t.allowHalfOpen!==!1,t.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),t.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}dRe(Vr.prototype,{writable:{__proto__:null,...cs(yr.prototype,"writable")},writableHighWaterMark:{__proto__:null,...cs(yr.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...cs(yr.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...cs(yr.prototype,"writableBuffer")},writableLength:{__proto__:null,...cs(yr.prototype,"writableLength")},writableFinished:{__proto__:null,...cs(yr.prototype,"writableFinished")},writableCorked:{__proto__:null,...cs(yr.prototype,"writableCorked")},writableEnded:{__proto__:null,...cs(yr.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...cs(yr.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(t){this._readableState&&this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}});var HN;function Xk(){return HN===void 0&&(HN={}),HN}Vr.fromWeb=function(t,e){return Xk().newStreamDuplexFromReadableWritablePair(t,e)};Vr.toWeb=function(t){return Xk().newReadableWritablePairFromDuplex(t)};var GN;Vr.from=function(t){return GN||(GN=Vk()),GN(t,"body")}});var YN=O((PUe,Kk)=>{"use strict";var{ObjectSetPrototypeOf:jk,Symbol:ERe}=Et();Kk.exports=us;var{ERR_METHOD_NOT_IMPLEMENTED:hRe}=Mn().codes,kN=Ni(),{getHighWaterMark:pRe}=Ld();jk(us.prototype,kN.prototype);jk(us,kN);var Ud=ERe("kCallback");function us(t){if(!(this instanceof us))return new us(t);let e=t?pRe(this,t,"readableHighWaterMark",!0):null;e===0&&(t={...t,highWaterMark:null,readableHighWaterMark:e,writableHighWaterMark:t.writableHighWaterMark||0}),kN.call(this,t),this._readableState.sync=!1,this[Ud]=null,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",TRe)}function WN(t){typeof this._flush=="function"&&!this.destroyed?this._flush((e,n)=>{if(e){t?t(e):this.destroy(e);return}n!=null&&this.push(n),this.push(null),t&&t()}):(this.push(null),t&&t())}function TRe(){this._final!==WN&&WN.call(this)}us.prototype._final=WN;us.prototype._transform=function(t,e,n){throw new hRe("_transform()")};us.prototype._write=function(t,e,n){let r=this._readableState,i=this._writableState,s=r.length;this._transform(t,e,(o,a)=>{if(o){n(o);return}a!=null&&this.push(a),i.ended||s===r.length||r.length<r.highWaterMark?n():this[Ud]=n})};us.prototype._read=function(){if(this[Ud]){let t=this[Ud];this[Ud]=null,t()}}});var qN=O((xUe,Qk)=>{"use strict";var{ObjectSetPrototypeOf:Jk}=Et();Qk.exports=tc;var VN=YN();Jk(tc.prototype,VN.prototype);Jk(tc,VN);function tc(t){if(!(this instanceof tc))return new tc(t);VN.call(this,t)}tc.prototype._transform=function(t,e,n){n(null,t)}});var OT=O((vUe,rY)=>{var Bd=Je(),{ArrayIsArray:SRe,Promise:RRe,SymbolAsyncIterator:ARe,SymbolDispose:mRe}=Et(),NT=ls(),{once:gRe}=qn(),IRe=na(),Zk=Ni(),{aggregateTwoErrors:_Re,codes:{ERR_INVALID_ARG_TYPE:tO,ERR_INVALID_RETURN_VALUE:XN,ERR_MISSING_ARGS:NRe,ERR_STREAM_DESTROYED:ORe,ERR_STREAM_PREMATURE_CLOSE:CRe},AbortError:bRe}=Mn(),{validateFunction:yRe,validateAbortSignal:wRe}=ql(),{isIterable:sa,isReadable:zN,isReadableNodeStream:_T,isNodeStream:eY,isTransformStream:nc,isWebStream:LRe,isReadableStream:jN,isReadableFinished:DRe}=Ii(),PRe=globalThis.AbortController||Dt().AbortController,KN,JN,QN;function tY(t,e,n){let r=!1;t.on("close",()=>{r=!0});let i=NT(t,{readable:e,writable:n},s=>{r=!s});return{destroy:s=>{r||(r=!0,IRe.destroyer(t,s||new ORe("pipe")))},cleanup:i}}function xRe(t){return yRe(t[t.length-1],"streams[stream.length - 1]"),t.pop()}function ZN(t){if(sa(t))return t;if(_T(t))return vRe(t);throw new tO("val",["Readable","Iterable","AsyncIterable"],t)}async function*vRe(t){JN||(JN=Pd()),yield*JN.prototype[ARe].call(t)}async function IT(t,e,n,{end:r}){let i,s=null,o=c=>{if(c&&(i=c),s){let u=s;s=null,u()}},a=()=>new RRe((c,u)=>{i?u(i):s=()=>{i?u(i):c()}});e.on("drain",o);let l=NT(e,{readable:!1},o);try{e.writableNeedDrain&&await a();for await(let c of t)e.write(c)||await a();r&&(e.end(),await a()),n()}catch(c){n(i!==c?_Re(i,c):c)}finally{l(),e.off("drain",o)}}async function eO(t,e,n,{end:r}){nc(e)&&(e=e.writable);let i=e.getWriter();try{for await(let s of t)await i.ready,i.write(s).catch(()=>{});await i.ready,r&&await i.close(),n()}catch(s){try{await i.abort(s),n(s)}catch(o){n(o)}}}function MRe(...t){return nY(t,gRe(xRe(t)))}function nY(t,e,n){if(t.length===1&&SRe(t[0])&&(t=t[0]),t.length<2)throw new NRe("streams");let r=new PRe,i=r.signal,s=n?.signal,o=[];wRe(s,"options.signal");function a(){p(new bRe)}QN=QN||qn().addAbortListener;let l;s&&(l=QN(s,a));let c,u,d=[],E=0;function f(R){p(R,--E===0)}function p(R,A){var I;if(R&&(!c||c.code==="ERR_STREAM_PREMATURE_CLOSE")&&(c=R),!(!c&&!A)){for(;d.length;)d.shift()(c);(I=l)===null||I===void 0||I[mRe](),r.abort(),A&&(c||o.forEach(w=>w()),Bd.nextTick(e,c,u))}}let h;for(let R=0;R<t.length;R++){let A=t[R],I=R<t.length-1,w=R>0,g=I||n?.end!==!1,L=R===t.length-1;if(eY(A)){let b=function(P){P&&P.name!=="AbortError"&&P.code!=="ERR_STREAM_PREMATURE_CLOSE"&&f(P)};var m=b;if(g){let{destroy:P,cleanup:v}=tY(A,I,w);d.push(P),zN(A)&&L&&o.push(v)}A.on("error",b),zN(A)&&L&&o.push(()=>{A.removeListener("error",b)})}if(R===0)if(typeof A=="function"){if(h=A({signal:i}),!sa(h))throw new XN("Iterable, AsyncIterable or Stream","source",h)}else sa(A)||_T(A)||nc(A)?h=A:h=Zk.from(A);else if(typeof A=="function"){if(nc(h)){var T;h=ZN((T=h)===null||T===void 0?void 0:T.readable)}else h=ZN(h);if(h=A(h,{signal:i}),I){if(!sa(h,!0))throw new XN("AsyncIterable",`transform[${R-1}]`,h)}else{var S;KN||(KN=qN());let b=new KN({objectMode:!0}),P=(S=h)===null||S===void 0?void 0:S.then;if(typeof P=="function")E++,P.call(h,$=>{u=$,$!=null&&b.write($),g&&b.end(),Bd.nextTick(f)},$=>{b.destroy($),Bd.nextTick(f,$)});else if(sa(h,!0))E++,IT(h,b,f,{end:g});else if(jN(h)||nc(h)){let $=h.readable||h;E++,IT($,b,f,{end:g})}else throw new XN("AsyncIterable or Promise","destination",h);h=b;let{destroy:v,cleanup:H}=tY(h,!1,!0);d.push(v),L&&o.push(H)}}else if(eY(A)){if(_T(h)){E+=2;let b=URe(h,A,f,{end:g});zN(A)&&L&&o.push(b)}else if(nc(h)||jN(h)){let b=h.readable||h;E++,IT(b,A,f,{end:g})}else if(sa(h))E++,IT(h,A,f,{end:g});else throw new tO("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],h);h=A}else if(LRe(A)){if(_T(h))E++,eO(ZN(h),A,f,{end:g});else if(jN(h)||sa(h))E++,eO(h,A,f,{end:g});else if(nc(h))E++,eO(h.readable,A,f,{end:g});else throw new tO("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],h);h=A}else h=Zk.from(A)}return(i!=null&&i.aborted||s!=null&&s.aborted)&&Bd.nextTick(a),h}function URe(t,e,n,{end:r}){let i=!1;if(e.on("close",()=>{i||n(new CRe)}),t.pipe(e,{end:!1}),r){let o=function(){i=!0,e.end()};var s=o;DRe(t)?Bd.nextTick(o):t.once("end",o)}else n();return NT(t,{readable:!0,writable:!1},o=>{let a=t._readableState;o&&o.code==="ERR_STREAM_PREMATURE_CLOSE"&&a&&a.ended&&!a.errored&&!a.errorEmitted?t.once("end",n).once("error",n):n(o)}),NT(e,{readable:!1,writable:!0},n)}rY.exports={pipelineImpl:nY,pipeline:MRe}});var rO=O((MUe,cY)=>{"use strict";var{pipeline:BRe}=OT(),CT=Ni(),{destroyer:FRe}=na(),{isNodeStream:bT,isReadable:iY,isWritable:sY,isWebStream:nO,isTransformStream:oa,isWritableStream:oY,isReadableStream:aY}=Ii(),{AbortError:HRe,codes:{ERR_INVALID_ARG_VALUE:lY,ERR_MISSING_ARGS:GRe}}=Mn(),$Re=ls();cY.exports=function(...e){if(e.length===0)throw new GRe("streams");if(e.length===1)return CT.from(e[0]);let n=[...e];if(typeof e[0]=="function"&&(e[0]=CT.from(e[0])),typeof e[e.length-1]=="function"){let f=e.length-1;e[f]=CT.from(e[f])}for(let f=0;f<e.length;++f)if(!(!bT(e[f])&&!nO(e[f]))){if(f<e.length-1&&!(iY(e[f])||aY(e[f])||oa(e[f])))throw new lY(`streams[${f}]`,n[f],"must be readable");if(f>0&&!(sY(e[f])||oY(e[f])||oa(e[f])))throw new lY(`streams[${f}]`,n[f],"must be writable")}let r,i,s,o,a;function l(f){let p=o;o=null,p?p(f):f?a.destroy(f):!E&&!d&&a.destroy()}let c=e[0],u=BRe(e,l),d=!!(sY(c)||oY(c)||oa(c)),E=!!(iY(u)||aY(u)||oa(u));if(a=new CT({writableObjectMode:!!(c!=null&&c.writableObjectMode),readableObjectMode:!!(u!=null&&u.readableObjectMode),writable:d,readable:E}),d){if(bT(c))a._write=function(p,h,T){c.write(p,h)?T():r=T},a._final=function(p){c.end(),i=p},c.on("drain",function(){if(r){let p=r;r=null,p()}});else if(nO(c)){let h=(oa(c)?c.writable:c).getWriter();a._write=async function(T,S,m){try{await h.ready,h.write(T).catch(()=>{}),m()}catch(R){m(R)}},a._final=async function(T){try{await h.ready,h.close().catch(()=>{}),i=T}catch(S){T(S)}}}let f=oa(u)?u.readable:u;$Re(f,()=>{if(i){let p=i;i=null,p()}})}if(E){if(bT(u))u.on("readable",function(){if(s){let f=s;s=null,f()}}),u.on("end",function(){a.push(null)}),a._read=function(){for(;;){let f=u.read();if(f===null){s=a._read;return}if(!a.push(f))return}};else if(nO(u)){let p=(oa(u)?u.readable:u).getReader();a._read=async function(){for(;;)try{let{value:h,done:T}=await p.read();if(!a.push(h))return;if(T){a.push(null);return}}catch{return}}}}return a._destroy=function(f,p){!f&&o!==null&&(f=new HRe),s=null,r=null,i=null,o===null?p(f):(o=p,bT(u)&&FRe(u,f))},a}});var AY=O((UUe,oO)=>{"use strict";var WRe=globalThis.AbortController||Dt().AbortController,{codes:{ERR_INVALID_ARG_VALUE:kRe,ERR_INVALID_ARG_TYPE:Fd,ERR_MISSING_ARGS:YRe,ERR_OUT_OF_RANGE:VRe},AbortError:Oi}=Mn(),{validateAbortSignal:aa,validateInteger:uY,validateObject:la}=ql(),qRe=Et().Symbol("kWeak"),XRe=Et().Symbol("kResistStopPropagation"),{finished:zRe}=ls(),jRe=rO(),{addAbortSignalNoValidate:KRe}=wd(),{isWritable:JRe,isNodeStream:QRe}=Ii(),{deprecate:ZRe}=qn(),{ArrayPrototypePush:eAe,Boolean:tAe,MathFloor:dY,Number:nAe,NumberIsNaN:rAe,Promise:fY,PromiseReject:EY,PromiseResolve:iAe,PromisePrototypeThen:hY,Symbol:TY}=Et(),yT=TY("kEmpty"),pY=TY("kEof");function sAe(t,e){if(e!=null&&la(e,"options"),e?.signal!=null&&aa(e.signal,"options.signal"),QRe(t)&&!JRe(t))throw new kRe("stream",t,"must be writable");let n=jRe(this,t);return e!=null&&e.signal&&KRe(e.signal,n),n}function wT(t,e){if(typeof t!="function")throw new Fd("fn",["Function","AsyncFunction"],t);e!=null&&la(e,"options"),e?.signal!=null&&aa(e.signal,"options.signal");let n=1;e?.concurrency!=null&&(n=dY(e.concurrency));let r=n-1;return e?.highWaterMark!=null&&(r=dY(e.highWaterMark)),uY(n,"options.concurrency",1),uY(r,"options.highWaterMark",0),r+=n,async function*(){let s=qn().AbortSignalAny([e?.signal].filter(tAe)),o=this,a=[],l={signal:s},c,u,d=!1,E=0;function f(){d=!0,p()}function p(){E-=1,h()}function h(){u&&!d&&E<n&&a.length<r&&(u(),u=null)}async function T(){try{for await(let S of o){if(d)return;if(s.aborted)throw new Oi;try{if(S=t(S,l),S===yT)continue;S=iAe(S)}catch(m){S=EY(m)}E+=1,hY(S,p,f),a.push(S),c&&(c(),c=null),!d&&(a.length>=r||E>=n)&&await new fY(m=>{u=m})}a.push(pY)}catch(S){let m=EY(S);hY(m,p,f),a.push(m)}finally{d=!0,c&&(c(),c=null)}}T();try{for(;;){for(;a.length>0;){let S=await a[0];if(S===pY)return;if(s.aborted)throw new Oi;S!==yT&&(yield S),a.shift(),h()}await new fY(S=>{c=S})}}finally{d=!0,u&&(u(),u=null)}}.call(this)}function oAe(t=void 0){return t!=null&&la(t,"options"),t?.signal!=null&&aa(t.signal,"options.signal"),async function*(){let n=0;for await(let i of this){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new Oi({cause:t.signal.reason});yield[n++,i]}}.call(this)}async function SY(t,e=void 0){for await(let n of sO.call(this,t,e))return!0;return!1}async function aAe(t,e=void 0){if(typeof t!="function")throw new Fd("fn",["Function","AsyncFunction"],t);return!await SY.call(this,async(...n)=>!await t(...n),e)}async function lAe(t,e){for await(let n of sO.call(this,t,e))return n}async function cAe(t,e){if(typeof t!="function")throw new Fd("fn",["Function","AsyncFunction"],t);async function n(r,i){return await t(r,i),yT}for await(let r of wT.call(this,n,e));}function sO(t,e){if(typeof t!="function")throw new Fd("fn",["Function","AsyncFunction"],t);async function n(r,i){return await t(r,i)?r:yT}return wT.call(this,n,e)}var iO=class extends YRe{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function uAe(t,e,n){var r;if(typeof t!="function")throw new Fd("reducer",["Function","AsyncFunction"],t);n!=null&&la(n,"options"),n?.signal!=null&&aa(n.signal,"options.signal");let i=arguments.length>1;if(n!=null&&(r=n.signal)!==null&&r!==void 0&&r.aborted){let c=new Oi(void 0,{cause:n.signal.reason});throw this.once("error",()=>{}),await zRe(this.destroy(c)),c}let s=new WRe,o=s.signal;if(n!=null&&n.signal){let c={once:!0,[qRe]:this,[XRe]:!0};n.signal.addEventListener("abort",()=>s.abort(),c)}let a=!1;try{for await(let c of this){var l;if(a=!0,n!=null&&(l=n.signal)!==null&&l!==void 0&&l.aborted)throw new Oi;i?e=await t(e,c,{signal:o}):(e=c,i=!0)}if(!a&&!i)throw new iO}finally{s.abort()}return e}async function dAe(t){t!=null&&la(t,"options"),t?.signal!=null&&aa(t.signal,"options.signal");let e=[];for await(let r of this){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new Oi(void 0,{cause:t.signal.reason});eAe(e,r)}return e}function fAe(t,e){let n=wT.call(this,t,e);return async function*(){for await(let i of n)yield*i}.call(this)}function RY(t){if(t=nAe(t),rAe(t))return 0;if(t<0)throw new VRe("number",">= 0",t);return t}function EAe(t,e=void 0){return e!=null&&la(e,"options"),e?.signal!=null&&aa(e.signal,"options.signal"),t=RY(t),async function*(){var r;if(e!=null&&(r=e.signal)!==null&&r!==void 0&&r.aborted)throw new Oi;for await(let s of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new Oi;t--<=0&&(yield s)}}.call(this)}function hAe(t,e=void 0){return e!=null&&la(e,"options"),e?.signal!=null&&aa(e.signal,"options.signal"),t=RY(t),async function*(){var r;if(e!=null&&(r=e.signal)!==null&&r!==void 0&&r.aborted)throw new Oi;for await(let s of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new Oi;if(t-- >0&&(yield s),t<=0)return}}.call(this)}oO.exports.streamReturningOperators={asIndexedPairs:ZRe(oAe,"readable.asIndexedPairs will be removed in a future version."),drop:EAe,filter:sO,flatMap:fAe,map:wT,take:hAe,compose:sAe};oO.exports.promiseReturningOperators={every:aAe,forEach:cAe,reduce:uAe,toArray:dAe,some:SY,find:lAe}});var aO=O((BUe,mY)=>{"use strict";var{ArrayPrototypePop:pAe,Promise:TAe}=Et(),{isIterable:SAe,isNodeStream:RAe,isWebStream:AAe}=Ii(),{pipelineImpl:mAe}=OT(),{finished:gAe}=ls();lO();function IAe(...t){return new TAe((e,n)=>{let r,i,s=t[t.length-1];if(s&&typeof s=="object"&&!RAe(s)&&!SAe(s)&&!AAe(s)){let o=pAe(t);r=o.signal,i=o.end}mAe(t,(o,a)=>{o?n(o):e(a)},{signal:r,end:i})})}mY.exports={finished:gAe,pipeline:IAe}});var lO=O((FUe,wY)=>{"use strict";var{Buffer:_Ae}=require("buffer"),{ObjectDefineProperty:ds,ObjectKeys:_Y,ReflectApply:NY}=Et(),{promisify:{custom:OY}}=qn(),{streamReturningOperators:gY,promiseReturningOperators:IY}=AY(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:CY}}=Mn(),NAe=rO(),{setDefaultHighWaterMark:OAe,getDefaultHighWaterMark:CAe}=Ld(),{pipeline:bY}=OT(),{destroyer:bAe}=na(),yY=ls(),cO=aO(),Hd=Ii(),lt=wY.exports=cT().Stream;lt.isDestroyed=Hd.isDestroyed;lt.isDisturbed=Hd.isDisturbed;lt.isErrored=Hd.isErrored;lt.isReadable=Hd.isReadable;lt.isWritable=Hd.isWritable;lt.Readable=Pd();for(let t of _Y(gY)){let n=function(...r){if(new.target)throw CY();return lt.Readable.from(NY(e,this,r))},e=gY[t];ds(n,"name",{__proto__:null,value:e.name}),ds(n,"length",{__proto__:null,value:e.length}),ds(lt.Readable.prototype,t,{__proto__:null,value:n,enumerable:!1,configurable:!0,writable:!0})}for(let t of _Y(IY)){let n=function(...r){if(new.target)throw CY();return NY(e,this,r)},e=IY[t];ds(n,"name",{__proto__:null,value:e.name}),ds(n,"length",{__proto__:null,value:e.length}),ds(lt.Readable.prototype,t,{__proto__:null,value:n,enumerable:!1,configurable:!0,writable:!0})}lt.Writable=gT();lt.Duplex=Ni();lt.Transform=YN();lt.PassThrough=qN();lt.pipeline=bY;var{addAbortSignal:yAe}=wd();lt.addAbortSignal=yAe;lt.finished=yY;lt.destroy=bAe;lt.compose=NAe;lt.setDefaultHighWaterMark=OAe;lt.getDefaultHighWaterMark=CAe;ds(lt,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return cO}});ds(bY,OY,{__proto__:null,enumerable:!0,get(){return cO.pipeline}});ds(yY,OY,{__proto__:null,enumerable:!0,get(){return cO.finished}});lt.Stream=lt;lt._isUint8Array=function(e){return e instanceof Uint8Array};lt._uint8ArrayToBuffer=function(e){return _Ae.from(e.buffer,e.byteOffset,e.byteLength)}});var uO=O((HUe,xe)=>{"use strict";var qt=require("stream");if(qt&&process.env.READABLE_STREAM==="disable"){let t=qt.promises;xe.exports._uint8ArrayToBuffer=qt._uint8ArrayToBuffer,xe.exports._isUint8Array=qt._isUint8Array,xe.exports.isDisturbed=qt.isDisturbed,xe.exports.isErrored=qt.isErrored,xe.exports.isReadable=qt.isReadable,xe.exports.Readable=qt.Readable,xe.exports.Writable=qt.Writable,xe.exports.Duplex=qt.Duplex,xe.exports.Transform=qt.Transform,xe.exports.PassThrough=qt.PassThrough,xe.exports.addAbortSignal=qt.addAbortSignal,xe.exports.finished=qt.finished,xe.exports.destroy=qt.destroy,xe.exports.pipeline=qt.pipeline,xe.exports.compose=qt.compose,Object.defineProperty(qt,"promises",{configurable:!0,enumerable:!0,get(){return t}}),xe.exports.Stream=qt.Stream}else{let t=lO(),e=aO(),n=t.Readable.destroy;xe.exports=t.Readable,xe.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,xe.exports._isUint8Array=t._isUint8Array,xe.exports.isDisturbed=t.isDisturbed,xe.exports.isErrored=t.isErrored,xe.exports.isReadable=t.isReadable,xe.exports.Readable=t.Readable,xe.exports.Writable=t.Writable,xe.exports.Duplex=t.Duplex,xe.exports.Transform=t.Transform,xe.exports.PassThrough=t.PassThrough,xe.exports.addAbortSignal=t.addAbortSignal,xe.exports.finished=t.finished,xe.exports.destroy=t.destroy,xe.exports.destroy=n,xe.exports.pipeline=t.pipeline,xe.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return e}}),xe.exports.Stream=t.Stream}xe.exports.default=xe.exports});var dO=O(($Ue,LY)=>{var GUe=require("stream").Stream,wAe=uO().PassThrough,LAe=BE(),DAe=LY.exports={};DAe.normalizeInputSource=function(t){if(t===null)return Buffer.alloc(0);if(typeof t=="string")return Buffer.from(t);if(LAe(t)&&!t._readableState){var e=new wAe;return t.pipe(e),e}return t}});var EO=O((WUe,DY)=>{var PAe=require("util").inherits,xAe=BE(),fO=uO().Transform,vAe=Zp(),MAe=dO(),lr=DY.exports=function(t){if(!(this instanceof lr))return new lr(t);fO.call(this,t),this.offset=0,this._archive={finish:!1,finished:!1,processing:!1}};PAe(lr,fO);lr.prototype._appendBuffer=function(t,e,n){};lr.prototype._appendStream=function(t,e,n){};lr.prototype._emitErrorCallback=function(t){t&&this.emit("error",t)};lr.prototype._finish=function(t){};lr.prototype._normalizeEntry=function(t){};lr.prototype._transform=function(t,e,n){n(null,t)};lr.prototype.entry=function(t,e,n){if(e=e||null,typeof n!="function"&&(n=this._emitErrorCallback.bind(this)),!(t instanceof vAe)){n(new Error("not a valid instance of ArchiveEntry"));return}if(this._archive.finish||this._archive.finished){n(new Error("unacceptable entry after finish"));return}if(this._archive.processing){n(new Error("already processing an entry"));return}if(this._archive.processing=!0,this._normalizeEntry(t),this._entry=t,e=MAe.normalizeInputSource(e),Buffer.isBuffer(e))this._appendBuffer(t,e,n);else if(xAe(e))this._appendStream(t,e,n);else{this._archive.processing=!1,n(new Error("input source must be valid Stream or Buffer instance"));return}return this};lr.prototype.finish=function(){if(this._archive.processing){this._archive.finish=!0;return}this._finish()};lr.prototype.getBytesWritten=function(){return this.offset};lr.prototype.write=function(t,e){return t&&(this.offset+=t.length),fO.prototype.write.call(this,t,e)}});var LT=O(hO=>{var PY;(function(t){typeof DO_NOT_EXPORT_CRC>"u"?typeof hO=="object"?t(hO):typeof define=="function"&&define.amd?define(function(){var e={};return t(e),e}):t(PY={}):t(PY={})})(function(t){t.version="1.2.2";function e(){for(var g=0,L=new Array(256),b=0;b!=256;++b)g=b,g=g&1?-306674912^g>>>1:g>>>1,g=g&1?-306674912^g>>>1:g>>>1,g=g&1?-306674912^g>>>1:g>>>1,g=g&1?-306674912^g>>>1:g>>>1,g=g&1?-306674912^g>>>1:g>>>1,g=g&1?-306674912^g>>>1:g>>>1,g=g&1?-306674912^g>>>1:g>>>1,g=g&1?-306674912^g>>>1:g>>>1,L[b]=g;return typeof Int32Array<"u"?new Int32Array(L):L}var n=e();function r(g){var L=0,b=0,P=0,v=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(P=0;P!=256;++P)v[P]=g[P];for(P=0;P!=256;++P)for(b=g[P],L=256+P;L<4096;L+=256)b=v[L]=b>>>8^g[b&255];var H=[];for(P=1;P!=16;++P)H[P-1]=typeof Int32Array<"u"?v.subarray(P*256,P*256+256):v.slice(P*256,P*256+256);return H}var i=r(n),s=i[0],o=i[1],a=i[2],l=i[3],c=i[4],u=i[5],d=i[6],E=i[7],f=i[8],p=i[9],h=i[10],T=i[11],S=i[12],m=i[13],R=i[14];function A(g,L){for(var b=L^-1,P=0,v=g.length;P<v;)b=b>>>8^n[(b^g.charCodeAt(P++))&255];return~b}function I(g,L){for(var b=L^-1,P=g.length-15,v=0;v<P;)b=R[g[v++]^b&255]^m[g[v++]^b>>8&255]^S[g[v++]^b>>16&255]^T[g[v++]^b>>>24]^h[g[v++]]^p[g[v++]]^f[g[v++]]^E[g[v++]]^d[g[v++]]^u[g[v++]]^c[g[v++]]^l[g[v++]]^a[g[v++]]^o[g[v++]]^s[g[v++]]^n[g[v++]];for(P+=15;v<P;)b=b>>>8^n[(b^g[v++])&255];return~b}function w(g,L){for(var b=L^-1,P=0,v=g.length,H=0,$=0;P<v;)H=g.charCodeAt(P++),H<128?b=b>>>8^n[(b^H)&255]:H<2048?(b=b>>>8^n[(b^(192|H>>6&31))&255],b=b>>>8^n[(b^(128|H&63))&255]):H>=55296&&H<57344?(H=(H&1023)+64,$=g.charCodeAt(P++)&1023,b=b>>>8^n[(b^(240|H>>8&7))&255],b=b>>>8^n[(b^(128|H>>2&63))&255],b=b>>>8^n[(b^(128|$>>6&15|(H&3)<<4))&255],b=b>>>8^n[(b^(128|$&63))&255]):(b=b>>>8^n[(b^(224|H>>12&15))&255],b=b>>>8^n[(b^(128|H>>6&63))&255],b=b>>>8^n[(b^(128|H&63))&255]);return~b}t.table=n,t.bstr=A,t.buf=I,t.str=w})});var ht=O((YUe,xY)=>{"use strict";var pO=class extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError(`Expected input to be an Array, got ${typeof e}`);let n="";for(let r=0;r<e.length;r++)n+=`    ${e[r].stack}
`;super(n),this.name="AggregateError",this.errors=e}};xY.exports={AggregateError:pO,ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,e){return t.includes(e)},ArrayPrototypeIndexOf(t,e){return t.indexOf(e)},ArrayPrototypeJoin(t,e){return t.join(e)},ArrayPrototypeMap(t,e){return t.map(e)},ArrayPrototypePop(t,e){return t.pop(e)},ArrayPrototypePush(t,e){return t.push(e)},ArrayPrototypeSlice(t,e,n){return t.slice(e,n)},Error,FunctionPrototypeCall(t,e,...n){return t.call(e,...n)},FunctionPrototypeSymbolHasInstance(t,e){return Function.prototype[Symbol.hasInstance].call(t,e)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,e){return Object.defineProperties(t,e)},ObjectDefineProperty(t,e,n){return Object.defineProperty(t,e,n)},ObjectGetOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,e){return Object.setPrototypeOf(t,e)},Promise,PromisePrototypeCatch(t,e){return t.catch(e)},PromisePrototypeThen(t,e,n){return t.then(e,n)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,e){return t.test(e)},SafeSet:Set,String,StringPrototypeSlice(t,e,n){return t.slice(e,n)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,e,n){return t.set(e,n)},Boolean,Uint8Array}});var TO=O((VUe,vY)=>{"use strict";vY.exports={format(t,...e){return t.replace(/%([sdifj])/g,function(...[n,r]){let i=e.shift();return r==="f"?i.toFixed(6):r==="j"?JSON.stringify(i):r==="s"&&typeof i=="object"?`${i.constructor!==Object?i.constructor.name:""} {}`.trim():i.toString()})},inspect(t){switch(typeof t){case"string":if(t.includes("'"))if(t.includes('"')){if(!t.includes("`")&&!t.includes("${"))return`\`${t}\``}else return`"${t}"`;return`'${t}'`;case"number":return isNaN(t)?"NaN":Object.is(t,-0)?String(t):t;case"bigint":return`${String(t)}n`;case"boolean":case"undefined":return String(t);case"object":return"{}"}}}});var Bn=O((qUe,BY)=>{"use strict";var{format:UAe,inspect:DT}=TO(),{AggregateError:BAe}=ht(),FAe=globalThis.AggregateError||BAe,HAe=Symbol("kIsNodeError"),GAe=["string","function","number","object","Function","Object","boolean","bigint","symbol"],$Ae=/^([A-Z][a-z0-9]*)+$/,WAe="__node_internal_",PT={};function ca(t,e){if(!t)throw new PT.ERR_INTERNAL_ASSERTION(e)}function MY(t){let e="",n=t.length,r=t[0]==="-"?1:0;for(;n>=r+4;n-=3)e=`_${t.slice(n-3,n)}${e}`;return`${t.slice(0,n)}${e}`}function kAe(t,e,n){if(typeof e=="function")return ca(e.length<=n.length,`Code: ${t}; The provided arguments length (${n.length}) does not match the required ones (${e.length}).`),e(...n);let r=(e.match(/%[dfijoOs]/g)||[]).length;return ca(r===n.length,`Code: ${t}; The provided arguments length (${n.length}) does not match the required ones (${r}).`),n.length===0?e:UAe(e,...n)}function Nn(t,e,n){n||(n=Error);class r extends n{constructor(...s){super(kAe(t,e,s))}toString(){return`${this.name} [${t}]: ${this.message}`}}Object.defineProperties(r.prototype,{name:{value:n.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${t}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),r.prototype.code=t,r.prototype[HAe]=!0,PT[t]=r}function UY(t){let e=WAe+t.name;return Object.defineProperty(t,"name",{value:e}),t}function YAe(t,e){if(t&&e&&t!==e){if(Array.isArray(e.errors))return e.errors.push(t),e;let n=new FAe([e,t],e.message);return n.code=e.code,n}return t||e}var SO=class extends Error{constructor(e="The operation was aborted",n=void 0){if(n!==void 0&&typeof n!="object")throw new PT.ERR_INVALID_ARG_TYPE("options","Object",n);super(e,n),this.code="ABORT_ERR",this.name="AbortError"}};Nn("ERR_ASSERTION","%s",Error);Nn("ERR_INVALID_ARG_TYPE",(t,e,n)=>{ca(typeof t=="string","'name' must be a string"),Array.isArray(e)||(e=[e]);let r="The ";t.endsWith(" argument")?r+=`${t} `:r+=`"${t}" ${t.includes(".")?"property":"argument"} `,r+="must be ";let i=[],s=[],o=[];for(let l of e)ca(typeof l=="string","All expected entries have to be of type string"),GAe.includes(l)?i.push(l.toLowerCase()):$Ae.test(l)?s.push(l):(ca(l!=="object",'The value "object" should be written as "Object"'),o.push(l));if(s.length>0){let l=i.indexOf("object");l!==-1&&(i.splice(i,l,1),s.push("Object"))}if(i.length>0){switch(i.length){case 1:r+=`of type ${i[0]}`;break;case 2:r+=`one of type ${i[0]} or ${i[1]}`;break;default:{let l=i.pop();r+=`one of type ${i.join(", ")}, or ${l}`}}(s.length>0||o.length>0)&&(r+=" or ")}if(s.length>0){switch(s.length){case 1:r+=`an instance of ${s[0]}`;break;case 2:r+=`an instance of ${s[0]} or ${s[1]}`;break;default:{let l=s.pop();r+=`an instance of ${s.join(", ")}, or ${l}`}}o.length>0&&(r+=" or ")}switch(o.length){case 0:break;case 1:o[0].toLowerCase()!==o[0]&&(r+="an "),r+=`${o[0]}`;break;case 2:r+=`one of ${o[0]} or ${o[1]}`;break;default:{let l=o.pop();r+=`one of ${o.join(", ")}, or ${l}`}}if(n==null)r+=`. Received ${n}`;else if(typeof n=="function"&&n.name)r+=`. Received function ${n.name}`;else if(typeof n=="object"){var a;if((a=n.constructor)!==null&&a!==void 0&&a.name)r+=`. Received an instance of ${n.constructor.name}`;else{let l=DT(n,{depth:-1});r+=`. Received ${l}`}}else{let l=DT(n,{colors:!1});l.length>25&&(l=`${l.slice(0,25)}...`),r+=`. Received type ${typeof n} (${l})`}return r},TypeError);Nn("ERR_INVALID_ARG_VALUE",(t,e,n="is invalid")=>{let r=DT(e);return r.length>128&&(r=r.slice(0,128)+"..."),`The ${t.includes(".")?"property":"argument"} '${t}' ${n}. Received ${r}`},TypeError);Nn("ERR_INVALID_RETURN_VALUE",(t,e,n)=>{var r;let i=n!=null&&(r=n.constructor)!==null&&r!==void 0&&r.name?`instance of ${n.constructor.name}`:`type ${typeof n}`;return`Expected ${t} to be returned from the "${e}" function but got ${i}.`},TypeError);Nn("ERR_MISSING_ARGS",(...t)=>{ca(t.length>0,"At least one arg needs to be specified");let e,n=t.length;switch(t=(Array.isArray(t)?t:[t]).map(r=>`"${r}"`).join(" or "),n){case 1:e+=`The ${t[0]} argument`;break;case 2:e+=`The ${t[0]} and ${t[1]} arguments`;break;default:{let r=t.pop();e+=`The ${t.join(", ")}, and ${r} arguments`}break}return`${e} must be specified`},TypeError);Nn("ERR_OUT_OF_RANGE",(t,e,n)=>{ca(e,'Missing "range" argument');let r;if(Number.isInteger(n)&&Math.abs(n)>2**32)r=MY(String(n));else if(typeof n=="bigint"){r=String(n);let i=BigInt(2)**BigInt(32);(n>i||n<-i)&&(r=MY(r)),r+="n"}else r=DT(n);return`The value of "${t}" is out of range. It must be ${e}. Received ${r}`},RangeError);Nn("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);Nn("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);Nn("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);Nn("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);Nn("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);Nn("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Nn("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);Nn("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);Nn("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);Nn("ERR_STREAM_WRITE_AFTER_END","write after end",Error);Nn("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);BY.exports={AbortError:SO,aggregateTwoErrors:UY(YAe),hideStackFrames:UY,codes:PT}});var Xn=O((XUe,AO)=>{"use strict";var VAe=require("buffer"),{format:qAe,inspect:XAe}=TO(),{codes:{ERR_INVALID_ARG_TYPE:RO}}=Bn(),{kResistStopPropagation:zAe,AggregateError:jAe,SymbolDispose:KAe}=ht(),JAe=globalThis.AbortSignal||Dt().AbortSignal,QAe=globalThis.AbortController||Dt().AbortController,ZAe=Object.getPrototypeOf(async function(){}).constructor,FY=globalThis.Blob||VAe.Blob,eme=typeof FY<"u"?function(e){return e instanceof FY}:function(e){return!1},HY=(t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new RO(e,"AbortSignal",t)},tme=(t,e)=>{if(typeof t!="function")throw new RO(e,"Function",t)};AO.exports={AggregateError:jAe,kEmptyObject:Object.freeze({}),once(t){let e=!1;return function(...n){e||(e=!0,t.apply(this,n))}},createDeferredPromise:function(){let t,e;return{promise:new Promise((r,i)=>{t=r,e=i}),resolve:t,reject:e}},promisify(t){return new Promise((e,n)=>{t((r,...i)=>r?n(r):e(...i))})},debuglog(){return function(){}},format:qAe,inspect:XAe,types:{isAsyncFunction(t){return t instanceof ZAe},isArrayBufferView(t){return ArrayBuffer.isView(t)}},isBlob:eme,deprecate(t,e){return t},addAbortListener:require("events").addAbortListener||function(e,n){if(e===void 0)throw new RO("signal","AbortSignal",e);HY(e,"signal"),tme(n,"listener");let r;return e.aborted?queueMicrotask(()=>n()):(e.addEventListener("abort",n,{__proto__:null,once:!0,[zAe]:!0}),r=()=>{e.removeEventListener("abort",n)}),{__proto__:null,[KAe](){var i;(i=r)===null||i===void 0||i()}}},AbortSignalAny:JAe.any||function(e){if(e.length===1)return e[0];let n=new QAe,r=()=>n.abort();return e.forEach(i=>{HY(i,"signals"),i.addEventListener("abort",r,{once:!0})}),n.signal.addEventListener("abort",()=>{e.forEach(i=>i.removeEventListener("abort",r))},{once:!0}),n.signal}};AO.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")});var ic=O((zUe,jY)=>{"use strict";var{ArrayIsArray:gO,ArrayPrototypeIncludes:kY,ArrayPrototypeJoin:YY,ArrayPrototypeMap:nme,NumberIsInteger:IO,NumberIsNaN:rme,NumberMAX_SAFE_INTEGER:ime,NumberMIN_SAFE_INTEGER:sme,NumberParseInt:ome,ObjectPrototypeHasOwnProperty:ame,RegExpPrototypeExec:VY,String:lme,StringPrototypeToUpperCase:cme,StringPrototypeTrim:ume}=ht(),{hideStackFrames:wr,codes:{ERR_SOCKET_BAD_PORT:dme,ERR_INVALID_ARG_TYPE:Fn,ERR_INVALID_ARG_VALUE:rc,ERR_OUT_OF_RANGE:ua,ERR_UNKNOWN_SIGNAL:GY}}=Bn(),{normalizeEncoding:fme}=Xn(),{isAsyncFunction:Eme,isArrayBufferView:hme}=Xn().types,$Y={};function pme(t){return t===(t|0)}function Tme(t){return t===t>>>0}var Sme=/^[0-7]+$/,Rme="must be a 32-bit unsigned integer or an octal string";function Ame(t,e,n){if(typeof t>"u"&&(t=n),typeof t=="string"){if(VY(Sme,t)===null)throw new rc(e,t,Rme);t=ome(t,8)}return qY(t,e),t}var mme=wr((t,e,n=sme,r=ime)=>{if(typeof t!="number")throw new Fn(e,"number",t);if(!IO(t))throw new ua(e,"an integer",t);if(t<n||t>r)throw new ua(e,`>= ${n} && <= ${r}`,t)}),gme=wr((t,e,n=-2147483648,r=2147483647)=>{if(typeof t!="number")throw new Fn(e,"number",t);if(!IO(t))throw new ua(e,"an integer",t);if(t<n||t>r)throw new ua(e,`>= ${n} && <= ${r}`,t)}),qY=wr((t,e,n=!1)=>{if(typeof t!="number")throw new Fn(e,"number",t);if(!IO(t))throw new ua(e,"an integer",t);let r=n?1:0,i=4294967295;if(t<r||t>i)throw new ua(e,`>= ${r} && <= ${i}`,t)});function _O(t,e){if(typeof t!="string")throw new Fn(e,"string",t)}function Ime(t,e,n=void 0,r){if(typeof t!="number")throw new Fn(e,"number",t);if(n!=null&&t<n||r!=null&&t>r||(n!=null||r!=null)&&rme(t))throw new ua(e,`${n!=null?`>= ${n}`:""}${n!=null&&r!=null?" && ":""}${r!=null?`<= ${r}`:""}`,t)}var _me=wr((t,e,n)=>{if(!kY(n,t)){let i="must be one of: "+YY(nme(n,s=>typeof s=="string"?`'${s}'`:lme(s)),", ");throw new rc(e,t,i)}});function XY(t,e){if(typeof t!="boolean")throw new Fn(e,"boolean",t)}function mO(t,e,n){return t==null||!ame(t,e)?n:t[e]}var Nme=wr((t,e,n=null)=>{let r=mO(n,"allowArray",!1),i=mO(n,"allowFunction",!1);if(!mO(n,"nullable",!1)&&t===null||!r&&gO(t)||typeof t!="object"&&(!i||typeof t!="function"))throw new Fn(e,"Object",t)}),Ome=wr((t,e)=>{if(t!=null&&typeof t!="object"&&typeof t!="function")throw new Fn(e,"a dictionary",t)}),xT=wr((t,e,n=0)=>{if(!gO(t))throw new Fn(e,"Array",t);if(t.length<n){let r=`must be longer than ${n}`;throw new rc(e,t,r)}});function Cme(t,e){xT(t,e);for(let n=0;n<t.length;n++)_O(t[n],`${e}[${n}]`)}function bme(t,e){xT(t,e);for(let n=0;n<t.length;n++)XY(t[n],`${e}[${n}]`)}function yme(t,e){xT(t,e);for(let n=0;n<t.length;n++){let r=t[n],i=`${e}[${n}]`;if(r==null)throw new Fn(i,"AbortSignal",r);zY(r,i)}}function wme(t,e="signal"){if(_O(t,e),$Y[t]===void 0)throw $Y[cme(t)]!==void 0?new GY(t+" (signals must use all capital letters)"):new GY(t)}var Lme=wr((t,e="buffer")=>{if(!hme(t))throw new Fn(e,["Buffer","TypedArray","DataView"],t)});function Dme(t,e){let n=fme(e),r=t.length;if(n==="hex"&&r%2!==0)throw new rc("encoding",e,`is invalid for data of length ${r}`)}function Pme(t,e="Port",n=!0){if(typeof t!="number"&&typeof t!="string"||typeof t=="string"&&ume(t).length===0||+t!==+t>>>0||t>65535||t===0&&!n)throw new dme(e,t,n);return t|0}var zY=wr((t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new Fn(e,"AbortSignal",t)}),xme=wr((t,e)=>{if(typeof t!="function")throw new Fn(e,"Function",t)}),vme=wr((t,e)=>{if(typeof t!="function"||Eme(t))throw new Fn(e,"Function",t)}),Mme=wr((t,e)=>{if(t!==void 0)throw new Fn(e,"undefined",t)});function Ume(t,e,n){if(!kY(n,t))throw new Fn(e,`('${YY(n,"|")}')`,t)}var Bme=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function WY(t,e){if(typeof t>"u"||!VY(Bme,t))throw new rc(e,t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function Fme(t){if(typeof t=="string")return WY(t,"hints"),t;if(gO(t)){let e=t.length,n="";if(e===0)return n;for(let r=0;r<e;r++){let i=t[r];WY(i,"hints"),n+=i,r!==e-1&&(n+=", ")}return n}throw new rc("hints",t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}jY.exports={isInt32:pme,isUint32:Tme,parseFileMode:Ame,validateArray:xT,validateStringArray:Cme,validateBooleanArray:bme,validateAbortSignalArray:yme,validateBoolean:XY,validateBuffer:Lme,validateDictionary:Ome,validateEncoding:Dme,validateFunction:xme,validateInt32:gme,validateInteger:mme,validateNumber:Ime,validateObject:Nme,validateOneOf:_me,validatePlainFunction:vme,validatePort:Pme,validateSignalName:wme,validateString:_O,validateUint32:qY,validateUndefined:Mme,validateUnion:Ume,validateAbortSignal:zY,validateLinkHeaderValue:Fme}});var bi=O((jUe,uV)=>{"use strict";var{SymbolAsyncIterator:KY,SymbolIterator:JY,SymbolFor:da}=ht(),QY=da("nodejs.stream.destroyed"),ZY=da("nodejs.stream.errored"),NO=da("nodejs.stream.readable"),OO=da("nodejs.stream.writable"),eV=da("nodejs.stream.disturbed"),Hme=da("nodejs.webstream.isClosedPromise"),Gme=da("nodejs.webstream.controllerErrorFunction");function vT(t,e=!1){var n;return!!(t&&typeof t.pipe=="function"&&typeof t.on=="function"&&(!e||typeof t.pause=="function"&&typeof t.resume=="function")&&(!t._writableState||((n=t._readableState)===null||n===void 0?void 0:n.readable)!==!1)&&(!t._writableState||t._readableState))}function MT(t){var e;return!!(t&&typeof t.write=="function"&&typeof t.on=="function"&&(!t._readableState||((e=t._writableState)===null||e===void 0?void 0:e.writable)!==!1))}function $me(t){return!!(t&&typeof t.pipe=="function"&&t._readableState&&typeof t.on=="function"&&typeof t.write=="function")}function Ci(t){return t&&(t._readableState||t._writableState||typeof t.write=="function"&&typeof t.on=="function"||typeof t.pipe=="function"&&typeof t.on=="function")}function tV(t){return!!(t&&!Ci(t)&&typeof t.pipeThrough=="function"&&typeof t.getReader=="function"&&typeof t.cancel=="function")}function nV(t){return!!(t&&!Ci(t)&&typeof t.getWriter=="function"&&typeof t.abort=="function")}function rV(t){return!!(t&&!Ci(t)&&typeof t.readable=="object"&&typeof t.writable=="object")}function Wme(t){return tV(t)||nV(t)||rV(t)}function kme(t,e){return t==null?!1:e===!0?typeof t[KY]=="function":e===!1?typeof t[JY]=="function":typeof t[KY]=="function"||typeof t[JY]=="function"}function UT(t){if(!Ci(t))return null;let e=t._writableState,n=t._readableState,r=e||n;return!!(t.destroyed||t[QY]||r!=null&&r.destroyed)}function iV(t){if(!MT(t))return null;if(t.writableEnded===!0)return!0;let e=t._writableState;return e!=null&&e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function Yme(t,e){if(!MT(t))return null;if(t.writableFinished===!0)return!0;let n=t._writableState;return n!=null&&n.errored?!1:typeof n?.finished!="boolean"?null:!!(n.finished||e===!1&&n.ended===!0&&n.length===0)}function Vme(t){if(!vT(t))return null;if(t.readableEnded===!0)return!0;let e=t._readableState;return!e||e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function sV(t,e){if(!vT(t))return null;let n=t._readableState;return n!=null&&n.errored?!1:typeof n?.endEmitted!="boolean"?null:!!(n.endEmitted||e===!1&&n.ended===!0&&n.length===0)}function oV(t){return t&&t[NO]!=null?t[NO]:typeof t?.readable!="boolean"?null:UT(t)?!1:vT(t)&&t.readable&&!sV(t)}function aV(t){return t&&t[OO]!=null?t[OO]:typeof t?.writable!="boolean"?null:UT(t)?!1:MT(t)&&t.writable&&!iV(t)}function qme(t,e){return Ci(t)?UT(t)?!0:!(e?.readable!==!1&&oV(t)||e?.writable!==!1&&aV(t)):null}function Xme(t){var e,n;return Ci(t)?t.writableErrored?t.writableErrored:(e=(n=t._writableState)===null||n===void 0?void 0:n.errored)!==null&&e!==void 0?e:null:null}function zme(t){var e,n;return Ci(t)?t.readableErrored?t.readableErrored:(e=(n=t._readableState)===null||n===void 0?void 0:n.errored)!==null&&e!==void 0?e:null:null}function jme(t){if(!Ci(t))return null;if(typeof t.closed=="boolean")return t.closed;let e=t._writableState,n=t._readableState;return typeof e?.closed=="boolean"||typeof n?.closed=="boolean"?e?.closed||n?.closed:typeof t._closed=="boolean"&&lV(t)?t._closed:null}function lV(t){return typeof t._closed=="boolean"&&typeof t._defaultKeepAlive=="boolean"&&typeof t._removedConnection=="boolean"&&typeof t._removedContLen=="boolean"}function cV(t){return typeof t._sent100=="boolean"&&lV(t)}function Kme(t){var e;return typeof t._consuming=="boolean"&&typeof t._dumped=="boolean"&&((e=t.req)===null||e===void 0?void 0:e.upgradeOrConnect)===void 0}function Jme(t){if(!Ci(t))return null;let e=t._writableState,n=t._readableState,r=e||n;return!r&&cV(t)||!!(r&&r.autoDestroy&&r.emitClose&&r.closed===!1)}function Qme(t){var e;return!!(t&&((e=t[eV])!==null&&e!==void 0?e:t.readableDidRead||t.readableAborted))}function Zme(t){var e,n,r,i,s,o,a,l,c,u;return!!(t&&((e=(n=(r=(i=(s=(o=t[ZY])!==null&&o!==void 0?o:t.readableErrored)!==null&&s!==void 0?s:t.writableErrored)!==null&&i!==void 0?i:(a=t._readableState)===null||a===void 0?void 0:a.errorEmitted)!==null&&r!==void 0?r:(l=t._writableState)===null||l===void 0?void 0:l.errorEmitted)!==null&&n!==void 0?n:(c=t._readableState)===null||c===void 0?void 0:c.errored)!==null&&e!==void 0?e:!((u=t._writableState)===null||u===void 0)&&u.errored))}uV.exports={isDestroyed:UT,kIsDestroyed:QY,isDisturbed:Qme,kIsDisturbed:eV,isErrored:Zme,kIsErrored:ZY,isReadable:oV,kIsReadable:NO,kIsClosedPromise:Hme,kControllerErrorFunction:Gme,kIsWritable:OO,isClosed:jme,isDuplexNodeStream:$me,isFinished:qme,isIterable:kme,isReadableNodeStream:vT,isReadableStream:tV,isReadableEnded:Vme,isReadableFinished:sV,isReadableErrored:zme,isNodeStream:Ci,isWebStream:Wme,isWritable:aV,isWritableNodeStream:MT,isWritableStream:nV,isWritableEnded:iV,isWritableFinished:Yme,isWritableErrored:Xme,isServerRequest:Kme,isServerResponse:cV,willEmitClose:Jme,isTransformStream:rV}});var fs=O((KUe,LO)=>{"use strict";var Qs=Je(),{AbortError:AV,codes:ege}=Bn(),{ERR_INVALID_ARG_TYPE:tge,ERR_STREAM_PREMATURE_CLOSE:dV}=ege,{kEmptyObject:bO,once:yO}=Xn(),{validateAbortSignal:nge,validateFunction:rge,validateObject:ige,validateBoolean:sge}=ic(),{Promise:oge,PromisePrototypeThen:age,SymbolDispose:mV}=ht(),{isClosed:lge,isReadable:fV,isReadableNodeStream:CO,isReadableStream:cge,isReadableFinished:EV,isReadableErrored:hV,isWritable:pV,isWritableNodeStream:TV,isWritableStream:uge,isWritableFinished:SV,isWritableErrored:RV,isNodeStream:dge,willEmitClose:fge,kIsClosedPromise:Ege}=bi(),sc;function hge(t){return t.setHeader&&typeof t.abort=="function"}var wO=()=>{};function gV(t,e,n){var r,i;if(arguments.length===2?(n=e,e=bO):e==null?e=bO:ige(e,"options"),rge(n,"callback"),nge(e.signal,"options.signal"),n=yO(n),cge(t)||uge(t))return pge(t,e,n);if(!dge(t))throw new tge("stream",["ReadableStream","WritableStream","Stream"],t);let s=(r=e.readable)!==null&&r!==void 0?r:CO(t),o=(i=e.writable)!==null&&i!==void 0?i:TV(t),a=t._writableState,l=t._readableState,c=()=>{t.writable||E()},u=fge(t)&&CO(t)===s&&TV(t)===o,d=SV(t,!1),E=()=>{d=!0,t.destroyed&&(u=!1),!(u&&(!t.readable||s))&&(!s||f)&&n.call(t)},f=EV(t,!1),p=()=>{f=!0,t.destroyed&&(u=!1),!(u&&(!t.writable||o))&&(!o||d)&&n.call(t)},h=I=>{n.call(t,I)},T=lge(t),S=()=>{T=!0;let I=RV(t)||hV(t);if(I&&typeof I!="boolean")return n.call(t,I);if(s&&!f&&CO(t,!0)&&!EV(t,!1))return n.call(t,new dV);if(o&&!d&&!SV(t,!1))return n.call(t,new dV);n.call(t)},m=()=>{T=!0;let I=RV(t)||hV(t);if(I&&typeof I!="boolean")return n.call(t,I);n.call(t)},R=()=>{t.req.on("finish",E)};hge(t)?(t.on("complete",E),u||t.on("abort",S),t.req?R():t.on("request",R)):o&&!a&&(t.on("end",c),t.on("close",c)),!u&&typeof t.aborted=="boolean"&&t.on("aborted",S),t.on("end",p),t.on("finish",E),e.error!==!1&&t.on("error",h),t.on("close",S),T?Qs.nextTick(S):a!=null&&a.errorEmitted||l!=null&&l.errorEmitted?u||Qs.nextTick(m):(!s&&(!u||fV(t))&&(d||pV(t)===!1)||!o&&(!u||pV(t))&&(f||fV(t)===!1)||l&&t.req&&t.aborted)&&Qs.nextTick(m);let A=()=>{n=wO,t.removeListener("aborted",S),t.removeListener("complete",E),t.removeListener("abort",S),t.removeListener("request",R),t.req&&t.req.removeListener("finish",E),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",E),t.removeListener("end",p),t.removeListener("error",h),t.removeListener("close",S)};if(e.signal&&!T){let I=()=>{let w=n;A(),w.call(t,new AV(void 0,{cause:e.signal.reason}))};if(e.signal.aborted)Qs.nextTick(I);else{sc=sc||Xn().addAbortListener;let w=sc(e.signal,I),g=n;n=yO((...L)=>{w[mV](),g.apply(t,L)})}}return A}function pge(t,e,n){let r=!1,i=wO;if(e.signal)if(i=()=>{r=!0,n.call(t,new AV(void 0,{cause:e.signal.reason}))},e.signal.aborted)Qs.nextTick(i);else{sc=sc||Xn().addAbortListener;let o=sc(e.signal,i),a=n;n=yO((...l)=>{o[mV](),a.apply(t,l)})}let s=(...o)=>{r||Qs.nextTick(()=>n.apply(t,o))};return age(t[Ege].promise,s,s),wO}function Tge(t,e){var n;let r=!1;return e===null&&(e=bO),(n=e)!==null&&n!==void 0&&n.cleanup&&(sge(e.cleanup,"cleanup"),r=e.cleanup),new oge((i,s)=>{let o=gV(t,e,a=>{r&&o(),a?s(a):i()})})}LO.exports=gV;LO.exports.finished=Tge});var fa=O((JUe,wV)=>{"use strict";var yi=Je(),{aggregateTwoErrors:Sge,codes:{ERR_MULTIPLE_CALLBACK:Rge},AbortError:Age}=Bn(),{Symbol:NV}=ht(),{kIsDestroyed:mge,isDestroyed:gge,isFinished:Ige,isServerRequest:_ge}=bi(),OV=NV("kDestroy"),DO=NV("kConstruct");function CV(t,e,n){t&&(t.stack,e&&!e.errored&&(e.errored=t),n&&!n.errored&&(n.errored=t))}function Nge(t,e){let n=this._readableState,r=this._writableState,i=r||n;return r!=null&&r.destroyed||n!=null&&n.destroyed?(typeof e=="function"&&e(),this):(CV(t,r,n),r&&(r.destroyed=!0),n&&(n.destroyed=!0),i.constructed?IV(this,t,e):this.once(OV,function(s){IV(this,Sge(s,t),e)}),this)}function IV(t,e,n){let r=!1;function i(s){if(r)return;r=!0;let o=t._readableState,a=t._writableState;CV(s,a,o),a&&(a.closed=!0),o&&(o.closed=!0),typeof n=="function"&&n(s),s?yi.nextTick(Oge,t,s):yi.nextTick(bV,t)}try{t._destroy(e||null,i)}catch(s){i(s)}}function Oge(t,e){PO(t,e),bV(t)}function bV(t){let e=t._readableState,n=t._writableState;n&&(n.closeEmitted=!0),e&&(e.closeEmitted=!0),(n!=null&&n.emitClose||e!=null&&e.emitClose)&&t.emit("close")}function PO(t,e){let n=t._readableState,r=t._writableState;r!=null&&r.errorEmitted||n!=null&&n.errorEmitted||(r&&(r.errorEmitted=!0),n&&(n.errorEmitted=!0),t.emit("error",e))}function Cge(){let t=this._readableState,e=this._writableState;t&&(t.constructed=!0,t.closed=!1,t.closeEmitted=!1,t.destroyed=!1,t.errored=null,t.errorEmitted=!1,t.reading=!1,t.ended=t.readable===!1,t.endEmitted=t.readable===!1),e&&(e.constructed=!0,e.destroyed=!1,e.closed=!1,e.closeEmitted=!1,e.errored=null,e.errorEmitted=!1,e.finalCalled=!1,e.prefinished=!1,e.ended=e.writable===!1,e.ending=e.writable===!1,e.finished=e.writable===!1)}function xO(t,e,n){let r=t._readableState,i=t._writableState;if(i!=null&&i.destroyed||r!=null&&r.destroyed)return this;r!=null&&r.autoDestroy||i!=null&&i.autoDestroy?t.destroy(e):e&&(e.stack,i&&!i.errored&&(i.errored=e),r&&!r.errored&&(r.errored=e),n?yi.nextTick(PO,t,e):PO(t,e))}function bge(t,e){if(typeof t._construct!="function")return;let n=t._readableState,r=t._writableState;n&&(n.constructed=!1),r&&(r.constructed=!1),t.once(DO,e),!(t.listenerCount(DO)>1)&&yi.nextTick(yge,t)}function yge(t){let e=!1;function n(r){if(e){xO(t,r??new Rge);return}e=!0;let i=t._readableState,s=t._writableState,o=s||i;i&&(i.constructed=!0),s&&(s.constructed=!0),o.destroyed?t.emit(OV,r):r?xO(t,r,!0):yi.nextTick(wge,t)}try{t._construct(r=>{yi.nextTick(n,r)})}catch(r){yi.nextTick(n,r)}}function wge(t){t.emit(DO)}function _V(t){return t?.setHeader&&typeof t.abort=="function"}function yV(t){t.emit("close")}function Lge(t,e){t.emit("error",e),yi.nextTick(yV,t)}function Dge(t,e){!t||gge(t)||(!e&&!Ige(t)&&(e=new Age),_ge(t)?(t.socket=null,t.destroy(e)):_V(t)?t.abort():_V(t.req)?t.req.abort():typeof t.destroy=="function"?t.destroy(e):typeof t.close=="function"?t.close():e?yi.nextTick(Lge,t,e):yi.nextTick(yV,t),t.destroyed||(t[mge]=!0))}wV.exports={construct:bge,destroyer:Dge,destroy:Nge,undestroy:Cge,errorOrDestroy:xO}});var HT=O((QUe,DV)=>{"use strict";var{ArrayIsArray:Pge,ObjectSetPrototypeOf:LV}=ht(),{EventEmitter:BT}=require("events");function FT(t){BT.call(this,t)}LV(FT.prototype,BT.prototype);LV(FT,BT);FT.prototype.pipe=function(t,e){let n=this;function r(u){t.writable&&t.write(u)===!1&&n.pause&&n.pause()}n.on("data",r);function i(){n.readable&&n.resume&&n.resume()}t.on("drain",i),!t._isStdio&&(!e||e.end!==!1)&&(n.on("end",o),n.on("close",a));let s=!1;function o(){s||(s=!0,t.end())}function a(){s||(s=!0,typeof t.destroy=="function"&&t.destroy())}function l(u){c(),BT.listenerCount(this,"error")===0&&this.emit("error",u)}vO(n,"error",l),vO(t,"error",l);function c(){n.removeListener("data",r),t.removeListener("drain",i),n.removeListener("end",o),n.removeListener("close",a),n.removeListener("error",l),t.removeListener("error",l),n.removeListener("end",c),n.removeListener("close",c),t.removeListener("close",c)}return n.on("end",c),n.on("close",c),t.on("close",c),t.emit("pipe",n),t};function vO(t,e,n){if(typeof t.prependListener=="function")return t.prependListener(e,n);!t._events||!t._events[e]?t.on(e,n):Pge(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]}DV.exports={Stream:FT,prependListener:vO}});var Gd=O((ZUe,GT)=>{"use strict";var{SymbolDispose:xge}=ht(),{AbortError:PV,codes:vge}=Bn(),{isNodeStream:xV,isWebStream:Mge,kControllerErrorFunction:Uge}=bi(),Bge=fs(),{ERR_INVALID_ARG_TYPE:vV}=vge,MO,Fge=(t,e)=>{if(typeof t!="object"||!("aborted"in t))throw new vV(e,"AbortSignal",t)};GT.exports.addAbortSignal=function(e,n){if(Fge(e,"signal"),!xV(n)&&!Mge(n))throw new vV("stream",["ReadableStream","WritableStream","Stream"],n);return GT.exports.addAbortSignalNoValidate(e,n)};GT.exports.addAbortSignalNoValidate=function(t,e){if(typeof t!="object"||!("aborted"in t))return e;let n=xV(e)?()=>{e.destroy(new PV(void 0,{cause:t.reason}))}:()=>{e[Uge](new PV(void 0,{cause:t.reason}))};if(t.aborted)n();else{MO=MO||Xn().addAbortListener;let r=MO(t,n);Bge(e,r[xge])}return e}});var BV=O((tBe,UV)=>{"use strict";var{StringPrototypeSlice:MV,SymbolIterator:Hge,TypedArrayPrototypeSet:$T,Uint8Array:Gge}=ht(),{Buffer:UO}=require("buffer"),{inspect:$ge}=Xn();UV.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){let n={data:e,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}unshift(e){let n={data:e,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}shift(){if(this.length===0)return;let e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return"";let n=this.head,r=""+n.data;for(;(n=n.next)!==null;)r+=e+n.data;return r}concat(e){if(this.length===0)return UO.alloc(0);let n=UO.allocUnsafe(e>>>0),r=this.head,i=0;for(;r;)$T(n,r.data,i),i+=r.data.length,r=r.next;return n}consume(e,n){let r=this.head.data;if(e<r.length){let i=r.slice(0,e);return this.head.data=r.slice(e),i}return e===r.length?this.shift():n?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[Hge](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let n="",r=this.head,i=0;do{let s=r.data;if(e>s.length)n+=s,e-=s.length;else{e===s.length?(n+=s,++i,r.next?this.head=r.next:this.head=this.tail=null):(n+=MV(s,0,e),this.head=r,r.data=MV(s,e));break}++i}while((r=r.next)!==null);return this.length-=i,n}_getBuffer(e){let n=UO.allocUnsafe(e),r=e,i=this.head,s=0;do{let o=i.data;if(e>o.length)$T(n,o,r-e),e-=o.length;else{e===o.length?($T(n,o,r-e),++s,i.next?this.head=i.next:this.head=this.tail=null):($T(n,new Gge(o.buffer,o.byteOffset,e),r-e),this.head=i,i.data=o.slice(e));break}++s}while((i=i.next)!==null);return this.length-=s,n}[Symbol.for("nodejs.util.inspect.custom")](e,n){return $ge(this,{...n,depth:0,customInspect:!1})}}});var $d=O((nBe,$V)=>{"use strict";var{MathFloor:Wge,NumberIsInteger:kge}=ht(),{validateInteger:Yge}=ic(),{ERR_INVALID_ARG_VALUE:Vge}=Bn().codes,FV=16*1024,HV=16;function qge(t,e,n){return t.highWaterMark!=null?t.highWaterMark:e?t[n]:null}function GV(t){return t?HV:FV}function Xge(t,e){Yge(e,"value",0),t?HV=e:FV=e}function zge(t,e,n,r){let i=qge(e,r,n);if(i!=null){if(!kge(i)||i<0){let s=r?`options.${n}`:"options.highWaterMark";throw new Vge(s,i)}return Wge(i)}return GV(t.objectMode)}$V.exports={getHighWaterMark:zge,getDefaultHighWaterMark:GV,setDefaultHighWaterMark:Xge}});var BO=O((rBe,VV)=>{"use strict";var WV=Je(),{PromisePrototypeThen:jge,SymbolAsyncIterator:kV,SymbolIterator:YV}=ht(),{Buffer:Kge}=require("buffer"),{ERR_INVALID_ARG_TYPE:Jge,ERR_STREAM_NULL_VALUES:Qge}=Bn().codes;function Zge(t,e,n){let r;if(typeof e=="string"||e instanceof Kge)return new t({objectMode:!0,...n,read(){this.push(e),this.push(null)}});let i;if(e&&e[kV])i=!0,r=e[kV]();else if(e&&e[YV])i=!1,r=e[YV]();else throw new Jge("iterable",["Iterable"],e);let s=new t({objectMode:!0,highWaterMark:1,...n}),o=!1;s._read=function(){o||(o=!0,l())},s._destroy=function(c,u){jge(a(c),()=>WV.nextTick(u,c),d=>WV.nextTick(u,d||c))};async function a(c){let u=c!=null,d=typeof r.throw=="function";if(u&&d){let{value:E,done:f}=await r.throw(c);if(await E,f)return}if(typeof r.return=="function"){let{value:E}=await r.return();await E}}async function l(){for(;;){try{let{value:c,done:u}=i?await r.next():r.next();if(u)s.push(null);else{let d=c&&typeof c.then=="function"?await c:c;if(d===null)throw o=!1,new Qge;if(s.push(d))continue;o=!1}}catch(c){s.destroy(c)}break}}return s}VV.exports=Zge});var kd=O((iBe,c2)=>{"use strict";var qr=Je(),{ArrayPrototypeIndexOf:eIe,NumberIsInteger:tIe,NumberIsNaN:nIe,NumberParseInt:rIe,ObjectDefineProperties:VO,ObjectKeys:iIe,ObjectSetPrototypeOf:zV,Promise:jV,SafeSet:sIe,SymbolAsyncDispose:oIe,SymbolAsyncIterator:aIe,Symbol:lIe}=ht();c2.exports=Ne;Ne.ReadableState=VT;var{EventEmitter:cIe}=require("events"),{Stream:Zs,prependListener:uIe}=HT(),{Buffer:FO}=require("buffer"),{addAbortSignal:dIe}=Gd(),KV=fs(),He=Xn().debuglog("stream",t=>{He=t}),fIe=BV(),lc=fa(),{getHighWaterMark:EIe,getDefaultHighWaterMark:hIe}=$d(),{aggregateTwoErrors:qV,codes:{ERR_INVALID_ARG_TYPE:pIe,ERR_METHOD_NOT_IMPLEMENTED:TIe,ERR_OUT_OF_RANGE:SIe,ERR_STREAM_PUSH_AFTER_EOF:RIe,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:AIe},AbortError:mIe}=Bn(),{validateObject:gIe}=ic(),Ea=lIe("kPaused"),{StringDecoder:JV}=Uu(),IIe=BO();zV(Ne.prototype,Zs.prototype);zV(Ne,Zs);var HO=()=>{},{errorOrDestroy:oc}=lc,ac=1,_Ie=2,QV=4,Wd=8,ZV=16,WT=32,kT=64,e2=128,NIe=256,OIe=512,CIe=1024,kO=2048,YO=4096,bIe=8192,yIe=16384,wIe=32768,t2=65536,LIe=1<<17,DIe=1<<18;function Xt(t){return{enumerable:!1,get(){return(this.state&t)!==0},set(e){e?this.state|=t:this.state&=~t}}}VO(VT.prototype,{objectMode:Xt(ac),ended:Xt(_Ie),endEmitted:Xt(QV),reading:Xt(Wd),constructed:Xt(ZV),sync:Xt(WT),needReadable:Xt(kT),emittedReadable:Xt(e2),readableListening:Xt(NIe),resumeScheduled:Xt(OIe),errorEmitted:Xt(CIe),emitClose:Xt(kO),autoDestroy:Xt(YO),destroyed:Xt(bIe),closed:Xt(yIe),closeEmitted:Xt(wIe),multiAwaitDrain:Xt(t2),readingMore:Xt(LIe),dataEmitted:Xt(DIe)});function VT(t,e,n){typeof n!="boolean"&&(n=e instanceof wi()),this.state=kO|YO|ZV|WT,t&&t.objectMode&&(this.state|=ac),n&&t&&t.readableObjectMode&&(this.state|=ac),this.highWaterMark=t?EIe(this,t,"readableHighWaterMark",n):hIe(!1),this.buffer=new fIe,this.length=0,this.pipes=[],this.flowing=null,this[Ea]=null,t&&t.emitClose===!1&&(this.state&=~kO),t&&t.autoDestroy===!1&&(this.state&=~YO),this.errored=null,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,t&&t.encoding&&(this.decoder=new JV(t.encoding),this.encoding=t.encoding)}function Ne(t){if(!(this instanceof Ne))return new Ne(t);let e=this instanceof wi();this._readableState=new VT(t,this,e),t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&!e&&dIe(t.signal,this)),Zs.call(this,t),lc.construct(this,()=>{this._readableState.needReadable&&YT(this,this._readableState)})}Ne.prototype.destroy=lc.destroy;Ne.prototype._undestroy=lc.undestroy;Ne.prototype._destroy=function(t,e){e(t)};Ne.prototype[cIe.captureRejectionSymbol]=function(t){this.destroy(t)};Ne.prototype[oIe]=function(){let t;return this.destroyed||(t=this.readableEnded?null:new mIe,this.destroy(t)),new jV((e,n)=>KV(this,r=>r&&r!==t?n(r):e(null)))};Ne.prototype.push=function(t,e){return n2(this,t,e,!1)};Ne.prototype.unshift=function(t,e){return n2(this,t,e,!0)};function n2(t,e,n,r){He("readableAddChunk",e);let i=t._readableState,s;if((i.state&ac)===0&&(typeof e=="string"?(n=n||i.defaultEncoding,i.encoding!==n&&(r&&i.encoding?e=FO.from(e,n).toString(i.encoding):(e=FO.from(e,n),n=""))):e instanceof FO?n="":Zs._isUint8Array(e)?(e=Zs._uint8ArrayToBuffer(e),n=""):e!=null&&(s=new pIe("chunk",["string","Buffer","Uint8Array"],e))),s)oc(t,s);else if(e===null)i.state&=~Wd,vIe(t,i);else if((i.state&ac)!==0||e&&e.length>0)if(r)if((i.state&QV)!==0)oc(t,new AIe);else{if(i.destroyed||i.errored)return!1;GO(t,i,e,!0)}else if(i.ended)oc(t,new RIe);else{if(i.destroyed||i.errored)return!1;i.state&=~Wd,i.decoder&&!n?(e=i.decoder.write(e),i.objectMode||e.length!==0?GO(t,i,e,!1):YT(t,i)):GO(t,i,e,!1)}else r||(i.state&=~Wd,YT(t,i));return!i.ended&&(i.length<i.highWaterMark||i.length===0)}function GO(t,e,n,r){e.flowing&&e.length===0&&!e.sync&&t.listenerCount("data")>0?((e.state&t2)!==0?e.awaitDrainWriters.clear():e.awaitDrainWriters=null,e.dataEmitted=!0,t.emit("data",n)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),(e.state&kT)!==0&&qT(t)),YT(t,e)}Ne.prototype.isPaused=function(){let t=this._readableState;return t[Ea]===!0||t.flowing===!1};Ne.prototype.setEncoding=function(t){let e=new JV(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;let n=this._readableState.buffer,r="";for(let i of n)r+=e.write(i);return n.clear(),r!==""&&n.push(r),this._readableState.length=r.length,this};var PIe=1073741824;function xIe(t){if(t>PIe)throw new SIe("size","<= 1GiB",t);return t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++,t}function XV(t,e){return t<=0||e.length===0&&e.ended?0:(e.state&ac)!==0?1:nIe(t)?e.flowing&&e.length?e.buffer.first().length:e.length:t<=e.length?t:e.ended?e.length:0}Ne.prototype.read=function(t){He("read",t),t===void 0?t=NaN:tIe(t)||(t=rIe(t,10));let e=this._readableState,n=t;if(t>e.highWaterMark&&(e.highWaterMark=xIe(t)),t!==0&&(e.state&=~e2),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return He("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?$O(this):qT(this),null;if(t=XV(t,e),t===0&&e.ended)return e.length===0&&$O(this),null;let r=(e.state&kT)!==0;if(He("need readable",r),(e.length===0||e.length-t<e.highWaterMark)&&(r=!0,He("length less than watermark",r)),e.ended||e.reading||e.destroyed||e.errored||!e.constructed)r=!1,He("reading, ended or constructing",r);else if(r){He("do read"),e.state|=Wd|WT,e.length===0&&(e.state|=kT);try{this._read(e.highWaterMark)}catch(s){oc(this,s)}e.state&=~WT,e.reading||(t=XV(n,e))}let i;return t>0?i=a2(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.multiAwaitDrain?e.awaitDrainWriters.clear():e.awaitDrainWriters=null),e.length===0&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&$O(this)),i!==null&&!e.errorEmitted&&!e.closeEmitted&&(e.dataEmitted=!0,this.emit("data",i)),i};function vIe(t,e){if(He("onEofChunk"),!e.ended){if(e.decoder){let n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,e.sync?qT(t):(e.needReadable=!1,e.emittedReadable=!0,r2(t))}}function qT(t){let e=t._readableState;He("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(He("emitReadable",e.flowing),e.emittedReadable=!0,qr.nextTick(r2,t))}function r2(t){let e=t._readableState;He("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&!e.errored&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,s2(t)}function YT(t,e){!e.readingMore&&e.constructed&&(e.readingMore=!0,qr.nextTick(MIe,t,e))}function MIe(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){let n=e.length;if(He("maybeReadMore read 0"),t.read(0),n===e.length)break}e.readingMore=!1}Ne.prototype._read=function(t){throw new TIe("_read()")};Ne.prototype.pipe=function(t,e){let n=this,r=this._readableState;r.pipes.length===1&&(r.multiAwaitDrain||(r.multiAwaitDrain=!0,r.awaitDrainWriters=new sIe(r.awaitDrainWriters?[r.awaitDrainWriters]:[]))),r.pipes.push(t),He("pipe count=%d opts=%j",r.pipes.length,e);let s=(!e||e.end!==!1)&&t!==qr.stdout&&t!==qr.stderr?a:T;r.endEmitted?qr.nextTick(s):n.once("end",s),t.on("unpipe",o);function o(S,m){He("onunpipe"),S===n&&m&&m.hasUnpiped===!1&&(m.hasUnpiped=!0,u())}function a(){He("onend"),t.end()}let l,c=!1;function u(){He("cleanup"),t.removeListener("close",p),t.removeListener("finish",h),l&&t.removeListener("drain",l),t.removeListener("error",f),t.removeListener("unpipe",o),n.removeListener("end",a),n.removeListener("end",T),n.removeListener("data",E),c=!0,l&&r.awaitDrainWriters&&(!t._writableState||t._writableState.needDrain)&&l()}function d(){c||(r.pipes.length===1&&r.pipes[0]===t?(He("false write response, pause",0),r.awaitDrainWriters=t,r.multiAwaitDrain=!1):r.pipes.length>1&&r.pipes.includes(t)&&(He("false write response, pause",r.awaitDrainWriters.size),r.awaitDrainWriters.add(t)),n.pause()),l||(l=UIe(n,t),t.on("drain",l))}n.on("data",E);function E(S){He("ondata");let m=t.write(S);He("dest.write",m),m===!1&&d()}function f(S){if(He("onerror",S),T(),t.removeListener("error",f),t.listenerCount("error")===0){let m=t._writableState||t._readableState;m&&!m.errorEmitted?oc(t,S):t.emit("error",S)}}uIe(t,"error",f);function p(){t.removeListener("finish",h),T()}t.once("close",p);function h(){He("onfinish"),t.removeListener("close",p),T()}t.once("finish",h);function T(){He("unpipe"),n.unpipe(t)}return t.emit("pipe",n),t.writableNeedDrain===!0?d():r.flowing||(He("pipe resume"),n.resume()),t};function UIe(t,e){return function(){let r=t._readableState;r.awaitDrainWriters===e?(He("pipeOnDrain",1),r.awaitDrainWriters=null):r.multiAwaitDrain&&(He("pipeOnDrain",r.awaitDrainWriters.size),r.awaitDrainWriters.delete(e)),(!r.awaitDrainWriters||r.awaitDrainWriters.size===0)&&t.listenerCount("data")&&t.resume()}}Ne.prototype.unpipe=function(t){let e=this._readableState,n={hasUnpiped:!1};if(e.pipes.length===0)return this;if(!t){let i=e.pipes;e.pipes=[],this.pause();for(let s=0;s<i.length;s++)i[s].emit("unpipe",this,{hasUnpiped:!1});return this}let r=eIe(e.pipes,t);return r===-1?this:(e.pipes.splice(r,1),e.pipes.length===0&&this.pause(),t.emit("unpipe",this,n),this)};Ne.prototype.on=function(t,e){let n=Zs.prototype.on.call(this,t,e),r=this._readableState;return t==="data"?(r.readableListening=this.listenerCount("readable")>0,r.flowing!==!1&&this.resume()):t==="readable"&&!r.endEmitted&&!r.readableListening&&(r.readableListening=r.needReadable=!0,r.flowing=!1,r.emittedReadable=!1,He("on readable",r.length,r.reading),r.length?qT(this):r.reading||qr.nextTick(BIe,this)),n};Ne.prototype.addListener=Ne.prototype.on;Ne.prototype.removeListener=function(t,e){let n=Zs.prototype.removeListener.call(this,t,e);return t==="readable"&&qr.nextTick(i2,this),n};Ne.prototype.off=Ne.prototype.removeListener;Ne.prototype.removeAllListeners=function(t){let e=Zs.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&qr.nextTick(i2,this),e};function i2(t){let e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&e[Ea]===!1?e.flowing=!0:t.listenerCount("data")>0?t.resume():e.readableListening||(e.flowing=null)}function BIe(t){He("readable nexttick read 0"),t.read(0)}Ne.prototype.resume=function(){let t=this._readableState;return t.flowing||(He("resume"),t.flowing=!t.readableListening,FIe(this,t)),t[Ea]=!1,this};function FIe(t,e){e.resumeScheduled||(e.resumeScheduled=!0,qr.nextTick(HIe,t,e))}function HIe(t,e){He("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),s2(t),e.flowing&&!e.reading&&t.read(0)}Ne.prototype.pause=function(){return He("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(He("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[Ea]=!0,this};function s2(t){let e=t._readableState;for(He("flow",e.flowing);e.flowing&&t.read()!==null;);}Ne.prototype.wrap=function(t){let e=!1;t.on("data",r=>{!this.push(r)&&t.pause&&(e=!0,t.pause())}),t.on("end",()=>{this.push(null)}),t.on("error",r=>{oc(this,r)}),t.on("close",()=>{this.destroy()}),t.on("destroy",()=>{this.destroy()}),this._read=()=>{e&&t.resume&&(e=!1,t.resume())};let n=iIe(t);for(let r=1;r<n.length;r++){let i=n[r];this[i]===void 0&&typeof t[i]=="function"&&(this[i]=t[i].bind(t))}return this};Ne.prototype[aIe]=function(){return o2(this)};Ne.prototype.iterator=function(t){return t!==void 0&&gIe(t,"options"),o2(this,t)};function o2(t,e){typeof t.read!="function"&&(t=Ne.wrap(t,{objectMode:!0}));let n=GIe(t,e);return n.stream=t,n}async function*GIe(t,e){let n=HO;function r(o){this===t?(n(),n=HO):n=o}t.on("readable",r);let i,s=KV(t,{writable:!1},o=>{i=o?qV(i,o):null,n(),n=HO});try{for(;;){let o=t.destroyed?null:t.read();if(o!==null)yield o;else{if(i)throw i;if(i===null)return;await new jV(r)}}}catch(o){throw i=qV(i,o),i}finally{(i||e?.destroyOnReturn!==!1)&&(i===void 0||t._readableState.autoDestroy)?lc.destroyer(t,null):(t.off("readable",r),s())}}VO(Ne.prototype,{readable:{__proto__:null,get(){let t=this._readableState;return!!t&&t.readable!==!1&&!t.destroyed&&!t.errorEmitted&&!t.endEmitted},set(t){this._readableState&&(this._readableState.readable=!!t)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(t){this._readableState&&(this._readableState.destroyed=t)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}});VO(VT.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[Ea]!==!1},set(t){this[Ea]=!!t}}});Ne._fromList=a2;function a2(t,e){if(e.length===0)return null;let n;return e.objectMode?n=e.buffer.shift():!t||t>=e.length?(e.decoder?n=e.buffer.join(""):e.buffer.length===1?n=e.buffer.first():n=e.buffer.concat(e.length),e.buffer.clear()):n=e.buffer.consume(t,e.decoder),n}function $O(t){let e=t._readableState;He("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,qr.nextTick($Ie,e,t))}function $Ie(t,e){if(He("endReadableNT",t.endEmitted,t.length),!t.errored&&!t.closeEmitted&&!t.endEmitted&&t.length===0){if(t.endEmitted=!0,e.emit("end"),e.writable&&e.allowHalfOpen===!1)qr.nextTick(WIe,e);else if(t.autoDestroy){let n=e._writableState;(!n||n.autoDestroy&&(n.finished||n.writable===!1))&&e.destroy()}}}function WIe(t){t.writable&&!t.writableEnded&&!t.destroyed&&t.end()}Ne.from=function(t,e){return IIe(Ne,t,e)};var WO;function l2(){return WO===void 0&&(WO={}),WO}Ne.fromWeb=function(t,e){return l2().newStreamReadableFromReadableStream(t,e)};Ne.toWeb=function(t,e){return l2().newReadableStreamFromStreamReadable(t,e)};Ne.wrap=function(t,e){var n,r;return new Ne({objectMode:(n=(r=t.readableObjectMode)!==null&&r!==void 0?r:t.objectMode)!==null&&n!==void 0?n:!0,...e,destroy(i,s){lc.destroyer(t,i),s(i)}}).wrap(t)}});var JT=O((sBe,g2)=>{"use strict";var ha=Je(),{ArrayPrototypeSlice:f2,Error:kIe,FunctionPrototypeSymbolHasInstance:E2,ObjectDefineProperty:h2,ObjectDefineProperties:YIe,ObjectSetPrototypeOf:p2,StringPrototypeToLowerCase:VIe,Symbol:qIe,SymbolHasInstance:XIe}=ht();g2.exports=mt;mt.WritableState=qd;var{EventEmitter:zIe}=require("events"),Yd=HT().Stream,{Buffer:XT}=require("buffer"),KT=fa(),{addAbortSignal:jIe}=Gd(),{getHighWaterMark:KIe,getDefaultHighWaterMark:JIe}=$d(),{ERR_INVALID_ARG_TYPE:QIe,ERR_METHOD_NOT_IMPLEMENTED:ZIe,ERR_MULTIPLE_CALLBACK:T2,ERR_STREAM_CANNOT_PIPE:e_e,ERR_STREAM_DESTROYED:Vd,ERR_STREAM_ALREADY_FINISHED:t_e,ERR_STREAM_NULL_VALUES:n_e,ERR_STREAM_WRITE_AFTER_END:r_e,ERR_UNKNOWN_ENCODING:S2}=Bn().codes,{errorOrDestroy:cc}=KT;p2(mt.prototype,Yd.prototype);p2(mt,Yd);function zO(){}var uc=qIe("kOnFinished");function qd(t,e,n){typeof n!="boolean"&&(n=e instanceof wi()),this.objectMode=!!(t&&t.objectMode),n&&(this.objectMode=this.objectMode||!!(t&&t.writableObjectMode)),this.highWaterMark=t?KIe(this,t,"writableHighWaterMark",n):JIe(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let r=!!(t&&t.decodeStrings===!1);this.decodeStrings=!r,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=s_e.bind(void 0,e),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,jT(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!t||t.emitClose!==!1,this.autoDestroy=!t||t.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[uc]=[]}function jT(t){t.buffered=[],t.bufferedIndex=0,t.allBuffers=!0,t.allNoop=!0}qd.prototype.getBuffer=function(){return f2(this.buffered,this.bufferedIndex)};h2(qd.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function mt(t){let e=this instanceof wi();if(!e&&!E2(mt,this))return new mt(t);this._writableState=new qd(t,this,e),t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&jIe(t.signal,this)),Yd.call(this,t),KT.construct(this,()=>{let n=this._writableState;n.writing||KO(this,n),JO(this,n)})}h2(mt,XIe,{__proto__:null,value:function(t){return E2(this,t)?!0:this!==mt?!1:t&&t._writableState instanceof qd}});mt.prototype.pipe=function(){cc(this,new e_e)};function R2(t,e,n,r){let i=t._writableState;if(typeof n=="function")r=n,n=i.defaultEncoding;else{if(!n)n=i.defaultEncoding;else if(n!=="buffer"&&!XT.isEncoding(n))throw new S2(n);typeof r!="function"&&(r=zO)}if(e===null)throw new n_e;if(!i.objectMode)if(typeof e=="string")i.decodeStrings!==!1&&(e=XT.from(e,n),n="buffer");else if(e instanceof XT)n="buffer";else if(Yd._isUint8Array(e))e=Yd._uint8ArrayToBuffer(e),n="buffer";else throw new QIe("chunk",["string","Buffer","Uint8Array"],e);let s;return i.ending?s=new r_e:i.destroyed&&(s=new Vd("write")),s?(ha.nextTick(r,s),cc(t,s,!0),s):(i.pendingcb++,i_e(t,i,e,n,r))}mt.prototype.write=function(t,e,n){return R2(this,t,e,n)===!0};mt.prototype.cork=function(){this._writableState.corked++};mt.prototype.uncork=function(){let t=this._writableState;t.corked&&(t.corked--,t.writing||KO(this,t))};mt.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=VIe(e)),!XT.isEncoding(e))throw new S2(e);return this._writableState.defaultEncoding=e,this};function i_e(t,e,n,r,i){let s=e.objectMode?1:n.length;e.length+=s;let o=e.length<e.highWaterMark;return o||(e.needDrain=!0),e.writing||e.corked||e.errored||!e.constructed?(e.buffered.push({chunk:n,encoding:r,callback:i}),e.allBuffers&&r!=="buffer"&&(e.allBuffers=!1),e.allNoop&&i!==zO&&(e.allNoop=!1)):(e.writelen=s,e.writecb=i,e.writing=!0,e.sync=!0,t._write(n,r,e.onwrite),e.sync=!1),o&&!e.errored&&!e.destroyed}function u2(t,e,n,r,i,s,o){e.writelen=r,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new Vd("write")):n?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function d2(t,e,n,r){--e.pendingcb,r(n),jO(e),cc(t,n)}function s_e(t,e){let n=t._writableState,r=n.sync,i=n.writecb;if(typeof i!="function"){cc(t,new T2);return}n.writing=!1,n.writecb=null,n.length-=n.writelen,n.writelen=0,e?(e.stack,n.errored||(n.errored=e),t._readableState&&!t._readableState.errored&&(t._readableState.errored=e),r?ha.nextTick(d2,t,n,e,i):d2(t,n,e,i)):(n.buffered.length>n.bufferedIndex&&KO(t,n),r?n.afterWriteTickInfo!==null&&n.afterWriteTickInfo.cb===i?n.afterWriteTickInfo.count++:(n.afterWriteTickInfo={count:1,cb:i,stream:t,state:n},ha.nextTick(o_e,n.afterWriteTickInfo)):A2(t,n,1,i))}function o_e({stream:t,state:e,count:n,cb:r}){return e.afterWriteTickInfo=null,A2(t,e,n,r)}function A2(t,e,n,r){for(!e.ending&&!t.destroyed&&e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"));n-- >0;)e.pendingcb--,r();e.destroyed&&jO(e),JO(t,e)}function jO(t){if(t.writing)return;for(let i=t.bufferedIndex;i<t.buffered.length;++i){var e;let{chunk:s,callback:o}=t.buffered[i],a=t.objectMode?1:s.length;t.length-=a,o((e=t.errored)!==null&&e!==void 0?e:new Vd("write"))}let n=t[uc].splice(0);for(let i=0;i<n.length;i++){var r;n[i]((r=t.errored)!==null&&r!==void 0?r:new Vd("end"))}jT(t)}function KO(t,e){if(e.corked||e.bufferProcessing||e.destroyed||!e.constructed)return;let{buffered:n,bufferedIndex:r,objectMode:i}=e,s=n.length-r;if(!s)return;let o=r;if(e.bufferProcessing=!0,s>1&&t._writev){e.pendingcb-=s-1;let a=e.allNoop?zO:c=>{for(let u=o;u<n.length;++u)n[u].callback(c)},l=e.allNoop&&o===0?n:f2(n,o);l.allBuffers=e.allBuffers,u2(t,e,!0,e.length,l,"",a),jT(e)}else{do{let{chunk:a,encoding:l,callback:c}=n[o];n[o++]=null;let u=i?1:a.length;u2(t,e,!1,u,a,l,c)}while(o<n.length&&!e.writing);o===n.length?jT(e):o>256?(n.splice(0,o),e.bufferedIndex=0):e.bufferedIndex=o}e.bufferProcessing=!1}mt.prototype._write=function(t,e,n){if(this._writev)this._writev([{chunk:t,encoding:e}],n);else throw new ZIe("_write()")};mt.prototype._writev=null;mt.prototype.end=function(t,e,n){let r=this._writableState;typeof t=="function"?(n=t,t=null,e=null):typeof e=="function"&&(n=e,e=null);let i;if(t!=null){let s=R2(this,t,e);s instanceof kIe&&(i=s)}return r.corked&&(r.corked=1,this.uncork()),i||(!r.errored&&!r.ending?(r.ending=!0,JO(this,r,!0),r.ended=!0):r.finished?i=new t_e("end"):r.destroyed&&(i=new Vd("end"))),typeof n=="function"&&(i||r.finished?ha.nextTick(n,i):r[uc].push(n)),this};function zT(t){return t.ending&&!t.destroyed&&t.constructed&&t.length===0&&!t.errored&&t.buffered.length===0&&!t.finished&&!t.writing&&!t.errorEmitted&&!t.closeEmitted}function a_e(t,e){let n=!1;function r(i){if(n){cc(t,i??T2());return}if(n=!0,e.pendingcb--,i){let s=e[uc].splice(0);for(let o=0;o<s.length;o++)s[o](i);cc(t,i,e.sync)}else zT(e)&&(e.prefinished=!0,t.emit("prefinish"),e.pendingcb++,ha.nextTick(XO,t,e))}e.sync=!0,e.pendingcb++;try{t._final(r)}catch(i){r(i)}e.sync=!1}function l_e(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.finalCalled=!0,a_e(t,e)):(e.prefinished=!0,t.emit("prefinish")))}function JO(t,e,n){zT(e)&&(l_e(t,e),e.pendingcb===0&&(n?(e.pendingcb++,ha.nextTick((r,i)=>{zT(i)?XO(r,i):i.pendingcb--},t,e)):zT(e)&&(e.pendingcb++,XO(t,e))))}function XO(t,e){e.pendingcb--,e.finished=!0;let n=e[uc].splice(0);for(let r=0;r<n.length;r++)n[r]();if(t.emit("finish"),e.autoDestroy){let r=t._readableState;(!r||r.autoDestroy&&(r.endEmitted||r.readable===!1))&&t.destroy()}}YIe(mt.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(t){this._writableState&&(this._writableState.destroyed=t)}},writable:{__proto__:null,get(){let t=this._writableState;return!!t&&t.writable!==!1&&!t.destroyed&&!t.errored&&!t.ending&&!t.ended},set(t){this._writableState&&(this._writableState.writable=!!t)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let t=this._writableState;return t?!t.destroyed&&!t.ending&&t.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var c_e=KT.destroy;mt.prototype.destroy=function(t,e){let n=this._writableState;return!n.destroyed&&(n.bufferedIndex<n.buffered.length||n[uc].length)&&ha.nextTick(jO,n),c_e.call(this,t,e),this};mt.prototype._undestroy=KT.undestroy;mt.prototype._destroy=function(t,e){e(t)};mt.prototype[zIe.captureRejectionSymbol]=function(t){this.destroy(t)};var qO;function m2(){return qO===void 0&&(qO={}),qO}mt.fromWeb=function(t,e){return m2().newStreamWritableFromWritableStream(t,e)};mt.toWeb=function(t){return m2().newWritableStreamFromStreamWritable(t)}});var U2=O((oBe,M2)=>{var QO=Je(),u_e=require("buffer"),{isReadable:d_e,isWritable:f_e,isIterable:I2,isNodeStream:E_e,isReadableNodeStream:_2,isWritableNodeStream:N2,isDuplexNodeStream:h_e,isReadableStream:O2,isWritableStream:C2}=bi(),b2=fs(),{AbortError:x2,codes:{ERR_INVALID_ARG_TYPE:p_e,ERR_INVALID_RETURN_VALUE:y2}}=Bn(),{destroyer:fc}=fa(),T_e=wi(),v2=kd(),S_e=JT(),{createDeferredPromise:w2}=Xn(),L2=BO(),D2=globalThis.Blob||u_e.Blob,R_e=typeof D2<"u"?function(e){return e instanceof D2}:function(e){return!1},A_e=globalThis.AbortController||Dt().AbortController,{FunctionPrototypeCall:P2}=ht(),eo=class extends T_e{constructor(e){super(e),e?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),e?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};M2.exports=function t(e,n){if(h_e(e))return e;if(_2(e))return dc({readable:e});if(N2(e))return dc({writable:e});if(E_e(e))return dc({writable:!1,readable:!1});if(O2(e))return dc({readable:v2.fromWeb(e)});if(C2(e))return dc({writable:S_e.fromWeb(e)});if(typeof e=="function"){let{value:i,write:s,final:o,destroy:a}=m_e(e);if(I2(i))return L2(eo,i,{objectMode:!0,write:s,final:o,destroy:a});let l=i?.then;if(typeof l=="function"){let c,u=P2(l,i,d=>{if(d!=null)throw new y2("nully","body",d)},d=>{fc(c,d)});return c=new eo({objectMode:!0,readable:!1,write:s,final(d){o(async()=>{try{await u,QO.nextTick(d,null)}catch(E){QO.nextTick(d,E)}})},destroy:a})}throw new y2("Iterable, AsyncIterable or AsyncFunction",n,i)}if(R_e(e))return t(e.arrayBuffer());if(I2(e))return L2(eo,e,{objectMode:!0,writable:!1});if(O2(e?.readable)&&C2(e?.writable))return eo.fromWeb(e);if(typeof e?.writable=="object"||typeof e?.readable=="object"){let i=e!=null&&e.readable?_2(e?.readable)?e?.readable:t(e.readable):void 0,s=e!=null&&e.writable?N2(e?.writable)?e?.writable:t(e.writable):void 0;return dc({readable:i,writable:s})}let r=e?.then;if(typeof r=="function"){let i;return P2(r,e,s=>{s!=null&&i.push(s),i.push(null)},s=>{fc(i,s)}),i=new eo({objectMode:!0,writable:!1,read(){}})}throw new p_e(n,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],e)};function m_e(t){let{promise:e,resolve:n}=w2(),r=new A_e,i=r.signal;return{value:t((async function*(){for(;;){let o=e;e=null;let{chunk:a,done:l,cb:c}=await o;if(QO.nextTick(c),l)return;if(i.aborted)throw new x2(void 0,{cause:i.reason});({promise:e,resolve:n}=w2()),yield a}})(),{signal:i}),write(o,a,l){let c=n;n=null,c({chunk:o,done:!1,cb:l})},final(o){let a=n;n=null,a({done:!0,cb:o})},destroy(o,a){r.abort(),a(o)}}}function dc(t){let e=t.readable&&typeof t.readable.read!="function"?v2.wrap(t.readable):t.readable,n=t.writable,r=!!d_e(e),i=!!f_e(n),s,o,a,l,c;function u(d){let E=l;l=null,E?E(d):d&&c.destroy(d)}return c=new eo({readableObjectMode:!!(e!=null&&e.readableObjectMode),writableObjectMode:!!(n!=null&&n.writableObjectMode),readable:r,writable:i}),i&&(b2(n,d=>{i=!1,d&&fc(e,d),u(d)}),c._write=function(d,E,f){n.write(d,E)?f():s=f},c._final=function(d){n.end(),o=d},n.on("drain",function(){if(s){let d=s;s=null,d()}}),n.on("finish",function(){if(o){let d=o;o=null,d()}})),r&&(b2(e,d=>{r=!1,d&&fc(e,d),u(d)}),e.on("readable",function(){if(a){let d=a;a=null,d()}}),e.on("end",function(){c.push(null)}),c._read=function(){for(;;){let d=e.read();if(d===null){a=c._read;return}if(!c.push(d))return}}),c._destroy=function(d,E){!d&&l!==null&&(d=new x2),a=null,s=null,o=null,l===null?E(d):(l=E,fc(n,d),fc(e,d))},c}});var wi=O((aBe,H2)=>{"use strict";var{ObjectDefineProperties:g_e,ObjectGetOwnPropertyDescriptor:Es,ObjectKeys:I_e,ObjectSetPrototypeOf:B2}=ht();H2.exports=Xr;var tC=kd(),Lr=JT();B2(Xr.prototype,tC.prototype);B2(Xr,tC);{let t=I_e(Lr.prototype);for(let e=0;e<t.length;e++){let n=t[e];Xr.prototype[n]||(Xr.prototype[n]=Lr.prototype[n])}}function Xr(t){if(!(this instanceof Xr))return new Xr(t);tC.call(this,t),Lr.call(this,t),t?(this.allowHalfOpen=t.allowHalfOpen!==!1,t.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),t.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}g_e(Xr.prototype,{writable:{__proto__:null,...Es(Lr.prototype,"writable")},writableHighWaterMark:{__proto__:null,...Es(Lr.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...Es(Lr.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...Es(Lr.prototype,"writableBuffer")},writableLength:{__proto__:null,...Es(Lr.prototype,"writableLength")},writableFinished:{__proto__:null,...Es(Lr.prototype,"writableFinished")},writableCorked:{__proto__:null,...Es(Lr.prototype,"writableCorked")},writableEnded:{__proto__:null,...Es(Lr.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...Es(Lr.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(t){this._readableState&&this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}});var ZO;function F2(){return ZO===void 0&&(ZO={}),ZO}Xr.fromWeb=function(t,e){return F2().newStreamDuplexFromReadableWritablePair(t,e)};Xr.toWeb=function(t){return F2().newReadableWritablePairFromDuplex(t)};var eC;Xr.from=function(t){return eC||(eC=U2()),eC(t,"body")}});var iC=O((lBe,$2)=>{"use strict";var{ObjectSetPrototypeOf:G2,Symbol:__e}=ht();$2.exports=hs;var{ERR_METHOD_NOT_IMPLEMENTED:N_e}=Bn().codes,rC=wi(),{getHighWaterMark:O_e}=$d();G2(hs.prototype,rC.prototype);G2(hs,rC);var Xd=__e("kCallback");function hs(t){if(!(this instanceof hs))return new hs(t);let e=t?O_e(this,t,"readableHighWaterMark",!0):null;e===0&&(t={...t,highWaterMark:null,readableHighWaterMark:e,writableHighWaterMark:t.writableHighWaterMark||0}),rC.call(this,t),this._readableState.sync=!1,this[Xd]=null,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",C_e)}function nC(t){typeof this._flush=="function"&&!this.destroyed?this._flush((e,n)=>{if(e){t?t(e):this.destroy(e);return}n!=null&&this.push(n),this.push(null),t&&t()}):(this.push(null),t&&t())}function C_e(){this._final!==nC&&nC.call(this)}hs.prototype._final=nC;hs.prototype._transform=function(t,e,n){throw new N_e("_transform()")};hs.prototype._write=function(t,e,n){let r=this._readableState,i=this._writableState,s=r.length;this._transform(t,e,(o,a)=>{if(o){n(o);return}a!=null&&this.push(a),i.ended||s===r.length||r.length<r.highWaterMark?n():this[Xd]=n})};hs.prototype._read=function(){if(this[Xd]){let t=this[Xd];this[Xd]=null,t()}}});var oC=O((cBe,k2)=>{"use strict";var{ObjectSetPrototypeOf:W2}=ht();k2.exports=Ec;var sC=iC();W2(Ec.prototype,sC.prototype);W2(Ec,sC);function Ec(t){if(!(this instanceof Ec))return new Ec(t);sC.call(this,t)}Ec.prototype._transform=function(t,e,n){n(null,t)}});var tS=O((uBe,z2)=>{var zd=Je(),{ArrayIsArray:b_e,Promise:y_e,SymbolAsyncIterator:w_e,SymbolDispose:L_e}=ht(),eS=fs(),{once:D_e}=Xn(),P_e=fa(),Y2=wi(),{aggregateTwoErrors:x_e,codes:{ERR_INVALID_ARG_TYPE:pC,ERR_INVALID_RETURN_VALUE:aC,ERR_MISSING_ARGS:v_e,ERR_STREAM_DESTROYED:M_e,ERR_STREAM_PREMATURE_CLOSE:U_e},AbortError:B_e}=Bn(),{validateFunction:F_e,validateAbortSignal:H_e}=ic(),{isIterable:pa,isReadable:lC,isReadableNodeStream:ZT,isNodeStream:V2,isTransformStream:hc,isWebStream:G_e,isReadableStream:cC,isReadableFinished:$_e}=bi(),W_e=globalThis.AbortController||Dt().AbortController,uC,dC,fC;function q2(t,e,n){let r=!1;t.on("close",()=>{r=!0});let i=eS(t,{readable:e,writable:n},s=>{r=!s});return{destroy:s=>{r||(r=!0,P_e.destroyer(t,s||new M_e("pipe")))},cleanup:i}}function k_e(t){return F_e(t[t.length-1],"streams[stream.length - 1]"),t.pop()}function EC(t){if(pa(t))return t;if(ZT(t))return Y_e(t);throw new pC("val",["Readable","Iterable","AsyncIterable"],t)}async function*Y_e(t){dC||(dC=kd()),yield*dC.prototype[w_e].call(t)}async function QT(t,e,n,{end:r}){let i,s=null,o=c=>{if(c&&(i=c),s){let u=s;s=null,u()}},a=()=>new y_e((c,u)=>{i?u(i):s=()=>{i?u(i):c()}});e.on("drain",o);let l=eS(e,{readable:!1},o);try{e.writableNeedDrain&&await a();for await(let c of t)e.write(c)||await a();r&&(e.end(),await a()),n()}catch(c){n(i!==c?x_e(i,c):c)}finally{l(),e.off("drain",o)}}async function hC(t,e,n,{end:r}){hc(e)&&(e=e.writable);let i=e.getWriter();try{for await(let s of t)await i.ready,i.write(s).catch(()=>{});await i.ready,r&&await i.close(),n()}catch(s){try{await i.abort(s),n(s)}catch(o){n(o)}}}function V_e(...t){return X2(t,D_e(k_e(t)))}function X2(t,e,n){if(t.length===1&&b_e(t[0])&&(t=t[0]),t.length<2)throw new v_e("streams");let r=new W_e,i=r.signal,s=n?.signal,o=[];H_e(s,"options.signal");function a(){p(new B_e)}fC=fC||Xn().addAbortListener;let l;s&&(l=fC(s,a));let c,u,d=[],E=0;function f(R){p(R,--E===0)}function p(R,A){var I;if(R&&(!c||c.code==="ERR_STREAM_PREMATURE_CLOSE")&&(c=R),!(!c&&!A)){for(;d.length;)d.shift()(c);(I=l)===null||I===void 0||I[L_e](),r.abort(),A&&(c||o.forEach(w=>w()),zd.nextTick(e,c,u))}}let h;for(let R=0;R<t.length;R++){let A=t[R],I=R<t.length-1,w=R>0,g=I||n?.end!==!1,L=R===t.length-1;if(V2(A)){let b=function(P){P&&P.name!=="AbortError"&&P.code!=="ERR_STREAM_PREMATURE_CLOSE"&&f(P)};var m=b;if(g){let{destroy:P,cleanup:v}=q2(A,I,w);d.push(P),lC(A)&&L&&o.push(v)}A.on("error",b),lC(A)&&L&&o.push(()=>{A.removeListener("error",b)})}if(R===0)if(typeof A=="function"){if(h=A({signal:i}),!pa(h))throw new aC("Iterable, AsyncIterable or Stream","source",h)}else pa(A)||ZT(A)||hc(A)?h=A:h=Y2.from(A);else if(typeof A=="function"){if(hc(h)){var T;h=EC((T=h)===null||T===void 0?void 0:T.readable)}else h=EC(h);if(h=A(h,{signal:i}),I){if(!pa(h,!0))throw new aC("AsyncIterable",`transform[${R-1}]`,h)}else{var S;uC||(uC=oC());let b=new uC({objectMode:!0}),P=(S=h)===null||S===void 0?void 0:S.then;if(typeof P=="function")E++,P.call(h,$=>{u=$,$!=null&&b.write($),g&&b.end(),zd.nextTick(f)},$=>{b.destroy($),zd.nextTick(f,$)});else if(pa(h,!0))E++,QT(h,b,f,{end:g});else if(cC(h)||hc(h)){let $=h.readable||h;E++,QT($,b,f,{end:g})}else throw new aC("AsyncIterable or Promise","destination",h);h=b;let{destroy:v,cleanup:H}=q2(h,!1,!0);d.push(v),L&&o.push(H)}}else if(V2(A)){if(ZT(h)){E+=2;let b=q_e(h,A,f,{end:g});lC(A)&&L&&o.push(b)}else if(hc(h)||cC(h)){let b=h.readable||h;E++,QT(b,A,f,{end:g})}else if(pa(h))E++,QT(h,A,f,{end:g});else throw new pC("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],h);h=A}else if(G_e(A)){if(ZT(h))E++,hC(EC(h),A,f,{end:g});else if(cC(h)||pa(h))E++,hC(h,A,f,{end:g});else if(hc(h))E++,hC(h.readable,A,f,{end:g});else throw new pC("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],h);h=A}else h=Y2.from(A)}return(i!=null&&i.aborted||s!=null&&s.aborted)&&zd.nextTick(a),h}function q_e(t,e,n,{end:r}){let i=!1;if(e.on("close",()=>{i||n(new U_e)}),t.pipe(e,{end:!1}),r){let o=function(){i=!0,e.end()};var s=o;$_e(t)?zd.nextTick(o):t.once("end",o)}else n();return eS(t,{readable:!0,writable:!1},o=>{let a=t._readableState;o&&o.code==="ERR_STREAM_PREMATURE_CLOSE"&&a&&a.ended&&!a.errored&&!a.errorEmitted?t.once("end",n).once("error",n):n(o)}),eS(e,{readable:!1,writable:!0},n)}z2.exports={pipelineImpl:X2,pipeline:V_e}});var SC=O((dBe,eq)=>{"use strict";var{pipeline:X_e}=tS(),nS=wi(),{destroyer:z_e}=fa(),{isNodeStream:rS,isReadable:j2,isWritable:K2,isWebStream:TC,isTransformStream:Ta,isWritableStream:J2,isReadableStream:Q2}=bi(),{AbortError:j_e,codes:{ERR_INVALID_ARG_VALUE:Z2,ERR_MISSING_ARGS:K_e}}=Bn(),J_e=fs();eq.exports=function(...e){if(e.length===0)throw new K_e("streams");if(e.length===1)return nS.from(e[0]);let n=[...e];if(typeof e[0]=="function"&&(e[0]=nS.from(e[0])),typeof e[e.length-1]=="function"){let f=e.length-1;e[f]=nS.from(e[f])}for(let f=0;f<e.length;++f)if(!(!rS(e[f])&&!TC(e[f]))){if(f<e.length-1&&!(j2(e[f])||Q2(e[f])||Ta(e[f])))throw new Z2(`streams[${f}]`,n[f],"must be readable");if(f>0&&!(K2(e[f])||J2(e[f])||Ta(e[f])))throw new Z2(`streams[${f}]`,n[f],"must be writable")}let r,i,s,o,a;function l(f){let p=o;o=null,p?p(f):f?a.destroy(f):!E&&!d&&a.destroy()}let c=e[0],u=X_e(e,l),d=!!(K2(c)||J2(c)||Ta(c)),E=!!(j2(u)||Q2(u)||Ta(u));if(a=new nS({writableObjectMode:!!(c!=null&&c.writableObjectMode),readableObjectMode:!!(u!=null&&u.readableObjectMode),writable:d,readable:E}),d){if(rS(c))a._write=function(p,h,T){c.write(p,h)?T():r=T},a._final=function(p){c.end(),i=p},c.on("drain",function(){if(r){let p=r;r=null,p()}});else if(TC(c)){let h=(Ta(c)?c.writable:c).getWriter();a._write=async function(T,S,m){try{await h.ready,h.write(T).catch(()=>{}),m()}catch(R){m(R)}},a._final=async function(T){try{await h.ready,h.close().catch(()=>{}),i=T}catch(S){T(S)}}}let f=Ta(u)?u.readable:u;J_e(f,()=>{if(i){let p=i;i=null,p()}})}if(E){if(rS(u))u.on("readable",function(){if(s){let f=s;s=null,f()}}),u.on("end",function(){a.push(null)}),a._read=function(){for(;;){let f=u.read();if(f===null){s=a._read;return}if(!a.push(f))return}};else if(TC(u)){let p=(Ta(u)?u.readable:u).getReader();a._read=async function(){for(;;)try{let{value:h,done:T}=await p.read();if(!a.push(h))return;if(T){a.push(null);return}}catch{return}}}}return a._destroy=function(f,p){!f&&o!==null&&(f=new j_e),s=null,r=null,i=null,o===null?p(f):(o=p,rS(u)&&z_e(u,f))},a}});var uq=O((fBe,mC)=>{"use strict";var Q_e=globalThis.AbortController||Dt().AbortController,{codes:{ERR_INVALID_ARG_VALUE:Z_e,ERR_INVALID_ARG_TYPE:jd,ERR_MISSING_ARGS:eNe,ERR_OUT_OF_RANGE:tNe},AbortError:Li}=Bn(),{validateAbortSignal:Sa,validateInteger:tq,validateObject:Ra}=ic(),nNe=ht().Symbol("kWeak"),rNe=ht().Symbol("kResistStopPropagation"),{finished:iNe}=fs(),sNe=SC(),{addAbortSignalNoValidate:oNe}=Gd(),{isWritable:aNe,isNodeStream:lNe}=bi(),{deprecate:cNe}=Xn(),{ArrayPrototypePush:uNe,Boolean:dNe,MathFloor:nq,Number:fNe,NumberIsNaN:ENe,Promise:rq,PromiseReject:iq,PromiseResolve:hNe,PromisePrototypeThen:sq,Symbol:aq}=ht(),iS=aq("kEmpty"),oq=aq("kEof");function pNe(t,e){if(e!=null&&Ra(e,"options"),e?.signal!=null&&Sa(e.signal,"options.signal"),lNe(t)&&!aNe(t))throw new Z_e("stream",t,"must be writable");let n=sNe(this,t);return e!=null&&e.signal&&oNe(e.signal,n),n}function sS(t,e){if(typeof t!="function")throw new jd("fn",["Function","AsyncFunction"],t);e!=null&&Ra(e,"options"),e?.signal!=null&&Sa(e.signal,"options.signal");let n=1;e?.concurrency!=null&&(n=nq(e.concurrency));let r=n-1;return e?.highWaterMark!=null&&(r=nq(e.highWaterMark)),tq(n,"options.concurrency",1),tq(r,"options.highWaterMark",0),r+=n,async function*(){let s=Xn().AbortSignalAny([e?.signal].filter(dNe)),o=this,a=[],l={signal:s},c,u,d=!1,E=0;function f(){d=!0,p()}function p(){E-=1,h()}function h(){u&&!d&&E<n&&a.length<r&&(u(),u=null)}async function T(){try{for await(let S of o){if(d)return;if(s.aborted)throw new Li;try{if(S=t(S,l),S===iS)continue;S=hNe(S)}catch(m){S=iq(m)}E+=1,sq(S,p,f),a.push(S),c&&(c(),c=null),!d&&(a.length>=r||E>=n)&&await new rq(m=>{u=m})}a.push(oq)}catch(S){let m=iq(S);sq(m,p,f),a.push(m)}finally{d=!0,c&&(c(),c=null)}}T();try{for(;;){for(;a.length>0;){let S=await a[0];if(S===oq)return;if(s.aborted)throw new Li;S!==iS&&(yield S),a.shift(),h()}await new rq(S=>{c=S})}}finally{d=!0,u&&(u(),u=null)}}.call(this)}function TNe(t=void 0){return t!=null&&Ra(t,"options"),t?.signal!=null&&Sa(t.signal,"options.signal"),async function*(){let n=0;for await(let i of this){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new Li({cause:t.signal.reason});yield[n++,i]}}.call(this)}async function lq(t,e=void 0){for await(let n of AC.call(this,t,e))return!0;return!1}async function SNe(t,e=void 0){if(typeof t!="function")throw new jd("fn",["Function","AsyncFunction"],t);return!await lq.call(this,async(...n)=>!await t(...n),e)}async function RNe(t,e){for await(let n of AC.call(this,t,e))return n}async function ANe(t,e){if(typeof t!="function")throw new jd("fn",["Function","AsyncFunction"],t);async function n(r,i){return await t(r,i),iS}for await(let r of sS.call(this,n,e));}function AC(t,e){if(typeof t!="function")throw new jd("fn",["Function","AsyncFunction"],t);async function n(r,i){return await t(r,i)?r:iS}return sS.call(this,n,e)}var RC=class extends eNe{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function mNe(t,e,n){var r;if(typeof t!="function")throw new jd("reducer",["Function","AsyncFunction"],t);n!=null&&Ra(n,"options"),n?.signal!=null&&Sa(n.signal,"options.signal");let i=arguments.length>1;if(n!=null&&(r=n.signal)!==null&&r!==void 0&&r.aborted){let c=new Li(void 0,{cause:n.signal.reason});throw this.once("error",()=>{}),await iNe(this.destroy(c)),c}let s=new Q_e,o=s.signal;if(n!=null&&n.signal){let c={once:!0,[nNe]:this,[rNe]:!0};n.signal.addEventListener("abort",()=>s.abort(),c)}let a=!1;try{for await(let c of this){var l;if(a=!0,n!=null&&(l=n.signal)!==null&&l!==void 0&&l.aborted)throw new Li;i?e=await t(e,c,{signal:o}):(e=c,i=!0)}if(!a&&!i)throw new RC}finally{s.abort()}return e}async function gNe(t){t!=null&&Ra(t,"options"),t?.signal!=null&&Sa(t.signal,"options.signal");let e=[];for await(let r of this){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new Li(void 0,{cause:t.signal.reason});uNe(e,r)}return e}function INe(t,e){let n=sS.call(this,t,e);return async function*(){for await(let i of n)yield*i}.call(this)}function cq(t){if(t=fNe(t),ENe(t))return 0;if(t<0)throw new tNe("number",">= 0",t);return t}function _Ne(t,e=void 0){return e!=null&&Ra(e,"options"),e?.signal!=null&&Sa(e.signal,"options.signal"),t=cq(t),async function*(){var r;if(e!=null&&(r=e.signal)!==null&&r!==void 0&&r.aborted)throw new Li;for await(let s of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new Li;t--<=0&&(yield s)}}.call(this)}function NNe(t,e=void 0){return e!=null&&Ra(e,"options"),e?.signal!=null&&Sa(e.signal,"options.signal"),t=cq(t),async function*(){var r;if(e!=null&&(r=e.signal)!==null&&r!==void 0&&r.aborted)throw new Li;for await(let s of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new Li;if(t-- >0&&(yield s),t<=0)return}}.call(this)}mC.exports.streamReturningOperators={asIndexedPairs:cNe(TNe,"readable.asIndexedPairs will be removed in a future version."),drop:_Ne,filter:AC,flatMap:INe,map:sS,take:NNe,compose:pNe};mC.exports.promiseReturningOperators={every:SNe,forEach:ANe,reduce:mNe,toArray:gNe,some:lq,find:RNe}});var gC=O((EBe,dq)=>{"use strict";var{ArrayPrototypePop:ONe,Promise:CNe}=ht(),{isIterable:bNe,isNodeStream:yNe,isWebStream:wNe}=bi(),{pipelineImpl:LNe}=tS(),{finished:DNe}=fs();IC();function PNe(...t){return new CNe((e,n)=>{let r,i,s=t[t.length-1];if(s&&typeof s=="object"&&!yNe(s)&&!bNe(s)&&!wNe(s)){let o=ONe(t);r=o.signal,i=o.end}LNe(t,(o,a)=>{o?n(o):e(a)},{signal:r,end:i})})}dq.exports={finished:DNe,pipeline:PNe}});var IC=O((hBe,mq)=>{"use strict";var{Buffer:xNe}=require("buffer"),{ObjectDefineProperty:ps,ObjectKeys:hq,ReflectApply:pq}=ht(),{promisify:{custom:Tq}}=Xn(),{streamReturningOperators:fq,promiseReturningOperators:Eq}=uq(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:Sq}}=Bn(),vNe=SC(),{setDefaultHighWaterMark:MNe,getDefaultHighWaterMark:UNe}=$d(),{pipeline:Rq}=tS(),{destroyer:BNe}=fa(),Aq=fs(),_C=gC(),Kd=bi(),ct=mq.exports=HT().Stream;ct.isDestroyed=Kd.isDestroyed;ct.isDisturbed=Kd.isDisturbed;ct.isErrored=Kd.isErrored;ct.isReadable=Kd.isReadable;ct.isWritable=Kd.isWritable;ct.Readable=kd();for(let t of hq(fq)){let n=function(...r){if(new.target)throw Sq();return ct.Readable.from(pq(e,this,r))},e=fq[t];ps(n,"name",{__proto__:null,value:e.name}),ps(n,"length",{__proto__:null,value:e.length}),ps(ct.Readable.prototype,t,{__proto__:null,value:n,enumerable:!1,configurable:!0,writable:!0})}for(let t of hq(Eq)){let n=function(...r){if(new.target)throw Sq();return pq(e,this,r)},e=Eq[t];ps(n,"name",{__proto__:null,value:e.name}),ps(n,"length",{__proto__:null,value:e.length}),ps(ct.Readable.prototype,t,{__proto__:null,value:n,enumerable:!1,configurable:!0,writable:!0})}ct.Writable=JT();ct.Duplex=wi();ct.Transform=iC();ct.PassThrough=oC();ct.pipeline=Rq;var{addAbortSignal:FNe}=Gd();ct.addAbortSignal=FNe;ct.finished=Aq;ct.destroy=BNe;ct.compose=vNe;ct.setDefaultHighWaterMark=MNe;ct.getDefaultHighWaterMark=UNe;ps(ct,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return _C}});ps(Rq,Tq,{__proto__:null,enumerable:!0,get(){return _C.pipeline}});ps(Aq,Tq,{__proto__:null,enumerable:!0,get(){return _C.finished}});ct.Stream=ct;ct._isUint8Array=function(e){return e instanceof Uint8Array};ct._uint8ArrayToBuffer=function(e){return xNe.from(e.buffer,e.byteOffset,e.byteLength)}});var gq=O((pBe,ve)=>{"use strict";var zt=require("stream");if(zt&&process.env.READABLE_STREAM==="disable"){let t=zt.promises;ve.exports._uint8ArrayToBuffer=zt._uint8ArrayToBuffer,ve.exports._isUint8Array=zt._isUint8Array,ve.exports.isDisturbed=zt.isDisturbed,ve.exports.isErrored=zt.isErrored,ve.exports.isReadable=zt.isReadable,ve.exports.Readable=zt.Readable,ve.exports.Writable=zt.Writable,ve.exports.Duplex=zt.Duplex,ve.exports.Transform=zt.Transform,ve.exports.PassThrough=zt.PassThrough,ve.exports.addAbortSignal=zt.addAbortSignal,ve.exports.finished=zt.finished,ve.exports.destroy=zt.destroy,ve.exports.pipeline=zt.pipeline,ve.exports.compose=zt.compose,Object.defineProperty(zt,"promises",{configurable:!0,enumerable:!0,get(){return t}}),ve.exports.Stream=zt.Stream}else{let t=IC(),e=gC(),n=t.Readable.destroy;ve.exports=t.Readable,ve.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,ve.exports._isUint8Array=t._isUint8Array,ve.exports.isDisturbed=t.isDisturbed,ve.exports.isErrored=t.isErrored,ve.exports.isReadable=t.isReadable,ve.exports.Readable=t.Readable,ve.exports.Writable=t.Writable,ve.exports.Duplex=t.Duplex,ve.exports.Transform=t.Transform,ve.exports.PassThrough=t.PassThrough,ve.exports.addAbortSignal=t.addAbortSignal,ve.exports.finished=t.finished,ve.exports.destroy=t.destroy,ve.exports.destroy=n,ve.exports.pipeline=t.pipeline,ve.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return e}}),ve.exports.Stream=t.Stream}ve.exports.default=ve.exports});var _q=O((TBe,Iq)=>{"use strict";var{Transform:HNe}=gq(),GNe=LT(),NC=class extends HNe{constructor(e){super(e),this.checksum=Buffer.allocUnsafe(4),this.checksum.writeInt32BE(0,0),this.rawSize=0}_transform(e,n,r){e&&(this.checksum=GNe.buf(e,this.checksum)>>>0,this.rawSize+=e.length),r(null,e)}digest(e){let n=Buffer.allocUnsafe(4);return n.writeUInt32BE(this.checksum>>>0,0),e?n.toString(e):n}hex(){return this.digest("hex").toUpperCase()}size(){return this.rawSize}};Iq.exports=NC});var Oq=O((SBe,Nq)=>{"use strict";var{DeflateRaw:$Ne}=require("zlib"),WNe=LT(),OC=class extends $Ne{constructor(e){super(e),this.checksum=Buffer.allocUnsafe(4),this.checksum.writeInt32BE(0,0),this.rawSize=0,this.compressedSize=0}push(e,n){return e&&(this.compressedSize+=e.length),super.push(e,n)}_transform(e,n,r){e&&(this.checksum=WNe.buf(e,this.checksum)>>>0,this.rawSize+=e.length),super._transform(e,n,r)}digest(e){let n=Buffer.allocUnsafe(4);return n.writeUInt32BE(this.checksum>>>0,0),e?n.toString(e):n}hex(){return this.digest("hex").toUpperCase()}size(e=!1){return e?this.compressedSize:this.rawSize}};Nq.exports=OC});var CC=O((RBe,Cq)=>{"use strict";Cq.exports={CRC32Stream:_q(),DeflateCRC32Stream:Oq()}});var wq=O((IBe,yq)=>{var kNe=require("util").inherits,YNe=LT(),{CRC32Stream:VNe}=CC(),{DeflateCRC32Stream:qNe}=CC(),bq=EO(),ABe=eN(),mBe=Q_(),me=Z_(),gBe=dO(),de=eT(),ln=yq.exports=function(t){if(!(this instanceof ln))return new ln(t);t=this.options=this._defaults(t),bq.call(this,t),this._entry=null,this._entries=[],this._archive={centralLength:0,centralOffset:0,comment:"",finish:!1,finished:!1,processing:!1,forceZip64:t.forceZip64,forceLocalTime:t.forceLocalTime}};kNe(ln,bq);ln.prototype._afterAppend=function(t){this._entries.push(t),t.getGeneralPurposeBit().usesDataDescriptor()&&this._writeDataDescriptor(t),this._archive.processing=!1,this._entry=null,this._archive.finish&&!this._archive.finished&&this._finish()};ln.prototype._appendBuffer=function(t,e,n){e.length===0&&t.setMethod(me.METHOD_STORED);var r=t.getMethod();if(r===me.METHOD_STORED&&(t.setSize(e.length),t.setCompressedSize(e.length),t.setCrc(YNe.buf(e)>>>0)),this._writeLocalFileHeader(t),r===me.METHOD_STORED){this.write(e),this._afterAppend(t),n(null,t);return}else if(r===me.METHOD_DEFLATED){this._smartStream(t,n).end(e);return}else{n(new Error("compression method "+r+" not implemented"));return}};ln.prototype._appendStream=function(t,e,n){t.getGeneralPurposeBit().useDataDescriptor(!0),t.setVersionNeededToExtract(me.MIN_VERSION_DATA_DESCRIPTOR),this._writeLocalFileHeader(t);var r=this._smartStream(t,n);e.once("error",function(i){r.emit("error",i),r.end()}),e.pipe(r)};ln.prototype._defaults=function(t){return typeof t!="object"&&(t={}),typeof t.zlib!="object"&&(t.zlib={}),typeof t.zlib.level!="number"&&(t.zlib.level=me.ZLIB_BEST_SPEED),t.forceZip64=!!t.forceZip64,t.forceLocalTime=!!t.forceLocalTime,t};ln.prototype._finish=function(){this._archive.centralOffset=this.offset,this._entries.forEach(function(t){this._writeCentralFileHeader(t)}.bind(this)),this._archive.centralLength=this.offset-this._archive.centralOffset,this.isZip64()&&this._writeCentralDirectoryZip64(),this._writeCentralDirectoryEnd(),this._archive.processing=!1,this._archive.finish=!0,this._archive.finished=!0,this.end()};ln.prototype._normalizeEntry=function(t){t.getMethod()===-1&&t.setMethod(me.METHOD_DEFLATED),t.getMethod()===me.METHOD_DEFLATED&&(t.getGeneralPurposeBit().useDataDescriptor(!0),t.setVersionNeededToExtract(me.MIN_VERSION_DATA_DESCRIPTOR)),t.getTime()===-1&&t.setTime(new Date,this._archive.forceLocalTime),t._offsets={file:0,data:0,contents:0}};ln.prototype._smartStream=function(t,e){var n=t.getMethod()===me.METHOD_DEFLATED,r=n?new qNe(this.options.zlib):new VNe,i=null;function s(){var o=r.digest().readUInt32BE(0);t.setCrc(o),t.setSize(r.size()),t.setCompressedSize(r.size(!0)),this._afterAppend(t),e(i,t)}return r.once("end",s.bind(this)),r.once("error",function(o){i=o}),r.pipe(this,{end:!1}),r};ln.prototype._writeCentralDirectoryEnd=function(){var t=this._entries.length,e=this._archive.centralLength,n=this._archive.centralOffset;this.isZip64()&&(t=me.ZIP64_MAGIC_SHORT,e=me.ZIP64_MAGIC,n=me.ZIP64_MAGIC),this.write(de.getLongBytes(me.SIG_EOCD)),this.write(me.SHORT_ZERO),this.write(me.SHORT_ZERO),this.write(de.getShortBytes(t)),this.write(de.getShortBytes(t)),this.write(de.getLongBytes(e)),this.write(de.getLongBytes(n));var r=this.getComment(),i=Buffer.byteLength(r);this.write(de.getShortBytes(i)),this.write(r)};ln.prototype._writeCentralDirectoryZip64=function(){this.write(de.getLongBytes(me.SIG_ZIP64_EOCD)),this.write(de.getEightBytes(44)),this.write(de.getShortBytes(me.MIN_VERSION_ZIP64)),this.write(de.getShortBytes(me.MIN_VERSION_ZIP64)),this.write(me.LONG_ZERO),this.write(me.LONG_ZERO),this.write(de.getEightBytes(this._entries.length)),this.write(de.getEightBytes(this._entries.length)),this.write(de.getEightBytes(this._archive.centralLength)),this.write(de.getEightBytes(this._archive.centralOffset)),this.write(de.getLongBytes(me.SIG_ZIP64_EOCD_LOC)),this.write(me.LONG_ZERO),this.write(de.getEightBytes(this._archive.centralOffset+this._archive.centralLength)),this.write(de.getLongBytes(1))};ln.prototype._writeCentralFileHeader=function(t){var e=t.getGeneralPurposeBit(),n=t.getMethod(),r=t._offsets.file,i=t.getSize(),s=t.getCompressedSize();if(t.isZip64()||r>me.ZIP64_MAGIC){i=me.ZIP64_MAGIC,s=me.ZIP64_MAGIC,r=me.ZIP64_MAGIC,t.setVersionNeededToExtract(me.MIN_VERSION_ZIP64);var o=Buffer.concat([de.getShortBytes(me.ZIP64_EXTRA_ID),de.getShortBytes(24),de.getEightBytes(t.getSize()),de.getEightBytes(t.getCompressedSize()),de.getEightBytes(t._offsets.file)],28);t.setExtra(o)}this.write(de.getLongBytes(me.SIG_CFH)),this.write(de.getShortBytes(t.getPlatform()<<8|me.VERSION_MADEBY)),this.write(de.getShortBytes(t.getVersionNeededToExtract())),this.write(e.encode()),this.write(de.getShortBytes(n)),this.write(de.getLongBytes(t.getTimeDos())),this.write(de.getLongBytes(t.getCrc())),this.write(de.getLongBytes(s)),this.write(de.getLongBytes(i));var a=t.getName(),l=t.getComment(),c=t.getCentralDirectoryExtra();e.usesUTF8ForNames()&&(a=Buffer.from(a),l=Buffer.from(l)),this.write(de.getShortBytes(a.length)),this.write(de.getShortBytes(c.length)),this.write(de.getShortBytes(l.length)),this.write(me.SHORT_ZERO),this.write(de.getShortBytes(t.getInternalAttributes())),this.write(de.getLongBytes(t.getExternalAttributes())),this.write(de.getLongBytes(r)),this.write(a),this.write(c),this.write(l)};ln.prototype._writeDataDescriptor=function(t){this.write(de.getLongBytes(me.SIG_DD)),this.write(de.getLongBytes(t.getCrc())),t.isZip64()?(this.write(de.getEightBytes(t.getCompressedSize())),this.write(de.getEightBytes(t.getSize()))):(this.write(de.getLongBytes(t.getCompressedSize())),this.write(de.getLongBytes(t.getSize())))};ln.prototype._writeLocalFileHeader=function(t){var e=t.getGeneralPurposeBit(),n=t.getMethod(),r=t.getName(),i=t.getLocalFileDataExtra();t.isZip64()&&(e.useDataDescriptor(!0),t.setVersionNeededToExtract(me.MIN_VERSION_ZIP64)),e.usesUTF8ForNames()&&(r=Buffer.from(r)),t._offsets.file=this.offset,this.write(de.getLongBytes(me.SIG_LFH)),this.write(de.getShortBytes(t.getVersionNeededToExtract())),this.write(e.encode()),this.write(de.getShortBytes(n)),this.write(de.getLongBytes(t.getTimeDos())),t._offsets.data=this.offset,e.usesDataDescriptor()?(this.write(me.LONG_ZERO),this.write(me.LONG_ZERO),this.write(me.LONG_ZERO)):(this.write(de.getLongBytes(t.getCrc())),this.write(de.getLongBytes(t.getCompressedSize())),this.write(de.getLongBytes(t.getSize()))),this.write(de.getShortBytes(r.length)),this.write(de.getShortBytes(i.length)),this.write(r),this.write(i),t._offsets.contents=this.offset};ln.prototype.getComment=function(t){return this._archive.comment!==null?this._archive.comment:""};ln.prototype.isZip64=function(){return this._archive.forceZip64||this._entries.length>me.ZIP64_MAGIC_SHORT||this._archive.centralLength>me.ZIP64_MAGIC||this._archive.centralOffset>me.ZIP64_MAGIC};ln.prototype.setComment=function(t){this._archive.comment=t}});var bC=O((_Be,Lq)=>{Lq.exports={ArchiveEntry:Zp(),ZipArchiveEntry:eN(),ArchiveOutputStream:EO(),ZipArchiveOutputStream:wq()}});var Pq=O((NBe,Dq)=>{var XNe=require("util").inherits,wC=bC().ZipArchiveOutputStream,zNe=bC().ZipArchiveEntry,yC=Pl(),pc=Dq.exports=function(t){if(!(this instanceof pc))return new pc(t);t=this.options=t||{},t.zlib=t.zlib||{},wC.call(this,t),typeof t.level=="number"&&t.level>=0&&(t.zlib.level=t.level,delete t.level),!t.forceZip64&&typeof t.zlib.level=="number"&&t.zlib.level===0&&(t.store=!0),t.namePrependSlash=t.namePrependSlash||!1,t.comment&&t.comment.length>0&&this.setComment(t.comment)};XNe(pc,wC);pc.prototype._normalizeFileData=function(t){t=yC.defaults(t,{type:"file",name:null,namePrependSlash:this.options.namePrependSlash,linkname:null,date:null,mode:null,store:this.options.store,comment:""});var e=t.type==="directory",n=t.type==="symlink";return t.name&&(t.name=yC.sanitizePath(t.name),!n&&t.name.slice(-1)==="/"?(e=!0,t.type="directory"):e&&(t.name+="/")),(e||n)&&(t.store=!0),t.date=yC.dateify(t.date),t};pc.prototype.entry=function(t,e,n){if(typeof n!="function"&&(n=this._emitErrorCallback.bind(this)),e=this._normalizeFileData(e),e.type!=="file"&&e.type!=="directory"&&e.type!=="symlink"){n(new Error(e.type+" entries not currently supported"));return}if(typeof e.name!="string"||e.name.length===0){n(new Error("entry name must be a non-empty string value"));return}if(e.type==="symlink"&&typeof e.linkname!="string"){n(new Error("entry linkname must be a non-empty string value when type equals symlink"));return}var r=new zNe(e.name);return r.setTime(e.date,this.options.forceLocalTime),e.namePrependSlash&&r.setName(e.name,!0),e.store&&r.setMethod(0),e.comment.length>0&&r.setComment(e.comment),e.type==="symlink"&&typeof e.mode!="number"&&(e.mode=40960),typeof e.mode=="number"&&(e.type==="symlink"&&(e.mode|=40960),r.setUnixMode(e.mode)),e.type==="symlink"&&typeof e.linkname=="string"&&(t=Buffer.from(e.linkname)),wC.prototype.entry.call(this,r,t,n)};pc.prototype.finalize=function(){this.finish()}});var vq=O((OBe,xq)=>{var jNe=Pq(),KNe=Pl(),to=function(t){if(!(this instanceof to))return new to(t);t=this.options=KNe.defaults(t,{comment:"",forceUTC:!1,namePrependSlash:!1,store:!1}),this.supports={directory:!0,symlink:!0},this.engine=new jNe(t)};to.prototype.append=function(t,e,n){this.engine.entry(t,e,n)};to.prototype.finalize=function(){this.engine.finalize()};to.prototype.on=function(){return this.engine.on.apply(this.engine,arguments)};to.prototype.pipe=function(){return this.engine.pipe.apply(this.engine,arguments)};to.prototype.unpipe=function(){return this.engine.unpipe.apply(this.engine,arguments)};xq.exports=to});var Uq=O((CBe,Mq)=>{Mq.exports=require("events")});var Fq=O((yBe,Bq)=>{Bq.exports=class{constructor(e){if(!(e>0)||(e-1&e)!==0)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}clear(){this.top=this.btm=0,this.next=null,this.buffer.fill(void 0)}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){let e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}peek(){return this.buffer[this.btm]}isEmpty(){return this.buffer[this.btm]===void 0}}});var LC=O((LBe,Gq)=>{var Hq=Fq();Gq.exports=class{constructor(e){this.hwm=e||16,this.head=new Hq(this.hwm),this.tail=this.head,this.length=0}clear(){this.head=this.tail,this.head.clear(),this.length=0}push(e){if(this.length++,!this.head.push(e)){let n=this.head;this.head=n.next=new Hq(2*this.head.buffer.length),this.head.push(e)}}shift(){this.length!==0&&this.length--;let e=this.tail.shift();if(e===void 0&&this.tail.next){let n=this.tail.next;return this.tail.next=null,this.tail=n,this.tail.shift()}return e}peek(){let e=this.tail.peek();return e===void 0&&this.tail.next?this.tail.next.peek():e}isEmpty(){return this.length===0}}});var Tc=O((DBe,$q)=>{function JNe(t){return Buffer.isBuffer(t)||t instanceof Uint8Array}function QNe(t){return Buffer.isEncoding(t)}function ZNe(t,e,n){return Buffer.alloc(t,e,n)}function eOe(t){return Buffer.allocUnsafe(t)}function tOe(t){return Buffer.allocUnsafeSlow(t)}function nOe(t,e){return Buffer.byteLength(t,e)}function rOe(t,e){return Buffer.compare(t,e)}function iOe(t,e){return Buffer.concat(t,e)}function sOe(t,e,n,r,i){return Ze(t).copy(e,n,r,i)}function oOe(t,e){return Ze(t).equals(e)}function aOe(t,e,n,r,i){return Ze(t).fill(e,n,r,i)}function lOe(t,e,n){return Buffer.from(t,e,n)}function cOe(t,e,n,r){return Ze(t).includes(e,n,r)}function uOe(t,e,n,r){return Ze(t).indexOf(e,n,r)}function dOe(t,e,n,r){return Ze(t).lastIndexOf(e,n,r)}function fOe(t){return Ze(t).swap16()}function EOe(t){return Ze(t).swap32()}function hOe(t){return Ze(t).swap64()}function Ze(t){return Buffer.isBuffer(t)?t:Buffer.from(t.buffer,t.byteOffset,t.byteLength)}function pOe(t,e,n,r){return Ze(t).toString(e,n,r)}function TOe(t,e,n,r,i){return Ze(t).write(e,n,r,i)}function SOe(t,e){return Ze(t).readDoubleBE(e)}function ROe(t,e){return Ze(t).readDoubleLE(e)}function AOe(t,e){return Ze(t).readFloatBE(e)}function mOe(t,e){return Ze(t).readFloatLE(e)}function gOe(t,e){return Ze(t).readInt32BE(e)}function IOe(t,e){return Ze(t).readInt32LE(e)}function _Oe(t,e){return Ze(t).readUInt32BE(e)}function NOe(t,e){return Ze(t).readUInt32LE(e)}function OOe(t,e,n){return Ze(t).writeDoubleBE(e,n)}function COe(t,e,n){return Ze(t).writeDoubleLE(e,n)}function bOe(t,e,n){return Ze(t).writeFloatBE(e,n)}function yOe(t,e,n){return Ze(t).writeFloatLE(e,n)}function wOe(t,e,n){return Ze(t).writeInt32BE(e,n)}function LOe(t,e,n){return Ze(t).writeInt32LE(e,n)}function DOe(t,e,n){return Ze(t).writeUInt32BE(e,n)}function POe(t,e,n){return Ze(t).writeUInt32LE(e,n)}$q.exports={isBuffer:JNe,isEncoding:QNe,alloc:ZNe,allocUnsafe:eOe,allocUnsafeSlow:tOe,byteLength:nOe,compare:rOe,concat:iOe,copy:sOe,equals:oOe,fill:aOe,from:lOe,includes:cOe,indexOf:uOe,lastIndexOf:dOe,swap16:fOe,swap32:EOe,swap64:hOe,toBuffer:Ze,toString:pOe,write:TOe,readDoubleBE:SOe,readDoubleLE:ROe,readFloatBE:AOe,readFloatLE:mOe,readInt32BE:gOe,readInt32LE:IOe,readUInt32BE:_Oe,readUInt32LE:NOe,writeDoubleBE:OOe,writeDoubleLE:COe,writeFloatBE:bOe,writeFloatLE:yOe,writeInt32BE:wOe,writeInt32LE:LOe,writeUInt32BE:DOe,writeUInt32LE:POe}});var kq=O((xBe,Wq)=>{var xOe=Tc();Wq.exports=class{constructor(e){this.encoding=e}get remaining(){return 0}decode(e){return xOe.toString(e,this.encoding)}flush(){return""}}});var Vq=O((MBe,Yq)=>{var vOe=Tc();Yq.exports=class{constructor(){this.codePoint=0,this.bytesSeen=0,this.bytesNeeded=0,this.lowerBoundary=128,this.upperBoundary=191}get remaining(){return this.bytesSeen}decode(e){if(this.bytesNeeded===0){let r=!0;for(let i=Math.max(0,e.byteLength-4),s=e.byteLength;i<s&&r;i++)r=e[i]<=127;if(r)return vOe.toString(e,"utf8")}let n="";for(let r=0,i=e.byteLength;r<i;r++){let s=e[r];if(this.bytesNeeded===0){s<=127?n+=String.fromCharCode(s):(this.bytesSeen=1,s>=194&&s<=223?(this.bytesNeeded=2,this.codePoint=s&31):s>=224&&s<=239?(s===224?this.lowerBoundary=160:s===237&&(this.upperBoundary=159),this.bytesNeeded=3,this.codePoint=s&15):s>=240&&s<=244?(s===240&&(this.lowerBoundary=144),s===244&&(this.upperBoundary=143),this.bytesNeeded=4,this.codePoint=s&7):n+="\uFFFD");continue}if(s<this.lowerBoundary||s>this.upperBoundary){this.codePoint=0,this.bytesNeeded=0,this.bytesSeen=0,this.lowerBoundary=128,this.upperBoundary=191,n+="\uFFFD";continue}this.lowerBoundary=128,this.upperBoundary=191,this.codePoint=this.codePoint<<6|s&63,this.bytesSeen++,this.bytesSeen===this.bytesNeeded&&(n+=String.fromCodePoint(this.codePoint),this.codePoint=0,this.bytesNeeded=0,this.bytesSeen=0)}return n}flush(){let e=this.bytesNeeded>0?"\uFFFD":"";return this.codePoint=0,this.bytesNeeded=0,this.bytesSeen=0,this.lowerBoundary=128,this.upperBoundary=191,e}}});var Xq=O((BBe,qq)=>{var MOe=kq(),UOe=Vq();qq.exports=class{constructor(e="utf8"){switch(this.encoding=BOe(e),this.encoding){case"utf8":this.decoder=new UOe;break;case"utf16le":case"base64":throw new Error("Unsupported encoding: "+this.encoding);default:this.decoder=new MOe(this.encoding)}}get remaining(){return this.decoder.remaining}push(e){return typeof e=="string"?e:this.decoder.decode(e)}write(e){return this.push(e)}end(e){let n="";return e&&(n=this.push(e)),n+=this.decoder.flush(),n}};function BOe(t){switch(t=t.toLowerCase(),t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:throw new Error("Unknown encoding: "+t)}}});var qC=O((FBe,TX)=>{var{EventEmitter:FOe}=Uq(),dS=new Error("Stream was destroyed"),DC=new Error("Premature close"),Zq=LC(),HOe=Xq(),PC=typeof queueMicrotask>"u"?t=>global.process.nextTick(t):queueMicrotask,gt=(1<<29)-1,Di=1,HC=2,Aa=4,Jd=8,eX=gt^Di,GOe=gt^HC,nf=16,Sc=32,mc=64,ro=128,rf=256,GC=512,ma=1024,xC=2048,$C=4096,WC=8192,zr=16384,no=32768,fS=65536,ga=131072,tX=rf|GC,$Oe=nf|fS,WOe=mc|nf,kOe=$C|ro,kC=rf|ga,YOe=gt^nf,VOe=gt^mc,qOe=gt^(mc|fS),zq=gt^fS,XOe=gt^rf,zOe=gt^(ro|WC),jOe=gt^ma,jq=gt^tX,nX=gt^no,KOe=gt^Sc,rX=gt^ga,JOe=gt^kC,Ts=1<<18,Ac=2<<18,sf=4<<18,Ia=8<<18,of=16<<18,io=32<<18,vC=64<<18,Rc=128<<18,YC=256<<18,_a=512<<18,ES=1024<<18,QOe=gt^(Ts|YC),iX=gt^sf,ZOe=gt^(Ts|_a),eCe=gt^of,tCe=gt^Ia,sX=gt^Rc,nCe=gt^Ac,oX=gt^ES,Qd=nf|Ts,aX=gt^Qd,VC=zr|io,Pi=Aa|Jd|HC,cr=Pi|Di,lX=Pi|VC,rCe=iX&VOe,hS=Rc|no,iCe=hS&aX,cX=cr|iCe,sCe=cr|ma|zr,Kq=cr|zr|ro,oCe=cr|ma|ro,aCe=cr|$C|ro|WC,lCe=cr|nf|ma|zr|fS|ga,cCe=Pi|ma|zr,uCe=Sc|cr|no|mc,dCe=no|Di,fCe=cr|_a|io,ECe=Ia|of,uX=Ia|Ts,hCe=Ia|of|cr|Ts,Jq=cr|Ts|Ia|ES,pCe=sf|Ts,TCe=Ts|YC,SCe=cr|_a|uX|io,RCe=of|Pi|_a|io,ACe=Ac|cr|Rc|sf,mCe=_a|io|Pi,oS=Symbol.asyncIterator||Symbol("asyncIterator"),aS=class{constructor(e,{highWaterMark:n=16384,map:r=null,mapWritable:i,byteLength:s,byteLengthWritable:o}={}){this.stream=e,this.queue=new Zq,this.highWaterMark=n,this.buffered=0,this.error=null,this.pipeline=null,this.drains=null,this.byteLength=o||s||pX,this.map=i||r,this.afterWrite=_Ce.bind(this),this.afterUpdateNextTick=CCe.bind(this)}get ended(){return(this.stream._duplexState&io)!==0}push(e){return(this.stream._duplexState&mCe)!==0?!1:(this.map!==null&&(e=this.map(e)),this.buffered+=this.byteLength(e),this.queue.push(e),this.buffered<this.highWaterMark?(this.stream._duplexState|=Ia,!0):(this.stream._duplexState|=ECe,!1))}shift(){let e=this.queue.shift();return this.buffered-=this.byteLength(e),this.buffered===0&&(this.stream._duplexState&=tCe),e}end(e){typeof e=="function"?this.stream.once("finish",e):e!=null&&this.push(e),this.stream._duplexState=(this.stream._duplexState|_a)&iX}autoBatch(e,n){let r=[],i=this.stream;for(r.push(e);(i._duplexState&Jq)===uX;)r.push(i._writableState.shift());if((i._duplexState&cr)!==0)return n(null);i._writev(r,n)}update(){let e=this.stream;e._duplexState|=Ac;do{for(;(e._duplexState&Jq)===Ia;){let n=this.shift();e._duplexState|=TCe,e._write(n,this.afterWrite)}(e._duplexState&pCe)===0&&this.updateNonPrimary()}while(this.continueUpdate()===!0);e._duplexState&=nCe}updateNonPrimary(){let e=this.stream;if((e._duplexState&SCe)===_a){e._duplexState=e._duplexState|Ts,e._final(ICe.bind(this));return}if((e._duplexState&Pi)===Aa){(e._duplexState&hS)===0&&(e._duplexState|=Qd,e._destroy(dX.bind(this)));return}(e._duplexState&cX)===Di&&(e._duplexState=(e._duplexState|Qd)&eX,e._open(fX.bind(this)))}continueUpdate(){return(this.stream._duplexState&Rc)===0?!1:(this.stream._duplexState&=sX,!0)}updateCallback(){(this.stream._duplexState&ACe)===sf?this.update():this.updateNextTick()}updateNextTick(){(this.stream._duplexState&Rc)===0&&(this.stream._duplexState|=Rc,(this.stream._duplexState&Ac)===0&&PC(this.afterUpdateNextTick))}},MC=class{constructor(e,{highWaterMark:n=16384,map:r=null,mapReadable:i,byteLength:s,byteLengthReadable:o}={}){this.stream=e,this.queue=new Zq,this.highWaterMark=n===0?1:n,this.buffered=0,this.readAhead=n>0,this.error=null,this.pipeline=null,this.byteLength=o||s||pX,this.map=i||r,this.pipeTo=null,this.afterRead=NCe.bind(this),this.afterUpdateNextTick=OCe.bind(this)}get ended(){return(this.stream._duplexState&zr)!==0}pipe(e,n){if(this.pipeTo!==null)throw new Error("Can only pipe to one destination");if(typeof n!="function"&&(n=null),this.stream._duplexState|=GC,this.pipeTo=e,this.pipeline=new BC(this.stream,e,n),n&&this.stream.on("error",Qq),tf(e))e._writableState.pipeline=this.pipeline,n&&e.on("error",Qq),e.on("finish",this.pipeline.finished.bind(this.pipeline));else{let r=this.pipeline.done.bind(this.pipeline,e),i=this.pipeline.done.bind(this.pipeline,e,null);e.on("error",r),e.on("close",i),e.on("finish",this.pipeline.finished.bind(this.pipeline))}e.on("drain",gCe.bind(this)),this.stream.emit("piping",e),e.emit("pipe",this.stream)}push(e){let n=this.stream;return e===null?(this.highWaterMark=0,n._duplexState=(n._duplexState|ma)&qOe,!1):this.map!==null&&(e=this.map(e),e===null)?(n._duplexState&=zq,this.buffered<this.highWaterMark):(this.buffered+=this.byteLength(e),this.queue.push(e),n._duplexState=(n._duplexState|ro)&zq,this.buffered<this.highWaterMark)}shift(){let e=this.queue.shift();return this.buffered-=this.byteLength(e),this.buffered===0&&(this.stream._duplexState&=zOe),e}unshift(e){let n=[this.map!==null?this.map(e):e];for(;this.buffered>0;)n.push(this.shift());for(let r=0;r<n.length-1;r++){let i=n[r];this.buffered+=this.byteLength(i),this.queue.push(i)}this.push(n[n.length-1])}read(){let e=this.stream;if((e._duplexState&Kq)===ro){let n=this.shift();return this.pipeTo!==null&&this.pipeTo.write(n)===!1&&(e._duplexState&=jq),(e._duplexState&xC)!==0&&e.emit("data",n),n}return this.readAhead===!1&&(e._duplexState|=ga,this.updateNextTick()),null}drain(){let e=this.stream;for(;(e._duplexState&Kq)===ro&&(e._duplexState&tX)!==0;){let n=this.shift();this.pipeTo!==null&&this.pipeTo.write(n)===!1&&(e._duplexState&=jq),(e._duplexState&xC)!==0&&e.emit("data",n)}}update(){let e=this.stream;e._duplexState|=Sc;do{for(this.drain();this.buffered<this.highWaterMark&&(e._duplexState&lCe)===ga;)e._duplexState|=$Oe,e._read(this.afterRead),this.drain();(e._duplexState&aCe)===kOe&&(e._duplexState|=WC,e.emit("readable")),(e._duplexState&WOe)===0&&this.updateNonPrimary()}while(this.continueUpdate()===!0);e._duplexState&=KOe}updateNonPrimary(){let e=this.stream;if((e._duplexState&oCe)===ma&&(e._duplexState=(e._duplexState|zr)&jOe,e.emit("end"),(e._duplexState&lX)===VC&&(e._duplexState|=Aa),this.pipeTo!==null&&this.pipeTo.end()),(e._duplexState&Pi)===Aa){(e._duplexState&hS)===0&&(e._duplexState|=Qd,e._destroy(dX.bind(this)));return}(e._duplexState&cX)===Di&&(e._duplexState=(e._duplexState|Qd)&eX,e._open(fX.bind(this)))}continueUpdate(){return(this.stream._duplexState&no)===0?!1:(this.stream._duplexState&=nX,!0)}updateCallback(){(this.stream._duplexState&uCe)===mc?this.update():this.updateNextTick()}updateNextTickIfOpen(){(this.stream._duplexState&dCe)===0&&(this.stream._duplexState|=no,(this.stream._duplexState&Sc)===0&&PC(this.afterUpdateNextTick))}updateNextTick(){(this.stream._duplexState&no)===0&&(this.stream._duplexState|=no,(this.stream._duplexState&Sc)===0&&PC(this.afterUpdateNextTick))}},UC=class{constructor(e){this.data=null,this.afterTransform=yCe.bind(e),this.afterFinal=null}},BC=class{constructor(e,n,r){this.from=e,this.to=n,this.afterPipe=r,this.error=null,this.pipeToFinished=!1}finished(){this.pipeToFinished=!0}done(e,n){if(n&&(this.error=n),e===this.to&&(this.to=null,this.from!==null)){((this.from._duplexState&zr)===0||!this.pipeToFinished)&&this.from.destroy(this.error||new Error("Writable stream closed prematurely"));return}if(e===this.from&&(this.from=null,this.to!==null)){(e._duplexState&zr)===0&&this.to.destroy(this.error||new Error("Readable stream closed before ending"));return}this.afterPipe!==null&&this.afterPipe(this.error),this.to=this.from=this.afterPipe=null}};function gCe(){this.stream._duplexState|=GC,this.updateCallback()}function ICe(t){let e=this.stream;t&&e.destroy(t),(e._duplexState&Pi)===0&&(e._duplexState|=io,e.emit("finish")),(e._duplexState&lX)===VC&&(e._duplexState|=Aa),e._duplexState&=ZOe,(e._duplexState&Ac)===0?this.update():this.updateNextTick()}function dX(t){let e=this.stream;!t&&this.error!==dS&&(t=this.error),t&&e.emit("error",t),e._duplexState|=Jd,e.emit("close");let n=e._readableState,r=e._writableState;if(n!==null&&n.pipeline!==null&&n.pipeline.done(e,t),r!==null){for(;r.drains!==null&&r.drains.length>0;)r.drains.shift().resolve(!1);r.pipeline!==null&&r.pipeline.done(e,t)}}function _Ce(t){let e=this.stream;t&&e.destroy(t),e._duplexState&=QOe,this.drains!==null&&bCe(this.drains),(e._duplexState&hCe)===of&&(e._duplexState&=eCe,(e._duplexState&vC)===vC&&e.emit("drain")),this.updateCallback()}function NCe(t){t&&this.stream.destroy(t),this.stream._duplexState&=YOe,this.readAhead===!1&&(this.stream._duplexState&rf)===0&&(this.stream._duplexState&=rX),this.updateCallback()}function OCe(){(this.stream._duplexState&Sc)===0&&(this.stream._duplexState&=nX,this.update())}function CCe(){(this.stream._duplexState&Ac)===0&&(this.stream._duplexState&=sX,this.update())}function bCe(t){for(let e=0;e<t.length;e++)--t[e].writes===0&&(t.shift().resolve(!0),e--)}function fX(t){let e=this.stream;t&&e.destroy(t),(e._duplexState&Aa)===0&&((e._duplexState&sCe)===0&&(e._duplexState|=mc),(e._duplexState&fCe)===0&&(e._duplexState|=sf),e.emit("open")),e._duplexState&=aX,e._writableState!==null&&e._writableState.updateCallback(),e._readableState!==null&&e._readableState.updateCallback()}function yCe(t,e){e!=null&&this.push(e),this._writableState.afterWrite(t)}function wCe(t){this._readableState!==null&&(t==="data"&&(this._duplexState|=xC|kC,this._readableState.updateNextTick()),t==="readable"&&(this._duplexState|=$C,this._readableState.updateNextTick())),this._writableState!==null&&t==="drain"&&(this._duplexState|=vC,this._writableState.updateNextTick())}var Zd=class extends FOe{constructor(e){super(),this._duplexState=0,this._readableState=null,this._writableState=null,e&&(e.open&&(this._open=e.open),e.destroy&&(this._destroy=e.destroy),e.predestroy&&(this._predestroy=e.predestroy),e.signal&&e.signal.addEventListener("abort",HCe.bind(this))),this.on("newListener",wCe)}_open(e){e(null)}_destroy(e){e(null)}_predestroy(){}get readable(){return this._readableState!==null?!0:void 0}get writable(){return this._writableState!==null?!0:void 0}get destroyed(){return(this._duplexState&Jd)!==0}get destroying(){return(this._duplexState&Pi)!==0}destroy(e){(this._duplexState&Pi)===0&&(e||(e=dS),this._duplexState=(this._duplexState|Aa)&rCe,this._readableState!==null&&(this._readableState.highWaterMark=0,this._readableState.error=e),this._writableState!==null&&(this._writableState.highWaterMark=0,this._writableState.error=e),this._duplexState|=HC,this._predestroy(),this._duplexState&=GOe,this._readableState!==null&&this._readableState.updateNextTick(),this._writableState!==null&&this._writableState.updateNextTick())}},lS=class t extends Zd{constructor(e){super(e),this._duplexState|=Di|io|ga,this._readableState=new MC(this,e),e&&(this._readableState.readAhead===!1&&(this._duplexState&=rX),e.read&&(this._read=e.read),e.eagerOpen&&this._readableState.updateNextTick(),e.encoding&&this.setEncoding(e.encoding))}setEncoding(e){let n=new HOe(e),r=this._readableState.map||PCe;return this._readableState.map=i,this;function i(s){let o=n.push(s);return o===""&&(s.byteLength!==0||n.remaining>0)?null:r(o)}}_read(e){e(null)}pipe(e,n){return this._readableState.updateNextTick(),this._readableState.pipe(e,n),e}read(){return this._readableState.updateNextTick(),this._readableState.read()}push(e){return this._readableState.updateNextTickIfOpen(),this._readableState.push(e)}unshift(e){return this._readableState.updateNextTickIfOpen(),this._readableState.unshift(e)}resume(){return this._duplexState|=kC,this._readableState.updateNextTick(),this}pause(){return this._duplexState&=this._readableState.readAhead===!1?JOe:XOe,this}static _fromAsyncIterator(e,n){let r,i=new t({...n,read(o){e.next().then(s).then(o.bind(null,null)).catch(o)},predestroy(){r=e.return()},destroy(o){if(!r)return o(null);r.then(o.bind(null,null)).catch(o)}});return i;function s(o){o.done?i.push(null):i.push(o.value)}}static from(e,n){if(UCe(e))return e;if(e[oS])return this._fromAsyncIterator(e[oS](),n);Array.isArray(e)||(e=e===void 0?[]:[e]);let r=0;return new t({...n,read(i){this.push(r===e.length?null:e[r++]),i(null)}})}static isBackpressured(e){return(e._duplexState&cCe)!==0||e._readableState.buffered>=e._readableState.highWaterMark}static isPaused(e){return(e._duplexState&rf)===0}[oS](){let e=this,n=null,r=null,i=null;return this.on("error",c=>{n=c}),this.on("readable",s),this.on("close",o),{[oS](){return this},next(){return new Promise(function(c,u){r=c,i=u;let d=e.read();d!==null?a(d):(e._duplexState&Jd)!==0&&a(null)})},return(){return l(null)},throw(c){return l(c)}};function s(){r!==null&&a(e.read())}function o(){r!==null&&a(null)}function a(c){i!==null&&(n?i(n):c===null&&(e._duplexState&zr)===0?i(dS):r({value:c,done:c===null}),i=r=null)}function l(c){return e.destroy(c),new Promise((u,d)=>{if(e._duplexState&Jd)return u({value:void 0,done:!0});e.once("close",function(){c?d(c):u({value:void 0,done:!0})})})}}},cS=class extends Zd{constructor(e){super(e),this._duplexState|=Di|zr,this._writableState=new aS(this,e),e&&(e.writev&&(this._writev=e.writev),e.write&&(this._write=e.write),e.final&&(this._final=e.final),e.eagerOpen&&this._writableState.updateNextTick())}cork(){this._duplexState|=ES}uncork(){this._duplexState&=oX,this._writableState.updateNextTick()}_writev(e,n){n(null)}_write(e,n){this._writableState.autoBatch(e,n)}_final(e){e(null)}static isBackpressured(e){return(e._duplexState&RCe)!==0}static drained(e){if(e.destroyed)return Promise.resolve(!1);let n=e._writableState,i=(GCe(e)?Math.min(1,n.queue.length):n.queue.length)+(e._duplexState&YC?1:0);return i===0?Promise.resolve(!0):(n.drains===null&&(n.drains=[]),new Promise(s=>{n.drains.push({writes:i,resolve:s})}))}write(e){return this._writableState.updateNextTick(),this._writableState.push(e)}end(e){return this._writableState.updateNextTick(),this._writableState.end(e),this}},ef=class extends lS{constructor(e){super(e),this._duplexState=Di|this._duplexState&ga,this._writableState=new aS(this,e),e&&(e.writev&&(this._writev=e.writev),e.write&&(this._write=e.write),e.final&&(this._final=e.final))}cork(){this._duplexState|=ES}uncork(){this._duplexState&=oX,this._writableState.updateNextTick()}_writev(e,n){n(null)}_write(e,n){this._writableState.autoBatch(e,n)}_final(e){e(null)}write(e){return this._writableState.updateNextTick(),this._writableState.push(e)}end(e){return this._writableState.updateNextTick(),this._writableState.end(e),this}},uS=class extends ef{constructor(e){super(e),this._transformState=new UC(this),e&&(e.transform&&(this._transform=e.transform),e.flush&&(this._flush=e.flush))}_write(e,n){this._readableState.buffered>=this._readableState.highWaterMark?this._transformState.data=e:this._transform(e,this._transformState.afterTransform)}_read(e){if(this._transformState.data!==null){let n=this._transformState.data;this._transformState.data=null,e(null),this._transform(n,this._transformState.afterTransform)}else e(null)}destroy(e){super.destroy(e),this._transformState.data!==null&&(this._transformState.data=null,this._transformState.afterTransform())}_transform(e,n){n(null,e)}_flush(e){e(null)}_final(e){this._transformState.afterFinal=e,this._flush(LCe.bind(this))}},FC=class extends uS{};function LCe(t,e){let n=this._transformState.afterFinal;if(t)return n(t);e!=null&&this.push(e),this.push(null),n(null)}function DCe(...t){return new Promise((e,n)=>EX(...t,r=>{if(r)return n(r);e()}))}function EX(t,...e){let n=Array.isArray(t)?[...t,...e]:[t,...e],r=n.length&&typeof n[n.length-1]=="function"?n.pop():null;if(n.length<2)throw new Error("Pipeline requires at least 2 streams");let i=n[0],s=null,o=null;for(let c=1;c<n.length;c++)s=n[c],tf(i)?i.pipe(s,l):(a(i,!0,c>1,l),i.pipe(s)),i=s;if(r){let c=!1,u=tf(s)||!!(s._writableState&&s._writableState.autoDestroy);s.on("error",d=>{o===null&&(o=d)}),s.on("finish",()=>{c=!0,u||r(o)}),u&&s.on("close",()=>r(o||(c?null:DC)))}return s;function a(c,u,d,E){c.on("error",E),c.on("close",f);function f(){if(u&&c._readableState&&!c._readableState.ended||d&&c._writableState&&!c._writableState.ended)return E(DC)}}function l(c){if(!(!c||o)){o=c;for(let u of n)u.destroy(c)}}}function PCe(t){return t}function hX(t){return!!t._readableState||!!t._writableState}function tf(t){return typeof t._duplexState=="number"&&hX(t)}function xCe(t){return!!t._readableState&&t._readableState.ended}function vCe(t){return!!t._writableState&&t._writableState.ended}function MCe(t,e={}){let n=t._readableState&&t._readableState.error||t._writableState&&t._writableState.error;return!e.all&&n===dS?null:n}function UCe(t){return tf(t)&&t.readable}function BCe(t){return(t._duplexState&Di)!==Di||(t._duplexState&hS)!==0}function FCe(t){return typeof t=="object"&&t!==null&&typeof t.byteLength=="number"}function pX(t){return FCe(t)?t.byteLength:1024}function Qq(){}function HCe(){this.destroy(new Error("Stream aborted."))}function GCe(t){return t._writev!==cS.prototype._writev&&t._writev!==ef.prototype._writev}TX.exports={pipeline:EX,pipelinePromise:DCe,isStream:hX,isStreamx:tf,isEnded:xCe,isFinished:vCe,isDisturbed:BCe,getStreamError:MCe,Stream:Zd,Writable:cS,Readable:lS,Duplex:ef,Transform:uS,PassThrough:FC}});var jC=O(Ic=>{var Ye=Tc(),$Ce="0000000000000000000",WCe="7777777777777777777",pS=48,SX=Ye.from([117,115,116,97,114,0]),kCe=Ye.from([pS,pS]),YCe=Ye.from([117,115,116,97,114,32]),VCe=Ye.from([32,0]),qCe=4095,af=257,zC=263;Ic.decodeLongPath=function(e,n){return gc(e,0,e.length,n)};Ic.encodePax=function(e){let n="";e.name&&(n+=XC(" path="+e.name+`
`)),e.linkname&&(n+=XC(" linkpath="+e.linkname+`
`));let r=e.pax;if(r)for(let i in r)n+=XC(" "+i+"="+r[i]+`
`);return Ye.from(n)};Ic.decodePax=function(e){let n={};for(;e.length;){let r=0;for(;r<e.length&&e[r]!==32;)r++;let i=parseInt(Ye.toString(e.subarray(0,r)),10);if(!i)return n;let s=Ye.toString(e.subarray(r+1,i-1)),o=s.indexOf("=");if(o===-1)return n;n[s.slice(0,o)]=s.slice(o+1),e=e.subarray(i)}return n};Ic.encode=function(e){let n=Ye.alloc(512),r=e.name,i="";if(e.typeflag===5&&r[r.length-1]!=="/"&&(r+="/"),Ye.byteLength(r)!==r.length)return null;for(;Ye.byteLength(r)>100;){let s=r.indexOf("/");if(s===-1)return null;i+=i?"/"+r.slice(0,s):r.slice(0,s),r=r.slice(s+1)}return Ye.byteLength(r)>100||Ye.byteLength(i)>155||e.linkname&&Ye.byteLength(e.linkname)>100?null:(Ye.write(n,r),Ye.write(n,oo(e.mode&qCe,6),100),Ye.write(n,oo(e.uid,6),108),Ye.write(n,oo(e.gid,6),116),ZCe(e.size,n,124),Ye.write(n,oo(e.mtime.getTime()/1e3|0,11),136),n[156]=pS+JCe(e.type),e.linkname&&Ye.write(n,e.linkname,157),Ye.copy(SX,n,af),Ye.copy(kCe,n,zC),e.uname&&Ye.write(n,e.uname,265),e.gname&&Ye.write(n,e.gname,297),Ye.write(n,oo(e.devmajor||0,6),329),Ye.write(n,oo(e.devminor||0,6),337),i&&Ye.write(n,i,345),Ye.write(n,oo(AX(n),6),148),n)};Ic.decode=function(e,n,r){let i=e[156]===0?0:e[156]-pS,s=gc(e,0,100,n),o=so(e,100,8),a=so(e,108,8),l=so(e,116,8),c=so(e,124,12),u=so(e,136,12),d=KCe(i),E=e[157]===0?null:gc(e,157,100,n),f=gc(e,265,32),p=gc(e,297,32),h=so(e,329,8),T=so(e,337,8),S=AX(e);if(S===256)return null;if(S!==so(e,148,8))throw new Error("Invalid tar header. Maybe the tar is corrupted or it needs to be gunzipped?");if(XCe(e))e[345]&&(s=gc(e,345,155,n)+"/"+s);else if(!zCe(e)){if(!r)throw new Error("Invalid tar header: unknown format.")}return i===0&&s&&s[s.length-1]==="/"&&(i=5),{name:s,mode:o,uid:a,gid:l,size:c,mtime:new Date(1e3*u),type:d,linkname:E,uname:f,gname:p,devmajor:h,devminor:T,pax:null}};function XCe(t){return Ye.equals(SX,t.subarray(af,af+6))}function zCe(t){return Ye.equals(YCe,t.subarray(af,af+6))&&Ye.equals(VCe,t.subarray(zC,zC+2))}function jCe(t,e,n){return typeof t!="number"?n:(t=~~t,t>=e?e:t>=0||(t+=e,t>=0)?t:0)}function KCe(t){switch(t){case 0:return"file";case 1:return"link";case 2:return"symlink";case 3:return"character-device";case 4:return"block-device";case 5:return"directory";case 6:return"fifo";case 7:return"contiguous-file";case 72:return"pax-header";case 55:return"pax-global-header";case 27:return"gnu-long-link-path";case 28:case 30:return"gnu-long-path"}return null}function JCe(t){switch(t){case"file":return 0;case"link":return 1;case"symlink":return 2;case"character-device":return 3;case"block-device":return 4;case"directory":return 5;case"fifo":return 6;case"contiguous-file":return 7;case"pax-header":return 72}return 0}function RX(t,e,n,r){for(;n<r;n++)if(t[n]===e)return n;return r}function AX(t){let e=256;for(let n=0;n<148;n++)e+=t[n];for(let n=156;n<512;n++)e+=t[n];return e}function oo(t,e){return t=t.toString(8),t.length>e?WCe.slice(0,e)+" ":$Ce.slice(0,e-t.length)+t+" "}function QCe(t,e,n){e[n]=128;for(let r=11;r>0;r--)e[n+r]=t&255,t=Math.floor(t/256)}function ZCe(t,e,n){t.toString(8).length>11?QCe(t,e,n):Ye.write(e,oo(t,11),n)}function ebe(t){let e;if(t[0]===128)e=!0;else if(t[0]===255)e=!1;else return null;let n=[],r;for(r=t.length-1;r>0;r--){let o=t[r];e?n.push(o):n.push(255-o)}let i=0,s=n.length;for(r=0;r<s;r++)i+=n[r]*Math.pow(256,r);return e?i:-1*i}function so(t,e,n){if(t=t.subarray(e,e+n),e=0,t[e]&128)return ebe(t);{for(;e<t.length&&t[e]===32;)e++;let r=jCe(RX(t,32,e,t.length),t.length,t.length);for(;e<r&&t[e]===0;)e++;return r===e?0:parseInt(Ye.toString(t.subarray(e,r)),8)}}function gc(t,e,n,r){return Ye.toString(t.subarray(e,RX(t,0,e,e+n)),r)}function XC(t){let e=Ye.byteLength(t),n=Math.floor(Math.log(e)/Math.log(10))+1;return e+n>=Math.pow(10,n)&&n++,e+n+t}});var NX=O((GBe,_X)=>{var{Writable:tbe,Readable:nbe,getStreamError:mX}=qC(),rbe=LC(),gX=Tc(),_c=jC(),ibe=gX.alloc(0),JC=class{constructor(){this.buffered=0,this.shifted=0,this.queue=new rbe,this._offset=0}push(e){this.buffered+=e.byteLength,this.queue.push(e)}shiftFirst(e){return this._buffered===0?null:this._next(e)}shift(e){if(e>this.buffered)return null;if(e===0)return ibe;let n=this._next(e);if(e===n.byteLength)return n;let r=[n];for(;(e-=n.byteLength)>0;)n=this._next(e),r.push(n);return gX.concat(r)}_next(e){let n=this.queue.peek(),r=n.byteLength-this._offset;if(e>=r){let i=this._offset?n.subarray(this._offset,n.byteLength):n;return this.queue.shift(),this._offset=0,this.buffered-=r,this.shifted+=r,i}return this.buffered-=e,this.shifted+=e,n.subarray(this._offset,this._offset+=e)}},QC=class extends nbe{constructor(e,n,r){super(),this.header=n,this.offset=r,this._parent=e}_read(e){this.header.size===0&&this.push(null),this._parent._stream===this&&this._parent._update(),e(null)}_predestroy(){this._parent.destroy(mX(this))}_detach(){this._parent._stream===this&&(this._parent._stream=null,this._parent._missing=IX(this.header.size),this._parent._update())}_destroy(e){this._detach(),e(null)}},ZC=class extends tbe{constructor(e){super(e),e||(e={}),this._buffer=new JC,this._offset=0,this._header=null,this._stream=null,this._missing=0,this._longHeader=!1,this._callback=KC,this._locked=!1,this._finished=!1,this._pax=null,this._paxGlobal=null,this._gnuLongPath=null,this._gnuLongLinkPath=null,this._filenameEncoding=e.filenameEncoding||"utf-8",this._allowUnknownFormat=!!e.allowUnknownFormat,this._unlockBound=this._unlock.bind(this)}_unlock(e){if(this._locked=!1,e){this.destroy(e),this._continueWrite(e);return}this._update()}_consumeHeader(){if(this._locked)return!1;this._offset=this._buffer.shifted;try{this._header=_c.decode(this._buffer.shift(512),this._filenameEncoding,this._allowUnknownFormat)}catch(e){return this._continueWrite(e),!1}if(!this._header)return!0;switch(this._header.type){case"gnu-long-path":case"gnu-long-link-path":case"pax-global-header":case"pax-header":return this._longHeader=!0,this._missing=this._header.size,!0}return this._locked=!0,this._applyLongHeaders(),this._header.size===0||this._header.type==="directory"?(this.emit("entry",this._header,this._createStream(),this._unlockBound),!0):(this._stream=this._createStream(),this._missing=this._header.size,this.emit("entry",this._header,this._stream,this._unlockBound),!0)}_applyLongHeaders(){this._gnuLongPath&&(this._header.name=this._gnuLongPath,this._gnuLongPath=null),this._gnuLongLinkPath&&(this._header.linkname=this._gnuLongLinkPath,this._gnuLongLinkPath=null),this._pax&&(this._pax.path&&(this._header.name=this._pax.path),this._pax.linkpath&&(this._header.linkname=this._pax.linkpath),this._pax.size&&(this._header.size=parseInt(this._pax.size,10)),this._header.pax=this._pax,this._pax=null)}_decodeLongHeader(e){switch(this._header.type){case"gnu-long-path":this._gnuLongPath=_c.decodeLongPath(e,this._filenameEncoding);break;case"gnu-long-link-path":this._gnuLongLinkPath=_c.decodeLongPath(e,this._filenameEncoding);break;case"pax-global-header":this._paxGlobal=_c.decodePax(e);break;case"pax-header":this._pax=this._paxGlobal===null?_c.decodePax(e):Object.assign({},this._paxGlobal,_c.decodePax(e));break}}_consumeLongHeader(){this._longHeader=!1,this._missing=IX(this._header.size);let e=this._buffer.shift(this._header.size);try{this._decodeLongHeader(e)}catch(n){return this._continueWrite(n),!1}return!0}_consumeStream(){let e=this._buffer.shiftFirst(this._missing);if(e===null)return!1;this._missing-=e.byteLength;let n=this._stream.push(e);return this._missing===0?(this._stream.push(null),n&&this._stream._detach(),n&&this._locked===!1):n}_createStream(){return new QC(this,this._header,this._offset)}_update(){for(;this._buffer.buffered>0&&!this.destroying;){if(this._missing>0){if(this._stream!==null){if(this._consumeStream()===!1)return;continue}if(this._longHeader===!0){if(this._missing>this._buffer.buffered)break;if(this._consumeLongHeader()===!1)return!1;continue}let e=this._buffer.shiftFirst(this._missing);e!==null&&(this._missing-=e.byteLength);continue}if(this._buffer.buffered<512)break;if(this._stream!==null||this._consumeHeader()===!1)return}this._continueWrite(null)}_continueWrite(e){let n=this._callback;this._callback=KC,n(e)}_write(e,n){this._callback=n,this._buffer.push(e),this._update()}_final(e){this._finished=this._missing===0&&this._buffer.buffered===0,e(this._finished?null:new Error("Unexpected end of data"))}_predestroy(){this._continueWrite(null)}_destroy(e){this._stream&&this._stream.destroy(mX(this)),e(null)}[Symbol.asyncIterator](){let e=null,n=null,r=null,i=null,s=null,o=this;return this.on("entry",c),this.on("error",E=>{e=E}),this.on("close",u),{[Symbol.asyncIterator](){return this},next(){return new Promise(l)},return(){return d(null)},throw(E){return d(E)}};function a(E){if(!s)return;let f=s;s=null,f(E)}function l(E,f){if(e)return f(e);if(i){E({value:i,done:!1}),i=null;return}n=E,r=f,a(null),o._finished&&n&&(n({value:void 0,done:!0}),n=r=null)}function c(E,f,p){s=p,f.on("error",KC),n?(n({value:f,done:!1}),n=r=null):i=f}function u(){a(e),n&&(e?r(e):n({value:void 0,done:!0}),n=r=null)}function d(E){return o.destroy(E),a(E),new Promise((f,p)=>{if(o.destroyed)return f({value:void 0,done:!0});o.once("close",function(){E?p(E):f({value:void 0,done:!0})})})}}};_X.exports=function(e){return new ZC(e)};function KC(){}function IX(t){return t&=511,t&&512-t}});var CX=O(($Be,eb)=>{var OX={S_IFMT:61440,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960};try{eb.exports=require("fs").constants||OX}catch{eb.exports=OX}});var DX=O((WBe,LX)=>{var{Readable:sbe,Writable:obe,getStreamError:bX}=qC(),Na=Tc(),Nc=CX(),TS=jC(),abe=493,lbe=420,yX=Na.alloc(1024),nb=class extends obe{constructor(e,n,r){super({mapWritable:ube,eagerOpen:!0}),this.written=0,this.header=n,this._callback=r,this._linkname=null,this._isLinkname=n.type==="symlink"&&!n.linkname,this._isVoid=n.type!=="file"&&n.type!=="contiguous-file",this._finished=!1,this._pack=e,this._openCallback=null,this._pack._stream===null?this._pack._stream=this:this._pack._pending.push(this)}_open(e){this._openCallback=e,this._pack._stream===this&&this._continueOpen()}_continuePack(e){if(this._callback===null)return;let n=this._callback;this._callback=null,n(e)}_continueOpen(){this._pack._stream===null&&(this._pack._stream=this);let e=this._openCallback;if(this._openCallback=null,e!==null){if(this._pack.destroying)return e(new Error("pack stream destroyed"));if(this._pack._finalized)return e(new Error("pack stream is already finalized"));this._pack._stream=this,this._isLinkname||this._pack._encode(this.header),this._isVoid&&(this._finish(),this._continuePack(null)),e(null)}}_write(e,n){if(this._isLinkname)return this._linkname=this._linkname?Na.concat([this._linkname,e]):e,n(null);if(this._isVoid)return e.byteLength>0?n(new Error("No body allowed for this entry")):n();if(this.written+=e.byteLength,this._pack.push(e))return n();this._pack._drain=n}_finish(){this._finished||(this._finished=!0,this._isLinkname&&(this.header.linkname=this._linkname?Na.toString(this._linkname,"utf-8"):"",this._pack._encode(this.header)),wX(this._pack,this.header.size),this._pack._done(this))}_final(e){if(this.written!==this.header.size)return e(new Error("Size mismatch"));this._finish(),e(null)}_getError(){return bX(this)||new Error("tar entry destroyed")}_predestroy(){this._pack.destroy(this._getError())}_destroy(e){this._pack._done(this),this._continuePack(this._finished?null:this._getError()),e()}},rb=class extends sbe{constructor(e){super(e),this._drain=tb,this._finalized=!1,this._finalizing=!1,this._pending=[],this._stream=null}entry(e,n,r){if(this._finalized||this.destroying)throw new Error("already finalized or destroyed");typeof n=="function"&&(r=n,n=null),r||(r=tb),(!e.size||e.type==="symlink")&&(e.size=0),e.type||(e.type=cbe(e.mode)),e.mode||(e.mode=e.type==="directory"?abe:lbe),e.uid||(e.uid=0),e.gid||(e.gid=0),e.mtime||(e.mtime=new Date),typeof n=="string"&&(n=Na.from(n));let i=new nb(this,e,r);return Na.isBuffer(n)?(e.size=n.byteLength,i.write(n),i.end(),i):(i._isVoid,i)}finalize(){if(this._stream||this._pending.length>0){this._finalizing=!0;return}this._finalized||(this._finalized=!0,this.push(yX),this.push(null))}_done(e){e===this._stream&&(this._stream=null,this._finalizing&&this.finalize(),this._pending.length&&this._pending.shift()._continueOpen())}_encode(e){if(!e.pax){let n=TS.encode(e);if(n){this.push(n);return}}this._encodePax(e)}_encodePax(e){let n=TS.encodePax({name:e.name,linkname:e.linkname,pax:e.pax}),r={name:"PaxHeader",mode:e.mode,uid:e.uid,gid:e.gid,size:n.byteLength,mtime:e.mtime,type:"pax-header",linkname:e.linkname&&"PaxHeader",uname:e.uname,gname:e.gname,devmajor:e.devmajor,devminor:e.devminor};this.push(TS.encode(r)),this.push(n),wX(this,n.byteLength),r.size=e.size,r.type=e.type,this.push(TS.encode(r))}_doDrain(){let e=this._drain;this._drain=tb,e()}_predestroy(){let e=bX(this);for(this._stream&&this._stream.destroy(e);this._pending.length;){let n=this._pending.shift();n.destroy(e),n._continueOpen()}this._doDrain()}_read(e){this._doDrain(),e()}};LX.exports=function(e){return new rb(e)};function cbe(t){switch(t&Nc.S_IFMT){case Nc.S_IFBLK:return"block-device";case Nc.S_IFCHR:return"character-device";case Nc.S_IFDIR:return"directory";case Nc.S_IFIFO:return"fifo";case Nc.S_IFLNK:return"symlink"}return"file"}function tb(){}function wX(t,e){e&=511,e&&t.push(yX.subarray(0,512-e))}function ube(t){return Na.isBuffer(t)?t:Na.from(t)}});var PX=O(ib=>{ib.extract=NX();ib.pack=DX()});var MX=O((YBe,vX)=>{var dbe=require("zlib"),fbe=PX(),xX=Pl(),Ss=function(t){if(!(this instanceof Ss))return new Ss(t);t=this.options=xX.defaults(t,{gzip:!1}),typeof t.gzipOptions!="object"&&(t.gzipOptions={}),this.supports={directory:!0,symlink:!0},this.engine=fbe.pack(t),this.compressor=!1,t.gzip&&(this.compressor=dbe.createGzip(t.gzipOptions),this.compressor.on("error",this._onCompressorError.bind(this)))};Ss.prototype._onCompressorError=function(t){this.engine.emit("error",t)};Ss.prototype.append=function(t,e,n){var r=this;e.mtime=e.date;function i(o,a){if(o){n(o);return}r.engine.entry(e,a,function(l){n(l,e)})}if(e.sourceType==="buffer")i(null,t);else if(e.sourceType==="stream"&&e.stats){e.size=e.stats.size;var s=r.engine.entry(e,function(o){n(o,e)});t.pipe(s)}else e.sourceType==="stream"&&xX.collectStream(t,i)};Ss.prototype.finalize=function(){this.engine.finalize()};Ss.prototype.on=function(){return this.engine.on.apply(this.engine,arguments)};Ss.prototype.pipe=function(t,e){return this.compressor?this.engine.pipe.apply(this.engine,[this.compressor]).pipe(t,e):this.engine.pipe.apply(this.engine,arguments)};Ss.prototype.unpipe=function(){return this.compressor?this.compressor.unpipe.apply(this.compressor,arguments):this.engine.unpipe.apply(this.engine,arguments)};vX.exports=Ss});var FX=O((VBe,BX)=>{"use strict";function Ebe(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var hbe=new Int32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]);function UX(t){if(Buffer.isBuffer(t))return t;if(typeof t=="number")return Buffer.alloc(t);if(typeof t=="string")return Buffer.from(t);throw new Error("input must be buffer, number, or string, received "+typeof t)}function pbe(t){let e=UX(4);return e.writeInt32BE(t,0),e}function sb(t,e){t=UX(t),Buffer.isBuffer(e)&&(e=e.readUInt32BE(0));let n=~~e^-1;for(var r=0;r<t.length;r++)n=hbe[(n^t[r])&255]^n>>>8;return n^-1}function ob(){return pbe(sb.apply(null,arguments))}ob.signed=function(){return sb.apply(null,arguments)};ob.unsigned=function(){return sb.apply(null,arguments)>>>0};var Tbe=ob,Sbe=Ebe(Tbe);BX.exports=Sbe});var WX=O((qBe,$X)=>{var Rbe=require("util").inherits,HX=z_().Transform,Abe=FX(),GX=Pl(),ao=function(t){if(!(this instanceof ao))return new ao(t);t=this.options=GX.defaults(t,{}),HX.call(this,t),this.supports={directory:!0,symlink:!0},this.files=[]};Rbe(ao,HX);ao.prototype._transform=function(t,e,n){n(null,t)};ao.prototype._writeStringified=function(){var t=JSON.stringify(this.files);this.write(t)};ao.prototype.append=function(t,e,n){var r=this;e.crc32=0;function i(s,o){if(s){n(s);return}e.size=o.length||0,e.crc32=Abe.unsigned(o),r.files.push(e),n(null,e)}e.sourceType==="buffer"?i(null,t):e.sourceType==="stream"&&GX.collectStream(t,i)};ao.prototype.finalize=function(){this._writeStringified(),this.end()};$X.exports=ao});var ab=O((XBe,kX)=>{var mbe=O$(),lf={},lo=function(t,e){return lo.create(t,e)};lo.create=function(t,e){if(lf[t]){var n=new mbe(t,e);return n.setFormat(t),n.setModule(new lf[t](e)),n}else throw new Error("create("+t+"): format not registered")};lo.registerFormat=function(t,e){if(lf[t])throw new Error("register("+t+"): format already registered");if(typeof e!="function")throw new Error("register("+t+"): format module invalid");if(typeof e.prototype.append!="function"||typeof e.prototype.finalize!="function")throw new Error("register("+t+"): format module missing methods");lf[t]=e};lo.isRegisteredFormat=function(t){return!!lf[t]};lo.registerFormat("zip",vq());lo.registerFormat("tar",MX());lo.registerFormat("json",WX());kX.exports=lo});var Oa,Rs,lb=W(()=>{"use strict";Oa=require("buffer"),Rs=class{constructor(e=65536){this.chunkSize=e,this.chunks=[],this.currentBuffer=Oa.Buffer.alloc(e),this.cursor=0}ensureCapacity(e){this.cursor+e>this.chunkSize&&this._flush()}_ensureCapacity(e){this.ensureCapacity(e)}_flush(){this.cursor>0&&(this.chunks.push(this.currentBuffer.subarray(0,this.cursor)),this.currentBuffer=Oa.Buffer.alloc(this.chunkSize),this.cursor=0)}write(e){let n=e.length,r=0;for(;n>0;){let i=this.chunkSize-this.cursor;i===0&&(this._flush(),i=this.chunkSize);let s=Math.min(n,i);e.copy(this.currentBuffer,this.cursor,r,r+s),this.cursor+=s,r+=s,n-=s}}writeByte(e){this._ensureCapacity(1),this.currentBuffer[this.cursor]=e,this.cursor++}writeUnsafeByte(e){this.currentBuffer[this.cursor++]=e}writeInt32LE(e){this._ensureCapacity(4),this.currentBuffer.writeInt32LE(e,this.cursor),this.cursor+=4}writeUnsafeInt32LE(e){this.currentBuffer.writeInt32LE(e,this.cursor),this.cursor+=4}writeDoubleLE(e){this._ensureCapacity(8),this.currentBuffer.writeDoubleLE(e,this.cursor),this.cursor+=8}writeUnsafeDoubleLE(e){this.currentBuffer.writeDoubleLE(e,this.cursor),this.cursor+=8}writeString(e){let n=Oa.Buffer.byteLength(e,"utf8");if(this.cursor+n<=this.chunkSize){this.cursor+=this.currentBuffer.write(e,this.cursor,"utf8");return}this._flush(),n>this.chunkSize?this.chunks.push(Oa.Buffer.from(e,"utf8")):this.cursor+=this.currentBuffer.write(e,this.cursor,"utf8")}writeUtf16LE(e){let n=e.length*2;if(this.cursor+n<=this.chunkSize){for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);this.currentBuffer[this.cursor++]=i&255,this.currentBuffer[this.cursor++]=i>>8&255}return}if(this._flush(),n>this.chunkSize)this.chunks.push(Oa.Buffer.from(e,"utf16le"));else for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);this.currentBuffer[this.cursor++]=i&255,this.currentBuffer[this.cursor++]=i>>8&255}}getChunks(){return this.cursor>0&&(this.chunks.push(this.currentBuffer.subarray(0,this.cursor)),this.currentBuffer=Oa.Buffer.alloc(this.chunkSize),this.cursor=0),this.chunks}reset(){this.chunks=[],this.cursor=0}}});var qX={};pt(qX,{XlsbWriter:()=>RS,default:()=>Ibe});var YX,VX,SS,gbe,RS,Ibe,XX=W(()=>{"use strict";YX=Q(require("fs")),VX=Q(ab()),SS=require("stream");lb();gbe=/[\\/*?[\]:]/g,RS=class{constructor(e){this.sheetCount=0;this.sheetList=[];this.sstDic=new Map;this.sstCntUnique=0;this.sstCntAll=0;this.colWidths=[];this._autofilterIsOn=!1;this.currentSheetBuffer=null;this.currentSheetRowNum=0;this.currentSheetStartCol=0;this.currentSheetEndCol=0;this.currentSheetDoAutofilter=!1;this.isStreaming=!1;this.filePath=e,this.output=YX.createWriteStream(e),this.archive=(0,VX.default)("zip"),this.archive.pipe(this.output),this._oaEpoch=Date.UTC(1899,11,30),this._sheet1Bytes=Buffer.from([129,1,0,147,1,23,203,4,2,0,64,0,0,0,0,0,0,255,255,255,255,255,255,255,255,0,0,0,0,148,1,16,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,133,1,0,137,1,30,220,3,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,100,0,0,0,0,0,0,0,0,0,0,0,152,1,36,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,1,0,134,1,0,37,6,1,0,2,14,0,128,149,8,2,5,0,38,0,229,3,12,255,255,255,255,8,0,44,1,0,0,0,0,145,1,0,37,6,1,0,2,14,0,128,128,8,2,5,0,38,0,0,25,0,0,0,0,0,0,0,0,44,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,7,12,0,0,0,0,0,0,0,0,0,0,0,0,146,1,0,151,4,66,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,221,3,2,16,0,220,3,48,102,102,102,102,102,102,230,63,102,102,102,102,102,102,230,63,0,0,0,0,0,0,232,63,0,0,0,0,0,0,232,63,51,51,51,51,51,51,211,63,51,51,51,51,51,51,211,63,37,6,1,0,0,16,0,128,128,24,16,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,38,0,130,1,0]),this._workbookBinStart=Buffer.from([131,1,0,128,1,50,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,120,0,108,0,1,0,0,0,55,0,1,0,0,0,54,0,5,0,0,0,50,0,52,0,51,0,50,0,54,0,153,1,12,32,0,1,0,0,0,0,0,0,0,0,0,37,6,1,0,3,15,0,128,151,16,52,24,0,0,0,67,0,58,0,92,0,115,0,113,0,108,0,115,0,92,0,84,0,101,0,115,0,116,0,121,0,90,0,97,0,112,0,105,0,115,0,117,0,88,0,108,0,115,0,98,0,92,0,38,0,37,6,1,0,0,16,0,128,129,24,130,1,0,0,0,0,0,0,0,0,47,0,0,0,49,0,51,0,95,0,110,0,99,0,114,0,58,0,49,0,95,0,123,0,49,0,54,0,53,0,48,0,56,0,68,0,54,0,57,0,45,0,67,0,70,0,56,0,55,0,45,0,52,0,55,0,54,0,57,0,45,0,56,0,52,0,53,0,54,0,45,0,68,0,52,0,65,0,52,0,48,0,49,0,49,0,51,0,49,0,53,0,54,0,55,0,125,0,47,0,0,0,47,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,38,0,135,1,0,37,6,1,0,2,16,0,128,128,24,16,0,0,0,0,13,0,0,0,255,255,255,255,0,0,0,0,38,0,158,1,29,0,0,0,0,158,22,0,0,180,105,0,0,232,38,0,0,88,2,0,0,0,0,0,0,0,0,0,0,120,136,1,0,143,1,0]),this._workbookBinMiddle=Buffer.from([144,1,0]),this._workbookBinEnd=Buffer.from([157,1,26,53,234,2,0,1,0,0,0,100,0,0,0,252,169,241,210,77,98,80,63,1,0,0,0,106,0,155,1,1,0,35,4,3,15,0,0,171,16,1,1,36,0,132,1,0]),this._stylesBin=Buffer.from([150,2,0,231,4,4,2,0,0,0,44,44,164,0,19,0,0,0,121,0,121,0,121,0,121,0,92,0,45,0,109,0,109,0,92,0,45,0,100,0,100,0,92,0,32,0,104,0,104,0,58,0,109,0,109,0,44,30,166,0,12,0,0,0,121,0,121,0,121,0,121,0,92,0,45,0,109,0,109,0,92,0,45,0,100,0,100,0,232,4,0,227,4,4,1,0,0,0,43,39,220,0,0,0,144,1,0,0,0,2,0,0,7,1,0,0,0,0,0,255,2,7,0,0,0,67,0,97,0,108,0,105,0,98,0,114,0,105,0,43,39,220,0,1,0,188,2,0,0,0,2,238,0,7,1,0,0,0,0,0,255,2,7,0,0,0,67,0,97,0,108,0,105,0,98,0,114,0,105,0,37,6,1,0,2,14,0,128,129,8,0,38,0,228,4,0,219,4,4,2,0,0,0,45,68,0,0,0,0,3,64,0,0,0,0,0,255,3,65,0,0,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,45,68,17,0,0,0,3,64,0,0,0,0,0,255,3,65,0,0,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,220,4,0,229,4,4,1,0,0,0,46,51,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,230,4,0,242,4,4,1,0,0,0,47,16,255,255,0,0,0,0,0,0,0,0,0,0,16,16,0,0,243,4,0,233,4,4,4,0,0,0,47,16,0,0,0,0,0,0,0,0,0,0,0,0,16,16,0,0,47,16,0,0,164,0,0,0,0,0,0,0,0,0,16,16,1,0,47,16,0,0,166,0,0,0,0,0,0,0,0,0,16,16,1,0,47,16,0,0,0,1,1,0,0,0,0,0,0,0,16,16,0,0,234,4,0,235,4,4,1,0,0,0,37,6,1,0,2,17,0,128,128,24,16,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,38,0,48,28,0,0,0,0,1,0,0,0,8,0,0,0,78,0,111,0,114,0,109,0,97,0,108,0,110,0,121,0,236,4,0,249,3,4,0,0,0,0,250,3,0,252,3,80,0,0,0,0,17,0,0,0,84,0,97,0,98,0,108,0,101,0,83,0,116,0,121,0,108,0,101,0,77,0,101,0,100,0,105,0,117,0,109,0,50,0,17,0,0,0,80,0,105,0,118,0,111,0,116,0,83,0,116,0,121,0,108,0,101,0,76,0,105,0,103,0,104,0,116,0,49,0,54,0,253,3,0,35,4,2,14,0,0,235,8,0,246,8,42,0,0,0,0,17,0,0,0,83,0,108,0,105,0,99,0,101,0,114,0,83,0,116,0,121,0,108,0,101,0,76,0,105,0,103,0,104,0,116,0,49,0,247,8,0,236,8,0,36,0,35,4,3,15,0,0,176,16,0,178,16,50,0,0,0,0,21,0,0,0,84,0,105,0,109,0,101,0,83,0,108,0,105,0,99,0,101,0,114,0,83,0,116,0,121,0,108,0,101,0,76,0,105,0,103,0,104,0,116,0,49,0,179,16,0,177,16,0,36,0,151,2,0]),this._binaryIndexBin=Buffer.from([42,24,0,0,0,0,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,149,2,0]),this._rRkIntegerLowerLimit=-1<<29,this._rRkIntegerUpperLimit=(1<<29)-1,this._autoFilterStartBytes=Buffer.from([161,1,16]),this._autoFilterEndBytes=Buffer.from([162,1,0]),this._stickHeaderA1bytes=Buffer.from([151,1,29,0,0,0,0,0,0,0,0,0,0,0,0,0,0,240,63,1,0,0,0,0,0,0,0,2,0,0,0,3]),this._magicFilterExcel2016Fix0=Buffer.from([225,2,0,229,2,0,234,2]),this._magicFilterExcel2016Fix1=Buffer.from([39,70,33,0,0,0,0,255,0,0,0,15,0,0,0,95,0,70,0,105,0,108,0,116,0,101,0,114,0,68,0,97,0,116,0,97,0,98,0,97,0,115,0,101,0,15,0,0,0,59,255,0]),this._magicFilterExcel2016Fix2=Buffer.from([0,0,0,0,255,255,255,255])}_sanitizeSheetName(e){if(!e||typeof e!="string")return`Sheet${this.sheetCount+1}`;let n=e.replace(gbe,"_");return n.length>31&&(n=n.substring(0,31)),n.trim().length===0&&(n=`Sheet${this.sheetCount+1}`),n}addSheet(e,n=!1){let r=this._sanitizeSheetName(e);this.sheetCount++,this.sheetList.push({name:r,pathInArchive:`xl/worksheets/sheet${this.sheetCount}.bin`,hidden:n,nameInArchive:`sheet${this.sheetCount}.bin`,sheetId:this.sheetCount,filterHeaderRange:null})}startSheet(e,n,r,i={}){if(this.isStreaming)throw new Error("Already in streaming mode. Call endSheet() first.");let{hidden:s=!1,doAutofilter:o=!0}=i;this.addSheet(e,s),this.isStreaming=!0,this.currentSheetBuffer=new Rs,this.currentSheetRowNum=0,this.currentSheetStartCol=0,this.currentSheetEndCol=n,this.currentSheetDoAutofilter=o&&r!==void 0;let a=this.currentSheetBuffer;if(this.colWidths=new Array(n).fill(-1),r)for(let c=0;c<n;c++){let d=1.25*(r[c]?r[c].length:0)+2;d>80&&(d=80),this.colWidths[c]<d&&(this.colWidths[c]=d)}let l=Buffer.from(this._sheet1Bytes);l.writeInt32LE(this.currentSheetStartCol,40),l.writeInt32LE(this.currentSheetEndCol,44),this.sheetCount!==1&&(l[54]=156),a.write(l.subarray(0,84)),this.currentSheetDoAutofilter&&a.write(this._stickHeaderA1bytes),a.write(l.subarray(84,159)),a.writeByte(134),a.writeByte(3);for(let c=this.currentSheetStartCol;c<this.currentSheetEndCol;c++){a.writeByte(0),a.writeByte(60),a.writeByte(18),a.writeInt32LE(c),a.writeInt32LE(c);let u=this.colWidths[c]>0?Math.floor(this.colWidths[c]):10;a.writeByte(0),a.writeByte(Math.max(0,Math.min(255,u))),a.writeByte(0),a.writeByte(0),a.writeByte(0),a.writeByte(0),a.writeByte(0),a.writeByte(0),a.writeByte(2)}if(a.writeByte(0),a.writeByte(135),a.writeByte(3),a.writeByte(0),a.write(l.subarray(159,175)),a.write(Buffer.from([38,0])),r){this.createRowHeader(a,this.currentSheetRowNum,this.currentSheetStartCol,this.currentSheetEndCol);for(let c=0;c<r.length;c++)this.writeString(a,r[c],c,!0);this.currentSheetRowNum++}}writeRow(e){if(!this.isStreaming||!this.currentSheetBuffer)throw new Error("Not in streaming mode. Call startSheet() first.");if(e.length!==this.currentSheetEndCol-this.currentSheetStartCol)throw new Error(`Row length mismatch. Expected ${this.currentSheetEndCol-this.currentSheetStartCol} columns, got ${e.length}`);let n=this.currentSheetBuffer;this.createRowHeader(n,this.currentSheetRowNum,this.currentSheetStartCol,this.currentSheetEndCol);for(let r=0;r<e.length;r++){let i=e[r];i!=null&&(typeof i=="number"?Number.isInteger(i)?i>=this._rRkIntegerLowerLimit&&i<=this._rRkIntegerUpperLimit?this.writeRkNumberInteger(n,i,r):this.writeDouble(n,i,r):this.writeDouble(n,i,r):typeof i=="bigint"?this.writeString(n,i.toString(),r):typeof i=="boolean"?this.writeBool(n,i,r):i instanceof Date?this.writeDateTime(n,i,r):this.writeString(n,i.toString(),r))}this.currentSheetRowNum++}endSheet(){if(!this.isStreaming||!this.currentSheetBuffer)throw new Error("Not in streaming mode. Call startSheet() first.");let e=this.currentSheetBuffer,n=Buffer.from(this._sheet1Bytes);if(e.write(n.subarray(218,290)),this.currentSheetDoAutofilter){this._autofilterIsOn=!0;let r=this.currentSheetRowNum;e.write(this._autoFilterStartBytes);let i=Buffer.alloc(8);i.writeInt32LE(0,0),i.writeInt32LE(r-1,4),e.write(i);let s=Buffer.alloc(8);s.writeInt32LE(this.currentSheetStartCol,0),s.writeInt32LE(this.currentSheetEndCol-1,4),e.write(s),e.write(this._autoFilterEndBytes);let o=this.sheetList[this.sheetCount-1];o.filterData={startRow:0,endRow:this.currentSheetRowNum-1,startColumn:this.currentSheetStartCol,endColumn:this.currentSheetEndCol-1}}e.write(n.subarray(290)),this.archive.append(SS.Readable.from(e.getChunks()),{name:this.sheetList[this.sheetCount-1].pathInArchive}),this.isStreaming=!1,this.currentSheetBuffer=null,this.currentSheetRowNum=0,this.currentSheetStartCol=0,this.currentSheetEndCol=0,this.currentSheetDoAutofilter=!1}writeSheet(e,n=null,r=!0){let i=new Rs,s=0;if(e.length>0?s=e[0].length:n&&(s=n.length),this.colWidths=new Array(s).fill(-1),n)for(let u=0;u<s;u++){let E=1.25*(n[u]?n[u].length:0)+2;E>80&&(E=80),this.colWidths[u]<E&&(this.colWidths[u]=E)}for(let u=0;u<Math.min(e.length,100);u++){let d=e[u];for(let E=0;E<d.length;E++){let f=d[E],h=1.25*(f?f.toString().length:0)+2;h>80&&(h=80),this.colWidths[E]<h&&(this.colWidths[E]=h)}}let o=Buffer.from(this._sheet1Bytes),a=0,l=s;o.writeInt32LE(a,40),o.writeInt32LE(l,44),this.sheetCount!==1&&(o[54]=156),i.write(o.subarray(0,84)),r&&n&&i.write(this._stickHeaderA1bytes),i.write(o.subarray(84,159)),i.writeByte(134),i.writeByte(3);for(let u=a;u<l;u++){i.writeByte(0),i.writeByte(60),i.writeByte(18),i.writeInt32LE(u),i.writeInt32LE(u);let d=this.colWidths[u]>0?Math.floor(this.colWidths[u]):10;i.writeByte(0),i.writeByte(Math.max(0,Math.min(255,d))),i.writeByte(0),i.writeByte(0),i.writeByte(0),i.writeByte(0),i.writeByte(0),i.writeByte(0),i.writeByte(2)}i.writeByte(0),i.writeByte(135),i.writeByte(3),i.writeByte(0),i.write(o.subarray(159,175)),i.write(Buffer.from([38,0]));let c=0;if(n){this.createRowHeader(i,c,a,l);for(let u=0;u<n.length;u++)this.writeString(i,n[u],u,!0);c++}for(let u=0;u<e.length;u++){this.createRowHeader(i,c,a,l);let d=e[u];for(let E=0;E<d.length;E++){let f=d[E];f!=null&&(typeof f=="number"?Number.isInteger(f)?f>=this._rRkIntegerLowerLimit&&f<=this._rRkIntegerUpperLimit?this.writeRkNumberInteger(i,f,E):this.writeDouble(i,f,E):this.writeDouble(i,f,E):typeof f=="bigint"?this.writeString(i,f.toString(),E):typeof f=="boolean"?this.writeBool(i,f,E):f instanceof Date?this.writeDateTime(i,f,E):this.writeString(i,f.toString(),E))}c++}if(i.write(o.subarray(218,290)),r&&n){this._autofilterIsOn=!0;let u=e.length+1;i.write(this._autoFilterStartBytes);let d=Buffer.alloc(8);d.writeInt32LE(0,0),d.writeInt32LE(u-1,4),i.write(d);let E=Buffer.alloc(8);E.writeInt32LE(a,0),E.writeInt32LE(l-1,4),i.write(E),i.write(this._autoFilterEndBytes);let f=this.sheetList[this.sheetCount-1];f.filterData={startRow:0,endRow:e.length,startColumn:a,endColumn:l-1}}i.write(o.subarray(290)),this.archive.append(SS.Readable.from(i.getChunks()),{name:this.sheetList[this.sheetCount-1].pathInArchive})}_getColumnLetter(e){if(e<26)return String.fromCharCode(65+e);if(e<702){let n=Math.floor(e/26)-1,r=e%26;return String.fromCharCode(65+n)+String.fromCharCode(65+r)}return"A"}createRowHeader(e,n,r,i){e.ensureCapacity(27),e.writeUnsafeByte(0),e.writeUnsafeByte(25),e.writeUnsafeInt32LE(n),e.writeUnsafeInt32LE(0),e.writeUnsafeByte(44),e.writeUnsafeByte(1),e.writeUnsafeByte(0),e.writeUnsafeByte(0),e.writeUnsafeByte(0),e.writeUnsafeByte(1),e.writeUnsafeByte(0),e.writeUnsafeByte(0),e.writeUnsafeByte(0),e.writeUnsafeInt32LE(r),e.writeUnsafeInt32LE(i)}writeRkNumberInteger(e,n,r,i=0){e.ensureCapacity(14),e.writeUnsafeByte(2),e.writeUnsafeByte(12),e.writeUnsafeInt32LE(r),e.writeUnsafeByte(i),e.writeUnsafeByte(0),e.writeUnsafeByte(0),e.writeUnsafeByte(0);let s=n<<2|2;e.writeUnsafeInt32LE(s)}writeDouble(e,n,r,i=0){e.ensureCapacity(18),e.writeUnsafeByte(5),e.writeUnsafeByte(16),e.writeUnsafeInt32LE(r),e.writeUnsafeByte(i),e.writeUnsafeByte(0),e.writeUnsafeByte(0),e.writeUnsafeByte(0),e.writeUnsafeDoubleLE(n)}writeBool(e,n,r){e.ensureCapacity(13),e.writeUnsafeByte(4),e.writeUnsafeByte(9),e.writeUnsafeInt32LE(r),e.writeUnsafeInt32LE(0),e.writeUnsafeByte(n?1:0)}writeDateTime(e,n,r){let i=n.getTimezoneOffset()*6e4,s=(n.getTime()-i-this._oaEpoch)/864e5;this.writeDouble(e,s,r,1)}writeString(e,n,r,i=!1){let s;this.sstDic.has(n)?s=this.sstDic.get(n):(s=this.sstCntUnique,this.sstDic.set(n,s),this.sstCntUnique++),this.sstCntAll++,e.ensureCapacity(17),e.writeUnsafeByte(7),e.writeUnsafeByte(12),e.writeUnsafeInt32LE(r),e.writeUnsafeByte(i?3:0),e.writeUnsafeByte(0),e.writeUnsafeByte(0),e.writeUnsafeByte(0),e.writeUnsafeInt32LE(s)}saveSst(){let e=new Rs;e.writeByte(159),e.writeByte(1),e.writeByte(8),e.writeInt32LE(this.sstCntUnique),e.writeInt32LE(this.sstCntAll);for(let[n]of this.sstDic){let r=n.length;e.writeByte(19);let i=5+2*r;if(i>=128){e.writeByte(128+i%128);let s=i>>7;s>=256?e.writeByte(128+s%128):e.writeByte(s),e.writeByte(i>>14),i>>14>0&&e.writeByte(0)}else e.writeByte(i&255),e.writeByte(i>>8&255);e.writeInt32LE(r),e.writeUtf16LE(n)}e.writeByte(160),e.writeByte(1),e.writeByte(0),this.archive.append(SS.Readable.from(e.getChunks()),{name:"xl/sharedStrings.bin"})}_writeFilterDefinedName(e,n,r){let i=n.filterData,s=n.sheetId-1,o=Buffer.alloc(this._magicFilterExcel2016Fix1.length);this._magicFilterExcel2016Fix1.copy(o);let a=this._magicFilterExcel2016Fix1.length-2;o[7]=s,o[a]=r,e.push(o);let l=Buffer.alloc(8);l.writeInt32LE(i.startRow,0),l.writeInt32LE(i.endRow,4),e.push(l);let c=Buffer.alloc(4);c.writeInt16LE(i.startColumn,0),c.writeInt16LE(i.endColumn,2),e.push(c),e.push(this._magicFilterExcel2016Fix2)}finalize(){return new Promise((e,n)=>{try{this.saveSst(),this.archive.append(this._stylesBin,{name:"xl/styles.bin"});let r=[];r.push(this._workbookBinStart);for(let a of this.sheetList){let l=`rId${a.sheetId}`,c=16+a.name.length*2+l.length*2,u=Buffer.alloc(3+c);u[0]=156,u[1]=1,u[2]=c;let d=3;u.writeInt32LE(a.hidden?1:0,d),d+=4,u.writeInt32LE(a.sheetId,d),d+=4,u.writeInt32LE(l.length,d),d+=4;for(let E=0;E<l.length;E++){let f=l.charCodeAt(E);u[d++]=f&255,u[d++]=f>>8&255}u.writeInt32LE(a.name.length,d),d+=4;for(let E=0;E<a.name.length;E++){let f=a.name.charCodeAt(E);u[d++]=f&255,u[d++]=f>>8&255}r.push(u)}if(r.push(this._workbookBinMiddle),this._autofilterIsOn){let a=this.sheetList.filter(c=>c.filterData),l=a.length;if(l>0){r.push(this._magicFilterExcel2016Fix0);let c=16+(l-1)*12,u=Buffer.from([c,l,0,0,0]);r.push(u);for(let d=0;d<l;d++){let E=a[d].sheetId-1,f=Buffer.alloc(12);f.writeInt32LE(0,0),f[4]=E,f[8]=E,r.push(f)}r.push(Buffer.from([226,2,0]));for(let d=0;d<l;d++){let E=a[d];this._writeFilterDefinedName(r,E,d)}}}r.push(this._workbookBinEnd),this.archive.append(Buffer.concat(r),{name:"xl/workbook.bin"});for(let a of this.sheetList)this.archive.append(this._binaryIndexBin,{name:`xl/worksheets/binaryIndex${a.sheetId}.bin`});let i=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types">
<Default Extension="bin" ContentType="application/vnd.ms-excel.sheet.binary.macroEnabled.main"/>
<Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml"/>
<Default Extension="xml" ContentType="application/xml"/>`;for(let a of this.sheetList)i+=`<Override PartName="/${a.pathInArchive}" ContentType="application/vnd.ms-excel.worksheet"/>`,i+=`<Override PartName="/xl/worksheets/binaryIndex${a.sheetId}.bin" ContentType="application/vnd.ms-excel.binIndexWs"/>`;i+=`<Override PartName="/xl/styles.bin" ContentType="application/vnd.ms-excel.styles"/>
<Override PartName="/xl/sharedStrings.bin" ContentType="application/vnd.ms-excel.sharedStrings"/>
</Types>`,this.archive.append(i,{name:"[Content_Types].xml"});let s=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">`;for(let a of this.sheetList){let l=`rId${a.sheetId}`;s+=`<Relationship Id="${l}" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="worksheets/${a.nameInArchive}"/>`}s+=`<Relationship Id="rId${this.sheetList.length+2}" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Target="styles.bin"/>
<Relationship Id="rId${this.sheetList.length+3}" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings" Target="sharedStrings.bin"/>
</Relationships>`,this.archive.append(s,{name:"xl/_rels/workbook.bin.rels"}),this.archive.append(`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">
<Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.bin"/>
</Relationships>`,{name:"_rels/.rels"});for(let a of this.sheetList){let l=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">
<Relationship Id="rId1" Type="http://schemas.microsoft.com/office/2006/relationships/xlBinaryIndex" Target="binaryIndex${a.sheetId}.bin"/>
</Relationships>`;this.archive.append(l,{name:`xl/worksheets/_rels/${a.nameInArchive}.rels`})}this.output.on("close",()=>e()),this.archive.on("error",a=>n(a)),this.archive.finalize()}catch(r){n(r)}})}},Ibe=RS});var As={};pt(As,{copyFileToClipboard:()=>gS,exportCsvToXlsb:()=>Cbe,exportQueryToXlsb:()=>db,exportStructuredToXlsb:()=>bbe,getTempFilePath:()=>ybe});function ub(t){if(typeof t=="string"&&t.length>0){if(t.length>15||/^-?0\d+/.test(t))return t;if(/^-?\d+(\.\d+)?$/.test(t)){let e=parseFloat(t);if(Number.isFinite(e))return e}}return t}function _be(t){return t.map(ub)}async function db(t,e,n,r=!1,i,s,o){let a=null;try{if(o?.isCancellationRequested)throw new Error("Export cancelled by user");i&&i("Connecting to database...");let l={host:t.host,port:t.port||5480,database:t.database,user:t.user,password:t.password},c=yn();a=new c(l),await a.connect();let u=new cb(n),{SqlParser:d}=await Promise.resolve().then(()=>(mo(),B0)),E=d.splitStatements(e),f=0,p=0,h=!1;for(let A=0;A<E.length;A++){let I=E[A];if(!I.trim())continue;let w=E.length>1?`Result ${A+1}`:"Query Results";i&&i(`Executing query ${A+1}/${E.length}...`);try{let g=a.createCommand(I);s&&(g.commandTimeout=s);let L;o&&(L=o.onCancellationRequested(async()=>{h=!0,i&&i("Cancelling query...");try{await g.cancel()}catch(b){console.error("Error cancelling command:",b)}}));try{let b=await g.executeReader(),P=[],v=[],H=new Set(["INT8","INT2","INT4","NUMERIC","FLOAT4","FLOAT8"]);for(let J=0;J<b.fieldCount;J++){let Z=b.getName(J);P.push(Z);try{let M=b.getTypeName(J);v.push(H.has(M))}catch{v.push(!1)}}let $=P.length;p=Math.max(p,$),u.startSheet(w,$,P,{doAutofilter:!0});let j=0;try{for(;await b.read();){if(h||o?.isCancellationRequested){h=!0,i&&i(`Export cancelled - finalizing ${j.toLocaleString()} rows...`);break}let J=[];for(let Z=0;Z<b.fieldCount;Z++){let M=b.getValue(Z);v[Z]&&(M=ub(M)),J.push(M)}if(u.writeRow(J),j++,j%500===0&&(await new Promise(Z=>setImmediate(Z)),h)){i&&i(`Export cancelled - finalizing ${j.toLocaleString()} rows...`);break}j%1e4===0&&i&&i(`Streaming ${j.toLocaleString()} rows to "${w}"...`)}}catch(J){let Z=J instanceof Error?J.message:String(J);!h&&i&&i(`Read error after ${j} rows: ${Z}`)}if(u.endSheet(),f+=j,i){let J=h?"(cancelled)":"";i(`Written ${j.toLocaleString()} rows to sheet "${w}" ${J}`)}if(h)break}finally{L&&L.dispose()}}catch(g){let L=g instanceof Error?g.message:String(g);u.startSheet(`Error ${A+1}`,1,["Error"],{doAutofilter:!1}),u.writeRow([`Error executing query: ${L}`]),u.endSheet()}}let T=e.split(`
`);u.startSheet("SQL Code",1,void 0,{doAutofilter:!1}),u.writeRow(["SQL Query:"]);for(let A of T)u.writeRow([A]);u.endSheet(),i&&i("Finalizing file..."),await u.finalize();let m=AS.statSync(n).size/(1024*1024);i&&(i(h?"XLSB file created with partial data (export was cancelled)":"XLSB file created successfully"),i(`  - Total Rows: ${f.toLocaleString()}`),i(`  - File size: ${m.toFixed(1)} MB`),i(`  - Location: ${n}`));let R={success:!0,message:h?`Export cancelled - saved ${f} rows to ${n}`:`Successfully exported ${f} rows to ${n}`,details:{rows_exported:f,columns:p,file_size_mb:parseFloat(m.toFixed(1)),file_path:n}};if(r){i&&i("Copying to clipboard...");let A=await gS(n);R.details&&(R.details.clipboard_success=A)}return R}catch(l){return{success:!1,message:`Export error: ${l instanceof Error?l.message:String(l)}`}}finally{if(a)try{await a.close()}catch{}}}function Obe(t){return t?Nbe.has(t.toUpperCase()):!1}async function Cbe(t,e,n=!1,r={source:"Unknown"},i){try{i&&i("Initializing XLSB writer...");let s=new cb(e),o=0,a=0,l=[],c=(f,p)=>{let h=f.split(/\r?\n/),T=A=>{let I=[],w=0,g=!1;for(let b=0;b<A.length;b++)if(A[b]==='"')g=!g;else if(A[b]===","&&!g){let P=A.substring(w,b);P.startsWith('"')&&P.endsWith('"')&&(P=P.substring(1,P.length-1).replace(/""/g,'"')),I.push(P),w=b+1}let L=A.substring(w);return L.startsWith('"')&&L.endsWith('"')&&(L=L.substring(1,L.length-1).replace(/""/g,'"')),I.push(L),I},S=0;for(;S<h.length&&!h[S].trim();)S++;if(S>=h.length)return;let m=T(h[S]);if(m.length===0)return;a=Math.max(a,m.length),s.startSheet(p,m.length,m,{doAutofilter:!0});let R=0;for(let A=S+1;A<h.length;A++){let I=h[A];if(!I.trim())continue;let w=T(I);s.writeRow(_be(w)),R++}s.endSheet(),o+=R};Array.isArray(t)?(i&&i(`Processing ${t.length} result sets...`),t.forEach((f,p)=>{let h=f.name||`Result ${p+1}`;i&&i(`Processing sheet "${h}"...`),c(f.csv,h),f.sql&&l.push({name:h,sql:f.sql})})):(i&&i("Reading CSV content..."),c(t,"Query Results"),r.sql?l.push({name:"Query Results",sql:r.sql}):r.source&&(s.startSheet("CSV Source",1,void 0,{doAutofilter:!1}),s.writeRow(["CSV Source:"]),s.writeRow([r.source]),s.endSheet())),l.length>0&&(s.startSheet("SQL Code",1,void 0,{doAutofilter:!1}),l.forEach(f=>{s.writeRow([`--- SQL for ${f.name} ---`]),f.sql.split(`
`).forEach(p=>{s.writeRow([p])}),s.writeRow([""])}),s.endSheet()),i&&i("Finalizing XLSB file..."),await s.finalize();let d=AS.statSync(e).size/(1024*1024);i&&(i("XLSB file created successfully"),i(`  - Rows: ${o.toLocaleString()}`),i(`  - File size: ${d.toFixed(1)} MB`));let E={success:!0,message:`Successfully exported ${o} rows to ${e}`,details:{rows_exported:o,columns:a,file_size_mb:parseFloat(d.toFixed(1)),file_path:e}};if(n){i&&i("Copying file to clipboard...");let f=await gS(e);E.details&&(E.details.clipboard_success=f)}return E}catch(s){return{success:!1,message:`Export failed: ${s instanceof Error?s.message:String(s)}`}}}async function bbe(t,e,n=!1,r){try{r&&r("Initializing XLSB writer...");let i=new cb(e),s=0,o=0,a=[];for(let d of t){let E=d.name||"Sheet";r&&r(`Processing sheet "${E}"...`);let f=d.columns.map(h=>h.name),p=d.columns.map(h=>Obe(h.type));o=Math.max(o,f.length),i.startSheet(E,f.length,f,{doAutofilter:!0});for(let h of d.rows){let T=h.map((S,m)=>p[m]?ub(S):S);i.writeRow(T),s++}i.endSheet(),d.sql&&a.push({name:E,sql:d.sql})}a.length>0&&(i.startSheet("SQL Code",1,void 0,{doAutofilter:!1}),a.forEach(d=>{i.writeRow([`--- SQL for ${d.name} ---`]),d.sql.split(`
`).forEach(E=>{i.writeRow([E])}),i.writeRow([""])}),i.endSheet()),r&&r("Finalizing XLSB file..."),await i.finalize();let c=AS.statSync(e).size/(1024*1024);r&&(r("XLSB file created successfully"),r(`  - Rows: ${s.toLocaleString()}`),r(`  - File size: ${c.toFixed(1)} MB`));let u={success:!0,message:`Successfully exported ${s} rows to ${e}`,details:{rows_exported:s,columns:o,file_size_mb:parseFloat(c.toFixed(1)),file_path:e}};if(n){r&&r("Copying file to clipboard...");let d=await gS(e);u.details&&(u.details.clipboard_success=d)}return u}catch(i){return{success:!1,message:`Export failed: ${i instanceof Error?i.message:String(i)}`}}}async function gS(t){return mS.platform()!=="win32"?(console.error("Clipboard file copy is only supported on Windows"),!1):new Promise(e=>{try{let n=Oc.normalize(Oc.resolve(t)),r=`Set-Clipboard -Path "${n.replace(/"/g,'`"')}"`,i=(0,zX.spawn)("powershell.exe",["-NoProfile","-NonInteractive","-Command",r]),s="";i.stderr.on("data",o=>{s+=o.toString()}),i.on("close",o=>{o!==0?(console.error(`PowerShell clipboard copy failed: ${s}`),e(!1)):(console.log(`File copied to clipboard: ${n}`),e(!0))}),i.on("error",o=>{console.error(`Error spawning PowerShell: ${o.message}`),e(!1)})}catch(n){let r=n instanceof Error?n.message:String(n);console.error(`Error copying file to clipboard: ${r}`),e(!1)}})}function ybe(){let t=mS.tmpdir(),n=`netezza_export_${Date.now()}.xlsb`;return Oc.join(t,n)}var AS,Oc,mS,zX,cb,Nbe,xi=W(()=>{"use strict";AS=Q(require("fs")),Oc=Q(require("path")),mS=Q(require("os")),zX=require("child_process"),cb=(XX(),Wi(qX)).default;Nbe=new Set(["INT8","INT2","INT4","NUMERIC","FLOAT4","FLOAT8","INTEGER","BIGINT","SMALLINT","DECIMAL","REAL","DOUBLE PRECISION"])});var QX=O((eFe,JX)=>{JX.exports=_S;function _S(){this.pending=0,this.max=1/0,this.listeners=[],this.waiting=[],this.error=null}_S.prototype.go=function(t){this.pending<this.max?KX(this,t):this.waiting.push(t)};_S.prototype.wait=function(t){this.pending===0?t(this.error):this.listeners.push(t)};_S.prototype.hold=function(){return jX(this)};function jX(t){t.pending+=1;var e=!1;return n;function n(i){if(e)throw new Error("callback called twice");if(e=!0,t.error=t.error||i,t.pending-=1,t.waiting.length>0&&t.pending<t.max)KX(t,t.waiting.shift());else if(t.pending===0){var s=t.listeners;t.listeners=[],s.forEach(r)}}function r(i){i(t.error)}}function KX(t,e){e(jX(t))}});var ez=O(uf=>{var cf=require("fs"),NS=require("util"),hb=require("stream"),ZX=hb.Readable,pb=hb.Writable,wbe=hb.PassThrough,Lbe=QX(),OS=require("events").EventEmitter;uf.createFromBuffer=Dbe;uf.createFromFd=Pbe;uf.BufferSlicer=gs;uf.FdSlicer=ms;NS.inherits(ms,OS);function ms(t,e){e=e||{},OS.call(this),this.fd=t,this.pend=new Lbe,this.pend.max=1,this.refCount=0,this.autoClose=!!e.autoClose}ms.prototype.read=function(t,e,n,r,i){var s=this;s.pend.go(function(o){cf.read(s.fd,t,e,n,r,function(a,l,c){o(),i(a,l,c)})})};ms.prototype.write=function(t,e,n,r,i){var s=this;s.pend.go(function(o){cf.write(s.fd,t,e,n,r,function(a,l,c){o(),i(a,l,c)})})};ms.prototype.createReadStream=function(t){return new CS(this,t)};ms.prototype.createWriteStream=function(t){return new bS(this,t)};ms.prototype.ref=function(){this.refCount+=1};ms.prototype.unref=function(){var t=this;if(t.refCount-=1,t.refCount>0)return;if(t.refCount<0)throw new Error("invalid unref");t.autoClose&&cf.close(t.fd,e);function e(n){n?t.emit("error",n):t.emit("close")}};NS.inherits(CS,ZX);function CS(t,e){e=e||{},ZX.call(this,e),this.context=t,this.context.ref(),this.start=e.start||0,this.endOffset=e.end,this.pos=this.start,this.destroyed=!1}CS.prototype._read=function(t){var e=this;if(!e.destroyed){var n=Math.min(e._readableState.highWaterMark,t);if(e.endOffset!=null&&(n=Math.min(n,e.endOffset-e.pos)),n<=0){e.destroyed=!0,e.push(null),e.context.unref();return}e.context.pend.go(function(r){if(e.destroyed)return r();var i=Buffer.allocUnsafe(n);cf.read(e.context.fd,i,0,n,e.pos,function(s,o){s?e.destroy(s):o===0?(e.destroyed=!0,e.push(null),e.context.unref()):(e.pos+=o,e.push(i.slice(0,o))),r()})})}};CS.prototype.destroy=function(t){this.destroyed||(t=t||new Error("stream destroyed"),this.destroyed=!0,this.emit("error",t),this.context.unref())};NS.inherits(bS,pb);function bS(t,e){e=e||{},pb.call(this,e),this.context=t,this.context.ref(),this.start=e.start||0,this.endOffset=e.end==null?1/0:+e.end,this.bytesWritten=0,this.pos=this.start,this.destroyed=!1,this.on("finish",this.destroy.bind(this))}bS.prototype._write=function(t,e,n){var r=this;if(!r.destroyed){if(r.pos+t.length>r.endOffset){var i=new Error("maximum file length exceeded");i.code="ETOOBIG",r.destroy(),n(i);return}r.context.pend.go(function(s){if(r.destroyed)return s();cf.write(r.context.fd,t,0,t.length,r.pos,function(o,a){o?(r.destroy(),s(),n(o)):(r.bytesWritten+=a,r.pos+=a,r.emit("progress"),s(),n())})})}};bS.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.context.unref())};NS.inherits(gs,OS);function gs(t,e){OS.call(this),e=e||{},this.refCount=0,this.buffer=t,this.maxChunkSize=e.maxChunkSize||Number.MAX_SAFE_INTEGER}gs.prototype.read=function(t,e,n,r,i){if(!(0<=e&&e<=t.length))throw new RangeError("offset outside buffer: 0 <= "+e+" <= "+t.length);if(r<0)throw new RangeError("position is negative: "+r);if(e+n>t.length&&(n=t.length-e),r+n>this.buffer.length&&(n=this.buffer.length-r),n<=0){setImmediate(function(){i(null,0)});return}this.buffer.copy(t,e,r,r+n),setImmediate(function(){i(null,n)})};gs.prototype.write=function(t,e,n,r,i){t.copy(this.buffer,r,e,e+n),setImmediate(function(){i(null,n,t)})};gs.prototype.createReadStream=function(t){t=t||{};var e=new wbe(t);e.destroyed=!1,e.start=t.start||0,e.endOffset=t.end,e.pos=e.endOffset||this.buffer.length;for(var n=this.buffer.slice(e.start,e.pos),r=0;;){var i=r+this.maxChunkSize;if(i>=n.length){r<n.length&&e.write(n.slice(r,n.length));break}e.write(n.slice(r,i)),r=i}return e.end(),e.destroy=function(){e.destroyed=!0},e};gs.prototype.createWriteStream=function(t){var e=this;t=t||{};var n=new pb(t);return n.start=t.start||0,n.endOffset=t.end==null?this.buffer.length:+t.end,n.bytesWritten=0,n.pos=n.start,n.destroyed=!1,n._write=function(r,i,s){if(!n.destroyed){var o=n.pos+r.length;if(o>n.endOffset){var a=new Error("maximum file length exceeded");a.code="ETOOBIG",n.destroyed=!0,s(a);return}r.copy(e.buffer,n.pos,0,r.length),n.bytesWritten+=r.length,n.pos=o,n.emit("progress"),s()}},n.destroy=function(){n.destroyed=!0},n};gs.prototype.ref=function(){this.refCount+=1};gs.prototype.unref=function(){if(this.refCount-=1,this.refCount<0)throw new Error("invalid unref")};function Dbe(t,e){return new gs(t,e)}function Pbe(t,e){return new ms(t,e)}});var rz=O((nFe,nz)=>{var co=require("buffer").Buffer,Tb=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];typeof Int32Array<"u"&&(Tb=new Int32Array(Tb));function tz(t){if(co.isBuffer(t))return t;var e=typeof co.alloc=="function"&&typeof co.from=="function";if(typeof t=="number")return e?co.alloc(t):new co(t);if(typeof t=="string")return e?co.from(t):new co(t);throw new Error("input must be buffer, number, or string, received "+typeof t)}function xbe(t){var e=tz(4);return e.writeInt32BE(t,0),e}function Sb(t,e){t=tz(t),co.isBuffer(e)&&(e=e.readUInt32BE(0));for(var n=~~e^-1,r=0;r<t.length;r++)n=Tb[(n^t[r])&255]^n>>>8;return n^-1}function Rb(){return xbe(Sb.apply(null,arguments))}Rb.signed=function(){return Sb.apply(null,arguments)};Rb.unsigned=function(){return Sb.apply(null,arguments)>>>0};nz.exports=Rb});var Ez=O(ur=>{var Ab=require("fs"),vbe=require("zlib"),iz=ez(),Mbe=rz(),LS=require("util"),DS=require("events").EventEmitter,sz=require("stream").Transform,gb=require("stream").PassThrough,Ube=require("stream").Writable;ur.open=Bbe;ur.fromFd=oz;ur.fromBuffer=Fbe;ur.fromRandomAccessReader=Ib;ur.dosDateTimeToDate=cz;ur.getFileNameLowLevel=uz;ur.validateFileName=dz;ur.parseExtraFields=fz;ur.ZipFile=Mi;ur.Entry=df;ur.LocalFileHeader=lz;ur.RandomAccessReader=uo;function Bbe(t,e,n){typeof e=="function"&&(n=e,e=null),e==null&&(e={}),e.autoClose==null&&(e.autoClose=!0),e.lazyEntries==null&&(e.lazyEntries=!1),e.decodeStrings==null&&(e.decodeStrings=!0),e.validateEntrySizes==null&&(e.validateEntrySizes=!0),e.strictFileNames==null&&(e.strictFileNames=!1),n==null&&(n=wS),Ab.open(t,"r",function(r,i){if(r)return n(r);oz(i,e,function(s,o){s&&Ab.close(i,wS),n(s,o)})})}function oz(t,e,n){typeof e=="function"&&(n=e,e=null),e==null&&(e={}),e.autoClose==null&&(e.autoClose=!1),e.lazyEntries==null&&(e.lazyEntries=!1),e.decodeStrings==null&&(e.decodeStrings=!0),e.validateEntrySizes==null&&(e.validateEntrySizes=!0),e.strictFileNames==null&&(e.strictFileNames=!1),n==null&&(n=wS),Ab.fstat(t,function(r,i){if(r)return n(r);var s=iz.createFromFd(t,{autoClose:!0});Ib(s,i.size,e,n)})}function Fbe(t,e,n){typeof e=="function"&&(n=e,e=null),e==null&&(e={}),e.autoClose=!1,e.lazyEntries==null&&(e.lazyEntries=!1),e.decodeStrings==null&&(e.decodeStrings=!0),e.validateEntrySizes==null&&(e.validateEntrySizes=!0),e.strictFileNames==null&&(e.strictFileNames=!1);var r=iz.createFromBuffer(t,{maxChunkSize:65536});Ib(r,t.length,e,n)}function Ib(t,e,n,r){typeof n=="function"&&(r=n,n=null),n==null&&(n={}),n.autoClose==null&&(n.autoClose=!0),n.lazyEntries==null&&(n.lazyEntries=!1),n.decodeStrings==null&&(n.decodeStrings=!0);var i=!!n.decodeStrings;if(n.validateEntrySizes==null&&(n.validateEntrySizes=!0),n.strictFileNames==null&&(n.strictFileNames=!1),r==null&&(r=wS),typeof e!="number")throw new Error("expected totalSize parameter to be a number");if(e>Number.MAX_SAFE_INTEGER)throw new Error("zip file too large. only file sizes up to 2^52 are supported due to JavaScript's Number type being an IEEE 754 double.");t.ref();var s=22,o=20,a=65535,l=Math.min(o+s+a,e),c=Is(l),u=e-c.length;bc(t,c,0,l,u,function(d){if(d)return r(d);for(var E=l-s;E>=0;E-=1)if(c.readUInt32LE(E)===101010256){var f=c.subarray(E),p=f.readUInt16LE(4),h=f.readUInt16LE(10),T=f.readUInt32LE(16),S=f.readUInt16LE(20),m=f.length-s;if(S!==m)return r(new Error("Invalid comment length. Expected: "+m+". Found: "+S+". Are there extra bytes at the end of the file? Or is the end of central dir signature `PK\u263A\u263B` in the comment?"));var R=i?yS(f.subarray(22),!1):f.subarray(22);if(E-o>=0&&c.readUInt32LE(E-o)===117853008){var A=c.subarray(E-o,E-o+o),I=Cc(A,8),w=Is(56);return bc(t,w,0,w.length,I,function(g){return g?r(g):w.readUInt32LE(0)!==101075792?r(new Error("invalid zip64 end of central directory record signature")):(p=w.readUInt32LE(16),p!==0?r(new Error("multi-disk zip files are not supported: found disk number: "+p)):(h=Cc(w,32),T=Cc(w,48),r(null,new Mi(t,T,e,h,R,n.autoClose,n.lazyEntries,i,n.validateEntrySizes,n.strictFileNames))))})}return p!==0?r(new Error("multi-disk zip files are not supported: found disk number: "+p)):r(null,new Mi(t,T,e,h,R,n.autoClose,n.lazyEntries,i,n.validateEntrySizes,n.strictFileNames))}r(new Error("End of central directory record signature not found. Either not a zip file, or file is truncated."))})}LS.inherits(Mi,DS);function Mi(t,e,n,r,i,s,o,a,l,c){var u=this;DS.call(u),u.reader=t,u.reader.on("error",function(d){az(u,d)}),u.reader.once("close",function(){u.emit("close")}),u.readEntryCursor=e,u.fileSize=n,u.entryCount=r,u.comment=i,u.entriesRead=0,u.autoClose=!!s,u.lazyEntries=!!o,u.decodeStrings=!!a,u.validateEntrySizes=!!l,u.strictFileNames=!!c,u.isOpen=!0,u.emittedError=!1,u.lazyEntries||u._readEntry()}Mi.prototype.close=function(){this.isOpen&&(this.isOpen=!1,this.reader.unref())};function vi(t,e){t.autoClose&&t.close(),az(t,e)}function az(t,e){t.emittedError||(t.emittedError=!0,t.emit("error",e))}Mi.prototype.readEntry=function(){if(!this.lazyEntries)throw new Error("readEntry() called without lazyEntries:true");this._readEntry()};Mi.prototype._readEntry=function(){var t=this;if(t.entryCount===t.entriesRead){setImmediate(function(){t.autoClose&&t.close(),!t.emittedError&&t.emit("end")});return}if(!t.emittedError){var e=Is(46);bc(t.reader,e,0,e.length,t.readEntryCursor,function(n){if(n)return vi(t,n);if(!t.emittedError){var r=new df,i=e.readUInt32LE(0);if(i!==33639248)return vi(t,new Error("invalid central directory file header signature: 0x"+i.toString(16)));if(r.versionMadeBy=e.readUInt16LE(4),r.versionNeededToExtract=e.readUInt16LE(6),r.generalPurposeBitFlag=e.readUInt16LE(8),r.compressionMethod=e.readUInt16LE(10),r.lastModFileTime=e.readUInt16LE(12),r.lastModFileDate=e.readUInt16LE(14),r.crc32=e.readUInt32LE(16),r.compressedSize=e.readUInt32LE(20),r.uncompressedSize=e.readUInt32LE(24),r.fileNameLength=e.readUInt16LE(28),r.extraFieldLength=e.readUInt16LE(30),r.fileCommentLength=e.readUInt16LE(32),r.internalFileAttributes=e.readUInt16LE(36),r.externalFileAttributes=e.readUInt32LE(38),r.relativeOffsetOfLocalHeader=e.readUInt32LE(42),r.generalPurposeBitFlag&64)return vi(t,new Error("strong encryption is not supported"));t.readEntryCursor+=46,e=Is(r.fileNameLength+r.extraFieldLength+r.fileCommentLength),bc(t.reader,e,0,e.length,t.readEntryCursor,function(s){if(s)return vi(t,s);if(!t.emittedError){r.fileNameRaw=e.subarray(0,r.fileNameLength);var o=r.fileNameLength+r.extraFieldLength;r.extraFieldRaw=e.subarray(r.fileNameLength,o),r.fileCommentRaw=e.subarray(o,o+r.fileCommentLength);try{r.extraFields=fz(r.extraFieldRaw)}catch(h){return vi(t,h)}if(t.decodeStrings){var a=(r.generalPurposeBitFlag&2048)!==0;r.fileComment=yS(r.fileCommentRaw,a),r.fileName=uz(r.generalPurposeBitFlag,r.fileNameRaw,r.extraFields,t.strictFileNames);var l=dz(r.fileName);if(l!=null)return vi(t,new Error(l))}else r.fileComment=r.fileCommentRaw,r.fileName=r.fileNameRaw;r.comment=r.fileComment,t.readEntryCursor+=e.length,t.entriesRead+=1;for(var c=0;c<r.extraFields.length;c++){var u=r.extraFields[c];if(u.id===1){var d=u.data,E=0;if(r.uncompressedSize===4294967295){if(E+8>d.length)return vi(t,new Error("zip64 extended information extra field does not include uncompressed size"));r.uncompressedSize=Cc(d,E),E+=8}if(r.compressedSize===4294967295){if(E+8>d.length)return vi(t,new Error("zip64 extended information extra field does not include compressed size"));r.compressedSize=Cc(d,E),E+=8}if(r.relativeOffsetOfLocalHeader===4294967295){if(E+8>d.length)return vi(t,new Error("zip64 extended information extra field does not include relative header offset"));r.relativeOffsetOfLocalHeader=Cc(d,E),E+=8}break}}if(t.validateEntrySizes&&r.compressionMethod===0){var f=r.uncompressedSize;if(r.isEncrypted()&&(f+=12),r.compressedSize!==f){var p="compressed/uncompressed size mismatch for stored file: "+r.compressedSize+" != "+r.uncompressedSize;return vi(t,new Error(p))}}t.emit("entry",r),t.lazyEntries||t._readEntry()}})}})}};Mi.prototype.openReadStream=function(t,e,n){var r=this,i=0,s=t.compressedSize;if(n==null&&(n=e,e=null),e==null)e={};else{if(e.decrypt!=null){if(!t.isEncrypted())throw new Error("options.decrypt can only be specified for encrypted entries");if(e.decrypt!==!1)throw new Error("invalid options.decrypt value: "+e.decrypt);if(t.isCompressed()&&e.decompress!==!1)throw new Error("entry is encrypted and compressed, and options.decompress !== false")}if(e.decompress!=null){if(!t.isCompressed())throw new Error("options.decompress can only be specified for compressed entries");if(!(e.decompress===!1||e.decompress===!0))throw new Error("invalid options.decompress value: "+e.decompress)}if(e.start!=null||e.end!=null){if(t.isCompressed()&&e.decompress!==!1)throw new Error("start/end range not allowed for compressed entry without options.decompress === false");if(t.isEncrypted()&&e.decrypt!==!1)throw new Error("start/end range not allowed for encrypted entry without options.decrypt === false")}if(e.start!=null){if(i=e.start,i<0)throw new Error("options.start < 0");if(i>t.compressedSize)throw new Error("options.start > entry.compressedSize")}if(e.end!=null){if(s=e.end,s<0)throw new Error("options.end < 0");if(s>t.compressedSize)throw new Error("options.end > entry.compressedSize");if(s<i)throw new Error("options.end < options.start")}}if(!r.isOpen)return n(new Error("closed"));if(t.isEncrypted()&&e.decrypt!==!1)return n(new Error("entry is encrypted, and options.decrypt !== false"));var o;if(t.compressionMethod===0)o=!1;else if(t.compressionMethod===8)o=e.decompress!=null?e.decompress:!0;else return n(new Error("unsupported compression method: "+t.compressionMethod));r.readLocalFileHeader(t,{minimal:!0},function(a,l){if(a)return n(a);r.openReadStreamLowLevel(l.fileDataStart,t.compressedSize,i,s,o,t.uncompressedSize,n)})};Mi.prototype.openReadStreamLowLevel=function(t,e,n,r,i,s,o){var a=this,l=t+e,c=a.reader.createReadStream({start:t+n,end:t+r}),u=c;if(i){var d=!1,E=vbe.createInflateRaw();c.on("error",function(f){setImmediate(function(){d||E.emit("error",f)})}),c.pipe(E),a.validateEntrySizes?(u=new ff(s),E.on("error",function(f){setImmediate(function(){d||u.emit("error",f)})}),E.pipe(u)):u=E,mb(u,function(){d=!0,E!==u&&E.unpipe(u),c.unpipe(E),c.destroy()})}o(null,u)};Mi.prototype.readLocalFileHeader=function(t,e,n){var r=this;n==null&&(n=e,e=null),e==null&&(e={}),r.reader.ref();var i=Is(30);bc(r.reader,i,0,i.length,t.relativeOffsetOfLocalHeader,function(s){try{if(s)return n(s);var o=i.readUInt32LE(0);if(o!==67324752)return n(new Error("invalid local file header signature: 0x"+o.toString(16)));var a=i.readUInt16LE(26),l=i.readUInt16LE(28),c=t.relativeOffsetOfLocalHeader+30+a+l;if(c+t.compressedSize>r.fileSize)return n(new Error("file data overflows file bounds: "+c+" + "+t.compressedSize+" > "+r.fileSize));if(e.minimal)return n(null,{fileDataStart:c});var u=new lz;u.fileDataStart=c,u.versionNeededToExtract=i.readUInt16LE(4),u.generalPurposeBitFlag=i.readUInt16LE(6),u.compressionMethod=i.readUInt16LE(8),u.lastModFileTime=i.readUInt16LE(10),u.lastModFileDate=i.readUInt16LE(12),u.crc32=i.readUInt32LE(14),u.compressedSize=i.readUInt32LE(18),u.uncompressedSize=i.readUInt32LE(22),u.fileNameLength=a,u.extraFieldLength=l,i=Is(a+l),r.reader.ref(),bc(r.reader,i,0,i.length,t.relativeOffsetOfLocalHeader+30,function(d){try{return d?n(d):(u.fileName=i.subarray(0,a),u.extraField=i.subarray(a),n(null,u))}finally{r.reader.unref()}})}finally{r.reader.unref()}})};function df(){}df.prototype.getLastModDate=function(t){if(t==null&&(t={}),!t.forceDosFormat)for(var e=0;e<this.extraFields.length;e++){var n=this.extraFields[e];if(n.id===21589){var r=n.data;if(r.length<5)continue;var i=r[0],s=1;if(!(i&s))continue;var o=r.readInt32LE(1);return new Date(o*1e3)}else if(n.id===10)for(var r=n.data,a=4;a<r.length+4;){var l=r.readUInt16LE(a);a+=2;var c=r.readUInt16LE(a);if(a+=2,l!==1){a+=c;continue}if(c<8||a+c>r.length)break;var u=4294967296*r.readInt32LE(a+4)+r.readUInt32LE(a),d=u/1e4-116444736e5;return new Date(d)}}return cz(this.lastModFileDate,this.lastModFileTime,t.timezone)};df.prototype.isEncrypted=function(){return(this.generalPurposeBitFlag&1)!==0};df.prototype.isCompressed=function(){return this.compressionMethod===8};function lz(){}function cz(t,e,n){var r=t&31,i=(t>>5&15)-1,s=(t>>9&127)+1980,o=0,a=(e&31)*2,l=e>>5&63,c=e>>11&31;if(n==null||n==="local")return new Date(s,i,r,c,l,a,o);if(n==="UTC")return new Date(Date.UTC(s,i,r,c,l,a,o));throw new Error("unrecognized options.timezone: "+options.timezone)}function uz(t,e,n,r){for(var i=null,s=0;s<n.length;s++){var o=n[s];if(o.id===28789){if(o.data.length<6||o.data.readUInt8(0)!==1)continue;var a=o.data.readUInt32LE(1);if(Mbe.unsigned(e)!==a)continue;i=yS(o.data.subarray(5),!0);break}}if(i==null){var l=(t&2048)!==0;i=yS(e,l)}return r||(i=i.replace(/\\/g,"/")),i}function dz(t){return t.indexOf("\\")!==-1?"invalid characters in fileName: "+t:/^[a-zA-Z]:/.test(t)||/^\//.test(t)?"absolute path: "+t:t.split("/").indexOf("..")!==-1?"invalid relative path: "+t:null}function fz(t){for(var e=[],n=0;n<t.length-3;){var r=t.readUInt16LE(n+0),i=t.readUInt16LE(n+2),s=n+4,o=s+i;if(o>t.length)throw new Error("extra field length exceeds extra field buffer size");var a=t.subarray(s,o);e.push({id:r,data:a}),n=o}return e}function bc(t,e,n,r,i,s){if(r===0)return setImmediate(function(){s(null,Is(0))});t.read(e,n,r,i,function(o,a){if(o)return s(o);if(a<r)return s(new Error("unexpected EOF"));s()})}LS.inherits(ff,sz);function ff(t){sz.call(this),this.actualByteCount=0,this.expectedByteCount=t}ff.prototype._transform=function(t,e,n){if(this.actualByteCount+=t.length,this.actualByteCount>this.expectedByteCount){var r="too many bytes in the stream. expected "+this.expectedByteCount+". got at least "+this.actualByteCount;return n(new Error(r))}n(null,t)};ff.prototype._flush=function(t){if(this.actualByteCount<this.expectedByteCount){var e="not enough bytes in the stream. expected "+this.expectedByteCount+". got only "+this.actualByteCount;return t(new Error(e))}t()};LS.inherits(uo,DS);function uo(){DS.call(this),this.refCount=0}uo.prototype.ref=function(){this.refCount+=1};uo.prototype.unref=function(){var t=this;if(t.refCount-=1,t.refCount>0)return;if(t.refCount<0)throw new Error("invalid unref");t.close(e);function e(n){if(n)return t.emit("error",n);t.emit("close")}};uo.prototype.createReadStream=function(t){t==null&&(t={});var e=t.start,n=t.end;if(e===n){var r=new gb;return setImmediate(function(){r.end()}),r}var i=this._readStreamForRange(e,n),s=!1,o=new PS(this);i.on("error",function(l){setImmediate(function(){s||o.emit("error",l)})}),mb(o,function(){i.unpipe(o),o.unref(),i.destroy()});var a=new ff(n-e);return o.on("error",function(l){setImmediate(function(){s||a.emit("error",l)})}),mb(a,function(){s=!0,o.unpipe(a),o.destroy()}),i.pipe(o).pipe(a)};uo.prototype._readStreamForRange=function(t,e){throw new Error("not implemented")};uo.prototype.read=function(t,e,n,r,i){var s=this.createReadStream({start:r,end:r+n}),o=new Ube,a=0;o._write=function(l,c,u){l.copy(t,e+a,0,l.length),a+=l.length,u()},o.on("finish",i),s.on("error",function(l){i(l)}),s.pipe(o)};uo.prototype.close=function(t){setImmediate(t)};LS.inherits(PS,gb);function PS(t){gb.call(this),this.context=t,this.context.ref(),this.unreffedYet=!1}PS.prototype._flush=function(t){this.unref(),t()};PS.prototype.unref=function(t){this.unreffedYet||(this.unreffedYet=!0,this.context.unref())};var Hbe="\0\u263A\u263B\u2665\u2666\u2663\u2660\u2022\u25D8\u25CB\u25D9\u2642\u2640\u266A\u266B\u263C\u25BA\u25C4\u2195\u203C\xB6\xA7\u25AC\u21A8\u2191\u2193\u2192\u2190\u221F\u2194\u25B2\u25BC !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\u2302\xC7\xFC\xE9\xE2\xE4\xE0\xE5\xE7\xEA\xEB\xE8\xEF\xEE\xEC\xC4\xC5\xC9\xE6\xC6\xF4\xF6\xF2\xFB\xF9\xFF\xD6\xDC\xA2\xA3\xA5\u20A7\u0192\xE1\xED\xF3\xFA\xF1\xD1\xAA\xBA\xBF\u2310\xAC\xBD\xBC\xA1\xAB\xBB\u2591\u2592\u2593\u2502\u2524\u2561\u2562\u2556\u2555\u2563\u2551\u2557\u255D\u255C\u255B\u2510\u2514\u2534\u252C\u251C\u2500\u253C\u255E\u255F\u255A\u2554\u2569\u2566\u2560\u2550\u256C\u2567\u2568\u2564\u2565\u2559\u2558\u2552\u2553\u256B\u256A\u2518\u250C\u2588\u2584\u258C\u2590\u2580\u03B1\xDF\u0393\u03C0\u03A3\u03C3\xB5\u03C4\u03A6\u0398\u03A9\u03B4\u221E\u03C6\u03B5\u2229\u2261\xB1\u2265\u2264\u2320\u2321\xF7\u2248\xB0\u2219\xB7\u221A\u207F\xB2\u25A0\xA0";function yS(t,e){if(e)return t.toString("utf8");for(var n="",r=0;r<t.length;r++)n+=Hbe[t[r]];return n}function Cc(t,e){var n=t.readUInt32LE(e),r=t.readUInt32LE(e+4);return r*4294967296+n}var Is;typeof Buffer.allocUnsafe=="function"?Is=function(t){return Buffer.allocUnsafe(t)}:Is=function(t){return new Buffer(t)};function mb(t,e){typeof t.destroy=="function"?t._destroy=function(n,r){e(),r?.(n)}:t.destroy=e}function wS(t){if(t)throw t}});var yc,_b=W(()=>{"use strict";yc=class{constructor(){this.fieldCount=0;this.rowCount=0;this.actualSheetName="";this.resultsCount=0;this._oaEpoch=Date.UTC(1899,11,30)}async close(){}dispose(){}getDateTimeFromOaDate(e){let n=e*864e5+this._oaEpoch;return new Date(n)}}});var hz,xS,pz=W(()=>{"use strict";hz=Q(Ez());_b();xS=class extends yc{constructor(){super();this.zipfile=null;this.sharedStrings=[];this.styles=[];this.sheetNames=[];this.sheets=[];this.entries=new Map;this._currentSheetIndex=-1;this._sheetXml=null;this._xmlPos=0;this._currentRow=[];this.xfIdToNumFmtId=[];this.customDateFormats=new Set}async open(n,r=!0){return new Promise((i,s)=>{hz.default.open(n,{lazyEntries:!0,autoClose:!1},async(o,a)=>{if(o)return s(o);this.zipfile=a,this.entries=new Map,a.on("entry",l=>{this.entries.set(l.fileName,l),a.readEntry()}),a.on("end",async()=>{try{let l=await this._readZipEntryContent("xl/_rels/workbook.xml.rels"),c={};if(l){let E=/<Relationship[^>]*Id="([^"]*)"[^>]*Target="([^"]*)"/g,f;for(;(f=E.exec(l))!==null;)c[f[1]]=f[2]}let u=await this._readZipEntryContent("xl/workbook.xml");if(u){let E=/<sheet[^>]*name="([^"]*)"[^>]*sheetId="([^"]*)"[^>]*r:id="([^"]*)"/g,f;for(;(f=E.exec(u))!==null;){let p=this._unescapeXml(f[1]),h=f[2],T=f[3],m=c[T];m.startsWith("xl/")||(m="xl/"+m),this.sheetNames.push(p),this.sheets.push({name:p,sheetId:h,rId:T,path:m})}}if(r){let E=await this._readZipEntryContent("xl/sharedStrings.xml");E&&this._parseSharedStrings(E)}let d=await this._readZipEntryContent("xl/styles.xml");d&&this._parseStyles(d),this.resultsCount=this.sheets.length,this._currentSheetIndex=-1,i()}catch(l){s(l)}}),a.readEntry()})})}async close(){this.zipfile&&this.zipfile.close()}async _readZipEntryContent(n){let r=this.entries.get(n);return r?new Promise((i,s)=>{this.zipfile.openReadStream(r,(o,a)=>{if(o)return s(o);let l=[];a.on("data",c=>l.push(c)),a.on("end",()=>{i(Buffer.concat(l).toString("utf8"))}),a.on("error",s)})}):null}_unescapeXml(n){return n?n.indexOf("&")===-1?n:n.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&apos;/g,"'"):""}_parseSharedStrings(n){let r=0;for(;;){let i=n.indexOf("<si>",r);if(i===-1)break;let s=n.indexOf("</si>",i);if(s===-1)break;let o=n.substring(i,s),a="",l=0;for(;;){let c=o.indexOf("<t",l);if(c===-1)break;let u=o.indexOf(">",c),d=o.indexOf("</t>",u);if(d===-1)break;a+=o.substring(u+1,d),l=d+4}this.sharedStrings.push(this._unescapeXml(a)),r=s+5}}_parseStyles(n){let r=/<numFmt\s+[^>]*numFmtId="(\d+)"[^>]*formatCode="([^"]*)"/g,i;for(this.customDateFormats=new Set;(i=r.exec(n))!==null;){let o=parseInt(i[1]),a=i[2];(a.toLowerCase().includes("yy")||a.toLowerCase().includes("mm")||a.toLowerCase().includes("dd")||a.toLowerCase().includes("h:mm"))&&this.customDateFormats.add(o)}this.xfIdToNumFmtId=[];let s=n.indexOf("<cellXfs");if(s!==-1){let o=n.indexOf("</cellXfs>",s);if(o!==-1){let a=n.substring(s,o),l=/<xf\s+[^>]*numFmtId="(\d+)"/g;for(;(i=l.exec(a))!==null;){let c=parseInt(i[1]);this.xfIdToNumFmtId.push(c)}}}}getSheetNames(){return this.sheetNames}async read(){return this._currentSheetIndex===-1&&(this._currentSheetIndex=0,await this._initSheet(this._currentSheetIndex)),!!this._readNextRow()}async _initSheet(n){if(n>=this.sheets.length)return;let r=this.sheets[n];this.actualSheetName=r.name,this._sheetXml=await this._readZipEntryContent(r.path),this._sheetXml||(this._sheetXml=""),this._xmlPos=0;let i=this._sheetXml.indexOf("<sheetData>");i!==-1&&(this._xmlPos=i+11)}_readNextRow(){if(!this._sheetXml)return!1;let n=this._sheetXml.indexOf("<row",this._xmlPos);if(n===-1)return!1;let r=this._sheetXml.indexOf("</row>",n);return r===-1?!1:(this._xmlPos=r+6,this._parseRowByIndex(n,r),!0)}_parseRowByIndex(n,r){this._currentRow=[];let i=this._sheetXml,s=i.indexOf(">",n)+1;for(;s<r;){let o=i.indexOf("<c",s);if(o===-1||o>=r)break;let a=i.indexOf(">",o),l=-1,c="n",u=0,d=o+2;for(;d<a;){for(;i.charCodeAt(d)<=32&&d<a;)d++;if(d>=a)break;let p=d;for(;i.charCodeAt(d)!==61&&d<a;)d++;let h=i.substring(p,d);if(d++,i.charCodeAt(d)===34){d++;let T=d;for(;i.charCodeAt(d)!==34&&d<a;)d++;let S=i.substring(T,d);if(d++,h==="r"){let m=0;for(;m<S.length&&S.charCodeAt(m)>=65;)m++;l=this._columnLetterToIndex(S.substring(0,m))}else h==="t"?c=S:h==="s"&&(u=parseInt(S,10))}}let E=null;if(i.charCodeAt(a-1)===47)s=a+1;else{let p=i.indexOf("</c>",a),h=p!==-1&&p<r?p:r,T=i.indexOf("<v>",a);if(T!==-1&&T<h){let S=T+3,m=i.indexOf("</v>",S);m!==-1&&m<h&&(E=i.substring(S,m))}else if(c==="inlineStr"){let S=i.indexOf("<t",a);if(S!==-1&&S<h){let m=i.indexOf(">",S)+1,R=i.indexOf("</t>",m);R!==-1&&R<h&&(E=i.substring(m,R))}}s=h+4}let f=null;if(E!==null){if(c==="s"){let p=parseInt(E,10);f=this.sharedStrings[p]}else if(c==="b")f=E==="1"||E==="true";else if(c==="inlineStr")f=this._unescapeXml(E);else if((c==="n"||c==="")&&(f=parseFloat(E),u>0&&this.xfIdToNumFmtId)){let p=0;if(u<this.xfIdToNumFmtId.length&&(p=this.xfIdToNumFmtId[u]),p>=14&&p<=22||p>=45&&p<=47||this.customDateFormats&&this.customDateFormats.has(p))try{f=this.getDateTimeFromOaDate(f)}catch{}}}l!==-1&&(this._currentRow[l]=f,l>=this.fieldCount&&(this.fieldCount=l+1))}}_columnLetterToIndex(n){let r=0,i=n.length;for(let s=0;s<i;s++)r+=(n.charCodeAt(s)-64)*Math.pow(26,i-s-1);return r-1}getValue(n){return n<0||n>=this._currentRow.length?null:this._currentRow[n]}}});var Nb=O((aFe,Tz)=>{Tz.exports={LOCHDR:30,LOCSIG:67324752,LOCVER:4,LOCFLG:6,LOCHOW:8,LOCTIM:10,LOCCRC:14,LOCSIZ:18,LOCLEN:22,LOCNAM:26,LOCEXT:28,EXTSIG:134695760,EXTHDR:16,EXTCRC:4,EXTSIZ:8,EXTLEN:12,CENHDR:46,CENSIG:33639248,CENVEM:4,CENVER:6,CENFLG:8,CENHOW:10,CENTIM:12,CENCRC:16,CENSIZ:20,CENLEN:24,CENNAM:28,CENEXT:30,CENCOM:32,CENDSK:34,CENATT:36,CENATX:38,CENOFF:42,ENDHDR:22,ENDSIG:101010256,ENDSUB:8,ENDTOT:10,ENDSIZ:12,ENDOFF:16,ENDCOM:20,END64HDR:20,END64SIG:117853008,END64START:4,END64OFF:8,END64NUMDISKS:16,ZIP64SIG:101075792,ZIP64HDR:56,ZIP64LEAD:12,ZIP64SIZE:4,ZIP64VEM:12,ZIP64VER:14,ZIP64DSK:16,ZIP64DSKDIR:20,ZIP64SUB:24,ZIP64TOT:32,ZIP64SIZB:40,ZIP64OFF:48,ZIP64EXTRA:56,STORED:0,SHRUNK:1,REDUCED1:2,REDUCED2:3,REDUCED3:4,REDUCED4:5,IMPLODED:6,DEFLATED:8,ENHANCED_DEFLATED:9,PKWARE:10,BZIP2:12,LZMA:14,IBM_TERSE:18,IBM_LZ77:19,AES_ENCRYPT:99,FLG_ENC:1,FLG_COMP1:2,FLG_COMP2:4,FLG_DESC:8,FLG_ENH:16,FLG_PATCH:32,FLG_STR:64,FLG_EFS:2048,FLG_MSK:4096,FILE:2,BUFFER:1,NONE:0,EF_ID:0,EF_SIZE:2,ID_ZIP64:1,ID_AVINFO:7,ID_PFS:8,ID_OS2:9,ID_NTFS:10,ID_OPENVMS:12,ID_UNIX:13,ID_FORK:14,ID_PATCH:15,ID_X509_PKCS7:20,ID_X509_CERTID_F:21,ID_X509_CERTID_C:22,ID_STRONGENC:23,ID_RECORD_MGT:24,ID_X509_PKCS7_RL:25,ID_IBM1:101,ID_IBM2:102,ID_POSZIP:18064,EF_ZIP64_OR_32:4294967295,EF_ZIP64_OR_16:65535,EF_ZIP64_SUNCOMP:0,EF_ZIP64_SCOMP:8,EF_ZIP64_RHO:16,EF_ZIP64_DSN:24}});var vS=O(Rz=>{var Sz={INVALID_LOC:"Invalid LOC header (bad signature)",INVALID_CEN:"Invalid CEN header (bad signature)",INVALID_END:"Invalid END header (bad signature)",DESCRIPTOR_NOT_EXIST:"No descriptor present",DESCRIPTOR_UNKNOWN:"Unknown descriptor format",DESCRIPTOR_FAULTY:"Descriptor data is malformed",NO_DATA:"Nothing to decompress",BAD_CRC:"CRC32 checksum failed {0}",FILE_IN_THE_WAY:"There is a file in the way: {0}",UNKNOWN_METHOD:"Invalid/unsupported compression method",AVAIL_DATA:"inflate::Available inflate data did not terminate",INVALID_DISTANCE:"inflate::Invalid literal/length or distance code in fixed or dynamic block",TO_MANY_CODES:"inflate::Dynamic block code description: too many length or distance codes",INVALID_REPEAT_LEN:"inflate::Dynamic block code description: repeat more than specified lengths",INVALID_REPEAT_FIRST:"inflate::Dynamic block code description: repeat lengths with no first length",INCOMPLETE_CODES:"inflate::Dynamic block code description: code lengths codes incomplete",INVALID_DYN_DISTANCE:"inflate::Dynamic block code description: invalid distance code lengths",INVALID_CODES_LEN:"inflate::Dynamic block code description: invalid literal/length code lengths",INVALID_STORE_BLOCK:"inflate::Stored block length did not match one's complement",INVALID_BLOCK_TYPE:"inflate::Invalid block type (type == 3)",CANT_EXTRACT_FILE:"Could not extract the file",CANT_OVERRIDE:"Target file already exists",DISK_ENTRY_TOO_LARGE:"Number of disk entries is too large",NO_ZIP:"No zip file was loaded",NO_ENTRY:"Entry doesn't exist",DIRECTORY_CONTENT_ERROR:"A directory cannot have content",FILE_NOT_FOUND:'File not found: "{0}"',NOT_IMPLEMENTED:"Not implemented",INVALID_FILENAME:"Invalid filename",INVALID_FORMAT:"Invalid or unsupported zip format. No END header found",INVALID_PASS_PARAM:"Incompatible password parameter",WRONG_PASSWORD:"Wrong Password",COMMENT_TOO_LONG:"Comment is too long",EXTRA_FIELD_PARSE_ERROR:"Extra field parsing error"};function Gbe(t){return function(...e){return e.length&&(t=t.replace(/\{(\d)\}/g,(n,r)=>e[r]||"")),new Error("ADM-ZIP: "+t)}}for(let t of Object.keys(Sz))Rz[t]=Gbe(Sz[t])});var _z=O((cFe,Iz)=>{var $be=require("fs"),jt=require("path"),Az=Nb(),Wbe=vS(),kbe=typeof process=="object"&&process.platform==="win32",mz=t=>typeof t=="object"&&t!==null,gz=new Uint32Array(256).map((t,e)=>{for(let n=0;n<8;n++)(e&1)!==0?e=3988292384^e>>>1:e>>>=1;return e>>>0});function Ct(t){this.sep=jt.sep,this.fs=$be,mz(t)&&mz(t.fs)&&typeof t.fs.statSync=="function"&&(this.fs=t.fs)}Iz.exports=Ct;Ct.prototype.makeDir=function(t){let e=this;function n(r){let i=r.split(e.sep)[0];r.split(e.sep).forEach(function(s){if(!(!s||s.substr(-1,1)===":")){i+=e.sep+s;var o;try{o=e.fs.statSync(i)}catch{e.fs.mkdirSync(i)}if(o&&o.isFile())throw Wbe.FILE_IN_THE_WAY(`"${i}"`)}})}n(t)};Ct.prototype.writeFileTo=function(t,e,n,r){let i=this;if(i.fs.existsSync(t)){if(!n)return!1;var s=i.fs.statSync(t);if(s.isDirectory())return!1}var o=jt.dirname(t);i.fs.existsSync(o)||i.makeDir(o);var a;try{a=i.fs.openSync(t,"w",438)}catch{i.fs.chmodSync(t,438),a=i.fs.openSync(t,"w",438)}if(a)try{i.fs.writeSync(a,e,0,e.length,0)}finally{i.fs.closeSync(a)}return i.fs.chmodSync(t,r||438),!0};Ct.prototype.writeFileToAsync=function(t,e,n,r,i){typeof r=="function"&&(i=r,r=void 0);let s=this;s.fs.exists(t,function(o){if(o&&!n)return i(!1);s.fs.stat(t,function(a,l){if(o&&l.isDirectory())return i(!1);var c=jt.dirname(t);s.fs.exists(c,function(u){u||s.makeDir(c),s.fs.open(t,"w",438,function(d,E){d?s.fs.chmod(t,438,function(){s.fs.open(t,"w",438,function(f,p){s.fs.write(p,e,0,e.length,0,function(){s.fs.close(p,function(){s.fs.chmod(t,r||438,function(){i(!0)})})})})}):E?s.fs.write(E,e,0,e.length,0,function(){s.fs.close(E,function(){s.fs.chmod(t,r||438,function(){i(!0)})})}):s.fs.chmod(t,r||438,function(){i(!0)})})})})})};Ct.prototype.findFiles=function(t){let e=this;function n(r,i,s){typeof i=="boolean"&&(s=i,i=void 0);let o=[];return e.fs.readdirSync(r).forEach(function(a){let l=jt.join(r,a),c=e.fs.statSync(l);(!i||i.test(l))&&o.push(jt.normalize(l)+(c.isDirectory()?e.sep:"")),c.isDirectory()&&s&&(o=o.concat(n(l,i,s)))}),o}return n(t,void 0,!0)};Ct.prototype.findFilesAsync=function(t,e){let n=this,r=[];n.fs.readdir(t,function(i,s){if(i)return e(i);let o=s.length;if(!o)return e(null,r);s.forEach(function(a){a=jt.join(t,a),n.fs.stat(a,function(l,c){if(l)return e(l);c&&(r.push(jt.normalize(a)+(c.isDirectory()?n.sep:"")),c.isDirectory()?n.findFilesAsync(a,function(u,d){if(u)return e(u);r=r.concat(d),--o||e(null,r)}):--o||e(null,r))})})})};Ct.prototype.getAttributes=function(){};Ct.prototype.setAttributes=function(){};Ct.crc32update=function(t,e){return gz[(t^e)&255]^t>>>8};Ct.crc32=function(t){typeof t=="string"&&(t=Buffer.from(t,"utf8"));let e=t.length,n=-1;for(let r=0;r<e;)n=Ct.crc32update(n,t[r++]);return~n>>>0};Ct.methodToString=function(t){switch(t){case Az.STORED:return"STORED ("+t+")";case Az.DEFLATED:return"DEFLATED ("+t+")";default:return"UNSUPPORTED ("+t+")"}};Ct.canonical=function(t){if(!t)return"";let e=jt.posix.normalize("/"+t.split("\\").join("/"));return jt.join(".",e)};Ct.zipnamefix=function(t){if(!t)return"";let e=jt.posix.normalize("/"+t.split("\\").join("/"));return jt.posix.join(".",e)};Ct.findLast=function(t,e){if(!Array.isArray(t))throw new TypeError("arr is not array");let n=t.length>>>0;for(let r=n-1;r>=0;r--)if(e(t[r],r,t))return t[r]};Ct.sanitize=function(t,e){t=jt.resolve(jt.normalize(t));for(var n=e.split("/"),r=0,i=n.length;r<i;r++){var s=jt.normalize(jt.join(t,n.slice(r,i).join(jt.sep)));if(s.indexOf(t)===0)return s}return jt.normalize(jt.join(t,jt.basename(e)))};Ct.toBuffer=function(e,n){return Buffer.isBuffer(e)?e:e instanceof Uint8Array?Buffer.from(e):typeof e=="string"?n(e):Buffer.alloc(0)};Ct.readBigUInt64LE=function(t,e){var n=Buffer.from(t.slice(e,e+8));return n.swap64(),parseInt(`0x${n.toString("hex")}`)};Ct.fromDOS2Date=function(t){return new Date((t>>25&127)+1980,Math.max((t>>21&15)-1,0),Math.max(t>>16&31,1),t>>11&31,t>>5&63,(t&31)<<1)};Ct.fromDate2DOS=function(t){let e=0,n=0;return t.getFullYear()>1979&&(e=(t.getFullYear()-1980&127)<<9|t.getMonth()+1<<5|t.getDate(),n=t.getHours()<<11|t.getMinutes()<<5|t.getSeconds()>>1),e<<16|n};Ct.isWin=kbe;Ct.crcTable=gz});var Oz=O((uFe,Nz)=>{var Ybe=require("path");Nz.exports=function(t,{fs:e}){var n=t||"",r=s(),i=null;function s(){return{directory:!1,readonly:!1,hidden:!1,executable:!1,mtime:0,atime:0}}return n&&e.existsSync(n)?(i=e.statSync(n),r.directory=i.isDirectory(),r.mtime=i.mtime,r.atime=i.atime,r.executable=(73&i.mode)!==0,r.readonly=(128&i.mode)===0,r.hidden=Ybe.basename(n)[0]==="."):console.warn("Invalid path: "+n),{get directory(){return r.directory},get readOnly(){return r.readonly},get hidden(){return r.hidden},get mtime(){return r.mtime},get atime(){return r.atime},get executable(){return r.executable},decodeAttributes:function(){},encodeAttributes:function(){},toJSON:function(){return{path:n,isDirectory:r.directory,isReadOnly:r.readonly,isHidden:r.hidden,isExecutable:r.executable,mTime:r.mtime,aTime:r.atime}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var bz=O((dFe,Cz)=>{Cz.exports={efs:!0,encode:t=>Buffer.from(t,"utf8"),decode:t=>t.toString("utf8")}});var Lc=O((fFe,wc)=>{wc.exports=_z();wc.exports.Constants=Nb();wc.exports.Errors=vS();wc.exports.FileAttr=Oz();wc.exports.decoder=bz()});var wz=O((EFe,yz)=>{var fo=Lc(),ee=fo.Constants;yz.exports=function(){var t=20,e=10,n=0,r=0,i=0,s=0,o=0,a=0,l=0,c=0,u=0,d=0,E=0,f=0,p=0;t|=fo.isWin?2560:768,n|=ee.FLG_EFS;let h={extraLen:0},T=R=>Math.max(0,R)>>>0,S=R=>Math.max(0,R)&65535,m=R=>Math.max(0,R)&255;return i=fo.fromDate2DOS(new Date),{get made(){return t},set made(R){t=R},get version(){return e},set version(R){e=R},get flags(){return n},set flags(R){n=R},get flags_efs(){return(n&ee.FLG_EFS)>0},set flags_efs(R){R?n|=ee.FLG_EFS:n&=~ee.FLG_EFS},get flags_desc(){return(n&ee.FLG_DESC)>0},set flags_desc(R){R?n|=ee.FLG_DESC:n&=~ee.FLG_DESC},get method(){return r},set method(R){switch(R){case ee.STORED:this.version=10;case ee.DEFLATED:default:this.version=20}r=R},get time(){return fo.fromDOS2Date(this.timeval)},set time(R){this.timeval=fo.fromDate2DOS(R)},get timeval(){return i},set timeval(R){i=T(R)},get timeHighByte(){return m(i>>>8)},get crc(){return s},set crc(R){s=T(R)},get compressedSize(){return o},set compressedSize(R){o=T(R)},get size(){return a},set size(R){a=T(R)},get fileNameLength(){return l},set fileNameLength(R){l=R},get extraLength(){return c},set extraLength(R){c=R},get extraLocalLength(){return h.extraLen},set extraLocalLength(R){h.extraLen=R},get commentLength(){return u},set commentLength(R){u=R},get diskNumStart(){return d},set diskNumStart(R){d=T(R)},get inAttr(){return E},set inAttr(R){E=T(R)},get attr(){return f},set attr(R){f=T(R)},get fileAttr(){return(f||0)>>16&4095},get offset(){return p},set offset(R){p=T(R)},get encrypted(){return(n&ee.FLG_ENC)===ee.FLG_ENC},get centralHeaderSize(){return ee.CENHDR+l+c+u},get realDataOffset(){return p+ee.LOCHDR+h.fnameLen+h.extraLen},get localHeader(){return h},loadLocalHeaderFromBinary:function(R){var A=R.slice(p,p+ee.LOCHDR);if(A.readUInt32LE(0)!==ee.LOCSIG)throw fo.Errors.INVALID_LOC();h.version=A.readUInt16LE(ee.LOCVER),h.flags=A.readUInt16LE(ee.LOCFLG),h.method=A.readUInt16LE(ee.LOCHOW),h.time=A.readUInt32LE(ee.LOCTIM),h.crc=A.readUInt32LE(ee.LOCCRC),h.compressedSize=A.readUInt32LE(ee.LOCSIZ),h.size=A.readUInt32LE(ee.LOCLEN),h.fnameLen=A.readUInt16LE(ee.LOCNAM),h.extraLen=A.readUInt16LE(ee.LOCEXT);let I=p+ee.LOCHDR+h.fnameLen,w=I+h.extraLen;return R.slice(I,w)},loadFromBinary:function(R){if(R.length!==ee.CENHDR||R.readUInt32LE(0)!==ee.CENSIG)throw fo.Errors.INVALID_CEN();t=R.readUInt16LE(ee.CENVEM),e=R.readUInt16LE(ee.CENVER),n=R.readUInt16LE(ee.CENFLG),r=R.readUInt16LE(ee.CENHOW),i=R.readUInt32LE(ee.CENTIM),s=R.readUInt32LE(ee.CENCRC),o=R.readUInt32LE(ee.CENSIZ),a=R.readUInt32LE(ee.CENLEN),l=R.readUInt16LE(ee.CENNAM),c=R.readUInt16LE(ee.CENEXT),u=R.readUInt16LE(ee.CENCOM),d=R.readUInt16LE(ee.CENDSK),E=R.readUInt16LE(ee.CENATT),f=R.readUInt32LE(ee.CENATX),p=R.readUInt32LE(ee.CENOFF)},localHeaderToBinary:function(){var R=Buffer.alloc(ee.LOCHDR);return R.writeUInt32LE(ee.LOCSIG,0),R.writeUInt16LE(e,ee.LOCVER),R.writeUInt16LE(n,ee.LOCFLG),R.writeUInt16LE(r,ee.LOCHOW),R.writeUInt32LE(i,ee.LOCTIM),R.writeUInt32LE(s,ee.LOCCRC),R.writeUInt32LE(o,ee.LOCSIZ),R.writeUInt32LE(a,ee.LOCLEN),R.writeUInt16LE(l,ee.LOCNAM),R.writeUInt16LE(h.extraLen,ee.LOCEXT),R},centralHeaderToBinary:function(){var R=Buffer.alloc(ee.CENHDR+l+c+u);return R.writeUInt32LE(ee.CENSIG,0),R.writeUInt16LE(t,ee.CENVEM),R.writeUInt16LE(e,ee.CENVER),R.writeUInt16LE(n,ee.CENFLG),R.writeUInt16LE(r,ee.CENHOW),R.writeUInt32LE(i,ee.CENTIM),R.writeUInt32LE(s,ee.CENCRC),R.writeUInt32LE(o,ee.CENSIZ),R.writeUInt32LE(a,ee.CENLEN),R.writeUInt16LE(l,ee.CENNAM),R.writeUInt16LE(c,ee.CENEXT),R.writeUInt16LE(u,ee.CENCOM),R.writeUInt16LE(d,ee.CENDSK),R.writeUInt16LE(E,ee.CENATT),R.writeUInt32LE(f,ee.CENATX),R.writeUInt32LE(p,ee.CENOFF),R},toJSON:function(){let R=function(A){return A+" bytes"};return{made:t,version:e,flags:n,method:fo.methodToString(r),time:this.time,crc:"0x"+s.toString(16).toUpperCase(),compressedSize:R(o),size:R(a),fileNameLength:R(l),extraLength:R(c),commentLength:R(u),diskNumStart:d,inAttr:E,attr:f,offset:p,centralHeaderSize:R(ee.CENHDR+l+c+u)}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var Dz=O((hFe,Lz)=>{var Dc=Lc(),It=Dc.Constants;Lz.exports=function(){var t=0,e=0,n=0,r=0,i=0;return{get diskEntries(){return t},set diskEntries(s){t=e=s},get totalEntries(){return e},set totalEntries(s){e=t=s},get size(){return n},set size(s){n=s},get offset(){return r},set offset(s){r=s},get commentLength(){return i},set commentLength(s){i=s},get mainHeaderSize(){return It.ENDHDR+i},loadFromBinary:function(s){if((s.length!==It.ENDHDR||s.readUInt32LE(0)!==It.ENDSIG)&&(s.length<It.ZIP64HDR||s.readUInt32LE(0)!==It.ZIP64SIG))throw Dc.Errors.INVALID_END();s.readUInt32LE(0)===It.ENDSIG?(t=s.readUInt16LE(It.ENDSUB),e=s.readUInt16LE(It.ENDTOT),n=s.readUInt32LE(It.ENDSIZ),r=s.readUInt32LE(It.ENDOFF),i=s.readUInt16LE(It.ENDCOM)):(t=Dc.readBigUInt64LE(s,It.ZIP64SUB),e=Dc.readBigUInt64LE(s,It.ZIP64TOT),n=Dc.readBigUInt64LE(s,It.ZIP64SIZE),r=Dc.readBigUInt64LE(s,It.ZIP64OFF),i=0)},toBinary:function(){var s=Buffer.alloc(It.ENDHDR+i);return s.writeUInt32LE(It.ENDSIG,0),s.writeUInt32LE(0,4),s.writeUInt16LE(t,It.ENDSUB),s.writeUInt16LE(e,It.ENDTOT),s.writeUInt32LE(n,It.ENDSIZ),s.writeUInt32LE(r,It.ENDOFF),s.writeUInt16LE(i,It.ENDCOM),s.fill(" ",It.ENDHDR),s},toJSON:function(){let s=function(o,a){let l=o.toString(16).toUpperCase();for(;l.length<a;)l="0"+l;return"0x"+l};return{diskEntries:t,totalEntries:e,size:n+" bytes",offset:s(r,4),commentLength:i}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var Cb=O(Ob=>{Ob.EntryHeader=wz();Ob.MainHeader=Dz()});var xz=O((TFe,Pz)=>{Pz.exports=function(t){var e=require("zlib"),n={chunkSize:(parseInt(t.length/1024)+1)*1024};return{deflate:function(){return e.deflateRawSync(t,n)},deflateAsync:function(r){var i=e.createDeflateRaw(n),s=[],o=0;i.on("data",function(a){s.push(a),o+=a.length}),i.on("end",function(){var a=Buffer.alloc(o),l=0;a.fill(0);for(var c=0;c<s.length;c++){var u=s[c];u.copy(a,l),l+=u.length}r&&r(a)}),i.end(t)}}}});var Mz=O((SFe,vz)=>{var Vbe=+(process.versions?process.versions.node:"").split(".")[0]||0;vz.exports=function(t,e){var n=require("zlib");let r=Vbe>=15&&e>0?{maxOutputLength:e}:{};return{inflate:function(){return n.inflateRawSync(t,r)},inflateAsync:function(i){var s=n.createInflateRaw(r),o=[],a=0;s.on("data",function(l){o.push(l),a+=l.length}),s.on("end",function(){var l=Buffer.alloc(a),c=0;l.fill(0);for(var u=0;u<o.length;u++){var d=o[u];d.copy(l,c),c+=d.length}i&&i(l)}),s.end(t)}}}});var Gz=O((RFe,Hz)=>{"use strict";var{randomFillSync:Uz}=require("crypto"),qbe=vS(),Xbe=new Uint32Array(256).map((t,e)=>{for(let n=0;n<8;n++)(e&1)!==0?e=e>>>1^3988292384:e>>>=1;return e>>>0}),Fz=(t,e)=>Math.imul(t,e)>>>0,Bz=(t,e)=>Xbe[(t^e)&255]^t>>>8,Ef=()=>typeof Uz=="function"?Uz(Buffer.alloc(12)):Ef.node();Ef.node=()=>{let t=Buffer.alloc(12),e=t.length;for(let n=0;n<e;n++)t[n]=Math.random()*256&255;return t};var MS={genSalt:Ef};function US(t){let e=Buffer.isBuffer(t)?t:Buffer.from(t);this.keys=new Uint32Array([305419896,591751049,878082192]);for(let n=0;n<e.length;n++)this.updateKeys(e[n])}US.prototype.updateKeys=function(t){let e=this.keys;return e[0]=Bz(e[0],t),e[1]+=e[0]&255,e[1]=Fz(e[1],134775813)+1,e[2]=Bz(e[2],e[1]>>>24),t};US.prototype.next=function(){let t=(this.keys[2]|2)>>>0;return Fz(t,t^1)>>8&255};function zbe(t){let e=new US(t);return function(n){let r=Buffer.alloc(n.length),i=0;for(let s of n)r[i++]=e.updateKeys(s^e.next());return r}}function jbe(t){let e=new US(t);return function(n,r,i=0){r||(r=Buffer.alloc(n.length));for(let s of n){let o=e.next();r[i++]=s^o,e.updateKeys(s)}return r}}function Kbe(t,e,n){if(!t||!Buffer.isBuffer(t)||t.length<12)return Buffer.alloc(0);let r=zbe(n),i=r(t.slice(0,12)),s=(e.flags&8)===8?e.timeHighByte:e.crc>>>24;if(i[11]!==s)throw qbe.WRONG_PASSWORD();return r(t.slice(12))}function Jbe(t){Buffer.isBuffer(t)&&t.length>=12?MS.genSalt=function(){return t.slice(0,12)}:t==="node"?MS.genSalt=Ef.node:MS.genSalt=Ef}function Qbe(t,e,n,r=!1){t==null&&(t=Buffer.alloc(0)),Buffer.isBuffer(t)||(t=Buffer.from(t.toString()));let i=jbe(n),s=MS.genSalt();s[11]=e.crc>>>24&255,r&&(s[10]=e.crc>>>16&255);let o=Buffer.alloc(t.length+12);return i(s,o),i(t,o,12)}Hz.exports={decrypt:Kbe,encrypt:Qbe,_salter:Jbe}});var $z=O(BS=>{BS.Deflater=xz();BS.Inflater=Mz();BS.ZipCrypto=Gz()});var yb=O((mFe,Wz)=>{var Qe=Lc(),Zbe=Cb(),bt=Qe.Constants,bb=$z();Wz.exports=function(t,e){var n=new Zbe.EntryHeader,r=Buffer.alloc(0),i=Buffer.alloc(0),s=!1,o=null,a=Buffer.alloc(0),l=Buffer.alloc(0),c=!0;let u=t,d=typeof u.decoder=="object"?u.decoder:Qe.decoder;c=d.hasOwnProperty("efs")?d.efs:!1;function E(){return!e||!(e instanceof Uint8Array)?Buffer.alloc(0):(l=n.loadLocalHeaderFromBinary(e),e.slice(n.realDataOffset,n.realDataOffset+n.compressedSize))}function f(R){if(n.flags_desc){let A={},I=n.realDataOffset+n.compressedSize;if(e.readUInt32LE(I)==bt.LOCSIG||e.readUInt32LE(I)==bt.CENSIG)throw Qe.Errors.DESCRIPTOR_NOT_EXIST();if(e.readUInt32LE(I)==bt.EXTSIG)A.crc=e.readUInt32LE(I+bt.EXTCRC),A.compressedSize=e.readUInt32LE(I+bt.EXTSIZ),A.size=e.readUInt32LE(I+bt.EXTLEN);else if(e.readUInt16LE(I+12)===19280)A.crc=e.readUInt32LE(I+bt.EXTCRC-4),A.compressedSize=e.readUInt32LE(I+bt.EXTSIZ-4),A.size=e.readUInt32LE(I+bt.EXTLEN-4);else throw Qe.Errors.DESCRIPTOR_UNKNOWN();if(A.compressedSize!==n.compressedSize||A.size!==n.size||A.crc!==n.crc)throw Qe.Errors.DESCRIPTOR_FAULTY();if(Qe.crc32(R)!==A.crc)return!1}else if(Qe.crc32(R)!==n.localHeader.crc)return!1;return!0}function p(R,A,I){if(typeof A>"u"&&typeof R=="string"&&(I=R,R=void 0),s)return R&&A&&A(Buffer.alloc(0),Qe.Errors.DIRECTORY_CONTENT_ERROR()),Buffer.alloc(0);var w=E();if(w.length===0)return R&&A&&A(w),w;if(n.encrypted){if(typeof I!="string"&&!Buffer.isBuffer(I))throw Qe.Errors.INVALID_PASS_PARAM();w=bb.ZipCrypto.decrypt(w,n,I)}var g=Buffer.alloc(n.size);switch(n.method){case Qe.Constants.STORED:if(w.copy(g),f(g))return R&&A&&A(g),g;throw R&&A&&A(g,Qe.Errors.BAD_CRC()),Qe.Errors.BAD_CRC();case Qe.Constants.DEFLATED:var L=new bb.Inflater(w,n.size);if(R)L.inflateAsync(function(b){b.copy(b,0),A&&(f(b)?A(b):A(b,Qe.Errors.BAD_CRC()))});else{if(L.inflate(g).copy(g,0),!f(g))throw Qe.Errors.BAD_CRC(`"${d.decode(r)}"`);return g}break;default:throw R&&A&&A(Buffer.alloc(0),Qe.Errors.UNKNOWN_METHOD()),Qe.Errors.UNKNOWN_METHOD()}}function h(R,A){if((!o||!o.length)&&Buffer.isBuffer(e))return R&&A&&A(E()),E();if(o.length&&!s){var I;switch(n.method){case Qe.Constants.STORED:return n.compressedSize=n.size,I=Buffer.alloc(o.length),o.copy(I),R&&A&&A(I),I;default:case Qe.Constants.DEFLATED:var w=new bb.Deflater(o);if(R)w.deflateAsync(function(L){I=Buffer.alloc(L.length),n.compressedSize=L.length,L.copy(I),A&&A(I)});else{var g=w.deflate();return n.compressedSize=g.length,g}w=null;break}}else if(R&&A)A(Buffer.alloc(0));else return Buffer.alloc(0)}function T(R,A){return(R.readUInt32LE(A+4)<<4)+R.readUInt32LE(A)}function S(R){try{for(var A=0,I,w,g;A+4<R.length;)I=R.readUInt16LE(A),A+=2,w=R.readUInt16LE(A),A+=2,g=R.slice(A,A+w),A+=w,bt.ID_ZIP64===I&&m(g)}catch{throw Qe.Errors.EXTRA_FIELD_PARSE_ERROR()}}function m(R){var A,I,w,g;R.length>=bt.EF_ZIP64_SCOMP&&(A=T(R,bt.EF_ZIP64_SUNCOMP),n.size===bt.EF_ZIP64_OR_32&&(n.size=A)),R.length>=bt.EF_ZIP64_RHO&&(I=T(R,bt.EF_ZIP64_SCOMP),n.compressedSize===bt.EF_ZIP64_OR_32&&(n.compressedSize=I)),R.length>=bt.EF_ZIP64_DSN&&(w=T(R,bt.EF_ZIP64_RHO),n.offset===bt.EF_ZIP64_OR_32&&(n.offset=w)),R.length>=bt.EF_ZIP64_DSN+4&&(g=R.readUInt32LE(bt.EF_ZIP64_DSN),n.diskNumStart===bt.EF_ZIP64_OR_16&&(n.diskNumStart=g))}return{get entryName(){return d.decode(r)},get rawEntryName(){return r},set entryName(R){r=Qe.toBuffer(R,d.encode);var A=r[r.length-1];s=A===47||A===92,n.fileNameLength=r.length},get efs(){return typeof c=="function"?c(this.entryName):c},get extra(){return a},set extra(R){a=R,n.extraLength=R.length,S(R)},get comment(){return d.decode(i)},set comment(R){if(i=Qe.toBuffer(R,d.encode),n.commentLength=i.length,i.length>65535)throw Qe.Errors.COMMENT_TOO_LONG()},get name(){var R=d.decode(r);return s?R.substr(R.length-1).split("/").pop():R.split("/").pop()},get isDirectory(){return s},getCompressedData:function(){return h(!1,null)},getCompressedDataAsync:function(R){h(!0,R)},setData:function(R){o=Qe.toBuffer(R,Qe.decoder.encode),!s&&o.length?(n.size=o.length,n.method=Qe.Constants.DEFLATED,n.crc=Qe.crc32(R),n.changed=!0):n.method=Qe.Constants.STORED},getData:function(R){return n.changed?o:p(!1,null,R)},getDataAsync:function(R,A){n.changed?R(o):p(!0,R,A)},set attr(R){n.attr=R},get attr(){return n.attr},set header(R){n.loadFromBinary(R)},get header(){return n},packCentralHeader:function(){n.flags_efs=this.efs,n.extraLength=a.length;var R=n.centralHeaderToBinary(),A=Qe.Constants.CENHDR;return r.copy(R,A),A+=r.length,a.copy(R,A),A+=n.extraLength,i.copy(R,A),R},packLocalHeader:function(){let R=0;n.flags_efs=this.efs,n.extraLocalLength=l.length;let A=n.localHeaderToBinary(),I=Buffer.alloc(A.length+r.length+n.extraLocalLength);return A.copy(I,R),R+=A.length,r.copy(I,R),R+=r.length,l.copy(I,R),R+=l.length,I},toJSON:function(){let R=function(A){return"<"+(A&&A.length+" bytes buffer"||"null")+">"};return{entryName:this.entryName,name:this.name,comment:this.comment,isDirectory:this.isDirectory,header:n.toJSON(),compressedData:R(e),data:R(o)}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var Vz=O((gFe,Yz)=>{var kz=yb(),eye=Cb(),On=Lc();Yz.exports=function(t,e){var n=[],r={},i=Buffer.alloc(0),s=new eye.MainHeader,o=!1,a=null;let l=new Set,c=e,{noSort:u,decoder:d}=c;t?p(c.readEntries):o=!0;function E(){let T=new Set;for(let S of Object.keys(r)){let m=S.split("/");if(m.pop(),!!m.length)for(let R=0;R<m.length;R++){let A=m.slice(0,R+1).join("/")+"/";T.add(A)}}for(let S of T)if(!(S in r)){let m=new kz(c);m.entryName=S,m.attr=16,m.temporary=!0,n.push(m),r[m.entryName]=m,l.add(m)}}function f(){if(o=!0,r={},s.diskEntries>(t.length-s.offset)/On.Constants.CENHDR)throw On.Errors.DISK_ENTRY_TOO_LARGE();n=new Array(s.diskEntries);for(var T=s.offset,S=0;S<n.length;S++){var m=T,R=new kz(c,t);R.header=t.slice(m,m+=On.Constants.CENHDR),R.entryName=t.slice(m,m+=R.header.fileNameLength),R.header.extraLength&&(R.extra=t.slice(m,m+=R.header.extraLength)),R.header.commentLength&&(R.comment=t.slice(m,m+R.header.commentLength)),T+=R.header.centralHeaderSize,n[S]=R,r[R.entryName]=R}l.clear(),E()}function p(T){var S=t.length-On.Constants.ENDHDR,m=Math.max(0,S-65535),R=m,A=t.length,I=-1,w=0;for(typeof c.trailingSpace=="boolean"&&c.trailingSpace&&(m=0),S;S>=R;S--)if(t[S]===80){if(t.readUInt32LE(S)===On.Constants.ENDSIG){I=S,w=S,A=S+On.Constants.ENDHDR,R=S-On.Constants.END64HDR;continue}if(t.readUInt32LE(S)===On.Constants.END64SIG){R=m;continue}if(t.readUInt32LE(S)===On.Constants.ZIP64SIG){I=S,A=S+On.readBigUInt64LE(t,S+On.Constants.ZIP64SIZE)+On.Constants.ZIP64LEAD;break}}if(I==-1)throw On.Errors.INVALID_FORMAT();s.loadFromBinary(t.slice(I,A)),s.commentLength&&(i=t.slice(w+On.Constants.ENDHDR)),T&&f()}function h(){n.length>1&&!u&&n.sort((T,S)=>T.entryName.toLowerCase().localeCompare(S.entryName.toLowerCase()))}return{get entries(){return o||f(),n.filter(T=>!l.has(T))},get comment(){return d.decode(i)},set comment(T){i=On.toBuffer(T,d.encode),s.commentLength=i.length},getEntryCount:function(){return o?n.length:s.diskEntries},forEach:function(T){this.entries.forEach(T)},getEntry:function(T){return o||f(),r[T]||null},setEntry:function(T){o||f(),n.push(T),r[T.entryName]=T,s.totalEntries=n.length},deleteFile:function(T,S=!0){o||f();let m=r[T];this.getEntryChildren(m,S).map(A=>A.entryName).forEach(this.deleteEntry)},deleteEntry:function(T){o||f();let S=r[T],m=n.indexOf(S);m>=0&&(n.splice(m,1),delete r[T],s.totalEntries=n.length)},getEntryChildren:function(T,S=!0){if(o||f(),typeof T=="object")if(T.isDirectory&&S){let m=[],R=T.entryName;for(let A of n)A.entryName.startsWith(R)&&m.push(A);return m}else return[T];return[]},getChildCount:function(T){if(T&&T.isDirectory){let S=this.getEntryChildren(T);return S.includes(T)?S.length-1:S.length}return 0},compressToBuffer:function(){o||f(),h();let T=[],S=[],m=0,R=0;s.size=0,s.offset=0;let A=0;for(let g of this.entries){let L=g.getCompressedData();g.header.offset=R;let b=g.packLocalHeader(),P=b.length+L.length;R+=P,T.push(b),T.push(L);let v=g.packCentralHeader();S.push(v),s.size+=v.length,m+=P+v.length,A++}m+=s.mainHeaderSize,s.offset=R,s.totalEntries=A,R=0;let I=Buffer.alloc(m);for(let g of T)g.copy(I,R),R+=g.length;for(let g of S)g.copy(I,R),R+=g.length;let w=s.toBinary();return i&&i.copy(w,On.Constants.ENDHDR),w.copy(I,R),t=I,o=!1,I},toAsyncBuffer:function(T,S,m,R){try{o||f(),h();let A=[],I=[],w=0,g=0,L=0;s.size=0,s.offset=0;let b=function(P){if(P.length>0){let v=P.shift(),H=v.entryName+v.extra.toString();m&&m(H),v.getCompressedDataAsync(function($){R&&R(H),v.header.offset=g;let j=v.packLocalHeader(),J=j.length+$.length;g+=J,A.push(j),A.push($);let Z=v.packCentralHeader();I.push(Z),s.size+=Z.length,w+=J+Z.length,L++,b(P)})}else{w+=s.mainHeaderSize,s.offset=g,s.totalEntries=L,g=0;let v=Buffer.alloc(w);A.forEach(function($){$.copy(v,g),g+=$.length}),I.forEach(function($){$.copy(v,g),g+=$.length});let H=s.toBinary();i&&i.copy(H,On.Constants.ENDHDR),H.copy(v,g),t=v,o=!1,T(v)}};b(Array.from(this.entries))}catch(A){S(A)}}}}});var zz=O((IFe,Xz)=>{var _t=Lc(),yt=require("path"),tye=yb(),nye=Vz(),Ca=(...t)=>_t.findLast(t,e=>typeof e=="boolean"),qz=(...t)=>_t.findLast(t,e=>typeof e=="string"),rye=(...t)=>_t.findLast(t,e=>typeof e=="function"),iye={noSort:!1,readEntries:!1,method:_t.Constants.NONE,fs:null};Xz.exports=function(t,e){let n=null,r=Object.assign(Object.create(null),iye);t&&typeof t=="object"&&(t instanceof Uint8Array||(Object.assign(r,t),t=r.input?r.input:void 0,r.input&&delete r.input),Buffer.isBuffer(t)&&(n=t,r.method=_t.Constants.BUFFER,t=void 0)),Object.assign(r,e);let i=new _t(r);if((typeof r.decoder!="object"||typeof r.decoder.encode!="function"||typeof r.decoder.decode!="function")&&(r.decoder=_t.decoder),t&&typeof t=="string")if(i.fs.existsSync(t))r.method=_t.Constants.FILE,r.filename=t,n=i.fs.readFileSync(t);else throw _t.Errors.INVALID_FILENAME();let s=new nye(n,r),{canonical:o,sanitize:a,zipnamefix:l}=_t;function c(f){if(f&&s){var p;if(typeof f=="string"&&(p=s.getEntry(yt.posix.normalize(f))),typeof f=="object"&&typeof f.entryName<"u"&&typeof f.header<"u"&&(p=s.getEntry(f.entryName)),p)return p}return null}function u(f){let{join:p,normalize:h,sep:T}=yt.posix;return p(".",h(T+f.split("\\").join(T)+T))}function d(f){return f instanceof RegExp?(function(p){return function(h){return p.test(h)}})(f):typeof f!="function"?()=>!0:f}let E=(f,p)=>{let h=p.slice(-1);return h=h===i.sep?i.sep:"",yt.relative(f,p)+h};return{readFile:function(f,p){var h=c(f);return h&&h.getData(p)||null},childCount:function(f){let p=c(f);if(p)return s.getChildCount(p)},readFileAsync:function(f,p){var h=c(f);h?h.getDataAsync(p):p(null,"getEntry failed for:"+f)},readAsText:function(f,p){var h=c(f);if(h){var T=h.getData();if(T&&T.length)return T.toString(p||"utf8")}return""},readAsTextAsync:function(f,p,h){var T=c(f);T?T.getDataAsync(function(S,m){if(m){p(S,m);return}S&&S.length?p(S.toString(h||"utf8")):p("")}):p("")},deleteFile:function(f,p=!0){var h=c(f);h&&s.deleteFile(h.entryName,p)},deleteEntry:function(f){var p=c(f);p&&s.deleteEntry(p.entryName)},addZipComment:function(f){s.comment=f},getZipComment:function(){return s.comment||""},addZipEntryComment:function(f,p){var h=c(f);h&&(h.comment=p)},getZipEntryComment:function(f){var p=c(f);return p&&p.comment||""},updateFile:function(f,p){var h=c(f);h&&h.setData(p)},addLocalFile:function(f,p,h,T){if(i.fs.existsSync(f)){p=p?u(p):"";let S=yt.win32.basename(yt.win32.normalize(f));p+=h||S;let m=i.fs.statSync(f),R=m.isFile()?i.fs.readFileSync(f):Buffer.alloc(0);m.isDirectory()&&(p+=i.sep),this.addFile(p,R,T,m)}else throw _t.Errors.FILE_NOT_FOUND(f)},addLocalFileAsync:function(f,p){f=typeof f=="object"?f:{localPath:f};let h=yt.resolve(f.localPath),{comment:T}=f,{zipPath:S,zipName:m}=f,R=this;i.fs.stat(h,function(A,I){if(A)return p(A,!1);S=S?u(S):"";let w=yt.win32.basename(yt.win32.normalize(h));if(S+=m||w,I.isFile())i.fs.readFile(h,function(g,L){return g?p(g,!1):(R.addFile(S,L,T,I),setImmediate(p,void 0,!0))});else if(I.isDirectory())return S+=i.sep,R.addFile(S,Buffer.alloc(0),T,I),setImmediate(p,void 0,!0)})},addLocalFolder:function(f,p,h){if(h=d(h),p=p?u(p):"",f=yt.normalize(f),i.fs.existsSync(f)){let T=i.findFiles(f),S=this;if(T.length)for(let m of T){let R=yt.join(p,E(f,m));h(R)&&S.addLocalFile(m,yt.dirname(R))}}else throw _t.Errors.FILE_NOT_FOUND(f)},addLocalFolderAsync:function(f,p,h,T){T=d(T),h=h?u(h):"",f=yt.normalize(f);var S=this;i.fs.open(f,"r",function(m){if(m&&m.code==="ENOENT")p(void 0,_t.Errors.FILE_NOT_FOUND(f));else if(m)p(void 0,m);else{var R=i.findFiles(f),A=-1,I=function(){if(A+=1,A<R.length){var w=R[A],g=E(f,w).split("\\").join("/");g=g.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\x20-\x7E]/g,""),T(g)?i.fs.stat(w,function(L,b){L&&p(void 0,L),b.isFile()?i.fs.readFile(w,function(P,v){P?p(void 0,P):(S.addFile(h+g,v,"",b),I())}):(S.addFile(h+g+"/",Buffer.alloc(0),"",b),I())}):process.nextTick(()=>{I()})}else p(!0,void 0)};I()}})},addLocalFolderAsync2:function(f,p){let h=this;f=typeof f=="object"?f:{localPath:f},localPath=yt.resolve(u(f.localPath));let{zipPath:T,filter:S,namefix:m}=f;S instanceof RegExp?S=(function(I){return function(w){return I.test(w)}})(S):typeof S!="function"&&(S=function(){return!0}),T=T?u(T):"",m=="latin1"&&(m=I=>I.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\x20-\x7E]/g,"")),typeof m!="function"&&(m=I=>I);let R=I=>yt.join(T,m(E(localPath,I))),A=I=>yt.win32.basename(yt.win32.normalize(m(I)));i.fs.open(localPath,"r",function(I){I&&I.code==="ENOENT"?p(void 0,_t.Errors.FILE_NOT_FOUND(localPath)):I?p(void 0,I):i.findFilesAsync(localPath,function(w,g){if(w)return p(w);g=g.filter(L=>S(R(L))),g.length||p(void 0,!1),setImmediate(g.reverse().reduce(function(L,b){return function(P,v){if(P||v===!1)return setImmediate(L,P,!1);h.addLocalFileAsync({localPath:b,zipPath:yt.dirname(R(b)),zipName:A(b)},L)}},p))})})},addLocalFolderPromise:function(f,p){return new Promise((h,T)=>{this.addLocalFolderAsync2(Object.assign({localPath:f},p),(S,m)=>{S&&T(S),m&&h(this)})})},addFile:function(f,p,h,T){f=l(f);let S=c(f),m=S!=null;m||(S=new tye(r),S.entryName=f),S.comment=h||"";let R=typeof T=="object"&&T instanceof i.fs.Stats;R&&(S.header.time=T.mtime);var A=S.isDirectory?16:0;let I=S.isDirectory?16384:32768;return R?I|=4095&T.mode:typeof T=="number"?I|=4095&T:I|=S.isDirectory?493:420,A=(A|I<<16)>>>0,S.attr=A,S.setData(p),m||s.setEntry(S),S},getEntries:function(f){return s.password=f,s?s.entries:[]},getEntry:function(f){return c(f)},getEntryCount:function(){return s.getEntryCount()},forEach:function(f){return s.forEach(f)},extractEntryTo:function(f,p,h,T,S,m){T=Ca(!1,T),S=Ca(!1,S),h=Ca(!0,h),m=qz(S,m);var R=c(f);if(!R)throw _t.Errors.NO_ENTRY();var A=o(R.entryName),I=a(p,m&&!R.isDirectory?m:h?A:yt.basename(A));if(R.isDirectory){var w=s.getEntryChildren(R);return w.forEach(function(b){if(b.isDirectory)return;var P=b.getData();if(!P)throw _t.Errors.CANT_EXTRACT_FILE();var v=o(b.entryName),H=a(p,h?v:yt.basename(v));let $=S?b.header.fileAttr:void 0;i.writeFileTo(H,P,T,$)}),!0}var g=R.getData(s.password);if(!g)throw _t.Errors.CANT_EXTRACT_FILE();if(i.fs.existsSync(I)&&!T)throw _t.Errors.CANT_OVERRIDE();let L=S?f.header.fileAttr:void 0;return i.writeFileTo(I,g,T,L),!0},test:function(f){if(!s)return!1;for(var p in s.entries)try{if(p.isDirectory)continue;var h=s.entries[p].getData(f);if(!h)return!1}catch{return!1}return!0},extractAllTo:function(f,p,h,T){if(h=Ca(!1,h),T=qz(h,T),p=Ca(!1,p),!s)throw _t.Errors.NO_ZIP();s.entries.forEach(function(S){var m=a(f,o(S.entryName));if(S.isDirectory){i.makeDir(m);return}var R=S.getData(T);if(!R)throw _t.Errors.CANT_EXTRACT_FILE();let A=h?S.header.fileAttr:void 0;i.writeFileTo(m,R,p,A);try{i.fs.utimesSync(m,S.header.time,S.header.time)}catch{throw _t.Errors.CANT_EXTRACT_FILE()}})},extractAllToAsync:function(f,p,h,T){if(T=rye(p,h,T),h=Ca(!1,h),p=Ca(!1,p),!T)return new Promise((I,w)=>{this.extractAllToAsync(f,p,h,function(g){g?w(g):I(this)})});if(!s){T(_t.Errors.NO_ZIP());return}f=yt.resolve(f);let S=I=>a(f,yt.normalize(o(I.entryName))),m=(I,w)=>new Error(I+': "'+w+'"'),R=[],A=[];s.entries.forEach(I=>{I.isDirectory?R.push(I):A.push(I)});for(let I of R){let w=S(I),g=h?I.header.fileAttr:void 0;try{i.makeDir(w),g&&i.fs.chmodSync(w,g),i.fs.utimesSync(w,I.header.time,I.header.time)}catch{T(m("Unable to create folder",w))}}A.reverse().reduce(function(I,w){return function(g){if(g)I(g);else{let L=yt.normalize(o(w.entryName)),b=a(f,L);w.getDataAsync(function(P,v){if(v)I(v);else if(!P)I(_t.Errors.CANT_EXTRACT_FILE());else{let H=h?w.header.fileAttr:void 0;i.writeFileToAsync(b,P,p,H,function($){$||I(m("Unable to write file",b)),i.fs.utimes(b,w.header.time,w.header.time,function(j){j?I(m("Unable to set times",b)):I()})})}})}}},T)()},writeZip:function(f,p){if(arguments.length===1&&typeof f=="function"&&(p=f,f=""),!f&&r.filename&&(f=r.filename),!!f){var h=s.compressToBuffer();if(h){var T=i.writeFileTo(f,h,!0);typeof p=="function"&&p(T?null:new Error("failed"),"")}}},writeZipPromise:function(f,p){let{overwrite:h,perm:T}=Object.assign({overwrite:!0},p);return new Promise((S,m)=>{!f&&r.filename&&(f=r.filename),f||m("ADM-ZIP: ZIP File Name Missing"),this.toBufferPromise().then(R=>{let A=I=>I?S(I):m("ADM-ZIP: Wasn't able to write zip file");i.writeFileToAsync(f,R,h,T,A)},m)})},toBufferPromise:function(){return new Promise((f,p)=>{s.toAsyncBuffer(f,p)})},toBuffer:function(f,p,h,T){return typeof f=="function"?(s.toAsyncBuffer(f,p,h,T),null):s.compressToBuffer()}}}});var ba,jz=W(()=>{"use strict";ba=class{constructor(e){this._isSheet=!1;this._workbookId=0;this._recId=null;this._workbookName=null;this._inCellXf=!1;this._inCellStyleXf=!1;this._inNumberFormat=!1;this._parentCellStyleXf=0;this._numberFormatIndex=0;this._format=0;this._formatString=null;this._sharedStringValue=null;this._sharedStringUniqueCount=0;this._cellType=0;this._intValue=0;this._doubleVal=0;this._boolValue=!1;this._stringValue=null;this._columnNum=-1;this._xfIndex=0;this._readCell=!1;this._rowIndex=-1;this._recordStart=0;this._xfIndexToNumFmtId=[];this._customNumFmts=new Set;if(!Buffer.isBuffer(e))throw new Error("BiffReaderWriter expects a Buffer");this.buffer=e,this.pos=0,this.length=e.length}_tryReadVariableValue(){if(this.pos>=this.length)return null;let e=this.buffer[this.pos++],n=(e&127)>>>0;if((e&128)===0)return n;if(this.pos>=this.length)return null;let r=this.buffer[this.pos++];if(n=((r&127)<<7|n)>>>0,(r&128)===0)return n;if(this.pos>=this.length)return null;let i=this.buffer[this.pos++];return n=((i&127)<<14|n)>>>0,(i&128)===0?n:this.pos>=this.length?null:(n=((this.buffer[this.pos++]&127)<<21|n)>>>0,n)}_getDWord(e){return this.buffer.readUInt32LE(this._recordStart+e)}_getInt32(e){return this.buffer.readInt32LE(this._recordStart+e)}_getWord(e){return this.buffer.readUInt16LE(this._recordStart+e)}_getByte(e){return this.buffer[this._recordStart+e]}_getDouble(e){return this.buffer.readDoubleLE(this._recordStart+e)}_getString(e,n){let r=this._recordStart+e,i=r+n*2;return i>this.buffer.length?"":this.buffer.toString("utf16le",r,i)}_getNullableString(e){let n=this._getDWord(e.val);if(e.val+=4,n===4294967295)return null;let r=this._getString(e.val,n);return e.val+=n*2,r}readWorkbook(){let e=this._tryReadVariableValue(),n=this._tryReadVariableValue();if(e===null||n===null)return!1;let r=this.pos;if(r+n>this.length)return!1;if(this._recordStart=r,this.pos+=n,this._isSheet=!1,e===156){this._workbookId=this._getDWord(4);let i={val:8};this._recId=this._getNullableString(i);let s=this._getDWord(i.val);this._workbookName=this._getString(i.val+4,s),this._isSheet=!0}return!0}readSharedStrings(){let e=this._tryReadVariableValue(),n=this._tryReadVariableValue();if(e===null||n===null)return!1;let r=this.pos;if(r+n>this.length)return!1;if(this._recordStart=r,this.pos+=n,this._sharedStringValue=null,e===19){let i=this._getDWord(1);this._sharedStringValue=this._getString(5,i)}else e===159&&(this._sharedStringUniqueCount=this._getDWord(4));return!0}readStyles(){let e=this._tryReadVariableValue(),n=this._tryReadVariableValue();if(e===null||n===null)return!1;let r=this.pos;if(r+n>this.length)return!1;this._recordStart=r,this.pos+=n;let i=617,s=618,o=626,a=627,l=615,c=616,u=47,d=44;switch(e){case i:this._inCellXf=!0;break;case s:this._inCellXf=!1;break;case o:this._inCellStyleXf=!0;break;case a:this._inCellStyleXf=!1;break;case l:this._inNumberFormat=!0;break;case c:this._inNumberFormat=!1;break;case u:this._inCellXf&&(this._parentCellStyleXf=this._getWord(0),this._numberFormatIndex=this._getWord(2),this._xfIndexToNumFmtId.push(this._numberFormatIndex));break;case d:if(this._inNumberFormat){this._format=this._getWord(0);let E=this._getDWord(2);this._formatString=this._getString(6,E);let f=this._formatString.toLowerCase();(f.includes("yy")||f.includes("mm")||f.includes("dd")||f.includes("h:mm"))&&this._customNumFmts.add(this._format)}break}return!0}_getRkNumber(e){let n=this._getByte(e),r=0;if((n&2)!==0)r=this._getInt32(e)>>2;else{let s=this._getInt32(e)&4294967292,o=Buffer.allocUnsafe(8);o.writeInt32LE(0,0),o.writeInt32LE(s,4),r=o.readDoubleLE(0)}return(n&1)!==0&&(r/=100),r}readWorksheet(){let e=this._tryReadVariableValue(),n=this._tryReadVariableValue();if(e===null||n===null)return!1;let r=this.pos;if(r+n>this.length)return!1;this._recordStart=r,this.pos+=n,this._readCell=!1,this._columnNum=-1;let i=0,s=1,o=2,a=3,l=4,c=5,u=6,d=7,E=8,f=9,p=10,h=11;switch(e){case i:this._rowIndex=this._getInt32(0);break;case s:case a:case h:this._readCell=!0,this._cellType=0;break;case o:this._doubleVal=this._getRkNumber(8),this._readCell=!0,this._cellType=3;break;case l:case p:this._boolValue=this._getByte(8)===1,this._readCell=!0,this._cellType=4;break;case f:case c:this._doubleVal=this._getDouble(8),this._readCell=!0,this._cellType=3;break;case u:case E:{let T=this._getDWord(8);this._stringValue=this._getString(12,T),this._readCell=!0,this._cellType=5;break}case d:this._intValue=this._getDWord(8),this._readCell=!0,this._cellType=2;break}return this._readCell&&(this._columnNum=this._getDWord(0),this._xfIndex=this._getDWord(4)&16777215),!0}}});var Kz,FS,Jz=W(()=>{"use strict";Kz=Q(zz());_b();jz();FS=class extends yc{constructor(){super();this.zip=null;this.sharedStrings=[];this.styles=[];this.sheetNames=[];this.sheets=[];this._currentSheetIndex=-1;this._reader=null;this._currentRow=[];this._pendingRowIndex=-1;this._eof=!1;this.xfIdToNumFmtId=[];this.customDateFormats=null}async open(n,r=!0){this.zip=new Kz.default(n);let i=this.zip.getEntry("xl/workbook.bin");if(i){let a=i.getData(),l=new ba(a);for(;l.readWorkbook();)if(l._isSheet){let c=l._workbookName,u=l._recId;this.sheetNames.push(c),this.sheets.push({name:c,rId:u,path:null})}}let s=this.zip.getEntry("xl/_rels/workbook.bin.rels");if(s){let a=s.getData().toString("utf8"),l=/<Relationship[^>]*Id="([^"]*)"[^>]*Target="([^"]*)"/g,c,u={};for(;(c=l.exec(a))!==null;)u[c[1]]=c[2];for(let d of this.sheets){let E=u[d.rId];E&&(E.startsWith("/")&&(E=E.substring(1)),E.startsWith("xl/")||(E="xl/"+E),d.path=E)}}if(r){let a="xl/sharedStrings.bin";this.zip.getEntry(a)&&this._readSharedStrings(a)}let o="xl/styles.bin";this.zip.getEntry(o)&&this._readStyles(o),this.resultsCount=this.sheets.length,this._currentSheetIndex=-1}_readSharedStrings(n){let r=this.zip.getEntry(n);if(!r)return;let i=new ba(r.getData());for(;i.readSharedStrings();)i._sharedStringValue!==null&&this.sharedStrings.push(i._sharedStringValue)}_readStyles(n){let r=this.zip.getEntry(n);if(!r)return;let i=new ba(r.getData());for(;i.readStyles(););this.xfIdToNumFmtId=i._xfIndexToNumFmtId,this.customDateFormats=i._customNumFmts}getSheetNames(){return this.sheetNames}read(){if(this._currentSheetIndex===-1&&(this._currentSheetIndex=0,!this._initSheet(0))||this._eof)return!1;for(this._currentRow=[];;){if(!this._reader.readWorksheet())return this._eof=!0,!0;if(this._reader._rowIndex!==-1&&this._reader._rowIndex!==this._pendingRowIndex)return this._pendingRowIndex=this._reader._rowIndex,!0;if(this._reader._readCell){let r=this._reader._columnNum,i=null;switch(this._reader._cellType){case 2:i=this.sharedStrings[this._reader._intValue];break;case 3:{i=this._reader._doubleVal;let s=this._reader._xfIndex,o=0;if(this.xfIdToNumFmtId&&s<this.xfIdToNumFmtId.length&&(o=this.xfIdToNumFmtId[s]),o>=14&&o<=22||o>=45&&o<=47||this.customDateFormats&&this.customDateFormats.has(o))try{i=this.getDateTimeFromOaDate(i)}catch{}break}case 4:i=this._reader._boolValue;break;case 5:i=this._reader._stringValue;break;default:i=null}this._currentRow[r]=i,r>=this.fieldCount&&(this.fieldCount=r+1)}}}_initSheet(n){if(n>=this.sheets.length)return!1;let r=this.sheets[n],i=this.zip.getEntry(r.path);if(!i)return!1;for(this._reader=new ba(i.getData()),this._eof=!1,this._pendingRowIndex=-1;this._reader.readWorksheet();)if(this._reader._rowIndex!==-1)return this._pendingRowIndex=this._reader._rowIndex,!0;return this._eof=!0,!1}getValue(n){return n<0||n>=this._currentRow.length?null:this._currentRow[n]}}});var Zz={};pt(Zz,{ReaderFactory:()=>HS,default:()=>sye});var Qz,HS,sye,ej=W(()=>{"use strict";Qz=Q(require("path"));pz();Jz();HS=class{static create(e){let n=Qz.extname(e).toLowerCase();if(n===".xlsx")return new xS;if(n===".xlsb")return new FS;throw new Error(`Unsupported extension: ${n}`)}},sye=HS});var rj={};pt(rj,{ColumnTypeChooser:()=>Pc,NetezzaDataType:()=>Ui,NetezzaImporter:()=>GS,importDataToNetezza:()=>Db});async function Db(t,e,n,r,i){let s=Date.now(),o=null;try{if(!t||!jr.existsSync(t))return{success:!1,message:`Source file not found: ${t}`};if(!e)return{success:!1,message:"Target table name is required"};if(!n||!n.host)return{success:!1,message:"Connection details are required"};let l=jr.statSync(t).size,c=ya.extname(t).toLowerCase(),u=[".csv",".txt",".xlsx",".xlsb"];if(!u.includes(c))return{success:!1,message:`Unsupported file format: ${c}. Supported: ${u.join(", ")}`};r?.("Starting import process..."),r?.(`  Source file: ${t}`),r?.(`  Target table: ${e}`),r?.(`  File size: ${l.toLocaleString()} bytes`),r?.(`  File format: ${c}`);let d=new GS(t,e);await d.analyzeDataTypes(r),r?.("Preparing in-memory data stream...");let E=await d.createDataStream(r),f=d.getVirtualFileName();r?.(`Registered virtual stream: ${f}`);let p=yn();p&&p.registerImportStream?p.registerImportStream(f,E):r?.("Warning: NzConnection driver does not support stream registry. Import might fail.");let h=d.generateCreateTableSql();r?.("Generated SQL:"),r?.(h),r?.("Connecting to Netezza...");let T={host:n.host,port:n.port||5480,database:n.database,user:n.user,password:n.password},S=yn();o=new S(T),await o.connect();try{r?.("Executing CREATE TABLE with EXTERNAL data...");let R=o.createCommand(h);R.commandTimeout=i||3600;let A=d.getRowsCount();o.on("importProgress",I=>{let w=I,g=A>0?Math.round(w.percentComplete/100*A):0;r?.(`Importing: ${w.percentComplete}% complete (${g.toLocaleString()} / ${A.toLocaleString()} rows)`)}),await R.execute(),r?.("Import completed successfully")}finally{await o.close(),p&&p.unregisterImportStream&&p.unregisterImportStream(f)}let m=(Date.now()-s)/1e3;return{success:!0,message:"Import completed successfully",details:{sourceFile:t,targetTable:e,fileSize:l,format:c,rowsProcessed:d.getRowsCount(),rowsInserted:d.getRowsCount(),processingTime:`${m.toFixed(1)}s`,columns:d.getSqlHeaders().length,detectedDelimiter:d.getCsvDelimiter()}}}catch(a){let l=(Date.now()-s)/1e3;return{success:!1,message:`Import failed: ${a instanceof Error?a.message:String(a)}`,details:{processingTime:`${l.toFixed(1)}s`}}}finally{if(o&&o._connected)try{await o.close()}catch{}}}var jr,ya,nj,tj,wb,Ui,Pc,Lb,GS,$S=W(()=>{"use strict";jr=Q(require("fs")),ya=Q(require("path")),nj=require("stream"),tj=()=>new Promise(t=>setTimeout(t,0));try{let t=(ej(),Wi(Zz));wb=t.default||t.ReaderFactory||t}catch(t){console.error("libs/ExcelHelpersTs/ReaderFactory module not available",t)}Ui=class{constructor(e,n,r,i){this.dbType=e;this.precision=n;this.scale=r;this.length=i}toString(){return["BIGINT","DATE","DATETIME"].includes(this.dbType)?this.dbType:this.dbType==="NUMERIC"?`${this.dbType}(${this.precision},${this.scale})`:this.dbType==="NVARCHAR"?`${this.dbType}(${this.length})`:`TODO !!! ${this.dbType}`}},Pc=class{constructor(e="."){this.decimalDelimInCsv=".";this.firstTime=!0;this.currentType=new Ui("BIGINT"),this.decimalDelimInCsv=e}getType(e){let n=this.currentType.dbType,r=e.length;if(n==="BIGINT"&&/^\d+$/.test(e)&&r<15)return this.firstTime=!1,new Ui("BIGINT");let i=this.decimalDelimInCsv==="."?"\\.":this.decimalDelimInCsv,s=(e.match(new RegExp(`${i}`,"g"))||[]).length;if(["BIGINT","NUMERIC"].includes(n)&&s<=1){let a=e.replace(this.decimalDelimInCsv,"");if(/^\d+$/.test(a)&&r<15&&(!a.startsWith("0")||s>0||a==="0"))return this.firstTime=!1,new Ui("NUMERIC",16,6)}if((n==="DATE"||this.firstTime)&&(e.match(/-/g)||[]).length===2&&r>=8&&r<=10){let a=e.split("-");if(a.length===3&&a.every(l=>/^\d+$/.test(l)))try{let l=new Date(parseInt(a[0]),parseInt(a[1])-1,parseInt(a[2]));if(!isNaN(l.getTime()))return this.firstTime=!1,new Ui("DATE")}catch{}}if((n==="DATETIME"||this.firstTime)&&(e.match(/-/g)||[]).length===2&&r>=12&&r<=20){let a=e.match(/^(\d{4})-(\d{1,2})-(\d{1,2})[\s|T](\d{2}):(\d{2})(:?(\d{2}))?$/);if(a)try{let l=a[7]?parseInt(a[7]):0,c=new Date(parseInt(a[1]),parseInt(a[2])-1,parseInt(a[3]),parseInt(a[4]),parseInt(a[5]),l);if(!isNaN(c.getTime()))return this.firstTime=!1,new Ui("DATETIME")}catch{}}if((n==="DATETIME"||this.firstTime)&&(e.match(/\./g)||[]).length>=2){let a=e.match(/^(\d{1,2})\.(\d{1,2})\.(\d{4})(?:\s+(\d{1,2}):(\d{1,2})(?::(\d{1,2}))?)?$/);if(a)try{let l=parseInt(a[1]),c=parseInt(a[2])-1,u=parseInt(a[3]),d=a[4]?parseInt(a[4]):0,E=a[5]?parseInt(a[5]):0,f=a[6]?parseInt(a[6]):0;if(c>=0&&c<=11&&l>=1&&l<=31){let p=new Date(u,c,l,d,E,f);if(!isNaN(p.getTime())&&p.getFullYear()===u&&p.getMonth()===c&&p.getDate()===l)return this.firstTime=!1,new Ui("DATETIME")}}catch{}}let o=Math.max(r+5,20);return this.currentType.length!==void 0&&o<this.currentType.length&&(o=this.currentType.length),this.firstTime=!1,new Ui("NVARCHAR",void 0,void 0,o)}refreshCurrentType(e){return this.currentType=this.getType(e),this.currentType}},Lb=class extends nj.Readable{constructor(n,r,i){super();this.currentIndex=0;this.byteLength=0;this.lastReportedIndex=-1;this.lastReportTime=0;this.lastReportedMessage="";this.importer=n,this.rows=r,this.progressCallback=i,this.currentIndex=0,this.lastReportedIndex=-1,this.lastReportTime=0,this.lastReportedMessage="";try{this.byteLength=r.reduce((s,o)=>{let a=o.reduce((l,c)=>l+(c?c.length:0),0);return s+a+o.length},0)}catch{this.byteLength=1024*1024}}_read(n){try{let r=!0;for(;r&&this.currentIndex<this.rows.length;){let a=this.rows[this.currentIndex].map((l,c)=>this.importer.formatValue(l||"",c)).join(this.importer.getDelimiter())+this.importer.getRecordDelim();r=this.push(Buffer.from(a,"utf8")),this.currentIndex++}let i=this.rows.length;if(this.currentIndex>this.lastReportedIndex){let s=Date.now();if(this.currentIndex>=i||s-this.lastReportTime>=1e3){let c=`Importing: ${Math.floor(this.currentIndex/i*100)}% complete (${this.currentIndex.toLocaleString()} / ${i.toLocaleString()} rows)`,d=(this.currentIndex-(this.lastReportedIndex<0?0:this.lastReportedIndex))/i*100;c!==this.lastReportedMessage&&(this.progressCallback?.(c,d,!1),this.lastReportedIndex=this.currentIndex,this.lastReportTime=s,this.lastReportedMessage=c)}}this.currentIndex>=this.rows.length&&this.push(null)}catch(r){this.emit("error",r)}}},GS=class{constructor(e,n,r){this.delimiter="	";this.delimiterPlain="\\t";this.recordDelim=`
`;this.recordDelimPlain="\\n";this.escapechar="\\";this.csvDelimiter=",";this.excelData=[];this.isExcelFile=!1;this.sqlHeaders=[];this.dataTypes=[];this.rowsCount=0;this.valuesToEscape=[];this.filePath=e,this.targetTable=n,this.logDir=r||ya.join(ya.dirname(e),"netezza_logs");let i=ya.extname(e).toLowerCase();this.isExcelFile=[".xlsx",".xlsb"].includes(i),this.virtualFileName=`virtual_import_${Date.now()}_${Math.floor(Math.random()*1e3)}.txt`,this.valuesToEscape=[this.escapechar,this.recordDelim,"\r",this.delimiter],jr.existsSync(this.logDir)||jr.mkdirSync(this.logDir,{recursive:!0})}getDelimiter(){return this.delimiter}getRecordDelim(){return this.recordDelim}detectCsvDelimiter(){let n=jr.readFileSync(this.filePath,"utf-8").split(`
`)[0]||"";n.startsWith("\uFEFF")&&(n=n.slice(1));let r=[";","	","|",","],i={};for(let o of r)i[o]=(n.match(new RegExp(o==="|"?"\\|":o,"g"))||[]).length;let s=Math.max(...Object.values(i));s>0&&(this.csvDelimiter=Object.keys(i).find(o=>i[o]===s)||",")}cleanColumnName(e){let n=String(e).trim();return n=n.replace(/[^0-9a-zA-Z]+/g,"_").toUpperCase(),(!n||/^\d/.test(n)||n.startsWith("_"))&&(n="COL"+(n.startsWith("_")?"":"_")+n),n}parseCsvLine(e){let n=[],r="",i=!1;for(let s=0;s<e.length;s++){let o=e[s];o==='"'?i&&e[s+1]==='"'?(r+='"',s++):i=!i:o===this.csvDelimiter&&!i?(n.push(r),r=""):r+=o}return n.push(r),n}async readExcelFile(e){if(!wb)throw new Error("ReaderFactory module not available");e?.("Reading Excel file...");let n=wb.create(this.filePath);await n.open(this.filePath);let r=[],i=o=>{if(o==null)return"";if(o instanceof Date){let a=l=>l<10?"0"+l:l;return`${o.getFullYear()}-${a(o.getMonth()+1)}-${a(o.getDate())} ${a(o.getHours())}:${a(o.getMinutes())}:${a(o.getSeconds())}`}return String(o)},s=0;for(;await n.read();){let o=[],a=n._currentRow;if(a&&Array.isArray(a))for(let l=0;l<a.length;l++)o.push(i(a[l]));r.push(o),s++,s%1e4===0&&(e?.(`Processed ${s.toLocaleString()} rows...`,void 0,!1),await tj())}return typeof n.close=="function"&&await n.close(),e?.(`Excel file loaded: ${r.length} rows`),r}async analyzeDataTypes(e){e?.("Analyzing data types...");let n;if(this.isExcelFile)this.excelData=await this.readExcelFile(e),n=this.excelData;else{this.detectCsvDelimiter();let i=jr.readFileSync(this.filePath,"utf-8");i.startsWith("\uFEFF")&&(i=i.slice(1));let s=i.split(/\r?\n/);n=[];for(let o of s)o.trim()&&n.push(this.parseCsvLine(o))}if(!n||n.length===0)throw new Error("No data found in file");let r=[];this.sqlHeaders=n[0].map(i=>this.cleanColumnName(i||"COLUMN"));for(let i=0;i<n[0].length;i++)r.push(new Pc);for(let i=1;i<n.length;i++){let s=n[i];for(let o=0;o<s.length;o++)o<r.length&&s[o]&&s[o].trim()&&r[o].refreshCurrentType(s[o].trim());i%1e4===0&&(e?.(`Analyzed ${i.toLocaleString()} rows...`,void 0,!1),await tj())}return this.rowsCount=n.length-1,e?.(`Analysis complete: ${this.rowsCount.toLocaleString()} rows`),this.dataTypes=r,r}escapeValue(e){let n=String(e).trim();for(let r of this.valuesToEscape)n=n.split(r).join(`${this.escapechar}${r}`);return n}formatValue(e,n){let r=this.escapeValue(e);return n<this.dataTypes.length&&this.dataTypes[n].currentType.dbType==="DATETIME"&&(r=r.replace("T"," ")),r}generateCreateTableSql(){let e=[];for(let r=0;r<this.sqlHeaders.length;r++){let i=this.sqlHeaders[r],s=this.dataTypes[r];e.push(`        ${i} ${s.currentType.toString()}`)}let n=this.logDir.replace(/\\/g,"/");return`CREATE TABLE ${this.targetTable} AS 
(
    SELECT * FROM EXTERNAL '${this.virtualFileName}'
    (
${e.join(`,
`)}
    )
    USING
    (
        REMOTESOURCE 'jdbc'
        DELIMITER '${this.delimiterPlain}'
        RecordDelim '${this.recordDelimPlain}'
        ESCAPECHAR '${this.escapechar}'
        NULLVALUE ''
        ENCODING 'utf-8'
        TIMESTYLE '24HOUR'
        SKIPROWS 0
        MAXERRORS 10
        LOGDIR '${n}'
    )
) DISTRIBUTE ON RANDOM;`}async createDataStream(e){e?.("Preparing data stream...");try{let n;if(this.isExcelFile){if(!this.excelData||this.excelData.length===0)throw new Error("Excel data not loaded. Call analyzeDataTypes first.");n=this.excelData.slice(1)}else{let r=jr.readFileSync(this.filePath,"utf-8");r.startsWith("\uFEFF")&&(r=r.slice(1));let i=r.split(/\r?\n/);n=[];let s=!0;for(let o of i)if(o.trim()){if(s){s=!1;continue}n.push(this.parseCsvLine(o))}}return this.rowsCount=n.length,new Lb(this,n,e)}catch(n){let r=n instanceof Error?n.message:String(n);throw e?.(`Error preparing stream: ${r}`),n}}getVirtualFileName(){return this.virtualFileName}getRowsCount(){return this.rowsCount}getSqlHeaders(){return this.sqlHeaders}getCsvDelimiter(){return this.csvDelimiter}}});var Rj=W(()=>{"use strict"});async function Oe(t,e){let r=await t.createCommand(e).executeReader(),i=[];for(;await r.read();){let s={};for(let o=0;o<r.fieldCount;o++)s[r.getName(o)]=r.getValue(o);i.push(s)}return i}function pe(t){return!t||/^[A-Z_][A-Z0-9_]*$/i.test(t)&&t===t.toUpperCase()?t:`"${t.replace(/"/g,'""')}"`}function Aj(t){if(!t)return t;let e=t.trim().toUpperCase();return e==="CHARACTER VARYING"?"CHARACTER VARYING(ANY)":e==="NATIONAL CHARACTER VARYING"?"NATIONAL CHARACTER VARYING(ANY)":e==="NATIONAL CHARACTER"?"NATIONAL CHARACTER(ANY)":e==="CHARACTER"?"CHARACTER(ANY)":t}async function dr(t){let e={host:t.host,port:t.port||5480,database:t.database,user:t.user,password:t.password},n=yn(),r=new n(e);return await r.connect(),r}var Jr=W(()=>{"use strict"});async function Qr(t,e,n,r){let i=`
        SELECT 
            X.OBJID::INT AS OBJID
            , X.ATTNAME
            , X.DESCRIPTION
            , X.FORMAT_TYPE AS FULL_TYPE
            , X.ATTNOTNULL::BOOL AS ATTNOTNULL
            , X.COLDEFAULT
        FROM
            ${e.toUpperCase()}.._V_RELATION_COLUMN X
        INNER JOIN
            ${e.toUpperCase()}.._V_OBJECT_DATA D ON X.OBJID = D.OBJID
        WHERE
            X.TYPE IN ('TABLE','VIEW','EXTERNAL TABLE', 'SEQUENCE','SYSTEM VIEW','SYSTEM TABLE')
            AND X.OBJID NOT IN (4,5)
            AND D.SCHEMA = '${n.toUpperCase()}'
            AND D.OBJNAME = '${r.toUpperCase()}'
        ORDER BY 
            X.OBJID, X.ATTNUM
    `,s=await Oe(t,i),o=[];for(let a of s){let l=!1,c=a.ATTNOTNULL;if(typeof c=="boolean")l=c;else if(typeof c=="number")l=c!==0;else if(typeof c=="string"){let u=c.trim().toLowerCase();l=u==="t"||u==="true"||u==="1"||u==="yes"}o.push({name:a.ATTNAME,description:a.DESCRIPTION||null,fullTypeName:a.FULL_TYPE,notNull:l,defaultValue:a.COLDEFAULT||null})}return o}async function _s(t,e,n,r){try{let i=`
            SELECT ATTNAME
            FROM ${e.toUpperCase()}.._V_TABLE_DIST_MAP
            WHERE SCHEMA = '${n.toUpperCase()}'
                AND TABLENAME = '${r.toUpperCase()}'
            ORDER BY DISTSEQNO
        `;return(await Oe(t,i)).map(o=>o.ATTNAME)}catch{return[]}}async function Ns(t,e,n,r){try{let i=`
            SELECT ATTNAME
            FROM ${e.toUpperCase()}.._V_TABLE_ORGANIZE_COLUMN
            WHERE SCHEMA = '${n.toUpperCase()}'
                AND TABLENAME = '${r.toUpperCase()}'
            ORDER BY ORGSEQNO
        `;return(await Oe(t,i)).map(o=>o.ATTNAME)}catch{return[]}}async function Os(t,e,n,r){let i=`
        SELECT 
            X.SCHEMA
            , X.RELATION
            , X.CONSTRAINTNAME
            , X.CONTYPE
            , X.ATTNAME
            , X.PKDATABASE
            , X.PKSCHEMA
            , X.PKRELATION
            , X.PKATTNAME
            , X.UPDT_TYPE
            , X.DEL_TYPE
        FROM 
            ${e.toUpperCase()}.._V_RELATION_KEYDATA X
        WHERE 
            X.OBJID NOT IN (4,5)
            AND X.SCHEMA = '${n.toUpperCase()}'
            AND X.RELATION = '${r.toUpperCase()}'
        ORDER BY
            X.SCHEMA, X.RELATION, X.CONSEQ
    `,s=new Map;try{let o=await Oe(t,i);for(let a of o){let l=a.CONSTRAINTNAME;if(!s.has(l)){let u={p:"PRIMARY KEY",f:"FOREIGN KEY",u:"UNIQUE"};s.set(l,{type:u[a.CONTYPE]||"UNKNOWN",typeChar:a.CONTYPE,columns:[],pkDatabase:a.PKDATABASE||null,pkSchema:a.PKSCHEMA||null,pkRelation:a.PKRELATION||null,pkColumns:[],updateType:a.UPDT_TYPE||"NO ACTION",deleteType:a.DEL_TYPE||"NO ACTION"})}let c=s.get(l);c.columns.push(a.ATTNAME),a.PKATTNAME&&c.pkColumns.push(a.PKATTNAME)}}catch(o){console.warn("Cannot retrieve keys info:",o)}return s}async function wa(t,e,n,r){try{let i=`
            SELECT DESCRIPTION
            FROM ${e.toUpperCase()}.._V_OBJECT_DATA
            WHERE SCHEMA = '${n.toUpperCase()}'
                AND OBJNAME = '${r.toUpperCase()}'
                AND OBJTYPE = 'TABLE'
        `,s=await Oe(t,i);if(s.length>0&&s[0].DESCRIPTION)return s[0].DESCRIPTION}catch{try{let i=`
                SELECT DESCRIPTION
                FROM ${e.toUpperCase()}.._V_OBJECT_DATA
                WHERE SCHEMA = '${n.toUpperCase()}'
                    AND OBJNAME = '${r.toUpperCase()}'
            `,s=await Oe(t,i);if(s.length>0&&s[0].DESCRIPTION)return s[0].DESCRIPTION}catch{}}return null}async function hf(t,e,n,r){try{let i=`
            SELECT OWNER
            FROM ${e.toUpperCase()}.._V_TABLE
            WHERE SCHEMA = '${n.toUpperCase()}'
                AND TABLENAME = '${r.toUpperCase()}'
        `,s=await Oe(t,i);if(s.length>0&&s[0].OWNER)return s[0].OWNER}catch{}return null}var XS=W(()=>{"use strict";Jr()});async function La(t,e,n,r){let i=await Qr(t,e,n,r);if(i.length===0)throw new Error(`Table ${e}.${n}.${r} not found or has no columns`);let s=await _s(t,e,n,r),o=await Ns(t,e,n,r),a=await Os(t,e,n,r),l=await wa(t,e,n,r);return xc(e,n,r,i,s,o,a,l)}function xc(t,e,n,r,i,s,o,a){if(r.length===0)return`-- Table ${t}.${e}.${n} has no columns or was not found`;let l=pe(t),c=pe(e),u=pe(n),d=[];d.push(`CREATE TABLE ${l}.${c}.${u}`),d.push("(");let E=[];for(let f of r){let h=`    ${pe(f.name)} ${f.fullTypeName}`;f.notNull&&(h+=" NOT NULL"),f.defaultValue!==null&&(h+=` DEFAULT ${f.defaultValue}`),E.push(h)}if(d.push(E.join(`,
`)),i.length>0){let f=i.map(p=>pe(p));d.push(`)
DISTRIBUTE ON (${f.join(", ")})`)}else d.push(`)
DISTRIBUTE ON RANDOM`);if(s.length>0){let f=s.map(p=>pe(p));d.push(`ORGANIZE ON (${f.join(", ")})`)}d.push(";"),d.push("");for(let[f,p]of o){let h=pe(f),T=p.columns.map(S=>pe(S));if(p.typeChar==="f"){let S=p.pkColumns.filter(m=>m).map(m=>pe(m));S.length>0&&d.push(`ALTER TABLE ${l}.${c}.${u} ADD CONSTRAINT ${h} ${p.type} (${T.join(", ")}) REFERENCES ${p.pkDatabase}.${p.pkSchema}.${p.pkRelation} (${S.join(", ")}) ON DELETE ${p.deleteType} ON UPDATE ${p.updateType};`)}else(p.typeChar==="p"||p.typeChar==="u")&&d.push(`ALTER TABLE ${l}.${c}.${u} ADD CONSTRAINT ${h} ${p.type} (${T.join(", ")});`)}if(a){let f=a.replace(/'/g,"''");d.push(""),d.push(`COMMENT ON TABLE ${l}.${c}.${u} IS '${f}';`)}for(let f of r)if(f.description){let p=pe(f.name),h=f.description.replace(/'/g,"''");d.push(`COMMENT ON COLUMN ${l}.${c}.${u}.${p} IS '${h}';`)}return d.join(`
`)}var zS=W(()=>{"use strict";Jr();XS()});async function Da(t,e,n,r){let i=`
        SELECT 
            SCHEMA,
            VIEWNAME,
            DEFINITION,
            OBJID::INT
        FROM ${e.toUpperCase()}.._V_VIEW
        WHERE DATABASE = '${e.toUpperCase()}'
            AND SCHEMA = '${n.toUpperCase()}'
            AND VIEWNAME = '${r.toUpperCase()}'
    `,o=await Oe(t,i);if(o.length===0)throw new Error(`View ${e}.${n}.${r} not found`);let a=o[0],l=pe(e),c=pe(n),u=pe(r),d=[];return d.push(`CREATE OR REPLACE VIEW ${l}.${c}.${u} AS`),d.push(a.DEFINITION||""),d.join(`
`)}var jS=W(()=>{"use strict";Jr()});async function Pa(t,e,n,r){let i=`
        SELECT 
            SCHEMA,
            PROCEDURESOURCE,
            OBJID::INT,
            RETURNS,
            EXECUTEDASOWNER,
            DESCRIPTION,
            PROCEDURESIGNATURE,
            PROCEDURE,
            ARGUMENTS,
            NULL AS LANGUAGE
        FROM ${e.toUpperCase()}.._V_PROCEDURE
        WHERE DATABASE = '${e.toUpperCase()}'
            AND SCHEMA = '${n.toUpperCase()}'
            AND PROCEDURESIGNATURE = '${r.toUpperCase()}'
        ORDER BY 1, 2, 3
    `,o=await Oe(t,i);if(o.length===0)throw new Error(`Procedure ${e}.${n}.${r} not found`);let a=o[0],l={schema:a.SCHEMA,procedureSource:a.PROCEDURESOURCE,objId:a.OBJID,returns:Aj(a.RETURNS),executeAsOwner:!!a.EXECUTEDASOWNER,description:a.DESCRIPTION||null,procedureSignature:a.PROCEDURESIGNATURE,procedureName:a.PROCEDURE,arguments:a.ARGUMENTS||null},c=pe(e),u=pe(n),d=pe(l.procedureName),E=[],f=`CREATE OR REPLACE PROCEDURE ${c}.${u}.${d}`;if(l.arguments){let p=l.arguments.trim();p.startsWith("(")&&p.endsWith(")")?f+=p:f+=`(${p})`}else f+="()";if(E.push(f),E.push(`RETURNS ${l.returns}`),l.executeAsOwner?E.push("EXECUTE AS OWNER"):E.push("EXECUTE AS CALLER"),E.push("LANGUAGE NZPLSQL AS"),E.push("BEGIN_PROC"),E.push(l.procedureSource),E.push("END_PROC;"),l.description){let p=l.description.replace(/'/g,"''");E.push(`COMMENT ON PROCEDURE ${d} IS '${p}';`)}return E.join(`
`)}var KS=W(()=>{"use strict";Jr()});async function xa(t,e,n,r){let i=`
        SELECT 
            E1.SCHEMA,
            E1.TABLENAME,
            E2.EXTOBJNAME,
            E2.OBJID::INT,
            E1.DELIM,
            E1.ENCODING,
            E1.TIMESTYLE,
            E1.REMOTESOURCE,
            E1.SKIPROWS,
            E1.MAXERRORS,
            E1.ESCAPE,
            E1.LOGDIR,
            E1.DECIMALDELIM,
            E1.QUOTEDVALUE,
            E1.NULLVALUE,
            E1.CRINSTRING,
            E1.TRUNCSTRING,
            E1.CTRLCHARS,
            E1.IGNOREZERO,
            E1.TIMEEXTRAZEROS,
            E1.Y2BASE,
            E1.FILLRECORD,
            E1.COMPRESS,
            E1.INCLUDEHEADER,
            E1.LFINSTRING,
            E1.DATESTYLE,
            E1.DATEDELIM,
            E1.TIMEDELIM,
            E1.BOOLSTYLE,
            E1.FORMAT,
            E1.SOCKETBUFSIZE,
            E1.RECORDDELIM,
            E1.MAXROWS,
            E1.REQUIREQUOTES,
            E1.RECORDLENGTH,
            E1.DATETIMEDELIM,
            E1.REJECTFILE
        FROM 
            ${e.toUpperCase()}.._V_EXTERNAL E1
            JOIN ${e.toUpperCase()}.._V_EXTOBJECT E2 ON E1.DATABASE = E2.DATABASE
                AND E1.SCHEMA = E2.SCHEMA
                AND E1.TABLENAME = E2.TABLENAME
        WHERE 
            E1.DATABASE = '${e.toUpperCase()}'
            AND E1.SCHEMA = '${n.toUpperCase()}'
            AND E1.TABLENAME = '${r.toUpperCase()}'
    `,s=await Oe(t,i);if(s.length===0)throw new Error(`External table ${e}.${n}.${r} not found`);let o=h=>{if(h==null)return null;if(typeof h=="boolean")return h;if(typeof h=="number")return h!==0;let T=String(h).toLowerCase();return T==="t"||T==="true"||T==="1"||T==="yes"||T==="on"},a=s[0],l={schema:a.SCHEMA,tableName:a.TABLENAME,dataObject:a.EXTOBJNAME||null,delimiter:a.DELIM||null,encoding:a.ENCODING||null,timeStyle:a.TIMESTYLE||null,remoteSource:a.REMOTESOURCE||null,skipRows:a.SKIPROWS||null,maxErrors:a.MAXERRORS||null,escapeChar:a.ESCAPE||null,logDir:a.LOGDIR||null,decimalDelim:a.DECIMALDELIM||null,quotedValue:a.QUOTEDVALUE||null,nullValue:a.NULLVALUE||null,crInString:o(a.CRINSTRING),truncString:o(a.TRUNCSTRING),ctrlChars:o(a.CTRLCHARS),ignoreZero:o(a.IGNOREZERO),timeExtraZeros:o(a.TIMEEXTRAZEROS),y2Base:a.Y2BASE||null,fillRecord:o(a.FILLRECORD),compress:o(a.COMPRESS),includeHeader:o(a.INCLUDEHEADER),lfInString:o(a.LFINSTRING),dateStyle:a.DATESTYLE||null,dateDelim:a.DATEDELIM||null,timeDelim:a.TIMEDELIM||null,boolStyle:a.BOOLSTYLE||null,format:a.FORMAT||null,socketBufSize:a.SOCKETBUFSIZE||null,recordDelim:a.RECORDDELIM?String(a.RECORDDELIM).replace(/\r/g,"\\r").replace(/\n/g,"\\n"):null,maxRows:a.MAXROWS||null,requireQuotes:o(a.REQUIREQUOTES),recordLength:a.RECORDLENGTH||null,dateTimeDelim:a.DATETIMEDELIM||null,rejectFile:a.REJECTFILE||null},c=await Qr(t,e,n,r),u=pe(e),d=pe(n),E=pe(r),f=[];f.push(`CREATE EXTERNAL TABLE ${u}.${d}.${E}`),f.push("(");let p=c.map(h=>{let T=`    ${pe(h.name)} ${h.fullTypeName}`;return h.notNull&&(T+=" NOT NULL"),T});return f.push(p.join(`,
`)),f.push(")"),f.push("USING"),f.push("("),l.dataObject!==null&&f.push(`    DATAOBJECT('${l.dataObject}')`),l.delimiter!==null&&f.push(`    DELIMITER '${l.delimiter}'`),l.encoding!==null&&f.push(`    ENCODING '${l.encoding}'`),l.timeStyle!==null&&f.push(`    TIMESTYLE '${l.timeStyle}'`),l.remoteSource!==null&&f.push(`    REMOTESOURCE '${l.remoteSource}'`),l.maxErrors!==null&&f.push(`    MAXERRORS ${l.maxErrors}`),l.escapeChar!==null&&f.push(`    ESCAPECHAR '${l.escapeChar}'`),l.decimalDelim!==null&&f.push(`    DECIMALDELIM '${l.decimalDelim}'`),l.logDir!==null&&f.push(`    LOGDIR '${l.logDir}'`),l.quotedValue!==null&&f.push(`    QUOTEDVALUE '${l.quotedValue}'`),l.nullValue!==null&&f.push(`    NULLVALUE '${l.nullValue}'`),l.crInString!==null&&f.push(`    CRINSTRING ${l.crInString}`),l.truncString!==null&&f.push(`    TRUNCSTRING ${l.truncString}`),l.ctrlChars!==null&&f.push(`    CTRLCHARS ${l.ctrlChars}`),l.ignoreZero!==null&&f.push(`    IGNOREZERO ${l.ignoreZero}`),l.timeExtraZeros!==null&&f.push(`    TIMEEXTRAZEROS ${l.timeExtraZeros}`),l.y2Base!==null&&f.push(`    Y2BASE ${l.y2Base}`),l.fillRecord!==null&&f.push(`    FILLRECORD ${l.fillRecord}`),l.compress!==null&&f.push(`    COMPRESS ${l.compress}`),l.includeHeader!==null&&f.push(`    INCLUDEHEADER ${l.includeHeader}`),l.lfInString!==null&&f.push(`    LFINSTRING ${l.lfInString}`),l.dateStyle!==null&&f.push(`    DATESTYLE '${l.dateStyle}'`),l.dateDelim!==null&&f.push(`    DATEDELIM '${l.dateDelim}'`),l.timeDelim!==null&&f.push(`    TIMEDELIM '${l.timeDelim}'`),l.boolStyle!==null&&f.push(`    BOOLSTYLE '${l.boolStyle}'`),l.format!==null&&f.push(`    FORMAT '${l.format}'`),l.socketBufSize!==null&&f.push(`    SOCKETBUFSIZE ${l.socketBufSize}`),l.recordDelim!==null&&f.push(`    RECORDDELIM '${l.recordDelim}'`),l.maxRows!==null&&f.push(`    MAXROWS ${l.maxRows}`),l.requireQuotes!==null&&f.push(`    REQUIREQUOTES ${l.requireQuotes}`),l.recordLength!==null&&f.push(`    RECORDLENGTH ${l.recordLength}`),l.dateTimeDelim!==null&&f.push(`    DATETIMEDELIM '${l.dateTimeDelim}'`),l.rejectFile!==null&&f.push(`    REJECTFILE '${l.rejectFile}'`),f.push(");"),f.join(`
`)}var JS=W(()=>{"use strict";Jr();XS()});async function va(t,e,n,r){let i=`
        SELECT 
            SCHEMA,
            OWNER,
            SYNONYM_NAME,
            REFOBJNAME,
            DESCRIPTION
        FROM ${e.toUpperCase()}.._V_SYNONYM
        WHERE DATABASE = '${e.toUpperCase()}'
            AND SCHEMA = '${n.toUpperCase()}'
            AND SYNONYM_NAME = '${r.toUpperCase()}'
    `,o=await Oe(t,i);if(o.length===0)throw new Error(`Synonym ${e}.${n}.${r} not found`);let a=o[0],l=pe(e),c=pe(a.OWNER||n),u=pe(r),d=a.REFOBJNAME,E=[];if(E.push(`CREATE SYNONYM ${l}.${c}.${u} FOR ${d};`),a.DESCRIPTION){let f=a.DESCRIPTION.replace(/'/g,"''");E.push(`COMMENT ON SYNONYM ${u} IS '${f}';`)}return E.join(`
`)}var QS=W(()=>{"use strict";Jr()});async function vb(t){let e=null,n=[],r=[],i=0,s=0,o=["TABLE","VIEW","PROCEDURE","EXTERNAL TABLE","SYNONYM"];try{let a={host:t.connectionDetails.host,port:t.connectionDetails.port||5480,database:t.connectionDetails.database,user:t.connectionDetails.user,password:t.connectionDetails.password},l=yn();e=new l(a),await e.connect();let c=t.database.toUpperCase(),u=t.schema?t.schema.toUpperCase():null,d=t.objectTypes?t.objectTypes.map(A=>A.toUpperCase()).filter(A=>o.includes(A)):o;d.length===0&&(d=o),r.push("-- ============================================"),r.push("-- Batch DDL Export"),r.push(`-- Database: ${c}`),u&&r.push(`-- Schema: ${u}`),r.push(`-- Object Types: ${d.join(", ")}`),r.push(`-- Generated: ${new Date().toISOString()}`),r.push("-- ============================================"),r.push("");let E=new Map,f=new Map,p=new Map,h=new Map,T=new Map,S=d.includes("TABLE"),m=d.includes("VIEW"),R=d.includes("EXTERNAL TABLE");if(S||m||R){let A=u?`AND D.SCHEMA = '${u}'`:"",I=`
                SELECT 
                    D.SCHEMA,
                    D.OBJNAME,
                    D.OBJTYPE,
                    X.ATTNAME,
                    X.DESCRIPTION,
                    X.FORMAT_TYPE AS FULL_TYPE,
                    X.ATTNOTNULL::BOOL AS ATTNOTNULL,
                    X.COLDEFAULT
                FROM ${c}.._V_RELATION_COLUMN X
                INNER JOIN ${c}.._V_OBJECT_DATA D ON X.OBJID = D.OBJID
                WHERE D.DBNAME = '${c}'
                    AND D.OBJTYPE IN ('TABLE', 'VIEW', 'EXTERNAL TABLE')
                    ${A}
                ORDER BY D.SCHEMA, D.OBJNAME, X.ATTNUM
            `;try{let w=await Oe(e,I);for(let g of w){let L=`${g.SCHEMA}.${g.OBJNAME}`;E.has(L)||E.set(L,[]);let b=!1,P=g.ATTNOTNULL;if(typeof P=="boolean")b=P;else if(typeof P=="number")b=P!==0;else if(typeof P=="string"){let v=P.trim().toLowerCase();b=v==="t"||v==="true"||v==="1"}E.get(L).push({name:g.ATTNAME,description:g.DESCRIPTION||null,fullTypeName:g.FULL_TYPE,notNull:b,defaultValue:g.COLDEFAULT||null})}}catch(w){let g=w instanceof Error?w.message:String(w);n.push(`Error bulk fetching columns: ${g}`)}}if(S){let A=u?`AND SCHEMA = '${u}'`:"",I=`
                SELECT SCHEMA, TABLENAME, ATTNAME
                FROM ${c}.._V_TABLE_DIST_MAP
                WHERE 1=1 ${A}
                ORDER BY SCHEMA, TABLENAME, DISTSEQNO
            `;try{let w=await Oe(e,I);for(let g of w){let L=`${g.SCHEMA}.${g.TABLENAME}`;f.has(L)||f.set(L,[]),f.get(L).push(g.ATTNAME)}}catch{}}if(S){let A=u?`AND SCHEMA = '${u}'`:"",I=`
                SELECT SCHEMA, TABLENAME, ATTNAME
                FROM ${c}.._V_TABLE_ORGANIZE_COLUMN
                WHERE 1=1 ${A}
                ORDER BY SCHEMA, TABLENAME, ORGSEQNO
            `;try{let w=await Oe(e,I);for(let g of w){let L=`${g.SCHEMA}.${g.TABLENAME}`;p.has(L)||p.set(L,[]),p.get(L).push(g.ATTNAME)}}catch{}}if(S){let A=u?`AND X.SCHEMA = '${u}'`:"",I=`
                SELECT 
                    X.SCHEMA, X.RELATION, X.CONSTRAINTNAME, X.CONTYPE,
                    X.ATTNAME, X.PKDATABASE, X.PKSCHEMA, X.PKRELATION, X.PKATTNAME,
                    X.UPDT_TYPE, X.DEL_TYPE
                FROM ${c}.._V_RELATION_KEYDATA X
                WHERE X.OBJID NOT IN (4,5) ${A}
                ORDER BY X.SCHEMA, X.RELATION, X.CONSTRAINTNAME, X.CONSEQ
            `;try{let w=await Oe(e,I);for(let g of w){let L=`${g.SCHEMA}.${g.RELATION}`;h.has(L)||h.set(L,new Map);let b=h.get(L),P=g.CONSTRAINTNAME;if(!b.has(P)){let H={p:"PRIMARY KEY",f:"FOREIGN KEY",u:"UNIQUE"};b.set(P,{type:H[g.CONTYPE]||"UNKNOWN",typeChar:g.CONTYPE,columns:[],pkDatabase:g.PKDATABASE||null,pkSchema:g.PKSCHEMA||null,pkRelation:g.PKRELATION||null,pkColumns:[],updateType:g.UPDT_TYPE||"NO ACTION",deleteType:g.DEL_TYPE||"NO ACTION"})}let v=b.get(P);v.columns.push(g.ATTNAME),g.PKATTNAME&&v.pkColumns.push(g.PKATTNAME)}}catch{}}if(S){let A=u?`AND SCHEMA = '${u}'`:"",I=`
                SELECT SCHEMA, OBJNAME, DESCRIPTION
                FROM ${c}.._V_OBJECT_DATA
                WHERE DBNAME = '${c}' AND OBJTYPE = 'TABLE' AND DESCRIPTION IS NOT NULL ${A}
            `;try{let w=await Oe(e,I);for(let g of w)g.DESCRIPTION&&T.set(`${g.SCHEMA}.${g.OBJNAME}`,g.DESCRIPTION)}catch{}}for(let A of d){let I=[];try{if(A==="PROCEDURE"){let w=`SELECT PROCEDURESIGNATURE AS OBJNAME, SCHEMA FROM ${c}.._V_PROCEDURE WHERE DATABASE = '${c}'`;u&&(w+=` AND SCHEMA = '${u}'`),w+=" ORDER BY SCHEMA, PROCEDURESIGNATURE",I=(await Oe(e,w)).map(L=>({name:L.OBJNAME,schema:L.SCHEMA}))}else{let w=`SELECT OBJNAME, SCHEMA FROM ${c}.._V_OBJECT_DATA WHERE DBNAME = '${c}' AND OBJTYPE = '${A}'`;u&&(w+=` AND SCHEMA = '${u}'`),w+=" ORDER BY SCHEMA, OBJNAME",I=(await Oe(e,w)).map(L=>({name:L.OBJNAME,schema:L.SCHEMA}))}}catch(w){let g=w instanceof Error?w.message:String(w);n.push(`Error querying ${A}s: ${g}`);continue}if(I.length!==0){r.push("-- ----------------------------------------"),r.push(`-- ${A}S (${I.length})`),r.push("-- ----------------------------------------"),r.push("");for(let w of I)try{let g,L=`${w.schema}.${w.name}`;switch(A){case"TABLE":g=xc(c,w.schema,w.name,E.get(L)||[],f.get(L)||[],p.get(L)||[],h.get(L)||new Map,T.get(L)||null);break;case"VIEW":g=await Da(e,c,w.schema,w.name);break;case"PROCEDURE":g=await Pa(e,c,w.schema,w.name);break;case"EXTERNAL TABLE":g=await xa(e,c,w.schema,w.name);break;case"SYNONYM":g=await va(e,c,w.schema,w.name);break;default:s++;continue}r.push(`-- ${A}: ${c}.${w.schema}.${w.name}`),r.push(g),r.push(""),i++}catch(g){let L=g instanceof Error?g.message:String(g);n.push(`Error generating DDL for ${A} ${c}.${w.schema}.${w.name}: ${L}`),s++}}}return r.push("-- ============================================"),r.push("-- End of Batch DDL Export"),r.push(`-- Total objects: ${i}`),s>0&&r.push(`-- Skipped: ${s}`),n.length>0&&r.push(`-- Errors: ${n.length}`),r.push("-- ============================================"),{success:!0,ddlCode:r.join(`
`),objectCount:i,errors:n,skipped:s}}catch(a){return{success:!1,objectCount:0,errors:[`Batch DDL generation error: ${a instanceof Error?a.message:String(a)}`],skipped:0}}finally{if(e)try{await e.close()}catch{}}}var mj=W(()=>{"use strict";Jr();zS();jS();KS();JS();QS()});async function Mb(t,e,n,r,i){let s=null;try{s=await dr(t);let o=i.toUpperCase();return o==="TABLE"?{success:!0,ddlCode:await La(s,e,n,r),objectInfo:{database:e,schema:n,objectName:r,objectType:i}}:o==="VIEW"?{success:!0,ddlCode:await Da(s,e,n,r),objectInfo:{database:e,schema:n,objectName:r,objectType:i}}:o==="PROCEDURE"?{success:!0,ddlCode:await Pa(s,e,n,r),objectInfo:{database:e,schema:n,objectName:r,objectType:i}}:o==="EXTERNAL TABLE"?{success:!0,ddlCode:await xa(s,e,n,r),objectInfo:{database:e,schema:n,objectName:r,objectType:i}}:o==="SYNONYM"?{success:!0,ddlCode:await va(s,e,n,r),objectInfo:{database:e,schema:n,objectName:r,objectType:i}}:{success:!0,ddlCode:`-- DDL generation for ${i} not yet implemented
-- Object: ${e}.${n}.${r}
-- Type: ${i}
--
-- This feature can be extended to support:
-- - FUNCTION: Query _V_FUNCTION system table
-- - AGGREGATE: Query _V_AGGREGATE system table
`,objectInfo:{database:e,schema:n,objectName:r,objectType:i},note:`${i} DDL generation not yet implemented`}}catch(o){return{success:!1,error:`DDL generation error: ${o instanceof Error?o.message:String(o)}`}}finally{if(s)try{await s.close()}catch{}}}var gj=W(()=>{"use strict";Jr();zS();jS();KS();JS();QS()});var Ub=W(()=>{"use strict";Rj();Jr();XS();zS();jS();KS();JS();QS();mj();gj()});var Fb={};pt(Fb,{buildTableDDLFromCache:()=>xc,generateBatchDDL:()=>vb,generateDDL:()=>Mb,generateExternalTableDDL:()=>xa,generateProcedureDDL:()=>Pa,generateSynonymDDL:()=>va,generateTableDDL:()=>La,generateViewDDL:()=>Da,getColumns:()=>Qr,getDistributionInfo:()=>_s,getKeysInfo:()=>Os,getOrganizeInfo:()=>Ns,getTableComment:()=>wa,getTableOwner:()=>hf,quoteNameIfNeeded:()=>pe});var Sf=W(()=>{"use strict";Ub()});var Nj={};pt(Nj,{generateRecreateTableScript:()=>dye});async function dye(t,e,n,r,i){let s=null;try{let o={host:t.host,port:t.port||5480,database:t.database,user:t.user,password:t.password},a=yn();s=new a(o),await s.connect();let l=await Qr(s,e,n,r);if(l.length===0)return{success:!1,error:`Table ${e}.${n}.${r} not found or has no columns`};let c=await _s(s,e,n,r),u=await Ns(s,e,n,r),d=await Os(s,e,n,r),E=await wa(s,e,n,r),f=await hf(s,e,n,r),p=pe(e),h=pe(n),T=pe(r),S=new Date().toISOString().replace(/[-:T.]/g,"").substring(0,14),m=Math.random().toString(36).substring(2,7).toUpperCase(),R=i||`${r}_${S}_NEW`,A=pe(R),I=`${r}_${S}_BACKUP_${m}`,w=pe(I),g=[];g.push(`-- Recreate Table Script for ${p}.${h}.${T}`),g.push(`-- Generated at ${new Date().toISOString()}`),g.push(""),g.push("-- 1. Create new table with desired structure"),g.push(`CREATE TABLE ${p}.${h}.${A}`),g.push("(");let L=[];for(let P of l){let H=`    ${pe(P.name)} ${P.fullTypeName}`;P.notNull&&(H+=" NOT NULL"),P.defaultValue!==null&&(H+=` DEFAULT ${P.defaultValue}`),L.push(H)}if(g.push(L.join(`,
`)),c.length>0){let P=c.map(v=>pe(v));g.push(`)
DISTRIBUTE ON (${P.join(", ")})`)}else g.push(`)
DISTRIBUTE ON RANDOM`);if(u.length>0){let P=u.map(v=>pe(v));g.push(`ORGANIZE ON (${P.join(", ")})`)}if(g.push(";"),g.push(""),g.push("-- 2. Copy data from original table"),g.push(`INSERT INTO ${p}.${h}.${A} SELECT * FROM ${p}.${h}.${T};`),g.push(""),g.push("-- 3. Copy privileges from original table"),g.push(`ALTER TABLE ${p}.${h}.${A} SET PRIVILEGES TO ${p}.${h}.${T};`),g.push(""),g.push("-- 4. Swap tables: Rename Original to Backup, New to Original"),g.push(`ALTER TABLE ${p}.${h}.${T} RENAME TO ${w};`),g.push(`ALTER TABLE ${p}.${h}.${A} RENAME TO ${T};`),g.push(""),f&&(g.push("-- 5. Restore Owner"),g.push(`ALTER TABLE ${p}.${h}.${T} OWNER TO ${f};`),g.push("")),g.push("-- 6. Drop Backup Table (Optional - Comment out if you want to keep it)"),g.push(`DROP TABLE ${p}.${h}.${w};`),g.push(""),d.size>0){g.push("-- 7. Restore Constraints");for(let[P,v]of d){let H=pe(P),$=v.columns.map(J=>pe(J)),j="";if(v.typeChar==="f"){let J=v.pkColumns.filter(Z=>Z).map(Z=>pe(Z));J.length>0&&(j=`ALTER TABLE ${p}.${h}.${T} ADD CONSTRAINT ${H} ${v.type} (${$.join(", ")}) REFERENCES ${v.pkDatabase}.${v.pkSchema}.${v.pkRelation} (${J.join(", ")}) ON DELETE ${v.deleteType} ON UPDATE ${v.updateType};`)}else(v.typeChar==="p"||v.typeChar==="u")&&(j=`ALTER TABLE ${p}.${h}.${T} ADD CONSTRAINT ${H} ${v.type} (${$.join(", ")});`);j&&g.push(j)}g.push("")}if(E){let P=E.replace(/'/g,"''");g.push("-- 8. Restore Comments"),g.push(`COMMENT ON TABLE ${p}.${h}.${T} IS '${P}';`)}let b=[];for(let P of l)if(P.description){let v=pe(P.name),H=P.description.replace(/'/g,"''");b.push(`COMMENT ON COLUMN ${p}.${h}.${T}.${v} IS '${H}';`)}return b.length>0&&(E||g.push("-- 8. Restore Comments"),g.push(b.join(`
`)),g.push("")),g.push("-- 9. Generate Statistics"),g.push(`GENERATE EXPRESS STATISTICS ON ${p}.${h}.${T};`),{success:!0,sqlScript:g.join(`
`)}}catch(o){return{success:!1,error:`Error generating recreate script: ${o instanceof Error?o.message:String(o)}`}}finally{if(s)try{await s.close()}catch{}}}var Oj=W(()=>{"use strict";Sf()});var Hb={};pt(Hb,{compareProcedures:()=>Sye,compareTableStructures:()=>pye});async function fye(t,e){let r=await t.createCommand(e).executeReader(),i=[];for(;await r.read();){let s={};for(let o=0;o<r.fieldCount;o++)s[r.getName(o)]=r.getValue(o);i.push(s)}return i}async function bj(t,e,n,r){let i=await Qr(t,e,n,r),s=await Os(t,e,n,r),o=await _s(t,e,n,r),a=await Ns(t,e,n,r);return{database:e,schema:n,tableName:r,columns:i,keys:s,distribution:o,organization:a}}function Eye(t,e){let n=[];return t.fullTypeName!==e.fullTypeName&&n.push(`Type: ${t.fullTypeName} \u2192 ${e.fullTypeName}`),t.notNull!==e.notNull&&n.push(`NOT NULL: ${t.notNull} \u2192 ${e.notNull}`),t.defaultValue!==e.defaultValue&&n.push(`Default: ${t.defaultValue||"NULL"} \u2192 ${e.defaultValue||"NULL"}`),n}function hye(t,e){let n=[];return t.type!==e.type&&n.push(`Type: ${t.type} \u2192 ${e.type}`),t.columns.join(",")!==e.columns.join(",")&&n.push(`Columns: (${t.columns.join(", ")}) \u2192 (${e.columns.join(", ")})`),t.typeChar==="f"&&e.typeChar==="f"&&t.pkRelation!==e.pkRelation&&n.push(`References: ${t.pkRelation} \u2192 ${e.pkRelation}`),n}async function pye(t,e,n,r,i,s,o){let a=null;try{let l={host:t.host,port:t.port||5480,database:t.database,user:t.user,password:t.password},c=yn();a=new c(l),await a.connect();let u=await bj(a,e,n,r),d=await bj(a,i,s,o),E=[],f=new Map(u.columns.map(I=>[I.name.toUpperCase(),I])),p=new Map(d.columns.map(I=>[I.name.toUpperCase(),I]));for(let[I,w]of f){let g=p.get(I);if(!g)E.push({name:w.name,status:"removed",sourceColumn:w});else{let L=Eye(w,g);E.push({name:w.name,status:L.length>0?"modified":"unchanged",sourceColumn:w,targetColumn:g,changes:L})}}for(let[I,w]of p)f.has(I)||E.push({name:w.name,status:"added",targetColumn:w});let h=[],T=u.keys,S=d.keys;for(let[I,w]of T){let g=S.get(I);if(!g)h.push({name:I,status:"removed",sourceKey:w});else{let L=hye(w,g);h.push({name:I,status:L.length>0?"modified":"unchanged",sourceKey:w,targetKey:g,changes:L})}}for(let[I,w]of S)T.has(I)||h.push({name:I,status:"added",targetKey:w});let m=JSON.stringify(u.distribution)===JSON.stringify(d.distribution),R=JSON.stringify(u.organization)===JSON.stringify(d.organization),A={columnsAdded:E.filter(I=>I.status==="added").length,columnsRemoved:E.filter(I=>I.status==="removed").length,columnsModified:E.filter(I=>I.status==="modified").length,columnsUnchanged:E.filter(I=>I.status==="unchanged").length,keysAdded:h.filter(I=>I.status==="added").length,keysRemoved:h.filter(I=>I.status==="removed").length,keysModified:h.filter(I=>I.status==="modified").length};return{source:{database:e,schema:n,name:r},target:{database:i,schema:s,name:o},columnDiffs:E,keyDiffs:h,distributionMatch:m,sourceDistribution:u.distribution,targetDistribution:d.distribution,organizationMatch:R,sourceOrganization:u.organization,targetOrganization:d.organization,summary:A}}finally{if(a)try{await a.close()}catch{}}}async function yj(t,e,n,r){let i=`
        SELECT 
            SCHEMA,
            PROCEDURESOURCE,
            RETURNS,
            EXECUTEDASOWNER,
            DESCRIPTION,
            PROCEDURESIGNATURE,
            PROCEDURE,
            ARGUMENTS
        FROM ${e.toUpperCase()}.._V_PROCEDURE
        WHERE DATABASE = '${e.toUpperCase()}'
            AND SCHEMA = '${n.toUpperCase()}'
            AND PROCEDURESIGNATURE = '${r.toUpperCase()}'
    `,s=await fye(t,i);if(s.length===0)throw new Error(`Procedure ${e}.${n}.${r} not found`);let o=s[0];return{database:e,schema:n,procedureName:o.PROCEDURE,procedureSignature:o.PROCEDURESIGNATURE,arguments:o.ARGUMENTS||null,returns:o.RETURNS,executeAsOwner:!!o.EXECUTEDASOWNER,source:o.PROCEDURESOURCE,description:o.DESCRIPTION||null}}function Tye(t,e){let n=t.split(`
`).map(o=>o.trimEnd()),r=e.split(`
`).map(o=>o.trimEnd()),i=[],s=Math.max(n.length,r.length);for(let o=0;o<s;o++){let a=n[o]||"",l=r[o]||"";a===l?i.push(`  ${a}`):n[o]?r[o]?(i.push(`- ${a}`),i.push(`+ ${l}`)):i.push(`- ${a}`):i.push(`+ ${l}`)}return i}async function Sye(t,e,n,r,i,s,o){let a=null;try{let l={host:t.host,port:t.port||5480,database:t.database,user:t.user,password:t.password},c=yn();a=new c(l),await a.connect();let u=await yj(a,e,n,r),d=await yj(a,i,s,o),E=u.arguments===d.arguments,f=u.returns===d.returns,p=u.executeAsOwner===d.executeAsOwner,h=u.source.trim()===d.source.trim(),T=h?[]:Tye(u.source,d.source);return{source:{database:e,schema:n,name:r},target:{database:i,schema:s,name:o},argumentsMatch:E,sourceArguments:u.arguments,targetArguments:d.arguments,returnsMatch:f,sourceReturns:u.returns,targetReturns:d.returns,executeAsOwnerMatch:p,sourceExecuteAsOwner:u.executeAsOwner,targetExecuteAsOwner:d.executeAsOwner,sourceMatch:h,sourceCode:u.source,targetCode:d.source,sourceDiff:T}}finally{if(a)try{await a.close()}catch{}}}var Gb=W(()=>{"use strict";Sf()});var Wb={};pt(Wb,{SchemaCompareView:()=>$b});var Eo,$b,kb=W(()=>{"use strict";Eo=Q(require("vscode")),$b=class t{constructor(e,n,r,i){this._disposables=[];this._panel=e,this._update(r,i),this._panel.onDidDispose(()=>this.dispose(),null,this._disposables)}static{this.viewType="netezza.schemaCompare"}static createOrShow(e,n,r){let i=Eo.window.activeTextEditor?Eo.window.activeTextEditor.viewColumn:void 0;if(t.currentPanel){t.currentPanel._panel.reveal(i),t.currentPanel._update(n,r);return}let s=Eo.window.createWebviewPanel(t.viewType,"Schema Comparison",i||Eo.ViewColumn.One,{enableScripts:!0,localResourceRoots:[Eo.Uri.joinPath(e,"media")]});t.currentPanel=new t(s,e,n,r)}dispose(){for(t.currentPanel=void 0,this._panel.dispose();this._disposables.length;){let e=this._disposables.pop();e&&e.dispose()}}_update(e,n){n==="table"?(this._panel.title=`Compare: ${e.source.name} \u2194 ${e.target.name}`,this._panel.webview.html=this._getTableComparisonHtml(e)):(this._panel.title=`Compare: ${e.source.name} \u2194 ${e.target.name}`,this._panel.webview.html=this._getProcedureComparisonHtml(e))}_getStatusIcon(e){switch(e){case"added":return"\u{1F7E2}";case"removed":return"\u{1F534}";case"modified":return"\u{1F7E1}";case"unchanged":return"\u26AA"}}_getStatusClass(e){return`status-${e}`}_getTableComparisonHtml(e){let n=`${e.source.database}.${e.source.schema}.${e.source.name}`,r=`${e.target.database}.${e.target.schema}.${e.target.name}`,i=e.columnDiffs.map(l=>{let c=l.sourceColumn,u=l.targetColumn,d=l.changes?.join("<br>")||"";return`
                <tr class="${this._getStatusClass(l.status)}">
                    <td>${this._getStatusIcon(l.status)}</td>
                    <td><strong>${l.name}</strong></td>
                    <td>${c?.fullTypeName||"-"}</td>
                    <td>${u?.fullTypeName||"-"}</td>
                    <td class="changes">${d}</td>
                </tr>
            `}).join(""),s=e.keyDiffs.map(l=>{let c=l.sourceKey,u=l.targetKey,d=l.changes?.join("<br>")||"";return`
                <tr class="${this._getStatusClass(l.status)}">
                    <td>${this._getStatusIcon(l.status)}</td>
                    <td><strong>${l.name}</strong></td>
                    <td>${c?.type||"-"} (${c?.columns.join(", ")||"-"})</td>
                    <td>${u?.type||"-"} (${u?.columns.join(", ")||"-"})</td>
                    <td class="changes">${d}</td>
                </tr>
            `}).join(""),o=e.distributionMatch?"\u2705 Match":"\u274C Different",a=e.organizationMatch?"\u2705 Match":"\u274C Different";return`
            <!DOCTYPE html>
            <html lang="en">
            <head>
                <meta charset="UTF-8">
                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                <title>Schema Comparison</title>
                <style>
                    ${this._getStyles()}
                </style>
            </head>
            <body>
                <div class="container">
                    <h1>Table Structure Comparison</h1>
                    
                    <div class="header-info">
                        <div class="source-header">
                            <span class="label">Source:</span>
                            <span class="value">${n}</span>
                        </div>
                        <div class="arrow">\u2194</div>
                        <div class="target-header">
                            <span class="label">Target:</span>
                            <span class="value">${r}</span>
                        </div>
                    </div>

                    <div class="summary">
                        <h2>Summary</h2>
                        <div class="summary-grid">
                            <div class="summary-item added">\u{1F7E2} Added: ${e.summary.columnsAdded} columns, ${e.summary.keysAdded} keys</div>
                            <div class="summary-item removed">\u{1F534} Removed: ${e.summary.columnsRemoved} columns, ${e.summary.keysRemoved} keys</div>
                            <div class="summary-item modified">\u{1F7E1} Modified: ${e.summary.columnsModified} columns, ${e.summary.keysModified} keys</div>
                            <div class="summary-item unchanged">\u26AA Unchanged: ${e.summary.columnsUnchanged} columns</div>
                        </div>
                    </div>

                    <div class="section">
                        <h2>Columns</h2>
                        <table>
                            <thead>
                                <tr>
                                    <th width="40">Status</th>
                                    <th>Column Name</th>
                                    <th>Source Type</th>
                                    <th>Target Type</th>
                                    <th>Changes</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${i}
                            </tbody>
                        </table>
                    </div>

                    ${e.keyDiffs.length>0?`
                    <div class="section">
                        <h2>Keys & Constraints</h2>
                        <table>
                            <thead>
                                <tr>
                                    <th width="40">Status</th>
                                    <th>Key Name</th>
                                    <th>Source</th>
                                    <th>Target</th>
                                    <th>Changes</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${s}
                            </tbody>
                        </table>
                    </div>
                    `:""}

                    <div class="section">
                        <h2>Distribution & Organization</h2>
                        <table>
                            <thead>
                                <tr>
                                    <th>Property</th>
                                    <th>Source</th>
                                    <th>Target</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>DISTRIBUTE ON</strong></td>
                                    <td>${e.sourceDistribution.length>0?e.sourceDistribution.join(", "):"RANDOM"}</td>
                                    <td>${e.targetDistribution.length>0?e.targetDistribution.join(", "):"RANDOM"}</td>
                                    <td>${o}</td>
                                </tr>
                                <tr>
                                    <td><strong>ORGANIZE ON</strong></td>
                                    <td>${e.sourceOrganization.length>0?e.sourceOrganization.join(", "):"(none)"}</td>
                                    <td>${e.targetOrganization.length>0?e.targetOrganization.join(", "):"(none)"}</td>
                                    <td>${a}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </body>
            </html>
        `}_getProcedureComparisonHtml(e){let n=`${e.source.database}.${e.source.schema}.${e.source.name}`,r=`${e.target.database}.${e.target.schema}.${e.target.name}`,i=e.sourceDiff.map(s=>{let o="";return s.startsWith("+")?o="diff-added":s.startsWith("-")?o="diff-removed":o="diff-unchanged",`<div class="${o}">${this._escapeHtml(s)}</div>`}).join("");return`
            <!DOCTYPE html>
            <html lang="en">
            <head>
                <meta charset="UTF-8">
                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                <title>Procedure Comparison</title>
                <style>
                    ${this._getStyles()}
                </style>
            </head>
            <body>
                <div class="container">
                    <h1>Procedure Comparison</h1>
                    
                    <div class="header-info">
                        <div class="source-header">
                            <span class="label">Source:</span>
                            <span class="value">${n}</span>
                        </div>
                        <div class="arrow">\u2194</div>
                        <div class="target-header">
                            <span class="label">Target:</span>
                            <span class="value">${r}</span>
                        </div>
                    </div>

                    <div class="section">
                        <h2>Signature Comparison</h2>
                        <table>
                            <thead>
                                <tr>
                                    <th>Property</th>
                                    <th>Source</th>
                                    <th>Target</th>
                                    <th>Match</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="${e.argumentsMatch?"":"status-modified"}">
                                    <td><strong>Arguments</strong></td>
                                    <td><code>${e.sourceArguments||"(none)"}</code></td>
                                    <td><code>${e.targetArguments||"(none)"}</code></td>
                                    <td>${e.argumentsMatch?"\u2705":"\u274C"}</td>
                                </tr>
                                <tr class="${e.returnsMatch?"":"status-modified"}">
                                    <td><strong>Returns</strong></td>
                                    <td><code>${e.sourceReturns}</code></td>
                                    <td><code>${e.targetReturns}</code></td>
                                    <td>${e.returnsMatch?"\u2705":"\u274C"}</td>
                                </tr>
                                <tr class="${e.executeAsOwnerMatch?"":"status-modified"}">
                                    <td><strong>Execute As</strong></td>
                                    <td>${e.sourceExecuteAsOwner?"OWNER":"CALLER"}</td>
                                    <td>${e.targetExecuteAsOwner?"OWNER":"CALLER"}</td>
                                    <td>${e.executeAsOwnerMatch?"\u2705":"\u274C"}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="section">
                        <h2>Source Code ${e.sourceMatch?"\u2705 Identical":"\u274C Different"}</h2>
                        ${e.sourceMatch?`
                            <div class="code-block">
                                <pre>${this._escapeHtml(e.sourceCode)}</pre>
                            </div>
                        `:`
                            <div class="code-diff">
                                <pre>${i}</pre>
                            </div>
                        `}
                    </div>
                </div>
            </body>
            </html>
        `}_escapeHtml(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}_getStyles(){return`
            :root {
                --bg-color: var(--vscode-editor-background);
                --fg-color: var(--vscode-editor-foreground);
                --border-color: var(--vscode-widget-border);
                --header-bg: var(--vscode-sideBarSectionHeader-background);
                --added-bg: rgba(40, 167, 69, 0.2);
                --removed-bg: rgba(220, 53, 69, 0.2);
                --modified-bg: rgba(255, 193, 7, 0.2);
            }

            body {
                font-family: var(--vscode-font-family);
                font-size: var(--vscode-font-size);
                color: var(--fg-color);
                background-color: var(--bg-color);
                margin: 0;
                padding: 20px;
            }

            .container {
                max-width: 1400px;
                margin: 0 auto;
            }

            h1 {
                border-bottom: 1px solid var(--border-color);
                padding-bottom: 10px;
                margin-bottom: 20px;
            }

            h2 {
                font-size: 1.1em;
                margin-top: 25px;
                margin-bottom: 10px;
                color: var(--vscode-textLink-foreground);
            }

            .header-info {
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 20px;
                padding: 15px;
                background-color: var(--header-bg);
                border-radius: 6px;
                margin-bottom: 20px;
            }

            .header-info .label {
                font-weight: bold;
                margin-right: 8px;
            }

            .header-info .value {
                font-family: monospace;
                background-color: var(--vscode-textCodeBlock-background);
                padding: 4px 8px;
                border-radius: 4px;
            }

            .arrow {
                font-size: 1.5em;
                color: var(--vscode-charts-blue);
            }

            .summary {
                background-color: var(--header-bg);
                padding: 15px;
                border-radius: 6px;
                margin-bottom: 20px;
            }

            .summary h2 {
                margin-top: 0;
            }

            .summary-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 10px;
            }

            .summary-item {
                padding: 8px;
                border-radius: 4px;
            }

            .summary-item.added { background-color: var(--added-bg); }
            .summary-item.removed { background-color: var(--removed-bg); }
            .summary-item.modified { background-color: var(--modified-bg); }

            table {
                width: 100%;
                border-collapse: collapse;
                margin-bottom: 20px;
            }

            th, td {
                padding: 10px;
                text-align: left;
                border: 1px solid var(--border-color);
            }

            th {
                background-color: var(--header-bg);
                font-weight: 600;
            }

            tr.status-added {
                background-color: var(--added-bg);
            }

            tr.status-removed {
                background-color: var(--removed-bg);
            }

            tr.status-modified {
                background-color: var(--modified-bg);
            }

            .changes {
                font-size: 0.9em;
                color: var(--vscode-descriptionForeground);
            }

            .code-block, .code-diff {
                background-color: var(--vscode-textCodeBlock-background);
                border: 1px solid var(--border-color);
                border-radius: 6px;
                padding: 15px;
                overflow-x: auto;
            }

            .code-block pre, .code-diff pre {
                margin: 0;
                font-family: var(--vscode-editor-font-family);
                font-size: var(--vscode-editor-font-size);
                white-space: pre;
            }

            .diff-added {
                background-color: var(--added-bg);
                color: #28a745;
            }

            .diff-removed {
                background-color: var(--removed-bg);
                color: #dc3545;
            }

            .diff-unchanged {
                color: var(--fg-color);
            }

            code {
                font-family: var(--vscode-editor-font-family);
                background-color: var(--vscode-textCodeBlock-background);
                padding: 2px 6px;
                border-radius: 3px;
            }
        `}}});var Pj={};pt(Pj,{buildERDData:()=>Rye,getForeignKeysForSchema:()=>Lj,getTablesInSchema:()=>Dj});async function Lj(t,e,n,r,i){let s=`
        SELECT 
            X.SCHEMA,
            X.RELATION AS FROM_TABLE,
            X.CONSTRAINTNAME,
            X.ATTNAME AS FROM_COLUMN,
            X.PKDATABASE,
            X.PKSCHEMA,
            X.PKRELATION AS TO_TABLE,
            X.PKATTNAME AS TO_COLUMN,
            X.UPDT_TYPE,
            X.DEL_TYPE,
            X.CONSEQ
        FROM 
            ${r.toUpperCase()}.._V_RELATION_KEYDATA X
        WHERE 
            X.CONTYPE = 'f'
            AND X.SCHEMA = '${i.toUpperCase()}'
        ORDER BY
            X.CONSTRAINTNAME, X.CONSEQ
    `,o=new Map;try{let a=await ue(t,s,!0,e,n);if(!a||!a.data)return[];let l=Te(a);for(let c of l){let u=c.CONSTRAINTNAME,d=`${c.SCHEMA}.${c.FROM_TABLE}`,E=`${c.PKSCHEMA}.${c.TO_TABLE}`;o.has(u)||o.set(u,{constraintName:u,fromTable:d,toTable:E,fromColumns:[],toColumns:[],onDelete:c.DEL_TYPE||"NO ACTION",onUpdate:c.UPDT_TYPE||"NO ACTION"});let f=o.get(u);f.fromColumns.push(c.FROM_COLUMN),f.toColumns.push(c.TO_COLUMN)}}catch(a){console.warn("Cannot retrieve FK relationships:",a)}return Array.from(o.values())}async function Dj(t,e,n,r,i,s){s?.report({message:"Fetching tables list..."});let o=`
        SELECT 
            T.TABLENAME,
            T.OWNER
        FROM 
            ${r.toUpperCase()}.._V_TABLE T
        WHERE 
            T.SCHEMA = '${i.toUpperCase()}'
        ORDER BY T.TABLENAME
    `,a=`
        SELECT 
            A.NAME AS TABLENAME,
            A.ATTNAME,
            A.FORMAT_TYPE
        FROM 
            ${r.toUpperCase()}.._V_RELATION_COLUMN A
        WHERE 
            A.SCHEMA = '${i.toUpperCase()}'
            AND A.TYPE = 'TABLE'
        ORDER BY A.NAME, A.ATTNUM
    `,l=`
        SELECT 
            X.RELATION,
            X.ATTNAME
        FROM 
            ${r.toUpperCase()}.._V_RELATION_KEYDATA X
        WHERE 
            X.CONTYPE = 'p'
            AND X.SCHEMA = '${i.toUpperCase()}'
        ORDER BY X.RELATION, X.CONSEQ
    `,c=new Map;try{let u=await ue(t,o,!0,e,n);if(u&&u.data){let f=Te(u);for(let p of f){let h=p.TABLENAME;c.set(h,{database:r,schema:i,tableName:h,fullName:`${i}.${h}`,columns:[],primaryKeyColumns:[]})}}s?.report({message:"Fetching columns..."});let d=await ue(t,a,!0,e,n);if(d&&d.data){let f=Te(d);for(let p of f){let h=c.get(p.TABLENAME);h&&h.columns.push({name:p.ATTNAME,dataType:p.FORMAT_TYPE,isPrimaryKey:!1,isForeignKey:!1})}}s?.report({message:"Fetching primary keys..."});let E=await ue(t,l,!0,e,n);if(E&&E.data){let f=Te(E);for(let p of f){let h=c.get(p.RELATION);if(h){h.primaryKeyColumns.push(p.ATTNAME);let T=h.columns.find(S=>S.name===p.ATTNAME);T&&(T.isPrimaryKey=!0)}}}}catch(u){console.warn("Cannot retrieve table information:",u)}return Array.from(c.values())}async function Rye(t,e,n,r,i,s){let[o,a]=await Promise.all([Dj(t,e,n,r,i,s),Lj(t,e,n,r,i)]);for(let u of a){let d=u.fromTable.split(".")[1],E=o.find(f=>f.tableName===d);if(E)for(let f of u.fromColumns){let p=E.columns.find(h=>h.name===f);p&&(p.isForeignKey=!0)}}let l=new Set;for(let u of a)l.add(u.fromTable.split(".")[1]),l.add(u.toTable.split(".")[1]);let c=o.filter(u=>l.has(u.tableName)||o.length<=20);return{database:r,schema:i,tables:c,relationships:a}}var xj=W(()=>{"use strict";pn()});var vj={};pt(vj,{ERDView:()=>Yb});var ho,Yb,Mj=W(()=>{"use strict";ho=Q(require("vscode")),Yb=class t{constructor(e,n,r){this._disposables=[];this._panel=e,this._update(r),this._panel.onDidDispose(()=>this.dispose(),null,this._disposables)}static{this.viewType="netezza.erdView"}static createOrShow(e,n){let r=ho.window.activeTextEditor?ho.window.activeTextEditor.viewColumn:void 0;if(t.currentPanel){t.currentPanel._panel.reveal(r),t.currentPanel._update(n);return}let i=ho.window.createWebviewPanel(t.viewType,`ERD: ${n.database}.${n.schema}`,r||ho.ViewColumn.One,{enableScripts:!0,localResourceRoots:[ho.Uri.joinPath(e,"media")]});t.currentPanel=new t(i,e,n)}dispose(){for(t.currentPanel=void 0,this._panel.dispose();this._disposables.length;){let e=this._disposables.pop();e&&e.dispose()}}_update(e){this._panel.title=`ERD: ${e.database}.${e.schema}`,this._panel.webview.html=this._getHtml(e)}_getHtml(e){let n=this._generateTableBoxes(e.tables,e.relationships),r=e.relationships.length,i=e.tables.length;return`
            <!DOCTYPE html>
            <html lang="en">
            <head>
                <meta charset="UTF-8">
                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                <title>Entity Relationship Diagram</title>
                <style>
                    ${this._getStyles()}
                </style>
            </head>
            <body>
                <div class="header">
                    <h1>Entity Relationship Diagram</h1>
                    <div class="header-info">
                        <span class="badge">${e.database}.${e.schema}</span>
                        <span class="stat">${i} tables</span>
                        <span class="stat">${r} relationships</span>
                    </div>
                </div>

                <div class="legend">
                    <span class="legend-item"><span class="pk-indicator">\u{1F511}</span> Primary Key</span>
                    <span class="legend-item"><span class="fk-indicator">\u{1F517}</span> Foreign Key</span>
                </div>

                ${r===0?`
                    <div class="no-relationships">
                        <p>\u26A0\uFE0F No foreign key relationships found in this schema.</p>
                        <p>Tables are displayed but no relationship lines can be drawn.</p>
                    </div>
                `:""}

                <div class="erd-container" id="erdContainer">
                    <div class="erd-canvas" id="erdCanvas">
                        ${n}
                        <svg class="relationships-svg" id="relationshipsSvg"></svg>
                    </div>
                </div>

                <div class="relationships-table">
                    <h2>Foreign Key Relationships</h2>
                    ${r>0?`
                        <table>
                            <thead>
                                <tr>
                                    <th>Constraint Name</th>
                                    <th>From Table</th>
                                    <th>Column(s)</th>
                                    <th>\u2192</th>
                                    <th>To Table</th>
                                    <th>Column(s)</th>
                                    <th>On Delete</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${e.relationships.map(s=>`
                                    <tr>
                                        <td><code>${s.constraintName}</code></td>
                                        <td><strong>${s.fromTable}</strong></td>
                                        <td>${s.fromColumns.join(", ")}</td>
                                        <td>\u2192</td>
                                        <td><strong>${s.toTable}</strong></td>
                                        <td>${s.toColumns.join(", ")}</td>
                                        <td>${s.onDelete}</td>
                                    </tr>
                                `).join("")}
                            </tbody>
                        </table>
                    `:"<p>No foreign key relationships defined.</p>"}
                </div>

                <script>
                    ${this._getScript(e)}
                </script>
            </body>
            </html>
        `}_generateTableBoxes(e,n){let r=new Map,i=new Map,s=new Map;e.forEach(H=>{let $=H.tableName;r.set($,new Set),i.set($,0),s.set($,0)}),n.forEach(H=>{let $=H.fromTable.includes(".")?H.fromTable.split(".").pop():H.fromTable,j=H.toTable.includes(".")?H.toTable.split(".").pop():H.toTable;r.has($)&&(r.get($).add(j),i.set($,(i.get($)||0)+1)),r.has(j)&&(r.get(j).add($),s.set(j,(s.get(j)||0)+1))});let o=[],a=[],l=[];e.forEach(H=>{let $=i.get(H.tableName)||0;(r.get(H.tableName)?.size||0)===0?l.push(H):$>0?o.push(H):a.push(H)}),o.sort((H,$)=>{let j=i.get(H.tableName)||0;return(i.get($.tableName)||0)-j});let c=new Map,u=new Set,d=260,E=240,f=50,p=40,h=d+f,T=E+p,S=(H,$)=>`${H},${$}`,m=(H,$)=>u.add(S(H,$)),R=(H,$)=>u.has(S(H,$)),A=(H,$=0)=>{let j=$;for(;R(H,j);)j++;return j},I=0,w=1,g=2,L=H=>20+H*h,b=H=>20+H*T;o.forEach(H=>{let $=A(w);m(w,$),c.set(H.tableName,{x:L(w),y:b($)})});let P=new Map,v=[];return a.forEach(H=>{let $=r.get(H.tableName)||new Set,j=null;for(let J of $)if(o.some(Z=>Z.tableName===J)){j=J;break}j?(P.has(j)||P.set(j,[]),P.get(j).push(H)):v.push(H)}),P.forEach((H,$)=>{let j=c.get($);if(!j)return;let J=Math.round((j.y-20)/T);H.forEach((Z,M)=>{let q=M%2===0?I:g,K=J+Math.floor(M/2);for(;R(q,K);)K++;m(q,K),c.set(Z.tableName,{x:L(q),y:b(K)})})}),v.forEach(H=>{let $=!1;for(let j of[I,g]){let J=A(j);$||(m(j,J),c.set(H.tableName,{x:L(j),y:b(J)}),$=!0)}}),l.length>0&&l.forEach(($,j)=>{let J=j;c.set($.tableName,{x:L(3),y:b(J)})}),e.map(H=>{let $=c.get(H.tableName)||{x:20,y:20},j=H.columns.slice(0,10).map(Z=>{let M=[];Z.isPrimaryKey&&M.push("\u{1F511}"),Z.isForeignKey&&M.push("\u{1F517}");let q=M.length>0?`<span class="col-icons">${M.join("")}</span>`:"";return`
                    <div class="table-column ${Z.isPrimaryKey?"pk":""} ${Z.isForeignKey?"fk":""}" data-col="${Z.name}">
                        ${q}
                        <span class="col-name">${Z.name}</span>
                        <span class="col-type">${Z.dataType}</span>
                    </div>
                `}).join(""),J=H.columns.length>10?`<div class="more-columns">... and ${H.columns.length-10} more</div>`:"";return`
                <div class="table-box" id="table-${H.tableName}" 
                     data-table="${H.fullName}"
                     style="left: ${$.x}px; top: ${$.y}px;">
                    <div class="table-header">${H.tableName}</div>
                    <div class="table-columns">
                        ${j}
                        ${J}
                    </div>
                </div>
            `}).join("")}_getScript(e){return`
            (function() {
                const relationships = ${JSON.stringify(e.relationships)};
                const canvas = document.getElementById('erdCanvas');
                const svg = document.getElementById('relationshipsSvg');
                
                function getTableBox(el) {
                    const left = parseInt(el.style.left) || 0;
                    const top = parseInt(el.style.top) || 0;
                    const width = el.offsetWidth;
                    const height = el.offsetHeight;
                    return {
                        left: left,
                        top: top,
                        right: left + width,
                        bottom: top + height,
                        centerX: left + width / 2,
                        centerY: top + height / 2
                    };
                }

                function getColumnPosition(tableEl, columnName) {
                    // Try to find exact column
                    let colEl = tableEl.querySelector('.table-column[data-col="' + columnName + '"]');
                    
                    // If not found (hidden by "more columns"), try to estimate or return center
                    if (!colEl) return null;

                    // Calculate position relative to the table box
                    const tableRect = tableEl.getBoundingClientRect();
                    const colRect = colEl.getBoundingClientRect();
                    const canvasRect = canvas.getBoundingClientRect();

                    // Relative Y from canvas top
                    // We can't just subtract rects if the canvas is scrolled, but here we want SVG coords (absolute in canvas)
                    // The table.style.top is relative to canvas.
                    // The column offset within table is colRect.top - tableRect.top
                    // So Y = table.style.top + (colRect.top - tableRect.top) + colHeight/2
                    
                    const relativeTop = colRect.top - tableRect.top;
                    const centerY = relativeTop + colRect.height / 2;
                    
                    // We need to account for table scroll position if any?
                    // getBoundingClientRect takes visual position, so it accounts for scroll.
                    
                    const tableStyleTop = parseInt(tableEl.style.top) || 0;
                    
                    return tableStyleTop + centerY;
                }
                
                function drawRelationships() {
                    svg.innerHTML = '';
                    
                    // Update SVG size
                    let maxX = 1200, maxY = 600;
                    document.querySelectorAll('.table-box').forEach(el => {
                        const box = getTableBox(el);
                        maxX = Math.max(maxX, box.right + 50);
                        maxY = Math.max(maxY, box.bottom + 50);
                    });
                    
                    svg.setAttribute('width', maxX);
                    svg.setAttribute('height', maxY);
                    svg.style.width = maxX + 'px';
                    svg.style.height = maxY + 'px';
                    
                    // Defs
                    const defs = document.createElementNS('http://www.w3.org/2000/svg', 'defs');
                    const marker = document.createElementNS('http://www.w3.org/2000/svg', 'marker');
                    marker.setAttribute('id', 'arrowhead');
                    marker.setAttribute('markerWidth', '10');
                    marker.setAttribute('markerHeight', '7');
                    marker.setAttribute('refX', '10');
                    marker.setAttribute('refY', '3.5');
                    marker.setAttribute('orient', 'auto');
                    const polygon = document.createElementNS('http://www.w3.org/2000/svg', 'polygon');
                    polygon.setAttribute('points', '0 0, 10 3.5, 0 7');
                    polygon.setAttribute('fill', '#3794ff');
                    marker.appendChild(polygon);
                    defs.appendChild(marker);
                    svg.appendChild(defs);
                    
                    relationships.forEach((rel, index) => {
                        const childTableName = rel.fromTable.split('.')[1];
                        const parentTableName = rel.toTable.split('.')[1];
                        
                        const childEl = document.getElementById('table-' + childTableName);
                        const parentEl = document.getElementById('table-' + parentTableName);
                        
                        if (!childEl || !parentEl) return;
                        
                        const childBox = getTableBox(childEl);
                        const parentBox = getTableBox(parentEl);
                        
                        // Determine L/R relationship
                        // If Parent is to the right of Child: Child Right -> Parent Left
                        const parentIsRight = parentBox.centerX > childBox.centerX;
                        
                        let fromX, fromY, toX, toY;
                        let fromControlX, toControlX;
                        
                        // Default Y to center if col not found
                        fromY = childBox.centerY;
                        toY = parentBox.centerY;
                        
                        // Try get specific column Y
                        const colY1 = getColumnPosition(childEl, rel.fromColumns[0]);
                        const colY2 = getColumnPosition(parentEl, rel.toColumns[0]);
                        
                        if (colY1 !== null) fromY = colY1;
                        if (colY2 !== null) toY = colY2;
                        
                        if (parentIsRight) {
                            fromX = childBox.right;
                            toX = parentBox.left;
                            fromControlX = fromX + 50;
                            toControlX = toX - 50;
                        } else {
                            fromX = childBox.left;
                            toX = parentBox.right;
                            fromControlX = fromX - 50;
                            toControlX = toX + 50;
                        }
                        
                        // Calculate Bezier curve
                        // M start C c1 c2 end
                        const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                        
                        // Adjust constraints for multiple lines?
                        // Simple cubic bezier is best for side-to-side
                        const d = \`M \${fromX} \${fromY} C \${fromControlX} \${fromY}, \${toControlX} \${toY}, \${toX} \${toY}\`;
                        
                        path.setAttribute('d', d);
                        path.setAttribute('stroke', '#3794ff');
                        path.setAttribute('stroke-width', '2');
                        path.setAttribute('fill', 'none');
                        path.setAttribute('marker-end', 'url(#arrowhead)');
                        path.setAttribute('class', 'relationship-line');
                        
                        const title = document.createElementNS('http://www.w3.org/2000/svg', 'title');
                        title.textContent = rel.constraintName + ': ' + 
                            childTableName + '.' + rel.fromColumns.join(',') + ' -> ' + 
                            parentTableName + '.' + rel.toColumns.join(',');
                        path.appendChild(title);
                        
                        svg.appendChild(path);
                    });
                }
                
                // Dragging Logic
                let dragging = null;
                let dragStartX = 0, dragStartY = 0;
                let elemStartLeft = 0, elemStartTop = 0;
                
                document.querySelectorAll('.table-box').forEach(table => {
                    const header = table.querySelector('.table-header');
                    if (header) {
                        header.addEventListener('mousedown', function(e) {
                            e.preventDefault();
                            dragging = table;
                            dragStartX = e.pageX;
                            dragStartY = e.pageY;
                            elemStartLeft = parseInt(table.style.left) || 0;
                            elemStartTop = parseInt(table.style.top) || 0;
                            table.style.zIndex = '1000';
                            document.body.style.cursor = 'grabbing';
                        });
                    }
                });
                
                document.addEventListener('mousemove', function(e) {
                    if (!dragging) return;
                    const dx = e.pageX - dragStartX;
                    const dy = e.pageY - dragStartY;
                    dragging.style.left = Math.max(0, elemStartLeft + dx) + 'px';
                    dragging.style.top = Math.max(0, elemStartTop + dy) + 'px';
                    drawRelationships();
                });
                
                document.addEventListener('mouseup', function() {
                    if (dragging) {
                        dragging.style.zIndex = '';
                        document.body.style.cursor = '';
                        dragging = null;
                    }
                });
                
                requestAnimationFrame(() => setTimeout(drawRelationships, 50));
                window.addEventListener('resize', drawRelationships);
            })();
        `}_getStyles(){return`
            :root {
                --bg-color: var(--vscode-editor-background);
                --fg-color: var(--vscode-editor-foreground);
                --border-color: var(--vscode-widget-border);
                --header-bg: var(--vscode-sideBarSectionHeader-background);
                --table-bg: var(--vscode-editorWidget-background);
                --pk-color: #f1c40f;
                --fk-color: #3498db;
            }

            body {
                font-family: var(--vscode-font-family);
                font-size: var(--vscode-font-size);
                color: var(--fg-color);
                background-color: var(--bg-color);
                margin: 0;
                padding: 20px;
            }

            .header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 15px;
                padding-bottom: 10px;
                border-bottom: 1px solid var(--border-color);
            }

            .header h1 {
                margin: 0;
                font-size: 1.4em;
            }

            .header-info {
                display: flex;
                gap: 15px;
                align-items: center;
            }

            .badge {
                background-color: var(--vscode-badge-background);
                color: var(--vscode-badge-foreground);
                padding: 4px 10px;
                border-radius: 12px;
                font-size: 0.9em;
            }

            .stat {
                color: var(--vscode-descriptionForeground);
                font-size: 0.9em;
            }

            .legend {
                display: flex;
                gap: 20px;
                margin-bottom: 15px;
                font-size: 0.9em;
            }

            .legend-item {
                display: flex;
                align-items: center;
                gap: 5px;
            }

            .no-relationships {
                background-color: rgba(255, 193, 7, 0.2);
                padding: 15px;
                border-radius: 6px;
                margin-bottom: 15px;
            }

            .no-relationships p {
                margin: 5px 0;
            }

            .erd-container {
                background-color: var(--header-bg);
                border: 1px solid var(--border-color);
                border-radius: 6px;
                overflow: auto;
                margin-bottom: 20px;
                min-height: 400px;
            }

            .erd-canvas {
                position: relative;
                min-width: 1200px;
                min-height: 600px;
            }

            .relationships-svg {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                pointer-events: none;
            }

            .relationship-line {
                pointer-events: stroke;
            }

            .relationship-line:hover {
                stroke-width: 3;
            }

            .table-box {
                position: absolute;
                width: 250px;
                background-color: var(--table-bg);
                border: 2px solid var(--border-color);
                border-radius: 6px;
                overflow: hidden;
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
            }

            .table-header {
                background-color: var(--vscode-textLink-foreground);
                color: white;
                padding: 8px 12px;
                font-weight: bold;
                cursor: move;
                font-size: 0.95em;
            }

            .table-columns {
                max-height: 200px;
                overflow-y: auto;
            }

            .table-column {
                display: flex;
                align-items: center;
                padding: 4px 10px;
                border-bottom: 1px solid var(--border-color);
                font-size: 0.85em;
                gap: 6px;
            }

            .table-column:last-child {
                border-bottom: none;
            }

            .table-column.pk {
                background-color: rgba(241, 196, 15, 0.1);
            }

            .table-column.fk {
                background-color: rgba(52, 152, 219, 0.1);
            }

            .col-icons {
                font-size: 0.8em;
            }

            .col-name {
                flex: 1;
                font-weight: 500;
            }

            .col-type {
                color: var(--vscode-descriptionForeground);
                font-size: 0.85em;
            }

            .more-columns {
                padding: 6px 10px;
                color: var(--vscode-descriptionForeground);
                font-style: italic;
                font-size: 0.85em;
            }

            .relationships-table {
                margin-top: 20px;
            }

            .relationships-table h2 {
                font-size: 1.1em;
                margin-bottom: 10px;
            }

            table {
                width: 100%;
                border-collapse: collapse;
            }

            th, td {
                padding: 10px;
                text-align: left;
                border: 1px solid var(--border-color);
            }

            th {
                background-color: var(--header-bg);
                font-weight: 600;
            }

            code {
                font-family: var(--vscode-editor-font-family);
                background-color: var(--vscode-textCodeBlock-background);
                padding: 2px 6px;
                border-radius: 3px;
            }
        `}}});var Uj={};pt(Uj,{SessionMonitorView:()=>Vb});function Aye(){let t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let n=0;n<32;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}var fr,Vb,Bj=W(()=>{"use strict";fr=Q(require("vscode"));pn();Vb=class t{constructor(e,n,r,i){this._disposables=[];this._panel=e,this._extensionUri=n,this._context=r,this._connectionManager=i,this._update(),this._panel.onDidDispose(()=>this.dispose(),null,this._disposables),this._panel.webview.onDidReceiveMessage(async s=>{switch(s.command){case"refresh":await this._fetchAndSendData();return;case"killSession":await this._killSession(s.sessionId);return;case"toggleAutoRefresh":this._toggleAutoRefresh(s.enabled);return}},null,this._disposables),this._fetchAndSendData()}static{this.viewType="netezza.sessionMonitor"}static createOrShow(e,n,r){let i=fr.window.activeTextEditor?fr.ViewColumn.Beside:void 0;if(t.currentPanel){t.currentPanel._panel.reveal(i),t.currentPanel._fetchAndSendData();return}let s=fr.window.createWebviewPanel(t.viewType,"Session Monitor",i||fr.ViewColumn.One,{enableScripts:!0,localResourceRoots:[fr.Uri.joinPath(e,"media")],retainContextWhenHidden:!0});t.currentPanel=new t(s,e,n,r)}dispose(){for(t.currentPanel=void 0,this._refreshInterval&&clearInterval(this._refreshInterval),this._panel.dispose();this._disposables.length;){let e=this._disposables.pop();e&&e.dispose()}}_toggleAutoRefresh(e){e?this._refreshInterval=setInterval(()=>{this._fetchAndSendData()},12e4):this._refreshInterval&&(clearInterval(this._refreshInterval),this._refreshInterval=void 0)}async _killSession(e){try{if(await fr.window.showWarningMessage(`Are you sure you want to terminate session ${e}?`,{modal:!0},"Yes, Kill Session")!=="Yes, Kill Session")return;let r=`DROP SESSION ${e}`;await ue(this._context,r,!0,this._connectionManager,void 0),fr.window.showInformationMessage(`Session ${e} terminated successfully.`),await this._fetchAndSendData()}catch(n){fr.window.showErrorMessage(`Failed to kill session: ${n instanceof Error?n.message:String(n)}`)}}async _fetchAndSendData(){this._panel.webview.postMessage({command:"setLoading",loading:!0});try{let[e,n,r,i]=await Promise.all([this._fetchSessions(),this._fetchQueries(),this._fetchStorage(),this._fetchResources()]);this._panel.webview.postMessage({command:"updateData",data:{sessions:e,queries:n,storage:r,resources:i}})}catch(e){this._panel.webview.postMessage({command:"error",text:`Failed to fetch data: ${e instanceof Error?e.message:String(e)}`})}finally{this._panel.webview.postMessage({command:"setLoading",loading:!1})}}async _fetchSessions(){let e=`
            SELECT ID, PID, USERNAME, DBNAME, TYPE, CONNTIME, STATUS, 
                   SUBSTR(COMMAND, 1, 200) AS COMMAND, PRIORITY, CID, IPADDR, CLIENT_OS_USERNAME
            FROM _V_SESSION
            ORDER BY CONNTIME DESC
        `;try{let n=await ue(this._context,e,!0,this._connectionManager,void 0);return!n||!n.data?[]:Te(n)}catch(n){return console.error("Error fetching sessions:",n),[]}}async _fetchQueries(){let e=`
            SELECT Q.QS_SESSIONID, Q.QS_PLANID, Q.QS_CLIENTID, Q.QS_CLIIPADDR,
                   SUBSTR(Q.QS_SQL, 1, 300) AS QS_SQL, 
                   Q.QS_STATE, Q.QS_TSUBMIT, Q.QS_TSTART, 
                   Q.QS_PRIORITY, Q.QS_PRITXT, Q.QS_ESTCOST, 
                   Q.QS_ESTDISK, Q.QS_ESTMEM, Q.QS_SNIPPETS, Q.QS_CURSNIPT,
                   Q.QS_RESROWS, Q.QS_RESBYTES,
                   S.USERNAME
            FROM _V_QRYSTAT Q
            LEFT JOIN _V_SESSION S ON Q.QS_SESSIONID = S.ID
            ORDER BY Q.QS_TSTART DESC
            LIMIT 100
        `;try{let n=await ue(this._context,e,!0,this._connectionManager,void 0);return!n||!n.data?[]:Te(n)}catch(n){return console.error("Error fetching queries:",n),[]}}async _fetchStorage(){let e=`
            SELECT O.DBNAME AS DATABASE, TS.SCHEMA, 
                   ROUND(SUM(TS.ALLOCATED_BYTES) / 1024.0 / 1024.0, 2) AS ALLOC_MB,
                   ROUND(SUM(TS.USED_BYTES) / 1024.0 / 1024.0, 2) AS USED_MB,
                   ROUND(SUM(TS.SKEW * TS.USED_BYTES) / NULLIF(SUM(TS.USED_BYTES), 0), 2) AS AVG_SKEW,
                   COUNT(*) AS TABLE_COUNT
            FROM _V_TABLE_STORAGE_STAT TS
            JOIN _V_OBJECT_DATA O ON TS.OBJID = O.OBJID
            GROUP BY O.DBNAME, TS.SCHEMA
            ORDER BY USED_MB DESC
        `;try{let n=await ue(this._context,e,!0,this._connectionManager,void 0);return!n||!n.data?[]:Te(n)}catch(n){return console.error("Error fetching storage:",n),[]}}async _fetchResources(){let e=[],n=[],r=null;try{let i=await ue(this._context,"SELECT * FROM _V_SCHED_GRA_EXT LIMIT 50",!0,this._connectionManager,void 0);i&&i.data&&(e=Te(i))}catch(i){console.warn("_V_SCHED_GRA_EXT not available:",i)}try{let i=await ue(this._context,"SELECT * FROM _V_SYSTEM_UTIL ORDER BY 1 DESC LIMIT 50",!0,this._connectionManager,void 0);i&&i.data&&(n=Te(i))}catch(i){console.warn("_V_SYSTEM_UTIL not available:",i)}try{let i=await ue(this._context,`SELECT 
                    ROUND(AVG(HOST_CPU) * 100, 1) AS AVG_HOST_CPU_PCT,
                    ROUND(AVG(SPU_CPU) * 100, 1) AS AVG_SPU_CPU_PCT,
                    ROUND(AVG(HOST_DISK) * 100, 1) AS AVG_DISK_PCT,
                    ROUND(AVG(HOST_MEMORY) * 100, 1) AS AVG_MEMORY_PCT,
                    ROUND(AVG(HOST_FABRIC) * 100, 1) AS AVG_FABRIC_PCT,
                    COUNT(*) AS SAMPLE_COUNT
                FROM _V_SYSTEM_UTIL`,!0,this._connectionManager,void 0);if(i&&i.data){let s=Te(i);r=s.length>0?s[0]:null}}catch(i){console.warn("_V_SYSTEM_UTIL summary not available:",i)}return{gra:e,systemUtil:n,sysUtilSummary:r}}_update(){let e=this._panel.webview;this._panel.title="Session Monitor",this._panel.webview.html=this._getHtmlForWebview(e)}_getHtmlForWebview(e){let n=e.asWebviewUri(fr.Uri.joinPath(this._extensionUri,"media","sessionMonitor.js")),r=e.asWebviewUri(fr.Uri.joinPath(this._extensionUri,"media","sessionMonitor.css")),i=Aye();return`<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Security-Policy" content="default-src 'none'; style-src ${e.cspSource} 'unsafe-inline'; script-src 'nonce-${i}';">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="${r}" rel="stylesheet">
    <title>Session Monitor</title>
</head>
<body>
    <div class="container">
        <div class="header">
            <h2>\u{1F5A5}\uFE0F Session Monitor Dashboard</h2>
            <div class="header-actions">
                <label class="auto-refresh">
                    <input type="checkbox" id="autoRefresh"> Auto-refresh (2 min)
                </label>
                <button id="refreshBtn" class="btn btn-primary">\u{1F504} Refresh</button>
            </div>
        </div>

        <div class="loading-overlay" id="loadingOverlay">
            <div class="spinner"></div>
            <span>Loading data...</span>
        </div>

        <div class="tabs">
            <button class="tab-btn active" data-tab="sessions">\u{1F4CB} Sessions</button>
            <button class="tab-btn" data-tab="queries">\u23F1\uFE0F Running Queries</button>
            <button class="tab-btn" data-tab="storage">\u{1F4BE} Storage</button>
            <button class="tab-btn" data-tab="resources">\u{1F4CA} Resources</button>
        </div>

        <div class="tab-content" id="sessions">
            <div class="section-header">
                <h3>Active Sessions</h3>
                <div class="filter-controls">
                    <input type="text" id="sessionUserFilter" placeholder="Filter by User..." class="filter-input">
                </div>
                <span class="count" id="sessionCount">0 sessions</span>
            </div>
            <div class="table-container">
                <table id="sessionsTable">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>PID</th>
                            <th>User</th>
                            <th>Database</th>
                            <th>Type</th>
                            <th>Connected</th>
                            <th>Status</th>
                            <th>IP</th>
                            <th>Command</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>

        <div class="tab-content hidden" id="queries">
            <div class="section-header">
                <h3>Running Queries</h3>
                <div class="filter-controls">
                    <input type="text" id="queryUserFilter" placeholder="Filter by User..." class="filter-input">
                </div>
                <span class="count" id="queryCount">0 queries</span>
            </div>
            <div class="table-container">
                <table id="queriesTable">
                    <thead>
                        <tr>
                            <th>Session</th>
                            <th>User</th>
                            <th>Plan ID</th>
                            <th>State</th>
                            <th>Priority</th>
                            <th>Submitted</th>
                            <th>Started</th>
                            <th>Est. Cost</th>
                            <th>Rows</th>
                            <th>SQL</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>

        <div class="tab-content hidden" id="storage">
            <div class="section-header">
                <h3>Storage by Schema</h3>
                <span class="count" id="storageCount">0 schemas</span>
            </div>
            <div class="table-container">
                <table id="storageTable">
                    <thead>
                        <tr>
                            <th>Database</th>
                            <th>Schema</th>
                            <th>Allocated (MB)</th>
                            <th>Used (MB)</th>
                            <th>Usage %</th>
                            <th>Avg Skew</th>
                            <th>Tables</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>

        <div class="tab-content hidden" id="resources">
            <div class="section-header">
                <h3>Resource Utilization</h3>
            </div>
            <div class="resources-grid">
                <div class="resource-section">
                    <h4>GRA Scheduler</h4>
                    <div id="graTable" class="table-container small"></div>
                </div>
                <div class="resource-section">
                    <h4>System Utilization</h4>
                    <div id="sysUtilSummary"></div>
                    <div id="sysUtilTable" class="table-container small"></div>
                </div>
            </div>
        </div>
    </div>

    <script nonce="${i}" src="${n}"></script>
</body>
</html>`}}});var kj={};pt(kj,{XlsxWriter:()=>dR,default:()=>gye});var $j,Wj,qb,Gj,mye,dR,gye,Yj=W(()=>{"use strict";$j=Q(require("fs")),Wj=Q(ab()),qb=require("stream");lb();Gj=(()=>{let t=[];for(let n=65;n<91;n++)t.push(String.fromCharCode(n));let e=[];for(let n of t)for(let r=65;r<91;r++)e.push(n+String.fromCharCode(r));return t.push(...e),t})(),mye=/[\\/*?[\]:]/g,dR=class{constructor(e){this.sheetCount=0;this.sheetList=[];this.sstArray=[];this.sstMap=new Map;this.sstCntAll=0;this.colWidths=[];this._autofilterIsOn=!1;this.filePath=e,this.output=$j.createWriteStream(e),this.archive=(0,Wj.default)("zip"),this.archive.pipe(this.output),this._oaEpoch=Date.UTC(1899,11,30)}_getColumnLetter(e){return e<Gj.length?Gj[e]:"A"}_sanitizeSheetName(e){if(!e||typeof e!="string")return`Sheet${this.sheetCount+1}`;let n=e.replace(mye,"_");return n.length>31&&(n=n.substring(0,31)),n.trim().length===0&&(n=`Sheet${this.sheetCount+1}`),n}_escapeSheetNameForXml(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}_formatSheetNameForFormula(e){return/[\s\-+=()!@#$%^&]/.test(e)||/^[0-9]/.test(e)?`'${e.replace(/'/g,"''")}'`:e}addSheet(e,n=!1){let r=this._sanitizeSheetName(e);this.sheetCount++;let i=`rId${this.sheetCount}`,s=`sheet${this.sheetCount}.xml`;this.sheetList.push({name:r,pathInArchive:`xl/worksheets/${s}`,hidden:n,nameInArchive:s,sheetId:this.sheetCount,rId:i,filterHeaderRange:null})}_needsEscape(e){for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r===38||r===60||r===62||r===34||r===39||r>=0&&r<=8||r===11||r===12||r>=14&&r<=31)return!0}return!1}_escape(e){return typeof e!="string"||!this._needsEscape(e)?e:e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/[\x00-\x08\x0b\x0c\x0e-\x1f]/g,"")}writeSheet(e,n=null,r=!0){let i=new Rs,s=0;e.length>0?s=e[0].length:n&&(s=n.length),this.colWidths=new Array(s).fill(-1);let o=new Array(s);for(let u=0;u<s;u++)o[u]=this._getColumnLetter(u);if(n)for(let u=0;u<s;u++){let E=1.25*(n[u]?n[u].length:0)+2;E>80&&(E=80),this.colWidths[u]<E&&(this.colWidths[u]=E)}for(let u=0;u<Math.min(e.length,100);u++){let d=e[u];for(let E=0;E<d.length;E++){let f=d[E];if(f==null)continue;let h=1.25*(f instanceof Date?10:f.toString().length)+2;h>80&&(h=80),this.colWidths[E]<h&&(this.colWidths[E]=h)}}i.writeString('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>'),i.writeString('<worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships">');let a=e.length+(n?1:0);a>0&&s>0?i.writeString(`<dimension ref="A1:${o[s-1]}${a}"/>`):i.writeString('<dimension ref="A1"/>');let l=this.sheetCount===1;r&&n?l?i.writeString('<sheetViews><sheetView tabSelected="1" workbookViewId="0"><pane ySplit="1" topLeftCell="A2" activePane="bottomLeft" state="frozen" /><selection pane="bottomLeft" /></sheetView></sheetViews><sheetFormatPr defaultRowHeight="15"/>'):i.writeString('<sheetViews><sheetView workbookViewId="0"><pane ySplit="1" topLeftCell="A2" activePane="bottomLeft" state="frozen" /><selection pane="bottomLeft" /></sheetView></sheetViews><sheetFormatPr defaultRowHeight="15"/>'):l?i.writeString('<sheetViews><sheetView tabSelected="1" workbookViewId="0"/></sheetViews><sheetFormatPr defaultRowHeight="15"/>'):i.writeString('<sheetViews><sheetView workbookViewId="0"/></sheetViews><sheetFormatPr defaultRowHeight="15"/>'),i.writeString("<cols>");for(let u=0;u<s;u++){let d=this.colWidths[u]>0?this.colWidths[u]:10;i.writeString(`<col min="${u+1}" max="${u+1}" width="${d}" bestFit="1" customWidth="1" />`)}i.writeString("</cols><sheetData>");let c=0;if(n){c++,i.writeString(`<row r="${c}">`);for(let u=0;u<n.length;u++)this._writeStringCell(i,n[u],o[u],c);i.writeString("</row>")}for(let u=0;u<e.length;u++){c++,i.writeString(`<row r="${c}">`);let d=e[u];for(let E=0;E<d.length;E++){let f=d[E];if(f==null)continue;let p=o[E];if(typeof f=="number")Number.isFinite(f)?i.writeString(`<c r="${p}${c}"><v>${f}</v></c>`):this._writeStringCell(i,f.toString(),p,c);else if(typeof f=="bigint")this._writeStringCell(i,f.toString(),p,c);else if(typeof f=="boolean")i.writeString(`<c r="${p}${c}" t="b"><v>${f?1:0}</v></c>`);else if(f instanceof Date){let h=this._toOADate(f);Number.isFinite(h)?i.writeString(`<c r="${p}${c}" s="1"><v>${h}</v></c>`):this._writeStringCell(i,f.toString(),p,c)}else this._writeStringCell(i,f.toString(),p,c)}i.writeString("</row>")}if(i.writeString("</sheetData>"),r&&n&&s>0){this._autofilterIsOn=!0;let u=`A1:${o[s-1]}${a}`;i.writeString(`<autoFilter ref="${u}"/>`);let d=this.sheetList[this.sheetCount-1],E=this._formatSheetNameForFormula(d.name);d.filterHeaderRange=`${E}!$A$1:$${o[s-1]}$${a}`}i.writeString("</worksheet>"),this.archive.append(qb.Readable.from(i.getChunks()),{name:this.sheetList[this.sheetCount-1].pathInArchive})}_writeStringCell(e,n,r,i){let s=this.sstMap.get(n);s===void 0&&(s=this.sstArray.length,this.sstArray.push(n),this.sstMap.set(n,s)),this.sstCntAll++,e.writeString(`<c r="${r}${i}" t="s"><v>${s}</v></c>`)}_toOADate(e){let n=e.getTimezoneOffset()*6e4;return(e.getTime()-n-this._oaEpoch)/864e5}finalize(){return new Promise((e,n)=>{try{this._writeSharedStrings(),this._writeStyles(),this._writeWorkbook(),this._writeContentTypes(),this._writeRels(),this.output.on("close",()=>{e()}),this.archive.on("error",r=>{n(r)}),this.archive.finalize()}catch(r){n(r)}})}_writeSharedStrings(){let e=new Rs;e.writeString('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>'),e.writeString(`<sst xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" count="${this.sstCntAll}" uniqueCount="${this.sstArray.length}">`);for(let n=0;n<this.sstArray.length;n++){let r=this.sstArray[n],i=this._escape(r);i.length>0&&(i[0]===" "||i[i.length-1]===" "||/[\t\n\r]/.test(i))?e.writeString(`<si><t xml:space="preserve">${i}</t></si>`):e.writeString(`<si><t>${i}</t></si>`)}e.writeString("</sst>"),this.archive.append(qb.Readable.from(e.getChunks()),{name:"xl/sharedStrings.xml"})}_writeStyles(){this.archive.append(`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main">
<numFmts count="1">
    <numFmt numFmtId="164" formatCode="yyyy\\-mm\\-dd\\ hh:mm:ss"/>
</numFmts>
<fonts count="1">
<font><sz val="11"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font>
</fonts>
<fills count="2">
<fill><patternFill patternType="none"/></fill>
<fill><patternFill patternType="gray125"/></fill>
</fills>
<borders count="1">
<border><left/><right/><top/><bottom/><diagonal/></border>
</borders>
<cellStyleXfs count="1">
<xf numFmtId="0" fontId="0" fillId="0" borderId="0"/>
</cellStyleXfs>
<cellXfs count="3">
<xf numFmtId="0" fontId="0" fillId="0" borderId="0" xfId="0"/>
<xf numFmtId="14" fontId="0" fillId="0" borderId="0" xfId="0" applyNumberFormat="1"/>
<xf numFmtId="164" fontId="0" fillId="0" borderId="0" xfId="0" applyNumberFormat="1"/>
</cellXfs>
<cellStyles count="1">
<cellStyle name="Normal" xfId="0" builtinId="0"/>
</cellStyles>
<dxfs count="0"/>
<tableStyles count="0" defaultTableStyle="TableStyleMedium2" defaultPivotStyle="PivotStyleLight16"/>
</styleSheet>`,{name:"xl/styles.xml"})}_writeWorkbook(){let e=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<workbook xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships">
<sheets>`;for(let n of this.sheetList){let r=n.hidden?' state="hidden"':"",i=this._escapeSheetNameForXml(n.name);e+=`<sheet name="${i}" sheetId="${n.sheetId}"${r} r:id="${n.rId}"/>`}if(e+="</sheets>",this._autofilterIsOn){e+="<definedNames>";for(let n of this.sheetList)if(n.filterHeaderRange){let r=n.sheetId-1,i=this._escape(n.filterHeaderRange);e+=`<definedName name="_xlnm._FilterDatabase" localSheetId="${r}" hidden="1">${i}</definedName>`}e+="</definedNames>"}e+="</workbook>",this.archive.append(e,{name:"xl/workbook.xml"})}_writeContentTypes(){let e=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types">
<Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml"/>
<Default Extension="xml" ContentType="application/xml"/>
<Override PartName="/xl/workbook.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"/>
<Override PartName="/xl/styles.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"/>
<Override PartName="/xl/sharedStrings.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml"/>`;for(let n of this.sheetList)e+=`<Override PartName="/${n.pathInArchive}" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"/>`;e+="</Types>",this.archive.append(e,{name:"[Content_Types].xml"})}_writeRels(){this.archive.append(`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">
<Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.xml"/>
</Relationships>`,{name:"_rels/.rels"});let n=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">`;for(let i of this.sheetList)n+=`<Relationship Id="${i.rId}" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="worksheets/${i.nameInArchive}"/>`;let r=this.sheetList.length+1;n+=`<Relationship Id="rId${r++}" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Target="styles.xml"/>`,n+=`<Relationship Id="rId${r++}" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings" Target="sharedStrings.xml"/>`,n+="</Relationships>",this.archive.append(n,{name:"xl/_rels/workbook.xml.rels"})}},gye=dR});var jb={};pt(jb,{copyFileToClipboard:()=>zb,exportCsvToXlsx:()=>Oye,exportStructuredToXlsx:()=>Cye,getTempFilePath:()=>bye});function _ye(t){return t?Iye.has(t.toUpperCase()):!1}function Xj(t){if(typeof t=="string"&&t.length>0){if(t.length>15||/^-?0\d+/.test(t))return t;if(/^-?\d+(\.\d+)?$/.test(t)){let e=parseFloat(t);if(Number.isFinite(e))return e}}return t}function Nye(t){return t.map(Xj)}async function Oye(t,e,n=!1,r={source:"Unknown"},i){try{i&&i("Initializing XLSX writer...");let s=new qj(e),o=0,a=0,l=[],c=(f,p)=>{let h=f.split(/\r?\n/),T=A=>{let I=[],w=0,g=!1;for(let b=0;b<A.length;b++)if(A[b]==='"')g=!g;else if(A[b]===","&&!g){let P=A.substring(w,b);P.startsWith('"')&&P.endsWith('"')&&(P=P.substring(1,P.length-1).replace(/""/g,'"')),I.push(P),w=b+1}let L=A.substring(w);return L.startsWith('"')&&L.endsWith('"')&&(L=L.substring(1,L.length-1).replace(/""/g,'"')),I.push(L),I},S=0;for(;S<h.length&&!h[S].trim();)S++;if(S>=h.length)return;let m=T(h[S]);if(m.length===0)return;a=Math.max(a,m.length);let R=[];for(let A=S+1;A<h.length;A++){let I=h[A];if(!I.trim())continue;let w=T(I);R.push(Nye(w))}s.addSheet(p),s.writeSheet(R,m,!0),o+=R.length};if(Array.isArray(t)?(i&&i(`Processing ${t.length} result sets...`),t.forEach((f,p)=>{let h=f.name||`Result ${p+1}`;i&&i(`Processing sheet "${h}"...`),c(f.csv,h),f.sql&&l.push({name:h,sql:f.sql})})):(i&&i("Reading CSV content..."),c(t,"Query Results"),r.sql&&l.push({name:"Query Results",sql:r.sql})),l.length>0){s.addSheet("SQL Code");let f=[];l.forEach(p=>{f.push([`--- SQL for ${p.name} ---`]),p.sql.split(`
`).forEach(h=>{f.push([h])}),f.push([""])}),s.writeSheet(f,null,!1)}i&&i("Finalizing XLSX file..."),await s.finalize();let d=Xb.statSync(e).size/(1024*1024);i&&(i("XLSX file created successfully"),i(`  - Rows: ${o.toLocaleString()}`),i(`  - File size: ${d.toFixed(1)} MB`));let E={success:!0,message:`Successfully exported ${o} rows to ${e}`,details:{rows_exported:o,columns:a,file_size_mb:parseFloat(d.toFixed(1)),file_path:e}};if(n){i&&i("Copying file to clipboard...");let f=await zb(e);E.details&&(E.details.clipboard_success=f)}return E}catch(s){return{success:!1,message:`Export failed: ${s instanceof Error?s.message:String(s)}`}}}async function Cye(t,e,n=!1,r){try{r&&r("Initializing XLSX writer...");let i=new qj(e),s=0,o=0,a=[];for(let d of t){let E=d.name||"Sheet";r&&r(`Processing sheet "${E}"...`);let f=d.columns.map(T=>T.name),p=d.columns.map(T=>_ye(T.type));o=Math.max(o,f.length);let h=d.rows.map(T=>T.map((S,m)=>p[m]?Xj(S):S));i.addSheet(E),i.writeSheet(h,f,!0),s+=h.length,d.sql&&a.push({name:E,sql:d.sql})}if(a.length>0){i.addSheet("SQL Code");let d=[];a.forEach(E=>{d.push([`--- SQL for ${E.name} ---`]),E.sql.split(`
`).forEach(f=>{d.push([f])}),d.push([""])}),i.writeSheet(d,null,!1)}r&&r("Finalizing XLSX file..."),await i.finalize();let c=Xb.statSync(e).size/(1024*1024);r&&(r("XLSX file created successfully"),r(`  - Rows: ${s.toLocaleString()}`),r(`  - File size: ${c.toFixed(1)} MB`));let u={success:!0,message:`Successfully exported ${s} rows to ${e}`,details:{rows_exported:s,columns:o,file_size_mb:parseFloat(c.toFixed(1)),file_path:e}};if(n){r&&r("Copying file to clipboard...");let d=await zb(e);u.details&&(u.details.clipboard_success=d)}return u}catch(i){return{success:!1,message:`Export failed: ${i instanceof Error?i.message:String(i)}`}}}async function zb(t){return fR.platform()!=="win32"?(console.error("Clipboard file copy is only supported on Windows"),!1):new Promise(e=>{try{let n=vc.normalize(vc.resolve(t)),r=`Set-Clipboard -Path "${n.replace(/"/g,'`"')}"`,i=(0,Vj.spawn)("powershell.exe",["-NoProfile","-NonInteractive","-Command",r]),s="";i.stderr.on("data",o=>{s+=o.toString()}),i.on("close",o=>{o!==0?(console.error(`PowerShell clipboard copy failed: ${s}`),e(!1)):(console.log(`File copied to clipboard: ${n}`),e(!0))}),i.on("error",o=>{console.error(`Error spawning PowerShell: ${o.message}`),e(!1)})}catch(n){let r=n instanceof Error?n.message:String(n);console.error(`Error copying file to clipboard: ${r}`),e(!1)}})}function bye(){let t=fR.tmpdir(),n=`netezza_export_${Date.now()}.xlsx`;return vc.join(t,n)}var Xb,vc,fR,Vj,qj,Iye,Kb=W(()=>{"use strict";Xb=Q(require("fs")),vc=Q(require("path")),fR=Q(require("os")),Vj=require("child_process"),qj=(Yj(),Wi(kj)).default,Iye=new Set(["INT8","INT2","INT4","NUMERIC","FLOAT4","FLOAT8","INTEGER","BIGINT","SMALLINT","DECIMAL","REAL","DOUBLE PRECISION"])});var Zj={};pt(Zj,{ClipboardDataProcessor:()=>ER,importClipboardDataToNetezza:()=>Dye});function yye(t){let e=String(t).trim();return e=e.replace(/[^0-9a-zA-Z]+/g,"_").toUpperCase(),(!e||/^\d/.test(e)||e.startsWith("_"))&&(e="COL"+(e.startsWith("_")?"":"_")+e),e}function wye(t,e,n){let r=String(t).trim();for(let i of n)r=r.split(i).join(`${e}${i}`);return r}function Lye(t,e,n,r,i){let s=wye(t,r,i);return e<n.length&&n[e].currentType.dbType==="DATETIME"&&(s=s.replace("T"," ")),s}async function Dye(t,e,n,r,i){let s=Date.now(),o=null,a=null;try{if(!t)return{success:!1,message:"Target table name is required"};if(!e||!e.host)return{success:!1,message:"Connection details are required"};i?.("Starting clipboard import process..."),i?.(`  Target table: ${t}`),i?.(`  Format preference: ${n||"auto-detect"}`);let l=new ER,[c,u]=await l.processClipboardData(n,i);if(!c||!c.length)return{success:!1,message:"No data found in clipboard"};if(c.length<2)return{success:!1,message:"Clipboard data must contain at least headers and one data row"};i?.(`  Detected format: ${u}`),i?.(`  Rows: ${c.length}`),i?.(`  Columns: ${c[0].length}`);let d=c[0].map(M=>yye(M)),E=c.slice(1);i?.("Detecting decimal separator...");let f=".",p=0,h=0,T=E.slice(0,100);for(let M of T)for(let q of M){if(!q||!q.trim())continue;let K=q.trim();/^\d+\.\d+$/.test(K)&&p++,/^\d+,\d+$/.test(K)&&h++}h>p&&h>0&&(f=","),i?.(`Detected decimal separator: '${f}'`),i?.("Analyzing clipboard data types...");let S=d.map(()=>new Pc(f));for(let M=0;M<E.length;M++){let q=E[M];for(let K=0;K<q.length;K++)K<S.length&&q[K]&&q[K].trim()&&S[K].refreshCurrentType(q[K].trim());(M+1)%1e3===0&&(i?.(`Analyzed ${(M+1).toLocaleString()} rows...`,void 0,!1),await Qj())}i?.(`Analysis complete: ${E.length.toLocaleString()} data rows`);let m=jj.join(require("os").tmpdir(),"netezza_clipboard_logs");hR.existsSync(m)||hR.mkdirSync(m,{recursive:!0});let R="	",A="\\t",I=`
`,w="\\n",g="\\",L=[g,I,"\r",R];i?.("Preparing in-memory data stream...");let b=new Qb(E,S,R,I,g,L,f,i);o=`virtual_clipboard_import_${Date.now()}_${Math.floor(Math.random()*1e3)}.txt`,i?.(`Registered virtual stream: ${o}`);let P=yn();P&&P.registerImportStream?P.registerImportStream(o,b):i?.("Warning: NzConnection driver does not support stream registry. Import might fail.");let v=[];for(let M=0;M<d.length;M++)v.push(`        ${d[M]} ${S[M].currentType.toString()}`);let H=m.replace(/\\/g,"/"),$=`CREATE TABLE ${t} AS 
(
    SELECT * FROM EXTERNAL '${o}'
    (
${v.join(`,
`)}
    )
    USING
    (
        REMOTESOURCE 'jdbc'
        DELIMITER '${A}'
        RecordDelim '${w}'
        ESCAPECHAR '${g}'
        NULLVALUE ''
        ENCODING 'utf-8'
        TIMESTYLE '24HOUR'
        SKIPROWS 0
        MAXERRORS 10
        LOGDIR '${H}'
    )
) DISTRIBUTE ON RANDOM;`;i?.("Generated SQL:"),i?.($),i?.("Connecting to Netezza...");let j={host:e.host,port:e.port||5480,database:e.database,user:e.user,password:e.password},J=yn();a=new J(j),await a.connect();try{i?.("Executing CREATE TABLE with EXTERNAL clipboard data...");let M=a.createCommand($);M.commandTimeout=3600,await M.execute(),i?.("Clipboard import completed successfully")}finally{await a.close()}let Z=(Date.now()-s)/1e3;return{success:!0,message:"Clipboard import completed successfully",details:{targetTable:t,format:u,rowsProcessed:E.length,rowsInserted:E.length,processingTime:`${Z.toFixed(1)}s`,columns:d.length,detectedDelimiter:R}}}catch(l){let c=(Date.now()-s)/1e3;return{success:!1,message:`Clipboard import failed: ${l instanceof Error?l.message:String(l)}`,details:{processingTime:`${c.toFixed(1)}s`}}}finally{if(a&&a._connected)try{await a.close()}catch{}if(o){let l=yn();l&&l.unregisterImportStream&&l.unregisterImportStream(o)}}}var hR,jj,Kj,Jj,Qj,ER,Qb,e6=W(()=>{"use strict";hR=Q(require("fs")),jj=Q(require("path")),Kj=Q(require("vscode")),Jj=require("stream");$S();Qj=()=>new Promise(t=>setTimeout(t,0)),ER=class{async processXmlSpreadsheet(e,n){n?.("Processing XML Spreadsheet data...");let r=[],i=0,s=[],o=0,a=e.match(/ExpandedColumnCount="(\d+)"/);a&&(i=parseInt(a[1]),n?.(`Table has ${i} columns`));let l=e.match(/ExpandedRowCount="(\d+)"/);l&&n?.(`Table has ${l[1]} rows`);let c=/<Row[^>]*>([\s\S]*?)<\/Row>/gi,u;for(;(u=c.exec(e))!==null;){let d=u[1];s=new Array(i).fill("");let E,f=0,p=/<Cell(?:[^>]*ss:Index="(\d+)")?[^>]*>(?:[\s\S]*?<Data[^>]*(?:\s+ss:Type="([^"]*)")?[^>]*>([^<]*)<\/Data>)?[\s\S]*?<\/Cell>/gi;for(;(E=p.exec(d))!==null;){E[1]&&(f=parseInt(E[1])-1);let h=E[2]||"",T=E[3]||"";h==="Boolean"&&(T=T==="0"?"False":"True"),f<i&&(s[f]=T),f++}s.some(h=>h.trim())&&r.push([...s]),o++,o%1e4===0&&(n?.(`Analyzed ${o.toLocaleString()} rows...`,void 0,!1),await Qj())}return n?.(`XML processing complete: ${r.length} rows, ${i} columns`),r}async processTextData(e,n){if(n?.("Processing text data..."),!e.trim())return[];let r=e.split(`
`);for(;r.length&&!r[r.length-1].trim();)r.pop();if(!r.length)return[];let i=["	",",",";","|"],s={};for(let c of i){let u=[];for(let d of r.slice(0,Math.min(5,r.length)))if(d.trim()){let E=d.split(c);u.push(E.length)}if(u.length){let d=u.reduce((f,p)=>f+p,0)/u.length,E=u.reduce((f,p)=>f+Math.pow(p-d,2),0)/u.length;s[c]=[d,-E]}}let o="	";Object.keys(s).length&&(o=Object.keys(s).reduce((c,u)=>{let[d,E]=s[c]||[0,0],[f,p]=s[u];return f>d||f===d&&p>E?u:c},"	")),n?.(`Auto-detected delimiter: '${o==="	"?"\\t":o}'`);let a=[],l=0;for(let c of r)if(c.trim()){let u=c.split(o).map(d=>d.trim());a.push(u),l=Math.max(l,u.length)}for(let c of a)for(;c.length<l;)c.push("");return n?.(`Text processing complete: ${a.length} rows, ${l} columns`),a}async getClipboardText(){return await Kj.env.clipboard.readText()}async processClipboardData(e,n){n?.("Getting clipboard data...");let r=await this.getClipboardText();if(!r)throw new Error("No data found in clipboard");n?.(`Data size: ${r.length} characters`);let i="TEXT";e==="XML Spreadsheet"||!e&&r.includes("<Workbook")&&r.includes("<Worksheet")?i="XML Spreadsheet":e==="TEXT"&&(i="TEXT"),n?.(`Detected format: ${i}`);let s;return i==="XML Spreadsheet"?s=await this.processXmlSpreadsheet(r,n):s=await this.processTextData(r,n),n?.(`Processed ${s.length} rows`),s.length&&n?.(`Columns per row: ${s[0].length}`),[s,i]}};Qb=class extends Jj.Readable{constructor(n,r,i,s,o,a,l,c){super();this.currentIndex=0;this.byteLength=0;this.lastReportedIndex=-1;this.lastReportTime=0;this.lastReportedMessage="";this.rows=n,this.dataTypes=r,this.delimiter=i,this.recordDelim=s,this.escapechar=o,this.valuesToEscape=a,this.decimalDelimiter=l,this.progressCallback=c,this.currentIndex=0,this.lastReportedIndex=-1,this.lastReportTime=0,this.lastReportedMessage="";try{this.byteLength=n.reduce((u,d)=>{let E=d.reduce((f,p)=>f+(p?p.length:0),0);return u+E+d.length},0)}catch{this.byteLength=1024*1024}}_read(n){try{let r=!0;for(;r&&this.currentIndex<this.rows.length;){let a=this.rows[this.currentIndex].map((l,c)=>{let u=Lye(l,c,this.dataTypes,this.escapechar,this.valuesToEscape);if(this.dataTypes[c].currentType.dbType==="NUMERIC"&&this.decimalDelimiter===","&&(u=u.replace(",",".")),this.dataTypes[c].currentType.dbType==="DATETIME"){let d=u.match(/^(\d{1,2})\.(\d{1,2})\.(\d{4})(?:\s+(\d{1,2}):(\d{1,2})(?::(\d{1,2}))?)?$/);if(d){let E=d[1],f=d[2],p=d[3],h=d[4]||"00",T=d[5]||"00",S=d[6]||"00";u=`${p}-${f}-${E} ${h}:${T}:${S}`}}return u}).join(this.delimiter)+this.recordDelim;r=this.push(Buffer.from(a,"utf8")),this.currentIndex++}let i=this.rows.length;if(this.currentIndex>this.lastReportedIndex){let s=Date.now();if(this.currentIndex>=i||s-this.lastReportTime>=1e3){let c=`Streaming data: ${Math.floor(this.currentIndex/i*100)}% (${this.currentIndex.toLocaleString()}/${i.toLocaleString()})`,d=(this.currentIndex-(this.lastReportedIndex<0?0:this.lastReportedIndex))/i*100;c!==this.lastReportedMessage&&(this.progressCallback?.(c,d,!1),this.lastReportedIndex=this.currentIndex,this.lastReportTime=s,this.lastReportedMessage=c)}}this.currentIndex>=this.rows.length&&this.push(null)}catch(r){this.emit("error",r)}}}});var x,Pye,xye,vye,ey,Mye,Uye,Bye,Fye,pR,Hye,Mt=W(()=>{x=t=>t.flatMap(Pye),Pye=t=>pR(vye(t)).map(xye),xye=t=>t.replace(/ +/g," ").trim(),vye=t=>({type:"mandatory_block",items:ey(t,0)[0]}),ey=(t,e,n)=>{let r=[];for(;t[e];){let[i,s]=Mye(t,e);if(r.push(i),e=s,t[e]==="|")e++;else if(t[e]==="}"||t[e]==="]"){if(n!==t[e])throw new Error(`Unbalanced parenthesis in: ${t}`);return e++,[r,e]}else if(e===t.length){if(n)throw new Error(`Unbalanced parenthesis in: ${t}`);return[r,e]}else throw new Error(`Unexpected "${t[e]}"`)}return[r,e]},Mye=(t,e)=>{let n=[];for(;;){let[r,i]=Uye(t,e);if(r)n.push(r),e=i;else break}return n.length===1?[n[0],e]:[{type:"concatenation",items:n},e]},Uye=(t,e)=>{if(t[e]==="{")return Bye(t,e+1);if(t[e]==="[")return Fye(t,e+1);{let n="";for(;t[e]&&/[A-Za-z0-9_ ]/.test(t[e]);)n+=t[e],e++;return[n,e]}},Bye=(t,e)=>{let[n,r]=ey(t,e,"}");return[{type:"mandatory_block",items:n},r]},Fye=(t,e)=>{let[n,r]=ey(t,e,"]");return[{type:"optional_block",items:n},r]},pR=t=>{if(typeof t=="string")return[t];if(t.type==="concatenation")return t.items.map(pR).reduce(Hye,[""]);if(t.type==="mandatory_block")return t.items.flatMap(pR);if(t.type==="optional_block")return["",...t.items.flatMap(pR)];throw new Error(`Unknown node type: ${t}`)},Hye=(t,e)=>{let n=[];for(let r of t)for(let i of e)n.push(r+i);return n}});var V,ty,Bi,Mc,Zr,TR,s6,Pr=W(()=>{(function(t){t.QUOTED_IDENTIFIER="QUOTED_IDENTIFIER",t.IDENTIFIER="IDENTIFIER",t.STRING="STRING",t.VARIABLE="VARIABLE",t.RESERVED_DATA_TYPE="RESERVED_DATA_TYPE",t.RESERVED_PARAMETERIZED_DATA_TYPE="RESERVED_PARAMETERIZED_DATA_TYPE",t.RESERVED_KEYWORD="RESERVED_KEYWORD",t.RESERVED_FUNCTION_NAME="RESERVED_FUNCTION_NAME",t.RESERVED_KEYWORD_PHRASE="RESERVED_KEYWORD_PHRASE",t.RESERVED_DATA_TYPE_PHRASE="RESERVED_DATA_TYPE_PHRASE",t.RESERVED_SET_OPERATION="RESERVED_SET_OPERATION",t.RESERVED_CLAUSE="RESERVED_CLAUSE",t.RESERVED_SELECT="RESERVED_SELECT",t.RESERVED_JOIN="RESERVED_JOIN",t.ARRAY_IDENTIFIER="ARRAY_IDENTIFIER",t.ARRAY_KEYWORD="ARRAY_KEYWORD",t.CASE="CASE",t.END="END",t.WHEN="WHEN",t.ELSE="ELSE",t.THEN="THEN",t.LIMIT="LIMIT",t.BETWEEN="BETWEEN",t.AND="AND",t.OR="OR",t.XOR="XOR",t.OPERATOR="OPERATOR",t.COMMA="COMMA",t.ASTERISK="ASTERISK",t.PROPERTY_ACCESS_OPERATOR="PROPERTY_ACCESS_OPERATOR",t.OPEN_PAREN="OPEN_PAREN",t.CLOSE_PAREN="CLOSE_PAREN",t.LINE_COMMENT="LINE_COMMENT",t.BLOCK_COMMENT="BLOCK_COMMENT",t.DISABLE_COMMENT="DISABLE_COMMENT",t.NUMBER="NUMBER",t.NAMED_PARAMETER="NAMED_PARAMETER",t.QUOTED_PARAMETER="QUOTED_PARAMETER",t.NUMBERED_PARAMETER="NUMBERED_PARAMETER",t.POSITIONAL_PARAMETER="POSITIONAL_PARAMETER",t.CUSTOM_PARAMETER="CUSTOM_PARAMETER",t.DELIMITER="DELIMITER",t.EOF="EOF"})(V=V||(V={}));ty=t=>({type:V.EOF,raw:"\xABEOF\xBB",text:"\xABEOF\xBB",start:t}),Bi=ty(1/0),Mc=t=>e=>e.type===t.type&&e.text===t.text,Zr={ARRAY:Mc({text:"ARRAY",type:V.RESERVED_DATA_TYPE}),BY:Mc({text:"BY",type:V.RESERVED_KEYWORD}),SET:Mc({text:"SET",type:V.RESERVED_CLAUSE}),STRUCT:Mc({text:"STRUCT",type:V.RESERVED_DATA_TYPE}),WINDOW:Mc({text:"WINDOW",type:V.RESERVED_CLAUSE}),VALUES:Mc({text:"VALUES",type:V.RESERVED_CLAUSE})},TR=t=>t===V.RESERVED_DATA_TYPE||t===V.RESERVED_KEYWORD||t===V.RESERVED_FUNCTION_NAME||t===V.RESERVED_KEYWORD_PHRASE||t===V.RESERVED_DATA_TYPE_PHRASE||t===V.RESERVED_CLAUSE||t===V.RESERVED_SELECT||t===V.RESERVED_SET_OPERATION||t===V.RESERVED_JOIN||t===V.ARRAY_KEYWORD||t===V.CASE||t===V.END||t===V.WHEN||t===V.ELSE||t===V.THEN||t===V.LIMIT||t===V.BETWEEN||t===V.AND||t===V.OR||t===V.XOR,s6=t=>t===V.AND||t===V.OR||t===V.XOR});var o6,a6=W(()=>{o6=["KEYS.NEW_KEYSET","KEYS.ADD_KEY_FROM_RAW_BYTES","AEAD.DECRYPT_BYTES","AEAD.DECRYPT_STRING","AEAD.ENCRYPT","KEYS.KEYSET_CHAIN","KEYS.KEYSET_FROM_JSON","KEYS.KEYSET_TO_JSON","KEYS.ROTATE_KEYSET","KEYS.KEYSET_LENGTH","ANY_VALUE","ARRAY_AGG","AVG","CORR","COUNT","COUNTIF","COVAR_POP","COVAR_SAMP","MAX","MIN","ST_CLUSTERDBSCAN","STDDEV_POP","STDDEV_SAMP","STRING_AGG","SUM","VAR_POP","VAR_SAMP","ANY_VALUE","ARRAY_AGG","ARRAY_CONCAT_AGG","AVG","BIT_AND","BIT_OR","BIT_XOR","COUNT","COUNTIF","LOGICAL_AND","LOGICAL_OR","MAX","MIN","STRING_AGG","SUM","APPROX_COUNT_DISTINCT","APPROX_QUANTILES","APPROX_TOP_COUNT","APPROX_TOP_SUM","ARRAY_CONCAT","ARRAY_LENGTH","ARRAY_TO_STRING","GENERATE_ARRAY","GENERATE_DATE_ARRAY","GENERATE_TIMESTAMP_ARRAY","ARRAY_REVERSE","OFFSET","SAFE_OFFSET","ORDINAL","SAFE_ORDINAL","BIT_COUNT","PARSE_BIGNUMERIC","PARSE_NUMERIC","SAFE_CAST","CURRENT_DATE","EXTRACT","DATE","DATE_ADD","DATE_SUB","DATE_DIFF","DATE_TRUNC","DATE_FROM_UNIX_DATE","FORMAT_DATE","LAST_DAY","PARSE_DATE","UNIX_DATE","CURRENT_DATETIME","DATETIME","EXTRACT","DATETIME_ADD","DATETIME_SUB","DATETIME_DIFF","DATETIME_TRUNC","FORMAT_DATETIME","LAST_DAY","PARSE_DATETIME","ERROR","EXTERNAL_QUERY","S2_CELLIDFROMPOINT","S2_COVERINGCELLIDS","ST_ANGLE","ST_AREA","ST_ASBINARY","ST_ASGEOJSON","ST_ASTEXT","ST_AZIMUTH","ST_BOUNDARY","ST_BOUNDINGBOX","ST_BUFFER","ST_BUFFERWITHTOLERANCE","ST_CENTROID","ST_CENTROID_AGG","ST_CLOSESTPOINT","ST_CLUSTERDBSCAN","ST_CONTAINS","ST_CONVEXHULL","ST_COVEREDBY","ST_COVERS","ST_DIFFERENCE","ST_DIMENSION","ST_DISJOINT","ST_DISTANCE","ST_DUMP","ST_DWITHIN","ST_ENDPOINT","ST_EQUALS","ST_EXTENT","ST_EXTERIORRING","ST_GEOGFROM","ST_GEOGFROMGEOJSON","ST_GEOGFROMTEXT","ST_GEOGFROMWKB","ST_GEOGPOINT","ST_GEOGPOINTFROMGEOHASH","ST_GEOHASH","ST_GEOMETRYTYPE","ST_INTERIORRINGS","ST_INTERSECTION","ST_INTERSECTS","ST_INTERSECTSBOX","ST_ISCOLLECTION","ST_ISEMPTY","ST_LENGTH","ST_MAKELINE","ST_MAKEPOLYGON","ST_MAKEPOLYGONORIENTED","ST_MAXDISTANCE","ST_NPOINTS","ST_NUMGEOMETRIES","ST_NUMPOINTS","ST_PERIMETER","ST_POINTN","ST_SIMPLIFY","ST_SNAPTOGRID","ST_STARTPOINT","ST_TOUCHES","ST_UNION","ST_UNION_AGG","ST_WITHIN","ST_X","ST_Y","FARM_FINGERPRINT","MD5","SHA1","SHA256","SHA512","HLL_COUNT.INIT","HLL_COUNT.MERGE","HLL_COUNT.MERGE_PARTIAL","HLL_COUNT.EXTRACT","MAKE_INTERVAL","EXTRACT","JUSTIFY_DAYS","JUSTIFY_HOURS","JUSTIFY_INTERVAL","JSON_EXTRACT","JSON_QUERY","JSON_EXTRACT_SCALAR","JSON_VALUE","JSON_EXTRACT_ARRAY","JSON_QUERY_ARRAY","JSON_EXTRACT_STRING_ARRAY","JSON_VALUE_ARRAY","TO_JSON_STRING","ABS","SIGN","IS_INF","IS_NAN","IEEE_DIVIDE","RAND","SQRT","POW","POWER","EXP","LN","LOG","LOG10","GREATEST","LEAST","DIV","SAFE_DIVIDE","SAFE_MULTIPLY","SAFE_NEGATE","SAFE_ADD","SAFE_SUBTRACT","MOD","ROUND","TRUNC","CEIL","CEILING","FLOOR","COS","COSH","ACOS","ACOSH","SIN","SINH","ASIN","ASINH","TAN","TANH","ATAN","ATANH","ATAN2","RANGE_BUCKET","FIRST_VALUE","LAST_VALUE","NTH_VALUE","LEAD","LAG","PERCENTILE_CONT","PERCENTILE_DISC","NET.IP_FROM_STRING","NET.SAFE_IP_FROM_STRING","NET.IP_TO_STRING","NET.IP_NET_MASK","NET.IP_TRUNC","NET.IPV4_FROM_INT64","NET.IPV4_TO_INT64","NET.HOST","NET.PUBLIC_SUFFIX","NET.REG_DOMAIN","RANK","DENSE_RANK","PERCENT_RANK","CUME_DIST","NTILE","ROW_NUMBER","SESSION_USER","CORR","COVAR_POP","COVAR_SAMP","STDDEV_POP","STDDEV_SAMP","STDDEV","VAR_POP","VAR_SAMP","VARIANCE","ASCII","BYTE_LENGTH","CHAR_LENGTH","CHARACTER_LENGTH","CHR","CODE_POINTS_TO_BYTES","CODE_POINTS_TO_STRING","CONCAT","CONTAINS_SUBSTR","ENDS_WITH","FORMAT","FROM_BASE32","FROM_BASE64","FROM_HEX","INITCAP","INSTR","LEFT","LENGTH","LPAD","LOWER","LTRIM","NORMALIZE","NORMALIZE_AND_CASEFOLD","OCTET_LENGTH","REGEXP_CONTAINS","REGEXP_EXTRACT","REGEXP_EXTRACT_ALL","REGEXP_INSTR","REGEXP_REPLACE","REGEXP_SUBSTR","REPLACE","REPEAT","REVERSE","RIGHT","RPAD","RTRIM","SAFE_CONVERT_BYTES_TO_STRING","SOUNDEX","SPLIT","STARTS_WITH","STRPOS","SUBSTR","SUBSTRING","TO_BASE32","TO_BASE64","TO_CODE_POINTS","TO_HEX","TRANSLATE","TRIM","UNICODE","UPPER","CURRENT_TIME","TIME","EXTRACT","TIME_ADD","TIME_SUB","TIME_DIFF","TIME_TRUNC","FORMAT_TIME","PARSE_TIME","CURRENT_TIMESTAMP","EXTRACT","STRING","TIMESTAMP","TIMESTAMP_ADD","TIMESTAMP_SUB","TIMESTAMP_DIFF","TIMESTAMP_TRUNC","FORMAT_TIMESTAMP","PARSE_TIMESTAMP","TIMESTAMP_SECONDS","TIMESTAMP_MILLIS","TIMESTAMP_MICROS","UNIX_SECONDS","UNIX_MILLIS","UNIX_MICROS","GENERATE_UUID","COALESCE","IF","IFNULL","NULLIF","AVG","BIT_AND","BIT_OR","BIT_XOR","CORR","COUNT","COVAR_POP","COVAR_SAMP","EXACT_COUNT_DISTINCT","FIRST","GROUP_CONCAT","GROUP_CONCAT_UNQUOTED","LAST","MAX","MIN","NEST","NTH","QUANTILES","STDDEV","STDDEV_POP","STDDEV_SAMP","SUM","TOP","UNIQUE","VARIANCE","VAR_POP","VAR_SAMP","BIT_COUNT","BOOLEAN","BYTES","CAST","FLOAT","HEX_STRING","INTEGER","STRING","COALESCE","GREATEST","IFNULL","IS_INF","IS_NAN","IS_EXPLICITLY_DEFINED","LEAST","NVL","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","DATE","DATE_ADD","DATEDIFF","DAY","DAYOFWEEK","DAYOFYEAR","FORMAT_UTC_USEC","HOUR","MINUTE","MONTH","MSEC_TO_TIMESTAMP","NOW","PARSE_UTC_USEC","QUARTER","SEC_TO_TIMESTAMP","SECOND","STRFTIME_UTC_USEC","TIME","TIMESTAMP","TIMESTAMP_TO_MSEC","TIMESTAMP_TO_SEC","TIMESTAMP_TO_USEC","USEC_TO_TIMESTAMP","UTC_USEC_TO_DAY","UTC_USEC_TO_HOUR","UTC_USEC_TO_MONTH","UTC_USEC_TO_WEEK","UTC_USEC_TO_YEAR","WEEK","YEAR","FORMAT_IP","PARSE_IP","FORMAT_PACKED_IP","PARSE_PACKED_IP","JSON_EXTRACT","JSON_EXTRACT_SCALAR","ABS","ACOS","ACOSH","ASIN","ASINH","ATAN","ATANH","ATAN2","CEIL","COS","COSH","DEGREES","EXP","FLOOR","LN","LOG","LOG2","LOG10","PI","POW","RADIANS","RAND","ROUND","SIN","SINH","SQRT","TAN","TANH","REGEXP_MATCH","REGEXP_EXTRACT","REGEXP_REPLACE","CONCAT","INSTR","LEFT","LENGTH","LOWER","LPAD","LTRIM","REPLACE","RIGHT","RPAD","RTRIM","SPLIT","SUBSTR","UPPER","TABLE_DATE_RANGE","TABLE_DATE_RANGE_STRICT","TABLE_QUERY","HOST","DOMAIN","TLD","AVG","COUNT","MAX","MIN","STDDEV","SUM","CUME_DIST","DENSE_RANK","FIRST_VALUE","LAG","LAST_VALUE","LEAD","NTH_VALUE","NTILE","PERCENT_RANK","PERCENTILE_CONT","PERCENTILE_DISC","RANK","RATIO_TO_REPORT","ROW_NUMBER","CURRENT_USER","EVERY","FROM_BASE64","HASH","FARM_FINGERPRINT","IF","POSITION","SHA1","SOME","TO_BASE64","BQ.JOBS.CANCEL","BQ.REFRESH_MATERIALIZED_VIEW","OPTIONS","PIVOT","UNPIVOT"]});var l6,c6,u6=W(()=>{l6=["ALL","AND","ANY","AS","ASC","ASSERT_ROWS_MODIFIED","AT","BETWEEN","BY","CASE","CAST","COLLATE","CONTAINS","CREATE","CROSS","CUBE","CURRENT","DEFAULT","DEFINE","DESC","DISTINCT","ELSE","END","ENUM","ESCAPE","EXCEPT","EXCLUDE","EXISTS","EXTRACT","FALSE","FETCH","FOLLOWING","FOR","FROM","FULL","GROUP","GROUPING","GROUPS","HASH","HAVING","IF","IGNORE","IN","INNER","INTERSECT","INTO","IS","JOIN","LATERAL","LEFT","LIMIT","LOOKUP","MERGE","NATURAL","NEW","NO","NOT","NULL","NULLS","OF","ON","OR","ORDER","OUTER","OVER","PARTITION","PRECEDING","PROTO","RANGE","RECURSIVE","RESPECT","RIGHT","ROLLUP","ROWS","SELECT","SET","SOME","TABLE","TABLESAMPLE","THEN","TO","TREAT","TRUE","UNBOUNDED","UNION","UNNEST","USING","WHEN","WHERE","WINDOW","WITH","WITHIN","SAFE","LIKE","COPY","CLONE","IN","OUT","INOUT","RETURNS","LANGUAGE","CASCADE","RESTRICT","DETERMINISTIC"],c6=["ARRAY","BOOL","BYTES","DATE","DATETIME","GEOGRAPHY","INTERVAL","INT64","INT","SMALLINT","INTEGER","BIGINT","TINYINT","BYTEINT","NUMERIC","DECIMAL","BIGNUMERIC","BIGDECIMAL","FLOAT64","STRING","STRUCT","TIME","TIMEZONE"]});function qye(t){return Xye(zye(t))}function Xye(t){let e=Bi;return t.map(n=>n.text==="OFFSET"&&e.text==="["?(e=n,Object.assign(Object.assign({},n),{type:V.RESERVED_FUNCTION_NAME})):(e=n,n))}function zye(t){var e;let n=[];for(let r=0;r<t.length;r++){let i=t[r];if((Zr.ARRAY(i)||Zr.STRUCT(i))&&((e=t[r+1])===null||e===void 0?void 0:e.text)==="<"){let s=jye(t,r+1),o=t.slice(r,s+1);n.push({type:V.IDENTIFIER,raw:o.map(f6("raw")).join(""),text:o.map(f6("text")).join(""),start:i.start}),r=s}else n.push(i)}return n}function jye(t,e){let n=0;for(let r=e;r<t.length;r++){let i=t[r];if(i.text==="<"?n++:i.text===">"?n--:i.text===">>"&&(n-=2),n===0)return r}return t.length-1}var Gye,$ye,d6,ny,Wye,kye,Yye,Vye,SR,f6,ry=W(()=>{Mt();Pr();a6();u6();Gye=x(["SELECT [ALL | DISTINCT] [AS STRUCT | AS VALUE]"]),$ye=x(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY","HAVING","QUALIFY","WINDOW","PARTITION BY","ORDER BY","LIMIT","OFFSET","OMIT RECORD IF","INSERT [INTO]","VALUES","SET","MERGE [INTO]","WHEN [NOT] MATCHED [BY SOURCE | BY TARGET] [THEN]","UPDATE SET","CLUSTER BY","FOR SYSTEM_TIME AS OF","WITH CONNECTION","WITH PARTITION COLUMNS","REMOTE WITH CONNECTION"]),d6=x(["CREATE [OR REPLACE] [TEMP|TEMPORARY|SNAPSHOT|EXTERNAL] TABLE [IF NOT EXISTS]"]),ny=x(["CREATE [OR REPLACE] [MATERIALIZED] VIEW [IF NOT EXISTS]","UPDATE","DELETE [FROM]","DROP [SNAPSHOT | EXTERNAL] TABLE [IF EXISTS]","ALTER TABLE [IF EXISTS]","ADD COLUMN [IF NOT EXISTS]","DROP COLUMN [IF EXISTS]","RENAME TO","ALTER COLUMN [IF EXISTS]","SET DEFAULT COLLATE","SET OPTIONS","DROP NOT NULL","SET DATA TYPE","ALTER SCHEMA [IF EXISTS]","ALTER [MATERIALIZED] VIEW [IF EXISTS]","ALTER BI_CAPACITY","TRUNCATE TABLE","CREATE SCHEMA [IF NOT EXISTS]","DEFAULT COLLATE","CREATE [OR REPLACE] [TEMP|TEMPORARY|TABLE] FUNCTION [IF NOT EXISTS]","CREATE [OR REPLACE] PROCEDURE [IF NOT EXISTS]","CREATE [OR REPLACE] ROW ACCESS POLICY [IF NOT EXISTS]","GRANT TO","FILTER USING","CREATE CAPACITY","AS JSON","CREATE RESERVATION","CREATE ASSIGNMENT","CREATE SEARCH INDEX [IF NOT EXISTS]","DROP SCHEMA [IF EXISTS]","DROP [MATERIALIZED] VIEW [IF EXISTS]","DROP [TABLE] FUNCTION [IF EXISTS]","DROP PROCEDURE [IF EXISTS]","DROP ROW ACCESS POLICY","DROP ALL ROW ACCESS POLICIES","DROP CAPACITY [IF EXISTS]","DROP RESERVATION [IF EXISTS]","DROP ASSIGNMENT [IF EXISTS]","DROP SEARCH INDEX [IF EXISTS]","DROP [IF EXISTS]","GRANT","REVOKE","DECLARE","EXECUTE IMMEDIATE","LOOP","END LOOP","REPEAT","END REPEAT","WHILE","END WHILE","BREAK","LEAVE","CONTINUE","ITERATE","FOR","END FOR","BEGIN","BEGIN TRANSACTION","COMMIT TRANSACTION","ROLLBACK TRANSACTION","RAISE","RETURN","CALL","ASSERT","EXPORT DATA"]),Wye=x(["UNION {ALL | DISTINCT}","EXCEPT DISTINCT","INTERSECT DISTINCT"]),kye=x(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN"]),Yye=x(["TABLESAMPLE SYSTEM","ANY TYPE","ALL COLUMNS","NOT DETERMINISTIC","{ROWS | RANGE} BETWEEN","IS [NOT] DISTINCT FROM"]),Vye=x([]),SR={name:"bigquery",tokenizerOptions:{reservedSelect:Gye,reservedClauses:[...$ye,...ny,...d6],reservedSetOperations:Wye,reservedJoins:kye,reservedKeywordPhrases:Yye,reservedDataTypePhrases:Vye,reservedKeywords:l6,reservedDataTypes:c6,reservedFunctionNames:o6,extraParens:["[]"],stringTypes:[{quote:'""".."""',prefixes:["R","B","RB","BR"]},{quote:"'''..'''",prefixes:["R","B","RB","BR"]},'""-bs',"''-bs",{quote:'""-raw',prefixes:["R","B","RB","BR"],requirePrefix:!0},{quote:"''-raw",prefixes:["R","B","RB","BR"],requirePrefix:!0}],identTypes:["``"],identChars:{dashes:!0},paramTypes:{positional:!0,named:["@"],quoted:["@"]},variableTypes:[{regex:String.raw`@@\w+`}],lineCommentTypes:["--","#"],operators:["&","|","^","~",">>","<<","||","=>"],postProcess:qye},formatOptions:{onelineClauses:[...d6,...ny],tabularOnelineClauses:ny}};f6=t=>e=>e.type===V.IDENTIFIER||e.type===V.COMMA?e[t]+" ":e[t]});var E6,h6=W(()=>{E6=["ARRAY_AGG","AVG","CORRELATION","COUNT","COUNT_BIG","COVARIANCE","COVARIANCE_SAMP","CUME_DIST","GROUPING","LISTAGG","MAX","MEDIAN","MIN","PERCENTILE_CONT","PERCENTILE_DISC","PERCENT_RANK","REGR_AVGX","REGR_AVGY","REGR_COUNT","REGR_INTERCEPT","REGR_ICPT","REGR_R2","REGR_SLOPE","REGR_SXX","REGR_SXY","REGR_SYY","STDDEV","STDDEV_SAMP","SUM","VARIANCE","VARIANCE_SAMP","XMLAGG","XMLGROUP","ABS","ABSVAL","ACOS","ADD_DAYS","ADD_HOURS","ADD_MINUTES","ADD_MONTHS","ADD_SECONDS","ADD_YEARS","AGE","ARRAY_DELETE","ARRAY_FIRST","ARRAY_LAST","ARRAY_NEXT","ARRAY_PRIOR","ASCII","ASCII_STR","ASIN","ATAN","ATAN2","ATANH","BITAND","BITANDNOT","BITOR","BITXOR","BITNOT","BPCHAR","BSON_TO_JSON","BTRIM","CARDINALITY","CEILING","CEIL","CHARACTER_LENGTH","CHR","COALESCE","COLLATION_KEY","COLLATION_KEY_BIT","COMPARE_DECFLOAT","CONCAT","COS","COSH","COT","CURSOR_ROWCOUNT","DATAPARTITIONNUM","DATE_PART","DATE_TRUNC","DAY","DAYNAME","DAYOFMONTH","DAYOFWEEK","DAYOFWEEK_ISO","DAYOFYEAR","DAYS","DAYS_BETWEEN","DAYS_TO_END_OF_MONTH","DBPARTITIONNUM","DECFLOAT","DECFLOAT_FORMAT","DECODE","DECRYPT_BIN","DECRYPT_CHAR","DEGREES","DEREF","DIFFERENCE","DIGITS","DOUBLE_PRECISION","EMPTY_BLOB","EMPTY_CLOB","EMPTY_DBCLOB","EMPTY_NCLOB","ENCRYPT","EVENT_MON_STATE","EXP","EXTRACT","FIRST_DAY","FLOOR","FROM_UTC_TIMESTAMP","GENERATE_UNIQUE","GETHINT","GREATEST","HASH","HASH4","HASH8","HASHEDVALUE","HEX","HEXTORAW","HOUR","HOURS_BETWEEN","IDENTITY_VAL_LOCAL","IFNULL","INITCAP","INSERT","INSTR","INSTR2","INSTR4","INSTRB","INTNAND","INTNOR","INTNXOR","INTNNOT","ISNULL","JSON_ARRAY","JSON_OBJECT","JSON_QUERY","JSON_TO_BSON","JSON_VALUE","JULIAN_DAY","LAST_DAY","LCASE","LEAST","LEFT","LENGTH","LENGTH2","LENGTH4","LENGTHB","LN","LOCATE","LOCATE_IN_STRING","LOG10","LONG_VARCHAR","LONG_VARGRAPHIC","LOWER","LPAD","LTRIM","MAX","MAX_CARDINALITY","MICROSECOND","MIDNIGHT_SECONDS","MIN","MINUTE","MINUTES_BETWEEN","MOD","MONTH","MONTHNAME","MONTHS_BETWEEN","MULTIPLY_ALT","NEXT_DAY","NEXT_MONTH","NEXT_QUARTER","NEXT_WEEK","NEXT_YEAR","NORMALIZE_DECFLOAT","NOW","NULLIF","NVL","NVL2","OCTET_LENGTH","OVERLAY","PARAMETER","POSITION","POSSTR","POW","POWER","QUANTIZE","QUARTER","QUOTE_IDENT","QUOTE_LITERAL","RADIANS","RAISE_ERROR","RAND","RANDOM","RAWTOHEX","REC2XML","REGEXP_COUNT","REGEXP_EXTRACT","REGEXP_INSTR","REGEXP_LIKE","REGEXP_MATCH_COUNT","REGEXP_REPLACE","REGEXP_SUBSTR","REPEAT","REPLACE","RID","RID_BIT","RIGHT","ROUND","ROUND_TIMESTAMP","RPAD","RTRIM","SECLABEL","SECLABEL_BY_NAME","SECLABEL_TO_CHAR","SECOND","SECONDS_BETWEEN","SIGN","SIN","SINH","SOUNDEX","SPACE","SQRT","STRIP","STRLEFT","STRPOS","STRRIGHT","SUBSTR","SUBSTR2","SUBSTR4","SUBSTRB","SUBSTRING","TABLE_NAME","TABLE_SCHEMA","TAN","TANH","THIS_MONTH","THIS_QUARTER","THIS_WEEK","THIS_YEAR","TIMESTAMP_FORMAT","TIMESTAMP_ISO","TIMESTAMPDIFF","TIMEZONE","TO_CHAR","TO_CLOB","TO_DATE","TO_HEX","TO_MULTI_BYTE","TO_NCHAR","TO_NCLOB","TO_NUMBER","TO_SINGLE_BYTE","TO_TIMESTAMP","TO_UTC_TIMESTAMP","TOTALORDER","TRANSLATE","TRIM","TRIM_ARRAY","TRUNC_TIMESTAMP","TRUNCATE","TRUNC","TYPE_ID","TYPE_NAME","TYPE_SCHEMA","UCASE","UNICODE_STR","UPPER","VALUE","VARCHAR_BIT_FORMAT","VARCHAR_FORMAT","VARCHAR_FORMAT_BIT","VERIFY_GROUP_FOR_USER","VERIFY_ROLE_FOR_USER","VERIFY_TRUSTED_CONTEXT_ROLE_FOR_USER","WEEK","WEEK_ISO","WEEKS_BETWEEN","WIDTH_BUCKET","XMLATTRIBUTES","XMLCOMMENT","XMLCONCAT","XMLDOCUMENT","XMLELEMENT","XMLFOREST","XMLNAMESPACES","XMLPARSE","XMLPI","XMLQUERY","XMLROW","XMLSERIALIZE","XMLTEXT","XMLVALIDATE","XMLXSROBJECTID","XSLTRANSFORM","YEAR","YEARS_BETWEEN","YMD_BETWEEN","BASE_TABLE","JSON_TABLE","UNNEST","XMLTABLE","RANK","DENSE_RANK","NTILE","LAG","LEAD","ROW_NUMBER","FIRST_VALUE","LAST_VALUE","NTH_VALUE","RATIO_TO_REPORT","CAST"]});var p6,T6,S6=W(()=>{p6=["ACTIVATE","ADD","AFTER","ALIAS","ALL","ALLOCATE","ALLOW","ALTER","AND","ANY","AS","ASENSITIVE","ASSOCIATE","ASUTIME","AT","ATTRIBUTES","AUDIT","AUTHORIZATION","AUX","AUXILIARY","BEFORE","BEGIN","BETWEEN","BINARY","BUFFERPOOL","BY","CACHE","CALL","CALLED","CAPTURE","CARDINALITY","CASCADED","CASE","CAST","CHECK","CLONE","CLOSE","CLUSTER","COLLECTION","COLLID","COLUMN","COMMENT","COMMIT","CONCAT","CONDITION","CONNECT","CONNECTION","CONSTRAINT","CONTAINS","CONTINUE","COUNT","COUNT_BIG","CREATE","CROSS","CURRENT","CURRENT_DATE","CURRENT_LC_CTYPE","CURRENT_PATH","CURRENT_SCHEMA","CURRENT_SERVER","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_TIMEZONE","CURRENT_USER","CURSOR","CYCLE","DATA","DATABASE","DATAPARTITIONNAME","DATAPARTITIONNUM","DAY","DAYS","DB2GENERAL","DB2GENRL","DB2SQL","DBINFO","DBPARTITIONNAME","DBPARTITIONNUM","DEALLOCATE","DECLARE","DEFAULT","DEFAULTS","DEFINITION","DELETE","DENSERANK","DENSE_RANK","DESCRIBE","DESCRIPTOR","DETERMINISTIC","DIAGNOSTICS","DISABLE","DISALLOW","DISCONNECT","DISTINCT","DO","DOCUMENT","DROP","DSSIZE","DYNAMIC","EACH","EDITPROC","ELSE","ELSEIF","ENABLE","ENCODING","ENCRYPTION","END","END-EXEC","ENDING","ERASE","ESCAPE","EVERY","EXCEPT","EXCEPTION","EXCLUDING","EXCLUSIVE","EXECUTE","EXISTS","EXIT","EXPLAIN","EXTENDED","EXTERNAL","EXTRACT","FENCED","FETCH","FIELDPROC","FILE","FINAL","FIRST1","FOR","FOREIGN","FREE","FROM","FULL","FUNCTION","GENERAL","GENERATED","GET","GLOBAL","GO","GOTO","GRANT","GRAPHIC","GROUP","HANDLER","HASH","HASHED_VALUE","HAVING","HINT","HOLD","HOUR","HOURS","IDENTITY","IF","IMMEDIATE","IMPORT","IN","INCLUDING","INCLUSIVE","INCREMENT","INDEX","INDICATOR","INDICATORS","INF","INFINITY","INHERIT","INNER","INOUT","INSENSITIVE","INSERT","INTEGRITY","INTERSECT","INTO","IS","ISNULL","ISOBID","ISOLATION","ITERATE","JAR","JAVA","JOIN","KEEP","KEY","LABEL","LANGUAGE","LAST3","LATERAL","LC_CTYPE","LEAVE","LEFT","LIKE","LIMIT","LINKTYPE","LOCAL","LOCALDATE","LOCALE","LOCALTIME","LOCALTIMESTAMP","LOCATOR","LOCATORS","LOCK","LOCKMAX","LOCKSIZE","LOOP","MAINTAINED","MATERIALIZED","MAXVALUE","MICROSECOND","MICROSECONDS","MINUTE","MINUTES","MINVALUE","MODE","MODIFIES","MONTH","MONTHS","NAN","NEW","NEW_TABLE","NEXTVAL","NO","NOCACHE","NOCYCLE","NODENAME","NODENUMBER","NOMAXVALUE","NOMINVALUE","NONE","NOORDER","NORMALIZED","NOT2","NOTNULL","NULL","NULLS","NUMPARTS","OBID","OF","OFF","OFFSET","OLD","OLD_TABLE","ON","OPEN","OPTIMIZATION","OPTIMIZE","OPTION","OR","ORDER","OUT","OUTER","OVER","OVERRIDING","PACKAGE","PADDED","PAGESIZE","PARAMETER","PART","PARTITION","PARTITIONED","PARTITIONING","PARTITIONS","PASSWORD","PATH","PERCENT","PIECESIZE","PLAN","POSITION","PRECISION","PREPARE","PREVVAL","PRIMARY","PRIQTY","PRIVILEGES","PROCEDURE","PROGRAM","PSID","PUBLIC","QUERY","QUERYNO","RANGE","RANK","READ","READS","RECOVERY","REFERENCES","REFERENCING","REFRESH","RELEASE","RENAME","REPEAT","RESET","RESIGNAL","RESTART","RESTRICT","RESULT","RESULT_SET_LOCATOR","RETURN","RETURNS","REVOKE","RIGHT","ROLE","ROLLBACK","ROUND_CEILING","ROUND_DOWN","ROUND_FLOOR","ROUND_HALF_DOWN","ROUND_HALF_EVEN","ROUND_HALF_UP","ROUND_UP","ROUTINE","ROW","ROWNUMBER","ROWS","ROWSET","ROW_NUMBER","RRN","RUN","SAVEPOINT","SCHEMA","SCRATCHPAD","SCROLL","SEARCH","SECOND","SECONDS","SECQTY","SECURITY","SELECT","SENSITIVE","SEQUENCE","SESSION","SESSION_USER","SET","SIGNAL","SIMPLE","SNAN","SOME","SOURCE","SPECIFIC","SQL","SQLID","STACKED","STANDARD","START","STARTING","STATEMENT","STATIC","STATMENT","STAY","STOGROUP","STORES","STYLE","SUBSTRING","SUMMARY","SYNONYM","SYSFUN","SYSIBM","SYSPROC","SYSTEM","SYSTEM_USER","TABLE","TABLESPACE","THEN","TO","TRANSACTION","TRIGGER","TRIM","TRUNCATE","TYPE","UNDO","UNION","UNIQUE","UNTIL","UPDATE","USAGE","USER","USING","VALIDPROC","VALUE","VALUES","VARIABLE","VARIANT","VCAT","VERSION","VIEW","VOLATILE","VOLUMES","WHEN","WHENEVER","WHERE","WHILE","WITH","WITHOUT","WLM","WRITE","XMLELEMENT","XMLEXISTS","XMLNAMESPACES","YEAR","YEARS"],T6=["ARRAY","BIGINT","BINARY","BLOB","BOOLEAN","CCSID","CHAR","CHARACTER","CLOB","DATE","DATETIME","DBCLOB","DEC","DECIMAL","DOUBLE","DOUBLE PRECISION","FLOAT","FLOAT4","FLOAT8","GRAPHIC","INT","INT2","INT4","INT8","INTEGER","INTERVAL","LONG VARCHAR","LONG VARGRAPHIC","NCHAR","NCHR","NCLOB","NVARCHAR","NUMERIC","SMALLINT","REAL","TIME","TIMESTAMP","VARBINARY","VARCHAR","VARGRAPHIC"]});var Kye,Jye,R6,iy,Qye,Zye,ewe,twe,RR,sy=W(()=>{Mt();h6();S6();Kye=x(["SELECT [ALL | DISTINCT]"]),Jye=x(["WITH","FROM","WHERE","GROUP BY","HAVING","PARTITION BY","ORDER BY [INPUT SEQUENCE]","LIMIT","OFFSET","FETCH NEXT","FOR UPDATE [OF]","FOR {READ | FETCH} ONLY","FOR {RR | CS | UR | RS} [USE AND KEEP {SHARE | UPDATE | EXCLUSIVE} LOCKS]","WAIT FOR OUTCOME","SKIP LOCKED DATA","INTO","INSERT INTO","VALUES","SET","MERGE INTO","WHEN [NOT] MATCHED [THEN]","UPDATE SET","INSERT"]),R6=x(["CREATE [GLOBAL TEMPORARY | EXTERNAL] TABLE [IF NOT EXISTS]"]),iy=x(["CREATE [OR REPLACE] VIEW","UPDATE","WHERE CURRENT OF","WITH {RR | RS | CS | UR}","DELETE FROM","DROP TABLE [IF EXISTS]","ALTER TABLE","ADD [COLUMN]","DROP [COLUMN]","RENAME COLUMN","ALTER [COLUMN]","SET DATA TYPE","SET NOT NULL","DROP {DEFAULT | GENERATED | NOT NULL}","TRUNCATE [TABLE]","ALLOCATE","ALTER AUDIT POLICY","ALTER BUFFERPOOL","ALTER DATABASE PARTITION GROUP","ALTER DATABASE","ALTER EVENT MONITOR","ALTER FUNCTION","ALTER HISTOGRAM TEMPLATE","ALTER INDEX","ALTER MASK","ALTER METHOD","ALTER MODULE","ALTER NICKNAME","ALTER PACKAGE","ALTER PERMISSION","ALTER PROCEDURE","ALTER SCHEMA","ALTER SECURITY LABEL COMPONENT","ALTER SECURITY POLICY","ALTER SEQUENCE","ALTER SERVER","ALTER SERVICE CLASS","ALTER STOGROUP","ALTER TABLESPACE","ALTER THRESHOLD","ALTER TRIGGER","ALTER TRUSTED CONTEXT","ALTER TYPE","ALTER USAGE LIST","ALTER USER MAPPING","ALTER VIEW","ALTER WORK ACTION SET","ALTER WORK CLASS SET","ALTER WORKLOAD","ALTER WRAPPER","ALTER XSROBJECT","ALTER STOGROUP","ALTER TABLESPACE","ALTER TRIGGER","ALTER TRUSTED CONTEXT","ALTER VIEW","ASSOCIATE [RESULT SET] {LOCATOR | LOCATORS}","AUDIT","BEGIN DECLARE SECTION","CALL","CLOSE","COMMENT ON","COMMIT [WORK]","CONNECT","CREATE [OR REPLACE] [PUBLIC] ALIAS","CREATE AUDIT POLICY","CREATE BUFFERPOOL","CREATE DATABASE PARTITION GROUP","CREATE EVENT MONITOR","CREATE [OR REPLACE] FUNCTION","CREATE FUNCTION MAPPING","CREATE HISTOGRAM TEMPLATE","CREATE [UNIQUE] INDEX","CREATE INDEX EXTENSION","CREATE [OR REPLACE] MASK","CREATE [SPECIFIC] METHOD","CREATE [OR REPLACE] MODULE","CREATE [OR REPLACE] NICKNAME","CREATE [OR REPLACE] PERMISSION","CREATE [OR REPLACE] PROCEDURE","CREATE ROLE","CREATE SCHEMA","CREATE SECURITY LABEL [COMPONENT]","CREATE SECURITY POLICY","CREATE [OR REPLACE] SEQUENCE","CREATE SERVICE CLASS","CREATE SERVER","CREATE STOGROUP","CREATE SYNONYM","CREATE [LARGE | REGULAR | {SYSTEM | USER} TEMPORARY] TABLESPACE","CREATE THRESHOLD","CREATE {TRANSFORM | TRANSFORMS} FOR","CREATE [OR REPLACE] TRIGGER","CREATE TRUSTED CONTEXT","CREATE [OR REPLACE] TYPE","CREATE TYPE MAPPING","CREATE USAGE LIST","CREATE USER MAPPING FOR","CREATE [OR REPLACE] VARIABLE","CREATE WORK ACTION SET","CREATE WORK CLASS SET","CREATE WORKLOAD","CREATE WRAPPER","DECLARE","DECLARE GLOBAL TEMPORARY TABLE","DESCRIBE [INPUT | OUTPUT]","DISCONNECT","DROP [PUBLIC] ALIAS","DROP AUDIT POLICY","DROP BUFFERPOOL","DROP DATABASE PARTITION GROUP","DROP EVENT MONITOR","DROP [SPECIFIC] FUNCTION","DROP FUNCTION MAPPING","DROP HISTOGRAM TEMPLATE","DROP INDEX [EXTENSION]","DROP MASK","DROP [SPECIFIC] METHOD","DROP MODULE","DROP NICKNAME","DROP PACKAGE","DROP PERMISSION","DROP [SPECIFIC] PROCEDURE","DROP ROLE","DROP SCHEMA","DROP SECURITY LABEL [COMPONENT]","DROP SECURITY POLICY","DROP SEQUENCE","DROP SERVER","DROP SERVICE CLASS","DROP STOGROUP","DROP TABLE HIERARCHY","DROP {TABLESPACE | TABLESPACES}","DROP {TRANSFORM | TRANSFORMS}","DROP THRESHOLD","DROP TRIGGER","DROP TRUSTED CONTEXT","DROP TYPE [MAPPING]","DROP USAGE LIST","DROP USER MAPPING FOR","DROP VARIABLE","DROP VIEW [HIERARCHY]","DROP WORK {ACTION | CLASS} SET","DROP WORKLOAD","DROP WRAPPER","DROP XSROBJECT","END DECLARE SECTION","EXECUTE [IMMEDIATE]","EXPLAIN {PLAN [SECTION] | ALL}","FETCH [FROM]","FLUSH {BUFFERPOOL | BUFFERPOOLS} ALL","FLUSH EVENT MONITOR","FLUSH FEDERATED CACHE","FLUSH OPTIMIZATION PROFILE CACHE","FLUSH PACKAGE CACHE [DYNAMIC]","FLUSH AUTHENTICATION CACHE [FOR ALL]","FREE LOCATOR","GET DIAGNOSTICS","GOTO","GRANT","INCLUDE","ITERATE","LEAVE","LOCK TABLE","LOOP","OPEN","PIPE","PREPARE","REFRESH TABLE","RELEASE","RELEASE [TO] SAVEPOINT","RENAME [TABLE | INDEX | STOGROUP | TABLESPACE]","REPEAT","RESIGNAL","RETURN","REVOKE","ROLLBACK [WORK] [TO SAVEPOINT]","SAVEPOINT","SET COMPILATION ENVIRONMENT","SET CONNECTION","SET CURRENT","SET ENCRYPTION PASSWORD","SET EVENT MONITOR STATE","SET INTEGRITY","SET PASSTHRU","SET PATH","SET ROLE","SET SCHEMA","SET SERVER OPTION","SET {SESSION AUTHORIZATION | SESSION_USER}","SET USAGE LIST","SIGNAL","TRANSFER OWNERSHIP OF","WHENEVER {NOT FOUND | SQLERROR | SQLWARNING}","WHILE"]),Qye=x(["UNION [ALL]","EXCEPT [ALL]","INTERSECT [ALL]"]),Zye=x(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN"]),ewe=x(["ON DELETE","ON UPDATE","SET NULL","{ROWS | RANGE} BETWEEN"]),twe=x([]),RR={name:"db2",tokenizerOptions:{reservedSelect:Kye,reservedClauses:[...Jye,...R6,...iy],reservedSetOperations:Qye,reservedJoins:Zye,reservedKeywordPhrases:ewe,reservedDataTypePhrases:twe,reservedKeywords:p6,reservedDataTypes:T6,reservedFunctionNames:E6,extraParens:["[]"],stringTypes:[{quote:"''-qq",prefixes:["G","N","U&"]},{quote:"''-raw",prefixes:["X","BX","GX","UX"],requirePrefix:!0}],identTypes:['""-qq'],identChars:{first:"@#$",rest:"@#$"},paramTypes:{positional:!0,named:[":"]},paramChars:{first:"@#$",rest:"@#$"},operators:["**","%","|","&","^","~","\xAC=","\xAC>","\xAC<","!>","!<","^=","^>","^<","||","->","=>"]},formatOptions:{onelineClauses:[...R6,...iy],tabularOnelineClauses:iy}}});var A6,m6=W(()=>{A6=["ARRAY_AGG","AVG","CORR","CORRELATION","COUNT","COUNT_BIG","COVAR_POP","COVARIANCE","COVAR","COVAR_SAMP","COVARIANCE_SAMP","EVERY","GROUPING","JSON_ARRAYAGG","JSON_OBJECTAGG","LISTAGG","MAX","MEDIAN","MIN","PERCENTILE_CONT","PERCENTILE_DISC","REGR_AVGX","REGR_AVGY","REGR_COUNT","REGR_INTERCEPT","REGR_R2","REGR_SLOPE","REGR_SXX","REGR_SXY","REGR_SYY","SOME","STDDEV_POP","STDDEV","STDDEV_SAMP","SUM","VAR_POP","VARIANCE","VAR","VAR_SAMP","VARIANCE_SAMP","XMLAGG","XMLGROUP","ABS","ABSVAL","ACOS","ADD_DAYS","ADD_HOURS","ADD_MINUTES","ADD_MONTHS","ADD_SECONDS","ADD_YEARS","ANTILOG","ARRAY_MAX_CARDINALITY","ARRAY_TRIM","ASCII","ASIN","ATAN","ATAN2","ATANH","BASE64_DECODE","BASE64_ENCODE","BIT_LENGTH","BITAND","BITANDNOT","BITNOT","BITOR","BITXOR","BSON_TO_JSON","CARDINALITY","CEIL","CEILING","CHAR_LENGTH","CHARACTER_LENGTH","CHR","COALESCE","COMPARE_DECFLOAT","CONCAT","CONTAINS","COS","COSH","COT","CURDATE","CURTIME","DATABASE","DATAPARTITIONNAME","DATAPARTITIONNUM","DAY","DAYNAME","DAYOFMONTH","DAYOFWEEK_ISO","DAYOFWEEK","DAYOFYEAR","DAYS","DBPARTITIONNAME","DBPARTITIONNUM","DECFLOAT_FORMAT","DECFLOAT_SORTKEY","DECRYPT_BINARY","DECRYPT_BIT","DECRYPT_CHAR","DECRYPT_DB","DEGREES","DIFFERENCE","DIGITS","DLCOMMENT","DLLINKTYPE","DLURLCOMPLETE","DLURLPATH","DLURLPATHONLY","DLURLSCHEME","DLURLSERVER","DLVALUE","DOUBLE_PRECISION","DOUBLE","ENCRPYT","ENCRYPT_AES","ENCRYPT_AES256","ENCRYPT_RC2","ENCRYPT_TDES","EXP","EXTRACT","FIRST_DAY","FLOOR","GENERATE_UNIQUE","GET_BLOB_FROM_FILE","GET_CLOB_FROM_FILE","GET_DBCLOB_FROM_FILE","GET_XML_FILE","GETHINT","GREATEST","HASH_MD5","HASH_ROW","HASH_SHA1","HASH_SHA256","HASH_SHA512","HASH_VALUES","HASHED_VALUE","HEX","HEXTORAW","HOUR","HTML_ENTITY_DECODE","HTML_ENTITY_ENCODE","HTTP_DELETE_BLOB","HTTP_DELETE","HTTP_GET_BLOB","HTTP_GET","HTTP_PATCH_BLOB","HTTP_PATCH","HTTP_POST_BLOB","HTTP_POST","HTTP_PUT_BLOB","HTTP_PUT","IDENTITY_VAL_LOCAL","IFNULL","INSERT","INSTR","INTERPRET","ISFALSE","ISNOTFALSE","ISNOTTRUE","ISTRUE","JSON_ARRAY","JSON_OBJECT","JSON_QUERY","JSON_TO_BSON","JSON_UPDATE","JSON_VALUE","JULIAN_DAY","LAND","LAST_DAY","LCASE","LEAST","LEFT","LENGTH","LN","LNOT","LOCATE_IN_STRING","LOCATE","LOG10","LOR","LOWER","LPAD","LTRIM","MAX_CARDINALITY","MAX","MICROSECOND","MIDNIGHT_SECONDS","MIN","MINUTE","MOD","MONTH","MONTHNAME","MONTHS_BETWEEN","MQREAD","MQREADCLOB","MQRECEIVE","MQRECEIVECLOB","MQSEND","MULTIPLY_ALT","NEXT_DAY","NORMALIZE_DECFLOAT","NOW","NULLIF","NVL","OCTET_LENGTH","OVERLAY","PI","POSITION","POSSTR","POW","POWER","QUANTIZE","QUARTER","RADIANS","RAISE_ERROR","RANDOM","RAND","REGEXP_COUNT","REGEXP_INSTR","REGEXP_REPLACE","REGEXP_SUBSTR","REPEAT","REPLACE","RID","RIGHT","ROUND_TIMESTAMP","ROUND","RPAD","RRN","RTRIM","SCORE","SECOND","SIGN","SIN","SINH","SOUNDEX","SPACE","SQRT","STRIP","STRLEFT","STRPOS","STRRIGHT","SUBSTR","SUBSTRING","TABLE_NAME","TABLE_SCHEMA","TAN","TANH","TIMESTAMP_FORMAT","TIMESTAMP_ISO","TIMESTAMPDIFF_BIG","TIMESTAMPDIFF","TO_CHAR","TO_CLOB","TO_DATE","TO_NUMBER","TO_TIMESTAMP","TOTALORDER","TRANSLATE","TRIM_ARRAY","TRIM","TRUNC_TIMESTAMP","TRUNC","TRUNCATE","UCASE","UPPER","URL_DECODE","URL_ENCODE","VALUE","VARBINARY_FORMAT","VARCHAR_BIT_FORMAT","VARCHAR_FORMAT_BINARY","VARCHAR_FORMAT","VERIFY_GROUP_FOR_USER","WEEK_ISO","WEEK","WRAP","XMLATTRIBUTES","XMLCOMMENT","XMLCONCAT","XMLDOCUMENT","XMLELEMENT","XMLFOREST","XMLNAMESPACES","XMLPARSE","XMLPI","XMLROW","XMLSERIALIZE","XMLTEXT","XMLVALIDATE","XOR","XSLTRANSFORM","YEAR","ZONED","BASE_TABLE","HTTP_DELETE_BLOB_VERBOSE","HTTP_DELETE_VERBOSE","HTTP_GET_BLOB_VERBOSE","HTTP_GET_VERBOSE","HTTP_PATCH_BLOB_VERBOSE","HTTP_PATCH_VERBOSE","HTTP_POST_BLOB_VERBOSE","HTTP_POST_VERBOSE","HTTP_PUT_BLOB_VERBOSE","HTTP_PUT_VERBOSE","JSON_TABLE","MQREADALL","MQREADALLCLOB","MQRECEIVEALL","MQRECEIVEALLCLOB","XMLTABLE","UNPACK","CUME_DIST","DENSE_RANK","FIRST_VALUE","LAG","LAST_VALUE","LEAD","NTH_VALUE","NTILE","PERCENT_RANK","RANK","RATIO_TO_REPORT","ROW_NUMBER","CAST"]});var g6,I6,_6=W(()=>{g6=["ABSENT","ACCORDING","ACCTNG","ACTION","ACTIVATE","ADD","ALIAS","ALL","ALLOCATE","ALLOW","ALTER","AND","ANY","APPEND","APPLNAME","ARRAY","ARRAY_AGG","ARRAY_TRIM","AS","ASC","ASENSITIVE","ASSOCIATE","ATOMIC","ATTACH","ATTRIBUTES","AUTHORIZATION","AUTONOMOUS","BEFORE","BEGIN","BETWEEN","BIND","BSON","BUFFERPOOL","BY","CACHE","CALL","CALLED","CARDINALITY","CASE","CAST","CHECK","CL","CLOSE","CLUSTER","COLLECT","COLLECTION","COLUMN","COMMENT","COMMIT","COMPACT","COMPARISONS","COMPRESS","CONCAT","CONCURRENT","CONDITION","CONNECT","CONNECT_BY_ROOT","CONNECTION","CONSTANT","CONSTRAINT","CONTAINS","CONTENT","CONTINUE","COPY","COUNT","COUNT_BIG","CREATE","CREATEIN","CROSS","CUBE","CUME_DIST","CURRENT","CURRENT_DATE","CURRENT_PATH","CURRENT_SCHEMA","CURRENT_SERVER","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_TIMEZONE","CURRENT_USER","CURSOR","CYCLE","DATABASE","DATAPARTITIONNAME","DATAPARTITIONNUM","DAY","DAYS","DB2GENERAL","DB2GENRL","DB2SQL","DBINFO","DBPARTITIONNAME","DBPARTITIONNUM","DEACTIVATE","DEALLOCATE","DECLARE","DEFAULT","DEFAULTS","DEFER","DEFINE","DEFINITION","DELETE","DELETING","DENSE_RANK","DENSERANK","DESC","DESCRIBE","DESCRIPTOR","DETACH","DETERMINISTIC","DIAGNOSTICS","DISABLE","DISALLOW","DISCONNECT","DISTINCT","DO","DOCUMENT","DROP","DYNAMIC","EACH","ELSE","ELSEIF","EMPTY","ENABLE","ENCODING","ENCRYPTION","END","END-EXEC","ENDING","ENFORCED","ERROR","ESCAPE","EVERY","EXCEPT","EXCEPTION","EXCLUDING","EXCLUSIVE","EXECUTE","EXISTS","EXIT","EXTEND","EXTERNAL","EXTRACT","FALSE","FENCED","FETCH","FIELDPROC","FILE","FINAL","FIRST_VALUE","FOR","FOREIGN","FORMAT","FREE","FREEPAGE","FROM","FULL","FUNCTION","GBPCACHE","GENERAL","GENERATED","GET","GLOBAL","GO","GOTO","GRANT","GROUP","HANDLER","HASH","HASH_ROW","HASHED_VALUE","HAVING","HINT","HOLD","HOUR","HOURS","IDENTITY","IF","IGNORE","IMMEDIATE","IMPLICITLY","IN","INCLUDE","INCLUDING","INCLUSIVE","INCREMENT","INDEX","INDEXBP","INDICATOR","INF","INFINITY","INHERIT","INLINE","INNER","INOUT","INSENSITIVE","INSERT","INSERTING","INTEGRITY","INTERPRET","INTERSECT","INTO","IS","ISNULL","ISOLATION","ITERATE","JAVA","JOIN","JSON","JSON_ARRAY","JSON_ARRAYAGG","JSON_EXISTS","JSON_OBJECT","JSON_OBJECTAGG","JSON_QUERY","JSON_TABLE","JSON_VALUE","KEEP","KEY","KEYS","LABEL","LAG","LANGUAGE","LAST_VALUE","LATERAL","LEAD","LEAVE","LEFT","LEVEL2","LIKE","LIMIT","LINKTYPE","LISTAGG","LOCAL","LOCALDATE","LOCALTIME","LOCALTIMESTAMP","LOCATION","LOCATOR","LOCK","LOCKSIZE","LOG","LOGGED","LOOP","MAINTAINED","MASK","MATCHED","MATERIALIZED","MAXVALUE","MERGE","MICROSECOND","MICROSECONDS","MINPCTUSED","MINUTE","MINUTES","MINVALUE","MIRROR","MIXED","MODE","MODIFIES","MONTH","MONTHS","NAMESPACE","NAN","NATIONAL","NCHAR","NCLOB","NESTED","NEW","NEW_TABLE","NEXTVAL","NO","NOCACHE","NOCYCLE","NODENAME","NODENUMBER","NOMAXVALUE","NOMINVALUE","NONE","NOORDER","NORMALIZED","NOT","NOTNULL","NTH_VALUE","NTILE","NULL","NULLS","NVARCHAR","OBID","OBJECT","OF","OFF","OFFSET","OLD","OLD_TABLE","OMIT","ON","ONLY","OPEN","OPTIMIZE","OPTION","OR","ORDER","ORDINALITY","ORGANIZE","OUT","OUTER","OVER","OVERLAY","OVERRIDING","PACKAGE","PADDED","PAGE","PAGESIZE","PARAMETER","PART","PARTITION","PARTITIONED","PARTITIONING","PARTITIONS","PASSING","PASSWORD","PATH","PCTFREE","PERCENT_RANK","PERCENTILE_CONT","PERCENTILE_DISC","PERIOD","PERMISSION","PIECESIZE","PIPE","PLAN","POSITION","PREPARE","PREVVAL","PRIMARY","PRIOR","PRIQTY","PRIVILEGES","PROCEDURE","PROGRAM","PROGRAMID","QUERY","RANGE","RANK","RATIO_TO_REPORT","RCDFMT","READ","READS","RECOVERY","REFERENCES","REFERENCING","REFRESH","REGEXP_LIKE","RELEASE","RENAME","REPEAT","RESET","RESIGNAL","RESTART","RESULT","RESULT_SET_LOCATOR","RETURN","RETURNING","RETURNS","REVOKE","RID","RIGHT","ROLLBACK","ROLLUP","ROUTINE","ROW","ROW_NUMBER","ROWNUMBER","ROWS","RRN","RUN","SAVEPOINT","SBCS","SCALAR","SCHEMA","SCRATCHPAD","SCROLL","SEARCH","SECOND","SECONDS","SECQTY","SECURED","SELECT","SENSITIVE","SEQUENCE","SESSION","SESSION_USER","SET","SIGNAL","SIMPLE","SKIP","SNAN","SOME","SOURCE","SPECIFIC","SQL","SQLID","SQLIND_DEFAULT","SQLIND_UNASSIGNED","STACKED","START","STARTING","STATEMENT","STATIC","STOGROUP","SUBSTRING","SUMMARY","SYNONYM","SYSTEM_TIME","SYSTEM_USER","TABLE","TABLESPACE","TABLESPACES","TAG","THEN","THREADSAFE","TO","TRANSACTION","TRANSFER","TRIGGER","TRIM","TRIM_ARRAY","TRUE","TRUNCATE","TRY_CAST","TYPE","UNDO","UNION","UNIQUE","UNIT","UNKNOWN","UNNEST","UNTIL","UPDATE","UPDATING","URI","USAGE","USE","USER","USERID","USING","VALUE","VALUES","VARIABLE","VARIANT","VCAT","VERSION","VERSIONING","VIEW","VOLATILE","WAIT","WHEN","WHENEVER","WHERE","WHILE","WITH","WITHIN","WITHOUT","WRAPPED","WRAPPER","WRITE","WRKSTNNAME","XMLAGG","XMLATTRIBUTES","XMLCAST","XMLCOMMENT","XMLCONCAT","XMLDOCUMENT","XMLELEMENT","XMLFOREST","XMLGROUP","XMLNAMESPACES","XMLPARSE","XMLPI","XMLROW","XMLSERIALIZE","XMLTABLE","XMLTEXT","XMLVALIDATE","XSLTRANSFORM","XSROBJECT","YEAR","YEARS","YES","ZONE"],I6=["ARRAY","BIGINT","BINARY","BIT","BLOB","BOOLEAN","CCSID","CHAR","CHARACTER","CLOB","DATA","DATALINK","DATE","DBCLOB","DECFLOAT","DECIMAL","DEC","DOUBLE","DOUBLE PRECISION","FLOAT","GRAPHIC","INT","INTEGER","LONG","NUMERIC","REAL","ROWID","SMALLINT","TIME","TIMESTAMP","VARBINARY","VARCHAR","VARGRAPHIC","XML"]});var nwe,rwe,N6,oy,iwe,swe,owe,awe,AR,ay=W(()=>{Mt();m6();_6();nwe=x(["SELECT [ALL | DISTINCT]"]),rwe=x(["WITH [RECURSIVE]","INTO","FROM","WHERE","GROUP BY","HAVING","PARTITION BY","ORDER [SIBLINGS] BY [INPUT SEQUENCE]","LIMIT","OFFSET","FETCH {FIRST | NEXT}","FOR UPDATE [OF]","FOR READ ONLY","OPTIMIZE FOR","INSERT INTO","VALUES","SET","MERGE INTO","WHEN [NOT] MATCHED [THEN]","UPDATE SET","DELETE","INSERT","FOR SYSTEM NAME"]),N6=x(["CREATE [OR REPLACE] TABLE"]),oy=x(["CREATE [OR REPLACE] [RECURSIVE] VIEW","UPDATE","WHERE CURRENT OF","WITH {NC | RR | RS | CS | UR}","DELETE FROM","DROP TABLE","ALTER TABLE","ADD [COLUMN]","ALTER [COLUMN]","DROP [COLUMN]","SET DATA TYPE","SET {GENERATED ALWAYS | GENERATED BY DEFAULT}","SET NOT NULL","SET {NOT HIDDEN | IMPLICITLY HIDDEN}","SET FIELDPROC","DROP {DEFAULT | NOT NULL | GENERATED | IDENTITY | ROW CHANGE TIMESTAMP | FIELDPROC}","TRUNCATE [TABLE]","SET [CURRENT] SCHEMA","SET CURRENT_SCHEMA","ALLOCATE CURSOR","ALLOCATE [SQL] DESCRIPTOR [LOCAL | GLOBAL] SQL","ALTER [SPECIFIC] {FUNCTION | PROCEDURE}","ALTER {MASK | PERMISSION | SEQUENCE | TRIGGER}","ASSOCIATE [RESULT SET] {LOCATOR | LOCATORS}","BEGIN DECLARE SECTION","CALL","CLOSE","COMMENT ON {ALIAS | COLUMN | CONSTRAINT | INDEX | MASK | PACKAGE | PARAMETER | PERMISSION | SEQUENCE | TABLE | TRIGGER | VARIABLE | XSROBJECT}","COMMENT ON [SPECIFIC] {FUNCTION | PROCEDURE | ROUTINE}","COMMENT ON PARAMETER SPECIFIC {FUNCTION | PROCEDURE | ROUTINE}","COMMENT ON [TABLE FUNCTION] RETURN COLUMN","COMMENT ON [TABLE FUNCTION] RETURN COLUMN SPECIFIC [PROCEDURE | ROUTINE]","COMMIT [WORK] [HOLD]","CONNECT [TO | RESET] USER","CREATE [OR REPLACE] {ALIAS | FUNCTION | MASK | PERMISSION | PROCEDURE | SEQUENCE | TRIGGER | VARIABLE}","CREATE [ENCODED VECTOR] INDEX","CREATE UNIQUE [WHERE NOT NULL] INDEX","CREATE SCHEMA","CREATE TYPE","DEALLOCATE [SQL] DESCRIPTOR [LOCAL | GLOBAL]","DECLARE CURSOR","DECLARE GLOBAL TEMPORARY TABLE","DECLARE","DESCRIBE CURSOR","DESCRIBE INPUT","DESCRIBE [OUTPUT]","DESCRIBE {PROCEDURE | ROUTINE}","DESCRIBE TABLE","DISCONNECT ALL [SQL]","DISCONNECT [CURRENT]","DROP {ALIAS | INDEX | MASK | PACKAGE | PERMISSION | SCHEMA | SEQUENCE | TABLE | TYPE | VARIABLE | XSROBJECT} [IF EXISTS]","DROP [SPECIFIC] {FUNCTION | PROCEDURE | ROUTINE} [IF EXISTS]","END DECLARE SECTION","EXECUTE [IMMEDIATE]","FREE LOCATOR","GET [SQL] DESCRIPTOR [LOCAL | GLOBAL]","GET [CURRENT | STACKED] DIAGNOSTICS","GRANT {ALL [PRIVILEGES] | ALTER | EXECUTE} ON {FUNCTION | PROCEDURE | ROUTINE | PACKAGE | SCHEMA | SEQUENCE | TABLE | TYPE | VARIABLE | XSROBJECT}","HOLD LOCATOR","INCLUDE","LABEL ON {ALIAS | COLUMN | CONSTRAINT | INDEX | MASK | PACKAGE | PERMISSION | SEQUENCE | TABLE | TRIGGER | VARIABLE | XSROBJECT}","LABEL ON [SPECIFIC] {FUNCTION | PROCEDURE | ROUTINE}","LOCK TABLE","OPEN","PREPARE","REFRESH TABLE","RELEASE","RELEASE [TO] SAVEPOINT","RENAME [TABLE | INDEX] TO","REVOKE {ALL [PRIVILEGES] | ALTER | EXECUTE} ON {FUNCTION | PROCEDURE | ROUTINE | PACKAGE | SCHEMA | SEQUENCE | TABLE | TYPE | VARIABLE | XSROBJECT}","ROLLBACK [WORK] [HOLD | TO SAVEPOINT]","SAVEPOINT","SET CONNECTION","SET CURRENT {DEBUG MODE | DECFLOAT ROUNDING MODE | DEGREE | IMPLICIT XMLPARSE OPTION | TEMPORAL SYSTEM_TIME}","SET [SQL] DESCRIPTOR [LOCAL | GLOBAL]","SET ENCRYPTION PASSWORD","SET OPTION","SET {[CURRENT [FUNCTION]] PATH | CURRENT_PATH}","SET RESULT SETS [WITH RETURN [TO CALLER | TO CLIENT]]","SET SESSION AUTHORIZATION","SET SESSION_USER","SET TRANSACTION","SIGNAL SQLSTATE [VALUE]","TAG","TRANSFER OWNERSHIP OF","WHENEVER {NOT FOUND | SQLERROR | SQLWARNING}"]),iwe=x(["UNION [ALL]","EXCEPT [ALL]","INTERSECT [ALL]"]),swe=x(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","[LEFT | RIGHT] EXCEPTION JOIN","{INNER | CROSS} JOIN"]),owe=x(["ON DELETE","ON UPDATE","SET NULL","{ROWS | RANGE} BETWEEN"]),awe=x([]),AR={name:"db2i",tokenizerOptions:{reservedSelect:nwe,reservedClauses:[...rwe,...N6,...oy],reservedSetOperations:iwe,reservedJoins:swe,reservedKeywordPhrases:owe,reservedDataTypePhrases:awe,reservedKeywords:g6,reservedDataTypes:I6,reservedFunctionNames:A6,nestedBlockComments:!0,extraParens:["[]"],stringTypes:[{quote:"''-qq",prefixes:["G","N"]},{quote:"''-raw",prefixes:["X","BX","GX","UX"],requirePrefix:!0}],identTypes:['""-qq'],identChars:{first:"@#$",rest:"@#$"},paramTypes:{positional:!0,named:[":"]},paramChars:{first:"@#$",rest:"@#$"},operators:["**","\xAC=","\xAC>","\xAC<","!>","!<","||","=>"]},formatOptions:{onelineClauses:[...N6,...oy],tabularOnelineClauses:oy}}});var O6,C6=W(()=>{O6=["ABS","ACOS","ADD","ADD_PARQUET_KEY","AGE","AGGREGATE","ALIAS","ALL_PROFILING_OUTPUT","ANY_VALUE","APPLY","APPROX_COUNT_DISTINCT","APPROX_QUANTILE","ARBITRARY","ARGMAX","ARGMIN","ARG_MAX","ARG_MAX_NULL","ARG_MIN","ARG_MIN_NULL","ARRAY_AGG","ARRAY_AGGR","ARRAY_AGGREGATE","ARRAY_APPEND","ARRAY_APPLY","ARRAY_CAT","ARRAY_CONCAT","ARRAY_CONTAINS","ARRAY_COSINE_SIMILARITY","ARRAY_CROSS_PRODUCT","ARRAY_DISTANCE","ARRAY_DISTINCT","ARRAY_DOT_PRODUCT","ARRAY_EXTRACT","ARRAY_FILTER","ARRAY_GRADE_UP","ARRAY_HAS","ARRAY_HAS_ALL","ARRAY_HAS_ANY","ARRAY_INDEXOF","ARRAY_INNER_PRODUCT","ARRAY_INTERSECT","ARRAY_LENGTH","ARRAY_POP_BACK","ARRAY_POP_FRONT","ARRAY_POSITION","ARRAY_PREPEND","ARRAY_PUSH_BACK","ARRAY_PUSH_FRONT","ARRAY_REDUCE","ARRAY_RESIZE","ARRAY_REVERSE","ARRAY_REVERSE_SORT","ARRAY_SELECT","ARRAY_SLICE","ARRAY_SORT","ARRAY_TO_JSON","ARRAY_TO_STRING","ARRAY_TRANSFORM","ARRAY_UNIQUE","ARRAY_VALUE","ARRAY_WHERE","ARRAY_ZIP","ARROW_SCAN","ARROW_SCAN_DUMB","ASCII","ASIN","ATAN","ATAN2","AVG","BASE64","BIN","BITSTRING","BITSTRING_AGG","BIT_AND","BIT_COUNT","BIT_LENGTH","BIT_OR","BIT_POSITION","BIT_XOR","BOOL_AND","BOOL_OR","CARDINALITY","CBRT","CEIL","CEILING","CENTURY","CHECKPOINT","CHR","COLLATIONS","COL_DESCRIPTION","COMBINE","CONCAT","CONCAT_WS","CONSTANT_OR_NULL","CONTAINS","COPY_DATABASE","CORR","COS","COT","COUNT","COUNT_IF","COUNT_STAR","COVAR_POP","COVAR_SAMP","CREATE_SORT_KEY","CURRENT_CATALOG","CURRENT_DATABASE","CURRENT_DATE","CURRENT_LOCALTIME","CURRENT_LOCALTIMESTAMP","CURRENT_QUERY","CURRENT_ROLE","CURRENT_SCHEMA","CURRENT_SCHEMAS","CURRENT_SETTING","CURRENT_USER","CURRVAL","DAMERAU_LEVENSHTEIN","DATABASE_LIST","DATABASE_SIZE","DATEDIFF","DATEPART","DATESUB","DATETRUNC","DATE_ADD","DATE_DIFF","DATE_PART","DATE_SUB","DATE_TRUNC","DAY","DAYNAME","DAYOFMONTH","DAYOFWEEK","DAYOFYEAR","DECADE","DECODE","DEGREES","DISABLE_CHECKPOINT_ON_SHUTDOWN","DISABLE_OBJECT_CACHE","DISABLE_OPTIMIZER","DISABLE_PRINT_PROGRESS_BAR","DISABLE_PROFILE","DISABLE_PROFILING","DISABLE_PROGRESS_BAR","DISABLE_VERIFICATION","DISABLE_VERIFY_EXTERNAL","DISABLE_VERIFY_FETCH_ROW","DISABLE_VERIFY_PARALLELISM","DISABLE_VERIFY_SERIALIZER","DIVIDE","DUCKDB_COLUMNS","DUCKDB_CONSTRAINTS","DUCKDB_DATABASES","DUCKDB_DEPENDENCIES","DUCKDB_EXTENSIONS","DUCKDB_FUNCTIONS","DUCKDB_INDEXES","DUCKDB_KEYWORDS","DUCKDB_MEMORY","DUCKDB_OPTIMIZERS","DUCKDB_SCHEMAS","DUCKDB_SECRETS","DUCKDB_SEQUENCES","DUCKDB_SETTINGS","DUCKDB_TABLES","DUCKDB_TEMPORARY_FILES","DUCKDB_TYPES","DUCKDB_VIEWS","EDIT","EDITDIST3","ELEMENT_AT","ENABLE_CHECKPOINT_ON_SHUTDOWN","ENABLE_OBJECT_CACHE","ENABLE_OPTIMIZER","ENABLE_PRINT_PROGRESS_BAR","ENABLE_PROFILE","ENABLE_PROFILING","ENABLE_PROGRESS_BAR","ENABLE_VERIFICATION","ENCODE","ENDS_WITH","ENTROPY","ENUM_CODE","ENUM_FIRST","ENUM_LAST","ENUM_RANGE","ENUM_RANGE_BOUNDARY","EPOCH","EPOCH_MS","EPOCH_NS","EPOCH_US","ERA","ERROR","EVEN","EXP","FACTORIAL","FAVG","FDIV","FILTER","FINALIZE","FIRST","FLATTEN","FLOOR","FMOD","FORCE_CHECKPOINT","FORMAT","FORMATREADABLEDECIMALSIZE","FORMATREADABLESIZE","FORMAT_BYTES","FORMAT_PG_TYPE","FORMAT_TYPE","FROM_BASE64","FROM_BINARY","FROM_HEX","FROM_JSON","FROM_JSON_STRICT","FSUM","FUNCTIONS","GAMMA","GCD","GENERATE_SERIES","GENERATE_SUBSCRIPTS","GEN_RANDOM_UUID","GEOMEAN","GEOMETRIC_MEAN","GETENV","GET_BIT","GET_BLOCK_SIZE","GET_CURRENT_TIME","GET_CURRENT_TIMESTAMP","GLOB","GRADE_UP","GREATEST","GREATEST_COMMON_DIVISOR","GROUP_CONCAT","HAMMING","HASH","HAS_ANY_COLUMN_PRIVILEGE","HAS_COLUMN_PRIVILEGE","HAS_DATABASE_PRIVILEGE","HAS_FOREIGN_DATA_WRAPPER_PRIVILEGE","HAS_FUNCTION_PRIVILEGE","HAS_LANGUAGE_PRIVILEGE","HAS_SCHEMA_PRIVILEGE","HAS_SEQUENCE_PRIVILEGE","HAS_SERVER_PRIVILEGE","HAS_TABLESPACE_PRIVILEGE","HAS_TABLE_PRIVILEGE","HEX","HISTOGRAM","HOUR","ICU_CALENDAR_NAMES","ICU_SORT_KEY","ILIKE_ESCAPE","IMPORT_DATABASE","INDEX_SCAN","INET_CLIENT_ADDR","INET_CLIENT_PORT","INET_SERVER_ADDR","INET_SERVER_PORT","INSTR","IN_SEARCH_PATH","ISFINITE","ISINF","ISNAN","ISODOW","ISOYEAR","JACCARD","JARO_SIMILARITY","JARO_WINKLER_SIMILARITY","JSON_ARRAY","JSON_ARRAY_LENGTH","JSON_CONTAINS","JSON_DESERIALIZE_SQL","JSON_EXECUTE_SERIALIZED_SQL","JSON_EXTRACT","JSON_EXTRACT_PATH","JSON_EXTRACT_PATH_TEXT","JSON_EXTRACT_STRING","JSON_GROUP_ARRAY","JSON_GROUP_OBJECT","JSON_GROUP_STRUCTURE","JSON_KEYS","JSON_MERGE_PATCH","JSON_OBJECT","JSON_QUOTE","JSON_SERIALIZE_PLAN","JSON_SERIALIZE_SQL","JSON_STRUCTURE","JSON_TRANSFORM","JSON_TRANSFORM_STRICT","JSON_TYPE","JSON_VALID","JULIAN","KAHAN_SUM","KURTOSIS","KURTOSIS_POP","LAST","LAST_DAY","LCASE","LCM","LEAST","LEAST_COMMON_MULTIPLE","LEFT","LEFT_GRAPHEME","LEN","LENGTH","LENGTH_GRAPHEME","LEVENSHTEIN","LGAMMA","LIKE_ESCAPE","LIST","LISTAGG","LIST_AGGR","LIST_AGGREGATE","LIST_ANY_VALUE","LIST_APPEND","LIST_APPLY","LIST_APPROX_COUNT_DISTINCT","LIST_AVG","LIST_BIT_AND","LIST_BIT_OR","LIST_BIT_XOR","LIST_BOOL_AND","LIST_BOOL_OR","LIST_CAT","LIST_CONCAT","LIST_CONTAINS","LIST_COSINE_SIMILARITY","LIST_COUNT","LIST_DISTANCE","LIST_DISTINCT","LIST_DOT_PRODUCT","LIST_ELEMENT","LIST_ENTROPY","LIST_EXTRACT","LIST_FILTER","LIST_FIRST","LIST_GRADE_UP","LIST_HAS","LIST_HAS_ALL","LIST_HAS_ANY","LIST_HISTOGRAM","LIST_INDEXOF","LIST_INNER_PRODUCT","LIST_INTERSECT","LIST_KURTOSIS","LIST_KURTOSIS_POP","LIST_LAST","LIST_MAD","LIST_MAX","LIST_MEDIAN","LIST_MIN","LIST_MODE","LIST_PACK","LIST_POSITION","LIST_PREPEND","LIST_PRODUCT","LIST_REDUCE","LIST_RESIZE","LIST_REVERSE","LIST_REVERSE_SORT","LIST_SELECT","LIST_SEM","LIST_SKEWNESS","LIST_SLICE","LIST_SORT","LIST_STDDEV_POP","LIST_STDDEV_SAMP","LIST_STRING_AGG","LIST_SUM","LIST_TRANSFORM","LIST_UNIQUE","LIST_VALUE","LIST_VAR_POP","LIST_VAR_SAMP","LIST_WHERE","LIST_ZIP","LN","LOG","LOG10","LOG2","LOWER","LPAD","LSMODE","LTRIM","MAD","MAKE_DATE","MAKE_TIME","MAKE_TIMESTAMP","MAKE_TIMESTAMPTZ","MAP","MAP_CONCAT","MAP_ENTRIES","MAP_EXTRACT","MAP_FROM_ENTRIES","MAP_KEYS","MAP_VALUES","MAX","MAX_BY","MD5","MD5_NUMBER","MD5_NUMBER_LOWER","MD5_NUMBER_UPPER","MEAN","MEDIAN","METADATA_INFO","MICROSECOND","MILLENNIUM","MILLISECOND","MIN","MINUTE","MIN_BY","MISMATCHES","MOD","MODE","MONTH","MONTHNAME","MULTIPLY","NEXTAFTER","NEXTVAL","NFC_NORMALIZE","NOT_ILIKE_ESCAPE","NOT_LIKE_ESCAPE","NOW","NULLIF","OBJ_DESCRIPTION","OCTET_LENGTH","ORD","PARQUET_FILE_METADATA","PARQUET_KV_METADATA","PARQUET_METADATA","PARQUET_SCAN","PARQUET_SCHEMA","PARSE_DIRNAME","PARSE_DIRPATH","PARSE_FILENAME","PARSE_PATH","PG_COLLATION_IS_VISIBLE","PG_CONF_LOAD_TIME","PG_CONVERSION_IS_VISIBLE","PG_FUNCTION_IS_VISIBLE","PG_GET_CONSTRAINTDEF","PG_GET_EXPR","PG_GET_VIEWDEF","PG_HAS_ROLE","PG_IS_OTHER_TEMP_SCHEMA","PG_MY_TEMP_SCHEMA","PG_OPCLASS_IS_VISIBLE","PG_OPERATOR_IS_VISIBLE","PG_OPFAMILY_IS_VISIBLE","PG_POSTMASTER_START_TIME","PG_SIZE_PRETTY","PG_TABLE_IS_VISIBLE","PG_TIMEZONE_NAMES","PG_TS_CONFIG_IS_VISIBLE","PG_TS_DICT_IS_VISIBLE","PG_TS_PARSER_IS_VISIBLE","PG_TS_TEMPLATE_IS_VISIBLE","PG_TYPEOF","PG_TYPE_IS_VISIBLE","PI","PLATFORM","POSITION","POW","POWER","PRAGMA_COLLATIONS","PRAGMA_DATABASE_SIZE","PRAGMA_METADATA_INFO","PRAGMA_PLATFORM","PRAGMA_SHOW","PRAGMA_STORAGE_INFO","PRAGMA_TABLE_INFO","PRAGMA_USER_AGENT","PRAGMA_VERSION","PREFIX","PRINTF","PRODUCT","QUANTILE","QUANTILE_CONT","QUANTILE_DISC","QUARTER","RADIANS","RANDOM","RANGE","READFILE","READ_BLOB","READ_CSV","READ_CSV_AUTO","READ_JSON","READ_JSON_AUTO","READ_JSON_OBJECTS","READ_JSON_OBJECTS_AUTO","READ_NDJSON","READ_NDJSON_AUTO","READ_NDJSON_OBJECTS","READ_PARQUET","READ_TEXT","REDUCE","REGEXP_ESCAPE","REGEXP_EXTRACT","REGEXP_EXTRACT_ALL","REGEXP_FULL_MATCH","REGEXP_MATCHES","REGEXP_REPLACE","REGEXP_SPLIT_TO_ARRAY","REGEXP_SPLIT_TO_TABLE","REGR_AVGX","REGR_AVGY","REGR_COUNT","REGR_INTERCEPT","REGR_R2","REGR_SLOPE","REGR_SXX","REGR_SXY","REGR_SYY","REPEAT","REPEAT_ROW","REPLACE","RESERVOIR_QUANTILE","REVERSE","RIGHT","RIGHT_GRAPHEME","ROUND","ROUNDBANKERS","ROUND_EVEN","ROW","ROW_TO_JSON","RPAD","RTRIM","SECOND","SEM","SEQ_SCAN","SESSION_USER","SETSEED","SET_BIT","SHA256","SHA3","SHELL_ADD_SCHEMA","SHELL_ESCAPE_CRNL","SHELL_IDQUOTE","SHELL_MODULE_SCHEMA","SHELL_PUTSNL","SHOBJ_DESCRIPTION","SHOW","SHOW_DATABASES","SHOW_TABLES","SHOW_TABLES_EXPANDED","SIGN","SIGNBIT","SIN","SKEWNESS","SNIFF_CSV","SPLIT","SPLIT_PART","SQL_AUTO_COMPLETE","SQRT","STARTS_WITH","STATS","STDDEV","STDDEV_POP","STDDEV_SAMP","STORAGE_INFO","STRFTIME","STRING_AGG","STRING_SPLIT","STRING_SPLIT_REGEX","STRING_TO_ARRAY","STRIP_ACCENTS","STRLEN","STRPOS","STRPTIME","STRUCT_EXTRACT","STRUCT_INSERT","STRUCT_PACK","STR_SPLIT","STR_SPLIT_REGEX","SUBSTR","SUBSTRING","SUBSTRING_GRAPHEME","SUBTRACT","SUFFIX","SUM","SUMKAHAN","SUMMARY","SUM_NO_OVERFLOW","TABLE_INFO","TAN","TEST_ALL_TYPES","TEST_VECTOR_TYPES","TIMEZONE","TIMEZONE_HOUR","TIMEZONE_MINUTE","TIME_BUCKET","TODAY","TO_BASE","TO_BASE64","TO_BINARY","TO_CENTURIES","TO_DAYS","TO_DECADES","TO_HEX","TO_HOURS","TO_JSON","TO_MICROSECONDS","TO_MILLENNIA","TO_MILLISECONDS","TO_MINUTES","TO_MONTHS","TO_SECONDS","TO_TIMESTAMP","TO_WEEKS","TO_YEARS","TRANSACTION_TIMESTAMP","TRANSLATE","TRIM","TRUNC","TRY_STRPTIME","TXID_CURRENT","TYPEOF","UCASE","UNBIN","UNHEX","UNICODE","UNION_EXTRACT","UNION_TAG","UNION_VALUE","UNNEST","UNPIVOT_LIST","UPPER","USER","USER_AGENT","UUID","VARIANCE","VAR_POP","VAR_SAMP","VECTOR_TYPE","VERIFY_EXTERNAL","VERIFY_FETCH_ROW","VERIFY_PARALLELISM","VERIFY_SERIALIZER","VERSION","WEEK","WEEKDAY","WEEKOFYEAR","WHICH_SECRET","WRITEFILE","XOR","YEAR","YEARWEEK","CAST","COALESCE","RANK","ROW_NUMBER"]});var b6,y6,w6=W(()=>{b6=["ALL","ANALYSE","ANALYZE","AND","ANY","AS","ASC","ATTACH","ASYMMETRIC","BOTH","CASE","CAST","CHECK","COLLATE","COLUMN","CONSTRAINT","CREATE","DEFAULT","DEFERRABLE","DESC","DESCRIBE","DETACH","DISTINCT","DO","ELSE","END","EXCEPT","FALSE","FETCH","FOR","FOREIGN","FROM","GRANT","GROUP","HAVING","IN","INITIALLY","INTERSECT","INTO","IS","LATERAL","LEADING","LIMIT","NOT","NULL","OFFSET","ON","ONLY","OR","ORDER","PIVOT","PIVOT_LONGER","PIVOT_WIDER","PLACING","PRIMARY","REFERENCES","RETURNING","SELECT","SHOW","SOME","SUMMARIZE","SYMMETRIC","TABLE","THEN","TO","TRAILING","TRUE","UNION","UNIQUE","UNPIVOT","USING","VARIADIC","WHEN","WHERE","WINDOW","WITH"],y6=["ARRAY","BIGINT","BINARY","BIT","BITSTRING","BLOB","BOOL","BOOLEAN","BPCHAR","BYTEA","CHAR","DATE","DATETIME","DEC","DECIMAL","DOUBLE","ENUM","FLOAT","FLOAT4","FLOAT8","GUID","HUGEINT","INET","INT","INT1","INT128","INT16","INT2","INT32","INT4","INT64","INT8","INTEGER","INTEGRAL","INTERVAL","JSON","LIST","LOGICAL","LONG","MAP","NUMERIC","NVARCHAR","OID","REAL","ROW","SHORT","SIGNED","SMALLINT","STRING","STRUCT","TEXT","TIME","TIMESTAMP_MS","TIMESTAMP_NS","TIMESTAMP_S","TIMESTAMP_US","TIMESTAMP","TIMESTAMPTZ","TIMETZ","TINYINT","UBIGINT","UHUGEINT","UINT128","UINT16","UINT32","UINT64","UINT8","UINTEGER","UNION","USMALLINT","UTINYINT","UUID","VARBINARY","VARCHAR"]});var lwe,cwe,L6,ly,uwe,dwe,fwe,Ewe,mR,cy=W(()=>{Mt();C6();w6();lwe=x(["SELECT [ALL | DISTINCT]"]),cwe=x(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY [ALL]","HAVING","WINDOW","PARTITION BY","ORDER BY [ALL]","LIMIT","OFFSET","USING SAMPLE","QUALIFY","INSERT [OR REPLACE] INTO","VALUES","DEFAULT VALUES","SET","RETURNING"]),L6=x(["CREATE [OR REPLACE] [TEMPORARY | TEMP] TABLE [IF NOT EXISTS]"]),ly=x(["UPDATE","ON CONFLICT","DELETE FROM","DROP TABLE [IF EXISTS]","TRUNCATE","ALTER TABLE","ADD [COLUMN] [IF NOT EXISTS]","ADD PRIMARY KEY","DROP [COLUMN] [IF EXISTS]","ALTER [COLUMN]","RENAME [COLUMN]","RENAME TO","SET [DATA] TYPE","{SET | DROP} DEFAULT","{SET | DROP} NOT NULL","CREATE [OR REPLACE] [TEMPORARY | TEMP] {MACRO | FUNCTION}","DROP MACRO [TABLE] [IF EXISTS]","DROP FUNCTION [IF EXISTS]","CREATE [UNIQUE] INDEX [IF NOT EXISTS]","DROP INDEX [IF EXISTS]","CREATE [OR REPLACE] SCHEMA [IF NOT EXISTS]","DROP SCHEMA [IF EXISTS]","CREATE [OR REPLACE] [PERSISTENT | TEMPORARY] SECRET [IF NOT EXISTS]","DROP [PERSISTENT | TEMPORARY] SECRET [IF EXISTS]","CREATE [OR REPLACE] [TEMPORARY | TEMP] SEQUENCE","DROP SEQUENCE [IF EXISTS]","CREATE [OR REPLACE] [TEMPORARY | TEMP] VIEW [IF NOT EXISTS]","DROP VIEW [IF EXISTS]","ALTER VIEW","CREATE TYPE","DROP TYPE [IF EXISTS]","ANALYZE","ATTACH [DATABASE] [IF NOT EXISTS]","DETACH [DATABASE] [IF EXISTS]","CALL","[FORCE] CHECKPOINT","COMMENT ON [TABLE | COLUMN | VIEW | INDEX | SEQUENCE | TYPE | MACRO | MACRO TABLE]","COPY [FROM DATABASE]","DESCRIBE","EXPORT DATABASE","IMPORT DATABASE","INSTALL","LOAD","PIVOT","PIVOT_WIDER","UNPIVOT","EXPLAIN [ANALYZE]","SET {LOCAL | SESSION | GLOBAL}","RESET [LOCAL | SESSION | GLOBAL]","{SET | RESET} VARIABLE","SUMMARIZE","BEGIN TRANSACTION","ROLLBACK","COMMIT","ABORT","USE","VACUUM [ANALYZE]","PREPARE","EXECUTE","DEALLOCATE [PREPARE]"]),uwe=x(["UNION [ALL | BY NAME]","EXCEPT [ALL]","INTERSECT [ALL]"]),dwe=x(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","{NATURAL | ASOF} [INNER] JOIN","{NATURAL | ASOF} {LEFT | RIGHT | FULL} [OUTER] JOIN","POSITIONAL JOIN","ANTI JOIN","SEMI JOIN"]),fwe=x(["{ROWS | RANGE | GROUPS} BETWEEN","SIMILAR TO","IS [NOT] DISTINCT FROM"]),Ewe=x(["TIMESTAMP WITH TIME ZONE"]),mR={name:"duckdb",tokenizerOptions:{reservedSelect:lwe,reservedClauses:[...cwe,...L6,...ly],reservedSetOperations:uwe,reservedJoins:dwe,reservedKeywordPhrases:fwe,reservedDataTypePhrases:Ewe,supportsXor:!0,reservedKeywords:b6,reservedDataTypes:y6,reservedFunctionNames:O6,nestedBlockComments:!0,extraParens:["[]","{}"],underscoresInNumbers:!0,stringTypes:["$$","''-qq",{quote:"''-qq-bs",prefixes:["E"],requirePrefix:!0},{quote:"''-raw",prefixes:["B","X"],requirePrefix:!0}],identTypes:['""-qq'],identChars:{rest:"$"},paramTypes:{positional:!0,numbered:["$"],quoted:["$"]},operators:["//","%","**","^","!","&","|","~","<<",">>","::","==","->","->>",":",":=","=>","~~","!~~","~~*","!~~*","~~~","~","!~","~*","!~*","^@","||",">>=","<<="]},formatOptions:{alwaysDenseOperators:["::"],onelineClauses:[...L6,...ly],tabularOnelineClauses:ly}}});var D6,P6=W(()=>{D6=["ABS","ACOS","ASIN","ATAN","BIN","BROUND","CBRT","CEIL","CEILING","CONV","COS","DEGREES","EXP","FACTORIAL","FLOOR","GREATEST","HEX","LEAST","LN","LOG","LOG10","LOG2","NEGATIVE","PI","PMOD","POSITIVE","POW","POWER","RADIANS","RAND","ROUND","SHIFTLEFT","SHIFTRIGHT","SHIFTRIGHTUNSIGNED","SIGN","SIN","SQRT","TAN","UNHEX","WIDTH_BUCKET","ARRAY_CONTAINS","MAP_KEYS","MAP_VALUES","SIZE","SORT_ARRAY","BINARY","CAST","ADD_MONTHS","DATE","DATE_ADD","DATE_FORMAT","DATE_SUB","DATEDIFF","DAY","DAYNAME","DAYOFMONTH","DAYOFYEAR","EXTRACT","FROM_UNIXTIME","FROM_UTC_TIMESTAMP","HOUR","LAST_DAY","MINUTE","MONTH","MONTHS_BETWEEN","NEXT_DAY","QUARTER","SECOND","TIMESTAMP","TO_DATE","TO_UTC_TIMESTAMP","TRUNC","UNIX_TIMESTAMP","WEEKOFYEAR","YEAR","ASSERT_TRUE","COALESCE","IF","ISNOTNULL","ISNULL","NULLIF","NVL","ASCII","BASE64","CHARACTER_LENGTH","CHR","CONCAT","CONCAT_WS","CONTEXT_NGRAMS","DECODE","ELT","ENCODE","FIELD","FIND_IN_SET","FORMAT_NUMBER","GET_JSON_OBJECT","IN_FILE","INITCAP","INSTR","LCASE","LENGTH","LEVENSHTEIN","LOCATE","LOWER","LPAD","LTRIM","NGRAMS","OCTET_LENGTH","PARSE_URL","PRINTF","QUOTE","REGEXP_EXTRACT","REGEXP_REPLACE","REPEAT","REVERSE","RPAD","RTRIM","SENTENCES","SOUNDEX","SPACE","SPLIT","STR_TO_MAP","SUBSTR","SUBSTRING","TRANSLATE","TRIM","UCASE","UNBASE64","UPPER","MASK","MASK_FIRST_N","MASK_HASH","MASK_LAST_N","MASK_SHOW_FIRST_N","MASK_SHOW_LAST_N","AES_DECRYPT","AES_ENCRYPT","CRC32","CURRENT_DATABASE","CURRENT_USER","HASH","JAVA_METHOD","LOGGED_IN_USER","MD5","REFLECT","SHA","SHA1","SHA2","SURROGATE_KEY","VERSION","AVG","COLLECT_LIST","COLLECT_SET","CORR","COUNT","COVAR_POP","COVAR_SAMP","HISTOGRAM_NUMERIC","MAX","MIN","NTILE","PERCENTILE","PERCENTILE_APPROX","REGR_AVGX","REGR_AVGY","REGR_COUNT","REGR_INTERCEPT","REGR_R2","REGR_SLOPE","REGR_SXX","REGR_SXY","REGR_SYY","STDDEV_POP","STDDEV_SAMP","SUM","VAR_POP","VAR_SAMP","VARIANCE","EXPLODE","INLINE","JSON_TUPLE","PARSE_URL_TUPLE","POSEXPLODE","STACK","LEAD","LAG","FIRST_VALUE","LAST_VALUE","RANK","ROW_NUMBER","DENSE_RANK","CUME_DIST","PERCENT_RANK","NTILE"]});var x6,v6,M6=W(()=>{x6=["ADD","ADMIN","AFTER","ANALYZE","ARCHIVE","ASC","BEFORE","BUCKET","BUCKETS","CASCADE","CHANGE","CLUSTER","CLUSTERED","CLUSTERSTATUS","COLLECTION","COLUMNS","COMMENT","COMPACT","COMPACTIONS","COMPUTE","CONCATENATE","CONTINUE","DATA","DATABASES","DATETIME","DAY","DBPROPERTIES","DEFERRED","DEFINED","DELIMITED","DEPENDENCY","DESC","DIRECTORIES","DIRECTORY","DISABLE","DISTRIBUTE","ELEM_TYPE","ENABLE","ESCAPED","EXCLUSIVE","EXPLAIN","EXPORT","FIELDS","FILE","FILEFORMAT","FIRST","FORMAT","FORMATTED","FUNCTIONS","HOLD_DDLTIME","HOUR","IDXPROPERTIES","IGNORE","INDEX","INDEXES","INPATH","INPUTDRIVER","INPUTFORMAT","ITEMS","JAR","KEYS","KEY_TYPE","LIMIT","LINES","LOAD","LOCATION","LOCK","LOCKS","LOGICAL","LONG","MAPJOIN","MATERIALIZED","METADATA","MINUS","MINUTE","MONTH","MSCK","NOSCAN","NO_DROP","OFFLINE","OPTION","OUTPUTDRIVER","OUTPUTFORMAT","OVERWRITE","OWNER","PARTITIONED","PARTITIONS","PLUS","PRETTY","PRINCIPALS","PROTECTION","PURGE","READ","READONLY","REBUILD","RECORDREADER","RECORDWRITER","RELOAD","RENAME","REPAIR","REPLACE","REPLICATION","RESTRICT","REWRITE","ROLE","ROLES","SCHEMA","SCHEMAS","SECOND","SEMI","SERDE","SERDEPROPERTIES","SERVER","SETS","SHARED","SHOW","SHOW_DATABASE","SKEWED","SORT","SORTED","SSL","STATISTICS","STORED","STREAMTABLE","STRING","TABLES","TBLPROPERTIES","TEMPORARY","TERMINATED","TINYINT","TOUCH","TRANSACTIONS","UNARCHIVE","UNDO","UNIONTYPE","UNLOCK","UNSET","UNSIGNED","URI","USE","UTC","UTCTIMESTAMP","VALUE_TYPE","VIEW","WHILE","YEAR","AUTOCOMMIT","ISOLATION","LEVEL","OFFSET","SNAPSHOT","TRANSACTION","WORK","WRITE","ABORT","KEY","LAST","NORELY","NOVALIDATE","NULLS","RELY","VALIDATE","DETAIL","DOW","EXPRESSION","OPERATOR","QUARTER","SUMMARY","VECTORIZATION","WEEK","YEARS","MONTHS","WEEKS","DAYS","HOURS","MINUTES","SECONDS","TIMESTAMPTZ","ZONE","ALL","ALTER","AND","AS","AUTHORIZATION","BETWEEN","BOTH","BY","CASE","CAST","COLUMN","CONF","CREATE","CROSS","CUBE","CURRENT","CURRENT_DATE","CURRENT_TIMESTAMP","CURSOR","DATABASE","DELETE","DESCRIBE","DISTINCT","DROP","ELSE","END","EXCHANGE","EXISTS","EXTENDED","EXTERNAL","FALSE","FETCH","FOLLOWING","FOR","FROM","FULL","FUNCTION","GRANT","GROUP","GROUPING","HAVING","IF","IMPORT","IN","INNER","INSERT","INTERSECT","INTO","IS","JOIN","LATERAL","LEFT","LESS","LIKE","LOCAL","MACRO","MORE","NONE","NOT","NULL","OF","ON","OR","ORDER","OUT","OUTER","OVER","PARTIALSCAN","PARTITION","PERCENT","PRECEDING","PRESERVE","PROCEDURE","RANGE","READS","REDUCE","REVOKE","RIGHT","ROLLUP","ROW","ROWS","SELECT","SET","TABLE","TABLESAMPLE","THEN","TO","TRANSFORM","TRIGGER","TRUE","TRUNCATE","UNBOUNDED","UNION","UNIQUEJOIN","UPDATE","USER","USING","UTC_TMESTAMP","VALUES","WHEN","WHERE","WINDOW","WITH","COMMIT","ONLY","REGEXP","RLIKE","ROLLBACK","START","CACHE","CONSTRAINT","FOREIGN","PRIMARY","REFERENCES","DAYOFWEEK","EXTRACT","FLOOR","VIEWS","TIME","SYNC","TEXTFILE","SEQUENCEFILE","ORC","CSV","TSV","PARQUET","AVRO","RCFILE","JSONFILE","INPUTFORMAT","OUTPUTFORMAT"],v6=["ARRAY","BIGINT","BINARY","BOOLEAN","CHAR","DATE","DECIMAL","DOUBLE","FLOAT","INT","INTEGER","INTERVAL","MAP","NUMERIC","PRECISION","SMALLINT","STRUCT","TIMESTAMP","VARCHAR"]});var hwe,pwe,U6,uy,Twe,Swe,Rwe,Awe,gR,dy=W(()=>{Mt();P6();M6();hwe=x(["SELECT [ALL | DISTINCT]"]),pwe=x(["WITH","FROM","WHERE","GROUP BY","HAVING","WINDOW","PARTITION BY","ORDER BY","SORT BY","CLUSTER BY","DISTRIBUTE BY","LIMIT","INSERT INTO [TABLE]","VALUES","SET","MERGE INTO","WHEN [NOT] MATCHED [THEN]","UPDATE SET","INSERT [VALUES]","INSERT OVERWRITE [LOCAL] DIRECTORY","LOAD DATA [LOCAL] INPATH","[OVERWRITE] INTO TABLE"]),U6=x(["CREATE [TEMPORARY] [EXTERNAL] TABLE [IF NOT EXISTS]"]),uy=x(["CREATE [MATERIALIZED] VIEW [IF NOT EXISTS]","UPDATE","DELETE FROM","DROP TABLE [IF EXISTS]","ALTER TABLE","RENAME TO","TRUNCATE [TABLE]","ALTER","CREATE","USE","DESCRIBE","DROP","FETCH","SHOW","STORED AS","STORED BY","ROW FORMAT"]),Twe=x(["UNION [ALL | DISTINCT]"]),Swe=x(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","LEFT SEMI JOIN"]),Rwe=x(["{ROWS | RANGE} BETWEEN"]),Awe=x([]),gR={name:"hive",tokenizerOptions:{reservedSelect:hwe,reservedClauses:[...pwe,...U6,...uy],reservedSetOperations:Twe,reservedJoins:Swe,reservedKeywordPhrases:Rwe,reservedDataTypePhrases:Awe,reservedKeywords:x6,reservedDataTypes:v6,reservedFunctionNames:D6,extraParens:["[]"],stringTypes:['""-bs',"''-bs"],identTypes:["``"],variableTypes:[{quote:"{}",prefixes:["$"],requirePrefix:!0}],operators:["%","~","^","|","&","<=>","==","!","||"]},formatOptions:{onelineClauses:[...U6,...uy],tabularOnelineClauses:uy}}});function po(t){return t.map((e,n)=>{let r=t[n+1]||Bi;if(Zr.SET(e)&&r.text==="(")return Object.assign(Object.assign({},e),{type:V.RESERVED_FUNCTION_NAME});let i=t[n-1]||Bi;return Zr.VALUES(e)&&i.text==="="?Object.assign(Object.assign({},e),{type:V.RESERVED_FUNCTION_NAME}):e})}var mf=W(()=>{Pr()});var B6,F6,H6=W(()=>{B6=["ACCESSIBLE","ADD","ALL","ALTER","ANALYZE","AND","AS","ASC","ASENSITIVE","BEFORE","BETWEEN","BOTH","BY","CALL","CASCADE","CASE","CHANGE","CHECK","COLLATE","COLUMN","CONDITION","CONSTRAINT","CONTINUE","CONVERT","CREATE","CROSS","CURRENT_DATE","CURRENT_ROLE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURSOR","DATABASE","DATABASES","DAY_HOUR","DAY_MICROSECOND","DAY_MINUTE","DAY_SECOND","DECLARE","DEFAULT","DELAYED","DELETE","DELETE_DOMAIN_ID","DESC","DESCRIBE","DETERMINISTIC","DISTINCT","DISTINCTROW","DIV","DO_DOMAIN_IDS","DROP","DUAL","EACH","ELSE","ELSEIF","ENCLOSED","ESCAPED","EXCEPT","EXISTS","EXIT","EXPLAIN","FALSE","FETCH","FOR","FORCE","FOREIGN","FROM","FULLTEXT","GENERAL","GRANT","GROUP","HAVING","HIGH_PRIORITY","HOUR_MICROSECOND","HOUR_MINUTE","HOUR_SECOND","IF","IGNORE","IGNORE_DOMAIN_IDS","IGNORE_SERVER_IDS","IN","INDEX","INFILE","INNER","INOUT","INSENSITIVE","INSERT","INTERSECT","INTERVAL","INTO","IS","ITERATE","JOIN","KEY","KEYS","KILL","LEADING","LEAVE","LEFT","LIKE","LIMIT","LINEAR","LINES","LOAD","LOCALTIME","LOCALTIMESTAMP","LOCK","LOOP","LOW_PRIORITY","MASTER_HEARTBEAT_PERIOD","MASTER_SSL_VERIFY_SERVER_CERT","MATCH","MAXVALUE","MINUTE_MICROSECOND","MINUTE_SECOND","MOD","MODIFIES","NATURAL","NOT","NO_WRITE_TO_BINLOG","NULL","OFFSET","ON","OPTIMIZE","OPTION","OPTIONALLY","OR","ORDER","OUT","OUTER","OUTFILE","OVER","PAGE_CHECKSUM","PARSE_VCOL_EXPR","PARTITION","POSITION","PRIMARY","PROCEDURE","PURGE","RANGE","READ","READS","READ_WRITE","RECURSIVE","REF_SYSTEM_ID","REFERENCES","REGEXP","RELEASE","RENAME","REPEAT","REPLACE","REQUIRE","RESIGNAL","RESTRICT","RETURN","RETURNING","REVOKE","RIGHT","RLIKE","ROW_NUMBER","ROWS","SCHEMA","SCHEMAS","SECOND_MICROSECOND","SELECT","SENSITIVE","SEPARATOR","SET","SHOW","SIGNAL","SLOW","SPATIAL","SPECIFIC","SQL","SQLEXCEPTION","SQLSTATE","SQLWARNING","SQL_BIG_RESULT","SQL_CALC_FOUND_ROWS","SQL_SMALL_RESULT","SSL","STARTING","STATS_AUTO_RECALC","STATS_PERSISTENT","STATS_SAMPLE_PAGES","STRAIGHT_JOIN","TABLE","TERMINATED","THEN","TO","TRAILING","TRIGGER","TRUE","UNDO","UNION","UNIQUE","UNLOCK","UNSIGNED","UPDATE","USAGE","USE","USING","UTC_DATE","UTC_TIME","UTC_TIMESTAMP","VALUES","WHEN","WHERE","WHILE","WINDOW","WITH","WRITE","XOR","YEAR_MONTH","ZEROFILL"],F6=["BIGINT","BINARY","BIT","BLOB","CHAR BYTE","CHAR","CHARACTER","DATETIME","DEC","DECIMAL","DOUBLE PRECISION","DOUBLE","ENUM","FIXED","FLOAT","FLOAT4","FLOAT8","INT","INT1","INT2","INT3","INT4","INT8","INTEGER","LONG","LONGBLOB","LONGTEXT","MEDIUMBLOB","MEDIUMINT","MEDIUMTEXT","MIDDLEINT","NATIONAL CHAR","NATIONAL VARCHAR","NUMERIC","PRECISION","REAL","SMALLINT","TEXT","TIMESTAMP","TINYBLOB","TINYINT","TINYTEXT","VARBINARY","VARCHAR","VARCHARACTER","VARYING","YEAR"]});var G6,$6=W(()=>{G6=["ADDDATE","ADD_MONTHS","BIT_AND","BIT_OR","BIT_XOR","CAST","COUNT","CUME_DIST","CURDATE","CURTIME","DATE_ADD","DATE_SUB","DATE_FORMAT","DECODE","DENSE_RANK","EXTRACT","FIRST_VALUE","GROUP_CONCAT","JSON_ARRAYAGG","JSON_OBJECTAGG","LAG","LEAD","MAX","MEDIAN","MID","MIN","NOW","NTH_VALUE","NTILE","POSITION","PERCENT_RANK","PERCENTILE_CONT","PERCENTILE_DISC","RANK","ROW_NUMBER","SESSION_USER","STD","STDDEV","STDDEV_POP","STDDEV_SAMP","SUBDATE","SUBSTR","SUBSTRING","SUM","SYSTEM_USER","TRIM","TRIM_ORACLE","VARIANCE","VAR_POP","VAR_SAMP","ABS","ACOS","ADDTIME","AES_DECRYPT","AES_ENCRYPT","ASIN","ATAN","ATAN2","BENCHMARK","BIN","BINLOG_GTID_POS","BIT_COUNT","BIT_LENGTH","CEIL","CEILING","CHARACTER_LENGTH","CHAR_LENGTH","CHR","COERCIBILITY","COLUMN_CHECK","COLUMN_EXISTS","COLUMN_LIST","COLUMN_JSON","COMPRESS","CONCAT","CONCAT_OPERATOR_ORACLE","CONCAT_WS","CONNECTION_ID","CONV","CONVERT_TZ","COS","COT","CRC32","DATEDIFF","DAYNAME","DAYOFMONTH","DAYOFWEEK","DAYOFYEAR","DEGREES","DECODE_HISTOGRAM","DECODE_ORACLE","DES_DECRYPT","DES_ENCRYPT","ELT","ENCODE","ENCRYPT","EXP","EXPORT_SET","EXTRACTVALUE","FIELD","FIND_IN_SET","FLOOR","FORMAT","FOUND_ROWS","FROM_BASE64","FROM_DAYS","FROM_UNIXTIME","GET_LOCK","GREATEST","HEX","IFNULL","INSTR","ISNULL","IS_FREE_LOCK","IS_USED_LOCK","JSON_ARRAY","JSON_ARRAY_APPEND","JSON_ARRAY_INSERT","JSON_COMPACT","JSON_CONTAINS","JSON_CONTAINS_PATH","JSON_DEPTH","JSON_DETAILED","JSON_EXISTS","JSON_EXTRACT","JSON_INSERT","JSON_KEYS","JSON_LENGTH","JSON_LOOSE","JSON_MERGE","JSON_MERGE_PATCH","JSON_MERGE_PRESERVE","JSON_QUERY","JSON_QUOTE","JSON_OBJECT","JSON_REMOVE","JSON_REPLACE","JSON_SET","JSON_SEARCH","JSON_TYPE","JSON_UNQUOTE","JSON_VALID","JSON_VALUE","LAST_DAY","LAST_INSERT_ID","LCASE","LEAST","LENGTH","LENGTHB","LN","LOAD_FILE","LOCATE","LOG","LOG10","LOG2","LOWER","LPAD","LPAD_ORACLE","LTRIM","LTRIM_ORACLE","MAKEDATE","MAKETIME","MAKE_SET","MASTER_GTID_WAIT","MASTER_POS_WAIT","MD5","MONTHNAME","NAME_CONST","NVL","NVL2","OCT","OCTET_LENGTH","ORD","PERIOD_ADD","PERIOD_DIFF","PI","POW","POWER","QUOTE","REGEXP_INSTR","REGEXP_REPLACE","REGEXP_SUBSTR","RADIANS","RAND","RELEASE_ALL_LOCKS","RELEASE_LOCK","REPLACE_ORACLE","REVERSE","ROUND","RPAD","RPAD_ORACLE","RTRIM","RTRIM_ORACLE","SEC_TO_TIME","SHA","SHA1","SHA2","SIGN","SIN","SLEEP","SOUNDEX","SPACE","SQRT","STRCMP","STR_TO_DATE","SUBSTR_ORACLE","SUBSTRING_INDEX","SUBTIME","SYS_GUID","TAN","TIMEDIFF","TIME_FORMAT","TIME_TO_SEC","TO_BASE64","TO_CHAR","TO_DAYS","TO_SECONDS","UCASE","UNCOMPRESS","UNCOMPRESSED_LENGTH","UNHEX","UNIX_TIMESTAMP","UPDATEXML","UPPER","UUID","UUID_SHORT","VERSION","WEEKDAY","WEEKOFYEAR","WSREP_LAST_WRITTEN_GTID","WSREP_LAST_SEEN_GTID","WSREP_SYNC_WAIT_UPTO_GTID","YEARWEEK","COALESCE","NULLIF"]});var mwe,gwe,W6,fy,Iwe,_we,Nwe,Owe,IR,Ey=W(()=>{Mt();mf();H6();$6();mwe=x(["SELECT [ALL | DISTINCT | DISTINCTROW]"]),gwe=x(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY","HAVING","PARTITION BY","ORDER BY","LIMIT","OFFSET","FETCH {FIRST | NEXT}","INSERT [LOW_PRIORITY | DELAYED | HIGH_PRIORITY] [IGNORE] [INTO]","REPLACE [LOW_PRIORITY | DELAYED] [INTO]","VALUES","ON DUPLICATE KEY UPDATE","SET","RETURNING"]),W6=x(["CREATE [OR REPLACE] [TEMPORARY] TABLE [IF NOT EXISTS]"]),fy=x(["CREATE [OR REPLACE] [SQL SECURITY DEFINER | SQL SECURITY INVOKER] VIEW [IF NOT EXISTS]","UPDATE [LOW_PRIORITY] [IGNORE]","DELETE [LOW_PRIORITY] [QUICK] [IGNORE] FROM","DROP [TEMPORARY] TABLE [IF EXISTS]","ALTER [ONLINE] [IGNORE] TABLE [IF EXISTS]","ADD [COLUMN] [IF NOT EXISTS]","{CHANGE | MODIFY} [COLUMN] [IF EXISTS]","DROP [COLUMN] [IF EXISTS]","RENAME [TO]","RENAME COLUMN","ALTER [COLUMN]","{SET | DROP} DEFAULT","SET {VISIBLE | INVISIBLE}","TRUNCATE [TABLE]","ALTER DATABASE","ALTER DATABASE COMMENT","ALTER EVENT","ALTER FUNCTION","ALTER PROCEDURE","ALTER SCHEMA","ALTER SCHEMA COMMENT","ALTER SEQUENCE","ALTER SERVER","ALTER USER","ALTER VIEW","ANALYZE","ANALYZE TABLE","BACKUP LOCK","BACKUP STAGE","BACKUP UNLOCK","BEGIN","BINLOG","CACHE INDEX","CALL","CHANGE MASTER TO","CHECK TABLE","CHECK VIEW","CHECKSUM TABLE","COMMIT","CREATE AGGREGATE FUNCTION","CREATE DATABASE","CREATE EVENT","CREATE FUNCTION","CREATE INDEX","CREATE PROCEDURE","CREATE ROLE","CREATE SEQUENCE","CREATE SERVER","CREATE SPATIAL INDEX","CREATE TRIGGER","CREATE UNIQUE INDEX","CREATE USER","DEALLOCATE PREPARE","DESCRIBE","DROP DATABASE","DROP EVENT","DROP FUNCTION","DROP INDEX","DROP PREPARE","DROP PROCEDURE","DROP ROLE","DROP SEQUENCE","DROP SERVER","DROP TRIGGER","DROP USER","DROP VIEW","EXECUTE","EXPLAIN","FLUSH","GET DIAGNOSTICS","GET DIAGNOSTICS CONDITION","GRANT","HANDLER","HELP","INSTALL PLUGIN","INSTALL SONAME","KILL","LOAD DATA INFILE","LOAD INDEX INTO CACHE","LOAD XML INFILE","LOCK TABLE","OPTIMIZE TABLE","PREPARE","PURGE BINARY LOGS","PURGE MASTER LOGS","RELEASE SAVEPOINT","RENAME TABLE","RENAME USER","REPAIR TABLE","REPAIR VIEW","RESET MASTER","RESET QUERY CACHE","RESET REPLICA","RESET SLAVE","RESIGNAL","REVOKE","ROLLBACK","SAVEPOINT","SET CHARACTER SET","SET DEFAULT ROLE","SET GLOBAL TRANSACTION","SET NAMES","SET PASSWORD","SET ROLE","SET STATEMENT","SET TRANSACTION","SHOW","SHOW ALL REPLICAS STATUS","SHOW ALL SLAVES STATUS","SHOW AUTHORS","SHOW BINARY LOGS","SHOW BINLOG EVENTS","SHOW BINLOG STATUS","SHOW CHARACTER SET","SHOW CLIENT_STATISTICS","SHOW COLLATION","SHOW COLUMNS","SHOW CONTRIBUTORS","SHOW CREATE DATABASE","SHOW CREATE EVENT","SHOW CREATE FUNCTION","SHOW CREATE PACKAGE","SHOW CREATE PACKAGE BODY","SHOW CREATE PROCEDURE","SHOW CREATE SEQUENCE","SHOW CREATE TABLE","SHOW CREATE TRIGGER","SHOW CREATE USER","SHOW CREATE VIEW","SHOW DATABASES","SHOW ENGINE","SHOW ENGINE INNODB STATUS","SHOW ENGINES","SHOW ERRORS","SHOW EVENTS","SHOW EXPLAIN","SHOW FUNCTION CODE","SHOW FUNCTION STATUS","SHOW GRANTS","SHOW INDEX","SHOW INDEXES","SHOW INDEX_STATISTICS","SHOW KEYS","SHOW LOCALES","SHOW MASTER LOGS","SHOW MASTER STATUS","SHOW OPEN TABLES","SHOW PACKAGE BODY CODE","SHOW PACKAGE BODY STATUS","SHOW PACKAGE STATUS","SHOW PLUGINS","SHOW PLUGINS SONAME","SHOW PRIVILEGES","SHOW PROCEDURE CODE","SHOW PROCEDURE STATUS","SHOW PROCESSLIST","SHOW PROFILE","SHOW PROFILES","SHOW QUERY_RESPONSE_TIME","SHOW RELAYLOG EVENTS","SHOW REPLICA","SHOW REPLICA HOSTS","SHOW REPLICA STATUS","SHOW SCHEMAS","SHOW SLAVE","SHOW SLAVE HOSTS","SHOW SLAVE STATUS","SHOW STATUS","SHOW STORAGE ENGINES","SHOW TABLE STATUS","SHOW TABLES","SHOW TRIGGERS","SHOW USER_STATISTICS","SHOW VARIABLES","SHOW WARNINGS","SHOW WSREP_MEMBERSHIP","SHOW WSREP_STATUS","SHUTDOWN","SIGNAL","START ALL REPLICAS","START ALL SLAVES","START REPLICA","START SLAVE","START TRANSACTION","STOP ALL REPLICAS","STOP ALL SLAVES","STOP REPLICA","STOP SLAVE","UNINSTALL PLUGIN","UNINSTALL SONAME","UNLOCK TABLE","USE","XA BEGIN","XA COMMIT","XA END","XA PREPARE","XA RECOVER","XA ROLLBACK","XA START"]),Iwe=x(["UNION [ALL | DISTINCT]","EXCEPT [ALL | DISTINCT]","INTERSECT [ALL | DISTINCT]","MINUS [ALL | DISTINCT]"]),_we=x(["JOIN","{LEFT | RIGHT} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL JOIN","NATURAL {LEFT | RIGHT} [OUTER] JOIN","STRAIGHT_JOIN"]),Nwe=x(["ON {UPDATE | DELETE} [SET NULL | SET DEFAULT]","CHARACTER SET","{ROWS | RANGE} BETWEEN","IDENTIFIED BY"]),Owe=x([]),IR={name:"mariadb",tokenizerOptions:{reservedSelect:mwe,reservedClauses:[...gwe,...W6,...fy],reservedSetOperations:Iwe,reservedJoins:_we,reservedKeywordPhrases:Nwe,reservedDataTypePhrases:Owe,supportsXor:!0,reservedKeywords:B6,reservedDataTypes:F6,reservedFunctionNames:G6,stringTypes:['""-qq-bs',"''-qq-bs",{quote:"''-raw",prefixes:["B","X"],requirePrefix:!0}],identTypes:["``"],identChars:{first:"$",rest:"$",allowFirstCharNumber:!0},variableTypes:[{regex:"@@?[A-Za-z0-9_.$]+"},{quote:'""-qq-bs',prefixes:["@"],requirePrefix:!0},{quote:"''-qq-bs",prefixes:["@"],requirePrefix:!0},{quote:"``",prefixes:["@"],requirePrefix:!0}],paramTypes:{positional:!0},lineCommentTypes:["--","#"],operators:["%",":=","&","|","^","~","<<",">>","<=>","&&","||","!","*.*"],postProcess:po},formatOptions:{onelineClauses:[...W6,...fy],tabularOnelineClauses:fy}}});var k6,Y6,V6=W(()=>{k6=["ACCESSIBLE","ADD","ALL","ALTER","ANALYZE","AND","AS","ASC","ASENSITIVE","BEFORE","BETWEEN","BOTH","BY","CALL","CASCADE","CASE","CHANGE","CHECK","COLLATE","COLUMN","CONDITION","CONSTRAINT","CONTINUE","CONVERT","CREATE","CROSS","CUBE","CUME_DIST","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURSOR","DATABASE","DATABASES","DAY_HOUR","DAY_MICROSECOND","DAY_MINUTE","DAY_SECOND","DECLARE","DEFAULT","DELAYED","DELETE","DENSE_RANK","DESC","DESCRIBE","DETERMINISTIC","DISTINCT","DISTINCTROW","DIV","DROP","DUAL","EACH","ELSE","ELSEIF","EMPTY","ENCLOSED","ESCAPED","EXCEPT","EXISTS","EXIT","EXPLAIN","FALSE","FETCH","FIRST_VALUE","FOR","FORCE","FOREIGN","FROM","FULLTEXT","FUNCTION","GENERATED","GET","GRANT","GROUP","GROUPING","GROUPS","HAVING","HIGH_PRIORITY","HOUR_MICROSECOND","HOUR_MINUTE","HOUR_SECOND","IF","IGNORE","IN","INDEX","INFILE","INNER","INOUT","INSENSITIVE","INSERT","IN","INTERSECT","INTERVAL","INTO","IO_AFTER_GTIDS","IO_BEFORE_GTIDS","IS","ITERATE","JOIN","JSON_TABLE","KEY","KEYS","KILL","LAG","LAST_VALUE","LATERAL","LEAD","LEADING","LEAVE","LEFT","LIKE","LIMIT","LINEAR","LINES","LOAD","LOCALTIME","LOCALTIMESTAMP","LOCK","LONG","LOOP","LOW_PRIORITY","MASTER_BIND","MASTER_SSL_VERIFY_SERVER_CERT","MATCH","MAXVALUE","MINUTE_MICROSECOND","MINUTE_SECOND","MOD","MODIFIES","NATURAL","NOT","NO_WRITE_TO_BINLOG","NTH_VALUE","NTILE","NULL","OF","ON","OPTIMIZE","OPTIMIZER_COSTS","OPTION","OPTIONALLY","OR","ORDER","OUT","OUTER","OUTFILE","OVER","PARTITION","PERCENT_RANK","PRIMARY","PROCEDURE","PURGE","RANGE","RANK","READ","READS","READ_WRITE","RECURSIVE","REFERENCES","REGEXP","RELEASE","RENAME","REPEAT","REPLACE","REQUIRE","RESIGNAL","RESTRICT","RETURN","REVOKE","RIGHT","RLIKE","ROW","ROWS","ROW_NUMBER","SCHEMA","SCHEMAS","SECOND_MICROSECOND","SELECT","SENSITIVE","SEPARATOR","SET","SHOW","SIGNAL","SPATIAL","SPECIFIC","SQL","SQLEXCEPTION","SQLSTATE","SQLWARNING","SQL_BIG_RESULT","SQL_CALC_FOUND_ROWS","SQL_SMALL_RESULT","SSL","STARTING","STORED","STRAIGHT_JOIN","SYSTEM","TABLE","TERMINATED","THEN","TO","TRAILING","TRIGGER","TRUE","UNDO","UNION","UNIQUE","UNLOCK","UNSIGNED","UPDATE","USAGE","USE","USING","UTC_DATE","UTC_TIME","UTC_TIMESTAMP","VALUES","VIRTUAL","WHEN","WHERE","WHILE","WINDOW","WITH","WRITE","XOR","YEAR_MONTH","ZEROFILL"],Y6=["BIGINT","BINARY","BIT","BLOB","BOOL","BOOLEAN","CHAR","CHARACTER","DATE","DATETIME","DEC","DECIMAL","DOUBLE PRECISION","DOUBLE","ENUM","FIXED","FLOAT","FLOAT4","FLOAT8","INT","INT1","INT2","INT3","INT4","INT8","INTEGER","LONGBLOB","LONGTEXT","MEDIUMBLOB","MEDIUMINT","MEDIUMTEXT","MIDDLEINT","NATIONAL CHAR","NATIONAL VARCHAR","NUMERIC","PRECISION","REAL","SMALLINT","TEXT","TIME","TIMESTAMP","TINYBLOB","TINYINT","TINYTEXT","VARBINARY","VARCHAR","VARCHARACTER","VARYING","YEAR"]});var q6,X6=W(()=>{q6=["ABS","ACOS","ADDDATE","ADDTIME","AES_DECRYPT","AES_ENCRYPT","ANY_VALUE","ASCII","ASIN","ATAN","ATAN2","AVG","BENCHMARK","BIN","BIN_TO_UUID","BINARY","BIT_AND","BIT_COUNT","BIT_LENGTH","BIT_OR","BIT_XOR","CAN_ACCESS_COLUMN","CAN_ACCESS_DATABASE","CAN_ACCESS_TABLE","CAN_ACCESS_USER","CAN_ACCESS_VIEW","CAST","CEIL","CEILING","CHAR","CHAR_LENGTH","CHARACTER_LENGTH","CHARSET","COALESCE","COERCIBILITY","COLLATION","COMPRESS","CONCAT","CONCAT_WS","CONNECTION_ID","CONV","CONVERT","CONVERT_TZ","COS","COT","COUNT","CRC32","CUME_DIST","CURDATE","CURRENT_DATE","CURRENT_ROLE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURTIME","DATABASE","DATE","DATE_ADD","DATE_FORMAT","DATE_SUB","DATEDIFF","DAY","DAYNAME","DAYOFMONTH","DAYOFWEEK","DAYOFYEAR","DEFAULT","DEGREES","DENSE_RANK","DIV","ELT","EXP","EXPORT_SET","EXTRACT","EXTRACTVALUE","FIELD","FIND_IN_SET","FIRST_VALUE","FLOOR","FORMAT","FORMAT_BYTES","FORMAT_PICO_TIME","FOUND_ROWS","FROM_BASE64","FROM_DAYS","FROM_UNIXTIME","GEOMCOLLECTION","GEOMETRYCOLLECTION","GET_DD_COLUMN_PRIVILEGES","GET_DD_CREATE_OPTIONS","GET_DD_INDEX_SUB_PART_LENGTH","GET_FORMAT","GET_LOCK","GREATEST","GROUP_CONCAT","GROUPING","GTID_SUBSET","GTID_SUBTRACT","HEX","HOUR","ICU_VERSION","IF","IFNULL","INET_ATON","INET_NTOA","INET6_ATON","INET6_NTOA","INSERT","INSTR","INTERNAL_AUTO_INCREMENT","INTERNAL_AVG_ROW_LENGTH","INTERNAL_CHECK_TIME","INTERNAL_CHECKSUM","INTERNAL_DATA_FREE","INTERNAL_DATA_LENGTH","INTERNAL_DD_CHAR_LENGTH","INTERNAL_GET_COMMENT_OR_ERROR","INTERNAL_GET_ENABLED_ROLE_JSON","INTERNAL_GET_HOSTNAME","INTERNAL_GET_USERNAME","INTERNAL_GET_VIEW_WARNING_OR_ERROR","INTERNAL_INDEX_COLUMN_CARDINALITY","INTERNAL_INDEX_LENGTH","INTERNAL_IS_ENABLED_ROLE","INTERNAL_IS_MANDATORY_ROLE","INTERNAL_KEYS_DISABLED","INTERNAL_MAX_DATA_LENGTH","INTERNAL_TABLE_ROWS","INTERNAL_UPDATE_TIME","INTERVAL","IS","IS_FREE_LOCK","IS_IPV4","IS_IPV4_COMPAT","IS_IPV4_MAPPED","IS_IPV6","IS NOT","IS NOT NULL","IS NULL","IS_USED_LOCK","IS_UUID","ISNULL","JSON_ARRAY","JSON_ARRAY_APPEND","JSON_ARRAY_INSERT","JSON_ARRAYAGG","JSON_CONTAINS","JSON_CONTAINS_PATH","JSON_DEPTH","JSON_EXTRACT","JSON_INSERT","JSON_KEYS","JSON_LENGTH","JSON_MERGE","JSON_MERGE_PATCH","JSON_MERGE_PRESERVE","JSON_OBJECT","JSON_OBJECTAGG","JSON_OVERLAPS","JSON_PRETTY","JSON_QUOTE","JSON_REMOVE","JSON_REPLACE","JSON_SCHEMA_VALID","JSON_SCHEMA_VALIDATION_REPORT","JSON_SEARCH","JSON_SET","JSON_STORAGE_FREE","JSON_STORAGE_SIZE","JSON_TABLE","JSON_TYPE","JSON_UNQUOTE","JSON_VALID","JSON_VALUE","LAG","LAST_DAY","LAST_INSERT_ID","LAST_VALUE","LCASE","LEAD","LEAST","LEFT","LENGTH","LIKE","LINESTRING","LN","LOAD_FILE","LOCALTIME","LOCALTIMESTAMP","LOCATE","LOG","LOG10","LOG2","LOWER","LPAD","LTRIM","MAKE_SET","MAKEDATE","MAKETIME","MASTER_POS_WAIT","MATCH","MAX","MBRCONTAINS","MBRCOVEREDBY","MBRCOVERS","MBRDISJOINT","MBREQUALS","MBRINTERSECTS","MBROVERLAPS","MBRTOUCHES","MBRWITHIN","MD5","MEMBER OF","MICROSECOND","MID","MIN","MINUTE","MOD","MONTH","MONTHNAME","MULTILINESTRING","MULTIPOINT","MULTIPOLYGON","NAME_CONST","NOT","NOT IN","NOT LIKE","NOT REGEXP","NOW","NTH_VALUE","NTILE","NULLIF","OCT","OCTET_LENGTH","ORD","PERCENT_RANK","PERIOD_ADD","PERIOD_DIFF","PI","POINT","POLYGON","POSITION","POW","POWER","PS_CURRENT_THREAD_ID","PS_THREAD_ID","QUARTER","QUOTE","RADIANS","RAND","RANDOM_BYTES","RANK","REGEXP","REGEXP_INSTR","REGEXP_LIKE","REGEXP_REPLACE","REGEXP_SUBSTR","RELEASE_ALL_LOCKS","RELEASE_LOCK","REPEAT","REPLACE","REVERSE","RIGHT","RLIKE","ROLES_GRAPHML","ROUND","ROW_COUNT","ROW_NUMBER","RPAD","RTRIM","SCHEMA","SEC_TO_TIME","SECOND","SESSION_USER","SHA1","SHA2","SIGN","SIN","SLEEP","SOUNDEX","SOUNDS LIKE","SOURCE_POS_WAIT","SPACE","SQRT","ST_AREA","ST_ASBINARY","ST_ASGEOJSON","ST_ASTEXT","ST_BUFFER","ST_BUFFER_STRATEGY","ST_CENTROID","ST_COLLECT","ST_CONTAINS","ST_CONVEXHULL","ST_CROSSES","ST_DIFFERENCE","ST_DIMENSION","ST_DISJOINT","ST_DISTANCE","ST_DISTANCE_SPHERE","ST_ENDPOINT","ST_ENVELOPE","ST_EQUALS","ST_EXTERIORRING","ST_FRECHETDISTANCE","ST_GEOHASH","ST_GEOMCOLLFROMTEXT","ST_GEOMCOLLFROMWKB","ST_GEOMETRYN","ST_GEOMETRYTYPE","ST_GEOMFROMGEOJSON","ST_GEOMFROMTEXT","ST_GEOMFROMWKB","ST_HAUSDORFFDISTANCE","ST_INTERIORRINGN","ST_INTERSECTION","ST_INTERSECTS","ST_ISCLOSED","ST_ISEMPTY","ST_ISSIMPLE","ST_ISVALID","ST_LATFROMGEOHASH","ST_LATITUDE","ST_LENGTH","ST_LINEFROMTEXT","ST_LINEFROMWKB","ST_LINEINTERPOLATEPOINT","ST_LINEINTERPOLATEPOINTS","ST_LONGFROMGEOHASH","ST_LONGITUDE","ST_MAKEENVELOPE","ST_MLINEFROMTEXT","ST_MLINEFROMWKB","ST_MPOINTFROMTEXT","ST_MPOINTFROMWKB","ST_MPOLYFROMTEXT","ST_MPOLYFROMWKB","ST_NUMGEOMETRIES","ST_NUMINTERIORRING","ST_NUMPOINTS","ST_OVERLAPS","ST_POINTATDISTANCE","ST_POINTFROMGEOHASH","ST_POINTFROMTEXT","ST_POINTFROMWKB","ST_POINTN","ST_POLYFROMTEXT","ST_POLYFROMWKB","ST_SIMPLIFY","ST_SRID","ST_STARTPOINT","ST_SWAPXY","ST_SYMDIFFERENCE","ST_TOUCHES","ST_TRANSFORM","ST_UNION","ST_VALIDATE","ST_WITHIN","ST_X","ST_Y","STATEMENT_DIGEST","STATEMENT_DIGEST_TEXT","STD","STDDEV","STDDEV_POP","STDDEV_SAMP","STR_TO_DATE","STRCMP","SUBDATE","SUBSTR","SUBSTRING","SUBSTRING_INDEX","SUBTIME","SUM","SYSDATE","SYSTEM_USER","TAN","TIME","TIME_FORMAT","TIME_TO_SEC","TIMEDIFF","TIMESTAMP","TIMESTAMPADD","TIMESTAMPDIFF","TO_BASE64","TO_DAYS","TO_SECONDS","TRIM","TRUNCATE","UCASE","UNCOMPRESS","UNCOMPRESSED_LENGTH","UNHEX","UNIX_TIMESTAMP","UPDATEXML","UPPER","UTC_DATE","UTC_TIME","UTC_TIMESTAMP","UUID","UUID_SHORT","UUID_TO_BIN","VALIDATE_PASSWORD_STRENGTH","VALUES","VAR_POP","VAR_SAMP","VARIANCE","VERSION","WAIT_FOR_EXECUTED_GTID_SET","WAIT_UNTIL_SQL_THREAD_AFTER_GTIDS","WEEK","WEEKDAY","WEEKOFYEAR","WEIGHT_STRING","YEAR","YEARWEEK"]});var Cwe,bwe,z6,hy,ywe,wwe,Lwe,Dwe,_R,py=W(()=>{Mt();mf();V6();X6();Cwe=x(["SELECT [ALL | DISTINCT | DISTINCTROW]"]),bwe=x(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY","HAVING","WINDOW","PARTITION BY","ORDER BY","LIMIT","OFFSET","INSERT [LOW_PRIORITY | DELAYED | HIGH_PRIORITY] [IGNORE] [INTO]","REPLACE [LOW_PRIORITY | DELAYED] [INTO]","VALUES","ON DUPLICATE KEY UPDATE","SET"]),z6=x(["CREATE [TEMPORARY] TABLE [IF NOT EXISTS]"]),hy=x(["CREATE [OR REPLACE] [SQL SECURITY DEFINER | SQL SECURITY INVOKER] VIEW [IF NOT EXISTS]","UPDATE [LOW_PRIORITY] [IGNORE]","DELETE [LOW_PRIORITY] [QUICK] [IGNORE] FROM","DROP [TEMPORARY] TABLE [IF EXISTS]","ALTER TABLE","ADD [COLUMN]","{CHANGE | MODIFY} [COLUMN]","DROP [COLUMN]","RENAME [TO | AS]","RENAME COLUMN","ALTER [COLUMN]","{SET | DROP} DEFAULT","TRUNCATE [TABLE]","ALTER DATABASE","ALTER EVENT","ALTER FUNCTION","ALTER INSTANCE","ALTER LOGFILE GROUP","ALTER PROCEDURE","ALTER RESOURCE GROUP","ALTER SERVER","ALTER TABLESPACE","ALTER USER","ALTER VIEW","ANALYZE TABLE","BINLOG","CACHE INDEX","CALL","CHANGE MASTER TO","CHANGE REPLICATION FILTER","CHANGE REPLICATION SOURCE TO","CHECK TABLE","CHECKSUM TABLE","CLONE","COMMIT","CREATE DATABASE","CREATE EVENT","CREATE FUNCTION","CREATE FUNCTION","CREATE INDEX","CREATE LOGFILE GROUP","CREATE PROCEDURE","CREATE RESOURCE GROUP","CREATE ROLE","CREATE SERVER","CREATE SPATIAL REFERENCE SYSTEM","CREATE TABLESPACE","CREATE TRIGGER","CREATE USER","DEALLOCATE PREPARE","DESCRIBE","DROP DATABASE","DROP EVENT","DROP FUNCTION","DROP FUNCTION","DROP INDEX","DROP LOGFILE GROUP","DROP PROCEDURE","DROP RESOURCE GROUP","DROP ROLE","DROP SERVER","DROP SPATIAL REFERENCE SYSTEM","DROP TABLESPACE","DROP TRIGGER","DROP USER","DROP VIEW","EXECUTE","EXPLAIN","FLUSH","GRANT","HANDLER","HELP","IMPORT TABLE","INSTALL COMPONENT","INSTALL PLUGIN","KILL","LOAD DATA","LOAD INDEX INTO CACHE","LOAD XML","LOCK INSTANCE FOR BACKUP","LOCK TABLES","MASTER_POS_WAIT","OPTIMIZE TABLE","PREPARE","PURGE BINARY LOGS","RELEASE SAVEPOINT","RENAME TABLE","RENAME USER","REPAIR TABLE","RESET","RESET MASTER","RESET PERSIST","RESET REPLICA","RESET SLAVE","RESTART","REVOKE","ROLLBACK","ROLLBACK TO SAVEPOINT","SAVEPOINT","SET CHARACTER SET","SET DEFAULT ROLE","SET NAMES","SET PASSWORD","SET RESOURCE GROUP","SET ROLE","SET TRANSACTION","SHOW","SHOW BINARY LOGS","SHOW BINLOG EVENTS","SHOW CHARACTER SET","SHOW COLLATION","SHOW COLUMNS","SHOW CREATE DATABASE","SHOW CREATE EVENT","SHOW CREATE FUNCTION","SHOW CREATE PROCEDURE","SHOW CREATE TABLE","SHOW CREATE TRIGGER","SHOW CREATE USER","SHOW CREATE VIEW","SHOW DATABASES","SHOW ENGINE","SHOW ENGINES","SHOW ERRORS","SHOW EVENTS","SHOW FUNCTION CODE","SHOW FUNCTION STATUS","SHOW GRANTS","SHOW INDEX","SHOW MASTER STATUS","SHOW OPEN TABLES","SHOW PLUGINS","SHOW PRIVILEGES","SHOW PROCEDURE CODE","SHOW PROCEDURE STATUS","SHOW PROCESSLIST","SHOW PROFILE","SHOW PROFILES","SHOW RELAYLOG EVENTS","SHOW REPLICA STATUS","SHOW REPLICAS","SHOW SLAVE","SHOW SLAVE HOSTS","SHOW STATUS","SHOW TABLE STATUS","SHOW TABLES","SHOW TRIGGERS","SHOW VARIABLES","SHOW WARNINGS","SHUTDOWN","SOURCE_POS_WAIT","START GROUP_REPLICATION","START REPLICA","START SLAVE","START TRANSACTION","STOP GROUP_REPLICATION","STOP REPLICA","STOP SLAVE","TABLE","UNINSTALL COMPONENT","UNINSTALL PLUGIN","UNLOCK INSTANCE","UNLOCK TABLES","USE","XA","ITERATE","LEAVE","LOOP","REPEAT","RETURN","WHILE"]),ywe=x(["UNION [ALL | DISTINCT]"]),wwe=x(["JOIN","{LEFT | RIGHT} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL [INNER] JOIN","NATURAL {LEFT | RIGHT} [OUTER] JOIN","STRAIGHT_JOIN"]),Lwe=x(["ON {UPDATE | DELETE} [SET NULL]","CHARACTER SET","{ROWS | RANGE} BETWEEN","IDENTIFIED BY"]),Dwe=x([]),_R={name:"mysql",tokenizerOptions:{reservedSelect:Cwe,reservedClauses:[...bwe,...z6,...hy],reservedSetOperations:ywe,reservedJoins:wwe,reservedKeywordPhrases:Lwe,reservedDataTypePhrases:Dwe,supportsXor:!0,reservedKeywords:k6,reservedDataTypes:Y6,reservedFunctionNames:q6,stringTypes:['""-qq-bs',{quote:"''-qq-bs",prefixes:["N"]},{quote:"''-raw",prefixes:["B","X"],requirePrefix:!0}],identTypes:["``"],identChars:{first:"$",rest:"$",allowFirstCharNumber:!0},variableTypes:[{regex:"@@?[A-Za-z0-9_.$]+"},{quote:'""-qq-bs',prefixes:["@"],requirePrefix:!0},{quote:"''-qq-bs",prefixes:["@"],requirePrefix:!0},{quote:"``",prefixes:["@"],requirePrefix:!0}],paramTypes:{positional:!0},lineCommentTypes:["--","#"],operators:["%",":=","&","|","^","~","<<",">>","<=>","->","->>","&&","||","!","*.*"],postProcess:po},formatOptions:{onelineClauses:[...z6,...hy],tabularOnelineClauses:hy}}});var j6,K6,J6=W(()=>{j6=["ADD","ALL","ALTER","ANALYZE","AND","ARRAY","AS","ASC","BETWEEN","BOTH","BY","CALL","CASCADE","CASE","CHANGE","CHECK","COLLATE","COLUMN","CONSTRAINT","CONTINUE","CONVERT","CREATE","CROSS","CURRENT_DATE","CURRENT_ROLE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURSOR","DATABASE","DATABASES","DAY_HOUR","DAY_MICROSECOND","DAY_MINUTE","DAY_SECOND","DEFAULT","DELAYED","DELETE","DESC","DESCRIBE","DISTINCT","DISTINCTROW","DIV","DOUBLE","DROP","DUAL","ELSE","ELSEIF","ENCLOSED","ESCAPED","EXCEPT","EXISTS","EXIT","EXPLAIN","FALSE","FETCH","FOR","FORCE","FOREIGN","FROM","FULLTEXT","GENERATED","GRANT","GROUP","GROUPS","HAVING","HIGH_PRIORITY","HOUR_MICROSECOND","HOUR_MINUTE","HOUR_SECOND","IF","IGNORE","ILIKE","IN","INDEX","INFILE","INNER","INOUT","INSERT","INTERSECT","INTERVAL","INTO","IS","ITERATE","JOIN","KEY","KEYS","KILL","LEADING","LEAVE","LEFT","LIKE","LIMIT","LINEAR","LINES","LOAD","LOCALTIME","LOCALTIMESTAMP","LOCK","LONG","LOW_PRIORITY","MATCH","MAXVALUE","MINUTE_MICROSECOND","MINUTE_SECOND","MOD","NATURAL","NOT","NO_WRITE_TO_BINLOG","NULL","OF","ON","OPTIMIZE","OPTION","OPTIONALLY","OR","ORDER","OUT","OUTER","OUTFILE","OVER","PARTITION","PRIMARY","PROCEDURE","RANGE","READ","RECURSIVE","REFERENCES","REGEXP","RELEASE","RENAME","REPEAT","REPLACE","REQUIRE","RESTRICT","REVOKE","RIGHT","RLIKE","ROW","ROWS","SECOND_MICROSECOND","SELECT","SET","SHOW","SPATIAL","SQL","SQLEXCEPTION","SQLSTATE","SQLWARNING","SQL_BIG_RESULT","SQL_CALC_FOUND_ROWS","SQL_SMALL_RESULT","SSL","STARTING","STATS_EXTENDED","STORED","STRAIGHT_JOIN","TABLE","TABLESAMPLE","TERMINATED","THEN","TO","TRAILING","TRIGGER","TRUE","TiDB_CURRENT_TSO","UNION","UNIQUE","UNLOCK","UNSIGNED","UNTIL","UPDATE","USAGE","USE","USING","UTC_DATE","UTC_TIME","UTC_TIMESTAMP","VALUES","VIRTUAL","WHEN","WHERE","WHILE","WINDOW","WITH","WRITE","XOR","YEAR_MONTH","ZEROFILL"],K6=["BIGINT","BINARY","BIT","BLOB","BOOL","BOOLEAN","CHAR","CHARACTER","DATE","DATETIME","DEC","DECIMAL","DOUBLE PRECISION","DOUBLE","ENUM","FIXED","INT","INT1","INT2","INT3","INT4","INT8","INTEGER","LONGBLOB","LONGTEXT","MEDIUMBLOB","MEDIUMINT","MIDDLEINT","NATIONAL CHAR","NATIONAL VARCHAR","NUMERIC","PRECISION","SMALLINT","TEXT","TIME","TIMESTAMP","TINYBLOB","TINYINT","TINYTEXT","VARBINARY","VARCHAR","VARCHARACTER","VARYING","YEAR"]});var Q6,Z6=W(()=>{Q6=["ABS","ACOS","ADDDATE","ADDTIME","AES_DECRYPT","AES_ENCRYPT","ANY_VALUE","ASCII","ASIN","ATAN","ATAN2","AVG","BENCHMARK","BIN","BIN_TO_UUID","BIT_AND","BIT_COUNT","BIT_LENGTH","BIT_OR","BIT_XOR","BITAND","BITNEG","BITOR","BITXOR","CASE","CAST","CEIL","CEILING","CHAR_FUNC","CHAR_LENGTH","CHARACTER_LENGTH","CHARSET","COALESCE","COERCIBILITY","COLLATION","COMPRESS","CONCAT","CONCAT_WS","CONNECTION_ID","CONV","CONVERT","CONVERT_TZ","COS","COT","COUNT","CRC32","CUME_DIST","CURDATE","CURRENT_DATE","CURRENT_RESOURCE_GROUP","CURRENT_ROLE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURTIME","DATABASE","DATE","DATE_ADD","DATE_FORMAT","DATE_SUB","DATEDIFF","DAY","DAYNAME","DAYOFMONTH","DAYOFWEEK","DAYOFYEAR","DECODE","DEFAULT_FUNC","DEGREES","DENSE_RANK","DES_DECRYPT","DES_ENCRYPT","DIV","ELT","ENCODE","ENCRYPT","EQ","EXP","EXPORT_SET","EXTRACT","FIELD","FIND_IN_SET","FIRST_VALUE","FLOOR","FORMAT","FORMAT_BYTES","FORMAT_NANO_TIME","FOUND_ROWS","FROM_BASE64","FROM_DAYS","FROM_UNIXTIME","GE","GET_FORMAT","GET_LOCK","GETPARAM","GREATEST","GROUP_CONCAT","GROUPING","GT","HEX","HOUR","IF","IFNULL","ILIKE","INET6_ATON","INET6_NTOA","INET_ATON","INET_NTOA","INSERT_FUNC","INSTR","INTDIV","INTERVAL","IS_FREE_LOCK","IS_IPV4","IS_IPV4_COMPAT","IS_IPV4_MAPPED","IS_IPV6","IS_USED_LOCK","IS_UUID","ISFALSE","ISNULL","ISTRUE","JSON_ARRAY","JSON_ARRAYAGG","JSON_ARRAY_APPEND","JSON_ARRAY_INSERT","JSON_CONTAINS","JSON_CONTAINS_PATH","JSON_DEPTH","JSON_EXTRACT","JSON_INSERT","JSON_KEYS","JSON_LENGTH","JSON_MEMBEROF","JSON_MERGE","JSON_MERGE_PATCH","JSON_MERGE_PRESERVE","JSON_OBJECT","JSON_OBJECTAGG","JSON_OVERLAPS","JSON_PRETTY","JSON_QUOTE","JSON_REMOVE","JSON_REPLACE","JSON_SEARCH","JSON_SET","JSON_STORAGE_FREE","JSON_STORAGE_SIZE","JSON_TYPE","JSON_UNQUOTE","JSON_VALID","LAG","LAST_DAY","LAST_INSERT_ID","LAST_VALUE","LASTVAL","LCASE","LE","LEAD","LEAST","LEFT","LEFTSHIFT","LENGTH","LIKE","LN","LOAD_FILE","LOCALTIME","LOCALTIMESTAMP","LOCATE","LOG","LOG10","LOG2","LOWER","LPAD","LT","LTRIM","MAKE_SET","MAKEDATE","MAKETIME","MASTER_POS_WAIT","MAX","MD5","MICROSECOND","MID","MIN","MINUS","MINUTE","MOD","MONTH","MONTHNAME","MUL","NAME_CONST","NE","NEXTVAL","NOT","NOW","NTH_VALUE","NTILE","NULLEQ","OCT","OCTET_LENGTH","OLD_PASSWORD","ORD","PASSWORD_FUNC","PERCENT_RANK","PERIOD_ADD","PERIOD_DIFF","PI","PLUS","POSITION","POW","POWER","QUARTER","QUOTE","RADIANS","RAND","RANDOM_BYTES","RANK","REGEXP","REGEXP_INSTR","REGEXP_LIKE","REGEXP_REPLACE","REGEXP_SUBSTR","RELEASE_ALL_LOCKS","RELEASE_LOCK","REPEAT","REPLACE","REVERSE","RIGHT","RIGHTSHIFT","ROUND","ROW_COUNT","ROW_NUMBER","RPAD","RTRIM","SCHEMA","SEC_TO_TIME","SECOND","SESSION_USER","SETVAL","SETVAR","SHA","SHA1","SHA2","SIGN","SIN","SLEEP","SM3","SPACE","SQRT","STD","STDDEV","STDDEV_POP","STDDEV_SAMP","STR_TO_DATE","STRCMP","SUBDATE","SUBSTR","SUBSTRING","SUBSTRING_INDEX","SUBTIME","SUM","SYSDATE","SYSTEM_USER","TAN","TIDB_BOUNDED_STALENESS","TIDB_CURRENT_TSO","TIDB_DECODE_BINARY_PLAN","TIDB_DECODE_KEY","TIDB_DECODE_PLAN","TIDB_DECODE_SQL_DIGESTS","TIDB_ENCODE_SQL_DIGEST","TIDB_IS_DDL_OWNER","TIDB_PARSE_TSO","TIDB_PARSE_TSO_LOGICAL","TIDB_ROW_CHECKSUM","TIDB_SHARD","TIDB_VERSION","TIME","TIME_FORMAT","TIME_TO_SEC","TIMEDIFF","TIMESTAMP","TIMESTAMPADD","TIMESTAMPDIFF","TO_BASE64","TO_DAYS","TO_SECONDS","TRANSLATE","TRIM","TRUNCATE","UCASE","UNARYMINUS","UNCOMPRESS","UNCOMPRESSED_LENGTH","UNHEX","UNIX_TIMESTAMP","UPPER","UTC_DATE","UTC_TIME","UTC_TIMESTAMP","UUID","UUID_SHORT","UUID_TO_BIN","VALIDATE_PASSWORD_STRENGTH","VAR_POP","VAR_SAMP","VARIANCE","VERSION","VITESS_HASH","WEEK","WEEKDAY","WEEKOFYEAR","WEIGHT_STRING","YEAR","YEARWEEK"]});var Pwe,xwe,e3,Ty,vwe,Mwe,Uwe,Bwe,NR,Sy=W(()=>{Mt();mf();J6();Z6();Pwe=x(["SELECT [ALL | DISTINCT | DISTINCTROW]"]),xwe=x(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY","HAVING","WINDOW","PARTITION BY","ORDER BY","LIMIT","OFFSET","INSERT [LOW_PRIORITY | DELAYED | HIGH_PRIORITY] [IGNORE] [INTO]","REPLACE [LOW_PRIORITY | DELAYED] [INTO]","VALUES","ON DUPLICATE KEY UPDATE","SET"]),e3=x(["CREATE [TEMPORARY] TABLE [IF NOT EXISTS]"]),Ty=x(["CREATE [OR REPLACE] [SQL SECURITY DEFINER | SQL SECURITY INVOKER] VIEW [IF NOT EXISTS]","UPDATE [LOW_PRIORITY] [IGNORE]","DELETE [LOW_PRIORITY] [QUICK] [IGNORE] FROM","DROP [TEMPORARY] TABLE [IF EXISTS]","ALTER TABLE","ADD [COLUMN]","{CHANGE | MODIFY} [COLUMN]","DROP [COLUMN]","RENAME [TO | AS]","RENAME COLUMN","ALTER [COLUMN]","{SET | DROP} DEFAULT","TRUNCATE [TABLE]","ALTER DATABASE","ALTER INSTANCE","ALTER RESOURCE GROUP","ALTER SEQUENCE","ALTER USER","ALTER VIEW","ANALYZE TABLE","CHECK TABLE","CHECKSUM TABLE","COMMIT","CREATE DATABASE","CREATE INDEX","CREATE RESOURCE GROUP","CREATE ROLE","CREATE SEQUENCE","CREATE USER","DEALLOCATE PREPARE","DESCRIBE","DROP DATABASE","DROP INDEX","DROP RESOURCE GROUP","DROP ROLE","DROP TABLESPACE","DROP USER","DROP VIEW","EXPLAIN","FLUSH","GRANT","IMPORT TABLE","INSTALL COMPONENT","INSTALL PLUGIN","KILL","LOAD DATA","LOCK INSTANCE FOR BACKUP","LOCK TABLES","OPTIMIZE TABLE","PREPARE","RELEASE SAVEPOINT","RENAME TABLE","RENAME USER","REPAIR TABLE","RESET","REVOKE","ROLLBACK","ROLLBACK TO SAVEPOINT","SAVEPOINT","SET CHARACTER SET","SET DEFAULT ROLE","SET NAMES","SET PASSWORD","SET RESOURCE GROUP","SET ROLE","SET TRANSACTION","SHOW","SHOW BINARY LOGS","SHOW BINLOG EVENTS","SHOW CHARACTER SET","SHOW COLLATION","SHOW COLUMNS","SHOW CREATE DATABASE","SHOW CREATE TABLE","SHOW CREATE USER","SHOW CREATE VIEW","SHOW DATABASES","SHOW ENGINE","SHOW ENGINES","SHOW ERRORS","SHOW EVENTS","SHOW GRANTS","SHOW INDEX","SHOW MASTER STATUS","SHOW OPEN TABLES","SHOW PLUGINS","SHOW PRIVILEGES","SHOW PROCESSLIST","SHOW PROFILE","SHOW PROFILES","SHOW STATUS","SHOW TABLE STATUS","SHOW TABLES","SHOW TRIGGERS","SHOW VARIABLES","SHOW WARNINGS","TABLE","UNINSTALL COMPONENT","UNINSTALL PLUGIN","UNLOCK INSTANCE","UNLOCK TABLES","USE"]),vwe=x(["UNION [ALL | DISTINCT]"]),Mwe=x(["JOIN","{LEFT | RIGHT} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL [INNER] JOIN","NATURAL {LEFT | RIGHT} [OUTER] JOIN","STRAIGHT_JOIN"]),Uwe=x(["ON {UPDATE | DELETE} [SET NULL]","CHARACTER SET","{ROWS | RANGE} BETWEEN","IDENTIFIED BY"]),Bwe=x([]),NR={name:"tidb",tokenizerOptions:{reservedSelect:Pwe,reservedClauses:[...xwe,...e3,...Ty],reservedSetOperations:vwe,reservedJoins:Mwe,reservedKeywordPhrases:Uwe,reservedDataTypePhrases:Bwe,supportsXor:!0,reservedKeywords:j6,reservedDataTypes:K6,reservedFunctionNames:Q6,stringTypes:['""-qq-bs',{quote:"''-qq-bs",prefixes:["N"]},{quote:"''-raw",prefixes:["B","X"],requirePrefix:!0}],identTypes:["``"],identChars:{first:"$",rest:"$",allowFirstCharNumber:!0},variableTypes:[{regex:"@@?[A-Za-z0-9_.$]+"},{quote:'""-qq-bs',prefixes:["@"],requirePrefix:!0},{quote:"''-qq-bs",prefixes:["@"],requirePrefix:!0},{quote:"``",prefixes:["@"],requirePrefix:!0}],paramTypes:{positional:!0},lineCommentTypes:["--","#"],operators:["%",":=","&","|","^","~","<<",">>","<=>","->","->>","&&","||","!","*.*"],postProcess:po},formatOptions:{onelineClauses:[...e3,...Ty],tabularOnelineClauses:Ty}}});var t3,n3=W(()=>{t3=["ABORT","ABS","ACOS","ADVISOR","ARRAY_AGG","ARRAY_AGG","ARRAY_APPEND","ARRAY_AVG","ARRAY_BINARY_SEARCH","ARRAY_CONCAT","ARRAY_CONTAINS","ARRAY_COUNT","ARRAY_DISTINCT","ARRAY_EXCEPT","ARRAY_FLATTEN","ARRAY_IFNULL","ARRAY_INSERT","ARRAY_INTERSECT","ARRAY_LENGTH","ARRAY_MAX","ARRAY_MIN","ARRAY_MOVE","ARRAY_POSITION","ARRAY_PREPEND","ARRAY_PUT","ARRAY_RANGE","ARRAY_REMOVE","ARRAY_REPEAT","ARRAY_REPLACE","ARRAY_REVERSE","ARRAY_SORT","ARRAY_STAR","ARRAY_SUM","ARRAY_SYMDIFF","ARRAY_SYMDIFF1","ARRAY_SYMDIFFN","ARRAY_UNION","ASIN","ATAN","ATAN2","AVG","BASE64","BASE64_DECODE","BASE64_ENCODE","BITAND ","BITCLEAR ","BITNOT ","BITOR ","BITSET ","BITSHIFT ","BITTEST ","BITXOR ","CEIL","CLOCK_LOCAL","CLOCK_MILLIS","CLOCK_STR","CLOCK_TZ","CLOCK_UTC","COALESCE","CONCAT","CONCAT2","CONTAINS","CONTAINS_TOKEN","CONTAINS_TOKEN_LIKE","CONTAINS_TOKEN_REGEXP","COS","COUNT","COUNT","COUNTN","CUME_DIST","CURL","DATE_ADD_MILLIS","DATE_ADD_STR","DATE_DIFF_MILLIS","DATE_DIFF_STR","DATE_FORMAT_STR","DATE_PART_MILLIS","DATE_PART_STR","DATE_RANGE_MILLIS","DATE_RANGE_STR","DATE_TRUNC_MILLIS","DATE_TRUNC_STR","DECODE","DECODE_JSON","DEGREES","DENSE_RANK","DURATION_TO_STR","ENCODED_SIZE","ENCODE_JSON","EXP","FIRST_VALUE","FLOOR","GREATEST","HAS_TOKEN","IFINF","IFMISSING","IFMISSINGORNULL","IFNAN","IFNANORINF","IFNULL","INITCAP","ISARRAY","ISATOM","ISBITSET","ISBOOLEAN","ISNUMBER","ISOBJECT","ISSTRING","LAG","LAST_VALUE","LEAD","LEAST","LENGTH","LN","LOG","LOWER","LTRIM","MAX","MEAN","MEDIAN","META","MILLIS","MILLIS_TO_LOCAL","MILLIS_TO_STR","MILLIS_TO_TZ","MILLIS_TO_UTC","MILLIS_TO_ZONE_NAME","MIN","MISSINGIF","NANIF","NEGINFIF","NOW_LOCAL","NOW_MILLIS","NOW_STR","NOW_TZ","NOW_UTC","NTH_VALUE","NTILE","NULLIF","NVL","NVL2","OBJECT_ADD","OBJECT_CONCAT","OBJECT_INNER_PAIRS","OBJECT_INNER_VALUES","OBJECT_LENGTH","OBJECT_NAMES","OBJECT_PAIRS","OBJECT_PUT","OBJECT_REMOVE","OBJECT_RENAME","OBJECT_REPLACE","OBJECT_UNWRAP","OBJECT_VALUES","PAIRS","PERCENT_RANK","PI","POLY_LENGTH","POSINFIF","POSITION","POWER","RADIANS","RANDOM","RANK","RATIO_TO_REPORT","REGEXP_CONTAINS","REGEXP_LIKE","REGEXP_MATCHES","REGEXP_POSITION","REGEXP_REPLACE","REGEXP_SPLIT","REGEX_CONTAINS","REGEX_LIKE","REGEX_MATCHES","REGEX_POSITION","REGEX_REPLACE","REGEX_SPLIT","REPEAT","REPLACE","REVERSE","ROUND","ROW_NUMBER","RTRIM","SEARCH","SEARCH_META","SEARCH_SCORE","SIGN","SIN","SPLIT","SQRT","STDDEV","STDDEV_POP","STDDEV_SAMP","STR_TO_DURATION","STR_TO_MILLIS","STR_TO_TZ","STR_TO_UTC","STR_TO_ZONE_NAME","SUBSTR","SUFFIXES","SUM","TAN","TITLE","TOARRAY","TOATOM","TOBOOLEAN","TOKENS","TOKENS","TONUMBER","TOOBJECT","TOSTRING","TRIM","TRUNC","UPPER","UUID","VARIANCE","VARIANCE_POP","VARIANCE_SAMP","VAR_POP","VAR_SAMP","WEEKDAY_MILLIS","WEEKDAY_STR","CAST"]});var r3,i3,s3=W(()=>{r3=["ADVISE","ALL","ALTER","ANALYZE","AND","ANY","ARRAY","AS","ASC","AT","BEGIN","BETWEEN","BINARY","BOOLEAN","BREAK","BUCKET","BUILD","BY","CALL","CASE","CAST","CLUSTER","COLLATE","COLLECTION","COMMIT","COMMITTED","CONNECT","CONTINUE","CORRELATED","COVER","CREATE","CURRENT","DATABASE","DATASET","DATASTORE","DECLARE","DECREMENT","DELETE","DERIVED","DESC","DESCRIBE","DISTINCT","DO","DROP","EACH","ELEMENT","ELSE","END","EVERY","EXCEPT","EXCLUDE","EXECUTE","EXISTS","EXPLAIN","FALSE","FETCH","FILTER","FIRST","FLATTEN","FLUSH","FOLLOWING","FOR","FORCE","FROM","FTS","FUNCTION","GOLANG","GRANT","GROUP","GROUPS","GSI","HASH","HAVING","IF","IGNORE","ILIKE","IN","INCLUDE","INCREMENT","INDEX","INFER","INLINE","INNER","INSERT","INTERSECT","INTO","IS","ISOLATION","JAVASCRIPT","JOIN","KEY","KEYS","KEYSPACE","KNOWN","LANGUAGE","LAST","LEFT","LET","LETTING","LEVEL","LIKE","LIMIT","LSM","MAP","MAPPING","MATCHED","MATERIALIZED","MERGE","MINUS","MISSING","NAMESPACE","NEST","NL","NO","NOT","NTH_VALUE","NULL","NULLS","NUMBER","OBJECT","OFFSET","ON","OPTION","OPTIONS","OR","ORDER","OTHERS","OUTER","OVER","PARSE","PARTITION","PASSWORD","PATH","POOL","PRECEDING","PREPARE","PRIMARY","PRIVATE","PRIVILEGE","PROBE","PROCEDURE","PUBLIC","RANGE","RAW","REALM","REDUCE","RENAME","RESPECT","RETURN","RETURNING","REVOKE","RIGHT","ROLE","ROLLBACK","ROW","ROWS","SATISFIES","SAVEPOINT","SCHEMA","SCOPE","SELECT","SELF","SEMI","SET","SHOW","SOME","START","STATISTICS","STRING","SYSTEM","THEN","TIES","TO","TRAN","TRANSACTION","TRIGGER","TRUE","TRUNCATE","UNBOUNDED","UNDER","UNION","UNIQUE","UNKNOWN","UNNEST","UNSET","UPDATE","UPSERT","USE","USER","USING","VALIDATE","VALUE","VALUED","VALUES","VIA","VIEW","WHEN","WHERE","WHILE","WINDOW","WITH","WITHIN","WORK","XOR"],i3=[]});var Fwe,Hwe,o3,Gwe,$we,Wwe,kwe,CR,Ry=W(()=>{Mt();n3();s3();Fwe=x(["SELECT [ALL | DISTINCT]"]),Hwe=x(["WITH","FROM","WHERE","GROUP BY","HAVING","WINDOW","PARTITION BY","ORDER BY","LIMIT","OFFSET","INSERT INTO","VALUES","SET","MERGE INTO","WHEN [NOT] MATCHED THEN","UPDATE SET","INSERT","NEST","UNNEST","RETURNING"]),o3=x(["UPDATE","DELETE FROM","SET SCHEMA","ADVISE","ALTER INDEX","BEGIN TRANSACTION","BUILD INDEX","COMMIT TRANSACTION","CREATE COLLECTION","CREATE FUNCTION","CREATE INDEX","CREATE PRIMARY INDEX","CREATE SCOPE","DROP COLLECTION","DROP FUNCTION","DROP INDEX","DROP PRIMARY INDEX","DROP SCOPE","EXECUTE","EXECUTE FUNCTION","EXPLAIN","GRANT","INFER","PREPARE","REVOKE","ROLLBACK TRANSACTION","SAVEPOINT","SET TRANSACTION","UPDATE STATISTICS","UPSERT","LET","SET CURRENT SCHEMA","SHOW","USE [PRIMARY] KEYS"]),Gwe=x(["UNION [ALL]","EXCEPT [ALL]","INTERSECT [ALL]"]),$we=x(["JOIN","{LEFT | RIGHT} [OUTER] JOIN","INNER JOIN"]),Wwe=x(["{ROWS | RANGE | GROUPS} BETWEEN"]),kwe=x([]),CR={name:"n1ql",tokenizerOptions:{reservedSelect:Fwe,reservedClauses:[...Hwe,...o3],reservedSetOperations:Gwe,reservedJoins:$we,reservedKeywordPhrases:Wwe,reservedDataTypePhrases:kwe,supportsXor:!0,reservedKeywords:r3,reservedDataTypes:i3,reservedFunctionNames:t3,stringTypes:['""-bs',"''-bs"],identTypes:["``"],extraParens:["[]","{}"],paramTypes:{positional:!0,numbered:["$"],named:["$"]},lineCommentTypes:["#","--"],operators:["%","==",":","||"]},formatOptions:{onelineClauses:o3}}});var a3,l3,c3=W(()=>{a3=["ADD","AGENT","AGGREGATE","ALL","ALTER","AND","ANY","ARROW","AS","ASC","AT","ATTRIBUTE","AUTHID","AVG","BEGIN","BETWEEN","BLOCK","BODY","BOTH","BOUND","BULK","BY","BYTE","CALL","CALLING","CASCADE","CASE","CHARSET","CHARSETFORM","CHARSETID","CHECK","CLOSE","CLUSTER","CLUSTERS","COLAUTH","COLLECT","COLUMNS","COMMENT","COMMIT","COMMITTED","COMPILED","COMPRESS","CONNECT","CONSTANT","CONSTRUCTOR","CONTEXT","CONVERT","COUNT","CRASH","CREATE","CURRENT","CURSOR","CUSTOMDATUM","DANGLING","DATA","DAY","DECLARE","DEFAULT","DEFINE","DELETE","DESC","DETERMINISTIC","DISTINCT","DROP","DURATION","ELEMENT","ELSE","ELSIF","EMPTY","END","ESCAPE","EXCEPT","EXCEPTION","EXCEPTIONS","EXCLUSIVE","EXECUTE","EXISTS","EXIT","EXTERNAL","FETCH","FINAL","FIXED","FOR","FORALL","FORCE","FORM","FROM","FUNCTION","GENERAL","GOTO","GRANT","GROUP","HASH","HAVING","HEAP","HIDDEN","HOUR","IDENTIFIED","IF","IMMEDIATE","IN","INCLUDING","INDEX","INDEXES","INDICATOR","INDICES","INFINITE","INSERT","INSTANTIABLE","INTERFACE","INTERSECT","INTERVAL","INTO","INVALIDATE","IS","ISOLATION","JAVA","LANGUAGE","LARGE","LEADING","LENGTH","LEVEL","LIBRARY","LIKE","LIKE2","LIKE4","LIKEC","LIMIT","LIMITED","LOCAL","LOCK","LOOP","MAP","MAX","MAXLEN","MEMBER","MERGE","MIN","MINUS","MINUTE","MOD","MODE","MODIFY","MONTH","MULTISET","NAME","NAN","NATIONAL","NATIVE","NEW","NOCOMPRESS","NOCOPY","NOT","NOWAIT","NULL","OBJECT","OCICOLL","OCIDATE","OCIDATETIME","OCIDURATION","OCIINTERVAL","OCILOBLOCATOR","OCINUMBER","OCIRAW","OCIREF","OCIREFCURSOR","OCIROWID","OCISTRING","OCITYPE","OF","ON","ONLY","OPAQUE","OPEN","OPERATOR","OPTION","OR","ORACLE","ORADATA","ORDER","OVERLAPS","ORGANIZATION","ORLANY","ORLVARY","OTHERS","OUT","OVERRIDING","PACKAGE","PARALLEL_ENABLE","PARAMETER","PARAMETERS","PARTITION","PASCAL","PIPE","PIPELINED","PRAGMA","PRIOR","PRIVATE","PROCEDURE","PUBLIC","RAISE","RANGE","READ","RECORD","REF","REFERENCE","REM","REMAINDER","RENAME","RESOURCE","RESULT","RETURN","RETURNING","REVERSE","REVOKE","ROLLBACK","ROW","SAMPLE","SAVE","SAVEPOINT","SB1","SB2","SB4","SECOND","SEGMENT","SELECT","SELF","SEPARATE","SEQUENCE","SERIALIZABLE","SET","SHARE","SHORT","SIZE","SIZE_T","SOME","SPARSE","SQL","SQLCODE","SQLDATA","SQLNAME","SQLSTATE","STANDARD","START","STATIC","STDDEV","STORED","STRING","STRUCT","STYLE","SUBMULTISET","SUBPARTITION","SUBSTITUTABLE","SUBTYPE","SUM","SYNONYM","TABAUTH","TABLE","TDO","THE","THEN","TIME","TIMEZONE_ABBR","TIMEZONE_HOUR","TIMEZONE_MINUTE","TIMEZONE_REGION","TO","TRAILING","TRANSAC","TRANSACTIONAL","TRUSTED","TYPE","UB1","UB2","UB4","UNDER","UNION","UNIQUE","UNSIGNED","UNTRUSTED","UPDATE","USE","USING","VALIST","VALUE","VALUES","VARIABLE","VARIANCE","VARRAY","VIEW","VIEWS","VOID","WHEN","WHERE","WHILE","WITH","WORK","WRAPPED","WRITE","YEAR","ZONE"],l3=["ARRAY","BFILE_BASE","BINARY","BLOB_BASE","CHAR VARYING","CHAR_BASE","CHAR","CHARACTER VARYING","CHARACTER","CLOB_BASE","DATE_BASE","DATE","DECIMAL","DOUBLE","FLOAT","INT","INTERVAL DAY","INTERVAL YEAR","LONG","NATIONAL CHAR VARYING","NATIONAL CHAR","NATIONAL CHARACTER VARYING","NATIONAL CHARACTER","NCHAR VARYING","NCHAR","NCHAR","NUMBER_BASE","NUMBER","NUMBERIC","NVARCHAR","PRECISION","RAW","TIMESTAMP","UROWID","VARCHAR","VARCHAR2"]});var u3,d3=W(()=>{u3=["ABS","ACOS","ASIN","ATAN","ATAN2","BITAND","CEIL","COS","COSH","EXP","FLOOR","LN","LOG","MOD","NANVL","POWER","REMAINDER","ROUND","SIGN","SIN","SINH","SQRT","TAN","TANH","TRUNC","WIDTH_BUCKET","CHR","CONCAT","INITCAP","LOWER","LPAD","LTRIM","NLS_INITCAP","NLS_LOWER","NLSSORT","NLS_UPPER","REGEXP_REPLACE","REGEXP_SUBSTR","REPLACE","RPAD","RTRIM","SOUNDEX","SUBSTR","TRANSLATE","TREAT","TRIM","UPPER","NLS_CHARSET_DECL_LEN","NLS_CHARSET_ID","NLS_CHARSET_NAME","ASCII","INSTR","LENGTH","REGEXP_INSTR","ADD_MONTHS","CURRENT_DATE","CURRENT_TIMESTAMP","DBTIMEZONE","EXTRACT","FROM_TZ","LAST_DAY","LOCALTIMESTAMP","MONTHS_BETWEEN","NEW_TIME","NEXT_DAY","NUMTODSINTERVAL","NUMTOYMINTERVAL","ROUND","SESSIONTIMEZONE","SYS_EXTRACT_UTC","SYSDATE","SYSTIMESTAMP","TO_CHAR","TO_TIMESTAMP","TO_TIMESTAMP_TZ","TO_DSINTERVAL","TO_YMINTERVAL","TRUNC","TZ_OFFSET","GREATEST","LEAST","ASCIISTR","BIN_TO_NUM","CAST","CHARTOROWID","COMPOSE","CONVERT","DECOMPOSE","HEXTORAW","NUMTODSINTERVAL","NUMTOYMINTERVAL","RAWTOHEX","RAWTONHEX","ROWIDTOCHAR","ROWIDTONCHAR","SCN_TO_TIMESTAMP","TIMESTAMP_TO_SCN","TO_BINARY_DOUBLE","TO_BINARY_FLOAT","TO_CHAR","TO_CLOB","TO_DATE","TO_DSINTERVAL","TO_LOB","TO_MULTI_BYTE","TO_NCHAR","TO_NCLOB","TO_NUMBER","TO_DSINTERVAL","TO_SINGLE_BYTE","TO_TIMESTAMP","TO_TIMESTAMP_TZ","TO_YMINTERVAL","TO_YMINTERVAL","TRANSLATE","UNISTR","BFILENAME","EMPTY_BLOB,","EMPTY_CLOB","CARDINALITY","COLLECT","POWERMULTISET","POWERMULTISET_BY_CARDINALITY","SET","SYS_CONNECT_BY_PATH","CLUSTER_ID","CLUSTER_PROBABILITY","CLUSTER_SET","FEATURE_ID","FEATURE_SET","FEATURE_VALUE","PREDICTION","PREDICTION_COST","PREDICTION_DETAILS","PREDICTION_PROBABILITY","PREDICTION_SET","APPENDCHILDXML","DELETEXML","DEPTH","EXTRACT","EXISTSNODE","EXTRACTVALUE","INSERTCHILDXML","INSERTXMLBEFORE","PATH","SYS_DBURIGEN","SYS_XMLAGG","SYS_XMLGEN","UPDATEXML","XMLAGG","XMLCDATA","XMLCOLATTVAL","XMLCOMMENT","XMLCONCAT","XMLFOREST","XMLPARSE","XMLPI","XMLQUERY","XMLROOT","XMLSEQUENCE","XMLSERIALIZE","XMLTABLE","XMLTRANSFORM","DECODE","DUMP","ORA_HASH","VSIZE","COALESCE","LNNVL","NULLIF","NVL","NVL2","SYS_CONTEXT","SYS_GUID","SYS_TYPEID","UID","USER","USERENV","AVG","COLLECT","CORR","CORR_S","CORR_K","COUNT","COVAR_POP","COVAR_SAMP","CUME_DIST","DENSE_RANK","FIRST","GROUP_ID","GROUPING","GROUPING_ID","LAST","MAX","MEDIAN","MIN","PERCENTILE_CONT","PERCENTILE_DISC","PERCENT_RANK","RANK","REGR_SLOPE","REGR_INTERCEPT","REGR_COUNT","REGR_R2","REGR_AVGX","REGR_AVGY","REGR_SXX","REGR_SYY","REGR_SXY","STATS_BINOMIAL_TEST","STATS_CROSSTAB","STATS_F_TEST","STATS_KS_TEST","STATS_MODE","STATS_MW_TEST","STATS_ONE_WAY_ANOVA","STATS_T_TEST_ONE","STATS_T_TEST_PAIRED","STATS_T_TEST_INDEP","STATS_T_TEST_INDEPU","STATS_WSR_TEST","STDDEV","STDDEV_POP","STDDEV_SAMP","SUM","VAR_POP","VAR_SAMP","VARIANCE","FIRST_VALUE","LAG","LAST_VALUE","LEAD","NTILE","RATIO_TO_REPORT","ROW_NUMBER","DEREF","MAKE_REF","REF","REFTOHEX","VALUE","CV","ITERATION_NUMBER","PRESENTNNV","PRESENTV","PREVIOUS"]});function Kwe(t){let e=Bi;return t.map(n=>Zr.SET(n)&&Zr.BY(e)?Object.assign(Object.assign({},n),{type:V.RESERVED_KEYWORD}):(TR(n.type)&&(e=n),n))}var Ywe,Vwe,f3,Ay,qwe,Xwe,zwe,jwe,bR,my=W(()=>{Mt();Pr();c3();d3();Ywe=x(["SELECT [ALL | DISTINCT | UNIQUE]"]),Vwe=x(["WITH","FROM","WHERE","GROUP BY","HAVING","PARTITION BY","ORDER [SIBLINGS] BY","OFFSET","FETCH {FIRST | NEXT}","FOR UPDATE [OF]","INSERT [INTO | ALL INTO]","VALUES","SET","MERGE [INTO]","WHEN [NOT] MATCHED [THEN]","UPDATE SET","RETURNING"]),f3=x(["CREATE [GLOBAL TEMPORARY | PRIVATE TEMPORARY | SHARDED | DUPLICATED | IMMUTABLE BLOCKCHAIN | BLOCKCHAIN | IMMUTABLE] TABLE"]),Ay=x(["CREATE [OR REPLACE] [NO FORCE | FORCE] [EDITIONING | EDITIONABLE | EDITIONABLE EDITIONING | NONEDITIONABLE] VIEW","CREATE MATERIALIZED VIEW","UPDATE [ONLY]","DELETE FROM [ONLY]","DROP TABLE","ALTER TABLE","ADD","DROP {COLUMN | UNUSED COLUMNS | COLUMNS CONTINUE}","MODIFY","RENAME TO","RENAME COLUMN","TRUNCATE TABLE","SET SCHEMA","BEGIN","CONNECT BY","DECLARE","EXCEPT","EXCEPTION","LOOP","START WITH"]),qwe=x(["UNION [ALL]","MINUS","INTERSECT"]),Xwe=x(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL [INNER] JOIN","NATURAL {LEFT | RIGHT | FULL} [OUTER] JOIN","{CROSS | OUTER} APPLY"]),zwe=x(["ON {UPDATE | DELETE} [SET NULL]","ON COMMIT","{ROWS | RANGE} BETWEEN"]),jwe=x([]),bR={name:"plsql",tokenizerOptions:{reservedSelect:Ywe,reservedClauses:[...Vwe,...f3,...Ay],reservedSetOperations:qwe,reservedJoins:Xwe,reservedKeywordPhrases:zwe,reservedDataTypePhrases:jwe,supportsXor:!0,reservedKeywords:a3,reservedDataTypes:l3,reservedFunctionNames:u3,stringTypes:[{quote:"''-qq",prefixes:["N"]},{quote:"q''",prefixes:["N"]}],identTypes:['""-qq'],identChars:{rest:"$#"},variableTypes:[{regex:"&{1,2}[A-Za-z][A-Za-z0-9_$#]*"}],paramTypes:{numbered:[":"],named:[":"]},operators:["**",":=","%","~=","^=",">>","<<","=>","@","||"],postProcess:Kwe},formatOptions:{alwaysDenseOperators:["@"],onelineClauses:[...f3,...Ay],tabularOnelineClauses:Ay}}});var E3,h3=W(()=>{E3=["ABS","ACOS","ACOSD","ACOSH","ASIN","ASIND","ASINH","ATAN","ATAN2","ATAN2D","ATAND","ATANH","CBRT","CEIL","CEILING","COS","COSD","COSH","COT","COTD","DEGREES","DIV","EXP","FACTORIAL","FLOOR","GCD","LCM","LN","LOG","LOG10","MIN_SCALE","MOD","PI","POWER","RADIANS","RANDOM","ROUND","SCALE","SETSEED","SIGN","SIN","SIND","SINH","SQRT","TAN","TAND","TANH","TRIM_SCALE","TRUNC","WIDTH_BUCKET","ABS","ASCII","BIT_LENGTH","BTRIM","CHARACTER_LENGTH","CHAR_LENGTH","CHR","CONCAT","CONCAT_WS","FORMAT","INITCAP","LEFT","LENGTH","LOWER","LPAD","LTRIM","MD5","NORMALIZE","OCTET_LENGTH","OVERLAY","PARSE_IDENT","PG_CLIENT_ENCODING","POSITION","QUOTE_IDENT","QUOTE_LITERAL","QUOTE_NULLABLE","REGEXP_MATCH","REGEXP_MATCHES","REGEXP_REPLACE","REGEXP_SPLIT_TO_ARRAY","REGEXP_SPLIT_TO_TABLE","REPEAT","REPLACE","REVERSE","RIGHT","RPAD","RTRIM","SPLIT_PART","SPRINTF","STARTS_WITH","STRING_AGG","STRING_TO_ARRAY","STRING_TO_TABLE","STRPOS","SUBSTR","SUBSTRING","TO_ASCII","TO_HEX","TRANSLATE","TRIM","UNISTR","UPPER","BIT_COUNT","BIT_LENGTH","BTRIM","CONVERT","CONVERT_FROM","CONVERT_TO","DECODE","ENCODE","GET_BIT","GET_BYTE","LENGTH","LTRIM","MD5","OCTET_LENGTH","OVERLAY","POSITION","RTRIM","SET_BIT","SET_BYTE","SHA224","SHA256","SHA384","SHA512","STRING_AGG","SUBSTR","SUBSTRING","TRIM","BIT_COUNT","BIT_LENGTH","GET_BIT","LENGTH","OCTET_LENGTH","OVERLAY","POSITION","SET_BIT","SUBSTRING","REGEXP_MATCH","REGEXP_MATCHES","REGEXP_REPLACE","REGEXP_SPLIT_TO_ARRAY","REGEXP_SPLIT_TO_TABLE","TO_CHAR","TO_DATE","TO_NUMBER","TO_TIMESTAMP","CLOCK_TIMESTAMP","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","DATE_BIN","DATE_PART","DATE_TRUNC","EXTRACT","ISFINITE","JUSTIFY_DAYS","JUSTIFY_HOURS","JUSTIFY_INTERVAL","LOCALTIME","LOCALTIMESTAMP","MAKE_DATE","MAKE_INTERVAL","MAKE_TIME","MAKE_TIMESTAMP","MAKE_TIMESTAMPTZ","NOW","PG_SLEEP","PG_SLEEP_FOR","PG_SLEEP_UNTIL","STATEMENT_TIMESTAMP","TIMEOFDAY","TO_TIMESTAMP","TRANSACTION_TIMESTAMP","ENUM_FIRST","ENUM_LAST","ENUM_RANGE","AREA","BOUND_BOX","BOX","CENTER","CIRCLE","DIAGONAL","DIAMETER","HEIGHT","ISCLOSED","ISOPEN","LENGTH","LINE","LSEG","NPOINTS","PATH","PCLOSE","POINT","POLYGON","POPEN","RADIUS","SLOPE","WIDTH","ABBREV","BROADCAST","FAMILY","HOST","HOSTMASK","INET_MERGE","INET_SAME_FAMILY","MACADDR8_SET7BIT","MASKLEN","NETMASK","NETWORK","SET_MASKLEN","TRUNC","ARRAY_TO_TSVECTOR","GET_CURRENT_TS_CONFIG","JSONB_TO_TSVECTOR","JSON_TO_TSVECTOR","LENGTH","NUMNODE","PHRASETO_TSQUERY","PLAINTO_TSQUERY","QUERYTREE","SETWEIGHT","STRIP","TO_TSQUERY","TO_TSVECTOR","TSQUERY_PHRASE","TSVECTOR_TO_ARRAY","TS_DEBUG","TS_DELETE","TS_FILTER","TS_HEADLINE","TS_LEXIZE","TS_PARSE","TS_RANK","TS_RANK_CD","TS_REWRITE","TS_STAT","TS_TOKEN_TYPE","WEBSEARCH_TO_TSQUERY","GEN_RANDOM_UUID","UUIDV4","UUIDV7","UUID_EXTRACT_TIMESTAMP","UUID_EXTRACT_VERSION","CURSOR_TO_XML","CURSOR_TO_XMLSCHEMA","DATABASE_TO_XML","DATABASE_TO_XMLSCHEMA","DATABASE_TO_XML_AND_XMLSCHEMA","NEXTVAL","QUERY_TO_XML","QUERY_TO_XMLSCHEMA","QUERY_TO_XML_AND_XMLSCHEMA","SCHEMA_TO_XML","SCHEMA_TO_XMLSCHEMA","SCHEMA_TO_XML_AND_XMLSCHEMA","STRING","TABLE_TO_XML","TABLE_TO_XMLSCHEMA","TABLE_TO_XML_AND_XMLSCHEMA","XMLAGG","XMLCOMMENT","XMLCONCAT","XMLELEMENT","XMLEXISTS","XMLFOREST","XMLPARSE","XMLPI","XMLROOT","XMLSERIALIZE","XMLTABLE","XML_IS_WELL_FORMED","XML_IS_WELL_FORMED_CONTENT","XML_IS_WELL_FORMED_DOCUMENT","XPATH","XPATH_EXISTS","ARRAY_TO_JSON","JSONB_AGG","JSONB_ARRAY_ELEMENTS","JSONB_ARRAY_ELEMENTS_TEXT","JSONB_ARRAY_LENGTH","JSONB_BUILD_ARRAY","JSONB_BUILD_OBJECT","JSONB_EACH","JSONB_EACH_TEXT","JSONB_EXTRACT_PATH","JSONB_EXTRACT_PATH_TEXT","JSONB_INSERT","JSONB_OBJECT","JSONB_OBJECT_AGG","JSONB_OBJECT_KEYS","JSONB_PATH_EXISTS","JSONB_PATH_EXISTS_TZ","JSONB_PATH_MATCH","JSONB_PATH_MATCH_TZ","JSONB_PATH_QUERY","JSONB_PATH_QUERY_ARRAY","JSONB_PATH_QUERY_ARRAY_TZ","JSONB_PATH_QUERY_FIRST","JSONB_PATH_QUERY_FIRST_TZ","JSONB_PATH_QUERY_TZ","JSONB_POPULATE_RECORD","JSONB_POPULATE_RECORDSET","JSONB_PRETTY","JSONB_SET","JSONB_SET_LAX","JSONB_STRIP_NULLS","JSONB_TO_RECORD","JSONB_TO_RECORDSET","JSONB_TYPEOF","JSON_AGG","JSON_ARRAY_ELEMENTS","JSON_ARRAY_ELEMENTS_TEXT","JSON_ARRAY_LENGTH","JSON_BUILD_ARRAY","JSON_BUILD_OBJECT","JSON_EACH","JSON_EACH_TEXT","JSON_EXTRACT_PATH","JSON_EXTRACT_PATH_TEXT","JSON_OBJECT","JSON_OBJECT_AGG","JSON_OBJECT_KEYS","JSON_POPULATE_RECORD","JSON_POPULATE_RECORDSET","JSON_STRIP_NULLS","JSON_TO_RECORD","JSON_TO_RECORDSET","JSON_TYPEOF","ROW_TO_JSON","TO_JSON","TO_JSONB","TO_TIMESTAMP","CURRVAL","LASTVAL","NEXTVAL","SETVAL","COALESCE","GREATEST","LEAST","NULLIF","ARRAY_AGG","ARRAY_APPEND","ARRAY_CAT","ARRAY_DIMS","ARRAY_FILL","ARRAY_LENGTH","ARRAY_LOWER","ARRAY_NDIMS","ARRAY_POSITION","ARRAY_POSITIONS","ARRAY_PREPEND","ARRAY_REMOVE","ARRAY_REPLACE","ARRAY_TO_STRING","ARRAY_UPPER","CARDINALITY","STRING_TO_ARRAY","TRIM_ARRAY","UNNEST","ISEMPTY","LOWER","LOWER_INC","LOWER_INF","MULTIRANGE","RANGE_MERGE","UPPER","UPPER_INC","UPPER_INF","ARRAY_AGG","AVG","BIT_AND","BIT_OR","BIT_XOR","BOOL_AND","BOOL_OR","COALESCE","CORR","COUNT","COVAR_POP","COVAR_SAMP","CUME_DIST","DENSE_RANK","EVERY","GROUPING","JSONB_AGG","JSONB_OBJECT_AGG","JSON_AGG","JSON_OBJECT_AGG","MAX","MIN","MODE","PERCENTILE_CONT","PERCENTILE_DISC","PERCENT_RANK","RANGE_AGG","RANGE_INTERSECT_AGG","RANK","REGR_AVGX","REGR_AVGY","REGR_COUNT","REGR_INTERCEPT","REGR_R2","REGR_SLOPE","REGR_SXX","REGR_SXY","REGR_SYY","STDDEV","STDDEV_POP","STDDEV_SAMP","STRING_AGG","SUM","TO_JSON","TO_JSONB","VARIANCE","VAR_POP","VAR_SAMP","XMLAGG","CUME_DIST","DENSE_RANK","FIRST_VALUE","LAG","LAST_VALUE","LEAD","NTH_VALUE","NTILE","PERCENT_RANK","RANK","ROW_NUMBER","GENERATE_SERIES","GENERATE_SUBSCRIPTS","ACLDEFAULT","ACLEXPLODE","COL_DESCRIPTION","CURRENT_CATALOG","CURRENT_DATABASE","CURRENT_QUERY","CURRENT_ROLE","CURRENT_SCHEMA","CURRENT_SCHEMAS","CURRENT_USER","FORMAT_TYPE","HAS_ANY_COLUMN_PRIVILEGE","HAS_COLUMN_PRIVILEGE","HAS_DATABASE_PRIVILEGE","HAS_FOREIGN_DATA_WRAPPER_PRIVILEGE","HAS_FUNCTION_PRIVILEGE","HAS_LANGUAGE_PRIVILEGE","HAS_SCHEMA_PRIVILEGE","HAS_SEQUENCE_PRIVILEGE","HAS_SERVER_PRIVILEGE","HAS_TABLESPACE_PRIVILEGE","HAS_TABLE_PRIVILEGE","HAS_TYPE_PRIVILEGE","INET_CLIENT_ADDR","INET_CLIENT_PORT","INET_SERVER_ADDR","INET_SERVER_PORT","MAKEACLITEM","OBJ_DESCRIPTION","PG_BACKEND_PID","PG_BLOCKING_PIDS","PG_COLLATION_IS_VISIBLE","PG_CONF_LOAD_TIME","PG_CONTROL_CHECKPOINT","PG_CONTROL_INIT","PG_CONTROL_SYSTEM","PG_CONVERSION_IS_VISIBLE","PG_CURRENT_LOGFILE","PG_CURRENT_SNAPSHOT","PG_CURRENT_XACT_ID","PG_CURRENT_XACT_ID_IF_ASSIGNED","PG_DESCRIBE_OBJECT","PG_FUNCTION_IS_VISIBLE","PG_GET_CATALOG_FOREIGN_KEYS","PG_GET_CONSTRAINTDEF","PG_GET_EXPR","PG_GET_FUNCTIONDEF","PG_GET_FUNCTION_ARGUMENTS","PG_GET_FUNCTION_IDENTITY_ARGUMENTS","PG_GET_FUNCTION_RESULT","PG_GET_INDEXDEF","PG_GET_KEYWORDS","PG_GET_OBJECT_ADDRESS","PG_GET_OWNED_SEQUENCE","PG_GET_RULEDEF","PG_GET_SERIAL_SEQUENCE","PG_GET_STATISTICSOBJDEF","PG_GET_TRIGGERDEF","PG_GET_USERBYID","PG_GET_VIEWDEF","PG_HAS_ROLE","PG_IDENTIFY_OBJECT","PG_IDENTIFY_OBJECT_AS_ADDRESS","PG_INDEXAM_HAS_PROPERTY","PG_INDEX_COLUMN_HAS_PROPERTY","PG_INDEX_HAS_PROPERTY","PG_IS_OTHER_TEMP_SCHEMA","PG_JIT_AVAILABLE","PG_LAST_COMMITTED_XACT","PG_LISTENING_CHANNELS","PG_MY_TEMP_SCHEMA","PG_NOTIFICATION_QUEUE_USAGE","PG_OPCLASS_IS_VISIBLE","PG_OPERATOR_IS_VISIBLE","PG_OPFAMILY_IS_VISIBLE","PG_OPTIONS_TO_TABLE","PG_POSTMASTER_START_TIME","PG_SAFE_SNAPSHOT_BLOCKING_PIDS","PG_SNAPSHOT_XIP","PG_SNAPSHOT_XMAX","PG_SNAPSHOT_XMIN","PG_STATISTICS_OBJ_IS_VISIBLE","PG_TABLESPACE_DATABASES","PG_TABLESPACE_LOCATION","PG_TABLE_IS_VISIBLE","PG_TRIGGER_DEPTH","PG_TS_CONFIG_IS_VISIBLE","PG_TS_DICT_IS_VISIBLE","PG_TS_PARSER_IS_VISIBLE","PG_TS_TEMPLATE_IS_VISIBLE","PG_TYPEOF","PG_TYPE_IS_VISIBLE","PG_VISIBLE_IN_SNAPSHOT","PG_XACT_COMMIT_TIMESTAMP","PG_XACT_COMMIT_TIMESTAMP_ORIGIN","PG_XACT_STATUS","PQSERVERVERSION","ROW_SECURITY_ACTIVE","SESSION_USER","SHOBJ_DESCRIPTION","TO_REGCLASS","TO_REGCOLLATION","TO_REGNAMESPACE","TO_REGOPER","TO_REGOPERATOR","TO_REGPROC","TO_REGPROCEDURE","TO_REGROLE","TO_REGTYPE","TXID_CURRENT","TXID_CURRENT_IF_ASSIGNED","TXID_CURRENT_SNAPSHOT","TXID_SNAPSHOT_XIP","TXID_SNAPSHOT_XMAX","TXID_SNAPSHOT_XMIN","TXID_STATUS","TXID_VISIBLE_IN_SNAPSHOT","USER","VERSION","BRIN_DESUMMARIZE_RANGE","BRIN_SUMMARIZE_NEW_VALUES","BRIN_SUMMARIZE_RANGE","CONVERT_FROM","CURRENT_SETTING","GIN_CLEAN_PENDING_LIST","PG_ADVISORY_LOCK","PG_ADVISORY_LOCK_SHARED","PG_ADVISORY_UNLOCK","PG_ADVISORY_UNLOCK_ALL","PG_ADVISORY_UNLOCK_SHARED","PG_ADVISORY_XACT_LOCK","PG_ADVISORY_XACT_LOCK_SHARED","PG_BACKUP_START_TIME","PG_CANCEL_BACKEND","PG_COLLATION_ACTUAL_VERSION","PG_COLUMN_COMPRESSION","PG_COLUMN_SIZE","PG_COPY_LOGICAL_REPLICATION_SLOT","PG_COPY_PHYSICAL_REPLICATION_SLOT","PG_CREATE_LOGICAL_REPLICATION_SLOT","PG_CREATE_PHYSICAL_REPLICATION_SLOT","PG_CREATE_RESTORE_POINT","PG_CURRENT_WAL_FLUSH_LSN","PG_CURRENT_WAL_INSERT_LSN","PG_CURRENT_WAL_LSN","PG_DATABASE_SIZE","PG_DROP_REPLICATION_SLOT","PG_EXPORT_SNAPSHOT","PG_FILENODE_RELATION","PG_GET_WAL_REPLAY_PAUSE_STATE","PG_IMPORT_SYSTEM_COLLATIONS","PG_INDEXES_SIZE","PG_IS_IN_BACKUP","PG_IS_IN_RECOVERY","PG_IS_WAL_REPLAY_PAUSED","PG_LAST_WAL_RECEIVE_LSN","PG_LAST_WAL_REPLAY_LSN","PG_LAST_XACT_REPLAY_TIMESTAMP","PG_LOGICAL_EMIT_MESSAGE","PG_LOGICAL_SLOT_GET_BINARY_CHANGES","PG_LOGICAL_SLOT_GET_CHANGES","PG_LOGICAL_SLOT_PEEK_BINARY_CHANGES","PG_LOGICAL_SLOT_PEEK_CHANGES","PG_LOG_BACKEND_MEMORY_CONTEXTS","PG_LS_ARCHIVE_STATUSDIR","PG_LS_DIR","PG_LS_LOGDIR","PG_LS_TMPDIR","PG_LS_WALDIR","PG_PARTITION_ANCESTORS","PG_PARTITION_ROOT","PG_PARTITION_TREE","PG_PROMOTE","PG_READ_BINARY_FILE","PG_READ_FILE","PG_RELATION_FILENODE","PG_RELATION_FILEPATH","PG_RELATION_SIZE","PG_RELOAD_CONF","PG_REPLICATION_ORIGIN_ADVANCE","PG_REPLICATION_ORIGIN_CREATE","PG_REPLICATION_ORIGIN_DROP","PG_REPLICATION_ORIGIN_OID","PG_REPLICATION_ORIGIN_PROGRESS","PG_REPLICATION_ORIGIN_SESSION_IS_SETUP","PG_REPLICATION_ORIGIN_SESSION_PROGRESS","PG_REPLICATION_ORIGIN_SESSION_RESET","PG_REPLICATION_ORIGIN_SESSION_SETUP","PG_REPLICATION_ORIGIN_XACT_RESET","PG_REPLICATION_ORIGIN_XACT_SETUP","PG_REPLICATION_SLOT_ADVANCE","PG_ROTATE_LOGFILE","PG_SIZE_BYTES","PG_SIZE_PRETTY","PG_START_BACKUP","PG_STAT_FILE","PG_STOP_BACKUP","PG_SWITCH_WAL","PG_TABLESPACE_SIZE","PG_TABLE_SIZE","PG_TERMINATE_BACKEND","PG_TOTAL_RELATION_SIZE","PG_TRY_ADVISORY_LOCK","PG_TRY_ADVISORY_LOCK_SHARED","PG_TRY_ADVISORY_XACT_LOCK","PG_TRY_ADVISORY_XACT_LOCK_SHARED","PG_WALFILE_NAME","PG_WALFILE_NAME_OFFSET","PG_WAL_LSN_DIFF","PG_WAL_REPLAY_PAUSE","PG_WAL_REPLAY_RESUME","SET_CONFIG","SUPPRESS_REDUNDANT_UPDATES_TRIGGER","TSVECTOR_UPDATE_TRIGGER","TSVECTOR_UPDATE_TRIGGER_COLUMN","PG_EVENT_TRIGGER_DDL_COMMANDS","PG_EVENT_TRIGGER_DROPPED_OBJECTS","PG_EVENT_TRIGGER_TABLE_REWRITE_OID","PG_EVENT_TRIGGER_TABLE_REWRITE_REASON","PG_GET_OBJECT_ADDRESS","PG_MCV_LIST_ITEMS","CAST"]});var p3,T3,S3=W(()=>{p3=["ALL","ANALYSE","ANALYZE","AND","ANY","AS","ASC","ASYMMETRIC","AUTHORIZATION","BETWEEN","BINARY","BOTH","CASE","CAST","CHECK","COLLATE","COLLATION","COLUMN","CONCURRENTLY","CONSTRAINT","CREATE","CROSS","CURRENT_CATALOG","CURRENT_DATE","CURRENT_ROLE","CURRENT_SCHEMA","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","DAY","DEFAULT","DEFERRABLE","DESC","DISTINCT","DO","ELSE","END","EXCEPT","EXISTS","FALSE","FETCH","FILTER","FOR","FOREIGN","FREEZE","FROM","FULL","GRANT","GROUP","HAVING","HOUR","ILIKE","IN","INITIALLY","INNER","INOUT","INTERSECT","INTO","IS","ISNULL","JOIN","LATERAL","LEADING","LEFT","LIKE","LIMIT","LOCALTIME","LOCALTIMESTAMP","MINUTE","MONTH","NATURAL","NOT","NOTNULL","NULL","NULLIF","OFFSET","ON","ONLY","OR","ORDER","OUT","OUTER","OVER","OVERLAPS","PLACING","PRIMARY","REFERENCES","RETURNING","RIGHT","ROW","SECOND","SELECT","SESSION_USER","SIMILAR","SOME","SYMMETRIC","TABLE","TABLESAMPLE","THEN","TO","TRAILING","TRUE","UNION","UNIQUE","USER","USING","VALUES","VARIADIC","VERBOSE","WHEN","WHERE","WINDOW","WITH","WITHIN","WITHOUT","YEAR"],T3=["ARRAY","BIGINT","BIT","BIT VARYING","BOOL","BOOLEAN","CHAR","CHARACTER","CHARACTER VARYING","DECIMAL","DEC","DOUBLE","ENUM","FLOAT","INT","INTEGER","INTERVAL","NCHAR","NUMERIC","JSON","JSONB","PRECISION","REAL","SMALLINT","TEXT","TIME","TIMESTAMP","TIMESTAMPTZ","UUID","VARCHAR","XML","ZONE"]});var Jwe,Qwe,R3,gy,Zwe,e0e,t0e,n0e,yR,Iy=W(()=>{Mt();h3();S3();Jwe=x(["SELECT [ALL | DISTINCT]"]),Qwe=x(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY [ALL | DISTINCT]","HAVING","WINDOW","PARTITION BY","ORDER BY","LIMIT","OFFSET","FETCH {FIRST | NEXT}","FOR {UPDATE | NO KEY UPDATE | SHARE | KEY SHARE} [OF]","INSERT INTO","VALUES","DEFAULT VALUES","SET","RETURNING"]),R3=x(["CREATE [GLOBAL | LOCAL] [TEMPORARY | TEMP | UNLOGGED] TABLE [IF NOT EXISTS]"]),gy=x(["CREATE [OR REPLACE] [TEMP | TEMPORARY] [RECURSIVE] VIEW","CREATE [MATERIALIZED] VIEW [IF NOT EXISTS]","UPDATE [ONLY]","WHERE CURRENT OF","ON CONFLICT","DELETE FROM [ONLY]","DROP TABLE [IF EXISTS]","ALTER TABLE [IF EXISTS] [ONLY]","ALTER TABLE ALL IN TABLESPACE","RENAME [COLUMN]","RENAME TO","ADD [COLUMN] [IF NOT EXISTS]","DROP [COLUMN] [IF EXISTS]","ALTER [COLUMN]","SET DATA TYPE","{SET | DROP} DEFAULT","{SET | DROP} NOT NULL","TRUNCATE [TABLE] [ONLY]","SET SCHEMA","AFTER","ABORT","ALTER AGGREGATE","ALTER COLLATION","ALTER CONVERSION","ALTER DATABASE","ALTER DEFAULT PRIVILEGES","ALTER DOMAIN","ALTER EVENT TRIGGER","ALTER EXTENSION","ALTER FOREIGN DATA WRAPPER","ALTER FOREIGN TABLE","ALTER FUNCTION","ALTER GROUP","ALTER INDEX","ALTER LANGUAGE","ALTER LARGE OBJECT","ALTER MATERIALIZED VIEW","ALTER OPERATOR","ALTER OPERATOR CLASS","ALTER OPERATOR FAMILY","ALTER POLICY","ALTER PROCEDURE","ALTER PUBLICATION","ALTER ROLE","ALTER ROUTINE","ALTER RULE","ALTER SCHEMA","ALTER SEQUENCE","ALTER SERVER","ALTER STATISTICS","ALTER SUBSCRIPTION","ALTER SYSTEM","ALTER TABLESPACE","ALTER TEXT SEARCH CONFIGURATION","ALTER TEXT SEARCH DICTIONARY","ALTER TEXT SEARCH PARSER","ALTER TEXT SEARCH TEMPLATE","ALTER TRIGGER","ALTER TYPE","ALTER USER","ALTER USER MAPPING","ALTER VIEW","ANALYZE","BEGIN","CALL","CHECKPOINT","CLOSE","CLUSTER","COMMENT ON","COMMIT","COMMIT PREPARED","COPY","CREATE ACCESS METHOD","CREATE [OR REPLACE] AGGREGATE","CREATE CAST","CREATE COLLATION","CREATE [DEFAULT] CONVERSION","CREATE DATABASE","CREATE DOMAIN","CREATE EVENT TRIGGER","CREATE EXTENSION","CREATE FOREIGN DATA WRAPPER","CREATE FOREIGN TABLE","CREATE [OR REPLACE] FUNCTION","CREATE GROUP","CREATE [UNIQUE] INDEX","CREATE [OR REPLACE] [TRUSTED] [PROCEDURAL] LANGUAGE","CREATE OPERATOR","CREATE OPERATOR CLASS","CREATE OPERATOR FAMILY","CREATE POLICY","CREATE [OR REPLACE] PROCEDURE","CREATE PUBLICATION","CREATE ROLE","CREATE [OR REPLACE] RULE","CREATE SCHEMA [AUTHORIZATION]","CREATE [TEMPORARY | TEMP | UNLOGGED] SEQUENCE","CREATE SERVER","CREATE STATISTICS","CREATE SUBSCRIPTION","CREATE TABLESPACE","CREATE TEXT SEARCH CONFIGURATION","CREATE TEXT SEARCH DICTIONARY","CREATE TEXT SEARCH PARSER","CREATE TEXT SEARCH TEMPLATE","CREATE [OR REPLACE] TRANSFORM","CREATE [OR REPLACE] [CONSTRAINT] TRIGGER","CREATE TYPE","CREATE USER","CREATE USER MAPPING","DEALLOCATE","DECLARE","DISCARD","DROP ACCESS METHOD","DROP AGGREGATE","DROP CAST","DROP COLLATION","DROP CONVERSION","DROP DATABASE","DROP DOMAIN","DROP EVENT TRIGGER","DROP EXTENSION","DROP FOREIGN DATA WRAPPER","DROP FOREIGN TABLE","DROP FUNCTION","DROP GROUP","DROP IDENTITY","DROP INDEX","DROP LANGUAGE","DROP MATERIALIZED VIEW [IF EXISTS]","DROP OPERATOR","DROP OPERATOR CLASS","DROP OPERATOR FAMILY","DROP OWNED","DROP POLICY","DROP PROCEDURE","DROP PUBLICATION","DROP ROLE","DROP ROUTINE","DROP RULE","DROP SCHEMA","DROP SEQUENCE","DROP SERVER","DROP STATISTICS","DROP SUBSCRIPTION","DROP TABLESPACE","DROP TEXT SEARCH CONFIGURATION","DROP TEXT SEARCH DICTIONARY","DROP TEXT SEARCH PARSER","DROP TEXT SEARCH TEMPLATE","DROP TRANSFORM","DROP TRIGGER","DROP TYPE","DROP USER","DROP USER MAPPING","DROP VIEW","EXECUTE","EXPLAIN","FETCH","GRANT","IMPORT FOREIGN SCHEMA","LISTEN","LOAD","LOCK","MOVE","NOTIFY","OVERRIDING SYSTEM VALUE","PREPARE","PREPARE TRANSACTION","REASSIGN OWNED","REFRESH MATERIALIZED VIEW","REINDEX","RELEASE SAVEPOINT","RESET [ALL|ROLE|SESSION AUTHORIZATION]","REVOKE","ROLLBACK","ROLLBACK PREPARED","ROLLBACK TO SAVEPOINT","SAVEPOINT","SECURITY LABEL","SELECT INTO","SET CONSTRAINTS","SET ROLE","SET SESSION AUTHORIZATION","SET TRANSACTION","SHOW","START TRANSACTION","UNLISTEN","VACUUM"]),Zwe=x(["UNION [ALL | DISTINCT]","EXCEPT [ALL | DISTINCT]","INTERSECT [ALL | DISTINCT]"]),e0e=x(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL [INNER] JOIN","NATURAL {LEFT | RIGHT | FULL} [OUTER] JOIN"]),t0e=x(["PRIMARY KEY","GENERATED {ALWAYS | BY DEFAULT} AS IDENTITY","ON {UPDATE | DELETE} [NO ACTION | RESTRICT | CASCADE | SET NULL | SET DEFAULT]","DO {NOTHING | UPDATE}","AS MATERIALIZED","{ROWS | RANGE | GROUPS} BETWEEN","IS [NOT] DISTINCT FROM","NULLS {FIRST | LAST}","WITH ORDINALITY"]),n0e=x(["[TIMESTAMP | TIME] {WITH | WITHOUT} TIME ZONE"]),yR={name:"postgresql",tokenizerOptions:{reservedSelect:Jwe,reservedClauses:[...Qwe,...R3,...gy],reservedSetOperations:Zwe,reservedJoins:e0e,reservedKeywordPhrases:t0e,reservedDataTypePhrases:n0e,reservedKeywords:p3,reservedDataTypes:T3,reservedFunctionNames:E3,nestedBlockComments:!0,extraParens:["[]"],underscoresInNumbers:!0,stringTypes:["$$",{quote:"''-qq",prefixes:["U&"]},{quote:"''-qq-bs",prefixes:["E"],requirePrefix:!0},{quote:"''-raw",prefixes:["B","X"],requirePrefix:!0}],identTypes:[{quote:'""-qq',prefixes:["U&"]}],identChars:{rest:"$"},paramTypes:{numbered:["$"]},operators:["%","^","|/","||/","@",":=","&","|","#","~","<<",">>","~>~","~<~","~>=~","~<=~","@-@","@@","##","<->","&&","&<","&>","<<|","&<|","|>>","|&>","<^","^>","?#","?-","?|","?-|","?||","@>","<@","~=","?","@?","?&","->","->>","#>","#>>","#-","=>",">>=","<<=","~~","~~*","!~~","!~~*","~","~*","!~","!~*","-|-","||","@@@","!!","^@","<%","%>","<<%","%>>","<<->","<->>","<<<->","<->>>","::",":","<#>","<=>","<+>","<~>","<%>"],operatorKeyword:!0},formatOptions:{alwaysDenseOperators:["::",":"],onelineClauses:[...R3,...gy],tabularOnelineClauses:gy}}});var A3,m3=W(()=>{A3=["ANY_VALUE","APPROXIMATE PERCENTILE_DISC","AVG","COUNT","LISTAGG","MAX","MEDIAN","MIN","PERCENTILE_CONT","STDDEV_SAMP","STDDEV_POP","SUM","VAR_SAMP","VAR_POP","array_concat","array_flatten","get_array_length","split_to_array","subarray","BIT_AND","BIT_OR","BOOL_AND","BOOL_OR","COALESCE","DECODE","GREATEST","LEAST","NVL","NVL2","NULLIF","ADD_MONTHS","AT TIME ZONE","CONVERT_TIMEZONE","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","DATE_CMP","DATE_CMP_TIMESTAMP","DATE_CMP_TIMESTAMPTZ","DATE_PART_YEAR","DATEADD","DATEDIFF","DATE_PART","DATE_TRUNC","EXTRACT","GETDATE","INTERVAL_CMP","LAST_DAY","MONTHS_BETWEEN","NEXT_DAY","SYSDATE","TIMEOFDAY","TIMESTAMP_CMP","TIMESTAMP_CMP_DATE","TIMESTAMP_CMP_TIMESTAMPTZ","TIMESTAMPTZ_CMP","TIMESTAMPTZ_CMP_DATE","TIMESTAMPTZ_CMP_TIMESTAMP","TIMEZONE","TO_TIMESTAMP","TRUNC","AddBBox","DropBBox","GeometryType","ST_AddPoint","ST_Angle","ST_Area","ST_AsBinary","ST_AsEWKB","ST_AsEWKT","ST_AsGeoJSON","ST_AsText","ST_Azimuth","ST_Boundary","ST_Collect","ST_Contains","ST_ContainsProperly","ST_ConvexHull","ST_CoveredBy","ST_Covers","ST_Crosses","ST_Dimension","ST_Disjoint","ST_Distance","ST_DistanceSphere","ST_DWithin","ST_EndPoint","ST_Envelope","ST_Equals","ST_ExteriorRing","ST_Force2D","ST_Force3D","ST_Force3DM","ST_Force3DZ","ST_Force4D","ST_GeometryN","ST_GeometryType","ST_GeomFromEWKB","ST_GeomFromEWKT","ST_GeomFromText","ST_GeomFromWKB","ST_InteriorRingN","ST_Intersects","ST_IsPolygonCCW","ST_IsPolygonCW","ST_IsClosed","ST_IsCollection","ST_IsEmpty","ST_IsSimple","ST_IsValid","ST_Length","ST_LengthSphere","ST_Length2D","ST_LineFromMultiPoint","ST_LineInterpolatePoint","ST_M","ST_MakeEnvelope","ST_MakeLine","ST_MakePoint","ST_MakePolygon","ST_MemSize","ST_MMax","ST_MMin","ST_Multi","ST_NDims","ST_NPoints","ST_NRings","ST_NumGeometries","ST_NumInteriorRings","ST_NumPoints","ST_Perimeter","ST_Perimeter2D","ST_Point","ST_PointN","ST_Points","ST_Polygon","ST_RemovePoint","ST_Reverse","ST_SetPoint","ST_SetSRID","ST_Simplify","ST_SRID","ST_StartPoint","ST_Touches","ST_Within","ST_X","ST_XMax","ST_XMin","ST_Y","ST_YMax","ST_YMin","ST_Z","ST_ZMax","ST_ZMin","SupportsBBox","CHECKSUM","FUNC_SHA1","FNV_HASH","MD5","SHA","SHA1","SHA2","HLL","HLL_CREATE_SKETCH","HLL_CARDINALITY","HLL_COMBINE","IS_VALID_JSON","IS_VALID_JSON_ARRAY","JSON_ARRAY_LENGTH","JSON_EXTRACT_ARRAY_ELEMENT_TEXT","JSON_EXTRACT_PATH_TEXT","JSON_PARSE","JSON_SERIALIZE","ABS","ACOS","ASIN","ATAN","ATAN2","CBRT","CEILING","CEIL","COS","COT","DEGREES","DEXP","DLOG1","DLOG10","EXP","FLOOR","LN","LOG","MOD","PI","POWER","RADIANS","RANDOM","ROUND","SIN","SIGN","SQRT","TAN","TO_HEX","TRUNC","EXPLAIN_MODEL","ASCII","BPCHARCMP","BTRIM","BTTEXT_PATTERN_CMP","CHAR_LENGTH","CHARACTER_LENGTH","CHARINDEX","CHR","COLLATE","CONCAT","CRC32","DIFFERENCE","INITCAP","LEFT","RIGHT","LEN","LENGTH","LOWER","LPAD","RPAD","LTRIM","OCTETINDEX","OCTET_LENGTH","POSITION","QUOTE_IDENT","QUOTE_LITERAL","REGEXP_COUNT","REGEXP_INSTR","REGEXP_REPLACE","REGEXP_SUBSTR","REPEAT","REPLACE","REPLICATE","REVERSE","RTRIM","SOUNDEX","SPLIT_PART","STRPOS","STRTOL","SUBSTRING","TEXTLEN","TRANSLATE","TRIM","UPPER","decimal_precision","decimal_scale","is_array","is_bigint","is_boolean","is_char","is_decimal","is_float","is_integer","is_object","is_scalar","is_smallint","is_varchar","json_typeof","AVG","COUNT","CUME_DIST","DENSE_RANK","FIRST_VALUE","LAST_VALUE","LAG","LEAD","LISTAGG","MAX","MEDIAN","MIN","NTH_VALUE","NTILE","PERCENT_RANK","PERCENTILE_CONT","PERCENTILE_DISC","RANK","RATIO_TO_REPORT","ROW_NUMBER","STDDEV_SAMP","STDDEV_POP","SUM","VAR_SAMP","VAR_POP","CAST","CONVERT","TO_CHAR","TO_DATE","TO_NUMBER","TEXT_TO_INT_ALT","TEXT_TO_NUMERIC_ALT","CHANGE_QUERY_PRIORITY","CHANGE_SESSION_PRIORITY","CHANGE_USER_PRIORITY","CURRENT_SETTING","PG_CANCEL_BACKEND","PG_TERMINATE_BACKEND","REBOOT_CLUSTER","SET_CONFIG","CURRENT_AWS_ACCOUNT","CURRENT_DATABASE","CURRENT_NAMESPACE","CURRENT_SCHEMA","CURRENT_SCHEMAS","CURRENT_USER","CURRENT_USER_ID","HAS_ASSUMEROLE_PRIVILEGE","HAS_DATABASE_PRIVILEGE","HAS_SCHEMA_PRIVILEGE","HAS_TABLE_PRIVILEGE","PG_BACKEND_PID","PG_GET_COLS","PG_GET_GRANTEE_BY_IAM_ROLE","PG_GET_IAM_ROLE_BY_USER","PG_GET_LATE_BINDING_VIEW_COLS","PG_LAST_COPY_COUNT","PG_LAST_COPY_ID","PG_LAST_UNLOAD_ID","PG_LAST_QUERY_ID","PG_LAST_UNLOAD_COUNT","SESSION_USER","SLICE_NUM","USER","VERSION"]});var g3,I3,_3=W(()=>{g3=["AES128","AES256","ALL","ALLOWOVERWRITE","ANY","AS","ASC","AUTHORIZATION","BACKUP","BETWEEN","BINARY","BOTH","CHECK","COLUMN","CONSTRAINT","CREATE","CROSS","DEFAULT","DEFERRABLE","DEFLATE","DEFRAG","DESC","DISABLE","DISTINCT","DO","ENABLE","ENCODE","ENCRYPT","ENCRYPTION","EXPLICIT","FALSE","FOR","FOREIGN","FREEZE","FROM","FULL","GLOBALDICT256","GLOBALDICT64K","GROUP","IDENTITY","IGNORE","ILIKE","IN","INITIALLY","INNER","INTO","IS","ISNULL","LANGUAGE","LEADING","LIKE","LIMIT","LOCALTIME","LOCALTIMESTAMP","LUN","LUNS","MINUS","NATURAL","NEW","NOT","NOTNULL","NULL","NULLS","OFF","OFFLINE","OFFSET","OID","OLD","ON","ONLY","OPEN","ORDER","OUTER","OVERLAPS","PARALLEL","PARTITION","PERCENT","PERMISSIONS","PLACING","PRIMARY","RECOVER","REFERENCES","REJECTLOG","RESORT","RESPECT","RESTORE","SIMILAR","SNAPSHOT","SOME","SYSTEM","TABLE","TAG","TDES","THEN","TIMESTAMP","TO","TOP","TRAILING","TRUE","UNIQUE","USING","VERBOSE","WALLET","WITHOUT","ACCEPTANYDATE","ACCEPTINVCHARS","BLANKSASNULL","DATEFORMAT","EMPTYASNULL","ENCODING","ESCAPE","EXPLICIT_IDS","FILLRECORD","IGNOREBLANKLINES","IGNOREHEADER","REMOVEQUOTES","ROUNDEC","TIMEFORMAT","TRIMBLANKS","TRUNCATECOLUMNS","COMPROWS","COMPUPDATE","MAXERROR","NOLOAD","STATUPDATE","FORMAT","CSV","DELIMITER","FIXEDWIDTH","SHAPEFILE","AVRO","JSON","PARQUET","ORC","ACCESS_KEY_ID","CREDENTIALS","ENCRYPTED","IAM_ROLE","MASTER_SYMMETRIC_KEY","SECRET_ACCESS_KEY","SESSION_TOKEN","BZIP2","GZIP","LZOP","ZSTD","MANIFEST","READRATIO","REGION","SSH","RAW","AZ64","BYTEDICT","DELTA","DELTA32K","LZO","MOSTLY8","MOSTLY16","MOSTLY32","RUNLENGTH","TEXT255","TEXT32K","CATALOG_ROLE","SECRET_ARN","EXTERNAL","AUTO","EVEN","KEY","PREDICATE","COMPRESSION"],I3=["ARRAY","BIGINT","BPCHAR","CHAR","CHARACTER VARYING","CHARACTER","DECIMAL","INT","INT2","INT4","INT8","INTEGER","NCHAR","NUMERIC","NVARCHAR","SMALLINT","TEXT","VARBYTE","VARCHAR"]});var r0e,i0e,N3,_y,s0e,o0e,a0e,l0e,wR,Ny=W(()=>{Mt();m3();_3();r0e=x(["SELECT [ALL | DISTINCT]"]),i0e=x(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY","HAVING","QUALIFY","PARTITION BY","ORDER BY","LIMIT","OFFSET","INSERT INTO","VALUES","SET"]),N3=x(["CREATE [TEMPORARY | TEMP | LOCAL TEMPORARY | LOCAL TEMP] TABLE [IF NOT EXISTS]"]),_y=x(["CREATE [OR REPLACE | MATERIALIZED] VIEW","UPDATE","DELETE [FROM]","DROP TABLE [IF EXISTS]","ALTER TABLE","ALTER TABLE APPEND","ADD [COLUMN]","DROP [COLUMN]","RENAME TO","RENAME COLUMN","ALTER COLUMN","TYPE","ENCODE","TRUNCATE [TABLE]","ABORT","ALTER DATABASE","ALTER DATASHARE","ALTER DEFAULT PRIVILEGES","ALTER GROUP","ALTER MATERIALIZED VIEW","ALTER PROCEDURE","ALTER SCHEMA","ALTER USER","ANALYSE","ANALYZE","ANALYSE COMPRESSION","ANALYZE COMPRESSION","BEGIN","CALL","CANCEL","CLOSE","COMMIT","COPY","CREATE DATABASE","CREATE DATASHARE","CREATE EXTERNAL FUNCTION","CREATE EXTERNAL SCHEMA","CREATE EXTERNAL TABLE","CREATE FUNCTION","CREATE GROUP","CREATE LIBRARY","CREATE MODEL","CREATE PROCEDURE","CREATE SCHEMA","CREATE USER","DEALLOCATE","DECLARE","DESC DATASHARE","DROP DATABASE","DROP DATASHARE","DROP FUNCTION","DROP GROUP","DROP LIBRARY","DROP MODEL","DROP MATERIALIZED VIEW","DROP PROCEDURE","DROP SCHEMA","DROP USER","DROP VIEW","DROP","EXECUTE","EXPLAIN","FETCH","GRANT","LOCK","PREPARE","REFRESH MATERIALIZED VIEW","RESET","REVOKE","ROLLBACK","SELECT INTO","SET SESSION AUTHORIZATION","SET SESSION CHARACTERISTICS","SHOW","SHOW EXTERNAL TABLE","SHOW MODEL","SHOW DATASHARES","SHOW PROCEDURE","SHOW TABLE","SHOW VIEW","START TRANSACTION","UNLOAD","VACUUM"]),s0e=x(["UNION [ALL]","EXCEPT","INTERSECT","MINUS"]),o0e=x(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL [INNER] JOIN","NATURAL {LEFT | RIGHT | FULL} [OUTER] JOIN"]),a0e=x(["NULL AS","DATA CATALOG","HIVE METASTORE","{ROWS | RANGE} BETWEEN"]),l0e=x([]),wR={name:"redshift",tokenizerOptions:{reservedSelect:r0e,reservedClauses:[...i0e,...N3,..._y],reservedSetOperations:s0e,reservedJoins:o0e,reservedKeywordPhrases:a0e,reservedDataTypePhrases:l0e,reservedKeywords:g3,reservedDataTypes:I3,reservedFunctionNames:A3,extraParens:["[]"],stringTypes:["''-qq"],identTypes:['""-qq'],identChars:{first:"#"},paramTypes:{numbered:["$"]},operators:["^","%","@","|/","||/","&","|","~","<<",">>","||","::"]},formatOptions:{alwaysDenseOperators:["::"],onelineClauses:[...N3,..._y],tabularOnelineClauses:_y}}});var O3,C3,b3=W(()=>{O3=["ADD","AFTER","ALL","ALTER","ANALYZE","AND","ANTI","ANY","ARCHIVE","AS","ASC","AT","AUTHORIZATION","BETWEEN","BOTH","BUCKET","BUCKETS","BY","CACHE","CASCADE","CAST","CHANGE","CHECK","CLEAR","CLUSTER","CLUSTERED","CODEGEN","COLLATE","COLLECTION","COLUMN","COLUMNS","COMMENT","COMMIT","COMPACT","COMPACTIONS","COMPUTE","CONCATENATE","CONSTRAINT","COST","CREATE","CROSS","CUBE","CURRENT","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","DATA","DATABASE","DATABASES","DAY","DBPROPERTIES","DEFINED","DELETE","DELIMITED","DESC","DESCRIBE","DFS","DIRECTORIES","DIRECTORY","DISTINCT","DISTRIBUTE","DIV","DROP","ESCAPE","ESCAPED","EXCEPT","EXCHANGE","EXISTS","EXPORT","EXTENDED","EXTERNAL","EXTRACT","FALSE","FETCH","FIELDS","FILTER","FILEFORMAT","FIRST","FIRST_VALUE","FOLLOWING","FOR","FOREIGN","FORMAT","FORMATTED","FULL","FUNCTION","FUNCTIONS","GLOBAL","GRANT","GROUP","GROUPING","HOUR","IF","IGNORE","IMPORT","IN","INDEX","INDEXES","INNER","INPATH","INPUTFORMAT","INTERSECT","INTO","IS","ITEMS","KEYS","LAST","LAST_VALUE","LATERAL","LAZY","LEADING","LEFT","LIKE","LINES","LIST","LOCAL","LOCATION","LOCK","LOCKS","LOGICAL","MACRO","MATCHED","MERGE","MINUTE","MONTH","MSCK","NAMESPACE","NAMESPACES","NATURAL","NO","NOT","NULL","NULLS","OF","ONLY","OPTION","OPTIONS","OR","ORDER","OUT","OUTER","OUTPUTFORMAT","OVER","OVERLAPS","OVERLAY","OVERWRITE","OWNER","PARTITION","PARTITIONED","PARTITIONS","PERCENT","PLACING","POSITION","PRECEDING","PRIMARY","PRINCIPALS","PROPERTIES","PURGE","QUERY","RANGE","RECORDREADER","RECORDWRITER","RECOVER","REDUCE","REFERENCES","RENAME","REPAIR","REPLACE","RESPECT","RESTRICT","REVOKE","RIGHT","RLIKE","ROLE","ROLES","ROLLBACK","ROLLUP","ROW","ROWS","SCHEMA","SECOND","SELECT","SEMI","SEPARATED","SERDE","SERDEPROPERTIES","SESSION_USER","SETS","SHOW","SKEWED","SOME","SORT","SORTED","START","STATISTICS","STORED","STRATIFY","SUBSTR","SUBSTRING","TABLE","TABLES","TBLPROPERTIES","TEMPORARY","TERMINATED","THEN","TO","TOUCH","TRAILING","TRANSACTION","TRANSACTIONS","TRIM","TRUE","TRUNCATE","UNARCHIVE","UNBOUNDED","UNCACHE","UNIQUE","UNKNOWN","UNLOCK","UNSET","USE","USER","USING","VIEW","WINDOW","YEAR","ANALYSE","ARRAY_ZIP","COALESCE","CONTAINS","CONVERT","DAYS","DAY_HOUR","DAY_MINUTE","DAY_SECOND","DECODE","DEFAULT","DISTINCTROW","ENCODE","EXPLODE","EXPLODE_OUTER","FIXED","GREATEST","GROUP_CONCAT","HOURS","HOUR_MINUTE","HOUR_SECOND","IFNULL","LEAST","LEVEL","MINUTE_SECOND","NULLIF","OFFSET","ON","OPTIMIZE","REGEXP","SEPARATOR","SIZE","TYPE","TYPES","UNSIGNED","VARIABLES","YEAR_MONTH"],C3=["ARRAY","BIGINT","BINARY","BOOLEAN","BYTE","CHAR","DATE","DEC","DECIMAL","DOUBLE","FLOAT","INT","INTEGER","INTERVAL","LONG","MAP","NUMERIC","REAL","SHORT","SMALLINT","STRING","STRUCT","TIMESTAMP_LTZ","TIMESTAMP_NTZ","TIMESTAMP","TINYINT","VARCHAR"]});var y3,w3=W(()=>{y3=["APPROX_COUNT_DISTINCT","APPROX_PERCENTILE","AVG","BIT_AND","BIT_OR","BIT_XOR","BOOL_AND","BOOL_OR","COLLECT_LIST","COLLECT_SET","CORR","COUNT","COUNT","COUNT","COUNT_IF","COUNT_MIN_SKETCH","COVAR_POP","COVAR_SAMP","EVERY","FIRST","FIRST_VALUE","GROUPING","GROUPING_ID","KURTOSIS","LAST","LAST_VALUE","MAX","MAX_BY","MEAN","MIN","MIN_BY","PERCENTILE","PERCENTILE","PERCENTILE_APPROX","SKEWNESS","STD","STDDEV","STDDEV_POP","STDDEV_SAMP","SUM","VAR_POP","VAR_SAMP","VARIANCE","CUME_DIST","DENSE_RANK","LAG","LEAD","NTH_VALUE","NTILE","PERCENT_RANK","RANK","ROW_NUMBER","ARRAY","ARRAY_CONTAINS","ARRAY_DISTINCT","ARRAY_EXCEPT","ARRAY_INTERSECT","ARRAY_JOIN","ARRAY_MAX","ARRAY_MIN","ARRAY_POSITION","ARRAY_REMOVE","ARRAY_REPEAT","ARRAY_UNION","ARRAYS_OVERLAP","ARRAYS_ZIP","FLATTEN","SEQUENCE","SHUFFLE","SLICE","SORT_ARRAY","ELEMENT_AT","ELEMENT_AT","MAP_CONCAT","MAP_ENTRIES","MAP_FROM_ARRAYS","MAP_FROM_ENTRIES","MAP_KEYS","MAP_VALUES","STR_TO_MAP","ADD_MONTHS","CURRENT_DATE","CURRENT_DATE","CURRENT_TIMESTAMP","CURRENT_TIMESTAMP","CURRENT_TIMEZONE","DATE_ADD","DATE_FORMAT","DATE_FROM_UNIX_DATE","DATE_PART","DATE_SUB","DATE_TRUNC","DATEDIFF","DAY","DAYOFMONTH","DAYOFWEEK","DAYOFYEAR","EXTRACT","FROM_UNIXTIME","FROM_UTC_TIMESTAMP","HOUR","LAST_DAY","MAKE_DATE","MAKE_DT_INTERVAL","MAKE_INTERVAL","MAKE_TIMESTAMP","MAKE_YM_INTERVAL","MINUTE","MONTH","MONTHS_BETWEEN","NEXT_DAY","NOW","QUARTER","SECOND","SESSION_WINDOW","TIMESTAMP_MICROS","TIMESTAMP_MILLIS","TIMESTAMP_SECONDS","TO_DATE","TO_TIMESTAMP","TO_UNIX_TIMESTAMP","TO_UTC_TIMESTAMP","TRUNC","UNIX_DATE","UNIX_MICROS","UNIX_MILLIS","UNIX_SECONDS","UNIX_TIMESTAMP","WEEKDAY","WEEKOFYEAR","WINDOW","YEAR","FROM_JSON","GET_JSON_OBJECT","JSON_ARRAY_LENGTH","JSON_OBJECT_KEYS","JSON_TUPLE","SCHEMA_OF_JSON","TO_JSON","ABS","ACOS","ACOSH","AGGREGATE","ARRAY_SORT","ASCII","ASIN","ASINH","ASSERT_TRUE","ATAN","ATAN2","ATANH","BASE64","BIN","BIT_COUNT","BIT_GET","BIT_LENGTH","BROUND","BTRIM","CARDINALITY","CBRT","CEIL","CEILING","CHAR_LENGTH","CHARACTER_LENGTH","CHR","CONCAT","CONCAT_WS","CONV","COS","COSH","COT","CRC32","CURRENT_CATALOG","CURRENT_DATABASE","CURRENT_USER","DEGREES","ELT","EXP","EXPM1","FACTORIAL","FIND_IN_SET","FLOOR","FORALL","FORMAT_NUMBER","FORMAT_STRING","FROM_CSV","GETBIT","HASH","HEX","HYPOT","INITCAP","INLINE","INLINE_OUTER","INPUT_FILE_BLOCK_LENGTH","INPUT_FILE_BLOCK_START","INPUT_FILE_NAME","INSTR","ISNAN","ISNOTNULL","ISNULL","JAVA_METHOD","LCASE","LEFT","LENGTH","LEVENSHTEIN","LN","LOCATE","LOG","LOG10","LOG1P","LOG2","LOWER","LPAD","LTRIM","MAP_FILTER","MAP_ZIP_WITH","MD5","MOD","MONOTONICALLY_INCREASING_ID","NAMED_STRUCT","NANVL","NEGATIVE","NVL","NVL2","OCTET_LENGTH","OVERLAY","PARSE_URL","PI","PMOD","POSEXPLODE","POSEXPLODE_OUTER","POSITION","POSITIVE","POW","POWER","PRINTF","RADIANS","RAISE_ERROR","RAND","RANDN","RANDOM","REFLECT","REGEXP_EXTRACT","REGEXP_EXTRACT_ALL","REGEXP_LIKE","REGEXP_REPLACE","REPEAT","REPLACE","REVERSE","RIGHT","RINT","ROUND","RPAD","RTRIM","SCHEMA_OF_CSV","SENTENCES","SHA","SHA1","SHA2","SHIFTLEFT","SHIFTRIGHT","SHIFTRIGHTUNSIGNED","SIGN","SIGNUM","SIN","SINH","SOUNDEX","SPACE","SPARK_PARTITION_ID","SPLIT","SQRT","STACK","SUBSTR","SUBSTRING","SUBSTRING_INDEX","TAN","TANH","TO_CSV","TRANSFORM_KEYS","TRANSFORM_VALUES","TRANSLATE","TRIM","TRY_ADD","TRY_DIVIDE","TYPEOF","UCASE","UNBASE64","UNHEX","UPPER","UUID","VERSION","WIDTH_BUCKET","XPATH","XPATH_BOOLEAN","XPATH_DOUBLE","XPATH_FLOAT","XPATH_INT","XPATH_LONG","XPATH_NUMBER","XPATH_SHORT","XPATH_STRING","XXHASH64","ZIP_WITH","CAST","COALESCE","NULLIF"]});function p0e(t){return t.map((e,n)=>{let r=t[n-1]||Bi,i=t[n+1]||Bi;return Zr.WINDOW(e)&&i.type===V.OPEN_PAREN?Object.assign(Object.assign({},e),{type:V.RESERVED_FUNCTION_NAME}):e.text==="ITEMS"&&e.type===V.RESERVED_KEYWORD&&!(r.text==="COLLECTION"&&i.text==="TERMINATED")?Object.assign(Object.assign({},e),{type:V.IDENTIFIER,text:e.raw}):e})}var c0e,u0e,L3,Oy,d0e,f0e,E0e,h0e,LR,Cy=W(()=>{Mt();Pr();b3();w3();c0e=x(["SELECT [ALL | DISTINCT]"]),u0e=x(["WITH","FROM","WHERE","GROUP BY","HAVING","WINDOW","PARTITION BY","ORDER BY","SORT BY","CLUSTER BY","DISTRIBUTE BY","LIMIT","INSERT [INTO | OVERWRITE] [TABLE]","VALUES","INSERT OVERWRITE [LOCAL] DIRECTORY","LOAD DATA [LOCAL] INPATH","[OVERWRITE] INTO TABLE"]),L3=x(["CREATE [EXTERNAL] TABLE [IF NOT EXISTS]"]),Oy=x(["CREATE [OR REPLACE] [GLOBAL TEMPORARY | TEMPORARY] VIEW [IF NOT EXISTS]","DROP TABLE [IF EXISTS]","ALTER TABLE","ADD COLUMNS","DROP {COLUMN | COLUMNS}","RENAME TO","RENAME COLUMN","ALTER COLUMN","TRUNCATE TABLE","LATERAL VIEW","ALTER DATABASE","ALTER VIEW","CREATE DATABASE","CREATE FUNCTION","DROP DATABASE","DROP FUNCTION","DROP VIEW","REPAIR TABLE","USE DATABASE","TABLESAMPLE","PIVOT","TRANSFORM","EXPLAIN","ADD FILE","ADD JAR","ANALYZE TABLE","CACHE TABLE","CLEAR CACHE","DESCRIBE DATABASE","DESCRIBE FUNCTION","DESCRIBE QUERY","DESCRIBE TABLE","LIST FILE","LIST JAR","REFRESH","REFRESH TABLE","REFRESH FUNCTION","RESET","SHOW COLUMNS","SHOW CREATE TABLE","SHOW DATABASES","SHOW FUNCTIONS","SHOW PARTITIONS","SHOW TABLE EXTENDED","SHOW TABLES","SHOW TBLPROPERTIES","SHOW VIEWS","UNCACHE TABLE"]),d0e=x(["UNION [ALL | DISTINCT]","EXCEPT [ALL | DISTINCT]","INTERSECT [ALL | DISTINCT]"]),f0e=x(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL [INNER] JOIN","NATURAL {LEFT | RIGHT | FULL} [OUTER] JOIN","[LEFT] {ANTI | SEMI} JOIN","NATURAL [LEFT] {ANTI | SEMI} JOIN"]),E0e=x(["ON DELETE","ON UPDATE","CURRENT ROW","{ROWS | RANGE} BETWEEN"]),h0e=x([]),LR={name:"spark",tokenizerOptions:{reservedSelect:c0e,reservedClauses:[...u0e,...L3,...Oy],reservedSetOperations:d0e,reservedJoins:f0e,reservedKeywordPhrases:E0e,reservedDataTypePhrases:h0e,supportsXor:!0,reservedKeywords:O3,reservedDataTypes:C3,reservedFunctionNames:y3,extraParens:["[]"],stringTypes:["''-bs",'""-bs',{quote:"''-raw",prefixes:["R","X"],requirePrefix:!0},{quote:'""-raw',prefixes:["R","X"],requirePrefix:!0}],identTypes:["``"],identChars:{allowFirstCharNumber:!0},variableTypes:[{quote:"{}",prefixes:["$"],requirePrefix:!0}],operators:["%","~","^","|","&","<=>","==","!","||","->"],postProcess:p0e},formatOptions:{onelineClauses:[...L3,...Oy],tabularOnelineClauses:Oy}}});var D3,P3=W(()=>{D3=["ABS","CHANGES","CHAR","COALESCE","FORMAT","GLOB","HEX","IFNULL","IIF","INSTR","LAST_INSERT_ROWID","LENGTH","LIKE","LIKELIHOOD","LIKELY","LOAD_EXTENSION","LOWER","LTRIM","NULLIF","PRINTF","QUOTE","RANDOM","RANDOMBLOB","REPLACE","ROUND","RTRIM","SIGN","SOUNDEX","SQLITE_COMPILEOPTION_GET","SQLITE_COMPILEOPTION_USED","SQLITE_OFFSET","SQLITE_SOURCE_ID","SQLITE_VERSION","SUBSTR","SUBSTRING","TOTAL_CHANGES","TRIM","TYPEOF","UNICODE","UNLIKELY","UPPER","ZEROBLOB","AVG","COUNT","GROUP_CONCAT","MAX","MIN","SUM","TOTAL","DATE","TIME","DATETIME","JULIANDAY","UNIXEPOCH","STRFTIME","row_number","rank","dense_rank","percent_rank","cume_dist","ntile","lag","lead","first_value","last_value","nth_value","ACOS","ACOSH","ASIN","ASINH","ATAN","ATAN2","ATANH","CEIL","CEILING","COS","COSH","DEGREES","EXP","FLOOR","LN","LOG","LOG","LOG10","LOG2","MOD","PI","POW","POWER","RADIANS","SIN","SINH","SQRT","TAN","TANH","TRUNC","JSON","JSON_ARRAY","JSON_ARRAY_LENGTH","JSON_ARRAY_LENGTH","JSON_EXTRACT","JSON_INSERT","JSON_OBJECT","JSON_PATCH","JSON_REMOVE","JSON_REPLACE","JSON_SET","JSON_TYPE","JSON_TYPE","JSON_VALID","JSON_QUOTE","JSON_GROUP_ARRAY","JSON_GROUP_OBJECT","JSON_EACH","JSON_TREE","CAST"]});var x3,v3,M3=W(()=>{x3=["ABORT","ACTION","ADD","AFTER","ALL","ALTER","AND","ARE","ALWAYS","ANALYZE","AS","ASC","ATTACH","AUTOINCREMENT","BEFORE","BEGIN","BETWEEN","BY","CASCADE","CASE","CAST","CHECK","COLLATE","COLUMN","COMMIT","CONFLICT","CONSTRAINT","CREATE","CROSS","CURRENT","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","DATABASE","DEFAULT","DEFERRABLE","DEFERRED","DELETE","DESC","DETACH","DISTINCT","DO","DROP","EACH","ELSE","END","ESCAPE","EXCEPT","EXCLUDE","EXCLUSIVE","EXISTS","EXPLAIN","FAIL","FILTER","FIRST","FOLLOWING","FOR","FOREIGN","FROM","FULL","GENERATED","GLOB","GROUP","HAVING","IF","IGNORE","IMMEDIATE","IN","INDEX","INDEXED","INITIALLY","INNER","INSERT","INSTEAD","INTERSECT","INTO","IS","ISNULL","JOIN","KEY","LAST","LEFT","LIKE","LIMIT","MATCH","MATERIALIZED","NATURAL","NO","NOT","NOTHING","NOTNULL","NULL","NULLS","OF","OFFSET","ON","ONLY","OPEN","OR","ORDER","OTHERS","OUTER","OVER","PARTITION","PLAN","PRAGMA","PRECEDING","PRIMARY","QUERY","RAISE","RANGE","RECURSIVE","REFERENCES","REGEXP","REINDEX","RELEASE","RENAME","REPLACE","RESTRICT","RETURNING","RIGHT","ROLLBACK","ROW","ROWS","SAVEPOINT","SELECT","SET","TABLE","TEMP","TEMPORARY","THEN","TIES","TO","TRANSACTION","TRIGGER","UNBOUNDED","UNION","UNIQUE","UPDATE","USING","VACUUM","VALUES","VIEW","VIRTUAL","WHEN","WHERE","WINDOW","WITH","WITHOUT"],v3=["ANY","ARRAY","BLOB","CHARACTER","DECIMAL","INT","INTEGER","NATIVE CHARACTER","NCHAR","NUMERIC","NVARCHAR","REAL","TEXT","VARCHAR","VARYING CHARACTER"]});var T0e,S0e,U3,by,R0e,A0e,m0e,g0e,DR,yy=W(()=>{Mt();P3();M3();T0e=x(["SELECT [ALL | DISTINCT]"]),S0e=x(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY","HAVING","WINDOW","PARTITION BY","ORDER BY","LIMIT","OFFSET","INSERT [OR ABORT | OR FAIL | OR IGNORE | OR REPLACE | OR ROLLBACK] INTO","REPLACE INTO","VALUES","SET","RETURNING"]),U3=x(["CREATE [TEMPORARY | TEMP] TABLE [IF NOT EXISTS]"]),by=x(["CREATE [TEMPORARY | TEMP] VIEW [IF NOT EXISTS]","UPDATE [OR ABORT | OR FAIL | OR IGNORE | OR REPLACE | OR ROLLBACK]","ON CONFLICT","DELETE FROM","DROP TABLE [IF EXISTS]","ALTER TABLE","ADD [COLUMN]","DROP [COLUMN]","RENAME [COLUMN]","RENAME TO","SET SCHEMA"]),R0e=x(["UNION [ALL]","EXCEPT","INTERSECT"]),A0e=x(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL [INNER] JOIN","NATURAL {LEFT | RIGHT | FULL} [OUTER] JOIN"]),m0e=x(["ON {UPDATE | DELETE} [SET NULL | SET DEFAULT]","{ROWS | RANGE | GROUPS} BETWEEN","DO UPDATE"]),g0e=x([]),DR={name:"sqlite",tokenizerOptions:{reservedSelect:T0e,reservedClauses:[...S0e,...U3,...by],reservedSetOperations:R0e,reservedJoins:A0e,reservedKeywordPhrases:m0e,reservedDataTypePhrases:g0e,reservedKeywords:x3,reservedDataTypes:v3,reservedFunctionNames:D3,stringTypes:["''-qq",{quote:"''-raw",prefixes:["X"],requirePrefix:!0}],identTypes:['""-qq',"``","[]"],paramTypes:{positional:!0,numbered:["?"],named:[":","@","$"]},operators:["%","~","&","|","<<",">>","==","->","->>","||"]},formatOptions:{onelineClauses:[...U3,...by],tabularOnelineClauses:by}}});var B3,F3=W(()=>{B3=["GROUPING","RANK","DENSE_RANK","PERCENT_RANK","CUME_DIST","ROW_NUMBER","POSITION","OCCURRENCES_REGEX","POSITION_REGEX","EXTRACT","CHAR_LENGTH","CHARACTER_LENGTH","OCTET_LENGTH","CARDINALITY","ABS","MOD","LN","EXP","POWER","SQRT","FLOOR","CEIL","CEILING","WIDTH_BUCKET","SUBSTRING","SUBSTRING_REGEX","UPPER","LOWER","CONVERT","TRANSLATE","TRANSLATE_REGEX","TRIM","OVERLAY","NORMALIZE","SPECIFICTYPE","CURRENT_DATE","CURRENT_TIME","LOCALTIME","CURRENT_TIMESTAMP","LOCALTIMESTAMP","COUNT","AVG","MAX","MIN","SUM","STDDEV_POP","STDDEV_SAMP","VAR_SAMP","VAR_POP","COLLECT","FUSION","INTERSECTION","COVAR_POP","COVAR_SAMP","CORR","REGR_SLOPE","REGR_INTERCEPT","REGR_COUNT","REGR_R2","REGR_AVGX","REGR_AVGY","REGR_SXX","REGR_SYY","REGR_SXY","PERCENTILE_CONT","PERCENTILE_DISC","CAST","COALESCE","NULLIF","ROUND","SIN","COS","TAN","ASIN","ACOS","ATAN"]});var H3,G3,$3=W(()=>{H3=["ALL","ALLOCATE","ALTER","ANY","ARE","AS","ASC","ASENSITIVE","ASYMMETRIC","AT","ATOMIC","AUTHORIZATION","BEGIN","BETWEEN","BOTH","BY","CALL","CALLED","CASCADED","CAST","CHECK","CLOSE","COALESCE","COLLATE","COLUMN","COMMIT","CONDITION","CONNECT","CONSTRAINT","CORRESPONDING","CREATE","CROSS","CUBE","CURRENT","CURRENT_CATALOG","CURRENT_DEFAULT_TRANSFORM_GROUP","CURRENT_PATH","CURRENT_ROLE","CURRENT_SCHEMA","CURRENT_TRANSFORM_GROUP_FOR_TYPE","CURRENT_USER","CURSOR","CYCLE","DEALLOCATE","DAY","DECLARE","DEFAULT","DELETE","DEREF","DESC","DESCRIBE","DETERMINISTIC","DISCONNECT","DISTINCT","DROP","DYNAMIC","EACH","ELEMENT","END-EXEC","ESCAPE","EVERY","EXCEPT","EXEC","EXECUTE","EXISTS","EXTERNAL","FALSE","FETCH","FILTER","FOR","FOREIGN","FREE","FROM","FULL","FUNCTION","GET","GLOBAL","GRANT","GROUP","HAVING","HOLD","HOUR","IDENTITY","IN","INDICATOR","INNER","INOUT","INSENSITIVE","INSERT","INTERSECT","INTO","IS","LANGUAGE","LARGE","LATERAL","LEADING","LEFT","LIKE","LIKE_REGEX","LOCAL","MATCH","MEMBER","MERGE","METHOD","MINUTE","MODIFIES","MODULE","MONTH","NATURAL","NEW","NO","NONE","NOT","NULL","NULLIF","OF","OLD","ON","ONLY","OPEN","ORDER","OUT","OUTER","OVER","OVERLAPS","PARAMETER","PARTITION","PRECISION","PREPARE","PRIMARY","PROCEDURE","RANGE","READS","REAL","RECURSIVE","REF","REFERENCES","REFERENCING","RELEASE","RESULT","RETURN","RETURNS","REVOKE","RIGHT","ROLLBACK","ROLLUP","ROW","ROWS","SAVEPOINT","SCOPE","SCROLL","SEARCH","SECOND","SELECT","SENSITIVE","SESSION_USER","SET","SIMILAR","SOME","SPECIFIC","SQL","SQLEXCEPTION","SQLSTATE","SQLWARNING","START","STATIC","SUBMULTISET","SYMMETRIC","SYSTEM","SYSTEM_USER","TABLE","TABLESAMPLE","THEN","TIMEZONE_HOUR","TIMEZONE_MINUTE","TO","TRAILING","TRANSLATION","TREAT","TRIGGER","TRUE","UESCAPE","UNION","UNIQUE","UNKNOWN","UNNEST","UPDATE","USER","USING","VALUE","VALUES","WHENEVER","WINDOW","WITHIN","WITHOUT","YEAR"],G3=["ARRAY","BIGINT","BINARY LARGE OBJECT","BINARY VARYING","BINARY","BLOB","BOOLEAN","CHAR LARGE OBJECT","CHAR VARYING","CHAR","CHARACTER LARGE OBJECT","CHARACTER VARYING","CHARACTER","CLOB","DATE","DEC","DECIMAL","DOUBLE","FLOAT","INT","INTEGER","INTERVAL","MULTISET","NATIONAL CHAR VARYING","NATIONAL CHAR","NATIONAL CHARACTER LARGE OBJECT","NATIONAL CHARACTER VARYING","NATIONAL CHARACTER","NCHAR LARGE OBJECT","NCHAR VARYING","NCHAR","NCLOB","NUMERIC","SMALLINT","TIME","TIMESTAMP","VARBINARY","VARCHAR"]});var I0e,_0e,W3,wy,N0e,O0e,C0e,b0e,PR,Ly=W(()=>{Mt();F3();$3();I0e=x(["SELECT [ALL | DISTINCT]"]),_0e=x(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY [ALL | DISTINCT]","HAVING","WINDOW","PARTITION BY","ORDER BY","LIMIT","OFFSET","FETCH {FIRST | NEXT}","INSERT INTO","VALUES","SET"]),W3=x(["CREATE [GLOBAL TEMPORARY | LOCAL TEMPORARY] TABLE"]),wy=x(["CREATE [RECURSIVE] VIEW","UPDATE","WHERE CURRENT OF","DELETE FROM","DROP TABLE","ALTER TABLE","ADD COLUMN","DROP [COLUMN]","RENAME COLUMN","RENAME TO","ALTER [COLUMN]","{SET | DROP} DEFAULT","ADD SCOPE","DROP SCOPE {CASCADE | RESTRICT}","RESTART WITH","TRUNCATE TABLE","SET SCHEMA"]),N0e=x(["UNION [ALL | DISTINCT]","EXCEPT [ALL | DISTINCT]","INTERSECT [ALL | DISTINCT]"]),O0e=x(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL [INNER] JOIN","NATURAL {LEFT | RIGHT | FULL} [OUTER] JOIN"]),C0e=x(["ON {UPDATE | DELETE} [SET NULL | SET DEFAULT]","{ROWS | RANGE} BETWEEN"]),b0e=x([]),PR={name:"sql",tokenizerOptions:{reservedSelect:I0e,reservedClauses:[..._0e,...W3,...wy],reservedSetOperations:N0e,reservedJoins:O0e,reservedKeywordPhrases:C0e,reservedDataTypePhrases:b0e,reservedKeywords:H3,reservedDataTypes:G3,reservedFunctionNames:B3,stringTypes:[{quote:"''-qq-bs",prefixes:["N","U&"]},{quote:"''-raw",prefixes:["X"],requirePrefix:!0}],identTypes:['""-qq',"``"],paramTypes:{positional:!0},operators:["||"]},formatOptions:{onelineClauses:[...W3,...wy],tabularOnelineClauses:wy}}});var k3,Y3=W(()=>{k3=["ABS","ACOS","ALL_MATCH","ANY_MATCH","APPROX_DISTINCT","APPROX_MOST_FREQUENT","APPROX_PERCENTILE","APPROX_SET","ARBITRARY","ARRAYS_OVERLAP","ARRAY_AGG","ARRAY_DISTINCT","ARRAY_EXCEPT","ARRAY_INTERSECT","ARRAY_JOIN","ARRAY_MAX","ARRAY_MIN","ARRAY_POSITION","ARRAY_REMOVE","ARRAY_SORT","ARRAY_UNION","ASIN","ATAN","ATAN2","AT_TIMEZONE","AVG","BAR","BETA_CDF","BING_TILE","BING_TILES_AROUND","BING_TILE_AT","BING_TILE_COORDINATES","BING_TILE_POLYGON","BING_TILE_QUADKEY","BING_TILE_ZOOM_LEVEL","BITWISE_AND","BITWISE_AND_AGG","BITWISE_LEFT_SHIFT","BITWISE_NOT","BITWISE_OR","BITWISE_OR_AGG","BITWISE_RIGHT_SHIFT","BITWISE_RIGHT_SHIFT_ARITHMETIC","BITWISE_XOR","BIT_COUNT","BOOL_AND","BOOL_OR","CARDINALITY","CAST","CBRT","CEIL","CEILING","CHAR2HEXINT","CHECKSUM","CHR","CLASSIFY","COALESCE","CODEPOINT","COLOR","COMBINATIONS","CONCAT","CONCAT_WS","CONTAINS","CONTAINS_SEQUENCE","CONVEX_HULL_AGG","CORR","COS","COSH","COSINE_SIMILARITY","COUNT","COUNT_IF","COVAR_POP","COVAR_SAMP","CRC32","CUME_DIST","CURRENT_CATALOG","CURRENT_DATE","CURRENT_GROUPS","CURRENT_SCHEMA","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_TIMEZONE","CURRENT_USER","DATE","DATE_ADD","DATE_DIFF","DATE_FORMAT","DATE_PARSE","DATE_TRUNC","DAY","DAY_OF_MONTH","DAY_OF_WEEK","DAY_OF_YEAR","DEGREES","DENSE_RANK","DOW","DOY","E","ELEMENT_AT","EMPTY_APPROX_SET","EVALUATE_CLASSIFIER_PREDICTIONS","EVERY","EXP","EXTRACT","FEATURES","FILTER","FIRST_VALUE","FLATTEN","FLOOR","FORMAT","FORMAT_DATETIME","FORMAT_NUMBER","FROM_BASE","FROM_BASE32","FROM_BASE64","FROM_BASE64URL","FROM_BIG_ENDIAN_32","FROM_BIG_ENDIAN_64","FROM_ENCODED_POLYLINE","FROM_GEOJSON_GEOMETRY","FROM_HEX","FROM_IEEE754_32","FROM_IEEE754_64","FROM_ISO8601_DATE","FROM_ISO8601_TIMESTAMP","FROM_ISO8601_TIMESTAMP_NANOS","FROM_UNIXTIME","FROM_UNIXTIME_NANOS","FROM_UTF8","GEOMETRIC_MEAN","GEOMETRY_FROM_HADOOP_SHAPE","GEOMETRY_INVALID_REASON","GEOMETRY_NEAREST_POINTS","GEOMETRY_TO_BING_TILES","GEOMETRY_UNION","GEOMETRY_UNION_AGG","GREATEST","GREAT_CIRCLE_DISTANCE","HAMMING_DISTANCE","HASH_COUNTS","HISTOGRAM","HMAC_MD5","HMAC_SHA1","HMAC_SHA256","HMAC_SHA512","HOUR","HUMAN_READABLE_SECONDS","IF","INDEX","INFINITY","INTERSECTION_CARDINALITY","INVERSE_BETA_CDF","INVERSE_NORMAL_CDF","IS_FINITE","IS_INFINITE","IS_JSON_SCALAR","IS_NAN","JACCARD_INDEX","JSON_ARRAY_CONTAINS","JSON_ARRAY_GET","JSON_ARRAY_LENGTH","JSON_EXISTS","JSON_EXTRACT","JSON_EXTRACT_SCALAR","JSON_FORMAT","JSON_PARSE","JSON_QUERY","JSON_SIZE","JSON_VALUE","KURTOSIS","LAG","LAST_DAY_OF_MONTH","LAST_VALUE","LEAD","LEARN_CLASSIFIER","LEARN_LIBSVM_CLASSIFIER","LEARN_LIBSVM_REGRESSOR","LEARN_REGRESSOR","LEAST","LENGTH","LEVENSHTEIN_DISTANCE","LINE_INTERPOLATE_POINT","LINE_INTERPOLATE_POINTS","LINE_LOCATE_POINT","LISTAGG","LN","LOCALTIME","LOCALTIMESTAMP","LOG","LOG10","LOG2","LOWER","LPAD","LTRIM","LUHN_CHECK","MAKE_SET_DIGEST","MAP","MAP_AGG","MAP_CONCAT","MAP_ENTRIES","MAP_FILTER","MAP_FROM_ENTRIES","MAP_KEYS","MAP_UNION","MAP_VALUES","MAP_ZIP_WITH","MAX","MAX_BY","MD5","MERGE","MERGE_SET_DIGEST","MILLISECOND","MIN","MINUTE","MIN_BY","MOD","MONTH","MULTIMAP_AGG","MULTIMAP_FROM_ENTRIES","MURMUR3","NAN","NGRAMS","NONE_MATCH","NORMALIZE","NORMAL_CDF","NOW","NTH_VALUE","NTILE","NULLIF","NUMERIC_HISTOGRAM","OBJECTID","OBJECTID_TIMESTAMP","PARSE_DATA_SIZE","PARSE_DATETIME","PARSE_DURATION","PERCENT_RANK","PI","POSITION","POW","POWER","QDIGEST_AGG","QUARTER","RADIANS","RAND","RANDOM","RANK","REDUCE","REDUCE_AGG","REGEXP_COUNT","REGEXP_EXTRACT","REGEXP_EXTRACT_ALL","REGEXP_LIKE","REGEXP_POSITION","REGEXP_REPLACE","REGEXP_SPLIT","REGRESS","REGR_INTERCEPT","REGR_SLOPE","RENDER","REPEAT","REPLACE","REVERSE","RGB","ROUND","ROW_NUMBER","RPAD","RTRIM","SECOND","SEQUENCE","SHA1","SHA256","SHA512","SHUFFLE","SIGN","SIMPLIFY_GEOMETRY","SIN","SKEWNESS","SLICE","SOUNDEX","SPATIAL_PARTITIONING","SPATIAL_PARTITIONS","SPLIT","SPLIT_PART","SPLIT_TO_MAP","SPLIT_TO_MULTIMAP","SPOOKY_HASH_V2_32","SPOOKY_HASH_V2_64","SQRT","STARTS_WITH","STDDEV","STDDEV_POP","STDDEV_SAMP","STRPOS","ST_AREA","ST_ASBINARY","ST_ASTEXT","ST_BOUNDARY","ST_BUFFER","ST_CENTROID","ST_CONTAINS","ST_CONVEXHULL","ST_COORDDIM","ST_CROSSES","ST_DIFFERENCE","ST_DIMENSION","ST_DISJOINT","ST_DISTANCE","ST_ENDPOINT","ST_ENVELOPE","ST_ENVELOPEASPTS","ST_EQUALS","ST_EXTERIORRING","ST_GEOMETRIES","ST_GEOMETRYFROMTEXT","ST_GEOMETRYN","ST_GEOMETRYTYPE","ST_GEOMFROMBINARY","ST_INTERIORRINGN","ST_INTERIORRINGS","ST_INTERSECTION","ST_INTERSECTS","ST_ISCLOSED","ST_ISEMPTY","ST_ISRING","ST_ISSIMPLE","ST_ISVALID","ST_LENGTH","ST_LINEFROMTEXT","ST_LINESTRING","ST_MULTIPOINT","ST_NUMGEOMETRIES","ST_NUMINTERIORRING","ST_NUMPOINTS","ST_OVERLAPS","ST_POINT","ST_POINTN","ST_POINTS","ST_POLYGON","ST_RELATE","ST_STARTPOINT","ST_SYMDIFFERENCE","ST_TOUCHES","ST_UNION","ST_WITHIN","ST_X","ST_XMAX","ST_XMIN","ST_Y","ST_YMAX","ST_YMIN","SUBSTR","SUBSTRING","SUM","TAN","TANH","TDIGEST_AGG","TIMESTAMP_OBJECTID","TIMEZONE_HOUR","TIMEZONE_MINUTE","TO_BASE","TO_BASE32","TO_BASE64","TO_BASE64URL","TO_BIG_ENDIAN_32","TO_BIG_ENDIAN_64","TO_CHAR","TO_DATE","TO_ENCODED_POLYLINE","TO_GEOJSON_GEOMETRY","TO_GEOMETRY","TO_HEX","TO_IEEE754_32","TO_IEEE754_64","TO_ISO8601","TO_MILLISECONDS","TO_SPHERICAL_GEOGRAPHY","TO_TIMESTAMP","TO_UNIXTIME","TO_UTF8","TRANSFORM","TRANSFORM_KEYS","TRANSFORM_VALUES","TRANSLATE","TRIM","TRIM_ARRAY","TRUNCATE","TRY","TRY_CAST","TYPEOF","UPPER","URL_DECODE","URL_ENCODE","URL_EXTRACT_FRAGMENT","URL_EXTRACT_HOST","URL_EXTRACT_PARAMETER","URL_EXTRACT_PATH","URL_EXTRACT_PORT","URL_EXTRACT_PROTOCOL","URL_EXTRACT_QUERY","UUID","VALUES_AT_QUANTILES","VALUE_AT_QUANTILE","VARIANCE","VAR_POP","VAR_SAMP","VERSION","WEEK","WEEK_OF_YEAR","WIDTH_BUCKET","WILSON_INTERVAL_LOWER","WILSON_INTERVAL_UPPER","WITH_TIMEZONE","WORD_STEM","XXHASH64","YEAR","YEAR_OF_WEEK","YOW","ZIP","ZIP_WITH","CLASSIFIER","FIRST","LAST","MATCH_NUMBER","NEXT","PERMUTE","PREV"]});var V3,q3,X3=W(()=>{V3=["ABSENT","ADD","ADMIN","AFTER","ALL","ALTER","ANALYZE","AND","ANY","AS","ASC","AT","AUTHORIZATION","BERNOULLI","BETWEEN","BOTH","BY","CALL","CASCADE","CASE","CATALOGS","COLUMN","COLUMNS","COMMENT","COMMIT","COMMITTED","CONDITIONAL","CONSTRAINT","COPARTITION","CREATE","CROSS","CUBE","CURRENT","CURRENT_PATH","CURRENT_ROLE","DATA","DEALLOCATE","DEFAULT","DEFINE","DEFINER","DELETE","DENY","DESC","DESCRIBE","DESCRIPTOR","DISTINCT","DISTRIBUTED","DOUBLE","DROP","ELSE","EMPTY","ENCODING","END","ERROR","ESCAPE","EXCEPT","EXCLUDING","EXECUTE","EXISTS","EXPLAIN","FALSE","FETCH","FINAL","FIRST","FOLLOWING","FOR","FROM","FULL","FUNCTIONS","GRANT","GRANTED","GRANTS","GRAPHVIZ","GROUP","GROUPING","GROUPS","HAVING","IGNORE","IN","INCLUDING","INITIAL","INNER","INPUT","INSERT","INTERSECT","INTERVAL","INTO","INVOKER","IO","IS","ISOLATION","JOIN","JSON","JSON_ARRAY","JSON_OBJECT","KEEP","KEY","KEYS","LAST","LATERAL","LEADING","LEFT","LEVEL","LIKE","LIMIT","LOCAL","LOGICAL","MATCH","MATCHED","MATCHES","MATCH_RECOGNIZE","MATERIALIZED","MEASURES","NATURAL","NEXT","NFC","NFD","NFKC","NFKD","NO","NONE","NOT","NULL","NULLS","OBJECT","OF","OFFSET","OMIT","ON","ONE","ONLY","OPTION","OR","ORDER","ORDINALITY","OUTER","OUTPUT","OVER","OVERFLOW","PARTITION","PARTITIONS","PASSING","PAST","PATH","PATTERN","PER","PERMUTE","PRECEDING","PRECISION","PREPARE","PRIVILEGES","PROPERTIES","PRUNE","QUOTES","RANGE","READ","RECURSIVE","REFRESH","RENAME","REPEATABLE","RESET","RESPECT","RESTRICT","RETURNING","REVOKE","RIGHT","ROLE","ROLES","ROLLBACK","ROLLUP","ROW","ROWS","RUNNING","SCALAR","SCHEMA","SCHEMAS","SECURITY","SEEK","SELECT","SERIALIZABLE","SESSION","SET","SETS","SHOW","SKIP","SOME","START","STATS","STRING","SUBSET","SYSTEM","TABLE","TABLES","TABLESAMPLE","TEXT","THEN","TIES","TIME","TIMESTAMP","TO","TRAILING","TRANSACTION","TRUE","TYPE","UESCAPE","UNBOUNDED","UNCOMMITTED","UNCONDITIONAL","UNION","UNIQUE","UNKNOWN","UNMATCHED","UNNEST","UPDATE","USE","USER","USING","UTF16","UTF32","UTF8","VALIDATE","VALUE","VALUES","VERBOSE","VIEW","WHEN","WHERE","WINDOW","WITH","WITHIN","WITHOUT","WORK","WRAPPER","WRITE","ZONE"],q3=["BIGINT","INT","INTEGER","SMALLINT","TINYINT","BOOLEAN","DATE","DECIMAL","REAL","DOUBLE","HYPERLOGLOG","QDIGEST","TDIGEST","P4HYPERLOGLOG","INTERVAL","TIMESTAMP","TIME","VARBINARY","VARCHAR","CHAR","ROW","ARRAY","MAP","JSON","JSON2016","IPADDRESS","GEOMETRY","UUID","SETDIGEST","JONIREGEXP","RE2JREGEXP","LIKEPATTERN","COLOR","CODEPOINTS","FUNCTION","JSONPATH"]});var y0e,w0e,z3,Dy,L0e,D0e,P0e,x0e,xR,Py=W(()=>{Mt();Y3();X3();y0e=x(["SELECT [ALL | DISTINCT]"]),w0e=x(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY [ALL | DISTINCT]","HAVING","WINDOW","PARTITION BY","ORDER BY","LIMIT","OFFSET","FETCH {FIRST | NEXT}","INSERT INTO","VALUES","SET","MATCH_RECOGNIZE","MEASURES","ONE ROW PER MATCH","ALL ROWS PER MATCH","AFTER MATCH","PATTERN","SUBSET","DEFINE"]),z3=x(["CREATE TABLE [IF NOT EXISTS]"]),Dy=x(["CREATE [OR REPLACE] [MATERIALIZED] VIEW","UPDATE","DELETE FROM","DROP TABLE [IF EXISTS]","ALTER TABLE [IF EXISTS]","ADD COLUMN [IF NOT EXISTS]","DROP COLUMN [IF EXISTS]","RENAME COLUMN [IF EXISTS]","RENAME TO","SET AUTHORIZATION [USER | ROLE]","SET PROPERTIES","EXECUTE","TRUNCATE TABLE","ALTER SCHEMA","ALTER MATERIALIZED VIEW","ALTER VIEW","CREATE SCHEMA","CREATE ROLE","DROP SCHEMA","DROP MATERIALIZED VIEW","DROP VIEW","DROP ROLE","EXPLAIN","ANALYZE","EXPLAIN ANALYZE","EXPLAIN ANALYZE VERBOSE","USE","DESCRIBE INPUT","DESCRIBE OUTPUT","REFRESH MATERIALIZED VIEW","RESET SESSION","SET SESSION","SET PATH","SET TIME ZONE","SHOW GRANTS","SHOW CREATE TABLE","SHOW CREATE SCHEMA","SHOW CREATE VIEW","SHOW CREATE MATERIALIZED VIEW","SHOW TABLES","SHOW SCHEMAS","SHOW CATALOGS","SHOW COLUMNS","SHOW STATS FOR","SHOW ROLES","SHOW CURRENT ROLES","SHOW ROLE GRANTS","SHOW FUNCTIONS","SHOW SESSION"]),L0e=x(["UNION [ALL | DISTINCT]","EXCEPT [ALL | DISTINCT]","INTERSECT [ALL | DISTINCT]"]),D0e=x(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL [INNER] JOIN","NATURAL {LEFT | RIGHT | FULL} [OUTER] JOIN"]),P0e=x(["{ROWS | RANGE | GROUPS} BETWEEN","IS [NOT] DISTINCT FROM"]),x0e=x([]),xR={name:"trino",tokenizerOptions:{reservedSelect:y0e,reservedClauses:[...w0e,...z3,...Dy],reservedSetOperations:L0e,reservedJoins:D0e,reservedKeywordPhrases:P0e,reservedDataTypePhrases:x0e,reservedKeywords:V3,reservedDataTypes:q3,reservedFunctionNames:k3,extraParens:["[]","{}"],stringTypes:[{quote:"''-qq",prefixes:["U&"]},{quote:"''-raw",prefixes:["X"],requirePrefix:!0}],identTypes:['""-qq'],paramTypes:{positional:!0},operators:["%","->","=>",":","||","|","^","$"]},formatOptions:{onelineClauses:[...z3,...Dy],tabularOnelineClauses:Dy}}});var j3,K3=W(()=>{j3=["APPROX_COUNT_DISTINCT","AVG","CHECKSUM_AGG","COUNT","COUNT_BIG","GROUPING","GROUPING_ID","MAX","MIN","STDEV","STDEVP","SUM","VAR","VARP","CUME_DIST","FIRST_VALUE","LAG","LAST_VALUE","LEAD","PERCENTILE_CONT","PERCENTILE_DISC","PERCENT_RANK","Collation - COLLATIONPROPERTY","Collation - TERTIARY_WEIGHTS","@@DBTS","@@LANGID","@@LANGUAGE","@@LOCK_TIMEOUT","@@MAX_CONNECTIONS","@@MAX_PRECISION","@@NESTLEVEL","@@OPTIONS","@@REMSERVER","@@SERVERNAME","@@SERVICENAME","@@SPID","@@TEXTSIZE","@@VERSION","CAST","CONVERT","PARSE","TRY_CAST","TRY_CONVERT","TRY_PARSE","ASYMKEY_ID","ASYMKEYPROPERTY","CERTPROPERTY","CERT_ID","CRYPT_GEN_RANDOM","DECRYPTBYASYMKEY","DECRYPTBYCERT","DECRYPTBYKEY","DECRYPTBYKEYAUTOASYMKEY","DECRYPTBYKEYAUTOCERT","DECRYPTBYPASSPHRASE","ENCRYPTBYASYMKEY","ENCRYPTBYCERT","ENCRYPTBYKEY","ENCRYPTBYPASSPHRASE","HASHBYTES","IS_OBJECTSIGNED","KEY_GUID","KEY_ID","KEY_NAME","SIGNBYASYMKEY","SIGNBYCERT","SYMKEYPROPERTY","VERIFYSIGNEDBYCERT","VERIFYSIGNEDBYASYMKEY","@@CURSOR_ROWS","@@FETCH_STATUS","CURSOR_STATUS","DATALENGTH","IDENT_CURRENT","IDENT_INCR","IDENT_SEED","IDENTITY","SQL_VARIANT_PROPERTY","@@DATEFIRST","CURRENT_TIMESTAMP","CURRENT_TIMEZONE","CURRENT_TIMEZONE_ID","DATEADD","DATEDIFF","DATEDIFF_BIG","DATEFROMPARTS","DATENAME","DATEPART","DATETIME2FROMPARTS","DATETIMEFROMPARTS","DATETIMEOFFSETFROMPARTS","DAY","EOMONTH","GETDATE","GETUTCDATE","ISDATE","MONTH","SMALLDATETIMEFROMPARTS","SWITCHOFFSET","SYSDATETIME","SYSDATETIMEOFFSET","SYSUTCDATETIME","TIMEFROMPARTS","TODATETIMEOFFSET","YEAR","JSON","ISJSON","JSON_VALUE","JSON_QUERY","JSON_MODIFY","ABS","ACOS","ASIN","ATAN","ATN2","CEILING","COS","COT","DEGREES","EXP","FLOOR","LOG","LOG10","PI","POWER","RADIANS","RAND","ROUND","SIGN","SIN","SQRT","SQUARE","TAN","CHOOSE","GREATEST","IIF","LEAST","@@PROCID","APP_NAME","APPLOCK_MODE","APPLOCK_TEST","ASSEMBLYPROPERTY","COL_LENGTH","COL_NAME","COLUMNPROPERTY","DATABASEPROPERTYEX","DB_ID","DB_NAME","FILE_ID","FILE_IDEX","FILE_NAME","FILEGROUP_ID","FILEGROUP_NAME","FILEGROUPPROPERTY","FILEPROPERTY","FILEPROPERTYEX","FULLTEXTCATALOGPROPERTY","FULLTEXTSERVICEPROPERTY","INDEX_COL","INDEXKEY_PROPERTY","INDEXPROPERTY","NEXT VALUE FOR","OBJECT_DEFINITION","OBJECT_ID","OBJECT_NAME","OBJECT_SCHEMA_NAME","OBJECTPROPERTY","OBJECTPROPERTYEX","ORIGINAL_DB_NAME","PARSENAME","SCHEMA_ID","SCHEMA_NAME","SCOPE_IDENTITY","SERVERPROPERTY","STATS_DATE","TYPE_ID","TYPE_NAME","TYPEPROPERTY","DENSE_RANK","NTILE","RANK","ROW_NUMBER","PUBLISHINGSERVERNAME","CERTENCODED","CERTPRIVATEKEY","CURRENT_USER","DATABASE_PRINCIPAL_ID","HAS_DBACCESS","HAS_PERMS_BY_NAME","IS_MEMBER","IS_ROLEMEMBER","IS_SRVROLEMEMBER","LOGINPROPERTY","ORIGINAL_LOGIN","PERMISSIONS","PWDENCRYPT","PWDCOMPARE","SESSION_USER","SESSIONPROPERTY","SUSER_ID","SUSER_NAME","SUSER_SID","SUSER_SNAME","SYSTEM_USER","USER","USER_ID","USER_NAME","ASCII","CHARINDEX","CONCAT","CONCAT_WS","DIFFERENCE","FORMAT","LEFT","LEN","LOWER","LTRIM","PATINDEX","QUOTENAME","REPLACE","REPLICATE","REVERSE","RIGHT","RTRIM","SOUNDEX","SPACE","STR","STRING_AGG","STRING_ESCAPE","STUFF","SUBSTRING","TRANSLATE","TRIM","UNICODE","UPPER","$PARTITION","@@ERROR","@@IDENTITY","@@PACK_RECEIVED","@@ROWCOUNT","@@TRANCOUNT","BINARY_CHECKSUM","CHECKSUM","COMPRESS","CONNECTIONPROPERTY","CONTEXT_INFO","CURRENT_REQUEST_ID","CURRENT_TRANSACTION_ID","DECOMPRESS","ERROR_LINE","ERROR_MESSAGE","ERROR_NUMBER","ERROR_PROCEDURE","ERROR_SEVERITY","ERROR_STATE","FORMATMESSAGE","GET_FILESTREAM_TRANSACTION_CONTEXT","GETANSINULL","HOST_ID","HOST_NAME","ISNULL","ISNUMERIC","MIN_ACTIVE_ROWVERSION","NEWID","NEWSEQUENTIALID","ROWCOUNT_BIG","SESSION_CONTEXT","XACT_STATE","@@CONNECTIONS","@@CPU_BUSY","@@IDLE","@@IO_BUSY","@@PACK_SENT","@@PACKET_ERRORS","@@TIMETICKS","@@TOTAL_ERRORS","@@TOTAL_READ","@@TOTAL_WRITE","TEXTPTR","TEXTVALID","COLUMNS_UPDATED","EVENTDATA","TRIGGER_NESTLEVEL","UPDATE","COALESCE","NULLIF"]});var J3,Q3,Z3=W(()=>{J3=["ADD","ALL","ALTER","AND","ANY","AS","ASC","AUTHORIZATION","BACKUP","BEGIN","BETWEEN","BREAK","BROWSE","BULK","BY","CASCADE","CHECK","CHECKPOINT","CLOSE","CLUSTERED","COALESCE","COLLATE","COLUMN","COMMIT","COMPUTE","CONSTRAINT","CONTAINS","CONTAINSTABLE","CONTINUE","CONVERT","CREATE","CROSS","CURRENT","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURSOR","DATABASE","DBCC","DEALLOCATE","DECLARE","DEFAULT","DELETE","DENY","DESC","DISK","DISTINCT","DISTRIBUTED","DROP","DUMP","ERRLVL","ESCAPE","EXEC","EXECUTE","EXISTS","EXIT","EXTERNAL","FETCH","FILE","FILLFACTOR","FOR","FOREIGN","FREETEXT","FREETEXTTABLE","FROM","FULL","FUNCTION","GOTO","GRANT","GROUP","HAVING","HOLDLOCK","IDENTITY","IDENTITYCOL","IDENTITY_INSERT","IF","IN","INDEX","INNER","INSERT","INTERSECT","INTO","IS","JOIN","KEY","KILL","LEFT","LIKE","LINENO","LOAD","MERGE","NOCHECK","NONCLUSTERED","NOT","NULL","NULLIF","OF","OFF","OFFSETS","ON","OPEN","OPENDATASOURCE","OPENQUERY","OPENROWSET","OPENXML","OPTION","OR","ORDER","OUTER","OVER","PERCENT","PIVOT","PLAN","PRIMARY","PRINT","PROC","PROCEDURE","PUBLIC","RAISERROR","READ","READTEXT","RECONFIGURE","REFERENCES","REPLICATION","RESTORE","RESTRICT","RETURN","REVERT","REVOKE","RIGHT","ROLLBACK","ROWCOUNT","ROWGUIDCOL","RULE","SAVE","SCHEMA","SECURITYAUDIT","SELECT","SEMANTICKEYPHRASETABLE","SEMANTICSIMILARITYDETAILSTABLE","SEMANTICSIMILARITYTABLE","SESSION_USER","SET","SETUSER","SHUTDOWN","SOME","STATISTICS","SYSTEM_USER","TABLE","TABLESAMPLE","TEXTSIZE","THEN","TO","TOP","TRAN","TRANSACTION","TRIGGER","TRUNCATE","TRY_CONVERT","TSEQUAL","UNION","UNIQUE","UNPIVOT","UPDATE","UPDATETEXT","USE","USER","VALUES","VIEW","WAITFOR","WHERE","WHILE","WITH","WITHIN GROUP","WRITETEXT","$ACTION"],Q3=["BINARY","BIT","CHAR","CHAR","CHARACTER","DATE","DATETIME2","DATETIMEOFFSET","DEC","DECIMAL","DOUBLE","FLOAT","INT","INTEGER","NATIONAL","NCHAR","NUMERIC","NVARCHAR","PRECISION","REAL","SMALLINT","TIME","TIMESTAMP","VARBINARY","VARCHAR"]});var v0e,M0e,eK,xy,U0e,B0e,F0e,H0e,vR,vy=W(()=>{Mt();K3();Z3();v0e=x(["SELECT [ALL | DISTINCT]"]),M0e=x(["WITH","INTO","FROM","WHERE","GROUP BY","HAVING","WINDOW","PARTITION BY","ORDER BY","OFFSET","FETCH {FIRST | NEXT}","FOR {BROWSE | XML | JSON}","OPTION","INSERT [INTO]","VALUES","SET","MERGE [INTO]","WHEN [NOT] MATCHED [BY TARGET | BY SOURCE] [THEN]","UPDATE SET"]),eK=x(["CREATE TABLE"]),xy=x(["CREATE [OR ALTER] [MATERIALIZED] VIEW","UPDATE","WHERE CURRENT OF","DELETE [FROM]","DROP TABLE [IF EXISTS]","ALTER TABLE","ADD","DROP COLUMN [IF EXISTS]","ALTER COLUMN","TRUNCATE TABLE","CREATE [UNIQUE] [CLUSTERED] INDEX","CREATE DATABASE","ALTER DATABASE","DROP DATABASE [IF EXISTS]","CREATE [OR ALTER] [PARTITION] {FUNCTION | PROCEDURE | PROC}","ALTER [PARTITION] {FUNCTION | PROCEDURE | PROC}","DROP [PARTITION] {FUNCTION | PROCEDURE | PROC} [IF EXISTS]","GO","USE","ADD SENSITIVITY CLASSIFICATION","ADD SIGNATURE","AGGREGATE","ANSI_DEFAULTS","ANSI_NULLS","ANSI_NULL_DFLT_OFF","ANSI_NULL_DFLT_ON","ANSI_PADDING","ANSI_WARNINGS","APPLICATION ROLE","ARITHABORT","ARITHIGNORE","ASSEMBLY","ASYMMETRIC KEY","AUTHORIZATION","AVAILABILITY GROUP","BACKUP","BACKUP CERTIFICATE","BACKUP MASTER KEY","BACKUP SERVICE MASTER KEY","BEGIN CONVERSATION TIMER","BEGIN DIALOG CONVERSATION","BROKER PRIORITY","BULK INSERT","CERTIFICATE","CLOSE MASTER KEY","CLOSE SYMMETRIC KEY","COLUMN ENCRYPTION KEY","COLUMN MASTER KEY","COLUMNSTORE INDEX","CONCAT_NULL_YIELDS_NULL","CONTEXT_INFO","CONTRACT","CREDENTIAL","CRYPTOGRAPHIC PROVIDER","CURSOR_CLOSE_ON_COMMIT","DATABASE","DATABASE AUDIT SPECIFICATION","DATABASE ENCRYPTION KEY","DATABASE HADR","DATABASE SCOPED CONFIGURATION","DATABASE SCOPED CREDENTIAL","DATABASE SET","DATEFIRST","DATEFORMAT","DEADLOCK_PRIORITY","DENY","DENY XML","DISABLE TRIGGER","ENABLE TRIGGER","END CONVERSATION","ENDPOINT","EVENT NOTIFICATION","EVENT SESSION","EXECUTE AS","EXTERNAL DATA SOURCE","EXTERNAL FILE FORMAT","EXTERNAL LANGUAGE","EXTERNAL LIBRARY","EXTERNAL RESOURCE POOL","EXTERNAL TABLE","FIPS_FLAGGER","FMTONLY","FORCEPLAN","FULLTEXT CATALOG","FULLTEXT INDEX","FULLTEXT STOPLIST","GET CONVERSATION GROUP","GET_TRANSMISSION_STATUS","GRANT","GRANT XML","IDENTITY_INSERT","IMPLICIT_TRANSACTIONS","INDEX","LANGUAGE","LOCK_TIMEOUT","LOGIN","MASTER KEY","MESSAGE TYPE","MOVE CONVERSATION","NOCOUNT","NOEXEC","NUMERIC_ROUNDABORT","OFFSETS","OPEN MASTER KEY","OPEN SYMMETRIC KEY","PARSEONLY","PARTITION SCHEME","QUERY_GOVERNOR_COST_LIMIT","QUEUE","QUOTED_IDENTIFIER","RECEIVE","REMOTE SERVICE BINDING","REMOTE_PROC_TRANSACTIONS","RESOURCE GOVERNOR","RESOURCE POOL","RESTORE","RESTORE FILELISTONLY","RESTORE HEADERONLY","RESTORE LABELONLY","RESTORE MASTER KEY","RESTORE REWINDONLY","RESTORE SERVICE MASTER KEY","RESTORE VERIFYONLY","REVERT","REVOKE","REVOKE XML","ROLE","ROUTE","ROWCOUNT","RULE","SCHEMA","SEARCH PROPERTY LIST","SECURITY POLICY","SELECTIVE XML INDEX","SEND","SENSITIVITY CLASSIFICATION","SEQUENCE","SERVER AUDIT","SERVER AUDIT SPECIFICATION","SERVER CONFIGURATION","SERVER ROLE","SERVICE","SERVICE MASTER KEY","SETUSER","SHOWPLAN_ALL","SHOWPLAN_TEXT","SHOWPLAN_XML","SIGNATURE","SPATIAL INDEX","STATISTICS","STATISTICS IO","STATISTICS PROFILE","STATISTICS TIME","STATISTICS XML","SYMMETRIC KEY","SYNONYM","TABLE","TABLE IDENTITY","TEXTSIZE","TRANSACTION ISOLATION LEVEL","TRIGGER","TYPE","UPDATE STATISTICS","USER","WORKLOAD GROUP","XACT_ABORT","XML INDEX","XML SCHEMA COLLECTION"]),U0e=x(["UNION [ALL]","EXCEPT","INTERSECT"]),B0e=x(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","{CROSS | OUTER} APPLY"]),F0e=x(["ON {UPDATE | DELETE} [SET NULL | SET DEFAULT]","{ROWS | RANGE} BETWEEN"]),H0e=x([]),vR={name:"transactsql",tokenizerOptions:{reservedSelect:v0e,reservedClauses:[...M0e,...eK,...xy],reservedSetOperations:U0e,reservedJoins:B0e,reservedKeywordPhrases:F0e,reservedDataTypePhrases:H0e,reservedKeywords:J3,reservedDataTypes:Q3,reservedFunctionNames:j3,nestedBlockComments:!0,stringTypes:[{quote:"''-qq",prefixes:["N"]},"{}"],identTypes:['""-qq',"[]"],identChars:{first:"#@",rest:"#@$"},paramTypes:{named:["@"],quoted:["@"]},operators:["%","&","|","^","~","!<","!>","+=","-=","*=","/=","%=","|=","&=","^=","::",":"],propertyAccessOperators:[".."]},formatOptions:{alwaysDenseOperators:["::"],onelineClauses:[...eK,...xy],tabularOnelineClauses:xy}}});var tK,nK,rK=W(()=>{tK=["ADD","ALL","ALTER","ANALYZE","AND","AS","ASC","ASENSITIVE","BEFORE","BETWEEN","_BINARY","BOTH","BY","CALL","CASCADE","CASE","CHANGE","CHECK","COLLATE","COLUMN","CONDITION","CONSTRAINT","CONTINUE","CONVERT","CREATE","CROSS","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURSOR","DATABASE","DATABASES","DAY_HOUR","DAY_MICROSECOND","DAY_MINUTE","DAY_SECOND","DECLARE","DEFAULT","DELAYED","DELETE","DESC","DESCRIBE","DETERMINISTIC","DISTINCT","DISTINCTROW","DIV","DROP","DUAL","EACH","ELSE","ELSEIF","ENCLOSED","ESCAPED","EXCEPT","EXISTS","EXIT","EXPLAIN","EXTRA_JOIN","FALSE","FETCH","FOR","FORCE","FORCE_COMPILED_MODE","FORCE_INTERPRETER_MODE","FOREIGN","FROM","FULL","FULLTEXT","GRANT","GROUP","HAVING","HEARTBEAT_NO_LOGGING","HIGH_PRIORITY","HOUR_MICROSECOND","HOUR_MINUTE","HOUR_SECOND","IF","IGNORE","IN","INDEX","INFILE","INNER","INOUT","INSENSITIVE","INSERT","IN","_INTERNAL_DYNAMIC_TYPECAST","INTERSECT","INTERVAL","INTO","ITERATE","JOIN","KEY","KEYS","KILL","LEADING","LEAVE","LEFT","LIKE","LIMIT","LINES","LOAD","LOCALTIME","LOCALTIMESTAMP","LOCK","LOOP","LOW_PRIORITY","MATCH","MAXVALUE","MINUS","MINUTE_MICROSECOND","MINUTE_SECOND","MOD","MODIFIES","NATURAL","NO_QUERY_REWRITE","NOT","NO_WRITE_TO_BINLOG","NO_QUERY_REWRITE","NULL","ON","OPTIMIZE","OPTION","OPTIONALLY","OR","ORDER","OUT","OUTER","OUTFILE","OVER","PRIMARY","PROCEDURE","PURGE","RANGE","READ","READS","REFERENCES","REGEXP","RELEASE","RENAME","REPEAT","REPLACE","REQUIRE","RESTRICT","RETURN","REVOKE","RIGHT","RIGHT_ANTI_JOIN","RIGHT_SEMI_JOIN","RIGHT_STRAIGHT_JOIN","RLIKE","SCHEMA","SCHEMAS","SECOND_MICROSECOND","SELECT","SEMI_JOIN","SENSITIVE","SEPARATOR","SET","SHOW","SIGNAL","SPATIAL","SPECIFIC","SQL","SQL_BIG_RESULT","SQL_BUFFER_RESULT","SQL_CACHE","SQL_CALC_FOUND_ROWS","SQLEXCEPTION","SQL_NO_CACHE","SQL_NO_LOGGING","SQL_SMALL_RESULT","SQLSTATE","SQLWARNING","STRAIGHT_JOIN","TABLE","TERMINATED","THEN","TO","TRAILING","TRIGGER","TRUE","UNBOUNDED","UNDO","UNION","UNIQUE","UNLOCK","UPDATE","USAGE","USE","USING","UTC_DATE","UTC_TIME","UTC_TIMESTAMP","_UTF8","VALUES","WHEN","WHERE","WHILE","WINDOW","WITH","WITHIN","WRITE","XOR","YEAR_MONTH","ZEROFILL"],nK=["BIGINT","BINARY","BIT","BLOB","CHAR","CHARACTER","DATETIME","DEC","DECIMAL","DOUBLE PRECISION","DOUBLE","ENUM","FIXED","FLOAT","FLOAT4","FLOAT8","INT","INT1","INT2","INT3","INT4","INT8","INTEGER","LONG","LONGBLOB","LONGTEXT","MEDIUMBLOB","MEDIUMINT","MEDIUMTEXT","MIDDLEINT","NATIONAL CHAR","NATIONAL VARCHAR","NUMERIC","PRECISION","REAL","SMALLINT","TEXT","TIME","TIMESTAMP","TINYBLOB","TINYINT","TINYTEXT","UNSIGNED","VARBINARY","VARCHAR","VARCHARACTER","YEAR"]});var iK,sK=W(()=>{iK=["ABS","ACOS","ADDDATE","ADDTIME","AES_DECRYPT","AES_ENCRYPT","ANY_VALUE","APPROX_COUNT_DISTINCT","APPROX_COUNT_DISTINCT_ACCUMULATE","APPROX_COUNT_DISTINCT_COMBINE","APPROX_COUNT_DISTINCT_ESTIMATE","APPROX_GEOGRAPHY_INTERSECTS","APPROX_PERCENTILE","ASCII","ASIN","ATAN","ATAN2","AVG","BIN","BINARY","BIT_AND","BIT_COUNT","BIT_OR","BIT_XOR","CAST","CEIL","CEILING","CHAR","CHARACTER_LENGTH","CHAR_LENGTH","CHARSET","COALESCE","COERCIBILITY","COLLATION","COLLECT","CONCAT","CONCAT_WS","CONNECTION_ID","CONV","CONVERT","CONVERT_TZ","COS","COT","COUNT","CUME_DIST","CURDATE","CURRENT_DATE","CURRENT_ROLE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURTIME","DATABASE","DATE","DATE_ADD","DATEDIFF","DATE_FORMAT","DATE_SUB","DATE_TRUNC","DAY","DAYNAME","DAYOFMONTH","DAYOFWEEK","DAYOFYEAR","DECODE","DEFAULT","DEGREES","DENSE_RANK","DIV","DOT_PRODUCT","ELT","EUCLIDEAN_DISTANCE","EXP","EXTRACT","FIELD","FIRST","FIRST_VALUE","FLOOR","FORMAT","FOUND_ROWS","FROM_BASE64","FROM_DAYS","FROM_UNIXTIME","GEOGRAPHY_AREA","GEOGRAPHY_CONTAINS","GEOGRAPHY_DISTANCE","GEOGRAPHY_INTERSECTS","GEOGRAPHY_LATITUDE","GEOGRAPHY_LENGTH","GEOGRAPHY_LONGITUDE","GEOGRAPHY_POINT","GEOGRAPHY_WITHIN_DISTANCE","GEOMETRY_AREA","GEOMETRY_CONTAINS","GEOMETRY_DISTANCE","GEOMETRY_FILTER","GEOMETRY_INTERSECTS","GEOMETRY_LENGTH","GEOMETRY_POINT","GEOMETRY_WITHIN_DISTANCE","GEOMETRY_X","GEOMETRY_Y","GREATEST","GROUPING","GROUP_CONCAT","HEX","HIGHLIGHT","HOUR","ICU_VERSION","IF","IFNULL","INET_ATON","INET_NTOA","INET6_ATON","INET6_NTOA","INITCAP","INSERT","INSTR","INTERVAL","IS","IS NULL","JSON_AGG","JSON_ARRAY_CONTAINS_DOUBLE","JSON_ARRAY_CONTAINS_JSON","JSON_ARRAY_CONTAINS_STRING","JSON_ARRAY_PUSH_DOUBLE","JSON_ARRAY_PUSH_JSON","JSON_ARRAY_PUSH_STRING","JSON_DELETE_KEY","JSON_EXTRACT_DOUBLE","JSON_EXTRACT_JSON","JSON_EXTRACT_STRING","JSON_EXTRACT_BIGINT","JSON_GET_TYPE","JSON_LENGTH","JSON_SET_DOUBLE","JSON_SET_JSON","JSON_SET_STRING","JSON_SPLICE_DOUBLE","JSON_SPLICE_JSON","JSON_SPLICE_STRING","LAG","LAST_DAY","LAST_VALUE","LCASE","LEAD","LEAST","LEFT","LENGTH","LIKE","LN","LOCALTIME","LOCALTIMESTAMP","LOCATE","LOG","LOG10","LOG2","LPAD","LTRIM","MATCH","MAX","MD5","MEDIAN","MICROSECOND","MIN","MINUTE","MOD","MONTH","MONTHNAME","MONTHS_BETWEEN","NOT","NOW","NTH_VALUE","NTILE","NULLIF","OCTET_LENGTH","PERCENT_RANK","PERCENTILE_CONT","PERCENTILE_DISC","PI","PIVOT","POSITION","POW","POWER","QUARTER","QUOTE","RADIANS","RAND","RANK","REGEXP","REPEAT","REPLACE","REVERSE","RIGHT","RLIKE","ROUND","ROW_COUNT","ROW_NUMBER","RPAD","RTRIM","SCALAR","SCHEMA","SEC_TO_TIME","SHA1","SHA2","SIGMOID","SIGN","SIN","SLEEP","SPLIT","SOUNDEX","SOUNDS LIKE","SOURCE_POS_WAIT","SPACE","SQRT","STDDEV","STDDEV_POP","STDDEV_SAMP","STR_TO_DATE","SUBDATE","SUBSTR","SUBSTRING","SUBSTRING_INDEX","SUM","SYS_GUID","TAN","TIME","TIMEDIFF","TIME_BUCKET","TIME_FORMAT","TIMESTAMP","TIMESTAMPADD","TIMESTAMPDIFF","TIME_TO_SEC","TO_BASE64","TO_CHAR","TO_DAYS","TO_JSON","TO_NUMBER","TO_SECONDS","TO_TIMESTAMP","TRIM","TRUNC","TRUNCATE","UCASE","UNHEX","UNIX_TIMESTAMP","UPDATEXML","UPPER","UTC_DATE","UTC_TIME","UTC_TIMESTAMP","UUID","VALUES","VARIANCE","VAR_POP","VAR_SAMP","VECTOR_SUB","VERSION","WEEK","WEEKDAY","WEEKOFYEAR","YEAR"]});var G0e,$0e,oK,My,W0e,k0e,Y0e,V0e,MR,Uy=W(()=>{Mt();mf();rK();sK();G0e=x(["SELECT [ALL | DISTINCT | DISTINCTROW]"]),$0e=x(["WITH","FROM","WHERE","GROUP BY","HAVING","PARTITION BY","ORDER BY","LIMIT","OFFSET","INSERT [IGNORE] [INTO]","VALUES","REPLACE [INTO]","ON DUPLICATE KEY UPDATE","SET","CREATE [OR REPLACE] [TEMPORARY] PROCEDURE [IF NOT EXISTS]","CREATE [OR REPLACE] [EXTERNAL] FUNCTION"]),oK=x(["CREATE [ROWSTORE] [REFERENCE | TEMPORARY | GLOBAL TEMPORARY] TABLE [IF NOT EXISTS]"]),My=x(["CREATE VIEW","UPDATE","DELETE [FROM]","DROP [TEMPORARY] TABLE [IF EXISTS]","ALTER [ONLINE] TABLE","ADD [COLUMN]","ADD [UNIQUE] {INDEX | KEY}","DROP [COLUMN]","MODIFY [COLUMN]","CHANGE","RENAME [TO | AS]","TRUNCATE [TABLE]","ADD AGGREGATOR","ADD LEAF","AGGREGATOR SET AS MASTER","ALTER DATABASE","ALTER PIPELINE","ALTER RESOURCE POOL","ALTER USER","ALTER VIEW","ANALYZE TABLE","ATTACH DATABASE","ATTACH LEAF","ATTACH LEAF ALL","BACKUP DATABASE","BINLOG","BOOTSTRAP AGGREGATOR","CACHE INDEX","CALL","CHANGE","CHANGE MASTER TO","CHANGE REPLICATION FILTER","CHANGE REPLICATION SOURCE TO","CHECK BLOB CHECKSUM","CHECK TABLE","CHECKSUM TABLE","CLEAR ORPHAN DATABASES","CLONE","COMMIT","CREATE DATABASE","CREATE GROUP","CREATE INDEX","CREATE LINK","CREATE MILESTONE","CREATE PIPELINE","CREATE RESOURCE POOL","CREATE ROLE","CREATE USER","DEALLOCATE PREPARE","DESCRIBE","DETACH DATABASE","DETACH PIPELINE","DROP DATABASE","DROP FUNCTION","DROP INDEX","DROP LINK","DROP PIPELINE","DROP PROCEDURE","DROP RESOURCE POOL","DROP ROLE","DROP USER","DROP VIEW","EXECUTE","EXPLAIN","FLUSH","FORCE","GRANT","HANDLER","HELP","KILL CONNECTION","KILLALL QUERIES","LOAD DATA","LOAD INDEX INTO CACHE","LOAD XML","LOCK INSTANCE FOR BACKUP","LOCK TABLES","MASTER_POS_WAIT","OPTIMIZE TABLE","PREPARE","PURGE BINARY LOGS","REBALANCE PARTITIONS","RELEASE SAVEPOINT","REMOVE AGGREGATOR","REMOVE LEAF","REPAIR TABLE","REPLACE","REPLICATE DATABASE","RESET","RESET MASTER","RESET PERSIST","RESET REPLICA","RESET SLAVE","RESTART","RESTORE DATABASE","RESTORE REDUNDANCY","REVOKE","ROLLBACK","ROLLBACK TO SAVEPOINT","SAVEPOINT","SET CHARACTER SET","SET DEFAULT ROLE","SET NAMES","SET PASSWORD","SET RESOURCE GROUP","SET ROLE","SET TRANSACTION","SHOW","SHOW CHARACTER SET","SHOW COLLATION","SHOW COLUMNS","SHOW CREATE DATABASE","SHOW CREATE FUNCTION","SHOW CREATE PIPELINE","SHOW CREATE PROCEDURE","SHOW CREATE TABLE","SHOW CREATE USER","SHOW CREATE VIEW","SHOW DATABASES","SHOW ENGINE","SHOW ENGINES","SHOW ERRORS","SHOW FUNCTION CODE","SHOW FUNCTION STATUS","SHOW GRANTS","SHOW INDEX","SHOW MASTER STATUS","SHOW OPEN TABLES","SHOW PLUGINS","SHOW PRIVILEGES","SHOW PROCEDURE CODE","SHOW PROCEDURE STATUS","SHOW PROCESSLIST","SHOW PROFILE","SHOW PROFILES","SHOW RELAYLOG EVENTS","SHOW REPLICA STATUS","SHOW REPLICAS","SHOW SLAVE","SHOW SLAVE HOSTS","SHOW STATUS","SHOW TABLE STATUS","SHOW TABLES","SHOW VARIABLES","SHOW WARNINGS","SHUTDOWN","SNAPSHOT DATABASE","SOURCE_POS_WAIT","START GROUP_REPLICATION","START PIPELINE","START REPLICA","START SLAVE","START TRANSACTION","STOP GROUP_REPLICATION","STOP PIPELINE","STOP REPLICA","STOP REPLICATING","STOP SLAVE","TEST PIPELINE","UNLOCK INSTANCE","UNLOCK TABLES","USE","XA","ITERATE","LEAVE","LOOP","REPEAT","RETURN","WHILE"]),W0e=x(["UNION [ALL | DISTINCT]","EXCEPT","INTERSECT","MINUS"]),k0e=x(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL {LEFT | RIGHT} [OUTER] JOIN","STRAIGHT_JOIN"]),Y0e=x(["ON DELETE","ON UPDATE","CHARACTER SET","{ROWS | RANGE} BETWEEN","IDENTIFIED BY"]),V0e=x([]),MR={name:"singlestoredb",tokenizerOptions:{reservedSelect:G0e,reservedClauses:[...$0e,...oK,...My],reservedSetOperations:W0e,reservedJoins:k0e,reservedKeywordPhrases:Y0e,reservedDataTypePhrases:V0e,reservedKeywords:tK,reservedDataTypes:nK,reservedFunctionNames:iK,stringTypes:['""-qq-bs',"''-qq-bs",{quote:"''-raw",prefixes:["B","X"],requirePrefix:!0}],identTypes:["``"],identChars:{first:"$",rest:"$",allowFirstCharNumber:!0},variableTypes:[{regex:"@@?[A-Za-z0-9_$]+"},{quote:"``",prefixes:["@"],requirePrefix:!0}],lineCommentTypes:["--","#"],operators:[":=","&","|","^","~","<<",">>","<=>","&&","||","::","::$","::%",":>","!:>","*.*"],postProcess:po},formatOptions:{alwaysDenseOperators:["::","::$","::%"],onelineClauses:[...oK,...My],tabularOnelineClauses:My}}});var aK,lK=W(()=>{aK=["ABS","ACOS","ACOSH","ADD_MONTHS","ALL_USER_NAMES","ANY_VALUE","APPROX_COUNT_DISTINCT","APPROX_PERCENTILE","APPROX_PERCENTILE_ACCUMULATE","APPROX_PERCENTILE_COMBINE","APPROX_PERCENTILE_ESTIMATE","APPROX_TOP_K","APPROX_TOP_K_ACCUMULATE","APPROX_TOP_K_COMBINE","APPROX_TOP_K_ESTIMATE","APPROXIMATE_JACCARD_INDEX","APPROXIMATE_SIMILARITY","ARRAY_AGG","ARRAY_APPEND","ARRAY_CAT","ARRAY_COMPACT","ARRAY_CONSTRUCT","ARRAY_CONSTRUCT_COMPACT","ARRAY_CONTAINS","ARRAY_INSERT","ARRAY_INTERSECTION","ARRAY_POSITION","ARRAY_PREPEND","ARRAY_SIZE","ARRAY_SLICE","ARRAY_TO_STRING","ARRAY_UNION_AGG","ARRAY_UNIQUE_AGG","ARRAYS_OVERLAP","AS_ARRAY","AS_BINARY","AS_BOOLEAN","AS_CHAR","AS_VARCHAR","AS_DATE","AS_DECIMAL","AS_NUMBER","AS_DOUBLE","AS_REAL","AS_INTEGER","AS_OBJECT","AS_TIME","AS_TIMESTAMP_LTZ","AS_TIMESTAMP_NTZ","AS_TIMESTAMP_TZ","ASCII","ASIN","ASINH","ATAN","ATAN2","ATANH","AUTO_REFRESH_REGISTRATION_HISTORY","AUTOMATIC_CLUSTERING_HISTORY","AVG","BASE64_DECODE_BINARY","BASE64_DECODE_STRING","BASE64_ENCODE","BIT_LENGTH","BITAND","BITAND_AGG","BITMAP_BIT_POSITION","BITMAP_BUCKET_NUMBER","BITMAP_CONSTRUCT_AGG","BITMAP_COUNT","BITMAP_OR_AGG","BITNOT","BITOR","BITOR_AGG","BITSHIFTLEFT","BITSHIFTRIGHT","BITXOR","BITXOR_AGG","BOOLAND","BOOLAND_AGG","BOOLNOT","BOOLOR","BOOLOR_AGG","BOOLXOR","BOOLXOR_AGG","BUILD_SCOPED_FILE_URL","BUILD_STAGE_FILE_URL","CASE","CAST","CBRT","CEIL","CHARINDEX","CHECK_JSON","CHECK_XML","CHR","CHAR","COALESCE","COLLATE","COLLATION","COMPLETE_TASK_GRAPHS","COMPRESS","CONCAT","CONCAT_WS","CONDITIONAL_CHANGE_EVENT","CONDITIONAL_TRUE_EVENT","CONTAINS","CONVERT_TIMEZONE","COPY_HISTORY","CORR","COS","COSH","COT","COUNT","COUNT_IF","COVAR_POP","COVAR_SAMP","CUME_DIST","CURRENT_ACCOUNT","CURRENT_AVAILABLE_ROLES","CURRENT_CLIENT","CURRENT_DATABASE","CURRENT_DATE","CURRENT_IP_ADDRESS","CURRENT_REGION","CURRENT_ROLE","CURRENT_SCHEMA","CURRENT_SCHEMAS","CURRENT_SECONDARY_ROLES","CURRENT_SESSION","CURRENT_STATEMENT","CURRENT_TASK_GRAPHS","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_TRANSACTION","CURRENT_USER","CURRENT_VERSION","CURRENT_WAREHOUSE","DATA_TRANSFER_HISTORY","DATABASE_REFRESH_HISTORY","DATABASE_REFRESH_PROGRESS","DATABASE_REFRESH_PROGRESS_BY_JOB","DATABASE_STORAGE_USAGE_HISTORY","DATE_FROM_PARTS","DATE_PART","DATE_TRUNC","DATEADD","DATEDIFF","DAYNAME","DECODE","DECOMPRESS_BINARY","DECOMPRESS_STRING","DECRYPT","DECRYPT_RAW","DEGREES","DENSE_RANK","DIV0","EDITDISTANCE","ENCRYPT","ENCRYPT_RAW","ENDSWITH","EQUAL_NULL","EXP","EXPLAIN_JSON","EXTERNAL_FUNCTIONS_HISTORY","EXTERNAL_TABLE_FILES","EXTERNAL_TABLE_FILE_REGISTRATION_HISTORY","EXTRACT","EXTRACT_SEMANTIC_CATEGORIES","FACTORIAL","FILTER","FIRST_VALUE","FLATTEN","FLOOR","GENERATE_COLUMN_DESCRIPTION","GENERATOR","GET","GET_ABSOLUTE_PATH","GET_DDL","GET_IGNORE_CASE","GET_OBJECT_REFERENCES","GET_PATH","GET_PRESIGNED_URL","GET_RELATIVE_PATH","GET_STAGE_LOCATION","GETBIT","GREATEST","GREATEST_IGNORE_NULLS","GROUPING","GROUPING_ID","HASH","HASH_AGG","HAVERSINE","HEX_DECODE_BINARY","HEX_DECODE_STRING","HEX_ENCODE","HLL","HLL_ACCUMULATE","HLL_COMBINE","HLL_ESTIMATE","HLL_EXPORT","HLL_IMPORT","HOUR","MINUTE","SECOND","IDENTIFIER","IFF","IFNULL","ILIKE","ILIKE ANY","INFER_SCHEMA","INITCAP","INSERT","INVOKER_ROLE","INVOKER_SHARE","IS_ARRAY","IS_BINARY","IS_BOOLEAN","IS_CHAR","IS_VARCHAR","IS_DATE","IS_DATE_VALUE","IS_DECIMAL","IS_DOUBLE","IS_REAL","IS_GRANTED_TO_INVOKER_ROLE","IS_INTEGER","IS_NULL_VALUE","IS_OBJECT","IS_ROLE_IN_SESSION","IS_TIME","IS_TIMESTAMP_LTZ","IS_TIMESTAMP_NTZ","IS_TIMESTAMP_TZ","JAROWINKLER_SIMILARITY","JSON_EXTRACT_PATH_TEXT","KURTOSIS","LAG","LAST_DAY","LAST_QUERY_ID","LAST_TRANSACTION","LAST_VALUE","LEAD","LEAST","LEFT","LENGTH","LEN","LIKE","LIKE ALL","LIKE ANY","LISTAGG","LN","LOCALTIME","LOCALTIMESTAMP","LOG","LOGIN_HISTORY","LOGIN_HISTORY_BY_USER","LOWER","LPAD","LTRIM","MATERIALIZED_VIEW_REFRESH_HISTORY","MD5","MD5_HEX","MD5_BINARY","MD5_NUMBER \u2014 Obsoleted","MD5_NUMBER_LOWER64","MD5_NUMBER_UPPER64","MEDIAN","MIN","MAX","MINHASH","MINHASH_COMBINE","MOD","MODE","MONTHNAME","MONTHS_BETWEEN","NEXT_DAY","NORMAL","NTH_VALUE","NTILE","NULLIF","NULLIFZERO","NVL","NVL2","OBJECT_AGG","OBJECT_CONSTRUCT","OBJECT_CONSTRUCT_KEEP_NULL","OBJECT_DELETE","OBJECT_INSERT","OBJECT_KEYS","OBJECT_PICK","OCTET_LENGTH","PARSE_IP","PARSE_JSON","PARSE_URL","PARSE_XML","PERCENT_RANK","PERCENTILE_CONT","PERCENTILE_DISC","PI","PIPE_USAGE_HISTORY","POLICY_CONTEXT","POLICY_REFERENCES","POSITION","POW","POWER","PREVIOUS_DAY","QUERY_ACCELERATION_HISTORY","QUERY_HISTORY","QUERY_HISTORY_BY_SESSION","QUERY_HISTORY_BY_USER","QUERY_HISTORY_BY_WAREHOUSE","RADIANS","RANDOM","RANDSTR","RANK","RATIO_TO_REPORT","REGEXP","REGEXP_COUNT","REGEXP_INSTR","REGEXP_LIKE","REGEXP_REPLACE","REGEXP_SUBSTR","REGEXP_SUBSTR_ALL","REGR_AVGX","REGR_AVGY","REGR_COUNT","REGR_INTERCEPT","REGR_R2","REGR_SLOPE","REGR_SXX","REGR_SXY","REGR_SYY","REGR_VALX","REGR_VALY","REPEAT","REPLACE","REPLICATION_GROUP_REFRESH_HISTORY","REPLICATION_GROUP_REFRESH_PROGRESS","REPLICATION_GROUP_REFRESH_PROGRESS_BY_JOB","REPLICATION_GROUP_USAGE_HISTORY","REPLICATION_USAGE_HISTORY","REST_EVENT_HISTORY","RESULT_SCAN","REVERSE","RIGHT","RLIKE","ROUND","ROW_NUMBER","RPAD","RTRIM","RTRIMMED_LENGTH","SEARCH_OPTIMIZATION_HISTORY","SEQ1","SEQ2","SEQ4","SEQ8","SERVERLESS_TASK_HISTORY","SHA1","SHA1_HEX","SHA1_BINARY","SHA2","SHA2_HEX","SHA2_BINARY","SIGN","SIN","SINH","SKEW","SOUNDEX","SPACE","SPLIT","SPLIT_PART","SPLIT_TO_TABLE","SQRT","SQUARE","ST_AREA","ST_ASEWKB","ST_ASEWKT","ST_ASGEOJSON","ST_ASWKB","ST_ASBINARY","ST_ASWKT","ST_ASTEXT","ST_AZIMUTH","ST_CENTROID","ST_COLLECT","ST_CONTAINS","ST_COVEREDBY","ST_COVERS","ST_DIFFERENCE","ST_DIMENSION","ST_DISJOINT","ST_DISTANCE","ST_DWITHIN","ST_ENDPOINT","ST_ENVELOPE","ST_GEOGFROMGEOHASH","ST_GEOGPOINTFROMGEOHASH","ST_GEOGRAPHYFROMWKB","ST_GEOGRAPHYFROMWKT","ST_GEOHASH","ST_GEOMETRYFROMWKB","ST_GEOMETRYFROMWKT","ST_HAUSDORFFDISTANCE","ST_INTERSECTION","ST_INTERSECTS","ST_LENGTH","ST_MAKEGEOMPOINT","ST_GEOM_POINT","ST_MAKELINE","ST_MAKEPOINT","ST_POINT","ST_MAKEPOLYGON","ST_POLYGON","ST_NPOINTS","ST_NUMPOINTS","ST_PERIMETER","ST_POINTN","ST_SETSRID","ST_SIMPLIFY","ST_SRID","ST_STARTPOINT","ST_SYMDIFFERENCE","ST_UNION","ST_WITHIN","ST_X","ST_XMAX","ST_XMIN","ST_Y","ST_YMAX","ST_YMIN","STAGE_DIRECTORY_FILE_REGISTRATION_HISTORY","STAGE_STORAGE_USAGE_HISTORY","STARTSWITH","STDDEV","STDDEV_POP","STDDEV_SAMP","STRIP_NULL_VALUE","STRTOK","STRTOK_SPLIT_TO_TABLE","STRTOK_TO_ARRAY","SUBSTR","SUBSTRING","SUM","SYSDATE","SYSTEM$ABORT_SESSION","SYSTEM$ABORT_TRANSACTION","SYSTEM$AUTHORIZE_PRIVATELINK","SYSTEM$AUTHORIZE_STAGE_PRIVATELINK_ACCESS","SYSTEM$BEHAVIOR_CHANGE_BUNDLE_STATUS","SYSTEM$CANCEL_ALL_QUERIES","SYSTEM$CANCEL_QUERY","SYSTEM$CLUSTERING_DEPTH","SYSTEM$CLUSTERING_INFORMATION","SYSTEM$CLUSTERING_RATIO ","SYSTEM$CURRENT_USER_TASK_NAME","SYSTEM$DATABASE_REFRESH_HISTORY ","SYSTEM$DATABASE_REFRESH_PROGRESS","SYSTEM$DATABASE_REFRESH_PROGRESS_BY_JOB ","SYSTEM$DISABLE_BEHAVIOR_CHANGE_BUNDLE","SYSTEM$DISABLE_DATABASE_REPLICATION","SYSTEM$ENABLE_BEHAVIOR_CHANGE_BUNDLE","SYSTEM$ESTIMATE_QUERY_ACCELERATION","SYSTEM$ESTIMATE_SEARCH_OPTIMIZATION_COSTS","SYSTEM$EXPLAIN_JSON_TO_TEXT","SYSTEM$EXPLAIN_PLAN_JSON","SYSTEM$EXTERNAL_TABLE_PIPE_STATUS","SYSTEM$GENERATE_SAML_CSR","SYSTEM$GENERATE_SCIM_ACCESS_TOKEN","SYSTEM$GET_AWS_SNS_IAM_POLICY","SYSTEM$GET_PREDECESSOR_RETURN_VALUE","SYSTEM$GET_PRIVATELINK","SYSTEM$GET_PRIVATELINK_AUTHORIZED_ENDPOINTS","SYSTEM$GET_PRIVATELINK_CONFIG","SYSTEM$GET_SNOWFLAKE_PLATFORM_INFO","SYSTEM$GET_TAG","SYSTEM$GET_TAG_ALLOWED_VALUES","SYSTEM$GET_TAG_ON_CURRENT_COLUMN","SYSTEM$GET_TAG_ON_CURRENT_TABLE","SYSTEM$GLOBAL_ACCOUNT_SET_PARAMETER","SYSTEM$LAST_CHANGE_COMMIT_TIME","SYSTEM$LINK_ACCOUNT_OBJECTS_BY_NAME","SYSTEM$MIGRATE_SAML_IDP_REGISTRATION","SYSTEM$PIPE_FORCE_RESUME","SYSTEM$PIPE_STATUS","SYSTEM$REVOKE_PRIVATELINK","SYSTEM$REVOKE_STAGE_PRIVATELINK_ACCESS","SYSTEM$SET_RETURN_VALUE","SYSTEM$SHOW_OAUTH_CLIENT_SECRETS","SYSTEM$STREAM_GET_TABLE_TIMESTAMP","SYSTEM$STREAM_HAS_DATA","SYSTEM$TASK_DEPENDENTS_ENABLE","SYSTEM$TYPEOF","SYSTEM$USER_TASK_CANCEL_ONGOING_EXECUTIONS","SYSTEM$VERIFY_EXTERNAL_OAUTH_TOKEN","SYSTEM$WAIT","SYSTEM$WHITELIST","SYSTEM$WHITELIST_PRIVATELINK","TAG_REFERENCES","TAG_REFERENCES_ALL_COLUMNS","TAG_REFERENCES_WITH_LINEAGE","TAN","TANH","TASK_DEPENDENTS","TASK_HISTORY","TIME_FROM_PARTS","TIME_SLICE","TIMEADD","TIMEDIFF","TIMESTAMP_FROM_PARTS","TIMESTAMPADD","TIMESTAMPDIFF","TO_ARRAY","TO_BINARY","TO_BOOLEAN","TO_CHAR","TO_VARCHAR","TO_DATE","DATE","TO_DECIMAL","TO_NUMBER","TO_NUMERIC","TO_DOUBLE","TO_GEOGRAPHY","TO_GEOMETRY","TO_JSON","TO_OBJECT","TO_TIME","TIME","TO_TIMESTAMP","TO_TIMESTAMP_LTZ","TO_TIMESTAMP_NTZ","TO_TIMESTAMP_TZ","TO_VARIANT","TO_XML","TRANSLATE","TRIM","TRUNCATE","TRUNC","TRUNC","TRY_BASE64_DECODE_BINARY","TRY_BASE64_DECODE_STRING","TRY_CAST","TRY_HEX_DECODE_BINARY","TRY_HEX_DECODE_STRING","TRY_PARSE_JSON","TRY_TO_BINARY","TRY_TO_BOOLEAN","TRY_TO_DATE","TRY_TO_DECIMAL","TRY_TO_NUMBER","TRY_TO_NUMERIC","TRY_TO_DOUBLE","TRY_TO_GEOGRAPHY","TRY_TO_GEOMETRY","TRY_TO_TIME","TRY_TO_TIMESTAMP","TRY_TO_TIMESTAMP_LTZ","TRY_TO_TIMESTAMP_NTZ","TRY_TO_TIMESTAMP_TZ","TYPEOF","UNICODE","UNIFORM","UPPER","UUID_STRING","VALIDATE","VALIDATE_PIPE_LOAD","VAR_POP","VAR_SAMP","VARIANCE","VARIANCE_SAMP","VARIANCE_POP","WAREHOUSE_LOAD_HISTORY","WAREHOUSE_METERING_HISTORY","WIDTH_BUCKET","XMLGET","YEAR","YEAROFWEEK","YEAROFWEEKISO","DAY","DAYOFMONTH","DAYOFWEEK","DAYOFWEEKISO","DAYOFYEAR","WEEK","WEEK","WEEKOFYEAR","WEEKISO","MONTH","QUARTER","ZEROIFNULL","ZIPF"]});var cK,uK,dK=W(()=>{cK=["ACCOUNT","ALL","ALTER","AND","ANY","AS","BETWEEN","BY","CASE","CAST","CHECK","COLUMN","CONNECT","CONNECTION","CONSTRAINT","CREATE","CROSS","CURRENT","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","DATABASE","DELETE","DISTINCT","DROP","ELSE","EXISTS","FALSE","FOLLOWING","FOR","FROM","FULL","GRANT","GROUP","GSCLUSTER","HAVING","ILIKE","IN","INCREMENT","INNER","INSERT","INTERSECT","INTO","IS","ISSUE","JOIN","LATERAL","LEFT","LIKE","LOCALTIME","LOCALTIMESTAMP","MINUS","NATURAL","NOT","NULL","OF","ON","OR","ORDER","ORGANIZATION","QUALIFY","REGEXP","REVOKE","RIGHT","RLIKE","ROW","ROWS","SAMPLE","SCHEMA","SELECT","SET","SOME","START","TABLE","TABLESAMPLE","THEN","TO","TRIGGER","TRUE","TRY_CAST","UNION","UNIQUE","UPDATE","USING","VALUES","VIEW","WHEN","WHENEVER","WHERE","WITH","COMMENT"],uK=["NUMBER","DECIMAL","NUMERIC","INT","INTEGER","BIGINT","SMALLINT","TINYINT","BYTEINT","FLOAT","FLOAT4","FLOAT8","DOUBLE","DOUBLE PRECISION","REAL","VARCHAR","CHAR","CHARACTER","STRING","TEXT","BINARY","VARBINARY","BOOLEAN","DATE","DATETIME","TIME","TIMESTAMP","TIMESTAMP_LTZ","TIMESTAMP_NTZ","TIMESTAMP","TIMESTAMP_TZ","VARIANT","OBJECT","ARRAY","GEOGRAPHY","GEOMETRY"]});var q0e,X0e,fK,By,z0e,j0e,K0e,J0e,UR,Fy=W(()=>{Mt();lK();dK();q0e=x(["SELECT [ALL | DISTINCT]"]),X0e=x(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY","HAVING","PARTITION BY","ORDER BY","QUALIFY","LIMIT","OFFSET","FETCH [FIRST | NEXT]","INSERT [OVERWRITE] [ALL INTO | INTO | ALL | FIRST]","{THEN | ELSE} INTO","VALUES","SET","CLUSTER BY","[WITH] {MASKING POLICY | TAG | ROW ACCESS POLICY}","COPY GRANTS","USING TEMPLATE","MERGE INTO","WHEN MATCHED [AND]","THEN {UPDATE SET | DELETE}","WHEN NOT MATCHED THEN INSERT"]),fK=x(["CREATE [OR REPLACE] [VOLATILE] TABLE [IF NOT EXISTS]","CREATE [OR REPLACE] [LOCAL | GLOBAL] {TEMP|TEMPORARY} TABLE [IF NOT EXISTS]"]),By=x(["CREATE [OR REPLACE] [SECURE] [RECURSIVE] VIEW [IF NOT EXISTS]","UPDATE","DELETE FROM","DROP TABLE [IF EXISTS]","ALTER TABLE [IF EXISTS]","RENAME TO","SWAP WITH","[SUSPEND | RESUME] RECLUSTER","DROP CLUSTERING KEY","ADD [COLUMN]","RENAME COLUMN","{ALTER | MODIFY} [COLUMN]","DROP [COLUMN]","{ADD | ALTER | MODIFY | DROP} [CONSTRAINT]","RENAME CONSTRAINT","{ADD | DROP} SEARCH OPTIMIZATION","{SET | UNSET} TAG","{ADD | DROP} ROW ACCESS POLICY","DROP ALL ROW ACCESS POLICIES","{SET | DROP} DEFAULT","{SET | DROP} NOT NULL","SET DATA TYPE","UNSET COMMENT","{SET | UNSET} MASKING POLICY","TRUNCATE [TABLE] [IF EXISTS]","ALTER ACCOUNT","ALTER API INTEGRATION","ALTER CONNECTION","ALTER DATABASE","ALTER EXTERNAL TABLE","ALTER FAILOVER GROUP","ALTER FILE FORMAT","ALTER FUNCTION","ALTER INTEGRATION","ALTER MASKING POLICY","ALTER MATERIALIZED VIEW","ALTER NETWORK POLICY","ALTER NOTIFICATION INTEGRATION","ALTER PIPE","ALTER PROCEDURE","ALTER REPLICATION GROUP","ALTER RESOURCE MONITOR","ALTER ROLE","ALTER ROW ACCESS POLICY","ALTER SCHEMA","ALTER SECURITY INTEGRATION","ALTER SEQUENCE","ALTER SESSION","ALTER SESSION POLICY","ALTER SHARE","ALTER STAGE","ALTER STORAGE INTEGRATION","ALTER STREAM","ALTER TAG","ALTER TASK","ALTER USER","ALTER VIEW","ALTER WAREHOUSE","BEGIN","CALL","COMMIT","COPY INTO","CREATE ACCOUNT","CREATE API INTEGRATION","CREATE CONNECTION","CREATE DATABASE","CREATE EXTERNAL FUNCTION","CREATE EXTERNAL TABLE","CREATE FAILOVER GROUP","CREATE FILE FORMAT","CREATE FUNCTION","CREATE INTEGRATION","CREATE MANAGED ACCOUNT","CREATE MASKING POLICY","CREATE MATERIALIZED VIEW","CREATE NETWORK POLICY","CREATE NOTIFICATION INTEGRATION","CREATE PIPE","CREATE PROCEDURE","CREATE REPLICATION GROUP","CREATE RESOURCE MONITOR","CREATE ROLE","CREATE ROW ACCESS POLICY","CREATE SCHEMA","CREATE SECURITY INTEGRATION","CREATE SEQUENCE","CREATE SESSION POLICY","CREATE SHARE","CREATE STAGE","CREATE STORAGE INTEGRATION","CREATE STREAM","CREATE TAG","CREATE TASK","CREATE USER","CREATE WAREHOUSE","DELETE","DESCRIBE DATABASE","DESCRIBE EXTERNAL TABLE","DESCRIBE FILE FORMAT","DESCRIBE FUNCTION","DESCRIBE INTEGRATION","DESCRIBE MASKING POLICY","DESCRIBE MATERIALIZED VIEW","DESCRIBE NETWORK POLICY","DESCRIBE PIPE","DESCRIBE PROCEDURE","DESCRIBE RESULT","DESCRIBE ROW ACCESS POLICY","DESCRIBE SCHEMA","DESCRIBE SEQUENCE","DESCRIBE SESSION POLICY","DESCRIBE SHARE","DESCRIBE STAGE","DESCRIBE STREAM","DESCRIBE TABLE","DESCRIBE TASK","DESCRIBE TRANSACTION","DESCRIBE USER","DESCRIBE VIEW","DESCRIBE WAREHOUSE","DROP CONNECTION","DROP DATABASE","DROP EXTERNAL TABLE","DROP FAILOVER GROUP","DROP FILE FORMAT","DROP FUNCTION","DROP INTEGRATION","DROP MANAGED ACCOUNT","DROP MASKING POLICY","DROP MATERIALIZED VIEW","DROP NETWORK POLICY","DROP PIPE","DROP PROCEDURE","DROP REPLICATION GROUP","DROP RESOURCE MONITOR","DROP ROLE","DROP ROW ACCESS POLICY","DROP SCHEMA","DROP SEQUENCE","DROP SESSION POLICY","DROP SHARE","DROP STAGE","DROP STREAM","DROP TAG","DROP TASK","DROP USER","DROP VIEW","DROP WAREHOUSE","EXECUTE IMMEDIATE","EXECUTE TASK","EXPLAIN","GET","GRANT OWNERSHIP","GRANT ROLE","INSERT","LIST","MERGE","PUT","REMOVE","REVOKE ROLE","ROLLBACK","SHOW COLUMNS","SHOW CONNECTIONS","SHOW DATABASES","SHOW DATABASES IN FAILOVER GROUP","SHOW DATABASES IN REPLICATION GROUP","SHOW DELEGATED AUTHORIZATIONS","SHOW EXTERNAL FUNCTIONS","SHOW EXTERNAL TABLES","SHOW FAILOVER GROUPS","SHOW FILE FORMATS","SHOW FUNCTIONS","SHOW GLOBAL ACCOUNTS","SHOW GRANTS","SHOW INTEGRATIONS","SHOW LOCKS","SHOW MANAGED ACCOUNTS","SHOW MASKING POLICIES","SHOW MATERIALIZED VIEWS","SHOW NETWORK POLICIES","SHOW OBJECTS","SHOW ORGANIZATION ACCOUNTS","SHOW PARAMETERS","SHOW PIPES","SHOW PRIMARY KEYS","SHOW PROCEDURES","SHOW REGIONS","SHOW REPLICATION ACCOUNTS","SHOW REPLICATION DATABASES","SHOW REPLICATION GROUPS","SHOW RESOURCE MONITORS","SHOW ROLES","SHOW ROW ACCESS POLICIES","SHOW SCHEMAS","SHOW SEQUENCES","SHOW SESSION POLICIES","SHOW SHARES","SHOW SHARES IN FAILOVER GROUP","SHOW SHARES IN REPLICATION GROUP","SHOW STAGES","SHOW STREAMS","SHOW TABLES","SHOW TAGS","SHOW TASKS","SHOW TRANSACTIONS","SHOW USER FUNCTIONS","SHOW USERS","SHOW VARIABLES","SHOW VIEWS","SHOW WAREHOUSES","TRUNCATE MATERIALIZED VIEW","UNDROP DATABASE","UNDROP SCHEMA","UNDROP TABLE","UNDROP TAG","UNSET","USE DATABASE","USE ROLE","USE SCHEMA","USE SECONDARY ROLES","USE WAREHOUSE"]),z0e=x(["UNION [ALL]","MINUS","EXCEPT","INTERSECT"]),j0e=x(["[INNER] JOIN","[NATURAL] {LEFT | RIGHT | FULL} [OUTER] JOIN","{CROSS | NATURAL} JOIN"]),K0e=x(["{ROWS | RANGE} BETWEEN","ON {UPDATE | DELETE} [SET NULL | SET DEFAULT]"]),J0e=x([]),UR={name:"snowflake",tokenizerOptions:{reservedSelect:q0e,reservedClauses:[...X0e,...fK,...By],reservedSetOperations:z0e,reservedJoins:j0e,reservedKeywordPhrases:K0e,reservedDataTypePhrases:J0e,reservedKeywords:cK,reservedDataTypes:uK,reservedFunctionNames:aK,stringTypes:["$$","''-qq-bs"],identTypes:['""-qq'],variableTypes:[{regex:"[$][1-9]\\d*"},{regex:"[$][_a-zA-Z][_a-zA-Z0-9$]*"}],extraParens:["[]"],identChars:{rest:"$"},lineCommentTypes:["--","//"],operators:["%","::","||","=>",":=","->"],propertyAccessOperators:[":"]},formatOptions:{alwaysDenseOperators:["::"],onelineClauses:[...fK,...By],tabularOnelineClauses:By}}});var Hy={};pt(Hy,{bigquery:()=>SR,db2:()=>RR,db2i:()=>AR,duckdb:()=>mR,hive:()=>gR,mariadb:()=>IR,mysql:()=>_R,n1ql:()=>CR,plsql:()=>bR,postgresql:()=>yR,redshift:()=>wR,singlestoredb:()=>MR,snowflake:()=>UR,spark:()=>LR,sql:()=>PR,sqlite:()=>DR,tidb:()=>NR,transactsql:()=>vR,trino:()=>xR});var EK=W(()=>{ry();sy();ay();cy();dy();Ey();py();Sy();Ry();my();Iy();Ny();Cy();yy();Ly();Py();vy();Uy();Fy()});var To,Gy,Uc,BR,Bc=W(()=>{To=t=>t[t.length-1],Gy=t=>t.sort((e,n)=>n.length-e.length||e.localeCompare(n)),Uc=t=>t.replace(/\s+/gu," "),BR=t=>/\n/.test(t)});var hr,$y,bs,Q0e,hK,pK,FR=W(()=>{hr=t=>t.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&"),$y=/\s+/uy,bs=t=>new RegExp(`(?:${t})`,"uy"),Q0e=t=>t.split("").map(e=>/ /gu.test(e)?"\\s+":`[${e.toUpperCase()}${e.toLowerCase()}]`).join(""),hK=t=>t+"(?:-"+t+")*",pK=({prefixes:t,requirePrefix:e})=>`(?:${t.map(Q0e).join("|")}${e?"":"|"})`});var SK,Wy,ky,Z0e,Fi,HR,eLe,TK,RK,AK,Yy,Vy,mK,qy,gK=W(()=>{Bc();FR();SK=t=>new RegExp(`(?:${t.map(hr).join("|")}).*?(?=\r
|\r|
|$)`,"uy"),Wy=(t,e=[])=>{let n=t==="open"?0:1,r=["()",...e].map(i=>i[n]);return bs(r.map(hr).join("|"))},ky=t=>bs(`${Gy(t).map(hr).join("|")}`),Z0e=({rest:t,dashes:e})=>t||e?`(?![${t||""}${e?"-":""}])`:"",Fi=(t,e={})=>{if(t.length===0)return/^\b$/u;let n=Z0e(e),r=Gy(t).map(hr).join("|").replace(/ /gu,"\\s+");return new RegExp(`(?:${r})${n}\\b`,"iuy")},HR=(t,e)=>{if(!t.length)return;let n=t.map(hr).join("|");return bs(`(?:${n})(?:${e})`)},eLe=()=>{let t={"<":">","[":"]","(":")","{":"}"},e="{left}(?:(?!{right}').)*?{right}",n=Object.entries(t).map(([o,a])=>e.replace(/{left}/g,hr(o)).replace(/{right}/g,hr(a))),r=hr(Object.keys(t).join(""));return`[Qq]'(?:${String.raw`(?<tag>[^\s${r}])(?:(?!\k<tag>').)*?\k<tag>`}|${n.join("|")})'`},TK={"``":"(?:`[^`]*`)+","[]":String.raw`(?:\[[^\]]*\])(?:\][^\]]*\])*`,'""-qq':String.raw`(?:"[^"]*")+`,'""-bs':String.raw`(?:"[^"\\]*(?:\\.[^"\\]*)*")`,'""-qq-bs':String.raw`(?:"[^"\\]*(?:\\.[^"\\]*)*")+`,'""-raw':String.raw`(?:"[^"]*")`,"''-qq":String.raw`(?:'[^']*')+`,"''-bs":String.raw`(?:'[^'\\]*(?:\\.[^'\\]*)*')`,"''-qq-bs":String.raw`(?:'[^'\\]*(?:\\.[^'\\]*)*')+`,"''-raw":String.raw`(?:'[^']*')`,$$:String.raw`(?<tag>\$\w*\$)[\s\S]*?\k<tag>`,"'''..'''":String.raw`'''[^\\]*?(?:\\.[^\\]*?)*?'''`,'""".."""':String.raw`"""[^\\]*?(?:\\.[^\\]*?)*?"""`,"{}":String.raw`(?:\{[^\}]*\})`,"q''":eLe()},RK=t=>typeof t=="string"?TK[t]:"regex"in t?t.regex:pK(t)+TK[t.quote],AK=t=>bs(t.map(e=>"regex"in e?e.regex:RK(e)).join("|")),Yy=t=>t.map(RK).join("|"),Vy=t=>bs(Yy(t)),mK=(t={})=>bs(qy(t)),qy=({first:t,rest:e,dashes:n,allowFirstCharNumber:r}={})=>{let i="\\p{Alphabetic}\\p{Mark}_",s="\\p{Decimal_Number}",o=hr(t??""),a=hr(e??""),l=r?`[${i}${s}${o}][${i}${s}${a}]*`:`[${i}${o}][${i}${s}${a}]*`;return n?hK(l):l}});function GR(t,e){let n=t.slice(0,e).split(/\n/);return{line:n.length,col:n[n.length-1].length+1}}var Xy=W(()=>{});var gf,IK=W(()=>{Xy();FR();gf=class{constructor(e,n){this.rules=e,this.dialectName=n,this.input="",this.index=0}tokenize(e){this.input=e,this.index=0;let n=[],r;for(;this.index<this.input.length;){let i=this.getWhitespace();if(this.index<this.input.length){if(r=this.getNextToken(),!r)throw this.createParseError();n.push(Object.assign(Object.assign({},r),{precedingWhitespace:i}))}}return n}createParseError(){let e=this.input.slice(this.index,this.index+10),{line:n,col:r}=GR(this.input,this.index);return new Error(`Parse error: Unexpected "${e}" at line ${n} column ${r}.
${this.dialectInfo()}`)}dialectInfo(){return this.dialectName==="sql"?`This likely happens because you're using the default "sql" dialect.
If possible, please select a more specific dialect (like sqlite, postgresql, etc).`:`SQL dialect used: "${this.dialectName}".`}getWhitespace(){$y.lastIndex=this.index;let e=$y.exec(this.input);if(e)return this.index+=e[0].length,e[0]}getNextToken(){for(let e of this.rules){let n=this.match(e);if(n)return n}}match(e){e.regex.lastIndex=this.index;let n=e.regex.exec(this.input);if(n){let r=n[0],i={type:e.type,raw:r,text:e.text?e.text(r):r,start:this.index};return e.key&&(i.key=e.key(r)),this.index+=r.length,i}}}});var _K,nLe,rLe,$R,NK=W(()=>{_K=/\/\*/uy,nLe=/[\s\S]/uy,rLe=/\*\//uy,$R=class{constructor(){this.lastIndex=0}exec(e){let n="",r,i=0;if(r=this.matchSection(_K,e))n+=r,i++;else return null;for(;i>0;)if(r=this.matchSection(_K,e))n+=r,i++;else if(r=this.matchSection(rLe,e))n+=r,i--;else if(r=this.matchSection(nLe,e))n+=r;else return null;return[n]}matchSection(e,n){e.lastIndex=this.lastIndex;let r=e.exec(n);return r&&(this.lastIndex+=r[0].length),r?r[0]:null}}});var If,Jt,OK=W(()=>{Pr();gK();IK();FR();Bc();NK();If=class{constructor(e,n){this.cfg=e,this.dialectName=n,this.rulesBeforeParams=this.buildRulesBeforeParams(e),this.rulesAfterParams=this.buildRulesAfterParams(e)}tokenize(e,n){let r=[...this.rulesBeforeParams,...this.buildParamRules(this.cfg,n),...this.rulesAfterParams],i=new gf(r,this.dialectName).tokenize(e);return this.cfg.postProcess?this.cfg.postProcess(i):i}buildRulesBeforeParams(e){var n,r,i;return this.validRules([{type:V.DISABLE_COMMENT,regex:/(\/\* *sql-formatter-disable *\*\/[\s\S]*?(?:\/\* *sql-formatter-enable *\*\/|$))/uy},{type:V.BLOCK_COMMENT,regex:e.nestedBlockComments?new $R:/(\/\*[^]*?\*\/)/uy},{type:V.LINE_COMMENT,regex:SK((n=e.lineCommentTypes)!==null&&n!==void 0?n:["--"])},{type:V.QUOTED_IDENTIFIER,regex:Vy(e.identTypes)},{type:V.NUMBER,regex:e.underscoresInNumbers?/(?:0x[0-9a-fA-F_]+|0b[01_]+|(?:-\s*)?(?:[0-9_]*\.[0-9_]+|[0-9_]+(?:\.[0-9_]*)?)(?:[eE][-+]?[0-9_]+(?:\.[0-9_]+)?)?)(?![\w\p{Alphabetic}])/uy:/(?:0x[0-9a-fA-F]+|0b[01]+|(?:-\s*)?(?:[0-9]*\.[0-9]+|[0-9]+(?:\.[0-9]*)?)(?:[eE][-+]?[0-9]+(?:\.[0-9]+)?)?)(?![\w\p{Alphabetic}])/uy},{type:V.RESERVED_KEYWORD_PHRASE,regex:Fi((r=e.reservedKeywordPhrases)!==null&&r!==void 0?r:[],e.identChars),text:Jt},{type:V.RESERVED_DATA_TYPE_PHRASE,regex:Fi((i=e.reservedDataTypePhrases)!==null&&i!==void 0?i:[],e.identChars),text:Jt},{type:V.CASE,regex:/CASE\b/iuy,text:Jt},{type:V.END,regex:/END\b/iuy,text:Jt},{type:V.BETWEEN,regex:/BETWEEN\b/iuy,text:Jt},{type:V.LIMIT,regex:e.reservedClauses.includes("LIMIT")?/LIMIT\b/iuy:void 0,text:Jt},{type:V.RESERVED_CLAUSE,regex:Fi(e.reservedClauses,e.identChars),text:Jt},{type:V.RESERVED_SELECT,regex:Fi(e.reservedSelect,e.identChars),text:Jt},{type:V.RESERVED_SET_OPERATION,regex:Fi(e.reservedSetOperations,e.identChars),text:Jt},{type:V.WHEN,regex:/WHEN\b/iuy,text:Jt},{type:V.ELSE,regex:/ELSE\b/iuy,text:Jt},{type:V.THEN,regex:/THEN\b/iuy,text:Jt},{type:V.RESERVED_JOIN,regex:Fi(e.reservedJoins,e.identChars),text:Jt},{type:V.AND,regex:/AND\b/iuy,text:Jt},{type:V.OR,regex:/OR\b/iuy,text:Jt},{type:V.XOR,regex:e.supportsXor?/XOR\b/iuy:void 0,text:Jt},...e.operatorKeyword?[{type:V.OPERATOR,regex:/OPERATOR *\([^)]+\)/iuy}]:[],{type:V.RESERVED_FUNCTION_NAME,regex:Fi(e.reservedFunctionNames,e.identChars),text:Jt},{type:V.RESERVED_DATA_TYPE,regex:Fi(e.reservedDataTypes,e.identChars),text:Jt},{type:V.RESERVED_KEYWORD,regex:Fi(e.reservedKeywords,e.identChars),text:Jt}])}buildRulesAfterParams(e){var n,r;return this.validRules([{type:V.VARIABLE,regex:e.variableTypes?AK(e.variableTypes):void 0},{type:V.STRING,regex:Vy(e.stringTypes)},{type:V.IDENTIFIER,regex:mK(e.identChars)},{type:V.DELIMITER,regex:/[;]/uy},{type:V.COMMA,regex:/[,]/y},{type:V.OPEN_PAREN,regex:Wy("open",e.extraParens)},{type:V.CLOSE_PAREN,regex:Wy("close",e.extraParens)},{type:V.OPERATOR,regex:ky(["+","-","/",">","<","=","<>","<=",">=","!=",...(n=e.operators)!==null&&n!==void 0?n:[]])},{type:V.ASTERISK,regex:/[*]/uy},{type:V.PROPERTY_ACCESS_OPERATOR,regex:ky([".",...(r=e.propertyAccessOperators)!==null&&r!==void 0?r:[]])}])}buildParamRules(e,n){var r,i,s,o,a;let l={named:n?.named||((r=e.paramTypes)===null||r===void 0?void 0:r.named)||[],quoted:n?.quoted||((i=e.paramTypes)===null||i===void 0?void 0:i.quoted)||[],numbered:n?.numbered||((s=e.paramTypes)===null||s===void 0?void 0:s.numbered)||[],positional:typeof n?.positional=="boolean"?n.positional:(o=e.paramTypes)===null||o===void 0?void 0:o.positional,custom:n?.custom||((a=e.paramTypes)===null||a===void 0?void 0:a.custom)||[]};return this.validRules([{type:V.NAMED_PARAMETER,regex:HR(l.named,qy(e.paramChars||e.identChars)),key:c=>c.slice(1)},{type:V.QUOTED_PARAMETER,regex:HR(l.quoted,Yy(e.identTypes)),key:c=>(({tokenKey:u,quoteChar:d})=>u.replace(new RegExp(hr("\\"+d),"gu"),d))({tokenKey:c.slice(2,-1),quoteChar:c.slice(-1)})},{type:V.NUMBERED_PARAMETER,regex:HR(l.numbered,"[0-9]+"),key:c=>c.slice(1)},{type:V.POSITIONAL_PARAMETER,regex:l.positional?/[?]/y:void 0},...l.custom.map(c=>{var u;return{type:V.CUSTOM_PARAMETER,regex:bs(c.regex),key:(u=c.key)!==null&&u!==void 0?u:(d=>d)}})])}validRules(e){return e.filter(n=>!!n.regex)}},Jt=t=>Uc(t.toUpperCase())});var CK,bK,iLe,sLe,yK=W(()=>{OK();CK=new Map,bK=t=>{let e=CK.get(t);return e||(e=iLe(t),CK.set(t,e)),e},iLe=t=>({tokenizer:new If(t.tokenizerOptions,t.name),formatOptions:sLe(t.formatOptions)}),sLe=t=>{var e;return{alwaysDenseOperators:t.alwaysDenseOperators||[],onelineClauses:Object.fromEntries(t.onelineClauses.map(n=>[n,!0])),tabularOnelineClauses:Object.fromEntries(((e=t.tabularOnelineClauses)!==null&&e!==void 0?e:t.onelineClauses).map(n=>[n,!0]))}}});function wK(t){return t.indentStyle==="tabularLeft"||t.indentStyle==="tabularRight"?" ".repeat(10):t.useTabs?"	":" ".repeat(t.tabWidth)}function Ma(t){return t.indentStyle==="tabularLeft"||t.indentStyle==="tabularRight"}var zy=W(()=>{});var _f,LK=W(()=>{_f=class{constructor(e){this.params=e,this.index=0}get({key:e,text:n}){return this.params?e?this.params[e]:this.params[this.index++]:n}getPositionalParameterIndex(){return this.index}setPositionalParameterIndex(e){this.index=e}}});var PK=O((DK,WR)=>{(function(t,e){typeof WR=="object"&&WR.exports?WR.exports=e():t.nearley=e()})(DK,function(){function t(l,c,u){return this.id=++t.highestId,this.name=l,this.symbols=c,this.postprocess=u,this}t.highestId=0,t.prototype.toString=function(l){var c=typeof l>"u"?this.symbols.map(a).join(" "):this.symbols.slice(0,l).map(a).join(" ")+" \u25CF "+this.symbols.slice(l).map(a).join(" ");return this.name+" \u2192 "+c};function e(l,c,u,d){this.rule=l,this.dot=c,this.reference=u,this.data=[],this.wantedBy=d,this.isComplete=this.dot===l.symbols.length}e.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},e.prototype.nextState=function(l){var c=new e(this.rule,this.dot+1,this.reference,this.wantedBy);return c.left=this,c.right=l,c.isComplete&&(c.data=c.build(),c.right=void 0),c},e.prototype.build=function(){var l=[],c=this;do l.push(c.right.data),c=c.left;while(c.left);return l.reverse(),l},e.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,s.fail))};function n(l,c){this.grammar=l,this.index=c,this.states=[],this.wants={},this.scannable=[],this.completed={}}n.prototype.process=function(l){for(var c=this.states,u=this.wants,d=this.completed,E=0;E<c.length;E++){var f=c[E];if(f.isComplete){if(f.finish(),f.data!==s.fail){for(var p=f.wantedBy,h=p.length;h--;){var T=p[h];this.complete(T,f)}if(f.reference===this.index){var S=f.rule.name;(this.completed[S]=this.completed[S]||[]).push(f)}}}else{var S=f.rule.symbols[f.dot];if(typeof S!="string"){this.scannable.push(f);continue}if(u[S]){if(u[S].push(f),d.hasOwnProperty(S))for(var m=d[S],h=0;h<m.length;h++){var R=m[h];this.complete(f,R)}}else u[S]=[f],this.predict(S)}}},n.prototype.predict=function(l){for(var c=this.grammar.byName[l]||[],u=0;u<c.length;u++){var d=c[u],E=this.wants[l],f=new e(d,0,this.index,E);this.states.push(f)}},n.prototype.complete=function(l,c){var u=l.nextState(c);this.states.push(u)};function r(l,c){this.rules=l,this.start=c||this.rules[0].name;var u=this.byName={};this.rules.forEach(function(d){u.hasOwnProperty(d.name)||(u[d.name]=[]),u[d.name].push(d)})}r.fromCompiled=function(d,c){var u=d.Lexer;d.ParserStart&&(c=d.ParserStart,d=d.ParserRules);var d=d.map(function(f){return new t(f.name,f.symbols,f.postprocess)}),E=new r(d,c);return E.lexer=u,E};function i(){this.reset("")}i.prototype.reset=function(l,c){this.buffer=l,this.index=0,this.line=c?c.line:1,this.lastLineBreak=c?-c.col:0},i.prototype.next=function(){if(this.index<this.buffer.length){var l=this.buffer[this.index++];return l===`
`&&(this.line+=1,this.lastLineBreak=this.index),{value:l}}},i.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},i.prototype.formatError=function(l,c){var u=this.buffer;if(typeof u=="string"){var d=u.split(`
`).slice(Math.max(0,this.line-5),this.line),E=u.indexOf(`
`,this.index);E===-1&&(E=u.length);var f=this.index-this.lastLineBreak,p=String(this.line).length;return c+=" at line "+this.line+" col "+f+`:

`,c+=d.map(function(T,S){return h(this.line-d.length+S+1,p)+" "+T},this).join(`
`),c+=`
`+h("",p+f)+`^
`,c}else return c+" at index "+(this.index-1);function h(T,S){var m=String(T);return Array(S-m.length+1).join(" ")+m}};function s(l,c,u){if(l instanceof r)var d=l,u=c;else var d=r.fromCompiled(l,c);this.grammar=d,this.options={keepHistory:!1,lexer:d.lexer||new i};for(var E in u||{})this.options[E]=u[E];this.lexer=this.options.lexer,this.lexerState=void 0;var f=new n(d,0),p=this.table=[f];f.wants[d.start]=[],f.predict(d.start),f.process(),this.current=0}s.fail={},s.prototype.feed=function(l){var c=this.lexer;c.reset(l,this.lexerState);for(var u;;){try{if(u=c.next(),!u)break}catch(w){var p=new n(this.grammar,this.current+1);this.table.push(p);var d=new Error(this.reportLexerError(w));throw d.offset=this.current,d.token=w.token,d}var E=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var f=this.current+1,p=new n(this.grammar,f);this.table.push(p);for(var h=u.text!==void 0?u.text:u.value,T=c.constructor===i?u.value:u,S=E.scannable,m=S.length;m--;){var R=S[m],A=R.rule.symbols[R.dot];if(A.test?A.test(T):A.type?A.type===u.type:A.literal===h){var I=R.nextState({data:T,token:u,isToken:!0,reference:f-1});p.states.push(I)}}if(p.process(),p.states.length===0){var d=new Error(this.reportError(u));throw d.offset=this.current,d.token=u,d}this.options.keepHistory&&(E.lexerState=c.save()),this.current++}return E&&(this.lexerState=c.save()),this.results=this.finish(),this},s.prototype.reportLexerError=function(l){var c,u,d=l.token;return d?(c="input "+JSON.stringify(d.text[0])+" (lexer error)",u=this.lexer.formatError(d,"Syntax error")):(c="input (lexer error)",u=l.message),this.reportErrorCommon(u,c)},s.prototype.reportError=function(l){var c=(l.type?l.type+" token: ":"")+JSON.stringify(l.value!==void 0?l.value:l),u=this.lexer.formatError(l,"Syntax error");return this.reportErrorCommon(u,c)},s.prototype.reportErrorCommon=function(l,c){var u=[];u.push(l);var d=this.table.length-2,E=this.table[d],f=E.states.filter(function(h){var T=h.rule.symbols[h.dot];return T&&typeof T!="string"});if(f.length===0)u.push("Unexpected "+c+`. I did not expect any more input. Here is the state of my parse table:
`),this.displayStateStack(E.states,u);else{u.push("Unexpected "+c+`. Instead, I was expecting to see one of the following:
`);var p=f.map(function(h){return this.buildFirstStateStack(h,[])||[h]},this);p.forEach(function(h){var T=h[0],S=T.rule.symbols[T.dot],m=this.getSymbolDisplay(S);u.push("A "+m+" based on:"),this.displayStateStack(h,u)},this)}return u.push(""),u.join(`
`)},s.prototype.displayStateStack=function(l,c){for(var u,d=0,E=0;E<l.length;E++){var f=l[E],p=f.rule.toString(f.dot);p===u?d++:(d>0&&c.push("    ^ "+d+" more lines identical to this"),d=0,c.push("    "+p)),u=p}},s.prototype.getSymbolDisplay=function(l){return o(l)},s.prototype.buildFirstStateStack=function(l,c){if(c.indexOf(l)!==-1)return null;if(l.wantedBy.length===0)return[l];var u=l.wantedBy[0],d=[l].concat(c),E=this.buildFirstStateStack(u,d);return E===null?null:[l].concat(E)},s.prototype.save=function(){var l=this.table[this.current];return l.lexerState=this.lexerState,l},s.prototype.restore=function(l){var c=l.index;this.current=c,this.table[c]=l,this.table.splice(c+1),this.lexerState=l.lexerState,this.results=this.finish()},s.prototype.rewind=function(l){if(!this.options.keepHistory)throw new Error("set option `keepHistory` to enable rewinding");this.restore(this.table[l])},s.prototype.finish=function(){var l=[],c=this.grammar.start,u=this.table[this.table.length-1];return u.states.forEach(function(d){d.rule.name===c&&d.dot===d.rule.symbols.length&&d.reference===0&&d.data!==s.fail&&l.push(d)}),l.map(function(d){return d.data})};function o(l){var c=typeof l;if(c==="string")return l;if(c==="object"){if(l.literal)return JSON.stringify(l.literal);if(l instanceof RegExp)return"character matching "+l;if(l.type)return l.type+" token";if(l.test)return"token matching "+String(l.test);throw new Error("Unknown symbol type: "+l)}}function a(l){var c=typeof l;if(c==="string")return l;if(c==="object"){if(l.literal)return JSON.stringify(l.literal);if(l instanceof RegExp)return l.toString();if(l.type)return"%"+l.type;if(l.test)return"<"+String(l.test)+">";throw new Error("Unknown symbol type: "+l)}}return{Parser:s,Grammar:r,Rule:t}})});function xK(t){return t.map(oLe).map(aLe).map(lLe).map(cLe).map(uLe)}var oLe,aLe,lLe,cLe,uLe,dLe,Fc,vK,MK,fLe,UK=W(()=>{Pr();oLe=(t,e,n)=>{if(TR(t.type)){let r=dLe(n,e);if(r&&r.type===V.PROPERTY_ACCESS_OPERATOR)return Object.assign(Object.assign({},t),{type:V.IDENTIFIER,text:t.raw});let i=Fc(n,e);if(i&&i.type===V.PROPERTY_ACCESS_OPERATOR)return Object.assign(Object.assign({},t),{type:V.IDENTIFIER,text:t.raw})}return t},aLe=(t,e,n)=>{if(t.type===V.RESERVED_FUNCTION_NAME){let r=Fc(n,e);if(!r||!vK(r))return Object.assign(Object.assign({},t),{type:V.IDENTIFIER,text:t.raw})}return t},lLe=(t,e,n)=>{if(t.type===V.RESERVED_DATA_TYPE){let r=Fc(n,e);if(r&&vK(r))return Object.assign(Object.assign({},t),{type:V.RESERVED_PARAMETERIZED_DATA_TYPE})}return t},cLe=(t,e,n)=>{if(t.type===V.IDENTIFIER){let r=Fc(n,e);if(r&&MK(r))return Object.assign(Object.assign({},t),{type:V.ARRAY_IDENTIFIER})}return t},uLe=(t,e,n)=>{if(t.type===V.RESERVED_DATA_TYPE){let r=Fc(n,e);if(r&&MK(r))return Object.assign(Object.assign({},t),{type:V.ARRAY_KEYWORD})}return t},dLe=(t,e)=>Fc(t,e,-1),Fc=(t,e,n=1)=>{let r=1;for(;t[e+r*n]&&fLe(t[e+r*n]);)r++;return t[e+r*n]},vK=t=>t.type===V.OPEN_PAREN&&t.text==="(",MK=t=>t.type===V.OPEN_PAREN&&t.text==="[",fLe=t=>t.type===V.BLOCK_COMMENT||t.type===V.LINE_COMMENT});var Ua,jy=W(()=>{Xy();Pr();Ua=class{constructor(e){this.tokenize=e,this.index=0,this.tokens=[],this.input=""}reset(e,n){this.input=e,this.index=0,this.tokens=this.tokenize(e)}next(){return this.tokens[this.index++]}save(){}formatError(e){let{line:n,col:r}=GR(this.input,e.start);return`Parse error at token: ${e.text} at line ${n} column ${r}`}has(e){return e in V}}});var ne,Ky=W(()=>{(function(t){t.statement="statement",t.clause="clause",t.set_operation="set_operation",t.function_call="function_call",t.parameterized_data_type="parameterized_data_type",t.array_subscript="array_subscript",t.property_access="property_access",t.parenthesis="parenthesis",t.between_predicate="between_predicate",t.case_expression="case_expression",t.case_when="case_when",t.case_else="case_else",t.limit_clause="limit_clause",t.all_columns_asterisk="all_columns_asterisk",t.literal="literal",t.identifier="identifier",t.keyword="keyword",t.data_type="data_type",t.parameter="parameter",t.operator="operator",t.comma="comma",t.line_comment="line_comment",t.block_comment="block_comment",t.disable_comment="disable_comment"})(ne=ne||(ne={}))});function Jy(t){return t[0]}var fe,Ba,cn,BK,un,ELe,hLe,FK,HK=W(()=>{jy();Ky();Pr();fe=new Ua(t=>[]),Ba=([[t]])=>t,cn=t=>({type:ne.keyword,tokenType:t.type,text:t.text,raw:t.raw}),BK=t=>({type:ne.data_type,text:t.text,raw:t.raw}),un=(t,{leading:e,trailing:n})=>(e?.length&&(t=Object.assign(Object.assign({},t),{leadingComments:e})),n?.length&&(t=Object.assign(Object.assign({},t),{trailingComments:n})),t),ELe=(t,{leading:e,trailing:n})=>{if(e?.length){let[r,...i]=t;t=[un(r,{leading:e}),...i]}if(n?.length){let r=t.slice(0,-1),i=t[t.length-1];t=[...r,un(i,{trailing:n})]}return t},hLe={Lexer:fe,ParserRules:[{name:"main$ebnf$1",symbols:[]},{name:"main$ebnf$1",symbols:["main$ebnf$1","statement"],postprocess:t=>t[0].concat([t[1]])},{name:"main",symbols:["main$ebnf$1"],postprocess:([t])=>{let e=t[t.length-1];return e&&!e.hasSemicolon?e.children.length>0?t:t.slice(0,-1):t}},{name:"statement$subexpression$1",symbols:[fe.has("DELIMITER")?{type:"DELIMITER"}:DELIMITER]},{name:"statement$subexpression$1",symbols:[fe.has("EOF")?{type:"EOF"}:EOF]},{name:"statement",symbols:["expressions_or_clauses","statement$subexpression$1"],postprocess:([t,[e]])=>({type:ne.statement,children:t,hasSemicolon:e.type===V.DELIMITER})},{name:"expressions_or_clauses$ebnf$1",symbols:[]},{name:"expressions_or_clauses$ebnf$1",symbols:["expressions_or_clauses$ebnf$1","free_form_sql"],postprocess:t=>t[0].concat([t[1]])},{name:"expressions_or_clauses$ebnf$2",symbols:[]},{name:"expressions_or_clauses$ebnf$2",symbols:["expressions_or_clauses$ebnf$2","clause"],postprocess:t=>t[0].concat([t[1]])},{name:"expressions_or_clauses",symbols:["expressions_or_clauses$ebnf$1","expressions_or_clauses$ebnf$2"],postprocess:([t,e])=>[...t,...e]},{name:"clause$subexpression$1",symbols:["limit_clause"]},{name:"clause$subexpression$1",symbols:["select_clause"]},{name:"clause$subexpression$1",symbols:["other_clause"]},{name:"clause$subexpression$1",symbols:["set_operation"]},{name:"clause",symbols:["clause$subexpression$1"],postprocess:Ba},{name:"limit_clause$ebnf$1$subexpression$1$ebnf$1",symbols:["free_form_sql"]},{name:"limit_clause$ebnf$1$subexpression$1$ebnf$1",symbols:["limit_clause$ebnf$1$subexpression$1$ebnf$1","free_form_sql"],postprocess:t=>t[0].concat([t[1]])},{name:"limit_clause$ebnf$1$subexpression$1",symbols:[fe.has("COMMA")?{type:"COMMA"}:COMMA,"limit_clause$ebnf$1$subexpression$1$ebnf$1"]},{name:"limit_clause$ebnf$1",symbols:["limit_clause$ebnf$1$subexpression$1"],postprocess:Jy},{name:"limit_clause$ebnf$1",symbols:[],postprocess:()=>null},{name:"limit_clause",symbols:[fe.has("LIMIT")?{type:"LIMIT"}:LIMIT,"_","expression_chain_","limit_clause$ebnf$1"],postprocess:([t,e,n,r])=>{if(r){let[i,s]=r;return{type:ne.limit_clause,limitKw:un(cn(t),{trailing:e}),offset:n,count:s}}else return{type:ne.limit_clause,limitKw:un(cn(t),{trailing:e}),count:n}}},{name:"select_clause$subexpression$1$ebnf$1",symbols:[]},{name:"select_clause$subexpression$1$ebnf$1",symbols:["select_clause$subexpression$1$ebnf$1","free_form_sql"],postprocess:t=>t[0].concat([t[1]])},{name:"select_clause$subexpression$1",symbols:["all_columns_asterisk","select_clause$subexpression$1$ebnf$1"]},{name:"select_clause$subexpression$1$ebnf$2",symbols:[]},{name:"select_clause$subexpression$1$ebnf$2",symbols:["select_clause$subexpression$1$ebnf$2","free_form_sql"],postprocess:t=>t[0].concat([t[1]])},{name:"select_clause$subexpression$1",symbols:["asteriskless_free_form_sql","select_clause$subexpression$1$ebnf$2"]},{name:"select_clause",symbols:[fe.has("RESERVED_SELECT")?{type:"RESERVED_SELECT"}:RESERVED_SELECT,"select_clause$subexpression$1"],postprocess:([t,[e,n]])=>({type:ne.clause,nameKw:cn(t),children:[e,...n]})},{name:"select_clause",symbols:[fe.has("RESERVED_SELECT")?{type:"RESERVED_SELECT"}:RESERVED_SELECT],postprocess:([t])=>({type:ne.clause,nameKw:cn(t),children:[]})},{name:"all_columns_asterisk",symbols:[fe.has("ASTERISK")?{type:"ASTERISK"}:ASTERISK],postprocess:()=>({type:ne.all_columns_asterisk})},{name:"other_clause$ebnf$1",symbols:[]},{name:"other_clause$ebnf$1",symbols:["other_clause$ebnf$1","free_form_sql"],postprocess:t=>t[0].concat([t[1]])},{name:"other_clause",symbols:[fe.has("RESERVED_CLAUSE")?{type:"RESERVED_CLAUSE"}:RESERVED_CLAUSE,"other_clause$ebnf$1"],postprocess:([t,e])=>({type:ne.clause,nameKw:cn(t),children:e})},{name:"set_operation$ebnf$1",symbols:[]},{name:"set_operation$ebnf$1",symbols:["set_operation$ebnf$1","free_form_sql"],postprocess:t=>t[0].concat([t[1]])},{name:"set_operation",symbols:[fe.has("RESERVED_SET_OPERATION")?{type:"RESERVED_SET_OPERATION"}:RESERVED_SET_OPERATION,"set_operation$ebnf$1"],postprocess:([t,e])=>({type:ne.set_operation,nameKw:cn(t),children:e})},{name:"expression_chain_$ebnf$1",symbols:["expression_with_comments_"]},{name:"expression_chain_$ebnf$1",symbols:["expression_chain_$ebnf$1","expression_with_comments_"],postprocess:t=>t[0].concat([t[1]])},{name:"expression_chain_",symbols:["expression_chain_$ebnf$1"],postprocess:Jy},{name:"expression_chain$ebnf$1",symbols:[]},{name:"expression_chain$ebnf$1",symbols:["expression_chain$ebnf$1","_expression_with_comments"],postprocess:t=>t[0].concat([t[1]])},{name:"expression_chain",symbols:["expression","expression_chain$ebnf$1"],postprocess:([t,e])=>[t,...e]},{name:"andless_expression_chain$ebnf$1",symbols:[]},{name:"andless_expression_chain$ebnf$1",symbols:["andless_expression_chain$ebnf$1","_andless_expression_with_comments"],postprocess:t=>t[0].concat([t[1]])},{name:"andless_expression_chain",symbols:["andless_expression","andless_expression_chain$ebnf$1"],postprocess:([t,e])=>[t,...e]},{name:"expression_with_comments_",symbols:["expression","_"],postprocess:([t,e])=>un(t,{trailing:e})},{name:"_expression_with_comments",symbols:["_","expression"],postprocess:([t,e])=>un(e,{leading:t})},{name:"_andless_expression_with_comments",symbols:["_","andless_expression"],postprocess:([t,e])=>un(e,{leading:t})},{name:"free_form_sql$subexpression$1",symbols:["asteriskless_free_form_sql"]},{name:"free_form_sql$subexpression$1",symbols:["asterisk"]},{name:"free_form_sql",symbols:["free_form_sql$subexpression$1"],postprocess:Ba},{name:"asteriskless_free_form_sql$subexpression$1",symbols:["asteriskless_andless_expression"]},{name:"asteriskless_free_form_sql$subexpression$1",symbols:["logic_operator"]},{name:"asteriskless_free_form_sql$subexpression$1",symbols:["comma"]},{name:"asteriskless_free_form_sql$subexpression$1",symbols:["comment"]},{name:"asteriskless_free_form_sql$subexpression$1",symbols:["other_keyword"]},{name:"asteriskless_free_form_sql",symbols:["asteriskless_free_form_sql$subexpression$1"],postprocess:Ba},{name:"expression$subexpression$1",symbols:["andless_expression"]},{name:"expression$subexpression$1",symbols:["logic_operator"]},{name:"expression",symbols:["expression$subexpression$1"],postprocess:Ba},{name:"andless_expression$subexpression$1",symbols:["asteriskless_andless_expression"]},{name:"andless_expression$subexpression$1",symbols:["asterisk"]},{name:"andless_expression",symbols:["andless_expression$subexpression$1"],postprocess:Ba},{name:"asteriskless_andless_expression$subexpression$1",symbols:["atomic_expression"]},{name:"asteriskless_andless_expression$subexpression$1",symbols:["between_predicate"]},{name:"asteriskless_andless_expression$subexpression$1",symbols:["case_expression"]},{name:"asteriskless_andless_expression",symbols:["asteriskless_andless_expression$subexpression$1"],postprocess:Ba},{name:"atomic_expression$subexpression$1",symbols:["array_subscript"]},{name:"atomic_expression$subexpression$1",symbols:["function_call"]},{name:"atomic_expression$subexpression$1",symbols:["property_access"]},{name:"atomic_expression$subexpression$1",symbols:["parenthesis"]},{name:"atomic_expression$subexpression$1",symbols:["curly_braces"]},{name:"atomic_expression$subexpression$1",symbols:["square_brackets"]},{name:"atomic_expression$subexpression$1",symbols:["operator"]},{name:"atomic_expression$subexpression$1",symbols:["identifier"]},{name:"atomic_expression$subexpression$1",symbols:["parameter"]},{name:"atomic_expression$subexpression$1",symbols:["literal"]},{name:"atomic_expression$subexpression$1",symbols:["data_type"]},{name:"atomic_expression$subexpression$1",symbols:["keyword"]},{name:"atomic_expression",symbols:["atomic_expression$subexpression$1"],postprocess:Ba},{name:"array_subscript",symbols:[fe.has("ARRAY_IDENTIFIER")?{type:"ARRAY_IDENTIFIER"}:ARRAY_IDENTIFIER,"_","square_brackets"],postprocess:([t,e,n])=>({type:ne.array_subscript,array:un({type:ne.identifier,quoted:!1,text:t.text},{trailing:e}),parenthesis:n})},{name:"array_subscript",symbols:[fe.has("ARRAY_KEYWORD")?{type:"ARRAY_KEYWORD"}:ARRAY_KEYWORD,"_","square_brackets"],postprocess:([t,e,n])=>({type:ne.array_subscript,array:un(cn(t),{trailing:e}),parenthesis:n})},{name:"function_call",symbols:[fe.has("RESERVED_FUNCTION_NAME")?{type:"RESERVED_FUNCTION_NAME"}:RESERVED_FUNCTION_NAME,"_","parenthesis"],postprocess:([t,e,n])=>({type:ne.function_call,nameKw:un(cn(t),{trailing:e}),parenthesis:n})},{name:"parenthesis",symbols:[{literal:"("},"expressions_or_clauses",{literal:")"}],postprocess:([t,e,n])=>({type:ne.parenthesis,children:e,openParen:"(",closeParen:")"})},{name:"curly_braces$ebnf$1",symbols:[]},{name:"curly_braces$ebnf$1",symbols:["curly_braces$ebnf$1","free_form_sql"],postprocess:t=>t[0].concat([t[1]])},{name:"curly_braces",symbols:[{literal:"{"},"curly_braces$ebnf$1",{literal:"}"}],postprocess:([t,e,n])=>({type:ne.parenthesis,children:e,openParen:"{",closeParen:"}"})},{name:"square_brackets$ebnf$1",symbols:[]},{name:"square_brackets$ebnf$1",symbols:["square_brackets$ebnf$1","free_form_sql"],postprocess:t=>t[0].concat([t[1]])},{name:"square_brackets",symbols:[{literal:"["},"square_brackets$ebnf$1",{literal:"]"}],postprocess:([t,e,n])=>({type:ne.parenthesis,children:e,openParen:"[",closeParen:"]"})},{name:"property_access$subexpression$1",symbols:["identifier"]},{name:"property_access$subexpression$1",symbols:["array_subscript"]},{name:"property_access$subexpression$1",symbols:["all_columns_asterisk"]},{name:"property_access$subexpression$1",symbols:["parameter"]},{name:"property_access",symbols:["atomic_expression","_",fe.has("PROPERTY_ACCESS_OPERATOR")?{type:"PROPERTY_ACCESS_OPERATOR"}:PROPERTY_ACCESS_OPERATOR,"_","property_access$subexpression$1"],postprocess:([t,e,n,r,[i]])=>({type:ne.property_access,object:un(t,{trailing:e}),operator:n.text,property:un(i,{leading:r})})},{name:"between_predicate",symbols:[fe.has("BETWEEN")?{type:"BETWEEN"}:BETWEEN,"_","andless_expression_chain","_",fe.has("AND")?{type:"AND"}:AND,"_","andless_expression"],postprocess:([t,e,n,r,i,s,o])=>({type:ne.between_predicate,betweenKw:cn(t),expr1:ELe(n,{leading:e,trailing:r}),andKw:cn(i),expr2:[un(o,{leading:s})]})},{name:"case_expression$ebnf$1",symbols:["expression_chain_"],postprocess:Jy},{name:"case_expression$ebnf$1",symbols:[],postprocess:()=>null},{name:"case_expression$ebnf$2",symbols:[]},{name:"case_expression$ebnf$2",symbols:["case_expression$ebnf$2","case_clause"],postprocess:t=>t[0].concat([t[1]])},{name:"case_expression",symbols:[fe.has("CASE")?{type:"CASE"}:CASE,"_","case_expression$ebnf$1","case_expression$ebnf$2",fe.has("END")?{type:"END"}:END],postprocess:([t,e,n,r,i])=>({type:ne.case_expression,caseKw:un(cn(t),{trailing:e}),endKw:cn(i),expr:n||[],clauses:r})},{name:"case_clause",symbols:[fe.has("WHEN")?{type:"WHEN"}:WHEN,"_","expression_chain_",fe.has("THEN")?{type:"THEN"}:THEN,"_","expression_chain_"],postprocess:([t,e,n,r,i,s])=>({type:ne.case_when,whenKw:un(cn(t),{trailing:e}),thenKw:un(cn(r),{trailing:i}),condition:n,result:s})},{name:"case_clause",symbols:[fe.has("ELSE")?{type:"ELSE"}:ELSE,"_","expression_chain_"],postprocess:([t,e,n])=>({type:ne.case_else,elseKw:un(cn(t),{trailing:e}),result:n})},{name:"comma$subexpression$1",symbols:[fe.has("COMMA")?{type:"COMMA"}:COMMA]},{name:"comma",symbols:["comma$subexpression$1"],postprocess:([[t]])=>({type:ne.comma})},{name:"asterisk$subexpression$1",symbols:[fe.has("ASTERISK")?{type:"ASTERISK"}:ASTERISK]},{name:"asterisk",symbols:["asterisk$subexpression$1"],postprocess:([[t]])=>({type:ne.operator,text:t.text})},{name:"operator$subexpression$1",symbols:[fe.has("OPERATOR")?{type:"OPERATOR"}:OPERATOR]},{name:"operator",symbols:["operator$subexpression$1"],postprocess:([[t]])=>({type:ne.operator,text:t.text})},{name:"identifier$subexpression$1",symbols:[fe.has("IDENTIFIER")?{type:"IDENTIFIER"}:IDENTIFIER]},{name:"identifier$subexpression$1",symbols:[fe.has("QUOTED_IDENTIFIER")?{type:"QUOTED_IDENTIFIER"}:QUOTED_IDENTIFIER]},{name:"identifier$subexpression$1",symbols:[fe.has("VARIABLE")?{type:"VARIABLE"}:VARIABLE]},{name:"identifier",symbols:["identifier$subexpression$1"],postprocess:([[t]])=>({type:ne.identifier,quoted:t.type!=="IDENTIFIER",text:t.text})},{name:"parameter$subexpression$1",symbols:[fe.has("NAMED_PARAMETER")?{type:"NAMED_PARAMETER"}:NAMED_PARAMETER]},{name:"parameter$subexpression$1",symbols:[fe.has("QUOTED_PARAMETER")?{type:"QUOTED_PARAMETER"}:QUOTED_PARAMETER]},{name:"parameter$subexpression$1",symbols:[fe.has("NUMBERED_PARAMETER")?{type:"NUMBERED_PARAMETER"}:NUMBERED_PARAMETER]},{name:"parameter$subexpression$1",symbols:[fe.has("POSITIONAL_PARAMETER")?{type:"POSITIONAL_PARAMETER"}:POSITIONAL_PARAMETER]},{name:"parameter$subexpression$1",symbols:[fe.has("CUSTOM_PARAMETER")?{type:"CUSTOM_PARAMETER"}:CUSTOM_PARAMETER]},{name:"parameter",symbols:["parameter$subexpression$1"],postprocess:([[t]])=>({type:ne.parameter,key:t.key,text:t.text})},{name:"literal$subexpression$1",symbols:[fe.has("NUMBER")?{type:"NUMBER"}:NUMBER]},{name:"literal$subexpression$1",symbols:[fe.has("STRING")?{type:"STRING"}:STRING]},{name:"literal",symbols:["literal$subexpression$1"],postprocess:([[t]])=>({type:ne.literal,text:t.text})},{name:"keyword$subexpression$1",symbols:[fe.has("RESERVED_KEYWORD")?{type:"RESERVED_KEYWORD"}:RESERVED_KEYWORD]},{name:"keyword$subexpression$1",symbols:[fe.has("RESERVED_KEYWORD_PHRASE")?{type:"RESERVED_KEYWORD_PHRASE"}:RESERVED_KEYWORD_PHRASE]},{name:"keyword$subexpression$1",symbols:[fe.has("RESERVED_JOIN")?{type:"RESERVED_JOIN"}:RESERVED_JOIN]},{name:"keyword",symbols:["keyword$subexpression$1"],postprocess:([[t]])=>cn(t)},{name:"data_type$subexpression$1",symbols:[fe.has("RESERVED_DATA_TYPE")?{type:"RESERVED_DATA_TYPE"}:RESERVED_DATA_TYPE]},{name:"data_type$subexpression$1",symbols:[fe.has("RESERVED_DATA_TYPE_PHRASE")?{type:"RESERVED_DATA_TYPE_PHRASE"}:RESERVED_DATA_TYPE_PHRASE]},{name:"data_type",symbols:["data_type$subexpression$1"],postprocess:([[t]])=>BK(t)},{name:"data_type",symbols:[fe.has("RESERVED_PARAMETERIZED_DATA_TYPE")?{type:"RESERVED_PARAMETERIZED_DATA_TYPE"}:RESERVED_PARAMETERIZED_DATA_TYPE,"_","parenthesis"],postprocess:([t,e,n])=>({type:ne.parameterized_data_type,dataType:un(BK(t),{trailing:e}),parenthesis:n})},{name:"logic_operator$subexpression$1",symbols:[fe.has("AND")?{type:"AND"}:AND]},{name:"logic_operator$subexpression$1",symbols:[fe.has("OR")?{type:"OR"}:OR]},{name:"logic_operator$subexpression$1",symbols:[fe.has("XOR")?{type:"XOR"}:XOR]},{name:"logic_operator",symbols:["logic_operator$subexpression$1"],postprocess:([[t]])=>cn(t)},{name:"other_keyword$subexpression$1",symbols:[fe.has("WHEN")?{type:"WHEN"}:WHEN]},{name:"other_keyword$subexpression$1",symbols:[fe.has("THEN")?{type:"THEN"}:THEN]},{name:"other_keyword$subexpression$1",symbols:[fe.has("ELSE")?{type:"ELSE"}:ELSE]},{name:"other_keyword$subexpression$1",symbols:[fe.has("END")?{type:"END"}:END]},{name:"other_keyword",symbols:["other_keyword$subexpression$1"],postprocess:([[t]])=>cn(t)},{name:"_$ebnf$1",symbols:[]},{name:"_$ebnf$1",symbols:["_$ebnf$1","comment"],postprocess:t=>t[0].concat([t[1]])},{name:"_",symbols:["_$ebnf$1"],postprocess:([t])=>t},{name:"comment",symbols:[fe.has("LINE_COMMENT")?{type:"LINE_COMMENT"}:LINE_COMMENT],postprocess:([t])=>({type:ne.line_comment,text:t.text,precedingWhitespace:t.precedingWhitespace})},{name:"comment",symbols:[fe.has("BLOCK_COMMENT")?{type:"BLOCK_COMMENT"}:BLOCK_COMMENT],postprocess:([t])=>({type:ne.block_comment,text:t.text,precedingWhitespace:t.precedingWhitespace})},{name:"comment",symbols:[fe.has("DISABLE_COMMENT")?{type:"DISABLE_COMMENT"}:DISABLE_COMMENT],postprocess:([t])=>({type:ne.disable_comment,text:t.text,precedingWhitespace:t.precedingWhitespace})}],ParserStart:"main"},FK=hLe});function $K(t){let e={},n=new Ua(i=>[...xK(t.tokenize(i,e)),ty(i.length)]),r=new pLe(TLe.fromCompiled(FK),{lexer:n});return{parse:(i,s)=>{e=s;let{results:o}=r.feed(i);if(o.length===1)return o[0];throw o.length===0?new Error("Parse error: Invalid SQL"):new Error(`Parse error: Ambiguous grammar
${JSON.stringify(o,void 0,2)}`)}}}var GK,pLe,TLe,WK=W(()=>{GK=Q(PK(),1);UK();HK();jy();Pr();({Parser:pLe,Grammar:TLe}=GK.default)});var Y,Fa,SLe,RLe,kR=W(()=>{Bc();(function(t){t[t.SPACE=0]="SPACE",t[t.NO_SPACE=1]="NO_SPACE",t[t.NO_NEWLINE=2]="NO_NEWLINE",t[t.NEWLINE=3]="NEWLINE",t[t.MANDATORY_NEWLINE=4]="MANDATORY_NEWLINE",t[t.INDENT=5]="INDENT",t[t.SINGLE_INDENT=6]="SINGLE_INDENT"})(Y=Y||(Y={}));Fa=class{constructor(e){this.indentation=e,this.items=[]}add(...e){for(let n of e)switch(n){case Y.SPACE:this.items.push(Y.SPACE);break;case Y.NO_SPACE:this.trimHorizontalWhitespace();break;case Y.NO_NEWLINE:this.trimWhitespace();break;case Y.NEWLINE:this.trimHorizontalWhitespace(),this.addNewline(Y.NEWLINE);break;case Y.MANDATORY_NEWLINE:this.trimHorizontalWhitespace(),this.addNewline(Y.MANDATORY_NEWLINE);break;case Y.INDENT:this.addIndentation();break;case Y.SINGLE_INDENT:this.items.push(Y.SINGLE_INDENT);break;default:this.items.push(n)}}trimHorizontalWhitespace(){for(;SLe(To(this.items));)this.items.pop()}trimWhitespace(){for(;RLe(To(this.items));)this.items.pop()}addNewline(e){if(this.items.length>0)switch(To(this.items)){case Y.NEWLINE:this.items.pop(),this.items.push(e);break;case Y.MANDATORY_NEWLINE:break;default:this.items.push(e);break}}addIndentation(){for(let e=0;e<this.indentation.getLevel();e++)this.items.push(Y.SINGLE_INDENT)}toString(){return this.items.map(e=>this.itemToString(e)).join("")}getLayoutItems(){return this.items}itemToString(e){switch(e){case Y.SPACE:return" ";case Y.NEWLINE:case Y.MANDATORY_NEWLINE:return`
`;case Y.SINGLE_INDENT:return this.indentation.getSingleIndent();default:return e}}},SLe=t=>t===Y.SPACE||t===Y.SINGLE_INDENT,RLe=t=>t===Y.SPACE||t===Y.SINGLE_INDENT||t===Y.NEWLINE});function YR(t,e){if(e==="standard")return t;let n=[];return t.length>=10&&t.includes(" ")&&([t,...n]=t.split(" ")),e==="tabularLeft"?t=t.padEnd(9," "):t=t.padStart(9," "),t+["",...n].join(" ")}function Qy(t){return s6(t)||t===V.RESERVED_CLAUSE||t===V.RESERVED_SELECT||t===V.RESERVED_SET_OPERATION||t===V.RESERVED_JOIN||t===V.LIMIT}var kK=W(()=>{Pr()});var Zy,ALe,Ha,ew=W(()=>{Bc();Zy="top-level",ALe="block-level",Ha=class{constructor(e){this.indent=e,this.indentTypes=[]}getSingleIndent(){return this.indent}getLevel(){return this.indentTypes.length}increaseTopLevel(){this.indentTypes.push(Zy)}increaseBlockLevel(){this.indentTypes.push(ALe)}decreaseTopLevel(){this.indentTypes.length>0&&To(this.indentTypes)===Zy&&this.indentTypes.pop()}decreaseBlockLevel(){for(;this.indentTypes.length>0&&this.indentTypes.pop()===Zy;);}}});var Nf,Hc,YK=W(()=>{ew();kR();Nf=class extends Fa{constructor(e){super(new Ha("")),this.expressionWidth=e,this.length=0,this.trailingSpace=!1}add(...e){if(e.forEach(n=>this.addToLength(n)),this.length>this.expressionWidth)throw new Hc;super.add(...e)}addToLength(e){if(typeof e=="string")this.length+=e.length,this.trailingSpace=!1;else{if(e===Y.MANDATORY_NEWLINE||e===Y.NEWLINE)throw new Hc;e===Y.INDENT||e===Y.SINGLE_INDENT||e===Y.SPACE?this.trailingSpace||(this.length++,this.trailingSpace=!0):(e===Y.NO_NEWLINE||e===Y.NO_SPACE)&&this.trailingSpace&&(this.trailingSpace=!1,this.length--)}}},Hc=class extends Error{}});var Of,VK=W(()=>{Bc();zy();Pr();Ky();kR();kK();YK();Of=class t{constructor({cfg:e,dialectCfg:n,params:r,layout:i,inline:s=!1}){this.inline=!1,this.nodes=[],this.index=-1,this.cfg=e,this.dialectCfg=n,this.inline=s,this.params=r,this.layout=i}format(e){for(this.nodes=e,this.index=0;this.index<this.nodes.length;this.index++)this.formatNode(this.nodes[this.index]);return this.layout}formatNode(e){this.formatComments(e.leadingComments),this.formatNodeWithoutComments(e),this.formatComments(e.trailingComments)}formatNodeWithoutComments(e){switch(e.type){case ne.function_call:return this.formatFunctionCall(e);case ne.parameterized_data_type:return this.formatParameterizedDataType(e);case ne.array_subscript:return this.formatArraySubscript(e);case ne.property_access:return this.formatPropertyAccess(e);case ne.parenthesis:return this.formatParenthesis(e);case ne.between_predicate:return this.formatBetweenPredicate(e);case ne.case_expression:return this.formatCaseExpression(e);case ne.case_when:return this.formatCaseWhen(e);case ne.case_else:return this.formatCaseElse(e);case ne.clause:return this.formatClause(e);case ne.set_operation:return this.formatSetOperation(e);case ne.limit_clause:return this.formatLimitClause(e);case ne.all_columns_asterisk:return this.formatAllColumnsAsterisk(e);case ne.literal:return this.formatLiteral(e);case ne.identifier:return this.formatIdentifier(e);case ne.parameter:return this.formatParameter(e);case ne.operator:return this.formatOperator(e);case ne.comma:return this.formatComma(e);case ne.line_comment:return this.formatLineComment(e);case ne.block_comment:return this.formatBlockComment(e);case ne.disable_comment:return this.formatBlockComment(e);case ne.data_type:return this.formatDataType(e);case ne.keyword:return this.formatKeywordNode(e)}}formatFunctionCall(e){this.withComments(e.nameKw,()=>{this.layout.add(this.showFunctionKw(e.nameKw))}),this.formatNode(e.parenthesis)}formatParameterizedDataType(e){this.withComments(e.dataType,()=>{this.layout.add(this.showDataType(e.dataType))}),this.formatNode(e.parenthesis)}formatArraySubscript(e){let n;switch(e.array.type){case ne.data_type:n=this.showDataType(e.array);break;case ne.keyword:n=this.showKw(e.array);break;default:n=this.showIdentifier(e.array);break}this.withComments(e.array,()=>{this.layout.add(n)}),this.formatNode(e.parenthesis)}formatPropertyAccess(e){this.formatNode(e.object),this.layout.add(Y.NO_SPACE,e.operator),this.formatNode(e.property)}formatParenthesis(e){let n=this.formatInlineExpression(e.children);n?(this.layout.add(e.openParen),this.layout.add(...n.getLayoutItems()),this.layout.add(Y.NO_SPACE,e.closeParen,Y.SPACE)):(this.layout.add(e.openParen,Y.NEWLINE),Ma(this.cfg)?(this.layout.add(Y.INDENT),this.layout=this.formatSubExpression(e.children)):(this.layout.indentation.increaseBlockLevel(),this.layout.add(Y.INDENT),this.layout=this.formatSubExpression(e.children),this.layout.indentation.decreaseBlockLevel()),this.layout.add(Y.NEWLINE,Y.INDENT,e.closeParen,Y.SPACE))}formatBetweenPredicate(e){this.layout.add(this.showKw(e.betweenKw),Y.SPACE),this.layout=this.formatSubExpression(e.expr1),this.layout.add(Y.NO_SPACE,Y.SPACE,this.showNonTabularKw(e.andKw),Y.SPACE),this.layout=this.formatSubExpression(e.expr2),this.layout.add(Y.SPACE)}formatCaseExpression(e){this.formatNode(e.caseKw),this.layout.indentation.increaseBlockLevel(),this.layout=this.formatSubExpression(e.expr),this.layout=this.formatSubExpression(e.clauses),this.layout.indentation.decreaseBlockLevel(),this.layout.add(Y.NEWLINE,Y.INDENT),this.formatNode(e.endKw)}formatCaseWhen(e){this.layout.add(Y.NEWLINE,Y.INDENT),this.formatNode(e.whenKw),this.layout=this.formatSubExpression(e.condition),this.formatNode(e.thenKw),this.layout=this.formatSubExpression(e.result)}formatCaseElse(e){this.layout.add(Y.NEWLINE,Y.INDENT),this.formatNode(e.elseKw),this.layout=this.formatSubExpression(e.result)}formatClause(e){this.isOnelineClause(e)?this.formatClauseInOnelineStyle(e):Ma(this.cfg)?this.formatClauseInTabularStyle(e):this.formatClauseInIndentedStyle(e)}isOnelineClause(e){return Ma(this.cfg)?this.dialectCfg.tabularOnelineClauses[e.nameKw.text]:this.dialectCfg.onelineClauses[e.nameKw.text]}formatClauseInIndentedStyle(e){this.layout.add(Y.NEWLINE,Y.INDENT,this.showKw(e.nameKw),Y.NEWLINE),this.layout.indentation.increaseTopLevel(),this.layout.add(Y.INDENT),this.layout=this.formatSubExpression(e.children),this.layout.indentation.decreaseTopLevel()}formatClauseInOnelineStyle(e){this.layout.add(Y.NEWLINE,Y.INDENT,this.showKw(e.nameKw),Y.SPACE),this.layout=this.formatSubExpression(e.children)}formatClauseInTabularStyle(e){this.layout.add(Y.NEWLINE,Y.INDENT,this.showKw(e.nameKw),Y.SPACE),this.layout.indentation.increaseTopLevel(),this.layout=this.formatSubExpression(e.children),this.layout.indentation.decreaseTopLevel()}formatSetOperation(e){this.layout.add(Y.NEWLINE,Y.INDENT,this.showKw(e.nameKw),Y.NEWLINE),this.layout.add(Y.INDENT),this.layout=this.formatSubExpression(e.children)}formatLimitClause(e){this.withComments(e.limitKw,()=>{this.layout.add(Y.NEWLINE,Y.INDENT,this.showKw(e.limitKw))}),this.layout.indentation.increaseTopLevel(),Ma(this.cfg)?this.layout.add(Y.SPACE):this.layout.add(Y.NEWLINE,Y.INDENT),e.offset?(this.layout=this.formatSubExpression(e.offset),this.layout.add(Y.NO_SPACE,",",Y.SPACE),this.layout=this.formatSubExpression(e.count)):this.layout=this.formatSubExpression(e.count),this.layout.indentation.decreaseTopLevel()}formatAllColumnsAsterisk(e){this.layout.add("*",Y.SPACE)}formatLiteral(e){this.layout.add(e.text,Y.SPACE)}formatIdentifier(e){this.layout.add(this.showIdentifier(e),Y.SPACE)}formatParameter(e){this.layout.add(this.params.get(e),Y.SPACE)}formatOperator({text:e}){this.cfg.denseOperators||this.dialectCfg.alwaysDenseOperators.includes(e)?this.layout.add(Y.NO_SPACE,e):e===":"?this.layout.add(Y.NO_SPACE,e,Y.SPACE):this.layout.add(e,Y.SPACE)}formatComma(e){this.inline?this.layout.add(Y.NO_SPACE,",",Y.SPACE):this.layout.add(Y.NO_SPACE,",",Y.NEWLINE,Y.INDENT)}withComments(e,n){this.formatComments(e.leadingComments),n(),this.formatComments(e.trailingComments)}formatComments(e){e&&e.forEach(n=>{n.type===ne.line_comment?this.formatLineComment(n):this.formatBlockComment(n)})}formatLineComment(e){BR(e.precedingWhitespace||"")?this.layout.add(Y.NEWLINE,Y.INDENT,e.text,Y.MANDATORY_NEWLINE,Y.INDENT):this.layout.getLayoutItems().length>0?this.layout.add(Y.NO_NEWLINE,Y.SPACE,e.text,Y.MANDATORY_NEWLINE,Y.INDENT):this.layout.add(e.text,Y.MANDATORY_NEWLINE,Y.INDENT)}formatBlockComment(e){e.type===ne.block_comment&&this.isMultilineBlockComment(e)?(this.splitBlockComment(e.text).forEach(n=>{this.layout.add(Y.NEWLINE,Y.INDENT,n)}),this.layout.add(Y.NEWLINE,Y.INDENT)):this.layout.add(e.text,Y.SPACE)}isMultilineBlockComment(e){return BR(e.text)||BR(e.precedingWhitespace||"")}isDocComment(e){let n=e.split(/\n/);return/^\/\*\*?$/.test(n[0])&&n.slice(1,n.length-1).every(r=>/^\s*\*/.test(r))&&/^\s*\*\/$/.test(To(n))}splitBlockComment(e){return this.isDocComment(e)?e.split(/\n/).map(n=>/^\s*\*/.test(n)?" "+n.replace(/^\s*/,""):n):e.split(/\n/).map(n=>n.replace(/^\s*/,""))}formatSubExpression(e){return new t({cfg:this.cfg,dialectCfg:this.dialectCfg,params:this.params,layout:this.layout,inline:this.inline}).format(e)}formatInlineExpression(e){let n=this.params.getPositionalParameterIndex();try{return new t({cfg:this.cfg,dialectCfg:this.dialectCfg,params:this.params,layout:new Nf(this.cfg.expressionWidth),inline:!0}).format(e)}catch(r){if(r instanceof Hc){this.params.setPositionalParameterIndex(n);return}else throw r}}formatKeywordNode(e){switch(e.tokenType){case V.RESERVED_JOIN:return this.formatJoin(e);case V.AND:case V.OR:case V.XOR:return this.formatLogicalOperator(e);default:return this.formatKeyword(e)}}formatJoin(e){Ma(this.cfg)?(this.layout.indentation.decreaseTopLevel(),this.layout.add(Y.NEWLINE,Y.INDENT,this.showKw(e),Y.SPACE),this.layout.indentation.increaseTopLevel()):this.layout.add(Y.NEWLINE,Y.INDENT,this.showKw(e),Y.SPACE)}formatKeyword(e){this.layout.add(this.showKw(e),Y.SPACE)}formatLogicalOperator(e){this.cfg.logicalOperatorNewline==="before"?Ma(this.cfg)?(this.layout.indentation.decreaseTopLevel(),this.layout.add(Y.NEWLINE,Y.INDENT,this.showKw(e),Y.SPACE),this.layout.indentation.increaseTopLevel()):this.layout.add(Y.NEWLINE,Y.INDENT,this.showKw(e),Y.SPACE):this.layout.add(this.showKw(e),Y.NEWLINE,Y.INDENT)}formatDataType(e){this.layout.add(this.showDataType(e),Y.SPACE)}showKw(e){return Qy(e.tokenType)?YR(this.showNonTabularKw(e),this.cfg.indentStyle):this.showNonTabularKw(e)}showNonTabularKw(e){switch(this.cfg.keywordCase){case"preserve":return Uc(e.raw);case"upper":return e.text;case"lower":return e.text.toLowerCase()}}showFunctionKw(e){return Qy(e.tokenType)?YR(this.showNonTabularFunctionKw(e),this.cfg.indentStyle):this.showNonTabularFunctionKw(e)}showNonTabularFunctionKw(e){switch(this.cfg.functionCase){case"preserve":return Uc(e.raw);case"upper":return e.text;case"lower":return e.text.toLowerCase()}}showIdentifier(e){if(e.quoted)return e.text;switch(this.cfg.identifierCase){case"preserve":return e.text;case"upper":return e.text.toUpperCase();case"lower":return e.text.toLowerCase()}}showDataType(e){switch(this.cfg.dataTypeCase){case"preserve":return Uc(e.raw);case"upper":return e.text;case"lower":return e.text.toLowerCase()}}}});var Cf,qK=W(()=>{zy();LK();WK();VK();kR();ew();Cf=class{constructor(e,n){this.dialect=e,this.cfg=n,this.params=new _f(this.cfg.params)}format(e){let n=this.parse(e);return this.formatAst(n).trimEnd()}parse(e){return $K(this.dialect.tokenizer).parse(e,this.cfg.paramTypes||{})}formatAst(e){return e.map(n=>this.formatStatement(n)).join(`
`.repeat(this.cfg.linesBetweenQueries+1))}formatStatement(e){let n=new Of({cfg:this.cfg,dialectCfg:this.dialect.formatOptions,params:this.params,layout:new Fa(new Ha(wK(this.cfg)))}).format(e.children);return e.hasSemicolon&&(this.cfg.newlineBeforeSemicolon?n.add(Y.NEWLINE,";"):n.add(Y.NO_NEWLINE,";")),n.toString()}}});function XK(t){let e=["multilineLists","newlineBeforeOpenParen","newlineBeforeCloseParen","aliasAs","commaPosition","tabulateAlias"];for(let n of e)if(n in t)throw new ys(`${n} config is no more supported.`);if(t.expressionWidth<=0)throw new ys(`expressionWidth config must be positive number. Received ${t.expressionWidth} instead.`);if(t.params&&!mLe(t.params)&&console.warn('WARNING: All "params" option values should be strings.'),t.paramTypes&&!gLe(t.paramTypes))throw new ys("Empty regex given in custom paramTypes. That would result in matching infinite amount of parameters.");return t}function mLe(t){return(t instanceof Array?t:Object.values(t)).every(n=>typeof n=="string")}function gLe(t){return t.custom&&Array.isArray(t.custom)?t.custom.every(e=>e.regex!==""):!0}var ys,tw=W(()=>{ys=class extends Error{}});var ILe,zK,nw,_Le,jK,rw,KK=W(()=>{EK();yK();qK();tw();ILe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},zK={bigquery:"bigquery",db2:"db2",db2i:"db2i",duckdb:"duckdb",hive:"hive",mariadb:"mariadb",mysql:"mysql",n1ql:"n1ql",plsql:"plsql",postgresql:"postgresql",redshift:"redshift",spark:"spark",sqlite:"sqlite",sql:"sql",tidb:"tidb",trino:"trino",transactsql:"transactsql",tsql:"transactsql",singlestoredb:"singlestoredb",snowflake:"snowflake"},nw=Object.keys(zK),_Le={tabWidth:2,useTabs:!1,keywordCase:"preserve",identifierCase:"preserve",dataTypeCase:"preserve",functionCase:"preserve",indentStyle:"standard",logicalOperatorNewline:"before",expressionWidth:50,linesBetweenQueries:1,denseOperators:!1,newlineBeforeSemicolon:!1},jK=(t,e={})=>{if(typeof e.language=="string"&&!nw.includes(e.language))throw new ys(`Unsupported SQL dialect: ${e.language}`);let n=zK[e.language||"sql"];return rw(t,Object.assign(Object.assign({},e),{dialect:Hy[n]}))},rw=(t,e)=>{var{dialect:n}=e,r=ILe(e,["dialect"]);if(typeof t!="string")throw new Error("Invalid query argument. Expected string, instead got "+typeof t);let i=XK(Object.assign(Object.assign({},_Le),r));return new Cf(bK(n),i).format(t)}});var JK={};pt(JK,{ConfigError:()=>ys,bigquery:()=>SR,db2:()=>RR,db2i:()=>AR,duckdb:()=>mR,expandPhrases:()=>x,format:()=>jK,formatDialect:()=>rw,hive:()=>gR,mariadb:()=>IR,mysql:()=>_R,n1ql:()=>CR,plsql:()=>bR,postgresql:()=>yR,redshift:()=>wR,singlestoredb:()=>MR,snowflake:()=>UR,spark:()=>LR,sql:()=>PR,sqlite:()=>DR,supportedDialects:()=>nw,tidb:()=>NR,transactsql:()=>vR,trino:()=>xR});var QK=W(()=>{KK();Mt();tw();ry();sy();ay();cy();dy();Ey();py();Sy();Ry();my();Iy();Ny();Cy();yy();Ly();Py();vy();Uy();Fy()});var r4={};pt(r4,{ExplainPlanView:()=>iw,parseExplainOutput:()=>NLe});function NLe(t){let e=t.split(`
`).filter(d=>d.trim()),n=t.includes("QUERY VERBOSE PLAN:")||t.includes("Node 1."),r=e.map(d=>d.replace(/^NOTICE:\s*/i,"").trim()).filter(d=>d&&!d.startsWith("QUERY PLAN")&&!d.startsWith("QUERY VERBOSE")),i=[],s=[],o=0,a=0,l=r.findIndex(d=>d.includes("PLANTEXT:")),c=l>=0?r.slice(l+1).filter(d=>!d.startsWith("(")&&!d.includes("locus=")):r,u=[];for(let d of c){if(!d.trim()||d.startsWith("(xpath_")||d.includes("locus="))continue;let E=d.match(/^(\s*)/)?.[1]?.length||0,f=Math.floor(E/3),p=d.match(/^[\s]*(?:[lr]:\s*)?([\w\s-]+?)(?:\s+table\s+"(\w+)")?(?:\s+{[^}]*})?\s*\(cost=([\d.]+)\.\.([\d.]+)\s+rows=(\d+)\s+width=(\d+)\s+conf=([\d.]+)\)/i);if(p){let[,h,T,S,m,R,A,I]=p,w=h.trim(),g={id:++o,type:w,table:T,cost:{start:parseFloat(S),end:parseFloat(m)},rows:parseInt(R),width:parseInt(A),confidence:parseFloat(I),indent:f,children:[],raw:d.trim(),warnings:[]};for(OLe(g),s.push(...g.warnings),g.cost.end>a&&(a=g.cost.end);u.length>0&&u[u.length-1].indent>=f;)u.pop();u.length>0?u[u.length-1].children.push(g):i.push(g),u.push(g)}}return{nodes:i,rawText:t,isVerbose:n,totalCost:a,warnings:s}}function OLe(t){t.type.includes("Sequential Scan")&&t.rows>5e5&&t.warnings.push({type:"warning",message:`Sequential Scan on ${t.table||"table"} (${t.rows.toLocaleString()} rows) - consider adding an index`,icon:"\u26A0\uFE0F"}),t.type.includes("Nested Loop")&&t.rows>1e5&&t.warnings.push({type:"critical",message:`Nested Loop producing ${t.rows.toLocaleString()} rows - potential performance issue`,icon:"\u{1F534}"}),t.cost.end>1e10?t.warnings.push({type:"critical",message:`Very high estimated cost: ${t.cost.end.toExponential(2)}`,icon:"\u{1F534}"}):t.cost.end>1e7&&t.warnings.push({type:"warning",message:`High estimated cost: ${t.cost.end.toLocaleString()}`,icon:"\u26A0\uFE0F"}),t.confidence===0&&t.warnings.push({type:"info",message:"Low confidence estimate (conf=0) - statistics may be outdated",icon:"\u2139\uFE0F"})}function CLe(t){return t.includes("Sequential Scan")?"#e74c3c":t.includes("Index Scan")?"#27ae60":t.includes("Nested Loop")?"#e67e22":t.includes("Hash Join")?"#3498db":t.includes("Merge Join")?"#9b59b6":t.includes("Aggregate")?"#1abc9c":t.includes("Group")?"#16a085":t.includes("Sort")?"#f39c12":t.includes("Limit")?"#95a5a6":t.includes("Sub-query")?"#34495e":"#7f8c8d"}function t4(t,e=0){return t.map(n=>{let r=n.children.length>0,i=CLe(n.type),s=n.warnings.map(o=>`<span class="warning-badge warning-${o.type}" title="${o.message}">${o.icon}</span>`).join("");return`
        <div class="plan-node" style="--node-color: ${i}">
            <div class="node-header">
                ${r?'<span class="toggle-btn">\u25BC</span>':'<span class="toggle-spacer"></span>'}
                <span class="node-type" style="background-color: ${i}">${n.type}</span>
                ${n.table?`<span class="node-table">${n.table}${n.alias?` (${n.alias})`:""}</span>`:""}
                ${s}
            </div>
            <div class="node-metrics">
                <span class="metric"><b>Cost:</b> ${ZK(n.cost.start)}..${ZK(n.cost.end)}</span>
                <span class="metric"><b>Rows:</b> ${n.rows.toLocaleString()}</span>
                <span class="metric"><b>Width:</b> ${n.width}</span>
                <span class="metric ${n.confidence===0?"low-conf":""}"><b>Conf:</b> ${n.confidence}%</span>
            </div>
            ${r?`<div class="node-children">${t4(n.children,e+1)}</div>`:""}
        </div>`}).join("")}function ZK(t){return t>1e6?t.toExponential(1):t.toLocaleString(void 0,{maximumFractionDigits:1})}function n4(t){return t.reduce((e,n)=>e+1+n4(n.children),0)}function e4(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function bLe(){let t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let n=0;n<32;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}var xr,iw,i4=W(()=>{"use strict";xr=Q(require("vscode"));iw=class t{constructor(e,n,r,i){this._disposables=[];this._panel=e,this._extensionUri=n,this._update(r,i),this._panel.onDidDispose(()=>this.dispose(),null,this._disposables),this._panel.webview.onDidReceiveMessage(s=>{switch(s.command){case"copyPlan":xr.env.clipboard.writeText(r.rawText),xr.window.showInformationMessage("Plan copied to clipboard");return}},null,this._disposables)}static{this.viewType="netezza.explainPlan"}static createOrShow(e,n,r){let i=xr.window.activeTextEditor?xr.ViewColumn.Beside:void 0,s=xr.window.createWebviewPanel(t.viewType,"Query Execution Plan",i||xr.ViewColumn.One,{enableScripts:!0,localResourceRoots:[xr.Uri.joinPath(e,"media")],retainContextWhenHidden:!0});new t(s,e,n,r)}dispose(){for(this._panel.dispose();this._disposables.length;){let e=this._disposables.pop();e&&e.dispose()}}_update(e,n){this._panel.title="Query Execution Plan",this._panel.webview.html=this._getHtmlForWebview(e,n)}_getHtmlForWebview(e,n){let r=this._panel.webview.asWebviewUri(xr.Uri.joinPath(this._extensionUri,"media","explainPlan.css")),i=bLe(),s=e4(n);return`<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Security-Policy" content="default-src 'none'; style-src ${this._panel.webview.cspSource} 'unsafe-inline'; script-src 'nonce-${i}';">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="${r}" rel="stylesheet">
    <title>Query Execution Plan</title>
</head>
<body>
    <div class="container">
        <div class="header">
            <h2>Query Execution Plan</h2>
            <div class="header-actions">
                <button id="copyBtn" class="btn">\u{1F4CB} Copy Plan</button>
                <button id="expandAllBtn" class="btn">\u2795 Expand All</button>
                <button id="collapseAllBtn" class="btn">\u2796 Collapse All</button>
            </div>
        </div>

        ${e.warnings.length>0?`
        <div class="warnings-summary">
            <h3>\u26A0\uFE0F Performance Issues Detected (${e.warnings.length})</h3>
            <ul>
                ${e.warnings.map(o=>`<li class="warning-${o.type}">${o.icon} ${o.message}</li>`).join("")}
            </ul>
        </div>
        `:`
        <div class="no-warnings">
            <span>\u2705 No obvious performance issues detected</span>
        </div>
        `}

        <div class="stats-bar">
            <div class="stat">
                <span class="stat-label">Total Cost:</span>
                <span class="stat-value">${e.totalCost>1e6?e.totalCost.toExponential(2):e.totalCost.toLocaleString()}</span>
            </div>
            <div class="stat">
                <span class="stat-label">Nodes:</span>
                <span class="stat-value">${n4(e.nodes)}</span>
            </div>
        </div>

        <div class="query-section">
            <h3>Query</h3>
            <pre class="query-text">${s}</pre>
        </div>

        <div class="plan-section">
            <h3>Execution Plan</h3>
            <div id="planTree" class="plan-tree">
                ${t4(e.nodes)}
            </div>
        </div>

        <div class="raw-section">
            <details>
                <summary>Raw Plan Output</summary>
                <pre class="raw-plan">${e4(e.rawText)}</pre>
            </details>
        </div>
    </div>

    <script nonce="${i}">
        const vscode = acquireVsCodeApi();
        
        document.getElementById('copyBtn').addEventListener('click', () => {
            vscode.postMessage({ command: 'copyPlan' });
        });

        document.getElementById('expandAllBtn').addEventListener('click', () => {
            document.querySelectorAll('.node-children').forEach(el => el.style.display = 'block');
            document.querySelectorAll('.toggle-btn').forEach(el => el.textContent = '\u25BC');
        });

        document.getElementById('collapseAllBtn').addEventListener('click', () => {
            document.querySelectorAll('.node-children').forEach(el => el.style.display = 'none');
            document.querySelectorAll('.toggle-btn').forEach(el => el.textContent = '\u25B6');
        });

        document.querySelectorAll('.toggle-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                const node = e.target.closest('.plan-node');
                const children = node.querySelector('.node-children');
                if (children) {
                    const isHidden = children.style.display === 'none';
                    children.style.display = isHidden ? 'block' : 'none';
                    e.target.textContent = isHidden ? '\u25BC' : '\u25B6';
                }
            });
        });
    </script>
</body>
</html>`}}});var PLe={};pt(PLe,{activate:()=>LLe,deactivate:()=>DLe});module.exports=Wi(PLe);var X=Q(require("vscode"));pn();TA();var rr=Q(require("vscode")),lE=class t{constructor(e,n,r){this.extensionUri=n;this.connectionManager=r;this._disposables=[];this._panel=e,this._panel.onDidDispose(()=>this.dispose(),null,this._disposables),this._panel.webview.html=this._getHtmlForWebview(this._panel.webview),this._panel.webview.onDidReceiveMessage(async i=>{switch(i.command){case"save":try{await this.connectionManager.saveConnection(i.data),rr.window.showInformationMessage(`Connection '${i.data.name}' saved and activated!`),this.sendConnectionsToWebview()}catch(s){let o=s instanceof Error?s.message:String(s);rr.window.showErrorMessage(`Error saving: ${o}`)}return;case"delete":try{await rr.window.showWarningMessage(`Are you sure you want to delete '${i.name}'?`,{modal:!0},"Yes","No")==="Yes"&&(await this.connectionManager.deleteConnection(i.name),rr.window.showInformationMessage(`Connection '${i.name}' deleted.`),this.sendConnectionsToWebview())}catch(s){let o=s instanceof Error?s.message:String(s);rr.window.showErrorMessage(`Error deleting: ${o}`)}return;case"loadConnections":this.sendConnectionsToWebview();return}},null,this._disposables)}async sendConnectionsToWebview(){let e=await this.connectionManager.getConnections(),n=this.connectionManager.getActiveConnectionName();await this._panel.webview.postMessage({command:"updateConnections",connections:e,activeName:n})}static createOrShow(e,n){let r=rr.window.activeTextEditor?rr.window.activeTextEditor.viewColumn:void 0;if(t.currentPanel){t.currentPanel._panel.reveal(r);return}let i=rr.window.createWebviewPanel("netezzaLogin","Connect to Netezza",r||rr.ViewColumn.One,{enableScripts:!0,retainContextWhenHidden:!0});t.currentPanel=new t(i,e,n)}dispose(){for(t.currentPanel=void 0,this._panel.dispose();this._disposables.length;){let e=this._disposables.pop();e&&e.dispose()}}_getHtmlForWebview(e){let n=e.asWebviewUri(rr.Uri.joinPath(this.extensionUri,"netezza_icon64.png"));return`<!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>Connect to Netezza</title>
            <style>
                :root {
                    --container-paddding: 20px;
                    --input-padding-vertical: 6px;
                    --input-padding-horizontal: 8px;
                    --input-margin-vertical: 4px;
                    --input-margin-horizontal: 0;
                }
                body {
                    font-family: var(--vscode-font-family);
                    padding: 0;
                    margin: 0;
                    color: var(--vscode-foreground);
                    background-color: var(--vscode-editor-background);
                    display: flex;
                    height: 100vh;
                    overflow: hidden;
                }
                
                /* Sidebar */
                .sidebar {
                    width: 260px;
                    background-color: var(--vscode-sideBar-background);
                    border-right: 1px solid var(--vscode-panel-border);
                    display: flex;
                    flex-direction: column;
                    flex-shrink: 0;
                    user-select: none;
                }
                .sidebar-header {
                    padding: 10px 15px;
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    border-bottom: 1px solid var(--vscode-panel-border);
                    background-color: var(--vscode-sideBarSectionHeader-background);
                }
                .sidebar-title {
                    font-weight: bold;
                    font-size: 11px;
                    text-transform: uppercase;
                    color: var(--vscode-sideBarTitle-foreground);
                }
                .connection-list {
                    flex: 1;
                    overflow-y: auto;
                    padding: 0;
                }
                .connection-item {
                    padding: 8px 15px;
                    cursor: pointer;
                    display: flex;
                    align-items: center;
                    border-left: 3px solid transparent;
                    color: var(--vscode-sideBar-foreground);
                }
                .connection-item:hover {
                    background-color: var(--vscode-list-hoverBackground);
                }
                .connection-item.active {
                    background-color: var(--vscode-list-activeSelectionBackground);
                    color: var(--vscode-list-activeSelectionForeground);
                    border-left-color: var(--vscode-focusBorder);
                }
                .connection-item .name {
                    flex: 1;
                    overflow: hidden;
                    text-overflow: ellipsis;
                    white-space: nowrap;
                    display: flex;
                    align-items: center;
                    gap: 8px;
                }
                .connection-item .status {
                    font-size: 0.8em;
                    margin-left: 5px;
                    opacity: 0.7;
                }

                /* Main Content */
                .main {
                    flex: 1;
                    padding: 40px;
                    overflow-y: auto;
                    display: flex;
                    justify-content: center;
                    align-items: flex-start;
                }
                .form-container {
                    width: 100%;
                    max-width: 500px;
                    background-color: var(--vscode-editorWidget-background);
                    border: 1px solid var(--vscode-widget-border);
                    padding: 30px;
                    border-radius: 4px;
                    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
                }
                
                h2 {
                    margin-top: 0;
                    margin-bottom: 25px;
                    font-size: 1.4em;
                    font-weight: 500;
                    padding-bottom: 10px;
                    border-bottom: 1px solid var(--vscode-panel-border);
                    display: flex;
                    align-items: center;
                    gap: 10px;
                }

                .form-group {
                    margin-bottom: 18px;
                }
                .form-row {
                    display: flex;
                    gap: 15px;
                }
                .form-col {
                    flex: 1;
                }

                label {
                    display: block;
                    margin-bottom: 6px;
                    font-weight: 600;
                    font-size: 12px;
                    color: var(--vscode-input-placeholderForeground);
                    display: flex;
                    align-items: center;
                    gap: 6px;
                }

                input, select {
                    width: 100%;
                    padding: 8px 10px;
                    box-sizing: border-box;
                    background: var(--vscode-input-background);
                    color: var(--vscode-input-foreground);
                    border: 1px solid var(--vscode-input-border);
                    border-radius: 2px;
                    font-family: inherit;
                    font-size: 13px;
                }
                input:focus, select:focus {
                    border-color: var(--vscode-focusBorder);
                    outline: 1px solid var(--vscode-focusBorder);
                }
                
                /* Buttons */
                .actions {
                    margin-top: 30px;
                    display: flex;
                    gap: 12px;
                    padding-top: 20px;
                    border-top: 1px solid var(--vscode-panel-border);
                }
                button {
                    background: var(--vscode-button-background);
                    color: var(--vscode-button-foreground);
                    padding: 8px 16px;
                    border: none;
                    cursor: pointer;
                    border-radius: 2px;
                    font-size: 13px;
                    font-weight: 500;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                }
                button:hover {
                    background: var(--vscode-button-hoverBackground);
                }
                button.secondary {
                    background: var(--vscode-button-secondaryBackground);
                    color: var(--vscode-button-secondaryForeground);
                }
                button.secondary:hover {
                    background: var(--vscode-button-secondaryHoverBackground);
                }
                button.danger {
                    background: var(--vscode-errorForeground);
                    color: white;
                }
                button.icon-btn {
                    padding: 4px;
                    background: transparent;
                    color: var(--vscode-icon-foreground);
                }
                button.icon-btn:hover {
                    background: var(--vscode-toolbar-hoverBackground);
                }

                .icon-img {
                    width: 16px;
                    height: 16px;
                    object-fit: contain;
                }
                .logo-header {
                    width: 32px;
                    height: 32px;
                    margin-right: 10px;
                }

            </style>
        </head>
        <body>
            <div class="sidebar">
                <div class="sidebar-header">
                    <span class="sidebar-title">Saved Connections</span>
                    <button class="icon-btn" id="btnNew" title="New Connection">
                        <svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M14 7v1H8v6H7V8H1V7h6V1h1v6h6z"/></svg>
                    </button>
                </div>
                <div id="connectionList" class="connection-list"></div>
            </div>
            
            <div class="main">
                <div class="form-container">
                    <h2 id="formTitle">
                        <img src="${n}" class="logo-header" />
                        New Connection
                    </h2>
                    
                    <div class="form-group">
                        <label for="name">Connection Name</label>
                        <input type="text" id="name" placeholder="Friendly name (e.g. Production)">
                    </div>

                    <div class="form-group">
                        <label for="dbType">
                            Database Type 
                            <img src="${n}" class="icon-img" />
                        </label>
                        <select id="dbType">
                            <option value="NetezzaSQL">NetezzaSQL</option>
                        </select>
                    </div>

                    <div class="form-row">
                        <div class="form-col">
                            <div class="form-group">
                                <label for="host">Host</label>
                                <input type="text" id="host" placeholder="Hostname or IP">
                            </div>
                        </div>
                        <div class="form-col" style="flex: 0 0 80px;">
                            <div class="form-group">
                                <label for="port">Port</label>
                                <input type="number" id="port" value="5480">
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="database">
                            Database
                        </label>
                        <input type="text" id="database" placeholder="Database name" value="system">
                    </div>

                    <div class="form-row">
                         <div class="form-col">
                            <div class="form-group">
                                <label for="user">User</label>
                                <input type="text" id="user" placeholder="Username">
                            </div>
                         </div>
                         <div class="form-col">
                            <div class="form-group">
                                <label for="password">Password</label>
                                <input type="password" id="password" placeholder="Password">
                            </div>
                         </div>
                    </div>
                    
                    <div class="actions">
                        <button id="btnSave" onclick="save()">Save & Connect</button>
                        <button id="btnDelete" class="danger" onclick="del()" style="display: none;">Delete</button>
                    </div>
                </div>
            </div>

            <script>
                const vscode = acquireVsCodeApi();
                let connections = [];
                let activeName = null;
                let currentEditName = null;
                const iconSrc = "${n}";

                // Load initial data
                window.addEventListener('message', event => {
                    const message = event.data;
                    switch (message.command) {
                        case 'updateConnections':
                            connections = message.connections;
                            activeName = message.activeName;
                            renderList();
                            break;
                    }
                });
                
                vscode.postMessage({ command: 'loadConnections' });

                document.getElementById('btnNew').addEventListener('click', () => {
                    clearForm();
                });

                function renderList() {
                    const list = document.getElementById('connectionList');
                    list.innerHTML = '';
                    
                    connections.forEach(conn => {
                        const div = document.createElement('div');
                        div.className = 'connection-item';
                        if (conn.name === currentEditName) {
                             div.classList.add('active');
                        }
                        
                        div.innerHTML = \`<span class="name"><img src="\${iconSrc}" class="icon-img"> \${conn.name}</span>\`;
                        if (conn.name === activeName) {
                            div.innerHTML += \`<span class="status">\u25CF</span>\`;
                            div.title = 'Active Connection';
                        }
                        
                        div.onclick = () => loadForm(conn);
                        list.appendChild(div);
                    });
                }

                function loadForm(conn) {
                    currentEditName = conn.name;
                    document.getElementById('formTitle').innerHTML = \`<img src="\${iconSrc}" class="logo-header" /> Edit Connection\`;
                    document.getElementById('name').value = conn.name;
                    document.getElementById('dbType').value = conn.dbType || 'NetezzaSQL';
                    document.getElementById('host').value = conn.host;
                    document.getElementById('port').value = conn.port;
                    document.getElementById('database').value = conn.database;
                    document.getElementById('user').value = conn.user;
                    document.getElementById('password').value = conn.password || ''; 
                    
                    document.getElementById('btnDelete').style.display = 'block';
                    renderList();
                }

                function clearForm() {
                    currentEditName = null;
                    document.getElementById('formTitle').innerHTML = \`<img src="\${iconSrc}" class="logo-header" /> New Connection\`;
                    document.getElementById('name').value = '';
                    document.getElementById('dbType').value = 'NetezzaSQL';
                    document.getElementById('host').value = '';
                    document.getElementById('port').value = '5480';
                    document.getElementById('database').value = 'system';
                    document.getElementById('user').value = '';
                    document.getElementById('password').value = '';
                    
                    document.getElementById('btnDelete').style.display = 'none';
                    renderList();
                }

                function save() {
                    const name = document.getElementById('name').value;
                    if (!name) {
                        return; // Add validation UI?
                    }
                    
                    const data = {
                        name: name,
                        dbType: document.getElementById('dbType').value,
                        host: document.getElementById('host').value,
                        port: parseInt(document.getElementById('port').value),
                        database: document.getElementById('database').value,
                        user: document.getElementById('user').value,
                        password: document.getElementById('password').value
                    };
                    
                    vscode.postMessage({
                        command: 'save',
                        data: data
                    });
                }

                function del() {
                    if (currentEditName) {
                        vscode.postMessage({
                            command: 'delete',
                            name: currentEditName
                        });
                    }
                }
            </script>
        </body>
        </html>`}};var Se=Q(require("vscode"));pn();pn();function z8(t,e,n){return`SELECT description FROM ${t}.._v_object_data WHERE objtype='TABLE' AND objname='${n}' AND schema='${e}'`}function eu(t,e,n){return`
        SELECT 
            X.ATTNAME
            , X.FORMAT_TYPE
            , CASE WHEN X.ATTNOTNULL THEN 1 ELSE 0 END AS IS_NOT_NULL
            , X.COLDEFAULT
            , COALESCE(X.DESCRIPTION, '') AS DESCRIPTION
            , MAX(CASE WHEN K.CONTYPE = 'p' THEN 1 ELSE 0 END) AS IS_PK
            , MAX(CASE WHEN K.CONTYPE = 'f' THEN 1 ELSE 0 END) AS IS_FK
        FROM
            ${t}.._V_RELATION_COLUMN X
        INNER JOIN
            ${t}.._V_OBJECT_DATA O ON X.OBJID = O.OBJID
        LEFT JOIN
            ${t}.._V_RELATION_KEYDATA K 
            ON UPPER(K.RELATION) = UPPER(O.OBJNAME) 
            AND UPPER(K.SCHEMA) = UPPER(O.SCHEMA)
            AND UPPER(K.ATTNAME) = UPPER(X.ATTNAME)
            AND K.CONTYPE IN ('p', 'f')
        WHERE
            UPPER(O.OBJNAME) = UPPER('${n}')
            AND UPPER(O.DBNAME) = UPPER('${t}')
            AND UPPER(O.SCHEMA) = UPPER('${e}')
        GROUP BY 
            X.ATTNAME, X.FORMAT_TYPE, X.ATTNOTNULL, X.COLDEFAULT, X.DESCRIPTION, X.ATTNUM
        ORDER BY 
            X.ATTNUM
    `}function j8(t){let e=!1,n=t.IS_NOT_NULL;return typeof n=="boolean"?e=n:typeof n=="number"?e=n===1:typeof n=="string"&&(e=n==="1"||n.toLowerCase()==="true"||n.toLowerCase()==="t"),{attname:t.ATTNAME,formatType:t.FORMAT_TYPE,isNotNull:e,colDefault:t.COLDEFAULT||null,description:t.DESCRIPTION||"",isPk:Number(t.IS_PK)===1,isFk:Number(t.IS_FK)===1}}function K8(t){if(!t)return null;let e=Te(t);return e.length>0&&e[0].DESCRIPTION?e[0].DESCRIPTION:null}function tu(t){if(!t)return[];try{return Te(t).map(j8)}catch(e){return console.error("[TableMetadataProvider] Error parsing column metadata:",e),[]}}async function M0(t,e,n,r){let i=z8(e,n,r),s=eu(e,n,r),[o,a]=await Promise.all([t(i),t(s)]);return{tableComment:K8(o),columns:tu(a)}}function U0(t){return t.map(e=>({ATTNAME:e.attname,FORMAT_TYPE:e.formatType,IS_NOT_NULL:e.isNotNull?1:0,COLDEFAULT:e.colDefault,DESCRIPTION:e.description,IS_PK:e.isPk?1:0,IS_FK:e.isFk?1:0}))}var cE=class{constructor(e,n,r){this.context=e;this.connectionManager=n;this.metadataCache=r;this._onDidChangeTreeData=new Se.EventEmitter;this.onDidChangeTreeData=this._onDidChangeTreeData.event;this.connectionManager.onDidChangeConnections(()=>this.refresh())}refresh(){this._onDidChangeTreeData.fire()}triggerDatabasePrefetch(e,n){this.metadataCache.hasConnectionPrefetchTriggered(e)||(console.log(`[SchemaProvider] Triggering connection prefetch for: ${e}`),this.metadataCache.triggerConnectionPrefetch(e,async r=>{try{return await ue(this.context,r,!0,this.connectionManager,e)}catch(i){console.error("[SchemaProvider] Prefetch query error:",i);return}}))}getTreeItem(e){return e}getParent(e){if(e.contextValue!=="serverInstance"){if(e.contextValue==="database")return new tn(e.connectionName,Se.TreeItemCollapsibleState.Collapsed,"serverInstance",void 0,void 0,void 0,void 0,void 0,e.connectionName,void 0);if(e.contextValue.startsWith("typeGroup"))return new tn(e.dbName,Se.TreeItemCollapsibleState.Collapsed,"database",e.dbName,void 0,void 0,void 0,void 0,e.connectionName);if(e.contextValue.startsWith("netezza:"))return new tn(e.objType,Se.TreeItemCollapsibleState.Collapsed,`typeGroup:${e.objType}`,e.dbName,e.objType,void 0,void 0,void 0,e.connectionName)}}async getChildren(e){if(e){if(e.contextValue==="serverInstance"){if(!e.connectionName)return[];let n=this.metadataCache.getDatabases(e.connectionName);if(n)return n.map(r=>new tn(r.label||r.DATABASE,Se.TreeItemCollapsibleState.Collapsed,"database",r.label||r.DATABASE,void 0,void 0,void 0,void 0,e.connectionName));try{let r=await ue(this.context,"SELECT DATABASE FROM system.._v_database ORDER BY DATABASE",!0,this.connectionManager,e.connectionName);if(!r)return[];let i=Te(r),s=i.map(o=>({DATABASE:o.DATABASE,label:o.DATABASE,kind:9,detail:"Database"}));return this.metadataCache.setDatabases(e.connectionName,s),i.map(o=>new tn(o.DATABASE,Se.TreeItemCollapsibleState.Collapsed,"database",o.DATABASE,void 0,void 0,void 0,void 0,e.connectionName))}catch(r){let i=r instanceof Error?r.message:String(r);return Se.window.showErrorMessage(`Failed to load databases for ${e.connectionName}: ${i}`),[]}}else if(e.contextValue==="database"){if(e.connectionName&&e.dbName&&this.triggerDatabasePrefetch(e.connectionName,e.dbName),e.connectionName&&e.dbName){let n=this.metadataCache.getTypeGroups(e.connectionName,e.dbName);if(n&&n.length>0)return n.map(r=>new tn(r,Se.TreeItemCollapsibleState.Collapsed,`typeGroup:${r}`,e.dbName,r,void 0,void 0,void 0,e.connectionName))}try{let n=`SELECT DISTINCT OBJTYPE FROM ${e.dbName}.._V_OBJECT_DATA WHERE DBNAME = '${e.dbName}' ORDER BY OBJTYPE`,r=await ue(this.context,n,!0,this.connectionManager,e.connectionName),i=r?Te(r):[];if(e.connectionName&&e.dbName){let s=i.map(o=>o.OBJTYPE);this.metadataCache.setTypeGroups(e.connectionName,e.dbName,s)}return i.map(s=>new tn(s.OBJTYPE,Se.TreeItemCollapsibleState.Collapsed,`typeGroup:${s.OBJTYPE}`,e.dbName,s.OBJTYPE,void 0,void 0,void 0,e.connectionName))}catch(n){let r=n instanceof Error?n.message:String(n);return Se.window.showErrorMessage("Failed to load object types: "+r),[]}}else if(e.contextValue.startsWith("typeGroup")){if(e.connectionName&&e.dbName&&(e.objType==="TABLE"||e.objType==="VIEW"||e.objType==="EXTERNAL TABLE")){let n=this.metadataCache.getObjectsWithSchema(e.connectionName,e.dbName);if(n&&n.length>0){let r=e.objType,i=n.filter(s=>{let o=s.item;return o.objType?o.objType===r:r==="VIEW"?o.kind===18:r==="TABLE"?o.kind!==18&&o.detail!=="EXTERNAL TABLE":r==="EXTERNAL TABLE"?o.detail==="EXTERNAL TABLE"||o.detail?.startsWith("EXTERNAL TABLE"):!1});if(i.length>0)return i.map(s=>{let o=s.item;return new tn(typeof o.label=="string"?o.label:o.label?.label||"unknown",Se.TreeItemCollapsibleState.Collapsed,`netezza:${e.objType}`,e.dbName,e.objType,s.schema,s.objId,s.description,e.connectionName,void 0,void 0,void 0,void 0,s.owner)})}}try{let n;e.objType==="PROCEDURE"?n=`SELECT PROCEDURESIGNATURE AS OBJNAME, SCHEMA, OBJID::INT AS OBJID, COALESCE(DESCRIPTION, '') AS DESCRIPTION, OWNER FROM ${e.dbName}.._V_PROCEDURE WHERE DATABASE = '${e.dbName}' ORDER BY PROCEDURESIGNATURE`:n=`SELECT OBJNAME, SCHEMA, OBJID, COALESCE(DESCRIPTION, '') AS DESCRIPTION, OWNER FROM ${e.dbName}.._V_OBJECT_DATA WHERE DBNAME = '${e.dbName}' AND OBJTYPE = '${e.objType}' ORDER BY OBJNAME`;let r=await ue(this.context,n,!0,this.connectionManager,e.connectionName),i=r?Te(r):[];if(e.connectionName&&e.dbName&&(e.objType==="TABLE"||e.objType==="VIEW")){let s=new Map;for(let o of i){let a=o.SCHEMA?`${e.dbName}.${o.SCHEMA}`:`${e.dbName}..`;s.has(a)||s.set(a,{tables:[],idMap:new Map});let l=s.get(a);l.tables.push({label:o.OBJNAME,kind:e.objType==="VIEW"?18:7,detail:o.SCHEMA?e.objType:`${e.objType} (${o.SCHEMA})`,sortText:o.OBJNAME});let c=o.SCHEMA?`${e.dbName}.${o.SCHEMA}.${o.OBJNAME}`:`${e.dbName}..${o.OBJNAME}`;o.OBJID!==void 0&&l.idMap.set(c,o.OBJID)}}return i.map(s=>{let a=["TABLE","VIEW","EXTERNAL TABLE","SYSTEM VIEW","SYSTEM TABLE"].includes(e.objType||"");return new tn(s.OBJNAME,a?Se.TreeItemCollapsibleState.Collapsed:Se.TreeItemCollapsibleState.None,`netezza:${e.objType}`,e.dbName,e.objType,s.SCHEMA,s.OBJID,s.DESCRIPTION,e.connectionName,void 0,void 0,void 0,void 0,s.OWNER)})}catch(n){let r=n instanceof Error?n.message:String(n);return Se.window.showErrorMessage("Failed to load objects: "+r),[]}}else if(e.contextValue.startsWith("netezza:")){let n=e.label,r=e.schema,i=e.dbName;if(e.connectionName&&i){let s=`${i}.${r||""}.${n}`,o=this.metadataCache.getColumns(e.connectionName,s);if(o&&o.length>0&&o[0].isPk!==void 0)return o.map(a=>new tn(a.detail?`${a.label||a.ATTNAME} (${a.detail})`:a.label||a.ATTNAME,Se.TreeItemCollapsibleState.None,"column",e.dbName,void 0,void 0,void 0,a.documentation||"",e.connectionName,n,void 0,a.isPk,a.isFk))}if(!e.connectionName||!i)return[];try{let s=eu(i,r||"",n),o=await ue(this.context,s,!0,this.connectionManager,e.connectionName),a=tu(o),l=`${i}.${r||""}.${n}`,c=a.map(u=>({ATTNAME:u.attname,FORMAT_TYPE:u.formatType,label:u.attname,kind:5,detail:u.formatType,documentation:u.description,isPk:u.isPk,isFk:u.isFk}));return this.metadataCache.setColumns(e.connectionName,l,c),a.map(u=>new tn(`${u.attname} (${u.formatType})`,Se.TreeItemCollapsibleState.None,"column",e.dbName,void 0,void 0,void 0,u.description,e.connectionName,n,void 0,u.isPk,u.isFk))}catch(s){let o=s instanceof Error?s.message:String(s);return Se.window.showErrorMessage("Failed to load columns: "+o),[]}}}else{let n=await this.connectionManager.getConnections(),r=Se.Uri.file(this.context.asAbsolutePath("netezza_icon64.png"));return n.map(i=>new tn(i.name,Se.TreeItemCollapsibleState.Collapsed,"serverInstance",void 0,void 0,void 0,void 0,void 0,i.name,void 0,r))}return[]}},tn=class extends Se.TreeItem{constructor(n,r,i,s,o,a,l,c,u,d,E,f,p,h){super(n,r);this.label=n;this.collapsibleState=r;this.contextValue=i;this.dbName=s;this.objType=o;this.schema=a;this.objId=l;this.objectDescription=c;this.connectionName=u;this.parentName=d;this.isPk=f;this.isFk=p;this.owner=h;let T=this.label;u&&(T+=`
[Server: ${u}]`),c&&c.trim()&&(T+=`

${c.trim()}`),a&&i.startsWith("netezza:")&&(T+=`

Schema: ${a}`),h&&i.startsWith("netezza:")&&(T+=`
Owner: ${h}`),this.isPk&&(T+=`
\u{1F511} Primary Key`),this.isFk&&(T+=`
\u{1F517} Foreign Key`),this.tooltip=T,this.description=a?`(${a})`:"";let S=[u||"global",i,s||"",a||"",o||"",d||"",n,l?l.toString():""];this.id=S.join("|"),E?this.iconPath=E:i==="serverInstance"?this.iconPath=new Se.ThemeIcon("server"):i==="database"?this.iconPath=new Se.ThemeIcon("database"):i.startsWith("typeGroup")?this.iconPath=new Se.ThemeIcon("folder"):i.startsWith("netezza:")?this.iconPath=this.getIconForType(o):i==="column"&&(this.isPk?this.iconPath=new Se.ThemeIcon("key",new Se.ThemeColor("charts.yellow")):this.isFk?this.iconPath=new Se.ThemeIcon("link",new Se.ThemeColor("charts.blue")):this.iconPath=new Se.ThemeIcon("symbol-field"))}getIconForType(n){switch(n){case"TABLE":return new Se.ThemeIcon("table");case"VIEW":return new Se.ThemeIcon("eye");case"PROCEDURE":return new Se.ThemeIcon("gear");case"FUNCTION":return new Se.ThemeIcon("symbol-function");case"AGGREGATE":return new Se.ThemeIcon("symbol-operator");case"EXTERNAL TABLE":return new Se.ThemeIcon("server");default:return new Se.ThemeIcon("file")}}};var Ae=Q(require("vscode"));var Jn=Q(require("vscode")),uE=class t{constructor(e,n,r){this._disposables=[];this._panel=e,this._extensionUri=n,this._update(r),this._panel.onDidDispose(()=>this.dispose(),null,this._disposables),this._panel.webview.onDidReceiveMessage(i=>{switch(i.command){case"alert":Jn.window.showErrorMessage(i.text);return;case"info":Jn.window.showInformationMessage(i.text);return}},null,this._disposables)}static{this.viewType="netezza.analysisPanel"}static createOrShow(e,n){let r=Jn.window.activeTextEditor?Jn.ViewColumn.Beside:void 0,i=Jn.window.createWebviewPanel(t.viewType,"Data Analysis",r||Jn.ViewColumn.One,{enableScripts:!0,localResourceRoots:[Jn.Uri.joinPath(e,"media")],retainContextWhenHidden:!0});new t(i,e,n)}dispose(){for(this._panel.dispose();this._disposables.length;){let e=this._disposables.pop();e&&e.dispose()}}_update(e){let n=this._panel.webview;this._panel.title="Data Analysis",this._panel.webview.html=this._getHtmlForWebview(n,e)}_getHtmlForWebview(e,n){let r=Jn.Uri.joinPath(this._extensionUri,"media","analysisPanel.js"),i=e.asWebviewUri(r),s=Jn.Uri.joinPath(this._extensionUri,"media","analysisPanel.css"),o=e.asWebviewUri(s),a=e.asWebviewUri(Jn.Uri.joinPath(this._extensionUri,"media","tanstack-table-core.js")),l=e.asWebviewUri(Jn.Uri.joinPath(this._extensionUri,"media","tanstack-virtual-core.js")),c=J8();return`<!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <meta http-equiv="Content-Security-Policy" content="default-src 'none'; style-src ${e.cspSource} 'unsafe-inline'; script-src 'nonce-${c}'; font-src ${e.cspSource};">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <link href="${o}" rel="stylesheet">

            <title>Data Analysis</title>
        </head>
        <body>
            <div id="app">
                <div class="sidebar">
                    <div class="section">
                        <h3>Fields</h3>
                        <div id="fieldList" class="field-list"></div>
                    </div>
                </div>
                <div class="main-content">
                    <div class="filter-section" style="margin-bottom: 15px; display: flex; gap: 10px; align-items: center;">
                        <label for="dataFilter" style="font-weight: bold;">Filter:</label>
                        <input type="text" id="dataFilter" placeholder="Type to filter data..." style="flex: 1; padding: 6px 10px; background: var(--vscode-input-background); color: var(--vscode-input-foreground); border: 1px solid var(--vscode-input-border); border-radius: 4px;">
                        <button id="applyFilter" style="padding: 6px 12px; cursor: pointer;">Apply</button>
                        <button id="clearFilter" style="padding: 6px 12px; cursor: pointer;">Clear</button>
                    </div>
                    <div class="config-zones">
                        <div class="zone-container">
                            <h4>Rows</h4>
                            <div id="rowsZone" class="drop-zone" data-zone="rows"></div>
                        </div>
                        <div class="zone-container">
                            <h4>Columns</h4>
                            <div id="colsZone" class="drop-zone" data-zone="cols"></div>
                        </div>
                        <div class="zone-container">
                            <h4>Values</h4>
                            <div id="valuesZone" class="drop-zone" data-zone="values"></div>
                        </div>
                    </div>
                    <div class="pivot-grid-container">
                        <div id="pivotGrid"></div>
                    </div>
                    <div class="chart-container" style="margin-top: 20px;">
                        <div class="chart-header" style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                            <h4 style="margin: 0;">Chart</h4>
                            <select id="chartType" style="padding: 4px;">
                                <option value="bar">Bar Chart</option>
                                <option value="line">Line Chart</option>
                            </select>
                        </div>
                        <canvas id="pivotChart" width="600" height="300" style="background: var(--vscode-editor-background); border: 1px solid var(--vscode-panel-border); border-radius: 4px;"></canvas>
                    </div>
                </div>
            </div>
            
            <script nonce="${c}" src="${a}"></script>
            <script nonce="${c}" src="${l}"></script>
            <script nonce="${c}">
                // Pass initial data to the script
                window.initialData = ${JSON.stringify(n)};
                window.TableCore = TableCore;
                window.VirtualCore = VirtualCore;
            </script>
            <script nonce="${c}" src="${i}"></script>
        </body>
        </html>`}};function J8(){let t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let n=0;n<32;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}var dE=class{constructor(e){this._cspSource=e}generateHtml(e,n){let r=this._getIcons();return`<!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <meta http-equiv="Content-Security-Policy" content="default-src 'none'; script-src ${this._cspSource} 'unsafe-inline'; worker-src ${this._cspSource} blob:; connect-src ${this._cspSource}; style-src ${this._cspSource} 'unsafe-inline';">
            <title>Query Results</title>
            <script src="${e.scriptUri}"></script>
            <script src="${e.virtualUri}"></script>
            <link rel="stylesheet" href="${e.styleUri}">
        </head>
        <body>
            <div id="sourceTabs" class="source-tabs"></div>
            <div id="resultSetTabs" class="result-set-tabs" style="display: none;"></div>
            
            <div id="loadingOverlay" class="loading-overlay">
                <div class="spinner"></div>
                <div class="executing-text">Executing SQL...</div>
                <button id="cancelQueryBtn" class="secondary" title="Cancel the current query">Cancel</button>
            </div>
            <div class="controls">
                <input type="text" id="globalFilter" placeholder="Filter..." onkeyup="onFilterChanged()" style="background: var(--vscode-input-background); color: var(--vscode-input-foreground); border: 1px solid var(--vscode-input-border); padding: 4px;">
                <button onclick="toggleRowView()" title="Toggle Row View">${r.eye} Row View</button>
                
                <!-- Split Button for Export -->
                <div class="split-btn-container">
                    <button id="exportMainBtn" class="split-btn-main" onclick="executeSplitExport()" title="Export results (Excel)">
                        ${r.excel} Excel
                    </button>
                    <button id="exportArrowBtn" class="split-btn-arrow" onclick="toggleExportMenu()" title="Select export format">
                        <svg width="10" height="10" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor">
                            <path d="M8 11L3 6h10l-5 5z"/>
                        </svg>
                    </button>
                    <div id="exportMenu" class="split-btn-menu" style="display:none;">
                        <div class="split-btn-menu-item" onclick="selectExportFormat('excel')">
                            ${r.excel} Excel (XLSB)
                        </div>
                        <div class="split-btn-menu-item" onclick="selectExportFormat('xlsx')">
                            ${r.excel} Excel (XLSX)
                        </div>
                        <div class="split-btn-menu-item" onclick="selectExportFormat('csv')">
                            ${r.csv} CSV
                        </div>
                        <div class="split-btn-menu-item" onclick="selectExportFormat('json')">
                            ${r.json} JSON
                        </div>
                        <div class="split-btn-menu-item" onclick="selectExportFormat('xml')">
                            ${r.xml} XML
                        </div>
                        <div class="split-btn-menu-item" onclick="selectExportFormat('sql')">
                            ${r.sql} SQL INSERT
                        </div>
                        <div class="split-btn-menu-item" onclick="selectExportFormat('markdown')">
                            ${r.markdown} Markdown Table
                        </div>
                    </div>
                </div>

                <div style="width: 1px; height: 16px; background: var(--vscode-panel-border); margin: 0 2px;"></div>
                <button onclick="copyAsExcel()" title="Copy results as Excel to clipboard">${r.excel} Excel Copy</button>
                <div style="width: 1px; height: 16px; background: var(--vscode-panel-border); margin: 0 2px;"></div>
                <button onclick="selectAll()" title="Select all rows">${r.checkAll} Select All</button>
                <button onclick="copySelection(false)" title="Copy selected cells to clipboard">${r.copy} Copy</button>
                <button onclick="copySelection(true)" title="Copy selected cells with headers">${r.copy} Copy w/ Headers</button>
                <button onclick="clearAllFilters()" title="Clear all column filters">${r.clear} Clear Filters</button>
                <button id="clearLogsBtn" onclick="clearLogs()" title="Clear execution logs" style="display: none;">${r.trash} Clear Logs</button>
                <span id="rowCountInfo" style="margin-left: auto; font-size: 12px; opacity: 0.8;"></span>
            </div>

            <div id="groupingPanel" class="grouping-panel" ondragover="onDragOverGroup(event)" ondragleave="onDragLeaveGroup(event)" ondrop="onDropGroup(event)">
                <span style="opacity: 0.5;">Drag headers here to group</span>
            </div>

            <div id="mainSplitView" class="main-split-view">
                <div id="gridContainer"></div>
                <div id="rowViewPanel" class="row-view-panel">
                    <div class="row-view-header">
                        <span>Row Details & Comparison</span>
                        <span class="row-view-close" onclick="toggleRowView()">\xD7</span>
                    </div>
                    <div id="rowViewContent" class="row-view-content">
                        <div class="row-view-placeholder">Select 1 or 2 rows to view details or compare</div>
                    </div>
                </div>
            </div>
            
            <script>
                const vscode = acquireVsCodeApi();
                window.sources = ${n.sourcesJson};
                window.pinnedSources = new Set(${n.pinnedSourcesJson});
                window.pinnedResults = ${n.pinnedResultsJson};
                window.activeSource = ${n.activeSourceJson};
                window.resultSets = ${n.resultSetsJson};
                window.executingSources = new Set(${n.executingSourcesJson});
                
                let grids = [];
                let activeGridIndex = ${n.activeResultSetIndex};
                const workerUri = "${e.workerUri}";
            </script>
            <script src="${e.mainScriptUri}"></script>
            <script>
                // Initialize on load
                init();
            </script>
        </body>
        </html>`}_getIcons(){return{eye:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M8 3c-3 0-6 2.5-6 5s3 5 6 5 6-2.5 6-5-3-5-6-5zm0 9c-2.5 0-4.5-2-4.5-4S5.5 4 8 4s4.5 2 4.5 4-2 4.5-4.5 4.5z"/><circle cx="8" cy="8" r="2"/></svg>',excel:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M6 3h8v10H6V3zm-1 0H3v10h2V3zm-2-1h9a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1z"/><path d="M6 6h8v1H6V6zm0 2h8v1H6V8zm0 2h8v1H6v-1z"/></svg>',copy:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M4 4h7v2H4V4zm0 4h7v2H4V8zm0 4h7v2H4v-2zM2 1h12v14H2V1zm1 1v12h10V2H3z"/></svg>',csv:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M13 2H6L2 6v8a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1zm-1 11H4V7h3V4h5v9z"/></svg>',json:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M5 2c0-1.1.9-2 2-2h2a2 2 0 0 1 2 2v2h-2V2H7v2H5V2zm0 12c0 1.1.9 2 2 2h2a2 2 0 0 0 2-2v-2h-2v2H7v-2H5v2zM2 7v2h2V7H2zm10 0v2h2V7h-2z"/></svg>',xml:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M11.5 1L7 15h2l4.5-14h-2zM4.5 1L0 15h2l4.5-14h-2z"/></svg>',sql:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M8 0C3.6 0 0 1.8 0 4v8c0 2.2 3.6 4 8 4s8-1.8 8-4V4c0-2.2-3.6-4-8-4zm0 2c3.3 0 6 1.3 6 3s-2.7 3-6 3-6-1.3-6-3 2.7-3 6-3zm0 12c-3.3 0-6-1.3-6-3V9c1.6 1.7 4.3 2 6 2s4.4-.3 6-2v2c0 1.7-2.7 3-6 3z"/></svg>',markdown:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M14.5 2H1.5C.7 2 0 2.7 0 3.5v9C0 13.3.7 14 1.5 14h13c.8 0 1.5-.7 1.5-1.5v-9c0-.8-.7-1.5-1.5-1.5zM3 11V5l2 2 2-2v6H6V7l-1 1-1-1v4H3zm10 0h-2V9h-2v2H7V5h2v2h2V5h2v6z"/></svg>',export:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M6 3h8v10H6V3zm-1 0H3v10h2V3zm-2-1h9a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1z"/><path d="M6 6h8v1H6V6zm0 2h8v1H6V8zm0 2h8v1H6v-1z"/><path d="M10 12L8 14L6 12" stroke="currentColor" stroke-width="1.5" fill="none"/></svg>',checkAll:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M13.485 1.929l1.414 1.414-9.9 9.9-4.243-4.242 1.415-1.415 2.828 2.829z"/></svg>',clear:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M8 7.293l4.146-4.147.708.708L8.707 8l4.147 4.146-.708.708L8 8.707l-4.146 4.147-.708-.708L7.293 8 3.146 3.854l.708-.708L8 7.293z"/></svg>',trash:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M6.5 1h3l.5.5V3h3v1h-1v10h-1v-10h-7v10h-1V4h-1V3h3V1.5l.5-.5zM7 2v1h2V2H7zm-2 2v9h6V4H5zm1 1h1v7H6V5zm2 0h1v7H8V5z"/></svg>'}}};var nu=class{constructor(e){this._resultsMap=new Map;this._pinnedSources=new Set;this._pinnedResults=new Map;this._autoPinnedResults=new Set;this._activeResultSetIndexMap=new Map;this._resultIdCounter=0;this._executingSources=new Set;this._cancelledSources=new Set;this._onDidCancel=new Ae.EventEmitter;this.onDidCancel=this._onDidCancel.event;this._extensionUri=e}static{this.viewType="netezza.results"}getActiveSource(){return this._activeSourceUri}resolveWebviewView(e,n,r){this._view=e,e.webview.options={enableScripts:!0,localResourceRoots:[Ae.Uri.joinPath(this._extensionUri,"media")]},e.webview.html=this._getHtmlForWebview(),e.webview.onDidReceiveMessage(i=>{switch(i.command){case"analyze":uE.createOrShow(this._extensionUri,i.data);return;case"describeWithCopilot":Ae.commands.executeCommand("netezza.describeDataWithCopilot",i.data,i.sql);return;case"fixSqlError":Ae.commands.executeCommand("netezza.fixSqlError",i.errorMessage,i.sql);return;case"exportCsv":this.exportCsv(i.data);return;case"openInExcel":this.openInExcel(i.data,i.sql);return;case"copyAsExcel":this.copyAsExcel(i.data,i.sql);return;case"openInExcelXlsx":this.openInExcelXlsx(i.data,i.sql);return;case"exportJson":this.exportJson(i.data);return;case"exportXml":this.exportXml(i.data);return;case"exportSqlInsert":this.exportSqlInsert(i.data);return;case"exportMarkdown":this.exportMarkdown(i.data);return;case"switchSource":this._activeSourceUri=i.sourceUri,this._resultsMap.has(i.sourceUri)||this._resultsMap.set(i.sourceUri,[]),this._updateWebview();return;case"togglePin":this._pinnedSources.has(i.sourceUri)?this._pinnedSources.delete(i.sourceUri):this._pinnedSources.add(i.sourceUri),this._updateWebview();return;case"toggleResultPin":this._toggleResultPin(i.sourceUri,i.resultSetIndex);return;case"switchToPinnedResult":this._switchToPinnedResult(i.resultId);return;case"unpinResult":this._pinnedResults.delete(i.resultId),this._updateWebview();return;case"closeSource":this.closeSource(i.sourceUri);return;case"closeResult":this.closeResult(i.sourceUri,i.resultSetIndex);return;case"closeAllResults":this.closeAllResults(i.sourceUri);return;case"cancelQuery":i.sourceUri&&(console.log(`[resultPanelView] Received cancelQuery message for: ${i.sourceUri}`),Ae.commands.executeCommand("netezza.cancelQuery",i.sourceUri,i.currentRowCounts));return;case"copyToClipboard":Ae.env.clipboard.writeText(i.text),Ae.window.showInformationMessage("Copied to clipboard");return;case"info":Ae.window.showInformationMessage(i.text);return;case"error":Ae.window.showErrorMessage(i.text);return;case"setContext":Ae.commands.executeCommand("setContext",i.key,i.value);return;case"clearLogs":this.clearLogs(i.sourceUri);return;case"switchResultSet":this._activeResultSetIndexMap.set(i.sourceUri,i.resultSetIndex);return}})}triggerCopySelection(){this._postMessageToWebview({command:"copySelection"})}setActiveSource(e){this._activeSourceUri!==e&&(this._activeSourceUri=e,this._resultsMap.has(e)||this._resultsMap.set(e,[]),this._updateWebview())}startExecution(e){this._executingSources.add(e),this._cancelledSources.delete(e);let n=this._resultsMap.get(e)||[],r,i=n.findIndex(d=>d.isLog);if(i!==-1){r=n[i];let d=new Date().toLocaleTimeString();r.data.push(["",""]),r.data.push([d,"--- New Execution Started ---"]),r.message="Execution started...",r.executionTimestamp=Date.now()}else{let d=new Date().toLocaleTimeString();r={columns:[{name:"Time",type:"string"},{name:"Message",type:"string"}],data:[[d,"--- New Execution Started ---"]],message:"Execution started...",executionTimestamp:Date.now(),isLog:!0,name:"Logs"}}let s=Array.from(this._pinnedResults.entries()).filter(([d,E])=>E.sourceUri===e&&n[E.resultSetIndex]!==r).sort((d,E)=>d[1].resultSetIndex-E[1].resultSetIndex),o=[];s.forEach(([d,E])=>{if(E.resultSetIndex<n.length){let f=n[E.resultSetIndex];f&&o.push(f)}});let a=[r,...o];this._resultsMap.set(e,a),Array.from(this._pinnedResults.entries()).filter(([d,E])=>E.sourceUri===e).map(([d,E])=>d).forEach(d=>this._pinnedResults.delete(d));let c=`result_${++this._resultIdCounter} `,u=e.split(/[\\/]/).pop()||e;this._pinnedResults.set(c,{sourceUri:e,resultSetIndex:0,timestamp:Date.now(),label:`${u} - Logs`}),s.forEach(([d,E],f)=>{let p=`result_${++this._resultIdCounter} `;this._pinnedResults.set(p,{sourceUri:e,resultSetIndex:f+1,timestamp:Date.now(),label:`${u} - Result ${f+1} `})}),this._pinnedSources.add(e),this._activeSourceUri=e,this._activeResultSetIndexMap.set(e,0),this._updateWebview(),this._view?.show?.(!0)}log(e,n){let r=this._resultsMap.get(e);if(!r||r.length===0)return;let i=r.find(s=>s.isLog);if(i){let s=new Date().toLocaleTimeString();i.data.push([s,n]),this._updateWebview()}}isCancelled(e){return this._cancelledSources.has(e)}cancelExecution(e,n){this._executingSources.has(e)&&this._executingSources.delete(e),this._cancelledSources.add(e),this._onDidCancel.fire(e),(this._resultsMap.get(e)||[]).forEach((i,s)=>{i.isCancelled=!0,n&&n[s]!==void 0&&(i.data=i.data.slice(0,n[s]))}),this._updateWebview(),this._postMessageToWebview({command:"cancelExecution",sourceUri:e})}finalizeExecution(e){this._executingSources.delete(e);let n=this._resultsMap.get(e)||[];for(let r of this._autoPinnedResults){let i=this._pinnedResults.get(r);if(i&&i.sourceUri===e){let s=n[i.resultSetIndex];if(s&&s.isError)continue;this._pinnedResults.delete(r)}}this._autoPinnedResults.clear(),this._updateWebview()}updateResults(e,n,r=!1){this._resultsMap.has(n)||this._pinnedSources.add(n);let i=[];Array.isArray(e)?i=e:i=[e];let s=Date.now();i.forEach(f=>{f.executionTimestamp=s});let o=this._resultsMap.get(n)||[],a=o.find(f=>f.isLog),l=Array.from(this._pinnedResults.entries()).filter(f=>f[1].sourceUri===n).sort((f,p)=>f[1].resultSetIndex-p[1].resultSetIndex),c=[],u=new Map;a&&c.push(a),l.forEach(([f,p])=>{let h=o[p.resultSetIndex];h&&(h===a||c.includes(h)||c.push(h),u.set(f,h))});let d=c.length;if(console.log("[updateResults] Before append:",{existingResults:o.map((f,p)=>`[${p}]isLog = ${f.isLog}, isError = ${f.isError} `),finalResultSetsSoFar:c.map((f,p)=>`[${p}]isLog = ${f.isLog}, isError = ${f.isError} `),newResults:i.map(f=>`isLog = ${f.isLog}, isError = ${f.isError} `)}),c.push(...i),this._resultsMap.set(n,c),u.forEach((f,p)=>{let h=c.indexOf(f);if(h!==-1){let T=this._pinnedResults.get(p);T&&(T.resultSetIndex=h)}}),a&&!Array.from(u.values()).includes(a)){let p=`result_${++this._resultIdCounter} `,h=n.split(/[\\\\/]/).pop()||n;this._pinnedResults.set(p,{sourceUri:n,resultSetIndex:0,timestamp:Date.now(),label:`${h} - Logs`})}let E=n.split(/[\\\\/]/).pop()||n;i.forEach((f,p)=>{let h=`result_${++this._resultIdCounter} `,T=d+p;this._pinnedResults.set(h,{sourceUri:n,resultSetIndex:T,timestamp:Date.now(),label:f.isLog?`${E} - Logs`:`${E} - Result ${T} `}),this._autoPinnedResults.add(h)}),r||Array.from(this._resultsMap.keys()).filter(p=>p!==n&&!this._pinnedSources.has(p)).forEach(p=>{this._resultsMap.delete(p),Array.from(this._pinnedResults.entries()).filter(T=>T[1].sourceUri===p).map(([T,S])=>T).forEach(T=>this._pinnedResults.delete(T))}),this._activeSourceUri=n,this._activeResultSetIndexMap.set(n,d),this._view?(this._updateWebview(),this._view.show?.(!0)):Ae.window.showInformationMessage('Query completed. Please open "Query Results" panel to view data.')}appendStreamingChunk(e,n,r,i){if(this._cancelledSources.has(e))return;let s=this._resultsMap.get(e)||[];if(r.isFirstChunk&&r.columns.length>0){let o={columns:r.columns,data:r.rows,executionTimestamp:Date.now(),sql:i,limitReached:r.limitReached};s.findIndex(d=>d.isLog)>=0,s.push(o),this._resultsMap.set(e,s);let l=e.split(/[\\/]/).pop()||e,c=`result_${++this._resultIdCounter} `,u=s.length-1;this._pinnedResults.set(c,{sourceUri:e,resultSetIndex:u,timestamp:Date.now(),label:`${l} - Result ${u} `}),this._autoPinnedResults.add(c),this._activeSourceUri=e,this._activeResultSetIndexMap.set(e,u),this._updateWebview(),this._view?.show?.(!0)}else if(r.rows.length>0){let o=s[s.length-1];o&&!o.isLog&&(o.data.push(...r.rows),o.limitReached=r.limitReached,this._postMessageToWebview({command:"appendRows",resultSetIndex:s.length-1,rows:r.rows,totalRows:r.totalRowsSoFar,isLastChunk:r.isLastChunk,limitReached:r.limitReached}))}r.isLastChunk&&this._postMessageToWebview({command:"streamingComplete",resultSetIndex:s.length-1,totalRows:r.totalRowsSoFar,limitReached:r.limitReached})}_postMessageToWebview(e){this._view&&this._view.webview.postMessage(e)}_updateWebview(){this._view&&(this._view.webview.html=this._getHtmlForWebview())}_toggleResultPin(e,n){let r=Array.from(this._pinnedResults.entries()).find(i=>{let s=i[1];return s.sourceUri===e&&s.resultSetIndex===n});if(r)this._pinnedResults.delete(r[0]);else{let i=`result_${++this._resultIdCounter} `,s=Date.now(),a=`${e.split(/[\\/]/).pop()||e} - Result ${n+1} `;this._pinnedResults.set(i,{sourceUri:e,resultSetIndex:n,timestamp:s,label:a})}this._updateWebview()}_switchToPinnedResult(e){let n=this._pinnedResults.get(e);n&&(this._activeSourceUri=n.sourceUri,this._updateWebview(),this._view&&this._view.webview.postMessage({command:"switchToResultSet",resultSetIndex:n.resultSetIndex}))}async exportCsv(e){let n=await Ae.window.showSaveDialog({filters:{"CSV Files":["csv"]},saveLabel:"Export"});n&&(await Ae.workspace.fs.writeFile(n,Buffer.from(e)),Ae.window.showInformationMessage(`Results exported to ${n.fsPath} `))}async openInExcel(e,n){Ae.commands.executeCommand("netezza.exportCurrentResultToXlsbAndOpen",e,n)}async copyAsExcel(e,n){Ae.commands.executeCommand("netezza.copyCurrentResultToXlsbClipboard",e,n)}async openInExcelXlsx(e,n){try{await Ae.commands.executeCommand("netezza.exportCurrentResultToXlsxAndOpen",e,n)}catch(r){let i=r instanceof Error?r.message:String(r);Ae.window.showErrorMessage(`Failed to export to XLSX: ${i}. Please try reloading the window.`)}}async exportJson(e){let n=await Ae.window.showSaveDialog({filters:{"JSON Files":["json"]},saveLabel:"Export JSON"});n&&(await Ae.workspace.fs.writeFile(n,Buffer.from(e)),Ae.window.showInformationMessage(`Results exported to ${n.fsPath} `))}async exportXml(e){let n=await Ae.window.showSaveDialog({filters:{"XML Files":["xml"]},saveLabel:"Export XML"});n&&(await Ae.workspace.fs.writeFile(n,Buffer.from(e)),Ae.window.showInformationMessage(`Results exported to ${n.fsPath} `))}async exportSqlInsert(e){let n=await Ae.window.showSaveDialog({filters:{"SQL Files":["sql"]},saveLabel:"Export SQL"});n&&(await Ae.workspace.fs.writeFile(n,Buffer.from(e)),Ae.window.showInformationMessage(`Results exported to ${n.fsPath} `))}async exportMarkdown(e){let n=await Ae.window.showSaveDialog({filters:{"Markdown Files":["md"]},saveLabel:"Export Markdown"});n&&(await Ae.workspace.fs.writeFile(n,Buffer.from(e)),Ae.window.showInformationMessage(`Results exported to ${n.fsPath} `))}closeSource(e){if(this._resultsMap.has(e)){if(this._resultsMap.delete(e),this._pinnedSources.delete(e),this._executingSources.delete(e),Array.from(this._pinnedResults.entries()).filter(([r,i])=>i.sourceUri===e).map(([r,i])=>r).forEach(r=>this._pinnedResults.delete(r)),this._activeSourceUri===e){let r=Array.from(this._resultsMap.keys());this._activeSourceUri=r.length>0?r[0]:void 0}this._updateWebview()}}closeResult(e,n){let r=this._resultsMap.get(e);if(!r||n<0||n>=r.length)return;r.splice(n,1),Array.from(this._pinnedResults.entries()).filter(([s,o])=>o.sourceUri===e&&o.resultSetIndex===n).map(([s,o])=>s).forEach(s=>this._pinnedResults.delete(s));for(let[,s]of this._pinnedResults.entries())s.sourceUri===e&&s.resultSetIndex>n&&(s.resultSetIndex-=1);if(this._activeResultSetIndexMap.get(e)===n){let s=n<r.length?n:Math.max(0,r.length-1);this._activeResultSetIndexMap.set(e,s)}else this._activeResultSetIndexMap.get(e)>n&&this._activeResultSetIndexMap.set(e,this._activeResultSetIndexMap.get(e)-1);this._updateWebview()}closeAllResults(e){let n=this._resultsMap.get(e);if(!n||n.length===0)return;let r=n.findIndex(s=>s.isLog);if(r===-1)n.splice(0);else{let s=n[r];n.splice(0),n.push(s)}Array.from(this._pinnedResults.entries()).filter(([s,o])=>{if(o.sourceUri!==e)return!1;let a=n[o.resultSetIndex];return!a||!a.isLog}).map(([s,o])=>s).forEach(s=>this._pinnedResults.delete(s)),this._activeResultSetIndexMap.set(e,0),this._updateWebview()}clearLogs(e){let n=this._resultsMap.get(e);if(n){let r=n.find(i=>i.isLog);if(r){r.data=[];let i=new Date().toLocaleTimeString();r.data.push([i,"--- Logs Cleared ---"]),this._updateWebview()}}}_getHtmlForWebview(){if(!this._view)return"";let e=this._getScriptUris(),n=this._prepareViewData();return new dE(this._view.webview.cspSource).generateHtml(e,n)}_getScriptUris(){return{scriptUri:this._view.webview.asWebviewUri(Ae.Uri.joinPath(this._extensionUri,"media","tanstack-table-core.js")),virtualUri:this._view.webview.asWebviewUri(Ae.Uri.joinPath(this._extensionUri,"media","tanstack-virtual-core.js")),mainScriptUri:this._view.webview.asWebviewUri(Ae.Uri.joinPath(this._extensionUri,"media","resultPanel.js")),workerUri:this._view.webview.asWebviewUri(Ae.Uri.joinPath(this._extensionUri,"media","searchWorker.js")),styleUri:this._view.webview.asWebviewUri(Ae.Uri.joinPath(this._extensionUri,"media","resultPanel.css"))}}_prepareViewData(){let e=Array.from(this._resultsMap.keys()),n=Array.from(this._pinnedSources),r=Array.from(this._pinnedResults.entries()).map(([l,c])=>({id:l,...c})),i=this._activeSourceUri&&this._resultsMap.has(this._activeSourceUri)?this._activeSourceUri:e.length>0?e[0]:null,s=i?this._resultsMap.get(i)||[]:[];if(i&&s.length===0){let l=new Date().toLocaleTimeString();s=[{columns:[{name:"Time",type:"string"},{name:"Message",type:"string"}],data:[[l,"No results yet"]],message:"No results yet",executionTimestamp:Date.now(),isLog:!0,name:"Logs"}],this._resultsMap.set(i,s)}let o=i&&this._activeResultSetIndexMap.has(i)?this._activeResultSetIndexMap.get(i):(s&&s.length>0,0),a=(l,c)=>typeof c=="bigint"?c>=Number.MIN_SAFE_INTEGER&&c<=Number.MAX_SAFE_INTEGER?Number(c):c.toString():c;return{sourcesJson:JSON.stringify(e),pinnedSourcesJson:JSON.stringify(n),pinnedResultsJson:JSON.stringify(r),activeSourceJson:JSON.stringify(i),resultSetsJson:JSON.stringify(s,a),activeResultSetIndex:o,executingSourcesJson:JSON.stringify(Array.from(this._executingSources))}}};var be=Q(require("vscode"));pn();var fE=class{constructor(e,n,r){this.context=e;this.metadataCache=n;this.connectionManager=r}async provideCompletionItems(e,n,r,i){let s=e.getText(),o=this.stripComments(s),a=this.parseLocalDefinitions(o),l=this.parseVariables(o),c=e.lineAt(n).text.substr(0,n.character),u=c.toUpperCase(),d=n.line>0?e.lineAt(n.line-1).text:"",E=this.connectionManager.getConnectionForExecution(e.uri.toString());if(E||(E=this.connectionManager.getActiveConnectionName()||void 0),E&&!this.metadataCache.hasConnectionPrefetchTriggered(E)&&this.metadataCache.triggerConnectionPrefetch(E,R=>ue(this.context,R,!0,this.connectionManager,E)),/(FROM|JOIN)\s+$/.test(u)){let R=await this.getDatabases(E);return[...a.map(I=>{let w=new be.CompletionItem(I.name,be.CompletionItemKind.Class);return w.detail=I.type,w}),...R]}if(/(?:FROM|JOIN)\s*$/i.test(d)&&/^\s*[a-zA-Z0-9_]*$/.test(c)){let R=await this.getDatabases(E);return[...a.map(I=>{let w=new be.CompletionItem(I.name,be.CompletionItemKind.Class);return w.detail=I.type,w}),...R]}let f=c.match(/(?:FROM|JOIN)\s+([a-zA-Z0-9_]+)\.\s*$/i);if(f){let R=f[1],A=await this.getSchemas(E,R);return new be.CompletionList(A,!1)}let p=c.match(/^\s*([a-zA-Z0-9_]+)\.\s*$/i);if(p&&/(?:FROM|JOIN)\s*$/i.test(d)){let R=p[1],A=await this.getSchemas(E,R);return new be.CompletionList(A,!1)}let h=c.match(/(?:FROM|JOIN)\s+([a-zA-Z0-9_]+)\.([a-zA-Z0-9_]+)\.$/i);if(h){let R=h[1],A=h[2];return this.getTables(E,R,A)}let T=c.match(/^\s*([a-zA-Z0-9_]+)\.([a-zA-Z0-9_]+)\.\s*$/i);if(T&&/(?:FROM|JOIN)\s*$/i.test(d)){let R=T[1],A=T[2];return this.getTables(E,R,A)}let S=c.match(/(?:FROM|JOIN)\s+([a-zA-Z0-9_]+)\.\.$/i);if(S){let R=S[1];return this.getTables(E,R,void 0)}let m=c.match(/^\s*([a-zA-Z0-9_]+)\.\.\s*$/i);if(m&&/(?:FROM|JOIN)\s*$/i.test(d)){let R=m[1];return this.getTables(E,R,void 0)}if(c.trim().endsWith(".")){let R=c.match(/([a-zA-Z0-9_]+)\.$/);if(R){let A=R[1],I=this.findAlias(o,A);if(I){let g=a.find(L=>L.name.toUpperCase()===I.table.toUpperCase());return g?g.columns.map(L=>{let b=new be.CompletionItem(L,be.CompletionItemKind.Field);return b.detail="Local Column",b}):this.getColumns(E,I.db,I.schema,I.table)}let w=a.find(g=>g.name.toUpperCase()===A.toUpperCase());if(w)return w.columns.map(g=>{let L=new be.CompletionItem(g,be.CompletionItemKind.Field);return L.detail="Local Column",L})}}if(c.match(/\$\{?[a-zA-Z0-9_]*$/)){if(i.triggerKind!==be.CompletionTriggerKind.Invoke)return[];let R=l.map(A=>{let I=`\${${A}}`,w=new be.CompletionItem(I,be.CompletionItemKind.Variable),g;return c.endsWith("${")?g=`${A}}`:c.endsWith("$")?g=`{${A}}`:g=`\${${A}}`,w.insertText=g,w.detail="Variable",w.sortText=`0_${A}`,w.filterText=A,w});return new be.CompletionList(R,!1)}return this.getKeywords()}stripComments(e){let n=e.replace(/--.*$/gm,"");return n=n.replace(/\/\*[\s\S]*?\*\//g,""),n}parseVariables(e){let n=[],r=/@SET\s+([a-zA-Z0-9_]+)\s*=/gi,i;for(;(i=r.exec(e))!==null;){let s=i[1];n.includes(s)||n.push(s)}return n.sort()}parseLocalDefinitions(e){let n=[],r=/CREATE\s+(?:TEMP\s+)?TABLE\s+([a-zA-Z0-9_]+)\s+AS\s*\(/gi,i;for(;(i=r.exec(e))!==null;){let a=i[1],l=i.index+i[0].length,c=this.extractBalancedParenthesisContent(e,l);if(c){let u=this.extractColumnsFromQuery(c);n.push({name:a,type:"Temp Table",columns:u})}}let s=/\bWITH\s+/gi;for(;(i=s.exec(e))!==null;){let a=i.index+i[0].length;for(;;){let l=/^\s*([a-zA-Z0-9_]+)\s+AS\s*\(/i,c=e.substring(a),u=c.match(l);if(!u)break;let d=u[1],E=c.indexOf("(",u.index+u[1].length),f=a+E,p=this.extractBalancedParenthesisContent(e,f+1);if(p){let h=this.extractColumnsFromQuery(p);n.push({name:d,type:"CTE",columns:h}),a=f+1+p.length+1;let T=/^\s*,/,S=e.substring(a);if(T.test(S)){let m=S.match(T);a+=m[0].length}else break}else break}}let o=/\bJOIN\s+\(/gi;for(;(i=o.exec(e))!==null;){let a=i.index+i[0].length,l=this.extractBalancedParenthesisContent(e,a);if(l&&/^\s*SELECT\b/i.test(l)){let c=a+l.length+1,d=e.substring(c).match(/^\s+(?:AS\s+)?([a-zA-Z0-9_]+)/i);if(d){let E=d[1],f=this.extractColumnsFromQuery(l);n.push({name:E,type:"Subquery",columns:f})}}}return n}extractBalancedParenthesisContent(e,n){let r=1,i=n;for(;i<e.length;i++)if(e[i]==="("?r++:e[i]===")"&&r--,r===0)return e.substring(n,i);return null}extractColumnsFromQuery(e){let n=e.match(/^\s*SELECT\s+/i);if(!n)return[];let r=n[0].length,i="",s=0,o=-1;for(let c=r;c<e.length;c++)if(e[c]==="("?s++:e[c]===")"&&s--,s===0&&e.substr(c).match(/^\s+FROM\b/i)){o=c;break}o!==-1?i=e.substring(r,o):i=e.substring(r);let a=[],l="";s=0;for(let c=0;c<i.length;c++){let u=i[c];u==="("?s++:u===")"&&s--,u===","&&s===0?(a.push(l.trim()),l=""):l+=u}return l.trim()&&a.push(l.trim()),a.map(c=>{let u=c.match(/\s+AS\s+([a-zA-Z0-9_]+)$/i);if(u)return u[1];let d=c.match(/\s+([a-zA-Z0-9_]+)$/i);if(d)return d[1];let E=c.split(".");return E[E.length-1]})}findAlias(e,n){let r=new RegExp("(?:FROM|JOIN)\\s+([a-zA-Z0-9_\\.]+)(?:\\s+(?:AS\\s+)?([a-zA-Z0-9_]+))?","gi"),i;for(;(i=r.exec(e))!==null;){let s=i[1],o=i[2];if(o&&o.toUpperCase()===n.toUpperCase()){let a=s.split(".");return a.length===3?{db:a[0],schema:a[1],table:a[2]}:a.length===2?{schema:a[0],table:a[1]}:{table:a[0]}}else if(!o){let a=s.split(".");if(a[a.length-1].toUpperCase()===n.toUpperCase())return a.length===3?{db:a[0],schema:a[1],table:a[2]}:a.length===2?{schema:a[0],table:a[1]}:{table:a[0]}}}return null}buildSimpleColumnQuery(e,n,r,i,s){if(n)return`SELECT ATTNAME, FORMAT_TYPE FROM ${e}_V_RELATION_COLUMN WHERE OBJID = ${n} ORDER BY ATTNUM`;let o=i?`AND UPPER(O.SCHEMA) = UPPER('${i}')`:"",a=s?`AND UPPER(O.DBNAME) = UPPER('${s}')`:"";return`
            SELECT C.ATTNAME, C.FORMAT_TYPE 
            FROM ${e}_V_RELATION_COLUMN C
            JOIN ${e}_V_OBJECT_DATA O ON C.OBJID = O.OBJID
            WHERE UPPER(O.OBJNAME) = UPPER('${r}') ${o} ${a}
            ORDER BY C.ATTNUM
        `}createColumnCompletionItem(e){let n=e.label||e.ATTNAME,r=n;e.isPk?r=`\u{1F511} ${n}`:e.isFk&&(r=`\u{1F517} ${n}`);let i=new be.CompletionItem(r,e.kind||be.CompletionItemKind.Field);i.insertText=n;let s=e.detail||"";return e.isPk&&e.isFk?s+=" (PK, FK)":e.isPk?s+=" (PK)":e.isFk&&(s+=" (FK)"),i.detail=s,e.documentation&&(i.documentation=new be.MarkdownString(e.documentation)),e.isPk?i.sortText=`0_${n}`:e.isFk?i.sortText=`1_${n}`:i.sortText=`2_${n}`,i}getKeywords(){return["SELECT","FROM","WHERE","GROUP BY","ORDER BY","LIMIT","INSERT","INTO","VALUES","UPDATE","SET","DELETE","CREATE","DROP","TABLE","VIEW","DATABASE","JOIN","INNER","LEFT","RIGHT","OUTER","ON","AND","OR","NOT","NULL","IS","IN","BETWEEN","LIKE","AS","DISTINCT","CASE","WHEN","THEN","ELSE","END","WITH","UNION","ALL"].map(n=>{let r=new be.CompletionItem(n,be.CompletionItemKind.Keyword);return r.detail="SQL Keyword",r})}async getDatabases(e){if(!e)return[];let n=this.metadataCache.getDatabases(e);if(n)return n.map(r=>{let i=new be.CompletionItem(r.label||r.DATABASE,r.kind||be.CompletionItemKind.Module);return i.detail=r.detail,i});try{let i=await ue(this.context,"SELECT DATABASE FROM system.._v_database ORDER BY DATABASE",!0,this.connectionManager,e);if(!i)return[];let o=Te(i).map(a=>({DATABASE:a.DATABASE,label:a.DATABASE,kind:9,detail:"Database"}));return this.metadataCache.setDatabases(e,o),o.map(a=>{let l=new be.CompletionItem(a.label,a.kind);return l.detail=a.detail,l})}catch(r){return console.error(r),[]}}async getSchemas(e,n){if(!e)return[];let r=this.metadataCache.getSchemas(e,n);if(r)return r.map(s=>{let o=new be.CompletionItem(s.label||s.SCHEMA,s.kind||be.CompletionItemKind.Folder);return o.detail=s.detail,o.insertText=s.insertText,o.sortText=s.sortText,o.filterText=s.filterText,o});let i=be.window.setStatusBarMessage(`Fetching schemas for ${n}...`);try{let s=`SELECT SCHEMA FROM ${n}.._V_SCHEMA ORDER BY SCHEMA`,o=await ue(this.context,s,!0,this.connectionManager,e);if(!o)return[];let l=Te(o).filter(c=>c.SCHEMA!=null&&c.SCHEMA!=="").map(c=>{let u=c.SCHEMA;return{SCHEMA:u,label:u,kind:19,detail:`Schema in ${n}`,insertText:u,sortText:u,filterText:u}});return this.metadataCache.setSchemas(e,n,l),l.map(c=>{let u=new be.CompletionItem(c.label,c.kind);return u.detail=c.detail,u.insertText=c.insertText,u.sortText=c.sortText,u.filterText=c.filterText,u})}catch(s){return console.error("[SqlCompletion] Error in getSchemas:",s),[]}finally{i.dispose()}}async getTables(e,n,r){if(!e)return[];let i=r?`${n}.${r}`:`${n}..`,s=r?this.metadataCache.getTables(e,i):this.metadataCache.getTables(e,i)||this.metadataCache.getTablesAllSchemas(e,n);if(s)return s.map(l=>{let c=typeof l.label=="string"?l.label:l.label?.label||l.OBJNAME||l.TABLENAME||"?",u=new be.CompletionItem(c,l.kind||be.CompletionItemKind.Class);return u.detail=l.detail,l.DESCRIPTION&&(u.documentation=new be.MarkdownString(l.DESCRIPTION)),u.sortText=l.sortText,u});let o=r?`Fetching tables for ${n}.${r}...`:`Fetching tables for ${n}...`,a=be.window.setStatusBarMessage(o);try{let l="";r?l=`SELECT OBJNAME, OBJID, COALESCE(DESCRIPTION, '') AS DESCRIPTION FROM ${n}.._V_OBJECT_DATA WHERE UPPER(DBNAME) = UPPER('${n}') AND UPPER(SCHEMA) = UPPER('${r}') AND OBJTYPE='TABLE' ORDER BY OBJNAME`:l=`SELECT OBJNAME, OBJID, SCHEMA, COALESCE(DESCRIPTION, '') AS DESCRIPTION FROM ${n}.._V_OBJECT_DATA WHERE UPPER(DBNAME) = UPPER('${n}') AND OBJTYPE='TABLE' ORDER BY OBJNAME`;let c=await ue(this.context,l,!0,this.connectionManager,e);if(!c)return[];let u=Te(c),d=new Map,E=u.map(f=>{let p=f.OBJNAME,h=f.SCHEMA||r,T=h?`${n}.${h}.${f.OBJNAME}`:`${n}..${f.OBJNAME}`;return d.set(T,f.OBJID),{OBJNAME:f.OBJNAME,TABLENAME:f.OBJNAME,OBJID:f.OBJID,SCHEMA:h,label:p,kind:6,detail:r?"Table":`Table (${h})`,sortText:f.OBJNAME,DESCRIPTION:f.DESCRIPTION}});return this.metadataCache.setTables(e,i,E,d),E.map(f=>{let p=typeof f.label=="string"?f.label:f.label?.label||"?",h=new be.CompletionItem(p,f.kind);return h.detail=f.detail,f.DESCRIPTION&&(h.documentation=new be.MarkdownString(f.DESCRIPTION)),h.sortText=f.sortText,h})}catch(l){return console.error(l),[]}finally{a.dispose()}}async getColumns(e,n,r,i){if(!e)return[];let s,o=n?`${n}..`:"",a=r&&n?`${n}.${r}.${i}`:n?`${n}..${i}`:void 0;a&&(s=this.metadataCache.findTableId(e,a));let l=`${n||"CURRENT"}.${r||""}.${i}`,c=this.metadataCache.getColumns(e,l);if(c)return c.map(d=>this.createColumnCompletionItem(d));if(!r&&n){let d=this.metadataCache.getColumnsAnySchema(e,n,i);if(d)return d.map(E=>this.createColumnCompletionItem(E))}let u=be.window.setStatusBarMessage(`Fetching columns for ${i}...`);try{let d=r||"",E=n||"",f=E&&d?eu(E,d,i):this.buildSimpleColumnQuery(o,s,i,r,n),p=await ue(this.context,f,!0,this.connectionManager,e);if(!p)return[];let h;if(E&&d?h=tu(p).map(S=>({ATTNAME:S.attname,FORMAT_TYPE:S.formatType,label:S.attname,kind:5,detail:S.formatType,isPk:S.isPk,isFk:S.isFk,documentation:S.description})):h=Te(p).map(S=>({ATTNAME:S.ATTNAME,FORMAT_TYPE:S.FORMAT_TYPE,label:S.ATTNAME,kind:5,detail:S.FORMAT_TYPE})),this.metadataCache.setColumns(e,l,h),n){let T=this.context,S=this.metadataCache;setImmediate(async()=>{try{await S.prefetchColumnsForSchema(e,n,r,m=>ue(T,m,!0,this.connectionManager,e))}catch(m){console.error("[SqlCompletion] Background column prefetch error:",m)}})}return h.map(T=>this.createColumnCompletionItem(T))}catch(d){return console.error(d),[]}finally{u.dispose()}}};var ru=Q(require("vscode"));pn();function Q8(t){let e="",n=0;for(;n<t.length;){if(t[n]==="-"&&n+1<t.length&&t[n+1]==="-"){for(;n<t.length&&t[n]!==`
`;)n++;n<t.length&&(e+=" ",n++);continue}if(t[n]==="/"&&n+1<t.length&&t[n+1]==="*"){for(n+=2;n<t.length-1&&!(t[n]==="*"&&t[n+1]==="/");)n++;n<t.length-1&&(n+=2),e+=" ";continue}if(t[n]==="'"){for(n++;n<t.length;)if(t[n]==="'"&&n+1<t.length&&t[n+1]==="'")n+=2;else if(t[n]==="'"){n++;break}else n++;e+=" ";continue}e+=t[n],n++}return e}function Z8(t){let e="",n=0;for(;n<t.length;){if(t[n]==="-"&&n+1<t.length&&t[n+1]==="-"){for(;n<t.length&&t[n]!==`
`;)n++;n<t.length&&(e+=" ",n++);continue}if(t[n]==="/"&&n+1<t.length&&t[n+1]==="*"){for(n+=2;n<t.length-1&&!(t[n]==="*"&&t[n+1]==="/");)n++;n<t.length-1&&(n+=2),e+=" ";continue}if(t[n]==="'"){for(e+=t[n],n++;n<t.length;)if(t[n]==="'"&&n+1<t.length&&t[n+1]==="'")e+="''",n+=2;else if(t[n]==="'"){e+=t[n],n++;break}else e+=t[n],n++;continue}e+=t[n],n++}return e}function _A(t,e,n){let r;switch(n){case"raw":r=t;break;case"noComments":r=Z8(t);break;case"noCommentsNoLiterals":default:r=Q8(t);break}return r.toUpperCase().includes(e.toUpperCase())}var iu=class{constructor(e,n,r,i){this._extensionUri=e;this.context=n;this.metadataCache=r;this.connectionManager=i;this.currentSearchId=0}static{this.viewType="netezza.search"}resolveWebviewView(e,n,r){this._view=e,e.webview.options={enableScripts:!0,localResourceRoots:[this._extensionUri]},e.webview.html=this._getHtmlForWebview(e.webview),e.webview.onDidReceiveMessage(async i=>{switch(i.type){case"search":await this.search(i.value);break;case"searchSource":await this.searchSourceCode(i.value,i.mode||"noCommentsNoLiterals");break;case"navigate":ru.commands.executeCommand("netezza.revealInSchema",i);break;case"cancel":this.currentSearchId++,this._view?.webview.postMessage({type:"cancelled"});break;case"reset":this.currentSearchId++,this._view?.webview.postMessage({type:"reset"});break}})}async search(e){if(!e||e.length<2)return;let n,r=ru.window.activeTextEditor;if(r&&r.document.languageId==="sql"&&(n=this.connectionManager.getConnectionForExecution(r.document.uri.toString())),n||(n=this.connectionManager.getActiveConnectionName()||void 0),!n){this._view?.webview.postMessage({type:"results",data:[],append:!1});return}let i=++this.currentSearchId,s=new Set;if(this._view){let c=this.metadataCache.search(e,n);if(c.length>0){let u=[];c.forEach(d=>{let E=`${d.name.toUpperCase().trim()}|${d.type.toUpperCase().trim()}|${(d.parent||"").toUpperCase().trim()}`;s.has(E)||(s.add(E),u.push({NAME:d.name,SCHEMA:d.schema||"",DATABASE:d.database||"",TYPE:d.type,PARENT:d.parent||"",DESCRIPTION:"Result from Cache",MATCH_TYPE:"NAME",connectionName:n}))}),u.sort((d,E)=>{let f=p=>p==="COLUMN"?2:1;return f(E.TYPE)-f(d.TYPE)?f(d.TYPE)-f(E.TYPE):d.NAME.localeCompare(E.NAME)}),u.length>0&&i===this.currentSearchId&&this._view.webview.postMessage({type:"results",data:u,append:!1})}else i===this.currentSearchId&&this._view.webview.postMessage({type:"searching",message:"Searching in database..."});this.metadataCache.hasAllObjectsPrefetchTriggered(n)||this.metadataCache.prefetchAllObjects(n,async u=>ue(this.context,u,!0,this.connectionManager,n))}let a=`%${e.replace(/'/g,"''").toUpperCase()}%`,l=`
            SELECT * FROM (
                SELECT 1 AS PRIORITY, OBJNAME AS NAME, SCHEMA, DBNAME AS DATABASE, OBJTYPE AS TYPE, '' AS PARENT, 
                       COALESCE(DESCRIPTION, '') AS DESCRIPTION, 'NAME' AS MATCH_TYPE
                FROM _V_OBJECT_DATA 
                WHERE UPPER(OBJNAME) LIKE '${a}'
                UNION ALL
                SELECT 1 AS PRIORITY, OBJNAME AS NAME, SCHEMA, DBNAME AS DATABASE, OBJTYPE AS TYPE, '' AS PARENT, 
                       COALESCE(DESCRIPTION, '') AS DESCRIPTION, 'DESC' AS MATCH_TYPE
                FROM _V_OBJECT_DATA 
                WHERE UPPER(DESCRIPTION) LIKE '${a}' AND UPPER(OBJNAME) NOT LIKE '${a}'
                UNION ALL
                SELECT 2 AS PRIORITY, C.ATTNAME AS NAME, O.SCHEMA, O.DBNAME AS DATABASE, 'COLUMN' AS TYPE, O.OBJNAME AS PARENT,
                       COALESCE(C.DESCRIPTION, '') AS DESCRIPTION, 'NAME' AS MATCH_TYPE
                FROM _V_RELATION_COLUMN C
                JOIN _V_OBJECT_DATA O ON C.OBJID = O.OBJID
                WHERE UPPER(C.ATTNAME) LIKE '${a}'
                UNION ALL
                SELECT 3 AS PRIORITY, E1.TABLENAME AS NAME, E1.SCHEMA, E1.DATABASE, 'EXTERNAL TABLE' AS TYPE, '' AS PARENT,
                       COALESCE(E2.EXTOBJNAME, '') AS DESCRIPTION, 'DATAOBJECT' AS MATCH_TYPE
                FROM _V_EXTERNAL E1
                JOIN _V_EXTOBJECT E2 ON E1.DATABASE = E2.DATABASE AND E1.SCHEMA = E2.SCHEMA AND E1.TABLENAME = E2.TABLENAME
                WHERE UPPER(E2.EXTOBJNAME) LIKE '${a}'
            ) AS R
            ORDER BY PRIORITY, NAME
            LIMIT 100
        `;try{let c=await ue(this.context,l,!0,this.connectionManager,n);if(i!==this.currentSearchId)return;if(c&&c.data&&c.data.length>0){let u=Te(c),d=[];u.forEach(E=>{let f=E,p=`${f.NAME.toUpperCase().trim()}|${f.TYPE.toUpperCase().trim()}|${(f.PARENT||"").toUpperCase().trim()}`;s.has(p)||(d.push({NAME:f.NAME,SCHEMA:f.SCHEMA,DATABASE:f.DATABASE,TYPE:f.TYPE,PARENT:f.PARENT,DESCRIPTION:f.DESCRIPTION,MATCH_TYPE:f.MATCH_TYPE,connectionName:n}),s.add(p))}),d.length>0&&this._view?this._view.webview.postMessage({type:"results",data:d,append:!0}):s.size===0&&this._view&&this._view.webview.postMessage({type:"results",data:[],append:!1})}else s.size===0&&this._view&&this._view.webview.postMessage({type:"results",data:[],append:!1})}catch(c){console.error("Search error:",c),this._view&&i===this.currentSearchId&&this._view.webview.postMessage({type:"error",message:c instanceof Error?c.message:String(c)})}}async searchSourceCode(e,n){if(!e||e.length<2)return;let r,i=ru.window.activeTextEditor;if(i&&i.document.languageId==="sql"&&(r=this.connectionManager.getConnectionForExecution(i.document.uri.toString())),r||(r=this.connectionManager.getActiveConnectionName()||void 0),!r){this._view?.webview.postMessage({type:"results",data:[],append:!1});return}let s=++this.currentSearchId,o=n==="raw"?"raw source":n==="noComments"?"source (excl. comments)":"source (excl. comments/strings)";try{this._view&&s===this.currentSearchId&&this._view.webview.postMessage({type:"searching",message:`Searching in ${o}...`});let a=e.toUpperCase(),l=[],c=`
                SELECT VIEWNAME AS NAME, SCHEMA, DATABASE, DEFINITION AS SOURCE
                FROM _V_VIEW
            `;try{let d=await ue(this.context,c,!0,this.connectionManager,r);if(d&&d.data&&s===this.currentSearchId){let E=Te(d);for(let f of E)f.SOURCE&&_A(f.SOURCE,a,n)&&l.push({NAME:f.NAME,SCHEMA:f.SCHEMA,DATABASE:f.DATABASE,TYPE:"VIEW",PARENT:"",DESCRIPTION:`Found in view ${o}`,MATCH_TYPE:"SOURCE_CODE",connectionName:r})}}catch(d){console.error("Error searching views:",d)}let u=`
                SELECT PROCEDURE AS NAME, SCHEMA, DATABASE, PROCEDURESOURCE AS SOURCE
                FROM _V_PROCEDURE
            `;try{let d=await ue(this.context,u,!0,this.connectionManager,r);if(d&&d.data&&s===this.currentSearchId){let E=Te(d);for(let f of E)f.SOURCE&&_A(f.SOURCE,a,n)&&l.push({NAME:f.NAME,SCHEMA:f.SCHEMA,DATABASE:f.DATABASE,TYPE:"PROCEDURE",PARENT:"",DESCRIPTION:`Found in procedure ${o}`,MATCH_TYPE:"SOURCE_CODE",connectionName:r})}}catch(d){console.error("Error searching procedures:",d)}this._view&&s===this.currentSearchId&&this._view.webview.postMessage({type:"results",data:l,append:!1})}catch(a){console.error("Source code search error:",a),this._view&&s===this.currentSearchId&&this._view.webview.postMessage({type:"error",message:a instanceof Error?a.message:String(a)})}}_getHtmlForWebview(e){return`<!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Schema Search</title>
        <style>
            body { 
                font-family: var(--vscode-font-family); 
                padding: 0; 
                margin: 0;
                color: var(--vscode-foreground); 
                display: flex;
                flex-direction: column;
                height: 100vh;
                overflow: hidden;
            }
            .search-box { 
                display: flex; 
                gap: 5px; 
                padding: 10px;
                flex-shrink: 0;
                border-bottom: 1px solid var(--vscode-panel-border);
            }
            input { flex-grow: 1; padding: 5px; background: var(--vscode-input-background); color: var(--vscode-input-foreground); border: 1px solid var(--vscode-input-border); }
            button {
                display: inline-flex;
                align-items: center;
                justify-content: center;
                gap: 6px;
                background-color: var(--vscode-button-secondaryBackground);
                color: var(--vscode-button-secondaryForeground);
                border: 1px solid var(--vscode-contrastBorder, transparent);
                padding: 4px 10px;
                cursor: pointer;
                border-radius: 2px;
                font-family: var(--vscode-font-family);
                font-size: 12px;
                line-height: 18px;
            }
            button:hover { background-color: var(--vscode-button-secondaryHoverBackground); }
            button.primary { background-color: var(--vscode-button-background); color: var(--vscode-button-foreground); }
            button.primary:hover { background-color: var(--vscode-button-hoverBackground); }
            #status { padding: 5px 10px; flex-shrink: 0; }
            .results { 
                list-style: none; 
                padding: 0; 
                margin: 0; 
                flex-grow: 1; 
                overflow-y: auto; 
            }
            .result-item { padding: 8px 10px; border-bottom: 1px solid var(--vscode-panel-border); display: flex; flex-direction: column; cursor: pointer; position: relative; }
            .result-item:hover { background: var(--vscode-list-hoverBackground); }
            .item-header { display: flex; justify-content: space-between; font-weight: bold; }
            .item-details { font-size: 0.9em; opacity: 0.8; display: flex; gap: 10px; }
            .type-badge { font-size: 0.8em; background: var(--vscode-badge-background); color: var(--vscode-badge-foreground); padding: 2px 5px; border-radius: 3px; }
            .tooltip { position: absolute; background: var(--vscode-editorHoverWidget-background); color: var(--vscode-editorHoverWidget-foreground); border: 1px solid var(--vscode-editorHoverWidget-border); padding: 8px; border-radius: 4px; font-size: 0.9em; max-width: 300px; word-wrap: break-word; z-index: 1000; opacity: 0; visibility: hidden; transition: opacity 0.2s, visibility 0.2s; pointer-events: none; }
            .result-item:hover .tooltip { opacity: 1; visibility: visible; }
            .tooltip.top { bottom: 100%; left: 0; margin-bottom: 5px; }
            .tooltip.bottom { top: 100%; left: 0; margin-top: 5px; }
            .cache-badge { background-color: var(--vscode-charts-green); color: white; padding: 1px 4px; border-radius: 2px; font-size: 0.7em; margin-left: 5px; }
            .spinner {
                border: 2px solid transparent;
                border-top: 2px solid var(--vscode-progressBar-background);
                border-radius: 50%;
                width: 14px;
                height: 14px;
                animation: spin 1s linear infinite;
                display: inline-block;
                vertical-align: middle;
                margin-right: 8px;
            }
            @keyframes spin {
                0% { transform: rotate(0deg); }
                100% { transform: rotate(360deg); }
            }
            .options-row {
                display: flex;
                align-items: center;
                gap: 8px;
                padding: 5px 10px;
                font-size: 12px;
                border-bottom: 1px solid var(--vscode-panel-border);
            }
            .options-row label {
                display: flex;
                align-items: center;
                gap: 4px;
                cursor: pointer;
            }
            .options-row select {
                background: var(--vscode-dropdown-background);
                color: var(--vscode-dropdown-foreground);
                border: 1px solid var(--vscode-dropdown-border);
                padding: 3px 6px;
                border-radius: 2px;
                cursor: pointer;
                font-size: 12px;
            }
            .searching-indicator {
                display: flex;
                align-items: center;
                justify-content: center;
                padding: 20px;
                color: var(--vscode-descriptionForeground);
            }
        </style>
    </head>
    <body>
        <div class="search-box">
            <input type="text" id="searchInput" placeholder="Search tables, columns, view definitions, procedure source..." />
            <button id="searchBtn" class="primary">Search</button>
            <button id="cancelBtn" style="display: none;" title="Cancel search">\u2715</button>
            <button id="resetBtn" title="Reset search">\u21BA</button>
        </div>
        <div class="options-row">
            <label>
                Source search mode:
                <select id="sourceModeSelect">
                    <option value="">Objects Only</option>
                    <option value="raw">Source: Raw</option>
                    <option value="noComments">Source: No Comments</option>
                    <option value="noCommentsNoLiterals">Source: No Comments/Strings</option>
                </select>
            </label>
        </div>
        <div id="status"></div>
        <ul class="results" id="resultsList"></ul>

        <script>
            try {
            const vscode = acquireVsCodeApi();
            const searchInput = document.getElementById('searchInput');
            const searchBtn = document.getElementById('searchBtn');
            const cancelBtn = document.getElementById('cancelBtn');
            const resetBtn = document.getElementById('resetBtn');
            const sourceModeSelect = document.getElementById('sourceModeSelect');
            const resultsList = document.getElementById('resultsList');
            const status = document.getElementById('status');
            
            let isSearching = false;
            
            function setSearchingState(searching) {
                isSearching = searching;
                cancelBtn.style.display = searching ? 'inline-flex' : 'none';
                searchBtn.disabled = searching;
            }

            searchBtn.addEventListener('click', () => {
                const term = searchInput.value;
                if (term) {
                    // Show searching indicator in results panel
                    resultsList.innerHTML = '<li class="searching-indicator"><span class="spinner"></span> Searching...</li>';
                    status.textContent = '';
                    setSearchingState(true);
                    
                    const sourceMode = sourceModeSelect.value;
                    if (sourceMode) {
                        // Source code search with mode
                        vscode.postMessage({ type: 'searchSource', value: term, mode: sourceMode });
                    } else {
                        // Object search (cache + database)
                        vscode.postMessage({ type: 'search', value: term });
                    }
                }
            });
            
            cancelBtn.addEventListener('click', () => {
                vscode.postMessage({ type: 'cancel' });
            });
            
            resetBtn.addEventListener('click', () => {
                vscode.postMessage({ type: 'reset' });
            });

            searchInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    searchBtn.click();
                }
            });

            window.addEventListener('message', event => {
                const message = event.data;
                switch (message.type) {
                    case 'searching':
                        // Show searching indicator in results panel
                        resultsList.innerHTML = '<li class="searching-indicator"><span class="spinner"></span> ' + (message.message || 'Searching...') + '</li>';
                        status.textContent = '';
                        break;
                    case 'results':
                        status.textContent = '';
                        setSearchingState(false);
                        renderResults(message.data, message.append);
                        break;
                    case 'error':
                        resultsList.innerHTML = '';
                        status.textContent = 'Error: ' + message.message;
                        setSearchingState(false);
                        break;
                    case 'cancelled':
                        resultsList.innerHTML = '';
                        status.textContent = 'Search cancelled.';
                        setSearchingState(false);
                        break;
                    case 'reset':
                        searchInput.value = '';
                        resultsList.innerHTML = '';
                        status.textContent = '';
                        setSearchingState(false);
                        break;
                }
            });

            function renderResults(data, append) {
                if (!append) {
                    resultsList.innerHTML = '';
                }

                if (!data || data.length === 0) {
                    if (!append && resultsList.children.length === 0) {
                        status.textContent = 'No results found.';
                    }
                    return;
                }

                data.forEach(item => {
                    const li = document.createElement('li');
                    li.className = 'result-item';

                    const parentInfo = item.PARENT ? \`Parent: \${item.PARENT}\` : '';
                    const schemaInfo = item.SCHEMA ? \`Schema: \${item.SCHEMA}\` : '';
                    const databaseInfo = item.DATABASE ? \`Database: \${item.DATABASE}\` : '';
                    const description = item.DESCRIPTION && item.DESCRIPTION.trim() ? item.DESCRIPTION : '';
                    
                    // Add match type indicator
                    const matchTypeInfo = item.MATCH_TYPE === 'DEFINITION' ? 'Match in view definition' :
                                        item.MATCH_TYPE === 'SOURCE' ? 'Match in procedure source' :
                                        item.MATCH_TYPE === 'NAME' ? 'Match in name' : '';
                    
                    li.innerHTML = \`
                        <div class="item-header">
                            <span>\${item.NAME}</span>
                            <span class="type-badge">\${item.TYPE}</span>
                        </div>
                        <div class="item-details">
                            <span>\${databaseInfo}</span>
                            <span>\${schemaInfo}</span>
                            <span>\${parentInfo}</span>
                            \${matchTypeInfo ? \`<span style="font-style: italic; color: var(--vscode-descriptionForeground);">\${matchTypeInfo}</span>\` : ''}
                        </div>
                        \${description ? \`<div class="tooltip bottom">\${description}</div>\` : ''}
                    \`;
                    
                    // Add double-click handler to navigate to schema tree
                    li.addEventListener('dblclick', () => {
                        vscode.postMessage({ 
                            type: 'navigate', 
                            name: item.NAME,
                            schema: item.SCHEMA,
                            database: item.DATABASE,
                            objType: item.TYPE,
                            parent: item.PARENT,
                            connectionName: item.connectionName // Pass back connection name
                        });
                    });
                    
                    resultsList.appendChild(li);
                });
            }
            } catch (e) {
                document.body.innerHTML = '<pre style="color:red;">Error loading Schema Search: ' + e.message + '\\n' + e.stack + '</pre>';
            }
        </script>
    </body>
    </html>`}};mo();var Ka=Q(require("vscode"));mo();var EE=class{provideDocumentLinks(e,n){let r=[],i=e.getText(),s=/[a-zA-Z0-9_"]+(\.[a-zA-Z0-9_"]*)+/g,o;for(;(o=s.exec(i))!==null;){let a=e.positionAt(o.index),l=e.positionAt(o.index+o[0].length),c=new Ka.Range(a,l),u=Gn.getObjectAtPosition(i,o.index+Math.floor(o[0].length/2));if(u){if(o[0].split(".").length===2&&!u.database&&this.isLikelyAliasReference(i,o.index))continue;let f={name:u.name,schema:u.schema,database:u.database},p=Ka.Uri.parse(`command:netezza.revealInSchema?${encodeURIComponent(JSON.stringify(f))}`),h=new Ka.DocumentLink(c,p);h.tooltip=`Reveal ${u.name} in Schema`,r.push(h)}}return r}isLikelyAliasReference(e,n){let i=e.substring(Math.max(0,n-200),n).replace(/--[^\n]*/g,"").replace(/\/\*[\s\S]*?\*\//g,"").toUpperCase();return/(?:FROM|JOIN)\s+[a-zA-Z0-9_"]*$/i.test(i)?!1:!!i.match(/\b(SELECT|WHERE|ON|HAVING|ORDER\s+BY|GROUP\s+BY|AND|OR|SET|VALUES)\b(?!.*\b(?:FROM|JOIN)\b)/)}};var pE=Q(require("vscode")),hE=class{provideFoldingRanges(e,n,r){let i=[],s=[],o=/^\s*--\s*REGION\b/i,a=/^\s*--\s*ENDREGION\b/i;for(let l=0;l<e.lineCount;l++){let u=e.lineAt(l).text;if(o.test(u))s.push(l);else if(a.test(u)&&s.length>0){let d=s.pop();i.push(new pE.FoldingRange(d,l,pE.FoldingRangeKind.Region))}}return i}};var nn=Q(require("vscode"));sE();var su=class t{constructor(e,n){this._extensionUri=e;this._context=n;this._currentOffset=0}static{this.viewType="netezza.queryHistory"}static{this.PAGE_SIZE=50}resolveWebviewView(e,n,r){this._view=e,e.webview.options={enableScripts:!0,localResourceRoots:[this._extensionUri]},e.webview.html=this._getHtmlForWebview(e.webview),this.sendHistoryToWebview(!0),e.webview.onDidReceiveMessage(async i=>{switch(i.type){case"refresh":this.refresh();break;case"loadMore":await this.loadMore();break;case"searchArchive":await this.searchArchive(i.term);break;case"clearAll":await this.clearAllHistory();break;case"deleteEntry":await this.deleteEntry(i.id,i.query);break;case"copyQuery":await nn.env.clipboard.writeText(i.query),nn.window.showInformationMessage("Query copied to clipboard");break;case"executeQuery":await this.executeQuery(i.query);break;case"getHistory":await this.sendHistoryToWebview(!0);break;case"toggleFavorite":await this.toggleFavorite(i.id);break;case"updateEntry":await this.updateEntry(i.id,i.tags,i.description);break;case"requestEdit":await this.requestEdit(i.id);break;case"requestTagFilter":await this.requestTagFilter(i.tags);break;case"showFavoritesOnly":await this.sendFavoritesToWebview();break;case"filterByTag":await this.sendFilteredByTagToWebview(i.tag);break}})}refresh(){this._view&&this.sendHistoryToWebview(!0)}async loadMore(){this._view&&(this._currentOffset+=t.PAGE_SIZE,this.sendHistoryToWebview(!1))}async searchArchive(e){if(!this._view)return;let n=new fn(this._context),r=await n.searchArchive(e),i=await n.getStats();this._view.webview.postMessage({type:"archiveSearchResults",history:r,stats:i,term:e})}async sendHistoryToWebview(e=!1){if(!this._view)return;e&&(this._currentOffset=0);let n=new fn(this._context),r=await n.getHistory(t.PAGE_SIZE,this._currentOffset),i=await n.getStats();console.log(`QueryHistoryView: sending history to webview, entries=${r.length}, offset=${this._currentOffset}, reset=${e}`),this._view.webview.postMessage({type:"historyData",history:r,stats:i,reset:e})}async clearAllHistory(){await nn.window.showWarningMessage("Are you sure you want to clear all query history?",{modal:!0},"Clear All")==="Clear All"&&(await new fn(this._context).clearHistory(),this.refresh(),nn.window.showInformationMessage("Query history cleared"))}async deleteEntry(e,n){let r=n?`: ${n.substring(0,50)}${n.length>50?"...":""}`:"";if(await nn.window.showWarningMessage(`Are you sure you want to delete this query${r}?`,{modal:!0},"Delete")==="Delete"){let s=new fn(this._context);await s.deleteEntry(e),this._view?.webview.postMessage({type:"entryDeleted",id:e});let o=await s.getStats();this._view?.webview.postMessage({type:"updateStats",stats:o})}}async executeQuery(e){let n=await nn.workspace.openTextDocument({content:e,language:"sql"});await nn.window.showTextDocument(n)}async toggleFavorite(e){await new fn(this._context).toggleFavorite(e),this.refresh()}async updateEntry(e,n,r){await new fn(this._context).updateEntry(e,n,r),this.refresh(),nn.window.showInformationMessage("Entry updated successfully")}async requestEdit(e){let i=(await new fn(this._context).getHistory()).find(a=>a.id===e);if(!i){nn.window.showErrorMessage("Entry not found (might be archived)");return}let s=await nn.window.showInputBox({prompt:"Enter tags (comma separated)",value:i.tags||"",placeHolder:"tag1, tag2, tag3"});if(s===void 0)return;let o=await nn.window.showInputBox({prompt:"Enter description",value:i.description||"",placeHolder:"Description for this query"});o!==void 0&&await this.updateEntry(e,s,o)}async requestTagFilter(e){if(e.length===1)await this.sendFilteredByTagToWebview(e[0]);else if(e.length>1){let n=await nn.window.showQuickPick(e,{placeHolder:"Filter by which tag?"});n&&await this.sendFilteredByTagToWebview(n)}}async sendFavoritesToWebview(){if(!this._view)return;let e=new fn(this._context),n=await e.getFavorites(),r=await e.getStats();this._view.webview.postMessage({type:"historyData",history:n,stats:r,filter:"favorites",reset:!0})}async sendFilteredByTagToWebview(e){if(!this._view)return;let n=new fn(this._context),r=await n.getByTag(e),i=await n.getStats();this._view.webview.postMessage({type:"historyData",history:r,stats:i,filter:`tag: ${e}`,reset:!0})}_getHtmlForWebview(e){let n=e.asWebviewUri(nn.Uri.joinPath(this._extensionUri,"media","queryHistory.css")),r=e.asWebviewUri(nn.Uri.joinPath(this._extensionUri,"media","queryHistory.js"));return`<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Security-Policy" content="default-src 'none'; style-src ${e.cspSource}; script-src ${e.cspSource};">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Query History</title>
    <link href="${n}" rel="stylesheet">
</head>
<body>
    <div class="toolbar">
        <div class="toolbar-top">
            <input type="search" id="searchInput" placeholder="Search queries..." />
            <span class="stats" id="stats">Loading...</span>
        </div>
        <div class="toolbar-buttons">
            <button class="secondary" id="showAllBtn">\u{1F4DC} All</button>
            <button class="secondary" id="showFavoritesBtn">\u2B50 Favorites</button>
            <button class="secondary" id="refreshBtn">\u21BB Refresh</button>
            <button class="secondary" id="clearAllBtn">\u{1F5D1}\uFE0F Clear All</button>
        </div>
    </div>
    <div class="history-container" id="historyContainer">
        <div class="empty-state">
            <div class="empty-state-icon">\u{1F4DC}</div>
            <div>No query history yet</div>
        </div>
    </div>
    <div id="loadingIndicator" class="loading-indicator" style="display:none;">Loading more...</div>

    <script src="${r}"></script>
</body>
</html>`}};var Lt=Q(require("vscode"));pn();var TE=class t{static{this.viewType="netezza.editData"}static async createOrShow(e,n,r,i){if(!n||!n.label||!n.dbName||!n.schema){Lt.window.showErrorMessage("Invalid table selection");return}let s=n.label,o=n.schema,a=n.dbName,l=`${a}.${o}.${s}`,c=Lt.window.createWebviewPanel(t.viewType,`Edit: ${s}`,Lt.ViewColumn.One,{enableScripts:!0,localResourceRoots:[Lt.Uri.joinPath(e,"media")],retainContextWhenHidden:!0});c.webview.html=this._getHtmlForWebview(c.webview,e,l),this._loadData(c,a,o,s,n.connectionName,r,i),c.webview.onDidReceiveMessage(async u=>{try{switch(u.command){case"save":await this._handleSave(c,u.changes,l,n.connectionName,r,i),this._loadData(c,a,o,s,n.connectionName,r,i,{whereClause:u.whereClause,columns:u.columns});break;case"refresh":this._loadData(c,a,o,s,n.connectionName,r,i,{whereClause:u.whereClause,columns:u.columns});break;case"updateTableComment":await this._execSimpleCommand(r,i,n.connectionName,`COMMENT ON TABLE ${l} IS '${(u.comment||"").replace(/'/g,"''")}'`,"Table comment updated");break;case"updateColumnComment":await this._execSimpleCommand(r,i,n.connectionName,`COMMENT ON COLUMN ${l}.${u.column} IS '${(u.comment||"").replace(/'/g,"''")}'`,"Column comment updated");break;case"addColumn":await this._execSimpleCommand(r,i,n.connectionName,`ALTER TABLE ${l} ADD COLUMN ${u.name} ${u.type}`,`Column ${u.name} added`,!0),this._loadData(c,a,o,s,n.connectionName,r,i);break;case"dropColumn":await this._execSimpleCommand(r,i,n.connectionName,`ALTER TABLE ${l} DROP COLUMN ${u.column}`,`Column ${u.column} dropped`,!0),this._loadData(c,a,o,s,n.connectionName,r,i);break;case"error":Lt.window.showErrorMessage(u.text);break;case"info":Lt.window.showInformationMessage(u.text);break}}catch(d){Lt.window.showErrorMessage(`Error: ${d instanceof Error?d.message:String(d)}`)}})}static async _execSimpleCommand(e,n,r,i,s,o=!1){try{await hn(e,i,!0,r,n),Lt.window.showInformationMessage(s)}catch(a){Lt.window.showErrorMessage(`Operation failed: ${a instanceof Error?a.message:String(a)}`)}}static async _loadData(e,n,r,i,s,o,a,l={}){let c=`${n}.${r}.${i}`;try{e.webview.postMessage({command:"setLoading",loading:!0,message:"Fetching data..."});let u=R=>ue(o,R,!0,a,s),d="ROWID, *";if(l.columns&&l.columns.trim()){let R=l.columns.trim();/\bROWID\b/i.test(R)?d=R:d="ROWID, "+R}let E=`SELECT ${d} FROM ${c}`;if(l.whereClause&&l.whereClause.trim()){let R=l.whereClause.trim();/^\s*WHERE\s/i.test(R)?E+=` ${R}`:E+=` WHERE ${R}`}E+=" ORDER BY ROWID LIMIT 50000";let[f,p]=await Promise.all([ue(o,E,!0,a,s),M0(u,n,r,i)]),h=p.tableComment||"",T=U0(p.columns),S=[];try{f&&f.data?(S=Te(f),console.log("[EditDataProvider] Parsed data rows:",S.length)):console.log("[EditDataProvider] No data returned")}catch(R){console.error("[EditDataProvider] Data Parse Error",R)}let m=[];if(S.length>0)m=Object.keys(S[0]),m.includes("ROWID")&&(m=["ROWID",...m.filter(R=>R!=="ROWID")]);else if(l.columns&&l.columns.trim()){let R=l.columns.trim().split(",").map(I=>I.trim()).filter(I=>I);m=R.some(I=>I.toUpperCase()==="ROWID")?R:["ROWID",...R]}else T.length>0&&(m=["ROWID",...T.map(R=>R.ATTNAME)]);console.log("[EditDataProvider] Sending to webview:",{dataRows:S.length,columns:m.length}),e.webview.postMessage({command:"setData",data:S,columns:m,metadata:{tableComment:h,columns:T}})}catch(u){let d=u instanceof Error?u.message:String(u);Lt.window.showErrorMessage(`Failed to load data: ${d}`),e.webview.postMessage({command:"setError",text:d})}finally{e.webview.postMessage({command:"setLoading",loading:!1})}}static async _handleSave(e,n,r,i,s,o){let a=[];if(n.deletes&&n.deletes.length>0){let l=n.deletes.join(",");a.push(`DELETE FROM ${r} WHERE ROWID IN (${l})`)}if(n.updates&&n.updates.length>0)for(let l of n.updates){let c=[];for(let[u,d]of Object.entries(l.changes))u!=="ROWID"&&c.push(`${u} = ${this._formatValue(d)}`);c.length>0&&a.push(`UPDATE ${r} SET ${c.join(", ")} WHERE ROWID = ${l.rowId}`)}if(n.inserts&&n.inserts.length>0)for(let l of n.inserts){let c=Object.keys(l).filter(d=>d!=="ROWID");if(c.length===0)continue;let u=c.map(d=>this._formatValue(l[d]));a.push(`INSERT INTO ${r} (${c.join(", ")}) VALUES (${u.join(", ")})`)}if(a.length===0){Lt.window.showInformationMessage("No changes to save.");return}try{let l=["BEGIN",...a,"COMMIT"];await Zc(s,l,o),Lt.window.showInformationMessage(`Successfully executed ${a.length} changes.`)}catch(l){Lt.window.showErrorMessage(`Failed to save changes: ${l instanceof Error?l.message:String(l)}`)}}static _formatValue(e){return e==null||e===""?"NULL":typeof e=="number"?e.toString():typeof e=="boolean"?e?"TRUE":"FALSE":`'${String(e).replace(/'/g,"''")}'`}static _getHtmlForWebview(e,n,r){let i=e.asWebviewUri(Lt.Uri.joinPath(n,"media","tanstack-table-core.js")),s=e.asWebviewUri(Lt.Uri.joinPath(n,"media","tanstack-virtual-core.js")),o=e.asWebviewUri(Lt.Uri.joinPath(n,"media","editDataPanel.js")),a=e.asWebviewUri(Lt.Uri.joinPath(n,"media","editDataPanel.css")),l=e.asWebviewUri(Lt.Uri.joinPath(n,"media","codicon.ttf")),c=eJ();return`<!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <meta http-equiv="Content-Security-Policy" content="default-src 'none'; font-src ${e.cspSource}; style-src ${e.cspSource} 'unsafe-inline'; script-src 'nonce-${c}';">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <link href="${a}" rel="stylesheet">
            <style>
                @font-face {
                    font-family: 'codicon';
                    src: url('${l}') format('truetype');
                }
                .codicon { font-family: 'codicon'; }
            </style>
            <script nonce="${c}" src="${i}"></script>
            <script nonce="${c}" src="${s}"></script>
            <title>Edit Data: ${r}</title>
        </head>
        <body>
            <div class="main-layout">
                <!-- Tabs Header -->
                <div class="tabs-header">
                    <div class="tab active" data-target="tab-data">
                        Data
                    </div>
                    <div class="tab" data-target="tab-metadata">
                        Table Description
                    </div>
                </div>

                <!-- Tab: Data -->
                <div id="tab-data" class="tab-content active">
                    <div class="toolbar">
                        <div class="filter-container">
                            <input type="text" id="filterColumns" class="toolbar-input" placeholder="Columns (e.g. ID, NAME)" title="Columns to select">
                            <input type="text" id="filterWhere" class="toolbar-input" placeholder="WHERE clause (e.g. ID > 100)" title="WHERE filter condition">
                        </div>
                        <span id="status" class="status"></span>
                        <div class="actions">
                            <button id="refreshBtn" title="Apply Filter / Refresh">Refresh</button>
                            <button id="addRowBtn">Add Row</button>
                            <button id="saveBtn" class="primary">Save Changes</button>
                        </div>
                    </div>
                    <div id="gridContainer" class="grid-container"></div>
                </div>

                <!-- Tab: Metadata -->
                <div id="tab-metadata" class="tab-content">
                    <div id="metadataContent" class="metadata-content">
                        <!-- Populated by JS -->
                        Loading metadata...
                    </div>
                </div>
            </div>
            
            <script nonce="${c}" src="${o}"></script>
        </body>
        </html>`}};function eJ(){let t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let n=0;n<32;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}var H0=Q(require("vscode"));function NA(t,e){return e?t.startsWith(`${e}|`):!0}function Mr(t){if(!t||typeof t!="object")return;let e=t;if(e.label)return typeof e.label=="string"?e.label:e.label.label}function SE(t){let e={};return t.forEach((n,r)=>{e[r]=n}),e}function F0(t){let e={};return t.forEach((n,r)=>{let i={};n.data.forEach((s,o)=>{i[o]=s}),e[r]={data:i,timestamp:n.timestamp}}),e}function OA(t,e,n){return e?`${t}.${e}.${n}`:`${t}..${n}`}var tJ=4,RE=class{constructor(){this.dbCache=new Map;this.schemaCache=new Map;this.tableCache=new Map;this.columnCache=new Map;this.tableIdMap=new Map;this.typeGroupCache=new Map;let n=H0.workspace.getConfiguration("netezza").get("cacheTTL",tJ);this.CACHE_TTL=n*60*60*1e3}isEntryValid(e){return Date.now()-e<this.CACHE_TTL}setOnDataChange(e){this.onDataChange=e}clearAll(){this.dbCache.clear(),this.schemaCache.clear(),this.tableCache.clear(),this.columnCache.clear(),this.tableIdMap.clear(),this.typeGroupCache.clear()}getDatabases(e){let n=this.dbCache.get(e);if(n){if(!this.isEntryValid(n.timestamp)){this.dbCache.delete(e);return}return n.data}}setDatabases(e,n){this.dbCache.set(e,{data:n,timestamp:Date.now()}),this.onDataChange?.("db")}getSchemas(e,n){let r=`${e}|${n}`,i=this.schemaCache.get(r);if(i){if(!this.isEntryValid(i.timestamp)){this.schemaCache.delete(r);return}return i.data}}setSchemas(e,n,r){let i=`${e}|${n}`;this.schemaCache.set(i,{data:r,timestamp:Date.now()}),this.onDataChange?.("schema")}getTables(e,n){let r=`${e}|${n}`,i=this.tableCache.get(r);if(i){if(!this.isEntryValid(i.timestamp)){this.tableCache.delete(r),this.tableIdMap.delete(r);return}return i.data}}getTablesAllSchemas(e,n){let r=`${e}|${n}.`,i=[],s=new Set;for(let[o,a]of this.tableCache)if(o.startsWith(r))for(let l of a.data){let c=Mr(l);c&&!s.has(c.toUpperCase())&&(s.add(c.toUpperCase()),i.push(l))}return i.length>0?i:void 0}setTables(e,n,r,i){let s=Date.now(),o=`${e}|${n}`;this.tableCache.set(o,{data:r,timestamp:s}),this.tableIdMap.set(o,{data:i,timestamp:s}),this.onDataChange?.("table")}getObjectsWithSchema(e,n){let r=`${e}|${n}.`,i=[],s=new Set;for(let[o,a]of this.tableCache)if(o.startsWith(r)||o===`${e}|${n}..`){let l=o.split("|");if(l.length<2)continue;let u=l[1].split("."),d=(u.length>1?u[1]:"")||"",E=this.tableIdMap.get(o);for(let f of a.data){let p=Mr(f),h=`${d}.${p}`;if(p&&!s.has(h)){s.add(h);let T;if(E){let S=OA(n,d||void 0,p);T=E.data.get(S)}i.push({item:f,schema:d,objId:T,owner:f.OWNER,description:f.DESCRIPTION})}}}return i}getColumns(e,n){let r=`${e}|${n}`,i=this.columnCache.get(r);if(i){if(!this.isEntryValid(i.timestamp)){this.columnCache.delete(r);return}return i.data}}setColumns(e,n,r){let i=`${e}|${n}`;this.columnCache.set(i,{data:r,timestamp:Date.now()}),this.onDataChange?.("column")}getColumnsAnySchema(e,n,r){let i=`${e}|${n}.`,s=r.toUpperCase();for(let[o,a]of this.columnCache)if(o.startsWith(i)){let l=o.split(".");if(l.length>=3&&l[l.length-1].toUpperCase()===s&&this.isEntryValid(a.timestamp))return a.data}}findTableId(e,n){let r=`${e}|`;for(let[i,s]of this.tableIdMap)if(i.startsWith(r)){let o=s.data.get(n);if(o!==void 0)return o}}getTypeGroups(e,n){let r=`${e}|${n}`;return this.typeGroupCache.get(r)?.data}setTypeGroups(e,n,r){let i=`${e}|${n}`;this.typeGroupCache.set(i,{data:r,timestamp:Date.now()})}findObjectWithType(e,n,r,i){let s=`${e}|`,o=i.toUpperCase();for(let[a,l]of this.tableCache){if(!a.startsWith(s))continue;let c=a.split("|");if(c.length<2)continue;let d=c[1].split("."),E=d[0],f=d.length>1?d[1]:void 0;if(E.toUpperCase()===n.toUpperCase()&&!(r!=null&&r!==""&&f?.toUpperCase()!==r.toUpperCase()))for(let p of l.data){let h=Mr(p);if(h?.toUpperCase()===o){let T=p.objType||(p.kind===18?"VIEW":"TABLE"),S=OA(E,f,h),R=this.tableIdMap.get(a)?.data.get(S);if(R!==void 0)return{objId:R,objType:T,schema:f||"",name:h||i}}}}}invalidateSchema(e,n,r){let i=r?`${n}.${r}`:`${n}..`,s=`${e}|${i}`;this.tableCache.has(s)&&(this.tableCache.delete(s),this.tableIdMap.delete(s),this.onDataChange?.("table"),console.log(`[CacheStorage] Invalidated cache for ${s}`))}getDbCacheMap(){return this.dbCache}getSchemaCacheMap(){return this.schemaCache}getTableCacheMap(){return this.tableCache}getTableIdMapMap(){return this.tableIdMap}loadDbCache(e){this.dbCache=e}loadSchemaCache(e){this.schemaCache=e}loadTableCache(e){this.tableCache=e}loadTableIdMap(e){this.tableIdMap=e}};var ou=Q(require("vscode")),go=Q(require("fs"));var nJ=4,AE=class{constructor(e,n){this.context=e;this.storage=n;let i=ou.workspace.getConfiguration("netezza").get("cacheTTL",nJ);this.CACHE_TTL=i*60*60*1e3,this.context.storageUri&&(this.cacheFilePath=ou.Uri.joinPath(this.context.storageUri,"schema-cache.json").fsPath,this.ensureStorageDir())}async ensureStorageDir(){if(this.context.storageUri)try{await ou.workspace.fs.createDirectory(this.context.storageUri)}catch{}}async initialize(){try{let e=["sqlCompletion.dbCache","sqlCompletion.schemaCache","sqlCompletion.tableCache","sqlCompletion.columnCache","sqlCompletion.tableIdMap"];for(let n of e)this.context.workspaceState.get(n)!==void 0&&await this.context.workspaceState.update(n,void 0)}catch(e){console.error("[CachePersistence] Error cleaning up legacy workspace state:",e)}if(this.cacheFilePath)try{if(go.existsSync(this.cacheFilePath)){let e=await go.promises.readFile(this.cacheFilePath,"utf-8"),n=JSON.parse(e),r=Date.now();if(n.dbCache){let i=new Map;for(let[s,o]of Object.entries(n.dbCache))r-o.timestamp<this.CACHE_TTL&&i.set(s,o);this.storage.loadDbCache(i)}if(n.schemaCache){let i=new Map;for(let[s,o]of Object.entries(n.schemaCache))r-o.timestamp<this.CACHE_TTL&&i.set(s,o);this.storage.loadSchemaCache(i)}if(n.tableCache){let i=new Map;for(let[s,o]of Object.entries(n.tableCache))r-o.timestamp<this.CACHE_TTL&&i.set(s,o);this.storage.loadTableCache(i)}if(n.tableIdMap){let i=new Map;for(let[s,o]of Object.entries(n.tableIdMap))(this.storage.getTableCacheMap().has(s)||r-o.timestamp<this.CACHE_TTL)&&i.set(s,{data:new Map(Object.entries(o.data)),timestamp:o.timestamp});this.storage.loadTableIdMap(i)}}}catch(e){console.error("[CachePersistence] Error loading cache from disk:",e)}}scheduleSave(e){this.saveTimeoutId&&clearTimeout(this.saveTimeoutId),this.saveTimeoutId=setTimeout(()=>this.flushSave(),2e3)}async flushSave(){if(this.saveTimeoutId=void 0,!!this.cacheFilePath)try{let e={dbCache:SE(this.storage.getDbCacheMap()),schemaCache:SE(this.storage.getSchemaCacheMap()),tableCache:SE(this.storage.getTableCacheMap()),tableIdMap:F0(this.storage.getTableIdMapMap())};await go.promises.writeFile(this.cacheFilePath,JSON.stringify(e),"utf-8")}catch(e){console.error("[CachePersistence] Error saving cache to disk:",e)}}async clearCache(){if(this.saveTimeoutId&&(clearTimeout(this.saveTimeoutId),this.saveTimeoutId=void 0),this.storage.clearAll(),this.cacheFilePath)try{go.existsSync(this.cacheFilePath)&&await go.promises.unlink(this.cacheFilePath)}catch(e){console.error("[CachePersistence] Error clearing cache file:",e)}}};function Ja(t){return!t.columns||!t.data||t.data.length===0?[]:t.data.map(e=>{let n={};return t.columns.forEach((r,i)=>{n[r.name]=e[i]}),n})}var mE=class{constructor(e){this.storage=e;this.columnPrefetchInProgress=new Set;this.allObjectsPrefetchTriggeredSet=new Set;this.connectionPrefetchTriggered=new Set;this.connectionPrefetchInProgress=new Set}async prefetchColumnsForSchema(e,n,r,i){let s=r?`${n}.${r}`:`${n}..`,o=`${e}|${s}`;if(this.columnPrefetchInProgress.has(o))return;let a=this.storage.getTables(e,s);if(!(!a||a.length===0)){this.columnPrefetchInProgress.add(o);try{let l=[];for(let E of a){let f=Mr(E);if(!f)continue;let p=`${n}.${r||""}.${f}`;this.storage.getColumns(e,p)||l.push(f)}if(l.length===0)return;let c=`${n}..`,u=r?`AND UPPER(O.SCHEMA) = UPPER('${r}')`:"",d=`
                SELECT 
                    O.OBJNAME AS TABLENAME,
                    C.ATTNAME,
                    C.FORMAT_TYPE,
                    C.ATTNUM,
                    COALESCE(C.DESCRIPTION, '') AS DESCRIPTION,
                    MAX(CASE WHEN K.CONTYPE = 'p' THEN 1 ELSE 0 END) AS IS_PK,
                    MAX(CASE WHEN K.CONTYPE = 'f' THEN 1 ELSE 0 END) AS IS_FK
                FROM ${c}_V_RELATION_COLUMN C
                JOIN ${c}_V_OBJECT_DATA O ON C.OBJID = O.OBJID
                LEFT JOIN ${c}_V_RELATION_KEYDATA K 
                    ON UPPER(K.RELATION) = UPPER(O.OBJNAME) 
                    AND UPPER(K.SCHEMA) = UPPER(O.SCHEMA)
                    AND UPPER(K.ATTNAME) = UPPER(C.ATTNAME)
                    AND K.CONTYPE IN ('p', 'f')
                WHERE UPPER(O.DBNAME) = UPPER('${n}')
                ${u}
                AND O.OBJTYPE IN ('TABLE', 'VIEW', 'EXTERNAL TABLE')
                GROUP BY O.OBJNAME, C.ATTNAME, C.FORMAT_TYPE, C.ATTNUM, C.DESCRIPTION
                ORDER BY O.OBJNAME, C.ATTNUM
            `;try{let E=await i(d);if(E){let f=Ja(E),p=new Map;for(let h of f){let T=h.TABLENAME;p.has(T)||p.set(T,[]),p.get(T).push({ATTNAME:h.ATTNAME,FORMAT_TYPE:h.FORMAT_TYPE,label:h.ATTNAME,kind:5,detail:h.FORMAT_TYPE,documentation:h.DESCRIPTION||"",isPk:Number(h.IS_PK)===1,isFk:Number(h.IS_FK)===1})}for(let[h,T]of p){let S=`${n}.${r||""}.${h}`;this.storage.setColumns(e,S,T)}}}catch(E){console.error("[CachePrefetcher] Error fetching columns:",E)}}finally{this.columnPrefetchInProgress.delete(o)}}}async prefetchAllObjects(e,n){let r=`ALL_OBJECTS|${e}`;if(!this.allObjectsPrefetchTriggeredSet.has(r)){this.allObjectsPrefetchTriggeredSet.add(r),console.log(`[CachePrefetcher] Starting background prefetch of all objects (Connection: ${e})`);try{let s=await n(`
                SELECT OBJNAME, OBJID, SCHEMA, DBNAME, OBJTYPE, OWNER, COALESCE(DESCRIPTION, '') AS DESCRIPTION
                FROM _V_OBJECT_DATA 
                WHERE OBJTYPE IN ('TABLE', 'VIEW') 
                ORDER BY DBNAME, SCHEMA, OBJNAME
            `);if(!s)return;let o=Ja(s),a=new Map;for(let l of o){let c=l.SCHEMA?`${l.DBNAME}.${l.SCHEMA}`:`${l.DBNAME}..`;a.has(c)||a.set(c,{tables:[],idMap:new Map});let u=a.get(c);u.tables.push({OBJNAME:l.OBJNAME,label:l.OBJNAME,kind:l.OBJTYPE==="VIEW"?18:6,detail:l.SCHEMA?l.OBJTYPE==="VIEW"?"View":"Table":`${l.OBJTYPE==="VIEW"?"View":"Table"} (${l.SCHEMA})`,objType:l.OBJTYPE,OBJID:l.OBJID,SCHEMA:l.SCHEMA,OWNER:l.OWNER,DESCRIPTION:l.DESCRIPTION});let d=l.SCHEMA?`${l.DBNAME}.${l.SCHEMA}.${l.OBJNAME}`:`${l.DBNAME}..${l.OBJNAME}`;u.idMap.set(d,l.OBJID)}for(let[l,c]of a)this.storage.setTables(e,l,c.tables,c.idMap);console.log(`[CachePrefetcher] Prefetched tables for ${a.size} schema(s) on ${e}`)}catch(i){console.error("[CachePrefetcher] Error in prefetchAllObjects:",i)}}}hasAllObjectsPrefetchTriggered(e){return this.allObjectsPrefetchTriggeredSet.has(`ALL_OBJECTS|${e}`)}hasConnectionPrefetchTriggered(e){return this.connectionPrefetchTriggered.has(e)}triggerConnectionPrefetch(e,n){this.connectionPrefetchTriggered.has(e)||this.connectionPrefetchInProgress.has(e)||(this.connectionPrefetchInProgress.add(e),console.log(`[CachePrefetcher] Starting eager prefetch for connection: ${e}`),this.executeConnectionPrefetch(e,n).catch(r=>console.error("[CachePrefetcher] Connection prefetch error:",r)).finally(()=>{this.connectionPrefetchInProgress.delete(e),this.connectionPrefetchTriggered.add(e),console.log(`[CachePrefetcher] Completed eager prefetch for connection: ${e}`)}))}async executeConnectionPrefetch(e,n){let r=await this.prefetchDatabases(e,n);!r||r.length===0||(await Promise.all(r.map(i=>this.prefetchSchemasForDb(e,i,n))),await this.prefetchAllTablesAndViews(e,n),await this.prefetchAllColumnsForConnection(e,n))}async prefetchDatabases(e,n){if(this.storage.getDatabases(e))return this.storage.getDatabases(e)?.map(i=>Mr(i)).filter(Boolean)||[];try{let i=await n("SELECT DATABASE FROM system.._v_database ORDER BY DATABASE");if(!i)return[];let s=Ja(i),o=s.map(a=>({DATABASE:a.DATABASE,label:a.DATABASE,kind:9,detail:"Database"}));return this.storage.setDatabases(e,o),s.map(a=>a.DATABASE)}catch(r){return console.error("[CachePrefetcher] prefetchDatabases error:",r),[]}}async prefetchSchemasForDb(e,n,r){if(!this.storage.getSchemas(e,n))try{let i=`SELECT SCHEMA FROM ${n}.._V_SCHEMA ORDER BY SCHEMA`,s=await r(i);if(!s)return;let a=Ja(s).filter(l=>l.SCHEMA!=null&&l.SCHEMA!=="").map(l=>({SCHEMA:l.SCHEMA,label:l.SCHEMA,kind:19,detail:`Schema in ${n}`,insertText:l.SCHEMA,sortText:l.SCHEMA,filterText:l.SCHEMA}));this.storage.setSchemas(e,n,a)}catch(i){console.error(`[CachePrefetcher] prefetchSchemasForDb error for ${n}:`,i)}}async prefetchAllTablesAndViews(e,n){try{let i=await n(`
                SELECT OBJNAME, OBJID, SCHEMA, DBNAME, OBJTYPE, OWNER, COALESCE(DESCRIPTION, '') AS DESCRIPTION
                FROM _V_OBJECT_DATA 
                WHERE OBJTYPE IN ('TABLE', 'VIEW', 'EXTERNAL TABLE')
                ORDER BY DBNAME, SCHEMA, OBJNAME
            `);if(!i)return;let s=Ja(i),o=new Map;for(let a of s){let l=a.SCHEMA?`${a.DBNAME}.${a.SCHEMA}`:`${a.DBNAME}..`;o.has(l)||o.set(l,{tables:[],idMap:new Map});let c=o.get(l);c.tables.push({OBJNAME:a.OBJNAME,label:a.OBJNAME,kind:a.OBJTYPE==="VIEW"?18:6,detail:a.SCHEMA?a.OBJTYPE:`${a.OBJTYPE} (${a.SCHEMA})`,objType:a.OBJTYPE,OWNER:a.OWNER,DESCRIPTION:a.DESCRIPTION});let u=a.SCHEMA?`${a.DBNAME}.${a.SCHEMA}.${a.OBJNAME}`:`${a.DBNAME}..${a.OBJNAME}`;c.idMap.set(u,a.OBJID)}for(let[a,l]of o)this.storage.getTables(e,a)||this.storage.setTables(e,a,l.tables,l.idMap);console.log(`[CachePrefetcher] Prefetched tables/views for ${o.size} schema(s)`)}catch(r){console.error("[CachePrefetcher] prefetchAllTablesAndViews error:",r)}}async prefetchAllColumnsForConnection(e,n){try{let r=`${e}|`,i=[];for(let[u,d]of this.storage.tableCache){if(!u.startsWith(r))continue;let E=u.split("|");if(E.length<2)continue;let p=E[1].split("."),h=p[0],T=p.length>1?p[1]:"";for(let S of d.data){let m=Mr(S);m&&i.push({schema:T,name:m,db:h})}}if(i.length===0)return;let s=0,o=Date.now(),a=new Map;for(let u of i)a.has(u.db)||a.set(u.db,[]),a.get(u.db).push(u);let l=Array.from(a.entries()).map(async([u,d])=>{let E=`
                    SELECT 
                        O.OBJNAME AS TABLENAME, 
                        O.SCHEMA, 
                        O.DBNAME, 
                        C.ATTNAME, 
                        C.FORMAT_TYPE, 
                        C.ATTNUM,
                        COALESCE(C.DESCRIPTION, '') AS DESCRIPTION,
                        MAX(CASE WHEN K.CONTYPE = 'p' THEN 1 ELSE 0 END) AS IS_PK,
                        MAX(CASE WHEN K.CONTYPE = 'f' THEN 1 ELSE 0 END) AS IS_FK
                    FROM ${u}.._V_RELATION_COLUMN C
                    JOIN ${u}.._V_OBJECT_DATA O ON C.OBJID = O.OBJID
                    LEFT JOIN ${u}.._V_RELATION_KEYDATA K 
                        ON UPPER(K.RELATION) = UPPER(O.OBJNAME) 
                        AND UPPER(K.SCHEMA) = UPPER(O.SCHEMA)
                        AND UPPER(K.ATTNAME) = UPPER(C.ATTNAME)
                        AND K.CONTYPE IN ('p', 'f')
                    WHERE O.DBNAME = '${u}' 
                    AND O.OBJTYPE IN ('TABLE', 'VIEW', 'EXTERNAL TABLE')
                    GROUP BY O.OBJNAME, O.SCHEMA, O.DBNAME, C.ATTNAME, C.FORMAT_TYPE, C.ATTNUM, C.DESCRIPTION
                    ORDER BY O.SCHEMA, O.OBJNAME, C.ATTNUM
                `;try{let f=Date.now(),p=await n(E),h=Date.now()-f;if(p){let T=Date.now(),S=Ja(p),m=Date.now()-T,R=new Map;for(let A of S){let I=`${A.DBNAME}.${A.SCHEMA||""}.${A.TABLENAME}`;R.has(I)||R.set(I,[]),R.get(I).push({ATTNAME:A.ATTNAME,FORMAT_TYPE:A.FORMAT_TYPE,label:A.ATTNAME,kind:5,detail:A.FORMAT_TYPE,documentation:A.DESCRIPTION||"",isPk:Number(A.IS_PK)===1,isFk:Number(A.IS_FK)===1})}for(let[A,I]of R)this.storage.getColumns(e,A)||(this.storage.setColumns(e,A,I),s++);console.log(`[CachePrefetcher] DB ${u}: ${d.length} tables (expected), ${S.length} columns (total fetched) | query=${h}ms, parse=${m}ms`)}}catch(f){console.error(`[CachePrefetcher] Error fetching columns for DB ${u}:`,f)}});await Promise.all(l);let c=Date.now()-o;console.log(`[CachePrefetcher] Prefetched columns for ${s} tables/views in ${c}ms`)}catch(r){console.error("[CachePrefetcher] prefetchAllColumnsForConnection error:",r)}}};function G0(t,e,n){let r=[],i=e.toLowerCase();for(let[s,o]of t.tableCache){if(!NA(s,n))continue;let a=s.split("|");if(a.length<2)continue;let c=a[1].split("."),u=c[0],d=c.length>1?c[1]:void 0;for(let E of o.data){let f=Mr(E);if(f&&f.toLowerCase().includes(i)){let p=E.objType||(E.kind===18?"VIEW":"TABLE");r.push({name:f,type:p,database:u,schema:d||(E.detail&&E.detail.includes("(")?E.detail.match(/\((.*?)\)/)?.[1]:void 0)})}}}for(let[s,o]of t.columnCache){if(!NA(s,n))continue;let a=s.split("|");if(a.length<2)continue;let c=a[1].split("."),u=c[0],d=c[1],E=c[2];for(let f of o.data){let p=Mr(f);p&&p.toLowerCase().includes(i)&&r.push({name:p,type:"COLUMN",database:u,schema:d,parent:E})}}return r}var gE=class{constructor(e){this.storage=new RE,this.persistence=new AE(e,this.storage),this.prefetcher=new mE(this.storage),this.storage.setOnDataChange(n=>{this.persistence.scheduleSave(n)})}async initialize(){return this.persistence.initialize()}scheduleSave(e){this.persistence.scheduleSave(e)}async flushSave(){return this.persistence.flushSave()}async clearCache(){return this.persistence.clearCache()}getDatabases(e){return this.storage.getDatabases(e)}setDatabases(e,n){this.storage.setDatabases(e,n)}getSchemas(e,n){return this.storage.getSchemas(e,n)}setSchemas(e,n,r){this.storage.setSchemas(e,n,r)}getTables(e,n){return this.storage.getTables(e,n)}getTablesAllSchemas(e,n){return this.storage.getTablesAllSchemas(e,n)}setTables(e,n,r,i){this.storage.setTables(e,n,r,i)}getObjectsWithSchema(e,n){return this.storage.getObjectsWithSchema(e,n)}getColumns(e,n){return this.storage.getColumns(e,n)}getColumnsAnySchema(e,n,r){return this.storage.getColumnsAnySchema(e,n,r)}setColumns(e,n,r){this.storage.setColumns(e,n,r)}findTableId(e,n){return this.storage.findTableId(e,n)}getTypeGroups(e,n){return this.storage.getTypeGroups(e,n)}setTypeGroups(e,n,r){this.storage.setTypeGroups(e,n,r)}findObjectWithType(e,n,r,i){return this.storage.findObjectWithType(e,n,r,i)}invalidateSchema(e,n,r){this.storage.invalidateSchema(e,n,r)}search(e,n){return G0(this.storage,e,n)}async prefetchColumnsForSchema(e,n,r,i){return this.prefetcher.prefetchColumnsForSchema(e,n,r,i)}async prefetchAllObjects(e,n){return this.prefetcher.prefetchAllObjects(e,n)}hasAllObjectsPrefetchTriggered(e){return this.prefetcher.hasAllObjectsPrefetchTriggered(e)}hasConnectionPrefetchTriggered(e){return this.prefetcher.hasConnectionPrefetchTriggered(e)}triggerConnectionPrefetch(e,n){this.prefetcher.triggerConnectionPrefetch(e,n)}get schemaCache(){return this.storage.schemaCache}get tableCache(){return this.storage.tableCache}get columnCache(){return this.storage.columnCache}get tableIdMap(){return this.storage.tableIdMap}get typeGroupCache(){return this.storage.typeGroupCache}};var ir=Q(require("vscode"));var Gt=Q(require("vscode"));function $0(t){switch(t){case"error":return Gt.DiagnosticSeverity.Error;case"warning":return Gt.DiagnosticSeverity.Warning;case"information":return Gt.DiagnosticSeverity.Information;case"hint":return Gt.DiagnosticSeverity.Hint;case"off":return null;default:return Gt.DiagnosticSeverity.Warning}}function CA(t,e){let n=!1,r=!1,i=!1,s=!1;for(let o=0;o<e&&o<t.length;o++){let a=t[o],l=o+1<t.length?t[o+1]:"";i?a===`
`&&(i=!1):s?a==="*"&&l==="/"&&(s=!1,o++):n?a==="'"&&(n=!1):r?a==='"'&&(r=!1):a==="-"&&l==="-"?i=!0:a==="/"&&l==="*"?s=!0:a==="'"?n=!0:a==='"'&&(r=!0)}return n||r||i||s}function Qn(t,e){let n=[],r,i=new RegExp(e.source,e.flags.includes("g")?e.flags:e.flags+"g");for(;(r=i.exec(t))!==null;)CA(t,r.index)||n.push(r);return n}var rJ={id:"NZ001",name:"Select Star",description:"Avoid using SELECT * - specify explicit column names for better performance and maintainability",defaultSeverity:Gt.DiagnosticSeverity.Warning,check(t){let e=[],r=Qn(t,/\bSELECT\s+\*/gi);for(let i of r){let s=i[0].indexOf("*");e.push({ruleId:this.id,message:`${this.id}: ${this.description}`,severity:this.defaultSeverity,startOffset:i.index+s,endOffset:i.index+s+1})}return e}},iJ={id:"NZ002",name:"Delete Without Where",description:"DELETE statement without WHERE clause will delete all rows",defaultSeverity:Gt.DiagnosticSeverity.Error,check(t){let e=[],r=Qn(t,/\bDELETE\s+FROM\s+[\w."]+/gi);for(let i of r){let s=t.substring(i.index+i[0].length),o=s.indexOf(";"),a=o>=0?s.substring(0,o):s;/\bWHERE\b/i.test(a)||e.push({ruleId:this.id,message:`${this.id}: ${this.description}`,severity:this.defaultSeverity,startOffset:i.index,endOffset:i.index+6})}return e}},sJ={id:"NZ003",name:"Update Without Where",description:"UPDATE statement without WHERE clause will update all rows",defaultSeverity:Gt.DiagnosticSeverity.Error,check(t){let e=[],r=Qn(t,/\bUPDATE\s+[\w."]+\s+SET\b/gi);for(let i of r){let s=t.substring(i.index+i[0].length),o=s.indexOf(";"),a=o>=0?s.substring(0,o):s;/\bWHERE\b/i.test(a)||e.push({ruleId:this.id,message:`${this.id}: ${this.description}`,severity:this.defaultSeverity,startOffset:i.index,endOffset:i.index+6})}return e}},oJ={id:"NZ004",name:"Cross Join",description:"CROSS JOIN produces a Cartesian product - verify this is intentional",defaultSeverity:Gt.DiagnosticSeverity.Warning,check(t){let e=[],r=Qn(t,/\bCROSS\s+JOIN\b/gi);for(let i of r)e.push({ruleId:this.id,message:`${this.id}: ${this.description}`,severity:this.defaultSeverity,startOffset:i.index,endOffset:i.index+i[0].length});return e}},aJ={id:"NZ005",name:"Leading Wildcard Like",description:"LIKE pattern with leading wildcard ('%...') prevents index usage",defaultSeverity:Gt.DiagnosticSeverity.Hint,check(t){let e=[],r=Qn(t,/\bLIKE\s+'%/gi);for(let i of r)e.push({ruleId:this.id,message:`${this.id}: ${this.description}`,severity:this.defaultSeverity,startOffset:i.index,endOffset:i.index+i[0].length});return e}},lJ={id:"NZ006",name:"Order By Without Limit",description:"ORDER BY without LIMIT/FETCH may cause performance issues on large datasets",defaultSeverity:Gt.DiagnosticSeverity.Information,check(t){let e=[],r=Qn(t,/\bORDER\s+BY\b/gi);for(let i of r){let s=t.substring(i.index+i[0].length),o=s.indexOf(";"),a=o>=0?s.substring(0,o):s;if(!/\b(LIMIT|FETCH|TOP)\b/i.test(a)){let l=t.substring(0,i.index);/\bTOP\s+\d+\b/i.test(l)||e.push({ruleId:this.id,message:`${this.id}: ${this.description}`,severity:this.defaultSeverity,startOffset:i.index,endOffset:i.index+i[0].length})}}return e}},cJ={id:"NZ007",name:"Inconsistent Keyword Case",description:"SQL keywords have inconsistent casing - consider using consistent UPPER or lower case",defaultSeverity:Gt.DiagnosticSeverity.Warning,check(t){let e=[],n=["SELECT","FROM","WHERE","JOIN","LEFT","RIGHT","INNER","OUTER","ON","AND","OR","INSERT","INTO","UPDATE","DELETE","CREATE","DROP","ALTER","TABLE","VIEW","INDEX","ORDER","BY","GROUP","HAVING","UNION","ALL","DISTINCT","AS","SET","VALUES","NULL","NOT","IN","BETWEEN","LIKE","IS","EXISTS","CASE","WHEN","THEN","ELSE","END","LIMIT","OFFSET"],r=0,i=0,s=[],o=new Set;for(let c of n){let u=new RegExp(`\\b${c}\\b`,"gi"),d=Qn(t,u);for(let E of d){if(o.has(E.index))continue;o.add(E.index);let f=E[0],p;f===f.toUpperCase()?(r++,p="UPPER"):f===f.toLowerCase()?(i++,p="lower"):p="Mixed",s.push({keyword:f,index:E.index,type:p})}}let a=r>=i,l=a?"UPPER":"lower";for(let c of s)c.type==="Mixed"?e.push({ruleId:this.id,message:`${this.id}: Keyword '${c.keyword}' has mixed casing (expected ${a?"UPPERCASE":"lowercase"})`,severity:this.defaultSeverity,startOffset:c.index,endOffset:c.index+c.keyword.length}):c.type!==l&&e.push({ruleId:this.id,message:`${this.id}: Keyword '${c.keyword}' should be ${a?"UPPERCASE":"lowercase"}`,severity:this.defaultSeverity,startOffset:c.index,endOffset:c.index+c.keyword.length});return e}},uJ={id:"NZ008",name:"Truncate Table",description:"TRUNCATE removes all data and cannot be rolled back - use with caution",defaultSeverity:Gt.DiagnosticSeverity.Warning,check(t){let e=[],r=Qn(t,/\bTRUNCATE\s+(TABLE\s+)?[\w."]+/gi);for(let i of r)e.push({ruleId:this.id,message:`${this.id}: ${this.description}`,severity:this.defaultSeverity,startOffset:i.index,endOffset:i.index+8});return e}},dJ={id:"NZ009",name:"Or In Where Clause",description:"Multiple OR conditions may prevent index usage - consider UNION for better performance",defaultSeverity:Gt.DiagnosticSeverity.Hint,check(t){let e=[],r=Qn(t,/\bWHERE\b/gi);for(let i of r){let s=t.substring(i.index),o=s.search(/\b(GROUP\s+BY|ORDER\s+BY|HAVING|LIMIT|UNION|;)/i),a=o>=0?s.substring(0,o):s,l=Qn(a,/\bOR\b/gi);if(l.length>=2){let c=l[0];e.push({ruleId:this.id,message:`${this.id}: ${this.description} (${l.length} OR conditions found)`,severity:this.defaultSeverity,startOffset:i.index+c.index,endOffset:i.index+c.index+2})}}return e}},fJ={id:"NZ010",name:"Missing Table Alias",description:"Consider using table aliases in JOINs for better readability",defaultSeverity:Gt.DiagnosticSeverity.Information,check(t){let e=[],r=Qn(t,/\bJOIN\s+([\w."]+)\s+ON\b/gi);for(let i of r)e.push({ruleId:this.id,message:`${this.id}: Table '${i[1]}' in JOIN has no alias - ${this.description}`,severity:this.defaultSeverity,startOffset:i.index,endOffset:i.index+i[0].length});return e}},EJ={id:"NZ011",name:"CTAS Missing Distribution",description:"CREATE TABLE AS SELECT should specify explicit data distribution",defaultSeverity:Gt.DiagnosticSeverity.Warning,check(t){let e=[],r=Qn(t,/\bCREATE\s+TABLE\s+(?:(?:IF\s+NOT\s+EXISTS\s+)?[\w."]+\s+)?AS\s+(?:\(\s*)?SELECT\b/gi);for(let i of r){let s=t.length;for(let u=i.index;u<t.length;u++)if(t[u]===";"&&!CA(t,u)){s=u;break}let o=t.substring(i.index,s),l=/\bDISTRIBUTE\s+ON\b/i.exec(o),c=!1;l&&(CA(t,i.index+l.index)||(c=!0)),c||e.push({ruleId:this.id,message:`${this.id}: ${this.description} - Add 'DISTRIBUTE ON (...)' or 'DISTRIBUTE ON RANDOM'`,severity:this.defaultSeverity,startOffset:i.index,endOffset:i.index+i[0].length})}return e}},hJ={id:"NZ012",name:"Update Alias With AS",description:'Netezza UPDATE statements do not support "AS" for table aliases. Use "UPDATE table alias" instead.',defaultSeverity:Gt.DiagnosticSeverity.Error,check(t){let e=[],r=Qn(t,/\bUPDATE\s+[\w."]+\s+AS\s+[\w."]+/gi);for(let i of r){let s=/\bAS\b/i.exec(i[0]);s&&e.push({ruleId:this.id,message:`${this.id}: ${this.description}`,severity:this.defaultSeverity,startOffset:i.index+s.index,endOffset:i.index+s.index+s[0].length})}return e}},pJ={id:"NZ013",name:"Prefer Union All",description:"UNION performs a distinct operation which is slower than UNION ALL. Use UNION ALL if duplicates are not an issue.",defaultSeverity:Gt.DiagnosticSeverity.Information,check(t){let e=[],r=Qn(t,/\bUNION\b(?!\s+ALL\b)/gi);for(let i of r)e.push({ruleId:this.id,message:`${this.id}: ${this.description}`,severity:this.defaultSeverity,startOffset:i.index,endOffset:i.index+i[0].length});return e}},W0=[rJ,iJ,sJ,oJ,aJ,lJ,cJ,uJ,dJ,fJ,EJ,hJ,pJ];var yA=class{constructor(){this.disposables=[];this.diagnosticCollection=ir.languages.createDiagnosticCollection("netezza-sql-linter")}activate(e){e.subscriptions.push(this.diagnosticCollection),this.disposables.push(ir.workspace.onDidOpenTextDocument(n=>{this.shouldLint(n)&&this.lintDocument(n)})),this.disposables.push(ir.workspace.onDidChangeTextDocument(n=>{this.shouldLint(n.document)&&this.lintDocument(n.document)})),this.disposables.push(ir.workspace.onDidCloseTextDocument(n=>{this.diagnosticCollection.delete(n.uri)})),this.disposables.push(ir.workspace.onDidChangeConfiguration(n=>{n.affectsConfiguration("netezza.linter")&&this.lintAllOpenDocuments()})),e.subscriptions.push(...this.disposables),this.lintAllOpenDocuments()}shouldLint(e){return e.languageId==="sql"}getConfig(){let e=ir.workspace.getConfiguration("netezza.linter");return{enabled:e.get("enabled",!0),rules:e.get("rules",{})}}lintAllOpenDocuments(){for(let e of ir.workspace.textDocuments)this.shouldLint(e)&&this.lintDocument(e)}lintDocument(e){let n=this.getConfig();if(!n.enabled){this.diagnosticCollection.delete(e.uri);return}let r=e.getText(),i=this.lintSql(r,n.rules),s=this.issuesToDiagnostics(e,i);this.diagnosticCollection.set(e.uri,s)}lintSql(e,n={}){let r=[];for(let i of W0){let s=n[i.id],o=s!==void 0?$0(s):i.defaultSeverity;if(o===null)continue;let a=i.check(e);for(let l of a)r.push({...l,severity:o})}return r}issuesToDiagnostics(e,n){return n.map(r=>{let i=e.positionAt(r.startOffset),s=e.positionAt(r.endOffset),o=new ir.Range(i,s),a=new ir.Diagnostic(o,r.message,r.severity);return a.source="Netezza SQL Linter",a.code=r.ruleId,a})}dispose(){this.diagnosticCollection.dispose();for(let e of this.disposables)e.dispose()}},bA;function TJ(){return bA||(bA=new yA),bA}function k0(t){let e=TJ();return e.activate(t),e}var Io=Q(require("vscode"));mo();var au=class{static{this.providedCodeActionKinds=[Io.CodeActionKind.QuickFix]}provideCodeActions(e,n,r,i){let s=[];for(let o of r.diagnostics)if(o.code==="NZ011"){let a=this.createDistributeOnRandomFix(e,o);a&&s.push(a)}return s}createDistributeOnRandomFix(e,n){let r=new Io.CodeAction("Add DISTRIBUTE ON RANDOM",Io.CodeActionKind.QuickFix);r.diagnostics=[n],r.isPreferred=!0;let i=e.offsetAt(n.range.start),s=e.getText(),o=Gn.getStatementAtPosition(s,i);if(o)return r.edit=new Io.WorkspaceEdit,r.edit.insert(e.uri,e.positionAt(o.end)," DISTRIBUTE ON RANDOM"),r}};var Ge=Q(require("vscode"));function Y0(t){switch(t){case"sql":return{type:"sql",query:"",connection:"default"};case"python":return{type:"python",script:""};case"container":return{type:"container",nodes:[],connections:[]};case"export":return{type:"export",format:"csv",outputPath:""};case"import":return{type:"import",format:"csv",inputPath:"",targetTable:""};case"variable":return{type:"variable",variableName:"",source:"prompt",promptMessage:"Enter value"}}}function IE(){return"node-"+Date.now()+"-"+Math.random().toString(36).substr(2,9)}function _E(){return"conn-"+Date.now()+"-"+Math.random().toString(36).substr(2,9)}var wA=Q(require("fs"));var lu=class{validateProject(e){let n=[],r=[];e.name||n.push("Project name is required"),e.version||n.push("Project version is required"),Array.isArray(e.nodes)||n.push("Nodes must be an array"),Array.isArray(e.connections)||n.push("Connections must be an array");let i=this.validateNodes(e.nodes||[]);n.push(...i.errors),r.push(...i.warnings);let s=new Set((e.nodes||[]).map(l=>l.id)),o=this.validateConnections(e.connections||[],s);n.push(...o.errors),r.push(...o.warnings);let a=this.detectCycles(e);return n.push(...a),{isValid:n.length===0,errors:n,warnings:r}}validateNodes(e){let n=[],r=[],i=new Set;for(let s of e){if(!s.id){n.push("Node missing ID");continue}i.has(s.id)?n.push(`Duplicate node ID: ${s.id}`):i.add(s.id),s.type||n.push(`Node ${s.id} missing type`),s.name||r.push(`Node ${s.id} has no name`),(!s.position||typeof s.position.x!="number"||typeof s.position.y!="number")&&n.push(`Node ${s.id} has invalid position`),s.config||n.push(`Node ${s.id} has no configuration`)}return{errors:n,warnings:r}}validateConnections(e,n){let r=[],i=[],s=new Set;for(let o of e){if(!o.id){r.push("Connection missing ID");continue}(!o.from||!n.has(o.from))&&r.push(`Connection ${o.id} has invalid 'from' node: ${o.from}`),(!o.to||!n.has(o.to))&&r.push(`Connection ${o.id} has invalid 'to' node: ${o.to}`),o.from===o.to&&r.push(`Connection ${o.id} cannot connect node to itself`);let a=`${o.from}->${o.to}`;s.has(a)?i.push(`Duplicate connection from ${o.from} to ${o.to}`):s.add(a)}return{errors:r,warnings:i}}detectCycles(e){let n=[],r=new Set,i=new Set,s=new Map;for(let a of e.nodes||[])s.set(a.id,[]);for(let a of e.connections||[])s.get(a.from)?.push(a.to);let o=a=>{r.add(a),i.add(a);for(let l of s.get(a)||[])if(r.has(l)){if(i.has(l))return!0}else if(o(l))return!0;return i.delete(a),!1};for(let a of e.nodes||[])if(!r.has(a.id)&&o(a.id)){n.push("Project contains circular dependencies");break}return n}getTopologicalOrder(e){let n=new Map,r=new Map;for(let o of e.nodes)n.set(o.id,0),r.set(o.id,[]);for(let o of e.connections)r.get(o.from)?.push(o.to),n.set(o.to,(n.get(o.to)||0)+1);let i=[];for(let[o,a]of n)a===0&&i.push(o);let s=[];for(;i.length>0;){let o=i.shift();s.push(o);for(let a of r.get(o)||[]){let l=(n.get(a)||1)-1;n.set(a,l),l===0&&i.push(a)}}return s.length!==e.nodes.length?null:s}},ZDe=new lu;var xs=class t{constructor(e){this.currentProject=null;this.projectPath=null;this.isDirty=!1;this.validator=e||new lu}static getInstance(){return t.instance||(t.instance=new t),t.instance}static resetInstance(){t.instance=void 0}createProject(e){return this.currentProject={name:e,version:"1.0.0",description:"",variables:{},nodes:[],connections:[]},this.projectPath=null,this.isDirty=!0,this.currentProject}async loadProject(e){let n=await wA.promises.readFile(e,"utf-8"),r=JSON.parse(n),i=this.validateProject(r);if(i.length>0)throw new Error(`Invalid project: ${i.join(", ")}`);return this.currentProject=r,this.projectPath=e,this.isDirty=!1,this.currentProject}async saveProject(e){let n=e||this.projectPath;if(!n)throw new Error("No file path specified");if(!this.currentProject)throw new Error("No project to save");let r=JSON.stringify(this.currentProject,null,2);await wA.promises.writeFile(n,r,"utf-8"),this.projectPath=n,this.isDirty=!1}validateProject(e){return this.validator.validateProject(e).errors}validateProjectDetailed(e){return this.validator.validateProject(e)}addNode(e){if(!this.currentProject)throw new Error("No project loaded");e.id||(e.id=IE()),this.currentProject.nodes.push(e),this.isDirty=!0}updateNode(e,n){if(!this.currentProject)throw new Error("No project loaded");let r=this.currentProject.nodes.findIndex(i=>i.id===e);if(r===-1)throw new Error(`Node not found: ${e}`);this.currentProject.nodes[r]={...this.currentProject.nodes[r],...n},this.isDirty=!0}removeNode(e){if(!this.currentProject)throw new Error("No project loaded");this.currentProject.nodes=this.currentProject.nodes.filter(n=>n.id!==e),this.currentProject.connections=this.currentProject.connections.filter(n=>n.from!==e&&n.to!==e),this.isDirty=!0}addConnection(e){if(!this.currentProject)throw new Error("No project loaded");if(e.id||(e.id=_E()),this.currentProject.connections.some(i=>i.from===e.from&&i.to===e.to))throw new Error("Connection already exists");if(this.currentProject.connections.push(e),this.validator.detectCycles(this.currentProject).length>0)throw this.currentProject.connections.pop(),new Error("Connection would create a cycle");this.isDirty=!0}removeConnection(e){if(!this.currentProject)throw new Error("No project loaded");this.currentProject.connections=this.currentProject.connections.filter(n=>n.id!==e),this.isDirty=!0}getCurrentProject(){return this.currentProject}getProjectPath(){return this.projectPath}hasUnsavedChanges(){return this.isDirty}getNode(e){return this.currentProject?.nodes.find(n=>n.id===e)}getOutgoingConnections(e){return this.currentProject?.connections.filter(n=>n.from===e)||[]}getIncomingConnections(e){return this.currentProject?.connections.filter(n=>n.to===e)||[]}setProject(e){this.currentProject=e,this.isDirty=!0}markDirty(){this.isDirty=!0}getTopologicalOrder(){return this.currentProject?this.validator.getTopologicalOrder(this.currentProject):null}};function V0(t,e,n){return{nodeId:t,status:"success",startTime:e,endTime:new Date,output:n?.output,rowsAffected:n?.rowsAffected}}function q0(t,e,n){return{nodeId:t,status:"error",startTime:e,endTime:new Date,error:n instanceof Error?n.message:n}}function OE(t){let e=new Date;return{nodeId:t,status:"skipped",startTime:e,endTime:e}}var NE=class{constructor(e){this.startTime=new Date,this.result={nodeId:e,startTime:this.startTime}}success(){return this.result.status="success",this}error(e){return this.result.status="error",this.result.error=e instanceof Error?e.message:e,this}skipped(){return this.result.status="skipped",this}withOutput(e){return this.result.output=e,this}withRowsAffected(e){return this.result.rowsAffected=e,this}build(){return{nodeId:this.result.nodeId,status:this.result.status||"pending",startTime:this.startTime,endTime:new Date,error:this.result.error,output:this.result.output,rowsAffected:this.result.rowsAffected}}};var CE=class{constructor(){this.executors=new Map}registerExecutor(e,n){this.executors.set(e,n)}getExecutor(e){return this.executors.get(e)}onStatusChange(e){this.statusCallback=e}async execute(e,n){let r={projectName:e.name,startTime:new Date,status:"running",nodeResults:new Map};for(let i of e.nodes)this.statusCallback?.(i.id,"pending");try{n.onProgress?.(`Starting ETL project: ${e.name}`),n.onProgress?.(`Found ${e.nodes.length} tasks`),await this.executeDynamic(e,n,r);let i=Array.from(r.nodeResults.values()).some(o=>o.status==="error");r.status=i?"failed":"completed",r.endTime=new Date;let s=r.status==="completed"?"completed successfully":"completed with errors";n.onProgress?.(`ETL project ${s}`)}catch(i){r.status="failed",r.endTime=new Date,n.onProgress?.(`ETL project failed: ${String(i)}`)}return r}async executeDynamic(e,n,r){let i=new Set,s=[],o=new Set(e.connections.map(a=>a.to));for(let a of e.nodes)o.has(a.id)||s.push(a.id);for(;s.length>0;){if(n.cancellationToken?.isCancellationRequested){r.status="cancelled",r.endTime=new Date;for(let d of e.nodes)i.has(d.id)||(r.nodeResults.set(d.id,OE(d.id)),this.statusCallback?.(d.id,"skipped"));return}let a=s.shift();if(i.has(a))continue;let l=e.nodes.find(d=>d.id===a);if(!l)continue;let c=await this.executeNode(l,n);r.nodeResults.set(a,c),i.add(a),c.output!==void 0&&n.nodeOutputs.set(a,c.output);let u=e.connections.filter(d=>d.from===a);for(let d of u){let E=d.connectionType||"success";c.status==="success"&&E==="success"||c.status==="error"&&E==="failure"?!i.has(d.to)&&!s.includes(d.to)&&s.push(d.to):i.has(d.to)||!e.connections.some(h=>{if(h.to!==d.to||h.id===d.id)return!1;let T=r.nodeResults.get(h.from);if(!T)return!0;let S=h.connectionType||"success";return T.status==="success"&&S==="success"||T.status==="error"&&S==="failure"})&&!s.includes(d.to)&&(r.nodeResults.set(d.to,OE(d.to)),this.statusCallback?.(d.to,"skipped"),i.add(d.to))}}for(let a of e.nodes)i.has(a.id)||(r.nodeResults.set(a.id,OE(a.id)),this.statusCallback?.(a.id,"skipped"))}async executeNode(e,n){this.statusCallback?.(e.id,"running"),n.onProgress?.(`Running task: ${e.name}`);let r=this.executors.get(e.type);if(!r){let i={nodeId:e.id,status:"error",startTime:new Date,endTime:new Date,error:`No executor registered for node type: ${e.type}`};return this.statusCallback?.(e.id,"error",i.error),i}try{let i=await r.execute(e,n);return this.statusCallback?.(e.id,i.status,i.error),i.status==="success"&&(n.onProgress?.(`Task ${e.name} completed successfully`),i.rowsAffected!==void 0&&n.onProgress?.(`  Rows affected: ${i.rowsAffected}`)),i}catch(i){let s={nodeId:e.id,status:"error",startTime:new Date,endTime:new Date,error:String(i)};return this.statusCallback?.(e.id,"error",s.error),s}}getPreviousNodeOutput(e,n){return e.nodeOutputs.get(n)}};var cu=class{resolve(e,n){if(!e||!n||Object.keys(n).length===0)return e;let r=e;for(let[i,s]of Object.entries(n)){let o=new RegExp(`\\$\\{${this.escapeRegex(i)}\\}`,"g");r=r.replace(o,s)}return r}resolveAll(e,n){return e.map(r=>this.resolve(r,n))}escapeRegex(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}},dPe=new cu;var Zn=class{constructor(e){this.variableResolver=e||new cu}getConfig(e){return e.config}resolveVariables(e,n){return this.variableResolver.resolve(e,n.variables)}createSuccess(e,n,r){return V0(e,n,r)}createError(e,n,r){return q0(e,n,r)}resultBuilder(e){return new NE(e)}reportProgress(e,n){e.onProgress?.(n)}isCancelled(e){return e.cancellationToken?.isCancellationRequested??!1}validateRequired(e,n,r,i){if(r==null||r==="")return this.createError(e,n,`${i} is required`)}async safeExecute(e,n,r){try{return await r()}catch(i){return this.createError(e,n,i instanceof Error?i:String(i))}}};var LA=class{async createConnection(e){let n=yn(),r=new n({host:e.host,port:e.port||5480,database:e.database,user:e.user,password:e.password});return await r.connect(),r}},bE=class extends Zn{constructor(e,n){super(e),this.connectionFactory=n||new LA}async execute(e,n){let r=this.getConfig(e),i=new Date,s=this.validateRequired(e.id,i,r.query?.trim(),"SQL query");return s||this.safeExecute(e.id,i,async()=>{let o=this.resolveVariables(r.query,n);if(this.reportProgress(n,`Executing SQL: ${o.substring(0,100)}${o.length>100?"...":""}`),!n.connectionDetails)return this.createError(e.id,i,"No connection details available in context");let a=null;try{a=await this.connectionFactory.createConnection(n.connectionDetails);let l=await this.executeQuery(a,o,r.timeout);return this.createSuccess(e.id,i,{rowsAffected:l.rows.length,output:l})}finally{if(a)try{await a.close()}catch{}}})}async executeQuery(e,n,r){let i=e.createCommand(n);r&&(i.commandTimeout=r);let s=await i.executeReader(),o=[];for(let l=0;l<s.fieldCount;l++)o.push(s.getName(l));let a=[];for(;await s.read();){let l=[];for(let c=0;c<s.fieldCount;c++)l.push(s.getValue(c));a.push(l)}return s.close&&await s.close(),{columns:o,rows:a}}};var X0=require("child_process"),uu=Q(require("fs")),wE=Q(require("path")),z0=Q(require("os"));var DA=class{async run(e,n,r,i){return new Promise(s=>{let o=(0,X0.spawn)(e,n,{env:r,shell:!0}),a="",l="";o.stdout?.on("data",c=>{a+=c.toString()}),o.stderr?.on("data",c=>{l+=c.toString()}),o.on("close",c=>{s({exitCode:c??1,stdout:a.trim(),stderr:l.trim()})}),o.on("error",c=>{s({exitCode:1,stdout:"",stderr:`Failed to start Python: ${c.message}`})}),i&&i>0&&setTimeout(()=>{o.kill(),s({exitCode:1,stdout:a.trim(),stderr:`Execution timed out after ${i} seconds`})},i*1e3)})}},PA=class{find(){return process.platform==="win32"?"py":"python3"}},yE=class extends Zn{constructor(e,n,r){super(e),this.runner=n||new DA,this.interpreterFinder=r||new PA}async execute(e,n){let r=this.getConfig(e),i=new Date;return!r.script&&!r.scriptPath?this.createError(e.id,i,"Python script or script path is required"):this.safeExecute(e.id,i,async()=>{let s=r.interpreter||this.interpreterFinder.find();this.reportProgress(n,`Using Python interpreter: ${s}`);let{scriptPath:o,tempScript:a}=await this.prepareScript(r,n);try{this.reportProgress(n,`Executing Python script: ${wE.basename(o)}`);let l=[o,...r.arguments||[]],c=this.buildEnvironment(n.variables),u=await this.runWithProgress(s,l,c,n,r.timeout);return u.exitCode===0?this.createSuccess(e.id,i,{output:u.stdout}):this.resultBuilder(e.id).error(u.stderr||`Python exited with code ${u.exitCode}`).withOutput(u.stdout).build()}finally{a&&await this.cleanupTempScript(o)}})}async prepareScript(e,n){if(e.scriptPath){let s=this.resolveVariables(e.scriptPath,n);if(!uu.existsSync(s))throw new Error(`Script file not found: ${s}`);return{scriptPath:s,tempScript:!1}}let r=this.resolveVariables(e.script,n),i=wE.join(z0.tmpdir(),`etl_script_${Date.now()}.py`);return await uu.promises.writeFile(i,r,"utf-8"),{scriptPath:i,tempScript:!0}}buildEnvironment(e){return{...process.env,...Object.fromEntries(Object.entries(e).map(([n,r])=>[`ETL_VAR_${n.toUpperCase()}`,r]))}}async runWithProgress(e,n,r,i,s){let o=await this.runner.run(e,n,r,s);if(o.stdout)for(let a of o.stdout.split(`
`).slice(0,10))a.trim()&&this.reportProgress(i,`[Python] ${a.trim()}`);if(o.stderr)for(let a of o.stderr.split(`
`).slice(0,5))a.trim()&&this.reportProgress(i,`[Python ERROR] ${a.trim()}`);return o}async cleanupTempScript(e){try{await uu.promises.unlink(e)}catch{}}};vA();xi();var fb=class{constructor(){this.format="csv"}async export(e,n,r,i,s,o){try{return await xA(n,r,i,void 0,o),{success:!0}}catch(a){return{success:!1,message:a instanceof Error?a.message:String(a)}}}},Eb=class{constructor(){this.format="xlsb"}async export(e,n,r,i,s,o){let a=await db(n,r,i,!1,s,o);return{success:a.success,message:a.message,rowsExported:a.details?.rows_exported}}},IS=class extends Zn{constructor(e,n){super(e),this.strategies=n||new Map([["csv",new fb],["xlsb",new Eb]])}registerStrategy(e){this.strategies.set(e.format,e)}async execute(e,n){let r=this.getConfig(e),i=new Date,s=this.validateRequired(e.id,i,r.outputPath,"Output path");return s||this.safeExecute(e.id,i,async()=>{let o=this.resolveVariables(r.outputPath,n),a=r.query?this.resolveVariables(r.query,n):"";if(!a&&r.sourceNodeId&&n.nodeOutputs.get(r.sourceNodeId)?.rows)return this.createError(e.id,i,"In-memory data export is not yet supported. Please specify a query.");if(!a)return this.createError(e.id,i,"No query or source node specified for export");let l=this.strategies.get(r.format);if(!l)return this.createError(e.id,i,`Unsupported export format: ${r.format}`);this.reportProgress(n,`Exporting to ${r.format.toUpperCase()}: ${o}`);let c=await l.export(n.extensionContext,n.connectionDetails,a,o,u=>this.reportProgress(n,`[Export] ${u}`),r.timeout);return c.success?this.createSuccess(e.id,i,{rowsAffected:c.rowsExported,output:{filePath:o,format:r.format,rowsExported:c.rowsExported}}):this.createError(e.id,i,c.message||"Export failed")})}};var ij=Q(require("fs"));$S();var Pb=class{async importData(e,n,r,i,s){return Db(e,n,r,i,s)}},WS=class extends Zn{constructor(e,n){super(e),this.importer=n||new Pb}async execute(e,n){let r=this.getConfig(e),i=new Date,s=this.validateRequired(e.id,i,r.inputPath,"Input path");if(s)return s;let o=this.validateRequired(e.id,i,r.targetTable,"Target table");return o||this.safeExecute(e.id,i,async()=>{let a=this.resolveVariables(r.inputPath,n),l=this.resolveVariables(r.targetTable,n),c=r.targetSchema?this.resolveVariables(r.targetSchema,n):"";if(!ij.existsSync(a))return this.createError(e.id,i,`Input file not found: ${a}`);this.reportProgress(n,`Importing from ${r.format.toUpperCase()}: ${a}`),this.reportProgress(n,`Target table: ${c?c+".":""}${l}`);let u=await this.importer.importData(a,l,n.connectionDetails,d=>{this.reportProgress(n,`[Import] ${d}`)},r.timeout);return u.success?this.createSuccess(e.id,i,{rowsAffected:u.details?.rowsInserted,output:{filePath:a,targetTable:`${c?c+".":""}${l}`,rowsProcessed:u.details?.rowsProcessed,rowsInserted:u.details?.rowsInserted}}):this.createError(e.id,i,u.message)})}};var kS=class extends Zn{constructor(e,n){super(n),this.engine=e}async execute(e,n){let r=this.getConfig(e),i=new Date;return!r.nodes||r.nodes.length===0?this.createSuccess(e.id,i,{output:"Empty container - nothing to execute"}):this.safeExecute(e.id,i,async()=>{this.reportProgress(n,`Entering container: ${e.name} (${r.nodes.length} tasks)`);let s={name:`Container: ${e.name}`,version:"1.0.0",nodes:r.nodes,connections:r.connections||[]},o=await this.engine.execute(s,n);return this.reportProgress(n,`Exiting container: ${e.name}`),this.processExecutionResult(e.id,i,r,o)})}processExecutionResult(e,n,r,i){if(i.status==="completed"){let{successCount:o,totalRows:a}=this.countSuccesses(i),l={tasksExecuted:r.nodes.length,tasksSucceeded:o,nestedResults:Array.from(i.nodeResults.entries())};return this.createSuccess(e,n,{rowsAffected:a,output:l})}if(i.status==="cancelled")return this.resultBuilder(e).skipped().build();let s=this.findFirstError(i)||"Container execution failed";return this.createError(e,n,s)}countSuccesses(e){let n=0,r=0;for(let i of e.nodeResults.values())i.status==="success"&&(n++,i.rowsAffected&&(r+=i.rowsAffected));return{successCount:n,totalRows:r}}findFirstError(e){for(let n of e.nodeResults.values())if(n.status==="error"&&n.error)return n.error}};var xb=class{async createConnection(e){let n=yn(),r=new n({host:e.host,port:e.port||5480,database:e.database,user:e.user,password:e.password});return await r.connect(),r}},YS=class extends Zn{constructor(n,r){super(n);this.variableManager=null;this.connectionFactory=r||new xb}setVariableManager(n){this.variableManager=n}async execute(n,r){let i=this.getConfig(n),s=new Date,o=this.validateRequired(n.id,s,i.variableName,"Variable name");if(o)return o;let a=r.variableManager||this.variableManager;return a?this.safeExecute(n.id,s,async()=>{let l;switch(i.source){case"prompt":l=await this.handlePrompt(i,a,r);break;case"static":l=this.handleStatic(i,r);break;case"sql":l=await this.handleSql(i,r);break;default:return this.createError(n.id,s,`Unknown variable source: ${i.source}`)}return l===void 0?this.createError(n.id,s,`Variable ${i.variableName} was not set (user cancelled or query returned no results)`):(a.set(i.variableName,l),r.variables[i.variableName]=l,this.reportProgress(r,`Variable ${i.variableName} = "${l}"`),this.createSuccess(n.id,s,{output:{variableName:i.variableName,value:l,source:i.source}}))}):this.createError(n.id,s,"Variable manager not available")}async handlePrompt(n,r,i){let s=n.promptMessage?this.resolveVariables(n.promptMessage,i):`Enter value for ${n.variableName}`,o=n.defaultValue?this.resolveVariables(n.defaultValue,i):void 0;return this.reportProgress(i,`Prompting for variable: ${n.variableName}`),r.promptForValue(n.variableName,s,o)}handleStatic(n,r){let i=n.value||"";return this.resolveVariables(i,r)}async handleSql(n,r){if(!n.query)throw new Error("SQL query is required for sql variable source");let i=this.resolveVariables(n.query,r);this.reportProgress(r,`Executing SQL for variable ${n.variableName}`);let s=null;try{s=await this.connectionFactory.createConnection(r.connectionDetails);let o=s.createCommand(i);n.timeout&&(o.commandTimeout=n.timeout);let a=await o.executeReader(),l;if(await a.read()){let c=a.getValue(0);l=c!=null?String(c):void 0}return a.close&&await a.close(),l}finally{if(s)try{await s.close()}catch{}}}};var sj=Q(require("vscode")),VS=class{constructor(e){this.variables=new Map(Object.entries(e||{}))}get(e){return this.variables.get(e)}set(e,n){this.variables.set(e,n)}has(e){return this.variables.has(e)}getAll(){return Object.fromEntries(this.variables)}async promptForValue(e,n,r){let i=await sj.window.showInputBox({prompt:n||`Enter value for ${e}`,value:r||"",placeHolder:`Value for \${${e}}`,ignoreFocusOut:!0});return i!==void 0&&this.set(e,i),i}snapshot(){return{...this.getAll()}}merge(e){for(let[n,r]of Object.entries(e))this.set(n,r)}};function oj(){return`
        :root {
            --bg-primary: var(--vscode-editor-background);
            --bg-secondary: var(--vscode-sideBar-background);
            --bg-hover: var(--vscode-list-hoverBackground);
            --border-color: var(--vscode-panel-border);
            --text-color: var(--vscode-editor-foreground);
            --text-muted: var(--vscode-descriptionForeground);
            --accent-color: var(--vscode-button-background);
            --accent-hover: var(--vscode-button-hoverBackground);
            --success-color: #4CAF50;
            --error-color: #f44336;
            --warning-color: #ff9800;
        }

        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            padding: 0;
            height: 100vh;
            overflow: hidden;
            font-family: var(--vscode-font-family);
            font-size: var(--vscode-font-size);
            color: var(--text-color);
            background: var(--bg-primary);
        }

        .etl-designer {
            display: flex;
            flex-direction: column;
            height: 100vh;
        }

        /* Toolbar */
        .toolbar {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 8px 16px;
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border-color);
        }

        .toolbar button {
            padding: 6px 12px;
            margin-right: 4px;
            border: 1px solid var(--border-color);
            background: var(--bg-primary);
            color: var(--text-color);
            cursor: pointer;
            border-radius: 4px;
        }

        .toolbar button:hover {
            background: var(--bg-hover);
        }

        .toolbar .btn-primary {
            background: var(--accent-color);
            border-color: var(--accent-color);
        }

        .toolbar .btn-primary:hover {
            background: var(--accent-hover);
        }

        .toolbar .btn-danger {
            background: var(--error-color);
            border-color: var(--error-color);
            color: white;
        }

        .toolbar .btn-danger:hover {
            opacity: 0.8;
        }

        .toolbar .separator {
            display: inline-block;
            width: 1px;
            height: 20px;
            background: var(--border-color);
            margin: 0 8px;
        }

        .project-name {
            font-weight: bold;
            font-size: 1.1em;
        }

        .status {
            color: var(--text-muted);
            font-size: 0.9em;
        }

        /* Main Content */
        .main-content {
            display: flex;
            flex: 1;
            overflow: hidden;
        }

        /* Toolbox */
        .toolbox {
            width: 200px;
            background: var(--bg-secondary);
            border-right: 1px solid var(--border-color);
            padding: 12px;
            overflow-y: auto;
        }

        .toolbox h3 {
            margin: 0 0 12px 0;
            font-size: 0.9em;
            color: var(--text-muted);
            text-transform: uppercase;
        }

        .toolbox-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 12px;
            margin-bottom: 6px;
            background: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            cursor: grab;
            transition: all 0.15s ease;
        }

        .toolbox-item:hover {
            border-color: var(--accent-color);
            transform: translateX(3px);
        }

        .toolbox-item:active {
            cursor: grabbing;
        }

        .toolbox-item .icon {
            font-size: 1.2em;
        }

        .toolbox-item .label {
            font-size: 0.85em;
        }

        .help-text {
            font-size: 0.8em;
            color: var(--text-muted);
            line-height: 1.6;
        }

        .help-text p {
            margin: 4px 0;
        }

        /* Canvas */
        .canvas-container {
            flex: 1;
            position: relative;
            overflow: hidden;
            background: var(--bg-primary);
            cursor: grab;
        }
        
        .canvas-container:active {
            cursor: grabbing;
        }

        .zoom-wrapper {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            transform-origin: 0 0;
            background: 
                linear-gradient(90deg, rgba(128,128,128,0.1) 1px, transparent 1px),
                linear-gradient(rgba(128,128,128,0.1) 1px, transparent 1px);
            background-size: 20px 20px;
        }

        .connections-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        .connections-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 5;
            pointer-events: none;
        }

        .connections-layer path.connection-line {
            stroke: var(--success-color);
            stroke-width: 2;
            fill: none;
            pointer-events: none;
        }
        
        .connections-layer path.connection-failure {
            stroke: var(--error-color);
        }
        
        .connections-layer path.connection-hit {
            stroke: transparent;
            stroke-width: 15px;
            fill: none;
            pointer-events: stroke;
            cursor: pointer;
        }

        .connections-layer path.connection-hit:hover + .connection-line {
            stroke-width: 3;
            filter: drop-shadow(0 0 2px currentColor);
        }

        .connections-layer marker polygon {
            fill: var(--accent-color);
        }

        .nodes-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 2;
            pointer-events: none;
        }

        .etl-node {
            pointer-events: all;
        }

        /* Nodes */
        .etl-node {
            position: absolute;
            min-width: 160px;
            background: var(--bg-secondary);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            cursor: move;
            user-select: none;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
        }

        .etl-node:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.25);
        }

        .etl-node.selected {
            border-color: var(--accent-color);
        }

        .etl-node.running {
            border-color: var(--warning-color);
            animation: pulse 1s infinite;
        }

        .etl-node.success {
            border-color: var(--success-color);
        }

        .etl-node.error {
            border-color: var(--error-color);
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .node-type-indicator {
            height: 4px;
            border-radius: 6px 6px 0 0;
        }

        .etl-node.sql .node-type-indicator { background: #4CAF50; }
        .etl-node.python .node-type-indicator { background: #3776AB; }
        .etl-node.container .node-type-indicator { background: #FF9800; }
        .etl-node.export .node-type-indicator { background: #2196F3; }
        .etl-node.import .node-type-indicator { background: #9C27B0; }

        .node-content {
            padding: 10px 12px;
        }

        .node-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 4px;
        }

        .node-icon {
            font-size: 1.2em;
        }

        .node-name {
            font-weight: 500;
            font-size: 0.9em;
        }

        .node-type {
            font-size: 0.75em;
            color: var(--text-muted);
            text-transform: uppercase;
        }

        .node-connectors {
            position: relative;
        }

        .node-actions {
            position: absolute;
            top: -8px;
            right: -8px;
            display: none;
        }

        .etl-node:hover .node-actions,
        .etl-node.selected .node-actions {
            display: block;
        }

        .node-delete-btn {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--error-color);
            color: white;
            border: 2px solid var(--bg-secondary);
            font-size: 12px;
            line-height: 16px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .node-delete-btn:hover {
            transform: scale(1.2);
        }

        .connector {
            width: 14px;
            height: 14px;
            background: var(--accent-color);
            border: 2px solid var(--bg-secondary);
            border-radius: 50%;
            position: absolute;
            cursor: crosshair;
            z-index: 10;
        }

        .connector.input {
            left: -9px;
            top: 50%;
            transform: translateY(-50%);
        }

        .connector.output {
            right: -9px;
            top: 50%;
            transform: translateY(-50%);
        }

        .connector:hover {
            transform: translateY(-50%) scale(1.3);
        }

        /* Properties Panel */
        .properties-panel {
            width: 250px;
            background: var(--bg-secondary);
            border-left: 1px solid var(--border-color);
            padding: 12px;
            overflow-y: auto;
        }

        .properties-panel h3 {
            margin: 0 0 12px 0;
            font-size: 0.9em;
            color: var(--text-muted);
            text-transform: uppercase;
        }

        .properties-panel .placeholder {
            color: var(--text-muted);
            font-style: italic;
        }

        .property-group {
            margin-bottom: 16px;
        }

        .property-label {
            display: block;
            font-size: 0.8em;
            color: var(--text-muted);
            margin-bottom: 4px;
        }

        .property-value {
            font-size: 0.9em;
            word-break: break-word;
        }

        .property-code {
            font-family: monospace;
            font-size: 0.8em;
            background: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: 4px;
            padding: 6px 8px;
            margin: 4px 0 0 0;
            white-space: pre-wrap;
            word-break: break-all;
            max-height: 80px;
            overflow-y: auto;
        }

        .configure-btn {
            width: 100%;
            margin-top: 16px;
            padding: 8px 12px;
            background: var(--accent-color);
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.85em;
        }

        .configure-btn:hover {
            background: var(--accent-hover);
        }

        /* Connection line being drawn */
        .temp-connection {
            stroke: var(--accent-color);
            stroke-width: 2;
            stroke-dasharray: 5,5;
            fill: none;
            pointer-events: none;
        }

        /* Container Editor Modal */
        .container-editor-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .container-editor-modal {
            width: 90%;
            height: 85%;
            background: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
        }

        .container-editor-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 16px;
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border-color);
            border-radius: 8px 8px 0 0;
        }

        .container-editor-title {
            font-weight: 600;
            font-size: 1.1em;
        }

        .container-editor-close {
            width: 28px;
            height: 28px;
            border: none;
            background: transparent;
            color: var(--text-color);
            font-size: 18px;
            cursor: pointer;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .container-editor-close:hover {
            background: var(--error-color);
            color: white;
        }

        .container-editor-content {
            flex: 1;
            display: flex;
            overflow: hidden;
        }

        .container-editor-toolbox {
            width: 180px;
            background: var(--bg-secondary);
            border-right: 1px solid var(--border-color);
            padding: 12px;
            overflow-y: auto;
        }

        .container-editor-toolbox h4 {
            margin: 0 0 10px 0;
            font-size: 0.85em;
            color: var(--text-muted);
            text-transform: uppercase;
        }

        .container-editor-canvas {
            flex: 1;
            position: relative;
            overflow: hidden;
            background: var(--bg-primary);
        }

        .container-editor-canvas .zoom-wrapper {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                linear-gradient(90deg, rgba(128,128,128,0.08) 1px, transparent 1px),
                linear-gradient(rgba(128,128,128,0.08) 1px, transparent 1px);
            background-size: 20px 20px;
        }

        .container-editor-footer {
            padding: 10px 16px;
            background: var(--bg-secondary);
            border-top: 1px solid var(--border-color);
            border-radius: 0 0 8px 8px;
            display: flex;
            justify-content: flex-end;
            gap: 8px;
        }

        .container-editor-footer button {
            padding: 6px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9em;
        }

        .container-editor-footer .btn-save {
            background: var(--accent-color);
            color: white;
            border: none;
        }

        .container-editor-footer .btn-save:hover {
            background: var(--accent-hover);
        }

        .container-editor-footer .btn-cancel {
            background: transparent;
            color: var(--text-color);
            border: 1px solid var(--border-color);
        }

        .container-editor-footer .btn-cancel:hover {
            background: var(--bg-hover);
        }

        /* Container node badge showing child count */
        .node-child-count {
            font-size: 0.7em;
            background: var(--warning-color);
            color: white;
            padding: 2px 6px;
            border-radius: 10px;
            margin-left: 4px;
        }
    `}function aj(t){return`
        const vscode = acquireVsCodeApi();
        
        // State
        let project = ${JSON.stringify(t)};
        let selectedNodeId = null;
        let isDragging = false;
        let dragOffset = { x: 0, y: 0 };
        let isConnecting = false;
        let connectionStart = null;
        let tempLine = null;
        
        // Zoom & Pan state
        let scale = 1;
        let pan = { x: 0, y: 0 };
        let isPanning = false;
        let panStart = { x: 0, y: 0 };

        // Container Editor state
        let containerEditorOpen = false;
        let editingContainerId = null;
        let containerNodes = [];
        let containerConnections = [];
        let containerSelectedNodeId = null;
        let containerIsDragging = false;
        let containerDragOffset = { x: 0, y: 0 };
        let containerIsConnecting = false;
        let containerConnectionStart = null;
        let containerTempLine = null;

        // Node icons
        const nodeIcons = {
            sql: '\u{1F4DC}',
            python: '\u{1F40D}',
            container: '\u{1F4E6}',
            export: '\u{1F4E4}',
            import: '\u{1F4E5}',
            variable: '\u{1F524}'
        };
    `}function lj(){return`
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        function updateNodeStatus(nodeId, status) {
            const nodeEl = document.getElementById('node-' + nodeId);
            if (nodeEl) {
                nodeEl.classList.remove('running', 'success', 'error', 'pending', 'skipped');
                nodeEl.classList.add(status);
            }
            
            document.getElementById('status').textContent = status === 'running' 
                ? 'Running...' 
                : (status === 'error' ? 'Error!' : '');
        }
    `}function cj(){return`
        function updateTransform() {
            const wrapper = document.getElementById('zoom-wrapper');
            if (wrapper) {
                wrapper.style.transform = \`translate(\${pan.x}px, \${pan.y}px) scale(\${scale})\`;
            }
        }

        function setupZoomPan() {
            const container = document.getElementById('canvas');
            
            // Wheel zoom
            container.addEventListener('wheel', (e) => {
                if (e.ctrlKey || true) { 
                    e.preventDefault();
                    const zoomSensitivity = 0.001;
                    const delta = -e.deltaY * zoomSensitivity;
                    const newScale = Math.min(Math.max(0.1, scale + delta), 5);
                    scale = newScale;
                    updateTransform();
                }
            });

            // Pan
            container.addEventListener('mousedown', (e) => {
                if (e.target === container || e.target.id === 'nodes-container' || e.target.id === 'zoom-wrapper' || e.target.id === 'connections-svg') {
                    isPanning = true;
                    panStart = { x: e.clientX - pan.x, y: e.clientY - pan.y };
                    container.style.cursor = 'grabbing';
                }
            });

            window.addEventListener('mousemove', (e) => {
                if (isPanning) {
                    pan.x = e.clientX - panStart.x;
                    pan.y = e.clientY - panStart.y;
                    updateTransform();
                }
            });

            window.addEventListener('mouseup', () => {
                if (isPanning) {
                    isPanning = false;
                    container.style.cursor = 'grab';
                }
            });
        }
    `}function uj(){return`
        function renderConnections() {
            const svg = document.getElementById('connections-svg');
            // Clear existing paths but keep defs
            svg.querySelectorAll('path').forEach(p => p.remove());

            for (const conn of project.connections) {
                const fromNode = project.nodes.find(n => n.id === conn.from);
                const toNode = project.nodes.find(n => n.id === conn.to);
                
                if (fromNode && toNode) {
                    const path = createConnectionPath(fromNode, toNode, conn);
                    svg.appendChild(path);
                }
            }
        }

        function createConnectionPath(from, to, conn) {
            const group = document.createElementNS('http://www.w3.org/2000/svg', 'g');
            
            // Determine marker based on connection type
            const markerType = conn.connectionType === 'failure' ? 'arrowhead-failure' : 'arrowhead';
            const lineClass = conn.connectionType === 'failure' ? 'connection-line connection-failure' : 'connection-line';
            
            // Node dimensions
            const nodeWidth = 160;
            const nodeHeight = 70;
            
            // Calculate center points
            const fromCenterX = from.position.x + nodeWidth / 2;
            const fromCenterY = from.position.y + nodeHeight / 2;
            const toCenterX = to.position.x + nodeWidth / 2;
            const toCenterY = to.position.y + nodeHeight / 2;
            
            // Calculate relative position
            const dx = toCenterX - fromCenterX;
            const dy = toCenterY - fromCenterY;
            
            // Determine connection points based on relative position
            let x1, y1, x2, y2;
            
            // Choose source point (from node)
            if (Math.abs(dy) > Math.abs(dx)) {
                // Vertical connection dominates
                if (dy > 0) {
                    // Target is below - start from bottom
                    x1 = fromCenterX;
                    y1 = from.position.y + nodeHeight;
                } else {
                    // Target is above - start from top
                    x1 = fromCenterX;
                    y1 = from.position.y;
                }
            } else {
                // Horizontal connection dominates
                if (dx > 0) {
                    // Target is to the right - start from right
                    x1 = from.position.x + nodeWidth;
                    y1 = fromCenterY;
                } else {
                    // Target is to the left - start from left
                    x1 = from.position.x;
                    y1 = fromCenterY;
                }
            }
            
            // Choose target point (to node)
            if (Math.abs(dy) > Math.abs(dx)) {
                // Vertical connection
                if (dy > 0) {
                    // Coming from above - end at top
                    x2 = toCenterX;
                    y2 = to.position.y;
                } else {
                    // Coming from below - end at bottom
                    x2 = toCenterX;
                    y2 = to.position.y + nodeHeight;
                }
            } else {
                // Horizontal connection
                if (dx > 0) {
                    // Coming from left - end at left
                    x2 = to.position.x;
                    y2 = toCenterY;
                } else {
                    // Coming from right - end at right
                    x2 = to.position.x + nodeWidth;
                    y2 = toCenterY;
                }
            }

            // Create bezier curve with appropriate control points
            let d;
            if (Math.abs(dy) > Math.abs(dx)) {
                // Vertical curve
                const midY = (y1 + y2) / 2;
                d = 'M ' + x1 + ' ' + y1 + ' C ' + x1 + ' ' + midY + ', ' + x2 + ' ' + midY + ', ' + x2 + ' ' + y2;
            } else {
                // Horizontal curve
                const midX = (x1 + x2) / 2;
                d = 'M ' + x1 + ' ' + y1 + ' C ' + midX + ' ' + y1 + ', ' + midX + ' ' + y2 + ', ' + x2 + ' ' + y2;
            }
            
            // 1. Hit path (invisible, wider)
            const hitPath = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            hitPath.setAttribute('d', d);
            hitPath.setAttribute('class', 'connection-hit');
            hitPath.dataset.connectionId = conn.id;
            
            // Right-click to toggle connection type
            hitPath.addEventListener('contextmenu', (e) => {
                e.preventDefault();
                e.stopPropagation();
                const currentType = conn.connectionType || 'success';
                const newType = currentType === 'success' ? 'failure' : 'success';
                vscode.postMessage({ 
                    type: 'toggleConnectionType', 
                    payload: { connectionId: conn.id, newType: newType }
                });
            });
            
            // Click to delete
            hitPath.addEventListener('click', (e) => {
                e.stopPropagation();
                vscode.postMessage({ type: 'confirmRemoveConnection', payload: conn.id });
            });

            // 2. Visible path
            const visiblePath = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            visiblePath.setAttribute('d', d);
            visiblePath.setAttribute('marker-end', 'url(#' + markerType + ')');
            visiblePath.setAttribute('class', lineClass);

            group.appendChild(hitPath);
            group.appendChild(visiblePath);
            
            return group;
        }

        function createTempLine(e) {
            const svg = document.getElementById('connections-svg');
            tempLine = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            tempLine.classList.add('temp-connection');
            svg.appendChild(tempLine);
            updateTempLine(e);
        }

        function updateTempLine(e) {
            if (!tempLine || !connectionStart) return;
            
            const fromNode = project.nodes.find(n => n.id === connectionStart);
            if (!fromNode) return;
            
            const canvas = document.getElementById('canvas');
            const rect = canvas.getBoundingClientRect();
            
            const x1 = fromNode.position.x + 160;
            const y1 = fromNode.position.y + 35;
            const x2 = (e.clientX - rect.left - pan.x) / scale;
            const y2 = (e.clientY - rect.top - pan.y) / scale;
            
            const midX = (x1 + x2) / 2;
            tempLine.setAttribute('d', 'M ' + x1 + ' ' + y1 + ' C ' + midX + ' ' + y1 + ', ' + midX + ' ' + y2 + ', ' + x2 + ' ' + y2);
        }

        function endConnection() {
            isConnecting = false;
            connectionStart = null;
            if (tempLine) {
                tempLine.remove();
                tempLine = null;
            }
        }
    `}function dj(){return`
        // Keyboard events for Delete key
        function setupKeyboardEvents() {
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Delete' && selectedNodeId) {
                    vscode.postMessage({ type: 'confirmRemoveNode', payload: selectedNodeId });
                }
            });
        }

        // Handle messages from extension
        window.addEventListener('message', (event) => {
            const message = event.data;
            switch (message.type) {
                case 'projectUpdate':
                    project = message.payload;
                    renderNodes();
                    renderConnections();
                    break;
                case 'nodeStatusUpdate':
                    updateNodeStatus(message.payload.nodeId, message.payload.status);
                    break;
                case 'executionStarted':
                    document.getElementById('btn-run').style.display = 'none';
                    document.getElementById('btn-stop').style.display = 'inline-block';
                    document.getElementById('status').textContent = 'Running...';
                    break;
                case 'executionEnded':
                    document.getElementById('btn-run').style.display = 'inline-block';
                    document.getElementById('btn-stop').style.display = 'none';
                    document.getElementById('status').textContent = message.payload?.status || '';
                    break;
                case 'containerChildUpdated':
                    // Refresh container editor with updated child node
                    if (containerEditorOpen && editingContainerId === message.payload.containerId) {
                        const updatedChild = message.payload.childNode;
                        const idx = containerNodes.findIndex(n => n.id === updatedChild.id);
                        if (idx >= 0) {
                            containerNodes[idx] = updatedChild;
                            renderContainerNodes();
                        }
                    }
                    break;
            }
        });

        function setupToolbarButtons() {
            document.getElementById('btn-new').addEventListener('click', () => {
                vscode.postMessage({ type: 'newProject' });
            });
            
            document.getElementById('btn-open').addEventListener('click', () => {
                vscode.postMessage({ type: 'loadProject' });
            });
            
            document.getElementById('btn-save').addEventListener('click', () => {
                vscode.postMessage({ type: 'saveProject' });
            });
            
            document.getElementById('btn-run').addEventListener('click', () => {
                vscode.postMessage({ type: 'runProject' });
            });
            
            document.getElementById('btn-stop').addEventListener('click', () => {
                vscode.postMessage({ type: 'stopProject' });
            });
        }
    `}function fj(){return`
        function updatePropertiesPanel(node) {
            const content = document.getElementById('properties-content');
            
            if (!node) {
                content.innerHTML = '<p class="placeholder">Select a task to view properties</p>';
                return;
            }
            
            let configHtml = '';
            const config = node.config;
            
            switch (node.type) {
                case 'sql':
                    const queryPreview = config.query 
                        ? (config.query.length > 100 ? config.query.substring(0, 100) + '...' : config.query)
                        : '(not configured)';
                    configHtml = \`
                        <div class="property-group">
                            <span class="property-label">Connection</span>
                            <div class="property-value">\${escapeHtml(config.connection || 'Active connection')}</div>
                        </div>
                        <div class="property-group">
                            <span class="property-label">Query</span>
                            <pre class="property-code">\${escapeHtml(queryPreview)}</pre>
                        </div>
                        <div class="property-group">
                            <span class="property-label">Timeout</span>
                            <div class="property-value">\${config.timeout ? config.timeout + 's' : '(default)'}</div>
                        </div>
                    \`;
                    break;
                case 'python':
                    let scriptInfo = '(not configured)';
                    if (config.scriptPath) {
                        const pathParts = config.scriptPath.split(/[/\\\\\\\\]/);
                        scriptInfo = '\u{1F4C1} ' + pathParts[pathParts.length - 1];
                    } else if (config.script) {
                        const preview = config.script.length > 50 ? config.script.substring(0, 50) + '...' : config.script;
                        scriptInfo = preview;
                    }
                    configHtml = \`
                        <div class="property-group">
                            <span class="property-label">Script Source</span>
                            <div class="property-value">\${config.scriptPath ? 'File' : (config.script ? 'Inline' : 'Not set')}</div>
                        </div>
                        <div class="property-group">
                            <span class="property-label">Script</span>
                            <pre class="property-code">\${escapeHtml(scriptInfo)}</pre>
                        </div>
                        <div class="property-group">
                            <span class="property-label">Interpreter</span>
                            <div class="property-value">\${escapeHtml(config.pythonPath || 'Auto-detect')}</div>
                        </div>
                        <div class="property-group">
                            <span class="property-label">Timeout</span>
                            <div class="property-value">\${config.timeout ? config.timeout + 's' : '(default)'}</div>
                        </div>
                    \`;
                    break;
                case 'export':
                    const outPath = config.outputPath 
                        ? config.outputPath.split(/[/\\\\\\\\]/).pop() 
                        : '(not configured)';
                    const exportQueryPreview = config.query 
                        ? (config.query.length > 50 ? config.query.substring(0, 50) + '...' : config.query)
                        : '(uses previous output)';
                    configHtml = \`
                        <div class="property-group">
                            <span class="property-label">Format</span>
                            <div class="property-value">\${config.format?.toUpperCase() || '(not set)'}</div>
                        </div>
                        <div class="property-group">
                            <span class="property-label">Output File</span>
                            <div class="property-value">\u{1F4C4} \${escapeHtml(outPath)}</div>
                        </div>
                        <div class="property-group">
                            <span class="property-label">Query</span>
                            <pre class="property-code">\${escapeHtml(exportQueryPreview)}</pre>
                        </div>
                        <div class="property-group">
                            <span class="property-label">Timeout</span>
                            <div class="property-value">\${config.timeout ? config.timeout + 's' : '(default)'}</div>
                        </div>
                    \`;
                    break;
                case 'import':
                    const inPath = config.inputPath 
                        ? config.inputPath.split(/[/\\\\\\\\]/).pop() 
                        : '(not configured)';
                    configHtml = \`
                        <div class="property-group">
                            <span class="property-label">Format</span>
                            <div class="property-value">\${config.format?.toUpperCase() || 'Auto-detect'}</div>
                        </div>
                        <div class="property-group">
                            <span class="property-label">Input File</span>
                            <div class="property-value">\u{1F4C4} \${escapeHtml(inPath)}</div>
                        </div>
                        <div class="property-group">
                            <span class="property-label">Target Table</span>
                            <div class="property-value">\${escapeHtml(config.targetTable || '(not set)')}</div>
                        </div>
                        <div class="property-group">
                            <span class="property-label">Create Table</span>
                            <div class="property-value">\${config.createTable !== false ? 'Yes (if needed)' : 'No'}</div>
                        </div>
                        <div class="property-group">
                            <span class="property-label">Timeout</span>
                            <div class="property-value">\${config.timeout ? config.timeout + 's' : '(default)'}</div>
                        </div>
                    \`;
                    break;
                case 'container':
                    const childCount = (config.nodes || []).length;
                    configHtml = \`
                        <div class="property-group">
                            <span class="property-label">Child Tasks</span>
                            <div class="property-value">\${childCount} task(s)</div>
                        </div>
                    \`;
                    break;
                case 'variable':
                    const sourceLabels = {
                        'prompt': '\u{1F4DD} Prompt User',
                        'static': '\u{1F512} Static Value',
                        'sql': '\u{1F5C4}\uFE0F SQL Query'
                    };
                    const sourceLabel = sourceLabels[config.source] || config.source;
                    let varDetails = '';
                    if (config.source === 'prompt') {
                        varDetails = \`
                            <div class="property-group">
                                <span class="property-label">Prompt Message</span>
                                <div class="property-value">\${escapeHtml(config.promptMessage || '(default)')}</div>
                            </div>
                            <div class="property-group">
                                <span class="property-label">Default Value</span>
                                <div class="property-value">\${escapeHtml(config.defaultValue || '(none)')}</div>
                            </div>
                        \`;
                    } else if (config.source === 'static') {
                        varDetails = \`
                            <div class="property-group">
                                <span class="property-label">Value</span>
                                <pre class="property-code">\${escapeHtml(config.value || '(empty)')}</pre>
                            </div>
                        \`;
                    } else if (config.source === 'sql') {
                        const sqlPreview = config.query 
                            ? (config.query.length > 50 ? config.query.substring(0, 50) + '...' : config.query)
                            : '(not configured)';
                        varDetails = \`
                            <div class="property-group">
                                <span class="property-label">Query</span>
                                <pre class="property-code">\${escapeHtml(sqlPreview)}</pre>
                            </div>
                            <div class="property-group">
                                <span class="property-label">Timeout</span>
                                <div class="property-value">\${config.timeout ? config.timeout + 's' : '(default)'}</div>
                            </div>
                        \`;
                    }
                    const varNameDisplay = config.variableName ? ('$' + '{' + escapeHtml(config.variableName) + '}') : '(not set)';
                    configHtml = \`
                        <div class="property-group">
                            <span class="property-label">Variable Name</span>
                            <div class="property-value" style="font-family: monospace;">\${varNameDisplay}</div>
                        </div>
                        <div class="property-group">
                            <span class="property-label">Source</span>
                            <div class="property-value">\${sourceLabel}</div>
                        </div>
                        \${varDetails}
                    \`;
                    break;
            }
            
            content.innerHTML = \`
                <div class="property-group">
                    <span class="property-label">ID</span>
                    <div class="property-value" style="font-family: monospace; font-size: 0.75em;">\${node.id}</div>
                </div>
                <div class="property-group">
                    <span class="property-label">Name</span>
                    <div class="property-value">\${escapeHtml(node.name)}</div>
                </div>
                <div class="property-group">
                    <span class="property-label">Type</span>
                    <div class="property-value">\${node.type.toUpperCase()}</div>
                </div>
                <div class="property-group">
                    <span class="property-label">Position</span>
                    <div class="property-value">(\${node.position.x}, \${node.position.y})</div>
                </div>
                <hr style="border: none; border-top: 1px solid var(--border-color); margin: 12px 0;">
                <h4 style="margin: 8px 0; font-size: 0.85em; color: var(--text-muted);">\u2699\uFE0F Configuration</h4>
                \${configHtml}
                <button class="configure-btn" data-node-id="\${node.id}">
                    \u270F\uFE0F Edit Configuration
                </button>
            \`;
            
            // Attach event listener to configure button (CSP-safe)
            const configBtn = content.querySelector('.configure-btn');
            if (configBtn) {
                configBtn.addEventListener('click', () => {
                    vscode.postMessage({ type: 'configureNode', payload: node.id });
                });
            }
        }
    `}function Ej(){return`
        function renderNodes() {
            const container = document.getElementById('nodes-container');
            container.innerHTML = '';

            for (const node of project.nodes) {
                const el = createNodeElement(node);
                container.appendChild(el);
            }
        }

        function createNodeElement(node, isContainerChild = false) {
            const el = document.createElement('div');
            const isSelected = isContainerChild 
                ? containerSelectedNodeId === node.id 
                : selectedNodeId === node.id;
            el.className = 'etl-node ' + node.type + (isSelected ? ' selected' : '');
            el.id = (isContainerChild ? 'container-node-' : 'node-') + node.id;
            el.style.left = node.position.x + 'px';
            el.style.top = node.position.y + 'px';

            // Show child count badge for containers
            const childCountBadge = node.type === 'container' && node.config?.nodes?.length > 0
                ? \`<span class="node-child-count">\${node.config.nodes.length}</span>\`
                : '';

            el.innerHTML = \`
                <div class="node-actions">
                    <button class="node-delete-btn" data-node="\${node.id}" title="Delete task">\xD7</button>
                </div>
                <div class="node-type-indicator"></div>
                <div class="node-content">
                    <div class="node-header">
                        <span class="node-icon">\${nodeIcons[node.type] || '\u{1F4CB}'}</span>
                        <span class="node-name">\${escapeHtml(node.name)}\${childCountBadge}</span>
                    </div>
                    <div class="node-type">\${node.type}</div>
                </div>
                <div class="node-connectors">
                    <div class="connector input" data-node="\${node.id}" data-type="input"></div>
                    <div class="connector output" data-node="\${node.id}" data-type="output"></div>
                </div>
            \`;

            setupNodeEvents(el, node);
            return el;
        }

        function setupNodeEvents(el, node) {
            // Delete button click
            const deleteBtn = el.querySelector('.node-delete-btn');
            if (deleteBtn) {
                deleteBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    vscode.postMessage({ type: 'confirmRemoveNode', payload: node.id });
                });
            }

            // Drag
            el.addEventListener('mousedown', (e) => {
                if (e.target.classList.contains('connector')) return;
                if (e.target.classList.contains('node-delete-btn')) return;
                
                selectedNodeId = node.id;
                isDragging = true;
                
                const rect = el.getBoundingClientRect();
                dragOffset.x = (e.clientX - rect.left) / scale;
                dragOffset.y = (e.clientY - rect.top) / scale;
                
                // Update selection
                document.querySelectorAll('.etl-node').forEach(n => n.classList.remove('selected'));
                el.classList.add('selected');
                
                updatePropertiesPanel(node);
            });

            // Double-click to configure (or open container editor)
            el.addEventListener('dblclick', () => {
                if (node.type === 'container') {
                    openContainerEditor(node.id);
                } else {
                    vscode.postMessage({ type: 'configureNode', payload: node.id });
                }
            });

            // Connector events
            el.querySelectorAll('.connector').forEach(conn => {
                conn.addEventListener('mousedown', (e) => {
                    e.stopPropagation();
                    if (conn.dataset.type === 'output') {
                        isConnecting = true;
                        connectionStart = node.id;
                        createTempLine(e);
                    }
                });

                conn.addEventListener('mouseup', (e) => {
                    if (isConnecting && conn.dataset.type === 'input' && connectionStart !== node.id) {
                        vscode.postMessage({
                            type: 'addConnection',
                            payload: { from: connectionStart, to: node.id }
                        });
                    }
                    endConnection();
                });
            });

            // Context menu for delete
            el.addEventListener('contextmenu', (e) => {
                e.preventDefault();
                vscode.postMessage({ type: 'confirmRemoveNode', payload: node.id });
            });
        }

        function setupToolboxDrag() {
            document.querySelectorAll('.toolbox-item').forEach(item => {
                item.addEventListener('dragstart', (e) => {
                    e.dataTransfer.setData('nodeType', item.dataset.type);
                });
            });
        }

        function setupCanvasDrop() {
            const canvas = document.getElementById('canvas');
            
            canvas.addEventListener('dragover', (e) => {
                e.preventDefault();
            });
            
            canvas.addEventListener('drop', (e) => {
                e.preventDefault();
                const nodeType = e.dataTransfer.getData('nodeType');
                if (nodeType) {
                    const rect = canvas.getBoundingClientRect();
                    const x = (e.clientX - rect.left - pan.x) / scale;
                    const y = (e.clientY - rect.top - pan.y) / scale;
                    
                    vscode.postMessage({
                        type: 'addNode',
                        payload: { type: nodeType, position: { x, y } }
                    });
                }
            });

            // Mouse move for dragging and connecting
            document.addEventListener('mousemove', (e) => {
                if (isDragging && selectedNodeId) {
                    const canvas = document.getElementById('canvas');
                    const rect = canvas.getBoundingClientRect();
                    const x = (e.clientX - rect.left - pan.x) / scale - dragOffset.x;
                    const y = (e.clientY - rect.top - pan.y) / scale - dragOffset.y;
                    
                    // Update node position in DOM
                    const nodeEl = document.getElementById('node-' + selectedNodeId);
                    if (nodeEl) {
                        nodeEl.style.left = Math.max(0, x) + 'px';
                        nodeEl.style.top = Math.max(0, y) + 'px';
                    }
                    
                    // Update connections
                    const node = project.nodes.find(n => n.id === selectedNodeId);
                    if (node) {
                        node.position = { x: Math.max(0, x), y: Math.max(0, y) };
                        renderConnections();
                    }
                }
                
                if (isConnecting && tempLine) {
                    updateTempLine(e);
                }
            });

            document.addEventListener('mouseup', (e) => {
                if (isDragging && selectedNodeId) {
                    // Save position
                    const node = project.nodes.find(n => n.id === selectedNodeId);
                    if (node) {
                        vscode.postMessage({
                            type: 'updateNodePosition',
                            payload: { nodeId: selectedNodeId, position: node.position }
                        });
                    }
                }
                
                isDragging = false;
                endConnection();
            });

            // Deselect on canvas click
            canvas.addEventListener('click', (e) => {
                if (e.target === canvas || e.target.classList.contains('nodes-layer')) {
                    selectedNodeId = null;
                    document.querySelectorAll('.etl-node').forEach(n => n.classList.remove('selected'));
                    updatePropertiesPanel(null);
                }
            });
        }
    `}function hj(){return`
        function setupContainerEditor() {
            // Close button
            document.getElementById('container-editor-close').addEventListener('click', closeContainerEditor);
            document.getElementById('container-editor-cancel').addEventListener('click', closeContainerEditor);
            document.getElementById('container-editor-save').addEventListener('click', saveContainerAndClose);

            // Toolbox drag for container editor
            document.querySelectorAll('.toolbox-item[data-container="true"]').forEach(item => {
                item.addEventListener('dragstart', (e) => {
                    e.dataTransfer.setData('containerNodeType', item.dataset.type);
                });
            });

            // Canvas drop for container editor
            const containerCanvas = document.getElementById('container-canvas');
            containerCanvas.addEventListener('dragover', (e) => e.preventDefault());
            containerCanvas.addEventListener('drop', (e) => {
                e.preventDefault();
                const nodeType = e.dataTransfer.getData('containerNodeType');
                if (nodeType && containerEditorOpen) {
                    const rect = containerCanvas.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;
                    addContainerChildNode(nodeType, { x, y });
                }
            });

            // Click to deselect in container canvas
            containerCanvas.addEventListener('click', (e) => {
                if (e.target === containerCanvas || e.target.id === 'container-nodes' || e.target.id === 'container-zoom-wrapper') {
                    containerSelectedNodeId = null;
                    document.querySelectorAll('#container-nodes .etl-node').forEach(n => n.classList.remove('selected'));
                }
            });

            // Mouse move for container dragging
            document.addEventListener('mousemove', (e) => {
                if (containerIsDragging && containerSelectedNodeId) {
                    const canvas = document.getElementById('container-canvas');
                    const rect = canvas.getBoundingClientRect();
                    const x = e.clientX - rect.left - containerDragOffset.x;
                    const y = e.clientY - rect.top - containerDragOffset.y;

                    const nodeEl = document.getElementById('container-node-' + containerSelectedNodeId);
                    if (nodeEl) {
                        nodeEl.style.left = Math.max(0, x) + 'px';
                        nodeEl.style.top = Math.max(0, y) + 'px';
                    }

                    const node = containerNodes.find(n => n.id === containerSelectedNodeId);
                    if (node) {
                        node.position = { x: Math.max(0, x), y: Math.max(0, y) };
                        renderContainerConnections();
                    }
                }

                if (containerIsConnecting && containerTempLine) {
                    updateContainerTempLine(e);
                }
            });

            document.addEventListener('mouseup', () => {
                containerIsDragging = false;
                endContainerConnection();
            });

            // Escape to close
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && containerEditorOpen) {
                    closeContainerEditor();
                }
                if (e.key === 'Delete' && containerEditorOpen && containerSelectedNodeId) {
                    removeContainerChildNode(containerSelectedNodeId);
                }
            });
        }

        function openContainerEditor(containerId) {
            const containerNode = project.nodes.find(n => n.id === containerId);
            if (!containerNode || containerNode.type !== 'container') return;

            editingContainerId = containerId;
            containerEditorOpen = true;
            containerNodes = JSON.parse(JSON.stringify(containerNode.config.nodes || []));
            containerConnections = JSON.parse(JSON.stringify(containerNode.config.connections || []));
            containerSelectedNodeId = null;

            document.getElementById('container-editor-title').textContent = '\u{1F4E6} Edit: ' + containerNode.name;
            document.getElementById('container-editor-overlay').style.display = 'flex';

            renderContainerNodes();
            renderContainerConnections();
        }

        function closeContainerEditor() {
            containerEditorOpen = false;
            editingContainerId = null;
            containerNodes = [];
            containerConnections = [];
            document.getElementById('container-editor-overlay').style.display = 'none';
        }

        function saveContainerAndClose() {
            if (!editingContainerId) return;

            vscode.postMessage({
                type: 'updateContainerNodes',
                payload: {
                    containerId: editingContainerId,
                    nodes: containerNodes,
                    connections: containerConnections
                }
            });

            closeContainerEditor();
        }

        function renderContainerNodes() {
            const container = document.getElementById('container-nodes');
            container.innerHTML = '';

            for (const node of containerNodes) {
                const el = createContainerNodeElement(node);
                container.appendChild(el);
            }
        }

        function createContainerNodeElement(node) {
            const el = document.createElement('div');
            el.className = 'etl-node ' + node.type + (containerSelectedNodeId === node.id ? ' selected' : '');
            el.id = 'container-node-' + node.id;
            el.style.left = node.position.x + 'px';
            el.style.top = node.position.y + 'px';

            el.innerHTML = \`
                <div class="node-actions">
                    <button class="node-delete-btn" data-node="\${node.id}" title="Delete">\xD7</button>
                </div>
                <div class="node-type-indicator"></div>
                <div class="node-content">
                    <div class="node-header">
                        <span class="node-icon">\${nodeIcons[node.type] || '\u{1F4CB}'}</span>
                        <span class="node-name">\${escapeHtml(node.name)}</span>
                    </div>
                    <div class="node-type">\${node.type}</div>
                </div>
                <div class="node-connectors">
                    <div class="connector input" data-node="\${node.id}" data-type="input"></div>
                    <div class="connector output" data-node="\${node.id}" data-type="output"></div>
                </div>
            \`;

            setupContainerNodeEvents(el, node);
            return el;
        }

        function setupContainerNodeEvents(el, node) {
            // Delete button
            const deleteBtn = el.querySelector('.node-delete-btn');
            if (deleteBtn) {
                deleteBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    removeContainerChildNode(node.id);
                });
            }

            // Drag
            el.addEventListener('mousedown', (e) => {
                if (e.target.classList.contains('connector')) return;
                if (e.target.classList.contains('node-delete-btn')) return;

                containerSelectedNodeId = node.id;
                containerIsDragging = true;

                const rect = el.getBoundingClientRect();
                containerDragOffset.x = e.clientX - rect.left;
                containerDragOffset.y = e.clientY - rect.top;

                document.querySelectorAll('#container-nodes .etl-node').forEach(n => n.classList.remove('selected'));
                el.classList.add('selected');
            });

            // Double-click to configure (first save, then configure)
            el.addEventListener('dblclick', () => {
                // First save current state to backend
                vscode.postMessage({
                    type: 'updateContainerNodes',
                    payload: {
                        containerId: editingContainerId,
                        nodes: containerNodes,
                        connections: containerConnections
                    }
                });
                // Then request configuration
                vscode.postMessage({ 
                    type: 'configureContainerChildNode', 
                    payload: { containerId: editingContainerId, nodeId: node.id } 
                });
            });

            // Connector events
            el.querySelectorAll('.connector').forEach(conn => {
                conn.addEventListener('mousedown', (e) => {
                    e.stopPropagation();
                    if (conn.dataset.type === 'output') {
                        containerIsConnecting = true;
                        containerConnectionStart = node.id;
                        createContainerTempLine(e);
                    }
                });

                conn.addEventListener('mouseup', () => {
                    if (containerIsConnecting && conn.dataset.type === 'input' && containerConnectionStart !== node.id) {
                        addContainerConnection(containerConnectionStart, node.id);
                    }
                    endContainerConnection();
                });
            });

            // Context menu delete
            el.addEventListener('contextmenu', (e) => {
                e.preventDefault();
                removeContainerChildNode(node.id);
            });
        }

        function addContainerChildNode(type, position) {
            const nodeNames = {
                sql: 'SQL Task',
                python: 'Python Script',
                export: 'Export Data',
                import: 'Import Data',
                variable: 'Variable'
            };

            const defaultConfigs = {
                sql: { type: 'sql', query: '', connection: 'default' },
                python: { type: 'python', script: '' },
                export: { type: 'export', format: 'csv', outputPath: '' },
                import: { type: 'import', format: 'csv', inputPath: '', targetTable: '' },
                variable: { type: 'variable', variableName: '', source: 'prompt', promptMessage: 'Enter value' }
            };

            const newNode = {
                id: 'child-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9),
                type: type,
                name: nodeNames[type] || 'New Task',
                position: position,
                config: defaultConfigs[type] || {}
            };

            containerNodes.push(newNode);
            renderContainerNodes();
            renderContainerConnections();
        }

        function removeContainerChildNode(nodeId) {
            containerNodes = containerNodes.filter(n => n.id !== nodeId);
            containerConnections = containerConnections.filter(c => c.from !== nodeId && c.to !== nodeId);
            if (containerSelectedNodeId === nodeId) containerSelectedNodeId = null;
            renderContainerNodes();
            renderContainerConnections();
        }

        function addContainerConnection(from, to) {
            // Check if connection already exists
            if (containerConnections.some(c => c.from === from && c.to === to)) return;

            containerConnections.push({
                id: 'conn-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9),
                from: from,
                to: to
            });
            renderContainerConnections();
        }

        function renderContainerConnections() {
            const svg = document.getElementById('container-connections-svg');
            svg.querySelectorAll('path').forEach(p => p.remove());

            for (const conn of containerConnections) {
                const fromNode = containerNodes.find(n => n.id === conn.from);
                const toNode = containerNodes.find(n => n.id === conn.to);

                if (fromNode && toNode) {
                    const path = createContainerConnectionPath(fromNode, toNode, conn);
                    svg.appendChild(path);
                }
            }
        }

        function createContainerConnectionPath(from, to, conn) {
            const group = document.createElementNS('http://www.w3.org/2000/svg', 'g');

            // Determine marker based on connection type
            const markerType = conn.connectionType === 'failure' ? 'container-arrowhead-failure' : 'container-arrowhead';
            const lineClass = conn.connectionType === 'failure' ? 'connection-line connection-failure' : 'connection-line';

            // Source: always right side (output connector)
            const x1 = from.position.x + 160;
            const y1 = from.position.y + 35;
            
            // Determine target connection point based on relative positions
            let x2, y2;
            const nodeWidth = 160;
            const nodeHeight = 70;
            
            const dx = to.position.x - from.position.x;
            const dy = to.position.y - from.position.y;
            
            if (dx > 50) {
                x2 = to.position.x;
                y2 = to.position.y + 35;
            } else if (dx < -50 && Math.abs(dy) < 80) {
                x2 = to.position.x + nodeWidth;
                y2 = to.position.y + 35;
            } else if (dy > 30) {
                x2 = to.position.x + nodeWidth / 2;
                y2 = to.position.y;
            } else if (dy < -30) {
                x2 = to.position.x + nodeWidth / 2;
                y2 = to.position.y + nodeHeight;
            } else {
                x2 = to.position.x;
                y2 = to.position.y + 35;
            }

            // Create bezier curve with appropriate control points
            let d;
            if (dx > 50) {
                const midX = (x1 + x2) / 2;
                d = 'M ' + x1 + ' ' + y1 + ' C ' + midX + ' ' + y1 + ', ' + midX + ' ' + y2 + ', ' + x2 + ' ' + y2;
            } else if (dx < -50 && Math.abs(dy) < 80) {
                d = 'M ' + x1 + ' ' + y1 + ' C ' + (x1 + 60) + ' ' + y1 + ', ' + (x2 + 60) + ' ' + y2 + ', ' + x2 + ' ' + y2;
            } else if (dy > 30) {
                d = 'M ' + x1 + ' ' + y1 + ' C ' + (x1 + 40) + ' ' + y1 + ', ' + x2 + ' ' + (y2 - 40) + ', ' + x2 + ' ' + y2;
            } else if (dy < -30) {
                d = 'M ' + x1 + ' ' + y1 + ' C ' + (x1 + 40) + ' ' + y1 + ', ' + x2 + ' ' + (y2 + 40) + ', ' + x2 + ' ' + y2;
            } else {
                const midX = (x1 + x2) / 2;
                d = 'M ' + x1 + ' ' + y1 + ' C ' + midX + ' ' + y1 + ', ' + midX + ' ' + y2 + ', ' + x2 + ' ' + y2;
            }

            const hitPath = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            hitPath.setAttribute('d', d);
            hitPath.setAttribute('class', 'connection-hit');
            
            // Right-click to toggle connection type
            hitPath.addEventListener('contextmenu', (e) => {
                e.preventDefault();
                e.stopPropagation();
                const currentType = conn.connectionType || 'success';
                const newType = currentType === 'success' ? 'failure' : 'success';
                // Update locally
                conn.connectionType = newType;
                renderContainerConnections();
            });
            
            // Click to delete
            hitPath.addEventListener('click', (e) => {
                e.stopPropagation();
                containerConnections = containerConnections.filter(c => c.id !== conn.id);
                renderContainerConnections();
            });

            const visiblePath = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            visiblePath.setAttribute('d', d);
            visiblePath.setAttribute('marker-end', 'url(#' + markerType + ')');
            visiblePath.setAttribute('class', lineClass);

            group.appendChild(hitPath);
            group.appendChild(visiblePath);

            return group;
        }

        function createContainerTempLine(e) {
            const svg = document.getElementById('container-connections-svg');
            containerTempLine = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            containerTempLine.classList.add('temp-connection');
            svg.appendChild(containerTempLine);
            updateContainerTempLine(e);
        }

        function updateContainerTempLine(e) {
            if (!containerTempLine || !containerConnectionStart) return;

            const fromNode = containerNodes.find(n => n.id === containerConnectionStart);
            if (!fromNode) return;

            const canvas = document.getElementById('container-canvas');
            const rect = canvas.getBoundingClientRect();

            const x1 = fromNode.position.x + 160;
            const y1 = fromNode.position.y + 35;
            const x2 = e.clientX - rect.left;
            const y2 = e.clientY - rect.top;

            const midX = (x1 + x2) / 2;
            containerTempLine.setAttribute('d', 'M ' + x1 + ' ' + y1 + ' C ' + midX + ' ' + y1 + ', ' + midX + ' ' + y2 + ', ' + x2 + ' ' + y2);
        }

        function endContainerConnection() {
            containerIsConnecting = false;
            containerConnectionStart = null;
            if (containerTempLine) {
                containerTempLine.remove();
                containerTempLine = null;
            }
        }
    `}function pj(t){return`
        (function() {
            'use strict';
            
            ${aj(t)}
            
            ${lj()}
            
            ${cj()}
            
            ${uj()}
            
            ${Ej()}
            
            ${fj()}
            
            ${dj()}
            
            ${hj()}
            
            // Initialize function
            function init() {
                renderNodes();
                renderConnections();
                setupToolboxDrag();
                setupCanvasDrop();
                setupToolbarButtons();
                setupKeyboardEvents();
                setupZoomPan();
                setupContainerEditor();
                
                // Request current project state
                vscode.postMessage({ type: 'getProject' });
            }
            
            // Start
            init();
        })();
    `}function Tj(t){return pj(t)}function oye(t){return`
        <header class="toolbar">
            <div class="toolbar-left">
                <button id="btn-new" title="New Project">\u{1F4C4} New</button>
                <button id="btn-open" title="Open Project">\u{1F4C2} Open</button>
                <button id="btn-save" title="Save Project">\u{1F4BE} Save</button>
                <span class="separator"></span>
                <button id="btn-run" class="btn-primary" title="Run Project">\u25B6\uFE0F Run</button>
                <button id="btn-stop" class="btn-danger" title="Stop Execution" style="display:none;">\u23F9\uFE0F Stop</button>
            </div>
            <div class="toolbar-center">
                <span class="project-name">${t}</span>
            </div>
            <div class="toolbar-right">
                <span class="status" id="status"></span>
            </div>
        </header>`}function aye(){return`
        <aside class="toolbox">
            <h3>\u{1F4E6} Tasks</h3>
            <div class="toolbox-items">
                <div class="toolbox-item" data-type="variable" draggable="true">
                    <span class="icon">\u{1F524}</span>
                    <span class="label">Variable</span>
                </div>
                <div class="toolbox-item" data-type="sql" draggable="true">
                    <span class="icon">\u{1F4DC}</span>
                    <span class="label">SQL Task</span>
                </div>
                <div class="toolbox-item" data-type="python" draggable="true">
                    <span class="icon">\u{1F40D}</span>
                    <span class="label">Python Script</span>
                </div>
                <div class="toolbox-item" data-type="container" draggable="true">
                    <span class="icon">\u{1F4E6}</span>
                    <span class="label">Container</span>
                </div>
                <div class="toolbox-item" data-type="export" draggable="true">
                    <span class="icon">\u{1F4E4}</span>
                    <span class="label">Export (CSV/XLSB)</span>
                </div>
                <div class="toolbox-item" data-type="import" draggable="true">
                    <span class="icon">\u{1F4E5}</span>
                    <span class="label">Import (CSV/XLSB)</span>
                </div>
            </div>
            
            <h3>\u2139\uFE0F Help</h3>
            <div class="help-text">
                <p>Drag tasks to canvas</p>
                <p>Connect outputs to inputs</p>
                <p>Double-click to configure</p>
                <p>Connected = Sequential</p>
                <p>Unconnected = Parallel</p>
                <p>Use \${name} in SQL</p>
            </div>
        </aside>`}function lye(){return`
        <main class="canvas-container" id="canvas">
            <div id="zoom-wrapper" class="zoom-wrapper">
                <svg class="connections-layer" id="connections-svg">
                    <defs>
                        <marker id="arrowhead" markerWidth="10" markerHeight="7" 
                            refX="10" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="#4caf50" />
                        </marker>
                        <marker id="arrowhead-failure" markerWidth="10" markerHeight="7" 
                            refX="10" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="#f44336" />
                        </marker>
                    </defs>
                </svg>
                <div class="nodes-layer" id="nodes-container"></div>
            </div>
        </main>`}function cye(){return`
        <aside class="properties-panel" id="properties">
            <h3>\u2699\uFE0F Properties</h3>
            <div id="properties-content">
                <p class="placeholder">Select a task to view properties</p>
            </div>
        </aside>`}function uye(){return`
        <div id="container-editor-overlay" class="container-editor-overlay" style="display:none;">
            <div class="container-editor-modal">
                <header class="container-editor-header">
                    <span id="container-editor-title" class="container-editor-title">\u{1F4E6} Edit Container</span>
                    <button id="container-editor-close" class="container-editor-close" title="Close">\u2715</button>
                </header>
                <div class="container-editor-content">
                    <aside class="container-editor-toolbox">
                        <h4>\u{1F4E6} Tasks</h4>
                        <div class="toolbox-item" data-type="variable" data-container="true" draggable="true">
                            <span class="icon">\u{1F524}</span>
                            <span class="label">Variable</span>
                        </div>
                        <div class="toolbox-item" data-type="sql" data-container="true" draggable="true">
                            <span class="icon">\u{1F4DC}</span>
                            <span class="label">SQL Task</span>
                        </div>
                        <div class="toolbox-item" data-type="python" data-container="true" draggable="true">
                            <span class="icon">\u{1F40D}</span>
                            <span class="label">Python</span>
                        </div>
                        <div class="toolbox-item" data-type="export" data-container="true" draggable="true">
                            <span class="icon">\u{1F4E4}</span>
                            <span class="label">Export</span>
                        </div>
                        <div class="toolbox-item" data-type="import" data-container="true" draggable="true">
                            <span class="icon">\u{1F4E5}</span>
                            <span class="label">Import</span>
                        </div>
                    </aside>
                    <div class="container-editor-canvas" id="container-canvas">
                        <div class="zoom-wrapper" id="container-zoom-wrapper">
                            <svg class="connections-layer" id="container-connections-svg">
                                <defs>
                                    <marker id="container-arrowhead" markerWidth="10" markerHeight="7" 
                                        refX="10" refY="3.5" orient="auto">
                                        <polygon points="0 0, 10 3.5, 0 7" fill="#4caf50" />
                                    </marker>
                                    <marker id="container-arrowhead-failure" markerWidth="10" markerHeight="7" 
                                        refX="10" refY="3.5" orient="auto">
                                        <polygon points="0 0, 10 3.5, 0 7" fill="#f44336" />
                                    </marker>
                                </defs>
                            </svg>
                            <div class="nodes-layer" id="container-nodes"></div>
                        </div>
                    </div>
                </div>
                <footer class="container-editor-footer">
                    <button id="container-editor-cancel" class="btn-cancel">Cancel</button>
                    <button id="container-editor-save" class="btn-save">\u{1F4BE} Save</button>
                </footer>
            </div>
        </div>`}function Sj(t){let{project:e,nonce:n}=t;return`<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'none'; style-src 'unsafe-inline'; script-src 'nonce-${n}';">
    <title>ETL Designer - ${e.name}</title>
    <style>${oj()}</style>
</head>
<body>
    <div class="etl-designer">
        ${oye(e.name)}

        <div class="main-content">
            ${aye()}
            ${lye()}
            ${cye()}
        </div>
    </div>

    ${uye()}

    <script nonce="${n}">
        ${Tj(e)}
    </script>
</body>
</html>`}var et=Q(require("vscode")),qS=class{constructor(e,n){this.projectManager=e;this.onUpdate=n}async configureNode(e){let n=this.projectManager.getNode(e);if(n)switch(n.type){case"sql":await this.configureSqlNode(n,e);break;case"python":await this.configurePythonNode(n,e);break;case"export":await this.configureExportNode(n,e);break;case"import":await this.configureImportNode(n,e);break;case"variable":await this.configureVariableNode(n,e);break}}getDefaultNodeName(e){return{sql:"SQL Task",python:"Python Script",container:"Container",export:"Export Data",import:"Import Data",variable:"Variable"}[e]||"New Task"}async configureSqlNode(e,n){let r=e.config,i=await et.window.showInputBox({prompt:"Enter task name",value:e.name,placeHolder:"e.g. Load Customer Data"});if(i===void 0)return;let s=await et.window.showInputBox({prompt:"Enter SQL query",value:r.query,placeHolder:"SELECT * FROM table_name"});if(s!==void 0){let o=await et.window.showInputBox({prompt:"Enter execution timeout in seconds (optional)",value:r.timeout?String(r.timeout):"",placeHolder:"e.g. 60"}),a=o&&!isNaN(parseInt(o))?parseInt(o):void 0;this.projectManager.updateNode(n,{name:i,config:{...r,query:s,timeout:a}}),this.onUpdate()}}async configurePythonNode(e,n){let r=e.config,i=await et.window.showInputBox({prompt:"Enter task name",value:e.name,placeHolder:"e.g. Transform Data"});if(i===void 0)return;let s=await et.window.showQuickPick(["Enter script inline","Select script file"],{placeHolder:"How to provide the Python script?"});if(s==="Enter script inline"){let o=await et.window.showInputBox({prompt:"Enter Python script",value:r.script,placeHolder:'print("Hello ETL")'});if(o!==void 0){let a=await et.window.showInputBox({prompt:"Enter execution timeout in seconds (optional)",value:r.timeout?String(r.timeout):"",placeHolder:"e.g. 60"}),l=a&&!isNaN(parseInt(a))?parseInt(a):void 0;this.projectManager.updateNode(n,{name:i,config:{...r,script:o,scriptPath:void 0,timeout:l}}),this.onUpdate()}}else if(s==="Select script file"){let o=await et.window.showOpenDialog({filters:{Python:["py"]},canSelectMany:!1});if(o&&o[0]){let a=await et.window.showInputBox({prompt:"Enter execution timeout in seconds (optional)",value:r.timeout?String(r.timeout):"",placeHolder:"e.g. 60"}),l=a&&!isNaN(parseInt(a))?parseInt(a):void 0;this.projectManager.updateNode(n,{name:i,config:{...r,scriptPath:o[0].fsPath,script:"",timeout:l}}),this.onUpdate()}}}async configureExportNode(e,n){let r=e.config,i=await et.window.showInputBox({prompt:"Enter task name",value:e.name,placeHolder:"e.g. Export to CSV"});if(i===void 0)return;let s=await et.window.showQuickPick(["csv","xlsb"],{placeHolder:"Select output format"});if(s){let o=await et.window.showSaveDialog({filters:s==="csv"?{CSV:["csv"]}:{"Excel Binary":["xlsb"]}});if(o){let a=await et.window.showInputBox({prompt:"Enter SQL query for export",value:r.query||"",placeHolder:"SELECT * FROM table_name"});if(a!==void 0){let l=await et.window.showInputBox({prompt:"Enter execution timeout in seconds (optional)",value:r.timeout?String(r.timeout):"",placeHolder:"e.g. 300"}),c=l&&!isNaN(parseInt(l))?parseInt(l):void 0;this.projectManager.updateNode(n,{name:i,config:{...r,format:s,outputPath:o.fsPath,query:a,timeout:c}}),this.onUpdate()}}}}async configureImportNode(e,n){let r=e.config,i=await et.window.showInputBox({prompt:"Enter task name",value:e.name,placeHolder:"e.g. Import Products"});if(i===void 0)return;let s=await et.window.showOpenDialog({filters:{"Data Files":["csv","xlsb"],CSV:["csv"],"Excel Binary":["xlsb"]},canSelectMany:!1});if(s&&s[0]){let o=s[0].fsPath,a=o.endsWith(".xlsb")?"xlsb":"csv",l=await et.window.showInputBox({prompt:"Enter target table name",value:r.targetTable,placeHolder:"SCHEMA.TABLE_NAME"});if(l){let c=await et.window.showInputBox({prompt:"Enter execution timeout in seconds (optional)",value:r.timeout?String(r.timeout):"",placeHolder:"e.g. 300"}),u=c&&!isNaN(parseInt(c))?parseInt(c):void 0;this.projectManager.updateNode(n,{name:i,config:{...r,format:a,inputPath:o,targetTable:l,timeout:u}}),this.onUpdate()}}}async configureVariableNode(e,n){let r=e.config,i=await et.window.showInputBox({prompt:"Enter task name",value:e.name,placeHolder:"e.g. Get Date Filter"});if(i===void 0)return;let s=await et.window.showInputBox({prompt:"Enter variable name (without ${})",value:r.variableName,placeHolder:"e.g. date_filter"});if(!s)return;let o=await et.window.showQuickPick([{label:"Prompt User",value:"prompt",description:"Ask user for value at runtime"},{label:"Static Value",value:"static",description:"Use fixed value"},{label:"SQL Query",value:"sql",description:"Get value from database query"}],{placeHolder:"How should the variable value be set?"});if(!o)return;let a={...r,variableName:s,source:o.value};switch(o.value){case"prompt":{let l=await et.window.showInputBox({prompt:"Enter prompt message to show user",value:r.promptMessage||`Enter value for ${s}`,placeHolder:"e.g. Enter date filter (YYYY-MM-DD)"}),c=await et.window.showInputBox({prompt:"Enter default value (optional)",value:r.defaultValue||"",placeHolder:"e.g. 2024-01-01"});a={...a,promptMessage:l,defaultValue:c};break}case"static":{let l=await et.window.showInputBox({prompt:"Enter static value",value:r.value||"",placeHolder:"e.g. 2024-06-15"});if(l===void 0)return;a={...a,value:l};break}case"sql":{let l=await et.window.showInputBox({prompt:"Enter SQL query (must return single value)",value:r.query||"",placeHolder:"SELECT MAX(date) FROM sales_data"});if(!l)return;let c=await et.window.showInputBox({prompt:"Enter timeout in seconds (optional)",value:r.timeout?String(r.timeout):"",placeHolder:"e.g. 30"}),u=c&&!isNaN(parseInt(c))?parseInt(c):void 0;a={...a,query:l,timeout:u};break}}this.projectManager.updateNode(n,{name:i,config:a}),this.onUpdate()}};var Kr=class t{constructor(e,n,r){this._disposables=[];this._panel=e,this._context=n,this._projectManager=xs.getInstance(),this._nodeConfigurator=new qS(this._projectManager,()=>this._sendProjectUpdate()),this._executionEngine=new CE,this._executionEngine.registerExecutor("sql",new bE),this._executionEngine.registerExecutor("python",new yE),this._executionEngine.registerExecutor("export",new IS),this._executionEngine.registerExecutor("import",new WS),this._executionEngine.registerExecutor("container",new kS(this._executionEngine)),this._executionEngine.registerExecutor("variable",new YS);let i=r||this._projectManager.createProject("New ETL Project");this._updateWebview(i),this._panel.onDidDispose(()=>this.dispose(),null,this._disposables),this._panel.webview.onDidReceiveMessage(s=>this._handleMessage(s),null,this._disposables)}static{this.viewType="netezza.etlDesigner"}static setConnectionManager(e){t._connectionManager=e}static createOrShow(e,n){let r=Ge.window.activeTextEditor?Ge.window.activeTextEditor.viewColumn:void 0;if(t.currentPanel){t.currentPanel._panel.reveal(r),n&&t.currentPanel._updateProject(n);return}let i=Ge.window.createWebviewPanel(t.viewType,"ETL Designer",r||Ge.ViewColumn.One,{enableScripts:!0,retainContextWhenHidden:!0,localResourceRoots:[e.extensionUri]});t.currentPanel=new t(i,e,n)}async _handleMessage(e){let n=this._projectManager.getCurrentProject();switch(e.type){case"addNode":{let r=e.payload,i={id:IE(),type:r.type,name:this._nodeConfigurator.getDefaultNodeName(r.type),position:r.position,config:Y0(r.type)};this._projectManager.addNode(i),this._sendProjectUpdate();break}case"confirmRemoveNode":{let r=e.payload;await Ge.window.showWarningMessage("Delete this task?",{modal:!0},"Delete")==="Delete"&&(this._projectManager.removeNode(r),this._sendProjectUpdate());break}case"removeNode":{let r=e.payload;this._projectManager.removeNode(r),this._sendProjectUpdate();break}case"updateNodePosition":{let{nodeId:r,position:i}=e.payload;this._projectManager.updateNode(r,{position:i});break}case"updateNodeName":{let{nodeId:r,name:i}=e.payload;this._projectManager.updateNode(r,{name:i}),this._sendProjectUpdate();break}case"addConnection":{let{from:r,to:i}=e.payload;try{this._projectManager.addConnection({id:_E(),from:r,to:i}),this._sendProjectUpdate()}catch(s){Ge.window.showErrorMessage(String(s))}break}case"confirmRemoveConnection":{let r=e.payload;await Ge.window.showWarningMessage("Delete this connection?",{modal:!0},"Delete")==="Delete"&&(this._projectManager.removeConnection(r),this._sendProjectUpdate());break}case"removeConnection":{let r=e.payload;this._projectManager.removeConnection(r),this._sendProjectUpdate();break}case"toggleConnectionType":{let{connectionId:r,newType:i}=e.payload,s=n?.connections.find(o=>o.id===r);s&&(s.connectionType=i,this._sendProjectUpdate());break}case"configureNode":{let r=e.payload;await this._nodeConfigurator.configureNode(r);break}case"updateContainerNodes":{let{containerId:r,nodes:i,connections:s}=e.payload,o=this._projectManager.getNode(r);o&&o.type==="container"&&(this._projectManager.updateNode(r,{config:{type:"container",nodes:i,connections:s}}),this._sendProjectUpdate());break}case"configureContainerChildNode":{let{containerId:r,nodeId:i}=e.payload,s=this._projectManager.getNode(r);if(s&&s.type==="container"){let a=s.config.nodes.find(l=>l.id===i);a&&await this._configureContainerChildNode(r,a)}break}case"saveProject":{await this._saveProject();break}case"loadProject":{await this._loadProject();break}case"newProject":{let r=await Ge.window.showInputBox({prompt:"Enter project name",value:"New ETL Project"});r&&(this._projectManager.createProject(r),this._sendProjectUpdate());break}case"runProject":{n&&await this._runProject(n);break}case"stopProject":{this._stopExecution();break}case"getProject":{this._sendProjectUpdate();break}}}async _saveProject(){if(!this._projectManager.getCurrentProject())return;let n=await Ge.window.showSaveDialog({filters:{"ETL Project":["etl.json"]},defaultUri:this._projectManager.getProjectPath()?Ge.Uri.file(this._projectManager.getProjectPath()):void 0});if(n)try{await this._projectManager.saveProject(n.fsPath),Ge.window.showInformationMessage(`Project saved to ${n.fsPath}`)}catch(r){Ge.window.showErrorMessage(`Failed to save project: ${r}`)}}async _loadProject(){let e=await Ge.window.showOpenDialog({filters:{"ETL Project":["etl.json"]},canSelectMany:!1});if(e&&e[0])try{let n=await this._projectManager.loadProject(e[0].fsPath);this._updateWebview(n),Ge.window.showInformationMessage(`Project loaded: ${n.name}`)}catch(n){Ge.window.showErrorMessage(`Failed to load project: ${n}`)}}async _runProject(e){let n=this._projectManager.validateProject(e);if(n.length>0){Ge.window.showErrorMessage(`Project validation failed:
${n.join(`
`)}`);return}let r=t._connectionManager;if(!r){Ge.window.showErrorMessage("Connection manager not initialized. Please reload the extension.");return}let i=r.getActiveConnectionName();if(!i){Ge.window.showErrorMessage("No active connection. Please connect to a database first.");return}let s=await r.getConnection(i);if(!s){Ge.window.showErrorMessage(`Connection not found: ${i}`);return}let o=Ge.window.createOutputChannel("ETL Execution");o.show(),this._cancellationTokenSource=new Ge.CancellationTokenSource;let a=new VS(e.variables||{}),l={extensionContext:this._context,variables:e.variables||{},nodeOutputs:new Map,connectionDetails:s,cancellationToken:this._cancellationTokenSource.token,onProgress:c=>{o.appendLine(`[${new Date().toLocaleTimeString()}] ${c}`)},variableManager:a};this._executionEngine.onStatusChange((c,u,d)=>{this._panel.webview.postMessage({type:"nodeStatusUpdate",payload:{nodeId:c,status:u,message:d}})}),this._panel.webview.postMessage({type:"executionStarted"});try{o.appendLine(`Starting ETL Project: ${e.name}`),o.appendLine(`Connection: ${i}`),o.appendLine("---");let c=await this._executionEngine.execute(e,l);o.appendLine("---"),o.appendLine(`Execution ${c.status}`),o.appendLine(`Duration: ${c.endTime?((c.endTime.getTime()-c.startTime.getTime())/1e3).toFixed(2):"N/A"} seconds`),this._panel.webview.postMessage({type:"executionEnded",payload:{status:c.status==="completed"?"Completed \u2713":"Failed \u2717"}}),c.status==="completed"?Ge.window.showInformationMessage("ETL project completed successfully!"):c.status==="failed"&&Ge.window.showErrorMessage("ETL project failed. Check output for details.")}catch(c){o.appendLine(`Error: ${c}`),Ge.window.showErrorMessage(`ETL execution error: ${c}`),this._panel.webview.postMessage({type:"executionEnded",payload:{status:"Error \u2717"}})}finally{this._cancellationTokenSource?.dispose(),this._cancellationTokenSource=void 0}}_stopExecution(){this._cancellationTokenSource&&(this._cancellationTokenSource.cancel(),Ge.window.showInformationMessage("ETL execution cancellation requested..."))}_updateProject(e){this._projectManager.createProject(e.name);for(let n of e.nodes)this._projectManager.addNode(n);for(let n of e.connections)try{this._projectManager.addConnection(n)}catch{}this._updateWebview(e)}_updateWebview(e){this._panel.webview.html=this._getHtml(e)}_sendProjectUpdate(){let e=this._projectManager.getCurrentProject();e&&this._panel.webview.postMessage({type:"projectUpdate",payload:e})}async _configureContainerChildNode(e,n){let r=n.config,i=!1;switch(n.type){case"sql":{let s=await Ge.window.showInputBox({prompt:"Enter task name",value:n.name});if(s===void 0)return;let o=await Ge.window.showInputBox({prompt:"Enter SQL query",value:r.query||""});o!==void 0&&(n.name=s,r.query=o,i=!0);break}case"python":{let s=await Ge.window.showInputBox({prompt:"Enter task name",value:n.name});if(s===void 0)return;let o=await Ge.window.showInputBox({prompt:"Enter Python script",value:r.script||""});o!==void 0&&(n.name=s,r.script=o,i=!0);break}case"variable":{let s=await Ge.window.showInputBox({prompt:"Enter task name",value:n.name});if(s===void 0)return;let o=await Ge.window.showInputBox({prompt:"Enter variable name",value:r.variableName||""});o&&(n.name=s,r.variableName=o,i=!0);break}default:Ge.window.showInformationMessage(`Configure ${n.type} nodes by double-clicking in the main designer.`);return}if(i){let s=this._projectManager.getNode(e);if(s&&s.type==="container"){let o=s.config,a=o.nodes.findIndex(l=>l.id===n.id);a>=0&&(o.nodes[a]=n,this._projectManager.updateNode(e,{config:o}),this._sendProjectUpdate(),this._panel.webview.postMessage({type:"containerChildUpdated",payload:{containerId:e,childNode:n}}))}}}_getHtml(e){return Sj({project:e,nonce:this._getNonce()})}_getNonce(){let e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let r=0;r<32;r++)e+=n.charAt(Math.floor(Math.random()*n.length));return e}dispose(){for(t.currentPanel=void 0,this._panel.dispose();this._disposables.length;){let e=this._disposables.pop();e&&e.dispose()}}};var B=Q(require("vscode"));RA();Ub();Jr();var ZS=class{constructor(e,n){this.connectionManager=e;this.ddlCache=new Map;this.DDL_CACHE_TTL=3600*1e3;this.MAX_TABLES_FOR_DDL=10;this.NETEZZA_OPTIMIZATION_RULES=`
NETEZZA OPTIMIZATION RULES TO APPLY:

1. Eliminate SELECT *
   Replace SELECT * with explicit column lists. Include only columns actually used in output or subsequent operations. This reduces I/O dramatically in Netezza's columnar architecture.

2. Push Filters into Subqueries
   Move WHERE conditions from outer query into CTEs/subqueries. Filter data as early as possible before joins and aggregations to reduce intermediate result sizes.

3. Align JOINs with Distribution Keys
   Check if join columns match table distribution keys. If not, consider redistributing smaller table or add distribution key to join condition when possible to avoid broadcast operations.

4. Replace Correlated Subqueries
   Convert correlated subqueries to JOINs or window functions. Correlated subqueries execute per row - JOINs and analytics leverage parallel processing across SPUs.

5. Simplify DISTINCT and GROUP BY
   Remove unnecessary DISTINCT operations. Ensure GROUP BY uses distribution keys when possible. Consider if aggregation is truly needed or if EXISTS/window functions could replace it.

6. Optimize Window Functions
   Add PARTITION BY on distribution key in window functions. Use ORDER BY only when necessary. Limit window frame size (ROWS BETWEEN) to minimum required range.

7. Use UNION ALL Instead of UNION
   Replace UNION with UNION ALL when duplicates don't matter. UNION performs implicit DISTINCT which causes expensive data redistribution and sorting.

8. Avoid Functions on Join/WHERE Columns
   Remove functions from join and filter columns: change WHERE YEAR(date_col) = 2024 to WHERE date_col BETWEEN '2024-01-01' AND '2024-12-31'. Functions prevent zone map usage.

9. Split Complex Queries with TEMP Tables
   Break multi-join, multi-aggregation queries into steps using CREATE TEMP TABLE AS SELECT. Distribute temp tables on appropriate keys for subsequent joins to control execution plan.
`;this.NZPLSQL_PROCEDURE_REFERENCE=`
NZPLSQL STORED PROCEDURE REFERENCE (IBM Netezza):

PROCEDURE STRUCTURE (PREFERRED FORMAT):
\`\`\`sql
CREATE [OR REPLACE] PROCEDURE database.schema.procedure_name(parameters)
RETURNS return_type
EXECUTE AS CALLER
LANGUAGE NZPLSQL
AS
BEGIN_PROC
  [DECLARE
    -- Variable declarations
    variable_name data_type [:= default_value];
    variable_name table_name%ROWTYPE;  -- Row type from table
    variable_name table_name.column%TYPE;  -- Column type
  ]
  BEGIN
    -- Statements
    [EXCEPTION WHEN OTHERS THEN
      -- Exception handling
      ROLLBACK;  -- Required for TRANSACTION_ABORTED
      RAISE NOTICE 'Error: %', SQLERRM;
    ]
  END;
END_PROC;
\`\`\`

KEY SYNTAX RULES:
- ALWAYS use EXECUTE AS CALLER (preferred) - runs with caller's permissions
- Use BEGIN_PROC / END_PROC to wrap the procedure body (NOT just BEGIN/END)
- DECLARE section comes BEFORE the inner BEGIN block
- Variables are initialized to NULL by default
- Use := for assignment (not =)
- Statements end with semicolon (;)
- Labels use <<label_name>> syntax

EXECUTE AS OPTIONS:
- EXECUTE AS CALLER (PREFERRED) - procedure runs with the permissions of the calling user
- EXECUTE AS OWNER - procedure runs with the permissions of the procedure owner

VARIABLE DECLARATIONS:
\`\`\`sql
DECLARE
  v_count INTEGER;
  v_name VARCHAR(100) := 'default';
  v_rate NUMERIC(10,2) NOT NULL := 0.0;
  v_const CONSTANT INTEGER := 100;
  v_row my_table%ROWTYPE;  -- Inherits structure from table
  v_id my_table.id%TYPE;   -- Inherits type from column
\`\`\`

CONTROL STRUCTURES:
- IF condition THEN ... [ELSIF condition THEN ...] [ELSE ...] END IF;
- CASE expression WHEN value THEN ... [ELSE ...] END CASE;
- LOOP ... EXIT [WHEN condition]; END LOOP;
- WHILE condition LOOP ... END LOOP;
- FOR i IN 1..10 LOOP ... END LOOP;
- FOR record IN SELECT ... LOOP ... END LOOP;

DYNAMIC SQL (EXECUTE IMMEDIATE):
\`\`\`sql
EXECUTE IMMEDIATE 'INSERT INTO ' || table_name || ' VALUES (1, 2)';
EXECUTE IMMEDIATE 'UPDATE ' || quote_ident(col) || ' SET x = ' || quote_literal(val);
\`\`\`
- Use quote_ident() for identifiers (table/column names)
- Use quote_literal() for string values

RETURNING RESULT SETS:
\`\`\`sql
CREATE PROCEDURE my_proc() RETURNS REFTABLE(reference_table)
LANGUAGE NZPLSQL AS
BEGIN_PROC
BEGIN
  EXECUTE IMMEDIATE 'INSERT INTO ' || REFTABLENAME || ' SELECT * FROM source';
  RETURN REFTABLE;
END;
END_PROC;
\`\`\`

EXCEPTION HANDLING:
\`\`\`sql
BEGIN
  -- statements that may fail
EXCEPTION
  WHEN TRANSACTION_ABORTED THEN
    ROLLBACK;
    RAISE ERROR 'Transaction failed: %', SQLERRM;
  WHEN OTHERS THEN
    RAISE NOTICE 'Error caught: %', SQLERRM;
END;
\`\`\`

BUILT-IN VARIABLES:
- FOUND: TRUE if last query returned rows
- ROW_COUNT: Number of rows affected by last statement
- SQLERRM: Error message text in exception handler
- REFTABLENAME: Name of temp table for REFTABLE procedures

IMPORTANT NOTES:
- Netezza does NOT support nested transactions (no SAVEPOINT)
- BEGIN/END in NZPLSQL is for grouping, NOT transaction control
- Use CALL procedure_name() or EXECUTE PROCEDURE procedure_name() to invoke
- Procedures run within the caller's transaction context
`;this.context=n,this.statusBarItem=B.window.createStatusBarItem(B.StatusBarAlignment.Right,100),this.statusBarItem.command="justyBaseLite.copilot.changeModel";let r=this.context.workspaceState.get("copilot.selectedModelId");r&&(this.selectedModelId=r)}async init(){try{let e=await B.lm.selectChatModels({vendor:"copilot"});if(e.length===0)return this.statusBarItem.text="$(copilot) No Models",this.statusBarItem.tooltip="No Copilot models available",this.statusBarItem.show(),!1;if(this.selectedModelId&&(e.find(r=>r.id===this.selectedModelId)||(console.warn(`[CopilotService] Persisted model ${this.selectedModelId} no longer available, clearing...`),this.selectedModelId=void 0,await this.context.workspaceState.update("copilot.selectedModelId",void 0))),!this.selectedModelId){let n=e.find(r=>r.family.toLowerCase().includes("gpt-4o")||r.family.toLowerCase().includes("claude-3-5-sonnet"))||e[0];this.selectedModelId=n.id,await this.context.workspaceState.update("copilot.selectedModelId",this.selectedModelId),console.log(`[CopilotService] Auto-selected model: ${n.name||n.family}`)}return this.updateStatusBar(),!0}catch(e){return console.error("[CopilotService] Failed to initialize:",e),this.statusBarItem.text="$(copilot) Error",this.statusBarItem.tooltip="Click to select AI Model",this.statusBarItem.show(),!1}}async selectModel(){try{let n=(await B.lm.selectChatModels({vendor:"copilot"})).map(i=>{let s=i,o=s.detail??s.tooltip,a=o?.match(/(0x|\d+(?:\.\d+)?x)/i)?.[1];return{label:`$(sparkle) ${i.name||i.family}`,description:a?`${a} cost`:void 0,detail:`${i.vendor} \u2022 ${i.family} \u2022 Max tokens: ${i.maxInputTokens}${o?" \u2022 "+o:""}`,modelId:i.id,model:i}});if(n.length===0){B.window.showWarningMessage("No AI models detected. Ensure GitHub Copilot is installed and you are signed in.");return}let r=await B.window.showQuickPick(n,{placeHolder:"Select AI Model for SQL Generation",matchOnDescription:!0,matchOnDetail:!0});if(r){this.selectedModelId=r.modelId,this.updateStatusBar();try{await this.context.workspaceState.update("copilot.selectedModelId",this.selectedModelId)}catch(i){console.warn("Failed to persist selected model:",i)}B.window.showInformationMessage(`Model switched to: ${r.model.name||r.model.family}`)}}catch(e){B.window.showErrorMessage(`Failed to select model: ${e}`)}}updateStatusBar(){this.selectedModelId&&B.lm.selectChatModels().then(e=>{let n=e.find(s=>s.id===this.selectedModelId),r=n?n.name||n.family:"Copilot",i="";if(n){let s=n,a=(s.detail??s.tooltip)?.match(/(0x|\d+(?:\.\d+)?x)/i)?.[1];a&&(i=` [${a}]`)}this.statusBarItem.text=`$(copilot) ${r}${i}`,this.statusBarItem.tooltip=`Using model: ${r}${i}. Click to change.`,this.statusBarItem.show()})}async changeModel(){await this.selectModel()}async clearPersistedModel(){try{await this.context.workspaceState.update("copilot.selectedModelId",void 0),this.selectedModelId=void 0,this.statusBarItem.text="$(copilot) Select Model",this.statusBarItem.tooltip="Click to select AI Model",B.window.showInformationMessage("Persisted model selection cleared. You will be prompted to select a model on next use.")}catch(e){let n=e instanceof Error?e.message:String(e);B.window.showErrorMessage(`Failed to clear model selection: ${n}`)}}getPrompt(e){let n=B.workspace.getConfiguration("justyBaseLite.prompts"),r={optimize:"Optimize the following IBM Netezza Performance Server (NPS) SQL query for performance and readability. Keep Netezza-specific syntax and features.",fix:"Fix the syntax errors in the following IBM Netezza Performance Server (NPS) SQL query. Preserve Netezza-specific SQL dialect features.",explain:"Explain what this IBM Netezza Performance Server (NPS) SQL query does, including any Netezza-specific features used."};return n.get(e)||r[e]}isProcedureCode(e){return/CREATE\s+(OR\s+REPLACE\s+)?PROCEDURE\s+/i.test(e)}async gatherContext(){let e=B.window.activeTextEditor;if(!e)throw new Error("No active editor");let n=e.document,r=e.selection,i=r.isEmpty?n.getText():n.getText(new B.Range(r.start,r.end));if(!i.trim())throw new Error("No SQL selected or document is empty");let s=Xa(i),o=s.size>0?`Variables: ${Array.from(s).join(", ")}`:"No variables detected",a=this.connectionManager.getDocumentConnection(n.uri.toString())||this.connectionManager.getActiveConnectionName()||void 0,l=a?`Connected to: ${a}`:"No connection selected",c=this.extractTableReferences(i),u=await this.gatherTablesDDL(c,a),d=this.getRecentQueriesSummary();return{selectedSql:i,ddlContext:u,variables:o,recentQueries:d,connectionInfo:l}}extractTableReferences(e){try{let n=e.replace(/--.*$/gm,"").replace(/\/\*[\s\S]*?\*\//g,"").replace(/'([^'\\]|\\.)*'/g,""),r=new Map,i=[/FROM\s+(\w+)\.\.(\w+)/gi,/JOIN\s+(\w+)\.\.(\w+)/gi,/INSERT\s+INTO\s+(\w+)\.\.(\w+)/gi,/UPDATE\s+(\w+)\.\.(\w+)/gi,/DELETE\s+FROM\s+(\w+)\.\.(\w+)/gi];for(let o of i)n=n.replace(o,(a,l,c)=>{let u=`${l}||${c}`.toUpperCase();return r.set(u,{database:l,schema:void 0,name:c}),a.replace(/\w+\.\.\w+/,"__EXTRACTED__")});let s=[/FROM\s+(?:(\w+)\.)?(?:(\w+)\.)?(\w+)/gi,/JOIN\s+(?:(\w+)\.)?(?:(\w+)\.)?(\w+)/gi,/INSERT\s+INTO\s+(?:(\w+)\.)?(?:(\w+)\.)?(\w+)/gi,/UPDATE\s+(?:(\w+)\.)?(?:(\w+)\.)?(\w+)/gi,/DELETE\s+FROM\s+(?:(\w+)\.)?(?:(\w+)\.)?(\w+)/gi];for(let o of s){let a;for(;(a=o.exec(n))!==null;){let l,c,u;if(a[3]?(l=a[1],c=a[2],u=a[3]):a[2]?(c=a[1],u=a[2]):a[1]&&(u=a[1]),u&&u!=="__EXTRACTED__"){let d=`${l||""}|${c||""}|${u}`.toUpperCase();r.set(d,{database:l,schema:c,name:u})}}}return Array.from(r.values())}catch(n){return console.error("[CopilotService] Error extracting table references:",n),[]}}async getCachedDDL(e,n){let r=this.ddlCache.get(e),i=Date.now();if(r&&i-r.timestamp<this.DDL_CACHE_TTL)return console.log(`[CopilotService] Using cached DDL for ${e}`),r.ddl;let s=await n();return this.ddlCache.set(e,{ddl:s,timestamp:i}),s}clearDDLCache(){this.ddlCache.clear(),console.log("[CopilotService] DDL cache cleared")}async findTableSchema(e,n,r){try{let i=`
                SELECT SCHEMA 
                FROM ${n.toUpperCase()}.._V_OBJECT_DATA 
                WHERE UPPER(OBJNAME) = UPPER('${r.replace(/'/g,"''")}') 
                AND DBNAME = '${n.toUpperCase()}'
                AND OBJTYPE IN ('TABLE', 'VIEW', 'EXTERNAL TABLE')
                LIMIT 1
            `,s=await Oe(e,i);return s&&s.length>0?s[0].SCHEMA:void 0}catch(i){console.warn(`[CopilotService] Failed to find schema for ${n}..${r}:`,i);return}}async gatherTablesDDL(e,n){if(e.length===0)return"No table references detected in SQL";if(!n)return`Could not gather DDL - no connection selected.
Found table references: ${e.map(l=>[l.database,l.schema,l.name].filter(Boolean).join(".")).join(", ")}`;let r=await this.connectionManager.getConnection(n);if(!r)return`Connection "${n}" not found`;let i;try{i=await dr(r)}catch(a){return`Failed to create connection: ${a instanceof Error?a.message:String(a)}`}let s=[],o=e.slice(0,this.MAX_TABLES_FOR_DDL);e.length>this.MAX_TABLES_FOR_DDL&&(s.push(`-- NOTE: Showing DDL for ${this.MAX_TABLES_FOR_DDL} out of ${e.length} tables (limit reached)`),s.push("-- To see more tables, reduce the number of table references in your query"),s.push(""));try{for(let a of o)try{let l=a.database;if(l||(l=await this.connectionManager.getCurrentDatabase(n)||void 0),!l){s.push(`-- Table: ${a.name} (cannot determine database)`),s.push("");continue}let c=a.schema;if(c||(c=await this.findTableSchema(i,l,a.name)),!c){s.push(`-- Table: ${l}..${a.name} (table not found in database)`),s.push("");continue}let u=a.name,d=`${l}.${c}.${u}`,E=`${n}|${l}|${c}|${u}`,f=await this.getCachedDDL(E,async()=>await La(i,l,c,u));f&&!f.toLowerCase().includes("not found")?(s.push(`-- Table: ${d}`),s.push(f),s.push("")):(s.push(`-- Table: ${d} (DDL not found)`),s.push(""))}catch(l){let c=`${a.database||""}.${a.schema||""}.${a.name}`.replace(/^\.+/,"");console.warn(`[CopilotService] Could not get DDL for ${c}:`,l),s.push(`-- Table: ${c} (error retrieving DDL: ${l instanceof Error?l.message:String(l)})`),s.push("")}}catch(a){console.error("[CopilotService] Error gathering DDL:",a),s.push(`-- Error gathering DDL: ${a instanceof Error?a.message:String(a)}`)}finally{if(i)try{await i.close()}catch(a){console.warn("[CopilotService] Error closing connection:",a)}}return s.length>0?s.join(`
`):`Could not retrieve DDL for tables: ${e.map(a=>a.name).join(", ")}`}formatDdlForPrompt(e){return e.includes("CREATE TABLE")||e.includes("-- Table:")&&!e.includes("error retrieving")&&!e.includes("not found")?"```sql\n"+e+"\n```":e}getRecentQueriesSummary(){return"Recent queries history not yet available in this context"}async sendToCopilotAgent(e,n){try{let i=`${this.buildSystemPrompt(e)}

User request: ${n}`;await B.commands.executeCommand("workbench.action.chat.open",{query:i}),B.window.showInformationMessage("\u2705 Sent to Copilot Chat with context")}catch(r){let i=r instanceof Error?r.message:String(r);B.window.showErrorMessage(`Failed to send to Copilot: ${i}`)}}buildSystemPrompt(e){let r=B.workspace.getConfiguration("justyBaseLite.copilot").get("preferredLanguage")||"english",i="";if(r==="system"){let s=B.env.language;s&&!s.startsWith("en")&&(i=`

RESPONSE LANGUAGE: Please respond in ${s} language.`)}return`You are an expert in IBM Netezza Performance Server (NPS) / IBM PureData System for Analytics SQL.${i}

IMPORTANT NETEZZA SQL CONVENTIONS:
- Table references: Use DATABASE..TABLE (two dots) or DATABASE.SCHEMA.TABLE (three parts)
- DATABASE..TABLE syntax is valid and CORRECT in Netezza (do NOT change it to DATABASE.SCHEMA.TABLE)
- Three-part names: DATABASE.SCHEMA.TABLE are also valid
- Netezza supports specific SQL extensions and performance features
- Preserve Netezza-specific syntax like DISTRIBUTE ON, ORGANIZE ON, etc.

DATABASE CONNECTION:
${e.connectionInfo}

REFERENCED TABLE SCHEMAS:
${this.formatDdlForPrompt(e.ddlContext)}

QUERY VARIABLES:
${e.variables}

RECENT CONTEXT:
${e.recentQueries}

CURRENT SQL:
\`\`\`sql
${e.selectedSql}
\`\`\``}async sendToLanguageModel(e,n,r=!0,i){let s=B.window.activeTextEditor;if(!s)throw new Error("No active editor");let a=`${this.buildSystemPrompt(e)}

User request:
${n}

IMPORTANT: Respond ONLY with the modified SQL code without any explanations or markdown formatting.`;if(!this.selectedModelId&&(await this.selectModel(),!this.selectedModelId))throw new Error("No AI model selected.");let l=await B.lm.selectChatModels({vendor:"copilot"});if(l.length===0)throw new Error("No Copilot models available. Ensure GitHub Copilot extension is installed and you are signed in.");let c=l.find(p=>p.id===this.selectedModelId);if(c||(console.warn(`[CopilotService] Model ${this.selectedModelId} not found, selecting first available model...`),c=l[0],this.selectedModelId=c.id,await this.context.workspaceState.update("copilot.selectedModelId",this.selectedModelId),this.updateStatusBar(),B.window.showWarningMessage(`Previously selected model is unavailable. Switched to: ${c.name||c.family}`)),console.log(`[CopilotService] Using model: ${c.id} (${c.name||c.family})`),!c)throw new Error("No valid Copilot model available.");let u=[B.LanguageModelChatMessage.User(a)],d=i??new B.CancellationTokenSource().token,E="";try{console.log(`[CopilotService] Sending request to ${c.id}`);let p=await c.sendRequest(u,{},d);for await(let h of p.text)E+=h}catch(p){throw new Error(`Model request failed: ${p instanceof Error?p.message:String(p)}`)}if(!E.trim())throw new Error("Model returned empty response.");let f=E.trim().replace(/^```sql\n?/i,"").replace(/^```\n?/i,"").replace(/\n?```$/i,"").trim();return r&&await this.showDiff(s.document,f),f}async askCopilotWithEdit(e,n){try{let i=`${this.buildSystemPrompt(e)}

${n}

Please use /edit to apply changes directly to the file.`;await B.commands.executeCommand("workbench.action.chat.open",{query:i}),B.window.showInformationMessage("\u2705 Sent to Copilot Chat. Type /edit in the chat to apply suggestions directly.")}catch(r){let i=r instanceof Error?r.message:String(r);B.window.showErrorMessage(`Failed to open Copilot Chat: ${i}`)}}async fixSql(){try{let e=await this.gatherContext(),n=this.getPrompt("fix");this.isProcedureCode(e.selectedSql)&&(n+=`

${this.NZPLSQL_PROCEDURE_REFERENCE}`),await this.sendToLanguageModel(e,n,!0)}catch(e){let n=e instanceof Error?e.message:String(e);B.window.showErrorMessage(`Error fixing SQL: ${n}`)}}async fixSqlInteractive(){try{let e=await this.gatherContext(),n=this.getPrompt("fix");this.isProcedureCode(e.selectedSql)&&(n+=`

${this.NZPLSQL_PROCEDURE_REFERENCE}`),await this.sendToChatInteractive(e,n,"Fix SQL with Context")}catch(e){let n=e instanceof Error?e.message:String(e);B.window.showErrorMessage(`Error fixing SQL: ${n}`)}}async optimizeSql(){try{let e=await this.gatherContext(),r=`${this.getPrompt("optimize")}

${this.NETEZZA_OPTIMIZATION_RULES}`;this.isProcedureCode(e.selectedSql)&&(r+=`

${this.NZPLSQL_PROCEDURE_REFERENCE}`),await this.sendToLanguageModel(e,r,!0)}catch(e){let n=e instanceof Error?e.message:String(e);B.window.showErrorMessage(`Error optimizing SQL: ${n}`)}}async optimizeSqlInteractive(){try{let e=await this.gatherContext(),r=`${this.getPrompt("optimize")}

${this.NETEZZA_OPTIMIZATION_RULES}`;this.isProcedureCode(e.selectedSql)&&(r+=`

${this.NZPLSQL_PROCEDURE_REFERENCE}`),await this.sendToChatInteractive(e,r,"Optimize SQL")}catch(e){let n=e instanceof Error?e.message:String(e);B.window.showErrorMessage(`Error optimizing SQL: ${n}`)}}async explainSql(){try{let e=await this.gatherContext(),n=this.getPrompt("explain"),r=await this.sendToLanguageModel(e,n,!1),i=await B.workspace.openTextDocument({content:`# SQL Query Explanation

${r}`,language:"markdown"});await B.window.showTextDocument(i,B.ViewColumn.Beside),B.window.showInformationMessage("\u2705 SQL explanation opened in new editor")}catch(e){let n=e instanceof Error?e.message:String(e);B.window.showErrorMessage(`Error explaining SQL: ${n}`)}}async explainSqlInteractive(){try{let e=await this.gatherContext(),n=this.getPrompt("explain");await this.sendToChatInteractive(e,n,"Explain SQL")}catch(e){let n=e instanceof Error?e.message:String(e);B.window.showErrorMessage(`Error explaining SQL: ${n}`)}}async askCustomQuestion(){try{let e=await B.window.showInputBox({prompt:"Ask Copilot about this SQL (with full database context)",placeHolder:'e.g., "How can I improve this query?" or "Add an index hint"'});if(!e)return;let n=await this.gatherContext(),r=await B.window.showQuickPick([{label:"\u270F\uFE0F Apply SQL Changes",description:"Copilot will modify the SQL in editor",value:"edit"},{label:"\u{1F4A1} Just Ask for Advice",description:"Get response in new document without modifying code",value:"advice"}],{placeHolder:"How would you like Copilot to respond?"});if(!r)return;if(r.value==="edit")await this.sendToLanguageModel(n,e,!0);else{let s=await this.sendToLanguageModel(n,e,!1),o=await B.workspace.openTextDocument({content:`# Copilot Advice

**Question:** ${e}

${s}`,language:"markdown"});await B.window.showTextDocument(o,B.ViewColumn.Beside)}}catch(e){let n=e instanceof Error?e.message:String(e);B.window.showErrorMessage(`Error: ${n}`)}}async askCustomQuestionInteractive(){try{let e=await B.window.showInputBox({prompt:"Ask Copilot about this SQL (opens in chat for interactive discussion)",placeHolder:'e.g., "How can I improve this query?" or "Add an index hint"'});if(!e)return;let n=await this.gatherContext();await this.sendToChatInteractive(n,e,"Custom Question")}catch(e){let n=e instanceof Error?e.message:String(e);B.window.showErrorMessage(`Error: ${n}`)}}async generateSqlInteractive(){try{let e=await B.window.showInputBox({prompt:"Describe the SQL query you need in natural language",placeHolder:'e.g., "Find all customers who made purchases over $1000 last month"',ignoreFocusOut:!0});if(!e)return;await B.window.withProgress({location:B.ProgressLocation.Notification,title:"Gathering database schema...",cancellable:!1},async()=>{let n=await this.gatherSchemaOverview();if(!n){B.window.showErrorMessage("Could not gather schema information. Please ensure you are connected to a database.");return}let r=this.buildGenerateSqlPrompt(e,n),i=await this.connectionManager.getActiveConnectionName(),s={selectedSql:"",ddlContext:n,variables:"",recentQueries:this.getRecentQueriesSummary(),connectionInfo:i?`Connected to: ${i}`:"No active connection"};await this.sendToChatInteractiveWithCustomPrompt(s,r,"Generate SQL")})}catch(e){let n=e instanceof Error?e.message:String(e);B.window.showErrorMessage(`Error generating SQL: ${n}`)}}async gatherSchemaOverview(){let e=await this.connectionManager.getActiveConnectionName();if(!e)return null;let n=await this.connectionManager.getConnection(e);if(!n)return null;let r=null;try{r=await dr(n);let i=await this.connectionManager.getCurrentDatabase(e);if(!i)return null;let s=`
                SELECT 
                    O.SCHEMA,
                    O.OBJNAME AS TABLE_NAME,
                    COALESCE(O.DESCRIPTION, '') AS TABLE_DESCRIPTION,
                    C.ATTNAME AS COLUMN_NAME,
                    C.FORMAT_TYPE,
                    COALESCE(C.DESCRIPTION, '') AS COLUMN_DESCRIPTION,
                    C.ATTNUM,
                    MAX(CASE WHEN K.CONTYPE = 'p' THEN 1 ELSE 0 END) AS IS_PK,
                    MAX(CASE WHEN K.CONTYPE = 'f' THEN 1 ELSE 0 END) AS IS_FK
                FROM ${i.toUpperCase()}.._V_RELATION_COLUMN C
                JOIN ${i.toUpperCase()}.._V_OBJECT_DATA O ON C.OBJID = O.OBJID
                LEFT JOIN ${i.toUpperCase()}.._V_RELATION_KEYDATA K 
                    ON UPPER(K.RELATION) = UPPER(O.OBJNAME) 
                    AND UPPER(K.SCHEMA) = UPPER(O.SCHEMA)
                    AND UPPER(K.ATTNAME) = UPPER(C.ATTNAME)
                    AND K.CONTYPE IN ('p', 'f')
                WHERE UPPER(O.DBNAME) = UPPER('${i}')
                AND O.OBJTYPE IN ('TABLE', 'VIEW')
                GROUP BY O.SCHEMA, O.OBJNAME, O.DESCRIPTION, C.ATTNAME, C.FORMAT_TYPE, C.DESCRIPTION, C.ATTNUM
                ORDER BY O.SCHEMA, O.OBJNAME, C.ATTNUM
            `,o=await Oe(r,s);if(!o||o.length===0)return"No tables found in database";let a=new Map;for(let u of o){let d=`${u.SCHEMA}.${u.TABLE_NAME}`;a.has(d)||a.set(d,{schema:u.SCHEMA,tableName:u.TABLE_NAME,tableDescription:u.TABLE_DESCRIPTION,columns:[]}),a.get(d).columns.push({name:u.COLUMN_NAME,type:u.FORMAT_TYPE,description:u.COLUMN_DESCRIPTION,isPk:Number(u.IS_PK)===1,isFk:Number(u.IS_FK)===1})}let l=[];l.push(`DATABASE: ${i}`),l.push(`TABLES: ${a.size}`),l.push(""),l.push("SCHEMA OVERVIEW:"),l.push("================"),l.push("");let c=new Map;for(let[u,d]of a)c.has(d.schema)||c.set(d.schema,new Map),c.get(d.schema).set(u,d);for(let[u,d]of c){l.push(`[SCHEMA: ${u}]`);for(let[,E]of d){let f=E.tableDescription?` -- ${E.tableDescription}`:"";l.push(`  TABLE: ${E.tableName}${f}`);let p=E.columns.map(h=>{let T=[];h.isPk&&T.push("PK"),h.isFk&&T.push("FK");let S=T.length>0?` [${T.join(", ")}]`:"",m=h.description?` (${h.description})`:"";return`    - ${h.name}: ${h.type}${S}${m}`});l.push(p.join(`
`)),l.push("")}}return l.join(`
`)}catch(i){return console.error("[CopilotService] Error gathering schema overview:",i),null}finally{if(r)try{await r.close()}catch(i){console.warn("[CopilotService] Error closing connection:",i)}}}buildGenerateSqlPrompt(e,n){return`You are a Netezza SQL expert. The user wants to generate a SQL query based on their description.

USER REQUEST:
${e}

AVAILABLE DATABASE SCHEMA:
\`\`\`
${n}
\`\`\`

INSTRUCTIONS:
1. Analyze the user's request and identify which tables and columns are relevant
2. Generate a complete, executable SQL query for Netezza
3. Use proper JOIN conditions based on likely relationships (matching column names like ID fields)
4. Include appropriate WHERE clauses, GROUP BY, ORDER BY as needed
5. Use table aliases for readability
6. Add comments explaining the query logic

If the request is ambiguous, ask clarifying questions before generating the SQL.
If certain tables or columns seem missing, suggest what additional information might be needed.

Please generate the SQL query:`}async sendToChatInteractiveWithCustomPrompt(e,n,r){try{let i=n;await B.commands.executeCommand("workbench.action.chat.open",{query:i}),B.window.showInformationMessage(`\u2705 ${r} sent to Copilot Chat. Describe your query requirements for interactive SQL generation.`)}catch(i){let s=i instanceof Error?i.message:String(i);B.window.showErrorMessage(`Failed to open Copilot Chat: ${s}`)}}async showAvailableModels(){try{let e=await B.lm.selectChatModels();if(e.length===0){B.window.showWarningMessage("No Language Models available");return}let n=e.map(s=>`\u2022 ${s.id}
  Vendor: ${s.vendor}
  Family: ${s.family}
`).join(`
`),r=e.filter(s=>s.vendor==="copilot"),i=await B.workspace.openTextDocument({content:`# Available Language Models

Total models: ${e.length}
Copilot models: ${r.length}

## All Models

${n}`,language:"markdown"});await B.window.showTextDocument(i)}catch(e){let n=e instanceof Error?e.message:String(e);B.window.showErrorMessage(`Error getting models: ${n}`)}}async sendToChatInteractive(e,n,r){try{let s=`${this.buildSystemPrompt(e)}

${n}`;await B.commands.executeCommand("workbench.action.chat.open",{query:s}),B.window.showInformationMessage(`\u2705 ${r} sent to Copilot Chat. Check the Chat panel for interactive discussion.`)}catch(i){let s=i instanceof Error?i.message:String(i);B.window.showErrorMessage(`Failed to open Copilot Chat: ${s}`)}}async showDiff(e,n){let r=B.window.activeTextEditor,i;r&&!r.selection.isEmpty?i=r.selection:i=new B.Range(new B.Position(0,0),new B.Position(e.lineCount,0));try{let s=e.getText(i);if(s.trim()===n.trim()){B.window.showInformationMessage("No changes detected - content is identical.");return}let o=await B.workspace.openTextDocument({content:n,language:e.languageId}),a=await B.workspace.openTextDocument({content:s,language:e.languageId});await B.commands.executeCommand("vscode.diff",a.uri,o.uri,`AI Suggestions: ${e.fileName.split(/[\\\\/]/).pop()||"file"}`,{preview:!0});let l=await B.window.showInformationMessage("Review the AI-suggested changes in the diff editor.",{modal:!0},"Apply Changes","Apply & Close Diff","Discard");if(l==="Apply Changes"||l==="Apply & Close Diff"){let c=new B.WorkspaceEdit;c.replace(e.uri,i,n),await B.workspace.applyEdit(c)?(B.window.showInformationMessage("\u2705 Changes applied successfully."),l==="Apply & Close Diff"&&await B.commands.executeCommand("workbench.action.closeActiveEditor")):B.window.showErrorMessage("Failed to apply changes.")}else l==="Discard"&&await B.commands.executeCommand("workbench.action.closeActiveEditor")}catch(s){console.error("Diff error:",s),B.window.showErrorMessage(`Failed to show diff: ${s instanceof Error?s.message:String(s)}`)}}async describeDataWithCopilot(e,n){try{if(!e||e.length===0){B.window.showWarningMessage("No data to describe");return}let r=e.length,i=Object.keys(e[0]||{}).length,s=r>50?"50 (limited for context)":r;if(await B.window.showWarningMessage(`\u26A0\uFE0F Privacy Notice: You are about to send ${s} rows with ${i} columns to GitHub Copilot AI.

This data will be transmitted to external servers for analysis. Please ensure the data does NOT contain sensitive, confidential, or personally identifiable information.

Do you want to proceed?`,{modal:!0},"Yes, Send to Copilot","Cancel")!=="Yes, Send to Copilot"){B.window.showInformationMessage("Data analysis cancelled - no data was sent.");return}let a=this.convertDataToMarkdown(e),l=`Describe and analyze the following data from IBM Netezza Performance Server:

`;n&&(l+=`**Source Query:**
\`\`\`sql
${n}
\`\`\`

`),l+=`**Data (${e.length} rows):**

${a}

`,l+=`Please provide:
`,l+=`1. A summary of the data patterns and key observations
`,l+=`2. Any notable trends, outliers, or anomalies
`,l+="3. Suggestions for further analysis if applicable",await B.commands.executeCommand("workbench.action.chat.open",{query:l}),B.window.showInformationMessage("\u2705 Data sent to Copilot Chat for analysis. Check the Chat panel for results.")}catch(r){let i=r instanceof Error?r.message:String(r);B.window.showErrorMessage(`Failed to send data to Copilot: ${i}`)}}async fixSqlError(e,n){try{if(!n.trim()){B.window.showWarningMessage("No SQL to fix");return}await B.window.withProgress({location:B.ProgressLocation.Notification,title:"Gathering table DDL for Copilot...",cancellable:!1},async()=>{let i=B.workspace.getConfiguration("justyBaseLite.copilot").get("preferredLanguage")||"english",s="";if(i==="system"){let d=B.env.language;d&&!d.startsWith("en")&&(s=`

Please respond in ${d} language.`)}let o=this.extractTableReferences(n),a=this.connectionManager.getActiveConnectionName()||void 0,l=await this.gatherTablesDDL(o,a),u=`${this.getPrompt("fix")}${s}

IMPORTANT NETEZZA SQL CONVENTIONS:
- Table references: Use DATABASE..TABLE (two dots) or DATABASE.SCHEMA.TABLE (three parts)
- DATABASE..TABLE syntax is valid and CORRECT in Netezza (do NOT change it to DATABASE.SCHEMA.TABLE)
- Three-part names: DATABASE.SCHEMA.TABLE are also valid
- Netezza supports specific SQL extensions and performance features

**Error from IBM Netezza:**
\`\`\`
${e}
\`\`\`

**SQL Query that caused the error:**
\`\`\`sql
${n}
\`\`\`
`;l&&!l.includes("No table references")&&!l.includes("Could not gather DDL")&&(u+=`
**Referenced Table Schemas (DDL):**
\`\`\`sql
${l}
\`\`\`
`),this.isProcedureCode(n)&&(u+=`
${this.NZPLSQL_PROCEDURE_REFERENCE}
`),u+=`
Please:
1. Explain what caused this error
2. Provide the corrected SQL query
3. Explain the fix you made`,await B.commands.executeCommand("workbench.action.chat.open",{query:u})}),B.window.showInformationMessage("\u2705 Error sent to Copilot Chat for fixing. Check the Chat panel.")}catch(r){let i=r instanceof Error?r.message:String(r);B.window.showErrorMessage(`Failed to send error to Copilot: ${i}`)}}convertDataToMarkdown(e){if(e.length===0)return"*No data*";let n=e.slice(0,50),r=e.length>50,i=Object.keys(n[0]),s="| "+i.join(" | ")+` |
`;s+="| "+i.map(()=>"---").join(" | ")+` |
`;for(let o of n){let a=i.map(l=>{let c=o[l];if(c==null)return"NULL";let u=String(c).replace(/\|/g,"\\|");return u.length>100?u.substring(0,97)+"...":u});s+="| "+a.join(" | ")+` |
`}return r&&(s+=`
*... and ${e.length-50} more rows (total: ${e.length} rows)*`),s}registerChatParticipant(e){try{let n=async(i,s,o,a)=>{try{return i.command==="schema"?await this.handleSchemaCommand(i,s,o,a):i.command==="optimize"?await this.handleOptimizeCommand(i,s,o,a):i.command==="fix"?await this.handleFixCommand(i,s,o,a):i.command==="explain"?await this.handleExplainCommand(i,s,o,a):await this.handleGeneralQuery(i,s,o,a)}catch(l){let c=l instanceof Error?l.message:String(l);return o.markdown(`\u274C Error: ${c}`),{metadata:{error:c}}}},r=B.chat.createChatParticipant("netezza.sqlcopilot",n);return r.iconPath=B.Uri.joinPath(e.extensionUri,"Icon.png"),r.followupProvider={provideFollowups:(i,s,o)=>i.metadata?.command==="schema"?[{prompt:"Optimize the query for these tables",label:"Optimize query",command:"optimize"},{prompt:"Explain how these tables relate",label:"Explain schema"}]:[]},console.log("[CopilotService] Chat participant @sql-copilot registered successfully"),r}catch(n){console.error("[CopilotService] Failed to register chat participant:",n);return}}async handleSchemaCommand(e,n,r,i){r.progress("Analyzing SQL for table references...");let s=B.window.activeTextEditor;if(!s)return r.markdown("\u26A0\uFE0F No SQL file is currently open. Please open a SQL file first."),{metadata:{command:"schema",success:!1}};let o=s.document,a=s.selection,l=a.isEmpty?o.getText():o.getText(a);if(!l.trim())return r.markdown("\u26A0\uFE0F No SQL content found. Please enter some SQL or open a SQL file."),{metadata:{command:"schema",success:!1}};let c=this.extractTableReferences(l);if(c.length===0)return r.markdown("\u2139\uFE0F No table references found in the current SQL.\n\nMake sure your SQL contains `FROM`, `JOIN`, `INSERT INTO`, `UPDATE`, or `DELETE FROM` clauses."),{metadata:{command:"schema",success:!1}};r.progress(`Found ${c.length} table(s). Fetching DDL...`);let u=this.connectionManager.getDocumentConnection(o.uri.toString())||this.connectionManager.getActiveConnectionName()||void 0,d=await this.gatherTablesDDL(c,u);return r.markdown(`## \u{1F4CA} Schema Context for Current SQL

`),r.markdown(`**Connection:** ${u||"Not connected"}

`),r.markdown(`**Tables found:** ${c.map(E=>`\`${E.database?E.database+".":""}${E.schema?E.schema+".":""}${E.name}\``).join(", ")}

`),d.includes("CREATE TABLE")||d.includes("-- Table:")?r.markdown(`### Table Definitions (DDL)

\`\`\`sql
${d}
\`\`\`
`):r.markdown(`### Schema Information

${d}
`),o.uri.scheme==="file"&&r.reference(o.uri),e.prompt.trim()&&(r.markdown(`
---

**Your question:** ${e.prompt}

`),r.markdown("*Use the schema information above to answer your question about the SQL.*")),{metadata:{command:"schema",success:!0,tableCount:c.length}}}async handleOptimizeCommand(e,n,r,i){r.progress("Gathering context and optimizing SQL...");let s=await this.gatherContext(),a=`${this.getPrompt("optimize")}

${this.NETEZZA_OPTIMIZATION_RULES}`;this.isProcedureCode(s.selectedSql)&&(a+=`

${this.NZPLSQL_PROCEDURE_REFERENCE}`),e.prompt.trim()&&(a+=`

Additional user instructions: ${e.prompt}`);let c=`${this.buildSystemPrompt(s)}

${a}`,u=[B.LanguageModelChatMessage.User(c)],d=await e.model.sendRequest(u,{},i);for await(let E of d.text)r.markdown(E);return{metadata:{command:"optimize",success:!0}}}async handleFixCommand(e,n,r,i){r.progress("Analyzing SQL for errors...");let s=await this.gatherContext(),o=this.getPrompt("fix");this.isProcedureCode(s.selectedSql)&&(o+=`

${this.NZPLSQL_PROCEDURE_REFERENCE}`),e.prompt.trim()&&(o+=`

Additional context about the error: ${e.prompt}`);let l=`${this.buildSystemPrompt(s)}

${o}`,c=[B.LanguageModelChatMessage.User(l)],u=await e.model.sendRequest(c,{},i);for await(let d of u.text)r.markdown(d);return{metadata:{command:"fix",success:!0}}}async handleExplainCommand(e,n,r,i){r.progress("Analyzing SQL...");let s=await this.gatherContext(),o=this.getPrompt("explain");e.prompt.trim()&&(o+=`

Focus on: ${e.prompt}`);let l=`${this.buildSystemPrompt(s)}

${o}`,c=[B.LanguageModelChatMessage.User(l)],u=await e.model.sendRequest(c,{},i);for await(let d of u.text)r.markdown(d);return{metadata:{command:"explain",success:!0}}}async handleGeneralQuery(e,n,r,i){r.progress("Processing your SQL question...");let s;try{s=await this.gatherContext()}catch{let u=this.connectionManager.getActiveConnectionName();s={selectedSql:"",ddlContext:"No SQL file open",variables:"",recentQueries:"",connectionInfo:u?`Connected to: ${u}`:"No connection"}}let a=`${this.buildSystemPrompt(s)}

User question: ${e.prompt}`,l=[B.LanguageModelChatMessage.User(a)],c=await e.model.sendRequest(l,{},i);for await(let u of c.text)r.markdown(u);return{metadata:{command:"general",success:!0}}}async getSchemaForSql(e){if(!e.trim())return"No SQL content provided.";let n=this.extractTableReferences(e);if(n.length===0)return"No table references found in the provided SQL.";let r=this.connectionManager.getActiveConnectionName()||void 0,i=await this.gatherTablesDDL(n,r);return`Tables: ${n.map(s=>s.name).join(", ")}

${i}`}async getSchemaContextForCurrentSql(){let e=B.window.activeTextEditor;if(!e)return"No SQL file is currently open.";let n=e.document,r=e.selection,i=r.isEmpty?n.getText():n.getText(r);if(!i.trim())return"No SQL content found.";let s=this.extractTableReferences(i);if(s.length===0)return"No table references found in the current SQL.";let o=this.connectionManager.getDocumentConnection(n.uri.toString())||this.connectionManager.getActiveConnectionName()||void 0,a=await this.gatherTablesDDL(s,o);return`Tables: ${s.map(l=>l.name).join(", ")}

${a}`}async getColumnsForTables(e,n){let r=this.connectionManager.getActiveConnectionName();if(!r)return"No active database connection. Please connect to a Netezza database first.";let i=[];for(let o of e){let a=o.split("."),l,c,u;a.length===3?[l,c,u]=a:a.length===2?([c,u]=a,l=n):(u=a[0],l=n),i.push({database:l,schema:c||void 0,name:u})}return i.length===0?"No valid table references provided.":await this.gatherTablesDDL(i,r)}async getTablesFromDatabase(e,n){let r=this.connectionManager.getActiveConnectionName();if(!r)return"No active database connection. Please connect to a Netezza database first.";try{let i;n?i=`
                    SELECT 
                        SCHEMA AS schema_name,
                        TABLENAME AS table_name,
                        CASE RELKIND 
                            WHEN 'r' THEN 'TABLE'
                            WHEN 'v' THEN 'VIEW'
                            WHEN 'm' THEN 'MATERIALIZED VIEW'
                            WHEN 'e' THEN 'EXTERNAL TABLE'
                            ELSE RELKIND
                        END AS object_type,
                        OWNER AS owner
                    FROM ${e}._V_TABLE
                    WHERE SCHEMA = '${n.toUpperCase()}'
                    ORDER BY SCHEMA, TABLENAME
                `:i=`
                    SELECT 
                        SCHEMA AS schema_name,
                        TABLENAME AS table_name,
                        CASE RELKIND 
                            WHEN 'r' THEN 'TABLE'
                            WHEN 'v' THEN 'VIEW'
                            WHEN 'm' THEN 'MATERIALIZED VIEW'
                            WHEN 'e' THEN 'EXTERNAL TABLE'
                            ELSE RELKIND
                        END AS object_type,
                        OWNER AS owner
                    FROM ${e}._V_TABLE
                    ORDER BY SCHEMA, TABLENAME
                `;let s=await this.connectionManager.getConnection(r);if(!s)return`Connection "${r}" not found.`;let o=await dr(s);if(!o)return"Could not establish database connection.";try{let a=await Oe(o,i);if(!a||a.length===0){let c=n?` in schema ${n}`:"";return`No tables found in database ${e}${c}.`}let l=[`## Tables in ${e}${n?"."+n:""}
`,"| Schema | Table Name | Type | Owner |","|--------|------------|------|-------|"];for(let c of a){let u=c.SCHEMA_NAME||c.schema_name||"",d=c.TABLE_NAME||c.table_name||"",E=c.OBJECT_TYPE||c.object_type||"",f=c.OWNER||c.owner||"";l.push(`| ${u} | ${d} | ${E} | ${f} |`)}return l.push(`
**Total:** ${a.length} object(s)`),l.join(`
`)}finally{o.close()}}catch(i){return`Failed to retrieve tables: ${i instanceof Error?i.message:String(i)}`}}async executeSelectQuery(e,n=100){let r=this.connectionManager.getActiveConnectionName();if(!r)return"No active database connection. Please connect to a Netezza database first.";let i=e.trim().toUpperCase();if(!i.startsWith("SELECT")&&!i.startsWith("WITH"))return"Error: Only SELECT queries are allowed for safety. Use the extension commands for DDL/DML operations.";let s=["INSERT","UPDATE","DELETE","DROP","TRUNCATE","ALTER","CREATE","GRANT","REVOKE"];for(let o of s)if(new RegExp(`^\\s*(${o})\\s+`,"im").test(e))return`Error: ${o} statements are not allowed. Only SELECT queries are permitted.`;try{let o=await this.connectionManager.getConnection(r);if(!o)return`Connection "${r}" not found.`;let a=await dr(o);if(!a)return"Could not establish database connection.";try{let l=e.trim();l.toUpperCase().includes(" LIMIT ")||(l=`${l.replace(/;?\s*$/,"")} LIMIT ${n}`);let c=await Oe(a,l);if(!c||c.length===0)return"Query executed successfully. No rows returned.";let u=Object.keys(c[0]),d=[`## Query Results (${c.length} row${c.length>1?"s":""})
`,"| "+u.join(" | ")+" |","|"+u.map(()=>"---").join("|")+"|"];for(let E of c.slice(0,n)){let f=u.map(p=>{let h=E[p];return h===null?"NULL":h===void 0?"":String(h).replace(/\|/g,"\\|").substring(0,100)});d.push("| "+f.join(" | ")+" |")}return c.length>n&&d.push(`
*... and ${c.length-n} more rows (limited to ${n})*`),d.join(`
`)}finally{a.close()}}catch(o){return`Query execution failed: ${o instanceof Error?o.message:String(o)}`}}async getSampleData(e,n,r=10){let i=this.connectionManager.getActiveConnectionName();if(!i)return"No active database connection. Please connect to a Netezza database first.";try{let s=e.split("."),o,a,l;s.length===3?[o,a,l]=s:s.length===2?([a,l]=s,o=n):(l=s[0],o=n);let c=await this.connectionManager.getConnection(i);if(!c)return`Connection "${i}" not found.`;if(o||(o=await this.connectionManager.getCurrentDatabase(i)||void 0),!o)return"Could not determine database. Please specify database name.";let u=await dr(c);if(!u)return"Could not establish database connection.";try{if(a||(a=await this.findTableSchema(u,o,l)),!a)return`Table "${l}" not found in database "${o}".`;let d=`${o}.${a}.${l}`,E=`SELECT * FROM ${d} LIMIT ${r}`,f=await Oe(u,E);if(!f||f.length===0)return`Table ${d} is empty or has no accessible rows.`;let p=Object.keys(f[0]),h=[`## Sample Data from ${d}
`,`*Showing ${f.length} of ${r} requested rows*
`,"| "+p.join(" | ")+" |","|"+p.map(()=>"---").join("|")+"|"];for(let T of f){let S=p.map(m=>{let R=T[m];return R===null?"NULL":R===void 0?"":String(R).replace(/\|/g,"\\|").substring(0,50)});h.push("| "+S.join(" | ")+" |")}return h.join(`
`)}finally{u.close()}}catch(s){return`Failed to get sample data: ${s instanceof Error?s.message:String(s)}`}}async getExplainPlan(e,n=!1){let r=this.connectionManager.getActiveConnectionName();if(!r)return"No active database connection. Please connect to a Netezza database first.";try{let i=await this.connectionManager.getConnection(r);if(!i)return`Connection "${r}" not found.`;let s=await dr(i);if(!s)return"Could not establish database connection.";try{let a=`${n?"EXPLAIN VERBOSE":"EXPLAIN"} ${e}`,l=await Oe(s,a);if(!l||l.length===0)return"No explain plan returned.";let c=[`## Execution Plan${n?" (Verbose)":""}
`,"```"];for(let u of l){let d=Object.values(u);c.push(String(d[0]||""))}return c.push("```\n"),c.push("### Plan Analysis Tips:"),c.push("- Look for **Redistribute** or **Broadcast** operations (expensive)"),c.push("- Check if **Zone Maps** are being used for filtering"),c.push("- Watch for **Spool** operations that may indicate temp table usage"),c.push("- **SPU** operations show parallel processing distribution"),c.join(`
`)}finally{s.close()}}catch(i){return`Failed to get explain plan: ${i instanceof Error?i.message:String(i)}`}}async searchSchema(e,n="all",r){let i=this.connectionManager.getActiveConnectionName();if(!i)return"No active database connection. Please connect to a Netezza database first.";try{let s=await this.connectionManager.getConnection(i);if(!s)return`Connection "${i}" not found.`;let o=r;if(o||(o=await this.connectionManager.getCurrentDatabase(i)||void 0),!o)return"Could not determine database. Please specify database name.";let a=await dr(s);if(!a)return"Could not establish database connection.";let l=[`## Schema Search Results for "${e}" in ${o}
`],c=e.toUpperCase().replace(/\*/g,"%");try{if(n==="tables"||n==="all"){let u=`
                        SELECT SCHEMA, TABLENAME, 
                            CASE RELKIND WHEN 'r' THEN 'TABLE' WHEN 'v' THEN 'VIEW' ELSE RELKIND END AS TYPE
                        FROM ${o}._V_TABLE
                        WHERE UPPER(TABLENAME) LIKE '${c}'
                        ORDER BY SCHEMA, TABLENAME
                        LIMIT 50
                    `,d=await Oe(a,u);if(d&&d.length>0){l.push(`### Tables/Views Found
`),l.push("| Schema | Name | Type |"),l.push("|--------|------|------|");for(let E of d){let f=E;l.push(`| ${f.SCHEMA} | ${f.TABLENAME} | ${f.TYPE} |`)}l.push(`
*Found ${d.length} table(s)/view(s)*
`)}else n==="tables"&&l.push(`No tables or views found matching the pattern.
`)}if(n==="columns"||n==="all"){let u=`
                        SELECT t.SCHEMA, t.TABLENAME, c.NAME AS COLUMN_NAME, c.TYPE AS DATA_TYPE
                        FROM ${o}._V_TABLE t
                        JOIN ${o}._V_RELATION_COLUMN c ON t.OBJID = c.OBJID
                        WHERE UPPER(c.NAME) LIKE '${c}'
                        ORDER BY t.SCHEMA, t.TABLENAME, c.NAME
                        LIMIT 100
                    `,d=await Oe(a,u);if(d&&d.length>0){l.push(`### Columns Found
`),l.push("| Schema | Table | Column | Data Type |"),l.push("|--------|-------|--------|-----------|");for(let E of d){let f=E;l.push(`| ${f.SCHEMA} | ${f.TABLENAME} | ${f.COLUMN_NAME} | ${f.DATA_TYPE} |`)}l.push(`
*Found ${d.length} column(s)*
`)}else n==="columns"&&l.push(`No columns found matching the pattern.
`)}return l.join(`
`)}finally{a.close()}}catch(s){return`Schema search failed: ${s instanceof Error?s.message:String(s)}`}}async getTableStats(e,n){let r=this.connectionManager.getActiveConnectionName();if(!r)return"No active database connection. Please connect to a Netezza database first.";try{let i=e.split("."),s,o,a;i.length===3?[s,o,a]=i:i.length===2?([o,a]=i,s=n):(a=i[0],s=n);let l=await this.connectionManager.getConnection(r);if(!l)return`Connection "${r}" not found.`;if(s||(s=await this.connectionManager.getCurrentDatabase(r)||void 0),!s)return"Could not determine database. Please specify database name.";let c=await dr(l);if(!c)return"Could not establish database connection.";try{if(o||(o=await this.findTableSchema(c,s,a)),!o)return`Table "${a}" not found in database "${s}".`;let u=`${s}.${o}.${a}`,d=[`## Table Statistics: ${u}
`];try{let p=`SELECT COUNT(*) AS ROW_COUNT FROM ${u}`,h=await Oe(c,p);if(h&&h.length>0){let T=h[0].ROW_COUNT;d.push(`**Row Count:** ${Number(T).toLocaleString()}`)}}catch{d.push("**Row Count:** Unable to retrieve")}let E=`
                    SELECT 
                        t.RELTUPLES AS EST_ROWS,
                        t.RELPAGES AS PAGES,
                        t.RELNATTS AS COLUMNS,
                        d.ATTNAME AS DIST_KEY,
                        t.OWNER
                    FROM ${s}._V_TABLE t
                    LEFT JOIN ${s}._V_TABLE_DIST_MAP d ON t.OBJID = d.OBJID
                    WHERE t.SCHEMA = '${o}' AND t.TABLENAME = '${a}'
                `,f=await Oe(c,E);if(f&&f.length>0){let p=f[0];d.push(`**Estimated Rows (catalog):** ${Number(p.EST_ROWS||0).toLocaleString()}`),d.push(`**Pages:** ${p.PAGES||"N/A"}`),d.push(`**Columns:** ${p.COLUMNS||"N/A"}`),d.push(`**Distribution Key:** ${p.DIST_KEY||"RANDOM"}`),d.push(`**Owner:** ${p.OWNER||"N/A"}`)}d.push(`
### Data Distribution (Skew Check)
`);try{let p=`
                        SELECT DATASLICEID, COUNT(*) AS ROW_COUNT
                        FROM ${u}
                        GROUP BY DATASLICEID
                        ORDER BY DATASLICEID
                    `,h=await Oe(c,p);if(h&&h.length>0){let T=h.map(I=>Number(I.ROW_COUNT)),S=Math.min(...T),m=Math.max(...T),R=T.reduce((I,w)=>I+w,0)/T.length,A=m>0?((m-S)/m*100).toFixed(1):"0";d.push(`**SPU Count:** ${h.length}`),d.push(`**Min Rows/SPU:** ${S.toLocaleString()}`),d.push(`**Max Rows/SPU:** ${m.toLocaleString()}`),d.push(`**Avg Rows/SPU:** ${Math.round(R).toLocaleString()}`),d.push(`**Skew Ratio:** ${A}%`),Number(A)>20?d.push(`
\u26A0\uFE0F **Warning:** High data skew detected. Consider reviewing distribution key.`):d.push(`
\u2705 Data distribution looks balanced.`)}}catch{d.push("Unable to retrieve skew information (DATASLICEID may not be available).")}return d.join(`
`)}finally{c.close()}}catch(i){return`Failed to get table statistics: ${i instanceof Error?i.message:String(i)}`}}async getObjectDependencies(e,n){let r=this.connectionManager.getActiveConnectionName();if(!r)return"No active database connection. Please connect to a Netezza database first.";try{let i=await this.connectionManager.getConnection(r);if(!i)return`Connection "${r}" not found.`;let s=n;if(s||(s=await this.connectionManager.getCurrentDatabase(r)||void 0),!s)return"Could not determine database. Please specify database name.";let o=await dr(i);if(!o)return"Could not establish database connection.";let a=e.split("."),l=a[a.length-1].toUpperCase(),c=[`## Dependencies for ${e}
`];try{let u=`
                    SELECT v.SCHEMA, v.VIEWNAME, v.OWNER
                    FROM ${s}._V_VIEW v
                    WHERE UPPER(v.DEFINITION) LIKE '%${l}%'
                    AND v.VIEWNAME != '${l}'
                    ORDER BY v.SCHEMA, v.VIEWNAME
                    LIMIT 50
                `,d=await Oe(o,u);if(d&&d.length>0){c.push(`### Views that reference this object
`),c.push("| Schema | View Name | Owner |"),c.push("|--------|-----------|-------|");for(let T of d){let S=T;c.push(`| ${S.SCHEMA} | ${S.VIEWNAME} | ${S.OWNER} |`)}c.push("")}else c.push(`### Views that reference this object
`),c.push(`No views found that reference this object.
`);let E=`
                    SELECT DEFINITION
                    FROM ${s}._V_VIEW
                    WHERE UPPER(VIEWNAME) = '${l}'
                    LIMIT 1
                `,f=await Oe(o,E);f&&f.length>0&&(c.push(`### View Definition (for dependency analysis)
`),c.push("```sql"),c.push(String(f[0].DEFINITION||"")),c.push("```\n"));let p=`
                    SELECT SCHEMA, PROCEDURE AS PROC_NAME, OWNER
                    FROM ${s}._V_PROCEDURE
                    WHERE UPPER(PROCEDURESOURCE) LIKE '%${l}%'
                    ORDER BY SCHEMA, PROCEDURE
                    LIMIT 25
                `,h=await Oe(o,p);if(h&&h.length>0){c.push(`### Procedures that reference this object
`),c.push("| Schema | Procedure | Owner |"),c.push("|--------|-----------|-------|");for(let T of h){let S=T;c.push(`| ${S.SCHEMA} | ${S.PROC_NAME} | ${S.OWNER} |`)}c.push("")}return c.join(`
`)}finally{o.close()}}catch(i){return`Failed to get dependencies: ${i instanceof Error?i.message:String(i)}`}}async validateSql(e){let n=this.connectionManager.getActiveConnectionName();if(!n)return"No active database connection. Please connect to a Netezza database first.";try{let r=await this.connectionManager.getConnection(n);if(!r)return`Connection "${n}" not found.`;let i=await dr(r);if(!i)return"Could not establish database connection.";try{let s=`EXPLAIN ${e}`;return await Oe(i,s),`\u2705 **SQL is valid**

The SQL syntax is correct and all referenced objects exist.`}catch(s){let o=s instanceof Error?s.message:String(s),a=[`\u274C **SQL Validation Failed**
`,`### Error Details
`,"```",o,"```\n"];return o.includes("does not exist")?a.push("\u{1F4A1} **Suggestion:** Check if the table/column name is spelled correctly and exists in the database."):o.includes("syntax error")?a.push("\u{1F4A1} **Suggestion:** Review SQL syntax near the indicated position."):o.includes("permission denied")&&a.push("\u{1F4A1} **Suggestion:** You may not have permission to access this object."),a.join(`
`)}finally{i.close()}}catch(r){return`Validation failed: ${r instanceof Error?r.message:String(r)}`}}},eR=class{constructor(e){this.copilotService=e}async prepareInvocation(e,n){let r=e.input.sql?"provided SQL":"current editor";return{invocationMessage:`Fetching table schema from ${r}...`,confirmationMessages:{title:"Get SQL Schema",message:new B.MarkdownString(`Analyze SQL and fetch table schemas (DDL) from the connected Netezza database?

**Source:** ${r}`)}}}async invoke(e,n){try{let r;return e.input.sql?r=await this.copilotService.getSchemaForSql(e.input.sql):r=await this.copilotService.getSchemaContextForCurrentSql(),new B.LanguageModelToolResult([new B.LanguageModelTextPart(r)])}catch(r){let i=r instanceof Error?r.message:String(r);throw new Error(`Failed to get SQL schema: ${i}. Make sure you have an active database connection.`)}}},tR=class{constructor(e){this.copilotService=e}async prepareInvocation(e,n){let r=e.input.tables?.length||0,i=e.input.database?` from database ${e.input.database}`:"";return{invocationMessage:`Fetching column metadata for ${r} table(s)${i}...`,confirmationMessages:{title:"Get Table Columns",message:new B.MarkdownString(`Fetch column definitions for the following tables${i}?

**Tables:** ${e.input.tables?.join(", ")||"none"}`)}}}async invoke(e,n){try{let{tables:r,database:i}=e.input;if(!r||r.length===0)throw new Error("No tables specified. Please provide at least one table name.");let s=await this.copilotService.getColumnsForTables(r,i);return new B.LanguageModelToolResult([new B.LanguageModelTextPart(s)])}catch(r){let i=r instanceof Error?r.message:String(r);throw new Error(`Failed to get columns: ${i}. Make sure you have an active database connection.`)}}},nR=class{constructor(e){this.copilotService=e}async prepareInvocation(e,n){let r=e.input.schema?` (schema: ${e.input.schema})`:"";return{invocationMessage:`Fetching tables from database ${e.input.database}${r}...`,confirmationMessages:{title:"Get Tables List",message:new B.MarkdownString(`Fetch list of tables from database **${e.input.database}**${r}?`)}}}async invoke(e,n){try{let{database:r,schema:i}=e.input;if(!r)throw new Error("Database name is required.");let s=await this.copilotService.getTablesFromDatabase(r,i);return new B.LanguageModelToolResult([new B.LanguageModelTextPart(s)])}catch(r){let i=r instanceof Error?r.message:String(r);throw new Error(`Failed to get tables: ${i}. Make sure you have an active database connection.`)}}},rR=class{constructor(e){this.copilotService=e}async prepareInvocation(e,n){let r=e.input.maxRows||100,i=e.input.sql?.substring(0,100)+(e.input.sql?.length>100?"...":"");return{invocationMessage:`Executing SELECT query (max ${r} rows)...`,confirmationMessages:{title:"Execute SQL Query",message:new B.MarkdownString(`Execute the following SQL query (read-only)?

\`\`\`sql
${i}
\`\`\`

**Max Rows:** ${r}`)}}}async invoke(e,n){try{let{sql:r,maxRows:i}=e.input;if(!r)throw new Error("SQL query is required.");let s=await this.copilotService.executeSelectQuery(r,i||100);return new B.LanguageModelToolResult([new B.LanguageModelTextPart(s)])}catch(r){let i=r instanceof Error?r.message:String(r);throw new Error(`Query execution failed: ${i}`)}}},iR=class{constructor(e){this.copilotService=e}async prepareInvocation(e,n){let r=e.input.sampleSize||10,i=e.input.database?` from ${e.input.database}`:"";return{invocationMessage:`Fetching ${r} sample rows from ${e.input.table}${i}...`,confirmationMessages:{title:"Get Sample Data",message:new B.MarkdownString(`Fetch ${r} sample rows from table **${e.input.table}**${i}?`)}}}async invoke(e,n){try{let{table:r,database:i,sampleSize:s}=e.input;if(!r)throw new Error("Table name is required.");let o=await this.copilotService.getSampleData(r,i,s||10);return new B.LanguageModelToolResult([new B.LanguageModelTextPart(o)])}catch(r){let i=r instanceof Error?r.message:String(r);throw new Error(`Failed to get sample data: ${i}`)}}},sR=class{constructor(e){this.copilotService=e}async prepareInvocation(e,n){let r=e.input.verbose?"verbose":"standard",i=e.input.sql?.substring(0,80)+(e.input.sql?.length>80?"...":"");return{invocationMessage:`Getting ${r} execution plan...`,confirmationMessages:{title:"Get Execution Plan",message:new B.MarkdownString(`Get ${r} execution plan for:

\`\`\`sql
${i}
\`\`\``)}}}async invoke(e,n){try{let{sql:r,verbose:i}=e.input;if(!r)throw new Error("SQL query is required.");let s=await this.copilotService.getExplainPlan(r,i||!1);return new B.LanguageModelToolResult([new B.LanguageModelTextPart(s)])}catch(r){let i=r instanceof Error?r.message:String(r);throw new Error(`Failed to get execution plan: ${i}`)}}},oR=class{constructor(e){this.copilotService=e}async prepareInvocation(e,n){let r=e.input.searchType||"all",i=e.input.database?` in ${e.input.database}`:"";return{invocationMessage:`Searching ${r} for "${e.input.pattern}"${i}...`,confirmationMessages:{title:"Search Schema",message:new B.MarkdownString(`Search for ${r} matching pattern **"${e.input.pattern}"**${i}?`)}}}async invoke(e,n){try{let{pattern:r,searchType:i,database:s}=e.input;if(!r)throw new Error("Search pattern is required.");let o=await this.copilotService.searchSchema(r,i||"all",s);return new B.LanguageModelToolResult([new B.LanguageModelTextPart(o)])}catch(r){let i=r instanceof Error?r.message:String(r);throw new Error(`Schema search failed: ${i}`)}}},aR=class{constructor(e){this.copilotService=e}async prepareInvocation(e,n){let r=e.input.database?` in ${e.input.database}`:"";return{invocationMessage:`Getting statistics for ${e.input.table}${r}...`,confirmationMessages:{title:"Get Table Statistics",message:new B.MarkdownString(`Fetch statistics (row count, skew, distribution) for **${e.input.table}**${r}?`)}}}async invoke(e,n){try{let{table:r,database:i}=e.input;if(!r)throw new Error("Table name is required.");let s=await this.copilotService.getTableStats(r,i);return new B.LanguageModelToolResult([new B.LanguageModelTextPart(s)])}catch(r){let i=r instanceof Error?r.message:String(r);throw new Error(`Failed to get table statistics: ${i}`)}}},lR=class{constructor(e){this.copilotService=e}async prepareInvocation(e,n){let r=e.input.database?` in ${e.input.database}`:"";return{invocationMessage:`Finding dependencies for ${e.input.object}${r}...`,confirmationMessages:{title:"Get Object Dependencies",message:new B.MarkdownString(`Find all objects that depend on **${e.input.object}**${r}?`)}}}async invoke(e,n){try{let{object:r,database:i}=e.input;if(!r)throw new Error("Object name is required.");let s=await this.copilotService.getObjectDependencies(r,i);return new B.LanguageModelToolResult([new B.LanguageModelTextPart(s)])}catch(r){let i=r instanceof Error?r.message:String(r);throw new Error(`Failed to get dependencies: ${i}`)}}},cR=class{constructor(e){this.copilotService=e}async prepareInvocation(e,n){let r=e.input.sql?.substring(0,80)+(e.input.sql?.length>80?"...":"");return{invocationMessage:"Validating SQL syntax...",confirmationMessages:{title:"Validate SQL",message:new B.MarkdownString(`Validate syntax of:

\`\`\`sql
${r}
\`\`\``)}}}async invoke(e,n){try{let{sql:r}=e.input;if(!r)throw new Error("SQL is required.");let i=await this.copilotService.validateSql(r);return new B.LanguageModelToolResult([new B.LanguageModelTextPart(i)])}catch(r){let i=r instanceof Error?r.message:String(r);throw new Error(`SQL validation failed: ${i}`)}}};var pf=Q(require("vscode"));function Hn(t){return`${t.dbName}.${t.schema}.${t.label}`}async function Dr(t,e){return await t.getConnection(e||t.getActiveConnectionName()||"")?!0:(pf.window.showErrorMessage("No database connection"),!1)}async function Kt(t,e){return pf.window.withProgress({location:pf.ProgressLocation.Notification,title:t,cancellable:!1},e)}function Bb(t){return t.replace(/'/g,"''")}function Tf(t){return/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(t.trim())}var Cn=Q(require("vscode"));pn();function Ij(t){let{context:e,connectionManager:n,schemaProvider:r}=t;return[Cn.commands.registerCommand("netezza.copySelectAll",async i=>{if(i&&i.label&&i.dbName&&i.schema){let s=`SELECT * FROM ${i.dbName}.${i.schema}.${i.label} LIMIT 1000;`,o=await Cn.window.showQuickPick([{label:"Open in Editor",description:"Open SQL in a new editor",value:"editor"},{label:"Copy to Clipboard",description:"Copy SQL to clipboard",value:"clipboard"}],{placeHolder:"How would you like to access the SQL?"});if(o)if(o.value==="editor"){let a=await Cn.workspace.openTextDocument({content:s,language:"sql"});await Cn.window.showTextDocument(a)}else await Cn.env.clipboard.writeText(s),Cn.window.showInformationMessage("Copied to clipboard")}}),Cn.commands.registerCommand("netezza.copyDrop",async i=>{if(i&&i.label&&i.dbName&&i.schema&&i.objType){let s=Hn(i),o=`DROP ${i.objType} ${s};`;if(await Cn.window.showWarningMessage(`Are you sure you want to delete ${i.objType.toLowerCase()} "${s}"?`,{modal:!0},"Yes, delete","Cancel")==="Yes, delete")try{await Kt(`Deleting ${i.objType.toLowerCase()} ${s}...`,async()=>{await hn(e,o,!0,i.connectionName,n)}),Cn.window.showInformationMessage(`Deleted ${i.objType.toLowerCase()}: ${s}`),r.refresh()}catch(l){let c=l instanceof Error?l.message:String(l);Cn.window.showErrorMessage(`Error during deletion: ${c}`)}}}),Cn.commands.registerCommand("netezza.copyName",i=>{if(i&&i.label&&i.dbName&&i.schema){let s=Hn(i);Cn.env.clipboard.writeText(s),Cn.window.showInformationMessage("Copied to clipboard")}})]}var Ee=Q(require("vscode"));pn();function _j(t){let{context:e,connectionManager:n,metadataCache:r,schemaProvider:i}=t;return[Ee.commands.registerCommand("netezza.grantPermissions",async s=>{if(s&&s.label&&s.dbName&&s.schema&&s.objType){let o=Hn(s),a=await Ee.window.showQuickPick([{label:"SELECT",description:"Privileges to read data"},{label:"INSERT",description:"Privileges to insert data"},{label:"UPDATE",description:"Privileges to update data"},{label:"DELETE",description:"Privileges to delete data"},{label:"ALL",description:"All privileges (SELECT, INSERT, UPDATE, DELETE)"},{label:"LIST",description:"Privileges to list objects"}],{placeHolder:"Select privilege type"});if(!a)return;let l=await Ee.window.showInputBox({prompt:"Enter user or group name",placeHolder:"e.g. SOME_USER or GROUP_NAME",validateInput:d=>!d||d.trim().length===0?"User/group name cannot be empty":Tf(d)?null:"Invalid user/group name"});if(!l)return;let c=`GRANT ${a.label} ON ${o} TO ${l.trim().toUpperCase()};`;if(await Ee.window.showInformationMessage(`Execute: ${c}`,{modal:!0},"Yes, execute","Cancel")==="Yes, execute"){if(!await Dr(n))return;try{await Kt(`Granting ${a.label} on ${o}...`,async()=>{await hn(e,c,!0,s.connectionName,n)}),Ee.window.showInformationMessage(`Granted ${a.label} on ${o} to ${l.trim().toUpperCase()}`)}catch(d){let E=d instanceof Error?d.message:String(d);Ee.window.showErrorMessage(`Error granting privileges: ${E}`)}}}}),Ee.commands.registerCommand("netezza.addTableComment",async s=>{if(s&&s.label&&s.dbName&&s.schema&&s.objType==="TABLE"){let o=Hn(s),a=await Ee.window.showInputBox({prompt:"Enter comment for table",placeHolder:"e.g. Table contains customer data",value:s.objectDescription||""});if(a===void 0)return;let l=`COMMENT ON TABLE ${o} IS '${Bb(a)}';`;try{if(!await Dr(n))return;await hn(e,l,!0,s.connectionName,n),Ee.window.showInformationMessage(`Comment added to table: ${o}`),i.refresh()}catch(c){let u=c instanceof Error?c.message:String(c);Ee.window.showErrorMessage(`Error adding comment: ${u}`)}}}),Ee.commands.registerCommand("netezza.addColumnComment",async s=>{if(s&&s.label&&s.dbName&&s.parentName){let o=s.label.split(" ")[0],a=s.parentName,l=s.schema||"ADMIN",c=`${s.dbName}.${l}.${a}.${o}`,u=await Ee.window.showInputBox({prompt:`Enter comment for column "${o}"`,placeHolder:"e.g. Customer ID from CRM",value:s.objectDescription||""});if(u===void 0)return;let d=`COMMENT ON COLUMN ${c} IS '${Bb(u)}';`;try{if(!await Dr(n))return;await hn(e,d,!0,s.connectionName,n),Ee.window.showInformationMessage(`Comment added to column: ${o}`),i.refresh()}catch(E){let f=E instanceof Error?E.message:String(E);Ee.window.showErrorMessage(`Error adding comment: ${f}`)}}}),Ee.commands.registerCommand("netezza.truncateTable",async s=>{if(s&&s.label&&s.dbName&&s.schema&&s.objType==="TABLE"){let o=Hn(s),a=`TRUNCATE TABLE ${o};`;if(await Ee.window.showWarningMessage(`\u26A0\uFE0F WARNING: Are you sure you want to delete ALL data from the table "${o}"?

${a}

This operation is IRREVERSIBLE!`,{modal:!0},"Yes, delete all data","Cancel")==="Yes, delete all data"){if(!await Dr(n))return;try{await Kt(`Clearing table ${o}...`,async()=>{await hn(e,a,!0,s.connectionName,n)}),Ee.window.showInformationMessage(`Table cleared: ${o}`)}catch(c){let u=c instanceof Error?c.message:String(c);Ee.window.showErrorMessage(`Error clearing table: ${u}`)}}}}),Ee.commands.registerCommand("netezza.addPrimaryKey",async s=>{if(s&&s.label&&s.dbName&&s.schema&&s.objType==="TABLE"){let o=Hn(s),a=await Ee.window.showInputBox({prompt:"Enter primary key constraint name",placeHolder:`e.g. PK_${s.label}`,value:`PK_${s.label}`,validateInput:E=>!E||E.trim().length===0?"Constraint name cannot be empty":Tf(E)?null:"Invalid constraint name"});if(!a)return;let l=await Ee.window.showInputBox({prompt:"Enter primary key column names (comma separated)",placeHolder:"e.g. COL1, COL2 or ID",validateInput:E=>!E||E.trim().length===0?"You must provide at least one column":null});if(!l)return;let c=l.split(",").map(E=>E.trim().toUpperCase()).join(", "),u=`ALTER TABLE ${o} ADD CONSTRAINT ${a.trim().toUpperCase()} PRIMARY KEY (${c});`;if(await Ee.window.showInformationMessage(`Add primary key to table "${o}"?

${u}`,{modal:!0},"Yes, add","Cancel")==="Yes, add"){if(!await Dr(n))return;try{await Kt(`Adding primary key to ${o}...`,async()=>{await hn(e,u,!0,s.connectionName,n)}),Ee.window.showInformationMessage(`Primary key added: ${a.trim().toUpperCase()}`),i.refresh()}catch(E){let f=E instanceof Error?E.message:String(E);Ee.window.showErrorMessage(`Error adding primary key: ${f}`)}}}}),Ee.commands.registerCommand("netezza.addForeignKey",async s=>{if(s&&s.label&&s.dbName&&s.schema&&s.objType==="TABLE"){let o=Hn(s),a=await Ee.window.showInputBox({prompt:"Enter foreign key constraint name",placeHolder:`e.g. FK_${s.label}`,value:`FK_${s.label}`,validateInput:h=>!h||h.trim().length===0?"Constraint name cannot be empty":Tf(h)?null:"Invalid constraint name"});if(!a)return;let l=await Ee.window.showInputBox({prompt:"Enter foreign key column names (comma separated)",placeHolder:"e.g. COL1, COL2 or ID",validateInput:h=>!h||h.trim().length===0?"You must provide at least one column":null});if(!l)return;let c=await Ee.window.showInputBox({prompt:"Enter referenced table name (schema.table)",placeHolder:"e.g. SCHEMA_NAME.TABLE_NAME",validateInput:h=>!h||h.trim().length===0?"Referenced table name cannot be empty":null});if(!c)return;let u=await Ee.window.showInputBox({prompt:"Enter referenced table column names (comma separated)",placeHolder:"e.g. COL1, COL2 or ID",validateInput:h=>!h||h.trim().length===0?"You must provide at least one column":null});if(!u)return;let d=l.split(",").map(h=>h.trim().toUpperCase()).join(", "),E=u.split(",").map(h=>h.trim().toUpperCase()).join(", "),f=`ALTER TABLE ${o} ADD CONSTRAINT ${a.trim().toUpperCase()} FOREIGN KEY (${d}) REFERENCES ${c.trim().toUpperCase()} (${E});`;if(await Ee.window.showInformationMessage(`Add foreign key to table "${o}"?

${f}`,{modal:!0},"Yes, add","Cancel")==="Yes, add"){if(!await Dr(n))return;try{await Kt(`Adding foreign key to ${o}...`,async()=>{await hn(e,f,!0,s.connectionName,n)}),Ee.window.showInformationMessage(`Foreign key added: ${a.trim().toUpperCase()}`),i.refresh()}catch(h){let T=h instanceof Error?h.message:String(h);Ee.window.showErrorMessage(`Error adding foreign key: ${T}`)}}}}),Ee.commands.registerCommand("netezza.addUniqueConstraint",async s=>{if(s&&s.label&&s.dbName&&s.schema&&s.objType==="TABLE"){let o=Hn(s),a=await Ee.window.showInputBox({prompt:"Enter unique constraint name",placeHolder:`e.g. UQ_${s.label}`,value:`UQ_${s.label}`,validateInput:E=>!E||E.trim().length===0?"Constraint name cannot be empty":Tf(E)?null:"Invalid constraint name"});if(!a)return;let l=await Ee.window.showInputBox({prompt:"Enter unique constraint column names (comma separated)",placeHolder:"e.g. COL1, COL2 or EMAIL",validateInput:E=>!E||E.trim().length===0?"You must provide at least one column":null});if(!l)return;let c=l.split(",").map(E=>E.trim().toUpperCase()).join(", "),u=`ALTER TABLE ${o} ADD CONSTRAINT ${a.trim().toUpperCase()} UNIQUE (${c});`;if(await Ee.window.showInformationMessage(`Add unique constraint to table "${o}"?

${u}`,{modal:!0},"Yes, add","Cancel")==="Yes, add"){if(!await Dr(n))return;try{await Kt(`Adding unique constraint to ${o}...`,async()=>{await hn(e,u,!0,s.connectionName,n)}),Ee.window.showInformationMessage(`Unique constraint added: ${a.trim().toUpperCase()}`),i.refresh()}catch(E){let f=E instanceof Error?E.message:String(E);Ee.window.showErrorMessage(`Error adding unique constraint: ${f}`)}}}}),Ee.commands.registerCommand("netezza.changeOwner",async s=>{if(s&&s.label&&s.dbName&&s.schema&&s.objType==="TABLE"){let o=Hn(s),a=await Ee.window.showInputBox({prompt:"Enter new owner name",placeHolder:"e.g. USER_NAME or GROUP_NAME"});if(!a)return;let l=`ALTER TABLE ${o} OWNER TO ${a.trim()};`;try{if(!await Dr(n))return;await hn(e,l,!0,s.connectionName,n),Ee.window.showInformationMessage(`Owner changed to ${a} for ${o}`),r.invalidateSchema(s.connectionName,s.dbName,s.schema),i.refresh()}catch(c){let u=c instanceof Error?c.message:String(c);Ee.window.showErrorMessage(`Error changing owner: ${u}`)}}}),Ee.commands.registerCommand("netezza.renameTable",async s=>{if(s&&s.label&&s.dbName&&s.schema&&s.objType==="TABLE"){let o=Hn(s),a=await Ee.window.showInputBox({prompt:"Enter new table name",placeHolder:"NewTableName",value:s.label});if(!a||a===s.label)return;let l=`ALTER TABLE ${o} RENAME TO ${a.trim()};`;try{if(!await Dr(n))return;await hn(e,l,!0,s.connectionName,n),Ee.window.showInformationMessage(`Table renamed to ${a}`),r.invalidateSchema(s.connectionName,s.dbName,s.schema),i.refresh()}catch(c){let u=c instanceof Error?c.message:String(c);Ee.window.showErrorMessage(`Error renaming table: ${u}`)}}})]}var tt=Q(require("vscode"));pn();function Cj(t){let{context:e,connectionManager:n}=t;return[tt.commands.registerCommand("netezza.groomTable",async r=>{if(r&&r.label&&r.dbName&&r.schema&&r.objType==="TABLE"){let i=Hn(r),s=await tt.window.showQuickPick([{label:"RECORDS ALL",description:"Groom all records (reclaim space from deleted rows)"},{label:"RECORDS READY",description:"Groom only ready records"},{label:"PAGES ALL",description:"Groom all pages (reorganize data pages)"},{label:"PAGES START",description:"Groom pages from start"},{label:"VERSIONS",description:"Groom versions (clean up old row versions)"}],{placeHolder:"Select GROOM mode"});if(!s)return;let o=await tt.window.showQuickPick([{label:"DEFAULT",description:"Use default backupset",value:"DEFAULT"},{label:"NONE",description:"No backupset",value:"NONE"},{label:"Custom",description:"Specify custom backupset ID",value:"CUSTOM"}],{placeHolder:"Select RECLAIM BACKUPSET option"});if(!o)return;let a=o.value;if(o.value==="CUSTOM"){let u=await tt.window.showInputBox({prompt:"Enter backupset ID",placeHolder:"e.g. 12345",validateInput:d=>!d||d.trim().length===0?"Backupset ID cannot be empty":/^\d+$/.test(d.trim())?null:"Backupset ID must be a number"});if(!u)return;a=u.trim()}let l=`GROOM TABLE ${i} ${s.label} RECLAIM BACKUPSET ${a};`;if(await tt.window.showWarningMessage(`Execute GROOM on table "${i}"?

${l}

Warning: This operation may be time-consuming for large tables.`,{modal:!0},"Yes, execute","Cancel")==="Yes, execute")try{let u=Date.now();await Kt(`GROOM TABLE ${i} (${s.label})...`,async()=>{await hn(e,l,!0,r.connectionName,n)});let d=((Date.now()-u)/1e3).toFixed(1);tt.window.showInformationMessage(`GROOM completed successfully (${d}s): ${i}`)}catch(u){let d=u instanceof Error?u.message:String(u);tt.window.showErrorMessage(`Error during GROOM: ${d}`)}}}),tt.commands.registerCommand("netezza.generateStatistics",async r=>{if(r&&r.label&&r.dbName&&r.schema&&r.objType==="TABLE"){let i=Hn(r),s=`GENERATE EXPRESS STATISTICS ON ${i};`;if(await tt.window.showInformationMessage(`Generate statistics for table "${i}"?

${s}`,{modal:!0},"Yes, generate","Cancel")==="Yes, generate")try{let a=Date.now();await Kt(`Generating statistics for ${i}...`,async()=>{await hn(e,s,!0,r.connectionName,n)});let l=((Date.now()-a)/1e3).toFixed(1);tt.window.showInformationMessage(`Statistics generated successfully (${l}s): ${i}`)}catch(a){let l=a instanceof Error?a.message:String(a);tt.window.showErrorMessage(`Error generating statistics: ${l}`)}}}),tt.commands.registerCommand("netezza.checkSkew",async r=>{if(r&&r.label&&r.dbName&&r.schema&&r.objType==="TABLE"){let i=Hn(r),s=`SELECT datasliceid, count(*) as row_count FROM ${i} GROUP BY 1 ORDER BY 1;`;if(await tt.window.showInformationMessage(`Check skew for "${i}"?

This will run: ${s}

Note: This may be slow on very large tables.`,{modal:!0},"Yes, check skew","Cancel")==="Yes, check skew"){let a=await tt.workspace.openTextDocument({content:`-- Check Skew for ${i}
${s}`,language:"sql"});await tt.window.showTextDocument(a),tt.commands.executeCommand("netezza.runQuery")}}}),tt.commands.registerCommand("netezza.recreateTable",async r=>{if(!r||!r.label||!r.dbName||!r.schema||!r.objType||r.objType!=="TABLE"){tt.window.showErrorMessage("Invalid object selected for Recreate Table");return}let i=await n.getConnection(n.getActiveConnectionName()||"");if(!i){tt.window.showErrorMessage("Connection not configured. Please connect via Netezza: Connect...");return}let s=await tt.window.showInputBox({prompt:"Enter temporary table name (Optional)",placeHolder:"Leave empty to auto-generate timestamped name",value:""});if(s!==void 0)try{await Kt(`Generating Recreate Script for ${r.label}...`,async()=>{let{generateRecreateTableScript:o}=await Promise.resolve().then(()=>(Oj(),Nj)),a=await o(i,r.dbName,r.schema,r.label,s||void 0);if(a.success&&a.sqlScript){let l=await tt.workspace.openTextDocument({content:a.sqlScript,language:"sql"});await tt.window.showTextDocument(l),tt.window.showInformationMessage(`Recreate script generated for ${r.label}`)}else throw new Error(a.error||"Script generation failed")})}catch(o){let a=o instanceof Error?o.message:String(o);tt.window.showErrorMessage(`Error generating recreate script: ${a}`)}})]}var we=Q(require("vscode"));pn();function wj(t){let{context:e,connectionManager:n}=t;return[we.commands.registerCommand("netezza.createDDL",async r=>{try{if(!r||!r.label||!r.dbName||!r.schema||!r.objType){we.window.showErrorMessage("Invalid object selected for DDL generation");return}let i=await n.getConnection(n.getActiveConnectionName()||"");if(!i){we.window.showErrorMessage("Connection not configured. Please connect via Netezza: Connect...");return}await Kt(`Generating DDL for ${r.objType} ${r.label}...`,async()=>{let{generateDDL:s}=await Promise.resolve().then(()=>(Sf(),Fb)),o=await s(i,r.dbName,r.schema,r.label,r.objType);if(o.success&&o.ddlCode){let a=await we.window.showQuickPick([{label:"Open in Editor",description:"Open DDL code in a new editor",value:"editor"},{label:"Copy to Clipboard",description:"Copy DDL code to clipboard",value:"clipboard"}],{placeHolder:"How would you like to access the DDL code?"});if(a)if(a.value==="editor"){let l=await we.workspace.openTextDocument({content:o.ddlCode,language:"sql"});await we.window.showTextDocument(l),we.window.showInformationMessage(`DDL code generated for ${r.objType} ${r.label}`)}else a.value==="clipboard"&&(await we.env.clipboard.writeText(o.ddlCode),we.window.showInformationMessage("DDL code copied to clipboard"))}else throw new Error(o.error||"DDL generation failed")})}catch(i){let s=i instanceof Error?i.message:String(i);we.window.showErrorMessage(`Error generating DDL: ${s}`)}}),we.commands.registerCommand("netezza.compareSchema",async r=>{try{if(!r||!r.label||!r.dbName||!r.schema||!r.objType){we.window.showErrorMessage("Invalid object selected for comparison");return}let i=await n.getConnection(n.getActiveConnectionName()||"");if(!i){we.window.showErrorMessage("Connection not configured. Please connect via Netezza: Connect...");return}let s=r.objType,o=`${r.dbName}.${r.schema}.${r.label}`,a=[];if(await Kt(`Loading ${s}s for comparison...`,async()=>{let c=s==="PROCEDURE"?"OBJTYPE = 'PROCEDURE'":s==="VIEW"?"OBJTYPE = 'VIEW'":"OBJTYPE = 'TABLE'",u=s==="PROCEDURE"?`SELECT DISTINCT SCHEMA, PROCEDURESIGNATURE AS OBJNAME FROM ${r.dbName}.._V_PROCEDURE WHERE DATABASE = '${r.dbName.toUpperCase()}' ORDER BY SCHEMA, PROCEDURESIGNATURE`:`SELECT SCHEMA, OBJNAME FROM ${r.dbName}.._V_OBJECT_DATA WHERE DBNAME = '${r.dbName.toUpperCase()}' AND ${c} ORDER BY SCHEMA, OBJNAME`,d=await ue(e,u,!0,n,r.connectionName);if(d&&d.data&&d.data.length>0){let E=Te(d);for(let f of E){let p=f.OBJNAME,h=f.SCHEMA;`${r.dbName}.${h}.${p}`.toUpperCase()!==o.toUpperCase()&&a.push({label:p,description:`${r.dbName}.${h}`,db:r.dbName,schema:h,name:p})}}}),a.length===0){we.window.showWarningMessage(`No other ${s}s found to compare with.`);return}let l=await we.window.showQuickPick(a,{placeHolder:`Select ${s} to compare with ${r.label}`,matchOnDescription:!0});if(!l)return;await Kt(`Comparing ${r.label} with ${l.label}...`,async()=>{if(s==="PROCEDURE"){let{compareProcedures:c}=await Promise.resolve().then(()=>(Gb(),Hb)),{SchemaCompareView:u}=await Promise.resolve().then(()=>(kb(),Wb)),d=await c(i,r.dbName,r.schema,r.label,l.db,l.schema,l.name);u.createOrShow(e.extensionUri,d,"procedure")}else{let{compareTableStructures:c}=await Promise.resolve().then(()=>(Gb(),Hb)),{SchemaCompareView:u}=await Promise.resolve().then(()=>(kb(),Wb)),d=await c(i,r.dbName,r.schema,r.label,l.db,l.schema,l.name);u.createOrShow(e.extensionUri,d,"table")}}),we.window.showInformationMessage(`Comparison complete: ${r.label} \u2194 ${l.label}`)}catch(i){let s=i instanceof Error?i.message:String(i);we.window.showErrorMessage(`Error comparing objects: ${s}`)}}),we.commands.registerCommand("netezza.batchExportDDL",async r=>{try{if(!r||!r.contextValue){we.window.showErrorMessage("Invalid node selected for batch DDL export");return}let i=r.contextValue==="database",s=r.contextValue.startsWith("typeGroup:");if(!i&&!s){we.window.showErrorMessage("Batch DDL export is only available on database or object type nodes");return}let o=await n.getConnection(n.getActiveConnectionName()||"");if(!o){we.window.showErrorMessage("Connection not configured. Please connect via Netezza: Connect...");return}let a=r.dbName||r.label,l=s?[r.objType||r.contextValue.replace("typeGroup:","")]:void 0;await Kt(i?`Exporting all DDL for database ${a}...`:`Exporting ${l?.[0]} DDL for ${a}...`,async()=>{let{generateBatchDDL:c}=await Promise.resolve().then(()=>(Sf(),Fb)),u=await c({connectionDetails:o,database:a,objectTypes:l});if(u.success&&u.ddlCode){let d=await we.window.showQuickPick([{label:"Open in Editor",description:"Open DDL code in a new editor",value:"editor"},{label:"Save to File",description:"Save DDL code to a .sql file",value:"file"},{label:"Copy to Clipboard",description:"Copy DDL code to clipboard",value:"clipboard"}],{placeHolder:`${u.objectCount} objects found. How would you like to access the DDL code?`});if(d)if(d.value==="editor"){let E=await we.workspace.openTextDocument({content:u.ddlCode,language:"sql"});await we.window.showTextDocument(E),we.window.showInformationMessage(`DDL exported: ${u.objectCount} objects`)}else if(d.value==="file"){let E=i?`${a}_all_ddl.sql`:`${a}_${l?.[0]?.toLowerCase()||"objects"}_ddl.sql`,f=await we.window.showSaveDialog({defaultUri:we.Uri.file(E),filters:{"SQL Files":["sql"]}});f&&(await we.workspace.fs.writeFile(f,Buffer.from(u.ddlCode,"utf8")),we.window.showInformationMessage(`DDL saved to ${f.fsPath}`))}else d.value==="clipboard"&&(await we.env.clipboard.writeText(u.ddlCode),we.window.showInformationMessage(`DDL copied: ${u.objectCount} objects`));u.errors.length>0&&we.window.showWarningMessage(`Batch DDL completed with ${u.errors.length} error(s). Check the generated file for details.`)}else throw new Error(u.errors.join(", ")||"Batch DDL generation failed")})}catch(i){let s=i instanceof Error?i.message:String(i);we.window.showErrorMessage(`Error exporting DDL: ${s}`)}})]}var Er=Q(require("vscode"));pn();function Fj(t){let{context:e,connectionManager:n}=t;return[Er.commands.registerCommand("netezza.showERD",async r=>{try{if(!r||!r.contextValue||!r.contextValue.startsWith("typeGroup:")){Er.window.showErrorMessage("Please right-click on a TABLE type group to show ERD");return}let i=r.dbName||r.label,s=r.connectionName;if(!s){Er.window.showErrorMessage("No connection selected");return}let o=`SELECT DISTINCT SCHEMA FROM ${i}.._V_TABLE ORDER BY SCHEMA`,a=await ue(e,o,!0,n,s);if(!a||!a.data){Er.window.showErrorMessage("Could not retrieve schemas");return}let l=Te(a);if(l.length===0){Er.window.showWarningMessage("No tables found in this database");return}let c;if(l.length===1)c=l[0].SCHEMA;else{let E=l.map(p=>({label:p.SCHEMA,description:`${i}.${p.SCHEMA}`})),f=await Er.window.showQuickPick(E,{placeHolder:"Select schema to show ERD for"});if(!f)return;c=f.label}let u=0,d=0;await Kt(`Building ERD for ${i}.${c}...`,async E=>{let{buildERDData:f}=await Promise.resolve().then(()=>(xj(),Pj)),{ERDView:p}=await Promise.resolve().then(()=>(Mj(),vj)),h=await f(e,n,s,i,c,E);u=h.tables.length,d=h.relationships.length,p.createOrShow(e.extensionUri,h)}),Er.window.showInformationMessage(`ERD generated: ${u} tables, ${d} relationships`)}catch(i){let s=i instanceof Error?i.message:String(i);Er.window.showErrorMessage(`Error generating ERD: ${s}`)}}),Er.commands.registerCommand("netezza.showSessionMonitor",async()=>{try{if(!await Dr(n)){Er.window.showErrorMessage("Please connect to a Netezza database first.");return}let{SessionMonitorView:r}=await Promise.resolve().then(()=>(Bj(),Uj));r.createOrShow(e.extensionUri,e,n)}catch(r){let i=r instanceof Error?r.message:String(r);Er.window.showErrorMessage(`Error opening Session Monitor: ${i}`)}})]}var wt=Q(require("vscode"));pn();function Hj(t){let{context:e,connectionManager:n,metadataCache:r,schemaTreeView:i}=t;return[wt.commands.registerCommand("netezza.revealInSchema",async s=>{let o=wt.window.setStatusBarMessage(`$(loading~spin) Revealing ${s.name} in schema...`);try{let a,l=wt.window.activeTextEditor;if(l&&l.document.languageId==="sql"&&(a=n.getConnectionForExecution(l.document.uri.toString())),a||(a=s.connectionName),a||(a=n.getActiveConnectionName()||void 0),!a){o.dispose(),wt.window.showWarningMessage("No active connection. Please select a connection first.");return}let c=s.name,u=s.objType;if(u==="COLUMN"){if(!s.parent){o.dispose(),wt.window.showWarningMessage("Cannot find column without parent table");return}c=s.parent}if(s.database){let f=r.findObjectWithType(a,s.database,s.schema,c);if(f){let p=new tn(f.name,wt.TreeItemCollapsibleState.Collapsed,`netezza:${f.objType}`,s.database,f.objType,f.schema||s.schema,f.objId,void 0,a);await i.reveal(p,{select:!0,focus:!0,expand:!0}),o.dispose(),wt.window.setStatusBarMessage(`$(check) Found ${c} in ${s.database}.${f.schema||s.schema} (cached)`,3e3);return}else r.hasConnectionPrefetchTriggered(a)||r.triggerConnectionPrefetch(a,async p=>ue(e,p,!0,n,a))}if(!await n.getConnection(a)){o.dispose(),wt.window.showWarningMessage("Not connected to database and object not found in cache.");return}let E=s.database||await n.getCurrentDatabase(a);if(E){let f=u&&u!=="COLUMN"?`AND UPPER(OBJTYPE) = UPPER('${u}')`:"",p=s.schema?`AND UPPER(SCHEMA) = UPPER('${s.schema.replace(/'/g,"''")}')`:"",h=`
                        SELECT OBJNAME, OBJTYPE, SCHEMA, OBJID 
                        FROM ${E}.._V_OBJECT_DATA 
                        WHERE UPPER(OBJNAME) = UPPER('${c.replace(/'/g,"''")}') 
                        AND DBNAME = '${E}'
                        ${f}
                        ${p}
                        LIMIT 1
                    `;try{let T=await ue(e,h,!0,n,a);if(T&&T.data){let S=Te(T);if(S.length>0){let m=S[0];if(m.OBJTYPE==="PROCEDURE")try{let A=`SELECT PROCEDURESIGNATURE FROM ${E}.._V_PROCEDURE WHERE OBJID = ${m.OBJID}`,I=await ue(e,A,!0,n,a);if(I&&I.data&&I.data.length>0){let w=Te(I);w.length>0&&w[0].PROCEDURESIGNATURE&&(m.OBJNAME=w[0].PROCEDURESIGNATURE)}}catch(A){console.warn("Failed to resolve procedure signature:",A)}let R=new tn(m.OBJNAME,wt.TreeItemCollapsibleState.Collapsed,`netezza:${m.OBJTYPE}`,E,m.OBJTYPE,m.SCHEMA,m.OBJID,void 0,a);await i.reveal(R,{select:!0,focus:!0,expand:!0}),o.dispose(),wt.window.setStatusBarMessage(`$(check) Found ${c} in ${E}.${m.SCHEMA}`,3e3);return}}}catch(T){console.log(`Error searching in ${E}:`,T)}}if(!E){let f=await ue(e,"SELECT DATABASE FROM system.._v_database ORDER BY DATABASE",!0,n,a);if(f&&f.data){let p=Te(f);for(let h of p){let T=h.DATABASE;try{let S=s.schema?`AND UPPER(SCHEMA) = UPPER('${s.schema.replace(/'/g,"''")}')`:"",m=`
                                    SELECT OBJNAME, OBJTYPE, SCHEMA, OBJID 
                                    FROM ${T}.._V_OBJECT_DATA 
                                    WHERE UPPER(OBJNAME) = UPPER('${c.replace(/'/g,"''")}') 
                                    AND DBNAME = '${T}'
                                    ${S}
                                    LIMIT 1
                                `,R=await ue(e,m,!0,n,a);if(R&&R.data){let A=Te(R);if(A.length>0){let I=A[0];if(I.OBJTYPE==="PROCEDURE")try{let g=`SELECT PROCEDURESIGNATURE FROM ${T}.._V_PROCEDURE WHERE OBJID = ${I.OBJID}`,L=await ue(e,g,!0,n,a);if(L&&L.data&&L.data.length>0){let b=Te(L);b.length>0&&b[0].PROCEDURESIGNATURE&&(I.OBJNAME=b[0].PROCEDURESIGNATURE)}}catch(g){console.warn("Failed to resolve procedure signature:",g)}let w=new tn(I.OBJNAME,wt.TreeItemCollapsibleState.Collapsed,`netezza:${I.OBJTYPE}`,T,I.OBJTYPE,I.SCHEMA,I.OBJID,void 0,a);await i.reveal(w,{select:!0,focus:!0,expand:!0}),o.dispose(),wt.window.setStatusBarMessage(`$(check) Found ${c} in ${T}.${I.SCHEMA}`,3e3);return}}}catch(S){console.log(`Error searching in ${T}:`,S)}}}}o.dispose(),wt.window.showWarningMessage(`Could not find ${u||"object"} ${c}`)}catch(a){o.dispose();let l=a instanceof Error?a.message:String(a);wt.window.showErrorMessage(`Error revealing item: ${l}`)}}),wt.commands.registerCommand("netezza.showQueryHistory",()=>{wt.commands.executeCommand("netezza.queryHistory.focus")}),wt.commands.registerCommand("netezza.clearQueryHistory",async()=>{let{QueryHistoryManager:s}=await Promise.resolve().then(()=>(sE(),y0)),o=new s(e);await wt.window.showWarningMessage("Are you sure you want to clear all query history?",{modal:!0},"Clear All")==="Clear All"&&(await o.clearHistory(),wt.window.showInformationMessage("Query history cleared"))})]}function uR(t){return[...Ij(t),..._j(t),...Cj(t),...wj(t),...Fj(t),...Hj(t)]}var te=Q(require("vscode")),Jb=Q(require("path")),Af=Q(require("os"));function Rf(t,e,n){let r=Date.now()-n;t.appendLine(`[${new Date().toLocaleTimeString()}] ${e} completed in ${r}ms`),t.show(!0)}function zj(t){let{connectionManager:e,outputChannel:n}=t;return[te.commands.registerCommand("netezza.exportToXlsb",async()=>{let r=te.window.activeTextEditor;if(!r){te.window.showErrorMessage("No active editor found");return}let i=r.selection,s=i.isEmpty?r.document.getText():r.document.getText(i);if(!s.trim()){te.window.showWarningMessage("No SQL query to export");return}let o=await te.window.showSaveDialog({filters:{"Excel Binary Workbook":["xlsb"]},saveLabel:"Export to XLSB"});if(!o)return;let a=Date.now();try{let l=r.document.uri.toString(),c=e.getConnectionForExecution(l),u=await e.getConnection(c||"");if(!u)throw new Error("Connection not configured. Please connect via Netezza: Connect...");await te.window.withProgress({location:te.ProgressLocation.Notification,title:"Exporting to XLSB...",cancellable:!0},async(d,E)=>{let{exportQueryToXlsb:f}=await Promise.resolve().then(()=>(xi(),As)),p=await f(u,s,o.fsPath,!1,h=>{d.report({message:h}),n.appendLine(`[XLSB Export] ${h}`)},void 0,E);if(!p.success)throw new Error(p.message)}),Rf(n,"Export to XLSB",a),te.window.showInformationMessage(`Results exported to ${o.fsPath}`)}catch(l){let c=l instanceof Error?l.message:String(l);te.window.showErrorMessage(`Error exporting to XLSB: ${c}`)}}),te.commands.registerCommand("netezza.exportToCsv",async()=>{let r=te.window.activeTextEditor;if(!r){te.window.showErrorMessage("No active editor found");return}let i=r.selection,s=i.isEmpty?r.document.getText():r.document.getText(i);if(!s.trim()){te.window.showWarningMessage("No SQL query to export");return}let o=await te.window.showSaveDialog({filters:{"CSV Files":["csv"]},saveLabel:"Export to CSV"});if(!o)return;let a=Date.now();try{let l=r.document.uri.toString(),c=e.getConnectionForExecution(l),u=await e.getConnection(c||"");if(!u)throw new Error("Connection not configured. Please connect via Netezza: Connect...");await te.window.withProgress({location:te.ProgressLocation.Notification,title:"Exporting to CSV...",cancellable:!0},async(d,E)=>{let{exportToCsv:f}=await Promise.resolve().then(()=>(vA(),J0));await f(u,s,o.fsPath,d,void 0,E)}),Rf(n,"Export to CSV",a),te.window.showInformationMessage(`Results exported to ${o.fsPath}`)}catch(l){let c=l instanceof Error?l.message:String(l);te.window.showErrorMessage(`Error exporting to CSV: ${c}`)}}),te.commands.registerCommand("netezza.copyXlsbToClipboard",async()=>{let r=te.window.activeTextEditor;if(!r){te.window.showErrorMessage("No active editor found");return}let i=r.selection,s=i.isEmpty?r.document.getText():r.document.getText(i);if(!s.trim()){te.window.showWarningMessage("No SQL query to export");return}try{let o=r.document.uri.toString(),a=e.getConnectionForExecution(o),l=await e.getConnection(a||"");if(!l)throw new Error("Connection not configured. Please connect via Netezza: Connect...");let c=Date.now();if(await te.window.withProgress({location:te.ProgressLocation.Notification,title:"Exporting to XLSB and copying to clipboard...",cancellable:!0},async(d,E)=>{let{exportQueryToXlsb:f,getTempFilePath:p}=await Promise.resolve().then(()=>(xi(),As)),h=p(),T=await f(l,s,h,!0,S=>{d.report({message:S}),n.appendLine(`[XLSB Clipboard] ${S}`)},void 0,E);if(!T.success)throw new Error(T.message);if(!T.details?.clipboard_success)throw new Error("Failed to copy file to clipboard")}),Rf(n,"Copy XLSB to Clipboard",c),await te.window.showInformationMessage("Excel file copied to clipboard! You can now paste it into Excel or Windows Explorer.","Show Temp Folder","OK")==="Show Temp Folder"){let d=Af.tmpdir();await te.env.openExternal(te.Uri.file(d))}}catch(o){let a=o instanceof Error?o.message:String(o);te.window.showErrorMessage(`Error copying XLSB to clipboard: ${a}`)}}),te.commands.registerCommand("netezza.exportToXlsbAndOpen",async()=>{let r=te.window.activeTextEditor;if(!r){te.window.showErrorMessage("No active editor found");return}let i=r.selection,s=i.isEmpty?r.document.getText():r.document.getText(i);if(!s.trim()){te.window.showWarningMessage("No SQL query to export");return}let o=await te.window.showSaveDialog({filters:{"Excel Binary Workbook":["xlsb"]},saveLabel:"Export to XLSB and Open"});if(!o)return;let a=Date.now();try{let l=r.document.uri.toString(),c=e.getConnectionForExecution(l),u=await e.getConnection(c||"");if(!u)throw new Error("Connection not configured. Please connect via Netezza: Connect...");await te.window.withProgress({location:te.ProgressLocation.Notification,title:"Exporting to XLSB and opening...",cancellable:!0},async(d,E)=>{let{exportQueryToXlsb:f}=await Promise.resolve().then(()=>(xi(),As)),p=await f(u,s,o.fsPath,!1,h=>{d.report({message:h}),n.appendLine(`[XLSB Export] ${h}`)},void 0,E);if(!p.success)throw new Error(p.message)}),Rf(n,"Export to XLSB and Open",a),await te.env.openExternal(o),te.window.showInformationMessage(`Results exported and opened: ${o.fsPath}`)}catch(l){let c=l instanceof Error?l.message:String(l);te.window.showErrorMessage(`Error exporting to XLSB: ${c}`)}}),te.commands.registerCommand("netezza.exportCurrentResultToXlsbAndOpen",async(r,i)=>{try{if(!r||Array.isArray(r)&&r.length===0){te.window.showErrorMessage("No data to export");return}let s=r;if(Array.isArray(r)&&r.length>1){let u=await te.window.showQuickPick(["Export All Results","Export Active Result Only"],{placeHolder:"Multiple results available. What would you like to export?"});if(!u)return;if(u==="Export Active Result Only"){let d=r.find(E=>E.isActive);d?s=[d]:s=[r[0]]}}let o=new Date().toISOString().replace(/[:.]/g,"-"),a=Jb.join(Af.tmpdir(),`netezza_results_${o}.xlsb`),l=Date.now();await te.window.withProgress({location:te.ProgressLocation.Notification,title:"Creating Excel file...",cancellable:!0},async u=>{if(Array.isArray(s)&&s.length>0&&"columns"in s[0]&&"rows"in s[0]){let{exportStructuredToXlsb:E}=await Promise.resolve().then(()=>(xi(),As)),f=await E(s,a,!1,p=>{u.report({message:p}),n.appendLine(`[Structured to XLSB] ${p}`)});if(!f.success)throw new Error(f.message)}else{let{exportCsvToXlsb:E}=await Promise.resolve().then(()=>(xi(),As)),f=await E(s,a,!1,{source:"Query Results Panel",sql:i},p=>{u.report({message:p}),n.appendLine(`[CSV to XLSB] ${p}`)});if(!f.success)throw new Error(f.message)}});let c=Date.now()-l;n.appendLine(`[${new Date().toLocaleTimeString()}] Export Current Result to Excel completed in ${c}ms`),await te.env.openExternal(te.Uri.file(a)),te.window.showInformationMessage(`Results exported and opened: ${a}`)}catch(s){let o=s instanceof Error?s.message:String(s);te.window.showErrorMessage(`Error exporting to Excel: ${o}`)}}),te.commands.registerCommand("netezza.copyCurrentResultToXlsbClipboard",async(r,i)=>{try{if(!r||Array.isArray(r)&&r.length===0){te.window.showErrorMessage("No data to copy");return}let s=r;if(Array.isArray(r)&&r.length>1){let u=await te.window.showQuickPick(["Export All Results","Export Active Result Only"],{placeHolder:"Multiple results available. What would you like to export?"});if(!u)return;if(u==="Export Active Result Only"){let d=r.find(E=>E.isActive);d?s=[d]:s=[r[0]]}}let{getTempFilePath:o}=await Promise.resolve().then(()=>(xi(),As)),a=o(),l=Date.now();if(await te.window.withProgress({location:te.ProgressLocation.Notification,title:"Copying to clipboard as Excel...",cancellable:!0},async u=>{if(Array.isArray(s)&&s.length>0&&"columns"in s[0]&&"rows"in s[0]){let{exportStructuredToXlsb:E}=await Promise.resolve().then(()=>(xi(),As)),f=await E(s,a,!0,p=>{u.report({message:p}),n.appendLine(`[Clipboard Structured XLSB] ${p}`)});if(!f.success)throw new Error(f.message)}else{let{exportCsvToXlsb:E}=await Promise.resolve().then(()=>(xi(),As)),f=await E(s,a,!0,{source:"Query Results Panel",sql:i},p=>{u.report({message:p}),n.appendLine(`[Clipboard XLSB] ${p}`)});if(!f.success)throw new Error(f.message)}}),Rf(n,"Copy Result as Excel",l),await te.window.showInformationMessage("Excel file copied to clipboard! You can now paste it into Excel or Windows Explorer.","Show Temp Folder","OK")==="Show Temp Folder"){let u=Af.tmpdir();await te.env.openExternal(te.Uri.file(u))}}catch(s){let o=s instanceof Error?s.message:String(s);te.window.showErrorMessage(`Error copying to Excel: ${o}`)}}),te.commands.registerCommand("netezza.exportCurrentResultToXlsxAndOpen",async(r,i)=>{try{if(!r||Array.isArray(r)&&r.length===0){te.window.showErrorMessage("No data to export");return}let s=r;if(Array.isArray(r)&&r.length>1){let u=await te.window.showQuickPick(["Export All Results","Export Active Result Only"],{placeHolder:"Multiple results available. What would you like to export?"});if(!u)return;if(u==="Export Active Result Only"){let d=r.find(E=>E.isActive);d?s=[d]:s=[r[0]]}}let o=new Date().toISOString().replace(/[:.]/g,"-"),a=Jb.join(Af.tmpdir(),`netezza_results_${o}.xlsx`),l=Date.now();await te.window.withProgress({location:te.ProgressLocation.Notification,title:"Creating Excel XLSX file...",cancellable:!0},async u=>{if(Array.isArray(s)&&s.length>0&&"columns"in s[0]&&"rows"in s[0]){let{exportStructuredToXlsx:E}=await Promise.resolve().then(()=>(Kb(),jb)),f=await E(s,a,!1,p=>{u.report({message:p}),n.appendLine(`[Structured to XLSX] ${p}`)});if(!f.success)throw new Error(f.message)}else{let{exportCsvToXlsx:E}=await Promise.resolve().then(()=>(Kb(),jb)),f=await E(s,a,!1,{source:"Query Results Panel",sql:i},p=>{u.report({message:p}),n.appendLine(`[CSV to XLSX] ${p}`)});if(!f.success)throw new Error(f.message)}});let c=Date.now()-l;n.appendLine(`[${new Date().toLocaleTimeString()}] Export Current Result to XLSX completed in ${c}ms`),await te.env.openExternal(te.Uri.file(a)),te.window.showInformationMessage(`Results exported and opened: ${a}`)}catch(s){let o=s instanceof Error?s.message:String(s);te.window.showErrorMessage(`Error exporting to Excel XLSX: ${o}`)}})]}var Le=Q(require("vscode")),r6=Q(require("path"));pn();function t6(t,e,n){let r=Date.now()-n;t.appendLine(`[${new Date().toLocaleTimeString()}] ${e} completed in ${r}ms`),t.show(!0)}async function n6(t,e,n){try{let i=await ue(t,"SELECT CURRENT_CATALOG, CURRENT_SCHEMA",!0,n,e);if(i&&i.data){let s=Te(i);if(s&&s.length>0){let o=s[0].CURRENT_CATALOG||"SYSTEM",a=s[0].CURRENT_SCHEMA||"ADMIN",c=new Date().toISOString().slice(0,10).replace(/-/g,""),u=Math.floor(Math.random()*1e4).toString().padStart(4,"0");return`${o}.${a}.IMPORT_${c}_${u}`}}}catch(r){Le.window.showErrorMessage(`Error getting current database/schema: ${r instanceof Error?r.message:String(r)}`)}return null}function i6(t){let{context:e,connectionManager:n,outputChannel:r}=t;return[Le.commands.registerCommand("netezza.importClipboard",async()=>{try{let s=Le.window.activeTextEditor?.document?.uri?.toString(),o=n.getConnectionForExecution(s),a=await n.getConnection(o||"");if(!a)throw new Error("Connection not configured. Please connect via Netezza: Connect...");let l=await Le.window.showInputBox({prompt:"Enter target table name (leave empty for auto-generated name)",placeHolder:"e.g. my_schema.my_table or leave empty",validateInput:E=>!E||E.trim().length===0||/^[a-zA-Z_][a-zA-Z0-9_]*(\.[a-zA-Z_][a-zA-Z0-9_]*)?(\.[a-zA-Z_][a-zA-Z0-9_]*)?$/.test(E.trim())?null:"Invalid table name format. Use: [database.]schema.table"});if(l===void 0)return;let c;if(!l||l.trim().length===0){let E=await n6(e,o,n);if(!E)return;c=E,Le.window.showInformationMessage(`Auto-generated table name: ${c}`)}else c=l.trim();let u=await Le.window.showQuickPick([{label:"Auto-detect",description:"Automatically detect clipboard format (text or Excel XML)",value:null},{label:"Excel XML Spreadsheet",description:"Force Excel XML format processing",value:"XML Spreadsheet"},{label:"Plain Text",description:"Force plain text processing with delimiter detection",value:"TEXT"}],{placeHolder:"Select clipboard data format"});if(!u)return;let d=Date.now();await Le.window.withProgress({location:Le.ProgressLocation.Notification,title:"Importing clipboard data...",cancellable:!1},async E=>{let{importClipboardDataToNetezza:f}=await Promise.resolve().then(()=>(e6(),Zj)),p="",h=await f(c,a,u.value,{},(T,S,m=!0)=>{E.report({message:T,increment:S}),m&&T!==p&&(r.appendLine(`[Clipboard Import] ${T}`),p=T)});if(!h.success)throw new Error(h.message);h.details&&(r.appendLine(`[Clipboard Import] Rows processed: ${h.details.rowsProcessed}`),r.appendLine(`[Clipboard Import] Columns: ${h.details.columns}`),r.appendLine(`[Clipboard Import] Format: ${h.details.format}`))}),t6(r,"Import Clipboard Data",d),Le.window.showInformationMessage(`Clipboard data imported successfully to table: ${c}`,"Copy Table Name").then(E=>{E==="Copy Table Name"&&(Le.env.clipboard.writeText(c),Le.window.showInformationMessage("Table name copied to clipboard"))})}catch(i){Le.window.showErrorMessage(`Error importing clipboard data: ${i instanceof Error?i.message:String(i)}`)}}),Le.commands.registerCommand("netezza.importData",async()=>{try{let s=Le.window.activeTextEditor?.document?.uri?.toString(),o=n.getConnectionForExecution(s),a=await n.getConnection(o||"");if(!a)throw new Error("Connection not configured. Please connect via Netezza: Connect...");let l=await Le.window.showOpenDialog({canSelectFiles:!0,canSelectFolders:!1,canSelectMany:!1,filters:{"Data Files":["csv","txt","xlsx","xlsb","json"],"CSV Files":["csv"],"Excel Files":["xlsx","xlsb"],"Text Files":["txt"],"JSON Files":["json"],"All Files":["*"]},openLabel:"Select file to import"});if(!l||l.length===0)return;let c=l[0].fsPath,u=await Le.window.showInputBox({prompt:"Enter target table name (leave empty for auto-generated name)",placeHolder:"e.g. my_schema.my_table or leave empty",validateInput:p=>!p||p.trim().length===0||/^[a-zA-Z_][a-zA-Z0-9_]*(\.[a-zA-Z_][a-zA-Z0-9_]*)?(\.[a-zA-Z_][a-zA-Z0-9_]*)?$/.test(p.trim())?null:"Invalid table name format. Use: [database.]schema.table"});if(u===void 0)return;let d;if(!u||u.trim().length===0){let p=await n6(e,o,n);if(!p)return;d=p,Le.window.showInformationMessage(`Auto-generated table name: ${d}`)}else d=u.trim();let E=await Le.window.showQuickPick([{label:"Default Import",description:"Use default settings",value:{}},{label:"Custom Options",description:"Configure import settings (coming soon)",value:null}],{placeHolder:"Select import options"});if(!E)return;if(E.value===null){Le.window.showInformationMessage("Custom options will be available in future version");return}let f=Date.now();await Le.window.withProgress({location:Le.ProgressLocation.Notification,title:"Importing data...",cancellable:!1},async p=>{let{importDataToNetezza:h}=await Promise.resolve().then(()=>($S(),rj)),T="",S=await h(c,d,a,(m,R,A=!0)=>{p.report({message:m,increment:R}),A&&m!==T&&(r.appendLine(`[Import] ${m}`),T=m)});if(!S.success)throw new Error(S.message);S.details&&(r.appendLine(`[Import] Rows processed: ${S.details.rowsProcessed}`),r.appendLine(`[Import] Columns: ${S.details.columns}`),r.appendLine(`[Import] Delimiter: ${S.details.detectedDelimiter}`))}),t6(r,"Import Data",f),Le.window.showInformationMessage(`Data imported successfully to table: ${d}`,"Copy Table Name").then(p=>{p==="Copy Table Name"&&(Le.env.clipboard.writeText(d),Le.window.showInformationMessage("Table name copied to clipboard"))})}catch(i){Le.window.showErrorMessage(`Error importing data: ${i instanceof Error?i.message:String(i)}`)}}),Le.commands.registerCommand("netezza.smartPaste",async()=>{try{let i=Le.window.activeTextEditor;if(!i)return;let o=Le.workspace.getConfiguration("netezza").get("pythonPath")||"python",a=r6.join(e.extensionPath,"python","check_clipboard_format.py"),l=require("child_process");if(await new Promise(u=>{let d=l.spawn(o,[a]);d.on("close",E=>{u(E===1)}),d.on("error",()=>{u(!1)})})){let u=await Le.window.showQuickPick([{label:"\u{1F4CA} import to Netezza table",description:'Detected "XML Spreadsheet" format - import data to database',value:"import"},{label:"\u{1F4DD} Paste as text",description:"Paste clipboard content as plain text",value:"paste"}],{placeHolder:'Detected "XML Spreadsheet" format in clipboard - choose an action'});if(u?.value==="import")Le.commands.executeCommand("netezza.importClipboard");else if(u?.value==="paste"){let d=await Le.env.clipboard.readText(),E=i.selection;await i.edit(f=>{f.replace(E,d)})}}else{let u=await Le.env.clipboard.readText(),d=i.selection;await i.edit(E=>{E.replace(d,u)})}}catch(i){Le.window.showErrorMessage(`Error during paste: ${i instanceof Error?i.message:String(i)}`)}})]}var oe=Q(require("vscode"));pn();mo();function Zb(t){return t&&(t.includes(" ")?`"${t.replace(/"/g,'\\"')}"`:t)}function Cs(t,e,n){let i=/[ \\/]/.test(t)?`& ${Zb(t)}`:t,s=Zb(e),o=n.map(a=>Zb(a)).join(" ");return`${i} ${s}${o?" "+o:""}`.trim()}function o4(t){let{context:e,connectionManager:n,resultPanelProvider:r}=t;return[oe.commands.registerCommand("netezza.cancelQuery",async(i,s)=>{let o=typeof i=="string"?i:i?.toString();if(!o){let a=oe.window.activeTextEditor;a&&(o=a.document.uri.toString())}if(o){console.log(`[netezza.cancelQuery] Cancelling: ${o}`),r.cancelExecution(o,s);try{await gA(o)}catch(a){console.error("[netezza.cancelQuery] Backend cancel failed:",a)}}else{let a=r.getActiveSource();a?(console.log(`[netezza.cancelQuery] No URI provided, falling back to active source: ${a}`),r.cancelExecution(a,s),await gA(a)):oe.window.showWarningMessage("No active query to cancel.")}}),oe.commands.registerCommand("netezza.runQuery",async()=>{let i=oe.window.activeTextEditor;if(!i){oe.window.showErrorMessage("No active editor found");return}let s=i.document,o=i.selection,a=s.getText(),l=s.uri.toString(),c=[];if(o.isEmpty){let d=s.offsetAt(o.active),E=Gn.getStatementAtPosition(a,d);if(E){c=[E.sql];let f=s.positionAt(E.start),p=s.positionAt(E.end);i.selection=new oe.Selection(f,p)}else{oe.window.showWarningMessage("No SQL statement found at cursor");return}}else{let d=s.getText(o);if(!d.trim()){oe.window.showWarningMessage("No SQL query selected");return}/^\s*CREATE\s+(OR\s+REPLACE\s+)?PROCEDURE\b/i.test(d)?c=[d]:c=Gn.splitStatements(d).filter(E=>E.trim().length>0)}if(c.length===0)return;let u=c.length===1?c[0].trim():null;if(u){let d=u.split(/\s+/),E=d[0]||"",f=/python(\.exe)?$/i.test(E)&&d.length>=2&&d[1].toLowerCase().endsWith(".py"),p=E.toLowerCase().endsWith(".py");if(f||p){let T=oe.workspace.getConfiguration("netezza").get("pythonPath")||"python",S="";if(f){let R=d[0],A=d[1],I=d.slice(2);S=Cs(R,A,I)}else{let R=E,A=d.slice(1);S=Cs(T,R,A)}let m=oe.window.createTerminal({name:"Netezza: Script"});m.show(!0),m.sendText(S,!0),oe.window.showInformationMessage(`Running script: ${S}`);return}}try{r.startExecution(l);let d=oe.workspace.getConfiguration("netezza"),E=d.get("enableStreaming",!1),f=d.get("streamingChunkSize",5e3);await oe.window.withProgress({location:oe.ProgressLocation.Notification,title:`Executing SQL for ${l.split(/[\\/]/).pop()}...`,cancellable:!1},async p=>{let h=r.onDidCancel(T=>{T===l&&p.report({message:"Cancelling query..."})});try{E?await v0(e,c,n,l,T=>r.log(l,T),(T,S,m)=>{r.appendStreamingChunk(l,T,S,m)},f):await Zc(e,c,n,l,T=>r.log(l,T),T=>r.updateResults(T,l,!0))}finally{h.dispose()}}),r.finalizeExecution(l),oe.commands.executeCommand("netezza.results.focus")}catch(d){let E=d instanceof Error?d.message:String(d);if(E.includes("Query cancelled")){r.log(l,"Query execution cancelled by user."),r.finalizeExecution(l);return}r.log(l,`Error: ${E}`),r.updateResults([{columns:[],data:[],message:E,isError:!0,sql:c.length===1?c[0]:void 0}],l,!0),r.finalizeExecution(l),oe.window.showErrorMessage(`Error executing query: ${E}`)}}),oe.commands.registerCommand("netezza.runQueryBatch",async()=>{let i=oe.window.activeTextEditor;if(!i){oe.window.showErrorMessage("No active editor found");return}let s=i.document,o=i.selection,a=s.uri.toString(),l;if(o.isEmpty?l=s.getText():l=s.getText(o),!l.trim()){oe.window.showWarningMessage("No SQL query to execute");return}let u=l.trim().split(/\s+/),d=u[0]||"",E=/python(\.exe)?$/i.test(d)&&u.length>=2&&u[1].toLowerCase().endsWith(".py"),f=d.toLowerCase().endsWith(".py");if(E||f){let h=oe.workspace.getConfiguration("netezza").get("pythonPath")||"python",T="";if(E){let m=u[0],R=u[1],A=u.slice(2);T=Cs(m,R,A)}else{let m=d,R=u.slice(1);T=Cs(h,m,R)}let S=oe.window.createTerminal({name:"Netezza: Script"});S.show(!0),S.sendText(T,!0),oe.window.showInformationMessage(`Running script: ${T}`);return}try{r.startExecution(a),await oe.window.withProgress({location:oe.ProgressLocation.Notification,title:`Executing batch SQL for ${a.split(/[\\/]/).pop()}...`,cancellable:!1},async()=>{await Zc(e,[l],n,a,p=>r.log(a,p),p=>r.updateResults(p,a,!0))}),r.finalizeExecution(a),oe.commands.executeCommand("netezza.results.focus")}catch(p){let h=p instanceof Error?p.message:String(p);if(h.includes("Query cancelled")){r.log(a,"Query execution cancelled by user."),r.finalizeExecution(a);return}r.log(a,`Error: ${h}`),r.updateResults([{columns:[],data:[],message:h,isError:!0,sql:l}],a,!0),r.finalizeExecution(a),oe.window.showErrorMessage(`Error executing query: ${h}`)}}),oe.commands.registerCommand("netezza.explainQuery",async()=>{await s4(e,n,!1)}),oe.commands.registerCommand("netezza.explainQueryVerbose",async()=>{await s4(e,n,!0)}),oe.commands.registerCommand("netezza.formatSQL",async()=>{let i=oe.window.activeTextEditor;if(!i){oe.window.showErrorMessage("No active editor");return}if(i.document.languageId!=="sql"&&i.document.languageId!=="mssql"){oe.window.showWarningMessage("Format SQL is only available for SQL files");return}let s=oe.workspace.getConfiguration("netezza"),o=s.get("formatSQL.tabWidth",4),a=s.get("formatSQL.keywordCase","upper"),l=i.selection,c=l.isEmpty?i.document.getText():i.document.getText(l);try{let{format:u}=await Promise.resolve().then(()=>(QK(),JK)),d="__NZ_DOUBLE_DOT__",E=c.replace(/\.\.(?=[a-zA-Z_])/g,`.${d}.`),p=u(E,{language:"sql",tabWidth:o,keywordCase:a,linesBetweenQueries:2}).replace(new RegExp(`\\.\\s*${d}\\s*\\.`,"g"),"..");await i.edit(h=>{if(l.isEmpty){let T=new oe.Range(i.document.positionAt(0),i.document.positionAt(i.document.getText().length));h.replace(T,p)}else h.replace(l,p)}),oe.window.showInformationMessage("SQL formatted successfully")}catch(u){let d=u instanceof Error?u.message:String(u);d.includes("Parse error")?oe.window.showErrorMessage("SQL formatting failed: The SQL contains syntax not supported by the formatter. Try selecting a simpler portion of the SQL to format."):oe.window.showErrorMessage(`Format SQL failed: ${d}`)}})]}async function s4(t,e,n){let r=oe.window.activeTextEditor;if(!r){oe.window.showErrorMessage("No active editor found");return}let i=r.document,s=r.selection,o;if(!s.isEmpty)o=i.getText(s);else{let c=r.selection.active,u=i.offsetAt(c),d=i.getText(),E=Gn.getStatementAtPosition(d,u);E?o=d.substring(E.start,E.end):o=i.getText()}if(!o.trim()){oe.window.showWarningMessage("No SQL query to explain");return}let a=o.trim();a.toUpperCase().startsWith("EXPLAIN")&&(a=a.replace(/^EXPLAIN\s+(?:VERBOSE\s+)?/i,""));let l=n?`EXPLAIN VERBOSE ${a}`:`EXPLAIN ${a}`;try{let c=i.uri.toString(),u=e.getConnectionForExecution(c);if(!u){oe.window.showErrorMessage("No database connection. Please connect first.");return}await oe.window.withProgress({location:oe.ProgressLocation.Notification,title:"Generating query plan...",cancellable:!1},async()=>{let d=await x0(t,l,u,e,c);if(d&&d.trim()){let{parseExplainOutput:E,ExplainPlanView:f}=await Promise.resolve().then(()=>(i4(),r4)),p=E(d);f.createOrShow(t.extensionUri,p,a)}else oe.window.showWarningMessage("No explain output received")})}catch(c){let u=c instanceof Error?c.message:String(c);oe.window.showErrorMessage(`Error generating query plan: ${u}`)}}var Hi=Q(require("vscode"));function bf(t,e){let n=Hi.window.activeTextEditor,r=!1,i=!1;if(n&&n.document.languageId==="sql"){let o=n.document.uri.toString();r=e.getDocumentKeepConnectionOpen(o),i=e.hasDocumentKeepConnectionOpen(o)}else r=e.getKeepConnectionOpen();let s=i?"\u{1F4CC} ":"";t.text=r?`${s}\u{1F517} Keep ON`:`${s}\u26D3\uFE0F\u200D\u{1F4A5} Keep OFF`,t.tooltip=r?`Keep Connection: ENABLED${i?" (per-tab)":""} - Click to toggle for current tab`:`Keep Connection: DISABLED${i?" (per-tab)":""} - Click to toggle for current tab`,t.backgroundColor=r?new Hi.ThemeColor("statusBarItem.prominentBackground"):void 0,n&&n.document.languageId==="sql"?t.show():t.hide()}function a4(t,e){let n=Hi.window.createStatusBarItem(Hi.StatusBarAlignment.Right,100);return n.command="netezza.toggleKeepConnectionForTab",bf(n,e),t.subscriptions.push(n),n}function l4(t,e){let n=Hi.window.createStatusBarItem(Hi.StatusBarAlignment.Left,100);return n.command="netezza.selectConnectionForTab",n.tooltip="Click to select connection for this SQL tab",t.subscriptions.push(n),{statusBarItem:n,updateFn:()=>{let i=Hi.window.activeTextEditor;if(i&&i.document.languageId==="sql"){let s=i.document.uri.toString(),o=e.getConnectionForExecution(s);o?(n.text=`$(database) ${o}`,n.show()):(n.text="$(database) Select Connection",n.show())}else n.hide()}}}var nt=Q(require("vscode"));mo();var c4=/(^|\s)(?:[A-Za-z]:\\|\\|\/)?[\w.\-\\/]+\.py\b|(^|\s)python(?:\.exe)?\s+[^\n]*\.py\b/i,qR=class{constructor(){this._onDidChange=new nt.EventEmitter;this.onDidChangeCodeLenses=this._onDidChange.event}provideCodeLenses(e){let n=[];for(let r=0;r<e.lineCount;r++){let i=e.lineAt(r);if(c4.test(i.text)){let s=i.range,o={title:"Run as script",command:"netezza.runScriptFromLens",arguments:[e.uri,s]};n.push(new nt.CodeLens(s,o))}}return n}refresh(){this._onDidChange.fire()}};function u4(){return nt.window.createTextEditorDecorationType({backgroundColor:new nt.ThemeColor("editor.rangeHighlightBackground"),borderRadius:"3px"})}function d4(){return nt.window.createTextEditorDecorationType({backgroundColor:"rgba(5, 115, 201, 0.10)",isWholeLine:!1,rangeBehavior:nt.DecorationRangeBehavior.ClosedClosed})}function sw(t,e){let n=e||nt.window.activeTextEditor;if(!n)return;let r=n.document,i=[];for(let s=0;s<r.lineCount;s++){let o=r.lineAt(s);c4.test(o.text)&&i.push({range:o.range,hoverMessage:"Python script invocation"})}n.setDecorations(t,i)}function VR(t,e){if(!nt.workspace.getConfiguration("netezza").get("highlightActiveStatement",!0)||!e||e.document.languageId!=="sql"&&e.document.languageId!=="mssql"){e&&e.setDecorations(t,[]);return}try{let i=e.document,s=e.selection.active,o=i.offsetAt(s),a=i.getText(),l=Gn.getStatementAtPosition(a,o);if(l){let c=i.positionAt(l.start),u=i.positionAt(l.end),d=new nt.Range(c,u);e.setDecorations(t,[d])}else e.setDecorations(t,[])}catch(i){console.error("Error updating SQL highlight:",i)}}function f4(t,e,n){t.subscriptions.push(nt.window.onDidChangeActiveTextEditor(()=>sw(e)),nt.workspace.onDidChangeTextDocument(r=>{nt.window.activeTextEditor&&r.document===nt.window.activeTextEditor.document&&sw(e,nt.window.activeTextEditor)})),t.subscriptions.push(nt.window.onDidChangeTextEditorSelection(r=>{VR(n,r.textEditor)}),nt.window.onDidChangeActiveTextEditor(r=>{VR(n,r)}),nt.workspace.onDidChangeConfiguration(r=>{r.affectsConfiguration("netezza.highlightActiveStatement")&&VR(n,nt.window.activeTextEditor)})),sw(e,nt.window.activeTextEditor),VR(n,nt.window.activeTextEditor)}var ei=Q(require("vscode")),yLe=new Map([["SX","SELECT"],["WX","WHERE"],["GX","GROUP BY"],["HX","HAVING"],["OX","ORDER BY"],["FX","FROM"],["JX","JOIN"],["LX","LIMIT"],["IX","INSERT INTO"],["UX","UPDATE"],["DX","DELETE FROM"],["CX","CREATE TABLE"]]);function E4(t){let e=ei.workspace.onDidChangeTextDocument(async n=>{if(n.document.languageId!=="sql"&&n.document.languageId!=="mssql"||n.contentChanges.length!==1)return;let r=n.contentChanges[0];if(r.text!==" ")return;let i=ei.window.activeTextEditor;if(!i||i.document!==n.document)return;let o=n.document.lineAt(r.range.start.line).text;for(let[a,l]of yLe)if(new RegExp(`\\b${a}\\s$`,"i").test(o)){let u=o.toUpperCase().lastIndexOf(a.toUpperCase());if(u>=0){let d=new ei.Position(r.range.start.line,u),E=new ei.Position(r.range.start.line,u+a.length+1);await i.edit(f=>{f.replace(new ei.Range(d,E),l+" ")}),["SELECT","FROM","JOIN"].includes(l)&&setTimeout(()=>{ei.commands.executeCommand("editor.action.triggerSuggest")},100);break}}});t.subscriptions.push(e)}var h4=[{id:"mtxr.sqltools",name:"SQLTools"},{id:"ms-mssql.mssql",name:"Microsoft SQL Server"},{id:"oracle.oracledevtools",name:"Oracle Developer Tools"},{id:"cweijan.vscode-mysql-client2",name:"MySQL"},{id:"ckolkman.vscode-postgres",name:"PostgreSQL"}];async function wLe(t){let e=X.workspace.getConfiguration("netezza");if(!e.get("showConflictWarnings",!0))return;let r=[];for(let a of h4)X.extensions.getExtension(a.id)&&r.push(a.name);let s=X.extensions.all.filter(a=>{let l=a.packageJSON;if(!l||a.id==="krzysztof-d.justybaselite-netezza"||h4.some(E=>E.id===a.id))return!1;let c=l.activationEvents?.some(E=>E.includes("onLanguage:sql")||E.includes("onLanguage:mssql")),u=l.contributes?.languages?.some(E=>E.id==="sql"||E.extensions?.includes(".sql"));return(l.displayName||"")==="SQL Language Basics"?!1:c||u}).map(a=>a.packageJSON.displayName||a.id),o=[...r,...s];if(o.length>0){let a=o.length===1?`SQL extension detected "${o[0]}" which may cause conflicts (e.g. duplicate keybindings F5, Ctrl+Enter).`:`SQL extensions detected which may cause conflicts: ${o.join(", ")}. Some functions (e.g. F5, Ctrl+Enter) may be duplicated.`;await X.window.showWarningMessage(a,"OK","Do not show again")==="Do not show again"&&await e.update("showConflictWarnings",!1,X.ConfigurationTarget.Global)}}async function LLe(t){console.log("Netezza extension: Activating..."),wLe(t);let e=new ki(t),n=new gE(t);await n.initialize();let r=new cE(t,e,n),i=new nu(t.extensionUri);t.subscriptions.push({dispose:()=>{e.closeAllPersistentConnections()}});let s=X.window.createOutputChannel("Netezza"),o=a4(t,e),{updateFn:a}=l4(t,e),l=()=>{bf(o,e)};a(),l(),e.onDidChangeActiveConnection(M=>{a(),l(),M&&!n.hasConnectionPrefetchTriggered(M)&&n.triggerConnectionPrefetch(M,q=>ue(t,q,!0,e,M))}),e.onDidChangeConnections(a),e.onDidChangeDocumentConnection(M=>{a(),l();let q=e.getDocumentConnection(M);q&&!n.hasConnectionPrefetchTriggered(q)&&n.triggerConnectionPrefetch(q,K=>ue(t,K,!0,e,q))}),X.window.onDidChangeActiveTextEditor(()=>{a(),l()}),console.log("Netezza extension: Registering SchemaSearchProvider...");let c=new iu(t.extensionUri,t,n,e);console.log("Netezza extension: Registering QueryHistoryView...");let u=new su(t.extensionUri,t),d=X.window.createTreeView("netezza.schema",{treeDataProvider:r,showCollapseAll:!0});t.subscriptions.push(X.window.registerWebviewViewProvider(nu.viewType,i),X.window.registerWebviewViewProvider(iu.viewType,c),X.window.registerWebviewViewProvider(su.viewType,u));let E=u4(),f=d4();f4(t,E,f);let p=new qR;t.subscriptions.push(X.languages.registerCodeLensProvider({scheme:"file"},p)),t.subscriptions.push(X.window.onDidChangeActiveTextEditor(M=>{if(M&&M.document){let q=M.document.uri.toString();i.setActiveSource(q)}}));let h=uR({context:t,connectionManager:e,metadataCache:n,schemaProvider:r,schemaTreeView:d});t.subscriptions.push(...h);let T=zj({context:t,connectionManager:e,outputChannel:s});t.subscriptions.push(...T);let S=i6({context:t,connectionManager:e,outputChannel:s});t.subscriptions.push(...S);let m=o4({context:t,connectionManager:e,resultPanelProvider:i});t.subscriptions.push(...m);let R=new ZS(e,t),A=[X.commands.registerCommand("netezza.copilotFixSql",async()=>{try{await R.fixSql()}catch(M){let q=M instanceof Error?M.message:String(M);X.window.showErrorMessage(`Copilot Error: ${q}`)}}),X.commands.registerCommand("netezza.copilotFixSqlInteractive",async()=>{try{await R.fixSqlInteractive()}catch(M){let q=M instanceof Error?M.message:String(M);X.window.showErrorMessage(`Copilot Error: ${q}`)}}),X.commands.registerCommand("netezza.copilotOptimizeSql",async()=>{try{await R.optimizeSql()}catch(M){let q=M instanceof Error?M.message:String(M);X.window.showErrorMessage(`Copilot Error: ${q}`)}}),X.commands.registerCommand("netezza.copilotOptimizeSqlInteractive",async()=>{try{await R.optimizeSqlInteractive()}catch(M){let q=M instanceof Error?M.message:String(M);X.window.showErrorMessage(`Copilot Error: ${q}`)}}),X.commands.registerCommand("netezza.copilotExplainSql",async()=>{try{await R.explainSql()}catch(M){let q=M instanceof Error?M.message:String(M);X.window.showErrorMessage(`Copilot Error: ${q}`)}}),X.commands.registerCommand("netezza.copilotExplainSqlInteractive",async()=>{try{await R.explainSqlInteractive()}catch(M){let q=M instanceof Error?M.message:String(M);X.window.showErrorMessage(`Copilot Error: ${q}`)}}),X.commands.registerCommand("netezza.copilotCustomQuestion",async()=>{try{await R.askCustomQuestion()}catch(M){let q=M instanceof Error?M.message:String(M);X.window.showErrorMessage(`Copilot Error: ${q}`)}}),X.commands.registerCommand("netezza.copilotCustomQuestionInteractive",async()=>{try{await R.askCustomQuestionInteractive()}catch(M){let q=M instanceof Error?M.message:String(M);X.window.showErrorMessage(`Copilot Error: ${q}`)}}),X.commands.registerCommand("netezza.copilotGenerateSql",async()=>{try{await R.generateSqlInteractive()}catch(M){let q=M instanceof Error?M.message:String(M);X.window.showErrorMessage(`Copilot Error: ${q}`)}}),X.commands.registerCommand("justyBaseLite.copilot.changeModel",async()=>{try{await R.changeModel()}catch(M){let q=M instanceof Error?M.message:String(M);X.window.showErrorMessage(`Copilot Error: ${q}`)}}),X.commands.registerCommand("justyBaseLite.copilot.clearModel",async()=>{try{await R.clearPersistedModel()}catch(M){let q=M instanceof Error?M.message:String(M);X.window.showErrorMessage(`Copilot Error: ${q}`)}}),X.commands.registerCommand("netezza.describeDataWithCopilot",async(M,q)=>{try{await R.describeDataWithCopilot(M,q)}catch(K){let Ke=K instanceof Error?K.message:String(K);X.window.showErrorMessage(`Copilot Error: ${Ke}`)}}),X.commands.registerCommand("netezza.fixSqlError",async(M,q)=>{try{await R.fixSqlError(M,q)}catch(K){let Ke=K instanceof Error?K.message:String(K);X.window.showErrorMessage(`Copilot Error: ${Ke}`)}})];t.subscriptions.push(...A);let I=R.registerChatParticipant(t);I&&t.subscriptions.push(I);let w=new eR(R);t.subscriptions.push(X.lm.registerTool("netezza_get_sql_schema",w));let g=new tR(R);t.subscriptions.push(X.lm.registerTool("netezza_get_columns",g));let L=new nR(R);t.subscriptions.push(X.lm.registerTool("netezza_get_tables",L));let b=new rR(R);t.subscriptions.push(X.lm.registerTool("netezza_execute_query",b));let P=new iR(R);t.subscriptions.push(X.lm.registerTool("netezza_sample_data",P));let v=new sR(R);t.subscriptions.push(X.lm.registerTool("netezza_explain_plan",v));let H=new oR(R);t.subscriptions.push(X.lm.registerTool("netezza_search_schema",H));let $=new aR(R);t.subscriptions.push(X.lm.registerTool("netezza_table_stats",$));let j=new lR(R);t.subscriptions.push(X.lm.registerTool("netezza_dependencies",j));let J=new cR(R);t.subscriptions.push(X.lm.registerTool("netezza_validate_sql",J)),t.subscriptions.push(X.commands.registerCommand("netezza.viewEditData",M=>{TE.createOrShow(t.extensionUri,M,t,e)}),X.commands.registerCommand("netezza.createProcedure",async M=>{let q=M;if(!q||!q.dbName){X.window.showErrorMessage("Invalid selection. Select a Procedure folder.");return}let K=await X.window.showInputBox({prompt:"Enter new procedure name",placeHolder:"NEW_PROCEDURE",value:"NEW_PROCEDURE"});if(K===void 0)return;let Ke=K.trim()||"NEW_PROCEDURE",zn=`CREATE OR REPLACE PROCEDURE ${q.dbName}.SCHEMA.${Ke}(INTEGER)
RETURNS INTEGER
EXECUTE AS CALLER
LANGUAGE NZPLSQL AS
BEGIN_PROC
DECLARE
    arg1 ALIAS FOR $1;
BEGIN
    -- YOUR CODE GOES HERE
    
    EXCEPTION
    WHEN OTHERS THEN
        ROLLBACK;
        RAISE EXCEPTION  'Procedure failed: %', sqlerrm;
        --RAISE NOTICE 'Caught error, continuing %', sqlerrm;

END;
END_PROC;`,tr=await X.workspace.openTextDocument({content:zn,language:"sql"});await X.window.showTextDocument(tr)}),X.commands.registerCommand("netezza.toggleKeepConnectionForTab",()=>{let M=X.window.activeTextEditor;if(!M||M.document.languageId!=="sql"){X.window.showWarningMessage("Please open a SQL file first.");return}let q=M.document.uri.toString(),K=e.toggleDocumentKeepConnectionOpen(q);bf(o,e),X.window.showInformationMessage(K?"Keep connection: ENABLED for this tab - connection will remain open after queries":"Keep connection: DISABLED for this tab - connection will be closed after each query")}),X.commands.registerCommand("netezza.toggleKeepConnectionOpen",()=>{let M=e.getKeepConnectionOpen();e.setKeepConnectionOpen(!M),bf(o,e);let q=!M;X.window.showInformationMessage(q?"Keep connection open (global): ENABLED - connection will remain open after queries":"Keep connection open (global): DISABLED - connection will be closed after each query")}),X.commands.registerCommand("netezza.selectActiveConnection",async()=>{let M=await e.getConnections();if(M.length===0){X.window.showWarningMessage("No connections configured. Please connect first.");return}let q=await X.window.showQuickPick(M.map(K=>K.name),{placeHolder:"Select Active Connection"});q&&(await e.setActiveConnection(q),X.window.showInformationMessage(`Active connection set to: ${q}`))}),X.commands.registerCommand("netezza.selectConnectionForTab",async()=>{let M=X.window.activeTextEditor;if(!M||M.document.languageId!=="sql"){X.window.showWarningMessage("This command is only available for SQL files");return}let q=await e.getConnections();if(q.length===0){X.window.showWarningMessage("No connections configured. Please connect first.");return}let K=M.document.uri.toString(),Ke=e.getDocumentConnection(K)||e.getActiveConnectionName(),bn=q.map(tr=>({label:tr.name,description:Ke===tr.name?"$(check) Currently selected":`${tr.host}:${tr.port}/${tr.database}`,name:tr.name})),zn=await X.window.showQuickPick(bn,{placeHolder:"Select connection for this SQL tab"});zn&&(e.setDocumentConnection(K,zn.name),X.window.showInformationMessage(`Connection for this tab set to: ${zn.name}`))}),X.commands.registerCommand("netezza.openLogin",()=>{lE.createOrShow(t.extensionUri,e)}),X.commands.registerCommand("netezza.refreshSchema",async()=>{await n.clearCache(),r.refresh(),X.window.showInformationMessage("Schema refreshed (Cache cleared)")}),X.commands.registerCommand("netezza.jumpToSchema",async()=>{let M=X.window.activeTextEditor;if(!M)return;let q=M.document,K=M.selection,Ke=q.offsetAt(K.active),bn=Gn.getObjectAtPosition(q.getText(),Ke);bn?X.commands.executeCommand("netezza.revealInSchema",bn):X.window.showWarningMessage("No object found at cursor")}),X.commands.registerCommand("netezza.runScriptFromLens",async(M,q)=>{try{let K=await X.workspace.openTextDocument(M),Ke=K.getText(q).trim()||K.lineAt(q.start.line).text.trim();if(!Ke){X.window.showWarningMessage("No script command found");return}let bn=Ke.split(/\s+/),zn=bn[0]||"",tr=/python(\.exe)?$/i.test(zn)&&bn.length>=2&&bn[1].toLowerCase().endsWith(".py"),XR=zn.toLowerCase().endsWith(".py"),yf=X.workspace.getConfiguration("netezza").get("pythonPath")||"python",Gi="";if(tr){let vr=bn[0],ti=bn[1],$c=bn.slice(2);Gi=Cs(vr,ti,$c)}else if(XR){let vr=zn,ti=bn.slice(1);Gi=Cs(yf,vr,ti)}else Gi=Cs(yf,"",bn);let Gc=X.window.createTerminal({name:"Netezza: Script"});Gc.show(!0),Gc.sendText(Gi,!0),X.window.showInformationMessage(`Running script: ${Gi}`)}catch(K){let Ke=K instanceof Error?K.message:String(K);X.window.showErrorMessage(`Error running script: ${Ke}`)}}),X.commands.registerCommand("netezza.clearAutocompleteCache",async()=>{await X.window.showWarningMessage("Are you sure you want to clear the autocomplete cache? This will remove all cached databases, schemas, tables, and columns.",{modal:!0},"Clear Cache")==="Clear Cache"&&(await n.clearCache(),X.window.showInformationMessage("Autocomplete cache cleared successfully. Cache will be rebuilt on next use."))}),X.commands.registerCommand("netezza.copySelection",()=>{i.triggerCopySelection()}),X.commands.registerCommand("netezza.openEtlDesigner",()=>{Kr.setConnectionManager(e),Kr.createOrShow(t)}),X.commands.registerCommand("netezza.newEtlProject",async()=>{let M=await X.window.showInputBox({prompt:"Enter ETL project name",value:"New ETL Project"});M&&(xs.getInstance().createProject(M),Kr.setConnectionManager(e),Kr.createOrShow(t))}),X.commands.registerCommand("netezza.openEtlProject",async()=>{let M=await X.window.showOpenDialog({filters:{"ETL Project":["etl.json"]},canSelectMany:!1});if(M&&M[0])try{let K=await xs.getInstance().loadProject(M[0].fsPath);Kr.setConnectionManager(e),Kr.createOrShow(t,K),X.window.showInformationMessage(`ETL project loaded: ${K.name}`)}catch(q){X.window.showErrorMessage(`Failed to load ETL project: ${q}`)}}),X.commands.registerCommand("netezza.runEtlProject",async()=>{let q=xs.getInstance().getCurrentProject();if(!q){X.window.showWarningMessage("No ETL project is currently open. Please open or create a project first.");return}Kr.setConnectionManager(e),Kr.createOrShow(t,q),X.window.showInformationMessage("ETL project opened. Use the Run button in the designer to execute.")})),t.subscriptions.push(X.languages.registerDocumentLinkProvider({language:"sql"},new EE),X.languages.registerFoldingRangeProvider({language:"sql"},new hE));let Z=new fE(t,n,e);t.subscriptions.push(X.languages.registerCompletionItemProvider(["sql","mssql"],Z,"."," ")),E4(t),k0(t),t.subscriptions.push(X.languages.registerCodeActionsProvider(["sql","netezza-sql"],new au,{providedCodeActionKinds:au.providedCodeActionKinds})),console.log("Netezza extension: Activation complete.")}function DLe(){}0&&(module.exports={activate,deactivate});
/*! Bundled license information:

normalize-path/index.js:
  (*!
   * normalize-path <https://github.com/jonschlinkert/normalize-path>
   *
   * Copyright (c) 2014-2018, Jon Schlinkert.
   * Released under the MIT License.
   *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

archiver/lib/error.js:
archiver/lib/core.js:
  (**
   * Archiver Core
   *
   * @ignore
   * @license [MIT]{@link https://github.com/archiverjs/node-archiver/blob/master/LICENSE}
   * @copyright (c) 2012-2014 Chris Talkington, contributors.
   *)

crc-32/crc32.js:
  (*! crc32.js (C) 2014-present SheetJS -- http://sheetjs.com *)

zip-stream/index.js:
  (**
   * ZipStream
   *
   * @ignore
   * @license [MIT]{@link https://github.com/archiverjs/node-zip-stream/blob/master/LICENSE}
   * @copyright (c) 2014 Chris Talkington, contributors.
   *)

archiver/lib/plugins/zip.js:
  (**
   * ZIP Format Plugin
   *
   * @module plugins/zip
   * @license [MIT]{@link https://github.com/archiverjs/node-archiver/blob/master/LICENSE}
   * @copyright (c) 2012-2014 Chris Talkington, contributors.
   *)

archiver/lib/plugins/tar.js:
  (**
   * TAR Format Plugin
   *
   * @module plugins/tar
   * @license [MIT]{@link https://github.com/archiverjs/node-archiver/blob/master/LICENSE}
   * @copyright (c) 2012-2014 Chris Talkington, contributors.
   *)

archiver/lib/plugins/json.js:
  (**
   * JSON Format Plugin
   *
   * @module plugins/json
   * @license [MIT]{@link https://github.com/archiverjs/node-archiver/blob/master/LICENSE}
   * @copyright (c) 2012-2014 Chris Talkington, contributors.
   *)

archiver/index.js:
  (**
   * Archiver Vending
   *
   * @ignore
   * @license [MIT]{@link https://github.com/archiverjs/node-archiver/blob/master/LICENSE}
   * @copyright (c) 2012-2014 Chris Talkington, contributors.
   *)
*/
