"use strict";var sQ=Object.create;var yE=Object.defineProperty;var oQ=Object.getOwnPropertyDescriptor;var aQ=Object.getOwnPropertyNames;var lQ=Object.getPrototypeOf,cQ=Object.prototype.hasOwnProperty;var G=(t,e)=>()=>(t&&(e=t(t=0)),e);var C=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Pt=(t,e)=>{for(var n in e)yE(t,n,{get:e[n],enumerable:!0})},mL=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of aQ(e))!cQ.call(t,i)&&i!==n&&yE(t,i,{get:()=>e[i],enumerable:!(r=oQ(e,i))||r.enumerable});return t};var j=(t,e,n)=>(n=t!=null?sQ(lQ(t)):{},mL(e||!t||!t.__esModule?yE(n,"default",{value:t,enumerable:!0}):n,t)),Lo=t=>mL(yE({},"__esModule",{value:!0}),t);var _n,Kt,fi,Le,Hs,ZA=G(()=>{"use strict";_n={AuthenticationRequest:82,ErrorResponse:69,NoticeResponse:78,BackendKeyData:75,ReadyForQuery:90,RowDescription:84,RowDescriptionStandard:88,DataRow:68,CommandComplete:67,EmptyQueryResponse:73,RowStandard:89,CopyInResponse:71,CopyOutResponse:72,CopyDone:99,CopyData:100},Kt={NzTypeRecAddr:1,NzTypeDouble:2,NzTypeInt:3,NzTypeFloat:4,NzTypeMoney:5,NzTypeDate:6,NzTypeNumeric:7,NzTypeTime:8,NzTypeTimestamp:9,NzTypeInterval:10,NzTypeTimeTz:11,NzTypeBool:12,NzTypeInt1:13,NzTypeBinary:14,NzTypeChar:15,NzTypeVarChar:16,NzDEPR_Text:17,NzTypeUnknown:18,NzTypeInt2:19,NzTypeInt8:20,NzTypeVarFixedChar:21,NzTypeGeometry:22,NzTypeVarBinary:23,NzDEPR_Blob:24,NzTypeNChar:25,NzTypeNVarChar:26,NzDEPR_NText:27,NzTypeJson:30,NzTypeJsonb:31,NzTypeJsonpath:32,NzTypeLastEntry:33,NzTypeIntvsAbsTimeFIX:39},fi={CP_VERSION_2:2,CP_VERSION_3:3,CP_VERSION_4:4,CP_VERSION_5:5,CP_VERSION_6:6},Le={HSV2_CLIENT_BEGIN:1,HSV2_DB:2,HSV2_USER:3,HSV2_OPTIONS:4,HSV2_REMOTE_PID:6,HSV2_CLIENT_TYPE:8,HSV2_PROTOCOL:9,HSV2_SSL_NEGOTIATE:11,HSV2_SSL_CONNECT:12,HSV2_APPNAME:13,HSV2_CLIENT_OS:14,HSV2_CLIENT_HOST_NAME:15,HSV2_CLIENT_OS_USER:16,HSV2_64BIT_VARLENA_ENABLED:17,HSV2_CLIENT_DONE:1e3},Hs={DATA:1,ERROR:2,DONE:3}});function _L(t){let e=t.readBigInt64LE(0),n=Number(e/1000n);return new Date(IL+n)}function NL(t){let n=t.readInt32LE(0)*24*60*60*1e3;return new Date(IL+n)}function wE(t){let e=t.readBigInt64LE(0),n=Number(e/1000000n),r=Number(e%1000000n),i=Math.floor(n/3600),s=Math.floor(n%3600/60),o=n%60;return{hours:i,minutes:s,seconds:o,microseconds:r,toString(){let a=String(i).padStart(2,"0"),l=String(s).padStart(2,"0"),c=String(o).padStart(2,"0");if(r>0){let u=String(r).padStart(6,"0");return`${a}:${l}:${c}.${u}`}return`${a}:${l}:${c}`}}}function OL(t){if(!t)return null;let e=t.split(":"),n=parseInt(e[0],10)||0,r=parseInt(e[1],10)||0,i=(e[2]||"0").split("."),s=parseInt(i[0],10)||0,o=0;return i.length>1&&(o=parseInt(i[1].substring(0,6).padEnd(6,"0"),10)),{hours:n,minutes:r,seconds:s,microseconds:o,toString(){return t}}}function CL(t){let e=t.readBigInt64LE(0),n=t.readInt32LE(8),r=wE(t);if(n===0)return r.toString();let i=Math.floor(n/12),s=n%12;return i>0?`${i} years ${s} mons ${r.toString()}`:`${s} mons ${r.toString()}`}function bL(t,e){let n=wE(t),r=t.readInt32LE(e-4),i=r<0?"+":"-",s=Math.abs(r),o=Math.floor(s/3600),a=Math.floor(s%3600/60),l=s%60,c=String(o).padStart(2,"0");return l!==0?c+=":"+String(a).padStart(2,"0")+":"+String(l).padStart(2,"0"):a!==0&&(c+=":"+String(a).padStart(2,"0")),`${n.toString()}${i}${c}`}function yL(t,e,n,r){let i=e<=9?1:e<=18?2:4,s=[];for(let f=0;f<i;f++)s.push(t.readUInt32LE(f*4));let o=(s[0]&gL)!==0?4294967295:0,a=new Array(rl).fill(o);for(let f=rl-r,p=0;f<rl;f++,p++)a[f]=s[p];let l=(a[0]&gL)!==0;l&&dQ(a);let c=new Array(uu).fill(0);for(let f=0;f<uu;f++)c[uu-f-1]=uQ(a);let u="",d=!0;for(let f=0;f<uu;f++)f<uu-n-1&&d&&c[f]===0||(d=!1,u+=String(c[f]));if(u===""&&(u="0"),n!==0){let f=u.slice(0,-n)||"0",p=u.slice(-n).padStart(n,"0");u=f+"."+p}l&&(u="-"+u);let E=parseFloat(u);return e<=15&&u===String(E)?E:u}function uQ(t){let e=0;for(let n=0;n<rl;n++){let r=t[n]+e*4294967296;r!==0?(t[n]=Math.floor(r/10),e=r%10):(t[n]=0,e=0)}return e}function dQ(t){for(let n=0;n<rl;n++)t[n]=~t[n]>>>0;let e=1;for(let n=rl-1;n>=0&&e;n--){let r=t[n]+e;t[n]=r>>>0,e=r>4294967295?1:0}}var IL,rl,uu,gL,wL=G(()=>{"use strict";IL=Date.UTC(2e3,0,1);rl=4,uu=38,gL=2147483648});var tm=C((yxe,LL)=>{"use strict";var em=class{static readInt32(e,n=0){return e.readInt32BE(n)}static readInt16(e,n=0){return e.readInt16BE(n)}static writeInt32(e,n,r=0){if(Buffer.isBuffer(e))e.writeInt32BE(n,r);else{let i=Buffer.allocUnsafe(4);i.writeInt32BE(n,0),e.write(i)}}static writeInt16(e,n,r=0){if(Buffer.isBuffer(e))e.writeInt16BE(n,r);else{let i=Buffer.allocUnsafe(2);i.writeInt16BE(n,0),e.write(i)}}};LL.exports=em});var PL=C((wxe,DL)=>{var il=1e3,sl=il*60,ol=sl*60,Do=ol*24,EQ=Do*7,hQ=Do*365.25;DL.exports=function(t,e){e=e||{};var n=typeof t;if(n==="string"&&t.length>0)return pQ(t);if(n==="number"&&isFinite(t))return e.long?SQ(t):TQ(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function pQ(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var n=parseFloat(e[1]),r=(e[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*hQ;case"weeks":case"week":case"w":return n*EQ;case"days":case"day":case"d":return n*Do;case"hours":case"hour":case"hrs":case"hr":case"h":return n*ol;case"minutes":case"minute":case"mins":case"min":case"m":return n*sl;case"seconds":case"second":case"secs":case"sec":case"s":return n*il;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function TQ(t){var e=Math.abs(t);return e>=Do?Math.round(t/Do)+"d":e>=ol?Math.round(t/ol)+"h":e>=sl?Math.round(t/sl)+"m":e>=il?Math.round(t/il)+"s":t+"ms"}function SQ(t){var e=Math.abs(t);return e>=Do?LE(t,e,Do,"day"):e>=ol?LE(t,e,ol,"hour"):e>=sl?LE(t,e,sl,"minute"):e>=il?LE(t,e,il,"second"):t+" ms"}function LE(t,e,n,r){var i=e>=n*1.5;return Math.round(t/n)+" "+r+(i?"s":"")}});var nm=C((Lxe,xL)=>{function RQ(t){n.debug=n,n.default=n,n.coerce=l,n.disable=o,n.enable=i,n.enabled=a,n.humanize=PL(),n.destroy=c,Object.keys(t).forEach(u=>{n[u]=t[u]}),n.names=[],n.skips=[],n.formatters={};function e(u){let d=0;for(let E=0;E<u.length;E++)d=(d<<5)-d+u.charCodeAt(E),d|=0;return n.colors[Math.abs(d)%n.colors.length]}n.selectColor=e;function n(u){let d,E=null,f,p;function h(...T){if(!h.enabled)return;let S=h,A=Number(new Date),R=A-(d||A);S.diff=R,S.prev=d,S.curr=A,d=A,T[0]=n.coerce(T[0]),typeof T[0]!="string"&&T.unshift("%O");let m=0;T[0]=T[0].replace(/%([a-zA-Z%])/g,(L,I)=>{if(L==="%%")return"%";m++;let D=n.formatters[I];if(typeof D=="function"){let g=T[m];L=D.call(S,g),T.splice(m,1),m--}return L}),n.formatArgs.call(S,T),(S.log||n.log).apply(S,T)}return h.namespace=u,h.useColors=n.useColors(),h.color=n.selectColor(u),h.extend=r,h.destroy=n.destroy,Object.defineProperty(h,"enabled",{enumerable:!0,configurable:!1,get:()=>E!==null?E:(f!==n.namespaces&&(f=n.namespaces,p=n.enabled(u)),p),set:T=>{E=T}}),typeof n.init=="function"&&n.init(h),h}function r(u,d){let E=n(this.namespace+(typeof d>"u"?":":d)+u);return E.log=this.log,E}function i(u){n.save(u),n.namespaces=u,n.names=[],n.skips=[];let d=(typeof u=="string"?u:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let E of d)E[0]==="-"?n.skips.push(E.slice(1)):n.names.push(E)}function s(u,d){let E=0,f=0,p=-1,h=0;for(;E<u.length;)if(f<d.length&&(d[f]===u[E]||d[f]==="*"))d[f]==="*"?(p=f,h=E,f++):(E++,f++);else if(p!==-1)f=p+1,h++,E=h;else return!1;for(;f<d.length&&d[f]==="*";)f++;return f===d.length}function o(){let u=[...n.names,...n.skips.map(d=>"-"+d)].join(",");return n.enable(""),u}function a(u){for(let d of n.skips)if(s(u,d))return!1;for(let d of n.names)if(s(u,d))return!0;return!1}function l(u){return u instanceof Error?u.stack||u.message:u}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}xL.exports=RQ});var vL=C((lr,DE)=>{lr.formatArgs=mQ;lr.save=gQ;lr.load=IQ;lr.useColors=AQ;lr.storage=_Q();lr.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();lr.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function AQ(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let t;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function mQ(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+DE.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let n=0,r=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(n++,i==="%c"&&(r=n))}),t.splice(r,0,e)}lr.log=console.debug||console.log||(()=>{});function gQ(t){try{t?lr.storage.setItem("debug",t):lr.storage.removeItem("debug")}catch{}}function IQ(){let t;try{t=lr.storage.getItem("debug")||lr.storage.getItem("DEBUG")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function _Q(){try{return localStorage}catch{}}DE.exports=nm()(lr);var{formatters:NQ}=DE.exports;NQ.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var UL=C((Dxe,ML)=>{"use strict";ML.exports=(t,e=process.argv)=>{let n=t.startsWith("-")?"":t.length===1?"-":"--",r=e.indexOf(n+t),i=e.indexOf("--");return r!==-1&&(i===-1||r<i)}});var HL=C((Pxe,FL)=>{"use strict";var OQ=require("os"),BL=require("tty"),wr=UL(),{env:fn}=process,Gs;wr("no-color")||wr("no-colors")||wr("color=false")||wr("color=never")?Gs=0:(wr("color")||wr("colors")||wr("color=true")||wr("color=always"))&&(Gs=1);"FORCE_COLOR"in fn&&(fn.FORCE_COLOR==="true"?Gs=1:fn.FORCE_COLOR==="false"?Gs=0:Gs=fn.FORCE_COLOR.length===0?1:Math.min(parseInt(fn.FORCE_COLOR,10),3));function rm(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function im(t,e){if(Gs===0)return 0;if(wr("color=16m")||wr("color=full")||wr("color=truecolor"))return 3;if(wr("color=256"))return 2;if(t&&!e&&Gs===void 0)return 0;let n=Gs||0;if(fn.TERM==="dumb")return n;if(process.platform==="win32"){let r=OQ.release().split(".");return Number(r[0])>=10&&Number(r[2])>=10586?Number(r[2])>=14931?3:2:1}if("CI"in fn)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(r=>r in fn)||fn.CI_NAME==="codeship"?1:n;if("TEAMCITY_VERSION"in fn)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(fn.TEAMCITY_VERSION)?1:0;if(fn.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in fn){let r=parseInt((fn.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(fn.TERM_PROGRAM){case"iTerm.app":return r>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(fn.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(fn.TERM)||"COLORTERM"in fn?1:n}function CQ(t){let e=im(t,t&&t.isTTY);return rm(e)}FL.exports={supportsColor:CQ,stdout:rm(im(!0,BL.isatty(1))),stderr:rm(im(!0,BL.isatty(2)))}});var $L=C((En,xE)=>{var bQ=require("tty"),PE=require("util");En.init=vQ;En.log=DQ;En.formatArgs=wQ;En.save=PQ;En.load=xQ;En.useColors=yQ;En.destroy=PE.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");En.colors=[6,2,3,4,5,1];try{let t=HL();t&&(t.stderr||t).level>=2&&(En.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}En.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let n=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,s)=>s.toUpperCase()),r=process.env[e];return/^(yes|on|true|enabled)$/i.test(r)?r=!0:/^(no|off|false|disabled)$/i.test(r)?r=!1:r==="null"?r=null:r=Number(r),t[n]=r,t},{});function yQ(){return"colors"in En.inspectOpts?!!En.inspectOpts.colors:bQ.isatty(process.stderr.fd)}function wQ(t){let{namespace:e,useColors:n}=this;if(n){let r=this.color,i="\x1B[3"+(r<8?r:"8;5;"+r),s=`  ${i};1m${e} \x1B[0m`;t[0]=s+t[0].split(`
`).join(`
`+s),t.push(i+"m+"+xE.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=LQ()+e+" "+t[0]}function LQ(){return En.inspectOpts.hideDate?"":new Date().toISOString()+" "}function DQ(...t){return process.stderr.write(PE.formatWithOptions(En.inspectOpts,...t)+`
`)}function PQ(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function xQ(){return process.env.DEBUG}function vQ(t){t.inspectOpts={};let e=Object.keys(En.inspectOpts);for(let n=0;n<e.length;n++)t.inspectOpts[e[n]]=En.inspectOpts[e[n]]}xE.exports=nm()(En);var{formatters:GL}=xE.exports;GL.o=function(t){return this.inspectOpts.colors=this.useColors,PE.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};GL.O=function(t){return this.inspectOpts.colors=this.useColors,PE.inspect(t,this.inspectOpts)}});var om=C((xxe,sm)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?sm.exports=vL():sm.exports=$L()});var XL=C((Mxe,qL)=>{"use strict";var kL=j(require("crypto")),WL=j(require("os")),YL=j(require("tls")),VL=j(require("fs"));ZA();var ue=tm(),Jt=om()("nz:handshake"),am=class{constructor(e,n,r,i={}){this._hsVersion=-1;this._protocol1=-1;this._protocol2=-1;this.NPSCLIENT_TYPE_DOTNET=11;this.backendProcessId=0;this.backendSecretKey=0;this._socket=e,this._stream=n,this._host=r,this._options=i,this._guardiumClientOS=process.platform,this._guardiumClientOSUser=process.env.USERNAME||process.env.USER||"unknown",this._guardiumAppName="scJs-Driver",this._guardiumClientHostName=WL.hostname()}async startup(e,n,r){if(!await this.connHandshakeNegotiate())throw new Error("Handshake negotiation unsuccessful");if(Jt("Sending handshake info"),!await this.connSendHandshakeInfo(e,n))throw new Error("Error in ConnSendHandshakeInfo");if(!await this.connAuthenticate(r))throw new Error("Error in ConnAuthenticate");if(!await this.connConnectionComplete())throw new Error("Error in ConnConnectionComplete");return this._stream}async _readExactly(e){return new Promise((n,r)=>{let i=this._stream.read(e);i?n(i):this._stream.once("readable",()=>{let s=this._stream.read(e);s&&n(s)})})}async readBytes(e){for(;;){let n=this._stream.read(e);if(n!==null)return n;await new Promise(r=>this._stream.once("readable",r))}}async readByte(){return(await this.readBytes(1))[0]}async connHandshakeNegotiate(){let e=fi.CP_VERSION_6;for(;;){Jt(`Sending version: ${e}`),ue.writeInt32(this._stream,8),ue.writeInt16(this._stream,Le.HSV2_CLIENT_BEGIN),ue.writeInt16(this._stream,e);let n=await this.readByte();if(Jt(`Got response: ${String.fromCharCode(n)}`),n===78)return this._hsVersion=e,this._protocol2=0,!0;if(n===77){let r=await this.readByte(),i=String.fromCharCode(r);i==="2"?e=fi.CP_VERSION_2:i==="3"?e=fi.CP_VERSION_3:i==="4"?e=fi.CP_VERSION_4:i==="5"&&(e=fi.CP_VERSION_5)}else return!1}}async connSendHandshakeInfo(e,n){return await this.connSendDatabase(e)?(await this.connSecureSession(),this.connSetNextDataProtocol(this._protocol1,this._protocol2),this._hsVersion===fi.CP_VERSION_6||this._hsVersion===fi.CP_VERSION_4?this.connSendHandshakeVersion4(this._hsVersion,n):this.connSendHandshakeVersion2(this._hsVersion,n)):!1}async connSendDatabase(e){let n=Buffer.from(e,"utf8"),r=6+n.length+1;return ue.writeInt32(this._stream,r),ue.writeInt16(this._stream,Le.HSV2_DB),this._stream.write(n),this._stream.write(Buffer.from([0])),await this.readByte()===78}async connSecureSession(){let n=0,r=this._options.securityLevel;r==="OnlyUnsecuredSession"?n=1:r==="PreferredSecuredSession"?n=2:r==="OnlySecuredSession"&&(n=3),ue.writeInt32(this._stream,10),ue.writeInt16(this._stream,Le.HSV2_SSL_NEGOTIATE),ue.writeInt32(this._stream,n);let i=await this.readByte();if(i===78){if(this._options.securityLevel==="OnlySecuredSession")throw new Error("Server refused secure session, but OnlySecuredSession was requested.");return!0}if(i===83){Jt("Upgrading to SSL...");let s=Buffer.alloc(6);s.writeInt32BE(6,0),s.writeInt16BE(Le.HSV2_SSL_CONNECT,4),await new Promise(a=>{this._stream.write(s)?a():this._stream.once("drain",a)}),this._socket.removeAllListeners("data"),this._socket.removeAllListeners("readable");let o={socket:this._socket,rejectUnauthorized:!1};if(this._options.sslCerFilePath){this._options.rejectUnauthorized===!1?o.rejectUnauthorized=!1:o.rejectUnauthorized=!0;try{o.ca=VL.readFileSync(this._options.sslCerFilePath)}catch(a){throw Jt("Failed to load cert file",a),a}}return new Promise((a,l)=>{let c=YL.connect(o,()=>{Jt("SSL Connected"),this._stream=c,this._stream.on("error",u=>{Jt("Secure Stream Error",u)}),this.readByte().then(u=>{u===78?a(!0):l(new Error(`SSL Handshake failed: Unexpected response ${String.fromCharCode(u)}`))}).catch(u=>{Jt("Failed to read SSL confirmation",u),l(u)})});c.on("error",u=>{Jt("SSL Connection Error",u),l(u)})})}return!1}connSetNextDataProtocol(e,n){return this._protocol2===0&&(this._protocol2=5),this._protocol1=3,!0}async connSendHandshakeVersion4(e,n){let r=Buffer.from(n,"utf8"),i=6+r.length+1;ue.writeInt32(this._stream,i),ue.writeInt16(this._stream,Le.HSV2_USER),this._stream.write(r),this._stream.write(Buffer.from([0]));let s=Le.HSV2_APPNAME;for(;s!==0;){if(await this.readByte()!==78)return!1;switch(s){case Le.HSV2_APPNAME:await this.sendStringOption(s,this._guardiumAppName),s=Le.HSV2_CLIENT_OS;break;case Le.HSV2_CLIENT_OS:await this.sendStringOption(s,this._guardiumClientOS),s=Le.HSV2_CLIENT_HOST_NAME;break;case Le.HSV2_CLIENT_HOST_NAME:await this.sendStringOption(s,this._guardiumClientHostName),s=Le.HSV2_CLIENT_OS_USER;break;case Le.HSV2_CLIENT_OS_USER:await this.sendStringOption(s,this._guardiumClientOSUser),s=Le.HSV2_PROTOCOL;break;case Le.HSV2_PROTOCOL:i=10,ue.writeInt32(this._stream,i),ue.writeInt16(this._stream,s),ue.writeInt16(this._stream,this._protocol1),ue.writeInt16(this._stream,this._protocol2),s=Le.HSV2_REMOTE_PID;break;case Le.HSV2_REMOTE_PID:i=10,ue.writeInt32(this._stream,i),ue.writeInt16(this._stream,s),ue.writeInt32(this._stream,process.pid),s=Le.HSV2_CLIENT_TYPE;break;case Le.HSV2_CLIENT_TYPE:i=8,ue.writeInt32(this._stream,i),ue.writeInt16(this._stream,s),ue.writeInt16(this._stream,11),e>=5?s=Le.HSV2_64BIT_VARLENA_ENABLED:s=Le.HSV2_CLIENT_DONE;break;case Le.HSV2_64BIT_VARLENA_ENABLED:i=8,ue.writeInt32(this._stream,i),ue.writeInt16(this._stream,s),ue.writeInt16(this._stream,1),s=Le.HSV2_CLIENT_DONE;break;case Le.HSV2_CLIENT_DONE:return i=6,ue.writeInt32(this._stream,i),ue.writeInt16(this._stream,s),s=0,!0}}return!1}async connSendHandshakeVersion2(e,n){let r=Buffer.from(n,"utf8"),i=6+r.length+1;ue.writeInt32(this._stream,i),ue.writeInt16(this._stream,Le.HSV2_USER),this._stream.write(r),this._stream.write(Buffer.from([0]));let s=Le.HSV2_PROTOCOL;for(;s!==0;){Jt(`Waiting for response in v2 loop. Info: ${s}`);let o=await this.readByte();if(Jt(`Got response: ${String.fromCharCode(o)}`),o===78)switch(s){case Le.HSV2_PROTOCOL:i=10,ue.writeInt32(this._stream,i),ue.writeInt16(this._stream,s),ue.writeInt16(this._stream,this._protocol1),ue.writeInt16(this._stream,this._protocol2),s=Le.HSV2_REMOTE_PID;break;case Le.HSV2_REMOTE_PID:i=10,ue.writeInt32(this._stream,i),ue.writeInt16(this._stream,s),ue.writeInt32(this._stream,process.pid),s=Le.HSV2_CLIENT_TYPE;break;case Le.HSV2_OPTIONS:s=Le.HSV2_CLIENT_TYPE;break;case Le.HSV2_CLIENT_TYPE:i=8,ue.writeInt32(this._stream,i),ue.writeInt16(this._stream,s),ue.writeInt16(this._stream,11),e===fi.CP_VERSION_5||e===fi.CP_VERSION_6?s=Le.HSV2_64BIT_VARLENA_ENABLED:s=Le.HSV2_CLIENT_DONE;break;case Le.HSV2_64BIT_VARLENA_ENABLED:i=8,ue.writeInt32(this._stream,i),ue.writeInt16(this._stream,s),ue.writeInt16(this._stream,1),s=Le.HSV2_CLIENT_DONE;break;case Le.HSV2_CLIENT_DONE:return i=6,ue.writeInt32(this._stream,i),ue.writeInt16(this._stream,s),s=0,!0}else throw o===_n.ErrorResponse?new Error("Handshake V2 Failed: ErrorResponse from backend"):new Error(`Handshake V2 Failed: Unexpected response ${String.fromCharCode(o)}`)}return!1}async sendStringOption(e,n){let r=Buffer.from(n,"utf8"),i=6+r.length+1;ue.writeInt32(this._stream,i),ue.writeInt16(this._stream,e),this._stream.write(r),this._stream.write(Buffer.from([0]))}async connAuthenticate(e){if(await this.readByte()!==_n.AuthenticationRequest)return!1;let r=ue.readInt32(await this.readBytes(4));if(Jt(`Auth request: ${r}`),r===0)return!0;if(r===3){let i=Buffer.from(e,"utf8"),s=4+i.length+1;return ue.writeInt32(this._stream,s),this._stream.write(i),this._stream.write(Buffer.from([0])),!0}if(r===5){let i=await this.readBytes(2),s=Buffer.from(e,"utf8"),a=kL.createHash("md5").update(Buffer.concat([i,s])).digest("base64").replace(/=+$/,""),l=Buffer.from(a,"utf8"),c=4+l.length+1;return ue.writeInt32(this._stream,c),this._stream.write(l),this._stream.write(Buffer.from([0])),!0}return!1}async readString(){let e=[];for(;;){let n=await this.readByte();if(n===0)break;e.push(n)}return Buffer.from(e).toString("utf8")}async connConnectionComplete(){for(;;){let e=await this.readByte();if(Jt(`Resp: ${String.fromCharCode(e)} (0x${e.toString(16)})`),e===_n.AuthenticationRequest){let r=ue.readInt32(await this.readBytes(4));Jt(`Auth req in complete: ${r}`);continue}if(e===_n.ErrorResponse){let r=await this.readBytes(4),i=ue.readInt32(r);if(i<0||i>1e8){let o=r.toString("utf8");throw o+=await this.readString(),new Error(`Backend Error: ${o}`)}let s=await this.readBytes(i-4);throw new Error(`Backend Error: ${s.toString()}`)}let n=await this.readBytes(4);if(Jt(`Skipped 4 bytes: ${n.toString("hex")}`),e===_n.BackendKeyData){let r=await this.readBytes(4);Jt(`KeyData Padding: ${r.toString("hex")}`);let i=ue.readInt32(await this.readBytes(4)),s=ue.readInt32(await this.readBytes(4));Jt(`KeyData: PID=${i} Key=${s}`),this.backendProcessId=i,this.backendSecretKey=s;continue}if(e===_n.ReadyForQuery)return Jt("ReadyForQuery"),!0;if(e===_n.NoticeResponse){let r=ue.readInt32(await this.readBytes(4)),i=await this.readBytes(r);Jt(`Notice: ${i.toString()}`);continue}}}};qL.exports=am});var jL=C((Uxe,zL)=>{"use strict";var lm=class{constructor(e){this.connection=e,this.commandText="",this.parameters=[],this._recordsAffected=-1,this.commandTimeout=e.commandTimeout!==void 0?e.commandTimeout:30}async execute(){return this.connection.execute(this,!1)}async executeNonQuery(){return await this.connection.execute(this,!1),this._recordsAffected}async executeReader(){return this.connection.executeReader(this)}async cancel(){return this.connection.cancel()}};zL.exports=lm});var JL=C((Bxe,KL)=>{"use strict";var _e={Bool:16,Bytea:17,Char:18,Name:19,Int8:20,Int2:21,Int4:23,Text:25,ShowDate:2530,BpChar:1042,VarChar:1043,Date:1082,Time:1083,Timestamp:1114,TimestampTz:1184,Interval:1186,TimeTz:1266,Numeric:1700,Float4:700,Float8:701},du=16,cm=class{constructor(e,n,r,i,s){this.currentRow=null;this.closed=!1;this._nameIndex={};this._pendingColumns=null;this._isFinished=!1;this.command=e,this.generator=n,this.columnDescriptions=r||[],this.releaseCallback=i,this._initNameIndex(),this._nextItem=s,this._hasRows=!!(this._nextItem&&this._nextItem.type==="DataRow")}get hasRows(){return this._hasRows}_initNameIndex(){if(this._nameIndex={},this.columnDescriptions)for(let e=0;e<this.columnDescriptions.length;e++)this._nameIndex[this.columnDescriptions[e].name.toLowerCase()]=e}_markFinished(){this._isFinished=!0,this._nextItem=null,this._hasRows=!1,this.releaseCallback&&(this.releaseCallback(),this.releaseCallback=null)}async nextResult(){if(this._pendingColumns){for(this.columnDescriptions=this._pendingColumns,this._pendingColumns=null,this._initNameIndex(),this.currentRow=null;;){let e=await this.generator.next();if(e.done){this._nextItem=null,this._hasRows=!1;break}let n=e.value;if(n.type!=="RowDescriptionStandard")if(n.type==="DataRow"){this._nextItem=n,this._hasRows=!0;break}else if(n.type==="CommandComplete"){this._nextItem=n,this._hasRows=!1;break}else{this._nextItem=n,this._hasRows=!1;break}}return!0}if(this.closed||this._isFinished)return!1;for(;;){let e;if(this._nextItem?(e={value:this._nextItem,done:!1},this._nextItem=null):e=await this.generator.next(),e.done)return this._markFinished(),!1;let n=e.value;if(n.type==="RowDescription"){this.columnDescriptions=n.columns,this._initNameIndex(),this.currentRow=null;continue}if(n.type==="RowDescriptionStandard"){let r=this.command?._preparedStatement;this.columnDescriptions.length===0&&r&&r.description&&(this.columnDescriptions=r.description,this._initNameIndex()),this.currentRow=null;continue}if(n.type==="DataRow")return this._nextItem=n,this._hasRows=!0,!0;if(n.type!=="CommandComplete"){if(n.type==="ErrorResponse")throw new Error(n.message||"Unknown Netezza Error");if(n.type==="ReadyForQuery")return this._markFinished(),!1}}}getSchemaTable(){if(!this.columnDescriptions)return[];let e=[];for(let n=0;n<this.columnDescriptions.length;n++){let r=this.columnDescriptions[n],i={ColumnName:r.name,ColumnOrdinal:n+1,ColumnSize:-1,NumericPrecision:0,NumericScale:0,DataType:String,ProviderType:r.typeOid,AllowDBNull:!0,IsReadOnly:!0,IsLong:!1},s=r.typeMod,o=r.typeOid;switch(o){case _e.Bool:i.DataType=Boolean,i.ColumnSize=1;break;case _e.Int2:i.DataType=Number,i.ColumnSize=2;break;case _e.Int4:i.DataType=Number,i.ColumnSize=4;break;case _e.Int8:i.DataType=Number,i.ColumnSize=8;break;case _e.Float4:case _e.Float8:i.DataType=Number,i.ColumnSize=o===_e.Float8?8:4,i.NumericPrecision=o===_e.Float8?53:24;break;case _e.Numeric:if(i.DataType=Number,s>du){let a=s-du>>16,l=s-du&65535;i.NumericPrecision=a,i.NumericScale=l,i.ColumnSize=Math.floor(a/2)+1,i.ColumnSize<r.typeLen&&r.typeLen>0&&(i.ColumnSize=r.typeLen)}else i.ColumnSize=r.typeLen;break;case _e.Date:case _e.Timestamp:case _e.TimestampTz:case _e.Time:case _e.TimeTz:i.DataType=Date,(o===_e.Time||o===_e.TimeTz)&&(i.DataType=Object),i.ColumnSize=r.typeLen;break;case _e.Char:case _e.BpChar:case _e.VarChar:case _e.Text:case _e.Name:case _e.ShowDate:i.DataType=String,s>du?i.ColumnSize=s-du:(i.ColumnSize=-1,r.typeLen>0&&(i.ColumnSize=r.typeLen)),i.ColumnSize>8e3&&(i.IsLong=!0);break;default:i.DataType=String,i.ColumnSize=r.typeLen;break}e.push(i)}return{Rows:e,Columns:{Count:e.length}}}getTypeName(e){if(e<0||e>=this.columnDescriptions.length)throw new Error(`Column ordinal ${e} is out of range`);let r=this.columnDescriptions[e].typeOid;switch(r){case _e.Bool:return"BOOL";case _e.Bytea:return"BYTEA";case _e.Char:return"CHAR";case _e.Name:return"NAME";case _e.Int8:return"INT8";case _e.Int2:return"INT2";case _e.Int4:return"INT4";case _e.Text:return"TEXT";case _e.BpChar:return"CHAR";case _e.VarChar:return"VARCHAR";case _e.Date:return"DATE";case _e.Time:return"TIME";case _e.Timestamp:return"TIMESTAMP";case _e.TimestampTz:return"TIMESTAMPTZ";case _e.Interval:return"INTERVAL";case _e.TimeTz:return"TIMETZ";case _e.Numeric:return"NUMERIC";case _e.Float4:return"FLOAT4";case _e.Float8:return"FLOAT8";case 2530:return"DATE";case 15:return"CHAR";case 16:return"BOOL";default:return`UNKNOWN(${r})`}}async read(){if(this.closed||this._isFinished||this._pendingColumns)return!1;let e;if(this._nextItem?(e={value:this._nextItem,done:!1},this._nextItem=null):e=await this.generator.next(),e.done)return this._markFinished(),this.currentRow=null,!1;let n=e.value;if(n.type==="DataRow")return this.currentRow=n.row,!0;if(n.type==="RowDescription")return this._pendingColumns=n.columns,this.currentRow=null,!1;if(n.type==="RowDescriptionStandard"){let r=this.command?._preparedStatement;return this._pendingColumns=r&&r.description?r.description:this.columnDescriptions,this.currentRow=null,!1}if(n.type==="CommandComplete")return this.currentRow=null,this.read();if(n.type==="ErrorResponse")throw new Error(n.message||"Unknown Netezza Error");return n.type==="ReadyForQuery"?(this._markFinished(),this.currentRow=null,!1):this.read()}getValue(e){return this._validateOrdinal(e),this.currentRow[e]}getValueByName(e){let n=this.getOrdinal(e);return this.getValue(n)}getName(e){if(e<0||e>=this.columnDescriptions.length)throw new Error(`Column ordinal ${e} is out of range`);return this.columnDescriptions[e].name}getOrdinal(e){let n=this._nameIndex[e.toLowerCase()];if(n===void 0)throw new Error(`Column '${e}' not found`);return n}get fieldCount(){return this.columnDescriptions?.length||0}get FieldCount(){return this.fieldCount}isDBNull(e){return this._validateOrdinal(e),this.currentRow[e]===null}getBoolean(e){let n=this.getValue(e);return n===null?!1:typeof n=="boolean"?n:typeof n=="string"?n.toLowerCase()==="t"||n==="1"||n.toLowerCase()==="true":!!n}getByte(e){let n=this.getValue(e);return n===null?0:Number(n)&255}getInt16(e){let n=this.getValue(e);return n===null?0:Number(n)}getInt32(e){let n=this.getValue(e);return n===null?0:Number(n)}getInt64(e){let n=this.getValue(e);return n===null?0:typeof n=="bigint"?n:Number(n)}getFloat(e){let n=this.getValue(e);return n===null?0:Number(n)}getDouble(e){let n=this.getValue(e);return n===null?0:Number(n)}getDecimal(e){let n=this.getValue(e);return n===null?0:typeof n=="string"?n:Number(n)}getString(e){let n=this.getValue(e);return n===null?null:typeof n=="string"?n:n.toString?n.toString():String(n)}getDateTime(e){let n=this.getValue(e);return n===null?null:n instanceof Date?n:new Date(n)}getTimeSpan(e){let n=this.getValue(e);if(n===null)return null;if(typeof n=="object"&&"hours"in n)return n;if(typeof n=="string"){let r=n.split(":");if(r.length>=2){let i=(r[2]||"0").split(".");return{hours:parseInt(r[0],10),minutes:parseInt(r[1],10),seconds:parseInt(i[0],10),microseconds:i.length>1?parseInt(i[1].padEnd(6,"0"),10):0,toString(){return n}}}}return n}getRowObject(){if(!this.currentRow)return null;let e={};for(let n=0;n<this.columnDescriptions.length;n++)e[this.columnDescriptions[n].name]=this.currentRow[n];return e}getValues(){return this.currentRow?[...this.currentRow]:[]}async close(){if(!this.closed){if(this.closed=!0,!this._isFinished&&this.generator)try{for await(let e of this.generator)if(e.type==="ReadyForQuery")break}catch{}this.releaseCallback&&(this.releaseCallback(),this.releaseCallback=null)}}get isClosed(){return this.closed}_validateOrdinal(e){if(!this.currentRow)throw new Error("No current row. Did you call read()?");if(e<0||e>=this.columnDescriptions.length)throw new Error(`Column ordinal ${e} is out of range`)}async*[Symbol.asyncIterator](){for(;await this.read();)yield this.getRowObject()}};KL.exports=cm});var ZL=C((Fxe,QL)=>{"use strict";var um=class{constructor(){this.version=null;this.nullsAllowed=null;this.sizeWord=null;this.sizeWordSize=null;this.numFixedFields=null;this.numVaryingFields=null;this.fixedFieldsSize=0;this.maxRecordSize=null;this.numFields=0;this.fieldType=[];this.fieldSize=[];this.fieldTrueSize=[];this.fieldOffset=[];this.fieldPhysField=[];this.fieldLogField=[];this.fieldNullAllowed=[];this.fieldFixedSize=[];this.fieldSpringField=[];this.dateStyle=null;this.euroDates=null}clear(){this.fieldType=[],this.fieldSize=[],this.fieldTrueSize=[],this.fieldOffset=[],this.fieldPhysField=[],this.fieldLogField=[],this.fieldNullAllowed=[],this.fieldFixedSize=[],this.fieldSpringField=[]}parse(e,n){this.clear();let r=0;this.version=e.readInt32BE(r),r+=4,this.nullsAllowed=e.readInt32BE(r),r+=4,this.sizeWord=e.readInt32BE(r),r+=4,this.sizeWordSize=e.readInt32BE(r),r+=4,this.numFixedFields=e.readInt32BE(r),r+=4,this.numVaryingFields=e.readInt32BE(r),r+=4,this.fixedFieldsSize=e.readInt32BE(r),r+=4,this.maxRecordSize=e.readInt32BE(r),r+=4,this.numFields=e.readInt32BE(r),r+=4;let i=3,s=39;for(let o=0;o<this.numFields;o++){let a=e.readInt32BE(r);a===i&&n?.description?.[o]?.typeOid===702&&(a=s),this.fieldType.push(a),this.fieldSize.push(e.readInt32BE(r+4)),this.fieldTrueSize.push(e.readInt32BE(r+8)),this.fieldOffset.push(e.readInt32BE(r+12)),this.fieldPhysField.push(e.readInt32BE(r+16)),this.fieldLogField.push(e.readInt32BE(r+20)),this.fieldNullAllowed.push(e.readInt32BE(r+24)!==0),this.fieldFixedSize.push(e.readInt32BE(r+28)),this.fieldSpringField.push(e.readInt32BE(r+32)),r+=36}this.dateStyle=e.readInt32BE(r),r+=4,this.euroDates=e.readInt32BE(r)}getFieldPrecision(e){return this.fieldSize[e]>>8&127}getFieldScale(e){return this.fieldSize[e]&255}getNumericDigitCount(e){return Math.floor(this.fieldTrueSize[e]/4)}};QL.exports=um});var Qn=C((Gxe,tD)=>{"use strict";var dm=j(require("net")),$s=j(require("fs")),eD=require("events");ZA();wL();var MQ=XL(),xt=tm(),UQ=jL(),BQ=JL(),FQ=ZL(),Ae=om()("nz:connection"),fm=class t extends eD.EventEmitter{constructor(n){super();this._socket=null;this._stream=null;this._backendProcessId=0;this._backendSecretKey=0;this._commandNumber=-1;this._connected=!1;this._rowDescription=null;this._rows=[];this._tupdesc=new FQ;this._tmpBuffer=Buffer.alloc(65536);this._intBuf=Buffer.allocUnsafe(65536);this._intBufStart=0;this._intBufEnd=0;this.commandTimeout=30;this.connectionTimeout=30;this._executing=!1;this._exportStream=null;this.config=n,n.connectionTimeout!==void 0&&(this.connectionTimeout=n.connectionTimeout)}static{this._streamRegistry=new Map}static registerImportStream(n,r){this._streamRegistry.set(n,r)}static unregisterImportStream(n){this._streamRegistry.delete(n)}async connect(){return new Promise((n,r)=>{if(!this.config.host)return r(new Error("Host is required"));let i=!1,s;this.connectionTimeout>0&&(s=setTimeout(()=>{i=!0,Ae("Connection timeout triggered after",this.connectionTimeout,"seconds"),this._socket&&this._socket.destroy(),r(new Error(`Connection timeout after ${this.connectionTimeout} seconds`))},this.connectionTimeout*1e3));let o=()=>{s&&(clearTimeout(s),s=void 0)};this._socket=new dm.Socket,this._socket.connect(this.config.port||5480,this.config.host,async()=>{if(i)return;Ae("Socket connected"),this._socket.setNoDelay(!0),this._stream=this._socket;let a=new MQ(this._socket,this._stream,this.config.host,this.config);try{if(this._stream=await a.startup(this.config.database,this.config.user,this.config.password),i)return;o(),this._connected=!0,this._backendProcessId=a.backendProcessId,this._backendSecretKey=a.backendSecretKey,n()}catch(l){o(),this._socket.destroy(),r(l)}}),this._socket.on("error",a=>{Ae("Socket error",a),o(),this._connected?this.emit("error",a):r(a)}),this._socket.on("close",()=>{Ae("Socket closed"),o(),this._connected=!1,this.emit("close")})})}async cancel(){if(!(!this._backendProcessId||!this._backendSecretKey))return new Promise((n,r)=>{let i=new dm.Socket;i.on("error",s=>{Ae("Cancel socket error",s),r(s)}),i.connect(this.config.port||5480,this.config.host,()=>{let s=Buffer.alloc(16);xt.writeInt32(s,16,0),xt.writeInt32(s,80877102,4),xt.writeInt32(s,this._backendProcessId,8),xt.writeInt32(s,this._backendSecretKey,12),i.write(s,()=>{}),i.on("close",()=>n()),i.on("end",()=>n()),i.on("error",()=>n())})})}close(){this._socket&&(this._socket.end(),this._socket.destroy())}createCommand(n){let r=new UQ(this);return n&&(r.commandText=n),r}async beginTransaction(){let n=this.createCommand("BEGIN");await this.execute(n)}async commit(){let n=this.createCommand("COMMIT");await this.execute(n)}async rollback(){let n=this.createCommand("ROLLBACK");await this.execute(n)}async _readBytes(n){if(this._intBufEnd-this._intBufStart>=n){let r=Buffer.from(this._intBuf.subarray(this._intBufStart,this._intBufStart+n));return this._intBufStart+=n,r}return this._readBytesSlow(n)}async _readBytesSlow(n){if(n>this._intBuf.length){let i=[],s=this._intBufEnd-this._intBufStart;s>0&&(i.push(Buffer.from(this._intBuf.subarray(this._intBufStart,this._intBufEnd))),this._intBufStart=0,this._intBufEnd=0);let o=n-s;for(;o>0;){let a=this._stream.read();a!==null?a.length<=o?(i.push(a),o-=a.length):(i.push(a.slice(0,o)),this._feedBuffer(a.slice(o)),o=0):await this._waitForReadable()}return Buffer.concat(i,n)}if(this._intBuf.length-this._intBufStart<n){let i=this._intBufEnd-this._intBufStart;this._intBuf.copy(this._intBuf,0,this._intBufStart,this._intBufEnd),this._intBufStart=0,this._intBufEnd=i}for(;this._intBufEnd-this._intBufStart<n;){let i=this._stream.read();if(i!==null){let s=this._intBuf.length-this._intBufEnd;i.length<=s?(i.copy(this._intBuf,this._intBufEnd),this._intBufEnd+=i.length):(i.copy(this._intBuf,this._intBufEnd,0,s),this._intBufEnd+=s,this._stream.unshift(i.slice(s)))}else await this._waitForReadable()}let r=Buffer.from(this._intBuf.subarray(this._intBufStart,this._intBufStart+n));return this._intBufStart+=n,r}async _waitForReadable(){if(!this._socket||this._socket.destroyed)throw new Error("Socket closed or destroyed during read");return new Promise((n,r)=>{let i=()=>{this._stream.removeListener("readable",s),this._stream.removeListener("close",o),this._stream.removeListener("error",a),this._stream.removeListener("end",o)},s=()=>{i(),n()},o=()=>{i(),r(new Error("Socket closed/ended during read"))},a=l=>{i(),r(l)};this._stream.once("readable",s),this._stream.once("close",o),this._stream.once("end",o),this._stream.once("error",a)})}_feedBuffer(n){this._stream.unshift(n)}async _readInt32(){await this._ensureBufferData(4);let n=this._intBuf.readInt32BE(this._intBufStart);return this._intBufStart+=4,n}async _readInt16(){await this._ensureBufferData(2);let n=this._intBuf.readInt16BE(this._intBufStart);return this._intBufStart+=2,n}async _readByte(){await this._ensureBufferData(1);let n=this._intBuf[this._intBufStart];return this._intBufStart+=1,n}async _ensureBufferData(n){if(!(this._intBufEnd-this._intBufStart>=n)){if(this._intBuf.length-this._intBufStart<n){let r=this._intBufEnd-this._intBufStart;this._intBuf.copy(this._intBuf,0,this._intBufStart,this._intBufEnd),this._intBufStart=0,this._intBufEnd=r}for(;this._intBufEnd-this._intBufStart<n;){let r=this._stream.read();if(r!==null){let i=this._intBuf.length-this._intBufEnd;r.length<=i?(r.copy(this._intBuf,this._intBufEnd),this._intBufEnd+=r.length):(r.copy(this._intBuf,this._intBufEnd,0,i),this._intBufEnd+=i,this._stream.unshift(r.slice(i)))}else await this._waitForReadable()}}}async execute(n,r=!1){let i=n.commandTimeout;if(!i||i<=0)return this._doExecute(n);let s,o=this._doExecute(n),a=new Promise((l,c)=>{s=setTimeout(async()=>{Ae("Command timeout triggered");try{await this.cancel(),c(new Error("Command execution timeout"))}catch(u){c(new Error("Command execution timeout (Cancel failed: "+u.message+")"))}},i*1e3)});try{return await Promise.race([o,a])}catch(l){throw l.message&&l.message.includes("Command execution timeout")&&o.catch(()=>{}),l}finally{clearTimeout(s)}}async _doExecute(n){if(this._executing)throw new Error("Connection is already executing a command");this._executing=!0;try{Ae("Executing:",n.commandText),this._preExecution(n.commandText);let r=null;for await(let i of this._responseGenerator(n))i.type==="ErrorResponse"&&(r=new Error("Netezza Error: "+i.message));if(r)throw r;return!0}finally{this._executing=!1}}async executeReader(n){let r=n.commandTimeout||this.commandTimeout;if(!r||r<=0)return this._doExecuteReader(n);let i,s=this._doExecuteReader(n),o=new Promise((a,l)=>{i=setTimeout(async()=>{Ae("Command timeout triggered");try{await this.cancel(),l(new Error("Command execution timeout"))}catch(c){l(new Error("Command execution timeout (Cancel failed: "+c.message+")"))}},r*1e3)});try{return await Promise.race([s,o])}catch(a){throw a.message&&a.message.includes("Command execution timeout")&&s.catch(()=>{}),a}finally{clearTimeout(i)}}async _doExecuteReader(n){if(this._executing)throw new Error("Connection is already executing a command");this._executing=!0;try{Ae("Executing Reader:",n.commandText),this._preExecution(n.commandText);let r=this._responseGenerator(n),i=[],s=await r.next(),o=null,a=null;for(;!s.done;){let l=s.value;if(l.type==="RowDescription")i=l.columns;else if(l.type==="RowDescriptionStandard"){let c=l.desc;if(c&&c.numFields>0&&i.length===0){let u=n._preparedStatement;u&&u.description&&(i=u.description)}}else if(l.type==="DataRow"||l.type==="CommandComplete"||l.type==="ReadyForQuery"){if(!o&&i.length>0){a=l;break}}else l.type==="ErrorResponse"&&(o=new Error("Netezza Error: "+l.message));s=await r.next()}if(o)throw this._executing=!1,o;return new BQ(n,r,i,()=>{this._executing=!1},a)}catch(r){throw this._executing=!1,r}}_preExecution(n){let r=Buffer.from(n,"utf8"),i=Buffer.allocUnsafe(5+r.length+1);i[0]=80,this._commandNumber!==-1?(this._commandNumber++,i.writeInt32BE(this._commandNumber,1)):(i[1]=255,i[2]=255,i[3]=255,i[4]=255),this._commandNumber>1e5&&(this._commandNumber=1),r.copy(i,5),i[5+r.length]=0,this._stream.write(i)}async*_responseGenerator(n){this._rows=[],this._rowDescription=null;let r=!1;for(;!r;){let i=await this._readByte();for(;i===0;)i=await this._readByte();if(i===117){await this._handleExternalTableExportStart();continue}if(i===85){await this._handleExternalTableExportData();continue}if(i===108){await this._handleExternalTableImport();continue}if(i===120){await this._readBytes(4),Ae("Error operation cancel (Ext Tbl)");continue}if(i===101){await this._readBytes(4);let o=xt.readInt32(await this._readBytes(4)),a=(await this._readBytes(o-1)).toString("utf8");await this._readBytes(1);let l=[],c=(await this._readBytes(1))[0];for(l.push(c);c=(await this._readBytes(1))[0],c!==0;)l.push(c);let u=xt.readInt32(await this._readBytes(4));await this._consumeExternalTableLogData();continue}let s=await this._readBytes(4);if(i===_n.CommandComplete){let o=await this._readInt32(),a=await this._readBytes(o);Ae("CommandComplete:",a.toString("utf8")),yield{type:"CommandComplete",text:a.toString("utf8")};continue}if(i===_n.ReadyForQuery){r=!0,yield{type:"ReadyForQuery"};continue}if(i===76){r=!0;continue}if(!(i===48||i===65)){if(i===80){let o=await this._readInt32();await this._readBytes(o);continue}if(i===_n.ErrorResponse){let o=await this._readInt32();yield{type:"ErrorResponse",message:(await this._readBytes(o)).toString("utf8")};continue}if(i===_n.RowDescription){let o=await this._readInt32(),a=await this._readBytes(o);this._parseRowDescription(a,n),yield{type:"RowDescription",columns:this._rowDescription};continue}if(i===_n.DataRow){let o=await this._readInt32(),a=await this._readBytes(o);yield{type:"DataRow",row:this._parseDataRow(a)};continue}if(i===_n.RowDescriptionStandard){let o=await this._readInt32(),a=await this._readBytes(o);this._tupdesc.parse(a,n._preparedStatement),yield{type:"RowDescriptionStandard",desc:this._tupdesc};continue}if(i===_n.RowStandard){yield{type:"DataRow",row:await this._resReadDbosTuple(n)};continue}if(i===_n.NoticeResponse){let o=await this._readInt32(),l=(await this._readBytes(o)).toString("utf8").replace(/\0/g,"").trim();this.emit("notice",{message:l});continue}Ae("Unknown message:","0x"+i.toString(16));try{let o=await this._readInt32();o>0&&o<1e7&&await this._readBytes(o)}catch{}}}}async _consumeExternalTableLogData(){for(;;){let n=await this._readBytes(4),r=xt.readInt32(n);if(r===0)return;let i=await this._readBytes(r);Ae("ExtLog Content:",i.toString("utf8"))}}async _handleExternalTableExportStart(){await this._readBytes(4),await this._readBytes(10),await this._readBytes(16);let n=xt.readInt32(await this._readBytes(4)),i=(await this._readBytes(n)).toString("utf8");Ae("ExternalTable Export Start. File:",i);try{this._exportStream=$s.createWriteStream(i),this._exportStream.on("error",o=>{Ae("Export Stream Error:",o)});let s=Buffer.alloc(4);await new Promise(o=>this._stream.write(s,()=>o()))}catch(s){Ae("Error opening export file:",s);let o=Buffer.alloc(4);xt.writeInt32(o,1,0),this._stream.write(o)}}async _handleExternalTableExportData(){Ae("Handle Export Data: Skipping 8 bytes...");let n=await this._readBytes(4);Ae("Skipped 4:",n.toString("hex"));let r=await this._readBytes(4);Ae("Skipped 4 (2):",r.toString("hex")),await this._consumeExternalTableData(this._exportStream),this._exportStream=null}async _consumeExternalTableData(n){for(Ae("Entering Consume Loop");;){Ae("Reading status...");let r=await this._readBytes(4),i=xt.readInt32(r);if(Ae("ExtTab Status:",i),i===Hs.DATA){let s=xt.readInt32(await this._readBytes(4));Ae("Block Length:",s);let o=await this._readBytes(s);n&&n.write(o)}else if(i===Hs.DONE){Ae("ExternalTable Data Done"),n&&await new Promise(s=>{if(Ae("Waiting for writeStream finish..."),n.writableFinished)return Ae("Stream already finished"),s();let o=setTimeout(()=>{Ae("Stream finish timeout! Destroying..."),n.destroy(),s()},5e3),a=()=>{Ae("Stream finished event"),clearTimeout(o),c(),s()},l=u=>{Ae("Stream error on end:",u),clearTimeout(o),c(),s()},c=()=>{n.removeListener("finish",a),n.removeListener("error",l)};n.on("finish",a),n.on("error",l),n.end()});return}else if(i===Hs.ERROR){let s=xt.readInt16(await this._readBytes(2)),o=(await this._readBytes(s)).toString("utf8");Ae("ExternalTable Data Error:",o),n&&n.end();return}else{Ae("Unknown ExtTab Status:",i),n&&n.end();return}}}async _handleExternalTableImport(){await this._readBytes(8);let n=[],r=(await this._readBytes(1))[0];for(n.push(r);r!==0;)r=(await this._readBytes(1))[0],r!==0&&n.push(r);let i=Buffer.from(n).toString("utf8");Ae("ExternalTable Import Start. File:",i);let s=xt.readInt32(await this._readBytes(4));Ae("Host Version:",s);let o=Buffer.alloc(4);xt.writeInt32(o,1,0),await new Promise(E=>this._stream.write(o,()=>E())),Ae("Sent Client Version");let a=xt.readInt32(await this._readBytes(4)),l=xt.readInt32(await this._readBytes(4));if(Ae("ExtTab Import Config:",{hostVersion:s,format:a,bufSize:l}),t._streamRegistry.has(i))Ae("Using virtual import stream for:",i);else if(!$s.existsSync(i)){Ae("Import file not found:",i);let E=Buffer.alloc(4);xt.writeInt32(E,Hs.ERROR,0),this._stream.write(E);return}let c=0,u;t._streamRegistry.has(i)?(u=t._streamRegistry.get(i),c=u.byteLength||0):(c=$s.statSync(i).size,u=$s.createReadStream(i,{highWaterMark:l||65536}));let d=0;await new Promise((E,f)=>{u.on("data",p=>{let h=Buffer.isBuffer(p)?p:Buffer.from(p),T=Buffer.alloc(8);xt.writeInt32(T,Hs.DATA,0),xt.writeInt32(T,h.length,4),this._stream.write(T),this._stream.write(h),d+=h.length,this.emit("importProgress",{bytesSent:d,totalSize:c,percentComplete:c>0?Math.round(d/c*100):0})}),u.on("end",()=>{Ae("Import Stream End");let p=Buffer.alloc(4);xt.writeInt32(p,Hs.DONE,0),this._stream.write(p),E()}),u.on("error",p=>{Ae("Import Stream Error:",p);let h=Buffer.alloc(4);xt.writeInt32(h,Hs.ERROR,0),this._stream.write(h);let T=p.message||"Error",S=Buffer.alloc(2);S.writeInt16BE(T.length),this._stream.write(S),this._stream.write(Buffer.from(T,"utf8")),f(p)})})}_parseRowDescription(n,r){Ae("parseRowDescription data length:",n.length,"hex:",n.toString("hex").substring(0,100));let i=0;if(n.length<2){Ae("Data too short for row description");return}let s=n.readInt16BE(i);i+=2,Ae("Column count:",s),this._rowDescription=[];for(let o=0;o<s&&i<n.length;o++){let a=i;for(;i<n.length&&n[i]!==0;)i++;let l=n.toString("utf8",a,i);if(i++,i+11>n.length){Ae("Not enough data for column",o,"at offset",i,"need 11 more, have",n.length-i);break}let c=n.readInt32BE(i);i+=4;let u=n.readInt16BE(i);i+=2;let d=n.readInt32BE(i);i+=4;let E=n[i];i+=1,this._rowDescription.push({name:l,typeOid:c,typeLen:u,typeMod:d,format:E}),Ae("Column",o,":",l,"typeOid:",c,"typeLen:",u)}r&&(r._preparedStatement={description:this._rowDescription})}_parseDataRow(n){let r=this._rowDescription.length,s=Math.ceil(r/8),o=[];for(let a=0;a<r;a++){let l=n[Math.floor(a/8)],c=7-a%8;if(!((l&1<<c)!==0)){o.push(null);continue}let d=n.readInt32BE(s);s+=4;let E=d-4;if(E<=0){o.push(null);continue}let p=this._rowDescription[a]?.typeOid,h=n.toString("utf8",s,s+E);p===1083?o.push(OL(h)):o.push(h),s+=E}return o}async _resReadDbosTuple(n){let r=this._tupdesc.numFields;await this._readBytes(4);let i=xt.readInt32(await this._readBytes(4)),s=await this._readBytes(i),o=new Array(r);for(let a=0;a<r;a++){if(this._columnIsNull(s,a)){o[a]=null;continue}let l=this._cTableFieldAt(s,a),c=this._tupdesc.fieldType[a],u=this._tupdesc.fieldSize[a];o[a]=this._parseFieldByType(l,c,u,a)}return o}_parseFieldByType(n,r,i,s){switch(r){case Kt.NzTypeChar:return n.toString("latin1",0,i).trimEnd();case Kt.NzTypeNChar:case Kt.NzTypeNVarChar:{let o=n.readInt16LE(0)-2;return n.toString("utf8",2,2+o)}case Kt.NzTypeVarChar:case Kt.NzTypeVarFixedChar:{let o=n.readInt16LE(0)-2;return n.toString("latin1",2,2+o)}case Kt.NzTypeInt8:return n.readBigInt64LE(0);case Kt.NzTypeInt:return n.readInt32LE(0);case Kt.NzTypeInt2:return n.readInt16LE(0);case Kt.NzTypeInt1:return n.readInt8(0);case Kt.NzTypeDouble:return n.readDoubleLE(0);case Kt.NzTypeFloat:return n.readFloatLE(0);case Kt.NzTypeDate:return NL(n);case Kt.NzTypeTime:return wE(n);case Kt.NzTypeInterval:return CL(n);case Kt.NzTypeTimeTz:return bL(n,i);case Kt.NzTypeTimestamp:return _L(n);case Kt.NzTypeBool:return n[0]===1;case Kt.NzTypeNumeric:{let o=this._tupdesc.getFieldPrecision(s),a=this._tupdesc.getFieldScale(s),l=this._tupdesc.getNumericDigitCount(s);return yL(n,o,a,l)}default:return n.toString("utf8",0,i)}}_columnIsNull(n,r){if(!this._tupdesc.nullsAllowed)return!1;let i=this._tupdesc.fieldPhysField[r];return(n[2+Math.floor(i/8)]&1<<i%8)!==0}_cTableFieldAt(n,r){if(this._tupdesc.fieldFixedSize[r]!==0)return n.slice(this._tupdesc.fieldOffset[r]);let i=n.slice(this._tupdesc.fixedFieldsSize);for(let s=0;s<this._tupdesc.fieldOffset[r];s++){let o=i.readInt16LE(0);i=i.slice(o%2===0?o:o+1)}return i}};tD.exports=fm});var vE={};Pt(vE,{createNzConnection:()=>Em});function Em(t){let e=Qn();return new e(t)}var fu=G(()=>{"use strict"});var Eu,Ji,hm=G(()=>{"use strict";Eu=j(require("vscode")),Ji=class t{constructor(e){this.context=e;this._connections={};this._activeConnectionName=null;this._documentConnections=new Map;this._documentPersistentConnections=new Map;this._documentPersistentConnectionMeta=new Map;this._documentKeepConnectionOpen=new Map;this._documentDatabaseOverride=new Map;this._onDidChangeConnections=new Eu.EventEmitter;this.onDidChangeConnections=this._onDidChangeConnections.event;this._onDidChangeActiveConnection=new Eu.EventEmitter;this.onDidChangeActiveConnection=this._onDidChangeActiveConnection.event;this._onDidChangeDocumentConnection=new Eu.EventEmitter;this.onDidChangeDocumentConnection=this._onDidChangeDocumentConnection.event;this._onDidChangeDocumentDatabase=new Eu.EventEmitter;this.onDidChangeDocumentDatabase=this._onDidChangeDocumentDatabase.event;this._loadingPromise=this.loadConnections()}static{this.SERVICE_NAME="netezza-vscode-connections"}static{this.ACTIVE_CONN_KEY="netezza-active-connection"}async loadConnections(){this._activeConnectionName=this.context.globalState.get(t.ACTIVE_CONN_KEY)||null;let e=await this.context.secrets.get(t.SERVICE_NAME);if(e)try{this._connections=JSON.parse(e)}catch(n){console.error("Failed to parse connections:",n),this._connections={}}else{let n=await this.context.secrets.get("netezza-vscode");if(n)try{let r=JSON.parse(n);if(r&&r.host){let i=`Default (${r.host})`;this._connections={[i]:{...r,name:i}},this._activeConnectionName=i,await this.saveConnectionsToStorage()}}catch{}}this._onDidChangeConnections.fire()}async ensureLoaded(){await this._loadingPromise}async saveConnectionsToStorage(){await this.context.secrets.store(t.SERVICE_NAME,JSON.stringify(this._connections)),this._activeConnectionName?await this.context.globalState.update(t.ACTIVE_CONN_KEY,this._activeConnectionName):await this.context.globalState.update(t.ACTIVE_CONN_KEY,void 0)}async saveConnection(e){if(await this.ensureLoaded(),!e.name)throw new Error("Connection name is required");this._connections[e.name]=e,this._activeConnectionName||await this.setActiveConnection(e.name),await this.saveConnectionsToStorage(),this._onDidChangeConnections.fire()}async deleteConnection(e){if(await this.ensureLoaded(),this._connections[e]){if(delete this._connections[e],this._activeConnectionName===e){let n=Object.keys(this._connections);await this.setActiveConnection(n.length>0?n[0]:null)}await this.saveConnectionsToStorage(),this._onDidChangeConnections.fire()}}async getConnections(){return await this.ensureLoaded(),Object.values(this._connections)}async getConnection(e){return await this.ensureLoaded(),this._connections[e]}async setActiveConnection(e){await this.ensureLoaded(),this._activeConnectionName=e,await this.context.globalState.update(t.ACTIVE_CONN_KEY,e),this._onDidChangeActiveConnection.fire(e)}getActiveConnectionName(){return this._activeConnectionName}async getCurrentDatabase(e){await this.ensureLoaded();let n=e||this._activeConnectionName;return n&&this._connections[n]?.database||null}setDocumentKeepConnectionOpen(e,n){this._documentKeepConnectionOpen.set(e,n),n||this.closeDocumentPersistentConnection(e)}getDocumentKeepConnectionOpen(e){let n=this._documentKeepConnectionOpen.get(e);return n!==void 0?n:!0}hasDocumentKeepConnectionOpen(e){return this._documentKeepConnectionOpen.has(e)}toggleDocumentKeepConnectionOpen(e){let r=!this.getDocumentKeepConnectionOpen(e);return this.setDocumentKeepConnectionOpen(e,r),r}async getDocumentPersistentConnection(e,n){let r=n||this.getConnectionForExecution(e);if(!r)throw new Error("No connection selected for this document");let i=await this.getConnection(r);if(!i)throw new Error(`Connection '${r}' not found or invalid`);let s=this._documentDatabaseOverride.get(e)||i.database,o=this._documentPersistentConnections.get(e),a=this._documentPersistentConnectionMeta.get(e);if(o&&a){if(a.connectionName===r&&a.database===s)return o;await this.closeDocumentPersistentConnection(e)}else o&&!a&&await this.closeDocumentPersistentConnection(e);let{createNzConnection:l}=(fu(),Lo(vE)),c=l({host:i.host,port:i.port||5480,database:s,user:i.user,password:i.password});return await c.connect(),this._documentPersistentConnections.set(e,c),this._documentPersistentConnectionMeta.set(e,{connectionName:r,database:s}),c}async closeDocumentPersistentConnection(e){let n=this._documentPersistentConnections.get(e);if(n){try{await n.close()}catch(r){console.error(`Error closing document connection for ${e}:`,r)}this._documentPersistentConnections.delete(e),this._documentPersistentConnectionMeta.delete(e)}}async closeAllDocumentPersistentConnections(){for(let e of this._documentPersistentConnections.keys())await this.closeDocumentPersistentConnection(e)}dispose(){this.closeAllDocumentPersistentConnections(),this._onDidChangeConnections.dispose(),this._onDidChangeActiveConnection.dispose(),this._onDidChangeDocumentConnection.dispose(),this._onDidChangeDocumentDatabase.dispose()}getDocumentDatabase(e){return this._documentDatabaseOverride.get(e)}setDocumentDatabase(e,n){this._documentDatabaseOverride.set(e,n),this.closeDocumentPersistentConnection(e),this._onDidChangeDocumentDatabase.fire(e)}clearDocumentDatabase(e){this._documentDatabaseOverride.delete(e),this.closeDocumentPersistentConnection(e),this._onDidChangeDocumentDatabase.fire(e)}async getEffectiveDatabase(e){let n=this._documentDatabaseOverride.get(e);if(n)return n;let r=this.getConnectionForExecution(e);return r&&(await this.getConnection(r))?.database||null}getDocumentConnection(e){return this._documentConnections.get(e)}setDocumentConnection(e,n){this._documentConnections.set(e,n),this.closeDocumentPersistentConnection(e),this._onDidChangeDocumentConnection.fire(e)}clearDocumentConnection(e){this._documentConnections.delete(e),this._documentDatabaseOverride.delete(e),this.closeDocumentPersistentConnection(e),this._documentKeepConnectionOpen.delete(e),this._documentPersistentConnectionMeta.delete(e),this._onDidChangeDocumentConnection.fire(e)}setDocumentLastSessionId(e,n){let r=this._documentPersistentConnectionMeta.get(e);r&&(r.lastSessionId=n)}getDocumentLastSessionId(e){return this._documentPersistentConnectionMeta.get(e)?.lastSessionId}getConnectionForExecution(e){if(e){let n=this._documentConnections.get(e);if(n)return n}return this._activeConnectionName||void 0}}});var nD={};Pt(nD,{QueryHistoryManager:()=>Nn});var Xt,pm,Nn,ME=G(()=>{"use strict";Xt=j(require("fs")),pm=j(require("path")),Nn=class t{constructor(e){this.context=e;this.cache=[];this.initialized=!1;this.writeQueue=Promise.resolve();this.archiveQueue=Promise.resolve();if(this.context.globalStorageUri){let n=this.context.globalStorageUri.fsPath;this.historyFilePath=pm.join(n,"query-history.json"),this.archiveFilePath=pm.join(n,"query-history-archive.json");try{Xt.existsSync(n)||Xt.mkdirSync(n,{recursive:!0})}catch(r){console.error("[QueryHistoryManager] Error creating storage directory:",r)}}this.initialize()}static{this.STORAGE_KEY="queryHistory"}static{this.ACTIVE_LIMIT=1e3}static{this.BATCH_ARCHIVE_SIZE=100}static{this.STORAGE_VERSION=1}static getInstance(e){return t.instance||(t.instance=new t(e)),t.instance}async initialize(){if(!this.initialized)return this.initPromise?this.initPromise:(this.initPromise=this._initializeInternal().finally(()=>{this.initPromise=void 0}),this.initPromise)}async _initializeInternal(){if(!this.initialized)try{let e=!1;if(this.historyFilePath&&Xt.existsSync(this.historyFilePath))try{let n=await Xt.promises.readFile(this.historyFilePath,"utf-8");if(!n||!n.trim())console.log("[QueryHistoryManager] File is empty, starting fresh"),this.cache=[],e=!0;else{let r=JSON.parse(n);r&&r.entries&&(this.cache=r.entries,e=!0)}}catch(n){console.warn("[QueryHistoryManager] Corrupted history file, resetting:",n),this.cache=[],e=!0;try{await this.saveToStorage(),console.log("[QueryHistoryManager] Reset corrupted file to empty state")}catch(r){console.error("[QueryHistoryManager] Failed to reset file:",r)}}if(!e){let n=this.context.globalState.get(t.STORAGE_KEY);n&&n.entries&&(this.cache=n.entries,console.log(`\u2705 Migrated ${this.cache.length} entries from globalState`),await this.saveToStorage(),await this.context.globalState.update(t.STORAGE_KEY,void 0))}this.cache.length>t.ACTIVE_LIMIT+t.BATCH_ARCHIVE_SIZE&&(console.log(`[QueryHistoryManager] Cache (${this.cache.length}) exceeds active limit. Migrating to archive...`),await this.flushToArchive()),this.initialized=!0}catch(e){console.error("\u274C Error initializing query history:",e),this.cache=[],this.initialized=!0}}async saveToStorage(){if(!this.historyFilePath)return;let e=async()=>{try{let n={entries:this.cache,version:t.STORAGE_VERSION};await Xt.promises.writeFile(this.historyFilePath,JSON.stringify(n),"utf-8")}catch(n){console.error("Error saving to storage:",n)}};return this.writeQueue=this.writeQueue.then(e,e),this.writeQueue}async flushToArchive(){if(!this.archiveFilePath)return;let e=async()=>{try{if(this.cache.length-t.ACTIVE_LIMIT<=0)return;let r=this.cache.slice(t.ACTIVE_LIMIT);this.cache=this.cache.slice(0,t.ACTIVE_LIMIT),await this.saveToStorage();let i=[];if(Xt.existsSync(this.archiveFilePath))try{let o=await Xt.promises.readFile(this.archiveFilePath,"utf-8");if(o.trim()){let a=JSON.parse(o);i=Array.isArray(a)?a:a.entries||[]}}catch(o){console.warn("Error reading archive file, starting fresh archive append:",o)}let s=[...r,...i];await Xt.promises.writeFile(this.archiveFilePath,JSON.stringify({entries:s}),"utf-8"),console.log(`[QueryHistoryManager] Archived ${r.length} items. Active: ${this.cache.length}, Archive: ${s.length}`)}catch(n){console.error("Error flushing to archive:",n)}};return this.archiveQueue=this.archiveQueue.then(e,e),this.archiveQueue}async addEntry(e,n,r,i,s,o,a){try{this.initialized||await this.initialize();let l=`${Date.now()}-${Math.random().toString(36).substring(2,9)}`,c=Date.now(),u={id:l,host:e,database:n,schema:r,query:i.trim(),timestamp:c,connectionName:s,is_favorite:!1,tags:o||"",description:a||""};this.cache.unshift(u),this.cache.length>=t.ACTIVE_LIMIT+t.BATCH_ARCHIVE_SIZE?await this.flushToArchive():await this.saveToStorage()}catch(l){console.error("Error adding query to history:",l)}}async getHistory(e,n=0){return this.initialized||await this.initialize(),e!==void 0?this.cache.slice(n,n+e):[...this.cache]}async deleteEntry(e){try{this.initialized||await this.initialize();let n=this.cache.length;this.cache=this.cache.filter(r=>r.id!==e),this.cache.length!==n&&await this.saveToStorage()}catch(n){console.error("Error deleting entry:",n)}}async clearHistory(){try{this.initialized||await this.initialize(),this.cache=[],await this.saveToStorage(),this.archiveFilePath&&Xt.existsSync(this.archiveFilePath)&&await Xt.promises.unlink(this.archiveFilePath),console.log("All query history cleared")}catch(e){console.error("Error clearing history:",e)}}async getStats(){try{this.initialized||await this.initialize();let e=this.cache.length,n=JSON.stringify(this.cache),r=parseFloat((n.length/(1024*1024)).toFixed(2)),i=0,s=0;if(this.archiveFilePath&&Xt.existsSync(this.archiveFilePath)){let o=await Xt.promises.stat(this.archiveFilePath);s=parseFloat((o.size/(1024*1024)).toFixed(2));try{if(o.size<50*1024*1024){let a=await Xt.promises.readFile(this.archiveFilePath,"utf-8"),l=JSON.parse(a);l&&l.entries?i=l.entries.length:Array.isArray(l)&&(i=l.length)}else i=-1}catch(a){console.debug("[QueryHistoryManager] Error reading archive for stats:",a)}}return{activeEntries:e,archivedEntries:i===-1?99999:i,totalEntries:e+(i===-1?0:i),activeFileSizeMB:r,archiveFileSizeMB:s,totalFileSizeMB:parseFloat((r+s).toFixed(2))}}catch(e){return console.error("Error getting stats:",e),{activeEntries:0,archivedEntries:0,totalEntries:0,activeFileSizeMB:0,archiveFileSizeMB:0,totalFileSizeMB:0}}}async toggleFavorite(e){try{this.initialized||await this.initialize();let n=this.cache.find(r=>r.id===e);n&&(n.is_favorite=!n.is_favorite,await this.saveToStorage())}catch(n){console.error("Error toggling favorite:",n)}}async updateEntry(e,n,r){try{this.initialized||await this.initialize();let i=this.cache.find(s=>s.id===e);i&&(n!==void 0&&(i.tags=n),r!==void 0&&(i.description=r),await this.saveToStorage())}catch(i){console.error("Error updating entry:",i)}}async getFavorites(){return this.initialized||await this.initialize(),this.cache.filter(e=>e.is_favorite)}async getByTag(e){return this.initialized||await this.initialize(),this.cache.filter(n=>n.tags?.toLowerCase().includes(e.toLowerCase()))}async getAllTags(){this.initialized||await this.initialize();let e=new Set;return this.cache.forEach(n=>{n.tags&&n.tags.split(",").forEach(i=>{let s=i.trim();s&&e.add(s)})}),Array.from(e).sort()}async searchAll(e){this.initialized||await this.initialize();let n=e.toLowerCase();return this.cache.filter(i=>i.query.toLowerCase().includes(n)||i.host.toLowerCase().includes(n)||i.database&&i.database.toLowerCase().includes(n)||i.schema&&i.schema.toLowerCase().includes(n)||i.tags?.toLowerCase().includes(n)||i.description?.toLowerCase().includes(n))}async searchArchive(e,n=50){if(!this.archiveFilePath||!Xt.existsSync(this.archiveFilePath))return[];try{let r=await Xt.promises.readFile(this.archiveFilePath,"utf-8");if(!r)return[];let i=JSON.parse(r),s=Array.isArray(i)?i:i.entries||[],o=e.toLowerCase(),a=[];for(let l of s){if(a.length>=n)break;(l.query.toLowerCase().includes(o)||l.host.toLowerCase().includes(o)||l.database&&l.database.toLowerCase().includes(o))&&a.push(l)}return a}catch(r){return console.error("Error searching archive:",r),[]}}async getFilteredHistory(e,n,r,i){this.initialized||await this.initialize();let s=this.cache.filter(o=>!(e&&o.host!==e||n&&o.database!==n||r&&o.schema!==r));return i&&(s=s.slice(0,i)),s}async getArchivedHistory(){return[]}async clearArchive(){this.archiveFilePath&&Xt.existsSync(this.archiveFilePath)&&await Xt.promises.unlink(this.archiveFilePath)}close(){console.log("Query history manager closed")}}});function Po(t){let e=new Set;if(!t)return e;for(let n of t.matchAll(/\$\{([A-Za-z_][A-Za-z0-9_]*)\}/g))n[1]&&e.add(n[1]);for(let n of t.matchAll(/\$([A-Za-z_][A-Za-z0-9_]*)(?!\s*\})/g)){let r=n[0],i=n.index;if(i>0&&t[i-1]==="{")continue;let s=i+r.length;s<t.length&&t[s]==="}"||n[1]&&e.add(n[1])}return e}function xo(t){if(!t)return{sql:"",setValues:{}};let e=t.split(/\r?\n/),n=[],r={};for(let i of e){let s=i.match(/^\s*@SET\s+([A-Za-z0-9_]+)\s*=\s*(.+)$/i);if(s){let o=s[2].trim(),a=o.indexOf(";"),l="";a!==-1&&(l=o.substring(a+1).trim(),o=o.substring(0,a).trim()),o.endsWith(";")&&(o=o.slice(0,-1).trim());let c=o.match(/^'(.*)'$/s)||o.match(/^"(.*)"$/s);c&&(o=c[1]),r[s[1]]=o,l&&n.push(l)}else n.push(i)}return{sql:n.join(`
`),setValues:r}}function hu(t,e){let n=t.replace(/\$\{([A-Za-z_][A-Za-z0-9_]*)\}/g,(i,s)=>e[s]??""),r=Object.keys(e).sort((i,s)=>s.length-i.length);for(let i of r)if(/^[A-Za-z_]/.test(i)){let s=new RegExp(`\\$${i}(?![A-Za-z0-9_])`,"g");n=n.replace(s,e[i]??"")}return n}var UE=G(()=>{"use strict"});var al,BE,rD=G(()=>{"use strict";al=j(require("vscode")),BE=class t{constructor(e,n,r,i){this.extensionUri=n;this.variables=r;this.defaults=i;this._disposables=[];this._panel=e,this._panel.onDidDispose(()=>this.dispose(),null,this._disposables),this._panel.webview.html=this._getHtmlForWebview(this._panel.webview),this._panel.webview.onDidReceiveMessage(s=>{switch(s.command){case"submit":this._resolvePromise&&(this._resolvePromise(s.values),this._resolvePromise=void 0),this.dispose();return;case"cancel":this._resolvePromise&&(this._resolvePromise(void 0),this._resolvePromise=void 0),this.dispose();return}},null,this._disposables)}static async show(e,n,r){if(!r)throw new Error("extensionUri is required for VariableInputPanel");t.currentPanel&&t.currentPanel.dispose();let i=al.window.createWebviewPanel("netezzaVariableInput","SQL Variables",al.ViewColumn.One,{enableScripts:!0,retainContextWhenHidden:!1});return t.currentPanel=new t(i,r,e,n),new Promise(s=>{t.currentPanel._resolvePromise=s})}dispose(){for(t.currentPanel=void 0,this._panel.dispose();this._disposables.length;){let e=this._disposables.pop();e&&e.dispose()}}_getHtmlForWebview(e){let n=e.asWebviewUri(al.Uri.joinPath(this.extensionUri,"netezza_icon64.png")),r=this.variables.map(i=>{let s=this.defaults?.[i]||"";return`
                <div class="form-group">
                    <label for="var_${i}">${i}</label>
                    <input 
                        type="text" 
                        id="var_${i}" 
                        name="${i}"
                        placeholder="Enter value for ${i}"
                        value="${this._escapeHtml(s)}"
                        autocomplete="off"
                    >
                </div>`}).join(`
`);return`<!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>SQL Variables</title>
            <style>
                :root {
                    --container-padding: 20px;
                    --input-padding-vertical: 6px;
                    --input-padding-horizontal: 8px;
                }
                body {
                    font-family: var(--vscode-font-family);
                    padding: 0;
                    margin: 0;
                    color: var(--vscode-foreground);
                    background-color: var(--vscode-editor-background);
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    min-height: 100vh;
                }
                
                .container {
                    width: 100%;
                    max-width: 600px;
                    padding: var(--container-padding);
                }

                .form-container {
                    background-color: var(--vscode-editorWidget-background);
                    border: 1px solid var(--vscode-widget-border);
                    padding: 30px;
                    border-radius: 4px;
                    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
                }
                
                h2 {
                    margin-top: 0;
                    margin-bottom: 25px;
                    font-size: 1.4em;
                    font-weight: 500;
                    padding-bottom: 10px;
                    border-bottom: 1px solid var(--vscode-panel-border);
                    display: flex;
                    align-items: center;
                    gap: 10px;
                }

                .logo-header {
                    width: 32px;
                    height: 32px;
                    margin-right: 10px;
                }

                .description {
                    margin-bottom: 20px;
                    color: var(--vscode-descriptionForeground);
                    font-size: 13px;
                }

                .form-group {
                    margin-bottom: 18px;
                }

                label {
                    display: block;
                    margin-bottom: 6px;
                    font-weight: 600;
                    font-size: 12px;
                    color: var(--vscode-input-placeholderForeground);
                }

                input {
                    width: 100%;
                    padding: 8px 10px;
                    box-sizing: border-box;
                    background: var(--vscode-input-background);
                    color: var(--vscode-input-foreground);
                    border: 1px solid var(--vscode-input-border);
                    border-radius: 2px;
                    font-family: inherit;
                    font-size: 13px;
                }
                
                input:focus {
                    border-color: var(--vscode-focusBorder);
                    outline: 1px solid var(--vscode-focusBorder);
                }
                
                .actions {
                    margin-top: 30px;
                    display: flex;
                    gap: 12px;
                    padding-top: 20px;
                    border-top: 1px solid var(--vscode-panel-border);
                }
                
                button {
                    background: var(--vscode-button-background);
                    color: var(--vscode-button-foreground);
                    padding: 8px 16px;
                    border: none;
                    cursor: pointer;
                    border-radius: 2px;
                    font-size: 13px;
                    font-weight: 500;
                    flex: 1;
                }
                
                button:hover {
                    background: var(--vscode-button-hoverBackground);
                }
                
                button.secondary {
                    background: var(--vscode-button-secondaryBackground);
                    color: var(--vscode-button-secondaryForeground);
                }
                
                button.secondary:hover {
                    background: var(--vscode-button-secondaryHoverBackground);
                }

                .error {
                    color: var(--vscode-errorForeground);
                    font-size: 12px;
                    margin-top: 5px;
                    display: none;
                }

                .error.visible {
                    display: block;
                }
            </style>
        </head>
        <body>
            <div class="container">
                <div class="form-container">
                    <h2>
                        <img src="${n}" class="logo-header" />
                        SQL Variables
                    </h2>
                    
                    <div class="description">
                        Enter values for the following SQL variables. All fields are required.
                    </div>

                    <form id="variableForm">
                        ${r}
                        
                        <div id="errorMessage" class="error">
                            Please fill in all required fields.
                        </div>
                        
                        <div class="actions">
                            <button type="submit" id="btnExecute">Execute</button>
                            <button type="button" class="secondary" id="btnCancel">Cancel</button>
                        </div>
                    </form>
                </div>
            </div>

            <script>
                const vscode = acquireVsCodeApi();
                const form = document.getElementById('variableForm');
                const errorMessage = document.getElementById('errorMessage');
                const btnCancel = document.getElementById('btnCancel');

                form.addEventListener('submit', (e) => {
                    e.preventDefault();
                    
                    const formData = new FormData(form);
                    const values = {};
                    let hasEmptyFields = false;

                    for (const [key, value] of formData.entries()) {
                        const trimmedValue = value.toString().trim();
                        if (trimmedValue === '') {
                            hasEmptyFields = true;
                            break;
                        }
                        values[key] = trimmedValue;
                    }

                    if (hasEmptyFields) {
                        errorMessage.classList.add('visible');
                        return;
                    }

                    errorMessage.classList.remove('visible');
                    vscode.postMessage({
                        command: 'submit',
                        values: values
                    });
                });

                btnCancel.addEventListener('click', () => {
                    vscode.postMessage({
                        command: 'cancel'
                    });
                });

                // Focus first input
                const firstInput = document.querySelector('input');
                if (firstInput) {
                    firstInput.focus();
                }

                // Clear error on input
                form.addEventListener('input', () => {
                    errorMessage.classList.remove('visible');
                });
            </script>
        </body>
        </html>`}_escapeHtml(e){let n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return e.replace(/[&<>"']/g,r=>n[r])}}});async function FE(t,e,n,r){let i={};if(t.size===0)return i;if(e){let o=Array.from(t).filter(a=>!(n&&n[a]!==void 0));if(o.length>0)throw new Error("Query contains variables but silent mode is enabled; cannot prompt for values. Missing: "+o.join(", "));for(let a of t)i[a]=n[a];return i}let s=await BE.show(Array.from(t),n,r);if(!s)throw new Error("Variable input cancelled by user");return s}async function iD(t,e,n){let r=xo(t),i=Po(r.sql),s=r.setValues,o=new Set;for(let c of i)s[c]===void 0&&o.add(c);let a=await FE(o,e,{},n),l={...s,...a};return hu(r.sql,l)}var sD=G(()=>{"use strict";UE();rD()});function zt(t){if(t.startsWith("file:///")){let e=t.match(/^file:\/\/\/([A-Z]):\//i);if(e)return`file:///${e[1].toLowerCase()}:${t.substring(10)}`}return t}async function Rm(t){let e=zt(typeof t=="string"?t:t.toString()),n=On.get(e);if(console.log(`[cancelQueryByUri] Found state for ${e}: ${!!n}`),n){n.isCancelled=!0,Gn.window.showInformationMessage("Cancellation request sent.");try{console.log(`[cancelQueryByUri] Calling cmd.cancel() for ${e}`),await n.command.cancel(),console.log(`[cancelQueryByUri] cmd.cancel() completed for ${e}`)}catch(r){let i=r instanceof Error?r.message:String(r);console.error(`[cancelQueryByUri] Failed to cancel: ${i}`),Gn.window.showErrorMessage(`Failed to cancel query: ${i}`)}}else console.warn(`[cancelQueryByUri] No active command found for ${e}`),console.log(`[cancelQueryByUri] Active keys: ${Array.from(On.keys()).join(", ")}`)}function lD(){return ll||(ll=Gn.window.createOutputChannel("Netezza SQL")),ll}function cD(){if(ll){try{ll.dispose()}catch{}ll=void 0}}function HQ(t,e){let n;return!t&&!e&&(n=lD(),n.show(!0)),{outputChannel:n,logCallback:e}}function Am(t){if(!(t instanceof Error))return!1;let e=t.message.toLowerCase();return e.includes("socket closed")||e.includes("socket destroyed")||e.includes("connection reset")||e.includes("connection closed")||e.includes("econnreset")||e.includes("epipe")||e.includes("broken pipe")}function Hn(t,e){t.outputChannel&&t.outputChannel.appendLine(e),t.logCallback&&t.logCallback(e)}function uD(t,e,n){let r=e;if(!r&&n&&(r=t.getConnectionForExecution(n)),r||(r=t.getActiveConnectionName()||void 0),!r)throw new Error("No connection selected");return r}async function pu(t,e,n,r){if(n&&r)return{connection:await t.getDocumentPersistentConnection(r,e),shouldCloseConnection:!1};{let{createNzConnection:i}=(fu(),Lo(vE)),s=await t.getConnection(e);if(!s)throw new Error(`Connection '${e}' not found`);let o=i({host:s.host,port:s.port||5480,database:s.database,user:s.user,password:s.password});return await o.connect(),{connection:o,shouldCloseConnection:!0}}}async function Tm(t,e,n){try{let r=e.getActiveConnectionName();if(r){let i=await e.getConnection(r);if(i){let{createNzConnection:s}=(fu(),Lo(vE)),o=s({host:i.host,port:i.port||5480,database:i.database,user:i.user,password:i.password});await o.connect();try{await(await o.createCommand(`DROP SESSION ${t}`).executeReader()).close(),Gn.window.showInformationMessage(`Session ${t} dropped successfully.`),n&&e.getDocumentKeepConnectionOpen(n)&&(await e.closeDocumentPersistentConnection(n),await e.getDocumentPersistentConnection(n,r),console.log(`[executeDropSession] Re-established per-document persistent connection for ${n}`))}finally{await o.close()}}}}catch(r){let i=r instanceof Error?r.message:String(r);Gn.window.showErrorMessage(`Failed to drop session: ${i}`)}}async function Sm(t,e,n,r,i){let s=Date.now(),o=5e3;try{let a=!1;do{for(;await t.read();){if(n){let l=On.get(zt(n));if(l&&l.isCancelled)break}if(Date.now()-s>o){a=!0;break}}if(a)break;if(Date.now()-s>o){a=!0;break}}while(await t.nextResult());if(a&&(console.warn(`consumeRestAndCancel timed out after ${o}ms, forcing cancel`),r&&i)){let l=`Cancellation is taking longer than expected. Do you want to force DROP SESSION ${r}?`,c=await Gn.window.showWarningMessage(l,`Drop Session ${r}`,"Keep Waiting");if(c===`Drop Session ${r}`)await Tm(r,i,n);else if(c==="Keep Waiting"){let d=Date.now(),E=!1;try{do{for(;await t.read();){if(n){let f=On.get(zt(n));if(f&&f.isCancelled)break}if(Date.now()-d>15e3){E=!0;break}}if(E)break;if(Date.now()-d>15e3){E=!0;break}}while(await t.nextResult())}catch(f){console.warn("Error during extended consume:",f),E=!0}E&&(console.warn("Extended consume timed out after 15000ms, forcing DROP SESSION"),await Tm(r,i,n))}}await e.cancel()}catch(a){console.warn("Failed to cancel command after limit reached:",a)}}async function oD(t,e,n,r,i){let s=t.createCommand(e);s.commandTimeout=n,r&&On.set(zt(r),{command:s,isCancelled:!1,sessionId:i});let o,a=!1;try{o=await s.executeReader();let l=[],c=[],u=2e5,d=0;for(let E=0;E<o.fieldCount;E++)l.push({name:o.getName(E),type:o.getTypeName(E)});for(;await o.read();){if(r){let f=On.get(zt(r));if(f&&f.isCancelled)break}let E=[];for(let f=0;f<o.fieldCount;f++)E.push(o.getValue(f));if(c.push(E),d++,d>=u){a=!0;break}}if(a)try{await s.cancel()}catch{}return{columns:l,data:c,limitReached:a}}finally{if(o)try{await o.close()}catch{}r&&On.delete(zt(r))}}async function aD(t,e,n,r){let i="unknown",s=await e.getConnection(n);s&&Nn.getInstance(t).addEntry(s.host,s.database,i,r,n).catch(a=>console.error("History log error:",a))}async function mm(t,e,n,r,i=!1){if((t.message||String(t)).includes("Connection is already executing a command")&&r&&!i){let a=e.getDocumentLastSessionId(zt(r));return Hn(n,`Error: Connection is busy (last known session: ${a??"unknown"})`),Gn.window.showWarningMessage(`The connection is busy executing another command. ${a?`Session ID: ${a}`:""}`,a?`Drop Session ${a}`:"","Reset Connection").then(async l=>{l&&a&&l===`Drop Session ${a}`?await Tm(a,e,r):l==="Reset Connection"&&(await e.closeDocumentPersistentConnection(r),Gn.window.showInformationMessage("Connection reset. You can try executing the query again."))}),!0}return!1}async function Ee(t,e,n=!1,r,i,s,o,a){let l=r||new Ji(t),c=s?l.getDocumentKeepConnectionOpen(s):!0,u=HQ(n,o);Hn(u,"Executing query..."),i&&Hn(u,`Target Connection: ${i}`);let d,E;try{d=await iD(e,n,a||t.extensionUri),E=uD(l,i,s)}catch(f){let h=`Error: ${f.message||String(f)}`;throw Hn(u,h),new Error(h)}Hn(u,`Using connection: ${E}`),Hn(u,"Connecting to database...");try{let{connection:f,shouldCloseConnection:p}=await pu(l,E,c,s);Hn(u,"Connected.");let h;u.outputChannel&&(h=S=>{let A=S;u.outputChannel.appendLine(`NOTICE: ${A.message}`)},f.on("notice",h));let T;try{let A=await f.createCommand("SELECT CURRENT_SID").executeReader();await A.read()&&(T=String(A.getValue(0)),s&&l.setDocumentLastSessionId(zt(s),T)),await A.close()}catch{}try{let A=Gn.workspace.getConfiguration("netezza").get("queryTimeout",1800);Hn(u,"Executing SQL on server...");let{columns:R,data:m,limitReached:N}=await oD(f,d,A,s,T);return await aD(t,l,E,e),R.length>0?(Hn(u,"Query completed."),{columns:R,data:m,rowsAffected:void 0,limitReached:N,sql:d}):(Hn(u,"Query executed successfully (no results)."),{columns:[],data:[],rowsAffected:void 0,message:"Query executed successfully (no results).",sql:d})}finally{h&&f.removeListener("notice",h),p&&f&&await f.close()}}catch(f){if(Am(f)&&s&&c){Hn(u,"Connection was closed by server. Reconnecting and retrying..."),await l.closeDocumentPersistentConnection(s);try{let{connection:T,shouldCloseConnection:S}=await pu(l,E,c,s);Hn(u,"Reconnected. Retrying query...");let A;try{let m=await T.createCommand("SELECT CURRENT_SID").executeReader();await m.read()&&(A=String(m.getValue(0))),await m.close()}catch{}try{let m=Gn.workspace.getConfiguration("netezza").get("queryTimeout",1800),{columns:N,data:L,limitReached:I}=await oD(T,d,m,s,A);return await aD(t,l,E,e),N.length>0?(Hn(u,"Query completed (after reconnect)."),{columns:N,data:L,rowsAffected:void 0,limitReached:I,sql:d}):(Hn(u,"Query executed successfully after reconnect (no results)."),{columns:[],data:[],rowsAffected:void 0,message:"Query executed successfully (no results).",sql:d})}finally{S&&T&&await T.close()}}catch(T){let A=`Error (after reconnect attempt): ${T.message||String(T)}`;throw Hn(u,A),new Error(A)}}let p=f;if(await mm(f,l,u,s,n))throw new Error("Connection is busy. Use the popup actions to resolve.");let h=`Error: ${p.message||String(f)}`;throw Hn(u,h),new Error(h)}}async function Cn(t,e,n=!1,r,i,s){let o=await Ee(t,e,n,i,r,s);if(o.data&&o.data.length>0){let a=o.data.map(c=>{let u={};return o.columns.forEach((d,E)=>{u[d.name]=c[E]}),u});return JSON.stringify(a,(c,u)=>typeof u=="bigint"?u>=Number.MIN_SAFE_INTEGER&&u<=Number.MAX_SAFE_INTEGER?Number(u):u.toString():u,2)}else if(o.message)return o.message}function ge(t){return!t.columns||!t.data||t.data.length===0?[]:t.data.map(e=>{let n={};return t.columns.forEach((r,i)=>{let s=e[i];typeof s=="bigint"&&(s>=Number.MIN_SAFE_INTEGER&&s<=Number.MAX_SAFE_INTEGER?s=Number(s):s=s.toString()),n[r.name]=s}),n})}async function dD(t,e,n,r,i){let s=r||new Ji(t),o=i?s.getDocumentKeepConnectionOpen(i):!0,a=[],l=uD(s,n,i),{connection:c,shouldCloseConnection:u}=await pu(s,l,o,i);try{let d=E=>{let f=E;a.push(f.message)};c.on("notice",d);try{let f=Gn.workspace.getConfiguration("netezza").get("queryTimeout",1800),p=c.createCommand(e);p.commandTimeout=f,i&&On.set(zt(i),{command:p,isCancelled:!1});try{let h=await p.executeReader();for(;await h.read();)if(i){let T=On.get(zt(i));if(T&&T.isCancelled)break}}finally{i&&On.delete(zt(i))}}finally{c.removeListener("notice",d)}}finally{u&&c&&await c.close()}return a.join(`
`)}async function cl(t,e,n,r,i,s,o,a=!1){let l=n||new Ji(t),c=r?l.getDocumentKeepConnectionOpen(r):!0,u;i||(u=lD(),u.show(!0),u.appendLine(`Executing ${e.length} queries sequentially...`));let d=[],E=l.getConnectionForExecution(r);if(E||(E=l.getActiveConnectionName()||void 0),!E)throw u&&u.appendLine("Error: No connection selected"),i&&i("Error: No connection selected"),new Error("No connection selected");try{let f=await l.getConnection(E);if(!f)throw new Error(`Connection '${E}' not found`);u&&u.appendLine(`Using connection: ${E}`),i&&i(`Using connection: ${E}`),u&&u.appendLine("Connecting to database..."),i&&i("Connecting to database...");let{connection:p,shouldCloseConnection:h}=await pu(l,E,c,r);p.on("notice",T=>{let S=T;u&&u.appendLine(`NOTICE: ${S.message}`),i&&i(`NOTICE: ${S.message}`)});try{let T="unknown",S;try{let g=await p.createCommand("SELECT CURRENT_SID").executeReader();if(await g.read()){let w=g.getValue(0);w!==void 0&&(S=String(w),r&&l.setDocumentLastSessionId(zt(r),S),i&&i(`Connected. Session ID: ${S}`))}await g.close()}catch(D){console.debug("Could not retrieve session ID:",D),i&&i("Connected.")}let A=Nn.getInstance(t),R=E,m=new Set,N={};for(let D of e){let g=xo(D);Object.assign(N,g.setValues),Po(g.sql).forEach(x=>m.add(x))}let L=new Set;for(let D of m)N[D]===void 0&&L.add(D);let I={...N};if(L.size>0){let D=await FE(L,!1,void 0,o||t.extensionUri);Object.assign(I,D)}for(let D=0;D<e.length;D++){let g=e[D],w=`Executing query ${D+1}/${e.length}...`;u&&u.appendLine(w),i&&i(w);try{let x=xo(g),U=hu(x.sql,I),X=Gn.workspace.getConfiguration("netezza").get("queryTimeout",1800),Q=Date.now(),{results:K,error:Z}=await GQ(p,U,2e5,X,r,S?String(S):void 0,l),Oe=Date.now()-Q;if(i&&i(`Executed query ${D+1}/${e.length} in ${Oe}ms`),A.addEntry(f.host,f.database,T,g,R).catch(ae=>{console.error("Failed to log query to history:",ae)}),K&&K.length>0)for(let ae of K)ae.columns.length>0?d.push({columns:ae.columns,data:ae.rows,rowsAffected:void 0,limitReached:ae.limitReached,sql:U}):d.push({columns:[],data:[],rowsAffected:void 0,message:"Query executed successfully",sql:U});if(s&&K&&K.length>0){let ae=[];for(let Ht of K)Ht.columns.length>0?ae.push({columns:Ht.columns,data:Ht.rows,rowsAffected:void 0,limitReached:Ht.limitReached,sql:U}):ae.push({columns:[],data:[],rowsAffected:void 0,message:"Query executed successfully",sql:U});s(ae)}if(Z)throw Z}catch(x){let U=x instanceof Error?x.message:String(x);throw u&&u.appendLine(`Error in query ${D+1}: ${U}`),new Error(U)}}u&&u.appendLine("All queries completed.")}finally{h&&await p.close()}}catch(f){if(!a&&Am(f)&&r&&c){u&&u.appendLine("Connection was closed by server. Reconnecting and retrying..."),i&&i("Connection was closed by server. Reconnecting and retrying..."),await l.closeDocumentPersistentConnection(r);try{return await cl(t,e,l,r,i,s,o,!0)}catch(T){let A=`Error (after reconnect attempt): ${T.message||String(T)}`;throw u&&u.appendLine(A),i&&i(A),new Error(A)}}let p=f;if(await mm(f,l,{outputChannel:u,logCallback:i},r,!1))throw new Error("Connection is busy. Use the popup actions to resolve.");let h=`Error: ${p.message||String(f)}`;throw u&&u.appendLine(h),i&&i(h),new Error(h)}return d}async function GQ(t,e,n,r,i,s,o){let a=t.createCommand(e);if(r&&r>0&&(a.commandTimeout=r),i){let l=zt(i);console.log(`[executeWithStreaming] Registering command with key: ${l}`),On.set(l,{command:a,isCancelled:!1,sessionId:s})}try{let l=await a.executeReader(),c=[],u=!0,d;try{do{let E=[],f=[],p=0,h=!1;for(let T=0;T<l.fieldCount;T++)E.push({name:l.getName(T),type:l.getTypeName(T)});for(;await l.read();){if(i){let T=On.get(zt(i));if(T&&T.isCancelled)throw new Error("Query cancelled by user")}if(p<n){let T=[];for(let S=0;S<l.fieldCount;S++)T.push(l.getValue(S));f.push(T),p++}if(p>=n){h=!0,await Sm(l,a,i,s,o);break}}c.push({columns:E,rows:f,limitReached:h}),u=await l.nextResult()}while(u)}catch(E){d=E instanceof Error?E:new Error(String(E))}return{results:c,error:d}}finally{i&&On.delete(zt(i))}}async function $Q(t,e,n,r,i,s,o,a,l){let c=t.createCommand(e);if(i&&i>0&&(c.commandTimeout=i),s){let u=zt(s);console.log(`[executeAndFetchStreaming] Registering command with key: ${u}`),On.set(u,{command:c,isCancelled:!1,sessionId:a})}try{let u=await c.executeReader(),d,E=0,f=!1;try{let p=[],h=[],T=!0;for(let A=0;A<u.fieldCount;A++)p.push({name:u.getName(A),type:u.getTypeName(A)});let S=!1;for(;await u.read();){if(s){let R=On.get(zt(s));if(R&&R.isCancelled){S=!0,await Sm(u,c,s,a,l);break}}let A=[];for(let R=0;R<u.fieldCount;R++)A.push(u.getValue(R));if(h.push(A),E++,h.length>=r&&(o({columns:T?p:[],rows:h,isFirstChunk:T,isLastChunk:!1,totalRowsSoFar:E,limitReached:!1}),h=[],T=!1,await new Promise(R=>setImmediate(R))),E>=n){f=!0,await Sm(u,c,s,a,l);break}}if(S)return{totalRows:E,limitReached:f,error:new Error("Query cancelled")};if(s){let A=On.get(zt(s));if(A&&A.isCancelled)return{totalRows:E,limitReached:f,error:d||new Error("Query cancelled")}}o({columns:T?p:[],rows:h,isFirstChunk:T,isLastChunk:!0,totalRowsSoFar:E,limitReached:f})}catch(p){d=p instanceof Error?p:new Error(String(p))}return{totalRows:E,limitReached:f,error:d}}finally{s&&On.delete(zt(s))}}async function gm(t,e,n,r,i,s,o=5e3,a,l=!1){let c=n||new Ji(t),u=r?c.getDocumentKeepConnectionOpen(r):!0,d;i||(d=Gn.window.createOutputChannel("Netezza SQL"),d.show(!0),d.appendLine(`Executing ${e.length} queries with streaming...`));let E=c.getConnectionForExecution(r);if(E||(E=c.getActiveConnectionName()||void 0),!E){let f="Error: No connection selected";throw d&&d.appendLine(f),i&&i(f),new Error("No connection selected")}try{let f=await c.getConnection(E);if(!f)throw new Error(`Connection '${E}' not found`);let{connection:p,shouldCloseConnection:h}=await pu(c,E,u,r);p.on("notice",T=>{let S=T;d&&d.appendLine(`NOTICE: ${S.message}`),i&&i(`NOTICE: ${S.message}`)});try{let T;try{let D=await p.createCommand("SELECT CURRENT_SID").executeReader();await D.read()&&(T=String(D.getValue(0)),r&&c.setDocumentLastSessionId(zt(r),T),i&&i(`Connected. Session ID: ${T}`)),await D.close()}catch(I){console.debug("Could not retrieve session ID:",I),i&&i("Connected.")}let S=Nn.getInstance(t),A="unknown",R=new Set,m={};for(let I of e){let D=xo(I);Object.assign(m,D.setValues),Po(D.sql).forEach(w=>R.add(w))}let N=new Set;for(let I of R)m[I]===void 0&&N.add(I);let L={...m};if(N.size>0){let I=await FE(N,!1,void 0,a||t.extensionUri);Object.assign(L,I)}for(let I=0;I<e.length;I++){let D=e[I],g=`Executing query ${I+1}/${e.length}...`;d&&d.appendLine(g),i&&i(g);try{let w=xo(D),x=hu(w.sql,L),H=Gn.workspace.getConfiguration("netezza").get("queryTimeout",1800),X=Date.now(),{totalRows:Q,limitReached:K,error:Z}=await $Q(p,x,2e5,o,H,r,ae=>{s&&s(I,ae,x)},T,c),Oe=Date.now()-X;if(i&&i(`Query ${I+1}/${e.length}: ${Q} rows in ${Oe}ms${K?" (limit reached)":""}`),S.addEntry(f.host,f.database,A,D,E).catch(ae=>console.error("Failed to log query to history:",ae)),Z)throw Z}catch(w){let x=w instanceof Error?w.message:String(w);throw d&&d.appendLine(`Error in query ${I+1}: ${x}`),new Error(x)}}d&&d.appendLine("All queries completed.")}finally{h&&await p.close()}}catch(f){if(!l&&Am(f)&&r&&u){d&&d.appendLine("Connection was closed by server. Reconnecting and retrying..."),i&&i("Connection was closed by server. Reconnecting and retrying..."),await c.closeDocumentPersistentConnection(r);try{return await gm(t,e,c,r,i,s,o,a,!0)}catch(T){let A=`Error (after reconnect attempt): ${T.message||String(T)}`;throw d&&d.appendLine(A),i&&i(A),new Error(A)}}let p=f;if(await mm(f,c,{outputChannel:d,logCallback:i},r,!1))throw new Error("Connection is busy. Use the popup actions to resolve.");let h=`Error: ${p.message||String(f)}`;throw d&&d.appendLine(h),i&&i(h),new Error(h)}}var Gn,On,ll,bn=G(()=>{"use strict";Gn=j(require("vscode"));hm();ME();UE();sD();On=new Map});var hD=G(()=>{"use strict"});function Im(t,e){return e?t.startsWith(`${e}|`):!0}function qr(t){if(!t||typeof t!="object")return;let e=t;if(e.label)return typeof e.label=="string"?e.label:e.label.label}function GE(t){let e={};return t.forEach((n,r)=>{e[r]=n}),e}function pD(t){let e={};return t.forEach((n,r)=>{let i={};n.data.forEach((s,o)=>{i[o]=s}),e[r]={data:i,timestamp:n.timestamp}}),e}function _m(t,e,n){return e?`${t}.${e}.${n}`:`${t}..${n}`}var ul=G(()=>{"use strict"});var TD,VQ,Ru,Nm=G(()=>{"use strict";TD=j(require("vscode"));ul();VQ=4,Ru=class{constructor(){this.dbCache=new Map;this.schemaCache=new Map;this.tableCache=new Map;this.columnCache=new Map;this.tableIdMap=new Map;this.typeGroupCache=new Map;let n=TD.workspace.getConfiguration("netezza").get("cacheTTL",VQ);this.CACHE_TTL=n*60*60*1e3}isEntryValid(e){return Date.now()-e<this.CACHE_TTL}setOnDataChange(e){this.onDataChange=e}clearAll(){this.dbCache.clear(),this.schemaCache.clear(),this.tableCache.clear(),this.columnCache.clear(),this.tableIdMap.clear(),this.typeGroupCache.clear()}getDatabases(e){let n=this.dbCache.get(e);if(n){if(!this.isEntryValid(n.timestamp)){this.dbCache.delete(e);return}return n.data}}setDatabases(e,n){this.dbCache.set(e,{data:n,timestamp:Date.now()}),this.onDataChange?.("db")}getSchemas(e,n){let r=`${e}|${n}`,i=this.schemaCache.get(r);if(i){if(!this.isEntryValid(i.timestamp)){this.schemaCache.delete(r);return}return i.data}}setSchemas(e,n,r){let i=`${e}|${n}`;this.schemaCache.set(i,{data:r,timestamp:Date.now()}),this.onDataChange?.("schema")}getTables(e,n){let r=`${e}|${n}`,i=this.tableCache.get(r);if(i){if(!this.isEntryValid(i.timestamp)){this.tableCache.delete(r),this.tableIdMap.delete(r);return}return i.data}}getTablesAllSchemas(e,n){let r=`${e}|${n}.`,i=[],s=new Set;for(let[o,a]of this.tableCache)if(o.startsWith(r))for(let l of a.data){let c=qr(l);c&&!s.has(c.toUpperCase())&&(s.add(c.toUpperCase()),i.push(l))}return i.length>0?i:void 0}setTables(e,n,r,i){let s=Date.now(),o=`${e}|${n}`;this.tableCache.set(o,{data:r,timestamp:s}),this.tableIdMap.set(o,{data:i,timestamp:s}),this.onDataChange?.("table")}getObjectsWithSchema(e,n){let r=`${e}|${n}.`,i=[],s=new Set;for(let[o,a]of this.tableCache)if(o.startsWith(r)||o===`${e}|${n}..`){let l=o.split("|");if(l.length<2)continue;let u=l[1].split("."),d=(u.length>1?u[1]:"")||"",E=this.tableIdMap.get(o);for(let f of a.data){let p=qr(f),h=`${d}.${p}`;if(p&&!s.has(h)){s.add(h);let T;if(E){let S=_m(n,d||void 0,p);T=E.data.get(S)}i.push({item:f,schema:d,objId:T,owner:f.OWNER,description:f.DESCRIPTION})}}}return i}getColumns(e,n){let r=`${e}|${n}`,i=this.columnCache.get(r);if(i){if(!this.isEntryValid(i.timestamp)){this.columnCache.delete(r);return}return i.data}}setColumns(e,n,r){let i=`${e}|${n}`;this.columnCache.set(i,{data:r,timestamp:Date.now()}),this.onDataChange?.("column")}getColumnsAnySchema(e,n,r){let i=`${e}|${n}.`,s=r.toUpperCase();for(let[o,a]of this.columnCache)if(o.startsWith(i)){let l=o.split(".");if(l.length>=3&&l[l.length-1].toUpperCase()===s&&this.isEntryValid(a.timestamp))return a.data}}findTableId(e,n){let r=`${e}|`;for(let[i,s]of this.tableIdMap)if(i.startsWith(r)){let o=s.data.get(n);if(o!==void 0)return o}}getTypeGroups(e,n){let r=`${e}|${n}`;return this.typeGroupCache.get(r)?.data}setTypeGroups(e,n,r){let i=`${e}|${n}`;this.typeGroupCache.set(i,{data:r,timestamp:Date.now()})}findObjectWithType(e,n,r,i){let s=`${e}|`,o=i.toUpperCase();for(let[a,l]of this.tableCache){if(!a.startsWith(s))continue;let c=a.split("|");if(c.length<2)continue;let d=c[1].split("."),E=d[0],f=d.length>1?d[1]:void 0;if(E.toUpperCase()===n.toUpperCase()&&!(r!=null&&r!==""&&f?.toUpperCase()!==r.toUpperCase()))for(let p of l.data){let h=qr(p);if(h?.toUpperCase()===o){let T=p.objType||(p.kind===18?"VIEW":"TABLE"),S=_m(E,f,h),R=this.tableIdMap.get(a)?.data.get(S);if(R!==void 0)return{objId:R,objType:T,schema:f||"",name:h||i}}}}}invalidateSchema(e,n,r){let i=r?`${n}.${r}`:`${n}..`,s=`${e}|${i}`;this.tableCache.has(s)&&(this.tableCache.delete(s),this.tableIdMap.delete(s),this.onDataChange?.("table"),console.log(`[CacheStorage] Invalidated cache for ${s}`))}getDbCacheMap(){return this.dbCache}getSchemaCacheMap(){return this.schemaCache}getTableCacheMap(){return this.tableCache}getTableIdMapMap(){return this.tableIdMap}loadDbCache(e){this.dbCache=e}loadSchemaCache(e){this.schemaCache=e}loadTableCache(e){this.tableCache=e}loadTableIdMap(e){this.tableIdMap=e}}});var Au,vo,qQ,mu,Om=G(()=>{"use strict";Au=j(require("vscode")),vo=j(require("fs"));ul();qQ=4,mu=class{constructor(e,n){this.context=e;this.storage=n;let i=Au.workspace.getConfiguration("netezza").get("cacheTTL",qQ);this.CACHE_TTL=i*60*60*1e3,this.context.storageUri&&(this.cacheFilePath=Au.Uri.joinPath(this.context.storageUri,"schema-cache.json").fsPath,this.ensureStorageDir())}async ensureStorageDir(){if(this.context.storageUri)try{await Au.workspace.fs.createDirectory(this.context.storageUri)}catch{}}async initialize(){try{let e=["sqlCompletion.dbCache","sqlCompletion.schemaCache","sqlCompletion.tableCache","sqlCompletion.columnCache","sqlCompletion.tableIdMap"];for(let n of e)this.context.workspaceState.get(n)!==void 0&&await this.context.workspaceState.update(n,void 0)}catch(e){console.error("[CachePersistence] Error cleaning up legacy workspace state:",e)}if(this.cacheFilePath)try{if(vo.existsSync(this.cacheFilePath)){let e=await vo.promises.readFile(this.cacheFilePath,"utf-8"),n=JSON.parse(e),r=Date.now();if(n.dbCache){let i=new Map;for(let[s,o]of Object.entries(n.dbCache))r-o.timestamp<this.CACHE_TTL&&i.set(s,o);this.storage.loadDbCache(i)}if(n.schemaCache){let i=new Map;for(let[s,o]of Object.entries(n.schemaCache))r-o.timestamp<this.CACHE_TTL&&i.set(s,o);this.storage.loadSchemaCache(i)}if(n.tableCache){let i=new Map;for(let[s,o]of Object.entries(n.tableCache))r-o.timestamp<this.CACHE_TTL&&i.set(s,o);this.storage.loadTableCache(i)}if(n.tableIdMap){let i=new Map;for(let[s,o]of Object.entries(n.tableIdMap))(this.storage.getTableCacheMap().has(s)||r-o.timestamp<this.CACHE_TTL)&&i.set(s,{data:new Map(Object.entries(o.data)),timestamp:o.timestamp});this.storage.loadTableIdMap(i)}}}catch(e){console.error("[CachePersistence] Error loading cache from disk:",e)}}scheduleSave(e){this.saveTimeoutId&&clearTimeout(this.saveTimeoutId),this.saveTimeoutId=setTimeout(()=>this.flushSave(),2e3)}async flushSave(){if(this.saveTimeoutId=void 0,!!this.cacheFilePath)try{let e={dbCache:GE(this.storage.getDbCacheMap()),schemaCache:GE(this.storage.getSchemaCacheMap()),tableCache:GE(this.storage.getTableCacheMap()),tableIdMap:pD(this.storage.getTableIdMapMap())};await vo.promises.writeFile(this.cacheFilePath,JSON.stringify(e),"utf-8")}catch(e){console.error("[CachePersistence] Error saving cache to disk:",e)}}async clearCache(){if(this.saveTimeoutId&&(clearTimeout(this.saveTimeoutId),this.saveTimeoutId=void 0),this.storage.clearAll(),this.cacheFilePath)try{vo.existsSync(this.cacheFilePath)&&await vo.promises.unlink(this.cacheFilePath)}catch(e){console.error("[CachePersistence] Error clearing cache file:",e)}}}});function nt(t,e){return`${t.toUpperCase()}..${e}`}var te,et,gu,Qe,Mo=G(()=>{"use strict";te={OBJECT_DATA:"_V_OBJECT_DATA",TABLE:"_V_TABLE",VIEW:"_V_VIEW",PROCEDURE:"_V_PROCEDURE",SYNONYM:"_V_SYNONYM",RELATION_COLUMN:"_V_RELATION_COLUMN",RELATION_KEYDATA:"_V_RELATION_KEYDATA",TABLE_DIST_MAP:"_V_TABLE_DIST_MAP",TABLE_ORGANIZE_COLUMN:"_V_TABLE_ORGANIZE_COLUMN",EXTERNAL:"_V_EXTERNAL",EXTOBJECT:"_V_EXTOBJECT",DATABASE:"_V_DATABASE",SCHEMA:"_V_SCHEMA"},et={TABLE:"TABLE",VIEW:"VIEW",MATERIALIZED_VIEW:"MATERIALIZED VIEW",EXTERNAL_TABLE:"EXTERNAL TABLE",PROCEDURE:"PROCEDURE",SEQUENCE:"SEQUENCE",SYSTEM_VIEW:"SYSTEM VIEW",SYSTEM_TABLE:"SYSTEM TABLE",SYNONYM:"SYNONYM"},gu={PRIMARY_KEY:"p",FOREIGN_KEY:"f",UNIQUE:"u"};Qe={LIST_DATABASES:`
        SELECT DATABASE 
        FROM ${te.DATABASE}
        ORDER BY DATABASE
    `.trim(),listSchemas:t=>`
        SELECT SCHEMA 
        FROM ${nt(t,te.SCHEMA)} 
        ORDER BY SCHEMA
    `.trim(),listTablesAndViews:t=>{let e=`'${et.TABLE}', '${et.VIEW}', '${et.EXTERNAL_TABLE}'`;if(!Array.isArray(t)||t.length===0)throw new Error("NZ_QUERIES.listTablesAndViews requires a non-empty array of databases.");let n=t.map(i=>i&&i.trim()).filter(Boolean).map(i=>i.toUpperCase()).map(i=>`SELECT OBJNAME, OBJID, SCHEMA, DBNAME, OBJTYPE, OWNER, COALESCE(DESCRIPTION, '') AS DESCRIPTION FROM ${nt(i,te.OBJECT_DATA)} WHERE DBNAME = '${i}' AND OBJTYPE IN (${e})`);if(n.length===0)throw new Error("NZ_QUERIES.listTablesAndViews requires a non-empty array of databases.");return`
            SELECT * FROM (
${n.join(`
UNION ALL
`)}
            ) TMP
            ORDER BY DBNAME, SCHEMA, OBJNAME
        `.trim()},listColumnsWithKeys:(t,e)=>{let n=t.toUpperCase(),i=(e?.objTypes||[et.TABLE,et.VIEW,et.EXTERNAL_TABLE]).map(o=>`'${o}'`).join(", "),s=`O.DBNAME = '${n}' AND O.OBJTYPE IN (${i})`;return e?.schema&&(s+=` AND UPPER(O.SCHEMA) = UPPER('${e.schema}')`),e?.tableName&&(s+=` AND UPPER(O.OBJNAME) = UPPER('${e.tableName}')`),`
            SELECT 
                O.OBJNAME AS TABLENAME,
                O.SCHEMA,
                O.DBNAME,
                C.ATTNAME,
                C.FORMAT_TYPE,
                C.ATTNUM,
                COALESCE(C.DESCRIPTION, '') AS DESCRIPTION,
                MAX(CASE WHEN K.CONTYPE = '${gu.PRIMARY_KEY}' THEN 1 ELSE 0 END) AS IS_PK,
                MAX(CASE WHEN K.CONTYPE = '${gu.FOREIGN_KEY}' THEN 1 ELSE 0 END) AS IS_FK
            FROM ${nt(n,te.RELATION_COLUMN)} C
            JOIN ${nt(n,te.OBJECT_DATA)} O ON C.OBJID = O.OBJID
            LEFT JOIN ${nt(n,te.RELATION_KEYDATA)} K 
                ON UPPER(K.RELATION) = UPPER(O.OBJNAME) 
                AND UPPER(K.SCHEMA) = UPPER(O.SCHEMA)
                AND UPPER(K.ATTNAME) = UPPER(C.ATTNAME)
                AND K.CONTYPE IN ('${gu.PRIMARY_KEY}', '${gu.FOREIGN_KEY}')
            WHERE ${s}
            GROUP BY O.OBJNAME, O.SCHEMA, O.DBNAME, C.ATTNAME, C.FORMAT_TYPE, C.ATTNUM, C.DESCRIPTION
            ORDER BY O.SCHEMA, O.OBJNAME, C.ATTNUM
        `.trim()},getTableColumns:(t,e,n)=>{let r=t.toUpperCase();return`
            SELECT 
                X.OBJID::INT AS OBJID,
                X.ATTNAME,
                X.DESCRIPTION,
                X.FORMAT_TYPE AS FULL_TYPE,
                X.ATTNOTNULL::BOOL AS ATTNOTNULL,
                X.COLDEFAULT
            FROM ${nt(r,te.RELATION_COLUMN)} X
            INNER JOIN ${nt(r,te.OBJECT_DATA)} D ON X.OBJID = D.OBJID
            WHERE X.TYPE IN ('${et.TABLE}','${et.VIEW}','${et.EXTERNAL_TABLE}','${et.SEQUENCE}','${et.SYSTEM_VIEW}','${et.SYSTEM_TABLE}')
                AND X.OBJID NOT IN (4,5)
                AND D.SCHEMA = '${e.toUpperCase()}'
                AND D.OBJNAME = '${n.toUpperCase()}'
            ORDER BY X.OBJID, X.ATTNUM
        `.trim()},getDistributionKeys:(t,e,n)=>{let r=t.toUpperCase();return`
            SELECT ATTNAME
            FROM ${nt(r,te.TABLE_DIST_MAP)}
            WHERE SCHEMA = '${e.toUpperCase()}'
                AND TABLENAME = '${n.toUpperCase()}'
            ORDER BY DISTSEQNO
        `.trim()},getOrganizeColumns:(t,e,n)=>{let r=t.toUpperCase();return`
            SELECT ATTNAME
            FROM ${nt(r,te.TABLE_ORGANIZE_COLUMN)}
            WHERE SCHEMA = '${e.toUpperCase()}'
                AND TABLENAME = '${n.toUpperCase()}'
            ORDER BY ORGSEQNO
        `.trim()},getTableKeys:(t,e,n)=>{let r=t.toUpperCase();return`
            SELECT 
                X.SCHEMA,
                X.RELATION,
                X.CONSTRAINTNAME,
                X.CONTYPE,
                X.ATTNAME,
                X.PKDATABASE,
                X.PKSCHEMA,
                X.PKRELATION,
                X.PKATTNAME,
                X.UPDT_TYPE,
                X.DEL_TYPE
            FROM ${nt(r,te.RELATION_KEYDATA)} X
            WHERE X.OBJID NOT IN (4,5)
                AND X.SCHEMA = '${e.toUpperCase()}'
                AND X.RELATION = '${n.toUpperCase()}'
            ORDER BY X.SCHEMA, X.RELATION, X.CONSEQ
        `.trim()},getForeignKeyRelationships:(t,e)=>{let n=t.toUpperCase();return`
            SELECT 
                X.SCHEMA,
                X.RELATION AS FROM_TABLE,
                X.CONSTRAINTNAME,
                X.ATTNAME AS FROM_COLUMN,
                X.PKDATABASE,
                X.PKSCHEMA,
                X.PKRELATION AS TO_TABLE,
                X.PKATTNAME AS TO_COLUMN,
                X.UPDT_TYPE,
                X.DEL_TYPE,
                X.CONSEQ
            FROM ${nt(n,te.RELATION_KEYDATA)} X
            WHERE X.CONTYPE = '${gu.FOREIGN_KEY}'
                AND X.SCHEMA = '${e.toUpperCase()}'
            ORDER BY X.CONSTRAINTNAME, X.CONSEQ
        `.trim()},getObjectComment:(t,e,n,r)=>{let i=t.toUpperCase(),s=r?` AND OBJTYPE = '${r}'`:"";return`
            SELECT DESCRIPTION
            FROM ${nt(i,te.OBJECT_DATA)}
            WHERE DBNAME = '${i}'
                AND SCHEMA = '${e.toUpperCase()}'
                AND OBJNAME = '${n.toUpperCase()}'${s}
        `.trim()},getTableOwner:(t,e,n)=>{let r=t.toUpperCase();return`
            SELECT OWNER
            FROM ${nt(r,te.TABLE)}
            WHERE SCHEMA = '${e.toUpperCase()}'
                AND TABLENAME = '${n.toUpperCase()}'
        `.trim()},getViewDefinition:(t,e,n)=>{let r=t.toUpperCase(),i=`UPPER(VIEWNAME) = '${e.toUpperCase()}'`;return n&&(i+=` AND UPPER(SCHEMA) = '${n.toUpperCase()}'`),`
            SELECT SCHEMA, VIEWNAME, DEFINITION, OWNER
            FROM ${nt(r,te.VIEW)}
            WHERE ${i}
        `.trim()},getProcedureDefinition:(t,e,n)=>{let r=t.toUpperCase(),i=`UPPER(PROCEDURE) = '${e.toUpperCase()}'`;return n&&(i+=` AND UPPER(SCHEMA) = '${n.toUpperCase()}'`),`
            SELECT SCHEMA, PROCEDURE, PROCEDURESIGNATURE, PROCEDURESOURCE, 
                   RESULT AS RETURNS, OWNER
            FROM ${nt(r,te.PROCEDURE)}
            WHERE ${i}
        `.trim()},listProcedures:(t,e)=>{if(t){let n=`DATABASE = '${t.toUpperCase()}'`;return e&&(n+=` AND SCHEMA = '${e.toUpperCase()}'`),`
                SELECT SCHEMA, PROCEDURE, PROCEDURESIGNATURE, RESULT AS RETURNS, OWNER, DATABASE
                FROM ${nt(t,te.PROCEDURE)}
                WHERE ${n}
                ORDER BY SCHEMA, PROCEDURE
            `.trim()}return""},listViews:(t,e)=>{if(t){let n="1=1";return e&&(n=`SCHEMA = '${e.toUpperCase()}'`),`
                SELECT SCHEMA, VIEWNAME, OWNER, '${t}' AS DATABASE
                FROM ${nt(t,te.VIEW)}
                WHERE ${n}
                ORDER BY SCHEMA, VIEWNAME
            `.trim()}return""},getExternalTables:(t,e)=>{let n=t.toUpperCase(),r="1=1";return e&&(r=`E1.SCHEMA = '${e.toUpperCase()}'`),`
            SELECT 
                E1.TABLENAME,
                E1.SCHEMA,
                E1.OWNER,
                E1.DATABASE,
                E2.EXTOBJNAME AS DATAOBJECT
            FROM ${nt(n,te.EXTERNAL)} E1
            LEFT JOIN ${nt(n,te.EXTOBJECT)} E2 
                ON E1.DATABASE = E2.DATABASE 
                AND E1.SCHEMA = E2.SCHEMA 
                AND E1.TABLENAME = E2.TABLENAME
            WHERE ${r}
            ORDER BY E1.SCHEMA, E1.TABLENAME
        `.trim()},findTableSchema:(t,e)=>{let n=t.toUpperCase();return`
            SELECT SCHEMA
            FROM ${nt(n,te.OBJECT_DATA)}
            WHERE DBNAME = '${n}'
                AND UPPER(OBJNAME) = '${e.toUpperCase()}'
                AND OBJTYPE IN ('${et.TABLE}', '${et.VIEW}', '${et.EXTERNAL_TABLE}')
            LIMIT 1
        `.trim()},searchTables:(t,e)=>{let n=`'${et.TABLE}', '${et.VIEW}', '${et.MATERIALIZED_VIEW}', '${et.EXTERNAL_TABLE}'`;return e?`
                SELECT '${e}' AS DATABASE, SCHEMA, TABLENAME, 
                    CASE RELKIND WHEN 'r' THEN '${et.TABLE}' WHEN 'v' THEN '${et.VIEW}' ELSE RELKIND END AS TYPE
                FROM ${nt(e,te.TABLE)}
                WHERE UPPER(TABLENAME) LIKE '${t.toUpperCase()}'
                ORDER BY SCHEMA, TABLENAME
                LIMIT 1000
            `.trim():`
            SELECT DBNAME AS DATABASE, SCHEMA, OBJNAME AS TABLENAME, 
                CASE OBJTYPE WHEN '${et.TABLE}' THEN '${et.TABLE}' 
                     WHEN '${et.VIEW}' THEN '${et.VIEW}' 
                     WHEN '${et.MATERIALIZED_VIEW}' THEN 'MVIEW' 
                     WHEN '${et.EXTERNAL_TABLE}' THEN 'EXTERNAL' 
                     ELSE OBJTYPE END AS TYPE
            FROM ${te.OBJECT_DATA}
            WHERE UPPER(OBJNAME) LIKE '${t.toUpperCase()}'
                AND OBJTYPE IN (${n})
            ORDER BY DBNAME, SCHEMA, OBJNAME
            LIMIT 1000
        `.trim()},searchColumns:(t,e)=>{let n=t.toUpperCase();return`
            SELECT '${t}' AS DATABASE, t.SCHEMA, t.TABLENAME, c.ATTNAME AS COLUMN_NAME, c.FORMAT_TYPE AS DATA_TYPE
            FROM ${nt(n,te.TABLE)} t
            JOIN ${nt(n,te.RELATION_COLUMN)} c ON t.OBJID = c.OBJID
            WHERE UPPER(c.ATTNAME) LIKE '${e.toUpperCase()}'
            ORDER BY t.SCHEMA, t.TABLENAME, c.ATTNAME
            LIMIT 1000
        `.trim()},getTableStats:(t,e,n)=>{let r=t.toUpperCase();return`
            SELECT 
                d.ATTNAME AS DIST_KEY,
                t.OWNER
            FROM ${nt(r,te.TABLE)} t
            LEFT JOIN ${nt(r,te.TABLE_DIST_MAP)} d ON t.OBJID = d.OBJID
            WHERE t.SCHEMA = '${e.toUpperCase()}' AND t.TABLENAME = '${n.toUpperCase()}'
        `.trim()},findDependentViews:(t,e)=>{let n=t.toUpperCase();return`
            SELECT v.SCHEMA, v.VIEWNAME, v.OWNER
            FROM ${nt(n,te.VIEW)} v
            WHERE UPPER(v.DEFINITION) LIKE '%${e.toUpperCase()}%'
                AND v.VIEWNAME != '${e.toUpperCase()}'
            ORDER BY v.SCHEMA, v.VIEWNAME
            LIMIT 50
        `.trim()},findDependentProcedures:(t,e)=>{let n=t.toUpperCase();return`
            SELECT SCHEMA, PROCEDURE AS PROC_NAME, OWNER
            FROM ${nt(n,te.PROCEDURE)}
            WHERE UPPER(PROCEDURESOURCE) LIKE '%${e.toUpperCase()}%'
            ORDER BY SCHEMA, PROCEDURE
            LIMIT 25
        `.trim()},listObjectsOfType:(t,e,n)=>{let r=t.toUpperCase();if(e===et.PROCEDURE){let s=`SELECT PROCEDURESIGNATURE AS OBJNAME, SCHEMA FROM ${nt(r,te.PROCEDURE)} WHERE DATABASE = '${r}'`;return n&&(s+=` AND SCHEMA = '${n.toUpperCase()}'`),s+" ORDER BY SCHEMA, PROCEDURESIGNATURE"}let i=`SELECT OBJNAME, SCHEMA FROM ${nt(r,te.OBJECT_DATA)} WHERE DBNAME = '${r}' AND OBJTYPE = '${e}'`;return n&&(i+=` AND SCHEMA = '${n.toUpperCase()}'`),i+" ORDER BY SCHEMA, OBJNAME"},getObjectTypes:t=>{let e=t.toUpperCase();return`
            SELECT DISTINCT OBJTYPE 
            FROM ${nt(e,te.OBJECT_DATA)} 
            WHERE DBNAME = '${e}' 
            ORDER BY OBJTYPE
        `.trim()}}});function Iu(t){return!t.columns||!t.data||t.data.length===0?[]:t.data.map(e=>{let n={};return t.columns.forEach((r,i)=>{n[r.name]=e[i]}),n})}var _u,Cm=G(()=>{"use strict";ul();Mo();_u=class{constructor(e){this.storage=e;this.columnPrefetchInProgress=new Set;this.allObjectsPrefetchTriggeredSet=new Set;this.connectionPrefetchTriggered=new Set;this.connectionPrefetchInProgress=new Set}async prefetchColumnsForSchema(e,n,r,i){let s=r?`${n}.${r}`:`${n}..`,o=`${e}|${s}`;if(this.columnPrefetchInProgress.has(o))return;let a=this.storage.getTables(e,s);if(!(!a||a.length===0)){this.columnPrefetchInProgress.add(o);try{let l=[];for(let u of a){let d=qr(u);if(!d)continue;let E=`${n}.${r||""}.${d}`;this.storage.getColumns(e,E)||l.push(d)}if(l.length===0)return;let c=Qe.listColumnsWithKeys(n,{schema:r});try{let u=await i(c);if(u){let d=Iu(u),E=new Map;for(let f of d){let p=f.TABLENAME;E.has(p)||E.set(p,[]),E.get(p).push({ATTNAME:f.ATTNAME,FORMAT_TYPE:f.FORMAT_TYPE,label:f.ATTNAME,kind:5,detail:f.FORMAT_TYPE,documentation:f.DESCRIPTION||"",isPk:Number(f.IS_PK)===1,isFk:Number(f.IS_FK)===1})}for(let[f,p]of E){let h=`${n}.${r||""}.${f}`;this.storage.setColumns(e,h,p)}}}catch(u){console.error("[CachePrefetcher] Error fetching columns:",u)}}finally{this.columnPrefetchInProgress.delete(o)}}}async prefetchAllObjects(e,n,r=!1,i){let s=`ALL_OBJECTS|${e}`;if(!this.allObjectsPrefetchTriggeredSet.has(s)){this.allObjectsPrefetchTriggeredSet.add(s),console.log(`[CachePrefetcher] Starting background prefetch of all objects (Connection: ${e})`);try{let o=i;if((!o||o.length===0)&&(o=await this.prefetchDatabases(e,n)),!o||o.length===0){console.warn(`[CachePrefetcher] prefetchAllObjects aborted - no databases found for ${e}`);return}let a=Qe.listTablesAndViews(o),l=await n(a);if(!l)return;let c=Iu(l),u=new Map;for(let d of c){let E=d.SCHEMA?`${d.DBNAME}.${d.SCHEMA}`:`${d.DBNAME}..`;u.has(E)||u.set(E,{tables:[],idMap:new Map});let f=u.get(E);f.tables.push({OBJNAME:d.OBJNAME,label:d.OBJNAME,kind:d.OBJTYPE==="VIEW"?18:6,detail:d.SCHEMA?d.OBJTYPE==="VIEW"?"View":"Table":`${d.OBJTYPE==="VIEW"?"View":"Table"} (${d.SCHEMA})`,objType:d.OBJTYPE,OBJID:d.OBJID,SCHEMA:d.SCHEMA,OWNER:d.OWNER,DESCRIPTION:d.DESCRIPTION});let p=d.SCHEMA?`${d.DBNAME}.${d.SCHEMA}.${d.OBJNAME}`:`${d.DBNAME}..${d.OBJNAME}`;f.idMap.set(p,d.OBJID)}for(let[d,E]of u)r&&this.storage.getTables(e,d)||this.storage.setTables(e,d,E.tables,E.idMap);console.log(`[CachePrefetcher] Prefetched tables for ${u.size} schema(s) on ${e}`)}catch(o){console.error("[CachePrefetcher] Error in prefetchAllObjects:",o)}}}hasAllObjectsPrefetchTriggered(e){return this.allObjectsPrefetchTriggeredSet.has(`ALL_OBJECTS|${e}`)}hasConnectionPrefetchTriggered(e){return this.connectionPrefetchTriggered.has(e)}triggerConnectionPrefetch(e,n){this.connectionPrefetchTriggered.has(e)||this.connectionPrefetchInProgress.has(e)||(this.connectionPrefetchInProgress.add(e),console.log(`[CachePrefetcher] Starting eager prefetch for connection: ${e}`),this.executeConnectionPrefetch(e,n).catch(r=>console.error("[CachePrefetcher] Connection prefetch error:",r)).finally(()=>{this.connectionPrefetchInProgress.delete(e),this.connectionPrefetchTriggered.add(e),console.log(`[CachePrefetcher] Completed eager prefetch for connection: ${e}`)}))}async executeConnectionPrefetch(e,n){let r=await this.prefetchDatabases(e,n);!r||r.length===0||(await Promise.all(r.map(i=>this.prefetchSchemasForDb(e,i,n))),await this.prefetchAllObjects(e,n,!0,r),await this.prefetchAllColumnsForConnection(e,n))}async prefetchDatabases(e,n){if(this.storage.getDatabases(e))return this.storage.getDatabases(e)?.map(i=>qr(i)).filter(Boolean)||[];try{let r=Qe.LIST_DATABASES,i=await n(r);if(!i)return[];let s=Iu(i),o=s.map(a=>({DATABASE:a.DATABASE,label:a.DATABASE,kind:9,detail:"Database"}));return this.storage.setDatabases(e,o),s.map(a=>a.DATABASE)}catch(r){return console.error("[CachePrefetcher] prefetchDatabases error:",r),[]}}async prefetchSchemasForDb(e,n,r){if(!this.storage.getSchemas(e,n))try{let i=Qe.listSchemas(n),s=await r(i);if(!s)return;let a=Iu(s).filter(l=>l.SCHEMA!=null&&l.SCHEMA!=="").map(l=>({SCHEMA:l.SCHEMA,label:l.SCHEMA,kind:19,detail:`Schema in ${n}`,insertText:l.SCHEMA,sortText:l.SCHEMA,filterText:l.SCHEMA}));this.storage.setSchemas(e,n,a)}catch(i){console.error(`[CachePrefetcher] prefetchSchemasForDb error for ${n}:`,i)}}async prefetchAllColumnsForConnection(e,n){try{let r=`${e}|`,i=[];for(let[u,d]of this.storage.tableCache){if(!u.startsWith(r))continue;let E=u.split("|");if(E.length<2)continue;let p=E[1].split("."),h=p[0],T=p.length>1?p[1]:"";for(let S of d.data){let A=qr(S);A&&i.push({schema:T,name:A,db:h})}}if(i.length===0)return;let s=0,o=Date.now(),a=new Map;for(let u of i)a.has(u.db)||a.set(u.db,[]),a.get(u.db).push(u);let l=Array.from(a.entries()).map(async([u,d])=>{let E=Qe.listColumnsWithKeys(u);try{let f=Date.now(),p=await n(E),h=Date.now()-f;if(p){let T=Date.now(),S=Iu(p),A=Date.now()-T,R=new Map;for(let m of S){let N=`${m.DBNAME}.${m.SCHEMA||""}.${m.TABLENAME}`;R.has(N)||R.set(N,[]),R.get(N).push({ATTNAME:m.ATTNAME,FORMAT_TYPE:m.FORMAT_TYPE,label:m.ATTNAME,kind:5,detail:m.FORMAT_TYPE,documentation:m.DESCRIPTION||"",isPk:Number(m.IS_PK)===1,isFk:Number(m.IS_FK)===1})}for(let[m,N]of R)this.storage.getColumns(e,m)||(this.storage.setColumns(e,m,N),s++);console.log(`[CachePrefetcher] DB ${u}: ${d.length} tables (expected), ${S.length} columns (total fetched) | query=${h}ms, parse=${A}ms`)}}catch(f){console.error(`[CachePrefetcher] Error fetching columns for DB ${u}:`,f)}});await Promise.all(l);let c=Date.now()-o;console.log(`[CachePrefetcher] Prefetched columns for ${s} tables/views in ${c}ms`)}catch(r){console.error("[CachePrefetcher] prefetchAllColumnsForConnection error:",r)}}}});function bm(t,e,n){let r=[],i=e.toLowerCase();for(let[s,o]of t.tableCache){if(!Im(s,n))continue;let a=s.split("|");if(a.length<2)continue;let c=a[1].split("."),u=c[0],d=c.length>1?c[1]:void 0;for(let E of o.data){let f=qr(E);if(f&&f.toLowerCase().includes(i)){let p=E.objType||(E.kind===18?"VIEW":"TABLE");r.push({name:f,type:p,database:u,schema:d||(E.detail&&E.detail.includes("(")?E.detail.match(/\((.*?)\)/)?.[1]:void 0)})}}}for(let[s,o]of t.columnCache){if(!Im(s,n))continue;let a=s.split("|");if(a.length<2)continue;let c=a[1].split("."),u=c[0],d=c[1],E=c[2];for(let f of o.data){let p=qr(f);p&&p.toLowerCase().includes(i)&&r.push({name:p,type:"COLUMN",database:u,schema:d,parent:E})}}return r}var ym=G(()=>{"use strict";ul()});var Nu=G(()=>{"use strict";hD();ul();Nm();Om();Cm();ym();Mo()});var kE=C(Qi=>{"use strict";Object.defineProperty(Qi,"__esModule",{value:!0});Qi.utf8Count=XQ;Qi.utf8EncodeJs=SD;Qi.utf8EncodeTE=RD;Qi.utf8Encode=KQ;Qi.utf8DecodeJs=AD;Qi.utf8DecodeTD=mD;Qi.utf8Decode=e5;function XQ(t){let e=t.length,n=0,r=0;for(;r<e;){let i=t.charCodeAt(r++);if((i&4294967168)===0){n++;continue}else if((i&4294965248)===0)n+=2;else{if(i>=55296&&i<=56319&&r<e){let s=t.charCodeAt(r);(s&64512)===56320&&(++r,i=((i&1023)<<10)+(s&1023)+65536)}(i&4294901760)===0?n+=3:n+=4}}return n}function SD(t,e,n){let r=t.length,i=n,s=0;for(;s<r;){let o=t.charCodeAt(s++);if((o&4294967168)===0){e[i++]=o;continue}else if((o&4294965248)===0)e[i++]=o>>6&31|192;else{if(o>=55296&&o<=56319&&s<r){let a=t.charCodeAt(s);(a&64512)===56320&&(++s,o=((o&1023)<<10)+(a&1023)+65536)}(o&4294901760)===0?(e[i++]=o>>12&15|224,e[i++]=o>>6&63|128):(e[i++]=o>>18&7|240,e[i++]=o>>12&63|128,e[i++]=o>>6&63|128)}e[i++]=o&63|128}}var zQ=new TextEncoder,jQ=50;function RD(t,e,n){zQ.encodeInto(t,e.subarray(n))}function KQ(t,e,n){t.length>jQ?RD(t,e,n):SD(t,e,n)}var JQ=4096;function AD(t,e,n){let r=e,i=r+n,s=[],o="";for(;r<i;){let a=t[r++];if((a&128)===0)s.push(a);else if((a&224)===192){let l=t[r++]&63;s.push((a&31)<<6|l)}else if((a&240)===224){let l=t[r++]&63,c=t[r++]&63;s.push((a&31)<<12|l<<6|c)}else if((a&248)===240){let l=t[r++]&63,c=t[r++]&63,u=t[r++]&63,d=(a&7)<<18|l<<12|c<<6|u;d>65535&&(d-=65536,s.push(d>>>10&1023|55296),d=56320|d&1023),s.push(d)}else s.push(a);s.length>=JQ&&(o+=String.fromCharCode(...s),s.length=0)}return s.length>0&&(o+=String.fromCharCode(...s)),o}var QQ=new TextDecoder,ZQ=200;function mD(t,e,n){let r=t.subarray(e,e+n);return QQ.decode(r)}function e5(t,e,n){return n>ZQ?mD(t,e,n):AD(t,e,n)}});var Lm=C(WE=>{"use strict";Object.defineProperty(WE,"__esModule",{value:!0});WE.ExtData=void 0;var wm=class{type;data;constructor(e,n){this.type=e,this.data=n}};WE.ExtData=wm});var VE=C(YE=>{"use strict";Object.defineProperty(YE,"__esModule",{value:!0});YE.DecodeError=void 0;var Dm=class t extends Error{constructor(e){super(e);let n=Object.create(t.prototype);Object.setPrototypeOf(this,n),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:t.name})}};YE.DecodeError=Dm});var qE=C(ks=>{"use strict";Object.defineProperty(ks,"__esModule",{value:!0});ks.UINT32_MAX=void 0;ks.setUint64=t5;ks.setInt64=n5;ks.getInt64=r5;ks.getUint64=i5;ks.UINT32_MAX=4294967295;function t5(t,e,n){let r=n/4294967296,i=n;t.setUint32(e,r),t.setUint32(e+4,i)}function n5(t,e,n){let r=Math.floor(n/4294967296),i=n;t.setUint32(e,r),t.setUint32(e+4,i)}function r5(t,e){let n=t.getInt32(e),r=t.getUint32(e+4);return n*4294967296+r}function i5(t,e){let n=t.getUint32(e),r=t.getUint32(e+4);return n*4294967296+r}});var Pm=C(Lr=>{"use strict";Object.defineProperty(Lr,"__esModule",{value:!0});Lr.timestampExtension=Lr.EXT_TIMESTAMP=void 0;Lr.encodeTimeSpecToTimestamp=ID;Lr.encodeDateToTimeSpec=_D;Lr.encodeTimestampExtension=ND;Lr.decodeTimestampToTimeSpec=OD;Lr.decodeTimestampExtension=CD;var s5=VE(),gD=qE();Lr.EXT_TIMESTAMP=-1;var o5=4294967296-1,a5=17179869184-1;function ID({sec:t,nsec:e}){if(t>=0&&e>=0&&t<=a5)if(e===0&&t<=o5){let n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,t),n}else{let n=t/4294967296,r=t&4294967295,i=new Uint8Array(8),s=new DataView(i.buffer);return s.setUint32(0,e<<2|n&3),s.setUint32(4,r),i}else{let n=new Uint8Array(12),r=new DataView(n.buffer);return r.setUint32(0,e),(0,gD.setInt64)(r,4,t),n}}function _D(t){let e=t.getTime(),n=Math.floor(e/1e3),r=(e-n*1e3)*1e6,i=Math.floor(r/1e9);return{sec:n+i,nsec:r-i*1e9}}function ND(t){if(t instanceof Date){let e=_D(t);return ID(e)}else return null}function OD(t){let e=new DataView(t.buffer,t.byteOffset,t.byteLength);switch(t.byteLength){case 4:return{sec:e.getUint32(0),nsec:0};case 8:{let n=e.getUint32(0),r=e.getUint32(4),i=(n&3)*4294967296+r,s=n>>>2;return{sec:i,nsec:s}}case 12:{let n=(0,gD.getInt64)(e,4),r=e.getUint32(0);return{sec:n,nsec:r}}default:throw new s5.DecodeError(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${t.length}`)}}function CD(t){let e=OD(t);return new Date(e.sec*1e3+e.nsec/1e6)}Lr.timestampExtension={type:Lr.EXT_TIMESTAMP,encode:ND,decode:CD}});var jE=C(zE=>{"use strict";Object.defineProperty(zE,"__esModule",{value:!0});zE.ExtensionCodec=void 0;var XE=Lm(),l5=Pm(),xm=class t{static defaultCodec=new t;__brand;builtInEncoders=[];builtInDecoders=[];encoders=[];decoders=[];constructor(){this.register(l5.timestampExtension)}register({type:e,encode:n,decode:r}){if(e>=0)this.encoders[e]=n,this.decoders[e]=r;else{let i=-1-e;this.builtInEncoders[i]=n,this.builtInDecoders[i]=r}}tryToEncode(e,n){for(let r=0;r<this.builtInEncoders.length;r++){let i=this.builtInEncoders[r];if(i!=null){let s=i(e,n);if(s!=null){let o=-1-r;return new XE.ExtData(o,s)}}}for(let r=0;r<this.encoders.length;r++){let i=this.encoders[r];if(i!=null){let s=i(e,n);if(s!=null){let o=r;return new XE.ExtData(o,s)}}}return e instanceof XE.ExtData?e:null}decode(e,n,r){let i=n<0?this.builtInDecoders[-1-n]:this.decoders[n];return i?i(e,n,r):new XE.ExtData(n,e)}};zE.ExtensionCodec=xm});var Mm=C(vm=>{"use strict";Object.defineProperty(vm,"__esModule",{value:!0});vm.ensureUint8Array=u5;function c5(t){return t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer}function u5(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):c5(t)?new Uint8Array(t):Uint8Array.from(t)}});var Bm=C(Ei=>{"use strict";Object.defineProperty(Ei,"__esModule",{value:!0});Ei.Encoder=Ei.DEFAULT_INITIAL_BUFFER_SIZE=Ei.DEFAULT_MAX_DEPTH=void 0;var bD=kE(),d5=jE(),yD=qE(),f5=Mm();Ei.DEFAULT_MAX_DEPTH=100;Ei.DEFAULT_INITIAL_BUFFER_SIZE=2048;var Um=class t{extensionCodec;context;useBigInt64;maxDepth;initialBufferSize;sortKeys;forceFloat32;ignoreUndefined;forceIntegerToFloat;pos;view;bytes;entered=!1;constructor(e){this.extensionCodec=e?.extensionCodec??d5.ExtensionCodec.defaultCodec,this.context=e?.context,this.useBigInt64=e?.useBigInt64??!1,this.maxDepth=e?.maxDepth??Ei.DEFAULT_MAX_DEPTH,this.initialBufferSize=e?.initialBufferSize??Ei.DEFAULT_INITIAL_BUFFER_SIZE,this.sortKeys=e?.sortKeys??!1,this.forceFloat32=e?.forceFloat32??!1,this.ignoreUndefined=e?.ignoreUndefined??!1,this.forceIntegerToFloat=e?.forceIntegerToFloat??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new t({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}encodeSharedRef(e){if(this.entered)return this.clone().encodeSharedRef(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)}finally{this.entered=!1}}encode(e){if(this.entered)return this.clone().encode(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)}finally{this.entered=!1}}doEncode(e,n){if(n>this.maxDepth)throw new Error(`Too deep objects in depth ${n}`);e==null?this.encodeNil():typeof e=="boolean"?this.encodeBoolean(e):typeof e=="number"?this.forceIntegerToFloat?this.encodeNumberAsFloat(e):this.encodeNumber(e):typeof e=="string"?this.encodeString(e):this.useBigInt64&&typeof e=="bigint"?this.encodeBigInt64(e):this.encodeObject(e,n)}ensureBufferSizeToWrite(e){let n=this.pos+e;this.view.byteLength<n&&this.resizeBuffer(n*2)}resizeBuffer(e){let n=new ArrayBuffer(e),r=new Uint8Array(n),i=new DataView(n);r.set(this.bytes),this.view=i,this.bytes=r}encodeNil(){this.writeU8(192)}encodeBoolean(e){e===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(e){!this.forceIntegerToFloat&&Number.isSafeInteger(e)?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(211),this.writeI64(e)):this.encodeNumberAsFloat(e)}encodeNumberAsFloat(e){this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))}encodeBigInt64(e){e>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(e)):(this.writeU8(211),this.writeBigInt64(e))}writeStringHeader(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else if(e<4294967296)this.writeU8(219),this.writeU32(e);else throw new Error(`Too long string: ${e} bytes in UTF-8`)}encodeString(e){let r=(0,bD.utf8Count)(e);this.ensureBufferSizeToWrite(5+r),this.writeStringHeader(r),(0,bD.utf8Encode)(e,this.bytes,this.pos),this.pos+=r}encodeObject(e,n){let r=this.extensionCodec.tryToEncode(e,this.context);if(r!=null)this.encodeExtension(r);else if(Array.isArray(e))this.encodeArray(e,n);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else if(typeof e=="object")this.encodeMap(e,n);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(e)}`)}encodeBinary(e){let n=e.byteLength;if(n<256)this.writeU8(196),this.writeU8(n);else if(n<65536)this.writeU8(197),this.writeU16(n);else if(n<4294967296)this.writeU8(198),this.writeU32(n);else throw new Error(`Too large binary: ${n}`);let r=(0,f5.ensureUint8Array)(e);this.writeU8a(r)}encodeArray(e,n){let r=e.length;if(r<16)this.writeU8(144+r);else if(r<65536)this.writeU8(220),this.writeU16(r);else if(r<4294967296)this.writeU8(221),this.writeU32(r);else throw new Error(`Too large array: ${r}`);for(let i of e)this.doEncode(i,n+1)}countWithoutUndefined(e,n){let r=0;for(let i of n)e[i]!==void 0&&r++;return r}encodeMap(e,n){let r=Object.keys(e);this.sortKeys&&r.sort();let i=this.ignoreUndefined?this.countWithoutUndefined(e,r):r.length;if(i<16)this.writeU8(128+i);else if(i<65536)this.writeU8(222),this.writeU16(i);else if(i<4294967296)this.writeU8(223),this.writeU32(i);else throw new Error(`Too large map object: ${i}`);for(let s of r){let o=e[s];this.ignoreUndefined&&o===void 0||(this.encodeString(s),this.doEncode(o,n+1))}}encodeExtension(e){if(typeof e.data=="function"){let r=e.data(this.pos+6),i=r.length;if(i>=4294967296)throw new Error(`Too large extension object: ${i}`);this.writeU8(201),this.writeU32(i),this.writeI8(e.type),this.writeU8a(r);return}let n=e.data.length;if(n===1)this.writeU8(212);else if(n===2)this.writeU8(213);else if(n===4)this.writeU8(214);else if(n===8)this.writeU8(215);else if(n===16)this.writeU8(216);else if(n<256)this.writeU8(199),this.writeU8(n);else if(n<65536)this.writeU8(200),this.writeU16(n);else if(n<4294967296)this.writeU8(201),this.writeU32(n);else throw new Error(`Too large extension object: ${n}`);this.writeI8(e.type),this.writeU8a(e.data)}writeU8(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++}writeU8a(e){let n=e.length;this.ensureBufferSizeToWrite(n),this.bytes.set(e,this.pos),this.pos+=n}writeI8(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++}writeU16(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2}writeI16(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2}writeU32(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4}writeI32(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4}writeF32(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4}writeF64(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8}writeU64(e){this.ensureBufferSizeToWrite(8),(0,yD.setUint64)(this.view,this.pos,e),this.pos+=8}writeI64(e){this.ensureBufferSizeToWrite(8),(0,yD.setInt64)(this.view,this.pos,e),this.pos+=8}writeBigUint64(e){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,e),this.pos+=8}writeBigInt64(e){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,e),this.pos+=8}};Ei.Encoder=Um});var wD=C(Fm=>{"use strict";Object.defineProperty(Fm,"__esModule",{value:!0});Fm.encode=h5;var E5=Bm();function h5(t,e){return new E5.Encoder(e).encodeSharedRef(t)}});var LD=C(Hm=>{"use strict";Object.defineProperty(Hm,"__esModule",{value:!0});Hm.prettyByte=p5;function p5(t){return`${t<0?"-":""}0x${Math.abs(t).toString(16).padStart(2,"0")}`}});var DD=C(KE=>{"use strict";Object.defineProperty(KE,"__esModule",{value:!0});KE.CachedKeyDecoder=void 0;var T5=kE(),S5=16,R5=16,Gm=class{hit=0;miss=0;caches;maxKeyLength;maxLengthPerKey;constructor(e=S5,n=R5){this.maxKeyLength=e,this.maxLengthPerKey=n,this.caches=[];for(let r=0;r<this.maxKeyLength;r++)this.caches.push([])}canBeCached(e){return e>0&&e<=this.maxKeyLength}find(e,n,r){let i=this.caches[r-1];e:for(let s of i){let o=s.bytes;for(let a=0;a<r;a++)if(o[a]!==e[n+a])continue e;return s.str}return null}store(e,n){let r=this.caches[e.length-1],i={bytes:e,str:n};r.length>=this.maxLengthPerKey?r[Math.random()*r.length|0]=i:r.push(i)}decode(e,n,r){let i=this.find(e,n,r);if(i!=null)return this.hit++,i;this.miss++;let s=(0,T5.utf8DecodeJs)(e,n,r),o=Uint8Array.prototype.slice.call(e,n,n+r);return this.store(o,s),s}};KE.CachedKeyDecoder=Gm});var QE=C(JE=>{"use strict";Object.defineProperty(JE,"__esModule",{value:!0});JE.Decoder=void 0;var $m=LD(),A5=jE(),Uo=qE(),m5=kE(),PD=Mm(),g5=DD(),Zi=VE(),km="array",Cu="map_key",vD="map_value",I5=t=>{if(typeof t=="string"||typeof t=="number")return t;throw new Zi.DecodeError("The type of key must be string or number but "+typeof t)},Wm=class{stack=[];stackHeadPosition=-1;get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(e){let n=this.getUninitializedStateFromPool();n.type=km,n.position=0,n.size=e,n.array=new Array(e)}pushMapState(e){let n=this.getUninitializedStateFromPool();n.type=Cu,n.readCount=0,n.size=e,n.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){let e={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(e)}return this.stack[this.stackHeadPosition]}release(e){if(this.stack[this.stackHeadPosition]!==e)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(e.type===km){let r=e;r.size=0,r.array=void 0,r.position=0,r.type=void 0}if(e.type===Cu||e.type===vD){let r=e;r.size=0,r.map=void 0,r.readCount=0,r.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}},Ou=-1,Vm=new DataView(new ArrayBuffer(0)),_5=new Uint8Array(Vm.buffer);try{Vm.getInt8(0)}catch(t){if(!(t instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}var xD=new RangeError("Insufficient data"),N5=new g5.CachedKeyDecoder,Ym=class t{extensionCodec;context;useBigInt64;rawStrings;maxStrLength;maxBinLength;maxArrayLength;maxMapLength;maxExtLength;keyDecoder;mapKeyConverter;totalPos=0;pos=0;view=Vm;bytes=_5;headByte=Ou;stack=new Wm;entered=!1;constructor(e){this.extensionCodec=e?.extensionCodec??A5.ExtensionCodec.defaultCodec,this.context=e?.context,this.useBigInt64=e?.useBigInt64??!1,this.rawStrings=e?.rawStrings??!1,this.maxStrLength=e?.maxStrLength??Uo.UINT32_MAX,this.maxBinLength=e?.maxBinLength??Uo.UINT32_MAX,this.maxArrayLength=e?.maxArrayLength??Uo.UINT32_MAX,this.maxMapLength=e?.maxMapLength??Uo.UINT32_MAX,this.maxExtLength=e?.maxExtLength??Uo.UINT32_MAX,this.keyDecoder=e?.keyDecoder!==void 0?e.keyDecoder:N5,this.mapKeyConverter=e?.mapKeyConverter??I5}clone(){return new t({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=Ou,this.stack.reset()}setBuffer(e){let n=(0,PD.ensureUint8Array)(e);this.bytes=n,this.view=new DataView(n.buffer,n.byteOffset,n.byteLength),this.pos=0}appendBuffer(e){if(this.headByte===Ou&&!this.hasRemaining(1))this.setBuffer(e);else{let n=this.bytes.subarray(this.pos),r=(0,PD.ensureUint8Array)(e),i=new Uint8Array(n.length+r.length);i.set(n),i.set(r,n.length),this.setBuffer(i)}}hasRemaining(e){return this.view.byteLength-this.pos>=e}createExtraByteError(e){let{view:n,pos:r}=this;return new RangeError(`Extra ${n.byteLength-r} of ${n.byteLength} byte(s) found at buffer[${e}]`)}decode(e){if(this.entered)return this.clone().decode(e);try{this.entered=!0,this.reinitializeState(),this.setBuffer(e);let n=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return n}finally{this.entered=!1}}*decodeMulti(e){if(this.entered){yield*this.clone().decodeMulti(e);return}try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(e);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(e){if(this.entered)return this.clone().decodeAsync(e);try{this.entered=!0;let n=!1,r;for await(let a of e){if(n)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(a);try{r=this.doDecodeSync(),n=!0}catch(l){if(!(l instanceof RangeError))throw l}this.totalPos+=this.pos}if(n){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return r}let{headByte:i,pos:s,totalPos:o}=this;throw new RangeError(`Insufficient data in parsing ${(0,$m.prettyByte)(i)} at ${o} (${s} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(e){return this.decodeMultiAsync(e,!0)}decodeStream(e){return this.decodeMultiAsync(e,!1)}async*decodeMultiAsync(e,n){if(this.entered){yield*this.clone().decodeMultiAsync(e,n);return}try{this.entered=!0;let r=n,i=-1;for await(let s of e){if(n&&i===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(s),r&&(i=this.readArraySize(),r=!1,this.complete());try{for(;yield this.doDecodeSync(),--i!==0;);}catch(o){if(!(o instanceof RangeError))throw o}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){e:for(;;){let e=this.readHeadByte(),n;if(e>=224)n=e-256;else if(e<192)if(e<128)n=e;else if(e<144){let i=e-128;if(i!==0){this.pushMapState(i),this.complete();continue e}else n={}}else if(e<160){let i=e-144;if(i!==0){this.pushArrayState(i),this.complete();continue e}else n=[]}else{let i=e-160;n=this.decodeString(i,0)}else if(e===192)n=null;else if(e===194)n=!1;else if(e===195)n=!0;else if(e===202)n=this.readF32();else if(e===203)n=this.readF64();else if(e===204)n=this.readU8();else if(e===205)n=this.readU16();else if(e===206)n=this.readU32();else if(e===207)this.useBigInt64?n=this.readU64AsBigInt():n=this.readU64();else if(e===208)n=this.readI8();else if(e===209)n=this.readI16();else if(e===210)n=this.readI32();else if(e===211)this.useBigInt64?n=this.readI64AsBigInt():n=this.readI64();else if(e===217){let i=this.lookU8();n=this.decodeString(i,1)}else if(e===218){let i=this.lookU16();n=this.decodeString(i,2)}else if(e===219){let i=this.lookU32();n=this.decodeString(i,4)}else if(e===220){let i=this.readU16();if(i!==0){this.pushArrayState(i),this.complete();continue e}else n=[]}else if(e===221){let i=this.readU32();if(i!==0){this.pushArrayState(i),this.complete();continue e}else n=[]}else if(e===222){let i=this.readU16();if(i!==0){this.pushMapState(i),this.complete();continue e}else n={}}else if(e===223){let i=this.readU32();if(i!==0){this.pushMapState(i),this.complete();continue e}else n={}}else if(e===196){let i=this.lookU8();n=this.decodeBinary(i,1)}else if(e===197){let i=this.lookU16();n=this.decodeBinary(i,2)}else if(e===198){let i=this.lookU32();n=this.decodeBinary(i,4)}else if(e===212)n=this.decodeExtension(1,0);else if(e===213)n=this.decodeExtension(2,0);else if(e===214)n=this.decodeExtension(4,0);else if(e===215)n=this.decodeExtension(8,0);else if(e===216)n=this.decodeExtension(16,0);else if(e===199){let i=this.lookU8();n=this.decodeExtension(i,1)}else if(e===200){let i=this.lookU16();n=this.decodeExtension(i,2)}else if(e===201){let i=this.lookU32();n=this.decodeExtension(i,4)}else throw new Zi.DecodeError(`Unrecognized type byte: ${(0,$m.prettyByte)(e)}`);this.complete();let r=this.stack;for(;r.length>0;){let i=r.top();if(i.type===km)if(i.array[i.position]=n,i.position++,i.position===i.size)n=i.array,r.release(i);else continue e;else if(i.type===Cu){if(n==="__proto__")throw new Zi.DecodeError("The key __proto__ is not allowed");i.key=this.mapKeyConverter(n),i.type=vD;continue e}else if(i.map[i.key]=n,i.readCount++,i.readCount===i.size)n=i.map,r.release(i);else{i.key=null,i.type=Cu;continue e}}return n}}readHeadByte(){return this.headByte===Ou&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=Ou}readArraySize(){let e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:{if(e<160)return e-144;throw new Zi.DecodeError(`Unrecognized array type byte: ${(0,$m.prettyByte)(e)}`)}}}pushMapState(e){if(e>this.maxMapLength)throw new Zi.DecodeError(`Max length exceeded: map length (${e}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(e)}pushArrayState(e){if(e>this.maxArrayLength)throw new Zi.DecodeError(`Max length exceeded: array length (${e}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(e)}decodeString(e,n){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(e,n):this.decodeBinary(e,n)}decodeUtf8String(e,n){if(e>this.maxStrLength)throw new Zi.DecodeError(`Max length exceeded: UTF-8 byte length (${e}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+n+e)throw xD;let r=this.pos+n,i;return this.stateIsMapKey()&&this.keyDecoder?.canBeCached(e)?i=this.keyDecoder.decode(this.bytes,r,e):i=(0,m5.utf8Decode)(this.bytes,r,e),this.pos+=n+e,i}stateIsMapKey(){return this.stack.length>0?this.stack.top().type===Cu:!1}decodeBinary(e,n){if(e>this.maxBinLength)throw new Zi.DecodeError(`Max length exceeded: bin length (${e}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(e+n))throw xD;let r=this.pos+n,i=this.bytes.subarray(r,r+e);return this.pos+=n+e,i}decodeExtension(e,n){if(e>this.maxExtLength)throw new Zi.DecodeError(`Max length exceeded: ext length (${e}) > maxExtLength (${this.maxExtLength})`);let r=this.view.getInt8(this.pos+n),i=this.decodeBinary(e,n+1);return this.extensionCodec.decode(i,r,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){let e=this.view.getUint8(this.pos);return this.pos++,e}readI8(){let e=this.view.getInt8(this.pos);return this.pos++,e}readU16(){let e=this.view.getUint16(this.pos);return this.pos+=2,e}readI16(){let e=this.view.getInt16(this.pos);return this.pos+=2,e}readU32(){let e=this.view.getUint32(this.pos);return this.pos+=4,e}readI32(){let e=this.view.getInt32(this.pos);return this.pos+=4,e}readU64(){let e=(0,Uo.getUint64)(this.view,this.pos);return this.pos+=8,e}readI64(){let e=(0,Uo.getInt64)(this.view,this.pos);return this.pos+=8,e}readU64AsBigInt(){let e=this.view.getBigUint64(this.pos);return this.pos+=8,e}readI64AsBigInt(){let e=this.view.getBigInt64(this.pos);return this.pos+=8,e}readF32(){let e=this.view.getFloat32(this.pos);return this.pos+=4,e}readF64(){let e=this.view.getFloat64(this.pos);return this.pos+=8,e}};JE.Decoder=Ym});var UD=C(ZE=>{"use strict";Object.defineProperty(ZE,"__esModule",{value:!0});ZE.decode=O5;ZE.decodeMulti=C5;var MD=QE();function O5(t,e){return new MD.Decoder(e).decode(t)}function C5(t,e){return new MD.Decoder(e).decodeMulti(t)}});var HD=C(bu=>{"use strict";Object.defineProperty(bu,"__esModule",{value:!0});bu.isAsyncIterable=BD;bu.asyncIterableFromStream=FD;bu.ensureAsyncIterable=b5;function BD(t){return t[Symbol.asyncIterator]!=null}async function*FD(t){let e=t.getReader();try{for(;;){let{done:n,value:r}=await e.read();if(n)return;yield r}}finally{e.releaseLock()}}function b5(t){return BD(t)?t:FD(t)}});var GD=C(yu=>{"use strict";Object.defineProperty(yu,"__esModule",{value:!0});yu.decodeAsync=y5;yu.decodeArrayStream=w5;yu.decodeMultiStream=L5;var qm=QE(),Xm=HD();async function y5(t,e){let n=(0,Xm.ensureAsyncIterable)(t);return new qm.Decoder(e).decodeAsync(n)}function w5(t,e){let n=(0,Xm.ensureAsyncIterable)(t);return new qm.Decoder(e).decodeArrayStream(n)}function L5(t,e){let n=(0,Xm.ensureAsyncIterable)(t);return new qm.Decoder(e).decodeStream(n)}});var kD=C(He=>{"use strict";Object.defineProperty(He,"__esModule",{value:!0});He.decodeTimestampExtension=He.encodeTimestampExtension=He.decodeTimestampToTimeSpec=He.encodeTimeSpecToTimestamp=He.encodeDateToTimeSpec=He.EXT_TIMESTAMP=He.ExtData=He.ExtensionCodec=He.Encoder=He.DecodeError=He.Decoder=He.decodeMultiStream=He.decodeArrayStream=He.decodeAsync=He.decodeMulti=He.decode=He.encode=void 0;var D5=wD();Object.defineProperty(He,"encode",{enumerable:!0,get:function(){return D5.encode}});var $D=UD();Object.defineProperty(He,"decode",{enumerable:!0,get:function(){return $D.decode}});Object.defineProperty(He,"decodeMulti",{enumerable:!0,get:function(){return $D.decodeMulti}});var zm=GD();Object.defineProperty(He,"decodeAsync",{enumerable:!0,get:function(){return zm.decodeAsync}});Object.defineProperty(He,"decodeArrayStream",{enumerable:!0,get:function(){return zm.decodeArrayStream}});Object.defineProperty(He,"decodeMultiStream",{enumerable:!0,get:function(){return zm.decodeMultiStream}});var P5=QE();Object.defineProperty(He,"Decoder",{enumerable:!0,get:function(){return P5.Decoder}});var x5=VE();Object.defineProperty(He,"DecodeError",{enumerable:!0,get:function(){return x5.DecodeError}});var v5=Bm();Object.defineProperty(He,"Encoder",{enumerable:!0,get:function(){return v5.Encoder}});var M5=jE();Object.defineProperty(He,"ExtensionCodec",{enumerable:!0,get:function(){return M5.ExtensionCodec}});var U5=Lm();Object.defineProperty(He,"ExtData",{enumerable:!0,get:function(){return U5.ExtData}});var dl=Pm();Object.defineProperty(He,"EXT_TIMESTAMP",{enumerable:!0,get:function(){return dl.EXT_TIMESTAMP}});Object.defineProperty(He,"encodeDateToTimeSpec",{enumerable:!0,get:function(){return dl.encodeDateToTimeSpec}});Object.defineProperty(He,"encodeTimeSpecToTimestamp",{enumerable:!0,get:function(){return dl.encodeTimeSpecToTimestamp}});Object.defineProperty(He,"decodeTimestampToTimeSpec",{enumerable:!0,get:function(){return dl.decodeTimestampToTimeSpec}});Object.defineProperty(He,"encodeTimestampExtension",{enumerable:!0,get:function(){return dl.encodeTimestampExtension}});Object.defineProperty(He,"decodeTimestampExtension",{enumerable:!0,get:function(){return dl.decodeTimestampExtension}})});var qD={};Pt(qD,{SqlParser:()=>Zn});var Zn,Bo=G(()=>{"use strict";Zn=class{static splitStatements(e){let n=[],r="",i=!1,s=!1,o=!1,a=!1,l=0;for(;l<e.length;){let c=e[l],u=l+1<e.length?e[l+1]:"";if(o)c===`
`&&(o=!1);else if(a){if(c==="*"&&u==="/"){a=!1,r+=c+u,l++,l++;continue}}else if(i)c==="'"&&(i=!1);else if(s)c==='"'&&(s=!1);else if(c==="-"&&u==="-")o=!0;else if(c==="/"&&u==="*")a=!0;else if(c==="'")i=!0;else if(c==='"')s=!0;else if(c===";"){r.trim()&&n.push(r.trim()),r="",l++;continue}r+=c,l++}return r.trim()&&n.push(r.trim()),n}static getStatementAtPosition(e,n){let r=0,i=e.length,s=!1,o=!1,a=!1,l=!1,c=-1;for(let d=0;d<n;d++){let E=e[d],f=d+1<e.length?e[d+1]:"";a?E===`
`&&(a=!1):l?E==="*"&&f==="/"&&(l=!1,d++):s?E==="'"&&(s=!1):o?E==='"'&&(o=!1):E==="-"&&f==="-"?a=!0:E==="/"&&f==="*"?l=!0:E==="'"?s=!0:E==='"'?o=!0:E===";"&&(c=d)}r=c+1,s=!1,o=!1,a=!1,l=!1;for(let d=r;d<e.length;d++){let E=e[d],f=d+1<e.length?e[d+1]:"";if(a)E===`
`&&(a=!1);else if(l)E==="*"&&f==="/"&&(l=!1,d++);else if(s)E==="'"&&(s=!1);else if(o)E==='"'&&(o=!1);else if(E==="-"&&f==="-")a=!0;else if(E==="/"&&f==="*")l=!0;else if(E==="'")s=!0;else if(E==='"')o=!0;else if(E===";"){i=d;break}}let u=e.substring(r,i).trim();return u?{sql:u,start:r,end:i}:null}static getObjectAtPosition(e,n){let r=c=>/[a-zA-Z0-9_."]/i.test(c),i=n;for(;i>0&&r(e[i-1]);)i--;let s=n;for(;s<e.length&&r(e[s]);)s++;let o=e.substring(i,s);if(!o)return null;let a=c=>c?c.replace(/"/g,""):void 0;if(o.includes("..")){let c=o.split("..");if(c.length===2)return{database:a(c[0]),name:a(c[1])}}let l=o.split(".");return l.length===1?{name:a(l[0])}:l.length===2?{schema:a(l[0]),name:a(l[1])}:l.length===3?{database:a(l[0]),schema:a(l[1]),name:a(l[2])}:null}}});var rP={};Pt(rP,{exportToCsv:()=>ig});async function ig(t,e,n,r,i,s){let o=null;try{if(s?.isCancellationRequested)throw new Error("Export cancelled by user");r&&r.report({message:"Connecting to database..."});let a={host:t.host,port:t.port||5480,database:t.database,user:t.user,password:t.password},l=Qn();o=new l(a),await o.connect(),r&&r.report({message:"Executing query..."});let c=o.createCommand(e);i&&(c.commandTimeout=i);let u=await c.executeReader();r&&r.report({message:"Writing to CSV..."});let d=nP.createWriteStream(n,{encoding:"utf8",highWaterMark:64*1024}),E=[];for(let S=0;S<u.fieldCount;S++)E.push(u.getName(S));E.length>0&&d.write(E.map(tP).join(",")+`
`);let f=0,p=[],h=500,T=!1;try{for(;await u.read();){if(s?.isCancellationRequested){T=!0,r&&r.report({message:`Export cancelled - finalizing ${f} rows...`});break}f++;let S=[];for(let A=0;A<u.fieldCount;A++)S.push(tP(u.getValue(A)));if(p.push(S.join(",")),p.length>=h){let A=d.write(p.join(`
`)+`
`);if(p=[],A||await new Promise(R=>d.once("drain",R)),await new Promise(R=>setImmediate(R)),s?.isCancellationRequested){T=!0,r&&r.report({message:`Export cancelled - finalizing ${f} rows...`});break}r&&f%1e3===0&&r.report({message:`Processed ${f} rows...`})}}}catch(S){if(T=!0,r){let A=S instanceof Error?S.message:String(S);r.report({message:`Error after ${f} rows: ${A}`})}}if(p.length>0&&d.write(p.join(`
`)+`
`),d.end(),await new Promise((S,A)=>{d.on("finish",S),d.on("error",A)}),r){let S=T?" (cancelled - partial data saved)":"";r.report({message:`Completed: ${f} rows exported${S}`})}}finally{if(o)try{await o.close()}catch(a){console.error("Error closing connection:",a)}}}function tP(t){if(t==null)return"";let e="";return typeof t=="bigint"?t>=Number.MIN_SAFE_INTEGER&&t<=Number.MAX_SAFE_INTEGER?e=Number(t).toString():e=t.toString():t instanceof Date?e=t.toISOString():typeof t=="object"&&Buffer.isBuffer(t)?e=t.toString("hex"):typeof t=="object"?e=JSON.stringify(t):e=String(t),e.includes('"')||e.includes(",")||e.includes(`
`)||e.includes("\r")?`"${e.replace(/"/g,'""')}"`:e}var nP,sg=G(()=>{"use strict";nP=j(require("fs"))});var sP=C((ZMe,iP)=>{var c9=typeof process=="object"&&process&&process.platform==="win32";iP.exports=c9?{sep:"\\"}:{sep:"/"}});var og=C((eUe,cP)=>{"use strict";cP.exports=aP;function aP(t,e,n){t instanceof RegExp&&(t=oP(t,n)),e instanceof RegExp&&(e=oP(e,n));var r=lP(t,e,n);return r&&{start:r[0],end:r[1],pre:n.slice(0,r[0]),body:n.slice(r[0]+t.length,r[1]),post:n.slice(r[1]+e.length)}}function oP(t,e){var n=e.match(t);return n?n[0]:null}aP.range=lP;function lP(t,e,n){var r,i,s,o,a,l=n.indexOf(t),c=n.indexOf(e,l+1),u=l;if(l>=0&&c>0){if(t===e)return[l,c];for(r=[],s=n.length;u>=0&&!a;)u==l?(r.push(u),l=n.indexOf(t,u+1)):r.length==1?a=[r.pop(),c]:(i=r.pop(),i<s&&(s=i,o=c),c=n.indexOf(e,u+1)),u=l<c&&l>=0?l:c;r.length&&(a=[s,o])}return a}});var SP=C((tUe,TP)=>{var uP=og();TP.exports=f9;var dP="\0SLASH"+Math.random()+"\0",fP="\0OPEN"+Math.random()+"\0",lg="\0CLOSE"+Math.random()+"\0",EP="\0COMMA"+Math.random()+"\0",hP="\0PERIOD"+Math.random()+"\0";function ag(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function u9(t){return t.split("\\\\").join(dP).split("\\{").join(fP).split("\\}").join(lg).split("\\,").join(EP).split("\\.").join(hP)}function d9(t){return t.split(dP).join("\\").split(fP).join("{").split(lg).join("}").split(EP).join(",").split(hP).join(".")}function pP(t){if(!t)return[""];var e=[],n=uP("{","}",t);if(!n)return t.split(",");var r=n.pre,i=n.body,s=n.post,o=r.split(",");o[o.length-1]+="{"+i+"}";var a=pP(s);return s.length&&(o[o.length-1]+=a.shift(),o.push.apply(o,a)),e.push.apply(e,o),e}function f9(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),Uu(u9(t),!0).map(d9)):[]}function E9(t){return"{"+t+"}"}function h9(t){return/^-?0\d/.test(t)}function p9(t,e){return t<=e}function T9(t,e){return t>=e}function Uu(t,e){var n=[],r=uP("{","}",t);if(!r)return[t];var i=r.pre,s=r.post.length?Uu(r.post,!1):[""];if(/\$$/.test(r.pre))for(var o=0;o<s.length;o++){var a=i+"{"+r.body+"}"+s[o];n.push(a)}else{var l=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(r.body),c=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(r.body),u=l||c,d=r.body.indexOf(",")>=0;if(!u&&!d)return r.post.match(/,(?!,).*\}/)?(t=r.pre+"{"+r.body+lg+r.post,Uu(t)):[t];var E;if(u)E=r.body.split(/\.\./);else if(E=pP(r.body),E.length===1&&(E=Uu(E[0],!1).map(E9),E.length===1))return s.map(function(w){return r.pre+E[0]+w});var f;if(u){var p=ag(E[0]),h=ag(E[1]),T=Math.max(E[0].length,E[1].length),S=E.length==3?Math.abs(ag(E[2])):1,A=p9,R=h<p;R&&(S*=-1,A=T9);var m=E.some(h9);f=[];for(var N=p;A(N,h);N+=S){var L;if(c)L=String.fromCharCode(N),L==="\\"&&(L="");else if(L=String(N),m){var I=T-L.length;if(I>0){var D=new Array(I+1).join("0");N<0?L="-"+D+L.slice(1):L=D+L}}f.push(L)}}else{f=[];for(var g=0;g<E.length;g++)f.push.apply(f,Uu(E[g],!1))}for(var g=0;g<f.length;g++)for(var o=0;o<s.length;o++){var a=i+f[g]+s[o];(!e||u||a)&&n.push(a)}}return n}});var _P=C((rUe,Eg)=>{var pr=Eg.exports=(t,e,n={})=>(Rh(e),!n.nocomment&&e.charAt(0)==="#"?!1:new hl(e,n).match(t));Eg.exports=pr;var dg=sP();pr.sep=dg.sep;var Xr=Symbol("globstar **");pr.GLOBSTAR=Xr;var S9=SP(),RP={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},fg="[^/]",cg=fg+"*?",R9="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",A9="(?:(?!(?:\\/|^)\\.).)*?",gP=t=>t.split("").reduce((e,n)=>(e[n]=!0,e),{}),AP=gP("().*{}+?[]^$\\!"),m9=gP("[.("),mP=/\/+/;pr.filter=(t,e={})=>(n,r,i)=>pr(n,t,e);var Ys=(t,e={})=>{let n={};return Object.keys(t).forEach(r=>n[r]=t[r]),Object.keys(e).forEach(r=>n[r]=e[r]),n};pr.defaults=t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return pr;let e=pr,n=(r,i,s)=>e(r,i,Ys(t,s));return n.Minimatch=class extends e.Minimatch{constructor(i,s){super(i,Ys(t,s))}},n.Minimatch.defaults=r=>e.defaults(Ys(t,r)).Minimatch,n.filter=(r,i)=>e.filter(r,Ys(t,i)),n.defaults=r=>e.defaults(Ys(t,r)),n.makeRe=(r,i)=>e.makeRe(r,Ys(t,i)),n.braceExpand=(r,i)=>e.braceExpand(r,Ys(t,i)),n.match=(r,i,s)=>e.match(r,i,Ys(t,s)),n};pr.braceExpand=(t,e)=>IP(t,e);var IP=(t,e={})=>(Rh(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:S9(t)),g9=1024*64,Rh=t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>g9)throw new TypeError("pattern is too long")},ug=Symbol("subparse");pr.makeRe=(t,e)=>new hl(t,e||{}).makeRe();pr.match=(t,e,n={})=>{let r=new hl(e,n);return t=t.filter(i=>r.match(i)),r.options.nonull&&!t.length&&t.push(e),t};var I9=t=>t.replace(/\\(.)/g,"$1"),_9=t=>t.replace(/\\([^-\]])/g,"$1"),N9=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),O9=t=>t.replace(/[[\]\\]/g,"\\$&"),hl=class{constructor(e,n){Rh(e),n||(n={}),this.options=n,this.set=[],this.pattern=e,this.windowsPathsNoEscape=!!n.windowsPathsNoEscape||n.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!n.partial,this.make()}debug(){}make(){let e=this.pattern,n=this.options;if(!n.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate();let r=this.globSet=this.braceExpand();n.debug&&(this.debug=(...i)=>console.error(...i)),this.debug(this.pattern,r),r=this.globParts=r.map(i=>i.split(mP)),this.debug(this.pattern,r),r=r.map((i,s,o)=>i.map(this.parse,this)),this.debug(this.pattern,r),r=r.filter(i=>i.indexOf(!1)===-1),this.debug(this.pattern,r),this.set=r}parseNegate(){if(this.options.nonegate)return;let e=this.pattern,n=!1,r=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)n=!n,r++;r&&(this.pattern=e.slice(r)),this.negate=n}matchOne(e,n,r){var i=this.options;this.debug("matchOne",{this:this,file:e,pattern:n}),this.debug("matchOne",e.length,n.length);for(var s=0,o=0,a=e.length,l=n.length;s<a&&o<l;s++,o++){this.debug("matchOne loop");var c=n[o],u=e[s];if(this.debug(n,c,u),c===!1)return!1;if(c===Xr){this.debug("GLOBSTAR",[n,c,u]);var d=s,E=o+1;if(E===l){for(this.debug("** at the end");s<a;s++)if(e[s]==="."||e[s]===".."||!i.dot&&e[s].charAt(0)===".")return!1;return!0}for(;d<a;){var f=e[d];if(this.debug(`
globstar while`,e,d,n,E,f),this.matchOne(e.slice(d),n.slice(E),r))return this.debug("globstar found match!",d,a,f),!0;if(f==="."||f===".."||!i.dot&&f.charAt(0)==="."){this.debug("dot detected!",e,d,n,E);break}this.debug("globstar swallow a segment, and continue"),d++}return!!(r&&(this.debug(`
>>> no match, partial?`,e,d,n,E),d===a))}var p;if(typeof c=="string"?(p=u===c,this.debug("string match",c,u,p)):(p=u.match(c),this.debug("pattern match",c,u,p)),!p)return!1}if(s===a&&o===l)return!0;if(s===a)return r;if(o===l)return s===a-1&&e[s]==="";throw new Error("wtf?")}braceExpand(){return IP(this.pattern,this.options)}parse(e,n){Rh(e);let r=this.options;if(e==="**")if(r.noglobstar)e="*";else return Xr;if(e==="")return"";let i="",s=!1,o=!1,a=[],l=[],c,u=!1,d=-1,E=-1,f,p,h,T=e.charAt(0)===".",S=r.dot||T,A=()=>T?"":S?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",R=I=>I.charAt(0)==="."?"":r.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",m=()=>{if(c){switch(c){case"*":i+=cg,s=!0;break;case"?":i+=fg,s=!0;break;default:i+="\\"+c;break}this.debug("clearStateChar %j %j",c,i),c=!1}};for(let I=0,D;I<e.length&&(D=e.charAt(I));I++){if(this.debug("%s	%s %s %j",e,I,i,D),o){if(D==="/")return!1;AP[D]&&(i+="\\"),i+=D,o=!1;continue}switch(D){case"/":return!1;case"\\":if(u&&e.charAt(I+1)==="-"){i+=D;continue}m(),o=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",e,I,i,D),u){this.debug("  in class"),D==="!"&&I===E+1&&(D="^"),i+=D;continue}this.debug("call clearStateChar %j",c),m(),c=D,r.noext&&m();continue;case"(":{if(u){i+="(";continue}if(!c){i+="\\(";continue}let g={type:c,start:I-1,reStart:i.length,open:RP[c].open,close:RP[c].close};this.debug(this.pattern,"	",g),a.push(g),i+=g.open,g.start===0&&g.type!=="!"&&(T=!0,i+=R(e.slice(I+1))),this.debug("plType %j %j",c,i),c=!1;continue}case")":{let g=a[a.length-1];if(u||!g){i+="\\)";continue}a.pop(),m(),s=!0,p=g,i+=p.close,p.type==="!"&&l.push(Object.assign(p,{reEnd:i.length}));continue}case"|":{let g=a[a.length-1];if(u||!g){i+="\\|";continue}m(),i+="|",g.start===0&&g.type!=="!"&&(T=!0,i+=R(e.slice(I+1)));continue}case"[":if(m(),u){i+="\\"+D;continue}u=!0,E=I,d=i.length,i+=D;continue;case"]":if(I===E+1||!u){i+="\\"+D;continue}f=e.substring(E+1,I);try{RegExp("["+O9(_9(f))+"]"),i+=D}catch{i=i.substring(0,d)+"(?:$.)"}s=!0,u=!1;continue;default:m(),AP[D]&&!(D==="^"&&u)&&(i+="\\"),i+=D;break}}for(u&&(f=e.slice(E+1),h=this.parse(f,ug),i=i.substring(0,d)+"\\["+h[0],s=s||h[1]),p=a.pop();p;p=a.pop()){let I;I=i.slice(p.reStart+p.open.length),this.debug("setting tail",i,p),I=I.replace(/((?:\\{2}){0,64})(\\?)\|/g,(g,w,x)=>(x||(x="\\"),w+w+x+"|")),this.debug(`tail=%j
   %s`,I,I,p,i);let D=p.type==="*"?cg:p.type==="?"?fg:"\\"+p.type;s=!0,i=i.slice(0,p.reStart)+D+"\\("+I}m(),o&&(i+="\\\\");let N=m9[i.charAt(0)];for(let I=l.length-1;I>-1;I--){let D=l[I],g=i.slice(0,D.reStart),w=i.slice(D.reStart,D.reEnd-8),x=i.slice(D.reEnd),U=i.slice(D.reEnd-8,D.reEnd)+x,H=g.split(")").length,X=g.split("(").length-H,Q=x;for(let Z=0;Z<X;Z++)Q=Q.replace(/\)[+*?]?/,"");x=Q;let K=x===""&&n!==ug?"(?:$|\\/)":"";i=g+w+x+K+U}if(i!==""&&s&&(i="(?=.)"+i),N&&(i=A()+i),n===ug)return[i,s];if(r.nocase&&!s&&(s=e.toUpperCase()!==e.toLowerCase()),!s)return I9(e);let L=r.nocase?"i":"";try{return Object.assign(new RegExp("^"+i+"$",L),{_glob:e,_src:i})}catch{return new RegExp("$.")}}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let n=this.options,r=n.noglobstar?cg:n.dot?R9:A9,i=n.nocase?"i":"",s=e.map(o=>(o=o.map(a=>typeof a=="string"?N9(a):a===Xr?Xr:a._src).reduce((a,l)=>(a[a.length-1]===Xr&&l===Xr||a.push(l),a),[]),o.forEach((a,l)=>{a!==Xr||o[l-1]===Xr||(l===0?o.length>1?o[l+1]="(?:\\/|"+r+"\\/)?"+o[l+1]:o[l]=r:l===o.length-1?o[l-1]+="(?:\\/|"+r+")?":(o[l-1]+="(?:\\/|\\/"+r+"\\/)"+o[l+1],o[l+1]=Xr))}),o.filter(a=>a!==Xr).join("/"))).join("|");s="^(?:"+s+")$",this.negate&&(s="^(?!"+s+").*$");try{this.regexp=new RegExp(s,i)}catch{this.regexp=!1}return this.regexp}match(e,n=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&n)return!0;let r=this.options;dg.sep!=="/"&&(e=e.split(dg.sep).join("/")),e=e.split(mP),this.debug(this.pattern,"split",e);let i=this.set;this.debug(this.pattern,"set",i);let s;for(let o=e.length-1;o>=0&&(s=e[o],!s);o--);for(let o=0;o<i.length;o++){let a=i[o],l=e;if(r.matchBase&&a.length===1&&(l=[s]),this.matchOne(l,a,n))return r.flipNegate?!0:!this.negate}return r.flipNegate?!1:this.negate}static defaults(e){return pr.defaults(e).Minimatch}};pr.Minimatch=hl});var yP=C((iUe,bP)=>{bP.exports=CP;var pg=require("fs"),{EventEmitter:C9}=require("events"),{Minimatch:hg}=_P(),{resolve:b9}=require("path");function y9(t,e){return new Promise((n,r)=>{pg.readdir(t,{withFileTypes:!0},(i,s)=>{if(i)switch(i.code){case"ENOTDIR":e?r(i):n([]);break;case"ENOTSUP":case"ENOENT":case"ENAMETOOLONG":case"UNKNOWN":n([]);break;case"ELOOP":default:r(i);break}else n(s)})})}function NP(t,e){return new Promise((n,r)=>{(e?pg.stat:pg.lstat)(t,(s,o)=>{if(s)switch(s.code){case"ENOENT":n(e?NP(t,!1):null);break;default:n(null);break}else n(o)})})}async function*OP(t,e,n,r,i,s){let o=await y9(e+t,s);for(let a of o){let l=a.name;l===void 0&&(l=a,r=!0);let c=t+"/"+l,u=c.slice(1),d=e+"/"+u,E=null;(r||n)&&(E=await NP(d,n)),!E&&a.name!==void 0&&(E=a),E===null&&(E={isDirectory:()=>!1}),E.isDirectory()?i(u)||(yield{relative:u,absolute:d,stats:E},yield*OP(c,e,n,r,i,!1)):yield{relative:u,absolute:d,stats:E}}}async function*w9(t,e,n,r){yield*OP("",t,e,n,r,!0)}function L9(t){return{pattern:t.pattern,dot:!!t.dot,noglobstar:!!t.noglobstar,matchBase:!!t.matchBase,nocase:!!t.nocase,ignore:t.ignore,skip:t.skip,follow:!!t.follow,stat:!!t.stat,nodir:!!t.nodir,mark:!!t.mark,silent:!!t.silent,absolute:!!t.absolute}}var Ah=class extends C9{constructor(e,n,r){if(super(),typeof n=="function"&&(r=n,n=null),this.options=L9(n||{}),this.matchers=[],this.options.pattern){let i=Array.isArray(this.options.pattern)?this.options.pattern:[this.options.pattern];this.matchers=i.map(s=>new hg(s,{dot:this.options.dot,noglobstar:this.options.noglobstar,matchBase:this.options.matchBase,nocase:this.options.nocase}))}if(this.ignoreMatchers=[],this.options.ignore){let i=Array.isArray(this.options.ignore)?this.options.ignore:[this.options.ignore];this.ignoreMatchers=i.map(s=>new hg(s,{dot:!0}))}if(this.skipMatchers=[],this.options.skip){let i=Array.isArray(this.options.skip)?this.options.skip:[this.options.skip];this.skipMatchers=i.map(s=>new hg(s,{dot:!0}))}this.iterator=w9(b9(e||"."),this.options.follow,this.options.stat,this._shouldSkipDirectory.bind(this)),this.paused=!1,this.inactive=!1,this.aborted=!1,r&&(this._matches=[],this.on("match",i=>this._matches.push(this.options.absolute?i.absolute:i.relative)),this.on("error",i=>r(i)),this.on("end",()=>r(null,this._matches))),setTimeout(()=>this._next(),0)}_shouldSkipDirectory(e){return this.skipMatchers.some(n=>n.match(e))}_fileMatches(e,n){let r=e+(n?"/":"");return(this.matchers.length===0||this.matchers.some(i=>i.match(r)))&&!this.ignoreMatchers.some(i=>i.match(r))&&(!this.options.nodir||!n)}_next(){!this.paused&&!this.aborted?this.iterator.next().then(e=>{if(e.done)this.emit("end");else{let n=e.value.stats.isDirectory();if(this._fileMatches(e.value.relative,n)){let r=e.value.relative,i=e.value.absolute;this.options.mark&&n&&(r+="/",i+="/"),this.options.stat?this.emit("match",{relative:r,absolute:i,stat:e.value.stats}):this.emit("match",{relative:r,absolute:i})}this._next(this.iterator)}}).catch(e=>{this.abort(),this.emit("error",e),!e.code&&!this.options.silent&&console.error(e)}):this.inactive=!0}abort(){this.aborted=!0}pause(){this.paused=!0}resume(){this.paused=!1,this.inactive&&(this.inactive=!1,this._next())}};function CP(t,e,n){return new Ah(t,e,n)}CP.ReaddirGlob=Ah});var LP=C((mh,wP)=>{(function(t,e){typeof mh=="object"&&typeof wP<"u"?e(mh):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e(t.async={}))})(mh,(function(t){"use strict";function e(b,...O){return(...y)=>b(...O,...y)}function n(b){return function(...O){var y=O.pop();return b.call(this,O,y)}}var r=typeof queueMicrotask=="function"&&queueMicrotask,i=typeof setImmediate=="function"&&setImmediate,s=typeof process=="object"&&typeof process.nextTick=="function";function o(b){setTimeout(b,0)}function a(b){return(O,...y)=>b(()=>O(...y))}var l;r?l=queueMicrotask:i?l=setImmediate:s?l=process.nextTick:l=o;var c=a(l);function u(b){return f(b)?function(...O){let y=O.pop(),P=b.apply(this,O);return d(P,y)}:n(function(O,y){var P;try{P=b.apply(this,O)}catch(B){return y(B)}if(P&&typeof P.then=="function")return d(P,y);y(null,P)})}function d(b,O){return b.then(y=>{E(O,null,y)},y=>{E(O,y&&(y instanceof Error||y.message)?y:new Error(y))})}function E(b,O,y){try{b(O,y)}catch(P){c(B=>{throw B},P)}}function f(b){return b[Symbol.toStringTag]==="AsyncFunction"}function p(b){return b[Symbol.toStringTag]==="AsyncGenerator"}function h(b){return typeof b[Symbol.asyncIterator]=="function"}function T(b){if(typeof b!="function")throw new Error("expected a function");return f(b)?u(b):b}function S(b,O){if(O||(O=b.length),!O)throw new Error("arity is undefined");function y(...P){return typeof P[O-1]=="function"?b.apply(this,P):new Promise((B,F)=>{P[O-1]=($,...k)=>{if($)return F($);B(k.length>1?k:k[0])},b.apply(this,P)})}return y}function A(b){return function(y,...P){return S(function(F){var $=this;return b(y,(k,q)=>{T(k).apply($,P.concat(q))},F)})}}function R(b,O,y,P){O=O||[];var B=[],F=0,$=T(y);return b(O,(k,q,oe)=>{var qe=F++;$(k,(Ke,Xe)=>{B[qe]=Xe,oe(Ke)})},k=>{P(k,B)})}function m(b){return b&&typeof b.length=="number"&&b.length>=0&&b.length%1===0}let N={};function L(b){function O(...y){if(b!==null){var P=b;b=null,P.apply(this,y)}}return Object.assign(O,b),O}function I(b){return b[Symbol.iterator]&&b[Symbol.iterator]()}function D(b){var O=-1,y=b.length;return function(){return++O<y?{value:b[O],key:O}:null}}function g(b){var O=-1;return function(){var P=b.next();return P.done?null:(O++,{value:P.value,key:O})}}function w(b){var O=b?Object.keys(b):[],y=-1,P=O.length;return function B(){var F=O[++y];return F==="__proto__"?B():y<P?{value:b[F],key:F}:null}}function x(b){if(m(b))return D(b);var O=I(b);return O?g(O):w(b)}function U(b){return function(...O){if(b===null)throw new Error("Callback was already called.");var y=b;b=null,y.apply(this,O)}}function H(b,O,y,P){let B=!1,F=!1,$=!1,k=0,q=0;function oe(){k>=O||$||B||($=!0,b.next().then(({value:Xe,done:br})=>{if(!(F||B)){if($=!1,br){B=!0,k<=0&&P(null);return}k++,y(Xe,q,qe),q++,oe()}}).catch(Ke))}function qe(Xe,br){if(k-=1,!F){if(Xe)return Ke(Xe);if(Xe===!1){B=!0,F=!0;return}if(br===N||B&&k<=0)return B=!0,P(null);oe()}}function Ke(Xe){F||($=!1,B=!0,P(Xe))}oe()}var X=b=>(O,y,P)=>{if(P=L(P),b<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!O)return P(null);if(p(O))return H(O,b,y,P);if(h(O))return H(O[Symbol.asyncIterator](),b,y,P);var B=x(O),F=!1,$=!1,k=0,q=!1;function oe(Ke,Xe){if(!$)if(k-=1,Ke)F=!0,P(Ke);else if(Ke===!1)F=!0,$=!0;else{if(Xe===N||F&&k<=0)return F=!0,P(null);q||qe()}}function qe(){for(q=!0;k<b&&!F;){var Ke=B();if(Ke===null){F=!0,k<=0&&P(null);return}k+=1,y(Ke.value,Ke.key,U(oe))}q=!1}qe()};function Q(b,O,y,P){return X(O)(b,T(y),P)}var K=S(Q,4);function Z(b,O,y){y=L(y);var P=0,B=0,{length:F}=b,$=!1;F===0&&y(null);function k(q,oe){q===!1&&($=!0),$!==!0&&(q?y(q):(++B===F||oe===N)&&y(null))}for(;P<F;P++)O(b[P],P,U(k))}function Oe(b,O,y){return K(b,1/0,O,y)}function ae(b,O,y){var P=m(b)?Z:Oe;return P(b,T(O),y)}var Ht=S(ae,3);function WA(b,O,y){return R(Ht,b,O,y)}var Qa=S(WA,3),z=A(Qa);function ie(b,O,y){return K(b,1,O,y)}var Se=S(ie,3);function gt(b,O,y){return R(Se,b,O,y)}var It=S(gt,3),ar=A(It);let Gt=Symbol("promiseCallback");function Cr(){let b,O;function y(P,...B){if(P)return O(P);b(B.length>1?B:B[0])}return y[Gt]=new Promise((P,B)=>{b=P,O=B}),y}function nE(b,O,y){typeof O!="number"&&(y=O,O=null),y=L(y||Cr());var P=Object.keys(b).length;if(!P)return y(null);O||(O=P);var B={},F=0,$=!1,k=!1,q=Object.create(null),oe=[],qe=[],Ke={};Object.keys(b).forEach(se=>{var fe=b[se];if(!Array.isArray(fe)){Xe(se,[fe]),qe.push(se);return}var ze=fe.slice(0,fe.length-1),Tt=ze.length;if(Tt===0){Xe(se,fe),qe.push(se);return}Ke[se]=Tt,ze.forEach(dn=>{if(!b[dn])throw new Error("async.auto task `"+se+"` has a non-existent dependency `"+dn+"` in "+ze.join(", "));tl(dn,()=>{Tt--,Tt===0&&Xe(se,fe)})})}),Je(),br();function Xe(se,fe){oe.push(()=>lu(se,fe))}function br(){if(!$){if(oe.length===0&&F===0)return y(null,B);for(;oe.length&&F<O;){var se=oe.shift();se()}}}function tl(se,fe){var ze=q[se];ze||(ze=q[se]=[]),ze.push(fe)}function yo(se){var fe=q[se]||[];fe.forEach(ze=>ze()),br()}function lu(se,fe){if(!k){var ze=U((dn,...yr)=>{if(F--,dn===!1){$=!0;return}if(yr.length<2&&([yr]=yr),dn){var nl={};if(Object.keys(B).forEach(wo=>{nl[wo]=B[wo]}),nl[se]=yr,k=!0,q=Object.create(null),$)return;y(dn,nl)}else B[se]=yr,yo(se)});F++;var Tt=T(fe[fe.length-1]);fe.length>1?Tt(B,ze):Tt(ze)}}function Je(){for(var se,fe=0;qe.length;)se=qe.pop(),fe++,de(se).forEach(ze=>{--Ke[ze]===0&&qe.push(ze)});if(fe!==P)throw new Error("async.auto cannot execute tasks due to a recursive dependency")}function de(se){var fe=[];return Object.keys(b).forEach(ze=>{let Tt=b[ze];Array.isArray(Tt)&&Tt.indexOf(se)>=0&&fe.push(ze)}),fe}return y[Gt]}var rE=/^(?:async\s)?(?:function)?\s*(?:\w+\s*)?\(([^)]+)\)(?:\s*{)/,bo=/^(?:async\s)?\s*(?:\(\s*)?((?:[^)=\s]\s*)*)(?:\)\s*)?=>/,iE=/,/,Za=/(=.+)?(\s*)$/;function nu(b){let O="",y=0,P=b.indexOf("*/");for(;y<b.length;)if(b[y]==="/"&&b[y+1]==="/"){let B=b.indexOf(`
`,y);y=B===-1?b.length:B}else if(P!==-1&&b[y]==="/"&&b[y+1]==="*"){let B=b.indexOf("*/",y);B!==-1?(y=B+2,P=b.indexOf("*/",y)):(O+=b[y],y++)}else O+=b[y],y++;return O}function YA(b){let O=nu(b.toString()),y=O.match(rE);if(y||(y=O.match(bo)),!y)throw new Error(`could not parse args in autoInject
Source:
`+O);let[,P]=y;return P.replace(/\s/g,"").split(iE).map(B=>B.replace(Za,"").trim())}function v0(b,O){var y={};return Object.keys(b).forEach(P=>{var B=b[P],F,$=f(B),k=!$&&B.length===1||$&&B.length===0;if(Array.isArray(B))F=[...B],B=F.pop(),y[P]=F.concat(F.length>0?q:B);else if(k)y[P]=B;else{if(F=YA(B),B.length===0&&!$&&F.length===0)throw new Error("autoInject task functions require explicit parameters.");$||F.pop(),y[P]=F.concat(q)}function q(oe,qe){var Ke=F.map(Xe=>oe[Xe]);Ke.push(qe),T(B)(...Ke)}}),nE(y,O)}class AJ{constructor(){this.head=this.tail=null,this.length=0}removeLink(O){return O.prev?O.prev.next=O.next:this.head=O.next,O.next?O.next.prev=O.prev:this.tail=O.prev,O.prev=O.next=null,this.length-=1,O}empty(){for(;this.head;)this.shift();return this}insertAfter(O,y){y.prev=O,y.next=O.next,O.next?O.next.prev=y:this.tail=y,O.next=y,this.length+=1}insertBefore(O,y){y.prev=O.prev,y.next=O,O.prev?O.prev.next=y:this.head=y,O.prev=y,this.length+=1}unshift(O){this.head?this.insertBefore(this.head,O):M0(this,O)}push(O){this.tail?this.insertAfter(this.tail,O):M0(this,O)}shift(){return this.head&&this.removeLink(this.head)}pop(){return this.tail&&this.removeLink(this.tail)}toArray(){return[...this]}*[Symbol.iterator](){for(var O=this.head;O;)yield O.data,O=O.next}remove(O){for(var y=this.head;y;){var{next:P}=y;O(y)&&this.removeLink(y),y=P}return this}}function M0(b,O){b.length=1,b.head=b.tail=O}function VA(b,O,y){if(O==null)O=1;else if(O===0)throw new RangeError("Concurrency must not be zero");var P=T(b),B=0,F=[];let $={error:[],drain:[],saturated:[],unsaturated:[],empty:[]};function k(de,se){$[de].push(se)}function q(de,se){let fe=(...ze)=>{oe(de,fe),se(...ze)};$[de].push(fe)}function oe(de,se){if(!de)return Object.keys($).forEach(fe=>$[fe]=[]);if(!se)return $[de]=[];$[de]=$[de].filter(fe=>fe!==se)}function qe(de,...se){$[de].forEach(fe=>fe(...se))}var Ke=!1;function Xe(de,se,fe,ze){if(ze!=null&&typeof ze!="function")throw new Error("task callback must be a function");Je.started=!0;var Tt,dn;function yr(wo,...cu){if(wo)return fe?dn(wo):Tt();if(cu.length<=1)return Tt(cu[0]);Tt(cu)}var nl=Je._createTaskItem(de,fe?yr:ze||yr);if(se?Je._tasks.unshift(nl):Je._tasks.push(nl),Ke||(Ke=!0,c(()=>{Ke=!1,Je.process()})),fe||!ze)return new Promise((wo,cu)=>{Tt=wo,dn=cu})}function br(de){return function(se,...fe){B-=1;for(var ze=0,Tt=de.length;ze<Tt;ze++){var dn=de[ze],yr=F.indexOf(dn);yr===0?F.shift():yr>0&&F.splice(yr,1),dn.callback(se,...fe),se!=null&&qe("error",se,dn.data)}B<=Je.concurrency-Je.buffer&&qe("unsaturated"),Je.idle()&&qe("drain"),Je.process()}}function tl(de){return de.length===0&&Je.idle()?(c(()=>qe("drain")),!0):!1}let yo=de=>se=>{if(!se)return new Promise((fe,ze)=>{q(de,(Tt,dn)=>{if(Tt)return ze(Tt);fe(dn)})});oe(de),k(de,se)};var lu=!1,Je={_tasks:new AJ,_createTaskItem(de,se){return{data:de,callback:se}},*[Symbol.iterator](){yield*Je._tasks[Symbol.iterator]()},concurrency:O,payload:y,buffer:O/4,started:!1,paused:!1,push(de,se){return Array.isArray(de)?tl(de)?void 0:de.map(fe=>Xe(fe,!1,!1,se)):Xe(de,!1,!1,se)},pushAsync(de,se){return Array.isArray(de)?tl(de)?void 0:de.map(fe=>Xe(fe,!1,!0,se)):Xe(de,!1,!0,se)},kill(){oe(),Je._tasks.empty()},unshift(de,se){return Array.isArray(de)?tl(de)?void 0:de.map(fe=>Xe(fe,!0,!1,se)):Xe(de,!0,!1,se)},unshiftAsync(de,se){return Array.isArray(de)?tl(de)?void 0:de.map(fe=>Xe(fe,!0,!0,se)):Xe(de,!0,!0,se)},remove(de){Je._tasks.remove(de)},process(){if(!lu){for(lu=!0;!Je.paused&&B<Je.concurrency&&Je._tasks.length;){var de=[],se=[],fe=Je._tasks.length;Je.payload&&(fe=Math.min(fe,Je.payload));for(var ze=0;ze<fe;ze++){var Tt=Je._tasks.shift();de.push(Tt),F.push(Tt),se.push(Tt.data)}B+=1,Je._tasks.length===0&&qe("empty"),B===Je.concurrency&&qe("saturated");var dn=U(br(de));P(se,dn)}lu=!1}},length(){return Je._tasks.length},running(){return B},workersList(){return F},idle(){return Je._tasks.length+B===0},pause(){Je.paused=!0},resume(){Je.paused!==!1&&(Je.paused=!1,c(Je.process))}};return Object.defineProperties(Je,{saturated:{writable:!1,value:yo("saturated")},unsaturated:{writable:!1,value:yo("unsaturated")},empty:{writable:!1,value:yo("empty")},drain:{writable:!1,value:yo("drain")},error:{writable:!1,value:yo("error")}}),Je}function U0(b,O){return VA(b,1,O)}function B0(b,O,y){return VA(b,O,y)}function mJ(b,O,y,P){P=L(P);var B=T(y);return Se(b,(F,$,k)=>{B(O,F,(q,oe)=>{O=oe,k(q)})},F=>P(F,O))}var Fs=S(mJ,4);function qA(...b){var O=b.map(T);return function(...y){var P=this,B=y[y.length-1];return typeof B=="function"?y.pop():B=Cr(),Fs(O,y,(F,$,k)=>{$.apply(P,F.concat((q,...oe)=>{k(q,oe)}))},(F,$)=>B(F,...$)),B[Gt]}}function F0(...b){return qA(...b.reverse())}function gJ(b,O,y,P){return R(X(O),b,y,P)}var ru=S(gJ,4);function IJ(b,O,y,P){var B=T(y);return ru(b,O,(F,$)=>{B(F,(k,...q)=>k?$(k):$(k,q))},(F,$)=>{for(var k=[],q=0;q<$.length;q++)$[q]&&(k=k.concat(...$[q]));return P(F,k)})}var el=S(IJ,4);function _J(b,O,y){return el(b,1/0,O,y)}var sE=S(_J,3);function NJ(b,O,y){return el(b,1,O,y)}var oE=S(NJ,3);function H0(...b){return function(...O){var y=O.pop();return y(null,...b)}}function Ki(b,O){return(y,P,B,F)=>{var $=!1,k;let q=T(B);y(P,(oe,qe,Ke)=>{q(oe,(Xe,br)=>{if(Xe||Xe===!1)return Ke(Xe);if(b(br)&&!k)return $=!0,k=O(!0,oe),Ke(null,N);Ke()})},oe=>{if(oe)return F(oe);F(null,$?k:O(!1))})}}function OJ(b,O,y){return Ki(P=>P,(P,B)=>B)(Ht,b,O,y)}var aE=S(OJ,3);function CJ(b,O,y,P){return Ki(B=>B,(B,F)=>F)(X(O),b,y,P)}var lE=S(CJ,4);function bJ(b,O,y){return Ki(P=>P,(P,B)=>B)(X(1),b,O,y)}var cE=S(bJ,3);function G0(b){return(O,...y)=>T(O)(...y,(P,...B)=>{typeof console=="object"&&(P?console.error&&console.error(P):console[b]&&B.forEach(F=>console[b](F)))})}var $0=G0("dir");function yJ(b,O,y){y=U(y);var P=T(b),B=T(O),F;function $(q,...oe){if(q)return y(q);q!==!1&&(F=oe,B(...oe,k))}function k(q,oe){if(q)return y(q);if(q!==!1){if(!oe)return y(null,...F);P($)}}return k(null,!0)}var iu=S(yJ,3);function k0(b,O,y){let P=T(O);return iu(b,(...B)=>{let F=B.pop();P(...B,($,k)=>F($,!k))},y)}function W0(b){return(O,y,P)=>b(O,P)}function wJ(b,O,y){return Ht(b,W0(T(O)),y)}var uE=S(wJ,3);function LJ(b,O,y,P){return X(O)(b,W0(T(y)),P)}var su=S(LJ,4);function DJ(b,O,y){return su(b,1,O,y)}var ou=S(DJ,3);function XA(b){return f(b)?b:function(...O){var y=O.pop(),P=!0;O.push((...B)=>{P?c(()=>y(...B)):y(...B)}),b.apply(this,O),P=!1}}function PJ(b,O,y){return Ki(P=>!P,P=>!P)(Ht,b,O,y)}var dE=S(PJ,3);function xJ(b,O,y,P){return Ki(B=>!B,B=>!B)(X(O),b,y,P)}var fE=S(xJ,4);function vJ(b,O,y){return Ki(P=>!P,P=>!P)(Se,b,O,y)}var EE=S(vJ,3);function MJ(b,O,y,P){var B=new Array(O.length);b(O,(F,$,k)=>{y(F,(q,oe)=>{B[$]=!!oe,k(q)})},F=>{if(F)return P(F);for(var $=[],k=0;k<O.length;k++)B[k]&&$.push(O[k]);P(null,$)})}function UJ(b,O,y,P){var B=[];b(O,(F,$,k)=>{y(F,(q,oe)=>{if(q)return k(q);oe&&B.push({index:$,value:F}),k(q)})},F=>{if(F)return P(F);P(null,B.sort(($,k)=>$.index-k.index).map($=>$.value))})}function hE(b,O,y,P){var B=m(O)?MJ:UJ;return B(b,O,T(y),P)}function BJ(b,O,y){return hE(Ht,b,O,y)}var pE=S(BJ,3);function FJ(b,O,y,P){return hE(X(O),b,y,P)}var TE=S(FJ,4);function HJ(b,O,y){return hE(Se,b,O,y)}var SE=S(HJ,3);function GJ(b,O){var y=U(O),P=T(XA(b));function B(F){if(F)return y(F);F!==!1&&P(B)}return B()}var Y0=S(GJ,2);function $J(b,O,y,P){var B=T(y);return ru(b,O,(F,$)=>{B(F,(k,q)=>k?$(k):$(k,{key:q,val:F}))},(F,$)=>{for(var k={},{hasOwnProperty:q}=Object.prototype,oe=0;oe<$.length;oe++)if($[oe]){var{key:qe}=$[oe],{val:Ke}=$[oe];q.call(k,qe)?k[qe].push(Ke):k[qe]=[Ke]}return P(F,k)})}var RE=S($J,4);function V0(b,O,y){return RE(b,1/0,O,y)}function q0(b,O,y){return RE(b,1,O,y)}var X0=G0("log");function kJ(b,O,y,P){P=L(P);var B={},F=T(y);return X(O)(b,($,k,q)=>{F($,k,(oe,qe)=>{if(oe)return q(oe);B[k]=qe,q(oe)})},$=>P($,B))}var AE=S(kJ,4);function z0(b,O,y){return AE(b,1/0,O,y)}function j0(b,O,y){return AE(b,1,O,y)}function K0(b,O=y=>y){var y=Object.create(null),P=Object.create(null),B=T(b),F=n(($,k)=>{var q=O(...$);q in y?c(()=>k(null,...y[q])):q in P?P[q].push(k):(P[q]=[k],B(...$,(oe,...qe)=>{oe||(y[q]=qe);var Ke=P[q];delete P[q];for(var Xe=0,br=Ke.length;Xe<br;Xe++)Ke[Xe](oe,...qe)}))});return F.memo=y,F.unmemoized=b,F}var mE;s?mE=process.nextTick:i?mE=setImmediate:mE=o;var J0=a(mE),zA=S((b,O,y)=>{var P=m(O)?[]:{};b(O,(B,F,$)=>{T(B)((k,...q)=>{q.length<2&&([q]=q),P[F]=q,$(k)})},B=>y(B,P))},3);function Q0(b,O){return zA(Ht,b,O)}function Z0(b,O,y){return zA(X(O),b,y)}function jA(b,O){var y=T(b);return VA((P,B)=>{y(P[0],B)},O,1)}class WJ{constructor(){this.heap=[],this.pushCount=Number.MIN_SAFE_INTEGER}get length(){return this.heap.length}empty(){return this.heap=[],this}percUp(O){let y;for(;O>0&&KA(this.heap[O],this.heap[y=eL(O)]);){let P=this.heap[O];this.heap[O]=this.heap[y],this.heap[y]=P,O=y}}percDown(O){let y;for(;(y=YJ(O))<this.heap.length&&(y+1<this.heap.length&&KA(this.heap[y+1],this.heap[y])&&(y=y+1),!KA(this.heap[O],this.heap[y]));){let P=this.heap[O];this.heap[O]=this.heap[y],this.heap[y]=P,O=y}}push(O){O.pushCount=++this.pushCount,this.heap.push(O),this.percUp(this.heap.length-1)}unshift(O){return this.heap.push(O)}shift(){let[O]=this.heap;return this.heap[0]=this.heap[this.heap.length-1],this.heap.pop(),this.percDown(0),O}toArray(){return[...this]}*[Symbol.iterator](){for(let O=0;O<this.heap.length;O++)yield this.heap[O].data}remove(O){let y=0;for(let P=0;P<this.heap.length;P++)O(this.heap[P])||(this.heap[y]=this.heap[P],y++);this.heap.splice(y);for(let P=eL(this.heap.length-1);P>=0;P--)this.percDown(P);return this}}function YJ(b){return(b<<1)+1}function eL(b){return(b+1>>1)-1}function KA(b,O){return b.priority!==O.priority?b.priority<O.priority:b.pushCount<O.pushCount}function tL(b,O){var y=jA(b,O),{push:P,pushAsync:B}=y;y._tasks=new WJ,y._createTaskItem=({data:$,priority:k},q)=>({data:$,priority:k,callback:q});function F($,k){return Array.isArray($)?$.map(q=>({data:q,priority:k})):{data:$,priority:k}}return y.push=function($,k=0,q){return P(F($,k),q)},y.pushAsync=function($,k=0,q){return B(F($,k),q)},delete y.unshift,delete y.unshiftAsync,y}function VJ(b,O){if(O=L(O),!Array.isArray(b))return O(new TypeError("First argument to race must be an array of functions"));if(!b.length)return O();for(var y=0,P=b.length;y<P;y++)T(b[y])(O)}var nL=S(VJ,2);function gE(b,O,y,P){var B=[...b].reverse();return Fs(B,O,y,P)}function IE(b){var O=T(b);return n(function(P,B){return P.push((F,...$)=>{let k={};if(F&&(k.error=F),$.length>0){var q=$;$.length<=1&&([q]=$),k.value=q}B(null,k)}),O.apply(this,P)})}function rL(b){var O;return Array.isArray(b)?O=b.map(IE):(O={},Object.keys(b).forEach(y=>{O[y]=IE.call(this,b[y])})),O}function JA(b,O,y,P){let B=T(y);return hE(b,O,(F,$)=>{B(F,(k,q)=>{$(k,!q)})},P)}function qJ(b,O,y){return JA(Ht,b,O,y)}var iL=S(qJ,3);function XJ(b,O,y,P){return JA(X(O),b,y,P)}var sL=S(XJ,4);function zJ(b,O,y){return JA(Se,b,O,y)}var oL=S(zJ,3);function aL(b){return function(){return b}}let QA=5,lL=0;function _E(b,O,y){var P={times:QA,intervalFunc:aL(lL)};if(arguments.length<3&&typeof b=="function"?(y=O||Cr(),O=b):(jJ(P,b),y=y||Cr()),typeof O!="function")throw new Error("Invalid arguments for async.retry");var B=T(O),F=1;function $(){B((k,...q)=>{k!==!1&&(k&&F++<P.times&&(typeof P.errorFilter!="function"||P.errorFilter(k))?setTimeout($,P.intervalFunc(F-1)):y(k,...q))})}return $(),y[Gt]}function jJ(b,O){if(typeof O=="object")b.times=+O.times||QA,b.intervalFunc=typeof O.interval=="function"?O.interval:aL(+O.interval||lL),b.errorFilter=O.errorFilter;else if(typeof O=="number"||typeof O=="string")b.times=+O||QA;else throw new Error("Invalid arguments for async.retry")}function cL(b,O){O||(O=b,b=null);let y=b&&b.arity||O.length;f(O)&&(y+=1);var P=T(O);return n((B,F)=>{(B.length<y-1||F==null)&&(B.push(F),F=Cr());function $(k){P(...B,k)}return b?_E(b,$,F):_E($,F),F[Gt]})}function uL(b,O){return zA(Se,b,O)}function KJ(b,O,y){return Ki(Boolean,P=>P)(Ht,b,O,y)}var NE=S(KJ,3);function JJ(b,O,y,P){return Ki(Boolean,B=>B)(X(O),b,y,P)}var OE=S(JJ,4);function QJ(b,O,y){return Ki(Boolean,P=>P)(Se,b,O,y)}var CE=S(QJ,3);function ZJ(b,O,y){var P=T(O);return Qa(b,(F,$)=>{P(F,(k,q)=>{if(k)return $(k);$(k,{value:F,criteria:q})})},(F,$)=>{if(F)return y(F);y(null,$.sort(B).map(k=>k.value))});function B(F,$){var k=F.criteria,q=$.criteria;return k<q?-1:k>q?1:0}}var dL=S(ZJ,3);function fL(b,O,y){var P=T(b);return n((B,F)=>{var $=!1,k;function q(){var oe=b.name||"anonymous",qe=new Error('Callback function "'+oe+'" timed out.');qe.code="ETIMEDOUT",y&&(qe.info=y),$=!0,F(qe)}B.push((...oe)=>{$||(F(...oe),clearTimeout(k))}),k=setTimeout(q,O),P(...B)})}function eQ(b){for(var O=Array(b);b--;)O[b]=b;return O}function bE(b,O,y,P){var B=T(y);return ru(eQ(b),O,B,P)}function EL(b,O,y){return bE(b,1/0,O,y)}function hL(b,O,y){return bE(b,1,O,y)}function pL(b,O,y,P){arguments.length<=3&&typeof O=="function"&&(P=y,y=O,O=Array.isArray(b)?[]:{}),P=L(P||Cr());var B=T(y);return Ht(b,(F,$,k)=>{B(O,F,$,k)},F=>P(F,O)),P[Gt]}function tQ(b,O){var y=null,P;return ou(b,(B,F)=>{T(B)(($,...k)=>{if($===!1)return F($);k.length<2?[P]=k:P=k,y=$,F($?null:{})})},()=>O(y,P))}var TL=S(tQ);function SL(b){return(...O)=>(b.unmemoized||b)(...O)}function nQ(b,O,y){y=U(y);var P=T(O),B=T(b),F=[];function $(q,...oe){if(q)return y(q);F=oe,q!==!1&&B(k)}function k(q,oe){if(q)return y(q);if(q!==!1){if(!oe)return y(null,...F);P($)}}return B(k)}var au=S(nQ,3);function RL(b,O,y){let P=T(b);return au(B=>P((F,$)=>B(F,!$)),O,y)}function rQ(b,O){if(O=L(O),!Array.isArray(b))return O(new Error("First argument to waterfall must be an array of functions"));if(!b.length)return O();var y=0;function P(F){var $=T(b[y++]);$(...F,U(B))}function B(F,...$){if(F!==!1){if(F||y===b.length)return O(F,...$);P($)}}P([])}var AL=S(rQ),iQ={apply:e,applyEach:z,applyEachSeries:ar,asyncify:u,auto:nE,autoInject:v0,cargo:U0,cargoQueue:B0,compose:F0,concat:sE,concatLimit:el,concatSeries:oE,constant:H0,detect:aE,detectLimit:lE,detectSeries:cE,dir:$0,doUntil:k0,doWhilst:iu,each:uE,eachLimit:su,eachOf:Ht,eachOfLimit:K,eachOfSeries:Se,eachSeries:ou,ensureAsync:XA,every:dE,everyLimit:fE,everySeries:EE,filter:pE,filterLimit:TE,filterSeries:SE,forever:Y0,groupBy:V0,groupByLimit:RE,groupBySeries:q0,log:X0,map:Qa,mapLimit:ru,mapSeries:It,mapValues:z0,mapValuesLimit:AE,mapValuesSeries:j0,memoize:K0,nextTick:J0,parallel:Q0,parallelLimit:Z0,priorityQueue:tL,queue:jA,race:nL,reduce:Fs,reduceRight:gE,reflect:IE,reflectAll:rL,reject:iL,rejectLimit:sL,rejectSeries:oL,retry:_E,retryable:cL,seq:qA,series:uL,setImmediate:c,some:NE,someLimit:OE,someSeries:CE,sortBy:dL,timeout:fL,times:EL,timesLimit:bE,timesSeries:hL,transform:pL,tryEach:TL,unmemoize:SL,until:RL,waterfall:AL,whilst:au,all:dE,allLimit:fE,allSeries:EE,any:NE,anyLimit:OE,anySeries:CE,find:aE,findLimit:lE,findSeries:cE,flatMap:sE,flatMapLimit:el,flatMapSeries:oE,forEach:uE,forEachSeries:ou,forEachLimit:su,forEachOf:Ht,forEachOfSeries:Se,forEachOfLimit:K,inject:Fs,foldl:Fs,foldr:gE,select:pE,selectLimit:TE,selectSeries:SE,wrapSync:u,during:au,doDuring:iu};t.all=dE,t.allLimit=fE,t.allSeries=EE,t.any=NE,t.anyLimit=OE,t.anySeries=CE,t.apply=e,t.applyEach=z,t.applyEachSeries=ar,t.asyncify=u,t.auto=nE,t.autoInject=v0,t.cargo=U0,t.cargoQueue=B0,t.compose=F0,t.concat=sE,t.concatLimit=el,t.concatSeries=oE,t.constant=H0,t.default=iQ,t.detect=aE,t.detectLimit=lE,t.detectSeries=cE,t.dir=$0,t.doDuring=iu,t.doUntil=k0,t.doWhilst=iu,t.during=au,t.each=uE,t.eachLimit=su,t.eachOf=Ht,t.eachOfLimit=K,t.eachOfSeries=Se,t.eachSeries=ou,t.ensureAsync=XA,t.every=dE,t.everyLimit=fE,t.everySeries=EE,t.filter=pE,t.filterLimit=TE,t.filterSeries=SE,t.find=aE,t.findLimit=lE,t.findSeries=cE,t.flatMap=sE,t.flatMapLimit=el,t.flatMapSeries=oE,t.foldl=Fs,t.foldr=gE,t.forEach=uE,t.forEachLimit=su,t.forEachOf=Ht,t.forEachOfLimit=K,t.forEachOfSeries=Se,t.forEachSeries=ou,t.forever=Y0,t.groupBy=V0,t.groupByLimit=RE,t.groupBySeries=q0,t.inject=Fs,t.log=X0,t.map=Qa,t.mapLimit=ru,t.mapSeries=It,t.mapValues=z0,t.mapValuesLimit=AE,t.mapValuesSeries=j0,t.memoize=K0,t.nextTick=J0,t.parallel=Q0,t.parallelLimit=Z0,t.priorityQueue=tL,t.queue=jA,t.race=nL,t.reduce=Fs,t.reduceRight=gE,t.reflect=IE,t.reflectAll=rL,t.reject=iL,t.rejectLimit=sL,t.rejectSeries=oL,t.retry=_E,t.retryable=cL,t.select=pE,t.selectLimit=TE,t.selectSeries=SE,t.seq=qA,t.series=uL,t.setImmediate=c,t.some=NE,t.someLimit=OE,t.someSeries=CE,t.sortBy=dL,t.timeout=fL,t.times=EL,t.timesLimit=bE,t.timesSeries=hL,t.transform=pL,t.tryEach=TL,t.unmemoize=SL,t.until=RL,t.waterfall=AL,t.whilst=au,t.wrapSync=u,Object.defineProperty(t,"__esModule",{value:!0})}))});var PP=C((sUe,DP)=>{var Vs=require("constants"),D9=process.cwd,gh=null,P9=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return gh||(gh=D9.call(process)),gh};try{process.cwd()}catch{}typeof process.chdir=="function"&&(Tg=process.chdir,process.chdir=function(t){gh=null,Tg.call(process,t)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,Tg));var Tg;DP.exports=x9;function x9(t){Vs.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&e(t),t.lutimes||n(t),t.chown=s(t.chown),t.fchown=s(t.fchown),t.lchown=s(t.lchown),t.chmod=r(t.chmod),t.fchmod=r(t.fchmod),t.lchmod=r(t.lchmod),t.chownSync=o(t.chownSync),t.fchownSync=o(t.fchownSync),t.lchownSync=o(t.lchownSync),t.chmodSync=i(t.chmodSync),t.fchmodSync=i(t.fchmodSync),t.lchmodSync=i(t.lchmodSync),t.stat=a(t.stat),t.fstat=a(t.fstat),t.lstat=a(t.lstat),t.statSync=l(t.statSync),t.fstatSync=l(t.fstatSync),t.lstatSync=l(t.lstatSync),t.chmod&&!t.lchmod&&(t.lchmod=function(u,d,E){E&&process.nextTick(E)},t.lchmodSync=function(){}),t.chown&&!t.lchown&&(t.lchown=function(u,d,E,f){f&&process.nextTick(f)},t.lchownSync=function(){}),P9==="win32"&&(t.rename=typeof t.rename!="function"?t.rename:(function(u){function d(E,f,p){var h=Date.now(),T=0;u(E,f,function S(A){if(A&&(A.code==="EACCES"||A.code==="EPERM"||A.code==="EBUSY")&&Date.now()-h<6e4){setTimeout(function(){t.stat(f,function(R,m){R&&R.code==="ENOENT"?u(E,f,S):p(A)})},T),T<100&&(T+=10);return}p&&p(A)})}return Object.setPrototypeOf&&Object.setPrototypeOf(d,u),d})(t.rename)),t.read=typeof t.read!="function"?t.read:(function(u){function d(E,f,p,h,T,S){var A;if(S&&typeof S=="function"){var R=0;A=function(m,N,L){if(m&&m.code==="EAGAIN"&&R<10)return R++,u.call(t,E,f,p,h,T,A);S.apply(this,arguments)}}return u.call(t,E,f,p,h,T,A)}return Object.setPrototypeOf&&Object.setPrototypeOf(d,u),d})(t.read),t.readSync=typeof t.readSync!="function"?t.readSync:(function(u){return function(d,E,f,p,h){for(var T=0;;)try{return u.call(t,d,E,f,p,h)}catch(S){if(S.code==="EAGAIN"&&T<10){T++;continue}throw S}}})(t.readSync);function e(u){u.lchmod=function(d,E,f){u.open(d,Vs.O_WRONLY|Vs.O_SYMLINK,E,function(p,h){if(p){f&&f(p);return}u.fchmod(h,E,function(T){u.close(h,function(S){f&&f(T||S)})})})},u.lchmodSync=function(d,E){var f=u.openSync(d,Vs.O_WRONLY|Vs.O_SYMLINK,E),p=!0,h;try{h=u.fchmodSync(f,E),p=!1}finally{if(p)try{u.closeSync(f)}catch{}else u.closeSync(f)}return h}}function n(u){Vs.hasOwnProperty("O_SYMLINK")&&u.futimes?(u.lutimes=function(d,E,f,p){u.open(d,Vs.O_SYMLINK,function(h,T){if(h){p&&p(h);return}u.futimes(T,E,f,function(S){u.close(T,function(A){p&&p(S||A)})})})},u.lutimesSync=function(d,E,f){var p=u.openSync(d,Vs.O_SYMLINK),h,T=!0;try{h=u.futimesSync(p,E,f),T=!1}finally{if(T)try{u.closeSync(p)}catch{}else u.closeSync(p)}return h}):u.futimes&&(u.lutimes=function(d,E,f,p){p&&process.nextTick(p)},u.lutimesSync=function(){})}function r(u){return u&&function(d,E,f){return u.call(t,d,E,function(p){c(p)&&(p=null),f&&f.apply(this,arguments)})}}function i(u){return u&&function(d,E){try{return u.call(t,d,E)}catch(f){if(!c(f))throw f}}}function s(u){return u&&function(d,E,f,p){return u.call(t,d,E,f,function(h){c(h)&&(h=null),p&&p.apply(this,arguments)})}}function o(u){return u&&function(d,E,f){try{return u.call(t,d,E,f)}catch(p){if(!c(p))throw p}}}function a(u){return u&&function(d,E,f){typeof E=="function"&&(f=E,E=null);function p(h,T){T&&(T.uid<0&&(T.uid+=4294967296),T.gid<0&&(T.gid+=4294967296)),f&&f.apply(this,arguments)}return E?u.call(t,d,E,p):u.call(t,d,p)}}function l(u){return u&&function(d,E){var f=E?u.call(t,d,E):u.call(t,d);return f&&(f.uid<0&&(f.uid+=4294967296),f.gid<0&&(f.gid+=4294967296)),f}}function c(u){if(!u||u.code==="ENOSYS")return!0;var d=!process.getuid||process.getuid()!==0;return!!(d&&(u.code==="EINVAL"||u.code==="EPERM"))}}});var MP=C((oUe,vP)=>{var xP=require("stream").Stream;vP.exports=v9;function v9(t){return{ReadStream:e,WriteStream:n};function e(r,i){if(!(this instanceof e))return new e(r,i);xP.call(this);var s=this;this.path=r,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,i=i||{};for(var o=Object.keys(i),a=0,l=o.length;a<l;a++){var c=o[a];this[c]=i[c]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){s._read()});return}t.open(this.path,this.flags,this.mode,function(u,d){if(u){s.emit("error",u),s.readable=!1;return}s.fd=d,s.emit("open",d),s._read()})}function n(r,i){if(!(this instanceof n))return new n(r,i);xP.call(this),this.path=r,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,i=i||{};for(var s=Object.keys(i),o=0,a=s.length;o<a;o++){var l=s[o];this[l]=i[l]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=t.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}});var BP=C((aUe,UP)=>{"use strict";UP.exports=U9;var M9=Object.getPrototypeOf||function(t){return t.__proto__};function U9(t){if(t===null||typeof t!="object")return t;if(t instanceof Object)var e={__proto__:M9(t)};else var e=Object.create(null);return Object.getOwnPropertyNames(t).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}});var mg=C((lUe,Ag)=>{var _t=require("fs"),B9=PP(),F9=MP(),H9=BP(),Ih=require("util"),yn,Nh;typeof Symbol=="function"&&typeof Symbol.for=="function"?(yn=Symbol.for("graceful-fs.queue"),Nh=Symbol.for("graceful-fs.previous")):(yn="___graceful-fs.queue",Nh="___graceful-fs.previous");function G9(){}function GP(t,e){Object.defineProperty(t,yn,{get:function(){return e}})}var Ho=G9;Ih.debuglog?Ho=Ih.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(Ho=function(){var t=Ih.format.apply(Ih,arguments);t="GFS4: "+t.split(/\n/).join(`
GFS4: `),console.error(t)});_t[yn]||(FP=global[yn]||[],GP(_t,FP),_t.close=(function(t){function e(n,r){return t.call(_t,n,function(i){i||HP(),typeof r=="function"&&r.apply(this,arguments)})}return Object.defineProperty(e,Nh,{value:t}),e})(_t.close),_t.closeSync=(function(t){function e(n){t.apply(_t,arguments),HP()}return Object.defineProperty(e,Nh,{value:t}),e})(_t.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){Ho(_t[yn]),require("assert").equal(_t[yn].length,0)}));var FP;global[yn]||GP(global,_t[yn]);Ag.exports=Sg(H9(_t));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!_t.__patched&&(Ag.exports=Sg(_t),_t.__patched=!0);function Sg(t){B9(t),t.gracefulify=Sg,t.createReadStream=N,t.createWriteStream=L;var e=t.readFile;t.readFile=n;function n(g,w,x){return typeof w=="function"&&(x=w,w=null),U(g,w,x);function U(H,X,Q,K){return e(H,X,function(Z){Z&&(Z.code==="EMFILE"||Z.code==="ENFILE")?pl([U,[H,X,Q],Z,K||Date.now(),Date.now()]):typeof Q=="function"&&Q.apply(this,arguments)})}}var r=t.writeFile;t.writeFile=i;function i(g,w,x,U){return typeof x=="function"&&(U=x,x=null),H(g,w,x,U);function H(X,Q,K,Z,Oe){return r(X,Q,K,function(ae){ae&&(ae.code==="EMFILE"||ae.code==="ENFILE")?pl([H,[X,Q,K,Z],ae,Oe||Date.now(),Date.now()]):typeof Z=="function"&&Z.apply(this,arguments)})}}var s=t.appendFile;s&&(t.appendFile=o);function o(g,w,x,U){return typeof x=="function"&&(U=x,x=null),H(g,w,x,U);function H(X,Q,K,Z,Oe){return s(X,Q,K,function(ae){ae&&(ae.code==="EMFILE"||ae.code==="ENFILE")?pl([H,[X,Q,K,Z],ae,Oe||Date.now(),Date.now()]):typeof Z=="function"&&Z.apply(this,arguments)})}}var a=t.copyFile;a&&(t.copyFile=l);function l(g,w,x,U){return typeof x=="function"&&(U=x,x=0),H(g,w,x,U);function H(X,Q,K,Z,Oe){return a(X,Q,K,function(ae){ae&&(ae.code==="EMFILE"||ae.code==="ENFILE")?pl([H,[X,Q,K,Z],ae,Oe||Date.now(),Date.now()]):typeof Z=="function"&&Z.apply(this,arguments)})}}var c=t.readdir;t.readdir=d;var u=/^v[0-5]\./;function d(g,w,x){typeof w=="function"&&(x=w,w=null);var U=u.test(process.version)?function(Q,K,Z,Oe){return c(Q,H(Q,K,Z,Oe))}:function(Q,K,Z,Oe){return c(Q,K,H(Q,K,Z,Oe))};return U(g,w,x);function H(X,Q,K,Z){return function(Oe,ae){Oe&&(Oe.code==="EMFILE"||Oe.code==="ENFILE")?pl([U,[X,Q,K],Oe,Z||Date.now(),Date.now()]):(ae&&ae.sort&&ae.sort(),typeof K=="function"&&K.call(this,Oe,ae))}}}if(process.version.substr(0,4)==="v0.8"){var E=F9(t);S=E.ReadStream,R=E.WriteStream}var f=t.ReadStream;f&&(S.prototype=Object.create(f.prototype),S.prototype.open=A);var p=t.WriteStream;p&&(R.prototype=Object.create(p.prototype),R.prototype.open=m),Object.defineProperty(t,"ReadStream",{get:function(){return S},set:function(g){S=g},enumerable:!0,configurable:!0}),Object.defineProperty(t,"WriteStream",{get:function(){return R},set:function(g){R=g},enumerable:!0,configurable:!0});var h=S;Object.defineProperty(t,"FileReadStream",{get:function(){return h},set:function(g){h=g},enumerable:!0,configurable:!0});var T=R;Object.defineProperty(t,"FileWriteStream",{get:function(){return T},set:function(g){T=g},enumerable:!0,configurable:!0});function S(g,w){return this instanceof S?(f.apply(this,arguments),this):S.apply(Object.create(S.prototype),arguments)}function A(){var g=this;D(g.path,g.flags,g.mode,function(w,x){w?(g.autoClose&&g.destroy(),g.emit("error",w)):(g.fd=x,g.emit("open",x),g.read())})}function R(g,w){return this instanceof R?(p.apply(this,arguments),this):R.apply(Object.create(R.prototype),arguments)}function m(){var g=this;D(g.path,g.flags,g.mode,function(w,x){w?(g.destroy(),g.emit("error",w)):(g.fd=x,g.emit("open",x))})}function N(g,w){return new t.ReadStream(g,w)}function L(g,w){return new t.WriteStream(g,w)}var I=t.open;t.open=D;function D(g,w,x,U){return typeof x=="function"&&(U=x,x=null),H(g,w,x,U);function H(X,Q,K,Z,Oe){return I(X,Q,K,function(ae,Ht){ae&&(ae.code==="EMFILE"||ae.code==="ENFILE")?pl([H,[X,Q,K,Z],ae,Oe||Date.now(),Date.now()]):typeof Z=="function"&&Z.apply(this,arguments)})}}return t}function pl(t){Ho("ENQUEUE",t[0].name,t[1]),_t[yn].push(t),Rg()}var _h;function HP(){for(var t=Date.now(),e=0;e<_t[yn].length;++e)_t[yn][e].length>2&&(_t[yn][e][3]=t,_t[yn][e][4]=t);Rg()}function Rg(){if(clearTimeout(_h),_h=void 0,_t[yn].length!==0){var t=_t[yn].shift(),e=t[0],n=t[1],r=t[2],i=t[3],s=t[4];if(i===void 0)Ho("RETRY",e.name,n),e.apply(null,n);else if(Date.now()-i>=6e4){Ho("TIMEOUT",e.name,n);var o=n.pop();typeof o=="function"&&o.call(null,r)}else{var a=Date.now()-s,l=Math.max(s-i,1),c=Math.min(l*1.2,100);a>=c?(Ho("RETRY",e.name,n),e.apply(null,n.concat([i]))):_t[yn].push(t)}_h===void 0&&(_h=setTimeout(Rg,0))}}});var Oh=C((cUe,$P)=>{"use strict";var hi=t=>t!==null&&typeof t=="object"&&typeof t.pipe=="function";hi.writable=t=>hi(t)&&t.writable!==!1&&typeof t._write=="function"&&typeof t._writableState=="object";hi.readable=t=>hi(t)&&t.readable!==!1&&typeof t._read=="function"&&typeof t._readableState=="object";hi.duplex=t=>hi.writable(t)&&hi.readable(t);hi.transform=t=>hi.duplex(t)&&typeof t._transform=="function";$P.exports=hi});var Bu=C((uUe,gg)=>{"use strict";typeof process>"u"||!process.version||process.version.indexOf("v0.")===0||process.version.indexOf("v1.")===0&&process.version.indexOf("v1.8.")!==0?gg.exports={nextTick:$9}:gg.exports=process;function $9(t,e,n,r){if(typeof t!="function")throw new TypeError('"callback" argument must be a function');var i=arguments.length,s,o;switch(i){case 0:case 1:return process.nextTick(t);case 2:return process.nextTick(function(){t.call(null,e)});case 3:return process.nextTick(function(){t.call(null,e,n)});case 4:return process.nextTick(function(){t.call(null,e,n,r)});default:for(s=new Array(i-1),o=0;o<s.length;)s[o++]=arguments[o];return process.nextTick(function(){t.apply(null,s)})}}});var WP=C((dUe,kP)=>{var k9={}.toString;kP.exports=Array.isArray||function(t){return k9.call(t)=="[object Array]"}});var Ig=C((fUe,YP)=>{YP.exports=require("stream")});var Fu=C((_g,qP)=>{var Ch=require("buffer"),es=Ch.Buffer;function VP(t,e){for(var n in t)e[n]=t[n]}es.from&&es.alloc&&es.allocUnsafe&&es.allocUnsafeSlow?qP.exports=Ch:(VP(Ch,_g),_g.Buffer=Tl);function Tl(t,e,n){return es(t,e,n)}VP(es,Tl);Tl.from=function(t,e,n){if(typeof t=="number")throw new TypeError("Argument must not be a number");return es(t,e,n)};Tl.alloc=function(t,e,n){if(typeof t!="number")throw new TypeError("Argument must be a number");var r=es(t);return e!==void 0?typeof n=="string"?r.fill(e,n):r.fill(e):r.fill(0),r};Tl.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return es(t)};Tl.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Ch.SlowBuffer(t)}});var Sl=C($n=>{function W9(t){return Array.isArray?Array.isArray(t):bh(t)==="[object Array]"}$n.isArray=W9;function Y9(t){return typeof t=="boolean"}$n.isBoolean=Y9;function V9(t){return t===null}$n.isNull=V9;function q9(t){return t==null}$n.isNullOrUndefined=q9;function X9(t){return typeof t=="number"}$n.isNumber=X9;function z9(t){return typeof t=="string"}$n.isString=z9;function j9(t){return typeof t=="symbol"}$n.isSymbol=j9;function K9(t){return t===void 0}$n.isUndefined=K9;function J9(t){return bh(t)==="[object RegExp]"}$n.isRegExp=J9;function Q9(t){return typeof t=="object"&&t!==null}$n.isObject=Q9;function Z9(t){return bh(t)==="[object Date]"}$n.isDate=Z9;function e7(t){return bh(t)==="[object Error]"||t instanceof Error}$n.isError=e7;function t7(t){return typeof t=="function"}$n.isFunction=t7;function n7(t){return t===null||typeof t=="boolean"||typeof t=="number"||typeof t=="string"||typeof t=="symbol"||typeof t>"u"}$n.isPrimitive=n7;$n.isBuffer=require("buffer").Buffer.isBuffer;function bh(t){return Object.prototype.toString.call(t)}});var XP=C((hUe,Ng)=>{typeof Object.create=="function"?Ng.exports=function(e,n){n&&(e.super_=n,e.prototype=Object.create(n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:Ng.exports=function(e,n){if(n){e.super_=n;var r=function(){};r.prototype=n.prototype,e.prototype=new r,e.prototype.constructor=e}}});var Rl=C((pUe,Cg)=>{try{if(Og=require("util"),typeof Og.inherits!="function")throw"";Cg.exports=Og.inherits}catch{Cg.exports=XP()}var Og});var jP=C((TUe,bg)=>{"use strict";function r7(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var zP=Fu().Buffer,Hu=require("util");function i7(t,e,n){t.copy(e,n)}bg.exports=(function(){function t(){r7(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(n){var r={data:n,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length},t.prototype.unshift=function(n){var r={data:n,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length},t.prototype.shift=function(){if(this.length!==0){var n=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,n}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(n){if(this.length===0)return"";for(var r=this.head,i=""+r.data;r=r.next;)i+=n+r.data;return i},t.prototype.concat=function(n){if(this.length===0)return zP.alloc(0);for(var r=zP.allocUnsafe(n>>>0),i=this.head,s=0;i;)i7(i.data,r,s),s+=i.data.length,i=i.next;return r},t})();Hu&&Hu.inspect&&Hu.inspect.custom&&(bg.exports.prototype[Hu.inspect.custom]=function(){var t=Hu.inspect({length:this.length});return this.constructor.name+" "+t})});var yg=C((SUe,KP)=>{"use strict";var yh=Bu();function s7(t,e){var n=this,r=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return r||i?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,yh.nextTick(wh,this,t)):yh.nextTick(wh,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(s){!e&&s?n._writableState?n._writableState.errorEmitted||(n._writableState.errorEmitted=!0,yh.nextTick(wh,n,s)):yh.nextTick(wh,n,s):e&&e(s)}),this)}function o7(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function wh(t,e){t.emit("error",e)}KP.exports={destroy:s7,undestroy:o7}});var QP=C((RUe,JP)=>{JP.exports=require("util").deprecate});var Lg=C((AUe,ox)=>{"use strict";var Go=Bu();ox.exports=jt;function ex(t){var e=this;this.next=null,this.entry=null,this.finish=function(){N7(e,t)}}var a7=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:Go.nextTick,Al;jt.WritableState=$u;var tx=Object.create(Sl());tx.inherits=Rl();var l7={deprecate:QP()},nx=Ig(),Dh=Fu().Buffer,c7=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function u7(t){return Dh.from(t)}function d7(t){return Dh.isBuffer(t)||t instanceof c7}var rx=yg();tx.inherits(jt,nx);function f7(){}function $u(t,e){Al=Al||$o(),t=t||{};var n=e instanceof Al;this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var r=t.highWaterMark,i=t.writableHighWaterMark,s=this.objectMode?16:16*1024;r||r===0?this.highWaterMark=r:n&&(i||i===0)?this.highWaterMark=i:this.highWaterMark=s,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var o=t.decodeStrings===!1;this.decodeStrings=!o,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(a){A7(e,a)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new ex(this)}$u.prototype.getBuffer=function(){for(var e=this.bufferedRequest,n=[];e;)n.push(e),e=e.next;return n};(function(){try{Object.defineProperty($u.prototype,"buffer",{get:l7.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var Lh;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(Lh=Function.prototype[Symbol.hasInstance],Object.defineProperty(jt,Symbol.hasInstance,{value:function(t){return Lh.call(this,t)?!0:this!==jt?!1:t&&t._writableState instanceof $u}})):Lh=function(t){return t instanceof this};function jt(t){if(Al=Al||$o(),!Lh.call(jt,this)&&!(this instanceof Al))return new jt(t);this._writableState=new $u(t,this),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),nx.call(this)}jt.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function E7(t,e){var n=new Error("write after end");t.emit("error",n),Go.nextTick(e,n)}function h7(t,e,n,r){var i=!0,s=!1;return n===null?s=new TypeError("May not write null values to stream"):typeof n!="string"&&n!==void 0&&!e.objectMode&&(s=new TypeError("Invalid non-string/buffer chunk")),s&&(t.emit("error",s),Go.nextTick(r,s),i=!1),i}jt.prototype.write=function(t,e,n){var r=this._writableState,i=!1,s=!r.objectMode&&d7(t);return s&&!Dh.isBuffer(t)&&(t=u7(t)),typeof e=="function"&&(n=e,e=null),s?e="buffer":e||(e=r.defaultEncoding),typeof n!="function"&&(n=f7),r.ended?E7(this,n):(s||h7(this,r,t,n))&&(r.pendingcb++,i=T7(this,r,s,t,e,n)),i};jt.prototype.cork=function(){var t=this._writableState;t.corked++};jt.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&ix(this,t))};jt.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this};function p7(t,e,n){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=Dh.from(e,n)),e}Object.defineProperty(jt.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function T7(t,e,n,r,i,s){if(!n){var o=p7(e,r,i);r!==o&&(n=!0,i="buffer",r=o)}var a=e.objectMode?1:r.length;e.length+=a;var l=e.length<e.highWaterMark;if(l||(e.needDrain=!0),e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:s,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else wg(t,e,!1,a,r,i,s);return l}function wg(t,e,n,r,i,s,o){e.writelen=r,e.writecb=o,e.writing=!0,e.sync=!0,n?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function S7(t,e,n,r,i){--e.pendingcb,n?(Go.nextTick(i,r),Go.nextTick(Gu,t,e),t._writableState.errorEmitted=!0,t.emit("error",r)):(i(r),t._writableState.errorEmitted=!0,t.emit("error",r),Gu(t,e))}function R7(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function A7(t,e){var n=t._writableState,r=n.sync,i=n.writecb;if(R7(n),e)S7(t,n,r,e,i);else{var s=sx(n);!s&&!n.corked&&!n.bufferProcessing&&n.bufferedRequest&&ix(t,n),r?a7(ZP,t,n,s,i):ZP(t,n,s,i)}}function ZP(t,e,n,r){n||m7(t,e),e.pendingcb--,r(),Gu(t,e)}function m7(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function ix(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var r=e.bufferedRequestCount,i=new Array(r),s=e.corkedRequestsFree;s.entry=n;for(var o=0,a=!0;n;)i[o]=n,n.isBuf||(a=!1),n=n.next,o+=1;i.allBuffers=a,wg(t,e,!0,e.length,i,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new ex(e),e.bufferedRequestCount=0}else{for(;n;){var l=n.chunk,c=n.encoding,u=n.callback,d=e.objectMode?1:l.length;if(wg(t,e,!1,d,l,c,u),n=n.next,e.bufferedRequestCount--,e.writing)break}n===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=n,e.bufferProcessing=!1}jt.prototype._write=function(t,e,n){n(new Error("_write() is not implemented"))};jt.prototype._writev=null;jt.prototype.end=function(t,e,n){var r=this._writableState;typeof t=="function"?(n=t,t=null,e=null):typeof e=="function"&&(n=e,e=null),t!=null&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||_7(this,r,n)};function sx(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function g7(t,e){t._final(function(n){e.pendingcb--,n&&t.emit("error",n),e.prefinished=!0,t.emit("prefinish"),Gu(t,e)})}function I7(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"?(e.pendingcb++,e.finalCalled=!0,Go.nextTick(g7,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function Gu(t,e){var n=sx(e);return n&&(I7(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"))),n}function _7(t,e,n){e.ending=!0,Gu(t,e),n&&(e.finished?Go.nextTick(n):t.once("finish",n)),e.ended=!0,t.writable=!1}function N7(t,e,n){var r=t.entry;for(t.entry=null;r;){var i=r.callback;e.pendingcb--,i(n),r=r.next}e.corkedRequestsFree.next=t}Object.defineProperty(jt.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}});jt.prototype.destroy=rx.destroy;jt.prototype._undestroy=rx.undestroy;jt.prototype._destroy=function(t,e){this.end(),e(t)}});var $o=C((mUe,ux)=>{"use strict";var ax=Bu(),O7=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};ux.exports=ts;var lx=Object.create(Sl());lx.inherits=Rl();var cx=xg(),Pg=Lg();lx.inherits(ts,cx);for(Dg=O7(Pg.prototype),Ph=0;Ph<Dg.length;Ph++)xh=Dg[Ph],ts.prototype[xh]||(ts.prototype[xh]=Pg.prototype[xh]);var Dg,xh,Ph;function ts(t){if(!(this instanceof ts))return new ts(t);cx.call(this,t),Pg.call(this,t),t&&t.readable===!1&&(this.readable=!1),t&&t.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,t&&t.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",C7)}Object.defineProperty(ts.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function C7(){this.allowHalfOpen||this._writableState.ended||ax.nextTick(b7,this)}function b7(t){t.end()}Object.defineProperty(ts.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(t){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=t,this._writableState.destroyed=t)}});ts.prototype._destroy=function(t,e){this.push(null),this.end(),ax.nextTick(e,t)}});var Ug=C(fx=>{"use strict";var Mg=Fu().Buffer,dx=Mg.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function y7(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function w7(t){var e=y7(t);if(typeof e!="string"&&(Mg.isEncoding===dx||!dx(t)))throw new Error("Unknown encoding: "+t);return e||t}fx.StringDecoder=ku;function ku(t){this.encoding=w7(t);var e;switch(this.encoding){case"utf16le":this.text=M7,this.end=U7,e=4;break;case"utf8":this.fillLast=P7,e=4;break;case"base64":this.text=B7,this.end=F7,e=3;break;default:this.write=H7,this.end=G7;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Mg.allocUnsafe(e)}ku.prototype.write=function(t){if(t.length===0)return"";var e,n;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""};ku.prototype.end=v7;ku.prototype.text=x7;ku.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function vg(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function L7(t,e,n){var r=e.length-1;if(r<n)return 0;var i=vg(e[r]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--r<n||i===-2?0:(i=vg(e[r]),i>=0?(i>0&&(t.lastNeed=i-2),i):--r<n||i===-2?0:(i=vg(e[r]),i>=0?(i>0&&(i===2?i=0:t.lastNeed=i-3),i):0))}function D7(t,e,n){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function P7(t){var e=this.lastTotal-this.lastNeed,n=D7(this,t,e);if(n!==void 0)return n;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function x7(t,e){var n=L7(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var r=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)}function v7(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function M7(t,e){if((t.length-e)%2===0){var n=t.toString("utf16le",e);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function U7(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function B7(t,e){var n=(t.length-e)%3;return n===0?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,n===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function F7(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function H7(t){return t.toString(this.encoding)}function G7(t){return t&&t.length?this.write(t):""}});var xg=C((_Ue,Nx)=>{"use strict";var gl=Bu();Nx.exports=ct;var $7=WP(),Wu;ct.ReadableState=Ax;var IUe=require("events").EventEmitter,Tx=function(t,e){return t.listeners(e).length},$g=Ig(),Yu=Fu().Buffer,k7=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function W7(t){return Yu.from(t)}function Y7(t){return Yu.isBuffer(t)||t instanceof k7}var Sx=Object.create(Sl());Sx.inherits=Rl();var Bg=require("util"),tt=void 0;Bg&&Bg.debuglog?tt=Bg.debuglog("stream"):tt=function(){};var V7=jP(),Rx=yg(),ml;Sx.inherits(ct,$g);var Fg=["error","close","destroy","pause","resume"];function q7(t,e,n){if(typeof t.prependListener=="function")return t.prependListener(e,n);!t._events||!t._events[e]?t.on(e,n):$7(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]}function Ax(t,e){Wu=Wu||$o(),t=t||{};var n=e instanceof Wu;this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var r=t.highWaterMark,i=t.readableHighWaterMark,s=this.objectMode?16:16*1024;r||r===0?this.highWaterMark=r:n&&(i||i===0)?this.highWaterMark=i:this.highWaterMark=s,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new V7,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(ml||(ml=Ug().StringDecoder),this.decoder=new ml(t.encoding),this.encoding=t.encoding)}function ct(t){if(Wu=Wu||$o(),!(this instanceof ct))return new ct(t);this._readableState=new Ax(t,this),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),$g.call(this)}Object.defineProperty(ct.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}});ct.prototype.destroy=Rx.destroy;ct.prototype._undestroy=Rx.undestroy;ct.prototype._destroy=function(t,e){this.push(null),e(t)};ct.prototype.push=function(t,e){var n=this._readableState,r;return n.objectMode?r=!0:typeof t=="string"&&(e=e||n.defaultEncoding,e!==n.encoding&&(t=Yu.from(t,e),e=""),r=!0),mx(this,t,e,!1,r)};ct.prototype.unshift=function(t){return mx(this,t,null,!0,!1)};function mx(t,e,n,r,i){var s=t._readableState;if(e===null)s.reading=!1,K7(t,s);else{var o;i||(o=X7(s,e)),o?t.emit("error",o):s.objectMode||e&&e.length>0?(typeof e!="string"&&!s.objectMode&&Object.getPrototypeOf(e)!==Yu.prototype&&(e=W7(e)),r?s.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):Hg(t,s,e,!0):s.ended?t.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!n?(e=s.decoder.write(e),s.objectMode||e.length!==0?Hg(t,s,e,!1):gx(t,s)):Hg(t,s,e,!1))):r||(s.reading=!1)}return z7(s)}function Hg(t,e,n,r){e.flowing&&e.length===0&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&vh(t)),gx(t,e)}function X7(t,e){var n;return!Y7(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(n=new TypeError("Invalid non-string/buffer chunk")),n}function z7(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||t.length===0)}ct.prototype.isPaused=function(){return this._readableState.flowing===!1};ct.prototype.setEncoding=function(t){return ml||(ml=Ug().StringDecoder),this._readableState.decoder=new ml(t),this._readableState.encoding=t,this};var Ex=8388608;function j7(t){return t>=Ex?t=Ex:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function hx(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=j7(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}ct.prototype.read=function(t){tt("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return tt("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?Gg(this):vh(this),null;if(t=hx(t,e),t===0&&e.ended)return e.length===0&&Gg(this),null;var r=e.needReadable;tt("need readable",r),(e.length===0||e.length-t<e.highWaterMark)&&(r=!0,tt("length less than watermark",r)),e.ended||e.reading?(r=!1,tt("reading or ended",r)):r&&(tt("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=hx(n,e)));var i;return t>0?i=Ix(t,e):i=null,i===null?(e.needReadable=!0,t=0):e.length-=t,e.length===0&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&Gg(this)),i!==null&&this.emit("data",i),i};function K7(t,e){if(!e.ended){if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,vh(t)}}function vh(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(tt("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?gl.nextTick(px,t):px(t))}function px(t){tt("emit readable"),t.emit("readable"),kg(t)}function gx(t,e){e.readingMore||(e.readingMore=!0,gl.nextTick(J7,t,e))}function J7(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(tt("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}ct.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))};ct.prototype.pipe=function(t,e){var n=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=t;break;case 1:r.pipes=[r.pipes,t];break;default:r.pipes.push(t);break}r.pipesCount+=1,tt("pipe count=%d opts=%j",r.pipesCount,e);var i=(!e||e.end!==!1)&&t!==process.stdout&&t!==process.stderr,s=i?a:T;r.endEmitted?gl.nextTick(s):n.once("end",s),t.on("unpipe",o);function o(S,A){tt("onunpipe"),S===n&&A&&A.hasUnpiped===!1&&(A.hasUnpiped=!0,u())}function a(){tt("onend"),t.end()}var l=Q7(n);t.on("drain",l);var c=!1;function u(){tt("cleanup"),t.removeListener("close",p),t.removeListener("finish",h),t.removeListener("drain",l),t.removeListener("error",f),t.removeListener("unpipe",o),n.removeListener("end",a),n.removeListener("end",T),n.removeListener("data",E),c=!0,r.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&l()}var d=!1;n.on("data",E);function E(S){tt("ondata"),d=!1;var A=t.write(S);A===!1&&!d&&((r.pipesCount===1&&r.pipes===t||r.pipesCount>1&&_x(r.pipes,t)!==-1)&&!c&&(tt("false write response, pause",r.awaitDrain),r.awaitDrain++,d=!0),n.pause())}function f(S){tt("onerror",S),T(),t.removeListener("error",f),Tx(t,"error")===0&&t.emit("error",S)}q7(t,"error",f);function p(){t.removeListener("finish",h),T()}t.once("close",p);function h(){tt("onfinish"),t.removeListener("close",p),T()}t.once("finish",h);function T(){tt("unpipe"),n.unpipe(t)}return t.emit("pipe",n),r.flowing||(tt("pipe resume"),n.resume()),t};function Q7(t){return function(){var e=t._readableState;tt("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,e.awaitDrain===0&&Tx(t,"data")&&(e.flowing=!0,kg(t))}}ct.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n),this);if(!t){var r=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var s=0;s<i;s++)r[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=_x(e.pipes,t);return o===-1?this:(e.pipes.splice(o,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n),this)};ct.prototype.on=function(t,e){var n=$g.prototype.on.call(this,t,e);if(t==="data")this._readableState.flowing!==!1&&this.resume();else if(t==="readable"){var r=this._readableState;!r.endEmitted&&!r.readableListening&&(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&vh(this):gl.nextTick(Z7,this))}return n};ct.prototype.addListener=ct.prototype.on;function Z7(t){tt("readable nexttick read 0"),t.read(0)}ct.prototype.resume=function(){var t=this._readableState;return t.flowing||(tt("resume"),t.flowing=!0,eZ(this,t)),this};function eZ(t,e){e.resumeScheduled||(e.resumeScheduled=!0,gl.nextTick(tZ,t,e))}function tZ(t,e){e.reading||(tt("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),kg(t),e.flowing&&!e.reading&&t.read(0)}ct.prototype.pause=function(){return tt("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(tt("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function kg(t){var e=t._readableState;for(tt("flow",e.flowing);e.flowing&&t.read()!==null;);}ct.prototype.wrap=function(t){var e=this,n=this._readableState,r=!1;t.on("end",function(){if(tt("wrapped end"),n.decoder&&!n.ended){var o=n.decoder.end();o&&o.length&&e.push(o)}e.push(null)}),t.on("data",function(o){if(tt("wrapped data"),n.decoder&&(o=n.decoder.write(o)),!(n.objectMode&&o==null)&&!(!n.objectMode&&(!o||!o.length))){var a=e.push(o);a||(r=!0,t.pause())}});for(var i in t)this[i]===void 0&&typeof t[i]=="function"&&(this[i]=(function(o){return function(){return t[o].apply(t,arguments)}})(i));for(var s=0;s<Fg.length;s++)t.on(Fg[s],this.emit.bind(this,Fg[s]));return this._read=function(o){tt("wrapped _read",o),r&&(r=!1,t.resume())},this};Object.defineProperty(ct.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});ct._fromList=Ix;function Ix(t,e){if(e.length===0)return null;var n;return e.objectMode?n=e.buffer.shift():!t||t>=e.length?(e.decoder?n=e.buffer.join(""):e.buffer.length===1?n=e.buffer.head.data:n=e.buffer.concat(e.length),e.buffer.clear()):n=nZ(t,e.buffer,e.decoder),n}function nZ(t,e,n){var r;return t<e.head.data.length?(r=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):t===e.head.data.length?r=e.shift():r=n?rZ(t,e):iZ(t,e),r}function rZ(t,e){var n=e.head,r=1,i=n.data;for(t-=i.length;n=n.next;){var s=n.data,o=t>s.length?s.length:t;if(o===s.length?i+=s:i+=s.slice(0,t),t-=o,t===0){o===s.length?(++r,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=s.slice(o));break}++r}return e.length-=r,i}function iZ(t,e){var n=Yu.allocUnsafe(t),r=e.head,i=1;for(r.data.copy(n),t-=r.data.length;r=r.next;){var s=r.data,o=t>s.length?s.length:t;if(s.copy(n,n.length-t,0,o),t-=o,t===0){o===s.length?(++i,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=s.slice(o));break}++i}return e.length-=i,n}function Gg(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,gl.nextTick(sZ,e,t))}function sZ(t,e){!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function _x(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}});var Wg=C((NUe,bx)=>{"use strict";bx.exports=ns;var Mh=$o(),Cx=Object.create(Sl());Cx.inherits=Rl();Cx.inherits(ns,Mh);function oZ(t,e){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,e!=null&&this.push(e),r(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function ns(t){if(!(this instanceof ns))return new ns(t);Mh.call(this,t),this._transformState={afterTransform:oZ.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",aZ)}function aZ(){var t=this;typeof this._flush=="function"?this._flush(function(e,n){Ox(t,e,n)}):Ox(this,null,null)}ns.prototype.push=function(t,e){return this._transformState.needTransform=!1,Mh.prototype.push.call(this,t,e)};ns.prototype._transform=function(t,e,n){throw new Error("_transform() is not implemented")};ns.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};ns.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};ns.prototype._destroy=function(t,e){var n=this;Mh.prototype._destroy.call(this,t,function(r){e(r),n.emit("close")})};function Ox(t,e,n){if(e)return t.emit("error",e);if(n!=null&&t.push(n),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}});var Dx=C((OUe,Lx)=>{"use strict";Lx.exports=Vu;var yx=Wg(),wx=Object.create(Sl());wx.inherits=Rl();wx.inherits(Vu,yx);function Vu(t){if(!(this instanceof Vu))return new Vu(t);yx.call(this,t)}Vu.prototype._transform=function(t,e,n){n(null,t)}});var Px=C((wn,Uh)=>{var pi=require("stream");process.env.READABLE_STREAM==="disable"&&pi?(Uh.exports=pi,wn=Uh.exports=pi.Readable,wn.Readable=pi.Readable,wn.Writable=pi.Writable,wn.Duplex=pi.Duplex,wn.Transform=pi.Transform,wn.PassThrough=pi.PassThrough,wn.Stream=pi):(wn=Uh.exports=xg(),wn.Stream=pi||wn,wn.Readable=wn,wn.Writable=Lg(),wn.Duplex=$o(),wn.Transform=Wg(),wn.PassThrough=Dx())});var vx=C((CUe,xx)=>{xx.exports=Px().PassThrough});var Fx=C((bUe,Bx)=>{var Mx=require("util"),Hh=vx();Bx.exports={Readable:Bh,Writable:Fh};Mx.inherits(Bh,Hh);Mx.inherits(Fh,Hh);function Ux(t,e,n){t[e]=function(){return delete t[e],n.apply(this,arguments),this[e].apply(this,arguments)}}function Bh(t,e){if(!(this instanceof Bh))return new Bh(t,e);Hh.call(this,e),Ux(this,"_read",function(){var n=t.call(this,e),r=this.emit.bind(this,"error");n.on("error",r),n.pipe(this)}),this.emit("readable")}function Fh(t,e){if(!(this instanceof Fh))return new Fh(t,e);Hh.call(this,e),Ux(this,"_write",function(){var n=t.call(this,e),r=this.emit.bind(this,"error");n.on("error",r),this.pipe(n)}),this.emit("writable")}});var Yg=C((yUe,Hx)=>{Hx.exports=function(t,e){if(typeof t!="string")throw new TypeError("expected path to be a string");if(t==="\\"||t==="/")return"/";var n=t.length;if(n<=1)return t;var r="";if(n>4&&t[3]==="\\"){var i=t[2];(i==="?"||i===".")&&t.slice(0,2)==="\\\\"&&(t=t.slice(2),r="//")}var s=t.split(/[/\\]+/);return e!==!1&&s[s.length-1]===""&&s.pop(),r+s.join("/")}});var Vg=C((wUe,Gx)=>{function lZ(t){return t}Gx.exports=lZ});var kx=C((LUe,$x)=>{function cZ(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}$x.exports=cZ});var Vx=C((DUe,Yx)=>{var uZ=kx(),Wx=Math.max;function dZ(t,e,n){return e=Wx(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,s=Wx(r.length-e,0),o=Array(s);++i<s;)o[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=n(o),uZ(t,this,a)}}Yx.exports=dZ});var Xx=C((PUe,qx)=>{function fZ(t){return function(){return t}}qx.exports=fZ});var qg=C((xUe,zx)=>{var EZ=typeof global=="object"&&global&&global.Object===Object&&global;zx.exports=EZ});var Il=C((vUe,jx)=>{var hZ=qg(),pZ=typeof self=="object"&&self&&self.Object===Object&&self,TZ=hZ||pZ||Function("return this")();jx.exports=TZ});var Gh=C((MUe,Kx)=>{var SZ=Il(),RZ=SZ.Symbol;Kx.exports=RZ});var ev=C((UUe,Zx)=>{var Jx=Gh(),Qx=Object.prototype,AZ=Qx.hasOwnProperty,mZ=Qx.toString,qu=Jx?Jx.toStringTag:void 0;function gZ(t){var e=AZ.call(t,qu),n=t[qu];try{t[qu]=void 0;var r=!0}catch{}var i=mZ.call(t);return r&&(e?t[qu]=n:delete t[qu]),i}Zx.exports=gZ});var nv=C((BUe,tv)=>{var IZ=Object.prototype,_Z=IZ.toString;function NZ(t){return _Z.call(t)}tv.exports=NZ});var Xu=C((FUe,sv)=>{var rv=Gh(),OZ=ev(),CZ=nv(),bZ="[object Null]",yZ="[object Undefined]",iv=rv?rv.toStringTag:void 0;function wZ(t){return t==null?t===void 0?yZ:bZ:iv&&iv in Object(t)?OZ(t):CZ(t)}sv.exports=wZ});var zu=C((HUe,ov)=>{function LZ(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}ov.exports=LZ});var Xg=C((GUe,av)=>{var DZ=Xu(),PZ=zu(),xZ="[object AsyncFunction]",vZ="[object Function]",MZ="[object GeneratorFunction]",UZ="[object Proxy]";function BZ(t){if(!PZ(t))return!1;var e=DZ(t);return e==vZ||e==MZ||e==xZ||e==UZ}av.exports=BZ});var cv=C(($Ue,lv)=>{var FZ=Il(),HZ=FZ["__core-js_shared__"];lv.exports=HZ});var fv=C((kUe,dv)=>{var zg=cv(),uv=(function(){var t=/[^.]+$/.exec(zg&&zg.keys&&zg.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""})();function GZ(t){return!!uv&&uv in t}dv.exports=GZ});var hv=C((WUe,Ev)=>{var $Z=Function.prototype,kZ=$Z.toString;function WZ(t){if(t!=null){try{return kZ.call(t)}catch{}try{return t+""}catch{}}return""}Ev.exports=WZ});var Tv=C((YUe,pv)=>{var YZ=Xg(),VZ=fv(),qZ=zu(),XZ=hv(),zZ=/[\\^$.*+?()[\]{}|]/g,jZ=/^\[object .+?Constructor\]$/,KZ=Function.prototype,JZ=Object.prototype,QZ=KZ.toString,ZZ=JZ.hasOwnProperty,eee=RegExp("^"+QZ.call(ZZ).replace(zZ,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function tee(t){if(!qZ(t)||VZ(t))return!1;var e=YZ(t)?eee:jZ;return e.test(XZ(t))}pv.exports=tee});var Rv=C((VUe,Sv)=>{function nee(t,e){return t?.[e]}Sv.exports=nee});var ju=C((qUe,Av)=>{var ree=Tv(),iee=Rv();function see(t,e){var n=iee(t,e);return ree(n)?n:void 0}Av.exports=see});var gv=C((XUe,mv)=>{var oee=ju(),aee=(function(){try{var t=oee(Object,"defineProperty");return t({},"",{}),t}catch{}})();mv.exports=aee});var Nv=C((zUe,_v)=>{var lee=Xx(),Iv=gv(),cee=Vg(),uee=Iv?function(t,e){return Iv(t,"toString",{configurable:!0,enumerable:!1,value:lee(e),writable:!0})}:cee;_v.exports=uee});var Cv=C((jUe,Ov)=>{var dee=800,fee=16,Eee=Date.now;function hee(t){var e=0,n=0;return function(){var r=Eee(),i=fee-(r-n);if(n=r,i>0){if(++e>=dee)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}Ov.exports=hee});var yv=C((KUe,bv)=>{var pee=Nv(),Tee=Cv(),See=Tee(pee);bv.exports=See});var $h=C((JUe,wv)=>{var Ree=Vg(),Aee=Vx(),mee=yv();function gee(t,e){return mee(Aee(t,e,Ree),t+"")}wv.exports=gee});var kh=C((QUe,Lv)=>{function Iee(t,e){return t===e||t!==t&&e!==e}Lv.exports=Iee});var jg=C((ZUe,Dv)=>{var _ee=9007199254740991;function Nee(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=_ee}Dv.exports=Nee});var Wh=C((eBe,Pv)=>{var Oee=Xg(),Cee=jg();function bee(t){return t!=null&&Cee(t.length)&&!Oee(t)}Pv.exports=bee});var Kg=C((tBe,xv)=>{var yee=9007199254740991,wee=/^(?:0|[1-9]\d*)$/;function Lee(t,e){var n=typeof t;return e=e??yee,!!e&&(n=="number"||n!="symbol"&&wee.test(t))&&t>-1&&t%1==0&&t<e}xv.exports=Lee});var Mv=C((nBe,vv)=>{var Dee=kh(),Pee=Wh(),xee=Kg(),vee=zu();function Mee(t,e,n){if(!vee(n))return!1;var r=typeof e;return(r=="number"?Pee(n)&&xee(e,n.length):r=="string"&&e in n)?Dee(n[e],t):!1}vv.exports=Mee});var Bv=C((rBe,Uv)=>{function Uee(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}Uv.exports=Uee});var _l=C((iBe,Fv)=>{function Bee(t){return t!=null&&typeof t=="object"}Fv.exports=Bee});var Gv=C((sBe,Hv)=>{var Fee=Xu(),Hee=_l(),Gee="[object Arguments]";function $ee(t){return Hee(t)&&Fee(t)==Gee}Hv.exports=$ee});var Jg=C((oBe,Wv)=>{var $v=Gv(),kee=_l(),kv=Object.prototype,Wee=kv.hasOwnProperty,Yee=kv.propertyIsEnumerable,Vee=$v((function(){return arguments})())?$v:function(t){return kee(t)&&Wee.call(t,"callee")&&!Yee.call(t,"callee")};Wv.exports=Vee});var Qg=C((aBe,Yv)=>{var qee=Array.isArray;Yv.exports=qee});var qv=C((lBe,Vv)=>{function Xee(){return!1}Vv.exports=Xee});var Kv=C((Ku,Nl)=>{var zee=Il(),jee=qv(),jv=typeof Ku=="object"&&Ku&&!Ku.nodeType&&Ku,Xv=jv&&typeof Nl=="object"&&Nl&&!Nl.nodeType&&Nl,Kee=Xv&&Xv.exports===jv,zv=Kee?zee.Buffer:void 0,Jee=zv?zv.isBuffer:void 0,Qee=Jee||jee;Nl.exports=Qee});var Qv=C((cBe,Jv)=>{var Zee=Xu(),ete=jg(),tte=_l(),nte="[object Arguments]",rte="[object Array]",ite="[object Boolean]",ste="[object Date]",ote="[object Error]",ate="[object Function]",lte="[object Map]",cte="[object Number]",ute="[object Object]",dte="[object RegExp]",fte="[object Set]",Ete="[object String]",hte="[object WeakMap]",pte="[object ArrayBuffer]",Tte="[object DataView]",Ste="[object Float32Array]",Rte="[object Float64Array]",Ate="[object Int8Array]",mte="[object Int16Array]",gte="[object Int32Array]",Ite="[object Uint8Array]",_te="[object Uint8ClampedArray]",Nte="[object Uint16Array]",Ote="[object Uint32Array]",ut={};ut[Ste]=ut[Rte]=ut[Ate]=ut[mte]=ut[gte]=ut[Ite]=ut[_te]=ut[Nte]=ut[Ote]=!0;ut[nte]=ut[rte]=ut[pte]=ut[ite]=ut[Tte]=ut[ste]=ut[ote]=ut[ate]=ut[lte]=ut[cte]=ut[ute]=ut[dte]=ut[fte]=ut[Ete]=ut[hte]=!1;function Cte(t){return tte(t)&&ete(t.length)&&!!ut[Zee(t)]}Jv.exports=Cte});var Zg=C((uBe,Zv)=>{function bte(t){return function(e){return t(e)}}Zv.exports=bte});var tM=C((Ju,Ol)=>{var yte=qg(),eM=typeof Ju=="object"&&Ju&&!Ju.nodeType&&Ju,Qu=eM&&typeof Ol=="object"&&Ol&&!Ol.nodeType&&Ol,wte=Qu&&Qu.exports===eM,eI=wte&&yte.process,Lte=(function(){try{var t=Qu&&Qu.require&&Qu.require("util").types;return t||eI&&eI.binding&&eI.binding("util")}catch{}})();Ol.exports=Lte});var sM=C((dBe,iM)=>{var Dte=Qv(),Pte=Zg(),nM=tM(),rM=nM&&nM.isTypedArray,xte=rM?Pte(rM):Dte;iM.exports=xte});var aM=C((fBe,oM)=>{var vte=Bv(),Mte=Jg(),Ute=Qg(),Bte=Kv(),Fte=Kg(),Hte=sM(),Gte=Object.prototype,$te=Gte.hasOwnProperty;function kte(t,e){var n=Ute(t),r=!n&&Mte(t),i=!n&&!r&&Bte(t),s=!n&&!r&&!i&&Hte(t),o=n||r||i||s,a=o?vte(t.length,String):[],l=a.length;for(var c in t)(e||$te.call(t,c))&&!(o&&(c=="length"||i&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||Fte(c,l)))&&a.push(c);return a}oM.exports=kte});var cM=C((EBe,lM)=>{var Wte=Object.prototype;function Yte(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||Wte;return t===n}lM.exports=Yte});var dM=C((hBe,uM)=>{function Vte(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}uM.exports=Vte});var EM=C((pBe,fM)=>{var qte=zu(),Xte=cM(),zte=dM(),jte=Object.prototype,Kte=jte.hasOwnProperty;function Jte(t){if(!qte(t))return zte(t);var e=Xte(t),n=[];for(var r in t)r=="constructor"&&(e||!Kte.call(t,r))||n.push(r);return n}fM.exports=Jte});var pM=C((TBe,hM)=>{var Qte=aM(),Zte=EM(),ene=Wh();function tne(t){return ene(t)?Qte(t,!0):Zte(t)}hM.exports=tne});var RM=C((SBe,SM)=>{var nne=$h(),rne=kh(),ine=Mv(),sne=pM(),TM=Object.prototype,one=TM.hasOwnProperty,ane=nne(function(t,e){t=Object(t);var n=-1,r=e.length,i=r>2?e[2]:void 0;for(i&&ine(e[0],e[1],i)&&(r=1);++n<r;)for(var s=e[n],o=sne(s),a=-1,l=o.length;++a<l;){var c=o[a],u=t[c];(u===void 0||rne(u,TM[c])&&!one.call(t,c))&&(t[c]=s[c])}return t});SM.exports=ane});var St=C((RBe,AM)=>{"use strict";var tI=class extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError(`Expected input to be an Array, got ${typeof e}`);let n="";for(let r=0;r<e.length;r++)n+=`    ${e[r].stack}
`;super(n),this.name="AggregateError",this.errors=e}};AM.exports={AggregateError:tI,ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,e){return t.includes(e)},ArrayPrototypeIndexOf(t,e){return t.indexOf(e)},ArrayPrototypeJoin(t,e){return t.join(e)},ArrayPrototypeMap(t,e){return t.map(e)},ArrayPrototypePop(t,e){return t.pop(e)},ArrayPrototypePush(t,e){return t.push(e)},ArrayPrototypeSlice(t,e,n){return t.slice(e,n)},Error,FunctionPrototypeCall(t,e,...n){return t.call(e,...n)},FunctionPrototypeSymbolHasInstance(t,e){return Function.prototype[Symbol.hasInstance].call(t,e)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,e){return Object.defineProperties(t,e)},ObjectDefineProperty(t,e,n){return Object.defineProperty(t,e,n)},ObjectGetOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,e){return Object.setPrototypeOf(t,e)},Promise,PromisePrototypeCatch(t,e){return t.catch(e)},PromisePrototypeThen(t,e,n){return t.then(e,n)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,e){return t.test(e)},SafeSet:Set,String,StringPrototypeSlice(t,e,n){return t.slice(e,n)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,e,n){return t.set(e,n)},Boolean,Uint8Array}});var nI=C((ABe,mM)=>{"use strict";mM.exports={format(t,...e){return t.replace(/%([sdifj])/g,function(...[n,r]){let i=e.shift();return r==="f"?i.toFixed(6):r==="j"?JSON.stringify(i):r==="s"&&typeof i=="object"?`${i.constructor!==Object?i.constructor.name:""} {}`.trim():i.toString()})},inspect(t){switch(typeof t){case"string":if(t.includes("'"))if(t.includes('"')){if(!t.includes("`")&&!t.includes("${"))return`\`${t}\``}else return`"${t}"`;return`'${t}'`;case"number":return isNaN(t)?"NaN":Object.is(t,-0)?String(t):t;case"bigint":return`${String(t)}n`;case"boolean":case"undefined":return String(t);case"object":return"{}"}}}});var kn=C((mBe,_M)=>{"use strict";var{format:lne,inspect:Yh}=nI(),{AggregateError:cne}=St(),une=globalThis.AggregateError||cne,dne=Symbol("kIsNodeError"),fne=["string","function","number","object","Function","Object","boolean","bigint","symbol"],Ene=/^([A-Z][a-z0-9]*)+$/,hne="__node_internal_",Vh={};function ko(t,e){if(!t)throw new Vh.ERR_INTERNAL_ASSERTION(e)}function gM(t){let e="",n=t.length,r=t[0]==="-"?1:0;for(;n>=r+4;n-=3)e=`_${t.slice(n-3,n)}${e}`;return`${t.slice(0,n)}${e}`}function pne(t,e,n){if(typeof e=="function")return ko(e.length<=n.length,`Code: ${t}; The provided arguments length (${n.length}) does not match the required ones (${e.length}).`),e(...n);let r=(e.match(/%[dfijoOs]/g)||[]).length;return ko(r===n.length,`Code: ${t}; The provided arguments length (${n.length}) does not match the required ones (${r}).`),n.length===0?e:lne(e,...n)}function Ln(t,e,n){n||(n=Error);class r extends n{constructor(...s){super(pne(t,e,s))}toString(){return`${this.name} [${t}]: ${this.message}`}}Object.defineProperties(r.prototype,{name:{value:n.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${t}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),r.prototype.code=t,r.prototype[dne]=!0,Vh[t]=r}function IM(t){let e=hne+t.name;return Object.defineProperty(t,"name",{value:e}),t}function Tne(t,e){if(t&&e&&t!==e){if(Array.isArray(e.errors))return e.errors.push(t),e;let n=new une([e,t],e.message);return n.code=e.code,n}return t||e}var rI=class extends Error{constructor(e="The operation was aborted",n=void 0){if(n!==void 0&&typeof n!="object")throw new Vh.ERR_INVALID_ARG_TYPE("options","Object",n);super(e,n),this.code="ABORT_ERR",this.name="AbortError"}};Ln("ERR_ASSERTION","%s",Error);Ln("ERR_INVALID_ARG_TYPE",(t,e,n)=>{ko(typeof t=="string","'name' must be a string"),Array.isArray(e)||(e=[e]);let r="The ";t.endsWith(" argument")?r+=`${t} `:r+=`"${t}" ${t.includes(".")?"property":"argument"} `,r+="must be ";let i=[],s=[],o=[];for(let l of e)ko(typeof l=="string","All expected entries have to be of type string"),fne.includes(l)?i.push(l.toLowerCase()):Ene.test(l)?s.push(l):(ko(l!=="object",'The value "object" should be written as "Object"'),o.push(l));if(s.length>0){let l=i.indexOf("object");l!==-1&&(i.splice(i,l,1),s.push("Object"))}if(i.length>0){switch(i.length){case 1:r+=`of type ${i[0]}`;break;case 2:r+=`one of type ${i[0]} or ${i[1]}`;break;default:{let l=i.pop();r+=`one of type ${i.join(", ")}, or ${l}`}}(s.length>0||o.length>0)&&(r+=" or ")}if(s.length>0){switch(s.length){case 1:r+=`an instance of ${s[0]}`;break;case 2:r+=`an instance of ${s[0]} or ${s[1]}`;break;default:{let l=s.pop();r+=`an instance of ${s.join(", ")}, or ${l}`}}o.length>0&&(r+=" or ")}switch(o.length){case 0:break;case 1:o[0].toLowerCase()!==o[0]&&(r+="an "),r+=`${o[0]}`;break;case 2:r+=`one of ${o[0]} or ${o[1]}`;break;default:{let l=o.pop();r+=`one of ${o.join(", ")}, or ${l}`}}if(n==null)r+=`. Received ${n}`;else if(typeof n=="function"&&n.name)r+=`. Received function ${n.name}`;else if(typeof n=="object"){var a;if((a=n.constructor)!==null&&a!==void 0&&a.name)r+=`. Received an instance of ${n.constructor.name}`;else{let l=Yh(n,{depth:-1});r+=`. Received ${l}`}}else{let l=Yh(n,{colors:!1});l.length>25&&(l=`${l.slice(0,25)}...`),r+=`. Received type ${typeof n} (${l})`}return r},TypeError);Ln("ERR_INVALID_ARG_VALUE",(t,e,n="is invalid")=>{let r=Yh(e);return r.length>128&&(r=r.slice(0,128)+"..."),`The ${t.includes(".")?"property":"argument"} '${t}' ${n}. Received ${r}`},TypeError);Ln("ERR_INVALID_RETURN_VALUE",(t,e,n)=>{var r;let i=n!=null&&(r=n.constructor)!==null&&r!==void 0&&r.name?`instance of ${n.constructor.name}`:`type ${typeof n}`;return`Expected ${t} to be returned from the "${e}" function but got ${i}.`},TypeError);Ln("ERR_MISSING_ARGS",(...t)=>{ko(t.length>0,"At least one arg needs to be specified");let e,n=t.length;switch(t=(Array.isArray(t)?t:[t]).map(r=>`"${r}"`).join(" or "),n){case 1:e+=`The ${t[0]} argument`;break;case 2:e+=`The ${t[0]} and ${t[1]} arguments`;break;default:{let r=t.pop();e+=`The ${t.join(", ")}, and ${r} arguments`}break}return`${e} must be specified`},TypeError);Ln("ERR_OUT_OF_RANGE",(t,e,n)=>{ko(e,'Missing "range" argument');let r;if(Number.isInteger(n)&&Math.abs(n)>2**32)r=gM(String(n));else if(typeof n=="bigint"){r=String(n);let i=BigInt(2)**BigInt(32);(n>i||n<-i)&&(r=gM(r)),r+="n"}else r=Yh(n);return`The value of "${t}" is out of range. It must be ${e}. Received ${r}`},RangeError);Ln("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);Ln("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);Ln("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);Ln("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);Ln("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);Ln("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Ln("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);Ln("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);Ln("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);Ln("ERR_STREAM_WRITE_AFTER_END","write after end",Error);Ln("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);_M.exports={AbortError:rI,aggregateTwoErrors:IM(Tne),hideStackFrames:IM,codes:Vh}});var xM=C((td,ed)=>{"use strict";Object.defineProperty(td,"__esModule",{value:!0});var wM=new WeakMap,iI=new WeakMap;function dt(t){let e=wM.get(t);return console.assert(e!=null,"'this' is expected an Event object, but got",t),e}function NM(t){if(t.passiveListener!=null){typeof console<"u"&&typeof console.error=="function"&&console.error("Unable to preventDefault inside passive event listener invocation.",t.passiveListener);return}t.event.cancelable&&(t.canceled=!0,typeof t.event.preventDefault=="function"&&t.event.preventDefault())}function Cl(t,e){wM.set(this,{eventTarget:t,event:e,eventPhase:2,currentTarget:t,canceled:!1,stopped:!1,immediateStopped:!1,passiveListener:null,timeStamp:e.timeStamp||Date.now()}),Object.defineProperty(this,"isTrusted",{value:!1,enumerable:!0});let n=Object.keys(e);for(let r=0;r<n.length;++r){let i=n[r];i in this||Object.defineProperty(this,i,LM(i))}}Cl.prototype={get type(){return dt(this).event.type},get target(){return dt(this).eventTarget},get currentTarget(){return dt(this).currentTarget},composedPath(){let t=dt(this).currentTarget;return t==null?[]:[t]},get NONE(){return 0},get CAPTURING_PHASE(){return 1},get AT_TARGET(){return 2},get BUBBLING_PHASE(){return 3},get eventPhase(){return dt(this).eventPhase},stopPropagation(){let t=dt(this);t.stopped=!0,typeof t.event.stopPropagation=="function"&&t.event.stopPropagation()},stopImmediatePropagation(){let t=dt(this);t.stopped=!0,t.immediateStopped=!0,typeof t.event.stopImmediatePropagation=="function"&&t.event.stopImmediatePropagation()},get bubbles(){return!!dt(this).event.bubbles},get cancelable(){return!!dt(this).event.cancelable},preventDefault(){NM(dt(this))},get defaultPrevented(){return dt(this).canceled},get composed(){return!!dt(this).event.composed},get timeStamp(){return dt(this).timeStamp},get srcElement(){return dt(this).eventTarget},get cancelBubble(){return dt(this).stopped},set cancelBubble(t){if(!t)return;let e=dt(this);e.stopped=!0,typeof e.event.cancelBubble=="boolean"&&(e.event.cancelBubble=!0)},get returnValue(){return!dt(this).canceled},set returnValue(t){t||NM(dt(this))},initEvent(){}};Object.defineProperty(Cl.prototype,"constructor",{value:Cl,configurable:!0,writable:!0});typeof window<"u"&&typeof window.Event<"u"&&(Object.setPrototypeOf(Cl.prototype,window.Event.prototype),iI.set(window.Event.prototype,Cl));function LM(t){return{get(){return dt(this).event[t]},set(e){dt(this).event[t]=e},configurable:!0,enumerable:!0}}function Sne(t){return{value(){let e=dt(this).event;return e[t].apply(e,arguments)},configurable:!0,enumerable:!0}}function Rne(t,e){let n=Object.keys(e);if(n.length===0)return t;function r(i,s){t.call(this,i,s)}r.prototype=Object.create(t.prototype,{constructor:{value:r,configurable:!0,writable:!0}});for(let i=0;i<n.length;++i){let s=n[i];if(!(s in t.prototype)){let a=typeof Object.getOwnPropertyDescriptor(e,s).value=="function";Object.defineProperty(r.prototype,s,a?Sne(s):LM(s))}}return r}function DM(t){if(t==null||t===Object.prototype)return Cl;let e=iI.get(t);return e==null&&(e=Rne(DM(Object.getPrototypeOf(t)),t),iI.set(t,e)),e}function Ane(t,e){let n=DM(Object.getPrototypeOf(e));return new n(t,e)}function mne(t){return dt(t).immediateStopped}function gne(t,e){dt(t).eventPhase=e}function Ine(t,e){dt(t).currentTarget=e}function OM(t,e){dt(t).passiveListener=e}var PM=new WeakMap,CM=1,bM=2,qh=3;function Xh(t){return t!==null&&typeof t=="object"}function Zu(t){let e=PM.get(t);if(e==null)throw new TypeError("'this' is expected an EventTarget object, but got another value.");return e}function _ne(t){return{get(){let n=Zu(this).get(t);for(;n!=null;){if(n.listenerType===qh)return n.listener;n=n.next}return null},set(e){typeof e!="function"&&!Xh(e)&&(e=null);let n=Zu(this),r=null,i=n.get(t);for(;i!=null;)i.listenerType===qh?r!==null?r.next=i.next:i.next!==null?n.set(t,i.next):n.delete(t):r=i,i=i.next;if(e!==null){let s={listener:e,listenerType:qh,passive:!1,once:!1,next:null};r===null?n.set(t,s):r.next=s}},configurable:!0,enumerable:!0}}function sI(t,e){Object.defineProperty(t,`on${e}`,_ne(e))}function yM(t){function e(){zr.call(this)}e.prototype=Object.create(zr.prototype,{constructor:{value:e,configurable:!0,writable:!0}});for(let n=0;n<t.length;++n)sI(e.prototype,t[n]);return e}function zr(){if(this instanceof zr){PM.set(this,new Map);return}if(arguments.length===1&&Array.isArray(arguments[0]))return yM(arguments[0]);if(arguments.length>0){let t=new Array(arguments.length);for(let e=0;e<arguments.length;++e)t[e]=arguments[e];return yM(t)}throw new TypeError("Cannot call a class as a function")}zr.prototype={addEventListener(t,e,n){if(e==null)return;if(typeof e!="function"&&!Xh(e))throw new TypeError("'listener' should be a function or an object.");let r=Zu(this),i=Xh(n),o=(i?!!n.capture:!!n)?CM:bM,a={listener:e,listenerType:o,passive:i&&!!n.passive,once:i&&!!n.once,next:null},l=r.get(t);if(l===void 0){r.set(t,a);return}let c=null;for(;l!=null;){if(l.listener===e&&l.listenerType===o)return;c=l,l=l.next}c.next=a},removeEventListener(t,e,n){if(e==null)return;let r=Zu(this),s=(Xh(n)?!!n.capture:!!n)?CM:bM,o=null,a=r.get(t);for(;a!=null;){if(a.listener===e&&a.listenerType===s){o!==null?o.next=a.next:a.next!==null?r.set(t,a.next):r.delete(t);return}o=a,a=a.next}},dispatchEvent(t){if(t==null||typeof t.type!="string")throw new TypeError('"event.type" should be a string.');let e=Zu(this),n=t.type,r=e.get(n);if(r==null)return!0;let i=Ane(this,t),s=null;for(;r!=null;){if(r.once?s!==null?s.next=r.next:r.next!==null?e.set(n,r.next):e.delete(n):s=r,OM(i,r.passive?r.listener:null),typeof r.listener=="function")try{r.listener.call(this,i)}catch(o){typeof console<"u"&&typeof console.error=="function"&&console.error(o)}else r.listenerType!==qh&&typeof r.listener.handleEvent=="function"&&r.listener.handleEvent(i);if(mne(i))break;r=r.next}return OM(i,null),gne(i,0),Ine(i,null),!i.defaultPrevented}};Object.defineProperty(zr.prototype,"constructor",{value:zr,configurable:!0,writable:!0});typeof window<"u"&&typeof window.EventTarget<"u"&&Object.setPrototypeOf(zr.prototype,window.EventTarget.prototype);td.defineEventAttribute=sI;td.EventTarget=zr;td.default=zr;ed.exports=zr;ed.exports.EventTarget=ed.exports.default=zr;ed.exports.defineEventAttribute=sI});var kt=C((rd,nd)=>{"use strict";Object.defineProperty(rd,"__esModule",{value:!0});var oI=xM(),qs=class extends oI.EventTarget{constructor(){throw super(),new TypeError("AbortSignal cannot be constructed directly")}get aborted(){let e=zh.get(this);if(typeof e!="boolean")throw new TypeError(`Expected 'this' to be an 'AbortSignal' object, but got ${this===null?"null":typeof this}`);return e}};oI.defineEventAttribute(qs.prototype,"abort");function Nne(){let t=Object.create(qs.prototype);return oI.EventTarget.call(t),zh.set(t,!1),t}function One(t){zh.get(t)===!1&&(zh.set(t,!0),t.dispatchEvent({type:"abort"}))}var zh=new WeakMap;Object.defineProperties(qs.prototype,{aborted:{enumerable:!0}});typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(qs.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortSignal"});var Xs=class{constructor(){MM.set(this,Nne())}get signal(){return vM(this)}abort(){One(vM(this))}},MM=new WeakMap;function vM(t){let e=MM.get(t);if(e==null)throw new TypeError(`Expected 'this' to be an 'AbortController' object, but got ${t===null?"null":typeof t}`);return e}Object.defineProperties(Xs.prototype,{signal:{enumerable:!0},abort:{enumerable:!0}});typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Xs.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortController"});rd.AbortController=Xs;rd.AbortSignal=qs;rd.default=Xs;nd.exports=Xs;nd.exports.AbortController=nd.exports.default=Xs;nd.exports.AbortSignal=qs});var er=C((gBe,lI)=>{"use strict";var Cne=require("buffer"),{format:bne,inspect:yne}=nI(),{codes:{ERR_INVALID_ARG_TYPE:aI}}=kn(),{kResistStopPropagation:wne,AggregateError:Lne,SymbolDispose:Dne}=St(),Pne=globalThis.AbortSignal||kt().AbortSignal,xne=globalThis.AbortController||kt().AbortController,vne=Object.getPrototypeOf(async function(){}).constructor,UM=globalThis.Blob||Cne.Blob,Mne=typeof UM<"u"?function(e){return e instanceof UM}:function(e){return!1},BM=(t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new aI(e,"AbortSignal",t)},Une=(t,e)=>{if(typeof t!="function")throw new aI(e,"Function",t)};lI.exports={AggregateError:Lne,kEmptyObject:Object.freeze({}),once(t){let e=!1;return function(...n){e||(e=!0,t.apply(this,n))}},createDeferredPromise:function(){let t,e;return{promise:new Promise((r,i)=>{t=r,e=i}),resolve:t,reject:e}},promisify(t){return new Promise((e,n)=>{t((r,...i)=>r?n(r):e(...i))})},debuglog(){return function(){}},format:bne,inspect:yne,types:{isAsyncFunction(t){return t instanceof vne},isArrayBufferView(t){return ArrayBuffer.isView(t)}},isBlob:Mne,deprecate(t,e){return t},addAbortListener:require("events").addAbortListener||function(e,n){if(e===void 0)throw new aI("signal","AbortSignal",e);BM(e,"signal"),Une(n,"listener");let r;return e.aborted?queueMicrotask(()=>n()):(e.addEventListener("abort",n,{__proto__:null,once:!0,[wne]:!0}),r=()=>{e.removeEventListener("abort",n)}),{__proto__:null,[Dne](){var i;(i=r)===null||i===void 0||i()}}},AbortSignalAny:Pne.any||function(e){if(e.length===1)return e[0];let n=new xne,r=()=>n.abort();return e.forEach(i=>{BM(i,"signals"),i.addEventListener("abort",r,{once:!0})}),n.signal.addEventListener("abort",()=>{e.forEach(i=>i.removeEventListener("abort",r))},{once:!0}),n.signal}};lI.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")});var yl=C((IBe,XM)=>{"use strict";var{ArrayIsArray:uI,ArrayPrototypeIncludes:$M,ArrayPrototypeJoin:kM,ArrayPrototypeMap:Bne,NumberIsInteger:dI,NumberIsNaN:Fne,NumberMAX_SAFE_INTEGER:Hne,NumberMIN_SAFE_INTEGER:Gne,NumberParseInt:$ne,ObjectPrototypeHasOwnProperty:kne,RegExpPrototypeExec:WM,String:Wne,StringPrototypeToUpperCase:Yne,StringPrototypeTrim:Vne}=St(),{hideStackFrames:Dr,codes:{ERR_SOCKET_BAD_PORT:qne,ERR_INVALID_ARG_TYPE:Wn,ERR_INVALID_ARG_VALUE:bl,ERR_OUT_OF_RANGE:Wo,ERR_UNKNOWN_SIGNAL:FM}}=kn(),{normalizeEncoding:Xne}=er(),{isAsyncFunction:zne,isArrayBufferView:jne}=er().types,HM={};function Kne(t){return t===(t|0)}function Jne(t){return t===t>>>0}var Qne=/^[0-7]+$/,Zne="must be a 32-bit unsigned integer or an octal string";function ere(t,e,n){if(typeof t>"u"&&(t=n),typeof t=="string"){if(WM(Qne,t)===null)throw new bl(e,t,Zne);t=$ne(t,8)}return YM(t,e),t}var tre=Dr((t,e,n=Gne,r=Hne)=>{if(typeof t!="number")throw new Wn(e,"number",t);if(!dI(t))throw new Wo(e,"an integer",t);if(t<n||t>r)throw new Wo(e,`>= ${n} && <= ${r}`,t)}),nre=Dr((t,e,n=-2147483648,r=2147483647)=>{if(typeof t!="number")throw new Wn(e,"number",t);if(!dI(t))throw new Wo(e,"an integer",t);if(t<n||t>r)throw new Wo(e,`>= ${n} && <= ${r}`,t)}),YM=Dr((t,e,n=!1)=>{if(typeof t!="number")throw new Wn(e,"number",t);if(!dI(t))throw new Wo(e,"an integer",t);let r=n?1:0,i=4294967295;if(t<r||t>i)throw new Wo(e,`>= ${r} && <= ${i}`,t)});function fI(t,e){if(typeof t!="string")throw new Wn(e,"string",t)}function rre(t,e,n=void 0,r){if(typeof t!="number")throw new Wn(e,"number",t);if(n!=null&&t<n||r!=null&&t>r||(n!=null||r!=null)&&Fne(t))throw new Wo(e,`${n!=null?`>= ${n}`:""}${n!=null&&r!=null?" && ":""}${r!=null?`<= ${r}`:""}`,t)}var ire=Dr((t,e,n)=>{if(!$M(n,t)){let i="must be one of: "+kM(Bne(n,s=>typeof s=="string"?`'${s}'`:Wne(s)),", ");throw new bl(e,t,i)}});function VM(t,e){if(typeof t!="boolean")throw new Wn(e,"boolean",t)}function cI(t,e,n){return t==null||!kne(t,e)?n:t[e]}var sre=Dr((t,e,n=null)=>{let r=cI(n,"allowArray",!1),i=cI(n,"allowFunction",!1);if(!cI(n,"nullable",!1)&&t===null||!r&&uI(t)||typeof t!="object"&&(!i||typeof t!="function"))throw new Wn(e,"Object",t)}),ore=Dr((t,e)=>{if(t!=null&&typeof t!="object"&&typeof t!="function")throw new Wn(e,"a dictionary",t)}),jh=Dr((t,e,n=0)=>{if(!uI(t))throw new Wn(e,"Array",t);if(t.length<n){let r=`must be longer than ${n}`;throw new bl(e,t,r)}});function are(t,e){jh(t,e);for(let n=0;n<t.length;n++)fI(t[n],`${e}[${n}]`)}function lre(t,e){jh(t,e);for(let n=0;n<t.length;n++)VM(t[n],`${e}[${n}]`)}function cre(t,e){jh(t,e);for(let n=0;n<t.length;n++){let r=t[n],i=`${e}[${n}]`;if(r==null)throw new Wn(i,"AbortSignal",r);qM(r,i)}}function ure(t,e="signal"){if(fI(t,e),HM[t]===void 0)throw HM[Yne(t)]!==void 0?new FM(t+" (signals must use all capital letters)"):new FM(t)}var dre=Dr((t,e="buffer")=>{if(!jne(t))throw new Wn(e,["Buffer","TypedArray","DataView"],t)});function fre(t,e){let n=Xne(e),r=t.length;if(n==="hex"&&r%2!==0)throw new bl("encoding",e,`is invalid for data of length ${r}`)}function Ere(t,e="Port",n=!0){if(typeof t!="number"&&typeof t!="string"||typeof t=="string"&&Vne(t).length===0||+t!==+t>>>0||t>65535||t===0&&!n)throw new qne(e,t,n);return t|0}var qM=Dr((t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new Wn(e,"AbortSignal",t)}),hre=Dr((t,e)=>{if(typeof t!="function")throw new Wn(e,"Function",t)}),pre=Dr((t,e)=>{if(typeof t!="function"||zne(t))throw new Wn(e,"Function",t)}),Tre=Dr((t,e)=>{if(t!==void 0)throw new Wn(e,"undefined",t)});function Sre(t,e,n){if(!$M(n,t))throw new Wn(e,`('${kM(n,"|")}')`,t)}var Rre=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function GM(t,e){if(typeof t>"u"||!WM(Rre,t))throw new bl(e,t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function Are(t){if(typeof t=="string")return GM(t,"hints"),t;if(uI(t)){let e=t.length,n="";if(e===0)return n;for(let r=0;r<e;r++){let i=t[r];GM(i,"hints"),n+=i,r!==e-1&&(n+=", ")}return n}throw new bl("hints",t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}XM.exports={isInt32:Kne,isUint32:Jne,parseFileMode:ere,validateArray:jh,validateStringArray:are,validateBooleanArray:lre,validateAbortSignalArray:cre,validateBoolean:VM,validateBuffer:dre,validateDictionary:ore,validateEncoding:fre,validateFunction:hre,validateInt32:nre,validateInteger:tre,validateNumber:rre,validateObject:sre,validateOneOf:ire,validatePlainFunction:pre,validatePort:Ere,validateSignalName:ure,validateString:fI,validateUint32:YM,validateUndefined:Tre,validateUnion:Sre,validateAbortSignal:qM,validateLinkHeaderValue:Are}});var it=C((_Be,zM)=>{zM.exports=global.process});var Si=C((NBe,cU)=>{"use strict";var{SymbolAsyncIterator:jM,SymbolIterator:KM,SymbolFor:Yo}=St(),JM=Yo("nodejs.stream.destroyed"),QM=Yo("nodejs.stream.errored"),EI=Yo("nodejs.stream.readable"),hI=Yo("nodejs.stream.writable"),ZM=Yo("nodejs.stream.disturbed"),mre=Yo("nodejs.webstream.isClosedPromise"),gre=Yo("nodejs.webstream.controllerErrorFunction");function Kh(t,e=!1){var n;return!!(t&&typeof t.pipe=="function"&&typeof t.on=="function"&&(!e||typeof t.pause=="function"&&typeof t.resume=="function")&&(!t._writableState||((n=t._readableState)===null||n===void 0?void 0:n.readable)!==!1)&&(!t._writableState||t._readableState))}function Jh(t){var e;return!!(t&&typeof t.write=="function"&&typeof t.on=="function"&&(!t._readableState||((e=t._writableState)===null||e===void 0?void 0:e.writable)!==!1))}function Ire(t){return!!(t&&typeof t.pipe=="function"&&t._readableState&&typeof t.on=="function"&&typeof t.write=="function")}function Ti(t){return t&&(t._readableState||t._writableState||typeof t.write=="function"&&typeof t.on=="function"||typeof t.pipe=="function"&&typeof t.on=="function")}function eU(t){return!!(t&&!Ti(t)&&typeof t.pipeThrough=="function"&&typeof t.getReader=="function"&&typeof t.cancel=="function")}function tU(t){return!!(t&&!Ti(t)&&typeof t.getWriter=="function"&&typeof t.abort=="function")}function nU(t){return!!(t&&!Ti(t)&&typeof t.readable=="object"&&typeof t.writable=="object")}function _re(t){return eU(t)||tU(t)||nU(t)}function Nre(t,e){return t==null?!1:e===!0?typeof t[jM]=="function":e===!1?typeof t[KM]=="function":typeof t[jM]=="function"||typeof t[KM]=="function"}function Qh(t){if(!Ti(t))return null;let e=t._writableState,n=t._readableState,r=e||n;return!!(t.destroyed||t[JM]||r!=null&&r.destroyed)}function rU(t){if(!Jh(t))return null;if(t.writableEnded===!0)return!0;let e=t._writableState;return e!=null&&e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function Ore(t,e){if(!Jh(t))return null;if(t.writableFinished===!0)return!0;let n=t._writableState;return n!=null&&n.errored?!1:typeof n?.finished!="boolean"?null:!!(n.finished||e===!1&&n.ended===!0&&n.length===0)}function Cre(t){if(!Kh(t))return null;if(t.readableEnded===!0)return!0;let e=t._readableState;return!e||e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function iU(t,e){if(!Kh(t))return null;let n=t._readableState;return n!=null&&n.errored?!1:typeof n?.endEmitted!="boolean"?null:!!(n.endEmitted||e===!1&&n.ended===!0&&n.length===0)}function sU(t){return t&&t[EI]!=null?t[EI]:typeof t?.readable!="boolean"?null:Qh(t)?!1:Kh(t)&&t.readable&&!iU(t)}function oU(t){return t&&t[hI]!=null?t[hI]:typeof t?.writable!="boolean"?null:Qh(t)?!1:Jh(t)&&t.writable&&!rU(t)}function bre(t,e){return Ti(t)?Qh(t)?!0:!(e?.readable!==!1&&sU(t)||e?.writable!==!1&&oU(t)):null}function yre(t){var e,n;return Ti(t)?t.writableErrored?t.writableErrored:(e=(n=t._writableState)===null||n===void 0?void 0:n.errored)!==null&&e!==void 0?e:null:null}function wre(t){var e,n;return Ti(t)?t.readableErrored?t.readableErrored:(e=(n=t._readableState)===null||n===void 0?void 0:n.errored)!==null&&e!==void 0?e:null:null}function Lre(t){if(!Ti(t))return null;if(typeof t.closed=="boolean")return t.closed;let e=t._writableState,n=t._readableState;return typeof e?.closed=="boolean"||typeof n?.closed=="boolean"?e?.closed||n?.closed:typeof t._closed=="boolean"&&aU(t)?t._closed:null}function aU(t){return typeof t._closed=="boolean"&&typeof t._defaultKeepAlive=="boolean"&&typeof t._removedConnection=="boolean"&&typeof t._removedContLen=="boolean"}function lU(t){return typeof t._sent100=="boolean"&&aU(t)}function Dre(t){var e;return typeof t._consuming=="boolean"&&typeof t._dumped=="boolean"&&((e=t.req)===null||e===void 0?void 0:e.upgradeOrConnect)===void 0}function Pre(t){if(!Ti(t))return null;let e=t._writableState,n=t._readableState,r=e||n;return!r&&lU(t)||!!(r&&r.autoDestroy&&r.emitClose&&r.closed===!1)}function xre(t){var e;return!!(t&&((e=t[ZM])!==null&&e!==void 0?e:t.readableDidRead||t.readableAborted))}function vre(t){var e,n,r,i,s,o,a,l,c,u;return!!(t&&((e=(n=(r=(i=(s=(o=t[QM])!==null&&o!==void 0?o:t.readableErrored)!==null&&s!==void 0?s:t.writableErrored)!==null&&i!==void 0?i:(a=t._readableState)===null||a===void 0?void 0:a.errorEmitted)!==null&&r!==void 0?r:(l=t._writableState)===null||l===void 0?void 0:l.errorEmitted)!==null&&n!==void 0?n:(c=t._readableState)===null||c===void 0?void 0:c.errored)!==null&&e!==void 0?e:!((u=t._writableState)===null||u===void 0)&&u.errored))}cU.exports={isDestroyed:Qh,kIsDestroyed:JM,isDisturbed:xre,kIsDisturbed:ZM,isErrored:vre,kIsErrored:QM,isReadable:sU,kIsReadable:EI,kIsClosedPromise:mre,kControllerErrorFunction:gre,kIsWritable:hI,isClosed:Lre,isDuplexNodeStream:Ire,isFinished:bre,isIterable:Nre,isReadableNodeStream:Kh,isReadableStream:eU,isReadableEnded:Cre,isReadableFinished:iU,isReadableErrored:wre,isNodeStream:Ti,isWebStream:_re,isWritable:oU,isWritableNodeStream:Jh,isWritableStream:tU,isWritableEnded:rU,isWritableFinished:Ore,isWritableErrored:yre,isServerRequest:Dre,isServerResponse:lU,willEmitClose:Pre,isTransformStream:nU}});var rs=C((OBe,AI)=>{"use strict";var zs=it(),{AbortError:RU,codes:Mre}=kn(),{ERR_INVALID_ARG_TYPE:Ure,ERR_STREAM_PREMATURE_CLOSE:uU}=Mre,{kEmptyObject:TI,once:SI}=er(),{validateAbortSignal:Bre,validateFunction:Fre,validateObject:Hre,validateBoolean:Gre}=yl(),{Promise:$re,PromisePrototypeThen:kre,SymbolDispose:AU}=St(),{isClosed:Wre,isReadable:dU,isReadableNodeStream:pI,isReadableStream:Yre,isReadableFinished:fU,isReadableErrored:EU,isWritable:hU,isWritableNodeStream:pU,isWritableStream:Vre,isWritableFinished:TU,isWritableErrored:SU,isNodeStream:qre,willEmitClose:Xre,kIsClosedPromise:zre}=Si(),wl;function jre(t){return t.setHeader&&typeof t.abort=="function"}var RI=()=>{};function mU(t,e,n){var r,i;if(arguments.length===2?(n=e,e=TI):e==null?e=TI:Hre(e,"options"),Fre(n,"callback"),Bre(e.signal,"options.signal"),n=SI(n),Yre(t)||Vre(t))return Kre(t,e,n);if(!qre(t))throw new Ure("stream",["ReadableStream","WritableStream","Stream"],t);let s=(r=e.readable)!==null&&r!==void 0?r:pI(t),o=(i=e.writable)!==null&&i!==void 0?i:pU(t),a=t._writableState,l=t._readableState,c=()=>{t.writable||E()},u=Xre(t)&&pI(t)===s&&pU(t)===o,d=TU(t,!1),E=()=>{d=!0,t.destroyed&&(u=!1),!(u&&(!t.readable||s))&&(!s||f)&&n.call(t)},f=fU(t,!1),p=()=>{f=!0,t.destroyed&&(u=!1),!(u&&(!t.writable||o))&&(!o||d)&&n.call(t)},h=N=>{n.call(t,N)},T=Wre(t),S=()=>{T=!0;let N=SU(t)||EU(t);if(N&&typeof N!="boolean")return n.call(t,N);if(s&&!f&&pI(t,!0)&&!fU(t,!1))return n.call(t,new uU);if(o&&!d&&!TU(t,!1))return n.call(t,new uU);n.call(t)},A=()=>{T=!0;let N=SU(t)||EU(t);if(N&&typeof N!="boolean")return n.call(t,N);n.call(t)},R=()=>{t.req.on("finish",E)};jre(t)?(t.on("complete",E),u||t.on("abort",S),t.req?R():t.on("request",R)):o&&!a&&(t.on("end",c),t.on("close",c)),!u&&typeof t.aborted=="boolean"&&t.on("aborted",S),t.on("end",p),t.on("finish",E),e.error!==!1&&t.on("error",h),t.on("close",S),T?zs.nextTick(S):a!=null&&a.errorEmitted||l!=null&&l.errorEmitted?u||zs.nextTick(A):(!s&&(!u||dU(t))&&(d||hU(t)===!1)||!o&&(!u||hU(t))&&(f||dU(t)===!1)||l&&t.req&&t.aborted)&&zs.nextTick(A);let m=()=>{n=RI,t.removeListener("aborted",S),t.removeListener("complete",E),t.removeListener("abort",S),t.removeListener("request",R),t.req&&t.req.removeListener("finish",E),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",E),t.removeListener("end",p),t.removeListener("error",h),t.removeListener("close",S)};if(e.signal&&!T){let N=()=>{let L=n;m(),L.call(t,new RU(void 0,{cause:e.signal.reason}))};if(e.signal.aborted)zs.nextTick(N);else{wl=wl||er().addAbortListener;let L=wl(e.signal,N),I=n;n=SI((...D)=>{L[AU](),I.apply(t,D)})}}return m}function Kre(t,e,n){let r=!1,i=RI;if(e.signal)if(i=()=>{r=!0,n.call(t,new RU(void 0,{cause:e.signal.reason}))},e.signal.aborted)zs.nextTick(i);else{wl=wl||er().addAbortListener;let o=wl(e.signal,i),a=n;n=SI((...l)=>{o[AU](),a.apply(t,l)})}let s=(...o)=>{r||zs.nextTick(()=>n.apply(t,o))};return kre(t[zre].promise,s,s),RI}function Jre(t,e){var n;let r=!1;return e===null&&(e=TI),(n=e)!==null&&n!==void 0&&n.cleanup&&(Gre(e.cleanup,"cleanup"),r=e.cleanup),new $re((i,s)=>{let o=mU(t,e,a=>{r&&o(),a?s(a):i()})})}AI.exports=mU;AI.exports.finished=Jre});var Vo=C((CBe,yU)=>{"use strict";var Ri=it(),{aggregateTwoErrors:Qre,codes:{ERR_MULTIPLE_CALLBACK:Zre},AbortError:eie}=kn(),{Symbol:_U}=St(),{kIsDestroyed:tie,isDestroyed:nie,isFinished:rie,isServerRequest:iie}=Si(),NU=_U("kDestroy"),mI=_U("kConstruct");function OU(t,e,n){t&&(t.stack,e&&!e.errored&&(e.errored=t),n&&!n.errored&&(n.errored=t))}function sie(t,e){let n=this._readableState,r=this._writableState,i=r||n;return r!=null&&r.destroyed||n!=null&&n.destroyed?(typeof e=="function"&&e(),this):(OU(t,r,n),r&&(r.destroyed=!0),n&&(n.destroyed=!0),i.constructed?gU(this,t,e):this.once(NU,function(s){gU(this,Qre(s,t),e)}),this)}function gU(t,e,n){let r=!1;function i(s){if(r)return;r=!0;let o=t._readableState,a=t._writableState;OU(s,a,o),a&&(a.closed=!0),o&&(o.closed=!0),typeof n=="function"&&n(s),s?Ri.nextTick(oie,t,s):Ri.nextTick(CU,t)}try{t._destroy(e||null,i)}catch(s){i(s)}}function oie(t,e){gI(t,e),CU(t)}function CU(t){let e=t._readableState,n=t._writableState;n&&(n.closeEmitted=!0),e&&(e.closeEmitted=!0),(n!=null&&n.emitClose||e!=null&&e.emitClose)&&t.emit("close")}function gI(t,e){let n=t._readableState,r=t._writableState;r!=null&&r.errorEmitted||n!=null&&n.errorEmitted||(r&&(r.errorEmitted=!0),n&&(n.errorEmitted=!0),t.emit("error",e))}function aie(){let t=this._readableState,e=this._writableState;t&&(t.constructed=!0,t.closed=!1,t.closeEmitted=!1,t.destroyed=!1,t.errored=null,t.errorEmitted=!1,t.reading=!1,t.ended=t.readable===!1,t.endEmitted=t.readable===!1),e&&(e.constructed=!0,e.destroyed=!1,e.closed=!1,e.closeEmitted=!1,e.errored=null,e.errorEmitted=!1,e.finalCalled=!1,e.prefinished=!1,e.ended=e.writable===!1,e.ending=e.writable===!1,e.finished=e.writable===!1)}function II(t,e,n){let r=t._readableState,i=t._writableState;if(i!=null&&i.destroyed||r!=null&&r.destroyed)return this;r!=null&&r.autoDestroy||i!=null&&i.autoDestroy?t.destroy(e):e&&(e.stack,i&&!i.errored&&(i.errored=e),r&&!r.errored&&(r.errored=e),n?Ri.nextTick(gI,t,e):gI(t,e))}function lie(t,e){if(typeof t._construct!="function")return;let n=t._readableState,r=t._writableState;n&&(n.constructed=!1),r&&(r.constructed=!1),t.once(mI,e),!(t.listenerCount(mI)>1)&&Ri.nextTick(cie,t)}function cie(t){let e=!1;function n(r){if(e){II(t,r??new Zre);return}e=!0;let i=t._readableState,s=t._writableState,o=s||i;i&&(i.constructed=!0),s&&(s.constructed=!0),o.destroyed?t.emit(NU,r):r?II(t,r,!0):Ri.nextTick(uie,t)}try{t._construct(r=>{Ri.nextTick(n,r)})}catch(r){Ri.nextTick(n,r)}}function uie(t){t.emit(mI)}function IU(t){return t?.setHeader&&typeof t.abort=="function"}function bU(t){t.emit("close")}function die(t,e){t.emit("error",e),Ri.nextTick(bU,t)}function fie(t,e){!t||nie(t)||(!e&&!rie(t)&&(e=new eie),iie(t)?(t.socket=null,t.destroy(e)):IU(t)?t.abort():IU(t.req)?t.req.abort():typeof t.destroy=="function"?t.destroy(e):typeof t.close=="function"?t.close():e?Ri.nextTick(die,t,e):Ri.nextTick(bU,t),t.destroyed||(t[tie]=!0))}yU.exports={construct:lie,destroyer:fie,destroy:sie,undestroy:aie,errorOrDestroy:II}});var tp=C((bBe,LU)=>{"use strict";var{ArrayIsArray:Eie,ObjectSetPrototypeOf:wU}=St(),{EventEmitter:Zh}=require("events");function ep(t){Zh.call(this,t)}wU(ep.prototype,Zh.prototype);wU(ep,Zh);ep.prototype.pipe=function(t,e){let n=this;function r(u){t.writable&&t.write(u)===!1&&n.pause&&n.pause()}n.on("data",r);function i(){n.readable&&n.resume&&n.resume()}t.on("drain",i),!t._isStdio&&(!e||e.end!==!1)&&(n.on("end",o),n.on("close",a));let s=!1;function o(){s||(s=!0,t.end())}function a(){s||(s=!0,typeof t.destroy=="function"&&t.destroy())}function l(u){c(),Zh.listenerCount(this,"error")===0&&this.emit("error",u)}_I(n,"error",l),_I(t,"error",l);function c(){n.removeListener("data",r),t.removeListener("drain",i),n.removeListener("end",o),n.removeListener("close",a),n.removeListener("error",l),t.removeListener("error",l),n.removeListener("end",c),n.removeListener("close",c),t.removeListener("close",c)}return n.on("end",c),n.on("close",c),t.on("close",c),t.emit("pipe",n),t};function _I(t,e,n){if(typeof t.prependListener=="function")return t.prependListener(e,n);!t._events||!t._events[e]?t.on(e,n):Eie(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]}LU.exports={Stream:ep,prependListener:_I}});var id=C((yBe,np)=>{"use strict";var{SymbolDispose:hie}=St(),{AbortError:DU,codes:pie}=kn(),{isNodeStream:PU,isWebStream:Tie,kControllerErrorFunction:Sie}=Si(),Rie=rs(),{ERR_INVALID_ARG_TYPE:xU}=pie,NI,Aie=(t,e)=>{if(typeof t!="object"||!("aborted"in t))throw new xU(e,"AbortSignal",t)};np.exports.addAbortSignal=function(e,n){if(Aie(e,"signal"),!PU(n)&&!Tie(n))throw new xU("stream",["ReadableStream","WritableStream","Stream"],n);return np.exports.addAbortSignalNoValidate(e,n)};np.exports.addAbortSignalNoValidate=function(t,e){if(typeof t!="object"||!("aborted"in t))return e;let n=PU(e)?()=>{e.destroy(new DU(void 0,{cause:t.reason}))}:()=>{e[Sie](new DU(void 0,{cause:t.reason}))};if(t.aborted)n();else{NI=NI||er().addAbortListener;let r=NI(t,n);Rie(e,r[hie])}return e}});var UU=C((LBe,MU)=>{"use strict";var{StringPrototypeSlice:vU,SymbolIterator:mie,TypedArrayPrototypeSet:rp,Uint8Array:gie}=St(),{Buffer:OI}=require("buffer"),{inspect:Iie}=er();MU.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){let n={data:e,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}unshift(e){let n={data:e,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}shift(){if(this.length===0)return;let e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return"";let n=this.head,r=""+n.data;for(;(n=n.next)!==null;)r+=e+n.data;return r}concat(e){if(this.length===0)return OI.alloc(0);let n=OI.allocUnsafe(e>>>0),r=this.head,i=0;for(;r;)rp(n,r.data,i),i+=r.data.length,r=r.next;return n}consume(e,n){let r=this.head.data;if(e<r.length){let i=r.slice(0,e);return this.head.data=r.slice(e),i}return e===r.length?this.shift():n?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[mie](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let n="",r=this.head,i=0;do{let s=r.data;if(e>s.length)n+=s,e-=s.length;else{e===s.length?(n+=s,++i,r.next?this.head=r.next:this.head=this.tail=null):(n+=vU(s,0,e),this.head=r,r.data=vU(s,e));break}++i}while((r=r.next)!==null);return this.length-=i,n}_getBuffer(e){let n=OI.allocUnsafe(e),r=e,i=this.head,s=0;do{let o=i.data;if(e>o.length)rp(n,o,r-e),e-=o.length;else{e===o.length?(rp(n,o,r-e),++s,i.next?this.head=i.next:this.head=this.tail=null):(rp(n,new gie(o.buffer,o.byteOffset,e),r-e),this.head=i,i.data=o.slice(e));break}++s}while((i=i.next)!==null);return this.length-=s,n}[Symbol.for("nodejs.util.inspect.custom")](e,n){return Iie(this,{...n,depth:0,customInspect:!1})}}});var sd=C((DBe,GU)=>{"use strict";var{MathFloor:_ie,NumberIsInteger:Nie}=St(),{validateInteger:Oie}=yl(),{ERR_INVALID_ARG_VALUE:Cie}=kn().codes,BU=16*1024,FU=16;function bie(t,e,n){return t.highWaterMark!=null?t.highWaterMark:e?t[n]:null}function HU(t){return t?FU:BU}function yie(t,e){Oie(e,"value",0),t?FU=e:BU=e}function wie(t,e,n,r){let i=bie(e,r,n);if(i!=null){if(!Nie(i)||i<0){let s=r?`options.${n}`:"options.highWaterMark";throw new Cie(s,i)}return _ie(i)}return HU(t.objectMode)}GU.exports={getHighWaterMark:wie,getDefaultHighWaterMark:HU,setDefaultHighWaterMark:yie}});var WU=C((CI,kU)=>{var ip=require("buffer"),Ai=ip.Buffer;function $U(t,e){for(var n in t)e[n]=t[n]}Ai.from&&Ai.alloc&&Ai.allocUnsafe&&Ai.allocUnsafeSlow?kU.exports=ip:($U(ip,CI),CI.Buffer=qo);function qo(t,e,n){return Ai(t,e,n)}qo.prototype=Object.create(Ai.prototype);$U(Ai,qo);qo.from=function(t,e,n){if(typeof t=="number")throw new TypeError("Argument must not be a number");return Ai(t,e,n)};qo.alloc=function(t,e,n){if(typeof t!="number")throw new TypeError("Argument must be a number");var r=Ai(t);return e!==void 0?typeof n=="string"?r.fill(e,n):r.fill(e):r.fill(0),r};qo.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Ai(t)};qo.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return ip.SlowBuffer(t)}});var ad=C(VU=>{"use strict";var yI=WU().Buffer,YU=yI.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Lie(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function Die(t){var e=Lie(t);if(typeof e!="string"&&(yI.isEncoding===YU||!YU(t)))throw new Error("Unknown encoding: "+t);return e||t}VU.StringDecoder=od;function od(t){this.encoding=Die(t);var e;switch(this.encoding){case"utf16le":this.text=Bie,this.end=Fie,e=4;break;case"utf8":this.fillLast=vie,e=4;break;case"base64":this.text=Hie,this.end=Gie,e=3;break;default:this.write=$ie,this.end=kie;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=yI.allocUnsafe(e)}od.prototype.write=function(t){if(t.length===0)return"";var e,n;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""};od.prototype.end=Uie;od.prototype.text=Mie;od.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function bI(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function Pie(t,e,n){var r=e.length-1;if(r<n)return 0;var i=bI(e[r]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--r<n||i===-2?0:(i=bI(e[r]),i>=0?(i>0&&(t.lastNeed=i-2),i):--r<n||i===-2?0:(i=bI(e[r]),i>=0?(i>0&&(i===2?i=0:t.lastNeed=i-3),i):0))}function xie(t,e,n){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function vie(t){var e=this.lastTotal-this.lastNeed,n=xie(this,t,e);if(n!==void 0)return n;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function Mie(t,e){var n=Pie(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var r=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)}function Uie(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function Bie(t,e){if((t.length-e)%2===0){var n=t.toString("utf16le",e);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function Fie(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function Hie(t,e){var n=(t.length-e)%3;return n===0?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,n===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function Gie(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function $ie(t){return t.toString(this.encoding)}function kie(t){return t&&t.length?this.write(t):""}});var wI=C((xBe,jU)=>{"use strict";var qU=it(),{PromisePrototypeThen:Wie,SymbolAsyncIterator:XU,SymbolIterator:zU}=St(),{Buffer:Yie}=require("buffer"),{ERR_INVALID_ARG_TYPE:Vie,ERR_STREAM_NULL_VALUES:qie}=kn().codes;function Xie(t,e,n){let r;if(typeof e=="string"||e instanceof Yie)return new t({objectMode:!0,...n,read(){this.push(e),this.push(null)}});let i;if(e&&e[XU])i=!0,r=e[XU]();else if(e&&e[zU])i=!1,r=e[zU]();else throw new Vie("iterable",["Iterable"],e);let s=new t({objectMode:!0,highWaterMark:1,...n}),o=!1;s._read=function(){o||(o=!0,l())},s._destroy=function(c,u){Wie(a(c),()=>qU.nextTick(u,c),d=>qU.nextTick(u,d||c))};async function a(c){let u=c!=null,d=typeof r.throw=="function";if(u&&d){let{value:E,done:f}=await r.throw(c);if(await E,f)return}if(typeof r.return=="function"){let{value:E}=await r.return();await E}}async function l(){for(;;){try{let{value:c,done:u}=i?await r.next():r.next();if(u)s.push(null);else{let d=c&&typeof c.then=="function"?await c:c;if(d===null)throw o=!1,new qie;if(s.push(d))continue;o=!1}}catch(c){s.destroy(c)}break}}return s}jU.exports=Xie});var cd=C((vBe,EB)=>{"use strict";var jr=it(),{ArrayPrototypeIndexOf:zie,NumberIsInteger:jie,NumberIsNaN:Kie,NumberParseInt:Jie,ObjectDefineProperties:BI,ObjectKeys:Qie,ObjectSetPrototypeOf:QU,Promise:ZU,SafeSet:Zie,SymbolAsyncDispose:ese,SymbolAsyncIterator:tse,Symbol:nse}=St();EB.exports=Ce;Ce.ReadableState=lp;var{EventEmitter:rse}=require("events"),{Stream:js,prependListener:ise}=tp(),{Buffer:LI}=require("buffer"),{addAbortSignal:sse}=id(),eB=rs(),Ge=er().debuglog("stream",t=>{Ge=t}),ose=UU(),Pl=Vo(),{getHighWaterMark:ase,getDefaultHighWaterMark:lse}=sd(),{aggregateTwoErrors:KU,codes:{ERR_INVALID_ARG_TYPE:cse,ERR_METHOD_NOT_IMPLEMENTED:use,ERR_OUT_OF_RANGE:dse,ERR_STREAM_PUSH_AFTER_EOF:fse,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:Ese},AbortError:hse}=kn(),{validateObject:pse}=yl(),Xo=nse("kPaused"),{StringDecoder:tB}=ad(),Tse=wI();QU(Ce.prototype,js.prototype);QU(Ce,js);var DI=()=>{},{errorOrDestroy:Ll}=Pl,Dl=1,Sse=2,nB=4,ld=8,rB=16,sp=32,op=64,iB=128,Rse=256,Ase=512,mse=1024,MI=2048,UI=4096,gse=8192,Ise=16384,_se=32768,sB=65536,Nse=1<<17,Ose=1<<18;function Zt(t){return{enumerable:!1,get(){return(this.state&t)!==0},set(e){e?this.state|=t:this.state&=~t}}}BI(lp.prototype,{objectMode:Zt(Dl),ended:Zt(Sse),endEmitted:Zt(nB),reading:Zt(ld),constructed:Zt(rB),sync:Zt(sp),needReadable:Zt(op),emittedReadable:Zt(iB),readableListening:Zt(Rse),resumeScheduled:Zt(Ase),errorEmitted:Zt(mse),emitClose:Zt(MI),autoDestroy:Zt(UI),destroyed:Zt(gse),closed:Zt(Ise),closeEmitted:Zt(_se),multiAwaitDrain:Zt(sB),readingMore:Zt(Nse),dataEmitted:Zt(Ose)});function lp(t,e,n){typeof n!="boolean"&&(n=e instanceof mi()),this.state=MI|UI|rB|sp,t&&t.objectMode&&(this.state|=Dl),n&&t&&t.readableObjectMode&&(this.state|=Dl),this.highWaterMark=t?ase(this,t,"readableHighWaterMark",n):lse(!1),this.buffer=new ose,this.length=0,this.pipes=[],this.flowing=null,this[Xo]=null,t&&t.emitClose===!1&&(this.state&=~MI),t&&t.autoDestroy===!1&&(this.state&=~UI),this.errored=null,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,t&&t.encoding&&(this.decoder=new tB(t.encoding),this.encoding=t.encoding)}function Ce(t){if(!(this instanceof Ce))return new Ce(t);let e=this instanceof mi();this._readableState=new lp(t,this,e),t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&!e&&sse(t.signal,this)),js.call(this,t),Pl.construct(this,()=>{this._readableState.needReadable&&ap(this,this._readableState)})}Ce.prototype.destroy=Pl.destroy;Ce.prototype._undestroy=Pl.undestroy;Ce.prototype._destroy=function(t,e){e(t)};Ce.prototype[rse.captureRejectionSymbol]=function(t){this.destroy(t)};Ce.prototype[ese]=function(){let t;return this.destroyed||(t=this.readableEnded?null:new hse,this.destroy(t)),new ZU((e,n)=>eB(this,r=>r&&r!==t?n(r):e(null)))};Ce.prototype.push=function(t,e){return oB(this,t,e,!1)};Ce.prototype.unshift=function(t,e){return oB(this,t,e,!0)};function oB(t,e,n,r){Ge("readableAddChunk",e);let i=t._readableState,s;if((i.state&Dl)===0&&(typeof e=="string"?(n=n||i.defaultEncoding,i.encoding!==n&&(r&&i.encoding?e=LI.from(e,n).toString(i.encoding):(e=LI.from(e,n),n=""))):e instanceof LI?n="":js._isUint8Array(e)?(e=js._uint8ArrayToBuffer(e),n=""):e!=null&&(s=new cse("chunk",["string","Buffer","Uint8Array"],e))),s)Ll(t,s);else if(e===null)i.state&=~ld,yse(t,i);else if((i.state&Dl)!==0||e&&e.length>0)if(r)if((i.state&nB)!==0)Ll(t,new Ese);else{if(i.destroyed||i.errored)return!1;PI(t,i,e,!0)}else if(i.ended)Ll(t,new fse);else{if(i.destroyed||i.errored)return!1;i.state&=~ld,i.decoder&&!n?(e=i.decoder.write(e),i.objectMode||e.length!==0?PI(t,i,e,!1):ap(t,i)):PI(t,i,e,!1)}else r||(i.state&=~ld,ap(t,i));return!i.ended&&(i.length<i.highWaterMark||i.length===0)}function PI(t,e,n,r){e.flowing&&e.length===0&&!e.sync&&t.listenerCount("data")>0?((e.state&sB)!==0?e.awaitDrainWriters.clear():e.awaitDrainWriters=null,e.dataEmitted=!0,t.emit("data",n)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),(e.state&op)!==0&&cp(t)),ap(t,e)}Ce.prototype.isPaused=function(){let t=this._readableState;return t[Xo]===!0||t.flowing===!1};Ce.prototype.setEncoding=function(t){let e=new tB(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;let n=this._readableState.buffer,r="";for(let i of n)r+=e.write(i);return n.clear(),r!==""&&n.push(r),this._readableState.length=r.length,this};var Cse=1073741824;function bse(t){if(t>Cse)throw new dse("size","<= 1GiB",t);return t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++,t}function JU(t,e){return t<=0||e.length===0&&e.ended?0:(e.state&Dl)!==0?1:Kie(t)?e.flowing&&e.length?e.buffer.first().length:e.length:t<=e.length?t:e.ended?e.length:0}Ce.prototype.read=function(t){Ge("read",t),t===void 0?t=NaN:jie(t)||(t=Jie(t,10));let e=this._readableState,n=t;if(t>e.highWaterMark&&(e.highWaterMark=bse(t)),t!==0&&(e.state&=~iB),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return Ge("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?xI(this):cp(this),null;if(t=JU(t,e),t===0&&e.ended)return e.length===0&&xI(this),null;let r=(e.state&op)!==0;if(Ge("need readable",r),(e.length===0||e.length-t<e.highWaterMark)&&(r=!0,Ge("length less than watermark",r)),e.ended||e.reading||e.destroyed||e.errored||!e.constructed)r=!1,Ge("reading, ended or constructing",r);else if(r){Ge("do read"),e.state|=ld|sp,e.length===0&&(e.state|=op);try{this._read(e.highWaterMark)}catch(s){Ll(this,s)}e.state&=~sp,e.reading||(t=JU(n,e))}let i;return t>0?i=dB(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.multiAwaitDrain?e.awaitDrainWriters.clear():e.awaitDrainWriters=null),e.length===0&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&xI(this)),i!==null&&!e.errorEmitted&&!e.closeEmitted&&(e.dataEmitted=!0,this.emit("data",i)),i};function yse(t,e){if(Ge("onEofChunk"),!e.ended){if(e.decoder){let n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,e.sync?cp(t):(e.needReadable=!1,e.emittedReadable=!0,aB(t))}}function cp(t){let e=t._readableState;Ge("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(Ge("emitReadable",e.flowing),e.emittedReadable=!0,jr.nextTick(aB,t))}function aB(t){let e=t._readableState;Ge("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&!e.errored&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,cB(t)}function ap(t,e){!e.readingMore&&e.constructed&&(e.readingMore=!0,jr.nextTick(wse,t,e))}function wse(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){let n=e.length;if(Ge("maybeReadMore read 0"),t.read(0),n===e.length)break}e.readingMore=!1}Ce.prototype._read=function(t){throw new use("_read()")};Ce.prototype.pipe=function(t,e){let n=this,r=this._readableState;r.pipes.length===1&&(r.multiAwaitDrain||(r.multiAwaitDrain=!0,r.awaitDrainWriters=new Zie(r.awaitDrainWriters?[r.awaitDrainWriters]:[]))),r.pipes.push(t),Ge("pipe count=%d opts=%j",r.pipes.length,e);let s=(!e||e.end!==!1)&&t!==jr.stdout&&t!==jr.stderr?a:T;r.endEmitted?jr.nextTick(s):n.once("end",s),t.on("unpipe",o);function o(S,A){Ge("onunpipe"),S===n&&A&&A.hasUnpiped===!1&&(A.hasUnpiped=!0,u())}function a(){Ge("onend"),t.end()}let l,c=!1;function u(){Ge("cleanup"),t.removeListener("close",p),t.removeListener("finish",h),l&&t.removeListener("drain",l),t.removeListener("error",f),t.removeListener("unpipe",o),n.removeListener("end",a),n.removeListener("end",T),n.removeListener("data",E),c=!0,l&&r.awaitDrainWriters&&(!t._writableState||t._writableState.needDrain)&&l()}function d(){c||(r.pipes.length===1&&r.pipes[0]===t?(Ge("false write response, pause",0),r.awaitDrainWriters=t,r.multiAwaitDrain=!1):r.pipes.length>1&&r.pipes.includes(t)&&(Ge("false write response, pause",r.awaitDrainWriters.size),r.awaitDrainWriters.add(t)),n.pause()),l||(l=Lse(n,t),t.on("drain",l))}n.on("data",E);function E(S){Ge("ondata");let A=t.write(S);Ge("dest.write",A),A===!1&&d()}function f(S){if(Ge("onerror",S),T(),t.removeListener("error",f),t.listenerCount("error")===0){let A=t._writableState||t._readableState;A&&!A.errorEmitted?Ll(t,S):t.emit("error",S)}}ise(t,"error",f);function p(){t.removeListener("finish",h),T()}t.once("close",p);function h(){Ge("onfinish"),t.removeListener("close",p),T()}t.once("finish",h);function T(){Ge("unpipe"),n.unpipe(t)}return t.emit("pipe",n),t.writableNeedDrain===!0?d():r.flowing||(Ge("pipe resume"),n.resume()),t};function Lse(t,e){return function(){let r=t._readableState;r.awaitDrainWriters===e?(Ge("pipeOnDrain",1),r.awaitDrainWriters=null):r.multiAwaitDrain&&(Ge("pipeOnDrain",r.awaitDrainWriters.size),r.awaitDrainWriters.delete(e)),(!r.awaitDrainWriters||r.awaitDrainWriters.size===0)&&t.listenerCount("data")&&t.resume()}}Ce.prototype.unpipe=function(t){let e=this._readableState,n={hasUnpiped:!1};if(e.pipes.length===0)return this;if(!t){let i=e.pipes;e.pipes=[],this.pause();for(let s=0;s<i.length;s++)i[s].emit("unpipe",this,{hasUnpiped:!1});return this}let r=zie(e.pipes,t);return r===-1?this:(e.pipes.splice(r,1),e.pipes.length===0&&this.pause(),t.emit("unpipe",this,n),this)};Ce.prototype.on=function(t,e){let n=js.prototype.on.call(this,t,e),r=this._readableState;return t==="data"?(r.readableListening=this.listenerCount("readable")>0,r.flowing!==!1&&this.resume()):t==="readable"&&!r.endEmitted&&!r.readableListening&&(r.readableListening=r.needReadable=!0,r.flowing=!1,r.emittedReadable=!1,Ge("on readable",r.length,r.reading),r.length?cp(this):r.reading||jr.nextTick(Dse,this)),n};Ce.prototype.addListener=Ce.prototype.on;Ce.prototype.removeListener=function(t,e){let n=js.prototype.removeListener.call(this,t,e);return t==="readable"&&jr.nextTick(lB,this),n};Ce.prototype.off=Ce.prototype.removeListener;Ce.prototype.removeAllListeners=function(t){let e=js.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&jr.nextTick(lB,this),e};function lB(t){let e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&e[Xo]===!1?e.flowing=!0:t.listenerCount("data")>0?t.resume():e.readableListening||(e.flowing=null)}function Dse(t){Ge("readable nexttick read 0"),t.read(0)}Ce.prototype.resume=function(){let t=this._readableState;return t.flowing||(Ge("resume"),t.flowing=!t.readableListening,Pse(this,t)),t[Xo]=!1,this};function Pse(t,e){e.resumeScheduled||(e.resumeScheduled=!0,jr.nextTick(xse,t,e))}function xse(t,e){Ge("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),cB(t),e.flowing&&!e.reading&&t.read(0)}Ce.prototype.pause=function(){return Ge("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Ge("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[Xo]=!0,this};function cB(t){let e=t._readableState;for(Ge("flow",e.flowing);e.flowing&&t.read()!==null;);}Ce.prototype.wrap=function(t){let e=!1;t.on("data",r=>{!this.push(r)&&t.pause&&(e=!0,t.pause())}),t.on("end",()=>{this.push(null)}),t.on("error",r=>{Ll(this,r)}),t.on("close",()=>{this.destroy()}),t.on("destroy",()=>{this.destroy()}),this._read=()=>{e&&t.resume&&(e=!1,t.resume())};let n=Qie(t);for(let r=1;r<n.length;r++){let i=n[r];this[i]===void 0&&typeof t[i]=="function"&&(this[i]=t[i].bind(t))}return this};Ce.prototype[tse]=function(){return uB(this)};Ce.prototype.iterator=function(t){return t!==void 0&&pse(t,"options"),uB(this,t)};function uB(t,e){typeof t.read!="function"&&(t=Ce.wrap(t,{objectMode:!0}));let n=vse(t,e);return n.stream=t,n}async function*vse(t,e){let n=DI;function r(o){this===t?(n(),n=DI):n=o}t.on("readable",r);let i,s=eB(t,{writable:!1},o=>{i=o?KU(i,o):null,n(),n=DI});try{for(;;){let o=t.destroyed?null:t.read();if(o!==null)yield o;else{if(i)throw i;if(i===null)return;await new ZU(r)}}}catch(o){throw i=KU(i,o),i}finally{(i||e?.destroyOnReturn!==!1)&&(i===void 0||t._readableState.autoDestroy)?Pl.destroyer(t,null):(t.off("readable",r),s())}}BI(Ce.prototype,{readable:{__proto__:null,get(){let t=this._readableState;return!!t&&t.readable!==!1&&!t.destroyed&&!t.errorEmitted&&!t.endEmitted},set(t){this._readableState&&(this._readableState.readable=!!t)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(t){this._readableState&&(this._readableState.destroyed=t)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}});BI(lp.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[Xo]!==!1},set(t){this[Xo]=!!t}}});Ce._fromList=dB;function dB(t,e){if(e.length===0)return null;let n;return e.objectMode?n=e.buffer.shift():!t||t>=e.length?(e.decoder?n=e.buffer.join(""):e.buffer.length===1?n=e.buffer.first():n=e.buffer.concat(e.length),e.buffer.clear()):n=e.buffer.consume(t,e.decoder),n}function xI(t){let e=t._readableState;Ge("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,jr.nextTick(Mse,e,t))}function Mse(t,e){if(Ge("endReadableNT",t.endEmitted,t.length),!t.errored&&!t.closeEmitted&&!t.endEmitted&&t.length===0){if(t.endEmitted=!0,e.emit("end"),e.writable&&e.allowHalfOpen===!1)jr.nextTick(Use,e);else if(t.autoDestroy){let n=e._writableState;(!n||n.autoDestroy&&(n.finished||n.writable===!1))&&e.destroy()}}}function Use(t){t.writable&&!t.writableEnded&&!t.destroyed&&t.end()}Ce.from=function(t,e){return Tse(Ce,t,e)};var vI;function fB(){return vI===void 0&&(vI={}),vI}Ce.fromWeb=function(t,e){return fB().newStreamReadableFromReadableStream(t,e)};Ce.toWeb=function(t,e){return fB().newReadableStreamFromStreamReadable(t,e)};Ce.wrap=function(t,e){var n,r;return new Ce({objectMode:(n=(r=t.readableObjectMode)!==null&&r!==void 0?r:t.objectMode)!==null&&n!==void 0?n:!0,...e,destroy(i,s){Pl.destroyer(t,i),s(i)}}).wrap(t)}});var hp=C((MBe,OB)=>{"use strict";var zo=it(),{ArrayPrototypeSlice:TB,Error:Bse,FunctionPrototypeSymbolHasInstance:SB,ObjectDefineProperty:RB,ObjectDefineProperties:Fse,ObjectSetPrototypeOf:AB,StringPrototypeToLowerCase:Hse,Symbol:Gse,SymbolHasInstance:$se}=St();OB.exports=Nt;Nt.WritableState=fd;var{EventEmitter:kse}=require("events"),ud=tp().Stream,{Buffer:up}=require("buffer"),Ep=Vo(),{addAbortSignal:Wse}=id(),{getHighWaterMark:Yse,getDefaultHighWaterMark:Vse}=sd(),{ERR_INVALID_ARG_TYPE:qse,ERR_METHOD_NOT_IMPLEMENTED:Xse,ERR_MULTIPLE_CALLBACK:mB,ERR_STREAM_CANNOT_PIPE:zse,ERR_STREAM_DESTROYED:dd,ERR_STREAM_ALREADY_FINISHED:jse,ERR_STREAM_NULL_VALUES:Kse,ERR_STREAM_WRITE_AFTER_END:Jse,ERR_UNKNOWN_ENCODING:gB}=kn().codes,{errorOrDestroy:xl}=Ep;AB(Nt.prototype,ud.prototype);AB(Nt,ud);function GI(){}var vl=Gse("kOnFinished");function fd(t,e,n){typeof n!="boolean"&&(n=e instanceof mi()),this.objectMode=!!(t&&t.objectMode),n&&(this.objectMode=this.objectMode||!!(t&&t.writableObjectMode)),this.highWaterMark=t?Yse(this,t,"writableHighWaterMark",n):Vse(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let r=!!(t&&t.decodeStrings===!1);this.decodeStrings=!r,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=Zse.bind(void 0,e),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,fp(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!t||t.emitClose!==!1,this.autoDestroy=!t||t.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[vl]=[]}function fp(t){t.buffered=[],t.bufferedIndex=0,t.allBuffers=!0,t.allNoop=!0}fd.prototype.getBuffer=function(){return TB(this.buffered,this.bufferedIndex)};RB(fd.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function Nt(t){let e=this instanceof mi();if(!e&&!SB(Nt,this))return new Nt(t);this._writableState=new fd(t,this,e),t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&Wse(t.signal,this)),ud.call(this,t),Ep.construct(this,()=>{let n=this._writableState;n.writing||kI(this,n),WI(this,n)})}RB(Nt,$se,{__proto__:null,value:function(t){return SB(this,t)?!0:this!==Nt?!1:t&&t._writableState instanceof fd}});Nt.prototype.pipe=function(){xl(this,new zse)};function IB(t,e,n,r){let i=t._writableState;if(typeof n=="function")r=n,n=i.defaultEncoding;else{if(!n)n=i.defaultEncoding;else if(n!=="buffer"&&!up.isEncoding(n))throw new gB(n);typeof r!="function"&&(r=GI)}if(e===null)throw new Kse;if(!i.objectMode)if(typeof e=="string")i.decodeStrings!==!1&&(e=up.from(e,n),n="buffer");else if(e instanceof up)n="buffer";else if(ud._isUint8Array(e))e=ud._uint8ArrayToBuffer(e),n="buffer";else throw new qse("chunk",["string","Buffer","Uint8Array"],e);let s;return i.ending?s=new Jse:i.destroyed&&(s=new dd("write")),s?(zo.nextTick(r,s),xl(t,s,!0),s):(i.pendingcb++,Qse(t,i,e,n,r))}Nt.prototype.write=function(t,e,n){return IB(this,t,e,n)===!0};Nt.prototype.cork=function(){this._writableState.corked++};Nt.prototype.uncork=function(){let t=this._writableState;t.corked&&(t.corked--,t.writing||kI(this,t))};Nt.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=Hse(e)),!up.isEncoding(e))throw new gB(e);return this._writableState.defaultEncoding=e,this};function Qse(t,e,n,r,i){let s=e.objectMode?1:n.length;e.length+=s;let o=e.length<e.highWaterMark;return o||(e.needDrain=!0),e.writing||e.corked||e.errored||!e.constructed?(e.buffered.push({chunk:n,encoding:r,callback:i}),e.allBuffers&&r!=="buffer"&&(e.allBuffers=!1),e.allNoop&&i!==GI&&(e.allNoop=!1)):(e.writelen=s,e.writecb=i,e.writing=!0,e.sync=!0,t._write(n,r,e.onwrite),e.sync=!1),o&&!e.errored&&!e.destroyed}function hB(t,e,n,r,i,s,o){e.writelen=r,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new dd("write")):n?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function pB(t,e,n,r){--e.pendingcb,r(n),$I(e),xl(t,n)}function Zse(t,e){let n=t._writableState,r=n.sync,i=n.writecb;if(typeof i!="function"){xl(t,new mB);return}n.writing=!1,n.writecb=null,n.length-=n.writelen,n.writelen=0,e?(e.stack,n.errored||(n.errored=e),t._readableState&&!t._readableState.errored&&(t._readableState.errored=e),r?zo.nextTick(pB,t,n,e,i):pB(t,n,e,i)):(n.buffered.length>n.bufferedIndex&&kI(t,n),r?n.afterWriteTickInfo!==null&&n.afterWriteTickInfo.cb===i?n.afterWriteTickInfo.count++:(n.afterWriteTickInfo={count:1,cb:i,stream:t,state:n},zo.nextTick(eoe,n.afterWriteTickInfo)):_B(t,n,1,i))}function eoe({stream:t,state:e,count:n,cb:r}){return e.afterWriteTickInfo=null,_B(t,e,n,r)}function _B(t,e,n,r){for(!e.ending&&!t.destroyed&&e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"));n-- >0;)e.pendingcb--,r();e.destroyed&&$I(e),WI(t,e)}function $I(t){if(t.writing)return;for(let i=t.bufferedIndex;i<t.buffered.length;++i){var e;let{chunk:s,callback:o}=t.buffered[i],a=t.objectMode?1:s.length;t.length-=a,o((e=t.errored)!==null&&e!==void 0?e:new dd("write"))}let n=t[vl].splice(0);for(let i=0;i<n.length;i++){var r;n[i]((r=t.errored)!==null&&r!==void 0?r:new dd("end"))}fp(t)}function kI(t,e){if(e.corked||e.bufferProcessing||e.destroyed||!e.constructed)return;let{buffered:n,bufferedIndex:r,objectMode:i}=e,s=n.length-r;if(!s)return;let o=r;if(e.bufferProcessing=!0,s>1&&t._writev){e.pendingcb-=s-1;let a=e.allNoop?GI:c=>{for(let u=o;u<n.length;++u)n[u].callback(c)},l=e.allNoop&&o===0?n:TB(n,o);l.allBuffers=e.allBuffers,hB(t,e,!0,e.length,l,"",a),fp(e)}else{do{let{chunk:a,encoding:l,callback:c}=n[o];n[o++]=null;let u=i?1:a.length;hB(t,e,!1,u,a,l,c)}while(o<n.length&&!e.writing);o===n.length?fp(e):o>256?(n.splice(0,o),e.bufferedIndex=0):e.bufferedIndex=o}e.bufferProcessing=!1}Nt.prototype._write=function(t,e,n){if(this._writev)this._writev([{chunk:t,encoding:e}],n);else throw new Xse("_write()")};Nt.prototype._writev=null;Nt.prototype.end=function(t,e,n){let r=this._writableState;typeof t=="function"?(n=t,t=null,e=null):typeof e=="function"&&(n=e,e=null);let i;if(t!=null){let s=IB(this,t,e);s instanceof Bse&&(i=s)}return r.corked&&(r.corked=1,this.uncork()),i||(!r.errored&&!r.ending?(r.ending=!0,WI(this,r,!0),r.ended=!0):r.finished?i=new jse("end"):r.destroyed&&(i=new dd("end"))),typeof n=="function"&&(i||r.finished?zo.nextTick(n,i):r[vl].push(n)),this};function dp(t){return t.ending&&!t.destroyed&&t.constructed&&t.length===0&&!t.errored&&t.buffered.length===0&&!t.finished&&!t.writing&&!t.errorEmitted&&!t.closeEmitted}function toe(t,e){let n=!1;function r(i){if(n){xl(t,i??mB());return}if(n=!0,e.pendingcb--,i){let s=e[vl].splice(0);for(let o=0;o<s.length;o++)s[o](i);xl(t,i,e.sync)}else dp(e)&&(e.prefinished=!0,t.emit("prefinish"),e.pendingcb++,zo.nextTick(HI,t,e))}e.sync=!0,e.pendingcb++;try{t._final(r)}catch(i){r(i)}e.sync=!1}function noe(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.finalCalled=!0,toe(t,e)):(e.prefinished=!0,t.emit("prefinish")))}function WI(t,e,n){dp(e)&&(noe(t,e),e.pendingcb===0&&(n?(e.pendingcb++,zo.nextTick((r,i)=>{dp(i)?HI(r,i):i.pendingcb--},t,e)):dp(e)&&(e.pendingcb++,HI(t,e))))}function HI(t,e){e.pendingcb--,e.finished=!0;let n=e[vl].splice(0);for(let r=0;r<n.length;r++)n[r]();if(t.emit("finish"),e.autoDestroy){let r=t._readableState;(!r||r.autoDestroy&&(r.endEmitted||r.readable===!1))&&t.destroy()}}Fse(Nt.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(t){this._writableState&&(this._writableState.destroyed=t)}},writable:{__proto__:null,get(){let t=this._writableState;return!!t&&t.writable!==!1&&!t.destroyed&&!t.errored&&!t.ending&&!t.ended},set(t){this._writableState&&(this._writableState.writable=!!t)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let t=this._writableState;return t?!t.destroyed&&!t.ending&&t.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var roe=Ep.destroy;Nt.prototype.destroy=function(t,e){let n=this._writableState;return!n.destroyed&&(n.bufferedIndex<n.buffered.length||n[vl].length)&&zo.nextTick($I,n),roe.call(this,t,e),this};Nt.prototype._undestroy=Ep.undestroy;Nt.prototype._destroy=function(t,e){e(t)};Nt.prototype[kse.captureRejectionSymbol]=function(t){this.destroy(t)};var FI;function NB(){return FI===void 0&&(FI={}),FI}Nt.fromWeb=function(t,e){return NB().newStreamWritableFromWritableStream(t,e)};Nt.toWeb=function(t){return NB().newWritableStreamFromStreamWritable(t)}});var GB=C((UBe,HB)=>{var YI=it(),ioe=require("buffer"),{isReadable:soe,isWritable:ooe,isIterable:CB,isNodeStream:aoe,isReadableNodeStream:bB,isWritableNodeStream:yB,isDuplexNodeStream:loe,isReadableStream:wB,isWritableStream:LB}=Si(),DB=rs(),{AbortError:BB,codes:{ERR_INVALID_ARG_TYPE:coe,ERR_INVALID_RETURN_VALUE:PB}}=kn(),{destroyer:Ul}=Vo(),uoe=mi(),FB=cd(),doe=hp(),{createDeferredPromise:xB}=er(),vB=wI(),MB=globalThis.Blob||ioe.Blob,foe=typeof MB<"u"?function(e){return e instanceof MB}:function(e){return!1},Eoe=globalThis.AbortController||kt().AbortController,{FunctionPrototypeCall:UB}=St(),Ks=class extends uoe{constructor(e){super(e),e?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),e?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};HB.exports=function t(e,n){if(loe(e))return e;if(bB(e))return Ml({readable:e});if(yB(e))return Ml({writable:e});if(aoe(e))return Ml({writable:!1,readable:!1});if(wB(e))return Ml({readable:FB.fromWeb(e)});if(LB(e))return Ml({writable:doe.fromWeb(e)});if(typeof e=="function"){let{value:i,write:s,final:o,destroy:a}=hoe(e);if(CB(i))return vB(Ks,i,{objectMode:!0,write:s,final:o,destroy:a});let l=i?.then;if(typeof l=="function"){let c,u=UB(l,i,d=>{if(d!=null)throw new PB("nully","body",d)},d=>{Ul(c,d)});return c=new Ks({objectMode:!0,readable:!1,write:s,final(d){o(async()=>{try{await u,YI.nextTick(d,null)}catch(E){YI.nextTick(d,E)}})},destroy:a})}throw new PB("Iterable, AsyncIterable or AsyncFunction",n,i)}if(foe(e))return t(e.arrayBuffer());if(CB(e))return vB(Ks,e,{objectMode:!0,writable:!1});if(wB(e?.readable)&&LB(e?.writable))return Ks.fromWeb(e);if(typeof e?.writable=="object"||typeof e?.readable=="object"){let i=e!=null&&e.readable?bB(e?.readable)?e?.readable:t(e.readable):void 0,s=e!=null&&e.writable?yB(e?.writable)?e?.writable:t(e.writable):void 0;return Ml({readable:i,writable:s})}let r=e?.then;if(typeof r=="function"){let i;return UB(r,e,s=>{s!=null&&i.push(s),i.push(null)},s=>{Ul(i,s)}),i=new Ks({objectMode:!0,writable:!1,read(){}})}throw new coe(n,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],e)};function hoe(t){let{promise:e,resolve:n}=xB(),r=new Eoe,i=r.signal;return{value:t((async function*(){for(;;){let o=e;e=null;let{chunk:a,done:l,cb:c}=await o;if(YI.nextTick(c),l)return;if(i.aborted)throw new BB(void 0,{cause:i.reason});({promise:e,resolve:n}=xB()),yield a}})(),{signal:i}),write(o,a,l){let c=n;n=null,c({chunk:o,done:!1,cb:l})},final(o){let a=n;n=null,a({done:!0,cb:o})},destroy(o,a){r.abort(),a(o)}}}function Ml(t){let e=t.readable&&typeof t.readable.read!="function"?FB.wrap(t.readable):t.readable,n=t.writable,r=!!soe(e),i=!!ooe(n),s,o,a,l,c;function u(d){let E=l;l=null,E?E(d):d&&c.destroy(d)}return c=new Ks({readableObjectMode:!!(e!=null&&e.readableObjectMode),writableObjectMode:!!(n!=null&&n.writableObjectMode),readable:r,writable:i}),i&&(DB(n,d=>{i=!1,d&&Ul(e,d),u(d)}),c._write=function(d,E,f){n.write(d,E)?f():s=f},c._final=function(d){n.end(),o=d},n.on("drain",function(){if(s){let d=s;s=null,d()}}),n.on("finish",function(){if(o){let d=o;o=null,d()}})),r&&(DB(e,d=>{r=!1,d&&Ul(e,d),u(d)}),e.on("readable",function(){if(a){let d=a;a=null,d()}}),e.on("end",function(){c.push(null)}),c._read=function(){for(;;){let d=e.read();if(d===null){a=c._read;return}if(!c.push(d))return}}),c._destroy=function(d,E){!d&&l!==null&&(d=new BB),a=null,s=null,o=null,l===null?E(d):(l=E,Ul(n,d),Ul(e,d))},c}});var mi=C((BBe,WB)=>{"use strict";var{ObjectDefineProperties:poe,ObjectGetOwnPropertyDescriptor:is,ObjectKeys:Toe,ObjectSetPrototypeOf:$B}=St();WB.exports=Kr;var XI=cd(),Pr=hp();$B(Kr.prototype,XI.prototype);$B(Kr,XI);{let t=Toe(Pr.prototype);for(let e=0;e<t.length;e++){let n=t[e];Kr.prototype[n]||(Kr.prototype[n]=Pr.prototype[n])}}function Kr(t){if(!(this instanceof Kr))return new Kr(t);XI.call(this,t),Pr.call(this,t),t?(this.allowHalfOpen=t.allowHalfOpen!==!1,t.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),t.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}poe(Kr.prototype,{writable:{__proto__:null,...is(Pr.prototype,"writable")},writableHighWaterMark:{__proto__:null,...is(Pr.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...is(Pr.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...is(Pr.prototype,"writableBuffer")},writableLength:{__proto__:null,...is(Pr.prototype,"writableLength")},writableFinished:{__proto__:null,...is(Pr.prototype,"writableFinished")},writableCorked:{__proto__:null,...is(Pr.prototype,"writableCorked")},writableEnded:{__proto__:null,...is(Pr.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...is(Pr.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(t){this._readableState&&this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}});var VI;function kB(){return VI===void 0&&(VI={}),VI}Kr.fromWeb=function(t,e){return kB().newStreamDuplexFromReadableWritablePair(t,e)};Kr.toWeb=function(t){return kB().newReadableWritablePairFromDuplex(t)};var qI;Kr.from=function(t){return qI||(qI=GB()),qI(t,"body")}});var KI=C((FBe,VB)=>{"use strict";var{ObjectSetPrototypeOf:YB,Symbol:Soe}=St();VB.exports=ss;var{ERR_METHOD_NOT_IMPLEMENTED:Roe}=kn().codes,jI=mi(),{getHighWaterMark:Aoe}=sd();YB(ss.prototype,jI.prototype);YB(ss,jI);var Ed=Soe("kCallback");function ss(t){if(!(this instanceof ss))return new ss(t);let e=t?Aoe(this,t,"readableHighWaterMark",!0):null;e===0&&(t={...t,highWaterMark:null,readableHighWaterMark:e,writableHighWaterMark:t.writableHighWaterMark||0}),jI.call(this,t),this._readableState.sync=!1,this[Ed]=null,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",moe)}function zI(t){typeof this._flush=="function"&&!this.destroyed?this._flush((e,n)=>{if(e){t?t(e):this.destroy(e);return}n!=null&&this.push(n),this.push(null),t&&t()}):(this.push(null),t&&t())}function moe(){this._final!==zI&&zI.call(this)}ss.prototype._final=zI;ss.prototype._transform=function(t,e,n){throw new Roe("_transform()")};ss.prototype._write=function(t,e,n){let r=this._readableState,i=this._writableState,s=r.length;this._transform(t,e,(o,a)=>{if(o){n(o);return}a!=null&&this.push(a),i.ended||s===r.length||r.length<r.highWaterMark?n():this[Ed]=n})};ss.prototype._read=function(){if(this[Ed]){let t=this[Ed];this[Ed]=null,t()}}});var QI=C((HBe,XB)=>{"use strict";var{ObjectSetPrototypeOf:qB}=St();XB.exports=Bl;var JI=KI();qB(Bl.prototype,JI.prototype);qB(Bl,JI);function Bl(t){if(!(this instanceof Bl))return new Bl(t);JI.call(this,t)}Bl.prototype._transform=function(t,e,n){n(null,t)}});var Rp=C((GBe,QB)=>{var hd=it(),{ArrayIsArray:goe,Promise:Ioe,SymbolAsyncIterator:_oe,SymbolDispose:Noe}=St(),Sp=rs(),{once:Ooe}=er(),Coe=Vo(),zB=mi(),{aggregateTwoErrors:boe,codes:{ERR_INVALID_ARG_TYPE:a_,ERR_INVALID_RETURN_VALUE:ZI,ERR_MISSING_ARGS:yoe,ERR_STREAM_DESTROYED:woe,ERR_STREAM_PREMATURE_CLOSE:Loe},AbortError:Doe}=kn(),{validateFunction:Poe,validateAbortSignal:xoe}=yl(),{isIterable:jo,isReadable:e_,isReadableNodeStream:Tp,isNodeStream:jB,isTransformStream:Fl,isWebStream:voe,isReadableStream:t_,isReadableFinished:Moe}=Si(),Uoe=globalThis.AbortController||kt().AbortController,n_,r_,i_;function KB(t,e,n){let r=!1;t.on("close",()=>{r=!0});let i=Sp(t,{readable:e,writable:n},s=>{r=!s});return{destroy:s=>{r||(r=!0,Coe.destroyer(t,s||new woe("pipe")))},cleanup:i}}function Boe(t){return Poe(t[t.length-1],"streams[stream.length - 1]"),t.pop()}function s_(t){if(jo(t))return t;if(Tp(t))return Foe(t);throw new a_("val",["Readable","Iterable","AsyncIterable"],t)}async function*Foe(t){r_||(r_=cd()),yield*r_.prototype[_oe].call(t)}async function pp(t,e,n,{end:r}){let i,s=null,o=c=>{if(c&&(i=c),s){let u=s;s=null,u()}},a=()=>new Ioe((c,u)=>{i?u(i):s=()=>{i?u(i):c()}});e.on("drain",o);let l=Sp(e,{readable:!1},o);try{e.writableNeedDrain&&await a();for await(let c of t)e.write(c)||await a();r&&(e.end(),await a()),n()}catch(c){n(i!==c?boe(i,c):c)}finally{l(),e.off("drain",o)}}async function o_(t,e,n,{end:r}){Fl(e)&&(e=e.writable);let i=e.getWriter();try{for await(let s of t)await i.ready,i.write(s).catch(()=>{});await i.ready,r&&await i.close(),n()}catch(s){try{await i.abort(s),n(s)}catch(o){n(o)}}}function Hoe(...t){return JB(t,Ooe(Boe(t)))}function JB(t,e,n){if(t.length===1&&goe(t[0])&&(t=t[0]),t.length<2)throw new yoe("streams");let r=new Uoe,i=r.signal,s=n?.signal,o=[];xoe(s,"options.signal");function a(){p(new Doe)}i_=i_||er().addAbortListener;let l;s&&(l=i_(s,a));let c,u,d=[],E=0;function f(R){p(R,--E===0)}function p(R,m){var N;if(R&&(!c||c.code==="ERR_STREAM_PREMATURE_CLOSE")&&(c=R),!(!c&&!m)){for(;d.length;)d.shift()(c);(N=l)===null||N===void 0||N[Noe](),r.abort(),m&&(c||o.forEach(L=>L()),hd.nextTick(e,c,u))}}let h;for(let R=0;R<t.length;R++){let m=t[R],N=R<t.length-1,L=R>0,I=N||n?.end!==!1,D=R===t.length-1;if(jB(m)){let g=function(w){w&&w.name!=="AbortError"&&w.code!=="ERR_STREAM_PREMATURE_CLOSE"&&f(w)};var A=g;if(I){let{destroy:w,cleanup:x}=KB(m,N,L);d.push(w),e_(m)&&D&&o.push(x)}m.on("error",g),e_(m)&&D&&o.push(()=>{m.removeListener("error",g)})}if(R===0)if(typeof m=="function"){if(h=m({signal:i}),!jo(h))throw new ZI("Iterable, AsyncIterable or Stream","source",h)}else jo(m)||Tp(m)||Fl(m)?h=m:h=zB.from(m);else if(typeof m=="function"){if(Fl(h)){var T;h=s_((T=h)===null||T===void 0?void 0:T.readable)}else h=s_(h);if(h=m(h,{signal:i}),N){if(!jo(h,!0))throw new ZI("AsyncIterable",`transform[${R-1}]`,h)}else{var S;n_||(n_=QI());let g=new n_({objectMode:!0}),w=(S=h)===null||S===void 0?void 0:S.then;if(typeof w=="function")E++,w.call(h,H=>{u=H,H!=null&&g.write(H),I&&g.end(),hd.nextTick(f)},H=>{g.destroy(H),hd.nextTick(f,H)});else if(jo(h,!0))E++,pp(h,g,f,{end:I});else if(t_(h)||Fl(h)){let H=h.readable||h;E++,pp(H,g,f,{end:I})}else throw new ZI("AsyncIterable or Promise","destination",h);h=g;let{destroy:x,cleanup:U}=KB(h,!1,!0);d.push(x),D&&o.push(U)}}else if(jB(m)){if(Tp(h)){E+=2;let g=Goe(h,m,f,{end:I});e_(m)&&D&&o.push(g)}else if(Fl(h)||t_(h)){let g=h.readable||h;E++,pp(g,m,f,{end:I})}else if(jo(h))E++,pp(h,m,f,{end:I});else throw new a_("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],h);h=m}else if(voe(m)){if(Tp(h))E++,o_(s_(h),m,f,{end:I});else if(t_(h)||jo(h))E++,o_(h,m,f,{end:I});else if(Fl(h))E++,o_(h.readable,m,f,{end:I});else throw new a_("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],h);h=m}else h=zB.from(m)}return(i!=null&&i.aborted||s!=null&&s.aborted)&&hd.nextTick(a),h}function Goe(t,e,n,{end:r}){let i=!1;if(e.on("close",()=>{i||n(new Loe)}),t.pipe(e,{end:!1}),r){let o=function(){i=!0,e.end()};var s=o;Moe(t)?hd.nextTick(o):t.once("end",o)}else n();return Sp(t,{readable:!0,writable:!1},o=>{let a=t._readableState;o&&o.code==="ERR_STREAM_PREMATURE_CLOSE"&&a&&a.ended&&!a.errored&&!a.errorEmitted?t.once("end",n).once("error",n):n(o)}),Sp(e,{readable:!1,writable:!0},n)}QB.exports={pipelineImpl:JB,pipeline:Hoe}});var c_=C(($Be,iF)=>{"use strict";var{pipeline:$oe}=Rp(),Ap=mi(),{destroyer:koe}=Vo(),{isNodeStream:mp,isReadable:ZB,isWritable:eF,isWebStream:l_,isTransformStream:Ko,isWritableStream:tF,isReadableStream:nF}=Si(),{AbortError:Woe,codes:{ERR_INVALID_ARG_VALUE:rF,ERR_MISSING_ARGS:Yoe}}=kn(),Voe=rs();iF.exports=function(...e){if(e.length===0)throw new Yoe("streams");if(e.length===1)return Ap.from(e[0]);let n=[...e];if(typeof e[0]=="function"&&(e[0]=Ap.from(e[0])),typeof e[e.length-1]=="function"){let f=e.length-1;e[f]=Ap.from(e[f])}for(let f=0;f<e.length;++f)if(!(!mp(e[f])&&!l_(e[f]))){if(f<e.length-1&&!(ZB(e[f])||nF(e[f])||Ko(e[f])))throw new rF(`streams[${f}]`,n[f],"must be readable");if(f>0&&!(eF(e[f])||tF(e[f])||Ko(e[f])))throw new rF(`streams[${f}]`,n[f],"must be writable")}let r,i,s,o,a;function l(f){let p=o;o=null,p?p(f):f?a.destroy(f):!E&&!d&&a.destroy()}let c=e[0],u=$oe(e,l),d=!!(eF(c)||tF(c)||Ko(c)),E=!!(ZB(u)||nF(u)||Ko(u));if(a=new Ap({writableObjectMode:!!(c!=null&&c.writableObjectMode),readableObjectMode:!!(u!=null&&u.readableObjectMode),writable:d,readable:E}),d){if(mp(c))a._write=function(p,h,T){c.write(p,h)?T():r=T},a._final=function(p){c.end(),i=p},c.on("drain",function(){if(r){let p=r;r=null,p()}});else if(l_(c)){let h=(Ko(c)?c.writable:c).getWriter();a._write=async function(T,S,A){try{await h.ready,h.write(T).catch(()=>{}),A()}catch(R){A(R)}},a._final=async function(T){try{await h.ready,h.close().catch(()=>{}),i=T}catch(S){T(S)}}}let f=Ko(u)?u.readable:u;Voe(f,()=>{if(i){let p=i;i=null,p()}})}if(E){if(mp(u))u.on("readable",function(){if(s){let f=s;s=null,f()}}),u.on("end",function(){a.push(null)}),a._read=function(){for(;;){let f=u.read();if(f===null){s=a._read;return}if(!a.push(f))return}};else if(l_(u)){let p=(Ko(u)?u.readable:u).getReader();a._read=async function(){for(;;)try{let{value:h,done:T}=await p.read();if(!a.push(h))return;if(T){a.push(null);return}}catch{return}}}}return a._destroy=function(f,p){!f&&o!==null&&(f=new Woe),s=null,r=null,i=null,o===null?p(f):(o=p,mp(u)&&koe(u,f))},a}});var hF=C((kBe,f_)=>{"use strict";var qoe=globalThis.AbortController||kt().AbortController,{codes:{ERR_INVALID_ARG_VALUE:Xoe,ERR_INVALID_ARG_TYPE:pd,ERR_MISSING_ARGS:zoe,ERR_OUT_OF_RANGE:joe},AbortError:gi}=kn(),{validateAbortSignal:Jo,validateInteger:sF,validateObject:Qo}=yl(),Koe=St().Symbol("kWeak"),Joe=St().Symbol("kResistStopPropagation"),{finished:Qoe}=rs(),Zoe=c_(),{addAbortSignalNoValidate:eae}=id(),{isWritable:tae,isNodeStream:nae}=Si(),{deprecate:rae}=er(),{ArrayPrototypePush:iae,Boolean:sae,MathFloor:oF,Number:oae,NumberIsNaN:aae,Promise:aF,PromiseReject:lF,PromiseResolve:lae,PromisePrototypeThen:cF,Symbol:dF}=St(),gp=dF("kEmpty"),uF=dF("kEof");function cae(t,e){if(e!=null&&Qo(e,"options"),e?.signal!=null&&Jo(e.signal,"options.signal"),nae(t)&&!tae(t))throw new Xoe("stream",t,"must be writable");let n=Zoe(this,t);return e!=null&&e.signal&&eae(e.signal,n),n}function Ip(t,e){if(typeof t!="function")throw new pd("fn",["Function","AsyncFunction"],t);e!=null&&Qo(e,"options"),e?.signal!=null&&Jo(e.signal,"options.signal");let n=1;e?.concurrency!=null&&(n=oF(e.concurrency));let r=n-1;return e?.highWaterMark!=null&&(r=oF(e.highWaterMark)),sF(n,"options.concurrency",1),sF(r,"options.highWaterMark",0),r+=n,async function*(){let s=er().AbortSignalAny([e?.signal].filter(sae)),o=this,a=[],l={signal:s},c,u,d=!1,E=0;function f(){d=!0,p()}function p(){E-=1,h()}function h(){u&&!d&&E<n&&a.length<r&&(u(),u=null)}async function T(){try{for await(let S of o){if(d)return;if(s.aborted)throw new gi;try{if(S=t(S,l),S===gp)continue;S=lae(S)}catch(A){S=lF(A)}E+=1,cF(S,p,f),a.push(S),c&&(c(),c=null),!d&&(a.length>=r||E>=n)&&await new aF(A=>{u=A})}a.push(uF)}catch(S){let A=lF(S);cF(A,p,f),a.push(A)}finally{d=!0,c&&(c(),c=null)}}T();try{for(;;){for(;a.length>0;){let S=await a[0];if(S===uF)return;if(s.aborted)throw new gi;S!==gp&&(yield S),a.shift(),h()}await new aF(S=>{c=S})}}finally{d=!0,u&&(u(),u=null)}}.call(this)}function uae(t=void 0){return t!=null&&Qo(t,"options"),t?.signal!=null&&Jo(t.signal,"options.signal"),async function*(){let n=0;for await(let i of this){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new gi({cause:t.signal.reason});yield[n++,i]}}.call(this)}async function fF(t,e=void 0){for await(let n of d_.call(this,t,e))return!0;return!1}async function dae(t,e=void 0){if(typeof t!="function")throw new pd("fn",["Function","AsyncFunction"],t);return!await fF.call(this,async(...n)=>!await t(...n),e)}async function fae(t,e){for await(let n of d_.call(this,t,e))return n}async function Eae(t,e){if(typeof t!="function")throw new pd("fn",["Function","AsyncFunction"],t);async function n(r,i){return await t(r,i),gp}for await(let r of Ip.call(this,n,e));}function d_(t,e){if(typeof t!="function")throw new pd("fn",["Function","AsyncFunction"],t);async function n(r,i){return await t(r,i)?r:gp}return Ip.call(this,n,e)}var u_=class extends zoe{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function hae(t,e,n){var r;if(typeof t!="function")throw new pd("reducer",["Function","AsyncFunction"],t);n!=null&&Qo(n,"options"),n?.signal!=null&&Jo(n.signal,"options.signal");let i=arguments.length>1;if(n!=null&&(r=n.signal)!==null&&r!==void 0&&r.aborted){let c=new gi(void 0,{cause:n.signal.reason});throw this.once("error",()=>{}),await Qoe(this.destroy(c)),c}let s=new qoe,o=s.signal;if(n!=null&&n.signal){let c={once:!0,[Koe]:this,[Joe]:!0};n.signal.addEventListener("abort",()=>s.abort(),c)}let a=!1;try{for await(let c of this){var l;if(a=!0,n!=null&&(l=n.signal)!==null&&l!==void 0&&l.aborted)throw new gi;i?e=await t(e,c,{signal:o}):(e=c,i=!0)}if(!a&&!i)throw new u_}finally{s.abort()}return e}async function pae(t){t!=null&&Qo(t,"options"),t?.signal!=null&&Jo(t.signal,"options.signal");let e=[];for await(let r of this){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new gi(void 0,{cause:t.signal.reason});iae(e,r)}return e}function Tae(t,e){let n=Ip.call(this,t,e);return async function*(){for await(let i of n)yield*i}.call(this)}function EF(t){if(t=oae(t),aae(t))return 0;if(t<0)throw new joe("number",">= 0",t);return t}function Sae(t,e=void 0){return e!=null&&Qo(e,"options"),e?.signal!=null&&Jo(e.signal,"options.signal"),t=EF(t),async function*(){var r;if(e!=null&&(r=e.signal)!==null&&r!==void 0&&r.aborted)throw new gi;for await(let s of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new gi;t--<=0&&(yield s)}}.call(this)}function Rae(t,e=void 0){return e!=null&&Qo(e,"options"),e?.signal!=null&&Jo(e.signal,"options.signal"),t=EF(t),async function*(){var r;if(e!=null&&(r=e.signal)!==null&&r!==void 0&&r.aborted)throw new gi;for await(let s of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new gi;if(t-- >0&&(yield s),t<=0)return}}.call(this)}f_.exports.streamReturningOperators={asIndexedPairs:rae(uae,"readable.asIndexedPairs will be removed in a future version."),drop:Sae,filter:d_,flatMap:Tae,map:Ip,take:Rae,compose:cae};f_.exports.promiseReturningOperators={every:dae,forEach:Eae,reduce:hae,toArray:pae,some:fF,find:fae}});var E_=C((WBe,pF)=>{"use strict";var{ArrayPrototypePop:Aae,Promise:mae}=St(),{isIterable:gae,isNodeStream:Iae,isWebStream:_ae}=Si(),{pipelineImpl:Nae}=Rp(),{finished:Oae}=rs();h_();function Cae(...t){return new mae((e,n)=>{let r,i,s=t[t.length-1];if(s&&typeof s=="object"&&!Iae(s)&&!gae(s)&&!_ae(s)){let o=Aae(t);r=o.signal,i=o.end}Nae(t,(o,a)=>{o?n(o):e(a)},{signal:r,end:i})})}pF.exports={finished:Oae,pipeline:Cae}});var h_=C((YBe,NF)=>{"use strict";var{Buffer:bae}=require("buffer"),{ObjectDefineProperty:os,ObjectKeys:RF,ReflectApply:AF}=St(),{promisify:{custom:mF}}=er(),{streamReturningOperators:TF,promiseReturningOperators:SF}=hF(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:gF}}=kn(),yae=c_(),{setDefaultHighWaterMark:wae,getDefaultHighWaterMark:Lae}=sd(),{pipeline:IF}=Rp(),{destroyer:Dae}=Vo(),_F=rs(),p_=E_(),Td=Si(),ft=NF.exports=tp().Stream;ft.isDestroyed=Td.isDestroyed;ft.isDisturbed=Td.isDisturbed;ft.isErrored=Td.isErrored;ft.isReadable=Td.isReadable;ft.isWritable=Td.isWritable;ft.Readable=cd();for(let t of RF(TF)){let n=function(...r){if(new.target)throw gF();return ft.Readable.from(AF(e,this,r))},e=TF[t];os(n,"name",{__proto__:null,value:e.name}),os(n,"length",{__proto__:null,value:e.length}),os(ft.Readable.prototype,t,{__proto__:null,value:n,enumerable:!1,configurable:!0,writable:!0})}for(let t of RF(SF)){let n=function(...r){if(new.target)throw gF();return AF(e,this,r)},e=SF[t];os(n,"name",{__proto__:null,value:e.name}),os(n,"length",{__proto__:null,value:e.length}),os(ft.Readable.prototype,t,{__proto__:null,value:n,enumerable:!1,configurable:!0,writable:!0})}ft.Writable=hp();ft.Duplex=mi();ft.Transform=KI();ft.PassThrough=QI();ft.pipeline=IF;var{addAbortSignal:Pae}=id();ft.addAbortSignal=Pae;ft.finished=_F;ft.destroy=Dae;ft.compose=yae;ft.setDefaultHighWaterMark=wae;ft.getDefaultHighWaterMark=Lae;os(ft,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return p_}});os(IF,mF,{__proto__:null,enumerable:!0,get(){return p_.pipeline}});os(_F,mF,{__proto__:null,enumerable:!0,get(){return p_.finished}});ft.Stream=ft;ft._isUint8Array=function(e){return e instanceof Uint8Array};ft._uint8ArrayToBuffer=function(e){return bae.from(e.buffer,e.byteOffset,e.byteLength)}});var OF=C((VBe,Me)=>{"use strict";var en=require("stream");if(en&&process.env.READABLE_STREAM==="disable"){let t=en.promises;Me.exports._uint8ArrayToBuffer=en._uint8ArrayToBuffer,Me.exports._isUint8Array=en._isUint8Array,Me.exports.isDisturbed=en.isDisturbed,Me.exports.isErrored=en.isErrored,Me.exports.isReadable=en.isReadable,Me.exports.Readable=en.Readable,Me.exports.Writable=en.Writable,Me.exports.Duplex=en.Duplex,Me.exports.Transform=en.Transform,Me.exports.PassThrough=en.PassThrough,Me.exports.addAbortSignal=en.addAbortSignal,Me.exports.finished=en.finished,Me.exports.destroy=en.destroy,Me.exports.pipeline=en.pipeline,Me.exports.compose=en.compose,Object.defineProperty(en,"promises",{configurable:!0,enumerable:!0,get(){return t}}),Me.exports.Stream=en.Stream}else{let t=h_(),e=E_(),n=t.Readable.destroy;Me.exports=t.Readable,Me.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,Me.exports._isUint8Array=t._isUint8Array,Me.exports.isDisturbed=t.isDisturbed,Me.exports.isErrored=t.isErrored,Me.exports.isReadable=t.isReadable,Me.exports.Readable=t.Readable,Me.exports.Writable=t.Writable,Me.exports.Duplex=t.Duplex,Me.exports.Transform=t.Transform,Me.exports.PassThrough=t.PassThrough,Me.exports.addAbortSignal=t.addAbortSignal,Me.exports.finished=t.finished,Me.exports.destroy=t.destroy,Me.exports.destroy=n,Me.exports.pipeline=t.pipeline,Me.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return e}}),Me.exports.Stream=t.Stream}Me.exports.default=Me.exports});var bF=C((qBe,CF)=>{function xae(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}CF.exports=xae});var DF=C((XBe,LF)=>{var yF=Gh(),vae=Jg(),Mae=Qg(),wF=yF?yF.isConcatSpreadable:void 0;function Uae(t){return Mae(t)||vae(t)||!!(wF&&t&&t[wF])}LF.exports=Uae});var _p=C((zBe,xF)=>{var Bae=bF(),Fae=DF();function PF(t,e,n,r,i){var s=-1,o=t.length;for(n||(n=Fae),i||(i=[]);++s<o;){var a=t[s];e>0&&n(a)?e>1?PF(a,e-1,n,r,i):Bae(i,a):r||(i[i.length]=a)}return i}xF.exports=PF});var MF=C((jBe,vF)=>{var Hae=_p();function Gae(t){var e=t==null?0:t.length;return e?Hae(t,1):[]}vF.exports=Gae});var Sd=C((KBe,UF)=>{var $ae=ju(),kae=$ae(Object,"create");UF.exports=kae});var HF=C((JBe,FF)=>{var BF=Sd();function Wae(){this.__data__=BF?BF(null):{},this.size=0}FF.exports=Wae});var $F=C((QBe,GF)=>{function Yae(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}GF.exports=Yae});var WF=C((ZBe,kF)=>{var Vae=Sd(),qae="__lodash_hash_undefined__",Xae=Object.prototype,zae=Xae.hasOwnProperty;function jae(t){var e=this.__data__;if(Vae){var n=e[t];return n===qae?void 0:n}return zae.call(e,t)?e[t]:void 0}kF.exports=jae});var VF=C((eFe,YF)=>{var Kae=Sd(),Jae=Object.prototype,Qae=Jae.hasOwnProperty;function Zae(t){var e=this.__data__;return Kae?e[t]!==void 0:Qae.call(e,t)}YF.exports=Zae});var XF=C((tFe,qF)=>{var ele=Sd(),tle="__lodash_hash_undefined__";function nle(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=ele&&e===void 0?tle:e,this}qF.exports=nle});var jF=C((nFe,zF)=>{var rle=HF(),ile=$F(),sle=WF(),ole=VF(),ale=XF();function Hl(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Hl.prototype.clear=rle;Hl.prototype.delete=ile;Hl.prototype.get=sle;Hl.prototype.has=ole;Hl.prototype.set=ale;zF.exports=Hl});var JF=C((rFe,KF)=>{function lle(){this.__data__=[],this.size=0}KF.exports=lle});var Rd=C((iFe,QF)=>{var cle=kh();function ule(t,e){for(var n=t.length;n--;)if(cle(t[n][0],e))return n;return-1}QF.exports=ule});var e1=C((sFe,ZF)=>{var dle=Rd(),fle=Array.prototype,Ele=fle.splice;function hle(t){var e=this.__data__,n=dle(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():Ele.call(e,n,1),--this.size,!0}ZF.exports=hle});var n1=C((oFe,t1)=>{var ple=Rd();function Tle(t){var e=this.__data__,n=ple(e,t);return n<0?void 0:e[n][1]}t1.exports=Tle});var i1=C((aFe,r1)=>{var Sle=Rd();function Rle(t){return Sle(this.__data__,t)>-1}r1.exports=Rle});var o1=C((lFe,s1)=>{var Ale=Rd();function mle(t,e){var n=this.__data__,r=Ale(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}s1.exports=mle});var l1=C((cFe,a1)=>{var gle=JF(),Ile=e1(),_le=n1(),Nle=i1(),Ole=o1();function Gl(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Gl.prototype.clear=gle;Gl.prototype.delete=Ile;Gl.prototype.get=_le;Gl.prototype.has=Nle;Gl.prototype.set=Ole;a1.exports=Gl});var u1=C((uFe,c1)=>{var Cle=ju(),ble=Il(),yle=Cle(ble,"Map");c1.exports=yle});var E1=C((dFe,f1)=>{var d1=jF(),wle=l1(),Lle=u1();function Dle(){this.size=0,this.__data__={hash:new d1,map:new(Lle||wle),string:new d1}}f1.exports=Dle});var p1=C((fFe,h1)=>{function Ple(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}h1.exports=Ple});var Ad=C((EFe,T1)=>{var xle=p1();function vle(t,e){var n=t.__data__;return xle(e)?n[typeof e=="string"?"string":"hash"]:n.map}T1.exports=vle});var R1=C((hFe,S1)=>{var Mle=Ad();function Ule(t){var e=Mle(this,t).delete(t);return this.size-=e?1:0,e}S1.exports=Ule});var m1=C((pFe,A1)=>{var Ble=Ad();function Fle(t){return Ble(this,t).get(t)}A1.exports=Fle});var I1=C((TFe,g1)=>{var Hle=Ad();function Gle(t){return Hle(this,t).has(t)}g1.exports=Gle});var N1=C((SFe,_1)=>{var $le=Ad();function kle(t,e){var n=$le(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}_1.exports=kle});var C1=C((RFe,O1)=>{var Wle=E1(),Yle=R1(),Vle=m1(),qle=I1(),Xle=N1();function $l(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}$l.prototype.clear=Wle;$l.prototype.delete=Yle;$l.prototype.get=Vle;$l.prototype.has=qle;$l.prototype.set=Xle;O1.exports=$l});var y1=C((AFe,b1)=>{var zle="__lodash_hash_undefined__";function jle(t){return this.__data__.set(t,zle),this}b1.exports=jle});var L1=C((mFe,w1)=>{function Kle(t){return this.__data__.has(t)}w1.exports=Kle});var T_=C((gFe,D1)=>{var Jle=C1(),Qle=y1(),Zle=L1();function Np(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new Jle;++e<n;)this.add(t[e])}Np.prototype.add=Np.prototype.push=Qle;Np.prototype.has=Zle;D1.exports=Np});var x1=C((IFe,P1)=>{function ece(t,e,n,r){for(var i=t.length,s=n+(r?1:-1);r?s--:++s<i;)if(e(t[s],s,t))return s;return-1}P1.exports=ece});var M1=C((_Fe,v1)=>{function tce(t){return t!==t}v1.exports=tce});var B1=C((NFe,U1)=>{function nce(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}U1.exports=nce});var H1=C((OFe,F1)=>{var rce=x1(),ice=M1(),sce=B1();function oce(t,e,n){return e===e?sce(t,e,n):rce(t,ice,n)}F1.exports=oce});var S_=C((CFe,G1)=>{var ace=H1();function lce(t,e){var n=t==null?0:t.length;return!!n&&ace(t,e,0)>-1}G1.exports=lce});var R_=C((bFe,$1)=>{function cce(t,e,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}$1.exports=cce});var W1=C((yFe,k1)=>{function uce(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}k1.exports=uce});var A_=C((wFe,Y1)=>{function dce(t,e){return t.has(e)}Y1.exports=dce});var q1=C((LFe,V1)=>{var fce=T_(),Ece=S_(),hce=R_(),pce=W1(),Tce=Zg(),Sce=A_(),Rce=200;function Ace(t,e,n,r){var i=-1,s=Ece,o=!0,a=t.length,l=[],c=e.length;if(!a)return l;n&&(e=pce(e,Tce(n))),r?(s=hce,o=!1):e.length>=Rce&&(s=Sce,o=!1,e=new fce(e));e:for(;++i<a;){var u=t[i],d=n==null?u:n(u);if(u=r||u!==0?u:0,o&&d===d){for(var E=c;E--;)if(e[E]===d)continue e;l.push(u)}else s(e,d,r)||l.push(u)}return l}V1.exports=Ace});var m_=C((DFe,X1)=>{var mce=Wh(),gce=_l();function Ice(t){return gce(t)&&mce(t)}X1.exports=Ice});var K1=C((PFe,j1)=>{var _ce=q1(),Nce=_p(),Oce=$h(),z1=m_(),Cce=Oce(function(t,e){return z1(t)?_ce(t,Nce(e,1,z1,!0)):[]});j1.exports=Cce});var Q1=C((xFe,J1)=>{var bce=ju(),yce=Il(),wce=bce(yce,"Set");J1.exports=wce});var eH=C((vFe,Z1)=>{function Lce(){}Z1.exports=Lce});var g_=C((MFe,tH)=>{function Dce(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}tH.exports=Dce});var rH=C((UFe,nH)=>{var I_=Q1(),Pce=eH(),xce=g_(),vce=1/0,Mce=I_&&1/xce(new I_([,-0]))[1]==vce?function(t){return new I_(t)}:Pce;nH.exports=Mce});var sH=C((BFe,iH)=>{var Uce=T_(),Bce=S_(),Fce=R_(),Hce=A_(),Gce=rH(),$ce=g_(),kce=200;function Wce(t,e,n){var r=-1,i=Bce,s=t.length,o=!0,a=[],l=a;if(n)o=!1,i=Fce;else if(s>=kce){var c=e?null:Gce(t);if(c)return $ce(c);o=!1,i=Hce,l=new Uce}else l=e?[]:a;e:for(;++r<s;){var u=t[r],d=e?e(u):u;if(u=n||u!==0?u:0,o&&d===d){for(var E=l.length;E--;)if(l[E]===d)continue e;e&&l.push(d),a.push(u)}else i(l,d,n)||(l!==a&&l.push(d),a.push(u))}return a}iH.exports=Wce});var aH=C((FFe,oH)=>{var Yce=_p(),Vce=$h(),qce=sH(),Xce=m_(),zce=Vce(function(t){return qce(Yce(t,1,Xce,!0))});oH.exports=zce});var cH=C((HFe,lH)=>{function jce(t,e){return function(n){return t(e(n))}}lH.exports=jce});var dH=C((GFe,uH)=>{var Kce=cH(),Jce=Kce(Object.getPrototypeOf,Object);uH.exports=Jce});var hH=C(($Fe,EH)=>{var Qce=Xu(),Zce=dH(),eue=_l(),tue="[object Object]",nue=Function.prototype,rue=Object.prototype,fH=nue.toString,iue=rue.hasOwnProperty,sue=fH.call(Object);function oue(t){if(!eue(t)||Qce(t)!=tue)return!1;var e=Zce(t);if(e===null)return!0;var n=iue.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&fH.call(n)==sue}EH.exports=oue});var IH=C((kFe,gH)=>{var pH=og();gH.exports=cue;var TH="\0SLASH"+Math.random()+"\0",SH="\0OPEN"+Math.random()+"\0",N_="\0CLOSE"+Math.random()+"\0",RH="\0COMMA"+Math.random()+"\0",AH="\0PERIOD"+Math.random()+"\0";function __(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function aue(t){return t.split("\\\\").join(TH).split("\\{").join(SH).split("\\}").join(N_).split("\\,").join(RH).split("\\.").join(AH)}function lue(t){return t.split(TH).join("\\").split(SH).join("{").split(N_).join("}").split(RH).join(",").split(AH).join(".")}function mH(t){if(!t)return[""];var e=[],n=pH("{","}",t);if(!n)return t.split(",");var r=n.pre,i=n.body,s=n.post,o=r.split(",");o[o.length-1]+="{"+i+"}";var a=mH(s);return s.length&&(o[o.length-1]+=a.shift(),o.push.apply(o,a)),e.push.apply(e,o),e}function cue(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),md(aue(t),!0).map(lue)):[]}function uue(t){return"{"+t+"}"}function due(t){return/^-?0\d/.test(t)}function fue(t,e){return t<=e}function Eue(t,e){return t>=e}function md(t,e){var n=[],r=pH("{","}",t);if(!r)return[t];var i=r.pre,s=r.post.length?md(r.post,!1):[""];if(/\$$/.test(r.pre))for(var o=0;o<s.length;o++){var a=i+"{"+r.body+"}"+s[o];n.push(a)}else{var l=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(r.body),c=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(r.body),u=l||c,d=r.body.indexOf(",")>=0;if(!u&&!d)return r.post.match(/,(?!,).*\}/)?(t=r.pre+"{"+r.body+N_+r.post,md(t)):[t];var E;if(u)E=r.body.split(/\.\./);else if(E=mH(r.body),E.length===1&&(E=md(E[0],!1).map(uue),E.length===1))return s.map(function(w){return r.pre+E[0]+w});var f;if(u){var p=__(E[0]),h=__(E[1]),T=Math.max(E[0].length,E[1].length),S=E.length==3?Math.abs(__(E[2])):1,A=fue,R=h<p;R&&(S*=-1,A=Eue);var m=E.some(due);f=[];for(var N=p;A(N,h);N+=S){var L;if(c)L=String.fromCharCode(N),L==="\\"&&(L="");else if(L=String(N),m){var I=T-L.length;if(I>0){var D=new Array(I+1).join("0");N<0?L="-"+D+L.slice(1):L=D+L}}f.push(L)}}else{f=[];for(var g=0;g<E.length;g++)f.push.apply(f,md(E[g],!1))}for(var g=0;g<f.length;g++)for(var o=0;o<s.length;o++){var a=i+f[g]+s[o];(!e||u||a)&&n.push(a)}}return n}});var _H=C(Op=>{"use strict";Object.defineProperty(Op,"__esModule",{value:!0});Op.assertValidPattern=void 0;var hue=1024*64,pue=t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>hue)throw new TypeError("pattern is too long")};Op.assertValidPattern=pue});var OH=C(Cp=>{"use strict";Object.defineProperty(Cp,"__esModule",{value:!0});Cp.parseClass=void 0;var Tue={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},gd=t=>t.replace(/[[\]\\-]/g,"\\$&"),Sue=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),NH=t=>t.join(""),Rue=(t,e)=>{let n=e;if(t.charAt(n)!=="[")throw new Error("not in a brace expression");let r=[],i=[],s=n+1,o=!1,a=!1,l=!1,c=!1,u=n,d="";e:for(;s<t.length;){let h=t.charAt(s);if((h==="!"||h==="^")&&s===n+1){c=!0,s++;continue}if(h==="]"&&o&&!l){u=s+1;break}if(o=!0,h==="\\"&&!l){l=!0,s++;continue}if(h==="["&&!l){for(let[T,[S,A,R]]of Object.entries(Tue))if(t.startsWith(T,s)){if(d)return["$.",!1,t.length-n,!0];s+=T.length,R?i.push(S):r.push(S),a=a||A;continue e}}if(l=!1,d){h>d?r.push(gd(d)+"-"+gd(h)):h===d&&r.push(gd(h)),d="",s++;continue}if(t.startsWith("-]",s+1)){r.push(gd(h+"-")),s+=2;continue}if(t.startsWith("-",s+1)){d=h,s+=2;continue}r.push(gd(h)),s++}if(u<s)return["",!1,0,!1];if(!r.length&&!i.length)return["$.",!1,t.length-n,!0];if(i.length===0&&r.length===1&&/^\\?.$/.test(r[0])&&!c){let h=r[0].length===2?r[0].slice(-1):r[0];return[Sue(h),!1,u-n,!1]}let E="["+(c?"^":"")+NH(r)+"]",f="["+(c?"":"^")+NH(i)+"]";return[r.length&&i.length?"("+E+"|"+f+")":r.length?E:f,a,u-n,!0]};Cp.parseClass=Rue});var yp=C(bp=>{"use strict";Object.defineProperty(bp,"__esModule",{value:!0});bp.unescape=void 0;var Aue=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1");bp.unescape=Aue});var b_=C(Dp=>{"use strict";Object.defineProperty(Dp,"__esModule",{value:!0});Dp.AST=void 0;var mue=OH(),wp=yp(),gue=new Set(["!","?","+","*","@"]),CH=t=>gue.has(t),Iue="(?!(?:^|/)\\.\\.?(?:$|/))",Lp="(?!\\.)",_ue=new Set(["[","."]),Nue=new Set(["..","."]),Oue=new Set("().*{}+?[]^$\\!"),Cue=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),C_="[^/]",bH=C_+"*?",yH=C_+"+?",O_=class t{type;#e;#t;#s=!1;#r=[];#o;#m;#c;#d=!1;#a;#l;#i=!1;constructor(e,n,r={}){this.type=e,e&&(this.#t=!0),this.#o=n,this.#e=this.#o?this.#o.#e:this,this.#a=this.#e===this?r:this.#e.#a,this.#c=this.#e===this?[]:this.#e.#c,e==="!"&&!this.#e.#d&&this.#c.push(this),this.#m=this.#o?this.#o.#r.length:0}get hasMagic(){if(this.#t!==void 0)return this.#t;for(let e of this.#r)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#t=!0;return this.#t}toString(){return this.#l!==void 0?this.#l:this.type?this.#l=this.type+"("+this.#r.map(e=>String(e)).join("|")+")":this.#l=this.#r.map(e=>String(e)).join("")}#T(){if(this!==this.#e)throw new Error("should only call on root");if(this.#d)return this;this.toString(),this.#d=!0;let e;for(;e=this.#c.pop();){if(e.type!=="!")continue;let n=e,r=n.#o;for(;r;){for(let i=n.#m+1;!r.type&&i<r.#r.length;i++)for(let s of e.#r){if(typeof s=="string")throw new Error("string part in extglob AST??");s.copyIn(r.#r[i])}n=r,r=n.#o}}return this}push(...e){for(let n of e)if(n!==""){if(typeof n!="string"&&!(n instanceof t&&n.#o===this))throw new Error("invalid part: "+n);this.#r.push(n)}}toJSON(){let e=this.type===null?this.#r.slice().map(n=>typeof n=="string"?n:n.toJSON()):[this.type,...this.#r.map(n=>n.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#e||this.#e.#d&&this.#o?.type==="!")&&e.push({}),e}isStart(){if(this.#e===this)return!0;if(!this.#o?.isStart())return!1;if(this.#m===0)return!0;let e=this.#o;for(let n=0;n<this.#m;n++){let r=e.#r[n];if(!(r instanceof t&&r.type==="!"))return!1}return!0}isEnd(){if(this.#e===this||this.#o?.type==="!")return!0;if(!this.#o?.isEnd())return!1;if(!this.type)return this.#o?.isEnd();let e=this.#o?this.#o.#r.length:0;return this.#m===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let n=new t(this.type,e);for(let r of this.#r)n.copyIn(r);return n}static#S(e,n,r,i){let s=!1,o=!1,a=-1,l=!1;if(n.type===null){let f=r,p="";for(;f<e.length;){let h=e.charAt(f++);if(s||h==="\\"){s=!s,p+=h;continue}if(o){f===a+1?(h==="^"||h==="!")&&(l=!0):h==="]"&&!(f===a+2&&l)&&(o=!1),p+=h;continue}else if(h==="["){o=!0,a=f,l=!1,p+=h;continue}if(!i.noext&&CH(h)&&e.charAt(f)==="("){n.push(p),p="";let T=new t(h,n);f=t.#S(e,T,f,i),n.push(T);continue}p+=h}return n.push(p),f}let c=r+1,u=new t(null,n),d=[],E="";for(;c<e.length;){let f=e.charAt(c++);if(s||f==="\\"){s=!s,E+=f;continue}if(o){c===a+1?(f==="^"||f==="!")&&(l=!0):f==="]"&&!(c===a+2&&l)&&(o=!1),E+=f;continue}else if(f==="["){o=!0,a=c,l=!1,E+=f;continue}if(CH(f)&&e.charAt(c)==="("){u.push(E),E="";let p=new t(f,u);u.push(p),c=t.#S(e,p,c,i);continue}if(f==="|"){u.push(E),E="",d.push(u),u=new t(null,n);continue}if(f===")")return E===""&&n.#r.length===0&&(n.#i=!0),u.push(E),E="",n.push(...d,u),c;E+=f}return n.type=null,n.#t=void 0,n.#r=[e.substring(r-1)],c}static fromGlob(e,n={}){let r=new t(null,void 0,n);return t.#S(e,r,0,n),r}toMMPattern(){if(this!==this.#e)return this.#e.toMMPattern();let e=this.toString(),[n,r,i,s]=this.toRegExpSource();if(!(i||this.#t||this.#a.nocase&&!this.#a.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return r;let a=(this.#a.nocase?"i":"")+(s?"u":"");return Object.assign(new RegExp(`^${n}$`,a),{_src:n,_glob:e})}get options(){return this.#a}toRegExpSource(e){let n=e??!!this.#a.dot;if(this.#e===this&&this.#T(),!this.type){let l=this.isStart()&&this.isEnd(),c=this.#r.map(f=>{let[p,h,T,S]=typeof f=="string"?t.#f(f,this.#t,l):f.toRegExpSource(e);return this.#t=this.#t||T,this.#s=this.#s||S,p}).join(""),u="";if(this.isStart()&&typeof this.#r[0]=="string"&&!(this.#r.length===1&&Nue.has(this.#r[0]))){let p=_ue,h=n&&p.has(c.charAt(0))||c.startsWith("\\.")&&p.has(c.charAt(2))||c.startsWith("\\.\\.")&&p.has(c.charAt(4)),T=!n&&!e&&p.has(c.charAt(0));u=h?Iue:T?Lp:""}let d="";return this.isEnd()&&this.#e.#d&&this.#o?.type==="!"&&(d="(?:$|\\/)"),[u+c+d,(0,wp.unescape)(c),this.#t=!!this.#t,this.#s]}let r=this.type==="*"||this.type==="+",i=this.type==="!"?"(?:(?!(?:":"(?:",s=this.#E(n);if(this.isStart()&&this.isEnd()&&!s&&this.type!=="!"){let l=this.toString();return this.#r=[l],this.type=null,this.#t=void 0,[l,(0,wp.unescape)(this.toString()),!1,!1]}let o=!r||e||n||!Lp?"":this.#E(!0);o===s&&(o=""),o&&(s=`(?:${s})(?:${o})*?`);let a="";if(this.type==="!"&&this.#i)a=(this.isStart()&&!n?Lp:"")+yH;else{let l=this.type==="!"?"))"+(this.isStart()&&!n&&!e?Lp:"")+bH+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&o?")":this.type==="*"&&o?")?":`)${this.type}`;a=i+s+l}return[a,(0,wp.unescape)(s),this.#t=!!this.#t,this.#s]}#E(e){return this.#r.map(n=>{if(typeof n=="string")throw new Error("string type in extglob ast??");let[r,i,s,o]=n.toRegExpSource(e);return this.#s=this.#s||o,r}).filter(n=>!(this.isStart()&&this.isEnd())||!!n).join("|")}static#f(e,n,r=!1){let i=!1,s="",o=!1;for(let a=0;a<e.length;a++){let l=e.charAt(a);if(i){i=!1,s+=(Oue.has(l)?"\\":"")+l;continue}if(l==="\\"){a===e.length-1?s+="\\\\":i=!0;continue}if(l==="["){let[c,u,d,E]=(0,mue.parseClass)(e,a);if(d){s+=c,o=o||u,a+=d-1,n=n||E;continue}}if(l==="*"){r&&e==="*"?s+=yH:s+=bH,n=!0;continue}if(l==="?"){s+=C_,n=!0;continue}s+=Cue(l)}return[s,(0,wp.unescape)(e),!!n,o]}};Dp.AST=O_});var y_=C(Pp=>{"use strict";Object.defineProperty(Pp,"__esModule",{value:!0});Pp.escape=void 0;var bue=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&");Pp.escape=bue});var Js=C(re=>{"use strict";var yue=re&&re.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(re,"__esModule",{value:!0});re.unescape=re.escape=re.AST=re.Minimatch=re.match=re.makeRe=re.braceExpand=re.defaults=re.filter=re.GLOBSTAR=re.sep=re.minimatch=void 0;var wue=yue(IH()),xp=_H(),DH=b_(),Lue=y_(),Due=yp(),Pue=(t,e,n={})=>((0,xp.assertValidPattern)(e),!n.nocomment&&e.charAt(0)==="#"?!1:new Zo(e,n).match(t));re.minimatch=Pue;var xue=/^\*+([^+@!?\*\[\(]*)$/,vue=t=>e=>!e.startsWith(".")&&e.endsWith(t),Mue=t=>e=>e.endsWith(t),Uue=t=>(t=t.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(t)),Bue=t=>(t=t.toLowerCase(),e=>e.toLowerCase().endsWith(t)),Fue=/^\*+\.\*+$/,Hue=t=>!t.startsWith(".")&&t.includes("."),Gue=t=>t!=="."&&t!==".."&&t.includes("."),$ue=/^\.\*+$/,kue=t=>t!=="."&&t!==".."&&t.startsWith("."),Wue=/^\*+$/,Yue=t=>t.length!==0&&!t.startsWith("."),Vue=t=>t.length!==0&&t!=="."&&t!=="..",que=/^\?+([^+@!?\*\[\(]*)?$/,Xue=([t,e=""])=>{let n=PH([t]);return e?(e=e.toLowerCase(),r=>n(r)&&r.toLowerCase().endsWith(e)):n},zue=([t,e=""])=>{let n=xH([t]);return e?(e=e.toLowerCase(),r=>n(r)&&r.toLowerCase().endsWith(e)):n},jue=([t,e=""])=>{let n=xH([t]);return e?r=>n(r)&&r.endsWith(e):n},Kue=([t,e=""])=>{let n=PH([t]);return e?r=>n(r)&&r.endsWith(e):n},PH=([t])=>{let e=t.length;return n=>n.length===e&&!n.startsWith(".")},xH=([t])=>{let e=t.length;return n=>n.length===e&&n!=="."&&n!==".."},vH=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",wH={win32:{sep:"\\"},posix:{sep:"/"}};re.sep=vH==="win32"?wH.win32.sep:wH.posix.sep;re.minimatch.sep=re.sep;re.GLOBSTAR=Symbol("globstar **");re.minimatch.GLOBSTAR=re.GLOBSTAR;var Jue="[^/]",Que=Jue+"*?",Zue="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",ede="(?:(?!(?:\\/|^)\\.).)*?",tde=(t,e={})=>n=>(0,re.minimatch)(n,t,e);re.filter=tde;re.minimatch.filter=re.filter;var xr=(t,e={})=>Object.assign({},t,e),nde=t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return re.minimatch;let e=re.minimatch;return Object.assign((r,i,s={})=>e(r,i,xr(t,s)),{Minimatch:class extends e.Minimatch{constructor(i,s={}){super(i,xr(t,s))}static defaults(i){return e.defaults(xr(t,i)).Minimatch}},AST:class extends e.AST{constructor(i,s,o={}){super(i,s,xr(t,o))}static fromGlob(i,s={}){return e.AST.fromGlob(i,xr(t,s))}},unescape:(r,i={})=>e.unescape(r,xr(t,i)),escape:(r,i={})=>e.escape(r,xr(t,i)),filter:(r,i={})=>e.filter(r,xr(t,i)),defaults:r=>e.defaults(xr(t,r)),makeRe:(r,i={})=>e.makeRe(r,xr(t,i)),braceExpand:(r,i={})=>e.braceExpand(r,xr(t,i)),match:(r,i,s={})=>e.match(r,i,xr(t,s)),sep:e.sep,GLOBSTAR:re.GLOBSTAR})};re.defaults=nde;re.minimatch.defaults=re.defaults;var rde=(t,e={})=>((0,xp.assertValidPattern)(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:(0,wue.default)(t));re.braceExpand=rde;re.minimatch.braceExpand=re.braceExpand;var ide=(t,e={})=>new Zo(t,e).makeRe();re.makeRe=ide;re.minimatch.makeRe=re.makeRe;var sde=(t,e,n={})=>{let r=new Zo(e,n);return t=t.filter(i=>r.match(i)),r.options.nonull&&!t.length&&t.push(e),t};re.match=sde;re.minimatch.match=re.match;var LH=/[?*]|[+@!]\(.*?\)|\[|\]/,ode=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Zo=class{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,n={}){(0,xp.assertValidPattern)(e),n=n||{},this.options=n,this.pattern=e,this.platform=n.platform||vH,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!n.windowsPathsNoEscape||n.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!n.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!n.nonegate,this.comment=!1,this.empty=!1,this.partial=!!n.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=n.windowsNoMagicRoot!==void 0?n.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let n of e)if(typeof n!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,n=this.options;if(!n.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],n.debug&&(this.debug=(...s)=>console.error(...s)),this.debug(this.pattern,this.globSet);let r=this.globSet.map(s=>this.slashSplit(s));this.globParts=this.preprocess(r),this.debug(this.pattern,this.globParts);let i=this.globParts.map((s,o,a)=>{if(this.isWindows&&this.windowsNoMagicRoot){let l=s[0]===""&&s[1]===""&&(s[2]==="?"||!LH.test(s[2]))&&!LH.test(s[3]),c=/^[a-z]:/i.test(s[0]);if(l)return[...s.slice(0,4),...s.slice(4).map(u=>this.parse(u))];if(c)return[s[0],...s.slice(1).map(u=>this.parse(u))]}return s.map(l=>this.parse(l))});if(this.debug(this.pattern,i),this.set=i.filter(s=>s.indexOf(!1)===-1),this.isWindows)for(let s=0;s<this.set.length;s++){let o=this.set[s];o[0]===""&&o[1]===""&&this.globParts[s][2]==="?"&&typeof o[3]=="string"&&/^[a-z]:$/i.test(o[3])&&(o[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let r=0;r<e.length;r++)for(let i=0;i<e[r].length;i++)e[r][i]==="**"&&(e[r][i]="*");let{optimizationLevel:n=1}=this.options;return n>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):n>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(n=>{let r=-1;for(;(r=n.indexOf("**",r+1))!==-1;){let i=r;for(;n[i+1]==="**";)i++;i!==r&&n.splice(r,i-r)}return n})}levelOneOptimize(e){return e.map(n=>(n=n.reduce((r,i)=>{let s=r[r.length-1];return i==="**"&&s==="**"?r:i===".."&&s&&s!==".."&&s!=="."&&s!=="**"?(r.pop(),r):(r.push(i),r)},[]),n.length===0?[""]:n))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let n=!1;do{if(n=!1,!this.preserveMultipleSlashes){for(let i=1;i<e.length-1;i++){let s=e[i];i===1&&s===""&&e[0]===""||(s==="."||s==="")&&(n=!0,e.splice(i,1),i--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(n=!0,e.pop())}let r=0;for(;(r=e.indexOf("..",r+1))!==-1;){let i=e[r-1];i&&i!=="."&&i!==".."&&i!=="**"&&(n=!0,e.splice(r-1,2),r-=2)}}while(n);return e.length===0?[""]:e}firstPhasePreProcess(e){let n=!1;do{n=!1;for(let r of e){let i=-1;for(;(i=r.indexOf("**",i+1))!==-1;){let o=i;for(;r[o+1]==="**";)o++;o>i&&r.splice(i+1,o-i);let a=r[i+1],l=r[i+2],c=r[i+3];if(a!==".."||!l||l==="."||l===".."||!c||c==="."||c==="..")continue;n=!0,r.splice(i,1);let u=r.slice(0);u[i]="**",e.push(u),i--}if(!this.preserveMultipleSlashes){for(let o=1;o<r.length-1;o++){let a=r[o];o===1&&a===""&&r[0]===""||(a==="."||a==="")&&(n=!0,r.splice(o,1),o--)}r[0]==="."&&r.length===2&&(r[1]==="."||r[1]==="")&&(n=!0,r.pop())}let s=0;for(;(s=r.indexOf("..",s+1))!==-1;){let o=r[s-1];if(o&&o!=="."&&o!==".."&&o!=="**"){n=!0;let l=s===1&&r[s+1]==="**"?["."]:[];r.splice(s-1,2,...l),r.length===0&&r.push(""),s-=2}}}}while(n);return e}secondPhasePreProcess(e){for(let n=0;n<e.length-1;n++)for(let r=n+1;r<e.length;r++){let i=this.partsMatch(e[n],e[r],!this.preserveMultipleSlashes);if(i){e[n]=[],e[r]=i;break}}return e.filter(n=>n.length)}partsMatch(e,n,r=!1){let i=0,s=0,o=[],a="";for(;i<e.length&&s<n.length;)if(e[i]===n[s])o.push(a==="b"?n[s]:e[i]),i++,s++;else if(r&&e[i]==="**"&&n[s]===e[i+1])o.push(e[i]),i++;else if(r&&n[s]==="**"&&e[i]===n[s+1])o.push(n[s]),s++;else if(e[i]==="*"&&n[s]&&(this.options.dot||!n[s].startsWith("."))&&n[s]!=="**"){if(a==="b")return!1;a="a",o.push(e[i]),i++,s++}else if(n[s]==="*"&&e[i]&&(this.options.dot||!e[i].startsWith("."))&&e[i]!=="**"){if(a==="a")return!1;a="b",o.push(n[s]),i++,s++}else return!1;return e.length===n.length&&o}parseNegate(){if(this.nonegate)return;let e=this.pattern,n=!1,r=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)n=!n,r++;r&&(this.pattern=e.slice(r)),this.negate=n}matchOne(e,n,r=!1){let i=this.options;if(this.isWindows){let h=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),T=!h&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),S=typeof n[0]=="string"&&/^[a-z]:$/i.test(n[0]),A=!S&&n[0]===""&&n[1]===""&&n[2]==="?"&&typeof n[3]=="string"&&/^[a-z]:$/i.test(n[3]),R=T?3:h?0:void 0,m=A?3:S?0:void 0;if(typeof R=="number"&&typeof m=="number"){let[N,L]=[e[R],n[m]];N.toLowerCase()===L.toLowerCase()&&(n[m]=N,m>R?n=n.slice(m):R>m&&(e=e.slice(R)))}}let{optimizationLevel:s=1}=this.options;s>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:n}),this.debug("matchOne",e.length,n.length);for(var o=0,a=0,l=e.length,c=n.length;o<l&&a<c;o++,a++){this.debug("matchOne loop");var u=n[a],d=e[o];if(this.debug(n,u,d),u===!1)return!1;if(u===re.GLOBSTAR){this.debug("GLOBSTAR",[n,u,d]);var E=o,f=a+1;if(f===c){for(this.debug("** at the end");o<l;o++)if(e[o]==="."||e[o]===".."||!i.dot&&e[o].charAt(0)===".")return!1;return!0}for(;E<l;){var p=e[E];if(this.debug(`
globstar while`,e,E,n,f,p),this.matchOne(e.slice(E),n.slice(f),r))return this.debug("globstar found match!",E,l,p),!0;if(p==="."||p===".."||!i.dot&&p.charAt(0)==="."){this.debug("dot detected!",e,E,n,f);break}this.debug("globstar swallow a segment, and continue"),E++}return!!(r&&(this.debug(`
>>> no match, partial?`,e,E,n,f),E===l))}let h;if(typeof u=="string"?(h=d===u,this.debug("string match",u,d,h)):(h=u.test(d),this.debug("pattern match",u,d,h)),!h)return!1}if(o===l&&a===c)return!0;if(o===l)return r;if(a===c)return o===l-1&&e[o]==="";throw new Error("wtf?")}braceExpand(){return(0,re.braceExpand)(this.pattern,this.options)}parse(e){(0,xp.assertValidPattern)(e);let n=this.options;if(e==="**")return re.GLOBSTAR;if(e==="")return"";let r,i=null;(r=e.match(Wue))?i=n.dot?Vue:Yue:(r=e.match(xue))?i=(n.nocase?n.dot?Bue:Uue:n.dot?Mue:vue)(r[1]):(r=e.match(que))?i=(n.nocase?n.dot?zue:Xue:n.dot?jue:Kue)(r):(r=e.match(Fue))?i=n.dot?Gue:Hue:(r=e.match($ue))&&(i=kue);let s=DH.AST.fromGlob(e,this.options).toMMPattern();return i&&typeof s=="object"&&Reflect.defineProperty(s,"test",{value:i}),s}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let n=this.options,r=n.noglobstar?Que:n.dot?Zue:ede,i=new Set(n.nocase?["i"]:[]),s=e.map(l=>{let c=l.map(u=>{if(u instanceof RegExp)for(let d of u.flags.split(""))i.add(d);return typeof u=="string"?ode(u):u===re.GLOBSTAR?re.GLOBSTAR:u._src});return c.forEach((u,d)=>{let E=c[d+1],f=c[d-1];u!==re.GLOBSTAR||f===re.GLOBSTAR||(f===void 0?E!==void 0&&E!==re.GLOBSTAR?c[d+1]="(?:\\/|"+r+"\\/)?"+E:c[d]=r:E===void 0?c[d-1]=f+"(?:\\/|"+r+")?":E!==re.GLOBSTAR&&(c[d-1]=f+"(?:\\/|\\/"+r+"\\/)"+E,c[d+1]=re.GLOBSTAR))}),c.filter(u=>u!==re.GLOBSTAR).join("/")}).join("|"),[o,a]=e.length>1?["(?:",")"]:["",""];s="^"+o+s+a+"$",this.negate&&(s="^(?!"+s+").+$");try{this.regexp=new RegExp(s,[...i].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,n=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&n)return!0;let r=this.options;this.isWindows&&(e=e.split("\\").join("/"));let i=this.slashSplit(e);this.debug(this.pattern,"split",i);let s=this.set;this.debug(this.pattern,"set",s);let o=i[i.length-1];if(!o)for(let a=i.length-2;!o&&a>=0;a--)o=i[a];for(let a=0;a<s.length;a++){let l=s[a],c=i;if(r.matchBase&&l.length===1&&(c=[o]),this.matchOne(c,l,n))return r.flipNegate?!0:!this.negate}return r.flipNegate?!1:this.negate}static defaults(e){return re.minimatch.defaults(e).Minimatch}};re.Minimatch=Zo;var ade=b_();Object.defineProperty(re,"AST",{enumerable:!0,get:function(){return ade.AST}});var lde=y_();Object.defineProperty(re,"escape",{enumerable:!0,get:function(){return lde.escape}});var cde=yp();Object.defineProperty(re,"unescape",{enumerable:!0,get:function(){return cde.unescape}});re.minimatch.AST=DH.AST;re.minimatch.Minimatch=Zo;re.minimatch.escape=Lue.escape;re.minimatch.unescape=Due.unescape});var HH=C(Mp=>{"use strict";Object.defineProperty(Mp,"__esModule",{value:!0});Mp.LRUCache=void 0;var kl=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,UH=new Set,w_=typeof process=="object"&&process?process:{},BH=(t,e,n,r)=>{typeof w_.emitWarning=="function"?w_.emitWarning(t,e,n,r):console.error(`[${n}] ${e}: ${t}`)},vp=globalThis.AbortController,MH=globalThis.AbortSignal;if(typeof vp>"u"){MH=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(r,i){this._onabort.push(i)}},vp=class{constructor(){e()}signal=new MH;abort(r){if(!this.signal.aborted){this.signal.reason=r,this.signal.aborted=!0;for(let i of this.signal._onabort)i(r);this.signal.onabort?.(r)}}};let t=w_.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",e=()=>{t&&(t=!1,BH("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}var ude=t=>!UH.has(t),Qs=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),FH=t=>Qs(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?Wl:null:null,Wl=class extends Array{constructor(e){super(e),this.fill(0)}},L_=class t{heap;length;static#e=!1;static create(e){let n=FH(e);if(!n)return[];t.#e=!0;let r=new t(e,n);return t.#e=!1,r}constructor(e,n){if(!t.#e)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new n(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},D_=class t{#e;#t;#s;#r;#o;#m;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#c;#d;#a;#l;#i;#T;#S;#E;#f;#_;#p;#N;#O;#A;#g;#I;#h;static unsafeExposeInternals(e){return{starts:e.#O,ttls:e.#A,sizes:e.#N,keyMap:e.#a,keyList:e.#l,valList:e.#i,next:e.#T,prev:e.#S,get head(){return e.#E},get tail(){return e.#f},free:e.#_,isBackgroundFetch:n=>e.#u(n),backgroundFetch:(n,r,i,s)=>e.#F(n,r,i,s),moveToTail:n=>e.#G(n),indexes:n=>e.#b(n),rindexes:n=>e.#y(n),isStale:n=>e.#R(n)}}get max(){return this.#e}get maxSize(){return this.#t}get calculatedSize(){return this.#d}get size(){return this.#c}get fetchMethod(){return this.#o}get memoMethod(){return this.#m}get dispose(){return this.#s}get disposeAfter(){return this.#r}constructor(e){let{max:n=0,ttl:r,ttlResolution:i=1,ttlAutopurge:s,updateAgeOnGet:o,updateAgeOnHas:a,allowStale:l,dispose:c,disposeAfter:u,noDisposeOnSet:d,noUpdateTTL:E,maxSize:f=0,maxEntrySize:p=0,sizeCalculation:h,fetchMethod:T,memoMethod:S,noDeleteOnFetchRejection:A,noDeleteOnStaleGet:R,allowStaleOnFetchRejection:m,allowStaleOnFetchAbort:N,ignoreFetchAbort:L}=e;if(n!==0&&!Qs(n))throw new TypeError("max option must be a nonnegative integer");let I=n?FH(n):Array;if(!I)throw new Error("invalid max value: "+n);if(this.#e=n,this.#t=f,this.maxEntrySize=p||this.#t,this.sizeCalculation=h,this.sizeCalculation){if(!this.#t&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(S!==void 0&&typeof S!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#m=S,T!==void 0&&typeof T!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#o=T,this.#I=!!T,this.#a=new Map,this.#l=new Array(n).fill(void 0),this.#i=new Array(n).fill(void 0),this.#T=new I(n),this.#S=new I(n),this.#E=0,this.#f=0,this.#_=L_.create(n),this.#c=0,this.#d=0,typeof c=="function"&&(this.#s=c),typeof u=="function"?(this.#r=u,this.#p=[]):(this.#r=void 0,this.#p=void 0),this.#g=!!this.#s,this.#h=!!this.#r,this.noDisposeOnSet=!!d,this.noUpdateTTL=!!E,this.noDeleteOnFetchRejection=!!A,this.allowStaleOnFetchRejection=!!m,this.allowStaleOnFetchAbort=!!N,this.ignoreFetchAbort=!!L,this.maxEntrySize!==0){if(this.#t!==0&&!Qs(this.#t))throw new TypeError("maxSize must be a positive integer if specified");if(!Qs(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#L()}if(this.allowStale=!!l,this.noDeleteOnStaleGet=!!R,this.updateAgeOnGet=!!o,this.updateAgeOnHas=!!a,this.ttlResolution=Qs(i)||i===0?i:1,this.ttlAutopurge=!!s,this.ttl=r||0,this.ttl){if(!Qs(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#w()}if(this.#e===0&&this.ttl===0&&this.#t===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#e&&!this.#t){let D="LRU_CACHE_UNBOUNDED";ude(D)&&(UH.add(D),BH("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",D,t))}}getRemainingTTL(e){return this.#a.has(e)?1/0:0}#w(){let e=new Wl(this.#e),n=new Wl(this.#e);this.#A=e,this.#O=n,this.#P=(s,o,a=kl.now())=>{if(n[s]=o!==0?a:0,e[s]=o,o!==0&&this.ttlAutopurge){let l=setTimeout(()=>{this.#R(s)&&this.#D(this.#l[s],"expire")},o+1);l.unref&&l.unref()}},this.#C=s=>{n[s]=e[s]!==0?kl.now():0},this.#n=(s,o)=>{if(e[o]){let a=e[o],l=n[o];if(!a||!l)return;s.ttl=a,s.start=l,s.now=r||i();let c=s.now-l;s.remainingTTL=a-c}};let r=0,i=()=>{let s=kl.now();if(this.ttlResolution>0){r=s;let o=setTimeout(()=>r=0,this.ttlResolution);o.unref&&o.unref()}return s};this.getRemainingTTL=s=>{let o=this.#a.get(s);if(o===void 0)return 0;let a=e[o],l=n[o];if(!a||!l)return 1/0;let c=(r||i())-l;return a-c},this.#R=s=>{let o=n[s],a=e[s];return!!a&&!!o&&(r||i())-o>a}}#C=()=>{};#n=()=>{};#P=()=>{};#R=()=>!1;#L(){let e=new Wl(this.#e);this.#d=0,this.#N=e,this.#x=n=>{this.#d-=e[n],e[n]=0},this.#M=(n,r,i,s)=>{if(this.#u(r))return 0;if(!Qs(i))if(s){if(typeof s!="function")throw new TypeError("sizeCalculation must be a function");if(i=s(r,n),!Qs(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i},this.#v=(n,r,i)=>{if(e[n]=r,this.#t){let s=this.#t-e[n];for(;this.#d>s;)this.#B(!0)}this.#d+=e[n],i&&(i.entrySize=r,i.totalCalculatedSize=this.#d)}}#x=e=>{};#v=(e,n,r)=>{};#M=(e,n,r,i)=>{if(r||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#b({allowStale:e=this.allowStale}={}){if(this.#c)for(let n=this.#f;!(!this.#U(n)||((e||!this.#R(n))&&(yield n),n===this.#E));)n=this.#S[n]}*#y({allowStale:e=this.allowStale}={}){if(this.#c)for(let n=this.#E;!(!this.#U(n)||((e||!this.#R(n))&&(yield n),n===this.#f));)n=this.#T[n]}#U(e){return e!==void 0&&this.#a.get(this.#l[e])===e}*entries(){for(let e of this.#b())this.#i[e]!==void 0&&this.#l[e]!==void 0&&!this.#u(this.#i[e])&&(yield[this.#l[e],this.#i[e]])}*rentries(){for(let e of this.#y())this.#i[e]!==void 0&&this.#l[e]!==void 0&&!this.#u(this.#i[e])&&(yield[this.#l[e],this.#i[e]])}*keys(){for(let e of this.#b()){let n=this.#l[e];n!==void 0&&!this.#u(this.#i[e])&&(yield n)}}*rkeys(){for(let e of this.#y()){let n=this.#l[e];n!==void 0&&!this.#u(this.#i[e])&&(yield n)}}*values(){for(let e of this.#b())this.#i[e]!==void 0&&!this.#u(this.#i[e])&&(yield this.#i[e])}*rvalues(){for(let e of this.#y())this.#i[e]!==void 0&&!this.#u(this.#i[e])&&(yield this.#i[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,n={}){for(let r of this.#b()){let i=this.#i[r],s=this.#u(i)?i.__staleWhileFetching:i;if(s!==void 0&&e(s,this.#l[r],this))return this.get(this.#l[r],n)}}forEach(e,n=this){for(let r of this.#b()){let i=this.#i[r],s=this.#u(i)?i.__staleWhileFetching:i;s!==void 0&&e.call(n,s,this.#l[r],this)}}rforEach(e,n=this){for(let r of this.#y()){let i=this.#i[r],s=this.#u(i)?i.__staleWhileFetching:i;s!==void 0&&e.call(n,s,this.#l[r],this)}}purgeStale(){let e=!1;for(let n of this.#y({allowStale:!0}))this.#R(n)&&(this.#D(this.#l[n],"expire"),e=!0);return e}info(e){let n=this.#a.get(e);if(n===void 0)return;let r=this.#i[n],i=this.#u(r)?r.__staleWhileFetching:r;if(i===void 0)return;let s={value:i};if(this.#A&&this.#O){let o=this.#A[n],a=this.#O[n];if(o&&a){let l=o-(kl.now()-a);s.ttl=l,s.start=Date.now()}}return this.#N&&(s.size=this.#N[n]),s}dump(){let e=[];for(let n of this.#b({allowStale:!0})){let r=this.#l[n],i=this.#i[n],s=this.#u(i)?i.__staleWhileFetching:i;if(s===void 0||r===void 0)continue;let o={value:s};if(this.#A&&this.#O){o.ttl=this.#A[n];let a=kl.now()-this.#O[n];o.start=Math.floor(Date.now()-a)}this.#N&&(o.size=this.#N[n]),e.unshift([r,o])}return e}load(e){this.clear();for(let[n,r]of e){if(r.start){let i=Date.now()-r.start;r.start=kl.now()-i}this.set(n,r.value,r)}}set(e,n,r={}){if(n===void 0)return this.delete(e),this;let{ttl:i=this.ttl,start:s,noDisposeOnSet:o=this.noDisposeOnSet,sizeCalculation:a=this.sizeCalculation,status:l}=r,{noUpdateTTL:c=this.noUpdateTTL}=r,u=this.#M(e,n,r.size||0,a);if(this.maxEntrySize&&u>this.maxEntrySize)return l&&(l.set="miss",l.maxEntrySizeExceeded=!0),this.#D(e,"set"),this;let d=this.#c===0?void 0:this.#a.get(e);if(d===void 0)d=this.#c===0?this.#f:this.#_.length!==0?this.#_.pop():this.#c===this.#e?this.#B(!1):this.#c,this.#l[d]=e,this.#i[d]=n,this.#a.set(e,d),this.#T[this.#f]=d,this.#S[d]=this.#f,this.#f=d,this.#c++,this.#v(d,u,l),l&&(l.set="add"),c=!1;else{this.#G(d);let E=this.#i[d];if(n!==E){if(this.#I&&this.#u(E)){E.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:f}=E;f!==void 0&&!o&&(this.#g&&this.#s?.(f,e,"set"),this.#h&&this.#p?.push([f,e,"set"]))}else o||(this.#g&&this.#s?.(E,e,"set"),this.#h&&this.#p?.push([E,e,"set"]));if(this.#x(d),this.#v(d,u,l),this.#i[d]=n,l){l.set="replace";let f=E&&this.#u(E)?E.__staleWhileFetching:E;f!==void 0&&(l.oldValue=f)}}else l&&(l.set="update")}if(i!==0&&!this.#A&&this.#w(),this.#A&&(c||this.#P(d,i,s),l&&this.#n(l,d)),!o&&this.#h&&this.#p){let E=this.#p,f;for(;f=E?.shift();)this.#r?.(...f)}return this}pop(){try{for(;this.#c;){let e=this.#i[this.#E];if(this.#B(!0),this.#u(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#h&&this.#p){let e=this.#p,n;for(;n=e?.shift();)this.#r?.(...n)}}}#B(e){let n=this.#E,r=this.#l[n],i=this.#i[n];return this.#I&&this.#u(i)?i.__abortController.abort(new Error("evicted")):(this.#g||this.#h)&&(this.#g&&this.#s?.(i,r,"evict"),this.#h&&this.#p?.push([i,r,"evict"])),this.#x(n),e&&(this.#l[n]=void 0,this.#i[n]=void 0,this.#_.push(n)),this.#c===1?(this.#E=this.#f=0,this.#_.length=0):this.#E=this.#T[n],this.#a.delete(r),this.#c--,n}has(e,n={}){let{updateAgeOnHas:r=this.updateAgeOnHas,status:i}=n,s=this.#a.get(e);if(s!==void 0){let o=this.#i[s];if(this.#u(o)&&o.__staleWhileFetching===void 0)return!1;if(this.#R(s))i&&(i.has="stale",this.#n(i,s));else return r&&this.#C(s),i&&(i.has="hit",this.#n(i,s)),!0}else i&&(i.has="miss");return!1}peek(e,n={}){let{allowStale:r=this.allowStale}=n,i=this.#a.get(e);if(i===void 0||!r&&this.#R(i))return;let s=this.#i[i];return this.#u(s)?s.__staleWhileFetching:s}#F(e,n,r,i){let s=n===void 0?void 0:this.#i[n];if(this.#u(s))return s;let o=new vp,{signal:a}=r;a?.addEventListener("abort",()=>o.abort(a.reason),{signal:o.signal});let l={signal:o.signal,options:r,context:i},c=(h,T=!1)=>{let{aborted:S}=o.signal,A=r.ignoreFetchAbort&&h!==void 0;if(r.status&&(S&&!T?(r.status.fetchAborted=!0,r.status.fetchError=o.signal.reason,A&&(r.status.fetchAbortIgnored=!0)):r.status.fetchResolved=!0),S&&!A&&!T)return d(o.signal.reason);let R=f;return this.#i[n]===f&&(h===void 0?R.__staleWhileFetching?this.#i[n]=R.__staleWhileFetching:this.#D(e,"fetch"):(r.status&&(r.status.fetchUpdated=!0),this.set(e,h,l.options))),h},u=h=>(r.status&&(r.status.fetchRejected=!0,r.status.fetchError=h),d(h)),d=h=>{let{aborted:T}=o.signal,S=T&&r.allowStaleOnFetchAbort,A=S||r.allowStaleOnFetchRejection,R=A||r.noDeleteOnFetchRejection,m=f;if(this.#i[n]===f&&(!R||m.__staleWhileFetching===void 0?this.#D(e,"fetch"):S||(this.#i[n]=m.__staleWhileFetching)),A)return r.status&&m.__staleWhileFetching!==void 0&&(r.status.returnedStale=!0),m.__staleWhileFetching;if(m.__returned===m)throw h},E=(h,T)=>{let S=this.#o?.(e,s,l);S&&S instanceof Promise&&S.then(A=>h(A===void 0?void 0:A),T),o.signal.addEventListener("abort",()=>{(!r.ignoreFetchAbort||r.allowStaleOnFetchAbort)&&(h(void 0),r.allowStaleOnFetchAbort&&(h=A=>c(A,!0)))})};r.status&&(r.status.fetchDispatched=!0);let f=new Promise(E).then(c,u),p=Object.assign(f,{__abortController:o,__staleWhileFetching:s,__returned:void 0});return n===void 0?(this.set(e,p,{...l.options,status:void 0}),n=this.#a.get(e)):this.#i[n]=p,p}#u(e){if(!this.#I)return!1;let n=e;return!!n&&n instanceof Promise&&n.hasOwnProperty("__staleWhileFetching")&&n.__abortController instanceof vp}async fetch(e,n={}){let{allowStale:r=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:l=0,sizeCalculation:c=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL,noDeleteOnFetchRejection:d=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:E=this.allowStaleOnFetchRejection,ignoreFetchAbort:f=this.ignoreFetchAbort,allowStaleOnFetchAbort:p=this.allowStaleOnFetchAbort,context:h,forceRefresh:T=!1,status:S,signal:A}=n;if(!this.#I)return S&&(S.fetch="get"),this.get(e,{allowStale:r,updateAgeOnGet:i,noDeleteOnStaleGet:s,status:S});let R={allowStale:r,updateAgeOnGet:i,noDeleteOnStaleGet:s,ttl:o,noDisposeOnSet:a,size:l,sizeCalculation:c,noUpdateTTL:u,noDeleteOnFetchRejection:d,allowStaleOnFetchRejection:E,allowStaleOnFetchAbort:p,ignoreFetchAbort:f,status:S,signal:A},m=this.#a.get(e);if(m===void 0){S&&(S.fetch="miss");let N=this.#F(e,m,R,h);return N.__returned=N}else{let N=this.#i[m];if(this.#u(N)){let w=r&&N.__staleWhileFetching!==void 0;return S&&(S.fetch="inflight",w&&(S.returnedStale=!0)),w?N.__staleWhileFetching:N.__returned=N}let L=this.#R(m);if(!T&&!L)return S&&(S.fetch="hit"),this.#G(m),i&&this.#C(m),S&&this.#n(S,m),N;let I=this.#F(e,m,R,h),g=I.__staleWhileFetching!==void 0&&r;return S&&(S.fetch=L?"stale":"refresh",g&&L&&(S.returnedStale=!0)),g?I.__staleWhileFetching:I.__returned=I}}async forceFetch(e,n={}){let r=await this.fetch(e,n);if(r===void 0)throw new Error("fetch() returned undefined");return r}memo(e,n={}){let r=this.#m;if(!r)throw new Error("no memoMethod provided to constructor");let{context:i,forceRefresh:s,...o}=n,a=this.get(e,o);if(!s&&a!==void 0)return a;let l=r(e,a,{options:o,context:i});return this.set(e,l,o),l}get(e,n={}){let{allowStale:r=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,status:o}=n,a=this.#a.get(e);if(a!==void 0){let l=this.#i[a],c=this.#u(l);return o&&this.#n(o,a),this.#R(a)?(o&&(o.get="stale"),c?(o&&r&&l.__staleWhileFetching!==void 0&&(o.returnedStale=!0),r?l.__staleWhileFetching:void 0):(s||this.#D(e,"expire"),o&&r&&(o.returnedStale=!0),r?l:void 0)):(o&&(o.get="hit"),c?l.__staleWhileFetching:(this.#G(a),i&&this.#C(a),l))}else o&&(o.get="miss")}#H(e,n){this.#S[n]=e,this.#T[e]=n}#G(e){e!==this.#f&&(e===this.#E?this.#E=this.#T[e]:this.#H(this.#S[e],this.#T[e]),this.#H(this.#f,e),this.#f=e)}delete(e){return this.#D(e,"delete")}#D(e,n){let r=!1;if(this.#c!==0){let i=this.#a.get(e);if(i!==void 0)if(r=!0,this.#c===1)this.#$(n);else{this.#x(i);let s=this.#i[i];if(this.#u(s)?s.__abortController.abort(new Error("deleted")):(this.#g||this.#h)&&(this.#g&&this.#s?.(s,e,n),this.#h&&this.#p?.push([s,e,n])),this.#a.delete(e),this.#l[i]=void 0,this.#i[i]=void 0,i===this.#f)this.#f=this.#S[i];else if(i===this.#E)this.#E=this.#T[i];else{let o=this.#S[i];this.#T[o]=this.#T[i];let a=this.#T[i];this.#S[a]=this.#S[i]}this.#c--,this.#_.push(i)}}if(this.#h&&this.#p?.length){let i=this.#p,s;for(;s=i?.shift();)this.#r?.(...s)}return r}clear(){return this.#$("delete")}#$(e){for(let n of this.#y({allowStale:!0})){let r=this.#i[n];if(this.#u(r))r.__abortController.abort(new Error("deleted"));else{let i=this.#l[n];this.#g&&this.#s?.(r,i,e),this.#h&&this.#p?.push([r,i,e])}}if(this.#a.clear(),this.#i.fill(void 0),this.#l.fill(void 0),this.#A&&this.#O&&(this.#A.fill(0),this.#O.fill(0)),this.#N&&this.#N.fill(0),this.#E=0,this.#f=0,this.#_.length=0,this.#d=0,this.#c=0,this.#h&&this.#p){let n=this.#p,r;for(;r=n?.shift();)this.#r?.(...r)}}};Mp.LRUCache=D_});var KH=C(jH=>{"use strict";var GH=typeof process=="object"&&process?process:{stdout:null,stderr:null},dde=require("events"),$H=require("stream"),fde=require("string_decoder"),kH=fde.StringDecoder,as=Symbol("EOF"),ls=Symbol("maybeEmitEnd"),Zs=Symbol("emittedEnd"),Up=Symbol("emittingEnd"),Id=Symbol("emittedError"),Bp=Symbol("closed"),WH=Symbol("read"),Fp=Symbol("flush"),YH=Symbol("flushChunk"),fr=Symbol("encoding"),cs=Symbol("decoder"),Hp=Symbol("flowing"),_d=Symbol("paused"),Yl=Symbol("resume"),Wt=Symbol("buffer"),Ii=Symbol("pipes"),Tn=Symbol("bufferLength"),P_=Symbol("bufferPush"),x_=Symbol("bufferShift"),Dn=Symbol("objectMode"),Yt=Symbol("destroyed"),v_=Symbol("error"),M_=Symbol("emitData"),VH=Symbol("emitEnd"),U_=Symbol("emitEnd2"),us=Symbol("async"),B_=Symbol("abort"),Gp=Symbol("aborted"),ea=Symbol("signal"),Nd=t=>Promise.resolve().then(t),zH=global._MP_NO_ITERATOR_SYMBOLS_!=="1",qH=zH&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),XH=zH&&Symbol.iterator||Symbol("iterator not implemented"),Ede=t=>t==="end"||t==="finish"||t==="prefinish",hde=t=>t instanceof ArrayBuffer||typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,pde=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),$p=class{constructor(e,n,r){this.src=e,this.dest=n,this.opts=r,this.ondrain=()=>e[Yl](),n.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},F_=class extends $p{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,n,r){super(e,n,r),this.proxyErrors=i=>n.emit("error",i),e.on("error",this.proxyErrors)}},H_=class t extends $H{constructor(e){super(),this[Hp]=!1,this[_d]=!1,this[Ii]=[],this[Wt]=[],this[Dn]=e&&e.objectMode||!1,this[Dn]?this[fr]=null:this[fr]=e&&e.encoding||null,this[fr]==="buffer"&&(this[fr]=null),this[us]=e&&!!e.async||!1,this[cs]=this[fr]?new kH(this[fr]):null,this[as]=!1,this[Zs]=!1,this[Up]=!1,this[Bp]=!1,this[Id]=null,this.writable=!0,this.readable=!0,this[Tn]=0,this[Yt]=!1,e&&e.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[Wt]}),e&&e.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[Ii]}),this[ea]=e&&e.signal,this[Gp]=!1,this[ea]&&(this[ea].addEventListener("abort",()=>this[B_]()),this[ea].aborted&&this[B_]())}get bufferLength(){return this[Tn]}get encoding(){return this[fr]}set encoding(e){if(this[Dn])throw new Error("cannot set encoding in objectMode");if(this[fr]&&e!==this[fr]&&(this[cs]&&this[cs].lastNeed||this[Tn]))throw new Error("cannot change encoding");this[fr]!==e&&(this[cs]=e?new kH(e):null,this[Wt].length&&(this[Wt]=this[Wt].map(n=>this[cs].write(n)))),this[fr]=e}setEncoding(e){this.encoding=e}get objectMode(){return this[Dn]}set objectMode(e){this[Dn]=this[Dn]||!!e}get async(){return this[us]}set async(e){this[us]=this[us]||!!e}[B_](){this[Gp]=!0,this.emit("abort",this[ea].reason),this.destroy(this[ea].reason)}get aborted(){return this[Gp]}set aborted(e){}write(e,n,r){if(this[Gp])return!1;if(this[as])throw new Error("write after end");if(this[Yt])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof n=="function"&&(r=n,n="utf8"),n||(n="utf8");let i=this[us]?Nd:s=>s();return!this[Dn]&&!Buffer.isBuffer(e)&&(pde(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):hde(e)?e=Buffer.from(e):typeof e!="string"&&(this.objectMode=!0)),this[Dn]?(this.flowing&&this[Tn]!==0&&this[Fp](!0),this.flowing?this.emit("data",e):this[P_](e),this[Tn]!==0&&this.emit("readable"),r&&i(r),this.flowing):e.length?(typeof e=="string"&&!(n===this[fr]&&!this[cs].lastNeed)&&(e=Buffer.from(e,n)),Buffer.isBuffer(e)&&this[fr]&&(e=this[cs].write(e)),this.flowing&&this[Tn]!==0&&this[Fp](!0),this.flowing?this.emit("data",e):this[P_](e),this[Tn]!==0&&this.emit("readable"),r&&i(r),this.flowing):(this[Tn]!==0&&this.emit("readable"),r&&i(r),this.flowing)}read(e){if(this[Yt])return null;if(this[Tn]===0||e===0||e>this[Tn])return this[ls](),null;this[Dn]&&(e=null),this[Wt].length>1&&!this[Dn]&&(this.encoding?this[Wt]=[this[Wt].join("")]:this[Wt]=[Buffer.concat(this[Wt],this[Tn])]);let n=this[WH](e||null,this[Wt][0]);return this[ls](),n}[WH](e,n){return e===n.length||e===null?this[x_]():(this[Wt][0]=n.slice(e),n=n.slice(0,e),this[Tn]-=e),this.emit("data",n),!this[Wt].length&&!this[as]&&this.emit("drain"),n}end(e,n,r){return typeof e=="function"&&(r=e,e=null),typeof n=="function"&&(r=n,n="utf8"),e&&this.write(e,n),r&&this.once("end",r),this[as]=!0,this.writable=!1,(this.flowing||!this[_d])&&this[ls](),this}[Yl](){this[Yt]||(this[_d]=!1,this[Hp]=!0,this.emit("resume"),this[Wt].length?this[Fp]():this[as]?this[ls]():this.emit("drain"))}resume(){return this[Yl]()}pause(){this[Hp]=!1,this[_d]=!0}get destroyed(){return this[Yt]}get flowing(){return this[Hp]}get paused(){return this[_d]}[P_](e){this[Dn]?this[Tn]+=1:this[Tn]+=e.length,this[Wt].push(e)}[x_](){return this[Dn]?this[Tn]-=1:this[Tn]-=this[Wt][0].length,this[Wt].shift()}[Fp](e){do;while(this[YH](this[x_]())&&this[Wt].length);!e&&!this[Wt].length&&!this[as]&&this.emit("drain")}[YH](e){return this.emit("data",e),this.flowing}pipe(e,n){if(this[Yt])return;let r=this[Zs];return n=n||{},e===GH.stdout||e===GH.stderr?n.end=!1:n.end=n.end!==!1,n.proxyErrors=!!n.proxyErrors,r?n.end&&e.end():(this[Ii].push(n.proxyErrors?new F_(this,e,n):new $p(this,e,n)),this[us]?Nd(()=>this[Yl]()):this[Yl]()),e}unpipe(e){let n=this[Ii].find(r=>r.dest===e);n&&(this[Ii].splice(this[Ii].indexOf(n),1),n.unpipe())}addListener(e,n){return this.on(e,n)}on(e,n){let r=super.on(e,n);return e==="data"&&!this[Ii].length&&!this.flowing?this[Yl]():e==="readable"&&this[Tn]!==0?super.emit("readable"):Ede(e)&&this[Zs]?(super.emit(e),this.removeAllListeners(e)):e==="error"&&this[Id]&&(this[us]?Nd(()=>n.call(this,this[Id])):n.call(this,this[Id])),r}get emittedEnd(){return this[Zs]}[ls](){!this[Up]&&!this[Zs]&&!this[Yt]&&this[Wt].length===0&&this[as]&&(this[Up]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[Bp]&&this.emit("close"),this[Up]=!1)}emit(e,n,...r){if(e!=="error"&&e!=="close"&&e!==Yt&&this[Yt])return;if(e==="data")return!this[Dn]&&!n?!1:this[us]?Nd(()=>this[M_](n)):this[M_](n);if(e==="end")return this[VH]();if(e==="close"){if(this[Bp]=!0,!this[Zs]&&!this[Yt])return;let s=super.emit("close");return this.removeAllListeners("close"),s}else if(e==="error"){this[Id]=n,super.emit(v_,n);let s=!this[ea]||this.listeners("error").length?super.emit("error",n):!1;return this[ls](),s}else if(e==="resume"){let s=super.emit("resume");return this[ls](),s}else if(e==="finish"||e==="prefinish"){let s=super.emit(e);return this.removeAllListeners(e),s}let i=super.emit(e,n,...r);return this[ls](),i}[M_](e){for(let r of this[Ii])r.dest.write(e)===!1&&this.pause();let n=super.emit("data",e);return this[ls](),n}[VH](){this[Zs]||(this[Zs]=!0,this.readable=!1,this[us]?Nd(()=>this[U_]()):this[U_]())}[U_](){if(this[cs]){let n=this[cs].end();if(n){for(let r of this[Ii])r.dest.write(n);super.emit("data",n)}}for(let n of this[Ii])n.end();let e=super.emit("end");return this.removeAllListeners("end"),e}collect(){let e=[];this[Dn]||(e.dataLength=0);let n=this.promise();return this.on("data",r=>{e.push(r),this[Dn]||(e.dataLength+=r.length)}),n.then(()=>e)}concat(){return this[Dn]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then(e=>this[Dn]?Promise.reject(new Error("cannot concat in objectMode")):this[fr]?e.join(""):Buffer.concat(e,e.dataLength))}promise(){return new Promise((e,n)=>{this.on(Yt,()=>n(new Error("stream destroyed"))),this.on("error",r=>n(r)),this.on("end",()=>e())})}[qH](){let e=!1,n=()=>(this.pause(),e=!0,Promise.resolve({done:!0}));return{next:()=>{if(e)return n();let i=this.read();if(i!==null)return Promise.resolve({done:!1,value:i});if(this[as])return n();let s=null,o=null,a=d=>{this.removeListener("data",l),this.removeListener("end",c),this.removeListener(Yt,u),n(),o(d)},l=d=>{this.removeListener("error",a),this.removeListener("end",c),this.removeListener(Yt,u),this.pause(),s({value:d,done:!!this[as]})},c=()=>{this.removeListener("error",a),this.removeListener("data",l),this.removeListener(Yt,u),n(),s({done:!0})},u=()=>a(new Error("stream destroyed"));return new Promise((d,E)=>{o=E,s=d,this.once(Yt,u),this.once("error",a),this.once("end",c),this.once("data",l)})},throw:n,return:n,[qH](){return this}}}[XH](){let e=!1,n=()=>(this.pause(),this.removeListener(v_,n),this.removeListener(Yt,n),this.removeListener("end",n),e=!0,{done:!0}),r=()=>{if(e)return n();let i=this.read();return i===null?n():{value:i}};return this.once("end",n),this.once(v_,n),this.once(Yt,n),{next:r,throw:n,return:n,[XH](){return this}}}destroy(e){return this[Yt]?(e?this.emit("error",e):this.emit(Yt),this):(this[Yt]=!0,this[Wt].length=0,this[Tn]=0,typeof this.close=="function"&&!this[Bp]&&this.close(),e?this.emit("error",e):this.emit(Yt),this)}static isStream(e){return!!e&&(e instanceof t||e instanceof $H||e instanceof dde&&(typeof e.pipe=="function"||typeof e.write=="function"&&typeof e.end=="function"))}};jH.Minipass=H_});var dG=C(rt=>{"use strict";var Tde=rt&&rt.__createBinding||(Object.create?(function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}):(function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]})),Sde=rt&&rt.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),Rde=rt&&rt.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&Tde(e,t,n);return Sde(e,t),e};Object.defineProperty(rt,"__esModule",{value:!0});rt.PathScurry=rt.Path=rt.PathScurryDarwin=rt.PathScurryPosix=rt.PathScurryWin32=rt.PathScurryBase=rt.PathPosix=rt.PathWin32=rt.PathBase=rt.ChildrenCache=rt.ResolveCache=void 0;var nG=HH(),qp=require("node:path"),Ade=require("node:url"),Cd=require("fs"),mde=Rde(require("node:fs")),gde=Cd.realpathSync.native,kp=require("node:fs/promises"),JH=KH(),bd={lstatSync:Cd.lstatSync,readdir:Cd.readdir,readdirSync:Cd.readdirSync,readlinkSync:Cd.readlinkSync,realpathSync:gde,promises:{lstat:kp.lstat,readdir:kp.readdir,readlink:kp.readlink,realpath:kp.realpath}},rG=t=>!t||t===bd||t===mde?bd:{...bd,...t,promises:{...bd.promises,...t.promises||{}}},iG=/^\\\\\?\\([a-z]:)\\?$/i,Ide=t=>t.replace(/\//g,"\\").replace(iG,"$1\\"),_de=/[\\\/]/,Mr=0,sG=1,oG=2,_i=4,aG=6,lG=8,ta=10,cG=12,vr=15,Od=~vr,G_=16,QH=32,yd=64,Jr=128,Wp=256,Vp=512,ZH=yd|Jr|Vp,Nde=1023,$_=t=>t.isFile()?lG:t.isDirectory()?_i:t.isSymbolicLink()?ta:t.isCharacterDevice()?oG:t.isBlockDevice()?aG:t.isSocket()?cG:t.isFIFO()?sG:Mr,eG=new Map,wd=t=>{let e=eG.get(t);if(e)return e;let n=t.normalize("NFKD");return eG.set(t,n),n},tG=new Map,Yp=t=>{let e=tG.get(t);if(e)return e;let n=wd(t.toLowerCase());return tG.set(t,n),n},Ld=class extends nG.LRUCache{constructor(){super({max:256})}};rt.ResolveCache=Ld;var Xp=class extends nG.LRUCache{constructor(e=16*1024){super({maxSize:e,sizeCalculation:n=>n.length+1})}};rt.ChildrenCache=Xp;var uG=Symbol("PathScurry setAsCwd"),Pn=class{name;root;roots;parent;nocase;isCWD=!1;#e;#t;get dev(){return this.#t}#s;get mode(){return this.#s}#r;get nlink(){return this.#r}#o;get uid(){return this.#o}#m;get gid(){return this.#m}#c;get rdev(){return this.#c}#d;get blksize(){return this.#d}#a;get ino(){return this.#a}#l;get size(){return this.#l}#i;get blocks(){return this.#i}#T;get atimeMs(){return this.#T}#S;get mtimeMs(){return this.#S}#E;get ctimeMs(){return this.#E}#f;get birthtimeMs(){return this.#f}#_;get atime(){return this.#_}#p;get mtime(){return this.#p}#N;get ctime(){return this.#N}#O;get birthtime(){return this.#O}#A;#g;#I;#h;#w;#C;#n;#P;#R;#L;get parentPath(){return(this.parent||this).fullpath()}get path(){return this.parentPath}constructor(e,n=Mr,r,i,s,o,a){this.name=e,this.#A=s?Yp(e):wd(e),this.#n=n&Nde,this.nocase=s,this.roots=i,this.root=r||this,this.#P=o,this.#I=a.fullpath,this.#w=a.relative,this.#C=a.relativePosix,this.parent=a.parent,this.parent?this.#e=this.parent.#e:this.#e=rG(a.fs)}depth(){return this.#g!==void 0?this.#g:this.parent?this.#g=this.parent.depth()+1:this.#g=0}childrenCache(){return this.#P}resolve(e){if(!e)return this;let n=this.getRootString(e),i=e.substring(n.length).split(this.splitSep);return n?this.getRoot(n).#x(i):this.#x(i)}#x(e){let n=this;for(let r of e)n=n.child(r);return n}children(){let e=this.#P.get(this);if(e)return e;let n=Object.assign([],{provisional:0});return this.#P.set(this,n),this.#n&=~G_,n}child(e,n){if(e===""||e===".")return this;if(e==="..")return this.parent||this;let r=this.children(),i=this.nocase?Yp(e):wd(e);for(let l of r)if(l.#A===i)return l;let s=this.parent?this.sep:"",o=this.#I?this.#I+s+e:void 0,a=this.newChild(e,Mr,{...n,parent:this,fullpath:o});return this.canReaddir()||(a.#n|=Jr),r.push(a),a}relative(){if(this.isCWD)return"";if(this.#w!==void 0)return this.#w;let e=this.name,n=this.parent;if(!n)return this.#w=this.name;let r=n.relative();return r+(!r||!n.parent?"":this.sep)+e}relativePosix(){if(this.sep==="/")return this.relative();if(this.isCWD)return"";if(this.#C!==void 0)return this.#C;let e=this.name,n=this.parent;if(!n)return this.#C=this.fullpathPosix();let r=n.relativePosix();return r+(!r||!n.parent?"":"/")+e}fullpath(){if(this.#I!==void 0)return this.#I;let e=this.name,n=this.parent;if(!n)return this.#I=this.name;let i=n.fullpath()+(n.parent?this.sep:"")+e;return this.#I=i}fullpathPosix(){if(this.#h!==void 0)return this.#h;if(this.sep==="/")return this.#h=this.fullpath();if(!this.parent){let i=this.fullpath().replace(/\\/g,"/");return/^[a-z]:\//i.test(i)?this.#h=`//?/${i}`:this.#h=i}let e=this.parent,n=e.fullpathPosix(),r=n+(!n||!e.parent?"":"/")+this.name;return this.#h=r}isUnknown(){return(this.#n&vr)===Mr}isType(e){return this[`is${e}`]()}getType(){return this.isUnknown()?"Unknown":this.isDirectory()?"Directory":this.isFile()?"File":this.isSymbolicLink()?"SymbolicLink":this.isFIFO()?"FIFO":this.isCharacterDevice()?"CharacterDevice":this.isBlockDevice()?"BlockDevice":this.isSocket()?"Socket":"Unknown"}isFile(){return(this.#n&vr)===lG}isDirectory(){return(this.#n&vr)===_i}isCharacterDevice(){return(this.#n&vr)===oG}isBlockDevice(){return(this.#n&vr)===aG}isFIFO(){return(this.#n&vr)===sG}isSocket(){return(this.#n&vr)===cG}isSymbolicLink(){return(this.#n&ta)===ta}lstatCached(){return this.#n&QH?this:void 0}readlinkCached(){return this.#R}realpathCached(){return this.#L}readdirCached(){let e=this.children();return e.slice(0,e.provisional)}canReadlink(){if(this.#R)return!0;if(!this.parent)return!1;let e=this.#n&vr;return!(e!==Mr&&e!==ta||this.#n&Wp||this.#n&Jr)}calledReaddir(){return!!(this.#n&G_)}isENOENT(){return!!(this.#n&Jr)}isNamed(e){return this.nocase?this.#A===Yp(e):this.#A===wd(e)}async readlink(){let e=this.#R;if(e)return e;if(this.canReadlink()&&this.parent)try{let n=await this.#e.promises.readlink(this.fullpath()),r=(await this.parent.realpath())?.resolve(n);if(r)return this.#R=r}catch(n){this.#u(n.code);return}}readlinkSync(){let e=this.#R;if(e)return e;if(this.canReadlink()&&this.parent)try{let n=this.#e.readlinkSync(this.fullpath()),r=this.parent.realpathSync()?.resolve(n);if(r)return this.#R=r}catch(n){this.#u(n.code);return}}#v(e){this.#n|=G_;for(let n=e.provisional;n<e.length;n++){let r=e[n];r&&r.#M()}}#M(){this.#n&Jr||(this.#n=(this.#n|Jr)&Od,this.#b())}#b(){let e=this.children();e.provisional=0;for(let n of e)n.#M()}#y(){this.#n|=Vp,this.#U()}#U(){if(this.#n&yd)return;let e=this.#n;(e&vr)===_i&&(e&=Od),this.#n=e|yd,this.#b()}#B(e=""){e==="ENOTDIR"||e==="EPERM"?this.#U():e==="ENOENT"?this.#M():this.children().provisional=0}#F(e=""){e==="ENOTDIR"?this.parent.#U():e==="ENOENT"&&this.#M()}#u(e=""){let n=this.#n;n|=Wp,e==="ENOENT"&&(n|=Jr),(e==="EINVAL"||e==="UNKNOWN")&&(n&=Od),this.#n=n,e==="ENOTDIR"&&this.parent&&this.parent.#U()}#H(e,n){return this.#D(e,n)||this.#G(e,n)}#G(e,n){let r=$_(e),i=this.newChild(e.name,r,{parent:this}),s=i.#n&vr;return s!==_i&&s!==ta&&s!==Mr&&(i.#n|=yd),n.unshift(i),n.provisional++,i}#D(e,n){for(let r=n.provisional;r<n.length;r++){let i=n[r];if((this.nocase?Yp(e.name):wd(e.name))===i.#A)return this.#$(e,i,r,n)}}#$(e,n,r,i){let s=n.name;return n.#n=n.#n&Od|$_(e),s!==e.name&&(n.name=e.name),r!==i.provisional&&(r===i.length-1?i.pop():i.splice(r,1),i.unshift(n)),i.provisional++,n}async lstat(){if((this.#n&Jr)===0)try{return this.#V(await this.#e.promises.lstat(this.fullpath())),this}catch(e){this.#F(e.code)}}lstatSync(){if((this.#n&Jr)===0)try{return this.#V(this.#e.lstatSync(this.fullpath())),this}catch(e){this.#F(e.code)}}#V(e){let{atime:n,atimeMs:r,birthtime:i,birthtimeMs:s,blksize:o,blocks:a,ctime:l,ctimeMs:c,dev:u,gid:d,ino:E,mode:f,mtime:p,mtimeMs:h,nlink:T,rdev:S,size:A,uid:R}=e;this.#_=n,this.#T=r,this.#O=i,this.#f=s,this.#d=o,this.#i=a,this.#N=l,this.#E=c,this.#t=u,this.#m=d,this.#a=E,this.#s=f,this.#p=p,this.#S=h,this.#r=T,this.#c=S,this.#l=A,this.#o=R;let m=$_(e);this.#n=this.#n&Od|m|QH,m!==Mr&&m!==_i&&m!==ta&&(this.#n|=yd)}#W=[];#Y=!1;#q(e){this.#Y=!1;let n=this.#W.slice();this.#W.length=0,n.forEach(r=>r(null,e))}readdirCB(e,n=!1){if(!this.canReaddir()){n?e(null,[]):queueMicrotask(()=>e(null,[]));return}let r=this.children();if(this.calledReaddir()){let s=r.slice(0,r.provisional);n?e(null,s):queueMicrotask(()=>e(null,s));return}if(this.#W.push(e),this.#Y)return;this.#Y=!0;let i=this.fullpath();this.#e.readdir(i,{withFileTypes:!0},(s,o)=>{if(s)this.#B(s.code),r.provisional=0;else{for(let a of o)this.#H(a,r);this.#v(r)}this.#q(r.slice(0,r.provisional))})}#k;async readdir(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let n=this.fullpath();if(this.#k)await this.#k;else{let r=()=>{};this.#k=new Promise(i=>r=i);try{for(let i of await this.#e.promises.readdir(n,{withFileTypes:!0}))this.#H(i,e);this.#v(e)}catch(i){this.#B(i.code),e.provisional=0}this.#k=void 0,r()}return e.slice(0,e.provisional)}readdirSync(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let n=this.fullpath();try{for(let r of this.#e.readdirSync(n,{withFileTypes:!0}))this.#H(r,e);this.#v(e)}catch(r){this.#B(r.code),e.provisional=0}return e.slice(0,e.provisional)}canReaddir(){if(this.#n&ZH)return!1;let e=vr&this.#n;return e===Mr||e===_i||e===ta}shouldWalk(e,n){return(this.#n&_i)===_i&&!(this.#n&ZH)&&!e.has(this)&&(!n||n(this))}async realpath(){if(this.#L)return this.#L;if(!((Vp|Wp|Jr)&this.#n))try{let e=await this.#e.promises.realpath(this.fullpath());return this.#L=this.resolve(e)}catch{this.#y()}}realpathSync(){if(this.#L)return this.#L;if(!((Vp|Wp|Jr)&this.#n))try{let e=this.#e.realpathSync(this.fullpath());return this.#L=this.resolve(e)}catch{this.#y()}}[uG](e){if(e===this)return;e.isCWD=!1,this.isCWD=!0;let n=new Set([]),r=[],i=this;for(;i&&i.parent;)n.add(i),i.#w=r.join(this.sep),i.#C=r.join("/"),i=i.parent,r.push("..");for(i=e;i&&i.parent&&!n.has(i);)i.#w=void 0,i.#C=void 0,i=i.parent}};rt.PathBase=Pn;var Dd=class t extends Pn{sep="\\";splitSep=_de;constructor(e,n=Mr,r,i,s,o,a){super(e,n,r,i,s,o,a)}newChild(e,n=Mr,r={}){return new t(e,n,this.root,this.roots,this.nocase,this.childrenCache(),r)}getRootString(e){return qp.win32.parse(e).root}getRoot(e){if(e=Ide(e.toUpperCase()),e===this.root.name)return this.root;for(let[n,r]of Object.entries(this.roots))if(this.sameRoot(e,n))return this.roots[e]=r;return this.roots[e]=new vd(e,this).root}sameRoot(e,n=this.root.name){return e=e.toUpperCase().replace(/\//g,"\\").replace(iG,"$1\\"),e===n}};rt.PathWin32=Dd;var Pd=class t extends Pn{splitSep="/";sep="/";constructor(e,n=Mr,r,i,s,o,a){super(e,n,r,i,s,o,a)}getRootString(e){return e.startsWith("/")?"/":""}getRoot(e){return this.root}newChild(e,n=Mr,r={}){return new t(e,n,this.root,this.roots,this.nocase,this.childrenCache(),r)}};rt.PathPosix=Pd;var xd=class{root;rootPath;roots;cwd;#e;#t;#s;nocase;#r;constructor(e=process.cwd(),n,r,{nocase:i,childrenCacheSize:s=16*1024,fs:o=bd}={}){this.#r=rG(o),(e instanceof URL||e.startsWith("file://"))&&(e=(0,Ade.fileURLToPath)(e));let a=n.resolve(e);this.roots=Object.create(null),this.rootPath=this.parseRootPath(a),this.#e=new Ld,this.#t=new Ld,this.#s=new Xp(s);let l=a.substring(this.rootPath.length).split(r);if(l.length===1&&!l[0]&&l.pop(),i===void 0)throw new TypeError("must provide nocase setting to PathScurryBase ctor");this.nocase=i,this.root=this.newRoot(this.#r),this.roots[this.rootPath]=this.root;let c=this.root,u=l.length-1,d=n.sep,E=this.rootPath,f=!1;for(let p of l){let h=u--;c=c.child(p,{relative:new Array(h).fill("..").join(d),relativePosix:new Array(h).fill("..").join("/"),fullpath:E+=(f?"":d)+p}),f=!0}this.cwd=c}depth(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.depth()}childrenCache(){return this.#s}resolve(...e){let n="";for(let s=e.length-1;s>=0;s--){let o=e[s];if(!(!o||o===".")&&(n=n?`${o}/${n}`:o,this.isAbsolute(o)))break}let r=this.#e.get(n);if(r!==void 0)return r;let i=this.cwd.resolve(n).fullpath();return this.#e.set(n,i),i}resolvePosix(...e){let n="";for(let s=e.length-1;s>=0;s--){let o=e[s];if(!(!o||o===".")&&(n=n?`${o}/${n}`:o,this.isAbsolute(o)))break}let r=this.#t.get(n);if(r!==void 0)return r;let i=this.cwd.resolve(n).fullpathPosix();return this.#t.set(n,i),i}relative(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relative()}relativePosix(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relativePosix()}basename(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.name}dirname(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),(e.parent||e).fullpath()}async readdir(e=this.cwd,n={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Pn||(n=e,e=this.cwd);let{withFileTypes:r}=n;if(e.canReaddir()){let i=await e.readdir();return r?i:i.map(s=>s.name)}else return[]}readdirSync(e=this.cwd,n={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Pn||(n=e,e=this.cwd);let{withFileTypes:r=!0}=n;return e.canReaddir()?r?e.readdirSync():e.readdirSync().map(i=>i.name):[]}async lstat(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstat()}lstatSync(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstatSync()}async readlink(e=this.cwd,{withFileTypes:n}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Pn||(n=e.withFileTypes,e=this.cwd);let r=await e.readlink();return n?r:r?.fullpath()}readlinkSync(e=this.cwd,{withFileTypes:n}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Pn||(n=e.withFileTypes,e=this.cwd);let r=e.readlinkSync();return n?r:r?.fullpath()}async realpath(e=this.cwd,{withFileTypes:n}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Pn||(n=e.withFileTypes,e=this.cwd);let r=await e.realpath();return n?r:r?.fullpath()}realpathSync(e=this.cwd,{withFileTypes:n}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Pn||(n=e.withFileTypes,e=this.cwd);let r=e.realpathSync();return n?r:r?.fullpath()}async walk(e=this.cwd,n={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Pn||(n=e,e=this.cwd);let{withFileTypes:r=!0,follow:i=!1,filter:s,walkFilter:o}=n,a=[];(!s||s(e))&&a.push(r?e:e.fullpath());let l=new Set,c=(d,E)=>{l.add(d),d.readdirCB((f,p)=>{if(f)return E(f);let h=p.length;if(!h)return E();let T=()=>{--h===0&&E()};for(let S of p)(!s||s(S))&&a.push(r?S:S.fullpath()),i&&S.isSymbolicLink()?S.realpath().then(A=>A?.isUnknown()?A.lstat():A).then(A=>A?.shouldWalk(l,o)?c(A,T):T()):S.shouldWalk(l,o)?c(S,T):T()},!0)},u=e;return new Promise((d,E)=>{c(u,f=>{if(f)return E(f);d(a)})})}walkSync(e=this.cwd,n={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Pn||(n=e,e=this.cwd);let{withFileTypes:r=!0,follow:i=!1,filter:s,walkFilter:o}=n,a=[];(!s||s(e))&&a.push(r?e:e.fullpath());let l=new Set([e]);for(let c of l){let u=c.readdirSync();for(let d of u){(!s||s(d))&&a.push(r?d:d.fullpath());let E=d;if(d.isSymbolicLink()){if(!(i&&(E=d.realpathSync())))continue;E.isUnknown()&&E.lstatSync()}E.shouldWalk(l,o)&&l.add(E)}}return a}[Symbol.asyncIterator](){return this.iterate()}iterate(e=this.cwd,n={}){return typeof e=="string"?e=this.cwd.resolve(e):e instanceof Pn||(n=e,e=this.cwd),this.stream(e,n)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(e=this.cwd,n={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Pn||(n=e,e=this.cwd);let{withFileTypes:r=!0,follow:i=!1,filter:s,walkFilter:o}=n;(!s||s(e))&&(yield r?e:e.fullpath());let a=new Set([e]);for(let l of a){let c=l.readdirSync();for(let u of c){(!s||s(u))&&(yield r?u:u.fullpath());let d=u;if(u.isSymbolicLink()){if(!(i&&(d=u.realpathSync())))continue;d.isUnknown()&&d.lstatSync()}d.shouldWalk(a,o)&&a.add(d)}}}stream(e=this.cwd,n={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Pn||(n=e,e=this.cwd);let{withFileTypes:r=!0,follow:i=!1,filter:s,walkFilter:o}=n,a=new JH.Minipass({objectMode:!0});(!s||s(e))&&a.write(r?e:e.fullpath());let l=new Set,c=[e],u=0,d=()=>{let E=!1;for(;!E;){let f=c.shift();if(!f){u===0&&a.end();return}u++,l.add(f);let p=(T,S,A=!1)=>{if(T)return a.emit("error",T);if(i&&!A){let R=[];for(let m of S)m.isSymbolicLink()&&R.push(m.realpath().then(N=>N?.isUnknown()?N.lstat():N));if(R.length){Promise.all(R).then(()=>p(null,S,!0));return}}for(let R of S)R&&(!s||s(R))&&(a.write(r?R:R.fullpath())||(E=!0));u--;for(let R of S){let m=R.realpathCached()||R;m.shouldWalk(l,o)&&c.push(m)}E&&!a.flowing?a.once("drain",d):h||d()},h=!0;f.readdirCB(p,!0),h=!1}};return d(),a}streamSync(e=this.cwd,n={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Pn||(n=e,e=this.cwd);let{withFileTypes:r=!0,follow:i=!1,filter:s,walkFilter:o}=n,a=new JH.Minipass({objectMode:!0}),l=new Set;(!s||s(e))&&a.write(r?e:e.fullpath());let c=[e],u=0,d=()=>{let E=!1;for(;!E;){let f=c.shift();if(!f){u===0&&a.end();return}u++,l.add(f);let p=f.readdirSync();for(let h of p)(!s||s(h))&&(a.write(r?h:h.fullpath())||(E=!0));u--;for(let h of p){let T=h;if(h.isSymbolicLink()){if(!(i&&(T=h.realpathSync())))continue;T.isUnknown()&&T.lstatSync()}T.shouldWalk(l,o)&&c.push(T)}}E&&!a.flowing&&a.once("drain",d)};return d(),a}chdir(e=this.cwd){let n=this.cwd;this.cwd=typeof e=="string"?this.cwd.resolve(e):e,this.cwd[uG](n)}};rt.PathScurryBase=xd;var vd=class extends xd{sep="\\";constructor(e=process.cwd(),n={}){let{nocase:r=!0}=n;super(e,qp.win32,"\\",{...n,nocase:r}),this.nocase=r;for(let i=this.cwd;i;i=i.parent)i.nocase=this.nocase}parseRootPath(e){return qp.win32.parse(e).root.toUpperCase()}newRoot(e){return new Dd(this.rootPath,_i,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")||e.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(e)}};rt.PathScurryWin32=vd;var Md=class extends xd{sep="/";constructor(e=process.cwd(),n={}){let{nocase:r=!1}=n;super(e,qp.posix,"/",{...n,nocase:r}),this.nocase=r}parseRootPath(e){return"/"}newRoot(e){return new Pd(this.rootPath,_i,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")}};rt.PathScurryPosix=Md;var zp=class extends Md{constructor(e=process.cwd(),n={}){let{nocase:r=!0}=n;super(e,{...n,nocase:r})}};rt.PathScurryDarwin=zp;rt.Path=process.platform==="win32"?Dd:Pd;rt.PathScurry=process.platform==="win32"?vd:process.platform==="darwin"?zp:Md});var W_=C(jp=>{"use strict";Object.defineProperty(jp,"__esModule",{value:!0});jp.Pattern=void 0;var Ode=Js(),Cde=t=>t.length>=1,bde=t=>t.length>=1,k_=class t{#e;#t;#s;length;#r;#o;#m;#c;#d;#a;#l=!0;constructor(e,n,r,i){if(!Cde(e))throw new TypeError("empty pattern list");if(!bde(n))throw new TypeError("empty glob list");if(n.length!==e.length)throw new TypeError("mismatched pattern list and glob list lengths");if(this.length=e.length,r<0||r>=this.length)throw new TypeError("index out of range");if(this.#e=e,this.#t=n,this.#s=r,this.#r=i,this.#s===0){if(this.isUNC()){let[s,o,a,l,...c]=this.#e,[u,d,E,f,...p]=this.#t;c[0]===""&&(c.shift(),p.shift());let h=[s,o,a,l,""].join("/"),T=[u,d,E,f,""].join("/");this.#e=[h,...c],this.#t=[T,...p],this.length=this.#e.length}else if(this.isDrive()||this.isAbsolute()){let[s,...o]=this.#e,[a,...l]=this.#t;o[0]===""&&(o.shift(),l.shift());let c=s+"/",u=a+"/";this.#e=[c,...o],this.#t=[u,...l],this.length=this.#e.length}}}pattern(){return this.#e[this.#s]}isString(){return typeof this.#e[this.#s]=="string"}isGlobstar(){return this.#e[this.#s]===Ode.GLOBSTAR}isRegExp(){return this.#e[this.#s]instanceof RegExp}globString(){return this.#m=this.#m||(this.#s===0?this.isAbsolute()?this.#t[0]+this.#t.slice(1).join("/"):this.#t.join("/"):this.#t.slice(this.#s).join("/"))}hasMore(){return this.length>this.#s+1}rest(){return this.#o!==void 0?this.#o:this.hasMore()?(this.#o=new t(this.#e,this.#t,this.#s+1,this.#r),this.#o.#a=this.#a,this.#o.#d=this.#d,this.#o.#c=this.#c,this.#o):this.#o=null}isUNC(){let e=this.#e;return this.#d!==void 0?this.#d:this.#d=this.#r==="win32"&&this.#s===0&&e[0]===""&&e[1]===""&&typeof e[2]=="string"&&!!e[2]&&typeof e[3]=="string"&&!!e[3]}isDrive(){let e=this.#e;return this.#c!==void 0?this.#c:this.#c=this.#r==="win32"&&this.#s===0&&this.length>1&&typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0])}isAbsolute(){let e=this.#e;return this.#a!==void 0?this.#a:this.#a=e[0]===""&&e.length>1||this.isDrive()||this.isUNC()}root(){let e=this.#e[0];return typeof e=="string"&&this.isAbsolute()&&this.#s===0?e:""}checkFollowGlobstar(){return!(this.#s===0||!this.isGlobstar()||!this.#l)}markFollowGlobstar(){return this.#s===0||!this.isGlobstar()||!this.#l?!1:(this.#l=!1,!0)}};jp.Pattern=k_});var SG=C(nr=>{"use strict";var yde=nr&&nr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(nr,"__esModule",{value:!0});nr.Minipass=nr.isWritable=nr.isReadable=nr.isStream=void 0;var fG=typeof process=="object"&&process?process:{stdout:null,stderr:null},K_=require("node:events"),TG=yde(require("node:stream")),wde=require("node:string_decoder"),Lde=t=>!!t&&typeof t=="object"&&(t instanceof nT||t instanceof TG.default||(0,nr.isReadable)(t)||(0,nr.isWritable)(t));nr.isStream=Lde;var Dde=t=>!!t&&typeof t=="object"&&t instanceof K_.EventEmitter&&typeof t.pipe=="function"&&t.pipe!==TG.default.Writable.prototype.pipe;nr.isReadable=Dde;var Pde=t=>!!t&&typeof t=="object"&&t instanceof K_.EventEmitter&&typeof t.write=="function"&&typeof t.end=="function";nr.isWritable=Pde;var ds=Symbol("EOF"),fs=Symbol("maybeEmitEnd"),eo=Symbol("emittedEnd"),Kp=Symbol("emittingEnd"),Ud=Symbol("emittedError"),Jp=Symbol("closed"),EG=Symbol("read"),Qp=Symbol("flush"),hG=Symbol("flushChunk"),Qr=Symbol("encoding"),Vl=Symbol("decoder"),Sn=Symbol("flowing"),Bd=Symbol("paused"),ql=Symbol("resume"),Rn=Symbol("buffer"),tr=Symbol("pipes"),An=Symbol("bufferLength"),Y_=Symbol("bufferPush"),Zp=Symbol("bufferShift"),Yn=Symbol("objectMode"),Vt=Symbol("destroyed"),V_=Symbol("error"),q_=Symbol("emitData"),pG=Symbol("emitEnd"),X_=Symbol("emitEnd2"),Ni=Symbol("async"),z_=Symbol("abort"),eT=Symbol("aborted"),Fd=Symbol("signal"),na=Symbol("dataListeners"),Tr=Symbol("discarded"),Hd=t=>Promise.resolve().then(t),xde=t=>t(),vde=t=>t==="end"||t==="finish"||t==="prefinish",Mde=t=>t instanceof ArrayBuffer||!!t&&typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,Ude=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),tT=class{src;dest;opts;ondrain;constructor(e,n,r){this.src=e,this.dest=n,this.opts=r,this.ondrain=()=>e[ql](),this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(e){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},j_=class extends tT{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,n,r){super(e,n,r),this.proxyErrors=i=>n.emit("error",i),e.on("error",this.proxyErrors)}},Bde=t=>!!t.objectMode,Fde=t=>!t.objectMode&&!!t.encoding&&t.encoding!=="buffer",nT=class extends K_.EventEmitter{[Sn]=!1;[Bd]=!1;[tr]=[];[Rn]=[];[Yn];[Qr];[Ni];[Vl];[ds]=!1;[eo]=!1;[Kp]=!1;[Jp]=!1;[Ud]=null;[An]=0;[Vt]=!1;[Fd];[eT]=!1;[na]=0;[Tr]=!1;writable=!0;readable=!0;constructor(...e){let n=e[0]||{};if(super(),n.objectMode&&typeof n.encoding=="string")throw new TypeError("Encoding and objectMode may not be used together");Bde(n)?(this[Yn]=!0,this[Qr]=null):Fde(n)?(this[Qr]=n.encoding,this[Yn]=!1):(this[Yn]=!1,this[Qr]=null),this[Ni]=!!n.async,this[Vl]=this[Qr]?new wde.StringDecoder(this[Qr]):null,n&&n.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[Rn]}),n&&n.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[tr]});let{signal:r}=n;r&&(this[Fd]=r,r.aborted?this[z_]():r.addEventListener("abort",()=>this[z_]()))}get bufferLength(){return this[An]}get encoding(){return this[Qr]}set encoding(e){throw new Error("Encoding must be set at instantiation time")}setEncoding(e){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[Yn]}set objectMode(e){throw new Error("objectMode must be set at instantiation time")}get async(){return this[Ni]}set async(e){this[Ni]=this[Ni]||!!e}[z_](){this[eT]=!0,this.emit("abort",this[Fd]?.reason),this.destroy(this[Fd]?.reason)}get aborted(){return this[eT]}set aborted(e){}write(e,n,r){if(this[eT])return!1;if(this[ds])throw new Error("write after end");if(this[Vt])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof n=="function"&&(r=n,n="utf8"),n||(n="utf8");let i=this[Ni]?Hd:xde;if(!this[Yn]&&!Buffer.isBuffer(e)){if(Ude(e))e=Buffer.from(e.buffer,e.byteOffset,e.byteLength);else if(Mde(e))e=Buffer.from(e);else if(typeof e!="string")throw new Error("Non-contiguous data written to non-objectMode stream")}return this[Yn]?(this[Sn]&&this[An]!==0&&this[Qp](!0),this[Sn]?this.emit("data",e):this[Y_](e),this[An]!==0&&this.emit("readable"),r&&i(r),this[Sn]):e.length?(typeof e=="string"&&!(n===this[Qr]&&!this[Vl]?.lastNeed)&&(e=Buffer.from(e,n)),Buffer.isBuffer(e)&&this[Qr]&&(e=this[Vl].write(e)),this[Sn]&&this[An]!==0&&this[Qp](!0),this[Sn]?this.emit("data",e):this[Y_](e),this[An]!==0&&this.emit("readable"),r&&i(r),this[Sn]):(this[An]!==0&&this.emit("readable"),r&&i(r),this[Sn])}read(e){if(this[Vt])return null;if(this[Tr]=!1,this[An]===0||e===0||e&&e>this[An])return this[fs](),null;this[Yn]&&(e=null),this[Rn].length>1&&!this[Yn]&&(this[Rn]=[this[Qr]?this[Rn].join(""):Buffer.concat(this[Rn],this[An])]);let n=this[EG](e||null,this[Rn][0]);return this[fs](),n}[EG](e,n){if(this[Yn])this[Zp]();else{let r=n;e===r.length||e===null?this[Zp]():typeof r=="string"?(this[Rn][0]=r.slice(e),n=r.slice(0,e),this[An]-=e):(this[Rn][0]=r.subarray(e),n=r.subarray(0,e),this[An]-=e)}return this.emit("data",n),!this[Rn].length&&!this[ds]&&this.emit("drain"),n}end(e,n,r){return typeof e=="function"&&(r=e,e=void 0),typeof n=="function"&&(r=n,n="utf8"),e!==void 0&&this.write(e,n),r&&this.once("end",r),this[ds]=!0,this.writable=!1,(this[Sn]||!this[Bd])&&this[fs](),this}[ql](){this[Vt]||(!this[na]&&!this[tr].length&&(this[Tr]=!0),this[Bd]=!1,this[Sn]=!0,this.emit("resume"),this[Rn].length?this[Qp]():this[ds]?this[fs]():this.emit("drain"))}resume(){return this[ql]()}pause(){this[Sn]=!1,this[Bd]=!0,this[Tr]=!1}get destroyed(){return this[Vt]}get flowing(){return this[Sn]}get paused(){return this[Bd]}[Y_](e){this[Yn]?this[An]+=1:this[An]+=e.length,this[Rn].push(e)}[Zp](){return this[Yn]?this[An]-=1:this[An]-=this[Rn][0].length,this[Rn].shift()}[Qp](e=!1){do;while(this[hG](this[Zp]())&&this[Rn].length);!e&&!this[Rn].length&&!this[ds]&&this.emit("drain")}[hG](e){return this.emit("data",e),this[Sn]}pipe(e,n){if(this[Vt])return e;this[Tr]=!1;let r=this[eo];return n=n||{},e===fG.stdout||e===fG.stderr?n.end=!1:n.end=n.end!==!1,n.proxyErrors=!!n.proxyErrors,r?n.end&&e.end():(this[tr].push(n.proxyErrors?new j_(this,e,n):new tT(this,e,n)),this[Ni]?Hd(()=>this[ql]()):this[ql]()),e}unpipe(e){let n=this[tr].find(r=>r.dest===e);n&&(this[tr].length===1?(this[Sn]&&this[na]===0&&(this[Sn]=!1),this[tr]=[]):this[tr].splice(this[tr].indexOf(n),1),n.unpipe())}addListener(e,n){return this.on(e,n)}on(e,n){let r=super.on(e,n);if(e==="data")this[Tr]=!1,this[na]++,!this[tr].length&&!this[Sn]&&this[ql]();else if(e==="readable"&&this[An]!==0)super.emit("readable");else if(vde(e)&&this[eo])super.emit(e),this.removeAllListeners(e);else if(e==="error"&&this[Ud]){let i=n;this[Ni]?Hd(()=>i.call(this,this[Ud])):i.call(this,this[Ud])}return r}removeListener(e,n){return this.off(e,n)}off(e,n){let r=super.off(e,n);return e==="data"&&(this[na]=this.listeners("data").length,this[na]===0&&!this[Tr]&&!this[tr].length&&(this[Sn]=!1)),r}removeAllListeners(e){let n=super.removeAllListeners(e);return(e==="data"||e===void 0)&&(this[na]=0,!this[Tr]&&!this[tr].length&&(this[Sn]=!1)),n}get emittedEnd(){return this[eo]}[fs](){!this[Kp]&&!this[eo]&&!this[Vt]&&this[Rn].length===0&&this[ds]&&(this[Kp]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[Jp]&&this.emit("close"),this[Kp]=!1)}emit(e,...n){let r=n[0];if(e!=="error"&&e!=="close"&&e!==Vt&&this[Vt])return!1;if(e==="data")return!this[Yn]&&!r?!1:this[Ni]?(Hd(()=>this[q_](r)),!0):this[q_](r);if(e==="end")return this[pG]();if(e==="close"){if(this[Jp]=!0,!this[eo]&&!this[Vt])return!1;let s=super.emit("close");return this.removeAllListeners("close"),s}else if(e==="error"){this[Ud]=r,super.emit(V_,r);let s=!this[Fd]||this.listeners("error").length?super.emit("error",r):!1;return this[fs](),s}else if(e==="resume"){let s=super.emit("resume");return this[fs](),s}else if(e==="finish"||e==="prefinish"){let s=super.emit(e);return this.removeAllListeners(e),s}let i=super.emit(e,...n);return this[fs](),i}[q_](e){for(let r of this[tr])r.dest.write(e)===!1&&this.pause();let n=this[Tr]?!1:super.emit("data",e);return this[fs](),n}[pG](){return this[eo]?!1:(this[eo]=!0,this.readable=!1,this[Ni]?(Hd(()=>this[X_]()),!0):this[X_]())}[X_](){if(this[Vl]){let n=this[Vl].end();if(n){for(let r of this[tr])r.dest.write(n);this[Tr]||super.emit("data",n)}}for(let n of this[tr])n.end();let e=super.emit("end");return this.removeAllListeners("end"),e}async collect(){let e=Object.assign([],{dataLength:0});this[Yn]||(e.dataLength=0);let n=this.promise();return this.on("data",r=>{e.push(r),this[Yn]||(e.dataLength+=r.length)}),await n,e}async concat(){if(this[Yn])throw new Error("cannot concat in objectMode");let e=await this.collect();return this[Qr]?e.join(""):Buffer.concat(e,e.dataLength)}async promise(){return new Promise((e,n)=>{this.on(Vt,()=>n(new Error("stream destroyed"))),this.on("error",r=>n(r)),this.on("end",()=>e())})}[Symbol.asyncIterator](){this[Tr]=!1;let e=!1,n=async()=>(this.pause(),e=!0,{value:void 0,done:!0});return{next:()=>{if(e)return n();let i=this.read();if(i!==null)return Promise.resolve({done:!1,value:i});if(this[ds])return n();let s,o,a=d=>{this.off("data",l),this.off("end",c),this.off(Vt,u),n(),o(d)},l=d=>{this.off("error",a),this.off("end",c),this.off(Vt,u),this.pause(),s({value:d,done:!!this[ds]})},c=()=>{this.off("error",a),this.off("data",l),this.off(Vt,u),n(),s({done:!0,value:void 0})},u=()=>a(new Error("stream destroyed"));return new Promise((d,E)=>{o=E,s=d,this.once(Vt,u),this.once("error",a),this.once("end",c),this.once("data",l)})},throw:n,return:n,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[Tr]=!1;let e=!1,n=()=>(this.pause(),this.off(V_,n),this.off(Vt,n),this.off("end",n),e=!0,{done:!0,value:void 0}),r=()=>{if(e)return n();let i=this.read();return i===null?n():{done:!1,value:i}};return this.once("end",n),this.once(V_,n),this.once(Vt,n),{next:r,throw:n,return:n,[Symbol.iterator](){return this}}}destroy(e){if(this[Vt])return e?this.emit("error",e):this.emit(Vt),this;this[Vt]=!0,this[Tr]=!0,this[Rn].length=0,this[An]=0;let n=this;return typeof n.close=="function"&&!this[Jp]&&n.close(),e?this.emit("error",e):this.emit(Vt),this}static get isStream(){return nr.isStream}};nr.Minipass=nT});var Q_=C(rT=>{"use strict";Object.defineProperty(rT,"__esModule",{value:!0});rT.Ignore=void 0;var RG=Js(),Hde=W_(),Gde=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",J_=class{relative;relativeChildren;absolute;absoluteChildren;platform;mmopts;constructor(e,{nobrace:n,nocase:r,noext:i,noglobstar:s,platform:o=Gde}){this.relative=[],this.absolute=[],this.relativeChildren=[],this.absoluteChildren=[],this.platform=o,this.mmopts={dot:!0,nobrace:n,nocase:r,noext:i,noglobstar:s,optimizationLevel:2,platform:o,nocomment:!0,nonegate:!0};for(let a of e)this.add(a)}add(e){let n=new RG.Minimatch(e,this.mmopts);for(let r=0;r<n.set.length;r++){let i=n.set[r],s=n.globParts[r];if(!i||!s)throw new Error("invalid pattern object");for(;i[0]==="."&&s[0]===".";)i.shift(),s.shift();let o=new Hde.Pattern(i,s,0,this.platform),a=new RG.Minimatch(o.globString(),this.mmopts),l=s[s.length-1]==="**",c=o.isAbsolute();c?this.absolute.push(a):this.relative.push(a),l&&(c?this.absoluteChildren.push(a):this.relativeChildren.push(a))}}ignored(e){let n=e.fullpath(),r=`${n}/`,i=e.relative()||".",s=`${i}/`;for(let o of this.relative)if(o.match(i)||o.match(s))return!0;for(let o of this.absolute)if(o.match(n)||o.match(r))return!0;return!1}childrenIgnored(e){let n=e.fullpath()+"/",r=(e.relative()||".")+"/";for(let i of this.relativeChildren)if(i.match(r))return!0;for(let i of this.absoluteChildren)if(i.match(n))return!0;return!1}};rT.Ignore=J_});var mG=C(Oi=>{"use strict";Object.defineProperty(Oi,"__esModule",{value:!0});Oi.Processor=Oi.SubWalks=Oi.MatchRecord=Oi.HasWalkedCache=void 0;var AG=Js(),iT=class t{store;constructor(e=new Map){this.store=e}copy(){return new t(new Map(this.store))}hasWalked(e,n){return this.store.get(e.fullpath())?.has(n.globString())}storeWalked(e,n){let r=e.fullpath(),i=this.store.get(r);i?i.add(n.globString()):this.store.set(r,new Set([n.globString()]))}};Oi.HasWalkedCache=iT;var sT=class{store=new Map;add(e,n,r){let i=(n?2:0)|(r?1:0),s=this.store.get(e);this.store.set(e,s===void 0?i:i&s)}entries(){return[...this.store.entries()].map(([e,n])=>[e,!!(n&2),!!(n&1)])}};Oi.MatchRecord=sT;var oT=class{store=new Map;add(e,n){if(!e.canReaddir())return;let r=this.store.get(e);r?r.find(i=>i.globString()===n.globString())||r.push(n):this.store.set(e,[n])}get(e){let n=this.store.get(e);if(!n)throw new Error("attempting to walk unknown path");return n}entries(){return this.keys().map(e=>[e,this.store.get(e)])}keys(){return[...this.store.keys()].filter(e=>e.canReaddir())}};Oi.SubWalks=oT;var Z_=class t{hasWalkedCache;matches=new sT;subwalks=new oT;patterns;follow;dot;opts;constructor(e,n){this.opts=e,this.follow=!!e.follow,this.dot=!!e.dot,this.hasWalkedCache=n?n.copy():new iT}processPatterns(e,n){this.patterns=n;let r=n.map(i=>[e,i]);for(let[i,s]of r){this.hasWalkedCache.storeWalked(i,s);let o=s.root(),a=s.isAbsolute()&&this.opts.absolute!==!1;if(o){i=i.resolve(o==="/"&&this.opts.root!==void 0?this.opts.root:o);let d=s.rest();if(d)s=d;else{this.matches.add(i,!0,!1);continue}}if(i.isENOENT())continue;let l,c,u=!1;for(;typeof(l=s.pattern())=="string"&&(c=s.rest());)i=i.resolve(l),s=c,u=!0;if(l=s.pattern(),c=s.rest(),u){if(this.hasWalkedCache.hasWalked(i,s))continue;this.hasWalkedCache.storeWalked(i,s)}if(typeof l=="string"){let d=l===".."||l===""||l===".";this.matches.add(i.resolve(l),a,d);continue}else if(l===AG.GLOBSTAR){(!i.isSymbolicLink()||this.follow||s.checkFollowGlobstar())&&this.subwalks.add(i,s);let d=c?.pattern(),E=c?.rest();if(!c||(d===""||d===".")&&!E)this.matches.add(i,a,d===""||d===".");else if(d===".."){let f=i.parent||i;E?this.hasWalkedCache.hasWalked(f,E)||this.subwalks.add(f,E):this.matches.add(f,a,!0)}}else l instanceof RegExp&&this.subwalks.add(i,s)}return this}subwalkTargets(){return this.subwalks.keys()}child(){return new t(this.opts,this.hasWalkedCache)}filterEntries(e,n){let r=this.subwalks.get(e),i=this.child();for(let s of n)for(let o of r){let a=o.isAbsolute(),l=o.pattern(),c=o.rest();l===AG.GLOBSTAR?i.testGlobstar(s,o,c,a):l instanceof RegExp?i.testRegExp(s,l,c,a):i.testString(s,l,c,a)}return i}testGlobstar(e,n,r,i){if((this.dot||!e.name.startsWith("."))&&(n.hasMore()||this.matches.add(e,i,!1),e.canReaddir()&&(this.follow||!e.isSymbolicLink()?this.subwalks.add(e,n):e.isSymbolicLink()&&(r&&n.checkFollowGlobstar()?this.subwalks.add(e,r):n.markFollowGlobstar()&&this.subwalks.add(e,n)))),r){let s=r.pattern();if(typeof s=="string"&&s!==".."&&s!==""&&s!==".")this.testString(e,s,r.rest(),i);else if(s===".."){let o=e.parent||e;this.subwalks.add(o,r)}else s instanceof RegExp&&this.testRegExp(e,s,r.rest(),i)}}testRegExp(e,n,r,i){n.test(e.name)&&(r?this.subwalks.add(e,r):this.matches.add(e,i,!1))}testString(e,n,r,i){e.isNamed(n)&&(r?this.subwalks.add(e,r):this.matches.add(e,i,!1))}};Oi.Processor=Z_});var _G=C(to=>{"use strict";Object.defineProperty(to,"__esModule",{value:!0});to.GlobStream=to.GlobWalker=to.GlobUtil=void 0;var $de=SG(),gG=Q_(),IG=mG(),kde=(t,e)=>typeof t=="string"?new gG.Ignore([t],e):Array.isArray(t)?new gG.Ignore(t,e):t,Gd=class{path;patterns;opts;seen=new Set;paused=!1;aborted=!1;#e=[];#t;#s;signal;maxDepth;includeChildMatches;constructor(e,n,r){if(this.patterns=e,this.path=n,this.opts=r,this.#s=!r.posix&&r.platform==="win32"?"\\":"/",this.includeChildMatches=r.includeChildMatches!==!1,(r.ignore||!this.includeChildMatches)&&(this.#t=kde(r.ignore??[],r),!this.includeChildMatches&&typeof this.#t.add!="function")){let i="cannot ignore child matches, ignore lacks add() method.";throw new Error(i)}this.maxDepth=r.maxDepth||1/0,r.signal&&(this.signal=r.signal,this.signal.addEventListener("abort",()=>{this.#e.length=0}))}#r(e){return this.seen.has(e)||!!this.#t?.ignored?.(e)}#o(e){return!!this.#t?.childrenIgnored?.(e)}pause(){this.paused=!0}resume(){if(this.signal?.aborted)return;this.paused=!1;let e;for(;!this.paused&&(e=this.#e.shift());)e()}onResume(e){this.signal?.aborted||(this.paused?this.#e.push(e):e())}async matchCheck(e,n){if(n&&this.opts.nodir)return;let r;if(this.opts.realpath){if(r=e.realpathCached()||await e.realpath(),!r)return;e=r}let s=e.isUnknown()||this.opts.stat?await e.lstat():e;if(this.opts.follow&&this.opts.nodir&&s?.isSymbolicLink()){let o=await s.realpath();o&&(o.isUnknown()||this.opts.stat)&&await o.lstat()}return this.matchCheckTest(s,n)}matchCheckTest(e,n){return e&&(this.maxDepth===1/0||e.depth()<=this.maxDepth)&&(!n||e.canReaddir())&&(!this.opts.nodir||!e.isDirectory())&&(!this.opts.nodir||!this.opts.follow||!e.isSymbolicLink()||!e.realpathCached()?.isDirectory())&&!this.#r(e)?e:void 0}matchCheckSync(e,n){if(n&&this.opts.nodir)return;let r;if(this.opts.realpath){if(r=e.realpathCached()||e.realpathSync(),!r)return;e=r}let s=e.isUnknown()||this.opts.stat?e.lstatSync():e;if(this.opts.follow&&this.opts.nodir&&s?.isSymbolicLink()){let o=s.realpathSync();o&&(o?.isUnknown()||this.opts.stat)&&o.lstatSync()}return this.matchCheckTest(s,n)}matchFinish(e,n){if(this.#r(e))return;if(!this.includeChildMatches&&this.#t?.add){let s=`${e.relativePosix()}/**`;this.#t.add(s)}let r=this.opts.absolute===void 0?n:this.opts.absolute;this.seen.add(e);let i=this.opts.mark&&e.isDirectory()?this.#s:"";if(this.opts.withFileTypes)this.matchEmit(e);else if(r){let s=this.opts.posix?e.fullpathPosix():e.fullpath();this.matchEmit(s+i)}else{let s=this.opts.posix?e.relativePosix():e.relative(),o=this.opts.dotRelative&&!s.startsWith(".."+this.#s)?"."+this.#s:"";this.matchEmit(s?o+s+i:"."+i)}}async match(e,n,r){let i=await this.matchCheck(e,r);i&&this.matchFinish(i,n)}matchSync(e,n,r){let i=this.matchCheckSync(e,r);i&&this.matchFinish(i,n)}walkCB(e,n,r){this.signal?.aborted&&r(),this.walkCB2(e,n,new IG.Processor(this.opts),r)}walkCB2(e,n,r,i){if(this.#o(e))return i();if(this.signal?.aborted&&i(),this.paused){this.onResume(()=>this.walkCB2(e,n,r,i));return}r.processPatterns(e,n);let s=1,o=()=>{--s===0&&i()};for(let[a,l,c]of r.matches.entries())this.#r(a)||(s++,this.match(a,l,c).then(()=>o()));for(let a of r.subwalkTargets()){if(this.maxDepth!==1/0&&a.depth()>=this.maxDepth)continue;s++;let l=a.readdirCached();a.calledReaddir()?this.walkCB3(a,l,r,o):a.readdirCB((c,u)=>this.walkCB3(a,u,r,o),!0)}o()}walkCB3(e,n,r,i){r=r.filterEntries(e,n);let s=1,o=()=>{--s===0&&i()};for(let[a,l,c]of r.matches.entries())this.#r(a)||(s++,this.match(a,l,c).then(()=>o()));for(let[a,l]of r.subwalks.entries())s++,this.walkCB2(a,l,r.child(),o);o()}walkCBSync(e,n,r){this.signal?.aborted&&r(),this.walkCB2Sync(e,n,new IG.Processor(this.opts),r)}walkCB2Sync(e,n,r,i){if(this.#o(e))return i();if(this.signal?.aborted&&i(),this.paused){this.onResume(()=>this.walkCB2Sync(e,n,r,i));return}r.processPatterns(e,n);let s=1,o=()=>{--s===0&&i()};for(let[a,l,c]of r.matches.entries())this.#r(a)||this.matchSync(a,l,c);for(let a of r.subwalkTargets()){if(this.maxDepth!==1/0&&a.depth()>=this.maxDepth)continue;s++;let l=a.readdirSync();this.walkCB3Sync(a,l,r,o)}o()}walkCB3Sync(e,n,r,i){r=r.filterEntries(e,n);let s=1,o=()=>{--s===0&&i()};for(let[a,l,c]of r.matches.entries())this.#r(a)||this.matchSync(a,l,c);for(let[a,l]of r.subwalks.entries())s++,this.walkCB2Sync(a,l,r.child(),o);o()}};to.GlobUtil=Gd;var eN=class extends Gd{matches=new Set;constructor(e,n,r){super(e,n,r)}matchEmit(e){this.matches.add(e)}async walk(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&await this.path.lstat(),await new Promise((e,n)=>{this.walkCB(this.path,this.patterns,()=>{this.signal?.aborted?n(this.signal.reason):e(this.matches)})}),this.matches}walkSync(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>{if(this.signal?.aborted)throw this.signal.reason}),this.matches}};to.GlobWalker=eN;var tN=class extends Gd{results;constructor(e,n,r){super(e,n,r),this.results=new $de.Minipass({signal:this.signal,objectMode:!0}),this.results.on("drain",()=>this.resume()),this.results.on("resume",()=>this.resume())}matchEmit(e){this.results.write(e),this.results.flowing||this.pause()}stream(){let e=this.path;return e.isUnknown()?e.lstat().then(()=>{this.walkCB(e,this.patterns,()=>this.results.end())}):this.walkCB(e,this.patterns,()=>this.results.end()),this.results}streamSync(){return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>this.results.end()),this.results}};to.GlobStream=tN});var rN=C(cT=>{"use strict";Object.defineProperty(cT,"__esModule",{value:!0});cT.Glob=void 0;var Wde=Js(),Yde=require("node:url"),aT=dG(),Vde=W_(),lT=_G(),qde=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",nN=class{absolute;cwd;root;dot;dotRelative;follow;ignore;magicalBraces;mark;matchBase;maxDepth;nobrace;nocase;nodir;noext;noglobstar;pattern;platform;realpath;scurry;stat;signal;windowsPathsNoEscape;withFileTypes;includeChildMatches;opts;patterns;constructor(e,n){if(!n)throw new TypeError("glob options required");if(this.withFileTypes=!!n.withFileTypes,this.signal=n.signal,this.follow=!!n.follow,this.dot=!!n.dot,this.dotRelative=!!n.dotRelative,this.nodir=!!n.nodir,this.mark=!!n.mark,n.cwd?(n.cwd instanceof URL||n.cwd.startsWith("file://"))&&(n.cwd=(0,Yde.fileURLToPath)(n.cwd)):this.cwd="",this.cwd=n.cwd||"",this.root=n.root,this.magicalBraces=!!n.magicalBraces,this.nobrace=!!n.nobrace,this.noext=!!n.noext,this.realpath=!!n.realpath,this.absolute=n.absolute,this.includeChildMatches=n.includeChildMatches!==!1,this.noglobstar=!!n.noglobstar,this.matchBase=!!n.matchBase,this.maxDepth=typeof n.maxDepth=="number"?n.maxDepth:1/0,this.stat=!!n.stat,this.ignore=n.ignore,this.withFileTypes&&this.absolute!==void 0)throw new Error("cannot set absolute and withFileTypes:true");if(typeof e=="string"&&(e=[e]),this.windowsPathsNoEscape=!!n.windowsPathsNoEscape||n.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(e=e.map(l=>l.replace(/\\/g,"/"))),this.matchBase){if(n.noglobstar)throw new TypeError("base matching requires globstar");e=e.map(l=>l.includes("/")?l:`./**/${l}`)}if(this.pattern=e,this.platform=n.platform||qde,this.opts={...n,platform:this.platform},n.scurry){if(this.scurry=n.scurry,n.nocase!==void 0&&n.nocase!==n.scurry.nocase)throw new Error("nocase option contradicts provided scurry option")}else{let l=n.platform==="win32"?aT.PathScurryWin32:n.platform==="darwin"?aT.PathScurryDarwin:n.platform?aT.PathScurryPosix:aT.PathScurry;this.scurry=new l(this.cwd,{nocase:n.nocase,fs:n.fs})}this.nocase=this.scurry.nocase;let r=this.platform==="darwin"||this.platform==="win32",i={...n,dot:this.dot,matchBase:this.matchBase,nobrace:this.nobrace,nocase:this.nocase,nocaseMagicOnly:r,nocomment:!0,noext:this.noext,nonegate:!0,optimizationLevel:2,platform:this.platform,windowsPathsNoEscape:this.windowsPathsNoEscape,debug:!!this.opts.debug},s=this.pattern.map(l=>new Wde.Minimatch(l,i)),[o,a]=s.reduce((l,c)=>(l[0].push(...c.set),l[1].push(...c.globParts),l),[[],[]]);this.patterns=o.map((l,c)=>{let u=a[c];if(!u)throw new Error("invalid pattern object");return new Vde.Pattern(l,u,0,this.platform)})}async walk(){return[...await new lT.GlobWalker(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walk()]}walkSync(){return[...new lT.GlobWalker(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walkSync()]}stream(){return new lT.GlobStream(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).stream()}streamSync(){return new lT.GlobStream(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).streamSync()}iterateSync(){return this.streamSync()[Symbol.iterator]()}[Symbol.iterator](){return this.iterateSync()}iterate(){return this.stream()[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterate()}};cT.Glob=nN});var iN=C(uT=>{"use strict";Object.defineProperty(uT,"__esModule",{value:!0});uT.hasMagic=void 0;var Xde=Js(),zde=(t,e={})=>{Array.isArray(t)||(t=[t]);for(let n of t)if(new Xde.Minimatch(n,e).hasMagic())return!0;return!1};uT.hasMagic=zde});var bG=C($e=>{"use strict";Object.defineProperty($e,"__esModule",{value:!0});$e.glob=$e.sync=$e.iterate=$e.iterateSync=$e.stream=$e.streamSync=$e.Ignore=$e.hasMagic=$e.Glob=$e.unescape=$e.escape=void 0;$e.globStreamSync=$d;$e.globStream=sN;$e.globSync=oN;$e.globIterateSync=kd;$e.globIterate=aN;var NG=Js(),ra=rN(),jde=iN(),CG=Js();Object.defineProperty($e,"escape",{enumerable:!0,get:function(){return CG.escape}});Object.defineProperty($e,"unescape",{enumerable:!0,get:function(){return CG.unescape}});var Kde=rN();Object.defineProperty($e,"Glob",{enumerable:!0,get:function(){return Kde.Glob}});var Jde=iN();Object.defineProperty($e,"hasMagic",{enumerable:!0,get:function(){return Jde.hasMagic}});var Qde=Q_();Object.defineProperty($e,"Ignore",{enumerable:!0,get:function(){return Qde.Ignore}});function $d(t,e={}){return new ra.Glob(t,e).streamSync()}function sN(t,e={}){return new ra.Glob(t,e).stream()}function oN(t,e={}){return new ra.Glob(t,e).walkSync()}async function OG(t,e={}){return new ra.Glob(t,e).walk()}function kd(t,e={}){return new ra.Glob(t,e).iterateSync()}function aN(t,e={}){return new ra.Glob(t,e).iterate()}$e.streamSync=$d;$e.stream=Object.assign(sN,{sync:$d});$e.iterateSync=kd;$e.iterate=Object.assign(aN,{sync:kd});$e.sync=Object.assign(oN,{stream:$d,iterate:kd});$e.glob=Object.assign(OG,{glob:OG,globSync:oN,sync:$e.sync,globStream:sN,stream:$e.stream,globStreamSync:$d,streamSync:$e.streamSync,globIterate:aN,iterate:$e.iterate,globIterateSync:kd,iterateSync:$e.iterateSync,Glob:ra.Glob,hasMagic:jde.hasMagic,escape:NG.escape,unescape:NG.unescape});$e.glob.glob=$e.glob});var DG=C((u1e,LG)=>{var wG=mg(),Xl=require("path"),lN=MF(),Zde=K1(),efe=aH(),tfe=hH(),nfe=bG(),ia=LG.exports={},yG=/[\/\\]/g,rfe=function(t,e){var n=[];return lN(t).forEach(function(r){var i=r.indexOf("!")===0;i&&(r=r.slice(1));var s=e(r);i?n=Zde(n,s):n=efe(n,s)}),n};ia.exists=function(){var t=Xl.join.apply(Xl,arguments);return wG.existsSync(t)};ia.expand=function(...t){var e=tfe(t[0])?t.shift():{},n=Array.isArray(t[0])?t[0]:t;if(n.length===0)return[];var r=rfe(n,function(i){return nfe.sync(i,e)});return e.filter&&(r=r.filter(function(i){i=Xl.join(e.cwd||"",i);try{return typeof e.filter=="function"?e.filter(i):wG.statSync(i)[e.filter]()}catch{return!1}})),r};ia.expandMapping=function(t,e,n){n=Object.assign({rename:function(s,o){return Xl.join(s||"",o)}},n);var r=[],i={};return ia.expand(n,t).forEach(function(s){var o=s;n.flatten&&(o=Xl.basename(o)),n.ext&&(o=o.replace(/(\.[^\/]*)?$/,n.ext));var a=n.rename(e,o,n);n.cwd&&(s=Xl.join(n.cwd,s)),a=a.replace(yG,"/"),s=s.replace(yG,"/"),i[a]?i[a].src.push(s):(r.push({src:[s],dest:a}),i[a]=r[r.length-1])}),r};ia.normalizeFilesArray=function(t){var e=[];return t.forEach(function(n){var r;("src"in n||"dest"in n)&&e.push(n)}),e.length===0?[]:(e=_(e).chain().forEach(function(n){!("src"in n)||!n.src||(Array.isArray(n.src)?n.src=lN(n.src):n.src=[n.src])}).map(function(n){var r=Object.assign({},n);if(delete r.src,delete r.dest,n.expand)return ia.expandMapping(n.src,n.dest,r).map(function(s){var o=Object.assign({},n);return o.orig=Object.assign({},n),o.src=s.src,o.dest=s.dest,["expand","cwd","flatten","rename","ext"].forEach(function(a){delete o[a]}),o});var i=Object.assign({},n);return i.orig=Object.assign({},n),"src"in i&&Object.defineProperty(i,"src",{enumerable:!0,get:function s(){var o;return"result"in s||(o=n.src,o=Array.isArray(o)?lN(o):[o],s.result=ia.expand(r,o)),s.result}}),"dest"in i&&(i.dest=n.dest),i}).flatten().value(),e)}});var zl=C((f1e,vG)=>{var cN=mg(),PG=require("path"),ife=Oh(),sfe=Fx(),xG=Yg(),ofe=RM(),d1e=require("stream").Stream,afe=OF().PassThrough,Sr=vG.exports={};Sr.file=DG();Sr.collectStream=function(t,e){var n=[],r=0;t.on("error",e),t.on("data",function(i){n.push(i),r+=i.length}),t.on("end",function(){var i=Buffer.alloc(r),s=0;n.forEach(function(o){o.copy(i,s),s+=o.length}),e(null,i)})};Sr.dateify=function(t){return t=t||new Date,t instanceof Date?t=t:typeof t=="string"?t=new Date(t):t=new Date,t};Sr.defaults=function(t,e,n){var r=arguments;return r[0]=r[0]||{},ofe(...r)};Sr.isStream=function(t){return ife(t)};Sr.lazyReadStream=function(t){return new sfe.Readable(function(){return cN.createReadStream(t)})};Sr.normalizeInputSource=function(t){return t===null?Buffer.alloc(0):typeof t=="string"?Buffer.from(t):Sr.isStream(t)?t.pipe(new afe):t};Sr.sanitizePath=function(t){return xG(t,!1).replace(/^\w+:/,"").replace(/^(\.\.\/|\/)+/,"")};Sr.trailingSlashIt=function(t){return t.slice(-1)!=="/"?t+"/":t};Sr.unixifyPath=function(t){return xG(t,!1).replace(/^\w+:/,"")};Sr.walkdir=function(t,e,n){var r=[];typeof e=="function"&&(n=e,e=t),cN.readdir(t,function(i,s){var o=0,a,l;if(i)return n(i);(function c(){if(a=s[o++],!a)return n(null,r);l=PG.join(t,a),cN.stat(l,function(u,d){r.push({path:l,relative:PG.relative(e,l).replace(/\\/g,"/"),stats:d}),d&&d.isDirectory()?Sr.walkdir(l,e,function(E,f){if(E)return n(E);f.forEach(function(p){r.push(p)}),c()}):c()})})()})}});var FG=C((UG,BG)=>{var lfe=require("util"),cfe={ABORTED:"archive was aborted",DIRECTORYDIRPATHREQUIRED:"diretory dirpath argument must be a non-empty string value",DIRECTORYFUNCTIONINVALIDDATA:"invalid data returned by directory custom data function",ENTRYNAMEREQUIRED:"entry name must be a non-empty string value",FILEFILEPATHREQUIRED:"file filepath argument must be a non-empty string value",FINALIZING:"archive already finalizing",QUEUECLOSED:"queue closed",NOENDMETHOD:"no suitable finalize/end method defined by module",DIRECTORYNOTSUPPORTED:"support for directory entries not defined by module",FORMATSET:"archive format already set",INPUTSTEAMBUFFERREQUIRED:"input source must be valid Stream or Buffer instance",MODULESET:"module already set",SYMLINKNOTSUPPORTED:"support for symlink entries not defined by module",SYMLINKFILEPATHREQUIRED:"symlink filepath argument must be a non-empty string value",SYMLINKTARGETREQUIRED:"symlink target argument must be a non-empty string value",ENTRYNOTSUPPORTED:"entry not supported"};function MG(t,e){Error.captureStackTrace(this,this.constructor),this.message=cfe[t]||t,this.code=t,this.data=e}lfe.inherits(MG,Error);UG=BG.exports=MG});var Rt=C((E1e,HG)=>{"use strict";var uN=class extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError(`Expected input to be an Array, got ${typeof e}`);let n="";for(let r=0;r<e.length;r++)n+=`    ${e[r].stack}
`;super(n),this.name="AggregateError",this.errors=e}};HG.exports={AggregateError:uN,ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,e){return t.includes(e)},ArrayPrototypeIndexOf(t,e){return t.indexOf(e)},ArrayPrototypeJoin(t,e){return t.join(e)},ArrayPrototypeMap(t,e){return t.map(e)},ArrayPrototypePop(t,e){return t.pop(e)},ArrayPrototypePush(t,e){return t.push(e)},ArrayPrototypeSlice(t,e,n){return t.slice(e,n)},Error,FunctionPrototypeCall(t,e,...n){return t.call(e,...n)},FunctionPrototypeSymbolHasInstance(t,e){return Function.prototype[Symbol.hasInstance].call(t,e)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,e){return Object.defineProperties(t,e)},ObjectDefineProperty(t,e,n){return Object.defineProperty(t,e,n)},ObjectGetOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,e){return Object.setPrototypeOf(t,e)},Promise,PromisePrototypeCatch(t,e){return t.catch(e)},PromisePrototypeThen(t,e,n){return t.then(e,n)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,e){return t.test(e)},SafeSet:Set,String,StringPrototypeSlice(t,e,n){return t.slice(e,n)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,e,n){return t.set(e,n)},Boolean,Uint8Array}});var dN=C((h1e,GG)=>{"use strict";GG.exports={format(t,...e){return t.replace(/%([sdifj])/g,function(...[n,r]){let i=e.shift();return r==="f"?i.toFixed(6):r==="j"?JSON.stringify(i):r==="s"&&typeof i=="object"?`${i.constructor!==Object?i.constructor.name:""} {}`.trim():i.toString()})},inspect(t){switch(typeof t){case"string":if(t.includes("'"))if(t.includes('"')){if(!t.includes("`")&&!t.includes("${"))return`\`${t}\``}else return`"${t}"`;return`'${t}'`;case"number":return isNaN(t)?"NaN":Object.is(t,-0)?String(t):t;case"bigint":return`${String(t)}n`;case"boolean":case"undefined":return String(t);case"object":return"{}"}}}});var Vn=C((p1e,WG)=>{"use strict";var{format:ufe,inspect:dT}=dN(),{AggregateError:dfe}=Rt(),ffe=globalThis.AggregateError||dfe,Efe=Symbol("kIsNodeError"),hfe=["string","function","number","object","Function","Object","boolean","bigint","symbol"],pfe=/^([A-Z][a-z0-9]*)+$/,Tfe="__node_internal_",fT={};function sa(t,e){if(!t)throw new fT.ERR_INTERNAL_ASSERTION(e)}function $G(t){let e="",n=t.length,r=t[0]==="-"?1:0;for(;n>=r+4;n-=3)e=`_${t.slice(n-3,n)}${e}`;return`${t.slice(0,n)}${e}`}function Sfe(t,e,n){if(typeof e=="function")return sa(e.length<=n.length,`Code: ${t}; The provided arguments length (${n.length}) does not match the required ones (${e.length}).`),e(...n);let r=(e.match(/%[dfijoOs]/g)||[]).length;return sa(r===n.length,`Code: ${t}; The provided arguments length (${n.length}) does not match the required ones (${r}).`),n.length===0?e:ufe(e,...n)}function xn(t,e,n){n||(n=Error);class r extends n{constructor(...s){super(Sfe(t,e,s))}toString(){return`${this.name} [${t}]: ${this.message}`}}Object.defineProperties(r.prototype,{name:{value:n.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${t}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),r.prototype.code=t,r.prototype[Efe]=!0,fT[t]=r}function kG(t){let e=Tfe+t.name;return Object.defineProperty(t,"name",{value:e}),t}function Rfe(t,e){if(t&&e&&t!==e){if(Array.isArray(e.errors))return e.errors.push(t),e;let n=new ffe([e,t],e.message);return n.code=e.code,n}return t||e}var fN=class extends Error{constructor(e="The operation was aborted",n=void 0){if(n!==void 0&&typeof n!="object")throw new fT.ERR_INVALID_ARG_TYPE("options","Object",n);super(e,n),this.code="ABORT_ERR",this.name="AbortError"}};xn("ERR_ASSERTION","%s",Error);xn("ERR_INVALID_ARG_TYPE",(t,e,n)=>{sa(typeof t=="string","'name' must be a string"),Array.isArray(e)||(e=[e]);let r="The ";t.endsWith(" argument")?r+=`${t} `:r+=`"${t}" ${t.includes(".")?"property":"argument"} `,r+="must be ";let i=[],s=[],o=[];for(let l of e)sa(typeof l=="string","All expected entries have to be of type string"),hfe.includes(l)?i.push(l.toLowerCase()):pfe.test(l)?s.push(l):(sa(l!=="object",'The value "object" should be written as "Object"'),o.push(l));if(s.length>0){let l=i.indexOf("object");l!==-1&&(i.splice(i,l,1),s.push("Object"))}if(i.length>0){switch(i.length){case 1:r+=`of type ${i[0]}`;break;case 2:r+=`one of type ${i[0]} or ${i[1]}`;break;default:{let l=i.pop();r+=`one of type ${i.join(", ")}, or ${l}`}}(s.length>0||o.length>0)&&(r+=" or ")}if(s.length>0){switch(s.length){case 1:r+=`an instance of ${s[0]}`;break;case 2:r+=`an instance of ${s[0]} or ${s[1]}`;break;default:{let l=s.pop();r+=`an instance of ${s.join(", ")}, or ${l}`}}o.length>0&&(r+=" or ")}switch(o.length){case 0:break;case 1:o[0].toLowerCase()!==o[0]&&(r+="an "),r+=`${o[0]}`;break;case 2:r+=`one of ${o[0]} or ${o[1]}`;break;default:{let l=o.pop();r+=`one of ${o.join(", ")}, or ${l}`}}if(n==null)r+=`. Received ${n}`;else if(typeof n=="function"&&n.name)r+=`. Received function ${n.name}`;else if(typeof n=="object"){var a;if((a=n.constructor)!==null&&a!==void 0&&a.name)r+=`. Received an instance of ${n.constructor.name}`;else{let l=dT(n,{depth:-1});r+=`. Received ${l}`}}else{let l=dT(n,{colors:!1});l.length>25&&(l=`${l.slice(0,25)}...`),r+=`. Received type ${typeof n} (${l})`}return r},TypeError);xn("ERR_INVALID_ARG_VALUE",(t,e,n="is invalid")=>{let r=dT(e);return r.length>128&&(r=r.slice(0,128)+"..."),`The ${t.includes(".")?"property":"argument"} '${t}' ${n}. Received ${r}`},TypeError);xn("ERR_INVALID_RETURN_VALUE",(t,e,n)=>{var r;let i=n!=null&&(r=n.constructor)!==null&&r!==void 0&&r.name?`instance of ${n.constructor.name}`:`type ${typeof n}`;return`Expected ${t} to be returned from the "${e}" function but got ${i}.`},TypeError);xn("ERR_MISSING_ARGS",(...t)=>{sa(t.length>0,"At least one arg needs to be specified");let e,n=t.length;switch(t=(Array.isArray(t)?t:[t]).map(r=>`"${r}"`).join(" or "),n){case 1:e+=`The ${t[0]} argument`;break;case 2:e+=`The ${t[0]} and ${t[1]} arguments`;break;default:{let r=t.pop();e+=`The ${t.join(", ")}, and ${r} arguments`}break}return`${e} must be specified`},TypeError);xn("ERR_OUT_OF_RANGE",(t,e,n)=>{sa(e,'Missing "range" argument');let r;if(Number.isInteger(n)&&Math.abs(n)>2**32)r=$G(String(n));else if(typeof n=="bigint"){r=String(n);let i=BigInt(2)**BigInt(32);(n>i||n<-i)&&(r=$G(r)),r+="n"}else r=dT(n);return`The value of "${t}" is out of range. It must be ${e}. Received ${r}`},RangeError);xn("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);xn("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);xn("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);xn("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);xn("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);xn("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);xn("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);xn("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);xn("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);xn("ERR_STREAM_WRITE_AFTER_END","write after end",Error);xn("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);WG.exports={AbortError:fN,aggregateTwoErrors:kG(Rfe),hideStackFrames:kG,codes:fT}});var rr=C((T1e,hN)=>{"use strict";var Afe=require("buffer"),{format:mfe,inspect:gfe}=dN(),{codes:{ERR_INVALID_ARG_TYPE:EN}}=Vn(),{kResistStopPropagation:Ife,AggregateError:_fe,SymbolDispose:Nfe}=Rt(),Ofe=globalThis.AbortSignal||kt().AbortSignal,Cfe=globalThis.AbortController||kt().AbortController,bfe=Object.getPrototypeOf(async function(){}).constructor,YG=globalThis.Blob||Afe.Blob,yfe=typeof YG<"u"?function(e){return e instanceof YG}:function(e){return!1},VG=(t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new EN(e,"AbortSignal",t)},wfe=(t,e)=>{if(typeof t!="function")throw new EN(e,"Function",t)};hN.exports={AggregateError:_fe,kEmptyObject:Object.freeze({}),once(t){let e=!1;return function(...n){e||(e=!0,t.apply(this,n))}},createDeferredPromise:function(){let t,e;return{promise:new Promise((r,i)=>{t=r,e=i}),resolve:t,reject:e}},promisify(t){return new Promise((e,n)=>{t((r,...i)=>r?n(r):e(...i))})},debuglog(){return function(){}},format:mfe,inspect:gfe,types:{isAsyncFunction(t){return t instanceof bfe},isArrayBufferView(t){return ArrayBuffer.isView(t)}},isBlob:yfe,deprecate(t,e){return t},addAbortListener:require("events").addAbortListener||function(e,n){if(e===void 0)throw new EN("signal","AbortSignal",e);VG(e,"signal"),wfe(n,"listener");let r;return e.aborted?queueMicrotask(()=>n()):(e.addEventListener("abort",n,{__proto__:null,once:!0,[Ife]:!0}),r=()=>{e.removeEventListener("abort",n)}),{__proto__:null,[Nfe](){var i;(i=r)===null||i===void 0||i()}}},AbortSignalAny:Ofe.any||function(e){if(e.length===1)return e[0];let n=new Cfe,r=()=>n.abort();return e.forEach(i=>{VG(i,"signals"),i.addEventListener("abort",r,{once:!0})}),n.signal.addEventListener("abort",()=>{e.forEach(i=>i.removeEventListener("abort",r))},{once:!0}),n.signal}};hN.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")});var Kl=C((S1e,t$)=>{"use strict";var{ArrayIsArray:TN,ArrayPrototypeIncludes:jG,ArrayPrototypeJoin:KG,ArrayPrototypeMap:Lfe,NumberIsInteger:SN,NumberIsNaN:Dfe,NumberMAX_SAFE_INTEGER:Pfe,NumberMIN_SAFE_INTEGER:xfe,NumberParseInt:vfe,ObjectPrototypeHasOwnProperty:Mfe,RegExpPrototypeExec:JG,String:Ufe,StringPrototypeToUpperCase:Bfe,StringPrototypeTrim:Ffe}=Rt(),{hideStackFrames:Ur,codes:{ERR_SOCKET_BAD_PORT:Hfe,ERR_INVALID_ARG_TYPE:qn,ERR_INVALID_ARG_VALUE:jl,ERR_OUT_OF_RANGE:oa,ERR_UNKNOWN_SIGNAL:qG}}=Vn(),{normalizeEncoding:Gfe}=rr(),{isAsyncFunction:$fe,isArrayBufferView:kfe}=rr().types,XG={};function Wfe(t){return t===(t|0)}function Yfe(t){return t===t>>>0}var Vfe=/^[0-7]+$/,qfe="must be a 32-bit unsigned integer or an octal string";function Xfe(t,e,n){if(typeof t>"u"&&(t=n),typeof t=="string"){if(JG(Vfe,t)===null)throw new jl(e,t,qfe);t=vfe(t,8)}return QG(t,e),t}var zfe=Ur((t,e,n=xfe,r=Pfe)=>{if(typeof t!="number")throw new qn(e,"number",t);if(!SN(t))throw new oa(e,"an integer",t);if(t<n||t>r)throw new oa(e,`>= ${n} && <= ${r}`,t)}),jfe=Ur((t,e,n=-2147483648,r=2147483647)=>{if(typeof t!="number")throw new qn(e,"number",t);if(!SN(t))throw new oa(e,"an integer",t);if(t<n||t>r)throw new oa(e,`>= ${n} && <= ${r}`,t)}),QG=Ur((t,e,n=!1)=>{if(typeof t!="number")throw new qn(e,"number",t);if(!SN(t))throw new oa(e,"an integer",t);let r=n?1:0,i=4294967295;if(t<r||t>i)throw new oa(e,`>= ${r} && <= ${i}`,t)});function RN(t,e){if(typeof t!="string")throw new qn(e,"string",t)}function Kfe(t,e,n=void 0,r){if(typeof t!="number")throw new qn(e,"number",t);if(n!=null&&t<n||r!=null&&t>r||(n!=null||r!=null)&&Dfe(t))throw new oa(e,`${n!=null?`>= ${n}`:""}${n!=null&&r!=null?" && ":""}${r!=null?`<= ${r}`:""}`,t)}var Jfe=Ur((t,e,n)=>{if(!jG(n,t)){let i="must be one of: "+KG(Lfe(n,s=>typeof s=="string"?`'${s}'`:Ufe(s)),", ");throw new jl(e,t,i)}});function ZG(t,e){if(typeof t!="boolean")throw new qn(e,"boolean",t)}function pN(t,e,n){return t==null||!Mfe(t,e)?n:t[e]}var Qfe=Ur((t,e,n=null)=>{let r=pN(n,"allowArray",!1),i=pN(n,"allowFunction",!1);if(!pN(n,"nullable",!1)&&t===null||!r&&TN(t)||typeof t!="object"&&(!i||typeof t!="function"))throw new qn(e,"Object",t)}),Zfe=Ur((t,e)=>{if(t!=null&&typeof t!="object"&&typeof t!="function")throw new qn(e,"a dictionary",t)}),ET=Ur((t,e,n=0)=>{if(!TN(t))throw new qn(e,"Array",t);if(t.length<n){let r=`must be longer than ${n}`;throw new jl(e,t,r)}});function eEe(t,e){ET(t,e);for(let n=0;n<t.length;n++)RN(t[n],`${e}[${n}]`)}function tEe(t,e){ET(t,e);for(let n=0;n<t.length;n++)ZG(t[n],`${e}[${n}]`)}function nEe(t,e){ET(t,e);for(let n=0;n<t.length;n++){let r=t[n],i=`${e}[${n}]`;if(r==null)throw new qn(i,"AbortSignal",r);e$(r,i)}}function rEe(t,e="signal"){if(RN(t,e),XG[t]===void 0)throw XG[Bfe(t)]!==void 0?new qG(t+" (signals must use all capital letters)"):new qG(t)}var iEe=Ur((t,e="buffer")=>{if(!kfe(t))throw new qn(e,["Buffer","TypedArray","DataView"],t)});function sEe(t,e){let n=Gfe(e),r=t.length;if(n==="hex"&&r%2!==0)throw new jl("encoding",e,`is invalid for data of length ${r}`)}function oEe(t,e="Port",n=!0){if(typeof t!="number"&&typeof t!="string"||typeof t=="string"&&Ffe(t).length===0||+t!==+t>>>0||t>65535||t===0&&!n)throw new Hfe(e,t,n);return t|0}var e$=Ur((t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new qn(e,"AbortSignal",t)}),aEe=Ur((t,e)=>{if(typeof t!="function")throw new qn(e,"Function",t)}),lEe=Ur((t,e)=>{if(typeof t!="function"||$fe(t))throw new qn(e,"Function",t)}),cEe=Ur((t,e)=>{if(t!==void 0)throw new qn(e,"undefined",t)});function uEe(t,e,n){if(!jG(n,t))throw new qn(e,`('${KG(n,"|")}')`,t)}var dEe=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function zG(t,e){if(typeof t>"u"||!JG(dEe,t))throw new jl(e,t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function fEe(t){if(typeof t=="string")return zG(t,"hints"),t;if(TN(t)){let e=t.length,n="";if(e===0)return n;for(let r=0;r<e;r++){let i=t[r];zG(i,"hints"),n+=i,r!==e-1&&(n+=", ")}return n}throw new jl("hints",t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}t$.exports={isInt32:Wfe,isUint32:Yfe,parseFileMode:Xfe,validateArray:ET,validateStringArray:eEe,validateBooleanArray:tEe,validateAbortSignalArray:nEe,validateBoolean:ZG,validateBuffer:iEe,validateDictionary:Zfe,validateEncoding:sEe,validateFunction:aEe,validateInt32:jfe,validateInteger:zfe,validateNumber:Kfe,validateObject:Qfe,validateOneOf:Jfe,validatePlainFunction:lEe,validatePort:oEe,validateSignalName:rEe,validateString:RN,validateUint32:QG,validateUndefined:cEe,validateUnion:uEe,validateAbortSignal:e$,validateLinkHeaderValue:fEe}});var bi=C((R1e,T$)=>{"use strict";var{SymbolAsyncIterator:n$,SymbolIterator:r$,SymbolFor:aa}=Rt(),i$=aa("nodejs.stream.destroyed"),s$=aa("nodejs.stream.errored"),AN=aa("nodejs.stream.readable"),mN=aa("nodejs.stream.writable"),o$=aa("nodejs.stream.disturbed"),EEe=aa("nodejs.webstream.isClosedPromise"),hEe=aa("nodejs.webstream.controllerErrorFunction");function hT(t,e=!1){var n;return!!(t&&typeof t.pipe=="function"&&typeof t.on=="function"&&(!e||typeof t.pause=="function"&&typeof t.resume=="function")&&(!t._writableState||((n=t._readableState)===null||n===void 0?void 0:n.readable)!==!1)&&(!t._writableState||t._readableState))}function pT(t){var e;return!!(t&&typeof t.write=="function"&&typeof t.on=="function"&&(!t._readableState||((e=t._writableState)===null||e===void 0?void 0:e.writable)!==!1))}function pEe(t){return!!(t&&typeof t.pipe=="function"&&t._readableState&&typeof t.on=="function"&&typeof t.write=="function")}function Ci(t){return t&&(t._readableState||t._writableState||typeof t.write=="function"&&typeof t.on=="function"||typeof t.pipe=="function"&&typeof t.on=="function")}function a$(t){return!!(t&&!Ci(t)&&typeof t.pipeThrough=="function"&&typeof t.getReader=="function"&&typeof t.cancel=="function")}function l$(t){return!!(t&&!Ci(t)&&typeof t.getWriter=="function"&&typeof t.abort=="function")}function c$(t){return!!(t&&!Ci(t)&&typeof t.readable=="object"&&typeof t.writable=="object")}function TEe(t){return a$(t)||l$(t)||c$(t)}function SEe(t,e){return t==null?!1:e===!0?typeof t[n$]=="function":e===!1?typeof t[r$]=="function":typeof t[n$]=="function"||typeof t[r$]=="function"}function TT(t){if(!Ci(t))return null;let e=t._writableState,n=t._readableState,r=e||n;return!!(t.destroyed||t[i$]||r!=null&&r.destroyed)}function u$(t){if(!pT(t))return null;if(t.writableEnded===!0)return!0;let e=t._writableState;return e!=null&&e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function REe(t,e){if(!pT(t))return null;if(t.writableFinished===!0)return!0;let n=t._writableState;return n!=null&&n.errored?!1:typeof n?.finished!="boolean"?null:!!(n.finished||e===!1&&n.ended===!0&&n.length===0)}function AEe(t){if(!hT(t))return null;if(t.readableEnded===!0)return!0;let e=t._readableState;return!e||e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function d$(t,e){if(!hT(t))return null;let n=t._readableState;return n!=null&&n.errored?!1:typeof n?.endEmitted!="boolean"?null:!!(n.endEmitted||e===!1&&n.ended===!0&&n.length===0)}function f$(t){return t&&t[AN]!=null?t[AN]:typeof t?.readable!="boolean"?null:TT(t)?!1:hT(t)&&t.readable&&!d$(t)}function E$(t){return t&&t[mN]!=null?t[mN]:typeof t?.writable!="boolean"?null:TT(t)?!1:pT(t)&&t.writable&&!u$(t)}function mEe(t,e){return Ci(t)?TT(t)?!0:!(e?.readable!==!1&&f$(t)||e?.writable!==!1&&E$(t)):null}function gEe(t){var e,n;return Ci(t)?t.writableErrored?t.writableErrored:(e=(n=t._writableState)===null||n===void 0?void 0:n.errored)!==null&&e!==void 0?e:null:null}function IEe(t){var e,n;return Ci(t)?t.readableErrored?t.readableErrored:(e=(n=t._readableState)===null||n===void 0?void 0:n.errored)!==null&&e!==void 0?e:null:null}function _Ee(t){if(!Ci(t))return null;if(typeof t.closed=="boolean")return t.closed;let e=t._writableState,n=t._readableState;return typeof e?.closed=="boolean"||typeof n?.closed=="boolean"?e?.closed||n?.closed:typeof t._closed=="boolean"&&h$(t)?t._closed:null}function h$(t){return typeof t._closed=="boolean"&&typeof t._defaultKeepAlive=="boolean"&&typeof t._removedConnection=="boolean"&&typeof t._removedContLen=="boolean"}function p$(t){return typeof t._sent100=="boolean"&&h$(t)}function NEe(t){var e;return typeof t._consuming=="boolean"&&typeof t._dumped=="boolean"&&((e=t.req)===null||e===void 0?void 0:e.upgradeOrConnect)===void 0}function OEe(t){if(!Ci(t))return null;let e=t._writableState,n=t._readableState,r=e||n;return!r&&p$(t)||!!(r&&r.autoDestroy&&r.emitClose&&r.closed===!1)}function CEe(t){var e;return!!(t&&((e=t[o$])!==null&&e!==void 0?e:t.readableDidRead||t.readableAborted))}function bEe(t){var e,n,r,i,s,o,a,l,c,u;return!!(t&&((e=(n=(r=(i=(s=(o=t[s$])!==null&&o!==void 0?o:t.readableErrored)!==null&&s!==void 0?s:t.writableErrored)!==null&&i!==void 0?i:(a=t._readableState)===null||a===void 0?void 0:a.errorEmitted)!==null&&r!==void 0?r:(l=t._writableState)===null||l===void 0?void 0:l.errorEmitted)!==null&&n!==void 0?n:(c=t._readableState)===null||c===void 0?void 0:c.errored)!==null&&e!==void 0?e:!((u=t._writableState)===null||u===void 0)&&u.errored))}T$.exports={isDestroyed:TT,kIsDestroyed:i$,isDisturbed:CEe,kIsDisturbed:o$,isErrored:bEe,kIsErrored:s$,isReadable:f$,kIsReadable:AN,kIsClosedPromise:EEe,kControllerErrorFunction:hEe,kIsWritable:mN,isClosed:_Ee,isDuplexNodeStream:pEe,isFinished:mEe,isIterable:SEe,isReadableNodeStream:hT,isReadableStream:a$,isReadableEnded:AEe,isReadableFinished:d$,isReadableErrored:IEe,isNodeStream:Ci,isWebStream:TEe,isWritable:E$,isWritableNodeStream:pT,isWritableStream:l$,isWritableEnded:u$,isWritableFinished:REe,isWritableErrored:gEe,isServerRequest:NEe,isServerResponse:p$,willEmitClose:OEe,isTransformStream:c$}});var Es=C((A1e,ON)=>{"use strict";var no=it(),{AbortError:O$,codes:yEe}=Vn(),{ERR_INVALID_ARG_TYPE:wEe,ERR_STREAM_PREMATURE_CLOSE:S$}=yEe,{kEmptyObject:IN,once:_N}=rr(),{validateAbortSignal:LEe,validateFunction:DEe,validateObject:PEe,validateBoolean:xEe}=Kl(),{Promise:vEe,PromisePrototypeThen:MEe,SymbolDispose:C$}=Rt(),{isClosed:UEe,isReadable:R$,isReadableNodeStream:gN,isReadableStream:BEe,isReadableFinished:A$,isReadableErrored:m$,isWritable:g$,isWritableNodeStream:I$,isWritableStream:FEe,isWritableFinished:_$,isWritableErrored:N$,isNodeStream:HEe,willEmitClose:GEe,kIsClosedPromise:$Ee}=bi(),Jl;function kEe(t){return t.setHeader&&typeof t.abort=="function"}var NN=()=>{};function b$(t,e,n){var r,i;if(arguments.length===2?(n=e,e=IN):e==null?e=IN:PEe(e,"options"),DEe(n,"callback"),LEe(e.signal,"options.signal"),n=_N(n),BEe(t)||FEe(t))return WEe(t,e,n);if(!HEe(t))throw new wEe("stream",["ReadableStream","WritableStream","Stream"],t);let s=(r=e.readable)!==null&&r!==void 0?r:gN(t),o=(i=e.writable)!==null&&i!==void 0?i:I$(t),a=t._writableState,l=t._readableState,c=()=>{t.writable||E()},u=GEe(t)&&gN(t)===s&&I$(t)===o,d=_$(t,!1),E=()=>{d=!0,t.destroyed&&(u=!1),!(u&&(!t.readable||s))&&(!s||f)&&n.call(t)},f=A$(t,!1),p=()=>{f=!0,t.destroyed&&(u=!1),!(u&&(!t.writable||o))&&(!o||d)&&n.call(t)},h=N=>{n.call(t,N)},T=UEe(t),S=()=>{T=!0;let N=N$(t)||m$(t);if(N&&typeof N!="boolean")return n.call(t,N);if(s&&!f&&gN(t,!0)&&!A$(t,!1))return n.call(t,new S$);if(o&&!d&&!_$(t,!1))return n.call(t,new S$);n.call(t)},A=()=>{T=!0;let N=N$(t)||m$(t);if(N&&typeof N!="boolean")return n.call(t,N);n.call(t)},R=()=>{t.req.on("finish",E)};kEe(t)?(t.on("complete",E),u||t.on("abort",S),t.req?R():t.on("request",R)):o&&!a&&(t.on("end",c),t.on("close",c)),!u&&typeof t.aborted=="boolean"&&t.on("aborted",S),t.on("end",p),t.on("finish",E),e.error!==!1&&t.on("error",h),t.on("close",S),T?no.nextTick(S):a!=null&&a.errorEmitted||l!=null&&l.errorEmitted?u||no.nextTick(A):(!s&&(!u||R$(t))&&(d||g$(t)===!1)||!o&&(!u||g$(t))&&(f||R$(t)===!1)||l&&t.req&&t.aborted)&&no.nextTick(A);let m=()=>{n=NN,t.removeListener("aborted",S),t.removeListener("complete",E),t.removeListener("abort",S),t.removeListener("request",R),t.req&&t.req.removeListener("finish",E),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",E),t.removeListener("end",p),t.removeListener("error",h),t.removeListener("close",S)};if(e.signal&&!T){let N=()=>{let L=n;m(),L.call(t,new O$(void 0,{cause:e.signal.reason}))};if(e.signal.aborted)no.nextTick(N);else{Jl=Jl||rr().addAbortListener;let L=Jl(e.signal,N),I=n;n=_N((...D)=>{L[C$](),I.apply(t,D)})}}return m}function WEe(t,e,n){let r=!1,i=NN;if(e.signal)if(i=()=>{r=!0,n.call(t,new O$(void 0,{cause:e.signal.reason}))},e.signal.aborted)no.nextTick(i);else{Jl=Jl||rr().addAbortListener;let o=Jl(e.signal,i),a=n;n=_N((...l)=>{o[C$](),a.apply(t,l)})}let s=(...o)=>{r||no.nextTick(()=>n.apply(t,o))};return MEe(t[$Ee].promise,s,s),NN}function YEe(t,e){var n;let r=!1;return e===null&&(e=IN),(n=e)!==null&&n!==void 0&&n.cleanup&&(xEe(e.cleanup,"cleanup"),r=e.cleanup),new vEe((i,s)=>{let o=b$(t,e,a=>{r&&o(),a?s(a):i()})})}ON.exports=b$;ON.exports.finished=YEe});var la=C((m1e,M$)=>{"use strict";var yi=it(),{aggregateTwoErrors:VEe,codes:{ERR_MULTIPLE_CALLBACK:qEe},AbortError:XEe}=Vn(),{Symbol:L$}=Rt(),{kIsDestroyed:zEe,isDestroyed:jEe,isFinished:KEe,isServerRequest:JEe}=bi(),D$=L$("kDestroy"),CN=L$("kConstruct");function P$(t,e,n){t&&(t.stack,e&&!e.errored&&(e.errored=t),n&&!n.errored&&(n.errored=t))}function QEe(t,e){let n=this._readableState,r=this._writableState,i=r||n;return r!=null&&r.destroyed||n!=null&&n.destroyed?(typeof e=="function"&&e(),this):(P$(t,r,n),r&&(r.destroyed=!0),n&&(n.destroyed=!0),i.constructed?y$(this,t,e):this.once(D$,function(s){y$(this,VEe(s,t),e)}),this)}function y$(t,e,n){let r=!1;function i(s){if(r)return;r=!0;let o=t._readableState,a=t._writableState;P$(s,a,o),a&&(a.closed=!0),o&&(o.closed=!0),typeof n=="function"&&n(s),s?yi.nextTick(ZEe,t,s):yi.nextTick(x$,t)}try{t._destroy(e||null,i)}catch(s){i(s)}}function ZEe(t,e){bN(t,e),x$(t)}function x$(t){let e=t._readableState,n=t._writableState;n&&(n.closeEmitted=!0),e&&(e.closeEmitted=!0),(n!=null&&n.emitClose||e!=null&&e.emitClose)&&t.emit("close")}function bN(t,e){let n=t._readableState,r=t._writableState;r!=null&&r.errorEmitted||n!=null&&n.errorEmitted||(r&&(r.errorEmitted=!0),n&&(n.errorEmitted=!0),t.emit("error",e))}function ehe(){let t=this._readableState,e=this._writableState;t&&(t.constructed=!0,t.closed=!1,t.closeEmitted=!1,t.destroyed=!1,t.errored=null,t.errorEmitted=!1,t.reading=!1,t.ended=t.readable===!1,t.endEmitted=t.readable===!1),e&&(e.constructed=!0,e.destroyed=!1,e.closed=!1,e.closeEmitted=!1,e.errored=null,e.errorEmitted=!1,e.finalCalled=!1,e.prefinished=!1,e.ended=e.writable===!1,e.ending=e.writable===!1,e.finished=e.writable===!1)}function yN(t,e,n){let r=t._readableState,i=t._writableState;if(i!=null&&i.destroyed||r!=null&&r.destroyed)return this;r!=null&&r.autoDestroy||i!=null&&i.autoDestroy?t.destroy(e):e&&(e.stack,i&&!i.errored&&(i.errored=e),r&&!r.errored&&(r.errored=e),n?yi.nextTick(bN,t,e):bN(t,e))}function the(t,e){if(typeof t._construct!="function")return;let n=t._readableState,r=t._writableState;n&&(n.constructed=!1),r&&(r.constructed=!1),t.once(CN,e),!(t.listenerCount(CN)>1)&&yi.nextTick(nhe,t)}function nhe(t){let e=!1;function n(r){if(e){yN(t,r??new qEe);return}e=!0;let i=t._readableState,s=t._writableState,o=s||i;i&&(i.constructed=!0),s&&(s.constructed=!0),o.destroyed?t.emit(D$,r):r?yN(t,r,!0):yi.nextTick(rhe,t)}try{t._construct(r=>{yi.nextTick(n,r)})}catch(r){yi.nextTick(n,r)}}function rhe(t){t.emit(CN)}function w$(t){return t?.setHeader&&typeof t.abort=="function"}function v$(t){t.emit("close")}function ihe(t,e){t.emit("error",e),yi.nextTick(v$,t)}function she(t,e){!t||jEe(t)||(!e&&!KEe(t)&&(e=new XEe),JEe(t)?(t.socket=null,t.destroy(e)):w$(t)?t.abort():w$(t.req)?t.req.abort():typeof t.destroy=="function"?t.destroy(e):typeof t.close=="function"?t.close():e?yi.nextTick(ihe,t,e):yi.nextTick(v$,t),t.destroyed||(t[zEe]=!0))}M$.exports={construct:the,destroyer:she,destroy:QEe,undestroy:ehe,errorOrDestroy:yN}});var AT=C((g1e,B$)=>{"use strict";var{ArrayIsArray:ohe,ObjectSetPrototypeOf:U$}=Rt(),{EventEmitter:ST}=require("events");function RT(t){ST.call(this,t)}U$(RT.prototype,ST.prototype);U$(RT,ST);RT.prototype.pipe=function(t,e){let n=this;function r(u){t.writable&&t.write(u)===!1&&n.pause&&n.pause()}n.on("data",r);function i(){n.readable&&n.resume&&n.resume()}t.on("drain",i),!t._isStdio&&(!e||e.end!==!1)&&(n.on("end",o),n.on("close",a));let s=!1;function o(){s||(s=!0,t.end())}function a(){s||(s=!0,typeof t.destroy=="function"&&t.destroy())}function l(u){c(),ST.listenerCount(this,"error")===0&&this.emit("error",u)}wN(n,"error",l),wN(t,"error",l);function c(){n.removeListener("data",r),t.removeListener("drain",i),n.removeListener("end",o),n.removeListener("close",a),n.removeListener("error",l),t.removeListener("error",l),n.removeListener("end",c),n.removeListener("close",c),t.removeListener("close",c)}return n.on("end",c),n.on("close",c),t.on("close",c),t.emit("pipe",n),t};function wN(t,e,n){if(typeof t.prependListener=="function")return t.prependListener(e,n);!t._events||!t._events[e]?t.on(e,n):ohe(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]}B$.exports={Stream:RT,prependListener:wN}});var Wd=C((I1e,mT)=>{"use strict";var{SymbolDispose:ahe}=Rt(),{AbortError:F$,codes:lhe}=Vn(),{isNodeStream:H$,isWebStream:che,kControllerErrorFunction:uhe}=bi(),dhe=Es(),{ERR_INVALID_ARG_TYPE:G$}=lhe,LN,fhe=(t,e)=>{if(typeof t!="object"||!("aborted"in t))throw new G$(e,"AbortSignal",t)};mT.exports.addAbortSignal=function(e,n){if(fhe(e,"signal"),!H$(n)&&!che(n))throw new G$("stream",["ReadableStream","WritableStream","Stream"],n);return mT.exports.addAbortSignalNoValidate(e,n)};mT.exports.addAbortSignalNoValidate=function(t,e){if(typeof t!="object"||!("aborted"in t))return e;let n=H$(e)?()=>{e.destroy(new F$(void 0,{cause:t.reason}))}:()=>{e[uhe](new F$(void 0,{cause:t.reason}))};if(t.aborted)n();else{LN=LN||rr().addAbortListener;let r=LN(t,n);dhe(e,r[ahe])}return e}});var W$=C((N1e,k$)=>{"use strict";var{StringPrototypeSlice:$$,SymbolIterator:Ehe,TypedArrayPrototypeSet:gT,Uint8Array:hhe}=Rt(),{Buffer:DN}=require("buffer"),{inspect:phe}=rr();k$.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){let n={data:e,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}unshift(e){let n={data:e,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}shift(){if(this.length===0)return;let e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return"";let n=this.head,r=""+n.data;for(;(n=n.next)!==null;)r+=e+n.data;return r}concat(e){if(this.length===0)return DN.alloc(0);let n=DN.allocUnsafe(e>>>0),r=this.head,i=0;for(;r;)gT(n,r.data,i),i+=r.data.length,r=r.next;return n}consume(e,n){let r=this.head.data;if(e<r.length){let i=r.slice(0,e);return this.head.data=r.slice(e),i}return e===r.length?this.shift():n?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[Ehe](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let n="",r=this.head,i=0;do{let s=r.data;if(e>s.length)n+=s,e-=s.length;else{e===s.length?(n+=s,++i,r.next?this.head=r.next:this.head=this.tail=null):(n+=$$(s,0,e),this.head=r,r.data=$$(s,e));break}++i}while((r=r.next)!==null);return this.length-=i,n}_getBuffer(e){let n=DN.allocUnsafe(e),r=e,i=this.head,s=0;do{let o=i.data;if(e>o.length)gT(n,o,r-e),e-=o.length;else{e===o.length?(gT(n,o,r-e),++s,i.next?this.head=i.next:this.head=this.tail=null):(gT(n,new hhe(o.buffer,o.byteOffset,e),r-e),this.head=i,i.data=o.slice(e));break}++s}while((i=i.next)!==null);return this.length-=s,n}[Symbol.for("nodejs.util.inspect.custom")](e,n){return phe(this,{...n,depth:0,customInspect:!1})}}});var Yd=C((O1e,X$)=>{"use strict";var{MathFloor:The,NumberIsInteger:She}=Rt(),{validateInteger:Rhe}=Kl(),{ERR_INVALID_ARG_VALUE:Ahe}=Vn().codes,Y$=16*1024,V$=16;function mhe(t,e,n){return t.highWaterMark!=null?t.highWaterMark:e?t[n]:null}function q$(t){return t?V$:Y$}function ghe(t,e){Rhe(e,"value",0),t?V$=e:Y$=e}function Ihe(t,e,n,r){let i=mhe(e,r,n);if(i!=null){if(!She(i)||i<0){let s=r?`options.${n}`:"options.highWaterMark";throw new Ahe(s,i)}return The(i)}return q$(t.objectMode)}X$.exports={getHighWaterMark:Ihe,getDefaultHighWaterMark:q$,setDefaultHighWaterMark:ghe}});var PN=C((C1e,J$)=>{"use strict";var z$=it(),{PromisePrototypeThen:_he,SymbolAsyncIterator:j$,SymbolIterator:K$}=Rt(),{Buffer:Nhe}=require("buffer"),{ERR_INVALID_ARG_TYPE:Ohe,ERR_STREAM_NULL_VALUES:Che}=Vn().codes;function bhe(t,e,n){let r;if(typeof e=="string"||e instanceof Nhe)return new t({objectMode:!0,...n,read(){this.push(e),this.push(null)}});let i;if(e&&e[j$])i=!0,r=e[j$]();else if(e&&e[K$])i=!1,r=e[K$]();else throw new Ohe("iterable",["Iterable"],e);let s=new t({objectMode:!0,highWaterMark:1,...n}),o=!1;s._read=function(){o||(o=!0,l())},s._destroy=function(c,u){_he(a(c),()=>z$.nextTick(u,c),d=>z$.nextTick(u,d||c))};async function a(c){let u=c!=null,d=typeof r.throw=="function";if(u&&d){let{value:E,done:f}=await r.throw(c);if(await E,f)return}if(typeof r.return=="function"){let{value:E}=await r.return();await E}}async function l(){for(;;){try{let{value:c,done:u}=i?await r.next():r.next();if(u)s.push(null);else{let d=c&&typeof c.then=="function"?await c:c;if(d===null)throw o=!1,new Che;if(s.push(d))continue;o=!1}}catch(c){s.destroy(c)}break}}return s}J$.exports=bhe});var qd=C((b1e,pk)=>{"use strict";var Zr=it(),{ArrayPrototypeIndexOf:yhe,NumberIsInteger:whe,NumberIsNaN:Lhe,NumberParseInt:Dhe,ObjectDefineProperties:GN,ObjectKeys:Phe,ObjectSetPrototypeOf:ek,Promise:tk,SafeSet:xhe,SymbolAsyncDispose:vhe,SymbolAsyncIterator:Mhe,Symbol:Uhe}=Rt();pk.exports=be;be.ReadableState=OT;var{EventEmitter:Bhe}=require("events"),{Stream:ro,prependListener:Fhe}=AT(),{Buffer:xN}=require("buffer"),{addAbortSignal:Hhe}=Wd(),nk=Es(),ke=rr().debuglog("stream",t=>{ke=t}),Ghe=W$(),ec=la(),{getHighWaterMark:$he,getDefaultHighWaterMark:khe}=Yd(),{aggregateTwoErrors:Q$,codes:{ERR_INVALID_ARG_TYPE:Whe,ERR_METHOD_NOT_IMPLEMENTED:Yhe,ERR_OUT_OF_RANGE:Vhe,ERR_STREAM_PUSH_AFTER_EOF:qhe,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:Xhe},AbortError:zhe}=Vn(),{validateObject:jhe}=Kl(),ca=Uhe("kPaused"),{StringDecoder:rk}=ad(),Khe=PN();ek(be.prototype,ro.prototype);ek(be,ro);var vN=()=>{},{errorOrDestroy:Ql}=ec,Zl=1,Jhe=2,ik=4,Vd=8,sk=16,IT=32,_T=64,ok=128,Qhe=256,Zhe=512,epe=1024,FN=2048,HN=4096,tpe=8192,npe=16384,rpe=32768,ak=65536,ipe=1<<17,spe=1<<18;function tn(t){return{enumerable:!1,get(){return(this.state&t)!==0},set(e){e?this.state|=t:this.state&=~t}}}GN(OT.prototype,{objectMode:tn(Zl),ended:tn(Jhe),endEmitted:tn(ik),reading:tn(Vd),constructed:tn(sk),sync:tn(IT),needReadable:tn(_T),emittedReadable:tn(ok),readableListening:tn(Qhe),resumeScheduled:tn(Zhe),errorEmitted:tn(epe),emitClose:tn(FN),autoDestroy:tn(HN),destroyed:tn(tpe),closed:tn(npe),closeEmitted:tn(rpe),multiAwaitDrain:tn(ak),readingMore:tn(ipe),dataEmitted:tn(spe)});function OT(t,e,n){typeof n!="boolean"&&(n=e instanceof wi()),this.state=FN|HN|sk|IT,t&&t.objectMode&&(this.state|=Zl),n&&t&&t.readableObjectMode&&(this.state|=Zl),this.highWaterMark=t?$he(this,t,"readableHighWaterMark",n):khe(!1),this.buffer=new Ghe,this.length=0,this.pipes=[],this.flowing=null,this[ca]=null,t&&t.emitClose===!1&&(this.state&=~FN),t&&t.autoDestroy===!1&&(this.state&=~HN),this.errored=null,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,t&&t.encoding&&(this.decoder=new rk(t.encoding),this.encoding=t.encoding)}function be(t){if(!(this instanceof be))return new be(t);let e=this instanceof wi();this._readableState=new OT(t,this,e),t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&!e&&Hhe(t.signal,this)),ro.call(this,t),ec.construct(this,()=>{this._readableState.needReadable&&NT(this,this._readableState)})}be.prototype.destroy=ec.destroy;be.prototype._undestroy=ec.undestroy;be.prototype._destroy=function(t,e){e(t)};be.prototype[Bhe.captureRejectionSymbol]=function(t){this.destroy(t)};be.prototype[vhe]=function(){let t;return this.destroyed||(t=this.readableEnded?null:new zhe,this.destroy(t)),new tk((e,n)=>nk(this,r=>r&&r!==t?n(r):e(null)))};be.prototype.push=function(t,e){return lk(this,t,e,!1)};be.prototype.unshift=function(t,e){return lk(this,t,e,!0)};function lk(t,e,n,r){ke("readableAddChunk",e);let i=t._readableState,s;if((i.state&Zl)===0&&(typeof e=="string"?(n=n||i.defaultEncoding,i.encoding!==n&&(r&&i.encoding?e=xN.from(e,n).toString(i.encoding):(e=xN.from(e,n),n=""))):e instanceof xN?n="":ro._isUint8Array(e)?(e=ro._uint8ArrayToBuffer(e),n=""):e!=null&&(s=new Whe("chunk",["string","Buffer","Uint8Array"],e))),s)Ql(t,s);else if(e===null)i.state&=~Vd,lpe(t,i);else if((i.state&Zl)!==0||e&&e.length>0)if(r)if((i.state&ik)!==0)Ql(t,new Xhe);else{if(i.destroyed||i.errored)return!1;MN(t,i,e,!0)}else if(i.ended)Ql(t,new qhe);else{if(i.destroyed||i.errored)return!1;i.state&=~Vd,i.decoder&&!n?(e=i.decoder.write(e),i.objectMode||e.length!==0?MN(t,i,e,!1):NT(t,i)):MN(t,i,e,!1)}else r||(i.state&=~Vd,NT(t,i));return!i.ended&&(i.length<i.highWaterMark||i.length===0)}function MN(t,e,n,r){e.flowing&&e.length===0&&!e.sync&&t.listenerCount("data")>0?((e.state&ak)!==0?e.awaitDrainWriters.clear():e.awaitDrainWriters=null,e.dataEmitted=!0,t.emit("data",n)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),(e.state&_T)!==0&&CT(t)),NT(t,e)}be.prototype.isPaused=function(){let t=this._readableState;return t[ca]===!0||t.flowing===!1};be.prototype.setEncoding=function(t){let e=new rk(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;let n=this._readableState.buffer,r="";for(let i of n)r+=e.write(i);return n.clear(),r!==""&&n.push(r),this._readableState.length=r.length,this};var ope=1073741824;function ape(t){if(t>ope)throw new Vhe("size","<= 1GiB",t);return t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++,t}function Z$(t,e){return t<=0||e.length===0&&e.ended?0:(e.state&Zl)!==0?1:Lhe(t)?e.flowing&&e.length?e.buffer.first().length:e.length:t<=e.length?t:e.ended?e.length:0}be.prototype.read=function(t){ke("read",t),t===void 0?t=NaN:whe(t)||(t=Dhe(t,10));let e=this._readableState,n=t;if(t>e.highWaterMark&&(e.highWaterMark=ape(t)),t!==0&&(e.state&=~ok),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return ke("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?UN(this):CT(this),null;if(t=Z$(t,e),t===0&&e.ended)return e.length===0&&UN(this),null;let r=(e.state&_T)!==0;if(ke("need readable",r),(e.length===0||e.length-t<e.highWaterMark)&&(r=!0,ke("length less than watermark",r)),e.ended||e.reading||e.destroyed||e.errored||!e.constructed)r=!1,ke("reading, ended or constructing",r);else if(r){ke("do read"),e.state|=Vd|IT,e.length===0&&(e.state|=_T);try{this._read(e.highWaterMark)}catch(s){Ql(this,s)}e.state&=~IT,e.reading||(t=Z$(n,e))}let i;return t>0?i=Ek(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.multiAwaitDrain?e.awaitDrainWriters.clear():e.awaitDrainWriters=null),e.length===0&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&UN(this)),i!==null&&!e.errorEmitted&&!e.closeEmitted&&(e.dataEmitted=!0,this.emit("data",i)),i};function lpe(t,e){if(ke("onEofChunk"),!e.ended){if(e.decoder){let n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,e.sync?CT(t):(e.needReadable=!1,e.emittedReadable=!0,ck(t))}}function CT(t){let e=t._readableState;ke("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(ke("emitReadable",e.flowing),e.emittedReadable=!0,Zr.nextTick(ck,t))}function ck(t){let e=t._readableState;ke("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&!e.errored&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,dk(t)}function NT(t,e){!e.readingMore&&e.constructed&&(e.readingMore=!0,Zr.nextTick(cpe,t,e))}function cpe(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){let n=e.length;if(ke("maybeReadMore read 0"),t.read(0),n===e.length)break}e.readingMore=!1}be.prototype._read=function(t){throw new Yhe("_read()")};be.prototype.pipe=function(t,e){let n=this,r=this._readableState;r.pipes.length===1&&(r.multiAwaitDrain||(r.multiAwaitDrain=!0,r.awaitDrainWriters=new xhe(r.awaitDrainWriters?[r.awaitDrainWriters]:[]))),r.pipes.push(t),ke("pipe count=%d opts=%j",r.pipes.length,e);let s=(!e||e.end!==!1)&&t!==Zr.stdout&&t!==Zr.stderr?a:T;r.endEmitted?Zr.nextTick(s):n.once("end",s),t.on("unpipe",o);function o(S,A){ke("onunpipe"),S===n&&A&&A.hasUnpiped===!1&&(A.hasUnpiped=!0,u())}function a(){ke("onend"),t.end()}let l,c=!1;function u(){ke("cleanup"),t.removeListener("close",p),t.removeListener("finish",h),l&&t.removeListener("drain",l),t.removeListener("error",f),t.removeListener("unpipe",o),n.removeListener("end",a),n.removeListener("end",T),n.removeListener("data",E),c=!0,l&&r.awaitDrainWriters&&(!t._writableState||t._writableState.needDrain)&&l()}function d(){c||(r.pipes.length===1&&r.pipes[0]===t?(ke("false write response, pause",0),r.awaitDrainWriters=t,r.multiAwaitDrain=!1):r.pipes.length>1&&r.pipes.includes(t)&&(ke("false write response, pause",r.awaitDrainWriters.size),r.awaitDrainWriters.add(t)),n.pause()),l||(l=upe(n,t),t.on("drain",l))}n.on("data",E);function E(S){ke("ondata");let A=t.write(S);ke("dest.write",A),A===!1&&d()}function f(S){if(ke("onerror",S),T(),t.removeListener("error",f),t.listenerCount("error")===0){let A=t._writableState||t._readableState;A&&!A.errorEmitted?Ql(t,S):t.emit("error",S)}}Fhe(t,"error",f);function p(){t.removeListener("finish",h),T()}t.once("close",p);function h(){ke("onfinish"),t.removeListener("close",p),T()}t.once("finish",h);function T(){ke("unpipe"),n.unpipe(t)}return t.emit("pipe",n),t.writableNeedDrain===!0?d():r.flowing||(ke("pipe resume"),n.resume()),t};function upe(t,e){return function(){let r=t._readableState;r.awaitDrainWriters===e?(ke("pipeOnDrain",1),r.awaitDrainWriters=null):r.multiAwaitDrain&&(ke("pipeOnDrain",r.awaitDrainWriters.size),r.awaitDrainWriters.delete(e)),(!r.awaitDrainWriters||r.awaitDrainWriters.size===0)&&t.listenerCount("data")&&t.resume()}}be.prototype.unpipe=function(t){let e=this._readableState,n={hasUnpiped:!1};if(e.pipes.length===0)return this;if(!t){let i=e.pipes;e.pipes=[],this.pause();for(let s=0;s<i.length;s++)i[s].emit("unpipe",this,{hasUnpiped:!1});return this}let r=yhe(e.pipes,t);return r===-1?this:(e.pipes.splice(r,1),e.pipes.length===0&&this.pause(),t.emit("unpipe",this,n),this)};be.prototype.on=function(t,e){let n=ro.prototype.on.call(this,t,e),r=this._readableState;return t==="data"?(r.readableListening=this.listenerCount("readable")>0,r.flowing!==!1&&this.resume()):t==="readable"&&!r.endEmitted&&!r.readableListening&&(r.readableListening=r.needReadable=!0,r.flowing=!1,r.emittedReadable=!1,ke("on readable",r.length,r.reading),r.length?CT(this):r.reading||Zr.nextTick(dpe,this)),n};be.prototype.addListener=be.prototype.on;be.prototype.removeListener=function(t,e){let n=ro.prototype.removeListener.call(this,t,e);return t==="readable"&&Zr.nextTick(uk,this),n};be.prototype.off=be.prototype.removeListener;be.prototype.removeAllListeners=function(t){let e=ro.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&Zr.nextTick(uk,this),e};function uk(t){let e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&e[ca]===!1?e.flowing=!0:t.listenerCount("data")>0?t.resume():e.readableListening||(e.flowing=null)}function dpe(t){ke("readable nexttick read 0"),t.read(0)}be.prototype.resume=function(){let t=this._readableState;return t.flowing||(ke("resume"),t.flowing=!t.readableListening,fpe(this,t)),t[ca]=!1,this};function fpe(t,e){e.resumeScheduled||(e.resumeScheduled=!0,Zr.nextTick(Epe,t,e))}function Epe(t,e){ke("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),dk(t),e.flowing&&!e.reading&&t.read(0)}be.prototype.pause=function(){return ke("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(ke("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[ca]=!0,this};function dk(t){let e=t._readableState;for(ke("flow",e.flowing);e.flowing&&t.read()!==null;);}be.prototype.wrap=function(t){let e=!1;t.on("data",r=>{!this.push(r)&&t.pause&&(e=!0,t.pause())}),t.on("end",()=>{this.push(null)}),t.on("error",r=>{Ql(this,r)}),t.on("close",()=>{this.destroy()}),t.on("destroy",()=>{this.destroy()}),this._read=()=>{e&&t.resume&&(e=!1,t.resume())};let n=Phe(t);for(let r=1;r<n.length;r++){let i=n[r];this[i]===void 0&&typeof t[i]=="function"&&(this[i]=t[i].bind(t))}return this};be.prototype[Mhe]=function(){return fk(this)};be.prototype.iterator=function(t){return t!==void 0&&jhe(t,"options"),fk(this,t)};function fk(t,e){typeof t.read!="function"&&(t=be.wrap(t,{objectMode:!0}));let n=hpe(t,e);return n.stream=t,n}async function*hpe(t,e){let n=vN;function r(o){this===t?(n(),n=vN):n=o}t.on("readable",r);let i,s=nk(t,{writable:!1},o=>{i=o?Q$(i,o):null,n(),n=vN});try{for(;;){let o=t.destroyed?null:t.read();if(o!==null)yield o;else{if(i)throw i;if(i===null)return;await new tk(r)}}}catch(o){throw i=Q$(i,o),i}finally{(i||e?.destroyOnReturn!==!1)&&(i===void 0||t._readableState.autoDestroy)?ec.destroyer(t,null):(t.off("readable",r),s())}}GN(be.prototype,{readable:{__proto__:null,get(){let t=this._readableState;return!!t&&t.readable!==!1&&!t.destroyed&&!t.errorEmitted&&!t.endEmitted},set(t){this._readableState&&(this._readableState.readable=!!t)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(t){this._readableState&&(this._readableState.destroyed=t)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}});GN(OT.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[ca]!==!1},set(t){this[ca]=!!t}}});be._fromList=Ek;function Ek(t,e){if(e.length===0)return null;let n;return e.objectMode?n=e.buffer.shift():!t||t>=e.length?(e.decoder?n=e.buffer.join(""):e.buffer.length===1?n=e.buffer.first():n=e.buffer.concat(e.length),e.buffer.clear()):n=e.buffer.consume(t,e.decoder),n}function UN(t){let e=t._readableState;ke("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,Zr.nextTick(ppe,e,t))}function ppe(t,e){if(ke("endReadableNT",t.endEmitted,t.length),!t.errored&&!t.closeEmitted&&!t.endEmitted&&t.length===0){if(t.endEmitted=!0,e.emit("end"),e.writable&&e.allowHalfOpen===!1)Zr.nextTick(Tpe,e);else if(t.autoDestroy){let n=e._writableState;(!n||n.autoDestroy&&(n.finished||n.writable===!1))&&e.destroy()}}}function Tpe(t){t.writable&&!t.writableEnded&&!t.destroyed&&t.end()}be.from=function(t,e){return Khe(be,t,e)};var BN;function hk(){return BN===void 0&&(BN={}),BN}be.fromWeb=function(t,e){return hk().newStreamReadableFromReadableStream(t,e)};be.toWeb=function(t,e){return hk().newReadableStreamFromStreamReadable(t,e)};be.wrap=function(t,e){var n,r;return new be({objectMode:(n=(r=t.readableObjectMode)!==null&&r!==void 0?r:t.objectMode)!==null&&n!==void 0?n:!0,...e,destroy(i,s){ec.destroyer(t,i),s(i)}}).wrap(t)}});var DT=C((y1e,bk)=>{"use strict";var ua=it(),{ArrayPrototypeSlice:Rk,Error:Spe,FunctionPrototypeSymbolHasInstance:Ak,ObjectDefineProperty:mk,ObjectDefineProperties:Rpe,ObjectSetPrototypeOf:gk,StringPrototypeToLowerCase:Ape,Symbol:mpe,SymbolHasInstance:gpe}=Rt();bk.exports=Ot;Ot.WritableState=jd;var{EventEmitter:Ipe}=require("events"),Xd=AT().Stream,{Buffer:bT}=require("buffer"),LT=la(),{addAbortSignal:_pe}=Wd(),{getHighWaterMark:Npe,getDefaultHighWaterMark:Ope}=Yd(),{ERR_INVALID_ARG_TYPE:Cpe,ERR_METHOD_NOT_IMPLEMENTED:bpe,ERR_MULTIPLE_CALLBACK:Ik,ERR_STREAM_CANNOT_PIPE:ype,ERR_STREAM_DESTROYED:zd,ERR_STREAM_ALREADY_FINISHED:wpe,ERR_STREAM_NULL_VALUES:Lpe,ERR_STREAM_WRITE_AFTER_END:Dpe,ERR_UNKNOWN_ENCODING:_k}=Vn().codes,{errorOrDestroy:tc}=LT;gk(Ot.prototype,Xd.prototype);gk(Ot,Xd);function WN(){}var nc=mpe("kOnFinished");function jd(t,e,n){typeof n!="boolean"&&(n=e instanceof wi()),this.objectMode=!!(t&&t.objectMode),n&&(this.objectMode=this.objectMode||!!(t&&t.writableObjectMode)),this.highWaterMark=t?Npe(this,t,"writableHighWaterMark",n):Ope(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let r=!!(t&&t.decodeStrings===!1);this.decodeStrings=!r,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=xpe.bind(void 0,e),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,wT(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!t||t.emitClose!==!1,this.autoDestroy=!t||t.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[nc]=[]}function wT(t){t.buffered=[],t.bufferedIndex=0,t.allBuffers=!0,t.allNoop=!0}jd.prototype.getBuffer=function(){return Rk(this.buffered,this.bufferedIndex)};mk(jd.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function Ot(t){let e=this instanceof wi();if(!e&&!Ak(Ot,this))return new Ot(t);this._writableState=new jd(t,this,e),t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&_pe(t.signal,this)),Xd.call(this,t),LT.construct(this,()=>{let n=this._writableState;n.writing||VN(this,n),qN(this,n)})}mk(Ot,gpe,{__proto__:null,value:function(t){return Ak(this,t)?!0:this!==Ot?!1:t&&t._writableState instanceof jd}});Ot.prototype.pipe=function(){tc(this,new ype)};function Nk(t,e,n,r){let i=t._writableState;if(typeof n=="function")r=n,n=i.defaultEncoding;else{if(!n)n=i.defaultEncoding;else if(n!=="buffer"&&!bT.isEncoding(n))throw new _k(n);typeof r!="function"&&(r=WN)}if(e===null)throw new Lpe;if(!i.objectMode)if(typeof e=="string")i.decodeStrings!==!1&&(e=bT.from(e,n),n="buffer");else if(e instanceof bT)n="buffer";else if(Xd._isUint8Array(e))e=Xd._uint8ArrayToBuffer(e),n="buffer";else throw new Cpe("chunk",["string","Buffer","Uint8Array"],e);let s;return i.ending?s=new Dpe:i.destroyed&&(s=new zd("write")),s?(ua.nextTick(r,s),tc(t,s,!0),s):(i.pendingcb++,Ppe(t,i,e,n,r))}Ot.prototype.write=function(t,e,n){return Nk(this,t,e,n)===!0};Ot.prototype.cork=function(){this._writableState.corked++};Ot.prototype.uncork=function(){let t=this._writableState;t.corked&&(t.corked--,t.writing||VN(this,t))};Ot.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=Ape(e)),!bT.isEncoding(e))throw new _k(e);return this._writableState.defaultEncoding=e,this};function Ppe(t,e,n,r,i){let s=e.objectMode?1:n.length;e.length+=s;let o=e.length<e.highWaterMark;return o||(e.needDrain=!0),e.writing||e.corked||e.errored||!e.constructed?(e.buffered.push({chunk:n,encoding:r,callback:i}),e.allBuffers&&r!=="buffer"&&(e.allBuffers=!1),e.allNoop&&i!==WN&&(e.allNoop=!1)):(e.writelen=s,e.writecb=i,e.writing=!0,e.sync=!0,t._write(n,r,e.onwrite),e.sync=!1),o&&!e.errored&&!e.destroyed}function Tk(t,e,n,r,i,s,o){e.writelen=r,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new zd("write")):n?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function Sk(t,e,n,r){--e.pendingcb,r(n),YN(e),tc(t,n)}function xpe(t,e){let n=t._writableState,r=n.sync,i=n.writecb;if(typeof i!="function"){tc(t,new Ik);return}n.writing=!1,n.writecb=null,n.length-=n.writelen,n.writelen=0,e?(e.stack,n.errored||(n.errored=e),t._readableState&&!t._readableState.errored&&(t._readableState.errored=e),r?ua.nextTick(Sk,t,n,e,i):Sk(t,n,e,i)):(n.buffered.length>n.bufferedIndex&&VN(t,n),r?n.afterWriteTickInfo!==null&&n.afterWriteTickInfo.cb===i?n.afterWriteTickInfo.count++:(n.afterWriteTickInfo={count:1,cb:i,stream:t,state:n},ua.nextTick(vpe,n.afterWriteTickInfo)):Ok(t,n,1,i))}function vpe({stream:t,state:e,count:n,cb:r}){return e.afterWriteTickInfo=null,Ok(t,e,n,r)}function Ok(t,e,n,r){for(!e.ending&&!t.destroyed&&e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"));n-- >0;)e.pendingcb--,r();e.destroyed&&YN(e),qN(t,e)}function YN(t){if(t.writing)return;for(let i=t.bufferedIndex;i<t.buffered.length;++i){var e;let{chunk:s,callback:o}=t.buffered[i],a=t.objectMode?1:s.length;t.length-=a,o((e=t.errored)!==null&&e!==void 0?e:new zd("write"))}let n=t[nc].splice(0);for(let i=0;i<n.length;i++){var r;n[i]((r=t.errored)!==null&&r!==void 0?r:new zd("end"))}wT(t)}function VN(t,e){if(e.corked||e.bufferProcessing||e.destroyed||!e.constructed)return;let{buffered:n,bufferedIndex:r,objectMode:i}=e,s=n.length-r;if(!s)return;let o=r;if(e.bufferProcessing=!0,s>1&&t._writev){e.pendingcb-=s-1;let a=e.allNoop?WN:c=>{for(let u=o;u<n.length;++u)n[u].callback(c)},l=e.allNoop&&o===0?n:Rk(n,o);l.allBuffers=e.allBuffers,Tk(t,e,!0,e.length,l,"",a),wT(e)}else{do{let{chunk:a,encoding:l,callback:c}=n[o];n[o++]=null;let u=i?1:a.length;Tk(t,e,!1,u,a,l,c)}while(o<n.length&&!e.writing);o===n.length?wT(e):o>256?(n.splice(0,o),e.bufferedIndex=0):e.bufferedIndex=o}e.bufferProcessing=!1}Ot.prototype._write=function(t,e,n){if(this._writev)this._writev([{chunk:t,encoding:e}],n);else throw new bpe("_write()")};Ot.prototype._writev=null;Ot.prototype.end=function(t,e,n){let r=this._writableState;typeof t=="function"?(n=t,t=null,e=null):typeof e=="function"&&(n=e,e=null);let i;if(t!=null){let s=Nk(this,t,e);s instanceof Spe&&(i=s)}return r.corked&&(r.corked=1,this.uncork()),i||(!r.errored&&!r.ending?(r.ending=!0,qN(this,r,!0),r.ended=!0):r.finished?i=new wpe("end"):r.destroyed&&(i=new zd("end"))),typeof n=="function"&&(i||r.finished?ua.nextTick(n,i):r[nc].push(n)),this};function yT(t){return t.ending&&!t.destroyed&&t.constructed&&t.length===0&&!t.errored&&t.buffered.length===0&&!t.finished&&!t.writing&&!t.errorEmitted&&!t.closeEmitted}function Mpe(t,e){let n=!1;function r(i){if(n){tc(t,i??Ik());return}if(n=!0,e.pendingcb--,i){let s=e[nc].splice(0);for(let o=0;o<s.length;o++)s[o](i);tc(t,i,e.sync)}else yT(e)&&(e.prefinished=!0,t.emit("prefinish"),e.pendingcb++,ua.nextTick(kN,t,e))}e.sync=!0,e.pendingcb++;try{t._final(r)}catch(i){r(i)}e.sync=!1}function Upe(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.finalCalled=!0,Mpe(t,e)):(e.prefinished=!0,t.emit("prefinish")))}function qN(t,e,n){yT(e)&&(Upe(t,e),e.pendingcb===0&&(n?(e.pendingcb++,ua.nextTick((r,i)=>{yT(i)?kN(r,i):i.pendingcb--},t,e)):yT(e)&&(e.pendingcb++,kN(t,e))))}function kN(t,e){e.pendingcb--,e.finished=!0;let n=e[nc].splice(0);for(let r=0;r<n.length;r++)n[r]();if(t.emit("finish"),e.autoDestroy){let r=t._readableState;(!r||r.autoDestroy&&(r.endEmitted||r.readable===!1))&&t.destroy()}}Rpe(Ot.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(t){this._writableState&&(this._writableState.destroyed=t)}},writable:{__proto__:null,get(){let t=this._writableState;return!!t&&t.writable!==!1&&!t.destroyed&&!t.errored&&!t.ending&&!t.ended},set(t){this._writableState&&(this._writableState.writable=!!t)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let t=this._writableState;return t?!t.destroyed&&!t.ending&&t.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var Bpe=LT.destroy;Ot.prototype.destroy=function(t,e){let n=this._writableState;return!n.destroyed&&(n.bufferedIndex<n.buffered.length||n[nc].length)&&ua.nextTick(YN,n),Bpe.call(this,t,e),this};Ot.prototype._undestroy=LT.undestroy;Ot.prototype._destroy=function(t,e){e(t)};Ot.prototype[Ipe.captureRejectionSymbol]=function(t){this.destroy(t)};var $N;function Ck(){return $N===void 0&&($N={}),$N}Ot.fromWeb=function(t,e){return Ck().newStreamWritableFromWritableStream(t,e)};Ot.toWeb=function(t){return Ck().newWritableStreamFromStreamWritable(t)}});var kk=C((w1e,$k)=>{var XN=it(),Fpe=require("buffer"),{isReadable:Hpe,isWritable:Gpe,isIterable:yk,isNodeStream:$pe,isReadableNodeStream:wk,isWritableNodeStream:Lk,isDuplexNodeStream:kpe,isReadableStream:Dk,isWritableStream:Pk}=bi(),xk=Es(),{AbortError:Hk,codes:{ERR_INVALID_ARG_TYPE:Wpe,ERR_INVALID_RETURN_VALUE:vk}}=Vn(),{destroyer:ic}=la(),Ype=wi(),Gk=qd(),Vpe=DT(),{createDeferredPromise:Mk}=rr(),Uk=PN(),Bk=globalThis.Blob||Fpe.Blob,qpe=typeof Bk<"u"?function(e){return e instanceof Bk}:function(e){return!1},Xpe=globalThis.AbortController||kt().AbortController,{FunctionPrototypeCall:Fk}=Rt(),io=class extends Ype{constructor(e){super(e),e?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),e?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};$k.exports=function t(e,n){if(kpe(e))return e;if(wk(e))return rc({readable:e});if(Lk(e))return rc({writable:e});if($pe(e))return rc({writable:!1,readable:!1});if(Dk(e))return rc({readable:Gk.fromWeb(e)});if(Pk(e))return rc({writable:Vpe.fromWeb(e)});if(typeof e=="function"){let{value:i,write:s,final:o,destroy:a}=zpe(e);if(yk(i))return Uk(io,i,{objectMode:!0,write:s,final:o,destroy:a});let l=i?.then;if(typeof l=="function"){let c,u=Fk(l,i,d=>{if(d!=null)throw new vk("nully","body",d)},d=>{ic(c,d)});return c=new io({objectMode:!0,readable:!1,write:s,final(d){o(async()=>{try{await u,XN.nextTick(d,null)}catch(E){XN.nextTick(d,E)}})},destroy:a})}throw new vk("Iterable, AsyncIterable or AsyncFunction",n,i)}if(qpe(e))return t(e.arrayBuffer());if(yk(e))return Uk(io,e,{objectMode:!0,writable:!1});if(Dk(e?.readable)&&Pk(e?.writable))return io.fromWeb(e);if(typeof e?.writable=="object"||typeof e?.readable=="object"){let i=e!=null&&e.readable?wk(e?.readable)?e?.readable:t(e.readable):void 0,s=e!=null&&e.writable?Lk(e?.writable)?e?.writable:t(e.writable):void 0;return rc({readable:i,writable:s})}let r=e?.then;if(typeof r=="function"){let i;return Fk(r,e,s=>{s!=null&&i.push(s),i.push(null)},s=>{ic(i,s)}),i=new io({objectMode:!0,writable:!1,read(){}})}throw new Wpe(n,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],e)};function zpe(t){let{promise:e,resolve:n}=Mk(),r=new Xpe,i=r.signal;return{value:t((async function*(){for(;;){let o=e;e=null;let{chunk:a,done:l,cb:c}=await o;if(XN.nextTick(c),l)return;if(i.aborted)throw new Hk(void 0,{cause:i.reason});({promise:e,resolve:n}=Mk()),yield a}})(),{signal:i}),write(o,a,l){let c=n;n=null,c({chunk:o,done:!1,cb:l})},final(o){let a=n;n=null,a({done:!0,cb:o})},destroy(o,a){r.abort(),a(o)}}}function rc(t){let e=t.readable&&typeof t.readable.read!="function"?Gk.wrap(t.readable):t.readable,n=t.writable,r=!!Hpe(e),i=!!Gpe(n),s,o,a,l,c;function u(d){let E=l;l=null,E?E(d):d&&c.destroy(d)}return c=new io({readableObjectMode:!!(e!=null&&e.readableObjectMode),writableObjectMode:!!(n!=null&&n.writableObjectMode),readable:r,writable:i}),i&&(xk(n,d=>{i=!1,d&&ic(e,d),u(d)}),c._write=function(d,E,f){n.write(d,E)?f():s=f},c._final=function(d){n.end(),o=d},n.on("drain",function(){if(s){let d=s;s=null,d()}}),n.on("finish",function(){if(o){let d=o;o=null,d()}})),r&&(xk(e,d=>{r=!1,d&&ic(e,d),u(d)}),e.on("readable",function(){if(a){let d=a;a=null,d()}}),e.on("end",function(){c.push(null)}),c._read=function(){for(;;){let d=e.read();if(d===null){a=c._read;return}if(!c.push(d))return}}),c._destroy=function(d,E){!d&&l!==null&&(d=new Hk),a=null,s=null,o=null,l===null?E(d):(l=E,ic(n,d),ic(e,d))},c}});var wi=C((L1e,Vk)=>{"use strict";var{ObjectDefineProperties:jpe,ObjectGetOwnPropertyDescriptor:hs,ObjectKeys:Kpe,ObjectSetPrototypeOf:Wk}=Rt();Vk.exports=ei;var KN=qd(),Br=DT();Wk(ei.prototype,KN.prototype);Wk(ei,KN);{let t=Kpe(Br.prototype);for(let e=0;e<t.length;e++){let n=t[e];ei.prototype[n]||(ei.prototype[n]=Br.prototype[n])}}function ei(t){if(!(this instanceof ei))return new ei(t);KN.call(this,t),Br.call(this,t),t?(this.allowHalfOpen=t.allowHalfOpen!==!1,t.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),t.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}jpe(ei.prototype,{writable:{__proto__:null,...hs(Br.prototype,"writable")},writableHighWaterMark:{__proto__:null,...hs(Br.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...hs(Br.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...hs(Br.prototype,"writableBuffer")},writableLength:{__proto__:null,...hs(Br.prototype,"writableLength")},writableFinished:{__proto__:null,...hs(Br.prototype,"writableFinished")},writableCorked:{__proto__:null,...hs(Br.prototype,"writableCorked")},writableEnded:{__proto__:null,...hs(Br.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...hs(Br.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(t){this._readableState&&this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}});var zN;function Yk(){return zN===void 0&&(zN={}),zN}ei.fromWeb=function(t,e){return Yk().newStreamDuplexFromReadableWritablePair(t,e)};ei.toWeb=function(t){return Yk().newReadableWritablePairFromDuplex(t)};var jN;ei.from=function(t){return jN||(jN=kk()),jN(t,"body")}});var ZN=C((D1e,Xk)=>{"use strict";var{ObjectSetPrototypeOf:qk,Symbol:Jpe}=Rt();Xk.exports=ps;var{ERR_METHOD_NOT_IMPLEMENTED:Qpe}=Vn().codes,QN=wi(),{getHighWaterMark:Zpe}=Yd();qk(ps.prototype,QN.prototype);qk(ps,QN);var Kd=Jpe("kCallback");function ps(t){if(!(this instanceof ps))return new ps(t);let e=t?Zpe(this,t,"readableHighWaterMark",!0):null;e===0&&(t={...t,highWaterMark:null,readableHighWaterMark:e,writableHighWaterMark:t.writableHighWaterMark||0}),QN.call(this,t),this._readableState.sync=!1,this[Kd]=null,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",eTe)}function JN(t){typeof this._flush=="function"&&!this.destroyed?this._flush((e,n)=>{if(e){t?t(e):this.destroy(e);return}n!=null&&this.push(n),this.push(null),t&&t()}):(this.push(null),t&&t())}function eTe(){this._final!==JN&&JN.call(this)}ps.prototype._final=JN;ps.prototype._transform=function(t,e,n){throw new Qpe("_transform()")};ps.prototype._write=function(t,e,n){let r=this._readableState,i=this._writableState,s=r.length;this._transform(t,e,(o,a)=>{if(o){n(o);return}a!=null&&this.push(a),i.ended||s===r.length||r.length<r.highWaterMark?n():this[Kd]=n})};ps.prototype._read=function(){if(this[Kd]){let t=this[Kd];this[Kd]=null,t()}}});var tO=C((P1e,jk)=>{"use strict";var{ObjectSetPrototypeOf:zk}=Rt();jk.exports=sc;var eO=ZN();zk(sc.prototype,eO.prototype);zk(sc,eO);function sc(t){if(!(this instanceof sc))return new sc(t);eO.call(this,t)}sc.prototype._transform=function(t,e,n){n(null,t)}});var MT=C((x1e,eW)=>{var Jd=it(),{ArrayIsArray:tTe,Promise:nTe,SymbolAsyncIterator:rTe,SymbolDispose:iTe}=Rt(),vT=Es(),{once:sTe}=rr(),oTe=la(),Kk=wi(),{aggregateTwoErrors:aTe,codes:{ERR_INVALID_ARG_TYPE:uO,ERR_INVALID_RETURN_VALUE:nO,ERR_MISSING_ARGS:lTe,ERR_STREAM_DESTROYED:cTe,ERR_STREAM_PREMATURE_CLOSE:uTe},AbortError:dTe}=Vn(),{validateFunction:fTe,validateAbortSignal:ETe}=Kl(),{isIterable:da,isReadable:rO,isReadableNodeStream:xT,isNodeStream:Jk,isTransformStream:oc,isWebStream:hTe,isReadableStream:iO,isReadableFinished:pTe}=bi(),TTe=globalThis.AbortController||kt().AbortController,sO,oO,aO;function Qk(t,e,n){let r=!1;t.on("close",()=>{r=!0});let i=vT(t,{readable:e,writable:n},s=>{r=!s});return{destroy:s=>{r||(r=!0,oTe.destroyer(t,s||new cTe("pipe")))},cleanup:i}}function STe(t){return fTe(t[t.length-1],"streams[stream.length - 1]"),t.pop()}function lO(t){if(da(t))return t;if(xT(t))return RTe(t);throw new uO("val",["Readable","Iterable","AsyncIterable"],t)}async function*RTe(t){oO||(oO=qd()),yield*oO.prototype[rTe].call(t)}async function PT(t,e,n,{end:r}){let i,s=null,o=c=>{if(c&&(i=c),s){let u=s;s=null,u()}},a=()=>new nTe((c,u)=>{i?u(i):s=()=>{i?u(i):c()}});e.on("drain",o);let l=vT(e,{readable:!1},o);try{e.writableNeedDrain&&await a();for await(let c of t)e.write(c)||await a();r&&(e.end(),await a()),n()}catch(c){n(i!==c?aTe(i,c):c)}finally{l(),e.off("drain",o)}}async function cO(t,e,n,{end:r}){oc(e)&&(e=e.writable);let i=e.getWriter();try{for await(let s of t)await i.ready,i.write(s).catch(()=>{});await i.ready,r&&await i.close(),n()}catch(s){try{await i.abort(s),n(s)}catch(o){n(o)}}}function ATe(...t){return Zk(t,sTe(STe(t)))}function Zk(t,e,n){if(t.length===1&&tTe(t[0])&&(t=t[0]),t.length<2)throw new lTe("streams");let r=new TTe,i=r.signal,s=n?.signal,o=[];ETe(s,"options.signal");function a(){p(new dTe)}aO=aO||rr().addAbortListener;let l;s&&(l=aO(s,a));let c,u,d=[],E=0;function f(R){p(R,--E===0)}function p(R,m){var N;if(R&&(!c||c.code==="ERR_STREAM_PREMATURE_CLOSE")&&(c=R),!(!c&&!m)){for(;d.length;)d.shift()(c);(N=l)===null||N===void 0||N[iTe](),r.abort(),m&&(c||o.forEach(L=>L()),Jd.nextTick(e,c,u))}}let h;for(let R=0;R<t.length;R++){let m=t[R],N=R<t.length-1,L=R>0,I=N||n?.end!==!1,D=R===t.length-1;if(Jk(m)){let g=function(w){w&&w.name!=="AbortError"&&w.code!=="ERR_STREAM_PREMATURE_CLOSE"&&f(w)};var A=g;if(I){let{destroy:w,cleanup:x}=Qk(m,N,L);d.push(w),rO(m)&&D&&o.push(x)}m.on("error",g),rO(m)&&D&&o.push(()=>{m.removeListener("error",g)})}if(R===0)if(typeof m=="function"){if(h=m({signal:i}),!da(h))throw new nO("Iterable, AsyncIterable or Stream","source",h)}else da(m)||xT(m)||oc(m)?h=m:h=Kk.from(m);else if(typeof m=="function"){if(oc(h)){var T;h=lO((T=h)===null||T===void 0?void 0:T.readable)}else h=lO(h);if(h=m(h,{signal:i}),N){if(!da(h,!0))throw new nO("AsyncIterable",`transform[${R-1}]`,h)}else{var S;sO||(sO=tO());let g=new sO({objectMode:!0}),w=(S=h)===null||S===void 0?void 0:S.then;if(typeof w=="function")E++,w.call(h,H=>{u=H,H!=null&&g.write(H),I&&g.end(),Jd.nextTick(f)},H=>{g.destroy(H),Jd.nextTick(f,H)});else if(da(h,!0))E++,PT(h,g,f,{end:I});else if(iO(h)||oc(h)){let H=h.readable||h;E++,PT(H,g,f,{end:I})}else throw new nO("AsyncIterable or Promise","destination",h);h=g;let{destroy:x,cleanup:U}=Qk(h,!1,!0);d.push(x),D&&o.push(U)}}else if(Jk(m)){if(xT(h)){E+=2;let g=mTe(h,m,f,{end:I});rO(m)&&D&&o.push(g)}else if(oc(h)||iO(h)){let g=h.readable||h;E++,PT(g,m,f,{end:I})}else if(da(h))E++,PT(h,m,f,{end:I});else throw new uO("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],h);h=m}else if(hTe(m)){if(xT(h))E++,cO(lO(h),m,f,{end:I});else if(iO(h)||da(h))E++,cO(h,m,f,{end:I});else if(oc(h))E++,cO(h.readable,m,f,{end:I});else throw new uO("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],h);h=m}else h=Kk.from(m)}return(i!=null&&i.aborted||s!=null&&s.aborted)&&Jd.nextTick(a),h}function mTe(t,e,n,{end:r}){let i=!1;if(e.on("close",()=>{i||n(new uTe)}),t.pipe(e,{end:!1}),r){let o=function(){i=!0,e.end()};var s=o;pTe(t)?Jd.nextTick(o):t.once("end",o)}else n();return vT(t,{readable:!0,writable:!1},o=>{let a=t._readableState;o&&o.code==="ERR_STREAM_PREMATURE_CLOSE"&&a&&a.ended&&!a.errored&&!a.errorEmitted?t.once("end",n).once("error",n):n(o)}),vT(e,{readable:!1,writable:!0},n)}eW.exports={pipelineImpl:Zk,pipeline:ATe}});var fO=C((v1e,oW)=>{"use strict";var{pipeline:gTe}=MT(),UT=wi(),{destroyer:ITe}=la(),{isNodeStream:BT,isReadable:tW,isWritable:nW,isWebStream:dO,isTransformStream:fa,isWritableStream:rW,isReadableStream:iW}=bi(),{AbortError:_Te,codes:{ERR_INVALID_ARG_VALUE:sW,ERR_MISSING_ARGS:NTe}}=Vn(),OTe=Es();oW.exports=function(...e){if(e.length===0)throw new NTe("streams");if(e.length===1)return UT.from(e[0]);let n=[...e];if(typeof e[0]=="function"&&(e[0]=UT.from(e[0])),typeof e[e.length-1]=="function"){let f=e.length-1;e[f]=UT.from(e[f])}for(let f=0;f<e.length;++f)if(!(!BT(e[f])&&!dO(e[f]))){if(f<e.length-1&&!(tW(e[f])||iW(e[f])||fa(e[f])))throw new sW(`streams[${f}]`,n[f],"must be readable");if(f>0&&!(nW(e[f])||rW(e[f])||fa(e[f])))throw new sW(`streams[${f}]`,n[f],"must be writable")}let r,i,s,o,a;function l(f){let p=o;o=null,p?p(f):f?a.destroy(f):!E&&!d&&a.destroy()}let c=e[0],u=gTe(e,l),d=!!(nW(c)||rW(c)||fa(c)),E=!!(tW(u)||iW(u)||fa(u));if(a=new UT({writableObjectMode:!!(c!=null&&c.writableObjectMode),readableObjectMode:!!(u!=null&&u.readableObjectMode),writable:d,readable:E}),d){if(BT(c))a._write=function(p,h,T){c.write(p,h)?T():r=T},a._final=function(p){c.end(),i=p},c.on("drain",function(){if(r){let p=r;r=null,p()}});else if(dO(c)){let h=(fa(c)?c.writable:c).getWriter();a._write=async function(T,S,A){try{await h.ready,h.write(T).catch(()=>{}),A()}catch(R){A(R)}},a._final=async function(T){try{await h.ready,h.close().catch(()=>{}),i=T}catch(S){T(S)}}}let f=fa(u)?u.readable:u;OTe(f,()=>{if(i){let p=i;i=null,p()}})}if(E){if(BT(u))u.on("readable",function(){if(s){let f=s;s=null,f()}}),u.on("end",function(){a.push(null)}),a._read=function(){for(;;){let f=u.read();if(f===null){s=a._read;return}if(!a.push(f))return}};else if(dO(u)){let p=(fa(u)?u.readable:u).getReader();a._read=async function(){for(;;)try{let{value:h,done:T}=await p.read();if(!a.push(h))return;if(T){a.push(null);return}}catch{return}}}}return a._destroy=function(f,p){!f&&o!==null&&(f=new _Te),s=null,r=null,i=null,o===null?p(f):(o=p,BT(u)&&ITe(u,f))},a}});var TW=C((M1e,pO)=>{"use strict";var CTe=globalThis.AbortController||kt().AbortController,{codes:{ERR_INVALID_ARG_VALUE:bTe,ERR_INVALID_ARG_TYPE:Qd,ERR_MISSING_ARGS:yTe,ERR_OUT_OF_RANGE:wTe},AbortError:Li}=Vn(),{validateAbortSignal:Ea,validateInteger:aW,validateObject:ha}=Kl(),LTe=Rt().Symbol("kWeak"),DTe=Rt().Symbol("kResistStopPropagation"),{finished:PTe}=Es(),xTe=fO(),{addAbortSignalNoValidate:vTe}=Wd(),{isWritable:MTe,isNodeStream:UTe}=bi(),{deprecate:BTe}=rr(),{ArrayPrototypePush:FTe,Boolean:HTe,MathFloor:lW,Number:GTe,NumberIsNaN:$Te,Promise:cW,PromiseReject:uW,PromiseResolve:kTe,PromisePrototypeThen:dW,Symbol:EW}=Rt(),FT=EW("kEmpty"),fW=EW("kEof");function WTe(t,e){if(e!=null&&ha(e,"options"),e?.signal!=null&&Ea(e.signal,"options.signal"),UTe(t)&&!MTe(t))throw new bTe("stream",t,"must be writable");let n=xTe(this,t);return e!=null&&e.signal&&vTe(e.signal,n),n}function HT(t,e){if(typeof t!="function")throw new Qd("fn",["Function","AsyncFunction"],t);e!=null&&ha(e,"options"),e?.signal!=null&&Ea(e.signal,"options.signal");let n=1;e?.concurrency!=null&&(n=lW(e.concurrency));let r=n-1;return e?.highWaterMark!=null&&(r=lW(e.highWaterMark)),aW(n,"options.concurrency",1),aW(r,"options.highWaterMark",0),r+=n,async function*(){let s=rr().AbortSignalAny([e?.signal].filter(HTe)),o=this,a=[],l={signal:s},c,u,d=!1,E=0;function f(){d=!0,p()}function p(){E-=1,h()}function h(){u&&!d&&E<n&&a.length<r&&(u(),u=null)}async function T(){try{for await(let S of o){if(d)return;if(s.aborted)throw new Li;try{if(S=t(S,l),S===FT)continue;S=kTe(S)}catch(A){S=uW(A)}E+=1,dW(S,p,f),a.push(S),c&&(c(),c=null),!d&&(a.length>=r||E>=n)&&await new cW(A=>{u=A})}a.push(fW)}catch(S){let A=uW(S);dW(A,p,f),a.push(A)}finally{d=!0,c&&(c(),c=null)}}T();try{for(;;){for(;a.length>0;){let S=await a[0];if(S===fW)return;if(s.aborted)throw new Li;S!==FT&&(yield S),a.shift(),h()}await new cW(S=>{c=S})}}finally{d=!0,u&&(u(),u=null)}}.call(this)}function YTe(t=void 0){return t!=null&&ha(t,"options"),t?.signal!=null&&Ea(t.signal,"options.signal"),async function*(){let n=0;for await(let i of this){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new Li({cause:t.signal.reason});yield[n++,i]}}.call(this)}async function hW(t,e=void 0){for await(let n of hO.call(this,t,e))return!0;return!1}async function VTe(t,e=void 0){if(typeof t!="function")throw new Qd("fn",["Function","AsyncFunction"],t);return!await hW.call(this,async(...n)=>!await t(...n),e)}async function qTe(t,e){for await(let n of hO.call(this,t,e))return n}async function XTe(t,e){if(typeof t!="function")throw new Qd("fn",["Function","AsyncFunction"],t);async function n(r,i){return await t(r,i),FT}for await(let r of HT.call(this,n,e));}function hO(t,e){if(typeof t!="function")throw new Qd("fn",["Function","AsyncFunction"],t);async function n(r,i){return await t(r,i)?r:FT}return HT.call(this,n,e)}var EO=class extends yTe{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function zTe(t,e,n){var r;if(typeof t!="function")throw new Qd("reducer",["Function","AsyncFunction"],t);n!=null&&ha(n,"options"),n?.signal!=null&&Ea(n.signal,"options.signal");let i=arguments.length>1;if(n!=null&&(r=n.signal)!==null&&r!==void 0&&r.aborted){let c=new Li(void 0,{cause:n.signal.reason});throw this.once("error",()=>{}),await PTe(this.destroy(c)),c}let s=new CTe,o=s.signal;if(n!=null&&n.signal){let c={once:!0,[LTe]:this,[DTe]:!0};n.signal.addEventListener("abort",()=>s.abort(),c)}let a=!1;try{for await(let c of this){var l;if(a=!0,n!=null&&(l=n.signal)!==null&&l!==void 0&&l.aborted)throw new Li;i?e=await t(e,c,{signal:o}):(e=c,i=!0)}if(!a&&!i)throw new EO}finally{s.abort()}return e}async function jTe(t){t!=null&&ha(t,"options"),t?.signal!=null&&Ea(t.signal,"options.signal");let e=[];for await(let r of this){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new Li(void 0,{cause:t.signal.reason});FTe(e,r)}return e}function KTe(t,e){let n=HT.call(this,t,e);return async function*(){for await(let i of n)yield*i}.call(this)}function pW(t){if(t=GTe(t),$Te(t))return 0;if(t<0)throw new wTe("number",">= 0",t);return t}function JTe(t,e=void 0){return e!=null&&ha(e,"options"),e?.signal!=null&&Ea(e.signal,"options.signal"),t=pW(t),async function*(){var r;if(e!=null&&(r=e.signal)!==null&&r!==void 0&&r.aborted)throw new Li;for await(let s of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new Li;t--<=0&&(yield s)}}.call(this)}function QTe(t,e=void 0){return e!=null&&ha(e,"options"),e?.signal!=null&&Ea(e.signal,"options.signal"),t=pW(t),async function*(){var r;if(e!=null&&(r=e.signal)!==null&&r!==void 0&&r.aborted)throw new Li;for await(let s of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new Li;if(t-- >0&&(yield s),t<=0)return}}.call(this)}pO.exports.streamReturningOperators={asIndexedPairs:BTe(YTe,"readable.asIndexedPairs will be removed in a future version."),drop:JTe,filter:hO,flatMap:KTe,map:HT,take:QTe,compose:WTe};pO.exports.promiseReturningOperators={every:VTe,forEach:XTe,reduce:zTe,toArray:jTe,some:hW,find:qTe}});var TO=C((U1e,SW)=>{"use strict";var{ArrayPrototypePop:ZTe,Promise:eSe}=Rt(),{isIterable:tSe,isNodeStream:nSe,isWebStream:rSe}=bi(),{pipelineImpl:iSe}=MT(),{finished:sSe}=Es();SO();function oSe(...t){return new eSe((e,n)=>{let r,i,s=t[t.length-1];if(s&&typeof s=="object"&&!nSe(s)&&!tSe(s)&&!rSe(s)){let o=ZTe(t);r=o.signal,i=o.end}iSe(t,(o,a)=>{o?n(o):e(a)},{signal:r,end:i})})}SW.exports={finished:sSe,pipeline:oSe}});var SO=C((B1e,CW)=>{"use strict";var{Buffer:aSe}=require("buffer"),{ObjectDefineProperty:Ts,ObjectKeys:mW,ReflectApply:gW}=Rt(),{promisify:{custom:IW}}=rr(),{streamReturningOperators:RW,promiseReturningOperators:AW}=TW(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:_W}}=Vn(),lSe=fO(),{setDefaultHighWaterMark:cSe,getDefaultHighWaterMark:uSe}=Yd(),{pipeline:NW}=MT(),{destroyer:dSe}=la(),OW=Es(),RO=TO(),Zd=bi(),Et=CW.exports=AT().Stream;Et.isDestroyed=Zd.isDestroyed;Et.isDisturbed=Zd.isDisturbed;Et.isErrored=Zd.isErrored;Et.isReadable=Zd.isReadable;Et.isWritable=Zd.isWritable;Et.Readable=qd();for(let t of mW(RW)){let n=function(...r){if(new.target)throw _W();return Et.Readable.from(gW(e,this,r))},e=RW[t];Ts(n,"name",{__proto__:null,value:e.name}),Ts(n,"length",{__proto__:null,value:e.length}),Ts(Et.Readable.prototype,t,{__proto__:null,value:n,enumerable:!1,configurable:!0,writable:!0})}for(let t of mW(AW)){let n=function(...r){if(new.target)throw _W();return gW(e,this,r)},e=AW[t];Ts(n,"name",{__proto__:null,value:e.name}),Ts(n,"length",{__proto__:null,value:e.length}),Ts(Et.Readable.prototype,t,{__proto__:null,value:n,enumerable:!1,configurable:!0,writable:!0})}Et.Writable=DT();Et.Duplex=wi();Et.Transform=ZN();Et.PassThrough=tO();Et.pipeline=NW;var{addAbortSignal:fSe}=Wd();Et.addAbortSignal=fSe;Et.finished=OW;Et.destroy=dSe;Et.compose=lSe;Et.setDefaultHighWaterMark=cSe;Et.getDefaultHighWaterMark=uSe;Ts(Et,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return RO}});Ts(NW,IW,{__proto__:null,enumerable:!0,get(){return RO.pipeline}});Ts(OW,IW,{__proto__:null,enumerable:!0,get(){return RO.finished}});Et.Stream=Et;Et._isUint8Array=function(e){return e instanceof Uint8Array};Et._uint8ArrayToBuffer=function(e){return aSe.from(e.buffer,e.byteOffset,e.byteLength)}});var AO=C((F1e,Ue)=>{"use strict";var nn=require("stream");if(nn&&process.env.READABLE_STREAM==="disable"){let t=nn.promises;Ue.exports._uint8ArrayToBuffer=nn._uint8ArrayToBuffer,Ue.exports._isUint8Array=nn._isUint8Array,Ue.exports.isDisturbed=nn.isDisturbed,Ue.exports.isErrored=nn.isErrored,Ue.exports.isReadable=nn.isReadable,Ue.exports.Readable=nn.Readable,Ue.exports.Writable=nn.Writable,Ue.exports.Duplex=nn.Duplex,Ue.exports.Transform=nn.Transform,Ue.exports.PassThrough=nn.PassThrough,Ue.exports.addAbortSignal=nn.addAbortSignal,Ue.exports.finished=nn.finished,Ue.exports.destroy=nn.destroy,Ue.exports.pipeline=nn.pipeline,Ue.exports.compose=nn.compose,Object.defineProperty(nn,"promises",{configurable:!0,enumerable:!0,get(){return t}}),Ue.exports.Stream=nn.Stream}else{let t=SO(),e=TO(),n=t.Readable.destroy;Ue.exports=t.Readable,Ue.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,Ue.exports._isUint8Array=t._isUint8Array,Ue.exports.isDisturbed=t.isDisturbed,Ue.exports.isErrored=t.isErrored,Ue.exports.isReadable=t.isReadable,Ue.exports.Readable=t.Readable,Ue.exports.Writable=t.Writable,Ue.exports.Duplex=t.Duplex,Ue.exports.Transform=t.Transform,Ue.exports.PassThrough=t.PassThrough,Ue.exports.addAbortSignal=t.addAbortSignal,Ue.exports.finished=t.finished,Ue.exports.destroy=t.destroy,Ue.exports.destroy=n,Ue.exports.pipeline=t.pipeline,Ue.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return e}}),Ue.exports.Stream=t.Stream}Ue.exports.default=Ue.exports});var DW=C((H1e,LW)=>{var IO=require("fs"),yW=yP(),bW=LP(),mO=require("path"),Di=zl(),ESe=require("util").inherits,vt=FG(),wW=AO().Transform,gO=process.platform==="win32",Ze=function(t,e){if(!(this instanceof Ze))return new Ze(t,e);typeof t!="string"&&(e=t,t="zip"),e=this.options=Di.defaults(e,{highWaterMark:1024*1024,statConcurrency:4}),wW.call(this,e),this._format=!1,this._module=!1,this._pending=0,this._pointer=0,this._entriesCount=0,this._entriesProcessedCount=0,this._fsEntriesTotalBytes=0,this._fsEntriesProcessedBytes=0,this._queue=bW.queue(this._onQueueTask.bind(this),1),this._queue.drain(this._onQueueDrain.bind(this)),this._statQueue=bW.queue(this._onStatQueueTask.bind(this),e.statConcurrency),this._statQueue.drain(this._onQueueDrain.bind(this)),this._state={aborted:!1,finalize:!1,finalizing:!1,finalized:!1,modulePiped:!1},this._streams=[]};ESe(Ze,wW);Ze.prototype._abort=function(){this._state.aborted=!0,this._queue.kill(),this._statQueue.kill(),this._queue.idle()&&this._shutdown()};Ze.prototype._append=function(t,e){e=e||{};var n={source:null,filepath:t};e.name||(e.name=t),e.sourcePath=t,n.data=e,this._entriesCount++,e.stats&&e.stats instanceof IO.Stats?(n=this._updateQueueTaskWithStats(n,e.stats),n&&(e.stats.size&&(this._fsEntriesTotalBytes+=e.stats.size),this._queue.push(n))):this._statQueue.push(n)};Ze.prototype._finalize=function(){this._state.finalizing||this._state.finalized||this._state.aborted||(this._state.finalizing=!0,this._moduleFinalize(),this._state.finalizing=!1,this._state.finalized=!0)};Ze.prototype._maybeFinalize=function(){return this._state.finalizing||this._state.finalized||this._state.aborted?!1:this._state.finalize&&this._pending===0&&this._queue.idle()&&this._statQueue.idle()?(this._finalize(),!0):!1};Ze.prototype._moduleAppend=function(t,e,n){if(this._state.aborted){n();return}this._module.append(t,e,function(r){if(this._task=null,this._state.aborted){this._shutdown();return}if(r){this.emit("error",r),setImmediate(n);return}this.emit("entry",e),this._entriesProcessedCount++,e.stats&&e.stats.size&&(this._fsEntriesProcessedBytes+=e.stats.size),this.emit("progress",{entries:{total:this._entriesCount,processed:this._entriesProcessedCount},fs:{totalBytes:this._fsEntriesTotalBytes,processedBytes:this._fsEntriesProcessedBytes}}),setImmediate(n)}.bind(this))};Ze.prototype._moduleFinalize=function(){typeof this._module.finalize=="function"?this._module.finalize():typeof this._module.end=="function"?this._module.end():this.emit("error",new vt("NOENDMETHOD"))};Ze.prototype._modulePipe=function(){this._module.on("error",this._onModuleError.bind(this)),this._module.pipe(this),this._state.modulePiped=!0};Ze.prototype._moduleSupports=function(t){return!this._module.supports||!this._module.supports[t]?!1:this._module.supports[t]};Ze.prototype._moduleUnpipe=function(){this._module.unpipe(this),this._state.modulePiped=!1};Ze.prototype._normalizeEntryData=function(t,e){t=Di.defaults(t,{type:"file",name:null,date:null,mode:null,prefix:null,sourcePath:null,stats:!1}),e&&t.stats===!1&&(t.stats=e);var n=t.type==="directory";return t.name&&(typeof t.prefix=="string"&&t.prefix!==""&&(t.name=t.prefix+"/"+t.name,t.prefix=null),t.name=Di.sanitizePath(t.name),t.type!=="symlink"&&t.name.slice(-1)==="/"?(n=!0,t.type="directory"):n&&(t.name+="/")),typeof t.mode=="number"?gO?t.mode&=511:t.mode&=4095:t.stats&&t.mode===null?(gO?t.mode=t.stats.mode&511:t.mode=t.stats.mode&4095,gO&&n&&(t.mode=493)):t.mode===null&&(t.mode=n?493:420),t.stats&&t.date===null?t.date=t.stats.mtime:t.date=Di.dateify(t.date),t};Ze.prototype._onModuleError=function(t){this.emit("error",t)};Ze.prototype._onQueueDrain=function(){this._state.finalizing||this._state.finalized||this._state.aborted||this._state.finalize&&this._pending===0&&this._queue.idle()&&this._statQueue.idle()&&this._finalize()};Ze.prototype._onQueueTask=function(t,e){var n=()=>{t.data.callback&&t.data.callback(),e()};if(this._state.finalizing||this._state.finalized||this._state.aborted){n();return}this._task=t,this._moduleAppend(t.source,t.data,n)};Ze.prototype._onStatQueueTask=function(t,e){if(this._state.finalizing||this._state.finalized||this._state.aborted){e();return}IO.lstat(t.filepath,function(n,r){if(this._state.aborted){setImmediate(e);return}if(n){this._entriesCount--,this.emit("warning",n),setImmediate(e);return}t=this._updateQueueTaskWithStats(t,r),t&&(r.size&&(this._fsEntriesTotalBytes+=r.size),this._queue.push(t)),setImmediate(e)}.bind(this))};Ze.prototype._shutdown=function(){this._moduleUnpipe(),this.end()};Ze.prototype._transform=function(t,e,n){t&&(this._pointer+=t.length),n(null,t)};Ze.prototype._updateQueueTaskWithStats=function(t,e){if(e.isFile())t.data.type="file",t.data.sourceType="stream",t.source=Di.lazyReadStream(t.filepath);else if(e.isDirectory()&&this._moduleSupports("directory"))t.data.name=Di.trailingSlashIt(t.data.name),t.data.type="directory",t.data.sourcePath=Di.trailingSlashIt(t.filepath),t.data.sourceType="buffer",t.source=Buffer.concat([]);else if(e.isSymbolicLink()&&this._moduleSupports("symlink")){var n=IO.readlinkSync(t.filepath),r=mO.dirname(t.filepath);t.data.type="symlink",t.data.linkname=mO.relative(r,mO.resolve(r,n)),t.data.sourceType="buffer",t.source=Buffer.concat([])}else return e.isDirectory()?this.emit("warning",new vt("DIRECTORYNOTSUPPORTED",t.data)):e.isSymbolicLink()?this.emit("warning",new vt("SYMLINKNOTSUPPORTED",t.data)):this.emit("warning",new vt("ENTRYNOTSUPPORTED",t.data)),null;return t.data=this._normalizeEntryData(t.data,e),t};Ze.prototype.abort=function(){return this._state.aborted||this._state.finalized?this:(this._abort(),this)};Ze.prototype.append=function(t,e){if(this._state.finalize||this._state.aborted)return this.emit("error",new vt("QUEUECLOSED")),this;if(e=this._normalizeEntryData(e),typeof e.name!="string"||e.name.length===0)return this.emit("error",new vt("ENTRYNAMEREQUIRED")),this;if(e.type==="directory"&&!this._moduleSupports("directory"))return this.emit("error",new vt("DIRECTORYNOTSUPPORTED",{name:e.name})),this;if(t=Di.normalizeInputSource(t),Buffer.isBuffer(t))e.sourceType="buffer";else if(Di.isStream(t))e.sourceType="stream";else return this.emit("error",new vt("INPUTSTEAMBUFFERREQUIRED",{name:e.name})),this;return this._entriesCount++,this._queue.push({data:e,source:t}),this};Ze.prototype.directory=function(t,e,n){if(this._state.finalize||this._state.aborted)return this.emit("error",new vt("QUEUECLOSED")),this;if(typeof t!="string"||t.length===0)return this.emit("error",new vt("DIRECTORYDIRPATHREQUIRED")),this;this._pending++,e===!1?e="":typeof e!="string"&&(e=t);var r=!1;typeof n=="function"?(r=n,n={}):typeof n!="object"&&(n={});var i={stat:!0,dot:!0};function s(){this._pending--,this._maybeFinalize()}function o(c){this.emit("error",c)}function a(c){l.pause();var u=!1,d=Object.assign({},n);d.name=c.relative,d.prefix=e,d.stats=c.stat,d.callback=l.resume.bind(l);try{if(r){if(d=r(d),d===!1)u=!0;else if(typeof d!="object")throw new vt("DIRECTORYFUNCTIONINVALIDDATA",{dirpath:t})}}catch(E){this.emit("error",E);return}if(u){l.resume();return}this._append(c.absolute,d)}var l=yW(t,i);return l.on("error",o.bind(this)),l.on("match",a.bind(this)),l.on("end",s.bind(this)),this};Ze.prototype.file=function(t,e){return this._state.finalize||this._state.aborted?(this.emit("error",new vt("QUEUECLOSED")),this):typeof t!="string"||t.length===0?(this.emit("error",new vt("FILEFILEPATHREQUIRED")),this):(this._append(t,e),this)};Ze.prototype.glob=function(t,e,n){this._pending++,e=Di.defaults(e,{stat:!0,pattern:t});function r(){this._pending--,this._maybeFinalize()}function i(a){this.emit("error",a)}function s(a){o.pause();var l=Object.assign({},n);l.callback=o.resume.bind(o),l.stats=a.stat,l.name=a.relative,this._append(a.absolute,l)}var o=yW(e.cwd||".",e);return o.on("error",i.bind(this)),o.on("match",s.bind(this)),o.on("end",r.bind(this)),this};Ze.prototype.finalize=function(){if(this._state.aborted){var t=new vt("ABORTED");return this.emit("error",t),Promise.reject(t)}if(this._state.finalize){var e=new vt("FINALIZING");return this.emit("error",e),Promise.reject(e)}this._state.finalize=!0,this._pending===0&&this._queue.idle()&&this._statQueue.idle()&&this._finalize();var n=this;return new Promise(function(r,i){var s;n._module.on("end",function(){s||r()}),n._module.on("error",function(o){s=!0,i(o)})})};Ze.prototype.setFormat=function(t){return this._format?(this.emit("error",new vt("FORMATSET")),this):(this._format=t,this)};Ze.prototype.setModule=function(t){return this._state.aborted?(this.emit("error",new vt("ABORTED")),this):this._state.module?(this.emit("error",new vt("MODULESET")),this):(this._module=t,this._modulePipe(),this)};Ze.prototype.symlink=function(t,e,n){if(this._state.finalize||this._state.aborted)return this.emit("error",new vt("QUEUECLOSED")),this;if(typeof t!="string"||t.length===0)return this.emit("error",new vt("SYMLINKFILEPATHREQUIRED")),this;if(typeof e!="string"||e.length===0)return this.emit("error",new vt("SYMLINKTARGETREQUIRED",{filepath:t})),this;if(!this._moduleSupports("symlink"))return this.emit("error",new vt("SYMLINKNOTSUPPORTED",{filepath:t})),this;var r={};return r.type="symlink",r.name=t.replace(/\\/g,"/"),r.linkname=e.replace(/\\/g,"/"),r.sourceType="buffer",typeof n=="number"&&(r.mode=n),this._entriesCount++,this._queue.push({data:r,source:Buffer.concat([])}),this};Ze.prototype.pointer=function(){return this._pointer};Ze.prototype.use=function(t){return this._streams.push(t),this};LW.exports=Ze});var $T=C((G1e,PW)=>{var GT=PW.exports=function(){};GT.prototype.getName=function(){};GT.prototype.getSize=function(){};GT.prototype.getLastModifiedDate=function(){};GT.prototype.isDirectory=function(){}});var kT=C(($1e,xW)=>{var Fr=xW.exports={};Fr.dateToDos=function(t,e){e=e||!1;var n=e?t.getFullYear():t.getUTCFullYear();if(n<1980)return 2162688;if(n>=2044)return 2141175677;var r={year:n,month:e?t.getMonth():t.getUTCMonth(),date:e?t.getDate():t.getUTCDate(),hours:e?t.getHours():t.getUTCHours(),minutes:e?t.getMinutes():t.getUTCMinutes(),seconds:e?t.getSeconds():t.getUTCSeconds()};return r.year-1980<<25|r.month+1<<21|r.date<<16|r.hours<<11|r.minutes<<5|r.seconds/2};Fr.dosToDate=function(t){return new Date((t>>25&127)+1980,(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(t&31)<<1)};Fr.fromDosTime=function(t){return Fr.dosToDate(t.readUInt32LE(0))};Fr.getEightBytes=function(t){var e=Buffer.alloc(8);return e.writeUInt32LE(t%4294967296,0),e.writeUInt32LE(t/4294967296|0,4),e};Fr.getShortBytes=function(t){var e=Buffer.alloc(2);return e.writeUInt16LE((t&65535)>>>0,0),e};Fr.getShortBytesValue=function(t,e){return t.readUInt16LE(e)};Fr.getLongBytes=function(t){var e=Buffer.alloc(4);return e.writeUInt32LE((t&4294967295)>>>0,0),e};Fr.getLongBytesValue=function(t,e){return t.readUInt32LE(e)};Fr.toDosTime=function(t){return Fr.getLongBytes(Fr.dateToDos(t))}});var _O=C((k1e,HW)=>{var vW=kT(),MW=8,UW=1,hSe=4,pSe=2,BW=64,FW=2048,vn=HW.exports=function(){return this instanceof vn?(this.descriptor=!1,this.encryption=!1,this.utf8=!1,this.numberOfShannonFanoTrees=0,this.strongEncryption=!1,this.slidingDictionarySize=0,this):new vn};vn.prototype.encode=function(){return vW.getShortBytes((this.descriptor?MW:0)|(this.utf8?FW:0)|(this.encryption?UW:0)|(this.strongEncryption?BW:0))};vn.prototype.parse=function(t,e){var n=vW.getShortBytesValue(t,e),r=new vn;return r.useDataDescriptor((n&MW)!==0),r.useUTF8ForNames((n&FW)!==0),r.useStrongEncryption((n&BW)!==0),r.useEncryption((n&UW)!==0),r.setSlidingDictionarySize((n&pSe)!==0?8192:4096),r.setNumberOfShannonFanoTrees((n&hSe)!==0?3:2),r};vn.prototype.setNumberOfShannonFanoTrees=function(t){this.numberOfShannonFanoTrees=t};vn.prototype.getNumberOfShannonFanoTrees=function(){return this.numberOfShannonFanoTrees};vn.prototype.setSlidingDictionarySize=function(t){this.slidingDictionarySize=t};vn.prototype.getSlidingDictionarySize=function(){return this.slidingDictionarySize};vn.prototype.useDataDescriptor=function(t){this.descriptor=t};vn.prototype.usesDataDescriptor=function(){return this.descriptor};vn.prototype.useEncryption=function(t){this.encryption=t};vn.prototype.usesEncryption=function(){return this.encryption};vn.prototype.useStrongEncryption=function(t){this.strongEncryption=t};vn.prototype.usesStrongEncryption=function(){return this.strongEncryption};vn.prototype.useUTF8ForNames=function(t){this.utf8=t};vn.prototype.usesUTF8ForNames=function(){return this.utf8}});var $W=C((W1e,GW)=>{GW.exports={PERM_MASK:4095,FILE_TYPE_FLAG:61440,LINK_FLAG:40960,FILE_FLAG:32768,DIR_FLAG:16384,DEFAULT_LINK_PERM:511,DEFAULT_DIR_PERM:493,DEFAULT_FILE_PERM:420}});var NO=C((Y1e,kW)=>{kW.exports={WORD:4,DWORD:8,EMPTY:Buffer.alloc(0),SHORT:2,SHORT_MASK:65535,SHORT_SHIFT:16,SHORT_ZERO:Buffer.from(Array(2)),LONG:4,LONG_ZERO:Buffer.from(Array(4)),MIN_VERSION_INITIAL:10,MIN_VERSION_DATA_DESCRIPTOR:20,MIN_VERSION_ZIP64:45,VERSION_MADEBY:45,METHOD_STORED:0,METHOD_DEFLATED:8,PLATFORM_UNIX:3,PLATFORM_FAT:0,SIG_LFH:67324752,SIG_DD:134695760,SIG_CFH:33639248,SIG_EOCD:101010256,SIG_ZIP64_EOCD:101075792,SIG_ZIP64_EOCD_LOC:117853008,ZIP64_MAGIC_SHORT:65535,ZIP64_MAGIC:4294967295,ZIP64_EXTRA_ID:1,ZLIB_NO_COMPRESSION:0,ZLIB_BEST_SPEED:1,ZLIB_BEST_COMPRESSION:9,ZLIB_DEFAULT_COMPRESSION:-1,MODE_MASK:4095,DEFAULT_FILE_MODE:33188,DEFAULT_DIR_MODE:16877,EXT_FILE_ATTR_DIR:1106051088,EXT_FILE_ATTR_FILE:2175008800,S_IFMT:61440,S_IFIFO:4096,S_IFCHR:8192,S_IFDIR:16384,S_IFBLK:24576,S_IFREG:32768,S_IFLNK:40960,S_IFSOCK:49152,S_DOS_A:32,S_DOS_D:16,S_DOS_V:8,S_DOS_S:4,S_DOS_H:2,S_DOS_R:1}});var OO=C((V1e,XW)=>{var TSe=require("util").inherits,SSe=Yg(),YW=$T(),VW=_O(),WW=$W(),ir=NO(),qW=kT(),Pe=XW.exports=function(t){if(!(this instanceof Pe))return new Pe(t);YW.call(this),this.platform=ir.PLATFORM_FAT,this.method=-1,this.name=null,this.size=0,this.csize=0,this.gpb=new VW,this.crc=0,this.time=-1,this.minver=ir.MIN_VERSION_INITIAL,this.mode=-1,this.extra=null,this.exattr=0,this.inattr=0,this.comment=null,t&&this.setName(t)};TSe(Pe,YW);Pe.prototype.getCentralDirectoryExtra=function(){return this.getExtra()};Pe.prototype.getComment=function(){return this.comment!==null?this.comment:""};Pe.prototype.getCompressedSize=function(){return this.csize};Pe.prototype.getCrc=function(){return this.crc};Pe.prototype.getExternalAttributes=function(){return this.exattr};Pe.prototype.getExtra=function(){return this.extra!==null?this.extra:ir.EMPTY};Pe.prototype.getGeneralPurposeBit=function(){return this.gpb};Pe.prototype.getInternalAttributes=function(){return this.inattr};Pe.prototype.getLastModifiedDate=function(){return this.getTime()};Pe.prototype.getLocalFileDataExtra=function(){return this.getExtra()};Pe.prototype.getMethod=function(){return this.method};Pe.prototype.getName=function(){return this.name};Pe.prototype.getPlatform=function(){return this.platform};Pe.prototype.getSize=function(){return this.size};Pe.prototype.getTime=function(){return this.time!==-1?qW.dosToDate(this.time):-1};Pe.prototype.getTimeDos=function(){return this.time!==-1?this.time:0};Pe.prototype.getUnixMode=function(){return this.platform!==ir.PLATFORM_UNIX?0:this.getExternalAttributes()>>ir.SHORT_SHIFT&ir.SHORT_MASK};Pe.prototype.getVersionNeededToExtract=function(){return this.minver};Pe.prototype.setComment=function(t){Buffer.byteLength(t)!==t.length&&this.getGeneralPurposeBit().useUTF8ForNames(!0),this.comment=t};Pe.prototype.setCompressedSize=function(t){if(t<0)throw new Error("invalid entry compressed size");this.csize=t};Pe.prototype.setCrc=function(t){if(t<0)throw new Error("invalid entry crc32");this.crc=t};Pe.prototype.setExternalAttributes=function(t){this.exattr=t>>>0};Pe.prototype.setExtra=function(t){this.extra=t};Pe.prototype.setGeneralPurposeBit=function(t){if(!(t instanceof VW))throw new Error("invalid entry GeneralPurposeBit");this.gpb=t};Pe.prototype.setInternalAttributes=function(t){this.inattr=t};Pe.prototype.setMethod=function(t){if(t<0)throw new Error("invalid entry compression method");this.method=t};Pe.prototype.setName=function(t,e=!1){t=SSe(t,!1).replace(/^\w+:/,"").replace(/^(\.\.\/|\/)+/,""),e&&(t=`/${t}`),Buffer.byteLength(t)!==t.length&&this.getGeneralPurposeBit().useUTF8ForNames(!0),this.name=t};Pe.prototype.setPlatform=function(t){this.platform=t};Pe.prototype.setSize=function(t){if(t<0)throw new Error("invalid entry size");this.size=t};Pe.prototype.setTime=function(t,e){if(!(t instanceof Date))throw new Error("invalid entry time");this.time=qW.dateToDos(t,e)};Pe.prototype.setUnixMode=function(t){t|=this.isDirectory()?ir.S_IFDIR:ir.S_IFREG;var e=0;e|=t<<ir.SHORT_SHIFT|(this.isDirectory()?ir.S_DOS_D:ir.S_DOS_A),this.setExternalAttributes(e),this.mode=t&ir.MODE_MASK,this.platform=ir.PLATFORM_UNIX};Pe.prototype.setVersionNeededToExtract=function(t){this.minver=t};Pe.prototype.isDirectory=function(){return this.getName().slice(-1)==="/"};Pe.prototype.isUnixSymlink=function(){return(this.getUnixMode()&WW.FILE_TYPE_FLAG)===WW.LINK_FLAG};Pe.prototype.isZip64=function(){return this.csize>ir.ZIP64_MAGIC||this.size>ir.ZIP64_MAGIC}});var At=C((q1e,zW)=>{"use strict";var CO=class extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError(`Expected input to be an Array, got ${typeof e}`);let n="";for(let r=0;r<e.length;r++)n+=`    ${e[r].stack}
`;super(n),this.name="AggregateError",this.errors=e}};zW.exports={AggregateError:CO,ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,e){return t.includes(e)},ArrayPrototypeIndexOf(t,e){return t.indexOf(e)},ArrayPrototypeJoin(t,e){return t.join(e)},ArrayPrototypeMap(t,e){return t.map(e)},ArrayPrototypePop(t,e){return t.pop(e)},ArrayPrototypePush(t,e){return t.push(e)},ArrayPrototypeSlice(t,e,n){return t.slice(e,n)},Error,FunctionPrototypeCall(t,e,...n){return t.call(e,...n)},FunctionPrototypeSymbolHasInstance(t,e){return Function.prototype[Symbol.hasInstance].call(t,e)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,e){return Object.defineProperties(t,e)},ObjectDefineProperty(t,e,n){return Object.defineProperty(t,e,n)},ObjectGetOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,e){return Object.setPrototypeOf(t,e)},Promise,PromisePrototypeCatch(t,e){return t.catch(e)},PromisePrototypeThen(t,e,n){return t.then(e,n)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,e){return t.test(e)},SafeSet:Set,String,StringPrototypeSlice(t,e,n){return t.slice(e,n)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,e,n){return t.set(e,n)},Boolean,Uint8Array}});var bO=C((X1e,jW)=>{"use strict";jW.exports={format(t,...e){return t.replace(/%([sdifj])/g,function(...[n,r]){let i=e.shift();return r==="f"?i.toFixed(6):r==="j"?JSON.stringify(i):r==="s"&&typeof i=="object"?`${i.constructor!==Object?i.constructor.name:""} {}`.trim():i.toString()})},inspect(t){switch(typeof t){case"string":if(t.includes("'"))if(t.includes('"')){if(!t.includes("`")&&!t.includes("${"))return`\`${t}\``}else return`"${t}"`;return`'${t}'`;case"number":return isNaN(t)?"NaN":Object.is(t,-0)?String(t):t;case"bigint":return`${String(t)}n`;case"boolean":case"undefined":return String(t);case"object":return"{}"}}}});var Xn=C((z1e,QW)=>{"use strict";var{format:RSe,inspect:WT}=bO(),{AggregateError:ASe}=At(),mSe=globalThis.AggregateError||ASe,gSe=Symbol("kIsNodeError"),ISe=["string","function","number","object","Function","Object","boolean","bigint","symbol"],_Se=/^([A-Z][a-z0-9]*)+$/,NSe="__node_internal_",YT={};function pa(t,e){if(!t)throw new YT.ERR_INTERNAL_ASSERTION(e)}function KW(t){let e="",n=t.length,r=t[0]==="-"?1:0;for(;n>=r+4;n-=3)e=`_${t.slice(n-3,n)}${e}`;return`${t.slice(0,n)}${e}`}function OSe(t,e,n){if(typeof e=="function")return pa(e.length<=n.length,`Code: ${t}; The provided arguments length (${n.length}) does not match the required ones (${e.length}).`),e(...n);let r=(e.match(/%[dfijoOs]/g)||[]).length;return pa(r===n.length,`Code: ${t}; The provided arguments length (${n.length}) does not match the required ones (${r}).`),n.length===0?e:RSe(e,...n)}function Mn(t,e,n){n||(n=Error);class r extends n{constructor(...s){super(OSe(t,e,s))}toString(){return`${this.name} [${t}]: ${this.message}`}}Object.defineProperties(r.prototype,{name:{value:n.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${t}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),r.prototype.code=t,r.prototype[gSe]=!0,YT[t]=r}function JW(t){let e=NSe+t.name;return Object.defineProperty(t,"name",{value:e}),t}function CSe(t,e){if(t&&e&&t!==e){if(Array.isArray(e.errors))return e.errors.push(t),e;let n=new mSe([e,t],e.message);return n.code=e.code,n}return t||e}var yO=class extends Error{constructor(e="The operation was aborted",n=void 0){if(n!==void 0&&typeof n!="object")throw new YT.ERR_INVALID_ARG_TYPE("options","Object",n);super(e,n),this.code="ABORT_ERR",this.name="AbortError"}};Mn("ERR_ASSERTION","%s",Error);Mn("ERR_INVALID_ARG_TYPE",(t,e,n)=>{pa(typeof t=="string","'name' must be a string"),Array.isArray(e)||(e=[e]);let r="The ";t.endsWith(" argument")?r+=`${t} `:r+=`"${t}" ${t.includes(".")?"property":"argument"} `,r+="must be ";let i=[],s=[],o=[];for(let l of e)pa(typeof l=="string","All expected entries have to be of type string"),ISe.includes(l)?i.push(l.toLowerCase()):_Se.test(l)?s.push(l):(pa(l!=="object",'The value "object" should be written as "Object"'),o.push(l));if(s.length>0){let l=i.indexOf("object");l!==-1&&(i.splice(i,l,1),s.push("Object"))}if(i.length>0){switch(i.length){case 1:r+=`of type ${i[0]}`;break;case 2:r+=`one of type ${i[0]} or ${i[1]}`;break;default:{let l=i.pop();r+=`one of type ${i.join(", ")}, or ${l}`}}(s.length>0||o.length>0)&&(r+=" or ")}if(s.length>0){switch(s.length){case 1:r+=`an instance of ${s[0]}`;break;case 2:r+=`an instance of ${s[0]} or ${s[1]}`;break;default:{let l=s.pop();r+=`an instance of ${s.join(", ")}, or ${l}`}}o.length>0&&(r+=" or ")}switch(o.length){case 0:break;case 1:o[0].toLowerCase()!==o[0]&&(r+="an "),r+=`${o[0]}`;break;case 2:r+=`one of ${o[0]} or ${o[1]}`;break;default:{let l=o.pop();r+=`one of ${o.join(", ")}, or ${l}`}}if(n==null)r+=`. Received ${n}`;else if(typeof n=="function"&&n.name)r+=`. Received function ${n.name}`;else if(typeof n=="object"){var a;if((a=n.constructor)!==null&&a!==void 0&&a.name)r+=`. Received an instance of ${n.constructor.name}`;else{let l=WT(n,{depth:-1});r+=`. Received ${l}`}}else{let l=WT(n,{colors:!1});l.length>25&&(l=`${l.slice(0,25)}...`),r+=`. Received type ${typeof n} (${l})`}return r},TypeError);Mn("ERR_INVALID_ARG_VALUE",(t,e,n="is invalid")=>{let r=WT(e);return r.length>128&&(r=r.slice(0,128)+"..."),`The ${t.includes(".")?"property":"argument"} '${t}' ${n}. Received ${r}`},TypeError);Mn("ERR_INVALID_RETURN_VALUE",(t,e,n)=>{var r;let i=n!=null&&(r=n.constructor)!==null&&r!==void 0&&r.name?`instance of ${n.constructor.name}`:`type ${typeof n}`;return`Expected ${t} to be returned from the "${e}" function but got ${i}.`},TypeError);Mn("ERR_MISSING_ARGS",(...t)=>{pa(t.length>0,"At least one arg needs to be specified");let e,n=t.length;switch(t=(Array.isArray(t)?t:[t]).map(r=>`"${r}"`).join(" or "),n){case 1:e+=`The ${t[0]} argument`;break;case 2:e+=`The ${t[0]} and ${t[1]} arguments`;break;default:{let r=t.pop();e+=`The ${t.join(", ")}, and ${r} arguments`}break}return`${e} must be specified`},TypeError);Mn("ERR_OUT_OF_RANGE",(t,e,n)=>{pa(e,'Missing "range" argument');let r;if(Number.isInteger(n)&&Math.abs(n)>2**32)r=KW(String(n));else if(typeof n=="bigint"){r=String(n);let i=BigInt(2)**BigInt(32);(n>i||n<-i)&&(r=KW(r)),r+="n"}else r=WT(n);return`The value of "${t}" is out of range. It must be ${e}. Received ${r}`},RangeError);Mn("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);Mn("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);Mn("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);Mn("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);Mn("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);Mn("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Mn("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);Mn("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);Mn("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);Mn("ERR_STREAM_WRITE_AFTER_END","write after end",Error);Mn("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);QW.exports={AbortError:yO,aggregateTwoErrors:JW(CSe),hideStackFrames:JW,codes:YT}});var sr=C((j1e,LO)=>{"use strict";var bSe=require("buffer"),{format:ySe,inspect:wSe}=bO(),{codes:{ERR_INVALID_ARG_TYPE:wO}}=Xn(),{kResistStopPropagation:LSe,AggregateError:DSe,SymbolDispose:PSe}=At(),xSe=globalThis.AbortSignal||kt().AbortSignal,vSe=globalThis.AbortController||kt().AbortController,MSe=Object.getPrototypeOf(async function(){}).constructor,ZW=globalThis.Blob||bSe.Blob,USe=typeof ZW<"u"?function(e){return e instanceof ZW}:function(e){return!1},eY=(t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new wO(e,"AbortSignal",t)},BSe=(t,e)=>{if(typeof t!="function")throw new wO(e,"Function",t)};LO.exports={AggregateError:DSe,kEmptyObject:Object.freeze({}),once(t){let e=!1;return function(...n){e||(e=!0,t.apply(this,n))}},createDeferredPromise:function(){let t,e;return{promise:new Promise((r,i)=>{t=r,e=i}),resolve:t,reject:e}},promisify(t){return new Promise((e,n)=>{t((r,...i)=>r?n(r):e(...i))})},debuglog(){return function(){}},format:ySe,inspect:wSe,types:{isAsyncFunction(t){return t instanceof MSe},isArrayBufferView(t){return ArrayBuffer.isView(t)}},isBlob:USe,deprecate(t,e){return t},addAbortListener:require("events").addAbortListener||function(e,n){if(e===void 0)throw new wO("signal","AbortSignal",e);eY(e,"signal"),BSe(n,"listener");let r;return e.aborted?queueMicrotask(()=>n()):(e.addEventListener("abort",n,{__proto__:null,once:!0,[LSe]:!0}),r=()=>{e.removeEventListener("abort",n)}),{__proto__:null,[PSe](){var i;(i=r)===null||i===void 0||i()}}},AbortSignalAny:xSe.any||function(e){if(e.length===1)return e[0];let n=new vSe,r=()=>n.abort();return e.forEach(i=>{eY(i,"signals"),i.addEventListener("abort",r,{once:!0})}),n.signal.addEventListener("abort",()=>{e.forEach(i=>i.removeEventListener("abort",r))},{once:!0}),n.signal}};LO.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")});var lc=C((K1e,uY)=>{"use strict";var{ArrayIsArray:PO,ArrayPrototypeIncludes:iY,ArrayPrototypeJoin:sY,ArrayPrototypeMap:FSe,NumberIsInteger:xO,NumberIsNaN:HSe,NumberMAX_SAFE_INTEGER:GSe,NumberMIN_SAFE_INTEGER:$Se,NumberParseInt:kSe,ObjectPrototypeHasOwnProperty:WSe,RegExpPrototypeExec:oY,String:YSe,StringPrototypeToUpperCase:VSe,StringPrototypeTrim:qSe}=At(),{hideStackFrames:Hr,codes:{ERR_SOCKET_BAD_PORT:XSe,ERR_INVALID_ARG_TYPE:zn,ERR_INVALID_ARG_VALUE:ac,ERR_OUT_OF_RANGE:Ta,ERR_UNKNOWN_SIGNAL:tY}}=Xn(),{normalizeEncoding:zSe}=sr(),{isAsyncFunction:jSe,isArrayBufferView:KSe}=sr().types,nY={};function JSe(t){return t===(t|0)}function QSe(t){return t===t>>>0}var ZSe=/^[0-7]+$/,eRe="must be a 32-bit unsigned integer or an octal string";function tRe(t,e,n){if(typeof t>"u"&&(t=n),typeof t=="string"){if(oY(ZSe,t)===null)throw new ac(e,t,eRe);t=kSe(t,8)}return aY(t,e),t}var nRe=Hr((t,e,n=$Se,r=GSe)=>{if(typeof t!="number")throw new zn(e,"number",t);if(!xO(t))throw new Ta(e,"an integer",t);if(t<n||t>r)throw new Ta(e,`>= ${n} && <= ${r}`,t)}),rRe=Hr((t,e,n=-2147483648,r=2147483647)=>{if(typeof t!="number")throw new zn(e,"number",t);if(!xO(t))throw new Ta(e,"an integer",t);if(t<n||t>r)throw new Ta(e,`>= ${n} && <= ${r}`,t)}),aY=Hr((t,e,n=!1)=>{if(typeof t!="number")throw new zn(e,"number",t);if(!xO(t))throw new Ta(e,"an integer",t);let r=n?1:0,i=4294967295;if(t<r||t>i)throw new Ta(e,`>= ${r} && <= ${i}`,t)});function vO(t,e){if(typeof t!="string")throw new zn(e,"string",t)}function iRe(t,e,n=void 0,r){if(typeof t!="number")throw new zn(e,"number",t);if(n!=null&&t<n||r!=null&&t>r||(n!=null||r!=null)&&HSe(t))throw new Ta(e,`${n!=null?`>= ${n}`:""}${n!=null&&r!=null?" && ":""}${r!=null?`<= ${r}`:""}`,t)}var sRe=Hr((t,e,n)=>{if(!iY(n,t)){let i="must be one of: "+sY(FSe(n,s=>typeof s=="string"?`'${s}'`:YSe(s)),", ");throw new ac(e,t,i)}});function lY(t,e){if(typeof t!="boolean")throw new zn(e,"boolean",t)}function DO(t,e,n){return t==null||!WSe(t,e)?n:t[e]}var oRe=Hr((t,e,n=null)=>{let r=DO(n,"allowArray",!1),i=DO(n,"allowFunction",!1);if(!DO(n,"nullable",!1)&&t===null||!r&&PO(t)||typeof t!="object"&&(!i||typeof t!="function"))throw new zn(e,"Object",t)}),aRe=Hr((t,e)=>{if(t!=null&&typeof t!="object"&&typeof t!="function")throw new zn(e,"a dictionary",t)}),VT=Hr((t,e,n=0)=>{if(!PO(t))throw new zn(e,"Array",t);if(t.length<n){let r=`must be longer than ${n}`;throw new ac(e,t,r)}});function lRe(t,e){VT(t,e);for(let n=0;n<t.length;n++)vO(t[n],`${e}[${n}]`)}function cRe(t,e){VT(t,e);for(let n=0;n<t.length;n++)lY(t[n],`${e}[${n}]`)}function uRe(t,e){VT(t,e);for(let n=0;n<t.length;n++){let r=t[n],i=`${e}[${n}]`;if(r==null)throw new zn(i,"AbortSignal",r);cY(r,i)}}function dRe(t,e="signal"){if(vO(t,e),nY[t]===void 0)throw nY[VSe(t)]!==void 0?new tY(t+" (signals must use all capital letters)"):new tY(t)}var fRe=Hr((t,e="buffer")=>{if(!KSe(t))throw new zn(e,["Buffer","TypedArray","DataView"],t)});function ERe(t,e){let n=zSe(e),r=t.length;if(n==="hex"&&r%2!==0)throw new ac("encoding",e,`is invalid for data of length ${r}`)}function hRe(t,e="Port",n=!0){if(typeof t!="number"&&typeof t!="string"||typeof t=="string"&&qSe(t).length===0||+t!==+t>>>0||t>65535||t===0&&!n)throw new XSe(e,t,n);return t|0}var cY=Hr((t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new zn(e,"AbortSignal",t)}),pRe=Hr((t,e)=>{if(typeof t!="function")throw new zn(e,"Function",t)}),TRe=Hr((t,e)=>{if(typeof t!="function"||jSe(t))throw new zn(e,"Function",t)}),SRe=Hr((t,e)=>{if(t!==void 0)throw new zn(e,"undefined",t)});function RRe(t,e,n){if(!iY(n,t))throw new zn(e,`('${sY(n,"|")}')`,t)}var ARe=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function rY(t,e){if(typeof t>"u"||!oY(ARe,t))throw new ac(e,t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function mRe(t){if(typeof t=="string")return rY(t,"hints"),t;if(PO(t)){let e=t.length,n="";if(e===0)return n;for(let r=0;r<e;r++){let i=t[r];rY(i,"hints"),n+=i,r!==e-1&&(n+=", ")}return n}throw new ac("hints",t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}uY.exports={isInt32:JSe,isUint32:QSe,parseFileMode:tRe,validateArray:VT,validateStringArray:lRe,validateBooleanArray:cRe,validateAbortSignalArray:uRe,validateBoolean:lY,validateBuffer:fRe,validateDictionary:aRe,validateEncoding:ERe,validateFunction:pRe,validateInt32:rRe,validateInteger:nRe,validateNumber:iRe,validateObject:oRe,validateOneOf:sRe,validatePlainFunction:TRe,validatePort:hRe,validateSignalName:dRe,validateString:vO,validateUint32:aY,validateUndefined:SRe,validateUnion:RRe,validateAbortSignal:cY,validateLinkHeaderValue:mRe}});var xi=C((J1e,OY)=>{"use strict";var{SymbolAsyncIterator:dY,SymbolIterator:fY,SymbolFor:Sa}=At(),EY=Sa("nodejs.stream.destroyed"),hY=Sa("nodejs.stream.errored"),MO=Sa("nodejs.stream.readable"),UO=Sa("nodejs.stream.writable"),pY=Sa("nodejs.stream.disturbed"),gRe=Sa("nodejs.webstream.isClosedPromise"),IRe=Sa("nodejs.webstream.controllerErrorFunction");function qT(t,e=!1){var n;return!!(t&&typeof t.pipe=="function"&&typeof t.on=="function"&&(!e||typeof t.pause=="function"&&typeof t.resume=="function")&&(!t._writableState||((n=t._readableState)===null||n===void 0?void 0:n.readable)!==!1)&&(!t._writableState||t._readableState))}function XT(t){var e;return!!(t&&typeof t.write=="function"&&typeof t.on=="function"&&(!t._readableState||((e=t._writableState)===null||e===void 0?void 0:e.writable)!==!1))}function _Re(t){return!!(t&&typeof t.pipe=="function"&&t._readableState&&typeof t.on=="function"&&typeof t.write=="function")}function Pi(t){return t&&(t._readableState||t._writableState||typeof t.write=="function"&&typeof t.on=="function"||typeof t.pipe=="function"&&typeof t.on=="function")}function TY(t){return!!(t&&!Pi(t)&&typeof t.pipeThrough=="function"&&typeof t.getReader=="function"&&typeof t.cancel=="function")}function SY(t){return!!(t&&!Pi(t)&&typeof t.getWriter=="function"&&typeof t.abort=="function")}function RY(t){return!!(t&&!Pi(t)&&typeof t.readable=="object"&&typeof t.writable=="object")}function NRe(t){return TY(t)||SY(t)||RY(t)}function ORe(t,e){return t==null?!1:e===!0?typeof t[dY]=="function":e===!1?typeof t[fY]=="function":typeof t[dY]=="function"||typeof t[fY]=="function"}function zT(t){if(!Pi(t))return null;let e=t._writableState,n=t._readableState,r=e||n;return!!(t.destroyed||t[EY]||r!=null&&r.destroyed)}function AY(t){if(!XT(t))return null;if(t.writableEnded===!0)return!0;let e=t._writableState;return e!=null&&e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function CRe(t,e){if(!XT(t))return null;if(t.writableFinished===!0)return!0;let n=t._writableState;return n!=null&&n.errored?!1:typeof n?.finished!="boolean"?null:!!(n.finished||e===!1&&n.ended===!0&&n.length===0)}function bRe(t){if(!qT(t))return null;if(t.readableEnded===!0)return!0;let e=t._readableState;return!e||e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function mY(t,e){if(!qT(t))return null;let n=t._readableState;return n!=null&&n.errored?!1:typeof n?.endEmitted!="boolean"?null:!!(n.endEmitted||e===!1&&n.ended===!0&&n.length===0)}function gY(t){return t&&t[MO]!=null?t[MO]:typeof t?.readable!="boolean"?null:zT(t)?!1:qT(t)&&t.readable&&!mY(t)}function IY(t){return t&&t[UO]!=null?t[UO]:typeof t?.writable!="boolean"?null:zT(t)?!1:XT(t)&&t.writable&&!AY(t)}function yRe(t,e){return Pi(t)?zT(t)?!0:!(e?.readable!==!1&&gY(t)||e?.writable!==!1&&IY(t)):null}function wRe(t){var e,n;return Pi(t)?t.writableErrored?t.writableErrored:(e=(n=t._writableState)===null||n===void 0?void 0:n.errored)!==null&&e!==void 0?e:null:null}function LRe(t){var e,n;return Pi(t)?t.readableErrored?t.readableErrored:(e=(n=t._readableState)===null||n===void 0?void 0:n.errored)!==null&&e!==void 0?e:null:null}function DRe(t){if(!Pi(t))return null;if(typeof t.closed=="boolean")return t.closed;let e=t._writableState,n=t._readableState;return typeof e?.closed=="boolean"||typeof n?.closed=="boolean"?e?.closed||n?.closed:typeof t._closed=="boolean"&&_Y(t)?t._closed:null}function _Y(t){return typeof t._closed=="boolean"&&typeof t._defaultKeepAlive=="boolean"&&typeof t._removedConnection=="boolean"&&typeof t._removedContLen=="boolean"}function NY(t){return typeof t._sent100=="boolean"&&_Y(t)}function PRe(t){var e;return typeof t._consuming=="boolean"&&typeof t._dumped=="boolean"&&((e=t.req)===null||e===void 0?void 0:e.upgradeOrConnect)===void 0}function xRe(t){if(!Pi(t))return null;let e=t._writableState,n=t._readableState,r=e||n;return!r&&NY(t)||!!(r&&r.autoDestroy&&r.emitClose&&r.closed===!1)}function vRe(t){var e;return!!(t&&((e=t[pY])!==null&&e!==void 0?e:t.readableDidRead||t.readableAborted))}function MRe(t){var e,n,r,i,s,o,a,l,c,u;return!!(t&&((e=(n=(r=(i=(s=(o=t[hY])!==null&&o!==void 0?o:t.readableErrored)!==null&&s!==void 0?s:t.writableErrored)!==null&&i!==void 0?i:(a=t._readableState)===null||a===void 0?void 0:a.errorEmitted)!==null&&r!==void 0?r:(l=t._writableState)===null||l===void 0?void 0:l.errorEmitted)!==null&&n!==void 0?n:(c=t._readableState)===null||c===void 0?void 0:c.errored)!==null&&e!==void 0?e:!((u=t._writableState)===null||u===void 0)&&u.errored))}OY.exports={isDestroyed:zT,kIsDestroyed:EY,isDisturbed:vRe,kIsDisturbed:pY,isErrored:MRe,kIsErrored:hY,isReadable:gY,kIsReadable:MO,kIsClosedPromise:gRe,kControllerErrorFunction:IRe,kIsWritable:UO,isClosed:DRe,isDuplexNodeStream:_Re,isFinished:yRe,isIterable:ORe,isReadableNodeStream:qT,isReadableStream:TY,isReadableEnded:bRe,isReadableFinished:mY,isReadableErrored:LRe,isNodeStream:Pi,isWebStream:NRe,isWritable:IY,isWritableNodeStream:XT,isWritableStream:SY,isWritableEnded:AY,isWritableFinished:CRe,isWritableErrored:wRe,isServerRequest:PRe,isServerResponse:NY,willEmitClose:xRe,isTransformStream:RY}});var Ss=C((Q1e,$O)=>{"use strict";var so=it(),{AbortError:vY,codes:URe}=Xn(),{ERR_INVALID_ARG_TYPE:BRe,ERR_STREAM_PREMATURE_CLOSE:CY}=URe,{kEmptyObject:FO,once:HO}=sr(),{validateAbortSignal:FRe,validateFunction:HRe,validateObject:GRe,validateBoolean:$Re}=lc(),{Promise:kRe,PromisePrototypeThen:WRe,SymbolDispose:MY}=At(),{isClosed:YRe,isReadable:bY,isReadableNodeStream:BO,isReadableStream:VRe,isReadableFinished:yY,isReadableErrored:wY,isWritable:LY,isWritableNodeStream:DY,isWritableStream:qRe,isWritableFinished:PY,isWritableErrored:xY,isNodeStream:XRe,willEmitClose:zRe,kIsClosedPromise:jRe}=xi(),cc;function KRe(t){return t.setHeader&&typeof t.abort=="function"}var GO=()=>{};function UY(t,e,n){var r,i;if(arguments.length===2?(n=e,e=FO):e==null?e=FO:GRe(e,"options"),HRe(n,"callback"),FRe(e.signal,"options.signal"),n=HO(n),VRe(t)||qRe(t))return JRe(t,e,n);if(!XRe(t))throw new BRe("stream",["ReadableStream","WritableStream","Stream"],t);let s=(r=e.readable)!==null&&r!==void 0?r:BO(t),o=(i=e.writable)!==null&&i!==void 0?i:DY(t),a=t._writableState,l=t._readableState,c=()=>{t.writable||E()},u=zRe(t)&&BO(t)===s&&DY(t)===o,d=PY(t,!1),E=()=>{d=!0,t.destroyed&&(u=!1),!(u&&(!t.readable||s))&&(!s||f)&&n.call(t)},f=yY(t,!1),p=()=>{f=!0,t.destroyed&&(u=!1),!(u&&(!t.writable||o))&&(!o||d)&&n.call(t)},h=N=>{n.call(t,N)},T=YRe(t),S=()=>{T=!0;let N=xY(t)||wY(t);if(N&&typeof N!="boolean")return n.call(t,N);if(s&&!f&&BO(t,!0)&&!yY(t,!1))return n.call(t,new CY);if(o&&!d&&!PY(t,!1))return n.call(t,new CY);n.call(t)},A=()=>{T=!0;let N=xY(t)||wY(t);if(N&&typeof N!="boolean")return n.call(t,N);n.call(t)},R=()=>{t.req.on("finish",E)};KRe(t)?(t.on("complete",E),u||t.on("abort",S),t.req?R():t.on("request",R)):o&&!a&&(t.on("end",c),t.on("close",c)),!u&&typeof t.aborted=="boolean"&&t.on("aborted",S),t.on("end",p),t.on("finish",E),e.error!==!1&&t.on("error",h),t.on("close",S),T?so.nextTick(S):a!=null&&a.errorEmitted||l!=null&&l.errorEmitted?u||so.nextTick(A):(!s&&(!u||bY(t))&&(d||LY(t)===!1)||!o&&(!u||LY(t))&&(f||bY(t)===!1)||l&&t.req&&t.aborted)&&so.nextTick(A);let m=()=>{n=GO,t.removeListener("aborted",S),t.removeListener("complete",E),t.removeListener("abort",S),t.removeListener("request",R),t.req&&t.req.removeListener("finish",E),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",E),t.removeListener("end",p),t.removeListener("error",h),t.removeListener("close",S)};if(e.signal&&!T){let N=()=>{let L=n;m(),L.call(t,new vY(void 0,{cause:e.signal.reason}))};if(e.signal.aborted)so.nextTick(N);else{cc=cc||sr().addAbortListener;let L=cc(e.signal,N),I=n;n=HO((...D)=>{L[MY](),I.apply(t,D)})}}return m}function JRe(t,e,n){let r=!1,i=GO;if(e.signal)if(i=()=>{r=!0,n.call(t,new vY(void 0,{cause:e.signal.reason}))},e.signal.aborted)so.nextTick(i);else{cc=cc||sr().addAbortListener;let o=cc(e.signal,i),a=n;n=HO((...l)=>{o[MY](),a.apply(t,l)})}let s=(...o)=>{r||so.nextTick(()=>n.apply(t,o))};return WRe(t[jRe].promise,s,s),GO}function QRe(t,e){var n;let r=!1;return e===null&&(e=FO),(n=e)!==null&&n!==void 0&&n.cleanup&&($Re(e.cleanup,"cleanup"),r=e.cleanup),new kRe((i,s)=>{let o=UY(t,e,a=>{r&&o(),a?s(a):i()})})}$O.exports=UY;$O.exports.finished=QRe});var Ra=C((Z1e,YY)=>{"use strict";var vi=it(),{aggregateTwoErrors:ZRe,codes:{ERR_MULTIPLE_CALLBACK:eAe},AbortError:tAe}=Xn(),{Symbol:HY}=At(),{kIsDestroyed:nAe,isDestroyed:rAe,isFinished:iAe,isServerRequest:sAe}=xi(),GY=HY("kDestroy"),kO=HY("kConstruct");function $Y(t,e,n){t&&(t.stack,e&&!e.errored&&(e.errored=t),n&&!n.errored&&(n.errored=t))}function oAe(t,e){let n=this._readableState,r=this._writableState,i=r||n;return r!=null&&r.destroyed||n!=null&&n.destroyed?(typeof e=="function"&&e(),this):($Y(t,r,n),r&&(r.destroyed=!0),n&&(n.destroyed=!0),i.constructed?BY(this,t,e):this.once(GY,function(s){BY(this,ZRe(s,t),e)}),this)}function BY(t,e,n){let r=!1;function i(s){if(r)return;r=!0;let o=t._readableState,a=t._writableState;$Y(s,a,o),a&&(a.closed=!0),o&&(o.closed=!0),typeof n=="function"&&n(s),s?vi.nextTick(aAe,t,s):vi.nextTick(kY,t)}try{t._destroy(e||null,i)}catch(s){i(s)}}function aAe(t,e){WO(t,e),kY(t)}function kY(t){let e=t._readableState,n=t._writableState;n&&(n.closeEmitted=!0),e&&(e.closeEmitted=!0),(n!=null&&n.emitClose||e!=null&&e.emitClose)&&t.emit("close")}function WO(t,e){let n=t._readableState,r=t._writableState;r!=null&&r.errorEmitted||n!=null&&n.errorEmitted||(r&&(r.errorEmitted=!0),n&&(n.errorEmitted=!0),t.emit("error",e))}function lAe(){let t=this._readableState,e=this._writableState;t&&(t.constructed=!0,t.closed=!1,t.closeEmitted=!1,t.destroyed=!1,t.errored=null,t.errorEmitted=!1,t.reading=!1,t.ended=t.readable===!1,t.endEmitted=t.readable===!1),e&&(e.constructed=!0,e.destroyed=!1,e.closed=!1,e.closeEmitted=!1,e.errored=null,e.errorEmitted=!1,e.finalCalled=!1,e.prefinished=!1,e.ended=e.writable===!1,e.ending=e.writable===!1,e.finished=e.writable===!1)}function YO(t,e,n){let r=t._readableState,i=t._writableState;if(i!=null&&i.destroyed||r!=null&&r.destroyed)return this;r!=null&&r.autoDestroy||i!=null&&i.autoDestroy?t.destroy(e):e&&(e.stack,i&&!i.errored&&(i.errored=e),r&&!r.errored&&(r.errored=e),n?vi.nextTick(WO,t,e):WO(t,e))}function cAe(t,e){if(typeof t._construct!="function")return;let n=t._readableState,r=t._writableState;n&&(n.constructed=!1),r&&(r.constructed=!1),t.once(kO,e),!(t.listenerCount(kO)>1)&&vi.nextTick(uAe,t)}function uAe(t){let e=!1;function n(r){if(e){YO(t,r??new eAe);return}e=!0;let i=t._readableState,s=t._writableState,o=s||i;i&&(i.constructed=!0),s&&(s.constructed=!0),o.destroyed?t.emit(GY,r):r?YO(t,r,!0):vi.nextTick(dAe,t)}try{t._construct(r=>{vi.nextTick(n,r)})}catch(r){vi.nextTick(n,r)}}function dAe(t){t.emit(kO)}function FY(t){return t?.setHeader&&typeof t.abort=="function"}function WY(t){t.emit("close")}function fAe(t,e){t.emit("error",e),vi.nextTick(WY,t)}function EAe(t,e){!t||rAe(t)||(!e&&!iAe(t)&&(e=new tAe),sAe(t)?(t.socket=null,t.destroy(e)):FY(t)?t.abort():FY(t.req)?t.req.abort():typeof t.destroy=="function"?t.destroy(e):typeof t.close=="function"?t.close():e?vi.nextTick(fAe,t,e):vi.nextTick(WY,t),t.destroyed||(t[nAe]=!0))}YY.exports={construct:cAe,destroyer:EAe,destroy:oAe,undestroy:lAe,errorOrDestroy:YO}});var JT=C((eHe,qY)=>{"use strict";var{ArrayIsArray:hAe,ObjectSetPrototypeOf:VY}=At(),{EventEmitter:jT}=require("events");function KT(t){jT.call(this,t)}VY(KT.prototype,jT.prototype);VY(KT,jT);KT.prototype.pipe=function(t,e){let n=this;function r(u){t.writable&&t.write(u)===!1&&n.pause&&n.pause()}n.on("data",r);function i(){n.readable&&n.resume&&n.resume()}t.on("drain",i),!t._isStdio&&(!e||e.end!==!1)&&(n.on("end",o),n.on("close",a));let s=!1;function o(){s||(s=!0,t.end())}function a(){s||(s=!0,typeof t.destroy=="function"&&t.destroy())}function l(u){c(),jT.listenerCount(this,"error")===0&&this.emit("error",u)}VO(n,"error",l),VO(t,"error",l);function c(){n.removeListener("data",r),t.removeListener("drain",i),n.removeListener("end",o),n.removeListener("close",a),n.removeListener("error",l),t.removeListener("error",l),n.removeListener("end",c),n.removeListener("close",c),t.removeListener("close",c)}return n.on("end",c),n.on("close",c),t.on("close",c),t.emit("pipe",n),t};function VO(t,e,n){if(typeof t.prependListener=="function")return t.prependListener(e,n);!t._events||!t._events[e]?t.on(e,n):hAe(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]}qY.exports={Stream:KT,prependListener:VO}});var ef=C((tHe,QT)=>{"use strict";var{SymbolDispose:pAe}=At(),{AbortError:XY,codes:TAe}=Xn(),{isNodeStream:zY,isWebStream:SAe,kControllerErrorFunction:RAe}=xi(),AAe=Ss(),{ERR_INVALID_ARG_TYPE:jY}=TAe,qO,mAe=(t,e)=>{if(typeof t!="object"||!("aborted"in t))throw new jY(e,"AbortSignal",t)};QT.exports.addAbortSignal=function(e,n){if(mAe(e,"signal"),!zY(n)&&!SAe(n))throw new jY("stream",["ReadableStream","WritableStream","Stream"],n);return QT.exports.addAbortSignalNoValidate(e,n)};QT.exports.addAbortSignalNoValidate=function(t,e){if(typeof t!="object"||!("aborted"in t))return e;let n=zY(e)?()=>{e.destroy(new XY(void 0,{cause:t.reason}))}:()=>{e[RAe](new XY(void 0,{cause:t.reason}))};if(t.aborted)n();else{qO=qO||sr().addAbortListener;let r=qO(t,n);AAe(e,r[pAe])}return e}});var QY=C((rHe,JY)=>{"use strict";var{StringPrototypeSlice:KY,SymbolIterator:gAe,TypedArrayPrototypeSet:ZT,Uint8Array:IAe}=At(),{Buffer:XO}=require("buffer"),{inspect:_Ae}=sr();JY.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){let n={data:e,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}unshift(e){let n={data:e,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}shift(){if(this.length===0)return;let e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return"";let n=this.head,r=""+n.data;for(;(n=n.next)!==null;)r+=e+n.data;return r}concat(e){if(this.length===0)return XO.alloc(0);let n=XO.allocUnsafe(e>>>0),r=this.head,i=0;for(;r;)ZT(n,r.data,i),i+=r.data.length,r=r.next;return n}consume(e,n){let r=this.head.data;if(e<r.length){let i=r.slice(0,e);return this.head.data=r.slice(e),i}return e===r.length?this.shift():n?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[gAe](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let n="",r=this.head,i=0;do{let s=r.data;if(e>s.length)n+=s,e-=s.length;else{e===s.length?(n+=s,++i,r.next?this.head=r.next:this.head=this.tail=null):(n+=KY(s,0,e),this.head=r,r.data=KY(s,e));break}++i}while((r=r.next)!==null);return this.length-=i,n}_getBuffer(e){let n=XO.allocUnsafe(e),r=e,i=this.head,s=0;do{let o=i.data;if(e>o.length)ZT(n,o,r-e),e-=o.length;else{e===o.length?(ZT(n,o,r-e),++s,i.next?this.head=i.next:this.head=this.tail=null):(ZT(n,new IAe(o.buffer,o.byteOffset,e),r-e),this.head=i,i.data=o.slice(e));break}++s}while((i=i.next)!==null);return this.length-=s,n}[Symbol.for("nodejs.util.inspect.custom")](e,n){return _Ae(this,{...n,depth:0,customInspect:!1})}}});var tf=C((iHe,nV)=>{"use strict";var{MathFloor:NAe,NumberIsInteger:OAe}=At(),{validateInteger:CAe}=lc(),{ERR_INVALID_ARG_VALUE:bAe}=Xn().codes,ZY=16*1024,eV=16;function yAe(t,e,n){return t.highWaterMark!=null?t.highWaterMark:e?t[n]:null}function tV(t){return t?eV:ZY}function wAe(t,e){CAe(e,"value",0),t?eV=e:ZY=e}function LAe(t,e,n,r){let i=yAe(e,r,n);if(i!=null){if(!OAe(i)||i<0){let s=r?`options.${n}`:"options.highWaterMark";throw new bAe(s,i)}return NAe(i)}return tV(t.objectMode)}nV.exports={getHighWaterMark:LAe,getDefaultHighWaterMark:tV,setDefaultHighWaterMark:wAe}});var zO=C((sHe,oV)=>{"use strict";var rV=it(),{PromisePrototypeThen:DAe,SymbolAsyncIterator:iV,SymbolIterator:sV}=At(),{Buffer:PAe}=require("buffer"),{ERR_INVALID_ARG_TYPE:xAe,ERR_STREAM_NULL_VALUES:vAe}=Xn().codes;function MAe(t,e,n){let r;if(typeof e=="string"||e instanceof PAe)return new t({objectMode:!0,...n,read(){this.push(e),this.push(null)}});let i;if(e&&e[iV])i=!0,r=e[iV]();else if(e&&e[sV])i=!1,r=e[sV]();else throw new xAe("iterable",["Iterable"],e);let s=new t({objectMode:!0,highWaterMark:1,...n}),o=!1;s._read=function(){o||(o=!0,l())},s._destroy=function(c,u){DAe(a(c),()=>rV.nextTick(u,c),d=>rV.nextTick(u,d||c))};async function a(c){let u=c!=null,d=typeof r.throw=="function";if(u&&d){let{value:E,done:f}=await r.throw(c);if(await E,f)return}if(typeof r.return=="function"){let{value:E}=await r.return();await E}}async function l(){for(;;){try{let{value:c,done:u}=i?await r.next():r.next();if(u)s.push(null);else{let d=c&&typeof c.then=="function"?await c:c;if(d===null)throw o=!1,new vAe;if(s.push(d))continue;o=!1}}catch(c){s.destroy(c)}break}}return s}oV.exports=MAe});var rf=C((oHe,NV)=>{"use strict";var ti=it(),{ArrayPrototypeIndexOf:UAe,NumberIsInteger:BAe,NumberIsNaN:FAe,NumberParseInt:HAe,ObjectDefineProperties:nC,ObjectKeys:GAe,ObjectSetPrototypeOf:cV,Promise:uV,SafeSet:$Ae,SymbolAsyncDispose:kAe,SymbolAsyncIterator:WAe,Symbol:YAe}=At();NV.exports=ye;ye.ReadableState=rS;var{EventEmitter:VAe}=require("events"),{Stream:oo,prependListener:qAe}=JT(),{Buffer:jO}=require("buffer"),{addAbortSignal:XAe}=ef(),dV=Ss(),We=sr().debuglog("stream",t=>{We=t}),zAe=QY(),fc=Ra(),{getHighWaterMark:jAe,getDefaultHighWaterMark:KAe}=tf(),{aggregateTwoErrors:aV,codes:{ERR_INVALID_ARG_TYPE:JAe,ERR_METHOD_NOT_IMPLEMENTED:QAe,ERR_OUT_OF_RANGE:ZAe,ERR_STREAM_PUSH_AFTER_EOF:eme,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:tme},AbortError:nme}=Xn(),{validateObject:rme}=lc(),Aa=YAe("kPaused"),{StringDecoder:fV}=ad(),ime=zO();cV(ye.prototype,oo.prototype);cV(ye,oo);var KO=()=>{},{errorOrDestroy:uc}=fc,dc=1,sme=2,EV=4,nf=8,hV=16,eS=32,tS=64,pV=128,ome=256,ame=512,lme=1024,eC=2048,tC=4096,cme=8192,ume=16384,dme=32768,TV=65536,fme=1<<17,Eme=1<<18;function rn(t){return{enumerable:!1,get(){return(this.state&t)!==0},set(e){e?this.state|=t:this.state&=~t}}}nC(rS.prototype,{objectMode:rn(dc),ended:rn(sme),endEmitted:rn(EV),reading:rn(nf),constructed:rn(hV),sync:rn(eS),needReadable:rn(tS),emittedReadable:rn(pV),readableListening:rn(ome),resumeScheduled:rn(ame),errorEmitted:rn(lme),emitClose:rn(eC),autoDestroy:rn(tC),destroyed:rn(cme),closed:rn(ume),closeEmitted:rn(dme),multiAwaitDrain:rn(TV),readingMore:rn(fme),dataEmitted:rn(Eme)});function rS(t,e,n){typeof n!="boolean"&&(n=e instanceof Mi()),this.state=eC|tC|hV|eS,t&&t.objectMode&&(this.state|=dc),n&&t&&t.readableObjectMode&&(this.state|=dc),this.highWaterMark=t?jAe(this,t,"readableHighWaterMark",n):KAe(!1),this.buffer=new zAe,this.length=0,this.pipes=[],this.flowing=null,this[Aa]=null,t&&t.emitClose===!1&&(this.state&=~eC),t&&t.autoDestroy===!1&&(this.state&=~tC),this.errored=null,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,t&&t.encoding&&(this.decoder=new fV(t.encoding),this.encoding=t.encoding)}function ye(t){if(!(this instanceof ye))return new ye(t);let e=this instanceof Mi();this._readableState=new rS(t,this,e),t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&!e&&XAe(t.signal,this)),oo.call(this,t),fc.construct(this,()=>{this._readableState.needReadable&&nS(this,this._readableState)})}ye.prototype.destroy=fc.destroy;ye.prototype._undestroy=fc.undestroy;ye.prototype._destroy=function(t,e){e(t)};ye.prototype[VAe.captureRejectionSymbol]=function(t){this.destroy(t)};ye.prototype[kAe]=function(){let t;return this.destroyed||(t=this.readableEnded?null:new nme,this.destroy(t)),new uV((e,n)=>dV(this,r=>r&&r!==t?n(r):e(null)))};ye.prototype.push=function(t,e){return SV(this,t,e,!1)};ye.prototype.unshift=function(t,e){return SV(this,t,e,!0)};function SV(t,e,n,r){We("readableAddChunk",e);let i=t._readableState,s;if((i.state&dc)===0&&(typeof e=="string"?(n=n||i.defaultEncoding,i.encoding!==n&&(r&&i.encoding?e=jO.from(e,n).toString(i.encoding):(e=jO.from(e,n),n=""))):e instanceof jO?n="":oo._isUint8Array(e)?(e=oo._uint8ArrayToBuffer(e),n=""):e!=null&&(s=new JAe("chunk",["string","Buffer","Uint8Array"],e))),s)uc(t,s);else if(e===null)i.state&=~nf,Tme(t,i);else if((i.state&dc)!==0||e&&e.length>0)if(r)if((i.state&EV)!==0)uc(t,new tme);else{if(i.destroyed||i.errored)return!1;JO(t,i,e,!0)}else if(i.ended)uc(t,new eme);else{if(i.destroyed||i.errored)return!1;i.state&=~nf,i.decoder&&!n?(e=i.decoder.write(e),i.objectMode||e.length!==0?JO(t,i,e,!1):nS(t,i)):JO(t,i,e,!1)}else r||(i.state&=~nf,nS(t,i));return!i.ended&&(i.length<i.highWaterMark||i.length===0)}function JO(t,e,n,r){e.flowing&&e.length===0&&!e.sync&&t.listenerCount("data")>0?((e.state&TV)!==0?e.awaitDrainWriters.clear():e.awaitDrainWriters=null,e.dataEmitted=!0,t.emit("data",n)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),(e.state&tS)!==0&&iS(t)),nS(t,e)}ye.prototype.isPaused=function(){let t=this._readableState;return t[Aa]===!0||t.flowing===!1};ye.prototype.setEncoding=function(t){let e=new fV(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;let n=this._readableState.buffer,r="";for(let i of n)r+=e.write(i);return n.clear(),r!==""&&n.push(r),this._readableState.length=r.length,this};var hme=1073741824;function pme(t){if(t>hme)throw new ZAe("size","<= 1GiB",t);return t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++,t}function lV(t,e){return t<=0||e.length===0&&e.ended?0:(e.state&dc)!==0?1:FAe(t)?e.flowing&&e.length?e.buffer.first().length:e.length:t<=e.length?t:e.ended?e.length:0}ye.prototype.read=function(t){We("read",t),t===void 0?t=NaN:BAe(t)||(t=HAe(t,10));let e=this._readableState,n=t;if(t>e.highWaterMark&&(e.highWaterMark=pme(t)),t!==0&&(e.state&=~pV),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return We("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?QO(this):iS(this),null;if(t=lV(t,e),t===0&&e.ended)return e.length===0&&QO(this),null;let r=(e.state&tS)!==0;if(We("need readable",r),(e.length===0||e.length-t<e.highWaterMark)&&(r=!0,We("length less than watermark",r)),e.ended||e.reading||e.destroyed||e.errored||!e.constructed)r=!1,We("reading, ended or constructing",r);else if(r){We("do read"),e.state|=nf|eS,e.length===0&&(e.state|=tS);try{this._read(e.highWaterMark)}catch(s){uc(this,s)}e.state&=~eS,e.reading||(t=lV(n,e))}let i;return t>0?i=IV(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.multiAwaitDrain?e.awaitDrainWriters.clear():e.awaitDrainWriters=null),e.length===0&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&QO(this)),i!==null&&!e.errorEmitted&&!e.closeEmitted&&(e.dataEmitted=!0,this.emit("data",i)),i};function Tme(t,e){if(We("onEofChunk"),!e.ended){if(e.decoder){let n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,e.sync?iS(t):(e.needReadable=!1,e.emittedReadable=!0,RV(t))}}function iS(t){let e=t._readableState;We("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(We("emitReadable",e.flowing),e.emittedReadable=!0,ti.nextTick(RV,t))}function RV(t){let e=t._readableState;We("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&!e.errored&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,mV(t)}function nS(t,e){!e.readingMore&&e.constructed&&(e.readingMore=!0,ti.nextTick(Sme,t,e))}function Sme(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){let n=e.length;if(We("maybeReadMore read 0"),t.read(0),n===e.length)break}e.readingMore=!1}ye.prototype._read=function(t){throw new QAe("_read()")};ye.prototype.pipe=function(t,e){let n=this,r=this._readableState;r.pipes.length===1&&(r.multiAwaitDrain||(r.multiAwaitDrain=!0,r.awaitDrainWriters=new $Ae(r.awaitDrainWriters?[r.awaitDrainWriters]:[]))),r.pipes.push(t),We("pipe count=%d opts=%j",r.pipes.length,e);let s=(!e||e.end!==!1)&&t!==ti.stdout&&t!==ti.stderr?a:T;r.endEmitted?ti.nextTick(s):n.once("end",s),t.on("unpipe",o);function o(S,A){We("onunpipe"),S===n&&A&&A.hasUnpiped===!1&&(A.hasUnpiped=!0,u())}function a(){We("onend"),t.end()}let l,c=!1;function u(){We("cleanup"),t.removeListener("close",p),t.removeListener("finish",h),l&&t.removeListener("drain",l),t.removeListener("error",f),t.removeListener("unpipe",o),n.removeListener("end",a),n.removeListener("end",T),n.removeListener("data",E),c=!0,l&&r.awaitDrainWriters&&(!t._writableState||t._writableState.needDrain)&&l()}function d(){c||(r.pipes.length===1&&r.pipes[0]===t?(We("false write response, pause",0),r.awaitDrainWriters=t,r.multiAwaitDrain=!1):r.pipes.length>1&&r.pipes.includes(t)&&(We("false write response, pause",r.awaitDrainWriters.size),r.awaitDrainWriters.add(t)),n.pause()),l||(l=Rme(n,t),t.on("drain",l))}n.on("data",E);function E(S){We("ondata");let A=t.write(S);We("dest.write",A),A===!1&&d()}function f(S){if(We("onerror",S),T(),t.removeListener("error",f),t.listenerCount("error")===0){let A=t._writableState||t._readableState;A&&!A.errorEmitted?uc(t,S):t.emit("error",S)}}qAe(t,"error",f);function p(){t.removeListener("finish",h),T()}t.once("close",p);function h(){We("onfinish"),t.removeListener("close",p),T()}t.once("finish",h);function T(){We("unpipe"),n.unpipe(t)}return t.emit("pipe",n),t.writableNeedDrain===!0?d():r.flowing||(We("pipe resume"),n.resume()),t};function Rme(t,e){return function(){let r=t._readableState;r.awaitDrainWriters===e?(We("pipeOnDrain",1),r.awaitDrainWriters=null):r.multiAwaitDrain&&(We("pipeOnDrain",r.awaitDrainWriters.size),r.awaitDrainWriters.delete(e)),(!r.awaitDrainWriters||r.awaitDrainWriters.size===0)&&t.listenerCount("data")&&t.resume()}}ye.prototype.unpipe=function(t){let e=this._readableState,n={hasUnpiped:!1};if(e.pipes.length===0)return this;if(!t){let i=e.pipes;e.pipes=[],this.pause();for(let s=0;s<i.length;s++)i[s].emit("unpipe",this,{hasUnpiped:!1});return this}let r=UAe(e.pipes,t);return r===-1?this:(e.pipes.splice(r,1),e.pipes.length===0&&this.pause(),t.emit("unpipe",this,n),this)};ye.prototype.on=function(t,e){let n=oo.prototype.on.call(this,t,e),r=this._readableState;return t==="data"?(r.readableListening=this.listenerCount("readable")>0,r.flowing!==!1&&this.resume()):t==="readable"&&!r.endEmitted&&!r.readableListening&&(r.readableListening=r.needReadable=!0,r.flowing=!1,r.emittedReadable=!1,We("on readable",r.length,r.reading),r.length?iS(this):r.reading||ti.nextTick(Ame,this)),n};ye.prototype.addListener=ye.prototype.on;ye.prototype.removeListener=function(t,e){let n=oo.prototype.removeListener.call(this,t,e);return t==="readable"&&ti.nextTick(AV,this),n};ye.prototype.off=ye.prototype.removeListener;ye.prototype.removeAllListeners=function(t){let e=oo.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&ti.nextTick(AV,this),e};function AV(t){let e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&e[Aa]===!1?e.flowing=!0:t.listenerCount("data")>0?t.resume():e.readableListening||(e.flowing=null)}function Ame(t){We("readable nexttick read 0"),t.read(0)}ye.prototype.resume=function(){let t=this._readableState;return t.flowing||(We("resume"),t.flowing=!t.readableListening,mme(this,t)),t[Aa]=!1,this};function mme(t,e){e.resumeScheduled||(e.resumeScheduled=!0,ti.nextTick(gme,t,e))}function gme(t,e){We("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),mV(t),e.flowing&&!e.reading&&t.read(0)}ye.prototype.pause=function(){return We("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(We("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[Aa]=!0,this};function mV(t){let e=t._readableState;for(We("flow",e.flowing);e.flowing&&t.read()!==null;);}ye.prototype.wrap=function(t){let e=!1;t.on("data",r=>{!this.push(r)&&t.pause&&(e=!0,t.pause())}),t.on("end",()=>{this.push(null)}),t.on("error",r=>{uc(this,r)}),t.on("close",()=>{this.destroy()}),t.on("destroy",()=>{this.destroy()}),this._read=()=>{e&&t.resume&&(e=!1,t.resume())};let n=GAe(t);for(let r=1;r<n.length;r++){let i=n[r];this[i]===void 0&&typeof t[i]=="function"&&(this[i]=t[i].bind(t))}return this};ye.prototype[WAe]=function(){return gV(this)};ye.prototype.iterator=function(t){return t!==void 0&&rme(t,"options"),gV(this,t)};function gV(t,e){typeof t.read!="function"&&(t=ye.wrap(t,{objectMode:!0}));let n=Ime(t,e);return n.stream=t,n}async function*Ime(t,e){let n=KO;function r(o){this===t?(n(),n=KO):n=o}t.on("readable",r);let i,s=dV(t,{writable:!1},o=>{i=o?aV(i,o):null,n(),n=KO});try{for(;;){let o=t.destroyed?null:t.read();if(o!==null)yield o;else{if(i)throw i;if(i===null)return;await new uV(r)}}}catch(o){throw i=aV(i,o),i}finally{(i||e?.destroyOnReturn!==!1)&&(i===void 0||t._readableState.autoDestroy)?fc.destroyer(t,null):(t.off("readable",r),s())}}nC(ye.prototype,{readable:{__proto__:null,get(){let t=this._readableState;return!!t&&t.readable!==!1&&!t.destroyed&&!t.errorEmitted&&!t.endEmitted},set(t){this._readableState&&(this._readableState.readable=!!t)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(t){this._readableState&&(this._readableState.destroyed=t)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}});nC(rS.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[Aa]!==!1},set(t){this[Aa]=!!t}}});ye._fromList=IV;function IV(t,e){if(e.length===0)return null;let n;return e.objectMode?n=e.buffer.shift():!t||t>=e.length?(e.decoder?n=e.buffer.join(""):e.buffer.length===1?n=e.buffer.first():n=e.buffer.concat(e.length),e.buffer.clear()):n=e.buffer.consume(t,e.decoder),n}function QO(t){let e=t._readableState;We("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,ti.nextTick(_me,e,t))}function _me(t,e){if(We("endReadableNT",t.endEmitted,t.length),!t.errored&&!t.closeEmitted&&!t.endEmitted&&t.length===0){if(t.endEmitted=!0,e.emit("end"),e.writable&&e.allowHalfOpen===!1)ti.nextTick(Nme,e);else if(t.autoDestroy){let n=e._writableState;(!n||n.autoDestroy&&(n.finished||n.writable===!1))&&e.destroy()}}}function Nme(t){t.writable&&!t.writableEnded&&!t.destroyed&&t.end()}ye.from=function(t,e){return ime(ye,t,e)};var ZO;function _V(){return ZO===void 0&&(ZO={}),ZO}ye.fromWeb=function(t,e){return _V().newStreamReadableFromReadableStream(t,e)};ye.toWeb=function(t,e){return _V().newReadableStreamFromStreamReadable(t,e)};ye.wrap=function(t,e){var n,r;return new ye({objectMode:(n=(r=t.readableObjectMode)!==null&&r!==void 0?r:t.objectMode)!==null&&n!==void 0?n:!0,...e,destroy(i,s){fc.destroyer(t,i),s(i)}}).wrap(t)}});var cS=C((aHe,UV)=>{"use strict";var ma=it(),{ArrayPrototypeSlice:bV,Error:Ome,FunctionPrototypeSymbolHasInstance:yV,ObjectDefineProperty:wV,ObjectDefineProperties:Cme,ObjectSetPrototypeOf:LV,StringPrototypeToLowerCase:bme,Symbol:yme,SymbolHasInstance:wme}=At();UV.exports=Ct;Ct.WritableState=af;var{EventEmitter:Lme}=require("events"),sf=JT().Stream,{Buffer:sS}=require("buffer"),lS=Ra(),{addAbortSignal:Dme}=ef(),{getHighWaterMark:Pme,getDefaultHighWaterMark:xme}=tf(),{ERR_INVALID_ARG_TYPE:vme,ERR_METHOD_NOT_IMPLEMENTED:Mme,ERR_MULTIPLE_CALLBACK:DV,ERR_STREAM_CANNOT_PIPE:Ume,ERR_STREAM_DESTROYED:of,ERR_STREAM_ALREADY_FINISHED:Bme,ERR_STREAM_NULL_VALUES:Fme,ERR_STREAM_WRITE_AFTER_END:Hme,ERR_UNKNOWN_ENCODING:PV}=Xn().codes,{errorOrDestroy:Ec}=lS;LV(Ct.prototype,sf.prototype);LV(Ct,sf);function sC(){}var hc=yme("kOnFinished");function af(t,e,n){typeof n!="boolean"&&(n=e instanceof Mi()),this.objectMode=!!(t&&t.objectMode),n&&(this.objectMode=this.objectMode||!!(t&&t.writableObjectMode)),this.highWaterMark=t?Pme(this,t,"writableHighWaterMark",n):xme(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let r=!!(t&&t.decodeStrings===!1);this.decodeStrings=!r,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=$me.bind(void 0,e),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,aS(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!t||t.emitClose!==!1,this.autoDestroy=!t||t.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[hc]=[]}function aS(t){t.buffered=[],t.bufferedIndex=0,t.allBuffers=!0,t.allNoop=!0}af.prototype.getBuffer=function(){return bV(this.buffered,this.bufferedIndex)};wV(af.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function Ct(t){let e=this instanceof Mi();if(!e&&!yV(Ct,this))return new Ct(t);this._writableState=new af(t,this,e),t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&Dme(t.signal,this)),sf.call(this,t),lS.construct(this,()=>{let n=this._writableState;n.writing||aC(this,n),lC(this,n)})}wV(Ct,wme,{__proto__:null,value:function(t){return yV(this,t)?!0:this!==Ct?!1:t&&t._writableState instanceof af}});Ct.prototype.pipe=function(){Ec(this,new Ume)};function xV(t,e,n,r){let i=t._writableState;if(typeof n=="function")r=n,n=i.defaultEncoding;else{if(!n)n=i.defaultEncoding;else if(n!=="buffer"&&!sS.isEncoding(n))throw new PV(n);typeof r!="function"&&(r=sC)}if(e===null)throw new Fme;if(!i.objectMode)if(typeof e=="string")i.decodeStrings!==!1&&(e=sS.from(e,n),n="buffer");else if(e instanceof sS)n="buffer";else if(sf._isUint8Array(e))e=sf._uint8ArrayToBuffer(e),n="buffer";else throw new vme("chunk",["string","Buffer","Uint8Array"],e);let s;return i.ending?s=new Hme:i.destroyed&&(s=new of("write")),s?(ma.nextTick(r,s),Ec(t,s,!0),s):(i.pendingcb++,Gme(t,i,e,n,r))}Ct.prototype.write=function(t,e,n){return xV(this,t,e,n)===!0};Ct.prototype.cork=function(){this._writableState.corked++};Ct.prototype.uncork=function(){let t=this._writableState;t.corked&&(t.corked--,t.writing||aC(this,t))};Ct.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=bme(e)),!sS.isEncoding(e))throw new PV(e);return this._writableState.defaultEncoding=e,this};function Gme(t,e,n,r,i){let s=e.objectMode?1:n.length;e.length+=s;let o=e.length<e.highWaterMark;return o||(e.needDrain=!0),e.writing||e.corked||e.errored||!e.constructed?(e.buffered.push({chunk:n,encoding:r,callback:i}),e.allBuffers&&r!=="buffer"&&(e.allBuffers=!1),e.allNoop&&i!==sC&&(e.allNoop=!1)):(e.writelen=s,e.writecb=i,e.writing=!0,e.sync=!0,t._write(n,r,e.onwrite),e.sync=!1),o&&!e.errored&&!e.destroyed}function OV(t,e,n,r,i,s,o){e.writelen=r,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new of("write")):n?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function CV(t,e,n,r){--e.pendingcb,r(n),oC(e),Ec(t,n)}function $me(t,e){let n=t._writableState,r=n.sync,i=n.writecb;if(typeof i!="function"){Ec(t,new DV);return}n.writing=!1,n.writecb=null,n.length-=n.writelen,n.writelen=0,e?(e.stack,n.errored||(n.errored=e),t._readableState&&!t._readableState.errored&&(t._readableState.errored=e),r?ma.nextTick(CV,t,n,e,i):CV(t,n,e,i)):(n.buffered.length>n.bufferedIndex&&aC(t,n),r?n.afterWriteTickInfo!==null&&n.afterWriteTickInfo.cb===i?n.afterWriteTickInfo.count++:(n.afterWriteTickInfo={count:1,cb:i,stream:t,state:n},ma.nextTick(kme,n.afterWriteTickInfo)):vV(t,n,1,i))}function kme({stream:t,state:e,count:n,cb:r}){return e.afterWriteTickInfo=null,vV(t,e,n,r)}function vV(t,e,n,r){for(!e.ending&&!t.destroyed&&e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"));n-- >0;)e.pendingcb--,r();e.destroyed&&oC(e),lC(t,e)}function oC(t){if(t.writing)return;for(let i=t.bufferedIndex;i<t.buffered.length;++i){var e;let{chunk:s,callback:o}=t.buffered[i],a=t.objectMode?1:s.length;t.length-=a,o((e=t.errored)!==null&&e!==void 0?e:new of("write"))}let n=t[hc].splice(0);for(let i=0;i<n.length;i++){var r;n[i]((r=t.errored)!==null&&r!==void 0?r:new of("end"))}aS(t)}function aC(t,e){if(e.corked||e.bufferProcessing||e.destroyed||!e.constructed)return;let{buffered:n,bufferedIndex:r,objectMode:i}=e,s=n.length-r;if(!s)return;let o=r;if(e.bufferProcessing=!0,s>1&&t._writev){e.pendingcb-=s-1;let a=e.allNoop?sC:c=>{for(let u=o;u<n.length;++u)n[u].callback(c)},l=e.allNoop&&o===0?n:bV(n,o);l.allBuffers=e.allBuffers,OV(t,e,!0,e.length,l,"",a),aS(e)}else{do{let{chunk:a,encoding:l,callback:c}=n[o];n[o++]=null;let u=i?1:a.length;OV(t,e,!1,u,a,l,c)}while(o<n.length&&!e.writing);o===n.length?aS(e):o>256?(n.splice(0,o),e.bufferedIndex=0):e.bufferedIndex=o}e.bufferProcessing=!1}Ct.prototype._write=function(t,e,n){if(this._writev)this._writev([{chunk:t,encoding:e}],n);else throw new Mme("_write()")};Ct.prototype._writev=null;Ct.prototype.end=function(t,e,n){let r=this._writableState;typeof t=="function"?(n=t,t=null,e=null):typeof e=="function"&&(n=e,e=null);let i;if(t!=null){let s=xV(this,t,e);s instanceof Ome&&(i=s)}return r.corked&&(r.corked=1,this.uncork()),i||(!r.errored&&!r.ending?(r.ending=!0,lC(this,r,!0),r.ended=!0):r.finished?i=new Bme("end"):r.destroyed&&(i=new of("end"))),typeof n=="function"&&(i||r.finished?ma.nextTick(n,i):r[hc].push(n)),this};function oS(t){return t.ending&&!t.destroyed&&t.constructed&&t.length===0&&!t.errored&&t.buffered.length===0&&!t.finished&&!t.writing&&!t.errorEmitted&&!t.closeEmitted}function Wme(t,e){let n=!1;function r(i){if(n){Ec(t,i??DV());return}if(n=!0,e.pendingcb--,i){let s=e[hc].splice(0);for(let o=0;o<s.length;o++)s[o](i);Ec(t,i,e.sync)}else oS(e)&&(e.prefinished=!0,t.emit("prefinish"),e.pendingcb++,ma.nextTick(iC,t,e))}e.sync=!0,e.pendingcb++;try{t._final(r)}catch(i){r(i)}e.sync=!1}function Yme(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.finalCalled=!0,Wme(t,e)):(e.prefinished=!0,t.emit("prefinish")))}function lC(t,e,n){oS(e)&&(Yme(t,e),e.pendingcb===0&&(n?(e.pendingcb++,ma.nextTick((r,i)=>{oS(i)?iC(r,i):i.pendingcb--},t,e)):oS(e)&&(e.pendingcb++,iC(t,e))))}function iC(t,e){e.pendingcb--,e.finished=!0;let n=e[hc].splice(0);for(let r=0;r<n.length;r++)n[r]();if(t.emit("finish"),e.autoDestroy){let r=t._readableState;(!r||r.autoDestroy&&(r.endEmitted||r.readable===!1))&&t.destroy()}}Cme(Ct.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(t){this._writableState&&(this._writableState.destroyed=t)}},writable:{__proto__:null,get(){let t=this._writableState;return!!t&&t.writable!==!1&&!t.destroyed&&!t.errored&&!t.ending&&!t.ended},set(t){this._writableState&&(this._writableState.writable=!!t)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let t=this._writableState;return t?!t.destroyed&&!t.ending&&t.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var Vme=lS.destroy;Ct.prototype.destroy=function(t,e){let n=this._writableState;return!n.destroyed&&(n.bufferedIndex<n.buffered.length||n[hc].length)&&ma.nextTick(oC,n),Vme.call(this,t,e),this};Ct.prototype._undestroy=lS.undestroy;Ct.prototype._destroy=function(t,e){e(t)};Ct.prototype[Lme.captureRejectionSymbol]=function(t){this.destroy(t)};var rC;function MV(){return rC===void 0&&(rC={}),rC}Ct.fromWeb=function(t,e){return MV().newStreamWritableFromWritableStream(t,e)};Ct.toWeb=function(t){return MV().newWritableStreamFromStreamWritable(t)}});var JV=C((lHe,KV)=>{var cC=it(),qme=require("buffer"),{isReadable:Xme,isWritable:zme,isIterable:BV,isNodeStream:jme,isReadableNodeStream:FV,isWritableNodeStream:HV,isDuplexNodeStream:Kme,isReadableStream:GV,isWritableStream:$V}=xi(),kV=Ss(),{AbortError:zV,codes:{ERR_INVALID_ARG_TYPE:Jme,ERR_INVALID_RETURN_VALUE:WV}}=Xn(),{destroyer:Tc}=Ra(),Qme=Mi(),jV=rf(),Zme=cS(),{createDeferredPromise:YV}=sr(),VV=zO(),qV=globalThis.Blob||qme.Blob,ege=typeof qV<"u"?function(e){return e instanceof qV}:function(e){return!1},tge=globalThis.AbortController||kt().AbortController,{FunctionPrototypeCall:XV}=At(),ao=class extends Qme{constructor(e){super(e),e?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),e?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};KV.exports=function t(e,n){if(Kme(e))return e;if(FV(e))return pc({readable:e});if(HV(e))return pc({writable:e});if(jme(e))return pc({writable:!1,readable:!1});if(GV(e))return pc({readable:jV.fromWeb(e)});if($V(e))return pc({writable:Zme.fromWeb(e)});if(typeof e=="function"){let{value:i,write:s,final:o,destroy:a}=nge(e);if(BV(i))return VV(ao,i,{objectMode:!0,write:s,final:o,destroy:a});let l=i?.then;if(typeof l=="function"){let c,u=XV(l,i,d=>{if(d!=null)throw new WV("nully","body",d)},d=>{Tc(c,d)});return c=new ao({objectMode:!0,readable:!1,write:s,final(d){o(async()=>{try{await u,cC.nextTick(d,null)}catch(E){cC.nextTick(d,E)}})},destroy:a})}throw new WV("Iterable, AsyncIterable or AsyncFunction",n,i)}if(ege(e))return t(e.arrayBuffer());if(BV(e))return VV(ao,e,{objectMode:!0,writable:!1});if(GV(e?.readable)&&$V(e?.writable))return ao.fromWeb(e);if(typeof e?.writable=="object"||typeof e?.readable=="object"){let i=e!=null&&e.readable?FV(e?.readable)?e?.readable:t(e.readable):void 0,s=e!=null&&e.writable?HV(e?.writable)?e?.writable:t(e.writable):void 0;return pc({readable:i,writable:s})}let r=e?.then;if(typeof r=="function"){let i;return XV(r,e,s=>{s!=null&&i.push(s),i.push(null)},s=>{Tc(i,s)}),i=new ao({objectMode:!0,writable:!1,read(){}})}throw new Jme(n,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],e)};function nge(t){let{promise:e,resolve:n}=YV(),r=new tge,i=r.signal;return{value:t((async function*(){for(;;){let o=e;e=null;let{chunk:a,done:l,cb:c}=await o;if(cC.nextTick(c),l)return;if(i.aborted)throw new zV(void 0,{cause:i.reason});({promise:e,resolve:n}=YV()),yield a}})(),{signal:i}),write(o,a,l){let c=n;n=null,c({chunk:o,done:!1,cb:l})},final(o){let a=n;n=null,a({done:!0,cb:o})},destroy(o,a){r.abort(),a(o)}}}function pc(t){let e=t.readable&&typeof t.readable.read!="function"?jV.wrap(t.readable):t.readable,n=t.writable,r=!!Xme(e),i=!!zme(n),s,o,a,l,c;function u(d){let E=l;l=null,E?E(d):d&&c.destroy(d)}return c=new ao({readableObjectMode:!!(e!=null&&e.readableObjectMode),writableObjectMode:!!(n!=null&&n.writableObjectMode),readable:r,writable:i}),i&&(kV(n,d=>{i=!1,d&&Tc(e,d),u(d)}),c._write=function(d,E,f){n.write(d,E)?f():s=f},c._final=function(d){n.end(),o=d},n.on("drain",function(){if(s){let d=s;s=null,d()}}),n.on("finish",function(){if(o){let d=o;o=null,d()}})),r&&(kV(e,d=>{r=!1,d&&Tc(e,d),u(d)}),e.on("readable",function(){if(a){let d=a;a=null,d()}}),e.on("end",function(){c.push(null)}),c._read=function(){for(;;){let d=e.read();if(d===null){a=c._read;return}if(!c.push(d))return}}),c._destroy=function(d,E){!d&&l!==null&&(d=new zV),a=null,s=null,o=null,l===null?E(d):(l=E,Tc(n,d),Tc(e,d))},c}});var Mi=C((cHe,e2)=>{"use strict";var{ObjectDefineProperties:rge,ObjectGetOwnPropertyDescriptor:Rs,ObjectKeys:ige,ObjectSetPrototypeOf:QV}=At();e2.exports=ni;var fC=rf(),Gr=cS();QV(ni.prototype,fC.prototype);QV(ni,fC);{let t=ige(Gr.prototype);for(let e=0;e<t.length;e++){let n=t[e];ni.prototype[n]||(ni.prototype[n]=Gr.prototype[n])}}function ni(t){if(!(this instanceof ni))return new ni(t);fC.call(this,t),Gr.call(this,t),t?(this.allowHalfOpen=t.allowHalfOpen!==!1,t.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),t.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}rge(ni.prototype,{writable:{__proto__:null,...Rs(Gr.prototype,"writable")},writableHighWaterMark:{__proto__:null,...Rs(Gr.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...Rs(Gr.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...Rs(Gr.prototype,"writableBuffer")},writableLength:{__proto__:null,...Rs(Gr.prototype,"writableLength")},writableFinished:{__proto__:null,...Rs(Gr.prototype,"writableFinished")},writableCorked:{__proto__:null,...Rs(Gr.prototype,"writableCorked")},writableEnded:{__proto__:null,...Rs(Gr.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...Rs(Gr.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(t){this._readableState&&this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}});var uC;function ZV(){return uC===void 0&&(uC={}),uC}ni.fromWeb=function(t,e){return ZV().newStreamDuplexFromReadableWritablePair(t,e)};ni.toWeb=function(t){return ZV().newReadableWritablePairFromDuplex(t)};var dC;ni.from=function(t){return dC||(dC=JV()),dC(t,"body")}});var pC=C((uHe,n2)=>{"use strict";var{ObjectSetPrototypeOf:t2,Symbol:sge}=At();n2.exports=As;var{ERR_METHOD_NOT_IMPLEMENTED:oge}=Xn().codes,hC=Mi(),{getHighWaterMark:age}=tf();t2(As.prototype,hC.prototype);t2(As,hC);var lf=sge("kCallback");function As(t){if(!(this instanceof As))return new As(t);let e=t?age(this,t,"readableHighWaterMark",!0):null;e===0&&(t={...t,highWaterMark:null,readableHighWaterMark:e,writableHighWaterMark:t.writableHighWaterMark||0}),hC.call(this,t),this._readableState.sync=!1,this[lf]=null,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",lge)}function EC(t){typeof this._flush=="function"&&!this.destroyed?this._flush((e,n)=>{if(e){t?t(e):this.destroy(e);return}n!=null&&this.push(n),this.push(null),t&&t()}):(this.push(null),t&&t())}function lge(){this._final!==EC&&EC.call(this)}As.prototype._final=EC;As.prototype._transform=function(t,e,n){throw new oge("_transform()")};As.prototype._write=function(t,e,n){let r=this._readableState,i=this._writableState,s=r.length;this._transform(t,e,(o,a)=>{if(o){n(o);return}a!=null&&this.push(a),i.ended||s===r.length||r.length<r.highWaterMark?n():this[lf]=n})};As.prototype._read=function(){if(this[lf]){let t=this[lf];this[lf]=null,t()}}});var SC=C((dHe,i2)=>{"use strict";var{ObjectSetPrototypeOf:r2}=At();i2.exports=Sc;var TC=pC();r2(Sc.prototype,TC.prototype);r2(Sc,TC);function Sc(t){if(!(this instanceof Sc))return new Sc(t);TC.call(this,t)}Sc.prototype._transform=function(t,e,n){n(null,t)}});var ES=C((fHe,c2)=>{var cf=it(),{ArrayIsArray:cge,Promise:uge,SymbolAsyncIterator:dge,SymbolDispose:fge}=At(),fS=Ss(),{once:Ege}=sr(),hge=Ra(),s2=Mi(),{aggregateTwoErrors:pge,codes:{ERR_INVALID_ARG_TYPE:CC,ERR_INVALID_RETURN_VALUE:RC,ERR_MISSING_ARGS:Tge,ERR_STREAM_DESTROYED:Sge,ERR_STREAM_PREMATURE_CLOSE:Rge},AbortError:Age}=Xn(),{validateFunction:mge,validateAbortSignal:gge}=lc(),{isIterable:ga,isReadable:AC,isReadableNodeStream:dS,isNodeStream:o2,isTransformStream:Rc,isWebStream:Ige,isReadableStream:mC,isReadableFinished:_ge}=xi(),Nge=globalThis.AbortController||kt().AbortController,gC,IC,_C;function a2(t,e,n){let r=!1;t.on("close",()=>{r=!0});let i=fS(t,{readable:e,writable:n},s=>{r=!s});return{destroy:s=>{r||(r=!0,hge.destroyer(t,s||new Sge("pipe")))},cleanup:i}}function Oge(t){return mge(t[t.length-1],"streams[stream.length - 1]"),t.pop()}function NC(t){if(ga(t))return t;if(dS(t))return Cge(t);throw new CC("val",["Readable","Iterable","AsyncIterable"],t)}async function*Cge(t){IC||(IC=rf()),yield*IC.prototype[dge].call(t)}async function uS(t,e,n,{end:r}){let i,s=null,o=c=>{if(c&&(i=c),s){let u=s;s=null,u()}},a=()=>new uge((c,u)=>{i?u(i):s=()=>{i?u(i):c()}});e.on("drain",o);let l=fS(e,{readable:!1},o);try{e.writableNeedDrain&&await a();for await(let c of t)e.write(c)||await a();r&&(e.end(),await a()),n()}catch(c){n(i!==c?pge(i,c):c)}finally{l(),e.off("drain",o)}}async function OC(t,e,n,{end:r}){Rc(e)&&(e=e.writable);let i=e.getWriter();try{for await(let s of t)await i.ready,i.write(s).catch(()=>{});await i.ready,r&&await i.close(),n()}catch(s){try{await i.abort(s),n(s)}catch(o){n(o)}}}function bge(...t){return l2(t,Ege(Oge(t)))}function l2(t,e,n){if(t.length===1&&cge(t[0])&&(t=t[0]),t.length<2)throw new Tge("streams");let r=new Nge,i=r.signal,s=n?.signal,o=[];gge(s,"options.signal");function a(){p(new Age)}_C=_C||sr().addAbortListener;let l;s&&(l=_C(s,a));let c,u,d=[],E=0;function f(R){p(R,--E===0)}function p(R,m){var N;if(R&&(!c||c.code==="ERR_STREAM_PREMATURE_CLOSE")&&(c=R),!(!c&&!m)){for(;d.length;)d.shift()(c);(N=l)===null||N===void 0||N[fge](),r.abort(),m&&(c||o.forEach(L=>L()),cf.nextTick(e,c,u))}}let h;for(let R=0;R<t.length;R++){let m=t[R],N=R<t.length-1,L=R>0,I=N||n?.end!==!1,D=R===t.length-1;if(o2(m)){let g=function(w){w&&w.name!=="AbortError"&&w.code!=="ERR_STREAM_PREMATURE_CLOSE"&&f(w)};var A=g;if(I){let{destroy:w,cleanup:x}=a2(m,N,L);d.push(w),AC(m)&&D&&o.push(x)}m.on("error",g),AC(m)&&D&&o.push(()=>{m.removeListener("error",g)})}if(R===0)if(typeof m=="function"){if(h=m({signal:i}),!ga(h))throw new RC("Iterable, AsyncIterable or Stream","source",h)}else ga(m)||dS(m)||Rc(m)?h=m:h=s2.from(m);else if(typeof m=="function"){if(Rc(h)){var T;h=NC((T=h)===null||T===void 0?void 0:T.readable)}else h=NC(h);if(h=m(h,{signal:i}),N){if(!ga(h,!0))throw new RC("AsyncIterable",`transform[${R-1}]`,h)}else{var S;gC||(gC=SC());let g=new gC({objectMode:!0}),w=(S=h)===null||S===void 0?void 0:S.then;if(typeof w=="function")E++,w.call(h,H=>{u=H,H!=null&&g.write(H),I&&g.end(),cf.nextTick(f)},H=>{g.destroy(H),cf.nextTick(f,H)});else if(ga(h,!0))E++,uS(h,g,f,{end:I});else if(mC(h)||Rc(h)){let H=h.readable||h;E++,uS(H,g,f,{end:I})}else throw new RC("AsyncIterable or Promise","destination",h);h=g;let{destroy:x,cleanup:U}=a2(h,!1,!0);d.push(x),D&&o.push(U)}}else if(o2(m)){if(dS(h)){E+=2;let g=yge(h,m,f,{end:I});AC(m)&&D&&o.push(g)}else if(Rc(h)||mC(h)){let g=h.readable||h;E++,uS(g,m,f,{end:I})}else if(ga(h))E++,uS(h,m,f,{end:I});else throw new CC("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],h);h=m}else if(Ige(m)){if(dS(h))E++,OC(NC(h),m,f,{end:I});else if(mC(h)||ga(h))E++,OC(h,m,f,{end:I});else if(Rc(h))E++,OC(h.readable,m,f,{end:I});else throw new CC("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],h);h=m}else h=s2.from(m)}return(i!=null&&i.aborted||s!=null&&s.aborted)&&cf.nextTick(a),h}function yge(t,e,n,{end:r}){let i=!1;if(e.on("close",()=>{i||n(new Rge)}),t.pipe(e,{end:!1}),r){let o=function(){i=!0,e.end()};var s=o;_ge(t)?cf.nextTick(o):t.once("end",o)}else n();return fS(t,{readable:!0,writable:!1},o=>{let a=t._readableState;o&&o.code==="ERR_STREAM_PREMATURE_CLOSE"&&a&&a.ended&&!a.errored&&!a.errorEmitted?t.once("end",n).once("error",n):n(o)}),fS(e,{readable:!1,writable:!0},n)}c2.exports={pipelineImpl:l2,pipeline:bge}});var yC=C((EHe,p2)=>{"use strict";var{pipeline:wge}=ES(),hS=Mi(),{destroyer:Lge}=Ra(),{isNodeStream:pS,isReadable:u2,isWritable:d2,isWebStream:bC,isTransformStream:Ia,isWritableStream:f2,isReadableStream:E2}=xi(),{AbortError:Dge,codes:{ERR_INVALID_ARG_VALUE:h2,ERR_MISSING_ARGS:Pge}}=Xn(),xge=Ss();p2.exports=function(...e){if(e.length===0)throw new Pge("streams");if(e.length===1)return hS.from(e[0]);let n=[...e];if(typeof e[0]=="function"&&(e[0]=hS.from(e[0])),typeof e[e.length-1]=="function"){let f=e.length-1;e[f]=hS.from(e[f])}for(let f=0;f<e.length;++f)if(!(!pS(e[f])&&!bC(e[f]))){if(f<e.length-1&&!(u2(e[f])||E2(e[f])||Ia(e[f])))throw new h2(`streams[${f}]`,n[f],"must be readable");if(f>0&&!(d2(e[f])||f2(e[f])||Ia(e[f])))throw new h2(`streams[${f}]`,n[f],"must be writable")}let r,i,s,o,a;function l(f){let p=o;o=null,p?p(f):f?a.destroy(f):!E&&!d&&a.destroy()}let c=e[0],u=wge(e,l),d=!!(d2(c)||f2(c)||Ia(c)),E=!!(u2(u)||E2(u)||Ia(u));if(a=new hS({writableObjectMode:!!(c!=null&&c.writableObjectMode),readableObjectMode:!!(u!=null&&u.readableObjectMode),writable:d,readable:E}),d){if(pS(c))a._write=function(p,h,T){c.write(p,h)?T():r=T},a._final=function(p){c.end(),i=p},c.on("drain",function(){if(r){let p=r;r=null,p()}});else if(bC(c)){let h=(Ia(c)?c.writable:c).getWriter();a._write=async function(T,S,A){try{await h.ready,h.write(T).catch(()=>{}),A()}catch(R){A(R)}},a._final=async function(T){try{await h.ready,h.close().catch(()=>{}),i=T}catch(S){T(S)}}}let f=Ia(u)?u.readable:u;xge(f,()=>{if(i){let p=i;i=null,p()}})}if(E){if(pS(u))u.on("readable",function(){if(s){let f=s;s=null,f()}}),u.on("end",function(){a.push(null)}),a._read=function(){for(;;){let f=u.read();if(f===null){s=a._read;return}if(!a.push(f))return}};else if(bC(u)){let p=(Ia(u)?u.readable:u).getReader();a._read=async function(){for(;;)try{let{value:h,done:T}=await p.read();if(!a.push(h))return;if(T){a.push(null);return}}catch{return}}}}return a._destroy=function(f,p){!f&&o!==null&&(f=new Dge),s=null,r=null,i=null,o===null?p(f):(o=p,pS(u)&&Lge(u,f))},a}});var O2=C((hHe,DC)=>{"use strict";var vge=globalThis.AbortController||kt().AbortController,{codes:{ERR_INVALID_ARG_VALUE:Mge,ERR_INVALID_ARG_TYPE:uf,ERR_MISSING_ARGS:Uge,ERR_OUT_OF_RANGE:Bge},AbortError:Ui}=Xn(),{validateAbortSignal:_a,validateInteger:T2,validateObject:Na}=lc(),Fge=At().Symbol("kWeak"),Hge=At().Symbol("kResistStopPropagation"),{finished:Gge}=Ss(),$ge=yC(),{addAbortSignalNoValidate:kge}=ef(),{isWritable:Wge,isNodeStream:Yge}=xi(),{deprecate:Vge}=sr(),{ArrayPrototypePush:qge,Boolean:Xge,MathFloor:S2,Number:zge,NumberIsNaN:jge,Promise:R2,PromiseReject:A2,PromiseResolve:Kge,PromisePrototypeThen:m2,Symbol:I2}=At(),TS=I2("kEmpty"),g2=I2("kEof");function Jge(t,e){if(e!=null&&Na(e,"options"),e?.signal!=null&&_a(e.signal,"options.signal"),Yge(t)&&!Wge(t))throw new Mge("stream",t,"must be writable");let n=$ge(this,t);return e!=null&&e.signal&&kge(e.signal,n),n}function SS(t,e){if(typeof t!="function")throw new uf("fn",["Function","AsyncFunction"],t);e!=null&&Na(e,"options"),e?.signal!=null&&_a(e.signal,"options.signal");let n=1;e?.concurrency!=null&&(n=S2(e.concurrency));let r=n-1;return e?.highWaterMark!=null&&(r=S2(e.highWaterMark)),T2(n,"options.concurrency",1),T2(r,"options.highWaterMark",0),r+=n,async function*(){let s=sr().AbortSignalAny([e?.signal].filter(Xge)),o=this,a=[],l={signal:s},c,u,d=!1,E=0;function f(){d=!0,p()}function p(){E-=1,h()}function h(){u&&!d&&E<n&&a.length<r&&(u(),u=null)}async function T(){try{for await(let S of o){if(d)return;if(s.aborted)throw new Ui;try{if(S=t(S,l),S===TS)continue;S=Kge(S)}catch(A){S=A2(A)}E+=1,m2(S,p,f),a.push(S),c&&(c(),c=null),!d&&(a.length>=r||E>=n)&&await new R2(A=>{u=A})}a.push(g2)}catch(S){let A=A2(S);m2(A,p,f),a.push(A)}finally{d=!0,c&&(c(),c=null)}}T();try{for(;;){for(;a.length>0;){let S=await a[0];if(S===g2)return;if(s.aborted)throw new Ui;S!==TS&&(yield S),a.shift(),h()}await new R2(S=>{c=S})}}finally{d=!0,u&&(u(),u=null)}}.call(this)}function Qge(t=void 0){return t!=null&&Na(t,"options"),t?.signal!=null&&_a(t.signal,"options.signal"),async function*(){let n=0;for await(let i of this){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new Ui({cause:t.signal.reason});yield[n++,i]}}.call(this)}async function _2(t,e=void 0){for await(let n of LC.call(this,t,e))return!0;return!1}async function Zge(t,e=void 0){if(typeof t!="function")throw new uf("fn",["Function","AsyncFunction"],t);return!await _2.call(this,async(...n)=>!await t(...n),e)}async function eIe(t,e){for await(let n of LC.call(this,t,e))return n}async function tIe(t,e){if(typeof t!="function")throw new uf("fn",["Function","AsyncFunction"],t);async function n(r,i){return await t(r,i),TS}for await(let r of SS.call(this,n,e));}function LC(t,e){if(typeof t!="function")throw new uf("fn",["Function","AsyncFunction"],t);async function n(r,i){return await t(r,i)?r:TS}return SS.call(this,n,e)}var wC=class extends Uge{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function nIe(t,e,n){var r;if(typeof t!="function")throw new uf("reducer",["Function","AsyncFunction"],t);n!=null&&Na(n,"options"),n?.signal!=null&&_a(n.signal,"options.signal");let i=arguments.length>1;if(n!=null&&(r=n.signal)!==null&&r!==void 0&&r.aborted){let c=new Ui(void 0,{cause:n.signal.reason});throw this.once("error",()=>{}),await Gge(this.destroy(c)),c}let s=new vge,o=s.signal;if(n!=null&&n.signal){let c={once:!0,[Fge]:this,[Hge]:!0};n.signal.addEventListener("abort",()=>s.abort(),c)}let a=!1;try{for await(let c of this){var l;if(a=!0,n!=null&&(l=n.signal)!==null&&l!==void 0&&l.aborted)throw new Ui;i?e=await t(e,c,{signal:o}):(e=c,i=!0)}if(!a&&!i)throw new wC}finally{s.abort()}return e}async function rIe(t){t!=null&&Na(t,"options"),t?.signal!=null&&_a(t.signal,"options.signal");let e=[];for await(let r of this){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new Ui(void 0,{cause:t.signal.reason});qge(e,r)}return e}function iIe(t,e){let n=SS.call(this,t,e);return async function*(){for await(let i of n)yield*i}.call(this)}function N2(t){if(t=zge(t),jge(t))return 0;if(t<0)throw new Bge("number",">= 0",t);return t}function sIe(t,e=void 0){return e!=null&&Na(e,"options"),e?.signal!=null&&_a(e.signal,"options.signal"),t=N2(t),async function*(){var r;if(e!=null&&(r=e.signal)!==null&&r!==void 0&&r.aborted)throw new Ui;for await(let s of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new Ui;t--<=0&&(yield s)}}.call(this)}function oIe(t,e=void 0){return e!=null&&Na(e,"options"),e?.signal!=null&&_a(e.signal,"options.signal"),t=N2(t),async function*(){var r;if(e!=null&&(r=e.signal)!==null&&r!==void 0&&r.aborted)throw new Ui;for await(let s of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new Ui;if(t-- >0&&(yield s),t<=0)return}}.call(this)}DC.exports.streamReturningOperators={asIndexedPairs:Vge(Qge,"readable.asIndexedPairs will be removed in a future version."),drop:sIe,filter:LC,flatMap:iIe,map:SS,take:oIe,compose:Jge};DC.exports.promiseReturningOperators={every:Zge,forEach:tIe,reduce:nIe,toArray:rIe,some:_2,find:eIe}});var PC=C((pHe,C2)=>{"use strict";var{ArrayPrototypePop:aIe,Promise:lIe}=At(),{isIterable:cIe,isNodeStream:uIe,isWebStream:dIe}=xi(),{pipelineImpl:fIe}=ES(),{finished:EIe}=Ss();xC();function hIe(...t){return new lIe((e,n)=>{let r,i,s=t[t.length-1];if(s&&typeof s=="object"&&!uIe(s)&&!cIe(s)&&!dIe(s)){let o=aIe(t);r=o.signal,i=o.end}fIe(t,(o,a)=>{o?n(o):e(a)},{signal:r,end:i})})}C2.exports={finished:EIe,pipeline:hIe}});var xC=C((THe,M2)=>{"use strict";var{Buffer:pIe}=require("buffer"),{ObjectDefineProperty:ms,ObjectKeys:w2,ReflectApply:L2}=At(),{promisify:{custom:D2}}=sr(),{streamReturningOperators:b2,promiseReturningOperators:y2}=O2(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:P2}}=Xn(),TIe=yC(),{setDefaultHighWaterMark:SIe,getDefaultHighWaterMark:RIe}=tf(),{pipeline:x2}=ES(),{destroyer:AIe}=Ra(),v2=Ss(),vC=PC(),df=xi(),ht=M2.exports=JT().Stream;ht.isDestroyed=df.isDestroyed;ht.isDisturbed=df.isDisturbed;ht.isErrored=df.isErrored;ht.isReadable=df.isReadable;ht.isWritable=df.isWritable;ht.Readable=rf();for(let t of w2(b2)){let n=function(...r){if(new.target)throw P2();return ht.Readable.from(L2(e,this,r))},e=b2[t];ms(n,"name",{__proto__:null,value:e.name}),ms(n,"length",{__proto__:null,value:e.length}),ms(ht.Readable.prototype,t,{__proto__:null,value:n,enumerable:!1,configurable:!0,writable:!0})}for(let t of w2(y2)){let n=function(...r){if(new.target)throw P2();return L2(e,this,r)},e=y2[t];ms(n,"name",{__proto__:null,value:e.name}),ms(n,"length",{__proto__:null,value:e.length}),ms(ht.Readable.prototype,t,{__proto__:null,value:n,enumerable:!1,configurable:!0,writable:!0})}ht.Writable=cS();ht.Duplex=Mi();ht.Transform=pC();ht.PassThrough=SC();ht.pipeline=x2;var{addAbortSignal:mIe}=ef();ht.addAbortSignal=mIe;ht.finished=v2;ht.destroy=AIe;ht.compose=TIe;ht.setDefaultHighWaterMark=SIe;ht.getDefaultHighWaterMark=RIe;ms(ht,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return vC}});ms(x2,D2,{__proto__:null,enumerable:!0,get(){return vC.pipeline}});ms(v2,D2,{__proto__:null,enumerable:!0,get(){return vC.finished}});ht.Stream=ht;ht._isUint8Array=function(e){return e instanceof Uint8Array};ht._uint8ArrayToBuffer=function(e){return pIe.from(e.buffer,e.byteOffset,e.byteLength)}});var MC=C((SHe,Be)=>{"use strict";var sn=require("stream");if(sn&&process.env.READABLE_STREAM==="disable"){let t=sn.promises;Be.exports._uint8ArrayToBuffer=sn._uint8ArrayToBuffer,Be.exports._isUint8Array=sn._isUint8Array,Be.exports.isDisturbed=sn.isDisturbed,Be.exports.isErrored=sn.isErrored,Be.exports.isReadable=sn.isReadable,Be.exports.Readable=sn.Readable,Be.exports.Writable=sn.Writable,Be.exports.Duplex=sn.Duplex,Be.exports.Transform=sn.Transform,Be.exports.PassThrough=sn.PassThrough,Be.exports.addAbortSignal=sn.addAbortSignal,Be.exports.finished=sn.finished,Be.exports.destroy=sn.destroy,Be.exports.pipeline=sn.pipeline,Be.exports.compose=sn.compose,Object.defineProperty(sn,"promises",{configurable:!0,enumerable:!0,get(){return t}}),Be.exports.Stream=sn.Stream}else{let t=xC(),e=PC(),n=t.Readable.destroy;Be.exports=t.Readable,Be.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,Be.exports._isUint8Array=t._isUint8Array,Be.exports.isDisturbed=t.isDisturbed,Be.exports.isErrored=t.isErrored,Be.exports.isReadable=t.isReadable,Be.exports.Readable=t.Readable,Be.exports.Writable=t.Writable,Be.exports.Duplex=t.Duplex,Be.exports.Transform=t.Transform,Be.exports.PassThrough=t.PassThrough,Be.exports.addAbortSignal=t.addAbortSignal,Be.exports.finished=t.finished,Be.exports.destroy=t.destroy,Be.exports.destroy=n,Be.exports.pipeline=t.pipeline,Be.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return e}}),Be.exports.Stream=t.Stream}Be.exports.default=Be.exports});var UC=C((AHe,U2)=>{var RHe=require("stream").Stream,gIe=MC().PassThrough,IIe=Oh(),_Ie=U2.exports={};_Ie.normalizeInputSource=function(t){if(t===null)return Buffer.alloc(0);if(typeof t=="string")return Buffer.from(t);if(IIe(t)&&!t._readableState){var e=new gIe;return t.pipe(e),e}return t}});var FC=C((mHe,B2)=>{var NIe=require("util").inherits,OIe=Oh(),BC=MC().Transform,CIe=$T(),bIe=UC(),Rr=B2.exports=function(t){if(!(this instanceof Rr))return new Rr(t);BC.call(this,t),this.offset=0,this._archive={finish:!1,finished:!1,processing:!1}};NIe(Rr,BC);Rr.prototype._appendBuffer=function(t,e,n){};Rr.prototype._appendStream=function(t,e,n){};Rr.prototype._emitErrorCallback=function(t){t&&this.emit("error",t)};Rr.prototype._finish=function(t){};Rr.prototype._normalizeEntry=function(t){};Rr.prototype._transform=function(t,e,n){n(null,t)};Rr.prototype.entry=function(t,e,n){if(e=e||null,typeof n!="function"&&(n=this._emitErrorCallback.bind(this)),!(t instanceof CIe)){n(new Error("not a valid instance of ArchiveEntry"));return}if(this._archive.finish||this._archive.finished){n(new Error("unacceptable entry after finish"));return}if(this._archive.processing){n(new Error("already processing an entry"));return}if(this._archive.processing=!0,this._normalizeEntry(t),this._entry=t,e=bIe.normalizeInputSource(e),Buffer.isBuffer(e))this._appendBuffer(t,e,n);else if(OIe(e))this._appendStream(t,e,n);else{this._archive.processing=!1,n(new Error("input source must be valid Stream or Buffer instance"));return}return this};Rr.prototype.finish=function(){if(this._archive.processing){this._archive.finish=!0;return}this._finish()};Rr.prototype.getBytesWritten=function(){return this.offset};Rr.prototype.write=function(t,e){return t&&(this.offset+=t.length),BC.prototype.write.call(this,t,e)}});var RS=C(HC=>{var F2;(function(t){typeof DO_NOT_EXPORT_CRC>"u"?typeof HC=="object"?t(HC):typeof define=="function"&&define.amd?define(function(){var e={};return t(e),e}):t(F2={}):t(F2={})})(function(t){t.version="1.2.2";function e(){for(var I=0,D=new Array(256),g=0;g!=256;++g)I=g,I=I&1?-306674912^I>>>1:I>>>1,I=I&1?-306674912^I>>>1:I>>>1,I=I&1?-306674912^I>>>1:I>>>1,I=I&1?-306674912^I>>>1:I>>>1,I=I&1?-306674912^I>>>1:I>>>1,I=I&1?-306674912^I>>>1:I>>>1,I=I&1?-306674912^I>>>1:I>>>1,I=I&1?-306674912^I>>>1:I>>>1,D[g]=I;return typeof Int32Array<"u"?new Int32Array(D):D}var n=e();function r(I){var D=0,g=0,w=0,x=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(w=0;w!=256;++w)x[w]=I[w];for(w=0;w!=256;++w)for(g=I[w],D=256+w;D<4096;D+=256)g=x[D]=g>>>8^I[g&255];var U=[];for(w=1;w!=16;++w)U[w-1]=typeof Int32Array<"u"?x.subarray(w*256,w*256+256):x.slice(w*256,w*256+256);return U}var i=r(n),s=i[0],o=i[1],a=i[2],l=i[3],c=i[4],u=i[5],d=i[6],E=i[7],f=i[8],p=i[9],h=i[10],T=i[11],S=i[12],A=i[13],R=i[14];function m(I,D){for(var g=D^-1,w=0,x=I.length;w<x;)g=g>>>8^n[(g^I.charCodeAt(w++))&255];return~g}function N(I,D){for(var g=D^-1,w=I.length-15,x=0;x<w;)g=R[I[x++]^g&255]^A[I[x++]^g>>8&255]^S[I[x++]^g>>16&255]^T[I[x++]^g>>>24]^h[I[x++]]^p[I[x++]]^f[I[x++]]^E[I[x++]]^d[I[x++]]^u[I[x++]]^c[I[x++]]^l[I[x++]]^a[I[x++]]^o[I[x++]]^s[I[x++]]^n[I[x++]];for(w+=15;x<w;)g=g>>>8^n[(g^I[x++])&255];return~g}function L(I,D){for(var g=D^-1,w=0,x=I.length,U=0,H=0;w<x;)U=I.charCodeAt(w++),U<128?g=g>>>8^n[(g^U)&255]:U<2048?(g=g>>>8^n[(g^(192|U>>6&31))&255],g=g>>>8^n[(g^(128|U&63))&255]):U>=55296&&U<57344?(U=(U&1023)+64,H=I.charCodeAt(w++)&1023,g=g>>>8^n[(g^(240|U>>8&7))&255],g=g>>>8^n[(g^(128|U>>2&63))&255],g=g>>>8^n[(g^(128|H>>6&15|(U&3)<<4))&255],g=g>>>8^n[(g^(128|H&63))&255]):(g=g>>>8^n[(g^(224|U>>12&15))&255],g=g>>>8^n[(g^(128|U>>6&63))&255],g=g>>>8^n[(g^(128|U&63))&255]);return~g}t.table=n,t.bstr=m,t.buf=N,t.str=L})});var mt=C((IHe,H2)=>{"use strict";var GC=class extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError(`Expected input to be an Array, got ${typeof e}`);let n="";for(let r=0;r<e.length;r++)n+=`    ${e[r].stack}
`;super(n),this.name="AggregateError",this.errors=e}};H2.exports={AggregateError:GC,ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,e){return t.includes(e)},ArrayPrototypeIndexOf(t,e){return t.indexOf(e)},ArrayPrototypeJoin(t,e){return t.join(e)},ArrayPrototypeMap(t,e){return t.map(e)},ArrayPrototypePop(t,e){return t.pop(e)},ArrayPrototypePush(t,e){return t.push(e)},ArrayPrototypeSlice(t,e,n){return t.slice(e,n)},Error,FunctionPrototypeCall(t,e,...n){return t.call(e,...n)},FunctionPrototypeSymbolHasInstance(t,e){return Function.prototype[Symbol.hasInstance].call(t,e)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,e){return Object.defineProperties(t,e)},ObjectDefineProperty(t,e,n){return Object.defineProperty(t,e,n)},ObjectGetOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,e){return Object.setPrototypeOf(t,e)},Promise,PromisePrototypeCatch(t,e){return t.catch(e)},PromisePrototypeThen(t,e,n){return t.then(e,n)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,e){return t.test(e)},SafeSet:Set,String,StringPrototypeSlice(t,e,n){return t.slice(e,n)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,e,n){return t.set(e,n)},Boolean,Uint8Array}});var $C=C((_He,G2)=>{"use strict";G2.exports={format(t,...e){return t.replace(/%([sdifj])/g,function(...[n,r]){let i=e.shift();return r==="f"?i.toFixed(6):r==="j"?JSON.stringify(i):r==="s"&&typeof i=="object"?`${i.constructor!==Object?i.constructor.name:""} {}`.trim():i.toString()})},inspect(t){switch(typeof t){case"string":if(t.includes("'"))if(t.includes('"')){if(!t.includes("`")&&!t.includes("${"))return`\`${t}\``}else return`"${t}"`;return`'${t}'`;case"number":return isNaN(t)?"NaN":Object.is(t,-0)?String(t):t;case"bigint":return`${String(t)}n`;case"boolean":case"undefined":return String(t);case"object":return"{}"}}}});var jn=C((NHe,W2)=>{"use strict";var{format:yIe,inspect:AS}=$C(),{AggregateError:wIe}=mt(),LIe=globalThis.AggregateError||wIe,DIe=Symbol("kIsNodeError"),PIe=["string","function","number","object","Function","Object","boolean","bigint","symbol"],xIe=/^([A-Z][a-z0-9]*)+$/,vIe="__node_internal_",mS={};function Oa(t,e){if(!t)throw new mS.ERR_INTERNAL_ASSERTION(e)}function $2(t){let e="",n=t.length,r=t[0]==="-"?1:0;for(;n>=r+4;n-=3)e=`_${t.slice(n-3,n)}${e}`;return`${t.slice(0,n)}${e}`}function MIe(t,e,n){if(typeof e=="function")return Oa(e.length<=n.length,`Code: ${t}; The provided arguments length (${n.length}) does not match the required ones (${e.length}).`),e(...n);let r=(e.match(/%[dfijoOs]/g)||[]).length;return Oa(r===n.length,`Code: ${t}; The provided arguments length (${n.length}) does not match the required ones (${r}).`),n.length===0?e:yIe(e,...n)}function Un(t,e,n){n||(n=Error);class r extends n{constructor(...s){super(MIe(t,e,s))}toString(){return`${this.name} [${t}]: ${this.message}`}}Object.defineProperties(r.prototype,{name:{value:n.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${t}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),r.prototype.code=t,r.prototype[DIe]=!0,mS[t]=r}function k2(t){let e=vIe+t.name;return Object.defineProperty(t,"name",{value:e}),t}function UIe(t,e){if(t&&e&&t!==e){if(Array.isArray(e.errors))return e.errors.push(t),e;let n=new LIe([e,t],e.message);return n.code=e.code,n}return t||e}var kC=class extends Error{constructor(e="The operation was aborted",n=void 0){if(n!==void 0&&typeof n!="object")throw new mS.ERR_INVALID_ARG_TYPE("options","Object",n);super(e,n),this.code="ABORT_ERR",this.name="AbortError"}};Un("ERR_ASSERTION","%s",Error);Un("ERR_INVALID_ARG_TYPE",(t,e,n)=>{Oa(typeof t=="string","'name' must be a string"),Array.isArray(e)||(e=[e]);let r="The ";t.endsWith(" argument")?r+=`${t} `:r+=`"${t}" ${t.includes(".")?"property":"argument"} `,r+="must be ";let i=[],s=[],o=[];for(let l of e)Oa(typeof l=="string","All expected entries have to be of type string"),PIe.includes(l)?i.push(l.toLowerCase()):xIe.test(l)?s.push(l):(Oa(l!=="object",'The value "object" should be written as "Object"'),o.push(l));if(s.length>0){let l=i.indexOf("object");l!==-1&&(i.splice(i,l,1),s.push("Object"))}if(i.length>0){switch(i.length){case 1:r+=`of type ${i[0]}`;break;case 2:r+=`one of type ${i[0]} or ${i[1]}`;break;default:{let l=i.pop();r+=`one of type ${i.join(", ")}, or ${l}`}}(s.length>0||o.length>0)&&(r+=" or ")}if(s.length>0){switch(s.length){case 1:r+=`an instance of ${s[0]}`;break;case 2:r+=`an instance of ${s[0]} or ${s[1]}`;break;default:{let l=s.pop();r+=`an instance of ${s.join(", ")}, or ${l}`}}o.length>0&&(r+=" or ")}switch(o.length){case 0:break;case 1:o[0].toLowerCase()!==o[0]&&(r+="an "),r+=`${o[0]}`;break;case 2:r+=`one of ${o[0]} or ${o[1]}`;break;default:{let l=o.pop();r+=`one of ${o.join(", ")}, or ${l}`}}if(n==null)r+=`. Received ${n}`;else if(typeof n=="function"&&n.name)r+=`. Received function ${n.name}`;else if(typeof n=="object"){var a;if((a=n.constructor)!==null&&a!==void 0&&a.name)r+=`. Received an instance of ${n.constructor.name}`;else{let l=AS(n,{depth:-1});r+=`. Received ${l}`}}else{let l=AS(n,{colors:!1});l.length>25&&(l=`${l.slice(0,25)}...`),r+=`. Received type ${typeof n} (${l})`}return r},TypeError);Un("ERR_INVALID_ARG_VALUE",(t,e,n="is invalid")=>{let r=AS(e);return r.length>128&&(r=r.slice(0,128)+"..."),`The ${t.includes(".")?"property":"argument"} '${t}' ${n}. Received ${r}`},TypeError);Un("ERR_INVALID_RETURN_VALUE",(t,e,n)=>{var r;let i=n!=null&&(r=n.constructor)!==null&&r!==void 0&&r.name?`instance of ${n.constructor.name}`:`type ${typeof n}`;return`Expected ${t} to be returned from the "${e}" function but got ${i}.`},TypeError);Un("ERR_MISSING_ARGS",(...t)=>{Oa(t.length>0,"At least one arg needs to be specified");let e,n=t.length;switch(t=(Array.isArray(t)?t:[t]).map(r=>`"${r}"`).join(" or "),n){case 1:e+=`The ${t[0]} argument`;break;case 2:e+=`The ${t[0]} and ${t[1]} arguments`;break;default:{let r=t.pop();e+=`The ${t.join(", ")}, and ${r} arguments`}break}return`${e} must be specified`},TypeError);Un("ERR_OUT_OF_RANGE",(t,e,n)=>{Oa(e,'Missing "range" argument');let r;if(Number.isInteger(n)&&Math.abs(n)>2**32)r=$2(String(n));else if(typeof n=="bigint"){r=String(n);let i=BigInt(2)**BigInt(32);(n>i||n<-i)&&(r=$2(r)),r+="n"}else r=AS(n);return`The value of "${t}" is out of range. It must be ${e}. Received ${r}`},RangeError);Un("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);Un("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);Un("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);Un("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);Un("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);Un("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Un("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);Un("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);Un("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);Un("ERR_STREAM_WRITE_AFTER_END","write after end",Error);Un("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);W2.exports={AbortError:kC,aggregateTwoErrors:k2(UIe),hideStackFrames:k2,codes:mS}});var or=C((OHe,YC)=>{"use strict";var BIe=require("buffer"),{format:FIe,inspect:HIe}=$C(),{codes:{ERR_INVALID_ARG_TYPE:WC}}=jn(),{kResistStopPropagation:GIe,AggregateError:$Ie,SymbolDispose:kIe}=mt(),WIe=globalThis.AbortSignal||kt().AbortSignal,YIe=globalThis.AbortController||kt().AbortController,VIe=Object.getPrototypeOf(async function(){}).constructor,Y2=globalThis.Blob||BIe.Blob,qIe=typeof Y2<"u"?function(e){return e instanceof Y2}:function(e){return!1},V2=(t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new WC(e,"AbortSignal",t)},XIe=(t,e)=>{if(typeof t!="function")throw new WC(e,"Function",t)};YC.exports={AggregateError:$Ie,kEmptyObject:Object.freeze({}),once(t){let e=!1;return function(...n){e||(e=!0,t.apply(this,n))}},createDeferredPromise:function(){let t,e;return{promise:new Promise((r,i)=>{t=r,e=i}),resolve:t,reject:e}},promisify(t){return new Promise((e,n)=>{t((r,...i)=>r?n(r):e(...i))})},debuglog(){return function(){}},format:FIe,inspect:HIe,types:{isAsyncFunction(t){return t instanceof VIe},isArrayBufferView(t){return ArrayBuffer.isView(t)}},isBlob:qIe,deprecate(t,e){return t},addAbortListener:require("events").addAbortListener||function(e,n){if(e===void 0)throw new WC("signal","AbortSignal",e);V2(e,"signal"),XIe(n,"listener");let r;return e.aborted?queueMicrotask(()=>n()):(e.addEventListener("abort",n,{__proto__:null,once:!0,[GIe]:!0}),r=()=>{e.removeEventListener("abort",n)}),{__proto__:null,[kIe](){var i;(i=r)===null||i===void 0||i()}}},AbortSignalAny:WIe.any||function(e){if(e.length===1)return e[0];let n=new YIe,r=()=>n.abort();return e.forEach(i=>{V2(i,"signals"),i.addEventListener("abort",r,{once:!0})}),n.signal.addEventListener("abort",()=>{e.forEach(i=>i.removeEventListener("abort",r))},{once:!0}),n.signal}};YC.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")});var mc=C((CHe,tq)=>{"use strict";var{ArrayIsArray:qC,ArrayPrototypeIncludes:j2,ArrayPrototypeJoin:K2,ArrayPrototypeMap:zIe,NumberIsInteger:XC,NumberIsNaN:jIe,NumberMAX_SAFE_INTEGER:KIe,NumberMIN_SAFE_INTEGER:JIe,NumberParseInt:QIe,ObjectPrototypeHasOwnProperty:ZIe,RegExpPrototypeExec:J2,String:e_e,StringPrototypeToUpperCase:t_e,StringPrototypeTrim:n_e}=mt(),{hideStackFrames:$r,codes:{ERR_SOCKET_BAD_PORT:r_e,ERR_INVALID_ARG_TYPE:Kn,ERR_INVALID_ARG_VALUE:Ac,ERR_OUT_OF_RANGE:Ca,ERR_UNKNOWN_SIGNAL:q2}}=jn(),{normalizeEncoding:i_e}=or(),{isAsyncFunction:s_e,isArrayBufferView:o_e}=or().types,X2={};function a_e(t){return t===(t|0)}function l_e(t){return t===t>>>0}var c_e=/^[0-7]+$/,u_e="must be a 32-bit unsigned integer or an octal string";function d_e(t,e,n){if(typeof t>"u"&&(t=n),typeof t=="string"){if(J2(c_e,t)===null)throw new Ac(e,t,u_e);t=QIe(t,8)}return Q2(t,e),t}var f_e=$r((t,e,n=JIe,r=KIe)=>{if(typeof t!="number")throw new Kn(e,"number",t);if(!XC(t))throw new Ca(e,"an integer",t);if(t<n||t>r)throw new Ca(e,`>= ${n} && <= ${r}`,t)}),E_e=$r((t,e,n=-2147483648,r=2147483647)=>{if(typeof t!="number")throw new Kn(e,"number",t);if(!XC(t))throw new Ca(e,"an integer",t);if(t<n||t>r)throw new Ca(e,`>= ${n} && <= ${r}`,t)}),Q2=$r((t,e,n=!1)=>{if(typeof t!="number")throw new Kn(e,"number",t);if(!XC(t))throw new Ca(e,"an integer",t);let r=n?1:0,i=4294967295;if(t<r||t>i)throw new Ca(e,`>= ${r} && <= ${i}`,t)});function zC(t,e){if(typeof t!="string")throw new Kn(e,"string",t)}function h_e(t,e,n=void 0,r){if(typeof t!="number")throw new Kn(e,"number",t);if(n!=null&&t<n||r!=null&&t>r||(n!=null||r!=null)&&jIe(t))throw new Ca(e,`${n!=null?`>= ${n}`:""}${n!=null&&r!=null?" && ":""}${r!=null?`<= ${r}`:""}`,t)}var p_e=$r((t,e,n)=>{if(!j2(n,t)){let i="must be one of: "+K2(zIe(n,s=>typeof s=="string"?`'${s}'`:e_e(s)),", ");throw new Ac(e,t,i)}});function Z2(t,e){if(typeof t!="boolean")throw new Kn(e,"boolean",t)}function VC(t,e,n){return t==null||!ZIe(t,e)?n:t[e]}var T_e=$r((t,e,n=null)=>{let r=VC(n,"allowArray",!1),i=VC(n,"allowFunction",!1);if(!VC(n,"nullable",!1)&&t===null||!r&&qC(t)||typeof t!="object"&&(!i||typeof t!="function"))throw new Kn(e,"Object",t)}),S_e=$r((t,e)=>{if(t!=null&&typeof t!="object"&&typeof t!="function")throw new Kn(e,"a dictionary",t)}),gS=$r((t,e,n=0)=>{if(!qC(t))throw new Kn(e,"Array",t);if(t.length<n){let r=`must be longer than ${n}`;throw new Ac(e,t,r)}});function R_e(t,e){gS(t,e);for(let n=0;n<t.length;n++)zC(t[n],`${e}[${n}]`)}function A_e(t,e){gS(t,e);for(let n=0;n<t.length;n++)Z2(t[n],`${e}[${n}]`)}function m_e(t,e){gS(t,e);for(let n=0;n<t.length;n++){let r=t[n],i=`${e}[${n}]`;if(r==null)throw new Kn(i,"AbortSignal",r);eq(r,i)}}function g_e(t,e="signal"){if(zC(t,e),X2[t]===void 0)throw X2[t_e(t)]!==void 0?new q2(t+" (signals must use all capital letters)"):new q2(t)}var I_e=$r((t,e="buffer")=>{if(!o_e(t))throw new Kn(e,["Buffer","TypedArray","DataView"],t)});function __e(t,e){let n=i_e(e),r=t.length;if(n==="hex"&&r%2!==0)throw new Ac("encoding",e,`is invalid for data of length ${r}`)}function N_e(t,e="Port",n=!0){if(typeof t!="number"&&typeof t!="string"||typeof t=="string"&&n_e(t).length===0||+t!==+t>>>0||t>65535||t===0&&!n)throw new r_e(e,t,n);return t|0}var eq=$r((t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new Kn(e,"AbortSignal",t)}),O_e=$r((t,e)=>{if(typeof t!="function")throw new Kn(e,"Function",t)}),C_e=$r((t,e)=>{if(typeof t!="function"||s_e(t))throw new Kn(e,"Function",t)}),b_e=$r((t,e)=>{if(t!==void 0)throw new Kn(e,"undefined",t)});function y_e(t,e,n){if(!j2(n,t))throw new Kn(e,`('${K2(n,"|")}')`,t)}var w_e=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function z2(t,e){if(typeof t>"u"||!J2(w_e,t))throw new Ac(e,t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function L_e(t){if(typeof t=="string")return z2(t,"hints"),t;if(qC(t)){let e=t.length,n="";if(e===0)return n;for(let r=0;r<e;r++){let i=t[r];z2(i,"hints"),n+=i,r!==e-1&&(n+=", ")}return n}throw new Ac("hints",t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}tq.exports={isInt32:a_e,isUint32:l_e,parseFileMode:d_e,validateArray:gS,validateStringArray:R_e,validateBooleanArray:A_e,validateAbortSignalArray:m_e,validateBoolean:Z2,validateBuffer:I_e,validateDictionary:S_e,validateEncoding:__e,validateFunction:O_e,validateInt32:E_e,validateInteger:f_e,validateNumber:h_e,validateObject:T_e,validateOneOf:p_e,validatePlainFunction:C_e,validatePort:N_e,validateSignalName:g_e,validateString:zC,validateUint32:Q2,validateUndefined:b_e,validateUnion:y_e,validateAbortSignal:eq,validateLinkHeaderValue:L_e}});var Fi=C((bHe,Tq)=>{"use strict";var{SymbolAsyncIterator:nq,SymbolIterator:rq,SymbolFor:ba}=mt(),iq=ba("nodejs.stream.destroyed"),sq=ba("nodejs.stream.errored"),jC=ba("nodejs.stream.readable"),KC=ba("nodejs.stream.writable"),oq=ba("nodejs.stream.disturbed"),D_e=ba("nodejs.webstream.isClosedPromise"),P_e=ba("nodejs.webstream.controllerErrorFunction");function IS(t,e=!1){var n;return!!(t&&typeof t.pipe=="function"&&typeof t.on=="function"&&(!e||typeof t.pause=="function"&&typeof t.resume=="function")&&(!t._writableState||((n=t._readableState)===null||n===void 0?void 0:n.readable)!==!1)&&(!t._writableState||t._readableState))}function _S(t){var e;return!!(t&&typeof t.write=="function"&&typeof t.on=="function"&&(!t._readableState||((e=t._writableState)===null||e===void 0?void 0:e.writable)!==!1))}function x_e(t){return!!(t&&typeof t.pipe=="function"&&t._readableState&&typeof t.on=="function"&&typeof t.write=="function")}function Bi(t){return t&&(t._readableState||t._writableState||typeof t.write=="function"&&typeof t.on=="function"||typeof t.pipe=="function"&&typeof t.on=="function")}function aq(t){return!!(t&&!Bi(t)&&typeof t.pipeThrough=="function"&&typeof t.getReader=="function"&&typeof t.cancel=="function")}function lq(t){return!!(t&&!Bi(t)&&typeof t.getWriter=="function"&&typeof t.abort=="function")}function cq(t){return!!(t&&!Bi(t)&&typeof t.readable=="object"&&typeof t.writable=="object")}function v_e(t){return aq(t)||lq(t)||cq(t)}function M_e(t,e){return t==null?!1:e===!0?typeof t[nq]=="function":e===!1?typeof t[rq]=="function":typeof t[nq]=="function"||typeof t[rq]=="function"}function NS(t){if(!Bi(t))return null;let e=t._writableState,n=t._readableState,r=e||n;return!!(t.destroyed||t[iq]||r!=null&&r.destroyed)}function uq(t){if(!_S(t))return null;if(t.writableEnded===!0)return!0;let e=t._writableState;return e!=null&&e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function U_e(t,e){if(!_S(t))return null;if(t.writableFinished===!0)return!0;let n=t._writableState;return n!=null&&n.errored?!1:typeof n?.finished!="boolean"?null:!!(n.finished||e===!1&&n.ended===!0&&n.length===0)}function B_e(t){if(!IS(t))return null;if(t.readableEnded===!0)return!0;let e=t._readableState;return!e||e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function dq(t,e){if(!IS(t))return null;let n=t._readableState;return n!=null&&n.errored?!1:typeof n?.endEmitted!="boolean"?null:!!(n.endEmitted||e===!1&&n.ended===!0&&n.length===0)}function fq(t){return t&&t[jC]!=null?t[jC]:typeof t?.readable!="boolean"?null:NS(t)?!1:IS(t)&&t.readable&&!dq(t)}function Eq(t){return t&&t[KC]!=null?t[KC]:typeof t?.writable!="boolean"?null:NS(t)?!1:_S(t)&&t.writable&&!uq(t)}function F_e(t,e){return Bi(t)?NS(t)?!0:!(e?.readable!==!1&&fq(t)||e?.writable!==!1&&Eq(t)):null}function H_e(t){var e,n;return Bi(t)?t.writableErrored?t.writableErrored:(e=(n=t._writableState)===null||n===void 0?void 0:n.errored)!==null&&e!==void 0?e:null:null}function G_e(t){var e,n;return Bi(t)?t.readableErrored?t.readableErrored:(e=(n=t._readableState)===null||n===void 0?void 0:n.errored)!==null&&e!==void 0?e:null:null}function $_e(t){if(!Bi(t))return null;if(typeof t.closed=="boolean")return t.closed;let e=t._writableState,n=t._readableState;return typeof e?.closed=="boolean"||typeof n?.closed=="boolean"?e?.closed||n?.closed:typeof t._closed=="boolean"&&hq(t)?t._closed:null}function hq(t){return typeof t._closed=="boolean"&&typeof t._defaultKeepAlive=="boolean"&&typeof t._removedConnection=="boolean"&&typeof t._removedContLen=="boolean"}function pq(t){return typeof t._sent100=="boolean"&&hq(t)}function k_e(t){var e;return typeof t._consuming=="boolean"&&typeof t._dumped=="boolean"&&((e=t.req)===null||e===void 0?void 0:e.upgradeOrConnect)===void 0}function W_e(t){if(!Bi(t))return null;let e=t._writableState,n=t._readableState,r=e||n;return!r&&pq(t)||!!(r&&r.autoDestroy&&r.emitClose&&r.closed===!1)}function Y_e(t){var e;return!!(t&&((e=t[oq])!==null&&e!==void 0?e:t.readableDidRead||t.readableAborted))}function V_e(t){var e,n,r,i,s,o,a,l,c,u;return!!(t&&((e=(n=(r=(i=(s=(o=t[sq])!==null&&o!==void 0?o:t.readableErrored)!==null&&s!==void 0?s:t.writableErrored)!==null&&i!==void 0?i:(a=t._readableState)===null||a===void 0?void 0:a.errorEmitted)!==null&&r!==void 0?r:(l=t._writableState)===null||l===void 0?void 0:l.errorEmitted)!==null&&n!==void 0?n:(c=t._readableState)===null||c===void 0?void 0:c.errored)!==null&&e!==void 0?e:!((u=t._writableState)===null||u===void 0)&&u.errored))}Tq.exports={isDestroyed:NS,kIsDestroyed:iq,isDisturbed:Y_e,kIsDisturbed:oq,isErrored:V_e,kIsErrored:sq,isReadable:fq,kIsReadable:jC,kIsClosedPromise:D_e,kControllerErrorFunction:P_e,kIsWritable:KC,isClosed:$_e,isDuplexNodeStream:x_e,isFinished:F_e,isIterable:M_e,isReadableNodeStream:IS,isReadableStream:aq,isReadableEnded:B_e,isReadableFinished:dq,isReadableErrored:G_e,isNodeStream:Bi,isWebStream:v_e,isWritable:Eq,isWritableNodeStream:_S,isWritableStream:lq,isWritableEnded:uq,isWritableFinished:U_e,isWritableErrored:H_e,isServerRequest:k_e,isServerResponse:pq,willEmitClose:W_e,isTransformStream:cq}});var gs=C((yHe,tb)=>{"use strict";var lo=it(),{AbortError:Oq,codes:q_e}=jn(),{ERR_INVALID_ARG_TYPE:X_e,ERR_STREAM_PREMATURE_CLOSE:Sq}=q_e,{kEmptyObject:QC,once:ZC}=or(),{validateAbortSignal:z_e,validateFunction:j_e,validateObject:K_e,validateBoolean:J_e}=mc(),{Promise:Q_e,PromisePrototypeThen:Z_e,SymbolDispose:Cq}=mt(),{isClosed:eNe,isReadable:Rq,isReadableNodeStream:JC,isReadableStream:tNe,isReadableFinished:Aq,isReadableErrored:mq,isWritable:gq,isWritableNodeStream:Iq,isWritableStream:nNe,isWritableFinished:_q,isWritableErrored:Nq,isNodeStream:rNe,willEmitClose:iNe,kIsClosedPromise:sNe}=Fi(),gc;function oNe(t){return t.setHeader&&typeof t.abort=="function"}var eb=()=>{};function bq(t,e,n){var r,i;if(arguments.length===2?(n=e,e=QC):e==null?e=QC:K_e(e,"options"),j_e(n,"callback"),z_e(e.signal,"options.signal"),n=ZC(n),tNe(t)||nNe(t))return aNe(t,e,n);if(!rNe(t))throw new X_e("stream",["ReadableStream","WritableStream","Stream"],t);let s=(r=e.readable)!==null&&r!==void 0?r:JC(t),o=(i=e.writable)!==null&&i!==void 0?i:Iq(t),a=t._writableState,l=t._readableState,c=()=>{t.writable||E()},u=iNe(t)&&JC(t)===s&&Iq(t)===o,d=_q(t,!1),E=()=>{d=!0,t.destroyed&&(u=!1),!(u&&(!t.readable||s))&&(!s||f)&&n.call(t)},f=Aq(t,!1),p=()=>{f=!0,t.destroyed&&(u=!1),!(u&&(!t.writable||o))&&(!o||d)&&n.call(t)},h=N=>{n.call(t,N)},T=eNe(t),S=()=>{T=!0;let N=Nq(t)||mq(t);if(N&&typeof N!="boolean")return n.call(t,N);if(s&&!f&&JC(t,!0)&&!Aq(t,!1))return n.call(t,new Sq);if(o&&!d&&!_q(t,!1))return n.call(t,new Sq);n.call(t)},A=()=>{T=!0;let N=Nq(t)||mq(t);if(N&&typeof N!="boolean")return n.call(t,N);n.call(t)},R=()=>{t.req.on("finish",E)};oNe(t)?(t.on("complete",E),u||t.on("abort",S),t.req?R():t.on("request",R)):o&&!a&&(t.on("end",c),t.on("close",c)),!u&&typeof t.aborted=="boolean"&&t.on("aborted",S),t.on("end",p),t.on("finish",E),e.error!==!1&&t.on("error",h),t.on("close",S),T?lo.nextTick(S):a!=null&&a.errorEmitted||l!=null&&l.errorEmitted?u||lo.nextTick(A):(!s&&(!u||Rq(t))&&(d||gq(t)===!1)||!o&&(!u||gq(t))&&(f||Rq(t)===!1)||l&&t.req&&t.aborted)&&lo.nextTick(A);let m=()=>{n=eb,t.removeListener("aborted",S),t.removeListener("complete",E),t.removeListener("abort",S),t.removeListener("request",R),t.req&&t.req.removeListener("finish",E),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",E),t.removeListener("end",p),t.removeListener("error",h),t.removeListener("close",S)};if(e.signal&&!T){let N=()=>{let L=n;m(),L.call(t,new Oq(void 0,{cause:e.signal.reason}))};if(e.signal.aborted)lo.nextTick(N);else{gc=gc||or().addAbortListener;let L=gc(e.signal,N),I=n;n=ZC((...D)=>{L[Cq](),I.apply(t,D)})}}return m}function aNe(t,e,n){let r=!1,i=eb;if(e.signal)if(i=()=>{r=!0,n.call(t,new Oq(void 0,{cause:e.signal.reason}))},e.signal.aborted)lo.nextTick(i);else{gc=gc||or().addAbortListener;let o=gc(e.signal,i),a=n;n=ZC((...l)=>{o[Cq](),a.apply(t,l)})}let s=(...o)=>{r||lo.nextTick(()=>n.apply(t,o))};return Z_e(t[sNe].promise,s,s),eb}function lNe(t,e){var n;let r=!1;return e===null&&(e=QC),(n=e)!==null&&n!==void 0&&n.cleanup&&(J_e(e.cleanup,"cleanup"),r=e.cleanup),new Q_e((i,s)=>{let o=bq(t,e,a=>{r&&o(),a?s(a):i()})})}tb.exports=bq;tb.exports.finished=lNe});var ya=C((wHe,Mq)=>{"use strict";var Hi=it(),{aggregateTwoErrors:cNe,codes:{ERR_MULTIPLE_CALLBACK:uNe},AbortError:dNe}=jn(),{Symbol:Lq}=mt(),{kIsDestroyed:fNe,isDestroyed:ENe,isFinished:hNe,isServerRequest:pNe}=Fi(),Dq=Lq("kDestroy"),nb=Lq("kConstruct");function Pq(t,e,n){t&&(t.stack,e&&!e.errored&&(e.errored=t),n&&!n.errored&&(n.errored=t))}function TNe(t,e){let n=this._readableState,r=this._writableState,i=r||n;return r!=null&&r.destroyed||n!=null&&n.destroyed?(typeof e=="function"&&e(),this):(Pq(t,r,n),r&&(r.destroyed=!0),n&&(n.destroyed=!0),i.constructed?yq(this,t,e):this.once(Dq,function(s){yq(this,cNe(s,t),e)}),this)}function yq(t,e,n){let r=!1;function i(s){if(r)return;r=!0;let o=t._readableState,a=t._writableState;Pq(s,a,o),a&&(a.closed=!0),o&&(o.closed=!0),typeof n=="function"&&n(s),s?Hi.nextTick(SNe,t,s):Hi.nextTick(xq,t)}try{t._destroy(e||null,i)}catch(s){i(s)}}function SNe(t,e){rb(t,e),xq(t)}function xq(t){let e=t._readableState,n=t._writableState;n&&(n.closeEmitted=!0),e&&(e.closeEmitted=!0),(n!=null&&n.emitClose||e!=null&&e.emitClose)&&t.emit("close")}function rb(t,e){let n=t._readableState,r=t._writableState;r!=null&&r.errorEmitted||n!=null&&n.errorEmitted||(r&&(r.errorEmitted=!0),n&&(n.errorEmitted=!0),t.emit("error",e))}function RNe(){let t=this._readableState,e=this._writableState;t&&(t.constructed=!0,t.closed=!1,t.closeEmitted=!1,t.destroyed=!1,t.errored=null,t.errorEmitted=!1,t.reading=!1,t.ended=t.readable===!1,t.endEmitted=t.readable===!1),e&&(e.constructed=!0,e.destroyed=!1,e.closed=!1,e.closeEmitted=!1,e.errored=null,e.errorEmitted=!1,e.finalCalled=!1,e.prefinished=!1,e.ended=e.writable===!1,e.ending=e.writable===!1,e.finished=e.writable===!1)}function ib(t,e,n){let r=t._readableState,i=t._writableState;if(i!=null&&i.destroyed||r!=null&&r.destroyed)return this;r!=null&&r.autoDestroy||i!=null&&i.autoDestroy?t.destroy(e):e&&(e.stack,i&&!i.errored&&(i.errored=e),r&&!r.errored&&(r.errored=e),n?Hi.nextTick(rb,t,e):rb(t,e))}function ANe(t,e){if(typeof t._construct!="function")return;let n=t._readableState,r=t._writableState;n&&(n.constructed=!1),r&&(r.constructed=!1),t.once(nb,e),!(t.listenerCount(nb)>1)&&Hi.nextTick(mNe,t)}function mNe(t){let e=!1;function n(r){if(e){ib(t,r??new uNe);return}e=!0;let i=t._readableState,s=t._writableState,o=s||i;i&&(i.constructed=!0),s&&(s.constructed=!0),o.destroyed?t.emit(Dq,r):r?ib(t,r,!0):Hi.nextTick(gNe,t)}try{t._construct(r=>{Hi.nextTick(n,r)})}catch(r){Hi.nextTick(n,r)}}function gNe(t){t.emit(nb)}function wq(t){return t?.setHeader&&typeof t.abort=="function"}function vq(t){t.emit("close")}function INe(t,e){t.emit("error",e),Hi.nextTick(vq,t)}function _Ne(t,e){!t||ENe(t)||(!e&&!hNe(t)&&(e=new dNe),pNe(t)?(t.socket=null,t.destroy(e)):wq(t)?t.abort():wq(t.req)?t.req.abort():typeof t.destroy=="function"?t.destroy(e):typeof t.close=="function"?t.close():e?Hi.nextTick(INe,t,e):Hi.nextTick(vq,t),t.destroyed||(t[fNe]=!0))}Mq.exports={construct:ANe,destroyer:_Ne,destroy:TNe,undestroy:RNe,errorOrDestroy:ib}});var bS=C((LHe,Bq)=>{"use strict";var{ArrayIsArray:NNe,ObjectSetPrototypeOf:Uq}=mt(),{EventEmitter:OS}=require("events");function CS(t){OS.call(this,t)}Uq(CS.prototype,OS.prototype);Uq(CS,OS);CS.prototype.pipe=function(t,e){let n=this;function r(u){t.writable&&t.write(u)===!1&&n.pause&&n.pause()}n.on("data",r);function i(){n.readable&&n.resume&&n.resume()}t.on("drain",i),!t._isStdio&&(!e||e.end!==!1)&&(n.on("end",o),n.on("close",a));let s=!1;function o(){s||(s=!0,t.end())}function a(){s||(s=!0,typeof t.destroy=="function"&&t.destroy())}function l(u){c(),OS.listenerCount(this,"error")===0&&this.emit("error",u)}sb(n,"error",l),sb(t,"error",l);function c(){n.removeListener("data",r),t.removeListener("drain",i),n.removeListener("end",o),n.removeListener("close",a),n.removeListener("error",l),t.removeListener("error",l),n.removeListener("end",c),n.removeListener("close",c),t.removeListener("close",c)}return n.on("end",c),n.on("close",c),t.on("close",c),t.emit("pipe",n),t};function sb(t,e,n){if(typeof t.prependListener=="function")return t.prependListener(e,n);!t._events||!t._events[e]?t.on(e,n):NNe(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]}Bq.exports={Stream:CS,prependListener:sb}});var ff=C((DHe,yS)=>{"use strict";var{SymbolDispose:ONe}=mt(),{AbortError:Fq,codes:CNe}=jn(),{isNodeStream:Hq,isWebStream:bNe,kControllerErrorFunction:yNe}=Fi(),wNe=gs(),{ERR_INVALID_ARG_TYPE:Gq}=CNe,ob,LNe=(t,e)=>{if(typeof t!="object"||!("aborted"in t))throw new Gq(e,"AbortSignal",t)};yS.exports.addAbortSignal=function(e,n){if(LNe(e,"signal"),!Hq(n)&&!bNe(n))throw new Gq("stream",["ReadableStream","WritableStream","Stream"],n);return yS.exports.addAbortSignalNoValidate(e,n)};yS.exports.addAbortSignalNoValidate=function(t,e){if(typeof t!="object"||!("aborted"in t))return e;let n=Hq(e)?()=>{e.destroy(new Fq(void 0,{cause:t.reason}))}:()=>{e[yNe](new Fq(void 0,{cause:t.reason}))};if(t.aborted)n();else{ob=ob||or().addAbortListener;let r=ob(t,n);wNe(e,r[ONe])}return e}});var Wq=C((xHe,kq)=>{"use strict";var{StringPrototypeSlice:$q,SymbolIterator:DNe,TypedArrayPrototypeSet:wS,Uint8Array:PNe}=mt(),{Buffer:ab}=require("buffer"),{inspect:xNe}=or();kq.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){let n={data:e,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}unshift(e){let n={data:e,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}shift(){if(this.length===0)return;let e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return"";let n=this.head,r=""+n.data;for(;(n=n.next)!==null;)r+=e+n.data;return r}concat(e){if(this.length===0)return ab.alloc(0);let n=ab.allocUnsafe(e>>>0),r=this.head,i=0;for(;r;)wS(n,r.data,i),i+=r.data.length,r=r.next;return n}consume(e,n){let r=this.head.data;if(e<r.length){let i=r.slice(0,e);return this.head.data=r.slice(e),i}return e===r.length?this.shift():n?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[DNe](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let n="",r=this.head,i=0;do{let s=r.data;if(e>s.length)n+=s,e-=s.length;else{e===s.length?(n+=s,++i,r.next?this.head=r.next:this.head=this.tail=null):(n+=$q(s,0,e),this.head=r,r.data=$q(s,e));break}++i}while((r=r.next)!==null);return this.length-=i,n}_getBuffer(e){let n=ab.allocUnsafe(e),r=e,i=this.head,s=0;do{let o=i.data;if(e>o.length)wS(n,o,r-e),e-=o.length;else{e===o.length?(wS(n,o,r-e),++s,i.next?this.head=i.next:this.head=this.tail=null):(wS(n,new PNe(o.buffer,o.byteOffset,e),r-e),this.head=i,i.data=o.slice(e));break}++s}while((i=i.next)!==null);return this.length-=s,n}[Symbol.for("nodejs.util.inspect.custom")](e,n){return xNe(this,{...n,depth:0,customInspect:!1})}}});var Ef=C((vHe,Xq)=>{"use strict";var{MathFloor:vNe,NumberIsInteger:MNe}=mt(),{validateInteger:UNe}=mc(),{ERR_INVALID_ARG_VALUE:BNe}=jn().codes,Yq=16*1024,Vq=16;function FNe(t,e,n){return t.highWaterMark!=null?t.highWaterMark:e?t[n]:null}function qq(t){return t?Vq:Yq}function HNe(t,e){UNe(e,"value",0),t?Vq=e:Yq=e}function GNe(t,e,n,r){let i=FNe(e,r,n);if(i!=null){if(!MNe(i)||i<0){let s=r?`options.${n}`:"options.highWaterMark";throw new BNe(s,i)}return vNe(i)}return qq(t.objectMode)}Xq.exports={getHighWaterMark:GNe,getDefaultHighWaterMark:qq,setDefaultHighWaterMark:HNe}});var lb=C((MHe,Jq)=>{"use strict";var zq=it(),{PromisePrototypeThen:$Ne,SymbolAsyncIterator:jq,SymbolIterator:Kq}=mt(),{Buffer:kNe}=require("buffer"),{ERR_INVALID_ARG_TYPE:WNe,ERR_STREAM_NULL_VALUES:YNe}=jn().codes;function VNe(t,e,n){let r;if(typeof e=="string"||e instanceof kNe)return new t({objectMode:!0,...n,read(){this.push(e),this.push(null)}});let i;if(e&&e[jq])i=!0,r=e[jq]();else if(e&&e[Kq])i=!1,r=e[Kq]();else throw new WNe("iterable",["Iterable"],e);let s=new t({objectMode:!0,highWaterMark:1,...n}),o=!1;s._read=function(){o||(o=!0,l())},s._destroy=function(c,u){$Ne(a(c),()=>zq.nextTick(u,c),d=>zq.nextTick(u,d||c))};async function a(c){let u=c!=null,d=typeof r.throw=="function";if(u&&d){let{value:E,done:f}=await r.throw(c);if(await E,f)return}if(typeof r.return=="function"){let{value:E}=await r.return();await E}}async function l(){for(;;){try{let{value:c,done:u}=i?await r.next():r.next();if(u)s.push(null);else{let d=c&&typeof c.then=="function"?await c:c;if(d===null)throw o=!1,new YNe;if(s.push(d))continue;o=!1}}catch(c){s.destroy(c)}break}}return s}Jq.exports=VNe});var pf=C((UHe,pX)=>{"use strict";var ri=it(),{ArrayPrototypeIndexOf:qNe,NumberIsInteger:XNe,NumberIsNaN:zNe,NumberParseInt:jNe,ObjectDefineProperties:Tb,ObjectKeys:KNe,ObjectSetPrototypeOf:eX,Promise:tX,SafeSet:JNe,SymbolAsyncDispose:QNe,SymbolAsyncIterator:ZNe,Symbol:eOe}=mt();pX.exports=we;we.ReadableState=xS;var{EventEmitter:tOe}=require("events"),{Stream:co,prependListener:nOe}=bS(),{Buffer:cb}=require("buffer"),{addAbortSignal:rOe}=ff(),nX=gs(),Ye=or().debuglog("stream",t=>{Ye=t}),iOe=Wq(),Nc=ya(),{getHighWaterMark:sOe,getDefaultHighWaterMark:oOe}=Ef(),{aggregateTwoErrors:Qq,codes:{ERR_INVALID_ARG_TYPE:aOe,ERR_METHOD_NOT_IMPLEMENTED:lOe,ERR_OUT_OF_RANGE:cOe,ERR_STREAM_PUSH_AFTER_EOF:uOe,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:dOe},AbortError:fOe}=jn(),{validateObject:EOe}=mc(),wa=eOe("kPaused"),{StringDecoder:rX}=ad(),hOe=lb();eX(we.prototype,co.prototype);eX(we,co);var ub=()=>{},{errorOrDestroy:Ic}=Nc,_c=1,pOe=2,iX=4,hf=8,sX=16,LS=32,DS=64,oX=128,TOe=256,SOe=512,ROe=1024,hb=2048,pb=4096,AOe=8192,mOe=16384,gOe=32768,aX=65536,IOe=1<<17,_Oe=1<<18;function on(t){return{enumerable:!1,get(){return(this.state&t)!==0},set(e){e?this.state|=t:this.state&=~t}}}Tb(xS.prototype,{objectMode:on(_c),ended:on(pOe),endEmitted:on(iX),reading:on(hf),constructed:on(sX),sync:on(LS),needReadable:on(DS),emittedReadable:on(oX),readableListening:on(TOe),resumeScheduled:on(SOe),errorEmitted:on(ROe),emitClose:on(hb),autoDestroy:on(pb),destroyed:on(AOe),closed:on(mOe),closeEmitted:on(gOe),multiAwaitDrain:on(aX),readingMore:on(IOe),dataEmitted:on(_Oe)});function xS(t,e,n){typeof n!="boolean"&&(n=e instanceof Gi()),this.state=hb|pb|sX|LS,t&&t.objectMode&&(this.state|=_c),n&&t&&t.readableObjectMode&&(this.state|=_c),this.highWaterMark=t?sOe(this,t,"readableHighWaterMark",n):oOe(!1),this.buffer=new iOe,this.length=0,this.pipes=[],this.flowing=null,this[wa]=null,t&&t.emitClose===!1&&(this.state&=~hb),t&&t.autoDestroy===!1&&(this.state&=~pb),this.errored=null,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,t&&t.encoding&&(this.decoder=new rX(t.encoding),this.encoding=t.encoding)}function we(t){if(!(this instanceof we))return new we(t);let e=this instanceof Gi();this._readableState=new xS(t,this,e),t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&!e&&rOe(t.signal,this)),co.call(this,t),Nc.construct(this,()=>{this._readableState.needReadable&&PS(this,this._readableState)})}we.prototype.destroy=Nc.destroy;we.prototype._undestroy=Nc.undestroy;we.prototype._destroy=function(t,e){e(t)};we.prototype[tOe.captureRejectionSymbol]=function(t){this.destroy(t)};we.prototype[QNe]=function(){let t;return this.destroyed||(t=this.readableEnded?null:new fOe,this.destroy(t)),new tX((e,n)=>nX(this,r=>r&&r!==t?n(r):e(null)))};we.prototype.push=function(t,e){return lX(this,t,e,!1)};we.prototype.unshift=function(t,e){return lX(this,t,e,!0)};function lX(t,e,n,r){Ye("readableAddChunk",e);let i=t._readableState,s;if((i.state&_c)===0&&(typeof e=="string"?(n=n||i.defaultEncoding,i.encoding!==n&&(r&&i.encoding?e=cb.from(e,n).toString(i.encoding):(e=cb.from(e,n),n=""))):e instanceof cb?n="":co._isUint8Array(e)?(e=co._uint8ArrayToBuffer(e),n=""):e!=null&&(s=new aOe("chunk",["string","Buffer","Uint8Array"],e))),s)Ic(t,s);else if(e===null)i.state&=~hf,COe(t,i);else if((i.state&_c)!==0||e&&e.length>0)if(r)if((i.state&iX)!==0)Ic(t,new dOe);else{if(i.destroyed||i.errored)return!1;db(t,i,e,!0)}else if(i.ended)Ic(t,new uOe);else{if(i.destroyed||i.errored)return!1;i.state&=~hf,i.decoder&&!n?(e=i.decoder.write(e),i.objectMode||e.length!==0?db(t,i,e,!1):PS(t,i)):db(t,i,e,!1)}else r||(i.state&=~hf,PS(t,i));return!i.ended&&(i.length<i.highWaterMark||i.length===0)}function db(t,e,n,r){e.flowing&&e.length===0&&!e.sync&&t.listenerCount("data")>0?((e.state&aX)!==0?e.awaitDrainWriters.clear():e.awaitDrainWriters=null,e.dataEmitted=!0,t.emit("data",n)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),(e.state&DS)!==0&&vS(t)),PS(t,e)}we.prototype.isPaused=function(){let t=this._readableState;return t[wa]===!0||t.flowing===!1};we.prototype.setEncoding=function(t){let e=new rX(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;let n=this._readableState.buffer,r="";for(let i of n)r+=e.write(i);return n.clear(),r!==""&&n.push(r),this._readableState.length=r.length,this};var NOe=1073741824;function OOe(t){if(t>NOe)throw new cOe("size","<= 1GiB",t);return t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++,t}function Zq(t,e){return t<=0||e.length===0&&e.ended?0:(e.state&_c)!==0?1:zNe(t)?e.flowing&&e.length?e.buffer.first().length:e.length:t<=e.length?t:e.ended?e.length:0}we.prototype.read=function(t){Ye("read",t),t===void 0?t=NaN:XNe(t)||(t=jNe(t,10));let e=this._readableState,n=t;if(t>e.highWaterMark&&(e.highWaterMark=OOe(t)),t!==0&&(e.state&=~oX),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return Ye("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?fb(this):vS(this),null;if(t=Zq(t,e),t===0&&e.ended)return e.length===0&&fb(this),null;let r=(e.state&DS)!==0;if(Ye("need readable",r),(e.length===0||e.length-t<e.highWaterMark)&&(r=!0,Ye("length less than watermark",r)),e.ended||e.reading||e.destroyed||e.errored||!e.constructed)r=!1,Ye("reading, ended or constructing",r);else if(r){Ye("do read"),e.state|=hf|LS,e.length===0&&(e.state|=DS);try{this._read(e.highWaterMark)}catch(s){Ic(this,s)}e.state&=~LS,e.reading||(t=Zq(n,e))}let i;return t>0?i=EX(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.multiAwaitDrain?e.awaitDrainWriters.clear():e.awaitDrainWriters=null),e.length===0&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&fb(this)),i!==null&&!e.errorEmitted&&!e.closeEmitted&&(e.dataEmitted=!0,this.emit("data",i)),i};function COe(t,e){if(Ye("onEofChunk"),!e.ended){if(e.decoder){let n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,e.sync?vS(t):(e.needReadable=!1,e.emittedReadable=!0,cX(t))}}function vS(t){let e=t._readableState;Ye("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(Ye("emitReadable",e.flowing),e.emittedReadable=!0,ri.nextTick(cX,t))}function cX(t){let e=t._readableState;Ye("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&!e.errored&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,dX(t)}function PS(t,e){!e.readingMore&&e.constructed&&(e.readingMore=!0,ri.nextTick(bOe,t,e))}function bOe(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){let n=e.length;if(Ye("maybeReadMore read 0"),t.read(0),n===e.length)break}e.readingMore=!1}we.prototype._read=function(t){throw new lOe("_read()")};we.prototype.pipe=function(t,e){let n=this,r=this._readableState;r.pipes.length===1&&(r.multiAwaitDrain||(r.multiAwaitDrain=!0,r.awaitDrainWriters=new JNe(r.awaitDrainWriters?[r.awaitDrainWriters]:[]))),r.pipes.push(t),Ye("pipe count=%d opts=%j",r.pipes.length,e);let s=(!e||e.end!==!1)&&t!==ri.stdout&&t!==ri.stderr?a:T;r.endEmitted?ri.nextTick(s):n.once("end",s),t.on("unpipe",o);function o(S,A){Ye("onunpipe"),S===n&&A&&A.hasUnpiped===!1&&(A.hasUnpiped=!0,u())}function a(){Ye("onend"),t.end()}let l,c=!1;function u(){Ye("cleanup"),t.removeListener("close",p),t.removeListener("finish",h),l&&t.removeListener("drain",l),t.removeListener("error",f),t.removeListener("unpipe",o),n.removeListener("end",a),n.removeListener("end",T),n.removeListener("data",E),c=!0,l&&r.awaitDrainWriters&&(!t._writableState||t._writableState.needDrain)&&l()}function d(){c||(r.pipes.length===1&&r.pipes[0]===t?(Ye("false write response, pause",0),r.awaitDrainWriters=t,r.multiAwaitDrain=!1):r.pipes.length>1&&r.pipes.includes(t)&&(Ye("false write response, pause",r.awaitDrainWriters.size),r.awaitDrainWriters.add(t)),n.pause()),l||(l=yOe(n,t),t.on("drain",l))}n.on("data",E);function E(S){Ye("ondata");let A=t.write(S);Ye("dest.write",A),A===!1&&d()}function f(S){if(Ye("onerror",S),T(),t.removeListener("error",f),t.listenerCount("error")===0){let A=t._writableState||t._readableState;A&&!A.errorEmitted?Ic(t,S):t.emit("error",S)}}nOe(t,"error",f);function p(){t.removeListener("finish",h),T()}t.once("close",p);function h(){Ye("onfinish"),t.removeListener("close",p),T()}t.once("finish",h);function T(){Ye("unpipe"),n.unpipe(t)}return t.emit("pipe",n),t.writableNeedDrain===!0?d():r.flowing||(Ye("pipe resume"),n.resume()),t};function yOe(t,e){return function(){let r=t._readableState;r.awaitDrainWriters===e?(Ye("pipeOnDrain",1),r.awaitDrainWriters=null):r.multiAwaitDrain&&(Ye("pipeOnDrain",r.awaitDrainWriters.size),r.awaitDrainWriters.delete(e)),(!r.awaitDrainWriters||r.awaitDrainWriters.size===0)&&t.listenerCount("data")&&t.resume()}}we.prototype.unpipe=function(t){let e=this._readableState,n={hasUnpiped:!1};if(e.pipes.length===0)return this;if(!t){let i=e.pipes;e.pipes=[],this.pause();for(let s=0;s<i.length;s++)i[s].emit("unpipe",this,{hasUnpiped:!1});return this}let r=qNe(e.pipes,t);return r===-1?this:(e.pipes.splice(r,1),e.pipes.length===0&&this.pause(),t.emit("unpipe",this,n),this)};we.prototype.on=function(t,e){let n=co.prototype.on.call(this,t,e),r=this._readableState;return t==="data"?(r.readableListening=this.listenerCount("readable")>0,r.flowing!==!1&&this.resume()):t==="readable"&&!r.endEmitted&&!r.readableListening&&(r.readableListening=r.needReadable=!0,r.flowing=!1,r.emittedReadable=!1,Ye("on readable",r.length,r.reading),r.length?vS(this):r.reading||ri.nextTick(wOe,this)),n};we.prototype.addListener=we.prototype.on;we.prototype.removeListener=function(t,e){let n=co.prototype.removeListener.call(this,t,e);return t==="readable"&&ri.nextTick(uX,this),n};we.prototype.off=we.prototype.removeListener;we.prototype.removeAllListeners=function(t){let e=co.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&ri.nextTick(uX,this),e};function uX(t){let e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&e[wa]===!1?e.flowing=!0:t.listenerCount("data")>0?t.resume():e.readableListening||(e.flowing=null)}function wOe(t){Ye("readable nexttick read 0"),t.read(0)}we.prototype.resume=function(){let t=this._readableState;return t.flowing||(Ye("resume"),t.flowing=!t.readableListening,LOe(this,t)),t[wa]=!1,this};function LOe(t,e){e.resumeScheduled||(e.resumeScheduled=!0,ri.nextTick(DOe,t,e))}function DOe(t,e){Ye("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),dX(t),e.flowing&&!e.reading&&t.read(0)}we.prototype.pause=function(){return Ye("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Ye("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[wa]=!0,this};function dX(t){let e=t._readableState;for(Ye("flow",e.flowing);e.flowing&&t.read()!==null;);}we.prototype.wrap=function(t){let e=!1;t.on("data",r=>{!this.push(r)&&t.pause&&(e=!0,t.pause())}),t.on("end",()=>{this.push(null)}),t.on("error",r=>{Ic(this,r)}),t.on("close",()=>{this.destroy()}),t.on("destroy",()=>{this.destroy()}),this._read=()=>{e&&t.resume&&(e=!1,t.resume())};let n=KNe(t);for(let r=1;r<n.length;r++){let i=n[r];this[i]===void 0&&typeof t[i]=="function"&&(this[i]=t[i].bind(t))}return this};we.prototype[ZNe]=function(){return fX(this)};we.prototype.iterator=function(t){return t!==void 0&&EOe(t,"options"),fX(this,t)};function fX(t,e){typeof t.read!="function"&&(t=we.wrap(t,{objectMode:!0}));let n=POe(t,e);return n.stream=t,n}async function*POe(t,e){let n=ub;function r(o){this===t?(n(),n=ub):n=o}t.on("readable",r);let i,s=nX(t,{writable:!1},o=>{i=o?Qq(i,o):null,n(),n=ub});try{for(;;){let o=t.destroyed?null:t.read();if(o!==null)yield o;else{if(i)throw i;if(i===null)return;await new tX(r)}}}catch(o){throw i=Qq(i,o),i}finally{(i||e?.destroyOnReturn!==!1)&&(i===void 0||t._readableState.autoDestroy)?Nc.destroyer(t,null):(t.off("readable",r),s())}}Tb(we.prototype,{readable:{__proto__:null,get(){let t=this._readableState;return!!t&&t.readable!==!1&&!t.destroyed&&!t.errorEmitted&&!t.endEmitted},set(t){this._readableState&&(this._readableState.readable=!!t)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(t){this._readableState&&(this._readableState.destroyed=t)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}});Tb(xS.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[wa]!==!1},set(t){this[wa]=!!t}}});we._fromList=EX;function EX(t,e){if(e.length===0)return null;let n;return e.objectMode?n=e.buffer.shift():!t||t>=e.length?(e.decoder?n=e.buffer.join(""):e.buffer.length===1?n=e.buffer.first():n=e.buffer.concat(e.length),e.buffer.clear()):n=e.buffer.consume(t,e.decoder),n}function fb(t){let e=t._readableState;Ye("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,ri.nextTick(xOe,e,t))}function xOe(t,e){if(Ye("endReadableNT",t.endEmitted,t.length),!t.errored&&!t.closeEmitted&&!t.endEmitted&&t.length===0){if(t.endEmitted=!0,e.emit("end"),e.writable&&e.allowHalfOpen===!1)ri.nextTick(vOe,e);else if(t.autoDestroy){let n=e._writableState;(!n||n.autoDestroy&&(n.finished||n.writable===!1))&&e.destroy()}}}function vOe(t){t.writable&&!t.writableEnded&&!t.destroyed&&t.end()}we.from=function(t,e){return hOe(we,t,e)};var Eb;function hX(){return Eb===void 0&&(Eb={}),Eb}we.fromWeb=function(t,e){return hX().newStreamReadableFromReadableStream(t,e)};we.toWeb=function(t,e){return hX().newReadableStreamFromStreamReadable(t,e)};we.wrap=function(t,e){var n,r;return new we({objectMode:(n=(r=t.readableObjectMode)!==null&&r!==void 0?r:t.objectMode)!==null&&n!==void 0?n:!0,...e,destroy(i,s){Nc.destroyer(t,i),s(i)}}).wrap(t)}});var HS=C((BHe,bX)=>{"use strict";var La=it(),{ArrayPrototypeSlice:RX,Error:MOe,FunctionPrototypeSymbolHasInstance:AX,ObjectDefineProperty:mX,ObjectDefineProperties:UOe,ObjectSetPrototypeOf:gX,StringPrototypeToLowerCase:BOe,Symbol:FOe,SymbolHasInstance:HOe}=mt();bX.exports=bt;bt.WritableState=Rf;var{EventEmitter:GOe}=require("events"),Tf=bS().Stream,{Buffer:MS}=require("buffer"),FS=ya(),{addAbortSignal:$Oe}=ff(),{getHighWaterMark:kOe,getDefaultHighWaterMark:WOe}=Ef(),{ERR_INVALID_ARG_TYPE:YOe,ERR_METHOD_NOT_IMPLEMENTED:VOe,ERR_MULTIPLE_CALLBACK:IX,ERR_STREAM_CANNOT_PIPE:qOe,ERR_STREAM_DESTROYED:Sf,ERR_STREAM_ALREADY_FINISHED:XOe,ERR_STREAM_NULL_VALUES:zOe,ERR_STREAM_WRITE_AFTER_END:jOe,ERR_UNKNOWN_ENCODING:_X}=jn().codes,{errorOrDestroy:Oc}=FS;gX(bt.prototype,Tf.prototype);gX(bt,Tf);function Ab(){}var Cc=FOe("kOnFinished");function Rf(t,e,n){typeof n!="boolean"&&(n=e instanceof Gi()),this.objectMode=!!(t&&t.objectMode),n&&(this.objectMode=this.objectMode||!!(t&&t.writableObjectMode)),this.highWaterMark=t?kOe(this,t,"writableHighWaterMark",n):WOe(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let r=!!(t&&t.decodeStrings===!1);this.decodeStrings=!r,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=JOe.bind(void 0,e),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,BS(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!t||t.emitClose!==!1,this.autoDestroy=!t||t.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[Cc]=[]}function BS(t){t.buffered=[],t.bufferedIndex=0,t.allBuffers=!0,t.allNoop=!0}Rf.prototype.getBuffer=function(){return RX(this.buffered,this.bufferedIndex)};mX(Rf.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function bt(t){let e=this instanceof Gi();if(!e&&!AX(bt,this))return new bt(t);this._writableState=new Rf(t,this,e),t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&$Oe(t.signal,this)),Tf.call(this,t),FS.construct(this,()=>{let n=this._writableState;n.writing||gb(this,n),Ib(this,n)})}mX(bt,HOe,{__proto__:null,value:function(t){return AX(this,t)?!0:this!==bt?!1:t&&t._writableState instanceof Rf}});bt.prototype.pipe=function(){Oc(this,new qOe)};function NX(t,e,n,r){let i=t._writableState;if(typeof n=="function")r=n,n=i.defaultEncoding;else{if(!n)n=i.defaultEncoding;else if(n!=="buffer"&&!MS.isEncoding(n))throw new _X(n);typeof r!="function"&&(r=Ab)}if(e===null)throw new zOe;if(!i.objectMode)if(typeof e=="string")i.decodeStrings!==!1&&(e=MS.from(e,n),n="buffer");else if(e instanceof MS)n="buffer";else if(Tf._isUint8Array(e))e=Tf._uint8ArrayToBuffer(e),n="buffer";else throw new YOe("chunk",["string","Buffer","Uint8Array"],e);let s;return i.ending?s=new jOe:i.destroyed&&(s=new Sf("write")),s?(La.nextTick(r,s),Oc(t,s,!0),s):(i.pendingcb++,KOe(t,i,e,n,r))}bt.prototype.write=function(t,e,n){return NX(this,t,e,n)===!0};bt.prototype.cork=function(){this._writableState.corked++};bt.prototype.uncork=function(){let t=this._writableState;t.corked&&(t.corked--,t.writing||gb(this,t))};bt.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=BOe(e)),!MS.isEncoding(e))throw new _X(e);return this._writableState.defaultEncoding=e,this};function KOe(t,e,n,r,i){let s=e.objectMode?1:n.length;e.length+=s;let o=e.length<e.highWaterMark;return o||(e.needDrain=!0),e.writing||e.corked||e.errored||!e.constructed?(e.buffered.push({chunk:n,encoding:r,callback:i}),e.allBuffers&&r!=="buffer"&&(e.allBuffers=!1),e.allNoop&&i!==Ab&&(e.allNoop=!1)):(e.writelen=s,e.writecb=i,e.writing=!0,e.sync=!0,t._write(n,r,e.onwrite),e.sync=!1),o&&!e.errored&&!e.destroyed}function TX(t,e,n,r,i,s,o){e.writelen=r,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new Sf("write")):n?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function SX(t,e,n,r){--e.pendingcb,r(n),mb(e),Oc(t,n)}function JOe(t,e){let n=t._writableState,r=n.sync,i=n.writecb;if(typeof i!="function"){Oc(t,new IX);return}n.writing=!1,n.writecb=null,n.length-=n.writelen,n.writelen=0,e?(e.stack,n.errored||(n.errored=e),t._readableState&&!t._readableState.errored&&(t._readableState.errored=e),r?La.nextTick(SX,t,n,e,i):SX(t,n,e,i)):(n.buffered.length>n.bufferedIndex&&gb(t,n),r?n.afterWriteTickInfo!==null&&n.afterWriteTickInfo.cb===i?n.afterWriteTickInfo.count++:(n.afterWriteTickInfo={count:1,cb:i,stream:t,state:n},La.nextTick(QOe,n.afterWriteTickInfo)):OX(t,n,1,i))}function QOe({stream:t,state:e,count:n,cb:r}){return e.afterWriteTickInfo=null,OX(t,e,n,r)}function OX(t,e,n,r){for(!e.ending&&!t.destroyed&&e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"));n-- >0;)e.pendingcb--,r();e.destroyed&&mb(e),Ib(t,e)}function mb(t){if(t.writing)return;for(let i=t.bufferedIndex;i<t.buffered.length;++i){var e;let{chunk:s,callback:o}=t.buffered[i],a=t.objectMode?1:s.length;t.length-=a,o((e=t.errored)!==null&&e!==void 0?e:new Sf("write"))}let n=t[Cc].splice(0);for(let i=0;i<n.length;i++){var r;n[i]((r=t.errored)!==null&&r!==void 0?r:new Sf("end"))}BS(t)}function gb(t,e){if(e.corked||e.bufferProcessing||e.destroyed||!e.constructed)return;let{buffered:n,bufferedIndex:r,objectMode:i}=e,s=n.length-r;if(!s)return;let o=r;if(e.bufferProcessing=!0,s>1&&t._writev){e.pendingcb-=s-1;let a=e.allNoop?Ab:c=>{for(let u=o;u<n.length;++u)n[u].callback(c)},l=e.allNoop&&o===0?n:RX(n,o);l.allBuffers=e.allBuffers,TX(t,e,!0,e.length,l,"",a),BS(e)}else{do{let{chunk:a,encoding:l,callback:c}=n[o];n[o++]=null;let u=i?1:a.length;TX(t,e,!1,u,a,l,c)}while(o<n.length&&!e.writing);o===n.length?BS(e):o>256?(n.splice(0,o),e.bufferedIndex=0):e.bufferedIndex=o}e.bufferProcessing=!1}bt.prototype._write=function(t,e,n){if(this._writev)this._writev([{chunk:t,encoding:e}],n);else throw new VOe("_write()")};bt.prototype._writev=null;bt.prototype.end=function(t,e,n){let r=this._writableState;typeof t=="function"?(n=t,t=null,e=null):typeof e=="function"&&(n=e,e=null);let i;if(t!=null){let s=NX(this,t,e);s instanceof MOe&&(i=s)}return r.corked&&(r.corked=1,this.uncork()),i||(!r.errored&&!r.ending?(r.ending=!0,Ib(this,r,!0),r.ended=!0):r.finished?i=new XOe("end"):r.destroyed&&(i=new Sf("end"))),typeof n=="function"&&(i||r.finished?La.nextTick(n,i):r[Cc].push(n)),this};function US(t){return t.ending&&!t.destroyed&&t.constructed&&t.length===0&&!t.errored&&t.buffered.length===0&&!t.finished&&!t.writing&&!t.errorEmitted&&!t.closeEmitted}function ZOe(t,e){let n=!1;function r(i){if(n){Oc(t,i??IX());return}if(n=!0,e.pendingcb--,i){let s=e[Cc].splice(0);for(let o=0;o<s.length;o++)s[o](i);Oc(t,i,e.sync)}else US(e)&&(e.prefinished=!0,t.emit("prefinish"),e.pendingcb++,La.nextTick(Rb,t,e))}e.sync=!0,e.pendingcb++;try{t._final(r)}catch(i){r(i)}e.sync=!1}function eCe(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.finalCalled=!0,ZOe(t,e)):(e.prefinished=!0,t.emit("prefinish")))}function Ib(t,e,n){US(e)&&(eCe(t,e),e.pendingcb===0&&(n?(e.pendingcb++,La.nextTick((r,i)=>{US(i)?Rb(r,i):i.pendingcb--},t,e)):US(e)&&(e.pendingcb++,Rb(t,e))))}function Rb(t,e){e.pendingcb--,e.finished=!0;let n=e[Cc].splice(0);for(let r=0;r<n.length;r++)n[r]();if(t.emit("finish"),e.autoDestroy){let r=t._readableState;(!r||r.autoDestroy&&(r.endEmitted||r.readable===!1))&&t.destroy()}}UOe(bt.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(t){this._writableState&&(this._writableState.destroyed=t)}},writable:{__proto__:null,get(){let t=this._writableState;return!!t&&t.writable!==!1&&!t.destroyed&&!t.errored&&!t.ending&&!t.ended},set(t){this._writableState&&(this._writableState.writable=!!t)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let t=this._writableState;return t?!t.destroyed&&!t.ending&&t.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var tCe=FS.destroy;bt.prototype.destroy=function(t,e){let n=this._writableState;return!n.destroyed&&(n.bufferedIndex<n.buffered.length||n[Cc].length)&&La.nextTick(mb,n),tCe.call(this,t,e),this};bt.prototype._undestroy=FS.undestroy;bt.prototype._destroy=function(t,e){e(t)};bt.prototype[GOe.captureRejectionSymbol]=function(t){this.destroy(t)};var Sb;function CX(){return Sb===void 0&&(Sb={}),Sb}bt.fromWeb=function(t,e){return CX().newStreamWritableFromWritableStream(t,e)};bt.toWeb=function(t){return CX().newWritableStreamFromStreamWritable(t)}});var kX=C((FHe,$X)=>{var _b=it(),nCe=require("buffer"),{isReadable:rCe,isWritable:iCe,isIterable:yX,isNodeStream:sCe,isReadableNodeStream:wX,isWritableNodeStream:LX,isDuplexNodeStream:oCe,isReadableStream:DX,isWritableStream:PX}=Fi(),xX=gs(),{AbortError:HX,codes:{ERR_INVALID_ARG_TYPE:aCe,ERR_INVALID_RETURN_VALUE:vX}}=jn(),{destroyer:yc}=ya(),lCe=Gi(),GX=pf(),cCe=HS(),{createDeferredPromise:MX}=or(),UX=lb(),BX=globalThis.Blob||nCe.Blob,uCe=typeof BX<"u"?function(e){return e instanceof BX}:function(e){return!1},dCe=globalThis.AbortController||kt().AbortController,{FunctionPrototypeCall:FX}=mt(),uo=class extends lCe{constructor(e){super(e),e?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),e?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};$X.exports=function t(e,n){if(oCe(e))return e;if(wX(e))return bc({readable:e});if(LX(e))return bc({writable:e});if(sCe(e))return bc({writable:!1,readable:!1});if(DX(e))return bc({readable:GX.fromWeb(e)});if(PX(e))return bc({writable:cCe.fromWeb(e)});if(typeof e=="function"){let{value:i,write:s,final:o,destroy:a}=fCe(e);if(yX(i))return UX(uo,i,{objectMode:!0,write:s,final:o,destroy:a});let l=i?.then;if(typeof l=="function"){let c,u=FX(l,i,d=>{if(d!=null)throw new vX("nully","body",d)},d=>{yc(c,d)});return c=new uo({objectMode:!0,readable:!1,write:s,final(d){o(async()=>{try{await u,_b.nextTick(d,null)}catch(E){_b.nextTick(d,E)}})},destroy:a})}throw new vX("Iterable, AsyncIterable or AsyncFunction",n,i)}if(uCe(e))return t(e.arrayBuffer());if(yX(e))return UX(uo,e,{objectMode:!0,writable:!1});if(DX(e?.readable)&&PX(e?.writable))return uo.fromWeb(e);if(typeof e?.writable=="object"||typeof e?.readable=="object"){let i=e!=null&&e.readable?wX(e?.readable)?e?.readable:t(e.readable):void 0,s=e!=null&&e.writable?LX(e?.writable)?e?.writable:t(e.writable):void 0;return bc({readable:i,writable:s})}let r=e?.then;if(typeof r=="function"){let i;return FX(r,e,s=>{s!=null&&i.push(s),i.push(null)},s=>{yc(i,s)}),i=new uo({objectMode:!0,writable:!1,read(){}})}throw new aCe(n,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],e)};function fCe(t){let{promise:e,resolve:n}=MX(),r=new dCe,i=r.signal;return{value:t((async function*(){for(;;){let o=e;e=null;let{chunk:a,done:l,cb:c}=await o;if(_b.nextTick(c),l)return;if(i.aborted)throw new HX(void 0,{cause:i.reason});({promise:e,resolve:n}=MX()),yield a}})(),{signal:i}),write(o,a,l){let c=n;n=null,c({chunk:o,done:!1,cb:l})},final(o){let a=n;n=null,a({done:!0,cb:o})},destroy(o,a){r.abort(),a(o)}}}function bc(t){let e=t.readable&&typeof t.readable.read!="function"?GX.wrap(t.readable):t.readable,n=t.writable,r=!!rCe(e),i=!!iCe(n),s,o,a,l,c;function u(d){let E=l;l=null,E?E(d):d&&c.destroy(d)}return c=new uo({readableObjectMode:!!(e!=null&&e.readableObjectMode),writableObjectMode:!!(n!=null&&n.writableObjectMode),readable:r,writable:i}),i&&(xX(n,d=>{i=!1,d&&yc(e,d),u(d)}),c._write=function(d,E,f){n.write(d,E)?f():s=f},c._final=function(d){n.end(),o=d},n.on("drain",function(){if(s){let d=s;s=null,d()}}),n.on("finish",function(){if(o){let d=o;o=null,d()}})),r&&(xX(e,d=>{r=!1,d&&yc(e,d),u(d)}),e.on("readable",function(){if(a){let d=a;a=null,d()}}),e.on("end",function(){c.push(null)}),c._read=function(){for(;;){let d=e.read();if(d===null){a=c._read;return}if(!c.push(d))return}}),c._destroy=function(d,E){!d&&l!==null&&(d=new HX),a=null,s=null,o=null,l===null?E(d):(l=E,yc(n,d),yc(e,d))},c}});var Gi=C((HHe,VX)=>{"use strict";var{ObjectDefineProperties:ECe,ObjectGetOwnPropertyDescriptor:Is,ObjectKeys:hCe,ObjectSetPrototypeOf:WX}=mt();VX.exports=ii;var Cb=pf(),kr=HS();WX(ii.prototype,Cb.prototype);WX(ii,Cb);{let t=hCe(kr.prototype);for(let e=0;e<t.length;e++){let n=t[e];ii.prototype[n]||(ii.prototype[n]=kr.prototype[n])}}function ii(t){if(!(this instanceof ii))return new ii(t);Cb.call(this,t),kr.call(this,t),t?(this.allowHalfOpen=t.allowHalfOpen!==!1,t.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),t.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}ECe(ii.prototype,{writable:{__proto__:null,...Is(kr.prototype,"writable")},writableHighWaterMark:{__proto__:null,...Is(kr.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...Is(kr.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...Is(kr.prototype,"writableBuffer")},writableLength:{__proto__:null,...Is(kr.prototype,"writableLength")},writableFinished:{__proto__:null,...Is(kr.prototype,"writableFinished")},writableCorked:{__proto__:null,...Is(kr.prototype,"writableCorked")},writableEnded:{__proto__:null,...Is(kr.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...Is(kr.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(t){this._readableState&&this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}});var Nb;function YX(){return Nb===void 0&&(Nb={}),Nb}ii.fromWeb=function(t,e){return YX().newStreamDuplexFromReadableWritablePair(t,e)};ii.toWeb=function(t){return YX().newReadableWritablePairFromDuplex(t)};var Ob;ii.from=function(t){return Ob||(Ob=kX()),Ob(t,"body")}});var wb=C((GHe,XX)=>{"use strict";var{ObjectSetPrototypeOf:qX,Symbol:pCe}=mt();XX.exports=_s;var{ERR_METHOD_NOT_IMPLEMENTED:TCe}=jn().codes,yb=Gi(),{getHighWaterMark:SCe}=Ef();qX(_s.prototype,yb.prototype);qX(_s,yb);var Af=pCe("kCallback");function _s(t){if(!(this instanceof _s))return new _s(t);let e=t?SCe(this,t,"readableHighWaterMark",!0):null;e===0&&(t={...t,highWaterMark:null,readableHighWaterMark:e,writableHighWaterMark:t.writableHighWaterMark||0}),yb.call(this,t),this._readableState.sync=!1,this[Af]=null,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",RCe)}function bb(t){typeof this._flush=="function"&&!this.destroyed?this._flush((e,n)=>{if(e){t?t(e):this.destroy(e);return}n!=null&&this.push(n),this.push(null),t&&t()}):(this.push(null),t&&t())}function RCe(){this._final!==bb&&bb.call(this)}_s.prototype._final=bb;_s.prototype._transform=function(t,e,n){throw new TCe("_transform()")};_s.prototype._write=function(t,e,n){let r=this._readableState,i=this._writableState,s=r.length;this._transform(t,e,(o,a)=>{if(o){n(o);return}a!=null&&this.push(a),i.ended||s===r.length||r.length<r.highWaterMark?n():this[Af]=n})};_s.prototype._read=function(){if(this[Af]){let t=this[Af];this[Af]=null,t()}}});var Db=C(($He,jX)=>{"use strict";var{ObjectSetPrototypeOf:zX}=mt();jX.exports=wc;var Lb=wb();zX(wc.prototype,Lb.prototype);zX(wc,Lb);function wc(t){if(!(this instanceof wc))return new wc(t);Lb.call(this,t)}wc.prototype._transform=function(t,e,n){n(null,t)}});var WS=C((kHe,ez)=>{var mf=it(),{ArrayIsArray:ACe,Promise:mCe,SymbolAsyncIterator:gCe,SymbolDispose:ICe}=mt(),kS=gs(),{once:_Ce}=or(),NCe=ya(),KX=Gi(),{aggregateTwoErrors:OCe,codes:{ERR_INVALID_ARG_TYPE:Gb,ERR_INVALID_RETURN_VALUE:Pb,ERR_MISSING_ARGS:CCe,ERR_STREAM_DESTROYED:bCe,ERR_STREAM_PREMATURE_CLOSE:yCe},AbortError:wCe}=jn(),{validateFunction:LCe,validateAbortSignal:DCe}=mc(),{isIterable:Da,isReadable:xb,isReadableNodeStream:$S,isNodeStream:JX,isTransformStream:Lc,isWebStream:PCe,isReadableStream:vb,isReadableFinished:xCe}=Fi(),vCe=globalThis.AbortController||kt().AbortController,Mb,Ub,Bb;function QX(t,e,n){let r=!1;t.on("close",()=>{r=!0});let i=kS(t,{readable:e,writable:n},s=>{r=!s});return{destroy:s=>{r||(r=!0,NCe.destroyer(t,s||new bCe("pipe")))},cleanup:i}}function MCe(t){return LCe(t[t.length-1],"streams[stream.length - 1]"),t.pop()}function Fb(t){if(Da(t))return t;if($S(t))return UCe(t);throw new Gb("val",["Readable","Iterable","AsyncIterable"],t)}async function*UCe(t){Ub||(Ub=pf()),yield*Ub.prototype[gCe].call(t)}async function GS(t,e,n,{end:r}){let i,s=null,o=c=>{if(c&&(i=c),s){let u=s;s=null,u()}},a=()=>new mCe((c,u)=>{i?u(i):s=()=>{i?u(i):c()}});e.on("drain",o);let l=kS(e,{readable:!1},o);try{e.writableNeedDrain&&await a();for await(let c of t)e.write(c)||await a();r&&(e.end(),await a()),n()}catch(c){n(i!==c?OCe(i,c):c)}finally{l(),e.off("drain",o)}}async function Hb(t,e,n,{end:r}){Lc(e)&&(e=e.writable);let i=e.getWriter();try{for await(let s of t)await i.ready,i.write(s).catch(()=>{});await i.ready,r&&await i.close(),n()}catch(s){try{await i.abort(s),n(s)}catch(o){n(o)}}}function BCe(...t){return ZX(t,_Ce(MCe(t)))}function ZX(t,e,n){if(t.length===1&&ACe(t[0])&&(t=t[0]),t.length<2)throw new CCe("streams");let r=new vCe,i=r.signal,s=n?.signal,o=[];DCe(s,"options.signal");function a(){p(new wCe)}Bb=Bb||or().addAbortListener;let l;s&&(l=Bb(s,a));let c,u,d=[],E=0;function f(R){p(R,--E===0)}function p(R,m){var N;if(R&&(!c||c.code==="ERR_STREAM_PREMATURE_CLOSE")&&(c=R),!(!c&&!m)){for(;d.length;)d.shift()(c);(N=l)===null||N===void 0||N[ICe](),r.abort(),m&&(c||o.forEach(L=>L()),mf.nextTick(e,c,u))}}let h;for(let R=0;R<t.length;R++){let m=t[R],N=R<t.length-1,L=R>0,I=N||n?.end!==!1,D=R===t.length-1;if(JX(m)){let g=function(w){w&&w.name!=="AbortError"&&w.code!=="ERR_STREAM_PREMATURE_CLOSE"&&f(w)};var A=g;if(I){let{destroy:w,cleanup:x}=QX(m,N,L);d.push(w),xb(m)&&D&&o.push(x)}m.on("error",g),xb(m)&&D&&o.push(()=>{m.removeListener("error",g)})}if(R===0)if(typeof m=="function"){if(h=m({signal:i}),!Da(h))throw new Pb("Iterable, AsyncIterable or Stream","source",h)}else Da(m)||$S(m)||Lc(m)?h=m:h=KX.from(m);else if(typeof m=="function"){if(Lc(h)){var T;h=Fb((T=h)===null||T===void 0?void 0:T.readable)}else h=Fb(h);if(h=m(h,{signal:i}),N){if(!Da(h,!0))throw new Pb("AsyncIterable",`transform[${R-1}]`,h)}else{var S;Mb||(Mb=Db());let g=new Mb({objectMode:!0}),w=(S=h)===null||S===void 0?void 0:S.then;if(typeof w=="function")E++,w.call(h,H=>{u=H,H!=null&&g.write(H),I&&g.end(),mf.nextTick(f)},H=>{g.destroy(H),mf.nextTick(f,H)});else if(Da(h,!0))E++,GS(h,g,f,{end:I});else if(vb(h)||Lc(h)){let H=h.readable||h;E++,GS(H,g,f,{end:I})}else throw new Pb("AsyncIterable or Promise","destination",h);h=g;let{destroy:x,cleanup:U}=QX(h,!1,!0);d.push(x),D&&o.push(U)}}else if(JX(m)){if($S(h)){E+=2;let g=FCe(h,m,f,{end:I});xb(m)&&D&&o.push(g)}else if(Lc(h)||vb(h)){let g=h.readable||h;E++,GS(g,m,f,{end:I})}else if(Da(h))E++,GS(h,m,f,{end:I});else throw new Gb("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],h);h=m}else if(PCe(m)){if($S(h))E++,Hb(Fb(h),m,f,{end:I});else if(vb(h)||Da(h))E++,Hb(h,m,f,{end:I});else if(Lc(h))E++,Hb(h.readable,m,f,{end:I});else throw new Gb("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],h);h=m}else h=KX.from(m)}return(i!=null&&i.aborted||s!=null&&s.aborted)&&mf.nextTick(a),h}function FCe(t,e,n,{end:r}){let i=!1;if(e.on("close",()=>{i||n(new yCe)}),t.pipe(e,{end:!1}),r){let o=function(){i=!0,e.end()};var s=o;xCe(t)?mf.nextTick(o):t.once("end",o)}else n();return kS(t,{readable:!0,writable:!1},o=>{let a=t._readableState;o&&o.code==="ERR_STREAM_PREMATURE_CLOSE"&&a&&a.ended&&!a.errored&&!a.errorEmitted?t.once("end",n).once("error",n):n(o)}),kS(e,{readable:!1,writable:!0},n)}ez.exports={pipelineImpl:ZX,pipeline:BCe}});var kb=C((WHe,oz)=>{"use strict";var{pipeline:HCe}=WS(),YS=Gi(),{destroyer:GCe}=ya(),{isNodeStream:VS,isReadable:tz,isWritable:nz,isWebStream:$b,isTransformStream:Pa,isWritableStream:rz,isReadableStream:iz}=Fi(),{AbortError:$Ce,codes:{ERR_INVALID_ARG_VALUE:sz,ERR_MISSING_ARGS:kCe}}=jn(),WCe=gs();oz.exports=function(...e){if(e.length===0)throw new kCe("streams");if(e.length===1)return YS.from(e[0]);let n=[...e];if(typeof e[0]=="function"&&(e[0]=YS.from(e[0])),typeof e[e.length-1]=="function"){let f=e.length-1;e[f]=YS.from(e[f])}for(let f=0;f<e.length;++f)if(!(!VS(e[f])&&!$b(e[f]))){if(f<e.length-1&&!(tz(e[f])||iz(e[f])||Pa(e[f])))throw new sz(`streams[${f}]`,n[f],"must be readable");if(f>0&&!(nz(e[f])||rz(e[f])||Pa(e[f])))throw new sz(`streams[${f}]`,n[f],"must be writable")}let r,i,s,o,a;function l(f){let p=o;o=null,p?p(f):f?a.destroy(f):!E&&!d&&a.destroy()}let c=e[0],u=HCe(e,l),d=!!(nz(c)||rz(c)||Pa(c)),E=!!(tz(u)||iz(u)||Pa(u));if(a=new YS({writableObjectMode:!!(c!=null&&c.writableObjectMode),readableObjectMode:!!(u!=null&&u.readableObjectMode),writable:d,readable:E}),d){if(VS(c))a._write=function(p,h,T){c.write(p,h)?T():r=T},a._final=function(p){c.end(),i=p},c.on("drain",function(){if(r){let p=r;r=null,p()}});else if($b(c)){let h=(Pa(c)?c.writable:c).getWriter();a._write=async function(T,S,A){try{await h.ready,h.write(T).catch(()=>{}),A()}catch(R){A(R)}},a._final=async function(T){try{await h.ready,h.close().catch(()=>{}),i=T}catch(S){T(S)}}}let f=Pa(u)?u.readable:u;WCe(f,()=>{if(i){let p=i;i=null,p()}})}if(E){if(VS(u))u.on("readable",function(){if(s){let f=s;s=null,f()}}),u.on("end",function(){a.push(null)}),a._read=function(){for(;;){let f=u.read();if(f===null){s=a._read;return}if(!a.push(f))return}};else if($b(u)){let p=(Pa(u)?u.readable:u).getReader();a._read=async function(){for(;;)try{let{value:h,done:T}=await p.read();if(!a.push(h))return;if(T){a.push(null);return}}catch{return}}}}return a._destroy=function(f,p){!f&&o!==null&&(f=new $Ce),s=null,r=null,i=null,o===null?p(f):(o=p,VS(u)&&GCe(u,f))},a}});var Tz=C((YHe,Vb)=>{"use strict";var YCe=globalThis.AbortController||kt().AbortController,{codes:{ERR_INVALID_ARG_VALUE:VCe,ERR_INVALID_ARG_TYPE:gf,ERR_MISSING_ARGS:qCe,ERR_OUT_OF_RANGE:XCe},AbortError:$i}=jn(),{validateAbortSignal:xa,validateInteger:az,validateObject:va}=mc(),zCe=mt().Symbol("kWeak"),jCe=mt().Symbol("kResistStopPropagation"),{finished:KCe}=gs(),JCe=kb(),{addAbortSignalNoValidate:QCe}=ff(),{isWritable:ZCe,isNodeStream:ebe}=Fi(),{deprecate:tbe}=or(),{ArrayPrototypePush:nbe,Boolean:rbe,MathFloor:lz,Number:ibe,NumberIsNaN:sbe,Promise:cz,PromiseReject:uz,PromiseResolve:obe,PromisePrototypeThen:dz,Symbol:Ez}=mt(),qS=Ez("kEmpty"),fz=Ez("kEof");function abe(t,e){if(e!=null&&va(e,"options"),e?.signal!=null&&xa(e.signal,"options.signal"),ebe(t)&&!ZCe(t))throw new VCe("stream",t,"must be writable");let n=JCe(this,t);return e!=null&&e.signal&&QCe(e.signal,n),n}function XS(t,e){if(typeof t!="function")throw new gf("fn",["Function","AsyncFunction"],t);e!=null&&va(e,"options"),e?.signal!=null&&xa(e.signal,"options.signal");let n=1;e?.concurrency!=null&&(n=lz(e.concurrency));let r=n-1;return e?.highWaterMark!=null&&(r=lz(e.highWaterMark)),az(n,"options.concurrency",1),az(r,"options.highWaterMark",0),r+=n,async function*(){let s=or().AbortSignalAny([e?.signal].filter(rbe)),o=this,a=[],l={signal:s},c,u,d=!1,E=0;function f(){d=!0,p()}function p(){E-=1,h()}function h(){u&&!d&&E<n&&a.length<r&&(u(),u=null)}async function T(){try{for await(let S of o){if(d)return;if(s.aborted)throw new $i;try{if(S=t(S,l),S===qS)continue;S=obe(S)}catch(A){S=uz(A)}E+=1,dz(S,p,f),a.push(S),c&&(c(),c=null),!d&&(a.length>=r||E>=n)&&await new cz(A=>{u=A})}a.push(fz)}catch(S){let A=uz(S);dz(A,p,f),a.push(A)}finally{d=!0,c&&(c(),c=null)}}T();try{for(;;){for(;a.length>0;){let S=await a[0];if(S===fz)return;if(s.aborted)throw new $i;S!==qS&&(yield S),a.shift(),h()}await new cz(S=>{c=S})}}finally{d=!0,u&&(u(),u=null)}}.call(this)}function lbe(t=void 0){return t!=null&&va(t,"options"),t?.signal!=null&&xa(t.signal,"options.signal"),async function*(){let n=0;for await(let i of this){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new $i({cause:t.signal.reason});yield[n++,i]}}.call(this)}async function hz(t,e=void 0){for await(let n of Yb.call(this,t,e))return!0;return!1}async function cbe(t,e=void 0){if(typeof t!="function")throw new gf("fn",["Function","AsyncFunction"],t);return!await hz.call(this,async(...n)=>!await t(...n),e)}async function ube(t,e){for await(let n of Yb.call(this,t,e))return n}async function dbe(t,e){if(typeof t!="function")throw new gf("fn",["Function","AsyncFunction"],t);async function n(r,i){return await t(r,i),qS}for await(let r of XS.call(this,n,e));}function Yb(t,e){if(typeof t!="function")throw new gf("fn",["Function","AsyncFunction"],t);async function n(r,i){return await t(r,i)?r:qS}return XS.call(this,n,e)}var Wb=class extends qCe{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function fbe(t,e,n){var r;if(typeof t!="function")throw new gf("reducer",["Function","AsyncFunction"],t);n!=null&&va(n,"options"),n?.signal!=null&&xa(n.signal,"options.signal");let i=arguments.length>1;if(n!=null&&(r=n.signal)!==null&&r!==void 0&&r.aborted){let c=new $i(void 0,{cause:n.signal.reason});throw this.once("error",()=>{}),await KCe(this.destroy(c)),c}let s=new YCe,o=s.signal;if(n!=null&&n.signal){let c={once:!0,[zCe]:this,[jCe]:!0};n.signal.addEventListener("abort",()=>s.abort(),c)}let a=!1;try{for await(let c of this){var l;if(a=!0,n!=null&&(l=n.signal)!==null&&l!==void 0&&l.aborted)throw new $i;i?e=await t(e,c,{signal:o}):(e=c,i=!0)}if(!a&&!i)throw new Wb}finally{s.abort()}return e}async function Ebe(t){t!=null&&va(t,"options"),t?.signal!=null&&xa(t.signal,"options.signal");let e=[];for await(let r of this){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new $i(void 0,{cause:t.signal.reason});nbe(e,r)}return e}function hbe(t,e){let n=XS.call(this,t,e);return async function*(){for await(let i of n)yield*i}.call(this)}function pz(t){if(t=ibe(t),sbe(t))return 0;if(t<0)throw new XCe("number",">= 0",t);return t}function pbe(t,e=void 0){return e!=null&&va(e,"options"),e?.signal!=null&&xa(e.signal,"options.signal"),t=pz(t),async function*(){var r;if(e!=null&&(r=e.signal)!==null&&r!==void 0&&r.aborted)throw new $i;for await(let s of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new $i;t--<=0&&(yield s)}}.call(this)}function Tbe(t,e=void 0){return e!=null&&va(e,"options"),e?.signal!=null&&xa(e.signal,"options.signal"),t=pz(t),async function*(){var r;if(e!=null&&(r=e.signal)!==null&&r!==void 0&&r.aborted)throw new $i;for await(let s of this){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new $i;if(t-- >0&&(yield s),t<=0)return}}.call(this)}Vb.exports.streamReturningOperators={asIndexedPairs:tbe(lbe,"readable.asIndexedPairs will be removed in a future version."),drop:pbe,filter:Yb,flatMap:hbe,map:XS,take:Tbe,compose:abe};Vb.exports.promiseReturningOperators={every:cbe,forEach:dbe,reduce:fbe,toArray:Ebe,some:hz,find:ube}});var qb=C((VHe,Sz)=>{"use strict";var{ArrayPrototypePop:Sbe,Promise:Rbe}=mt(),{isIterable:Abe,isNodeStream:mbe,isWebStream:gbe}=Fi(),{pipelineImpl:Ibe}=WS(),{finished:_be}=gs();Xb();function Nbe(...t){return new Rbe((e,n)=>{let r,i,s=t[t.length-1];if(s&&typeof s=="object"&&!mbe(s)&&!Abe(s)&&!gbe(s)){let o=Sbe(t);r=o.signal,i=o.end}Ibe(t,(o,a)=>{o?n(o):e(a)},{signal:r,end:i})})}Sz.exports={finished:_be,pipeline:Nbe}});var Xb=C((qHe,Cz)=>{"use strict";var{Buffer:Obe}=require("buffer"),{ObjectDefineProperty:Ns,ObjectKeys:mz,ReflectApply:gz}=mt(),{promisify:{custom:Iz}}=or(),{streamReturningOperators:Rz,promiseReturningOperators:Az}=Tz(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:_z}}=jn(),Cbe=kb(),{setDefaultHighWaterMark:bbe,getDefaultHighWaterMark:ybe}=Ef(),{pipeline:Nz}=WS(),{destroyer:wbe}=ya(),Oz=gs(),zb=qb(),If=Fi(),pt=Cz.exports=bS().Stream;pt.isDestroyed=If.isDestroyed;pt.isDisturbed=If.isDisturbed;pt.isErrored=If.isErrored;pt.isReadable=If.isReadable;pt.isWritable=If.isWritable;pt.Readable=pf();for(let t of mz(Rz)){let n=function(...r){if(new.target)throw _z();return pt.Readable.from(gz(e,this,r))},e=Rz[t];Ns(n,"name",{__proto__:null,value:e.name}),Ns(n,"length",{__proto__:null,value:e.length}),Ns(pt.Readable.prototype,t,{__proto__:null,value:n,enumerable:!1,configurable:!0,writable:!0})}for(let t of mz(Az)){let n=function(...r){if(new.target)throw _z();return gz(e,this,r)},e=Az[t];Ns(n,"name",{__proto__:null,value:e.name}),Ns(n,"length",{__proto__:null,value:e.length}),Ns(pt.Readable.prototype,t,{__proto__:null,value:n,enumerable:!1,configurable:!0,writable:!0})}pt.Writable=HS();pt.Duplex=Gi();pt.Transform=wb();pt.PassThrough=Db();pt.pipeline=Nz;var{addAbortSignal:Lbe}=ff();pt.addAbortSignal=Lbe;pt.finished=Oz;pt.destroy=wbe;pt.compose=Cbe;pt.setDefaultHighWaterMark=bbe;pt.getDefaultHighWaterMark=ybe;Ns(pt,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return zb}});Ns(Nz,Iz,{__proto__:null,enumerable:!0,get(){return zb.pipeline}});Ns(Oz,Iz,{__proto__:null,enumerable:!0,get(){return zb.finished}});pt.Stream=pt;pt._isUint8Array=function(e){return e instanceof Uint8Array};pt._uint8ArrayToBuffer=function(e){return Obe.from(e.buffer,e.byteOffset,e.byteLength)}});var bz=C((XHe,Fe)=>{"use strict";var an=require("stream");if(an&&process.env.READABLE_STREAM==="disable"){let t=an.promises;Fe.exports._uint8ArrayToBuffer=an._uint8ArrayToBuffer,Fe.exports._isUint8Array=an._isUint8Array,Fe.exports.isDisturbed=an.isDisturbed,Fe.exports.isErrored=an.isErrored,Fe.exports.isReadable=an.isReadable,Fe.exports.Readable=an.Readable,Fe.exports.Writable=an.Writable,Fe.exports.Duplex=an.Duplex,Fe.exports.Transform=an.Transform,Fe.exports.PassThrough=an.PassThrough,Fe.exports.addAbortSignal=an.addAbortSignal,Fe.exports.finished=an.finished,Fe.exports.destroy=an.destroy,Fe.exports.pipeline=an.pipeline,Fe.exports.compose=an.compose,Object.defineProperty(an,"promises",{configurable:!0,enumerable:!0,get(){return t}}),Fe.exports.Stream=an.Stream}else{let t=Xb(),e=qb(),n=t.Readable.destroy;Fe.exports=t.Readable,Fe.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,Fe.exports._isUint8Array=t._isUint8Array,Fe.exports.isDisturbed=t.isDisturbed,Fe.exports.isErrored=t.isErrored,Fe.exports.isReadable=t.isReadable,Fe.exports.Readable=t.Readable,Fe.exports.Writable=t.Writable,Fe.exports.Duplex=t.Duplex,Fe.exports.Transform=t.Transform,Fe.exports.PassThrough=t.PassThrough,Fe.exports.addAbortSignal=t.addAbortSignal,Fe.exports.finished=t.finished,Fe.exports.destroy=t.destroy,Fe.exports.destroy=n,Fe.exports.pipeline=t.pipeline,Fe.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return e}}),Fe.exports.Stream=t.Stream}Fe.exports.default=Fe.exports});var wz=C((zHe,yz)=>{"use strict";var{Transform:Dbe}=bz(),Pbe=RS(),jb=class extends Dbe{constructor(e){super(e),this.checksum=Buffer.allocUnsafe(4),this.checksum.writeInt32BE(0,0),this.rawSize=0}_transform(e,n,r){e&&(this.checksum=Pbe.buf(e,this.checksum)>>>0,this.rawSize+=e.length),r(null,e)}digest(e){let n=Buffer.allocUnsafe(4);return n.writeUInt32BE(this.checksum>>>0,0),e?n.toString(e):n}hex(){return this.digest("hex").toUpperCase()}size(){return this.rawSize}};yz.exports=jb});var Dz=C((jHe,Lz)=>{"use strict";var{DeflateRaw:xbe}=require("zlib"),vbe=RS(),Kb=class extends xbe{constructor(e){super(e),this.checksum=Buffer.allocUnsafe(4),this.checksum.writeInt32BE(0,0),this.rawSize=0,this.compressedSize=0}push(e,n){return e&&(this.compressedSize+=e.length),super.push(e,n)}_transform(e,n,r){e&&(this.checksum=vbe.buf(e,this.checksum)>>>0,this.rawSize+=e.length),super._transform(e,n,r)}digest(e){let n=Buffer.allocUnsafe(4);return n.writeUInt32BE(this.checksum>>>0,0),e?n.toString(e):n}hex(){return this.digest("hex").toUpperCase()}size(e=!1){return e?this.compressedSize:this.rawSize}};Lz.exports=Kb});var Jb=C((KHe,Pz)=>{"use strict";Pz.exports={CRC32Stream:wz(),DeflateCRC32Stream:Dz()}});var Mz=C((eGe,vz)=>{var Mbe=require("util").inherits,Ube=RS(),{CRC32Stream:Bbe}=Jb(),{DeflateCRC32Stream:Fbe}=Jb(),xz=FC(),JHe=OO(),QHe=_O(),Ne=NO(),ZHe=UC(),he=kT(),mn=vz.exports=function(t){if(!(this instanceof mn))return new mn(t);t=this.options=this._defaults(t),xz.call(this,t),this._entry=null,this._entries=[],this._archive={centralLength:0,centralOffset:0,comment:"",finish:!1,finished:!1,processing:!1,forceZip64:t.forceZip64,forceLocalTime:t.forceLocalTime}};Mbe(mn,xz);mn.prototype._afterAppend=function(t){this._entries.push(t),t.getGeneralPurposeBit().usesDataDescriptor()&&this._writeDataDescriptor(t),this._archive.processing=!1,this._entry=null,this._archive.finish&&!this._archive.finished&&this._finish()};mn.prototype._appendBuffer=function(t,e,n){e.length===0&&t.setMethod(Ne.METHOD_STORED);var r=t.getMethod();if(r===Ne.METHOD_STORED&&(t.setSize(e.length),t.setCompressedSize(e.length),t.setCrc(Ube.buf(e)>>>0)),this._writeLocalFileHeader(t),r===Ne.METHOD_STORED){this.write(e),this._afterAppend(t),n(null,t);return}else if(r===Ne.METHOD_DEFLATED){this._smartStream(t,n).end(e);return}else{n(new Error("compression method "+r+" not implemented"));return}};mn.prototype._appendStream=function(t,e,n){t.getGeneralPurposeBit().useDataDescriptor(!0),t.setVersionNeededToExtract(Ne.MIN_VERSION_DATA_DESCRIPTOR),this._writeLocalFileHeader(t);var r=this._smartStream(t,n);e.once("error",function(i){r.emit("error",i),r.end()}),e.pipe(r)};mn.prototype._defaults=function(t){return typeof t!="object"&&(t={}),typeof t.zlib!="object"&&(t.zlib={}),typeof t.zlib.level!="number"&&(t.zlib.level=Ne.ZLIB_BEST_SPEED),t.forceZip64=!!t.forceZip64,t.forceLocalTime=!!t.forceLocalTime,t};mn.prototype._finish=function(){this._archive.centralOffset=this.offset,this._entries.forEach(function(t){this._writeCentralFileHeader(t)}.bind(this)),this._archive.centralLength=this.offset-this._archive.centralOffset,this.isZip64()&&this._writeCentralDirectoryZip64(),this._writeCentralDirectoryEnd(),this._archive.processing=!1,this._archive.finish=!0,this._archive.finished=!0,this.end()};mn.prototype._normalizeEntry=function(t){t.getMethod()===-1&&t.setMethod(Ne.METHOD_DEFLATED),t.getMethod()===Ne.METHOD_DEFLATED&&(t.getGeneralPurposeBit().useDataDescriptor(!0),t.setVersionNeededToExtract(Ne.MIN_VERSION_DATA_DESCRIPTOR)),t.getTime()===-1&&t.setTime(new Date,this._archive.forceLocalTime),t._offsets={file:0,data:0,contents:0}};mn.prototype._smartStream=function(t,e){var n=t.getMethod()===Ne.METHOD_DEFLATED,r=n?new Fbe(this.options.zlib):new Bbe,i=null;function s(){var o=r.digest().readUInt32BE(0);t.setCrc(o),t.setSize(r.size()),t.setCompressedSize(r.size(!0)),this._afterAppend(t),e(i,t)}return r.once("end",s.bind(this)),r.once("error",function(o){i=o}),r.pipe(this,{end:!1}),r};mn.prototype._writeCentralDirectoryEnd=function(){var t=this._entries.length,e=this._archive.centralLength,n=this._archive.centralOffset;this.isZip64()&&(t=Ne.ZIP64_MAGIC_SHORT,e=Ne.ZIP64_MAGIC,n=Ne.ZIP64_MAGIC),this.write(he.getLongBytes(Ne.SIG_EOCD)),this.write(Ne.SHORT_ZERO),this.write(Ne.SHORT_ZERO),this.write(he.getShortBytes(t)),this.write(he.getShortBytes(t)),this.write(he.getLongBytes(e)),this.write(he.getLongBytes(n));var r=this.getComment(),i=Buffer.byteLength(r);this.write(he.getShortBytes(i)),this.write(r)};mn.prototype._writeCentralDirectoryZip64=function(){this.write(he.getLongBytes(Ne.SIG_ZIP64_EOCD)),this.write(he.getEightBytes(44)),this.write(he.getShortBytes(Ne.MIN_VERSION_ZIP64)),this.write(he.getShortBytes(Ne.MIN_VERSION_ZIP64)),this.write(Ne.LONG_ZERO),this.write(Ne.LONG_ZERO),this.write(he.getEightBytes(this._entries.length)),this.write(he.getEightBytes(this._entries.length)),this.write(he.getEightBytes(this._archive.centralLength)),this.write(he.getEightBytes(this._archive.centralOffset)),this.write(he.getLongBytes(Ne.SIG_ZIP64_EOCD_LOC)),this.write(Ne.LONG_ZERO),this.write(he.getEightBytes(this._archive.centralOffset+this._archive.centralLength)),this.write(he.getLongBytes(1))};mn.prototype._writeCentralFileHeader=function(t){var e=t.getGeneralPurposeBit(),n=t.getMethod(),r=t._offsets.file,i=t.getSize(),s=t.getCompressedSize();if(t.isZip64()||r>Ne.ZIP64_MAGIC){i=Ne.ZIP64_MAGIC,s=Ne.ZIP64_MAGIC,r=Ne.ZIP64_MAGIC,t.setVersionNeededToExtract(Ne.MIN_VERSION_ZIP64);var o=Buffer.concat([he.getShortBytes(Ne.ZIP64_EXTRA_ID),he.getShortBytes(24),he.getEightBytes(t.getSize()),he.getEightBytes(t.getCompressedSize()),he.getEightBytes(t._offsets.file)],28);t.setExtra(o)}this.write(he.getLongBytes(Ne.SIG_CFH)),this.write(he.getShortBytes(t.getPlatform()<<8|Ne.VERSION_MADEBY)),this.write(he.getShortBytes(t.getVersionNeededToExtract())),this.write(e.encode()),this.write(he.getShortBytes(n)),this.write(he.getLongBytes(t.getTimeDos())),this.write(he.getLongBytes(t.getCrc())),this.write(he.getLongBytes(s)),this.write(he.getLongBytes(i));var a=t.getName(),l=t.getComment(),c=t.getCentralDirectoryExtra();e.usesUTF8ForNames()&&(a=Buffer.from(a),l=Buffer.from(l)),this.write(he.getShortBytes(a.length)),this.write(he.getShortBytes(c.length)),this.write(he.getShortBytes(l.length)),this.write(Ne.SHORT_ZERO),this.write(he.getShortBytes(t.getInternalAttributes())),this.write(he.getLongBytes(t.getExternalAttributes())),this.write(he.getLongBytes(r)),this.write(a),this.write(c),this.write(l)};mn.prototype._writeDataDescriptor=function(t){this.write(he.getLongBytes(Ne.SIG_DD)),this.write(he.getLongBytes(t.getCrc())),t.isZip64()?(this.write(he.getEightBytes(t.getCompressedSize())),this.write(he.getEightBytes(t.getSize()))):(this.write(he.getLongBytes(t.getCompressedSize())),this.write(he.getLongBytes(t.getSize())))};mn.prototype._writeLocalFileHeader=function(t){var e=t.getGeneralPurposeBit(),n=t.getMethod(),r=t.getName(),i=t.getLocalFileDataExtra();t.isZip64()&&(e.useDataDescriptor(!0),t.setVersionNeededToExtract(Ne.MIN_VERSION_ZIP64)),e.usesUTF8ForNames()&&(r=Buffer.from(r)),t._offsets.file=this.offset,this.write(he.getLongBytes(Ne.SIG_LFH)),this.write(he.getShortBytes(t.getVersionNeededToExtract())),this.write(e.encode()),this.write(he.getShortBytes(n)),this.write(he.getLongBytes(t.getTimeDos())),t._offsets.data=this.offset,e.usesDataDescriptor()?(this.write(Ne.LONG_ZERO),this.write(Ne.LONG_ZERO),this.write(Ne.LONG_ZERO)):(this.write(he.getLongBytes(t.getCrc())),this.write(he.getLongBytes(t.getCompressedSize())),this.write(he.getLongBytes(t.getSize()))),this.write(he.getShortBytes(r.length)),this.write(he.getShortBytes(i.length)),this.write(r),this.write(i),t._offsets.contents=this.offset};mn.prototype.getComment=function(t){return this._archive.comment!==null?this._archive.comment:""};mn.prototype.isZip64=function(){return this._archive.forceZip64||this._entries.length>Ne.ZIP64_MAGIC_SHORT||this._archive.centralLength>Ne.ZIP64_MAGIC||this._archive.centralOffset>Ne.ZIP64_MAGIC};mn.prototype.setComment=function(t){this._archive.comment=t}});var Qb=C((tGe,Uz)=>{Uz.exports={ArchiveEntry:$T(),ZipArchiveEntry:OO(),ArchiveOutputStream:FC(),ZipArchiveOutputStream:Mz()}});var Fz=C((nGe,Bz)=>{var Hbe=require("util").inherits,ey=Qb().ZipArchiveOutputStream,Gbe=Qb().ZipArchiveEntry,Zb=zl(),Dc=Bz.exports=function(t){if(!(this instanceof Dc))return new Dc(t);t=this.options=t||{},t.zlib=t.zlib||{},ey.call(this,t),typeof t.level=="number"&&t.level>=0&&(t.zlib.level=t.level,delete t.level),!t.forceZip64&&typeof t.zlib.level=="number"&&t.zlib.level===0&&(t.store=!0),t.namePrependSlash=t.namePrependSlash||!1,t.comment&&t.comment.length>0&&this.setComment(t.comment)};Hbe(Dc,ey);Dc.prototype._normalizeFileData=function(t){t=Zb.defaults(t,{type:"file",name:null,namePrependSlash:this.options.namePrependSlash,linkname:null,date:null,mode:null,store:this.options.store,comment:""});var e=t.type==="directory",n=t.type==="symlink";return t.name&&(t.name=Zb.sanitizePath(t.name),!n&&t.name.slice(-1)==="/"?(e=!0,t.type="directory"):e&&(t.name+="/")),(e||n)&&(t.store=!0),t.date=Zb.dateify(t.date),t};Dc.prototype.entry=function(t,e,n){if(typeof n!="function"&&(n=this._emitErrorCallback.bind(this)),e=this._normalizeFileData(e),e.type!=="file"&&e.type!=="directory"&&e.type!=="symlink"){n(new Error(e.type+" entries not currently supported"));return}if(typeof e.name!="string"||e.name.length===0){n(new Error("entry name must be a non-empty string value"));return}if(e.type==="symlink"&&typeof e.linkname!="string"){n(new Error("entry linkname must be a non-empty string value when type equals symlink"));return}var r=new Gbe(e.name);return r.setTime(e.date,this.options.forceLocalTime),e.namePrependSlash&&r.setName(e.name,!0),e.store&&r.setMethod(0),e.comment.length>0&&r.setComment(e.comment),e.type==="symlink"&&typeof e.mode!="number"&&(e.mode=40960),typeof e.mode=="number"&&(e.type==="symlink"&&(e.mode|=40960),r.setUnixMode(e.mode)),e.type==="symlink"&&typeof e.linkname=="string"&&(t=Buffer.from(e.linkname)),ey.prototype.entry.call(this,r,t,n)};Dc.prototype.finalize=function(){this.finish()}});var Gz=C((rGe,Hz)=>{var $be=Fz(),kbe=zl(),fo=function(t){if(!(this instanceof fo))return new fo(t);t=this.options=kbe.defaults(t,{comment:"",forceUTC:!1,namePrependSlash:!1,store:!1}),this.supports={directory:!0,symlink:!0},this.engine=new $be(t)};fo.prototype.append=function(t,e,n){this.engine.entry(t,e,n)};fo.prototype.finalize=function(){this.engine.finalize()};fo.prototype.on=function(){return this.engine.on.apply(this.engine,arguments)};fo.prototype.pipe=function(){return this.engine.pipe.apply(this.engine,arguments)};fo.prototype.unpipe=function(){return this.engine.unpipe.apply(this.engine,arguments)};Hz.exports=fo});var kz=C((iGe,$z)=>{$z.exports=require("events")});var Yz=C((oGe,Wz)=>{Wz.exports=class{constructor(e){if(!(e>0)||(e-1&e)!==0)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}clear(){this.top=this.btm=0,this.next=null,this.buffer.fill(void 0)}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){let e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}peek(){return this.buffer[this.btm]}isEmpty(){return this.buffer[this.btm]===void 0}}});var ty=C((lGe,qz)=>{var Vz=Yz();qz.exports=class{constructor(e){this.hwm=e||16,this.head=new Vz(this.hwm),this.tail=this.head,this.length=0}clear(){this.head=this.tail,this.head.clear(),this.length=0}push(e){if(this.length++,!this.head.push(e)){let n=this.head;this.head=n.next=new Vz(2*this.head.buffer.length),this.head.push(e)}}shift(){this.length!==0&&this.length--;let e=this.tail.shift();if(e===void 0&&this.tail.next){let n=this.tail.next;return this.tail.next=null,this.tail=n,this.tail.shift()}return e}peek(){let e=this.tail.peek();return e===void 0&&this.tail.next?this.tail.next.peek():e}isEmpty(){return this.length===0}}});var Pc=C((cGe,Xz)=>{function Wbe(t){return Buffer.isBuffer(t)||t instanceof Uint8Array}function Ybe(t){return Buffer.isEncoding(t)}function Vbe(t,e,n){return Buffer.alloc(t,e,n)}function qbe(t){return Buffer.allocUnsafe(t)}function Xbe(t){return Buffer.allocUnsafeSlow(t)}function zbe(t,e){return Buffer.byteLength(t,e)}function jbe(t,e){return Buffer.compare(t,e)}function Kbe(t,e){return Buffer.concat(t,e)}function Jbe(t,e,n,r,i){return ot(t).copy(e,n,r,i)}function Qbe(t,e){return ot(t).equals(e)}function Zbe(t,e,n,r,i){return ot(t).fill(e,n,r,i)}function eye(t,e,n){return Buffer.from(t,e,n)}function tye(t,e,n,r){return ot(t).includes(e,n,r)}function nye(t,e,n,r){return ot(t).indexOf(e,n,r)}function rye(t,e,n,r){return ot(t).lastIndexOf(e,n,r)}function iye(t){return ot(t).swap16()}function sye(t){return ot(t).swap32()}function oye(t){return ot(t).swap64()}function ot(t){return Buffer.isBuffer(t)?t:Buffer.from(t.buffer,t.byteOffset,t.byteLength)}function aye(t,e,n,r){return ot(t).toString(e,n,r)}function lye(t,e,n,r,i){return ot(t).write(e,n,r,i)}function cye(t,e){return ot(t).readDoubleBE(e)}function uye(t,e){return ot(t).readDoubleLE(e)}function dye(t,e){return ot(t).readFloatBE(e)}function fye(t,e){return ot(t).readFloatLE(e)}function Eye(t,e){return ot(t).readInt32BE(e)}function hye(t,e){return ot(t).readInt32LE(e)}function pye(t,e){return ot(t).readUInt32BE(e)}function Tye(t,e){return ot(t).readUInt32LE(e)}function Sye(t,e,n){return ot(t).writeDoubleBE(e,n)}function Rye(t,e,n){return ot(t).writeDoubleLE(e,n)}function Aye(t,e,n){return ot(t).writeFloatBE(e,n)}function mye(t,e,n){return ot(t).writeFloatLE(e,n)}function gye(t,e,n){return ot(t).writeInt32BE(e,n)}function Iye(t,e,n){return ot(t).writeInt32LE(e,n)}function _ye(t,e,n){return ot(t).writeUInt32BE(e,n)}function Nye(t,e,n){return ot(t).writeUInt32LE(e,n)}Xz.exports={isBuffer:Wbe,isEncoding:Ybe,alloc:Vbe,allocUnsafe:qbe,allocUnsafeSlow:Xbe,byteLength:zbe,compare:jbe,concat:Kbe,copy:Jbe,equals:Qbe,fill:Zbe,from:eye,includes:tye,indexOf:nye,lastIndexOf:rye,swap16:iye,swap32:sye,swap64:oye,toBuffer:ot,toString:aye,write:lye,readDoubleBE:cye,readDoubleLE:uye,readFloatBE:dye,readFloatLE:fye,readInt32BE:Eye,readInt32LE:hye,readUInt32BE:pye,readUInt32LE:Tye,writeDoubleBE:Sye,writeDoubleLE:Rye,writeFloatBE:Aye,writeFloatLE:mye,writeInt32BE:gye,writeInt32LE:Iye,writeUInt32BE:_ye,writeUInt32LE:Nye}});var jz=C((dGe,zz)=>{var Oye=Pc();zz.exports=class{constructor(e){this.encoding=e}get remaining(){return 0}decode(e){return Oye.toString(e,this.encoding)}flush(){return""}}});var Jz=C((EGe,Kz)=>{var Cye=Pc();Kz.exports=class{constructor(){this.codePoint=0,this.bytesSeen=0,this.bytesNeeded=0,this.lowerBoundary=128,this.upperBoundary=191}get remaining(){return this.bytesSeen}decode(e){if(this.bytesNeeded===0){let r=!0;for(let i=Math.max(0,e.byteLength-4),s=e.byteLength;i<s&&r;i++)r=e[i]<=127;if(r)return Cye.toString(e,"utf8")}let n="";for(let r=0,i=e.byteLength;r<i;r++){let s=e[r];if(this.bytesNeeded===0){s<=127?n+=String.fromCharCode(s):(this.bytesSeen=1,s>=194&&s<=223?(this.bytesNeeded=2,this.codePoint=s&31):s>=224&&s<=239?(s===224?this.lowerBoundary=160:s===237&&(this.upperBoundary=159),this.bytesNeeded=3,this.codePoint=s&15):s>=240&&s<=244?(s===240&&(this.lowerBoundary=144),s===244&&(this.upperBoundary=143),this.bytesNeeded=4,this.codePoint=s&7):n+="\uFFFD");continue}if(s<this.lowerBoundary||s>this.upperBoundary){this.codePoint=0,this.bytesNeeded=0,this.bytesSeen=0,this.lowerBoundary=128,this.upperBoundary=191,n+="\uFFFD";continue}this.lowerBoundary=128,this.upperBoundary=191,this.codePoint=this.codePoint<<6|s&63,this.bytesSeen++,this.bytesSeen===this.bytesNeeded&&(n+=String.fromCodePoint(this.codePoint),this.codePoint=0,this.bytesNeeded=0,this.bytesSeen=0)}return n}flush(){let e=this.bytesNeeded>0?"\uFFFD":"";return this.codePoint=0,this.bytesNeeded=0,this.bytesSeen=0,this.lowerBoundary=128,this.upperBoundary=191,e}}});var Zz=C((pGe,Qz)=>{var bye=jz(),yye=Jz();Qz.exports=class{constructor(e="utf8"){switch(this.encoding=wye(e),this.encoding){case"utf8":this.decoder=new yye;break;case"utf16le":case"base64":throw new Error("Unsupported encoding: "+this.encoding);default:this.decoder=new bye(this.encoding)}}get remaining(){return this.decoder.remaining}push(e){return typeof e=="string"?e:this.decoder.decode(e)}write(e){return this.push(e)}end(e){let n="";return e&&(n=this.push(e)),n+=this.decoder.flush(),n}};function wye(t){switch(t=t.toLowerCase(),t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:throw new Error("Unknown encoding: "+t)}}});var Sy=C((TGe,Ij)=>{var{EventEmitter:Lye}=kz(),ZS=new Error("Stream was destroyed"),ny=new Error("Premature close"),sj=ty(),Dye=Zz(),ry=typeof queueMicrotask>"u"?t=>global.process.nextTick(t):queueMicrotask,yt=(1<<29)-1,ki=1,uy=2,Ma=4,_f=8,oj=yt^ki,Pye=yt^uy,yf=16,xc=32,Uc=64,ho=128,wf=256,dy=512,Ua=1024,iy=2048,fy=4096,Ey=8192,si=16384,Eo=32768,eR=65536,Ba=131072,aj=wf|dy,xye=yf|eR,vye=Uc|yf,Mye=fy|ho,hy=wf|Ba,Uye=yt^yf,Bye=yt^Uc,Fye=yt^(Uc|eR),ej=yt^eR,Hye=yt^wf,Gye=yt^(ho|Ey),$ye=yt^Ua,tj=yt^aj,lj=yt^Eo,kye=yt^xc,cj=yt^Ba,Wye=yt^hy,Os=1<<18,Mc=2<<18,Lf=4<<18,Fa=8<<18,Df=16<<18,po=32<<18,sy=64<<18,vc=128<<18,py=256<<18,Ha=512<<18,tR=1024<<18,Yye=yt^(Os|py),uj=yt^Lf,Vye=yt^(Os|Ha),qye=yt^Df,Xye=yt^Fa,dj=yt^vc,zye=yt^Mc,fj=yt^tR,Nf=yf|Os,Ej=yt^Nf,Ty=si|po,Wi=Ma|_f|uy,Ar=Wi|ki,hj=Wi|Ty,jye=uj&Bye,nR=vc|Eo,Kye=nR&Ej,pj=Ar|Kye,Jye=Ar|Ua|si,nj=Ar|si|ho,Qye=Ar|Ua|ho,Zye=Ar|fy|ho|Ey,ewe=Ar|yf|Ua|si|eR|Ba,twe=Wi|Ua|si,nwe=xc|Ar|Eo|Uc,rwe=Eo|ki,iwe=Ar|Ha|po,swe=Fa|Df,Tj=Fa|Os,owe=Fa|Df|Ar|Os,rj=Ar|Os|Fa|tR,awe=Lf|Os,lwe=Os|py,cwe=Ar|Ha|Tj|po,uwe=Df|Wi|Ha|po,dwe=Mc|Ar|vc|Lf,fwe=Ha|po|Wi,zS=Symbol.asyncIterator||Symbol("asyncIterator"),jS=class{constructor(e,{highWaterMark:n=16384,map:r=null,mapWritable:i,byteLength:s,byteLengthWritable:o}={}){this.stream=e,this.queue=new sj,this.highWaterMark=n,this.buffered=0,this.error=null,this.pipeline=null,this.drains=null,this.byteLength=o||s||gj,this.map=i||r,this.afterWrite=pwe.bind(this),this.afterUpdateNextTick=Rwe.bind(this)}get ended(){return(this.stream._duplexState&po)!==0}push(e){return(this.stream._duplexState&fwe)!==0?!1:(this.map!==null&&(e=this.map(e)),this.buffered+=this.byteLength(e),this.queue.push(e),this.buffered<this.highWaterMark?(this.stream._duplexState|=Fa,!0):(this.stream._duplexState|=swe,!1))}shift(){let e=this.queue.shift();return this.buffered-=this.byteLength(e),this.buffered===0&&(this.stream._duplexState&=Xye),e}end(e){typeof e=="function"?this.stream.once("finish",e):e!=null&&this.push(e),this.stream._duplexState=(this.stream._duplexState|Ha)&uj}autoBatch(e,n){let r=[],i=this.stream;for(r.push(e);(i._duplexState&rj)===Tj;)r.push(i._writableState.shift());if((i._duplexState&Ar)!==0)return n(null);i._writev(r,n)}update(){let e=this.stream;e._duplexState|=Mc;do{for(;(e._duplexState&rj)===Fa;){let n=this.shift();e._duplexState|=lwe,e._write(n,this.afterWrite)}(e._duplexState&awe)===0&&this.updateNonPrimary()}while(this.continueUpdate()===!0);e._duplexState&=zye}updateNonPrimary(){let e=this.stream;if((e._duplexState&cwe)===Ha){e._duplexState=e._duplexState|Os,e._final(hwe.bind(this));return}if((e._duplexState&Wi)===Ma){(e._duplexState&nR)===0&&(e._duplexState|=Nf,e._destroy(Sj.bind(this)));return}(e._duplexState&pj)===ki&&(e._duplexState=(e._duplexState|Nf)&oj,e._open(Rj.bind(this)))}continueUpdate(){return(this.stream._duplexState&vc)===0?!1:(this.stream._duplexState&=dj,!0)}updateCallback(){(this.stream._duplexState&dwe)===Lf?this.update():this.updateNextTick()}updateNextTick(){(this.stream._duplexState&vc)===0&&(this.stream._duplexState|=vc,(this.stream._duplexState&Mc)===0&&ry(this.afterUpdateNextTick))}},oy=class{constructor(e,{highWaterMark:n=16384,map:r=null,mapReadable:i,byteLength:s,byteLengthReadable:o}={}){this.stream=e,this.queue=new sj,this.highWaterMark=n===0?1:n,this.buffered=0,this.readAhead=n>0,this.error=null,this.pipeline=null,this.byteLength=o||s||gj,this.map=i||r,this.pipeTo=null,this.afterRead=Twe.bind(this),this.afterUpdateNextTick=Swe.bind(this)}get ended(){return(this.stream._duplexState&si)!==0}pipe(e,n){if(this.pipeTo!==null)throw new Error("Can only pipe to one destination");if(typeof n!="function"&&(n=null),this.stream._duplexState|=dy,this.pipeTo=e,this.pipeline=new ly(this.stream,e,n),n&&this.stream.on("error",ij),bf(e))e._writableState.pipeline=this.pipeline,n&&e.on("error",ij),e.on("finish",this.pipeline.finished.bind(this.pipeline));else{let r=this.pipeline.done.bind(this.pipeline,e),i=this.pipeline.done.bind(this.pipeline,e,null);e.on("error",r),e.on("close",i),e.on("finish",this.pipeline.finished.bind(this.pipeline))}e.on("drain",Ewe.bind(this)),this.stream.emit("piping",e),e.emit("pipe",this.stream)}push(e){let n=this.stream;return e===null?(this.highWaterMark=0,n._duplexState=(n._duplexState|Ua)&Fye,!1):this.map!==null&&(e=this.map(e),e===null)?(n._duplexState&=ej,this.buffered<this.highWaterMark):(this.buffered+=this.byteLength(e),this.queue.push(e),n._duplexState=(n._duplexState|ho)&ej,this.buffered<this.highWaterMark)}shift(){let e=this.queue.shift();return this.buffered-=this.byteLength(e),this.buffered===0&&(this.stream._duplexState&=Gye),e}unshift(e){let n=[this.map!==null?this.map(e):e];for(;this.buffered>0;)n.push(this.shift());for(let r=0;r<n.length-1;r++){let i=n[r];this.buffered+=this.byteLength(i),this.queue.push(i)}this.push(n[n.length-1])}read(){let e=this.stream;if((e._duplexState&nj)===ho){let n=this.shift();return this.pipeTo!==null&&this.pipeTo.write(n)===!1&&(e._duplexState&=tj),(e._duplexState&iy)!==0&&e.emit("data",n),n}return this.readAhead===!1&&(e._duplexState|=Ba,this.updateNextTick()),null}drain(){let e=this.stream;for(;(e._duplexState&nj)===ho&&(e._duplexState&aj)!==0;){let n=this.shift();this.pipeTo!==null&&this.pipeTo.write(n)===!1&&(e._duplexState&=tj),(e._duplexState&iy)!==0&&e.emit("data",n)}}update(){let e=this.stream;e._duplexState|=xc;do{for(this.drain();this.buffered<this.highWaterMark&&(e._duplexState&ewe)===Ba;)e._duplexState|=xye,e._read(this.afterRead),this.drain();(e._duplexState&Zye)===Mye&&(e._duplexState|=Ey,e.emit("readable")),(e._duplexState&vye)===0&&this.updateNonPrimary()}while(this.continueUpdate()===!0);e._duplexState&=kye}updateNonPrimary(){let e=this.stream;if((e._duplexState&Qye)===Ua&&(e._duplexState=(e._duplexState|si)&$ye,e.emit("end"),(e._duplexState&hj)===Ty&&(e._duplexState|=Ma),this.pipeTo!==null&&this.pipeTo.end()),(e._duplexState&Wi)===Ma){(e._duplexState&nR)===0&&(e._duplexState|=Nf,e._destroy(Sj.bind(this)));return}(e._duplexState&pj)===ki&&(e._duplexState=(e._duplexState|Nf)&oj,e._open(Rj.bind(this)))}continueUpdate(){return(this.stream._duplexState&Eo)===0?!1:(this.stream._duplexState&=lj,!0)}updateCallback(){(this.stream._duplexState&nwe)===Uc?this.update():this.updateNextTick()}updateNextTickIfOpen(){(this.stream._duplexState&rwe)===0&&(this.stream._duplexState|=Eo,(this.stream._duplexState&xc)===0&&ry(this.afterUpdateNextTick))}updateNextTick(){(this.stream._duplexState&Eo)===0&&(this.stream._duplexState|=Eo,(this.stream._duplexState&xc)===0&&ry(this.afterUpdateNextTick))}},ay=class{constructor(e){this.data=null,this.afterTransform=mwe.bind(e),this.afterFinal=null}},ly=class{constructor(e,n,r){this.from=e,this.to=n,this.afterPipe=r,this.error=null,this.pipeToFinished=!1}finished(){this.pipeToFinished=!0}done(e,n){if(n&&(this.error=n),e===this.to&&(this.to=null,this.from!==null)){((this.from._duplexState&si)===0||!this.pipeToFinished)&&this.from.destroy(this.error||new Error("Writable stream closed prematurely"));return}if(e===this.from&&(this.from=null,this.to!==null)){(e._duplexState&si)===0&&this.to.destroy(this.error||new Error("Readable stream closed before ending"));return}this.afterPipe!==null&&this.afterPipe(this.error),this.to=this.from=this.afterPipe=null}};function Ewe(){this.stream._duplexState|=dy,this.updateCallback()}function hwe(t){let e=this.stream;t&&e.destroy(t),(e._duplexState&Wi)===0&&(e._duplexState|=po,e.emit("finish")),(e._duplexState&hj)===Ty&&(e._duplexState|=Ma),e._duplexState&=Vye,(e._duplexState&Mc)===0?this.update():this.updateNextTick()}function Sj(t){let e=this.stream;!t&&this.error!==ZS&&(t=this.error),t&&e.emit("error",t),e._duplexState|=_f,e.emit("close");let n=e._readableState,r=e._writableState;if(n!==null&&n.pipeline!==null&&n.pipeline.done(e,t),r!==null){for(;r.drains!==null&&r.drains.length>0;)r.drains.shift().resolve(!1);r.pipeline!==null&&r.pipeline.done(e,t)}}function pwe(t){let e=this.stream;t&&e.destroy(t),e._duplexState&=Yye,this.drains!==null&&Awe(this.drains),(e._duplexState&owe)===Df&&(e._duplexState&=qye,(e._duplexState&sy)===sy&&e.emit("drain")),this.updateCallback()}function Twe(t){t&&this.stream.destroy(t),this.stream._duplexState&=Uye,this.readAhead===!1&&(this.stream._duplexState&wf)===0&&(this.stream._duplexState&=cj),this.updateCallback()}function Swe(){(this.stream._duplexState&xc)===0&&(this.stream._duplexState&=lj,this.update())}function Rwe(){(this.stream._duplexState&Mc)===0&&(this.stream._duplexState&=dj,this.update())}function Awe(t){for(let e=0;e<t.length;e++)--t[e].writes===0&&(t.shift().resolve(!0),e--)}function Rj(t){let e=this.stream;t&&e.destroy(t),(e._duplexState&Ma)===0&&((e._duplexState&Jye)===0&&(e._duplexState|=Uc),(e._duplexState&iwe)===0&&(e._duplexState|=Lf),e.emit("open")),e._duplexState&=Ej,e._writableState!==null&&e._writableState.updateCallback(),e._readableState!==null&&e._readableState.updateCallback()}function mwe(t,e){e!=null&&this.push(e),this._writableState.afterWrite(t)}function gwe(t){this._readableState!==null&&(t==="data"&&(this._duplexState|=iy|hy,this._readableState.updateNextTick()),t==="readable"&&(this._duplexState|=fy,this._readableState.updateNextTick())),this._writableState!==null&&t==="drain"&&(this._duplexState|=sy,this._writableState.updateNextTick())}var Of=class extends Lye{constructor(e){super(),this._duplexState=0,this._readableState=null,this._writableState=null,e&&(e.open&&(this._open=e.open),e.destroy&&(this._destroy=e.destroy),e.predestroy&&(this._predestroy=e.predestroy),e.signal&&e.signal.addEventListener("abort",Dwe.bind(this))),this.on("newListener",gwe)}_open(e){e(null)}_destroy(e){e(null)}_predestroy(){}get readable(){return this._readableState!==null?!0:void 0}get writable(){return this._writableState!==null?!0:void 0}get destroyed(){return(this._duplexState&_f)!==0}get destroying(){return(this._duplexState&Wi)!==0}destroy(e){(this._duplexState&Wi)===0&&(e||(e=ZS),this._duplexState=(this._duplexState|Ma)&jye,this._readableState!==null&&(this._readableState.highWaterMark=0,this._readableState.error=e),this._writableState!==null&&(this._writableState.highWaterMark=0,this._writableState.error=e),this._duplexState|=uy,this._predestroy(),this._duplexState&=Pye,this._readableState!==null&&this._readableState.updateNextTick(),this._writableState!==null&&this._writableState.updateNextTick())}},KS=class t extends Of{constructor(e){super(e),this._duplexState|=ki|po|Ba,this._readableState=new oy(this,e),e&&(this._readableState.readAhead===!1&&(this._duplexState&=cj),e.read&&(this._read=e.read),e.eagerOpen&&this._readableState.updateNextTick(),e.encoding&&this.setEncoding(e.encoding))}setEncoding(e){let n=new Dye(e),r=this._readableState.map||Nwe;return this._readableState.map=i,this;function i(s){let o=n.push(s);return o===""&&(s.byteLength!==0||n.remaining>0)?null:r(o)}}_read(e){e(null)}pipe(e,n){return this._readableState.updateNextTick(),this._readableState.pipe(e,n),e}read(){return this._readableState.updateNextTick(),this._readableState.read()}push(e){return this._readableState.updateNextTickIfOpen(),this._readableState.push(e)}unshift(e){return this._readableState.updateNextTickIfOpen(),this._readableState.unshift(e)}resume(){return this._duplexState|=hy,this._readableState.updateNextTick(),this}pause(){return this._duplexState&=this._readableState.readAhead===!1?Wye:Hye,this}static _fromAsyncIterator(e,n){let r,i=new t({...n,read(o){e.next().then(s).then(o.bind(null,null)).catch(o)},predestroy(){r=e.return()},destroy(o){if(!r)return o(null);r.then(o.bind(null,null)).catch(o)}});return i;function s(o){o.done?i.push(null):i.push(o.value)}}static from(e,n){if(ywe(e))return e;if(e[zS])return this._fromAsyncIterator(e[zS](),n);Array.isArray(e)||(e=e===void 0?[]:[e]);let r=0;return new t({...n,read(i){this.push(r===e.length?null:e[r++]),i(null)}})}static isBackpressured(e){return(e._duplexState&twe)!==0||e._readableState.buffered>=e._readableState.highWaterMark}static isPaused(e){return(e._duplexState&wf)===0}[zS](){let e=this,n=null,r=null,i=null;return this.on("error",c=>{n=c}),this.on("readable",s),this.on("close",o),{[zS](){return this},next(){return new Promise(function(c,u){r=c,i=u;let d=e.read();d!==null?a(d):(e._duplexState&_f)!==0&&a(null)})},return(){return l(null)},throw(c){return l(c)}};function s(){r!==null&&a(e.read())}function o(){r!==null&&a(null)}function a(c){i!==null&&(n?i(n):c===null&&(e._duplexState&si)===0?i(ZS):r({value:c,done:c===null}),i=r=null)}function l(c){return e.destroy(c),new Promise((u,d)=>{if(e._duplexState&_f)return u({value:void 0,done:!0});e.once("close",function(){c?d(c):u({value:void 0,done:!0})})})}}},JS=class extends Of{constructor(e){super(e),this._duplexState|=ki|si,this._writableState=new jS(this,e),e&&(e.writev&&(this._writev=e.writev),e.write&&(this._write=e.write),e.final&&(this._final=e.final),e.eagerOpen&&this._writableState.updateNextTick())}cork(){this._duplexState|=tR}uncork(){this._duplexState&=fj,this._writableState.updateNextTick()}_writev(e,n){n(null)}_write(e,n){this._writableState.autoBatch(e,n)}_final(e){e(null)}static isBackpressured(e){return(e._duplexState&uwe)!==0}static drained(e){if(e.destroyed)return Promise.resolve(!1);let n=e._writableState,i=(Pwe(e)?Math.min(1,n.queue.length):n.queue.length)+(e._duplexState&py?1:0);return i===0?Promise.resolve(!0):(n.drains===null&&(n.drains=[]),new Promise(s=>{n.drains.push({writes:i,resolve:s})}))}write(e){return this._writableState.updateNextTick(),this._writableState.push(e)}end(e){return this._writableState.updateNextTick(),this._writableState.end(e),this}},Cf=class extends KS{constructor(e){super(e),this._duplexState=ki|this._duplexState&Ba,this._writableState=new jS(this,e),e&&(e.writev&&(this._writev=e.writev),e.write&&(this._write=e.write),e.final&&(this._final=e.final))}cork(){this._duplexState|=tR}uncork(){this._duplexState&=fj,this._writableState.updateNextTick()}_writev(e,n){n(null)}_write(e,n){this._writableState.autoBatch(e,n)}_final(e){e(null)}write(e){return this._writableState.updateNextTick(),this._writableState.push(e)}end(e){return this._writableState.updateNextTick(),this._writableState.end(e),this}},QS=class extends Cf{constructor(e){super(e),this._transformState=new ay(this),e&&(e.transform&&(this._transform=e.transform),e.flush&&(this._flush=e.flush))}_write(e,n){this._readableState.buffered>=this._readableState.highWaterMark?this._transformState.data=e:this._transform(e,this._transformState.afterTransform)}_read(e){if(this._transformState.data!==null){let n=this._transformState.data;this._transformState.data=null,e(null),this._transform(n,this._transformState.afterTransform)}else e(null)}destroy(e){super.destroy(e),this._transformState.data!==null&&(this._transformState.data=null,this._transformState.afterTransform())}_transform(e,n){n(null,e)}_flush(e){e(null)}_final(e){this._transformState.afterFinal=e,this._flush(Iwe.bind(this))}},cy=class extends QS{};function Iwe(t,e){let n=this._transformState.afterFinal;if(t)return n(t);e!=null&&this.push(e),this.push(null),n(null)}function _we(...t){return new Promise((e,n)=>Aj(...t,r=>{if(r)return n(r);e()}))}function Aj(t,...e){let n=Array.isArray(t)?[...t,...e]:[t,...e],r=n.length&&typeof n[n.length-1]=="function"?n.pop():null;if(n.length<2)throw new Error("Pipeline requires at least 2 streams");let i=n[0],s=null,o=null;for(let c=1;c<n.length;c++)s=n[c],bf(i)?i.pipe(s,l):(a(i,!0,c>1,l),i.pipe(s)),i=s;if(r){let c=!1,u=bf(s)||!!(s._writableState&&s._writableState.autoDestroy);s.on("error",d=>{o===null&&(o=d)}),s.on("finish",()=>{c=!0,u||r(o)}),u&&s.on("close",()=>r(o||(c?null:ny)))}return s;function a(c,u,d,E){c.on("error",E),c.on("close",f);function f(){if(u&&c._readableState&&!c._readableState.ended||d&&c._writableState&&!c._writableState.ended)return E(ny)}}function l(c){if(!(!c||o)){o=c;for(let u of n)u.destroy(c)}}}function Nwe(t){return t}function mj(t){return!!t._readableState||!!t._writableState}function bf(t){return typeof t._duplexState=="number"&&mj(t)}function Owe(t){return!!t._readableState&&t._readableState.ended}function Cwe(t){return!!t._writableState&&t._writableState.ended}function bwe(t,e={}){let n=t._readableState&&t._readableState.error||t._writableState&&t._writableState.error;return!e.all&&n===ZS?null:n}function ywe(t){return bf(t)&&t.readable}function wwe(t){return(t._duplexState&ki)!==ki||(t._duplexState&nR)!==0}function Lwe(t){return typeof t=="object"&&t!==null&&typeof t.byteLength=="number"}function gj(t){return Lwe(t)?t.byteLength:1024}function ij(){}function Dwe(){this.destroy(new Error("Stream aborted."))}function Pwe(t){return t._writev!==JS.prototype._writev&&t._writev!==Cf.prototype._writev}Ij.exports={pipeline:Aj,pipelinePromise:_we,isStream:mj,isStreamx:bf,isEnded:Owe,isFinished:Cwe,isDisturbed:wwe,getStreamError:bwe,Stream:Of,Writable:JS,Readable:KS,Duplex:Cf,Transform:QS,PassThrough:cy}});var my=C(Fc=>{var je=Pc(),xwe="0000000000000000000",vwe="7777777777777777777",rR=48,_j=je.from([117,115,116,97,114,0]),Mwe=je.from([rR,rR]),Uwe=je.from([117,115,116,97,114,32]),Bwe=je.from([32,0]),Fwe=4095,Pf=257,Ay=263;Fc.decodeLongPath=function(e,n){return Bc(e,0,e.length,n)};Fc.encodePax=function(e){let n="";e.name&&(n+=Ry(" path="+e.name+`
`)),e.linkname&&(n+=Ry(" linkpath="+e.linkname+`
`));let r=e.pax;if(r)for(let i in r)n+=Ry(" "+i+"="+r[i]+`
`);return je.from(n)};Fc.decodePax=function(e){let n={};for(;e.length;){let r=0;for(;r<e.length&&e[r]!==32;)r++;let i=parseInt(je.toString(e.subarray(0,r)),10);if(!i)return n;let s=je.toString(e.subarray(r+1,i-1)),o=s.indexOf("=");if(o===-1)return n;n[s.slice(0,o)]=s.slice(o+1),e=e.subarray(i)}return n};Fc.encode=function(e){let n=je.alloc(512),r=e.name,i="";if(e.typeflag===5&&r[r.length-1]!=="/"&&(r+="/"),je.byteLength(r)!==r.length)return null;for(;je.byteLength(r)>100;){let s=r.indexOf("/");if(s===-1)return null;i+=i?"/"+r.slice(0,s):r.slice(0,s),r=r.slice(s+1)}return je.byteLength(r)>100||je.byteLength(i)>155||e.linkname&&je.byteLength(e.linkname)>100?null:(je.write(n,r),je.write(n,So(e.mode&Fwe,6),100),je.write(n,So(e.uid,6),108),je.write(n,So(e.gid,6),116),Vwe(e.size,n,124),je.write(n,So(e.mtime.getTime()/1e3|0,11),136),n[156]=rR+Wwe(e.type),e.linkname&&je.write(n,e.linkname,157),je.copy(_j,n,Pf),je.copy(Mwe,n,Ay),e.uname&&je.write(n,e.uname,265),e.gname&&je.write(n,e.gname,297),je.write(n,So(e.devmajor||0,6),329),je.write(n,So(e.devminor||0,6),337),i&&je.write(n,i,345),je.write(n,So(Oj(n),6),148),n)};Fc.decode=function(e,n,r){let i=e[156]===0?0:e[156]-rR,s=Bc(e,0,100,n),o=To(e,100,8),a=To(e,108,8),l=To(e,116,8),c=To(e,124,12),u=To(e,136,12),d=kwe(i),E=e[157]===0?null:Bc(e,157,100,n),f=Bc(e,265,32),p=Bc(e,297,32),h=To(e,329,8),T=To(e,337,8),S=Oj(e);if(S===256)return null;if(S!==To(e,148,8))throw new Error("Invalid tar header. Maybe the tar is corrupted or it needs to be gunzipped?");if(Hwe(e))e[345]&&(s=Bc(e,345,155,n)+"/"+s);else if(!Gwe(e)){if(!r)throw new Error("Invalid tar header: unknown format.")}return i===0&&s&&s[s.length-1]==="/"&&(i=5),{name:s,mode:o,uid:a,gid:l,size:c,mtime:new Date(1e3*u),type:d,linkname:E,uname:f,gname:p,devmajor:h,devminor:T,pax:null}};function Hwe(t){return je.equals(_j,t.subarray(Pf,Pf+6))}function Gwe(t){return je.equals(Uwe,t.subarray(Pf,Pf+6))&&je.equals(Bwe,t.subarray(Ay,Ay+2))}function $we(t,e,n){return typeof t!="number"?n:(t=~~t,t>=e?e:t>=0||(t+=e,t>=0)?t:0)}function kwe(t){switch(t){case 0:return"file";case 1:return"link";case 2:return"symlink";case 3:return"character-device";case 4:return"block-device";case 5:return"directory";case 6:return"fifo";case 7:return"contiguous-file";case 72:return"pax-header";case 55:return"pax-global-header";case 27:return"gnu-long-link-path";case 28:case 30:return"gnu-long-path"}return null}function Wwe(t){switch(t){case"file":return 0;case"link":return 1;case"symlink":return 2;case"character-device":return 3;case"block-device":return 4;case"directory":return 5;case"fifo":return 6;case"contiguous-file":return 7;case"pax-header":return 72}return 0}function Nj(t,e,n,r){for(;n<r;n++)if(t[n]===e)return n;return r}function Oj(t){let e=256;for(let n=0;n<148;n++)e+=t[n];for(let n=156;n<512;n++)e+=t[n];return e}function So(t,e){return t=t.toString(8),t.length>e?vwe.slice(0,e)+" ":xwe.slice(0,e-t.length)+t+" "}function Ywe(t,e,n){e[n]=128;for(let r=11;r>0;r--)e[n+r]=t&255,t=Math.floor(t/256)}function Vwe(t,e,n){t.toString(8).length>11?Ywe(t,e,n):je.write(e,So(t,11),n)}function qwe(t){let e;if(t[0]===128)e=!0;else if(t[0]===255)e=!1;else return null;let n=[],r;for(r=t.length-1;r>0;r--){let o=t[r];e?n.push(o):n.push(255-o)}let i=0,s=n.length;for(r=0;r<s;r++)i+=n[r]*Math.pow(256,r);return e?i:-1*i}function To(t,e,n){if(t=t.subarray(e,e+n),e=0,t[e]&128)return qwe(t);{for(;e<t.length&&t[e]===32;)e++;let r=$we(Nj(t,32,e,t.length),t.length,t.length);for(;e<r&&t[e]===0;)e++;return r===e?0:parseInt(je.toString(t.subarray(e,r)),8)}}function Bc(t,e,n,r){return je.toString(t.subarray(e,Nj(t,0,e,e+n)),r)}function Ry(t){let e=je.byteLength(t),n=Math.floor(Math.log(e)/Math.log(10))+1;return e+n>=Math.pow(10,n)&&n++,e+n+t}});var Lj=C((RGe,wj)=>{var{Writable:Xwe,Readable:zwe,getStreamError:Cj}=Sy(),jwe=ty(),bj=Pc(),Hc=my(),Kwe=bj.alloc(0),Iy=class{constructor(){this.buffered=0,this.shifted=0,this.queue=new jwe,this._offset=0}push(e){this.buffered+=e.byteLength,this.queue.push(e)}shiftFirst(e){return this._buffered===0?null:this._next(e)}shift(e){if(e>this.buffered)return null;if(e===0)return Kwe;let n=this._next(e);if(e===n.byteLength)return n;let r=[n];for(;(e-=n.byteLength)>0;)n=this._next(e),r.push(n);return bj.concat(r)}_next(e){let n=this.queue.peek(),r=n.byteLength-this._offset;if(e>=r){let i=this._offset?n.subarray(this._offset,n.byteLength):n;return this.queue.shift(),this._offset=0,this.buffered-=r,this.shifted+=r,i}return this.buffered-=e,this.shifted+=e,n.subarray(this._offset,this._offset+=e)}},_y=class extends zwe{constructor(e,n,r){super(),this.header=n,this.offset=r,this._parent=e}_read(e){this.header.size===0&&this.push(null),this._parent._stream===this&&this._parent._update(),e(null)}_predestroy(){this._parent.destroy(Cj(this))}_detach(){this._parent._stream===this&&(this._parent._stream=null,this._parent._missing=yj(this.header.size),this._parent._update())}_destroy(e){this._detach(),e(null)}},Ny=class extends Xwe{constructor(e){super(e),e||(e={}),this._buffer=new Iy,this._offset=0,this._header=null,this._stream=null,this._missing=0,this._longHeader=!1,this._callback=gy,this._locked=!1,this._finished=!1,this._pax=null,this._paxGlobal=null,this._gnuLongPath=null,this._gnuLongLinkPath=null,this._filenameEncoding=e.filenameEncoding||"utf-8",this._allowUnknownFormat=!!e.allowUnknownFormat,this._unlockBound=this._unlock.bind(this)}_unlock(e){if(this._locked=!1,e){this.destroy(e),this._continueWrite(e);return}this._update()}_consumeHeader(){if(this._locked)return!1;this._offset=this._buffer.shifted;try{this._header=Hc.decode(this._buffer.shift(512),this._filenameEncoding,this._allowUnknownFormat)}catch(e){return this._continueWrite(e),!1}if(!this._header)return!0;switch(this._header.type){case"gnu-long-path":case"gnu-long-link-path":case"pax-global-header":case"pax-header":return this._longHeader=!0,this._missing=this._header.size,!0}return this._locked=!0,this._applyLongHeaders(),this._header.size===0||this._header.type==="directory"?(this.emit("entry",this._header,this._createStream(),this._unlockBound),!0):(this._stream=this._createStream(),this._missing=this._header.size,this.emit("entry",this._header,this._stream,this._unlockBound),!0)}_applyLongHeaders(){this._gnuLongPath&&(this._header.name=this._gnuLongPath,this._gnuLongPath=null),this._gnuLongLinkPath&&(this._header.linkname=this._gnuLongLinkPath,this._gnuLongLinkPath=null),this._pax&&(this._pax.path&&(this._header.name=this._pax.path),this._pax.linkpath&&(this._header.linkname=this._pax.linkpath),this._pax.size&&(this._header.size=parseInt(this._pax.size,10)),this._header.pax=this._pax,this._pax=null)}_decodeLongHeader(e){switch(this._header.type){case"gnu-long-path":this._gnuLongPath=Hc.decodeLongPath(e,this._filenameEncoding);break;case"gnu-long-link-path":this._gnuLongLinkPath=Hc.decodeLongPath(e,this._filenameEncoding);break;case"pax-global-header":this._paxGlobal=Hc.decodePax(e);break;case"pax-header":this._pax=this._paxGlobal===null?Hc.decodePax(e):Object.assign({},this._paxGlobal,Hc.decodePax(e));break}}_consumeLongHeader(){this._longHeader=!1,this._missing=yj(this._header.size);let e=this._buffer.shift(this._header.size);try{this._decodeLongHeader(e)}catch(n){return this._continueWrite(n),!1}return!0}_consumeStream(){let e=this._buffer.shiftFirst(this._missing);if(e===null)return!1;this._missing-=e.byteLength;let n=this._stream.push(e);return this._missing===0?(this._stream.push(null),n&&this._stream._detach(),n&&this._locked===!1):n}_createStream(){return new _y(this,this._header,this._offset)}_update(){for(;this._buffer.buffered>0&&!this.destroying;){if(this._missing>0){if(this._stream!==null){if(this._consumeStream()===!1)return;continue}if(this._longHeader===!0){if(this._missing>this._buffer.buffered)break;if(this._consumeLongHeader()===!1)return!1;continue}let e=this._buffer.shiftFirst(this._missing);e!==null&&(this._missing-=e.byteLength);continue}if(this._buffer.buffered<512)break;if(this._stream!==null||this._consumeHeader()===!1)return}this._continueWrite(null)}_continueWrite(e){let n=this._callback;this._callback=gy,n(e)}_write(e,n){this._callback=n,this._buffer.push(e),this._update()}_final(e){this._finished=this._missing===0&&this._buffer.buffered===0,e(this._finished?null:new Error("Unexpected end of data"))}_predestroy(){this._continueWrite(null)}_destroy(e){this._stream&&this._stream.destroy(Cj(this)),e(null)}[Symbol.asyncIterator](){let e=null,n=null,r=null,i=null,s=null,o=this;return this.on("entry",c),this.on("error",E=>{e=E}),this.on("close",u),{[Symbol.asyncIterator](){return this},next(){return new Promise(l)},return(){return d(null)},throw(E){return d(E)}};function a(E){if(!s)return;let f=s;s=null,f(E)}function l(E,f){if(e)return f(e);if(i){E({value:i,done:!1}),i=null;return}n=E,r=f,a(null),o._finished&&n&&(n({value:void 0,done:!0}),n=r=null)}function c(E,f,p){s=p,f.on("error",gy),n?(n({value:f,done:!1}),n=r=null):i=f}function u(){a(e),n&&(e?r(e):n({value:void 0,done:!0}),n=r=null)}function d(E){return o.destroy(E),a(E),new Promise((f,p)=>{if(o.destroyed)return f({value:void 0,done:!0});o.once("close",function(){E?p(E):f({value:void 0,done:!0})})})}}};wj.exports=function(e){return new Ny(e)};function gy(){}function yj(t){return t&=511,t&&512-t}});var Pj=C((AGe,Oy)=>{var Dj={S_IFMT:61440,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960};try{Oy.exports=require("fs").constants||Dj}catch{Oy.exports=Dj}});var Bj=C((mGe,Uj)=>{var{Readable:Jwe,Writable:Qwe,getStreamError:xj}=Sy(),Ga=Pc(),Gc=Pj(),iR=my(),Zwe=493,e0e=420,vj=Ga.alloc(1024),by=class extends Qwe{constructor(e,n,r){super({mapWritable:n0e,eagerOpen:!0}),this.written=0,this.header=n,this._callback=r,this._linkname=null,this._isLinkname=n.type==="symlink"&&!n.linkname,this._isVoid=n.type!=="file"&&n.type!=="contiguous-file",this._finished=!1,this._pack=e,this._openCallback=null,this._pack._stream===null?this._pack._stream=this:this._pack._pending.push(this)}_open(e){this._openCallback=e,this._pack._stream===this&&this._continueOpen()}_continuePack(e){if(this._callback===null)return;let n=this._callback;this._callback=null,n(e)}_continueOpen(){this._pack._stream===null&&(this._pack._stream=this);let e=this._openCallback;if(this._openCallback=null,e!==null){if(this._pack.destroying)return e(new Error("pack stream destroyed"));if(this._pack._finalized)return e(new Error("pack stream is already finalized"));this._pack._stream=this,this._isLinkname||this._pack._encode(this.header),this._isVoid&&(this._finish(),this._continuePack(null)),e(null)}}_write(e,n){if(this._isLinkname)return this._linkname=this._linkname?Ga.concat([this._linkname,e]):e,n(null);if(this._isVoid)return e.byteLength>0?n(new Error("No body allowed for this entry")):n();if(this.written+=e.byteLength,this._pack.push(e))return n();this._pack._drain=n}_finish(){this._finished||(this._finished=!0,this._isLinkname&&(this.header.linkname=this._linkname?Ga.toString(this._linkname,"utf-8"):"",this._pack._encode(this.header)),Mj(this._pack,this.header.size),this._pack._done(this))}_final(e){if(this.written!==this.header.size)return e(new Error("Size mismatch"));this._finish(),e(null)}_getError(){return xj(this)||new Error("tar entry destroyed")}_predestroy(){this._pack.destroy(this._getError())}_destroy(e){this._pack._done(this),this._continuePack(this._finished?null:this._getError()),e()}},yy=class extends Jwe{constructor(e){super(e),this._drain=Cy,this._finalized=!1,this._finalizing=!1,this._pending=[],this._stream=null}entry(e,n,r){if(this._finalized||this.destroying)throw new Error("already finalized or destroyed");typeof n=="function"&&(r=n,n=null),r||(r=Cy),(!e.size||e.type==="symlink")&&(e.size=0),e.type||(e.type=t0e(e.mode)),e.mode||(e.mode=e.type==="directory"?Zwe:e0e),e.uid||(e.uid=0),e.gid||(e.gid=0),e.mtime||(e.mtime=new Date),typeof n=="string"&&(n=Ga.from(n));let i=new by(this,e,r);return Ga.isBuffer(n)?(e.size=n.byteLength,i.write(n),i.end(),i):(i._isVoid,i)}finalize(){if(this._stream||this._pending.length>0){this._finalizing=!0;return}this._finalized||(this._finalized=!0,this.push(vj),this.push(null))}_done(e){e===this._stream&&(this._stream=null,this._finalizing&&this.finalize(),this._pending.length&&this._pending.shift()._continueOpen())}_encode(e){if(!e.pax){let n=iR.encode(e);if(n){this.push(n);return}}this._encodePax(e)}_encodePax(e){let n=iR.encodePax({name:e.name,linkname:e.linkname,pax:e.pax}),r={name:"PaxHeader",mode:e.mode,uid:e.uid,gid:e.gid,size:n.byteLength,mtime:e.mtime,type:"pax-header",linkname:e.linkname&&"PaxHeader",uname:e.uname,gname:e.gname,devmajor:e.devmajor,devminor:e.devminor};this.push(iR.encode(r)),this.push(n),Mj(this,n.byteLength),r.size=e.size,r.type=e.type,this.push(iR.encode(r))}_doDrain(){let e=this._drain;this._drain=Cy,e()}_predestroy(){let e=xj(this);for(this._stream&&this._stream.destroy(e);this._pending.length;){let n=this._pending.shift();n.destroy(e),n._continueOpen()}this._doDrain()}_read(e){this._doDrain(),e()}};Uj.exports=function(e){return new yy(e)};function t0e(t){switch(t&Gc.S_IFMT){case Gc.S_IFBLK:return"block-device";case Gc.S_IFCHR:return"character-device";case Gc.S_IFDIR:return"directory";case Gc.S_IFIFO:return"fifo";case Gc.S_IFLNK:return"symlink"}return"file"}function Cy(){}function Mj(t,e){e&=511,e&&t.push(vj.subarray(0,512-e))}function n0e(t){return Ga.isBuffer(t)?t:Ga.from(t)}});var Fj=C(wy=>{wy.extract=Lj();wy.pack=Bj()});var $j=C((IGe,Gj)=>{var r0e=require("zlib"),i0e=Fj(),Hj=zl(),Cs=function(t){if(!(this instanceof Cs))return new Cs(t);t=this.options=Hj.defaults(t,{gzip:!1}),typeof t.gzipOptions!="object"&&(t.gzipOptions={}),this.supports={directory:!0,symlink:!0},this.engine=i0e.pack(t),this.compressor=!1,t.gzip&&(this.compressor=r0e.createGzip(t.gzipOptions),this.compressor.on("error",this._onCompressorError.bind(this)))};Cs.prototype._onCompressorError=function(t){this.engine.emit("error",t)};Cs.prototype.append=function(t,e,n){var r=this;e.mtime=e.date;function i(o,a){if(o){n(o);return}r.engine.entry(e,a,function(l){n(l,e)})}if(e.sourceType==="buffer")i(null,t);else if(e.sourceType==="stream"&&e.stats){e.size=e.stats.size;var s=r.engine.entry(e,function(o){n(o,e)});t.pipe(s)}else e.sourceType==="stream"&&Hj.collectStream(t,i)};Cs.prototype.finalize=function(){this.engine.finalize()};Cs.prototype.on=function(){return this.engine.on.apply(this.engine,arguments)};Cs.prototype.pipe=function(t,e){return this.compressor?this.engine.pipe.apply(this.engine,[this.compressor]).pipe(t,e):this.engine.pipe.apply(this.engine,arguments)};Cs.prototype.unpipe=function(){return this.compressor?this.compressor.unpipe.apply(this.compressor,arguments):this.engine.unpipe.apply(this.engine,arguments)};Gj.exports=Cs});var Yj=C((_Ge,Wj)=>{"use strict";function s0e(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var o0e=new Int32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]);function kj(t){if(Buffer.isBuffer(t))return t;if(typeof t=="number")return Buffer.alloc(t);if(typeof t=="string")return Buffer.from(t);throw new Error("input must be buffer, number, or string, received "+typeof t)}function a0e(t){let e=kj(4);return e.writeInt32BE(t,0),e}function Ly(t,e){t=kj(t),Buffer.isBuffer(e)&&(e=e.readUInt32BE(0));let n=~~e^-1;for(var r=0;r<t.length;r++)n=o0e[(n^t[r])&255]^n>>>8;return n^-1}function Dy(){return a0e(Ly.apply(null,arguments))}Dy.signed=function(){return Ly.apply(null,arguments)};Dy.unsigned=function(){return Ly.apply(null,arguments)>>>0};var l0e=Dy,c0e=s0e(l0e);Wj.exports=c0e});var zj=C((NGe,Xj)=>{var u0e=require("util").inherits,Vj=AO().Transform,d0e=Yj(),qj=zl(),Ro=function(t){if(!(this instanceof Ro))return new Ro(t);t=this.options=qj.defaults(t,{}),Vj.call(this,t),this.supports={directory:!0,symlink:!0},this.files=[]};u0e(Ro,Vj);Ro.prototype._transform=function(t,e,n){n(null,t)};Ro.prototype._writeStringified=function(){var t=JSON.stringify(this.files);this.write(t)};Ro.prototype.append=function(t,e,n){var r=this;e.crc32=0;function i(s,o){if(s){n(s);return}e.size=o.length||0,e.crc32=d0e.unsigned(o),r.files.push(e),n(null,e)}e.sourceType==="buffer"?i(null,t):e.sourceType==="stream"&&qj.collectStream(t,i)};Ro.prototype.finalize=function(){this._writeStringified(),this.end()};Xj.exports=Ro});var Py=C((OGe,jj)=>{var f0e=DW(),xf={},Ao=function(t,e){return Ao.create(t,e)};Ao.create=function(t,e){if(xf[t]){var n=new f0e(t,e);return n.setFormat(t),n.setModule(new xf[t](e)),n}else throw new Error("create("+t+"): format not registered")};Ao.registerFormat=function(t,e){if(xf[t])throw new Error("register("+t+"): format already registered");if(typeof e!="function")throw new Error("register("+t+"): format module invalid");if(typeof e.prototype.append!="function"||typeof e.prototype.finalize!="function")throw new Error("register("+t+"): format module missing methods");xf[t]=e};Ao.isRegisteredFormat=function(t){return!!xf[t]};Ao.registerFormat("zip",Gz());Ao.registerFormat("tar",$j());Ao.registerFormat("json",zj());jj.exports=Ao});var $a,bs,xy=G(()=>{"use strict";$a=require("buffer"),bs=class{constructor(e=65536){this.chunkSize=e,this.chunks=[],this.currentBuffer=$a.Buffer.alloc(e),this.cursor=0}ensureCapacity(e){this.cursor+e>this.chunkSize&&this._flush()}_ensureCapacity(e){this.ensureCapacity(e)}_flush(){this.cursor>0&&(this.chunks.push(this.currentBuffer.subarray(0,this.cursor)),this.currentBuffer=$a.Buffer.alloc(this.chunkSize),this.cursor=0)}write(e){let n=e.length,r=0;for(;n>0;){let i=this.chunkSize-this.cursor;i===0&&(this._flush(),i=this.chunkSize);let s=Math.min(n,i);e.copy(this.currentBuffer,this.cursor,r,r+s),this.cursor+=s,r+=s,n-=s}}writeByte(e){this._ensureCapacity(1),this.currentBuffer[this.cursor]=e,this.cursor++}writeUnsafeByte(e){this.currentBuffer[this.cursor++]=e}writeInt32LE(e){this._ensureCapacity(4),this.currentBuffer.writeInt32LE(e,this.cursor),this.cursor+=4}writeUnsafeInt32LE(e){this.currentBuffer.writeInt32LE(e,this.cursor),this.cursor+=4}writeDoubleLE(e){this._ensureCapacity(8),this.currentBuffer.writeDoubleLE(e,this.cursor),this.cursor+=8}writeUnsafeDoubleLE(e){this.currentBuffer.writeDoubleLE(e,this.cursor),this.cursor+=8}writeString(e){let n=$a.Buffer.byteLength(e,"utf8");if(this.cursor+n<=this.chunkSize){this.cursor+=this.currentBuffer.write(e,this.cursor,"utf8");return}this._flush(),n>this.chunkSize?this.chunks.push($a.Buffer.from(e,"utf8")):this.cursor+=this.currentBuffer.write(e,this.cursor,"utf8")}writeUtf16LE(e){let n=e.length*2;if(this.cursor+n<=this.chunkSize){for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);this.currentBuffer[this.cursor++]=i&255,this.currentBuffer[this.cursor++]=i>>8&255}return}if(this._flush(),n>this.chunkSize)this.chunks.push($a.Buffer.from(e,"utf16le"));else for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);this.currentBuffer[this.cursor++]=i&255,this.currentBuffer[this.cursor++]=i>>8&255}}getChunks(){return this.cursor>0&&(this.chunks.push(this.currentBuffer.subarray(0,this.cursor)),this.currentBuffer=$a.Buffer.alloc(this.chunkSize),this.cursor=0),this.chunks}reset(){this.chunks=[],this.cursor=0}}});var Qj={};Pt(Qj,{XlsbWriter:()=>oR,default:()=>h0e});var Kj,Jj,sR,E0e,oR,h0e,Zj=G(()=>{"use strict";Kj=j(require("fs")),Jj=j(Py()),sR=require("stream");xy();E0e=/[\\/*?[\]:]/g,oR=class{constructor(e){this.sheetCount=0;this.sheetList=[];this.sstDic=new Map;this.sstCntUnique=0;this.sstCntAll=0;this.colWidths=[];this._autofilterIsOn=!1;this.currentSheetBuffer=null;this.currentSheetRowNum=0;this.currentSheetStartCol=0;this.currentSheetEndCol=0;this.currentSheetDoAutofilter=!1;this.isStreaming=!1;this.filePath=e,this.output=Kj.createWriteStream(e),this.archive=(0,Jj.default)("zip"),this.archive.pipe(this.output),this._oaEpoch=Date.UTC(1899,11,30),this._sheet1Bytes=Buffer.from([129,1,0,147,1,23,203,4,2,0,64,0,0,0,0,0,0,255,255,255,255,255,255,255,255,0,0,0,0,148,1,16,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,133,1,0,137,1,30,220,3,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,100,0,0,0,0,0,0,0,0,0,0,0,152,1,36,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,1,0,134,1,0,37,6,1,0,2,14,0,128,149,8,2,5,0,38,0,229,3,12,255,255,255,255,8,0,44,1,0,0,0,0,145,1,0,37,6,1,0,2,14,0,128,128,8,2,5,0,38,0,0,25,0,0,0,0,0,0,0,0,44,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,7,12,0,0,0,0,0,0,0,0,0,0,0,0,146,1,0,151,4,66,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,221,3,2,16,0,220,3,48,102,102,102,102,102,102,230,63,102,102,102,102,102,102,230,63,0,0,0,0,0,0,232,63,0,0,0,0,0,0,232,63,51,51,51,51,51,51,211,63,51,51,51,51,51,51,211,63,37,6,1,0,0,16,0,128,128,24,16,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,38,0,130,1,0]),this._workbookBinStart=Buffer.from([131,1,0,128,1,50,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,120,0,108,0,1,0,0,0,55,0,1,0,0,0,54,0,5,0,0,0,50,0,52,0,51,0,50,0,54,0,153,1,12,32,0,1,0,0,0,0,0,0,0,0,0,37,6,1,0,3,15,0,128,151,16,52,24,0,0,0,67,0,58,0,92,0,115,0,113,0,108,0,115,0,92,0,84,0,101,0,115,0,116,0,121,0,90,0,97,0,112,0,105,0,115,0,117,0,88,0,108,0,115,0,98,0,92,0,38,0,37,6,1,0,0,16,0,128,129,24,130,1,0,0,0,0,0,0,0,0,47,0,0,0,49,0,51,0,95,0,110,0,99,0,114,0,58,0,49,0,95,0,123,0,49,0,54,0,53,0,48,0,56,0,68,0,54,0,57,0,45,0,67,0,70,0,56,0,55,0,45,0,52,0,55,0,54,0,57,0,45,0,56,0,52,0,53,0,54,0,45,0,68,0,52,0,65,0,52,0,48,0,49,0,49,0,51,0,49,0,53,0,54,0,55,0,125,0,47,0,0,0,47,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,38,0,135,1,0,37,6,1,0,2,16,0,128,128,24,16,0,0,0,0,13,0,0,0,255,255,255,255,0,0,0,0,38,0,158,1,29,0,0,0,0,158,22,0,0,180,105,0,0,232,38,0,0,88,2,0,0,0,0,0,0,0,0,0,0,120,136,1,0,143,1,0]),this._workbookBinMiddle=Buffer.from([144,1,0]),this._workbookBinEnd=Buffer.from([157,1,26,53,234,2,0,1,0,0,0,100,0,0,0,252,169,241,210,77,98,80,63,1,0,0,0,106,0,155,1,1,0,35,4,3,15,0,0,171,16,1,1,36,0,132,1,0]),this._stylesBin=Buffer.from([150,2,0,231,4,4,2,0,0,0,44,44,164,0,19,0,0,0,121,0,121,0,121,0,121,0,92,0,45,0,109,0,109,0,92,0,45,0,100,0,100,0,92,0,32,0,104,0,104,0,58,0,109,0,109,0,44,30,166,0,12,0,0,0,121,0,121,0,121,0,121,0,92,0,45,0,109,0,109,0,92,0,45,0,100,0,100,0,232,4,0,227,4,4,1,0,0,0,43,39,220,0,0,0,144,1,0,0,0,2,0,0,7,1,0,0,0,0,0,255,2,7,0,0,0,67,0,97,0,108,0,105,0,98,0,114,0,105,0,43,39,220,0,1,0,188,2,0,0,0,2,238,0,7,1,0,0,0,0,0,255,2,7,0,0,0,67,0,97,0,108,0,105,0,98,0,114,0,105,0,37,6,1,0,2,14,0,128,129,8,0,38,0,228,4,0,219,4,4,2,0,0,0,45,68,0,0,0,0,3,64,0,0,0,0,0,255,3,65,0,0,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,45,68,17,0,0,0,3,64,0,0,0,0,0,255,3,65,0,0,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,220,4,0,229,4,4,1,0,0,0,46,51,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,230,4,0,242,4,4,1,0,0,0,47,16,255,255,0,0,0,0,0,0,0,0,0,0,16,16,0,0,243,4,0,233,4,4,4,0,0,0,47,16,0,0,0,0,0,0,0,0,0,0,0,0,16,16,0,0,47,16,0,0,164,0,0,0,0,0,0,0,0,0,16,16,1,0,47,16,0,0,166,0,0,0,0,0,0,0,0,0,16,16,1,0,47,16,0,0,0,1,1,0,0,0,0,0,0,0,16,16,0,0,234,4,0,235,4,4,1,0,0,0,37,6,1,0,2,17,0,128,128,24,16,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,38,0,48,28,0,0,0,0,1,0,0,0,8,0,0,0,78,0,111,0,114,0,109,0,97,0,108,0,110,0,121,0,236,4,0,249,3,4,0,0,0,0,250,3,0,252,3,80,0,0,0,0,17,0,0,0,84,0,97,0,98,0,108,0,101,0,83,0,116,0,121,0,108,0,101,0,77,0,101,0,100,0,105,0,117,0,109,0,50,0,17,0,0,0,80,0,105,0,118,0,111,0,116,0,83,0,116,0,121,0,108,0,101,0,76,0,105,0,103,0,104,0,116,0,49,0,54,0,253,3,0,35,4,2,14,0,0,235,8,0,246,8,42,0,0,0,0,17,0,0,0,83,0,108,0,105,0,99,0,101,0,114,0,83,0,116,0,121,0,108,0,101,0,76,0,105,0,103,0,104,0,116,0,49,0,247,8,0,236,8,0,36,0,35,4,3,15,0,0,176,16,0,178,16,50,0,0,0,0,21,0,0,0,84,0,105,0,109,0,101,0,83,0,108,0,105,0,99,0,101,0,114,0,83,0,116,0,121,0,108,0,101,0,76,0,105,0,103,0,104,0,116,0,49,0,179,16,0,177,16,0,36,0,151,2,0]),this._binaryIndexBin=Buffer.from([42,24,0,0,0,0,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,149,2,0]),this._rRkIntegerLowerLimit=-1<<29,this._rRkIntegerUpperLimit=(1<<29)-1,this._autoFilterStartBytes=Buffer.from([161,1,16]),this._autoFilterEndBytes=Buffer.from([162,1,0]),this._stickHeaderA1bytes=Buffer.from([151,1,29,0,0,0,0,0,0,0,0,0,0,0,0,0,0,240,63,1,0,0,0,0,0,0,0,2,0,0,0,3]),this._magicFilterExcel2016Fix0=Buffer.from([225,2,0,229,2,0,234,2]),this._magicFilterExcel2016Fix1=Buffer.from([39,70,33,0,0,0,0,255,0,0,0,15,0,0,0,95,0,70,0,105,0,108,0,116,0,101,0,114,0,68,0,97,0,116,0,97,0,98,0,97,0,115,0,101,0,15,0,0,0,59,255,0]),this._magicFilterExcel2016Fix2=Buffer.from([0,0,0,0,255,255,255,255])}_sanitizeSheetName(e){if(!e||typeof e!="string")return`Sheet${this.sheetCount+1}`;let n=e.replace(E0e,"_");return n.length>31&&(n=n.substring(0,31)),n.trim().length===0&&(n=`Sheet${this.sheetCount+1}`),n}addSheet(e,n=!1){let r=this._sanitizeSheetName(e);this.sheetCount++,this.sheetList.push({name:r,pathInArchive:`xl/worksheets/sheet${this.sheetCount}.bin`,hidden:n,nameInArchive:`sheet${this.sheetCount}.bin`,sheetId:this.sheetCount,filterHeaderRange:null})}startSheet(e,n,r,i={}){if(this.isStreaming)throw new Error("Already in streaming mode. Call endSheet() first.");let{hidden:s=!1,doAutofilter:o=!0}=i;this.addSheet(e,s),this.isStreaming=!0,this.currentSheetBuffer=new bs,this.currentSheetRowNum=0,this.currentSheetStartCol=0,this.currentSheetEndCol=n,this.currentSheetDoAutofilter=o&&r!==void 0;let a=this.currentSheetBuffer;if(this.colWidths=new Array(n).fill(-1),r)for(let c=0;c<n;c++){let d=1.25*(r[c]?r[c].length:0)+2;d>80&&(d=80),this.colWidths[c]<d&&(this.colWidths[c]=d)}let l=Buffer.from(this._sheet1Bytes);l.writeInt32LE(this.currentSheetStartCol,40),l.writeInt32LE(this.currentSheetEndCol,44),this.sheetCount!==1&&(l[54]=156),a.write(l.subarray(0,84)),this.currentSheetDoAutofilter&&a.write(this._stickHeaderA1bytes),a.write(l.subarray(84,159)),a.writeByte(134),a.writeByte(3);for(let c=this.currentSheetStartCol;c<this.currentSheetEndCol;c++){a.writeByte(0),a.writeByte(60),a.writeByte(18),a.writeInt32LE(c),a.writeInt32LE(c);let u=this.colWidths[c]>0?Math.floor(this.colWidths[c]):10;a.writeByte(0),a.writeByte(Math.max(0,Math.min(255,u))),a.writeByte(0),a.writeByte(0),a.writeByte(0),a.writeByte(0),a.writeByte(0),a.writeByte(0),a.writeByte(2)}if(a.writeByte(0),a.writeByte(135),a.writeByte(3),a.writeByte(0),a.write(l.subarray(159,175)),a.write(Buffer.from([38,0])),r){this.createRowHeader(a,this.currentSheetRowNum,this.currentSheetStartCol,this.currentSheetEndCol);for(let c=0;c<r.length;c++)this.writeString(a,r[c],c,!0);this.currentSheetRowNum++}}writeRow(e){if(!this.isStreaming||!this.currentSheetBuffer)throw new Error("Not in streaming mode. Call startSheet() first.");if(e.length!==this.currentSheetEndCol-this.currentSheetStartCol)throw new Error(`Row length mismatch. Expected ${this.currentSheetEndCol-this.currentSheetStartCol} columns, got ${e.length}`);let n=this.currentSheetBuffer;this.createRowHeader(n,this.currentSheetRowNum,this.currentSheetStartCol,this.currentSheetEndCol);for(let r=0;r<e.length;r++){let i=e[r];i!=null&&(typeof i=="number"?Number.isInteger(i)?i>=this._rRkIntegerLowerLimit&&i<=this._rRkIntegerUpperLimit?this.writeRkNumberInteger(n,i,r):this.writeDouble(n,i,r):this.writeDouble(n,i,r):typeof i=="bigint"?this.writeString(n,i.toString(),r):typeof i=="boolean"?this.writeBool(n,i,r):i instanceof Date?this.writeDateTime(n,i,r):this.writeString(n,i.toString(),r))}this.currentSheetRowNum++}endSheet(){if(!this.isStreaming||!this.currentSheetBuffer)throw new Error("Not in streaming mode. Call startSheet() first.");let e=this.currentSheetBuffer,n=Buffer.from(this._sheet1Bytes);if(e.write(n.subarray(218,290)),this.currentSheetDoAutofilter){this._autofilterIsOn=!0;let r=this.currentSheetRowNum;e.write(this._autoFilterStartBytes);let i=Buffer.alloc(8);i.writeInt32LE(0,0),i.writeInt32LE(r-1,4),e.write(i);let s=Buffer.alloc(8);s.writeInt32LE(this.currentSheetStartCol,0),s.writeInt32LE(this.currentSheetEndCol-1,4),e.write(s),e.write(this._autoFilterEndBytes);let o=this.sheetList[this.sheetCount-1];o.filterData={startRow:0,endRow:this.currentSheetRowNum-1,startColumn:this.currentSheetStartCol,endColumn:this.currentSheetEndCol-1}}e.write(n.subarray(290)),this.archive.append(sR.Readable.from(e.getChunks()),{name:this.sheetList[this.sheetCount-1].pathInArchive}),this.isStreaming=!1,this.currentSheetBuffer=null,this.currentSheetRowNum=0,this.currentSheetStartCol=0,this.currentSheetEndCol=0,this.currentSheetDoAutofilter=!1}writeSheet(e,n=null,r=!0){let i=new bs,s=0;if(e.length>0?s=e[0].length:n&&(s=n.length),this.colWidths=new Array(s).fill(-1),n)for(let u=0;u<s;u++){let E=1.25*(n[u]?n[u].length:0)+2;E>80&&(E=80),this.colWidths[u]<E&&(this.colWidths[u]=E)}for(let u=0;u<Math.min(e.length,100);u++){let d=e[u];for(let E=0;E<d.length;E++){let f=d[E],h=1.25*(f?f.toString().length:0)+2;h>80&&(h=80),this.colWidths[E]<h&&(this.colWidths[E]=h)}}let o=Buffer.from(this._sheet1Bytes),a=0,l=s;o.writeInt32LE(a,40),o.writeInt32LE(l,44),this.sheetCount!==1&&(o[54]=156),i.write(o.subarray(0,84)),r&&n&&i.write(this._stickHeaderA1bytes),i.write(o.subarray(84,159)),i.writeByte(134),i.writeByte(3);for(let u=a;u<l;u++){i.writeByte(0),i.writeByte(60),i.writeByte(18),i.writeInt32LE(u),i.writeInt32LE(u);let d=this.colWidths[u]>0?Math.floor(this.colWidths[u]):10;i.writeByte(0),i.writeByte(Math.max(0,Math.min(255,d))),i.writeByte(0),i.writeByte(0),i.writeByte(0),i.writeByte(0),i.writeByte(0),i.writeByte(0),i.writeByte(2)}i.writeByte(0),i.writeByte(135),i.writeByte(3),i.writeByte(0),i.write(o.subarray(159,175)),i.write(Buffer.from([38,0]));let c=0;if(n){this.createRowHeader(i,c,a,l);for(let u=0;u<n.length;u++)this.writeString(i,n[u],u,!0);c++}for(let u=0;u<e.length;u++){this.createRowHeader(i,c,a,l);let d=e[u];for(let E=0;E<d.length;E++){let f=d[E];f!=null&&(typeof f=="number"?Number.isInteger(f)?f>=this._rRkIntegerLowerLimit&&f<=this._rRkIntegerUpperLimit?this.writeRkNumberInteger(i,f,E):this.writeDouble(i,f,E):this.writeDouble(i,f,E):typeof f=="bigint"?this.writeString(i,f.toString(),E):typeof f=="boolean"?this.writeBool(i,f,E):f instanceof Date?this.writeDateTime(i,f,E):this.writeString(i,f.toString(),E))}c++}if(i.write(o.subarray(218,290)),r&&n){this._autofilterIsOn=!0;let u=e.length+1;i.write(this._autoFilterStartBytes);let d=Buffer.alloc(8);d.writeInt32LE(0,0),d.writeInt32LE(u-1,4),i.write(d);let E=Buffer.alloc(8);E.writeInt32LE(a,0),E.writeInt32LE(l-1,4),i.write(E),i.write(this._autoFilterEndBytes);let f=this.sheetList[this.sheetCount-1];f.filterData={startRow:0,endRow:e.length,startColumn:a,endColumn:l-1}}i.write(o.subarray(290)),this.archive.append(sR.Readable.from(i.getChunks()),{name:this.sheetList[this.sheetCount-1].pathInArchive})}_getColumnLetter(e){if(e<26)return String.fromCharCode(65+e);if(e<702){let n=Math.floor(e/26)-1,r=e%26;return String.fromCharCode(65+n)+String.fromCharCode(65+r)}return"A"}createRowHeader(e,n,r,i){e.ensureCapacity(27),e.writeUnsafeByte(0),e.writeUnsafeByte(25),e.writeUnsafeInt32LE(n),e.writeUnsafeInt32LE(0),e.writeUnsafeByte(44),e.writeUnsafeByte(1),e.writeUnsafeByte(0),e.writeUnsafeByte(0),e.writeUnsafeByte(0),e.writeUnsafeByte(1),e.writeUnsafeByte(0),e.writeUnsafeByte(0),e.writeUnsafeByte(0),e.writeUnsafeInt32LE(r),e.writeUnsafeInt32LE(i)}writeRkNumberInteger(e,n,r,i=0){e.ensureCapacity(14),e.writeUnsafeByte(2),e.writeUnsafeByte(12),e.writeUnsafeInt32LE(r),e.writeUnsafeByte(i),e.writeUnsafeByte(0),e.writeUnsafeByte(0),e.writeUnsafeByte(0);let s=n<<2|2;e.writeUnsafeInt32LE(s)}writeDouble(e,n,r,i=0){e.ensureCapacity(18),e.writeUnsafeByte(5),e.writeUnsafeByte(16),e.writeUnsafeInt32LE(r),e.writeUnsafeByte(i),e.writeUnsafeByte(0),e.writeUnsafeByte(0),e.writeUnsafeByte(0),e.writeUnsafeDoubleLE(n)}writeBool(e,n,r){e.ensureCapacity(13),e.writeUnsafeByte(4),e.writeUnsafeByte(9),e.writeUnsafeInt32LE(r),e.writeUnsafeInt32LE(0),e.writeUnsafeByte(n?1:0)}writeDateTime(e,n,r){let i=n.getTimezoneOffset()*6e4,s=(n.getTime()-i-this._oaEpoch)/864e5;this.writeDouble(e,s,r,1)}writeString(e,n,r,i=!1){let s;this.sstDic.has(n)?s=this.sstDic.get(n):(s=this.sstCntUnique,this.sstDic.set(n,s),this.sstCntUnique++),this.sstCntAll++,e.ensureCapacity(17),e.writeUnsafeByte(7),e.writeUnsafeByte(12),e.writeUnsafeInt32LE(r),e.writeUnsafeByte(i?3:0),e.writeUnsafeByte(0),e.writeUnsafeByte(0),e.writeUnsafeByte(0),e.writeUnsafeInt32LE(s)}saveSst(){let e=new bs;e.writeByte(159),e.writeByte(1),e.writeByte(8),e.writeInt32LE(this.sstCntUnique),e.writeInt32LE(this.sstCntAll);for(let[n]of this.sstDic){let r=n.length;e.writeByte(19);let i=5+2*r;if(i>=128){e.writeByte(128+i%128);let s=i>>7;s>=256?e.writeByte(128+s%128):e.writeByte(s),e.writeByte(i>>14),i>>14>0&&e.writeByte(0)}else e.writeByte(i&255),e.writeByte(i>>8&255);e.writeInt32LE(r),e.writeUtf16LE(n)}e.writeByte(160),e.writeByte(1),e.writeByte(0),this.archive.append(sR.Readable.from(e.getChunks()),{name:"xl/sharedStrings.bin"})}_writeFilterDefinedName(e,n,r){let i=n.filterData,s=n.sheetId-1,o=Buffer.alloc(this._magicFilterExcel2016Fix1.length);this._magicFilterExcel2016Fix1.copy(o);let a=this._magicFilterExcel2016Fix1.length-2;o[7]=s,o[a]=r,e.push(o);let l=Buffer.alloc(8);l.writeInt32LE(i.startRow,0),l.writeInt32LE(i.endRow,4),e.push(l);let c=Buffer.alloc(4);c.writeInt16LE(i.startColumn,0),c.writeInt16LE(i.endColumn,2),e.push(c),e.push(this._magicFilterExcel2016Fix2)}finalize(){return new Promise((e,n)=>{try{this.saveSst(),this.archive.append(this._stylesBin,{name:"xl/styles.bin"});let r=[];r.push(this._workbookBinStart);for(let a of this.sheetList){let l=`rId${a.sheetId}`,c=16+a.name.length*2+l.length*2,u=Buffer.alloc(3+c);u[0]=156,u[1]=1,u[2]=c;let d=3;u.writeInt32LE(a.hidden?1:0,d),d+=4,u.writeInt32LE(a.sheetId,d),d+=4,u.writeInt32LE(l.length,d),d+=4;for(let E=0;E<l.length;E++){let f=l.charCodeAt(E);u[d++]=f&255,u[d++]=f>>8&255}u.writeInt32LE(a.name.length,d),d+=4;for(let E=0;E<a.name.length;E++){let f=a.name.charCodeAt(E);u[d++]=f&255,u[d++]=f>>8&255}r.push(u)}if(r.push(this._workbookBinMiddle),this._autofilterIsOn){let a=this.sheetList.filter(c=>c.filterData),l=a.length;if(l>0){r.push(this._magicFilterExcel2016Fix0);let c=16+(l-1)*12,u=Buffer.from([c,l,0,0,0]);r.push(u);for(let d=0;d<l;d++){let E=a[d].sheetId-1,f=Buffer.alloc(12);f.writeInt32LE(0,0),f[4]=E,f[8]=E,r.push(f)}r.push(Buffer.from([226,2,0]));for(let d=0;d<l;d++){let E=a[d];this._writeFilterDefinedName(r,E,d)}}}r.push(this._workbookBinEnd),this.archive.append(Buffer.concat(r),{name:"xl/workbook.bin"});for(let a of this.sheetList)this.archive.append(this._binaryIndexBin,{name:`xl/worksheets/binaryIndex${a.sheetId}.bin`});let i=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types">
<Default Extension="bin" ContentType="application/vnd.ms-excel.sheet.binary.macroEnabled.main"/>
<Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml"/>
<Default Extension="xml" ContentType="application/xml"/>`;for(let a of this.sheetList)i+=`<Override PartName="/${a.pathInArchive}" ContentType="application/vnd.ms-excel.worksheet"/>`,i+=`<Override PartName="/xl/worksheets/binaryIndex${a.sheetId}.bin" ContentType="application/vnd.ms-excel.binIndexWs"/>`;i+=`<Override PartName="/xl/styles.bin" ContentType="application/vnd.ms-excel.styles"/>
<Override PartName="/xl/sharedStrings.bin" ContentType="application/vnd.ms-excel.sharedStrings"/>
</Types>`,this.archive.append(i,{name:"[Content_Types].xml"});let s=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">`;for(let a of this.sheetList){let l=`rId${a.sheetId}`;s+=`<Relationship Id="${l}" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="worksheets/${a.nameInArchive}"/>`}s+=`<Relationship Id="rId${this.sheetList.length+2}" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Target="styles.bin"/>
<Relationship Id="rId${this.sheetList.length+3}" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings" Target="sharedStrings.bin"/>
</Relationships>`,this.archive.append(s,{name:"xl/_rels/workbook.bin.rels"}),this.archive.append(`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">
<Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.bin"/>
</Relationships>`,{name:"_rels/.rels"});for(let a of this.sheetList){let l=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">
<Relationship Id="rId1" Type="http://schemas.microsoft.com/office/2006/relationships/xlBinaryIndex" Target="binaryIndex${a.sheetId}.bin"/>
</Relationships>`;this.archive.append(l,{name:`xl/worksheets/_rels/${a.nameInArchive}.rels`})}this.output.on("close",()=>e()),this.archive.on("error",a=>n(a)),this.archive.finalize()}catch(r){n(r)}})}},h0e=oR});var ys={};Pt(ys,{copyFileToClipboard:()=>cR,exportCsvToXlsb:()=>R0e,exportQueryToXlsb:()=>Uy,exportStructuredToXlsb:()=>A0e,getTempFilePath:()=>m0e});function My(t){if(typeof t=="string"&&t.length>0){if(t.length>15||/^-?0\d+/.test(t))return t;if(/^-?\d+(\.\d+)?$/.test(t)){let e=parseFloat(t);if(Number.isFinite(e))return e}}return t}function p0e(t){return t.map(My)}async function Uy(t,e,n,r=!1,i,s,o){let a=null;try{if(o?.isCancellationRequested)throw new Error("Export cancelled by user");i&&i("Connecting to database...");let l={host:t.host,port:t.port||5480,database:t.database,user:t.user,password:t.password},c=Qn();a=new c(l),await a.connect();let u=new vy(n),{SqlParser:d}=await Promise.resolve().then(()=>(Bo(),qD)),E=d.splitStatements(e),f=0,p=0,h=!1;for(let m=0;m<E.length;m++){let N=E[m];if(!N.trim())continue;let L=E.length>1?`Result ${m+1}`:"Query Results";i&&i(`Executing query ${m+1}/${E.length}...`);try{let I=a.createCommand(N);s&&(I.commandTimeout=s);let D;o&&(D=o.onCancellationRequested(async()=>{h=!0,i&&i("Cancelling query...");try{await I.cancel()}catch(g){console.error("Error cancelling command:",g)}}));try{let g=await I.executeReader(),w=[],x=[],U=new Set(["INT8","INT2","INT4","NUMERIC","FLOAT4","FLOAT8"]);for(let Q=0;Q<g.fieldCount;Q++){let K=g.getName(Q);w.push(K);try{let Z=g.getTypeName(Q);x.push(U.has(Z))}catch{x.push(!1)}}let H=w.length;p=Math.max(p,H),u.startSheet(L,H,w,{doAutofilter:!0});let X=0;try{for(;await g.read();){if(h||o?.isCancellationRequested){h=!0,i&&i(`Export cancelled - finalizing ${X.toLocaleString()} rows...`);break}let Q=[];for(let K=0;K<g.fieldCount;K++){let Z=g.getValue(K);x[K]&&(Z=My(Z)),Q.push(Z)}if(u.writeRow(Q),X++,X%500===0&&(await new Promise(K=>setImmediate(K)),h)){i&&i(`Export cancelled - finalizing ${X.toLocaleString()} rows...`);break}X%1e4===0&&i&&i(`Streaming ${X.toLocaleString()} rows to "${L}"...`)}}catch(Q){let K=Q instanceof Error?Q.message:String(Q);!h&&i&&i(`Read error after ${X} rows: ${K}`)}if(u.endSheet(),f+=X,i){let Q=h?"(cancelled)":"";i(`Written ${X.toLocaleString()} rows to sheet "${L}" ${Q}`)}if(h)break}finally{D&&D.dispose()}}catch(I){let D=I instanceof Error?I.message:String(I);u.startSheet(`Error ${m+1}`,1,["Error"],{doAutofilter:!1}),u.writeRow([`Error executing query: ${D}`]),u.endSheet()}}let T=e.split(`
`);u.startSheet("SQL Code",1,void 0,{doAutofilter:!1}),u.writeRow(["SQL Query:"]);for(let m of T)u.writeRow([m]);u.endSheet(),i&&i("Finalizing file..."),await u.finalize();let A=aR.statSync(n).size/(1024*1024);i&&(i(h?"XLSB file created with partial data (export was cancelled)":"XLSB file created successfully"),i(`  - Total Rows: ${f.toLocaleString()}`),i(`  - File size: ${A.toFixed(1)} MB`),i(`  - Location: ${n}`));let R={success:!0,message:h?`Export cancelled - saved ${f} rows to ${n}`:`Successfully exported ${f} rows to ${n}`,details:{rows_exported:f,columns:p,file_size_mb:parseFloat(A.toFixed(1)),file_path:n}};if(r){i&&i("Copying to clipboard...");let m=await cR(n);R.details&&(R.details.clipboard_success=m)}return R}catch(l){return{success:!1,message:`Export error: ${l instanceof Error?l.message:String(l)}`}}finally{if(a)try{await a.close()}catch{}}}function S0e(t){return t?T0e.has(t.toUpperCase()):!1}async function R0e(t,e,n=!1,r={source:"Unknown"},i){try{i&&i("Initializing XLSB writer...");let s=new vy(e),o=0,a=0,l=[],c=(f,p)=>{let h=f.split(/\r?\n/),T=m=>{let N=[],L=0,I=!1;for(let g=0;g<m.length;g++)if(m[g]==='"')I=!I;else if(m[g]===","&&!I){let w=m.substring(L,g);w.startsWith('"')&&w.endsWith('"')&&(w=w.substring(1,w.length-1).replace(/""/g,'"')),N.push(w),L=g+1}let D=m.substring(L);return D.startsWith('"')&&D.endsWith('"')&&(D=D.substring(1,D.length-1).replace(/""/g,'"')),N.push(D),N},S=0;for(;S<h.length&&!h[S].trim();)S++;if(S>=h.length)return;let A=T(h[S]);if(A.length===0)return;a=Math.max(a,A.length),s.startSheet(p,A.length,A,{doAutofilter:!0});let R=0;for(let m=S+1;m<h.length;m++){let N=h[m];if(!N.trim())continue;let L=T(N);s.writeRow(p0e(L)),R++}s.endSheet(),o+=R};Array.isArray(t)?(i&&i(`Processing ${t.length} result sets...`),t.forEach((f,p)=>{let h=f.name||`Result ${p+1}`;i&&i(`Processing sheet "${h}"...`),c(f.csv,h),f.sql&&l.push({name:h,sql:f.sql})})):(i&&i("Reading CSV content..."),c(t,"Query Results"),r.sql?l.push({name:"Query Results",sql:r.sql}):r.source&&(s.startSheet("CSV Source",1,void 0,{doAutofilter:!1}),s.writeRow(["CSV Source:"]),s.writeRow([r.source]),s.endSheet())),l.length>0&&(s.startSheet("SQL Code",1,void 0,{doAutofilter:!1}),l.forEach(f=>{s.writeRow([`--- SQL for ${f.name} ---`]),f.sql.split(`
`).forEach(p=>{s.writeRow([p])}),s.writeRow([""])}),s.endSheet()),i&&i("Finalizing XLSB file..."),await s.finalize();let d=aR.statSync(e).size/(1024*1024);i&&(i("XLSB file created successfully"),i(`  - Rows: ${o.toLocaleString()}`),i(`  - File size: ${d.toFixed(1)} MB`));let E={success:!0,message:`Successfully exported ${o} rows to ${e}`,details:{rows_exported:o,columns:a,file_size_mb:parseFloat(d.toFixed(1)),file_path:e}};if(n){i&&i("Copying file to clipboard...");let f=await cR(e);E.details&&(E.details.clipboard_success=f)}return E}catch(s){return{success:!1,message:`Export failed: ${s instanceof Error?s.message:String(s)}`}}}async function A0e(t,e,n=!1,r){try{r&&r("Initializing XLSB writer...");let i=new vy(e),s=0,o=0,a=[];for(let d of t){let E=d.name||"Sheet";r&&r(`Processing sheet "${E}"...`);let f=d.columns.map(h=>h.name),p=d.columns.map(h=>S0e(h.type));o=Math.max(o,f.length),i.startSheet(E,f.length,f,{doAutofilter:!0});for(let h of d.rows){let T=h.map((S,A)=>p[A]?My(S):S);i.writeRow(T),s++}i.endSheet(),d.sql&&a.push({name:E,sql:d.sql})}a.length>0&&(i.startSheet("SQL Code",1,void 0,{doAutofilter:!1}),a.forEach(d=>{i.writeRow([`--- SQL for ${d.name} ---`]),d.sql.split(`
`).forEach(E=>{i.writeRow([E])}),i.writeRow([""])}),i.endSheet()),r&&r("Finalizing XLSB file..."),await i.finalize();let c=aR.statSync(e).size/(1024*1024);r&&(r("XLSB file created successfully"),r(`  - Rows: ${s.toLocaleString()}`),r(`  - File size: ${c.toFixed(1)} MB`));let u={success:!0,message:`Successfully exported ${s} rows to ${e}`,details:{rows_exported:s,columns:o,file_size_mb:parseFloat(c.toFixed(1)),file_path:e}};if(n){r&&r("Copying file to clipboard...");let d=await cR(e);u.details&&(u.details.clipboard_success=d)}return u}catch(i){return{success:!1,message:`Export failed: ${i instanceof Error?i.message:String(i)}`}}}async function cR(t){return lR.platform()!=="win32"?(console.error("Clipboard file copy is only supported on Windows"),!1):new Promise(e=>{try{let n=$c.normalize($c.resolve(t)),r=`Set-Clipboard -Path "${n.replace(/"/g,'`"')}"`,i=(0,e6.spawn)("powershell.exe",["-NoProfile","-NonInteractive","-Command",r]),s="";i.stderr.on("data",o=>{s+=o.toString()}),i.on("close",o=>{o!==0?(console.error(`PowerShell clipboard copy failed: ${s}`),e(!1)):(console.log(`File copied to clipboard: ${n}`),e(!0))}),i.on("error",o=>{console.error(`Error spawning PowerShell: ${o.message}`),e(!1)})}catch(n){let r=n instanceof Error?n.message:String(n);console.error(`Error copying file to clipboard: ${r}`),e(!1)}})}function m0e(){let t=lR.tmpdir(),n=`netezza_export_${Date.now()}.xlsb`;return $c.join(t,n)}var aR,$c,lR,e6,vy,T0e,Yi=G(()=>{"use strict";aR=j(require("fs")),$c=j(require("path")),lR=j(require("os")),e6=require("child_process"),vy=(Zj(),Lo(Qj)).default;T0e=new Set(["INT8","INT2","INT4","NUMERIC","FLOAT4","FLOAT8","INTEGER","BIGINT","SMALLINT","DECIMAL","REAL","DOUBLE PRECISION"])});var i6=C((PGe,r6)=>{r6.exports=dR;function dR(){this.pending=0,this.max=1/0,this.listeners=[],this.waiting=[],this.error=null}dR.prototype.go=function(t){this.pending<this.max?n6(this,t):this.waiting.push(t)};dR.prototype.wait=function(t){this.pending===0?t(this.error):this.listeners.push(t)};dR.prototype.hold=function(){return t6(this)};function t6(t){t.pending+=1;var e=!1;return n;function n(i){if(e)throw new Error("callback called twice");if(e=!0,t.error=t.error||i,t.pending-=1,t.waiting.length>0&&t.pending<t.max)n6(t,t.waiting.shift());else if(t.pending===0){var s=t.listeners;t.listeners=[],s.forEach(r)}}function r(i){i(t.error)}}function n6(t,e){e(t6(t))}});var o6=C(Mf=>{var vf=require("fs"),fR=require("util"),Hy=require("stream"),s6=Hy.Readable,Gy=Hy.Writable,g0e=Hy.PassThrough,I0e=i6(),ER=require("events").EventEmitter;Mf.createFromBuffer=_0e;Mf.createFromFd=N0e;Mf.BufferSlicer=Ls;Mf.FdSlicer=ws;fR.inherits(ws,ER);function ws(t,e){e=e||{},ER.call(this),this.fd=t,this.pend=new I0e,this.pend.max=1,this.refCount=0,this.autoClose=!!e.autoClose}ws.prototype.read=function(t,e,n,r,i){var s=this;s.pend.go(function(o){vf.read(s.fd,t,e,n,r,function(a,l,c){o(),i(a,l,c)})})};ws.prototype.write=function(t,e,n,r,i){var s=this;s.pend.go(function(o){vf.write(s.fd,t,e,n,r,function(a,l,c){o(),i(a,l,c)})})};ws.prototype.createReadStream=function(t){return new hR(this,t)};ws.prototype.createWriteStream=function(t){return new pR(this,t)};ws.prototype.ref=function(){this.refCount+=1};ws.prototype.unref=function(){var t=this;if(t.refCount-=1,t.refCount>0)return;if(t.refCount<0)throw new Error("invalid unref");t.autoClose&&vf.close(t.fd,e);function e(n){n?t.emit("error",n):t.emit("close")}};fR.inherits(hR,s6);function hR(t,e){e=e||{},s6.call(this,e),this.context=t,this.context.ref(),this.start=e.start||0,this.endOffset=e.end,this.pos=this.start,this.destroyed=!1}hR.prototype._read=function(t){var e=this;if(!e.destroyed){var n=Math.min(e._readableState.highWaterMark,t);if(e.endOffset!=null&&(n=Math.min(n,e.endOffset-e.pos)),n<=0){e.destroyed=!0,e.push(null),e.context.unref();return}e.context.pend.go(function(r){if(e.destroyed)return r();var i=Buffer.allocUnsafe(n);vf.read(e.context.fd,i,0,n,e.pos,function(s,o){s?e.destroy(s):o===0?(e.destroyed=!0,e.push(null),e.context.unref()):(e.pos+=o,e.push(i.slice(0,o))),r()})})}};hR.prototype.destroy=function(t){this.destroyed||(t=t||new Error("stream destroyed"),this.destroyed=!0,this.emit("error",t),this.context.unref())};fR.inherits(pR,Gy);function pR(t,e){e=e||{},Gy.call(this,e),this.context=t,this.context.ref(),this.start=e.start||0,this.endOffset=e.end==null?1/0:+e.end,this.bytesWritten=0,this.pos=this.start,this.destroyed=!1,this.on("finish",this.destroy.bind(this))}pR.prototype._write=function(t,e,n){var r=this;if(!r.destroyed){if(r.pos+t.length>r.endOffset){var i=new Error("maximum file length exceeded");i.code="ETOOBIG",r.destroy(),n(i);return}r.context.pend.go(function(s){if(r.destroyed)return s();vf.write(r.context.fd,t,0,t.length,r.pos,function(o,a){o?(r.destroy(),s(),n(o)):(r.bytesWritten+=a,r.pos+=a,r.emit("progress"),s(),n())})})}};pR.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.context.unref())};fR.inherits(Ls,ER);function Ls(t,e){ER.call(this),e=e||{},this.refCount=0,this.buffer=t,this.maxChunkSize=e.maxChunkSize||Number.MAX_SAFE_INTEGER}Ls.prototype.read=function(t,e,n,r,i){if(!(0<=e&&e<=t.length))throw new RangeError("offset outside buffer: 0 <= "+e+" <= "+t.length);if(r<0)throw new RangeError("position is negative: "+r);if(e+n>t.length&&(n=t.length-e),r+n>this.buffer.length&&(n=this.buffer.length-r),n<=0){setImmediate(function(){i(null,0)});return}this.buffer.copy(t,e,r,r+n),setImmediate(function(){i(null,n)})};Ls.prototype.write=function(t,e,n,r,i){t.copy(this.buffer,r,e,e+n),setImmediate(function(){i(null,n,t)})};Ls.prototype.createReadStream=function(t){t=t||{};var e=new g0e(t);e.destroyed=!1,e.start=t.start||0,e.endOffset=t.end,e.pos=e.endOffset||this.buffer.length;for(var n=this.buffer.slice(e.start,e.pos),r=0;;){var i=r+this.maxChunkSize;if(i>=n.length){r<n.length&&e.write(n.slice(r,n.length));break}e.write(n.slice(r,i)),r=i}return e.end(),e.destroy=function(){e.destroyed=!0},e};Ls.prototype.createWriteStream=function(t){var e=this;t=t||{};var n=new Gy(t);return n.start=t.start||0,n.endOffset=t.end==null?this.buffer.length:+t.end,n.bytesWritten=0,n.pos=n.start,n.destroyed=!1,n._write=function(r,i,s){if(!n.destroyed){var o=n.pos+r.length;if(o>n.endOffset){var a=new Error("maximum file length exceeded");a.code="ETOOBIG",n.destroyed=!0,s(a);return}r.copy(e.buffer,n.pos,0,r.length),n.bytesWritten+=r.length,n.pos=o,n.emit("progress"),s()}},n.destroy=function(){n.destroyed=!0},n};Ls.prototype.ref=function(){this.refCount+=1};Ls.prototype.unref=function(){if(this.refCount-=1,this.refCount<0)throw new Error("invalid unref")};function _0e(t,e){return new Ls(t,e)}function N0e(t,e){return new ws(t,e)}});var c6=C((vGe,l6)=>{var mo=require("buffer").Buffer,$y=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];typeof Int32Array<"u"&&($y=new Int32Array($y));function a6(t){if(mo.isBuffer(t))return t;var e=typeof mo.alloc=="function"&&typeof mo.from=="function";if(typeof t=="number")return e?mo.alloc(t):new mo(t);if(typeof t=="string")return e?mo.from(t):new mo(t);throw new Error("input must be buffer, number, or string, received "+typeof t)}function O0e(t){var e=a6(4);return e.writeInt32BE(t,0),e}function ky(t,e){t=a6(t),mo.isBuffer(e)&&(e=e.readUInt32BE(0));for(var n=~~e^-1,r=0;r<t.length;r++)n=$y[(n^t[r])&255]^n>>>8;return n^-1}function Wy(){return O0e(ky.apply(null,arguments))}Wy.signed=function(){return ky.apply(null,arguments)};Wy.unsigned=function(){return ky.apply(null,arguments)>>>0};l6.exports=Wy});var A6=C(mr=>{var Yy=require("fs"),C0e=require("zlib"),u6=o6(),b0e=c6(),RR=require("util"),AR=require("events").EventEmitter,d6=require("stream").Transform,qy=require("stream").PassThrough,y0e=require("stream").Writable;mr.open=w0e;mr.fromFd=f6;mr.fromBuffer=L0e;mr.fromRandomAccessReader=Xy;mr.dosDateTimeToDate=p6;mr.getFileNameLowLevel=T6;mr.validateFileName=S6;mr.parseExtraFields=R6;mr.ZipFile=qi;mr.Entry=Uf;mr.LocalFileHeader=h6;mr.RandomAccessReader=go;function w0e(t,e,n){typeof e=="function"&&(n=e,e=null),e==null&&(e={}),e.autoClose==null&&(e.autoClose=!0),e.lazyEntries==null&&(e.lazyEntries=!1),e.decodeStrings==null&&(e.decodeStrings=!0),e.validateEntrySizes==null&&(e.validateEntrySizes=!0),e.strictFileNames==null&&(e.strictFileNames=!1),n==null&&(n=SR),Yy.open(t,"r",function(r,i){if(r)return n(r);f6(i,e,function(s,o){s&&Yy.close(i,SR),n(s,o)})})}function f6(t,e,n){typeof e=="function"&&(n=e,e=null),e==null&&(e={}),e.autoClose==null&&(e.autoClose=!1),e.lazyEntries==null&&(e.lazyEntries=!1),e.decodeStrings==null&&(e.decodeStrings=!0),e.validateEntrySizes==null&&(e.validateEntrySizes=!0),e.strictFileNames==null&&(e.strictFileNames=!1),n==null&&(n=SR),Yy.fstat(t,function(r,i){if(r)return n(r);var s=u6.createFromFd(t,{autoClose:!0});Xy(s,i.size,e,n)})}function L0e(t,e,n){typeof e=="function"&&(n=e,e=null),e==null&&(e={}),e.autoClose=!1,e.lazyEntries==null&&(e.lazyEntries=!1),e.decodeStrings==null&&(e.decodeStrings=!0),e.validateEntrySizes==null&&(e.validateEntrySizes=!0),e.strictFileNames==null&&(e.strictFileNames=!1);var r=u6.createFromBuffer(t,{maxChunkSize:65536});Xy(r,t.length,e,n)}function Xy(t,e,n,r){typeof n=="function"&&(r=n,n=null),n==null&&(n={}),n.autoClose==null&&(n.autoClose=!0),n.lazyEntries==null&&(n.lazyEntries=!1),n.decodeStrings==null&&(n.decodeStrings=!0);var i=!!n.decodeStrings;if(n.validateEntrySizes==null&&(n.validateEntrySizes=!0),n.strictFileNames==null&&(n.strictFileNames=!1),r==null&&(r=SR),typeof e!="number")throw new Error("expected totalSize parameter to be a number");if(e>Number.MAX_SAFE_INTEGER)throw new Error("zip file too large. only file sizes up to 2^52 are supported due to JavaScript's Number type being an IEEE 754 double.");t.ref();var s=22,o=20,a=65535,l=Math.min(o+s+a,e),c=Ds(l),u=e-c.length;Wc(t,c,0,l,u,function(d){if(d)return r(d);for(var E=l-s;E>=0;E-=1)if(c.readUInt32LE(E)===101010256){var f=c.subarray(E),p=f.readUInt16LE(4),h=f.readUInt16LE(10),T=f.readUInt32LE(16),S=f.readUInt16LE(20),A=f.length-s;if(S!==A)return r(new Error("Invalid comment length. Expected: "+A+". Found: "+S+". Are there extra bytes at the end of the file? Or is the end of central dir signature `PK\u263A\u263B` in the comment?"));var R=i?TR(f.subarray(22),!1):f.subarray(22);if(E-o>=0&&c.readUInt32LE(E-o)===117853008){var m=c.subarray(E-o,E-o+o),N=kc(m,8),L=Ds(56);return Wc(t,L,0,L.length,N,function(I){return I?r(I):L.readUInt32LE(0)!==101075792?r(new Error("invalid zip64 end of central directory record signature")):(p=L.readUInt32LE(16),p!==0?r(new Error("multi-disk zip files are not supported: found disk number: "+p)):(h=kc(L,32),T=kc(L,48),r(null,new qi(t,T,e,h,R,n.autoClose,n.lazyEntries,i,n.validateEntrySizes,n.strictFileNames))))})}return p!==0?r(new Error("multi-disk zip files are not supported: found disk number: "+p)):r(null,new qi(t,T,e,h,R,n.autoClose,n.lazyEntries,i,n.validateEntrySizes,n.strictFileNames))}r(new Error("End of central directory record signature not found. Either not a zip file, or file is truncated."))})}RR.inherits(qi,AR);function qi(t,e,n,r,i,s,o,a,l,c){var u=this;AR.call(u),u.reader=t,u.reader.on("error",function(d){E6(u,d)}),u.reader.once("close",function(){u.emit("close")}),u.readEntryCursor=e,u.fileSize=n,u.entryCount=r,u.comment=i,u.entriesRead=0,u.autoClose=!!s,u.lazyEntries=!!o,u.decodeStrings=!!a,u.validateEntrySizes=!!l,u.strictFileNames=!!c,u.isOpen=!0,u.emittedError=!1,u.lazyEntries||u._readEntry()}qi.prototype.close=function(){this.isOpen&&(this.isOpen=!1,this.reader.unref())};function Vi(t,e){t.autoClose&&t.close(),E6(t,e)}function E6(t,e){t.emittedError||(t.emittedError=!0,t.emit("error",e))}qi.prototype.readEntry=function(){if(!this.lazyEntries)throw new Error("readEntry() called without lazyEntries:true");this._readEntry()};qi.prototype._readEntry=function(){var t=this;if(t.entryCount===t.entriesRead){setImmediate(function(){t.autoClose&&t.close(),!t.emittedError&&t.emit("end")});return}if(!t.emittedError){var e=Ds(46);Wc(t.reader,e,0,e.length,t.readEntryCursor,function(n){if(n)return Vi(t,n);if(!t.emittedError){var r=new Uf,i=e.readUInt32LE(0);if(i!==33639248)return Vi(t,new Error("invalid central directory file header signature: 0x"+i.toString(16)));if(r.versionMadeBy=e.readUInt16LE(4),r.versionNeededToExtract=e.readUInt16LE(6),r.generalPurposeBitFlag=e.readUInt16LE(8),r.compressionMethod=e.readUInt16LE(10),r.lastModFileTime=e.readUInt16LE(12),r.lastModFileDate=e.readUInt16LE(14),r.crc32=e.readUInt32LE(16),r.compressedSize=e.readUInt32LE(20),r.uncompressedSize=e.readUInt32LE(24),r.fileNameLength=e.readUInt16LE(28),r.extraFieldLength=e.readUInt16LE(30),r.fileCommentLength=e.readUInt16LE(32),r.internalFileAttributes=e.readUInt16LE(36),r.externalFileAttributes=e.readUInt32LE(38),r.relativeOffsetOfLocalHeader=e.readUInt32LE(42),r.generalPurposeBitFlag&64)return Vi(t,new Error("strong encryption is not supported"));t.readEntryCursor+=46,e=Ds(r.fileNameLength+r.extraFieldLength+r.fileCommentLength),Wc(t.reader,e,0,e.length,t.readEntryCursor,function(s){if(s)return Vi(t,s);if(!t.emittedError){r.fileNameRaw=e.subarray(0,r.fileNameLength);var o=r.fileNameLength+r.extraFieldLength;r.extraFieldRaw=e.subarray(r.fileNameLength,o),r.fileCommentRaw=e.subarray(o,o+r.fileCommentLength);try{r.extraFields=R6(r.extraFieldRaw)}catch(h){return Vi(t,h)}if(t.decodeStrings){var a=(r.generalPurposeBitFlag&2048)!==0;r.fileComment=TR(r.fileCommentRaw,a),r.fileName=T6(r.generalPurposeBitFlag,r.fileNameRaw,r.extraFields,t.strictFileNames);var l=S6(r.fileName);if(l!=null)return Vi(t,new Error(l))}else r.fileComment=r.fileCommentRaw,r.fileName=r.fileNameRaw;r.comment=r.fileComment,t.readEntryCursor+=e.length,t.entriesRead+=1;for(var c=0;c<r.extraFields.length;c++){var u=r.extraFields[c];if(u.id===1){var d=u.data,E=0;if(r.uncompressedSize===4294967295){if(E+8>d.length)return Vi(t,new Error("zip64 extended information extra field does not include uncompressed size"));r.uncompressedSize=kc(d,E),E+=8}if(r.compressedSize===4294967295){if(E+8>d.length)return Vi(t,new Error("zip64 extended information extra field does not include compressed size"));r.compressedSize=kc(d,E),E+=8}if(r.relativeOffsetOfLocalHeader===4294967295){if(E+8>d.length)return Vi(t,new Error("zip64 extended information extra field does not include relative header offset"));r.relativeOffsetOfLocalHeader=kc(d,E),E+=8}break}}if(t.validateEntrySizes&&r.compressionMethod===0){var f=r.uncompressedSize;if(r.isEncrypted()&&(f+=12),r.compressedSize!==f){var p="compressed/uncompressed size mismatch for stored file: "+r.compressedSize+" != "+r.uncompressedSize;return Vi(t,new Error(p))}}t.emit("entry",r),t.lazyEntries||t._readEntry()}})}})}};qi.prototype.openReadStream=function(t,e,n){var r=this,i=0,s=t.compressedSize;if(n==null&&(n=e,e=null),e==null)e={};else{if(e.decrypt!=null){if(!t.isEncrypted())throw new Error("options.decrypt can only be specified for encrypted entries");if(e.decrypt!==!1)throw new Error("invalid options.decrypt value: "+e.decrypt);if(t.isCompressed()&&e.decompress!==!1)throw new Error("entry is encrypted and compressed, and options.decompress !== false")}if(e.decompress!=null){if(!t.isCompressed())throw new Error("options.decompress can only be specified for compressed entries");if(!(e.decompress===!1||e.decompress===!0))throw new Error("invalid options.decompress value: "+e.decompress)}if(e.start!=null||e.end!=null){if(t.isCompressed()&&e.decompress!==!1)throw new Error("start/end range not allowed for compressed entry without options.decompress === false");if(t.isEncrypted()&&e.decrypt!==!1)throw new Error("start/end range not allowed for encrypted entry without options.decrypt === false")}if(e.start!=null){if(i=e.start,i<0)throw new Error("options.start < 0");if(i>t.compressedSize)throw new Error("options.start > entry.compressedSize")}if(e.end!=null){if(s=e.end,s<0)throw new Error("options.end < 0");if(s>t.compressedSize)throw new Error("options.end > entry.compressedSize");if(s<i)throw new Error("options.end < options.start")}}if(!r.isOpen)return n(new Error("closed"));if(t.isEncrypted()&&e.decrypt!==!1)return n(new Error("entry is encrypted, and options.decrypt !== false"));var o;if(t.compressionMethod===0)o=!1;else if(t.compressionMethod===8)o=e.decompress!=null?e.decompress:!0;else return n(new Error("unsupported compression method: "+t.compressionMethod));r.readLocalFileHeader(t,{minimal:!0},function(a,l){if(a)return n(a);r.openReadStreamLowLevel(l.fileDataStart,t.compressedSize,i,s,o,t.uncompressedSize,n)})};qi.prototype.openReadStreamLowLevel=function(t,e,n,r,i,s,o){var a=this,l=t+e,c=a.reader.createReadStream({start:t+n,end:t+r}),u=c;if(i){var d=!1,E=C0e.createInflateRaw();c.on("error",function(f){setImmediate(function(){d||E.emit("error",f)})}),c.pipe(E),a.validateEntrySizes?(u=new Bf(s),E.on("error",function(f){setImmediate(function(){d||u.emit("error",f)})}),E.pipe(u)):u=E,Vy(u,function(){d=!0,E!==u&&E.unpipe(u),c.unpipe(E),c.destroy()})}o(null,u)};qi.prototype.readLocalFileHeader=function(t,e,n){var r=this;n==null&&(n=e,e=null),e==null&&(e={}),r.reader.ref();var i=Ds(30);Wc(r.reader,i,0,i.length,t.relativeOffsetOfLocalHeader,function(s){try{if(s)return n(s);var o=i.readUInt32LE(0);if(o!==67324752)return n(new Error("invalid local file header signature: 0x"+o.toString(16)));var a=i.readUInt16LE(26),l=i.readUInt16LE(28),c=t.relativeOffsetOfLocalHeader+30+a+l;if(c+t.compressedSize>r.fileSize)return n(new Error("file data overflows file bounds: "+c+" + "+t.compressedSize+" > "+r.fileSize));if(e.minimal)return n(null,{fileDataStart:c});var u=new h6;u.fileDataStart=c,u.versionNeededToExtract=i.readUInt16LE(4),u.generalPurposeBitFlag=i.readUInt16LE(6),u.compressionMethod=i.readUInt16LE(8),u.lastModFileTime=i.readUInt16LE(10),u.lastModFileDate=i.readUInt16LE(12),u.crc32=i.readUInt32LE(14),u.compressedSize=i.readUInt32LE(18),u.uncompressedSize=i.readUInt32LE(22),u.fileNameLength=a,u.extraFieldLength=l,i=Ds(a+l),r.reader.ref(),Wc(r.reader,i,0,i.length,t.relativeOffsetOfLocalHeader+30,function(d){try{return d?n(d):(u.fileName=i.subarray(0,a),u.extraField=i.subarray(a),n(null,u))}finally{r.reader.unref()}})}finally{r.reader.unref()}})};function Uf(){}Uf.prototype.getLastModDate=function(t){if(t==null&&(t={}),!t.forceDosFormat)for(var e=0;e<this.extraFields.length;e++){var n=this.extraFields[e];if(n.id===21589){var r=n.data;if(r.length<5)continue;var i=r[0],s=1;if(!(i&s))continue;var o=r.readInt32LE(1);return new Date(o*1e3)}else if(n.id===10)for(var r=n.data,a=4;a<r.length+4;){var l=r.readUInt16LE(a);a+=2;var c=r.readUInt16LE(a);if(a+=2,l!==1){a+=c;continue}if(c<8||a+c>r.length)break;var u=4294967296*r.readInt32LE(a+4)+r.readUInt32LE(a),d=u/1e4-116444736e5;return new Date(d)}}return p6(this.lastModFileDate,this.lastModFileTime,t.timezone)};Uf.prototype.isEncrypted=function(){return(this.generalPurposeBitFlag&1)!==0};Uf.prototype.isCompressed=function(){return this.compressionMethod===8};function h6(){}function p6(t,e,n){var r=t&31,i=(t>>5&15)-1,s=(t>>9&127)+1980,o=0,a=(e&31)*2,l=e>>5&63,c=e>>11&31;if(n==null||n==="local")return new Date(s,i,r,c,l,a,o);if(n==="UTC")return new Date(Date.UTC(s,i,r,c,l,a,o));throw new Error("unrecognized options.timezone: "+options.timezone)}function T6(t,e,n,r){for(var i=null,s=0;s<n.length;s++){var o=n[s];if(o.id===28789){if(o.data.length<6||o.data.readUInt8(0)!==1)continue;var a=o.data.readUInt32LE(1);if(b0e.unsigned(e)!==a)continue;i=TR(o.data.subarray(5),!0);break}}if(i==null){var l=(t&2048)!==0;i=TR(e,l)}return r||(i=i.replace(/\\/g,"/")),i}function S6(t){return t.indexOf("\\")!==-1?"invalid characters in fileName: "+t:/^[a-zA-Z]:/.test(t)||/^\//.test(t)?"absolute path: "+t:t.split("/").indexOf("..")!==-1?"invalid relative path: "+t:null}function R6(t){for(var e=[],n=0;n<t.length-3;){var r=t.readUInt16LE(n+0),i=t.readUInt16LE(n+2),s=n+4,o=s+i;if(o>t.length)throw new Error("extra field length exceeds extra field buffer size");var a=t.subarray(s,o);e.push({id:r,data:a}),n=o}return e}function Wc(t,e,n,r,i,s){if(r===0)return setImmediate(function(){s(null,Ds(0))});t.read(e,n,r,i,function(o,a){if(o)return s(o);if(a<r)return s(new Error("unexpected EOF"));s()})}RR.inherits(Bf,d6);function Bf(t){d6.call(this),this.actualByteCount=0,this.expectedByteCount=t}Bf.prototype._transform=function(t,e,n){if(this.actualByteCount+=t.length,this.actualByteCount>this.expectedByteCount){var r="too many bytes in the stream. expected "+this.expectedByteCount+". got at least "+this.actualByteCount;return n(new Error(r))}n(null,t)};Bf.prototype._flush=function(t){if(this.actualByteCount<this.expectedByteCount){var e="not enough bytes in the stream. expected "+this.expectedByteCount+". got only "+this.actualByteCount;return t(new Error(e))}t()};RR.inherits(go,AR);function go(){AR.call(this),this.refCount=0}go.prototype.ref=function(){this.refCount+=1};go.prototype.unref=function(){var t=this;if(t.refCount-=1,t.refCount>0)return;if(t.refCount<0)throw new Error("invalid unref");t.close(e);function e(n){if(n)return t.emit("error",n);t.emit("close")}};go.prototype.createReadStream=function(t){t==null&&(t={});var e=t.start,n=t.end;if(e===n){var r=new qy;return setImmediate(function(){r.end()}),r}var i=this._readStreamForRange(e,n),s=!1,o=new mR(this);i.on("error",function(l){setImmediate(function(){s||o.emit("error",l)})}),Vy(o,function(){i.unpipe(o),o.unref(),i.destroy()});var a=new Bf(n-e);return o.on("error",function(l){setImmediate(function(){s||a.emit("error",l)})}),Vy(a,function(){s=!0,o.unpipe(a),o.destroy()}),i.pipe(o).pipe(a)};go.prototype._readStreamForRange=function(t,e){throw new Error("not implemented")};go.prototype.read=function(t,e,n,r,i){var s=this.createReadStream({start:r,end:r+n}),o=new y0e,a=0;o._write=function(l,c,u){l.copy(t,e+a,0,l.length),a+=l.length,u()},o.on("finish",i),s.on("error",function(l){i(l)}),s.pipe(o)};go.prototype.close=function(t){setImmediate(t)};RR.inherits(mR,qy);function mR(t){qy.call(this),this.context=t,this.context.ref(),this.unreffedYet=!1}mR.prototype._flush=function(t){this.unref(),t()};mR.prototype.unref=function(t){this.unreffedYet||(this.unreffedYet=!0,this.context.unref())};var D0e="\0\u263A\u263B\u2665\u2666\u2663\u2660\u2022\u25D8\u25CB\u25D9\u2642\u2640\u266A\u266B\u263C\u25BA\u25C4\u2195\u203C\xB6\xA7\u25AC\u21A8\u2191\u2193\u2192\u2190\u221F\u2194\u25B2\u25BC !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\u2302\xC7\xFC\xE9\xE2\xE4\xE0\xE5\xE7\xEA\xEB\xE8\xEF\xEE\xEC\xC4\xC5\xC9\xE6\xC6\xF4\xF6\xF2\xFB\xF9\xFF\xD6\xDC\xA2\xA3\xA5\u20A7\u0192\xE1\xED\xF3\xFA\xF1\xD1\xAA\xBA\xBF\u2310\xAC\xBD\xBC\xA1\xAB\xBB\u2591\u2592\u2593\u2502\u2524\u2561\u2562\u2556\u2555\u2563\u2551\u2557\u255D\u255C\u255B\u2510\u2514\u2534\u252C\u251C\u2500\u253C\u255E\u255F\u255A\u2554\u2569\u2566\u2560\u2550\u256C\u2567\u2568\u2564\u2565\u2559\u2558\u2552\u2553\u256B\u256A\u2518\u250C\u2588\u2584\u258C\u2590\u2580\u03B1\xDF\u0393\u03C0\u03A3\u03C3\xB5\u03C4\u03A6\u0398\u03A9\u03B4\u221E\u03C6\u03B5\u2229\u2261\xB1\u2265\u2264\u2320\u2321\xF7\u2248\xB0\u2219\xB7\u221A\u207F\xB2\u25A0\xA0";function TR(t,e){if(e)return t.toString("utf8");for(var n="",r=0;r<t.length;r++)n+=D0e[t[r]];return n}function kc(t,e){var n=t.readUInt32LE(e),r=t.readUInt32LE(e+4);return r*4294967296+n}var Ds;typeof Buffer.allocUnsafe=="function"?Ds=function(t){return Buffer.allocUnsafe(t)}:Ds=function(t){return new Buffer(t)};function Vy(t,e){typeof t.destroy=="function"?t._destroy=function(n,r){e(),r?.(n)}:t.destroy=e}function SR(t){if(t)throw t}});var Yc,zy=G(()=>{"use strict";Yc=class{constructor(){this.fieldCount=0;this.rowCount=0;this.actualSheetName="";this.resultsCount=0;this._oaEpoch=Date.UTC(1899,11,30)}async close(){}dispose(){}getDateTimeFromOaDate(e){let n=e*864e5+this._oaEpoch;return new Date(n)}}});var m6,gR,g6=G(()=>{"use strict";m6=j(A6());zy();gR=class extends Yc{constructor(){super();this.zipfile=null;this.sharedStrings=[];this.styles=[];this.sheetNames=[];this.sheets=[];this.entries=new Map;this._currentSheetIndex=-1;this._sheetXml=null;this._xmlPos=0;this._currentRow=[];this.xfIdToNumFmtId=[];this.customDateFormats=new Set}async open(n,r=!0){return new Promise((i,s)=>{m6.default.open(n,{lazyEntries:!0,autoClose:!1},async(o,a)=>{if(o)return s(o);this.zipfile=a,this.entries=new Map,a.on("entry",l=>{this.entries.set(l.fileName,l),a.readEntry()}),a.on("end",async()=>{try{let l=await this._readZipEntryContent("xl/_rels/workbook.xml.rels"),c={};if(l){let E=/<Relationship[^>]*Id="([^"]*)"[^>]*Target="([^"]*)"/g,f;for(;(f=E.exec(l))!==null;)c[f[1]]=f[2]}let u=await this._readZipEntryContent("xl/workbook.xml");if(u){let E=/<sheet[^>]*name="([^"]*)"[^>]*sheetId="([^"]*)"[^>]*r:id="([^"]*)"/g,f;for(;(f=E.exec(u))!==null;){let p=this._unescapeXml(f[1]),h=f[2],T=f[3],A=c[T];A.startsWith("xl/")||(A="xl/"+A),this.sheetNames.push(p),this.sheets.push({name:p,sheetId:h,rId:T,path:A})}}if(r){let E=await this._readZipEntryContent("xl/sharedStrings.xml");E&&this._parseSharedStrings(E)}let d=await this._readZipEntryContent("xl/styles.xml");d&&this._parseStyles(d),this.resultsCount=this.sheets.length,this._currentSheetIndex=-1,i()}catch(l){s(l)}}),a.readEntry()})})}async close(){this.zipfile&&this.zipfile.close()}async _readZipEntryContent(n){let r=this.entries.get(n);return r?new Promise((i,s)=>{this.zipfile.openReadStream(r,(o,a)=>{if(o)return s(o);let l=[];a.on("data",c=>l.push(c)),a.on("end",()=>{i(Buffer.concat(l).toString("utf8"))}),a.on("error",s)})}):null}_unescapeXml(n){return n?n.indexOf("&")===-1?n:n.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&apos;/g,"'"):""}_parseSharedStrings(n){let r=0;for(;;){let i=n.indexOf("<si>",r);if(i===-1)break;let s=n.indexOf("</si>",i);if(s===-1)break;let o=n.substring(i,s),a="",l=0;for(;;){let c=o.indexOf("<t",l);if(c===-1)break;let u=o.indexOf(">",c),d=o.indexOf("</t>",u);if(d===-1)break;a+=o.substring(u+1,d),l=d+4}this.sharedStrings.push(this._unescapeXml(a)),r=s+5}}_parseStyles(n){let r=/<numFmt\s+[^>]*numFmtId="(\d+)"[^>]*formatCode="([^"]*)"/g,i;for(this.customDateFormats=new Set;(i=r.exec(n))!==null;){let o=parseInt(i[1]),a=i[2];(a.toLowerCase().includes("yy")||a.toLowerCase().includes("mm")||a.toLowerCase().includes("dd")||a.toLowerCase().includes("h:mm"))&&this.customDateFormats.add(o)}this.xfIdToNumFmtId=[];let s=n.indexOf("<cellXfs");if(s!==-1){let o=n.indexOf("</cellXfs>",s);if(o!==-1){let a=n.substring(s,o),l=/<xf\s+[^>]*numFmtId="(\d+)"/g;for(;(i=l.exec(a))!==null;){let c=parseInt(i[1]);this.xfIdToNumFmtId.push(c)}}}}getSheetNames(){return this.sheetNames}async read(){return this._currentSheetIndex===-1&&(this._currentSheetIndex=0,await this._initSheet(this._currentSheetIndex)),!!this._readNextRow()}async _initSheet(n){if(n>=this.sheets.length)return;let r=this.sheets[n];this.actualSheetName=r.name,this._sheetXml=await this._readZipEntryContent(r.path),this._sheetXml||(this._sheetXml=""),this._xmlPos=0;let i=this._sheetXml.indexOf("<sheetData>");i!==-1&&(this._xmlPos=i+11)}_readNextRow(){if(!this._sheetXml)return!1;let n=this._sheetXml.indexOf("<row",this._xmlPos);if(n===-1)return!1;let r=this._sheetXml.indexOf("</row>",n);return r===-1?!1:(this._xmlPos=r+6,this._parseRowByIndex(n,r),!0)}_parseRowByIndex(n,r){this._currentRow=[];let i=this._sheetXml,s=i.indexOf(">",n)+1;for(;s<r;){let o=i.indexOf("<c",s);if(o===-1||o>=r)break;let a=i.indexOf(">",o),l=-1,c="n",u=0,d=o+2;for(;d<a;){for(;i.charCodeAt(d)<=32&&d<a;)d++;if(d>=a)break;let p=d;for(;i.charCodeAt(d)!==61&&d<a;)d++;let h=i.substring(p,d);if(d++,i.charCodeAt(d)===34){d++;let T=d;for(;i.charCodeAt(d)!==34&&d<a;)d++;let S=i.substring(T,d);if(d++,h==="r"){let A=0;for(;A<S.length&&S.charCodeAt(A)>=65;)A++;l=this._columnLetterToIndex(S.substring(0,A))}else h==="t"?c=S:h==="s"&&(u=parseInt(S,10))}}let E=null;if(i.charCodeAt(a-1)===47)s=a+1;else{let p=i.indexOf("</c>",a),h=p!==-1&&p<r?p:r,T=i.indexOf("<v>",a);if(T!==-1&&T<h){let S=T+3,A=i.indexOf("</v>",S);A!==-1&&A<h&&(E=i.substring(S,A))}else if(c==="inlineStr"){let S=i.indexOf("<t",a);if(S!==-1&&S<h){let A=i.indexOf(">",S)+1,R=i.indexOf("</t>",A);R!==-1&&R<h&&(E=i.substring(A,R))}}s=h+4}let f=null;if(E!==null){if(c==="s"){let p=parseInt(E,10);f=this.sharedStrings[p]}else if(c==="b")f=E==="1"||E==="true";else if(c==="inlineStr")f=this._unescapeXml(E);else if((c==="n"||c==="")&&(f=parseFloat(E),u>0&&this.xfIdToNumFmtId)){let p=0;if(u<this.xfIdToNumFmtId.length&&(p=this.xfIdToNumFmtId[u]),p>=14&&p<=22||p>=45&&p<=47||this.customDateFormats&&this.customDateFormats.has(p))try{f=this.getDateTimeFromOaDate(f)}catch{}}}l!==-1&&(this._currentRow[l]=f,l>=this.fieldCount&&(this.fieldCount=l+1))}}_columnLetterToIndex(n){let r=0,i=n.length;for(let s=0;s<i;s++)r+=(n.charCodeAt(s)-64)*Math.pow(26,i-s-1);return r-1}getValue(n){return n<0||n>=this._currentRow.length?null:this._currentRow[n]}}});var jy=C((HGe,I6)=>{I6.exports={LOCHDR:30,LOCSIG:67324752,LOCVER:4,LOCFLG:6,LOCHOW:8,LOCTIM:10,LOCCRC:14,LOCSIZ:18,LOCLEN:22,LOCNAM:26,LOCEXT:28,EXTSIG:134695760,EXTHDR:16,EXTCRC:4,EXTSIZ:8,EXTLEN:12,CENHDR:46,CENSIG:33639248,CENVEM:4,CENVER:6,CENFLG:8,CENHOW:10,CENTIM:12,CENCRC:16,CENSIZ:20,CENLEN:24,CENNAM:28,CENEXT:30,CENCOM:32,CENDSK:34,CENATT:36,CENATX:38,CENOFF:42,ENDHDR:22,ENDSIG:101010256,ENDSUB:8,ENDTOT:10,ENDSIZ:12,ENDOFF:16,ENDCOM:20,END64HDR:20,END64SIG:117853008,END64START:4,END64OFF:8,END64NUMDISKS:16,ZIP64SIG:101075792,ZIP64HDR:56,ZIP64LEAD:12,ZIP64SIZE:4,ZIP64VEM:12,ZIP64VER:14,ZIP64DSK:16,ZIP64DSKDIR:20,ZIP64SUB:24,ZIP64TOT:32,ZIP64SIZB:40,ZIP64OFF:48,ZIP64EXTRA:56,STORED:0,SHRUNK:1,REDUCED1:2,REDUCED2:3,REDUCED3:4,REDUCED4:5,IMPLODED:6,DEFLATED:8,ENHANCED_DEFLATED:9,PKWARE:10,BZIP2:12,LZMA:14,IBM_TERSE:18,IBM_LZ77:19,AES_ENCRYPT:99,FLG_ENC:1,FLG_COMP1:2,FLG_COMP2:4,FLG_DESC:8,FLG_ENH:16,FLG_PATCH:32,FLG_STR:64,FLG_EFS:2048,FLG_MSK:4096,FILE:2,BUFFER:1,NONE:0,EF_ID:0,EF_SIZE:2,ID_ZIP64:1,ID_AVINFO:7,ID_PFS:8,ID_OS2:9,ID_NTFS:10,ID_OPENVMS:12,ID_UNIX:13,ID_FORK:14,ID_PATCH:15,ID_X509_PKCS7:20,ID_X509_CERTID_F:21,ID_X509_CERTID_C:22,ID_STRONGENC:23,ID_RECORD_MGT:24,ID_X509_PKCS7_RL:25,ID_IBM1:101,ID_IBM2:102,ID_POSZIP:18064,EF_ZIP64_OR_32:4294967295,EF_ZIP64_OR_16:65535,EF_ZIP64_SUNCOMP:0,EF_ZIP64_SCOMP:8,EF_ZIP64_RHO:16,EF_ZIP64_DSN:24}});var IR=C(N6=>{var _6={INVALID_LOC:"Invalid LOC header (bad signature)",INVALID_CEN:"Invalid CEN header (bad signature)",INVALID_END:"Invalid END header (bad signature)",DESCRIPTOR_NOT_EXIST:"No descriptor present",DESCRIPTOR_UNKNOWN:"Unknown descriptor format",DESCRIPTOR_FAULTY:"Descriptor data is malformed",NO_DATA:"Nothing to decompress",BAD_CRC:"CRC32 checksum failed {0}",FILE_IN_THE_WAY:"There is a file in the way: {0}",UNKNOWN_METHOD:"Invalid/unsupported compression method",AVAIL_DATA:"inflate::Available inflate data did not terminate",INVALID_DISTANCE:"inflate::Invalid literal/length or distance code in fixed or dynamic block",TO_MANY_CODES:"inflate::Dynamic block code description: too many length or distance codes",INVALID_REPEAT_LEN:"inflate::Dynamic block code description: repeat more than specified lengths",INVALID_REPEAT_FIRST:"inflate::Dynamic block code description: repeat lengths with no first length",INCOMPLETE_CODES:"inflate::Dynamic block code description: code lengths codes incomplete",INVALID_DYN_DISTANCE:"inflate::Dynamic block code description: invalid distance code lengths",INVALID_CODES_LEN:"inflate::Dynamic block code description: invalid literal/length code lengths",INVALID_STORE_BLOCK:"inflate::Stored block length did not match one's complement",INVALID_BLOCK_TYPE:"inflate::Invalid block type (type == 3)",CANT_EXTRACT_FILE:"Could not extract the file",CANT_OVERRIDE:"Target file already exists",DISK_ENTRY_TOO_LARGE:"Number of disk entries is too large",NO_ZIP:"No zip file was loaded",NO_ENTRY:"Entry doesn't exist",DIRECTORY_CONTENT_ERROR:"A directory cannot have content",FILE_NOT_FOUND:'File not found: "{0}"',NOT_IMPLEMENTED:"Not implemented",INVALID_FILENAME:"Invalid filename",INVALID_FORMAT:"Invalid or unsupported zip format. No END header found",INVALID_PASS_PARAM:"Incompatible password parameter",WRONG_PASSWORD:"Wrong Password",COMMENT_TOO_LONG:"Comment is too long",EXTRA_FIELD_PARSE_ERROR:"Extra field parsing error"};function P0e(t){return function(...e){return e.length&&(t=t.replace(/\{(\d)\}/g,(n,r)=>e[r]||"")),new Error("ADM-ZIP: "+t)}}for(let t of Object.keys(_6))N6[t]=P0e(_6[t])});var w6=C(($Ge,y6)=>{var x0e=require("fs"),ln=require("path"),O6=jy(),v0e=IR(),M0e=typeof process=="object"&&process.platform==="win32",C6=t=>typeof t=="object"&&t!==null,b6=new Uint32Array(256).map((t,e)=>{for(let n=0;n<8;n++)(e&1)!==0?e=3988292384^e>>>1:e>>>=1;return e>>>0});function Mt(t){this.sep=ln.sep,this.fs=x0e,C6(t)&&C6(t.fs)&&typeof t.fs.statSync=="function"&&(this.fs=t.fs)}y6.exports=Mt;Mt.prototype.makeDir=function(t){let e=this;function n(r){let i=r.split(e.sep)[0];r.split(e.sep).forEach(function(s){if(!(!s||s.substr(-1,1)===":")){i+=e.sep+s;var o;try{o=e.fs.statSync(i)}catch{e.fs.mkdirSync(i)}if(o&&o.isFile())throw v0e.FILE_IN_THE_WAY(`"${i}"`)}})}n(t)};Mt.prototype.writeFileTo=function(t,e,n,r){let i=this;if(i.fs.existsSync(t)){if(!n)return!1;var s=i.fs.statSync(t);if(s.isDirectory())return!1}var o=ln.dirname(t);i.fs.existsSync(o)||i.makeDir(o);var a;try{a=i.fs.openSync(t,"w",438)}catch{i.fs.chmodSync(t,438),a=i.fs.openSync(t,"w",438)}if(a)try{i.fs.writeSync(a,e,0,e.length,0)}finally{i.fs.closeSync(a)}return i.fs.chmodSync(t,r||438),!0};Mt.prototype.writeFileToAsync=function(t,e,n,r,i){typeof r=="function"&&(i=r,r=void 0);let s=this;s.fs.exists(t,function(o){if(o&&!n)return i(!1);s.fs.stat(t,function(a,l){if(o&&l.isDirectory())return i(!1);var c=ln.dirname(t);s.fs.exists(c,function(u){u||s.makeDir(c),s.fs.open(t,"w",438,function(d,E){d?s.fs.chmod(t,438,function(){s.fs.open(t,"w",438,function(f,p){s.fs.write(p,e,0,e.length,0,function(){s.fs.close(p,function(){s.fs.chmod(t,r||438,function(){i(!0)})})})})}):E?s.fs.write(E,e,0,e.length,0,function(){s.fs.close(E,function(){s.fs.chmod(t,r||438,function(){i(!0)})})}):s.fs.chmod(t,r||438,function(){i(!0)})})})})})};Mt.prototype.findFiles=function(t){let e=this;function n(r,i,s){typeof i=="boolean"&&(s=i,i=void 0);let o=[];return e.fs.readdirSync(r).forEach(function(a){let l=ln.join(r,a),c=e.fs.statSync(l);(!i||i.test(l))&&o.push(ln.normalize(l)+(c.isDirectory()?e.sep:"")),c.isDirectory()&&s&&(o=o.concat(n(l,i,s)))}),o}return n(t,void 0,!0)};Mt.prototype.findFilesAsync=function(t,e){let n=this,r=[];n.fs.readdir(t,function(i,s){if(i)return e(i);let o=s.length;if(!o)return e(null,r);s.forEach(function(a){a=ln.join(t,a),n.fs.stat(a,function(l,c){if(l)return e(l);c&&(r.push(ln.normalize(a)+(c.isDirectory()?n.sep:"")),c.isDirectory()?n.findFilesAsync(a,function(u,d){if(u)return e(u);r=r.concat(d),--o||e(null,r)}):--o||e(null,r))})})})};Mt.prototype.getAttributes=function(){};Mt.prototype.setAttributes=function(){};Mt.crc32update=function(t,e){return b6[(t^e)&255]^t>>>8};Mt.crc32=function(t){typeof t=="string"&&(t=Buffer.from(t,"utf8"));let e=t.length,n=-1;for(let r=0;r<e;)n=Mt.crc32update(n,t[r++]);return~n>>>0};Mt.methodToString=function(t){switch(t){case O6.STORED:return"STORED ("+t+")";case O6.DEFLATED:return"DEFLATED ("+t+")";default:return"UNSUPPORTED ("+t+")"}};Mt.canonical=function(t){if(!t)return"";let e=ln.posix.normalize("/"+t.split("\\").join("/"));return ln.join(".",e)};Mt.zipnamefix=function(t){if(!t)return"";let e=ln.posix.normalize("/"+t.split("\\").join("/"));return ln.posix.join(".",e)};Mt.findLast=function(t,e){if(!Array.isArray(t))throw new TypeError("arr is not array");let n=t.length>>>0;for(let r=n-1;r>=0;r--)if(e(t[r],r,t))return t[r]};Mt.sanitize=function(t,e){t=ln.resolve(ln.normalize(t));for(var n=e.split("/"),r=0,i=n.length;r<i;r++){var s=ln.normalize(ln.join(t,n.slice(r,i).join(ln.sep)));if(s.indexOf(t)===0)return s}return ln.normalize(ln.join(t,ln.basename(e)))};Mt.toBuffer=function(e,n){return Buffer.isBuffer(e)?e:e instanceof Uint8Array?Buffer.from(e):typeof e=="string"?n(e):Buffer.alloc(0)};Mt.readBigUInt64LE=function(t,e){var n=Buffer.from(t.slice(e,e+8));return n.swap64(),parseInt(`0x${n.toString("hex")}`)};Mt.fromDOS2Date=function(t){return new Date((t>>25&127)+1980,Math.max((t>>21&15)-1,0),Math.max(t>>16&31,1),t>>11&31,t>>5&63,(t&31)<<1)};Mt.fromDate2DOS=function(t){let e=0,n=0;return t.getFullYear()>1979&&(e=(t.getFullYear()-1980&127)<<9|t.getMonth()+1<<5|t.getDate(),n=t.getHours()<<11|t.getMinutes()<<5|t.getSeconds()>>1),e<<16|n};Mt.isWin=M0e;Mt.crcTable=b6});var D6=C((kGe,L6)=>{var U0e=require("path");L6.exports=function(t,{fs:e}){var n=t||"",r=s(),i=null;function s(){return{directory:!1,readonly:!1,hidden:!1,executable:!1,mtime:0,atime:0}}return n&&e.existsSync(n)?(i=e.statSync(n),r.directory=i.isDirectory(),r.mtime=i.mtime,r.atime=i.atime,r.executable=(73&i.mode)!==0,r.readonly=(128&i.mode)===0,r.hidden=U0e.basename(n)[0]==="."):console.warn("Invalid path: "+n),{get directory(){return r.directory},get readOnly(){return r.readonly},get hidden(){return r.hidden},get mtime(){return r.mtime},get atime(){return r.atime},get executable(){return r.executable},decodeAttributes:function(){},encodeAttributes:function(){},toJSON:function(){return{path:n,isDirectory:r.directory,isReadOnly:r.readonly,isHidden:r.hidden,isExecutable:r.executable,mTime:r.mtime,aTime:r.atime}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var x6=C((WGe,P6)=>{P6.exports={efs:!0,encode:t=>Buffer.from(t,"utf8"),decode:t=>t.toString("utf8")}});var qc=C((YGe,Vc)=>{Vc.exports=w6();Vc.exports.Constants=jy();Vc.exports.Errors=IR();Vc.exports.FileAttr=D6();Vc.exports.decoder=x6()});var M6=C((VGe,v6)=>{var Io=qc(),ee=Io.Constants;v6.exports=function(){var t=20,e=10,n=0,r=0,i=0,s=0,o=0,a=0,l=0,c=0,u=0,d=0,E=0,f=0,p=0;t|=Io.isWin?2560:768,n|=ee.FLG_EFS;let h={extraLen:0},T=R=>Math.max(0,R)>>>0,S=R=>Math.max(0,R)&65535,A=R=>Math.max(0,R)&255;return i=Io.fromDate2DOS(new Date),{get made(){return t},set made(R){t=R},get version(){return e},set version(R){e=R},get flags(){return n},set flags(R){n=R},get flags_efs(){return(n&ee.FLG_EFS)>0},set flags_efs(R){R?n|=ee.FLG_EFS:n&=~ee.FLG_EFS},get flags_desc(){return(n&ee.FLG_DESC)>0},set flags_desc(R){R?n|=ee.FLG_DESC:n&=~ee.FLG_DESC},get method(){return r},set method(R){switch(R){case ee.STORED:this.version=10;case ee.DEFLATED:default:this.version=20}r=R},get time(){return Io.fromDOS2Date(this.timeval)},set time(R){this.timeval=Io.fromDate2DOS(R)},get timeval(){return i},set timeval(R){i=T(R)},get timeHighByte(){return A(i>>>8)},get crc(){return s},set crc(R){s=T(R)},get compressedSize(){return o},set compressedSize(R){o=T(R)},get size(){return a},set size(R){a=T(R)},get fileNameLength(){return l},set fileNameLength(R){l=R},get extraLength(){return c},set extraLength(R){c=R},get extraLocalLength(){return h.extraLen},set extraLocalLength(R){h.extraLen=R},get commentLength(){return u},set commentLength(R){u=R},get diskNumStart(){return d},set diskNumStart(R){d=T(R)},get inAttr(){return E},set inAttr(R){E=T(R)},get attr(){return f},set attr(R){f=T(R)},get fileAttr(){return(f||0)>>16&4095},get offset(){return p},set offset(R){p=T(R)},get encrypted(){return(n&ee.FLG_ENC)===ee.FLG_ENC},get centralHeaderSize(){return ee.CENHDR+l+c+u},get realDataOffset(){return p+ee.LOCHDR+h.fnameLen+h.extraLen},get localHeader(){return h},loadLocalHeaderFromBinary:function(R){var m=R.slice(p,p+ee.LOCHDR);if(m.readUInt32LE(0)!==ee.LOCSIG)throw Io.Errors.INVALID_LOC();h.version=m.readUInt16LE(ee.LOCVER),h.flags=m.readUInt16LE(ee.LOCFLG),h.method=m.readUInt16LE(ee.LOCHOW),h.time=m.readUInt32LE(ee.LOCTIM),h.crc=m.readUInt32LE(ee.LOCCRC),h.compressedSize=m.readUInt32LE(ee.LOCSIZ),h.size=m.readUInt32LE(ee.LOCLEN),h.fnameLen=m.readUInt16LE(ee.LOCNAM),h.extraLen=m.readUInt16LE(ee.LOCEXT);let N=p+ee.LOCHDR+h.fnameLen,L=N+h.extraLen;return R.slice(N,L)},loadFromBinary:function(R){if(R.length!==ee.CENHDR||R.readUInt32LE(0)!==ee.CENSIG)throw Io.Errors.INVALID_CEN();t=R.readUInt16LE(ee.CENVEM),e=R.readUInt16LE(ee.CENVER),n=R.readUInt16LE(ee.CENFLG),r=R.readUInt16LE(ee.CENHOW),i=R.readUInt32LE(ee.CENTIM),s=R.readUInt32LE(ee.CENCRC),o=R.readUInt32LE(ee.CENSIZ),a=R.readUInt32LE(ee.CENLEN),l=R.readUInt16LE(ee.CENNAM),c=R.readUInt16LE(ee.CENEXT),u=R.readUInt16LE(ee.CENCOM),d=R.readUInt16LE(ee.CENDSK),E=R.readUInt16LE(ee.CENATT),f=R.readUInt32LE(ee.CENATX),p=R.readUInt32LE(ee.CENOFF)},localHeaderToBinary:function(){var R=Buffer.alloc(ee.LOCHDR);return R.writeUInt32LE(ee.LOCSIG,0),R.writeUInt16LE(e,ee.LOCVER),R.writeUInt16LE(n,ee.LOCFLG),R.writeUInt16LE(r,ee.LOCHOW),R.writeUInt32LE(i,ee.LOCTIM),R.writeUInt32LE(s,ee.LOCCRC),R.writeUInt32LE(o,ee.LOCSIZ),R.writeUInt32LE(a,ee.LOCLEN),R.writeUInt16LE(l,ee.LOCNAM),R.writeUInt16LE(h.extraLen,ee.LOCEXT),R},centralHeaderToBinary:function(){var R=Buffer.alloc(ee.CENHDR+l+c+u);return R.writeUInt32LE(ee.CENSIG,0),R.writeUInt16LE(t,ee.CENVEM),R.writeUInt16LE(e,ee.CENVER),R.writeUInt16LE(n,ee.CENFLG),R.writeUInt16LE(r,ee.CENHOW),R.writeUInt32LE(i,ee.CENTIM),R.writeUInt32LE(s,ee.CENCRC),R.writeUInt32LE(o,ee.CENSIZ),R.writeUInt32LE(a,ee.CENLEN),R.writeUInt16LE(l,ee.CENNAM),R.writeUInt16LE(c,ee.CENEXT),R.writeUInt16LE(u,ee.CENCOM),R.writeUInt16LE(d,ee.CENDSK),R.writeUInt16LE(E,ee.CENATT),R.writeUInt32LE(f,ee.CENATX),R.writeUInt32LE(p,ee.CENOFF),R},toJSON:function(){let R=function(m){return m+" bytes"};return{made:t,version:e,flags:n,method:Io.methodToString(r),time:this.time,crc:"0x"+s.toString(16).toUpperCase(),compressedSize:R(o),size:R(a),fileNameLength:R(l),extraLength:R(c),commentLength:R(u),diskNumStart:d,inAttr:E,attr:f,offset:p,centralHeaderSize:R(ee.CENHDR+l+c+u)}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var B6=C((qGe,U6)=>{var Xc=qc(),wt=Xc.Constants;U6.exports=function(){var t=0,e=0,n=0,r=0,i=0;return{get diskEntries(){return t},set diskEntries(s){t=e=s},get totalEntries(){return e},set totalEntries(s){e=t=s},get size(){return n},set size(s){n=s},get offset(){return r},set offset(s){r=s},get commentLength(){return i},set commentLength(s){i=s},get mainHeaderSize(){return wt.ENDHDR+i},loadFromBinary:function(s){if((s.length!==wt.ENDHDR||s.readUInt32LE(0)!==wt.ENDSIG)&&(s.length<wt.ZIP64HDR||s.readUInt32LE(0)!==wt.ZIP64SIG))throw Xc.Errors.INVALID_END();s.readUInt32LE(0)===wt.ENDSIG?(t=s.readUInt16LE(wt.ENDSUB),e=s.readUInt16LE(wt.ENDTOT),n=s.readUInt32LE(wt.ENDSIZ),r=s.readUInt32LE(wt.ENDOFF),i=s.readUInt16LE(wt.ENDCOM)):(t=Xc.readBigUInt64LE(s,wt.ZIP64SUB),e=Xc.readBigUInt64LE(s,wt.ZIP64TOT),n=Xc.readBigUInt64LE(s,wt.ZIP64SIZE),r=Xc.readBigUInt64LE(s,wt.ZIP64OFF),i=0)},toBinary:function(){var s=Buffer.alloc(wt.ENDHDR+i);return s.writeUInt32LE(wt.ENDSIG,0),s.writeUInt32LE(0,4),s.writeUInt16LE(t,wt.ENDSUB),s.writeUInt16LE(e,wt.ENDTOT),s.writeUInt32LE(n,wt.ENDSIZ),s.writeUInt32LE(r,wt.ENDOFF),s.writeUInt16LE(i,wt.ENDCOM),s.fill(" ",wt.ENDHDR),s},toJSON:function(){let s=function(o,a){let l=o.toString(16).toUpperCase();for(;l.length<a;)l="0"+l;return"0x"+l};return{diskEntries:t,totalEntries:e,size:n+" bytes",offset:s(r,4),commentLength:i}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var Jy=C(Ky=>{Ky.EntryHeader=M6();Ky.MainHeader=B6()});var H6=C((zGe,F6)=>{F6.exports=function(t){var e=require("zlib"),n={chunkSize:(parseInt(t.length/1024)+1)*1024};return{deflate:function(){return e.deflateRawSync(t,n)},deflateAsync:function(r){var i=e.createDeflateRaw(n),s=[],o=0;i.on("data",function(a){s.push(a),o+=a.length}),i.on("end",function(){var a=Buffer.alloc(o),l=0;a.fill(0);for(var c=0;c<s.length;c++){var u=s[c];u.copy(a,l),l+=u.length}r&&r(a)}),i.end(t)}}}});var $6=C((jGe,G6)=>{var B0e=+(process.versions?process.versions.node:"").split(".")[0]||0;G6.exports=function(t,e){var n=require("zlib");let r=B0e>=15&&e>0?{maxOutputLength:e}:{};return{inflate:function(){return n.inflateRawSync(t,r)},inflateAsync:function(i){var s=n.createInflateRaw(r),o=[],a=0;s.on("data",function(l){o.push(l),a+=l.length}),s.on("end",function(){var l=Buffer.alloc(a),c=0;l.fill(0);for(var u=0;u<o.length;u++){var d=o[u];d.copy(l,c),c+=d.length}i&&i(l)}),s.end(t)}}}});var q6=C((KGe,V6)=>{"use strict";var{randomFillSync:k6}=require("crypto"),F0e=IR(),H0e=new Uint32Array(256).map((t,e)=>{for(let n=0;n<8;n++)(e&1)!==0?e=e>>>1^3988292384:e>>>=1;return e>>>0}),Y6=(t,e)=>Math.imul(t,e)>>>0,W6=(t,e)=>H0e[(t^e)&255]^t>>>8,Ff=()=>typeof k6=="function"?k6(Buffer.alloc(12)):Ff.node();Ff.node=()=>{let t=Buffer.alloc(12),e=t.length;for(let n=0;n<e;n++)t[n]=Math.random()*256&255;return t};var _R={genSalt:Ff};function NR(t){let e=Buffer.isBuffer(t)?t:Buffer.from(t);this.keys=new Uint32Array([305419896,591751049,878082192]);for(let n=0;n<e.length;n++)this.updateKeys(e[n])}NR.prototype.updateKeys=function(t){let e=this.keys;return e[0]=W6(e[0],t),e[1]+=e[0]&255,e[1]=Y6(e[1],134775813)+1,e[2]=W6(e[2],e[1]>>>24),t};NR.prototype.next=function(){let t=(this.keys[2]|2)>>>0;return Y6(t,t^1)>>8&255};function G0e(t){let e=new NR(t);return function(n){let r=Buffer.alloc(n.length),i=0;for(let s of n)r[i++]=e.updateKeys(s^e.next());return r}}function $0e(t){let e=new NR(t);return function(n,r,i=0){r||(r=Buffer.alloc(n.length));for(let s of n){let o=e.next();r[i++]=s^o,e.updateKeys(s)}return r}}function k0e(t,e,n){if(!t||!Buffer.isBuffer(t)||t.length<12)return Buffer.alloc(0);let r=G0e(n),i=r(t.slice(0,12)),s=(e.flags&8)===8?e.timeHighByte:e.crc>>>24;if(i[11]!==s)throw F0e.WRONG_PASSWORD();return r(t.slice(12))}function W0e(t){Buffer.isBuffer(t)&&t.length>=12?_R.genSalt=function(){return t.slice(0,12)}:t==="node"?_R.genSalt=Ff.node:_R.genSalt=Ff}function Y0e(t,e,n,r=!1){t==null&&(t=Buffer.alloc(0)),Buffer.isBuffer(t)||(t=Buffer.from(t.toString()));let i=$0e(n),s=_R.genSalt();s[11]=e.crc>>>24&255,r&&(s[10]=e.crc>>>16&255);let o=Buffer.alloc(t.length+12);return i(s,o),i(t,o,12)}V6.exports={decrypt:k0e,encrypt:Y0e,_salter:W0e}});var X6=C(CR=>{CR.Deflater=H6();CR.Inflater=$6();CR.ZipCrypto=q6()});var Zy=C((QGe,z6)=>{var st=qc(),V0e=Jy(),Ut=st.Constants,Qy=X6();z6.exports=function(t,e){var n=new V0e.EntryHeader,r=Buffer.alloc(0),i=Buffer.alloc(0),s=!1,o=null,a=Buffer.alloc(0),l=Buffer.alloc(0),c=!0;let u=t,d=typeof u.decoder=="object"?u.decoder:st.decoder;c=d.hasOwnProperty("efs")?d.efs:!1;function E(){return!e||!(e instanceof Uint8Array)?Buffer.alloc(0):(l=n.loadLocalHeaderFromBinary(e),e.slice(n.realDataOffset,n.realDataOffset+n.compressedSize))}function f(R){if(n.flags_desc){let m={},N=n.realDataOffset+n.compressedSize;if(e.readUInt32LE(N)==Ut.LOCSIG||e.readUInt32LE(N)==Ut.CENSIG)throw st.Errors.DESCRIPTOR_NOT_EXIST();if(e.readUInt32LE(N)==Ut.EXTSIG)m.crc=e.readUInt32LE(N+Ut.EXTCRC),m.compressedSize=e.readUInt32LE(N+Ut.EXTSIZ),m.size=e.readUInt32LE(N+Ut.EXTLEN);else if(e.readUInt16LE(N+12)===19280)m.crc=e.readUInt32LE(N+Ut.EXTCRC-4),m.compressedSize=e.readUInt32LE(N+Ut.EXTSIZ-4),m.size=e.readUInt32LE(N+Ut.EXTLEN-4);else throw st.Errors.DESCRIPTOR_UNKNOWN();if(m.compressedSize!==n.compressedSize||m.size!==n.size||m.crc!==n.crc)throw st.Errors.DESCRIPTOR_FAULTY();if(st.crc32(R)!==m.crc)return!1}else if(st.crc32(R)!==n.localHeader.crc)return!1;return!0}function p(R,m,N){if(typeof m>"u"&&typeof R=="string"&&(N=R,R=void 0),s)return R&&m&&m(Buffer.alloc(0),st.Errors.DIRECTORY_CONTENT_ERROR()),Buffer.alloc(0);var L=E();if(L.length===0)return R&&m&&m(L),L;if(n.encrypted){if(typeof N!="string"&&!Buffer.isBuffer(N))throw st.Errors.INVALID_PASS_PARAM();L=Qy.ZipCrypto.decrypt(L,n,N)}var I=Buffer.alloc(n.size);switch(n.method){case st.Constants.STORED:if(L.copy(I),f(I))return R&&m&&m(I),I;throw R&&m&&m(I,st.Errors.BAD_CRC()),st.Errors.BAD_CRC();case st.Constants.DEFLATED:var D=new Qy.Inflater(L,n.size);if(R)D.inflateAsync(function(g){g.copy(g,0),m&&(f(g)?m(g):m(g,st.Errors.BAD_CRC()))});else{if(D.inflate(I).copy(I,0),!f(I))throw st.Errors.BAD_CRC(`"${d.decode(r)}"`);return I}break;default:throw R&&m&&m(Buffer.alloc(0),st.Errors.UNKNOWN_METHOD()),st.Errors.UNKNOWN_METHOD()}}function h(R,m){if((!o||!o.length)&&Buffer.isBuffer(e))return R&&m&&m(E()),E();if(o.length&&!s){var N;switch(n.method){case st.Constants.STORED:return n.compressedSize=n.size,N=Buffer.alloc(o.length),o.copy(N),R&&m&&m(N),N;default:case st.Constants.DEFLATED:var L=new Qy.Deflater(o);if(R)L.deflateAsync(function(D){N=Buffer.alloc(D.length),n.compressedSize=D.length,D.copy(N),m&&m(N)});else{var I=L.deflate();return n.compressedSize=I.length,I}L=null;break}}else if(R&&m)m(Buffer.alloc(0));else return Buffer.alloc(0)}function T(R,m){return(R.readUInt32LE(m+4)<<4)+R.readUInt32LE(m)}function S(R){try{for(var m=0,N,L,I;m+4<R.length;)N=R.readUInt16LE(m),m+=2,L=R.readUInt16LE(m),m+=2,I=R.slice(m,m+L),m+=L,Ut.ID_ZIP64===N&&A(I)}catch{throw st.Errors.EXTRA_FIELD_PARSE_ERROR()}}function A(R){var m,N,L,I;R.length>=Ut.EF_ZIP64_SCOMP&&(m=T(R,Ut.EF_ZIP64_SUNCOMP),n.size===Ut.EF_ZIP64_OR_32&&(n.size=m)),R.length>=Ut.EF_ZIP64_RHO&&(N=T(R,Ut.EF_ZIP64_SCOMP),n.compressedSize===Ut.EF_ZIP64_OR_32&&(n.compressedSize=N)),R.length>=Ut.EF_ZIP64_DSN&&(L=T(R,Ut.EF_ZIP64_RHO),n.offset===Ut.EF_ZIP64_OR_32&&(n.offset=L)),R.length>=Ut.EF_ZIP64_DSN+4&&(I=R.readUInt32LE(Ut.EF_ZIP64_DSN),n.diskNumStart===Ut.EF_ZIP64_OR_16&&(n.diskNumStart=I))}return{get entryName(){return d.decode(r)},get rawEntryName(){return r},set entryName(R){r=st.toBuffer(R,d.encode);var m=r[r.length-1];s=m===47||m===92,n.fileNameLength=r.length},get efs(){return typeof c=="function"?c(this.entryName):c},get extra(){return a},set extra(R){a=R,n.extraLength=R.length,S(R)},get comment(){return d.decode(i)},set comment(R){if(i=st.toBuffer(R,d.encode),n.commentLength=i.length,i.length>65535)throw st.Errors.COMMENT_TOO_LONG()},get name(){var R=d.decode(r);return s?R.substr(R.length-1).split("/").pop():R.split("/").pop()},get isDirectory(){return s},getCompressedData:function(){return h(!1,null)},getCompressedDataAsync:function(R){h(!0,R)},setData:function(R){o=st.toBuffer(R,st.decoder.encode),!s&&o.length?(n.size=o.length,n.method=st.Constants.DEFLATED,n.crc=st.crc32(R),n.changed=!0):n.method=st.Constants.STORED},getData:function(R){return n.changed?o:p(!1,null,R)},getDataAsync:function(R,m){n.changed?R(o):p(!0,R,m)},set attr(R){n.attr=R},get attr(){return n.attr},set header(R){n.loadFromBinary(R)},get header(){return n},packCentralHeader:function(){n.flags_efs=this.efs,n.extraLength=a.length;var R=n.centralHeaderToBinary(),m=st.Constants.CENHDR;return r.copy(R,m),m+=r.length,a.copy(R,m),m+=n.extraLength,i.copy(R,m),R},packLocalHeader:function(){let R=0;n.flags_efs=this.efs,n.extraLocalLength=l.length;let m=n.localHeaderToBinary(),N=Buffer.alloc(m.length+r.length+n.extraLocalLength);return m.copy(N,R),R+=m.length,r.copy(N,R),R+=r.length,l.copy(N,R),R+=l.length,N},toJSON:function(){let R=function(m){return"<"+(m&&m.length+" bytes buffer"||"null")+">"};return{entryName:this.entryName,name:this.name,comment:this.comment,isDirectory:this.isDirectory,header:n.toJSON(),compressedData:R(e),data:R(o)}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var J6=C((ZGe,K6)=>{var j6=Zy(),q0e=Jy(),Bn=qc();K6.exports=function(t,e){var n=[],r={},i=Buffer.alloc(0),s=new q0e.MainHeader,o=!1,a=null;let l=new Set,c=e,{noSort:u,decoder:d}=c;t?p(c.readEntries):o=!0;function E(){let T=new Set;for(let S of Object.keys(r)){let A=S.split("/");if(A.pop(),!!A.length)for(let R=0;R<A.length;R++){let m=A.slice(0,R+1).join("/")+"/";T.add(m)}}for(let S of T)if(!(S in r)){let A=new j6(c);A.entryName=S,A.attr=16,A.temporary=!0,n.push(A),r[A.entryName]=A,l.add(A)}}function f(){if(o=!0,r={},s.diskEntries>(t.length-s.offset)/Bn.Constants.CENHDR)throw Bn.Errors.DISK_ENTRY_TOO_LARGE();n=new Array(s.diskEntries);for(var T=s.offset,S=0;S<n.length;S++){var A=T,R=new j6(c,t);R.header=t.slice(A,A+=Bn.Constants.CENHDR),R.entryName=t.slice(A,A+=R.header.fileNameLength),R.header.extraLength&&(R.extra=t.slice(A,A+=R.header.extraLength)),R.header.commentLength&&(R.comment=t.slice(A,A+R.header.commentLength)),T+=R.header.centralHeaderSize,n[S]=R,r[R.entryName]=R}l.clear(),E()}function p(T){var S=t.length-Bn.Constants.ENDHDR,A=Math.max(0,S-65535),R=A,m=t.length,N=-1,L=0;for(typeof c.trailingSpace=="boolean"&&c.trailingSpace&&(A=0),S;S>=R;S--)if(t[S]===80){if(t.readUInt32LE(S)===Bn.Constants.ENDSIG){N=S,L=S,m=S+Bn.Constants.ENDHDR,R=S-Bn.Constants.END64HDR;continue}if(t.readUInt32LE(S)===Bn.Constants.END64SIG){R=A;continue}if(t.readUInt32LE(S)===Bn.Constants.ZIP64SIG){N=S,m=S+Bn.readBigUInt64LE(t,S+Bn.Constants.ZIP64SIZE)+Bn.Constants.ZIP64LEAD;break}}if(N==-1)throw Bn.Errors.INVALID_FORMAT();s.loadFromBinary(t.slice(N,m)),s.commentLength&&(i=t.slice(L+Bn.Constants.ENDHDR)),T&&f()}function h(){n.length>1&&!u&&n.sort((T,S)=>T.entryName.toLowerCase().localeCompare(S.entryName.toLowerCase()))}return{get entries(){return o||f(),n.filter(T=>!l.has(T))},get comment(){return d.decode(i)},set comment(T){i=Bn.toBuffer(T,d.encode),s.commentLength=i.length},getEntryCount:function(){return o?n.length:s.diskEntries},forEach:function(T){this.entries.forEach(T)},getEntry:function(T){return o||f(),r[T]||null},setEntry:function(T){o||f(),n.push(T),r[T.entryName]=T,s.totalEntries=n.length},deleteFile:function(T,S=!0){o||f();let A=r[T];this.getEntryChildren(A,S).map(m=>m.entryName).forEach(this.deleteEntry)},deleteEntry:function(T){o||f();let S=r[T],A=n.indexOf(S);A>=0&&(n.splice(A,1),delete r[T],s.totalEntries=n.length)},getEntryChildren:function(T,S=!0){if(o||f(),typeof T=="object")if(T.isDirectory&&S){let A=[],R=T.entryName;for(let m of n)m.entryName.startsWith(R)&&A.push(m);return A}else return[T];return[]},getChildCount:function(T){if(T&&T.isDirectory){let S=this.getEntryChildren(T);return S.includes(T)?S.length-1:S.length}return 0},compressToBuffer:function(){o||f(),h();let T=[],S=[],A=0,R=0;s.size=0,s.offset=0;let m=0;for(let I of this.entries){let D=I.getCompressedData();I.header.offset=R;let g=I.packLocalHeader(),w=g.length+D.length;R+=w,T.push(g),T.push(D);let x=I.packCentralHeader();S.push(x),s.size+=x.length,A+=w+x.length,m++}A+=s.mainHeaderSize,s.offset=R,s.totalEntries=m,R=0;let N=Buffer.alloc(A);for(let I of T)I.copy(N,R),R+=I.length;for(let I of S)I.copy(N,R),R+=I.length;let L=s.toBinary();return i&&i.copy(L,Bn.Constants.ENDHDR),L.copy(N,R),t=N,o=!1,N},toAsyncBuffer:function(T,S,A,R){try{o||f(),h();let m=[],N=[],L=0,I=0,D=0;s.size=0,s.offset=0;let g=function(w){if(w.length>0){let x=w.shift(),U=x.entryName+x.extra.toString();A&&A(U),x.getCompressedDataAsync(function(H){R&&R(U),x.header.offset=I;let X=x.packLocalHeader(),Q=X.length+H.length;I+=Q,m.push(X),m.push(H);let K=x.packCentralHeader();N.push(K),s.size+=K.length,L+=Q+K.length,D++,g(w)})}else{L+=s.mainHeaderSize,s.offset=I,s.totalEntries=D,I=0;let x=Buffer.alloc(L);m.forEach(function(H){H.copy(x,I),I+=H.length}),N.forEach(function(H){H.copy(x,I),I+=H.length});let U=s.toBinary();i&&i.copy(U,Bn.Constants.ENDHDR),U.copy(x,I),t=x,o=!1,T(x)}};g(Array.from(this.entries))}catch(m){S(m)}}}}});var e3=C((e$e,Z6)=>{var Lt=qc(),Bt=require("path"),X0e=Zy(),z0e=J6(),ka=(...t)=>Lt.findLast(t,e=>typeof e=="boolean"),Q6=(...t)=>Lt.findLast(t,e=>typeof e=="string"),j0e=(...t)=>Lt.findLast(t,e=>typeof e=="function"),K0e={noSort:!1,readEntries:!1,method:Lt.Constants.NONE,fs:null};Z6.exports=function(t,e){let n=null,r=Object.assign(Object.create(null),K0e);t&&typeof t=="object"&&(t instanceof Uint8Array||(Object.assign(r,t),t=r.input?r.input:void 0,r.input&&delete r.input),Buffer.isBuffer(t)&&(n=t,r.method=Lt.Constants.BUFFER,t=void 0)),Object.assign(r,e);let i=new Lt(r);if((typeof r.decoder!="object"||typeof r.decoder.encode!="function"||typeof r.decoder.decode!="function")&&(r.decoder=Lt.decoder),t&&typeof t=="string")if(i.fs.existsSync(t))r.method=Lt.Constants.FILE,r.filename=t,n=i.fs.readFileSync(t);else throw Lt.Errors.INVALID_FILENAME();let s=new z0e(n,r),{canonical:o,sanitize:a,zipnamefix:l}=Lt;function c(f){if(f&&s){var p;if(typeof f=="string"&&(p=s.getEntry(Bt.posix.normalize(f))),typeof f=="object"&&typeof f.entryName<"u"&&typeof f.header<"u"&&(p=s.getEntry(f.entryName)),p)return p}return null}function u(f){let{join:p,normalize:h,sep:T}=Bt.posix;return p(".",h(T+f.split("\\").join(T)+T))}function d(f){return f instanceof RegExp?(function(p){return function(h){return p.test(h)}})(f):typeof f!="function"?()=>!0:f}let E=(f,p)=>{let h=p.slice(-1);return h=h===i.sep?i.sep:"",Bt.relative(f,p)+h};return{readFile:function(f,p){var h=c(f);return h&&h.getData(p)||null},childCount:function(f){let p=c(f);if(p)return s.getChildCount(p)},readFileAsync:function(f,p){var h=c(f);h?h.getDataAsync(p):p(null,"getEntry failed for:"+f)},readAsText:function(f,p){var h=c(f);if(h){var T=h.getData();if(T&&T.length)return T.toString(p||"utf8")}return""},readAsTextAsync:function(f,p,h){var T=c(f);T?T.getDataAsync(function(S,A){if(A){p(S,A);return}S&&S.length?p(S.toString(h||"utf8")):p("")}):p("")},deleteFile:function(f,p=!0){var h=c(f);h&&s.deleteFile(h.entryName,p)},deleteEntry:function(f){var p=c(f);p&&s.deleteEntry(p.entryName)},addZipComment:function(f){s.comment=f},getZipComment:function(){return s.comment||""},addZipEntryComment:function(f,p){var h=c(f);h&&(h.comment=p)},getZipEntryComment:function(f){var p=c(f);return p&&p.comment||""},updateFile:function(f,p){var h=c(f);h&&h.setData(p)},addLocalFile:function(f,p,h,T){if(i.fs.existsSync(f)){p=p?u(p):"";let S=Bt.win32.basename(Bt.win32.normalize(f));p+=h||S;let A=i.fs.statSync(f),R=A.isFile()?i.fs.readFileSync(f):Buffer.alloc(0);A.isDirectory()&&(p+=i.sep),this.addFile(p,R,T,A)}else throw Lt.Errors.FILE_NOT_FOUND(f)},addLocalFileAsync:function(f,p){f=typeof f=="object"?f:{localPath:f};let h=Bt.resolve(f.localPath),{comment:T}=f,{zipPath:S,zipName:A}=f,R=this;i.fs.stat(h,function(m,N){if(m)return p(m,!1);S=S?u(S):"";let L=Bt.win32.basename(Bt.win32.normalize(h));if(S+=A||L,N.isFile())i.fs.readFile(h,function(I,D){return I?p(I,!1):(R.addFile(S,D,T,N),setImmediate(p,void 0,!0))});else if(N.isDirectory())return S+=i.sep,R.addFile(S,Buffer.alloc(0),T,N),setImmediate(p,void 0,!0)})},addLocalFolder:function(f,p,h){if(h=d(h),p=p?u(p):"",f=Bt.normalize(f),i.fs.existsSync(f)){let T=i.findFiles(f),S=this;if(T.length)for(let A of T){let R=Bt.join(p,E(f,A));h(R)&&S.addLocalFile(A,Bt.dirname(R))}}else throw Lt.Errors.FILE_NOT_FOUND(f)},addLocalFolderAsync:function(f,p,h,T){T=d(T),h=h?u(h):"",f=Bt.normalize(f);var S=this;i.fs.open(f,"r",function(A){if(A&&A.code==="ENOENT")p(void 0,Lt.Errors.FILE_NOT_FOUND(f));else if(A)p(void 0,A);else{var R=i.findFiles(f),m=-1,N=function(){if(m+=1,m<R.length){var L=R[m],I=E(f,L).split("\\").join("/");I=I.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\x20-\x7E]/g,""),T(I)?i.fs.stat(L,function(D,g){D&&p(void 0,D),g.isFile()?i.fs.readFile(L,function(w,x){w?p(void 0,w):(S.addFile(h+I,x,"",g),N())}):(S.addFile(h+I+"/",Buffer.alloc(0),"",g),N())}):process.nextTick(()=>{N()})}else p(!0,void 0)};N()}})},addLocalFolderAsync2:function(f,p){let h=this;f=typeof f=="object"?f:{localPath:f},localPath=Bt.resolve(u(f.localPath));let{zipPath:T,filter:S,namefix:A}=f;S instanceof RegExp?S=(function(N){return function(L){return N.test(L)}})(S):typeof S!="function"&&(S=function(){return!0}),T=T?u(T):"",A=="latin1"&&(A=N=>N.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\x20-\x7E]/g,"")),typeof A!="function"&&(A=N=>N);let R=N=>Bt.join(T,A(E(localPath,N))),m=N=>Bt.win32.basename(Bt.win32.normalize(A(N)));i.fs.open(localPath,"r",function(N){N&&N.code==="ENOENT"?p(void 0,Lt.Errors.FILE_NOT_FOUND(localPath)):N?p(void 0,N):i.findFilesAsync(localPath,function(L,I){if(L)return p(L);I=I.filter(D=>S(R(D))),I.length||p(void 0,!1),setImmediate(I.reverse().reduce(function(D,g){return function(w,x){if(w||x===!1)return setImmediate(D,w,!1);h.addLocalFileAsync({localPath:g,zipPath:Bt.dirname(R(g)),zipName:m(g)},D)}},p))})})},addLocalFolderPromise:function(f,p){return new Promise((h,T)=>{this.addLocalFolderAsync2(Object.assign({localPath:f},p),(S,A)=>{S&&T(S),A&&h(this)})})},addFile:function(f,p,h,T){f=l(f);let S=c(f),A=S!=null;A||(S=new X0e(r),S.entryName=f),S.comment=h||"";let R=typeof T=="object"&&T instanceof i.fs.Stats;R&&(S.header.time=T.mtime);var m=S.isDirectory?16:0;let N=S.isDirectory?16384:32768;return R?N|=4095&T.mode:typeof T=="number"?N|=4095&T:N|=S.isDirectory?493:420,m=(m|N<<16)>>>0,S.attr=m,S.setData(p),A||s.setEntry(S),S},getEntries:function(f){return s.password=f,s?s.entries:[]},getEntry:function(f){return c(f)},getEntryCount:function(){return s.getEntryCount()},forEach:function(f){return s.forEach(f)},extractEntryTo:function(f,p,h,T,S,A){T=ka(!1,T),S=ka(!1,S),h=ka(!0,h),A=Q6(S,A);var R=c(f);if(!R)throw Lt.Errors.NO_ENTRY();var m=o(R.entryName),N=a(p,A&&!R.isDirectory?A:h?m:Bt.basename(m));if(R.isDirectory){var L=s.getEntryChildren(R);return L.forEach(function(g){if(g.isDirectory)return;var w=g.getData();if(!w)throw Lt.Errors.CANT_EXTRACT_FILE();var x=o(g.entryName),U=a(p,h?x:Bt.basename(x));let H=S?g.header.fileAttr:void 0;i.writeFileTo(U,w,T,H)}),!0}var I=R.getData(s.password);if(!I)throw Lt.Errors.CANT_EXTRACT_FILE();if(i.fs.existsSync(N)&&!T)throw Lt.Errors.CANT_OVERRIDE();let D=S?f.header.fileAttr:void 0;return i.writeFileTo(N,I,T,D),!0},test:function(f){if(!s)return!1;for(var p in s.entries)try{if(p.isDirectory)continue;var h=s.entries[p].getData(f);if(!h)return!1}catch{return!1}return!0},extractAllTo:function(f,p,h,T){if(h=ka(!1,h),T=Q6(h,T),p=ka(!1,p),!s)throw Lt.Errors.NO_ZIP();s.entries.forEach(function(S){var A=a(f,o(S.entryName));if(S.isDirectory){i.makeDir(A);return}var R=S.getData(T);if(!R)throw Lt.Errors.CANT_EXTRACT_FILE();let m=h?S.header.fileAttr:void 0;i.writeFileTo(A,R,p,m);try{i.fs.utimesSync(A,S.header.time,S.header.time)}catch{throw Lt.Errors.CANT_EXTRACT_FILE()}})},extractAllToAsync:function(f,p,h,T){if(T=j0e(p,h,T),h=ka(!1,h),p=ka(!1,p),!T)return new Promise((N,L)=>{this.extractAllToAsync(f,p,h,function(I){I?L(I):N(this)})});if(!s){T(Lt.Errors.NO_ZIP());return}f=Bt.resolve(f);let S=N=>a(f,Bt.normalize(o(N.entryName))),A=(N,L)=>new Error(N+': "'+L+'"'),R=[],m=[];s.entries.forEach(N=>{N.isDirectory?R.push(N):m.push(N)});for(let N of R){let L=S(N),I=h?N.header.fileAttr:void 0;try{i.makeDir(L),I&&i.fs.chmodSync(L,I),i.fs.utimesSync(L,N.header.time,N.header.time)}catch{T(A("Unable to create folder",L))}}m.reverse().reduce(function(N,L){return function(I){if(I)N(I);else{let D=Bt.normalize(o(L.entryName)),g=a(f,D);L.getDataAsync(function(w,x){if(x)N(x);else if(!w)N(Lt.Errors.CANT_EXTRACT_FILE());else{let U=h?L.header.fileAttr:void 0;i.writeFileToAsync(g,w,p,U,function(H){H||N(A("Unable to write file",g)),i.fs.utimes(g,L.header.time,L.header.time,function(X){X?N(A("Unable to set times",g)):N()})})}})}}},T)()},writeZip:function(f,p){if(arguments.length===1&&typeof f=="function"&&(p=f,f=""),!f&&r.filename&&(f=r.filename),!!f){var h=s.compressToBuffer();if(h){var T=i.writeFileTo(f,h,!0);typeof p=="function"&&p(T?null:new Error("failed"),"")}}},writeZipPromise:function(f,p){let{overwrite:h,perm:T}=Object.assign({overwrite:!0},p);return new Promise((S,A)=>{!f&&r.filename&&(f=r.filename),f||A("ADM-ZIP: ZIP File Name Missing"),this.toBufferPromise().then(R=>{let m=N=>N?S(N):A("ADM-ZIP: Wasn't able to write zip file");i.writeFileToAsync(f,R,h,T,m)},A)})},toBufferPromise:function(){return new Promise((f,p)=>{s.toAsyncBuffer(f,p)})},toBuffer:function(f,p,h,T){return typeof f=="function"?(s.toAsyncBuffer(f,p,h,T),null):s.compressToBuffer()}}}});var Wa,t3=G(()=>{"use strict";Wa=class{constructor(e){this._isSheet=!1;this._workbookId=0;this._recId=null;this._workbookName=null;this._inCellXf=!1;this._inCellStyleXf=!1;this._inNumberFormat=!1;this._parentCellStyleXf=0;this._numberFormatIndex=0;this._format=0;this._formatString=null;this._sharedStringValue=null;this._sharedStringUniqueCount=0;this._cellType=0;this._intValue=0;this._doubleVal=0;this._boolValue=!1;this._stringValue=null;this._columnNum=-1;this._xfIndex=0;this._readCell=!1;this._rowIndex=-1;this._recordStart=0;this._xfIndexToNumFmtId=[];this._customNumFmts=new Set;if(!Buffer.isBuffer(e))throw new Error("BiffReaderWriter expects a Buffer");this.buffer=e,this.pos=0,this.length=e.length}_tryReadVariableValue(){if(this.pos>=this.length)return null;let e=this.buffer[this.pos++],n=(e&127)>>>0;if((e&128)===0)return n;if(this.pos>=this.length)return null;let r=this.buffer[this.pos++];if(n=((r&127)<<7|n)>>>0,(r&128)===0)return n;if(this.pos>=this.length)return null;let i=this.buffer[this.pos++];return n=((i&127)<<14|n)>>>0,(i&128)===0?n:this.pos>=this.length?null:(n=((this.buffer[this.pos++]&127)<<21|n)>>>0,n)}_getDWord(e){return this.buffer.readUInt32LE(this._recordStart+e)}_getInt32(e){return this.buffer.readInt32LE(this._recordStart+e)}_getWord(e){return this.buffer.readUInt16LE(this._recordStart+e)}_getByte(e){return this.buffer[this._recordStart+e]}_getDouble(e){return this.buffer.readDoubleLE(this._recordStart+e)}_getString(e,n){let r=this._recordStart+e,i=r+n*2;return i>this.buffer.length?"":this.buffer.toString("utf16le",r,i)}_getNullableString(e){let n=this._getDWord(e.val);if(e.val+=4,n===4294967295)return null;let r=this._getString(e.val,n);return e.val+=n*2,r}readWorkbook(){let e=this._tryReadVariableValue(),n=this._tryReadVariableValue();if(e===null||n===null)return!1;let r=this.pos;if(r+n>this.length)return!1;if(this._recordStart=r,this.pos+=n,this._isSheet=!1,e===156){this._workbookId=this._getDWord(4);let i={val:8};this._recId=this._getNullableString(i);let s=this._getDWord(i.val);this._workbookName=this._getString(i.val+4,s),this._isSheet=!0}return!0}readSharedStrings(){let e=this._tryReadVariableValue(),n=this._tryReadVariableValue();if(e===null||n===null)return!1;let r=this.pos;if(r+n>this.length)return!1;if(this._recordStart=r,this.pos+=n,this._sharedStringValue=null,e===19){let i=this._getDWord(1);this._sharedStringValue=this._getString(5,i)}else e===159&&(this._sharedStringUniqueCount=this._getDWord(4));return!0}readStyles(){let e=this._tryReadVariableValue(),n=this._tryReadVariableValue();if(e===null||n===null)return!1;let r=this.pos;if(r+n>this.length)return!1;this._recordStart=r,this.pos+=n;let i=617,s=618,o=626,a=627,l=615,c=616,u=47,d=44;switch(e){case i:this._inCellXf=!0;break;case s:this._inCellXf=!1;break;case o:this._inCellStyleXf=!0;break;case a:this._inCellStyleXf=!1;break;case l:this._inNumberFormat=!0;break;case c:this._inNumberFormat=!1;break;case u:this._inCellXf&&(this._parentCellStyleXf=this._getWord(0),this._numberFormatIndex=this._getWord(2),this._xfIndexToNumFmtId.push(this._numberFormatIndex));break;case d:if(this._inNumberFormat){this._format=this._getWord(0);let E=this._getDWord(2);this._formatString=this._getString(6,E);let f=this._formatString.toLowerCase();(f.includes("yy")||f.includes("mm")||f.includes("dd")||f.includes("h:mm"))&&this._customNumFmts.add(this._format)}break}return!0}_getRkNumber(e){let n=this._getByte(e),r=0;if((n&2)!==0)r=this._getInt32(e)>>2;else{let s=this._getInt32(e)&4294967292,o=Buffer.allocUnsafe(8);o.writeInt32LE(0,0),o.writeInt32LE(s,4),r=o.readDoubleLE(0)}return(n&1)!==0&&(r/=100),r}readWorksheet(){let e=this._tryReadVariableValue(),n=this._tryReadVariableValue();if(e===null||n===null)return!1;let r=this.pos;if(r+n>this.length)return!1;this._recordStart=r,this.pos+=n,this._readCell=!1,this._columnNum=-1;let i=0,s=1,o=2,a=3,l=4,c=5,u=6,d=7,E=8,f=9,p=10,h=11;switch(e){case i:this._rowIndex=this._getInt32(0);break;case s:case a:case h:this._readCell=!0,this._cellType=0;break;case o:this._doubleVal=this._getRkNumber(8),this._readCell=!0,this._cellType=3;break;case l:case p:this._boolValue=this._getByte(8)===1,this._readCell=!0,this._cellType=4;break;case f:case c:this._doubleVal=this._getDouble(8),this._readCell=!0,this._cellType=3;break;case u:case E:{let T=this._getDWord(8);this._stringValue=this._getString(12,T),this._readCell=!0,this._cellType=5;break}case d:this._intValue=this._getDWord(8),this._readCell=!0,this._cellType=2;break}return this._readCell&&(this._columnNum=this._getDWord(0),this._xfIndex=this._getDWord(4)&16777215),!0}}});var n3,bR,r3=G(()=>{"use strict";n3=j(e3());zy();t3();bR=class extends Yc{constructor(){super();this.zip=null;this.sharedStrings=[];this.styles=[];this.sheetNames=[];this.sheets=[];this._currentSheetIndex=-1;this._reader=null;this._currentRow=[];this._pendingRowIndex=-1;this._eof=!1;this.xfIdToNumFmtId=[];this.customDateFormats=null}async open(n,r=!0){this.zip=new n3.default(n);let i=this.zip.getEntry("xl/workbook.bin");if(i){let a=i.getData(),l=new Wa(a);for(;l.readWorkbook();)if(l._isSheet){let c=l._workbookName,u=l._recId;this.sheetNames.push(c),this.sheets.push({name:c,rId:u,path:null})}}let s=this.zip.getEntry("xl/_rels/workbook.bin.rels");if(s){let a=s.getData().toString("utf8"),l=/<Relationship[^>]*Id="([^"]*)"[^>]*Target="([^"]*)"/g,c,u={};for(;(c=l.exec(a))!==null;)u[c[1]]=c[2];for(let d of this.sheets){let E=u[d.rId];E&&(E.startsWith("/")&&(E=E.substring(1)),E.startsWith("xl/")||(E="xl/"+E),d.path=E)}}if(r){let a="xl/sharedStrings.bin";this.zip.getEntry(a)&&this._readSharedStrings(a)}let o="xl/styles.bin";this.zip.getEntry(o)&&this._readStyles(o),this.resultsCount=this.sheets.length,this._currentSheetIndex=-1}_readSharedStrings(n){let r=this.zip.getEntry(n);if(!r)return;let i=new Wa(r.getData());for(;i.readSharedStrings();)i._sharedStringValue!==null&&this.sharedStrings.push(i._sharedStringValue)}_readStyles(n){let r=this.zip.getEntry(n);if(!r)return;let i=new Wa(r.getData());for(;i.readStyles(););this.xfIdToNumFmtId=i._xfIndexToNumFmtId,this.customDateFormats=i._customNumFmts}getSheetNames(){return this.sheetNames}read(){if(this._currentSheetIndex===-1&&(this._currentSheetIndex=0,!this._initSheet(0))||this._eof)return!1;for(this._currentRow=[];;){if(!this._reader.readWorksheet())return this._eof=!0,!0;if(this._reader._rowIndex!==-1&&this._reader._rowIndex!==this._pendingRowIndex)return this._pendingRowIndex=this._reader._rowIndex,!0;if(this._reader._readCell){let r=this._reader._columnNum,i=null;switch(this._reader._cellType){case 2:i=this.sharedStrings[this._reader._intValue];break;case 3:{i=this._reader._doubleVal;let s=this._reader._xfIndex,o=0;if(this.xfIdToNumFmtId&&s<this.xfIdToNumFmtId.length&&(o=this.xfIdToNumFmtId[s]),o>=14&&o<=22||o>=45&&o<=47||this.customDateFormats&&this.customDateFormats.has(o))try{i=this.getDateTimeFromOaDate(i)}catch{}break}case 4:i=this._reader._boolValue;break;case 5:i=this._reader._stringValue;break;default:i=null}this._currentRow[r]=i,r>=this.fieldCount&&(this.fieldCount=r+1)}}}_initSheet(n){if(n>=this.sheets.length)return!1;let r=this.sheets[n],i=this.zip.getEntry(r.path);if(!i)return!1;for(this._reader=new Wa(i.getData()),this._eof=!1,this._pendingRowIndex=-1;this._reader.readWorksheet();)if(this._reader._rowIndex!==-1)return this._pendingRowIndex=this._reader._rowIndex,!0;return this._eof=!0,!1}getValue(n){return n<0||n>=this._currentRow.length?null:this._currentRow[n]}}});var s3={};Pt(s3,{ReaderFactory:()=>yR,default:()=>J0e});var i3,yR,J0e,o3=G(()=>{"use strict";i3=j(require("path"));g6();r3();yR=class{static create(e){let n=i3.extname(e).toLowerCase();if(n===".xlsx")return new gR;if(n===".xlsb")return new bR;throw new Error(`Unsupported extension: ${n}`)}},J0e=yR});var c3={};Pt(c3,{ColumnTypeChooser:()=>zc,NetezzaDataType:()=>Xi,NetezzaImporter:()=>wR,importDataToNetezza:()=>nw});async function nw(t,e,n,r,i){let s=Date.now(),o=null;try{if(!t||!oi.existsSync(t))return{success:!1,message:`Source file not found: ${t}`};if(!e)return{success:!1,message:"Target table name is required"};if(!n||!n.host)return{success:!1,message:"Connection details are required"};let l=oi.statSync(t).size,c=Ya.extname(t).toLowerCase(),u=[".csv",".txt",".xlsx",".xlsb"];if(!u.includes(c))return{success:!1,message:`Unsupported file format: ${c}. Supported: ${u.join(", ")}`};r?.("Starting import process..."),r?.(`  Source file: ${t}`),r?.(`  Target table: ${e}`),r?.(`  File size: ${l.toLocaleString()} bytes`),r?.(`  File format: ${c}`);let d=new wR(t,e);await d.analyzeDataTypes(r),r?.("Preparing in-memory data stream...");let E=await d.createDataStream(r),f=d.getVirtualFileName();r?.(`Registered virtual stream: ${f}`);let p=Qn();p&&p.registerImportStream?p.registerImportStream(f,E):r?.("Warning: NzConnection driver does not support stream registry. Import might fail.");let h=d.generateCreateTableSql();r?.("Generated SQL:"),r?.(h),r?.("Connecting to Netezza...");let T={host:n.host,port:n.port||5480,database:n.database,user:n.user,password:n.password},S=Qn();o=new S(T),await o.connect();try{r?.("Executing CREATE TABLE with EXTERNAL data...");let R=o.createCommand(h);R.commandTimeout=i||3600;let m=d.getRowsCount();o.on("importProgress",N=>{let L=N,I=m>0?Math.round(L.percentComplete/100*m):0;r?.(`Importing: ${L.percentComplete}% complete (${I.toLocaleString()} / ${m.toLocaleString()} rows)`)}),await R.execute(),r?.("Import completed successfully")}finally{await o.close(),p&&p.unregisterImportStream&&p.unregisterImportStream(f)}let A=(Date.now()-s)/1e3;return{success:!0,message:"Import completed successfully",details:{sourceFile:t,targetTable:e,fileSize:l,format:c,rowsProcessed:d.getRowsCount(),rowsInserted:d.getRowsCount(),processingTime:`${A.toFixed(1)}s`,columns:d.getSqlHeaders().length,detectedDelimiter:d.getCsvDelimiter()}}}catch(a){let l=(Date.now()-s)/1e3;return{success:!1,message:`Import failed: ${a instanceof Error?a.message:String(a)}`,details:{processingTime:`${l.toFixed(1)}s`}}}finally{if(o&&o._connected)try{await o.close()}catch{}}}var oi,Ya,l3,a3,ew,Xi,zc,tw,wR,LR=G(()=>{"use strict";oi=j(require("fs")),Ya=j(require("path")),l3=require("stream"),a3=()=>new Promise(t=>setTimeout(t,0));try{let t=(o3(),Lo(s3));ew=t.default||t.ReaderFactory||t}catch(t){console.error("libs/ExcelHelpersTs/ReaderFactory module not available",t)}Xi=class{constructor(e,n,r,i){this.dbType=e;this.precision=n;this.scale=r;this.length=i}toString(){return["BIGINT","DATE","DATETIME"].includes(this.dbType)?this.dbType:this.dbType==="NUMERIC"?`${this.dbType}(${this.precision},${this.scale})`:this.dbType==="NVARCHAR"?`${this.dbType}(${this.length})`:"NVARCHAR(255)"}},zc=class{constructor(e="."){this.decimalDelimInCsv=".";this.firstTime=!0;this.currentType=new Xi("BIGINT"),this.decimalDelimInCsv=e}getType(e){let n=this.currentType.dbType,r=e.length;if(n==="BIGINT"&&/^\d+$/.test(e)&&r<15)return this.firstTime=!1,new Xi("BIGINT");let i=this.decimalDelimInCsv==="."?"\\.":this.decimalDelimInCsv,s=(e.match(new RegExp(`${i}`,"g"))||[]).length;if(["BIGINT","NUMERIC"].includes(n)&&s<=1){let a=e.replace(this.decimalDelimInCsv,"");if(/^\d+$/.test(a)&&r<15&&(!a.startsWith("0")||s>0||a==="0"))return this.firstTime=!1,new Xi("NUMERIC",16,6)}if((n==="DATE"||this.firstTime)&&(e.match(/-/g)||[]).length===2&&r>=8&&r<=10){let a=e.split("-");if(a.length===3&&a.every(l=>/^\d+$/.test(l)))try{let l=new Date(parseInt(a[0]),parseInt(a[1])-1,parseInt(a[2]));if(!isNaN(l.getTime()))return this.firstTime=!1,new Xi("DATE")}catch{}}if((n==="DATETIME"||this.firstTime)&&(e.match(/-/g)||[]).length===2&&r>=12&&r<=20){let a=e.match(/^(\d{4})-(\d{1,2})-(\d{1,2})[\s|T](\d{2}):(\d{2})(:?(\d{2}))?$/);if(a)try{let l=a[7]?parseInt(a[7]):0,c=new Date(parseInt(a[1]),parseInt(a[2])-1,parseInt(a[3]),parseInt(a[4]),parseInt(a[5]),l);if(!isNaN(c.getTime()))return this.firstTime=!1,new Xi("DATETIME")}catch{}}if((n==="DATETIME"||this.firstTime)&&(e.match(/\./g)||[]).length>=2){let a=e.match(/^(\d{1,2})\.(\d{1,2})\.(\d{4})(?:\s+(\d{1,2}):(\d{1,2})(?::(\d{1,2}))?)?$/);if(a)try{let l=parseInt(a[1]),c=parseInt(a[2])-1,u=parseInt(a[3]),d=a[4]?parseInt(a[4]):0,E=a[5]?parseInt(a[5]):0,f=a[6]?parseInt(a[6]):0;if(c>=0&&c<=11&&l>=1&&l<=31){let p=new Date(u,c,l,d,E,f);if(!isNaN(p.getTime())&&p.getFullYear()===u&&p.getMonth()===c&&p.getDate()===l)return this.firstTime=!1,new Xi("DATETIME")}}catch{}}let o=Math.max(r+5,20);return this.currentType.length!==void 0&&o<this.currentType.length&&(o=this.currentType.length),this.firstTime=!1,new Xi("NVARCHAR",void 0,void 0,o)}refreshCurrentType(e){return this.currentType=this.getType(e),this.currentType}},tw=class extends l3.Readable{constructor(n,r,i){super();this.currentIndex=0;this.byteLength=0;this.lastReportedIndex=-1;this.lastReportTime=0;this.lastReportedMessage="";this.importer=n,this.rows=r,this.progressCallback=i,this.currentIndex=0,this.lastReportedIndex=-1,this.lastReportTime=0,this.lastReportedMessage="";try{this.byteLength=r.reduce((s,o)=>{let a=o.reduce((l,c)=>l+(c?c.length:0),0);return s+a+o.length},0)}catch{this.byteLength=1024*1024}}_read(n){try{let r=!0;for(;r&&this.currentIndex<this.rows.length;){let a=this.rows[this.currentIndex].map((l,c)=>this.importer.formatValue(l||"",c)).join(this.importer.getDelimiter())+this.importer.getRecordDelim();r=this.push(Buffer.from(a,"utf8")),this.currentIndex++}let i=this.rows.length;if(this.currentIndex>this.lastReportedIndex){let s=Date.now();if(this.currentIndex>=i||s-this.lastReportTime>=1e3){let c=`Importing: ${Math.floor(this.currentIndex/i*100)}% complete (${this.currentIndex.toLocaleString()} / ${i.toLocaleString()} rows)`,d=(this.currentIndex-(this.lastReportedIndex<0?0:this.lastReportedIndex))/i*100;c!==this.lastReportedMessage&&(this.progressCallback?.(c,d,!1),this.lastReportedIndex=this.currentIndex,this.lastReportTime=s,this.lastReportedMessage=c)}}this.currentIndex>=this.rows.length&&this.push(null)}catch(r){this.emit("error",r)}}},wR=class{constructor(e,n,r){this.delimiter="	";this.delimiterPlain="\\t";this.recordDelim=`
`;this.recordDelimPlain="\\n";this.escapechar="\\";this.csvDelimiter=",";this.excelData=[];this.isExcelFile=!1;this.sqlHeaders=[];this.dataTypes=[];this.rowsCount=0;this.valuesToEscape=[];this.filePath=e,this.targetTable=n,this.logDir=r||Ya.join(Ya.dirname(e),"netezza_logs");let i=Ya.extname(e).toLowerCase();this.isExcelFile=[".xlsx",".xlsb"].includes(i),this.virtualFileName=`virtual_import_${Date.now()}_${Math.floor(Math.random()*1e3)}.txt`,this.valuesToEscape=[this.escapechar,this.recordDelim,"\r",this.delimiter],oi.existsSync(this.logDir)||oi.mkdirSync(this.logDir,{recursive:!0})}getDelimiter(){return this.delimiter}getRecordDelim(){return this.recordDelim}detectCsvDelimiter(){let n=oi.readFileSync(this.filePath,"utf-8").split(`
`)[0]||"";n.startsWith("\uFEFF")&&(n=n.slice(1));let r=[";","	","|",","],i={};for(let o of r)i[o]=(n.match(new RegExp(o==="|"?"\\|":o,"g"))||[]).length;let s=Math.max(...Object.values(i));s>0&&(this.csvDelimiter=Object.keys(i).find(o=>i[o]===s)||",")}cleanColumnName(e){let n=String(e).trim();return n=n.replace(/[^0-9a-zA-Z]+/g,"_").toUpperCase(),(!n||/^\d/.test(n)||n.startsWith("_"))&&(n="COL"+(n.startsWith("_")?"":"_")+n),n}parseCsvLine(e){let n=[],r="",i=!1;for(let s=0;s<e.length;s++){let o=e[s];o==='"'?i&&e[s+1]==='"'?(r+='"',s++):i=!i:o===this.csvDelimiter&&!i?(n.push(r),r=""):r+=o}return n.push(r),n}async readExcelFile(e){if(!ew)throw new Error("ReaderFactory module not available");e?.("Reading Excel file...");let n=ew.create(this.filePath);await n.open(this.filePath);let r=[],i=o=>{if(o==null)return"";if(o instanceof Date){let a=l=>l<10?"0"+l:l;return`${o.getFullYear()}-${a(o.getMonth()+1)}-${a(o.getDate())} ${a(o.getHours())}:${a(o.getMinutes())}:${a(o.getSeconds())}`}return String(o)},s=0;for(;await n.read();){let o=[],a=n._currentRow;if(a&&Array.isArray(a))for(let l=0;l<a.length;l++)o.push(i(a[l]));r.push(o),s++,s%1e4===0&&(e?.(`Processed ${s.toLocaleString()} rows...`,void 0,!1),await a3())}return typeof n.close=="function"&&await n.close(),e?.(`Excel file loaded: ${r.length} rows`),r}async analyzeDataTypes(e){e?.("Analyzing data types...");let n;if(this.isExcelFile)this.excelData=await this.readExcelFile(e),n=this.excelData;else{this.detectCsvDelimiter();let i=oi.readFileSync(this.filePath,"utf-8");i.startsWith("\uFEFF")&&(i=i.slice(1));let s=i.split(/\r?\n/);n=[];for(let o of s)o.trim()&&n.push(this.parseCsvLine(o))}if(!n||n.length===0)throw new Error("No data found in file");let r=[];this.sqlHeaders=n[0].map(i=>this.cleanColumnName(i||"COLUMN"));for(let i=0;i<n[0].length;i++)r.push(new zc);for(let i=1;i<n.length;i++){let s=n[i];for(let o=0;o<s.length;o++)o<r.length&&s[o]&&s[o].trim()&&r[o].refreshCurrentType(s[o].trim());i%1e4===0&&(e?.(`Analyzed ${i.toLocaleString()} rows...`,void 0,!1),await a3())}return this.rowsCount=n.length-1,e?.(`Analysis complete: ${this.rowsCount.toLocaleString()} rows`),this.dataTypes=r,r}escapeValue(e){let n=String(e).trim();for(let r of this.valuesToEscape)n=n.split(r).join(`${this.escapechar}${r}`);return n}formatValue(e,n){let r=this.escapeValue(e);return n<this.dataTypes.length&&this.dataTypes[n].currentType.dbType==="DATETIME"&&(r=r.replace("T"," ")),r}generateCreateTableSql(){let e=[];for(let r=0;r<this.sqlHeaders.length;r++){let i=this.sqlHeaders[r],s=this.dataTypes[r];e.push(`        ${i} ${s.currentType.toString()}`)}let n=this.logDir.replace(/\\/g,"/");return`CREATE TABLE ${this.targetTable} AS 
(
    SELECT * FROM EXTERNAL '${this.virtualFileName}'
    (
${e.join(`,
`)}
    )
    USING
    (
        REMOTESOURCE 'jdbc'
        DELIMITER '${this.delimiterPlain}'
        RecordDelim '${this.recordDelimPlain}'
        ESCAPECHAR '${this.escapechar}'
        NULLVALUE ''
        ENCODING 'utf-8'
        TIMESTYLE '24HOUR'
        SKIPROWS 0
        MAXERRORS 10
        LOGDIR '${n}'
    )
) DISTRIBUTE ON RANDOM;`}async createDataStream(e){e?.("Preparing data stream...");try{let n;if(this.isExcelFile){if(!this.excelData||this.excelData.length===0)throw new Error("Excel data not loaded. Call analyzeDataTypes first.");n=this.excelData.slice(1)}else{let r=oi.readFileSync(this.filePath,"utf-8");r.startsWith("\uFEFF")&&(r=r.slice(1));let i=r.split(/\r?\n/);n=[];let s=!0;for(let o of i)if(o.trim()){if(s){s=!1;continue}n.push(this.parseCsvLine(o))}}return this.rowsCount=n.length,new tw(this,n,e)}catch(n){let r=n instanceof Error?n.message:String(n);throw e?.(`Error preparing stream: ${r}`),n}}getVirtualFileName(){return this.virtualFileName}getRowsCount(){return this.rowsCount}getSqlHeaders(){return this.sqlHeaders}getCsvDelimiter(){return this.csvDelimiter}}});var N3=G(()=>{"use strict"});async function le(t,e){let r=await t.createCommand(e).executeReader(),i=[];for(;await r.read();){let s={};for(let o=0;o<r.fieldCount;o++)s[r.getName(o)]=r.getValue(o);i.push(s)}return i}function me(t){return!t||/^[A-Z_][A-Z0-9_]*$/i.test(t)&&t===t.toUpperCase()?t:`"${t.replace(/"/g,'""')}"`}function UR(t){if(!t)return t;let e=t.trim().toUpperCase();return e==="CHARACTER VARYING"?"CHARACTER VARYING(ANY)":e==="NATIONAL CHARACTER VARYING"?"NATIONAL CHARACTER VARYING(ANY)":e==="NATIONAL CHARACTER"?"NATIONAL CHARACTER(ANY)":e==="CHARACTER"?"CHARACTER(ANY)":t}async function Dt(t,e){let n={host:t.host,port:t.port||5480,database:e||t.database,user:t.user,password:t.password},r=Qn(),i=new r(n);return await i.connect(),i}var li=G(()=>{"use strict"});async function ci(t,e,n,r){let i=Qe.getTableColumns(e,n,r),s=await le(t,i),o=[];for(let a of s){let l=!1,c=a.ATTNOTNULL;if(typeof c=="boolean")l=c;else if(typeof c=="number")l=c!==0;else if(typeof c=="string"){let u=c.trim().toLowerCase();l=u==="t"||u==="true"||u==="1"||u==="yes"}o.push({name:a.ATTNAME,description:a.DESCRIPTION||null,fullTypeName:a.FULL_TYPE,notNull:l,defaultValue:a.COLDEFAULT||null})}return o}async function Ps(t,e,n,r){try{let i=Qe.getDistributionKeys(e,n,r);return(await le(t,i)).map(o=>o.ATTNAME)}catch{return[]}}async function xs(t,e,n,r){try{let i=Qe.getOrganizeColumns(e,n,r);return(await le(t,i)).map(o=>o.ATTNAME)}catch{return[]}}async function vs(t,e,n,r){let i=Qe.getTableKeys(e,n,r),s=new Map;try{let o=await le(t,i);for(let a of o){let l=a.CONSTRAINTNAME;if(!s.has(l)){let u={p:"PRIMARY KEY",f:"FOREIGN KEY",u:"UNIQUE"};s.set(l,{type:u[a.CONTYPE]||"UNKNOWN",typeChar:a.CONTYPE,columns:[],pkDatabase:a.PKDATABASE||null,pkSchema:a.PKSCHEMA||null,pkRelation:a.PKRELATION||null,pkColumns:[],updateType:a.UPDT_TYPE||"NO ACTION",deleteType:a.DEL_TYPE||"NO ACTION"})}let c=s.get(l);c.columns.push(a.ATTNAME),a.PKATTNAME&&c.pkColumns.push(a.PKATTNAME)}}catch(o){console.warn("Cannot retrieve keys info:",o)}return s}async function Va(t,e,n,r){try{let i=Qe.getObjectComment(e,n,r,"TABLE"),s=await le(t,i);if(s.length>0&&s[0].DESCRIPTION)return s[0].DESCRIPTION}catch{try{let i=Qe.getObjectComment(e,n,r),s=await le(t,i);if(s.length>0&&s[0].DESCRIPTION)return s[0].DESCRIPTION}catch{}}return null}async function Hf(t,e,n,r){try{let i=Qe.getTableOwner(e,n,r),s=await le(t,i);if(s.length>0&&s[0].OWNER)return s[0].OWNER}catch{}return null}var BR=G(()=>{"use strict";li();Mo()});async function qa(t,e,n,r){let i=await ci(t,e,n,r);if(i.length===0)throw new Error(`Table ${e}.${n}.${r} not found or has no columns`);let s=await Ps(t,e,n,r),o=await xs(t,e,n,r),a=await vs(t,e,n,r),l=await Va(t,e,n,r);return jc(e,n,r,i,s,o,a,l)}function jc(t,e,n,r,i,s,o,a){if(r.length===0)return`-- Table ${t}.${e}.${n} has no columns or was not found`;let l=me(t),c=me(e),u=me(n),d=[];d.push(`CREATE TABLE ${l}.${c}.${u}`),d.push("(");let E=[];for(let f of r){let h=`    ${me(f.name)} ${f.fullTypeName}`;f.notNull&&(h+=" NOT NULL"),f.defaultValue!==null&&(h+=` DEFAULT ${f.defaultValue}`),E.push(h)}if(d.push(E.join(`,
`)),i.length>0){let f=i.map(p=>me(p));d.push(`)
DISTRIBUTE ON (${f.join(", ")})`)}else d.push(`)
DISTRIBUTE ON RANDOM`);if(s.length>0){let f=s.map(p=>me(p));d.push(`ORGANIZE ON (${f.join(", ")})`)}d.push(";"),d.push("");for(let[f,p]of o){let h=me(f),T=p.columns.map(S=>me(S));if(p.typeChar==="f"){let S=p.pkColumns.filter(A=>A).map(A=>me(A));S.length>0&&d.push(`ALTER TABLE ${l}.${c}.${u} ADD CONSTRAINT ${h} ${p.type} (${T.join(", ")}) REFERENCES ${p.pkDatabase}.${p.pkSchema}.${p.pkRelation} (${S.join(", ")}) ON DELETE ${p.deleteType} ON UPDATE ${p.updateType};`)}else(p.typeChar==="p"||p.typeChar==="u")&&d.push(`ALTER TABLE ${l}.${c}.${u} ADD CONSTRAINT ${h} ${p.type} (${T.join(", ")});`)}if(a){let f=a.replace(/'/g,"''");d.push(""),d.push(`COMMENT ON TABLE ${l}.${c}.${u} IS '${f}';`)}for(let f of r)if(f.description){let p=me(f.name),h=f.description.replace(/'/g,"''");d.push(`COMMENT ON COLUMN ${l}.${c}.${u}.${p} IS '${h}';`)}return d.join(`
`)}var FR=G(()=>{"use strict";li();BR()});function sw(t,e,n,r){let i=me(t),s=me(e),o=me(n),a=[];return a.push(`CREATE OR REPLACE VIEW ${i}.${s}.${o} AS`),a.push(r||""),a.join(`
`)}async function Gf(t,e,n,r){let i=`
        SELECT 
            SCHEMA,
            VIEWNAME,
            DEFINITION,
            OBJID::INT
        FROM ${e.toUpperCase()}..${te.VIEW}
        WHERE DATABASE = '${e.toUpperCase()}'
            AND SCHEMA = '${n.toUpperCase()}'
            AND VIEWNAME = '${r.toUpperCase()}'
    `,o=await le(t,i);if(o.length===0)throw new Error(`View ${e}.${n}.${r} not found`);let a=o[0];return sw(e,n,r,a.DEFINITION)}var HR=G(()=>{"use strict";li();Nu()});function ow(t,e,n){let r=me(t),i=me(e),s=me(n.procedureName),o=[],a=`CREATE OR REPLACE PROCEDURE ${r}.${i}.${s}`;if(n.arguments){let l=n.arguments.trim();l.startsWith("(")&&l.endsWith(")")?a+=l:a+=`(${l})`}else a+="()";if(o.push(a),o.push(`RETURNS ${n.returns}`),n.executeAsOwner?o.push("EXECUTE AS OWNER"):o.push("EXECUTE AS CALLER"),o.push("LANGUAGE NZPLSQL AS"),o.push("BEGIN_PROC"),o.push(n.procedureSource),o.push("END_PROC;"),n.description){let l=n.description.replace(/'/g,"''");o.push(`COMMENT ON PROCEDURE ${s} IS '${l}';`)}return o.join(`
`)}async function $f(t,e,n,r){let i=`
        SELECT 
            SCHEMA,
            PROCEDURESOURCE,
            OBJID::INT,
            RETURNS,
            EXECUTEDASOWNER,
            DESCRIPTION,
            PROCEDURESIGNATURE,
            PROCEDURE,
            ARGUMENTS,
            NULL AS LANGUAGE
        FROM ${e.toUpperCase()}..${te.PROCEDURE}
        WHERE DATABASE = '${e.toUpperCase()}'
            AND SCHEMA = '${n.toUpperCase()}'
            AND PROCEDURESIGNATURE = '${r.toUpperCase()}'
        ORDER BY 1, 2, 3
    `,o=await le(t,i);if(o.length===0)throw new Error(`Procedure ${e}.${n}.${r} not found`);let a=o[0],l={schema:a.SCHEMA,procedureSource:a.PROCEDURESOURCE,objId:a.OBJID,returns:UR(a.RETURNS),executeAsOwner:!!a.EXECUTEDASOWNER,description:a.DESCRIPTION||null,procedureSignature:a.PROCEDURESIGNATURE,procedureName:a.PROCEDURE,arguments:a.ARGUMENTS||null};return ow(e,n,l)}var GR=G(()=>{"use strict";li();Nu()});function aw(t,e,n,r,i){let s=me(t),o=me(e),a=me(n),l=[];l.push(`CREATE EXTERNAL TABLE ${s}.${o}.${a}`),l.push("(");let c=i.map(u=>{let d=`    ${me(u.name)} ${u.fullTypeName}`;return u.notNull&&(d+=" NOT NULL"),d});return l.push(c.join(`,
`)),l.push(")"),l.push("USING"),l.push("("),r.dataObject!==null&&l.push(`    DATAOBJECT('${r.dataObject}')`),r.delimiter!==null&&l.push(`    DELIMITER '${r.delimiter}'`),r.encoding!==null&&l.push(`    ENCODING '${r.encoding}'`),r.timeStyle!==null&&l.push(`    TIMESTYLE '${r.timeStyle}'`),r.remoteSource!==null&&l.push(`    REMOTESOURCE '${r.remoteSource}'`),r.maxErrors!==null&&l.push(`    MAXERRORS ${r.maxErrors}`),r.escapeChar!==null&&l.push(`    ESCAPECHAR '${r.escapeChar}'`),r.decimalDelim!==null&&l.push(`    DECIMALDELIM '${r.decimalDelim}'`),r.logDir!==null&&l.push(`    LOGDIR '${r.logDir}'`),r.quotedValue!==null&&l.push(`    QUOTEDVALUE '${r.quotedValue}'`),r.nullValue!==null&&l.push(`    NULLVALUE '${r.nullValue}'`),r.crInString!==null&&l.push(`    CRINSTRING ${r.crInString}`),r.truncString!==null&&l.push(`    TRUNCSTRING ${r.truncString}`),r.ctrlChars!==null&&l.push(`    CTRLCHARS ${r.ctrlChars}`),r.ignoreZero!==null&&l.push(`    IGNOREZERO ${r.ignoreZero}`),r.timeExtraZeros!==null&&l.push(`    TIMEEXTRAZEROS ${r.timeExtraZeros}`),r.y2Base!==null&&l.push(`    Y2BASE ${r.y2Base}`),r.fillRecord!==null&&l.push(`    FILLRECORD ${r.fillRecord}`),r.compress!==null&&l.push(`    COMPRESS ${r.compress}`),r.includeHeader!==null&&l.push(`    INCLUDEHEADER ${r.includeHeader}`),r.lfInString!==null&&l.push(`    LFINSTRING ${r.lfInString}`),r.dateStyle!==null&&l.push(`    DATESTYLE '${r.dateStyle}'`),r.dateDelim!==null&&l.push(`    DATEDELIM '${r.dateDelim}'`),r.timeDelim!==null&&l.push(`    TIMEDELIM '${r.timeDelim}'`),r.boolStyle!==null&&l.push(`    BOOLSTYLE '${r.boolStyle}'`),r.format!==null&&l.push(`    FORMAT '${r.format}'`),r.socketBufSize!==null&&l.push(`    SOCKETBUFSIZE ${r.socketBufSize}`),r.recordDelim!==null&&l.push(`    RECORDDELIM '${r.recordDelim}'`),r.maxRows!==null&&l.push(`    MAXROWS ${r.maxRows}`),r.requireQuotes!==null&&l.push(`    REQUIREQUOTES ${r.requireQuotes}`),r.recordLength!==null&&l.push(`    RECORDLENGTH ${r.recordLength}`),r.dateTimeDelim!==null&&l.push(`    DATETIMEDELIM '${r.dateTimeDelim}'`),r.rejectFile!==null&&l.push(`    REJECTFILE '${r.rejectFile}'`),l.push(");"),l.join(`
`)}async function kf(t,e,n,r){let i=`
        SELECT 
            E1.SCHEMA,
            E1.TABLENAME,
            E2.EXTOBJNAME,
            E2.OBJID::INT,
            E1.DELIM,
            E1.ENCODING,
            E1.TIMESTYLE,
            E1.REMOTESOURCE,
            E1.SKIPROWS,
            E1.MAXERRORS,
            E1.ESCAPE,
            E1.LOGDIR,
            E1.DECIMALDELIM,
            E1.QUOTEDVALUE,
            E1.NULLVALUE,
            E1.CRINSTRING,
            E1.TRUNCSTRING,
            E1.CTRLCHARS,
            E1.IGNOREZERO,
            E1.TIMEEXTRAZEROS,
            E1.Y2BASE,
            E1.FILLRECORD,
            E1.COMPRESS,
            E1.INCLUDEHEADER,
            E1.LFINSTRING,
            E1.DATESTYLE,
            E1.DATEDELIM,
            E1.TIMEDELIM,
            E1.BOOLSTYLE,
            E1.FORMAT,
            E1.SOCKETBUFSIZE,
            E1.RECORDDELIM,
            E1.MAXROWS,
            E1.REQUIREQUOTES,
            E1.RECORDLENGTH,
            E1.DATETIMEDELIM,
            E1.REJECTFILE
        FROM 
            ${e.toUpperCase()}.._V_EXTERNAL E1
            JOIN ${e.toUpperCase()}.._V_EXTOBJECT E2 ON E1.DATABASE = E2.DATABASE
                AND E1.SCHEMA = E2.SCHEMA
                AND E1.TABLENAME = E2.TABLENAME
        WHERE 
            E1.DATABASE = '${e.toUpperCase()}'
            AND E1.SCHEMA = '${n.toUpperCase()}'
            AND E1.TABLENAME = '${r.toUpperCase()}'
    `,s=await le(t,i);if(s.length===0)throw new Error(`External table ${e}.${n}.${r} not found`);let o=u=>{if(u==null)return null;if(typeof u=="boolean")return u;if(typeof u=="number")return u!==0;let d=String(u).toLowerCase();return d==="t"||d==="true"||d==="1"||d==="yes"||d==="on"},a=s[0],l={schema:a.SCHEMA,tableName:a.TABLENAME,dataObject:a.EXTOBJNAME||null,delimiter:a.DELIM||null,encoding:a.ENCODING||null,timeStyle:a.TIMESTYLE||null,remoteSource:a.REMOTESOURCE||null,skipRows:a.SKIPROWS||null,maxErrors:a.MAXERRORS||null,escapeChar:a.ESCAPE||null,logDir:a.LOGDIR||null,decimalDelim:a.DECIMALDELIM||null,quotedValue:a.QUOTEDVALUE||null,nullValue:a.NULLVALUE||null,crInString:o(a.CRINSTRING),truncString:o(a.TRUNCSTRING),ctrlChars:o(a.CTRLCHARS),ignoreZero:o(a.IGNOREZERO),timeExtraZeros:o(a.TIMEEXTRAZEROS),y2Base:a.Y2BASE||null,fillRecord:o(a.FILLRECORD),compress:o(a.COMPRESS),includeHeader:o(a.INCLUDEHEADER),lfInString:o(a.LFINSTRING),dateStyle:a.DATESTYLE||null,dateDelim:a.DATEDELIM||null,timeDelim:a.TIMEDELIM||null,boolStyle:a.BOOLSTYLE||null,format:a.FORMAT||null,socketBufSize:a.SOCKETBUFSIZE||null,recordDelim:a.RECORDDELIM?String(a.RECORDDELIM).replace(/\r/g,"\\r").replace(/\n/g,"\\n"):null,maxRows:a.MAXROWS||null,requireQuotes:o(a.REQUIREQUOTES),recordLength:a.RECORDLENGTH||null,dateTimeDelim:a.DATETIMEDELIM||null,rejectFile:a.REJECTFILE||null},c=await ci(t,e,n,r);return aw(e,n,r,l,c)}var $R=G(()=>{"use strict";li();BR()});function lw(t,e,n,r,i,s){let o=me(t),a=me(r||i),l=me(e),c=[];if(c.push(`CREATE SYNONYM ${o}.${a}.${l} FOR ${n};`),s){let u=s.replace(/'/g,"''");c.push(`COMMENT ON SYNONYM ${l} IS '${u}';`)}return c.join(`
`)}async function Wf(t,e,n,r){let i=`
        SELECT 
            SCHEMA,
            OWNER,
            SYNONYM_NAME,
            REFOBJNAME,
            DESCRIPTION
        FROM ${e.toUpperCase()}.._V_SYNONYM
        WHERE DATABASE = '${e.toUpperCase()}'
            AND SCHEMA = '${n.toUpperCase()}'
            AND SYNONYM_NAME = '${r.toUpperCase()}'
    `,o=await le(t,i);if(o.length===0)throw new Error(`Synonym ${e}.${n}.${r} not found`);let a=o[0];return lw(e,r,a.REFOBJNAME,a.OWNER,n,a.DESCRIPTION)}var kR=G(()=>{"use strict";li()});async function cw(t){let e=null,n=[],r=[],i=0,s=0,o=["TABLE","VIEW","PROCEDURE","EXTERNAL TABLE","SYNONYM"];try{e=await Dt(t.connectionDetails,t.database);let a=t.database.toUpperCase(),l=t.schema?t.schema.toUpperCase():null,c=t.objectTypes?t.objectTypes.map(L=>L.toUpperCase()).filter(L=>o.includes(L)):o;c.length===0&&(c=o),r.push("-- ============================================"),r.push("-- Batch DDL Export"),r.push(`-- Database: ${a}`),l&&r.push(`-- Schema: ${l}`),r.push(`-- Object Types: ${c.join(", ")}`),r.push(`-- Generated: ${new Date().toISOString()}`),r.push("-- ============================================"),r.push("");let u=new Map,d=new Map,E=new Map,f=new Map,p=new Map,h=c.includes("TABLE"),T=c.includes("VIEW"),S=c.includes("EXTERNAL TABLE");if(h||T||S){let L=l?`AND D.SCHEMA = '${l}'`:"",I=`
                SELECT 
                    D.SCHEMA,
                    D.OBJNAME,
                    D.OBJTYPE,
                    X.ATTNAME,
                    X.DESCRIPTION,
                    X.FORMAT_TYPE AS FULL_TYPE,
                    X.ATTNOTNULL::BOOL AS ATTNOTNULL,
                    X.COLDEFAULT
                FROM ${a}.._V_RELATION_COLUMN X
                INNER JOIN ${a}.._V_OBJECT_DATA D ON X.OBJID = D.OBJID
                WHERE D.DBNAME = '${a}'
                    AND D.OBJTYPE IN ('TABLE', 'VIEW', 'EXTERNAL TABLE')
                    ${L}
                ORDER BY D.SCHEMA, D.OBJNAME, X.ATTNUM
            `;try{let D=await le(e,I);for(let g of D){let w=`${g.SCHEMA}.${g.OBJNAME}`;u.has(w)||u.set(w,[]);let x=!1,U=g.ATTNOTNULL;if(typeof U=="boolean")x=U;else if(typeof U=="number")x=U!==0;else if(typeof U=="string"){let H=U.trim().toLowerCase();x=H==="t"||H==="true"||H==="1"}u.get(w).push({name:g.ATTNAME,description:g.DESCRIPTION||null,fullTypeName:g.FULL_TYPE,notNull:x,defaultValue:g.COLDEFAULT||null})}}catch(D){let g=D instanceof Error?D.message:String(D);n.push(`Error bulk fetching columns: ${g}`)}}if(h){let L=l?`AND SCHEMA = '${l}'`:"",I=`
                SELECT SCHEMA, TABLENAME, ATTNAME
                FROM ${a}.._V_TABLE_DIST_MAP
                WHERE 1=1 ${L}
                ORDER BY SCHEMA, TABLENAME, DISTSEQNO
            `;try{let D=await le(e,I);for(let g of D){let w=`${g.SCHEMA}.${g.TABLENAME}`;d.has(w)||d.set(w,[]),d.get(w).push(g.ATTNAME)}}catch{}}if(h){let L=l?`AND SCHEMA = '${l}'`:"",I=`
                SELECT SCHEMA, TABLENAME, ATTNAME
                FROM ${a}.._V_TABLE_ORGANIZE_COLUMN
                WHERE 1=1 ${L}
                ORDER BY SCHEMA, TABLENAME, ORGSEQNO
            `;try{let D=await le(e,I);for(let g of D){let w=`${g.SCHEMA}.${g.TABLENAME}`;E.has(w)||E.set(w,[]),E.get(w).push(g.ATTNAME)}}catch{}}if(h){let L=l?`AND X.SCHEMA = '${l}'`:"",I=`
                SELECT 
                    X.SCHEMA, X.RELATION, X.CONSTRAINTNAME, X.CONTYPE,
                    X.ATTNAME, X.PKDATABASE, X.PKSCHEMA, X.PKRELATION, X.PKATTNAME,
                    X.UPDT_TYPE, X.DEL_TYPE
                FROM ${a}.._V_RELATION_KEYDATA X
                WHERE X.OBJID NOT IN (4,5) ${L}
                ORDER BY X.SCHEMA, X.RELATION, X.CONSTRAINTNAME, X.CONSEQ
            `;try{let D=await le(e,I);for(let g of D){let w=`${g.SCHEMA}.${g.RELATION}`;f.has(w)||f.set(w,new Map);let x=f.get(w),U=g.CONSTRAINTNAME;if(!x.has(U)){let X={p:"PRIMARY KEY",f:"FOREIGN KEY",u:"UNIQUE"};x.set(U,{type:X[g.CONTYPE]||"UNKNOWN",typeChar:g.CONTYPE,columns:[],pkDatabase:g.PKDATABASE||null,pkSchema:g.PKSCHEMA||null,pkRelation:g.PKRELATION||null,pkColumns:[],updateType:g.UPDT_TYPE||"NO ACTION",deleteType:g.DEL_TYPE||"NO ACTION"})}let H=x.get(U);H.columns.push(g.ATTNAME),g.PKATTNAME&&H.pkColumns.push(g.PKATTNAME)}}catch{}}if(h){let L=l?`AND SCHEMA = '${l}'`:"",I=`
                SELECT SCHEMA, OBJNAME, DESCRIPTION
                FROM ${a}.._V_OBJECT_DATA
                WHERE DBNAME = '${a}' AND OBJTYPE = 'TABLE' AND DESCRIPTION IS NOT NULL ${L}
            `;try{let D=await le(e,I);for(let g of D)g.DESCRIPTION&&p.set(`${g.SCHEMA}.${g.OBJNAME}`,g.DESCRIPTION)}catch{}}let A=new Map,R=new Map,m=new Map,N=new Map;if(c.includes("PROCEDURE")){let L=l?`AND SCHEMA = '${l}'`:"",I=`
                SELECT 
                    SCHEMA,
                    PROCEDURESOURCE,
                    OBJID::INT,
                    RETURNS,
                    EXECUTEDASOWNER,
                    DESCRIPTION,
                    PROCEDURESIGNATURE,
                    PROCEDURE,
                    ARGUMENTS
                FROM ${a}.._V_PROCEDURE
                WHERE DATABASE = '${a}'
                    ${L}
            `;try{let D=await le(e,I);for(let g of D){let w=`${g.SCHEMA}.${g.PROCEDURESIGNATURE}`;A.set(w,{schema:g.SCHEMA,procedureSource:g.PROCEDURESOURCE,objId:g.OBJID,returns:UR(g.RETURNS),executeAsOwner:!!g.EXECUTEDASOWNER,description:g.DESCRIPTION||null,procedureSignature:g.PROCEDURESIGNATURE,procedureName:g.PROCEDURE,arguments:g.ARGUMENTS||null})}}catch(D){let g=D instanceof Error?D.message:String(D);n.push(`Error bulk fetching procedures: ${g}`)}}if(c.includes("VIEW")){let L=l?`AND SCHEMA = '${l}'`:"",I=`
                SELECT SCHEMA, VIEWNAME, DEFINITION
                FROM ${a}.._V_VIEW
                WHERE DATABASE = '${a}'
                    ${L}
            `;try{let D=await le(e,I);for(let g of D)R.set(`${g.SCHEMA}.${g.VIEWNAME}`,g.DEFINITION||"")}catch(D){let g=D instanceof Error?D.message:String(D);n.push(`Error bulk fetching views: ${g}`)}}if(c.includes("SYNONYM")){let L=l?`AND SCHEMA = '${l}'`:"",I=`
                SELECT SCHEMA, OWNER, SYNONYM_NAME, REFOBJNAME, DESCRIPTION
                FROM ${a}.._V_SYNONYM
                WHERE DATABASE = '${a}'
                    ${L}
            `;try{let D=await le(e,I);for(let g of D)m.set(`${g.SCHEMA}.${g.SYNONYM_NAME}`,{refObjName:g.REFOBJNAME,owner:g.OWNER,description:g.DESCRIPTION||null})}catch(D){let g=D instanceof Error?D.message:String(D);n.push(`Error bulk fetching synonyms: ${g}`)}}if(c.includes("EXTERNAL TABLE")){let L=l?`AND E1.SCHEMA = '${l}'`:"",I=`
                SELECT 
                    E1.SCHEMA, E1.TABLENAME, E2.EXTOBJNAME, E2.OBJID::INT, E1.DELIM, E1.ENCODING, E1.TIMESTYLE,
                    E1.REMOTESOURCE, E1.SKIPROWS, E1.MAXERRORS, E1.ESCAPE, E1.LOGDIR, E1.DECIMALDELIM,
                    E1.QUOTEDVALUE, E1.NULLVALUE, E1.CRINSTRING, E1.TRUNCSTRING, E1.CTRLCHARS, E1.IGNOREZERO,
                    E1.TIMEEXTRAZEROS, E1.Y2BASE, E1.FILLRECORD, E1.COMPRESS, E1.INCLUDEHEADER, E1.LFINSTRING,
                    E1.DATESTYLE, E1.DATEDELIM, E1.TIMEDELIM, E1.BOOLSTYLE, E1.FORMAT, E1.SOCKETBUFSIZE,
                    E1.RECORDDELIM, E1.MAXROWS, E1.REQUIREQUOTES, E1.RECORDLENGTH, E1.DATETIMEDELIM, E1.REJECTFILE
                FROM ${a}.._V_EXTERNAL E1
                JOIN ${a}.._V_EXTOBJECT E2 ON E1.DATABASE = E2.DATABASE
                    AND E1.SCHEMA = E2.SCHEMA
                    AND E1.TABLENAME = E2.TABLENAME
                WHERE E1.DATABASE = '${a}'
                    ${L}
            `;try{let D=w=>{if(w==null)return null;if(typeof w=="boolean")return w;if(typeof w=="number")return w!==0;let x=String(w).toLowerCase();return x==="t"||x==="true"||x==="1"||x==="yes"||x==="on"},g=await le(e,I);for(let w of g)N.set(`${w.SCHEMA}.${w.TABLENAME}`,{schema:w.SCHEMA,tableName:w.TABLENAME,dataObject:w.EXTOBJNAME||null,delimiter:w.DELIM||null,encoding:w.ENCODING||null,timeStyle:w.TIMESTYLE||null,remoteSource:w.REMOTESOURCE||null,skipRows:w.SKIPROWS||null,maxErrors:w.MAXERRORS||null,escapeChar:w.ESCAPE||null,logDir:w.LOGDIR||null,decimalDelim:w.DECIMALDELIM||null,quotedValue:w.QUOTEDVALUE||null,nullValue:w.NULLVALUE||null,crInString:D(w.CRINSTRING),truncString:D(w.TRUNCSTRING),ctrlChars:D(w.CTRLCHARS),ignoreZero:D(w.IGNOREZERO),timeExtraZeros:D(w.TIMEEXTRAZEROS),y2Base:w.Y2BASE||null,fillRecord:D(w.FILLRECORD),compress:D(w.COMPRESS),includeHeader:D(w.INCLUDEHEADER),lfInString:D(w.LFINSTRING),dateStyle:w.DATESTYLE||null,dateDelim:w.DATEDELIM||null,timeDelim:w.TIMEDELIM||null,boolStyle:w.BOOLSTYLE||null,format:w.FORMAT||null,socketBufSize:w.SOCKETBUFSIZE||null,recordDelim:w.RECORDDELIM?String(w.RECORDDELIM).replace(/\r/g,"\\r").replace(/\n/g,"\\n"):null,maxRows:w.MAXROWS||null,requireQuotes:D(w.REQUIREQUOTES),recordLength:w.RECORDLENGTH||null,dateTimeDelim:w.DATETIMEDELIM||null,rejectFile:w.REJECTFILE||null})}catch(D){let g=D instanceof Error?D.message:String(D);n.push(`Error bulk fetching external tables: ${g}`)}}for(let L of c){let I=[];try{if(L==="PROCEDURE"){let D=`SELECT PROCEDURESIGNATURE AS OBJNAME, SCHEMA FROM ${a}.._V_PROCEDURE WHERE DATABASE = '${a}'`;l&&(D+=` AND SCHEMA = '${l}'`),D+=" ORDER BY SCHEMA, PROCEDURESIGNATURE",I=(await le(e,D)).map(w=>({name:w.OBJNAME,schema:w.SCHEMA}))}else{let D=`SELECT OBJNAME, SCHEMA FROM ${a}.._V_OBJECT_DATA WHERE DBNAME = '${a}' AND OBJTYPE = '${L}'`;l&&(D+=` AND SCHEMA = '${l}'`),D+=" ORDER BY SCHEMA, OBJNAME",I=(await le(e,D)).map(w=>({name:w.OBJNAME,schema:w.SCHEMA}))}}catch(D){let g=D instanceof Error?D.message:String(D);n.push(`Error querying ${L}s: ${g}`);continue}if(I.length!==0){r.push("-- ----------------------------------------"),r.push(`-- ${L}S (${I.length})`),r.push("-- ----------------------------------------"),r.push("");for(let D of I)try{let g,w=`${D.schema}.${D.name}`;switch(L){case"TABLE":g=jc(a,D.schema,D.name,u.get(w)||[],d.get(w)||[],E.get(w)||[],f.get(w)||new Map,p.get(w)||null);break;case"VIEW":g=sw(a,D.schema,D.name,R.get(w)||"");break;case"PROCEDURE":let x=A.get(w);if(x)g=ow(a,D.schema,x);else throw new Error(`Metadata for procedure ${w} not found`);break;case"EXTERNAL TABLE":let U=N.get(w);if(U)g=aw(a,D.schema,D.name,U,u.get(w)||[]);else throw new Error(`Metadata for external table ${w} not found`);break;case"SYNONYM":let H=m.get(w);if(H)g=lw(a,D.name,H.refObjName,H.owner,D.schema,H.description);else throw new Error(`Metadata for synonym ${w} not found`);break;default:s++;continue}r.push(`-- ${L}: ${a}.${D.schema}.${D.name}`),r.push(g),r.push(""),i++}catch(g){let w=g instanceof Error?g.message:String(g);n.push(`Error generating DDL for ${L} ${a}.${D.schema}.${D.name}: ${w}`),s++}}}return r.push("-- ============================================"),r.push("-- End of Batch DDL Export"),r.push(`-- Total objects: ${i}`),s>0&&r.push(`-- Skipped: ${s}`),n.length>0&&r.push(`-- Errors: ${n.length}`),r.push("-- ============================================"),{success:!0,ddlCode:r.join(`
`),objectCount:i,errors:n,skipped:s}}catch(a){return{success:!1,objectCount:0,errors:[`Batch DDL generation error: ${a instanceof Error?a.message:String(a)}`],skipped:0}}finally{if(e)try{await e.close()}catch{}}}var O3=G(()=>{"use strict";li();FR();HR();GR();$R();kR()});async function uw(t,e,n,r,i){let s=null;try{s=await Dt(t,e);let o=i.toUpperCase();return o==="TABLE"?{success:!0,ddlCode:await qa(s,e,n,r),objectInfo:{database:e,schema:n,objectName:r,objectType:i}}:o==="VIEW"?{success:!0,ddlCode:await Gf(s,e,n,r),objectInfo:{database:e,schema:n,objectName:r,objectType:i}}:o==="PROCEDURE"?{success:!0,ddlCode:await $f(s,e,n,r),objectInfo:{database:e,schema:n,objectName:r,objectType:i}}:o==="EXTERNAL TABLE"?{success:!0,ddlCode:await kf(s,e,n,r),objectInfo:{database:e,schema:n,objectName:r,objectType:i}}:o==="SYNONYM"?{success:!0,ddlCode:await Wf(s,e,n,r),objectInfo:{database:e,schema:n,objectName:r,objectType:i}}:{success:!0,ddlCode:`-- DDL generation for ${i} not yet implemented
-- Object: ${e}.${n}.${r}
-- Type: ${i}
--
-- This feature can be extended to support:
-- - FUNCTION: Query _V_FUNCTION system table
-- - AGGREGATE: Query _V_AGGREGATE system table
`,objectInfo:{database:e,schema:n,objectName:r,objectType:i},note:`${i} DDL generation not yet implemented`}}catch(o){return{success:!1,error:`DDL generation error: ${o instanceof Error?o.message:String(o)}`}}finally{if(s)try{await s.close()}catch{}}}var C3=G(()=>{"use strict";li();FR();HR();GR();$R();kR()});var dw=G(()=>{"use strict";N3();li();BR();FR();HR();GR();$R();kR();O3();C3()});var Ew={};Pt(Ew,{buildTableDDLFromCache:()=>jc,generateBatchDDL:()=>cw,generateDDL:()=>uw,generateExternalTableDDL:()=>kf,generateProcedureDDL:()=>$f,generateSynonymDDL:()=>Wf,generateTableDDL:()=>qa,generateViewDDL:()=>Gf,getColumns:()=>ci,getDistributionInfo:()=>Ps,getKeysInfo:()=>vs,getOrganizeInfo:()=>xs,getTableComment:()=>Va,getTableOwner:()=>Hf,quoteNameIfNeeded:()=>me});var qf=G(()=>{"use strict";dw()});var w3={};Pt(w3,{generateRecreateTableScript:()=>rLe});async function rLe(t,e,n,r,i){let s=null;try{let o={host:t.host,port:t.port||5480,database:t.database,user:t.user,password:t.password},a=Qn();s=new a(o),await s.connect();let l=await ci(s,e,n,r);if(l.length===0)return{success:!1,error:`Table ${e}.${n}.${r} not found or has no columns`};let c=await Ps(s,e,n,r),u=await xs(s,e,n,r),d=await vs(s,e,n,r),E=await Va(s,e,n,r),f=await Hf(s,e,n,r),p=me(e),h=me(n),T=me(r),S=new Date().toISOString().replace(/[-:T.]/g,"").substring(0,14),A=Math.random().toString(36).substring(2,7).toUpperCase(),R=i||`${r}_${S}_NEW`,m=me(R),N=`${r}_${S}_BACKUP_${A}`,L=me(N),I=[];I.push(`-- Recreate Table Script for ${p}.${h}.${T}`),I.push(`-- Generated at ${new Date().toISOString()}`),I.push(""),I.push("-- 1. Create new table with desired structure"),I.push(`CREATE TABLE ${p}.${h}.${m}`),I.push("(");let D=[];for(let w of l){let U=`    ${me(w.name)} ${w.fullTypeName}`;w.notNull&&(U+=" NOT NULL"),w.defaultValue!==null&&(U+=` DEFAULT ${w.defaultValue}`),D.push(U)}if(I.push(D.join(`,
`)),c.length>0){let w=c.map(x=>me(x));I.push(`)
DISTRIBUTE ON (${w.join(", ")})`)}else I.push(`)
DISTRIBUTE ON RANDOM`);if(u.length>0){let w=u.map(x=>me(x));I.push(`ORGANIZE ON (${w.join(", ")})`)}if(I.push(";"),I.push(""),I.push("-- 2. Copy data from original table"),I.push(`INSERT INTO ${p}.${h}.${m} SELECT * FROM ${p}.${h}.${T};`),I.push(""),I.push("-- 3. Copy privileges from original table"),I.push(`ALTER TABLE ${p}.${h}.${m} SET PRIVILEGES TO ${p}.${h}.${T};`),I.push(""),I.push("-- 4. Swap tables: Rename Original to Backup, New to Original"),I.push(`ALTER TABLE ${p}.${h}.${T} RENAME TO ${L};`),I.push(`ALTER TABLE ${p}.${h}.${m} RENAME TO ${T};`),I.push(""),f&&(I.push("-- 5. Restore Owner"),I.push(`ALTER TABLE ${p}.${h}.${T} OWNER TO ${f};`),I.push("")),I.push("-- 6. Drop Backup Table (Optional - Comment out if you want to keep it)"),I.push(`DROP TABLE ${p}.${h}.${L};`),I.push(""),d.size>0){I.push("-- 7. Restore Constraints");for(let[w,x]of d){let U=me(w),H=x.columns.map(Q=>me(Q)),X="";if(x.typeChar==="f"){let Q=x.pkColumns.filter(K=>K).map(K=>me(K));Q.length>0&&(X=`ALTER TABLE ${p}.${h}.${T} ADD CONSTRAINT ${U} ${x.type} (${H.join(", ")}) REFERENCES ${x.pkDatabase}.${x.pkSchema}.${x.pkRelation} (${Q.join(", ")}) ON DELETE ${x.deleteType} ON UPDATE ${x.updateType};`)}else(x.typeChar==="p"||x.typeChar==="u")&&(X=`ALTER TABLE ${p}.${h}.${T} ADD CONSTRAINT ${U} ${x.type} (${H.join(", ")});`);X&&I.push(X)}I.push("")}if(E){let w=E.replace(/'/g,"''");I.push("-- 8. Restore Comments"),I.push(`COMMENT ON TABLE ${p}.${h}.${T} IS '${w}';`)}let g=[];for(let w of l)if(w.description){let x=me(w.name),U=w.description.replace(/'/g,"''");g.push(`COMMENT ON COLUMN ${p}.${h}.${T}.${x} IS '${U}';`)}return g.length>0&&(E||I.push("-- 8. Restore Comments"),I.push(g.join(`
`)),I.push("")),I.push("-- 9. Generate Statistics"),I.push(`GENERATE EXPRESS STATISTICS ON ${p}.${h}.${T};`),{success:!0,sqlScript:I.join(`
`)}}catch(o){return{success:!1,error:`Error generating recreate script: ${o instanceof Error?o.message:String(o)}`}}finally{if(s)try{await s.close()}catch{}}}var L3=G(()=>{"use strict";qf()});var hw={};Pt(hw,{compareProcedures:()=>cLe,compareTableStructures:()=>aLe});async function iLe(t,e){let r=await t.createCommand(e).executeReader(),i=[];for(;await r.read();){let s={};for(let o=0;o<r.fieldCount;o++)s[r.getName(o)]=r.getValue(o);i.push(s)}return i}async function P3(t,e,n,r){let i=await ci(t,e,n,r),s=await vs(t,e,n,r),o=await Ps(t,e,n,r),a=await xs(t,e,n,r);return{database:e,schema:n,tableName:r,columns:i,keys:s,distribution:o,organization:a}}function sLe(t,e){let n=[];return t.fullTypeName!==e.fullTypeName&&n.push(`Type: ${t.fullTypeName} \u2192 ${e.fullTypeName}`),t.notNull!==e.notNull&&n.push(`NOT NULL: ${t.notNull} \u2192 ${e.notNull}`),t.defaultValue!==e.defaultValue&&n.push(`Default: ${t.defaultValue||"NULL"} \u2192 ${e.defaultValue||"NULL"}`),n}function oLe(t,e){let n=[];return t.type!==e.type&&n.push(`Type: ${t.type} \u2192 ${e.type}`),t.columns.join(",")!==e.columns.join(",")&&n.push(`Columns: (${t.columns.join(", ")}) \u2192 (${e.columns.join(", ")})`),t.typeChar==="f"&&e.typeChar==="f"&&t.pkRelation!==e.pkRelation&&n.push(`References: ${t.pkRelation} \u2192 ${e.pkRelation}`),n}async function aLe(t,e,n,r,i,s,o){let a=null;try{let l={host:t.host,port:t.port||5480,database:t.database,user:t.user,password:t.password},c=Qn();a=new c(l),await a.connect();let u=await P3(a,e,n,r),d=await P3(a,i,s,o),E=[],f=new Map(u.columns.map(N=>[N.name.toUpperCase(),N])),p=new Map(d.columns.map(N=>[N.name.toUpperCase(),N]));for(let[N,L]of f){let I=p.get(N);if(!I)E.push({name:L.name,status:"removed",sourceColumn:L});else{let D=sLe(L,I);E.push({name:L.name,status:D.length>0?"modified":"unchanged",sourceColumn:L,targetColumn:I,changes:D})}}for(let[N,L]of p)f.has(N)||E.push({name:L.name,status:"added",targetColumn:L});let h=[],T=u.keys,S=d.keys;for(let[N,L]of T){let I=S.get(N);if(!I)h.push({name:N,status:"removed",sourceKey:L});else{let D=oLe(L,I);h.push({name:N,status:D.length>0?"modified":"unchanged",sourceKey:L,targetKey:I,changes:D})}}for(let[N,L]of S)T.has(N)||h.push({name:N,status:"added",targetKey:L});let A=JSON.stringify(u.distribution)===JSON.stringify(d.distribution),R=JSON.stringify(u.organization)===JSON.stringify(d.organization),m={columnsAdded:E.filter(N=>N.status==="added").length,columnsRemoved:E.filter(N=>N.status==="removed").length,columnsModified:E.filter(N=>N.status==="modified").length,columnsUnchanged:E.filter(N=>N.status==="unchanged").length,keysAdded:h.filter(N=>N.status==="added").length,keysRemoved:h.filter(N=>N.status==="removed").length,keysModified:h.filter(N=>N.status==="modified").length};return{source:{database:e,schema:n,name:r},target:{database:i,schema:s,name:o},columnDiffs:E,keyDiffs:h,distributionMatch:A,sourceDistribution:u.distribution,targetDistribution:d.distribution,organizationMatch:R,sourceOrganization:u.organization,targetOrganization:d.organization,summary:m}}finally{if(a)try{await a.close()}catch{}}}async function x3(t,e,n,r){let i=`
        SELECT 
            SCHEMA,
            PROCEDURESOURCE,
            RETURNS,
            EXECUTEDASOWNER,
            DESCRIPTION,
            PROCEDURESIGNATURE,
            PROCEDURE,
            ARGUMENTS
        FROM ${e.toUpperCase()}.._V_PROCEDURE
        WHERE DATABASE = '${e.toUpperCase()}'
            AND SCHEMA = '${n.toUpperCase()}'
            AND PROCEDURESIGNATURE = '${r.toUpperCase()}'
    `,s=await iLe(t,i);if(s.length===0)throw new Error(`Procedure ${e}.${n}.${r} not found`);let o=s[0];return{database:e,schema:n,procedureName:o.PROCEDURE,procedureSignature:o.PROCEDURESIGNATURE,arguments:o.ARGUMENTS||null,returns:o.RETURNS,executeAsOwner:!!o.EXECUTEDASOWNER,source:o.PROCEDURESOURCE,description:o.DESCRIPTION||null}}function lLe(t,e){let n=t.split(`
`).map(o=>o.trimEnd()),r=e.split(`
`).map(o=>o.trimEnd()),i=[],s=Math.max(n.length,r.length);for(let o=0;o<s;o++){let a=n[o]||"",l=r[o]||"";a===l?i.push(`  ${a}`):n[o]?r[o]?(i.push(`- ${a}`),i.push(`+ ${l}`)):i.push(`- ${a}`):i.push(`+ ${l}`)}return i}async function cLe(t,e,n,r,i,s,o){let a=null;try{let l={host:t.host,port:t.port||5480,database:t.database,user:t.user,password:t.password},c=Qn();a=new c(l),await a.connect();let u=await x3(a,e,n,r),d=await x3(a,i,s,o),E=u.arguments===d.arguments,f=u.returns===d.returns,p=u.executeAsOwner===d.executeAsOwner,h=u.source.trim()===d.source.trim(),T=h?[]:lLe(u.source,d.source);return{source:{database:e,schema:n,name:r},target:{database:i,schema:s,name:o},argumentsMatch:E,sourceArguments:u.arguments,targetArguments:d.arguments,returnsMatch:f,sourceReturns:u.returns,targetReturns:d.returns,executeAsOwnerMatch:p,sourceExecuteAsOwner:u.executeAsOwner,targetExecuteAsOwner:d.executeAsOwner,sourceMatch:h,sourceCode:u.source,targetCode:d.source,sourceDiff:T}}finally{if(a)try{await a.close()}catch{}}}var pw=G(()=>{"use strict";qf()});var Sw={};Pt(Sw,{SchemaCompareView:()=>Tw});var _o,Tw,Rw=G(()=>{"use strict";_o=j(require("vscode")),Tw=class t{constructor(e,n,r,i){this._disposables=[];this._panel=e,this._update(r,i),this._panel.onDidDispose(()=>this.dispose(),null,this._disposables)}static{this.viewType="netezza.schemaCompare"}static createOrShow(e,n,r){let i=_o.window.activeTextEditor?_o.window.activeTextEditor.viewColumn:void 0;if(t.currentPanel){t.currentPanel._panel.reveal(i),t.currentPanel._update(n,r);return}let s=_o.window.createWebviewPanel(t.viewType,"Schema Comparison",i||_o.ViewColumn.One,{enableScripts:!0,localResourceRoots:[_o.Uri.joinPath(e,"media")]});t.currentPanel=new t(s,e,n,r)}dispose(){for(t.currentPanel=void 0,this._panel.dispose();this._disposables.length;){let e=this._disposables.pop();e&&e.dispose()}}_update(e,n){n==="table"?(this._panel.title=`Compare: ${e.source.name} \u2194 ${e.target.name}`,this._panel.webview.html=this._getTableComparisonHtml(e)):(this._panel.title=`Compare: ${e.source.name} \u2194 ${e.target.name}`,this._panel.webview.html=this._getProcedureComparisonHtml(e))}_getStatusIcon(e){switch(e){case"added":return"\u{1F7E2}";case"removed":return"\u{1F534}";case"modified":return"\u{1F7E1}";case"unchanged":return"\u26AA"}}_getStatusClass(e){return`status-${e}`}_getTableComparisonHtml(e){let n=`${e.source.database}.${e.source.schema}.${e.source.name}`,r=`${e.target.database}.${e.target.schema}.${e.target.name}`,i=e.columnDiffs.map(l=>{let c=l.sourceColumn,u=l.targetColumn,d=l.changes?.join("<br>")||"";return`
                <tr class="${this._getStatusClass(l.status)}">
                    <td>${this._getStatusIcon(l.status)}</td>
                    <td><strong>${l.name}</strong></td>
                    <td>${c?.fullTypeName||"-"}</td>
                    <td>${u?.fullTypeName||"-"}</td>
                    <td class="changes">${d}</td>
                </tr>
            `}).join(""),s=e.keyDiffs.map(l=>{let c=l.sourceKey,u=l.targetKey,d=l.changes?.join("<br>")||"";return`
                <tr class="${this._getStatusClass(l.status)}">
                    <td>${this._getStatusIcon(l.status)}</td>
                    <td><strong>${l.name}</strong></td>
                    <td>${c?.type||"-"} (${c?.columns.join(", ")||"-"})</td>
                    <td>${u?.type||"-"} (${u?.columns.join(", ")||"-"})</td>
                    <td class="changes">${d}</td>
                </tr>
            `}).join(""),o=e.distributionMatch?"\u2705 Match":"\u274C Different",a=e.organizationMatch?"\u2705 Match":"\u274C Different";return`
            <!DOCTYPE html>
            <html lang="en">
            <head>
                <meta charset="UTF-8">
                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                <title>Schema Comparison</title>
                <style>
                    ${this._getStyles()}
                </style>
            </head>
            <body>
                <div class="container">
                    <h1>Table Structure Comparison</h1>
                    
                    <div class="header-info">
                        <div class="source-header">
                            <span class="label">Source:</span>
                            <span class="value">${n}</span>
                        </div>
                        <div class="arrow">\u2194</div>
                        <div class="target-header">
                            <span class="label">Target:</span>
                            <span class="value">${r}</span>
                        </div>
                    </div>

                    <div class="summary">
                        <h2>Summary</h2>
                        <div class="summary-grid">
                            <div class="summary-item added">\u{1F7E2} Added: ${e.summary.columnsAdded} columns, ${e.summary.keysAdded} keys</div>
                            <div class="summary-item removed">\u{1F534} Removed: ${e.summary.columnsRemoved} columns, ${e.summary.keysRemoved} keys</div>
                            <div class="summary-item modified">\u{1F7E1} Modified: ${e.summary.columnsModified} columns, ${e.summary.keysModified} keys</div>
                            <div class="summary-item unchanged">\u26AA Unchanged: ${e.summary.columnsUnchanged} columns</div>
                        </div>
                    </div>

                    <div class="section">
                        <h2>Columns</h2>
                        <table>
                            <thead>
                                <tr>
                                    <th width="40">Status</th>
                                    <th>Column Name</th>
                                    <th>Source Type</th>
                                    <th>Target Type</th>
                                    <th>Changes</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${i}
                            </tbody>
                        </table>
                    </div>

                    ${e.keyDiffs.length>0?`
                    <div class="section">
                        <h2>Keys & Constraints</h2>
                        <table>
                            <thead>
                                <tr>
                                    <th width="40">Status</th>
                                    <th>Key Name</th>
                                    <th>Source</th>
                                    <th>Target</th>
                                    <th>Changes</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${s}
                            </tbody>
                        </table>
                    </div>
                    `:""}

                    <div class="section">
                        <h2>Distribution & Organization</h2>
                        <table>
                            <thead>
                                <tr>
                                    <th>Property</th>
                                    <th>Source</th>
                                    <th>Target</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>DISTRIBUTE ON</strong></td>
                                    <td>${e.sourceDistribution.length>0?e.sourceDistribution.join(", "):"RANDOM"}</td>
                                    <td>${e.targetDistribution.length>0?e.targetDistribution.join(", "):"RANDOM"}</td>
                                    <td>${o}</td>
                                </tr>
                                <tr>
                                    <td><strong>ORGANIZE ON</strong></td>
                                    <td>${e.sourceOrganization.length>0?e.sourceOrganization.join(", "):"(none)"}</td>
                                    <td>${e.targetOrganization.length>0?e.targetOrganization.join(", "):"(none)"}</td>
                                    <td>${a}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </body>
            </html>
        `}_getProcedureComparisonHtml(e){let n=`${e.source.database}.${e.source.schema}.${e.source.name}`,r=`${e.target.database}.${e.target.schema}.${e.target.name}`,i=e.sourceDiff.map(s=>{let o="";return s.startsWith("+")?o="diff-added":s.startsWith("-")?o="diff-removed":o="diff-unchanged",`<div class="${o}">${this._escapeHtml(s)}</div>`}).join("");return`
            <!DOCTYPE html>
            <html lang="en">
            <head>
                <meta charset="UTF-8">
                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                <title>Procedure Comparison</title>
                <style>
                    ${this._getStyles()}
                </style>
            </head>
            <body>
                <div class="container">
                    <h1>Procedure Comparison</h1>
                    
                    <div class="header-info">
                        <div class="source-header">
                            <span class="label">Source:</span>
                            <span class="value">${n}</span>
                        </div>
                        <div class="arrow">\u2194</div>
                        <div class="target-header">
                            <span class="label">Target:</span>
                            <span class="value">${r}</span>
                        </div>
                    </div>

                    <div class="section">
                        <h2>Signature Comparison</h2>
                        <table>
                            <thead>
                                <tr>
                                    <th>Property</th>
                                    <th>Source</th>
                                    <th>Target</th>
                                    <th>Match</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="${e.argumentsMatch?"":"status-modified"}">
                                    <td><strong>Arguments</strong></td>
                                    <td><code>${e.sourceArguments||"(none)"}</code></td>
                                    <td><code>${e.targetArguments||"(none)"}</code></td>
                                    <td>${e.argumentsMatch?"\u2705":"\u274C"}</td>
                                </tr>
                                <tr class="${e.returnsMatch?"":"status-modified"}">
                                    <td><strong>Returns</strong></td>
                                    <td><code>${e.sourceReturns}</code></td>
                                    <td><code>${e.targetReturns}</code></td>
                                    <td>${e.returnsMatch?"\u2705":"\u274C"}</td>
                                </tr>
                                <tr class="${e.executeAsOwnerMatch?"":"status-modified"}">
                                    <td><strong>Execute As</strong></td>
                                    <td>${e.sourceExecuteAsOwner?"OWNER":"CALLER"}</td>
                                    <td>${e.targetExecuteAsOwner?"OWNER":"CALLER"}</td>
                                    <td>${e.executeAsOwnerMatch?"\u2705":"\u274C"}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="section">
                        <h2>Source Code ${e.sourceMatch?"\u2705 Identical":"\u274C Different"}</h2>
                        ${e.sourceMatch?`
                            <div class="code-block">
                                <pre>${this._escapeHtml(e.sourceCode)}</pre>
                            </div>
                        `:`
                            <div class="code-diff">
                                <pre>${i}</pre>
                            </div>
                        `}
                    </div>
                </div>
            </body>
            </html>
        `}_escapeHtml(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}_getStyles(){return`
            :root {
                --bg-color: var(--vscode-editor-background);
                --fg-color: var(--vscode-editor-foreground);
                --border-color: var(--vscode-widget-border);
                --header-bg: var(--vscode-sideBarSectionHeader-background);
                --added-bg: rgba(40, 167, 69, 0.2);
                --removed-bg: rgba(220, 53, 69, 0.2);
                --modified-bg: rgba(255, 193, 7, 0.2);
            }

            body {
                font-family: var(--vscode-font-family);
                font-size: var(--vscode-font-size);
                color: var(--fg-color);
                background-color: var(--bg-color);
                margin: 0;
                padding: 20px;
            }

            .container {
                max-width: 1400px;
                margin: 0 auto;
            }

            h1 {
                border-bottom: 1px solid var(--border-color);
                padding-bottom: 10px;
                margin-bottom: 20px;
            }

            h2 {
                font-size: 1.1em;
                margin-top: 25px;
                margin-bottom: 10px;
                color: var(--vscode-textLink-foreground);
            }

            .header-info {
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 20px;
                padding: 15px;
                background-color: var(--header-bg);
                border-radius: 6px;
                margin-bottom: 20px;
            }

            .header-info .label {
                font-weight: bold;
                margin-right: 8px;
            }

            .header-info .value {
                font-family: monospace;
                background-color: var(--vscode-textCodeBlock-background);
                padding: 4px 8px;
                border-radius: 4px;
            }

            .arrow {
                font-size: 1.5em;
                color: var(--vscode-charts-blue);
            }

            .summary {
                background-color: var(--header-bg);
                padding: 15px;
                border-radius: 6px;
                margin-bottom: 20px;
            }

            .summary h2 {
                margin-top: 0;
            }

            .summary-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 10px;
            }

            .summary-item {
                padding: 8px;
                border-radius: 4px;
            }

            .summary-item.added { background-color: var(--added-bg); }
            .summary-item.removed { background-color: var(--removed-bg); }
            .summary-item.modified { background-color: var(--modified-bg); }

            table {
                width: 100%;
                border-collapse: collapse;
                margin-bottom: 20px;
            }

            th, td {
                padding: 10px;
                text-align: left;
                border: 1px solid var(--border-color);
            }

            th {
                background-color: var(--header-bg);
                font-weight: 600;
            }

            tr.status-added {
                background-color: var(--added-bg);
            }

            tr.status-removed {
                background-color: var(--removed-bg);
            }

            tr.status-modified {
                background-color: var(--modified-bg);
            }

            .changes {
                font-size: 0.9em;
                color: var(--vscode-descriptionForeground);
            }

            .code-block, .code-diff {
                background-color: var(--vscode-textCodeBlock-background);
                border: 1px solid var(--border-color);
                border-radius: 6px;
                padding: 15px;
                overflow-x: auto;
            }

            .code-block pre, .code-diff pre {
                margin: 0;
                font-family: var(--vscode-editor-font-family);
                font-size: var(--vscode-editor-font-size);
                white-space: pre;
            }

            .diff-added {
                background-color: var(--added-bg);
                color: #28a745;
            }

            .diff-removed {
                background-color: var(--removed-bg);
                color: #dc3545;
            }

            .diff-unchanged {
                color: var(--fg-color);
            }

            code {
                font-family: var(--vscode-editor-font-family);
                background-color: var(--vscode-textCodeBlock-background);
                padding: 2px 6px;
                border-radius: 3px;
            }
        `}}});var B3={};Pt(B3,{buildERDData:()=>uLe,getForeignKeysForSchema:()=>M3,getTablesInSchema:()=>U3});async function M3(t,e,n,r,i){let s=Qe.getForeignKeyRelationships(r,i),o=new Map;try{let a=await Ee(t,s,!0,e,n);if(!a||!a.data)return[];let l=ge(a);for(let c of l){let u=c.CONSTRAINTNAME,d=`${c.SCHEMA}.${c.FROM_TABLE}`,E=`${c.PKSCHEMA}.${c.TO_TABLE}`;o.has(u)||o.set(u,{constraintName:u,fromTable:d,toTable:E,fromColumns:[],toColumns:[],onDelete:c.DEL_TYPE||"NO ACTION",onUpdate:c.UPDT_TYPE||"NO ACTION"});let f=o.get(u);f.fromColumns.push(c.FROM_COLUMN),f.toColumns.push(c.TO_COLUMN)}}catch(a){console.warn("Cannot retrieve FK relationships:",a)}return Array.from(o.values())}async function U3(t,e,n,r,i,s){s?.report({message:"Fetching tables list..."});let o=`
        SELECT 
            T.TABLENAME,
            T.OWNER
        FROM 
            ${r.toUpperCase()}.._V_TABLE T
        WHERE 
            T.SCHEMA = '${i.toUpperCase()}'
        ORDER BY T.TABLENAME
    `,a=`
        SELECT 
            A.NAME AS TABLENAME,
            A.ATTNAME,
            A.FORMAT_TYPE
        FROM 
            ${r.toUpperCase()}.._V_RELATION_COLUMN A
        WHERE 
            A.SCHEMA = '${i.toUpperCase()}'
            AND A.TYPE = 'TABLE'
        ORDER BY A.NAME, A.ATTNUM
    `,l=`
        SELECT 
            X.RELATION,
            X.ATTNAME
        FROM 
            ${r.toUpperCase()}.._V_RELATION_KEYDATA X
        WHERE 
            X.CONTYPE = 'p'
            AND X.SCHEMA = '${i.toUpperCase()}'
        ORDER BY X.RELATION, X.CONSEQ
    `,c=new Map;try{let u=await Ee(t,o,!0,e,n);if(u&&u.data){let f=ge(u);for(let p of f){let h=p.TABLENAME;c.set(h,{database:r,schema:i,tableName:h,fullName:`${i}.${h}`,columns:[],primaryKeyColumns:[]})}}s?.report({message:"Fetching columns..."});let d=await Ee(t,a,!0,e,n);if(d&&d.data){let f=ge(d);for(let p of f){let h=c.get(p.TABLENAME);h&&h.columns.push({name:p.ATTNAME,dataType:p.FORMAT_TYPE,isPrimaryKey:!1,isForeignKey:!1})}}s?.report({message:"Fetching primary keys..."});let E=await Ee(t,l,!0,e,n);if(E&&E.data){let f=ge(E);for(let p of f){let h=c.get(p.RELATION);if(h){h.primaryKeyColumns.push(p.ATTNAME);let T=h.columns.find(S=>S.name===p.ATTNAME);T&&(T.isPrimaryKey=!0)}}}}catch(u){console.warn("Cannot retrieve table information:",u)}return Array.from(c.values())}async function uLe(t,e,n,r,i,s){let[o,a]=await Promise.all([U3(t,e,n,r,i,s),M3(t,e,n,r,i)]);for(let u of a){let d=u.fromTable.split(".")[1],E=o.find(f=>f.tableName===d);if(E)for(let f of u.fromColumns){let p=E.columns.find(h=>h.name===f);p&&(p.isForeignKey=!0)}}let l=new Set;for(let u of a)l.add(u.fromTable.split(".")[1]),l.add(u.toTable.split(".")[1]);let c=o.filter(u=>l.has(u.tableName)||o.length<=20);return{database:r,schema:i,tables:c,relationships:a}}var F3=G(()=>{"use strict";bn();Mo()});var H3={};Pt(H3,{ERDView:()=>Aw});var No,Aw,G3=G(()=>{"use strict";No=j(require("vscode")),Aw=class t{constructor(e,n,r){this._disposables=[];this._panel=e,this._update(r),this._panel.onDidDispose(()=>this.dispose(),null,this._disposables)}static{this.viewType="netezza.erdView"}static createOrShow(e,n){let r=No.window.activeTextEditor?No.window.activeTextEditor.viewColumn:void 0;if(t.currentPanel){t.currentPanel._panel.reveal(r),t.currentPanel._update(n);return}let i=No.window.createWebviewPanel(t.viewType,`ERD: ${n.database}.${n.schema}`,r||No.ViewColumn.One,{enableScripts:!0,localResourceRoots:[No.Uri.joinPath(e,"media")]});t.currentPanel=new t(i,e,n)}dispose(){for(t.currentPanel=void 0,this._panel.dispose();this._disposables.length;){let e=this._disposables.pop();e&&e.dispose()}}_update(e){this._panel.title=`ERD: ${e.database}.${e.schema}`,this._panel.webview.html=this._getHtml(e)}_getHtml(e){let n=this._generateTableBoxes(e.tables,e.relationships),r=e.relationships.length,i=e.tables.length;return`
            <!DOCTYPE html>
            <html lang="en">
            <head>
                <meta charset="UTF-8">
                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                <title>Entity Relationship Diagram</title>
                <style>
                    ${this._getStyles()}
                </style>
            </head>
            <body>
                <div class="header">
                    <h1>Entity Relationship Diagram</h1>
                    <div class="header-info">
                        <span class="badge">${e.database}.${e.schema}</span>
                        <span class="stat">${i} tables</span>
                        <span class="stat">${r} relationships</span>
                    </div>
                </div>

                <div class="legend">
                    <span class="legend-item"><span class="pk-indicator">\u{1F511}</span> Primary Key</span>
                    <span class="legend-item"><span class="fk-indicator">\u{1F517}</span> Foreign Key</span>
                </div>

                ${r===0?`
                    <div class="no-relationships">
                        <p>\u26A0\uFE0F No foreign key relationships found in this schema.</p>
                        <p>Tables are displayed but no relationship lines can be drawn.</p>
                    </div>
                `:""}

                <div class="erd-container" id="erdContainer">
                    <div class="erd-canvas" id="erdCanvas">
                        ${n}
                        <svg class="relationships-svg" id="relationshipsSvg"></svg>
                    </div>
                </div>

                <div class="relationships-table">
                    <h2>Foreign Key Relationships</h2>
                    ${r>0?`
                        <table>
                            <thead>
                                <tr>
                                    <th>Constraint Name</th>
                                    <th>From Table</th>
                                    <th>Column(s)</th>
                                    <th>\u2192</th>
                                    <th>To Table</th>
                                    <th>Column(s)</th>
                                    <th>On Delete</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${e.relationships.map(s=>`
                                    <tr>
                                        <td><code>${s.constraintName}</code></td>
                                        <td><strong>${s.fromTable}</strong></td>
                                        <td>${s.fromColumns.join(", ")}</td>
                                        <td>\u2192</td>
                                        <td><strong>${s.toTable}</strong></td>
                                        <td>${s.toColumns.join(", ")}</td>
                                        <td>${s.onDelete}</td>
                                    </tr>
                                `).join("")}
                            </tbody>
                        </table>
                    `:"<p>No foreign key relationships defined.</p>"}
                </div>

                <script>
                    ${this._getScript(e)}
                </script>
            </body>
            </html>
        `}_generateTableBoxes(e,n){let r=new Map,i=new Map,s=new Map;e.forEach(U=>{let H=U.tableName;r.set(H,new Set),i.set(H,0),s.set(H,0)}),n.forEach(U=>{let H=U.fromTable.includes(".")?U.fromTable.split(".").pop():U.fromTable,X=U.toTable.includes(".")?U.toTable.split(".").pop():U.toTable;r.has(H)&&(r.get(H).add(X),i.set(H,(i.get(H)||0)+1)),r.has(X)&&(r.get(X).add(H),s.set(X,(s.get(X)||0)+1))});let o=[],a=[],l=[];e.forEach(U=>{let H=i.get(U.tableName)||0;(r.get(U.tableName)?.size||0)===0?l.push(U):H>0?o.push(U):a.push(U)}),o.sort((U,H)=>{let X=i.get(U.tableName)||0;return(i.get(H.tableName)||0)-X});let c=new Map,u=new Set,d=260,E=240,f=50,p=40,h=d+f,T=E+p,S=(U,H)=>`${U},${H}`,A=(U,H)=>u.add(S(U,H)),R=(U,H)=>u.has(S(U,H)),m=(U,H=0)=>{let X=H;for(;R(U,X);)X++;return X},N=0,L=1,I=2,D=U=>20+U*h,g=U=>20+U*T;o.forEach(U=>{let H=m(L);A(L,H),c.set(U.tableName,{x:D(L),y:g(H)})});let w=new Map,x=[];return a.forEach(U=>{let H=r.get(U.tableName)||new Set,X=null;for(let Q of H)if(o.some(K=>K.tableName===Q)){X=Q;break}X?(w.has(X)||w.set(X,[]),w.get(X).push(U)):x.push(U)}),w.forEach((U,H)=>{let X=c.get(H);if(!X)return;let Q=Math.round((X.y-20)/T);U.forEach((K,Z)=>{let Oe=Z%2===0?N:I,ae=Q+Math.floor(Z/2);for(;R(Oe,ae);)ae++;A(Oe,ae),c.set(K.tableName,{x:D(Oe),y:g(ae)})})}),x.forEach(U=>{let H=!1;for(let X of[N,I]){let Q=m(X);H||(A(X,Q),c.set(U.tableName,{x:D(X),y:g(Q)}),H=!0)}}),l.length>0&&l.forEach((H,X)=>{let Q=X;c.set(H.tableName,{x:D(3),y:g(Q)})}),e.map(U=>{let H=c.get(U.tableName)||{x:20,y:20},X=U.columns.slice(0,10).map(K=>{let Z=[];K.isPrimaryKey&&Z.push("\u{1F511}"),K.isForeignKey&&Z.push("\u{1F517}");let Oe=Z.length>0?`<span class="col-icons">${Z.join("")}</span>`:"";return`
                    <div class="table-column ${K.isPrimaryKey?"pk":""} ${K.isForeignKey?"fk":""}" data-col="${K.name}">
                        ${Oe}
                        <span class="col-name">${K.name}</span>
                        <span class="col-type">${K.dataType}</span>
                    </div>
                `}).join(""),Q=U.columns.length>10?`<div class="more-columns">... and ${U.columns.length-10} more</div>`:"";return`
                <div class="table-box" id="table-${U.tableName}" 
                     data-table="${U.fullName}"
                     style="left: ${H.x}px; top: ${H.y}px;">
                    <div class="table-header">${U.tableName}</div>
                    <div class="table-columns">
                        ${X}
                        ${Q}
                    </div>
                </div>
            `}).join("")}_getScript(e){return`
            (function() {
                const relationships = ${JSON.stringify(e.relationships)};
                const canvas = document.getElementById('erdCanvas');
                const svg = document.getElementById('relationshipsSvg');
                
                function getTableBox(el) {
                    const left = parseInt(el.style.left) || 0;
                    const top = parseInt(el.style.top) || 0;
                    const width = el.offsetWidth;
                    const height = el.offsetHeight;
                    return {
                        left: left,
                        top: top,
                        right: left + width,
                        bottom: top + height,
                        centerX: left + width / 2,
                        centerY: top + height / 2
                    };
                }

                function getColumnPosition(tableEl, columnName) {
                    // Try to find exact column
                    let colEl = tableEl.querySelector('.table-column[data-col="' + columnName + '"]');
                    
                    // If not found (hidden by "more columns"), try to estimate or return center
                    if (!colEl) return null;

                    // Calculate position relative to the table box
                    const tableRect = tableEl.getBoundingClientRect();
                    const colRect = colEl.getBoundingClientRect();
                    const canvasRect = canvas.getBoundingClientRect();

                    // Relative Y from canvas top
                    // We can't just subtract rects if the canvas is scrolled, but here we want SVG coords (absolute in canvas)
                    // The table.style.top is relative to canvas.
                    // The column offset within table is colRect.top - tableRect.top
                    // So Y = table.style.top + (colRect.top - tableRect.top) + colHeight/2
                    
                    const relativeTop = colRect.top - tableRect.top;
                    const centerY = relativeTop + colRect.height / 2;
                    
                    // We need to account for table scroll position if any?
                    // getBoundingClientRect takes visual position, so it accounts for scroll.
                    
                    const tableStyleTop = parseInt(tableEl.style.top) || 0;
                    
                    return tableStyleTop + centerY;
                }
                
                function drawRelationships() {
                    svg.innerHTML = '';
                    
                    // Update SVG size
                    let maxX = 1200, maxY = 600;
                    document.querySelectorAll('.table-box').forEach(el => {
                        const box = getTableBox(el);
                        maxX = Math.max(maxX, box.right + 50);
                        maxY = Math.max(maxY, box.bottom + 50);
                    });
                    
                    svg.setAttribute('width', maxX);
                    svg.setAttribute('height', maxY);
                    svg.style.width = maxX + 'px';
                    svg.style.height = maxY + 'px';
                    
                    // Defs
                    const defs = document.createElementNS('http://www.w3.org/2000/svg', 'defs');
                    const marker = document.createElementNS('http://www.w3.org/2000/svg', 'marker');
                    marker.setAttribute('id', 'arrowhead');
                    marker.setAttribute('markerWidth', '10');
                    marker.setAttribute('markerHeight', '7');
                    marker.setAttribute('refX', '10');
                    marker.setAttribute('refY', '3.5');
                    marker.setAttribute('orient', 'auto');
                    const polygon = document.createElementNS('http://www.w3.org/2000/svg', 'polygon');
                    polygon.setAttribute('points', '0 0, 10 3.5, 0 7');
                    polygon.setAttribute('fill', '#3794ff');
                    marker.appendChild(polygon);
                    defs.appendChild(marker);
                    svg.appendChild(defs);
                    
                    relationships.forEach((rel, index) => {
                        const childTableName = rel.fromTable.split('.')[1];
                        const parentTableName = rel.toTable.split('.')[1];
                        
                        const childEl = document.getElementById('table-' + childTableName);
                        const parentEl = document.getElementById('table-' + parentTableName);
                        
                        if (!childEl || !parentEl) return;
                        
                        const childBox = getTableBox(childEl);
                        const parentBox = getTableBox(parentEl);
                        
                        // Determine L/R relationship
                        // If Parent is to the right of Child: Child Right -> Parent Left
                        const parentIsRight = parentBox.centerX > childBox.centerX;
                        
                        let fromX, fromY, toX, toY;
                        let fromControlX, toControlX;
                        
                        // Default Y to center if col not found
                        fromY = childBox.centerY;
                        toY = parentBox.centerY;
                        
                        // Try get specific column Y
                        const colY1 = getColumnPosition(childEl, rel.fromColumns[0]);
                        const colY2 = getColumnPosition(parentEl, rel.toColumns[0]);
                        
                        if (colY1 !== null) fromY = colY1;
                        if (colY2 !== null) toY = colY2;
                        
                        if (parentIsRight) {
                            fromX = childBox.right;
                            toX = parentBox.left;
                            fromControlX = fromX + 50;
                            toControlX = toX - 50;
                        } else {
                            fromX = childBox.left;
                            toX = parentBox.right;
                            fromControlX = fromX - 50;
                            toControlX = toX + 50;
                        }
                        
                        // Calculate Bezier curve
                        // M start C c1 c2 end
                        const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                        
                        // Adjust constraints for multiple lines?
                        // Simple cubic bezier is best for side-to-side
                        const d = \`M \${fromX} \${fromY} C \${fromControlX} \${fromY}, \${toControlX} \${toY}, \${toX} \${toY}\`;
                        
                        path.setAttribute('d', d);
                        path.setAttribute('stroke', '#3794ff');
                        path.setAttribute('stroke-width', '2');
                        path.setAttribute('fill', 'none');
                        path.setAttribute('marker-end', 'url(#arrowhead)');
                        path.setAttribute('class', 'relationship-line');
                        
                        const title = document.createElementNS('http://www.w3.org/2000/svg', 'title');
                        title.textContent = rel.constraintName + ': ' + 
                            childTableName + '.' + rel.fromColumns.join(',') + ' -> ' + 
                            parentTableName + '.' + rel.toColumns.join(',');
                        path.appendChild(title);
                        
                        svg.appendChild(path);
                    });
                }
                
                // Dragging Logic
                let dragging = null;
                let dragStartX = 0, dragStartY = 0;
                let elemStartLeft = 0, elemStartTop = 0;
                
                document.querySelectorAll('.table-box').forEach(table => {
                    const header = table.querySelector('.table-header');
                    if (header) {
                        header.addEventListener('mousedown', function(e) {
                            e.preventDefault();
                            dragging = table;
                            dragStartX = e.pageX;
                            dragStartY = e.pageY;
                            elemStartLeft = parseInt(table.style.left) || 0;
                            elemStartTop = parseInt(table.style.top) || 0;
                            table.style.zIndex = '1000';
                            document.body.style.cursor = 'grabbing';
                        });
                    }
                });
                
                document.addEventListener('mousemove', function(e) {
                    if (!dragging) return;
                    const dx = e.pageX - dragStartX;
                    const dy = e.pageY - dragStartY;
                    dragging.style.left = Math.max(0, elemStartLeft + dx) + 'px';
                    dragging.style.top = Math.max(0, elemStartTop + dy) + 'px';
                    drawRelationships();
                });
                
                document.addEventListener('mouseup', function() {
                    if (dragging) {
                        dragging.style.zIndex = '';
                        document.body.style.cursor = '';
                        dragging = null;
                    }
                });
                
                requestAnimationFrame(() => setTimeout(drawRelationships, 50));
                window.addEventListener('resize', drawRelationships);
            })();
        `}_getStyles(){return`
            :root {
                --bg-color: var(--vscode-editor-background);
                --fg-color: var(--vscode-editor-foreground);
                --border-color: var(--vscode-widget-border);
                --header-bg: var(--vscode-sideBarSectionHeader-background);
                --table-bg: var(--vscode-editorWidget-background);
                --pk-color: #f1c40f;
                --fk-color: #3498db;
            }

            body {
                font-family: var(--vscode-font-family);
                font-size: var(--vscode-font-size);
                color: var(--fg-color);
                background-color: var(--bg-color);
                margin: 0;
                padding: 20px;
            }

            .header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 15px;
                padding-bottom: 10px;
                border-bottom: 1px solid var(--border-color);
            }

            .header h1 {
                margin: 0;
                font-size: 1.4em;
            }

            .header-info {
                display: flex;
                gap: 15px;
                align-items: center;
            }

            .badge {
                background-color: var(--vscode-badge-background);
                color: var(--vscode-badge-foreground);
                padding: 4px 10px;
                border-radius: 12px;
                font-size: 0.9em;
            }

            .stat {
                color: var(--vscode-descriptionForeground);
                font-size: 0.9em;
            }

            .legend {
                display: flex;
                gap: 20px;
                margin-bottom: 15px;
                font-size: 0.9em;
            }

            .legend-item {
                display: flex;
                align-items: center;
                gap: 5px;
            }

            .no-relationships {
                background-color: rgba(255, 193, 7, 0.2);
                padding: 15px;
                border-radius: 6px;
                margin-bottom: 15px;
            }

            .no-relationships p {
                margin: 5px 0;
            }

            .erd-container {
                background-color: var(--header-bg);
                border: 1px solid var(--border-color);
                border-radius: 6px;
                overflow: auto;
                margin-bottom: 20px;
                min-height: 400px;
            }

            .erd-canvas {
                position: relative;
                min-width: 1200px;
                min-height: 600px;
            }

            .relationships-svg {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                pointer-events: none;
            }

            .relationship-line {
                pointer-events: stroke;
            }

            .relationship-line:hover {
                stroke-width: 3;
            }

            .table-box {
                position: absolute;
                width: 250px;
                background-color: var(--table-bg);
                border: 2px solid var(--border-color);
                border-radius: 6px;
                overflow: hidden;
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
            }

            .table-header {
                background-color: var(--vscode-textLink-foreground);
                color: white;
                padding: 8px 12px;
                font-weight: bold;
                cursor: move;
                font-size: 0.95em;
            }

            .table-columns {
                max-height: 200px;
                overflow-y: auto;
            }

            .table-column {
                display: flex;
                align-items: center;
                padding: 4px 10px;
                border-bottom: 1px solid var(--border-color);
                font-size: 0.85em;
                gap: 6px;
            }

            .table-column:last-child {
                border-bottom: none;
            }

            .table-column.pk {
                background-color: rgba(241, 196, 15, 0.1);
            }

            .table-column.fk {
                background-color: rgba(52, 152, 219, 0.1);
            }

            .col-icons {
                font-size: 0.8em;
            }

            .col-name {
                flex: 1;
                font-weight: 500;
            }

            .col-type {
                color: var(--vscode-descriptionForeground);
                font-size: 0.85em;
            }

            .more-columns {
                padding: 6px 10px;
                color: var(--vscode-descriptionForeground);
                font-style: italic;
                font-size: 0.85em;
            }

            .relationships-table {
                margin-top: 20px;
            }

            .relationships-table h2 {
                font-size: 1.1em;
                margin-bottom: 10px;
            }

            table {
                width: 100%;
                border-collapse: collapse;
            }

            th, td {
                padding: 10px;
                text-align: left;
                border: 1px solid var(--border-color);
            }

            th {
                background-color: var(--header-bg);
                font-weight: 600;
            }

            code {
                font-family: var(--vscode-editor-font-family);
                background-color: var(--vscode-textCodeBlock-background);
                padding: 2px 6px;
                border-radius: 3px;
            }
        `}}});var $3={};Pt($3,{SessionMonitorView:()=>mw});function dLe(){let t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let n=0;n<32;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}var gr,mw,k3=G(()=>{"use strict";gr=j(require("vscode"));bn();mw=class t{constructor(e,n,r,i){this._disposables=[];this._panel=e,this._extensionUri=n,this._context=r,this._connectionManager=i,this._update(),this._panel.onDidDispose(()=>this.dispose(),null,this._disposables),this._panel.webview.onDidReceiveMessage(async s=>{switch(s.command){case"refresh":await this._fetchAndSendData();return;case"killSession":await this._killSession(s.sessionId);return;case"toggleAutoRefresh":this._toggleAutoRefresh(s.enabled);return}},null,this._disposables),this._fetchAndSendData()}static{this.viewType="netezza.sessionMonitor"}static createOrShow(e,n,r){let i=gr.window.activeTextEditor?gr.ViewColumn.Beside:void 0;if(t.currentPanel){t.currentPanel._panel.reveal(i),t.currentPanel._fetchAndSendData();return}let s=gr.window.createWebviewPanel(t.viewType,"Session Monitor",i||gr.ViewColumn.One,{enableScripts:!0,localResourceRoots:[gr.Uri.joinPath(e,"media")],retainContextWhenHidden:!0});t.currentPanel=new t(s,e,n,r)}dispose(){for(t.currentPanel=void 0,this._refreshInterval&&clearInterval(this._refreshInterval),this._panel.dispose();this._disposables.length;){let e=this._disposables.pop();e&&e.dispose()}}_toggleAutoRefresh(e){e?this._refreshInterval=setInterval(()=>{this._fetchAndSendData()},12e4):this._refreshInterval&&(clearInterval(this._refreshInterval),this._refreshInterval=void 0)}async _killSession(e){try{if(await gr.window.showWarningMessage(`Are you sure you want to terminate session ${e}?`,{modal:!0},"Yes, Kill Session")!=="Yes, Kill Session")return;let r=`DROP SESSION ${e}`;await Ee(this._context,r,!0,this._connectionManager,void 0),gr.window.showInformationMessage(`Session ${e} terminated successfully.`),await this._fetchAndSendData()}catch(n){gr.window.showErrorMessage(`Failed to kill session: ${n instanceof Error?n.message:String(n)}`)}}async _fetchAndSendData(){this._panel.webview.postMessage({command:"setLoading",loading:!0});try{let[e,n,r,i]=await Promise.all([this._fetchSessions(),this._fetchQueries(),this._fetchStorage(),this._fetchResources()]);this._panel.webview.postMessage({command:"updateData",data:{sessions:e,queries:n,storage:r,resources:i}})}catch(e){this._panel.webview.postMessage({command:"error",text:`Failed to fetch data: ${e instanceof Error?e.message:String(e)}`})}finally{this._panel.webview.postMessage({command:"setLoading",loading:!1})}}async _fetchSessions(){let e=`
            SELECT ID, PID, USERNAME, DBNAME, TYPE, CONNTIME, STATUS, 
                   SUBSTR(COMMAND, 1, 200) AS COMMAND, PRIORITY, CID, IPADDR, CLIENT_OS_USERNAME
            FROM _V_SESSION
            ORDER BY CONNTIME DESC
        `;try{let n=await Ee(this._context,e,!0,this._connectionManager,void 0);return!n||!n.data?[]:ge(n)}catch(n){return console.error("Error fetching sessions:",n),[]}}async _fetchQueries(){let e=`
            SELECT Q.QS_SESSIONID, Q.QS_PLANID, Q.QS_CLIENTID, Q.QS_CLIIPADDR,
                   SUBSTR(Q.QS_SQL, 1, 300) AS QS_SQL, 
                   Q.QS_STATE, Q.QS_TSUBMIT, Q.QS_TSTART, 
                   Q.QS_PRIORITY, Q.QS_PRITXT, Q.QS_ESTCOST, 
                   Q.QS_ESTDISK, Q.QS_ESTMEM, Q.QS_SNIPPETS, Q.QS_CURSNIPT,
                   Q.QS_RESROWS, Q.QS_RESBYTES,
                   S.USERNAME
            FROM _V_QRYSTAT Q
            LEFT JOIN _V_SESSION S ON Q.QS_SESSIONID = S.ID
            ORDER BY Q.QS_TSTART DESC
            LIMIT 1000
        `;try{let n=await Ee(this._context,e,!0,this._connectionManager,void 0);return!n||!n.data?[]:ge(n)}catch(n){return console.error("Error fetching queries:",n),[]}}async _fetchStorage(){let e=`
            SELECT O.DBNAME AS DATABASE, TS.SCHEMA, 
                   ROUND(SUM(TS.ALLOCATED_BYTES) / 1024.0 / 1024.0, 2) AS ALLOC_MB,
                   ROUND(SUM(TS.USED_BYTES) / 1024.0 / 1024.0, 2) AS USED_MB,
                   ROUND(SUM(TS.SKEW * TS.USED_BYTES) / NULLIF(SUM(TS.USED_BYTES), 0), 2) AS AVG_SKEW,
                   COUNT(*) AS TABLE_COUNT
            FROM _V_TABLE_STORAGE_STAT TS
            JOIN _V_OBJECT_DATA O ON TS.OBJID = O.OBJID
            GROUP BY O.DBNAME, TS.SCHEMA
            ORDER BY USED_MB DESC
        `;try{let n=await Ee(this._context,e,!0,this._connectionManager,void 0);return!n||!n.data?[]:ge(n)}catch(n){return console.error("Error fetching storage:",n),[]}}async _fetchResources(){let e=[],n=[],r=null;try{let i=await Ee(this._context,"SELECT * FROM _V_SCHED_GRA_EXT LIMIT 50",!0,this._connectionManager,void 0);i&&i.data&&(e=ge(i))}catch(i){console.warn("_V_SCHED_GRA_EXT not available:",i)}try{let i=await Ee(this._context,"SELECT * FROM _V_SYSTEM_UTIL ORDER BY 1 DESC LIMIT 50",!0,this._connectionManager,void 0);i&&i.data&&(n=ge(i))}catch(i){console.warn("_V_SYSTEM_UTIL not available:",i)}try{let i=await Ee(this._context,`SELECT 
                    ROUND(AVG(HOST_CPU) * 100, 1) AS AVG_HOST_CPU_PCT,
                    ROUND(AVG(SPU_CPU) * 100, 1) AS AVG_SPU_CPU_PCT,
                    ROUND(AVG(HOST_DISK) * 100, 1) AS AVG_DISK_PCT,
                    ROUND(AVG(HOST_MEMORY) * 100, 1) AS AVG_MEMORY_PCT,
                    ROUND(AVG(HOST_FABRIC) * 100, 1) AS AVG_FABRIC_PCT,
                    COUNT(*) AS SAMPLE_COUNT
                FROM _V_SYSTEM_UTIL`,!0,this._connectionManager,void 0);if(i&&i.data){let s=ge(i);r=s.length>0?s[0]:null}}catch(i){console.warn("_V_SYSTEM_UTIL summary not available:",i)}return{gra:e,systemUtil:n,sysUtilSummary:r}}_update(){let e=this._panel.webview;this._panel.title="Session Monitor",this._panel.webview.html=this._getHtmlForWebview(e)}_getHtmlForWebview(e){let n=e.asWebviewUri(gr.Uri.joinPath(this._extensionUri,"media","sessionMonitor.js")),r=e.asWebviewUri(gr.Uri.joinPath(this._extensionUri,"media","sessionMonitor.css")),i=dLe();return`<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Security-Policy" content="default-src 'none'; style-src ${e.cspSource} 'unsafe-inline'; script-src 'nonce-${i}';">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="${r}" rel="stylesheet">
    <title>Session Monitor</title>
</head>
<body>
    <div class="container">
        <div class="header">
            <h2>\u{1F5A5}\uFE0F Session Monitor Dashboard</h2>
            <div class="header-actions">
                <label class="auto-refresh">
                    <input type="checkbox" id="autoRefresh"> Auto-refresh (2 min)
                </label>
                <button id="refreshBtn" class="btn btn-primary">\u{1F504} Refresh</button>
            </div>
        </div>

        <div class="loading-overlay" id="loadingOverlay">
            <div class="spinner"></div>
            <span>Loading data...</span>
        </div>

        <div class="tabs">
            <button class="tab-btn active" data-tab="sessions">\u{1F4CB} Sessions</button>
            <button class="tab-btn" data-tab="queries">\u23F1\uFE0F Running Queries</button>
            <button class="tab-btn" data-tab="storage">\u{1F4BE} Storage</button>
            <button class="tab-btn" data-tab="resources">\u{1F4CA} Resources</button>
        </div>

        <div class="tab-content" id="sessions">
            <div class="section-header">
                <h3>Active Sessions</h3>
                <div class="filter-controls">
                    <input type="text" id="sessionUserFilter" placeholder="Filter by User..." class="filter-input">
                </div>
                <span class="count" id="sessionCount">0 sessions</span>
            </div>
            <div class="table-container">
                <table id="sessionsTable">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>PID</th>
                            <th>User</th>
                            <th>Database</th>
                            <th>Type</th>
                            <th>Connected</th>
                            <th>Status</th>
                            <th>IP</th>
                            <th>Command</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>

        <div class="tab-content hidden" id="queries">
            <div class="section-header">
                <h3>Running Queries</h3>
                <div class="filter-controls">
                    <input type="text" id="queryUserFilter" placeholder="Filter by User..." class="filter-input">
                </div>
                <span class="count" id="queryCount">0 queries</span>
            </div>
            <div class="table-container">
                <table id="queriesTable">
                    <thead>
                        <tr>
                            <th>Session</th>
                            <th>User</th>
                            <th>Plan ID</th>
                            <th>State</th>
                            <th>Priority</th>
                            <th>Submitted</th>
                            <th>Started</th>
                            <th>Est. Cost</th>
                            <th>Rows</th>
                            <th>SQL</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>

        <div class="tab-content hidden" id="storage">
            <div class="section-header">
                <h3>Storage by Schema</h3>
                <span class="count" id="storageCount">0 schemas</span>
            </div>
            <div class="table-container">
                <table id="storageTable">
                    <thead>
                        <tr>
                            <th>Database</th>
                            <th>Schema</th>
                            <th>Allocated (MB)</th>
                            <th>Used (MB)</th>
                            <th>Usage %</th>
                            <th>Avg Skew</th>
                            <th>Tables</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>

        <div class="tab-content hidden" id="resources">
            <div class="section-header">
                <h3>Resource Utilization</h3>
            </div>
            <div class="resources-grid">
                <div class="resource-section">
                    <h4>GRA Scheduler</h4>
                    <div id="graTable" class="table-container small"></div>
                </div>
                <div class="resource-section">
                    <h4>System Utilization</h4>
                    <div id="sysUtilSummary"></div>
                    <div id="sysUtilTable" class="table-container small"></div>
                </div>
            </div>
        </div>
    </div>

    <script nonce="${i}" src="${n}"></script>
</body>
</html>`}}});var z3={};Pt(z3,{XlsxWriter:()=>lA,default:()=>ELe});var q3,X3,gw,V3,fLe,lA,ELe,j3=G(()=>{"use strict";q3=j(require("fs")),X3=j(Py()),gw=require("stream");xy();V3=(()=>{let t=[];for(let n=65;n<91;n++)t.push(String.fromCharCode(n));let e=[];for(let n of t)for(let r=65;r<91;r++)e.push(n+String.fromCharCode(r));return t.push(...e),t})(),fLe=/[\\/*?[\]:]/g,lA=class{constructor(e){this.sheetCount=0;this.sheetList=[];this.sstArray=[];this.sstMap=new Map;this.sstCntAll=0;this.colWidths=[];this._autofilterIsOn=!1;this.filePath=e,this.output=q3.createWriteStream(e),this.archive=(0,X3.default)("zip"),this.archive.pipe(this.output),this._oaEpoch=Date.UTC(1899,11,30)}_getColumnLetter(e){return e<V3.length?V3[e]:"A"}_sanitizeSheetName(e){if(!e||typeof e!="string")return`Sheet${this.sheetCount+1}`;let n=e.replace(fLe,"_");return n.length>31&&(n=n.substring(0,31)),n.trim().length===0&&(n=`Sheet${this.sheetCount+1}`),n}_escapeSheetNameForXml(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}_formatSheetNameForFormula(e){return/[\s\-+=()!@#$%^&]/.test(e)||/^[0-9]/.test(e)?`'${e.replace(/'/g,"''")}'`:e}addSheet(e,n=!1){let r=this._sanitizeSheetName(e);this.sheetCount++;let i=`rId${this.sheetCount}`,s=`sheet${this.sheetCount}.xml`;this.sheetList.push({name:r,pathInArchive:`xl/worksheets/${s}`,hidden:n,nameInArchive:s,sheetId:this.sheetCount,rId:i,filterHeaderRange:null})}_needsEscape(e){for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r===38||r===60||r===62||r===34||r===39||r>=0&&r<=8||r===11||r===12||r>=14&&r<=31)return!0}return!1}_escape(e){return typeof e!="string"||!this._needsEscape(e)?e:e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/[\x00-\x08\x0b\x0c\x0e-\x1f]/g,"")}writeSheet(e,n=null,r=!0){let i=new bs,s=0;e.length>0?s=e[0].length:n&&(s=n.length),this.colWidths=new Array(s).fill(-1);let o=new Array(s);for(let u=0;u<s;u++)o[u]=this._getColumnLetter(u);if(n)for(let u=0;u<s;u++){let E=1.25*(n[u]?n[u].length:0)+2;E>80&&(E=80),this.colWidths[u]<E&&(this.colWidths[u]=E)}for(let u=0;u<Math.min(e.length,100);u++){let d=e[u];for(let E=0;E<d.length;E++){let f=d[E];if(f==null)continue;let h=1.25*(f instanceof Date?10:f.toString().length)+2;h>80&&(h=80),this.colWidths[E]<h&&(this.colWidths[E]=h)}}i.writeString('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>'),i.writeString('<worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships">');let a=e.length+(n?1:0);a>0&&s>0?i.writeString(`<dimension ref="A1:${o[s-1]}${a}"/>`):i.writeString('<dimension ref="A1"/>');let l=this.sheetCount===1;r&&n?l?i.writeString('<sheetViews><sheetView tabSelected="1" workbookViewId="0"><pane ySplit="1" topLeftCell="A2" activePane="bottomLeft" state="frozen" /><selection pane="bottomLeft" /></sheetView></sheetViews><sheetFormatPr defaultRowHeight="15"/>'):i.writeString('<sheetViews><sheetView workbookViewId="0"><pane ySplit="1" topLeftCell="A2" activePane="bottomLeft" state="frozen" /><selection pane="bottomLeft" /></sheetView></sheetViews><sheetFormatPr defaultRowHeight="15"/>'):l?i.writeString('<sheetViews><sheetView tabSelected="1" workbookViewId="0"/></sheetViews><sheetFormatPr defaultRowHeight="15"/>'):i.writeString('<sheetViews><sheetView workbookViewId="0"/></sheetViews><sheetFormatPr defaultRowHeight="15"/>'),i.writeString("<cols>");for(let u=0;u<s;u++){let d=this.colWidths[u]>0?this.colWidths[u]:10;i.writeString(`<col min="${u+1}" max="${u+1}" width="${d}" bestFit="1" customWidth="1" />`)}i.writeString("</cols><sheetData>");let c=0;if(n){c++,i.writeString(`<row r="${c}">`);for(let u=0;u<n.length;u++)this._writeStringCell(i,n[u],o[u],c);i.writeString("</row>")}for(let u=0;u<e.length;u++){c++,i.writeString(`<row r="${c}">`);let d=e[u];for(let E=0;E<d.length;E++){let f=d[E];if(f==null)continue;let p=o[E];if(typeof f=="number")Number.isFinite(f)?i.writeString(`<c r="${p}${c}"><v>${f}</v></c>`):this._writeStringCell(i,f.toString(),p,c);else if(typeof f=="bigint")this._writeStringCell(i,f.toString(),p,c);else if(typeof f=="boolean")i.writeString(`<c r="${p}${c}" t="b"><v>${f?1:0}</v></c>`);else if(f instanceof Date){let h=this._toOADate(f);Number.isFinite(h)?i.writeString(`<c r="${p}${c}" s="1"><v>${h}</v></c>`):this._writeStringCell(i,f.toString(),p,c)}else this._writeStringCell(i,f.toString(),p,c)}i.writeString("</row>")}if(i.writeString("</sheetData>"),r&&n&&s>0){this._autofilterIsOn=!0;let u=`A1:${o[s-1]}${a}`;i.writeString(`<autoFilter ref="${u}"/>`);let d=this.sheetList[this.sheetCount-1],E=this._formatSheetNameForFormula(d.name);d.filterHeaderRange=`${E}!$A$1:$${o[s-1]}$${a}`}i.writeString("</worksheet>"),this.archive.append(gw.Readable.from(i.getChunks()),{name:this.sheetList[this.sheetCount-1].pathInArchive})}_writeStringCell(e,n,r,i){let s=this.sstMap.get(n);s===void 0&&(s=this.sstArray.length,this.sstArray.push(n),this.sstMap.set(n,s)),this.sstCntAll++,e.writeString(`<c r="${r}${i}" t="s"><v>${s}</v></c>`)}_toOADate(e){let n=e.getTimezoneOffset()*6e4;return(e.getTime()-n-this._oaEpoch)/864e5}finalize(){return new Promise((e,n)=>{try{this._writeSharedStrings(),this._writeStyles(),this._writeWorkbook(),this._writeContentTypes(),this._writeRels(),this.output.on("close",()=>{e()}),this.archive.on("error",r=>{n(r)}),this.archive.finalize()}catch(r){n(r)}})}_writeSharedStrings(){let e=new bs;e.writeString('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>'),e.writeString(`<sst xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" count="${this.sstCntAll}" uniqueCount="${this.sstArray.length}">`);for(let n=0;n<this.sstArray.length;n++){let r=this.sstArray[n],i=this._escape(r);i.length>0&&(i[0]===" "||i[i.length-1]===" "||/[\t\n\r]/.test(i))?e.writeString(`<si><t xml:space="preserve">${i}</t></si>`):e.writeString(`<si><t>${i}</t></si>`)}e.writeString("</sst>"),this.archive.append(gw.Readable.from(e.getChunks()),{name:"xl/sharedStrings.xml"})}_writeStyles(){this.archive.append(`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main">
<numFmts count="1">
    <numFmt numFmtId="164" formatCode="yyyy\\-mm\\-dd\\ hh:mm:ss"/>
</numFmts>
<fonts count="1">
<font><sz val="11"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font>
</fonts>
<fills count="2">
<fill><patternFill patternType="none"/></fill>
<fill><patternFill patternType="gray125"/></fill>
</fills>
<borders count="1">
<border><left/><right/><top/><bottom/><diagonal/></border>
</borders>
<cellStyleXfs count="1">
<xf numFmtId="0" fontId="0" fillId="0" borderId="0"/>
</cellStyleXfs>
<cellXfs count="3">
<xf numFmtId="0" fontId="0" fillId="0" borderId="0" xfId="0"/>
<xf numFmtId="14" fontId="0" fillId="0" borderId="0" xfId="0" applyNumberFormat="1"/>
<xf numFmtId="164" fontId="0" fillId="0" borderId="0" xfId="0" applyNumberFormat="1"/>
</cellXfs>
<cellStyles count="1">
<cellStyle name="Normal" xfId="0" builtinId="0"/>
</cellStyles>
<dxfs count="0"/>
<tableStyles count="0" defaultTableStyle="TableStyleMedium2" defaultPivotStyle="PivotStyleLight16"/>
</styleSheet>`,{name:"xl/styles.xml"})}_writeWorkbook(){let e=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<workbook xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships">
<sheets>`;for(let n of this.sheetList){let r=n.hidden?' state="hidden"':"",i=this._escapeSheetNameForXml(n.name);e+=`<sheet name="${i}" sheetId="${n.sheetId}"${r} r:id="${n.rId}"/>`}if(e+="</sheets>",this._autofilterIsOn){e+="<definedNames>";for(let n of this.sheetList)if(n.filterHeaderRange){let r=n.sheetId-1,i=this._escape(n.filterHeaderRange);e+=`<definedName name="_xlnm._FilterDatabase" localSheetId="${r}" hidden="1">${i}</definedName>`}e+="</definedNames>"}e+="</workbook>",this.archive.append(e,{name:"xl/workbook.xml"})}_writeContentTypes(){let e=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types">
<Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml"/>
<Default Extension="xml" ContentType="application/xml"/>
<Override PartName="/xl/workbook.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"/>
<Override PartName="/xl/styles.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"/>
<Override PartName="/xl/sharedStrings.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml"/>`;for(let n of this.sheetList)e+=`<Override PartName="/${n.pathInArchive}" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"/>`;e+="</Types>",this.archive.append(e,{name:"[Content_Types].xml"})}_writeRels(){this.archive.append(`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">
<Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.xml"/>
</Relationships>`,{name:"_rels/.rels"});let n=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">`;for(let i of this.sheetList)n+=`<Relationship Id="${i.rId}" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="worksheets/${i.nameInArchive}"/>`;let r=this.sheetList.length+1;n+=`<Relationship Id="rId${r++}" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Target="styles.xml"/>`,n+=`<Relationship Id="rId${r++}" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings" Target="sharedStrings.xml"/>`,n+="</Relationships>",this.archive.append(n,{name:"xl/_rels/workbook.xml.rels"})}},ELe=lA});var Nw={};Pt(Nw,{copyFileToClipboard:()=>_w,exportCsvToXlsx:()=>SLe,exportStructuredToXlsx:()=>RLe,getTempFilePath:()=>ALe});function pLe(t){return t?hLe.has(t.toUpperCase()):!1}function Q3(t){if(typeof t=="string"&&t.length>0){if(t.length>15||/^-?0\d+/.test(t))return t;if(/^-?\d+(\.\d+)?$/.test(t)){let e=parseFloat(t);if(Number.isFinite(e))return e}}return t}function TLe(t){return t.map(Q3)}async function SLe(t,e,n=!1,r={source:"Unknown"},i){try{i&&i("Initializing XLSX writer...");let s=new J3(e),o=0,a=0,l=[],c=(f,p)=>{let h=f.split(/\r?\n/),T=m=>{let N=[],L=0,I=!1;for(let g=0;g<m.length;g++)if(m[g]==='"')I=!I;else if(m[g]===","&&!I){let w=m.substring(L,g);w.startsWith('"')&&w.endsWith('"')&&(w=w.substring(1,w.length-1).replace(/""/g,'"')),N.push(w),L=g+1}let D=m.substring(L);return D.startsWith('"')&&D.endsWith('"')&&(D=D.substring(1,D.length-1).replace(/""/g,'"')),N.push(D),N},S=0;for(;S<h.length&&!h[S].trim();)S++;if(S>=h.length)return;let A=T(h[S]);if(A.length===0)return;a=Math.max(a,A.length);let R=[];for(let m=S+1;m<h.length;m++){let N=h[m];if(!N.trim())continue;let L=T(N);R.push(TLe(L))}s.addSheet(p),s.writeSheet(R,A,!0),o+=R.length};if(Array.isArray(t)?(i&&i(`Processing ${t.length} result sets...`),t.forEach((f,p)=>{let h=f.name||`Result ${p+1}`;i&&i(`Processing sheet "${h}"...`),c(f.csv,h),f.sql&&l.push({name:h,sql:f.sql})})):(i&&i("Reading CSV content..."),c(t,"Query Results"),r.sql&&l.push({name:"Query Results",sql:r.sql})),l.length>0){s.addSheet("SQL Code");let f=[];l.forEach(p=>{f.push([`--- SQL for ${p.name} ---`]),p.sql.split(`
`).forEach(h=>{f.push([h])}),f.push([""])}),s.writeSheet(f,null,!1)}i&&i("Finalizing XLSX file..."),await s.finalize();let d=Iw.statSync(e).size/(1024*1024);i&&(i("XLSX file created successfully"),i(`  - Rows: ${o.toLocaleString()}`),i(`  - File size: ${d.toFixed(1)} MB`));let E={success:!0,message:`Successfully exported ${o} rows to ${e}`,details:{rows_exported:o,columns:a,file_size_mb:parseFloat(d.toFixed(1)),file_path:e}};if(n){i&&i("Copying file to clipboard...");let f=await _w(e);E.details&&(E.details.clipboard_success=f)}return E}catch(s){return{success:!1,message:`Export failed: ${s instanceof Error?s.message:String(s)}`}}}async function RLe(t,e,n=!1,r){try{r&&r("Initializing XLSX writer...");let i=new J3(e),s=0,o=0,a=[];for(let d of t){let E=d.name||"Sheet";r&&r(`Processing sheet "${E}"...`);let f=d.columns.map(T=>T.name),p=d.columns.map(T=>pLe(T.type));o=Math.max(o,f.length);let h=d.rows.map(T=>T.map((S,A)=>p[A]?Q3(S):S));i.addSheet(E),i.writeSheet(h,f,!0),s+=h.length,d.sql&&a.push({name:E,sql:d.sql})}if(a.length>0){i.addSheet("SQL Code");let d=[];a.forEach(E=>{d.push([`--- SQL for ${E.name} ---`]),E.sql.split(`
`).forEach(f=>{d.push([f])}),d.push([""])}),i.writeSheet(d,null,!1)}r&&r("Finalizing XLSX file..."),await i.finalize();let c=Iw.statSync(e).size/(1024*1024);r&&(r("XLSX file created successfully"),r(`  - Rows: ${s.toLocaleString()}`),r(`  - File size: ${c.toFixed(1)} MB`));let u={success:!0,message:`Successfully exported ${s} rows to ${e}`,details:{rows_exported:s,columns:o,file_size_mb:parseFloat(c.toFixed(1)),file_path:e}};if(n){r&&r("Copying file to clipboard...");let d=await _w(e);u.details&&(u.details.clipboard_success=d)}return u}catch(i){return{success:!1,message:`Export failed: ${i instanceof Error?i.message:String(i)}`}}}async function _w(t){return cA.platform()!=="win32"?(console.error("Clipboard file copy is only supported on Windows"),!1):new Promise(e=>{try{let n=Kc.normalize(Kc.resolve(t)),r=`Set-Clipboard -Path "${n.replace(/"/g,'`"')}"`,i=(0,K3.spawn)("powershell.exe",["-NoProfile","-NonInteractive","-Command",r]),s="";i.stderr.on("data",o=>{s+=o.toString()}),i.on("close",o=>{o!==0?(console.error(`PowerShell clipboard copy failed: ${s}`),e(!1)):(console.log(`File copied to clipboard: ${n}`),e(!0))}),i.on("error",o=>{console.error(`Error spawning PowerShell: ${o.message}`),e(!1)})}catch(n){let r=n instanceof Error?n.message:String(n);console.error(`Error copying file to clipboard: ${r}`),e(!1)}})}function ALe(){let t=cA.tmpdir(),n=`netezza_export_${Date.now()}.xlsx`;return Kc.join(t,n)}var Iw,Kc,cA,K3,J3,hLe,Ow=G(()=>{"use strict";Iw=j(require("fs")),Kc=j(require("path")),cA=j(require("os")),K3=require("child_process"),J3=(j3(),Lo(z3)).default,hLe=new Set(["INT8","INT2","INT4","NUMERIC","FLOAT4","FLOAT8","INTEGER","BIGINT","SMALLINT","DECIMAL","REAL","DOUBLE PRECISION"])});var iK={};Pt(iK,{ClipboardDataProcessor:()=>uA,importClipboardDataToNetezza:()=>_Le});function mLe(t){let e=String(t).trim();return e=e.replace(/[^0-9a-zA-Z]+/g,"_").toUpperCase(),(!e||/^\d/.test(e)||e.startsWith("_"))&&(e="COL"+(e.startsWith("_")?"":"_")+e),e}function gLe(t,e,n){let r=String(t).trim();for(let i of n)r=r.split(i).join(`${e}${i}`);return r}function ILe(t,e,n,r,i){let s=gLe(t,r,i);return e<n.length&&n[e].currentType.dbType==="DATETIME"&&(s=s.replace("T"," ")),s}async function _Le(t,e,n,r,i){let s=Date.now(),o=null,a=null;try{if(!t)return{success:!1,message:"Target table name is required"};if(!e||!e.host)return{success:!1,message:"Connection details are required"};i?.("Starting clipboard import process..."),i?.(`  Target table: ${t}`),i?.(`  Format preference: ${n||"auto-detect"}`);let l=new uA,[c,u]=await l.processClipboardData(n,i);if(!c||!c.length)return{success:!1,message:"No data found in clipboard"};if(c.length<2)return{success:!1,message:"Clipboard data must contain at least headers and one data row"};i?.(`  Detected format: ${u}`),i?.(`  Rows: ${c.length}`),i?.(`  Columns: ${c[0].length}`);let d=c[0].map(Z=>mLe(Z)),E=c.slice(1);i?.("Detecting decimal separator...");let f=".",p=0,h=0,T=E.slice(0,100);for(let Z of T)for(let Oe of Z){if(!Oe||!Oe.trim())continue;let ae=Oe.trim();/^\d+\.\d+$/.test(ae)&&p++,/^\d+,\d+$/.test(ae)&&h++}h>p&&h>0&&(f=","),i?.(`Detected decimal separator: '${f}'`),i?.("Analyzing clipboard data types...");let S=d.map(()=>new zc(f));for(let Z=0;Z<E.length;Z++){let Oe=E[Z];for(let ae=0;ae<Oe.length;ae++)ae<S.length&&Oe[ae]&&Oe[ae].trim()&&S[ae].refreshCurrentType(Oe[ae].trim());(Z+1)%1e3===0&&(i?.(`Analyzed ${(Z+1).toLocaleString()} rows...`,void 0,!1),await rK())}i?.(`Analysis complete: ${E.length.toLocaleString()} data rows`);let A=eK.join(require("os").tmpdir(),"netezza_clipboard_logs");dA.existsSync(A)||dA.mkdirSync(A,{recursive:!0});let R="	",m="\\t",N=`
`,L="\\n",I="\\",D=[I,N,"\r",R];i?.("Preparing in-memory data stream...");let g=new bw(E,S,R,N,I,D,f,i);o=`virtual_clipboard_import_${Date.now()}_${Math.floor(Math.random()*1e3)}.txt`,i?.(`Registered virtual stream: ${o}`);let w=Qn();w&&w.registerImportStream?w.registerImportStream(o,g):i?.("Warning: NzConnection driver does not support stream registry. Import might fail.");let x=[];for(let Z=0;Z<d.length;Z++)x.push(`        ${d[Z]} ${S[Z].currentType.toString()}`);let U=A.replace(/\\/g,"/"),H=`CREATE TABLE ${t} AS 
(
    SELECT * FROM EXTERNAL '${o}'
    (
${x.join(`,
`)}
    )
    USING
    (
        REMOTESOURCE 'jdbc'
        DELIMITER '${m}'
        RecordDelim '${L}'
        ESCAPECHAR '${I}'
        NULLVALUE ''
        ENCODING 'utf-8'
        TIMESTYLE '24HOUR'
        SKIPROWS 0
        MAXERRORS 10
        LOGDIR '${U}'
    )
) DISTRIBUTE ON RANDOM;`;i?.("Generated SQL:"),i?.(H),i?.("Connecting to Netezza...");let X={host:e.host,port:e.port||5480,database:e.database,user:e.user,password:e.password},Q=Qn();a=new Q(X),await a.connect();try{i?.("Executing CREATE TABLE with EXTERNAL clipboard data...");let Z=a.createCommand(H);Z.commandTimeout=3600,await Z.execute(),i?.("Clipboard import completed successfully")}finally{await a.close()}let K=(Date.now()-s)/1e3;return{success:!0,message:"Clipboard import completed successfully",details:{targetTable:t,format:u,rowsProcessed:E.length,rowsInserted:E.length,processingTime:`${K.toFixed(1)}s`,columns:d.length,detectedDelimiter:R}}}catch(l){let c=(Date.now()-s)/1e3;return{success:!1,message:`Clipboard import failed: ${l instanceof Error?l.message:String(l)}`,details:{processingTime:`${c.toFixed(1)}s`}}}finally{if(a&&a._connected)try{await a.close()}catch{}if(o){let l=Qn();l&&l.unregisterImportStream&&l.unregisterImportStream(o)}}}var dA,eK,tK,nK,rK,uA,bw,sK=G(()=>{"use strict";dA=j(require("fs")),eK=j(require("path")),tK=j(require("vscode")),nK=require("stream");LR();rK=()=>new Promise(t=>setTimeout(t,0)),uA=class{async processXmlSpreadsheet(e,n){n?.("Processing XML Spreadsheet data...");let r=[],i=0,s=[],o=0,a=e.match(/ExpandedColumnCount="(\d+)"/);a&&(i=parseInt(a[1]),n?.(`Table has ${i} columns`));let l=e.match(/ExpandedRowCount="(\d+)"/);l&&n?.(`Table has ${l[1]} rows`);let c=/<Row[^>]*>([\s\S]*?)<\/Row>/gi,u;for(;(u=c.exec(e))!==null;){let d=u[1];s=new Array(i).fill("");let E,f=0,p=/<Cell(?:[^>]*ss:Index="(\d+)")?[^>]*>(?:[\s\S]*?<Data[^>]*(?:\s+ss:Type="([^"]*)")?[^>]*>([^<]*)<\/Data>)?[\s\S]*?<\/Cell>/gi;for(;(E=p.exec(d))!==null;){E[1]&&(f=parseInt(E[1])-1);let h=E[2]||"",T=E[3]||"";h==="Boolean"&&(T=T==="0"?"False":"True"),f<i&&(s[f]=T),f++}s.some(h=>h.trim())&&r.push([...s]),o++,o%1e4===0&&(n?.(`Analyzed ${o.toLocaleString()} rows...`,void 0,!1),await rK())}return n?.(`XML processing complete: ${r.length} rows, ${i} columns`),r}async processTextData(e,n){if(n?.("Processing text data..."),!e.trim())return[];let r=e.split(`
`);for(;r.length&&!r[r.length-1].trim();)r.pop();if(!r.length)return[];let i=["	",",",";","|"],s={};for(let c of i){let u=[];for(let d of r.slice(0,Math.min(5,r.length)))if(d.trim()){let E=d.split(c);u.push(E.length)}if(u.length){let d=u.reduce((f,p)=>f+p,0)/u.length,E=u.reduce((f,p)=>f+Math.pow(p-d,2),0)/u.length;s[c]=[d,-E]}}let o="	";Object.keys(s).length&&(o=Object.keys(s).reduce((c,u)=>{let[d,E]=s[c]||[0,0],[f,p]=s[u];return f>d||f===d&&p>E?u:c},"	")),n?.(`Auto-detected delimiter: '${o==="	"?"\\t":o}'`);let a=[],l=0;for(let c of r)if(c.trim()){let u=c.split(o).map(d=>d.trim());a.push(u),l=Math.max(l,u.length)}for(let c of a)for(;c.length<l;)c.push("");return n?.(`Text processing complete: ${a.length} rows, ${l} columns`),a}async getClipboardText(){return await tK.env.clipboard.readText()}async processClipboardData(e,n){n?.("Getting clipboard data...");let r=await this.getClipboardText();if(!r)throw new Error("No data found in clipboard");n?.(`Data size: ${r.length} characters`);let i="TEXT";e==="XML Spreadsheet"||!e&&r.includes("<Workbook")&&r.includes("<Worksheet")?i="XML Spreadsheet":e==="TEXT"&&(i="TEXT"),n?.(`Detected format: ${i}`);let s;return i==="XML Spreadsheet"?s=await this.processXmlSpreadsheet(r,n):s=await this.processTextData(r,n),n?.(`Processed ${s.length} rows`),s.length&&n?.(`Columns per row: ${s[0].length}`),[s,i]}};bw=class extends nK.Readable{constructor(n,r,i,s,o,a,l,c){super();this.currentIndex=0;this.byteLength=0;this.lastReportedIndex=-1;this.lastReportTime=0;this.lastReportedMessage="";this.rows=n,this.dataTypes=r,this.delimiter=i,this.recordDelim=s,this.escapechar=o,this.valuesToEscape=a,this.decimalDelimiter=l,this.progressCallback=c,this.currentIndex=0,this.lastReportedIndex=-1,this.lastReportTime=0,this.lastReportedMessage="";try{this.byteLength=n.reduce((u,d)=>{let E=d.reduce((f,p)=>f+(p?p.length:0),0);return u+E+d.length},0)}catch{this.byteLength=1024*1024}}_read(n){try{let r=!0;for(;r&&this.currentIndex<this.rows.length;){let a=this.rows[this.currentIndex].map((l,c)=>{let u=ILe(l,c,this.dataTypes,this.escapechar,this.valuesToEscape);if(this.dataTypes[c].currentType.dbType==="NUMERIC"&&this.decimalDelimiter===","&&(u=u.replace(",",".")),this.dataTypes[c].currentType.dbType==="DATETIME"){let d=u.match(/^(\d{1,2})\.(\d{1,2})\.(\d{4})(?:\s+(\d{1,2}):(\d{1,2})(?::(\d{1,2}))?)?$/);if(d){let E=d[1],f=d[2],p=d[3],h=d[4]||"00",T=d[5]||"00",S=d[6]||"00";u=`${p}-${f}-${E} ${h}:${T}:${S}`}}return u}).join(this.delimiter)+this.recordDelim;r=this.push(Buffer.from(a,"utf8")),this.currentIndex++}let i=this.rows.length;if(this.currentIndex>this.lastReportedIndex){let s=Date.now();if(this.currentIndex>=i||s-this.lastReportTime>=1e3){let c=`Streaming data: ${Math.floor(this.currentIndex/i*100)}% (${this.currentIndex.toLocaleString()}/${i.toLocaleString()})`,d=(this.currentIndex-(this.lastReportedIndex<0?0:this.lastReportedIndex))/i*100;c!==this.lastReportedMessage&&(this.progressCallback?.(c,d,!1),this.lastReportedIndex=this.currentIndex,this.lastReportTime=s,this.lastReportedMessage=c)}}this.currentIndex>=this.rows.length&&this.push(null)}catch(r){this.emit("error",r)}}}});var v,NLe,OLe,CLe,ww,bLe,yLe,wLe,LLe,fA,DLe,qt=G(()=>{v=t=>t.flatMap(NLe),NLe=t=>fA(CLe(t)).map(OLe),OLe=t=>t.replace(/ +/g," ").trim(),CLe=t=>({type:"mandatory_block",items:ww(t,0)[0]}),ww=(t,e,n)=>{let r=[];for(;t[e];){let[i,s]=bLe(t,e);if(r.push(i),e=s,t[e]==="|")e++;else if(t[e]==="}"||t[e]==="]"){if(n!==t[e])throw new Error(`Unbalanced parenthesis in: ${t}`);return e++,[r,e]}else if(e===t.length){if(n)throw new Error(`Unbalanced parenthesis in: ${t}`);return[r,e]}else throw new Error(`Unexpected "${t[e]}"`)}return[r,e]},bLe=(t,e)=>{let n=[];for(;;){let[r,i]=yLe(t,e);if(r)n.push(r),e=i;else break}return n.length===1?[n[0],e]:[{type:"concatenation",items:n},e]},yLe=(t,e)=>{if(t[e]==="{")return wLe(t,e+1);if(t[e]==="[")return LLe(t,e+1);{let n="";for(;t[e]&&/[A-Za-z0-9_ ]/.test(t[e]);)n+=t[e],e++;return[n,e]}},wLe=(t,e)=>{let[n,r]=ww(t,e,"}");return[{type:"mandatory_block",items:n},r]},LLe=(t,e)=>{let[n,r]=ww(t,e,"]");return[{type:"optional_block",items:n},r]},fA=t=>{if(typeof t=="string")return[t];if(t.type==="concatenation")return t.items.map(fA).reduce(DLe,[""]);if(t.type==="mandatory_block")return t.items.flatMap(fA);if(t.type==="optional_block")return["",...t.items.flatMap(fA)];throw new Error(`Unknown node type: ${t}`)},DLe=(t,e)=>{let n=[];for(let r of t)for(let i of e)n.push(r+i);return n}});var Y,Lw,zi,Jc,ui,EA,uK,Yr=G(()=>{(function(t){t.QUOTED_IDENTIFIER="QUOTED_IDENTIFIER",t.IDENTIFIER="IDENTIFIER",t.STRING="STRING",t.VARIABLE="VARIABLE",t.RESERVED_DATA_TYPE="RESERVED_DATA_TYPE",t.RESERVED_PARAMETERIZED_DATA_TYPE="RESERVED_PARAMETERIZED_DATA_TYPE",t.RESERVED_KEYWORD="RESERVED_KEYWORD",t.RESERVED_FUNCTION_NAME="RESERVED_FUNCTION_NAME",t.RESERVED_KEYWORD_PHRASE="RESERVED_KEYWORD_PHRASE",t.RESERVED_DATA_TYPE_PHRASE="RESERVED_DATA_TYPE_PHRASE",t.RESERVED_SET_OPERATION="RESERVED_SET_OPERATION",t.RESERVED_CLAUSE="RESERVED_CLAUSE",t.RESERVED_SELECT="RESERVED_SELECT",t.RESERVED_JOIN="RESERVED_JOIN",t.ARRAY_IDENTIFIER="ARRAY_IDENTIFIER",t.ARRAY_KEYWORD="ARRAY_KEYWORD",t.CASE="CASE",t.END="END",t.WHEN="WHEN",t.ELSE="ELSE",t.THEN="THEN",t.LIMIT="LIMIT",t.BETWEEN="BETWEEN",t.AND="AND",t.OR="OR",t.XOR="XOR",t.OPERATOR="OPERATOR",t.COMMA="COMMA",t.ASTERISK="ASTERISK",t.PROPERTY_ACCESS_OPERATOR="PROPERTY_ACCESS_OPERATOR",t.OPEN_PAREN="OPEN_PAREN",t.CLOSE_PAREN="CLOSE_PAREN",t.LINE_COMMENT="LINE_COMMENT",t.BLOCK_COMMENT="BLOCK_COMMENT",t.DISABLE_COMMENT="DISABLE_COMMENT",t.NUMBER="NUMBER",t.NAMED_PARAMETER="NAMED_PARAMETER",t.QUOTED_PARAMETER="QUOTED_PARAMETER",t.NUMBERED_PARAMETER="NUMBERED_PARAMETER",t.POSITIONAL_PARAMETER="POSITIONAL_PARAMETER",t.CUSTOM_PARAMETER="CUSTOM_PARAMETER",t.DELIMITER="DELIMITER",t.EOF="EOF"})(Y=Y||(Y={}));Lw=t=>({type:Y.EOF,raw:"\xABEOF\xBB",text:"\xABEOF\xBB",start:t}),zi=Lw(1/0),Jc=t=>e=>e.type===t.type&&e.text===t.text,ui={ARRAY:Jc({text:"ARRAY",type:Y.RESERVED_DATA_TYPE}),BY:Jc({text:"BY",type:Y.RESERVED_KEYWORD}),SET:Jc({text:"SET",type:Y.RESERVED_CLAUSE}),STRUCT:Jc({text:"STRUCT",type:Y.RESERVED_DATA_TYPE}),WINDOW:Jc({text:"WINDOW",type:Y.RESERVED_CLAUSE}),VALUES:Jc({text:"VALUES",type:Y.RESERVED_CLAUSE})},EA=t=>t===Y.RESERVED_DATA_TYPE||t===Y.RESERVED_KEYWORD||t===Y.RESERVED_FUNCTION_NAME||t===Y.RESERVED_KEYWORD_PHRASE||t===Y.RESERVED_DATA_TYPE_PHRASE||t===Y.RESERVED_CLAUSE||t===Y.RESERVED_SELECT||t===Y.RESERVED_SET_OPERATION||t===Y.RESERVED_JOIN||t===Y.ARRAY_KEYWORD||t===Y.CASE||t===Y.END||t===Y.WHEN||t===Y.ELSE||t===Y.THEN||t===Y.LIMIT||t===Y.BETWEEN||t===Y.AND||t===Y.OR||t===Y.XOR,uK=t=>t===Y.AND||t===Y.OR||t===Y.XOR});var dK,fK=G(()=>{dK=["KEYS.NEW_KEYSET","KEYS.ADD_KEY_FROM_RAW_BYTES","AEAD.DECRYPT_BYTES","AEAD.DECRYPT_STRING","AEAD.ENCRYPT","KEYS.KEYSET_CHAIN","KEYS.KEYSET_FROM_JSON","KEYS.KEYSET_TO_JSON","KEYS.ROTATE_KEYSET","KEYS.KEYSET_LENGTH","ANY_VALUE","ARRAY_AGG","AVG","CORR","COUNT","COUNTIF","COVAR_POP","COVAR_SAMP","MAX","MIN","ST_CLUSTERDBSCAN","STDDEV_POP","STDDEV_SAMP","STRING_AGG","SUM","VAR_POP","VAR_SAMP","ANY_VALUE","ARRAY_AGG","ARRAY_CONCAT_AGG","AVG","BIT_AND","BIT_OR","BIT_XOR","COUNT","COUNTIF","LOGICAL_AND","LOGICAL_OR","MAX","MIN","STRING_AGG","SUM","APPROX_COUNT_DISTINCT","APPROX_QUANTILES","APPROX_TOP_COUNT","APPROX_TOP_SUM","ARRAY_CONCAT","ARRAY_LENGTH","ARRAY_TO_STRING","GENERATE_ARRAY","GENERATE_DATE_ARRAY","GENERATE_TIMESTAMP_ARRAY","ARRAY_REVERSE","OFFSET","SAFE_OFFSET","ORDINAL","SAFE_ORDINAL","BIT_COUNT","PARSE_BIGNUMERIC","PARSE_NUMERIC","SAFE_CAST","CURRENT_DATE","EXTRACT","DATE","DATE_ADD","DATE_SUB","DATE_DIFF","DATE_TRUNC","DATE_FROM_UNIX_DATE","FORMAT_DATE","LAST_DAY","PARSE_DATE","UNIX_DATE","CURRENT_DATETIME","DATETIME","EXTRACT","DATETIME_ADD","DATETIME_SUB","DATETIME_DIFF","DATETIME_TRUNC","FORMAT_DATETIME","LAST_DAY","PARSE_DATETIME","ERROR","EXTERNAL_QUERY","S2_CELLIDFROMPOINT","S2_COVERINGCELLIDS","ST_ANGLE","ST_AREA","ST_ASBINARY","ST_ASGEOJSON","ST_ASTEXT","ST_AZIMUTH","ST_BOUNDARY","ST_BOUNDINGBOX","ST_BUFFER","ST_BUFFERWITHTOLERANCE","ST_CENTROID","ST_CENTROID_AGG","ST_CLOSESTPOINT","ST_CLUSTERDBSCAN","ST_CONTAINS","ST_CONVEXHULL","ST_COVEREDBY","ST_COVERS","ST_DIFFERENCE","ST_DIMENSION","ST_DISJOINT","ST_DISTANCE","ST_DUMP","ST_DWITHIN","ST_ENDPOINT","ST_EQUALS","ST_EXTENT","ST_EXTERIORRING","ST_GEOGFROM","ST_GEOGFROMGEOJSON","ST_GEOGFROMTEXT","ST_GEOGFROMWKB","ST_GEOGPOINT","ST_GEOGPOINTFROMGEOHASH","ST_GEOHASH","ST_GEOMETRYTYPE","ST_INTERIORRINGS","ST_INTERSECTION","ST_INTERSECTS","ST_INTERSECTSBOX","ST_ISCOLLECTION","ST_ISEMPTY","ST_LENGTH","ST_MAKELINE","ST_MAKEPOLYGON","ST_MAKEPOLYGONORIENTED","ST_MAXDISTANCE","ST_NPOINTS","ST_NUMGEOMETRIES","ST_NUMPOINTS","ST_PERIMETER","ST_POINTN","ST_SIMPLIFY","ST_SNAPTOGRID","ST_STARTPOINT","ST_TOUCHES","ST_UNION","ST_UNION_AGG","ST_WITHIN","ST_X","ST_Y","FARM_FINGERPRINT","MD5","SHA1","SHA256","SHA512","HLL_COUNT.INIT","HLL_COUNT.MERGE","HLL_COUNT.MERGE_PARTIAL","HLL_COUNT.EXTRACT","MAKE_INTERVAL","EXTRACT","JUSTIFY_DAYS","JUSTIFY_HOURS","JUSTIFY_INTERVAL","JSON_EXTRACT","JSON_QUERY","JSON_EXTRACT_SCALAR","JSON_VALUE","JSON_EXTRACT_ARRAY","JSON_QUERY_ARRAY","JSON_EXTRACT_STRING_ARRAY","JSON_VALUE_ARRAY","TO_JSON_STRING","ABS","SIGN","IS_INF","IS_NAN","IEEE_DIVIDE","RAND","SQRT","POW","POWER","EXP","LN","LOG","LOG10","GREATEST","LEAST","DIV","SAFE_DIVIDE","SAFE_MULTIPLY","SAFE_NEGATE","SAFE_ADD","SAFE_SUBTRACT","MOD","ROUND","TRUNC","CEIL","CEILING","FLOOR","COS","COSH","ACOS","ACOSH","SIN","SINH","ASIN","ASINH","TAN","TANH","ATAN","ATANH","ATAN2","RANGE_BUCKET","FIRST_VALUE","LAST_VALUE","NTH_VALUE","LEAD","LAG","PERCENTILE_CONT","PERCENTILE_DISC","NET.IP_FROM_STRING","NET.SAFE_IP_FROM_STRING","NET.IP_TO_STRING","NET.IP_NET_MASK","NET.IP_TRUNC","NET.IPV4_FROM_INT64","NET.IPV4_TO_INT64","NET.HOST","NET.PUBLIC_SUFFIX","NET.REG_DOMAIN","RANK","DENSE_RANK","PERCENT_RANK","CUME_DIST","NTILE","ROW_NUMBER","SESSION_USER","CORR","COVAR_POP","COVAR_SAMP","STDDEV_POP","STDDEV_SAMP","STDDEV","VAR_POP","VAR_SAMP","VARIANCE","ASCII","BYTE_LENGTH","CHAR_LENGTH","CHARACTER_LENGTH","CHR","CODE_POINTS_TO_BYTES","CODE_POINTS_TO_STRING","CONCAT","CONTAINS_SUBSTR","ENDS_WITH","FORMAT","FROM_BASE32","FROM_BASE64","FROM_HEX","INITCAP","INSTR","LEFT","LENGTH","LPAD","LOWER","LTRIM","NORMALIZE","NORMALIZE_AND_CASEFOLD","OCTET_LENGTH","REGEXP_CONTAINS","REGEXP_EXTRACT","REGEXP_EXTRACT_ALL","REGEXP_INSTR","REGEXP_REPLACE","REGEXP_SUBSTR","REPLACE","REPEAT","REVERSE","RIGHT","RPAD","RTRIM","SAFE_CONVERT_BYTES_TO_STRING","SOUNDEX","SPLIT","STARTS_WITH","STRPOS","SUBSTR","SUBSTRING","TO_BASE32","TO_BASE64","TO_CODE_POINTS","TO_HEX","TRANSLATE","TRIM","UNICODE","UPPER","CURRENT_TIME","TIME","EXTRACT","TIME_ADD","TIME_SUB","TIME_DIFF","TIME_TRUNC","FORMAT_TIME","PARSE_TIME","CURRENT_TIMESTAMP","EXTRACT","STRING","TIMESTAMP","TIMESTAMP_ADD","TIMESTAMP_SUB","TIMESTAMP_DIFF","TIMESTAMP_TRUNC","FORMAT_TIMESTAMP","PARSE_TIMESTAMP","TIMESTAMP_SECONDS","TIMESTAMP_MILLIS","TIMESTAMP_MICROS","UNIX_SECONDS","UNIX_MILLIS","UNIX_MICROS","GENERATE_UUID","COALESCE","IF","IFNULL","NULLIF","AVG","BIT_AND","BIT_OR","BIT_XOR","CORR","COUNT","COVAR_POP","COVAR_SAMP","EXACT_COUNT_DISTINCT","FIRST","GROUP_CONCAT","GROUP_CONCAT_UNQUOTED","LAST","MAX","MIN","NEST","NTH","QUANTILES","STDDEV","STDDEV_POP","STDDEV_SAMP","SUM","TOP","UNIQUE","VARIANCE","VAR_POP","VAR_SAMP","BIT_COUNT","BOOLEAN","BYTES","CAST","FLOAT","HEX_STRING","INTEGER","STRING","COALESCE","GREATEST","IFNULL","IS_INF","IS_NAN","IS_EXPLICITLY_DEFINED","LEAST","NVL","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","DATE","DATE_ADD","DATEDIFF","DAY","DAYOFWEEK","DAYOFYEAR","FORMAT_UTC_USEC","HOUR","MINUTE","MONTH","MSEC_TO_TIMESTAMP","NOW","PARSE_UTC_USEC","QUARTER","SEC_TO_TIMESTAMP","SECOND","STRFTIME_UTC_USEC","TIME","TIMESTAMP","TIMESTAMP_TO_MSEC","TIMESTAMP_TO_SEC","TIMESTAMP_TO_USEC","USEC_TO_TIMESTAMP","UTC_USEC_TO_DAY","UTC_USEC_TO_HOUR","UTC_USEC_TO_MONTH","UTC_USEC_TO_WEEK","UTC_USEC_TO_YEAR","WEEK","YEAR","FORMAT_IP","PARSE_IP","FORMAT_PACKED_IP","PARSE_PACKED_IP","JSON_EXTRACT","JSON_EXTRACT_SCALAR","ABS","ACOS","ACOSH","ASIN","ASINH","ATAN","ATANH","ATAN2","CEIL","COS","COSH","DEGREES","EXP","FLOOR","LN","LOG","LOG2","LOG10","PI","POW","RADIANS","RAND","ROUND","SIN","SINH","SQRT","TAN","TANH","REGEXP_MATCH","REGEXP_EXTRACT","REGEXP_REPLACE","CONCAT","INSTR","LEFT","LENGTH","LOWER","LPAD","LTRIM","REPLACE","RIGHT","RPAD","RTRIM","SPLIT","SUBSTR","UPPER","TABLE_DATE_RANGE","TABLE_DATE_RANGE_STRICT","TABLE_QUERY","HOST","DOMAIN","TLD","AVG","COUNT","MAX","MIN","STDDEV","SUM","CUME_DIST","DENSE_RANK","FIRST_VALUE","LAG","LAST_VALUE","LEAD","NTH_VALUE","NTILE","PERCENT_RANK","PERCENTILE_CONT","PERCENTILE_DISC","RANK","RATIO_TO_REPORT","ROW_NUMBER","CURRENT_USER","EVERY","FROM_BASE64","HASH","FARM_FINGERPRINT","IF","POSITION","SHA1","SOME","TO_BASE64","BQ.JOBS.CANCEL","BQ.REFRESH_MATERIALIZED_VIEW","OPTIONS","PIVOT","UNPIVOT"]});var EK,hK,pK=G(()=>{EK=["ALL","AND","ANY","AS","ASC","ASSERT_ROWS_MODIFIED","AT","BETWEEN","BY","CASE","CAST","COLLATE","CONTAINS","CREATE","CROSS","CUBE","CURRENT","DEFAULT","DEFINE","DESC","DISTINCT","ELSE","END","ENUM","ESCAPE","EXCEPT","EXCLUDE","EXISTS","EXTRACT","FALSE","FETCH","FOLLOWING","FOR","FROM","FULL","GROUP","GROUPING","GROUPS","HASH","HAVING","IF","IGNORE","IN","INNER","INTERSECT","INTO","IS","JOIN","LATERAL","LEFT","LIMIT","LOOKUP","MERGE","NATURAL","NEW","NO","NOT","NULL","NULLS","OF","ON","OR","ORDER","OUTER","OVER","PARTITION","PRECEDING","PROTO","RANGE","RECURSIVE","RESPECT","RIGHT","ROLLUP","ROWS","SELECT","SET","SOME","TABLE","TABLESAMPLE","THEN","TO","TREAT","TRUE","UNBOUNDED","UNION","UNNEST","USING","WHEN","WHERE","WINDOW","WITH","WITHIN","SAFE","LIKE","COPY","CLONE","IN","OUT","INOUT","RETURNS","LANGUAGE","CASCADE","RESTRICT","DETERMINISTIC"],hK=["ARRAY","BOOL","BYTES","DATE","DATETIME","GEOGRAPHY","INTERVAL","INT64","INT","SMALLINT","INTEGER","BIGINT","TINYINT","BYTEINT","NUMERIC","DECIMAL","BIGNUMERIC","BIGDECIMAL","FLOAT64","STRING","STRUCT","TIME","TIMEZONE"]});function FLe(t){return HLe(GLe(t))}function HLe(t){let e=zi;return t.map(n=>n.text==="OFFSET"&&e.text==="["?(e=n,Object.assign(Object.assign({},n),{type:Y.RESERVED_FUNCTION_NAME})):(e=n,n))}function GLe(t){var e;let n=[];for(let r=0;r<t.length;r++){let i=t[r];if((ui.ARRAY(i)||ui.STRUCT(i))&&((e=t[r+1])===null||e===void 0?void 0:e.text)==="<"){let s=$Le(t,r+1),o=t.slice(r,s+1);n.push({type:Y.IDENTIFIER,raw:o.map(SK("raw")).join(""),text:o.map(SK("text")).join(""),start:i.start}),r=s}else n.push(i)}return n}function $Le(t,e){let n=0;for(let r=e;r<t.length;r++){let i=t[r];if(i.text==="<"?n++:i.text===">"?n--:i.text===">>"&&(n-=2),n===0)return r}return t.length-1}var PLe,xLe,TK,Dw,vLe,MLe,ULe,BLe,hA,SK,Pw=G(()=>{qt();Yr();fK();pK();PLe=v(["SELECT [ALL | DISTINCT] [AS STRUCT | AS VALUE]"]),xLe=v(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY","HAVING","QUALIFY","WINDOW","PARTITION BY","ORDER BY","LIMIT","OFFSET","OMIT RECORD IF","INSERT [INTO]","VALUES","SET","MERGE [INTO]","WHEN [NOT] MATCHED [BY SOURCE | BY TARGET] [THEN]","UPDATE SET","CLUSTER BY","FOR SYSTEM_TIME AS OF","WITH CONNECTION","WITH PARTITION COLUMNS","REMOTE WITH CONNECTION"]),TK=v(["CREATE [OR REPLACE] [TEMP|TEMPORARY|SNAPSHOT|EXTERNAL] TABLE [IF NOT EXISTS]"]),Dw=v(["CREATE [OR REPLACE] [MATERIALIZED] VIEW [IF NOT EXISTS]","UPDATE","DELETE [FROM]","DROP [SNAPSHOT | EXTERNAL] TABLE [IF EXISTS]","ALTER TABLE [IF EXISTS]","ADD COLUMN [IF NOT EXISTS]","DROP COLUMN [IF EXISTS]","RENAME TO","ALTER COLUMN [IF EXISTS]","SET DEFAULT COLLATE","SET OPTIONS","DROP NOT NULL","SET DATA TYPE","ALTER SCHEMA [IF EXISTS]","ALTER [MATERIALIZED] VIEW [IF EXISTS]","ALTER BI_CAPACITY","TRUNCATE TABLE","CREATE SCHEMA [IF NOT EXISTS]","DEFAULT COLLATE","CREATE [OR REPLACE] [TEMP|TEMPORARY|TABLE] FUNCTION [IF NOT EXISTS]","CREATE [OR REPLACE] PROCEDURE [IF NOT EXISTS]","CREATE [OR REPLACE] ROW ACCESS POLICY [IF NOT EXISTS]","GRANT TO","FILTER USING","CREATE CAPACITY","AS JSON","CREATE RESERVATION","CREATE ASSIGNMENT","CREATE SEARCH INDEX [IF NOT EXISTS]","DROP SCHEMA [IF EXISTS]","DROP [MATERIALIZED] VIEW [IF EXISTS]","DROP [TABLE] FUNCTION [IF EXISTS]","DROP PROCEDURE [IF EXISTS]","DROP ROW ACCESS POLICY","DROP ALL ROW ACCESS POLICIES","DROP CAPACITY [IF EXISTS]","DROP RESERVATION [IF EXISTS]","DROP ASSIGNMENT [IF EXISTS]","DROP SEARCH INDEX [IF EXISTS]","DROP [IF EXISTS]","GRANT","REVOKE","DECLARE","EXECUTE IMMEDIATE","LOOP","END LOOP","REPEAT","END REPEAT","WHILE","END WHILE","BREAK","LEAVE","CONTINUE","ITERATE","FOR","END FOR","BEGIN","BEGIN TRANSACTION","COMMIT TRANSACTION","ROLLBACK TRANSACTION","RAISE","RETURN","CALL","ASSERT","EXPORT DATA"]),vLe=v(["UNION {ALL | DISTINCT}","EXCEPT DISTINCT","INTERSECT DISTINCT"]),MLe=v(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN"]),ULe=v(["TABLESAMPLE SYSTEM","ANY TYPE","ALL COLUMNS","NOT DETERMINISTIC","{ROWS | RANGE} BETWEEN","IS [NOT] DISTINCT FROM"]),BLe=v([]),hA={name:"bigquery",tokenizerOptions:{reservedSelect:PLe,reservedClauses:[...xLe,...Dw,...TK],reservedSetOperations:vLe,reservedJoins:MLe,reservedKeywordPhrases:ULe,reservedDataTypePhrases:BLe,reservedKeywords:EK,reservedDataTypes:hK,reservedFunctionNames:dK,extraParens:["[]"],stringTypes:[{quote:'""".."""',prefixes:["R","B","RB","BR"]},{quote:"'''..'''",prefixes:["R","B","RB","BR"]},'""-bs',"''-bs",{quote:'""-raw',prefixes:["R","B","RB","BR"],requirePrefix:!0},{quote:"''-raw",prefixes:["R","B","RB","BR"],requirePrefix:!0}],identTypes:["``"],identChars:{dashes:!0},paramTypes:{positional:!0,named:["@"],quoted:["@"]},variableTypes:[{regex:String.raw`@@\w+`}],lineCommentTypes:["--","#"],operators:["&","|","^","~",">>","<<","||","=>"],postProcess:FLe},formatOptions:{onelineClauses:[...TK,...Dw],tabularOnelineClauses:Dw}};SK=t=>e=>e.type===Y.IDENTIFIER||e.type===Y.COMMA?e[t]+" ":e[t]});var RK,AK=G(()=>{RK=["ARRAY_AGG","AVG","CORRELATION","COUNT","COUNT_BIG","COVARIANCE","COVARIANCE_SAMP","CUME_DIST","GROUPING","LISTAGG","MAX","MEDIAN","MIN","PERCENTILE_CONT","PERCENTILE_DISC","PERCENT_RANK","REGR_AVGX","REGR_AVGY","REGR_COUNT","REGR_INTERCEPT","REGR_ICPT","REGR_R2","REGR_SLOPE","REGR_SXX","REGR_SXY","REGR_SYY","STDDEV","STDDEV_SAMP","SUM","VARIANCE","VARIANCE_SAMP","XMLAGG","XMLGROUP","ABS","ABSVAL","ACOS","ADD_DAYS","ADD_HOURS","ADD_MINUTES","ADD_MONTHS","ADD_SECONDS","ADD_YEARS","AGE","ARRAY_DELETE","ARRAY_FIRST","ARRAY_LAST","ARRAY_NEXT","ARRAY_PRIOR","ASCII","ASCII_STR","ASIN","ATAN","ATAN2","ATANH","BITAND","BITANDNOT","BITOR","BITXOR","BITNOT","BPCHAR","BSON_TO_JSON","BTRIM","CARDINALITY","CEILING","CEIL","CHARACTER_LENGTH","CHR","COALESCE","COLLATION_KEY","COLLATION_KEY_BIT","COMPARE_DECFLOAT","CONCAT","COS","COSH","COT","CURSOR_ROWCOUNT","DATAPARTITIONNUM","DATE_PART","DATE_TRUNC","DAY","DAYNAME","DAYOFMONTH","DAYOFWEEK","DAYOFWEEK_ISO","DAYOFYEAR","DAYS","DAYS_BETWEEN","DAYS_TO_END_OF_MONTH","DBPARTITIONNUM","DECFLOAT","DECFLOAT_FORMAT","DECODE","DECRYPT_BIN","DECRYPT_CHAR","DEGREES","DEREF","DIFFERENCE","DIGITS","DOUBLE_PRECISION","EMPTY_BLOB","EMPTY_CLOB","EMPTY_DBCLOB","EMPTY_NCLOB","ENCRYPT","EVENT_MON_STATE","EXP","EXTRACT","FIRST_DAY","FLOOR","FROM_UTC_TIMESTAMP","GENERATE_UNIQUE","GETHINT","GREATEST","HASH","HASH4","HASH8","HASHEDVALUE","HEX","HEXTORAW","HOUR","HOURS_BETWEEN","IDENTITY_VAL_LOCAL","IFNULL","INITCAP","INSERT","INSTR","INSTR2","INSTR4","INSTRB","INTNAND","INTNOR","INTNXOR","INTNNOT","ISNULL","JSON_ARRAY","JSON_OBJECT","JSON_QUERY","JSON_TO_BSON","JSON_VALUE","JULIAN_DAY","LAST_DAY","LCASE","LEAST","LEFT","LENGTH","LENGTH2","LENGTH4","LENGTHB","LN","LOCATE","LOCATE_IN_STRING","LOG10","LONG_VARCHAR","LONG_VARGRAPHIC","LOWER","LPAD","LTRIM","MAX","MAX_CARDINALITY","MICROSECOND","MIDNIGHT_SECONDS","MIN","MINUTE","MINUTES_BETWEEN","MOD","MONTH","MONTHNAME","MONTHS_BETWEEN","MULTIPLY_ALT","NEXT_DAY","NEXT_MONTH","NEXT_QUARTER","NEXT_WEEK","NEXT_YEAR","NORMALIZE_DECFLOAT","NOW","NULLIF","NVL","NVL2","OCTET_LENGTH","OVERLAY","PARAMETER","POSITION","POSSTR","POW","POWER","QUANTIZE","QUARTER","QUOTE_IDENT","QUOTE_LITERAL","RADIANS","RAISE_ERROR","RAND","RANDOM","RAWTOHEX","REC2XML","REGEXP_COUNT","REGEXP_EXTRACT","REGEXP_INSTR","REGEXP_LIKE","REGEXP_MATCH_COUNT","REGEXP_REPLACE","REGEXP_SUBSTR","REPEAT","REPLACE","RID","RID_BIT","RIGHT","ROUND","ROUND_TIMESTAMP","RPAD","RTRIM","SECLABEL","SECLABEL_BY_NAME","SECLABEL_TO_CHAR","SECOND","SECONDS_BETWEEN","SIGN","SIN","SINH","SOUNDEX","SPACE","SQRT","STRIP","STRLEFT","STRPOS","STRRIGHT","SUBSTR","SUBSTR2","SUBSTR4","SUBSTRB","SUBSTRING","TABLE_NAME","TABLE_SCHEMA","TAN","TANH","THIS_MONTH","THIS_QUARTER","THIS_WEEK","THIS_YEAR","TIMESTAMP_FORMAT","TIMESTAMP_ISO","TIMESTAMPDIFF","TIMEZONE","TO_CHAR","TO_CLOB","TO_DATE","TO_HEX","TO_MULTI_BYTE","TO_NCHAR","TO_NCLOB","TO_NUMBER","TO_SINGLE_BYTE","TO_TIMESTAMP","TO_UTC_TIMESTAMP","TOTALORDER","TRANSLATE","TRIM","TRIM_ARRAY","TRUNC_TIMESTAMP","TRUNCATE","TRUNC","TYPE_ID","TYPE_NAME","TYPE_SCHEMA","UCASE","UNICODE_STR","UPPER","VALUE","VARCHAR_BIT_FORMAT","VARCHAR_FORMAT","VARCHAR_FORMAT_BIT","VERIFY_GROUP_FOR_USER","VERIFY_ROLE_FOR_USER","VERIFY_TRUSTED_CONTEXT_ROLE_FOR_USER","WEEK","WEEK_ISO","WEEKS_BETWEEN","WIDTH_BUCKET","XMLATTRIBUTES","XMLCOMMENT","XMLCONCAT","XMLDOCUMENT","XMLELEMENT","XMLFOREST","XMLNAMESPACES","XMLPARSE","XMLPI","XMLQUERY","XMLROW","XMLSERIALIZE","XMLTEXT","XMLVALIDATE","XMLXSROBJECTID","XSLTRANSFORM","YEAR","YEARS_BETWEEN","YMD_BETWEEN","BASE_TABLE","JSON_TABLE","UNNEST","XMLTABLE","RANK","DENSE_RANK","NTILE","LAG","LEAD","ROW_NUMBER","FIRST_VALUE","LAST_VALUE","NTH_VALUE","RATIO_TO_REPORT","CAST"]});var mK,gK,IK=G(()=>{mK=["ACTIVATE","ADD","AFTER","ALIAS","ALL","ALLOCATE","ALLOW","ALTER","AND","ANY","AS","ASENSITIVE","ASSOCIATE","ASUTIME","AT","ATTRIBUTES","AUDIT","AUTHORIZATION","AUX","AUXILIARY","BEFORE","BEGIN","BETWEEN","BINARY","BUFFERPOOL","BY","CACHE","CALL","CALLED","CAPTURE","CARDINALITY","CASCADED","CASE","CAST","CHECK","CLONE","CLOSE","CLUSTER","COLLECTION","COLLID","COLUMN","COMMENT","COMMIT","CONCAT","CONDITION","CONNECT","CONNECTION","CONSTRAINT","CONTAINS","CONTINUE","COUNT","COUNT_BIG","CREATE","CROSS","CURRENT","CURRENT_DATE","CURRENT_LC_CTYPE","CURRENT_PATH","CURRENT_SCHEMA","CURRENT_SERVER","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_TIMEZONE","CURRENT_USER","CURSOR","CYCLE","DATA","DATABASE","DATAPARTITIONNAME","DATAPARTITIONNUM","DAY","DAYS","DB2GENERAL","DB2GENRL","DB2SQL","DBINFO","DBPARTITIONNAME","DBPARTITIONNUM","DEALLOCATE","DECLARE","DEFAULT","DEFAULTS","DEFINITION","DELETE","DENSERANK","DENSE_RANK","DESCRIBE","DESCRIPTOR","DETERMINISTIC","DIAGNOSTICS","DISABLE","DISALLOW","DISCONNECT","DISTINCT","DO","DOCUMENT","DROP","DSSIZE","DYNAMIC","EACH","EDITPROC","ELSE","ELSEIF","ENABLE","ENCODING","ENCRYPTION","END","END-EXEC","ENDING","ERASE","ESCAPE","EVERY","EXCEPT","EXCEPTION","EXCLUDING","EXCLUSIVE","EXECUTE","EXISTS","EXIT","EXPLAIN","EXTENDED","EXTERNAL","EXTRACT","FENCED","FETCH","FIELDPROC","FILE","FINAL","FIRST1","FOR","FOREIGN","FREE","FROM","FULL","FUNCTION","GENERAL","GENERATED","GET","GLOBAL","GO","GOTO","GRANT","GRAPHIC","GROUP","HANDLER","HASH","HASHED_VALUE","HAVING","HINT","HOLD","HOUR","HOURS","IDENTITY","IF","IMMEDIATE","IMPORT","IN","INCLUDING","INCLUSIVE","INCREMENT","INDEX","INDICATOR","INDICATORS","INF","INFINITY","INHERIT","INNER","INOUT","INSENSITIVE","INSERT","INTEGRITY","INTERSECT","INTO","IS","ISNULL","ISOBID","ISOLATION","ITERATE","JAR","JAVA","JOIN","KEEP","KEY","LABEL","LANGUAGE","LAST3","LATERAL","LC_CTYPE","LEAVE","LEFT","LIKE","LIMIT","LINKTYPE","LOCAL","LOCALDATE","LOCALE","LOCALTIME","LOCALTIMESTAMP","LOCATOR","LOCATORS","LOCK","LOCKMAX","LOCKSIZE","LOOP","MAINTAINED","MATERIALIZED","MAXVALUE","MICROSECOND","MICROSECONDS","MINUTE","MINUTES","MINVALUE","MODE","MODIFIES","MONTH","MONTHS","NAN","NEW","NEW_TABLE","NEXTVAL","NO","NOCACHE","NOCYCLE","NODENAME","NODENUMBER","NOMAXVALUE","NOMINVALUE","NONE","NOORDER","NORMALIZED","NOT2","NOTNULL","NULL","NULLS","NUMPARTS","OBID","OF","OFF","OFFSET","OLD","OLD_TABLE","ON","OPEN","OPTIMIZATION","OPTIMIZE","OPTION","OR","ORDER","OUT","OUTER","OVER","OVERRIDING","PACKAGE","PADDED","PAGESIZE","PARAMETER","PART","PARTITION","PARTITIONED","PARTITIONING","PARTITIONS","PASSWORD","PATH","PERCENT","PIECESIZE","PLAN","POSITION","PRECISION","PREPARE","PREVVAL","PRIMARY","PRIQTY","PRIVILEGES","PROCEDURE","PROGRAM","PSID","PUBLIC","QUERY","QUERYNO","RANGE","RANK","READ","READS","RECOVERY","REFERENCES","REFERENCING","REFRESH","RELEASE","RENAME","REPEAT","RESET","RESIGNAL","RESTART","RESTRICT","RESULT","RESULT_SET_LOCATOR","RETURN","RETURNS","REVOKE","RIGHT","ROLE","ROLLBACK","ROUND_CEILING","ROUND_DOWN","ROUND_FLOOR","ROUND_HALF_DOWN","ROUND_HALF_EVEN","ROUND_HALF_UP","ROUND_UP","ROUTINE","ROW","ROWNUMBER","ROWS","ROWSET","ROW_NUMBER","RRN","RUN","SAVEPOINT","SCHEMA","SCRATCHPAD","SCROLL","SEARCH","SECOND","SECONDS","SECQTY","SECURITY","SELECT","SENSITIVE","SEQUENCE","SESSION","SESSION_USER","SET","SIGNAL","SIMPLE","SNAN","SOME","SOURCE","SPECIFIC","SQL","SQLID","STACKED","STANDARD","START","STARTING","STATEMENT","STATIC","STATMENT","STAY","STOGROUP","STORES","STYLE","SUBSTRING","SUMMARY","SYNONYM","SYSFUN","SYSIBM","SYSPROC","SYSTEM","SYSTEM_USER","TABLE","TABLESPACE","THEN","TO","TRANSACTION","TRIGGER","TRIM","TRUNCATE","TYPE","UNDO","UNION","UNIQUE","UNTIL","UPDATE","USAGE","USER","USING","VALIDPROC","VALUE","VALUES","VARIABLE","VARIANT","VCAT","VERSION","VIEW","VOLATILE","VOLUMES","WHEN","WHENEVER","WHERE","WHILE","WITH","WITHOUT","WLM","WRITE","XMLELEMENT","XMLEXISTS","XMLNAMESPACES","YEAR","YEARS"],gK=["ARRAY","BIGINT","BINARY","BLOB","BOOLEAN","CCSID","CHAR","CHARACTER","CLOB","DATE","DATETIME","DBCLOB","DEC","DECIMAL","DOUBLE","DOUBLE PRECISION","FLOAT","FLOAT4","FLOAT8","GRAPHIC","INT","INT2","INT4","INT8","INTEGER","INTERVAL","LONG VARCHAR","LONG VARGRAPHIC","NCHAR","NCHR","NCLOB","NVARCHAR","NUMERIC","SMALLINT","REAL","TIME","TIMESTAMP","VARBINARY","VARCHAR","VARGRAPHIC"]});var kLe,WLe,_K,xw,YLe,VLe,qLe,XLe,pA,vw=G(()=>{qt();AK();IK();kLe=v(["SELECT [ALL | DISTINCT]"]),WLe=v(["WITH","FROM","WHERE","GROUP BY","HAVING","PARTITION BY","ORDER BY [INPUT SEQUENCE]","LIMIT","OFFSET","FETCH NEXT","FOR UPDATE [OF]","FOR {READ | FETCH} ONLY","FOR {RR | CS | UR | RS} [USE AND KEEP {SHARE | UPDATE | EXCLUSIVE} LOCKS]","WAIT FOR OUTCOME","SKIP LOCKED DATA","INTO","INSERT INTO","VALUES","SET","MERGE INTO","WHEN [NOT] MATCHED [THEN]","UPDATE SET","INSERT"]),_K=v(["CREATE [GLOBAL TEMPORARY | EXTERNAL] TABLE [IF NOT EXISTS]"]),xw=v(["CREATE [OR REPLACE] VIEW","UPDATE","WHERE CURRENT OF","WITH {RR | RS | CS | UR}","DELETE FROM","DROP TABLE [IF EXISTS]","ALTER TABLE","ADD [COLUMN]","DROP [COLUMN]","RENAME COLUMN","ALTER [COLUMN]","SET DATA TYPE","SET NOT NULL","DROP {DEFAULT | GENERATED | NOT NULL}","TRUNCATE [TABLE]","ALLOCATE","ALTER AUDIT POLICY","ALTER BUFFERPOOL","ALTER DATABASE PARTITION GROUP","ALTER DATABASE","ALTER EVENT MONITOR","ALTER FUNCTION","ALTER HISTOGRAM TEMPLATE","ALTER INDEX","ALTER MASK","ALTER METHOD","ALTER MODULE","ALTER NICKNAME","ALTER PACKAGE","ALTER PERMISSION","ALTER PROCEDURE","ALTER SCHEMA","ALTER SECURITY LABEL COMPONENT","ALTER SECURITY POLICY","ALTER SEQUENCE","ALTER SERVER","ALTER SERVICE CLASS","ALTER STOGROUP","ALTER TABLESPACE","ALTER THRESHOLD","ALTER TRIGGER","ALTER TRUSTED CONTEXT","ALTER TYPE","ALTER USAGE LIST","ALTER USER MAPPING","ALTER VIEW","ALTER WORK ACTION SET","ALTER WORK CLASS SET","ALTER WORKLOAD","ALTER WRAPPER","ALTER XSROBJECT","ALTER STOGROUP","ALTER TABLESPACE","ALTER TRIGGER","ALTER TRUSTED CONTEXT","ALTER VIEW","ASSOCIATE [RESULT SET] {LOCATOR | LOCATORS}","AUDIT","BEGIN DECLARE SECTION","CALL","CLOSE","COMMENT ON","COMMIT [WORK]","CONNECT","CREATE [OR REPLACE] [PUBLIC] ALIAS","CREATE AUDIT POLICY","CREATE BUFFERPOOL","CREATE DATABASE PARTITION GROUP","CREATE EVENT MONITOR","CREATE [OR REPLACE] FUNCTION","CREATE FUNCTION MAPPING","CREATE HISTOGRAM TEMPLATE","CREATE [UNIQUE] INDEX","CREATE INDEX EXTENSION","CREATE [OR REPLACE] MASK","CREATE [SPECIFIC] METHOD","CREATE [OR REPLACE] MODULE","CREATE [OR REPLACE] NICKNAME","CREATE [OR REPLACE] PERMISSION","CREATE [OR REPLACE] PROCEDURE","CREATE ROLE","CREATE SCHEMA","CREATE SECURITY LABEL [COMPONENT]","CREATE SECURITY POLICY","CREATE [OR REPLACE] SEQUENCE","CREATE SERVICE CLASS","CREATE SERVER","CREATE STOGROUP","CREATE SYNONYM","CREATE [LARGE | REGULAR | {SYSTEM | USER} TEMPORARY] TABLESPACE","CREATE THRESHOLD","CREATE {TRANSFORM | TRANSFORMS} FOR","CREATE [OR REPLACE] TRIGGER","CREATE TRUSTED CONTEXT","CREATE [OR REPLACE] TYPE","CREATE TYPE MAPPING","CREATE USAGE LIST","CREATE USER MAPPING FOR","CREATE [OR REPLACE] VARIABLE","CREATE WORK ACTION SET","CREATE WORK CLASS SET","CREATE WORKLOAD","CREATE WRAPPER","DECLARE","DECLARE GLOBAL TEMPORARY TABLE","DESCRIBE [INPUT | OUTPUT]","DISCONNECT","DROP [PUBLIC] ALIAS","DROP AUDIT POLICY","DROP BUFFERPOOL","DROP DATABASE PARTITION GROUP","DROP EVENT MONITOR","DROP [SPECIFIC] FUNCTION","DROP FUNCTION MAPPING","DROP HISTOGRAM TEMPLATE","DROP INDEX [EXTENSION]","DROP MASK","DROP [SPECIFIC] METHOD","DROP MODULE","DROP NICKNAME","DROP PACKAGE","DROP PERMISSION","DROP [SPECIFIC] PROCEDURE","DROP ROLE","DROP SCHEMA","DROP SECURITY LABEL [COMPONENT]","DROP SECURITY POLICY","DROP SEQUENCE","DROP SERVER","DROP SERVICE CLASS","DROP STOGROUP","DROP TABLE HIERARCHY","DROP {TABLESPACE | TABLESPACES}","DROP {TRANSFORM | TRANSFORMS}","DROP THRESHOLD","DROP TRIGGER","DROP TRUSTED CONTEXT","DROP TYPE [MAPPING]","DROP USAGE LIST","DROP USER MAPPING FOR","DROP VARIABLE","DROP VIEW [HIERARCHY]","DROP WORK {ACTION | CLASS} SET","DROP WORKLOAD","DROP WRAPPER","DROP XSROBJECT","END DECLARE SECTION","EXECUTE [IMMEDIATE]","EXPLAIN {PLAN [SECTION] | ALL}","FETCH [FROM]","FLUSH {BUFFERPOOL | BUFFERPOOLS} ALL","FLUSH EVENT MONITOR","FLUSH FEDERATED CACHE","FLUSH OPTIMIZATION PROFILE CACHE","FLUSH PACKAGE CACHE [DYNAMIC]","FLUSH AUTHENTICATION CACHE [FOR ALL]","FREE LOCATOR","GET DIAGNOSTICS","GOTO","GRANT","INCLUDE","ITERATE","LEAVE","LOCK TABLE","LOOP","OPEN","PIPE","PREPARE","REFRESH TABLE","RELEASE","RELEASE [TO] SAVEPOINT","RENAME [TABLE | INDEX | STOGROUP | TABLESPACE]","REPEAT","RESIGNAL","RETURN","REVOKE","ROLLBACK [WORK] [TO SAVEPOINT]","SAVEPOINT","SET COMPILATION ENVIRONMENT","SET CONNECTION","SET CURRENT","SET ENCRYPTION PASSWORD","SET EVENT MONITOR STATE","SET INTEGRITY","SET PASSTHRU","SET PATH","SET ROLE","SET SCHEMA","SET SERVER OPTION","SET {SESSION AUTHORIZATION | SESSION_USER}","SET USAGE LIST","SIGNAL","TRANSFER OWNERSHIP OF","WHENEVER {NOT FOUND | SQLERROR | SQLWARNING}","WHILE"]),YLe=v(["UNION [ALL]","EXCEPT [ALL]","INTERSECT [ALL]"]),VLe=v(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN"]),qLe=v(["ON DELETE","ON UPDATE","SET NULL","{ROWS | RANGE} BETWEEN"]),XLe=v([]),pA={name:"db2",tokenizerOptions:{reservedSelect:kLe,reservedClauses:[...WLe,..._K,...xw],reservedSetOperations:YLe,reservedJoins:VLe,reservedKeywordPhrases:qLe,reservedDataTypePhrases:XLe,reservedKeywords:mK,reservedDataTypes:gK,reservedFunctionNames:RK,extraParens:["[]"],stringTypes:[{quote:"''-qq",prefixes:["G","N","U&"]},{quote:"''-raw",prefixes:["X","BX","GX","UX"],requirePrefix:!0}],identTypes:['""-qq'],identChars:{first:"@#$",rest:"@#$"},paramTypes:{positional:!0,named:[":"]},paramChars:{first:"@#$",rest:"@#$"},operators:["**","%","|","&","^","~","\xAC=","\xAC>","\xAC<","!>","!<","^=","^>","^<","||","->","=>"]},formatOptions:{onelineClauses:[..._K,...xw],tabularOnelineClauses:xw}}});var NK,OK=G(()=>{NK=["ARRAY_AGG","AVG","CORR","CORRELATION","COUNT","COUNT_BIG","COVAR_POP","COVARIANCE","COVAR","COVAR_SAMP","COVARIANCE_SAMP","EVERY","GROUPING","JSON_ARRAYAGG","JSON_OBJECTAGG","LISTAGG","MAX","MEDIAN","MIN","PERCENTILE_CONT","PERCENTILE_DISC","REGR_AVGX","REGR_AVGY","REGR_COUNT","REGR_INTERCEPT","REGR_R2","REGR_SLOPE","REGR_SXX","REGR_SXY","REGR_SYY","SOME","STDDEV_POP","STDDEV","STDDEV_SAMP","SUM","VAR_POP","VARIANCE","VAR","VAR_SAMP","VARIANCE_SAMP","XMLAGG","XMLGROUP","ABS","ABSVAL","ACOS","ADD_DAYS","ADD_HOURS","ADD_MINUTES","ADD_MONTHS","ADD_SECONDS","ADD_YEARS","ANTILOG","ARRAY_MAX_CARDINALITY","ARRAY_TRIM","ASCII","ASIN","ATAN","ATAN2","ATANH","BASE64_DECODE","BASE64_ENCODE","BIT_LENGTH","BITAND","BITANDNOT","BITNOT","BITOR","BITXOR","BSON_TO_JSON","CARDINALITY","CEIL","CEILING","CHAR_LENGTH","CHARACTER_LENGTH","CHR","COALESCE","COMPARE_DECFLOAT","CONCAT","CONTAINS","COS","COSH","COT","CURDATE","CURTIME","DATABASE","DATAPARTITIONNAME","DATAPARTITIONNUM","DAY","DAYNAME","DAYOFMONTH","DAYOFWEEK_ISO","DAYOFWEEK","DAYOFYEAR","DAYS","DBPARTITIONNAME","DBPARTITIONNUM","DECFLOAT_FORMAT","DECFLOAT_SORTKEY","DECRYPT_BINARY","DECRYPT_BIT","DECRYPT_CHAR","DECRYPT_DB","DEGREES","DIFFERENCE","DIGITS","DLCOMMENT","DLLINKTYPE","DLURLCOMPLETE","DLURLPATH","DLURLPATHONLY","DLURLSCHEME","DLURLSERVER","DLVALUE","DOUBLE_PRECISION","DOUBLE","ENCRPYT","ENCRYPT_AES","ENCRYPT_AES256","ENCRYPT_RC2","ENCRYPT_TDES","EXP","EXTRACT","FIRST_DAY","FLOOR","GENERATE_UNIQUE","GET_BLOB_FROM_FILE","GET_CLOB_FROM_FILE","GET_DBCLOB_FROM_FILE","GET_XML_FILE","GETHINT","GREATEST","HASH_MD5","HASH_ROW","HASH_SHA1","HASH_SHA256","HASH_SHA512","HASH_VALUES","HASHED_VALUE","HEX","HEXTORAW","HOUR","HTML_ENTITY_DECODE","HTML_ENTITY_ENCODE","HTTP_DELETE_BLOB","HTTP_DELETE","HTTP_GET_BLOB","HTTP_GET","HTTP_PATCH_BLOB","HTTP_PATCH","HTTP_POST_BLOB","HTTP_POST","HTTP_PUT_BLOB","HTTP_PUT","IDENTITY_VAL_LOCAL","IFNULL","INSERT","INSTR","INTERPRET","ISFALSE","ISNOTFALSE","ISNOTTRUE","ISTRUE","JSON_ARRAY","JSON_OBJECT","JSON_QUERY","JSON_TO_BSON","JSON_UPDATE","JSON_VALUE","JULIAN_DAY","LAND","LAST_DAY","LCASE","LEAST","LEFT","LENGTH","LN","LNOT","LOCATE_IN_STRING","LOCATE","LOG10","LOR","LOWER","LPAD","LTRIM","MAX_CARDINALITY","MAX","MICROSECOND","MIDNIGHT_SECONDS","MIN","MINUTE","MOD","MONTH","MONTHNAME","MONTHS_BETWEEN","MQREAD","MQREADCLOB","MQRECEIVE","MQRECEIVECLOB","MQSEND","MULTIPLY_ALT","NEXT_DAY","NORMALIZE_DECFLOAT","NOW","NULLIF","NVL","OCTET_LENGTH","OVERLAY","PI","POSITION","POSSTR","POW","POWER","QUANTIZE","QUARTER","RADIANS","RAISE_ERROR","RANDOM","RAND","REGEXP_COUNT","REGEXP_INSTR","REGEXP_REPLACE","REGEXP_SUBSTR","REPEAT","REPLACE","RID","RIGHT","ROUND_TIMESTAMP","ROUND","RPAD","RRN","RTRIM","SCORE","SECOND","SIGN","SIN","SINH","SOUNDEX","SPACE","SQRT","STRIP","STRLEFT","STRPOS","STRRIGHT","SUBSTR","SUBSTRING","TABLE_NAME","TABLE_SCHEMA","TAN","TANH","TIMESTAMP_FORMAT","TIMESTAMP_ISO","TIMESTAMPDIFF_BIG","TIMESTAMPDIFF","TO_CHAR","TO_CLOB","TO_DATE","TO_NUMBER","TO_TIMESTAMP","TOTALORDER","TRANSLATE","TRIM_ARRAY","TRIM","TRUNC_TIMESTAMP","TRUNC","TRUNCATE","UCASE","UPPER","URL_DECODE","URL_ENCODE","VALUE","VARBINARY_FORMAT","VARCHAR_BIT_FORMAT","VARCHAR_FORMAT_BINARY","VARCHAR_FORMAT","VERIFY_GROUP_FOR_USER","WEEK_ISO","WEEK","WRAP","XMLATTRIBUTES","XMLCOMMENT","XMLCONCAT","XMLDOCUMENT","XMLELEMENT","XMLFOREST","XMLNAMESPACES","XMLPARSE","XMLPI","XMLROW","XMLSERIALIZE","XMLTEXT","XMLVALIDATE","XOR","XSLTRANSFORM","YEAR","ZONED","BASE_TABLE","HTTP_DELETE_BLOB_VERBOSE","HTTP_DELETE_VERBOSE","HTTP_GET_BLOB_VERBOSE","HTTP_GET_VERBOSE","HTTP_PATCH_BLOB_VERBOSE","HTTP_PATCH_VERBOSE","HTTP_POST_BLOB_VERBOSE","HTTP_POST_VERBOSE","HTTP_PUT_BLOB_VERBOSE","HTTP_PUT_VERBOSE","JSON_TABLE","MQREADALL","MQREADALLCLOB","MQRECEIVEALL","MQRECEIVEALLCLOB","XMLTABLE","UNPACK","CUME_DIST","DENSE_RANK","FIRST_VALUE","LAG","LAST_VALUE","LEAD","NTH_VALUE","NTILE","PERCENT_RANK","RANK","RATIO_TO_REPORT","ROW_NUMBER","CAST"]});var CK,bK,yK=G(()=>{CK=["ABSENT","ACCORDING","ACCTNG","ACTION","ACTIVATE","ADD","ALIAS","ALL","ALLOCATE","ALLOW","ALTER","AND","ANY","APPEND","APPLNAME","ARRAY","ARRAY_AGG","ARRAY_TRIM","AS","ASC","ASENSITIVE","ASSOCIATE","ATOMIC","ATTACH","ATTRIBUTES","AUTHORIZATION","AUTONOMOUS","BEFORE","BEGIN","BETWEEN","BIND","BSON","BUFFERPOOL","BY","CACHE","CALL","CALLED","CARDINALITY","CASE","CAST","CHECK","CL","CLOSE","CLUSTER","COLLECT","COLLECTION","COLUMN","COMMENT","COMMIT","COMPACT","COMPARISONS","COMPRESS","CONCAT","CONCURRENT","CONDITION","CONNECT","CONNECT_BY_ROOT","CONNECTION","CONSTANT","CONSTRAINT","CONTAINS","CONTENT","CONTINUE","COPY","COUNT","COUNT_BIG","CREATE","CREATEIN","CROSS","CUBE","CUME_DIST","CURRENT","CURRENT_DATE","CURRENT_PATH","CURRENT_SCHEMA","CURRENT_SERVER","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_TIMEZONE","CURRENT_USER","CURSOR","CYCLE","DATABASE","DATAPARTITIONNAME","DATAPARTITIONNUM","DAY","DAYS","DB2GENERAL","DB2GENRL","DB2SQL","DBINFO","DBPARTITIONNAME","DBPARTITIONNUM","DEACTIVATE","DEALLOCATE","DECLARE","DEFAULT","DEFAULTS","DEFER","DEFINE","DEFINITION","DELETE","DELETING","DENSE_RANK","DENSERANK","DESC","DESCRIBE","DESCRIPTOR","DETACH","DETERMINISTIC","DIAGNOSTICS","DISABLE","DISALLOW","DISCONNECT","DISTINCT","DO","DOCUMENT","DROP","DYNAMIC","EACH","ELSE","ELSEIF","EMPTY","ENABLE","ENCODING","ENCRYPTION","END","END-EXEC","ENDING","ENFORCED","ERROR","ESCAPE","EVERY","EXCEPT","EXCEPTION","EXCLUDING","EXCLUSIVE","EXECUTE","EXISTS","EXIT","EXTEND","EXTERNAL","EXTRACT","FALSE","FENCED","FETCH","FIELDPROC","FILE","FINAL","FIRST_VALUE","FOR","FOREIGN","FORMAT","FREE","FREEPAGE","FROM","FULL","FUNCTION","GBPCACHE","GENERAL","GENERATED","GET","GLOBAL","GO","GOTO","GRANT","GROUP","HANDLER","HASH","HASH_ROW","HASHED_VALUE","HAVING","HINT","HOLD","HOUR","HOURS","IDENTITY","IF","IGNORE","IMMEDIATE","IMPLICITLY","IN","INCLUDE","INCLUDING","INCLUSIVE","INCREMENT","INDEX","INDEXBP","INDICATOR","INF","INFINITY","INHERIT","INLINE","INNER","INOUT","INSENSITIVE","INSERT","INSERTING","INTEGRITY","INTERPRET","INTERSECT","INTO","IS","ISNULL","ISOLATION","ITERATE","JAVA","JOIN","JSON","JSON_ARRAY","JSON_ARRAYAGG","JSON_EXISTS","JSON_OBJECT","JSON_OBJECTAGG","JSON_QUERY","JSON_TABLE","JSON_VALUE","KEEP","KEY","KEYS","LABEL","LAG","LANGUAGE","LAST_VALUE","LATERAL","LEAD","LEAVE","LEFT","LEVEL2","LIKE","LIMIT","LINKTYPE","LISTAGG","LOCAL","LOCALDATE","LOCALTIME","LOCALTIMESTAMP","LOCATION","LOCATOR","LOCK","LOCKSIZE","LOG","LOGGED","LOOP","MAINTAINED","MASK","MATCHED","MATERIALIZED","MAXVALUE","MERGE","MICROSECOND","MICROSECONDS","MINPCTUSED","MINUTE","MINUTES","MINVALUE","MIRROR","MIXED","MODE","MODIFIES","MONTH","MONTHS","NAMESPACE","NAN","NATIONAL","NCHAR","NCLOB","NESTED","NEW","NEW_TABLE","NEXTVAL","NO","NOCACHE","NOCYCLE","NODENAME","NODENUMBER","NOMAXVALUE","NOMINVALUE","NONE","NOORDER","NORMALIZED","NOT","NOTNULL","NTH_VALUE","NTILE","NULL","NULLS","NVARCHAR","OBID","OBJECT","OF","OFF","OFFSET","OLD","OLD_TABLE","OMIT","ON","ONLY","OPEN","OPTIMIZE","OPTION","OR","ORDER","ORDINALITY","ORGANIZE","OUT","OUTER","OVER","OVERLAY","OVERRIDING","PACKAGE","PADDED","PAGE","PAGESIZE","PARAMETER","PART","PARTITION","PARTITIONED","PARTITIONING","PARTITIONS","PASSING","PASSWORD","PATH","PCTFREE","PERCENT_RANK","PERCENTILE_CONT","PERCENTILE_DISC","PERIOD","PERMISSION","PIECESIZE","PIPE","PLAN","POSITION","PREPARE","PREVVAL","PRIMARY","PRIOR","PRIQTY","PRIVILEGES","PROCEDURE","PROGRAM","PROGRAMID","QUERY","RANGE","RANK","RATIO_TO_REPORT","RCDFMT","READ","READS","RECOVERY","REFERENCES","REFERENCING","REFRESH","REGEXP_LIKE","RELEASE","RENAME","REPEAT","RESET","RESIGNAL","RESTART","RESULT","RESULT_SET_LOCATOR","RETURN","RETURNING","RETURNS","REVOKE","RID","RIGHT","ROLLBACK","ROLLUP","ROUTINE","ROW","ROW_NUMBER","ROWNUMBER","ROWS","RRN","RUN","SAVEPOINT","SBCS","SCALAR","SCHEMA","SCRATCHPAD","SCROLL","SEARCH","SECOND","SECONDS","SECQTY","SECURED","SELECT","SENSITIVE","SEQUENCE","SESSION","SESSION_USER","SET","SIGNAL","SIMPLE","SKIP","SNAN","SOME","SOURCE","SPECIFIC","SQL","SQLID","SQLIND_DEFAULT","SQLIND_UNASSIGNED","STACKED","START","STARTING","STATEMENT","STATIC","STOGROUP","SUBSTRING","SUMMARY","SYNONYM","SYSTEM_TIME","SYSTEM_USER","TABLE","TABLESPACE","TABLESPACES","TAG","THEN","THREADSAFE","TO","TRANSACTION","TRANSFER","TRIGGER","TRIM","TRIM_ARRAY","TRUE","TRUNCATE","TRY_CAST","TYPE","UNDO","UNION","UNIQUE","UNIT","UNKNOWN","UNNEST","UNTIL","UPDATE","UPDATING","URI","USAGE","USE","USER","USERID","USING","VALUE","VALUES","VARIABLE","VARIANT","VCAT","VERSION","VERSIONING","VIEW","VOLATILE","WAIT","WHEN","WHENEVER","WHERE","WHILE","WITH","WITHIN","WITHOUT","WRAPPED","WRAPPER","WRITE","WRKSTNNAME","XMLAGG","XMLATTRIBUTES","XMLCAST","XMLCOMMENT","XMLCONCAT","XMLDOCUMENT","XMLELEMENT","XMLFOREST","XMLGROUP","XMLNAMESPACES","XMLPARSE","XMLPI","XMLROW","XMLSERIALIZE","XMLTABLE","XMLTEXT","XMLVALIDATE","XSLTRANSFORM","XSROBJECT","YEAR","YEARS","YES","ZONE"],bK=["ARRAY","BIGINT","BINARY","BIT","BLOB","BOOLEAN","CCSID","CHAR","CHARACTER","CLOB","DATA","DATALINK","DATE","DBCLOB","DECFLOAT","DECIMAL","DEC","DOUBLE","DOUBLE PRECISION","FLOAT","GRAPHIC","INT","INTEGER","LONG","NUMERIC","REAL","ROWID","SMALLINT","TIME","TIMESTAMP","VARBINARY","VARCHAR","VARGRAPHIC","XML"]});var zLe,jLe,wK,Mw,KLe,JLe,QLe,ZLe,TA,Uw=G(()=>{qt();OK();yK();zLe=v(["SELECT [ALL | DISTINCT]"]),jLe=v(["WITH [RECURSIVE]","INTO","FROM","WHERE","GROUP BY","HAVING","PARTITION BY","ORDER [SIBLINGS] BY [INPUT SEQUENCE]","LIMIT","OFFSET","FETCH {FIRST | NEXT}","FOR UPDATE [OF]","FOR READ ONLY","OPTIMIZE FOR","INSERT INTO","VALUES","SET","MERGE INTO","WHEN [NOT] MATCHED [THEN]","UPDATE SET","DELETE","INSERT","FOR SYSTEM NAME"]),wK=v(["CREATE [OR REPLACE] TABLE"]),Mw=v(["CREATE [OR REPLACE] [RECURSIVE] VIEW","UPDATE","WHERE CURRENT OF","WITH {NC | RR | RS | CS | UR}","DELETE FROM","DROP TABLE","ALTER TABLE","ADD [COLUMN]","ALTER [COLUMN]","DROP [COLUMN]","SET DATA TYPE","SET {GENERATED ALWAYS | GENERATED BY DEFAULT}","SET NOT NULL","SET {NOT HIDDEN | IMPLICITLY HIDDEN}","SET FIELDPROC","DROP {DEFAULT | NOT NULL | GENERATED | IDENTITY | ROW CHANGE TIMESTAMP | FIELDPROC}","TRUNCATE [TABLE]","SET [CURRENT] SCHEMA","SET CURRENT_SCHEMA","ALLOCATE CURSOR","ALLOCATE [SQL] DESCRIPTOR [LOCAL | GLOBAL] SQL","ALTER [SPECIFIC] {FUNCTION | PROCEDURE}","ALTER {MASK | PERMISSION | SEQUENCE | TRIGGER}","ASSOCIATE [RESULT SET] {LOCATOR | LOCATORS}","BEGIN DECLARE SECTION","CALL","CLOSE","COMMENT ON {ALIAS | COLUMN | CONSTRAINT | INDEX | MASK | PACKAGE | PARAMETER | PERMISSION | SEQUENCE | TABLE | TRIGGER | VARIABLE | XSROBJECT}","COMMENT ON [SPECIFIC] {FUNCTION | PROCEDURE | ROUTINE}","COMMENT ON PARAMETER SPECIFIC {FUNCTION | PROCEDURE | ROUTINE}","COMMENT ON [TABLE FUNCTION] RETURN COLUMN","COMMENT ON [TABLE FUNCTION] RETURN COLUMN SPECIFIC [PROCEDURE | ROUTINE]","COMMIT [WORK] [HOLD]","CONNECT [TO | RESET] USER","CREATE [OR REPLACE] {ALIAS | FUNCTION | MASK | PERMISSION | PROCEDURE | SEQUENCE | TRIGGER | VARIABLE}","CREATE [ENCODED VECTOR] INDEX","CREATE UNIQUE [WHERE NOT NULL] INDEX","CREATE SCHEMA","CREATE TYPE","DEALLOCATE [SQL] DESCRIPTOR [LOCAL | GLOBAL]","DECLARE CURSOR","DECLARE GLOBAL TEMPORARY TABLE","DECLARE","DESCRIBE CURSOR","DESCRIBE INPUT","DESCRIBE [OUTPUT]","DESCRIBE {PROCEDURE | ROUTINE}","DESCRIBE TABLE","DISCONNECT ALL [SQL]","DISCONNECT [CURRENT]","DROP {ALIAS | INDEX | MASK | PACKAGE | PERMISSION | SCHEMA | SEQUENCE | TABLE | TYPE | VARIABLE | XSROBJECT} [IF EXISTS]","DROP [SPECIFIC] {FUNCTION | PROCEDURE | ROUTINE} [IF EXISTS]","END DECLARE SECTION","EXECUTE [IMMEDIATE]","FREE LOCATOR","GET [SQL] DESCRIPTOR [LOCAL | GLOBAL]","GET [CURRENT | STACKED] DIAGNOSTICS","GRANT {ALL [PRIVILEGES] | ALTER | EXECUTE} ON {FUNCTION | PROCEDURE | ROUTINE | PACKAGE | SCHEMA | SEQUENCE | TABLE | TYPE | VARIABLE | XSROBJECT}","HOLD LOCATOR","INCLUDE","LABEL ON {ALIAS | COLUMN | CONSTRAINT | INDEX | MASK | PACKAGE | PERMISSION | SEQUENCE | TABLE | TRIGGER | VARIABLE | XSROBJECT}","LABEL ON [SPECIFIC] {FUNCTION | PROCEDURE | ROUTINE}","LOCK TABLE","OPEN","PREPARE","REFRESH TABLE","RELEASE","RELEASE [TO] SAVEPOINT","RENAME [TABLE | INDEX] TO","REVOKE {ALL [PRIVILEGES] | ALTER | EXECUTE} ON {FUNCTION | PROCEDURE | ROUTINE | PACKAGE | SCHEMA | SEQUENCE | TABLE | TYPE | VARIABLE | XSROBJECT}","ROLLBACK [WORK] [HOLD | TO SAVEPOINT]","SAVEPOINT","SET CONNECTION","SET CURRENT {DEBUG MODE | DECFLOAT ROUNDING MODE | DEGREE | IMPLICIT XMLPARSE OPTION | TEMPORAL SYSTEM_TIME}","SET [SQL] DESCRIPTOR [LOCAL | GLOBAL]","SET ENCRYPTION PASSWORD","SET OPTION","SET {[CURRENT [FUNCTION]] PATH | CURRENT_PATH}","SET RESULT SETS [WITH RETURN [TO CALLER | TO CLIENT]]","SET SESSION AUTHORIZATION","SET SESSION_USER","SET TRANSACTION","SIGNAL SQLSTATE [VALUE]","TAG","TRANSFER OWNERSHIP OF","WHENEVER {NOT FOUND | SQLERROR | SQLWARNING}"]),KLe=v(["UNION [ALL]","EXCEPT [ALL]","INTERSECT [ALL]"]),JLe=v(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","[LEFT | RIGHT] EXCEPTION JOIN","{INNER | CROSS} JOIN"]),QLe=v(["ON DELETE","ON UPDATE","SET NULL","{ROWS | RANGE} BETWEEN"]),ZLe=v([]),TA={name:"db2i",tokenizerOptions:{reservedSelect:zLe,reservedClauses:[...jLe,...wK,...Mw],reservedSetOperations:KLe,reservedJoins:JLe,reservedKeywordPhrases:QLe,reservedDataTypePhrases:ZLe,reservedKeywords:CK,reservedDataTypes:bK,reservedFunctionNames:NK,nestedBlockComments:!0,extraParens:["[]"],stringTypes:[{quote:"''-qq",prefixes:["G","N"]},{quote:"''-raw",prefixes:["X","BX","GX","UX"],requirePrefix:!0}],identTypes:['""-qq'],identChars:{first:"@#$",rest:"@#$"},paramTypes:{positional:!0,named:[":"]},paramChars:{first:"@#$",rest:"@#$"},operators:["**","\xAC=","\xAC>","\xAC<","!>","!<","||","=>"]},formatOptions:{onelineClauses:[...wK,...Mw],tabularOnelineClauses:Mw}}});var LK,DK=G(()=>{LK=["ABS","ACOS","ADD","ADD_PARQUET_KEY","AGE","AGGREGATE","ALIAS","ALL_PROFILING_OUTPUT","ANY_VALUE","APPLY","APPROX_COUNT_DISTINCT","APPROX_QUANTILE","ARBITRARY","ARGMAX","ARGMIN","ARG_MAX","ARG_MAX_NULL","ARG_MIN","ARG_MIN_NULL","ARRAY_AGG","ARRAY_AGGR","ARRAY_AGGREGATE","ARRAY_APPEND","ARRAY_APPLY","ARRAY_CAT","ARRAY_CONCAT","ARRAY_CONTAINS","ARRAY_COSINE_SIMILARITY","ARRAY_CROSS_PRODUCT","ARRAY_DISTANCE","ARRAY_DISTINCT","ARRAY_DOT_PRODUCT","ARRAY_EXTRACT","ARRAY_FILTER","ARRAY_GRADE_UP","ARRAY_HAS","ARRAY_HAS_ALL","ARRAY_HAS_ANY","ARRAY_INDEXOF","ARRAY_INNER_PRODUCT","ARRAY_INTERSECT","ARRAY_LENGTH","ARRAY_POP_BACK","ARRAY_POP_FRONT","ARRAY_POSITION","ARRAY_PREPEND","ARRAY_PUSH_BACK","ARRAY_PUSH_FRONT","ARRAY_REDUCE","ARRAY_RESIZE","ARRAY_REVERSE","ARRAY_REVERSE_SORT","ARRAY_SELECT","ARRAY_SLICE","ARRAY_SORT","ARRAY_TO_JSON","ARRAY_TO_STRING","ARRAY_TRANSFORM","ARRAY_UNIQUE","ARRAY_VALUE","ARRAY_WHERE","ARRAY_ZIP","ARROW_SCAN","ARROW_SCAN_DUMB","ASCII","ASIN","ATAN","ATAN2","AVG","BASE64","BIN","BITSTRING","BITSTRING_AGG","BIT_AND","BIT_COUNT","BIT_LENGTH","BIT_OR","BIT_POSITION","BIT_XOR","BOOL_AND","BOOL_OR","CARDINALITY","CBRT","CEIL","CEILING","CENTURY","CHECKPOINT","CHR","COLLATIONS","COL_DESCRIPTION","COMBINE","CONCAT","CONCAT_WS","CONSTANT_OR_NULL","CONTAINS","COPY_DATABASE","CORR","COS","COT","COUNT","COUNT_IF","COUNT_STAR","COVAR_POP","COVAR_SAMP","CREATE_SORT_KEY","CURRENT_CATALOG","CURRENT_DATABASE","CURRENT_DATE","CURRENT_LOCALTIME","CURRENT_LOCALTIMESTAMP","CURRENT_QUERY","CURRENT_ROLE","CURRENT_SCHEMA","CURRENT_SCHEMAS","CURRENT_SETTING","CURRENT_USER","CURRVAL","DAMERAU_LEVENSHTEIN","DATABASE_LIST","DATABASE_SIZE","DATEDIFF","DATEPART","DATESUB","DATETRUNC","DATE_ADD","DATE_DIFF","DATE_PART","DATE_SUB","DATE_TRUNC","DAY","DAYNAME","DAYOFMONTH","DAYOFWEEK","DAYOFYEAR","DECADE","DECODE","DEGREES","DISABLE_CHECKPOINT_ON_SHUTDOWN","DISABLE_OBJECT_CACHE","DISABLE_OPTIMIZER","DISABLE_PRINT_PROGRESS_BAR","DISABLE_PROFILE","DISABLE_PROFILING","DISABLE_PROGRESS_BAR","DISABLE_VERIFICATION","DISABLE_VERIFY_EXTERNAL","DISABLE_VERIFY_FETCH_ROW","DISABLE_VERIFY_PARALLELISM","DISABLE_VERIFY_SERIALIZER","DIVIDE","DUCKDB_COLUMNS","DUCKDB_CONSTRAINTS","DUCKDB_DATABASES","DUCKDB_DEPENDENCIES","DUCKDB_EXTENSIONS","DUCKDB_FUNCTIONS","DUCKDB_INDEXES","DUCKDB_KEYWORDS","DUCKDB_MEMORY","DUCKDB_OPTIMIZERS","DUCKDB_SCHEMAS","DUCKDB_SECRETS","DUCKDB_SEQUENCES","DUCKDB_SETTINGS","DUCKDB_TABLES","DUCKDB_TEMPORARY_FILES","DUCKDB_TYPES","DUCKDB_VIEWS","EDIT","EDITDIST3","ELEMENT_AT","ENABLE_CHECKPOINT_ON_SHUTDOWN","ENABLE_OBJECT_CACHE","ENABLE_OPTIMIZER","ENABLE_PRINT_PROGRESS_BAR","ENABLE_PROFILE","ENABLE_PROFILING","ENABLE_PROGRESS_BAR","ENABLE_VERIFICATION","ENCODE","ENDS_WITH","ENTROPY","ENUM_CODE","ENUM_FIRST","ENUM_LAST","ENUM_RANGE","ENUM_RANGE_BOUNDARY","EPOCH","EPOCH_MS","EPOCH_NS","EPOCH_US","ERA","ERROR","EVEN","EXP","FACTORIAL","FAVG","FDIV","FILTER","FINALIZE","FIRST","FLATTEN","FLOOR","FMOD","FORCE_CHECKPOINT","FORMAT","FORMATREADABLEDECIMALSIZE","FORMATREADABLESIZE","FORMAT_BYTES","FORMAT_PG_TYPE","FORMAT_TYPE","FROM_BASE64","FROM_BINARY","FROM_HEX","FROM_JSON","FROM_JSON_STRICT","FSUM","FUNCTIONS","GAMMA","GCD","GENERATE_SERIES","GENERATE_SUBSCRIPTS","GEN_RANDOM_UUID","GEOMEAN","GEOMETRIC_MEAN","GETENV","GET_BIT","GET_BLOCK_SIZE","GET_CURRENT_TIME","GET_CURRENT_TIMESTAMP","GLOB","GRADE_UP","GREATEST","GREATEST_COMMON_DIVISOR","GROUP_CONCAT","HAMMING","HASH","HAS_ANY_COLUMN_PRIVILEGE","HAS_COLUMN_PRIVILEGE","HAS_DATABASE_PRIVILEGE","HAS_FOREIGN_DATA_WRAPPER_PRIVILEGE","HAS_FUNCTION_PRIVILEGE","HAS_LANGUAGE_PRIVILEGE","HAS_SCHEMA_PRIVILEGE","HAS_SEQUENCE_PRIVILEGE","HAS_SERVER_PRIVILEGE","HAS_TABLESPACE_PRIVILEGE","HAS_TABLE_PRIVILEGE","HEX","HISTOGRAM","HOUR","ICU_CALENDAR_NAMES","ICU_SORT_KEY","ILIKE_ESCAPE","IMPORT_DATABASE","INDEX_SCAN","INET_CLIENT_ADDR","INET_CLIENT_PORT","INET_SERVER_ADDR","INET_SERVER_PORT","INSTR","IN_SEARCH_PATH","ISFINITE","ISINF","ISNAN","ISODOW","ISOYEAR","JACCARD","JARO_SIMILARITY","JARO_WINKLER_SIMILARITY","JSON_ARRAY","JSON_ARRAY_LENGTH","JSON_CONTAINS","JSON_DESERIALIZE_SQL","JSON_EXECUTE_SERIALIZED_SQL","JSON_EXTRACT","JSON_EXTRACT_PATH","JSON_EXTRACT_PATH_TEXT","JSON_EXTRACT_STRING","JSON_GROUP_ARRAY","JSON_GROUP_OBJECT","JSON_GROUP_STRUCTURE","JSON_KEYS","JSON_MERGE_PATCH","JSON_OBJECT","JSON_QUOTE","JSON_SERIALIZE_PLAN","JSON_SERIALIZE_SQL","JSON_STRUCTURE","JSON_TRANSFORM","JSON_TRANSFORM_STRICT","JSON_TYPE","JSON_VALID","JULIAN","KAHAN_SUM","KURTOSIS","KURTOSIS_POP","LAST","LAST_DAY","LCASE","LCM","LEAST","LEAST_COMMON_MULTIPLE","LEFT","LEFT_GRAPHEME","LEN","LENGTH","LENGTH_GRAPHEME","LEVENSHTEIN","LGAMMA","LIKE_ESCAPE","LIST","LISTAGG","LIST_AGGR","LIST_AGGREGATE","LIST_ANY_VALUE","LIST_APPEND","LIST_APPLY","LIST_APPROX_COUNT_DISTINCT","LIST_AVG","LIST_BIT_AND","LIST_BIT_OR","LIST_BIT_XOR","LIST_BOOL_AND","LIST_BOOL_OR","LIST_CAT","LIST_CONCAT","LIST_CONTAINS","LIST_COSINE_SIMILARITY","LIST_COUNT","LIST_DISTANCE","LIST_DISTINCT","LIST_DOT_PRODUCT","LIST_ELEMENT","LIST_ENTROPY","LIST_EXTRACT","LIST_FILTER","LIST_FIRST","LIST_GRADE_UP","LIST_HAS","LIST_HAS_ALL","LIST_HAS_ANY","LIST_HISTOGRAM","LIST_INDEXOF","LIST_INNER_PRODUCT","LIST_INTERSECT","LIST_KURTOSIS","LIST_KURTOSIS_POP","LIST_LAST","LIST_MAD","LIST_MAX","LIST_MEDIAN","LIST_MIN","LIST_MODE","LIST_PACK","LIST_POSITION","LIST_PREPEND","LIST_PRODUCT","LIST_REDUCE","LIST_RESIZE","LIST_REVERSE","LIST_REVERSE_SORT","LIST_SELECT","LIST_SEM","LIST_SKEWNESS","LIST_SLICE","LIST_SORT","LIST_STDDEV_POP","LIST_STDDEV_SAMP","LIST_STRING_AGG","LIST_SUM","LIST_TRANSFORM","LIST_UNIQUE","LIST_VALUE","LIST_VAR_POP","LIST_VAR_SAMP","LIST_WHERE","LIST_ZIP","LN","LOG","LOG10","LOG2","LOWER","LPAD","LSMODE","LTRIM","MAD","MAKE_DATE","MAKE_TIME","MAKE_TIMESTAMP","MAKE_TIMESTAMPTZ","MAP","MAP_CONCAT","MAP_ENTRIES","MAP_EXTRACT","MAP_FROM_ENTRIES","MAP_KEYS","MAP_VALUES","MAX","MAX_BY","MD5","MD5_NUMBER","MD5_NUMBER_LOWER","MD5_NUMBER_UPPER","MEAN","MEDIAN","METADATA_INFO","MICROSECOND","MILLENNIUM","MILLISECOND","MIN","MINUTE","MIN_BY","MISMATCHES","MOD","MODE","MONTH","MONTHNAME","MULTIPLY","NEXTAFTER","NEXTVAL","NFC_NORMALIZE","NOT_ILIKE_ESCAPE","NOT_LIKE_ESCAPE","NOW","NULLIF","OBJ_DESCRIPTION","OCTET_LENGTH","ORD","PARQUET_FILE_METADATA","PARQUET_KV_METADATA","PARQUET_METADATA","PARQUET_SCAN","PARQUET_SCHEMA","PARSE_DIRNAME","PARSE_DIRPATH","PARSE_FILENAME","PARSE_PATH","PG_COLLATION_IS_VISIBLE","PG_CONF_LOAD_TIME","PG_CONVERSION_IS_VISIBLE","PG_FUNCTION_IS_VISIBLE","PG_GET_CONSTRAINTDEF","PG_GET_EXPR","PG_GET_VIEWDEF","PG_HAS_ROLE","PG_IS_OTHER_TEMP_SCHEMA","PG_MY_TEMP_SCHEMA","PG_OPCLASS_IS_VISIBLE","PG_OPERATOR_IS_VISIBLE","PG_OPFAMILY_IS_VISIBLE","PG_POSTMASTER_START_TIME","PG_SIZE_PRETTY","PG_TABLE_IS_VISIBLE","PG_TIMEZONE_NAMES","PG_TS_CONFIG_IS_VISIBLE","PG_TS_DICT_IS_VISIBLE","PG_TS_PARSER_IS_VISIBLE","PG_TS_TEMPLATE_IS_VISIBLE","PG_TYPEOF","PG_TYPE_IS_VISIBLE","PI","PLATFORM","POSITION","POW","POWER","PRAGMA_COLLATIONS","PRAGMA_DATABASE_SIZE","PRAGMA_METADATA_INFO","PRAGMA_PLATFORM","PRAGMA_SHOW","PRAGMA_STORAGE_INFO","PRAGMA_TABLE_INFO","PRAGMA_USER_AGENT","PRAGMA_VERSION","PREFIX","PRINTF","PRODUCT","QUANTILE","QUANTILE_CONT","QUANTILE_DISC","QUARTER","RADIANS","RANDOM","RANGE","READFILE","READ_BLOB","READ_CSV","READ_CSV_AUTO","READ_JSON","READ_JSON_AUTO","READ_JSON_OBJECTS","READ_JSON_OBJECTS_AUTO","READ_NDJSON","READ_NDJSON_AUTO","READ_NDJSON_OBJECTS","READ_PARQUET","READ_TEXT","REDUCE","REGEXP_ESCAPE","REGEXP_EXTRACT","REGEXP_EXTRACT_ALL","REGEXP_FULL_MATCH","REGEXP_MATCHES","REGEXP_REPLACE","REGEXP_SPLIT_TO_ARRAY","REGEXP_SPLIT_TO_TABLE","REGR_AVGX","REGR_AVGY","REGR_COUNT","REGR_INTERCEPT","REGR_R2","REGR_SLOPE","REGR_SXX","REGR_SXY","REGR_SYY","REPEAT","REPEAT_ROW","REPLACE","RESERVOIR_QUANTILE","REVERSE","RIGHT","RIGHT_GRAPHEME","ROUND","ROUNDBANKERS","ROUND_EVEN","ROW","ROW_TO_JSON","RPAD","RTRIM","SECOND","SEM","SEQ_SCAN","SESSION_USER","SETSEED","SET_BIT","SHA256","SHA3","SHELL_ADD_SCHEMA","SHELL_ESCAPE_CRNL","SHELL_IDQUOTE","SHELL_MODULE_SCHEMA","SHELL_PUTSNL","SHOBJ_DESCRIPTION","SHOW","SHOW_DATABASES","SHOW_TABLES","SHOW_TABLES_EXPANDED","SIGN","SIGNBIT","SIN","SKEWNESS","SNIFF_CSV","SPLIT","SPLIT_PART","SQL_AUTO_COMPLETE","SQRT","STARTS_WITH","STATS","STDDEV","STDDEV_POP","STDDEV_SAMP","STORAGE_INFO","STRFTIME","STRING_AGG","STRING_SPLIT","STRING_SPLIT_REGEX","STRING_TO_ARRAY","STRIP_ACCENTS","STRLEN","STRPOS","STRPTIME","STRUCT_EXTRACT","STRUCT_INSERT","STRUCT_PACK","STR_SPLIT","STR_SPLIT_REGEX","SUBSTR","SUBSTRING","SUBSTRING_GRAPHEME","SUBTRACT","SUFFIX","SUM","SUMKAHAN","SUMMARY","SUM_NO_OVERFLOW","TABLE_INFO","TAN","TEST_ALL_TYPES","TEST_VECTOR_TYPES","TIMEZONE","TIMEZONE_HOUR","TIMEZONE_MINUTE","TIME_BUCKET","TODAY","TO_BASE","TO_BASE64","TO_BINARY","TO_CENTURIES","TO_DAYS","TO_DECADES","TO_HEX","TO_HOURS","TO_JSON","TO_MICROSECONDS","TO_MILLENNIA","TO_MILLISECONDS","TO_MINUTES","TO_MONTHS","TO_SECONDS","TO_TIMESTAMP","TO_WEEKS","TO_YEARS","TRANSACTION_TIMESTAMP","TRANSLATE","TRIM","TRUNC","TRY_STRPTIME","TXID_CURRENT","TYPEOF","UCASE","UNBIN","UNHEX","UNICODE","UNION_EXTRACT","UNION_TAG","UNION_VALUE","UNNEST","UNPIVOT_LIST","UPPER","USER","USER_AGENT","UUID","VARIANCE","VAR_POP","VAR_SAMP","VECTOR_TYPE","VERIFY_EXTERNAL","VERIFY_FETCH_ROW","VERIFY_PARALLELISM","VERIFY_SERIALIZER","VERSION","WEEK","WEEKDAY","WEEKOFYEAR","WHICH_SECRET","WRITEFILE","XOR","YEAR","YEARWEEK","CAST","COALESCE","RANK","ROW_NUMBER"]});var PK,xK,vK=G(()=>{PK=["ALL","ANALYSE","ANALYZE","AND","ANY","AS","ASC","ATTACH","ASYMMETRIC","BOTH","CASE","CAST","CHECK","COLLATE","COLUMN","CONSTRAINT","CREATE","DEFAULT","DEFERRABLE","DESC","DESCRIBE","DETACH","DISTINCT","DO","ELSE","END","EXCEPT","FALSE","FETCH","FOR","FOREIGN","FROM","GRANT","GROUP","HAVING","IN","INITIALLY","INTERSECT","INTO","IS","LATERAL","LEADING","LIMIT","NOT","NULL","OFFSET","ON","ONLY","OR","ORDER","PIVOT","PIVOT_LONGER","PIVOT_WIDER","PLACING","PRIMARY","REFERENCES","RETURNING","SELECT","SHOW","SOME","SUMMARIZE","SYMMETRIC","TABLE","THEN","TO","TRAILING","TRUE","UNION","UNIQUE","UNPIVOT","USING","VARIADIC","WHEN","WHERE","WINDOW","WITH"],xK=["ARRAY","BIGINT","BINARY","BIT","BITSTRING","BLOB","BOOL","BOOLEAN","BPCHAR","BYTEA","CHAR","DATE","DATETIME","DEC","DECIMAL","DOUBLE","ENUM","FLOAT","FLOAT4","FLOAT8","GUID","HUGEINT","INET","INT","INT1","INT128","INT16","INT2","INT32","INT4","INT64","INT8","INTEGER","INTEGRAL","INTERVAL","JSON","LIST","LOGICAL","LONG","MAP","NUMERIC","NVARCHAR","OID","REAL","ROW","SHORT","SIGNED","SMALLINT","STRING","STRUCT","TEXT","TIME","TIMESTAMP_MS","TIMESTAMP_NS","TIMESTAMP_S","TIMESTAMP_US","TIMESTAMP","TIMESTAMPTZ","TIMETZ","TINYINT","UBIGINT","UHUGEINT","UINT128","UINT16","UINT32","UINT64","UINT8","UINTEGER","UNION","USMALLINT","UTINYINT","UUID","VARBINARY","VARCHAR"]});var eDe,tDe,MK,Bw,nDe,rDe,iDe,sDe,SA,Fw=G(()=>{qt();DK();vK();eDe=v(["SELECT [ALL | DISTINCT]"]),tDe=v(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY [ALL]","HAVING","WINDOW","PARTITION BY","ORDER BY [ALL]","LIMIT","OFFSET","USING SAMPLE","QUALIFY","INSERT [OR REPLACE] INTO","VALUES","DEFAULT VALUES","SET","RETURNING"]),MK=v(["CREATE [OR REPLACE] [TEMPORARY | TEMP] TABLE [IF NOT EXISTS]"]),Bw=v(["UPDATE","ON CONFLICT","DELETE FROM","DROP TABLE [IF EXISTS]","TRUNCATE","ALTER TABLE","ADD [COLUMN] [IF NOT EXISTS]","ADD PRIMARY KEY","DROP [COLUMN] [IF EXISTS]","ALTER [COLUMN]","RENAME [COLUMN]","RENAME TO","SET [DATA] TYPE","{SET | DROP} DEFAULT","{SET | DROP} NOT NULL","CREATE [OR REPLACE] [TEMPORARY | TEMP] {MACRO | FUNCTION}","DROP MACRO [TABLE] [IF EXISTS]","DROP FUNCTION [IF EXISTS]","CREATE [UNIQUE] INDEX [IF NOT EXISTS]","DROP INDEX [IF EXISTS]","CREATE [OR REPLACE] SCHEMA [IF NOT EXISTS]","DROP SCHEMA [IF EXISTS]","CREATE [OR REPLACE] [PERSISTENT | TEMPORARY] SECRET [IF NOT EXISTS]","DROP [PERSISTENT | TEMPORARY] SECRET [IF EXISTS]","CREATE [OR REPLACE] [TEMPORARY | TEMP] SEQUENCE","DROP SEQUENCE [IF EXISTS]","CREATE [OR REPLACE] [TEMPORARY | TEMP] VIEW [IF NOT EXISTS]","DROP VIEW [IF EXISTS]","ALTER VIEW","CREATE TYPE","DROP TYPE [IF EXISTS]","ANALYZE","ATTACH [DATABASE] [IF NOT EXISTS]","DETACH [DATABASE] [IF EXISTS]","CALL","[FORCE] CHECKPOINT","COMMENT ON [TABLE | COLUMN | VIEW | INDEX | SEQUENCE | TYPE | MACRO | MACRO TABLE]","COPY [FROM DATABASE]","DESCRIBE","EXPORT DATABASE","IMPORT DATABASE","INSTALL","LOAD","PIVOT","PIVOT_WIDER","UNPIVOT","EXPLAIN [ANALYZE]","SET {LOCAL | SESSION | GLOBAL}","RESET [LOCAL | SESSION | GLOBAL]","{SET | RESET} VARIABLE","SUMMARIZE","BEGIN TRANSACTION","ROLLBACK","COMMIT","ABORT","USE","VACUUM [ANALYZE]","PREPARE","EXECUTE","DEALLOCATE [PREPARE]"]),nDe=v(["UNION [ALL | BY NAME]","EXCEPT [ALL]","INTERSECT [ALL]"]),rDe=v(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","{NATURAL | ASOF} [INNER] JOIN","{NATURAL | ASOF} {LEFT | RIGHT | FULL} [OUTER] JOIN","POSITIONAL JOIN","ANTI JOIN","SEMI JOIN"]),iDe=v(["{ROWS | RANGE | GROUPS} BETWEEN","SIMILAR TO","IS [NOT] DISTINCT FROM"]),sDe=v(["TIMESTAMP WITH TIME ZONE"]),SA={name:"duckdb",tokenizerOptions:{reservedSelect:eDe,reservedClauses:[...tDe,...MK,...Bw],reservedSetOperations:nDe,reservedJoins:rDe,reservedKeywordPhrases:iDe,reservedDataTypePhrases:sDe,supportsXor:!0,reservedKeywords:PK,reservedDataTypes:xK,reservedFunctionNames:LK,nestedBlockComments:!0,extraParens:["[]","{}"],underscoresInNumbers:!0,stringTypes:["$$","''-qq",{quote:"''-qq-bs",prefixes:["E"],requirePrefix:!0},{quote:"''-raw",prefixes:["B","X"],requirePrefix:!0}],identTypes:['""-qq'],identChars:{rest:"$"},paramTypes:{positional:!0,numbered:["$"],quoted:["$"]},operators:["//","%","**","^","!","&","|","~","<<",">>","::","==","->","->>",":",":=","=>","~~","!~~","~~*","!~~*","~~~","~","!~","~*","!~*","^@","||",">>=","<<="]},formatOptions:{alwaysDenseOperators:["::"],onelineClauses:[...MK,...Bw],tabularOnelineClauses:Bw}}});var UK,BK=G(()=>{UK=["ABS","ACOS","ASIN","ATAN","BIN","BROUND","CBRT","CEIL","CEILING","CONV","COS","DEGREES","EXP","FACTORIAL","FLOOR","GREATEST","HEX","LEAST","LN","LOG","LOG10","LOG2","NEGATIVE","PI","PMOD","POSITIVE","POW","POWER","RADIANS","RAND","ROUND","SHIFTLEFT","SHIFTRIGHT","SHIFTRIGHTUNSIGNED","SIGN","SIN","SQRT","TAN","UNHEX","WIDTH_BUCKET","ARRAY_CONTAINS","MAP_KEYS","MAP_VALUES","SIZE","SORT_ARRAY","BINARY","CAST","ADD_MONTHS","DATE","DATE_ADD","DATE_FORMAT","DATE_SUB","DATEDIFF","DAY","DAYNAME","DAYOFMONTH","DAYOFYEAR","EXTRACT","FROM_UNIXTIME","FROM_UTC_TIMESTAMP","HOUR","LAST_DAY","MINUTE","MONTH","MONTHS_BETWEEN","NEXT_DAY","QUARTER","SECOND","TIMESTAMP","TO_DATE","TO_UTC_TIMESTAMP","TRUNC","UNIX_TIMESTAMP","WEEKOFYEAR","YEAR","ASSERT_TRUE","COALESCE","IF","ISNOTNULL","ISNULL","NULLIF","NVL","ASCII","BASE64","CHARACTER_LENGTH","CHR","CONCAT","CONCAT_WS","CONTEXT_NGRAMS","DECODE","ELT","ENCODE","FIELD","FIND_IN_SET","FORMAT_NUMBER","GET_JSON_OBJECT","IN_FILE","INITCAP","INSTR","LCASE","LENGTH","LEVENSHTEIN","LOCATE","LOWER","LPAD","LTRIM","NGRAMS","OCTET_LENGTH","PARSE_URL","PRINTF","QUOTE","REGEXP_EXTRACT","REGEXP_REPLACE","REPEAT","REVERSE","RPAD","RTRIM","SENTENCES","SOUNDEX","SPACE","SPLIT","STR_TO_MAP","SUBSTR","SUBSTRING","TRANSLATE","TRIM","UCASE","UNBASE64","UPPER","MASK","MASK_FIRST_N","MASK_HASH","MASK_LAST_N","MASK_SHOW_FIRST_N","MASK_SHOW_LAST_N","AES_DECRYPT","AES_ENCRYPT","CRC32","CURRENT_DATABASE","CURRENT_USER","HASH","JAVA_METHOD","LOGGED_IN_USER","MD5","REFLECT","SHA","SHA1","SHA2","SURROGATE_KEY","VERSION","AVG","COLLECT_LIST","COLLECT_SET","CORR","COUNT","COVAR_POP","COVAR_SAMP","HISTOGRAM_NUMERIC","MAX","MIN","NTILE","PERCENTILE","PERCENTILE_APPROX","REGR_AVGX","REGR_AVGY","REGR_COUNT","REGR_INTERCEPT","REGR_R2","REGR_SLOPE","REGR_SXX","REGR_SXY","REGR_SYY","STDDEV_POP","STDDEV_SAMP","SUM","VAR_POP","VAR_SAMP","VARIANCE","EXPLODE","INLINE","JSON_TUPLE","PARSE_URL_TUPLE","POSEXPLODE","STACK","LEAD","LAG","FIRST_VALUE","LAST_VALUE","RANK","ROW_NUMBER","DENSE_RANK","CUME_DIST","PERCENT_RANK","NTILE"]});var FK,HK,GK=G(()=>{FK=["ADD","ADMIN","AFTER","ANALYZE","ARCHIVE","ASC","BEFORE","BUCKET","BUCKETS","CASCADE","CHANGE","CLUSTER","CLUSTERED","CLUSTERSTATUS","COLLECTION","COLUMNS","COMMENT","COMPACT","COMPACTIONS","COMPUTE","CONCATENATE","CONTINUE","DATA","DATABASES","DATETIME","DAY","DBPROPERTIES","DEFERRED","DEFINED","DELIMITED","DEPENDENCY","DESC","DIRECTORIES","DIRECTORY","DISABLE","DISTRIBUTE","ELEM_TYPE","ENABLE","ESCAPED","EXCLUSIVE","EXPLAIN","EXPORT","FIELDS","FILE","FILEFORMAT","FIRST","FORMAT","FORMATTED","FUNCTIONS","HOLD_DDLTIME","HOUR","IDXPROPERTIES","IGNORE","INDEX","INDEXES","INPATH","INPUTDRIVER","INPUTFORMAT","ITEMS","JAR","KEYS","KEY_TYPE","LIMIT","LINES","LOAD","LOCATION","LOCK","LOCKS","LOGICAL","LONG","MAPJOIN","MATERIALIZED","METADATA","MINUS","MINUTE","MONTH","MSCK","NOSCAN","NO_DROP","OFFLINE","OPTION","OUTPUTDRIVER","OUTPUTFORMAT","OVERWRITE","OWNER","PARTITIONED","PARTITIONS","PLUS","PRETTY","PRINCIPALS","PROTECTION","PURGE","READ","READONLY","REBUILD","RECORDREADER","RECORDWRITER","RELOAD","RENAME","REPAIR","REPLACE","REPLICATION","RESTRICT","REWRITE","ROLE","ROLES","SCHEMA","SCHEMAS","SECOND","SEMI","SERDE","SERDEPROPERTIES","SERVER","SETS","SHARED","SHOW","SHOW_DATABASE","SKEWED","SORT","SORTED","SSL","STATISTICS","STORED","STREAMTABLE","STRING","TABLES","TBLPROPERTIES","TEMPORARY","TERMINATED","TINYINT","TOUCH","TRANSACTIONS","UNARCHIVE","UNDO","UNIONTYPE","UNLOCK","UNSET","UNSIGNED","URI","USE","UTC","UTCTIMESTAMP","VALUE_TYPE","VIEW","WHILE","YEAR","AUTOCOMMIT","ISOLATION","LEVEL","OFFSET","SNAPSHOT","TRANSACTION","WORK","WRITE","ABORT","KEY","LAST","NORELY","NOVALIDATE","NULLS","RELY","VALIDATE","DETAIL","DOW","EXPRESSION","OPERATOR","QUARTER","SUMMARY","VECTORIZATION","WEEK","YEARS","MONTHS","WEEKS","DAYS","HOURS","MINUTES","SECONDS","TIMESTAMPTZ","ZONE","ALL","ALTER","AND","AS","AUTHORIZATION","BETWEEN","BOTH","BY","CASE","CAST","COLUMN","CONF","CREATE","CROSS","CUBE","CURRENT","CURRENT_DATE","CURRENT_TIMESTAMP","CURSOR","DATABASE","DELETE","DESCRIBE","DISTINCT","DROP","ELSE","END","EXCHANGE","EXISTS","EXTENDED","EXTERNAL","FALSE","FETCH","FOLLOWING","FOR","FROM","FULL","FUNCTION","GRANT","GROUP","GROUPING","HAVING","IF","IMPORT","IN","INNER","INSERT","INTERSECT","INTO","IS","JOIN","LATERAL","LEFT","LESS","LIKE","LOCAL","MACRO","MORE","NONE","NOT","NULL","OF","ON","OR","ORDER","OUT","OUTER","OVER","PARTIALSCAN","PARTITION","PERCENT","PRECEDING","PRESERVE","PROCEDURE","RANGE","READS","REDUCE","REVOKE","RIGHT","ROLLUP","ROW","ROWS","SELECT","SET","TABLE","TABLESAMPLE","THEN","TO","TRANSFORM","TRIGGER","TRUE","TRUNCATE","UNBOUNDED","UNION","UNIQUEJOIN","UPDATE","USER","USING","UTC_TMESTAMP","VALUES","WHEN","WHERE","WINDOW","WITH","COMMIT","ONLY","REGEXP","RLIKE","ROLLBACK","START","CACHE","CONSTRAINT","FOREIGN","PRIMARY","REFERENCES","DAYOFWEEK","EXTRACT","FLOOR","VIEWS","TIME","SYNC","TEXTFILE","SEQUENCEFILE","ORC","CSV","TSV","PARQUET","AVRO","RCFILE","JSONFILE","INPUTFORMAT","OUTPUTFORMAT"],HK=["ARRAY","BIGINT","BINARY","BOOLEAN","CHAR","DATE","DECIMAL","DOUBLE","FLOAT","INT","INTEGER","INTERVAL","MAP","NUMERIC","PRECISION","SMALLINT","STRUCT","TIMESTAMP","VARCHAR"]});var oDe,aDe,$K,Hw,lDe,cDe,uDe,dDe,RA,Gw=G(()=>{qt();BK();GK();oDe=v(["SELECT [ALL | DISTINCT]"]),aDe=v(["WITH","FROM","WHERE","GROUP BY","HAVING","WINDOW","PARTITION BY","ORDER BY","SORT BY","CLUSTER BY","DISTRIBUTE BY","LIMIT","INSERT INTO [TABLE]","VALUES","SET","MERGE INTO","WHEN [NOT] MATCHED [THEN]","UPDATE SET","INSERT [VALUES]","INSERT OVERWRITE [LOCAL] DIRECTORY","LOAD DATA [LOCAL] INPATH","[OVERWRITE] INTO TABLE"]),$K=v(["CREATE [TEMPORARY] [EXTERNAL] TABLE [IF NOT EXISTS]"]),Hw=v(["CREATE [MATERIALIZED] VIEW [IF NOT EXISTS]","UPDATE","DELETE FROM","DROP TABLE [IF EXISTS]","ALTER TABLE","RENAME TO","TRUNCATE [TABLE]","ALTER","CREATE","USE","DESCRIBE","DROP","FETCH","SHOW","STORED AS","STORED BY","ROW FORMAT"]),lDe=v(["UNION [ALL | DISTINCT]"]),cDe=v(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","LEFT SEMI JOIN"]),uDe=v(["{ROWS | RANGE} BETWEEN"]),dDe=v([]),RA={name:"hive",tokenizerOptions:{reservedSelect:oDe,reservedClauses:[...aDe,...$K,...Hw],reservedSetOperations:lDe,reservedJoins:cDe,reservedKeywordPhrases:uDe,reservedDataTypePhrases:dDe,reservedKeywords:FK,reservedDataTypes:HK,reservedFunctionNames:UK,extraParens:["[]"],stringTypes:['""-bs',"''-bs"],identTypes:["``"],variableTypes:[{quote:"{}",prefixes:["$"],requirePrefix:!0}],operators:["%","~","^","|","&","<=>","==","!","||"]},formatOptions:{onelineClauses:[...$K,...Hw],tabularOnelineClauses:Hw}}});function Oo(t){return t.map((e,n)=>{let r=t[n+1]||zi;if(ui.SET(e)&&r.text==="(")return Object.assign(Object.assign({},e),{type:Y.RESERVED_FUNCTION_NAME});let i=t[n-1]||zi;return ui.VALUES(e)&&i.text==="="?Object.assign(Object.assign({},e),{type:Y.RESERVED_FUNCTION_NAME}):e})}var jf=G(()=>{Yr()});var kK,WK,YK=G(()=>{kK=["ACCESSIBLE","ADD","ALL","ALTER","ANALYZE","AND","AS","ASC","ASENSITIVE","BEFORE","BETWEEN","BOTH","BY","CALL","CASCADE","CASE","CHANGE","CHECK","COLLATE","COLUMN","CONDITION","CONSTRAINT","CONTINUE","CONVERT","CREATE","CROSS","CURRENT_DATE","CURRENT_ROLE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURSOR","DATABASE","DATABASES","DAY_HOUR","DAY_MICROSECOND","DAY_MINUTE","DAY_SECOND","DECLARE","DEFAULT","DELAYED","DELETE","DELETE_DOMAIN_ID","DESC","DESCRIBE","DETERMINISTIC","DISTINCT","DISTINCTROW","DIV","DO_DOMAIN_IDS","DROP","DUAL","EACH","ELSE","ELSEIF","ENCLOSED","ESCAPED","EXCEPT","EXISTS","EXIT","EXPLAIN","FALSE","FETCH","FOR","FORCE","FOREIGN","FROM","FULLTEXT","GENERAL","GRANT","GROUP","HAVING","HIGH_PRIORITY","HOUR_MICROSECOND","HOUR_MINUTE","HOUR_SECOND","IF","IGNORE","IGNORE_DOMAIN_IDS","IGNORE_SERVER_IDS","IN","INDEX","INFILE","INNER","INOUT","INSENSITIVE","INSERT","INTERSECT","INTERVAL","INTO","IS","ITERATE","JOIN","KEY","KEYS","KILL","LEADING","LEAVE","LEFT","LIKE","LIMIT","LINEAR","LINES","LOAD","LOCALTIME","LOCALTIMESTAMP","LOCK","LOOP","LOW_PRIORITY","MASTER_HEARTBEAT_PERIOD","MASTER_SSL_VERIFY_SERVER_CERT","MATCH","MAXVALUE","MINUTE_MICROSECOND","MINUTE_SECOND","MOD","MODIFIES","NATURAL","NOT","NO_WRITE_TO_BINLOG","NULL","OFFSET","ON","OPTIMIZE","OPTION","OPTIONALLY","OR","ORDER","OUT","OUTER","OUTFILE","OVER","PAGE_CHECKSUM","PARSE_VCOL_EXPR","PARTITION","POSITION","PRIMARY","PROCEDURE","PURGE","RANGE","READ","READS","READ_WRITE","RECURSIVE","REF_SYSTEM_ID","REFERENCES","REGEXP","RELEASE","RENAME","REPEAT","REPLACE","REQUIRE","RESIGNAL","RESTRICT","RETURN","RETURNING","REVOKE","RIGHT","RLIKE","ROW_NUMBER","ROWS","SCHEMA","SCHEMAS","SECOND_MICROSECOND","SELECT","SENSITIVE","SEPARATOR","SET","SHOW","SIGNAL","SLOW","SPATIAL","SPECIFIC","SQL","SQLEXCEPTION","SQLSTATE","SQLWARNING","SQL_BIG_RESULT","SQL_CALC_FOUND_ROWS","SQL_SMALL_RESULT","SSL","STARTING","STATS_AUTO_RECALC","STATS_PERSISTENT","STATS_SAMPLE_PAGES","STRAIGHT_JOIN","TABLE","TERMINATED","THEN","TO","TRAILING","TRIGGER","TRUE","UNDO","UNION","UNIQUE","UNLOCK","UNSIGNED","UPDATE","USAGE","USE","USING","UTC_DATE","UTC_TIME","UTC_TIMESTAMP","VALUES","WHEN","WHERE","WHILE","WINDOW","WITH","WRITE","XOR","YEAR_MONTH","ZEROFILL"],WK=["BIGINT","BINARY","BIT","BLOB","CHAR BYTE","CHAR","CHARACTER","DATETIME","DEC","DECIMAL","DOUBLE PRECISION","DOUBLE","ENUM","FIXED","FLOAT","FLOAT4","FLOAT8","INT","INT1","INT2","INT3","INT4","INT8","INTEGER","LONG","LONGBLOB","LONGTEXT","MEDIUMBLOB","MEDIUMINT","MEDIUMTEXT","MIDDLEINT","NATIONAL CHAR","NATIONAL VARCHAR","NUMERIC","PRECISION","REAL","SMALLINT","TEXT","TIMESTAMP","TINYBLOB","TINYINT","TINYTEXT","VARBINARY","VARCHAR","VARCHARACTER","VARYING","YEAR"]});var VK,qK=G(()=>{VK=["ADDDATE","ADD_MONTHS","BIT_AND","BIT_OR","BIT_XOR","CAST","COUNT","CUME_DIST","CURDATE","CURTIME","DATE_ADD","DATE_SUB","DATE_FORMAT","DECODE","DENSE_RANK","EXTRACT","FIRST_VALUE","GROUP_CONCAT","JSON_ARRAYAGG","JSON_OBJECTAGG","LAG","LEAD","MAX","MEDIAN","MID","MIN","NOW","NTH_VALUE","NTILE","POSITION","PERCENT_RANK","PERCENTILE_CONT","PERCENTILE_DISC","RANK","ROW_NUMBER","SESSION_USER","STD","STDDEV","STDDEV_POP","STDDEV_SAMP","SUBDATE","SUBSTR","SUBSTRING","SUM","SYSTEM_USER","TRIM","TRIM_ORACLE","VARIANCE","VAR_POP","VAR_SAMP","ABS","ACOS","ADDTIME","AES_DECRYPT","AES_ENCRYPT","ASIN","ATAN","ATAN2","BENCHMARK","BIN","BINLOG_GTID_POS","BIT_COUNT","BIT_LENGTH","CEIL","CEILING","CHARACTER_LENGTH","CHAR_LENGTH","CHR","COERCIBILITY","COLUMN_CHECK","COLUMN_EXISTS","COLUMN_LIST","COLUMN_JSON","COMPRESS","CONCAT","CONCAT_OPERATOR_ORACLE","CONCAT_WS","CONNECTION_ID","CONV","CONVERT_TZ","COS","COT","CRC32","DATEDIFF","DAYNAME","DAYOFMONTH","DAYOFWEEK","DAYOFYEAR","DEGREES","DECODE_HISTOGRAM","DECODE_ORACLE","DES_DECRYPT","DES_ENCRYPT","ELT","ENCODE","ENCRYPT","EXP","EXPORT_SET","EXTRACTVALUE","FIELD","FIND_IN_SET","FLOOR","FORMAT","FOUND_ROWS","FROM_BASE64","FROM_DAYS","FROM_UNIXTIME","GET_LOCK","GREATEST","HEX","IFNULL","INSTR","ISNULL","IS_FREE_LOCK","IS_USED_LOCK","JSON_ARRAY","JSON_ARRAY_APPEND","JSON_ARRAY_INSERT","JSON_COMPACT","JSON_CONTAINS","JSON_CONTAINS_PATH","JSON_DEPTH","JSON_DETAILED","JSON_EXISTS","JSON_EXTRACT","JSON_INSERT","JSON_KEYS","JSON_LENGTH","JSON_LOOSE","JSON_MERGE","JSON_MERGE_PATCH","JSON_MERGE_PRESERVE","JSON_QUERY","JSON_QUOTE","JSON_OBJECT","JSON_REMOVE","JSON_REPLACE","JSON_SET","JSON_SEARCH","JSON_TYPE","JSON_UNQUOTE","JSON_VALID","JSON_VALUE","LAST_DAY","LAST_INSERT_ID","LCASE","LEAST","LENGTH","LENGTHB","LN","LOAD_FILE","LOCATE","LOG","LOG10","LOG2","LOWER","LPAD","LPAD_ORACLE","LTRIM","LTRIM_ORACLE","MAKEDATE","MAKETIME","MAKE_SET","MASTER_GTID_WAIT","MASTER_POS_WAIT","MD5","MONTHNAME","NAME_CONST","NVL","NVL2","OCT","OCTET_LENGTH","ORD","PERIOD_ADD","PERIOD_DIFF","PI","POW","POWER","QUOTE","REGEXP_INSTR","REGEXP_REPLACE","REGEXP_SUBSTR","RADIANS","RAND","RELEASE_ALL_LOCKS","RELEASE_LOCK","REPLACE_ORACLE","REVERSE","ROUND","RPAD","RPAD_ORACLE","RTRIM","RTRIM_ORACLE","SEC_TO_TIME","SHA","SHA1","SHA2","SIGN","SIN","SLEEP","SOUNDEX","SPACE","SQRT","STRCMP","STR_TO_DATE","SUBSTR_ORACLE","SUBSTRING_INDEX","SUBTIME","SYS_GUID","TAN","TIMEDIFF","TIME_FORMAT","TIME_TO_SEC","TO_BASE64","TO_CHAR","TO_DAYS","TO_SECONDS","UCASE","UNCOMPRESS","UNCOMPRESSED_LENGTH","UNHEX","UNIX_TIMESTAMP","UPDATEXML","UPPER","UUID","UUID_SHORT","VERSION","WEEKDAY","WEEKOFYEAR","WSREP_LAST_WRITTEN_GTID","WSREP_LAST_SEEN_GTID","WSREP_SYNC_WAIT_UPTO_GTID","YEARWEEK","COALESCE","NULLIF"]});var fDe,EDe,XK,$w,hDe,pDe,TDe,SDe,AA,kw=G(()=>{qt();jf();YK();qK();fDe=v(["SELECT [ALL | DISTINCT | DISTINCTROW]"]),EDe=v(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY","HAVING","PARTITION BY","ORDER BY","LIMIT","OFFSET","FETCH {FIRST | NEXT}","INSERT [LOW_PRIORITY | DELAYED | HIGH_PRIORITY] [IGNORE] [INTO]","REPLACE [LOW_PRIORITY | DELAYED] [INTO]","VALUES","ON DUPLICATE KEY UPDATE","SET","RETURNING"]),XK=v(["CREATE [OR REPLACE] [TEMPORARY] TABLE [IF NOT EXISTS]"]),$w=v(["CREATE [OR REPLACE] [SQL SECURITY DEFINER | SQL SECURITY INVOKER] VIEW [IF NOT EXISTS]","UPDATE [LOW_PRIORITY] [IGNORE]","DELETE [LOW_PRIORITY] [QUICK] [IGNORE] FROM","DROP [TEMPORARY] TABLE [IF EXISTS]","ALTER [ONLINE] [IGNORE] TABLE [IF EXISTS]","ADD [COLUMN] [IF NOT EXISTS]","{CHANGE | MODIFY} [COLUMN] [IF EXISTS]","DROP [COLUMN] [IF EXISTS]","RENAME [TO]","RENAME COLUMN","ALTER [COLUMN]","{SET | DROP} DEFAULT","SET {VISIBLE | INVISIBLE}","TRUNCATE [TABLE]","ALTER DATABASE","ALTER DATABASE COMMENT","ALTER EVENT","ALTER FUNCTION","ALTER PROCEDURE","ALTER SCHEMA","ALTER SCHEMA COMMENT","ALTER SEQUENCE","ALTER SERVER","ALTER USER","ALTER VIEW","ANALYZE","ANALYZE TABLE","BACKUP LOCK","BACKUP STAGE","BACKUP UNLOCK","BEGIN","BINLOG","CACHE INDEX","CALL","CHANGE MASTER TO","CHECK TABLE","CHECK VIEW","CHECKSUM TABLE","COMMIT","CREATE AGGREGATE FUNCTION","CREATE DATABASE","CREATE EVENT","CREATE FUNCTION","CREATE INDEX","CREATE PROCEDURE","CREATE ROLE","CREATE SEQUENCE","CREATE SERVER","CREATE SPATIAL INDEX","CREATE TRIGGER","CREATE UNIQUE INDEX","CREATE USER","DEALLOCATE PREPARE","DESCRIBE","DROP DATABASE","DROP EVENT","DROP FUNCTION","DROP INDEX","DROP PREPARE","DROP PROCEDURE","DROP ROLE","DROP SEQUENCE","DROP SERVER","DROP TRIGGER","DROP USER","DROP VIEW","EXECUTE","EXPLAIN","FLUSH","GET DIAGNOSTICS","GET DIAGNOSTICS CONDITION","GRANT","HANDLER","HELP","INSTALL PLUGIN","INSTALL SONAME","KILL","LOAD DATA INFILE","LOAD INDEX INTO CACHE","LOAD XML INFILE","LOCK TABLE","OPTIMIZE TABLE","PREPARE","PURGE BINARY LOGS","PURGE MASTER LOGS","RELEASE SAVEPOINT","RENAME TABLE","RENAME USER","REPAIR TABLE","REPAIR VIEW","RESET MASTER","RESET QUERY CACHE","RESET REPLICA","RESET SLAVE","RESIGNAL","REVOKE","ROLLBACK","SAVEPOINT","SET CHARACTER SET","SET DEFAULT ROLE","SET GLOBAL TRANSACTION","SET NAMES","SET PASSWORD","SET ROLE","SET STATEMENT","SET TRANSACTION","SHOW","SHOW ALL REPLICAS STATUS","SHOW ALL SLAVES STATUS","SHOW AUTHORS","SHOW BINARY LOGS","SHOW BINLOG EVENTS","SHOW BINLOG STATUS","SHOW CHARACTER SET","SHOW CLIENT_STATISTICS","SHOW COLLATION","SHOW COLUMNS","SHOW CONTRIBUTORS","SHOW CREATE DATABASE","SHOW CREATE EVENT","SHOW CREATE FUNCTION","SHOW CREATE PACKAGE","SHOW CREATE PACKAGE BODY","SHOW CREATE PROCEDURE","SHOW CREATE SEQUENCE","SHOW CREATE TABLE","SHOW CREATE TRIGGER","SHOW CREATE USER","SHOW CREATE VIEW","SHOW DATABASES","SHOW ENGINE","SHOW ENGINE INNODB STATUS","SHOW ENGINES","SHOW ERRORS","SHOW EVENTS","SHOW EXPLAIN","SHOW FUNCTION CODE","SHOW FUNCTION STATUS","SHOW GRANTS","SHOW INDEX","SHOW INDEXES","SHOW INDEX_STATISTICS","SHOW KEYS","SHOW LOCALES","SHOW MASTER LOGS","SHOW MASTER STATUS","SHOW OPEN TABLES","SHOW PACKAGE BODY CODE","SHOW PACKAGE BODY STATUS","SHOW PACKAGE STATUS","SHOW PLUGINS","SHOW PLUGINS SONAME","SHOW PRIVILEGES","SHOW PROCEDURE CODE","SHOW PROCEDURE STATUS","SHOW PROCESSLIST","SHOW PROFILE","SHOW PROFILES","SHOW QUERY_RESPONSE_TIME","SHOW RELAYLOG EVENTS","SHOW REPLICA","SHOW REPLICA HOSTS","SHOW REPLICA STATUS","SHOW SCHEMAS","SHOW SLAVE","SHOW SLAVE HOSTS","SHOW SLAVE STATUS","SHOW STATUS","SHOW STORAGE ENGINES","SHOW TABLE STATUS","SHOW TABLES","SHOW TRIGGERS","SHOW USER_STATISTICS","SHOW VARIABLES","SHOW WARNINGS","SHOW WSREP_MEMBERSHIP","SHOW WSREP_STATUS","SHUTDOWN","SIGNAL","START ALL REPLICAS","START ALL SLAVES","START REPLICA","START SLAVE","START TRANSACTION","STOP ALL REPLICAS","STOP ALL SLAVES","STOP REPLICA","STOP SLAVE","UNINSTALL PLUGIN","UNINSTALL SONAME","UNLOCK TABLE","USE","XA BEGIN","XA COMMIT","XA END","XA PREPARE","XA RECOVER","XA ROLLBACK","XA START"]),hDe=v(["UNION [ALL | DISTINCT]","EXCEPT [ALL | DISTINCT]","INTERSECT [ALL | DISTINCT]","MINUS [ALL | DISTINCT]"]),pDe=v(["JOIN","{LEFT | RIGHT} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL JOIN","NATURAL {LEFT | RIGHT} [OUTER] JOIN","STRAIGHT_JOIN"]),TDe=v(["ON {UPDATE | DELETE} [SET NULL | SET DEFAULT]","CHARACTER SET","{ROWS | RANGE} BETWEEN","IDENTIFIED BY"]),SDe=v([]),AA={name:"mariadb",tokenizerOptions:{reservedSelect:fDe,reservedClauses:[...EDe,...XK,...$w],reservedSetOperations:hDe,reservedJoins:pDe,reservedKeywordPhrases:TDe,reservedDataTypePhrases:SDe,supportsXor:!0,reservedKeywords:kK,reservedDataTypes:WK,reservedFunctionNames:VK,stringTypes:['""-qq-bs',"''-qq-bs",{quote:"''-raw",prefixes:["B","X"],requirePrefix:!0}],identTypes:["``"],identChars:{first:"$",rest:"$",allowFirstCharNumber:!0},variableTypes:[{regex:"@@?[A-Za-z0-9_.$]+"},{quote:'""-qq-bs',prefixes:["@"],requirePrefix:!0},{quote:"''-qq-bs",prefixes:["@"],requirePrefix:!0},{quote:"``",prefixes:["@"],requirePrefix:!0}],paramTypes:{positional:!0},lineCommentTypes:["--","#"],operators:["%",":=","&","|","^","~","<<",">>","<=>","&&","||","!","*.*"],postProcess:Oo},formatOptions:{onelineClauses:[...XK,...$w],tabularOnelineClauses:$w}}});var zK,jK,KK=G(()=>{zK=["ACCESSIBLE","ADD","ALL","ALTER","ANALYZE","AND","AS","ASC","ASENSITIVE","BEFORE","BETWEEN","BOTH","BY","CALL","CASCADE","CASE","CHANGE","CHECK","COLLATE","COLUMN","CONDITION","CONSTRAINT","CONTINUE","CONVERT","CREATE","CROSS","CUBE","CUME_DIST","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURSOR","DATABASE","DATABASES","DAY_HOUR","DAY_MICROSECOND","DAY_MINUTE","DAY_SECOND","DECLARE","DEFAULT","DELAYED","DELETE","DENSE_RANK","DESC","DESCRIBE","DETERMINISTIC","DISTINCT","DISTINCTROW","DIV","DROP","DUAL","EACH","ELSE","ELSEIF","EMPTY","ENCLOSED","ESCAPED","EXCEPT","EXISTS","EXIT","EXPLAIN","FALSE","FETCH","FIRST_VALUE","FOR","FORCE","FOREIGN","FROM","FULLTEXT","FUNCTION","GENERATED","GET","GRANT","GROUP","GROUPING","GROUPS","HAVING","HIGH_PRIORITY","HOUR_MICROSECOND","HOUR_MINUTE","HOUR_SECOND","IF","IGNORE","IN","INDEX","INFILE","INNER","INOUT","INSENSITIVE","INSERT","IN","INTERSECT","INTERVAL","INTO","IO_AFTER_GTIDS","IO_BEFORE_GTIDS","IS","ITERATE","JOIN","JSON_TABLE","KEY","KEYS","KILL","LAG","LAST_VALUE","LATERAL","LEAD","LEADING","LEAVE","LEFT","LIKE","LIMIT","LINEAR","LINES","LOAD","LOCALTIME","LOCALTIMESTAMP","LOCK","LONG","LOOP","LOW_PRIORITY","MASTER_BIND","MASTER_SSL_VERIFY_SERVER_CERT","MATCH","MAXVALUE","MINUTE_MICROSECOND","MINUTE_SECOND","MOD","MODIFIES","NATURAL","NOT","NO_WRITE_TO_BINLOG","NTH_VALUE","NTILE","NULL","OF","ON","OPTIMIZE","OPTIMIZER_COSTS","OPTION","OPTIONALLY","OR","ORDER","OUT","OUTER","OUTFILE","OVER","PARTITION","PERCENT_RANK","PRIMARY","PROCEDURE","PURGE","RANGE","RANK","READ","READS","READ_WRITE","RECURSIVE","REFERENCES","REGEXP","RELEASE","RENAME","REPEAT","REPLACE","REQUIRE","RESIGNAL","RESTRICT","RETURN","REVOKE","RIGHT","RLIKE","ROW","ROWS","ROW_NUMBER","SCHEMA","SCHEMAS","SECOND_MICROSECOND","SELECT","SENSITIVE","SEPARATOR","SET","SHOW","SIGNAL","SPATIAL","SPECIFIC","SQL","SQLEXCEPTION","SQLSTATE","SQLWARNING","SQL_BIG_RESULT","SQL_CALC_FOUND_ROWS","SQL_SMALL_RESULT","SSL","STARTING","STORED","STRAIGHT_JOIN","SYSTEM","TABLE","TERMINATED","THEN","TO","TRAILING","TRIGGER","TRUE","UNDO","UNION","UNIQUE","UNLOCK","UNSIGNED","UPDATE","USAGE","USE","USING","UTC_DATE","UTC_TIME","UTC_TIMESTAMP","VALUES","VIRTUAL","WHEN","WHERE","WHILE","WINDOW","WITH","WRITE","XOR","YEAR_MONTH","ZEROFILL"],jK=["BIGINT","BINARY","BIT","BLOB","BOOL","BOOLEAN","CHAR","CHARACTER","DATE","DATETIME","DEC","DECIMAL","DOUBLE PRECISION","DOUBLE","ENUM","FIXED","FLOAT","FLOAT4","FLOAT8","INT","INT1","INT2","INT3","INT4","INT8","INTEGER","LONGBLOB","LONGTEXT","MEDIUMBLOB","MEDIUMINT","MEDIUMTEXT","MIDDLEINT","NATIONAL CHAR","NATIONAL VARCHAR","NUMERIC","PRECISION","REAL","SMALLINT","TEXT","TIME","TIMESTAMP","TINYBLOB","TINYINT","TINYTEXT","VARBINARY","VARCHAR","VARCHARACTER","VARYING","YEAR"]});var JK,QK=G(()=>{JK=["ABS","ACOS","ADDDATE","ADDTIME","AES_DECRYPT","AES_ENCRYPT","ANY_VALUE","ASCII","ASIN","ATAN","ATAN2","AVG","BENCHMARK","BIN","BIN_TO_UUID","BINARY","BIT_AND","BIT_COUNT","BIT_LENGTH","BIT_OR","BIT_XOR","CAN_ACCESS_COLUMN","CAN_ACCESS_DATABASE","CAN_ACCESS_TABLE","CAN_ACCESS_USER","CAN_ACCESS_VIEW","CAST","CEIL","CEILING","CHAR","CHAR_LENGTH","CHARACTER_LENGTH","CHARSET","COALESCE","COERCIBILITY","COLLATION","COMPRESS","CONCAT","CONCAT_WS","CONNECTION_ID","CONV","CONVERT","CONVERT_TZ","COS","COT","COUNT","CRC32","CUME_DIST","CURDATE","CURRENT_DATE","CURRENT_ROLE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURTIME","DATABASE","DATE","DATE_ADD","DATE_FORMAT","DATE_SUB","DATEDIFF","DAY","DAYNAME","DAYOFMONTH","DAYOFWEEK","DAYOFYEAR","DEFAULT","DEGREES","DENSE_RANK","DIV","ELT","EXP","EXPORT_SET","EXTRACT","EXTRACTVALUE","FIELD","FIND_IN_SET","FIRST_VALUE","FLOOR","FORMAT","FORMAT_BYTES","FORMAT_PICO_TIME","FOUND_ROWS","FROM_BASE64","FROM_DAYS","FROM_UNIXTIME","GEOMCOLLECTION","GEOMETRYCOLLECTION","GET_DD_COLUMN_PRIVILEGES","GET_DD_CREATE_OPTIONS","GET_DD_INDEX_SUB_PART_LENGTH","GET_FORMAT","GET_LOCK","GREATEST","GROUP_CONCAT","GROUPING","GTID_SUBSET","GTID_SUBTRACT","HEX","HOUR","ICU_VERSION","IF","IFNULL","INET_ATON","INET_NTOA","INET6_ATON","INET6_NTOA","INSERT","INSTR","INTERNAL_AUTO_INCREMENT","INTERNAL_AVG_ROW_LENGTH","INTERNAL_CHECK_TIME","INTERNAL_CHECKSUM","INTERNAL_DATA_FREE","INTERNAL_DATA_LENGTH","INTERNAL_DD_CHAR_LENGTH","INTERNAL_GET_COMMENT_OR_ERROR","INTERNAL_GET_ENABLED_ROLE_JSON","INTERNAL_GET_HOSTNAME","INTERNAL_GET_USERNAME","INTERNAL_GET_VIEW_WARNING_OR_ERROR","INTERNAL_INDEX_COLUMN_CARDINALITY","INTERNAL_INDEX_LENGTH","INTERNAL_IS_ENABLED_ROLE","INTERNAL_IS_MANDATORY_ROLE","INTERNAL_KEYS_DISABLED","INTERNAL_MAX_DATA_LENGTH","INTERNAL_TABLE_ROWS","INTERNAL_UPDATE_TIME","INTERVAL","IS","IS_FREE_LOCK","IS_IPV4","IS_IPV4_COMPAT","IS_IPV4_MAPPED","IS_IPV6","IS NOT","IS NOT NULL","IS NULL","IS_USED_LOCK","IS_UUID","ISNULL","JSON_ARRAY","JSON_ARRAY_APPEND","JSON_ARRAY_INSERT","JSON_ARRAYAGG","JSON_CONTAINS","JSON_CONTAINS_PATH","JSON_DEPTH","JSON_EXTRACT","JSON_INSERT","JSON_KEYS","JSON_LENGTH","JSON_MERGE","JSON_MERGE_PATCH","JSON_MERGE_PRESERVE","JSON_OBJECT","JSON_OBJECTAGG","JSON_OVERLAPS","JSON_PRETTY","JSON_QUOTE","JSON_REMOVE","JSON_REPLACE","JSON_SCHEMA_VALID","JSON_SCHEMA_VALIDATION_REPORT","JSON_SEARCH","JSON_SET","JSON_STORAGE_FREE","JSON_STORAGE_SIZE","JSON_TABLE","JSON_TYPE","JSON_UNQUOTE","JSON_VALID","JSON_VALUE","LAG","LAST_DAY","LAST_INSERT_ID","LAST_VALUE","LCASE","LEAD","LEAST","LEFT","LENGTH","LIKE","LINESTRING","LN","LOAD_FILE","LOCALTIME","LOCALTIMESTAMP","LOCATE","LOG","LOG10","LOG2","LOWER","LPAD","LTRIM","MAKE_SET","MAKEDATE","MAKETIME","MASTER_POS_WAIT","MATCH","MAX","MBRCONTAINS","MBRCOVEREDBY","MBRCOVERS","MBRDISJOINT","MBREQUALS","MBRINTERSECTS","MBROVERLAPS","MBRTOUCHES","MBRWITHIN","MD5","MEMBER OF","MICROSECOND","MID","MIN","MINUTE","MOD","MONTH","MONTHNAME","MULTILINESTRING","MULTIPOINT","MULTIPOLYGON","NAME_CONST","NOT","NOT IN","NOT LIKE","NOT REGEXP","NOW","NTH_VALUE","NTILE","NULLIF","OCT","OCTET_LENGTH","ORD","PERCENT_RANK","PERIOD_ADD","PERIOD_DIFF","PI","POINT","POLYGON","POSITION","POW","POWER","PS_CURRENT_THREAD_ID","PS_THREAD_ID","QUARTER","QUOTE","RADIANS","RAND","RANDOM_BYTES","RANK","REGEXP","REGEXP_INSTR","REGEXP_LIKE","REGEXP_REPLACE","REGEXP_SUBSTR","RELEASE_ALL_LOCKS","RELEASE_LOCK","REPEAT","REPLACE","REVERSE","RIGHT","RLIKE","ROLES_GRAPHML","ROUND","ROW_COUNT","ROW_NUMBER","RPAD","RTRIM","SCHEMA","SEC_TO_TIME","SECOND","SESSION_USER","SHA1","SHA2","SIGN","SIN","SLEEP","SOUNDEX","SOUNDS LIKE","SOURCE_POS_WAIT","SPACE","SQRT","ST_AREA","ST_ASBINARY","ST_ASGEOJSON","ST_ASTEXT","ST_BUFFER","ST_BUFFER_STRATEGY","ST_CENTROID","ST_COLLECT","ST_CONTAINS","ST_CONVEXHULL","ST_CROSSES","ST_DIFFERENCE","ST_DIMENSION","ST_DISJOINT","ST_DISTANCE","ST_DISTANCE_SPHERE","ST_ENDPOINT","ST_ENVELOPE","ST_EQUALS","ST_EXTERIORRING","ST_FRECHETDISTANCE","ST_GEOHASH","ST_GEOMCOLLFROMTEXT","ST_GEOMCOLLFROMWKB","ST_GEOMETRYN","ST_GEOMETRYTYPE","ST_GEOMFROMGEOJSON","ST_GEOMFROMTEXT","ST_GEOMFROMWKB","ST_HAUSDORFFDISTANCE","ST_INTERIORRINGN","ST_INTERSECTION","ST_INTERSECTS","ST_ISCLOSED","ST_ISEMPTY","ST_ISSIMPLE","ST_ISVALID","ST_LATFROMGEOHASH","ST_LATITUDE","ST_LENGTH","ST_LINEFROMTEXT","ST_LINEFROMWKB","ST_LINEINTERPOLATEPOINT","ST_LINEINTERPOLATEPOINTS","ST_LONGFROMGEOHASH","ST_LONGITUDE","ST_MAKEENVELOPE","ST_MLINEFROMTEXT","ST_MLINEFROMWKB","ST_MPOINTFROMTEXT","ST_MPOINTFROMWKB","ST_MPOLYFROMTEXT","ST_MPOLYFROMWKB","ST_NUMGEOMETRIES","ST_NUMINTERIORRING","ST_NUMPOINTS","ST_OVERLAPS","ST_POINTATDISTANCE","ST_POINTFROMGEOHASH","ST_POINTFROMTEXT","ST_POINTFROMWKB","ST_POINTN","ST_POLYFROMTEXT","ST_POLYFROMWKB","ST_SIMPLIFY","ST_SRID","ST_STARTPOINT","ST_SWAPXY","ST_SYMDIFFERENCE","ST_TOUCHES","ST_TRANSFORM","ST_UNION","ST_VALIDATE","ST_WITHIN","ST_X","ST_Y","STATEMENT_DIGEST","STATEMENT_DIGEST_TEXT","STD","STDDEV","STDDEV_POP","STDDEV_SAMP","STR_TO_DATE","STRCMP","SUBDATE","SUBSTR","SUBSTRING","SUBSTRING_INDEX","SUBTIME","SUM","SYSDATE","SYSTEM_USER","TAN","TIME","TIME_FORMAT","TIME_TO_SEC","TIMEDIFF","TIMESTAMP","TIMESTAMPADD","TIMESTAMPDIFF","TO_BASE64","TO_DAYS","TO_SECONDS","TRIM","TRUNCATE","UCASE","UNCOMPRESS","UNCOMPRESSED_LENGTH","UNHEX","UNIX_TIMESTAMP","UPDATEXML","UPPER","UTC_DATE","UTC_TIME","UTC_TIMESTAMP","UUID","UUID_SHORT","UUID_TO_BIN","VALIDATE_PASSWORD_STRENGTH","VALUES","VAR_POP","VAR_SAMP","VARIANCE","VERSION","WAIT_FOR_EXECUTED_GTID_SET","WAIT_UNTIL_SQL_THREAD_AFTER_GTIDS","WEEK","WEEKDAY","WEEKOFYEAR","WEIGHT_STRING","YEAR","YEARWEEK"]});var RDe,ADe,ZK,Ww,mDe,gDe,IDe,_De,mA,Yw=G(()=>{qt();jf();KK();QK();RDe=v(["SELECT [ALL | DISTINCT | DISTINCTROW]"]),ADe=v(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY","HAVING","WINDOW","PARTITION BY","ORDER BY","LIMIT","OFFSET","INSERT [LOW_PRIORITY | DELAYED | HIGH_PRIORITY] [IGNORE] [INTO]","REPLACE [LOW_PRIORITY | DELAYED] [INTO]","VALUES","ON DUPLICATE KEY UPDATE","SET"]),ZK=v(["CREATE [TEMPORARY] TABLE [IF NOT EXISTS]"]),Ww=v(["CREATE [OR REPLACE] [SQL SECURITY DEFINER | SQL SECURITY INVOKER] VIEW [IF NOT EXISTS]","UPDATE [LOW_PRIORITY] [IGNORE]","DELETE [LOW_PRIORITY] [QUICK] [IGNORE] FROM","DROP [TEMPORARY] TABLE [IF EXISTS]","ALTER TABLE","ADD [COLUMN]","{CHANGE | MODIFY} [COLUMN]","DROP [COLUMN]","RENAME [TO | AS]","RENAME COLUMN","ALTER [COLUMN]","{SET | DROP} DEFAULT","TRUNCATE [TABLE]","ALTER DATABASE","ALTER EVENT","ALTER FUNCTION","ALTER INSTANCE","ALTER LOGFILE GROUP","ALTER PROCEDURE","ALTER RESOURCE GROUP","ALTER SERVER","ALTER TABLESPACE","ALTER USER","ALTER VIEW","ANALYZE TABLE","BINLOG","CACHE INDEX","CALL","CHANGE MASTER TO","CHANGE REPLICATION FILTER","CHANGE REPLICATION SOURCE TO","CHECK TABLE","CHECKSUM TABLE","CLONE","COMMIT","CREATE DATABASE","CREATE EVENT","CREATE FUNCTION","CREATE FUNCTION","CREATE INDEX","CREATE LOGFILE GROUP","CREATE PROCEDURE","CREATE RESOURCE GROUP","CREATE ROLE","CREATE SERVER","CREATE SPATIAL REFERENCE SYSTEM","CREATE TABLESPACE","CREATE TRIGGER","CREATE USER","DEALLOCATE PREPARE","DESCRIBE","DROP DATABASE","DROP EVENT","DROP FUNCTION","DROP FUNCTION","DROP INDEX","DROP LOGFILE GROUP","DROP PROCEDURE","DROP RESOURCE GROUP","DROP ROLE","DROP SERVER","DROP SPATIAL REFERENCE SYSTEM","DROP TABLESPACE","DROP TRIGGER","DROP USER","DROP VIEW","EXECUTE","EXPLAIN","FLUSH","GRANT","HANDLER","HELP","IMPORT TABLE","INSTALL COMPONENT","INSTALL PLUGIN","KILL","LOAD DATA","LOAD INDEX INTO CACHE","LOAD XML","LOCK INSTANCE FOR BACKUP","LOCK TABLES","MASTER_POS_WAIT","OPTIMIZE TABLE","PREPARE","PURGE BINARY LOGS","RELEASE SAVEPOINT","RENAME TABLE","RENAME USER","REPAIR TABLE","RESET","RESET MASTER","RESET PERSIST","RESET REPLICA","RESET SLAVE","RESTART","REVOKE","ROLLBACK","ROLLBACK TO SAVEPOINT","SAVEPOINT","SET CHARACTER SET","SET DEFAULT ROLE","SET NAMES","SET PASSWORD","SET RESOURCE GROUP","SET ROLE","SET TRANSACTION","SHOW","SHOW BINARY LOGS","SHOW BINLOG EVENTS","SHOW CHARACTER SET","SHOW COLLATION","SHOW COLUMNS","SHOW CREATE DATABASE","SHOW CREATE EVENT","SHOW CREATE FUNCTION","SHOW CREATE PROCEDURE","SHOW CREATE TABLE","SHOW CREATE TRIGGER","SHOW CREATE USER","SHOW CREATE VIEW","SHOW DATABASES","SHOW ENGINE","SHOW ENGINES","SHOW ERRORS","SHOW EVENTS","SHOW FUNCTION CODE","SHOW FUNCTION STATUS","SHOW GRANTS","SHOW INDEX","SHOW MASTER STATUS","SHOW OPEN TABLES","SHOW PLUGINS","SHOW PRIVILEGES","SHOW PROCEDURE CODE","SHOW PROCEDURE STATUS","SHOW PROCESSLIST","SHOW PROFILE","SHOW PROFILES","SHOW RELAYLOG EVENTS","SHOW REPLICA STATUS","SHOW REPLICAS","SHOW SLAVE","SHOW SLAVE HOSTS","SHOW STATUS","SHOW TABLE STATUS","SHOW TABLES","SHOW TRIGGERS","SHOW VARIABLES","SHOW WARNINGS","SHUTDOWN","SOURCE_POS_WAIT","START GROUP_REPLICATION","START REPLICA","START SLAVE","START TRANSACTION","STOP GROUP_REPLICATION","STOP REPLICA","STOP SLAVE","TABLE","UNINSTALL COMPONENT","UNINSTALL PLUGIN","UNLOCK INSTANCE","UNLOCK TABLES","USE","XA","ITERATE","LEAVE","LOOP","REPEAT","RETURN","WHILE"]),mDe=v(["UNION [ALL | DISTINCT]"]),gDe=v(["JOIN","{LEFT | RIGHT} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL [INNER] JOIN","NATURAL {LEFT | RIGHT} [OUTER] JOIN","STRAIGHT_JOIN"]),IDe=v(["ON {UPDATE | DELETE} [SET NULL]","CHARACTER SET","{ROWS | RANGE} BETWEEN","IDENTIFIED BY"]),_De=v([]),mA={name:"mysql",tokenizerOptions:{reservedSelect:RDe,reservedClauses:[...ADe,...ZK,...Ww],reservedSetOperations:mDe,reservedJoins:gDe,reservedKeywordPhrases:IDe,reservedDataTypePhrases:_De,supportsXor:!0,reservedKeywords:zK,reservedDataTypes:jK,reservedFunctionNames:JK,stringTypes:['""-qq-bs',{quote:"''-qq-bs",prefixes:["N"]},{quote:"''-raw",prefixes:["B","X"],requirePrefix:!0}],identTypes:["``"],identChars:{first:"$",rest:"$",allowFirstCharNumber:!0},variableTypes:[{regex:"@@?[A-Za-z0-9_.$]+"},{quote:'""-qq-bs',prefixes:["@"],requirePrefix:!0},{quote:"''-qq-bs",prefixes:["@"],requirePrefix:!0},{quote:"``",prefixes:["@"],requirePrefix:!0}],paramTypes:{positional:!0},lineCommentTypes:["--","#"],operators:["%",":=","&","|","^","~","<<",">>","<=>","->","->>","&&","||","!","*.*"],postProcess:Oo},formatOptions:{onelineClauses:[...ZK,...Ww],tabularOnelineClauses:Ww}}});var e4,t4,n4=G(()=>{e4=["ADD","ALL","ALTER","ANALYZE","AND","ARRAY","AS","ASC","BETWEEN","BOTH","BY","CALL","CASCADE","CASE","CHANGE","CHECK","COLLATE","COLUMN","CONSTRAINT","CONTINUE","CONVERT","CREATE","CROSS","CURRENT_DATE","CURRENT_ROLE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURSOR","DATABASE","DATABASES","DAY_HOUR","DAY_MICROSECOND","DAY_MINUTE","DAY_SECOND","DEFAULT","DELAYED","DELETE","DESC","DESCRIBE","DISTINCT","DISTINCTROW","DIV","DOUBLE","DROP","DUAL","ELSE","ELSEIF","ENCLOSED","ESCAPED","EXCEPT","EXISTS","EXIT","EXPLAIN","FALSE","FETCH","FOR","FORCE","FOREIGN","FROM","FULLTEXT","GENERATED","GRANT","GROUP","GROUPS","HAVING","HIGH_PRIORITY","HOUR_MICROSECOND","HOUR_MINUTE","HOUR_SECOND","IF","IGNORE","ILIKE","IN","INDEX","INFILE","INNER","INOUT","INSERT","INTERSECT","INTERVAL","INTO","IS","ITERATE","JOIN","KEY","KEYS","KILL","LEADING","LEAVE","LEFT","LIKE","LIMIT","LINEAR","LINES","LOAD","LOCALTIME","LOCALTIMESTAMP","LOCK","LONG","LOW_PRIORITY","MATCH","MAXVALUE","MINUTE_MICROSECOND","MINUTE_SECOND","MOD","NATURAL","NOT","NO_WRITE_TO_BINLOG","NULL","OF","ON","OPTIMIZE","OPTION","OPTIONALLY","OR","ORDER","OUT","OUTER","OUTFILE","OVER","PARTITION","PRIMARY","PROCEDURE","RANGE","READ","RECURSIVE","REFERENCES","REGEXP","RELEASE","RENAME","REPEAT","REPLACE","REQUIRE","RESTRICT","REVOKE","RIGHT","RLIKE","ROW","ROWS","SECOND_MICROSECOND","SELECT","SET","SHOW","SPATIAL","SQL","SQLEXCEPTION","SQLSTATE","SQLWARNING","SQL_BIG_RESULT","SQL_CALC_FOUND_ROWS","SQL_SMALL_RESULT","SSL","STARTING","STATS_EXTENDED","STORED","STRAIGHT_JOIN","TABLE","TABLESAMPLE","TERMINATED","THEN","TO","TRAILING","TRIGGER","TRUE","TiDB_CURRENT_TSO","UNION","UNIQUE","UNLOCK","UNSIGNED","UNTIL","UPDATE","USAGE","USE","USING","UTC_DATE","UTC_TIME","UTC_TIMESTAMP","VALUES","VIRTUAL","WHEN","WHERE","WHILE","WINDOW","WITH","WRITE","XOR","YEAR_MONTH","ZEROFILL"],t4=["BIGINT","BINARY","BIT","BLOB","BOOL","BOOLEAN","CHAR","CHARACTER","DATE","DATETIME","DEC","DECIMAL","DOUBLE PRECISION","DOUBLE","ENUM","FIXED","INT","INT1","INT2","INT3","INT4","INT8","INTEGER","LONGBLOB","LONGTEXT","MEDIUMBLOB","MEDIUMINT","MIDDLEINT","NATIONAL CHAR","NATIONAL VARCHAR","NUMERIC","PRECISION","SMALLINT","TEXT","TIME","TIMESTAMP","TINYBLOB","TINYINT","TINYTEXT","VARBINARY","VARCHAR","VARCHARACTER","VARYING","YEAR"]});var r4,i4=G(()=>{r4=["ABS","ACOS","ADDDATE","ADDTIME","AES_DECRYPT","AES_ENCRYPT","ANY_VALUE","ASCII","ASIN","ATAN","ATAN2","AVG","BENCHMARK","BIN","BIN_TO_UUID","BIT_AND","BIT_COUNT","BIT_LENGTH","BIT_OR","BIT_XOR","BITAND","BITNEG","BITOR","BITXOR","CASE","CAST","CEIL","CEILING","CHAR_FUNC","CHAR_LENGTH","CHARACTER_LENGTH","CHARSET","COALESCE","COERCIBILITY","COLLATION","COMPRESS","CONCAT","CONCAT_WS","CONNECTION_ID","CONV","CONVERT","CONVERT_TZ","COS","COT","COUNT","CRC32","CUME_DIST","CURDATE","CURRENT_DATE","CURRENT_RESOURCE_GROUP","CURRENT_ROLE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURTIME","DATABASE","DATE","DATE_ADD","DATE_FORMAT","DATE_SUB","DATEDIFF","DAY","DAYNAME","DAYOFMONTH","DAYOFWEEK","DAYOFYEAR","DECODE","DEFAULT_FUNC","DEGREES","DENSE_RANK","DES_DECRYPT","DES_ENCRYPT","DIV","ELT","ENCODE","ENCRYPT","EQ","EXP","EXPORT_SET","EXTRACT","FIELD","FIND_IN_SET","FIRST_VALUE","FLOOR","FORMAT","FORMAT_BYTES","FORMAT_NANO_TIME","FOUND_ROWS","FROM_BASE64","FROM_DAYS","FROM_UNIXTIME","GE","GET_FORMAT","GET_LOCK","GETPARAM","GREATEST","GROUP_CONCAT","GROUPING","GT","HEX","HOUR","IF","IFNULL","ILIKE","INET6_ATON","INET6_NTOA","INET_ATON","INET_NTOA","INSERT_FUNC","INSTR","INTDIV","INTERVAL","IS_FREE_LOCK","IS_IPV4","IS_IPV4_COMPAT","IS_IPV4_MAPPED","IS_IPV6","IS_USED_LOCK","IS_UUID","ISFALSE","ISNULL","ISTRUE","JSON_ARRAY","JSON_ARRAYAGG","JSON_ARRAY_APPEND","JSON_ARRAY_INSERT","JSON_CONTAINS","JSON_CONTAINS_PATH","JSON_DEPTH","JSON_EXTRACT","JSON_INSERT","JSON_KEYS","JSON_LENGTH","JSON_MEMBEROF","JSON_MERGE","JSON_MERGE_PATCH","JSON_MERGE_PRESERVE","JSON_OBJECT","JSON_OBJECTAGG","JSON_OVERLAPS","JSON_PRETTY","JSON_QUOTE","JSON_REMOVE","JSON_REPLACE","JSON_SEARCH","JSON_SET","JSON_STORAGE_FREE","JSON_STORAGE_SIZE","JSON_TYPE","JSON_UNQUOTE","JSON_VALID","LAG","LAST_DAY","LAST_INSERT_ID","LAST_VALUE","LASTVAL","LCASE","LE","LEAD","LEAST","LEFT","LEFTSHIFT","LENGTH","LIKE","LN","LOAD_FILE","LOCALTIME","LOCALTIMESTAMP","LOCATE","LOG","LOG10","LOG2","LOWER","LPAD","LT","LTRIM","MAKE_SET","MAKEDATE","MAKETIME","MASTER_POS_WAIT","MAX","MD5","MICROSECOND","MID","MIN","MINUS","MINUTE","MOD","MONTH","MONTHNAME","MUL","NAME_CONST","NE","NEXTVAL","NOT","NOW","NTH_VALUE","NTILE","NULLEQ","OCT","OCTET_LENGTH","OLD_PASSWORD","ORD","PASSWORD_FUNC","PERCENT_RANK","PERIOD_ADD","PERIOD_DIFF","PI","PLUS","POSITION","POW","POWER","QUARTER","QUOTE","RADIANS","RAND","RANDOM_BYTES","RANK","REGEXP","REGEXP_INSTR","REGEXP_LIKE","REGEXP_REPLACE","REGEXP_SUBSTR","RELEASE_ALL_LOCKS","RELEASE_LOCK","REPEAT","REPLACE","REVERSE","RIGHT","RIGHTSHIFT","ROUND","ROW_COUNT","ROW_NUMBER","RPAD","RTRIM","SCHEMA","SEC_TO_TIME","SECOND","SESSION_USER","SETVAL","SETVAR","SHA","SHA1","SHA2","SIGN","SIN","SLEEP","SM3","SPACE","SQRT","STD","STDDEV","STDDEV_POP","STDDEV_SAMP","STR_TO_DATE","STRCMP","SUBDATE","SUBSTR","SUBSTRING","SUBSTRING_INDEX","SUBTIME","SUM","SYSDATE","SYSTEM_USER","TAN","TIDB_BOUNDED_STALENESS","TIDB_CURRENT_TSO","TIDB_DECODE_BINARY_PLAN","TIDB_DECODE_KEY","TIDB_DECODE_PLAN","TIDB_DECODE_SQL_DIGESTS","TIDB_ENCODE_SQL_DIGEST","TIDB_IS_DDL_OWNER","TIDB_PARSE_TSO","TIDB_PARSE_TSO_LOGICAL","TIDB_ROW_CHECKSUM","TIDB_SHARD","TIDB_VERSION","TIME","TIME_FORMAT","TIME_TO_SEC","TIMEDIFF","TIMESTAMP","TIMESTAMPADD","TIMESTAMPDIFF","TO_BASE64","TO_DAYS","TO_SECONDS","TRANSLATE","TRIM","TRUNCATE","UCASE","UNARYMINUS","UNCOMPRESS","UNCOMPRESSED_LENGTH","UNHEX","UNIX_TIMESTAMP","UPPER","UTC_DATE","UTC_TIME","UTC_TIMESTAMP","UUID","UUID_SHORT","UUID_TO_BIN","VALIDATE_PASSWORD_STRENGTH","VAR_POP","VAR_SAMP","VARIANCE","VERSION","VITESS_HASH","WEEK","WEEKDAY","WEEKOFYEAR","WEIGHT_STRING","YEAR","YEARWEEK"]});var NDe,ODe,s4,Vw,CDe,bDe,yDe,wDe,gA,qw=G(()=>{qt();jf();n4();i4();NDe=v(["SELECT [ALL | DISTINCT | DISTINCTROW]"]),ODe=v(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY","HAVING","WINDOW","PARTITION BY","ORDER BY","LIMIT","OFFSET","INSERT [LOW_PRIORITY | DELAYED | HIGH_PRIORITY] [IGNORE] [INTO]","REPLACE [LOW_PRIORITY | DELAYED] [INTO]","VALUES","ON DUPLICATE KEY UPDATE","SET"]),s4=v(["CREATE [TEMPORARY] TABLE [IF NOT EXISTS]"]),Vw=v(["CREATE [OR REPLACE] [SQL SECURITY DEFINER | SQL SECURITY INVOKER] VIEW [IF NOT EXISTS]","UPDATE [LOW_PRIORITY] [IGNORE]","DELETE [LOW_PRIORITY] [QUICK] [IGNORE] FROM","DROP [TEMPORARY] TABLE [IF EXISTS]","ALTER TABLE","ADD [COLUMN]","{CHANGE | MODIFY} [COLUMN]","DROP [COLUMN]","RENAME [TO | AS]","RENAME COLUMN","ALTER [COLUMN]","{SET | DROP} DEFAULT","TRUNCATE [TABLE]","ALTER DATABASE","ALTER INSTANCE","ALTER RESOURCE GROUP","ALTER SEQUENCE","ALTER USER","ALTER VIEW","ANALYZE TABLE","CHECK TABLE","CHECKSUM TABLE","COMMIT","CREATE DATABASE","CREATE INDEX","CREATE RESOURCE GROUP","CREATE ROLE","CREATE SEQUENCE","CREATE USER","DEALLOCATE PREPARE","DESCRIBE","DROP DATABASE","DROP INDEX","DROP RESOURCE GROUP","DROP ROLE","DROP TABLESPACE","DROP USER","DROP VIEW","EXPLAIN","FLUSH","GRANT","IMPORT TABLE","INSTALL COMPONENT","INSTALL PLUGIN","KILL","LOAD DATA","LOCK INSTANCE FOR BACKUP","LOCK TABLES","OPTIMIZE TABLE","PREPARE","RELEASE SAVEPOINT","RENAME TABLE","RENAME USER","REPAIR TABLE","RESET","REVOKE","ROLLBACK","ROLLBACK TO SAVEPOINT","SAVEPOINT","SET CHARACTER SET","SET DEFAULT ROLE","SET NAMES","SET PASSWORD","SET RESOURCE GROUP","SET ROLE","SET TRANSACTION","SHOW","SHOW BINARY LOGS","SHOW BINLOG EVENTS","SHOW CHARACTER SET","SHOW COLLATION","SHOW COLUMNS","SHOW CREATE DATABASE","SHOW CREATE TABLE","SHOW CREATE USER","SHOW CREATE VIEW","SHOW DATABASES","SHOW ENGINE","SHOW ENGINES","SHOW ERRORS","SHOW EVENTS","SHOW GRANTS","SHOW INDEX","SHOW MASTER STATUS","SHOW OPEN TABLES","SHOW PLUGINS","SHOW PRIVILEGES","SHOW PROCESSLIST","SHOW PROFILE","SHOW PROFILES","SHOW STATUS","SHOW TABLE STATUS","SHOW TABLES","SHOW TRIGGERS","SHOW VARIABLES","SHOW WARNINGS","TABLE","UNINSTALL COMPONENT","UNINSTALL PLUGIN","UNLOCK INSTANCE","UNLOCK TABLES","USE"]),CDe=v(["UNION [ALL | DISTINCT]"]),bDe=v(["JOIN","{LEFT | RIGHT} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL [INNER] JOIN","NATURAL {LEFT | RIGHT} [OUTER] JOIN","STRAIGHT_JOIN"]),yDe=v(["ON {UPDATE | DELETE} [SET NULL]","CHARACTER SET","{ROWS | RANGE} BETWEEN","IDENTIFIED BY"]),wDe=v([]),gA={name:"tidb",tokenizerOptions:{reservedSelect:NDe,reservedClauses:[...ODe,...s4,...Vw],reservedSetOperations:CDe,reservedJoins:bDe,reservedKeywordPhrases:yDe,reservedDataTypePhrases:wDe,supportsXor:!0,reservedKeywords:e4,reservedDataTypes:t4,reservedFunctionNames:r4,stringTypes:['""-qq-bs',{quote:"''-qq-bs",prefixes:["N"]},{quote:"''-raw",prefixes:["B","X"],requirePrefix:!0}],identTypes:["``"],identChars:{first:"$",rest:"$",allowFirstCharNumber:!0},variableTypes:[{regex:"@@?[A-Za-z0-9_.$]+"},{quote:'""-qq-bs',prefixes:["@"],requirePrefix:!0},{quote:"''-qq-bs",prefixes:["@"],requirePrefix:!0},{quote:"``",prefixes:["@"],requirePrefix:!0}],paramTypes:{positional:!0},lineCommentTypes:["--","#"],operators:["%",":=","&","|","^","~","<<",">>","<=>","->","->>","&&","||","!","*.*"],postProcess:Oo},formatOptions:{onelineClauses:[...s4,...Vw],tabularOnelineClauses:Vw}}});var o4,a4=G(()=>{o4=["ABORT","ABS","ACOS","ADVISOR","ARRAY_AGG","ARRAY_AGG","ARRAY_APPEND","ARRAY_AVG","ARRAY_BINARY_SEARCH","ARRAY_CONCAT","ARRAY_CONTAINS","ARRAY_COUNT","ARRAY_DISTINCT","ARRAY_EXCEPT","ARRAY_FLATTEN","ARRAY_IFNULL","ARRAY_INSERT","ARRAY_INTERSECT","ARRAY_LENGTH","ARRAY_MAX","ARRAY_MIN","ARRAY_MOVE","ARRAY_POSITION","ARRAY_PREPEND","ARRAY_PUT","ARRAY_RANGE","ARRAY_REMOVE","ARRAY_REPEAT","ARRAY_REPLACE","ARRAY_REVERSE","ARRAY_SORT","ARRAY_STAR","ARRAY_SUM","ARRAY_SYMDIFF","ARRAY_SYMDIFF1","ARRAY_SYMDIFFN","ARRAY_UNION","ASIN","ATAN","ATAN2","AVG","BASE64","BASE64_DECODE","BASE64_ENCODE","BITAND ","BITCLEAR ","BITNOT ","BITOR ","BITSET ","BITSHIFT ","BITTEST ","BITXOR ","CEIL","CLOCK_LOCAL","CLOCK_MILLIS","CLOCK_STR","CLOCK_TZ","CLOCK_UTC","COALESCE","CONCAT","CONCAT2","CONTAINS","CONTAINS_TOKEN","CONTAINS_TOKEN_LIKE","CONTAINS_TOKEN_REGEXP","COS","COUNT","COUNT","COUNTN","CUME_DIST","CURL","DATE_ADD_MILLIS","DATE_ADD_STR","DATE_DIFF_MILLIS","DATE_DIFF_STR","DATE_FORMAT_STR","DATE_PART_MILLIS","DATE_PART_STR","DATE_RANGE_MILLIS","DATE_RANGE_STR","DATE_TRUNC_MILLIS","DATE_TRUNC_STR","DECODE","DECODE_JSON","DEGREES","DENSE_RANK","DURATION_TO_STR","ENCODED_SIZE","ENCODE_JSON","EXP","FIRST_VALUE","FLOOR","GREATEST","HAS_TOKEN","IFINF","IFMISSING","IFMISSINGORNULL","IFNAN","IFNANORINF","IFNULL","INITCAP","ISARRAY","ISATOM","ISBITSET","ISBOOLEAN","ISNUMBER","ISOBJECT","ISSTRING","LAG","LAST_VALUE","LEAD","LEAST","LENGTH","LN","LOG","LOWER","LTRIM","MAX","MEAN","MEDIAN","META","MILLIS","MILLIS_TO_LOCAL","MILLIS_TO_STR","MILLIS_TO_TZ","MILLIS_TO_UTC","MILLIS_TO_ZONE_NAME","MIN","MISSINGIF","NANIF","NEGINFIF","NOW_LOCAL","NOW_MILLIS","NOW_STR","NOW_TZ","NOW_UTC","NTH_VALUE","NTILE","NULLIF","NVL","NVL2","OBJECT_ADD","OBJECT_CONCAT","OBJECT_INNER_PAIRS","OBJECT_INNER_VALUES","OBJECT_LENGTH","OBJECT_NAMES","OBJECT_PAIRS","OBJECT_PUT","OBJECT_REMOVE","OBJECT_RENAME","OBJECT_REPLACE","OBJECT_UNWRAP","OBJECT_VALUES","PAIRS","PERCENT_RANK","PI","POLY_LENGTH","POSINFIF","POSITION","POWER","RADIANS","RANDOM","RANK","RATIO_TO_REPORT","REGEXP_CONTAINS","REGEXP_LIKE","REGEXP_MATCHES","REGEXP_POSITION","REGEXP_REPLACE","REGEXP_SPLIT","REGEX_CONTAINS","REGEX_LIKE","REGEX_MATCHES","REGEX_POSITION","REGEX_REPLACE","REGEX_SPLIT","REPEAT","REPLACE","REVERSE","ROUND","ROW_NUMBER","RTRIM","SEARCH","SEARCH_META","SEARCH_SCORE","SIGN","SIN","SPLIT","SQRT","STDDEV","STDDEV_POP","STDDEV_SAMP","STR_TO_DURATION","STR_TO_MILLIS","STR_TO_TZ","STR_TO_UTC","STR_TO_ZONE_NAME","SUBSTR","SUFFIXES","SUM","TAN","TITLE","TOARRAY","TOATOM","TOBOOLEAN","TOKENS","TOKENS","TONUMBER","TOOBJECT","TOSTRING","TRIM","TRUNC","UPPER","UUID","VARIANCE","VARIANCE_POP","VARIANCE_SAMP","VAR_POP","VAR_SAMP","WEEKDAY_MILLIS","WEEKDAY_STR","CAST"]});var l4,c4,u4=G(()=>{l4=["ADVISE","ALL","ALTER","ANALYZE","AND","ANY","ARRAY","AS","ASC","AT","BEGIN","BETWEEN","BINARY","BOOLEAN","BREAK","BUCKET","BUILD","BY","CALL","CASE","CAST","CLUSTER","COLLATE","COLLECTION","COMMIT","COMMITTED","CONNECT","CONTINUE","CORRELATED","COVER","CREATE","CURRENT","DATABASE","DATASET","DATASTORE","DECLARE","DECREMENT","DELETE","DERIVED","DESC","DESCRIBE","DISTINCT","DO","DROP","EACH","ELEMENT","ELSE","END","EVERY","EXCEPT","EXCLUDE","EXECUTE","EXISTS","EXPLAIN","FALSE","FETCH","FILTER","FIRST","FLATTEN","FLUSH","FOLLOWING","FOR","FORCE","FROM","FTS","FUNCTION","GOLANG","GRANT","GROUP","GROUPS","GSI","HASH","HAVING","IF","IGNORE","ILIKE","IN","INCLUDE","INCREMENT","INDEX","INFER","INLINE","INNER","INSERT","INTERSECT","INTO","IS","ISOLATION","JAVASCRIPT","JOIN","KEY","KEYS","KEYSPACE","KNOWN","LANGUAGE","LAST","LEFT","LET","LETTING","LEVEL","LIKE","LIMIT","LSM","MAP","MAPPING","MATCHED","MATERIALIZED","MERGE","MINUS","MISSING","NAMESPACE","NEST","NL","NO","NOT","NTH_VALUE","NULL","NULLS","NUMBER","OBJECT","OFFSET","ON","OPTION","OPTIONS","OR","ORDER","OTHERS","OUTER","OVER","PARSE","PARTITION","PASSWORD","PATH","POOL","PRECEDING","PREPARE","PRIMARY","PRIVATE","PRIVILEGE","PROBE","PROCEDURE","PUBLIC","RANGE","RAW","REALM","REDUCE","RENAME","RESPECT","RETURN","RETURNING","REVOKE","RIGHT","ROLE","ROLLBACK","ROW","ROWS","SATISFIES","SAVEPOINT","SCHEMA","SCOPE","SELECT","SELF","SEMI","SET","SHOW","SOME","START","STATISTICS","STRING","SYSTEM","THEN","TIES","TO","TRAN","TRANSACTION","TRIGGER","TRUE","TRUNCATE","UNBOUNDED","UNDER","UNION","UNIQUE","UNKNOWN","UNNEST","UNSET","UPDATE","UPSERT","USE","USER","USING","VALIDATE","VALUE","VALUED","VALUES","VIA","VIEW","WHEN","WHERE","WHILE","WINDOW","WITH","WITHIN","WORK","XOR"],c4=[]});var LDe,DDe,d4,PDe,xDe,vDe,MDe,IA,Xw=G(()=>{qt();a4();u4();LDe=v(["SELECT [ALL | DISTINCT]"]),DDe=v(["WITH","FROM","WHERE","GROUP BY","HAVING","WINDOW","PARTITION BY","ORDER BY","LIMIT","OFFSET","INSERT INTO","VALUES","SET","MERGE INTO","WHEN [NOT] MATCHED THEN","UPDATE SET","INSERT","NEST","UNNEST","RETURNING"]),d4=v(["UPDATE","DELETE FROM","SET SCHEMA","ADVISE","ALTER INDEX","BEGIN TRANSACTION","BUILD INDEX","COMMIT TRANSACTION","CREATE COLLECTION","CREATE FUNCTION","CREATE INDEX","CREATE PRIMARY INDEX","CREATE SCOPE","DROP COLLECTION","DROP FUNCTION","DROP INDEX","DROP PRIMARY INDEX","DROP SCOPE","EXECUTE","EXECUTE FUNCTION","EXPLAIN","GRANT","INFER","PREPARE","REVOKE","ROLLBACK TRANSACTION","SAVEPOINT","SET TRANSACTION","UPDATE STATISTICS","UPSERT","LET","SET CURRENT SCHEMA","SHOW","USE [PRIMARY] KEYS"]),PDe=v(["UNION [ALL]","EXCEPT [ALL]","INTERSECT [ALL]"]),xDe=v(["JOIN","{LEFT | RIGHT} [OUTER] JOIN","INNER JOIN"]),vDe=v(["{ROWS | RANGE | GROUPS} BETWEEN"]),MDe=v([]),IA={name:"n1ql",tokenizerOptions:{reservedSelect:LDe,reservedClauses:[...DDe,...d4],reservedSetOperations:PDe,reservedJoins:xDe,reservedKeywordPhrases:vDe,reservedDataTypePhrases:MDe,supportsXor:!0,reservedKeywords:l4,reservedDataTypes:c4,reservedFunctionNames:o4,stringTypes:['""-bs',"''-bs"],identTypes:["``"],extraParens:["[]","{}"],paramTypes:{positional:!0,numbered:["$"],named:["$"]},lineCommentTypes:["#","--"],operators:["%","==",":","||"]},formatOptions:{onelineClauses:d4}}});var f4,E4,h4=G(()=>{f4=["ADD","AGENT","AGGREGATE","ALL","ALTER","AND","ANY","ARROW","AS","ASC","AT","ATTRIBUTE","AUTHID","AVG","BEGIN","BETWEEN","BLOCK","BODY","BOTH","BOUND","BULK","BY","BYTE","CALL","CALLING","CASCADE","CASE","CHARSET","CHARSETFORM","CHARSETID","CHECK","CLOSE","CLUSTER","CLUSTERS","COLAUTH","COLLECT","COLUMNS","COMMENT","COMMIT","COMMITTED","COMPILED","COMPRESS","CONNECT","CONSTANT","CONSTRUCTOR","CONTEXT","CONVERT","COUNT","CRASH","CREATE","CURRENT","CURSOR","CUSTOMDATUM","DANGLING","DATA","DAY","DECLARE","DEFAULT","DEFINE","DELETE","DESC","DETERMINISTIC","DISTINCT","DROP","DURATION","ELEMENT","ELSE","ELSIF","EMPTY","END","ESCAPE","EXCEPT","EXCEPTION","EXCEPTIONS","EXCLUSIVE","EXECUTE","EXISTS","EXIT","EXTERNAL","FETCH","FINAL","FIXED","FOR","FORALL","FORCE","FORM","FROM","FUNCTION","GENERAL","GOTO","GRANT","GROUP","HASH","HAVING","HEAP","HIDDEN","HOUR","IDENTIFIED","IF","IMMEDIATE","IN","INCLUDING","INDEX","INDEXES","INDICATOR","INDICES","INFINITE","INSERT","INSTANTIABLE","INTERFACE","INTERSECT","INTERVAL","INTO","INVALIDATE","IS","ISOLATION","JAVA","LANGUAGE","LARGE","LEADING","LENGTH","LEVEL","LIBRARY","LIKE","LIKE2","LIKE4","LIKEC","LIMIT","LIMITED","LOCAL","LOCK","LOOP","MAP","MAX","MAXLEN","MEMBER","MERGE","MIN","MINUS","MINUTE","MOD","MODE","MODIFY","MONTH","MULTISET","NAME","NAN","NATIONAL","NATIVE","NEW","NOCOMPRESS","NOCOPY","NOT","NOWAIT","NULL","OBJECT","OCICOLL","OCIDATE","OCIDATETIME","OCIDURATION","OCIINTERVAL","OCILOBLOCATOR","OCINUMBER","OCIRAW","OCIREF","OCIREFCURSOR","OCIROWID","OCISTRING","OCITYPE","OF","ON","ONLY","OPAQUE","OPEN","OPERATOR","OPTION","OR","ORACLE","ORADATA","ORDER","OVERLAPS","ORGANIZATION","ORLANY","ORLVARY","OTHERS","OUT","OVERRIDING","PACKAGE","PARALLEL_ENABLE","PARAMETER","PARAMETERS","PARTITION","PASCAL","PIPE","PIPELINED","PRAGMA","PRIOR","PRIVATE","PROCEDURE","PUBLIC","RAISE","RANGE","READ","RECORD","REF","REFERENCE","REM","REMAINDER","RENAME","RESOURCE","RESULT","RETURN","RETURNING","REVERSE","REVOKE","ROLLBACK","ROW","SAMPLE","SAVE","SAVEPOINT","SB1","SB2","SB4","SECOND","SEGMENT","SELECT","SELF","SEPARATE","SEQUENCE","SERIALIZABLE","SET","SHARE","SHORT","SIZE","SIZE_T","SOME","SPARSE","SQL","SQLCODE","SQLDATA","SQLNAME","SQLSTATE","STANDARD","START","STATIC","STDDEV","STORED","STRING","STRUCT","STYLE","SUBMULTISET","SUBPARTITION","SUBSTITUTABLE","SUBTYPE","SUM","SYNONYM","TABAUTH","TABLE","TDO","THE","THEN","TIME","TIMEZONE_ABBR","TIMEZONE_HOUR","TIMEZONE_MINUTE","TIMEZONE_REGION","TO","TRAILING","TRANSAC","TRANSACTIONAL","TRUSTED","TYPE","UB1","UB2","UB4","UNDER","UNION","UNIQUE","UNSIGNED","UNTRUSTED","UPDATE","USE","USING","VALIST","VALUE","VALUES","VARIABLE","VARIANCE","VARRAY","VIEW","VIEWS","VOID","WHEN","WHERE","WHILE","WITH","WORK","WRAPPED","WRITE","YEAR","ZONE"],E4=["ARRAY","BFILE_BASE","BINARY","BLOB_BASE","CHAR VARYING","CHAR_BASE","CHAR","CHARACTER VARYING","CHARACTER","CLOB_BASE","DATE_BASE","DATE","DECIMAL","DOUBLE","FLOAT","INT","INTERVAL DAY","INTERVAL YEAR","LONG","NATIONAL CHAR VARYING","NATIONAL CHAR","NATIONAL CHARACTER VARYING","NATIONAL CHARACTER","NCHAR VARYING","NCHAR","NCHAR","NUMBER_BASE","NUMBER","NUMBERIC","NVARCHAR","PRECISION","RAW","TIMESTAMP","UROWID","VARCHAR","VARCHAR2"]});var p4,T4=G(()=>{p4=["ABS","ACOS","ASIN","ATAN","ATAN2","BITAND","CEIL","COS","COSH","EXP","FLOOR","LN","LOG","MOD","NANVL","POWER","REMAINDER","ROUND","SIGN","SIN","SINH","SQRT","TAN","TANH","TRUNC","WIDTH_BUCKET","CHR","CONCAT","INITCAP","LOWER","LPAD","LTRIM","NLS_INITCAP","NLS_LOWER","NLSSORT","NLS_UPPER","REGEXP_REPLACE","REGEXP_SUBSTR","REPLACE","RPAD","RTRIM","SOUNDEX","SUBSTR","TRANSLATE","TREAT","TRIM","UPPER","NLS_CHARSET_DECL_LEN","NLS_CHARSET_ID","NLS_CHARSET_NAME","ASCII","INSTR","LENGTH","REGEXP_INSTR","ADD_MONTHS","CURRENT_DATE","CURRENT_TIMESTAMP","DBTIMEZONE","EXTRACT","FROM_TZ","LAST_DAY","LOCALTIMESTAMP","MONTHS_BETWEEN","NEW_TIME","NEXT_DAY","NUMTODSINTERVAL","NUMTOYMINTERVAL","ROUND","SESSIONTIMEZONE","SYS_EXTRACT_UTC","SYSDATE","SYSTIMESTAMP","TO_CHAR","TO_TIMESTAMP","TO_TIMESTAMP_TZ","TO_DSINTERVAL","TO_YMINTERVAL","TRUNC","TZ_OFFSET","GREATEST","LEAST","ASCIISTR","BIN_TO_NUM","CAST","CHARTOROWID","COMPOSE","CONVERT","DECOMPOSE","HEXTORAW","NUMTODSINTERVAL","NUMTOYMINTERVAL","RAWTOHEX","RAWTONHEX","ROWIDTOCHAR","ROWIDTONCHAR","SCN_TO_TIMESTAMP","TIMESTAMP_TO_SCN","TO_BINARY_DOUBLE","TO_BINARY_FLOAT","TO_CHAR","TO_CLOB","TO_DATE","TO_DSINTERVAL","TO_LOB","TO_MULTI_BYTE","TO_NCHAR","TO_NCLOB","TO_NUMBER","TO_DSINTERVAL","TO_SINGLE_BYTE","TO_TIMESTAMP","TO_TIMESTAMP_TZ","TO_YMINTERVAL","TO_YMINTERVAL","TRANSLATE","UNISTR","BFILENAME","EMPTY_BLOB,","EMPTY_CLOB","CARDINALITY","COLLECT","POWERMULTISET","POWERMULTISET_BY_CARDINALITY","SET","SYS_CONNECT_BY_PATH","CLUSTER_ID","CLUSTER_PROBABILITY","CLUSTER_SET","FEATURE_ID","FEATURE_SET","FEATURE_VALUE","PREDICTION","PREDICTION_COST","PREDICTION_DETAILS","PREDICTION_PROBABILITY","PREDICTION_SET","APPENDCHILDXML","DELETEXML","DEPTH","EXTRACT","EXISTSNODE","EXTRACTVALUE","INSERTCHILDXML","INSERTXMLBEFORE","PATH","SYS_DBURIGEN","SYS_XMLAGG","SYS_XMLGEN","UPDATEXML","XMLAGG","XMLCDATA","XMLCOLATTVAL","XMLCOMMENT","XMLCONCAT","XMLFOREST","XMLPARSE","XMLPI","XMLQUERY","XMLROOT","XMLSEQUENCE","XMLSERIALIZE","XMLTABLE","XMLTRANSFORM","DECODE","DUMP","ORA_HASH","VSIZE","COALESCE","LNNVL","NULLIF","NVL","NVL2","SYS_CONTEXT","SYS_GUID","SYS_TYPEID","UID","USER","USERENV","AVG","COLLECT","CORR","CORR_S","CORR_K","COUNT","COVAR_POP","COVAR_SAMP","CUME_DIST","DENSE_RANK","FIRST","GROUP_ID","GROUPING","GROUPING_ID","LAST","MAX","MEDIAN","MIN","PERCENTILE_CONT","PERCENTILE_DISC","PERCENT_RANK","RANK","REGR_SLOPE","REGR_INTERCEPT","REGR_COUNT","REGR_R2","REGR_AVGX","REGR_AVGY","REGR_SXX","REGR_SYY","REGR_SXY","STATS_BINOMIAL_TEST","STATS_CROSSTAB","STATS_F_TEST","STATS_KS_TEST","STATS_MODE","STATS_MW_TEST","STATS_ONE_WAY_ANOVA","STATS_T_TEST_ONE","STATS_T_TEST_PAIRED","STATS_T_TEST_INDEP","STATS_T_TEST_INDEPU","STATS_WSR_TEST","STDDEV","STDDEV_POP","STDDEV_SAMP","SUM","VAR_POP","VAR_SAMP","VARIANCE","FIRST_VALUE","LAG","LAST_VALUE","LEAD","NTILE","RATIO_TO_REPORT","ROW_NUMBER","DEREF","MAKE_REF","REF","REFTOHEX","VALUE","CV","ITERATION_NUMBER","PRESENTNNV","PRESENTV","PREVIOUS"]});function kDe(t){let e=zi;return t.map(n=>ui.SET(n)&&ui.BY(e)?Object.assign(Object.assign({},n),{type:Y.RESERVED_KEYWORD}):(EA(n.type)&&(e=n),n))}var UDe,BDe,S4,zw,FDe,HDe,GDe,$De,_A,jw=G(()=>{qt();Yr();h4();T4();UDe=v(["SELECT [ALL | DISTINCT | UNIQUE]"]),BDe=v(["WITH","FROM","WHERE","GROUP BY","HAVING","PARTITION BY","ORDER [SIBLINGS] BY","OFFSET","FETCH {FIRST | NEXT}","FOR UPDATE [OF]","INSERT [INTO | ALL INTO]","VALUES","SET","MERGE [INTO]","WHEN [NOT] MATCHED [THEN]","UPDATE SET","RETURNING"]),S4=v(["CREATE [GLOBAL TEMPORARY | PRIVATE TEMPORARY | SHARDED | DUPLICATED | IMMUTABLE BLOCKCHAIN | BLOCKCHAIN | IMMUTABLE] TABLE"]),zw=v(["CREATE [OR REPLACE] [NO FORCE | FORCE] [EDITIONING | EDITIONABLE | EDITIONABLE EDITIONING | NONEDITIONABLE] VIEW","CREATE MATERIALIZED VIEW","UPDATE [ONLY]","DELETE FROM [ONLY]","DROP TABLE","ALTER TABLE","ADD","DROP {COLUMN | UNUSED COLUMNS | COLUMNS CONTINUE}","MODIFY","RENAME TO","RENAME COLUMN","TRUNCATE TABLE","SET SCHEMA","BEGIN","CONNECT BY","DECLARE","EXCEPT","EXCEPTION","LOOP","START WITH"]),FDe=v(["UNION [ALL]","MINUS","INTERSECT"]),HDe=v(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL [INNER] JOIN","NATURAL {LEFT | RIGHT | FULL} [OUTER] JOIN","{CROSS | OUTER} APPLY"]),GDe=v(["ON {UPDATE | DELETE} [SET NULL]","ON COMMIT","{ROWS | RANGE} BETWEEN"]),$De=v([]),_A={name:"plsql",tokenizerOptions:{reservedSelect:UDe,reservedClauses:[...BDe,...S4,...zw],reservedSetOperations:FDe,reservedJoins:HDe,reservedKeywordPhrases:GDe,reservedDataTypePhrases:$De,supportsXor:!0,reservedKeywords:f4,reservedDataTypes:E4,reservedFunctionNames:p4,stringTypes:[{quote:"''-qq",prefixes:["N"]},{quote:"q''",prefixes:["N"]}],identTypes:['""-qq'],identChars:{rest:"$#"},variableTypes:[{regex:"&{1,2}[A-Za-z][A-Za-z0-9_$#]*"}],paramTypes:{numbered:[":"],named:[":"]},operators:["**",":=","%","~=","^=",">>","<<","=>","@","||"],postProcess:kDe},formatOptions:{alwaysDenseOperators:["@"],onelineClauses:[...S4,...zw],tabularOnelineClauses:zw}}});var R4,A4=G(()=>{R4=["ABS","ACOS","ACOSD","ACOSH","ASIN","ASIND","ASINH","ATAN","ATAN2","ATAN2D","ATAND","ATANH","CBRT","CEIL","CEILING","COS","COSD","COSH","COT","COTD","DEGREES","DIV","EXP","FACTORIAL","FLOOR","GCD","LCM","LN","LOG","LOG10","MIN_SCALE","MOD","PI","POWER","RADIANS","RANDOM","ROUND","SCALE","SETSEED","SIGN","SIN","SIND","SINH","SQRT","TAN","TAND","TANH","TRIM_SCALE","TRUNC","WIDTH_BUCKET","ABS","ASCII","BIT_LENGTH","BTRIM","CHARACTER_LENGTH","CHAR_LENGTH","CHR","CONCAT","CONCAT_WS","FORMAT","INITCAP","LEFT","LENGTH","LOWER","LPAD","LTRIM","MD5","NORMALIZE","OCTET_LENGTH","OVERLAY","PARSE_IDENT","PG_CLIENT_ENCODING","POSITION","QUOTE_IDENT","QUOTE_LITERAL","QUOTE_NULLABLE","REGEXP_MATCH","REGEXP_MATCHES","REGEXP_REPLACE","REGEXP_SPLIT_TO_ARRAY","REGEXP_SPLIT_TO_TABLE","REPEAT","REPLACE","REVERSE","RIGHT","RPAD","RTRIM","SPLIT_PART","SPRINTF","STARTS_WITH","STRING_AGG","STRING_TO_ARRAY","STRING_TO_TABLE","STRPOS","SUBSTR","SUBSTRING","TO_ASCII","TO_HEX","TRANSLATE","TRIM","UNISTR","UPPER","BIT_COUNT","BIT_LENGTH","BTRIM","CONVERT","CONVERT_FROM","CONVERT_TO","DECODE","ENCODE","GET_BIT","GET_BYTE","LENGTH","LTRIM","MD5","OCTET_LENGTH","OVERLAY","POSITION","RTRIM","SET_BIT","SET_BYTE","SHA224","SHA256","SHA384","SHA512","STRING_AGG","SUBSTR","SUBSTRING","TRIM","BIT_COUNT","BIT_LENGTH","GET_BIT","LENGTH","OCTET_LENGTH","OVERLAY","POSITION","SET_BIT","SUBSTRING","REGEXP_MATCH","REGEXP_MATCHES","REGEXP_REPLACE","REGEXP_SPLIT_TO_ARRAY","REGEXP_SPLIT_TO_TABLE","TO_CHAR","TO_DATE","TO_NUMBER","TO_TIMESTAMP","CLOCK_TIMESTAMP","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","DATE_BIN","DATE_PART","DATE_TRUNC","EXTRACT","ISFINITE","JUSTIFY_DAYS","JUSTIFY_HOURS","JUSTIFY_INTERVAL","LOCALTIME","LOCALTIMESTAMP","MAKE_DATE","MAKE_INTERVAL","MAKE_TIME","MAKE_TIMESTAMP","MAKE_TIMESTAMPTZ","NOW","PG_SLEEP","PG_SLEEP_FOR","PG_SLEEP_UNTIL","STATEMENT_TIMESTAMP","TIMEOFDAY","TO_TIMESTAMP","TRANSACTION_TIMESTAMP","ENUM_FIRST","ENUM_LAST","ENUM_RANGE","AREA","BOUND_BOX","BOX","CENTER","CIRCLE","DIAGONAL","DIAMETER","HEIGHT","ISCLOSED","ISOPEN","LENGTH","LINE","LSEG","NPOINTS","PATH","PCLOSE","POINT","POLYGON","POPEN","RADIUS","SLOPE","WIDTH","ABBREV","BROADCAST","FAMILY","HOST","HOSTMASK","INET_MERGE","INET_SAME_FAMILY","MACADDR8_SET7BIT","MASKLEN","NETMASK","NETWORK","SET_MASKLEN","TRUNC","ARRAY_TO_TSVECTOR","GET_CURRENT_TS_CONFIG","JSONB_TO_TSVECTOR","JSON_TO_TSVECTOR","LENGTH","NUMNODE","PHRASETO_TSQUERY","PLAINTO_TSQUERY","QUERYTREE","SETWEIGHT","STRIP","TO_TSQUERY","TO_TSVECTOR","TSQUERY_PHRASE","TSVECTOR_TO_ARRAY","TS_DEBUG","TS_DELETE","TS_FILTER","TS_HEADLINE","TS_LEXIZE","TS_PARSE","TS_RANK","TS_RANK_CD","TS_REWRITE","TS_STAT","TS_TOKEN_TYPE","WEBSEARCH_TO_TSQUERY","GEN_RANDOM_UUID","UUIDV4","UUIDV7","UUID_EXTRACT_TIMESTAMP","UUID_EXTRACT_VERSION","CURSOR_TO_XML","CURSOR_TO_XMLSCHEMA","DATABASE_TO_XML","DATABASE_TO_XMLSCHEMA","DATABASE_TO_XML_AND_XMLSCHEMA","NEXTVAL","QUERY_TO_XML","QUERY_TO_XMLSCHEMA","QUERY_TO_XML_AND_XMLSCHEMA","SCHEMA_TO_XML","SCHEMA_TO_XMLSCHEMA","SCHEMA_TO_XML_AND_XMLSCHEMA","STRING","TABLE_TO_XML","TABLE_TO_XMLSCHEMA","TABLE_TO_XML_AND_XMLSCHEMA","XMLAGG","XMLCOMMENT","XMLCONCAT","XMLELEMENT","XMLEXISTS","XMLFOREST","XMLPARSE","XMLPI","XMLROOT","XMLSERIALIZE","XMLTABLE","XML_IS_WELL_FORMED","XML_IS_WELL_FORMED_CONTENT","XML_IS_WELL_FORMED_DOCUMENT","XPATH","XPATH_EXISTS","ARRAY_TO_JSON","JSONB_AGG","JSONB_ARRAY_ELEMENTS","JSONB_ARRAY_ELEMENTS_TEXT","JSONB_ARRAY_LENGTH","JSONB_BUILD_ARRAY","JSONB_BUILD_OBJECT","JSONB_EACH","JSONB_EACH_TEXT","JSONB_EXTRACT_PATH","JSONB_EXTRACT_PATH_TEXT","JSONB_INSERT","JSONB_OBJECT","JSONB_OBJECT_AGG","JSONB_OBJECT_KEYS","JSONB_PATH_EXISTS","JSONB_PATH_EXISTS_TZ","JSONB_PATH_MATCH","JSONB_PATH_MATCH_TZ","JSONB_PATH_QUERY","JSONB_PATH_QUERY_ARRAY","JSONB_PATH_QUERY_ARRAY_TZ","JSONB_PATH_QUERY_FIRST","JSONB_PATH_QUERY_FIRST_TZ","JSONB_PATH_QUERY_TZ","JSONB_POPULATE_RECORD","JSONB_POPULATE_RECORDSET","JSONB_PRETTY","JSONB_SET","JSONB_SET_LAX","JSONB_STRIP_NULLS","JSONB_TO_RECORD","JSONB_TO_RECORDSET","JSONB_TYPEOF","JSON_AGG","JSON_ARRAY_ELEMENTS","JSON_ARRAY_ELEMENTS_TEXT","JSON_ARRAY_LENGTH","JSON_BUILD_ARRAY","JSON_BUILD_OBJECT","JSON_EACH","JSON_EACH_TEXT","JSON_EXTRACT_PATH","JSON_EXTRACT_PATH_TEXT","JSON_OBJECT","JSON_OBJECT_AGG","JSON_OBJECT_KEYS","JSON_POPULATE_RECORD","JSON_POPULATE_RECORDSET","JSON_STRIP_NULLS","JSON_TO_RECORD","JSON_TO_RECORDSET","JSON_TYPEOF","ROW_TO_JSON","TO_JSON","TO_JSONB","TO_TIMESTAMP","CURRVAL","LASTVAL","NEXTVAL","SETVAL","COALESCE","GREATEST","LEAST","NULLIF","ARRAY_AGG","ARRAY_APPEND","ARRAY_CAT","ARRAY_DIMS","ARRAY_FILL","ARRAY_LENGTH","ARRAY_LOWER","ARRAY_NDIMS","ARRAY_POSITION","ARRAY_POSITIONS","ARRAY_PREPEND","ARRAY_REMOVE","ARRAY_REPLACE","ARRAY_TO_STRING","ARRAY_UPPER","CARDINALITY","STRING_TO_ARRAY","TRIM_ARRAY","UNNEST","ISEMPTY","LOWER","LOWER_INC","LOWER_INF","MULTIRANGE","RANGE_MERGE","UPPER","UPPER_INC","UPPER_INF","ARRAY_AGG","AVG","BIT_AND","BIT_OR","BIT_XOR","BOOL_AND","BOOL_OR","COALESCE","CORR","COUNT","COVAR_POP","COVAR_SAMP","CUME_DIST","DENSE_RANK","EVERY","GROUPING","JSONB_AGG","JSONB_OBJECT_AGG","JSON_AGG","JSON_OBJECT_AGG","MAX","MIN","MODE","PERCENTILE_CONT","PERCENTILE_DISC","PERCENT_RANK","RANGE_AGG","RANGE_INTERSECT_AGG","RANK","REGR_AVGX","REGR_AVGY","REGR_COUNT","REGR_INTERCEPT","REGR_R2","REGR_SLOPE","REGR_SXX","REGR_SXY","REGR_SYY","STDDEV","STDDEV_POP","STDDEV_SAMP","STRING_AGG","SUM","TO_JSON","TO_JSONB","VARIANCE","VAR_POP","VAR_SAMP","XMLAGG","CUME_DIST","DENSE_RANK","FIRST_VALUE","LAG","LAST_VALUE","LEAD","NTH_VALUE","NTILE","PERCENT_RANK","RANK","ROW_NUMBER","GENERATE_SERIES","GENERATE_SUBSCRIPTS","ACLDEFAULT","ACLEXPLODE","COL_DESCRIPTION","CURRENT_CATALOG","CURRENT_DATABASE","CURRENT_QUERY","CURRENT_ROLE","CURRENT_SCHEMA","CURRENT_SCHEMAS","CURRENT_USER","FORMAT_TYPE","HAS_ANY_COLUMN_PRIVILEGE","HAS_COLUMN_PRIVILEGE","HAS_DATABASE_PRIVILEGE","HAS_FOREIGN_DATA_WRAPPER_PRIVILEGE","HAS_FUNCTION_PRIVILEGE","HAS_LANGUAGE_PRIVILEGE","HAS_SCHEMA_PRIVILEGE","HAS_SEQUENCE_PRIVILEGE","HAS_SERVER_PRIVILEGE","HAS_TABLESPACE_PRIVILEGE","HAS_TABLE_PRIVILEGE","HAS_TYPE_PRIVILEGE","INET_CLIENT_ADDR","INET_CLIENT_PORT","INET_SERVER_ADDR","INET_SERVER_PORT","MAKEACLITEM","OBJ_DESCRIPTION","PG_BACKEND_PID","PG_BLOCKING_PIDS","PG_COLLATION_IS_VISIBLE","PG_CONF_LOAD_TIME","PG_CONTROL_CHECKPOINT","PG_CONTROL_INIT","PG_CONTROL_SYSTEM","PG_CONVERSION_IS_VISIBLE","PG_CURRENT_LOGFILE","PG_CURRENT_SNAPSHOT","PG_CURRENT_XACT_ID","PG_CURRENT_XACT_ID_IF_ASSIGNED","PG_DESCRIBE_OBJECT","PG_FUNCTION_IS_VISIBLE","PG_GET_CATALOG_FOREIGN_KEYS","PG_GET_CONSTRAINTDEF","PG_GET_EXPR","PG_GET_FUNCTIONDEF","PG_GET_FUNCTION_ARGUMENTS","PG_GET_FUNCTION_IDENTITY_ARGUMENTS","PG_GET_FUNCTION_RESULT","PG_GET_INDEXDEF","PG_GET_KEYWORDS","PG_GET_OBJECT_ADDRESS","PG_GET_OWNED_SEQUENCE","PG_GET_RULEDEF","PG_GET_SERIAL_SEQUENCE","PG_GET_STATISTICSOBJDEF","PG_GET_TRIGGERDEF","PG_GET_USERBYID","PG_GET_VIEWDEF","PG_HAS_ROLE","PG_IDENTIFY_OBJECT","PG_IDENTIFY_OBJECT_AS_ADDRESS","PG_INDEXAM_HAS_PROPERTY","PG_INDEX_COLUMN_HAS_PROPERTY","PG_INDEX_HAS_PROPERTY","PG_IS_OTHER_TEMP_SCHEMA","PG_JIT_AVAILABLE","PG_LAST_COMMITTED_XACT","PG_LISTENING_CHANNELS","PG_MY_TEMP_SCHEMA","PG_NOTIFICATION_QUEUE_USAGE","PG_OPCLASS_IS_VISIBLE","PG_OPERATOR_IS_VISIBLE","PG_OPFAMILY_IS_VISIBLE","PG_OPTIONS_TO_TABLE","PG_POSTMASTER_START_TIME","PG_SAFE_SNAPSHOT_BLOCKING_PIDS","PG_SNAPSHOT_XIP","PG_SNAPSHOT_XMAX","PG_SNAPSHOT_XMIN","PG_STATISTICS_OBJ_IS_VISIBLE","PG_TABLESPACE_DATABASES","PG_TABLESPACE_LOCATION","PG_TABLE_IS_VISIBLE","PG_TRIGGER_DEPTH","PG_TS_CONFIG_IS_VISIBLE","PG_TS_DICT_IS_VISIBLE","PG_TS_PARSER_IS_VISIBLE","PG_TS_TEMPLATE_IS_VISIBLE","PG_TYPEOF","PG_TYPE_IS_VISIBLE","PG_VISIBLE_IN_SNAPSHOT","PG_XACT_COMMIT_TIMESTAMP","PG_XACT_COMMIT_TIMESTAMP_ORIGIN","PG_XACT_STATUS","PQSERVERVERSION","ROW_SECURITY_ACTIVE","SESSION_USER","SHOBJ_DESCRIPTION","TO_REGCLASS","TO_REGCOLLATION","TO_REGNAMESPACE","TO_REGOPER","TO_REGOPERATOR","TO_REGPROC","TO_REGPROCEDURE","TO_REGROLE","TO_REGTYPE","TXID_CURRENT","TXID_CURRENT_IF_ASSIGNED","TXID_CURRENT_SNAPSHOT","TXID_SNAPSHOT_XIP","TXID_SNAPSHOT_XMAX","TXID_SNAPSHOT_XMIN","TXID_STATUS","TXID_VISIBLE_IN_SNAPSHOT","USER","VERSION","BRIN_DESUMMARIZE_RANGE","BRIN_SUMMARIZE_NEW_VALUES","BRIN_SUMMARIZE_RANGE","CONVERT_FROM","CURRENT_SETTING","GIN_CLEAN_PENDING_LIST","PG_ADVISORY_LOCK","PG_ADVISORY_LOCK_SHARED","PG_ADVISORY_UNLOCK","PG_ADVISORY_UNLOCK_ALL","PG_ADVISORY_UNLOCK_SHARED","PG_ADVISORY_XACT_LOCK","PG_ADVISORY_XACT_LOCK_SHARED","PG_BACKUP_START_TIME","PG_CANCEL_BACKEND","PG_COLLATION_ACTUAL_VERSION","PG_COLUMN_COMPRESSION","PG_COLUMN_SIZE","PG_COPY_LOGICAL_REPLICATION_SLOT","PG_COPY_PHYSICAL_REPLICATION_SLOT","PG_CREATE_LOGICAL_REPLICATION_SLOT","PG_CREATE_PHYSICAL_REPLICATION_SLOT","PG_CREATE_RESTORE_POINT","PG_CURRENT_WAL_FLUSH_LSN","PG_CURRENT_WAL_INSERT_LSN","PG_CURRENT_WAL_LSN","PG_DATABASE_SIZE","PG_DROP_REPLICATION_SLOT","PG_EXPORT_SNAPSHOT","PG_FILENODE_RELATION","PG_GET_WAL_REPLAY_PAUSE_STATE","PG_IMPORT_SYSTEM_COLLATIONS","PG_INDEXES_SIZE","PG_IS_IN_BACKUP","PG_IS_IN_RECOVERY","PG_IS_WAL_REPLAY_PAUSED","PG_LAST_WAL_RECEIVE_LSN","PG_LAST_WAL_REPLAY_LSN","PG_LAST_XACT_REPLAY_TIMESTAMP","PG_LOGICAL_EMIT_MESSAGE","PG_LOGICAL_SLOT_GET_BINARY_CHANGES","PG_LOGICAL_SLOT_GET_CHANGES","PG_LOGICAL_SLOT_PEEK_BINARY_CHANGES","PG_LOGICAL_SLOT_PEEK_CHANGES","PG_LOG_BACKEND_MEMORY_CONTEXTS","PG_LS_ARCHIVE_STATUSDIR","PG_LS_DIR","PG_LS_LOGDIR","PG_LS_TMPDIR","PG_LS_WALDIR","PG_PARTITION_ANCESTORS","PG_PARTITION_ROOT","PG_PARTITION_TREE","PG_PROMOTE","PG_READ_BINARY_FILE","PG_READ_FILE","PG_RELATION_FILENODE","PG_RELATION_FILEPATH","PG_RELATION_SIZE","PG_RELOAD_CONF","PG_REPLICATION_ORIGIN_ADVANCE","PG_REPLICATION_ORIGIN_CREATE","PG_REPLICATION_ORIGIN_DROP","PG_REPLICATION_ORIGIN_OID","PG_REPLICATION_ORIGIN_PROGRESS","PG_REPLICATION_ORIGIN_SESSION_IS_SETUP","PG_REPLICATION_ORIGIN_SESSION_PROGRESS","PG_REPLICATION_ORIGIN_SESSION_RESET","PG_REPLICATION_ORIGIN_SESSION_SETUP","PG_REPLICATION_ORIGIN_XACT_RESET","PG_REPLICATION_ORIGIN_XACT_SETUP","PG_REPLICATION_SLOT_ADVANCE","PG_ROTATE_LOGFILE","PG_SIZE_BYTES","PG_SIZE_PRETTY","PG_START_BACKUP","PG_STAT_FILE","PG_STOP_BACKUP","PG_SWITCH_WAL","PG_TABLESPACE_SIZE","PG_TABLE_SIZE","PG_TERMINATE_BACKEND","PG_TOTAL_RELATION_SIZE","PG_TRY_ADVISORY_LOCK","PG_TRY_ADVISORY_LOCK_SHARED","PG_TRY_ADVISORY_XACT_LOCK","PG_TRY_ADVISORY_XACT_LOCK_SHARED","PG_WALFILE_NAME","PG_WALFILE_NAME_OFFSET","PG_WAL_LSN_DIFF","PG_WAL_REPLAY_PAUSE","PG_WAL_REPLAY_RESUME","SET_CONFIG","SUPPRESS_REDUNDANT_UPDATES_TRIGGER","TSVECTOR_UPDATE_TRIGGER","TSVECTOR_UPDATE_TRIGGER_COLUMN","PG_EVENT_TRIGGER_DDL_COMMANDS","PG_EVENT_TRIGGER_DROPPED_OBJECTS","PG_EVENT_TRIGGER_TABLE_REWRITE_OID","PG_EVENT_TRIGGER_TABLE_REWRITE_REASON","PG_GET_OBJECT_ADDRESS","PG_MCV_LIST_ITEMS","CAST"]});var m4,g4,I4=G(()=>{m4=["ALL","ANALYSE","ANALYZE","AND","ANY","AS","ASC","ASYMMETRIC","AUTHORIZATION","BETWEEN","BINARY","BOTH","CASE","CAST","CHECK","COLLATE","COLLATION","COLUMN","CONCURRENTLY","CONSTRAINT","CREATE","CROSS","CURRENT_CATALOG","CURRENT_DATE","CURRENT_ROLE","CURRENT_SCHEMA","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","DAY","DEFAULT","DEFERRABLE","DESC","DISTINCT","DO","ELSE","END","EXCEPT","EXISTS","FALSE","FETCH","FILTER","FOR","FOREIGN","FREEZE","FROM","FULL","GRANT","GROUP","HAVING","HOUR","ILIKE","IN","INITIALLY","INNER","INOUT","INTERSECT","INTO","IS","ISNULL","JOIN","LATERAL","LEADING","LEFT","LIKE","LIMIT","LOCALTIME","LOCALTIMESTAMP","MINUTE","MONTH","NATURAL","NOT","NOTNULL","NULL","NULLIF","OFFSET","ON","ONLY","OR","ORDER","OUT","OUTER","OVER","OVERLAPS","PLACING","PRIMARY","REFERENCES","RETURNING","RIGHT","ROW","SECOND","SELECT","SESSION_USER","SIMILAR","SOME","SYMMETRIC","TABLE","TABLESAMPLE","THEN","TO","TRAILING","TRUE","UNION","UNIQUE","USER","USING","VALUES","VARIADIC","VERBOSE","WHEN","WHERE","WINDOW","WITH","WITHIN","WITHOUT","YEAR"],g4=["ARRAY","BIGINT","BIT","BIT VARYING","BOOL","BOOLEAN","CHAR","CHARACTER","CHARACTER VARYING","DECIMAL","DEC","DOUBLE","ENUM","FLOAT","INT","INTEGER","INTERVAL","NCHAR","NUMERIC","JSON","JSONB","PRECISION","REAL","SMALLINT","TEXT","TIME","TIMESTAMP","TIMESTAMPTZ","UUID","VARCHAR","XML","ZONE"]});var WDe,YDe,_4,Kw,VDe,qDe,XDe,zDe,NA,Jw=G(()=>{qt();A4();I4();WDe=v(["SELECT [ALL | DISTINCT]"]),YDe=v(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY [ALL | DISTINCT]","HAVING","WINDOW","PARTITION BY","ORDER BY","LIMIT","OFFSET","FETCH {FIRST | NEXT}","FOR {UPDATE | NO KEY UPDATE | SHARE | KEY SHARE} [OF]","INSERT INTO","VALUES","DEFAULT VALUES","SET","RETURNING"]),_4=v(["CREATE [GLOBAL | LOCAL] [TEMPORARY | TEMP | UNLOGGED] TABLE [IF NOT EXISTS]"]),Kw=v(["CREATE [OR REPLACE] [TEMP | TEMPORARY] [RECURSIVE] VIEW","CREATE [MATERIALIZED] VIEW [IF NOT EXISTS]","UPDATE [ONLY]","WHERE CURRENT OF","ON CONFLICT","DELETE FROM [ONLY]","DROP TABLE [IF EXISTS]","ALTER TABLE [IF EXISTS] [ONLY]","ALTER TABLE ALL IN TABLESPACE","RENAME [COLUMN]","RENAME TO","ADD [COLUMN] [IF NOT EXISTS]","DROP [COLUMN] [IF EXISTS]","ALTER [COLUMN]","SET DATA TYPE","{SET | DROP} DEFAULT","{SET | DROP} NOT NULL","TRUNCATE [TABLE] [ONLY]","SET SCHEMA","AFTER","ABORT","ALTER AGGREGATE","ALTER COLLATION","ALTER CONVERSION","ALTER DATABASE","ALTER DEFAULT PRIVILEGES","ALTER DOMAIN","ALTER EVENT TRIGGER","ALTER EXTENSION","ALTER FOREIGN DATA WRAPPER","ALTER FOREIGN TABLE","ALTER FUNCTION","ALTER GROUP","ALTER INDEX","ALTER LANGUAGE","ALTER LARGE OBJECT","ALTER MATERIALIZED VIEW","ALTER OPERATOR","ALTER OPERATOR CLASS","ALTER OPERATOR FAMILY","ALTER POLICY","ALTER PROCEDURE","ALTER PUBLICATION","ALTER ROLE","ALTER ROUTINE","ALTER RULE","ALTER SCHEMA","ALTER SEQUENCE","ALTER SERVER","ALTER STATISTICS","ALTER SUBSCRIPTION","ALTER SYSTEM","ALTER TABLESPACE","ALTER TEXT SEARCH CONFIGURATION","ALTER TEXT SEARCH DICTIONARY","ALTER TEXT SEARCH PARSER","ALTER TEXT SEARCH TEMPLATE","ALTER TRIGGER","ALTER TYPE","ALTER USER","ALTER USER MAPPING","ALTER VIEW","ANALYZE","BEGIN","CALL","CHECKPOINT","CLOSE","CLUSTER","COMMENT ON","COMMIT","COMMIT PREPARED","COPY","CREATE ACCESS METHOD","CREATE [OR REPLACE] AGGREGATE","CREATE CAST","CREATE COLLATION","CREATE [DEFAULT] CONVERSION","CREATE DATABASE","CREATE DOMAIN","CREATE EVENT TRIGGER","CREATE EXTENSION","CREATE FOREIGN DATA WRAPPER","CREATE FOREIGN TABLE","CREATE [OR REPLACE] FUNCTION","CREATE GROUP","CREATE [UNIQUE] INDEX","CREATE [OR REPLACE] [TRUSTED] [PROCEDURAL] LANGUAGE","CREATE OPERATOR","CREATE OPERATOR CLASS","CREATE OPERATOR FAMILY","CREATE POLICY","CREATE [OR REPLACE] PROCEDURE","CREATE PUBLICATION","CREATE ROLE","CREATE [OR REPLACE] RULE","CREATE SCHEMA [AUTHORIZATION]","CREATE [TEMPORARY | TEMP | UNLOGGED] SEQUENCE","CREATE SERVER","CREATE STATISTICS","CREATE SUBSCRIPTION","CREATE TABLESPACE","CREATE TEXT SEARCH CONFIGURATION","CREATE TEXT SEARCH DICTIONARY","CREATE TEXT SEARCH PARSER","CREATE TEXT SEARCH TEMPLATE","CREATE [OR REPLACE] TRANSFORM","CREATE [OR REPLACE] [CONSTRAINT] TRIGGER","CREATE TYPE","CREATE USER","CREATE USER MAPPING","DEALLOCATE","DECLARE","DISCARD","DROP ACCESS METHOD","DROP AGGREGATE","DROP CAST","DROP COLLATION","DROP CONVERSION","DROP DATABASE","DROP DOMAIN","DROP EVENT TRIGGER","DROP EXTENSION","DROP FOREIGN DATA WRAPPER","DROP FOREIGN TABLE","DROP FUNCTION","DROP GROUP","DROP IDENTITY","DROP INDEX","DROP LANGUAGE","DROP MATERIALIZED VIEW [IF EXISTS]","DROP OPERATOR","DROP OPERATOR CLASS","DROP OPERATOR FAMILY","DROP OWNED","DROP POLICY","DROP PROCEDURE","DROP PUBLICATION","DROP ROLE","DROP ROUTINE","DROP RULE","DROP SCHEMA","DROP SEQUENCE","DROP SERVER","DROP STATISTICS","DROP SUBSCRIPTION","DROP TABLESPACE","DROP TEXT SEARCH CONFIGURATION","DROP TEXT SEARCH DICTIONARY","DROP TEXT SEARCH PARSER","DROP TEXT SEARCH TEMPLATE","DROP TRANSFORM","DROP TRIGGER","DROP TYPE","DROP USER","DROP USER MAPPING","DROP VIEW","EXECUTE","EXPLAIN","FETCH","GRANT","IMPORT FOREIGN SCHEMA","LISTEN","LOAD","LOCK","MOVE","NOTIFY","OVERRIDING SYSTEM VALUE","PREPARE","PREPARE TRANSACTION","REASSIGN OWNED","REFRESH MATERIALIZED VIEW","REINDEX","RELEASE SAVEPOINT","RESET [ALL|ROLE|SESSION AUTHORIZATION]","REVOKE","ROLLBACK","ROLLBACK PREPARED","ROLLBACK TO SAVEPOINT","SAVEPOINT","SECURITY LABEL","SELECT INTO","SET CONSTRAINTS","SET ROLE","SET SESSION AUTHORIZATION","SET TRANSACTION","SHOW","START TRANSACTION","UNLISTEN","VACUUM"]),VDe=v(["UNION [ALL | DISTINCT]","EXCEPT [ALL | DISTINCT]","INTERSECT [ALL | DISTINCT]"]),qDe=v(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL [INNER] JOIN","NATURAL {LEFT | RIGHT | FULL} [OUTER] JOIN"]),XDe=v(["PRIMARY KEY","GENERATED {ALWAYS | BY DEFAULT} AS IDENTITY","ON {UPDATE | DELETE} [NO ACTION | RESTRICT | CASCADE | SET NULL | SET DEFAULT]","DO {NOTHING | UPDATE}","AS MATERIALIZED","{ROWS | RANGE | GROUPS} BETWEEN","IS [NOT] DISTINCT FROM","NULLS {FIRST | LAST}","WITH ORDINALITY"]),zDe=v(["[TIMESTAMP | TIME] {WITH | WITHOUT} TIME ZONE"]),NA={name:"postgresql",tokenizerOptions:{reservedSelect:WDe,reservedClauses:[...YDe,..._4,...Kw],reservedSetOperations:VDe,reservedJoins:qDe,reservedKeywordPhrases:XDe,reservedDataTypePhrases:zDe,reservedKeywords:m4,reservedDataTypes:g4,reservedFunctionNames:R4,nestedBlockComments:!0,extraParens:["[]"],underscoresInNumbers:!0,stringTypes:["$$",{quote:"''-qq",prefixes:["U&"]},{quote:"''-qq-bs",prefixes:["E"],requirePrefix:!0},{quote:"''-raw",prefixes:["B","X"],requirePrefix:!0}],identTypes:[{quote:'""-qq',prefixes:["U&"]}],identChars:{rest:"$"},paramTypes:{numbered:["$"]},operators:["%","^","|/","||/","@",":=","&","|","#","~","<<",">>","~>~","~<~","~>=~","~<=~","@-@","@@","##","<->","&&","&<","&>","<<|","&<|","|>>","|&>","<^","^>","?#","?-","?|","?-|","?||","@>","<@","~=","?","@?","?&","->","->>","#>","#>>","#-","=>",">>=","<<=","~~","~~*","!~~","!~~*","~","~*","!~","!~*","-|-","||","@@@","!!","^@","<%","%>","<<%","%>>","<<->","<->>","<<<->","<->>>","::",":","<#>","<=>","<+>","<~>","<%>"],operatorKeyword:!0},formatOptions:{alwaysDenseOperators:["::",":"],onelineClauses:[..._4,...Kw],tabularOnelineClauses:Kw}}});var N4,O4=G(()=>{N4=["ANY_VALUE","APPROXIMATE PERCENTILE_DISC","AVG","COUNT","LISTAGG","MAX","MEDIAN","MIN","PERCENTILE_CONT","STDDEV_SAMP","STDDEV_POP","SUM","VAR_SAMP","VAR_POP","array_concat","array_flatten","get_array_length","split_to_array","subarray","BIT_AND","BIT_OR","BOOL_AND","BOOL_OR","COALESCE","DECODE","GREATEST","LEAST","NVL","NVL2","NULLIF","ADD_MONTHS","AT TIME ZONE","CONVERT_TIMEZONE","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","DATE_CMP","DATE_CMP_TIMESTAMP","DATE_CMP_TIMESTAMPTZ","DATE_PART_YEAR","DATEADD","DATEDIFF","DATE_PART","DATE_TRUNC","EXTRACT","GETDATE","INTERVAL_CMP","LAST_DAY","MONTHS_BETWEEN","NEXT_DAY","SYSDATE","TIMEOFDAY","TIMESTAMP_CMP","TIMESTAMP_CMP_DATE","TIMESTAMP_CMP_TIMESTAMPTZ","TIMESTAMPTZ_CMP","TIMESTAMPTZ_CMP_DATE","TIMESTAMPTZ_CMP_TIMESTAMP","TIMEZONE","TO_TIMESTAMP","TRUNC","AddBBox","DropBBox","GeometryType","ST_AddPoint","ST_Angle","ST_Area","ST_AsBinary","ST_AsEWKB","ST_AsEWKT","ST_AsGeoJSON","ST_AsText","ST_Azimuth","ST_Boundary","ST_Collect","ST_Contains","ST_ContainsProperly","ST_ConvexHull","ST_CoveredBy","ST_Covers","ST_Crosses","ST_Dimension","ST_Disjoint","ST_Distance","ST_DistanceSphere","ST_DWithin","ST_EndPoint","ST_Envelope","ST_Equals","ST_ExteriorRing","ST_Force2D","ST_Force3D","ST_Force3DM","ST_Force3DZ","ST_Force4D","ST_GeometryN","ST_GeometryType","ST_GeomFromEWKB","ST_GeomFromEWKT","ST_GeomFromText","ST_GeomFromWKB","ST_InteriorRingN","ST_Intersects","ST_IsPolygonCCW","ST_IsPolygonCW","ST_IsClosed","ST_IsCollection","ST_IsEmpty","ST_IsSimple","ST_IsValid","ST_Length","ST_LengthSphere","ST_Length2D","ST_LineFromMultiPoint","ST_LineInterpolatePoint","ST_M","ST_MakeEnvelope","ST_MakeLine","ST_MakePoint","ST_MakePolygon","ST_MemSize","ST_MMax","ST_MMin","ST_Multi","ST_NDims","ST_NPoints","ST_NRings","ST_NumGeometries","ST_NumInteriorRings","ST_NumPoints","ST_Perimeter","ST_Perimeter2D","ST_Point","ST_PointN","ST_Points","ST_Polygon","ST_RemovePoint","ST_Reverse","ST_SetPoint","ST_SetSRID","ST_Simplify","ST_SRID","ST_StartPoint","ST_Touches","ST_Within","ST_X","ST_XMax","ST_XMin","ST_Y","ST_YMax","ST_YMin","ST_Z","ST_ZMax","ST_ZMin","SupportsBBox","CHECKSUM","FUNC_SHA1","FNV_HASH","MD5","SHA","SHA1","SHA2","HLL","HLL_CREATE_SKETCH","HLL_CARDINALITY","HLL_COMBINE","IS_VALID_JSON","IS_VALID_JSON_ARRAY","JSON_ARRAY_LENGTH","JSON_EXTRACT_ARRAY_ELEMENT_TEXT","JSON_EXTRACT_PATH_TEXT","JSON_PARSE","JSON_SERIALIZE","ABS","ACOS","ASIN","ATAN","ATAN2","CBRT","CEILING","CEIL","COS","COT","DEGREES","DEXP","DLOG1","DLOG10","EXP","FLOOR","LN","LOG","MOD","PI","POWER","RADIANS","RANDOM","ROUND","SIN","SIGN","SQRT","TAN","TO_HEX","TRUNC","EXPLAIN_MODEL","ASCII","BPCHARCMP","BTRIM","BTTEXT_PATTERN_CMP","CHAR_LENGTH","CHARACTER_LENGTH","CHARINDEX","CHR","COLLATE","CONCAT","CRC32","DIFFERENCE","INITCAP","LEFT","RIGHT","LEN","LENGTH","LOWER","LPAD","RPAD","LTRIM","OCTETINDEX","OCTET_LENGTH","POSITION","QUOTE_IDENT","QUOTE_LITERAL","REGEXP_COUNT","REGEXP_INSTR","REGEXP_REPLACE","REGEXP_SUBSTR","REPEAT","REPLACE","REPLICATE","REVERSE","RTRIM","SOUNDEX","SPLIT_PART","STRPOS","STRTOL","SUBSTRING","TEXTLEN","TRANSLATE","TRIM","UPPER","decimal_precision","decimal_scale","is_array","is_bigint","is_boolean","is_char","is_decimal","is_float","is_integer","is_object","is_scalar","is_smallint","is_varchar","json_typeof","AVG","COUNT","CUME_DIST","DENSE_RANK","FIRST_VALUE","LAST_VALUE","LAG","LEAD","LISTAGG","MAX","MEDIAN","MIN","NTH_VALUE","NTILE","PERCENT_RANK","PERCENTILE_CONT","PERCENTILE_DISC","RANK","RATIO_TO_REPORT","ROW_NUMBER","STDDEV_SAMP","STDDEV_POP","SUM","VAR_SAMP","VAR_POP","CAST","CONVERT","TO_CHAR","TO_DATE","TO_NUMBER","TEXT_TO_INT_ALT","TEXT_TO_NUMERIC_ALT","CHANGE_QUERY_PRIORITY","CHANGE_SESSION_PRIORITY","CHANGE_USER_PRIORITY","CURRENT_SETTING","PG_CANCEL_BACKEND","PG_TERMINATE_BACKEND","REBOOT_CLUSTER","SET_CONFIG","CURRENT_AWS_ACCOUNT","CURRENT_DATABASE","CURRENT_NAMESPACE","CURRENT_SCHEMA","CURRENT_SCHEMAS","CURRENT_USER","CURRENT_USER_ID","HAS_ASSUMEROLE_PRIVILEGE","HAS_DATABASE_PRIVILEGE","HAS_SCHEMA_PRIVILEGE","HAS_TABLE_PRIVILEGE","PG_BACKEND_PID","PG_GET_COLS","PG_GET_GRANTEE_BY_IAM_ROLE","PG_GET_IAM_ROLE_BY_USER","PG_GET_LATE_BINDING_VIEW_COLS","PG_LAST_COPY_COUNT","PG_LAST_COPY_ID","PG_LAST_UNLOAD_ID","PG_LAST_QUERY_ID","PG_LAST_UNLOAD_COUNT","SESSION_USER","SLICE_NUM","USER","VERSION"]});var C4,b4,y4=G(()=>{C4=["AES128","AES256","ALL","ALLOWOVERWRITE","ANY","AS","ASC","AUTHORIZATION","BACKUP","BETWEEN","BINARY","BOTH","CHECK","COLUMN","CONSTRAINT","CREATE","CROSS","DEFAULT","DEFERRABLE","DEFLATE","DEFRAG","DESC","DISABLE","DISTINCT","DO","ENABLE","ENCODE","ENCRYPT","ENCRYPTION","EXPLICIT","FALSE","FOR","FOREIGN","FREEZE","FROM","FULL","GLOBALDICT256","GLOBALDICT64K","GROUP","IDENTITY","IGNORE","ILIKE","IN","INITIALLY","INNER","INTO","IS","ISNULL","LANGUAGE","LEADING","LIKE","LIMIT","LOCALTIME","LOCALTIMESTAMP","LUN","LUNS","MINUS","NATURAL","NEW","NOT","NOTNULL","NULL","NULLS","OFF","OFFLINE","OFFSET","OID","OLD","ON","ONLY","OPEN","ORDER","OUTER","OVERLAPS","PARALLEL","PARTITION","PERCENT","PERMISSIONS","PLACING","PRIMARY","RECOVER","REFERENCES","REJECTLOG","RESORT","RESPECT","RESTORE","SIMILAR","SNAPSHOT","SOME","SYSTEM","TABLE","TAG","TDES","THEN","TIMESTAMP","TO","TOP","TRAILING","TRUE","UNIQUE","USING","VERBOSE","WALLET","WITHOUT","ACCEPTANYDATE","ACCEPTINVCHARS","BLANKSASNULL","DATEFORMAT","EMPTYASNULL","ENCODING","ESCAPE","EXPLICIT_IDS","FILLRECORD","IGNOREBLANKLINES","IGNOREHEADER","REMOVEQUOTES","ROUNDEC","TIMEFORMAT","TRIMBLANKS","TRUNCATECOLUMNS","COMPROWS","COMPUPDATE","MAXERROR","NOLOAD","STATUPDATE","FORMAT","CSV","DELIMITER","FIXEDWIDTH","SHAPEFILE","AVRO","JSON","PARQUET","ORC","ACCESS_KEY_ID","CREDENTIALS","ENCRYPTED","IAM_ROLE","MASTER_SYMMETRIC_KEY","SECRET_ACCESS_KEY","SESSION_TOKEN","BZIP2","GZIP","LZOP","ZSTD","MANIFEST","READRATIO","REGION","SSH","RAW","AZ64","BYTEDICT","DELTA","DELTA32K","LZO","MOSTLY8","MOSTLY16","MOSTLY32","RUNLENGTH","TEXT255","TEXT32K","CATALOG_ROLE","SECRET_ARN","EXTERNAL","AUTO","EVEN","KEY","PREDICATE","COMPRESSION"],b4=["ARRAY","BIGINT","BPCHAR","CHAR","CHARACTER VARYING","CHARACTER","DECIMAL","INT","INT2","INT4","INT8","INTEGER","NCHAR","NUMERIC","NVARCHAR","SMALLINT","TEXT","VARBYTE","VARCHAR"]});var jDe,KDe,w4,Qw,JDe,QDe,ZDe,ePe,OA,Zw=G(()=>{qt();O4();y4();jDe=v(["SELECT [ALL | DISTINCT]"]),KDe=v(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY","HAVING","QUALIFY","PARTITION BY","ORDER BY","LIMIT","OFFSET","INSERT INTO","VALUES","SET"]),w4=v(["CREATE [TEMPORARY | TEMP | LOCAL TEMPORARY | LOCAL TEMP] TABLE [IF NOT EXISTS]"]),Qw=v(["CREATE [OR REPLACE | MATERIALIZED] VIEW","UPDATE","DELETE [FROM]","DROP TABLE [IF EXISTS]","ALTER TABLE","ALTER TABLE APPEND","ADD [COLUMN]","DROP [COLUMN]","RENAME TO","RENAME COLUMN","ALTER COLUMN","TYPE","ENCODE","TRUNCATE [TABLE]","ABORT","ALTER DATABASE","ALTER DATASHARE","ALTER DEFAULT PRIVILEGES","ALTER GROUP","ALTER MATERIALIZED VIEW","ALTER PROCEDURE","ALTER SCHEMA","ALTER USER","ANALYSE","ANALYZE","ANALYSE COMPRESSION","ANALYZE COMPRESSION","BEGIN","CALL","CANCEL","CLOSE","COMMIT","COPY","CREATE DATABASE","CREATE DATASHARE","CREATE EXTERNAL FUNCTION","CREATE EXTERNAL SCHEMA","CREATE EXTERNAL TABLE","CREATE FUNCTION","CREATE GROUP","CREATE LIBRARY","CREATE MODEL","CREATE PROCEDURE","CREATE SCHEMA","CREATE USER","DEALLOCATE","DECLARE","DESC DATASHARE","DROP DATABASE","DROP DATASHARE","DROP FUNCTION","DROP GROUP","DROP LIBRARY","DROP MODEL","DROP MATERIALIZED VIEW","DROP PROCEDURE","DROP SCHEMA","DROP USER","DROP VIEW","DROP","EXECUTE","EXPLAIN","FETCH","GRANT","LOCK","PREPARE","REFRESH MATERIALIZED VIEW","RESET","REVOKE","ROLLBACK","SELECT INTO","SET SESSION AUTHORIZATION","SET SESSION CHARACTERISTICS","SHOW","SHOW EXTERNAL TABLE","SHOW MODEL","SHOW DATASHARES","SHOW PROCEDURE","SHOW TABLE","SHOW VIEW","START TRANSACTION","UNLOAD","VACUUM"]),JDe=v(["UNION [ALL]","EXCEPT","INTERSECT","MINUS"]),QDe=v(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL [INNER] JOIN","NATURAL {LEFT | RIGHT | FULL} [OUTER] JOIN"]),ZDe=v(["NULL AS","DATA CATALOG","HIVE METASTORE","{ROWS | RANGE} BETWEEN"]),ePe=v([]),OA={name:"redshift",tokenizerOptions:{reservedSelect:jDe,reservedClauses:[...KDe,...w4,...Qw],reservedSetOperations:JDe,reservedJoins:QDe,reservedKeywordPhrases:ZDe,reservedDataTypePhrases:ePe,reservedKeywords:C4,reservedDataTypes:b4,reservedFunctionNames:N4,extraParens:["[]"],stringTypes:["''-qq"],identTypes:['""-qq'],identChars:{first:"#"},paramTypes:{numbered:["$"]},operators:["^","%","@","|/","||/","&","|","~","<<",">>","||","::"]},formatOptions:{alwaysDenseOperators:["::"],onelineClauses:[...w4,...Qw],tabularOnelineClauses:Qw}}});var L4,D4,P4=G(()=>{L4=["ADD","AFTER","ALL","ALTER","ANALYZE","AND","ANTI","ANY","ARCHIVE","AS","ASC","AT","AUTHORIZATION","BETWEEN","BOTH","BUCKET","BUCKETS","BY","CACHE","CASCADE","CAST","CHANGE","CHECK","CLEAR","CLUSTER","CLUSTERED","CODEGEN","COLLATE","COLLECTION","COLUMN","COLUMNS","COMMENT","COMMIT","COMPACT","COMPACTIONS","COMPUTE","CONCATENATE","CONSTRAINT","COST","CREATE","CROSS","CUBE","CURRENT","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","DATA","DATABASE","DATABASES","DAY","DBPROPERTIES","DEFINED","DELETE","DELIMITED","DESC","DESCRIBE","DFS","DIRECTORIES","DIRECTORY","DISTINCT","DISTRIBUTE","DIV","DROP","ESCAPE","ESCAPED","EXCEPT","EXCHANGE","EXISTS","EXPORT","EXTENDED","EXTERNAL","EXTRACT","FALSE","FETCH","FIELDS","FILTER","FILEFORMAT","FIRST","FIRST_VALUE","FOLLOWING","FOR","FOREIGN","FORMAT","FORMATTED","FULL","FUNCTION","FUNCTIONS","GLOBAL","GRANT","GROUP","GROUPING","HOUR","IF","IGNORE","IMPORT","IN","INDEX","INDEXES","INNER","INPATH","INPUTFORMAT","INTERSECT","INTO","IS","ITEMS","KEYS","LAST","LAST_VALUE","LATERAL","LAZY","LEADING","LEFT","LIKE","LINES","LIST","LOCAL","LOCATION","LOCK","LOCKS","LOGICAL","MACRO","MATCHED","MERGE","MINUTE","MONTH","MSCK","NAMESPACE","NAMESPACES","NATURAL","NO","NOT","NULL","NULLS","OF","ONLY","OPTION","OPTIONS","OR","ORDER","OUT","OUTER","OUTPUTFORMAT","OVER","OVERLAPS","OVERLAY","OVERWRITE","OWNER","PARTITION","PARTITIONED","PARTITIONS","PERCENT","PLACING","POSITION","PRECEDING","PRIMARY","PRINCIPALS","PROPERTIES","PURGE","QUERY","RANGE","RECORDREADER","RECORDWRITER","RECOVER","REDUCE","REFERENCES","RENAME","REPAIR","REPLACE","RESPECT","RESTRICT","REVOKE","RIGHT","RLIKE","ROLE","ROLES","ROLLBACK","ROLLUP","ROW","ROWS","SCHEMA","SECOND","SELECT","SEMI","SEPARATED","SERDE","SERDEPROPERTIES","SESSION_USER","SETS","SHOW","SKEWED","SOME","SORT","SORTED","START","STATISTICS","STORED","STRATIFY","SUBSTR","SUBSTRING","TABLE","TABLES","TBLPROPERTIES","TEMPORARY","TERMINATED","THEN","TO","TOUCH","TRAILING","TRANSACTION","TRANSACTIONS","TRIM","TRUE","TRUNCATE","UNARCHIVE","UNBOUNDED","UNCACHE","UNIQUE","UNKNOWN","UNLOCK","UNSET","USE","USER","USING","VIEW","WINDOW","YEAR","ANALYSE","ARRAY_ZIP","COALESCE","CONTAINS","CONVERT","DAYS","DAY_HOUR","DAY_MINUTE","DAY_SECOND","DECODE","DEFAULT","DISTINCTROW","ENCODE","EXPLODE","EXPLODE_OUTER","FIXED","GREATEST","GROUP_CONCAT","HOURS","HOUR_MINUTE","HOUR_SECOND","IFNULL","LEAST","LEVEL","MINUTE_SECOND","NULLIF","OFFSET","ON","OPTIMIZE","REGEXP","SEPARATOR","SIZE","TYPE","TYPES","UNSIGNED","VARIABLES","YEAR_MONTH"],D4=["ARRAY","BIGINT","BINARY","BOOLEAN","BYTE","CHAR","DATE","DEC","DECIMAL","DOUBLE","FLOAT","INT","INTEGER","INTERVAL","LONG","MAP","NUMERIC","REAL","SHORT","SMALLINT","STRING","STRUCT","TIMESTAMP_LTZ","TIMESTAMP_NTZ","TIMESTAMP","TINYINT","VARCHAR"]});var x4,v4=G(()=>{x4=["APPROX_COUNT_DISTINCT","APPROX_PERCENTILE","AVG","BIT_AND","BIT_OR","BIT_XOR","BOOL_AND","BOOL_OR","COLLECT_LIST","COLLECT_SET","CORR","COUNT","COUNT","COUNT","COUNT_IF","COUNT_MIN_SKETCH","COVAR_POP","COVAR_SAMP","EVERY","FIRST","FIRST_VALUE","GROUPING","GROUPING_ID","KURTOSIS","LAST","LAST_VALUE","MAX","MAX_BY","MEAN","MIN","MIN_BY","PERCENTILE","PERCENTILE","PERCENTILE_APPROX","SKEWNESS","STD","STDDEV","STDDEV_POP","STDDEV_SAMP","SUM","VAR_POP","VAR_SAMP","VARIANCE","CUME_DIST","DENSE_RANK","LAG","LEAD","NTH_VALUE","NTILE","PERCENT_RANK","RANK","ROW_NUMBER","ARRAY","ARRAY_CONTAINS","ARRAY_DISTINCT","ARRAY_EXCEPT","ARRAY_INTERSECT","ARRAY_JOIN","ARRAY_MAX","ARRAY_MIN","ARRAY_POSITION","ARRAY_REMOVE","ARRAY_REPEAT","ARRAY_UNION","ARRAYS_OVERLAP","ARRAYS_ZIP","FLATTEN","SEQUENCE","SHUFFLE","SLICE","SORT_ARRAY","ELEMENT_AT","ELEMENT_AT","MAP_CONCAT","MAP_ENTRIES","MAP_FROM_ARRAYS","MAP_FROM_ENTRIES","MAP_KEYS","MAP_VALUES","STR_TO_MAP","ADD_MONTHS","CURRENT_DATE","CURRENT_DATE","CURRENT_TIMESTAMP","CURRENT_TIMESTAMP","CURRENT_TIMEZONE","DATE_ADD","DATE_FORMAT","DATE_FROM_UNIX_DATE","DATE_PART","DATE_SUB","DATE_TRUNC","DATEDIFF","DAY","DAYOFMONTH","DAYOFWEEK","DAYOFYEAR","EXTRACT","FROM_UNIXTIME","FROM_UTC_TIMESTAMP","HOUR","LAST_DAY","MAKE_DATE","MAKE_DT_INTERVAL","MAKE_INTERVAL","MAKE_TIMESTAMP","MAKE_YM_INTERVAL","MINUTE","MONTH","MONTHS_BETWEEN","NEXT_DAY","NOW","QUARTER","SECOND","SESSION_WINDOW","TIMESTAMP_MICROS","TIMESTAMP_MILLIS","TIMESTAMP_SECONDS","TO_DATE","TO_TIMESTAMP","TO_UNIX_TIMESTAMP","TO_UTC_TIMESTAMP","TRUNC","UNIX_DATE","UNIX_MICROS","UNIX_MILLIS","UNIX_SECONDS","UNIX_TIMESTAMP","WEEKDAY","WEEKOFYEAR","WINDOW","YEAR","FROM_JSON","GET_JSON_OBJECT","JSON_ARRAY_LENGTH","JSON_OBJECT_KEYS","JSON_TUPLE","SCHEMA_OF_JSON","TO_JSON","ABS","ACOS","ACOSH","AGGREGATE","ARRAY_SORT","ASCII","ASIN","ASINH","ASSERT_TRUE","ATAN","ATAN2","ATANH","BASE64","BIN","BIT_COUNT","BIT_GET","BIT_LENGTH","BROUND","BTRIM","CARDINALITY","CBRT","CEIL","CEILING","CHAR_LENGTH","CHARACTER_LENGTH","CHR","CONCAT","CONCAT_WS","CONV","COS","COSH","COT","CRC32","CURRENT_CATALOG","CURRENT_DATABASE","CURRENT_USER","DEGREES","ELT","EXP","EXPM1","FACTORIAL","FIND_IN_SET","FLOOR","FORALL","FORMAT_NUMBER","FORMAT_STRING","FROM_CSV","GETBIT","HASH","HEX","HYPOT","INITCAP","INLINE","INLINE_OUTER","INPUT_FILE_BLOCK_LENGTH","INPUT_FILE_BLOCK_START","INPUT_FILE_NAME","INSTR","ISNAN","ISNOTNULL","ISNULL","JAVA_METHOD","LCASE","LEFT","LENGTH","LEVENSHTEIN","LN","LOCATE","LOG","LOG10","LOG1P","LOG2","LOWER","LPAD","LTRIM","MAP_FILTER","MAP_ZIP_WITH","MD5","MOD","MONOTONICALLY_INCREASING_ID","NAMED_STRUCT","NANVL","NEGATIVE","NVL","NVL2","OCTET_LENGTH","OVERLAY","PARSE_URL","PI","PMOD","POSEXPLODE","POSEXPLODE_OUTER","POSITION","POSITIVE","POW","POWER","PRINTF","RADIANS","RAISE_ERROR","RAND","RANDN","RANDOM","REFLECT","REGEXP_EXTRACT","REGEXP_EXTRACT_ALL","REGEXP_LIKE","REGEXP_REPLACE","REPEAT","REPLACE","REVERSE","RIGHT","RINT","ROUND","RPAD","RTRIM","SCHEMA_OF_CSV","SENTENCES","SHA","SHA1","SHA2","SHIFTLEFT","SHIFTRIGHT","SHIFTRIGHTUNSIGNED","SIGN","SIGNUM","SIN","SINH","SOUNDEX","SPACE","SPARK_PARTITION_ID","SPLIT","SQRT","STACK","SUBSTR","SUBSTRING","SUBSTRING_INDEX","TAN","TANH","TO_CSV","TRANSFORM_KEYS","TRANSFORM_VALUES","TRANSLATE","TRIM","TRY_ADD","TRY_DIVIDE","TYPEOF","UCASE","UNBASE64","UNHEX","UPPER","UUID","VERSION","WIDTH_BUCKET","XPATH","XPATH_BOOLEAN","XPATH_DOUBLE","XPATH_FLOAT","XPATH_INT","XPATH_LONG","XPATH_NUMBER","XPATH_SHORT","XPATH_STRING","XXHASH64","ZIP_WITH","CAST","COALESCE","NULLIF"]});function aPe(t){return t.map((e,n)=>{let r=t[n-1]||zi,i=t[n+1]||zi;return ui.WINDOW(e)&&i.type===Y.OPEN_PAREN?Object.assign(Object.assign({},e),{type:Y.RESERVED_FUNCTION_NAME}):e.text==="ITEMS"&&e.type===Y.RESERVED_KEYWORD&&!(r.text==="COLLECTION"&&i.text==="TERMINATED")?Object.assign(Object.assign({},e),{type:Y.IDENTIFIER,text:e.raw}):e})}var tPe,nPe,M4,e0,rPe,iPe,sPe,oPe,CA,t0=G(()=>{qt();Yr();P4();v4();tPe=v(["SELECT [ALL | DISTINCT]"]),nPe=v(["WITH","FROM","WHERE","GROUP BY","HAVING","WINDOW","PARTITION BY","ORDER BY","SORT BY","CLUSTER BY","DISTRIBUTE BY","LIMIT","INSERT [INTO | OVERWRITE] [TABLE]","VALUES","INSERT OVERWRITE [LOCAL] DIRECTORY","LOAD DATA [LOCAL] INPATH","[OVERWRITE] INTO TABLE"]),M4=v(["CREATE [EXTERNAL] TABLE [IF NOT EXISTS]"]),e0=v(["CREATE [OR REPLACE] [GLOBAL TEMPORARY | TEMPORARY] VIEW [IF NOT EXISTS]","DROP TABLE [IF EXISTS]","ALTER TABLE","ADD COLUMNS","DROP {COLUMN | COLUMNS}","RENAME TO","RENAME COLUMN","ALTER COLUMN","TRUNCATE TABLE","LATERAL VIEW","ALTER DATABASE","ALTER VIEW","CREATE DATABASE","CREATE FUNCTION","DROP DATABASE","DROP FUNCTION","DROP VIEW","REPAIR TABLE","USE DATABASE","TABLESAMPLE","PIVOT","TRANSFORM","EXPLAIN","ADD FILE","ADD JAR","ANALYZE TABLE","CACHE TABLE","CLEAR CACHE","DESCRIBE DATABASE","DESCRIBE FUNCTION","DESCRIBE QUERY","DESCRIBE TABLE","LIST FILE","LIST JAR","REFRESH","REFRESH TABLE","REFRESH FUNCTION","RESET","SHOW COLUMNS","SHOW CREATE TABLE","SHOW DATABASES","SHOW FUNCTIONS","SHOW PARTITIONS","SHOW TABLE EXTENDED","SHOW TABLES","SHOW TBLPROPERTIES","SHOW VIEWS","UNCACHE TABLE"]),rPe=v(["UNION [ALL | DISTINCT]","EXCEPT [ALL | DISTINCT]","INTERSECT [ALL | DISTINCT]"]),iPe=v(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL [INNER] JOIN","NATURAL {LEFT | RIGHT | FULL} [OUTER] JOIN","[LEFT] {ANTI | SEMI} JOIN","NATURAL [LEFT] {ANTI | SEMI} JOIN"]),sPe=v(["ON DELETE","ON UPDATE","CURRENT ROW","{ROWS | RANGE} BETWEEN"]),oPe=v([]),CA={name:"spark",tokenizerOptions:{reservedSelect:tPe,reservedClauses:[...nPe,...M4,...e0],reservedSetOperations:rPe,reservedJoins:iPe,reservedKeywordPhrases:sPe,reservedDataTypePhrases:oPe,supportsXor:!0,reservedKeywords:L4,reservedDataTypes:D4,reservedFunctionNames:x4,extraParens:["[]"],stringTypes:["''-bs",'""-bs',{quote:"''-raw",prefixes:["R","X"],requirePrefix:!0},{quote:'""-raw',prefixes:["R","X"],requirePrefix:!0}],identTypes:["``"],identChars:{allowFirstCharNumber:!0},variableTypes:[{quote:"{}",prefixes:["$"],requirePrefix:!0}],operators:["%","~","^","|","&","<=>","==","!","||","->"],postProcess:aPe},formatOptions:{onelineClauses:[...M4,...e0],tabularOnelineClauses:e0}}});var U4,B4=G(()=>{U4=["ABS","CHANGES","CHAR","COALESCE","FORMAT","GLOB","HEX","IFNULL","IIF","INSTR","LAST_INSERT_ROWID","LENGTH","LIKE","LIKELIHOOD","LIKELY","LOAD_EXTENSION","LOWER","LTRIM","NULLIF","PRINTF","QUOTE","RANDOM","RANDOMBLOB","REPLACE","ROUND","RTRIM","SIGN","SOUNDEX","SQLITE_COMPILEOPTION_GET","SQLITE_COMPILEOPTION_USED","SQLITE_OFFSET","SQLITE_SOURCE_ID","SQLITE_VERSION","SUBSTR","SUBSTRING","TOTAL_CHANGES","TRIM","TYPEOF","UNICODE","UNLIKELY","UPPER","ZEROBLOB","AVG","COUNT","GROUP_CONCAT","MAX","MIN","SUM","TOTAL","DATE","TIME","DATETIME","JULIANDAY","UNIXEPOCH","STRFTIME","row_number","rank","dense_rank","percent_rank","cume_dist","ntile","lag","lead","first_value","last_value","nth_value","ACOS","ACOSH","ASIN","ASINH","ATAN","ATAN2","ATANH","CEIL","CEILING","COS","COSH","DEGREES","EXP","FLOOR","LN","LOG","LOG","LOG10","LOG2","MOD","PI","POW","POWER","RADIANS","SIN","SINH","SQRT","TAN","TANH","TRUNC","JSON","JSON_ARRAY","JSON_ARRAY_LENGTH","JSON_ARRAY_LENGTH","JSON_EXTRACT","JSON_INSERT","JSON_OBJECT","JSON_PATCH","JSON_REMOVE","JSON_REPLACE","JSON_SET","JSON_TYPE","JSON_TYPE","JSON_VALID","JSON_QUOTE","JSON_GROUP_ARRAY","JSON_GROUP_OBJECT","JSON_EACH","JSON_TREE","CAST"]});var F4,H4,G4=G(()=>{F4=["ABORT","ACTION","ADD","AFTER","ALL","ALTER","AND","ARE","ALWAYS","ANALYZE","AS","ASC","ATTACH","AUTOINCREMENT","BEFORE","BEGIN","BETWEEN","BY","CASCADE","CASE","CAST","CHECK","COLLATE","COLUMN","COMMIT","CONFLICT","CONSTRAINT","CREATE","CROSS","CURRENT","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","DATABASE","DEFAULT","DEFERRABLE","DEFERRED","DELETE","DESC","DETACH","DISTINCT","DO","DROP","EACH","ELSE","END","ESCAPE","EXCEPT","EXCLUDE","EXCLUSIVE","EXISTS","EXPLAIN","FAIL","FILTER","FIRST","FOLLOWING","FOR","FOREIGN","FROM","FULL","GENERATED","GLOB","GROUP","HAVING","IF","IGNORE","IMMEDIATE","IN","INDEX","INDEXED","INITIALLY","INNER","INSERT","INSTEAD","INTERSECT","INTO","IS","ISNULL","JOIN","KEY","LAST","LEFT","LIKE","LIMIT","MATCH","MATERIALIZED","NATURAL","NO","NOT","NOTHING","NOTNULL","NULL","NULLS","OF","OFFSET","ON","ONLY","OPEN","OR","ORDER","OTHERS","OUTER","OVER","PARTITION","PLAN","PRAGMA","PRECEDING","PRIMARY","QUERY","RAISE","RANGE","RECURSIVE","REFERENCES","REGEXP","REINDEX","RELEASE","RENAME","REPLACE","RESTRICT","RETURNING","RIGHT","ROLLBACK","ROW","ROWS","SAVEPOINT","SELECT","SET","TABLE","TEMP","TEMPORARY","THEN","TIES","TO","TRANSACTION","TRIGGER","UNBOUNDED","UNION","UNIQUE","UPDATE","USING","VACUUM","VALUES","VIEW","VIRTUAL","WHEN","WHERE","WINDOW","WITH","WITHOUT"],H4=["ANY","ARRAY","BLOB","CHARACTER","DECIMAL","INT","INTEGER","NATIVE CHARACTER","NCHAR","NUMERIC","NVARCHAR","REAL","TEXT","VARCHAR","VARYING CHARACTER"]});var lPe,cPe,$4,n0,uPe,dPe,fPe,EPe,bA,r0=G(()=>{qt();B4();G4();lPe=v(["SELECT [ALL | DISTINCT]"]),cPe=v(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY","HAVING","WINDOW","PARTITION BY","ORDER BY","LIMIT","OFFSET","INSERT [OR ABORT | OR FAIL | OR IGNORE | OR REPLACE | OR ROLLBACK] INTO","REPLACE INTO","VALUES","SET","RETURNING"]),$4=v(["CREATE [TEMPORARY | TEMP] TABLE [IF NOT EXISTS]"]),n0=v(["CREATE [TEMPORARY | TEMP] VIEW [IF NOT EXISTS]","UPDATE [OR ABORT | OR FAIL | OR IGNORE | OR REPLACE | OR ROLLBACK]","ON CONFLICT","DELETE FROM","DROP TABLE [IF EXISTS]","ALTER TABLE","ADD [COLUMN]","DROP [COLUMN]","RENAME [COLUMN]","RENAME TO","SET SCHEMA"]),uPe=v(["UNION [ALL]","EXCEPT","INTERSECT"]),dPe=v(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL [INNER] JOIN","NATURAL {LEFT | RIGHT | FULL} [OUTER] JOIN"]),fPe=v(["ON {UPDATE | DELETE} [SET NULL | SET DEFAULT]","{ROWS | RANGE | GROUPS} BETWEEN","DO UPDATE"]),EPe=v([]),bA={name:"sqlite",tokenizerOptions:{reservedSelect:lPe,reservedClauses:[...cPe,...$4,...n0],reservedSetOperations:uPe,reservedJoins:dPe,reservedKeywordPhrases:fPe,reservedDataTypePhrases:EPe,reservedKeywords:F4,reservedDataTypes:H4,reservedFunctionNames:U4,stringTypes:["''-qq",{quote:"''-raw",prefixes:["X"],requirePrefix:!0}],identTypes:['""-qq',"``","[]"],paramTypes:{positional:!0,numbered:["?"],named:[":","@","$"]},operators:["%","~","&","|","<<",">>","==","->","->>","||"]},formatOptions:{onelineClauses:[...$4,...n0],tabularOnelineClauses:n0}}});var k4,W4=G(()=>{k4=["GROUPING","RANK","DENSE_RANK","PERCENT_RANK","CUME_DIST","ROW_NUMBER","POSITION","OCCURRENCES_REGEX","POSITION_REGEX","EXTRACT","CHAR_LENGTH","CHARACTER_LENGTH","OCTET_LENGTH","CARDINALITY","ABS","MOD","LN","EXP","POWER","SQRT","FLOOR","CEIL","CEILING","WIDTH_BUCKET","SUBSTRING","SUBSTRING_REGEX","UPPER","LOWER","CONVERT","TRANSLATE","TRANSLATE_REGEX","TRIM","OVERLAY","NORMALIZE","SPECIFICTYPE","CURRENT_DATE","CURRENT_TIME","LOCALTIME","CURRENT_TIMESTAMP","LOCALTIMESTAMP","COUNT","AVG","MAX","MIN","SUM","STDDEV_POP","STDDEV_SAMP","VAR_SAMP","VAR_POP","COLLECT","FUSION","INTERSECTION","COVAR_POP","COVAR_SAMP","CORR","REGR_SLOPE","REGR_INTERCEPT","REGR_COUNT","REGR_R2","REGR_AVGX","REGR_AVGY","REGR_SXX","REGR_SYY","REGR_SXY","PERCENTILE_CONT","PERCENTILE_DISC","CAST","COALESCE","NULLIF","ROUND","SIN","COS","TAN","ASIN","ACOS","ATAN"]});var Y4,V4,q4=G(()=>{Y4=["ALL","ALLOCATE","ALTER","ANY","ARE","AS","ASC","ASENSITIVE","ASYMMETRIC","AT","ATOMIC","AUTHORIZATION","BEGIN","BETWEEN","BOTH","BY","CALL","CALLED","CASCADED","CAST","CHECK","CLOSE","COALESCE","COLLATE","COLUMN","COMMIT","CONDITION","CONNECT","CONSTRAINT","CORRESPONDING","CREATE","CROSS","CUBE","CURRENT","CURRENT_CATALOG","CURRENT_DEFAULT_TRANSFORM_GROUP","CURRENT_PATH","CURRENT_ROLE","CURRENT_SCHEMA","CURRENT_TRANSFORM_GROUP_FOR_TYPE","CURRENT_USER","CURSOR","CYCLE","DEALLOCATE","DAY","DECLARE","DEFAULT","DELETE","DEREF","DESC","DESCRIBE","DETERMINISTIC","DISCONNECT","DISTINCT","DROP","DYNAMIC","EACH","ELEMENT","END-EXEC","ESCAPE","EVERY","EXCEPT","EXEC","EXECUTE","EXISTS","EXTERNAL","FALSE","FETCH","FILTER","FOR","FOREIGN","FREE","FROM","FULL","FUNCTION","GET","GLOBAL","GRANT","GROUP","HAVING","HOLD","HOUR","IDENTITY","IN","INDICATOR","INNER","INOUT","INSENSITIVE","INSERT","INTERSECT","INTO","IS","LANGUAGE","LARGE","LATERAL","LEADING","LEFT","LIKE","LIKE_REGEX","LOCAL","MATCH","MEMBER","MERGE","METHOD","MINUTE","MODIFIES","MODULE","MONTH","NATURAL","NEW","NO","NONE","NOT","NULL","NULLIF","OF","OLD","ON","ONLY","OPEN","ORDER","OUT","OUTER","OVER","OVERLAPS","PARAMETER","PARTITION","PRECISION","PREPARE","PRIMARY","PROCEDURE","RANGE","READS","REAL","RECURSIVE","REF","REFERENCES","REFERENCING","RELEASE","RESULT","RETURN","RETURNS","REVOKE","RIGHT","ROLLBACK","ROLLUP","ROW","ROWS","SAVEPOINT","SCOPE","SCROLL","SEARCH","SECOND","SELECT","SENSITIVE","SESSION_USER","SET","SIMILAR","SOME","SPECIFIC","SQL","SQLEXCEPTION","SQLSTATE","SQLWARNING","START","STATIC","SUBMULTISET","SYMMETRIC","SYSTEM","SYSTEM_USER","TABLE","TABLESAMPLE","THEN","TIMEZONE_HOUR","TIMEZONE_MINUTE","TO","TRAILING","TRANSLATION","TREAT","TRIGGER","TRUE","UESCAPE","UNION","UNIQUE","UNKNOWN","UNNEST","UPDATE","USER","USING","VALUE","VALUES","WHENEVER","WINDOW","WITHIN","WITHOUT","YEAR"],V4=["ARRAY","BIGINT","BINARY LARGE OBJECT","BINARY VARYING","BINARY","BLOB","BOOLEAN","CHAR LARGE OBJECT","CHAR VARYING","CHAR","CHARACTER LARGE OBJECT","CHARACTER VARYING","CHARACTER","CLOB","DATE","DEC","DECIMAL","DOUBLE","FLOAT","INT","INTEGER","INTERVAL","MULTISET","NATIONAL CHAR VARYING","NATIONAL CHAR","NATIONAL CHARACTER LARGE OBJECT","NATIONAL CHARACTER VARYING","NATIONAL CHARACTER","NCHAR LARGE OBJECT","NCHAR VARYING","NCHAR","NCLOB","NUMERIC","SMALLINT","TIME","TIMESTAMP","VARBINARY","VARCHAR"]});var hPe,pPe,X4,i0,TPe,SPe,RPe,APe,yA,s0=G(()=>{qt();W4();q4();hPe=v(["SELECT [ALL | DISTINCT]"]),pPe=v(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY [ALL | DISTINCT]","HAVING","WINDOW","PARTITION BY","ORDER BY","LIMIT","OFFSET","FETCH {FIRST | NEXT}","INSERT INTO","VALUES","SET"]),X4=v(["CREATE [GLOBAL TEMPORARY | LOCAL TEMPORARY] TABLE"]),i0=v(["CREATE [RECURSIVE] VIEW","UPDATE","WHERE CURRENT OF","DELETE FROM","DROP TABLE","ALTER TABLE","ADD COLUMN","DROP [COLUMN]","RENAME COLUMN","RENAME TO","ALTER [COLUMN]","{SET | DROP} DEFAULT","ADD SCOPE","DROP SCOPE {CASCADE | RESTRICT}","RESTART WITH","TRUNCATE TABLE","SET SCHEMA"]),TPe=v(["UNION [ALL | DISTINCT]","EXCEPT [ALL | DISTINCT]","INTERSECT [ALL | DISTINCT]"]),SPe=v(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL [INNER] JOIN","NATURAL {LEFT | RIGHT | FULL} [OUTER] JOIN"]),RPe=v(["ON {UPDATE | DELETE} [SET NULL | SET DEFAULT]","{ROWS | RANGE} BETWEEN"]),APe=v([]),yA={name:"sql",tokenizerOptions:{reservedSelect:hPe,reservedClauses:[...pPe,...X4,...i0],reservedSetOperations:TPe,reservedJoins:SPe,reservedKeywordPhrases:RPe,reservedDataTypePhrases:APe,reservedKeywords:Y4,reservedDataTypes:V4,reservedFunctionNames:k4,stringTypes:[{quote:"''-qq-bs",prefixes:["N","U&"]},{quote:"''-raw",prefixes:["X"],requirePrefix:!0}],identTypes:['""-qq',"``"],paramTypes:{positional:!0},operators:["||"]},formatOptions:{onelineClauses:[...X4,...i0],tabularOnelineClauses:i0}}});var z4,j4=G(()=>{z4=["ABS","ACOS","ALL_MATCH","ANY_MATCH","APPROX_DISTINCT","APPROX_MOST_FREQUENT","APPROX_PERCENTILE","APPROX_SET","ARBITRARY","ARRAYS_OVERLAP","ARRAY_AGG","ARRAY_DISTINCT","ARRAY_EXCEPT","ARRAY_INTERSECT","ARRAY_JOIN","ARRAY_MAX","ARRAY_MIN","ARRAY_POSITION","ARRAY_REMOVE","ARRAY_SORT","ARRAY_UNION","ASIN","ATAN","ATAN2","AT_TIMEZONE","AVG","BAR","BETA_CDF","BING_TILE","BING_TILES_AROUND","BING_TILE_AT","BING_TILE_COORDINATES","BING_TILE_POLYGON","BING_TILE_QUADKEY","BING_TILE_ZOOM_LEVEL","BITWISE_AND","BITWISE_AND_AGG","BITWISE_LEFT_SHIFT","BITWISE_NOT","BITWISE_OR","BITWISE_OR_AGG","BITWISE_RIGHT_SHIFT","BITWISE_RIGHT_SHIFT_ARITHMETIC","BITWISE_XOR","BIT_COUNT","BOOL_AND","BOOL_OR","CARDINALITY","CAST","CBRT","CEIL","CEILING","CHAR2HEXINT","CHECKSUM","CHR","CLASSIFY","COALESCE","CODEPOINT","COLOR","COMBINATIONS","CONCAT","CONCAT_WS","CONTAINS","CONTAINS_SEQUENCE","CONVEX_HULL_AGG","CORR","COS","COSH","COSINE_SIMILARITY","COUNT","COUNT_IF","COVAR_POP","COVAR_SAMP","CRC32","CUME_DIST","CURRENT_CATALOG","CURRENT_DATE","CURRENT_GROUPS","CURRENT_SCHEMA","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_TIMEZONE","CURRENT_USER","DATE","DATE_ADD","DATE_DIFF","DATE_FORMAT","DATE_PARSE","DATE_TRUNC","DAY","DAY_OF_MONTH","DAY_OF_WEEK","DAY_OF_YEAR","DEGREES","DENSE_RANK","DOW","DOY","E","ELEMENT_AT","EMPTY_APPROX_SET","EVALUATE_CLASSIFIER_PREDICTIONS","EVERY","EXP","EXTRACT","FEATURES","FILTER","FIRST_VALUE","FLATTEN","FLOOR","FORMAT","FORMAT_DATETIME","FORMAT_NUMBER","FROM_BASE","FROM_BASE32","FROM_BASE64","FROM_BASE64URL","FROM_BIG_ENDIAN_32","FROM_BIG_ENDIAN_64","FROM_ENCODED_POLYLINE","FROM_GEOJSON_GEOMETRY","FROM_HEX","FROM_IEEE754_32","FROM_IEEE754_64","FROM_ISO8601_DATE","FROM_ISO8601_TIMESTAMP","FROM_ISO8601_TIMESTAMP_NANOS","FROM_UNIXTIME","FROM_UNIXTIME_NANOS","FROM_UTF8","GEOMETRIC_MEAN","GEOMETRY_FROM_HADOOP_SHAPE","GEOMETRY_INVALID_REASON","GEOMETRY_NEAREST_POINTS","GEOMETRY_TO_BING_TILES","GEOMETRY_UNION","GEOMETRY_UNION_AGG","GREATEST","GREAT_CIRCLE_DISTANCE","HAMMING_DISTANCE","HASH_COUNTS","HISTOGRAM","HMAC_MD5","HMAC_SHA1","HMAC_SHA256","HMAC_SHA512","HOUR","HUMAN_READABLE_SECONDS","IF","INDEX","INFINITY","INTERSECTION_CARDINALITY","INVERSE_BETA_CDF","INVERSE_NORMAL_CDF","IS_FINITE","IS_INFINITE","IS_JSON_SCALAR","IS_NAN","JACCARD_INDEX","JSON_ARRAY_CONTAINS","JSON_ARRAY_GET","JSON_ARRAY_LENGTH","JSON_EXISTS","JSON_EXTRACT","JSON_EXTRACT_SCALAR","JSON_FORMAT","JSON_PARSE","JSON_QUERY","JSON_SIZE","JSON_VALUE","KURTOSIS","LAG","LAST_DAY_OF_MONTH","LAST_VALUE","LEAD","LEARN_CLASSIFIER","LEARN_LIBSVM_CLASSIFIER","LEARN_LIBSVM_REGRESSOR","LEARN_REGRESSOR","LEAST","LENGTH","LEVENSHTEIN_DISTANCE","LINE_INTERPOLATE_POINT","LINE_INTERPOLATE_POINTS","LINE_LOCATE_POINT","LISTAGG","LN","LOCALTIME","LOCALTIMESTAMP","LOG","LOG10","LOG2","LOWER","LPAD","LTRIM","LUHN_CHECK","MAKE_SET_DIGEST","MAP","MAP_AGG","MAP_CONCAT","MAP_ENTRIES","MAP_FILTER","MAP_FROM_ENTRIES","MAP_KEYS","MAP_UNION","MAP_VALUES","MAP_ZIP_WITH","MAX","MAX_BY","MD5","MERGE","MERGE_SET_DIGEST","MILLISECOND","MIN","MINUTE","MIN_BY","MOD","MONTH","MULTIMAP_AGG","MULTIMAP_FROM_ENTRIES","MURMUR3","NAN","NGRAMS","NONE_MATCH","NORMALIZE","NORMAL_CDF","NOW","NTH_VALUE","NTILE","NULLIF","NUMERIC_HISTOGRAM","OBJECTID","OBJECTID_TIMESTAMP","PARSE_DATA_SIZE","PARSE_DATETIME","PARSE_DURATION","PERCENT_RANK","PI","POSITION","POW","POWER","QDIGEST_AGG","QUARTER","RADIANS","RAND","RANDOM","RANK","REDUCE","REDUCE_AGG","REGEXP_COUNT","REGEXP_EXTRACT","REGEXP_EXTRACT_ALL","REGEXP_LIKE","REGEXP_POSITION","REGEXP_REPLACE","REGEXP_SPLIT","REGRESS","REGR_INTERCEPT","REGR_SLOPE","RENDER","REPEAT","REPLACE","REVERSE","RGB","ROUND","ROW_NUMBER","RPAD","RTRIM","SECOND","SEQUENCE","SHA1","SHA256","SHA512","SHUFFLE","SIGN","SIMPLIFY_GEOMETRY","SIN","SKEWNESS","SLICE","SOUNDEX","SPATIAL_PARTITIONING","SPATIAL_PARTITIONS","SPLIT","SPLIT_PART","SPLIT_TO_MAP","SPLIT_TO_MULTIMAP","SPOOKY_HASH_V2_32","SPOOKY_HASH_V2_64","SQRT","STARTS_WITH","STDDEV","STDDEV_POP","STDDEV_SAMP","STRPOS","ST_AREA","ST_ASBINARY","ST_ASTEXT","ST_BOUNDARY","ST_BUFFER","ST_CENTROID","ST_CONTAINS","ST_CONVEXHULL","ST_COORDDIM","ST_CROSSES","ST_DIFFERENCE","ST_DIMENSION","ST_DISJOINT","ST_DISTANCE","ST_ENDPOINT","ST_ENVELOPE","ST_ENVELOPEASPTS","ST_EQUALS","ST_EXTERIORRING","ST_GEOMETRIES","ST_GEOMETRYFROMTEXT","ST_GEOMETRYN","ST_GEOMETRYTYPE","ST_GEOMFROMBINARY","ST_INTERIORRINGN","ST_INTERIORRINGS","ST_INTERSECTION","ST_INTERSECTS","ST_ISCLOSED","ST_ISEMPTY","ST_ISRING","ST_ISSIMPLE","ST_ISVALID","ST_LENGTH","ST_LINEFROMTEXT","ST_LINESTRING","ST_MULTIPOINT","ST_NUMGEOMETRIES","ST_NUMINTERIORRING","ST_NUMPOINTS","ST_OVERLAPS","ST_POINT","ST_POINTN","ST_POINTS","ST_POLYGON","ST_RELATE","ST_STARTPOINT","ST_SYMDIFFERENCE","ST_TOUCHES","ST_UNION","ST_WITHIN","ST_X","ST_XMAX","ST_XMIN","ST_Y","ST_YMAX","ST_YMIN","SUBSTR","SUBSTRING","SUM","TAN","TANH","TDIGEST_AGG","TIMESTAMP_OBJECTID","TIMEZONE_HOUR","TIMEZONE_MINUTE","TO_BASE","TO_BASE32","TO_BASE64","TO_BASE64URL","TO_BIG_ENDIAN_32","TO_BIG_ENDIAN_64","TO_CHAR","TO_DATE","TO_ENCODED_POLYLINE","TO_GEOJSON_GEOMETRY","TO_GEOMETRY","TO_HEX","TO_IEEE754_32","TO_IEEE754_64","TO_ISO8601","TO_MILLISECONDS","TO_SPHERICAL_GEOGRAPHY","TO_TIMESTAMP","TO_UNIXTIME","TO_UTF8","TRANSFORM","TRANSFORM_KEYS","TRANSFORM_VALUES","TRANSLATE","TRIM","TRIM_ARRAY","TRUNCATE","TRY","TRY_CAST","TYPEOF","UPPER","URL_DECODE","URL_ENCODE","URL_EXTRACT_FRAGMENT","URL_EXTRACT_HOST","URL_EXTRACT_PARAMETER","URL_EXTRACT_PATH","URL_EXTRACT_PORT","URL_EXTRACT_PROTOCOL","URL_EXTRACT_QUERY","UUID","VALUES_AT_QUANTILES","VALUE_AT_QUANTILE","VARIANCE","VAR_POP","VAR_SAMP","VERSION","WEEK","WEEK_OF_YEAR","WIDTH_BUCKET","WILSON_INTERVAL_LOWER","WILSON_INTERVAL_UPPER","WITH_TIMEZONE","WORD_STEM","XXHASH64","YEAR","YEAR_OF_WEEK","YOW","ZIP","ZIP_WITH","CLASSIFIER","FIRST","LAST","MATCH_NUMBER","NEXT","PERMUTE","PREV"]});var K4,J4,Q4=G(()=>{K4=["ABSENT","ADD","ADMIN","AFTER","ALL","ALTER","ANALYZE","AND","ANY","AS","ASC","AT","AUTHORIZATION","BERNOULLI","BETWEEN","BOTH","BY","CALL","CASCADE","CASE","CATALOGS","COLUMN","COLUMNS","COMMENT","COMMIT","COMMITTED","CONDITIONAL","CONSTRAINT","COPARTITION","CREATE","CROSS","CUBE","CURRENT","CURRENT_PATH","CURRENT_ROLE","DATA","DEALLOCATE","DEFAULT","DEFINE","DEFINER","DELETE","DENY","DESC","DESCRIBE","DESCRIPTOR","DISTINCT","DISTRIBUTED","DOUBLE","DROP","ELSE","EMPTY","ENCODING","END","ERROR","ESCAPE","EXCEPT","EXCLUDING","EXECUTE","EXISTS","EXPLAIN","FALSE","FETCH","FINAL","FIRST","FOLLOWING","FOR","FROM","FULL","FUNCTIONS","GRANT","GRANTED","GRANTS","GRAPHVIZ","GROUP","GROUPING","GROUPS","HAVING","IGNORE","IN","INCLUDING","INITIAL","INNER","INPUT","INSERT","INTERSECT","INTERVAL","INTO","INVOKER","IO","IS","ISOLATION","JOIN","JSON","JSON_ARRAY","JSON_OBJECT","KEEP","KEY","KEYS","LAST","LATERAL","LEADING","LEFT","LEVEL","LIKE","LIMIT","LOCAL","LOGICAL","MATCH","MATCHED","MATCHES","MATCH_RECOGNIZE","MATERIALIZED","MEASURES","NATURAL","NEXT","NFC","NFD","NFKC","NFKD","NO","NONE","NOT","NULL","NULLS","OBJECT","OF","OFFSET","OMIT","ON","ONE","ONLY","OPTION","OR","ORDER","ORDINALITY","OUTER","OUTPUT","OVER","OVERFLOW","PARTITION","PARTITIONS","PASSING","PAST","PATH","PATTERN","PER","PERMUTE","PRECEDING","PRECISION","PREPARE","PRIVILEGES","PROPERTIES","PRUNE","QUOTES","RANGE","READ","RECURSIVE","REFRESH","RENAME","REPEATABLE","RESET","RESPECT","RESTRICT","RETURNING","REVOKE","RIGHT","ROLE","ROLES","ROLLBACK","ROLLUP","ROW","ROWS","RUNNING","SCALAR","SCHEMA","SCHEMAS","SECURITY","SEEK","SELECT","SERIALIZABLE","SESSION","SET","SETS","SHOW","SKIP","SOME","START","STATS","STRING","SUBSET","SYSTEM","TABLE","TABLES","TABLESAMPLE","TEXT","THEN","TIES","TIME","TIMESTAMP","TO","TRAILING","TRANSACTION","TRUE","TYPE","UESCAPE","UNBOUNDED","UNCOMMITTED","UNCONDITIONAL","UNION","UNIQUE","UNKNOWN","UNMATCHED","UNNEST","UPDATE","USE","USER","USING","UTF16","UTF32","UTF8","VALIDATE","VALUE","VALUES","VERBOSE","VIEW","WHEN","WHERE","WINDOW","WITH","WITHIN","WITHOUT","WORK","WRAPPER","WRITE","ZONE"],J4=["BIGINT","INT","INTEGER","SMALLINT","TINYINT","BOOLEAN","DATE","DECIMAL","REAL","DOUBLE","HYPERLOGLOG","QDIGEST","TDIGEST","P4HYPERLOGLOG","INTERVAL","TIMESTAMP","TIME","VARBINARY","VARCHAR","CHAR","ROW","ARRAY","MAP","JSON","JSON2016","IPADDRESS","GEOMETRY","UUID","SETDIGEST","JONIREGEXP","RE2JREGEXP","LIKEPATTERN","COLOR","CODEPOINTS","FUNCTION","JSONPATH"]});var mPe,gPe,Z4,o0,IPe,_Pe,NPe,OPe,wA,a0=G(()=>{qt();j4();Q4();mPe=v(["SELECT [ALL | DISTINCT]"]),gPe=v(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY [ALL | DISTINCT]","HAVING","WINDOW","PARTITION BY","ORDER BY","LIMIT","OFFSET","FETCH {FIRST | NEXT}","INSERT INTO","VALUES","SET","MATCH_RECOGNIZE","MEASURES","ONE ROW PER MATCH","ALL ROWS PER MATCH","AFTER MATCH","PATTERN","SUBSET","DEFINE"]),Z4=v(["CREATE TABLE [IF NOT EXISTS]"]),o0=v(["CREATE [OR REPLACE] [MATERIALIZED] VIEW","UPDATE","DELETE FROM","DROP TABLE [IF EXISTS]","ALTER TABLE [IF EXISTS]","ADD COLUMN [IF NOT EXISTS]","DROP COLUMN [IF EXISTS]","RENAME COLUMN [IF EXISTS]","RENAME TO","SET AUTHORIZATION [USER | ROLE]","SET PROPERTIES","EXECUTE","TRUNCATE TABLE","ALTER SCHEMA","ALTER MATERIALIZED VIEW","ALTER VIEW","CREATE SCHEMA","CREATE ROLE","DROP SCHEMA","DROP MATERIALIZED VIEW","DROP VIEW","DROP ROLE","EXPLAIN","ANALYZE","EXPLAIN ANALYZE","EXPLAIN ANALYZE VERBOSE","USE","DESCRIBE INPUT","DESCRIBE OUTPUT","REFRESH MATERIALIZED VIEW","RESET SESSION","SET SESSION","SET PATH","SET TIME ZONE","SHOW GRANTS","SHOW CREATE TABLE","SHOW CREATE SCHEMA","SHOW CREATE VIEW","SHOW CREATE MATERIALIZED VIEW","SHOW TABLES","SHOW SCHEMAS","SHOW CATALOGS","SHOW COLUMNS","SHOW STATS FOR","SHOW ROLES","SHOW CURRENT ROLES","SHOW ROLE GRANTS","SHOW FUNCTIONS","SHOW SESSION"]),IPe=v(["UNION [ALL | DISTINCT]","EXCEPT [ALL | DISTINCT]","INTERSECT [ALL | DISTINCT]"]),_Pe=v(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL [INNER] JOIN","NATURAL {LEFT | RIGHT | FULL} [OUTER] JOIN"]),NPe=v(["{ROWS | RANGE | GROUPS} BETWEEN","IS [NOT] DISTINCT FROM"]),OPe=v([]),wA={name:"trino",tokenizerOptions:{reservedSelect:mPe,reservedClauses:[...gPe,...Z4,...o0],reservedSetOperations:IPe,reservedJoins:_Pe,reservedKeywordPhrases:NPe,reservedDataTypePhrases:OPe,reservedKeywords:K4,reservedDataTypes:J4,reservedFunctionNames:z4,extraParens:["[]","{}"],stringTypes:[{quote:"''-qq",prefixes:["U&"]},{quote:"''-raw",prefixes:["X"],requirePrefix:!0}],identTypes:['""-qq'],paramTypes:{positional:!0},operators:["%","->","=>",":","||","|","^","$"]},formatOptions:{onelineClauses:[...Z4,...o0],tabularOnelineClauses:o0}}});var e8,t8=G(()=>{e8=["APPROX_COUNT_DISTINCT","AVG","CHECKSUM_AGG","COUNT","COUNT_BIG","GROUPING","GROUPING_ID","MAX","MIN","STDEV","STDEVP","SUM","VAR","VARP","CUME_DIST","FIRST_VALUE","LAG","LAST_VALUE","LEAD","PERCENTILE_CONT","PERCENTILE_DISC","PERCENT_RANK","Collation - COLLATIONPROPERTY","Collation - TERTIARY_WEIGHTS","@@DBTS","@@LANGID","@@LANGUAGE","@@LOCK_TIMEOUT","@@MAX_CONNECTIONS","@@MAX_PRECISION","@@NESTLEVEL","@@OPTIONS","@@REMSERVER","@@SERVERNAME","@@SERVICENAME","@@SPID","@@TEXTSIZE","@@VERSION","CAST","CONVERT","PARSE","TRY_CAST","TRY_CONVERT","TRY_PARSE","ASYMKEY_ID","ASYMKEYPROPERTY","CERTPROPERTY","CERT_ID","CRYPT_GEN_RANDOM","DECRYPTBYASYMKEY","DECRYPTBYCERT","DECRYPTBYKEY","DECRYPTBYKEYAUTOASYMKEY","DECRYPTBYKEYAUTOCERT","DECRYPTBYPASSPHRASE","ENCRYPTBYASYMKEY","ENCRYPTBYCERT","ENCRYPTBYKEY","ENCRYPTBYPASSPHRASE","HASHBYTES","IS_OBJECTSIGNED","KEY_GUID","KEY_ID","KEY_NAME","SIGNBYASYMKEY","SIGNBYCERT","SYMKEYPROPERTY","VERIFYSIGNEDBYCERT","VERIFYSIGNEDBYASYMKEY","@@CURSOR_ROWS","@@FETCH_STATUS","CURSOR_STATUS","DATALENGTH","IDENT_CURRENT","IDENT_INCR","IDENT_SEED","IDENTITY","SQL_VARIANT_PROPERTY","@@DATEFIRST","CURRENT_TIMESTAMP","CURRENT_TIMEZONE","CURRENT_TIMEZONE_ID","DATEADD","DATEDIFF","DATEDIFF_BIG","DATEFROMPARTS","DATENAME","DATEPART","DATETIME2FROMPARTS","DATETIMEFROMPARTS","DATETIMEOFFSETFROMPARTS","DAY","EOMONTH","GETDATE","GETUTCDATE","ISDATE","MONTH","SMALLDATETIMEFROMPARTS","SWITCHOFFSET","SYSDATETIME","SYSDATETIMEOFFSET","SYSUTCDATETIME","TIMEFROMPARTS","TODATETIMEOFFSET","YEAR","JSON","ISJSON","JSON_VALUE","JSON_QUERY","JSON_MODIFY","ABS","ACOS","ASIN","ATAN","ATN2","CEILING","COS","COT","DEGREES","EXP","FLOOR","LOG","LOG10","PI","POWER","RADIANS","RAND","ROUND","SIGN","SIN","SQRT","SQUARE","TAN","CHOOSE","GREATEST","IIF","LEAST","@@PROCID","APP_NAME","APPLOCK_MODE","APPLOCK_TEST","ASSEMBLYPROPERTY","COL_LENGTH","COL_NAME","COLUMNPROPERTY","DATABASEPROPERTYEX","DB_ID","DB_NAME","FILE_ID","FILE_IDEX","FILE_NAME","FILEGROUP_ID","FILEGROUP_NAME","FILEGROUPPROPERTY","FILEPROPERTY","FILEPROPERTYEX","FULLTEXTCATALOGPROPERTY","FULLTEXTSERVICEPROPERTY","INDEX_COL","INDEXKEY_PROPERTY","INDEXPROPERTY","NEXT VALUE FOR","OBJECT_DEFINITION","OBJECT_ID","OBJECT_NAME","OBJECT_SCHEMA_NAME","OBJECTPROPERTY","OBJECTPROPERTYEX","ORIGINAL_DB_NAME","PARSENAME","SCHEMA_ID","SCHEMA_NAME","SCOPE_IDENTITY","SERVERPROPERTY","STATS_DATE","TYPE_ID","TYPE_NAME","TYPEPROPERTY","DENSE_RANK","NTILE","RANK","ROW_NUMBER","PUBLISHINGSERVERNAME","CERTENCODED","CERTPRIVATEKEY","CURRENT_USER","DATABASE_PRINCIPAL_ID","HAS_DBACCESS","HAS_PERMS_BY_NAME","IS_MEMBER","IS_ROLEMEMBER","IS_SRVROLEMEMBER","LOGINPROPERTY","ORIGINAL_LOGIN","PERMISSIONS","PWDENCRYPT","PWDCOMPARE","SESSION_USER","SESSIONPROPERTY","SUSER_ID","SUSER_NAME","SUSER_SID","SUSER_SNAME","SYSTEM_USER","USER","USER_ID","USER_NAME","ASCII","CHARINDEX","CONCAT","CONCAT_WS","DIFFERENCE","FORMAT","LEFT","LEN","LOWER","LTRIM","PATINDEX","QUOTENAME","REPLACE","REPLICATE","REVERSE","RIGHT","RTRIM","SOUNDEX","SPACE","STR","STRING_AGG","STRING_ESCAPE","STUFF","SUBSTRING","TRANSLATE","TRIM","UNICODE","UPPER","$PARTITION","@@ERROR","@@IDENTITY","@@PACK_RECEIVED","@@ROWCOUNT","@@TRANCOUNT","BINARY_CHECKSUM","CHECKSUM","COMPRESS","CONNECTIONPROPERTY","CONTEXT_INFO","CURRENT_REQUEST_ID","CURRENT_TRANSACTION_ID","DECOMPRESS","ERROR_LINE","ERROR_MESSAGE","ERROR_NUMBER","ERROR_PROCEDURE","ERROR_SEVERITY","ERROR_STATE","FORMATMESSAGE","GET_FILESTREAM_TRANSACTION_CONTEXT","GETANSINULL","HOST_ID","HOST_NAME","ISNULL","ISNUMERIC","MIN_ACTIVE_ROWVERSION","NEWID","NEWSEQUENTIALID","ROWCOUNT_BIG","SESSION_CONTEXT","XACT_STATE","@@CONNECTIONS","@@CPU_BUSY","@@IDLE","@@IO_BUSY","@@PACK_SENT","@@PACKET_ERRORS","@@TIMETICKS","@@TOTAL_ERRORS","@@TOTAL_READ","@@TOTAL_WRITE","TEXTPTR","TEXTVALID","COLUMNS_UPDATED","EVENTDATA","TRIGGER_NESTLEVEL","UPDATE","COALESCE","NULLIF"]});var n8,r8,i8=G(()=>{n8=["ADD","ALL","ALTER","AND","ANY","AS","ASC","AUTHORIZATION","BACKUP","BEGIN","BETWEEN","BREAK","BROWSE","BULK","BY","CASCADE","CHECK","CHECKPOINT","CLOSE","CLUSTERED","COALESCE","COLLATE","COLUMN","COMMIT","COMPUTE","CONSTRAINT","CONTAINS","CONTAINSTABLE","CONTINUE","CONVERT","CREATE","CROSS","CURRENT","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURSOR","DATABASE","DBCC","DEALLOCATE","DECLARE","DEFAULT","DELETE","DENY","DESC","DISK","DISTINCT","DISTRIBUTED","DROP","DUMP","ERRLVL","ESCAPE","EXEC","EXECUTE","EXISTS","EXIT","EXTERNAL","FETCH","FILE","FILLFACTOR","FOR","FOREIGN","FREETEXT","FREETEXTTABLE","FROM","FULL","FUNCTION","GOTO","GRANT","GROUP","HAVING","HOLDLOCK","IDENTITY","IDENTITYCOL","IDENTITY_INSERT","IF","IN","INDEX","INNER","INSERT","INTERSECT","INTO","IS","JOIN","KEY","KILL","LEFT","LIKE","LINENO","LOAD","MERGE","NOCHECK","NONCLUSTERED","NOT","NULL","NULLIF","OF","OFF","OFFSETS","ON","OPEN","OPENDATASOURCE","OPENQUERY","OPENROWSET","OPENXML","OPTION","OR","ORDER","OUTER","OVER","PERCENT","PIVOT","PLAN","PRIMARY","PRINT","PROC","PROCEDURE","PUBLIC","RAISERROR","READ","READTEXT","RECONFIGURE","REFERENCES","REPLICATION","RESTORE","RESTRICT","RETURN","REVERT","REVOKE","RIGHT","ROLLBACK","ROWCOUNT","ROWGUIDCOL","RULE","SAVE","SCHEMA","SECURITYAUDIT","SELECT","SEMANTICKEYPHRASETABLE","SEMANTICSIMILARITYDETAILSTABLE","SEMANTICSIMILARITYTABLE","SESSION_USER","SET","SETUSER","SHUTDOWN","SOME","STATISTICS","SYSTEM_USER","TABLE","TABLESAMPLE","TEXTSIZE","THEN","TO","TOP","TRAN","TRANSACTION","TRIGGER","TRUNCATE","TRY_CONVERT","TSEQUAL","UNION","UNIQUE","UNPIVOT","UPDATE","UPDATETEXT","USE","USER","VALUES","VIEW","WAITFOR","WHERE","WHILE","WITH","WITHIN GROUP","WRITETEXT","$ACTION"],r8=["BINARY","BIT","CHAR","CHAR","CHARACTER","DATE","DATETIME2","DATETIMEOFFSET","DEC","DECIMAL","DOUBLE","FLOAT","INT","INTEGER","NATIONAL","NCHAR","NUMERIC","NVARCHAR","PRECISION","REAL","SMALLINT","TIME","TIMESTAMP","VARBINARY","VARCHAR"]});var CPe,bPe,s8,l0,yPe,wPe,LPe,DPe,LA,c0=G(()=>{qt();t8();i8();CPe=v(["SELECT [ALL | DISTINCT]"]),bPe=v(["WITH","INTO","FROM","WHERE","GROUP BY","HAVING","WINDOW","PARTITION BY","ORDER BY","OFFSET","FETCH {FIRST | NEXT}","FOR {BROWSE | XML | JSON}","OPTION","INSERT [INTO]","VALUES","SET","MERGE [INTO]","WHEN [NOT] MATCHED [BY TARGET | BY SOURCE] [THEN]","UPDATE SET"]),s8=v(["CREATE TABLE"]),l0=v(["CREATE [OR ALTER] [MATERIALIZED] VIEW","UPDATE","WHERE CURRENT OF","DELETE [FROM]","DROP TABLE [IF EXISTS]","ALTER TABLE","ADD","DROP COLUMN [IF EXISTS]","ALTER COLUMN","TRUNCATE TABLE","CREATE [UNIQUE] [CLUSTERED] INDEX","CREATE DATABASE","ALTER DATABASE","DROP DATABASE [IF EXISTS]","CREATE [OR ALTER] [PARTITION] {FUNCTION | PROCEDURE | PROC}","ALTER [PARTITION] {FUNCTION | PROCEDURE | PROC}","DROP [PARTITION] {FUNCTION | PROCEDURE | PROC} [IF EXISTS]","GO","USE","ADD SENSITIVITY CLASSIFICATION","ADD SIGNATURE","AGGREGATE","ANSI_DEFAULTS","ANSI_NULLS","ANSI_NULL_DFLT_OFF","ANSI_NULL_DFLT_ON","ANSI_PADDING","ANSI_WARNINGS","APPLICATION ROLE","ARITHABORT","ARITHIGNORE","ASSEMBLY","ASYMMETRIC KEY","AUTHORIZATION","AVAILABILITY GROUP","BACKUP","BACKUP CERTIFICATE","BACKUP MASTER KEY","BACKUP SERVICE MASTER KEY","BEGIN CONVERSATION TIMER","BEGIN DIALOG CONVERSATION","BROKER PRIORITY","BULK INSERT","CERTIFICATE","CLOSE MASTER KEY","CLOSE SYMMETRIC KEY","COLUMN ENCRYPTION KEY","COLUMN MASTER KEY","COLUMNSTORE INDEX","CONCAT_NULL_YIELDS_NULL","CONTEXT_INFO","CONTRACT","CREDENTIAL","CRYPTOGRAPHIC PROVIDER","CURSOR_CLOSE_ON_COMMIT","DATABASE","DATABASE AUDIT SPECIFICATION","DATABASE ENCRYPTION KEY","DATABASE HADR","DATABASE SCOPED CONFIGURATION","DATABASE SCOPED CREDENTIAL","DATABASE SET","DATEFIRST","DATEFORMAT","DEADLOCK_PRIORITY","DENY","DENY XML","DISABLE TRIGGER","ENABLE TRIGGER","END CONVERSATION","ENDPOINT","EVENT NOTIFICATION","EVENT SESSION","EXECUTE AS","EXTERNAL DATA SOURCE","EXTERNAL FILE FORMAT","EXTERNAL LANGUAGE","EXTERNAL LIBRARY","EXTERNAL RESOURCE POOL","EXTERNAL TABLE","FIPS_FLAGGER","FMTONLY","FORCEPLAN","FULLTEXT CATALOG","FULLTEXT INDEX","FULLTEXT STOPLIST","GET CONVERSATION GROUP","GET_TRANSMISSION_STATUS","GRANT","GRANT XML","IDENTITY_INSERT","IMPLICIT_TRANSACTIONS","INDEX","LANGUAGE","LOCK_TIMEOUT","LOGIN","MASTER KEY","MESSAGE TYPE","MOVE CONVERSATION","NOCOUNT","NOEXEC","NUMERIC_ROUNDABORT","OFFSETS","OPEN MASTER KEY","OPEN SYMMETRIC KEY","PARSEONLY","PARTITION SCHEME","QUERY_GOVERNOR_COST_LIMIT","QUEUE","QUOTED_IDENTIFIER","RECEIVE","REMOTE SERVICE BINDING","REMOTE_PROC_TRANSACTIONS","RESOURCE GOVERNOR","RESOURCE POOL","RESTORE","RESTORE FILELISTONLY","RESTORE HEADERONLY","RESTORE LABELONLY","RESTORE MASTER KEY","RESTORE REWINDONLY","RESTORE SERVICE MASTER KEY","RESTORE VERIFYONLY","REVERT","REVOKE","REVOKE XML","ROLE","ROUTE","ROWCOUNT","RULE","SCHEMA","SEARCH PROPERTY LIST","SECURITY POLICY","SELECTIVE XML INDEX","SEND","SENSITIVITY CLASSIFICATION","SEQUENCE","SERVER AUDIT","SERVER AUDIT SPECIFICATION","SERVER CONFIGURATION","SERVER ROLE","SERVICE","SERVICE MASTER KEY","SETUSER","SHOWPLAN_ALL","SHOWPLAN_TEXT","SHOWPLAN_XML","SIGNATURE","SPATIAL INDEX","STATISTICS","STATISTICS IO","STATISTICS PROFILE","STATISTICS TIME","STATISTICS XML","SYMMETRIC KEY","SYNONYM","TABLE","TABLE IDENTITY","TEXTSIZE","TRANSACTION ISOLATION LEVEL","TRIGGER","TYPE","UPDATE STATISTICS","USER","WORKLOAD GROUP","XACT_ABORT","XML INDEX","XML SCHEMA COLLECTION"]),yPe=v(["UNION [ALL]","EXCEPT","INTERSECT"]),wPe=v(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","{CROSS | OUTER} APPLY"]),LPe=v(["ON {UPDATE | DELETE} [SET NULL | SET DEFAULT]","{ROWS | RANGE} BETWEEN"]),DPe=v([]),LA={name:"transactsql",tokenizerOptions:{reservedSelect:CPe,reservedClauses:[...bPe,...s8,...l0],reservedSetOperations:yPe,reservedJoins:wPe,reservedKeywordPhrases:LPe,reservedDataTypePhrases:DPe,reservedKeywords:n8,reservedDataTypes:r8,reservedFunctionNames:e8,nestedBlockComments:!0,stringTypes:[{quote:"''-qq",prefixes:["N"]},"{}"],identTypes:['""-qq',"[]"],identChars:{first:"#@",rest:"#@$"},paramTypes:{named:["@"],quoted:["@"]},operators:["%","&","|","^","~","!<","!>","+=","-=","*=","/=","%=","|=","&=","^=","::",":"],propertyAccessOperators:[".."]},formatOptions:{alwaysDenseOperators:["::"],onelineClauses:[...s8,...l0],tabularOnelineClauses:l0}}});var o8,a8,l8=G(()=>{o8=["ADD","ALL","ALTER","ANALYZE","AND","AS","ASC","ASENSITIVE","BEFORE","BETWEEN","_BINARY","BOTH","BY","CALL","CASCADE","CASE","CHANGE","CHECK","COLLATE","COLUMN","CONDITION","CONSTRAINT","CONTINUE","CONVERT","CREATE","CROSS","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURSOR","DATABASE","DATABASES","DAY_HOUR","DAY_MICROSECOND","DAY_MINUTE","DAY_SECOND","DECLARE","DEFAULT","DELAYED","DELETE","DESC","DESCRIBE","DETERMINISTIC","DISTINCT","DISTINCTROW","DIV","DROP","DUAL","EACH","ELSE","ELSEIF","ENCLOSED","ESCAPED","EXCEPT","EXISTS","EXIT","EXPLAIN","EXTRA_JOIN","FALSE","FETCH","FOR","FORCE","FORCE_COMPILED_MODE","FORCE_INTERPRETER_MODE","FOREIGN","FROM","FULL","FULLTEXT","GRANT","GROUP","HAVING","HEARTBEAT_NO_LOGGING","HIGH_PRIORITY","HOUR_MICROSECOND","HOUR_MINUTE","HOUR_SECOND","IF","IGNORE","IN","INDEX","INFILE","INNER","INOUT","INSENSITIVE","INSERT","IN","_INTERNAL_DYNAMIC_TYPECAST","INTERSECT","INTERVAL","INTO","ITERATE","JOIN","KEY","KEYS","KILL","LEADING","LEAVE","LEFT","LIKE","LIMIT","LINES","LOAD","LOCALTIME","LOCALTIMESTAMP","LOCK","LOOP","LOW_PRIORITY","MATCH","MAXVALUE","MINUS","MINUTE_MICROSECOND","MINUTE_SECOND","MOD","MODIFIES","NATURAL","NO_QUERY_REWRITE","NOT","NO_WRITE_TO_BINLOG","NO_QUERY_REWRITE","NULL","ON","OPTIMIZE","OPTION","OPTIONALLY","OR","ORDER","OUT","OUTER","OUTFILE","OVER","PRIMARY","PROCEDURE","PURGE","RANGE","READ","READS","REFERENCES","REGEXP","RELEASE","RENAME","REPEAT","REPLACE","REQUIRE","RESTRICT","RETURN","REVOKE","RIGHT","RIGHT_ANTI_JOIN","RIGHT_SEMI_JOIN","RIGHT_STRAIGHT_JOIN","RLIKE","SCHEMA","SCHEMAS","SECOND_MICROSECOND","SELECT","SEMI_JOIN","SENSITIVE","SEPARATOR","SET","SHOW","SIGNAL","SPATIAL","SPECIFIC","SQL","SQL_BIG_RESULT","SQL_BUFFER_RESULT","SQL_CACHE","SQL_CALC_FOUND_ROWS","SQLEXCEPTION","SQL_NO_CACHE","SQL_NO_LOGGING","SQL_SMALL_RESULT","SQLSTATE","SQLWARNING","STRAIGHT_JOIN","TABLE","TERMINATED","THEN","TO","TRAILING","TRIGGER","TRUE","UNBOUNDED","UNDO","UNION","UNIQUE","UNLOCK","UPDATE","USAGE","USE","USING","UTC_DATE","UTC_TIME","UTC_TIMESTAMP","_UTF8","VALUES","WHEN","WHERE","WHILE","WINDOW","WITH","WITHIN","WRITE","XOR","YEAR_MONTH","ZEROFILL"],a8=["BIGINT","BINARY","BIT","BLOB","CHAR","CHARACTER","DATETIME","DEC","DECIMAL","DOUBLE PRECISION","DOUBLE","ENUM","FIXED","FLOAT","FLOAT4","FLOAT8","INT","INT1","INT2","INT3","INT4","INT8","INTEGER","LONG","LONGBLOB","LONGTEXT","MEDIUMBLOB","MEDIUMINT","MEDIUMTEXT","MIDDLEINT","NATIONAL CHAR","NATIONAL VARCHAR","NUMERIC","PRECISION","REAL","SMALLINT","TEXT","TIME","TIMESTAMP","TINYBLOB","TINYINT","TINYTEXT","UNSIGNED","VARBINARY","VARCHAR","VARCHARACTER","YEAR"]});var c8,u8=G(()=>{c8=["ABS","ACOS","ADDDATE","ADDTIME","AES_DECRYPT","AES_ENCRYPT","ANY_VALUE","APPROX_COUNT_DISTINCT","APPROX_COUNT_DISTINCT_ACCUMULATE","APPROX_COUNT_DISTINCT_COMBINE","APPROX_COUNT_DISTINCT_ESTIMATE","APPROX_GEOGRAPHY_INTERSECTS","APPROX_PERCENTILE","ASCII","ASIN","ATAN","ATAN2","AVG","BIN","BINARY","BIT_AND","BIT_COUNT","BIT_OR","BIT_XOR","CAST","CEIL","CEILING","CHAR","CHARACTER_LENGTH","CHAR_LENGTH","CHARSET","COALESCE","COERCIBILITY","COLLATION","COLLECT","CONCAT","CONCAT_WS","CONNECTION_ID","CONV","CONVERT","CONVERT_TZ","COS","COT","COUNT","CUME_DIST","CURDATE","CURRENT_DATE","CURRENT_ROLE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURTIME","DATABASE","DATE","DATE_ADD","DATEDIFF","DATE_FORMAT","DATE_SUB","DATE_TRUNC","DAY","DAYNAME","DAYOFMONTH","DAYOFWEEK","DAYOFYEAR","DECODE","DEFAULT","DEGREES","DENSE_RANK","DIV","DOT_PRODUCT","ELT","EUCLIDEAN_DISTANCE","EXP","EXTRACT","FIELD","FIRST","FIRST_VALUE","FLOOR","FORMAT","FOUND_ROWS","FROM_BASE64","FROM_DAYS","FROM_UNIXTIME","GEOGRAPHY_AREA","GEOGRAPHY_CONTAINS","GEOGRAPHY_DISTANCE","GEOGRAPHY_INTERSECTS","GEOGRAPHY_LATITUDE","GEOGRAPHY_LENGTH","GEOGRAPHY_LONGITUDE","GEOGRAPHY_POINT","GEOGRAPHY_WITHIN_DISTANCE","GEOMETRY_AREA","GEOMETRY_CONTAINS","GEOMETRY_DISTANCE","GEOMETRY_FILTER","GEOMETRY_INTERSECTS","GEOMETRY_LENGTH","GEOMETRY_POINT","GEOMETRY_WITHIN_DISTANCE","GEOMETRY_X","GEOMETRY_Y","GREATEST","GROUPING","GROUP_CONCAT","HEX","HIGHLIGHT","HOUR","ICU_VERSION","IF","IFNULL","INET_ATON","INET_NTOA","INET6_ATON","INET6_NTOA","INITCAP","INSERT","INSTR","INTERVAL","IS","IS NULL","JSON_AGG","JSON_ARRAY_CONTAINS_DOUBLE","JSON_ARRAY_CONTAINS_JSON","JSON_ARRAY_CONTAINS_STRING","JSON_ARRAY_PUSH_DOUBLE","JSON_ARRAY_PUSH_JSON","JSON_ARRAY_PUSH_STRING","JSON_DELETE_KEY","JSON_EXTRACT_DOUBLE","JSON_EXTRACT_JSON","JSON_EXTRACT_STRING","JSON_EXTRACT_BIGINT","JSON_GET_TYPE","JSON_LENGTH","JSON_SET_DOUBLE","JSON_SET_JSON","JSON_SET_STRING","JSON_SPLICE_DOUBLE","JSON_SPLICE_JSON","JSON_SPLICE_STRING","LAG","LAST_DAY","LAST_VALUE","LCASE","LEAD","LEAST","LEFT","LENGTH","LIKE","LN","LOCALTIME","LOCALTIMESTAMP","LOCATE","LOG","LOG10","LOG2","LPAD","LTRIM","MATCH","MAX","MD5","MEDIAN","MICROSECOND","MIN","MINUTE","MOD","MONTH","MONTHNAME","MONTHS_BETWEEN","NOT","NOW","NTH_VALUE","NTILE","NULLIF","OCTET_LENGTH","PERCENT_RANK","PERCENTILE_CONT","PERCENTILE_DISC","PI","PIVOT","POSITION","POW","POWER","QUARTER","QUOTE","RADIANS","RAND","RANK","REGEXP","REPEAT","REPLACE","REVERSE","RIGHT","RLIKE","ROUND","ROW_COUNT","ROW_NUMBER","RPAD","RTRIM","SCALAR","SCHEMA","SEC_TO_TIME","SHA1","SHA2","SIGMOID","SIGN","SIN","SLEEP","SPLIT","SOUNDEX","SOUNDS LIKE","SOURCE_POS_WAIT","SPACE","SQRT","STDDEV","STDDEV_POP","STDDEV_SAMP","STR_TO_DATE","SUBDATE","SUBSTR","SUBSTRING","SUBSTRING_INDEX","SUM","SYS_GUID","TAN","TIME","TIMEDIFF","TIME_BUCKET","TIME_FORMAT","TIMESTAMP","TIMESTAMPADD","TIMESTAMPDIFF","TIME_TO_SEC","TO_BASE64","TO_CHAR","TO_DAYS","TO_JSON","TO_NUMBER","TO_SECONDS","TO_TIMESTAMP","TRIM","TRUNC","TRUNCATE","UCASE","UNHEX","UNIX_TIMESTAMP","UPDATEXML","UPPER","UTC_DATE","UTC_TIME","UTC_TIMESTAMP","UUID","VALUES","VARIANCE","VAR_POP","VAR_SAMP","VECTOR_SUB","VERSION","WEEK","WEEKDAY","WEEKOFYEAR","YEAR"]});var PPe,xPe,d8,u0,vPe,MPe,UPe,BPe,DA,d0=G(()=>{qt();jf();l8();u8();PPe=v(["SELECT [ALL | DISTINCT | DISTINCTROW]"]),xPe=v(["WITH","FROM","WHERE","GROUP BY","HAVING","PARTITION BY","ORDER BY","LIMIT","OFFSET","INSERT [IGNORE] [INTO]","VALUES","REPLACE [INTO]","ON DUPLICATE KEY UPDATE","SET","CREATE [OR REPLACE] [TEMPORARY] PROCEDURE [IF NOT EXISTS]","CREATE [OR REPLACE] [EXTERNAL] FUNCTION"]),d8=v(["CREATE [ROWSTORE] [REFERENCE | TEMPORARY | GLOBAL TEMPORARY] TABLE [IF NOT EXISTS]"]),u0=v(["CREATE VIEW","UPDATE","DELETE [FROM]","DROP [TEMPORARY] TABLE [IF EXISTS]","ALTER [ONLINE] TABLE","ADD [COLUMN]","ADD [UNIQUE] {INDEX | KEY}","DROP [COLUMN]","MODIFY [COLUMN]","CHANGE","RENAME [TO | AS]","TRUNCATE [TABLE]","ADD AGGREGATOR","ADD LEAF","AGGREGATOR SET AS MASTER","ALTER DATABASE","ALTER PIPELINE","ALTER RESOURCE POOL","ALTER USER","ALTER VIEW","ANALYZE TABLE","ATTACH DATABASE","ATTACH LEAF","ATTACH LEAF ALL","BACKUP DATABASE","BINLOG","BOOTSTRAP AGGREGATOR","CACHE INDEX","CALL","CHANGE","CHANGE MASTER TO","CHANGE REPLICATION FILTER","CHANGE REPLICATION SOURCE TO","CHECK BLOB CHECKSUM","CHECK TABLE","CHECKSUM TABLE","CLEAR ORPHAN DATABASES","CLONE","COMMIT","CREATE DATABASE","CREATE GROUP","CREATE INDEX","CREATE LINK","CREATE MILESTONE","CREATE PIPELINE","CREATE RESOURCE POOL","CREATE ROLE","CREATE USER","DEALLOCATE PREPARE","DESCRIBE","DETACH DATABASE","DETACH PIPELINE","DROP DATABASE","DROP FUNCTION","DROP INDEX","DROP LINK","DROP PIPELINE","DROP PROCEDURE","DROP RESOURCE POOL","DROP ROLE","DROP USER","DROP VIEW","EXECUTE","EXPLAIN","FLUSH","FORCE","GRANT","HANDLER","HELP","KILL CONNECTION","KILLALL QUERIES","LOAD DATA","LOAD INDEX INTO CACHE","LOAD XML","LOCK INSTANCE FOR BACKUP","LOCK TABLES","MASTER_POS_WAIT","OPTIMIZE TABLE","PREPARE","PURGE BINARY LOGS","REBALANCE PARTITIONS","RELEASE SAVEPOINT","REMOVE AGGREGATOR","REMOVE LEAF","REPAIR TABLE","REPLACE","REPLICATE DATABASE","RESET","RESET MASTER","RESET PERSIST","RESET REPLICA","RESET SLAVE","RESTART","RESTORE DATABASE","RESTORE REDUNDANCY","REVOKE","ROLLBACK","ROLLBACK TO SAVEPOINT","SAVEPOINT","SET CHARACTER SET","SET DEFAULT ROLE","SET NAMES","SET PASSWORD","SET RESOURCE GROUP","SET ROLE","SET TRANSACTION","SHOW","SHOW CHARACTER SET","SHOW COLLATION","SHOW COLUMNS","SHOW CREATE DATABASE","SHOW CREATE FUNCTION","SHOW CREATE PIPELINE","SHOW CREATE PROCEDURE","SHOW CREATE TABLE","SHOW CREATE USER","SHOW CREATE VIEW","SHOW DATABASES","SHOW ENGINE","SHOW ENGINES","SHOW ERRORS","SHOW FUNCTION CODE","SHOW FUNCTION STATUS","SHOW GRANTS","SHOW INDEX","SHOW MASTER STATUS","SHOW OPEN TABLES","SHOW PLUGINS","SHOW PRIVILEGES","SHOW PROCEDURE CODE","SHOW PROCEDURE STATUS","SHOW PROCESSLIST","SHOW PROFILE","SHOW PROFILES","SHOW RELAYLOG EVENTS","SHOW REPLICA STATUS","SHOW REPLICAS","SHOW SLAVE","SHOW SLAVE HOSTS","SHOW STATUS","SHOW TABLE STATUS","SHOW TABLES","SHOW VARIABLES","SHOW WARNINGS","SHUTDOWN","SNAPSHOT DATABASE","SOURCE_POS_WAIT","START GROUP_REPLICATION","START PIPELINE","START REPLICA","START SLAVE","START TRANSACTION","STOP GROUP_REPLICATION","STOP PIPELINE","STOP REPLICA","STOP REPLICATING","STOP SLAVE","TEST PIPELINE","UNLOCK INSTANCE","UNLOCK TABLES","USE","XA","ITERATE","LEAVE","LOOP","REPEAT","RETURN","WHILE"]),vPe=v(["UNION [ALL | DISTINCT]","EXCEPT","INTERSECT","MINUS"]),MPe=v(["JOIN","{LEFT | RIGHT | FULL} [OUTER] JOIN","{INNER | CROSS} JOIN","NATURAL {LEFT | RIGHT} [OUTER] JOIN","STRAIGHT_JOIN"]),UPe=v(["ON DELETE","ON UPDATE","CHARACTER SET","{ROWS | RANGE} BETWEEN","IDENTIFIED BY"]),BPe=v([]),DA={name:"singlestoredb",tokenizerOptions:{reservedSelect:PPe,reservedClauses:[...xPe,...d8,...u0],reservedSetOperations:vPe,reservedJoins:MPe,reservedKeywordPhrases:UPe,reservedDataTypePhrases:BPe,reservedKeywords:o8,reservedDataTypes:a8,reservedFunctionNames:c8,stringTypes:['""-qq-bs',"''-qq-bs",{quote:"''-raw",prefixes:["B","X"],requirePrefix:!0}],identTypes:["``"],identChars:{first:"$",rest:"$",allowFirstCharNumber:!0},variableTypes:[{regex:"@@?[A-Za-z0-9_$]+"},{quote:"``",prefixes:["@"],requirePrefix:!0}],lineCommentTypes:["--","#"],operators:[":=","&","|","^","~","<<",">>","<=>","&&","||","::","::$","::%",":>","!:>","*.*"],postProcess:Oo},formatOptions:{alwaysDenseOperators:["::","::$","::%"],onelineClauses:[...d8,...u0],tabularOnelineClauses:u0}}});var f8,E8=G(()=>{f8=["ABS","ACOS","ACOSH","ADD_MONTHS","ALL_USER_NAMES","ANY_VALUE","APPROX_COUNT_DISTINCT","APPROX_PERCENTILE","APPROX_PERCENTILE_ACCUMULATE","APPROX_PERCENTILE_COMBINE","APPROX_PERCENTILE_ESTIMATE","APPROX_TOP_K","APPROX_TOP_K_ACCUMULATE","APPROX_TOP_K_COMBINE","APPROX_TOP_K_ESTIMATE","APPROXIMATE_JACCARD_INDEX","APPROXIMATE_SIMILARITY","ARRAY_AGG","ARRAY_APPEND","ARRAY_CAT","ARRAY_COMPACT","ARRAY_CONSTRUCT","ARRAY_CONSTRUCT_COMPACT","ARRAY_CONTAINS","ARRAY_INSERT","ARRAY_INTERSECTION","ARRAY_POSITION","ARRAY_PREPEND","ARRAY_SIZE","ARRAY_SLICE","ARRAY_TO_STRING","ARRAY_UNION_AGG","ARRAY_UNIQUE_AGG","ARRAYS_OVERLAP","AS_ARRAY","AS_BINARY","AS_BOOLEAN","AS_CHAR","AS_VARCHAR","AS_DATE","AS_DECIMAL","AS_NUMBER","AS_DOUBLE","AS_REAL","AS_INTEGER","AS_OBJECT","AS_TIME","AS_TIMESTAMP_LTZ","AS_TIMESTAMP_NTZ","AS_TIMESTAMP_TZ","ASCII","ASIN","ASINH","ATAN","ATAN2","ATANH","AUTO_REFRESH_REGISTRATION_HISTORY","AUTOMATIC_CLUSTERING_HISTORY","AVG","BASE64_DECODE_BINARY","BASE64_DECODE_STRING","BASE64_ENCODE","BIT_LENGTH","BITAND","BITAND_AGG","BITMAP_BIT_POSITION","BITMAP_BUCKET_NUMBER","BITMAP_CONSTRUCT_AGG","BITMAP_COUNT","BITMAP_OR_AGG","BITNOT","BITOR","BITOR_AGG","BITSHIFTLEFT","BITSHIFTRIGHT","BITXOR","BITXOR_AGG","BOOLAND","BOOLAND_AGG","BOOLNOT","BOOLOR","BOOLOR_AGG","BOOLXOR","BOOLXOR_AGG","BUILD_SCOPED_FILE_URL","BUILD_STAGE_FILE_URL","CASE","CAST","CBRT","CEIL","CHARINDEX","CHECK_JSON","CHECK_XML","CHR","CHAR","COALESCE","COLLATE","COLLATION","COMPLETE_TASK_GRAPHS","COMPRESS","CONCAT","CONCAT_WS","CONDITIONAL_CHANGE_EVENT","CONDITIONAL_TRUE_EVENT","CONTAINS","CONVERT_TIMEZONE","COPY_HISTORY","CORR","COS","COSH","COT","COUNT","COUNT_IF","COVAR_POP","COVAR_SAMP","CUME_DIST","CURRENT_ACCOUNT","CURRENT_AVAILABLE_ROLES","CURRENT_CLIENT","CURRENT_DATABASE","CURRENT_DATE","CURRENT_IP_ADDRESS","CURRENT_REGION","CURRENT_ROLE","CURRENT_SCHEMA","CURRENT_SCHEMAS","CURRENT_SECONDARY_ROLES","CURRENT_SESSION","CURRENT_STATEMENT","CURRENT_TASK_GRAPHS","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_TRANSACTION","CURRENT_USER","CURRENT_VERSION","CURRENT_WAREHOUSE","DATA_TRANSFER_HISTORY","DATABASE_REFRESH_HISTORY","DATABASE_REFRESH_PROGRESS","DATABASE_REFRESH_PROGRESS_BY_JOB","DATABASE_STORAGE_USAGE_HISTORY","DATE_FROM_PARTS","DATE_PART","DATE_TRUNC","DATEADD","DATEDIFF","DAYNAME","DECODE","DECOMPRESS_BINARY","DECOMPRESS_STRING","DECRYPT","DECRYPT_RAW","DEGREES","DENSE_RANK","DIV0","EDITDISTANCE","ENCRYPT","ENCRYPT_RAW","ENDSWITH","EQUAL_NULL","EXP","EXPLAIN_JSON","EXTERNAL_FUNCTIONS_HISTORY","EXTERNAL_TABLE_FILES","EXTERNAL_TABLE_FILE_REGISTRATION_HISTORY","EXTRACT","EXTRACT_SEMANTIC_CATEGORIES","FACTORIAL","FILTER","FIRST_VALUE","FLATTEN","FLOOR","GENERATE_COLUMN_DESCRIPTION","GENERATOR","GET","GET_ABSOLUTE_PATH","GET_DDL","GET_IGNORE_CASE","GET_OBJECT_REFERENCES","GET_PATH","GET_PRESIGNED_URL","GET_RELATIVE_PATH","GET_STAGE_LOCATION","GETBIT","GREATEST","GREATEST_IGNORE_NULLS","GROUPING","GROUPING_ID","HASH","HASH_AGG","HAVERSINE","HEX_DECODE_BINARY","HEX_DECODE_STRING","HEX_ENCODE","HLL","HLL_ACCUMULATE","HLL_COMBINE","HLL_ESTIMATE","HLL_EXPORT","HLL_IMPORT","HOUR","MINUTE","SECOND","IDENTIFIER","IFF","IFNULL","ILIKE","ILIKE ANY","INFER_SCHEMA","INITCAP","INSERT","INVOKER_ROLE","INVOKER_SHARE","IS_ARRAY","IS_BINARY","IS_BOOLEAN","IS_CHAR","IS_VARCHAR","IS_DATE","IS_DATE_VALUE","IS_DECIMAL","IS_DOUBLE","IS_REAL","IS_GRANTED_TO_INVOKER_ROLE","IS_INTEGER","IS_NULL_VALUE","IS_OBJECT","IS_ROLE_IN_SESSION","IS_TIME","IS_TIMESTAMP_LTZ","IS_TIMESTAMP_NTZ","IS_TIMESTAMP_TZ","JAROWINKLER_SIMILARITY","JSON_EXTRACT_PATH_TEXT","KURTOSIS","LAG","LAST_DAY","LAST_QUERY_ID","LAST_TRANSACTION","LAST_VALUE","LEAD","LEAST","LEFT","LENGTH","LEN","LIKE","LIKE ALL","LIKE ANY","LISTAGG","LN","LOCALTIME","LOCALTIMESTAMP","LOG","LOGIN_HISTORY","LOGIN_HISTORY_BY_USER","LOWER","LPAD","LTRIM","MATERIALIZED_VIEW_REFRESH_HISTORY","MD5","MD5_HEX","MD5_BINARY","MD5_NUMBER \u2014 Obsoleted","MD5_NUMBER_LOWER64","MD5_NUMBER_UPPER64","MEDIAN","MIN","MAX","MINHASH","MINHASH_COMBINE","MOD","MODE","MONTHNAME","MONTHS_BETWEEN","NEXT_DAY","NORMAL","NTH_VALUE","NTILE","NULLIF","NULLIFZERO","NVL","NVL2","OBJECT_AGG","OBJECT_CONSTRUCT","OBJECT_CONSTRUCT_KEEP_NULL","OBJECT_DELETE","OBJECT_INSERT","OBJECT_KEYS","OBJECT_PICK","OCTET_LENGTH","PARSE_IP","PARSE_JSON","PARSE_URL","PARSE_XML","PERCENT_RANK","PERCENTILE_CONT","PERCENTILE_DISC","PI","PIPE_USAGE_HISTORY","POLICY_CONTEXT","POLICY_REFERENCES","POSITION","POW","POWER","PREVIOUS_DAY","QUERY_ACCELERATION_HISTORY","QUERY_HISTORY","QUERY_HISTORY_BY_SESSION","QUERY_HISTORY_BY_USER","QUERY_HISTORY_BY_WAREHOUSE","RADIANS","RANDOM","RANDSTR","RANK","RATIO_TO_REPORT","REGEXP","REGEXP_COUNT","REGEXP_INSTR","REGEXP_LIKE","REGEXP_REPLACE","REGEXP_SUBSTR","REGEXP_SUBSTR_ALL","REGR_AVGX","REGR_AVGY","REGR_COUNT","REGR_INTERCEPT","REGR_R2","REGR_SLOPE","REGR_SXX","REGR_SXY","REGR_SYY","REGR_VALX","REGR_VALY","REPEAT","REPLACE","REPLICATION_GROUP_REFRESH_HISTORY","REPLICATION_GROUP_REFRESH_PROGRESS","REPLICATION_GROUP_REFRESH_PROGRESS_BY_JOB","REPLICATION_GROUP_USAGE_HISTORY","REPLICATION_USAGE_HISTORY","REST_EVENT_HISTORY","RESULT_SCAN","REVERSE","RIGHT","RLIKE","ROUND","ROW_NUMBER","RPAD","RTRIM","RTRIMMED_LENGTH","SEARCH_OPTIMIZATION_HISTORY","SEQ1","SEQ2","SEQ4","SEQ8","SERVERLESS_TASK_HISTORY","SHA1","SHA1_HEX","SHA1_BINARY","SHA2","SHA2_HEX","SHA2_BINARY","SIGN","SIN","SINH","SKEW","SOUNDEX","SPACE","SPLIT","SPLIT_PART","SPLIT_TO_TABLE","SQRT","SQUARE","ST_AREA","ST_ASEWKB","ST_ASEWKT","ST_ASGEOJSON","ST_ASWKB","ST_ASBINARY","ST_ASWKT","ST_ASTEXT","ST_AZIMUTH","ST_CENTROID","ST_COLLECT","ST_CONTAINS","ST_COVEREDBY","ST_COVERS","ST_DIFFERENCE","ST_DIMENSION","ST_DISJOINT","ST_DISTANCE","ST_DWITHIN","ST_ENDPOINT","ST_ENVELOPE","ST_GEOGFROMGEOHASH","ST_GEOGPOINTFROMGEOHASH","ST_GEOGRAPHYFROMWKB","ST_GEOGRAPHYFROMWKT","ST_GEOHASH","ST_GEOMETRYFROMWKB","ST_GEOMETRYFROMWKT","ST_HAUSDORFFDISTANCE","ST_INTERSECTION","ST_INTERSECTS","ST_LENGTH","ST_MAKEGEOMPOINT","ST_GEOM_POINT","ST_MAKELINE","ST_MAKEPOINT","ST_POINT","ST_MAKEPOLYGON","ST_POLYGON","ST_NPOINTS","ST_NUMPOINTS","ST_PERIMETER","ST_POINTN","ST_SETSRID","ST_SIMPLIFY","ST_SRID","ST_STARTPOINT","ST_SYMDIFFERENCE","ST_UNION","ST_WITHIN","ST_X","ST_XMAX","ST_XMIN","ST_Y","ST_YMAX","ST_YMIN","STAGE_DIRECTORY_FILE_REGISTRATION_HISTORY","STAGE_STORAGE_USAGE_HISTORY","STARTSWITH","STDDEV","STDDEV_POP","STDDEV_SAMP","STRIP_NULL_VALUE","STRTOK","STRTOK_SPLIT_TO_TABLE","STRTOK_TO_ARRAY","SUBSTR","SUBSTRING","SUM","SYSDATE","SYSTEM$ABORT_SESSION","SYSTEM$ABORT_TRANSACTION","SYSTEM$AUTHORIZE_PRIVATELINK","SYSTEM$AUTHORIZE_STAGE_PRIVATELINK_ACCESS","SYSTEM$BEHAVIOR_CHANGE_BUNDLE_STATUS","SYSTEM$CANCEL_ALL_QUERIES","SYSTEM$CANCEL_QUERY","SYSTEM$CLUSTERING_DEPTH","SYSTEM$CLUSTERING_INFORMATION","SYSTEM$CLUSTERING_RATIO ","SYSTEM$CURRENT_USER_TASK_NAME","SYSTEM$DATABASE_REFRESH_HISTORY ","SYSTEM$DATABASE_REFRESH_PROGRESS","SYSTEM$DATABASE_REFRESH_PROGRESS_BY_JOB ","SYSTEM$DISABLE_BEHAVIOR_CHANGE_BUNDLE","SYSTEM$DISABLE_DATABASE_REPLICATION","SYSTEM$ENABLE_BEHAVIOR_CHANGE_BUNDLE","SYSTEM$ESTIMATE_QUERY_ACCELERATION","SYSTEM$ESTIMATE_SEARCH_OPTIMIZATION_COSTS","SYSTEM$EXPLAIN_JSON_TO_TEXT","SYSTEM$EXPLAIN_PLAN_JSON","SYSTEM$EXTERNAL_TABLE_PIPE_STATUS","SYSTEM$GENERATE_SAML_CSR","SYSTEM$GENERATE_SCIM_ACCESS_TOKEN","SYSTEM$GET_AWS_SNS_IAM_POLICY","SYSTEM$GET_PREDECESSOR_RETURN_VALUE","SYSTEM$GET_PRIVATELINK","SYSTEM$GET_PRIVATELINK_AUTHORIZED_ENDPOINTS","SYSTEM$GET_PRIVATELINK_CONFIG","SYSTEM$GET_SNOWFLAKE_PLATFORM_INFO","SYSTEM$GET_TAG","SYSTEM$GET_TAG_ALLOWED_VALUES","SYSTEM$GET_TAG_ON_CURRENT_COLUMN","SYSTEM$GET_TAG_ON_CURRENT_TABLE","SYSTEM$GLOBAL_ACCOUNT_SET_PARAMETER","SYSTEM$LAST_CHANGE_COMMIT_TIME","SYSTEM$LINK_ACCOUNT_OBJECTS_BY_NAME","SYSTEM$MIGRATE_SAML_IDP_REGISTRATION","SYSTEM$PIPE_FORCE_RESUME","SYSTEM$PIPE_STATUS","SYSTEM$REVOKE_PRIVATELINK","SYSTEM$REVOKE_STAGE_PRIVATELINK_ACCESS","SYSTEM$SET_RETURN_VALUE","SYSTEM$SHOW_OAUTH_CLIENT_SECRETS","SYSTEM$STREAM_GET_TABLE_TIMESTAMP","SYSTEM$STREAM_HAS_DATA","SYSTEM$TASK_DEPENDENTS_ENABLE","SYSTEM$TYPEOF","SYSTEM$USER_TASK_CANCEL_ONGOING_EXECUTIONS","SYSTEM$VERIFY_EXTERNAL_OAUTH_TOKEN","SYSTEM$WAIT","SYSTEM$WHITELIST","SYSTEM$WHITELIST_PRIVATELINK","TAG_REFERENCES","TAG_REFERENCES_ALL_COLUMNS","TAG_REFERENCES_WITH_LINEAGE","TAN","TANH","TASK_DEPENDENTS","TASK_HISTORY","TIME_FROM_PARTS","TIME_SLICE","TIMEADD","TIMEDIFF","TIMESTAMP_FROM_PARTS","TIMESTAMPADD","TIMESTAMPDIFF","TO_ARRAY","TO_BINARY","TO_BOOLEAN","TO_CHAR","TO_VARCHAR","TO_DATE","DATE","TO_DECIMAL","TO_NUMBER","TO_NUMERIC","TO_DOUBLE","TO_GEOGRAPHY","TO_GEOMETRY","TO_JSON","TO_OBJECT","TO_TIME","TIME","TO_TIMESTAMP","TO_TIMESTAMP_LTZ","TO_TIMESTAMP_NTZ","TO_TIMESTAMP_TZ","TO_VARIANT","TO_XML","TRANSLATE","TRIM","TRUNCATE","TRUNC","TRUNC","TRY_BASE64_DECODE_BINARY","TRY_BASE64_DECODE_STRING","TRY_CAST","TRY_HEX_DECODE_BINARY","TRY_HEX_DECODE_STRING","TRY_PARSE_JSON","TRY_TO_BINARY","TRY_TO_BOOLEAN","TRY_TO_DATE","TRY_TO_DECIMAL","TRY_TO_NUMBER","TRY_TO_NUMERIC","TRY_TO_DOUBLE","TRY_TO_GEOGRAPHY","TRY_TO_GEOMETRY","TRY_TO_TIME","TRY_TO_TIMESTAMP","TRY_TO_TIMESTAMP_LTZ","TRY_TO_TIMESTAMP_NTZ","TRY_TO_TIMESTAMP_TZ","TYPEOF","UNICODE","UNIFORM","UPPER","UUID_STRING","VALIDATE","VALIDATE_PIPE_LOAD","VAR_POP","VAR_SAMP","VARIANCE","VARIANCE_SAMP","VARIANCE_POP","WAREHOUSE_LOAD_HISTORY","WAREHOUSE_METERING_HISTORY","WIDTH_BUCKET","XMLGET","YEAR","YEAROFWEEK","YEAROFWEEKISO","DAY","DAYOFMONTH","DAYOFWEEK","DAYOFWEEKISO","DAYOFYEAR","WEEK","WEEK","WEEKOFYEAR","WEEKISO","MONTH","QUARTER","ZEROIFNULL","ZIPF"]});var h8,p8,T8=G(()=>{h8=["ACCOUNT","ALL","ALTER","AND","ANY","AS","BETWEEN","BY","CASE","CAST","CHECK","COLUMN","CONNECT","CONNECTION","CONSTRAINT","CREATE","CROSS","CURRENT","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","DATABASE","DELETE","DISTINCT","DROP","ELSE","EXISTS","FALSE","FOLLOWING","FOR","FROM","FULL","GRANT","GROUP","GSCLUSTER","HAVING","ILIKE","IN","INCREMENT","INNER","INSERT","INTERSECT","INTO","IS","ISSUE","JOIN","LATERAL","LEFT","LIKE","LOCALTIME","LOCALTIMESTAMP","MINUS","NATURAL","NOT","NULL","OF","ON","OR","ORDER","ORGANIZATION","QUALIFY","REGEXP","REVOKE","RIGHT","RLIKE","ROW","ROWS","SAMPLE","SCHEMA","SELECT","SET","SOME","START","TABLE","TABLESAMPLE","THEN","TO","TRIGGER","TRUE","TRY_CAST","UNION","UNIQUE","UPDATE","USING","VALUES","VIEW","WHEN","WHENEVER","WHERE","WITH","COMMENT"],p8=["NUMBER","DECIMAL","NUMERIC","INT","INTEGER","BIGINT","SMALLINT","TINYINT","BYTEINT","FLOAT","FLOAT4","FLOAT8","DOUBLE","DOUBLE PRECISION","REAL","VARCHAR","CHAR","CHARACTER","STRING","TEXT","BINARY","VARBINARY","BOOLEAN","DATE","DATETIME","TIME","TIMESTAMP","TIMESTAMP_LTZ","TIMESTAMP_NTZ","TIMESTAMP","TIMESTAMP_TZ","VARIANT","OBJECT","ARRAY","GEOGRAPHY","GEOMETRY"]});var FPe,HPe,S8,f0,GPe,$Pe,kPe,WPe,PA,E0=G(()=>{qt();E8();T8();FPe=v(["SELECT [ALL | DISTINCT]"]),HPe=v(["WITH [RECURSIVE]","FROM","WHERE","GROUP BY","HAVING","PARTITION BY","ORDER BY","QUALIFY","LIMIT","OFFSET","FETCH [FIRST | NEXT]","INSERT [OVERWRITE] [ALL INTO | INTO | ALL | FIRST]","{THEN | ELSE} INTO","VALUES","SET","CLUSTER BY","[WITH] {MASKING POLICY | TAG | ROW ACCESS POLICY}","COPY GRANTS","USING TEMPLATE","MERGE INTO","WHEN MATCHED [AND]","THEN {UPDATE SET | DELETE}","WHEN NOT MATCHED THEN INSERT"]),S8=v(["CREATE [OR REPLACE] [VOLATILE] TABLE [IF NOT EXISTS]","CREATE [OR REPLACE] [LOCAL | GLOBAL] {TEMP|TEMPORARY} TABLE [IF NOT EXISTS]"]),f0=v(["CREATE [OR REPLACE] [SECURE] [RECURSIVE] VIEW [IF NOT EXISTS]","UPDATE","DELETE FROM","DROP TABLE [IF EXISTS]","ALTER TABLE [IF EXISTS]","RENAME TO","SWAP WITH","[SUSPEND | RESUME] RECLUSTER","DROP CLUSTERING KEY","ADD [COLUMN]","RENAME COLUMN","{ALTER | MODIFY} [COLUMN]","DROP [COLUMN]","{ADD | ALTER | MODIFY | DROP} [CONSTRAINT]","RENAME CONSTRAINT","{ADD | DROP} SEARCH OPTIMIZATION","{SET | UNSET} TAG","{ADD | DROP} ROW ACCESS POLICY","DROP ALL ROW ACCESS POLICIES","{SET | DROP} DEFAULT","{SET | DROP} NOT NULL","SET DATA TYPE","UNSET COMMENT","{SET | UNSET} MASKING POLICY","TRUNCATE [TABLE] [IF EXISTS]","ALTER ACCOUNT","ALTER API INTEGRATION","ALTER CONNECTION","ALTER DATABASE","ALTER EXTERNAL TABLE","ALTER FAILOVER GROUP","ALTER FILE FORMAT","ALTER FUNCTION","ALTER INTEGRATION","ALTER MASKING POLICY","ALTER MATERIALIZED VIEW","ALTER NETWORK POLICY","ALTER NOTIFICATION INTEGRATION","ALTER PIPE","ALTER PROCEDURE","ALTER REPLICATION GROUP","ALTER RESOURCE MONITOR","ALTER ROLE","ALTER ROW ACCESS POLICY","ALTER SCHEMA","ALTER SECURITY INTEGRATION","ALTER SEQUENCE","ALTER SESSION","ALTER SESSION POLICY","ALTER SHARE","ALTER STAGE","ALTER STORAGE INTEGRATION","ALTER STREAM","ALTER TAG","ALTER TASK","ALTER USER","ALTER VIEW","ALTER WAREHOUSE","BEGIN","CALL","COMMIT","COPY INTO","CREATE ACCOUNT","CREATE API INTEGRATION","CREATE CONNECTION","CREATE DATABASE","CREATE EXTERNAL FUNCTION","CREATE EXTERNAL TABLE","CREATE FAILOVER GROUP","CREATE FILE FORMAT","CREATE FUNCTION","CREATE INTEGRATION","CREATE MANAGED ACCOUNT","CREATE MASKING POLICY","CREATE MATERIALIZED VIEW","CREATE NETWORK POLICY","CREATE NOTIFICATION INTEGRATION","CREATE PIPE","CREATE PROCEDURE","CREATE REPLICATION GROUP","CREATE RESOURCE MONITOR","CREATE ROLE","CREATE ROW ACCESS POLICY","CREATE SCHEMA","CREATE SECURITY INTEGRATION","CREATE SEQUENCE","CREATE SESSION POLICY","CREATE SHARE","CREATE STAGE","CREATE STORAGE INTEGRATION","CREATE STREAM","CREATE TAG","CREATE TASK","CREATE USER","CREATE WAREHOUSE","DELETE","DESCRIBE DATABASE","DESCRIBE EXTERNAL TABLE","DESCRIBE FILE FORMAT","DESCRIBE FUNCTION","DESCRIBE INTEGRATION","DESCRIBE MASKING POLICY","DESCRIBE MATERIALIZED VIEW","DESCRIBE NETWORK POLICY","DESCRIBE PIPE","DESCRIBE PROCEDURE","DESCRIBE RESULT","DESCRIBE ROW ACCESS POLICY","DESCRIBE SCHEMA","DESCRIBE SEQUENCE","DESCRIBE SESSION POLICY","DESCRIBE SHARE","DESCRIBE STAGE","DESCRIBE STREAM","DESCRIBE TABLE","DESCRIBE TASK","DESCRIBE TRANSACTION","DESCRIBE USER","DESCRIBE VIEW","DESCRIBE WAREHOUSE","DROP CONNECTION","DROP DATABASE","DROP EXTERNAL TABLE","DROP FAILOVER GROUP","DROP FILE FORMAT","DROP FUNCTION","DROP INTEGRATION","DROP MANAGED ACCOUNT","DROP MASKING POLICY","DROP MATERIALIZED VIEW","DROP NETWORK POLICY","DROP PIPE","DROP PROCEDURE","DROP REPLICATION GROUP","DROP RESOURCE MONITOR","DROP ROLE","DROP ROW ACCESS POLICY","DROP SCHEMA","DROP SEQUENCE","DROP SESSION POLICY","DROP SHARE","DROP STAGE","DROP STREAM","DROP TAG","DROP TASK","DROP USER","DROP VIEW","DROP WAREHOUSE","EXECUTE IMMEDIATE","EXECUTE TASK","EXPLAIN","GET","GRANT OWNERSHIP","GRANT ROLE","INSERT","LIST","MERGE","PUT","REMOVE","REVOKE ROLE","ROLLBACK","SHOW COLUMNS","SHOW CONNECTIONS","SHOW DATABASES","SHOW DATABASES IN FAILOVER GROUP","SHOW DATABASES IN REPLICATION GROUP","SHOW DELEGATED AUTHORIZATIONS","SHOW EXTERNAL FUNCTIONS","SHOW EXTERNAL TABLES","SHOW FAILOVER GROUPS","SHOW FILE FORMATS","SHOW FUNCTIONS","SHOW GLOBAL ACCOUNTS","SHOW GRANTS","SHOW INTEGRATIONS","SHOW LOCKS","SHOW MANAGED ACCOUNTS","SHOW MASKING POLICIES","SHOW MATERIALIZED VIEWS","SHOW NETWORK POLICIES","SHOW OBJECTS","SHOW ORGANIZATION ACCOUNTS","SHOW PARAMETERS","SHOW PIPES","SHOW PRIMARY KEYS","SHOW PROCEDURES","SHOW REGIONS","SHOW REPLICATION ACCOUNTS","SHOW REPLICATION DATABASES","SHOW REPLICATION GROUPS","SHOW RESOURCE MONITORS","SHOW ROLES","SHOW ROW ACCESS POLICIES","SHOW SCHEMAS","SHOW SEQUENCES","SHOW SESSION POLICIES","SHOW SHARES","SHOW SHARES IN FAILOVER GROUP","SHOW SHARES IN REPLICATION GROUP","SHOW STAGES","SHOW STREAMS","SHOW TABLES","SHOW TAGS","SHOW TASKS","SHOW TRANSACTIONS","SHOW USER FUNCTIONS","SHOW USERS","SHOW VARIABLES","SHOW VIEWS","SHOW WAREHOUSES","TRUNCATE MATERIALIZED VIEW","UNDROP DATABASE","UNDROP SCHEMA","UNDROP TABLE","UNDROP TAG","UNSET","USE DATABASE","USE ROLE","USE SCHEMA","USE SECONDARY ROLES","USE WAREHOUSE"]),GPe=v(["UNION [ALL]","MINUS","EXCEPT","INTERSECT"]),$Pe=v(["[INNER] JOIN","[NATURAL] {LEFT | RIGHT | FULL} [OUTER] JOIN","{CROSS | NATURAL} JOIN"]),kPe=v(["{ROWS | RANGE} BETWEEN","ON {UPDATE | DELETE} [SET NULL | SET DEFAULT]"]),WPe=v([]),PA={name:"snowflake",tokenizerOptions:{reservedSelect:FPe,reservedClauses:[...HPe,...S8,...f0],reservedSetOperations:GPe,reservedJoins:$Pe,reservedKeywordPhrases:kPe,reservedDataTypePhrases:WPe,reservedKeywords:h8,reservedDataTypes:p8,reservedFunctionNames:f8,stringTypes:["$$","''-qq-bs"],identTypes:['""-qq'],variableTypes:[{regex:"[$][1-9]\\d*"},{regex:"[$][_a-zA-Z][_a-zA-Z0-9$]*"}],extraParens:["[]"],identChars:{rest:"$"},lineCommentTypes:["--","//"],operators:["%","::","||","=>",":=","->"],propertyAccessOperators:[":"]},formatOptions:{alwaysDenseOperators:["::"],onelineClauses:[...S8,...f0],tabularOnelineClauses:f0}}});var h0={};Pt(h0,{bigquery:()=>hA,db2:()=>pA,db2i:()=>TA,duckdb:()=>SA,hive:()=>RA,mariadb:()=>AA,mysql:()=>mA,n1ql:()=>IA,plsql:()=>_A,postgresql:()=>NA,redshift:()=>OA,singlestoredb:()=>DA,snowflake:()=>PA,spark:()=>CA,sql:()=>yA,sqlite:()=>bA,tidb:()=>gA,transactsql:()=>LA,trino:()=>wA});var R8=G(()=>{Pw();vw();Uw();Fw();Gw();kw();Yw();qw();Xw();jw();Jw();Zw();t0();r0();s0();a0();c0();d0();E0()});var Co,p0,Qc,xA,Zc=G(()=>{Co=t=>t[t.length-1],p0=t=>t.sort((e,n)=>n.length-e.length||e.localeCompare(n)),Qc=t=>t.replace(/\s+/gu," "),xA=t=>/\n/.test(t)});var _r,T0,Us,YPe,A8,m8,vA=G(()=>{_r=t=>t.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&"),T0=/\s+/uy,Us=t=>new RegExp(`(?:${t})`,"uy"),YPe=t=>t.split("").map(e=>/ /gu.test(e)?"\\s+":`[${e.toUpperCase()}${e.toLowerCase()}]`).join(""),A8=t=>t+"(?:-"+t+")*",m8=({prefixes:t,requirePrefix:e})=>`(?:${t.map(YPe).join("|")}${e?"":"|"})`});var I8,S0,R0,VPe,ji,MA,qPe,g8,_8,N8,A0,m0,O8,g0,C8=G(()=>{Zc();vA();I8=t=>new RegExp(`(?:${t.map(_r).join("|")}).*?(?=\r
|\r|
|$)`,"uy"),S0=(t,e=[])=>{let n=t==="open"?0:1,r=["()",...e].map(i=>i[n]);return Us(r.map(_r).join("|"))},R0=t=>Us(`${p0(t).map(_r).join("|")}`),VPe=({rest:t,dashes:e})=>t||e?`(?![${t||""}${e?"-":""}])`:"",ji=(t,e={})=>{if(t.length===0)return/^\b$/u;let n=VPe(e),r=p0(t).map(_r).join("|").replace(/ /gu,"\\s+");return new RegExp(`(?:${r})${n}\\b`,"iuy")},MA=(t,e)=>{if(!t.length)return;let n=t.map(_r).join("|");return Us(`(?:${n})(?:${e})`)},qPe=()=>{let t={"<":">","[":"]","(":")","{":"}"},e="{left}(?:(?!{right}').)*?{right}",n=Object.entries(t).map(([o,a])=>e.replace(/{left}/g,_r(o)).replace(/{right}/g,_r(a))),r=_r(Object.keys(t).join(""));return`[Qq]'(?:${String.raw`(?<tag>[^\s${r}])(?:(?!\k<tag>').)*?\k<tag>`}|${n.join("|")})'`},g8={"``":"(?:`[^`]*`)+","[]":String.raw`(?:\[[^\]]*\])(?:\][^\]]*\])*`,'""-qq':String.raw`(?:"[^"]*")+`,'""-bs':String.raw`(?:"[^"\\]*(?:\\.[^"\\]*)*")`,'""-qq-bs':String.raw`(?:"[^"\\]*(?:\\.[^"\\]*)*")+`,'""-raw':String.raw`(?:"[^"]*")`,"''-qq":String.raw`(?:'[^']*')+`,"''-bs":String.raw`(?:'[^'\\]*(?:\\.[^'\\]*)*')`,"''-qq-bs":String.raw`(?:'[^'\\]*(?:\\.[^'\\]*)*')+`,"''-raw":String.raw`(?:'[^']*')`,$$:String.raw`(?<tag>\$\w*\$)[\s\S]*?\k<tag>`,"'''..'''":String.raw`'''[^\\]*?(?:\\.[^\\]*?)*?'''`,'""".."""':String.raw`"""[^\\]*?(?:\\.[^\\]*?)*?"""`,"{}":String.raw`(?:\{[^\}]*\})`,"q''":qPe()},_8=t=>typeof t=="string"?g8[t]:"regex"in t?t.regex:m8(t)+g8[t.quote],N8=t=>Us(t.map(e=>"regex"in e?e.regex:_8(e)).join("|")),A0=t=>t.map(_8).join("|"),m0=t=>Us(A0(t)),O8=(t={})=>Us(g0(t)),g0=({first:t,rest:e,dashes:n,allowFirstCharNumber:r}={})=>{let i="\\p{Alphabetic}\\p{Mark}_",s="\\p{Decimal_Number}",o=_r(t??""),a=_r(e??""),l=r?`[${i}${s}${o}][${i}${s}${a}]*`:`[${i}${o}][${i}${s}${a}]*`;return n?A8(l):l}});function UA(t,e){let n=t.slice(0,e).split(/\n/);return{line:n.length,col:n[n.length-1].length+1}}var I0=G(()=>{});var Kf,b8=G(()=>{I0();vA();Kf=class{constructor(e,n){this.rules=e,this.dialectName=n,this.input="",this.index=0}tokenize(e){this.input=e,this.index=0;let n=[],r;for(;this.index<this.input.length;){let i=this.getWhitespace();if(this.index<this.input.length){if(r=this.getNextToken(),!r)throw this.createParseError();n.push(Object.assign(Object.assign({},r),{precedingWhitespace:i}))}}return n}createParseError(){let e=this.input.slice(this.index,this.index+10),{line:n,col:r}=UA(this.input,this.index);return new Error(`Parse error: Unexpected "${e}" at line ${n} column ${r}.
${this.dialectInfo()}`)}dialectInfo(){return this.dialectName==="sql"?`This likely happens because you're using the default "sql" dialect.
If possible, please select a more specific dialect (like sqlite, postgresql, etc).`:`SQL dialect used: "${this.dialectName}".`}getWhitespace(){T0.lastIndex=this.index;let e=T0.exec(this.input);if(e)return this.index+=e[0].length,e[0]}getNextToken(){for(let e of this.rules){let n=this.match(e);if(n)return n}}match(e){e.regex.lastIndex=this.index;let n=e.regex.exec(this.input);if(n){let r=n[0],i={type:e.type,raw:r,text:e.text?e.text(r):r,start:this.index};return e.key&&(i.key=e.key(r)),this.index+=r.length,i}}}});var y8,zPe,jPe,BA,w8=G(()=>{y8=/\/\*/uy,zPe=/[\s\S]/uy,jPe=/\*\//uy,BA=class{constructor(){this.lastIndex=0}exec(e){let n="",r,i=0;if(r=this.matchSection(y8,e))n+=r,i++;else return null;for(;i>0;)if(r=this.matchSection(y8,e))n+=r,i++;else if(r=this.matchSection(jPe,e))n+=r,i--;else if(r=this.matchSection(zPe,e))n+=r;else return null;return[n]}matchSection(e,n){e.lastIndex=this.lastIndex;let r=e.exec(n);return r&&(this.lastIndex+=r[0].length),r?r[0]:null}}});var Jf,un,L8=G(()=>{Yr();C8();b8();vA();Zc();w8();Jf=class{constructor(e,n){this.cfg=e,this.dialectName=n,this.rulesBeforeParams=this.buildRulesBeforeParams(e),this.rulesAfterParams=this.buildRulesAfterParams(e)}tokenize(e,n){let r=[...this.rulesBeforeParams,...this.buildParamRules(this.cfg,n),...this.rulesAfterParams],i=new Kf(r,this.dialectName).tokenize(e);return this.cfg.postProcess?this.cfg.postProcess(i):i}buildRulesBeforeParams(e){var n,r,i;return this.validRules([{type:Y.DISABLE_COMMENT,regex:/(\/\* *sql-formatter-disable *\*\/[\s\S]*?(?:\/\* *sql-formatter-enable *\*\/|$))/uy},{type:Y.BLOCK_COMMENT,regex:e.nestedBlockComments?new BA:/(\/\*[^]*?\*\/)/uy},{type:Y.LINE_COMMENT,regex:I8((n=e.lineCommentTypes)!==null&&n!==void 0?n:["--"])},{type:Y.QUOTED_IDENTIFIER,regex:m0(e.identTypes)},{type:Y.NUMBER,regex:e.underscoresInNumbers?/(?:0x[0-9a-fA-F_]+|0b[01_]+|(?:-\s*)?(?:[0-9_]*\.[0-9_]+|[0-9_]+(?:\.[0-9_]*)?)(?:[eE][-+]?[0-9_]+(?:\.[0-9_]+)?)?)(?![\w\p{Alphabetic}])/uy:/(?:0x[0-9a-fA-F]+|0b[01]+|(?:-\s*)?(?:[0-9]*\.[0-9]+|[0-9]+(?:\.[0-9]*)?)(?:[eE][-+]?[0-9]+(?:\.[0-9]+)?)?)(?![\w\p{Alphabetic}])/uy},{type:Y.RESERVED_KEYWORD_PHRASE,regex:ji((r=e.reservedKeywordPhrases)!==null&&r!==void 0?r:[],e.identChars),text:un},{type:Y.RESERVED_DATA_TYPE_PHRASE,regex:ji((i=e.reservedDataTypePhrases)!==null&&i!==void 0?i:[],e.identChars),text:un},{type:Y.CASE,regex:/CASE\b/iuy,text:un},{type:Y.END,regex:/END\b/iuy,text:un},{type:Y.BETWEEN,regex:/BETWEEN\b/iuy,text:un},{type:Y.LIMIT,regex:e.reservedClauses.includes("LIMIT")?/LIMIT\b/iuy:void 0,text:un},{type:Y.RESERVED_CLAUSE,regex:ji(e.reservedClauses,e.identChars),text:un},{type:Y.RESERVED_SELECT,regex:ji(e.reservedSelect,e.identChars),text:un},{type:Y.RESERVED_SET_OPERATION,regex:ji(e.reservedSetOperations,e.identChars),text:un},{type:Y.WHEN,regex:/WHEN\b/iuy,text:un},{type:Y.ELSE,regex:/ELSE\b/iuy,text:un},{type:Y.THEN,regex:/THEN\b/iuy,text:un},{type:Y.RESERVED_JOIN,regex:ji(e.reservedJoins,e.identChars),text:un},{type:Y.AND,regex:/AND\b/iuy,text:un},{type:Y.OR,regex:/OR\b/iuy,text:un},{type:Y.XOR,regex:e.supportsXor?/XOR\b/iuy:void 0,text:un},...e.operatorKeyword?[{type:Y.OPERATOR,regex:/OPERATOR *\([^)]+\)/iuy}]:[],{type:Y.RESERVED_FUNCTION_NAME,regex:ji(e.reservedFunctionNames,e.identChars),text:un},{type:Y.RESERVED_DATA_TYPE,regex:ji(e.reservedDataTypes,e.identChars),text:un},{type:Y.RESERVED_KEYWORD,regex:ji(e.reservedKeywords,e.identChars),text:un}])}buildRulesAfterParams(e){var n,r;return this.validRules([{type:Y.VARIABLE,regex:e.variableTypes?N8(e.variableTypes):void 0},{type:Y.STRING,regex:m0(e.stringTypes)},{type:Y.IDENTIFIER,regex:O8(e.identChars)},{type:Y.DELIMITER,regex:/[;]/uy},{type:Y.COMMA,regex:/[,]/y},{type:Y.OPEN_PAREN,regex:S0("open",e.extraParens)},{type:Y.CLOSE_PAREN,regex:S0("close",e.extraParens)},{type:Y.OPERATOR,regex:R0(["+","-","/",">","<","=","<>","<=",">=","!=",...(n=e.operators)!==null&&n!==void 0?n:[]])},{type:Y.ASTERISK,regex:/[*]/uy},{type:Y.PROPERTY_ACCESS_OPERATOR,regex:R0([".",...(r=e.propertyAccessOperators)!==null&&r!==void 0?r:[]])}])}buildParamRules(e,n){var r,i,s,o,a;let l={named:n?.named||((r=e.paramTypes)===null||r===void 0?void 0:r.named)||[],quoted:n?.quoted||((i=e.paramTypes)===null||i===void 0?void 0:i.quoted)||[],numbered:n?.numbered||((s=e.paramTypes)===null||s===void 0?void 0:s.numbered)||[],positional:typeof n?.positional=="boolean"?n.positional:(o=e.paramTypes)===null||o===void 0?void 0:o.positional,custom:n?.custom||((a=e.paramTypes)===null||a===void 0?void 0:a.custom)||[]};return this.validRules([{type:Y.NAMED_PARAMETER,regex:MA(l.named,g0(e.paramChars||e.identChars)),key:c=>c.slice(1)},{type:Y.QUOTED_PARAMETER,regex:MA(l.quoted,A0(e.identTypes)),key:c=>(({tokenKey:u,quoteChar:d})=>u.replace(new RegExp(_r("\\"+d),"gu"),d))({tokenKey:c.slice(2,-1),quoteChar:c.slice(-1)})},{type:Y.NUMBERED_PARAMETER,regex:MA(l.numbered,"[0-9]+"),key:c=>c.slice(1)},{type:Y.POSITIONAL_PARAMETER,regex:l.positional?/[?]/y:void 0},...l.custom.map(c=>{var u;return{type:Y.CUSTOM_PARAMETER,regex:Us(c.regex),key:(u=c.key)!==null&&u!==void 0?u:(d=>d)}})])}validRules(e){return e.filter(n=>!!n.regex)}},un=t=>Qc(t.toUpperCase())});var D8,P8,KPe,JPe,x8=G(()=>{L8();D8=new Map,P8=t=>{let e=D8.get(t);return e||(e=KPe(t),D8.set(t,e)),e},KPe=t=>({tokenizer:new Jf(t.tokenizerOptions,t.name),formatOptions:JPe(t.formatOptions)}),JPe=t=>{var e;return{alwaysDenseOperators:t.alwaysDenseOperators||[],onelineClauses:Object.fromEntries(t.onelineClauses.map(n=>[n,!0])),tabularOnelineClauses:Object.fromEntries(((e=t.tabularOnelineClauses)!==null&&e!==void 0?e:t.onelineClauses).map(n=>[n,!0]))}}});function v8(t){return t.indentStyle==="tabularLeft"||t.indentStyle==="tabularRight"?" ".repeat(10):t.useTabs?"	":" ".repeat(t.tabWidth)}function Xa(t){return t.indentStyle==="tabularLeft"||t.indentStyle==="tabularRight"}var _0=G(()=>{});var Qf,M8=G(()=>{Qf=class{constructor(e){this.params=e,this.index=0}get({key:e,text:n}){return this.params?e?this.params[e]:this.params[this.index++]:n}getPositionalParameterIndex(){return this.index}setPositionalParameterIndex(e){this.index=e}}});var B8=C((U8,FA)=>{(function(t,e){typeof FA=="object"&&FA.exports?FA.exports=e():t.nearley=e()})(U8,function(){function t(l,c,u){return this.id=++t.highestId,this.name=l,this.symbols=c,this.postprocess=u,this}t.highestId=0,t.prototype.toString=function(l){var c=typeof l>"u"?this.symbols.map(a).join(" "):this.symbols.slice(0,l).map(a).join(" ")+" \u25CF "+this.symbols.slice(l).map(a).join(" ");return this.name+" \u2192 "+c};function e(l,c,u,d){this.rule=l,this.dot=c,this.reference=u,this.data=[],this.wantedBy=d,this.isComplete=this.dot===l.symbols.length}e.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},e.prototype.nextState=function(l){var c=new e(this.rule,this.dot+1,this.reference,this.wantedBy);return c.left=this,c.right=l,c.isComplete&&(c.data=c.build(),c.right=void 0),c},e.prototype.build=function(){var l=[],c=this;do l.push(c.right.data),c=c.left;while(c.left);return l.reverse(),l},e.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,s.fail))};function n(l,c){this.grammar=l,this.index=c,this.states=[],this.wants={},this.scannable=[],this.completed={}}n.prototype.process=function(l){for(var c=this.states,u=this.wants,d=this.completed,E=0;E<c.length;E++){var f=c[E];if(f.isComplete){if(f.finish(),f.data!==s.fail){for(var p=f.wantedBy,h=p.length;h--;){var T=p[h];this.complete(T,f)}if(f.reference===this.index){var S=f.rule.name;(this.completed[S]=this.completed[S]||[]).push(f)}}}else{var S=f.rule.symbols[f.dot];if(typeof S!="string"){this.scannable.push(f);continue}if(u[S]){if(u[S].push(f),d.hasOwnProperty(S))for(var A=d[S],h=0;h<A.length;h++){var R=A[h];this.complete(f,R)}}else u[S]=[f],this.predict(S)}}},n.prototype.predict=function(l){for(var c=this.grammar.byName[l]||[],u=0;u<c.length;u++){var d=c[u],E=this.wants[l],f=new e(d,0,this.index,E);this.states.push(f)}},n.prototype.complete=function(l,c){var u=l.nextState(c);this.states.push(u)};function r(l,c){this.rules=l,this.start=c||this.rules[0].name;var u=this.byName={};this.rules.forEach(function(d){u.hasOwnProperty(d.name)||(u[d.name]=[]),u[d.name].push(d)})}r.fromCompiled=function(d,c){var u=d.Lexer;d.ParserStart&&(c=d.ParserStart,d=d.ParserRules);var d=d.map(function(f){return new t(f.name,f.symbols,f.postprocess)}),E=new r(d,c);return E.lexer=u,E};function i(){this.reset("")}i.prototype.reset=function(l,c){this.buffer=l,this.index=0,this.line=c?c.line:1,this.lastLineBreak=c?-c.col:0},i.prototype.next=function(){if(this.index<this.buffer.length){var l=this.buffer[this.index++];return l===`
`&&(this.line+=1,this.lastLineBreak=this.index),{value:l}}},i.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},i.prototype.formatError=function(l,c){var u=this.buffer;if(typeof u=="string"){var d=u.split(`
`).slice(Math.max(0,this.line-5),this.line),E=u.indexOf(`
`,this.index);E===-1&&(E=u.length);var f=this.index-this.lastLineBreak,p=String(this.line).length;return c+=" at line "+this.line+" col "+f+`:

`,c+=d.map(function(T,S){return h(this.line-d.length+S+1,p)+" "+T},this).join(`
`),c+=`
`+h("",p+f)+`^
`,c}else return c+" at index "+(this.index-1);function h(T,S){var A=String(T);return Array(S-A.length+1).join(" ")+A}};function s(l,c,u){if(l instanceof r)var d=l,u=c;else var d=r.fromCompiled(l,c);this.grammar=d,this.options={keepHistory:!1,lexer:d.lexer||new i};for(var E in u||{})this.options[E]=u[E];this.lexer=this.options.lexer,this.lexerState=void 0;var f=new n(d,0),p=this.table=[f];f.wants[d.start]=[],f.predict(d.start),f.process(),this.current=0}s.fail={},s.prototype.feed=function(l){var c=this.lexer;c.reset(l,this.lexerState);for(var u;;){try{if(u=c.next(),!u)break}catch(L){var p=new n(this.grammar,this.current+1);this.table.push(p);var d=new Error(this.reportLexerError(L));throw d.offset=this.current,d.token=L.token,d}var E=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var f=this.current+1,p=new n(this.grammar,f);this.table.push(p);for(var h=u.text!==void 0?u.text:u.value,T=c.constructor===i?u.value:u,S=E.scannable,A=S.length;A--;){var R=S[A],m=R.rule.symbols[R.dot];if(m.test?m.test(T):m.type?m.type===u.type:m.literal===h){var N=R.nextState({data:T,token:u,isToken:!0,reference:f-1});p.states.push(N)}}if(p.process(),p.states.length===0){var d=new Error(this.reportError(u));throw d.offset=this.current,d.token=u,d}this.options.keepHistory&&(E.lexerState=c.save()),this.current++}return E&&(this.lexerState=c.save()),this.results=this.finish(),this},s.prototype.reportLexerError=function(l){var c,u,d=l.token;return d?(c="input "+JSON.stringify(d.text[0])+" (lexer error)",u=this.lexer.formatError(d,"Syntax error")):(c="input (lexer error)",u=l.message),this.reportErrorCommon(u,c)},s.prototype.reportError=function(l){var c=(l.type?l.type+" token: ":"")+JSON.stringify(l.value!==void 0?l.value:l),u=this.lexer.formatError(l,"Syntax error");return this.reportErrorCommon(u,c)},s.prototype.reportErrorCommon=function(l,c){var u=[];u.push(l);var d=this.table.length-2,E=this.table[d],f=E.states.filter(function(h){var T=h.rule.symbols[h.dot];return T&&typeof T!="string"});if(f.length===0)u.push("Unexpected "+c+`. I did not expect any more input. Here is the state of my parse table:
`),this.displayStateStack(E.states,u);else{u.push("Unexpected "+c+`. Instead, I was expecting to see one of the following:
`);var p=f.map(function(h){return this.buildFirstStateStack(h,[])||[h]},this);p.forEach(function(h){var T=h[0],S=T.rule.symbols[T.dot],A=this.getSymbolDisplay(S);u.push("A "+A+" based on:"),this.displayStateStack(h,u)},this)}return u.push(""),u.join(`
`)},s.prototype.displayStateStack=function(l,c){for(var u,d=0,E=0;E<l.length;E++){var f=l[E],p=f.rule.toString(f.dot);p===u?d++:(d>0&&c.push("    ^ "+d+" more lines identical to this"),d=0,c.push("    "+p)),u=p}},s.prototype.getSymbolDisplay=function(l){return o(l)},s.prototype.buildFirstStateStack=function(l,c){if(c.indexOf(l)!==-1)return null;if(l.wantedBy.length===0)return[l];var u=l.wantedBy[0],d=[l].concat(c),E=this.buildFirstStateStack(u,d);return E===null?null:[l].concat(E)},s.prototype.save=function(){var l=this.table[this.current];return l.lexerState=this.lexerState,l},s.prototype.restore=function(l){var c=l.index;this.current=c,this.table[c]=l,this.table.splice(c+1),this.lexerState=l.lexerState,this.results=this.finish()},s.prototype.rewind=function(l){if(!this.options.keepHistory)throw new Error("set option `keepHistory` to enable rewinding");this.restore(this.table[l])},s.prototype.finish=function(){var l=[],c=this.grammar.start,u=this.table[this.table.length-1];return u.states.forEach(function(d){d.rule.name===c&&d.dot===d.rule.symbols.length&&d.reference===0&&d.data!==s.fail&&l.push(d)}),l.map(function(d){return d.data})};function o(l){var c=typeof l;if(c==="string")return l;if(c==="object"){if(l.literal)return JSON.stringify(l.literal);if(l instanceof RegExp)return"character matching "+l;if(l.type)return l.type+" token";if(l.test)return"token matching "+String(l.test);throw new Error("Unknown symbol type: "+l)}}function a(l){var c=typeof l;if(c==="string")return l;if(c==="object"){if(l.literal)return JSON.stringify(l.literal);if(l instanceof RegExp)return l.toString();if(l.type)return"%"+l.type;if(l.test)return"<"+String(l.test)+">";throw new Error("Unknown symbol type: "+l)}}return{Parser:s,Grammar:r,Rule:t}})});function F8(t){return t.map(QPe).map(ZPe).map(exe).map(txe).map(nxe)}var QPe,ZPe,exe,txe,nxe,rxe,eu,H8,G8,ixe,$8=G(()=>{Yr();QPe=(t,e,n)=>{if(EA(t.type)){let r=rxe(n,e);if(r&&r.type===Y.PROPERTY_ACCESS_OPERATOR)return Object.assign(Object.assign({},t),{type:Y.IDENTIFIER,text:t.raw});let i=eu(n,e);if(i&&i.type===Y.PROPERTY_ACCESS_OPERATOR)return Object.assign(Object.assign({},t),{type:Y.IDENTIFIER,text:t.raw})}return t},ZPe=(t,e,n)=>{if(t.type===Y.RESERVED_FUNCTION_NAME){let r=eu(n,e);if(!r||!H8(r))return Object.assign(Object.assign({},t),{type:Y.IDENTIFIER,text:t.raw})}return t},exe=(t,e,n)=>{if(t.type===Y.RESERVED_DATA_TYPE){let r=eu(n,e);if(r&&H8(r))return Object.assign(Object.assign({},t),{type:Y.RESERVED_PARAMETERIZED_DATA_TYPE})}return t},txe=(t,e,n)=>{if(t.type===Y.IDENTIFIER){let r=eu(n,e);if(r&&G8(r))return Object.assign(Object.assign({},t),{type:Y.ARRAY_IDENTIFIER})}return t},nxe=(t,e,n)=>{if(t.type===Y.RESERVED_DATA_TYPE){let r=eu(n,e);if(r&&G8(r))return Object.assign(Object.assign({},t),{type:Y.ARRAY_KEYWORD})}return t},rxe=(t,e)=>eu(t,e,-1),eu=(t,e,n=1)=>{let r=1;for(;t[e+r*n]&&ixe(t[e+r*n]);)r++;return t[e+r*n]},H8=t=>t.type===Y.OPEN_PAREN&&t.text==="(",G8=t=>t.type===Y.OPEN_PAREN&&t.text==="[",ixe=t=>t.type===Y.BLOCK_COMMENT||t.type===Y.LINE_COMMENT});var za,N0=G(()=>{I0();Yr();za=class{constructor(e){this.tokenize=e,this.index=0,this.tokens=[],this.input=""}reset(e,n){this.input=e,this.index=0,this.tokens=this.tokenize(e)}next(){return this.tokens[this.index++]}save(){}formatError(e){let{line:n,col:r}=UA(this.input,e.start);return`Parse error at token: ${e.text} at line ${n} column ${r}`}has(e){return e in Y}}});var ne,O0=G(()=>{(function(t){t.statement="statement",t.clause="clause",t.set_operation="set_operation",t.function_call="function_call",t.parameterized_data_type="parameterized_data_type",t.array_subscript="array_subscript",t.property_access="property_access",t.parenthesis="parenthesis",t.between_predicate="between_predicate",t.case_expression="case_expression",t.case_when="case_when",t.case_else="case_else",t.limit_clause="limit_clause",t.all_columns_asterisk="all_columns_asterisk",t.literal="literal",t.identifier="identifier",t.keyword="keyword",t.data_type="data_type",t.parameter="parameter",t.operator="operator",t.comma="comma",t.line_comment="line_comment",t.block_comment="block_comment",t.disable_comment="disable_comment"})(ne=ne||(ne={}))});function C0(t){return t[0]}var pe,ja,gn,k8,In,sxe,oxe,W8,Y8=G(()=>{N0();O0();Yr();pe=new za(t=>[]),ja=([[t]])=>t,gn=t=>({type:ne.keyword,tokenType:t.type,text:t.text,raw:t.raw}),k8=t=>({type:ne.data_type,text:t.text,raw:t.raw}),In=(t,{leading:e,trailing:n})=>(e?.length&&(t=Object.assign(Object.assign({},t),{leadingComments:e})),n?.length&&(t=Object.assign(Object.assign({},t),{trailingComments:n})),t),sxe=(t,{leading:e,trailing:n})=>{if(e?.length){let[r,...i]=t;t=[In(r,{leading:e}),...i]}if(n?.length){let r=t.slice(0,-1),i=t[t.length-1];t=[...r,In(i,{trailing:n})]}return t},oxe={Lexer:pe,ParserRules:[{name:"main$ebnf$1",symbols:[]},{name:"main$ebnf$1",symbols:["main$ebnf$1","statement"],postprocess:t=>t[0].concat([t[1]])},{name:"main",symbols:["main$ebnf$1"],postprocess:([t])=>{let e=t[t.length-1];return e&&!e.hasSemicolon?e.children.length>0?t:t.slice(0,-1):t}},{name:"statement$subexpression$1",symbols:[pe.has("DELIMITER")?{type:"DELIMITER"}:DELIMITER]},{name:"statement$subexpression$1",symbols:[pe.has("EOF")?{type:"EOF"}:EOF]},{name:"statement",symbols:["expressions_or_clauses","statement$subexpression$1"],postprocess:([t,[e]])=>({type:ne.statement,children:t,hasSemicolon:e.type===Y.DELIMITER})},{name:"expressions_or_clauses$ebnf$1",symbols:[]},{name:"expressions_or_clauses$ebnf$1",symbols:["expressions_or_clauses$ebnf$1","free_form_sql"],postprocess:t=>t[0].concat([t[1]])},{name:"expressions_or_clauses$ebnf$2",symbols:[]},{name:"expressions_or_clauses$ebnf$2",symbols:["expressions_or_clauses$ebnf$2","clause"],postprocess:t=>t[0].concat([t[1]])},{name:"expressions_or_clauses",symbols:["expressions_or_clauses$ebnf$1","expressions_or_clauses$ebnf$2"],postprocess:([t,e])=>[...t,...e]},{name:"clause$subexpression$1",symbols:["limit_clause"]},{name:"clause$subexpression$1",symbols:["select_clause"]},{name:"clause$subexpression$1",symbols:["other_clause"]},{name:"clause$subexpression$1",symbols:["set_operation"]},{name:"clause",symbols:["clause$subexpression$1"],postprocess:ja},{name:"limit_clause$ebnf$1$subexpression$1$ebnf$1",symbols:["free_form_sql"]},{name:"limit_clause$ebnf$1$subexpression$1$ebnf$1",symbols:["limit_clause$ebnf$1$subexpression$1$ebnf$1","free_form_sql"],postprocess:t=>t[0].concat([t[1]])},{name:"limit_clause$ebnf$1$subexpression$1",symbols:[pe.has("COMMA")?{type:"COMMA"}:COMMA,"limit_clause$ebnf$1$subexpression$1$ebnf$1"]},{name:"limit_clause$ebnf$1",symbols:["limit_clause$ebnf$1$subexpression$1"],postprocess:C0},{name:"limit_clause$ebnf$1",symbols:[],postprocess:()=>null},{name:"limit_clause",symbols:[pe.has("LIMIT")?{type:"LIMIT"}:LIMIT,"_","expression_chain_","limit_clause$ebnf$1"],postprocess:([t,e,n,r])=>{if(r){let[i,s]=r;return{type:ne.limit_clause,limitKw:In(gn(t),{trailing:e}),offset:n,count:s}}else return{type:ne.limit_clause,limitKw:In(gn(t),{trailing:e}),count:n}}},{name:"select_clause$subexpression$1$ebnf$1",symbols:[]},{name:"select_clause$subexpression$1$ebnf$1",symbols:["select_clause$subexpression$1$ebnf$1","free_form_sql"],postprocess:t=>t[0].concat([t[1]])},{name:"select_clause$subexpression$1",symbols:["all_columns_asterisk","select_clause$subexpression$1$ebnf$1"]},{name:"select_clause$subexpression$1$ebnf$2",symbols:[]},{name:"select_clause$subexpression$1$ebnf$2",symbols:["select_clause$subexpression$1$ebnf$2","free_form_sql"],postprocess:t=>t[0].concat([t[1]])},{name:"select_clause$subexpression$1",symbols:["asteriskless_free_form_sql","select_clause$subexpression$1$ebnf$2"]},{name:"select_clause",symbols:[pe.has("RESERVED_SELECT")?{type:"RESERVED_SELECT"}:RESERVED_SELECT,"select_clause$subexpression$1"],postprocess:([t,[e,n]])=>({type:ne.clause,nameKw:gn(t),children:[e,...n]})},{name:"select_clause",symbols:[pe.has("RESERVED_SELECT")?{type:"RESERVED_SELECT"}:RESERVED_SELECT],postprocess:([t])=>({type:ne.clause,nameKw:gn(t),children:[]})},{name:"all_columns_asterisk",symbols:[pe.has("ASTERISK")?{type:"ASTERISK"}:ASTERISK],postprocess:()=>({type:ne.all_columns_asterisk})},{name:"other_clause$ebnf$1",symbols:[]},{name:"other_clause$ebnf$1",symbols:["other_clause$ebnf$1","free_form_sql"],postprocess:t=>t[0].concat([t[1]])},{name:"other_clause",symbols:[pe.has("RESERVED_CLAUSE")?{type:"RESERVED_CLAUSE"}:RESERVED_CLAUSE,"other_clause$ebnf$1"],postprocess:([t,e])=>({type:ne.clause,nameKw:gn(t),children:e})},{name:"set_operation$ebnf$1",symbols:[]},{name:"set_operation$ebnf$1",symbols:["set_operation$ebnf$1","free_form_sql"],postprocess:t=>t[0].concat([t[1]])},{name:"set_operation",symbols:[pe.has("RESERVED_SET_OPERATION")?{type:"RESERVED_SET_OPERATION"}:RESERVED_SET_OPERATION,"set_operation$ebnf$1"],postprocess:([t,e])=>({type:ne.set_operation,nameKw:gn(t),children:e})},{name:"expression_chain_$ebnf$1",symbols:["expression_with_comments_"]},{name:"expression_chain_$ebnf$1",symbols:["expression_chain_$ebnf$1","expression_with_comments_"],postprocess:t=>t[0].concat([t[1]])},{name:"expression_chain_",symbols:["expression_chain_$ebnf$1"],postprocess:C0},{name:"expression_chain$ebnf$1",symbols:[]},{name:"expression_chain$ebnf$1",symbols:["expression_chain$ebnf$1","_expression_with_comments"],postprocess:t=>t[0].concat([t[1]])},{name:"expression_chain",symbols:["expression","expression_chain$ebnf$1"],postprocess:([t,e])=>[t,...e]},{name:"andless_expression_chain$ebnf$1",symbols:[]},{name:"andless_expression_chain$ebnf$1",symbols:["andless_expression_chain$ebnf$1","_andless_expression_with_comments"],postprocess:t=>t[0].concat([t[1]])},{name:"andless_expression_chain",symbols:["andless_expression","andless_expression_chain$ebnf$1"],postprocess:([t,e])=>[t,...e]},{name:"expression_with_comments_",symbols:["expression","_"],postprocess:([t,e])=>In(t,{trailing:e})},{name:"_expression_with_comments",symbols:["_","expression"],postprocess:([t,e])=>In(e,{leading:t})},{name:"_andless_expression_with_comments",symbols:["_","andless_expression"],postprocess:([t,e])=>In(e,{leading:t})},{name:"free_form_sql$subexpression$1",symbols:["asteriskless_free_form_sql"]},{name:"free_form_sql$subexpression$1",symbols:["asterisk"]},{name:"free_form_sql",symbols:["free_form_sql$subexpression$1"],postprocess:ja},{name:"asteriskless_free_form_sql$subexpression$1",symbols:["asteriskless_andless_expression"]},{name:"asteriskless_free_form_sql$subexpression$1",symbols:["logic_operator"]},{name:"asteriskless_free_form_sql$subexpression$1",symbols:["comma"]},{name:"asteriskless_free_form_sql$subexpression$1",symbols:["comment"]},{name:"asteriskless_free_form_sql$subexpression$1",symbols:["other_keyword"]},{name:"asteriskless_free_form_sql",symbols:["asteriskless_free_form_sql$subexpression$1"],postprocess:ja},{name:"expression$subexpression$1",symbols:["andless_expression"]},{name:"expression$subexpression$1",symbols:["logic_operator"]},{name:"expression",symbols:["expression$subexpression$1"],postprocess:ja},{name:"andless_expression$subexpression$1",symbols:["asteriskless_andless_expression"]},{name:"andless_expression$subexpression$1",symbols:["asterisk"]},{name:"andless_expression",symbols:["andless_expression$subexpression$1"],postprocess:ja},{name:"asteriskless_andless_expression$subexpression$1",symbols:["atomic_expression"]},{name:"asteriskless_andless_expression$subexpression$1",symbols:["between_predicate"]},{name:"asteriskless_andless_expression$subexpression$1",symbols:["case_expression"]},{name:"asteriskless_andless_expression",symbols:["asteriskless_andless_expression$subexpression$1"],postprocess:ja},{name:"atomic_expression$subexpression$1",symbols:["array_subscript"]},{name:"atomic_expression$subexpression$1",symbols:["function_call"]},{name:"atomic_expression$subexpression$1",symbols:["property_access"]},{name:"atomic_expression$subexpression$1",symbols:["parenthesis"]},{name:"atomic_expression$subexpression$1",symbols:["curly_braces"]},{name:"atomic_expression$subexpression$1",symbols:["square_brackets"]},{name:"atomic_expression$subexpression$1",symbols:["operator"]},{name:"atomic_expression$subexpression$1",symbols:["identifier"]},{name:"atomic_expression$subexpression$1",symbols:["parameter"]},{name:"atomic_expression$subexpression$1",symbols:["literal"]},{name:"atomic_expression$subexpression$1",symbols:["data_type"]},{name:"atomic_expression$subexpression$1",symbols:["keyword"]},{name:"atomic_expression",symbols:["atomic_expression$subexpression$1"],postprocess:ja},{name:"array_subscript",symbols:[pe.has("ARRAY_IDENTIFIER")?{type:"ARRAY_IDENTIFIER"}:ARRAY_IDENTIFIER,"_","square_brackets"],postprocess:([t,e,n])=>({type:ne.array_subscript,array:In({type:ne.identifier,quoted:!1,text:t.text},{trailing:e}),parenthesis:n})},{name:"array_subscript",symbols:[pe.has("ARRAY_KEYWORD")?{type:"ARRAY_KEYWORD"}:ARRAY_KEYWORD,"_","square_brackets"],postprocess:([t,e,n])=>({type:ne.array_subscript,array:In(gn(t),{trailing:e}),parenthesis:n})},{name:"function_call",symbols:[pe.has("RESERVED_FUNCTION_NAME")?{type:"RESERVED_FUNCTION_NAME"}:RESERVED_FUNCTION_NAME,"_","parenthesis"],postprocess:([t,e,n])=>({type:ne.function_call,nameKw:In(gn(t),{trailing:e}),parenthesis:n})},{name:"parenthesis",symbols:[{literal:"("},"expressions_or_clauses",{literal:")"}],postprocess:([t,e,n])=>({type:ne.parenthesis,children:e,openParen:"(",closeParen:")"})},{name:"curly_braces$ebnf$1",symbols:[]},{name:"curly_braces$ebnf$1",symbols:["curly_braces$ebnf$1","free_form_sql"],postprocess:t=>t[0].concat([t[1]])},{name:"curly_braces",symbols:[{literal:"{"},"curly_braces$ebnf$1",{literal:"}"}],postprocess:([t,e,n])=>({type:ne.parenthesis,children:e,openParen:"{",closeParen:"}"})},{name:"square_brackets$ebnf$1",symbols:[]},{name:"square_brackets$ebnf$1",symbols:["square_brackets$ebnf$1","free_form_sql"],postprocess:t=>t[0].concat([t[1]])},{name:"square_brackets",symbols:[{literal:"["},"square_brackets$ebnf$1",{literal:"]"}],postprocess:([t,e,n])=>({type:ne.parenthesis,children:e,openParen:"[",closeParen:"]"})},{name:"property_access$subexpression$1",symbols:["identifier"]},{name:"property_access$subexpression$1",symbols:["array_subscript"]},{name:"property_access$subexpression$1",symbols:["all_columns_asterisk"]},{name:"property_access$subexpression$1",symbols:["parameter"]},{name:"property_access",symbols:["atomic_expression","_",pe.has("PROPERTY_ACCESS_OPERATOR")?{type:"PROPERTY_ACCESS_OPERATOR"}:PROPERTY_ACCESS_OPERATOR,"_","property_access$subexpression$1"],postprocess:([t,e,n,r,[i]])=>({type:ne.property_access,object:In(t,{trailing:e}),operator:n.text,property:In(i,{leading:r})})},{name:"between_predicate",symbols:[pe.has("BETWEEN")?{type:"BETWEEN"}:BETWEEN,"_","andless_expression_chain","_",pe.has("AND")?{type:"AND"}:AND,"_","andless_expression"],postprocess:([t,e,n,r,i,s,o])=>({type:ne.between_predicate,betweenKw:gn(t),expr1:sxe(n,{leading:e,trailing:r}),andKw:gn(i),expr2:[In(o,{leading:s})]})},{name:"case_expression$ebnf$1",symbols:["expression_chain_"],postprocess:C0},{name:"case_expression$ebnf$1",symbols:[],postprocess:()=>null},{name:"case_expression$ebnf$2",symbols:[]},{name:"case_expression$ebnf$2",symbols:["case_expression$ebnf$2","case_clause"],postprocess:t=>t[0].concat([t[1]])},{name:"case_expression",symbols:[pe.has("CASE")?{type:"CASE"}:CASE,"_","case_expression$ebnf$1","case_expression$ebnf$2",pe.has("END")?{type:"END"}:END],postprocess:([t,e,n,r,i])=>({type:ne.case_expression,caseKw:In(gn(t),{trailing:e}),endKw:gn(i),expr:n||[],clauses:r})},{name:"case_clause",symbols:[pe.has("WHEN")?{type:"WHEN"}:WHEN,"_","expression_chain_",pe.has("THEN")?{type:"THEN"}:THEN,"_","expression_chain_"],postprocess:([t,e,n,r,i,s])=>({type:ne.case_when,whenKw:In(gn(t),{trailing:e}),thenKw:In(gn(r),{trailing:i}),condition:n,result:s})},{name:"case_clause",symbols:[pe.has("ELSE")?{type:"ELSE"}:ELSE,"_","expression_chain_"],postprocess:([t,e,n])=>({type:ne.case_else,elseKw:In(gn(t),{trailing:e}),result:n})},{name:"comma$subexpression$1",symbols:[pe.has("COMMA")?{type:"COMMA"}:COMMA]},{name:"comma",symbols:["comma$subexpression$1"],postprocess:([[t]])=>({type:ne.comma})},{name:"asterisk$subexpression$1",symbols:[pe.has("ASTERISK")?{type:"ASTERISK"}:ASTERISK]},{name:"asterisk",symbols:["asterisk$subexpression$1"],postprocess:([[t]])=>({type:ne.operator,text:t.text})},{name:"operator$subexpression$1",symbols:[pe.has("OPERATOR")?{type:"OPERATOR"}:OPERATOR]},{name:"operator",symbols:["operator$subexpression$1"],postprocess:([[t]])=>({type:ne.operator,text:t.text})},{name:"identifier$subexpression$1",symbols:[pe.has("IDENTIFIER")?{type:"IDENTIFIER"}:IDENTIFIER]},{name:"identifier$subexpression$1",symbols:[pe.has("QUOTED_IDENTIFIER")?{type:"QUOTED_IDENTIFIER"}:QUOTED_IDENTIFIER]},{name:"identifier$subexpression$1",symbols:[pe.has("VARIABLE")?{type:"VARIABLE"}:VARIABLE]},{name:"identifier",symbols:["identifier$subexpression$1"],postprocess:([[t]])=>({type:ne.identifier,quoted:t.type!=="IDENTIFIER",text:t.text})},{name:"parameter$subexpression$1",symbols:[pe.has("NAMED_PARAMETER")?{type:"NAMED_PARAMETER"}:NAMED_PARAMETER]},{name:"parameter$subexpression$1",symbols:[pe.has("QUOTED_PARAMETER")?{type:"QUOTED_PARAMETER"}:QUOTED_PARAMETER]},{name:"parameter$subexpression$1",symbols:[pe.has("NUMBERED_PARAMETER")?{type:"NUMBERED_PARAMETER"}:NUMBERED_PARAMETER]},{name:"parameter$subexpression$1",symbols:[pe.has("POSITIONAL_PARAMETER")?{type:"POSITIONAL_PARAMETER"}:POSITIONAL_PARAMETER]},{name:"parameter$subexpression$1",symbols:[pe.has("CUSTOM_PARAMETER")?{type:"CUSTOM_PARAMETER"}:CUSTOM_PARAMETER]},{name:"parameter",symbols:["parameter$subexpression$1"],postprocess:([[t]])=>({type:ne.parameter,key:t.key,text:t.text})},{name:"literal$subexpression$1",symbols:[pe.has("NUMBER")?{type:"NUMBER"}:NUMBER]},{name:"literal$subexpression$1",symbols:[pe.has("STRING")?{type:"STRING"}:STRING]},{name:"literal",symbols:["literal$subexpression$1"],postprocess:([[t]])=>({type:ne.literal,text:t.text})},{name:"keyword$subexpression$1",symbols:[pe.has("RESERVED_KEYWORD")?{type:"RESERVED_KEYWORD"}:RESERVED_KEYWORD]},{name:"keyword$subexpression$1",symbols:[pe.has("RESERVED_KEYWORD_PHRASE")?{type:"RESERVED_KEYWORD_PHRASE"}:RESERVED_KEYWORD_PHRASE]},{name:"keyword$subexpression$1",symbols:[pe.has("RESERVED_JOIN")?{type:"RESERVED_JOIN"}:RESERVED_JOIN]},{name:"keyword",symbols:["keyword$subexpression$1"],postprocess:([[t]])=>gn(t)},{name:"data_type$subexpression$1",symbols:[pe.has("RESERVED_DATA_TYPE")?{type:"RESERVED_DATA_TYPE"}:RESERVED_DATA_TYPE]},{name:"data_type$subexpression$1",symbols:[pe.has("RESERVED_DATA_TYPE_PHRASE")?{type:"RESERVED_DATA_TYPE_PHRASE"}:RESERVED_DATA_TYPE_PHRASE]},{name:"data_type",symbols:["data_type$subexpression$1"],postprocess:([[t]])=>k8(t)},{name:"data_type",symbols:[pe.has("RESERVED_PARAMETERIZED_DATA_TYPE")?{type:"RESERVED_PARAMETERIZED_DATA_TYPE"}:RESERVED_PARAMETERIZED_DATA_TYPE,"_","parenthesis"],postprocess:([t,e,n])=>({type:ne.parameterized_data_type,dataType:In(k8(t),{trailing:e}),parenthesis:n})},{name:"logic_operator$subexpression$1",symbols:[pe.has("AND")?{type:"AND"}:AND]},{name:"logic_operator$subexpression$1",symbols:[pe.has("OR")?{type:"OR"}:OR]},{name:"logic_operator$subexpression$1",symbols:[pe.has("XOR")?{type:"XOR"}:XOR]},{name:"logic_operator",symbols:["logic_operator$subexpression$1"],postprocess:([[t]])=>gn(t)},{name:"other_keyword$subexpression$1",symbols:[pe.has("WHEN")?{type:"WHEN"}:WHEN]},{name:"other_keyword$subexpression$1",symbols:[pe.has("THEN")?{type:"THEN"}:THEN]},{name:"other_keyword$subexpression$1",symbols:[pe.has("ELSE")?{type:"ELSE"}:ELSE]},{name:"other_keyword$subexpression$1",symbols:[pe.has("END")?{type:"END"}:END]},{name:"other_keyword",symbols:["other_keyword$subexpression$1"],postprocess:([[t]])=>gn(t)},{name:"_$ebnf$1",symbols:[]},{name:"_$ebnf$1",symbols:["_$ebnf$1","comment"],postprocess:t=>t[0].concat([t[1]])},{name:"_",symbols:["_$ebnf$1"],postprocess:([t])=>t},{name:"comment",symbols:[pe.has("LINE_COMMENT")?{type:"LINE_COMMENT"}:LINE_COMMENT],postprocess:([t])=>({type:ne.line_comment,text:t.text,precedingWhitespace:t.precedingWhitespace})},{name:"comment",symbols:[pe.has("BLOCK_COMMENT")?{type:"BLOCK_COMMENT"}:BLOCK_COMMENT],postprocess:([t])=>({type:ne.block_comment,text:t.text,precedingWhitespace:t.precedingWhitespace})},{name:"comment",symbols:[pe.has("DISABLE_COMMENT")?{type:"DISABLE_COMMENT"}:DISABLE_COMMENT],postprocess:([t])=>({type:ne.disable_comment,text:t.text,precedingWhitespace:t.precedingWhitespace})}],ParserStart:"main"},W8=oxe});function q8(t){let e={},n=new za(i=>[...F8(t.tokenize(i,e)),Lw(i.length)]),r=new axe(lxe.fromCompiled(W8),{lexer:n});return{parse:(i,s)=>{e=s;let{results:o}=r.feed(i);if(o.length===1)return o[0];throw o.length===0?new Error("Parse error: Invalid SQL"):new Error(`Parse error: Ambiguous grammar
${JSON.stringify(o,void 0,2)}`)}}}var V8,axe,lxe,X8=G(()=>{V8=j(B8(),1);$8();Y8();N0();Yr();({Parser:axe,Grammar:lxe}=V8.default)});var W,Ka,cxe,uxe,HA=G(()=>{Zc();(function(t){t[t.SPACE=0]="SPACE",t[t.NO_SPACE=1]="NO_SPACE",t[t.NO_NEWLINE=2]="NO_NEWLINE",t[t.NEWLINE=3]="NEWLINE",t[t.MANDATORY_NEWLINE=4]="MANDATORY_NEWLINE",t[t.INDENT=5]="INDENT",t[t.SINGLE_INDENT=6]="SINGLE_INDENT"})(W=W||(W={}));Ka=class{constructor(e){this.indentation=e,this.items=[]}add(...e){for(let n of e)switch(n){case W.SPACE:this.items.push(W.SPACE);break;case W.NO_SPACE:this.trimHorizontalWhitespace();break;case W.NO_NEWLINE:this.trimWhitespace();break;case W.NEWLINE:this.trimHorizontalWhitespace(),this.addNewline(W.NEWLINE);break;case W.MANDATORY_NEWLINE:this.trimHorizontalWhitespace(),this.addNewline(W.MANDATORY_NEWLINE);break;case W.INDENT:this.addIndentation();break;case W.SINGLE_INDENT:this.items.push(W.SINGLE_INDENT);break;default:this.items.push(n)}}trimHorizontalWhitespace(){for(;cxe(Co(this.items));)this.items.pop()}trimWhitespace(){for(;uxe(Co(this.items));)this.items.pop()}addNewline(e){if(this.items.length>0)switch(Co(this.items)){case W.NEWLINE:this.items.pop(),this.items.push(e);break;case W.MANDATORY_NEWLINE:break;default:this.items.push(e);break}}addIndentation(){for(let e=0;e<this.indentation.getLevel();e++)this.items.push(W.SINGLE_INDENT)}toString(){return this.items.map(e=>this.itemToString(e)).join("")}getLayoutItems(){return this.items}itemToString(e){switch(e){case W.SPACE:return" ";case W.NEWLINE:case W.MANDATORY_NEWLINE:return`
`;case W.SINGLE_INDENT:return this.indentation.getSingleIndent();default:return e}}},cxe=t=>t===W.SPACE||t===W.SINGLE_INDENT,uxe=t=>t===W.SPACE||t===W.SINGLE_INDENT||t===W.NEWLINE});function GA(t,e){if(e==="standard")return t;let n=[];return t.length>=10&&t.includes(" ")&&([t,...n]=t.split(" ")),e==="tabularLeft"?t=t.padEnd(9," "):t=t.padStart(9," "),t+["",...n].join(" ")}function b0(t){return uK(t)||t===Y.RESERVED_CLAUSE||t===Y.RESERVED_SELECT||t===Y.RESERVED_SET_OPERATION||t===Y.RESERVED_JOIN||t===Y.LIMIT}var z8=G(()=>{Yr()});var y0,dxe,Ja,w0=G(()=>{Zc();y0="top-level",dxe="block-level",Ja=class{constructor(e){this.indent=e,this.indentTypes=[]}getSingleIndent(){return this.indent}getLevel(){return this.indentTypes.length}increaseTopLevel(){this.indentTypes.push(y0)}increaseBlockLevel(){this.indentTypes.push(dxe)}decreaseTopLevel(){this.indentTypes.length>0&&Co(this.indentTypes)===y0&&this.indentTypes.pop()}decreaseBlockLevel(){for(;this.indentTypes.length>0&&this.indentTypes.pop()===y0;);}}});var Zf,tu,j8=G(()=>{w0();HA();Zf=class extends Ka{constructor(e){super(new Ja("")),this.expressionWidth=e,this.length=0,this.trailingSpace=!1}add(...e){if(e.forEach(n=>this.addToLength(n)),this.length>this.expressionWidth)throw new tu;super.add(...e)}addToLength(e){if(typeof e=="string")this.length+=e.length,this.trailingSpace=!1;else{if(e===W.MANDATORY_NEWLINE||e===W.NEWLINE)throw new tu;e===W.INDENT||e===W.SINGLE_INDENT||e===W.SPACE?this.trailingSpace||(this.length++,this.trailingSpace=!0):(e===W.NO_NEWLINE||e===W.NO_SPACE)&&this.trailingSpace&&(this.trailingSpace=!1,this.length--)}}},tu=class extends Error{}});var eE,K8=G(()=>{Zc();_0();Yr();O0();HA();z8();j8();eE=class t{constructor({cfg:e,dialectCfg:n,params:r,layout:i,inline:s=!1}){this.inline=!1,this.nodes=[],this.index=-1,this.cfg=e,this.dialectCfg=n,this.inline=s,this.params=r,this.layout=i}format(e){for(this.nodes=e,this.index=0;this.index<this.nodes.length;this.index++)this.formatNode(this.nodes[this.index]);return this.layout}formatNode(e){this.formatComments(e.leadingComments),this.formatNodeWithoutComments(e),this.formatComments(e.trailingComments)}formatNodeWithoutComments(e){switch(e.type){case ne.function_call:return this.formatFunctionCall(e);case ne.parameterized_data_type:return this.formatParameterizedDataType(e);case ne.array_subscript:return this.formatArraySubscript(e);case ne.property_access:return this.formatPropertyAccess(e);case ne.parenthesis:return this.formatParenthesis(e);case ne.between_predicate:return this.formatBetweenPredicate(e);case ne.case_expression:return this.formatCaseExpression(e);case ne.case_when:return this.formatCaseWhen(e);case ne.case_else:return this.formatCaseElse(e);case ne.clause:return this.formatClause(e);case ne.set_operation:return this.formatSetOperation(e);case ne.limit_clause:return this.formatLimitClause(e);case ne.all_columns_asterisk:return this.formatAllColumnsAsterisk(e);case ne.literal:return this.formatLiteral(e);case ne.identifier:return this.formatIdentifier(e);case ne.parameter:return this.formatParameter(e);case ne.operator:return this.formatOperator(e);case ne.comma:return this.formatComma(e);case ne.line_comment:return this.formatLineComment(e);case ne.block_comment:return this.formatBlockComment(e);case ne.disable_comment:return this.formatBlockComment(e);case ne.data_type:return this.formatDataType(e);case ne.keyword:return this.formatKeywordNode(e)}}formatFunctionCall(e){this.withComments(e.nameKw,()=>{this.layout.add(this.showFunctionKw(e.nameKw))}),this.formatNode(e.parenthesis)}formatParameterizedDataType(e){this.withComments(e.dataType,()=>{this.layout.add(this.showDataType(e.dataType))}),this.formatNode(e.parenthesis)}formatArraySubscript(e){let n;switch(e.array.type){case ne.data_type:n=this.showDataType(e.array);break;case ne.keyword:n=this.showKw(e.array);break;default:n=this.showIdentifier(e.array);break}this.withComments(e.array,()=>{this.layout.add(n)}),this.formatNode(e.parenthesis)}formatPropertyAccess(e){this.formatNode(e.object),this.layout.add(W.NO_SPACE,e.operator),this.formatNode(e.property)}formatParenthesis(e){let n=this.formatInlineExpression(e.children);n?(this.layout.add(e.openParen),this.layout.add(...n.getLayoutItems()),this.layout.add(W.NO_SPACE,e.closeParen,W.SPACE)):(this.layout.add(e.openParen,W.NEWLINE),Xa(this.cfg)?(this.layout.add(W.INDENT),this.layout=this.formatSubExpression(e.children)):(this.layout.indentation.increaseBlockLevel(),this.layout.add(W.INDENT),this.layout=this.formatSubExpression(e.children),this.layout.indentation.decreaseBlockLevel()),this.layout.add(W.NEWLINE,W.INDENT,e.closeParen,W.SPACE))}formatBetweenPredicate(e){this.layout.add(this.showKw(e.betweenKw),W.SPACE),this.layout=this.formatSubExpression(e.expr1),this.layout.add(W.NO_SPACE,W.SPACE,this.showNonTabularKw(e.andKw),W.SPACE),this.layout=this.formatSubExpression(e.expr2),this.layout.add(W.SPACE)}formatCaseExpression(e){this.formatNode(e.caseKw),this.layout.indentation.increaseBlockLevel(),this.layout=this.formatSubExpression(e.expr),this.layout=this.formatSubExpression(e.clauses),this.layout.indentation.decreaseBlockLevel(),this.layout.add(W.NEWLINE,W.INDENT),this.formatNode(e.endKw)}formatCaseWhen(e){this.layout.add(W.NEWLINE,W.INDENT),this.formatNode(e.whenKw),this.layout=this.formatSubExpression(e.condition),this.formatNode(e.thenKw),this.layout=this.formatSubExpression(e.result)}formatCaseElse(e){this.layout.add(W.NEWLINE,W.INDENT),this.formatNode(e.elseKw),this.layout=this.formatSubExpression(e.result)}formatClause(e){this.isOnelineClause(e)?this.formatClauseInOnelineStyle(e):Xa(this.cfg)?this.formatClauseInTabularStyle(e):this.formatClauseInIndentedStyle(e)}isOnelineClause(e){return Xa(this.cfg)?this.dialectCfg.tabularOnelineClauses[e.nameKw.text]:this.dialectCfg.onelineClauses[e.nameKw.text]}formatClauseInIndentedStyle(e){this.layout.add(W.NEWLINE,W.INDENT,this.showKw(e.nameKw),W.NEWLINE),this.layout.indentation.increaseTopLevel(),this.layout.add(W.INDENT),this.layout=this.formatSubExpression(e.children),this.layout.indentation.decreaseTopLevel()}formatClauseInOnelineStyle(e){this.layout.add(W.NEWLINE,W.INDENT,this.showKw(e.nameKw),W.SPACE),this.layout=this.formatSubExpression(e.children)}formatClauseInTabularStyle(e){this.layout.add(W.NEWLINE,W.INDENT,this.showKw(e.nameKw),W.SPACE),this.layout.indentation.increaseTopLevel(),this.layout=this.formatSubExpression(e.children),this.layout.indentation.decreaseTopLevel()}formatSetOperation(e){this.layout.add(W.NEWLINE,W.INDENT,this.showKw(e.nameKw),W.NEWLINE),this.layout.add(W.INDENT),this.layout=this.formatSubExpression(e.children)}formatLimitClause(e){this.withComments(e.limitKw,()=>{this.layout.add(W.NEWLINE,W.INDENT,this.showKw(e.limitKw))}),this.layout.indentation.increaseTopLevel(),Xa(this.cfg)?this.layout.add(W.SPACE):this.layout.add(W.NEWLINE,W.INDENT),e.offset?(this.layout=this.formatSubExpression(e.offset),this.layout.add(W.NO_SPACE,",",W.SPACE),this.layout=this.formatSubExpression(e.count)):this.layout=this.formatSubExpression(e.count),this.layout.indentation.decreaseTopLevel()}formatAllColumnsAsterisk(e){this.layout.add("*",W.SPACE)}formatLiteral(e){this.layout.add(e.text,W.SPACE)}formatIdentifier(e){this.layout.add(this.showIdentifier(e),W.SPACE)}formatParameter(e){this.layout.add(this.params.get(e),W.SPACE)}formatOperator({text:e}){this.cfg.denseOperators||this.dialectCfg.alwaysDenseOperators.includes(e)?this.layout.add(W.NO_SPACE,e):e===":"?this.layout.add(W.NO_SPACE,e,W.SPACE):this.layout.add(e,W.SPACE)}formatComma(e){this.inline?this.layout.add(W.NO_SPACE,",",W.SPACE):this.layout.add(W.NO_SPACE,",",W.NEWLINE,W.INDENT)}withComments(e,n){this.formatComments(e.leadingComments),n(),this.formatComments(e.trailingComments)}formatComments(e){e&&e.forEach(n=>{n.type===ne.line_comment?this.formatLineComment(n):this.formatBlockComment(n)})}formatLineComment(e){xA(e.precedingWhitespace||"")?this.layout.add(W.NEWLINE,W.INDENT,e.text,W.MANDATORY_NEWLINE,W.INDENT):this.layout.getLayoutItems().length>0?this.layout.add(W.NO_NEWLINE,W.SPACE,e.text,W.MANDATORY_NEWLINE,W.INDENT):this.layout.add(e.text,W.MANDATORY_NEWLINE,W.INDENT)}formatBlockComment(e){e.type===ne.block_comment&&this.isMultilineBlockComment(e)?(this.splitBlockComment(e.text).forEach(n=>{this.layout.add(W.NEWLINE,W.INDENT,n)}),this.layout.add(W.NEWLINE,W.INDENT)):this.layout.add(e.text,W.SPACE)}isMultilineBlockComment(e){return xA(e.text)||xA(e.precedingWhitespace||"")}isDocComment(e){let n=e.split(/\n/);return/^\/\*\*?$/.test(n[0])&&n.slice(1,n.length-1).every(r=>/^\s*\*/.test(r))&&/^\s*\*\/$/.test(Co(n))}splitBlockComment(e){return this.isDocComment(e)?e.split(/\n/).map(n=>/^\s*\*/.test(n)?" "+n.replace(/^\s*/,""):n):e.split(/\n/).map(n=>n.replace(/^\s*/,""))}formatSubExpression(e){return new t({cfg:this.cfg,dialectCfg:this.dialectCfg,params:this.params,layout:this.layout,inline:this.inline}).format(e)}formatInlineExpression(e){let n=this.params.getPositionalParameterIndex();try{return new t({cfg:this.cfg,dialectCfg:this.dialectCfg,params:this.params,layout:new Zf(this.cfg.expressionWidth),inline:!0}).format(e)}catch(r){if(r instanceof tu){this.params.setPositionalParameterIndex(n);return}else throw r}}formatKeywordNode(e){switch(e.tokenType){case Y.RESERVED_JOIN:return this.formatJoin(e);case Y.AND:case Y.OR:case Y.XOR:return this.formatLogicalOperator(e);default:return this.formatKeyword(e)}}formatJoin(e){Xa(this.cfg)?(this.layout.indentation.decreaseTopLevel(),this.layout.add(W.NEWLINE,W.INDENT,this.showKw(e),W.SPACE),this.layout.indentation.increaseTopLevel()):this.layout.add(W.NEWLINE,W.INDENT,this.showKw(e),W.SPACE)}formatKeyword(e){this.layout.add(this.showKw(e),W.SPACE)}formatLogicalOperator(e){this.cfg.logicalOperatorNewline==="before"?Xa(this.cfg)?(this.layout.indentation.decreaseTopLevel(),this.layout.add(W.NEWLINE,W.INDENT,this.showKw(e),W.SPACE),this.layout.indentation.increaseTopLevel()):this.layout.add(W.NEWLINE,W.INDENT,this.showKw(e),W.SPACE):this.layout.add(this.showKw(e),W.NEWLINE,W.INDENT)}formatDataType(e){this.layout.add(this.showDataType(e),W.SPACE)}showKw(e){return b0(e.tokenType)?GA(this.showNonTabularKw(e),this.cfg.indentStyle):this.showNonTabularKw(e)}showNonTabularKw(e){switch(this.cfg.keywordCase){case"preserve":return Qc(e.raw);case"upper":return e.text;case"lower":return e.text.toLowerCase()}}showFunctionKw(e){return b0(e.tokenType)?GA(this.showNonTabularFunctionKw(e),this.cfg.indentStyle):this.showNonTabularFunctionKw(e)}showNonTabularFunctionKw(e){switch(this.cfg.functionCase){case"preserve":return Qc(e.raw);case"upper":return e.text;case"lower":return e.text.toLowerCase()}}showIdentifier(e){if(e.quoted)return e.text;switch(this.cfg.identifierCase){case"preserve":return e.text;case"upper":return e.text.toUpperCase();case"lower":return e.text.toLowerCase()}}showDataType(e){switch(this.cfg.dataTypeCase){case"preserve":return Qc(e.raw);case"upper":return e.text;case"lower":return e.text.toLowerCase()}}}});var tE,J8=G(()=>{_0();M8();X8();K8();HA();w0();tE=class{constructor(e,n){this.dialect=e,this.cfg=n,this.params=new Qf(this.cfg.params)}format(e){let n=this.parse(e);return this.formatAst(n).trimEnd()}parse(e){return q8(this.dialect.tokenizer).parse(e,this.cfg.paramTypes||{})}formatAst(e){return e.map(n=>this.formatStatement(n)).join(`
`.repeat(this.cfg.linesBetweenQueries+1))}formatStatement(e){let n=new eE({cfg:this.cfg,dialectCfg:this.dialect.formatOptions,params:this.params,layout:new Ka(new Ja(v8(this.cfg)))}).format(e.children);return e.hasSemicolon&&(this.cfg.newlineBeforeSemicolon?n.add(W.NEWLINE,";"):n.add(W.NO_NEWLINE,";")),n.toString()}}});function Q8(t){let e=["multilineLists","newlineBeforeOpenParen","newlineBeforeCloseParen","aliasAs","commaPosition","tabulateAlias"];for(let n of e)if(n in t)throw new Bs(`${n} config is no more supported.`);if(t.expressionWidth<=0)throw new Bs(`expressionWidth config must be positive number. Received ${t.expressionWidth} instead.`);if(t.params&&!fxe(t.params)&&console.warn('WARNING: All "params" option values should be strings.'),t.paramTypes&&!Exe(t.paramTypes))throw new Bs("Empty regex given in custom paramTypes. That would result in matching infinite amount of parameters.");return t}function fxe(t){return(t instanceof Array?t:Object.values(t)).every(n=>typeof n=="string")}function Exe(t){return t.custom&&Array.isArray(t.custom)?t.custom.every(e=>e.regex!==""):!0}var Bs,L0=G(()=>{Bs=class extends Error{}});var hxe,Z8,D0,pxe,eJ,P0,tJ=G(()=>{R8();x8();J8();L0();hxe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},Z8={bigquery:"bigquery",db2:"db2",db2i:"db2i",duckdb:"duckdb",hive:"hive",mariadb:"mariadb",mysql:"mysql",n1ql:"n1ql",plsql:"plsql",postgresql:"postgresql",redshift:"redshift",spark:"spark",sqlite:"sqlite",sql:"sql",tidb:"tidb",trino:"trino",transactsql:"transactsql",tsql:"transactsql",singlestoredb:"singlestoredb",snowflake:"snowflake"},D0=Object.keys(Z8),pxe={tabWidth:2,useTabs:!1,keywordCase:"preserve",identifierCase:"preserve",dataTypeCase:"preserve",functionCase:"preserve",indentStyle:"standard",logicalOperatorNewline:"before",expressionWidth:50,linesBetweenQueries:1,denseOperators:!1,newlineBeforeSemicolon:!1},eJ=(t,e={})=>{if(typeof e.language=="string"&&!D0.includes(e.language))throw new Bs(`Unsupported SQL dialect: ${e.language}`);let n=Z8[e.language||"sql"];return P0(t,Object.assign(Object.assign({},e),{dialect:h0[n]}))},P0=(t,e)=>{var{dialect:n}=e,r=hxe(e,["dialect"]);if(typeof t!="string")throw new Error("Invalid query argument. Expected string, instead got "+typeof t);let i=Q8(Object.assign(Object.assign({},pxe),r));return new tE(P8(n),i).format(t)}});var nJ={};Pt(nJ,{ConfigError:()=>Bs,bigquery:()=>hA,db2:()=>pA,db2i:()=>TA,duckdb:()=>SA,expandPhrases:()=>v,format:()=>eJ,formatDialect:()=>P0,hive:()=>RA,mariadb:()=>AA,mysql:()=>mA,n1ql:()=>IA,plsql:()=>_A,postgresql:()=>NA,redshift:()=>OA,singlestoredb:()=>DA,snowflake:()=>PA,spark:()=>CA,sql:()=>yA,sqlite:()=>bA,supportedDialects:()=>D0,tidb:()=>gA,transactsql:()=>LA,trino:()=>wA});var rJ=G(()=>{tJ();qt();L0();Pw();vw();Uw();Fw();Gw();kw();Yw();qw();Xw();jw();Jw();Zw();t0();r0();s0();a0();c0();d0();E0()});var lJ={};Pt(lJ,{ExplainPlanView:()=>x0,parseExplainOutput:()=>Txe});function Txe(t){let e=t.split(`
`).filter(d=>d.trim()),n=t.includes("QUERY VERBOSE PLAN:")||t.includes("Node 1."),r=e.map(d=>d.replace(/^NOTICE:\s*/i,"").trim()).filter(d=>d&&!d.startsWith("QUERY PLAN")&&!d.startsWith("QUERY VERBOSE")),i=[],s=[],o=0,a=0,l=r.findIndex(d=>d.includes("PLANTEXT:")),c=l>=0?r.slice(l+1).filter(d=>!d.startsWith("(")&&!d.includes("locus=")):r,u=[];for(let d of c){if(!d.trim()||d.startsWith("(xpath_")||d.includes("locus="))continue;let E=d.match(/^(\s*)/)?.[1]?.length||0,f=Math.floor(E/3),p=d.match(/^[\s]*(?:[lr]:\s*)?([\w\s-]+?)(?:\s+table\s+"(\w+)")?(?:\s+{[^}]*})?\s*\(cost=([\d.]+)\.\.([\d.]+)\s+rows=(\d+)\s+width=(\d+)\s+conf=([\d.]+)\)/i);if(p){let[,h,T,S,A,R,m,N]=p,L=h.trim(),I={id:++o,type:L,table:T,cost:{start:parseFloat(S),end:parseFloat(A)},rows:parseInt(R),width:parseInt(m),confidence:parseFloat(N),indent:f,children:[],raw:d.trim(),warnings:[]};for(Sxe(I),s.push(...I.warnings),I.cost.end>a&&(a=I.cost.end);u.length>0&&u[u.length-1].indent>=f;)u.pop();u.length>0?u[u.length-1].children.push(I):i.push(I),u.push(I)}}return{nodes:i,rawText:t,isVerbose:n,totalCost:a,warnings:s}}function Sxe(t){t.type.includes("Sequential Scan")&&t.rows>5e5&&t.warnings.push({type:"warning",message:`Sequential Scan on ${t.table||"table"} (${t.rows.toLocaleString()} rows) - consider adding an index`,icon:"\u26A0\uFE0F"}),t.type.includes("Nested Loop")&&t.rows>1e5&&t.warnings.push({type:"critical",message:`Nested Loop producing ${t.rows.toLocaleString()} rows - potential performance issue`,icon:"\u{1F534}"}),t.cost.end>1e10?t.warnings.push({type:"critical",message:`Very high estimated cost: ${t.cost.end.toExponential(2)}`,icon:"\u{1F534}"}):t.cost.end>1e7&&t.warnings.push({type:"warning",message:`High estimated cost: ${t.cost.end.toLocaleString()}`,icon:"\u26A0\uFE0F"}),t.confidence===0&&t.warnings.push({type:"info",message:"Low confidence estimate (conf=0) - statistics may be outdated",icon:"\u2139\uFE0F"})}function Rxe(t){return t.includes("Sequential Scan")?"#e74c3c":t.includes("Index Scan")?"#27ae60":t.includes("Nested Loop")?"#e67e22":t.includes("Hash Join")?"#3498db":t.includes("Merge Join")?"#9b59b6":t.includes("Aggregate")?"#1abc9c":t.includes("Group")?"#16a085":t.includes("Sort")?"#f39c12":t.includes("Limit")?"#95a5a6":t.includes("Sub-query")?"#34495e":"#7f8c8d"}function oJ(t,e=0){return t.map(n=>{let r=n.children.length>0,i=Rxe(n.type),s=n.warnings.map(o=>`<span class="warning-badge warning-${o.type}" title="${o.message}">${o.icon}</span>`).join("");return`
        <div class="plan-node" style="--node-color: ${i}">
            <div class="node-header">
                ${r?'<span class="toggle-btn">\u25BC</span>':'<span class="toggle-spacer"></span>'}
                <span class="node-type" style="background-color: ${i}">${n.type}</span>
                ${n.table?`<span class="node-table">${n.table}${n.alias?` (${n.alias})`:""}</span>`:""}
                ${s}
            </div>
            <div class="node-metrics">
                <span class="metric"><b>Cost:</b> ${iJ(n.cost.start)}..${iJ(n.cost.end)}</span>
                <span class="metric"><b>Rows:</b> ${n.rows.toLocaleString()}</span>
                <span class="metric"><b>Width:</b> ${n.width}</span>
                <span class="metric ${n.confidence===0?"low-conf":""}"><b>Conf:</b> ${n.confidence}%</span>
            </div>
            ${r?`<div class="node-children">${oJ(n.children,e+1)}</div>`:""}
        </div>`}).join("")}function iJ(t){return t>1e6?t.toExponential(1):t.toLocaleString(void 0,{maximumFractionDigits:1})}function aJ(t){return t.reduce((e,n)=>e+1+aJ(n.children),0)}function sJ(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function Axe(){let t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let n=0;n<32;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}var Vr,x0,cJ=G(()=>{"use strict";Vr=j(require("vscode"));x0=class t{constructor(e,n,r,i){this._disposables=[];this._panel=e,this._extensionUri=n,this._update(r,i),this._panel.onDidDispose(()=>this.dispose(),null,this._disposables),this._panel.webview.onDidReceiveMessage(s=>{switch(s.command){case"copyPlan":Vr.env.clipboard.writeText(r.rawText),Vr.window.showInformationMessage("Plan copied to clipboard");return}},null,this._disposables)}static{this.viewType="netezza.explainPlan"}static createOrShow(e,n,r){let i=Vr.window.activeTextEditor?Vr.ViewColumn.Beside:void 0,s=Vr.window.createWebviewPanel(t.viewType,"Query Execution Plan",i||Vr.ViewColumn.One,{enableScripts:!0,localResourceRoots:[Vr.Uri.joinPath(e,"media")],retainContextWhenHidden:!0});new t(s,e,n,r)}dispose(){for(this._panel.dispose();this._disposables.length;){let e=this._disposables.pop();e&&e.dispose()}}_update(e,n){this._panel.title="Query Execution Plan",this._panel.webview.html=this._getHtmlForWebview(e,n)}_getHtmlForWebview(e,n){let r=this._panel.webview.asWebviewUri(Vr.Uri.joinPath(this._extensionUri,"media","explainPlan.css")),i=Axe(),s=sJ(n);return`<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Security-Policy" content="default-src 'none'; style-src ${this._panel.webview.cspSource} 'unsafe-inline'; script-src 'nonce-${i}';">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="${r}" rel="stylesheet">
    <title>Query Execution Plan</title>
</head>
<body>
    <div class="container">
        <div class="header">
            <h2>Query Execution Plan</h2>
            <div class="header-actions">
                <button id="copyBtn" class="btn">\u{1F4CB} Copy Plan</button>
                <button id="expandAllBtn" class="btn">\u2795 Expand All</button>
                <button id="collapseAllBtn" class="btn">\u2796 Collapse All</button>
            </div>
        </div>

        ${e.warnings.length>0?`
        <div class="warnings-summary">
            <h3>\u26A0\uFE0F Performance Issues Detected (${e.warnings.length})</h3>
            <ul>
                ${e.warnings.map(o=>`<li class="warning-${o.type}">${o.icon} ${o.message}</li>`).join("")}
            </ul>
        </div>
        `:`
        <div class="no-warnings">
            <span>\u2705 No obvious performance issues detected</span>
        </div>
        `}

        <div class="stats-bar">
            <div class="stat">
                <span class="stat-label">Total Cost:</span>
                <span class="stat-value">${e.totalCost>1e6?e.totalCost.toExponential(2):e.totalCost.toLocaleString()}</span>
            </div>
            <div class="stat">
                <span class="stat-label">Nodes:</span>
                <span class="stat-value">${aJ(e.nodes)}</span>
            </div>
        </div>

        <div class="query-section">
            <h3>Query</h3>
            <pre class="query-text">${s}</pre>
        </div>

        <div class="plan-section">
            <h3>Execution Plan</h3>
            <div id="planTree" class="plan-tree">
                ${oJ(e.nodes)}
            </div>
        </div>

        <div class="raw-section">
            <details>
                <summary>Raw Plan Output</summary>
                <pre class="raw-plan">${sJ(e.rawText)}</pre>
            </details>
        </div>
    </div>

    <script nonce="${i}">
        const vscode = acquireVsCodeApi();
        
        document.getElementById('copyBtn').addEventListener('click', () => {
            vscode.postMessage({ command: 'copyPlan' });
        });

        document.getElementById('expandAllBtn').addEventListener('click', () => {
            document.querySelectorAll('.node-children').forEach(el => el.style.display = 'block');
            document.querySelectorAll('.toggle-btn').forEach(el => el.textContent = '\u25BC');
        });

        document.getElementById('collapseAllBtn').addEventListener('click', () => {
            document.querySelectorAll('.node-children').forEach(el => el.style.display = 'none');
            document.querySelectorAll('.toggle-btn').forEach(el => el.textContent = '\u25B6');
        });

        document.querySelectorAll('.toggle-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                const node = e.target.closest('.plan-node');
                const children = node.querySelector('.node-children');
                if (children) {
                    const isHidden = children.style.display === 'none';
                    children.style.display = isHidden ? 'block' : 'none';
                    e.target.textContent = isHidden ? '\u25BC' : '\u25B6';
                }
            });
        });
    </script>
</body>
</html>`}}});var Oxe={};Pt(Oxe,{activate:()=>_xe,deactivate:()=>Nxe});module.exports=Lo(Oxe);var V=j(require("vscode"));bn();hm();var Er=j(require("vscode")),HE=class t{constructor(e,n,r){this.extensionUri=n;this.connectionManager=r;this._disposables=[];this._panel=e,this._panel.onDidDispose(()=>this.dispose(),null,this._disposables),this._panel.webview.html=this._getHtmlForWebview(this._panel.webview),this._panel.webview.onDidReceiveMessage(async i=>{switch(i.command){case"save":try{await this.connectionManager.saveConnection(i.data),Er.window.showInformationMessage(`Connection '${i.data.name}' saved and activated!`),this.sendConnectionsToWebview()}catch(s){let o=s instanceof Error?s.message:String(s);Er.window.showErrorMessage(`Error saving: ${o}`)}return;case"delete":try{await Er.window.showWarningMessage(`Are you sure you want to delete '${i.name}'?`,{modal:!0},"Yes","No")==="Yes"&&(await this.connectionManager.deleteConnection(i.name),Er.window.showInformationMessage(`Connection '${i.name}' deleted.`),this.sendConnectionsToWebview())}catch(s){let o=s instanceof Error?s.message:String(s);Er.window.showErrorMessage(`Error deleting: ${o}`)}return;case"loadConnections":this.sendConnectionsToWebview();return}},null,this._disposables)}async sendConnectionsToWebview(){let e=await this.connectionManager.getConnections(),n=this.connectionManager.getActiveConnectionName();await this._panel.webview.postMessage({command:"updateConnections",connections:e,activeName:n})}static createOrShow(e,n){let r=Er.window.activeTextEditor?Er.window.activeTextEditor.viewColumn:void 0;if(t.currentPanel){t.currentPanel._panel.reveal(r);return}let i=Er.window.createWebviewPanel("netezzaLogin","Connect to Netezza",r||Er.ViewColumn.One,{enableScripts:!0,retainContextWhenHidden:!0});t.currentPanel=new t(i,e,n)}dispose(){for(t.currentPanel=void 0,this._panel.dispose();this._disposables.length;){let e=this._disposables.pop();e&&e.dispose()}}_getHtmlForWebview(e){let n=e.asWebviewUri(Er.Uri.joinPath(this.extensionUri,"netezza_icon64.png"));return`<!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>Connect to Netezza</title>
            <style>
                :root {
                    --container-paddding: 20px;
                    --input-padding-vertical: 6px;
                    --input-padding-horizontal: 8px;
                    --input-margin-vertical: 4px;
                    --input-margin-horizontal: 0;
                }
                body {
                    font-family: var(--vscode-font-family);
                    padding: 0;
                    margin: 0;
                    color: var(--vscode-foreground);
                    background-color: var(--vscode-editor-background);
                    display: flex;
                    height: 100vh;
                    overflow: hidden;
                }
                
                /* Sidebar */
                .sidebar {
                    width: 260px;
                    background-color: var(--vscode-sideBar-background);
                    border-right: 1px solid var(--vscode-panel-border);
                    display: flex;
                    flex-direction: column;
                    flex-shrink: 0;
                    user-select: none;
                }
                .sidebar-header {
                    padding: 10px 15px;
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    border-bottom: 1px solid var(--vscode-panel-border);
                    background-color: var(--vscode-sideBarSectionHeader-background);
                }
                .sidebar-title {
                    font-weight: bold;
                    font-size: 11px;
                    text-transform: uppercase;
                    color: var(--vscode-sideBarTitle-foreground);
                }
                .connection-list {
                    flex: 1;
                    overflow-y: auto;
                    padding: 0;
                }
                .connection-item {
                    padding: 8px 15px;
                    cursor: pointer;
                    display: flex;
                    align-items: center;
                    border-left: 3px solid transparent;
                    color: var(--vscode-sideBar-foreground);
                }
                .connection-item:hover {
                    background-color: var(--vscode-list-hoverBackground);
                }
                .connection-item.active {
                    background-color: var(--vscode-list-activeSelectionBackground);
                    color: var(--vscode-list-activeSelectionForeground);
                    border-left-color: var(--vscode-focusBorder);
                }
                .connection-item .name {
                    flex: 1;
                    overflow: hidden;
                    text-overflow: ellipsis;
                    white-space: nowrap;
                    display: flex;
                    align-items: center;
                    gap: 8px;
                }
                .connection-item .status {
                    font-size: 0.8em;
                    margin-left: 5px;
                    opacity: 0.7;
                }

                /* Main Content */
                .main {
                    flex: 1;
                    padding: 40px;
                    overflow-y: auto;
                    display: flex;
                    justify-content: center;
                    align-items: flex-start;
                }
                .form-container {
                    width: 100%;
                    max-width: 500px;
                    background-color: var(--vscode-editorWidget-background);
                    border: 1px solid var(--vscode-widget-border);
                    padding: 30px;
                    border-radius: 4px;
                    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
                }
                
                h2 {
                    margin-top: 0;
                    margin-bottom: 25px;
                    font-size: 1.4em;
                    font-weight: 500;
                    padding-bottom: 10px;
                    border-bottom: 1px solid var(--vscode-panel-border);
                    display: flex;
                    align-items: center;
                    gap: 10px;
                }

                .form-group {
                    margin-bottom: 18px;
                }
                .form-row {
                    display: flex;
                    gap: 15px;
                }
                .form-col {
                    flex: 1;
                }

                label {
                    display: block;
                    margin-bottom: 6px;
                    font-weight: 600;
                    font-size: 12px;
                    color: var(--vscode-input-placeholderForeground);
                    display: flex;
                    align-items: center;
                    gap: 6px;
                }

                input, select {
                    width: 100%;
                    padding: 8px 10px;
                    box-sizing: border-box;
                    background: var(--vscode-input-background);
                    color: var(--vscode-input-foreground);
                    border: 1px solid var(--vscode-input-border);
                    border-radius: 2px;
                    font-family: inherit;
                    font-size: 13px;
                }
                input:focus, select:focus {
                    border-color: var(--vscode-focusBorder);
                    outline: 1px solid var(--vscode-focusBorder);
                }
                
                /* Buttons */
                .actions {
                    margin-top: 30px;
                    display: flex;
                    gap: 12px;
                    padding-top: 20px;
                    border-top: 1px solid var(--vscode-panel-border);
                }
                button {
                    background: var(--vscode-button-background);
                    color: var(--vscode-button-foreground);
                    padding: 8px 16px;
                    border: none;
                    cursor: pointer;
                    border-radius: 2px;
                    font-size: 13px;
                    font-weight: 500;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                }
                button:hover {
                    background: var(--vscode-button-hoverBackground);
                }
                button.secondary {
                    background: var(--vscode-button-secondaryBackground);
                    color: var(--vscode-button-secondaryForeground);
                }
                button.secondary:hover {
                    background: var(--vscode-button-secondaryHoverBackground);
                }
                button.danger {
                    background: var(--vscode-errorForeground);
                    color: white;
                }
                button.icon-btn {
                    padding: 4px;
                    background: transparent;
                    color: var(--vscode-icon-foreground);
                }
                button.icon-btn:hover {
                    background: var(--vscode-toolbar-hoverBackground);
                }

                .icon-img {
                    width: 16px;
                    height: 16px;
                    object-fit: contain;
                }
                .logo-header {
                    width: 32px;
                    height: 32px;
                    margin-right: 10px;
                }

            </style>
        </head>
        <body>
            <div class="sidebar">
                <div class="sidebar-header">
                    <span class="sidebar-title">Saved Connections</span>
                    <button class="icon-btn" id="btnNew" title="New Connection">
                        <svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M14 7v1H8v6H7V8H1V7h6V1h1v6h6z"/></svg>
                    </button>
                </div>
                <div id="connectionList" class="connection-list"></div>
            </div>
            
            <div class="main">
                <div class="form-container">
                    <h2 id="formTitle">
                        <img src="${n}" class="logo-header" />
                        New Connection
                    </h2>
                    
                    <div class="form-group">
                        <label for="name">Connection Name</label>
                        <input type="text" id="name" placeholder="Friendly name (e.g. Production)">
                    </div>

                    <div class="form-group">
                        <label for="dbType">
                            Database Type 
                            <img src="${n}" class="icon-img" />
                        </label>
                        <select id="dbType">
                            <option value="NetezzaSQL">NetezzaSQL</option>
                        </select>
                    </div>

                    <div class="form-row">
                        <div class="form-col">
                            <div class="form-group">
                                <label for="host">Host</label>
                                <input type="text" id="host" placeholder="Hostname or IP">
                            </div>
                        </div>
                        <div class="form-col" style="flex: 0 0 80px;">
                            <div class="form-group">
                                <label for="port">Port</label>
                                <input type="number" id="port" value="5480">
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="database">
                            Database
                        </label>
                        <input type="text" id="database" placeholder="Database name" value="system">
                    </div>

                    <div class="form-row">
                         <div class="form-col">
                            <div class="form-group">
                                <label for="user">User</label>
                                <input type="text" id="user" placeholder="Username">
                            </div>
                         </div>
                         <div class="form-col">
                            <div class="form-group">
                                <label for="password">Password</label>
                                <input type="password" id="password" placeholder="Password">
                            </div>
                         </div>
                    </div>
                    
                    <div class="actions">
                        <button id="btnSave" onclick="save()">Save & Connect</button>
                        <button id="btnDelete" class="danger" onclick="del()" style="display: none;">Delete</button>
                    </div>
                </div>
            </div>

            <script>
                const vscode = acquireVsCodeApi();
                let connections = [];
                let activeName = null;
                let currentEditName = null;
                const iconSrc = "${n}";

                // Load initial data
                window.addEventListener('message', event => {
                    const message = event.data;
                    switch (message.command) {
                        case 'updateConnections':
                            connections = message.connections;
                            activeName = message.activeName;
                            renderList();
                            break;
                    }
                });
                
                vscode.postMessage({ command: 'loadConnections' });

                document.getElementById('btnNew').addEventListener('click', () => {
                    clearForm();
                });

                function renderList() {
                    const list = document.getElementById('connectionList');
                    list.innerHTML = '';
                    
                    connections.forEach(conn => {
                        const div = document.createElement('div');
                        div.className = 'connection-item';
                        if (conn.name === currentEditName) {
                             div.classList.add('active');
                        }
                        
                        div.innerHTML = \`<span class="name"><img src="\${iconSrc}" class="icon-img"> \${conn.name}</span>\`;
                        if (conn.name === activeName) {
                            div.innerHTML += \`<span class="status">\u25CF</span>\`;
                            div.title = 'Active Connection';
                        }
                        
                        div.onclick = () => loadForm(conn);
                        list.appendChild(div);
                    });
                }

                function loadForm(conn) {
                    currentEditName = conn.name;
                    document.getElementById('formTitle').innerHTML = \`<img src="\${iconSrc}" class="logo-header" /> Edit Connection\`;
                    document.getElementById('name').value = conn.name;
                    document.getElementById('dbType').value = conn.dbType || 'NetezzaSQL';
                    document.getElementById('host').value = conn.host;
                    document.getElementById('port').value = conn.port;
                    document.getElementById('database').value = conn.database;
                    document.getElementById('user').value = conn.user;
                    document.getElementById('password').value = conn.password || ''; 
                    
                    document.getElementById('btnDelete').style.display = 'block';
                    renderList();
                }

                function clearForm() {
                    currentEditName = null;
                    document.getElementById('formTitle').innerHTML = \`<img src="\${iconSrc}" class="logo-header" /> New Connection\`;
                    document.getElementById('name').value = '';
                    document.getElementById('dbType').value = 'NetezzaSQL';
                    document.getElementById('host').value = '';
                    document.getElementById('port').value = '5480';
                    document.getElementById('database').value = 'system';
                    document.getElementById('user').value = '';
                    document.getElementById('password').value = '';
                    
                    document.getElementById('btnDelete').style.display = 'none';
                    renderList();
                }

                function save() {
                    const name = document.getElementById('name').value;
                    if (!name) {
                        return; // Add validation UI?
                    }
                    
                    const data = {
                        name: name,
                        dbType: document.getElementById('dbType').value,
                        host: document.getElementById('host').value,
                        port: parseInt(document.getElementById('port').value),
                        database: document.getElementById('database').value,
                        user: document.getElementById('user').value,
                        password: document.getElementById('password').value
                    };
                    
                    vscode.postMessage({
                        command: 'save',
                        data: data
                    });
                }

                function del() {
                    if (currentEditName) {
                        vscode.postMessage({
                            command: 'delete',
                            name: currentEditName
                        });
                    }
                }
            </script>
        </body>
        </html>`}};var Ie=j(require("vscode"));bn();bn();function kQ(t,e,n){return`SELECT description FROM ${t}.._v_object_data WHERE objtype='TABLE' AND objname='${n}' AND schema='${e}'`}function Tu(t,e,n){return`
        SELECT 
            X.ATTNAME
            , X.FORMAT_TYPE
            , CASE WHEN X.ATTNOTNULL THEN 1 ELSE 0 END AS IS_NOT_NULL
            , X.COLDEFAULT
            , COALESCE(X.DESCRIPTION, '') AS DESCRIPTION
            , MAX(CASE WHEN K.CONTYPE = 'p' THEN 1 ELSE 0 END) AS IS_PK
            , MAX(CASE WHEN K.CONTYPE = 'f' THEN 1 ELSE 0 END) AS IS_FK
        FROM
            ${t}.._V_RELATION_COLUMN X
        INNER JOIN
            ${t}.._V_OBJECT_DATA O ON X.OBJID = O.OBJID
        LEFT JOIN
            ${t}.._V_RELATION_KEYDATA K 
            ON UPPER(K.RELATION) = UPPER(O.OBJNAME) 
            AND UPPER(K.SCHEMA) = UPPER(O.SCHEMA)
            AND UPPER(K.ATTNAME) = UPPER(X.ATTNAME)
            AND K.CONTYPE IN ('p', 'f')
        WHERE
            UPPER(O.OBJNAME) = UPPER('${n}')
            AND UPPER(O.DBNAME) = UPPER('${t}')
            AND UPPER(O.SCHEMA) = UPPER('${e}')
        GROUP BY 
            X.ATTNAME, X.FORMAT_TYPE, X.ATTNOTNULL, X.COLDEFAULT, X.DESCRIPTION, X.ATTNUM
        ORDER BY 
            X.ATTNUM
    `}function WQ(t){let e=!1,n=t.IS_NOT_NULL;return typeof n=="boolean"?e=n:typeof n=="number"?e=n===1:typeof n=="string"&&(e=n==="1"||n.toLowerCase()==="true"||n.toLowerCase()==="t"),{attname:t.ATTNAME,formatType:t.FORMAT_TYPE,isNotNull:e,colDefault:t.COLDEFAULT||null,description:t.DESCRIPTION||"",isPk:Number(t.IS_PK)===1,isFk:Number(t.IS_FK)===1}}function YQ(t){if(!t)return null;let e=ge(t);return e.length>0&&e[0].DESCRIPTION?e[0].DESCRIPTION:null}function Su(t){if(!t)return[];try{return ge(t).map(WQ)}catch(e){return console.error("[TableMetadataProvider] Error parsing column metadata:",e),[]}}async function fD(t,e,n,r){let i=kQ(e,n,r),s=Tu(e,n,r),[o,a]=await Promise.all([t(i),t(s)]);return{tableComment:YQ(o),columns:Su(a)}}function ED(t){return t.map(e=>({ATTNAME:e.attname,FORMAT_TYPE:e.formatType,IS_NOT_NULL:e.isNotNull?1:0,COLDEFAULT:e.colDefault,DESCRIPTION:e.description,IS_PK:e.isPk?1:0,IS_FK:e.isFk?1:0}))}Nu();var $E=class{constructor(e,n,r){this.context=e;this.connectionManager=n;this.metadataCache=r;this._onDidChangeTreeData=new Ie.EventEmitter;this.onDidChangeTreeData=this._onDidChangeTreeData.event;this.connectionManager.onDidChangeConnections(()=>this.refresh())}refresh(){this._onDidChangeTreeData.fire()}triggerDatabasePrefetch(e,n){this.metadataCache.hasConnectionPrefetchTriggered(e)||(console.log(`[SchemaProvider] Triggering connection prefetch for: ${e}`),this.metadataCache.triggerConnectionPrefetch(e,async r=>{try{return await Ee(this.context,r,!0,this.connectionManager,e)}catch(i){console.error("[SchemaProvider] Prefetch query error:",i);return}}))}getTreeItem(e){return e}getParent(e){if(e.contextValue!=="serverInstance"){if(e.contextValue==="database")return new hn(e.connectionName,Ie.TreeItemCollapsibleState.Collapsed,"serverInstance",void 0,void 0,void 0,void 0,void 0,e.connectionName,void 0);if(e.contextValue.startsWith("typeGroup"))return new hn(e.dbName,Ie.TreeItemCollapsibleState.Collapsed,"database",e.dbName,void 0,void 0,void 0,void 0,e.connectionName);if(e.contextValue.startsWith("netezza:"))return new hn(e.objType,Ie.TreeItemCollapsibleState.Collapsed,`typeGroup:${e.objType}`,e.dbName,e.objType,void 0,void 0,void 0,e.connectionName)}}async getChildren(e){if(e){if(e.contextValue==="serverInstance"){if(!e.connectionName)return[];let n=this.metadataCache.getDatabases(e.connectionName);if(n)return n.map(r=>new hn(r.label||r.DATABASE,Ie.TreeItemCollapsibleState.Collapsed,"database",r.label||r.DATABASE,void 0,void 0,void 0,void 0,e.connectionName));try{let r=await Ee(this.context,Qe.LIST_DATABASES,!0,this.connectionManager,e.connectionName);if(!r)return[];let i=ge(r),s=i.map(o=>({DATABASE:o.DATABASE,label:o.DATABASE,kind:9,detail:"Database"}));return this.metadataCache.setDatabases(e.connectionName,s),i.map(o=>new hn(o.DATABASE,Ie.TreeItemCollapsibleState.Collapsed,"database",o.DATABASE,void 0,void 0,void 0,void 0,e.connectionName))}catch(r){let i=r instanceof Error?r.message:String(r);return Ie.window.showErrorMessage(`Failed to load databases for ${e.connectionName}: ${i}`),[]}}else if(e.contextValue==="database"){if(e.connectionName&&e.dbName&&this.triggerDatabasePrefetch(e.connectionName,e.dbName),e.connectionName&&e.dbName){let n=this.metadataCache.getTypeGroups(e.connectionName,e.dbName);if(n&&n.length>0)return n.map(r=>new hn(r,Ie.TreeItemCollapsibleState.Collapsed,`typeGroup:${r}`,e.dbName,r,void 0,void 0,void 0,e.connectionName))}try{let n=`SELECT DISTINCT OBJTYPE FROM ${e.dbName}..${te.OBJECT_DATA} WHERE DBNAME = '${e.dbName}' ORDER BY OBJTYPE`,r=await Ee(this.context,n,!0,this.connectionManager,e.connectionName),i=r?ge(r):[];if(e.connectionName&&e.dbName){let s=i.map(o=>o.OBJTYPE);this.metadataCache.setTypeGroups(e.connectionName,e.dbName,s)}return i.map(s=>new hn(s.OBJTYPE,Ie.TreeItemCollapsibleState.Collapsed,`typeGroup:${s.OBJTYPE}`,e.dbName,s.OBJTYPE,void 0,void 0,void 0,e.connectionName))}catch(n){let r=n instanceof Error?n.message:String(n);return Ie.window.showErrorMessage("Failed to load object types: "+r),[]}}else if(e.contextValue.startsWith("typeGroup")){if(e.connectionName&&e.dbName&&(e.objType==="TABLE"||e.objType==="VIEW"||e.objType==="EXTERNAL TABLE")){let n=this.metadataCache.getObjectsWithSchema(e.connectionName,e.dbName);if(n&&n.length>0){let r=e.objType,i=n.filter(s=>{let o=s.item;return o.objType?o.objType===r:r==="VIEW"?o.kind===18:r==="TABLE"?o.kind!==18&&o.detail!=="EXTERNAL TABLE":r==="EXTERNAL TABLE"?o.detail==="EXTERNAL TABLE"||o.detail?.startsWith("EXTERNAL TABLE"):!1});if(i.length>0)return i.map(s=>{let o=s.item;return new hn(typeof o.label=="string"?o.label:o.label?.label||"unknown",Ie.TreeItemCollapsibleState.Collapsed,`netezza:${e.objType}`,e.dbName,e.objType,s.schema,s.objId,s.description,e.connectionName,void 0,void 0,void 0,void 0,s.owner)})}}try{let n;e.objType==="PROCEDURE"?n=`SELECT PROCEDURESIGNATURE AS OBJNAME, SCHEMA, OBJID::INT AS OBJID, COALESCE(DESCRIPTION, '') AS DESCRIPTION, OWNER FROM ${e.dbName}.._V_PROCEDURE WHERE DATABASE = '${e.dbName}' ORDER BY PROCEDURESIGNATURE`:n=`SELECT OBJNAME, SCHEMA, OBJID, COALESCE(DESCRIPTION, '') AS DESCRIPTION, OWNER FROM ${e.dbName}.._V_OBJECT_DATA WHERE DBNAME = '${e.dbName}' AND OBJTYPE = '${e.objType}' ORDER BY OBJNAME`;let r=await Ee(this.context,n,!0,this.connectionManager,e.connectionName),i=r?ge(r):[];if(e.connectionName&&e.dbName&&(e.objType==="TABLE"||e.objType==="VIEW")){let s=new Map;for(let o of i){let a=o.SCHEMA?`${e.dbName}.${o.SCHEMA}`:`${e.dbName}..`;s.has(a)||s.set(a,{tables:[],idMap:new Map});let l=s.get(a);l.tables.push({label:o.OBJNAME,kind:e.objType==="VIEW"?18:7,detail:o.SCHEMA?e.objType:`${e.objType} (${o.SCHEMA})`,sortText:o.OBJNAME});let c=o.SCHEMA?`${e.dbName}.${o.SCHEMA}.${o.OBJNAME}`:`${e.dbName}..${o.OBJNAME}`;o.OBJID!==void 0&&l.idMap.set(c,o.OBJID)}}return i.map(s=>{let a=["TABLE","VIEW","EXTERNAL TABLE","SYSTEM VIEW","SYSTEM TABLE"].includes(e.objType||"");return new hn(s.OBJNAME,a?Ie.TreeItemCollapsibleState.Collapsed:Ie.TreeItemCollapsibleState.None,`netezza:${e.objType}`,e.dbName,e.objType,s.SCHEMA,s.OBJID,s.DESCRIPTION,e.connectionName,void 0,void 0,void 0,void 0,s.OWNER)})}catch(n){let r=n instanceof Error?n.message:String(n);return Ie.window.showErrorMessage("Failed to load objects: "+r),[]}}else if(e.contextValue.startsWith("netezza:")){let n=e.label,r=e.schema,i=e.dbName;if(e.connectionName&&i){let s=`${i}.${r||""}.${n}`,o=this.metadataCache.getColumns(e.connectionName,s);if(o&&o.length>0&&o[0].isPk!==void 0)return o.map(a=>new hn(a.detail?`${a.label||a.ATTNAME} (${a.detail})`:a.label||a.ATTNAME,Ie.TreeItemCollapsibleState.None,"column",e.dbName,void 0,void 0,void 0,a.documentation||"",e.connectionName,n,void 0,a.isPk,a.isFk))}if(!e.connectionName||!i)return[];try{let s=Tu(i,r||"",n),o=await Ee(this.context,s,!0,this.connectionManager,e.connectionName),a=Su(o),l=`${i}.${r||""}.${n}`,c=a.map(u=>({ATTNAME:u.attname,FORMAT_TYPE:u.formatType,label:u.attname,kind:5,detail:u.formatType,documentation:u.description,isPk:u.isPk,isFk:u.isFk}));return this.metadataCache.setColumns(e.connectionName,l,c),a.map(u=>new hn(`${u.attname} (${u.formatType})`,Ie.TreeItemCollapsibleState.None,"column",e.dbName,void 0,void 0,void 0,u.description,e.connectionName,n,void 0,u.isPk,u.isFk))}catch(s){let o=s instanceof Error?s.message:String(s);return Ie.window.showErrorMessage("Failed to load columns: "+o),[]}}}else{let n=await this.connectionManager.getConnections(),r=Ie.Uri.file(this.context.asAbsolutePath("netezza_icon64.png"));return n.map(i=>new hn(i.name,Ie.TreeItemCollapsibleState.Collapsed,"serverInstance",void 0,void 0,void 0,void 0,void 0,i.name,void 0,r))}return[]}},hn=class extends Ie.TreeItem{constructor(n,r,i,s,o,a,l,c,u,d,E,f,p,h){super(n,r);this.label=n;this.collapsibleState=r;this.contextValue=i;this.dbName=s;this.objType=o;this.schema=a;this.objId=l;this.objectDescription=c;this.connectionName=u;this.parentName=d;this.isPk=f;this.isFk=p;this.owner=h;let T=this.label;u&&(T+=`
[Server: ${u}]`),c&&c.trim()&&(T+=`

${c.trim()}`),a&&i.startsWith("netezza:")&&(T+=`

Schema: ${a}`),h&&i.startsWith("netezza:")&&(T+=`
Owner: ${h}`),this.isPk&&(T+=`
\u{1F511} Primary Key`),this.isFk&&(T+=`
\u{1F517} Foreign Key`),this.tooltip=T,this.description=a?`(${a})`:"";let S=[u||"global",i,s||"",a||"",o||"",d||"",n,l?l.toString():""];this.id=S.join("|"),E?this.iconPath=E:i==="serverInstance"?this.iconPath=new Ie.ThemeIcon("server"):i==="database"?this.iconPath=new Ie.ThemeIcon("database"):i.startsWith("typeGroup")?this.iconPath=new Ie.ThemeIcon("folder"):i.startsWith("netezza:")?this.iconPath=this.getIconForType(o):i==="column"&&(this.isPk?this.iconPath=new Ie.ThemeIcon("key",new Ie.ThemeColor("charts.yellow")):this.isFk?this.iconPath=new Ie.ThemeIcon("link",new Ie.ThemeColor("charts.blue")):this.iconPath=new Ie.ThemeIcon("symbol-field"))}getIconForType(n){switch(n){case"TABLE":return new Ie.ThemeIcon("table");case"VIEW":return new Ie.ThemeIcon("eye");case"PROCEDURE":return new Ie.ThemeIcon("gear");case"FUNCTION":return new Ie.ThemeIcon("symbol-function");case"AGGREGATE":return new Ie.ThemeIcon("symbol-operator");case"EXTERNAL TABLE":return new Ie.ThemeIcon("server");default:return new Ie.ThemeIcon("file")}}};var Te=j(require("vscode")),jm=j(kD());var cr=j(require("vscode")),eh=class t{constructor(e,n,r){this._disposables=[];this._panel=e,this._extensionUri=n,this._update(r),this._panel.onDidDispose(()=>this.dispose(),null,this._disposables),this._panel.webview.onDidReceiveMessage(i=>{switch(i.command){case"alert":cr.window.showErrorMessage(i.text);return;case"info":cr.window.showInformationMessage(i.text);return}},null,this._disposables)}static{this.viewType="netezza.analysisPanel"}static createOrShow(e,n){let r=cr.window.activeTextEditor?cr.ViewColumn.Beside:void 0,i=cr.window.createWebviewPanel(t.viewType,"Data Analysis",r||cr.ViewColumn.One,{enableScripts:!0,localResourceRoots:[cr.Uri.joinPath(e,"media")],retainContextWhenHidden:!0});new t(i,e,n)}dispose(){for(this._panel.dispose();this._disposables.length;){let e=this._disposables.pop();e&&e.dispose()}}_update(e){let n=this._panel.webview;this._panel.title="Data Analysis",this._panel.webview.html=this._getHtmlForWebview(n,e)}_getHtmlForWebview(e,n){let r=cr.Uri.joinPath(this._extensionUri,"media","analysisPanel.js"),i=e.asWebviewUri(r),s=cr.Uri.joinPath(this._extensionUri,"media","analysisPanel.css"),o=e.asWebviewUri(s),a=e.asWebviewUri(cr.Uri.joinPath(this._extensionUri,"media","tanstack-table-core.js")),l=e.asWebviewUri(cr.Uri.joinPath(this._extensionUri,"media","tanstack-virtual-core.js")),c=B5();return`<!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <meta http-equiv="Content-Security-Policy" content="default-src 'none'; style-src ${e.cspSource} 'unsafe-inline'; script-src 'nonce-${c}'; font-src ${e.cspSource};">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <link href="${o}" rel="stylesheet">

            <title>Data Analysis</title>
        </head>
        <body>
            <div id="app">
                <div class="sidebar">
                    <div class="section">
                        <h3>Fields</h3>
                        <div id="fieldList" class="field-list"></div>
                    </div>
                </div>
                <div class="main-content">
                    <div class="filter-section" style="margin-bottom: 15px; display: flex; gap: 10px; align-items: center;">
                        <label for="dataFilter" style="font-weight: bold;">Filter:</label>
                        <input type="text" id="dataFilter" placeholder="Type to filter data..." style="flex: 1; padding: 6px 10px; background: var(--vscode-input-background); color: var(--vscode-input-foreground); border: 1px solid var(--vscode-input-border); border-radius: 4px;">
                        <button id="applyFilter" style="padding: 6px 12px; cursor: pointer;">Apply</button>
                        <button id="clearFilter" style="padding: 6px 12px; cursor: pointer;">Clear</button>
                    </div>
                    <div class="config-zones">
                        <div class="zone-container">
                            <h4>Rows</h4>
                            <div id="rowsZone" class="drop-zone" data-zone="rows"></div>
                        </div>
                        <div class="zone-container">
                            <h4>Columns</h4>
                            <div id="colsZone" class="drop-zone" data-zone="cols"></div>
                        </div>
                        <div class="zone-container">
                            <h4>Values</h4>
                            <div id="valuesZone" class="drop-zone" data-zone="values"></div>
                        </div>
                    </div>
                    <div class="pivot-grid-container">
                        <div id="pivotGrid"></div>
                    </div>
                    <div class="chart-container" style="margin-top: 20px;">
                        <div class="chart-header" style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                            <h4 style="margin: 0;">Chart</h4>
                            <select id="chartType" style="padding: 4px;">
                                <option value="bar">Bar Chart</option>
                                <option value="line">Line Chart</option>
                            </select>
                        </div>
                        <canvas id="pivotChart" width="600" height="300" style="background: var(--vscode-editor-background); border: 1px solid var(--vscode-panel-border); border-radius: 4px;"></canvas>
                    </div>
                </div>
            </div>
            
            <script nonce="${c}" src="${a}"></script>
            <script nonce="${c}" src="${l}"></script>
            <script nonce="${c}">
                // Pass initial data to the script
                window.initialData = ${JSON.stringify(n)};
                window.TableCore = TableCore;
                window.VirtualCore = VirtualCore;
            </script>
            <script nonce="${c}" src="${i}"></script>
        </body>
        </html>`}};function B5(){let t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let n=0;n<32;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}var th=class{constructor(e){this._cspSource=e}generateHtml(e){let n=this._getIcons();return`<!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <meta http-equiv="Content-Security-Policy" content="default-src 'none'; script-src ${this._cspSource} 'unsafe-inline'; worker-src ${this._cspSource} blob:; connect-src ${this._cspSource}; style-src ${this._cspSource} 'unsafe-inline';">
            <title>Query Results</title>
            <script src="${e.scriptUri}"></script>
            <script src="${e.virtualUri}"></script>
            <link rel="stylesheet" href="${e.styleUri}">
        </head>
        <body>
            <div id="sourceTabs" class="source-tabs"></div>
            <div id="resultSetTabs" class="result-set-tabs" style="display: none;"></div>
            
            <div id="loadingOverlay" class="loading-overlay">
                <div class="spinner"></div>
                <div class="executing-text">Executing SQL...</div>
                <button id="cancelQueryBtn" class="secondary" title="Cancel the current query">Cancel</button>
            </div>
            <div class="controls">
                <input type="text" id="globalFilter" class="global-filter-input" placeholder="Filter..." onkeyup="onFilterChanged()">
                <button onclick="toggleRowView()" title="Toggle Row View">${n.eye} Row View</button>
                
                <!-- Split Button for Export -->
                <div class="split-btn-container">
                    <button id="exportMainBtn" class="split-btn-main" onclick="executeSplitExport()" title="Export results (Excel)">
                        ${n.excel} Excel
                    </button>
                    <button id="exportArrowBtn" class="split-btn-arrow" onclick="toggleExportMenu()" title="Select export format">
                        <svg width="10" height="10" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor">
                            <path d="M8 11L3 6h10l-5 5z"/>
                        </svg>
                    </button>
                    <div id="exportMenu" class="split-btn-menu" style="display:none;">
                        <div class="split-btn-menu-item" onclick="selectExportFormat('excel')">
                            ${n.excel} Excel (XLSB)
                        </div>
                        <div class="split-btn-menu-item" onclick="selectExportFormat('xlsx')">
                            ${n.excel} Excel (XLSX)
                        </div>
                        <div class="split-btn-menu-item" onclick="selectExportFormat('csv')">
                            ${n.csv} CSV
                        </div>
                        <div class="split-btn-menu-item" onclick="selectExportFormat('json')">
                            ${n.json} JSON
                        </div>
                        <div class="split-btn-menu-item" onclick="selectExportFormat('xml')">
                            ${n.xml} XML
                        </div>
                        <div class="split-btn-menu-item" onclick="selectExportFormat('sql')">
                            ${n.sql} SQL INSERT
                        </div>
                        <div class="split-btn-menu-item" onclick="selectExportFormat('markdown')">
                            ${n.markdown} Markdown Table
                        </div>
                    </div>
                </div>

                <div class="toolbar-separator"></div>
                <button onclick="copyAsExcel()" title="Copy results as Excel to clipboard">${n.excel} Excel Copy</button>
                <div class="toolbar-separator"></div>
                <button onclick="selectAll()" title="Select all rows">${n.checkAll} Select All</button>
                <button onclick="copySelection(false)" title="Copy selected cells to clipboard">${n.copy} Copy</button>
                <button onclick="copySelection(true)" title="Copy selected cells with headers">${n.copy} Copy w/ Headers</button>
                <button onclick="clearAllFilters()" title="Clear all column filters">${n.clear} Clear Filters</button>
                <button id="clearLogsBtn" onclick="clearLogs()" title="Clear execution logs" style="display: none;">${n.trash} Clear Logs</button>
                <span id="rowCountInfo" class="row-count-info"></span>
            </div>

            <div id="groupingPanel" class="grouping-panel" ondragover="onDragOverGroup(event)" ondragleave="onDragLeaveGroup(event)" ondrop="onDropGroup(event)">
                <span class="drag-hint">Drag headers here to group</span>
            </div>

            <div id="mainSplitView" class="main-split-view">
                <div id="gridContainer"></div>
                <div id="rowViewPanel" class="row-view-panel">
                    <div class="row-view-header">
                        <span>Row Details & Comparison</span>
                        <span class="row-view-close" onclick="toggleRowView()">\xD7</span>
                    </div>
                    <div id="rowViewContent" class="row-view-content">
                        <div class="row-view-placeholder">Select 1 or 2 rows to view details or compare</div>
                    </div>
                </div>
            </div>
            
            <script>
                const vscode = acquireVsCodeApi();
                // Initialize empty state
                window.sources = [];
                window.pinnedSources = new Set();
                window.pinnedResults = [];
                window.activeSource = '';
                window.resultSets = [];
                window.executingSources = new Set();
                
                let grids = [];
                let activeGridIndex = 0;
                const workerUri = "${e.workerUri}";
            </script>
            <script src="${e.mainScriptUri}"></script>
            <script>
                // Initialize on load
                init();
            </script>
        </body>
        </html>`}_getIcons(){return{eye:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M8 3c-3 0-6 2.5-6 5s3 5 6 5 6-2.5 6-5-3-5-6-5zm0 9c-2.5 0-4.5-2-4.5-4S5.5 4 8 4s4.5 2 4.5 4-2 4.5-4.5 4.5z"/><circle cx="8" cy="8" r="2"/></svg>',excel:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M6 3h8v10H6V3zm-1 0H3v10h2V3zm-2-1h9a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1z"/><path d="M6 6h8v1H6V6zm0 2h8v1H6V8zm0 2h8v1H6v-1z"/></svg>',copy:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M4 4h7v2H4V4zm0 4h7v2H4V8zm0 4h7v2H4v-2zM2 1h12v14H2V1zm1 1v12h10V2H3z"/></svg>',csv:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M13 2H6L2 6v8a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1zm-1 11H4V7h3V4h5v9z"/></svg>',json:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M5 2c0-1.1.9-2 2-2h2a2 2 0 0 1 2 2v2h-2V2H7v2H5V2zm0 12c0 1.1.9 2 2 2h2a2 2 0 0 0 2-2v-2h-2v2H7v-2H5v2zM2 7v2h2V7H2zm10 0v2h2V7h-2z"/></svg>',xml:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M11.5 1L7 15h2l4.5-14h-2zM4.5 1L0 15h2l4.5-14h-2z"/></svg>',sql:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M8 0C3.6 0 0 1.8 0 4v8c0 2.2 3.6 4 8 4s8-1.8 8-4V4c0-2.2-3.6-4-8-4zm0 2c3.3 0 6 1.3 6 3s-2.7 3-6 3-6-1.3-6-3 2.7-3 6-3zm0 12c-3.3 0-6-1.3-6-3V9c1.6 1.7 4.3 2 6 2s4.4-.3 6-2v2c0 1.7-2.7 3-6 3z"/></svg>',markdown:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M14.5 2H1.5C.7 2 0 2.7 0 3.5v9C0 13.3.7 14 1.5 14h13c.8 0 1.5-.7 1.5-1.5v-9c0-.8-.7-1.5-1.5-1.5zM3 11V5l2 2 2-2v6H6V7l-1 1-1-1v4H3zm10 0h-2V9h-2v2H7V5h2v2h2V5h2v6z"/></svg>',export:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M6 3h8v10H6V3zm-1 0H3v10h2V3zm-2-1h9a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1z"/><path d="M6 6h8v1H6V6zm0 2h8v1H6V8zm0 2h8v1H6v-1z"/><path d="M10 12L8 14L6 12" stroke="currentColor" stroke-width="1.5" fill="none"/></svg>',checkAll:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M13.485 1.929l1.414 1.414-9.9 9.9-4.243-4.242 1.415-1.415 2.828 2.829z"/></svg>',clear:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M8 7.293l4.146-4.147.708.708L8.707 8l4.147 4.146-.708.708L8 8.707l-4.146 4.147-.708-.708L7.293 8 3.146 3.854l.708-.708L8 7.293z"/></svg>',trash:'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M6.5 1h3l.5.5V3h3v1h-1v10h-1v-10h-7v10h-1V4h-1V3h3V1.5l.5-.5zM7 2v1h2V2H7zm-2 2v9h6V4H5zm1 1h1v7H6V5zm2 0h1v7H8V5z"/></svg>'}}};var YD=j(require("fs"));async function VD(t,e,n){let{format:r,rowIndices:i,columnIds:s}=n,o=YD.createWriteStream(e,{encoding:"utf8"});try{let a=i?i.map(d=>t.data[d]).filter(d=>d!==void 0):t.data,l=t.columns,c=s?s.map(d=>parseInt(d)).filter(d=>!isNaN(d)&&d>=0&&d<l.length):l.map((d,E)=>E),u=c.map(d=>l[d]);switch(r){case"csv":await F5(o,u,a,c);break;case"json":await H5(o,u,a,c);break;case"xml":await G5(o,u,a,c);break;case"sql":await $5(o,u,a,c);break;case"markdown":await k5(o,u,a,c);break}}finally{o.end(),await new Promise((a,l)=>{o.on("finish",a),o.on("error",l)})}}async function F5(t,e,n,r){t.write(e.map(i=>WD(i.name)).join(",")+`
`);for(let i of n){let s=r.map(o=>WD(nh(i[o],e[r.indexOf(o)].type))).join(",")+`
`;t.write(s)||await new Promise(o=>t.once("drain",o))}}async function H5(t,e,n,r){t.write(`[
`);for(let i=0;i<n.length;i++){let s=n[i],o={};r.forEach((l,c)=>{let u=s[l];o[e[c].name]=u instanceof Date?nh(u,e[c].type):u});let a="  "+JSON.stringify(o,V5)+(i<n.length-1?",":"")+`
`;t.write(a)||await new Promise(l=>t.once("drain",l))}t.write("]")}async function G5(t,e,n,r){t.write(`<?xml version="1.0" encoding="UTF-8"?>
<results>
`);for(let i of n)t.write(`  <row>
`),r.forEach((s,o)=>{let a=i[s],l=e[o].name.replace(/[^a-zA-Z0-9_-]/g,"_"),c=W5(nh(a,e[o].type));t.write(`    <${l}>${c}</${l}>
`)}),t.write(`  </row>
`),await new Promise(s=>setImmediate(s));t.write("</results>")}async function $5(t,e,n,r){let i="EXPORT_TABLE",s=e.map(o=>o.name.replace(/[^a-zA-Z0-9_]/g,"")||"COL").join(", ");for(let o of n){let a=r.map((c,u)=>{let d=o[c],E=e[u].type;return Y5(d,E)}),l=`INSERT INTO ${i} (${s}) VALUES (${a.join(", ")});
`;t.write(l)||await new Promise(c=>t.once("drain",c))}}async function k5(t,e,n,r){t.write("| "+e.map(i=>i.name.replace(/\|/g,"\\|")).join(" | ")+` |
`),t.write("| "+e.map(()=>"---").join(" | ")+` |
`);for(let i of n){let o="| "+r.map((a,l)=>{let c=i[a];if(c==null)return"";let u=nh(c,e[l].type);return String(u).replace(/\|/g,"\\|").replace(/\r?\n/g," ")}).join(" | ")+` |
`;t.write(o)||await new Promise(a=>t.once("drain",a))}}function WD(t){if(t==null)return"";let e=String(t);return e.includes(",")||e.includes('"')||e.includes(`
`)||e.includes("\r")?'"'+e.replace(/"/g,'""')+'"':e}function W5(t){return t==null?"":String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}function Y5(t,e){if(t==null)return"NULL";let n=e?.toUpperCase();return n==="BOOLEAN"?t?"TRUE":"FALSE":["INTEGER","BIGINT","SMALLINT","DECIMAL","NUMERIC","REAL","DOUBLE PRECISION","FLOAT4","FLOAT8","INT2","INT4","INT8"].includes(n||"")||typeof t=="number"?String(t):typeof t=="boolean"?t?"TRUE":"FALSE":`'${String(t).replace(/'/g,"''")}'`}function nh(t,e){if(t==null)return"";if(t instanceof Date){let n=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0"),s=(e||"").toLowerCase();if(s==="date")return`${n}-${r}-${i}`;if(s.includes("timestamp")||s.includes("datetime")||s.includes("time")){let o=String(t.getHours()).padStart(2,"0"),a=String(t.getMinutes()).padStart(2,"0"),l=String(t.getSeconds()).padStart(2,"0");return`${n}-${r}-${i} ${o}:${a}:${l}`}try{return t.toISOString().replace("T"," ").substring(0,19)}catch{return String(t)}}if(typeof t=="object"&&t!==null){let n=String(t);if(n!=="[object Object]")return n;let r=t;if("hours"in r||"minutes"in r||"seconds"in r){let i=String(r.hours||0).padStart(2,"0"),s=String(r.minutes||0).padStart(2,"0"),o=String(r.seconds||0).padStart(2,"0");return`${i}:${s}:${o}`}}return String(t)}var V5=(t,e)=>typeof e=="bigint"?e>=Number.MIN_SAFE_INTEGER&&e<=Number.MAX_SAFE_INTEGER?Number(e):e.toString():e;var wu=class{constructor(e){this._resultsMap=new Map;this._pinnedSources=new Set;this._pinnedResults=new Map;this._autoPinnedResults=new Set;this._activeResultSetIndexMap=new Map;this._resultIdCounter=0;this._executingSources=new Set;this._cancelledSources=new Set;this._dataVersions=new Map;this._sentDataVersions=new Map;this._lastSentGlobalStateVersion=0;this._globalStateVersion=0;this._onDidCancel=new Te.EventEmitter;this.onDidCancel=this._onDidCancel.event;this._isViewReady=!1;this._extensionUri=e}static{this.viewType="netezza.results"}getActiveSource(){return this._activeSourceUri}resolveWebviewView(e,n,r){this._view=e,e.webview.options={enableScripts:!0,localResourceRoots:[Te.Uri.joinPath(this._extensionUri,"media"),Te.Uri.joinPath(this._extensionUri,"dist","media")]},this._htmlGenerator=new th(e.webview.cspSource),e.webview.html=this._getHtmlForWebview(),e.webview.onDidReceiveMessage(i=>{switch(i.command){case"ready":this._isViewReady=!0,this._updateWebview();return;case"analyze":eh.createOrShow(this._extensionUri,i.data);return;case"describeWithCopilot":Te.commands.executeCommand("netezza.describeDataWithCopilot",i.data,i.sql);return;case"fixSqlError":Te.commands.executeCommand("netezza.fixSqlError",i.errorMessage,i.sql);return;case"exportCsv":this.exportCsv(i.data);return;case"openInExcel":this.openInExcel(i.data,i.sql);return;case"copyAsExcel":this.copyAsExcel(i.data,i.sql);return;case"openInExcelXlsx":this.openInExcelXlsx(i.data,i.sql);return;case"exportJson":this.exportJson(i.data);return;case"exportXml":this.exportXml(i.data);return;case"exportSqlInsert":this.exportSqlInsert(i.data);return;case"exportMarkdown":this.exportMarkdown(i.data);return;case"export":this.handleExport(i);return;case"switchSource":this._activeSourceUri=i.sourceUri,this._resultsMap.has(i.sourceUri)||this._resultsMap.set(i.sourceUri,[]),this._updateWebview();return;case"togglePin":this._pinnedSources.has(i.sourceUri)?this._pinnedSources.delete(i.sourceUri):this._pinnedSources.add(i.sourceUri),this._globalStateVersion++,this._updateWebview();return;case"toggleResultPin":this._toggleResultPin(i.sourceUri,i.resultSetIndex);return;case"switchToPinnedResult":this._switchToPinnedResult(i.resultId);return;case"unpinResult":this._pinnedResults.delete(i.resultId),this._globalStateVersion++,this._updateWebview();return;case"closeSource":this.closeSource(i.sourceUri);return;case"closeResult":this.closeResult(i.sourceUri,i.resultSetIndex);return;case"closeAllResults":this.closeAllResults(i.sourceUri);return;case"cancelQuery":i.sourceUri&&(console.log(`[resultPanelView] Received cancelQuery message for: ${i.sourceUri} `),Te.commands.executeCommand("netezza.cancelQuery",i.sourceUri,i.currentRowCounts));return;case"copyToClipboard":Te.env.clipboard.writeText(i.text),Te.window.showInformationMessage("Copied to clipboard");return;case"info":Te.window.showInformationMessage(i.text);return;case"error":console.error("[Webview Error]",i.text),Te.window.showErrorMessage(`Webview Error: ${i.text}`);return;case"setContext":Te.commands.executeCommand("setContext",i.key,i.value);return;case"clearLogs":this.clearLogs(i.sourceUri);return;case"switchResultSet":this._activeResultSetIndexMap.set(i.sourceUri,i.resultSetIndex);return}})}triggerCopySelection(){this._postMessageToWebview({command:"copySelection"})}_isValidSourceUri(e){return e.startsWith("file:")||e.startsWith("untitled:")}setActiveSource(e){this._isValidSourceUri(e)&&this._activeSourceUri!==e&&this._resultsMap.has(e)&&(this._activeSourceUri=e,this._updateWebview())}startExecution(e){if(!this._isValidSourceUri(e))return;this._executingSources.add(e),this._cancelledSources.delete(e);let n=this._resultsMap.get(e)||[],r,i=n.findIndex(d=>d.isLog);if(i!==-1){r=n[i];let d=new Date().toLocaleTimeString();r.data.push(["",""]),r.data.push([d,"--- New Execution Started ---"]),r.message="Execution started...",r.executionTimestamp=Date.now()}else{let d=new Date().toLocaleTimeString();r={columns:[{name:"Time",type:"string"},{name:"Message",type:"string"}],data:[[d,"--- New Execution Started ---"]],message:"Execution started...",executionTimestamp:Date.now(),isLog:!0,name:"Logs"}}let s=Array.from(this._pinnedResults.entries()).filter(([d,E])=>E.sourceUri===e&&n[E.resultSetIndex]!==r).sort((d,E)=>d[1].resultSetIndex-E[1].resultSetIndex),o=[];s.forEach(([d,E])=>{if(E.resultSetIndex<n.length){let f=n[E.resultSetIndex];f&&o.push(f)}});let a=[r,...o];this._resultsMap.set(e,a),Array.from(this._pinnedResults.entries()).filter(([d,E])=>E.sourceUri===e).map(([d,E])=>d).forEach(d=>this._pinnedResults.delete(d));let c=`result_${++this._resultIdCounter}`,u=e.split(/[\\/]/).pop()||e;this._pinnedResults.set(c,{sourceUri:e,resultSetIndex:0,timestamp:Date.now(),label:`${u} - Logs`}),s.forEach(([d,E],f)=>{let p=`result_${++this._resultIdCounter}`;this._pinnedResults.set(p,{sourceUri:e,resultSetIndex:f+1,timestamp:Date.now(),label:`${u} - Result ${f+1}`})}),this._pinnedSources.add(e),this._activeSourceUri=e,this._activeResultSetIndexMap.set(e,0),this._updateWebview(),this._view?.show?.(!0)}log(e,n){let r=this._resultsMap.get(e);if(!r||r.length===0)return;let i=r.find(s=>s.isLog);if(i){let s=new Date().toLocaleTimeString();i.data.push([s,n]),this._updateWebview()}}isCancelled(e){return this._cancelledSources.has(e)}cancelExecution(e,n){this._executingSources.has(e)&&this._executingSources.delete(e),this._cancelledSources.add(e),this._onDidCancel.fire(e),(this._resultsMap.get(e)||[]).forEach((i,s)=>{i.isCancelled=!0,n&&n[s]!==void 0&&(i.data=i.data.slice(0,n[s]))}),this._updateWebview(),this._postMessageToWebview({command:"cancelExecution",sourceUri:e})}finalizeExecution(e){this._executingSources.delete(e);for(let n of this._autoPinnedResults){let r=this._pinnedResults.get(n);r&&r.sourceUri===e&&this._pinnedResults.delete(n)}this._autoPinnedResults.clear(),this._globalStateVersion++,this._updateWebview()}updateResults(e,n,r=!1){this._resultsMap.has(n)||this._pinnedSources.add(n);let i=[];Array.isArray(e)?i=e:i=[e];let s=Date.now();i.forEach(f=>{f.executionTimestamp=s});let o=this._resultsMap.get(n)||[],a=o.find(f=>f.isLog),l=Array.from(this._pinnedResults.entries()).filter(f=>f[1].sourceUri===n).sort((f,p)=>f[1].resultSetIndex-p[1].resultSetIndex),c=[],u=new Map;a&&c.push(a),l.forEach(([f,p])=>{let h=o[p.resultSetIndex];h&&(h===a||c.includes(h)||c.push(h),u.set(f,h))});let d=c.length;if(console.log("[updateResults] Before append:",{existingResults:o.map((f,p)=>`[${p}]isLog = ${f.isLog}, isError = ${f.isError} `),finalResultSetsSoFar:c.map((f,p)=>`[${p}]isLog = ${f.isLog}, isError = ${f.isError} `),newResults:i.map(f=>`isLog = ${f.isLog}, isError = ${f.isError} `)}),c.push(...i),this._resultsMap.set(n,c),u.forEach((f,p)=>{let h=c.indexOf(f);if(h!==-1){let T=this._pinnedResults.get(p);T&&(T.resultSetIndex=h)}}),a&&!Array.from(u.values()).includes(a)){let p=`result_${++this._resultIdCounter}`,h=n.split(/[\\\\/]/).pop()||n;this._pinnedResults.set(p,{sourceUri:n,resultSetIndex:0,timestamp:Date.now(),label:`${h} - Logs`})}let E=n.split(/[\\\\/]/).pop()||n;i.forEach((f,p)=>{let h=`result_${++this._resultIdCounter}`,T=d+p;this._pinnedResults.set(h,{sourceUri:n,resultSetIndex:T,timestamp:Date.now(),label:f.isLog?`${E} - Logs`:`${E} - Result ${T}`}),this._autoPinnedResults.add(h)}),r||Array.from(this._resultsMap.keys()).filter(p=>p!==n&&!this._pinnedSources.has(p)).forEach(p=>{this._resultsMap.delete(p),Array.from(this._pinnedResults.entries()).filter(T=>T[1].sourceUri===p).map(([T,S])=>T).forEach(T=>this._pinnedResults.delete(T))}),this._activeSourceUri=n,this._activeResultSetIndexMap.set(n,d),this._incrementDataVersion(n),this._view?(this._updateWebview(),this._view.show?.(!0)):Te.window.showInformationMessage('Query completed. Please open "Query Results" panel to view data.')}_incrementDataVersion(e){let n=this._dataVersions.get(e)||0;this._dataVersions.set(e,n+1),this._globalStateVersion++}appendStreamingChunk(e,n,r,i){if(this._cancelledSources.has(e))return;let s=this._resultsMap.get(e)||[];if(r.isFirstChunk&&r.columns.length>0){let o={columns:r.columns,data:r.rows,executionTimestamp:Date.now(),sql:i,limitReached:r.limitReached};s.findIndex(d=>d.isLog)>=0,s.push(o),this._resultsMap.set(e,s);let l=e.split(/[\\/]/).pop()||e,c=`result_${++this._resultIdCounter}`,u=s.length-1;this._pinnedResults.set(c,{sourceUri:e,resultSetIndex:u,timestamp:Date.now(),label:`${l} - Result ${u}`}),this._autoPinnedResults.add(c),this._activeSourceUri=e,this._activeResultSetIndexMap.set(e,u),this._updateWebview(),this._view?.show?.(!0)}else if(r.rows.length>0){let o=s[s.length-1];o&&!o.isLog&&(o.data.push(...r.rows),o.limitReached=r.limitReached,this._postMessageToWebview({command:"appendRows",resultSetIndex:s.length-1,rows:(0,jm.encode)(this._sanitizeForMessagePack(r.rows)),totalRows:r.totalRowsSoFar,isLastChunk:r.isLastChunk,limitReached:r.limitReached}))}r.isLastChunk&&(this._incrementDataVersion(e),this._postMessageToWebview({command:"streamingComplete",resultSetIndex:s.length-1,totalRows:r.totalRowsSoFar,limitReached:r.limitReached}))}_postMessageToWebview(e){this._view&&this._view.webview.postMessage(e)}_updateWebview(){if(!this._view)return;let e=this._activeSourceUri,n=e&&this._dataVersions.get(e)||0,r=e&&this._sentDataVersions.get(e)||-1;if(!(this._globalStateVersion!==this._lastSentGlobalStateVersion)&&e&&n===r){console.log(`[ResultPanelView] Data for ${e} is current (v${n}), sending setActiveSource`),this._postMessageToWebview({command:"setActiveSource",sourceUri:e,activeResultSetIndex:this._activeResultSetIndexMap.get(e)});return}let s=this._prepareViewData();this._isViewReady?(e&&this._sentDataVersions.set(e,n),this._lastSentGlobalStateVersion=this._globalStateVersion,console.log("[ResultPanelView] Sending hydrate with data"),this._postMessageToWebview({command:"hydrate",data:s})):this._view.webview.html=this._getHtmlForWebview()}_toggleResultPin(e,n){let r=Array.from(this._pinnedResults.entries()).find(i=>{let s=i[1];return s.sourceUri===e&&s.resultSetIndex===n});if(r)this._pinnedResults.delete(r[0]);else{let i=`result_${++this._resultIdCounter}`,s=Date.now(),a=`${e.split(/[\\/]/).pop()||e} - Result ${n+1}`;this._pinnedResults.set(i,{sourceUri:e,resultSetIndex:n,timestamp:s,label:a})}this._globalStateVersion++,this._updateWebview()}_switchToPinnedResult(e){let n=this._pinnedResults.get(e);n&&(this._activeSourceUri=n.sourceUri,this._updateWebview(),this._view&&this._view.webview.postMessage({command:"switchToResultSet",resultSetIndex:n.resultSetIndex}))}async exportCsv(e){if(typeof e=="object"){this.handleExport({format:"csv",...e});return}let n=await Te.window.showSaveDialog({filters:{"CSV Files":["csv"]},saveLabel:"Export"});n&&(await Te.workspace.fs.writeFile(n,Buffer.from(e)),Te.window.showInformationMessage(`Results exported to ${n.fsPath} `))}async handleExport(e){let{sourceUri:n,resultSetIndex:r,format:i,rowIndices:s,columnIds:o}=e,a=this._resultsMap.get(n);if(!a||r===void 0||a[r]===void 0){Te.window.showErrorMessage("Export failed: Result set not found");return}let l=a[r],c={csv:"csv",json:"json",xml:"xml",sql:"sql",markdown:"md"},u=await Te.window.showSaveDialog({filters:{[`${i.toUpperCase()} Files`]:[c[i]||i]},saveLabel:`Export ${i.toUpperCase()} `});if(u)try{await Te.window.withProgress({location:Te.ProgressLocation.Notification,title:`Exporting to ${i.toUpperCase()}...`,cancellable:!1},async()=>{await VD(l,u.fsPath,{format:i,rowIndices:s,columnIds:o})}),Te.window.showInformationMessage(`Results exported to ${u.fsPath} `)}catch(d){let E=d instanceof Error?d.message:String(d);Te.window.showErrorMessage(`Export failed: ${E} `)}}async openInExcel(e,n){e&&typeof e=="object"&&"results"in e&&(e=this.hydrateExportData(e)),Te.commands.executeCommand("netezza.exportCurrentResultToXlsbAndOpen",e,n)}async copyAsExcel(e,n){e&&typeof e=="object"&&"results"in e&&(e=this.hydrateExportData(e)),Te.commands.executeCommand("netezza.copyCurrentResultToXlsbClipboard",e,n)}async openInExcelXlsx(e,n){try{e&&typeof e=="object"&&"results"in e&&(e=this.hydrateExportData(e)),await Te.commands.executeCommand("netezza.exportCurrentResultToXlsxAndOpen",e,n)}catch(r){let i=r instanceof Error?r.message:String(r);Te.window.showErrorMessage(`Failed to export to XLSX: ${i}. Please try reloading the window.`)}}hydrateExportData(e){if(!e||!e.results)return[];let{sourceUri:n,results:r}=e,i=this._resultsMap.get(n);return i?r.map(s=>{let o=i[s.resultSetIndex];if(!o)return null;let a=s.columnIds.map(c=>{let u=parseInt(c),d=o.columns[u];return{name:d.name,type:d.type}}),l=s.rowIndices.map(c=>{let u=o.data[c];return s.columnIds.map(d=>u[parseInt(d)])});return{columns:a,rows:l,sql:o.sql||"",name:s.name,isActive:s.isActive}}).filter(s=>s!==null):[]}async exportJson(e){if(typeof e=="object"){this.handleExport({format:"json",...e});return}let n=await Te.window.showSaveDialog({filters:{"JSON Files":["json"]},saveLabel:"Export JSON"});n&&(await Te.workspace.fs.writeFile(n,Buffer.from(e)),Te.window.showInformationMessage(`Results exported to ${n.fsPath} `))}async exportXml(e){if(typeof e=="object"){this.handleExport({format:"xml",...e});return}let n=await Te.window.showSaveDialog({filters:{"XML Files":["xml"]},saveLabel:"Export XML"});n&&(await Te.workspace.fs.writeFile(n,Buffer.from(e)),Te.window.showInformationMessage(`Results exported to ${n.fsPath} `))}async exportSqlInsert(e){if(typeof e=="object"){this.handleExport({format:"sql",...e});return}let n=await Te.window.showSaveDialog({filters:{"SQL Files":["sql"]},saveLabel:"Export SQL"});n&&(await Te.workspace.fs.writeFile(n,Buffer.from(e)),Te.window.showInformationMessage(`Results exported to ${n.fsPath} `))}async exportMarkdown(e){if(typeof e=="object"){this.handleExport({format:"markdown",...e});return}let n=await Te.window.showSaveDialog({filters:{"Markdown Files":["md"]},saveLabel:"Export Markdown"});n&&(await Te.workspace.fs.writeFile(n,Buffer.from(e)),Te.window.showInformationMessage(`Results exported to ${n.fsPath} `))}closeSource(e){if(this._resultsMap.has(e)){if(this._resultsMap.delete(e),this._pinnedSources.delete(e),this._executingSources.delete(e),Array.from(this._pinnedResults.entries()).filter(([r,i])=>i.sourceUri===e).map(([r,i])=>r).forEach(r=>this._pinnedResults.delete(r)),this._activeSourceUri===e){let r=Array.from(this._resultsMap.keys());this._activeSourceUri=r.length>0?r[0]:void 0}this._updateWebview()}}closeResult(e,n){let r=this._resultsMap.get(e);if(!r||n<0||n>=r.length)return;r.splice(n,1),Array.from(this._pinnedResults.entries()).filter(([s,o])=>o.sourceUri===e&&o.resultSetIndex===n).map(([s,o])=>s).forEach(s=>this._pinnedResults.delete(s));for(let[,s]of this._pinnedResults.entries())s.sourceUri===e&&s.resultSetIndex>n&&(s.resultSetIndex-=1);if(this._activeResultSetIndexMap.get(e)===n){let s=n<r.length?n:Math.max(0,r.length-1);this._activeResultSetIndexMap.set(e,s)}else this._activeResultSetIndexMap.get(e)>n&&this._activeResultSetIndexMap.set(e,this._activeResultSetIndexMap.get(e)-1);this._updateWebview()}closeAllResults(e){let n=this._resultsMap.get(e);if(!n||n.length===0)return;let r=n.findIndex(s=>s.isLog);if(r===-1)n.splice(0);else{let s=n[r];n.splice(0),n.push(s)}Array.from(this._pinnedResults.entries()).filter(([s,o])=>{if(o.sourceUri!==e)return!1;let a=n[o.resultSetIndex];return!a||!a.isLog}).map(([s,o])=>s).forEach(s=>this._pinnedResults.delete(s)),this._activeResultSetIndexMap.set(e,0),this._updateWebview()}clearLogs(e){let n=this._resultsMap.get(e);if(n){let r=n.find(i=>i.isLog);if(r){r.data=[];let i=new Date().toLocaleTimeString();r.data.push([i,"--- Logs Cleared ---"]),this._incrementDataVersion(e),this._updateWebview()}}}_getHtmlForWebview(){if(!this._htmlGenerator)return"";let e=this._getScriptUris();return this._htmlGenerator.generateHtml(e)}_getScriptUris(){return{scriptUri:this._view.webview.asWebviewUri(Te.Uri.joinPath(this._extensionUri,"media","tanstack-table-core.js")),virtualUri:this._view.webview.asWebviewUri(Te.Uri.joinPath(this._extensionUri,"media","tanstack-virtual-core.js")),mainScriptUri:this._view.webview.asWebviewUri(Te.Uri.joinPath(this._extensionUri,"dist","media","resultPanel.js")),workerUri:this._view.webview.asWebviewUri(Te.Uri.joinPath(this._extensionUri,"media","searchWorker.js")),styleUri:this._view.webview.asWebviewUri(Te.Uri.joinPath(this._extensionUri,"media","resultPanel.css"))}}_prepareViewData(){let e=Array.from(this._resultsMap.keys()),n=Array.from(this._pinnedSources),r=Array.from(this._pinnedResults.entries()).map(([a,l])=>({id:a,...l})),i=this._activeSourceUri&&this._resultsMap.has(this._activeSourceUri)?this._activeSourceUri:e.length>0?e[0]:null,s=i?this._resultsMap.get(i)||[]:[];if(i&&s.length===0){let a=new Date().toLocaleTimeString();s=[{columns:[{name:"Time",type:"string"},{name:"Message",type:"string"}],data:[[a,"No results yet"]],message:"No results yet",executionTimestamp:Date.now(),isLog:!0,name:"Logs"}],this._resultsMap.set(i,s)}let o=i&&this._activeResultSetIndexMap.has(i)?this._activeResultSetIndexMap.get(i):(s&&s.length>0,0);return{sourcesJson:JSON.stringify(e),pinnedSourcesJson:JSON.stringify(n),pinnedResultsJson:JSON.stringify(r),activeSourceJson:JSON.stringify(i),resultSetsMsgPack:(0,jm.encode)(this._sanitizeForMessagePack(s)),activeResultSetIndex:o,executingSourcesJson:JSON.stringify(Array.from(this._executingSources))}}_sanitizeForMessagePack(e){if(e===null||typeof e!="object")return typeof e=="bigint"?e>=Number.MIN_SAFE_INTEGER&&e<=Number.MAX_SAFE_INTEGER?Number(e):e.toString():typeof e=="function"?void 0:e;if(e instanceof Date)return e;if(Array.isArray(e)){let r=new Array(e.length);for(let i=0;i<e.length;i++)r[i]=this._sanitizeForMessagePack(e[i]);return r}if(e instanceof Uint8Array||typeof Buffer<"u"&&Buffer.isBuffer(e))return e;if(typeof e.toJSON=="function")return e.toJSON();let n={};for(let r in e)if(Object.prototype.hasOwnProperty.call(e,r)){let i=this._sanitizeForMessagePack(e[r]);i!==void 0&&(n[r]=i)}return n}};var De=j(require("vscode"));bn();var rh=class{constructor(e,n,r){this.context=e;this.metadataCache=n;this.connectionManager=r;this.parsedCache=new Map}async provideCompletionItems(e,n,r,i){if(r.isCancellationRequested)return[];let s=this.getParsedContext(e,r);if(!s)return[];let{cleanText:o,localDefs:a,variables:l}=s,c=e.lineAt(n).text.substr(0,n.character),u=c.toUpperCase(),d=n.line>0?e.lineAt(n.line-1).text:"",E=this.connectionManager.getConnectionForExecution(e.uri.toString());if(E||(E=this.connectionManager.getActiveConnectionName()||void 0),E&&!this.metadataCache.hasConnectionPrefetchTriggered(E)&&this.metadataCache.triggerConnectionPrefetch(E,R=>Ee(this.context,R,!0,this.connectionManager,E)),/(FROM|JOIN)\s+$/.test(u)){let R=await this.getDatabases(E);return[...a.map(N=>{let L=new De.CompletionItem(N.name,De.CompletionItemKind.Class);return L.detail=N.type,L}),...R]}if(/(?:FROM|JOIN)\s*$/i.test(d)&&/^\s*[a-zA-Z0-9_]*$/.test(c)){let R=await this.getDatabases(E);return[...a.map(N=>{let L=new De.CompletionItem(N.name,De.CompletionItemKind.Class);return L.detail=N.type,L}),...R]}let f=c.match(/(?:FROM|JOIN)\s+([a-zA-Z0-9_]+)\.\s*$/i);if(f){let R=f[1],m=await this.getSchemas(E,R);return new De.CompletionList(m,!1)}let p=c.match(/^\s*([a-zA-Z0-9_]+)\.\s*$/i);if(p&&/(?:FROM|JOIN)\s*$/i.test(d)){let R=p[1],m=await this.getSchemas(E,R);return new De.CompletionList(m,!1)}let h=c.match(/(?:FROM|JOIN)\s+([a-zA-Z0-9_]+)\.([a-zA-Z0-9_]+)\.$/i);if(h){let R=h[1],m=h[2];return this.getTables(E,R,m)}let T=c.match(/^\s*([a-zA-Z0-9_]+)\.([a-zA-Z0-9_]+)\.\s*$/i);if(T&&/(?:FROM|JOIN)\s*$/i.test(d)){let R=T[1],m=T[2];return this.getTables(E,R,m)}let S=c.match(/(?:FROM|JOIN)\s+([a-zA-Z0-9_]+)\.\.$/i);if(S){let R=S[1];return this.getTables(E,R,void 0)}let A=c.match(/^\s*([a-zA-Z0-9_]+)\.\.\s*$/i);if(A&&/(?:FROM|JOIN)\s*$/i.test(d)){let R=A[1];return this.getTables(E,R,void 0)}if(c.trim().endsWith(".")){let R=c.match(/([a-zA-Z0-9_]+)\.$/);if(R){let m=R[1],N=this.findAlias(o,m);if(N){let I=a.find(D=>D.name.toUpperCase()===N.table.toUpperCase());return I?I.columns.map(D=>{let g=new De.CompletionItem(D,De.CompletionItemKind.Field);return g.detail="Local Column",g}):this.getColumns(E,N.db,N.schema,N.table)}let L=a.find(I=>I.name.toUpperCase()===m.toUpperCase());if(L)return L.columns.map(I=>{let D=new De.CompletionItem(I,De.CompletionItemKind.Field);return D.detail="Local Column",D})}}if(c.match(/\$\{?[a-zA-Z0-9_]*$/)){if(i.triggerKind!==De.CompletionTriggerKind.Invoke)return[];let R=l.map(m=>{let N=`\${${m}}`,L=new De.CompletionItem(N,De.CompletionItemKind.Variable),I;return c.endsWith("${")?I=`${m}}`:c.endsWith("$")?I=`{${m}}`:I=`\${${m}}`,L.insertText=I,L.detail="Variable",L.sortText=`0_${m}`,L.filterText=m,L});return new De.CompletionList(R,!1)}return this.getKeywords()}getParsedContext(e,n){if(n.isCancellationRequested)return null;let r=e.uri.toString(),i=this.parsedCache.get(r);if(i&&i.version===e.version)return i;let s=e.getText();if(n.isCancellationRequested)return null;let o=this.stripComments(s);if(n.isCancellationRequested)return null;let a=this.parseLocalDefinitions(o);if(n.isCancellationRequested)return null;let l=this.parseVariables(o),c={version:e.version,cleanText:o,localDefs:a,variables:l};return this.parsedCache.set(r,c),c}stripComments(e){let n=e.replace(/--.*$/gm,"");return n=n.replace(/\/\*[\s\S]*?\*\//g,""),n}parseVariables(e){let n=[],r=/@SET\s+([a-zA-Z0-9_]+)\s*=/gi,i;for(;(i=r.exec(e))!==null;){let s=i[1];n.includes(s)||n.push(s)}return n.sort()}parseLocalDefinitions(e){let n=[],r=/CREATE\s+(?:TEMP\s+)?TABLE\s+([a-zA-Z0-9_]+)\s+AS\s*\(/gi,i;for(;(i=r.exec(e))!==null;){let a=i[1],l=i.index+i[0].length,c=this.extractBalancedParenthesisContent(e,l);if(c){let u=this.extractColumnsFromQuery(c);n.push({name:a,type:"Temp Table",columns:u})}}let s=/\bWITH\s+/gi;for(;(i=s.exec(e))!==null;){let a=i.index+i[0].length;for(;;){let l=/^\s*([a-zA-Z0-9_]+)\s+AS\s*\(/i,c=e.substring(a),u=c.match(l);if(!u)break;let d=u[1],E=c.indexOf("(",u.index+u[1].length),f=a+E,p=this.extractBalancedParenthesisContent(e,f+1);if(p){let h=this.extractColumnsFromQuery(p);n.push({name:d,type:"CTE",columns:h}),a=f+1+p.length+1;let T=/^\s*,/,S=e.substring(a);if(T.test(S)){let A=S.match(T);a+=A[0].length}else break}else break}}let o=/\bJOIN\s+\(/gi;for(;(i=o.exec(e))!==null;){let a=i.index+i[0].length,l=this.extractBalancedParenthesisContent(e,a);if(l&&/^\s*SELECT\b/i.test(l)){let c=a+l.length+1,d=e.substring(c).match(/^\s+(?:AS\s+)?([a-zA-Z0-9_]+)/i);if(d){let E=d[1],f=this.extractColumnsFromQuery(l);n.push({name:E,type:"Subquery",columns:f})}}}return n}extractBalancedParenthesisContent(e,n){let r=1,i=n;for(;i<e.length;i++)if(e[i]==="("?r++:e[i]===")"&&r--,r===0)return e.substring(n,i);return null}extractColumnsFromQuery(e){let n=e.match(/^\s*SELECT\s+/i);if(!n)return[];let r=n[0].length,i="",s=0,o=-1;for(let c=r;c<e.length;c++)if(e[c]==="("?s++:e[c]===")"&&s--,s===0&&e.substr(c).match(/^\s+FROM\b/i)){o=c;break}o!==-1?i=e.substring(r,o):i=e.substring(r);let a=[],l="";s=0;for(let c=0;c<i.length;c++){let u=i[c];u==="("?s++:u===")"&&s--,u===","&&s===0?(a.push(l.trim()),l=""):l+=u}return l.trim()&&a.push(l.trim()),a.map(c=>{let u=c.match(/\s+AS\s+([a-zA-Z0-9_]+)$/i);if(u)return u[1];let d=c.match(/\s+([a-zA-Z0-9_]+)$/i);if(d)return d[1];let E=c.split(".");return E[E.length-1]})}findAlias(e,n){let r=new RegExp("(?:FROM|JOIN)\\s+([a-zA-Z0-9_\\.]+)(?:\\s+(?:AS\\s+)?([a-zA-Z0-9_]+))?","gi"),i;for(;(i=r.exec(e))!==null;){let s=i[1],o=i[2];if(o&&o.toUpperCase()===n.toUpperCase()){let a=s.split(".");return a.length===3?{db:a[0],schema:a[1],table:a[2]}:a.length===2?{schema:a[0],table:a[1]}:{table:a[0]}}else if(!o){let a=s.split(".");if(a[a.length-1].toUpperCase()===n.toUpperCase())return a.length===3?{db:a[0],schema:a[1],table:a[2]}:a.length===2?{schema:a[0],table:a[1]}:{table:a[0]}}}return null}buildSimpleColumnQuery(e,n,r,i,s){if(n)return`SELECT ATTNAME, FORMAT_TYPE FROM ${e}_V_RELATION_COLUMN WHERE OBJID = ${n} ORDER BY ATTNUM`;let o=i?`AND UPPER(O.SCHEMA) = UPPER('${i}')`:"",a=s?`AND UPPER(O.DBNAME) = UPPER('${s}')`:"";return`
            SELECT C.ATTNAME, C.FORMAT_TYPE 
            FROM ${e}_V_RELATION_COLUMN C
            JOIN ${e}_V_OBJECT_DATA O ON C.OBJID = O.OBJID
            WHERE UPPER(O.OBJNAME) = UPPER('${r}') ${o} ${a}
            ORDER BY C.ATTNUM
        `}createColumnCompletionItem(e){let n=e.label||e.ATTNAME,r=n;e.isPk?r=`\u{1F511} ${n}`:e.isFk&&(r=`\u{1F517} ${n}`);let i=new De.CompletionItem(r,e.kind||De.CompletionItemKind.Field);i.insertText=n;let s=e.detail||"";return e.isPk&&e.isFk?s+=" (PK, FK)":e.isPk?s+=" (PK)":e.isFk&&(s+=" (FK)"),i.detail=s,e.documentation&&(i.documentation=new De.MarkdownString(e.documentation)),e.isPk?i.sortText=`0_${n}`:e.isFk?i.sortText=`1_${n}`:i.sortText=`2_${n}`,i}getKeywords(){return["SELECT","FROM","WHERE","GROUP BY","ORDER BY","LIMIT","INSERT","INTO","VALUES","UPDATE","SET","DELETE","CREATE","DROP","TABLE","VIEW","DATABASE","JOIN","INNER","LEFT","RIGHT","OUTER","ON","AND","OR","NOT","NULL","IS","IN","BETWEEN","LIKE","AS","DISTINCT","CASE","WHEN","THEN","ELSE","END","WITH","UNION","ALL"].map(n=>{let r=new De.CompletionItem(n,De.CompletionItemKind.Keyword);return r.detail="SQL Keyword",r})}async getDatabases(e){if(!e)return[];let n=this.metadataCache.getDatabases(e);if(n)return n.map(r=>{let i=new De.CompletionItem(r.label||r.DATABASE,r.kind||De.CompletionItemKind.Module);return i.detail=r.detail,i});try{let i=await Ee(this.context,"SELECT DATABASE FROM system.._v_database ORDER BY DATABASE",!0,this.connectionManager,e);if(!i)return[];let o=ge(i).map(a=>({DATABASE:a.DATABASE,label:a.DATABASE,kind:9,detail:"Database"}));return this.metadataCache.setDatabases(e,o),o.map(a=>{let l=new De.CompletionItem(a.label,a.kind);return l.detail=a.detail,l})}catch(r){return console.error(r),[]}}async getSchemas(e,n){if(!e)return[];let r=this.metadataCache.getSchemas(e,n);if(r)return r.map(s=>{let o=new De.CompletionItem(s.label||s.SCHEMA,s.kind||De.CompletionItemKind.Folder);return o.detail=s.detail,o.insertText=s.insertText,o.sortText=s.sortText,o.filterText=s.filterText,o});let i=De.window.setStatusBarMessage(`Fetching schemas for ${n}...`);try{let s=`SELECT SCHEMA FROM ${n}.._V_SCHEMA ORDER BY SCHEMA`,o=await Ee(this.context,s,!0,this.connectionManager,e);if(!o)return[];let l=ge(o).filter(c=>c.SCHEMA!=null&&c.SCHEMA!=="").map(c=>{let u=c.SCHEMA;return{SCHEMA:u,label:u,kind:19,detail:`Schema in ${n}`,insertText:u,sortText:u,filterText:u}});return this.metadataCache.setSchemas(e,n,l),l.map(c=>{let u=new De.CompletionItem(c.label,c.kind);return u.detail=c.detail,u.insertText=c.insertText,u.sortText=c.sortText,u.filterText=c.filterText,u})}catch(s){return console.error("[SqlCompletion] Error in getSchemas:",s),[]}finally{i.dispose()}}async getTables(e,n,r){if(!e)return[];let i=r?`${n}.${r}`:`${n}..`,s=r?this.metadataCache.getTables(e,i):this.metadataCache.getTables(e,i)||this.metadataCache.getTablesAllSchemas(e,n);if(s)return s.map(l=>{let c=typeof l.label=="string"?l.label:l.label?.label||l.OBJNAME||l.TABLENAME||"?",u=new De.CompletionItem(c,l.kind||De.CompletionItemKind.Class);return u.detail=l.detail,l.DESCRIPTION&&(u.documentation=new De.MarkdownString(l.DESCRIPTION)),u.sortText=l.sortText,u});let o=r?`Fetching tables for ${n}.${r}...`:`Fetching tables for ${n}...`,a=De.window.setStatusBarMessage(o);try{let l="";r?l=`SELECT OBJNAME, OBJID, OBJTYPE, COALESCE(DESCRIPTION, '') AS DESCRIPTION FROM ${n}.._V_OBJECT_DATA WHERE UPPER(DBNAME) = UPPER('${n}') AND UPPER(SCHEMA) = UPPER('${r}') AND OBJTYPE IN ('TABLE', 'VIEW') ORDER BY OBJNAME`:l=`SELECT OBJNAME, OBJID, OBJTYPE, SCHEMA, COALESCE(DESCRIPTION, '') AS DESCRIPTION FROM ${n}.._V_OBJECT_DATA WHERE UPPER(DBNAME) = UPPER('${n}') AND OBJTYPE IN ('TABLE', 'VIEW') ORDER BY OBJNAME`;let c=await Ee(this.context,l,!0,this.connectionManager,e);if(!c)return[];let u=ge(c),d=new Map,E=u.map(f=>{let p=f.OBJNAME,h=f.SCHEMA||r,T=h?`${n}.${h}.${f.OBJNAME}`:`${n}..${f.OBJNAME}`;d.set(T,f.OBJID);let S=f.OBJTYPE==="VIEW",A=S?18:6,R=S?"View":"Table";return{OBJNAME:f.OBJNAME,TABLENAME:f.OBJNAME,OBJID:f.OBJID,SCHEMA:h,label:p,kind:A,objType:f.OBJTYPE,detail:r?R:`${R} (${h})`,sortText:f.OBJNAME,DESCRIPTION:f.DESCRIPTION}});return this.metadataCache.setTables(e,i,E,d),E.map(f=>{let p=typeof f.label=="string"?f.label:f.label?.label||"?",h=new De.CompletionItem(p,f.kind);return h.detail=f.detail,f.DESCRIPTION&&(h.documentation=new De.MarkdownString(f.DESCRIPTION)),h.sortText=f.sortText,h})}catch(l){return console.error(l),[]}finally{a.dispose()}}async getColumns(e,n,r,i){if(!e)return[];let s,o=n?`${n}..`:"",a=r&&n?`${n}.${r}.${i}`:n?`${n}..${i}`:void 0;a&&(s=this.metadataCache.findTableId(e,a));let l=`${n||"CURRENT"}.${r||""}.${i}`,c=this.metadataCache.getColumns(e,l);if(c)return c.map(d=>this.createColumnCompletionItem(d));if(!r&&n){let d=this.metadataCache.getColumnsAnySchema(e,n,i);if(d)return d.map(E=>this.createColumnCompletionItem(E))}let u=De.window.setStatusBarMessage(`Fetching columns for ${i}...`);try{let d=r||"",E=n||"",f=E&&d?Tu(E,d,i):this.buildSimpleColumnQuery(o,s,i,r,n),p=await Ee(this.context,f,!0,this.connectionManager,e);if(!p)return[];let h;if(E&&d?h=Su(p).map(S=>({ATTNAME:S.attname,FORMAT_TYPE:S.formatType,label:S.attname,kind:5,detail:S.formatType,isPk:S.isPk,isFk:S.isFk,documentation:S.description})):h=ge(p).map(S=>({ATTNAME:S.ATTNAME,FORMAT_TYPE:S.FORMAT_TYPE,label:S.ATTNAME,kind:5,detail:S.FORMAT_TYPE})),this.metadataCache.setColumns(e,l,h),n){let T=this.context,S=this.metadataCache;setImmediate(async()=>{try{await S.prefetchColumnsForSchema(e,n,r,A=>Ee(T,A,!0,this.connectionManager,e))}catch(A){console.error("[SqlCompletion] Background column prefetch error:",A)}})}return h.map(T=>this.createColumnCompletionItem(T))}catch(d){return console.error(d),[]}finally{u.dispose()}}};var fl=j(require("vscode"));bn();var ih=class{constructor(){}generateHtml(){return`<!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Schema Search</title>
        <style>
            body {
                font-family: var(--vscode-font-family);
                padding: 0;
                margin: 0;
                color: var(--vscode-foreground);
                display: flex;
                flex-direction: column;
                height: 100vh;
                overflow: hidden;
            }
            .search-box {
                display: flex;
                gap: 5px;
                padding: 10px;
                flex-shrink: 0;
                border-bottom: 1px solid var(--vscode-panel-border);
            }
            input { flex-grow: 1; padding: 5px; background: var(--vscode-input-background); color: var(--vscode-input-foreground); border: 1px solid var(--vscode-input-border); }
            button {
                display: inline-flex;
                align-items: center;
                justify-content: center;
                gap: 6px;
                background-color: var(--vscode-button-secondaryBackground);
                color: var(--vscode-button-secondaryForeground);
                border: 1px solid var(--vscode-contrastBorder, transparent);
                padding: 4px 10px;
                cursor: pointer;
                border-radius: 2px;
                font-family: var(--vscode-font-family);
                font-size: 12px;
                line-height: 18px;
            }
            button:hover { background-color: var(--vscode-button-secondaryHoverBackground); }
            button.primary { background-color: var(--vscode-button-background); color: var(--vscode-button-foreground); }
            button.primary:hover { background-color: var(--vscode-button-hoverBackground); }
            #status { padding: 5px 10px; flex-shrink: 0; }
            .results {
                list-style: none;
                padding: 0;
                margin: 0;
                flex-grow: 1;
                overflow-y: auto;
            }
            .result-item { padding: 8px 10px; border-bottom: 1px solid var(--vscode-panel-border); display: flex; flex-direction: column; cursor: pointer; position: relative; }
            .result-item:hover { background: var(--vscode-list-hoverBackground); }
            .group-header {
                padding: 10px 10px 5px 10px;
                font-weight: bold;
                background: var(--vscode-editor-background);
                border-bottom: 1px solid var(--vscode-panel-border);
                display: flex;
                justify-content: space-between;
                align-items: center;
                cursor: pointer;
                user-select: none;
                position: sticky;
                top: 0;
                z-index: 10;
            }
            .group-header:hover {
                background: var(--vscode-list-hoverBackground);
            }
            .group-count {
                background: var(--vscode-badge-background);
                color: var(--vscode-badge-foreground);
                padding: 2px 8px;
                border-radius: 12px;
                font-size: 0.85em;
                font-weight: normal;
            }
            .group-toggle {
                display: inline-block;
                width: 12px;
                height: 12px;
                margin-right: 6px;
                transition: transform 0.2s;
            }
            .group-toggle.collapsed {
                transform: rotate(-90deg);
            }
            .group-items {
                display: contents;
            }
            .group-items.collapsed {
                display: none;
            }
            .item-header { display: flex; justify-content: space-between; font-weight: bold; }
            .item-details { font-size: 0.9em; opacity: 0.8; display: flex; gap: 10px; }
            .type-badge { font-size: 0.8em; background: var(--vscode-badge-background); color: var(--vscode-badge-foreground); padding: 2px 5px; border-radius: 3px; }
            .tooltip { position: absolute; background: var(--vscode-editorHoverWidget-background); color: var(--vscode-editorHoverWidget-foreground); border: 1px solid var(--vscode-editorHoverWidget-border); padding: 8px; border-radius: 4px; font-size: 0.9em; max-width: 300px; word-wrap: break-word; z-index: 1000; opacity: 0; visibility: hidden; transition: opacity 0.2s, visibility 0.2s; pointer-events: none; }
            .result-item:hover .tooltip { opacity: 1; visibility: visible; }
            .tooltip.top { bottom: 100%; left: 0; margin-bottom: 5px; }
            .tooltip.bottom { top: 100%; left: 0; margin-top: 5px; }
            .cache-badge { background-color: var(--vscode-charts-green); color: white; padding: 1px 4px; border-radius: 2px; font-size: 0.7em; margin-left: 5px; }
            .spinner {
                border: 2px solid transparent;
                border-top: 2px solid var(--vscode-progressBar-background);
                border-radius: 50%;
                width: 14px;
                height: 14px;
                animation: spin 1s linear infinite;
                display: inline-block;
                vertical-align: middle;
                margin-right: 8px;
            }
            @keyframes spin {
                0% { transform: rotate(0deg); }
                100% { transform: rotate(360deg); }
            }
            .options-row {
                display: flex;
                align-items: center;
                gap: 8px;
                padding: 5px 10px;
                font-size: 12px;
                border-bottom: 1px solid var(--vscode-panel-border);
            }
            .options-row label {
                display: flex;
                align-items: center;
                gap: 4px;
                cursor: pointer;
            }
            .options-row select {
                background: var(--vscode-dropdown-background);
                color: var(--vscode-dropdown-foreground);
                border: 1px solid var(--vscode-dropdown-border);
                padding: 3px 6px;
                border-radius: 2px;
                cursor: pointer;
                font-size: 12px;
            }
            .searching-indicator {
                display: flex;
                align-items: center;
                justify-content: center;
                padding: 20px;
                color: var(--vscode-descriptionForeground);
            }
        </style>
    </head>
    <body>
        <div class="search-box">
            <input type="text" id="searchInput" placeholder="Search tables, columns, view definitions, procedure source..." />
            <button id="searchBtn" class="primary">Search</button>
            <button id="cancelBtn" style="display: none;" title="Cancel search">\u2715</button>
            <button id="resetBtn" title="Reset search">\u21BA</button>
        </div>
        <div class="options-row">
            <label>
                Source search mode:
                <select id="sourceModeSelect">
                    <option value="">Objects Only</option>
                    <option value="raw">Source: Raw</option>
                    <option value="objectsRaw">Objects + Source Raw</option>
                    <option value="noComments">Source: No Comments</option>
                    <option value="noCommentsNoLiterals">Source: No Comments / Strings</option>
                </select>
            </label>
        </div>
        <div id="status"></div>
        <ul class="results" id="resultsList"></ul>

        <script>
            try {
                const vscode = acquireVsCodeApi();
                const searchInput = document.getElementById('searchInput');
                const searchBtn = document.getElementById('searchBtn');
                const cancelBtn = document.getElementById('cancelBtn');
                const resetBtn = document.getElementById('resetBtn');
                const sourceModeSelect = document.getElementById('sourceModeSelect');
                const resultsList = document.getElementById('resultsList');
                const status = document.getElementById('status');

                let isSearching = false;
                let allResults = [];

                function setSearchingState(searching) {
                    isSearching = searching;
                    cancelBtn.style.display = searching ? 'inline-flex' : 'none';
                    searchBtn.disabled = searching;
                }

                searchBtn.addEventListener('click', () => {
                    const term = searchInput.value;
                    if (term) {
                        allResults = [];
                        resultsList.innerHTML = '<li class="searching-indicator"><span class="spinner"></span> Searching...</li>';
                        status.textContent = '';
                        setSearchingState(true);

                        const sourceMode = sourceModeSelect.value;
                        if (sourceMode === 'objectsRaw') {
                            vscode.postMessage({ type: 'searchCombined', value: term, mode: 'raw' });
                        } else if (sourceMode && sourceMode !== '') {
                            vscode.postMessage({ type: 'searchSource', value: term, mode: sourceMode });
                        } else {
                            vscode.postMessage({ type: 'search', value: term });
                        }
                    }
                });

                searchInput.addEventListener('keyup', (e) => {
                    if (e.key === 'Enter') {
                        searchBtn.click();
                    }
                });

                cancelBtn.addEventListener('click', () => {
                    vscode.postMessage({ type: 'cancel' });
                });

                resetBtn.addEventListener('click', () => {
                    vscode.postMessage({ type: 'reset' });
                });

                window.addEventListener('message', event => {
                    const message = event.data;
                    switch (message.type) {
                        case 'results':
                            if (!message.append) {
                                allResults = [];
                                resultsList.innerHTML = '';
                            }
                            allResults = allResults.concat(message.data);
                            setSearchingState(false);
                            if (allResults.length === 0) {
                                if (!message.append) {
                                    resultsList.innerHTML = '<li style="padding: 10px; color: var(--vscode-descriptionForeground);">No results found.</li>';
                                }
                            } else {
                                renderResults(allResults);
                            }
                            break;
                        case 'searching':
                            status.textContent = message.message;
                            break;
                        case 'error':
                            setSearchingState(false);
                            status.textContent = 'Error: ' + message.message;
                            status.style.color = 'var(--vscode-errorForeground)';
                            break;
                        case 'cancelled':
                            setSearchingState(false);
                            status.textContent = 'Search cancelled.';
                            break;
                        case 'reset':
                            setSearchingState(false);
                            searchInput.value = '';
                            allResults = [];
                            resultsList.innerHTML = '';
                            status.textContent = '';
                            break;
                    }
                });

                function renderResults(results) {
                    resultsList.innerHTML = '';
                    const groups = {};
                    results.forEach(item => {
                        const groupKey = item.TYPE;
                        if (!groups[groupKey]) groups[groupKey] = [];
                        groups[groupKey].push(item);
                    });
                    const sortedGroups = Object.keys(groups).sort();
                    sortedGroups.forEach(type => {
                        const groupItems = groups[type];
                        const groupHeader = document.createElement('div');
                        groupHeader.className = 'group-header';
                        groupHeader.innerHTML = \`
                            <span><span class="group-toggle">\u25BC</span>\${type}</span>
                            <span class="group-count">\${groupItems.length}</span>
                        \`;
                        const itemsContainer = document.createElement('div');
                        itemsContainer.className = 'group-items';
                        groupHeader.addEventListener('click', () => {
                            const toggle = groupHeader.querySelector('.group-toggle');
                            toggle.classList.toggle('collapsed');
                            itemsContainer.classList.toggle('collapsed');
                        });
                        resultsList.appendChild(groupHeader);
                        groupItems.forEach(item => {
                            const li = document.createElement('li');
                            li.className = 'result-item';
                            let tooltipText = \`Type: \${item.TYPE}\\nDatabase: \${item.DATABASE}\\nSchema: \${item.SCHEMA}\`;
                            if (item.PARENT) tooltipText += \`\\nParent: \${item.PARENT}\`;
                            if (item.DESCRIPTION) tooltipText += \`\\n\${item.DESCRIPTION}\`;
                            const tooltip = document.createElement('div');
                            tooltip.className = 'tooltip top';
                            tooltip.textContent = tooltipText;
                            let html = \`
                                <div class="item-header">
                                    <span>\${item.NAME}</span>
                                </div>
                                <div class="item-details">
                                    <span>\${item.SCHEMA}.\${item.DATABASE}</span>
                            \`;
                            if (item.PARENT) html += \`<span>Parent: \${item.PARENT}</span>\`;
                            if (item.DESCRIPTION && item.DESCRIPTION !== 'Result from Cache') {
                                html += \`<span style="opacity: 0.7; font-style: italic;">\${item.DESCRIPTION}</span>\`;
                            }
                            if (item.DESCRIPTION === 'Result from Cache') {
                                html += \`<span class="cache-badge">Cached</span>\`;
                            }
                            html += \`</div>\`;
                            li.innerHTML = html;
                            li.appendChild(tooltip);
                            // Send payload with 'type' reserved for message action.
                            // Use 'objType' for the item's schema/object type to avoid overwriting type.
                            li.onclick = () => {
                                vscode.postMessage({ 
                                    type: 'navigate', 
                                    database: item.DATABASE,
                                    schema: item.SCHEMA,
                                    name: item.NAME,
                                    objType: item.TYPE,
                                    parent: item.PARENT,
                                    connectionName: item.connectionName
                                });
                            };
                            itemsContainer.appendChild(li);
                        });
                        resultsList.appendChild(itemsContainer);
                    });
                }
            } catch (err) {
                const errDiv = document.createElement('div');
                errDiv.style.color = 'red';
                errDiv.innerText = 'Script Error: ' + err.message;
                document.body.appendChild(errDiv);
            }
        </script>
    </body>
    </html>`}};function q5(t){let e="",n=0;for(;n<t.length;){if(t[n]==="-"&&n+1<t.length&&t[n+1]==="-"){for(;n<t.length&&t[n]!==`
`;)n++;n<t.length&&(e+=" ",n++);continue}if(t[n]==="/"&&n+1<t.length&&t[n+1]==="*"){for(n+=2;n<t.length-1&&!(t[n]==="*"&&t[n+1]==="/");)n++;n<t.length-1&&(n+=2),e+=" ";continue}if(t[n]==="'"){for(n++;n<t.length;)if(t[n]==="'"&&n+1<t.length&&t[n+1]==="'")n+=2;else if(t[n]==="'"){n++;break}else n++;e+=" ";continue}e+=t[n],n++}return e}function X5(t){let e="",n=0;for(;n<t.length;){if(t[n]==="-"&&n+1<t.length&&t[n+1]==="-"){for(;n<t.length&&t[n]!==`
`;)n++;n<t.length&&(e+=" ",n++);continue}if(t[n]==="/"&&n+1<t.length&&t[n+1]==="*"){for(n+=2;n<t.length-1&&!(t[n]==="*"&&t[n+1]==="/");)n++;n<t.length-1&&(n+=2),e+=" ";continue}if(t[n]==="'"){for(e+=t[n],n++;n<t.length;)if(t[n]==="'"&&n+1<t.length&&t[n+1]==="'")e+="''",n+=2;else if(t[n]==="'"){e+=t[n],n++;break}else e+=t[n],n++;continue}e+=t[n],n++}return e}function Km(t,e,n){let r;switch(n){case"raw":r=t;break;case"noComments":r=X5(t);break;case"noCommentsNoLiterals":default:r=q5(t);break}return r.toUpperCase().includes(e.toUpperCase())}Mo();fu();var Lu=class{constructor(e,n,r,i){this._extensionUri=e;this.context=n;this.metadataCache=r;this.connectionManager=i;this.currentSearchId=0}static{this.viewType="netezza.search"}resolveWebviewView(e,n,r){this._view=e,e.webview.options={enableScripts:!0,localResourceRoots:[this._extensionUri]},e.webview.html=new ih().generateHtml(),e.webview.onDidReceiveMessage(async i=>{switch(i.type){case"search":await this.search(i.value);break;case"searchSource":await this.searchSourceCode(i.value,i.mode||"noCommentsNoLiterals");break;case"searchCombined":await this.doCombinedSearch(i.value,i.mode||"raw");break;case"navigate":fl.commands.executeCommand("netezza.revealInSchema",i);break;case"cancel":this.currentSearchId++,this._view?.webview.postMessage({type:"cancelled"});break;case"reset":this.currentSearchId++,this._view?.webview.postMessage({type:"reset"});break}})}async getDatabases(e,n){let r=[];try{let i=await Ee(this.context,Qe.LIST_DATABASES,!0,this.connectionManager,e);i&&i.data&&(r=ge(i).map(o=>o.DATABASE))}catch(i){console.error("Error fetching databases for search:",i)}return r.length===0&&n&&n.database&&(r=[n.database]),r}async search(e,n,r,i){if(!e||e.length<2)return;let s,o=fl.window.activeTextEditor;if(o&&o.document.languageId==="sql"&&(s=this.connectionManager.getConnectionForExecution(o.document.uri.toString())),s||(s=this.connectionManager.getActiveConnectionName()||void 0),!s){this._view?.webview.postMessage({type:"results",data:[],append:!!r});return}n===void 0&&(n=++this.currentSearchId);let a=new Set;if(this._view){let p=this.metadataCache.search(e,s);if(p.length>0){let h=[];p.forEach(T=>{let S=`${T.name.toUpperCase().trim()}|${T.type.toUpperCase().trim()}|${(T.parent||"").toUpperCase().trim()}`;a.has(S)||(a.add(S),h.push({NAME:T.name,SCHEMA:T.schema||"",DATABASE:T.database||"",TYPE:(T.type||"").toString().trim().toUpperCase(),PARENT:T.parent||"",DESCRIPTION:"Result from Cache",MATCH_TYPE:"NAME",connectionName:s}))}),h.sort((T,S)=>{let A=R=>R==="COLUMN"?2:1;return A(S.TYPE)-A(T.TYPE)?A(T.TYPE)-A(S.TYPE):T.NAME.localeCompare(S.NAME)}),h.length>0&&n===this.currentSearchId&&this._view.webview.postMessage({type:"results",data:h,append:!1})}else n===this.currentSearchId&&this._view.webview.postMessage({type:"searching",message:"Searching in database..."});this.metadataCache.hasAllObjectsPrefetchTriggered(s)||this.metadataCache.prefetchAllObjects(s,async h=>Ee(this.context,h,!0,this.connectionManager,s))}let c=`%${e.replace(/'/g,"''").toUpperCase()}%`,u=await this.connectionManager.getConnection(s);if(!u){this._view?.webview.postMessage({type:"results",data:[],append:!!r});return}let d=[];if(i?d=i:d=await this.getDatabases(s,u),d.length===0){this._view?.webview.postMessage({type:"results",data:[],append:!!r});return}let E=8,f=d.map(p=>async()=>{let h=p.toUpperCase(),T=`
                SELECT * FROM (
                    -- Part 1: Objects (Tables, Views, etc) matching NAME
                    SELECT 1 AS PRIORITY, OBJNAME AS NAME, SCHEMA, DBNAME AS DATABASE, OBJTYPE AS TYPE, '' AS PARENT, 
                           COALESCE(DESCRIPTION, '') AS DESCRIPTION, 'NAME' AS MATCH_TYPE
                    FROM ${h}..${te.OBJECT_DATA}
                    WHERE DBNAME = '${h}' AND UPPER(OBJNAME) LIKE '${c}'
                    UNION ALL
                    -- Part 2: Objects matching DESCRIPTION  
                    SELECT 1 AS PRIORITY, OBJNAME AS NAME, SCHEMA, DBNAME AS DATABASE, OBJTYPE AS TYPE, '' AS PARENT, 
                           COALESCE(DESCRIPTION, '') AS DESCRIPTION, 'OBJ_DESC' AS MATCH_TYPE
                    FROM ${h}..${te.OBJECT_DATA}
                    WHERE DBNAME = '${h}' AND UPPER(DESCRIPTION) LIKE '${c}' AND UPPER(OBJNAME) NOT LIKE '${c}'
                    UNION ALL
                    -- Part 3: Columns matching NAME
                    SELECT 2 AS PRIORITY, C.ATTNAME AS NAME, O.SCHEMA, O.DBNAME AS DATABASE, 'COLUMN' AS TYPE, O.OBJNAME AS PARENT,
                           COALESCE(C.DESCRIPTION, '') AS DESCRIPTION, 'NAME' AS MATCH_TYPE
                    FROM ${h}..${te.RELATION_COLUMN} C
                    JOIN ${h}..${te.OBJECT_DATA} O ON C.OBJID = O.OBJID
                    WHERE O.DBNAME = '${h}' AND UPPER(C.ATTNAME) LIKE '${c}'
                    UNION ALL
                    -- Part 4: Columns matching DESCRIPTION (NEW!)
                    SELECT 2 AS PRIORITY, C.ATTNAME AS NAME, O.SCHEMA, O.DBNAME AS DATABASE, 'COLUMN' AS TYPE, O.OBJNAME AS PARENT,
                           COALESCE(C.DESCRIPTION, '') AS DESCRIPTION, 'COL_DESC' AS MATCH_TYPE
                    FROM ${h}..${te.RELATION_COLUMN} C
                    JOIN ${h}..${te.OBJECT_DATA} O ON C.OBJID = O.OBJID
                    WHERE O.DBNAME = '${h}' AND UPPER(C.DESCRIPTION) LIKE '${c}' AND UPPER(C.ATTNAME) NOT LIKE '${c}'
                    UNION ALL
                    -- Part 5: External Tables matching DATAOBJECT
                    SELECT 3 AS PRIORITY, E1.TABLENAME AS NAME, E1.SCHEMA, E1.DATABASE, 'EXTERNAL TABLE' AS TYPE, '' AS PARENT,
                           COALESCE(E2.EXTOBJNAME, '') AS DESCRIPTION, 'DATAOBJECT' AS MATCH_TYPE
                    FROM ${h}..${te.EXTERNAL} E1
                    JOIN ${h}..${te.EXTOBJECT} E2 ON E1.DATABASE = E2.DATABASE AND E1.SCHEMA = E2.SCHEMA AND E1.TABLENAME = E2.TABLENAME
                    WHERE E1.DATABASE = '${h}' AND UPPER(E2.EXTOBJNAME) LIKE '${c}'
                ) AS R
                ORDER BY PRIORITY, NAME
                LIMIT 200
            `;try{let S=await this.runSearchOnDatabase(u,p,T);if(S&&S.data&&n===this.currentSearchId)return ge(S)}catch(S){console.debug(`Error searching in database ${p}:`,S)}return[]});try{let p=await this.runWithConcurrencyLimit(f,E);if(n!==this.currentSearchId)return;let h=[];for(let T of p)for(let S of T){let A=S,R=`${A.NAME.toUpperCase().trim()}|${A.TYPE.toUpperCase().trim()}|${(A.PARENT||"").toUpperCase().trim()}|${A.DATABASE}`;a.has(R)||(h.push({NAME:A.NAME,SCHEMA:A.SCHEMA,DATABASE:A.DATABASE,TYPE:(A.TYPE||"").toString().trim().toUpperCase(),PARENT:A.PARENT,DESCRIPTION:A.DESCRIPTION,MATCH_TYPE:A.MATCH_TYPE,connectionName:s}),a.add(R))}h.sort((T,S)=>{let A=N=>N==="COLUMN"?2:N==="EXTERNAL TABLE"?3:1,R=A(T.TYPE),m=A(S.TYPE);return R!==m?R-m:T.NAME.localeCompare(S.NAME)}),h.length>0&&this._view?this._view.webview.postMessage({type:"results",data:h,append:!0}):a.size===0&&this._view&&this._view.webview.postMessage({type:"results",data:[],append:!!r})}catch(p){console.error("Search error:",p),this._view&&n===this.currentSearchId&&this._view.webview.postMessage({type:"error",message:p instanceof Error?p.message:String(p)})}}async runSearchOnDatabase(e,n,r){let i=Em({host:e.host,port:e.port||5480,database:n||e.database,user:e.user,password:e.password});try{await i.connect();let s=i.createCommand(r);s.commandTimeout=30;let o=await s.executeReader(),a=[];for(let c=0;c<o.fieldCount;c++)a.push({name:o.getName(c)});let l=[];for(;await o.read();){let c=[];for(let u=0;u<o.fieldCount;u++)c.push(o.getValue(u));l.push(c)}return await o.close(),{columns:a,data:l,rowsAffected:void 0,limitReached:!1,sql:r}}finally{try{await i.close()}catch{}}}async runWithConcurrencyLimit(e,n){if(e.length===0)return[];let r=new Array(e.length),i=0,s=async()=>{for(;;){let l=i;if(l>=e.length)break;i=l+1;try{let c=await e[l]();r[l]=c}catch(c){console.debug(`Task ${l} failed:`,c),r[l]=[]}}},o=Math.min(n,e.length),a=[];for(let l=0;l<o;l++)a.push(s());return await Promise.all(a),r.filter(l=>l!==void 0)}async searchSourceCode(e,n,r,i,s){if(!e||e.length<2)return;let o,a=fl.window.activeTextEditor;if(a&&a.document.languageId==="sql"&&(o=this.connectionManager.getConnectionForExecution(a.document.uri.toString())),o||(o=this.connectionManager.getActiveConnectionName()||void 0),!o){this._view?.webview.postMessage({type:"results",data:[],append:!!i});return}let l=await this.connectionManager.getConnection(o);if(!l){this._view?.webview.postMessage({type:"results",data:[],append:!!i});return}r===void 0&&(r=++this.currentSearchId);let c=n==="raw"?"raw source":n==="noComments"?"source (excl. comments)":"source (excl. comments/strings)";try{this._view&&r===this.currentSearchId&&this._view.webview.postMessage({type:"searching",message:`Searching in ${c}...`});let u=e.replace(/'/g,"''").toUpperCase(),d=`%${u}%`,E=[],f=[];s?f=s.filter(m=>m!=="SYSTEM"):f=(await this.getDatabases(o,l)).filter(N=>N!=="SYSTEM");let p=n==="raw",h=8,T=f.map(m=>async()=>{let N=p?`SELECT VIEWNAME AS NAME, SCHEMA, DATABASE 
                       FROM ${m}.._V_VIEW 
                       WHERE DATABASE != 'SYSTEM' AND UPPER(DEFINITION) LIKE '${d}'`:`SELECT VIEWNAME AS NAME, SCHEMA, DATABASE, DEFINITION AS SOURCE 
                       FROM ${m}.._V_VIEW 
                       WHERE DATABASE != 'SYSTEM'`;try{let L=await this.runSearchOnDatabase(l,m,N);if(L&&L.data&&r===this.currentSearchId){let I=ge(L),D=[];for(let g of I)(p||g.SOURCE&&Km(g.SOURCE,u,n))&&D.push({NAME:g.NAME,SCHEMA:g.SCHEMA,DATABASE:g.DATABASE,TYPE:"VIEW",PARENT:"",DESCRIPTION:`Found in view ${c}`,MATCH_TYPE:"SOURCE_CODE",connectionName:o});return D}}catch(L){console.debug(`Error searching views in database ${m}:`,L)}return[]}),S=await this.runWithConcurrencyLimit(T,h);for(let m of S)E.push(...m);let A=f.map(m=>async()=>{let N=p?`SELECT PROCEDURE AS NAME, SCHEMA, DATABASE FROM ${m}.._V_PROCEDURE WHERE DATABASE != 'SYSTEM' AND UPPER(PROCEDURESOURCE) LIKE '${d}'`:`SELECT PROCEDURE AS NAME, SCHEMA, DATABASE, PROCEDURESOURCE AS SOURCE FROM ${m}.._V_PROCEDURE WHERE DATABASE != 'SYSTEM'`;try{let L=await this.runSearchOnDatabase(l,m,N);if(L&&L.data&&r===this.currentSearchId){let I=ge(L),D=[];for(let g of I)(p||g.SOURCE&&Km(g.SOURCE,u,n))&&D.push({NAME:g.NAME,SCHEMA:g.SCHEMA,DATABASE:g.DATABASE,TYPE:"PROCEDURE",PARENT:"",DESCRIPTION:`Found in procedure ${c}`,MATCH_TYPE:"SOURCE_CODE",connectionName:o});return D}}catch(L){console.debug(`Error searching procedures in database ${m}:`,L)}return[]}),R=await this.runWithConcurrencyLimit(A,h);for(let m of R)E.push(...m);this._view&&r===this.currentSearchId&&this._view.webview.postMessage({type:"results",data:E,append:!0})}catch(u){console.error("Source code search error:",u),this._view&&r===this.currentSearchId&&this._view.webview.postMessage({type:"error",message:u instanceof Error?u.message:String(u)})}}async doCombinedSearch(e,n){let r=++this.currentSearchId,i,s=fl.window.activeTextEditor;s&&s.document.languageId==="sql"&&(i=this.connectionManager.getConnectionForExecution(s.document.uri.toString())),i||(i=this.connectionManager.getActiveConnectionName()||void 0);let o;if(i){let a=await this.connectionManager.getConnection(i);a&&(o=await this.getDatabases(i,a))}this.search(e,r,!0,o),this.searchSourceCode(e,n,r,!0,o)}};Bo();var El=j(require("vscode"));Bo();var sh=class{provideDocumentLinks(e,n){let r=[],i=e.getText(),s=/[a-zA-Z0-9_"]+(\.[a-zA-Z0-9_"]*)+/g,o;for(;(o=s.exec(i))!==null;){let a=e.positionAt(o.index),l=e.positionAt(o.index+o[0].length),c=new El.Range(a,l),u=Zn.getObjectAtPosition(i,o.index+Math.floor(o[0].length/2));if(u){if(o[0].split(".").length===2&&!u.database&&this.isLikelyAliasReference(i,o.index))continue;let f={name:u.name,schema:u.schema,database:u.database},p=El.Uri.parse(`command:netezza.revealInSchema?${encodeURIComponent(JSON.stringify(f))}`),h=new El.DocumentLink(c,p);h.tooltip=`Reveal ${u.name} in Schema`,r.push(h)}}return r}isLikelyAliasReference(e,n){let i=e.substring(Math.max(0,n-200),n).replace(/--[^\n]*/g,"").replace(/\/\*[\s\S]*?\*\//g,"").toUpperCase();return/(?:FROM|JOIN)\s+[a-zA-Z0-9_"]*$/i.test(i)?!1:!!i.match(/\b(SELECT|WHERE|ON|HAVING|ORDER\s+BY|GROUP\s+BY|AND|OR|SET|VALUES)\b(?!.*\b(?:FROM|JOIN)\b)/)}};var ah=j(require("vscode")),oh=class{provideFoldingRanges(e,n,r){let i=[],s=[],o=/^\s*--\s*REGION\b/i,a=/^\s*--\s*ENDREGION\b/i;for(let l=0;l<e.lineCount;l++){let u=e.lineAt(l).text;if(o.test(u))s.push(l);else if(a.test(u)&&s.length>0){let d=s.pop();i.push(new ah.FoldingRange(d,l,ah.FoldingRangeKind.Region))}}return i}};var pn=j(require("vscode"));ME();var Du=class t{constructor(e,n){this._extensionUri=e;this._context=n;this._currentOffset=0}static{this.viewType="netezza.queryHistory"}static{this.PAGE_SIZE=50}resolveWebviewView(e,n,r){this._view=e,e.webview.options={enableScripts:!0,localResourceRoots:[this._extensionUri]},e.webview.html=this._getHtmlForWebview(e.webview),this.sendHistoryToWebview(!0),e.webview.onDidReceiveMessage(async i=>{switch(i.type){case"refresh":this.refresh();break;case"loadMore":await this.loadMore();break;case"searchArchive":await this.searchArchive(i.term);break;case"clearAll":await this.clearAllHistory();break;case"deleteEntry":await this.deleteEntry(i.id,i.query);break;case"copyQuery":await pn.env.clipboard.writeText(i.query),pn.window.showInformationMessage("Query copied to clipboard");break;case"executeQuery":await this.executeQuery(i.query);break;case"getHistory":await this.sendHistoryToWebview(!0);break;case"toggleFavorite":await this.toggleFavorite(i.id);break;case"updateEntry":await this.updateEntry(i.id,i.tags,i.description);break;case"requestEdit":await this.requestEdit(i.id);break;case"requestTagFilter":await this.requestTagFilter(i.tags);break;case"showFavoritesOnly":await this.sendFavoritesToWebview();break;case"filterByTag":await this.sendFilteredByTagToWebview(i.tag);break}})}refresh(){this._view&&this.sendHistoryToWebview(!0)}async loadMore(){this._view&&(this._currentOffset+=t.PAGE_SIZE,this.sendHistoryToWebview(!1))}async searchArchive(e){if(!this._view)return;let n=Nn.getInstance(this._context),r=await n.searchArchive(e),i=await n.getStats(),s=r.map(({schema:o,...a})=>a);this._view.webview.postMessage({type:"archiveSearchResults",history:s,stats:i,term:e})}async sendHistoryToWebview(e=!1){if(!this._view)return;e&&(this._currentOffset=0);let n=Nn.getInstance(this._context),r=await n.getHistory(t.PAGE_SIZE,this._currentOffset),i=await n.getStats(),s=r.map(({schema:o,...a})=>a);console.log(`QueryHistoryView: sending history to webview, entries=${r.length}, offset=${this._currentOffset}, reset=${e}`),this._view.webview.postMessage({type:"historyData",history:s,stats:i,reset:e})}async clearAllHistory(){await pn.window.showWarningMessage("Are you sure you want to clear all query history?",{modal:!0},"Clear All")==="Clear All"&&(await Nn.getInstance(this._context).clearHistory(),this.refresh(),pn.window.showInformationMessage("Query history cleared"))}async deleteEntry(e,n){let r=n?`: ${n.substring(0,50)}${n.length>50?"...":""}`:"";if(await pn.window.showWarningMessage(`Are you sure you want to delete this query${r}?`,{modal:!0},"Delete")==="Delete"){let s=Nn.getInstance(this._context);await s.deleteEntry(e),this._view?.webview.postMessage({type:"entryDeleted",id:e});let o=await s.getStats();this._view?.webview.postMessage({type:"updateStats",stats:o})}}async executeQuery(e){let n=await pn.workspace.openTextDocument({content:e,language:"sql"});await pn.window.showTextDocument(n)}async toggleFavorite(e){await Nn.getInstance(this._context).toggleFavorite(e),this.refresh()}async updateEntry(e,n,r){await Nn.getInstance(this._context).updateEntry(e,n,r),this.refresh(),pn.window.showInformationMessage("Entry updated successfully")}async requestEdit(e){let i=(await Nn.getInstance(this._context).getHistory()).find(a=>a.id===e);if(!i){pn.window.showErrorMessage("Entry not found (might be archived)");return}let s=await pn.window.showInputBox({prompt:"Enter tags (comma separated)",value:i.tags||"",placeHolder:"tag1, tag2, tag3"});if(s===void 0)return;let o=await pn.window.showInputBox({prompt:"Enter description",value:i.description||"",placeHolder:"Description for this query"});o!==void 0&&await this.updateEntry(e,s,o)}async requestTagFilter(e){if(e.length===1)await this.sendFilteredByTagToWebview(e[0]);else if(e.length>1){let n=await pn.window.showQuickPick(e,{placeHolder:"Filter by which tag?"});n&&await this.sendFilteredByTagToWebview(n)}}async sendFavoritesToWebview(){if(!this._view)return;let e=Nn.getInstance(this._context),n=await e.getFavorites(),r=await e.getStats(),i=n.map(({schema:s,...o})=>o);this._view.webview.postMessage({type:"historyData",history:i,stats:r,filter:"favorites",reset:!0})}async sendFilteredByTagToWebview(e){if(!this._view)return;let n=Nn.getInstance(this._context),r=await n.getByTag(e),i=await n.getStats(),s=r.map(({schema:o,...a})=>a);this._view.webview.postMessage({type:"historyData",history:s,stats:i,filter:`tag: ${e}`,reset:!0})}_getHtmlForWebview(e){let n=e.asWebviewUri(pn.Uri.joinPath(this._extensionUri,"media","queryHistory.css")),r=e.asWebviewUri(pn.Uri.joinPath(this._extensionUri,"media","queryHistory.js"));return`<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Security-Policy" content="default-src 'none'; style-src ${e.cspSource}; script-src ${e.cspSource};">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Query History</title>
    <link href="${n}" rel="stylesheet">
</head>
<body>
    <div class="toolbar">
        <div class="toolbar-top">
            <input type="search" id="searchInput" placeholder="Search queries..." />
            <span class="stats" id="stats">Loading...</span>
        </div>
        <div class="toolbar-buttons">
            <button class="secondary" id="showAllBtn">\u{1F4DC} All</button>
            <button class="secondary" id="showFavoritesBtn">\u2B50 Favorites</button>
            <button class="secondary" id="refreshBtn">\u21BB Refresh</button>
            <button class="secondary" id="clearAllBtn">\u{1F5D1}\uFE0F Clear All</button>
        </div>
    </div>
    <div class="history-container" id="historyContainer">
        <div class="empty-state">
            <div class="empty-state-icon">\u{1F4DC}</div>
            <div>No query history yet</div>
        </div>
    </div>
    <div id="loadingIndicator" class="loading-indicator" style="display:none;">Loading more...</div>

    <script src="${r}"></script>
</body>
</html>`}};var $t=j(require("vscode"));bn();var lh=class t{static{this.viewType="netezza.editData"}static async createOrShow(e,n,r,i){if(!n||!n.label||!n.dbName||!n.schema){$t.window.showErrorMessage("Invalid table selection");return}let s=n.label,o=n.schema,a=n.dbName,l=`${a}.${o}.${s}`,c=$t.window.createWebviewPanel(t.viewType,`Edit: ${s}`,$t.ViewColumn.One,{enableScripts:!0,localResourceRoots:[$t.Uri.joinPath(e,"media")],retainContextWhenHidden:!0});c.webview.html=this._getHtmlForWebview(c.webview,e,l),this._loadData(c,a,o,s,n.connectionName,r,i),c.webview.onDidReceiveMessage(async u=>{try{switch(u.command){case"save":await this._handleSave(c,u.changes,l,n.connectionName,r,i),this._loadData(c,a,o,s,n.connectionName,r,i,{whereClause:u.whereClause,columns:u.columns});break;case"refresh":this._loadData(c,a,o,s,n.connectionName,r,i,{whereClause:u.whereClause,columns:u.columns});break;case"updateTableComment":await this._execSimpleCommand(r,i,n.connectionName,`COMMENT ON TABLE ${l} IS '${(u.comment||"").replace(/'/g,"''")}'`,"Table comment updated");break;case"updateColumnComment":await this._execSimpleCommand(r,i,n.connectionName,`COMMENT ON COLUMN ${l}.${u.column} IS '${(u.comment||"").replace(/'/g,"''")}'`,"Column comment updated");break;case"addColumn":await this._execSimpleCommand(r,i,n.connectionName,`ALTER TABLE ${l} ADD COLUMN ${u.name} ${u.type}`,`Column ${u.name} added`,!0),this._loadData(c,a,o,s,n.connectionName,r,i);break;case"dropColumn":await this._execSimpleCommand(r,i,n.connectionName,`ALTER TABLE ${l} DROP COLUMN ${u.column}`,`Column ${u.column} dropped`,!0),this._loadData(c,a,o,s,n.connectionName,r,i);break;case"error":$t.window.showErrorMessage(u.text);break;case"info":$t.window.showInformationMessage(u.text);break}}catch(d){$t.window.showErrorMessage(`Error: ${d instanceof Error?d.message:String(d)}`)}})}static async _execSimpleCommand(e,n,r,i,s,o=!1){try{await Cn(e,i,!0,r,n),$t.window.showInformationMessage(s)}catch(a){$t.window.showErrorMessage(`Operation failed: ${a instanceof Error?a.message:String(a)}`)}}static async _loadData(e,n,r,i,s,o,a,l={}){let c=`${n}.${r}.${i}`;try{e.webview.postMessage({command:"setLoading",loading:!0,message:"Fetching data..."});let u=R=>Ee(o,R,!0,a,s),d="ROWID, *";if(l.columns&&l.columns.trim()){let R=l.columns.trim();/\bROWID\b/i.test(R)?d=R:d="ROWID, "+R}let E=`SELECT ${d} FROM ${c}`;if(l.whereClause&&l.whereClause.trim()){let R=l.whereClause.trim();/^\s*WHERE\s/i.test(R)?E+=` ${R}`:E+=` WHERE ${R}`}E+=" ORDER BY ROWID LIMIT 50000";let[f,p]=await Promise.all([Ee(o,E,!0,a,s),fD(u,n,r,i)]),h=p.tableComment||"",T=ED(p.columns),S=[];try{f&&f.data?(S=ge(f),console.log("[EditDataProvider] Parsed data rows:",S.length)):console.log("[EditDataProvider] No data returned")}catch(R){console.error("[EditDataProvider] Data Parse Error",R)}let A=[];if(S.length>0)A=Object.keys(S[0]),A.includes("ROWID")&&(A=["ROWID",...A.filter(R=>R!=="ROWID")]);else if(l.columns&&l.columns.trim()){let R=l.columns.trim().split(",").map(N=>N.trim()).filter(N=>N);A=R.some(N=>N.toUpperCase()==="ROWID")?R:["ROWID",...R]}else T.length>0&&(A=["ROWID",...T.map(R=>R.ATTNAME)]);console.log("[EditDataProvider] Sending to webview:",{dataRows:S.length,columns:A.length}),e.webview.postMessage({command:"setData",data:S,columns:A,metadata:{tableComment:h,columns:T}})}catch(u){let d=u instanceof Error?u.message:String(u);$t.window.showErrorMessage(`Failed to load data: ${d}`),e.webview.postMessage({command:"setError",text:d})}finally{e.webview.postMessage({command:"setLoading",loading:!1})}}static async _handleSave(e,n,r,i,s,o){let a=[];if(n.deletes&&n.deletes.length>0){let l=n.deletes.join(",");a.push(`DELETE FROM ${r} WHERE ROWID IN (${l})`)}if(n.updates&&n.updates.length>0)for(let l of n.updates){let c=[];for(let[u,d]of Object.entries(l.changes))u!=="ROWID"&&c.push(`${u} = ${this._formatValue(d)}`);c.length>0&&a.push(`UPDATE ${r} SET ${c.join(", ")} WHERE ROWID = ${l.rowId}`)}if(n.inserts&&n.inserts.length>0)for(let l of n.inserts){let c=Object.keys(l).filter(d=>d!=="ROWID");if(c.length===0)continue;let u=c.map(d=>this._formatValue(l[d]));a.push(`INSERT INTO ${r} (${c.join(", ")}) VALUES (${u.join(", ")})`)}if(a.length===0){$t.window.showInformationMessage("No changes to save.");return}try{let l=["BEGIN",...a,"COMMIT"];await cl(s,l,o),$t.window.showInformationMessage(`Successfully executed ${a.length} changes.`)}catch(l){$t.window.showErrorMessage(`Failed to save changes: ${l instanceof Error?l.message:String(l)}`)}}static _formatValue(e){return e==null||e===""?"NULL":typeof e=="number"?e.toString():typeof e=="boolean"?e?"TRUE":"FALSE":`'${String(e).replace(/'/g,"''")}'`}static _getHtmlForWebview(e,n,r){let i=e.asWebviewUri($t.Uri.joinPath(n,"media","tanstack-table-core.js")),s=e.asWebviewUri($t.Uri.joinPath(n,"media","tanstack-virtual-core.js")),o=e.asWebviewUri($t.Uri.joinPath(n,"dist","media","editDataPanel.js")),a=e.asWebviewUri($t.Uri.joinPath(n,"media","editDataPanel.css")),l=e.asWebviewUri($t.Uri.joinPath(n,"media","codicon.ttf")),c=z5();return`<!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="UTF-8">
            <meta http-equiv="Content-Security-Policy" content="default-src 'none'; font-src ${e.cspSource}; style-src ${e.cspSource} 'unsafe-inline'; script-src 'nonce-${c}';">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <link href="${a}" rel="stylesheet">
            <style>
                @font-face {
                    font-family: 'codicon';
                    src: url('${l}') format('truetype');
                }
                .codicon { font-family: 'codicon'; }
            </style>
            <script nonce="${c}" src="${i}"></script>
            <script nonce="${c}" src="${s}"></script>
            <title>Edit Data: ${r}</title>
        </head>
        <body>
            <div class="main-layout">
                <!-- Tabs Header -->
                <div class="tabs-header">
                    <div class="tab active" data-target="tab-data">
                        Data
                    </div>
                    <div class="tab" data-target="tab-metadata">
                        Table Description
                    </div>
                </div>

                <!-- Tab: Data -->
                <div id="tab-data" class="tab-content active">
                    <div class="toolbar">
                        <div class="filter-container">
                            <input type="text" id="filterColumns" class="toolbar-input" placeholder="Columns (e.g. ID, NAME)" title="Columns to select">
                            <input type="text" id="filterWhere" class="toolbar-input" placeholder="WHERE clause (e.g. ID > 100)" title="WHERE filter condition">
                        </div>
                        <span id="status" class="status"></span>
                        <div class="actions">
                            <button id="refreshBtn" title="Apply Filter / Refresh">Refresh</button>
                            <button id="addRowBtn">Add Row</button>
                            <button id="saveBtn" class="primary">Save Changes</button>
                        </div>
                    </div>
                    <div id="gridContainer" class="grid-container"></div>
                </div>

                <!-- Tab: Metadata -->
                <div id="tab-metadata" class="tab-content">
                    <div id="metadataContent" class="metadata-content">
                        <!-- Populated by JS -->
                        Loading metadata...
                    </div>
                </div>
            </div>
            
            <script nonce="${c}" src="${o}"></script>
        </body>
        </html>`}};function z5(){let t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let n=0;n<32;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}Nm();Om();Cm();ym();var ch=class{constructor(e){this.storage=new Ru,this.persistence=new mu(e,this.storage),this.prefetcher=new _u(this.storage),this.storage.setOnDataChange(n=>{this.persistence.scheduleSave(n)})}async initialize(){return this.persistence.initialize()}scheduleSave(e){this.persistence.scheduleSave(e)}async flushSave(){return this.persistence.flushSave()}async clearCache(){return this.persistence.clearCache()}getDatabases(e){return this.storage.getDatabases(e)}setDatabases(e,n){this.storage.setDatabases(e,n)}getSchemas(e,n){return this.storage.getSchemas(e,n)}setSchemas(e,n,r){this.storage.setSchemas(e,n,r)}getTables(e,n){return this.storage.getTables(e,n)}getTablesAllSchemas(e,n){return this.storage.getTablesAllSchemas(e,n)}setTables(e,n,r,i){this.storage.setTables(e,n,r,i)}getObjectsWithSchema(e,n){return this.storage.getObjectsWithSchema(e,n)}getColumns(e,n){return this.storage.getColumns(e,n)}getColumnsAnySchema(e,n,r){return this.storage.getColumnsAnySchema(e,n,r)}setColumns(e,n,r){this.storage.setColumns(e,n,r)}findTableId(e,n){return this.storage.findTableId(e,n)}getTypeGroups(e,n){return this.storage.getTypeGroups(e,n)}setTypeGroups(e,n,r){this.storage.setTypeGroups(e,n,r)}findObjectWithType(e,n,r,i){return this.storage.findObjectWithType(e,n,r,i)}invalidateSchema(e,n,r){this.storage.invalidateSchema(e,n,r)}search(e,n){return bm(this.storage,e,n)}async prefetchColumnsForSchema(e,n,r,i){return this.prefetcher.prefetchColumnsForSchema(e,n,r,i)}async prefetchAllObjects(e,n,r){return this.prefetcher.prefetchAllObjects(e,n,!1,r)}hasAllObjectsPrefetchTriggered(e){return this.prefetcher.hasAllObjectsPrefetchTriggered(e)}hasConnectionPrefetchTriggered(e){return this.prefetcher.hasConnectionPrefetchTriggered(e)}triggerConnectionPrefetch(e,n){this.prefetcher.triggerConnectionPrefetch(e,n)}get schemaCache(){return this.storage.schemaCache}get tableCache(){return this.storage.tableCache}get columnCache(){return this.storage.columnCache}get tableIdMap(){return this.storage.tableIdMap}get typeGroupCache(){return this.storage.typeGroupCache}};var hr=j(require("vscode"));var Qt=j(require("vscode"));function XD(t){switch(t){case"error":return Qt.DiagnosticSeverity.Error;case"warning":return Qt.DiagnosticSeverity.Warning;case"information":return Qt.DiagnosticSeverity.Information;case"hint":return Qt.DiagnosticSeverity.Hint;case"off":return null;default:return Qt.DiagnosticSeverity.Warning}}function Jm(t,e){let n=!1,r=!1,i=!1,s=!1;for(let o=0;o<e&&o<t.length;o++){let a=t[o],l=o+1<t.length?t[o+1]:"";i?a===`
`&&(i=!1):s?a==="*"&&l==="/"&&(s=!1,o++):n?a==="'"&&(n=!1):r?a==='"'&&(r=!1):a==="-"&&l==="-"?i=!0:a==="/"&&l==="*"?s=!0:a==="'"?n=!0:a==='"'&&(r=!0)}return n||r||i||s}function ur(t,e){let n=[],r,i=new RegExp(e.source,e.flags.includes("g")?e.flags:e.flags+"g");for(;(r=i.exec(t))!==null;)Jm(t,r.index)||n.push(r);return n}var j5={id:"NZ001",name:"Select Star",description:"Avoid using SELECT * - specify explicit column names for better performance and maintainability",defaultSeverity:Qt.DiagnosticSeverity.Warning,check(t){let e=[],r=ur(t,/\bSELECT\s+\*/gi);for(let i of r){let s=i[0].indexOf("*");e.push({ruleId:this.id,message:`${this.id}: ${this.description}`,severity:this.defaultSeverity,startOffset:i.index+s,endOffset:i.index+s+1})}return e}},K5={id:"NZ002",name:"Delete Without Where",description:"DELETE statement without WHERE clause will delete all rows",defaultSeverity:Qt.DiagnosticSeverity.Error,check(t){let e=[],r=ur(t,/\bDELETE\s+FROM\s+[\w."]+/gi);for(let i of r){let s=t.substring(i.index+i[0].length),o=s.indexOf(";"),a=o>=0?s.substring(0,o):s;/\bWHERE\b/i.test(a)||e.push({ruleId:this.id,message:`${this.id}: ${this.description}`,severity:this.defaultSeverity,startOffset:i.index,endOffset:i.index+6})}return e}},J5={id:"NZ003",name:"Update Without Where",description:"UPDATE statement without WHERE clause will update all rows",defaultSeverity:Qt.DiagnosticSeverity.Error,check(t){let e=[],r=ur(t,/\bUPDATE\s+[\w."]+\s+SET\b/gi);for(let i of r){let s=t.substring(i.index+i[0].length),o=s.indexOf(";"),a=o>=0?s.substring(0,o):s;/\bWHERE\b/i.test(a)||e.push({ruleId:this.id,message:`${this.id}: ${this.description}`,severity:this.defaultSeverity,startOffset:i.index,endOffset:i.index+6})}return e}},Q5={id:"NZ004",name:"Cross Join",description:"CROSS JOIN produces a Cartesian product - verify this is intentional",defaultSeverity:Qt.DiagnosticSeverity.Warning,check(t){let e=[],r=ur(t,/\bCROSS\s+JOIN\b/gi);for(let i of r)e.push({ruleId:this.id,message:`${this.id}: ${this.description}`,severity:this.defaultSeverity,startOffset:i.index,endOffset:i.index+i[0].length});return e}},Z5={id:"NZ005",name:"Leading Wildcard Like",description:"LIKE pattern with leading wildcard ('%...') prevents index usage",defaultSeverity:Qt.DiagnosticSeverity.Hint,check(t){let e=[],r=ur(t,/\bLIKE\s+'%/gi);for(let i of r)e.push({ruleId:this.id,message:`${this.id}: ${this.description}`,severity:this.defaultSeverity,startOffset:i.index,endOffset:i.index+i[0].length});return e}},e9={id:"NZ006",name:"Order By Without Limit",description:"ORDER BY without LIMIT/FETCH may cause performance issues on large datasets",defaultSeverity:Qt.DiagnosticSeverity.Information,check(t){let e=[],r=ur(t,/\bORDER\s+BY\b/gi);for(let i of r){let s=t.substring(i.index+i[0].length),o=s.indexOf(";"),a=o>=0?s.substring(0,o):s;if(!/\b(LIMIT|FETCH|TOP)\b/i.test(a)){let l=t.substring(0,i.index);/\bTOP\s+\d+\b/i.test(l)||e.push({ruleId:this.id,message:`${this.id}: ${this.description}`,severity:this.defaultSeverity,startOffset:i.index,endOffset:i.index+i[0].length})}}return e}},t9={id:"NZ007",name:"Inconsistent Keyword Case",description:"SQL keywords have inconsistent casing - consider using consistent UPPER or lower case",defaultSeverity:Qt.DiagnosticSeverity.Warning,check(t){let e=[],n=["SELECT","FROM","WHERE","JOIN","LEFT","RIGHT","INNER","OUTER","ON","AND","OR","INSERT","INTO","UPDATE","DELETE","CREATE","DROP","ALTER","TABLE","VIEW","INDEX","ORDER","BY","GROUP","HAVING","UNION","ALL","DISTINCT","AS","SET","VALUES","NULL","NOT","IN","BETWEEN","LIKE","IS","EXISTS","CASE","WHEN","THEN","ELSE","END","LIMIT","OFFSET"],r=0,i=0,s=[],o=new Set;for(let c of n){let u=new RegExp(`\\b${c}\\b`,"gi"),d=ur(t,u);for(let E of d){if(o.has(E.index))continue;o.add(E.index);let f=E[0],p;f===f.toUpperCase()?(r++,p="UPPER"):f===f.toLowerCase()?(i++,p="lower"):p="Mixed",s.push({keyword:f,index:E.index,type:p})}}let a=r>=i,l=a?"UPPER":"lower";for(let c of s)c.type==="Mixed"?e.push({ruleId:this.id,message:`${this.id}: Keyword '${c.keyword}' has mixed casing (expected ${a?"UPPERCASE":"lowercase"})`,severity:this.defaultSeverity,startOffset:c.index,endOffset:c.index+c.keyword.length}):c.type!==l&&e.push({ruleId:this.id,message:`${this.id}: Keyword '${c.keyword}' should be ${a?"UPPERCASE":"lowercase"}`,severity:this.defaultSeverity,startOffset:c.index,endOffset:c.index+c.keyword.length});return e}},n9={id:"NZ008",name:"Truncate Table",description:"TRUNCATE removes all data and cannot be rolled back - use with caution",defaultSeverity:Qt.DiagnosticSeverity.Warning,check(t){let e=[],r=ur(t,/\bTRUNCATE\s+(TABLE\s+)?[\w."]+/gi);for(let i of r)e.push({ruleId:this.id,message:`${this.id}: ${this.description}`,severity:this.defaultSeverity,startOffset:i.index,endOffset:i.index+8});return e}},r9={id:"NZ009",name:"Or In Where Clause",description:"Multiple OR conditions may prevent index usage - consider UNION for better performance",defaultSeverity:Qt.DiagnosticSeverity.Hint,check(t){let e=[],r=ur(t,/\bWHERE\b/gi);for(let i of r){let s=t.substring(i.index),o=s.search(/\b(GROUP\s+BY|ORDER\s+BY|HAVING|LIMIT|UNION|;)/i),a=o>=0?s.substring(0,o):s,l=ur(a,/\bOR\b/gi);if(l.length>=2){let c=l[0];e.push({ruleId:this.id,message:`${this.id}: ${this.description} (${l.length} OR conditions found)`,severity:this.defaultSeverity,startOffset:i.index+c.index,endOffset:i.index+c.index+2})}}return e}},i9={id:"NZ010",name:"Missing Table Alias",description:"Consider using table aliases in JOINs for better readability",defaultSeverity:Qt.DiagnosticSeverity.Information,check(t){let e=[],r=ur(t,/\bJOIN\s+([\w."]+)\s+ON\b/gi);for(let i of r)e.push({ruleId:this.id,message:`${this.id}: Table '${i[1]}' in JOIN has no alias - ${this.description}`,severity:this.defaultSeverity,startOffset:i.index,endOffset:i.index+i[0].length});return e}},s9={id:"NZ011",name:"CTAS Missing Distribution",description:"CREATE TABLE AS SELECT should specify explicit data distribution",defaultSeverity:Qt.DiagnosticSeverity.Warning,check(t){let e=[],r=ur(t,/\bCREATE\s+TABLE\s+(?:(?:IF\s+NOT\s+EXISTS\s+)?[\w."]+\s+)?AS\s+(?:\(\s*)?SELECT\b/gi);for(let i of r){let s=t.length;for(let u=i.index;u<t.length;u++)if(t[u]===";"&&!Jm(t,u)){s=u;break}let o=t.substring(i.index,s),l=/\bDISTRIBUTE\s+ON\b/i.exec(o),c=!1;l&&(Jm(t,i.index+l.index)||(c=!0)),c||e.push({ruleId:this.id,message:`${this.id}: ${this.description} - Add 'DISTRIBUTE ON (...)' or 'DISTRIBUTE ON RANDOM'`,severity:this.defaultSeverity,startOffset:i.index,endOffset:i.index+i[0].length})}return e}},o9={id:"NZ012",name:"Update Alias With AS",description:'Netezza UPDATE statements do not support "AS" for table aliases. Use "UPDATE table alias" instead.',defaultSeverity:Qt.DiagnosticSeverity.Error,check(t){let e=[],r=ur(t,/\bUPDATE\s+[\w."]+\s+AS\s+[\w."]+/gi);for(let i of r){let s=/\bAS\b/i.exec(i[0]);s&&e.push({ruleId:this.id,message:`${this.id}: ${this.description}`,severity:this.defaultSeverity,startOffset:i.index+s.index,endOffset:i.index+s.index+s[0].length})}return e}},a9={id:"NZ013",name:"Prefer Union All",description:"UNION performs a distinct operation which is slower than UNION ALL. Use UNION ALL if duplicates are not an issue.",defaultSeverity:Qt.DiagnosticSeverity.Information,check(t){let e=[],r=ur(t,/\bUNION\b(?!\s+ALL\b)/gi);for(let i of r)e.push({ruleId:this.id,message:`${this.id}: ${this.description}`,severity:this.defaultSeverity,startOffset:i.index,endOffset:i.index+i[0].length});return e}},zD=[j5,K5,J5,Q5,Z5,e9,t9,n9,r9,i9,s9,o9,a9];var Zm=class{constructor(){this.disposables=[];this.lintTimers=new Map;this.lintDebounceMs=400;this.diagnosticCollection=hr.languages.createDiagnosticCollection("netezza-sql-linter")}activate(e){e.subscriptions.push(this.diagnosticCollection),this.disposables.push(hr.workspace.onDidOpenTextDocument(n=>{this.shouldLint(n)&&this.lintDocument(n)})),this.disposables.push(hr.workspace.onDidChangeTextDocument(n=>{this.shouldLint(n.document)&&this.scheduleLint(n.document)})),this.disposables.push(hr.workspace.onDidCloseTextDocument(n=>{this.diagnosticCollection.delete(n.uri)})),this.disposables.push(hr.workspace.onDidChangeConfiguration(n=>{n.affectsConfiguration("netezza.linter")&&this.lintAllOpenDocuments()})),e.subscriptions.push(...this.disposables),this.lintAllOpenDocuments()}shouldLint(e){return e.languageId==="sql"}getConfig(){let e=hr.workspace.getConfiguration("netezza.linter");return{enabled:e.get("enabled",!0),rules:e.get("rules",{})}}lintAllOpenDocuments(){for(let e of hr.workspace.textDocuments)this.shouldLint(e)&&this.lintDocument(e)}lintDocument(e){let n=this.getConfig();if(!n.enabled){this.diagnosticCollection.delete(e.uri);return}let r=e.getText(),i=this.lintSql(r,n.rules),s=this.issuesToDiagnostics(e,i);this.diagnosticCollection.set(e.uri,s)}scheduleLint(e){let n=e.uri.toString(),r=this.lintTimers.get(n);r&&clearTimeout(r);let i=setTimeout(()=>{this.lintTimers.delete(n),this.lintDocument(e)},this.lintDebounceMs);this.lintTimers.set(n,i)}lintSql(e,n={}){let r=[];for(let i of zD){let s=n[i.id],o=s!==void 0?XD(s):i.defaultSeverity;if(o===null)continue;let a=i.check(e);for(let l of a)r.push({...l,severity:o})}return r}issuesToDiagnostics(e,n){return n.map(r=>{let i=e.positionAt(r.startOffset),s=e.positionAt(r.endOffset),o=new hr.Range(i,s),a=new hr.Diagnostic(o,r.message,r.severity);return a.source="Netezza SQL Linter",a.code=r.ruleId,a})}dispose(){this.diagnosticCollection.dispose();for(let e of this.lintTimers.values())clearTimeout(e);this.lintTimers.clear();for(let e of this.disposables)e.dispose()}},Qm;function l9(){return Qm||(Qm=new Zm),Qm}function jD(t){let e=l9();return e.activate(t),e}var Fo=j(require("vscode"));Bo();var Pu=class{static{this.providedCodeActionKinds=[Fo.CodeActionKind.QuickFix]}provideCodeActions(e,n,r,i){let s=[];for(let o of r.diagnostics)if(o.code==="NZ011"){let a=this.createDistributeOnRandomFix(e,o);a&&s.push(a)}return s}createDistributeOnRandomFix(e,n){let r=new Fo.CodeAction("Add DISTRIBUTE ON RANDOM",Fo.CodeActionKind.QuickFix);r.diagnostics=[n],r.isPreferred=!0;let i=e.offsetAt(n.range.start),s=e.getText(),o=Zn.getStatementAtPosition(s,i);if(o)return r.edit=new Fo.WorkspaceEdit,r.edit.insert(e.uri,e.positionAt(o.end)," DISTRIBUTE ON RANDOM"),r}};var Ve=j(require("vscode"));function KD(t){switch(t){case"sql":return{type:"sql",query:"",connection:"default"};case"python":return{type:"python",script:""};case"container":return{type:"container",nodes:[],connections:[]};case"export":return{type:"export",format:"csv",outputPath:""};case"import":return{type:"import",format:"csv",inputPath:"",targetTable:""};case"variable":return{type:"variable",variableName:"",source:"prompt",promptMessage:"Enter value"}}}function uh(){return"node-"+Date.now()+"-"+Math.random().toString(36).substr(2,9)}function dh(){return"conn-"+Date.now()+"-"+Math.random().toString(36).substr(2,9)}var eg=j(require("fs"));var xu=class{validateProject(e){let n=[],r=[];e.name||n.push("Project name is required"),e.version||n.push("Project version is required"),Array.isArray(e.nodes)||n.push("Nodes must be an array"),Array.isArray(e.connections)||n.push("Connections must be an array");let i=this.validateNodes(e.nodes||[]);n.push(...i.errors),r.push(...i.warnings);let s=new Set((e.nodes||[]).map(l=>l.id)),o=this.validateConnections(e.connections||[],s);n.push(...o.errors),r.push(...o.warnings);let a=this.detectCycles(e);return n.push(...a),{isValid:n.length===0,errors:n,warnings:r}}validateNodes(e){let n=[],r=[],i=new Set;for(let s of e){if(!s.id){n.push("Node missing ID");continue}i.has(s.id)?n.push(`Duplicate node ID: ${s.id}`):i.add(s.id),s.type||n.push(`Node ${s.id} missing type`),s.name||r.push(`Node ${s.id} has no name`),(!s.position||typeof s.position.x!="number"||typeof s.position.y!="number")&&n.push(`Node ${s.id} has invalid position`),s.config||n.push(`Node ${s.id} has no configuration`)}return{errors:n,warnings:r}}validateConnections(e,n){let r=[],i=[],s=new Set;for(let o of e){if(!o.id){r.push("Connection missing ID");continue}(!o.from||!n.has(o.from))&&r.push(`Connection ${o.id} has invalid 'from' node: ${o.from}`),(!o.to||!n.has(o.to))&&r.push(`Connection ${o.id} has invalid 'to' node: ${o.to}`),o.from===o.to&&r.push(`Connection ${o.id} cannot connect node to itself`);let a=`${o.from}->${o.to}`;s.has(a)?i.push(`Duplicate connection from ${o.from} to ${o.to}`):s.add(a)}return{errors:r,warnings:i}}detectCycles(e){let n=[],r=new Set,i=new Set,s=new Map;for(let a of e.nodes||[])s.set(a.id,[]);for(let a of e.connections||[])s.get(a.from)?.push(a.to);let o=a=>{r.add(a),i.add(a);for(let l of s.get(a)||[])if(r.has(l)){if(i.has(l))return!0}else if(o(l))return!0;return i.delete(a),!1};for(let a of e.nodes||[])if(!r.has(a.id)&&o(a.id)){n.push("Project contains circular dependencies");break}return n}getTopologicalOrder(e){let n=new Map,r=new Map;for(let o of e.nodes)n.set(o.id,0),r.set(o.id,[]);for(let o of e.connections)r.get(o.from)?.push(o.to),n.set(o.to,(n.get(o.to)||0)+1);let i=[];for(let[o,a]of n)a===0&&i.push(o);let s=[];for(;i.length>0;){let o=i.shift();s.push(o);for(let a of r.get(o)||[]){let l=(n.get(a)||1)-1;n.set(a,l),l===0&&i.push(a)}}return s.length!==e.nodes.length?null:s}},DMe=new xu;var Ws=class t{constructor(e){this.currentProject=null;this.projectPath=null;this.isDirty=!1;this.validator=e||new xu}static getInstance(){return t.instance||(t.instance=new t),t.instance}static resetInstance(){t.instance=void 0}createProject(e){return this.currentProject={name:e,version:"1.0.0",description:"",variables:{},nodes:[],connections:[]},this.projectPath=null,this.isDirty=!0,this.currentProject}async loadProject(e){let n=await eg.promises.readFile(e,"utf-8"),r=JSON.parse(n),i=this.validateProject(r);if(i.length>0)throw new Error(`Invalid project: ${i.join(", ")}`);return this.currentProject=r,this.projectPath=e,this.isDirty=!1,this.currentProject}async saveProject(e){let n=e||this.projectPath;if(!n)throw new Error("No file path specified");if(!this.currentProject)throw new Error("No project to save");let r=JSON.stringify(this.currentProject,null,2);await eg.promises.writeFile(n,r,"utf-8"),this.projectPath=n,this.isDirty=!1}validateProject(e){return this.validator.validateProject(e).errors}validateProjectDetailed(e){return this.validator.validateProject(e)}addNode(e){if(!this.currentProject)throw new Error("No project loaded");e.id||(e.id=uh()),this.currentProject.nodes.push(e),this.isDirty=!0}updateNode(e,n){if(!this.currentProject)throw new Error("No project loaded");let r=this.currentProject.nodes.findIndex(i=>i.id===e);if(r===-1)throw new Error(`Node not found: ${e}`);this.currentProject.nodes[r]={...this.currentProject.nodes[r],...n},this.isDirty=!0}removeNode(e){if(!this.currentProject)throw new Error("No project loaded");this.currentProject.nodes=this.currentProject.nodes.filter(n=>n.id!==e),this.currentProject.connections=this.currentProject.connections.filter(n=>n.from!==e&&n.to!==e),this.isDirty=!0}addConnection(e){if(!this.currentProject)throw new Error("No project loaded");if(e.id||(e.id=dh()),this.currentProject.connections.some(i=>i.from===e.from&&i.to===e.to))throw new Error("Connection already exists");if(this.currentProject.connections.push(e),this.validator.detectCycles(this.currentProject).length>0)throw this.currentProject.connections.pop(),new Error("Connection would create a cycle");this.isDirty=!0}removeConnection(e){if(!this.currentProject)throw new Error("No project loaded");this.currentProject.connections=this.currentProject.connections.filter(n=>n.id!==e),this.isDirty=!0}getCurrentProject(){return this.currentProject}getProjectPath(){return this.projectPath}hasUnsavedChanges(){return this.isDirty}getNode(e){return this.currentProject?.nodes.find(n=>n.id===e)}getOutgoingConnections(e){return this.currentProject?.connections.filter(n=>n.from===e)||[]}getIncomingConnections(e){return this.currentProject?.connections.filter(n=>n.to===e)||[]}setProject(e){this.currentProject=e,this.isDirty=!0}markDirty(){this.isDirty=!0}getTopologicalOrder(){return this.currentProject?this.validator.getTopologicalOrder(this.currentProject):null}};function JD(t,e,n){return{nodeId:t,status:"success",startTime:e,endTime:new Date,output:n?.output,rowsAffected:n?.rowsAffected}}function QD(t,e,n){return{nodeId:t,status:"error",startTime:e,endTime:new Date,error:n instanceof Error?n.message:n}}function Eh(t){let e=new Date;return{nodeId:t,status:"skipped",startTime:e,endTime:e}}var fh=class{constructor(e){this.startTime=new Date,this.result={nodeId:e,startTime:this.startTime}}success(){return this.result.status="success",this}error(e){return this.result.status="error",this.result.error=e instanceof Error?e.message:e,this}skipped(){return this.result.status="skipped",this}withOutput(e){return this.result.output=e,this}withRowsAffected(e){return this.result.rowsAffected=e,this}build(){return{nodeId:this.result.nodeId,status:this.result.status||"pending",startTime:this.startTime,endTime:new Date,error:this.result.error,output:this.result.output,rowsAffected:this.result.rowsAffected}}};var hh=class{constructor(){this.executors=new Map}registerExecutor(e,n){this.executors.set(e,n)}getExecutor(e){return this.executors.get(e)}onStatusChange(e){this.statusCallback=e}async execute(e,n){let r={projectName:e.name,startTime:new Date,status:"running",nodeResults:new Map};for(let i of e.nodes)this.statusCallback?.(i.id,"pending");try{n.onProgress?.(`Starting ETL project: ${e.name}`),n.onProgress?.(`Found ${e.nodes.length} tasks`),await this.executeDynamic(e,n,r);let i=Array.from(r.nodeResults.values()).some(o=>o.status==="error");r.status=i?"failed":"completed",r.endTime=new Date;let s=r.status==="completed"?"completed successfully":"completed with errors";n.onProgress?.(`ETL project ${s}`)}catch(i){r.status="failed",r.endTime=new Date,n.onProgress?.(`ETL project failed: ${String(i)}`)}return r}async executeDynamic(e,n,r){let i=new Set,s=[],o=new Set(e.connections.map(a=>a.to));for(let a of e.nodes)o.has(a.id)||s.push(a.id);for(;s.length>0;){if(n.cancellationToken?.isCancellationRequested){r.status="cancelled",r.endTime=new Date;for(let d of e.nodes)i.has(d.id)||(r.nodeResults.set(d.id,Eh(d.id)),this.statusCallback?.(d.id,"skipped"));return}let a=s.shift();if(i.has(a))continue;let l=e.nodes.find(d=>d.id===a);if(!l)continue;let c=await this.executeNode(l,n);r.nodeResults.set(a,c),i.add(a),c.output!==void 0&&n.nodeOutputs.set(a,c.output);let u=e.connections.filter(d=>d.from===a);for(let d of u){let E=d.connectionType||"success";c.status==="success"&&E==="success"||c.status==="error"&&E==="failure"?!i.has(d.to)&&!s.includes(d.to)&&s.push(d.to):i.has(d.to)||!e.connections.some(h=>{if(h.to!==d.to||h.id===d.id)return!1;let T=r.nodeResults.get(h.from);if(!T)return!0;let S=h.connectionType||"success";return T.status==="success"&&S==="success"||T.status==="error"&&S==="failure"})&&!s.includes(d.to)&&(r.nodeResults.set(d.to,Eh(d.to)),this.statusCallback?.(d.to,"skipped"),i.add(d.to))}}for(let a of e.nodes)i.has(a.id)||(r.nodeResults.set(a.id,Eh(a.id)),this.statusCallback?.(a.id,"skipped"))}async executeNode(e,n){this.statusCallback?.(e.id,"running"),n.onProgress?.(`Running task: ${e.name}`);let r=this.executors.get(e.type);if(!r){let i={nodeId:e.id,status:"error",startTime:new Date,endTime:new Date,error:`No executor registered for node type: ${e.type}`};return this.statusCallback?.(e.id,"error",i.error),i}try{let i=await r.execute(e,n);return this.statusCallback?.(e.id,i.status,i.error),i.status==="success"&&(n.onProgress?.(`Task ${e.name} completed successfully`),i.rowsAffected!==void 0&&n.onProgress?.(`  Rows affected: ${i.rowsAffected}`)),i}catch(i){let s={nodeId:e.id,status:"error",startTime:new Date,endTime:new Date,error:String(i)};return this.statusCallback?.(e.id,"error",s.error),s}}getPreviousNodeOutput(e,n){return e.nodeOutputs.get(n)}};var vu=class{resolve(e,n){if(!e||!n||Object.keys(n).length===0)return e;let r=e;for(let[i,s]of Object.entries(n)){let o=new RegExp(`\\$\\{${this.escapeRegex(i)}\\}`,"g");r=r.replace(o,s)}return r}resolveAll(e,n){return e.map(r=>this.resolve(r,n))}escapeRegex(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}},WMe=new vu;var dr=class{constructor(e){this.variableResolver=e||new vu}getConfig(e){return e.config}resolveVariables(e,n){return this.variableResolver.resolve(e,n.variables)}createSuccess(e,n,r){return JD(e,n,r)}createError(e,n,r){return QD(e,n,r)}resultBuilder(e){return new fh(e)}reportProgress(e,n){e.onProgress?.(n)}isCancelled(e){return e.cancellationToken?.isCancellationRequested??!1}validateRequired(e,n,r,i){if(r==null||r==="")return this.createError(e,n,`${i} is required`)}async safeExecute(e,n,r){try{return await r()}catch(i){return this.createError(e,n,i instanceof Error?i:String(i))}}};var tg=class{async createConnection(e){let n=Qn(),r=new n({host:e.host,port:e.port||5480,database:e.database,user:e.user,password:e.password});return await r.connect(),r}},ph=class extends dr{constructor(e,n){super(e),this.connectionFactory=n||new tg}async execute(e,n){let r=this.getConfig(e),i=new Date,s=this.validateRequired(e.id,i,r.query?.trim(),"SQL query");return s||this.safeExecute(e.id,i,async()=>{let o=this.resolveVariables(r.query,n);if(this.reportProgress(n,`Executing SQL: ${o.substring(0,100)}${o.length>100?"...":""}`),!n.connectionDetails)return this.createError(e.id,i,"No connection details available in context");let a=null;try{a=await this.connectionFactory.createConnection(n.connectionDetails);let l=await this.executeQuery(a,o,r.timeout);return this.createSuccess(e.id,i,{rowsAffected:l.rows.length,output:l})}finally{if(a)try{await a.close()}catch{}}})}async executeQuery(e,n,r){let i=e.createCommand(n);r&&(i.commandTimeout=r);let s=await i.executeReader(),o=[];for(let l=0;l<s.fieldCount;l++)o.push(s.getName(l));let a=[];for(;await s.read();){let l=[];for(let c=0;c<s.fieldCount;c++)l.push(s.getValue(c));a.push(l)}return s.close&&await s.close(),{columns:o,rows:a}}};var ZD=require("child_process"),Mu=j(require("fs")),Sh=j(require("path")),eP=j(require("os"));var ng=class{async run(e,n,r,i){return new Promise(s=>{let o=(0,ZD.spawn)(e,n,{env:r,shell:!0}),a="",l="";o.stdout?.on("data",c=>{a+=c.toString()}),o.stderr?.on("data",c=>{l+=c.toString()}),o.on("close",c=>{s({exitCode:c??1,stdout:a.trim(),stderr:l.trim()})}),o.on("error",c=>{s({exitCode:1,stdout:"",stderr:`Failed to start Python: ${c.message}`})}),i&&i>0&&setTimeout(()=>{o.kill(),s({exitCode:1,stdout:a.trim(),stderr:`Execution timed out after ${i} seconds`})},i*1e3)})}},rg=class{find(){return process.platform==="win32"?"py":"python3"}},Th=class extends dr{constructor(e,n,r){super(e),this.runner=n||new ng,this.interpreterFinder=r||new rg}async execute(e,n){let r=this.getConfig(e),i=new Date;return!r.script&&!r.scriptPath?this.createError(e.id,i,"Python script or script path is required"):this.safeExecute(e.id,i,async()=>{let s=r.interpreter||this.interpreterFinder.find();this.reportProgress(n,`Using Python interpreter: ${s}`);let{scriptPath:o,tempScript:a}=await this.prepareScript(r,n);try{this.reportProgress(n,`Executing Python script: ${Sh.basename(o)}`);let l=[o,...r.arguments||[]],c=this.buildEnvironment(n.variables),u=await this.runWithProgress(s,l,c,n,r.timeout);return u.exitCode===0?this.createSuccess(e.id,i,{output:u.stdout}):this.resultBuilder(e.id).error(u.stderr||`Python exited with code ${u.exitCode}`).withOutput(u.stdout).build()}finally{a&&await this.cleanupTempScript(o)}})}async prepareScript(e,n){if(e.scriptPath){let s=this.resolveVariables(e.scriptPath,n);if(!Mu.existsSync(s))throw new Error(`Script file not found: ${s}`);return{scriptPath:s,tempScript:!1}}let r=this.resolveVariables(e.script,n),i=Sh.join(eP.tmpdir(),`etl_script_${Date.now()}.py`);return await Mu.promises.writeFile(i,r,"utf-8"),{scriptPath:i,tempScript:!0}}buildEnvironment(e){return{...process.env,...Object.fromEntries(Object.entries(e).map(([n,r])=>[`ETL_VAR_${n.toUpperCase()}`,r]))}}async runWithProgress(e,n,r,i,s){let o=await this.runner.run(e,n,r,s);if(o.stdout)for(let a of o.stdout.split(`
`).slice(0,10))a.trim()&&this.reportProgress(i,`[Python] ${a.trim()}`);if(o.stderr)for(let a of o.stderr.split(`
`).slice(0,5))a.trim()&&this.reportProgress(i,`[Python ERROR] ${a.trim()}`);return o}async cleanupTempScript(e){try{await Mu.promises.unlink(e)}catch{}}};sg();Yi();var By=class{constructor(){this.format="csv"}async export(e,n,r,i,s,o){try{return await ig(n,r,i,void 0,o),{success:!0}}catch(a){return{success:!1,message:a instanceof Error?a.message:String(a)}}}},Fy=class{constructor(){this.format="xlsb"}async export(e,n,r,i,s,o){let a=await Uy(n,r,i,!1,s,o);return{success:a.success,message:a.message,rowsExported:a.details?.rows_exported}}},uR=class extends dr{constructor(e,n){super(e),this.strategies=n||new Map([["csv",new By],["xlsb",new Fy]])}registerStrategy(e){this.strategies.set(e.format,e)}async execute(e,n){let r=this.getConfig(e),i=new Date,s=this.validateRequired(e.id,i,r.outputPath,"Output path");return s||this.safeExecute(e.id,i,async()=>{let o=this.resolveVariables(r.outputPath,n),a=r.query?this.resolveVariables(r.query,n):"";if(!a&&r.sourceNodeId&&n.nodeOutputs.get(r.sourceNodeId)?.rows)return this.createError(e.id,i,"In-memory data export is not yet supported. Please specify a query.");if(!a)return this.createError(e.id,i,"No query or source node specified for export");let l=this.strategies.get(r.format);if(!l)return this.createError(e.id,i,`Unsupported export format: ${r.format}`);this.reportProgress(n,`Exporting to ${r.format.toUpperCase()}: ${o}`);let c=await l.export(n.extensionContext,n.connectionDetails,a,o,u=>this.reportProgress(n,`[Export] ${u}`),r.timeout);return c.success?this.createSuccess(e.id,i,{rowsAffected:c.rowsExported,output:{filePath:o,format:r.format,rowsExported:c.rowsExported}}):this.createError(e.id,i,c.message||"Export failed")})}};var u3=j(require("fs"));LR();var rw=class{async importData(e,n,r,i,s){return nw(e,n,r,i,s)}},DR=class extends dr{constructor(e,n){super(e),this.importer=n||new rw}async execute(e,n){let r=this.getConfig(e),i=new Date,s=this.validateRequired(e.id,i,r.inputPath,"Input path");if(s)return s;let o=this.validateRequired(e.id,i,r.targetTable,"Target table");return o||this.safeExecute(e.id,i,async()=>{let a=this.resolveVariables(r.inputPath,n),l=this.resolveVariables(r.targetTable,n),c=r.targetSchema?this.resolveVariables(r.targetSchema,n):"";if(!u3.existsSync(a))return this.createError(e.id,i,`Input file not found: ${a}`);this.reportProgress(n,`Importing from ${r.format.toUpperCase()}: ${a}`),this.reportProgress(n,`Target table: ${c?c+".":""}${l}`);let u=await this.importer.importData(a,l,n.connectionDetails,d=>{this.reportProgress(n,`[Import] ${d}`)},r.timeout);return u.success?this.createSuccess(e.id,i,{rowsAffected:u.details?.rowsInserted,output:{filePath:a,targetTable:`${c?c+".":""}${l}`,rowsProcessed:u.details?.rowsProcessed,rowsInserted:u.details?.rowsInserted}}):this.createError(e.id,i,u.message)})}};var PR=class extends dr{constructor(e,n){super(n),this.engine=e}async execute(e,n){let r=this.getConfig(e),i=new Date;return!r.nodes||r.nodes.length===0?this.createSuccess(e.id,i,{output:"Empty container - nothing to execute"}):this.safeExecute(e.id,i,async()=>{this.reportProgress(n,`Entering container: ${e.name} (${r.nodes.length} tasks)`);let s={name:`Container: ${e.name}`,version:"1.0.0",nodes:r.nodes,connections:r.connections||[]},o=await this.engine.execute(s,n);return this.reportProgress(n,`Exiting container: ${e.name}`),this.processExecutionResult(e.id,i,r,o)})}processExecutionResult(e,n,r,i){if(i.status==="completed"){let{successCount:o,totalRows:a}=this.countSuccesses(i),l={tasksExecuted:r.nodes.length,tasksSucceeded:o,nestedResults:Array.from(i.nodeResults.entries())};return this.createSuccess(e,n,{rowsAffected:a,output:l})}if(i.status==="cancelled")return this.resultBuilder(e).skipped().build();let s=this.findFirstError(i)||"Container execution failed";return this.createError(e,n,s)}countSuccesses(e){let n=0,r=0;for(let i of e.nodeResults.values())i.status==="success"&&(n++,i.rowsAffected&&(r+=i.rowsAffected));return{successCount:n,totalRows:r}}findFirstError(e){for(let n of e.nodeResults.values())if(n.status==="error"&&n.error)return n.error}};var iw=class{async createConnection(e){let n=Qn(),r=new n({host:e.host,port:e.port||5480,database:e.database,user:e.user,password:e.password});return await r.connect(),r}},xR=class extends dr{constructor(n,r){super(n);this.variableManager=null;this.connectionFactory=r||new iw}setVariableManager(n){this.variableManager=n}async execute(n,r){let i=this.getConfig(n),s=new Date,o=this.validateRequired(n.id,s,i.variableName,"Variable name");if(o)return o;let a=r.variableManager||this.variableManager;return a?this.safeExecute(n.id,s,async()=>{let l;switch(i.source){case"prompt":l=await this.handlePrompt(i,a,r);break;case"static":l=this.handleStatic(i,r);break;case"sql":l=await this.handleSql(i,r);break;default:return this.createError(n.id,s,`Unknown variable source: ${i.source}`)}return l===void 0?this.createError(n.id,s,`Variable ${i.variableName} was not set (user cancelled or query returned no results)`):(a.set(i.variableName,l),r.variables[i.variableName]=l,this.reportProgress(r,`Variable ${i.variableName} = "${l}"`),this.createSuccess(n.id,s,{output:{variableName:i.variableName,value:l,source:i.source}}))}):this.createError(n.id,s,"Variable manager not available")}async handlePrompt(n,r,i){let s=n.promptMessage?this.resolveVariables(n.promptMessage,i):`Enter value for ${n.variableName}`,o=n.defaultValue?this.resolveVariables(n.defaultValue,i):void 0;return this.reportProgress(i,`Prompting for variable: ${n.variableName}`),r.promptForValue(n.variableName,s,o)}handleStatic(n,r){let i=n.value||"";return this.resolveVariables(i,r)}async handleSql(n,r){if(!n.query)throw new Error("SQL query is required for sql variable source");let i=this.resolveVariables(n.query,r);this.reportProgress(r,`Executing SQL for variable ${n.variableName}`);let s=null;try{s=await this.connectionFactory.createConnection(r.connectionDetails);let o=s.createCommand(i);n.timeout&&(o.commandTimeout=n.timeout);let a=await o.executeReader(),l;if(await a.read()){let c=a.getValue(0);l=c!=null?String(c):void 0}return a.close&&await a.close(),l}finally{if(s)try{await s.close()}catch{}}}};var d3=j(require("vscode")),vR=class{constructor(e){this.variables=new Map(Object.entries(e||{}))}get(e){return this.variables.get(e)}set(e,n){this.variables.set(e,n)}has(e){return this.variables.has(e)}getAll(){return Object.fromEntries(this.variables)}async promptForValue(e,n,r){let i=await d3.window.showInputBox({prompt:n||`Enter value for ${e}`,value:r||"",placeHolder:`Value for \${${e}}`,ignoreFocusOut:!0});return i!==void 0&&this.set(e,i),i}snapshot(){return{...this.getAll()}}merge(e){for(let[n,r]of Object.entries(e))this.set(n,r)}};function f3(){return`
        :root {
            --bg-primary: var(--vscode-editor-background);
            --bg-secondary: var(--vscode-sideBar-background);
            --bg-hover: var(--vscode-list-hoverBackground);
            --border-color: var(--vscode-panel-border);
            --text-color: var(--vscode-editor-foreground);
            --text-muted: var(--vscode-descriptionForeground);
            --accent-color: var(--vscode-button-background);
            --accent-hover: var(--vscode-button-hoverBackground);
            --success-color: #4CAF50;
            --error-color: #f44336;
            --warning-color: #ff9800;
        }

        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            padding: 0;
            height: 100vh;
            overflow: hidden;
            font-family: var(--vscode-font-family);
            font-size: var(--vscode-font-size);
            color: var(--text-color);
            background: var(--bg-primary);
        }

        .etl-designer {
            display: flex;
            flex-direction: column;
            height: 100vh;
        }

        /* Toolbar */
        .toolbar {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 8px 16px;
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border-color);
        }

        .toolbar button {
            padding: 6px 12px;
            margin-right: 4px;
            border: 1px solid var(--border-color);
            background: var(--bg-primary);
            color: var(--text-color);
            cursor: pointer;
            border-radius: 4px;
        }

        .toolbar button:hover {
            background: var(--bg-hover);
        }

        .toolbar .btn-primary {
            background: var(--accent-color);
            border-color: var(--accent-color);
        }

        .toolbar .btn-primary:hover {
            background: var(--accent-hover);
        }

        .toolbar .btn-danger {
            background: var(--error-color);
            border-color: var(--error-color);
            color: white;
        }

        .toolbar .btn-danger:hover {
            opacity: 0.8;
        }

        .toolbar .separator {
            display: inline-block;
            width: 1px;
            height: 20px;
            background: var(--border-color);
            margin: 0 8px;
        }

        .project-name {
            font-weight: bold;
            font-size: 1.1em;
        }

        .status {
            color: var(--text-muted);
            font-size: 0.9em;
        }

        /* Main Content */
        .main-content {
            display: flex;
            flex: 1;
            overflow: hidden;
        }

        /* Toolbox */
        .toolbox {
            width: 200px;
            background: var(--bg-secondary);
            border-right: 1px solid var(--border-color);
            padding: 12px;
            overflow-y: auto;
        }

        .toolbox h3 {
            margin: 0 0 12px 0;
            font-size: 0.9em;
            color: var(--text-muted);
            text-transform: uppercase;
        }

        .toolbox-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 12px;
            margin-bottom: 6px;
            background: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            cursor: grab;
            transition: all 0.15s ease;
        }

        .toolbox-item:hover {
            border-color: var(--accent-color);
            transform: translateX(3px);
        }

        .toolbox-item:active {
            cursor: grabbing;
        }

        .toolbox-item .icon {
            font-size: 1.2em;
        }

        .toolbox-item .label {
            font-size: 0.85em;
        }

        .help-text {
            font-size: 0.8em;
            color: var(--text-muted);
            line-height: 1.6;
        }

        .help-text p {
            margin: 4px 0;
        }

        /* Canvas */
        .canvas-container {
            flex: 1;
            position: relative;
            overflow: hidden;
            background: var(--bg-primary);
            cursor: grab;
        }
        
        .canvas-container:active {
            cursor: grabbing;
        }

        .zoom-wrapper {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            transform-origin: 0 0;
            background: 
                linear-gradient(90deg, rgba(128,128,128,0.1) 1px, transparent 1px),
                linear-gradient(rgba(128,128,128,0.1) 1px, transparent 1px);
            background-size: 20px 20px;
        }

        .connections-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        .connections-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 5;
            pointer-events: none;
        }

        .connections-layer path.connection-line {
            stroke: var(--success-color);
            stroke-width: 2;
            fill: none;
            pointer-events: none;
        }
        
        .connections-layer path.connection-failure {
            stroke: var(--error-color);
        }
        
        .connections-layer path.connection-hit {
            stroke: transparent;
            stroke-width: 15px;
            fill: none;
            pointer-events: stroke;
            cursor: pointer;
        }

        .connections-layer path.connection-hit:hover + .connection-line {
            stroke-width: 3;
            filter: drop-shadow(0 0 2px currentColor);
        }

        .connections-layer marker polygon {
            fill: var(--accent-color);
        }

        .nodes-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 2;
            pointer-events: none;
        }

        .etl-node {
            pointer-events: all;
        }

        /* Nodes */
        .etl-node {
            position: absolute;
            min-width: 160px;
            background: var(--bg-secondary);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            cursor: move;
            user-select: none;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
        }

        .etl-node:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.25);
        }

        .etl-node.selected {
            border-color: var(--accent-color);
        }

        .etl-node.running {
            border-color: var(--warning-color);
            animation: pulse 1s infinite;
        }

        .etl-node.success {
            border-color: var(--success-color);
        }

        .etl-node.error {
            border-color: var(--error-color);
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .node-type-indicator {
            height: 4px;
            border-radius: 6px 6px 0 0;
        }

        .etl-node.sql .node-type-indicator { background: #4CAF50; }
        .etl-node.python .node-type-indicator { background: #3776AB; }
        .etl-node.container .node-type-indicator { background: #FF9800; }
        .etl-node.export .node-type-indicator { background: #2196F3; }
        .etl-node.import .node-type-indicator { background: #9C27B0; }

        .node-content {
            padding: 10px 12px;
        }

        .node-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 4px;
        }

        .node-icon {
            font-size: 1.2em;
        }

        .node-name {
            font-weight: 500;
            font-size: 0.9em;
        }

        .node-type {
            font-size: 0.75em;
            color: var(--text-muted);
            text-transform: uppercase;
        }

        .node-connectors {
            position: relative;
        }

        .node-actions {
            position: absolute;
            top: -8px;
            right: -8px;
            display: none;
        }

        .etl-node:hover .node-actions,
        .etl-node.selected .node-actions {
            display: block;
        }

        .node-delete-btn {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--error-color);
            color: white;
            border: 2px solid var(--bg-secondary);
            font-size: 12px;
            line-height: 16px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .node-delete-btn:hover {
            transform: scale(1.2);
        }

        .connector {
            width: 14px;
            height: 14px;
            background: var(--accent-color);
            border: 2px solid var(--bg-secondary);
            border-radius: 50%;
            position: absolute;
            cursor: crosshair;
            z-index: 10;
        }

        .connector.input {
            left: -9px;
            top: 50%;
            transform: translateY(-50%);
        }

        .connector.output {
            right: -9px;
            top: 50%;
            transform: translateY(-50%);
        }

        .connector:hover {
            transform: translateY(-50%) scale(1.3);
        }

        /* Properties Panel */
        .properties-panel {
            width: 250px;
            background: var(--bg-secondary);
            border-left: 1px solid var(--border-color);
            padding: 12px;
            overflow-y: auto;
        }

        .properties-panel h3 {
            margin: 0 0 12px 0;
            font-size: 0.9em;
            color: var(--text-muted);
            text-transform: uppercase;
        }

        .properties-panel .placeholder {
            color: var(--text-muted);
            font-style: italic;
        }

        .property-group {
            margin-bottom: 16px;
        }

        .property-label {
            display: block;
            font-size: 0.8em;
            color: var(--text-muted);
            margin-bottom: 4px;
        }

        .property-value {
            font-size: 0.9em;
            word-break: break-word;
        }

        .property-code {
            font-family: monospace;
            font-size: 0.8em;
            background: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: 4px;
            padding: 6px 8px;
            margin: 4px 0 0 0;
            white-space: pre-wrap;
            word-break: break-all;
            max-height: 80px;
            overflow-y: auto;
        }

        .configure-btn {
            width: 100%;
            margin-top: 16px;
            padding: 8px 12px;
            background: var(--accent-color);
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.85em;
        }

        .configure-btn:hover {
            background: var(--accent-hover);
        }

        /* Connection line being drawn */
        .temp-connection {
            stroke: var(--accent-color);
            stroke-width: 2;
            stroke-dasharray: 5,5;
            fill: none;
            pointer-events: none;
        }

        /* Container Editor Modal */
        .container-editor-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .container-editor-modal {
            width: 90%;
            height: 85%;
            background: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
        }

        .container-editor-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 16px;
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border-color);
            border-radius: 8px 8px 0 0;
        }

        .container-editor-title {
            font-weight: 600;
            font-size: 1.1em;
        }

        .container-editor-close {
            width: 28px;
            height: 28px;
            border: none;
            background: transparent;
            color: var(--text-color);
            font-size: 18px;
            cursor: pointer;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .container-editor-close:hover {
            background: var(--error-color);
            color: white;
        }

        .container-editor-content {
            flex: 1;
            display: flex;
            overflow: hidden;
        }

        .container-editor-toolbox {
            width: 180px;
            background: var(--bg-secondary);
            border-right: 1px solid var(--border-color);
            padding: 12px;
            overflow-y: auto;
        }

        .container-editor-toolbox h4 {
            margin: 0 0 10px 0;
            font-size: 0.85em;
            color: var(--text-muted);
            text-transform: uppercase;
        }

        .container-editor-canvas {
            flex: 1;
            position: relative;
            overflow: hidden;
            background: var(--bg-primary);
        }

        .container-editor-canvas .zoom-wrapper {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                linear-gradient(90deg, rgba(128,128,128,0.08) 1px, transparent 1px),
                linear-gradient(rgba(128,128,128,0.08) 1px, transparent 1px);
            background-size: 20px 20px;
        }

        .container-editor-footer {
            padding: 10px 16px;
            background: var(--bg-secondary);
            border-top: 1px solid var(--border-color);
            border-radius: 0 0 8px 8px;
            display: flex;
            justify-content: flex-end;
            gap: 8px;
        }

        .container-editor-footer button {
            padding: 6px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9em;
        }

        .container-editor-footer .btn-save {
            background: var(--accent-color);
            color: white;
            border: none;
        }

        .container-editor-footer .btn-save:hover {
            background: var(--accent-hover);
        }

        .container-editor-footer .btn-cancel {
            background: transparent;
            color: var(--text-color);
            border: 1px solid var(--border-color);
        }

        .container-editor-footer .btn-cancel:hover {
            background: var(--bg-hover);
        }

        /* Container node badge showing child count */
        .node-child-count {
            font-size: 0.7em;
            background: var(--warning-color);
            color: white;
            padding: 2px 6px;
            border-radius: 10px;
            margin-left: 4px;
        }
    `}function E3(t){return`
        const vscode = acquireVsCodeApi();
        
        // State
        let project = ${JSON.stringify(t)};
        let selectedNodeId = null;
        let isDragging = false;
        let dragOffset = { x: 0, y: 0 };
        let isConnecting = false;
        let connectionStart = null;
        let tempLine = null;
        
        // Zoom & Pan state
        let scale = 1;
        let pan = { x: 0, y: 0 };
        let isPanning = false;
        let panStart = { x: 0, y: 0 };

        // Container Editor state
        let containerEditorOpen = false;
        let editingContainerId = null;
        let containerNodes = [];
        let containerConnections = [];
        let containerSelectedNodeId = null;
        let containerIsDragging = false;
        let containerDragOffset = { x: 0, y: 0 };
        let containerIsConnecting = false;
        let containerConnectionStart = null;
        let containerTempLine = null;

        // Node icons
        const nodeIcons = {
            sql: '\u{1F4DC}',
            python: '\u{1F40D}',
            container: '\u{1F4E6}',
            export: '\u{1F4E4}',
            import: '\u{1F4E5}',
            variable: '\u{1F524}'
        };
    `}function h3(){return`
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        function updateNodeStatus(nodeId, status) {
            const nodeEl = document.getElementById('node-' + nodeId);
            if (nodeEl) {
                nodeEl.classList.remove('running', 'success', 'error', 'pending', 'skipped');
                nodeEl.classList.add(status);
            }
            
            document.getElementById('status').textContent = status === 'running' 
                ? 'Running...' 
                : (status === 'error' ? 'Error!' : '');
        }
    `}function p3(){return`
        function updateTransform() {
            const wrapper = document.getElementById('zoom-wrapper');
            if (wrapper) {
                wrapper.style.transform = \`translate(\${pan.x}px, \${pan.y}px) scale(\${scale})\`;
            }
        }

        function setupZoomPan() {
            const container = document.getElementById('canvas');
            
            // Wheel zoom
            container.addEventListener('wheel', (e) => {
                if (e.ctrlKey || true) { 
                    e.preventDefault();
                    const zoomSensitivity = 0.001;
                    const delta = -e.deltaY * zoomSensitivity;
                    const newScale = Math.min(Math.max(0.1, scale + delta), 5);
                    scale = newScale;
                    updateTransform();
                }
            });

            // Pan
            container.addEventListener('mousedown', (e) => {
                if (e.target === container || e.target.id === 'nodes-container' || e.target.id === 'zoom-wrapper' || e.target.id === 'connections-svg') {
                    isPanning = true;
                    panStart = { x: e.clientX - pan.x, y: e.clientY - pan.y };
                    container.style.cursor = 'grabbing';
                }
            });

            window.addEventListener('mousemove', (e) => {
                if (isPanning) {
                    pan.x = e.clientX - panStart.x;
                    pan.y = e.clientY - panStart.y;
                    updateTransform();
                }
            });

            window.addEventListener('mouseup', () => {
                if (isPanning) {
                    isPanning = false;
                    container.style.cursor = 'grab';
                }
            });
        }
    `}function T3(){return`
        function renderConnections() {
            const svg = document.getElementById('connections-svg');
            // Clear existing paths but keep defs
            svg.querySelectorAll('path').forEach(p => p.remove());

            for (const conn of project.connections) {
                const fromNode = project.nodes.find(n => n.id === conn.from);
                const toNode = project.nodes.find(n => n.id === conn.to);
                
                if (fromNode && toNode) {
                    const path = createConnectionPath(fromNode, toNode, conn);
                    svg.appendChild(path);
                }
            }
        }

        function createConnectionPath(from, to, conn) {
            const group = document.createElementNS('http://www.w3.org/2000/svg', 'g');
            
            // Determine marker based on connection type
            const markerType = conn.connectionType === 'failure' ? 'arrowhead-failure' : 'arrowhead';
            const lineClass = conn.connectionType === 'failure' ? 'connection-line connection-failure' : 'connection-line';
            
            // Node dimensions
            const nodeWidth = 160;
            const nodeHeight = 70;
            
            // Calculate center points
            const fromCenterX = from.position.x + nodeWidth / 2;
            const fromCenterY = from.position.y + nodeHeight / 2;
            const toCenterX = to.position.x + nodeWidth / 2;
            const toCenterY = to.position.y + nodeHeight / 2;
            
            // Calculate relative position
            const dx = toCenterX - fromCenterX;
            const dy = toCenterY - fromCenterY;
            
            // Determine connection points based on relative position
            let x1, y1, x2, y2;
            
            // Choose source point (from node)
            if (Math.abs(dy) > Math.abs(dx)) {
                // Vertical connection dominates
                if (dy > 0) {
                    // Target is below - start from bottom
                    x1 = fromCenterX;
                    y1 = from.position.y + nodeHeight;
                } else {
                    // Target is above - start from top
                    x1 = fromCenterX;
                    y1 = from.position.y;
                }
            } else {
                // Horizontal connection dominates
                if (dx > 0) {
                    // Target is to the right - start from right
                    x1 = from.position.x + nodeWidth;
                    y1 = fromCenterY;
                } else {
                    // Target is to the left - start from left
                    x1 = from.position.x;
                    y1 = fromCenterY;
                }
            }
            
            // Choose target point (to node)
            if (Math.abs(dy) > Math.abs(dx)) {
                // Vertical connection
                if (dy > 0) {
                    // Coming from above - end at top
                    x2 = toCenterX;
                    y2 = to.position.y;
                } else {
                    // Coming from below - end at bottom
                    x2 = toCenterX;
                    y2 = to.position.y + nodeHeight;
                }
            } else {
                // Horizontal connection
                if (dx > 0) {
                    // Coming from left - end at left
                    x2 = to.position.x;
                    y2 = toCenterY;
                } else {
                    // Coming from right - end at right
                    x2 = to.position.x + nodeWidth;
                    y2 = toCenterY;
                }
            }

            // Create bezier curve with appropriate control points
            let d;
            if (Math.abs(dy) > Math.abs(dx)) {
                // Vertical curve
                const midY = (y1 + y2) / 2;
                d = 'M ' + x1 + ' ' + y1 + ' C ' + x1 + ' ' + midY + ', ' + x2 + ' ' + midY + ', ' + x2 + ' ' + y2;
            } else {
                // Horizontal curve
                const midX = (x1 + x2) / 2;
                d = 'M ' + x1 + ' ' + y1 + ' C ' + midX + ' ' + y1 + ', ' + midX + ' ' + y2 + ', ' + x2 + ' ' + y2;
            }
            
            // 1. Hit path (invisible, wider)
            const hitPath = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            hitPath.setAttribute('d', d);
            hitPath.setAttribute('class', 'connection-hit');
            hitPath.dataset.connectionId = conn.id;
            
            // Right-click to toggle connection type
            hitPath.addEventListener('contextmenu', (e) => {
                e.preventDefault();
                e.stopPropagation();
                const currentType = conn.connectionType || 'success';
                const newType = currentType === 'success' ? 'failure' : 'success';
                vscode.postMessage({ 
                    type: 'toggleConnectionType', 
                    payload: { connectionId: conn.id, newType: newType }
                });
            });
            
            // Click to delete
            hitPath.addEventListener('click', (e) => {
                e.stopPropagation();
                vscode.postMessage({ type: 'confirmRemoveConnection', payload: conn.id });
            });

            // 2. Visible path
            const visiblePath = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            visiblePath.setAttribute('d', d);
            visiblePath.setAttribute('marker-end', 'url(#' + markerType + ')');
            visiblePath.setAttribute('class', lineClass);

            group.appendChild(hitPath);
            group.appendChild(visiblePath);
            
            return group;
        }

        function createTempLine(e) {
            const svg = document.getElementById('connections-svg');
            tempLine = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            tempLine.classList.add('temp-connection');
            svg.appendChild(tempLine);
            updateTempLine(e);
        }

        function updateTempLine(e) {
            if (!tempLine || !connectionStart) return;
            
            const fromNode = project.nodes.find(n => n.id === connectionStart);
            if (!fromNode) return;
            
            const canvas = document.getElementById('canvas');
            const rect = canvas.getBoundingClientRect();
            
            const x1 = fromNode.position.x + 160;
            const y1 = fromNode.position.y + 35;
            const x2 = (e.clientX - rect.left - pan.x) / scale;
            const y2 = (e.clientY - rect.top - pan.y) / scale;
            
            const midX = (x1 + x2) / 2;
            tempLine.setAttribute('d', 'M ' + x1 + ' ' + y1 + ' C ' + midX + ' ' + y1 + ', ' + midX + ' ' + y2 + ', ' + x2 + ' ' + y2);
        }

        function endConnection() {
            isConnecting = false;
            connectionStart = null;
            if (tempLine) {
                tempLine.remove();
                tempLine = null;
            }
        }
    `}function S3(){return`
        // Keyboard events for Delete key
        function setupKeyboardEvents() {
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Delete' && selectedNodeId) {
                    vscode.postMessage({ type: 'confirmRemoveNode', payload: selectedNodeId });
                }
            });
        }

        // Handle messages from extension
        window.addEventListener('message', (event) => {
            const message = event.data;
            switch (message.type) {
                case 'projectUpdate':
                    project = message.payload;
                    renderNodes();
                    renderConnections();
                    break;
                case 'nodeStatusUpdate':
                    updateNodeStatus(message.payload.nodeId, message.payload.status);
                    break;
                case 'executionStarted':
                    document.getElementById('btn-run').style.display = 'none';
                    document.getElementById('btn-stop').style.display = 'inline-block';
                    document.getElementById('status').textContent = 'Running...';
                    break;
                case 'executionEnded':
                    document.getElementById('btn-run').style.display = 'inline-block';
                    document.getElementById('btn-stop').style.display = 'none';
                    document.getElementById('status').textContent = message.payload?.status || '';
                    break;
                case 'containerChildUpdated':
                    // Refresh container editor with updated child node
                    if (containerEditorOpen && editingContainerId === message.payload.containerId) {
                        const updatedChild = message.payload.childNode;
                        const idx = containerNodes.findIndex(n => n.id === updatedChild.id);
                        if (idx >= 0) {
                            containerNodes[idx] = updatedChild;
                            renderContainerNodes();
                        }
                    }
                    break;
            }
        });

        function setupToolbarButtons() {
            document.getElementById('btn-new').addEventListener('click', () => {
                vscode.postMessage({ type: 'newProject' });
            });
            
            document.getElementById('btn-open').addEventListener('click', () => {
                vscode.postMessage({ type: 'loadProject' });
            });
            
            document.getElementById('btn-save').addEventListener('click', () => {
                vscode.postMessage({ type: 'saveProject' });
            });
            
            document.getElementById('btn-run').addEventListener('click', () => {
                vscode.postMessage({ type: 'runProject' });
            });
            
            document.getElementById('btn-stop').addEventListener('click', () => {
                vscode.postMessage({ type: 'stopProject' });
            });
        }
    `}function R3(){return`
        function updatePropertiesPanel(node) {
            const content = document.getElementById('properties-content');
            
            if (!node) {
                content.innerHTML = '<p class="placeholder">Select a task to view properties</p>';
                return;
            }
            
            let configHtml = '';
            const config = node.config;
            
            switch (node.type) {
                case 'sql':
                    const queryPreview = config.query 
                        ? (config.query.length > 100 ? config.query.substring(0, 100) + '...' : config.query)
                        : '(not configured)';
                    configHtml = \`
                        <div class="property-group">
                            <span class="property-label">Connection</span>
                            <div class="property-value">\${escapeHtml(config.connection || 'Active connection')}</div>
                        </div>
                        <div class="property-group">
                            <span class="property-label">Query</span>
                            <pre class="property-code">\${escapeHtml(queryPreview)}</pre>
                        </div>
                        <div class="property-group">
                            <span class="property-label">Timeout</span>
                            <div class="property-value">\${config.timeout ? config.timeout + 's' : '(default)'}</div>
                        </div>
                    \`;
                    break;
                case 'python':
                    let scriptInfo = '(not configured)';
                    if (config.scriptPath) {
                        const pathParts = config.scriptPath.split(/[/\\\\\\\\]/);
                        scriptInfo = '\u{1F4C1} ' + pathParts[pathParts.length - 1];
                    } else if (config.script) {
                        const preview = config.script.length > 50 ? config.script.substring(0, 50) + '...' : config.script;
                        scriptInfo = preview;
                    }
                    configHtml = \`
                        <div class="property-group">
                            <span class="property-label">Script Source</span>
                            <div class="property-value">\${config.scriptPath ? 'File' : (config.script ? 'Inline' : 'Not set')}</div>
                        </div>
                        <div class="property-group">
                            <span class="property-label">Script</span>
                            <pre class="property-code">\${escapeHtml(scriptInfo)}</pre>
                        </div>
                        <div class="property-group">
                            <span class="property-label">Interpreter</span>
                            <div class="property-value">\${escapeHtml(config.pythonPath || 'Auto-detect')}</div>
                        </div>
                        <div class="property-group">
                            <span class="property-label">Timeout</span>
                            <div class="property-value">\${config.timeout ? config.timeout + 's' : '(default)'}</div>
                        </div>
                    \`;
                    break;
                case 'export':
                    const outPath = config.outputPath 
                        ? config.outputPath.split(/[/\\\\\\\\]/).pop() 
                        : '(not configured)';
                    const exportQueryPreview = config.query 
                        ? (config.query.length > 50 ? config.query.substring(0, 50) + '...' : config.query)
                        : '(uses previous output)';
                    configHtml = \`
                        <div class="property-group">
                            <span class="property-label">Format</span>
                            <div class="property-value">\${config.format?.toUpperCase() || '(not set)'}</div>
                        </div>
                        <div class="property-group">
                            <span class="property-label">Output File</span>
                            <div class="property-value">\u{1F4C4} \${escapeHtml(outPath)}</div>
                        </div>
                        <div class="property-group">
                            <span class="property-label">Query</span>
                            <pre class="property-code">\${escapeHtml(exportQueryPreview)}</pre>
                        </div>
                        <div class="property-group">
                            <span class="property-label">Timeout</span>
                            <div class="property-value">\${config.timeout ? config.timeout + 's' : '(default)'}</div>
                        </div>
                    \`;
                    break;
                case 'import':
                    const inPath = config.inputPath 
                        ? config.inputPath.split(/[/\\\\\\\\]/).pop() 
                        : '(not configured)';
                    configHtml = \`
                        <div class="property-group">
                            <span class="property-label">Format</span>
                            <div class="property-value">\${config.format?.toUpperCase() || 'Auto-detect'}</div>
                        </div>
                        <div class="property-group">
                            <span class="property-label">Input File</span>
                            <div class="property-value">\u{1F4C4} \${escapeHtml(inPath)}</div>
                        </div>
                        <div class="property-group">
                            <span class="property-label">Target Table</span>
                            <div class="property-value">\${escapeHtml(config.targetTable || '(not set)')}</div>
                        </div>
                        <div class="property-group">
                            <span class="property-label">Create Table</span>
                            <div class="property-value">\${config.createTable !== false ? 'Yes (if needed)' : 'No'}</div>
                        </div>
                        <div class="property-group">
                            <span class="property-label">Timeout</span>
                            <div class="property-value">\${config.timeout ? config.timeout + 's' : '(default)'}</div>
                        </div>
                    \`;
                    break;
                case 'container':
                    const childCount = (config.nodes || []).length;
                    configHtml = \`
                        <div class="property-group">
                            <span class="property-label">Child Tasks</span>
                            <div class="property-value">\${childCount} task(s)</div>
                        </div>
                    \`;
                    break;
                case 'variable':
                    const sourceLabels = {
                        'prompt': '\u{1F4DD} Prompt User',
                        'static': '\u{1F512} Static Value',
                        'sql': '\u{1F5C4}\uFE0F SQL Query'
                    };
                    const sourceLabel = sourceLabels[config.source] || config.source;
                    let varDetails = '';
                    if (config.source === 'prompt') {
                        varDetails = \`
                            <div class="property-group">
                                <span class="property-label">Prompt Message</span>
                                <div class="property-value">\${escapeHtml(config.promptMessage || '(default)')}</div>
                            </div>
                            <div class="property-group">
                                <span class="property-label">Default Value</span>
                                <div class="property-value">\${escapeHtml(config.defaultValue || '(none)')}</div>
                            </div>
                        \`;
                    } else if (config.source === 'static') {
                        varDetails = \`
                            <div class="property-group">
                                <span class="property-label">Value</span>
                                <pre class="property-code">\${escapeHtml(config.value || '(empty)')}</pre>
                            </div>
                        \`;
                    } else if (config.source === 'sql') {
                        const sqlPreview = config.query 
                            ? (config.query.length > 50 ? config.query.substring(0, 50) + '...' : config.query)
                            : '(not configured)';
                        varDetails = \`
                            <div class="property-group">
                                <span class="property-label">Query</span>
                                <pre class="property-code">\${escapeHtml(sqlPreview)}</pre>
                            </div>
                            <div class="property-group">
                                <span class="property-label">Timeout</span>
                                <div class="property-value">\${config.timeout ? config.timeout + 's' : '(default)'}</div>
                            </div>
                        \`;
                    }
                    const varNameDisplay = config.variableName ? ('$' + '{' + escapeHtml(config.variableName) + '}') : '(not set)';
                    configHtml = \`
                        <div class="property-group">
                            <span class="property-label">Variable Name</span>
                            <div class="property-value" style="font-family: monospace;">\${varNameDisplay}</div>
                        </div>
                        <div class="property-group">
                            <span class="property-label">Source</span>
                            <div class="property-value">\${sourceLabel}</div>
                        </div>
                        \${varDetails}
                    \`;
                    break;
            }
            
            content.innerHTML = \`
                <div class="property-group">
                    <span class="property-label">ID</span>
                    <div class="property-value" style="font-family: monospace; font-size: 0.75em;">\${node.id}</div>
                </div>
                <div class="property-group">
                    <span class="property-label">Name</span>
                    <div class="property-value">\${escapeHtml(node.name)}</div>
                </div>
                <div class="property-group">
                    <span class="property-label">Type</span>
                    <div class="property-value">\${node.type.toUpperCase()}</div>
                </div>
                <div class="property-group">
                    <span class="property-label">Position</span>
                    <div class="property-value">(\${node.position.x}, \${node.position.y})</div>
                </div>
                <hr style="border: none; border-top: 1px solid var(--border-color); margin: 12px 0;">
                <h4 style="margin: 8px 0; font-size: 0.85em; color: var(--text-muted);">\u2699\uFE0F Configuration</h4>
                \${configHtml}
                <button class="configure-btn" data-node-id="\${node.id}">
                    \u270F\uFE0F Edit Configuration
                </button>
            \`;
            
            // Attach event listener to configure button (CSP-safe)
            const configBtn = content.querySelector('.configure-btn');
            if (configBtn) {
                configBtn.addEventListener('click', () => {
                    vscode.postMessage({ type: 'configureNode', payload: node.id });
                });
            }
        }
    `}function A3(){return`
        function renderNodes() {
            const container = document.getElementById('nodes-container');
            container.innerHTML = '';

            for (const node of project.nodes) {
                const el = createNodeElement(node);
                container.appendChild(el);
            }
        }

        function createNodeElement(node, isContainerChild = false) {
            const el = document.createElement('div');
            const isSelected = isContainerChild 
                ? containerSelectedNodeId === node.id 
                : selectedNodeId === node.id;
            el.className = 'etl-node ' + node.type + (isSelected ? ' selected' : '');
            el.id = (isContainerChild ? 'container-node-' : 'node-') + node.id;
            el.style.left = node.position.x + 'px';
            el.style.top = node.position.y + 'px';

            // Show child count badge for containers
            const childCountBadge = node.type === 'container' && node.config?.nodes?.length > 0
                ? \`<span class="node-child-count">\${node.config.nodes.length}</span>\`
                : '';

            el.innerHTML = \`
                <div class="node-actions">
                    <button class="node-delete-btn" data-node="\${node.id}" title="Delete task">\xD7</button>
                </div>
                <div class="node-type-indicator"></div>
                <div class="node-content">
                    <div class="node-header">
                        <span class="node-icon">\${nodeIcons[node.type] || '\u{1F4CB}'}</span>
                        <span class="node-name">\${escapeHtml(node.name)}\${childCountBadge}</span>
                    </div>
                    <div class="node-type">\${node.type}</div>
                </div>
                <div class="node-connectors">
                    <div class="connector input" data-node="\${node.id}" data-type="input"></div>
                    <div class="connector output" data-node="\${node.id}" data-type="output"></div>
                </div>
            \`;

            setupNodeEvents(el, node);
            return el;
        }

        function setupNodeEvents(el, node) {
            // Delete button click
            const deleteBtn = el.querySelector('.node-delete-btn');
            if (deleteBtn) {
                deleteBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    vscode.postMessage({ type: 'confirmRemoveNode', payload: node.id });
                });
            }

            // Drag
            el.addEventListener('mousedown', (e) => {
                if (e.target.classList.contains('connector')) return;
                if (e.target.classList.contains('node-delete-btn')) return;
                
                selectedNodeId = node.id;
                isDragging = true;
                
                const rect = el.getBoundingClientRect();
                dragOffset.x = (e.clientX - rect.left) / scale;
                dragOffset.y = (e.clientY - rect.top) / scale;
                
                // Update selection
                document.querySelectorAll('.etl-node').forEach(n => n.classList.remove('selected'));
                el.classList.add('selected');
                
                updatePropertiesPanel(node);
            });

            // Double-click to configure (or open container editor)
            el.addEventListener('dblclick', () => {
                if (node.type === 'container') {
                    openContainerEditor(node.id);
                } else {
                    vscode.postMessage({ type: 'configureNode', payload: node.id });
                }
            });

            // Connector events
            el.querySelectorAll('.connector').forEach(conn => {
                conn.addEventListener('mousedown', (e) => {
                    e.stopPropagation();
                    if (conn.dataset.type === 'output') {
                        isConnecting = true;
                        connectionStart = node.id;
                        createTempLine(e);
                    }
                });

                conn.addEventListener('mouseup', (e) => {
                    if (isConnecting && conn.dataset.type === 'input' && connectionStart !== node.id) {
                        vscode.postMessage({
                            type: 'addConnection',
                            payload: { from: connectionStart, to: node.id }
                        });
                    }
                    endConnection();
                });
            });

            // Context menu for delete
            el.addEventListener('contextmenu', (e) => {
                e.preventDefault();
                vscode.postMessage({ type: 'confirmRemoveNode', payload: node.id });
            });
        }

        function setupToolboxDrag() {
            document.querySelectorAll('.toolbox-item').forEach(item => {
                item.addEventListener('dragstart', (e) => {
                    e.dataTransfer.setData('nodeType', item.dataset.type);
                });
            });
        }

        function setupCanvasDrop() {
            const canvas = document.getElementById('canvas');
            
            canvas.addEventListener('dragover', (e) => {
                e.preventDefault();
            });
            
            canvas.addEventListener('drop', (e) => {
                e.preventDefault();
                const nodeType = e.dataTransfer.getData('nodeType');
                if (nodeType) {
                    const rect = canvas.getBoundingClientRect();
                    const x = (e.clientX - rect.left - pan.x) / scale;
                    const y = (e.clientY - rect.top - pan.y) / scale;
                    
                    vscode.postMessage({
                        type: 'addNode',
                        payload: { type: nodeType, position: { x, y } }
                    });
                }
            });

            // Mouse move for dragging and connecting
            document.addEventListener('mousemove', (e) => {
                if (isDragging && selectedNodeId) {
                    const canvas = document.getElementById('canvas');
                    const rect = canvas.getBoundingClientRect();
                    const x = (e.clientX - rect.left - pan.x) / scale - dragOffset.x;
                    const y = (e.clientY - rect.top - pan.y) / scale - dragOffset.y;
                    
                    // Update node position in DOM
                    const nodeEl = document.getElementById('node-' + selectedNodeId);
                    if (nodeEl) {
                        nodeEl.style.left = Math.max(0, x) + 'px';
                        nodeEl.style.top = Math.max(0, y) + 'px';
                    }
                    
                    // Update connections
                    const node = project.nodes.find(n => n.id === selectedNodeId);
                    if (node) {
                        node.position = { x: Math.max(0, x), y: Math.max(0, y) };
                        renderConnections();
                    }
                }
                
                if (isConnecting && tempLine) {
                    updateTempLine(e);
                }
            });

            document.addEventListener('mouseup', (e) => {
                if (isDragging && selectedNodeId) {
                    // Save position
                    const node = project.nodes.find(n => n.id === selectedNodeId);
                    if (node) {
                        vscode.postMessage({
                            type: 'updateNodePosition',
                            payload: { nodeId: selectedNodeId, position: node.position }
                        });
                    }
                }
                
                isDragging = false;
                endConnection();
            });

            // Deselect on canvas click
            canvas.addEventListener('click', (e) => {
                if (e.target === canvas || e.target.classList.contains('nodes-layer')) {
                    selectedNodeId = null;
                    document.querySelectorAll('.etl-node').forEach(n => n.classList.remove('selected'));
                    updatePropertiesPanel(null);
                }
            });
        }
    `}function m3(){return`
        function setupContainerEditor() {
            // Close button
            document.getElementById('container-editor-close').addEventListener('click', closeContainerEditor);
            document.getElementById('container-editor-cancel').addEventListener('click', closeContainerEditor);
            document.getElementById('container-editor-save').addEventListener('click', saveContainerAndClose);

            // Toolbox drag for container editor
            document.querySelectorAll('.toolbox-item[data-container="true"]').forEach(item => {
                item.addEventListener('dragstart', (e) => {
                    e.dataTransfer.setData('containerNodeType', item.dataset.type);
                });
            });

            // Canvas drop for container editor
            const containerCanvas = document.getElementById('container-canvas');
            containerCanvas.addEventListener('dragover', (e) => e.preventDefault());
            containerCanvas.addEventListener('drop', (e) => {
                e.preventDefault();
                const nodeType = e.dataTransfer.getData('containerNodeType');
                if (nodeType && containerEditorOpen) {
                    const rect = containerCanvas.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;
                    addContainerChildNode(nodeType, { x, y });
                }
            });

            // Click to deselect in container canvas
            containerCanvas.addEventListener('click', (e) => {
                if (e.target === containerCanvas || e.target.id === 'container-nodes' || e.target.id === 'container-zoom-wrapper') {
                    containerSelectedNodeId = null;
                    document.querySelectorAll('#container-nodes .etl-node').forEach(n => n.classList.remove('selected'));
                }
            });

            // Mouse move for container dragging
            document.addEventListener('mousemove', (e) => {
                if (containerIsDragging && containerSelectedNodeId) {
                    const canvas = document.getElementById('container-canvas');
                    const rect = canvas.getBoundingClientRect();
                    const x = e.clientX - rect.left - containerDragOffset.x;
                    const y = e.clientY - rect.top - containerDragOffset.y;

                    const nodeEl = document.getElementById('container-node-' + containerSelectedNodeId);
                    if (nodeEl) {
                        nodeEl.style.left = Math.max(0, x) + 'px';
                        nodeEl.style.top = Math.max(0, y) + 'px';
                    }

                    const node = containerNodes.find(n => n.id === containerSelectedNodeId);
                    if (node) {
                        node.position = { x: Math.max(0, x), y: Math.max(0, y) };
                        renderContainerConnections();
                    }
                }

                if (containerIsConnecting && containerTempLine) {
                    updateContainerTempLine(e);
                }
            });

            document.addEventListener('mouseup', () => {
                containerIsDragging = false;
                endContainerConnection();
            });

            // Escape to close
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && containerEditorOpen) {
                    closeContainerEditor();
                }
                if (e.key === 'Delete' && containerEditorOpen && containerSelectedNodeId) {
                    removeContainerChildNode(containerSelectedNodeId);
                }
            });
        }

        function openContainerEditor(containerId) {
            const containerNode = project.nodes.find(n => n.id === containerId);
            if (!containerNode || containerNode.type !== 'container') return;

            editingContainerId = containerId;
            containerEditorOpen = true;
            containerNodes = JSON.parse(JSON.stringify(containerNode.config.nodes || []));
            containerConnections = JSON.parse(JSON.stringify(containerNode.config.connections || []));
            containerSelectedNodeId = null;

            document.getElementById('container-editor-title').textContent = '\u{1F4E6} Edit: ' + containerNode.name;
            document.getElementById('container-editor-overlay').style.display = 'flex';

            renderContainerNodes();
            renderContainerConnections();
        }

        function closeContainerEditor() {
            containerEditorOpen = false;
            editingContainerId = null;
            containerNodes = [];
            containerConnections = [];
            document.getElementById('container-editor-overlay').style.display = 'none';
        }

        function saveContainerAndClose() {
            if (!editingContainerId) return;

            vscode.postMessage({
                type: 'updateContainerNodes',
                payload: {
                    containerId: editingContainerId,
                    nodes: containerNodes,
                    connections: containerConnections
                }
            });

            closeContainerEditor();
        }

        function renderContainerNodes() {
            const container = document.getElementById('container-nodes');
            container.innerHTML = '';

            for (const node of containerNodes) {
                const el = createContainerNodeElement(node);
                container.appendChild(el);
            }
        }

        function createContainerNodeElement(node) {
            const el = document.createElement('div');
            el.className = 'etl-node ' + node.type + (containerSelectedNodeId === node.id ? ' selected' : '');
            el.id = 'container-node-' + node.id;
            el.style.left = node.position.x + 'px';
            el.style.top = node.position.y + 'px';

            el.innerHTML = \`
                <div class="node-actions">
                    <button class="node-delete-btn" data-node="\${node.id}" title="Delete">\xD7</button>
                </div>
                <div class="node-type-indicator"></div>
                <div class="node-content">
                    <div class="node-header">
                        <span class="node-icon">\${nodeIcons[node.type] || '\u{1F4CB}'}</span>
                        <span class="node-name">\${escapeHtml(node.name)}</span>
                    </div>
                    <div class="node-type">\${node.type}</div>
                </div>
                <div class="node-connectors">
                    <div class="connector input" data-node="\${node.id}" data-type="input"></div>
                    <div class="connector output" data-node="\${node.id}" data-type="output"></div>
                </div>
            \`;

            setupContainerNodeEvents(el, node);
            return el;
        }

        function setupContainerNodeEvents(el, node) {
            // Delete button
            const deleteBtn = el.querySelector('.node-delete-btn');
            if (deleteBtn) {
                deleteBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    removeContainerChildNode(node.id);
                });
            }

            // Drag
            el.addEventListener('mousedown', (e) => {
                if (e.target.classList.contains('connector')) return;
                if (e.target.classList.contains('node-delete-btn')) return;

                containerSelectedNodeId = node.id;
                containerIsDragging = true;

                const rect = el.getBoundingClientRect();
                containerDragOffset.x = e.clientX - rect.left;
                containerDragOffset.y = e.clientY - rect.top;

                document.querySelectorAll('#container-nodes .etl-node').forEach(n => n.classList.remove('selected'));
                el.classList.add('selected');
            });

            // Double-click to configure (first save, then configure)
            el.addEventListener('dblclick', () => {
                // First save current state to backend
                vscode.postMessage({
                    type: 'updateContainerNodes',
                    payload: {
                        containerId: editingContainerId,
                        nodes: containerNodes,
                        connections: containerConnections
                    }
                });
                // Then request configuration
                vscode.postMessage({ 
                    type: 'configureContainerChildNode', 
                    payload: { containerId: editingContainerId, nodeId: node.id } 
                });
            });

            // Connector events
            el.querySelectorAll('.connector').forEach(conn => {
                conn.addEventListener('mousedown', (e) => {
                    e.stopPropagation();
                    if (conn.dataset.type === 'output') {
                        containerIsConnecting = true;
                        containerConnectionStart = node.id;
                        createContainerTempLine(e);
                    }
                });

                conn.addEventListener('mouseup', () => {
                    if (containerIsConnecting && conn.dataset.type === 'input' && containerConnectionStart !== node.id) {
                        addContainerConnection(containerConnectionStart, node.id);
                    }
                    endContainerConnection();
                });
            });

            // Context menu delete
            el.addEventListener('contextmenu', (e) => {
                e.preventDefault();
                removeContainerChildNode(node.id);
            });
        }

        function addContainerChildNode(type, position) {
            const nodeNames = {
                sql: 'SQL Task',
                python: 'Python Script',
                export: 'Export Data',
                import: 'Import Data',
                variable: 'Variable'
            };

            const defaultConfigs = {
                sql: { type: 'sql', query: '', connection: 'default' },
                python: { type: 'python', script: '' },
                export: { type: 'export', format: 'csv', outputPath: '' },
                import: { type: 'import', format: 'csv', inputPath: '', targetTable: '' },
                variable: { type: 'variable', variableName: '', source: 'prompt', promptMessage: 'Enter value' }
            };

            const newNode = {
                id: 'child-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9),
                type: type,
                name: nodeNames[type] || 'New Task',
                position: position,
                config: defaultConfigs[type] || {}
            };

            containerNodes.push(newNode);
            renderContainerNodes();
            renderContainerConnections();
        }

        function removeContainerChildNode(nodeId) {
            containerNodes = containerNodes.filter(n => n.id !== nodeId);
            containerConnections = containerConnections.filter(c => c.from !== nodeId && c.to !== nodeId);
            if (containerSelectedNodeId === nodeId) containerSelectedNodeId = null;
            renderContainerNodes();
            renderContainerConnections();
        }

        function addContainerConnection(from, to) {
            // Check if connection already exists
            if (containerConnections.some(c => c.from === from && c.to === to)) return;

            containerConnections.push({
                id: 'conn-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9),
                from: from,
                to: to
            });
            renderContainerConnections();
        }

        function renderContainerConnections() {
            const svg = document.getElementById('container-connections-svg');
            svg.querySelectorAll('path').forEach(p => p.remove());

            for (const conn of containerConnections) {
                const fromNode = containerNodes.find(n => n.id === conn.from);
                const toNode = containerNodes.find(n => n.id === conn.to);

                if (fromNode && toNode) {
                    const path = createContainerConnectionPath(fromNode, toNode, conn);
                    svg.appendChild(path);
                }
            }
        }

        function createContainerConnectionPath(from, to, conn) {
            const group = document.createElementNS('http://www.w3.org/2000/svg', 'g');

            // Determine marker based on connection type
            const markerType = conn.connectionType === 'failure' ? 'container-arrowhead-failure' : 'container-arrowhead';
            const lineClass = conn.connectionType === 'failure' ? 'connection-line connection-failure' : 'connection-line';

            // Source: always right side (output connector)
            const x1 = from.position.x + 160;
            const y1 = from.position.y + 35;
            
            // Determine target connection point based on relative positions
            let x2, y2;
            const nodeWidth = 160;
            const nodeHeight = 70;
            
            const dx = to.position.x - from.position.x;
            const dy = to.position.y - from.position.y;
            
            if (dx > 50) {
                x2 = to.position.x;
                y2 = to.position.y + 35;
            } else if (dx < -50 && Math.abs(dy) < 80) {
                x2 = to.position.x + nodeWidth;
                y2 = to.position.y + 35;
            } else if (dy > 30) {
                x2 = to.position.x + nodeWidth / 2;
                y2 = to.position.y;
            } else if (dy < -30) {
                x2 = to.position.x + nodeWidth / 2;
                y2 = to.position.y + nodeHeight;
            } else {
                x2 = to.position.x;
                y2 = to.position.y + 35;
            }

            // Create bezier curve with appropriate control points
            let d;
            if (dx > 50) {
                const midX = (x1 + x2) / 2;
                d = 'M ' + x1 + ' ' + y1 + ' C ' + midX + ' ' + y1 + ', ' + midX + ' ' + y2 + ', ' + x2 + ' ' + y2;
            } else if (dx < -50 && Math.abs(dy) < 80) {
                d = 'M ' + x1 + ' ' + y1 + ' C ' + (x1 + 60) + ' ' + y1 + ', ' + (x2 + 60) + ' ' + y2 + ', ' + x2 + ' ' + y2;
            } else if (dy > 30) {
                d = 'M ' + x1 + ' ' + y1 + ' C ' + (x1 + 40) + ' ' + y1 + ', ' + x2 + ' ' + (y2 - 40) + ', ' + x2 + ' ' + y2;
            } else if (dy < -30) {
                d = 'M ' + x1 + ' ' + y1 + ' C ' + (x1 + 40) + ' ' + y1 + ', ' + x2 + ' ' + (y2 + 40) + ', ' + x2 + ' ' + y2;
            } else {
                const midX = (x1 + x2) / 2;
                d = 'M ' + x1 + ' ' + y1 + ' C ' + midX + ' ' + y1 + ', ' + midX + ' ' + y2 + ', ' + x2 + ' ' + y2;
            }

            const hitPath = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            hitPath.setAttribute('d', d);
            hitPath.setAttribute('class', 'connection-hit');
            
            // Right-click to toggle connection type
            hitPath.addEventListener('contextmenu', (e) => {
                e.preventDefault();
                e.stopPropagation();
                const currentType = conn.connectionType || 'success';
                const newType = currentType === 'success' ? 'failure' : 'success';
                // Update locally
                conn.connectionType = newType;
                renderContainerConnections();
            });
            
            // Click to delete
            hitPath.addEventListener('click', (e) => {
                e.stopPropagation();
                containerConnections = containerConnections.filter(c => c.id !== conn.id);
                renderContainerConnections();
            });

            const visiblePath = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            visiblePath.setAttribute('d', d);
            visiblePath.setAttribute('marker-end', 'url(#' + markerType + ')');
            visiblePath.setAttribute('class', lineClass);

            group.appendChild(hitPath);
            group.appendChild(visiblePath);

            return group;
        }

        function createContainerTempLine(e) {
            const svg = document.getElementById('container-connections-svg');
            containerTempLine = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            containerTempLine.classList.add('temp-connection');
            svg.appendChild(containerTempLine);
            updateContainerTempLine(e);
        }

        function updateContainerTempLine(e) {
            if (!containerTempLine || !containerConnectionStart) return;

            const fromNode = containerNodes.find(n => n.id === containerConnectionStart);
            if (!fromNode) return;

            const canvas = document.getElementById('container-canvas');
            const rect = canvas.getBoundingClientRect();

            const x1 = fromNode.position.x + 160;
            const y1 = fromNode.position.y + 35;
            const x2 = e.clientX - rect.left;
            const y2 = e.clientY - rect.top;

            const midX = (x1 + x2) / 2;
            containerTempLine.setAttribute('d', 'M ' + x1 + ' ' + y1 + ' C ' + midX + ' ' + y1 + ', ' + midX + ' ' + y2 + ', ' + x2 + ' ' + y2);
        }

        function endContainerConnection() {
            containerIsConnecting = false;
            containerConnectionStart = null;
            if (containerTempLine) {
                containerTempLine.remove();
                containerTempLine = null;
            }
        }
    `}function g3(t){return`
        (function() {
            'use strict';
            
            ${E3(t)}
            
            ${h3()}
            
            ${p3()}
            
            ${T3()}
            
            ${A3()}
            
            ${R3()}
            
            ${S3()}
            
            ${m3()}
            
            // Initialize function
            function init() {
                renderNodes();
                renderConnections();
                setupToolboxDrag();
                setupCanvasDrop();
                setupToolbarButtons();
                setupKeyboardEvents();
                setupZoomPan();
                setupContainerEditor();
                
                // Request current project state
                vscode.postMessage({ type: 'getProject' });
            }
            
            // Start
            init();
        })();
    `}function I3(t){return g3(t)}function Q0e(t){return`
        <header class="toolbar">
            <div class="toolbar-left">
                <button id="btn-new" title="New Project">\u{1F4C4} New</button>
                <button id="btn-open" title="Open Project">\u{1F4C2} Open</button>
                <button id="btn-save" title="Save Project">\u{1F4BE} Save</button>
                <span class="separator"></span>
                <button id="btn-run" class="btn-primary" title="Run Project">\u25B6\uFE0F Run</button>
                <button id="btn-stop" class="btn-danger" title="Stop Execution" style="display:none;">\u23F9\uFE0F Stop</button>
            </div>
            <div class="toolbar-center">
                <span class="project-name">${t}</span>
            </div>
            <div class="toolbar-right">
                <span class="status" id="status"></span>
            </div>
        </header>`}function Z0e(){return`
        <aside class="toolbox">
            <h3>\u{1F4E6} Tasks</h3>
            <div class="toolbox-items">
                <div class="toolbox-item" data-type="variable" draggable="true">
                    <span class="icon">\u{1F524}</span>
                    <span class="label">Variable</span>
                </div>
                <div class="toolbox-item" data-type="sql" draggable="true">
                    <span class="icon">\u{1F4DC}</span>
                    <span class="label">SQL Task</span>
                </div>
                <div class="toolbox-item" data-type="python" draggable="true">
                    <span class="icon">\u{1F40D}</span>
                    <span class="label">Python Script</span>
                </div>
                <div class="toolbox-item" data-type="container" draggable="true">
                    <span class="icon">\u{1F4E6}</span>
                    <span class="label">Container</span>
                </div>
                <div class="toolbox-item" data-type="export" draggable="true">
                    <span class="icon">\u{1F4E4}</span>
                    <span class="label">Export (CSV/XLSB)</span>
                </div>
                <div class="toolbox-item" data-type="import" draggable="true">
                    <span class="icon">\u{1F4E5}</span>
                    <span class="label">Import (CSV/XLSB)</span>
                </div>
            </div>
            
            <h3>\u2139\uFE0F Help</h3>
            <div class="help-text">
                <p>Drag tasks to canvas</p>
                <p>Connect outputs to inputs</p>
                <p>Double-click to configure</p>
                <p>Connected = Sequential</p>
                <p>Unconnected = Parallel</p>
                <p>Use \${name} in SQL</p>
            </div>
        </aside>`}function eLe(){return`
        <main class="canvas-container" id="canvas">
            <div id="zoom-wrapper" class="zoom-wrapper">
                <svg class="connections-layer" id="connections-svg">
                    <defs>
                        <marker id="arrowhead" markerWidth="10" markerHeight="7" 
                            refX="10" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="#4caf50" />
                        </marker>
                        <marker id="arrowhead-failure" markerWidth="10" markerHeight="7" 
                            refX="10" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="#f44336" />
                        </marker>
                    </defs>
                </svg>
                <div class="nodes-layer" id="nodes-container"></div>
            </div>
        </main>`}function tLe(){return`
        <aside class="properties-panel" id="properties">
            <h3>\u2699\uFE0F Properties</h3>
            <div id="properties-content">
                <p class="placeholder">Select a task to view properties</p>
            </div>
        </aside>`}function nLe(){return`
        <div id="container-editor-overlay" class="container-editor-overlay" style="display:none;">
            <div class="container-editor-modal">
                <header class="container-editor-header">
                    <span id="container-editor-title" class="container-editor-title">\u{1F4E6} Edit Container</span>
                    <button id="container-editor-close" class="container-editor-close" title="Close">\u2715</button>
                </header>
                <div class="container-editor-content">
                    <aside class="container-editor-toolbox">
                        <h4>\u{1F4E6} Tasks</h4>
                        <div class="toolbox-item" data-type="variable" data-container="true" draggable="true">
                            <span class="icon">\u{1F524}</span>
                            <span class="label">Variable</span>
                        </div>
                        <div class="toolbox-item" data-type="sql" data-container="true" draggable="true">
                            <span class="icon">\u{1F4DC}</span>
                            <span class="label">SQL Task</span>
                        </div>
                        <div class="toolbox-item" data-type="python" data-container="true" draggable="true">
                            <span class="icon">\u{1F40D}</span>
                            <span class="label">Python</span>
                        </div>
                        <div class="toolbox-item" data-type="export" data-container="true" draggable="true">
                            <span class="icon">\u{1F4E4}</span>
                            <span class="label">Export</span>
                        </div>
                        <div class="toolbox-item" data-type="import" data-container="true" draggable="true">
                            <span class="icon">\u{1F4E5}</span>
                            <span class="label">Import</span>
                        </div>
                    </aside>
                    <div class="container-editor-canvas" id="container-canvas">
                        <div class="zoom-wrapper" id="container-zoom-wrapper">
                            <svg class="connections-layer" id="container-connections-svg">
                                <defs>
                                    <marker id="container-arrowhead" markerWidth="10" markerHeight="7" 
                                        refX="10" refY="3.5" orient="auto">
                                        <polygon points="0 0, 10 3.5, 0 7" fill="#4caf50" />
                                    </marker>
                                    <marker id="container-arrowhead-failure" markerWidth="10" markerHeight="7" 
                                        refX="10" refY="3.5" orient="auto">
                                        <polygon points="0 0, 10 3.5, 0 7" fill="#f44336" />
                                    </marker>
                                </defs>
                            </svg>
                            <div class="nodes-layer" id="container-nodes"></div>
                        </div>
                    </div>
                </div>
                <footer class="container-editor-footer">
                    <button id="container-editor-cancel" class="btn-cancel">Cancel</button>
                    <button id="container-editor-save" class="btn-save">\u{1F4BE} Save</button>
                </footer>
            </div>
        </div>`}function _3(t){let{project:e,nonce:n}=t;return`<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'none'; style-src 'unsafe-inline'; script-src 'nonce-${n}';">
    <title>ETL Designer - ${e.name}</title>
    <style>${f3()}</style>
</head>
<body>
    <div class="etl-designer">
        ${Q0e(e.name)}

        <div class="main-content">
            ${Z0e()}
            ${eLe()}
            ${tLe()}
        </div>
    </div>

    ${nLe()}

    <script nonce="${n}">
        ${I3(e)}
    </script>
</body>
</html>`}var at=j(require("vscode")),MR=class{constructor(e,n){this.projectManager=e;this.onUpdate=n}async configureNode(e){let n=this.projectManager.getNode(e);if(n)switch(n.type){case"sql":await this.configureSqlNode(n,e);break;case"python":await this.configurePythonNode(n,e);break;case"export":await this.configureExportNode(n,e);break;case"import":await this.configureImportNode(n,e);break;case"variable":await this.configureVariableNode(n,e);break}}getDefaultNodeName(e){return{sql:"SQL Task",python:"Python Script",container:"Container",export:"Export Data",import:"Import Data",variable:"Variable"}[e]||"New Task"}async configureSqlNode(e,n){let r=e.config,i=await at.window.showInputBox({prompt:"Enter task name",value:e.name,placeHolder:"e.g. Load Customer Data"});if(i===void 0)return;let s=await at.window.showInputBox({prompt:"Enter SQL query",value:r.query,placeHolder:"SELECT * FROM table_name"});if(s!==void 0){let o=await at.window.showInputBox({prompt:"Enter execution timeout in seconds (optional)",value:r.timeout?String(r.timeout):"",placeHolder:"e.g. 60"}),a=o&&!isNaN(parseInt(o))?parseInt(o):void 0;this.projectManager.updateNode(n,{name:i,config:{...r,query:s,timeout:a}}),this.onUpdate()}}async configurePythonNode(e,n){let r=e.config,i=await at.window.showInputBox({prompt:"Enter task name",value:e.name,placeHolder:"e.g. Transform Data"});if(i===void 0)return;let s=await at.window.showQuickPick(["Enter script inline","Select script file"],{placeHolder:"How to provide the Python script?"});if(s==="Enter script inline"){let o=await at.window.showInputBox({prompt:"Enter Python script",value:r.script,placeHolder:'print("Hello ETL")'});if(o!==void 0){let a=await at.window.showInputBox({prompt:"Enter execution timeout in seconds (optional)",value:r.timeout?String(r.timeout):"",placeHolder:"e.g. 60"}),l=a&&!isNaN(parseInt(a))?parseInt(a):void 0;this.projectManager.updateNode(n,{name:i,config:{...r,script:o,scriptPath:void 0,timeout:l}}),this.onUpdate()}}else if(s==="Select script file"){let o=await at.window.showOpenDialog({filters:{Python:["py"]},canSelectMany:!1});if(o&&o[0]){let a=await at.window.showInputBox({prompt:"Enter execution timeout in seconds (optional)",value:r.timeout?String(r.timeout):"",placeHolder:"e.g. 60"}),l=a&&!isNaN(parseInt(a))?parseInt(a):void 0;this.projectManager.updateNode(n,{name:i,config:{...r,scriptPath:o[0].fsPath,script:"",timeout:l}}),this.onUpdate()}}}async configureExportNode(e,n){let r=e.config,i=await at.window.showInputBox({prompt:"Enter task name",value:e.name,placeHolder:"e.g. Export to CSV"});if(i===void 0)return;let s=await at.window.showQuickPick(["csv","xlsb"],{placeHolder:"Select output format"});if(s){let o=await at.window.showSaveDialog({filters:s==="csv"?{CSV:["csv"]}:{"Excel Binary":["xlsb"]}});if(o){let a=await at.window.showInputBox({prompt:"Enter SQL query for export",value:r.query||"",placeHolder:"SELECT * FROM table_name"});if(a!==void 0){let l=await at.window.showInputBox({prompt:"Enter execution timeout in seconds (optional)",value:r.timeout?String(r.timeout):"",placeHolder:"e.g. 300"}),c=l&&!isNaN(parseInt(l))?parseInt(l):void 0;this.projectManager.updateNode(n,{name:i,config:{...r,format:s,outputPath:o.fsPath,query:a,timeout:c}}),this.onUpdate()}}}}async configureImportNode(e,n){let r=e.config,i=await at.window.showInputBox({prompt:"Enter task name",value:e.name,placeHolder:"e.g. Import Products"});if(i===void 0)return;let s=await at.window.showOpenDialog({filters:{"Data Files":["csv","xlsb"],CSV:["csv"],"Excel Binary":["xlsb"]},canSelectMany:!1});if(s&&s[0]){let o=s[0].fsPath,a=o.endsWith(".xlsb")?"xlsb":"csv",l=await at.window.showInputBox({prompt:"Enter target table name",value:r.targetTable,placeHolder:"SCHEMA.TABLE_NAME"});if(l){let c=await at.window.showInputBox({prompt:"Enter execution timeout in seconds (optional)",value:r.timeout?String(r.timeout):"",placeHolder:"e.g. 300"}),u=c&&!isNaN(parseInt(c))?parseInt(c):void 0;this.projectManager.updateNode(n,{name:i,config:{...r,format:a,inputPath:o,targetTable:l,timeout:u}}),this.onUpdate()}}}async configureVariableNode(e,n){let r=e.config,i=await at.window.showInputBox({prompt:"Enter task name",value:e.name,placeHolder:"e.g. Get Date Filter"});if(i===void 0)return;let s=await at.window.showInputBox({prompt:"Enter variable name (without ${})",value:r.variableName,placeHolder:"e.g. date_filter"});if(!s)return;let o=await at.window.showQuickPick([{label:"Prompt User",value:"prompt",description:"Ask user for value at runtime"},{label:"Static Value",value:"static",description:"Use fixed value"},{label:"SQL Query",value:"sql",description:"Get value from database query"}],{placeHolder:"How should the variable value be set?"});if(!o)return;let a={...r,variableName:s,source:o.value};switch(o.value){case"prompt":{let l=await at.window.showInputBox({prompt:"Enter prompt message to show user",value:r.promptMessage||`Enter value for ${s}`,placeHolder:"e.g. Enter date filter (YYYY-MM-DD)"}),c=await at.window.showInputBox({prompt:"Enter default value (optional)",value:r.defaultValue||"",placeHolder:"e.g. 2024-01-01"});a={...a,promptMessage:l,defaultValue:c};break}case"static":{let l=await at.window.showInputBox({prompt:"Enter static value",value:r.value||"",placeHolder:"e.g. 2024-06-15"});if(l===void 0)return;a={...a,value:l};break}case"sql":{let l=await at.window.showInputBox({prompt:"Enter SQL query (must return single value)",value:r.query||"",placeHolder:"SELECT MAX(date) FROM sales_data"});if(!l)return;let c=await at.window.showInputBox({prompt:"Enter timeout in seconds (optional)",value:r.timeout?String(r.timeout):"",placeHolder:"e.g. 30"}),u=c&&!isNaN(parseInt(c))?parseInt(c):void 0;a={...a,query:l,timeout:u};break}}this.projectManager.updateNode(n,{name:i,config:a}),this.onUpdate()}};var ai=class t{constructor(e,n,r){this._disposables=[];this._panel=e,this._context=n,this._projectManager=Ws.getInstance(),this._nodeConfigurator=new MR(this._projectManager,()=>this._sendProjectUpdate()),this._executionEngine=new hh,this._executionEngine.registerExecutor("sql",new ph),this._executionEngine.registerExecutor("python",new Th),this._executionEngine.registerExecutor("export",new uR),this._executionEngine.registerExecutor("import",new DR),this._executionEngine.registerExecutor("container",new PR(this._executionEngine)),this._executionEngine.registerExecutor("variable",new xR);let i=r||this._projectManager.createProject("New ETL Project");this._updateWebview(i),this._panel.onDidDispose(()=>this.dispose(),null,this._disposables),this._panel.webview.onDidReceiveMessage(s=>this._handleMessage(s),null,this._disposables)}static{this.viewType="netezza.etlDesigner"}static setConnectionManager(e){t._connectionManager=e}static createOrShow(e,n){let r=Ve.window.activeTextEditor?Ve.window.activeTextEditor.viewColumn:void 0;if(t.currentPanel){t.currentPanel._panel.reveal(r),n&&t.currentPanel._updateProject(n);return}let i=Ve.window.createWebviewPanel(t.viewType,"ETL Designer",r||Ve.ViewColumn.One,{enableScripts:!0,retainContextWhenHidden:!0,localResourceRoots:[e.extensionUri]});t.currentPanel=new t(i,e,n)}async _handleMessage(e){let n=this._projectManager.getCurrentProject();switch(e.type){case"addNode":{let r=e.payload,i={id:uh(),type:r.type,name:this._nodeConfigurator.getDefaultNodeName(r.type),position:r.position,config:KD(r.type)};this._projectManager.addNode(i),this._sendProjectUpdate();break}case"confirmRemoveNode":{let r=e.payload;await Ve.window.showWarningMessage("Delete this task?",{modal:!0},"Delete")==="Delete"&&(this._projectManager.removeNode(r),this._sendProjectUpdate());break}case"removeNode":{let r=e.payload;this._projectManager.removeNode(r),this._sendProjectUpdate();break}case"updateNodePosition":{let{nodeId:r,position:i}=e.payload;this._projectManager.updateNode(r,{position:i});break}case"updateNodeName":{let{nodeId:r,name:i}=e.payload;this._projectManager.updateNode(r,{name:i}),this._sendProjectUpdate();break}case"addConnection":{let{from:r,to:i}=e.payload;try{this._projectManager.addConnection({id:dh(),from:r,to:i}),this._sendProjectUpdate()}catch(s){Ve.window.showErrorMessage(String(s))}break}case"confirmRemoveConnection":{let r=e.payload;await Ve.window.showWarningMessage("Delete this connection?",{modal:!0},"Delete")==="Delete"&&(this._projectManager.removeConnection(r),this._sendProjectUpdate());break}case"removeConnection":{let r=e.payload;this._projectManager.removeConnection(r),this._sendProjectUpdate();break}case"toggleConnectionType":{let{connectionId:r,newType:i}=e.payload,s=n?.connections.find(o=>o.id===r);s&&(s.connectionType=i,this._sendProjectUpdate());break}case"configureNode":{let r=e.payload;await this._nodeConfigurator.configureNode(r);break}case"updateContainerNodes":{let{containerId:r,nodes:i,connections:s}=e.payload,o=this._projectManager.getNode(r);o&&o.type==="container"&&(this._projectManager.updateNode(r,{config:{type:"container",nodes:i,connections:s}}),this._sendProjectUpdate());break}case"configureContainerChildNode":{let{containerId:r,nodeId:i}=e.payload,s=this._projectManager.getNode(r);if(s&&s.type==="container"){let a=s.config.nodes.find(l=>l.id===i);a&&await this._configureContainerChildNode(r,a)}break}case"saveProject":{await this._saveProject();break}case"loadProject":{await this._loadProject();break}case"newProject":{let r=await Ve.window.showInputBox({prompt:"Enter project name",value:"New ETL Project"});r&&(this._projectManager.createProject(r),this._sendProjectUpdate());break}case"runProject":{n&&await this._runProject(n);break}case"stopProject":{this._stopExecution();break}case"getProject":{this._sendProjectUpdate();break}}}async _saveProject(){if(!this._projectManager.getCurrentProject())return;let n=await Ve.window.showSaveDialog({filters:{"ETL Project":["etl.json"]},defaultUri:this._projectManager.getProjectPath()?Ve.Uri.file(this._projectManager.getProjectPath()):void 0});if(n)try{await this._projectManager.saveProject(n.fsPath),Ve.window.showInformationMessage(`Project saved to ${n.fsPath}`)}catch(r){Ve.window.showErrorMessage(`Failed to save project: ${r}`)}}async _loadProject(){let e=await Ve.window.showOpenDialog({filters:{"ETL Project":["etl.json"]},canSelectMany:!1});if(e&&e[0])try{let n=await this._projectManager.loadProject(e[0].fsPath);this._updateWebview(n),Ve.window.showInformationMessage(`Project loaded: ${n.name}`)}catch(n){Ve.window.showErrorMessage(`Failed to load project: ${n}`)}}async _runProject(e){let n=this._projectManager.validateProject(e);if(n.length>0){Ve.window.showErrorMessage(`Project validation failed:
${n.join(`
`)}`);return}let r=t._connectionManager;if(!r){Ve.window.showErrorMessage("Connection manager not initialized. Please reload the extension.");return}let i=r.getActiveConnectionName();if(!i){Ve.window.showErrorMessage("No active connection. Please connect to a database first.");return}let s=await r.getConnection(i);if(!s){Ve.window.showErrorMessage(`Connection not found: ${i}`);return}let o=Ve.window.createOutputChannel("ETL Execution");o.show(),this._cancellationTokenSource=new Ve.CancellationTokenSource;let a=new vR(e.variables||{}),l={extensionContext:this._context,variables:e.variables||{},nodeOutputs:new Map,connectionDetails:s,cancellationToken:this._cancellationTokenSource.token,onProgress:c=>{o.appendLine(`[${new Date().toLocaleTimeString()}] ${c}`)},variableManager:a};this._executionEngine.onStatusChange((c,u,d)=>{this._panel.webview.postMessage({type:"nodeStatusUpdate",payload:{nodeId:c,status:u,message:d}})}),this._panel.webview.postMessage({type:"executionStarted"});try{o.appendLine(`Starting ETL Project: ${e.name}`),o.appendLine(`Connection: ${i}`),o.appendLine("---");let c=await this._executionEngine.execute(e,l);o.appendLine("---"),o.appendLine(`Execution ${c.status}`),o.appendLine(`Duration: ${c.endTime?((c.endTime.getTime()-c.startTime.getTime())/1e3).toFixed(2):"N/A"} seconds`),this._panel.webview.postMessage({type:"executionEnded",payload:{status:c.status==="completed"?"Completed \u2713":"Failed \u2717"}}),c.status==="completed"?Ve.window.showInformationMessage("ETL project completed successfully!"):c.status==="failed"&&Ve.window.showErrorMessage("ETL project failed. Check output for details.")}catch(c){o.appendLine(`Error: ${c}`),Ve.window.showErrorMessage(`ETL execution error: ${c}`),this._panel.webview.postMessage({type:"executionEnded",payload:{status:"Error \u2717"}})}finally{this._cancellationTokenSource?.dispose(),this._cancellationTokenSource=void 0}}_stopExecution(){this._cancellationTokenSource&&(this._cancellationTokenSource.cancel(),Ve.window.showInformationMessage("ETL execution cancellation requested..."))}_updateProject(e){this._projectManager.createProject(e.name);for(let n of e.nodes)this._projectManager.addNode(n);for(let n of e.connections)try{this._projectManager.addConnection(n)}catch{}this._updateWebview(e)}_updateWebview(e){this._panel.webview.html=this._getHtml(e)}_sendProjectUpdate(){let e=this._projectManager.getCurrentProject();e&&this._panel.webview.postMessage({type:"projectUpdate",payload:e})}async _configureContainerChildNode(e,n){let r=n.config,i=!1;switch(n.type){case"sql":{let s=await Ve.window.showInputBox({prompt:"Enter task name",value:n.name});if(s===void 0)return;let o=await Ve.window.showInputBox({prompt:"Enter SQL query",value:r.query||""});o!==void 0&&(n.name=s,r.query=o,i=!0);break}case"python":{let s=await Ve.window.showInputBox({prompt:"Enter task name",value:n.name});if(s===void 0)return;let o=await Ve.window.showInputBox({prompt:"Enter Python script",value:r.script||""});o!==void 0&&(n.name=s,r.script=o,i=!0);break}case"variable":{let s=await Ve.window.showInputBox({prompt:"Enter task name",value:n.name});if(s===void 0)return;let o=await Ve.window.showInputBox({prompt:"Enter variable name",value:r.variableName||""});o&&(n.name=s,r.variableName=o,i=!0);break}default:Ve.window.showInformationMessage(`Configure ${n.type} nodes by double-clicking in the main designer.`);return}if(i){let s=this._projectManager.getNode(e);if(s&&s.type==="container"){let o=s.config,a=o.nodes.findIndex(l=>l.id===n.id);a>=0&&(o.nodes[a]=n,this._projectManager.updateNode(e,{config:o}),this._sendProjectUpdate(),this._panel.webview.postMessage({type:"containerChildUpdated",payload:{containerId:e,childNode:n}}))}}}_getHtml(e){return _3({project:e,nonce:this._getNonce()})}_getNonce(){let e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let r=0;r<32;r++)e+=n.charAt(Math.floor(Math.random()*n.length));return e}dispose(){for(t.currentPanel=void 0,this._panel.dispose();this._disposables.length;){let e=this._disposables.pop();e&&e.dispose()}}};var M=j(require("vscode"));UE();dw();li();Mo();var WR=class{constructor(e,n,r){this.connectionManager=e;this.metadataCache=r;this.ddlCache=new Map;this.DDL_CACHE_TTL=3600*1e3;this.MAX_TABLES_FOR_DDL=10;this.NETEZZA_OPTIMIZATION_RULES=`
NETEZZA OPTIMIZATION RULES TO APPLY:

1. Eliminate SELECT *
   Replace SELECT * with explicit column lists. Include only columns actually used in output or subsequent operations. This reduces I/O dramatically in Netezza's columnar architecture.

2. Push Filters into Subqueries
   Move WHERE conditions from outer query into CTEs/subqueries. Filter data as early as possible before joins and aggregations to reduce intermediate result sizes.

3. Align JOINs with Distribution Keys
   Check if join columns match table distribution keys. If not, consider redistributing smaller table or add distribution key to join condition when possible to avoid broadcast operations.

4. Replace Correlated Subqueries
   Convert correlated subqueries to JOINs or window functions. Correlated subqueries execute per row - JOINs and analytics leverage parallel processing across SPUs.

5. Simplify DISTINCT and GROUP BY
   Remove unnecessary DISTINCT operations. Ensure GROUP BY uses distribution keys when possible. Consider if aggregation is truly needed or if EXISTS/window functions could replace it.

6. Optimize Window Functions
   Add PARTITION BY on distribution key in window functions. Use ORDER BY only when necessary. Limit window frame size (ROWS BETWEEN) to minimum required range.

7. Use UNION ALL Instead of UNION
   Replace UNION with UNION ALL when duplicates don't matter. UNION performs implicit DISTINCT which causes expensive data redistribution and sorting.

8. Avoid Functions on Join/WHERE Columns
   Remove functions from join and filter columns: change WHERE YEAR(date_col) = 2024 to WHERE date_col BETWEEN '2024-01-01' AND '2024-12-31'. Functions prevent zone map usage.

9. Split Complex Queries with TEMP Tables
   Break multi-join, multi-aggregation queries into steps using CREATE TEMP TABLE AS SELECT. Distribute temp tables on appropriate keys for subsequent joins to control execution plan.
`;this.NZPLSQL_PROCEDURE_REFERENCE=`
NZPLSQL STORED PROCEDURE REFERENCE (IBM Netezza):

PROCEDURE STRUCTURE (PREFERRED FORMAT):
\`\`\`sql
CREATE [OR REPLACE] PROCEDURE database.schema.procedure_name(parameters)
RETURNS return_type
EXECUTE AS CALLER
LANGUAGE NZPLSQL
AS
BEGIN_PROC
  [DECLARE
    -- Variable declarations
    variable_name data_type [:= default_value];
    variable_name table_name%ROWTYPE;  -- Row type from table
    variable_name table_name.column%TYPE;  -- Column type
  ]
  BEGIN
    -- Statements
    [EXCEPTION WHEN OTHERS THEN
      -- Exception handling
      ROLLBACK;  -- Required for TRANSACTION_ABORTED
      RAISE NOTICE 'Error: %', SQLERRM;
    ]
  END;
END_PROC;
\`\`\`

KEY SYNTAX RULES:
- ALWAYS use EXECUTE AS CALLER (preferred) - runs with caller's permissions
- Use BEGIN_PROC / END_PROC to wrap the procedure body (NOT just BEGIN/END)
- DECLARE section comes BEFORE the inner BEGIN block
- Variables are initialized to NULL by default
- Use := for assignment (not =)
- Statements end with semicolon (;)
- Labels use <<label_name>> syntax

EXECUTE AS OPTIONS:
- EXECUTE AS CALLER (PREFERRED) - procedure runs with the permissions of the calling user
- EXECUTE AS OWNER - procedure runs with the permissions of the procedure owner

VARIABLE DECLARATIONS:
\`\`\`sql
DECLARE
  v_count INTEGER;
  v_name VARCHAR(100) := 'default';
  v_rate NUMERIC(10,2) NOT NULL := 0.0;
  v_const CONSTANT INTEGER := 100;
  v_row my_table%ROWTYPE;  -- Inherits structure from table
  v_id my_table.id%TYPE;   -- Inherits type from column
\`\`\`

CONTROL STRUCTURES:
- IF condition THEN ... [ELSIF condition THEN ...] [ELSE ...] END IF;
- CASE expression WHEN value THEN ... [ELSE ...] END CASE;
- LOOP ... EXIT [WHEN condition]; END LOOP;
- WHILE condition LOOP ... END LOOP;
- FOR i IN 1..10 LOOP ... END LOOP;
- FOR record IN SELECT ... LOOP ... END LOOP;

DYNAMIC SQL (EXECUTE IMMEDIATE):
\`\`\`sql
EXECUTE IMMEDIATE 'INSERT INTO ' || table_name || ' VALUES (1, 2)';
EXECUTE IMMEDIATE 'UPDATE ' || quote_ident(col) || ' SET x = ' || quote_literal(val);
\`\`\`
- Use quote_ident() for identifiers (table/column names)
- Use quote_literal() for string values

RETURNING RESULT SETS:
\`\`\`sql
CREATE PROCEDURE my_proc() RETURNS REFTABLE(reference_table)
LANGUAGE NZPLSQL AS
BEGIN_PROC
BEGIN
  EXECUTE IMMEDIATE 'INSERT INTO ' || REFTABLENAME || ' SELECT * FROM source';
  RETURN REFTABLE;
END;
END_PROC;
\`\`\`

EXCEPTION HANDLING:
\`\`\`sql
BEGIN
  -- statements that may fail
EXCEPTION
  WHEN TRANSACTION_ABORTED THEN
    ROLLBACK;
    RAISE ERROR 'Transaction failed: %', SQLERRM;
  WHEN OTHERS THEN
    RAISE NOTICE 'Error caught: %', SQLERRM;
END;
\`\`\`

BUILT-IN VARIABLES:
- FOUND: TRUE if last query returned rows
- ROW_COUNT: Number of rows affected by last statement
- SQLERRM: Error message text in exception handler
- REFTABLENAME: Name of temp table for REFTABLE procedures

IMPORTANT NOTES:
- Netezza does NOT support nested transactions (no SAVEPOINT)
- BEGIN/END in NZPLSQL is for grouping, NOT transaction control
- Use CALL procedure_name() or EXECUTE PROCEDURE procedure_name() to invoke
- Procedures run within the caller's transaction context
`;this.context=n,this.statusBarItem=M.window.createStatusBarItem(M.StatusBarAlignment.Right,100),this.statusBarItem.command="justyBaseLite.copilot.changeModel";let i=this.context.workspaceState.get("copilot.selectedModelId");i&&(this.selectedModelId=i)}async init(){try{let e=await M.lm.selectChatModels({vendor:"copilot"});if(e.length===0)return this.statusBarItem.text="$(copilot) No Models",this.statusBarItem.tooltip="No Copilot models available",this.statusBarItem.show(),!1;if(this.selectedModelId&&(e.find(r=>r.id===this.selectedModelId)||(console.warn(`[CopilotService] Persisted model ${this.selectedModelId} no longer available, clearing...`),this.selectedModelId=void 0,await this.context.workspaceState.update("copilot.selectedModelId",void 0))),!this.selectedModelId){let n=e.find(r=>r.family.toLowerCase().includes("gpt-4o")||r.family.toLowerCase().includes("claude-3-5-sonnet"))||e[0];this.selectedModelId=n.id,await this.context.workspaceState.update("copilot.selectedModelId",this.selectedModelId),console.log(`[CopilotService] Auto-selected model: ${n.name||n.family}`)}return this.updateStatusBar(),!0}catch(e){return console.error("[CopilotService] Failed to initialize:",e),this.statusBarItem.text="$(copilot) Error",this.statusBarItem.tooltip="Click to select AI Model",this.statusBarItem.show(),!1}}async selectModel(){try{let n=(await M.lm.selectChatModels({vendor:"copilot"})).map(i=>{let s=i,o=s.detail??s.tooltip,a=o?.match(/(0x|\d+(?:\.\d+)?x)/i)?.[1];return{label:`$(sparkle) ${i.name||i.family}`,description:a?`${a} cost`:void 0,detail:`${i.vendor} \u2022 ${i.family} \u2022 Max tokens: ${i.maxInputTokens}${o?" \u2022 "+o:""}`,modelId:i.id,model:i}});if(n.length===0){M.window.showWarningMessage("No AI models detected. Ensure GitHub Copilot is installed and you are signed in.");return}let r=await M.window.showQuickPick(n,{placeHolder:"Select AI Model for SQL Generation",matchOnDescription:!0,matchOnDetail:!0});if(r){this.selectedModelId=r.modelId,this.updateStatusBar();try{await this.context.workspaceState.update("copilot.selectedModelId",this.selectedModelId)}catch(i){console.warn("Failed to persist selected model:",i)}M.window.showInformationMessage(`Model switched to: ${r.model.name||r.model.family}`)}}catch(e){M.window.showErrorMessage(`Failed to select model: ${e}`)}}updateStatusBar(){this.selectedModelId&&M.lm.selectChatModels().then(e=>{let n=e.find(s=>s.id===this.selectedModelId),r=n?n.name||n.family:"Copilot",i="";if(n){let s=n,a=(s.detail??s.tooltip)?.match(/(0x|\d+(?:\.\d+)?x)/i)?.[1];a&&(i=` [${a}]`)}this.statusBarItem.text=`$(copilot) ${r}${i}`,this.statusBarItem.tooltip=`Using model: ${r}${i}. Click to change.`,this.statusBarItem.show()})}async changeModel(){await this.selectModel()}async clearPersistedModel(){try{await this.context.workspaceState.update("copilot.selectedModelId",void 0),this.selectedModelId=void 0,this.statusBarItem.text="$(copilot) Select Model",this.statusBarItem.tooltip="Click to select AI Model",M.window.showInformationMessage("Persisted model selection cleared. You will be prompted to select a model on next use.")}catch(e){let n=e instanceof Error?e.message:String(e);M.window.showErrorMessage(`Failed to clear model selection: ${n}`)}}getPrompt(e){let n=M.workspace.getConfiguration("justyBaseLite.prompts"),r={optimize:"Optimize the following IBM Netezza Performance Server (NPS) SQL query for performance and readability. Keep Netezza-specific syntax and features.",fix:"Fix the syntax errors in the following IBM Netezza Performance Server (NPS) SQL query. Preserve Netezza-specific SQL dialect features.",explain:"Explain what this IBM Netezza Performance Server (NPS) SQL query does, including any Netezza-specific features used."};return n.get(e)||r[e]}async selectCopilotMode(e){return(await M.window.showQuickPick([{label:"$(zap) Auto",description:"Apply changes directly via diff",value:"auto"},{label:"$(comment-discussion) Chat",description:"Discuss in Copilot Chat",value:"chat"}],{placeHolder:`${e} - Select mode`}))?.value}isProcedureCode(e){return/CREATE\s+(OR\s+REPLACE\s+)?PROCEDURE\s+/i.test(e)}getNetezzaReference(e="all"){return e==="optimization"?this.NETEZZA_OPTIMIZATION_RULES:e==="nzplsql"?this.NZPLSQL_PROCEDURE_REFERENCE:`${this.NETEZZA_OPTIMIZATION_RULES}

${this.NZPLSQL_PROCEDURE_REFERENCE}`}async gatherContext(){let e=M.window.activeTextEditor;if(!e)throw new Error("No active editor");let n=e.document,r=e.selection,i=r.isEmpty?n.getText():n.getText(new M.Range(r.start,r.end));if(!i.trim())throw new Error("No SQL selected or document is empty");let s=Po(i),o=s.size>0?`Variables: ${Array.from(s).join(", ")}`:"No variables detected",a=this.connectionManager.getDocumentConnection(n.uri.toString())||this.connectionManager.getActiveConnectionName()||void 0,l=a?`Connected to: ${a}`:"No connection selected",c=this.extractTableReferences(i),u=await this.gatherTablesDDL(c,a),d=this.getRecentQueriesSummary();return{selectedSql:i,ddlContext:u,variables:o,recentQueries:d,connectionInfo:l}}extractTableReferences(e){try{let n=e.replace(/--.*$/gm,"").replace(/\/\*[\s\S]*?\*\//g,"").replace(/'([^'\\]|\\.)*'/g,""),r=new Map,i=[/FROM\s+(\w+)\.\.(\w+)/gi,/JOIN\s+(\w+)\.\.(\w+)/gi,/INSERT\s+INTO\s+(\w+)\.\.(\w+)/gi,/UPDATE\s+(\w+)\.\.(\w+)/gi,/DELETE\s+FROM\s+(\w+)\.\.(\w+)/gi];for(let o of i)n=n.replace(o,(a,l,c)=>{let u=`${l}||${c}`.toUpperCase();return r.set(u,{database:l,schema:void 0,name:c}),a.replace(/\w+\.\.\w+/,"__EXTRACTED__")});let s=[/FROM\s+(?:(\w+)\.)?(?:(\w+)\.)?(\w+)/gi,/JOIN\s+(?:(\w+)\.)?(?:(\w+)\.)?(\w+)/gi,/INSERT\s+INTO\s+(?:(\w+)\.)?(?:(\w+)\.)?(\w+)/gi,/UPDATE\s+(?:(\w+)\.)?(?:(\w+)\.)?(\w+)/gi,/DELETE\s+FROM\s+(?:(\w+)\.)?(?:(\w+)\.)?(\w+)/gi];for(let o of s){let a;for(;(a=o.exec(n))!==null;){let l,c,u;if(a[3]?(l=a[1],c=a[2],u=a[3]):a[2]?(c=a[1],u=a[2]):a[1]&&(u=a[1]),u&&u!=="__EXTRACTED__"){let d=`${l||""}|${c||""}|${u}`.toUpperCase();r.set(d,{database:l,schema:c,name:u})}}}return Array.from(r.values())}catch(n){return console.error("[CopilotService] Error extracting table references:",n),[]}}async getCachedDDL(e,n){let r=this.ddlCache.get(e),i=Date.now();if(r&&i-r.timestamp<this.DDL_CACHE_TTL)return console.log(`[CopilotService] Using cached DDL for ${e}`),r.ddl;let s=await n();return this.ddlCache.set(e,{ddl:s,timestamp:i}),s}clearDDLCache(){this.ddlCache.clear(),console.log("[CopilotService] DDL cache cleared")}async findTableSchema(e,n,r){try{let i=Qe.findTableSchema(n,r.replace(/'/g,"''")),s=await le(e,i);return s&&s.length>0?s[0].SCHEMA:void 0}catch(i){console.warn(`[CopilotService] Failed to find schema for ${n}..${r}:`,i);return}}async gatherTablesDDL(e,n){if(e.length===0)return"No table references detected in SQL";if(!n)return`Could not gather DDL - no connection selected.
Found table references: ${e.map(l=>[l.database,l.schema,l.name].filter(Boolean).join(".")).join(", ")}`;let r=await this.connectionManager.getConnection(n);if(!r)return`Connection "${n}" not found`;let i;try{i=await Dt(r)}catch(a){return`Failed to create connection: ${a instanceof Error?a.message:String(a)}`}let s=[],o=e.slice(0,this.MAX_TABLES_FOR_DDL);e.length>this.MAX_TABLES_FOR_DDL&&(s.push(`-- NOTE: Showing DDL for ${this.MAX_TABLES_FOR_DDL} out of ${e.length} tables (limit reached)`),s.push("-- To see more tables, reduce the number of table references in your query"),s.push(""));try{for(let a of o)try{let l=a.database;if(l||(l=await this.connectionManager.getCurrentDatabase(n)||void 0),!l){s.push(`-- Table: ${a.name} (cannot determine database)`),s.push("");continue}let c=a.schema;if(c||(c=await this.findTableSchema(i,l,a.name)),!c){s.push(`-- Table: ${l}..${a.name} (table not found in database)`),s.push("");continue}let u=a.name,d=`${l}.${c}.${u}`,E=`${n}|${l}|${c}|${u}`,f=await this.getCachedDDL(E,async()=>await qa(i,l,c,u));f&&!f.toLowerCase().includes("not found")?(s.push(`-- Table: ${d}`),s.push(f),s.push("")):(s.push(`-- Table: ${d} (DDL not found)`),s.push(""))}catch(l){let c=`${a.database||""}.${a.schema||""}.${a.name}`.replace(/^\.+/,"");console.warn(`[CopilotService] Could not get DDL for ${c}:`,l),s.push(`-- Table: ${c} (error retrieving DDL: ${l instanceof Error?l.message:String(l)})`),s.push("")}}catch(a){console.error("[CopilotService] Error gathering DDL:",a),s.push(`-- Error gathering DDL: ${a instanceof Error?a.message:String(a)}`)}finally{if(i)try{await i.close()}catch(a){console.warn("[CopilotService] Error closing connection:",a)}}return s.length>0?s.join(`
`):`Could not retrieve DDL for tables: ${e.map(a=>a.name).join(", ")}`}formatDdlForPrompt(e){return e.includes("CREATE TABLE")||e.includes("-- Table:")&&!e.includes("error retrieving")&&!e.includes("not found")?"```sql\n"+e+"\n```":e}getRecentQueriesSummary(){return"Recent queries history not yet available in this context"}async sendToCopilotAgent(e,n){try{let i=`${this.buildSystemPrompt(e)}

User request: ${n}`;await M.commands.executeCommand("workbench.action.chat.open",{query:i}),M.window.showInformationMessage("\u2705 Sent to Copilot Chat with context")}catch(r){let i=r instanceof Error?r.message:String(r);M.window.showErrorMessage(`Failed to send to Copilot: ${i}`)}}buildSystemPrompt(e){let r=M.workspace.getConfiguration("justyBaseLite.copilot").get("preferredLanguage")||"english",i="";if(r==="system"){let s=M.env.language;s&&!s.startsWith("en")&&(i=`

RESPONSE LANGUAGE: Please respond in ${s} language.`)}return`You are an expert in IBM Netezza Performance Server (NPS) / IBM PureData System for Analytics SQL.${i}

IMPORTANT NETEZZA SQL NAMING CONVENTIONS:
- Three-part name: DATABASE.SCHEMA.OBJECT - fully qualified reference to a table/view/procedure
- Two-part name with double dots: DATABASE..OBJECT - references object in the specified database (searches across schemas or uses default schema depending on configuration)
- Two-part name with single dot: SCHEMA.OBJECT - uses current/default database with specified schema
- Single name: OBJECT - uses current database and current schema
- System views like _V_TABLE, _V_VIEW, _V_PROCEDURE are in each database; use DATABASE.._V_TABLE to query a specific database's system views
- DATABASE..TABLE syntax is valid and CORRECT in Netezza - do NOT "fix" it by adding a schema name!
- Netezza supports specific SQL extensions: DISTRIBUTE ON, ORGANIZE ON, GROOM TABLE, GENERATE STATISTICS, etc.

DATABASE CONNECTION:
${e.connectionInfo}

REFERENCED TABLE SCHEMAS:
${this.formatDdlForPrompt(e.ddlContext)}

QUERY VARIABLES:
${e.variables}

RECENT CONTEXT:
${e.recentQueries}

CURRENT SQL:
\`\`\`sql
${e.selectedSql}
\`\`\``}async sendToLanguageModel(e,n,r=!0,i){let s=M.window.activeTextEditor;if(!s)throw new Error("No active editor");let a=`${this.buildSystemPrompt(e)}

User request:
${n}

IMPORTANT: Respond ONLY with the modified SQL code without any explanations or markdown formatting.`;if(!this.selectedModelId&&(await this.selectModel(),!this.selectedModelId))throw new Error("No AI model selected.");let l=await M.lm.selectChatModels({vendor:"copilot"});if(l.length===0)throw new Error("No Copilot models available. Ensure GitHub Copilot extension is installed and you are signed in.");let c=l.find(p=>p.id===this.selectedModelId);if(c||(console.warn(`[CopilotService] Model ${this.selectedModelId} not found, selecting first available model...`),c=l[0],this.selectedModelId=c.id,await this.context.workspaceState.update("copilot.selectedModelId",this.selectedModelId),this.updateStatusBar(),M.window.showWarningMessage(`Previously selected model is unavailable. Switched to: ${c.name||c.family}`)),console.log(`[CopilotService] Using model: ${c.id} (${c.name||c.family})`),!c)throw new Error("No valid Copilot model available.");let u=[M.LanguageModelChatMessage.User(a)],d=i??new M.CancellationTokenSource().token,E="";try{console.log(`[CopilotService] Sending request to ${c.id}`);let p=await c.sendRequest(u,{},d);for await(let h of p.text)E+=h}catch(p){throw new Error(`Model request failed: ${p instanceof Error?p.message:String(p)}`)}if(!E.trim())throw new Error("Model returned empty response.");let f=E.trim().replace(/^```sql\n?/i,"").replace(/^```\n?/i,"").replace(/\n?```$/i,"").trim();return r&&await this.showDiff(s.document,f),f}async askCopilotWithEdit(e,n){try{let i=`${this.buildSystemPrompt(e)}

${n}

Please use /edit to apply changes directly to the file.`;await M.commands.executeCommand("workbench.action.chat.open",{query:i}),M.window.showInformationMessage("\u2705 Sent to Copilot Chat. Type /edit in the chat to apply suggestions directly.")}catch(r){let i=r instanceof Error?r.message:String(r);M.window.showErrorMessage(`Failed to open Copilot Chat: ${i}`)}}async fixSql(){try{let e=await this.selectCopilotMode("Fix SQL");if(!e)return;let n=await this.gatherContext(),r=this.getPrompt("fix");this.isProcedureCode(n.selectedSql)&&(r+=`

${this.NZPLSQL_PROCEDURE_REFERENCE}`),e==="auto"?await this.sendToLanguageModel(n,r,!0):await this.sendToChatInteractive(n,r,"Fix SQL")}catch(e){let n=e instanceof Error?e.message:String(e);M.window.showErrorMessage(`Error fixing SQL: ${n}`)}}async optimizeSql(){try{let e=await this.selectCopilotMode("Optimize SQL");if(!e)return;let n=await this.gatherContext(),i=`${this.getPrompt("optimize")}

${this.NETEZZA_OPTIMIZATION_RULES}`;this.isProcedureCode(n.selectedSql)&&(i+=`

${this.NZPLSQL_PROCEDURE_REFERENCE}`),e==="auto"?await this.sendToLanguageModel(n,i,!0):await this.sendToChatInteractive(n,i,"Optimize SQL")}catch(e){let n=e instanceof Error?e.message:String(e);M.window.showErrorMessage(`Error optimizing SQL: ${n}`)}}async explainSql(){try{let e=await M.window.showQuickPick([{label:"$(file-text) Document",description:"Show explanation in new document",value:"document"},{label:"$(comment-discussion) Chat",description:"Discuss in Copilot Chat",value:"chat"}],{placeHolder:"How would you like the explanation?"});if(!e)return;let n=await this.gatherContext(),r=this.getPrompt("explain");if(e.value==="document"){let i=await this.sendToLanguageModel(n,r,!1),s=await M.workspace.openTextDocument({content:`# SQL Query Explanation

${i}`,language:"markdown"});await M.window.showTextDocument(s,M.ViewColumn.Beside),M.window.showInformationMessage("\u2705 SQL explanation opened in new editor")}else await this.sendToChatInteractive(n,r,"Explain SQL")}catch(e){let n=e instanceof Error?e.message:String(e);M.window.showErrorMessage(`Error explaining SQL: ${n}`)}}async askCustomQuestion(){try{let e=await M.window.showInputBox({prompt:"Ask Copilot about this SQL (with full database context)",placeHolder:'e.g., "How can I improve this query?" or "Add an index hint"'});if(!e)return;let n=await this.gatherContext(),r=await M.window.showQuickPick([{label:"$(edit) Apply Changes",description:"Copilot modifies the SQL in editor",value:"edit"},{label:"$(file-text) Document",description:"Get response in new document",value:"document"},{label:"$(comment-discussion) Chat",description:"Discuss in Copilot Chat",value:"chat"}],{placeHolder:"How would you like Copilot to respond?"});if(!r)return;if(r.value==="edit")await this.sendToLanguageModel(n,e,!0);else if(r.value==="document"){let i=await this.sendToLanguageModel(n,e,!1),s=await M.workspace.openTextDocument({content:`# Copilot Advice

**Question:** ${e}

${i}`,language:"markdown"});await M.window.showTextDocument(s,M.ViewColumn.Beside)}else await this.sendToChatInteractive(n,e,"Custom Question")}catch(e){let n=e instanceof Error?e.message:String(e);M.window.showErrorMessage(`Error: ${n}`)}}async generateSqlInteractive(){try{let e=await M.window.showInputBox({prompt:"Describe the SQL query you need in natural language",placeHolder:'e.g., "Find all customers who made purchases over $1000 last month"',ignoreFocusOut:!0});if(!e)return;await M.window.withProgress({location:M.ProgressLocation.Notification,title:"Gathering database schema...",cancellable:!1},async()=>{let n=await this.gatherSchemaOverview();if(!n){M.window.showErrorMessage("Could not gather schema information. Please ensure you are connected to a database.");return}let r=this.buildGenerateSqlPrompt(e,n),i=await this.connectionManager.getActiveConnectionName(),s={selectedSql:"",ddlContext:n,variables:"",recentQueries:this.getRecentQueriesSummary(),connectionInfo:i?`Connected to: ${i}`:"No active connection"};await this.sendToChatInteractiveWithCustomPrompt(s,r,"Generate SQL")})}catch(e){let n=e instanceof Error?e.message:String(e);M.window.showErrorMessage(`Error generating SQL: ${n}`)}}async gatherSchemaOverview(){let e=await this.connectionManager.getActiveConnectionName();if(!e)return null;let n=await this.connectionManager.getConnection(e);if(!n)return null;let r=null;try{r=await Dt(n);let i=await this.connectionManager.getCurrentDatabase(e);if(!i)return null;let s=Qe.listColumnsWithKeys(i,{objTypes:[et.TABLE,et.VIEW]}),o=await le(r,s);if(!o||o.length===0)return"No tables found in database";let a=new Map;for(let u of o){let d=`${u.SCHEMA}.${u.TABLENAME}`;a.has(d)||a.set(d,{schema:u.SCHEMA,tableName:u.TABLENAME,tableDescription:u.DESCRIPTION||"",columns:[]}),a.get(d).columns.push({name:u.ATTNAME,type:u.FORMAT_TYPE,description:u.DESCRIPTION||"",isPk:Number(u.IS_PK)===1,isFk:Number(u.IS_FK)===1})}let l=[];l.push(`DATABASE: ${i}`),l.push(`TABLES: ${a.size}`),l.push(""),l.push("SCHEMA OVERVIEW:"),l.push("================"),l.push("");let c=new Map;for(let[u,d]of a)c.has(d.schema)||c.set(d.schema,new Map),c.get(d.schema).set(u,d);for(let[u,d]of c){l.push(`[SCHEMA: ${u}]`);for(let[,E]of d){let f=E.tableDescription?` -- ${E.tableDescription}`:"";l.push(`  TABLE: ${E.tableName}${f}`);let p=E.columns.map(h=>{let T=[];h.isPk&&T.push("PK"),h.isFk&&T.push("FK");let S=T.length>0?` [${T.join(", ")}]`:"",A=h.description?` (${h.description})`:"";return`    - ${h.name}: ${h.type}${S}${A}`});l.push(p.join(`
`)),l.push("")}}return l.join(`
`)}catch(i){return console.error("[CopilotService] Error gathering schema overview:",i),null}finally{if(r)try{await r.close()}catch(i){console.warn("[CopilotService] Error closing connection:",i)}}}buildGenerateSqlPrompt(e,n){return`You are a Netezza SQL expert. The user wants to generate a SQL query based on their description.

IMPORTANT NETEZZA SQL NAMING CONVENTIONS:
- Three-part name: DATABASE.SCHEMA.OBJECT - fully qualified reference to a table/view/procedure
- Two-part name with double dots: DATABASE..OBJECT - references object in the specified database (searches across schemas or uses default schema depending on configuration)
- Two-part name with single dot: SCHEMA.OBJECT - uses current/default database with specified schema
- Single name: OBJECT - uses current database and current schema
- System views like _V_TABLE, _V_VIEW, _V_PROCEDURE are in each database; use DATABASE.._V_TABLE to query a specific database's system views
- DATABASE..TABLE syntax is valid and CORRECT in Netezza - do NOT "fix" it by adding a schema name!
- Netezza supports: DISTRIBUTE ON, ORGANIZE ON, GROOM TABLE, GENERATE STATISTICS, zone maps, etc.

USER REQUEST:
${e}

AVAILABLE DATABASE SCHEMA:
\`\`\`
${n}
\`\`\`

INSTRUCTIONS:
1. Analyze the user's request and identify which tables and columns are relevant
2. Generate a complete, executable SQL query for Netezza
3. Use proper JOIN conditions based on likely relationships (matching column names like ID fields)
4. Include appropriate WHERE clauses, GROUP BY, ORDER BY as needed
5. Use table aliases for readability
6. Add comments explaining the query logic

If the request is ambiguous, ask clarifying questions before generating the SQL.
If certain tables or columns seem missing, suggest what additional information might be needed.

Please generate the SQL query:`}async sendToChatInteractiveWithCustomPrompt(e,n,r){try{let i=n;await M.commands.executeCommand("workbench.action.chat.open",{query:i}),M.window.showInformationMessage(`\u2705 ${r} sent to Copilot Chat. Describe your query requirements for interactive SQL generation.`)}catch(i){let s=i instanceof Error?i.message:String(i);M.window.showErrorMessage(`Failed to open Copilot Chat: ${s}`)}}async showAvailableModels(){try{let e=await M.lm.selectChatModels();if(e.length===0){M.window.showWarningMessage("No Language Models available");return}let n=e.map(s=>`\u2022 ${s.id}
  Vendor: ${s.vendor}
  Family: ${s.family}
`).join(`
`),r=e.filter(s=>s.vendor==="copilot"),i=await M.workspace.openTextDocument({content:`# Available Language Models

Total models: ${e.length}
Copilot models: ${r.length}

## All Models

${n}`,language:"markdown"});await M.window.showTextDocument(i)}catch(e){let n=e instanceof Error?e.message:String(e);M.window.showErrorMessage(`Error getting models: ${n}`)}}async sendToChatInteractive(e,n,r){try{let s=`${this.buildSystemPrompt(e)}

${n}`;await M.commands.executeCommand("workbench.action.chat.open",{query:s}),M.window.showInformationMessage(`\u2705 ${r} sent to Copilot Chat. Check the Chat panel for interactive discussion.`)}catch(i){let s=i instanceof Error?i.message:String(i);M.window.showErrorMessage(`Failed to open Copilot Chat: ${s}`)}}async showDiff(e,n){let r=M.window.activeTextEditor,i;r&&!r.selection.isEmpty?i=r.selection:i=new M.Range(new M.Position(0,0),new M.Position(e.lineCount,0));try{let s=e.getText(i);if(s.trim()===n.trim()){M.window.showInformationMessage("No changes detected - content is identical.");return}let o=await M.workspace.openTextDocument({content:n,language:e.languageId}),a=await M.workspace.openTextDocument({content:s,language:e.languageId});await M.commands.executeCommand("vscode.diff",a.uri,o.uri,`AI Suggestions: ${e.fileName.split(/[\\\\/]/).pop()||"file"}`,{preview:!0});let l=await M.window.showInformationMessage("Review the AI-suggested changes in the diff editor.",{modal:!0},"Apply Changes","Apply & Close Diff","Discard");if(l==="Apply Changes"||l==="Apply & Close Diff"){let c=new M.WorkspaceEdit;c.replace(e.uri,i,n),await M.workspace.applyEdit(c)?(M.window.showInformationMessage("\u2705 Changes applied successfully."),l==="Apply & Close Diff"&&await M.commands.executeCommand("workbench.action.closeActiveEditor")):M.window.showErrorMessage("Failed to apply changes.")}else l==="Discard"&&await M.commands.executeCommand("workbench.action.closeActiveEditor")}catch(s){console.error("Diff error:",s),M.window.showErrorMessage(`Failed to show diff: ${s instanceof Error?s.message:String(s)}`)}}async describeDataWithCopilot(e,n){try{if(!e||e.length===0){M.window.showWarningMessage("No data to describe");return}let r=e.length,i=Object.keys(e[0]||{}).length,s=r>50?"50 (limited for context)":r;if(await M.window.showWarningMessage(`\u26A0\uFE0F Privacy Notice: You are about to send ${s} rows with ${i} columns to GitHub Copilot AI.

This data will be transmitted to external servers for analysis. Please ensure the data does NOT contain sensitive, confidential, or personally identifiable information.

Do you want to proceed?`,{modal:!0},"Yes, Send to Copilot","Cancel")!=="Yes, Send to Copilot"){M.window.showInformationMessage("Data analysis cancelled - no data was sent.");return}let a=this.convertDataToMarkdown(e),l=`Describe and analyze the following data from IBM Netezza Performance Server:

`;n&&(l+=`**Source Query:**
\`\`\`sql
${n}
\`\`\`

`),l+=`**Data (${e.length} rows):**

${a}

`,l+=`Please provide:
`,l+=`1. A summary of the data patterns and key observations
`,l+=`2. Any notable trends, outliers, or anomalies
`,l+="3. Suggestions for further analysis if applicable",await M.commands.executeCommand("workbench.action.chat.open",{query:l}),M.window.showInformationMessage("\u2705 Data sent to Copilot Chat for analysis. Check the Chat panel for results.")}catch(r){let i=r instanceof Error?r.message:String(r);M.window.showErrorMessage(`Failed to send data to Copilot: ${i}`)}}async fixSqlError(e,n){try{if(!n.trim()){M.window.showWarningMessage("No SQL to fix");return}await M.window.withProgress({location:M.ProgressLocation.Notification,title:"Gathering table DDL for Copilot...",cancellable:!1},async()=>{let i=M.workspace.getConfiguration("justyBaseLite.copilot").get("preferredLanguage")||"english",s="";if(i==="system"){let d=M.env.language;d&&!d.startsWith("en")&&(s=`

Please respond in ${d} language.`)}let o=this.extractTableReferences(n),a=this.connectionManager.getActiveConnectionName()||void 0,l=await this.gatherTablesDDL(o,a),u=`${this.getPrompt("fix")}${s}

IMPORTANT NETEZZA SQL NAMING CONVENTIONS:
- Three-part name: DATABASE.SCHEMA.OBJECT - fully qualified reference to a table/view/procedure
- Two-part name with double dots: DATABASE..OBJECT - references object in the specified database (searches across schemas or uses default schema depending on configuration)
- Two-part name with single dot: SCHEMA.OBJECT - uses current/default database with specified schema
- Single name: OBJECT - uses current database and current schema
- System views like _V_TABLE, _V_VIEW, _V_PROCEDURE are in each database; use DATABASE.._V_TABLE to query a specific database's system views
- DATABASE..TABLE syntax is valid and CORRECT in Netezza - do NOT "fix" it by adding a schema name!
- Netezza supports specific SQL extensions: DISTRIBUTE ON, ORGANIZE ON, GROOM TABLE, GENERATE STATISTICS, etc.

**Error from IBM Netezza:**
\`\`\`
${e}
\`\`\`

**SQL Query that caused the error:**
\`\`\`sql
${n}
\`\`\`
`;l&&!l.includes("No table references")&&!l.includes("Could not gather DDL")&&(u+=`
**Referenced Table Schemas (DDL):**
\`\`\`sql
${l}
\`\`\`
`),this.isProcedureCode(n)&&(u+=`
${this.NZPLSQL_PROCEDURE_REFERENCE}
`),u+=`
Please:
1. Explain what caused this error
2. Provide the corrected SQL query
3. Explain the fix you made`,await M.commands.executeCommand("workbench.action.chat.open",{query:u})}),M.window.showInformationMessage("\u2705 Error sent to Copilot Chat for fixing. Check the Chat panel.")}catch(r){let i=r instanceof Error?r.message:String(r);M.window.showErrorMessage(`Failed to send error to Copilot: ${i}`)}}convertDataToMarkdown(e){if(e.length===0)return"*No data*";let n=e.slice(0,50),r=e.length>50,i=Object.keys(n[0]),s="| "+i.join(" | ")+` |
`;s+="| "+i.map(()=>"---").join(" | ")+` |
`;for(let o of n){let a=i.map(l=>{let c=o[l];if(c==null)return"NULL";let u=String(c).replace(/\|/g,"\\|");return u.length>100?u.substring(0,97)+"...":u});s+="| "+a.join(" | ")+` |
`}return r&&(s+=`
*... and ${e.length-50} more rows (total: ${e.length} rows)*`),s}registerChatParticipant(e){try{let n=async(i,s,o,a)=>{try{return i.command==="schema"?await this.handleSchemaCommand(i,s,o,a):i.command==="optimize"?await this.handleOptimizeCommand(i,s,o,a):i.command==="fix"?await this.handleFixCommand(i,s,o,a):i.command==="explain"?await this.handleExplainCommand(i,s,o,a):await this.handleGeneralQuery(i,s,o,a)}catch(l){let c=l instanceof Error?l.message:String(l);return o.markdown(`\u274C Error: ${c}`),{metadata:{error:c}}}},r=M.chat.createChatParticipant("netezza.sqlcopilot",n);return r.iconPath=M.Uri.joinPath(e.extensionUri,"Icon.png"),r.followupProvider={provideFollowups:(i,s,o)=>i.metadata?.command==="schema"?[{prompt:"Optimize the query for these tables",label:"Optimize query",command:"optimize"},{prompt:"Explain how these tables relate",label:"Explain schema"}]:[]},console.log("[CopilotService] Chat participant @sql-copilot registered successfully"),r}catch(n){console.error("[CopilotService] Failed to register chat participant:",n);return}}async handleSchemaCommand(e,n,r,i){r.progress("Analyzing SQL for table references...");let s=M.window.activeTextEditor;if(!s)return r.markdown("\u26A0\uFE0F No SQL file is currently open. Please open a SQL file first."),{metadata:{command:"schema",success:!1}};let o=s.document,a=s.selection,l=a.isEmpty?o.getText():o.getText(a);if(!l.trim())return r.markdown("\u26A0\uFE0F No SQL content found. Please enter some SQL or open a SQL file."),{metadata:{command:"schema",success:!1}};let c=this.extractTableReferences(l);if(c.length===0)return r.markdown("\u2139\uFE0F No table references found in the current SQL.\n\nMake sure your SQL contains `FROM`, `JOIN`, `INSERT INTO`, `UPDATE`, or `DELETE FROM` clauses."),{metadata:{command:"schema",success:!1}};r.progress(`Found ${c.length} table(s). Fetching DDL...`);let u=this.connectionManager.getDocumentConnection(o.uri.toString())||this.connectionManager.getActiveConnectionName()||void 0,d=await this.gatherTablesDDL(c,u);return r.markdown(`## \u{1F4CA} Schema Context for Current SQL

`),r.markdown(`**Connection:** ${u||"Not connected"}

`),r.markdown(`**Tables found:** ${c.map(E=>`\`${E.database?E.database+".":""}${E.schema?E.schema+".":""}${E.name}\``).join(", ")}

`),d.includes("CREATE TABLE")||d.includes("-- Table:")?r.markdown(`### Table Definitions (DDL)

\`\`\`sql
${d}
\`\`\`
`):r.markdown(`### Schema Information

${d}
`),o.uri.scheme==="file"&&r.reference(o.uri),e.prompt.trim()&&(r.markdown(`
---

**Your question:** ${e.prompt}

`),r.markdown("*Use the schema information above to answer your question about the SQL.*")),{metadata:{command:"schema",success:!0,tableCount:c.length}}}async handleOptimizeCommand(e,n,r,i){r.progress("Gathering context and optimizing SQL...");let s=await this.gatherContext(),a=`${this.getPrompt("optimize")}

${this.NETEZZA_OPTIMIZATION_RULES}`;this.isProcedureCode(s.selectedSql)&&(a+=`

${this.NZPLSQL_PROCEDURE_REFERENCE}`),e.prompt.trim()&&(a+=`

Additional user instructions: ${e.prompt}`);let c=`${this.buildSystemPrompt(s)}

${a}`,u=[M.LanguageModelChatMessage.User(c)],d=await e.model.sendRequest(u,{},i);for await(let E of d.text)r.markdown(E);return{metadata:{command:"optimize",success:!0}}}async handleFixCommand(e,n,r,i){r.progress("Analyzing SQL for errors...");let s=await this.gatherContext(),o=this.getPrompt("fix");this.isProcedureCode(s.selectedSql)&&(o+=`

${this.NZPLSQL_PROCEDURE_REFERENCE}`),e.prompt.trim()&&(o+=`

Additional context about the error: ${e.prompt}`);let l=`${this.buildSystemPrompt(s)}

${o}`,c=[M.LanguageModelChatMessage.User(l)],u=await e.model.sendRequest(c,{},i);for await(let d of u.text)r.markdown(d);return{metadata:{command:"fix",success:!0}}}async handleExplainCommand(e,n,r,i){r.progress("Analyzing SQL...");let s=await this.gatherContext(),o=this.getPrompt("explain");e.prompt.trim()&&(o+=`

Focus on: ${e.prompt}`);let l=`${this.buildSystemPrompt(s)}

${o}`,c=[M.LanguageModelChatMessage.User(l)],u=await e.model.sendRequest(c,{},i);for await(let d of u.text)r.markdown(d);return{metadata:{command:"explain",success:!0}}}async handleGeneralQuery(e,n,r,i){r.progress("Processing your SQL question...");let s;try{s=await this.gatherContext()}catch{let u=this.connectionManager.getActiveConnectionName();s={selectedSql:"",ddlContext:"No SQL file open",variables:"",recentQueries:"",connectionInfo:u?`Connected to: ${u}`:"No connection"}}let a=`${this.buildSystemPrompt(s)}

User question: ${e.prompt}`,l=[M.LanguageModelChatMessage.User(a)],c=await e.model.sendRequest(l,{},i);for await(let u of c.text)r.markdown(u);return{metadata:{command:"general",success:!0}}}async getSchemaForSql(e){if(!e.trim())return"No SQL content provided.";let n=this.extractTableReferences(e);if(n.length===0)return"No table references found in the provided SQL.";let r=this.connectionManager.getActiveConnectionName()||void 0,i=await this.gatherTablesDDL(n,r);return`Tables: ${n.map(s=>s.name).join(", ")}

${i}`}async getSchemaContextForCurrentSql(){let e=M.window.activeTextEditor;if(!e)return"No SQL file is currently open.";let n=e.document,r=e.selection,i=r.isEmpty?n.getText():n.getText(r);if(!i.trim())return"No SQL content found.";let s=this.extractTableReferences(i);if(s.length===0)return"No table references found in the current SQL.";let o=this.connectionManager.getDocumentConnection(n.uri.toString())||this.connectionManager.getActiveConnectionName()||void 0,a=await this.gatherTablesDDL(s,o);return`Tables: ${s.map(l=>l.name).join(", ")}

${a}`}async getColumnsForTables(e,n){let r=this.connectionManager.getActiveConnectionName();if(!r)return"No active database connection. Please connect to a Netezza database first.";let i=[];for(let o of e){let a=o.split("."),l,c,u;a.length===3?[l,c,u]=a:a.length===2?([c,u]=a,l=n):(u=a[0],l=n),i.push({database:l,schema:c||void 0,name:u})}return i.length===0?"No valid table references provided.":await this.gatherTablesDDL(i,r)}async getTablesFromDatabase(e,n){let r=this.connectionManager.getActiveConnectionName();if(!r)return"No active database connection. Please connect to a Netezza database first.";try{if(this.metadataCache&&e)if(n){let o=`${e}.${n}`,a=this.metadataCache.getTables(r,o);if(a&&a.length>0){let l=[`## Tables in ${e}.${n}
`];l.push("| Schema | Table | Type | Owner |"),l.push("|--------|-------|------|-------|");for(let c of a){let u=c.objType==="VIEW"?"VIEW":"TABLE";l.push(`| ${n} | ${c.label} | ${u} | ${c.OWNER||""} |`)}return l.push(`
**Total:** ${a.length} table(s)`),l.join(`
`)}}else{this.metadataCache.hasConnectionPrefetchTriggered(r);let o=this.metadataCache.getTablesAllSchemas(r,e);if(o&&o.length>0){let a=[`## Tables in ${e} (All Schemas)
`];a.push("| Schema | Table | Type | Owner |"),a.push("|--------|-------|------|-------|");for(let l of o){let c=l.objType==="VIEW"?"VIEW":"TABLE";a.push(`| ${l.SCHEMA||""} | ${l.label} | ${c} | ${l.OWNER||""} |`)}return a.push(`
**Total:** ${o.length} table(s)`),a.join(`
`)}}let i=await this.connectionManager.getConnection(r);if(!i)return`Connection "${r}" not found.`;let s=await Dt(i);if(!s)return"Could not establish database connection.";try{let o,a,l=!e;l?n?(o=`
                            SELECT 
                                DBNAME AS database_name,
                                SCHEMA AS schema_name,
                                OBJNAME AS table_name,
                                OBJTYPE AS object_type,
                                OWNER AS owner
                            FROM ${te.OBJECT_DATA}
                            WHERE OBJTYPE IN ('TABLE', 'VIEW', 'MATERIALIZED VIEW', 'EXTERNAL TABLE')
                            AND SCHEMA = '${n.toUpperCase()}'
                            ORDER BY DBNAME, SCHEMA, OBJNAME
                            LIMIT 500
                        `,a=`## Tables in all databases, schema ${n}
`):(o=`
                            SELECT 
                                DBNAME AS database_name,
                                SCHEMA AS schema_name,
                                OBJNAME AS table_name,
                                OBJTYPE AS object_type,
                                OWNER AS owner
                            FROM ${te.OBJECT_DATA}
                            WHERE OBJTYPE IN ('TABLE', 'VIEW', 'MATERIALIZED VIEW', 'EXTERNAL TABLE')
                            ORDER BY DBNAME, SCHEMA, OBJNAME
                            LIMIT 500
                        `,a=`## Tables in all databases
`):(n?o=`
                            SELECT 
                                '${e}' AS database_name,
                                SCHEMA AS schema_name,
                                TABLENAME AS table_name,
                                CASE RELKIND 
                                    WHEN 'r' THEN 'TABLE'
                                    WHEN 'v' THEN 'VIEW'
                                    WHEN 'm' THEN 'MATERIALIZED VIEW'
                                    WHEN 'e' THEN 'EXTERNAL TABLE'
                                    ELSE RELKIND
                                END AS object_type,
                                OWNER AS owner
                            FROM ${e}..${te.TABLE}
                            WHERE SCHEMA = '${n.toUpperCase()}'
                            ORDER BY SCHEMA, TABLENAME
                        `:o=`
                            SELECT 
                                '${e}' AS database_name,
                                SCHEMA AS schema_name,
                                TABLENAME AS table_name,
                                CASE RELKIND 
                                    WHEN 'r' THEN 'TABLE'
                                    WHEN 'v' THEN 'VIEW'
                                    WHEN 'm' THEN 'MATERIALIZED VIEW'
                                    WHEN 'e' THEN 'EXTERNAL TABLE'
                                    ELSE RELKIND
                                END AS object_type,
                                OWNER AS owner
                            FROM ${e}..${te.TABLE}
                            ORDER BY SCHEMA, TABLENAME
                        `,a=`## Tables in ${e}${n?"."+n:""}
`);let c=await le(s,o);if(!c||c.length===0){let d=n?` in schema ${n}`:"";return`No tables found${e?` in database ${e}`:" across all databases"}${d}.`}let u=[a,"| Database | Schema | Table Name | Type | Owner |","|----------|--------|------------|------|-------|"];for(let d of c){let E=d.DATABASE_NAME||d.database_name||"",f=d.SCHEMA_NAME||d.schema_name||"",p=d.TABLE_NAME||d.table_name||"",h=d.OBJECT_TYPE||d.object_type||"",T=d.OWNER||d.owner||"";u.push(`| ${E} | ${f} | ${p} | ${h} | ${T} |`)}return u.push(`
**Total:** ${c.length} object(s)`),l&&c.length===500&&u.push(`
*Note: Results limited to 500. Specify a database name to see all objects.*`),u.join(`
`)}finally{s.close()}}catch(i){return`Failed to retrieve tables: ${i instanceof Error?i.message:String(i)}`}}async getDatabases(){let e=this.connectionManager.getActiveConnectionName();if(!e)return"No active database connection. Please connect to a Netezza database first.";if(this.metadataCache){let n=this.metadataCache.getDatabases(e);if(n&&n.length>0){let r=[`## Available Databases (from Cache)
`];for(let i of n)r.push(`- ${i.DATABASE}`);return r.push(`
**Total:** ${n.length} database(s)`),r.join(`
`)}}try{let n=await this.connectionManager.getConnection(e);if(!n)return`Connection "${e}" not found.`;let r=await Dt(n);if(!r)return"Could not establish database connection.";try{let i=`
                    SELECT DATABASE, OWNER, CREATEDATE
                    FROM ${te.DATABASE}
                    ORDER BY DATABASE
                `,s=await le(r,i);if(!s||s.length===0)return"No databases found.";let o=[`## Databases
`,"| Database | Owner | Created |","|----------|-------|---------|"];for(let a of s){let l=a,c=l.CREATEDATE?String(l.CREATEDATE).substring(0,10):"";o.push(`| ${l.DATABASE} | ${l.OWNER} | ${c} |`)}return o.push(`
**Total:** ${s.length} database(s)`),o.join(`
`)}finally{r.close()}}catch(n){return`Failed to retrieve databases: ${n instanceof Error?n.message:String(n)}`}}async getSchemas(e){let n=this.connectionManager.getActiveConnectionName();if(!n)return"No active database connection. Please connect to a Netezza database first.";try{let r=e;if(r||(r=await this.connectionManager.getCurrentDatabase(n)||void 0),r&&this.metadataCache){let o=this.metadataCache.getSchemas(n,r);if(o){let a=[`## Schemas in ${r} (from Cache)
`];for(let l of o)a.push(`- ${l.SCHEMA}`);return a.push(`
**Total:** ${o.length} schema(s)`),a.join(`
`)}}let i=await this.connectionManager.getConnection(n);if(!i)return`Connection "${n}" not found.`;let s=await Dt(i);if(!s)return"Could not establish database connection.";try{let o,a;e?(o=`
                        SELECT SCHEMA, OWNER, CREATEDATE
                        FROM ${e}..${te.SCHEMA}
                        ORDER BY SCHEMA
                    `,a=`## Schemas in ${e}
`):(o=`
                        SELECT DISTINCT DBNAME AS DATABASE, SCHEMA, OWNER
                        FROM ${te.OBJECT_DATA}
                        WHERE OBJTYPE IN ('TABLE', 'VIEW', 'PROCEDURE')
                        ORDER BY DBNAME, SCHEMA
                        LIMIT 200
                    `,a=`## Schemas across all databases
`);let l=await le(s,o);if(!l||l.length===0)return e?`No schemas found in database ${e}.`:"No schemas found.";let c=[a];if(e){c.push("| Schema | Owner | Created |"),c.push("|--------|-------|---------|");for(let u of l){let d=u,E=d.CREATEDATE?String(d.CREATEDATE).substring(0,10):"";c.push(`| ${d.SCHEMA} | ${d.OWNER} | ${E} |`)}}else{c.push("| Database | Schema | Owner |"),c.push("|----------|--------|-------|");for(let u of l){let d=u;c.push(`| ${d.DATABASE} | ${d.SCHEMA} | ${d.OWNER} |`)}}return c.push(`
**Total:** ${l.length} schema(s)`),c.join(`
`)}finally{s.close()}}catch(r){return`Failed to retrieve schemas: ${r instanceof Error?r.message:String(r)}`}}async getProcedures(e,n){let r=this.connectionManager.getActiveConnectionName();if(!r)return"No active database connection. Please connect to a Netezza database first.";try{let i=await this.connectionManager.getConnection(r);if(!i)return`Connection "${r}" not found.`;let s=await Dt(i);if(!s)return"Could not establish database connection.";try{let o,a,l=!e;l?(o=`
                        SELECT DBNAME AS DATABASE, SCHEMA, OBJNAME AS PROCEDURE_NAME, OWNER
                        FROM ${te.OBJECT_DATA}
                        WHERE OBJTYPE = 'PROCEDURE'
                        ${n?`AND SCHEMA = '${n.toUpperCase()}'`:""}
                        ORDER BY DBNAME, SCHEMA, OBJNAME
                        LIMIT 200
                    `,a=n?`## Procedures in schema ${n} across all databases
`:`## Procedures across all databases
`):(o=`
                        SELECT '${e}' AS DATABASE, SCHEMA, PROCEDURE AS PROCEDURE_NAME, 
                               PROCEDURESIGNATURE, RETURNS, OWNER, DESCRIPTION
                        FROM ${e}..${te.PROCEDURE}
                        ${n?`WHERE SCHEMA = '${n.toUpperCase()}'`:""}
                        ORDER BY SCHEMA, PROCEDURE
                        LIMIT 200
                    `,a=n?`## Procedures in ${e}.${n}
`:`## Procedures in ${e}
`);let c=await le(s,o);if(!c||c.length===0)return"No procedures found.";let u=[a];if(l){u.push("| Database | Schema | Procedure | Owner |"),u.push("|----------|--------|-----------|-------|");for(let d of c){let E=d;u.push(`| ${E.DATABASE} | ${E.SCHEMA} | ${E.PROCEDURE_NAME} | ${E.OWNER} |`)}}else{u.push("| Schema | Procedure | Signature | Returns | Owner |"),u.push("|--------|-----------|-----------|---------|-------|");for(let d of c){let E=d,f=E.PROCEDURESIGNATURE?String(E.PROCEDURESIGNATURE).substring(0,50):"";u.push(`| ${E.SCHEMA} | ${E.PROCEDURE_NAME} | ${f} | ${E.RETURNS||""} | ${E.OWNER} |`)}}return u.push(`
**Total:** ${c.length} procedure(s)`),u.join(`
`)}finally{s.close()}}catch(i){return`Failed to retrieve procedures: ${i instanceof Error?i.message:String(i)}`}}async getViews(e,n){let r=this.connectionManager.getActiveConnectionName();if(!r)return"No active database connection. Please connect to a Netezza database first.";try{let i=await this.connectionManager.getConnection(r);if(!i)return`Connection "${r}" not found.`;let s=await Dt(i);if(!s)return"Could not establish database connection.";try{let o,a;!e?(o=`
                        SELECT DBNAME AS DATABASE, SCHEMA, OBJNAME AS VIEW_NAME, OWNER
                        FROM ${te.OBJECT_DATA}
                        WHERE OBJTYPE = 'VIEW'
                        ${n?`AND SCHEMA = '${n.toUpperCase()}'`:""}
                        ORDER BY DBNAME, SCHEMA, OBJNAME
                        LIMIT 200
                    `,a=n?`## Views in schema ${n} across all databases
`:`## Views across all databases
`):(o=`
                        SELECT '${e}' AS DATABASE, SCHEMA, VIEWNAME AS VIEW_NAME, OWNER
                        FROM ${e}..${te.VIEW}
                        ${n?`WHERE SCHEMA = '${n.toUpperCase()}'`:""}
                        ORDER BY SCHEMA, VIEWNAME
                        LIMIT 200
                    `,a=n?`## Views in ${e}.${n}
`:`## Views in ${e}
`);let c=await le(s,o);if(!c||c.length===0)return"No views found.";let u=[a];u.push("| Database | Schema | View | Owner |"),u.push("|----------|--------|------|-------|");for(let d of c){let E=d;u.push(`| ${E.DATABASE} | ${E.SCHEMA} | ${E.VIEW_NAME} | ${E.OWNER} |`)}return u.push(`
**Total:** ${c.length} view(s)`),u.join(`
`)}finally{s.close()}}catch(i){return`Failed to retrieve views: ${i instanceof Error?i.message:String(i)}`}}async getExternalTables(e,n,r){let i=this.connectionManager.getActiveConnectionName();if(!i)return"No active database connection. Please connect to a Netezza database first.";try{let s=await this.connectionManager.getConnection(i);if(!s)return`Connection "${i}" not found.`;let o=await Dt(s);if(!o)return"Could not establish database connection.";try{let a,l,c=!e,u=r?r.toUpperCase().replace(/\*/g,"%"):null;c?(a=`
                        SELECT E1.DATABASE, E1.SCHEMA, E1.TABLENAME AS TABLE_NAME, 
                               E2.EXTOBJNAME AS DATA_OBJECT, E2.OWNER
                        FROM ${te.EXTERNAL} E1
                        LEFT JOIN ${te.EXTOBJECT} E2 ON E1.DATABASE = E2.DATABASE 
                            AND E1.SCHEMA = E2.SCHEMA AND E1.TABLENAME = E2.TABLENAME
                        WHERE 1=1
                        ${n?`AND E1.SCHEMA = '${n.toUpperCase()}'`:""}
                        ${u?`AND UPPER(E2.EXTOBJNAME) LIKE '${u}'`:""}
                        ORDER BY E1.DATABASE, E1.SCHEMA, E1.TABLENAME
                        LIMIT 200
                    `,l=`## External Tables across all databases
`):(a=`
                        SELECT E1.DATABASE, E1.SCHEMA, E1.TABLENAME AS TABLE_NAME, 
                               E2.EXTOBJNAME AS DATA_OBJECT, E2.OWNER, E1.REMOTESOURCE AS LOCATION
                        FROM ${e}..${te.EXTERNAL} E1
                        LEFT JOIN ${e}..${te.EXTOBJECT} E2 ON E1.DATABASE = E2.DATABASE 
                            AND E1.SCHEMA = E2.SCHEMA AND E1.TABLENAME = E2.TABLENAME
                        WHERE 1=1
                        ${n?`AND E1.SCHEMA = '${n.toUpperCase()}'`:""}
                        ${u?`AND UPPER(E2.EXTOBJNAME) LIKE '${u}'`:""}
                        ORDER BY E1.SCHEMA, E1.TABLENAME
                        LIMIT 200
                    `,l=n?`## External Tables in ${e}.${n}
`:`## External Tables in ${e}
`);let d=await le(o,a);if(!d||d.length===0)return u?`No external tables found matching data object pattern "${r}".`:"No external tables found.";let E=[l];if(c){E.push("| Database | Schema | Table | Data Object | Owner |"),E.push("|----------|--------|-------|-------------|-------|");for(let f of d){let p=f;E.push(`| ${p.DATABASE} | ${p.SCHEMA} | ${p.TABLE_NAME} | ${p.DATA_OBJECT||""} | ${p.OWNER||""} |`)}}else{E.push("| Schema | Table | Data Object | Owner | Location |"),E.push("|--------|-------|-------------|-------|----------|");for(let f of d){let p=f,h=p.LOCATION?String(p.LOCATION).substring(0,50):"";E.push(`| ${p.SCHEMA} | ${p.TABLE_NAME} | ${p.DATA_OBJECT||""} | ${p.OWNER||""} | ${h} |`)}}return E.push(`
**Total:** ${d.length} external table(s)`),E.join(`
`)}finally{o.close()}}catch(s){return`Failed to retrieve external tables: ${s instanceof Error?s.message:String(s)}`}}async getObjectDefinition(e,n,r){let i=this.connectionManager.getActiveConnectionName();if(!i)return"No active database connection. Please connect to a Netezza database first.";try{let s=await this.connectionManager.getConnection(i);if(!s)return`Connection "${i}" not found.`;let o=e.split("."),a,l,c;if(o.length===3?[a,l,c]=o:o.length===2?o[0]===""?c=o[1]:o[1]===""?(a=o[0],c=""):[l,c]=o:c=o[0],!a&&r&&(a=r),c=c.toUpperCase(),n==="procedure")return await this.getProcedureDefinitionCrossDatabase(s,c,a,l);if(a)return await this.getViewDefinitionFromDatabase(s,a,c,l);let u=await Dt(s);if(!u)return"Could not establish database connection.";let d;try{d=(await le(u,Qe.LIST_DATABASES)).map(T=>T.DATABASE).filter(T=>T&&T!=="SYSTEM")}finally{u.close()}if(d.length===0)return"No databases found to search for view.";let E=d.map(async h=>{try{return await this.getViewDefinitionFromDatabase(s,h,c,l,!0)}catch{return null}}),p=(await Promise.all(E)).filter(h=>h!==null&&h!=="");return p.length===0?`View "${e}" not found in any database.`:p.join(`
---

`)}catch(s){let o=s instanceof Error?s.message:String(s);return`Failed to get ${n} definition: ${o}`}}async getProcedureDefinitionCrossDatabase(e,n,r,i){let s=await Dt(e);if(!s)throw new Error("Could not establish database connection");try{let o;r?o=`
                    SELECT DATABASE, SCHEMA, PROCEDURE, PROCEDURESIGNATURE, RETURNS, ARGUMENTS, 
                           EXECUTEDASOWNER, OWNER, DESCRIPTION, PROCEDURESOURCE
                    FROM ${r.toUpperCase()}..${te.PROCEDURE}
                    WHERE UPPER(PROCEDURE) = '${n}'
                    ${i?`AND SCHEMA = '${i.toUpperCase()}'`:""}
                    LIMIT 10
                `:o=`
                    SELECT DATABASE, SCHEMA, PROCEDURE, PROCEDURESIGNATURE, RETURNS, 
                           OWNER, PROCEDURESOURCE
                    FROM ${te.PROCEDURE}
                    WHERE UPPER(PROCEDURE) = '${n}'
                    ${i?`AND SCHEMA = '${i.toUpperCase()}'`:""}
                    LIMIT 10
                `;let a=await le(s,o);if(!a||a.length===0)return`Procedure "${n}" not found${r?` in ${r}`:""}.`;let l=[];for(let c of a){let u=c,d=u.DATABASE||r||"",E=u.SCHEMA||"",f=u.PROCEDURE||"";l.push(`## Procedure: ${d}.${E}.${f}
`),l.push(`**Signature:** ${u.PROCEDURESIGNATURE||""}`),l.push(`**Returns:** ${u.RETURNS||"void"}`),u.ARGUMENTS&&l.push(`**Arguments:** ${u.ARGUMENTS}`),l.push(`**Owner:** ${u.OWNER}`),u.EXECUTEDASOWNER!==void 0&&l.push(`**Execute as Owner:** ${u.EXECUTEDASOWNER?"Yes":"No"}`),u.DESCRIPTION&&l.push(`**Description:** ${u.DESCRIPTION}`),l.push(`
### Source Code
`),l.push("```sql"),l.push(String(u.PROCEDURESOURCE||"")),l.push("```\n")}return l.join(`
`)}finally{s.close()}}async getViewDefinitionFromDatabase(e,n,r,i,s=!1){let o=await Dt(e,n);if(!o)throw new Error(`Could not connect to database ${n}`);try{let a=`
                SELECT SCHEMA, VIEWNAME, OWNER, DEFINITION
                FROM ${n}.._V_VIEW
                WHERE UPPER(VIEWNAME) = '${r}'
                ${i?`AND SCHEMA = '${i.toUpperCase()}'`:""}
                LIMIT 1
            `,l=await le(o,a);if(!l||l.length===0)return s?"":`View "${r}" not found in ${n}.`;let c=[];for(let u of l){let d=u,E=d.SCHEMA||"",f=d.VIEWNAME||"";c.push(`## View: ${n}.${E}.${f}
`),c.push(`**Owner:** ${d.OWNER}
`),c.push(`### Definition
`),c.push("```sql"),c.push(String(d.DEFINITION||"")),c.push("```\n")}return c.join(`
`)}finally{o.close()}}async executeSelectQuery(e,n=100){let r=this.connectionManager.getActiveConnectionName();if(!r)return"No active database connection. Please connect to a Netezza database first.";let i=e.trim().toUpperCase();if(!i.startsWith("SELECT")&&!i.startsWith("WITH"))return"Error: Only SELECT queries are allowed for safety. Use the extension commands for DDL/DML operations.";let s=["INSERT","UPDATE","DELETE","DROP","TRUNCATE","ALTER","CREATE","GRANT","REVOKE"];for(let o of s)if(new RegExp(`^\\s*(${o})\\s+`,"im").test(e))return`Error: ${o} statements are not allowed. Only SELECT queries are permitted.`;try{let o=await this.connectionManager.getConnection(r);if(!o)return`Connection "${r}" not found.`;let a=await Dt(o);if(!a)return"Could not establish database connection.";try{let l=e.trim();l.toUpperCase().includes(" LIMIT ")||(l=`${l.replace(/;?\s*$/,"")} LIMIT ${n}`);let c=await le(a,l);if(!c||c.length===0)return"Query executed successfully. No rows returned.";let u=Object.keys(c[0]),d=[`## Query Results (${c.length} row${c.length>1?"s":""})
`,"| "+u.join(" | ")+" |","|"+u.map(()=>"---").join("|")+"|"];for(let E of c.slice(0,n)){let f=u.map(p=>{let h=E[p];return h===null?"NULL":h===void 0?"":String(h).replace(/\|/g,"\\|").substring(0,100)});d.push("| "+f.join(" | ")+" |")}return c.length>n&&d.push(`
*... and ${c.length-n} more rows (limited to ${n})*`),d.join(`
`)}finally{a.close()}}catch(o){return`Query execution failed: ${o instanceof Error?o.message:String(o)}`}}async getSampleData(e,n,r=10){let i=this.connectionManager.getActiveConnectionName();if(!i)return"No active database connection. Please connect to a Netezza database first.";try{let s=e.split("."),o,a,l;s.length===3?[o,a,l]=s:s.length===2?([a,l]=s,o=n):(l=s[0],o=n);let c=await this.connectionManager.getConnection(i);if(!c)return`Connection "${i}" not found.`;if(o||(o=await this.connectionManager.getCurrentDatabase(i)||void 0),!o)return"Could not determine database. Please specify database name.";let u=await Dt(c);if(!u)return"Could not establish database connection.";try{if(a||(a=await this.findTableSchema(u,o,l)),!a)return`Table "${l}" not found in database "${o}".`;let d=`${o}.${a}.${l}`,E=`SELECT * FROM ${d} LIMIT ${r}`,f=await le(u,E);if(!f||f.length===0)return`Table ${d} is empty or has no accessible rows.`;let p=Object.keys(f[0]),h=[`## Sample Data from ${d}
`,`*Showing ${f.length} of ${r} requested rows*
`,"| "+p.join(" | ")+" |","|"+p.map(()=>"---").join("|")+"|"];for(let T of f){let S=p.map(A=>{let R=T[A];return R===null?"NULL":R===void 0?"":String(R).replace(/\|/g,"\\|").substring(0,50)});h.push("| "+S.join(" | ")+" |")}return h.join(`
`)}finally{u.close()}}catch(s){return`Failed to get sample data: ${s instanceof Error?s.message:String(s)}`}}async getExplainPlan(e,n=!1){let r=this.connectionManager.getActiveConnectionName();if(!r)return"No active database connection. Please connect to a Netezza database first.";try{let i=await this.connectionManager.getConnection(r);if(!i)return`Connection "${r}" not found.`;let s=await Dt(i);if(!s)return"Could not establish database connection.";try{let a=`${n?"EXPLAIN VERBOSE":"EXPLAIN"} ${e}`,l=await le(s,a);if(!l||l.length===0)return"No explain plan returned.";let c=[`## Execution Plan${n?" (Verbose)":""}
`,"```"];for(let u of l){let d=Object.values(u);c.push(String(d[0]||""))}return c.push("```\n"),c.push("### Plan Analysis Tips:"),c.push("- Look for **Redistribute** or **Broadcast** operations (expensive)"),c.push("- Check if **Zone Maps** are being used for filtering"),c.push("- Watch for **Spool** operations that may indicate temp table usage"),c.push("- **SPU** operations show parallel processing distribution"),c.join(`
`)}finally{s.close()}}catch(i){return`Failed to get explain plan: ${i instanceof Error?i.message:String(i)}`}}async searchSchema(e,n="all",r){let i=this.connectionManager.getActiveConnectionName();if(!i)return"No active database connection. Please connect to a Netezza database first.";try{let s=await this.connectionManager.getConnection(i);if(!s)return`Connection "${i}" not found.`;let o=await Dt(s);if(!o)return"Could not establish database connection.";let a=e.toUpperCase().replace(/\*/g,"%"),l=!r,c=r?` in ${r}`:" across all databases",u=[`## Schema Search Results for "${e}"${c}
`];try{if(n==="tables"||n==="all"){let d=Qe.searchTables(a,r),E=await le(o,d);if(E&&E.length>0){u.push(`### Tables/Views Found
`),u.push("| Database | Schema | Name | Type |"),u.push("|----------|--------|------|------|");for(let f of E){let p=f;u.push(`| ${p.DATABASE} | ${p.SCHEMA} | ${p.TABLENAME} | ${p.TYPE} |`)}u.push(`
*Found ${E.length} table(s)/view(s)*
`)}else n==="tables"&&u.push(`No tables or views found matching the pattern.
`)}if(n==="columns"||n==="all"){let d=[];if(l)try{let E=Qe.LIST_DATABASES,f=await le(o,E);if(f&&f.length>0){let p=f.map(T=>T.DATABASE),h=100;for(let T of p){if(d.length>=h)break;let S=Qe.searchColumns(T,a);try{let A=await le(o,S);A&&A.length>0&&d.push(...A.slice(0,h-d.length))}catch(A){console.debug(`[searchSchema] Could not search columns in database ${T}:`,A)}}}}catch(E){console.error("[searchSchema] Error fetching databases for column search:",E)}else{let E=Qe.searchColumns(r,a);d=await le(o,E)}if(d&&d.length>0){u.push(`### Columns Found
`),u.push("| Database | Schema | Table | Column | Data Type |"),u.push("|----------|--------|-------|--------|-----------|");for(let E of d){let f=E;u.push(`| ${f.DATABASE} | ${f.SCHEMA} | ${f.TABLENAME} | ${f.COLUMN_NAME} | ${f.DATA_TYPE} |`)}u.push(`
*Found ${d.length} column(s)*
`)}else n==="columns"&&u.push(`No columns found matching the pattern.
`)}return u.join(`
`)}finally{o.close()}}catch(s){return`Schema search failed: ${s instanceof Error?s.message:String(s)}`}}async getTableStats(e,n){let r=this.connectionManager.getActiveConnectionName();if(!r)return"No active database connection. Please connect to a Netezza database first.";try{let i=e.split("."),s,o,a;i.length===3?[s,o,a]=i:i.length===2?([o,a]=i,s=n):(a=i[0],s=n);let l=await this.connectionManager.getConnection(r);if(!l)return`Connection "${r}" not found.`;if(s||(s=await this.connectionManager.getCurrentDatabase(r)||void 0),!s)return"Could not determine database. Please specify database name.";let c=await Dt(l);if(!c)return"Could not establish database connection.";try{if(o||(o=await this.findTableSchema(c,s,a)),!o)return`Table "${a}" not found in database "${s}".`;let u=`${s}.${o}.${a}`,d=[`## Table Statistics: ${u}
`];try{let p=`SELECT COUNT(*) AS ROW_COUNT FROM ${u}`,h=await le(c,p);if(h&&h.length>0){let T=h[0].ROW_COUNT;d.push(`**Row Count:** ${Number(T).toLocaleString()}`)}}catch{d.push("**Row Count:** Unable to retrieve")}let E=Qe.getTableStats(s,o,a),f=await le(c,E);if(f&&f.length>0){let p=f[0];d.push(`**Distribution Key:** ${p.DIST_KEY||"RANDOM"}`),d.push(`**Owner:** ${p.OWNER||"N/A"}`)}d.push(`
### Data Distribution (Skew Check)
`);try{let p=`
                        SELECT DATASLICEID, COUNT(*) AS ROW_COUNT
                        FROM ${u}
                        GROUP BY DATASLICEID
                        ORDER BY DATASLICEID
                    `,h=await le(c,p);if(h&&h.length>0){let T=h.map(N=>Number(N.ROW_COUNT)),S=Math.min(...T),A=Math.max(...T),R=T.reduce((N,L)=>N+L,0)/T.length,m=A>0?((A-S)/A*100).toFixed(1):"0";d.push(`**SPU Count:** ${h.length}`),d.push(`**Min Rows/SPU:** ${S.toLocaleString()}`),d.push(`**Max Rows/SPU:** ${A.toLocaleString()}`),d.push(`**Avg Rows/SPU:** ${Math.round(R).toLocaleString()}`),d.push(`**Skew Ratio:** ${m}%`),Number(m)>20?d.push(`
\u26A0\uFE0F **Warning:** High data skew detected. Consider reviewing distribution key.`):d.push(`
\u2705 Data distribution looks balanced.`)}}catch{d.push("Unable to retrieve skew information (DATASLICEID may not be available).")}return d.join(`
`)}finally{c.close()}}catch(i){return`Failed to get table statistics: ${i instanceof Error?i.message:String(i)}`}}async getObjectDependencies(e,n){let r=this.connectionManager.getActiveConnectionName();if(!r)return"No active database connection. Please connect to a Netezza database first.";try{let i=await this.connectionManager.getConnection(r);if(!i)return`Connection "${r}" not found.`;let s=n;if(s||(s=await this.connectionManager.getCurrentDatabase(r)||void 0),!s)return"Could not determine database. Please specify database name.";let o=await Dt(i,s);if(!o)return"Could not establish database connection.";let a=e.split("."),l=a[a.length-1].toUpperCase(),c=[`## Dependencies for ${e}
`];try{let u=Qe.findDependentViews(s,l),d=await le(o,u);if(d&&d.length>0){c.push(`### Views that reference this object
`),c.push("| Schema | View Name | Owner |"),c.push("|--------|-----------|-------|");for(let T of d){let S=T;c.push(`| ${S.SCHEMA} | ${S.VIEWNAME} | ${S.OWNER} |`)}c.push("")}else c.push(`### Views that reference this object
`),c.push(`No views found that reference this object.
`);let E=Qe.getViewDefinition(s,l),f=await le(o,E);f&&f.length>0&&(c.push(`### View Definition (for dependency analysis)
`),c.push("```sql"),c.push(String(f[0].DEFINITION||"")),c.push("```\n"));let p=Qe.findDependentProcedures(s,l),h=await le(o,p);if(h&&h.length>0){c.push(`### Procedures that reference this object
`),c.push("| Schema | Procedure | Owner |"),c.push("|--------|-----------|-------|");for(let T of h){let S=T;c.push(`| ${S.SCHEMA} | ${S.PROC_NAME} | ${S.OWNER} |`)}c.push("")}return c.join(`
`)}finally{o.close()}}catch(i){return`Failed to get dependencies: ${i instanceof Error?i.message:String(i)}`}}async validateSql(e){let n=this.connectionManager.getActiveConnectionName();if(!n)return"No active database connection. Please connect to a Netezza database first.";try{let r=await this.connectionManager.getConnection(n);if(!r)return`Connection "${n}" not found.`;let i=await Dt(r);if(!i)return"Could not establish database connection.";try{let s=`EXPLAIN ${e}`;return await le(i,s),`\u2705 **SQL is valid**

The SQL syntax is correct and all referenced objects exist.`}catch(s){let o=s instanceof Error?s.message:String(s),a=[`\u274C **SQL Validation Failed**
`,`### Error Details
`,"```",o,"```\n"];return o.includes("does not exist")?a.push("\u{1F4A1} **Suggestion:** Check if the table/column name is spelled correctly and exists in the database."):o.includes("syntax error")?a.push("\u{1F4A1} **Suggestion:** Review SQL syntax near the indicated position."):o.includes("permission denied")&&a.push("\u{1F4A1} **Suggestion:** You may not have permission to access this object."),a.join(`
`)}finally{i.close()}}catch(r){return`Validation failed: ${r instanceof Error?r.message:String(r)}`}}},YR=class{constructor(e){this.copilotService=e}async prepareInvocation(e,n){let r=e.input.sql?"provided SQL":"current editor";return{invocationMessage:`Fetching table schema from ${r}...`,confirmationMessages:{title:"Get SQL Schema",message:new M.MarkdownString(`Analyze SQL and fetch table schemas (DDL) from the connected Netezza database?

**Source:** ${r}`)}}}async invoke(e,n){try{let r;return e.input.sql?r=await this.copilotService.getSchemaForSql(e.input.sql):r=await this.copilotService.getSchemaContextForCurrentSql(),new M.LanguageModelToolResult([new M.LanguageModelTextPart(r)])}catch(r){let i=r instanceof Error?r.message:String(r);throw new Error(`Failed to get SQL schema: ${i}. Make sure you have an active database connection.`)}}},VR=class{constructor(e){this.copilotService=e}async prepareInvocation(e,n){let r=e.input.tables?.length||0,i=e.input.database?` from database ${e.input.database}`:"";return{invocationMessage:`Fetching column metadata for ${r} table(s)${i}...`,confirmationMessages:{title:"Get Table Columns",message:new M.MarkdownString(`Fetch column definitions for the following tables${i}?

**Tables:** ${e.input.tables?.join(", ")||"none"}`)}}}async invoke(e,n){try{let{tables:r,database:i}=e.input;if(!r||r.length===0)throw new Error("No tables specified. Please provide at least one table name.");let s=await this.copilotService.getColumnsForTables(r,i);return new M.LanguageModelToolResult([new M.LanguageModelTextPart(s)])}catch(r){let i=r instanceof Error?r.message:String(r);throw new Error(`Failed to get columns: ${i}. Make sure you have an active database connection.`)}}},qR=class{constructor(e){this.copilotService=e}async prepareInvocation(e,n){let r=e.input.schema?` (schema: ${e.input.schema})`:"",i=e.input.database?`database ${e.input.database}`:"all databases";return{invocationMessage:`Fetching tables from ${i}${r}...`,confirmationMessages:{title:"Get Tables List",message:new M.MarkdownString(`Fetch list of tables from **${i}**${r}?`)}}}async invoke(e,n){try{let{database:r,schema:i}=e.input,s=await this.copilotService.getTablesFromDatabase(r,i);return new M.LanguageModelToolResult([new M.LanguageModelTextPart(s)])}catch(r){let i=r instanceof Error?r.message:String(r);throw new Error(`Failed to get tables: ${i}. Make sure you have an active database connection.`)}}},XR=class{constructor(e){this.copilotService=e}async prepareInvocation(e,n){let r=e.input.maxRows||100,i=e.input.sql?.substring(0,100)+(e.input.sql?.length>100?"...":"");return{invocationMessage:`Executing SELECT query (max ${r} rows)...`,confirmationMessages:{title:"Execute SQL Query",message:new M.MarkdownString(`Execute the following SQL query (read-only)?

\`\`\`sql
${i}
\`\`\`

**Max Rows:** ${r}`)}}}async invoke(e,n){try{let{sql:r,maxRows:i}=e.input;if(!r)throw new Error("SQL query is required.");let s=await this.copilotService.executeSelectQuery(r,i||100);return new M.LanguageModelToolResult([new M.LanguageModelTextPart(s)])}catch(r){let i=r instanceof Error?r.message:String(r);throw new Error(`Query execution failed: ${i}`)}}},zR=class{constructor(e){this.copilotService=e}async prepareInvocation(e,n){let r=e.input.sampleSize||10,i=e.input.database?` from ${e.input.database}`:"";return{invocationMessage:`Fetching ${r} sample rows from ${e.input.table}${i}...`,confirmationMessages:{title:"Get Sample Data",message:new M.MarkdownString(`Fetch ${r} sample rows from table **${e.input.table}**${i}?`)}}}async invoke(e,n){try{let{table:r,database:i,sampleSize:s}=e.input;if(!r)throw new Error("Table name is required.");let o=await this.copilotService.getSampleData(r,i,s||10);return new M.LanguageModelToolResult([new M.LanguageModelTextPart(o)])}catch(r){let i=r instanceof Error?r.message:String(r);throw new Error(`Failed to get sample data: ${i}`)}}},jR=class{constructor(e){this.copilotService=e}async prepareInvocation(e,n){let r=e.input.verbose?"verbose":"standard",i=e.input.sql?.substring(0,80)+(e.input.sql?.length>80?"...":"");return{invocationMessage:`Getting ${r} execution plan...`,confirmationMessages:{title:"Get Execution Plan",message:new M.MarkdownString(`Get ${r} execution plan for:

\`\`\`sql
${i}
\`\`\``)}}}async invoke(e,n){try{let{sql:r,verbose:i}=e.input;if(!r)throw new Error("SQL query is required.");let s=await this.copilotService.getExplainPlan(r,i||!1);return new M.LanguageModelToolResult([new M.LanguageModelTextPart(s)])}catch(r){let i=r instanceof Error?r.message:String(r);throw new Error(`Failed to get execution plan: ${i}`)}}},KR=class{constructor(e){this.copilotService=e}async prepareInvocation(e,n){let r=e.input.searchType||"all",i=e.input.database?` in ${e.input.database}`:"";return{invocationMessage:`Searching ${r} for "${e.input.pattern}"${i}...`,confirmationMessages:{title:"Search Schema",message:new M.MarkdownString(`Search for ${r} matching pattern **"${e.input.pattern}"**${i}?`)}}}async invoke(e,n){try{let{pattern:r,searchType:i,database:s}=e.input;if(!r)throw new Error("Search pattern is required.");let o=await this.copilotService.searchSchema(r,i||"all",s);return new M.LanguageModelToolResult([new M.LanguageModelTextPart(o)])}catch(r){let i=r instanceof Error?r.message:String(r);throw new Error(`Schema search failed: ${i}`)}}},JR=class{constructor(e){this.copilotService=e}async prepareInvocation(e,n){let r=e.input.database?` in ${e.input.database}`:"";return{invocationMessage:`Getting statistics for ${e.input.table}${r}...`,confirmationMessages:{title:"Get Table Statistics",message:new M.MarkdownString(`Fetch statistics (row count, skew, distribution) for **${e.input.table}**${r}?`)}}}async invoke(e,n){try{let{table:r,database:i}=e.input;if(!r)throw new Error("Table name is required.");let s=await this.copilotService.getTableStats(r,i);return new M.LanguageModelToolResult([new M.LanguageModelTextPart(s)])}catch(r){let i=r instanceof Error?r.message:String(r);throw new Error(`Failed to get table statistics: ${i}`)}}},QR=class{constructor(e){this.copilotService=e}async prepareInvocation(e,n){let r=e.input.database?` in ${e.input.database}`:"";return{invocationMessage:`Finding dependencies for ${e.input.object}${r}...`,confirmationMessages:{title:"Get Object Dependencies",message:new M.MarkdownString(`Find all objects that depend on **${e.input.object}**${r}?`)}}}async invoke(e,n){try{let{object:r,database:i}=e.input;if(!r)throw new Error("Object name is required.");let s=await this.copilotService.getObjectDependencies(r,i);return new M.LanguageModelToolResult([new M.LanguageModelTextPart(s)])}catch(r){let i=r instanceof Error?r.message:String(r);throw new Error(`Failed to get dependencies: ${i}`)}}},ZR=class{constructor(e){this.copilotService=e}async prepareInvocation(e,n){let r=e.input.sql?.substring(0,80)+(e.input.sql?.length>80?"...":"");return{invocationMessage:"Validating SQL syntax...",confirmationMessages:{title:"Validate SQL",message:new M.MarkdownString(`Validate syntax of:

\`\`\`sql
${r}
\`\`\``)}}}async invoke(e,n){try{let{sql:r}=e.input;if(!r)throw new Error("SQL is required.");let i=await this.copilotService.validateSql(r);return new M.LanguageModelToolResult([new M.LanguageModelTextPart(i)])}catch(r){let i=r instanceof Error?r.message:String(r);throw new Error(`SQL validation failed: ${i}`)}}},eA=class{constructor(e){this.copilotService=e}async prepareInvocation(e,n){return{invocationMessage:"Fetching list of databases...",confirmationMessages:{title:"Get Databases",message:new M.MarkdownString("Fetch list of all databases accessible via the current connection?")}}}async invoke(e,n){try{let r=await this.copilotService.getDatabases();return new M.LanguageModelToolResult([new M.LanguageModelTextPart(r)])}catch(r){let i=r instanceof Error?r.message:String(r);throw new Error(`Failed to get databases: ${i}`)}}},tA=class{constructor(e){this.copilotService=e}async prepareInvocation(e,n){let r=e.input.database?` in ${e.input.database}`:" across all databases";return{invocationMessage:`Fetching schemas${r}...`,confirmationMessages:{title:"Get Schemas",message:new M.MarkdownString(`Fetch list of schemas${r}?`)}}}async invoke(e,n){try{let r=await this.copilotService.getSchemas(e.input.database);return new M.LanguageModelToolResult([new M.LanguageModelTextPart(r)])}catch(r){let i=r instanceof Error?r.message:String(r);throw new Error(`Failed to get schemas: ${i}`)}}},nA=class{constructor(e){this.copilotService=e}async prepareInvocation(e,n){let r=e.input.database?` in ${e.input.database}`:" across all databases",i=e.input.schema?`, schema ${e.input.schema}`:"";return{invocationMessage:`Fetching procedures${r}${i}...`,confirmationMessages:{title:"Get Procedures",message:new M.MarkdownString(`Fetch list of stored procedures${r}${i}?`)}}}async invoke(e,n){try{let r=await this.copilotService.getProcedures(e.input.database,e.input.schema);return new M.LanguageModelToolResult([new M.LanguageModelTextPart(r)])}catch(r){let i=r instanceof Error?r.message:String(r);throw new Error(`Failed to get procedures: ${i}`)}}},rA=class{constructor(e){this.copilotService=e}async prepareInvocation(e,n){let r=e.input.database?` in ${e.input.database}`:" across all databases",i=e.input.schema?`, schema ${e.input.schema}`:"";return{invocationMessage:`Fetching views${r}${i}...`,confirmationMessages:{title:"Get Views",message:new M.MarkdownString(`Fetch list of views${r}${i}?`)}}}async invoke(e,n){try{let r=await this.copilotService.getViews(e.input.database,e.input.schema);return new M.LanguageModelToolResult([new M.LanguageModelTextPart(r)])}catch(r){let i=r instanceof Error?r.message:String(r);throw new Error(`Failed to get views: ${i}`)}}},iA=class{constructor(e){this.copilotService=e}async prepareInvocation(e,n){let r=e.input.database?` in ${e.input.database}`:" across all databases",i=e.input.schema?`, schema ${e.input.schema}`:"",s=e.input.dataObjectPattern?`, data object matching "${e.input.dataObjectPattern}"`:"";return{invocationMessage:`Fetching external tables${r}${i}${s}...`,confirmationMessages:{title:"Get External Tables",message:new M.MarkdownString(`Fetch list of external tables${r}${i}${s}?`)}}}async invoke(e,n){try{let r=await this.copilotService.getExternalTables(e.input.database,e.input.schema,e.input.dataObjectPattern);return new M.LanguageModelToolResult([new M.LanguageModelTextPart(r)])}catch(r){let i=r instanceof Error?r.message:String(r);throw new Error(`Failed to get external tables: ${i}`)}}},sA=class{constructor(e){this.copilotService=e}async prepareInvocation(e,n){let r=e.input.database?` in ${e.input.database}`:"",i=e.input.objectType==="view"?"view":"procedure";return{invocationMessage:`Fetching ${i} definition for ${e.input.objectName}${r}...`,confirmationMessages:{title:`Get ${i.charAt(0).toUpperCase()+i.slice(1)} Definition`,message:new M.MarkdownString(`Fetch source code of ${i} **${e.input.objectName}**${r}?`)}}}async invoke(e,n){try{let{objectName:r,objectType:i,database:s}=e.input;if(!r)throw new Error("Object name is required.");if(!i||i!=="view"&&i!=="procedure")throw new Error('Object type must be "view" or "procedure".');let o=await this.copilotService.getObjectDefinition(r,i,s);return new M.LanguageModelToolResult([new M.LanguageModelTextPart(o)])}catch(r){let i=r instanceof Error?r.message:String(r);throw new Error(`Failed to get object definition: ${i}`)}}},oA=class{constructor(e){this.copilotService=e}async prepareInvocation(e,n){let r=e.input.topic||"all",i={optimization:"SQL optimization best practices",nzplsql:"NZPLSQL stored procedure syntax",all:"all Netezza documentation"};return{invocationMessage:`Getting Netezza reference: ${i[r]}...`,confirmationMessages:{title:"Get Netezza Reference",message:new M.MarkdownString(`Retrieve **${i[r]}** for IBM Netezza?`)}}}async invoke(e,n){let r=e.input.topic||"all",i=this.copilotService.getNetezzaReference(r);return new M.LanguageModelToolResult([new M.LanguageModelTextPart(i)])}};var Yf=j(require("vscode"));function Jn(t){return`${t.dbName}.${t.schema}.${t.label}`}async function Wr(t,e){return await t.getConnection(e||t.getActiveConnectionName()||"")?!0:(Yf.window.showErrorMessage("No database connection"),!1)}async function cn(t,e){return Yf.window.withProgress({location:Yf.ProgressLocation.Notification,title:t,cancellable:!1},e)}function fw(t){return t.replace(/'/g,"''")}function Vf(t){return/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(t.trim())}var Fn=j(require("vscode"));bn();function b3(t){let{context:e,connectionManager:n,schemaProvider:r}=t;return[Fn.commands.registerCommand("netezza.copySelectAll",async i=>{if(i&&i.label&&i.dbName&&i.schema){let s=`SELECT * FROM ${i.dbName}.${i.schema}.${i.label} LIMIT 1000;`,o=await Fn.window.showQuickPick([{label:"Open in Editor",description:"Open SQL in a new editor",value:"editor"},{label:"Copy to Clipboard",description:"Copy SQL to clipboard",value:"clipboard"}],{placeHolder:"How would you like to access the SQL?"});if(o)if(o.value==="editor"){let a=await Fn.workspace.openTextDocument({content:s,language:"sql"});await Fn.window.showTextDocument(a)}else await Fn.env.clipboard.writeText(s),Fn.window.showInformationMessage("Copied to clipboard")}}),Fn.commands.registerCommand("netezza.copyDrop",async i=>{if(i&&i.label&&i.dbName&&i.schema&&i.objType){let s=Jn(i),o=`DROP ${i.objType} ${s};`;if(await Fn.window.showWarningMessage(`Are you sure you want to delete ${i.objType.toLowerCase()} "${s}"?`,{modal:!0},"Yes, delete","Cancel")==="Yes, delete")try{await cn(`Deleting ${i.objType.toLowerCase()} ${s}...`,async()=>{await Cn(e,o,!0,i.connectionName,n)}),Fn.window.showInformationMessage(`Deleted ${i.objType.toLowerCase()}: ${s}`),r.refresh()}catch(l){let c=l instanceof Error?l.message:String(l);Fn.window.showErrorMessage(`Error during deletion: ${c}`)}}}),Fn.commands.registerCommand("netezza.copyName",i=>{if(i&&i.label&&i.dbName&&i.schema){let s=Jn(i);Fn.env.clipboard.writeText(s),Fn.window.showInformationMessage("Copied to clipboard")}})]}var Re=j(require("vscode"));bn();function y3(t){let{context:e,connectionManager:n,metadataCache:r,schemaProvider:i}=t;return[Re.commands.registerCommand("netezza.grantPermissions",async s=>{if(s&&s.label&&s.dbName&&s.schema&&s.objType){let o=Jn(s),a=await Re.window.showQuickPick([{label:"SELECT",description:"Privileges to read data"},{label:"INSERT",description:"Privileges to insert data"},{label:"UPDATE",description:"Privileges to update data"},{label:"DELETE",description:"Privileges to delete data"},{label:"ALL",description:"All privileges (SELECT, INSERT, UPDATE, DELETE)"},{label:"LIST",description:"Privileges to list objects"}],{placeHolder:"Select privilege type"});if(!a)return;let l=await Re.window.showInputBox({prompt:"Enter user or group name",placeHolder:"e.g. SOME_USER or GROUP_NAME",validateInput:d=>!d||d.trim().length===0?"User/group name cannot be empty":Vf(d)?null:"Invalid user/group name"});if(!l)return;let c=`GRANT ${a.label} ON ${o} TO ${l.trim().toUpperCase()};`;if(await Re.window.showInformationMessage(`Execute: ${c}`,{modal:!0},"Yes, execute","Cancel")==="Yes, execute"){if(!await Wr(n))return;try{await cn(`Granting ${a.label} on ${o}...`,async()=>{await Cn(e,c,!0,s.connectionName,n)}),Re.window.showInformationMessage(`Granted ${a.label} on ${o} to ${l.trim().toUpperCase()}`)}catch(d){let E=d instanceof Error?d.message:String(d);Re.window.showErrorMessage(`Error granting privileges: ${E}`)}}}}),Re.commands.registerCommand("netezza.addTableComment",async s=>{if(s&&s.label&&s.dbName&&s.schema&&s.objType==="TABLE"){let o=Jn(s),a=await Re.window.showInputBox({prompt:"Enter comment for table",placeHolder:"e.g. Table contains customer data",value:s.objectDescription||""});if(a===void 0)return;let l=`COMMENT ON TABLE ${o} IS '${fw(a)}';`;try{if(!await Wr(n))return;await Cn(e,l,!0,s.connectionName,n),Re.window.showInformationMessage(`Comment added to table: ${o}`),i.refresh()}catch(c){let u=c instanceof Error?c.message:String(c);Re.window.showErrorMessage(`Error adding comment: ${u}`)}}}),Re.commands.registerCommand("netezza.addColumnComment",async s=>{if(s&&s.label&&s.dbName&&s.parentName){let o=s.label.split(" ")[0],a=s.parentName,l=s.schema||"ADMIN",c=`${s.dbName}.${l}.${a}.${o}`,u=await Re.window.showInputBox({prompt:`Enter comment for column "${o}"`,placeHolder:"e.g. Customer ID from CRM",value:s.objectDescription||""});if(u===void 0)return;let d=`COMMENT ON COLUMN ${c} IS '${fw(u)}';`;try{if(!await Wr(n))return;await Cn(e,d,!0,s.connectionName,n),Re.window.showInformationMessage(`Comment added to column: ${o}`),i.refresh()}catch(E){let f=E instanceof Error?E.message:String(E);Re.window.showErrorMessage(`Error adding comment: ${f}`)}}}),Re.commands.registerCommand("netezza.truncateTable",async s=>{if(s&&s.label&&s.dbName&&s.schema&&s.objType==="TABLE"){let o=Jn(s),a=`TRUNCATE TABLE ${o};`;if(await Re.window.showWarningMessage(`\u26A0\uFE0F WARNING: Are you sure you want to delete ALL data from the table "${o}"?

${a}

This operation is IRREVERSIBLE!`,{modal:!0},"Yes, delete all data","Cancel")==="Yes, delete all data"){if(!await Wr(n))return;try{await cn(`Clearing table ${o}...`,async()=>{await Cn(e,a,!0,s.connectionName,n)}),Re.window.showInformationMessage(`Table cleared: ${o}`)}catch(c){let u=c instanceof Error?c.message:String(c);Re.window.showErrorMessage(`Error clearing table: ${u}`)}}}}),Re.commands.registerCommand("netezza.addPrimaryKey",async s=>{if(s&&s.label&&s.dbName&&s.schema&&s.objType==="TABLE"){let o=Jn(s),a=await Re.window.showInputBox({prompt:"Enter primary key constraint name",placeHolder:`e.g. PK_${s.label}`,value:`PK_${s.label}`,validateInput:E=>!E||E.trim().length===0?"Constraint name cannot be empty":Vf(E)?null:"Invalid constraint name"});if(!a)return;let l=await Re.window.showInputBox({prompt:"Enter primary key column names (comma separated)",placeHolder:"e.g. COL1, COL2 or ID",validateInput:E=>!E||E.trim().length===0?"You must provide at least one column":null});if(!l)return;let c=l.split(",").map(E=>E.trim().toUpperCase()).join(", "),u=`ALTER TABLE ${o} ADD CONSTRAINT ${a.trim().toUpperCase()} PRIMARY KEY (${c});`;if(await Re.window.showInformationMessage(`Add primary key to table "${o}"?

${u}`,{modal:!0},"Yes, add","Cancel")==="Yes, add"){if(!await Wr(n))return;try{await cn(`Adding primary key to ${o}...`,async()=>{await Cn(e,u,!0,s.connectionName,n)}),Re.window.showInformationMessage(`Primary key added: ${a.trim().toUpperCase()}`),i.refresh()}catch(E){let f=E instanceof Error?E.message:String(E);Re.window.showErrorMessage(`Error adding primary key: ${f}`)}}}}),Re.commands.registerCommand("netezza.addForeignKey",async s=>{if(s&&s.label&&s.dbName&&s.schema&&s.objType==="TABLE"){let o=Jn(s),a=await Re.window.showInputBox({prompt:"Enter foreign key constraint name",placeHolder:`e.g. FK_${s.label}`,value:`FK_${s.label}`,validateInput:h=>!h||h.trim().length===0?"Constraint name cannot be empty":Vf(h)?null:"Invalid constraint name"});if(!a)return;let l=await Re.window.showInputBox({prompt:"Enter foreign key column names (comma separated)",placeHolder:"e.g. COL1, COL2 or ID",validateInput:h=>!h||h.trim().length===0?"You must provide at least one column":null});if(!l)return;let c=await Re.window.showInputBox({prompt:"Enter referenced table name (schema.table)",placeHolder:"e.g. SCHEMA_NAME.TABLE_NAME",validateInput:h=>!h||h.trim().length===0?"Referenced table name cannot be empty":null});if(!c)return;let u=await Re.window.showInputBox({prompt:"Enter referenced table column names (comma separated)",placeHolder:"e.g. COL1, COL2 or ID",validateInput:h=>!h||h.trim().length===0?"You must provide at least one column":null});if(!u)return;let d=l.split(",").map(h=>h.trim().toUpperCase()).join(", "),E=u.split(",").map(h=>h.trim().toUpperCase()).join(", "),f=`ALTER TABLE ${o} ADD CONSTRAINT ${a.trim().toUpperCase()} FOREIGN KEY (${d}) REFERENCES ${c.trim().toUpperCase()} (${E});`;if(await Re.window.showInformationMessage(`Add foreign key to table "${o}"?

${f}`,{modal:!0},"Yes, add","Cancel")==="Yes, add"){if(!await Wr(n))return;try{await cn(`Adding foreign key to ${o}...`,async()=>{await Cn(e,f,!0,s.connectionName,n)}),Re.window.showInformationMessage(`Foreign key added: ${a.trim().toUpperCase()}`),i.refresh()}catch(h){let T=h instanceof Error?h.message:String(h);Re.window.showErrorMessage(`Error adding foreign key: ${T}`)}}}}),Re.commands.registerCommand("netezza.addUniqueConstraint",async s=>{if(s&&s.label&&s.dbName&&s.schema&&s.objType==="TABLE"){let o=Jn(s),a=await Re.window.showInputBox({prompt:"Enter unique constraint name",placeHolder:`e.g. UQ_${s.label}`,value:`UQ_${s.label}`,validateInput:E=>!E||E.trim().length===0?"Constraint name cannot be empty":Vf(E)?null:"Invalid constraint name"});if(!a)return;let l=await Re.window.showInputBox({prompt:"Enter unique constraint column names (comma separated)",placeHolder:"e.g. COL1, COL2 or EMAIL",validateInput:E=>!E||E.trim().length===0?"You must provide at least one column":null});if(!l)return;let c=l.split(",").map(E=>E.trim().toUpperCase()).join(", "),u=`ALTER TABLE ${o} ADD CONSTRAINT ${a.trim().toUpperCase()} UNIQUE (${c});`;if(await Re.window.showInformationMessage(`Add unique constraint to table "${o}"?

${u}`,{modal:!0},"Yes, add","Cancel")==="Yes, add"){if(!await Wr(n))return;try{await cn(`Adding unique constraint to ${o}...`,async()=>{await Cn(e,u,!0,s.connectionName,n)}),Re.window.showInformationMessage(`Unique constraint added: ${a.trim().toUpperCase()}`),i.refresh()}catch(E){let f=E instanceof Error?E.message:String(E);Re.window.showErrorMessage(`Error adding unique constraint: ${f}`)}}}}),Re.commands.registerCommand("netezza.changeOwner",async s=>{if(s&&s.label&&s.dbName&&s.schema&&s.objType==="TABLE"){let o=Jn(s),a=await Re.window.showInputBox({prompt:"Enter new owner name",placeHolder:"e.g. USER_NAME or GROUP_NAME"});if(!a)return;let l=`ALTER TABLE ${o} OWNER TO ${a.trim()};`;try{if(!await Wr(n))return;await Cn(e,l,!0,s.connectionName,n),Re.window.showInformationMessage(`Owner changed to ${a} for ${o}`),r.invalidateSchema(s.connectionName,s.dbName,s.schema),i.refresh()}catch(c){let u=c instanceof Error?c.message:String(c);Re.window.showErrorMessage(`Error changing owner: ${u}`)}}}),Re.commands.registerCommand("netezza.renameTable",async s=>{if(s&&s.label&&s.dbName&&s.schema&&s.objType==="TABLE"){let o=Jn(s),a=await Re.window.showInputBox({prompt:"Enter new table name",placeHolder:"NewTableName",value:s.label});if(!a||a===s.label)return;let l=`ALTER TABLE ${o} RENAME TO ${a.trim()};`;try{if(!await Wr(n))return;await Cn(e,l,!0,s.connectionName,n),Re.window.showInformationMessage(`Table renamed to ${a}`),r.invalidateSchema(s.connectionName,s.dbName,s.schema),i.refresh()}catch(c){let u=c instanceof Error?c.message:String(c);Re.window.showErrorMessage(`Error renaming table: ${u}`)}}})]}var lt=j(require("vscode"));bn();function D3(t){let{context:e,connectionManager:n}=t;return[lt.commands.registerCommand("netezza.groomTable",async r=>{if(r&&r.label&&r.dbName&&r.schema&&r.objType==="TABLE"){let i=Jn(r),s=await lt.window.showQuickPick([{label:"RECORDS ALL",description:"Groom all records (reclaim space from deleted rows)"},{label:"RECORDS READY",description:"Groom only ready records"},{label:"PAGES ALL",description:"Groom all pages (reorganize data pages)"},{label:"PAGES START",description:"Groom pages from start"},{label:"VERSIONS",description:"Groom versions (clean up old row versions)"}],{placeHolder:"Select GROOM mode"});if(!s)return;let o=await lt.window.showQuickPick([{label:"DEFAULT",description:"Use default backupset",value:"DEFAULT"},{label:"NONE",description:"No backupset",value:"NONE"},{label:"Custom",description:"Specify custom backupset ID",value:"CUSTOM"}],{placeHolder:"Select RECLAIM BACKUPSET option"});if(!o)return;let a=o.value;if(o.value==="CUSTOM"){let u=await lt.window.showInputBox({prompt:"Enter backupset ID",placeHolder:"e.g. 12345",validateInput:d=>!d||d.trim().length===0?"Backupset ID cannot be empty":/^\d+$/.test(d.trim())?null:"Backupset ID must be a number"});if(!u)return;a=u.trim()}let l=`GROOM TABLE ${i} ${s.label} RECLAIM BACKUPSET ${a};`;if(await lt.window.showWarningMessage(`Execute GROOM on table "${i}"?

${l}

Warning: This operation may be time-consuming for large tables.`,{modal:!0},"Yes, execute","Cancel")==="Yes, execute")try{let u=Date.now();await cn(`GROOM TABLE ${i} (${s.label})...`,async()=>{await Cn(e,l,!0,r.connectionName,n)});let d=((Date.now()-u)/1e3).toFixed(1);lt.window.showInformationMessage(`GROOM completed successfully (${d}s): ${i}`)}catch(u){let d=u instanceof Error?u.message:String(u);lt.window.showErrorMessage(`Error during GROOM: ${d}`)}}}),lt.commands.registerCommand("netezza.generateStatistics",async r=>{if(r&&r.label&&r.dbName&&r.schema&&r.objType==="TABLE"){let i=Jn(r),s=`GENERATE EXPRESS STATISTICS ON ${i};`;if(await lt.window.showInformationMessage(`Generate statistics for table "${i}"?

${s}`,{modal:!0},"Yes, generate","Cancel")==="Yes, generate")try{let a=Date.now();await cn(`Generating statistics for ${i}...`,async()=>{await Cn(e,s,!0,r.connectionName,n)});let l=((Date.now()-a)/1e3).toFixed(1);lt.window.showInformationMessage(`Statistics generated successfully (${l}s): ${i}`)}catch(a){let l=a instanceof Error?a.message:String(a);lt.window.showErrorMessage(`Error generating statistics: ${l}`)}}}),lt.commands.registerCommand("netezza.checkSkew",async r=>{if(r&&r.label&&r.dbName&&r.schema&&r.objType==="TABLE"){let i=Jn(r),s=`SELECT datasliceid, count(*) as row_count FROM ${i} GROUP BY 1 ORDER BY 1;`;if(await lt.window.showInformationMessage(`Check skew for "${i}"?

This will run: ${s}

Note: This may be slow on very large tables.`,{modal:!0},"Yes, check skew","Cancel")==="Yes, check skew"){let a=await lt.workspace.openTextDocument({content:`-- Check Skew for ${i}
${s}`,language:"sql"});await lt.window.showTextDocument(a),lt.commands.executeCommand("netezza.runQuery")}}}),lt.commands.registerCommand("netezza.recreateTable",async r=>{if(!r||!r.label||!r.dbName||!r.schema||!r.objType||r.objType!=="TABLE"){lt.window.showErrorMessage("Invalid object selected for Recreate Table");return}let i=await n.getConnection(n.getActiveConnectionName()||"");if(!i){lt.window.showErrorMessage("Connection not configured. Please connect via Netezza: Connect...");return}let s=await lt.window.showInputBox({prompt:"Enter temporary table name (Optional)",placeHolder:"Leave empty to auto-generate timestamped name",value:""});if(s!==void 0)try{await cn(`Generating Recreate Script for ${r.label}...`,async()=>{let{generateRecreateTableScript:o}=await Promise.resolve().then(()=>(L3(),w3)),a=await o(i,r.dbName,r.schema,r.label,s||void 0);if(a.success&&a.sqlScript){let l=await lt.workspace.openTextDocument({content:a.sqlScript,language:"sql"});await lt.window.showTextDocument(l),lt.window.showInformationMessage(`Recreate script generated for ${r.label}`)}else throw new Error(a.error||"Script generation failed")})}catch(o){let a=o instanceof Error?o.message:String(o);lt.window.showErrorMessage(`Error generating recreate script: ${a}`)}})]}var xe=j(require("vscode"));bn();function v3(t){let{context:e,connectionManager:n}=t;return[xe.commands.registerCommand("netezza.createDDL",async r=>{try{if(!r||!r.label||!r.dbName||!r.schema||!r.objType){xe.window.showErrorMessage("Invalid object selected for DDL generation");return}let i=await n.getConnection(n.getActiveConnectionName()||"");if(!i){xe.window.showErrorMessage("Connection not configured. Please connect via Netezza: Connect...");return}await cn(`Generating DDL for ${r.objType} ${r.label}...`,async()=>{let{generateDDL:s}=await Promise.resolve().then(()=>(qf(),Ew)),o=await s(i,r.dbName,r.schema,r.label,r.objType);if(o.success&&o.ddlCode){let a=await xe.window.showQuickPick([{label:"Open in Editor",description:"Open DDL code in a new editor",value:"editor"},{label:"Copy to Clipboard",description:"Copy DDL code to clipboard",value:"clipboard"}],{placeHolder:"How would you like to access the DDL code?"});if(a)if(a.value==="editor"){let l=await xe.workspace.openTextDocument({content:o.ddlCode,language:"sql"});await xe.window.showTextDocument(l),xe.window.showInformationMessage(`DDL code generated for ${r.objType} ${r.label}`)}else a.value==="clipboard"&&(await xe.env.clipboard.writeText(o.ddlCode),xe.window.showInformationMessage("DDL code copied to clipboard"))}else throw new Error(o.error||"DDL generation failed")})}catch(i){let s=i instanceof Error?i.message:String(i);xe.window.showErrorMessage(`Error generating DDL: ${s}`)}}),xe.commands.registerCommand("netezza.compareSchema",async r=>{try{if(!r||!r.label||!r.dbName||!r.schema||!r.objType){xe.window.showErrorMessage("Invalid object selected for comparison");return}let i=await n.getConnection(n.getActiveConnectionName()||"");if(!i){xe.window.showErrorMessage("Connection not configured. Please connect via Netezza: Connect...");return}let s=r.objType,o=`${r.dbName}.${r.schema}.${r.label}`,a=[];if(await cn(`Loading ${s}s for comparison...`,async()=>{let c=s==="PROCEDURE"?"OBJTYPE = 'PROCEDURE'":s==="VIEW"?"OBJTYPE = 'VIEW'":"OBJTYPE = 'TABLE'",u=s==="PROCEDURE"?`SELECT DISTINCT SCHEMA, PROCEDURESIGNATURE AS OBJNAME FROM ${r.dbName}.._V_PROCEDURE WHERE DATABASE = '${r.dbName.toUpperCase()}' ORDER BY SCHEMA, PROCEDURESIGNATURE`:`SELECT SCHEMA, OBJNAME FROM ${r.dbName}.._V_OBJECT_DATA WHERE DBNAME = '${r.dbName.toUpperCase()}' AND ${c} ORDER BY SCHEMA, OBJNAME`,d=await Ee(e,u,!0,n,r.connectionName);if(d&&d.data&&d.data.length>0){let E=ge(d);for(let f of E){let p=f.OBJNAME,h=f.SCHEMA;`${r.dbName}.${h}.${p}`.toUpperCase()!==o.toUpperCase()&&a.push({label:p,description:`${r.dbName}.${h}`,db:r.dbName,schema:h,name:p})}}}),a.length===0){xe.window.showWarningMessage(`No other ${s}s found to compare with.`);return}let l=await xe.window.showQuickPick(a,{placeHolder:`Select ${s} to compare with ${r.label}`,matchOnDescription:!0});if(!l)return;await cn(`Comparing ${r.label} with ${l.label}...`,async()=>{if(s==="PROCEDURE"){let{compareProcedures:c}=await Promise.resolve().then(()=>(pw(),hw)),{SchemaCompareView:u}=await Promise.resolve().then(()=>(Rw(),Sw)),d=await c(i,r.dbName,r.schema,r.label,l.db,l.schema,l.name);u.createOrShow(e.extensionUri,d,"procedure")}else{let{compareTableStructures:c}=await Promise.resolve().then(()=>(pw(),hw)),{SchemaCompareView:u}=await Promise.resolve().then(()=>(Rw(),Sw)),d=await c(i,r.dbName,r.schema,r.label,l.db,l.schema,l.name);u.createOrShow(e.extensionUri,d,"table")}}),xe.window.showInformationMessage(`Comparison complete: ${r.label} \u2194 ${l.label}`)}catch(i){let s=i instanceof Error?i.message:String(i);xe.window.showErrorMessage(`Error comparing objects: ${s}`)}}),xe.commands.registerCommand("netezza.batchExportDDL",async r=>{try{if(!r||!r.contextValue){xe.window.showErrorMessage("Invalid node selected for batch DDL export");return}let i=r.contextValue==="database",s=r.contextValue.startsWith("typeGroup:");if(!i&&!s){xe.window.showErrorMessage("Batch DDL export is only available on database or object type nodes");return}let o=await n.getConnection(n.getActiveConnectionName()||"");if(!o){xe.window.showErrorMessage("Connection not configured. Please connect via Netezza: Connect...");return}let a=r.dbName||r.label,l=s?[r.objType||r.contextValue.replace("typeGroup:","")]:void 0;await cn(i?`Exporting all DDL for database ${a}...`:`Exporting ${l?.[0]} DDL for ${a}...`,async()=>{let{generateBatchDDL:c}=await Promise.resolve().then(()=>(qf(),Ew)),u=await c({connectionDetails:o,database:a,objectTypes:l});if(u.success&&u.ddlCode){let d=await xe.window.showQuickPick([{label:"Open in Editor",description:"Open DDL code in a new editor",value:"editor"},{label:"Save to File",description:"Save DDL code to a .sql file",value:"file"},{label:"Copy to Clipboard",description:"Copy DDL code to clipboard",value:"clipboard"}],{placeHolder:`${u.objectCount} objects found. How would you like to access the DDL code?`});if(d)if(d.value==="editor"){let E=await xe.workspace.openTextDocument({content:u.ddlCode,language:"sql"});await xe.window.showTextDocument(E),xe.window.showInformationMessage(`DDL exported: ${u.objectCount} objects`)}else if(d.value==="file"){let E=i?`${a}_all_ddl.sql`:`${a}_${l?.[0]?.toLowerCase()||"objects"}_ddl.sql`,f=await xe.window.showSaveDialog({defaultUri:xe.Uri.file(E),filters:{"SQL Files":["sql"]}});f&&(await xe.workspace.fs.writeFile(f,Buffer.from(u.ddlCode,"utf8")),xe.window.showInformationMessage(`DDL saved to ${f.fsPath}`))}else d.value==="clipboard"&&(await xe.env.clipboard.writeText(u.ddlCode),xe.window.showInformationMessage(`DDL copied: ${u.objectCount} objects`));u.errors.length>0&&xe.window.showWarningMessage(`Batch DDL completed with ${u.errors.length} error(s). Check the generated file for details.`)}else throw new Error(u.errors.join(", ")||"Batch DDL generation failed")})}catch(i){let s=i instanceof Error?i.message:String(i);xe.window.showErrorMessage(`Error exporting DDL: ${s}`)}})]}var Ir=j(require("vscode"));bn();function W3(t){let{context:e,connectionManager:n}=t;return[Ir.commands.registerCommand("netezza.showERD",async r=>{try{if(!r||!r.contextValue||!r.contextValue.startsWith("typeGroup:")){Ir.window.showErrorMessage("Please right-click on a TABLE type group to show ERD");return}let i=r.dbName||r.label,s=r.connectionName;if(!s){Ir.window.showErrorMessage("No connection selected");return}let o=`SELECT DISTINCT SCHEMA FROM ${i}.._V_TABLE ORDER BY SCHEMA`,a=await Ee(e,o,!0,n,s);if(!a||!a.data){Ir.window.showErrorMessage("Could not retrieve schemas");return}let l=ge(a);if(l.length===0){Ir.window.showWarningMessage("No tables found in this database");return}let c;if(l.length===1)c=l[0].SCHEMA;else{let E=l.map(p=>({label:p.SCHEMA,description:`${i}.${p.SCHEMA}`})),f=await Ir.window.showQuickPick(E,{placeHolder:"Select schema to show ERD for"});if(!f)return;c=f.label}let u=0,d=0;await cn(`Building ERD for ${i}.${c}...`,async E=>{let{buildERDData:f}=await Promise.resolve().then(()=>(F3(),B3)),{ERDView:p}=await Promise.resolve().then(()=>(G3(),H3)),h=await f(e,n,s,i,c,E);u=h.tables.length,d=h.relationships.length,p.createOrShow(e.extensionUri,h)}),Ir.window.showInformationMessage(`ERD generated: ${u} tables, ${d} relationships`)}catch(i){let s=i instanceof Error?i.message:String(i);Ir.window.showErrorMessage(`Error generating ERD: ${s}`)}}),Ir.commands.registerCommand("netezza.showSessionMonitor",async()=>{try{if(!await Wr(n)){Ir.window.showErrorMessage("Please connect to a Netezza database first.");return}let{SessionMonitorView:r}=await Promise.resolve().then(()=>(k3(),$3));r.createOrShow(e.extensionUri,e,n)}catch(r){let i=r instanceof Error?r.message:String(r);Ir.window.showErrorMessage(`Error opening Session Monitor: ${i}`)}})]}var Ft=j(require("vscode"));bn();function Y3(t){let{context:e,connectionManager:n,metadataCache:r,schemaTreeView:i}=t;return[Ft.commands.registerCommand("netezza.revealInSchema",async s=>{let o=Ft.window.setStatusBarMessage(`$(loading~spin) Revealing ${s.name} in schema...`);try{let a=s.connectionName;if(!a){let E=Ft.window.activeTextEditor;E&&E.document.languageId==="sql"&&(a=n.getConnectionForExecution(E.document.uri.toString()))}if(a||(a=n.getActiveConnectionName()||void 0),!a){o.dispose(),Ft.window.showWarningMessage("No active connection. Please select a connection first.");return}let l=(s.objType||s.type)?.trim().toUpperCase(),c=s.name;if(l==="COLUMN"){if(!s.parent){o.dispose(),Ft.window.showWarningMessage("Cannot find column without parent table");return}c=s.parent}if(s.database){let E=r.findObjectWithType(a,s.database,s.schema,c);if(E){let f=new hn(E.name,Ft.TreeItemCollapsibleState.Collapsed,`netezza:${E.objType}`,s.database,E.objType,E.schema||s.schema,E.objId,void 0,a);await i.reveal(f,{select:!0,focus:!0,expand:!0}),o.dispose(),Ft.window.setStatusBarMessage(`$(check) Found ${c} in ${s.database}.${E.schema||s.schema} (cached)`,3e3);return}else r.hasConnectionPrefetchTriggered(a)||r.triggerConnectionPrefetch(a,async f=>Ee(e,f,!0,n,a))}if(!await n.getConnection(a)){o.dispose(),Ft.window.showWarningMessage("Not connected to database and object not found in cache.");return}let d=s.database||await n.getCurrentDatabase(a);if(d){let E=l;E==="EXTERNAL TABLE"&&(E="TABLE");let f=E&&E!=="COLUMN"?`AND UPPER(OBJTYPE) = UPPER('${E}')`:"",p=s.schema?`AND UPPER(SCHEMA) = UPPER('${s.schema.replace(/'/g,"''").trim()}')`:"",h=`
                        SELECT OBJNAME, OBJTYPE, SCHEMA, OBJID 
                        FROM ${d}.._V_OBJECT_DATA 
                        WHERE UPPER(OBJNAME) = UPPER('${c.replace(/'/g,"''").trim()}') 
                        AND DBNAME = '${d}'
                        ${f}
                        ${p}
                        LIMIT 1
                    `;try{let T=await Ee(e,h,!0,n,a);if(T&&T.data){let S=ge(T);if(S.length>0){let A=S[0];if(A.OBJTYPE==="PROCEDURE")try{let m=`SELECT PROCEDURESIGNATURE FROM ${d}.._V_PROCEDURE WHERE OBJID = ${A.OBJID}`,N=await Ee(e,m,!0,n,a);if(N&&N.data&&N.data.length>0){let L=ge(N);L.length>0&&L[0].PROCEDURESIGNATURE&&(A.OBJNAME=L[0].PROCEDURESIGNATURE)}}catch(m){console.warn("Failed to resolve procedure signature:",m)}let R=new hn(A.OBJNAME,Ft.TreeItemCollapsibleState.Collapsed,`netezza:${A.OBJTYPE}`,d,A.OBJTYPE,A.SCHEMA,A.OBJID,void 0,a);await i.reveal(R,{select:!0,focus:!0,expand:!0}),o.dispose(),Ft.window.setStatusBarMessage(`$(check) Found ${c} in ${d}.${A.SCHEMA}`,3e3);return}}}catch(T){console.log(`Error searching in ${d}:`,T)}}if(!d){let E=await Ee(e,"SELECT DATABASE FROM system.._v_database ORDER BY DATABASE",!0,n,a);if(E&&E.data){let f=ge(E);for(let p of f){let h=p.DATABASE;try{let T=l;T==="EXTERNAL TABLE"&&(T="TABLE");let S=T&&T!=="COLUMN"?`AND UPPER(OBJTYPE) = UPPER('${T}')`:"",A=s.schema?`AND UPPER(SCHEMA) = UPPER('${s.schema.replace(/'/g,"''").trim()}')`:"",R=`
                                    SELECT OBJNAME, OBJTYPE, SCHEMA, OBJID 
                                    FROM ${h}.._V_OBJECT_DATA 
                                    WHERE UPPER(OBJNAME) = UPPER('${c.replace(/'/g,"''").trim()}') 
                                    AND DBNAME = '${h}'
                                    ${S}
                                    ${A}
                                    LIMIT 1
                                `,m=await Ee(e,R,!0,n,a);if(m&&m.data){let N=ge(m);if(N.length>0){let L=N[0];if(L.OBJTYPE==="PROCEDURE")try{let D=`SELECT PROCEDURESIGNATURE FROM ${h}.._V_PROCEDURE WHERE OBJID = ${L.OBJID}`,g=await Ee(e,D,!0,n,a);if(g&&g.data&&g.data.length>0){let w=ge(g);w.length>0&&w[0].PROCEDURESIGNATURE&&(L.OBJNAME=w[0].PROCEDURESIGNATURE)}}catch(D){console.warn("Failed to resolve procedure signature:",D)}let I=new hn(L.OBJNAME,Ft.TreeItemCollapsibleState.Collapsed,`netezza:${L.OBJTYPE}`,h,L.OBJTYPE,L.SCHEMA,L.OBJID,void 0,a);await i.reveal(I,{select:!0,focus:!0,expand:!0}),o.dispose(),Ft.window.setStatusBarMessage(`$(check) Found ${c} in ${h}.${L.SCHEMA}`,3e3);return}}}catch(T){console.log(`Error searching in ${h}:`,T)}}}}o.dispose(),Ft.window.showWarningMessage(`Could not find ${l||"object"} ${c}`)}catch(a){o.dispose();let l=a instanceof Error?a.message:String(a);Ft.window.showErrorMessage(`Error revealing item: ${l}`)}}),Ft.commands.registerCommand("netezza.showQueryHistory",()=>{Ft.commands.executeCommand("netezza.queryHistory.focus")}),Ft.commands.registerCommand("netezza.clearQueryHistory",async()=>{let{QueryHistoryManager:s}=await Promise.resolve().then(()=>(ME(),nD)),o=s.getInstance(e);await Ft.window.showWarningMessage("Are you sure you want to clear all query history?",{modal:!0},"Clear All")==="Clear All"&&(await o.clearHistory(),Ft.window.showInformationMessage("Query history cleared"))})]}function aA(t){return[...b3(t),...y3(t),...D3(t),...v3(t),...W3(t),...Y3(t)]}var J=j(require("vscode")),Cw=j(require("path")),zf=j(require("os"));function Xf(t,e,n){let r=Date.now()-n;t.appendLine(`[${new Date().toLocaleTimeString()}] ${e} completed in ${r}ms`),t.show(!0)}function Z3(t){let{connectionManager:e,outputChannel:n}=t;return[J.commands.registerCommand("netezza.exportToXlsb",async()=>{let r=J.window.activeTextEditor;if(!r){J.window.showErrorMessage("No active editor found");return}let i=r.selection,s=i.isEmpty?r.document.getText():r.document.getText(i);if(!s.trim()){J.window.showWarningMessage("No SQL query to export");return}let o=await J.window.showSaveDialog({filters:{"Excel Binary Workbook":["xlsb"]},saveLabel:"Export to XLSB"});if(!o)return;let a=Date.now();try{let l=r.document.uri.toString(),c=e.getConnectionForExecution(l),u=await e.getConnection(c||"");if(!u)throw new Error("Connection not configured. Please connect via Netezza: Connect...");let E=J.workspace.getConfiguration("netezza").get("queryTimeout",1800);await J.window.withProgress({location:J.ProgressLocation.Notification,title:"Exporting to XLSB...",cancellable:!0},async(f,p)=>{let{exportQueryToXlsb:h}=await Promise.resolve().then(()=>(Yi(),ys)),T=await h(u,s,o.fsPath,!1,S=>{f.report({message:S}),n.appendLine(`[XLSB Export] ${S}`)},E,p);if(!T.success)throw new Error(T.message)}),Xf(n,"Export to XLSB",a),J.window.showInformationMessage(`Results exported to ${o.fsPath}`)}catch(l){let c=l instanceof Error?l.message:String(l);J.window.showErrorMessage(`Error exporting to XLSB: ${c}`)}}),J.commands.registerCommand("netezza.exportToCsv",async()=>{let r=J.window.activeTextEditor;if(!r){J.window.showErrorMessage("No active editor found");return}let i=r.selection,s=i.isEmpty?r.document.getText():r.document.getText(i);if(!s.trim()){J.window.showWarningMessage("No SQL query to export");return}let o=await J.window.showSaveDialog({filters:{"CSV Files":["csv"]},saveLabel:"Export to CSV"});if(!o)return;let a=Date.now();try{let l=r.document.uri.toString(),c=e.getConnectionForExecution(l),u=await e.getConnection(c||"");if(!u)throw new Error("Connection not configured. Please connect via Netezza: Connect...");let E=J.workspace.getConfiguration("netezza").get("queryTimeout",1800);await J.window.withProgress({location:J.ProgressLocation.Notification,title:"Exporting to CSV...",cancellable:!0},async(f,p)=>{let{exportToCsv:h}=await Promise.resolve().then(()=>(sg(),rP));await h(u,s,o.fsPath,f,E,p)}),Xf(n,"Export to CSV",a),J.window.showInformationMessage(`Results exported to ${o.fsPath}`)}catch(l){let c=l instanceof Error?l.message:String(l);J.window.showErrorMessage(`Error exporting to CSV: ${c}`)}}),J.commands.registerCommand("netezza.copyXlsbToClipboard",async()=>{let r=J.window.activeTextEditor;if(!r){J.window.showErrorMessage("No active editor found");return}let i=r.selection,s=i.isEmpty?r.document.getText():r.document.getText(i);if(!s.trim()){J.window.showWarningMessage("No SQL query to export");return}try{let o=r.document.uri.toString(),a=e.getConnectionForExecution(o),l=await e.getConnection(a||"");if(!l)throw new Error("Connection not configured. Please connect via Netezza: Connect...");let u=J.workspace.getConfiguration("netezza").get("queryTimeout",1800),d=Date.now();if(await J.window.withProgress({location:J.ProgressLocation.Notification,title:"Exporting to XLSB and copying to clipboard...",cancellable:!0},async(f,p)=>{let{exportQueryToXlsb:h,getTempFilePath:T}=await Promise.resolve().then(()=>(Yi(),ys)),S=T(),A=await h(l,s,S,!0,R=>{f.report({message:R}),n.appendLine(`[XLSB Clipboard] ${R}`)},u,p);if(!A.success)throw new Error(A.message);if(!A.details?.clipboard_success)throw new Error("Failed to copy file to clipboard")}),Xf(n,"Copy XLSB to Clipboard",d),await J.window.showInformationMessage("Excel file copied to clipboard! You can now paste it into Excel or Windows Explorer.","Show Temp Folder","OK")==="Show Temp Folder"){let f=zf.tmpdir();await J.env.openExternal(J.Uri.file(f))}}catch(o){let a=o instanceof Error?o.message:String(o);J.window.showErrorMessage(`Error copying XLSB to clipboard: ${a}`)}}),J.commands.registerCommand("netezza.exportToXlsbAndOpen",async()=>{let r=J.window.activeTextEditor;if(!r){J.window.showErrorMessage("No active editor found");return}let i=r.selection,s=i.isEmpty?r.document.getText():r.document.getText(i);if(!s.trim()){J.window.showWarningMessage("No SQL query to export");return}let o=await J.window.showSaveDialog({filters:{"Excel Binary Workbook":["xlsb"]},saveLabel:"Export to XLSB and Open"});if(!o)return;let a=Date.now();try{let l=r.document.uri.toString(),c=e.getConnectionForExecution(l),u=await e.getConnection(c||"");if(!u)throw new Error("Connection not configured. Please connect via Netezza: Connect...");let E=J.workspace.getConfiguration("netezza").get("queryTimeout",1800);await J.window.withProgress({location:J.ProgressLocation.Notification,title:"Exporting to XLSB and opening...",cancellable:!0},async(f,p)=>{let{exportQueryToXlsb:h}=await Promise.resolve().then(()=>(Yi(),ys)),T=await h(u,s,o.fsPath,!1,S=>{f.report({message:S}),n.appendLine(`[XLSB Export] ${S}`)},E,p);if(!T.success)throw new Error(T.message)}),Xf(n,"Export to XLSB and Open",a),await J.env.openExternal(o),J.window.showInformationMessage(`Results exported and opened: ${o.fsPath}`)}catch(l){let c=l instanceof Error?l.message:String(l);J.window.showErrorMessage(`Error exporting to XLSB: ${c}`)}}),J.commands.registerCommand("netezza.exportCurrentResultToXlsbAndOpen",async(r,i)=>{try{if(!r||Array.isArray(r)&&r.length===0){J.window.showErrorMessage("No data to export");return}let s=r;if(Array.isArray(r)&&r.length>1){let u=await J.window.showQuickPick(["Export All Results","Export Active Result Only"],{placeHolder:"Multiple results available. What would you like to export?"});if(!u)return;if(u==="Export Active Result Only"){let d=r.find(E=>E.isActive);d?s=[d]:s=[r[0]]}}let o=new Date().toISOString().replace(/[:.]/g,"-"),a=Cw.join(zf.tmpdir(),`netezza_results_${o}.xlsb`),l=Date.now();await J.window.withProgress({location:J.ProgressLocation.Notification,title:"Creating Excel file...",cancellable:!0},async u=>{if(Array.isArray(s)&&s.length>0&&"columns"in s[0]&&"rows"in s[0]){let{exportStructuredToXlsb:E}=await Promise.resolve().then(()=>(Yi(),ys)),f=await E(s,a,!1,p=>{u.report({message:p}),n.appendLine(`[Structured to XLSB] ${p}`)});if(!f.success)throw new Error(f.message)}else{let{exportCsvToXlsb:E}=await Promise.resolve().then(()=>(Yi(),ys)),f=await E(s,a,!1,{source:"Query Results Panel",sql:i},p=>{u.report({message:p}),n.appendLine(`[CSV to XLSB] ${p}`)});if(!f.success)throw new Error(f.message)}});let c=Date.now()-l;n.appendLine(`[${new Date().toLocaleTimeString()}] Export Current Result to Excel completed in ${c}ms`),await J.env.openExternal(J.Uri.file(a)),J.window.showInformationMessage(`Results exported and opened: ${a}`)}catch(s){let o=s instanceof Error?s.message:String(s);J.window.showErrorMessage(`Error exporting to Excel: ${o}`)}}),J.commands.registerCommand("netezza.copyCurrentResultToXlsbClipboard",async(r,i)=>{try{if(!r||Array.isArray(r)&&r.length===0){J.window.showErrorMessage("No data to copy");return}let s=r;if(Array.isArray(r)&&r.length>1){let u=await J.window.showQuickPick(["Export All Results","Export Active Result Only"],{placeHolder:"Multiple results available. What would you like to export?"});if(!u)return;if(u==="Export Active Result Only"){let d=r.find(E=>E.isActive);d?s=[d]:s=[r[0]]}}let{getTempFilePath:o}=await Promise.resolve().then(()=>(Yi(),ys)),a=o(),l=Date.now();if(await J.window.withProgress({location:J.ProgressLocation.Notification,title:"Copying to clipboard as Excel...",cancellable:!0},async u=>{if(Array.isArray(s)&&s.length>0&&"columns"in s[0]&&"rows"in s[0]){let{exportStructuredToXlsb:E}=await Promise.resolve().then(()=>(Yi(),ys)),f=await E(s,a,!0,p=>{u.report({message:p}),n.appendLine(`[Clipboard Structured XLSB] ${p}`)});if(!f.success)throw new Error(f.message)}else{let{exportCsvToXlsb:E}=await Promise.resolve().then(()=>(Yi(),ys)),f=await E(s,a,!0,{source:"Query Results Panel",sql:i},p=>{u.report({message:p}),n.appendLine(`[Clipboard XLSB] ${p}`)});if(!f.success)throw new Error(f.message)}}),Xf(n,"Copy Result as Excel",l),await J.window.showInformationMessage("Excel file copied to clipboard! You can now paste it into Excel or Windows Explorer.","Show Temp Folder","OK")==="Show Temp Folder"){let u=zf.tmpdir();await J.env.openExternal(J.Uri.file(u))}}catch(s){let o=s instanceof Error?s.message:String(s);J.window.showErrorMessage(`Error copying to Excel: ${o}`)}}),J.commands.registerCommand("netezza.exportCurrentResultToXlsxAndOpen",async(r,i)=>{try{if(!r||Array.isArray(r)&&r.length===0){J.window.showErrorMessage("No data to export");return}let s=r;if(Array.isArray(r)&&r.length>1){let u=await J.window.showQuickPick(["Export All Results","Export Active Result Only"],{placeHolder:"Multiple results available. What would you like to export?"});if(!u)return;if(u==="Export Active Result Only"){let d=r.find(E=>E.isActive);d?s=[d]:s=[r[0]]}}let o=new Date().toISOString().replace(/[:.]/g,"-"),a=Cw.join(zf.tmpdir(),`netezza_results_${o}.xlsx`),l=Date.now();await J.window.withProgress({location:J.ProgressLocation.Notification,title:"Creating Excel XLSX file...",cancellable:!0},async u=>{if(Array.isArray(s)&&s.length>0&&"columns"in s[0]&&"rows"in s[0]){let{exportStructuredToXlsx:E}=await Promise.resolve().then(()=>(Ow(),Nw)),f=await E(s,a,!1,p=>{u.report({message:p}),n.appendLine(`[Structured to XLSX] ${p}`)});if(!f.success)throw new Error(f.message)}else{let{exportCsvToXlsx:E}=await Promise.resolve().then(()=>(Ow(),Nw)),f=await E(s,a,!1,{source:"Query Results Panel",sql:i},p=>{u.report({message:p}),n.appendLine(`[CSV to XLSX] ${p}`)});if(!f.success)throw new Error(f.message)}});let c=Date.now()-l;n.appendLine(`[${new Date().toLocaleTimeString()}] Export Current Result to XLSX completed in ${c}ms`),await J.env.openExternal(J.Uri.file(a)),J.window.showInformationMessage(`Results exported and opened: ${a}`)}catch(s){let o=s instanceof Error?s.message:String(s);J.window.showErrorMessage(`Error exporting to Excel XLSX: ${o}`)}})]}var ve=j(require("vscode")),lK=j(require("path"));bn();function oK(t,e,n){let r=Date.now()-n;t.appendLine(`[${new Date().toLocaleTimeString()}] ${e} completed in ${r}ms`),t.show(!0)}async function aK(t,e,n){try{let i=await Ee(t,"SELECT CURRENT_CATALOG, CURRENT_SCHEMA",!0,n,e);if(i&&i.data){let s=ge(i);if(s&&s.length>0){let o=s[0].CURRENT_CATALOG||"SYSTEM",a=s[0].CURRENT_SCHEMA||"ADMIN",c=new Date().toISOString().slice(0,10).replace(/-/g,""),u=Math.floor(Math.random()*1e4).toString().padStart(4,"0");return`${o}.${a}.IMPORT_${c}_${u}`}}}catch(r){ve.window.showErrorMessage(`Error getting current database/schema: ${r instanceof Error?r.message:String(r)}`)}return null}function cK(t){let{context:e,connectionManager:n,outputChannel:r}=t;return[ve.commands.registerCommand("netezza.importClipboard",async()=>{try{let s=ve.window.activeTextEditor?.document?.uri?.toString(),o=n.getConnectionForExecution(s),a=await n.getConnection(o||"");if(!a)throw new Error("Connection not configured. Please connect via Netezza: Connect...");let l=await ve.window.showInputBox({prompt:"Enter target table name (leave empty for auto-generated name)",placeHolder:"e.g. my_schema.my_table or leave empty",validateInput:E=>!E||E.trim().length===0||/^[a-zA-Z_][a-zA-Z0-9_]*(\.[a-zA-Z_][a-zA-Z0-9_]*)?(\.[a-zA-Z_][a-zA-Z0-9_]*)?$/.test(E.trim())?null:"Invalid table name format. Use: [database.]schema.table"});if(l===void 0)return;let c;if(!l||l.trim().length===0){let E=await aK(e,o,n);if(!E)return;c=E,ve.window.showInformationMessage(`Auto-generated table name: ${c}`)}else c=l.trim();let u=await ve.window.showQuickPick([{label:"Auto-detect",description:"Automatically detect clipboard format (text or Excel XML)",value:null},{label:"Excel XML Spreadsheet",description:"Force Excel XML format processing",value:"XML Spreadsheet"},{label:"Plain Text",description:"Force plain text processing with delimiter detection",value:"TEXT"}],{placeHolder:"Select clipboard data format"});if(!u)return;let d=Date.now();await ve.window.withProgress({location:ve.ProgressLocation.Notification,title:"Importing clipboard data...",cancellable:!1},async E=>{let{importClipboardDataToNetezza:f}=await Promise.resolve().then(()=>(sK(),iK)),p="",h=await f(c,a,u.value,{},(T,S,A=!0)=>{E.report({message:T,increment:S}),A&&T!==p&&(r.appendLine(`[Clipboard Import] ${T}`),p=T)});if(!h.success)throw new Error(h.message);h.details&&(r.appendLine(`[Clipboard Import] Rows processed: ${h.details.rowsProcessed}`),r.appendLine(`[Clipboard Import] Columns: ${h.details.columns}`),r.appendLine(`[Clipboard Import] Format: ${h.details.format}`))}),oK(r,"Import Clipboard Data",d),ve.window.showInformationMessage(`Clipboard data imported successfully to table: ${c}`,"Copy Table Name").then(E=>{E==="Copy Table Name"&&(ve.env.clipboard.writeText(c),ve.window.showInformationMessage("Table name copied to clipboard"))})}catch(i){ve.window.showErrorMessage(`Error importing clipboard data: ${i instanceof Error?i.message:String(i)}`)}}),ve.commands.registerCommand("netezza.importData",async()=>{try{let s=ve.window.activeTextEditor?.document?.uri?.toString(),o=n.getConnectionForExecution(s),a=await n.getConnection(o||"");if(!a)throw new Error("Connection not configured. Please connect via Netezza: Connect...");let l=await ve.window.showOpenDialog({canSelectFiles:!0,canSelectFolders:!1,canSelectMany:!1,filters:{"Data Files":["csv","txt","xlsx","xlsb","json"],"CSV Files":["csv"],"Excel Files":["xlsx","xlsb"],"Text Files":["txt"],"JSON Files":["json"],"All Files":["*"]},openLabel:"Select file to import"});if(!l||l.length===0)return;let c=l[0].fsPath,u=await ve.window.showInputBox({prompt:"Enter target table name (leave empty for auto-generated name)",placeHolder:"e.g. my_schema.my_table or leave empty",validateInput:p=>!p||p.trim().length===0||/^[a-zA-Z_][a-zA-Z0-9_]*(\.[a-zA-Z_][a-zA-Z0-9_]*)?(\.[a-zA-Z_][a-zA-Z0-9_]*)?$/.test(p.trim())?null:"Invalid table name format. Use: [database.]schema.table"});if(u===void 0)return;let d;if(!u||u.trim().length===0){let p=await aK(e,o,n);if(!p)return;d=p,ve.window.showInformationMessage(`Auto-generated table name: ${d}`)}else d=u.trim();let E=await ve.window.showQuickPick([{label:"Default Import",description:"Use default settings",value:{}},{label:"Custom Options",description:"Configure import settings (coming soon)",value:null}],{placeHolder:"Select import options"});if(!E)return;if(E.value===null){ve.window.showInformationMessage("Custom options will be available in future version");return}let f=Date.now();await ve.window.withProgress({location:ve.ProgressLocation.Notification,title:"Importing data...",cancellable:!1},async p=>{let{importDataToNetezza:h}=await Promise.resolve().then(()=>(LR(),c3)),T="",S=await h(c,d,a,(A,R,m=!0)=>{p.report({message:A,increment:R}),m&&A!==T&&(r.appendLine(`[Import] ${A}`),T=A)});if(!S.success)throw new Error(S.message);S.details&&(r.appendLine(`[Import] Rows processed: ${S.details.rowsProcessed}`),r.appendLine(`[Import] Columns: ${S.details.columns}`),r.appendLine(`[Import] Delimiter: ${S.details.detectedDelimiter}`))}),oK(r,"Import Data",f),ve.window.showInformationMessage(`Data imported successfully to table: ${d}`,"Copy Table Name").then(p=>{p==="Copy Table Name"&&(ve.env.clipboard.writeText(d),ve.window.showInformationMessage("Table name copied to clipboard"))})}catch(i){ve.window.showErrorMessage(`Error importing data: ${i instanceof Error?i.message:String(i)}`)}}),ve.commands.registerCommand("netezza.smartPaste",async()=>{try{let i=ve.window.activeTextEditor;if(!i)return;let o=ve.workspace.getConfiguration("netezza").get("pythonPath")||"python",a=lK.join(e.extensionPath,"python","check_clipboard_format.py"),l=require("child_process");if(await new Promise(u=>{let d=l.spawn(o,[a]);d.on("close",E=>{u(E===1)}),d.on("error",()=>{u(!1)})})){let u=await ve.window.showQuickPick([{label:"\u{1F4CA} import to Netezza table",description:'Detected "XML Spreadsheet" format - import data to database',value:"import"},{label:"\u{1F4DD} Paste as text",description:"Paste clipboard content as plain text",value:"paste"}],{placeHolder:'Detected "XML Spreadsheet" format in clipboard - choose an action'});if(u?.value==="import")ve.commands.executeCommand("netezza.importClipboard");else if(u?.value==="paste"){let d=await ve.env.clipboard.readText(),E=i.selection;await i.edit(f=>{f.replace(E,d)})}}else{let u=await ve.env.clipboard.readText(),d=i.selection;await i.edit(E=>{E.replace(d,u)})}}catch(i){ve.window.showErrorMessage(`Error during paste: ${i instanceof Error?i.message:String(i)}`)}})]}var ce=j(require("vscode"));bn();Bo();function yw(t){return t&&(t.includes(" ")?`"${t.replace(/"/g,'\\"')}"`:t)}function Ms(t,e,n){let i=/[ \\/]/.test(t)?`& ${yw(t)}`:t,s=yw(e),o=n.map(a=>yw(a)).join(" ");return`${i} ${s}${o?" "+o:""}`.trim()}function dJ(t){let{context:e,connectionManager:n,resultPanelProvider:r}=t;return[ce.commands.registerCommand("netezza.cancelQuery",async(i,s)=>{let o=typeof i=="string"?i:i?.toString();if(!o){let a=ce.window.activeTextEditor;a&&(o=a.document.uri.toString())}if(o){console.log(`[netezza.cancelQuery] Cancelling: ${o}`),r.cancelExecution(o,s);try{await Rm(o)}catch(a){console.error("[netezza.cancelQuery] Backend cancel failed:",a)}}else{let a=r.getActiveSource();a?(console.log(`[netezza.cancelQuery] No URI provided, falling back to active source: ${a}`),r.cancelExecution(a,s),await Rm(a)):ce.window.showWarningMessage("No active query to cancel.")}}),ce.commands.registerCommand("netezza.runQuery",async()=>{let i=ce.window.activeTextEditor;if(!i){ce.window.showErrorMessage("No active editor found");return}let s=i.document,o=i.selection,a=s.getText(),l=s.uri.toString(),c=[];if(o.isEmpty){let d=s.offsetAt(o.active),E=Zn.getStatementAtPosition(a,d);if(E){c=[E.sql];let f=s.positionAt(E.start),p=s.positionAt(E.end);i.selection=new ce.Selection(f,p)}else{ce.window.showWarningMessage("No SQL statement found at cursor");return}}else{let d=s.getText(o);if(!d.trim()){ce.window.showWarningMessage("No SQL query selected");return}/^\s*CREATE\s+(OR\s+REPLACE\s+)?PROCEDURE\b/i.test(d)?c=[d]:c=Zn.splitStatements(d).filter(E=>E.trim().length>0)}if(c.length===0)return;let u=c.length===1?c[0].trim():null;if(u){let d=u.split(/\s+/),E=d[0]||"",f=/python(\.exe)?$/i.test(E)&&d.length>=2&&d[1].toLowerCase().endsWith(".py"),p=E.toLowerCase().endsWith(".py");if(f||p){let T=ce.workspace.getConfiguration("netezza").get("pythonPath")||"python",S="";if(f){let R=d[0],m=d[1],N=d.slice(2);S=Ms(R,m,N)}else{let R=E,m=d.slice(1);S=Ms(T,R,m)}let A=ce.window.createTerminal({name:"Netezza: Script"});A.show(!0),A.sendText(S,!0),ce.window.showInformationMessage(`Running script: ${S}`);return}}try{r.setActiveSource(l),r.startExecution(l);let d=ce.workspace.getConfiguration("netezza"),E=d.get("enableStreaming",!1),f=d.get("streamingChunkSize",5e3);await ce.window.withProgress({location:ce.ProgressLocation.Notification,title:`Executing SQL for ${l.split(/[\\/]/).pop()}...`,cancellable:!1},async p=>{let h=r.onDidCancel(T=>{T===l&&p.report({message:"Cancelling query..."})});try{E?await gm(e,c,n,l,T=>r.log(l,T),(T,S,A)=>{r.appendStreamingChunk(l,T,S,A)},f):await cl(e,c,n,l,T=>r.log(l,T),T=>r.updateResults(T,l,!0))}finally{h.dispose()}}),r.finalizeExecution(l),ce.commands.executeCommand("netezza.results.focus")}catch(d){let E=d instanceof Error?d.message:String(d);if(E.includes("Query cancelled")){r.log(l,"Query execution cancelled by user."),r.finalizeExecution(l);return}r.log(l,`Error: ${E}`),r.updateResults([{columns:[],data:[],message:E,isError:!0,sql:c.length===1?c[0]:void 0}],l,!0),r.finalizeExecution(l),ce.window.showErrorMessage(`Error executing query: ${E}`)}}),ce.commands.registerCommand("netezza.runQueryBatch",async()=>{let i=ce.window.activeTextEditor;if(!i){ce.window.showErrorMessage("No active editor found");return}let s=i.document,o=i.selection,a=s.uri.toString(),l;if(o.isEmpty?l=s.getText():l=s.getText(o),!l.trim()){ce.window.showWarningMessage("No SQL query to execute");return}let u=l.trim().split(/\s+/),d=u[0]||"",E=/python(\.exe)?$/i.test(d)&&u.length>=2&&u[1].toLowerCase().endsWith(".py"),f=d.toLowerCase().endsWith(".py");if(E||f){let h=ce.workspace.getConfiguration("netezza").get("pythonPath")||"python",T="";if(E){let A=u[0],R=u[1],m=u.slice(2);T=Ms(A,R,m)}else{let A=d,R=u.slice(1);T=Ms(h,A,R)}let S=ce.window.createTerminal({name:"Netezza: Script"});S.show(!0),S.sendText(T,!0),ce.window.showInformationMessage(`Running script: ${T}`);return}try{r.startExecution(a),await ce.window.withProgress({location:ce.ProgressLocation.Notification,title:`Executing batch SQL for ${a.split(/[\\/]/).pop()}...`,cancellable:!1},async()=>{await cl(e,[l],n,a,p=>r.log(a,p),p=>r.updateResults(p,a,!0))}),r.finalizeExecution(a),ce.commands.executeCommand("netezza.results.focus")}catch(p){let h=p instanceof Error?p.message:String(p);if(h.includes("Query cancelled")){r.log(a,"Query execution cancelled by user."),r.finalizeExecution(a);return}r.log(a,`Error: ${h}`),r.updateResults([{columns:[],data:[],message:h,isError:!0,sql:l}],a,!0),r.finalizeExecution(a),ce.window.showErrorMessage(`Error executing query: ${h}`)}}),ce.commands.registerCommand("netezza.explainQuery",async()=>{await uJ(e,n,!1)}),ce.commands.registerCommand("netezza.explainQueryVerbose",async()=>{await uJ(e,n,!0)}),ce.commands.registerCommand("netezza.formatSQL",async()=>{let i=ce.window.activeTextEditor;if(!i){ce.window.showErrorMessage("No active editor");return}if(i.document.languageId!=="sql"&&i.document.languageId!=="mssql"){ce.window.showWarningMessage("Format SQL is only available for SQL files");return}let s=ce.workspace.getConfiguration("netezza"),o=s.get("formatSQL.tabWidth",4),a=s.get("formatSQL.keywordCase","upper"),l=i.selection,c=l.isEmpty?i.document.getText():i.document.getText(l);try{let{format:u}=await Promise.resolve().then(()=>(rJ(),nJ)),d="__NZ_DOUBLE_DOT__",E=c.replace(/\.\.(?=[a-zA-Z_])/g,`.${d}.`),p=u(E,{language:"sql",tabWidth:o,keywordCase:a,linesBetweenQueries:2}).replace(new RegExp(`\\.\\s*${d}\\s*\\.`,"g"),"..");await i.edit(h=>{if(l.isEmpty){let T=new ce.Range(i.document.positionAt(0),i.document.positionAt(i.document.getText().length));h.replace(T,p)}else h.replace(l,p)}),ce.window.showInformationMessage("SQL formatted successfully")}catch(u){let d=u instanceof Error?u.message:String(u);d.includes("Parse error")?ce.window.showErrorMessage("SQL formatting failed: The SQL contains syntax not supported by the formatter. Try selecting a simpler portion of the SQL to format."):ce.window.showErrorMessage(`Format SQL failed: ${d}`)}})]}async function uJ(t,e,n){let r=ce.window.activeTextEditor;if(!r){ce.window.showErrorMessage("No active editor found");return}let i=r.document,s=r.selection,o;if(!s.isEmpty)o=i.getText(s);else{let c=r.selection.active,u=i.offsetAt(c),d=i.getText(),E=Zn.getStatementAtPosition(d,u);E?o=d.substring(E.start,E.end):o=i.getText()}if(!o.trim()){ce.window.showWarningMessage("No SQL query to explain");return}let a=o.trim();a.toUpperCase().startsWith("EXPLAIN")&&(a=a.replace(/^EXPLAIN\s+(?:VERBOSE\s+)?/i,""));let l=n?`EXPLAIN VERBOSE ${a}`:`EXPLAIN ${a}`;try{let c=i.uri.toString(),u=e.getConnectionForExecution(c);if(!u){ce.window.showErrorMessage("No database connection. Please connect first.");return}await ce.window.withProgress({location:ce.ProgressLocation.Notification,title:"Generating query plan...",cancellable:!1},async()=>{let d=await dD(t,l,u,e,c);if(d&&d.trim()){let{parseExplainOutput:E,ExplainPlanView:f}=await Promise.resolve().then(()=>(cJ(),lJ)),p=E(d);f.createOrShow(t.extensionUri,p,a)}else ce.window.showWarningMessage("No explain output received")})}catch(c){let u=c instanceof Error?c.message:String(c);ce.window.showErrorMessage(`Error generating query plan: ${u}`)}}var Nr=j(require("vscode"));function $A(t,e){let n=Nr.window.activeTextEditor;if(n&&n.document.languageId==="sql"){let r=n.document.uri.toString(),i=e.getDocumentKeepConnectionOpen(r),s=e.hasDocumentKeepConnectionOpen(r),o=s?"\u{1F4CC} ":"";t.text=i?`${o}\u{1F517} Keep ON`:`${o}\u26D3\uFE0F\u200D\u{1F4A5} Keep OFF`,t.tooltip=i?`Keep Connection: ENABLED${s?" (custom)":" (default)"} - Click to toggle`:`Keep Connection: DISABLED${s?" (custom)":""} - Click to toggle`,t.backgroundColor=i?new Nr.ThemeColor("statusBarItem.prominentBackground"):void 0,t.show()}else t.hide()}function fJ(t,e){let n=Nr.window.createStatusBarItem(Nr.StatusBarAlignment.Right,100);return n.command="netezza.toggleKeepConnectionForTab",$A(n,e),t.subscriptions.push(n),n}function EJ(t,e){let n=Nr.window.createStatusBarItem(Nr.StatusBarAlignment.Left,100);return n.command="netezza.selectConnectionForTab",n.tooltip="Click to select connection for this SQL tab",t.subscriptions.push(n),{statusBarItem:n,updateFn:()=>{let i=Nr.window.activeTextEditor;if(i&&i.document.languageId==="sql"){let s=i.document.uri.toString(),o=e.getConnectionForExecution(s);o?(n.text=`$(database) ${o}`,n.show()):(n.text="$(database) Select Connection",n.show())}else n.hide()}}}function hJ(t,e){let n=Nr.window.createStatusBarItem(Nr.StatusBarAlignment.Left,99);return n.command="netezza.selectDatabaseForTab",n.tooltip="Click to select database for this SQL tab (will reconnect)",t.subscriptions.push(n),{statusBarItem:n,updateFn:async()=>{let i=Nr.window.activeTextEditor;if(i&&i.document.languageId==="sql"){let s=i.document.uri.toString();if(e.getConnectionForExecution(s)){let a=await e.getEffectiveDatabase(s),l=e.getDocumentDatabase(s)!==void 0;if(a){let c=l?"\u{1F4CC} ":"";n.text=`${c}$(server) ${a}`,n.tooltip=l?`Database: ${a} (custom for this tab) - Click to change`:`Database: ${a} (from connection) - Click to change`,n.show()}else n.text="$(server) Select Database",n.show()}else n.hide()}else n.hide()}}}var Or=j(require("vscode"));Bo();function pJ(){return Or.window.createTextEditorDecorationType({backgroundColor:"rgba(5, 115, 201, 0.10)",isWholeLine:!1,rangeBehavior:Or.DecorationRangeBehavior.ClosedClosed})}function kA(t,e){if(!Or.workspace.getConfiguration("netezza").get("highlightActiveStatement",!0)||!e||e.document.languageId!=="sql"&&e.document.languageId!=="mssql"){e&&e.setDecorations(t,[]);return}try{let i=e.document,s=e.selection.active,o=i.offsetAt(s),a=i.getText(),l=Zn.getStatementAtPosition(a,o);if(l){let c=i.positionAt(l.start),u=i.positionAt(l.end),d=new Or.Range(c,u);e.setDecorations(t,[d])}else e.setDecorations(t,[])}catch(i){console.error("Error updating SQL highlight:",i)}}function TJ(t,e){t.subscriptions.push(Or.window.onDidChangeTextEditorSelection(n=>{kA(e,n.textEditor)}),Or.window.onDidChangeActiveTextEditor(n=>{kA(e,n)}),Or.workspace.onDidChangeConfiguration(n=>{n.affectsConfiguration("netezza.highlightActiveStatement")&&kA(e,Or.window.activeTextEditor)})),kA(e,Or.window.activeTextEditor)}var di=j(require("vscode")),mxe=new Map([["SX","SELECT"],["WX","WHERE"],["GX","GROUP BY"],["HX","HAVING"],["OX","ORDER BY"],["FX","FROM"],["JX","JOIN"],["LX","LIMIT"],["IX","INSERT INTO"],["UX","UPDATE"],["DX","DELETE FROM"],["CX","CREATE TABLE"]]);function SJ(t){let e=di.workspace.onDidChangeTextDocument(async n=>{if(n.document.languageId!=="sql"&&n.document.languageId!=="mssql"||n.contentChanges.length!==1)return;let r=n.contentChanges[0];if(r.text!==" ")return;let i=di.window.activeTextEditor;if(!i||i.document!==n.document)return;let o=n.document.lineAt(r.range.start.line).text;for(let[a,l]of mxe)if(new RegExp(`\\b${a}\\s$`,"i").test(o)){let u=o.toUpperCase().lastIndexOf(a.toUpperCase());if(u>=0){let d=new di.Position(r.range.start.line,u),E=new di.Position(r.range.start.line,u+a.length+1);await i.edit(f=>{f.replace(new di.Range(d,E),l+" ")}),["SELECT","FROM","JOIN"].includes(l)&&setTimeout(()=>{di.commands.executeCommand("editor.action.triggerSuggest")},100);break}}});t.subscriptions.push(e)}Nu();var RJ=[{id:"mtxr.sqltools",name:"SQLTools"},{id:"ms-mssql.mssql",name:"Microsoft SQL Server"},{id:"oracle.oracledevtools",name:"Oracle Developer Tools"},{id:"cweijan.vscode-mysql-client2",name:"MySQL"},{id:"ckolkman.vscode-postgres",name:"PostgreSQL"}];async function gxe(t){let e=V.workspace.getConfiguration("netezza");if(!e.get("showConflictWarnings",!0))return;let r=[];for(let a of RJ)V.extensions.getExtension(a.id)&&r.push(a.name);let s=V.extensions.all.filter(a=>{let l=a.packageJSON;if(!l||a.id==="krzysztof-d.justybaselite-netezza"||RJ.some(E=>E.id===a.id))return!1;let c=l.activationEvents?.some(E=>E.includes("onLanguage:sql")||E.includes("onLanguage:mssql")),u=l.contributes?.languages?.some(E=>E.id==="sql"||E.extensions?.includes(".sql"));return(l.displayName||"")==="SQL Language Basics"?!1:c||u}).map(a=>a.packageJSON.displayName||a.id),o=[...r,...s];if(o.length>0){let a=o.length===1?`SQL extension detected "${o[0]}" which may cause conflicts (e.g. duplicate keybindings F5, Ctrl+Enter).`:`SQL extensions detected which may cause conflicts: ${o.join(", ")}. Some functions (e.g. F5, Ctrl+Enter) may be duplicated.`;await V.window.showWarningMessage(a,"OK","Do not show again")==="Do not show again"&&await e.update("showConflictWarnings",!1,V.ConfigurationTarget.Global)}}async function Ixe(t,e,n,r){if(r){let o=r.getDatabases(n);if(o&&o.length>0)return o.map(a=>a.DATABASE)}let i=`SELECT DATABASE FROM ${te.DATABASE} ORDER BY DATABASE`,s=await Ee(t,i,!0,e,n,void 0,void 0,void 0);if(s.data&&s.data.length>0){let o=s.data.map(a=>String(a[0]));if(r){let a=o.map(l=>({DATABASE:l,label:l,kind:9,detail:"Database"}));r.setDatabases(n,a)}return o}return[]}async function _xe(t){console.log("Netezza extension: Activating..."),gxe(t);let e=new Ji(t),n=new ch(t);await n.initialize();let r=new $E(t,e,n),i=new wu(t.extensionUri);t.subscriptions.push({dispose:()=>{e.closeAllDocumentPersistentConnections();try{cD()}catch(z){console.warn("Failed to dispose shared output channel",z)}}});let s=V.window.createOutputChannel("Netezza"),o=fJ(t,e),{updateFn:a}=EJ(t,e),{updateFn:l}=hJ(t,e),c=()=>{$A(o,e)};a(),l(),c(),e.onDidChangeActiveConnection(z=>{a(),l(),c(),z&&!n.hasConnectionPrefetchTriggered(z)&&n.triggerConnectionPrefetch(z,ie=>Ee(t,ie,!0,e,z))}),e.onDidChangeConnections(()=>{a();let z=e.getActiveConnectionName();z&&!n.hasConnectionPrefetchTriggered(z)&&n.triggerConnectionPrefetch(z,ie=>Ee(t,ie,!0,e,z))}),e.onDidChangeDocumentConnection(z=>{a(),l(),c();let ie=e.getDocumentConnection(z);ie&&!n.hasConnectionPrefetchTriggered(ie)&&n.triggerConnectionPrefetch(ie,Se=>Ee(t,Se,!0,e,ie))}),e.onDidChangeDocumentDatabase(()=>{l()}),V.window.onDidChangeActiveTextEditor(()=>{a(),l(),c()}),console.log("Netezza extension: Registering SchemaSearchProvider...");let u=new Lu(t.extensionUri,t,n,e);console.log("Netezza extension: Registering QueryHistoryView...");let d=new Du(t.extensionUri,t),E=V.window.createTreeView("netezza.schema",{treeDataProvider:r,showCollapseAll:!0});t.subscriptions.push(V.window.registerWebviewViewProvider(wu.viewType,i),V.window.registerWebviewViewProvider(Lu.viewType,u),V.window.registerWebviewViewProvider(Du.viewType,d));let f=pJ();TJ(t,f),t.subscriptions.push(V.window.onDidChangeActiveTextEditor(z=>{if(z&&z.document&&z.document.languageId==="sql"){let ie=z.document.uri.scheme;if(ie==="file"||ie==="untitled"){let Se=z.document.uri.toString();i.setActiveSource(Se)}}}));let p=aA({context:t,connectionManager:e,metadataCache:n,schemaProvider:r,schemaTreeView:E});t.subscriptions.push(...p);let h=Z3({context:t,connectionManager:e,outputChannel:s});t.subscriptions.push(...h);let T=cK({context:t,connectionManager:e,outputChannel:s});t.subscriptions.push(...T);let S=dJ({context:t,connectionManager:e,resultPanelProvider:i});t.subscriptions.push(...S);let A=new WR(e,t,n),R=[V.commands.registerCommand("netezza.copilotFixSql",async()=>{try{await A.fixSql()}catch(z){let ie=z instanceof Error?z.message:String(z);V.window.showErrorMessage(`Copilot Error: ${ie}`)}}),V.commands.registerCommand("netezza.copilotOptimizeSql",async()=>{try{await A.optimizeSql()}catch(z){let ie=z instanceof Error?z.message:String(z);V.window.showErrorMessage(`Copilot Error: ${ie}`)}}),V.commands.registerCommand("netezza.copilotExplainSql",async()=>{try{await A.explainSql()}catch(z){let ie=z instanceof Error?z.message:String(z);V.window.showErrorMessage(`Copilot Error: ${ie}`)}}),V.commands.registerCommand("netezza.copilotCustomQuestion",async()=>{try{await A.askCustomQuestion()}catch(z){let ie=z instanceof Error?z.message:String(z);V.window.showErrorMessage(`Copilot Error: ${ie}`)}}),V.commands.registerCommand("netezza.copilotGenerateSql",async()=>{try{await A.generateSqlInteractive()}catch(z){let ie=z instanceof Error?z.message:String(z);V.window.showErrorMessage(`Copilot Error: ${ie}`)}}),V.commands.registerCommand("justyBaseLite.copilot.changeModel",async()=>{try{await A.changeModel()}catch(z){let ie=z instanceof Error?z.message:String(z);V.window.showErrorMessage(`Copilot Error: ${ie}`)}}),V.commands.registerCommand("justyBaseLite.copilot.clearModel",async()=>{try{await A.clearPersistedModel()}catch(z){let ie=z instanceof Error?z.message:String(z);V.window.showErrorMessage(`Copilot Error: ${ie}`)}}),V.commands.registerCommand("netezza.describeDataWithCopilot",async(z,ie)=>{try{await A.describeDataWithCopilot(z,ie)}catch(Se){let gt=Se instanceof Error?Se.message:String(Se);V.window.showErrorMessage(`Copilot Error: ${gt}`)}}),V.commands.registerCommand("netezza.fixSqlError",async(z,ie)=>{try{await A.fixSqlError(z,ie)}catch(Se){let gt=Se instanceof Error?Se.message:String(Se);V.window.showErrorMessage(`Copilot Error: ${gt}`)}})];t.subscriptions.push(...R);let m=A.registerChatParticipant(t);m&&t.subscriptions.push(m);let N=new YR(A);t.subscriptions.push(V.lm.registerTool("netezza_get_sql_schema",N));let L=new VR(A);t.subscriptions.push(V.lm.registerTool("netezza_get_columns",L));let I=new qR(A);t.subscriptions.push(V.lm.registerTool("netezza_get_tables",I));let D=new XR(A);t.subscriptions.push(V.lm.registerTool("netezza_execute_query",D));let g=new zR(A);t.subscriptions.push(V.lm.registerTool("netezza_sample_data",g));let w=new jR(A);t.subscriptions.push(V.lm.registerTool("netezza_explain_plan",w));let x=new KR(A);t.subscriptions.push(V.lm.registerTool("netezza_search_schema",x));let U=new JR(A);t.subscriptions.push(V.lm.registerTool("netezza_table_stats",U));let H=new QR(A);t.subscriptions.push(V.lm.registerTool("netezza_dependencies",H));let X=new ZR(A);t.subscriptions.push(V.lm.registerTool("netezza_validate_sql",X));let Q=new eA(A);t.subscriptions.push(V.lm.registerTool("netezza_get_databases",Q));let K=new tA(A);t.subscriptions.push(V.lm.registerTool("netezza_get_schemas",K));let Z=new nA(A);t.subscriptions.push(V.lm.registerTool("netezza_get_procedures",Z));let Oe=new rA(A);t.subscriptions.push(V.lm.registerTool("netezza_get_views",Oe));let ae=new iA(A);t.subscriptions.push(V.lm.registerTool("netezza_get_external_tables",ae));let Ht=new sA(A);t.subscriptions.push(V.lm.registerTool("netezza_get_object_definition",Ht));let WA=new oA(A);t.subscriptions.push(V.lm.registerTool("netezza_reference",WA)),t.subscriptions.push(V.commands.registerCommand("netezza.viewEditData",z=>{lh.createOrShow(t.extensionUri,z,t,e)}),V.commands.registerCommand("netezza.createProcedure",async z=>{let ie=z;if(!ie||!ie.dbName){V.window.showErrorMessage("Invalid selection. Select a Procedure folder.");return}let Se=await V.window.showInputBox({prompt:"Enter new procedure name",placeHolder:"NEW_PROCEDURE",value:"NEW_PROCEDURE"});if(Se===void 0)return;let gt=Se.trim()||"NEW_PROCEDURE",ar=`CREATE OR REPLACE PROCEDURE ${ie.dbName}.SCHEMA.${gt}(INTEGER)
RETURNS INTEGER
EXECUTE AS CALLER
LANGUAGE NZPLSQL AS
BEGIN_PROC
DECLARE
    arg1 ALIAS FOR $1;
BEGIN
    -- YOUR CODE GOES HERE
    
    EXCEPTION
    WHEN OTHERS THEN
        ROLLBACK;
        RAISE EXCEPTION  'Procedure failed: %', sqlerrm;
        --RAISE NOTICE 'Caught error, continuing %', sqlerrm;

END;
END_PROC;`,Gt=await V.workspace.openTextDocument({content:ar,language:"sql"});await V.window.showTextDocument(Gt)}),V.commands.registerCommand("netezza.toggleKeepConnectionForTab",()=>{let z=V.window.activeTextEditor;if(!z||z.document.languageId!=="sql"){V.window.showWarningMessage("Please open a SQL file first.");return}let ie=z.document.uri.toString(),Se=e.toggleDocumentKeepConnectionOpen(ie);$A(o,e),V.window.showInformationMessage(Se?"Keep connection: ENABLED for this tab - connection will remain open after queries":"Keep connection: DISABLED for this tab - connection will be closed after each query")}),V.commands.registerCommand("netezza.selectActiveConnection",async()=>{let z=await e.getConnections();if(z.length===0){V.window.showWarningMessage("No connections configured. Please connect first.");return}let ie=await V.window.showQuickPick(z.map(Se=>Se.name),{placeHolder:"Select Active Connection"});ie&&(await e.setActiveConnection(ie),V.window.showInformationMessage(`Active connection set to: ${ie}`))}),V.commands.registerCommand("netezza.selectConnectionForTab",async()=>{let z=V.window.activeTextEditor;if(!z||z.document.languageId!=="sql"){V.window.showWarningMessage("This command is only available for SQL files");return}let ie=await e.getConnections();if(ie.length===0){V.window.showWarningMessage("No connections configured. Please connect first.");return}let Se=z.document.uri.toString(),gt=e.getDocumentConnection(Se)||e.getActiveConnectionName(),It=ie.map(Gt=>({label:Gt.name,description:gt===Gt.name?"$(check) Currently selected":`${Gt.host}:${Gt.port}/${Gt.database}`,name:Gt.name})),ar=await V.window.showQuickPick(It,{placeHolder:"Select connection for this SQL tab"});ar&&(e.setDocumentConnection(Se,ar.name),V.window.showInformationMessage(`Connection for this tab set to: ${ar.name}`))}),V.commands.registerCommand("netezza.selectDatabaseForTab",async()=>{let z=V.window.activeTextEditor;if(!z||z.document.languageId!=="sql"){V.window.showWarningMessage("This command is only available for SQL files");return}let ie=z.document.uri.toString(),Se=e.getConnectionForExecution(ie);if(!Se){V.window.showWarningMessage("No connection selected. Please select a connection first.");return}try{let gt=await Ixe(t,e,Se,n);if(gt.length===0){V.window.showWarningMessage("No databases found on server.");return}let It=await e.getEffectiveDatabase(ie),ar=gt.map(Cr=>({label:Cr,description:Cr===It?"$(check) Currently selected":"",database:Cr})),Gt=await V.window.showQuickPick(ar,{placeHolder:`Select database for this SQL tab (current: ${It||"default"})`});Gt&&(e.setDocumentDatabase(ie,Gt.database),V.window.showInformationMessage(`Database for this tab set to: ${Gt.database} (reconnecting...)`))}catch(gt){let It=gt instanceof Error?gt.message:String(gt);V.window.showErrorMessage(`Failed to get database list: ${It}`)}}),V.commands.registerCommand("netezza.openLogin",()=>{HE.createOrShow(t.extensionUri,e)}),V.commands.registerCommand("netezza.refreshSchema",async()=>{await n.clearCache(),r.refresh(),V.window.showInformationMessage("Schema refreshed (Cache cleared)")}),V.commands.registerCommand("netezza.jumpToSchema",async()=>{let z=V.window.activeTextEditor;if(!z)return;let ie=z.document,Se=z.selection,gt=ie.offsetAt(Se.active),It=Zn.getObjectAtPosition(ie.getText(),gt);It?V.commands.executeCommand("netezza.revealInSchema",It):V.window.showWarningMessage("No object found at cursor")}),V.commands.registerCommand("netezza.runScriptFromLens",async(z,ie)=>{try{let Se=await V.workspace.openTextDocument(z),gt=Se.getText(ie).trim()||Se.lineAt(ie.start.line).text.trim();if(!gt){V.window.showWarningMessage("No script command found");return}let It=gt.split(/\s+/),ar=It[0]||"",Gt=/python(\.exe)?$/i.test(ar)&&It.length>=2&&It[1].toLowerCase().endsWith(".py"),Cr=ar.toLowerCase().endsWith(".py"),rE=V.workspace.getConfiguration("netezza").get("pythonPath")||"python",bo="";if(Gt){let Za=It[0],nu=It[1],YA=It.slice(2);bo=Ms(Za,nu,YA)}else if(Cr){let Za=ar,nu=It.slice(1);bo=Ms(rE,Za,nu)}else bo=Ms(rE,"",It);let iE=V.window.createTerminal({name:"Netezza: Script"});iE.show(!0),iE.sendText(bo,!0),V.window.showInformationMessage(`Running script: ${bo}`)}catch(Se){let gt=Se instanceof Error?Se.message:String(Se);V.window.showErrorMessage(`Error running script: ${gt}`)}}),V.commands.registerCommand("netezza.clearAutocompleteCache",async()=>{await V.window.showWarningMessage("Are you sure you want to clear the autocomplete cache? This will remove all cached databases, schemas, tables, and columns.",{modal:!0},"Clear Cache")==="Clear Cache"&&(await n.clearCache(),V.window.showInformationMessage("Autocomplete cache cleared successfully. Cache will be rebuilt on next use."))}),V.commands.registerCommand("netezza.copySelection",()=>{i.triggerCopySelection()}),V.commands.registerCommand("netezza.openEtlDesigner",()=>{ai.setConnectionManager(e),ai.createOrShow(t)}),V.commands.registerCommand("netezza.newEtlProject",async()=>{let z=await V.window.showInputBox({prompt:"Enter ETL project name",value:"New ETL Project"});z&&(Ws.getInstance().createProject(z),ai.setConnectionManager(e),ai.createOrShow(t))}),V.commands.registerCommand("netezza.openEtlProject",async()=>{let z=await V.window.showOpenDialog({filters:{"ETL Project":["etl.json"]},canSelectMany:!1});if(z&&z[0])try{let Se=await Ws.getInstance().loadProject(z[0].fsPath);ai.setConnectionManager(e),ai.createOrShow(t,Se),V.window.showInformationMessage(`ETL project loaded: ${Se.name}`)}catch(ie){V.window.showErrorMessage(`Failed to load ETL project: ${ie}`)}}),V.commands.registerCommand("netezza.runEtlProject",async()=>{let ie=Ws.getInstance().getCurrentProject();if(!ie){V.window.showWarningMessage("No ETL project is currently open. Please open or create a project first.");return}ai.setConnectionManager(e),ai.createOrShow(t,ie),V.window.showInformationMessage("ETL project opened. Use the Run button in the designer to execute.")})),t.subscriptions.push(V.languages.registerDocumentLinkProvider({language:"sql"},new sh),V.languages.registerFoldingRangeProvider({language:"sql"},new oh));let Qa=new rh(t,n,e);t.subscriptions.push(V.languages.registerCompletionItemProvider(["sql","mssql"],Qa,"."," ")),SJ(t),jD(t),t.subscriptions.push(V.languages.registerCodeActionsProvider(["sql","netezza-sql"],new Pu,{providedCodeActionKinds:Pu.providedCodeActionKinds})),console.log("Netezza extension: Activation complete.")}function Nxe(){}0&&(module.exports={activate,deactivate});
/*! Bundled license information:

normalize-path/index.js:
  (*!
   * normalize-path <https://github.com/jonschlinkert/normalize-path>
   *
   * Copyright (c) 2014-2018, Jon Schlinkert.
   * Released under the MIT License.
   *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

archiver/lib/error.js:
archiver/lib/core.js:
  (**
   * Archiver Core
   *
   * @ignore
   * @license [MIT]{@link https://github.com/archiverjs/node-archiver/blob/master/LICENSE}
   * @copyright (c) 2012-2014 Chris Talkington, contributors.
   *)

crc-32/crc32.js:
  (*! crc32.js (C) 2014-present SheetJS -- http://sheetjs.com *)

zip-stream/index.js:
  (**
   * ZipStream
   *
   * @ignore
   * @license [MIT]{@link https://github.com/archiverjs/node-zip-stream/blob/master/LICENSE}
   * @copyright (c) 2014 Chris Talkington, contributors.
   *)

archiver/lib/plugins/zip.js:
  (**
   * ZIP Format Plugin
   *
   * @module plugins/zip
   * @license [MIT]{@link https://github.com/archiverjs/node-archiver/blob/master/LICENSE}
   * @copyright (c) 2012-2014 Chris Talkington, contributors.
   *)

archiver/lib/plugins/tar.js:
  (**
   * TAR Format Plugin
   *
   * @module plugins/tar
   * @license [MIT]{@link https://github.com/archiverjs/node-archiver/blob/master/LICENSE}
   * @copyright (c) 2012-2014 Chris Talkington, contributors.
   *)

archiver/lib/plugins/json.js:
  (**
   * JSON Format Plugin
   *
   * @module plugins/json
   * @license [MIT]{@link https://github.com/archiverjs/node-archiver/blob/master/LICENSE}
   * @copyright (c) 2012-2014 Chris Talkington, contributors.
   *)

archiver/index.js:
  (**
   * Archiver Vending
   *
   * @ignore
   * @license [MIT]{@link https://github.com/archiverjs/node-archiver/blob/master/LICENSE}
   * @copyright (c) 2012-2014 Chris Talkington, contributors.
   *)
*/
